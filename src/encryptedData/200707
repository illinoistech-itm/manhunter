From java-user-return-28954-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 01 10:50:18 2007
Return-Path: <java-user-return-28954-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48369 invoked from network); 1 Jul 2007 10:50:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jul 2007 10:50:16 -0000
Received: (qmail 37495 invoked by uid 500); 1 Jul 2007 10:50:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36734 invoked by uid 500); 1 Jul 2007 10:50:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36723 invoked by uid 99); 1 Jul 2007 10:50:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Jul 2007 03:50:11 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.4.36.66] (HELO mail.agderweb.no) (212.4.36.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Jul 2007 03:50:05 -0700
Received: from melkor [212.4.54.150] by mail.agderweb.no with ESMTP
  (SMTPD-8.22) id A6E605C8; Sun, 01 Jul 2007 12:50:14 +0200
Date: Sun, 01 Jul 2007 12:49:36 +0200
To: java-user@lucene.apache.org
Subject: Re: LUCENE on Eclipse
Reply-To: aleksander.stensby@integrasco.no
From: "Aleksander M. Stensby" <aleksander.stensby@integrasco.no>
Organization: Integrasco A/S
Content-Type: text/plain; format=flowed; delsp=yes; charset=utf-8
MIME-Version: 1.0
References: <OFA96EAD62.7701F2CD-ON88257307.002B901E-88257307.002BCBF6@il.ibm.com> <46825D3C.3090204@lingway.com> <E19963B4-34BF-442D-B2DE-79150F38C06A@apache.org> <46837F8E.7070703@lingway.com> <FD819A62-4383-4633-BB14-7DB556A1A2D5@apache.org> <4683A698.7080809@yahoo.fr> <Pine.LNX.4.58.0706281139560.12259@hal.rescomp.berkeley.edu>
Content-Transfer-Encoding: 7bit
Message-ID: <op.tur8cyh6oftp72@melkor>
In-Reply-To: <Pine.LNX.4.58.0706281139560.12259@hal.rescomp.berkeley.edu>
User-Agent: Opera Mail/9.20 (Win32)
X-Antivirus: avast! (VPS 000752-7, 07/01/2007), Outbound message
X-Antivirus-Status: Clean
X-Virus-Checked: Checked by ClamAV on apache.org

Like Chris said, or you can use maven and its eclipse plugin. Maven allows  
you to automatically download necessary libraries.

On Thu, 28 Jun 2007 20:43:24 +0200, Chris Hostetter  
<hossman_lucene@fucit.org> wrote:

>
> When starting a new discussion on a mailing list, please do not reply to
> an existing message, instead start a fresh email.  Even if you change the
> subject line of your email, other mail headers still track which thread
> you replied to and your question is "hidden" in that thread and gets less
> attention.   It makes following discussions in the mailing list archives
> particularly difficult.
> See Also:  http://en.wikipedia.org/wiki/Thread_hijacking
>
> : i would like if you could help me finding some documentation about how
> : to import lucene source into eclipse IDE. I'm a new user for this API,
> : and i would like to learn how to use it as i seams powerful...
>
> :  I would be very grateful if somebody have any tutorial; and i propose
> : to work on it's translation in French language.
>
> the website has a getting started tutorial that includes info on
> downloading lucene.  opening in eclipse should be no differnet then any
> other code base...
>
> http://lucene.apache.org/java/docs/gettingstarted.html
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 
Aleksander M. Stensby
Senior Software Developer
Integrasco A/S
aleksander.stensby@integrasco.no
Tlf.: +47 41 22 82 72

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28955-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 01 21:42:47 2007
Return-Path: <java-user-return-28955-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62030 invoked from network); 1 Jul 2007 21:42:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jul 2007 21:42:45 -0000
Received: (qmail 66039 invoked by uid 500); 1 Jul 2007 21:42:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65992 invoked by uid 500); 1 Jul 2007 21:42:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65974 invoked by uid 99); 1 Jul 2007 21:42:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Jul 2007 14:42:38 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.134.186 as permitted sender)
Received: from [209.85.134.186] (HELO mu-out-0910.google.com) (209.85.134.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Jul 2007 14:42:34 -0700
Received: by mu-out-0910.google.com with SMTP id g7so1655208muf
        for <java-user@lucene.apache.org>; Sun, 01 Jul 2007 14:42:13 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=o2b912afnNhwkHaerdPpZXsu5W6Y1ApCcdip+eUXaMUnmGBiBjCTUhndrCQ8RJeUUQ0gmY0PDut157NZjpshe352HgABFX7mbluMA7SS6j5N3BLEdvVyrT75nEBQGOrLvENCoe124+1dI+27eLS+p10nRClImCTKtchbQ1DsxeE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=onWEaczXfvyoSFqOBoQ+3tMgFzKP+xcaqvcji1psXHR/6AJVv0bH9m+grv+PvNhXwkKxUbozIAbi3WlPp0hKTR2PX3iOpQ5iTJ9iE66tTc8dYktsAYDqEvk/ISyK/HV8IA+Ob9WvGFfkhia1r66B3hmT7GJkfxJq3S6kkVQn1kc=
Received: by 10.82.100.1 with SMTP id x1mr11605370bub.1183326132727;
        Sun, 01 Jul 2007 14:42:12 -0700 (PDT)
Received: by 10.82.167.12 with HTTP; Sun, 1 Jul 2007 14:42:12 -0700 (PDT)
Message-ID: <359a92830707011442y7dc4e5aeyd6c7504f67930ce9@mail.gmail.com>
Date: Sun, 1 Jul 2007 17:42:12 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Adding Documents to index in a batch process
In-Reply-To: <20070629010940.GA17811@dummy>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_57532_5743471.1183326132700"
References: <20070628164839.GA16302@dummy>
	 <359a92830706281139h3fb5dc3g1e0f3ca2cf14405b@mail.gmail.com>
	 <20070629010940.GA17811@dummy>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_57532_5743471.1183326132700
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

It's almost entirely trivial. Note that the IndexHandler is the name of my
singleton class....

Here's the meat of the class....

   private static IndexSearcher indexSearcher;

    public static synchronized IndexSearcher getSearcher()
        throws Exception
    {
        if (IndexHandler.indexSearcher == null) {
            IndexHandler.indexSearcher = new IndexSearcher(index);
        }

        return IndexHandler.indexSearcher;
    }


and you call it by
IndexHandler.getSearcher().......

Erick

On 6/28/07, Kai Weber <kai.weber@glorybox.de> wrote:
>
> * Erick Erickson <erickerickson@gmail.com>:
> > I guess I don't understand the problem. Can you build the documents
> > from within a loop or not? If you can, it's simple...
> >
> > open indexwriter
> > while (build a document)
> >    write to index
> >
> > close/optimize.
> >
> > Or are you saying that you can't build from within a loop?
>
> Thats true, no loop.
>
> I think I have to save the IndexWriter instance somewhere in application
> scope or wrap it as a singleton.
>
> Is there any example code I could reuse or learn from?
>
> Kai
> --
> * http://www.glorybox.de/
>   PGP 1024D/594D4132 B693 5073 013F 7F56 5DCC  D9C2 E6B5 448C 594D 4132
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_57532_5743471.1183326132700--

From java-user-return-28956-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 01 21:51:25 2007
Return-Path: <java-user-return-28956-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64185 invoked from network); 1 Jul 2007 21:51:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jul 2007 21:51:24 -0000
Received: (qmail 79955 invoked by uid 500); 1 Jul 2007 21:51:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79920 invoked by uid 500); 1 Jul 2007 21:51:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79909 invoked by uid 99); 1 Jul 2007 21:51:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Jul 2007 14:51:18 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Jul 2007 14:51:14 -0700
Received: by ug-out-1314.google.com with SMTP id c2so1013543ugf
        for <java-user@lucene.apache.org>; Sun, 01 Jul 2007 14:50:52 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ZxZGpN8nc5oT02yNfnXel661z0pBa9sSMCUxPqniHGrU1OPrW1394Mefix5J9MAq8iD0CVMQ66BqEqKzrbKoWTnfo0iCi3gOPU94Hism0DUXxXdeJ3HFILArHUj4BO6/KpUV3gs8kq8k9r1mvkQLeFXhoC48Yphofo1EWtpyKEs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=WggZM1IXaEVOpmwtzMZcQ5+qCFD+BeDeqtvzAZ+LRizbJrEw8OOiINsT/lwlGVwg6pdFBf8mr0LHHD/FEEcbuv2WC5Ii7lnqDGhuA7aBN7VtSp3v6Y45d93+B3pHRiSCYKWPBOyryQRvVKcy4ViR6UF38vwnMH5DONTKbE3wSpw=
Received: by 10.82.186.5 with SMTP id j5mr11566180buf.1183326652116;
        Sun, 01 Jul 2007 14:50:52 -0700 (PDT)
Received: by 10.82.167.12 with HTTP; Sun, 1 Jul 2007 14:50:52 -0700 (PDT)
Message-ID: <359a92830707011450s55952a61w1a915791b9585959@mail.gmail.com>
Date: Sun, 1 Jul 2007 17:50:52 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Luke faster + Index Searcher is slow
In-Reply-To: <ede880620706290657h3fd116f7q96ed123b4da376e6@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_57584_27229790.1183326652081"
References: <ede880620706280903y7a03fef3x5a9d3dd0c2cde828@mail.gmail.com>
	 <E7D8FAA3-A910-495D-8915-309E8B57374D@gmail.com>
	 <ede880620706290657h3fd116f7q96ed123b4da376e6@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_57584_27229790.1183326652081
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

What is your output? I'd expect it to go down. What are you seeing?

Erick

On 6/29/07, Nott <bharath.nott@gmail.com> wrote:
>
> Hi
> I even tried  like this . But I'm not getting any benfifts.  How to use
> Expert Search can you assist ?
>
>
>                    File indexFile = new File(fileName);
>                     FSDirectory dir = FSDirectory.getDirectory(indexFile);
>                     indexSearcher =new IndexSearcher(dir);
> int i =0;
> while (i < 10)
> {
> long startime = System.currentMilliTimes();
> hits = indexSearcher.search(query);
> long endTime= System.currentMilliTimes();
> print ("TOTAL TIME TAKE : " + (endTime-startTime));
> }
>
>
> Bharath
>
>
> On 6/28/07, Grant Ingersoll <grant.ingersoll@gmail.com> wrote:
> >
> > Are you opening the IndexSearcher every time you query?  This is a
> > costly operation.
> >
> > -Grant
> >
> > On Jun 28, 2007, at 12:03 PM, Nott wrote:
> >
> > > I  have an index in one file that has a size of abt 18GB of data
> > > When i run some queries on Luke the response comes in < 40 ms but
> > > the same
> > > when I use IndexSearcher gives me in 300ms -600 ms
> > > Any suggestions ?
> > > The code i use is
> > >                   File indexFile = new File(fileName);
> > >                    FSDirectory dir = FSDirectory.getDirectory
> > > (indexFile);
> > >                    indexSearcher =new IndexSearcher(dir);
> > >                   hits = indexSearcher.search(query);
> > >
> > >
> > > On 6/22/07, Andrzej Bialecki <ab@getopt.org> wrote:
> > >>
> > >> Hi all,
> > >>
> > >> I just released Luke 0.7.1, the Lucene Index Toolbox. As usually, you
> > >> can get it here:
> > >>
> > >>         http://www.getopt.org/luke/
> > >>
> > >> This minor release is mostly an upgrade to the official Lucene 2.2.0
> > >> release JARs.
> > >>
> > >> The following changes have been made in this release:
> > >> * Added a term distribution analysis plugin by Mark Harwood.
> > >> * Fixed IndexGate class to correctly show deletable files.
> > >>
> > >>
> > >> --
> > >> Best regards,
> > >> Andrzej Bialecki     <><
> > >>   ___. ___ ___ ___ _ _   __________________________________
> > >> [__ || __|__/|__||\/|  Information Retrieval, Semantic Web
> > >> ___|||__||  \|  ||  |  Embedded Unix, System Integration
> > >> http://www.sigram.com  Contact: info at sigram dot com
> > >>
> > >>
> > >>
> > >> ---------------------------------------------------------------------
> > >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >> For additional commands, e-mail: java-user-help@lucene.apache.org
> > >>
> > >>
> > >
> > >
> > > --
> > > ~B
> >
> > ------------------------------------------------------
> > Grant Ingersoll
> > http://www.grantingersoll.com/
> > http://lucene.grantingersoll.com
> > http://www.paperoftheweek.com/
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> --
> ~B
>

------=_Part_57584_27229790.1183326652081--

From java-user-return-28957-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 02 00:31:13 2007
Return-Path: <java-user-return-28957-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89979 invoked from network); 2 Jul 2007 00:31:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jul 2007 00:31:11 -0000
Received: (qmail 4311 invoked by uid 500); 2 Jul 2007 00:31:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3957 invoked by uid 500); 2 Jul 2007 00:31:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3945 invoked by uid 99); 2 Jul 2007 00:31:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Jul 2007 17:31:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.177] (HELO spunkymail-a7.g.dreamhost.com) (208.97.132.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Jul 2007 17:31:04 -0700
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a7.g.dreamhost.com (Postfix) with ESMTP id 0EA535C2FF
	for <java-user@lucene.apache.org>; Sun,  1 Jul 2007 17:30:42 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
Content-Transfer-Encoding: 7bit
Message-Id: <64BF1048-B473-44AE-BE10-D1A2CD4A59B3@apache.org>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: Grant Ingersoll <gsingers@apache.org>
Subject: Exchange/PST/Mail parsing
Date: Sun, 1 Jul 2007 20:30:41 -0400
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Anyone have any recommendations on a decent, open (doesn't have to be  
Apache license, but would prefer non-GPL if possible), extractor for  
MS Exchange and/or PST files?  The Zoe link on the FAQ [1] seems dead.

For mbox, I think mstor will suffice for me and I think tropo (from  
the FAQ should work for IMAP).  Does anyone have experience with  
http://aperture.sourceforge.net/

[1] http://wiki.apache.org/lucene-java/LuceneFAQ#head- 
bcba2effabe224d5fb8c1761e4da1fedceb9800e

Cheers,
Grant



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28958-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 02 08:58:05 2007
Return-Path: <java-user-return-28958-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98418 invoked from network); 2 Jul 2007 08:58:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jul 2007 08:58:03 -0000
Received: (qmail 98165 invoked by uid 500); 2 Jul 2007 08:57:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98121 invoked by uid 500); 2 Jul 2007 08:57:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98110 invoked by uid 99); 2 Jul 2007 08:57:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jul 2007 01:57:57 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jmuguruza@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jul 2007 01:57:53 -0700
Received: by ug-out-1314.google.com with SMTP id c2so1084701ugf
        for <java-user@lucene.apache.org>; Mon, 02 Jul 2007 01:57:31 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=rZfMSF4nPT10Vq8yuXVqiyeW6t6asP4vsm6ENB9wil1CiN+E/FPbysdYdcDv78ntAXtNsQnpQtUkt9GF2+cET70BuxNTDgVGiJvcWKcv/Jj7BfDd8soGh7wrnQAtCU/7qSVot/UFBRouDVqQL/wxzrMQQZfwFat5WOykofF9my8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=nM08BtAErIYZucpIRg+ql/jkDr7F432+p/44IH2VPD90lArWLJT+AWCBrcHVVSlBgUWODoC/TIR0ED1eRjbK7yJQ81IeUTExXyZmkyeGA9JwZ/efF08I/zfB7zdW+AgmbV25URIzPJIb8HlDxvWYE+GR0FX0P2zIPcIFLnV8tFQ=
Received: by 10.66.217.5 with SMTP id p5mr4926602ugg.1183366651261;
        Mon, 02 Jul 2007 01:57:31 -0700 (PDT)
Received: by 10.66.240.15 with HTTP; Mon, 2 Jul 2007 01:57:31 -0700 (PDT)
Message-ID: <f071061b0707020157h536e8b88lbee63fa22dce036@mail.gmail.com>
Date: Mon, 2 Jul 2007 10:57:31 +0200
From: jm <jmuguruza@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Exchange/PST/Mail parsing
In-Reply-To: <64BF1048-B473-44AE-BE10-D1A2CD4A59B3@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_28840_18024226.1183366651221"
References: <64BF1048-B473-44AE-BE10-D1A2CD4A59B3@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_28840_18024226.1183366651221
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

We had to develop vb code to convert pst to eml files.

I am using mbox, works fine for me. And I am also using aperture, but only
for extracting text from non-mail files (like office etc), works fine too.

On 7/2/07, Grant Ingersoll <gsingers@apache.org> wrote:
>
> Anyone have any recommendations on a decent, open (doesn't have to be
> Apache license, but would prefer non-GPL if possible), extractor for
> MS Exchange and/or PST files?  The Zoe link on the FAQ [1] seems dead.
>
> For mbox, I think mstor will suffice for me and I think tropo (from
> the FAQ should work for IMAP).  Does anyone have experience with
> http://aperture.sourceforge.net/
>
> [1] http://wiki.apache.org/lucene-java/LuceneFAQ#head-
> bcba2effabe224d5fb8c1761e4da1fedceb9800e
>
> Cheers,
> Grant
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_28840_18024226.1183366651221--

From java-user-return-28959-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 02 09:03:55 2007
Return-Path: <java-user-return-28959-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1055 invoked from network); 2 Jul 2007 09:03:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jul 2007 09:03:54 -0000
Received: (qmail 8867 invoked by uid 500); 2 Jul 2007 09:03:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8831 invoked by uid 500); 2 Jul 2007 09:03:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8804 invoked by uid 99); 2 Jul 2007 09:03:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jul 2007 02:03:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.117.178.41] (HELO ns21.webhostsg.com) (203.117.178.41)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jul 2007 02:03:38 -0700
X-ClientAddr: 202.128.215.30
Received: from xenb04 (30.202-128-215.unknown.qala.com.sg [202.128.215.30])
	by ns21.webhostsg.com (8.12.11/8.12.11) with ESMTP id l6299dxZ001047
	for <java-user@lucene.apache.org>; Mon, 2 Jul 2007 17:09:50 +0800
Message-Id: <200707020909.l6299dxZ001047@ns21.webhostsg.com>
From: "Lee Li Bin" <leelb@xedge.com.sg>
To: <java-user@lucene.apache.org>
Subject: RE: Pagination
Date: Mon, 2 Jul 2007 16:59:14 +0800
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
In-Reply-To: <6e3ae6310706291120x1c3501bajbef2acf7ede0f1bd@mail.gmail.com>
Thread-Index: Ace6e3RnwnzWhBICRxyKJcHy8wqikQCC54jw
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-ns21-MailScanner-Information: Please contact the ISP for more information
X-ns21-MailScanner: Found to be clean
X-ns21-MailScanner-SpamCheck: 
X-MailScanner-From: leelb@xedge.com.sg
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I still have no idea of how to get it done. Can give me some details?

The web application is in jsp btw.

Thanks a lot.

 
Regards,
Lee Li Bin
-----Original Message-----
From: Chris Lu [mailto:chris.lu@gmail.com] 
Sent: Saturday, June 30, 2007 2:21 AM
To: java-user@lucene.apache.org
Subject: Re: Pagination

After search, you will just get an object Hits, and go through all of the
documents by hits.doc(i).

The pagination is controlled by you. Lucene is pre-caching first 200
documents and lazy loading the rest by batch size 200.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_m
inutes

On 6/29/07, Lee Li Bin <leelb@xedge.com.sg> wrote:
>
> Hi,
>
> does anyone knows how to do pagination on jsp page using the number of
> hits
> return? Or any other solutions?
>
>
>
> Do provide me with some sample coding if possible or a step by step guide.
> Sry if I'm asking too much, I'm new to lucene.
>
>
>
> Thanks
>
>
>
>
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28960-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 02 10:18:06 2007
Return-Path: <java-user-return-28960-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29594 invoked from network); 2 Jul 2007 10:18:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jul 2007 10:18:05 -0000
Received: (qmail 71742 invoked by uid 500); 2 Jul 2007 10:17:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71689 invoked by uid 500); 2 Jul 2007 10:17:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71671 invoked by uid 99); 2 Jul 2007 10:17:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jul 2007 03:17:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.221] (HELO web26010.mail.ukl.yahoo.com) (217.12.10.221)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 02 Jul 2007 03:17:54 -0700
Received: (qmail 71191 invoked by uid 60001); 2 Jul 2007 10:17:32 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=qrV33Bl0v1zwZK6p09XWAuK03oxaj4OoZdZWh+K86SdXCCSDn8RG1uW3fzFy7fHVbAHd+SAzvHjk0L2RrLS5os9vTKKm6EirhyLXpsgwhgKg+B3cHx8ngPw+wuOCNkL9MYz+xG/TCvQZIGgHiH24OGEThFSPJrfXa8F3c4FZfEw=;
X-YMail-OSG: nZ7LJT8VM1mpxXXcM_jyZkSUq2MsbRuamvzBF5SKolzjSV1betJbRxiSkie7jiYemoc_kjAvUPQqAJ43f_CBc25ULPsxXw9YfEZWoaWRlUyFauJ4qVmKeYxA_.Q-
Received: from [193.36.230.96] by web26010.mail.ukl.yahoo.com via HTTP; Mon, 02 Jul 2007 10:17:32 GMT
X-Mailer: YahooMailRC/651.38 YahooMailWebService/0.7.41.16
Date: Mon, 2 Jul 2007 10:17:32 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Pagination
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <62924.70068.qm@web26010.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

The Hits class is OK but can be inefficient due to re-running the query unnecessarily.

The class below illustrates how to efficiently retrieve a particular page of results and lends itself to webapps where you don't want to retain server side state (i.e. a Hits object) for each client.
It would make sense to put an upper limit on the "start" parameter (as Google etc do) to avoid consuming to much RAM per client request.

Cheers,
Mark

[Begin code]




package lucene.pagination;

import org.apache.lucene.index.Term;
import org.apache.lucene.search.HitCollector;
import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.search.Query;
import org.apache.lucene.search.ScoreDoc;
import org.apache.lucene.search.TermQuery;
import org.apache.lucene.util.PriorityQueue;

/**
 * A HitCollector that retrieves a specific page of results 
 * @author maharwood
 */
public class HitPageCollector extends HitCollector
{
    //Demo code showing pagination
    public static void main(String[] args) throws Exception
    {
        IndexSearcher s=new IndexSearcher("/indexes/nasa");
        HitPageCollector hpc=new HitPageCollector(1,10);
        Query q=new TermQuery(new Term("contents","sea"));
        s.search(q,hpc);
        ScoreDoc[] sd = hpc.getScores();
        System.out.println("Hits "+ hpc.getStart()+" - "+ hpc.getEnd()+" of "+hpc.getTotalAvailable());
        for (int i = 0; i < sd.length; i++)
        {
            System.out.println(sd[i].doc);
        }
        s.close();
    }

    int nDocs;
    PriorityQueue hq;
    float minScore = 0.0f;
    int totalHits = 0;
    int start;
    int maxNumHits;
    int totalInThisPage;

    public HitPageCollector(int start, int maxNumHits)
    {
        this.nDocs = start + maxNumHits;
        this.start = start;
        this.maxNumHits = maxNumHits;
        hq = new HitQueue(nDocs);
    }

    public void collect(int doc, float score)
    {
        totalHits++;
        if((hq.size()<nDocs)||(score >= minScore))
        {
            ScoreDoc scoreDoc = new ScoreDoc(doc,score);
            hq.insert(scoreDoc);              // update hit queue
            minScore = ((ScoreDoc)hq.top()).score; // reset minScore
        }
        totalInThisPage=hq.size();
    }
    

    public ScoreDoc[] getScores()
    {
        //just returns the number of hits required from the required start point
        /*
            So, given hits:
                1234567890
            and a start of 2 + maxNumHits of 3 should return:
                234
            or, given hits
                12
            should return
                2
            and so, on.
        */
        if (start <= 0)
        {
            throw new IllegalArgumentException("Invalid start :" + start+" - start should be >=1");
        }
        int numReturned = Math.min(maxNumHits, (hq.size() - (start - 1)));
        if (numReturned <= 0)
        {
            return new ScoreDoc[0];
        }
        ScoreDoc[] scoreDocs = new ScoreDoc[numReturned];
        ScoreDoc scoreDoc;
        for (int i = hq.size() - 1; i >= 0; i--) // put docs in array, working backwards from lowest count
        {
            scoreDoc = (ScoreDoc) hq.pop();
            if (i < (start - 1))
            {
                break; //off the beginning of the results array
            }
            if (i < (scoreDocs.length + (start - 1)))
            {
                scoreDocs[i - (start - 1)] = scoreDoc; //within scope of results array
            }
        }
        return scoreDocs;
    }

    public int getTotalAvailable()
    {
        return totalHits;
    }

    public int getStart()
    {
        return start;
    }
    
    public int getEnd()
    {
        return start+totalInThisPage-1;
    }
    
    public class HitQueue extends PriorityQueue 
    {
          public HitQueue(int size) 
          {
            initialize(size);
          }
          public final boolean lessThan(Object a, Object b) 
          {
            ScoreDoc hitA = (ScoreDoc)a;
            ScoreDoc hitB = (ScoreDoc)b;
            if (hitA.score == hitB.score)
              return hitA.doc > hitB.doc;
            else
              return hitA.score < hitB.score;
          }
    }
}



----- Original Message ----
From: Lee Li Bin <leelb@xedge.com.sg>
To: java-user@lucene.apache.org
Sent: Monday, 2 July, 2007 9:59:14 AM
Subject: RE: Pagination

Hi,

I still have no idea of how to get it done. Can give me some details?

The web application is in jsp btw.

Thanks a lot.

 
Regards,
Lee Li Bin
-----Original Message-----
From: Chris Lu [mailto:chris.lu@gmail.com] 
Sent: Saturday, June 30, 2007 2:21 AM
To: java-user@lucene.apache.org
Subject: Re: Pagination

After search, you will just get an object Hits, and go through all of the
documents by hits.doc(i).

The pagination is controlled by you. Lucene is pre-caching first 200
documents and lazy loading the rest by batch size 200.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_m
inutes

On 6/29/07, Lee Li Bin <leelb@xedge.com.sg> wrote:
>
> Hi,
>
> does anyone knows how to do pagination on jsp page using the number of
> hits
> return? Or any other solutions?
>
>
>
> Do provide me with some sample coding if possible or a step by step guide.
> Sry if I'm asking too much, I'm new to lucene.
>
>
>
> Thanks
>
>
>
>
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org






      ___________________________________________________________
Yahoo! Answers - Got a question? Someone out there knows the answer. Try it
now.
http://uk.answers.yahoo.com/ 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28961-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 02 11:36:56 2007
Return-Path: <java-user-return-28961-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59134 invoked from network); 2 Jul 2007 11:36:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jul 2007 11:36:55 -0000
Received: (qmail 32982 invoked by uid 500); 2 Jul 2007 11:36:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32748 invoked by uid 500); 2 Jul 2007 11:36:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32737 invoked by uid 99); 2 Jul 2007 11:36:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jul 2007 04:36:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [81.187.40.70] (HELO fluffy.torchbox.com) (81.187.40.70)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jul 2007 04:36:46 -0700
Received: from grenache.internal.torchbox.com ([192.168.1.81])
	by fluffy.torchbox.com with esmtp (Exim 4.63)
	(envelope-from <nick@torchbox.com>)
	id 1I5KCd-0002oQ-2l
	for java-user@lucene.apache.org; Mon, 02 Jul 2007 12:36:25 +0100
Date: Mon, 2 Jul 2007 12:38:01 +0100 (BST)
From: Nick Burch <nick@torchbox.com>
X-X-Sender: nick@localhost.localdomain
To: java-user@lucene.apache.org
Subject: Re: Exchange/PST/Mail parsing
In-Reply-To: <64BF1048-B473-44AE-BE10-D1A2CD4A59B3@apache.org>
Message-ID: <Pine.LNX.4.64.0707021234380.4093@localhost.localdomain>
References: <64BF1048-B473-44AE-BE10-D1A2CD4A59B3@apache.org>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII; format=flowed
X-Spam-Score: -103.5 (---------------------------------------------------)
Organization: Torchbox Ltd, Registered Company #3983354, Unit 9, Southill Business Park, OX7 3EW, UK
X-Virus-Checked: Checked by ClamAV on apache.org

On Sun, 1 Jul 2007, Grant Ingersoll wrote:
> Anyone have any recommendations on a decent, open (doesn't have to be 
> Apache license, but would prefer non-GPL if possible), extractor for MS 
> Exchange and/or PST files?

There has been an offer to contribute a PST parser to Apache POI. We're 
hoping that Travis will have something to go into the POI scratchpad quite 
soon, but we understand he's currently still working on the first version.

I can only suggest you keep an eye on the poi dev list for when the code 
comes through

Nick

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28962-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 02 12:08:22 2007
Return-Path: <java-user-return-28962-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73833 invoked from network); 2 Jul 2007 12:08:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jul 2007 12:08:21 -0000
Received: (qmail 7307 invoked by uid 500); 2 Jul 2007 12:08:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7270 invoked by uid 500); 2 Jul 2007 12:08:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7256 invoked by uid 99); 2 Jul 2007 12:08:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jul 2007 05:08:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [66.252.32.100] (HELO mx1.midmaine.com) (66.252.32.100)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 02 Jul 2007 05:08:08 -0700
Received: (qmail 31850 invoked from network); 2 Jul 2007 12:07:44 -0000
Received: from 66-252-47-60.midmaine.com (HELO AUGEXCH.ghsinc.com) (66.252.47.60)
  by 0 with SMTP; 2 Jul 2007 12:07:44 -0000
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: RE: Geneology, nicknames, levenstein, soundex/metaphone, etc
Date: Mon, 2 Jul 2007 08:07:42 -0400
Message-ID: <214FF1B5E37DC84D9968F0F82FBB112501A7109D@AUGEXCH.ghsinc.com>
In-Reply-To: <8652E1B2-EE4A-4866-A663-803F7FF72337@apache.org>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Geneology, nicknames, levenstein, soundex/metaphone, etc
Thread-Index: Ace6asvv2cypX+8BSeGuXG4/2zPTuwCNaX+w
From: "Darren Hartford" <dhartford@ghsinc.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Thank you for the link to the previous thread, lot of information there!

*Synonym use of nicknames - that sounds quite feasible.  Do you
specifically mean the WordNet module in the Sandbox, or something
different?=20


> -----Original Message-----
> From: Grant Ingersoll [mailto:gsingers@apache.org]=20
> Sent: Friday, June 29, 2007 12:30 PM
> To: java-user@lucene.apache.org
> Subject: Re: Geneology, nicknames, levenstein, soundex/metaphone, etc
>=20
> You may find this thread useful: http://www.gossamer-threads.com/
> lists/lucene/java-user/47824?search_string=3Drecord%20linkage;#47824
> although it doesn't answer all your ?'s
>=20
> > *nickname:  would it be feasible to create an Analyzer that=20
> will tie=20
> > to an external/internal nickname datasource (datasource would vary=20
> > dramatically based on nationality).  Usecase:  Jon, John, Johnny,=20
> > Jonathan would have 'weight' in the relevance.  Similarly 'Dick',=20
> > 'Chuck', and 'Charles'.
>=20
> Maybe you could inject these as synonyms?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28963-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 02 12:17:46 2007
Return-Path: <java-user-return-28963-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78701 invoked from network); 2 Jul 2007 12:17:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jul 2007 12:17:44 -0000
Received: (qmail 34540 invoked by uid 500); 2 Jul 2007 12:17:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34498 invoked by uid 500); 2 Jul 2007 12:17:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34480 invoked by uid 99); 2 Jul 2007 12:17:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jul 2007 05:17:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.207] (HELO spunkymail-a16.dreamhost.com) (208.97.132.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jul 2007 05:17:35 -0700
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a16.dreamhost.com (Postfix) with ESMTP id 727DA7CC81
	for <java-user@lucene.apache.org>; Mon,  2 Jul 2007 05:17:08 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <214FF1B5E37DC84D9968F0F82FBB112501A7109D@AUGEXCH.ghsinc.com>
References: <214FF1B5E37DC84D9968F0F82FBB112501A7109D@AUGEXCH.ghsinc.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <0D897FD3-F942-4D1E-B255-C0A629D012AF@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Geneology, nicknames, levenstein, soundex/metaphone, etc
Date: Mon, 2 Jul 2007 08:17:06 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On Jul 2, 2007, at 8:07 AM, Darren Hartford wrote:

> Thank you for the link to the previous thread, lot of information  
> there!
>
> *Synonym use of nicknames - that sounds quite feasible.  Do you
> specifically mean the WordNet module in the Sandbox, or something
> different?

No, I think I was thinking along the lines of the SynonymAnalyzer in  
Lucene In Action whereby you add the nicknames as tokens at the same  
position as the original, that way searches on the nicknames would  
still match.  Don't know that it solves your need for "weight" in the  
relevance, but maybe it would.

>
>
>> -----Original Message-----
>> From: Grant Ingersoll [mailto:gsingers@apache.org]
>> Sent: Friday, June 29, 2007 12:30 PM
>> To: java-user@lucene.apache.org
>> Subject: Re: Geneology, nicknames, levenstein, soundex/metaphone, etc
>>
>> You may find this thread useful: http://www.gossamer-threads.com/
>> lists/lucene/java-user/47824?search_string=record%20linkage;#47824
>> although it doesn't answer all your ?'s
>>
>>> *nickname:  would it be feasible to create an Analyzer that
>> will tie
>>> to an external/internal nickname datasource (datasource would vary
>>> dramatically based on nationality).  Usecase:  Jon, John, Johnny,
>>> Jonathan would have 'weight' in the relevance.  Similarly 'Dick',
>>> 'Chuck', and 'Charles'.
>>
>> Maybe you could inject these as synonyms?
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

Read the Lucene Java FAQ at http://wiki.apache.org/lucene-java/LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28964-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 02 13:12:01 2007
Return-Path: <java-user-return-28964-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97668 invoked from network); 2 Jul 2007 13:11:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jul 2007 13:11:59 -0000
Received: (qmail 43538 invoked by uid 500); 2 Jul 2007 13:11:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43502 invoked by uid 500); 2 Jul 2007 13:11:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 24570 invoked by uid 99); 2 Jul 2007 09:58:08 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Message-ID: <4688CC18.80509@aduna-software.com>
Date: Mon, 02 Jul 2007 11:57:44 +0200
From: Christiaan Fluit <christiaan.fluit@aduna-software.com>
User-Agent: Thunderbird 2.0.0.4 (Windows/20070604)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
CC: aperture-devel <aperture-devel@lists.sourceforge.net>
Subject: Re: Exchange/PST/Mail parsing
References: <64BF1048-B473-44AE-BE10-D1A2CD4A59B3@apache.org>
In-Reply-To: <64BF1048-B473-44AE-BE10-D1A2CD4A59B3@apache.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hello Grant (cc-ing aperture-devel),

I am one of the Aperture admins, I can tell you a bit more about 
Aperture's mail facilities.

Short intro: Aperture is a framework for crawling and full-text and 
metadata extraction of a growing number of sources and file formats. We 
try to select the best-of-breed of the large number of open source 
libraries that tackle a specific source or format (e.g. PDFBox, Poi, 
JavaMail) and write some glue code around it so that they can be invoked 
in a uniform way. It's currently used in a number of desktop and 
enterprise search applications, both research and production systems.

At the moment we support a number of mail systems.

We can crawl IMAP mail boxes through JavaMail. In general it seems to 
work well, problems are usually caused by IMAP servers not conforming to 
the IMAP specs.

Some people have used the ImapCrawler to crawl MS Exchange as well. Some 
succeeded, some didn't. I don't really know whether the fault is in 
Aperture's code or in the Exchange configuration but I would be happy to 
take a look at it when someone runs into problems.

Outlook can also be crawled by connecting to a running Outlook process 
through jacob.dll. Others on aperture-devel can tell you more about its 
current status. Besides this crawler, I would also be very interested in 
having a crawler that directly processes .pst files, as to stay clear 
from communicating with other processes outside your own control.

People have been working on crawling Thunderbird mailboxes but I don't 
know what the current status is.

Ultimately, we try to support any major mail system. In practice, effort 
is usually dependent on knowledge and experience as well as customer demand.

We are happy to help you out with trying to get Aperture working in your 
domain and looking into the problems that you may encounter.


Kind regards,

Chris
--

Grant Ingersoll wrote:
> Anyone have any recommendations on a decent, open (doesn't have to be 
> Apache license, but would prefer non-GPL if possible), extractor for MS 
> Exchange and/or PST files?  The Zoe link on the FAQ [1] seems dead.
> 
> For mbox, I think mstor will suffice for me and I think tropo (from the 
> FAQ should work for IMAP).  Does anyone have experience with 
> http://aperture.sourceforge.net/
> 
> [1] 
> http://wiki.apache.org/lucene-java/LuceneFAQ#head-bcba2effabe224d5fb8c1761e4da1fedceb9800e 
> 
> 
> Cheers,
> Grant

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28965-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 02 15:29:50 2007
Return-Path: <java-user-return-28965-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30466 invoked from network); 2 Jul 2007 15:29:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jul 2007 15:29:49 -0000
Received: (qmail 64531 invoked by uid 500); 2 Jul 2007 15:29:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64488 invoked by uid 500); 2 Jul 2007 15:29:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64472 invoked by uid 99); 2 Jul 2007 15:29:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jul 2007 08:29:43 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of walt.stoneburner@gmail.com designates 209.85.146.180 as permitted sender)
Received: from [209.85.146.180] (HELO wa-out-1112.google.com) (209.85.146.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jul 2007 08:29:40 -0700
Received: by wa-out-1112.google.com with SMTP id j40so2522135wah
        for <java-user@lucene.apache.org>; Mon, 02 Jul 2007 08:29:20 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=V7k6f1VJAcZsnv6QTC+Q+wEpxd4NJXVN+T1vsBFwBWMEybefR8xRXYmcEkjlJAB6K4AXwqG9/3muEitfFcoq/M7SY8L/FXyIL6dxH8uEfrO02vzGiYmgL79NC9ClYKZi/3M8KZApyl6uJ5R6VYLf2ewnHJTiiRUl5Cdp43z6LWk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=FmBsu42vIAP0lYSOw0qOKRnOlZh4SJPh7T5UXJKEwYbK/Tsflq/Ru5FrNbx4Kr0dx+sM6PD9So5pgnBCaG2msstmdWTAAKN+JBRGSy7N3KQrmZAf0j2f7A/iXOrdNJ8yR49383J6uhebdHuKjcbAHQtUPSXyI78xTQvOotyrveg=
Received: by 10.115.89.1 with SMTP id r1mr5231722wal.1183390159774;
        Mon, 02 Jul 2007 08:29:19 -0700 (PDT)
Received: by 10.115.32.13 with HTTP; Mon, 2 Jul 2007 08:29:19 -0700 (PDT)
Message-ID: <ae6f38f60707020829y180aef7n4f83b2d3eed29749@mail.gmail.com>
Date: Mon, 2 Jul 2007 11:29:19 -0400
From: "Walt Stoneburner" <walt.stoneburner@gmail.com>
To: java-user@lucene.apache.org
Subject: Auto Slop
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

I just ran into an interesting problem today, and wanted to know if it
was my understanding or Lucene that was out of whack -- right now I'm
leaning toward a fault between the chair and the keyboard.

I attempted to do a simple phrase query using the StandardAnalyzer:
"United States"

Against my corpus of test documents, I got no results returned, which
surprised me.  I know it's in there.

So, I ran this same query in Luke, and it also returned no results.

Luke explains:
  PhraseQuery: boost=1.0000, slop=0
  pos[0,1]
  Term 0: field='contents' text='united'
  Term 1: field='contents' text='states'

Now I know Lucene handles phrases, so I tried manually setting the
slop to 1, given that there were two terms:  "United States"~1

...and suddenly I got the results I was expecting!

In fact, after a little trial and error with larger phrases, I always
get no results unless I *manually* specify at least slop value of the
number of terms minus one.

Isn't this supposed to be the default behavior if no slop is specified?

Lucene's standard analyzer, which clear knows the number of terms,
should be able to deduce the minimum slop amount.  Why must it be
manually specified?

Could I be missing some configuration setting, have a bad
understanding of the query syntax, or is there a clever reason (like
searching for encoding synonyms) that makes more sense as a default
value for slop that I'm not seeing?

Many thanks to all that unravel my confusion.

-wls

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28966-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 02 15:37:19 2007
Return-Path: <java-user-return-28966-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35358 invoked from network); 2 Jul 2007 15:37:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jul 2007 15:37:19 -0000
Received: (qmail 79989 invoked by uid 500); 2 Jul 2007 15:37:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79948 invoked by uid 500); 2 Jul 2007 15:37:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79937 invoked by uid 99); 2 Jul 2007 15:37:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jul 2007 08:37:14 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.234 as permitted sender)
Received: from [66.249.82.234] (HELO wx-out-0506.google.com) (66.249.82.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jul 2007 08:37:10 -0700
Received: by wx-out-0506.google.com with SMTP id i28so1356979wxd
        for <java-user@lucene.apache.org>; Mon, 02 Jul 2007 08:36:49 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=ZrvsbphhwLpWQ9uuWrSNo/F96BcPFyNIkPVOG5V11ar2xuhItVbBmy7jdKqktapYRHHyA3L00KBIFiXHWblxilDbf4dc+zv/yKs+akUMf804Cb+kyhj8xxByO73Gzux7WBbs6+7g0TdTGtv/hpLX5G2Pgvd2aZ7ovToiKeaKSf8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=LfVdx+c/Ya1Ffjh0i106n+ywDSfS1cDxFWr5ni7bnVE86MBOJWp89Rh3Jy9GG7f9ET8xy3LL62JfMlJhsQnyJIFQ0Mc08UkaXNv5Kzc3kOoedj8l/5y9lK9uHP/6jqQ3h063Y5Su/ZjYH0Aa72+m2EmnhD0/kMJ8sv67Trtv478=
Received: by 10.90.99.20 with SMTP id w20mr5036253agb.1183390609512;
        Mon, 02 Jul 2007 08:36:49 -0700 (PDT)
Received: from ?192.168.1.100? ( [216.66.114.204])
        by mx.google.com with ESMTP id h27sm7572653elf.2007.07.02.08.36.48
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 02 Jul 2007 08:36:49 -0700 (PDT)
Message-ID: <46891B6D.1070506@gmail.com>
Date: Mon, 02 Jul 2007 11:36:13 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.4 (Windows/20070604)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Auto Slop
References: <ae6f38f60707020829y180aef7n4f83b2d3eed29749@mail.gmail.com>
In-Reply-To: <ae6f38f60707020829y180aef7n4f83b2d3eed29749@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Examine your indexes and analyzers. The default slop is 0, which means 
allow 0 terms between the terms in the phrase. That would be an exact 
match. A slop of 1 is not the default and would allow a term movement of 
one position to match the phrase.

- Mark

Walt Stoneburner wrote:
> I just ran into an interesting problem today, and wanted to know if it
> was my understanding or Lucene that was out of whack -- right now I'm
> leaning toward a fault between the chair and the keyboard.
>
> I attempted to do a simple phrase query using the StandardAnalyzer:
> "United States"
>
> Against my corpus of test documents, I got no results returned, which
> surprised me.  I know it's in there.
>
> So, I ran this same query in Luke, and it also returned no results.
>
> Luke explains:
>  PhraseQuery: boost=1.0000, slop=0
>  pos[0,1]
>  Term 0: field='contents' text='united'
>  Term 1: field='contents' text='states'
>
> Now I know Lucene handles phrases, so I tried manually setting the
> slop to 1, given that there were two terms:  "United States"~1
>
> ...and suddenly I got the results I was expecting!
>
> In fact, after a little trial and error with larger phrases, I always
> get no results unless I *manually* specify at least slop value of the
> number of terms minus one.
>
> Isn't this supposed to be the default behavior if no slop is specified?
>
> Lucene's standard analyzer, which clear knows the number of terms,
> should be able to deduce the minimum slop amount.  Why must it be
> manually specified?
>
> Could I be missing some configuration setting, have a bad
> understanding of the query syntax, or is there a clever reason (like
> searching for encoding synonyms) that makes more sense as a default
> value for slop that I'm not seeing?
>
> Many thanks to all that unravel my confusion.
>
> -wls
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28967-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 02 15:44:09 2007
Return-Path: <java-user-return-28967-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38626 invoked from network); 2 Jul 2007 15:44:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jul 2007 15:44:08 -0000
Received: (qmail 99116 invoked by uid 500); 2 Jul 2007 15:44:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99082 invoked by uid 500); 2 Jul 2007 15:44:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99062 invoked by uid 99); 2 Jul 2007 15:44:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jul 2007 08:44:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [213.133.33.40] (HELO smtp.is.nl) (213.133.33.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jul 2007 08:43:57 -0700
Received: from [213.133.51.241] (HELO hai01.hippo.local)
  by smtp.is.nl (CommuniGate Pro SMTP 5.0.10)
  with ESMTP id 18634213 for java-user@lucene.apache.org; Mon, 02 Jul 2007 17:43:35 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6619.12
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Auto Slop
Date: Mon, 2 Jul 2007 17:43:35 +0200
Message-ID: <A955EA1F8FE31749AEC8C998082F6C7C01AC1085@hai01.hippo.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Auto Slop
Thread-Index: Ace8vdPTZ83vasOFTfO5iRJhh2GpoAAAbPBg
From: "Ard Schrijvers" <a.schrijvers@hippo.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org


> I just ran into an interesting problem today, and wanted to know if it
> was my understanding or Lucene that was out of whack -- right now I'm
> leaning toward a fault between the chair and the keyboard.
>=20
> I attempted to do a simple phrase query using the StandardAnalyzer:
> "United States"

And you also analyzed this the particular field with this same =
StandardAnalyzer during indexing? Sounds like you used another analyzer =
during creating the index

Regards Ard

>=20
> Against my corpus of test documents, I got no results returned, which
> surprised me.  I know it's in there.
>=20
> So, I ran this same query in Luke, and it also returned no results.
>=20
> Luke explains:
>   PhraseQuery: boost=3D1.0000, slop=3D0
>   pos[0,1]
>   Term 0: field=3D'contents' text=3D'united'
>   Term 1: field=3D'contents' text=3D'states'
>=20
> Now I know Lucene handles phrases, so I tried manually setting the
> slop to 1, given that there were two terms:  "United States"~1
>=20
> ...and suddenly I got the results I was expecting!
>=20
> In fact, after a little trial and error with larger phrases, I always
> get no results unless I *manually* specify at least slop value of the
> number of terms minus one.
>=20
> Isn't this supposed to be the default behavior if no slop is=20
> specified?
>=20
> Lucene's standard analyzer, which clear knows the number of terms,
> should be able to deduce the minimum slop amount.  Why must it be
> manually specified?
>=20
> Could I be missing some configuration setting, have a bad
> understanding of the query syntax, or is there a clever reason (like
> searching for encoding synonyms) that makes more sense as a default
> value for slop that I'm not seeing?
>=20
> Many thanks to all that unravel my confusion.
>=20
> -wls
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28968-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 02 16:32:36 2007
Return-Path: <java-user-return-28968-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66758 invoked from network); 2 Jul 2007 16:32:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jul 2007 16:32:35 -0000
Received: (qmail 18590 invoked by uid 500); 2 Jul 2007 16:32:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17736 invoked by uid 500); 2 Jul 2007 16:32:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17725 invoked by uid 99); 2 Jul 2007 16:32:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jul 2007 09:32:30 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of sand.chawla@gmail.com designates 209.85.146.176 as permitted sender)
Received: from [209.85.146.176] (HELO wa-out-1112.google.com) (209.85.146.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jul 2007 09:32:27 -0700
Received: by wa-out-1112.google.com with SMTP id j40so2546115wah
        for <java-user@lucene.apache.org>; Mon, 02 Jul 2007 09:32:06 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=mxd60VDkLoGmSjTuQYfMvik0WV38/QY/NmoXKOXtmmgpTW20Uhz0h6Fxrx6XkhJBfLBWVAxX8Lrs/MmNsqi1pC9BlULdnzAmoKUKCPvOcl2cLeHouk8ssLgfUe43YQWXt9cogwvehX0/wQv0JbGxv4miyUecH0Vrm750uSDULNs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=AUKSqG/gGSn9feL3kvBVVM3p5O8FGjLa1Daik53xtoJRB+SYK4/hUctLkkj90eQ25dphU1nINwSAUvIzmkpQsIEC4QJtqa/kStAg8JLhtNHQcbl2IT0kwh35VRNEu/gTXEfQsUfNAiawG+oIbfoHn9df/QTZ40V+VMwJhWdWDz8=
Received: by 10.114.177.1 with SMTP id z1mr5227685wae.1183393926687;
        Mon, 02 Jul 2007 09:32:06 -0700 (PDT)
Received: by 10.114.127.3 with HTTP; Mon, 2 Jul 2007 09:32:01 -0700 (PDT)
Message-ID: <a70e4c2b0707020932rcbb7222udd04fe76850e2fe2@mail.gmail.com>
Date: Mon, 2 Jul 2007 09:32:01 -0700
From: "sandeep chawla" <sand.chawla@gmail.com>
To: java-user@lucene.apache.org
Subject: highlighting phrase query
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi All,

I am developing a search tool using lucene. I am using lucene 2.1.

i have a requirement to highlight query words in the results.
.Lucene-highlighter 2.1 doesn't work well in highlighting phase query.

For example - if i have a query string "lucene Java" .It highlights
not only occurrences of "lucene java" but occurrences of lucene and
java too in the text.

I think, this is a known problem..is this issue solved in lucene 2.2.
well my application is almost complete and i really don't wanna switch
to lucene 2.2.

I was going through previous posts but i couldn't find a solution of
this problem. There r some alternate highlighter s but it seems, they
r not stable and still in evolution phase.

I am looking for a standard n stable API for this purpose..

I'd appreciate any thoughts/guidance in this issue.

Thanks
Sandeep

-- 
SANDEEP CHAWLA
House No- 23                     			
10th main 					
BTM 1st  Stage     					
Bangalore						Mobile: 91-9986150603

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28969-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 02 16:55:53 2007
Return-Path: <java-user-return-28969-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75622 invoked from network); 2 Jul 2007 16:55:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jul 2007 16:55:51 -0000
Received: (qmail 56090 invoked by uid 500); 2 Jul 2007 16:55:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56049 invoked by uid 500); 2 Jul 2007 16:55:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56038 invoked by uid 99); 2 Jul 2007 16:55:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jul 2007 09:55:45 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of alixandresantana@gmail.com designates 209.85.132.241 as permitted sender)
Received: from [209.85.132.241] (HELO an-out-0708.google.com) (209.85.132.241)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jul 2007 09:55:41 -0700
Received: by an-out-0708.google.com with SMTP id c5so366490anc
        for <java-user@lucene.apache.org>; Mon, 02 Jul 2007 09:55:20 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=PxEf+cmn+mC5VsWY3b3Z+m8u3kHejybQfQyPIvCiYyzgjDBNL2R4GlHCNhNCA+WU3jY+LvhG1zMUVHgPlUNpIpVuj8b7JRnRYg0t/Sj5k8+NggrXzfAn+mVyme5GonEuyZI1/tSg6N0HrFms6lP3CzyxRvQkfyqggIgWaIasZ/8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=ZaDKYN9SLzX1Epy584kmXVxTHVNjeHs577hAXIE2q+HeRgZD5vEs/8RTIh+eKrxH6eFJGeAAah7AB97UvlwzEniBNx3fyhldICbVRZugTeIrAU+91ZJVhvKLFgJAn3hNsc5yQ1Sn3bfQW7HMz5cwdDCBAxWpXXKVzmuA0M0nEIM=
Received: by 10.100.142.12 with SMTP id p12mr3761161and.1183395320281;
        Mon, 02 Jul 2007 09:55:20 -0700 (PDT)
Received: by 10.100.196.17 with HTTP; Mon, 2 Jul 2007 09:55:20 -0700 (PDT)
Message-ID: <17dad8c10707020955n55b3f818i354fd4506eef81f1@mail.gmail.com>
Date: Mon, 2 Jul 2007 13:55:20 -0300
From: "Alixandre Santana" <alixandresantana@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Pagination
In-Reply-To: <62924.70068.qm@web26010.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <62924.70068.qm@web26010.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Mark,

The ScoreDoc[] contains only the  IDs of each lucene document. what
would be the best way of getting the entire (lucene)document ?
Should i do a new search with the ID retrivied by hpc.getScores() -
(searcher.doc(idDoc))?

thanks.

Alixandre

On 7/2/07, mark harwood <markharw00d@yahoo.co.uk> wrote:
> The Hits class is OK but can be inefficient due to re-running the query unnecessarily.
>
> The class below illustrates how to efficiently retrieve a particular page of results and lends itself to webapps where you don't want to retain server side state (i.e. a Hits object) for each client.
> It would make sense to put an upper limit on the "start" parameter (as Google etc do) to avoid consuming to much RAM per client request.
>
> Cheers,
> Mark
>
> [Begin code]
>
>
>
>
> package lucene.pagination;
>
> import org.apache.lucene.index.Term;
> import org.apache.lucene.search.HitCollector;
> import org.apache.lucene.search.IndexSearcher;
> import org.apache.lucene.search.Query;
> import org.apache.lucene.search.ScoreDoc;
> import org.apache.lucene.search.TermQuery;
> import org.apache.lucene.util.PriorityQueue;
>
> /**
>  * A HitCollector that retrieves a specific page of results
>  * @author maharwood
>  */
> public class HitPageCollector extends HitCollector
> {
>     //Demo code showing pagination
>     public static void main(String[] args) throws Exception
>     {
>         IndexSearcher s=new IndexSearcher("/indexes/nasa");
>         HitPageCollector hpc=new HitPageCollector(1,10);
>         Query q=new TermQuery(new Term("contents","sea"));
>         s.search(q,hpc);
>         ScoreDoc[] sd = hpc.getScores();
>         System.out.println("Hits "+ hpc.getStart()+" - "+ hpc.getEnd()+" of "+hpc.getTotalAvailable());
>         for (int i = 0; i < sd.length; i++)
>         {
>             System.out.println(sd[i].doc);
>         }
>         s.close();
>     }
>
>     int nDocs;
>     PriorityQueue hq;
>     float minScore = 0.0f;
>     int totalHits = 0;
>     int start;
>     int maxNumHits;
>     int totalInThisPage;
>
>     public HitPageCollector(int start, int maxNumHits)
>     {
>         this.nDocs = start + maxNumHits;
>         this.start = start;
>         this.maxNumHits = maxNumHits;
>         hq = new HitQueue(nDocs);
>     }
>
>     public void collect(int doc, float score)
>     {
>         totalHits++;
>         if((hq.size()<nDocs)||(score >= minScore))
>         {
>             ScoreDoc scoreDoc = new ScoreDoc(doc,score);
>             hq.insert(scoreDoc);              // update hit queue
>             minScore = ((ScoreDoc)hq.top()).score; // reset minScore
>         }
>         totalInThisPage=hq.size();
>     }
>
>
>     public ScoreDoc[] getScores()
>     {
>         //just returns the number of hits required from the required start point
>         /*
>             So, given hits:
>                 1234567890
>             and a start of 2 + maxNumHits of 3 should return:
>                 234
>             or, given hits
>                 12
>             should return
>                 2
>             and so, on.
>         */
>         if (start <= 0)
>         {
>             throw new IllegalArgumentException("Invalid start :" + start+" - start should be >=1");
>         }
>         int numReturned = Math.min(maxNumHits, (hq.size() - (start - 1)));
>         if (numReturned <= 0)
>         {
>             return new ScoreDoc[0];
>         }
>         ScoreDoc[] scoreDocs = new ScoreDoc[numReturned];
>         ScoreDoc scoreDoc;
>         for (int i = hq.size() - 1; i >= 0; i--) // put docs in array, working backwards from lowest count
>         {
>             scoreDoc = (ScoreDoc) hq.pop();
>             if (i < (start - 1))
>             {
>                 break; //off the beginning of the results array
>             }
>             if (i < (scoreDocs.length + (start - 1)))
>             {
>                 scoreDocs[i - (start - 1)] = scoreDoc; //within scope of results array
>             }
>         }
>         return scoreDocs;
>     }
>
>     public int getTotalAvailable()
>     {
>         return totalHits;
>     }
>
>     public int getStart()
>     {
>         return start;
>     }
>
>     public int getEnd()
>     {
>         return start+totalInThisPage-1;
>     }
>
>     public class HitQueue extends PriorityQueue
>     {
>           public HitQueue(int size)
>           {
>             initialize(size);
>           }
>           public final boolean lessThan(Object a, Object b)
>           {
>             ScoreDoc hitA = (ScoreDoc)a;
>             ScoreDoc hitB = (ScoreDoc)b;
>             if (hitA.score == hitB.score)
>               return hitA.doc > hitB.doc;
>             else
>               return hitA.score < hitB.score;
>           }
>     }
> }
>
>
>
> ----- Original Message ----
> From: Lee Li Bin <leelb@xedge.com.sg>
> To: java-user@lucene.apache.org
> Sent: Monday, 2 July, 2007 9:59:14 AM
> Subject: RE: Pagination
>
> Hi,
>
> I still have no idea of how to get it done. Can give me some details?
>
> The web application is in jsp btw.
>
> Thanks a lot.
>
>
> Regards,
> Lee Li Bin
> -----Original Message-----
> From: Chris Lu [mailto:chris.lu@gmail.com]
> Sent: Saturday, June 30, 2007 2:21 AM
> To: java-user@lucene.apache.org
> Subject: Re: Pagination
>
> After search, you will just get an object Hits, and go through all of the
> documents by hits.doc(i).
>
> The pagination is controlled by you. Lucene is pre-caching first 200
> documents and lazy loading the rest by batch size 200.
>
> --
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
> Lucene Database Search in 3 minutes:
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_m
> inutes
>
> On 6/29/07, Lee Li Bin <leelb@xedge.com.sg> wrote:
> >
> > Hi,
> >
> > does anyone knows how to do pagination on jsp page using the number of
> > hits
> > return? Or any other solutions?
> >
> >
> >
> > Do provide me with some sample coding if possible or a step by step guide.
> > Sry if I'm asking too much, I'm new to lucene.
> >
> >
> >
> > Thanks
> >
> >
> >
> >
> >
> >
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
>
>       ___________________________________________________________
> Yahoo! Answers - Got a question? Someone out there knows the answer. Try it
> now.
> http://uk.answers.yahoo.com/
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Alixandre Santana

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28970-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 02 18:14:48 2007
Return-Path: <java-user-return-28970-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6023 invoked from network); 2 Jul 2007 18:14:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jul 2007 18:14:42 -0000
Received: (qmail 26577 invoked by uid 500); 2 Jul 2007 18:14:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26532 invoked by uid 500); 2 Jul 2007 18:14:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26521 invoked by uid 99); 2 Jul 2007 18:14:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jul 2007 11:14:35 -0700
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of amalafrida@gmail.com designates 64.233.162.235 as permitted sender)
Received: from [64.233.162.235] (HELO nz-out-0506.google.com) (64.233.162.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jul 2007 11:14:32 -0700
Received: by nz-out-0506.google.com with SMTP id i28so586076nzi
        for <java-user@lucene.apache.org>; Mon, 02 Jul 2007 11:14:11 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=Tgr1Hi7y6vFz6T0qf733GOjMUQF1t7y3UsbGz2hbvfNfWesmSr7R1Mh51KHaPGY7MZNB9vW73vkRyNS0lppZSWYFC6r2xUKuGprkhO1rH+lOMQ9X/s7NRo01PY5TTDFX90kUQwlNzt9wC0267TibntCdIDjb7luUanwfe93g2CI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=LfNep/4mjJN8p/wpigPmQ42qloYU/D3x90H+2+juFgGF3KwGIdbwx7VSlkCnuNYz/m0ZVxSa9mNVcbskaO6H99jSE8tdebHBLPRZwdytFB9W4o0s+vvUKeEDyEkB/A3z5Ul+DiQefE4a2U+6RNFk7Ejh5VAa8hBfXEcku8CEppA=
Received: by 10.114.175.16 with SMTP id x16mr5325285wae.1183400050976;
        Mon, 02 Jul 2007 11:14:10 -0700 (PDT)
Received: by 10.114.103.6 with HTTP; Mon, 2 Jul 2007 11:14:10 -0700 (PDT)
Message-ID: <ac440ca10707021114s58762eeapf61026e70621087d@mail.gmail.com>
Date: Mon, 2 Jul 2007 20:14:10 +0200
From: "Robert Mullin" <amalafrida@gmail.com>
To: java-user@lucene.apache.org
Subject: Modify search results
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_86947_30036612.1183400050958"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_86947_30036612.1183400050958
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I have managed to download and install Lucene.  In addition, I have reached
the point at which I am able to generate an index and run a search.  The
search returns a 'raw' list of the HTML pages in which my search term
occurs. . . . chapter17, chapter18, etc.

Question: how do I go about manipulating the search results?  Is it possible
to "intercept" the listing of HTML pages returned by the Lucene search
function and modify the report it sends to the screen.

Can this be as simple as adding a line to the Lucene Java code so that
instead of reporting a simple chapter number, it will report the chapter
surrounded by HTML code , e.g. instead of simply seeing "Chapter 17" on the
screen, I want the report to read <a href = "
chapter17.html#paragraph3">Chapter
17, paragraph 3</a>. . . . of course then I'll need to get that info to an
HTML page . . . later . . . later . .

I suspect this will be handled by 1) modification to the Lucene source code
or 2) an addition of javascript or perl-script . . . but am not at all sure.

Thanks in advance for any help that might be provided.

r. mullin

------=_Part_86947_30036612.1183400050958--

From java-user-return-28971-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 02 20:49:56 2007
Return-Path: <java-user-return-28971-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63320 invoked from network); 2 Jul 2007 20:49:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jul 2007 20:49:54 -0000
Received: (qmail 27583 invoked by uid 500); 2 Jul 2007 20:49:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27544 invoked by uid 500); 2 Jul 2007 20:49:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27533 invoked by uid 99); 2 Jul 2007 20:49:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jul 2007 13:49:49 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [64.233.184.235] (HELO wr-out-0506.google.com) (64.233.184.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jul 2007 13:49:45 -0700
Received: by wr-out-0506.google.com with SMTP id i4so1221355wra
        for <java-user@lucene.apache.org>; Mon, 02 Jul 2007 13:49:25 -0700 (PDT)
Received: by 10.142.111.14 with SMTP id j14mr374542wfc.1183409364270;
        Mon, 02 Jul 2007 13:49:24 -0700 (PDT)
Received: by 10.142.102.1 with HTTP; Mon, 2 Jul 2007 13:49:24 -0700 (PDT)
Message-ID: <c6ccd7950707021349h24b0bcefsc312a18240d24b70@mail.gmail.com>
Date: Mon, 2 Jul 2007 13:49:24 -0700
From: "Cathy Murphy" <cathy@nachofoto.com>
To: java-user@lucene.apache.org
Subject: Lucene index in memcache
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_85521_6471587.1183409364246"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_85521_6471587.1183409364246
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Is there a way to store lucene index in memcache. During high traffic search
becomes very slow. :(

-- 
Cathy
www.nachofoto.com

------=_Part_85521_6471587.1183409364246--

From java-user-return-28972-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 02 21:12:30 2007
Return-Path: <java-user-return-28972-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68818 invoked from network); 2 Jul 2007 21:12:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jul 2007 21:12:29 -0000
Received: (qmail 79918 invoked by uid 500); 2 Jul 2007 21:12:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79875 invoked by uid 500); 2 Jul 2007 21:12:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79864 invoked by uid 99); 2 Jul 2007 21:12:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jul 2007 14:12:24 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jul 2007 14:12:20 -0700
Received: by ug-out-1314.google.com with SMTP id c2so1221378ugf
        for <java-user@lucene.apache.org>; Mon, 02 Jul 2007 14:11:59 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=bLNkPV9mAJLjVVMJTwNkmtGjWjTu5zZ5u+Fn8m2bLkDDLmwptzNHlAXmoPaWZzsFN/fE88Wcv8ZSoH2tdAX5snl44/ftrZPO/4YGUi0Sq+d7M+BD94olqZelrO/QxrP1JLibV3tIMobc4UOld1ARggNsSqi4fLiS+CGSEhIt7dg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=r2u4fOm+TbwP9pyK9YjJtPg7hrDsSaReH7CObjXGlMw1W4N5YrOPlcMYkYZu0zePWngR3f7NnoRlVs+E+0grKRaOwgzMe8sKxCwOkydYGyrPkcjfMoO0C2W8azggbyD+T0DVu3HXqfkPuXXL1XM9O3TG7dFKHowsCAyq/wrnu0s=
Received: by 10.82.111.8 with SMTP id j8mr13799820buc.1183410718791;
        Mon, 02 Jul 2007 14:11:58 -0700 (PDT)
Received: by 10.82.167.12 with HTTP; Mon, 2 Jul 2007 14:11:58 -0700 (PDT)
Message-ID: <359a92830707021411m740bda4cwb97fbb905946b306@mail.gmail.com>
Date: Mon, 2 Jul 2007 17:11:58 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene index in memcache
In-Reply-To: <c6ccd7950707021349h24b0bcefsc312a18240d24b70@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_67432_15764828.1183410718649"
References: <c6ccd7950707021349h24b0bcefsc312a18240d24b70@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_67432_15764828.1183410718649
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You can always read the current index into a RAMdir, but I really
wonder if that will make much of a difference, as your op system should
be taking care of this kind of thing for you.

How big is your index? What kind of performance are you
seeing? What else is running on that box?

I'd do some profiling to see where things are actually slow. In
particular, think about logging how long each query takes to
complete, just the Lucene part. I've seen similar situations
where the actual time was being taken *outside* of lucene
itself by XML manipulations, for instance.

Also, are you iterating over a Hits object for more than the top
100 entries? That would be very inefficient. Are you using a
collector and calling IndexReader.doc() inside the loop?

I'd *very* strongly recommend that you pinpoint where the
time is actually being spent before jumping to the conclusion
that using a RAMdir would fix your problem. I can't tell you how
many times I've been *sure* I knew where the bottleneck was
only to find out that it's someplace completely different.
You simply cannot reliably optimize performance without
really understanding where the time is being spent. Trust
me on this one <G>...

Some simple timings with System.currentTimeMilliseconds() will
tell you a lot.

Best
Erick

On 7/2/07, Cathy Murphy <cathy@nachofoto.com> wrote:
>
> Is there a way to store lucene index in memcache. During high traffic
> search
> becomes very slow. :(
>
> --
> Cathy
> www.nachofoto.com
>

------=_Part_67432_15764828.1183410718649--

From java-user-return-28973-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 02 21:12:49 2007
Return-Path: <java-user-return-28973-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68990 invoked from network); 2 Jul 2007 21:12:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jul 2007 21:12:48 -0000
Received: (qmail 82023 invoked by uid 500); 2 Jul 2007 21:12:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81987 invoked by uid 500); 2 Jul 2007 21:12:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81976 invoked by uid 99); 2 Jul 2007 21:12:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jul 2007 14:12:43 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.233 as permitted sender)
Received: from [66.249.82.233] (HELO wx-out-0506.google.com) (66.249.82.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jul 2007 14:12:39 -0700
Received: by wx-out-0506.google.com with SMTP id i28so1436184wxd
        for <java-user@lucene.apache.org>; Mon, 02 Jul 2007 14:12:18 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=m88XfyczxAyRgnCOo9V38fmQejvywHyj2TF0eFa99BvnHHz37+5wNVLDjzpSGBcso1rjXqOqCYZyhOZNBQlHiZvcJsVVd2rQIYV9+L0/3vMmgzY7F1ua+NKaBxqD32BJO5EGV0iNwgqjfpPWBUOv8u/Fk2LL0oshrlUgdQ+QQXo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=LXNZMoWIxx8dspg7QtsU137Tc87jOqtb5f9I084FtAxfiGRqdU7eZK9fBBHh4rc2aTcc/F/Zv66yZXubjVStQ9jZHEu5FKm2u34JIXPaYpnoCpGtR6BcKR8eO946Qj1HPFNR1gxcWXMILW456CCwg24pviBcI6lomqjUqqOgH3A=
Received: by 10.90.83.14 with SMTP id g14mr5618215agb.1183410738877;
        Mon, 02 Jul 2007 14:12:18 -0700 (PDT)
Received: from ?192.168.1.100? ( [216.66.114.204])
        by mx.google.com with ESMTP id u25sm8181174ele.2007.07.02.14.12.17
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 02 Jul 2007 14:12:18 -0700 (PDT)
Message-ID: <468969FE.3070807@gmail.com>
Date: Mon, 02 Jul 2007 17:11:26 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.4 (Windows/20070604)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: highlighting phrase query
References: <a70e4c2b0707020932rcbb7222udd04fe76850e2fe2@mail.gmail.com>
In-Reply-To: <a70e4c2b0707020932rcbb7222udd04fe76850e2fe2@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

There has been a lot of Highlighter discussion lately, but just to try 
and sum up the state of Highlighting in the Lucene world:

There are four Highlighter implementations that I know of. From what I 
can tell, only the original Contrib Highlighter has received sustained 
active development by more than one individual.

Contrib Highlighter:
The Contrib Highlighter supports the widest array of analyzers and 
corner cases and has had the widest exposure. It is generally slower on 
larger documents due to the requirement that you re-analyze text and to 
support a wider variety of use cases -- the TokenGroup for token 
overlaps and inspecting every term for Fragmentation contribute to a 
huge performance drain on large documents. This highlighter does not 
support highlighting based on position and all terms from the query will 
be highlighted in the text. You can avoid some of the cost of 
re-analyzing by using the TokenSources class to rebuild a TokenStream 
using stored offsets and/or positions, but this is unlikely to be faster 
unless you are using very large documents with a complex analyzer. 
Getting and sorting offsets/positions is relatively slow and for smaller 
docs it is faster to just re-analyze.

LUCENE-403:
I have not spent a lot of time with this approach, but it is similar to 
the Contrib Highlighter approach. It almost certainly does not cover as 
many odd corner cases as Contrib Highlighter and the framework is 
lacking, but it does add some support for proper PhraseQuery 
highlighting by implementing some custom PhraseQuery search logic. 
Because LUCENE-403 is not as rigorous as the Contrib Highlighter, it may 
well be a bit faster. The author claims that HTML tags will not be 
broken when fragmenting.

LUCENE-644:
This Highlighter approach requires that you have stored term offsets in 
the index. This Highlighter can be very fast if you are using a 
complicated analyzer since there is no need for re-analyzing the text 
(due to the stored offsets). Also, rather then scoring every term like 
the Contrib Highlighter, only terms from the query are effectively 
"handled". For smaller documents and simpler analyzers there is not much 
speed improvement over the Contrib Highlighter (due to the time it takes 
to retrieve and sort offsets), but for larger documents , especially 
with more complex analyzers,  this Highlighter can be extremely fast. 
Again, positional highlighting for Phrase and Span queries is not 
supported.  

The biggest reason this implementation performs so well is that it deals 
with the text in much bigger chunks. Contrib Highlighter can also avoid 
re-analyzing by storing offsets and positions, but then it scores the 
document and rebuilds the text one token at a time using the performance 
draining TokenGroup (which helps cover some of those corner cases). This 
is very slow on very large documents.

LUCENE-794:
This approach extends the Contrib Highlighter to support Highlighting 
Span and Phrase queries. The approach used for non position sensitive 
Query clauses is the same as the Contrib Highlighter, and if you use the 
latest CachingTokenFilter the speed is roughly about the same. Position 
sensitive Query clauses are a bit slower as a MemoryIndex is used to 
retrieve the correct positions to Highlight. This gives exact 
highlighting without reimplementing search logic. Also, all of the use 
cases and corner cases that have been solved for the Contrib Highlighter 
are retained. All of the deficiencies of the Contrib Highlighter (slower 
on large docs) are also retained. The majority of the code for this 
comes from the Contrib Highlighter -- it uses the Contrib Highlighter 
framework. Which points out a plus for the Contrib Highlighter setup -- 
it allows for an extension like this, while LUCENE-644 could not easily 
be expanded to handle position sensitive queries.


There has been some discussion of getting Lucene to identify correct 
highlights as the search is processed. I am not very optimistic that 
this will be fruitful, but those that are discussing it know more more 
about this than I do.

- Mark

sandeep chawla wrote:
> Hi All,
>
> I am developing a search tool using lucene. I am using lucene 2.1.
>
> i have a requirement to highlight query words in the results.
> .Lucene-highlighter 2.1 doesn't work well in highlighting phase query.
>
> For example - if i have a query string "lucene Java" .It highlights
> not only occurrences of "lucene java" but occurrences of lucene and
> java too in the text.
>
> I think, this is a known problem..is this issue solved in lucene 2.2.
> well my application is almost complete and i really don't wanna switch
> to lucene 2.2.
>
> I was going through previous posts but i couldn't find a solution of
> this problem. There r some alternate highlighter s but it seems, they
> r not stable and still in evolution phase.
>
> I am looking for a standard n stable API for this purpose..
>
> I'd appreciate any thoughts/guidance in this issue.
>
> Thanks
> Sandeep
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28974-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 02 21:28:21 2007
Return-Path: <java-user-return-28974-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76386 invoked from network); 2 Jul 2007 21:28:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jul 2007 21:28:20 -0000
Received: (qmail 8903 invoked by uid 500); 2 Jul 2007 21:28:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8618 invoked by uid 500); 2 Jul 2007 21:28:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8607 invoked by uid 99); 2 Jul 2007 21:28:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jul 2007 14:28:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.150] (HELO rescomp.berkeley.edu) (169.229.70.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jul 2007 14:28:11 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 18E545B766; Mon,  2 Jul 2007 14:27:50 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id EE76C7F403
	for <java-user@lucene.apache.org>; Mon,  2 Jul 2007 14:27:50 -0700 (PDT)
Date: Mon, 2 Jul 2007 14:27:50 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Lucene index in memcache
In-Reply-To: <c6ccd7950707021349h24b0bcefsc312a18240d24b70@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0707021412030.10524@hal.rescomp.berkeley.edu>
References: <c6ccd7950707021349h24b0bcefsc312a18240d24b70@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Is there a way to store lucene index in memcache. During high traffic search
: becomes very slow. :(

http://people.apache.org/~hossman/#xyproblem
Your question appears to be an "XY Problem" ... that is: you are dealing
with "X", you are assuming "Y" will help you, and you are asking about "Y"
without giving more details about the "X" so that we can understand the
full issue.  Perhaps the best solution doesn't involve "Y" at all?
See Also: http://www.perlmonks.org/index.pl?node_id=542341


If you provide some more info about how you are using Lucene (ie: what you
code looks like) and what the concepts of "high traffic" and "slow" mean
to you, we might be able to help you better.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28975-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 02 21:53:07 2007
Return-Path: <java-user-return-28975-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84350 invoked from network); 2 Jul 2007 21:53:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jul 2007 21:53:06 -0000
Received: (qmail 39744 invoked by uid 500); 2 Jul 2007 21:53:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39540 invoked by uid 500); 2 Jul 2007 21:53:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39529 invoked by uid 99); 2 Jul 2007 21:52:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jul 2007 14:52:59 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of walt.stoneburner@gmail.com designates 64.233.162.235 as permitted sender)
Received: from [64.233.162.235] (HELO nz-out-0506.google.com) (64.233.162.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jul 2007 14:52:56 -0700
Received: by nz-out-0506.google.com with SMTP id i28so634396nzi
        for <java-user@lucene.apache.org>; Mon, 02 Jul 2007 14:52:35 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=dYv7PkSWCb3onpZVDlwZMyWhqBPyr8Xwef9wDJ/snnEkHHWFCzBjtbAf51fKGRkJi3AaGE3dZjUablrk+/TI4EFU6IZU0PNFXXuTc6ZAgnqzp7DZEs1R0mOrHhXGqLUrie8StgE6vt5Pzo9RaiPoy3xUtRH+kaP+Ir9WKrp1tpw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=DaqmblIC661KmAvlBxbV4tPGUa65b65kYn9xHYr7MrZp3xZeDrpnDkeXqhrNDGuMBibNNQKIra/2R7BBi5fyO1rGjB6OCuRhe/5DsrK5zGmTysOhOBjU6UBgXkawL4zRYxJWvDQaLaBsrDtGiHNGtofAPgDgSpnmocoUQ55TjlM=
Received: by 10.114.144.1 with SMTP id r1mr5536433wad.1183413155215;
        Mon, 02 Jul 2007 14:52:35 -0700 (PDT)
Received: by 10.115.32.13 with HTTP; Mon, 2 Jul 2007 14:52:35 -0700 (PDT)
Message-ID: <ae6f38f60707021452t2ea90938le7e69ad959e31ce1@mail.gmail.com>
Date: Mon, 2 Jul 2007 17:52:35 -0400
From: "Walt Stoneburner" <walt.stoneburner@gmail.com>
To: java-user@lucene.apache.org
Subject: Reusing Document Objects (was Auto Slop)
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_66762_27092008.1183413155117"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_66762_27092008.1183413155117
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

If I create a Document object, can I pass it to multiple index writers
without harm?

Or, does the process of being handed to an Index Writer somehow mutate the
state of the Document object, say during tokenizing, that would cause it's
re-use with a totally separate index to cause problems ...such as I'm seeing
with slop?

-wls

------=_Part_66762_27092008.1183413155117--

From java-user-return-28976-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 02 21:58:48 2007
Return-Path: <java-user-return-28976-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86013 invoked from network); 2 Jul 2007 21:58:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jul 2007 21:58:47 -0000
Received: (qmail 48554 invoked by uid 500); 2 Jul 2007 21:58:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48527 invoked by uid 500); 2 Jul 2007 21:58:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48512 invoked by uid 99); 2 Jul 2007 21:58:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jul 2007 14:58:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [128.218.33.11] (HELO gossamer.ckm.ucsf.edu) (128.218.33.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jul 2007 14:58:38 -0700
Received: from CKMPC08 (tikal.library.ucsf.edu [128.218.15.151])
	by gossamer.ckm.ucsf.edu (8.13.8/8.13.8) with ESMTP id l62LwEJR027070
	for <java-user@lucene.apache.org>; Mon, 2 Jul 2007 14:58:17 -0700 (PDT)
From: "Renaud Waldura" <renaud.waldura@library.ucsf.edu>
To: <java-user@lucene.apache.org>
Subject: RE: highlighting phrase query
Date: Mon, 2 Jul 2007 14:58:09 -0700
Message-ID: <009d01c7bcf4$16c35290$970fda80@libraria.ucsf.edu>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <468969FE.3070807@gmail.com>
Thread-Index: Ace87b2+JUvd48jlTRCFjp7G7fUUQAABhQaw
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
X-Filter-Version: 1.15 (gossamer)
X-Virus-Checked: Checked by ClamAV on apache.org

Mark:

Thanks a million for this comprehensive analysis. This is going straight to
my manager. :)

--Renaud
 

-----Original Message-----
From: Mark Miller [mailto:markrmiller@gmail.com] 
Sent: Monday, July 02, 2007 2:11 PM
To: java-user@lucene.apache.org
Subject: Re: highlighting phrase query

There has been a lot of Highlighter discussion lately, but just to try and
sum up the state of Highlighting in the Lucene world:

There are four Highlighter implementations that I know of. From what I can
tell, only the original Contrib Highlighter has received sustained active
development by more than one individual.

Contrib... [snip]



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28977-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 03 00:50:44 2007
Return-Path: <java-user-return-28977-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33719 invoked from network); 3 Jul 2007 00:50:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jul 2007 00:50:43 -0000
Received: (qmail 16147 invoked by uid 500); 3 Jul 2007 00:50:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16106 invoked by uid 500); 3 Jul 2007 00:50:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16090 invoked by uid 99); 3 Jul 2007 00:50:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jul 2007 17:50:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [64.81.62.48] (HELO mail01.apmindsf.com) (64.81.62.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jul 2007 17:50:32 -0700
Received: from [172.30.250.101] (helo=[172.30.250.101])
	by mail01.apmindsf.com with esmtp (Exim 4.50)
	id 1I5Wab-0007Sx-Dj
	for java-user@lucene.apache.org; Mon, 02 Jul 2007 17:50:11 -0700
Message-ID: <46899FF8.6060309@metaweb.com>
Date: Mon, 02 Jul 2007 18:01:44 -0700
From: Tim Sturge <tsturge@metaweb.com>
User-Agent: Mozilla Thunderbird 1.0.6 (X11/20050715)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: multi-term query weighting
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I have an index with two different sources of information, one small but 
of high quality (call it "title"), and one large, but of lower quality 
(call it "body").  I give boosts to certain documents related to their 
popularity (this is very similar to what one would do indexing the web).

The problem I have is a query like "John Bush". I translate that into " 
(title:John^4.0 body:John) AND (title:Bush^4.0 body:Bush) ". But the 
results I get are:

1. George Bush
...
4. John Kerry
...
10. John Bush

The reason is (looking at explain) that George Bush is scored:
169 = sum(
 1 =  <match in body with tiny norm for "John">
 )
 168 = sum(
     160 = <title match for "Bush">
     8 = <body match for "Bush">
 )
)

and John Kerry is similar but reversed. Poor old "John Bush" only scores:

72 = sum(
  40 = (<title match for "John">+<body match>)
  32 = (<title match for "Bush">+ <body match>)
)

because his initial boost was only 1/4 of George's.

The question I have is, how can tell the searcher to care about 
"balance"? I really want the score over 2 terms to be more like 
(sqrt(X)+sqrt(Y))^2 or maybe even exp(log(X)+log(Y))  rather than just 
X+Y. Is that supported in some obvious way, or is there some other way 
to phrase my query to say "I want both terms but they should both be 
important if possible?"

Thanks,

Tim







---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28978-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 03 01:44:53 2007
Return-Path: <java-user-return-28978-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54055 invoked from network); 3 Jul 2007 01:44:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jul 2007 01:44:51 -0000
Received: (qmail 60354 invoked by uid 500); 3 Jul 2007 01:44:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60100 invoked by uid 500); 3 Jul 2007 01:44:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60075 invoked by uid 99); 3 Jul 2007 01:44:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jul 2007 18:44:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.117.178.41] (HELO ns21.webhostsg.com) (203.117.178.41)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jul 2007 18:44:41 -0700
X-ClientAddr: 202.63.154.27
Received: from xenb04 (27.202-63-154.unknown.qala.com.sg [202.63.154.27])
	by ns21.webhostsg.com (8.12.11/8.12.11) with ESMTP id l631p00c001047
	for <java-user@lucene.apache.org>; Tue, 3 Jul 2007 09:51:15 +0800
Message-Id: <200707030151.l631p00c001047@ns21.webhostsg.com>
From: "Lee Li Bin" <leelb@xedge.com.sg>
To: <java-user@lucene.apache.org>
Subject: RE: Pagination
Date: Tue, 3 Jul 2007 09:40:30 +0800
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
In-Reply-To: <17dad8c10707020955n55b3f818i354fd4506eef81f1@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
Thread-Index: Ace8ywrd07NfcsqQTWu9t728ZDM93wAR+Yeg
X-ns21-MailScanner-Information: Please contact the ISP for more information
X-ns21-MailScanner: Found to be clean
X-ns21-MailScanner-SpamCheck: 
X-MailScanner-From: leelb@xedge.com.sg
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Thanks Mark! 

I do have the same question as Alixandre. How do I get the content of the
document instead of the document id?

Thanks.

Regards,
Lee Li Bin
-----Original Message-----
From: Alixandre Santana [mailto:alixandresantana@gmail.com] 
Sent: Tuesday, July 03, 2007 12:55 AM
To: java-user@lucene.apache.org
Subject: Re: Pagination

Mark,

The ScoreDoc[] contains only the  IDs of each lucene document. what
would be the best way of getting the entire (lucene)document ?
Should i do a new search with the ID retrivied by hpc.getScores() -
(searcher.doc(idDoc))?

thanks.

Alixandre

On 7/2/07, mark harwood <markharw00d@yahoo.co.uk> wrote:
> The Hits class is OK but can be inefficient due to re-running the query
unnecessarily.
>
> The class below illustrates how to efficiently retrieve a particular page
of results and lends itself to webapps where you don't want to retain server
side state (i.e. a Hits object) for each client.
> It would make sense to put an upper limit on the "start" parameter (as
Google etc do) to avoid consuming to much RAM per client request.
>
> Cheers,
> Mark
>
> [Begin code]
>
>
>
>
> package lucene.pagination;
>
> import org.apache.lucene.index.Term;
> import org.apache.lucene.search.HitCollector;
> import org.apache.lucene.search.IndexSearcher;
> import org.apache.lucene.search.Query;
> import org.apache.lucene.search.ScoreDoc;
> import org.apache.lucene.search.TermQuery;
> import org.apache.lucene.util.PriorityQueue;
>
> /**
>  * A HitCollector that retrieves a specific page of results
>  * @author maharwood
>  */
> public class HitPageCollector extends HitCollector
> {
>     //Demo code showing pagination
>     public static void main(String[] args) throws Exception
>     {
>         IndexSearcher s=new IndexSearcher("/indexes/nasa");
>         HitPageCollector hpc=new HitPageCollector(1,10);
>         Query q=new TermQuery(new Term("contents","sea"));
>         s.search(q,hpc);
>         ScoreDoc[] sd = hpc.getScores();
>         System.out.println("Hits "+ hpc.getStart()+" - "+ hpc.getEnd()+"
of "+hpc.getTotalAvailable());
>         for (int i = 0; i < sd.length; i++)
>         {
>             System.out.println(sd[i].doc);
>         }
>         s.close();
>     }
>
>     int nDocs;
>     PriorityQueue hq;
>     float minScore = 0.0f;
>     int totalHits = 0;
>     int start;
>     int maxNumHits;
>     int totalInThisPage;
>
>     public HitPageCollector(int start, int maxNumHits)
>     {
>         this.nDocs = start + maxNumHits;
>         this.start = start;
>         this.maxNumHits = maxNumHits;
>         hq = new HitQueue(nDocs);
>     }
>
>     public void collect(int doc, float score)
>     {
>         totalHits++;
>         if((hq.size()<nDocs)||(score >= minScore))
>         {
>             ScoreDoc scoreDoc = new ScoreDoc(doc,score);
>             hq.insert(scoreDoc);              // update hit queue
>             minScore = ((ScoreDoc)hq.top()).score; // reset minScore
>         }
>         totalInThisPage=hq.size();
>     }
>
>
>     public ScoreDoc[] getScores()
>     {
>         //just returns the number of hits required from the required start
point
>         /*
>             So, given hits:
>                 1234567890
>             and a start of 2 + maxNumHits of 3 should return:
>                 234
>             or, given hits
>                 12
>             should return
>                 2
>             and so, on.
>         */
>         if (start <= 0)
>         {
>             throw new IllegalArgumentException("Invalid start :" + start+"
- start should be >=1");
>         }
>         int numReturned = Math.min(maxNumHits, (hq.size() - (start - 1)));
>         if (numReturned <= 0)
>         {
>             return new ScoreDoc[0];
>         }
>         ScoreDoc[] scoreDocs = new ScoreDoc[numReturned];
>         ScoreDoc scoreDoc;
>         for (int i = hq.size() - 1; i >= 0; i--) // put docs in array,
working backwards from lowest count
>         {
>             scoreDoc = (ScoreDoc) hq.pop();
>             if (i < (start - 1))
>             {
>                 break; //off the beginning of the results array
>             }
>             if (i < (scoreDocs.length + (start - 1)))
>             {
>                 scoreDocs[i - (start - 1)] = scoreDoc; //within scope of
results array
>             }
>         }
>         return scoreDocs;
>     }
>
>     public int getTotalAvailable()
>     {
>         return totalHits;
>     }
>
>     public int getStart()
>     {
>         return start;
>     }
>
>     public int getEnd()
>     {
>         return start+totalInThisPage-1;
>     }
>
>     public class HitQueue extends PriorityQueue
>     {
>           public HitQueue(int size)
>           {
>             initialize(size);
>           }
>           public final boolean lessThan(Object a, Object b)
>           {
>             ScoreDoc hitA = (ScoreDoc)a;
>             ScoreDoc hitB = (ScoreDoc)b;
>             if (hitA.score == hitB.score)
>               return hitA.doc > hitB.doc;
>             else
>               return hitA.score < hitB.score;
>           }
>     }
> }
>
>
>
> ----- Original Message ----
> From: Lee Li Bin <leelb@xedge.com.sg>
> To: java-user@lucene.apache.org
> Sent: Monday, 2 July, 2007 9:59:14 AM
> Subject: RE: Pagination
>
> Hi,
>
> I still have no idea of how to get it done. Can give me some details?
>
> The web application is in jsp btw.
>
> Thanks a lot.
>
>
> Regards,
> Lee Li Bin
> -----Original Message-----
> From: Chris Lu [mailto:chris.lu@gmail.com]
> Sent: Saturday, June 30, 2007 2:21 AM
> To: java-user@lucene.apache.org
> Subject: Re: Pagination
>
> After search, you will just get an object Hits, and go through all of the
> documents by hits.doc(i).
>
> The pagination is controlled by you. Lucene is pre-caching first 200
> documents and lazy loading the rest by batch size 200.
>
> --
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
> Lucene Database Search in 3 minutes:
>
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_m
> inutes
>
> On 6/29/07, Lee Li Bin <leelb@xedge.com.sg> wrote:
> >
> > Hi,
> >
> > does anyone knows how to do pagination on jsp page using the number of
> > hits
> > return? Or any other solutions?
> >
> >
> >
> > Do provide me with some sample coding if possible or a step by step
guide.
> > Sry if I'm asking too much, I'm new to lucene.
> >
> >
> >
> > Thanks
> >
> >
> >
> >
> >
> >
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
>
>       ___________________________________________________________
> Yahoo! Answers - Got a question? Someone out there knows the answer. Try
it
> now.
> http://uk.answers.yahoo.com/
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Alixandre Santana

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28979-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 03 04:02:19 2007
Return-Path: <java-user-return-28979-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94763 invoked from network); 3 Jul 2007 04:02:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jul 2007 04:02:18 -0000
Received: (qmail 43748 invoked by uid 500); 3 Jul 2007 04:02:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43697 invoked by uid 500); 3 Jul 2007 04:02:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43674 invoked by uid 99); 3 Jul 2007 04:02:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jul 2007 21:02:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.117.178.41] (HELO ns21.webhostsg.com) (203.117.178.41)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jul 2007 21:02:05 -0700
X-ClientAddr: 202.63.154.27
Received: from xenb04 (27.202-63-154.unknown.qala.com.sg [202.63.154.27])
	by ns21.webhostsg.com (8.12.11/8.12.11) with ESMTP id l6348FZK001047
	for <java-user@lucene.apache.org>; Tue, 3 Jul 2007 12:08:43 +0800
Message-Id: <200707030408.l6348FZK001047@ns21.webhostsg.com>
From: "Lee Li Bin" <leelb@xedge.com.sg>
To: <java-user@lucene.apache.org>
Subject: RE: Pagination
Date: Tue, 3 Jul 2007 11:57:44 +0800
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
In-Reply-To: <17dad8c10707020955n55b3f818i354fd4506eef81f1@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
Thread-Index: Ace8ywrd07NfcsqQTWu9t728ZDM93wAWw92A
X-ns21-MailScanner-Information: Please contact the ISP for more information
X-ns21-MailScanner: Found to be clean
X-ns21-MailScanner-SpamCheck: 
X-MailScanner-From: leelb@xedge.com.sg
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Mark,

How do I display results on the second page? 
I manage to display on one page using your coding.

 
Regards,
Lee Li Bin

-----Original Message-----
From: Alixandre Santana [mailto:alixandresantana@gmail.com] 
Sent: Tuesday, July 03, 2007 12:55 AM
To: java-user@lucene.apache.org
Subject: Re: Pagination

Mark,

The ScoreDoc[] contains only the  IDs of each lucene document. what
would be the best way of getting the entire (lucene)document ?
Should i do a new search with the ID retrivied by hpc.getScores() -
(searcher.doc(idDoc))?

thanks.

Alixandre

On 7/2/07, mark harwood <markharw00d@yahoo.co.uk> wrote:
> The Hits class is OK but can be inefficient due to re-running the query
unnecessarily.
>
> The class below illustrates how to efficiently retrieve a particular page
of results and lends itself to webapps where you don't want to retain server
side state (i.e. a Hits object) for each client.
> It would make sense to put an upper limit on the "start" parameter (as
Google etc do) to avoid consuming to much RAM per client request.
>
> Cheers,
> Mark
>
> [Begin code]
>
>
>
>
> package lucene.pagination;
>
> import org.apache.lucene.index.Term;
> import org.apache.lucene.search.HitCollector;
> import org.apache.lucene.search.IndexSearcher;
> import org.apache.lucene.search.Query;
> import org.apache.lucene.search.ScoreDoc;
> import org.apache.lucene.search.TermQuery;
> import org.apache.lucene.util.PriorityQueue;
>
> /**
>  * A HitCollector that retrieves a specific page of results
>  * @author maharwood
>  */
> public class HitPageCollector extends HitCollector
> {
>     //Demo code showing pagination
>     public static void main(String[] args) throws Exception
>     {
>         IndexSearcher s=new IndexSearcher("/indexes/nasa");
>         HitPageCollector hpc=new HitPageCollector(1,10);
>         Query q=new TermQuery(new Term("contents","sea"));
>         s.search(q,hpc);
>         ScoreDoc[] sd = hpc.getScores();
>         System.out.println("Hits "+ hpc.getStart()+" - "+ hpc.getEnd()+"
of "+hpc.getTotalAvailable());
>         for (int i = 0; i < sd.length; i++)
>         {
>             System.out.println(sd[i].doc);
>         }
>         s.close();
>     }
>
>     int nDocs;
>     PriorityQueue hq;
>     float minScore = 0.0f;
>     int totalHits = 0;
>     int start;
>     int maxNumHits;
>     int totalInThisPage;
>
>     public HitPageCollector(int start, int maxNumHits)
>     {
>         this.nDocs = start + maxNumHits;
>         this.start = start;
>         this.maxNumHits = maxNumHits;
>         hq = new HitQueue(nDocs);
>     }
>
>     public void collect(int doc, float score)
>     {
>         totalHits++;
>         if((hq.size()<nDocs)||(score >= minScore))
>         {
>             ScoreDoc scoreDoc = new ScoreDoc(doc,score);
>             hq.insert(scoreDoc);              // update hit queue
>             minScore = ((ScoreDoc)hq.top()).score; // reset minScore
>         }
>         totalInThisPage=hq.size();
>     }
>
>
>     public ScoreDoc[] getScores()
>     {
>         //just returns the number of hits required from the required start
point
>         /*
>             So, given hits:
>                 1234567890
>             and a start of 2 + maxNumHits of 3 should return:
>                 234
>             or, given hits
>                 12
>             should return
>                 2
>             and so, on.
>         */
>         if (start <= 0)
>         {
>             throw new IllegalArgumentException("Invalid start :" + start+"
- start should be >=1");
>         }
>         int numReturned = Math.min(maxNumHits, (hq.size() - (start - 1)));
>         if (numReturned <= 0)
>         {
>             return new ScoreDoc[0];
>         }
>         ScoreDoc[] scoreDocs = new ScoreDoc[numReturned];
>         ScoreDoc scoreDoc;
>         for (int i = hq.size() - 1; i >= 0; i--) // put docs in array,
working backwards from lowest count
>         {
>             scoreDoc = (ScoreDoc) hq.pop();
>             if (i < (start - 1))
>             {
>                 break; //off the beginning of the results array
>             }
>             if (i < (scoreDocs.length + (start - 1)))
>             {
>                 scoreDocs[i - (start - 1)] = scoreDoc; //within scope of
results array
>             }
>         }
>         return scoreDocs;
>     }
>
>     public int getTotalAvailable()
>     {
>         return totalHits;
>     }
>
>     public int getStart()
>     {
>         return start;
>     }
>
>     public int getEnd()
>     {
>         return start+totalInThisPage-1;
>     }
>
>     public class HitQueue extends PriorityQueue
>     {
>           public HitQueue(int size)
>           {
>             initialize(size);
>           }
>           public final boolean lessThan(Object a, Object b)
>           {
>             ScoreDoc hitA = (ScoreDoc)a;
>             ScoreDoc hitB = (ScoreDoc)b;
>             if (hitA.score == hitB.score)
>               return hitA.doc > hitB.doc;
>             else
>               return hitA.score < hitB.score;
>           }
>     }
> }
>
>
>
> ----- Original Message ----
> From: Lee Li Bin <leelb@xedge.com.sg>
> To: java-user@lucene.apache.org
> Sent: Monday, 2 July, 2007 9:59:14 AM
> Subject: RE: Pagination
>
> Hi,
>
> I still have no idea of how to get it done. Can give me some details?
>
> The web application is in jsp btw.
>
> Thanks a lot.
>
>
> Regards,
> Lee Li Bin
> -----Original Message-----
> From: Chris Lu [mailto:chris.lu@gmail.com]
> Sent: Saturday, June 30, 2007 2:21 AM
> To: java-user@lucene.apache.org
> Subject: Re: Pagination
>
> After search, you will just get an object Hits, and go through all of the
> documents by hits.doc(i).
>
> The pagination is controlled by you. Lucene is pre-caching first 200
> documents and lazy loading the rest by batch size 200.
>
> --
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
> Lucene Database Search in 3 minutes:
>
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_m
> inutes
>
> On 6/29/07, Lee Li Bin <leelb@xedge.com.sg> wrote:
> >
> > Hi,
> >
> > does anyone knows how to do pagination on jsp page using the number of
> > hits
> > return? Or any other solutions?
> >
> >
> >
> > Do provide me with some sample coding if possible or a step by step
guide.
> > Sry if I'm asking too much, I'm new to lucene.
> >
> >
> >
> > Thanks
> >
> >
> >
> >
> >
> >
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
>
>       ___________________________________________________________
> Yahoo! Answers - Got a question? Someone out there knows the answer. Try
it
> now.
> http://uk.answers.yahoo.com/
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Alixandre Santana

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28980-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 03 05:10:54 2007
Return-Path: <java-user-return-28980-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15980 invoked from network); 3 Jul 2007 05:10:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jul 2007 05:10:52 -0000
Received: (qmail 46310 invoked by uid 500); 3 Jul 2007 05:10:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45776 invoked by uid 500); 3 Jul 2007 05:10:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45765 invoked by uid 99); 3 Jul 2007 05:10:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jul 2007 22:10:47 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of sand.chawla@gmail.com designates 209.85.146.179 as permitted sender)
Received: from [209.85.146.179] (HELO wa-out-1112.google.com) (209.85.146.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jul 2007 22:10:43 -0700
Received: by wa-out-1112.google.com with SMTP id j40so2767053wah
        for <java-user@lucene.apache.org>; Mon, 02 Jul 2007 22:10:22 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=PSEwVCuLb3r4ltbSstWXyFJA227MuUBdCSmvENub85PDr0V8qwf4qdjCEkqEQbm+qc59jh0UoLLiiYlm/7igSJDqq0LOCvJnG0pk2QlB4rUWq3MxIiQC7OipIEJYy3v+eMPL+uwAUezy/sbdIWwwiZh5TExG6HuoI3109wvisRw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=OqvTvd7+jVCFPXZZkatXHWzI0y+rkHWVlX4mRSxOz7AjpxeF5T0hvhzev5JjTX+b9mXqeC5VW7WRuyRp3M09L4KuH/fDBW347d61l3WF8pD6cuy+PhH7ExauSVpx1Ng4AAIUsRh8l4HfXYP+j/HRoIKlrn7oFkwB+hjn/bkB0mM=
Received: by 10.114.198.1 with SMTP id v1mr5811319waf.1183439422825;
        Mon, 02 Jul 2007 22:10:22 -0700 (PDT)
Received: by 10.114.127.3 with HTTP; Mon, 2 Jul 2007 22:10:22 -0700 (PDT)
Message-ID: <a70e4c2b0707022210g17b70d7bj849cc5a2bf71e93a@mail.gmail.com>
Date: Tue, 3 Jul 2007 10:40:22 +0530
From: "sandeep chawla" <sand.chawla@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: highlighting phrase query
In-Reply-To: <009d01c7bcf4$16c35290$970fda80@libraria.ucsf.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <468969FE.3070807@gmail.com>
	 <009d01c7bcf4$16c35290$970fda80@libraria.ucsf.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks a lot Mark,

has any one used Lucene-794? how stable it it. is it widely used in industry.

These are some of my questions :)

Thanks
Sandeep

On 03/07/07, Renaud Waldura <renaud.waldura@library.ucsf.edu> wrote:
> Mark:
>
> Thanks a million for this comprehensive analysis. This is going straight to
> my manager. :)
>
> --Renaud
>
>
> -----Original Message-----
> From: Mark Miller [mailto:markrmiller@gmail.com]
> Sent: Monday, July 02, 2007 2:11 PM
> To: java-user@lucene.apache.org
> Subject: Re: highlighting phrase query
>
> There has been a lot of Highlighter discussion lately, but just to try and
> sum up the state of Highlighting in the Lucene world:
>
> There are four Highlighter implementations that I know of. From what I can
> tell, only the original Contrib Highlighter has received sustained active
> development by more than one individual.
>
> Contrib... [snip]
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
SANDEEP CHAWLA
House No- 23
10th main
BTM 1st  Stage
Bangalore Mobile: 91-9986150603

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28981-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 03 06:49:19 2007
Return-Path: <java-user-return-28981-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41680 invoked from network); 3 Jul 2007 06:49:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jul 2007 06:49:17 -0000
Received: (qmail 78235 invoked by uid 500); 3 Jul 2007 06:49:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78200 invoked by uid 500); 3 Jul 2007 06:49:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78186 invoked by uid 99); 3 Jul 2007 06:49:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jul 2007 23:49:09 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [66.249.82.237] (HELO wx-out-0506.google.com) (66.249.82.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jul 2007 23:49:05 -0700
Received: by wx-out-0506.google.com with SMTP id i28so1525166wxd
        for <java-user@lucene.apache.org>; Mon, 02 Jul 2007 23:48:44 -0700 (PDT)
Received: by 10.142.102.5 with SMTP id z5mr409920wfb.1183445323243;
        Mon, 02 Jul 2007 23:48:43 -0700 (PDT)
Received: by 10.142.102.1 with HTTP; Mon, 2 Jul 2007 23:48:43 -0700 (PDT)
Message-ID: <c6ccd7950707022348x4cce5dc5nc21c2b582abf1922@mail.gmail.com>
Date: Mon, 2 Jul 2007 23:48:43 -0700
From: "Cathy Murphy" <cathy@nachofoto.com>
To: erickerickson@gmail.com, hossman_lucene@fucit.org, 
	java-user@lucene.apache.org
Subject: Re: Lucene index in memcache
In-Reply-To: <Pine.LNX.4.58.0707021412030.10524@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_89134_28524307.1183445323219"
References: <c6ccd7950707021349h24b0bcefsc312a18240d24b70@mail.gmail.com>
	 <Pine.LNX.4.58.0707021412030.10524@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_89134_28524307.1183445323219
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Erick & Chris ,
Thanks for your response.
I have done some profiling , and it seems the response is slow when there
are long queries(more than 5-6 words per query).
The way I have implemented is : I pass in the search query and lucene
returns the total number of hits, along with ids . I then fetch objects
for only those ids , as required per the pagination.
Also it is a dedicated search box .

Thanks,
-- 
Cathy
www.nachofoto.com




On 7/2/07, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
>
> : Is there a way to store lucene index in memcache. During high traffic
> search
> : becomes very slow. :(
>
> http://people.apache.org/~hossman/#xyproblem
> Your question appears to be an "XY Problem" ... that is: you are dealing
> with "X", you are assuming "Y" will help you, and you are asking about "Y"
> without giving more details about the "X" so that we can understand the
> full issue.  Perhaps the best solution doesn't involve "Y" at all?
> See Also: http://www.perlmonks.org/index.pl?node_id=542341
>
>
> If you provide some more info about how you are using Lucene (ie: what you
> code looks like) and what the concepts of "high traffic" and "slow" mean
> to you, we might be able to help you better.
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_89134_28524307.1183445323219--

From java-user-return-28982-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 03 10:16:26 2007
Return-Path: <java-user-return-28982-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36013 invoked from network); 3 Jul 2007 10:16:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jul 2007 10:16:25 -0000
Received: (qmail 4725 invoked by uid 500); 3 Jul 2007 10:16:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4663 invoked by uid 500); 3 Jul 2007 10:16:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4584 invoked by uid 99); 3 Jul 2007 10:16:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 03:16:17 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.233 as permitted sender)
Received: from [66.249.82.233] (HELO wx-out-0506.google.com) (66.249.82.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 03:16:13 -0700
Received: by wx-out-0506.google.com with SMTP id i28so1565665wxd
        for <java-user@lucene.apache.org>; Tue, 03 Jul 2007 03:15:53 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=lUJMwv9SsR/FBbojsY++x3hT6VCd3MvTWwvYKvCWitE/aB3nVkV6dQQumetRVPSLIM0vu9PQV9c2VZu2lly1qmZN8vgkoCHPbTLyxhUZga8b9aQKSwtqA/j326exdAEai4neTNO6Tb5wtNBqBZ9qyjwmf7iaQH2+2XDccEml5wA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=SIvhtfRW47mk4ZdvYmk61E7qtCUOEmSluMaQ/UWNTFk1Gfvy1BC9VpwamHO05FLedvElM9q27R50fn/6ShXgyZo2YtTyPW0YF5nSJO1nNyjgIJ1hcv2RHBrvaze7lVf0FeMqvcBOUfTlkQIImjVP/M48nDbLZmXqreQgHkuaVxc=
Received: by 10.70.87.5 with SMTP id k5mr9329644wxb.1183457752718;
        Tue, 03 Jul 2007 03:15:52 -0700 (PDT)
Received: from ?192.168.1.100? ( [216.66.114.204])
        by mx.google.com with ESMTP id q26sm9971156ele.2007.07.03.03.15.50
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 03 Jul 2007 03:15:50 -0700 (PDT)
Message-ID: <468A2184.6000502@gmail.com>
Date: Tue, 03 Jul 2007 06:14:28 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.4 (Windows/20070604)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: highlighting phrase query
References: <468969FE.3070807@gmail.com>	 <009d01c7bcf4$16c35290$970fda80@libraria.ucsf.edu> <a70e4c2b0707022210g17b70d7bj849cc5a2bf71e93a@mail.gmail.com>
In-Reply-To: <a70e4c2b0707022210g17b70d7bj849cc5a2bf71e93a@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


>
> has any one used Lucene-794? how stable it it. is it widely used in 
> industry.
>
>
I have used it extensively and I would say it is extremely stable. As I 
said, much of the code from it is literally the same compiled code from 
Contrib Highlighter (It is really just a new Scorer class for the 
Contrib Highlighter).

It is also the newest of the Highlighter issues in JIRA and I would say 
it is not even close to widely used in the industry.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28983-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 03 10:18:16 2007
Return-Path: <java-user-return-28983-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36617 invoked from network); 3 Jul 2007 10:18:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jul 2007 10:18:11 -0000
Received: (qmail 9359 invoked by uid 500); 3 Jul 2007 10:18:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9324 invoked by uid 500); 3 Jul 2007 10:18:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9310 invoked by uid 99); 3 Jul 2007 10:18:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 03:18:02 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mailing.patrick.kimber@gmail.com designates 209.85.146.178 as permitted sender)
Received: from [209.85.146.178] (HELO wa-out-1112.google.com) (209.85.146.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 03:17:59 -0700
Received: by wa-out-1112.google.com with SMTP id j40so2848704wah
        for <java-user@lucene.apache.org>; Tue, 03 Jul 2007 03:17:39 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=p0M/pAKzCT9ChKptd5VaN2l/NfY3g2dOXd/XAaNR7wcZYrWN5ZbAncWuhIZyEOaiINB9L1qaawYMWf7gINz01sME//e16ZzASyBeKrb1WoRFKOtl1b/uYwTQunHaSa3rZaDBYXQ0uwNqnhdfhQ6s1GUP3ox2QXRzTrLBXDAqlSA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=IieuuqjW+DnJmLK7lwxCeWv6dIqKl4D9e3hJ1AguREoiO9Ro5EmZ2qfcU5SWGeYYtlOVj7AYk9b/NTbnqGqI9SuHqlDA9HKSAG358BJGxX9BUFTZ4E0IR0Qq/I9BtLB8odmfVaSPHy7kzXfQWMx/54HiUmFbmpedzeXO3THmSCY=
Received: by 10.114.196.1 with SMTP id t1mr6019923waf.1183457858835;
        Tue, 03 Jul 2007 03:17:38 -0700 (PDT)
Received: by 10.115.55.4 with HTTP; Tue, 3 Jul 2007 03:17:38 -0700 (PDT)
Message-ID: <4f9b23800707030317i343559e2ufda83bfd724c9326@mail.gmail.com>
Date: Tue, 3 Jul 2007 11:17:38 +0100
From: "Patrick Kimber" <mailing.patrick.kimber@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene 2.2, NFS, Lock obtain timed out
In-Reply-To: <1183205087.22530.1197845153@webmail.messagingengine.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <c68e39170706290647o77cc4c29t4ecca000af1e95e4@mail.gmail.com>
	 <OFFBC6AB23.B412A20B-ON88257309.00824908-88257309.0082A587@il.ibm.com>
	 <c68e39170706291805w6e5c4dfbo3526e539d4e9f3f6@mail.gmail.com>
	 <1183205087.22530.1197845153@webmail.messagingengine.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi

I have added more logging to my test application.  I have two servers
writing to a shared Lucene index on an NFS partition...

Here is the logging from one server...

[10:49:18] [DEBUG] LuceneIndexAccessor closing cached writer
[10:49:18] [DEBUG] ExpirationTimeDeletionPolicy onCommit() delete [segments_n]

and the other server (at the same time):

[10:49:18] [DEBUG] LuceneIndexAccessor opening new writer and caching it
[10:49:18] [DEBUG] IndexAccessProvider getWriter()
[10:49:18] [ERROR] DocumentCollection update(DocumentData)
com.company.lucene.LuceneIcmException: I/O Error: Cannot add the
document to the index.
[/mnt/nfstest/repository/lucene/lucene-icm-test-1-0/segments_n (No
such file or directory)]
    at com.company.lucene.RepositoryWriter.addDocument(RepositoryWriter.java:182)

I think the exception is being thrown when the IndexWriter is created:
new IndexWriter(directory, false, analyzer, false, deletionPolicy);

I am confused... segments_n should not have been touched for 3 minutes
so why would a new IndexWriter want to read it?

Here is the whole of the stack trace:

com.company.lucene.LuceneIcmException: I/O Error: Cannot add the
document to the index.
[/mnt/nfstest/repository/lucene/lucene-icm-test-1-0/segments_n (No
such file or directory)]
	at com.company.lucene.RepositoryWriter.addDocument(RepositoryWriter.java:182)
	at com.company.lucene.IndexUpdate.addDocument(IndexUpdate.java:364)
	at com.company.lucene.IndexUpdate.addDocument(IndexUpdate.java:342)
	at com.company.lucene.IndexUpdate.update(IndexUpdate.java:67)
	at com.company.lucene.icm.DocumentCollection.update(DocumentCollection.java:390)
	at lucene.icm.test.Write.add(Write.java:105)
	at lucene.icm.test.Write.run(Write.java:79)
	at lucene.icm.test.Write.main(Write.java:43)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:324)
	at org.codehaus.mojo.exec.ExecJavaMojo$1.run(ExecJavaMojo.java:271)
	at java.lang.Thread.run(Thread.java:534)
Caused by: java.io.FileNotFoundException:
/mnt/nfstest/repository/lucene/lucene-icm-test-1-0/segments_n (No such
file or directory)
	at java.io.RandomAccessFile.open(Native Method)
	at java.io.RandomAccessFile.<init>(RandomAccessFile.java:204)
	at org.apache.lucene.store.FSDirectory$FSIndexInput$Descriptor.<init>(FSDirectory.java:506)
	at org.apache.lucene.store.FSDirectory$FSIndexInput.<init>(FSDirectory.java:536)
	at org.apache.lucene.store.FSDirectory$FSIndexInput.<init>(FSDirectory.java:531)
	at org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java:440)
	at org.apache.lucene.index.SegmentInfos.read(SegmentInfos.java:193)
	at org.apache.lucene.index.IndexFileDeleter.<init>(IndexFileDeleter.java:156)
	at org.apache.lucene.index.IndexWriter.init(IndexWriter.java:626)
	at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:573)
	at com.subshell.lucene.indexaccess.impl.IndexAccessProvider.getWriter(IndexAccessProvider.java:68)
	at com.subshell.lucene.indexaccess.impl.LuceneIndexAccessor.getWriter(LuceneIndexAccessor.java:171)
	at com.company.lucene.RepositoryWriter.addDocument(RepositoryWriter.java:176)
	... 13 more

Thank you very much for your previous comments and emails.

Any help solving this issue would be appreciated.

Patrick


On 30/06/07, Michael McCandless <lucene@mikemccandless.com> wrote:
>
> Patrick Kimber wrote:
>
> > I have been checking the application log.  Just before the time when
> > the lock file errors occur I found this log entry:
> > [11:28:59] [ERROR] IndexAccessProvider
> > java.io.FileNotFoundException:
> > /mnt/nfstest/repository/lucene/lucene-icm-test-1-0/segments_h75 (No
> > such file or directory)
> >     at java.io.RandomAccessFile.open(Native Method)
>
> I think this exception is the root cause.  On hitting this IOException
> in reader.close(), that means this reader has not released its write
> lock.  Is it possible to see the full stack trace?
>
> Having the wrong deletion policy or even a buggy deletion policy (if
> indeed file.lastModified() varies by too much across machines) can't
> cause this (I think).  At worse, the wrong deletion policy should
> cause other already-open readers to hit "Stale NFS handle"
> IOExceptions during searching.  So, you should use your
> ExpirationTimeDeletionPolicy when opening your readers if they will be
> doing deletes, but I don't think it explains this root-cause exception
> during close().
>
> It's a rather spooky exception ... in close(), the reader initializes
> an IndexFileDeleter which lists the directory and opens any segments_N
> files that it finds.
>
> Do you have a writer on one machine closing, and then very soon
> thereafter this reader on a different machine does deletes and tries
> to close?
>
> My best guess is the exception is happening inside that initialization
> because the directory listing said that "segments_XXX" exists but then
> when it tries to open that file, it does not in fact exist.  Since NFS
> client-side caching (especially directory listing cache) is not
> generally guaranteed to be "correct", it could explain this.  But let's
> see the full stack trace to make sure this is it...
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28984-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 03 10:43:38 2007
Return-Path: <java-user-return-28984-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47048 invoked from network); 3 Jul 2007 10:43:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jul 2007 10:43:38 -0000
Received: (qmail 57773 invoked by uid 500); 3 Jul 2007 10:43:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57488 invoked by uid 500); 3 Jul 2007 10:43:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57473 invoked by uid 99); 3 Jul 2007 10:43:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 03:43:32 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [204.152.235.220] (HELO l98upmt3.hewitt.com) (204.152.235.220)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 03:43:28 -0700
Received: from linkap11.hewitt.com (linkap11.hewitt.com [10.20.63.2])
	by l98upmt3.hewitt.com (8.13.4/8.13.4) with ESMTP id l63AgWDD000048
	for <java-user@lucene.apache.org>; Tue, 3 Jul 2007 05:43:07 -0500 (CDT)
Received: from 10.20.63.62 by linkap11.hewitt.com with ESMTP (Tumbleweed
 MMS SMTP Relay); Tue, 03 Jul 2007 05:44:12 -0500
X-Server-Uuid: 8E43C66C-9DC0-4EF6-8749-D8C04BB61E49
In-Reply-To: <4f9b23800707030317i343559e2ufda83bfd724c9326@mail.gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene 2.2, NFS, Lock obtain timed out
MIME-Version: 1.0
X-Mailer: Lotus Notes 652HF1094 September 19, 2005
Message-ID: <OF71D72A15.1866A8CF-ON6525730D.00398806-6525730D.003ADC81@hewitt.com>
From: "Neeraj Gupta" <neeraj.gupta.2@hewitt.com>
Date: Tue, 3 Jul 2007 16:14:06 +0530
X-HANotesOU: Gurgaon
X-MIMETrack: Serialize by Router on LINTNG1/National/Hewitt
 Associates(Release 6.5.6|March 06, 2007) at 07/03/2007 05:44:13 AM,
 Serialize complete at 07/03/2007 05:44:13 AM
X-WSS-ID: 6A94F7F62R88830628-01-01
Content-Type: multipart/alternative;
 boundary="=_alternative 003ADC7C6525730D_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 003ADC7C6525730D_=
Content-Type: text/plain;
 charset=us-ascii
Content-Transfer-Encoding: 7bit

Hi

this is the case where index create by one server is updated by other 
server, results into index corruption. This exception occuring while 
creating instance of Index writer because at the time of index writer 
instance creation it checks if index exists or not, if you are not 
creating a new Index. And it keeps the information with it, but when you 
go to add some document, now the indexes has been modified by other 
server. Now the previous and current state doesnt match and results into 
exception. 

What kind of locking you are using? i think you should obey some kind of 
locking algo so that till the time one server is updating the indexes, 
other server should not interfere. Once a server finishes its updation 
into the indexes, it should close all writers and reader to release all 
the locking.

The alternate solution to this problem is you can create seperate indexes 
for each server, this will help because only one thread will be updating 
the indexes so there wont be any problem. 

Cheers,
Neeraj




"Patrick Kimber" <mailing.patrick.kimber@gmail.com> 

07/03/2007 03:47 PM
Please respond to
java-user@lucene.apache.org



To
java-user@lucene.apache.org
cc

Subject
Re: Lucene 2.2, NFS, Lock obtain timed out






Hi

I have added more logging to my test application.  I have two servers
writing to a shared Lucene index on an NFS partition...

Here is the logging from one server...

[10:49:18] [DEBUG] LuceneIndexAccessor closing cached writer
[10:49:18] [DEBUG] ExpirationTimeDeletionPolicy onCommit() delete 
[segments_n]

and the other server (at the same time):

[10:49:18] [DEBUG] LuceneIndexAccessor opening new writer and caching it
[10:49:18] [DEBUG] IndexAccessProvider getWriter()
[10:49:18] [ERROR] DocumentCollection update(DocumentData)
com.company.lucene.LuceneIcmException: I/O Error: Cannot add the
document to the index.
[/mnt/nfstest/repository/lucene/lucene-icm-test-1-0/segments_n (No
such file or directory)]
    at 
com.company.lucene.RepositoryWriter.addDocument(RepositoryWriter.java:182)

I think the exception is being thrown when the IndexWriter is created:
new IndexWriter(directory, false, analyzer, false, deletionPolicy);

I am confused... segments_n should not have been touched for 3 minutes
so why would a new IndexWriter want to read it?

Here is the whole of the stack trace:

com.company.lucene.LuceneIcmException: I/O Error: Cannot add the
document to the index.
[/mnt/nfstest/repository/lucene/lucene-icm-test-1-0/segments_n (No
such file or directory)]
                 at 
com.company.lucene.RepositoryWriter.addDocument(RepositoryWriter.java:182)
                 at 
com.company.lucene.IndexUpdate.addDocument(IndexUpdate.java:364)
                 at 
com.company.lucene.IndexUpdate.addDocument(IndexUpdate.java:342)
                 at 
com.company.lucene.IndexUpdate.update(IndexUpdate.java:67)
                 at 
com.company.lucene.icm.DocumentCollection.update(DocumentCollection.java:390)
                 at lucene.icm.test.Write.add(Write.java:105)
                 at lucene.icm.test.Write.run(Write.java:79)
                 at lucene.icm.test.Write.main(Write.java:43)
                 at sun.reflect.NativeMethodAccessorImpl.invoke0(Native 
Method)
                 at 
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
                 at 
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
                 at java.lang.reflect.Method.invoke(Method.java:324)
                 at 
org.codehaus.mojo.exec.ExecJavaMojo$1.run(ExecJavaMojo.java:271)
                 at java.lang.Thread.run(Thread.java:534)
Caused by: java.io.FileNotFoundException:
/mnt/nfstest/repository/lucene/lucene-icm-test-1-0/segments_n (No such
file or directory)
                 at java.io.RandomAccessFile.open(Native Method)
                 at 
java.io.RandomAccessFile.<init>(RandomAccessFile.java:204)
                 at 
org.apache.lucene.store.FSDirectory$FSIndexInput$Descriptor.<init>(FSDirectory.java:506)
                 at 
org.apache.lucene.store.FSDirectory$FSIndexInput.<init>(FSDirectory.java:536)
                 at 
org.apache.lucene.store.FSDirectory$FSIndexInput.<init>(FSDirectory.java:531)
                 at 
org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java:440)
                 at 
org.apache.lucene.index.SegmentInfos.read(SegmentInfos.java:193)
                 at 
org.apache.lucene.index.IndexFileDeleter.<init>(IndexFileDeleter.java:156)
                 at 
org.apache.lucene.index.IndexWriter.init(IndexWriter.java:626)
                 at 
org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:573)
                 at 
com.subshell.lucene.indexaccess.impl.IndexAccessProvider.getWriter(IndexAccessProvider.java:68)
                 at 
com.subshell.lucene.indexaccess.impl.LuceneIndexAccessor.getWriter(LuceneIndexAccessor.java:171)
                 at 
com.company.lucene.RepositoryWriter.addDocument(RepositoryWriter.java:176)
                 ... 13 more

Thank you very much for your previous comments and emails.

Any help solving this issue would be appreciated.

Patrick


On 30/06/07, Michael McCandless <lucene@mikemccandless.com> wrote:
>
> Patrick Kimber wrote:
>
> > I have been checking the application log.  Just before the time when
> > the lock file errors occur I found this log entry:
> > [11:28:59] [ERROR] IndexAccessProvider
> > java.io.FileNotFoundException:
> > /mnt/nfstest/repository/lucene/lucene-icm-test-1-0/segments_h75 (No
> > such file or directory)
> >     at java.io.RandomAccessFile.open(Native Method)
>
> I think this exception is the root cause.  On hitting this IOException
> in reader.close(), that means this reader has not released its write
> lock.  Is it possible to see the full stack trace?
>
> Having the wrong deletion policy or even a buggy deletion policy (if
> indeed file.lastModified() varies by too much across machines) can't
> cause this (I think).  At worse, the wrong deletion policy should
> cause other already-open readers to hit "Stale NFS handle"
> IOExceptions during searching.  So, you should use your
> ExpirationTimeDeletionPolicy when opening your readers if they will be
> doing deletes, but I don't think it explains this root-cause exception
> during close().
>
> It's a rather spooky exception ... in close(), the reader initializes
> an IndexFileDeleter which lists the directory and opens any segments_N
> files that it finds.
>
> Do you have a writer on one machine closing, and then very soon
> thereafter this reader on a different machine does deletes and tries
> to close?
>
> My best guess is the exception is happening inside that initialization
> because the directory listing said that "segments_XXX" exists but then
> when it tries to open that file, it does not in fact exist.  Since NFS
> client-side caching (especially directory listing cache) is not
> generally guaranteed to be "correct", it could explain this.  But let's
> see the full stack trace to make sure this is it...
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




 
The information contained in this e-mail and any accompanying documents may contain information that is confidential or otherwise protected from disclosure. If you are not the intended recipient of this message, or if this message has been addressed to you in error, please immediately alert the sender by reply e-mail and then delete this message, including any attachments. Any dissemination, distribution or other use of the contents of this message by anyone other than the intended recipient 
is strictly prohibited.



--=_alternative 003ADC7C6525730D_=--


From java-user-return-28985-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 03 10:47:26 2007
Return-Path: <java-user-return-28985-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48192 invoked from network); 3 Jul 2007 10:47:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jul 2007 10:47:24 -0000
Received: (qmail 67816 invoked by uid 500); 3 Jul 2007 10:47:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67788 invoked by uid 500); 3 Jul 2007 10:47:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67777 invoked by uid 99); 3 Jul 2007 10:47:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 03:47:18 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mailing.patrick.kimber@gmail.com designates 64.233.162.237 as permitted sender)
Received: from [64.233.162.237] (HELO nz-out-0506.google.com) (64.233.162.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 03:47:14 -0700
Received: by nz-out-0506.google.com with SMTP id i28so756682nzi
        for <java-user@lucene.apache.org>; Tue, 03 Jul 2007 03:46:53 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=IU/YmAnFrW5D0HrLSHFqAwjXTMyVq+Fn0LYnw8Lcj4ypRXLQJzGqlHKREyzrMlCDbl6Bj5GMrrl5CS+vO5QVZsTYqWBsIuKdiG171hWTV7n6dNMO4Vgz4F1nib2HWn1rVatE+cn1irxc1m7F+RwJaBi+7RWM3aLnYaCoHmpK6pQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=isgju/5zCQ0S6okZGxrOERS+nJuqKiY9Go7W/1S/TnFeqOOeDidmiQh3IIz6c6vyijb5KYqRwKpQvU82DdE3fDrSDCDjaCP2+tlLzsK9GMzaHAADYJSnKsKnA+DHZLdwC8rMUBrmHhIWhSD7yj18qUfJxEDmA6RGZrn7YigaWTE=
Received: by 10.115.95.1 with SMTP id x1mr6025674wal.1183459613287;
        Tue, 03 Jul 2007 03:46:53 -0700 (PDT)
Received: by 10.115.55.4 with HTTP; Tue, 3 Jul 2007 03:46:53 -0700 (PDT)
Message-ID: <4f9b23800707030346h748a6feet7f9f47235e20cc52@mail.gmail.com>
Date: Tue, 3 Jul 2007 11:46:53 +0100
From: "Patrick Kimber" <mailing.patrick.kimber@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene 2.2, NFS, Lock obtain timed out
In-Reply-To: <OF71D72A15.1866A8CF-ON6525730D.00398806-6525730D.003ADC81@hewitt.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <4f9b23800707030317i343559e2ufda83bfd724c9326@mail.gmail.com>
	 <OF71D72A15.1866A8CF-ON6525730D.00398806-6525730D.003ADC81@hewitt.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi

I am using the NativeFSLockFactory.  I was hoping this would have
stopped these errors.

Patrick

On 03/07/07, Neeraj Gupta <neeraj.gupta.2@hewitt.com> wrote:
> Hi
>
> this is the case where index create by one server is updated by other
> server, results into index corruption. This exception occuring while
> creating instance of Index writer because at the time of index writer
> instance creation it checks if index exists or not, if you are not
> creating a new Index. And it keeps the information with it, but when you
> go to add some document, now the indexes has been modified by other
> server. Now the previous and current state doesnt match and results into
> exception.
>
> What kind of locking you are using? i think you should obey some kind of
> locking algo so that till the time one server is updating the indexes,
> other server should not interfere. Once a server finishes its updation
> into the indexes, it should close all writers and reader to release all
> the locking.
>
> The alternate solution to this problem is you can create seperate indexes
> for each server, this will help because only one thread will be updating
> the indexes so there wont be any problem.
>
> Cheers,
> Neeraj
>
>
>
>
> "Patrick Kimber" <mailing.patrick.kimber@gmail.com>
>
> 07/03/2007 03:47 PM
> Please respond to
> java-user@lucene.apache.org
>
>
>
> To
> java-user@lucene.apache.org
> cc
>
> Subject
> Re: Lucene 2.2, NFS, Lock obtain timed out
>
>
>
>
>
>
> Hi
>
> I have added more logging to my test application.  I have two servers
> writing to a shared Lucene index on an NFS partition...
>
> Here is the logging from one server...
>
> [10:49:18] [DEBUG] LuceneIndexAccessor closing cached writer
> [10:49:18] [DEBUG] ExpirationTimeDeletionPolicy onCommit() delete
> [segments_n]
>
> and the other server (at the same time):
>
> [10:49:18] [DEBUG] LuceneIndexAccessor opening new writer and caching it
> [10:49:18] [DEBUG] IndexAccessProvider getWriter()
> [10:49:18] [ERROR] DocumentCollection update(DocumentData)
> com.company.lucene.LuceneIcmException: I/O Error: Cannot add the
> document to the index.
> [/mnt/nfstest/repository/lucene/lucene-icm-test-1-0/segments_n (No
> such file or directory)]
>     at
> com.company.lucene.RepositoryWriter.addDocument(RepositoryWriter.java:182)
>
> I think the exception is being thrown when the IndexWriter is created:
> new IndexWriter(directory, false, analyzer, false, deletionPolicy);
>
> I am confused... segments_n should not have been touched for 3 minutes
> so why would a new IndexWriter want to read it?
>
> Here is the whole of the stack trace:
>
> com.company.lucene.LuceneIcmException: I/O Error: Cannot add the
> document to the index.
> [/mnt/nfstest/repository/lucene/lucene-icm-test-1-0/segments_n (No
> such file or directory)]
>                  at
> com.company.lucene.RepositoryWriter.addDocument(RepositoryWriter.java:182)
>                  at
> com.company.lucene.IndexUpdate.addDocument(IndexUpdate.java:364)
>                  at
> com.company.lucene.IndexUpdate.addDocument(IndexUpdate.java:342)
>                  at
> com.company.lucene.IndexUpdate.update(IndexUpdate.java:67)
>                  at
> com.company.lucene.icm.DocumentCollection.update(DocumentCollection.java:390)
>                  at lucene.icm.test.Write.add(Write.java:105)
>                  at lucene.icm.test.Write.run(Write.java:79)
>                  at lucene.icm.test.Write.main(Write.java:43)
>                  at sun.reflect.NativeMethodAccessorImpl.invoke0(Native
> Method)
>                  at
> sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
>                  at
> sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
>                  at java.lang.reflect.Method.invoke(Method.java:324)
>                  at
> org.codehaus.mojo.exec.ExecJavaMojo$1.run(ExecJavaMojo.java:271)
>                  at java.lang.Thread.run(Thread.java:534)
> Caused by: java.io.FileNotFoundException:
> /mnt/nfstest/repository/lucene/lucene-icm-test-1-0/segments_n (No such
> file or directory)
>                  at java.io.RandomAccessFile.open(Native Method)
>                  at
> java.io.RandomAccessFile.<init>(RandomAccessFile.java:204)
>                  at
> org.apache.lucene.store.FSDirectory$FSIndexInput$Descriptor.<init>(FSDirectory.java:506)
>                  at
> org.apache.lucene.store.FSDirectory$FSIndexInput.<init>(FSDirectory.java:536)
>                  at
> org.apache.lucene.store.FSDirectory$FSIndexInput.<init>(FSDirectory.java:531)
>                  at
> org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java:440)
>                  at
> org.apache.lucene.index.SegmentInfos.read(SegmentInfos.java:193)
>                  at
> org.apache.lucene.index.IndexFileDeleter.<init>(IndexFileDeleter.java:156)
>                  at
> org.apache.lucene.index.IndexWriter.init(IndexWriter.java:626)
>                  at
> org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:573)
>                  at
> com.subshell.lucene.indexaccess.impl.IndexAccessProvider.getWriter(IndexAccessProvider.java:68)
>                  at
> com.subshell.lucene.indexaccess.impl.LuceneIndexAccessor.getWriter(LuceneIndexAccessor.java:171)
>                  at
> com.company.lucene.RepositoryWriter.addDocument(RepositoryWriter.java:176)
>                  ... 13 more
>
> Thank you very much for your previous comments and emails.
>
> Any help solving this issue would be appreciated.
>
> Patrick
>
>
> On 30/06/07, Michael McCandless <lucene@mikemccandless.com> wrote:
> >
> > Patrick Kimber wrote:
> >
> > > I have been checking the application log.  Just before the time when
> > > the lock file errors occur I found this log entry:
> > > [11:28:59] [ERROR] IndexAccessProvider
> > > java.io.FileNotFoundException:
> > > /mnt/nfstest/repository/lucene/lucene-icm-test-1-0/segments_h75 (No
> > > such file or directory)
> > >     at java.io.RandomAccessFile.open(Native Method)
> >
> > I think this exception is the root cause.  On hitting this IOException
> > in reader.close(), that means this reader has not released its write
> > lock.  Is it possible to see the full stack trace?
> >
> > Having the wrong deletion policy or even a buggy deletion policy (if
> > indeed file.lastModified() varies by too much across machines) can't
> > cause this (I think).  At worse, the wrong deletion policy should
> > cause other already-open readers to hit "Stale NFS handle"
> > IOExceptions during searching.  So, you should use your
> > ExpirationTimeDeletionPolicy when opening your readers if they will be
> > doing deletes, but I don't think it explains this root-cause exception
> > during close().
> >
> > It's a rather spooky exception ... in close(), the reader initializes
> > an IndexFileDeleter which lists the directory and opens any segments_N
> > files that it finds.
> >
> > Do you have a writer on one machine closing, and then very soon
> > thereafter this reader on a different machine does deletes and tries
> > to close?
> >
> > My best guess is the exception is happening inside that initialization
> > because the directory listing said that "segments_XXX" exists but then
> > when it tries to open that file, it does not in fact exist.  Since NFS
> > client-side caching (especially directory listing cache) is not
> > generally guaranteed to be "correct", it could explain this.  But let's
> > see the full stack trace to make sure this is it...
> >
> > Mike
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> The information contained in this e-mail and any accompanying documents may contain information that is confidential or otherwise protected from disclosure. If you are not the intended recipient of this message, or if this message has been addressed to you in error, please immediately alert the sender by reply e-mail and then delete this message, including any attachments. Any dissemination, distribution or other use of the contents of this message by anyone other than the intended recipient
> is strictly prohibited.
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28986-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 03 11:16:51 2007
Return-Path: <java-user-return-28986-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56584 invoked from network); 3 Jul 2007 11:16:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jul 2007 11:16:50 -0000
Received: (qmail 38973 invoked by uid 500); 3 Jul 2007 11:16:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38807 invoked by uid 500); 3 Jul 2007 11:16:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38796 invoked by uid 99); 3 Jul 2007 11:16:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 04:16:43 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [204.152.235.220] (HELO l98upmt3.hewitt.com) (204.152.235.220)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 04:16:39 -0700
Received: from linkap11.hewitt.com (linkap11.hewitt.com [10.20.63.2])
	by l98upmt3.hewitt.com (8.13.4/8.13.4) with ESMTP id l63BG8Hm000646
	for <java-user@lucene.apache.org>; Tue, 3 Jul 2007 06:16:18 -0500 (CDT)
Received: from 10.20.63.62 by linkap11.hewitt.com with ESMTP (Tumbleweed
 MMS SMTP Relay); Tue, 03 Jul 2007 06:17:20 -0500
X-Server-Uuid: 8E43C66C-9DC0-4EF6-8749-D8C04BB61E49
In-Reply-To: <4f9b23800707030346h748a6feet7f9f47235e20cc52@mail.gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene 2.2, NFS, Lock obtain timed out
MIME-Version: 1.0
X-Mailer: Lotus Notes 652HF1094 September 19, 2005
Message-ID: <OF19D3F11C.A08B201A-ON6525730D.003B9E55-6525730D.003DD835@hewitt.com>
From: "Neeraj Gupta" <neeraj.gupta.2@hewitt.com>
Date: Tue, 3 Jul 2007 16:46:41 +0530
X-HANotesOU: Gurgaon
X-MIMETrack: Serialize by Router on LINTNG1/National/Hewitt
 Associates(Release 6.5.6|March 06, 2007) at 07/03/2007 06:17:20 AM,
 Serialize complete at 07/03/2007 06:17:20 AM
X-WSS-ID: 6A94EFCA2R88841523-01-01
Content-Type: multipart/alternative;
 boundary="=_alternative 003DD8336525730D_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 003DD8336525730D_=
Content-Type: text/plain;
 charset=us-ascii
Content-Transfer-Encoding: 7bit

I think you should get  " NFS, Lock obtain timed out" Exception (that you 
mentioned in subject line) , instead  of "java.io.FileNotFoundException:". 
Because if one server is holding lock on the directory then other server 
will wait till default LockTime Out and will throw Time out Exception 
after that. Try setting locktimeout to writer instance, it might help.

If you are getting file not found exception, then might be the case that 
you are unlocking the index directory manually (from code or deleting lock 
file manually), in this case if 2nd sever  will not be able to read the 
indexes, first server has created.

Cheers,
Neeraj



"Patrick Kimber" <mailing.patrick.kimber@gmail.com> 

07/03/2007 04:16 PM
Please respond to
java-user@lucene.apache.org



To
java-user@lucene.apache.org
cc

Subject
Re: Lucene 2.2, NFS, Lock obtain timed out






Hi

I am using the NativeFSLockFactory.  I was hoping this would have
stopped these errors.

Patrick

On 03/07/07, Neeraj Gupta <neeraj.gupta.2@hewitt.com> wrote:
> Hi
>
> this is the case where index create by one server is updated by other
> server, results into index corruption. This exception occuring while
> creating instance of Index writer because at the time of index writer
> instance creation it checks if index exists or not, if you are not
> creating a new Index. And it keeps the information with it, but when you
> go to add some document, now the indexes has been modified by other
> server. Now the previous and current state doesnt match and results into
> exception.
>
> What kind of locking you are using? i think you should obey some kind of
> locking algo so that till the time one server is updating the indexes,
> other server should not interfere. Once a server finishes its updation
> into the indexes, it should close all writers and reader to release all
> the locking.
>
> The alternate solution to this problem is you can create seperate 
indexes
> for each server, this will help because only one thread will be updating
> the indexes so there wont be any problem.
>
> Cheers,
> Neeraj
>
>
>
>
> "Patrick Kimber" <mailing.patrick.kimber@gmail.com>
>
> 07/03/2007 03:47 PM
> Please respond to
> java-user@lucene.apache.org
>
>
>
> To
> java-user@lucene.apache.org
> cc
>
> Subject
> Re: Lucene 2.2, NFS, Lock obtain timed out
>
>
>
>
>
>
> Hi
>
> I have added more logging to my test application.  I have two servers
> writing to a shared Lucene index on an NFS partition...
>
> Here is the logging from one server...
>
> [10:49:18] [DEBUG] LuceneIndexAccessor closing cached writer
> [10:49:18] [DEBUG] ExpirationTimeDeletionPolicy onCommit() delete
> [segments_n]
>
> and the other server (at the same time):
>
> [10:49:18] [DEBUG] LuceneIndexAccessor opening new writer and caching it
> [10:49:18] [DEBUG] IndexAccessProvider getWriter()
> [10:49:18] [ERROR] DocumentCollection update(DocumentData)
> com.company.lucene.LuceneIcmException: I/O Error: Cannot add the
> document to the index.
> [/mnt/nfstest/repository/lucene/lucene-icm-test-1-0/segments_n (No
> such file or directory)]
>     at
> 
com.company.lucene.RepositoryWriter.addDocument(RepositoryWriter.java:182)
>
> I think the exception is being thrown when the IndexWriter is created:
> new IndexWriter(directory, false, analyzer, false, deletionPolicy);
>
> I am confused... segments_n should not have been touched for 3 minutes
> so why would a new IndexWriter want to read it?
>
> Here is the whole of the stack trace:
>
> com.company.lucene.LuceneIcmException: I/O Error: Cannot add the
> document to the index.
> [/mnt/nfstest/repository/lucene/lucene-icm-test-1-0/segments_n (No
> such file or directory)]
>                  at
> 
com.company.lucene.RepositoryWriter.addDocument(RepositoryWriter.java:182)
>                  at
> com.company.lucene.IndexUpdate.addDocument(IndexUpdate.java:364)
>                  at
> com.company.lucene.IndexUpdate.addDocument(IndexUpdate.java:342)
>                  at
> com.company.lucene.IndexUpdate.update(IndexUpdate.java:67)
>                  at
> 
com.company.lucene.icm.DocumentCollection.update(DocumentCollection.java:390)
>                  at lucene.icm.test.Write.add(Write.java:105)
>                  at lucene.icm.test.Write.run(Write.java:79)
>                  at lucene.icm.test.Write.main(Write.java:43)
>                  at sun.reflect.NativeMethodAccessorImpl.invoke0(Native
> Method)
>                  at
> 
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
>                  at
> 
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
>                  at java.lang.reflect.Method.invoke(Method.java:324)
>                  at
> org.codehaus.mojo.exec.ExecJavaMojo$1.run(ExecJavaMojo.java:271)
>                  at java.lang.Thread.run(Thread.java:534)
> Caused by: java.io.FileNotFoundException:
> /mnt/nfstest/repository/lucene/lucene-icm-test-1-0/segments_n (No such
> file or directory)
>                  at java.io.RandomAccessFile.open(Native Method)
>                  at
> java.io.RandomAccessFile.<init>(RandomAccessFile.java:204)
>                  at
> 
org.apache.lucene.store.FSDirectory$FSIndexInput$Descriptor.<init>(FSDirectory.java:506)
>                  at
> 
org.apache.lucene.store.FSDirectory$FSIndexInput.<init>(FSDirectory.java:536)
>                  at
> 
org.apache.lucene.store.FSDirectory$FSIndexInput.<init>(FSDirectory.java:531)
>                  at
> org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java:440)
>                  at
> org.apache.lucene.index.SegmentInfos.read(SegmentInfos.java:193)
>                  at
> 
org.apache.lucene.index.IndexFileDeleter.<init>(IndexFileDeleter.java:156)
>                  at
> org.apache.lucene.index.IndexWriter.init(IndexWriter.java:626)
>                  at
> org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:573)
>                  at
> 
com.subshell.lucene.indexaccess.impl.IndexAccessProvider.getWriter(IndexAccessProvider.java:68)
>                  at
> 
com.subshell.lucene.indexaccess.impl.LuceneIndexAccessor.getWriter(LuceneIndexAccessor.java:171)
>                  at
> 
com.company.lucene.RepositoryWriter.addDocument(RepositoryWriter.java:176)
>                  ... 13 more
>
> Thank you very much for your previous comments and emails.
>
> Any help solving this issue would be appreciated.
>
> Patrick
>
>
> On 30/06/07, Michael McCandless <lucene@mikemccandless.com> wrote:
> >
> > Patrick Kimber wrote:
> >
> > > I have been checking the application log.  Just before the time when
> > > the lock file errors occur I found this log entry:
> > > [11:28:59] [ERROR] IndexAccessProvider
> > > java.io.FileNotFoundException:
> > > /mnt/nfstest/repository/lucene/lucene-icm-test-1-0/segments_h75 (No
> > > such file or directory)
> > >     at java.io.RandomAccessFile.open(Native Method)
> >
> > I think this exception is the root cause.  On hitting this IOException
> > in reader.close(), that means this reader has not released its write
> > lock.  Is it possible to see the full stack trace?
> >
> > Having the wrong deletion policy or even a buggy deletion policy (if
> > indeed file.lastModified() varies by too much across machines) can't
> > cause this (I think).  At worse, the wrong deletion policy should
> > cause other already-open readers to hit "Stale NFS handle"
> > IOExceptions during searching.  So, you should use your
> > ExpirationTimeDeletionPolicy when opening your readers if they will be
> > doing deletes, but I don't think it explains this root-cause exception
> > during close().
> >
> > It's a rather spooky exception ... in close(), the reader initializes
> > an IndexFileDeleter which lists the directory and opens any segments_N
> > files that it finds.
> >
> > Do you have a writer on one machine closing, and then very soon
> > thereafter this reader on a different machine does deletes and tries
> > to close?
> >
> > My best guess is the exception is happening inside that initialization
> > because the directory listing said that "segments_XXX" exists but then
> > when it tries to open that file, it does not in fact exist.  Since NFS
> > client-side caching (especially directory listing cache) is not
> > generally guaranteed to be "correct", it could explain this.  But 
let's
> > see the full stack trace to make sure this is it...
> >
> > Mike
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> The information contained in this e-mail and any accompanying documents 
may contain information that is confidential or otherwise protected from 
disclosure. If you are not the intended recipient of this message, or if 
this message has been addressed to you in error, please immediately alert 
the sender by reply e-mail and then delete this message, including any 
attachments. Any dissemination, distribution or other use of the contents 
of this message by anyone other than the intended recipient
> is strictly prohibited.
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




 
The information contained in this e-mail and any accompanying documents may contain information that is confidential or otherwise protected from disclosure. If you are not the intended recipient of this message, or if this message has been addressed to you in error, please immediately alert the sender by reply e-mail and then delete this message, including any attachments. Any dissemination, distribution or other use of the contents of this message by anyone other than the intended recipient 
is strictly prohibited.



--=_alternative 003DD8336525730D_=--


From java-user-return-28987-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 03 11:21:45 2007
Return-Path: <java-user-return-28987-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57181 invoked from network); 3 Jul 2007 11:21:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jul 2007 11:21:44 -0000
Received: (qmail 43483 invoked by uid 500); 3 Jul 2007 11:21:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43129 invoked by uid 500); 3 Jul 2007 11:21:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43118 invoked by uid 99); 3 Jul 2007 11:21:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 04:21:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 04:21:35 -0700
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id EC233630D
	for <java-user@lucene.apache.org>; Tue,  3 Jul 2007 07:21:14 -0400 (EDT)
Received: from web8.messagingengine.com ([10.202.2.217])
  by compute1.internal (MEProxy); Tue, 03 Jul 2007 07:21:14 -0400
Received: by web8.messagingengine.com (Postfix, from userid 99)
	id AC1491EB44; Tue,  3 Jul 2007 07:21:14 -0400 (EDT)
Message-Id: <1183461674.2220.1198268681@webmail.messagingengine.com>
X-Sasl-Enc: b3ipcYtpSBUvkjriSR982eoUWGb+6/1YowAQ8IQj0Zto 1183461674
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <OF19D3F11C.A08B201A-ON6525730D.003B9E55-6525730D.003DD835@hewitt.com>
Subject: Re: Lucene 2.2, NFS, Lock obtain timed out
In-Reply-To: <OF19D3F11C.A08B201A-ON6525730D.003B9E55-6525730D.003DD835@hewitt.com>
Date: Tue, 03 Jul 2007 07:21:14 -0400
X-Virus-Checked: Checked by ClamAV on apache.org


"Patrick Kimber" <mailing.patrick.kimber@gmail.com> wrote:

> I am using the NativeFSLockFactory.  I was hoping this would have
> stopped these errors.

I believe this is not a locking issue and NativeFSLockFactory should
be working correctly over NFS.

> Here is the whole of the stack trace:
>
> Caused by: java.io.FileNotFoundException:
> /mnt/nfstest/repository/lucene/lucene-icm-test-1-0/segments_n (No such
> file or directory)
> 	at java.io.RandomAccessFile.open(Native Method)
> 	at java.io.RandomAccessFile.<init>(RandomAccessFile.java:204)
> 	at org.apache.lucene.store.FSDirectory$FSIndexInput$Descriptor.<init>(FSDirectory.java:506)
> 	at org.apache.lucene.store.FSDirectory$FSIndexInput.<init>(FSDirectory.java:536)
> 	at org.apache.lucene.store.FSDirectory$FSIndexInput.<init>(FSDirectory.java:531)
> 	at org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java:440)
> 	at org.apache.lucene.index.SegmentInfos.read(SegmentInfos.java:193)
> 	at org.apache.lucene.index.IndexFileDeleter.<init>(IndexFileDeleter.java:156)
> 	at org.apache.lucene.index.IndexWriter.init(IndexWriter.java:626)
> 	at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:573)
> 	at com.subshell.lucene.indexaccess.impl.IndexAccessProvider.getWriter(IndexAccessProvider.java:68)
> 	at com.subshell.lucene.indexaccess.impl.LuceneIndexAccessor.getWriter(LuceneIndexAccessor.java:171)
> 	at com.company.lucene.RepositoryWriter.addDocument(RepositoryWriter.java:176)
> 	... 13 more

OK, indeed the exception is inside IndexFileDeleter's initialization
(this is what I had guessed might be happening).

> I have added more logging to my test application.  I have two servers
> writing to a shared Lucene index on an NFS partition...
> 
> Here is the logging from one server...
> 
> [10:49:18] [DEBUG] LuceneIndexAccessor closing cached writer
> [10:49:18] [DEBUG] ExpirationTimeDeletionPolicy onCommit() delete
> [segments_n]
> 
> and the other server (at the same time):
> 
> [10:49:18] [DEBUG] LuceneIndexAccessor opening new writer and caching it
> [10:49:18] [DEBUG] IndexAccessProvider getWriter()
> [10:49:18] [ERROR] DocumentCollection update(DocumentData)
> com.company.lucene.LuceneIcmException: I/O Error: Cannot add the
> document to the index.
> [/mnt/nfstest/repository/lucene/lucene-icm-test-1-0/segments_n (No
> such file or directory)]
>     at
>     com.company.lucene.RepositoryWriter.addDocument(RepositoryWriter.java:182)
> 
> I think the exception is being thrown when the IndexWriter is created:
> new IndexWriter(directory, false, analyzer, false, deletionPolicy);
> 
> I am confused... segments_n should not have been touched for 3 minutes
> so why would a new IndexWriter want to read it?

Whenever a writer is opeened, it initializes the deleter
(IndexFileDeleter).  During that initialization, we list all files in
the index directory, and for every segments_N file we find, we open it
and "incref" all index files that it's using.  We then call the
deletion policy's "onInit" to give it a chance to remove any of these
commit points.

What's happening here is the NFS directory listing is "stale" and is
reporting that segments_n exists when in fact it doesn't.  This is
almost certainly due to the NFS client's caching (directory listing
caches are in general not coherent for NFS clients, ie, they can "lie"
for a short period of time, especially in cases like this).

I think this fix is fairly simple: we should catch the
FileNotFoundException and handle that as if the file did not exist.  I
will open a Jira issue & get a patch.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28988-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 03 11:33:18 2007
Return-Path: <java-user-return-28988-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60377 invoked from network); 3 Jul 2007 11:33:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jul 2007 11:33:17 -0000
Received: (qmail 77715 invoked by uid 500); 3 Jul 2007 11:33:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77674 invoked by uid 500); 3 Jul 2007 11:33:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77663 invoked by uid 99); 3 Jul 2007 11:33:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 04:33:11 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mailing.patrick.kimber@gmail.com designates 209.85.146.181 as permitted sender)
Received: from [209.85.146.181] (HELO wa-out-1112.google.com) (209.85.146.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 04:33:07 -0700
Received: by wa-out-1112.google.com with SMTP id j40so2868713wah
        for <java-user@lucene.apache.org>; Tue, 03 Jul 2007 04:32:47 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=kNqjGVhdB6+WvhPp/yigGETkgHd3AX3OyG+uztWzx1Aw/ZAvtnPIl7dU+W/66ahdQvaRPDvG6nZj8NeadHvpPByx31Wqcpt5GicsiHQYKz4v7M8qaJty0epeJZxQAX+PLhFRcG08+QnjLAAJxo7QuF2JezG4KvMhl3EywwUA4xE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=lHzW6kRXUnbtxJHt6Zd5MoQrBjZ3uGyz7mQuOPhyf+qJfq0oZfeE7CSGNk/kPQDVJBJMAhbSaNj7Fv7Gfna6TDTtF+mCjYabF7Mtbw/ra/gYiKOf2+PEE9oymIEg6WtecLSuqLPYhVL3lE92PgPXZsEtfVkEvgYBMLoYOy7ztZo=
Received: by 10.115.111.1 with SMTP id o1mr6065063wam.1183462363986;
        Tue, 03 Jul 2007 04:32:43 -0700 (PDT)
Received: by 10.115.55.4 with HTTP; Tue, 3 Jul 2007 04:32:43 -0700 (PDT)
Message-ID: <4f9b23800707030432i1067a67auc8fc0f83abeeea0@mail.gmail.com>
Date: Tue, 3 Jul 2007 12:32:43 +0100
From: "Patrick Kimber" <mailing.patrick.kimber@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene 2.2, NFS, Lock obtain timed out
In-Reply-To: <1183461674.2220.1198268681@webmail.messagingengine.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <OF19D3F11C.A08B201A-ON6525730D.003B9E55-6525730D.003DD835@hewitt.com>
	 <1183461674.2220.1198268681@webmail.messagingengine.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Michael

I am really pleased we have a potential fix.  I will look out for the patch.

Thanks for your help.

Patrick

On 03/07/07, Michael McCandless <lucene@mikemccandless.com> wrote:
>
> "Patrick Kimber" <mailing.patrick.kimber@gmail.com> wrote:
>
> > I am using the NativeFSLockFactory.  I was hoping this would have
> > stopped these errors.
>
> I believe this is not a locking issue and NativeFSLockFactory should
> be working correctly over NFS.
>
> > Here is the whole of the stack trace:
> >
> > Caused by: java.io.FileNotFoundException:
> > /mnt/nfstest/repository/lucene/lucene-icm-test-1-0/segments_n (No such
> > file or directory)
> >       at java.io.RandomAccessFile.open(Native Method)
> >       at java.io.RandomAccessFile.<init>(RandomAccessFile.java:204)
> >       at org.apache.lucene.store.FSDirectory$FSIndexInput$Descriptor.<init>(FSDirectory.java:506)
> >       at org.apache.lucene.store.FSDirectory$FSIndexInput.<init>(FSDirectory.java:536)
> >       at org.apache.lucene.store.FSDirectory$FSIndexInput.<init>(FSDirectory.java:531)
> >       at org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java:440)
> >       at org.apache.lucene.index.SegmentInfos.read(SegmentInfos.java:193)
> >       at org.apache.lucene.index.IndexFileDeleter.<init>(IndexFileDeleter.java:156)
> >       at org.apache.lucene.index.IndexWriter.init(IndexWriter.java:626)
> >       at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:573)
> >       at com.subshell.lucene.indexaccess.impl.IndexAccessProvider.getWriter(IndexAccessProvider.java:68)
> >       at com.subshell.lucene.indexaccess.impl.LuceneIndexAccessor.getWriter(LuceneIndexAccessor.java:171)
> >       at com.company.lucene.RepositoryWriter.addDocument(RepositoryWriter.java:176)
> >       ... 13 more
>
> OK, indeed the exception is inside IndexFileDeleter's initialization
> (this is what I had guessed might be happening).
>
> > I have added more logging to my test application.  I have two servers
> > writing to a shared Lucene index on an NFS partition...
> >
> > Here is the logging from one server...
> >
> > [10:49:18] [DEBUG] LuceneIndexAccessor closing cached writer
> > [10:49:18] [DEBUG] ExpirationTimeDeletionPolicy onCommit() delete
> > [segments_n]
> >
> > and the other server (at the same time):
> >
> > [10:49:18] [DEBUG] LuceneIndexAccessor opening new writer and caching it
> > [10:49:18] [DEBUG] IndexAccessProvider getWriter()
> > [10:49:18] [ERROR] DocumentCollection update(DocumentData)
> > com.company.lucene.LuceneIcmException: I/O Error: Cannot add the
> > document to the index.
> > [/mnt/nfstest/repository/lucene/lucene-icm-test-1-0/segments_n (No
> > such file or directory)]
> >     at
> >     com.company.lucene.RepositoryWriter.addDocument(RepositoryWriter.java:182)
> >
> > I think the exception is being thrown when the IndexWriter is created:
> > new IndexWriter(directory, false, analyzer, false, deletionPolicy);
> >
> > I am confused... segments_n should not have been touched for 3 minutes
> > so why would a new IndexWriter want to read it?
>
> Whenever a writer is opeened, it initializes the deleter
> (IndexFileDeleter).  During that initialization, we list all files in
> the index directory, and for every segments_N file we find, we open it
> and "incref" all index files that it's using.  We then call the
> deletion policy's "onInit" to give it a chance to remove any of these
> commit points.
>
> What's happening here is the NFS directory listing is "stale" and is
> reporting that segments_n exists when in fact it doesn't.  This is
> almost certainly due to the NFS client's caching (directory listing
> caches are in general not coherent for NFS clients, ie, they can "lie"
> for a short period of time, especially in cases like this).
>
> I think this fix is fairly simple: we should catch the
> FileNotFoundException and handle that as if the file did not exist.  I
> will open a Jira issue & get a patch.
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28989-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 03 12:20:40 2007
Return-Path: <java-user-return-28989-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80216 invoked from network); 3 Jul 2007 12:20:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jul 2007 12:20:38 -0000
Received: (qmail 70104 invoked by uid 500); 3 Jul 2007 12:20:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69892 invoked by uid 500); 3 Jul 2007 12:20:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69881 invoked by uid 99); 3 Jul 2007 12:20:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 05:20:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 05:20:28 -0700
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id 98B9E5D1D
	for <java-user@lucene.apache.org>; Tue,  3 Jul 2007 08:20:07 -0400 (EDT)
Received: from web8.messagingengine.com ([10.202.2.217])
  by compute1.internal (MEProxy); Tue, 03 Jul 2007 08:20:07 -0400
Received: by web8.messagingengine.com (Postfix, from userid 99)
	id 686931638C; Tue,  3 Jul 2007 08:20:07 -0400 (EDT)
Message-Id: <1183465207.11743.1198277029@webmail.messagingengine.com>
X-Sasl-Enc: 02bUu2JkvjyirjnlvcuUEfBvcPNW2y2eZIDXKbinXuny 1183465207
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <OF19D3F11C.A08B201A-ON6525730D.003B9E55-6525730D.003DD835@hewitt.com>
   <1183461674.2220.1198268681@webmail.messagingengine.com>
   <4f9b23800707030432i1067a67auc8fc0f83abeeea0@mail.gmail.com>
Subject: Re: Lucene 2.2, NFS, Lock obtain timed out
In-Reply-To: <4f9b23800707030432i1067a67auc8fc0f83abeeea0@mail.gmail.com>
Date: Tue, 03 Jul 2007 08:20:07 -0400
X-Virus-Checked: Checked by ClamAV on apache.org

OK I opened issue LUCENE-948, and attached a patch & new 2.2.0 JAR.
Please make sure you use the "take2" versions (they have added
instrumentation to help us debug):

    https://issues.apache.org/jira/browse/LUCENE-948

Patrick, could you please test the above "take2" JAR?  Could you also call
IndexWriter.setDefaultInfoStream(...) and capture all output from both
machines (it will produce quite a bit of output).

However: I'm now concerned about another potential impact of stale
directory listing caches, specifically that the writer on the 2nd
machine will not see the current segments_N file written by the first
machine and will incorrectly remove the newly created files.

I think that "take2" JAR should at least resolve this
FileNotFoundException but I think likely you are about to hit this new
issue.

Mike

"Patrick Kimber" <mailing.patrick.kimber@gmail.com> wrote:
> Hi Michael
> 
> I am really pleased we have a potential fix.  I will look out for the
> patch.
> 
> Thanks for your help.
> 
> Patrick
> 
> On 03/07/07, Michael McCandless <lucene@mikemccandless.com> wrote:
> >
> > "Patrick Kimber" <mailing.patrick.kimber@gmail.com> wrote:
> >
> > > I am using the NativeFSLockFactory.  I was hoping this would have
> > > stopped these errors.
> >
> > I believe this is not a locking issue and NativeFSLockFactory should
> > be working correctly over NFS.
> >
> > > Here is the whole of the stack trace:
> > >
> > > Caused by: java.io.FileNotFoundException:
> > > /mnt/nfstest/repository/lucene/lucene-icm-test-1-0/segments_n (No such
> > > file or directory)
> > >       at java.io.RandomAccessFile.open(Native Method)
> > >       at java.io.RandomAccessFile.<init>(RandomAccessFile.java:204)
> > >       at org.apache.lucene.store.FSDirectory$FSIndexInput$Descriptor.<init>(FSDirectory.java:506)
> > >       at org.apache.lucene.store.FSDirectory$FSIndexInput.<init>(FSDirectory.java:536)
> > >       at org.apache.lucene.store.FSDirectory$FSIndexInput.<init>(FSDirectory.java:531)
> > >       at org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java:440)
> > >       at org.apache.lucene.index.SegmentInfos.read(SegmentInfos.java:193)
> > >       at org.apache.lucene.index.IndexFileDeleter.<init>(IndexFileDeleter.java:156)
> > >       at org.apache.lucene.index.IndexWriter.init(IndexWriter.java:626)
> > >       at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:573)
> > >       at com.subshell.lucene.indexaccess.impl.IndexAccessProvider.getWriter(IndexAccessProvider.java:68)
> > >       at com.subshell.lucene.indexaccess.impl.LuceneIndexAccessor.getWriter(LuceneIndexAccessor.java:171)
> > >       at com.company.lucene.RepositoryWriter.addDocument(RepositoryWriter.java:176)
> > >       ... 13 more
> >
> > OK, indeed the exception is inside IndexFileDeleter's initialization
> > (this is what I had guessed might be happening).
> >
> > > I have added more logging to my test application.  I have two servers
> > > writing to a shared Lucene index on an NFS partition...
> > >
> > > Here is the logging from one server...
> > >
> > > [10:49:18] [DEBUG] LuceneIndexAccessor closing cached writer
> > > [10:49:18] [DEBUG] ExpirationTimeDeletionPolicy onCommit() delete
> > > [segments_n]
> > >
> > > and the other server (at the same time):
> > >
> > > [10:49:18] [DEBUG] LuceneIndexAccessor opening new writer and caching it
> > > [10:49:18] [DEBUG] IndexAccessProvider getWriter()
> > > [10:49:18] [ERROR] DocumentCollection update(DocumentData)
> > > com.company.lucene.LuceneIcmException: I/O Error: Cannot add the
> > > document to the index.
> > > [/mnt/nfstest/repository/lucene/lucene-icm-test-1-0/segments_n (No
> > > such file or directory)]
> > >     at
> > >     com.company.lucene.RepositoryWriter.addDocument(RepositoryWriter.java:182)
> > >
> > > I think the exception is being thrown when the IndexWriter is created:
> > > new IndexWriter(directory, false, analyzer, false, deletionPolicy);
> > >
> > > I am confused... segments_n should not have been touched for 3 minutes
> > > so why would a new IndexWriter want to read it?
> >
> > Whenever a writer is opeened, it initializes the deleter
> > (IndexFileDeleter).  During that initialization, we list all files in
> > the index directory, and for every segments_N file we find, we open it
> > and "incref" all index files that it's using.  We then call the
> > deletion policy's "onInit" to give it a chance to remove any of these
> > commit points.
> >
> > What's happening here is the NFS directory listing is "stale" and is
> > reporting that segments_n exists when in fact it doesn't.  This is
> > almost certainly due to the NFS client's caching (directory listing
> > caches are in general not coherent for NFS clients, ie, they can "lie"
> > for a short period of time, especially in cases like this).
> >
> > I think this fix is fairly simple: we should catch the
> > FileNotFoundException and handle that as if the file did not exist.  I
> > will open a Jira issue & get a patch.
> >
> > Mike
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28990-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 03 13:51:18 2007
Return-Path: <java-user-return-28990-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32206 invoked from network); 3 Jul 2007 13:51:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jul 2007 13:51:17 -0000
Received: (qmail 7140 invoked by uid 500); 3 Jul 2007 13:51:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7107 invoked by uid 500); 3 Jul 2007 13:51:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7096 invoked by uid 99); 3 Jul 2007 13:51:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 06:51:09 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mailing.patrick.kimber@gmail.com designates 64.233.162.239 as permitted sender)
Received: from [64.233.162.239] (HELO nz-out-0506.google.com) (64.233.162.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 06:51:05 -0700
Received: by nz-out-0506.google.com with SMTP id i28so793973nzi
        for <java-user@lucene.apache.org>; Tue, 03 Jul 2007 06:50:45 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=q0uaJEeKtMCoVK+cCVEqZYnOgSuJq3CZnfLSrql/RVpRTq7Uc+BAVcgJWgq5jIbTiGPa0uXfpCVzBGdGO8dm8THM27V2D0Lsx6gPYJ47mwsbBMGx0SgVkO1sYzp2E2pJllDqrW8jG1ms5V38n7rG/hBUWFFQ2K9GXKTzbo1mV4k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=uIo41jgImjkCSJxtTuYMEgGHdBvveomV1Iyu39ug6l9DS4uptYuRUnr4WFenA4SVhuXn6h4QdB98AYDjHO5hqgnCO0FTEbnFvPTjyG6EUvn5vaRDbbRzTqQccgr+x0h+bgre3g7MgaNIJJjYK5iP2t03JSPNY44M//imu9PfGJs=
Received: by 10.114.254.1 with SMTP id b1mr6141501wai.1183470644293;
        Tue, 03 Jul 2007 06:50:44 -0700 (PDT)
Received: by 10.115.55.4 with HTTP; Tue, 3 Jul 2007 06:50:43 -0700 (PDT)
Message-ID: <4f9b23800707030650y6139a19fn2870bef783636f46@mail.gmail.com>
Date: Tue, 3 Jul 2007 14:50:43 +0100
From: "Patrick Kimber" <mailing.patrick.kimber@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene 2.2, NFS, Lock obtain timed out
In-Reply-To: <1183465207.11743.1198277029@webmail.messagingengine.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <OF19D3F11C.A08B201A-ON6525730D.003B9E55-6525730D.003DD835@hewitt.com>
	 <1183461674.2220.1198268681@webmail.messagingengine.com>
	 <4f9b23800707030432i1067a67auc8fc0f83abeeea0@mail.gmail.com>
	 <1183465207.11743.1198277029@webmail.messagingengine.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Michael

I am setting up the test with the "take2" jar and will let you know
the results as soon as I have them.

Thanks for your help

Patrick

On 03/07/07, Michael McCandless <lucene@mikemccandless.com> wrote:
> OK I opened issue LUCENE-948, and attached a patch & new 2.2.0 JAR.
> Please make sure you use the "take2" versions (they have added
> instrumentation to help us debug):
>
>     https://issues.apache.org/jira/browse/LUCENE-948
>
> Patrick, could you please test the above "take2" JAR?  Could you also call
> IndexWriter.setDefaultInfoStream(...) and capture all output from both
> machines (it will produce quite a bit of output).
>
> However: I'm now concerned about another potential impact of stale
> directory listing caches, specifically that the writer on the 2nd
> machine will not see the current segments_N file written by the first
> machine and will incorrectly remove the newly created files.
>
> I think that "take2" JAR should at least resolve this
> FileNotFoundException but I think likely you are about to hit this new
> issue.
>
> Mike
>
> "Patrick Kimber" <mailing.patrick.kimber@gmail.com> wrote:
> > Hi Michael
> >
> > I am really pleased we have a potential fix.  I will look out for the
> > patch.
> >
> > Thanks for your help.
> >
> > Patrick
> >
> > On 03/07/07, Michael McCandless <lucene@mikemccandless.com> wrote:
> > >
> > > "Patrick Kimber" <mailing.patrick.kimber@gmail.com> wrote:
> > >
> > > > I am using the NativeFSLockFactory.  I was hoping this would have
> > > > stopped these errors.
> > >
> > > I believe this is not a locking issue and NativeFSLockFactory should
> > > be working correctly over NFS.
> > >
> > > > Here is the whole of the stack trace:
> > > >
> > > > Caused by: java.io.FileNotFoundException:
> > > > /mnt/nfstest/repository/lucene/lucene-icm-test-1-0/segments_n (No such
> > > > file or directory)
> > > >       at java.io.RandomAccessFile.open(Native Method)
> > > >       at java.io.RandomAccessFile.<init>(RandomAccessFile.java:204)
> > > >       at org.apache.lucene.store.FSDirectory$FSIndexInput$Descriptor.<init>(FSDirectory.java:506)
> > > >       at org.apache.lucene.store.FSDirectory$FSIndexInput.<init>(FSDirectory.java:536)
> > > >       at org.apache.lucene.store.FSDirectory$FSIndexInput.<init>(FSDirectory.java:531)
> > > >       at org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java:440)
> > > >       at org.apache.lucene.index.SegmentInfos.read(SegmentInfos.java:193)
> > > >       at org.apache.lucene.index.IndexFileDeleter.<init>(IndexFileDeleter.java:156)
> > > >       at org.apache.lucene.index.IndexWriter.init(IndexWriter.java:626)
> > > >       at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:573)
> > > >       at com.subshell.lucene.indexaccess.impl.IndexAccessProvider.getWriter(IndexAccessProvider.java:68)
> > > >       at com.subshell.lucene.indexaccess.impl.LuceneIndexAccessor.getWriter(LuceneIndexAccessor.java:171)
> > > >       at com.company.lucene.RepositoryWriter.addDocument(RepositoryWriter.java:176)
> > > >       ... 13 more
> > >
> > > OK, indeed the exception is inside IndexFileDeleter's initialization
> > > (this is what I had guessed might be happening).
> > >
> > > > I have added more logging to my test application.  I have two servers
> > > > writing to a shared Lucene index on an NFS partition...
> > > >
> > > > Here is the logging from one server...
> > > >
> > > > [10:49:18] [DEBUG] LuceneIndexAccessor closing cached writer
> > > > [10:49:18] [DEBUG] ExpirationTimeDeletionPolicy onCommit() delete
> > > > [segments_n]
> > > >
> > > > and the other server (at the same time):
> > > >
> > > > [10:49:18] [DEBUG] LuceneIndexAccessor opening new writer and caching it
> > > > [10:49:18] [DEBUG] IndexAccessProvider getWriter()
> > > > [10:49:18] [ERROR] DocumentCollection update(DocumentData)
> > > > com.company.lucene.LuceneIcmException: I/O Error: Cannot add the
> > > > document to the index.
> > > > [/mnt/nfstest/repository/lucene/lucene-icm-test-1-0/segments_n (No
> > > > such file or directory)]
> > > >     at
> > > >     com.company.lucene.RepositoryWriter.addDocument(RepositoryWriter.java:182)
> > > >
> > > > I think the exception is being thrown when the IndexWriter is created:
> > > > new IndexWriter(directory, false, analyzer, false, deletionPolicy);
> > > >
> > > > I am confused... segments_n should not have been touched for 3 minutes
> > > > so why would a new IndexWriter want to read it?
> > >
> > > Whenever a writer is opeened, it initializes the deleter
> > > (IndexFileDeleter).  During that initialization, we list all files in
> > > the index directory, and for every segments_N file we find, we open it
> > > and "incref" all index files that it's using.  We then call the
> > > deletion policy's "onInit" to give it a chance to remove any of these
> > > commit points.
> > >
> > > What's happening here is the NFS directory listing is "stale" and is
> > > reporting that segments_n exists when in fact it doesn't.  This is
> > > almost certainly due to the NFS client's caching (directory listing
> > > caches are in general not coherent for NFS clients, ie, they can "lie"
> > > for a short period of time, especially in cases like this).
> > >
> > > I think this fix is fairly simple: we should catch the
> > > FileNotFoundException and handle that as if the file did not exist.  I
> > > will open a Jira issue & get a patch.
> > >
> > > Mike
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28991-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 03 15:13:46 2007
Return-Path: <java-user-return-28991-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49785 invoked from network); 3 Jul 2007 15:13:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jul 2007 15:13:44 -0000
Received: (qmail 51058 invoked by uid 500); 3 Jul 2007 15:13:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51026 invoked by uid 500); 3 Jul 2007 15:13:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51015 invoked by uid 99); 3 Jul 2007 15:13:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 08:13:38 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mailing.patrick.kimber@gmail.com designates 209.85.146.177 as permitted sender)
Received: from [209.85.146.177] (HELO wa-out-1112.google.com) (209.85.146.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 08:13:34 -0700
Received: by wa-out-1112.google.com with SMTP id j40so2950904wah
        for <java-user@lucene.apache.org>; Tue, 03 Jul 2007 08:13:14 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=odEpPn2vVptUci8Nv7quKlporRz/32vXB8hiyOev8W7mkuAOKxHpNiJoExmSpEB97Th5VtCBTnHZHzEheEPWk1AUzra2eE76XKI2RAbu3IQYRdkIK5fv3zWyg8mQXCaExMUU1Zx90fZEgqN9YpCOqaUhE4PZx8bzYMEHLQkFqN0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=r2k3G0dIKt4CLslBUCndj9ZKnAJMg6nIcVqnnxMQXFYr61Qg6KW7IEG019egeH5svUrXyRh28yNdm3drDitWk71GG15mNTO1mU3NZC9A+c+5yyo7UhHhYnqugpbshb/0vVvEGtCnb/5PbG0zRYU7spNH+5lnWqv328tO1ODOPwc=
Received: by 10.114.58.1 with SMTP id g1mr5330243waa.1183475594080;
        Tue, 03 Jul 2007 08:13:14 -0700 (PDT)
Received: by 10.115.55.4 with HTTP; Tue, 3 Jul 2007 08:13:14 -0700 (PDT)
Message-ID: <4f9b23800707030813m998f3e5u1984d913f51d13b6@mail.gmail.com>
Date: Tue, 3 Jul 2007 16:13:14 +0100
From: "Patrick Kimber" <mailing.patrick.kimber@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene 2.2, NFS, Lock obtain timed out
In-Reply-To: <4f9b23800707030650y6139a19fn2870bef783636f46@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <OF19D3F11C.A08B201A-ON6525730D.003B9E55-6525730D.003DD835@hewitt.com>
	 <1183461674.2220.1198268681@webmail.messagingengine.com>
	 <4f9b23800707030432i1067a67auc8fc0f83abeeea0@mail.gmail.com>
	 <1183465207.11743.1198277029@webmail.messagingengine.com>
	 <4f9b23800707030650y6139a19fn2870bef783636f46@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Michael

I have been running the test for over an hour without any problem.
The index writer log file is getting rather large so I cannot leave
the test running overnight.  I will run the test again tomorrow
morning and let you know how it goes.

Thanks again...

Patrick

On 03/07/07, Patrick Kimber <mailing.patrick.kimber@gmail.com> wrote:
> Hi Michael
>
> I am setting up the test with the "take2" jar and will let you know
> the results as soon as I have them.
>
> Thanks for your help
>
> Patrick
>
> On 03/07/07, Michael McCandless <lucene@mikemccandless.com> wrote:
> > OK I opened issue LUCENE-948, and attached a patch & new 2.2.0 JAR.
> > Please make sure you use the "take2" versions (they have added
> > instrumentation to help us debug):
> >
> >     https://issues.apache.org/jira/browse/LUCENE-948
> >
> > Patrick, could you please test the above "take2" JAR?  Could you also call
> > IndexWriter.setDefaultInfoStream(...) and capture all output from both
> > machines (it will produce quite a bit of output).
> >
> > However: I'm now concerned about another potential impact of stale
> > directory listing caches, specifically that the writer on the 2nd
> > machine will not see the current segments_N file written by the first
> > machine and will incorrectly remove the newly created files.
> >
> > I think that "take2" JAR should at least resolve this
> > FileNotFoundException but I think likely you are about to hit this new
> > issue.
> >
> > Mike
> >
> > "Patrick Kimber" <mailing.patrick.kimber@gmail.com> wrote:
> > > Hi Michael
> > >
> > > I am really pleased we have a potential fix.  I will look out for the
> > > patch.
> > >
> > > Thanks for your help.
> > >
> > > Patrick
> > >
> > > On 03/07/07, Michael McCandless <lucene@mikemccandless.com> wrote:
> > > >
> > > > "Patrick Kimber" <mailing.patrick.kimber@gmail.com> wrote:
> > > >
> > > > > I am using the NativeFSLockFactory.  I was hoping this would have
> > > > > stopped these errors.
> > > >
> > > > I believe this is not a locking issue and NativeFSLockFactory should
> > > > be working correctly over NFS.
> > > >
> > > > > Here is the whole of the stack trace:
> > > > >
> > > > > Caused by: java.io.FileNotFoundException:
> > > > > /mnt/nfstest/repository/lucene/lucene-icm-test-1-0/segments_n (No such
> > > > > file or directory)
> > > > >       at java.io.RandomAccessFile.open(Native Method)
> > > > >       at java.io.RandomAccessFile.<init>(RandomAccessFile.java:204)
> > > > >       at org.apache.lucene.store.FSDirectory$FSIndexInput$Descriptor.<init>(FSDirectory.java:506)
> > > > >       at org.apache.lucene.store.FSDirectory$FSIndexInput.<init>(FSDirectory.java:536)
> > > > >       at org.apache.lucene.store.FSDirectory$FSIndexInput.<init>(FSDirectory.java:531)
> > > > >       at org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java:440)
> > > > >       at org.apache.lucene.index.SegmentInfos.read(SegmentInfos.java:193)
> > > > >       at org.apache.lucene.index.IndexFileDeleter.<init>(IndexFileDeleter.java:156)
> > > > >       at org.apache.lucene.index.IndexWriter.init(IndexWriter.java:626)
> > > > >       at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:573)
> > > > >       at com.subshell.lucene.indexaccess.impl.IndexAccessProvider.getWriter(IndexAccessProvider.java:68)
> > > > >       at com.subshell.lucene.indexaccess.impl.LuceneIndexAccessor.getWriter(LuceneIndexAccessor.java:171)
> > > > >       at com.company.lucene.RepositoryWriter.addDocument(RepositoryWriter.java:176)
> > > > >       ... 13 more
> > > >
> > > > OK, indeed the exception is inside IndexFileDeleter's initialization
> > > > (this is what I had guessed might be happening).
> > > >
> > > > > I have added more logging to my test application.  I have two servers
> > > > > writing to a shared Lucene index on an NFS partition...
> > > > >
> > > > > Here is the logging from one server...
> > > > >
> > > > > [10:49:18] [DEBUG] LuceneIndexAccessor closing cached writer
> > > > > [10:49:18] [DEBUG] ExpirationTimeDeletionPolicy onCommit() delete
> > > > > [segments_n]
> > > > >
> > > > > and the other server (at the same time):
> > > > >
> > > > > [10:49:18] [DEBUG] LuceneIndexAccessor opening new writer and caching it
> > > > > [10:49:18] [DEBUG] IndexAccessProvider getWriter()
> > > > > [10:49:18] [ERROR] DocumentCollection update(DocumentData)
> > > > > com.company.lucene.LuceneIcmException: I/O Error: Cannot add the
> > > > > document to the index.
> > > > > [/mnt/nfstest/repository/lucene/lucene-icm-test-1-0/segments_n (No
> > > > > such file or directory)]
> > > > >     at
> > > > >     com.company.lucene.RepositoryWriter.addDocument(RepositoryWriter.java:182)
> > > > >
> > > > > I think the exception is being thrown when the IndexWriter is created:
> > > > > new IndexWriter(directory, false, analyzer, false, deletionPolicy);
> > > > >
> > > > > I am confused... segments_n should not have been touched for 3 minutes
> > > > > so why would a new IndexWriter want to read it?
> > > >
> > > > Whenever a writer is opeened, it initializes the deleter
> > > > (IndexFileDeleter).  During that initialization, we list all files in
> > > > the index directory, and for every segments_N file we find, we open it
> > > > and "incref" all index files that it's using.  We then call the
> > > > deletion policy's "onInit" to give it a chance to remove any of these
> > > > commit points.
> > > >
> > > > What's happening here is the NFS directory listing is "stale" and is
> > > > reporting that segments_n exists when in fact it doesn't.  This is
> > > > almost certainly due to the NFS client's caching (directory listing
> > > > caches are in general not coherent for NFS clients, ie, they can "lie"
> > > > for a short period of time, especially in cases like this).
> > > >
> > > > I think this fix is fairly simple: we should catch the
> > > > FileNotFoundException and handle that as if the file did not exist.  I
> > > > will open a Jira issue & get a patch.
> > > >
> > > > Mike
> > > >
> > > > ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >
> > > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28992-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 03 15:21:40 2007
Return-Path: <java-user-return-28992-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54356 invoked from network); 3 Jul 2007 15:21:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jul 2007 15:21:40 -0000
Received: (qmail 84591 invoked by uid 500); 3 Jul 2007 15:21:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84558 invoked by uid 500); 3 Jul 2007 15:21:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84547 invoked by uid 99); 3 Jul 2007 15:21:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 08:21:35 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [204.127.200.84] (HELO sccrmhc14.comcast.net) (204.127.200.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 08:21:30 -0700
Received: from smailcenter61.comcast.net ([204.127.205.161])
          by comcast.net (sccrmhc14) with SMTP
          id <20070703152109014005106ge>; Tue, 3 Jul 2007 15:21:09 +0000
Received: from [198.246.149.100] by smailcenter61.comcast.net;
	Tue, 03 Jul 2007 15:21:08 +0000
From: mcmoisei@comcast.net
To: java-user@lucene.apache.org
Subject: RE: Pagination
Date: Tue, 03 Jul 2007 15:21:08 +0000
Message-Id: <070320071521.6119.468A6964000B3E75000017E72205884484070A9C0701030C03@comcast.net>
X-Mailer: AT&T Message Center Version 1 (Oct  4 2006)
X-Authenticated-Sender: bWNtb2lzZWlAY29tY2FzdC5uZXQ=
X-Virus-Checked: Checked by ClamAV on apache.org

I get the ids then I do look the items in the database using select item.* from item where item.id in ( ids )

 -------------- Original message ----------------------
From: "Lee Li Bin" <leelb@xedge.com.sg>
> Hi,
> 
> Thanks Mark! 
> 
> I do have the same question as Alixandre. How do I get the content of the
> document instead of the document id?
> 
> Thanks.
> 
> Regards,
> Lee Li Bin
> -----Original Message-----
> From: Alixandre Santana [mailto:alixandresantana@gmail.com] 
> Sent: Tuesday, July 03, 2007 12:55 AM
> To: java-user@lucene.apache.org
> Subject: Re: Pagination
> 
> Mark,
> 
> The ScoreDoc[] contains only the  IDs of each lucene document. what
> would be the best way of getting the entire (lucene)document ?
> Should i do a new search with the ID retrivied by hpc.getScores() -
> (searcher.doc(idDoc))?
> 
> thanks.
> 
> Alixandre
> 
> On 7/2/07, mark harwood <markharw00d@yahoo.co.uk> wrote:
> > The Hits class is OK but can be inefficient due to re-running the query
> unnecessarily.
> >
> > The class below illustrates how to efficiently retrieve a particular page
> of results and lends itself to webapps where you don't want to retain server
> side state (i.e. a Hits object) for each client.
> > It would make sense to put an upper limit on the "start" parameter (as
> Google etc do) to avoid consuming to much RAM per client request.
> >
> > Cheers,
> > Mark
> >
> > [Begin code]
> >
> >
> >
> >
> > package lucene.pagination;
> >
> > import org.apache.lucene.index.Term;
> > import org.apache.lucene.search.HitCollector;
> > import org.apache.lucene.search.IndexSearcher;
> > import org.apache.lucene.search.Query;
> > import org.apache.lucene.search.ScoreDoc;
> > import org.apache.lucene.search.TermQuery;
> > import org.apache.lucene.util.PriorityQueue;
> >
> > /**
> >  * A HitCollector that retrieves a specific page of results
> >  * @author maharwood
> >  */
> > public class HitPageCollector extends HitCollector
> > {
> >     //Demo code showing pagination
> >     public static void main(String[] args) throws Exception
> >     {
> >         IndexSearcher s=new IndexSearcher("/indexes/nasa");
> >         HitPageCollector hpc=new HitPageCollector(1,10);
> >         Query q=new TermQuery(new Term("contents","sea"));
> >         s.search(q,hpc);
> >         ScoreDoc[] sd = hpc.getScores();
> >         System.out.println("Hits "+ hpc.getStart()+" - "+ hpc.getEnd()+"
> of "+hpc.getTotalAvailable());
> >         for (int i = 0; i < sd.length; i++)
> >         {
> >             System.out.println(sd[i].doc);
> >         }
> >         s.close();
> >     }
> >
> >     int nDocs;
> >     PriorityQueue hq;
> >     float minScore = 0.0f;
> >     int totalHits = 0;
> >     int start;
> >     int maxNumHits;
> >     int totalInThisPage;
> >
> >     public HitPageCollector(int start, int maxNumHits)
> >     {
> >         this.nDocs = start + maxNumHits;
> >         this.start = start;
> >         this.maxNumHits = maxNumHits;
> >         hq = new HitQueue(nDocs);
> >     }
> >
> >     public void collect(int doc, float score)
> >     {
> >         totalHits++;
> >         if((hq.size()<nDocs)||(score >= minScore))
> >         {
> >             ScoreDoc scoreDoc = new ScoreDoc(doc,score);
> >             hq.insert(scoreDoc);              // update hit queue
> >             minScore = ((ScoreDoc)hq.top()).score; // reset minScore
> >         }
> >         totalInThisPage=hq.size();
> >     }
> >
> >
> >     public ScoreDoc[] getScores()
> >     {
> >         //just returns the number of hits required from the required start
> point
> >         /*
> >             So, given hits:
> >                 1234567890
> >             and a start of 2 + maxNumHits of 3 should return:
> >                 234
> >             or, given hits
> >                 12
> >             should return
> >                 2
> >             and so, on.
> >         */
> >         if (start <= 0)
> >         {
> >             throw new IllegalArgumentException("Invalid start :" + start+"
> - start should be >=1");
> >         }
> >         int numReturned = Math.min(maxNumHits, (hq.size() - (start - 1)));
> >         if (numReturned <= 0)
> >         {
> >             return new ScoreDoc[0];
> >         }
> >         ScoreDoc[] scoreDocs = new ScoreDoc[numReturned];
> >         ScoreDoc scoreDoc;
> >         for (int i = hq.size() - 1; i >= 0; i--) // put docs in array,
> working backwards from lowest count
> >         {
> >             scoreDoc = (ScoreDoc) hq.pop();
> >             if (i < (start - 1))
> >             {
> >                 break; //off the beginning of the results array
> >             }
> >             if (i < (scoreDocs.length + (start - 1)))
> >             {
> >                 scoreDocs[i - (start - 1)] = scoreDoc; //within scope of
> results array
> >             }
> >         }
> >         return scoreDocs;
> >     }
> >
> >     public int getTotalAvailable()
> >     {
> >         return totalHits;
> >     }
> >
> >     public int getStart()
> >     {
> >         return start;
> >     }
> >
> >     public int getEnd()
> >     {
> >         return start+totalInThisPage-1;
> >     }
> >
> >     public class HitQueue extends PriorityQueue
> >     {
> >           public HitQueue(int size)
> >           {
> >             initialize(size);
> >           }
> >           public final boolean lessThan(Object a, Object b)
> >           {
> >             ScoreDoc hitA = (ScoreDoc)a;
> >             ScoreDoc hitB = (ScoreDoc)b;
> >             if (hitA.score == hitB.score)
> >               return hitA.doc > hitB.doc;
> >             else
> >               return hitA.score < hitB.score;
> >           }
> >     }
> > }
> >
> >
> >
> > ----- Original Message ----
> > From: Lee Li Bin <leelb@xedge.com.sg>
> > To: java-user@lucene.apache.org
> > Sent: Monday, 2 July, 2007 9:59:14 AM
> > Subject: RE: Pagination
> >
> > Hi,
> >
> > I still have no idea of how to get it done. Can give me some details?
> >
> > The web application is in jsp btw.
> >
> > Thanks a lot.
> >
> >
> > Regards,
> > Lee Li Bin
> > -----Original Message-----
> > From: Chris Lu [mailto:chris.lu@gmail.com]
> > Sent: Saturday, June 30, 2007 2:21 AM
> > To: java-user@lucene.apache.org
> > Subject: Re: Pagination
> >
> > After search, you will just get an object Hits, and go through all of the
> > documents by hits.doc(i).
> >
> > The pagination is controlled by you. Lucene is pre-caching first 200
> > documents and lazy loading the rest by batch size 200.
> >
> > --
> > Chris Lu
> > -------------------------
> > Instant Scalable Full-Text Search On Any Database/Application
> > site: http://www.dbsight.net
> > demo: http://search.dbsight.com
> > Lucene Database Search in 3 minutes:
> >
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_m
> > inutes
> >
> > On 6/29/07, Lee Li Bin <leelb@xedge.com.sg> wrote:
> > >
> > > Hi,
> > >
> > > does anyone knows how to do pagination on jsp page using the number of
> > > hits
> > > return? Or any other solutions?
> > >
> > >
> > >
> > > Do provide me with some sample coding if possible or a step by step
> guide.
> > > Sry if I'm asking too much, I'm new to lucene.
> > >
> > >
> > >
> > > Thanks
> > >
> > >
> > >
> > >
> > >
> > >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> >
> >
> >
> >       ___________________________________________________________
> > Yahoo! Answers - Got a question? Someone out there knows the answer. Try
> it
> > now.
> > http://uk.answers.yahoo.com/
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 
> 
> -- 
> Alixandre Santana
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28993-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 03 15:28:01 2007
Return-Path: <java-user-return-28993-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59118 invoked from network); 3 Jul 2007 15:27:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jul 2007 15:27:59 -0000
Received: (qmail 10046 invoked by uid 500); 3 Jul 2007 15:27:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10004 invoked by uid 500); 3 Jul 2007 15:27:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9993 invoked by uid 99); 3 Jul 2007 15:27:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 08:27:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 08:27:49 -0700
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id 48D2F6B5E
	for <java-user@lucene.apache.org>; Tue,  3 Jul 2007 11:27:28 -0400 (EDT)
Received: from web8.messagingengine.com ([10.202.2.217])
  by compute1.internal (MEProxy); Tue, 03 Jul 2007 11:27:28 -0400
Received: by web8.messagingengine.com (Postfix, from userid 99)
	id 2EC49161C0; Tue,  3 Jul 2007 11:27:28 -0400 (EDT)
Message-Id: <1183476448.14138.1198311153@webmail.messagingengine.com>
X-Sasl-Enc: SwRLN2A7msgAVdxyfFQvDLd7SqwaUlczn2jYApRlyFzr 1183476448
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <OF19D3F11C.A08B201A-ON6525730D.003B9E55-6525730D.003DD835@hewitt.com>
   <1183461674.2220.1198268681@webmail.messagingengine.com>
   <4f9b23800707030432i1067a67auc8fc0f83abeeea0@mail.gmail.com>
   <1183465207.11743.1198277029@webmail.messagingengine.com>
   <4f9b23800707030650y6139a19fn2870bef783636f46@mail.gmail.com>
   <4f9b23800707030813m998f3e5u1984d913f51d13b6@mail.gmail.com>
Subject: Re: Lucene 2.2, NFS, Lock obtain timed out
In-Reply-To: <4f9b23800707030813m998f3e5u1984d913f51d13b6@mail.gmail.com>
Date: Tue, 03 Jul 2007 11:27:28 -0400
X-Virus-Checked: Checked by ClamAV on apache.org

"Patrick Kimber" <mailing.patrick.kimber@gmail.com> wrote:

> I have been running the test for over an hour without any problem.
> The index writer log file is getting rather large so I cannot leave
> the test running overnight.  I will run the test again tomorrow
> morning and let you know how it goes.

Ahhh, that's good news, I'm glad to hear that!

You should go ahead and turn off the logging and make sure things are
still fine (just in case logging is changing timing of events since
timing is a factor here).

In your logs, do you see lines like this?:

  ... hit FileNotFoundException when loading commit "segment_X"; skipping this commit point

That would confirm the new code (to catch the FileNotFoundException)
is indeed being hit.

Actually, could you also check the logs and try to verify that each
time one machine closed its writer and a 2nd machine opened a new
writer that the 2nd machine indeed loaded the newest segments_N file
and not segments_N-1?  (This is the possible new issue I was referring
to).  I fear that this new issue could silently lose documents added
by another machine and possibly not throw an exception.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28994-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 03 15:38:14 2007
Return-Path: <java-user-return-28994-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64929 invoked from network); 3 Jul 2007 15:38:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jul 2007 15:38:10 -0000
Received: (qmail 42463 invoked by uid 500); 3 Jul 2007 15:38:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42434 invoked by uid 500); 3 Jul 2007 15:38:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42422 invoked by uid 99); 3 Jul 2007 15:38:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 08:38:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.150] (HELO rescomp.berkeley.edu) (169.229.70.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 08:37:57 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 03C545B76E; Tue,  3 Jul 2007 08:37:35 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id DD1EA7F403;
	Tue,  3 Jul 2007 08:37:35 -0700 (PDT)
Date: Tue, 3 Jul 2007 08:37:35 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Cathy Murphy <cathy@nachofoto.com>
Cc: erickerickson@gmail.com,
	Lucene Users <java-user@lucene.apache.org>
Subject: Re: Lucene index in memcache
In-Reply-To: <c6ccd7950707022348x4cce5dc5nc21c2b582abf1922@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0707030833310.17701@hal.rescomp.berkeley.edu>
References: <c6ccd7950707021349h24b0bcefsc312a18240d24b70@mail.gmail.com> 
 <Pine.LNX.4.58.0707021412030.10524@hal.rescomp.berkeley.edu>
 <c6ccd7950707022348x4cce5dc5nc21c2b582abf1922@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I have done some profiling , and it seems the response is slow when there
: are long queries(more than 5-6 words per query).
: The way I have implemented is : I pass in the search query and lucene
: returns the total number of hits, along with ids . I then fetch objects
: for only those ids , as required per the pagination.
: Also it is a dedicated search box .

As i mentioned, details are everything ... what methods re you calling on
the lucene API?  When are you calling them? (ie: are you opening a new
Searcher for every query, or are you reusing it for multiple queries)
What types of queries are you using? (booleanquery?, phrasequery?
spannearquery?)  ... how many docs are you showing on a page?  how many
fields does each doc have? how big is your index? how slow is slow (in
milli/seconds) ... actual numbers please.

the best way for people to help you is if they can see your actual code.

: > If you provide some more info about how you are using Lucene (ie: what you
: > code looks like) and what the concepts of "high traffic" and "slow" mean
: > to you, we might be able to help you better.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28995-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 03 15:58:41 2007
Return-Path: <java-user-return-28995-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76528 invoked from network); 3 Jul 2007 15:58:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jul 2007 15:58:39 -0000
Received: (qmail 91595 invoked by uid 500); 3 Jul 2007 15:58:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91419 invoked by uid 500); 3 Jul 2007 15:58:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91348 invoked by uid 99); 3 Jul 2007 15:58:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 08:58:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.212] (HELO web26001.mail.ukl.yahoo.com) (217.12.10.212)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 03 Jul 2007 08:58:24 -0700
Received: (qmail 63430 invoked by uid 60001); 3 Jul 2007 15:58:02 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=W8YNTZ4ZY+sHPBU7aFG+uxKodRwn+0VEVYY4Pxq7yiLFa66sAgxd/TUeVCEF1GBTmY3+rPaM8V3thXcWedyWzgNm9EhcuxIaMv0gGPpQUUyLWrJoGFbtnfIKiOQ8u+6LF0RkVmgM7G1YqwfuZpfZci4m9EyL39L2x9e32XFFPOM=;
X-YMail-OSG: jYxtH24VM1nJBYYuKBMWSCpxDJsGa5qPxHOaJyiA4B2HWLpCxDiEnCCMuz_42UEIRlHfOm4uMrSHsubQXXrSaBms3QSz_ozoUUYC7OAIIpc4YBJ4
Received: from [193.36.230.96] by web26001.mail.ukl.yahoo.com via HTTP; Tue, 03 Jul 2007 15:58:01 GMT
X-Mailer: YahooMailRC/651.38 YahooMailWebService/0.7.41.16
Date: Tue, 3 Jul 2007 15:58:01 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Pagination
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <649585.63120.qm@web26001.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

>>I get the ids then I do look the items in the database using select item.* from item where item.id in ( ids )

Hmm. That's likely to confuse the already confused :)
The ids referred to so far are Lucene internal document ids and are typically only meaningful to Lucene during a single IndexReader session. I wouldn't recommend storing them in a database because a Lucene document id can point to an entirely different document after deletes/updates are performed on the Lucene index and the IndexReader is reopened.

For the avoidance of further confusion I have extended the "main" method in my previous example (reposted below in full) to include examples of
1) Retrieving document content
2) Retrieving a "next" page (starting from result 11)
The values "1" and "11" used below in the calls to HitPageCollector constructor define the page start. This value is typically something you would get the client to pass to you e.g. note the number "10" in this URL http://www.google.com/search?q=lucene&start=10 which is used to select results from "10" onwards. Note also that this URL http://www.google.com/search?q=lucene&&start=10000 does not work because Google have placed a restriction on the maximum value for "start" - you should too.

Cheers
Mark


package lucene.pagination;

import org.apache.lucene.document.Document;
import org.apache.lucene.index.Term;
import org.apache.lucene.search.HitCollector;
import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.search.Query;
import org.apache.lucene.search.ScoreDoc;
import org.apache.lucene.search.TermQuery;
import org.apache.lucene.util.PriorityQueue;

/**
 * A HitCollector that retrieves a specific page of results 
 * @author maharwood
 */
public class HitPageCollector extends HitCollector
{
    //Demo code showing pagination
    public static void main(String[] args) throws Exception
    {
        IndexSearcher s=new IndexSearcher("/indexes/nasa");
        Query q=new TermQuery(new Term("contents","sea"));

        //Retrieve page 1  (hits 1-10)
        HitPageCollector hpc=new HitPageCollector(1,10);
        s.search(q,hpc);
        ScoreDoc[] sd = hpc.getScores();
        System.out.println("Hits "+ hpc.getStart()+" - "+ hpc.getEnd()+" of "+hpc.getTotalAvailable());
        for (int i = 0; i < sd.length; i++)
        {
            Document doc=s.doc(sd[i].doc);
            System.out.println(sd[i].score +" "+doc.get("title"));
        }
        
        //Example retrieve page 2 (hits 11-20)
        hpc=new HitPageCollector(11,10);
        s.search(q,hpc);
        sd = hpc.getScores();
        System.out.println("Hits "+ hpc.getStart()+" - "+ hpc.getEnd()+" of "+hpc.getTotalAvailable());
        for (int i = 0; i < sd.length; i++)
        {
            Document doc=s.doc(sd[i].doc);
            System.out.println(sd[i].score +" "+doc.get("title"));
        }
        
        
        s.close();
    }

    int nDocs;
    PriorityQueue hq;
    float minScore = 0.0f;
    int totalHits = 0;
    int start;
    int maxNumHits;
    int totalInThisPage;

    public HitPageCollector(int start, int maxNumHits)
    {
        this.nDocs = start + maxNumHits;
        this.start = start;
        this.maxNumHits = maxNumHits;
        hq = new HitQueue(nDocs);
    }

    public void collect(int doc, float score)
    {
        totalHits++;
        if((hq.size()<nDocs)||(score >= minScore))
        {
            ScoreDoc scoreDoc = new ScoreDoc(doc,score);
            hq.insert(scoreDoc);              // update hit queue
            minScore = ((ScoreDoc)hq.top()).score; // reset minScore
        }
        totalInThisPage=hq.size();
    }
    

    public ScoreDoc[] getScores()
    {
        //just returns the number of hits required from the required start point
        /*
            So, given hits:
                1234567890
            and a start of 2 + maxNumHits of 3 should return:
                234
            or, given hits
                12
            should return
                2
            and so, on.
        */
        if (start <= 0)
        {
            throw new IllegalArgumentException("Invalid start :" + start+" - start should be >=1");
        }
        int numReturned = Math.min(maxNumHits, (hq.size() - (start - 1)));
        if (numReturned <= 0)
        {
            return new ScoreDoc[0];
        }
        ScoreDoc[] scoreDocs = new ScoreDoc[numReturned];
        ScoreDoc scoreDoc;
        for (int i = hq.size() - 1; i >= 0; i--) // put docs in array, working backwards from lowest count
        {
            scoreDoc = (ScoreDoc) hq.pop();
            if (i < (start - 1))
            {
                break; //off the beginning of the results array
            }
            if (i < (scoreDocs.length + (start - 1)))
            {
                scoreDocs[i - (start - 1)] = scoreDoc; //within scope of results array
            }
        }
        return scoreDocs;
    }

    public int getTotalAvailable()
    {
        return totalHits;
    }

    public int getStart()
    {
        return start;
    }
    
    public int getEnd()
    {
        return start+totalInThisPage-1;
    }
    
    public class HitQueue extends PriorityQueue 
    {
          public HitQueue(int size) 
          {
            initialize(size);
          }
          public final boolean lessThan(Object a, Object b) 
          {
            ScoreDoc hitA = (ScoreDoc)a;
            ScoreDoc hitB = (ScoreDoc)b;
            if (hitA.score == hitB.score)
              return hitA.doc > hitB.doc;
            else
              return hitA.score < hitB.score;
          }
    }
}






      ___________________________________________________________ 
Yahoo! Mail is the world's favourite email. Don't settle for less, sign up for
your free account today http://uk.rd.yahoo.com/evt=44106/*http://uk.docs.yahoo.com/mail/winter07.html 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28996-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 03 16:10:27 2007
Return-Path: <java-user-return-28996-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82564 invoked from network); 3 Jul 2007 16:10:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jul 2007 16:10:26 -0000
Received: (qmail 35156 invoked by uid 500); 3 Jul 2007 16:10:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35122 invoked by uid 500); 3 Jul 2007 16:10:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35105 invoked by uid 99); 3 Jul 2007 16:10:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 09:10:20 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [204.127.200.81] (HELO sccrmhc11.comcast.net) (204.127.200.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 09:10:16 -0700
Received: from smailcenter76.comcast.net ([204.127.205.176])
          by comcast.net (sccrmhc11) with SMTP
          id <20070703160955011001nuj3e>; Tue, 3 Jul 2007 16:09:55 +0000
Received: from [198.246.149.100] by smailcenter76.comcast.net;
	Tue, 03 Jul 2007 16:09:54 +0000
From: mcmoisei@comcast.net
To: java-user@lucene.apache.org
Subject: Re: Pagination
Date: Tue, 03 Jul 2007 16:09:54 +0000
Message-Id: <070320071609.20558.468A74D2000AD5C50000504E2207024553070A9C0701030C03@comcast.net>
X-Mailer: AT&T Message Center Version 1 (Oct  4 2006)
X-Authenticated-Sender: bWNtb2lzZWlAY29tY2FzdC5uZXQ=
X-Virus-Checked: Checked by ClamAV on apache.org

It looks that we may have different cases.

What I do I index my items prior to insert them into the database. When I do a search I get the ids that have the best match and then lookup the items from the database. So far worked just fine. I have 5000 rows  of items and I think will still work fine later when I'd have 100K items.

 -------------- Original message ----------------------
From: mark harwood <markharw00d@yahoo.co.uk>
> >>I get the ids then I do look the items in the database using select item.* 
> from item where item.id in ( ids )
> 
> Hmm. That's likely to confuse the already confused :)
> The ids referred to so far are Lucene internal document ids and are typically 
> only meaningful to Lucene during a single IndexReader session. I wouldn't 
> recommend storing them in a database because a Lucene document id can point to 
> an entirely different document after deletes/updates are performed on the Lucene 
> index and the IndexReader is reopened.
> 
> For the avoidance of further confusion I have extended the "main" method in my 
> previous example (reposted below in full) to include examples of
> 1) Retrieving document content
> 2) Retrieving a "next" page (starting from result 11)
> The values "1" and "11" used below in the calls to HitPageCollector constructor 
> define the page start. This value is typically something you would get the 
> client to pass to you e.g. note the number "10" in this URL 
> http://www.google.com/search?q=lucene&start=10 which is used to select results 
> from "10" onwards. Note also that this URL 
> http://www.google.com/search?q=lucene&&start=10000 does not work because Google 
> have placed a restriction on the maximum value for "start" - you should too.
> 
> Cheers
> Mark
> 
> 
> package lucene.pagination;
> 
> import org.apache.lucene.document.Document;
> import org.apache.lucene.index.Term;
> import org.apache.lucene.search.HitCollector;
> import org.apache.lucene.search.IndexSearcher;
> import org.apache.lucene.search.Query;
> import org.apache.lucene.search.ScoreDoc;
> import org.apache.lucene.search.TermQuery;
> import org.apache.lucene.util.PriorityQueue;
> 
> /**
>  * A HitCollector that retrieves a specific page of results 
>  * @author maharwood
>  */
> public class HitPageCollector extends HitCollector
> {
>     //Demo code showing pagination
>     public static void main(String[] args) throws Exception
>     {
>         IndexSearcher s=new IndexSearcher("/indexes/nasa");
>         Query q=new TermQuery(new Term("contents","sea"));
> 
>         //Retrieve page 1  (hits 1-10)
>         HitPageCollector hpc=new HitPageCollector(1,10);
>         s.search(q,hpc);
>         ScoreDoc[] sd = hpc.getScores();
>         System.out.println("Hits "+ hpc.getStart()+" - "+ hpc.getEnd()+" of 
> "+hpc.getTotalAvailable());
>         for (int i = 0; i < sd.length; i++)
>         {
>             Document doc=s.doc(sd[i].doc);
>             System.out.println(sd[i].score +" "+doc.get("title"));
>         }
>         
>         //Example retrieve page 2 (hits 11-20)
>         hpc=new HitPageCollector(11,10);
>         s.search(q,hpc);
>         sd = hpc.getScores();
>         System.out.println("Hits "+ hpc.getStart()+" - "+ hpc.getEnd()+" of 
> "+hpc.getTotalAvailable());
>         for (int i = 0; i < sd.length; i++)
>         {
>             Document doc=s.doc(sd[i].doc);
>             System.out.println(sd[i].score +" "+doc.get("title"));
>         }
>         
>         
>         s.close();
>     }
> 
>     int nDocs;
>     PriorityQueue hq;
>     float minScore = 0.0f;
>     int totalHits = 0;
>     int start;
>     int maxNumHits;
>     int totalInThisPage;
> 
>     public HitPageCollector(int start, int maxNumHits)
>     {
>         this.nDocs = start + maxNumHits;
>         this.start = start;
>         this.maxNumHits = maxNumHits;
>         hq = new HitQueue(nDocs);
>     }
> 
>     public void collect(int doc, float score)
>     {
>         totalHits++;
>         if((hq.size()<nDocs)||(score >= minScore))
>         {
>             ScoreDoc scoreDoc = new ScoreDoc(doc,score);
>             hq.insert(scoreDoc);              // update hit queue
>             minScore = ((ScoreDoc)hq.top()).score; // reset minScore
>         }
>         totalInThisPage=hq.size();
>     }
>     
> 
>     public ScoreDoc[] getScores()
>     {
>         //just returns the number of hits required from the required start point
>         /*
>             So, given hits:
>                 1234567890
>             and a start of 2 + maxNumHits of 3 should return:
>                 234
>             or, given hits
>                 12
>             should return
>                 2
>             and so, on.
>         */
>         if (start <= 0)
>         {
>             throw new IllegalArgumentException("Invalid start :" + start+" - 
> start should be >=1");
>         }
>         int numReturned = Math.min(maxNumHits, (hq.size() - (start - 1)));
>         if (numReturned <= 0)
>         {
>             return new ScoreDoc[0];
>         }
>         ScoreDoc[] scoreDocs = new ScoreDoc[numReturned];
>         ScoreDoc scoreDoc;
>         for (int i = hq.size() - 1; i >= 0; i--) // put docs in array, working 
> backwards from lowest count
>         {
>             scoreDoc = (ScoreDoc) hq.pop();
>             if (i < (start - 1))
>             {
>                 break; //off the beginning of the results array
>             }
>             if (i < (scoreDocs.length + (start - 1)))
>             {
>                 scoreDocs[i - (start - 1)] = scoreDoc; //within scope of results 
> array
>             }
>         }
>         return scoreDocs;
>     }
> 
>     public int getTotalAvailable()
>     {
>         return totalHits;
>     }
> 
>     public int getStart()
>     {
>         return start;
>     }
>     
>     public int getEnd()
>     {
>         return start+totalInThisPage-1;
>     }
>     
>     public class HitQueue extends PriorityQueue 
>     {
>           public HitQueue(int size) 
>           {
>             initialize(size);
>           }
>           public final boolean lessThan(Object a, Object b) 
>           {
>             ScoreDoc hitA = (ScoreDoc)a;
>             ScoreDoc hitB = (ScoreDoc)b;
>             if (hitA.score == hitB.score)
>               return hitA.doc > hitB.doc;
>             else
>               return hitA.score < hitB.score;
>           }
>     }
> }
> 
> 
> 
> 
> 
> 
>       ___________________________________________________________ 
> Yahoo! Mail is the world's favourite email. Don't settle for less, sign up for
> your free account today 
> http://uk.rd.yahoo.com/evt=44106/*http://uk.docs.yahoo.com/mail/winter07.html 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28997-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 03 16:18:24 2007
Return-Path: <java-user-return-28997-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85168 invoked from network); 3 Jul 2007 16:18:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jul 2007 16:18:23 -0000
Received: (qmail 53998 invoked by uid 500); 3 Jul 2007 16:18:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53965 invoked by uid 500); 3 Jul 2007 16:18:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53954 invoked by uid 99); 3 Jul 2007 16:18:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 09:18:16 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of alixandresantana@gmail.com designates 209.85.132.242 as permitted sender)
Received: from [209.85.132.242] (HELO an-out-0708.google.com) (209.85.132.242)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 09:18:12 -0700
Received: by an-out-0708.google.com with SMTP id c5so445433anc
        for <java-user@lucene.apache.org>; Tue, 03 Jul 2007 09:17:52 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=FRxabf1WjHgOg/32ZZbD8q5aHxUFFjO4ivd3/AZouMTkQ4rzXT/L7YRxp08QH9i5w+rICEkSB7lyT7DJ+Put7HwqDvAf3aTvb76LFkx0vfVjZVxcsZs3etLP86QXzPvJAJXNKPru5dPAsDErkFz9fEsBOHKhQeDvHUU6BIIpQmU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=MdlhhOQqjlkaA5v/UB9YjNqypwf93C7lLcKq46QqhEkFe4uNdpLik2rSLy2uKNn15VXRW9wPRn2R0D6pWnc4+sXUxoPuj4NgOR2D6g6L/f2BBI6DjqCKcqoPsjUZP6Ayra9cS+gkD0tcLBeOD/3n9gLn5bj8mau0XAlmoABZ0ew=
Received: by 10.100.125.5 with SMTP id x5mr4404220anc.1183479471496;
        Tue, 03 Jul 2007 09:17:51 -0700 (PDT)
Received: by 10.100.196.17 with HTTP; Tue, 3 Jul 2007 09:17:51 -0700 (PDT)
Message-ID: <17dad8c10707030917r3c554d08q6fc2e193490ea4b5@mail.gmail.com>
Date: Tue, 3 Jul 2007 13:17:51 -0300
From: "Alixandre Santana" <alixandresantana@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Pagination
In-Reply-To: <649585.63120.qm@web26001.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <649585.63120.qm@web26001.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Mark,

Thanks for the code.

Well..I=B4m doing the same thing you are:

Retrieve some Doc IDs and then use the code
- Document doc=3Dsearcher.doc(sd[i].doc) - to get the Document itself.

But in this case, we are doing a search to get the IDs, and "n"
searches to get the Documents, which is not a good practice.

Is there another option of do it?

Alixandre


On 7/3/07, mark harwood <markharw00d@yahoo.co.uk> wrote:
> >>I get the ids then I do look the items in the database using select ite=
m.* from item where item.id in ( ids )
>
> Hmm. That's likely to confuse the already confused :)
> The ids referred to so far are Lucene internal document ids and are typic=
ally only meaningful to Lucene during a single IndexReader session. I would=
n't recommend storing them in a database because a Lucene document id can p=
oint to an entirely different document after deletes/updates are performed =
on the Lucene index and the IndexReader is reopened.
>
> For the avoidance of further confusion I have extended the "main" method =
in my previous example (reposted below in full) to include examples of
> 1) Retrieving document content
> 2) Retrieving a "next" page (starting from result 11)
> The values "1" and "11" used below in the calls to HitPageCollector const=
ructor define the page start. This value is typically something you would g=
et the client to pass to you e.g. note the number "10" in this URL http://w=
ww.google.com/search?q=3Dlucene&start=3D10 which is used to select results =
from "10" onwards. Note also that this URL http://www.google.com/search?q=
=3Dlucene&&start=3D10000 does not work because Google have placed a restric=
tion on the maximum value for "start" - you should too.
>
> Cheers
> Mark
>
>
> package lucene.pagination;
>
> import org.apache.lucene.document.Document;
> import org.apache.lucene.index.Term;
> import org.apache.lucene.search.HitCollector;
> import org.apache.lucene.search.IndexSearcher;
> import org.apache.lucene.search.Query;
> import org.apache.lucene.search.ScoreDoc;
> import org.apache.lucene.search.TermQuery;
> import org.apache.lucene.util.PriorityQueue;
>
> /**
>  * A HitCollector that retrieves a specific page of results
>  * @author maharwood
>  */
> public class HitPageCollector extends HitCollector
> {
>     //Demo code showing pagination
>     public static void main(String[] args) throws Exception
>     {
>         IndexSearcher s=3Dnew IndexSearcher("/indexes/nasa");
>         Query q=3Dnew TermQuery(new Term("contents","sea"));
>
>         //Retrieve page 1  (hits 1-10)
>         HitPageCollector hpc=3Dnew HitPageCollector(1,10);
>         s.search(q,hpc);
>         ScoreDoc[] sd =3D hpc.getScores();
>         System.out.println("Hits "+ hpc.getStart()+" - "+ hpc.getEnd()+" =
of "+hpc.getTotalAvailable());
>         for (int i =3D 0; i < sd.length; i++)
>         {
>             Document doc=3Ds.doc(sd[i].doc);
>             System.out.println(sd[i].score +" "+doc.get("title"));
>         }
>
>         //Example retrieve page 2 (hits 11-20)
>         hpc=3Dnew HitPageCollector(11,10);
>         s.search(q,hpc);
>         sd =3D hpc.getScores();
>         System.out.println("Hits "+ hpc.getStart()+" - "+ hpc.getEnd()+" =
of "+hpc.getTotalAvailable());
>         for (int i =3D 0; i < sd.length; i++)
>         {
>             Document doc=3Ds.doc(sd[i].doc);
>             System.out.println(sd[i].score +" "+doc.get("title"));
>         }
>
>
>         s.close();
>     }
>
>     int nDocs;
>     PriorityQueue hq;
>     float minScore =3D 0.0f;
>     int totalHits =3D 0;
>     int start;
>     int maxNumHits;
>     int totalInThisPage;
>
>     public HitPageCollector(int start, int maxNumHits)
>     {
>         this.nDocs =3D start + maxNumHits;
>         this.start =3D start;
>         this.maxNumHits =3D maxNumHits;
>         hq =3D new HitQueue(nDocs);
>     }
>
>     public void collect(int doc, float score)
>     {
>         totalHits++;
>         if((hq.size()<nDocs)||(score >=3D minScore))
>         {
>             ScoreDoc scoreDoc =3D new ScoreDoc(doc,score);
>             hq.insert(scoreDoc);              // update hit queue
>             minScore =3D ((ScoreDoc)hq.top()).score; // reset minScore
>         }
>         totalInThisPage=3Dhq.size();
>     }
>
>
>     public ScoreDoc[] getScores()
>     {
>         //just returns the number of hits required from the required star=
t point
>         /*
>             So, given hits:
>                 1234567890
>             and a start of 2 + maxNumHits of 3 should return:
>                 234
>             or, given hits
>                 12
>             should return
>                 2
>             and so, on.
>         */
>         if (start <=3D 0)
>         {
>             throw new IllegalArgumentException("Invalid start :" + start+=
" - start should be >=3D1");
>         }
>         int numReturned =3D Math.min(maxNumHits, (hq.size() - (start - 1)=
));
>         if (numReturned <=3D 0)
>         {
>             return new ScoreDoc[0];
>         }
>         ScoreDoc[] scoreDocs =3D new ScoreDoc[numReturned];
>         ScoreDoc scoreDoc;
>         for (int i =3D hq.size() - 1; i >=3D 0; i--) // put docs in array=
, working backwards from lowest count
>         {
>             scoreDoc =3D (ScoreDoc) hq.pop();
>             if (i < (start - 1))
>             {
>                 break; //off the beginning of the results array
>             }
>             if (i < (scoreDocs.length + (start - 1)))
>             {
>                 scoreDocs[i - (start - 1)] =3D scoreDoc; //within scope o=
f results array
>             }
>         }
>         return scoreDocs;
>     }
>
>     public int getTotalAvailable()
>     {
>         return totalHits;
>     }
>
>     public int getStart()
>     {
>         return start;
>     }
>
>     public int getEnd()
>     {
>         return start+totalInThisPage-1;
>     }
>
>     public class HitQueue extends PriorityQueue
>     {
>           public HitQueue(int size)
>           {
>             initialize(size);
>           }
>           public final boolean lessThan(Object a, Object b)
>           {
>             ScoreDoc hitA =3D (ScoreDoc)a;
>             ScoreDoc hitB =3D (ScoreDoc)b;
>             if (hitA.score =3D=3D hitB.score)
>               return hitA.doc > hitB.doc;
>             else
>               return hitA.score < hitB.score;
>           }
>     }
> }
>
>
>
>
>
>
>       ___________________________________________________________
> Yahoo! Mail is the world's favourite email. Don't settle for less, sign u=
p for
> your free account today http://uk.rd.yahoo.com/evt=3D44106/*http://uk.doc=
s.yahoo.com/mail/winter07.html
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
Alixandre Santana

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28998-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 03 16:47:21 2007
Return-Path: <java-user-return-28998-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98244 invoked from network); 3 Jul 2007 16:47:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jul 2007 16:47:19 -0000
Received: (qmail 26219 invoked by uid 500); 3 Jul 2007 16:47:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26177 invoked by uid 500); 3 Jul 2007 16:47:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26166 invoked by uid 99); 3 Jul 2007 16:47:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 09:47:14 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.213] (HELO web26002.mail.ukl.yahoo.com) (217.12.10.213)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 03 Jul 2007 09:47:10 -0700
Received: (qmail 66782 invoked by uid 60001); 3 Jul 2007 16:46:48 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=W6d4VVUsm4XEaZrJQHwKZU/PfWZra+yat93Q+Yl7UqAWu1dOu+4bG/WnPEixyGbPbWV+JEUVApJB1y/dYYP7nYoafsfkgSsjdzUU12VBtSzF6Lx3QPcuwtNypo8kDaTnBCeAeAnwWuzcI0kTe/+Gq+fVvqoAKIIipPz1JmH4y9k=;
X-YMail-OSG: GS5In4sVM1lRUObMPGFZGuEUxDPgGvQkEa9FnV.6BoexI8bxTDGO1Ul3N0cpxQpnI.y.NTQPWcmivadDP64F_G1G1ogin1M9sNnbg7qrBq8cXlQX
Received: from [193.36.230.96] by web26002.mail.ukl.yahoo.com via HTTP; Tue, 03 Jul 2007 16:46:48 GMT
X-Mailer: YahooMailRC/651.38 YahooMailWebService/0.7.41.16
Date: Tue, 3 Jul 2007 16:46:48 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Pagination
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <167782.65023.qm@web26002.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

>>and "n" searches to get the Documents,=0A???=0AWhere does the "n" come in=
? searcher.doc(id) is not a search. It is a call to IndexReader.document() =
to retrieve a specific document. =0ATry run it. It shouldn't be slow.=0A=0A=
=0A=0A----- Original Message ----=0AFrom: Alixandre Santana <alixandresanta=
na@gmail.com>=0ATo: java-user@lucene.apache.org=0ASent: Tuesday, 3 July, 20=
07 5:17:51 PM=0ASubject: Re: Pagination=0A=0AMark,=0A=0AThanks for the code=
.=0A=0AWell..I=B4m doing the same thing you are:=0A=0ARetrieve some Doc IDs=
 and then use the code=0A- Document doc=3Dsearcher.doc(sd[i].doc) - to get =
the Document itself.=0A=0ABut in this case, we are doing a search to get th=
e IDs, and "n"=0Asearches to get the Documents, which is not a good practic=
e.=0A=0AIs there another option of do it?=0A=0AAlixandre=0A=0A=0AOn 7/3/07,=
 mark harwood <markharw00d@yahoo.co.uk> wrote:=0A> >>I get the ids then I d=
o look the items in the database using select item.* from item where item.i=
d in ( ids )=0A>=0A> Hmm. That's likely to confuse the already confused :)=
=0A> The ids referred to so far are Lucene internal document ids and are ty=
pically only meaningful to Lucene during a single IndexReader session. I wo=
uldn't recommend storing them in a database because a Lucene document id ca=
n point to an entirely different document after deletes/updates are perform=
ed on the Lucene index and the IndexReader is reopened.=0A>=0A> For the avo=
idance of further confusion I have extended the "main" method in my previou=
s example (reposted below in full) to include examples of=0A> 1) Retrieving=
 document content=0A> 2) Retrieving a "next" page (starting from result 11)=
=0A> The values "1" and "11" used below in the calls to HitPageCollector co=
nstructor define the page start. This value is typically something you woul=
d get the client to pass to you e.g. note the number "10" in this URL http:=
//www.google.com/search?q=3Dlucene&start=3D10 which is used to select resul=
ts from "10" onwards. Note also that this URL http://www.google.com/search?=
q=3Dlucene&&start=3D10000 does not work because Google have placed a restri=
ction on the maximum value for "start" - you should too.=0A>=0A> Cheers=0A>=
 Mark=0A>=0A>=0A> package lucene.pagination;=0A>=0A> import org.apache.luce=
ne.document.Document;=0A> import org.apache.lucene.index.Term;=0A> import o=
rg.apache.lucene.search.HitCollector;=0A> import org.apache.lucene.search.I=
ndexSearcher;=0A> import org.apache.lucene.search.Query;=0A> import org.apa=
che.lucene.search.ScoreDoc;=0A> import org.apache.lucene.search.TermQuery;=
=0A> import org.apache.lucene.util.PriorityQueue;=0A>=0A> /**=0A>  * A HitC=
ollector that retrieves a specific page of results=0A>  * @author maharwood=
=0A>  */=0A> public class HitPageCollector extends HitCollector=0A> {=0A>  =
   //Demo code showing pagination=0A>     public static void main(String[] =
args) throws Exception=0A>     {=0A>         IndexSearcher s=3Dnew IndexSea=
rcher("/indexes/nasa");=0A>         Query q=3Dnew TermQuery(new Term("conte=
nts","sea"));=0A>=0A>         //Retrieve page 1  (hits 1-10)=0A>         Hi=
tPageCollector hpc=3Dnew HitPageCollector(1,10);=0A>         s.search(q,hpc=
);=0A>         ScoreDoc[] sd =3D hpc.getScores();=0A>         System.out.pr=
intln("Hits "+ hpc.getStart()+" - "+ hpc.getEnd()+" of "+hpc.getTotalAvaila=
ble());=0A>         for (int i =3D 0; i < sd.length; i++)=0A>         {=0A>=
             Document doc=3Ds.doc(sd[i].doc);=0A>             System.out.pr=
intln(sd[i].score +" "+doc.get("title"));=0A>         }=0A>=0A>         //E=
xample retrieve page 2 (hits 11-20)=0A>         hpc=3Dnew HitPageCollector(=
11,10);=0A>         s.search(q,hpc);=0A>         sd =3D hpc.getScores();=0A=
>         System.out.println("Hits "+ hpc.getStart()+" - "+ hpc.getEnd()+" =
of "+hpc.getTotalAvailable());=0A>         for (int i =3D 0; i < sd.length;=
 i++)=0A>         {=0A>             Document doc=3Ds.doc(sd[i].doc);=0A>   =
          System.out.println(sd[i].score +" "+doc.get("title"));=0A>       =
  }=0A>=0A>=0A>         s.close();=0A>     }=0A>=0A>     int nDocs;=0A>    =
 PriorityQueue hq;=0A>     float minScore =3D 0.0f;=0A>     int totalHits =
=3D 0;=0A>     int start;=0A>     int maxNumHits;=0A>     int totalInThisPa=
ge;=0A>=0A>     public HitPageCollector(int start, int maxNumHits)=0A>     =
{=0A>         this.nDocs =3D start + maxNumHits;=0A>         this.start =3D=
 start;=0A>         this.maxNumHits =3D maxNumHits;=0A>         hq =3D new =
HitQueue(nDocs);=0A>     }=0A>=0A>     public void collect(int doc, float s=
core)=0A>     {=0A>         totalHits++;=0A>         if((hq.size()<nDocs)||=
(score >=3D minScore))=0A>         {=0A>             ScoreDoc scoreDoc =3D =
new ScoreDoc(doc,score);=0A>             hq.insert(scoreDoc);              =
// update hit queue=0A>             minScore =3D ((ScoreDoc)hq.top()).score=
; // reset minScore=0A>         }=0A>         totalInThisPage=3Dhq.size();=
=0A>     }=0A>=0A>=0A>     public ScoreDoc[] getScores()=0A>     {=0A>     =
    //just returns the number of hits required from the required start poin=
t=0A>         /*=0A>             So, given hits:=0A>                 123456=
7890=0A>             and a start of 2 + maxNumHits of 3 should return:=0A> =
                234=0A>             or, given hits=0A>                 12=
=0A>             should return=0A>                 2=0A>             and so=
, on.=0A>         */=0A>         if (start <=3D 0)=0A>         {=0A>       =
      throw new IllegalArgumentException("Invalid start :" + start+" - star=
t should be >=3D1");=0A>         }=0A>         int numReturned =3D Math.min=
(maxNumHits, (hq.size() - (start - 1)));=0A>         if (numReturned <=3D 0=
)=0A>         {=0A>             return new ScoreDoc[0];=0A>         }=0A>  =
       ScoreDoc[] scoreDocs =3D new ScoreDoc[numReturned];=0A>         Scor=
eDoc scoreDoc;=0A>         for (int i =3D hq.size() - 1; i >=3D 0; i--) // =
put docs in array, working backwards from lowest count=0A>         {=0A>   =
          scoreDoc =3D (ScoreDoc) hq.pop();=0A>             if (i < (start =
- 1))=0A>             {=0A>                 break; //off the beginning of t=
he results array=0A>             }=0A>             if (i < (scoreDocs.lengt=
h + (start - 1)))=0A>             {=0A>                 scoreDocs[i - (star=
t - 1)] =3D scoreDoc; //within scope of results array=0A>             }=0A>=
         }=0A>         return scoreDocs;=0A>     }=0A>=0A>     public int g=
etTotalAvailable()=0A>     {=0A>         return totalHits;=0A>     }=0A>=0A=
>     public int getStart()=0A>     {=0A>         return start;=0A>     }=
=0A>=0A>     public int getEnd()=0A>     {=0A>         return start+totalIn=
ThisPage-1;=0A>     }=0A>=0A>     public class HitQueue extends PriorityQue=
ue=0A>     {=0A>           public HitQueue(int size)=0A>           {=0A>   =
          initialize(size);=0A>           }=0A>           public final bool=
ean lessThan(Object a, Object b)=0A>           {=0A>             ScoreDoc h=
itA =3D (ScoreDoc)a;=0A>             ScoreDoc hitB =3D (ScoreDoc)b;=0A>    =
         if (hitA.score =3D=3D hitB.score)=0A>               return hitA.do=
c > hitB.doc;=0A>             else=0A>               return hitA.score < hi=
tB.score;=0A>           }=0A>     }=0A> }=0A>=0A>=0A>=0A>=0A>=0A>=0A>      =
 ___________________________________________________________=0A> Yahoo! Mai=
l is the world's favourite email. Don't settle for less, sign up for=0A> yo=
ur free account today http://uk.rd.yahoo.com/evt=3D44106/*http://uk.docs.ya=
hoo.com/mail/winter07.html=0A>=0A> ----------------------------------------=
-----------------------------=0A> To unsubscribe, e-mail: java-user-unsubsc=
ribe@lucene.apache.org=0A> For additional commands, e-mail: java-user-help@=
lucene.apache.org=0A>=0A>=0A=0A=0A-- =0AAlixandre Santana=0A=0A------------=
---------------------------------------------------------=0ATo unsubscribe,=
 e-mail: java-user-unsubscribe@lucene.apache.org=0AFor additional commands,=
 e-mail: java-user-help@lucene.apache.org=0A=0A=0A=0A=0A=0A=0A      _______=
____________________________________________________=0AYahoo! Answers - Got=
 a question? Someone out there knows the answer. Try it=0Anow.=0Ahttp://uk.=
answers.yahoo.com/ 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28999-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 03 17:41:13 2007
Return-Path: <java-user-return-28999-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14563 invoked from network); 3 Jul 2007 17:41:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jul 2007 17:41:11 -0000
Received: (qmail 44035 invoked by uid 500); 3 Jul 2007 17:41:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43998 invoked by uid 500); 3 Jul 2007 17:41:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43984 invoked by uid 99); 3 Jul 2007 17:41:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 10:41:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [64.81.62.48] (HELO mail01.apmindsf.com) (64.81.62.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 10:41:01 -0700
Received: from [172.30.250.105] (helo=[172.30.250.105])
	by mail01.apmindsf.com with esmtp (Exim 4.50)
	id 1I5mMG-0005zC-8h
	for java-user@lucene.apache.org; Tue, 03 Jul 2007 10:40:39 -0700
Message-ID: <468A8CBF.3090604@metaweb.com>
Date: Tue, 03 Jul 2007 10:51:59 -0700
From: Tim Sturge <tsturge@metaweb.com>
User-Agent: Mozilla Thunderbird 1.0.6 (X11/20050715)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: product based term combination for BooleanQuery?
References: <46899FF8.6060309@metaweb.com>
In-Reply-To: <46899FF8.6060309@metaweb.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I'm following myself up here to ask if anyone has experience or code 
with a BooleanQuery that weights the terms it encounters on a product 
basis rather than a sum basis.

This would effectively compute the geometric mean of the term score 
(rather than the arithmetic mean) and would give me more "middle bias". 
It also has the great advantage that it automatically implements AND (as 
something without the term has a score of 0.0 which causes the query to 
go to 0.0 as well.)

I'm curious though why this doesn't already exist. Is it a bad idea in 
general (that I will discover once I implement it and look at the 
results?) or does it make searching a lot slower?

Thanks,

Tim

Tim Sturge wrote:
> I have an index with two different sources of information, one small 
> but of high quality (call it "title"), and one large, but of lower 
> quality (call it "body").  I give boosts to certain documents related 
> to their popularity (this is very similar to what one would do 
> indexing the web).
>
> The problem I have is a query like "John Bush". I translate that into 
> " (title:John^4.0 body:John) AND (title:Bush^4.0 body:Bush) ". But the 
> results I get are:
>
> 1. George Bush
> ...
> 4. John Kerry
> ...
> 10. John Bush
>
> The reason is (looking at explain) that George Bush is scored:
> 169 = sum(
> 1 =  <match in body with tiny norm for "John">
> )
> 168 = sum(
>     160 = <title match for "Bush">
>     8 = <body match for "Bush">
> )
> )
>
> and John Kerry is similar but reversed. Poor old "John Bush" only scores:
>
> 72 = sum(
>  40 = (<title match for "John">+<body match>)
>  32 = (<title match for "Bush">+ <body match>)
> )
>
> because his initial boost was only 1/4 of George's.
>
> The question I have is, how can tell the searcher to care about 
> "balance"? I really want the score over 2 terms to be more like 
> (sqrt(X)+sqrt(Y))^2 or maybe even exp(log(X)+log(Y))  rather than just 
> X+Y. Is that supported in some obvious way, or is there some other way 
> to phrase my query to say "I want both terms but they should both be 
> important if possible?"
>
> Thanks,
>
> Tim
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29000-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 03 17:50:19 2007
Return-Path: <java-user-return-29000-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17426 invoked from network); 3 Jul 2007 17:50:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jul 2007 17:50:18 -0000
Received: (qmail 54960 invoked by uid 500); 3 Jul 2007 17:50:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54203 invoked by uid 500); 3 Jul 2007 17:50:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54192 invoked by uid 99); 3 Jul 2007 17:50:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 10:50:13 -0700
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jpsondag@gmail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO py-out-1112.google.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 10:50:09 -0700
Received: by py-out-1112.google.com with SMTP id f31so1658169pyh
        for <java-user@lucene.apache.org>; Tue, 03 Jul 2007 10:49:48 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:mime-version:content-type:x-google-sender-auth;
        b=FqT0BevB2aRhrUF0LbCVnhN62Mi9W+cz9gPkz+PASR9jOXA6JevmuHojYxYX06rXXP73i0PjLP7sa31CaC/EeTxCOjV5p21elCFU0ANlzi3x3CzhRrAZgn2/PAYbg+PIxiomhlaJYczTx3DmUPTU9CBc7PIOHshq0Rpq+2yuIq0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:mime-version:content-type:x-google-sender-auth;
        b=EhL3+pZ/FJ2fgfBESwOr7mb2c759KNUDVsi9EU4x2AhjzpMiSOtVlPfsmx8TC35x9fiHqUB9Igx2UJuV9W6SNU+8w2VrhOyypCpkCn2EQiZyY6QvxKzQWmgwJlBoLDiixl2v+YnWZtH3wK6QoG8O6s8RgM/YTdJOa/7Tn7yn+b4=
Received: by 10.65.234.2 with SMTP id l2mr11459023qbr.1183484988663;
        Tue, 03 Jul 2007 10:49:48 -0700 (PDT)
Received: by 10.65.203.18 with HTTP; Tue, 3 Jul 2007 10:49:48 -0700 (PDT)
Message-ID: <bd67edef0707031049v69dc004ev11f0ebe905a7c396@mail.gmail.com>
Date: Tue, 3 Jul 2007 12:49:48 -0500
From: "John Paul Sondag" <jsondag2@uiuc.edu>
Sender: jpsondag@gmail.com
To: java-user@lucene.apache.org
Subject: Retrieve nearest token based off location in original Text
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_57764_28412331.1183484988583"
X-Google-Sender-Auth: d368dc959bb00502
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_57764_28412331.1183484988583
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

I was wondering if it's possible to get the token offset based of the
position in the original text.

My problem is I'm working on my own "Snippet Generator" and I'm giving a
token index (call it t) as input and need to make a snippet of the original
text.  I want the Snippet to be some number of tokens (call it n tokens).
But to make the Snippet easier to read I want to see if it's close to the
end of a paragraph (if it is I'll make more of the Snippet before the token
than usual).  So I'm scanning the original text forward some number of
characters looking for a new line or tab.  If I find it I'd like to get the
token before that new line (and it's offset, call it y).  Once I have the
offset I know I have y - t tokens after my token, and finally I know I put
n-(y-t) tokens before my token and can successfully make my Snippet.

Thanks in advance!

--JP

------=_Part_57764_28412331.1183484988583--

From java-user-return-29001-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 03 17:52:47 2007
Return-Path: <java-user-return-29001-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18661 invoked from network); 3 Jul 2007 17:52:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jul 2007 17:52:27 -0000
Received: (qmail 62318 invoked by uid 500); 3 Jul 2007 17:52:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62289 invoked by uid 500); 3 Jul 2007 17:52:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62277 invoked by uid 99); 3 Jul 2007 17:52:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 10:52:20 -0700
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jattardi@gmail.com designates 209.85.146.178 as permitted sender)
Received: from [209.85.146.178] (HELO wa-out-1112.google.com) (209.85.146.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 10:52:16 -0700
Received: by wa-out-1112.google.com with SMTP id j40so3016201wah
        for <java-user@lucene.apache.org>; Tue, 03 Jul 2007 10:51:56 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=FWn9COarcSvYFvk3UdPrPDGjJ4BubAcewH+i2lB9k0YVF4cy9eWdNwST1pnFLm4QVoEhtFTPGks4NzBxKBo5dlLQEOPwT5cCnfEa8j2FdJHt8140H3rsDBBMidiU1r9K+rJk9YY3jGEatYM0Szvx8izvRKCWQsyyKWGN5X7mBMw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=qiojPA37U4DPFmHI/r1oYgChXlsI5iwXEl8IXIO6p2JiUeGLdOOWWOxTugi3NyQGv3oKeK35f857mjp9hYLpwA0R6ZS6OS8lCmSxpD8AVbzIkS1ZY5RJmclXK8/SKEjRYjP473B81hOjYgYp5My3ygyPBPEqSrgE25ewEJKJnhc=
Received: by 10.114.38.2 with SMTP id l2mr6385255wal.1183485116335;
        Tue, 03 Jul 2007 10:51:56 -0700 (PDT)
Received: by 10.114.39.16 with HTTP; Tue, 3 Jul 2007 10:51:56 -0700 (PDT)
Message-ID: <7a14509e0707031051x7f506c2fv88dd7715d82af903@mail.gmail.com>
Date: Tue, 3 Jul 2007 13:51:56 -0400
From: "Joe Attardi" <jattardi@gmail.com>
To: java-user@lucene.apache.org
Subject: IndexWriter.updateDocument(Term, Document) not removing old Document?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_95837_29880018.1183485116301"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_95837_29880018.1183485116301
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi everybody,

First-time poster here. I've got a search index that I am using to index
live Java objects. I create a Document with the appropriate fields and index
them. No problem. I am indexing objects of different types, so I have an
"id" field in each Document which consists of the object's class name
followed by a unique ID number, so for example
"com.mycompany.myapp.FooBar142". When the objects get updated, I make
a new Document and call
IndexWriter.updateDocument as follows:

IndexWriter indexWriter = new IndexWriter(INDEX_PATH, new
StandardAnalyzer(), false);
Document doc = buildDocumentFor(object);
Term term = new Term("id", "\"" + doc.get("id") + "\"");
indexWriter.updateDocument(term, doc);
indexWriter.close();

The call to update() goes off without any problems, and the new Document
gets added to the index. But when checking the index, I find that the old
Document still exists.

Am I missing something? The Javadoc for updateDocument states "Updates a
document by first deleting the document(s) containing term and then adding
the new document. The delete and then add are atomic as seen by a reader on
the same index (flush may happen only after the add)."

Thanks for your help..

-- 
Joe Attardi
jattardi@gmail.com
http://thinksincode.blogspot.com/

------=_Part_95837_29880018.1183485116301--

From java-user-return-29002-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 03 17:57:21 2007
Return-Path: <java-user-return-29002-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20715 invoked from network); 3 Jul 2007 17:57:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jul 2007 17:57:19 -0000
Received: (qmail 79671 invoked by uid 500); 3 Jul 2007 17:57:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79620 invoked by uid 500); 3 Jul 2007 17:57:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79605 invoked by uid 99); 3 Jul 2007 17:57:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 10:57:14 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mike.klaas@gmail.com designates 209.85.146.183 as permitted sender)
Received: from [209.85.146.183] (HELO wa-out-1112.google.com) (209.85.146.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 10:57:10 -0700
Received: by wa-out-1112.google.com with SMTP id j40so3018008wah
        for <java-user@lucene.apache.org>; Tue, 03 Jul 2007 10:56:50 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=ABVihSUm4W9UdTW8TKuhD++VMV7myl+YU7fUkeWXMzTXlJm/xT8SnuLliResHbtdcuQQUJ11qDLhU3eV2sDXYIA5MhPzTGVZEgDWTzQ0RX/IOvK/zDiIjC93+cbyzvZrmr36+BJPiQwkgldDDhbmsNjCO/ED2vUXGmBo7SpGBok=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=NC06wPnz1/9Kbd/6AL616V/tgY9H6UqIq1ggJuGA2Sn9h1C2NNTv143Xkt77A8ChO+sQirzE0kRoVWWwmVqu02h8IS2zr3YJCzN5kKMP4jPj5VnbMDAfcl59uBkPnLyXxihzpZGS/gmf+mKhUYrhShTsmntg8X9hTN/hHRbaNOw=
Received: by 10.114.168.1 with SMTP id q1mr6394919wae.1183485410179;
        Tue, 03 Jul 2007 10:56:50 -0700 (PDT)
Received: from ?192.168.1.109? ( [24.84.38.75])
        by mx.google.com with ESMTP id k26sm20332077waf.2007.07.03.10.56.48
        (version=TLSv1/SSLv3 cipher=OTHER);
        Tue, 03 Jul 2007 10:56:49 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <468A8CBF.3090604@metaweb.com>
References: <46899FF8.6060309@metaweb.com> <468A8CBF.3090604@metaweb.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <F301E8E3-3116-40D5-9C81-18F5409E3DBC@gmail.com>
Content-Transfer-Encoding: 7bit
From: Mike Klaas <mike.klaas@gmail.com>
Subject: Re: product based term combination for BooleanQuery?
Date: Tue, 3 Jul 2007 10:56:45 -0700
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Try out: http://issues.apache.org/jira/browse/LUCENE-850

If this is useful to you, be sure to add a comment to the issue.

-Mike

On 3-Jul-07, at 10:51 AM, Tim Sturge wrote:

> I'm following myself up here to ask if anyone has experience or  
> code with a BooleanQuery that weights the terms it encounters on a  
> product basis rather than a sum basis.
>
> This would effectively compute the geometric mean of the term score  
> (rather than the arithmetic mean) and would give me more "middle  
> bias". It also has the great advantage that it automatically  
> implements AND (as something without the term has a score of 0.0  
> which causes the query to go to 0.0 as well.)
>
> I'm curious though why this doesn't already exist. Is it a bad idea  
> in general (that I will discover once I implement it and look at  
> the results?) or does it make searching a lot slower?
>
> Thanks,
>
> Tim
>
> Tim Sturge wrote:
>> I have an index with two different sources of information, one  
>> small but of high quality (call it "title"), and one large, but of  
>> lower quality (call it "body").  I give boosts to certain  
>> documents related to their popularity (this is very similar to  
>> what one would do indexing the web).
>>
>> The problem I have is a query like "John Bush". I translate that  
>> into " (title:John^4.0 body:John) AND (title:Bush^4.0 body:Bush)  
>> ". But the results I get are:
>>
>> 1. George Bush
>> ...
>> 4. John Kerry
>> ...
>> 10. John Bush
>>
>> The reason is (looking at explain) that George Bush is scored:
>> 169 = sum(
>> 1 =  <match in body with tiny norm for "John">
>> )
>> 168 = sum(
>>     160 = <title match for "Bush">
>>     8 = <body match for "Bush">
>> )
>> )
>>
>> and John Kerry is similar but reversed. Poor old "John Bush" only  
>> scores:
>>
>> 72 = sum(
>>  40 = (<title match for "John">+<body match>)
>>  32 = (<title match for "Bush">+ <body match>)
>> )
>>
>> because his initial boost was only 1/4 of George's.
>>
>> The question I have is, how can tell the searcher to care about  
>> "balance"? I really want the score over 2 terms to be more like  
>> (sqrt(X)+sqrt(Y))^2 or maybe even exp(log(X)+log(Y))  rather than  
>> just X+Y. Is that supported in some obvious way, or is there some  
>> other way to phrase my query to say "I want both terms but they  
>> should both be important if possible?"
>>
>> Thanks,
>>
>> Tim
>>
>>
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29003-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 03 18:25:20 2007
Return-Path: <java-user-return-29003-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33705 invoked from network); 3 Jul 2007 18:25:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jul 2007 18:25:18 -0000
Received: (qmail 33211 invoked by uid 500); 3 Jul 2007 18:25:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33169 invoked by uid 500); 3 Jul 2007 18:25:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33158 invoked by uid 99); 3 Jul 2007 18:25:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 11:25:13 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [128.218.33.11] (HELO gossamer.ckm.ucsf.edu) (128.218.33.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 11:25:09 -0700
Received: from CKMPC08 (tikal.library.ucsf.edu [128.218.15.151])
	by gossamer.ckm.ucsf.edu (8.13.8/8.13.8) with ESMTP id l63IOinl017048
	for <java-user@lucene.apache.org>; Tue, 3 Jul 2007 11:24:48 -0700 (PDT)
From: "Renaud Waldura" <renaud.waldura@library.ucsf.edu>
To: <java-user@lucene.apache.org>
Subject: Lucene Wiki Editing Guidelines
Date: Tue, 3 Jul 2007 11:24:39 -0700
Message-ID: <002a01c7bd9f$6e32a110$970fda80@libraria.ucsf.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_002B_01C7BD64.C1D3C910"
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
Thread-Index: Ace9n2r8+pS7XIUoSZ2mA5NfcUSX1g==
X-Filter-Version: 1.15 (gossamer)
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_002B_01C7BD64.C1D3C910
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit

Regarding the Lucene Wiki, is there an editing policy or should I feel free
to change stuff as I see fit? E.g. I've added a page LuceneCaveats, and now
I want to edit http://wiki.apache.org/lucene-java/ConceptsAndDefinitions and
add a "Core Classes" section, and refactor that page. 
 
--Renaud
 

------=_NextPart_000_002B_01C7BD64.C1D3C910--



From java-user-return-29004-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 03 18:27:51 2007
Return-Path: <java-user-return-29004-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35533 invoked from network); 3 Jul 2007 18:27:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jul 2007 18:27:50 -0000
Received: (qmail 38868 invoked by uid 500); 3 Jul 2007 18:27:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38834 invoked by uid 500); 3 Jul 2007 18:27:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38823 invoked by uid 99); 3 Jul 2007 18:27:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 11:27:46 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.134.186 as permitted sender)
Received: from [209.85.134.186] (HELO mu-out-0910.google.com) (209.85.134.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 11:27:42 -0700
Received: by mu-out-0910.google.com with SMTP id g7so2293433muf
        for <java-user@lucene.apache.org>; Tue, 03 Jul 2007 11:27:19 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=m0Pd/KGRevxt8KKz1Yr42X8oUiOG8IkZGlopXd03CCJKLkzhXRCpVbvBsm29ltz2a5+KUkth4V8yC0Qfwwh48vIqYGfyJ+l6d5b4OzKlkJ1Wz2dzSKm2ebjUM5gbfaUgQaq87y9M/0lE8ZcOMsZRrF2bY/gks8jPrw0Tdnkw8ik=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=L0acgNi8Yqm0aeBD+rYIXRJTZfi93U6KLGQgrqGMYB38QswMeruFXv7ElBpj+bBFzzGZTVWWNt0+Hdz9RaQbYZtiMRGXsyD9PEjbFscTVpx6gxzchCRRdud319Q7tJIC2JYHAw/8WysiLwSvGeo7ILTyj1Ue7BPokFUIR0ffCYE=
Received: by 10.82.108.9 with SMTP id g9mr15949439buc.1183487238907;
        Tue, 03 Jul 2007 11:27:18 -0700 (PDT)
Received: by 10.82.167.12 with HTTP; Tue, 3 Jul 2007 11:27:18 -0700 (PDT)
Message-ID: <359a92830707031127yaf55f61i311737739ca127fe@mail.gmail.com>
Date: Tue, 3 Jul 2007 14:27:18 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexWriter.updateDocument(Term, Document) not removing old Document?
In-Reply-To: <7a14509e0707031051x7f506c2fv88dd7715d82af903@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_75899_6855302.1183487238887"
References: <7a14509e0707031051x7f506c2fv88dd7715d82af903@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_75899_6855302.1183487238887
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'm guessing that your problem is what gets indexed. What analyzer
are you using when indexing? One that breaks words apart on, say,
periods?

The way to check this would be to get a copy of Luke and examine
your index (or part thereof). Google (lucene luke). It'll help
greatly.

What is your evidence that the doc still exists? Have you closed/reopened
your reader before you check this? Remember that index changes aren't
visible for an already-opened reader.

Best
Erick

On 7/3/07, Joe Attardi <jattardi@gmail.com> wrote:
>
> Hi everybody,
>
> First-time poster here. I've got a search index that I am using to index
> live Java objects. I create a Document with the appropriate fields and
> index
> them. No problem. I am indexing objects of different types, so I have an
> "id" field in each Document which consists of the object's class name
> followed by a unique ID number, so for example
> "com.mycompany.myapp.FooBar142". When the objects get updated, I make
> a new Document and call
> IndexWriter.updateDocument as follows:
>
> IndexWriter indexWriter = new IndexWriter(INDEX_PATH, new
> StandardAnalyzer(), false);
> Document doc = buildDocumentFor(object);
> Term term = new Term("id", "\"" + doc.get("id") + "\"");
> indexWriter.updateDocument(term, doc);
> indexWriter.close();
>
> The call to update() goes off without any problems, and the new Document
> gets added to the index. But when checking the index, I find that the old
> Document still exists.
>
> Am I missing something? The Javadoc for updateDocument states "Updates a
> document by first deleting the document(s) containing term and then adding
> the new document. The delete and then add are atomic as seen by a reader
> on
> the same index (flush may happen only after the add)."
>
> Thanks for your help..
>
> --
> Joe Attardi
> jattardi@gmail.com
> http://thinksincode.blogspot.com/
>

------=_Part_75899_6855302.1183487238887--

From java-user-return-29005-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 03 18:35:33 2007
Return-Path: <java-user-return-29005-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38035 invoked from network); 3 Jul 2007 18:35:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jul 2007 18:35:32 -0000
Received: (qmail 48669 invoked by uid 500); 3 Jul 2007 18:35:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48632 invoked by uid 500); 3 Jul 2007 18:35:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48620 invoked by uid 99); 3 Jul 2007 18:35:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 11:35:27 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jattardi@gmail.com designates 209.85.146.183 as permitted sender)
Received: from [209.85.146.183] (HELO wa-out-1112.google.com) (209.85.146.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 11:35:23 -0700
Received: by wa-out-1112.google.com with SMTP id j40so3031808wah
        for <java-user@lucene.apache.org>; Tue, 03 Jul 2007 11:35:03 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=CXl5SvPbAOtyNRryBqzfcdPwCD3KaInZ9jb5vZbnl9GTFdFKHqAavavji/mH0EDvT/et04W5kUf5ggAoyTEVkUk2kLSRKqHCL/DcMRoEXtwl8OQLzRlADFrPNm9fEb5fiECVXSjGbJ8FnvR4Fh6vdO0N7UAxkBQG72XQ174EFo0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=a4UcT+3sPKjQ0LO+SvVeYkQ+hAkSD5sgQtTG3UIdAGfgSlqihgIKgtLWILJ7o+V/cHbPoxLBvVruL1DU0whXFyVVofC30vAGoSazj4MR8z+Y94wRpZNtUJW4rtiXa0BZI4DLzXX5OEzcfS3kZwJMbOVsRTMCb7JL5KsbfEH1g1Y=
Received: by 10.114.133.1 with SMTP id g1mr6424897wad.1183487702796;
        Tue, 03 Jul 2007 11:35:02 -0700 (PDT)
Received: by 10.114.39.16 with HTTP; Tue, 3 Jul 2007 11:35:02 -0700 (PDT)
Message-ID: <7a14509e0707031135u60f08713h309098de5ad6e917@mail.gmail.com>
Date: Tue, 3 Jul 2007 14:35:02 -0400
From: "Joe Attardi" <jattardi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexWriter.updateDocument(Term, Document) not removing old Document?
In-Reply-To: <359a92830707031127yaf55f61i311737739ca127fe@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_96465_17912729.1183487702536"
References: <7a14509e0707031051x7f506c2fv88dd7715d82af903@mail.gmail.com>
	 <359a92830707031127yaf55f61i311737739ca127fe@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_96465_17912729.1183487702536
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Erick,

I'm guessing that your problem is what gets indexed. What analyzer
> are you using when indexing? One that breaks words apart on, say,
> periods?

I am using the StandardAnalyzer. When I do a test query using Luke, it
returns the object I'm looking for. The query I use is:

id:"com.mycompany.myapp.FooBar 142"

and it returns my FooBar document with id 142.


> What is your evidence that the doc still exists? Have you closed/reopened
> your reader before you check this? Remember that index changes aren't
> visible for an already-opened reader.

I am creating a new IndexSearcher object every time I do a search.
But also, when I run the same query again in Luke after I do the update,
after reloading the index in Luke, it returns both objects.

------=_Part_96465_17912729.1183487702536--

From java-user-return-29006-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 03 18:57:42 2007
Return-Path: <java-user-return-29006-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45470 invoked from network); 3 Jul 2007 18:57:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jul 2007 18:57:40 -0000
Received: (qmail 83481 invoked by uid 500); 3 Jul 2007 18:57:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83308 invoked by uid 500); 3 Jul 2007 18:57:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83293 invoked by uid 99); 3 Jul 2007 18:57:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 11:57:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: unknown amxa:www.healthline.coma:mail.healthline.coma:mail.hl.locala:64-142-35-98.customer.sonic.neta:sfc-admin1.healthline.commx:mail.healthline.cominclude:sonic.net (herse.apache.org: encountered unrecognized mechanism during SPF processing of domain of jpump@healthline.com)
Received: from [64.142.35.101] (HELO mail.healthline.com) (64.142.35.101)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 11:57:30 -0700
Received: from [10.1.1.99] ([10.1.1.99]) by mail.healthline.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 3 Jul 2007 11:56:20 -0700
Message-ID: <468A9C03.30000@healthline.com>
Date: Tue, 03 Jul 2007 11:57:07 -0700
From: Jason Pump <jason@healthline.com>
User-Agent: Thunderbird 2.0.0.4 (X11/20070604)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: product based term combination for BooleanQuery?
References: <46899FF8.6060309@metaweb.com> <468A8CBF.3090604@metaweb.com>
In-Reply-To: <468A8CBF.3090604@metaweb.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 03 Jul 2007 18:56:20.0062 (UTC) FILETIME=[D7C417E0:01C7BDA3]
X-Virus-Checked: Checked by ClamAV on apache.org

You're not using any type of phrase search. Try ->

( (title:"John Bush"^4.0) OR (body:"John Bush") ) AND ( (title:John^4.0 
body:John) AND (title:Bush^4.0 body:Bush) )

or maybe

( (title:"John Bush"~4^4.0) OR (body:"John Bush"~4) ) AND ( 
(title:John^4.0 body:John) AND (title:Bush^4.0 body:Bush) )



Tim Sturge wrote:
> I'm following myself up here to ask if anyone has experience or code 
> with a BooleanQuery that weights the terms it encounters on a product 
> basis rather than a sum basis.
>
> This would effectively compute the geometric mean of the term score 
> (rather than the arithmetic mean) and would give me more "middle 
> bias". It also has the great advantage that it automatically 
> implements AND (as something without the term has a score of 0.0 which 
> causes the query to go to 0.0 as well.)
>
> I'm curious though why this doesn't already exist. Is it a bad idea in 
> general (that I will discover once I implement it and look at the 
> results?) or does it make searching a lot slower?
>
> Thanks,
>
> Tim
>
> Tim Sturge wrote:
>> I have an index with two different sources of information, one small 
>> but of high quality (call it "title"), and one large, but of lower 
>> quality (call it "body").  I give boosts to certain documents related 
>> to their popularity (this is very similar to what one would do 
>> indexing the web).
>>
>> The problem I have is a query like "John Bush". I translate that into 
>> " (title:John^4.0 body:John) AND (title:Bush^4.0 body:Bush) ". But 
>> the results I get are:
>>
>> 1. George Bush
>> ...
>> 4. John Kerry
>> ...
>> 10. John Bush
>>
>> The reason is (looking at explain) that George Bush is scored:
>> 169 = sum(
>> 1 =  <match in body with tiny norm for "John">
>> )
>> 168 = sum(
>>     160 = <title match for "Bush">
>>     8 = <body match for "Bush">
>> )
>> )
>>
>> and John Kerry is similar but reversed. Poor old "John Bush" only 
>> scores:
>>
>> 72 = sum(
>>  40 = (<title match for "John">+<body match>)
>>  32 = (<title match for "Bush">+ <body match>)
>> )
>>
>> because his initial boost was only 1/4 of George's.
>>
>> The question I have is, how can tell the searcher to care about 
>> "balance"? I really want the score over 2 terms to be more like 
>> (sqrt(X)+sqrt(Y))^2 or maybe even exp(log(X)+log(Y))  rather than 
>> just X+Y. Is that supported in some obvious way, or is there some 
>> other way to phrase my query to say "I want both terms but they 
>> should both be important if possible?"
>>
>> Thanks,
>>
>> Tim
>>
>>
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29007-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 03 19:09:32 2007
Return-Path: <java-user-return-29007-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50159 invoked from network); 3 Jul 2007 19:09:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jul 2007 19:09:31 -0000
Received: (qmail 4048 invoked by uid 500); 3 Jul 2007 19:09:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4015 invoked by uid 500); 3 Jul 2007 19:09:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4004 invoked by uid 99); 3 Jul 2007 19:09:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 12:09:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [64.81.62.48] (HELO mail01.apmindsf.com) (64.81.62.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 12:09:21 -0700
Received: from [172.30.250.105] (helo=[172.30.250.105])
	by mail01.apmindsf.com with esmtp (Exim 4.50)
	id 1I5nk4-0002RL-7A
	for java-user@lucene.apache.org; Tue, 03 Jul 2007 12:08:59 -0700
Message-ID: <468AA187.4010409@metaweb.com>
Date: Tue, 03 Jul 2007 12:20:39 -0700
From: Tim Sturge <tsturge@metaweb.com>
User-Agent: Mozilla Thunderbird 1.0.6 (X11/20050715)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: product based term combination for BooleanQuery?
References: <46899FF8.6060309@metaweb.com> <468A8CBF.3090604@metaweb.com> <468A9C03.30000@healthline.com>
In-Reply-To: <468A9C03.30000@healthline.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

That's true, but it's not clear that I want phrase matches. Consider for 
example:

"Lucene Download" as a query. I want something that strongly references 
"Lucene" (in the title) and strongly references "Download" but "Download 
Lucene" or "Lucene Project Download" are better than some page that 
happens to contain the exact phrase.

Other examples are "camera review" or "Gonzales scandal"; there's a 
whole class of "subject <modifier>" queries that are not really phrase 
based, and my corpus isn't large enough to necessarily contain the 
phrase anyway.

I agree that many two or three word queries are really best matched by 
phrases, but not all. Is it common to use a phrase query with high slop 
to overcome the unequal weighting problem?

Also, my interface does support "\"John Bush\"" (ie the user can quote 
the phrase if they like) and I would prefer not to infer automatically 
that they meant to do so.

Tim

Jason Pump wrote:
> You're not using any type of phrase search. Try ->
>
> ( (title:"John Bush"^4.0) OR (body:"John Bush") ) AND ( 
> (title:John^4.0 body:John) AND (title:Bush^4.0 body:Bush) )
>
> or maybe
>
> ( (title:"John Bush"~4^4.0) OR (body:"John Bush"~4) ) AND ( 
> (title:John^4.0 body:John) AND (title:Bush^4.0 body:Bush) )
>
>
>
> Tim Sturge wrote:
>> I'm following myself up here to ask if anyone has experience or code 
>> with a BooleanQuery that weights the terms it encounters on a product 
>> basis rather than a sum basis.
>>
>> This would effectively compute the geometric mean of the term score 
>> (rather than the arithmetic mean) and would give me more "middle 
>> bias". It also has the great advantage that it automatically 
>> implements AND (as something without the term has a score of 0.0 
>> which causes the query to go to 0.0 as well.)
>>
>> I'm curious though why this doesn't already exist. Is it a bad idea 
>> in general (that I will discover once I implement it and look at the 
>> results?) or does it make searching a lot slower?
>>
>> Thanks,
>>
>> Tim
>>
>> Tim Sturge wrote:
>>> I have an index with two different sources of information, one small 
>>> but of high quality (call it "title"), and one large, but of lower 
>>> quality (call it "body").  I give boosts to certain documents 
>>> related to their popularity (this is very similar to what one would 
>>> do indexing the web).
>>>
>>> The problem I have is a query like "John Bush". I translate that 
>>> into " (title:John^4.0 body:John) AND (title:Bush^4.0 body:Bush) ". 
>>> But the results I get are:
>>>
>>> 1. George Bush
>>> ...
>>> 4. John Kerry
>>> ...
>>> 10. John Bush
>>>
>>> The reason is (looking at explain) that George Bush is scored:
>>> 169 = sum(
>>> 1 =  <match in body with tiny norm for "John">
>>> )
>>> 168 = sum(
>>>     160 = <title match for "Bush">
>>>     8 = <body match for "Bush">
>>> )
>>> )
>>>
>>> and John Kerry is similar but reversed. Poor old "John Bush" only 
>>> scores:
>>>
>>> 72 = sum(
>>>  40 = (<title match for "John">+<body match>)
>>>  32 = (<title match for "Bush">+ <body match>)
>>> )
>>>
>>> because his initial boost was only 1/4 of George's.
>>>
>>> The question I have is, how can tell the searcher to care about 
>>> "balance"? I really want the score over 2 terms to be more like 
>>> (sqrt(X)+sqrt(Y))^2 or maybe even exp(log(X)+log(Y))  rather than 
>>> just X+Y. Is that supported in some obvious way, or is there some 
>>> other way to phrase my query to say "I want both terms but they 
>>> should both be important if possible?"
>>>
>>> Thanks,
>>>
>>> Tim
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29008-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 03 19:34:05 2007
Return-Path: <java-user-return-29008-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73236 invoked from network); 3 Jul 2007 19:34:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jul 2007 19:34:04 -0000
Received: (qmail 53196 invoked by uid 500); 3 Jul 2007 19:33:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53173 invoked by uid 500); 3 Jul 2007 19:33:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53162 invoked by uid 99); 3 Jul 2007 19:33:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 12:33:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.74] (HELO spunkymail-a7.g.dreamhost.com) (208.97.132.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 12:33:54 -0700
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a7.g.dreamhost.com (Postfix) with ESMTP id 8EA025C2FE
	for <java-user@lucene.apache.org>; Tue,  3 Jul 2007 12:33:31 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <002a01c7bd9f$6e32a110$970fda80@libraria.ucsf.edu>
References: <002a01c7bd9f$6e32a110$970fda80@libraria.ucsf.edu>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <8D3EAB61-80C6-4F27-8355-AADFCA6D3F9F@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Lucene Wiki Editing Guidelines
Date: Tue, 3 Jul 2007 15:33:31 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Sounds like a welcome addition!  I don't know of any guidelines other  
than the general community ones about behaving nicely, don't spam,  
etc. :-)


On Jul 3, 2007, at 2:24 PM, Renaud Waldura wrote:

> Regarding the Lucene Wiki, is there an editing policy or should I  
> feel free
> to change stuff as I see fit? E.g. I've added a page LuceneCaveats,  
> and now
> I want to edit http://wiki.apache.org/lucene-java/ 
> ConceptsAndDefinitions and
> add a "Core Classes" section, and refactor that page.
>
> --Renaud
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29009-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 03 20:28:25 2007
Return-Path: <java-user-return-29009-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94898 invoked from network); 3 Jul 2007 20:28:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jul 2007 20:28:23 -0000
Received: (qmail 70593 invoked by uid 500); 3 Jul 2007 20:27:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70373 invoked by uid 500); 3 Jul 2007 20:27:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70308 invoked by uid 99); 3 Jul 2007 20:27:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 13:27:53 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of grant.ingersoll@gmail.com designates 209.85.132.246 as permitted sender)
Received: from [209.85.132.246] (HELO an-out-0708.google.com) (209.85.132.246)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 13:27:49 -0700
Received: by an-out-0708.google.com with SMTP id c5so463376anc
        for <java-user@lucene.apache.org>; Tue, 03 Jul 2007 13:27:28 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=blGOf1QnRgn1zg0ZYQRMnC99agkX6s7uBBw77inyEhS/qnDuPs52QEk0jyHcFcq6z6GpdF0PQc8g+zSlsBO5ZAe8Ye6Yes72nnwE08yMQVYOQFsexDnK4bzKI6LUASqIYDnAM583HGjs/x6Ns0JYCUdtcXbwxCIBPFYoDbPnrMo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=n5/2DyL428yOtGf4MtTdhNUGRW3q6QgHutngK4/hs4puYiv6Y7rjRD4CVqKLNV0JtOd3cVTmdQn/v38SkyEWJnCDeejbnRrLcWuny7Ilx9MAxiDcxN+mJ8r3IsT71LiEBNvRLwubOifp/S3rvB+IjJQjtP85J9707RJMBoAT6T4=
Received: by 10.100.112.19 with SMTP id k19mr4522830anc.1183494448289;
        Tue, 03 Jul 2007 13:27:28 -0700 (PDT)
Received: from ?192.168.0.2? ( [74.229.189.244])
        by mx.google.com with ESMTP id d21sm21051642and.2007.07.03.13.27.27
        (version=TLSv1/SSLv3 cipher=OTHER);
        Tue, 03 Jul 2007 13:27:27 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <468AA187.4010409@metaweb.com>
References: <46899FF8.6060309@metaweb.com> <468A8CBF.3090604@metaweb.com> <468A9C03.30000@healthline.com> <468AA187.4010409@metaweb.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <5E71DC0E-2E19-4CC4-92B0-AAB926941D43@gmail.com>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <grant.ingersoll@gmail.com>
Subject: Re: product based term combination for BooleanQuery?
Date: Tue, 3 Jul 2007 16:27:25 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

When you do an explain on these results, what are all the factors  
that contribute to the score?

Could you increase the coord() factor in a custom Similarity  
implementation, to give a bigger boost to documents that have more  
matching terms?  The point of coord is to give a little bump to those  
docs that have more terms from the query in a given document.  Sounds  
like you want a bigger bump once you have multiple query terms in a  
document.  Would this work for you?

Also, below...

On Jul 3, 2007, at 3:20 PM, Tim Sturge wrote:

> That's true, but it's not clear that I want phrase matches.  
> Consider for example:
>
> "Lucene Download" as a query. I want something that strongly  
> references "Lucene" (in the title) and strongly references  
> "Download" but "Download Lucene" or "Lucene Project Download" are  
> better than some page that happens to contain the exact phrase.

Not sure I follow you here.  By strongly references, do you mean  
there are multiple occurrences of Download?  Why would those  
alternatives be better than an exact phrase match?

>
> Other examples are "camera review" or "Gonzales scandal"; there's a  
> whole class of "subject <modifier>" queries that are not really  
> phrase based, and my corpus isn't large enough to necessarily  
> contain the phrase anyway.
>
> I agree that many two or three word queries are really best matched  
> by phrases, but not all. Is it common to use a phrase query with  
> high slop to overcome the unequal weighting problem?
>
> Also, my interface does support "\"John Bush\"" (ie the user can  
> quote the phrase if they like) and I would prefer not to infer  
> automatically that they meant to do so.
>
> Tim
>
> Jason Pump wrote:
>> You're not using any type of phrase search. Try ->
>>
>> ( (title:"John Bush"^4.0) OR (body:"John Bush") ) AND  
>> ( (title:John^4.0 body:John) AND (title:Bush^4.0 body:Bush) )
>>
>> or maybe
>>
>> ( (title:"John Bush"~4^4.0) OR (body:"John Bush"~4) ) AND  
>> ( (title:John^4.0 body:John) AND (title:Bush^4.0 body:Bush) )
>>
>>
>>
>> Tim Sturge wrote:
>>> I'm following myself up here to ask if anyone has experience or  
>>> code with a BooleanQuery that weights the terms it encounters on  
>>> a product basis rather than a sum basis.
>>>
>>> This would effectively compute the geometric mean of the term  
>>> score (rather than the arithmetic mean) and would give me more  
>>> "middle bias". It also has the great advantage that it  
>>> automatically implements AND (as something without the term has a  
>>> score of 0.0 which causes the query to go to 0.0 as well.)
>>>
>>> I'm curious though why this doesn't already exist. Is it a bad  
>>> idea in general (that I will discover once I implement it and  
>>> look at the results?) or does it make searching a lot slower?
>>>
>>> Thanks,
>>>
>>> Tim
>>>
>>> Tim Sturge wrote:
>>>> I have an index with two different sources of information, one  
>>>> small but of high quality (call it "title"), and one large, but  
>>>> of lower quality (call it "body").  I give boosts to certain  
>>>> documents related to their popularity (this is very similar to  
>>>> what one would do indexing the web).
>>>>
>>>> The problem I have is a query like "John Bush". I translate that  
>>>> into " (title:John^4.0 body:John) AND (title:Bush^4.0 body:Bush)  
>>>> ". But the results I get are:
>>>>
>>>> 1. George Bush
>>>> ...
>>>> 4. John Kerry
>>>> ...
>>>> 10. John Bush
>>>>
>>>> The reason is (looking at explain) that George Bush is scored:
>>>> 169 = sum(
>>>> 1 =  <match in body with tiny norm for "John">
>>>> )
>>>> 168 = sum(
>>>>     160 = <title match for "Bush">
>>>>     8 = <body match for "Bush">
>>>> )
>>>> )
>>>>
>>>> and John Kerry is similar but reversed. Poor old "John Bush"  
>>>> only scores:
>>>>
>>>> 72 = sum(
>>>>  40 = (<title match for "John">+<body match>)
>>>>  32 = (<title match for "Bush">+ <body match>)
>>>> )
>>>>
>>>> because his initial boost was only 1/4 of George's.
>>>>
>>>> The question I have is, how can tell the searcher to care about  
>>>> "balance"? I really want the score over 2 terms to be more like  
>>>> (sqrt(X)+sqrt(Y))^2 or maybe even exp(log(X)+log(Y))  rather  
>>>> than just X+Y. Is that supported in some obvious way, or is  
>>>> there some other way to phrase my query to say "I want both  
>>>> terms but they should both be important if possible?"
>>>>
>>>> Thanks,
>>>>
>>>> Tim
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>> ------------------------------------------------------------------- 
>>>> --
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>
>>>
>>> -------------------------------------------------------------------- 
>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

------------------------------------------------------
Grant Ingersoll
http://www.grantingersoll.com/
http://lucene.grantingersoll.com
http://www.paperoftheweek.com/



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29010-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 03 20:39:36 2007
Return-Path: <java-user-return-29010-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96895 invoked from network); 3 Jul 2007 20:39:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jul 2007 20:39:35 -0000
Received: (qmail 91838 invoked by uid 500); 3 Jul 2007 20:39:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91556 invoked by uid 500); 3 Jul 2007 20:39:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91545 invoked by uid 99); 3 Jul 2007 20:39:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 13:39:30 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jattardi@gmail.com designates 64.233.162.235 as permitted sender)
Received: from [64.233.162.235] (HELO nz-out-0506.google.com) (64.233.162.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 13:39:26 -0700
Received: by nz-out-0506.google.com with SMTP id i28so903220nzi
        for <java-user@lucene.apache.org>; Tue, 03 Jul 2007 13:39:05 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ccdAzRzYpVacoMUR/CnOpqNApDJ4QBRKJlNLCA2rHCNea2cYwLtPYA24eZxOGqzhD3e5v4qcKtbh0U+mkoALS1Ozs2B6HwdwmnthsS11cDCbhFN39AAQu3bwWjzvTLkTjbbxuwcZfPLauR0MPsvYZ54GdGgGZ9pYXKdDa7OihqI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=tE7OyUx126gtePmIxA+LSJXWFxrCPwN/boM6Ni7WFKG9Ox9Ww0wrE9qoKNmXJAtsLZEtCef+5ZdV/jJeyGSKhFxr/UwVN3WN1p/Wc7IGEu5oTAZ6VHGF7MPSFnTZrFwuMYB+Ha5U+5odfpH5/9e/xuCC+dDhZhBZpQNzlFV4sc8=
Received: by 10.115.78.1 with SMTP id f1mr6582161wal.1183495144974;
        Tue, 03 Jul 2007 13:39:04 -0700 (PDT)
Received: by 10.114.39.16 with HTTP; Tue, 3 Jul 2007 13:39:04 -0700 (PDT)
Message-ID: <7a14509e0707031339j1c4a19b1s8a68116b53ec86b@mail.gmail.com>
Date: Tue, 3 Jul 2007 16:39:04 -0400
From: "Joe Attardi" <jattardi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexWriter.updateDocument(Term, Document) not removing old Document?
In-Reply-To: <7a14509e0707031135u60f08713h309098de5ad6e917@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_97414_26966203.1183495144949"
References: <7a14509e0707031051x7f506c2fv88dd7715d82af903@mail.gmail.com>
	 <359a92830707031127yaf55f61i311737739ca127fe@mail.gmail.com>
	 <7a14509e0707031135u60f08713h309098de5ad6e917@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_97414_26966203.1183495144949
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Update on my problem.. it looks like I am having the same problem with
deleteDocuments that I am with updateDocument. Not sure why it's not
working, though. I'm using the StandardAnalyzer, as I mentioned. Are there
any other things that I might want to check that would keep this from
working?

Thanks...

-- 
Joe Attardi
jattardi@gmail.com
http://thinksincode.blogspot.com/

On 7/3/07, Joe Attardi <jattardi@gmail.com> wrote:
>
> Hi Erick,
>
> I'm guessing that your problem is what gets indexed. What analyzer
> > are you using when indexing? One that breaks words apart on, say,
> > periods?
>
> I am using the StandardAnalyzer. When I do a test query using Luke, it
> returns the object I'm looking for. The query I use is:
>
> id:"com.mycompany.myapp.FooBar 142"
>
> and it returns my FooBar document with id 142.
>
>
> > What is your evidence that the doc still exists? Have you
> > closed/reopened
> > your reader before you check this? Remember that index changes aren't
> > visible for an already-opened reader.
>
> I am creating a new IndexSearcher object every time I do a search.
> But also, when I run the same query again in Luke after I do the update,
> after reloading the index in Luke, it returns both objects.
>
>

------=_Part_97414_26966203.1183495144949--

From java-user-return-29011-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 03 20:57:53 2007
Return-Path: <java-user-return-29011-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7423 invoked from network); 3 Jul 2007 20:57:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jul 2007 20:57:52 -0000
Received: (qmail 21315 invoked by uid 500); 3 Jul 2007 20:57:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21264 invoked by uid 500); 3 Jul 2007 20:57:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21252 invoked by uid 99); 3 Jul 2007 20:57:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 13:57:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.150] (HELO rescomp.berkeley.edu) (169.229.70.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 13:57:42 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 7EC625B76E; Tue,  3 Jul 2007 13:57:21 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 5F16D7F403
	for <java-user@lucene.apache.org>; Tue,  3 Jul 2007 13:57:21 -0700 (PDT)
Date: Tue, 3 Jul 2007 13:57:21 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: IndexWriter.updateDocument(Term, Document) not removing old
 Document?
In-Reply-To: <7a14509e0707031135u60f08713h309098de5ad6e917@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0707031354060.4649@hal.rescomp.berkeley.edu>
References: <7a14509e0707031051x7f506c2fv88dd7715d82af903@mail.gmail.com> 
 <359a92830707031127yaf55f61i311737739ca127fe@mail.gmail.com>
 <7a14509e0707031135u60f08713h309098de5ad6e917@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


It sounds like your problem is that your id field is analyzed and as a
result contains more then one token per document ... both the
deleteDocument and updateDocument methods that take in a Term only remove
documents that have that exact Term in them.

You need to add your documents with the "id" field as UN_TOKENIZED in the
first place, and then updateDocument and deleteDocument should work (note:
your use of "\"" in building your Term also looks suspicious, like you
expect ther Term text to be analyzed into a phrase .... it's not, it's
literal term text).

: id:"com.mycompany.myapp.FooBar 142"

: Term term = new Term("id", "\"" + doc.get("id") + "\"");




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29012-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 03 21:03:14 2007
Return-Path: <java-user-return-29012-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8516 invoked from network); 3 Jul 2007 21:03:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jul 2007 21:03:13 -0000
Received: (qmail 29057 invoked by uid 500); 3 Jul 2007 21:03:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28751 invoked by uid 500); 3 Jul 2007 21:03:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28738 invoked by uid 99); 3 Jul 2007 21:03:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 14:03:07 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of walt.stoneburner@gmail.com designates 209.85.146.178 as permitted sender)
Received: from [209.85.146.178] (HELO wa-out-1112.google.com) (209.85.146.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 14:03:01 -0700
Received: by wa-out-1112.google.com with SMTP id j40so3108124wah
        for <java-user@lucene.apache.org>; Tue, 03 Jul 2007 14:02:39 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=VWkU9v3YbzcW87cJfPo06r+ZHecSZvEkp58QLWkvcP/0qlitsjfFUkeuWw4OT3vLZxbqfy2WpBqU8aBMT1JcjIxRqqoEZKJznSE0ENjO0WG+FbwwrsYC3kkNPlOu4aJWLOOw00dWmR/71mpG1Y0uHh3I6U32vRFYLjONSYbbksQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=haMsUNOh/6aOSqaDRDuTxjaUuWdZjDY7cSvUrgeC1Z+vG+1HGxgHBb+hM+KTT33PyOARNk1SQzsKGRePRV6Zl1hDC6R6rghCkNaPdHDddIvWXeSRdPTbdnlSYmtR8P6Yy3O4hGtzZqk32OQ9FB87cHVSMPUIE4iebVQNKFy8qFE=
Received: by 10.114.195.19 with SMTP id s19mr6569435waf.1183496559737;
        Tue, 03 Jul 2007 14:02:39 -0700 (PDT)
Received: by 10.115.32.13 with HTTP; Tue, 3 Jul 2007 14:02:39 -0700 (PDT)
Message-ID: <ae6f38f60707031402v63c59e4ax3a944a623be038fe@mail.gmail.com>
Date: Tue, 3 Jul 2007 17:02:39 -0400
From: "Walt Stoneburner" <walt.stoneburner@gmail.com>
To: java-user@lucene.apache.org
Subject: Auto Slop
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

I've solved the problem, thanks to tips from Mark Miller and Ard
Schrijvers, and am simply recording it so that someone else walking
through the archives might get some benefit.

A while ago I had been working on a case-sensitive version of Lucene,
where with a prefix symbol, it was possible to indicate whether you
were interested in the token as-is, or the case insensitive version.
(For instance 'LET' is a real acronym, whereas 'let' is a stop word.)

I did this by writing a filter that injected two tokens for every one.
 The problem was, that token.setPositionIncrement(0) wasn't being
called on the duplicate token.  As such, it did appear that there were
intermediate tokens between the real ones, when they should have
occupied the same logical position.

Adding that simple call made phrases work perfectly, even in the light
of all the modified functionality I've added.  Gotta love Lucene!

What would have been a helpful debugging tool, would have been if Luke
was capable of dumping the token positions.  Clearly it can
reconstruct a document in this manner, but it would have been extra
nice to see numerical positions they resided at, not just the sequence
of tokens.

Hope this helps someone else in the future,
-Walt Stoneburner,
 http://www.wwco.com/~wls/blog/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29013-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 03 21:09:58 2007
Return-Path: <java-user-return-29013-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11304 invoked from network); 3 Jul 2007 21:09:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jul 2007 21:09:55 -0000
Received: (qmail 48919 invoked by uid 500); 3 Jul 2007 21:09:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48870 invoked by uid 500); 3 Jul 2007 21:09:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48859 invoked by uid 99); 3 Jul 2007 21:09:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 14:09:48 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jattardi@gmail.com designates 209.85.146.177 as permitted sender)
Received: from [209.85.146.177] (HELO wa-out-1112.google.com) (209.85.146.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 14:09:45 -0700
Received: by wa-out-1112.google.com with SMTP id j40so3112124wah
        for <java-user@lucene.apache.org>; Tue, 03 Jul 2007 14:09:24 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=T0CCF+X5AvHrugOlpEVeQy/qIJO30yvkAmU64xQMhX1pLT3m6xMJv84a3h4vN5xJ0zRVx7wIm1f52JIVXXOOMmRCGAFADzdzLODYr0pmhvjnsZYH7FsgLdyH5RnYRTl0eP27Jc76ClajA4jAdBDV0R1jWiXe6HLQ9jB3BwJX9Go=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=n742qjDPZBzf2LWXLLIsMi2VzJFGvSF97xZjK1y0UBm/FK+bz+0VHXtRtFyMgPC37XUELMSCNu+51W2wsge6PaHppMHzS04a24+fy0MyBBwUO0fzvtnzxxYXCVxo5q7EvElzR1t3rWcaYskm7EJes+j8TPNoUAVJMQsH3izQAmI=
Received: by 10.115.59.4 with SMTP id m4mr6536138wak.1183496963998;
        Tue, 03 Jul 2007 14:09:23 -0700 (PDT)
Received: by 10.114.39.16 with HTTP; Tue, 3 Jul 2007 14:09:23 -0700 (PDT)
Message-ID: <7a14509e0707031409y7a4d16eane2dce6b1ae2edcbf@mail.gmail.com>
Date: Tue, 3 Jul 2007 17:09:23 -0400
From: "Joe Attardi" <jattardi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexWriter.updateDocument(Term, Document) not removing old Document?
In-Reply-To: <Pine.LNX.4.58.0707031354060.4649@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_97750_32263701.1183496963967"
References: <7a14509e0707031051x7f506c2fv88dd7715d82af903@mail.gmail.com>
	 <359a92830707031127yaf55f61i311737739ca127fe@mail.gmail.com>
	 <7a14509e0707031135u60f08713h309098de5ad6e917@mail.gmail.com>
	 <Pine.LNX.4.58.0707031354060.4649@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_97750_32263701.1183496963967
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Chris,

That did it! Thanks for the help. I should have read the javadocs for
Field.Index more closely!
Thanks to everyone else for their input too.

-- 
Joe Attardi
jattardi@gmail.com
http://thinksincode.blogspot.com/

On 7/3/07, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
>
> It sounds like your problem is that your id field is analyzed and as a
> result contains more then one token per document ... both the
> deleteDocument and updateDocument methods that take in a Term only remove
> documents that have that exact Term in them.
>
> You need to add your documents with the "id" field as UN_TOKENIZED in the
> first place, and then updateDocument and deleteDocument should work (note:
> your use of "\"" in building your Term also looks suspicious, like you
> expect ther Term text to be analyzed into a phrase .... it's not, it's
> literal term text).
>
> : id:"com.mycompany.myapp.FooBar 142"
>
> : Term term = new Term("id", "\"" + doc.get("id") + "\"");
>
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_97750_32263701.1183496963967--

From java-user-return-29014-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 03 21:19:38 2007
Return-Path: <java-user-return-29014-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13564 invoked from network); 3 Jul 2007 21:19:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jul 2007 21:19:36 -0000
Received: (qmail 67376 invoked by uid 500); 3 Jul 2007 21:19:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67344 invoked by uid 500); 3 Jul 2007 21:19:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67333 invoked by uid 99); 3 Jul 2007 21:19:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 14:19:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.150] (HELO rescomp.berkeley.edu) (169.229.70.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 14:19:28 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id C82735B770; Tue,  3 Jul 2007 14:19:07 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id A813B7F403
	for <java-user@lucene.apache.org>; Tue,  3 Jul 2007 14:19:07 -0700 (PDT)
Date: Tue, 3 Jul 2007 14:19:07 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: product based term combination for BooleanQuery?
In-Reply-To: <468AA187.4010409@metaweb.com>
Message-ID: <Pine.LNX.4.58.0707031400370.4649@hal.rescomp.berkeley.edu>
References: <46899FF8.6060309@metaweb.com> <468A8CBF.3090604@metaweb.com>
 <468A9C03.30000@healthline.com> <468AA187.4010409@metaweb.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: "Lucene Download" as a query. I want something that strongly references
: "Lucene" (in the title) and strongly references "Download" but "Download
: Lucene" or "Lucene Project Download" are better than some page that
: happens to contain the exact phrase.
:
: Other examples are "camera review" or "Gonzales scandal"; there's a
: whole class of "subject <modifier>" queries that are not really phrase
: based, and my corpus isn't large enough to necessarily contain the
: phrase anyway.

You should take a look at the DisjunctionMaxQuery class ... it's whole
purpose for existing is to provide an alternative to BooleanQuery in which
multiple clause queries request in a score dominated by the highest
scoring subclause -- not all subclauses.  They can be combined in
BooleanQueries in such a way that matching title:John and title:Bush will
vastly overshadow docs that match title:John body:Bush ... but it doesn't
really help in situations where the title is "George Bush vs John Kerry"
... for stuff like that you have to use a sloppy PhraseQuery (you can make
it optional so it only increases the score, and doesn't prevent matches
when the phrase just doesn't exist)

if you take a look at the DisMaxRequestHandler in solr, you can see a
parser that converts queries like:   John Bush   ..into structions like
this...

  +(  ( DisjunctionMaxQuery((body:john | title:john^3.0)~0.01)
        DisjunctionMaxQuery((body:bush | title:bush^3.0)~0.01) )~2 )
   DisjunctionMaxQuery((text:"john bush"~100 | name:"john bush"~100^2.0)~0.01)

...based on configuration information.

I also second another suggestion (from grant maybe?) about considering
your coordFactory carefully ... if you use straight boolean queries and
have a query like you describe...
    +(title:John^4.0 body:John) +(title:Bush^4.0 body:Bush)

...then a document with "John Bush" in the title but only refrences to "Mr
Bush" in the body is going to be heavily penalized by the lack of any
occurances of "John" in the body ... you probably want to eliminate he
coord in your qub queries and only have it in the top most query.

(assuming you want to keep using plain boolean queries and don't totally
fall in love with dismax queries they way i have)



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29015-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 03 21:44:18 2007
Return-Path: <java-user-return-29015-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23768 invoked from network); 3 Jul 2007 21:44:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jul 2007 21:44:17 -0000
Received: (qmail 9819 invoked by uid 500); 3 Jul 2007 21:44:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9766 invoked by uid 500); 3 Jul 2007 21:44:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9742 invoked by uid 99); 3 Jul 2007 21:44:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 14:44:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.150] (HELO rescomp.berkeley.edu) (169.229.70.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 14:44:06 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 665795B772; Tue,  3 Jul 2007 14:43:45 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 4B8B97F403
	for <java-user@lucene.apache.org>; Tue,  3 Jul 2007 14:43:45 -0700 (PDT)
Date: Tue, 3 Jul 2007 14:43:45 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Modify search results
In-Reply-To: <ac440ca10707021114s58762eeapf61026e70621087d@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0707031440270.16912@hal.rescomp.berkeley.edu>
References: <ac440ca10707021114s58762eeapf61026e70621087d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Question: how do I go about manipulating the search results?  Is it possible
: to "intercept" the listing of HTML pages returned by the Lucene search
: function and modify the report it sends to the screen.
:
: Can this be as simple as adding a line to the Lucene Java code so that
: instead of reporting a simple chapter number, it will report the chapter

please bear in mind that Lucene is not an application, it is a library ...
it will return you the results of a query as a datastructure which you can
then dispplay in your application anyway you want.  it sounds like you are
looking at a particular chunk of example client code that does a search
and prints some results to the screen (perhaps you are even looking at the
demo that comes with lucene and is refered to in the "getting started"
tutorial) ... if it is usefull to use that as a starting point for you
application then by all means do so, but the Lucene library doesn't know
(and doesn't care) how you are using the results it produces ... that's
entirely up to you.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29016-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 03 21:56:34 2007
Return-Path: <java-user-return-29016-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27796 invoked from network); 3 Jul 2007 21:56:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jul 2007 21:56:32 -0000
Received: (qmail 35646 invoked by uid 500); 3 Jul 2007 21:56:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34943 invoked by uid 500); 3 Jul 2007 21:56:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34932 invoked by uid 99); 3 Jul 2007 21:56:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 14:56:27 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of vnguyen@ur.com designates 63.241.148.49 as permitted sender)
Received: from [63.241.148.49] (HELO iris.ur.com) (63.241.148.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 14:56:22 -0700
Received: from unknown (HELO UREXCHSRV5.ur.com) ([10.6.134.35])
  by iris.ur.com with ESMTP; 03 Jul 2007 21:56:27 +0000
X-OriginatingIP: 10.6.134.35
X-InternalServer: 10.6.134.35
Received: from EXCL1VS1.ur.com ([10.6.138.54]) by UREXCHSRV5.ur.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 3 Jul 2007 17:53:43 -0400
x-mimeole: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C7BDBC.9F7C5700"
Subject: Too Many Open files Exception
Date: Tue, 3 Jul 2007 17:56:53 -0400
Message-ID: <8F0A781213C3584099D4F903798727F89F1187@EXCL1VS1.ur.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Too Many Open files Exception
Thread-Index: Ace9vRDUcK/YI+rcSs+vLIHP3BpEtQ==
From: "Van Nguyen" <vnguyen@ur.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 03 Jul 2007 21:53:43.0034 (UTC) FILETIME=[9F78BDA0:01C7BDBC]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C7BDBC.9F7C5700
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I am getting a "Too Many Open Files" Exception.  I've read the FAQ about
lowering the merge factor (currently set to 25), issuing a ulimit -n
<number>, etc... but I am still getting the "Too Many Open Files"
Exception (yes... I'm making sure I close all writer/searchers/reader
and I only have one open at a time). =20

=20

Here is my situation:

=20

I have one application dedicated to building the index on one JVM
(server 1).  I have several other applications doing the searching in
another JVM (server 2).  I have the merge merge docs set to 999999, max
buffered docs =3D 3000, and max merge factor =3D 25.  Server 2 is all =
set to
default.  I am getting the "Too Many Open Files" Exception on server
2... The index in question has 576,239 documents, 48 fields, and
6,521,618 terms (actually... this just turned into a two part question).


=20

The first part would be why am I getting the "Too Many Open Files"
Exception.

=20

The second part is: I have a total of 24 different indices.  Each index
is dedicated to one specific part of the application (ie: an index for
customers, index for products, index for media location, etc).  Each
index has its own searcher/reader (and only one searcher/reader per
index).  After server 1 finishes it's scheduled job to update the index,
it notifies server 2 to renew the appropriate searcher/reader.  Question
is should (could) I merge all 24 indices into one big index?  What is
the optimal thing to do (the indices range from 5MB - 900MB... most of
the are 30MB-50MB).  =20

=20

I have two indices that are "large", one being 700MB and the other being
900MB.  Optimizing these two indices takes a long time, so I only
optimize it once (last scheduled job of the night).  The 700MB index is
scheduled to update every 4 hours, while the 900MB index is schedule to
update every 30 minutes.  Should I optimize more often throughout the
day (changes varies)?

=20

I know this email is all over the place... so any feedback is
appreciated.

=20

Thanks,

=20

Van

=20

=20


------_=_NextPart_001_01C7BDBC.9F7C5700--

From java-user-return-29017-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 03 23:33:30 2007
Return-Path: <java-user-return-29017-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61761 invoked from network); 3 Jul 2007 23:33:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jul 2007 23:33:28 -0000
Received: (qmail 67680 invoked by uid 500); 3 Jul 2007 23:33:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67640 invoked by uid 500); 3 Jul 2007 23:33:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67629 invoked by uid 99); 3 Jul 2007 23:33:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 16:33:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [64.81.62.48] (HELO mail01.apmindsf.com) (64.81.62.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 16:33:16 -0700
Received: from [172.30.250.103] (helo=[172.30.250.103])
	by mail01.apmindsf.com with esmtp (Exim 4.50)
	id 1I5rr0-0000I5-LV
	for java-user@lucene.apache.org; Tue, 03 Jul 2007 16:32:54 -0700
Message-ID: <468ADF32.2080907@metaweb.com>
Date: Tue, 03 Jul 2007 16:43:46 -0700
From: Tim Sturge <tsturge@metaweb.com>
User-Agent: Mozilla Thunderbird 1.0.6 (X11/20050715)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: product based term combination for BooleanQuery?
References: <46899FF8.6060309@metaweb.com> <468A8CBF.3090604@metaweb.com> <468A9C03.30000@healthline.com> <468AA187.4010409@metaweb.com> <5E71DC0E-2E19-4CC4-92B0-AAB926941D43@gmail.com>
In-Reply-To: <5E71DC0E-2E19-4CC4-92B0-AAB926941D43@gmail.com>
Content-Type: multipart/mixed;
 boundary="------------020201030702020003070608"
X-Virus-Checked: Checked by ClamAV on apache.org

--------------020201030702020003070608
Content-Type: text/plain; charset=US-ASCII; format=flowed
Content-Transfer-Encoding: 7bit

Here's the explain output I currently get for "George Bush" "George W 
Bush", "John Kerry" "John Denver" and "John Bush". (there are others in 
between, but they follow very much the same pattern; an enormous score 
for one of "John" or "Bush" and a very small score for the other being 
better than an average score for both.

As you can see I have a lot of fields, some very important (name, alias, 
title, anchor) and others much less important (text, surround, content, 
body).

I will experiment with DisjunctionMaxQuery, but it honestly seems like 
ProductQuery is what I want at the outer layer with BooleanQuery inside.

Tim

Grant Ingersoll wrote:
> When you do an explain on these results, what are all the factors that 
> contribute to the score?
>
> Could you increase the coord() factor in a custom Similarity 
> implementation, to give a bigger boost to documents that have more 
> matching terms? The point of coord is to give a little bump to those 
> docs that have more terms from the query in a given document. Sounds 
> like you want a bigger bump once you have multiple query terms in a 
> document. Would this work for you?
>
> Also, below...
>
> On Jul 3, 2007, at 3:20 PM, Tim Sturge wrote:
>
>> That's true, but it's not clear that I want phrase matches. Consider 
>> for example:
>>
>> "Lucene Download" as a query. I want something that strongly 
>> references "Lucene" (in the title) and strongly references "Download" 
>> but "Download Lucene" or "Lucene Project Download" are better than 
>> some page that happens to contain the exact phrase.
>
> Not sure I follow you here. By strongly references, do you mean there 
> are multiple occurrences of Download? Why would those alternatives be 
> better than an exact phrase match?
>
>>
>> Other examples are "camera review" or "Gonzales scandal"; there's a 
>> whole class of "subject <modifier>" queries that are not really 
>> phrase based, and my corpus isn't large enough to necessarily contain 
>> the phrase anyway.
>>
>> I agree that many two or three word queries are really best matched 
>> by phrases, but not all. Is it common to use a phrase query with high 
>> slop to overcome the unequal weighting problem?
>>
>> Also, my interface does support "\"John Bush\"" (ie the user can 
>> quote the phrase if they like) and I would prefer not to infer 
>> automatically that they meant to do so.
>>
>> Tim
>>
>> Jason Pump wrote:
>>> You're not using any type of phrase search. Try ->
>>>
>>> ( (title:"John Bush"^4.0) OR (body:"John Bush") ) AND ( 
>>> (title:John^4.0 body:John) AND (title:Bush^4.0 body:Bush) )
>>>
>>> or maybe
>>>
>>> ( (title:"John Bush"~4^4.0) OR (body:"John Bush"~4) ) AND ( 
>>> (title:John^4.0 body:John) AND (title:Bush^4.0 body:Bush) )
>>>
>>>
>>>
>>> Tim Sturge wrote:
>>>> I'm following myself up here to ask if anyone has experience or 
>>>> code with a BooleanQuery that weights the terms it encounters on a 
>>>> product basis rather than a sum basis.
>>>>
>>>> This would effectively compute the geometric mean of the term score 
>>>> (rather than the arithmetic mean) and would give me more "middle 
>>>> bias". It also has the great advantage that it automatically 
>>>> implements AND (as something without the term has a score of 0.0 
>>>> which causes the query to go to 0.0 as well.)
>>>>
>>>> I'm curious though why this doesn't already exist. Is it a bad idea 
>>>> in general (that I will discover once I implement it and look at 
>>>> the results?) or does it make searching a lot slower?
>>>>
>>>> Thanks,
>>>>
>>>> Tim
>>>>
>>>> Tim Sturge wrote:
>>>>> I have an index with two different sources of information, one 
>>>>> small but of high quality (call it "title"), and one large, but of 
>>>>> lower quality (call it "body"). I give boosts to certain documents 
>>>>> related to their popularity (this is very similar to what one 
>>>>> would do indexing the web).
>>>>>
>>>>> The problem I have is a query like "John Bush". I translate that 
>>>>> into " (title:John^4.0 body:John) AND (title:Bush^4.0 body:Bush) 
>>>>> ". But the results I get are:
>>>>>
>>>>> 1. George Bush
>>>>> ...
>>>>> 4. John Kerry
>>>>> ...
>>>>> 10. John Bush
>>>>>
>>>>> The reason is (looking at explain) that George Bush is scored:
>>>>> 169 = sum(
>>>>> 1 = <match in body with tiny norm for "John">
>>>>> )
>>>>> 168 = sum(
>>>>> 160 = <title match for "Bush">
>>>>> 8 = <body match for "Bush">
>>>>> )
>>>>> )
>>>>>
>>>>> and John Kerry is similar but reversed. Poor old "John Bush" only 
>>>>> scores:
>>>>>
>>>>> 72 = sum(
>>>>> 40 = (<title match for "John">+<body match>)
>>>>> 32 = (<title match for "Bush">+ <body match>)
>>>>> )
>>>>>
>>>>> because his initial boost was only 1/4 of George's.
>>>>>
>>>>> The question I have is, how can tell the searcher to care about 
>>>>> "balance"? I really want the score over 2 terms to be more like 
>>>>> (sqrt(X)+sqrt(Y))^2 or maybe even exp(log(X)+log(Y)) rather than 
>>>>> just X+Y. Is that supported in some obvious way, or is there some 
>>>>> other way to phrase my query to say "I want both terms but they 
>>>>> should both be important if possible?"
>>>>>
>>>>> Thanks,
>>>>>
>>>>> Tim
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>> ------------------------------------------------------------------- 
>>>>> -- 
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>
>>>>
>>>> -------------------------------------------------------------------- -
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> ------------------------------------------------------
> Grant Ingersoll
> http://www.grantingersoll.com/
> http://lucene.grantingersoll.com
> http://www.paperoftheweek.com/
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


--------------020201030702020003070608
Content-Type: text/plain;
 name="john-bush.score"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="john-bush.score"

[
  {
    "explain" : "169.71423 = (MATCH) sum of:
  0.033628028 = (MATCH) product of:
    0.23539619 = (MATCH) sum of:
      0.23539619 = (MATCH) weight(body:john in 1673743), product of:
        0.12947647 = queryWeight(body:john), product of:
          5.0118046 = idf(docFreq=185620)
          0.025834301 = queryNorm
        1.8180615 = (MATCH) fieldWeight(body:john in 1673743), product of:
          3.3166249 = tf(termFreq(body:john)=11)
          5.0118046 = idf(docFreq=185620)
          0.109375 = fieldNorm(field=wikipedia, doc=1673743)
    0.14285715 = coord(1\/7)
  169.6806 = (MATCH) product of:
    197.9607 = (MATCH) sum of:
      51.99727 = (MATCH) weight(name:bush in 1673743), product of:
        0.25916338 = queryWeight(name:bush), product of:
          10.0317545 = idf(docFreq=1225)
          0.025834301 = queryNorm
        200.63509 = (MATCH) fieldWeight(name:bush in 1673743), product of:
          1.0 = tf(termFreq(name:bush)=1)
          10.0317545 = idf(docFreq=1225)
          20.0 = fieldNorm(field=name, doc=1673743)
      51.013706 = (MATCH) weight(alias:bush in 1673743), product of:
        0.3630294 = queryWeight(alias:bush), product of:
          14.052224 = idf(docFreq=21)
          0.025834301 = queryNorm
        140.52225 = (MATCH) fieldWeight(alias:bush in 1673743), product of:
          1.0 = tf(termFreq(alias:bush)=1)
          14.052224 = idf(docFreq=21)
          10.0 = fieldNorm(field=alias, doc=1673743)
      33.15815 = (MATCH) weight(title:bush in 1673743), product of:
        0.29268032 = queryWeight(title:bush), product of:
          11.329136 = idf(docFreq=334)
          0.025834301 = queryNorm
        113.29136 = (MATCH) fieldWeight(title:bush in 1673743), product of:
          1.0 = tf(termFreq(title:bush)=1)
          11.329136 = idf(docFreq=334)
          10.0 = fieldNorm(field=title, doc=1673743)
      41.10021 = (MATCH) weight(anchor:bush in 1673743), product of:
        0.30437908 = queryWeight(anchor:bush), product of:
          11.781975 = idf(docFreq=212)
          0.025834301 = queryNorm
        135.02968 = (MATCH) fieldWeight(anchor:bush in 1673743), product of:
          36.67424 = tf(termFreq(anchor:bush)=1345)
          11.781975 = idf(docFreq=212)
          0.3125 = fieldNorm(field=anchor, doc=1673743)
      18.274998 = (MATCH) weight(text:bush in 1673743), product of:
        0.25839525 = queryWeight(text:bush), product of:
          10.002022 = idf(docFreq=1262)
          0.025834301 = queryNorm
        70.724976 = (MATCH) fieldWeight(text:bush in 1673743), product of:
          1.4142135 = tf(termFreq(text:bush)=2)
          10.002022 = idf(docFreq=1262)
          5.0 = fieldNorm(field=text, doc=1673743)
      2.4163725 = (MATCH) weight(body:bush in 1673743), product of:
        0.19234328 = queryWeight(body:bush), product of:
          7.445267 = idf(docFreq=16284)
          0.025834301 = queryNorm
        12.562812 = (MATCH) fieldWeight(body:bush in 1673743), product of:
          15.427249 = tf(termFreq(body:bush)=238)
          7.445267 = idf(docFreq=16284)
          0.109375 = fieldNorm(field=wikipedia, doc=1673743)
    0.85714287 = coord(6\/7)
",
    "name" : "George W. Bush",
  },
  {
    "explain" : "154.83218 = (MATCH) sum of:
  0.02267201 = (MATCH) product of:
    0.15870407 = (MATCH) sum of:
      0.15870407 = (MATCH) weight(body:john in 14947), product of:
        0.12947647 = queryWeight(body:john), product of:
          5.0118046 = idf(docFreq=185620)
          0.025834301 = queryNorm
        1.2257367 = (MATCH) fieldWeight(body:john in 14947), product of:
          2.236068 = tf(termFreq(body:john)=5)
          5.0118046 = idf(docFreq=185620)
          0.109375 = fieldNorm(field=wikipedia, doc=14947)
    0.14285715 = coord(1\/7)
  154.80951 = (MATCH) product of:
    180.6111 = (MATCH) sum of:
      41.597813 = (MATCH) weight(name:bush in 14947), product of:
        0.25916338 = queryWeight(name:bush), product of:
          10.0317545 = idf(docFreq=1225)
          0.025834301 = queryNorm
        160.50807 = (MATCH) fieldWeight(name:bush in 14947), product of:
          1.0 = tf(termFreq(name:bush)=1)
          10.0317545 = idf(docFreq=1225)
          16.0 = fieldNorm(field=name, doc=14947)
      61.216446 = (MATCH) weight(alias:bush in 14947), product of:
        0.3630294 = queryWeight(alias:bush), product of:
          14.052224 = idf(docFreq=21)
          0.025834301 = queryNorm
        168.6267 = (MATCH) fieldWeight(alias:bush in 14947), product of:
          1.0 = tf(termFreq(alias:bush)=1)
          14.052224 = idf(docFreq=21)
          12.0 = fieldNorm(field=alias, doc=14947)
      26.526522 = (MATCH) weight(title:bush in 14947), product of:
        0.29268032 = queryWeight(title:bush), product of:
          11.329136 = idf(docFreq=334)
          0.025834301 = queryNorm
        90.63309 = (MATCH) fieldWeight(title:bush in 14947), product of:
          1.0 = tf(termFreq(title:bush)=1)
          11.329136 = idf(docFreq=334)
          8.0 = fieldNorm(field=title, doc=14947)
      30.758215 = (MATCH) weight(anchor:bush in 14947), product of:
        0.30437908 = queryWeight(anchor:bush), product of:
          11.781975 = idf(docFreq=212)
          0.025834301 = queryNorm
        101.05233 = (MATCH) fieldWeight(anchor:bush in 14947), product of:
          34.307434 = tf(termFreq(anchor:bush)=1177)
          11.781975 = idf(docFreq=212)
          0.25 = fieldNorm(field=anchor, doc=14947)
      18.274998 = (MATCH) weight(text:bush in 14947), product of:
        0.25839525 = queryWeight(text:bush), product of:
          10.002022 = idf(docFreq=1262)
          0.025834301 = queryNorm
        70.724976 = (MATCH) fieldWeight(text:bush in 14947), product of:
          1.4142135 = tf(termFreq(text:bush)=2)
          10.002022 = idf(docFreq=1262)
          5.0 = fieldNorm(field=text, doc=14947)
      2.237126 = (MATCH) weight(body:bush in 14947), product of:
        0.19234328 = queryWeight(body:bush), product of:
          7.445267 = idf(docFreq=16284)
          0.025834301 = queryNorm
        11.630903 = (MATCH) fieldWeight(body:bush in 14947), product of:
          14.282857 = tf(termFreq(body:bush)=204)
          7.445267 = idf(docFreq=16284)
          0.109375 = fieldNorm(field=wikipedia, doc=14947)
    0.85714287 = coord(6\/7)
",
    "name" : "George H. W. Bush",
  },
  {
    "explain" : "92.35373 = (MATCH) sum of:
  92.255936 = (MATCH) product of:
    107.63193 = (MATCH) sum of:
      29.974728 = (MATCH) weight(name:john in 2198385), product of:
        0.17962648 = queryWeight(name:john), product of:
          6.9530225 = idf(docFreq=26641)
          0.025834301 = queryNorm
        166.87254 = (MATCH) fieldWeight(name:john in 2198385), product of:
          1.0 = tf(termFreq(name:john)=1)
          6.9530225 = idf(docFreq=26641)
          24.0 = fieldNorm(field=name, doc=2198385)
      34.876133 = (MATCH) weight(alias:john in 2198385), product of:
        0.27401346 = queryWeight(alias:john), product of:
          10.606575 = idf(docFreq=689)
          0.025834301 = queryNorm
        127.2789 = (MATCH) fieldWeight(alias:john in 2198385), product of:
          1.0 = tf(termFreq(alias:john)=1)
          10.606575 = idf(docFreq=689)
          12.0 = fieldNorm(field=alias, doc=2198385)
      17.689255 = (MATCH) weight(title:john in 2198385), product of:
        0.19514729 = queryWeight(title:john), product of:
          7.5538054 = idf(docFreq=14609)
          0.025834301 = queryNorm
        90.64566 = (MATCH) fieldWeight(title:john in 2198385), product of:
          1.0 = tf(termFreq(title:john)=1)
          7.5538054 = idf(docFreq=14609)
          12.0 = fieldNorm(field=title, doc=2198385)
      14.100239 = (MATCH) weight(anchor:john in 2198385), product of:
        0.20842676 = queryWeight(anchor:john), product of:
          8.06783 = idf(docFreq=8737)
          0.025834301 = queryNorm
        67.65081 = (MATCH) fieldWeight(anchor:john in 2198385), product of:
          13.416408 = tf(termFreq(anchor:john)=180)
          8.06783 = idf(docFreq=8737)
          0.625 = fieldNorm(field=anchor, doc=2198385)
      10.557128 = (MATCH) weight(text:john in 2198385), product of:
        0.1792826 = queryWeight(text:john), product of:
          6.9397116 = idf(docFreq=26998)
          0.025834301 = queryNorm
        58.885403 = (MATCH) fieldWeight(text:john in 2198385), product of:
          1.4142135 = tf(termFreq(text:john)=2)
          6.9397116 = idf(docFreq=26998)
          6.0 = fieldNorm(field=text, doc=2198385)
      0.43445155 = (MATCH) weight(body:john in 2198385), product of:
        0.12947647 = queryWeight(body:john), product of:
          5.0118046 = idf(docFreq=185620)
          0.025834301 = queryNorm
        3.3554478 = (MATCH) fieldWeight(body:john in 2198385), product of:
          7.1414285 = tf(termFreq(body:john)=51)
          5.0118046 = idf(docFreq=185620)
          0.09375 = fieldNorm(field=wikipedia, doc=2198385)
    0.85714287 = coord(6\/7)
  0.097795136 = (MATCH) product of:
    0.6845659 = (MATCH) sum of:
      0.6845659 = (MATCH) weight(body:bush in 2198385), product of:
        0.19234328 = queryWeight(body:bush), product of:
          7.445267 = idf(docFreq=16284)
          0.025834301 = queryNorm
        3.559084 = (MATCH) fieldWeight(body:bush in 2198385), product of:
          5.0990195 = tf(termFreq(body:bush)=26)
          7.445267 = idf(docFreq=16284)
          0.09375 = fieldNorm(field=wikipedia, doc=2198385)
    0.14285715 = coord(1\/7)
",
    "name" : "John Kerry",
  },
  {
    "explain" : "81.16132 = (MATCH) sum of:
  81.13575 = (MATCH) product of:
    94.65837 = (MATCH) sum of:
      24.978941 = (MATCH) weight(name:john in 66053), product of:
        0.17962648 = queryWeight(name:john), product of:
          6.9530225 = idf(docFreq=26641)
          0.025834301 = queryNorm
        139.06046 = (MATCH) fieldWeight(name:john in 66053), product of:
          1.0 = tf(termFreq(name:john)=1)
          6.9530225 = idf(docFreq=26641)
          20.0 = fieldNorm(field=name, doc=66053)
      29.063442 = (MATCH) weight(alias:john in 66053), product of:
        0.27401346 = queryWeight(alias:john), product of:
          10.606575 = idf(docFreq=689)
          0.025834301 = queryNorm
        106.06575 = (MATCH) fieldWeight(alias:john in 66053), product of:
          1.0 = tf(termFreq(alias:john)=1)
          10.606575 = idf(docFreq=689)
          10.0 = fieldNorm(field=alias, doc=66053)
      14.741047 = (MATCH) weight(title:john in 66053), product of:
        0.19514729 = queryWeight(title:john), product of:
          7.5538054 = idf(docFreq=14609)
          0.025834301 = queryNorm
        75.538055 = (MATCH) fieldWeight(title:john in 66053), product of:
          1.0 = tf(termFreq(title:john)=1)
          7.5538054 = idf(docFreq=14609)
          10.0 = fieldNorm(field=title, doc=66053)
      16.475775 = (MATCH) weight(anchor:john in 66053), product of:
        0.20842676 = queryWeight(anchor:john), product of:
          8.06783 = idf(docFreq=8737)
          0.025834301 = queryNorm
        79.04827 = (MATCH) fieldWeight(anchor:john in 66053), product of:
          2.4494898 = tf(termFreq(anchor:john)=6)
          8.06783 = idf(docFreq=8737)
          4.0 = fieldNorm(field=anchor, doc=66053)
      8.797606 = (MATCH) weight(text:john in 66053), product of:
        0.1792826 = queryWeight(text:john), product of:
          6.9397116 = idf(docFreq=26998)
          0.025834301 = queryNorm
        49.071167 = (MATCH) fieldWeight(text:john in 66053), product of:
          1.4142135 = tf(termFreq(text:john)=2)
          6.9397116 = idf(docFreq=26998)
          5.0 = fieldNorm(field=text, doc=66053)
      0.60155636 = (MATCH) weight(body:john in 66053), product of:
        0.12947647 = queryWeight(body:john), product of:
          5.0118046 = idf(docFreq=185620)
          0.025834301 = queryNorm
        4.646067 = (MATCH) fieldWeight(body:john in 66053), product of:
          7.4161983 = tf(termFreq(body:john)=55)
          5.0118046 = idf(docFreq=185620)
          0.125 = fieldNorm(field=wikipedia, doc=66053)
    0.85714287 = coord(6\/7)
  0.025572272 = (MATCH) product of:
    0.17900589 = (MATCH) sum of:
      0.17900589 = (MATCH) weight(body:bush in 66053), product of:
        0.19234328 = queryWeight(body:bush), product of:
          7.445267 = idf(docFreq=16284)
          0.025834301 = queryNorm
        0.9306584 = (MATCH) fieldWeight(body:bush in 66053), product of:
          1.0 = tf(termFreq(body:bush)=1)
          7.445267 = idf(docFreq=16284)
          0.125 = fieldNorm(field=wikipedia, doc=66053)
    0.14285715 = coord(1\/7)
",
    "name" : "John Denver",
  },
  {
    "explain" : "72.412 = (MATCH) sum of:
  23.203518 = (MATCH) product of:
    32.484924 = (MATCH) sum of:
      12.4894705 = (MATCH) weight(name:john in 535045), product of:
        0.17962648 = queryWeight(name:john), product of:
          6.9530225 = idf(docFreq=26641)
          0.025834301 = queryNorm
        69.53023 = (MATCH) fieldWeight(name:john in 535045), product of:
          1.0 = tf(termFreq(name:john)=1)
          6.9530225 = idf(docFreq=26641)
          10.0 = fieldNorm(field=name, doc=535045)
      5.8964186 = (MATCH) weight(title:john in 535045), product of:
        0.19514729 = queryWeight(title:john), product of:
          7.5538054 = idf(docFreq=14609)
          0.025834301 = queryNorm
        30.215221 = (MATCH) fieldWeight(title:john in 535045), product of:
          1.0 = tf(termFreq(title:john)=1)
          7.5538054 = idf(docFreq=14609)
          4.0 = fieldNorm(field=title, doc=535045)
      8.737598 = (MATCH) weight(anchor:john in 535045), product of:
        0.20842676 = queryWeight(anchor:john), product of:
          8.06783 = idf(docFreq=8737)
          0.025834301 = queryNorm
        41.921673 = (MATCH) fieldWeight(anchor:john in 535045), product of:
          3.4641016 = tf(termFreq(anchor:john)=12)
          8.06783 = idf(docFreq=8737)
          1.5 = fieldNorm(field=anchor, doc=535045)
      4.9766784 = (MATCH) weight(text:john in 535045), product of:
        0.1792826 = queryWeight(text:john), product of:
          6.9397116 = idf(docFreq=26998)
          0.025834301 = queryNorm
        27.758846 = (MATCH) fieldWeight(text:john in 535045), product of:
          1.0 = tf(termFreq(text:john)=1)
          6.9397116 = idf(docFreq=26998)
          4.0 = fieldNorm(field=text, doc=535045)
      0.38475677 = (MATCH) weight(body:john in 535045), product of:
        0.12947647 = queryWeight(body:john), product of:
          5.0118046 = idf(docFreq=185620)
          0.025834301 = queryNorm
        2.9716346 = (MATCH) fieldWeight(body:john in 535045), product of:
          3.1622777 = tf(termFreq(body:john)=10)
          5.0118046 = idf(docFreq=185620)
          0.1875 = fieldNorm(field=wikipedia, doc=535045)
    0.71428573 = coord(5\/7)
  49.208485 = (MATCH) product of:
    68.89188 = (MATCH) sum of:
      25.998634 = (MATCH) weight(name:bush in 535045), product of:
        0.25916338 = queryWeight(name:bush), product of:
          10.0317545 = idf(docFreq=1225)
          0.025834301 = queryNorm
        100.31754 = (MATCH) fieldWeight(name:bush in 535045), product of:
          1.0 = tf(termFreq(name:bush)=1)
          10.0317545 = idf(docFreq=1225)
          10.0 = fieldNorm(field=name, doc=535045)
      13.263261 = (MATCH) weight(title:bush in 535045), product of:
        0.29268032 = queryWeight(title:bush), product of:
          11.329136 = idf(docFreq=334)
          0.025834301 = queryNorm
        45.316544 = (MATCH) fieldWeight(title:bush in 535045), product of:
          1.0 = tf(termFreq(title:bush)=1)
          11.329136 = idf(docFreq=334)
          4.0 = fieldNorm(field=title, doc=535045)
      18.634373 = (MATCH) weight(anchor:bush in 535045), product of:
        0.30437908 = queryWeight(anchor:bush), product of:
          11.781975 = idf(docFreq=212)
          0.025834301 = queryNorm
        61.220936 = (MATCH) fieldWeight(anchor:bush in 535045), product of:
          3.4641016 = tf(termFreq(anchor:bush)=12)
          11.781975 = idf(docFreq=212)
          1.5 = fieldNorm(field=anchor, doc=535045)
      10.3379 = (MATCH) weight(text:bush in 535045), product of:
        0.25839525 = queryWeight(text:bush), product of:
          10.002022 = idf(docFreq=1262)
          0.025834301 = queryNorm
        40.008087 = (MATCH) fieldWeight(text:bush in 535045), product of:
          1.0 = tf(termFreq(text:bush)=1)
          10.002022 = idf(docFreq=1262)
          4.0 = fieldNorm(field=text, doc=535045)
      0.65770966 = (MATCH) weight(body:bush in 535045), product of:
        0.19234328 = queryWeight(body:bush), product of:
          7.445267 = idf(docFreq=16284)
          0.025834301 = queryNorm
        3.4194574 = (MATCH) fieldWeight(body:bush in 535045), product of:
          2.4494898 = tf(termFreq(body:bush)=6)
          7.445267 = idf(docFreq=16284)
          0.1875 = fieldNorm(field=wikipedia, doc=535045)
    0.71428573 = coord(5\/7)
",
    "name" : "John Bush",
  }
]

--------------020201030702020003070608
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--------------020201030702020003070608--

From java-user-return-29018-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 04 04:41:31 2007
Return-Path: <java-user-return-29018-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52165 invoked from network); 4 Jul 2007 04:41:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jul 2007 04:41:30 -0000
Received: (qmail 12269 invoked by uid 500); 4 Jul 2007 04:41:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12230 invoked by uid 500); 4 Jul 2007 04:41:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12219 invoked by uid 99); 4 Jul 2007 04:41:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 21:41:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.150] (HELO rescomp.berkeley.edu) (169.229.70.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 21:41:20 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 733105B770; Tue,  3 Jul 2007 21:40:59 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 5713F7F403
	for <java-user@lucene.apache.org>; Tue,  3 Jul 2007 21:40:59 -0700 (PDT)
Date: Tue, 3 Jul 2007 21:40:59 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Too Many Open files Exception
In-Reply-To: <8F0A781213C3584099D4F903798727F89F1187@EXCL1VS1.ur.com>
Message-ID: <Pine.LNX.4.58.0707032135440.23647@hal.rescomp.berkeley.edu>
References: <8F0A781213C3584099D4F903798727F89F1187@EXCL1VS1.ur.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

: I am getting a "Too Many Open Files" Exception.  I've read the FAQ about
: lowering the merge factor (currently set to 25), issuing a ulimit -n
: <number>, etc... but I am still getting the "Too Many Open Files"
: Exception (yes... I'm making sure I close all writer/searchers/reader
: and I only have one open at a time).

so ... what is your ulimit set to? how many files are in your index
directory?  have you tried running lsof on your processes to see all the
files you have open?

the anoying thing about "Too Many Open Files" type errors, is that the
method/class/library that encounters the problem isn't neccessarily the
guy that caused hte problem ... it's just the straw that breaks the camels
back.  it could be that you aren't closing some network socket (sockets
are files too) and it may not have anything to do with lucene.

or it could just be that your index has a ton of files because of hte
number of segments and the number of fields, and between it, and all the
jars your app loads it really does just use 1 too many files for your
ulimit.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29019-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 04 05:27:28 2007
Return-Path: <java-user-return-29019-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62025 invoked from network); 4 Jul 2007 05:27:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jul 2007 05:27:26 -0000
Received: (qmail 71478 invoked by uid 500); 4 Jul 2007 05:27:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71425 invoked by uid 500); 4 Jul 2007 05:27:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71414 invoked by uid 99); 4 Jul 2007 05:27:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 22:27:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.150] (HELO rescomp.berkeley.edu) (169.229.70.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jul 2007 22:27:18 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id DAB8D5B770; Tue,  3 Jul 2007 22:26:57 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id BDC177F403
	for <java-user@lucene.apache.org>; Tue,  3 Jul 2007 22:26:57 -0700 (PDT)
Date: Tue, 3 Jul 2007 22:26:57 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: Re: product based term combination for BooleanQuery?
In-Reply-To: <468ADF32.2080907@metaweb.com>
Message-ID: <Pine.LNX.4.58.0707032209020.23647@hal.rescomp.berkeley.edu>
References: <46899FF8.6060309@metaweb.com> <468A8CBF.3090604@metaweb.com>
 <468A9C03.30000@healthline.com> <468AA187.4010409@metaweb.com>
 <5E71DC0E-2E19-4CC4-92B0-AAB926941D43@gmail.com> <468ADF32.2080907@metaweb.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


(side note: if you are going to try and obfuscate your field names when
sending explain output so we don't know you are using wikipedia data (not
that we care), please at least be consistent about it so the final
explanations actual make sense -- it will save everyone a lot of confusion
and help us help you)

the biggest factor in your scores seems to be the fieldNorms for your
name, title and alias fields ... they are so high, that tf and idf are
pretty much irrelevant.

By the looks of it, when you were indexing your docs, you used a
consistent field boost per field on every instance of that field for every
document ... this is really not a use case where index time field (or
document) boosts make sense.  in my opinion hte number one thing you can
do to imrpove your relevency right now is to stop using index time
boosts and use query boosts instead.

If you don't want to reindex completely the LengthNormModifier class (in
the misc contrib) can update all of your norms in place without reindexing
and throw away any index time boosts you had.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29020-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 04 07:29:19 2007
Return-Path: <java-user-return-29020-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1360 invoked from network); 4 Jul 2007 07:29:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jul 2007 07:29:18 -0000
Received: (qmail 70709 invoked by uid 500); 4 Jul 2007 07:29:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70675 invoked by uid 500); 4 Jul 2007 07:29:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70662 invoked by uid 99); 4 Jul 2007 07:29:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Jul 2007 00:29:13 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mailing.patrick.kimber@gmail.com designates 64.233.162.227 as permitted sender)
Received: from [64.233.162.227] (HELO nz-out-0506.google.com) (64.233.162.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Jul 2007 00:29:09 -0700
Received: by nz-out-0506.google.com with SMTP id i28so1015075nzi
        for <java-user@lucene.apache.org>; Wed, 04 Jul 2007 00:28:48 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=N/7eW4z67eU8nl7e8yKwLEFnUkNpiwKHRRBjVlcv7NQw09fjluBwmSLL1/uJwXAoU1AbS1+cn+GU57qTIcpH2N++falmx0uvJGgwb9Pc1wr9eu/tzXSg1nPu0fZ60P+DhedcxkDq492o1np9uoioa0Qta7KxwZziGLyJekubkRI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=bioIGa9SgT8BIdt7gNr5durZdyctqnqAdi5ZkantHQy5vmtG14xRu0g+b9YmzdZzgS56aYK7ZhD8ss1WuPKnkBAhTWt7VGlSVOfTNEmXuBjZeB4g55TUhdVzgJkPBHIoojovtqumjZh+X+W5mCyD5FRZ/kpvKRRrO4uQQEwviV8=
Received: by 10.114.192.1 with SMTP id p1mr6979016waf.1183534127587;
        Wed, 04 Jul 2007 00:28:47 -0700 (PDT)
Received: by 10.115.55.4 with HTTP; Wed, 4 Jul 2007 00:28:47 -0700 (PDT)
Message-ID: <4f9b23800707040028g209341f8l24ce8363723d9729@mail.gmail.com>
Date: Wed, 4 Jul 2007 08:28:47 +0100
From: "Patrick Kimber" <mailing.patrick.kimber@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene 2.2, NFS, Lock obtain timed out
In-Reply-To: <1183476448.14138.1198311153@webmail.messagingengine.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <OF19D3F11C.A08B201A-ON6525730D.003B9E55-6525730D.003DD835@hewitt.com>
	 <1183461674.2220.1198268681@webmail.messagingengine.com>
	 <4f9b23800707030432i1067a67auc8fc0f83abeeea0@mail.gmail.com>
	 <1183465207.11743.1198277029@webmail.messagingengine.com>
	 <4f9b23800707030650y6139a19fn2870bef783636f46@mail.gmail.com>
	 <4f9b23800707030813m998f3e5u1984d913f51d13b6@mail.gmail.com>
	 <1183476448.14138.1198311153@webmail.messagingengine.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Michael

Yes, there are many lines in the logs saying:
hit FileNotFoundException when loading commit "segment_X"; skipping
this commit point
...so it looks like the new code is working perfectly.

I am sorry to be vague... but how do I check which segments file is
opened when a new writer is created?

I will add a check to my test to see if all documents are added.  This
should tell us if any documents are being silently lost.

Thanks

Patrick

On 03/07/07, Michael McCandless <lucene@mikemccandless.com> wrote:
> "Patrick Kimber" <mailing.patrick.kimber@gmail.com> wrote:
>
> > I have been running the test for over an hour without any problem.
> > The index writer log file is getting rather large so I cannot leave
> > the test running overnight.  I will run the test again tomorrow
> > morning and let you know how it goes.
>
> Ahhh, that's good news, I'm glad to hear that!
>
> You should go ahead and turn off the logging and make sure things are
> still fine (just in case logging is changing timing of events since
> timing is a factor here).
>
> In your logs, do you see lines like this?:
>
>   ... hit FileNotFoundException when loading commit "segment_X"; skipping this commit point
>
> That would confirm the new code (to catch the FileNotFoundException)
> is indeed being hit.
>
> Actually, could you also check the logs and try to verify that each
> time one machine closed its writer and a 2nd machine opened a new
> writer that the 2nd machine indeed loaded the newest segments_N file
> and not segments_N-1?  (This is the possible new issue I was referring
> to).  I fear that this new issue could silently lose documents added
> by another machine and possibly not throw an exception.
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29021-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 04 07:49:22 2007
Return-Path: <java-user-return-29021-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7865 invoked from network); 4 Jul 2007 07:49:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jul 2007 07:49:21 -0000
Received: (qmail 12353 invoked by uid 500); 4 Jul 2007 07:49:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12203 invoked by uid 500); 4 Jul 2007 07:49:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12192 invoked by uid 99); 4 Jul 2007 07:49:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Jul 2007 00:49:17 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Jul 2007 00:49:13 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1I5zbY-000610-D2
	for java-user@lucene.apache.org; Wed, 04 Jul 2007 00:48:52 -0700
Message-ID: <11426245.post@talk.nabble.com>
Date: Wed, 4 Jul 2007 00:48:52 -0700 (PDT)
From: emmettwalsh <emmettwalsh@gmail.com>
To: java-user@lucene.apache.org
Subject: Lucene Indexing and searching - help
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: emmettwalsh@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,
:
: lucene documentation seems to be very confusing... here is my predicament
:
: I have an object like the following:
:
: public class PropertyImpl implements Property {
:
: String id;
:
: List<String> names = new ArrayList<String>();
:
: String address = "";
:
: String city = "";
:
: String street = "";
:
: String state = "";
:
: String cachedMatchingString;
:
: ...
:
: ..
: public String toString() {
: // save some time
: if (cachedMatchingString == null) {
:
: StringBuffer buf = new StringBuffer();
:
: for (String name : names) {
: //buf.append(name + ",");
: buf.append(name + " ");
: }
:
: if (address != null) {
: //buf.append(address + ",");
: buf.append(address + " ");
: }
: if (city != null) {
: //buf.append(city + ",");
: buf.append(city + " ");
: }
: if (street != null) {
: //buf.append(street + ",");
: buf.append(street + " ");
: }
: if (state != null) {
: //buf.append(state);
: buf.append(state);
: }
:
: // get rid of any spaces
: //cachedMatchingString = buf.toString().replace(" ", "");
: cachedMatchingString = buf.toString();
: }
: return cachedMatchingString;
: }
:
:
: A typical instance of this object would have the following data
:
: id=123134
: names= {'Emmett Walsh', 'John Walsh'}
: address="Milltown."
: city="Dublin"
: street="Bankside Cottages"
: state="Ireland"
: cachedMatchingString="Emmett Walsh John Walsh Milltown Dublin Bankside
: Cottages Ireland"
:
:
:
: I have about 8000 of these objects which I store in a hashmap for direct
: access based on there id. It is the id(s) that I need lucene to return to
me
: so that I can retireve the desired object(s) from the hashmap.
:
: The cachedMatchingString string is what I use when indexing the
information
: like following:
:
: e.g. so for each of the 8000 objects i do the following to build the index
:
: idxWriter.addDocument(createDocument(prop));
:
:
: private static Document createDocument(Property prop) {
: Document doc = new Document();
:
: Field field = new Field("id", prop.getId(), Store.YES, Index.NO);
: doc.add(field);
:
: Field field2 = new Field("content", prop.toString(), Store.NO,
: Index.TOKENIZED);  //will tokenise our long string
: doc.add(field2);
:
: return doc;
: }
:
:
:
: Searching
: I have a text field in my app that typically would take in a strings like
:
: "Main s" , which
: would end up in a query like "Main AND s*" like follows
:
: "B", which would end up in a query like "b*"
:
:                         queryString = queryString.trim();  //the string
: taken in from textbox
:
:
: String[] strings = queryString.split(" ");
: int numStrings = strings.length;
:
: StringBuffer luceneQuery = new StringBuffer();
:
: for(int i=0;i<numStrings;i++){
: String aString = strings[i];
: if(aString.equals("")){
: continue;
: }
: luceneQuery.append(aString);
: if((i+1) != numStrings){
: luceneQuery.append(" AND ");
: }else{
: luceneQuery.append("*");
: }
: }
:
: //BooleanQuery.setMaxClauseCount(2*1024);
:
:
: QueryParser parser = new QueryParser("content",
: new StandardAnalyzer());
:
:
: org.apache.lucene.search.Query query =
: parser.parse(luceneQuery.toString());
:
: // Search for the query
: Hits hits = searcher.search(query);
:
:
: but i keep getting Toomanyclausesexceptions
:
: Any suggestions on how to index or search better ? 
-- 
View this message in context: http://www.nabble.com/Lucene-Indexing-and-searching---help-tf4022884.html#a11426245
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29022-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 04 08:02:28 2007
Return-Path: <java-user-return-29022-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11209 invoked from network); 4 Jul 2007 08:02:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jul 2007 08:02:27 -0000
Received: (qmail 33989 invoked by uid 500); 4 Jul 2007 08:02:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33941 invoked by uid 500); 4 Jul 2007 08:02:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33925 invoked by uid 99); 4 Jul 2007 08:02:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Jul 2007 01:02:22 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yhprar@spatula.net designates 208.96.51.42 as permitted sender)
Received: from [208.96.51.42] (HELO turing.morons.org) (208.96.51.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Jul 2007 01:02:18 -0700
Received: by turing.morons.org (Postfix, from userid 1001)
	id 799FF17030; Wed,  4 Jul 2007 01:01:58 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by turing.morons.org (Postfix) with ESMTP id 5651B1702C
	for <java-user@lucene.apache.org>; Wed,  4 Jul 2007 01:01:58 -0700 (PDT)
Date: Wed, 4 Jul 2007 01:01:58 -0700 (PDT)
From: Nick Johnson <yhprar@spatula.net>
X-X-Sender: spatula@turing
To: java-user@lucene.apache.org
Subject: problems with deleteDocuments
Message-ID: <20070704004859.J82369@turing>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

I'm having several problems with deleting documents with Lucene 2.2.

Via the IndexWriter, I can successfully delete a document by its primary 
key via a Term, but ONLY if the field was stored as 
Field.Index.UN_TOKENIZED.  If it was stored as TOKENIZED, the debug output 
says it is deleting the document, but subsequent searches executed against 
terms that existed only in the original document (and not the one I add to 
replace it) still return the deleted document.  (Searches against terms 
only in the new document will return the new document.)

Another problem is that if I first delete the document using 
deleteDocuments(Term) and then add a new document that happens to have 
identical fields to the one I deleted, the new document is not added.  Of 
course this operation is fairly wasteful, but it seems like the new 
document should replace the old one, even though they're the same.  This 
happens even if I perform a flush() after the delete and before the add.  
It will also happen even if I flush, close the IndexWriter and create a 
new IndexWriter.  It seems that once a document with a particular set of 
fields has been deleted, an identical one can never be re-added.

Any pointers or things I should check or more detailed information I can 
provide to track this down?

   Nick

-- 
"Courage isn't just a matter of not being frightened, you know. It's being
 afraid and doing what you have to do anyway."
   Doctor Who - Planet of the Daleks
This message has been brought to you by Nick Johnson 2.3b1 and the number 6.
http://healerNick.com/       http://morons.org/        http://spatula.net/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29023-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 04 10:14:14 2007
Return-Path: <java-user-return-29023-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63196 invoked from network); 4 Jul 2007 10:14:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jul 2007 10:14:13 -0000
Received: (qmail 86913 invoked by uid 500); 4 Jul 2007 10:14:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86881 invoked by uid 500); 4 Jul 2007 10:14:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86870 invoked by uid 99); 4 Jul 2007 10:14:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Jul 2007 03:14:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Jul 2007 03:14:03 -0700
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id 4A6E26243
	for <java-user@lucene.apache.org>; Wed,  4 Jul 2007 06:13:40 -0400 (EDT)
Received: from web8.messagingengine.com ([10.202.2.217])
  by compute1.internal (MEProxy); Wed, 04 Jul 2007 06:13:41 -0400
Received: by web8.messagingengine.com (Postfix, from userid 99)
	id 49EF918377; Wed,  4 Jul 2007 06:13:40 -0400 (EDT)
Message-Id: <1183544020.31233.1198452157@webmail.messagingengine.com>
X-Sasl-Enc: c50jkLKnoDbJypyruP0k6OL9oh8qvOuP+qHpmesYPdSG 1183544020
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <OF19D3F11C.A08B201A-ON6525730D.003B9E55-6525730D.003DD835@hewitt.com>
   <1183461674.2220.1198268681@webmail.messagingengine.com>
   <4f9b23800707030432i1067a67auc8fc0f83abeeea0@mail.gmail.com>
   <1183465207.11743.1198277029@webmail.messagingengine.com>
   <4f9b23800707030650y6139a19fn2870bef783636f46@mail.gmail.com>
   <4f9b23800707030813m998f3e5u1984d913f51d13b6@mail.gmail.com>
   <1183476448.14138.1198311153@webmail.messagingengine.com>
   <4f9b23800707040028g209341f8l24ce8363723d9729@mail.gmail.com>
Subject: Re: Lucene 2.2, NFS, Lock obtain timed out
In-Reply-To: <4f9b23800707040028g209341f8l24ce8363723d9729@mail.gmail.com>
Date: Wed, 04 Jul 2007 06:13:40 -0400
X-Virus-Checked: Checked by ClamAV on apache.org


"Patrick Kimber" <mailing.patrick.kimber@gmail.com> wrote:

> Yes, there are many lines in the logs saying:
> hit FileNotFoundException when loading commit "segment_X"; skipping
> this commit point
> ...so it looks like the new code is working perfectly.

Super!

> I am sorry to be vague... but how do I check which segments file is
> opened when a new writer is created?

Oh, sorry, it's not exactly obvious.  Here's what to look for:

On machine #1 (the machine that added docs & then closed its writer)
you should see lines like this, which are printed every time the
writer flushes its docs:

    checkpoint: wrote segments file "segments_X"

Find the last such line on machine #1 before it closes the writer, and
that's the "current" segments_X in the index.

Then on machine #2 (the machine that immediately opens a new writer
after machine #1 closed its writer) you should see a line like this:

    org.apache.lucene.index.IndexFileDeleter@XXXXXXX main: init: current segments file is "segments_Y"

which indicates which segments file was loaded by this writer.  The
thing to verify is that X is always equal to Y whenever a writer
quickly moves from machine #1 to machine #2.

> I will add a check to my test to see if all documents are added.  This
> should tell us if any documents are being silently lost.

Very good!  Keep us posted, and good luck,

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29024-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 04 10:20:04 2007
Return-Path: <java-user-return-29024-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65509 invoked from network); 4 Jul 2007 10:20:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jul 2007 10:20:03 -0000
Received: (qmail 98081 invoked by uid 500); 4 Jul 2007 10:19:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97756 invoked by uid 500); 4 Jul 2007 10:19:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97745 invoked by uid 99); 4 Jul 2007 10:19:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Jul 2007 03:19:56 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of amalafrida@gmail.com designates 209.85.146.178 as permitted sender)
Received: from [209.85.146.178] (HELO wa-out-1112.google.com) (209.85.146.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Jul 2007 03:19:52 -0700
Received: by wa-out-1112.google.com with SMTP id j40so3366025wah
        for <java-user@lucene.apache.org>; Wed, 04 Jul 2007 03:19:32 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=UcAquX3VtJZzs4MW9tylQON8Afio8ANV99RcrnC1THT8001wB4UzmJExxU2O+RIlQ9/Rl8TAZg45gUEk/zx83tr+KqAHQJlbOXE5t6uut7DCOlHDdGTCUgF2da8Nk3HyO5pqGjtplvDUHqEwCXCWpoYytzcL9O8BvHsmeX/soRs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=KlDQwntXKiNkpnvCEcIrcnKiHcZkHxmxlWFmLhzd7/aAGlZnTQ/x8LJelfH0sG89hHj+XIsq1tQrTpA7I9qrNa0UIHXTBZOfOM8bo2UhYfAP+5PJKS4Zpbw7E51Qlfiauy1/8Bi7hsqzpARmOZuN6tI8oW3SchTjcIbaavjWhcM=
Received: by 10.114.157.1 with SMTP id f1mr7118539wae.1183544372439;
        Wed, 04 Jul 2007 03:19:32 -0700 (PDT)
Received: by 10.114.103.6 with HTTP; Wed, 4 Jul 2007 03:19:32 -0700 (PDT)
Message-ID: <ac440ca10707040319i3cad12cfnc3d2a35c77e9aa7e@mail.gmail.com>
Date: Wed, 4 Jul 2007 12:19:32 +0200
From: "Robert Mullin" <amalafrida@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Modify search results
In-Reply-To: <Pine.LNX.4.58.0707031440270.16912@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_106630_11224299.1183544372412"
References: <ac440ca10707021114s58762eeapf61026e70621087d@mail.gmail.com>
	 <Pine.LNX.4.58.0707031440270.16912@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_106630_11224299.1183544372412
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hoss,

Thanks for your reply.  You are correct.  I am working with the Lucene Demo
and trying to get some traction.  But without much luck.  Most postings on
the list are way beyond me.  I continue to research the literature in order
to find something that will bring me gently forward so that I can begin to
understand how to use Lucene.  Not much luck so far.

I am in the process of teaching myself Java, so as the days go by things
should become more clear.

But about the results that Lucene produces . . . how do I begin to look at
and then manipulate those results?  I understand that Lucene is not an
application, that I must develop the interface.  But I do need to
"intercept" the results and "manipulate" it in some way . . . Hunh????\

In any cas, thanks for your response.

Robert

On 7/3/07, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
>
> : Question: how do I go about manipulating the search results?  Is it
> possible
> : to "intercept" the listing of HTML pages returned by the Lucene search
> : function and modify the report it sends to the screen.
> :
> : Can this be as simple as adding a line to the Lucene Java code so that
> : instead of reporting a simple chapter number, it will report the chapter
>
> please bear in mind that Lucene is not an application, it is a library ...
> it will return you the results of a query as a datastructure which you can
> then dispplay in your application anyway you want.  it sounds like you are
> looking at a particular chunk of example client code that does a search
> and prints some results to the screen (perhaps you are even looking at the
> demo that comes with lucene and is refered to in the "getting started"
> tutorial) ... if it is usefull to use that as a starting point for you
> application then by all means do so, but the Lucene library doesn't know
> (and doesn't care) how you are using the results it produces ... that's
> entirely up to you.
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_106630_11224299.1183544372412--

From java-user-return-29025-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 04 12:31:50 2007
Return-Path: <java-user-return-29025-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21998 invoked from network); 4 Jul 2007 12:31:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jul 2007 12:31:48 -0000
Received: (qmail 44021 invoked by uid 500); 4 Jul 2007 12:31:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43982 invoked by uid 500); 4 Jul 2007 12:31:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43971 invoked by uid 99); 4 Jul 2007 12:31:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Jul 2007 05:31:43 -0700
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of ndapandula@gmail.com designates 64.233.184.224 as permitted sender)
Received: from [64.233.184.224] (HELO wr-out-0506.google.com) (64.233.184.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Jul 2007 05:31:38 -0700
Received: by wr-out-0506.google.com with SMTP id m59so1351095wrm
        for <java-user@lucene.apache.org>; Wed, 04 Jul 2007 05:31:17 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=bRjgLda6Fumb3nCppNsrmyb8mgkrg50Q7nQsvNrSCfL48mgAqUnp+kcGzg1CT1qtJvSQhJ6vxyzeEwEC6WU7rwn/xEGUOfmqmgTeTQZZ8lUtunMWzmLk+7c8V5OqJCUwlFka0DrAmRfhWFnEpRDBAQ6+7HfWZqvb8N//HuC9Ij4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=IZ/uEcnhfnZEczkaLEuKJSlWACFvmTHL9tZSLNtEQfP27Lz70xIX3lNt8q8FuBhAVkwMjzxXjLkfSMd7oi50REXbV1WgMreOT3senYKBKF+/Ta+G36AKsX5CU1XrWF91Rno0V13uZBp+xkjXoT47xasPEwradIbe20In4gf8VjM=
Received: by 10.78.149.13 with SMTP id w13mr4079962hud.1183552276136;
        Wed, 04 Jul 2007 05:31:16 -0700 (PDT)
Received: by 10.78.164.3 with HTTP; Wed, 4 Jul 2007 05:31:16 -0700 (PDT)
Message-ID: <5791bc090707040531x4a7b0309nb3e5982fab8ea0c6@mail.gmail.com>
Date: Wed, 4 Jul 2007 14:31:16 +0200
From: "Ndapa Nakashole" <ndapandula@gmail.com>
To: java-user@lucene.apache.org
Subject: Index partitioning by term
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_15454_8762719.1183552276118"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_15454_8762719.1183552276118
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I am considering using Lucene in my mini Grid-based search engine. I would
like to partition my index by term as opposed to partition by document. From
what i have read in the mailing list so far, it seems like partition by term
is impossible with Lucene. am i right to conclude this! I know Nutch
partitions by document, by in my environment of very limited bandwidth i
would like to avoid partition by document.

-- 
-------------------------------------------------------------------------
ndapandula nakashole
www.cs.uct.ac.za/~nnakasho
-------------------------------------------------------------------------

------=_Part_15454_8762719.1183552276118--

From java-user-return-29026-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 04 13:14:06 2007
Return-Path: <java-user-return-29026-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39306 invoked from network); 4 Jul 2007 13:14:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jul 2007 13:14:05 -0000
Received: (qmail 15238 invoked by uid 500); 4 Jul 2007 13:14:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15194 invoked by uid 500); 4 Jul 2007 13:14:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15182 invoked by uid 99); 4 Jul 2007 13:14:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Jul 2007 06:14:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [217.12.11.79] (HELO smtp010.mail.ukl.yahoo.com) (217.12.11.79)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 04 Jul 2007 06:13:56 -0700
Received: (qmail 15318 invoked from network); 3 Jul 2007 18:40:19 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:X-YMail-OSG:Message-ID:Date:From:User-Agent:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding;
  b=Y3OiQFFqo7hoh9hIu+O9ZRu9UzZvA2kfdKwoGqyZemyiSCmkhv2aNPJcvuQEkjrMOCEHLPrs21jyAQ1vdgqxPscgw6SOJeX29DVsd7f04cHVF/WPGsoFMHe5K61snfSGnwVPZorHq6Eftngj0Z7GdWn+boGXYQbUT0ZG5kctFDU=  ;
Received: from unknown (HELO ?127.0.0.1?) (markharw00d@194.106.34.5 with plain)
  by smtp010.mail.ukl.yahoo.com with SMTP; 3 Jul 2007 18:40:19 -0000
X-YMail-OSG: 09DXBa0VM1naAnOiZVe928cAxMcTkwXfUfdmMpO4ojUryfRp8.6f2_grxGvpMRuij9wd89TUGw--
Message-ID: <468A9810.8080906@yahoo.co.uk>
Date: Tue, 03 Jul 2007 19:40:16 +0100
From: markharw00d <markharw00d@yahoo.co.uk>
User-Agent: Thunderbird 1.5.0.12 (Windows/20070509)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Pagination
References: <070320071609.20558.468A74D2000AD5C50000504E2207024553070A9C0701030C03@comcast.net>
In-Reply-To: <070320071609.20558.468A74D2000AD5C50000504E2207024553070A9C0701030C03@comcast.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

>>It looks that we may have different cases.

I was hoping to answer the original question which was how to retrieve 
pages of matching documents from a Lucene index (no database mentioned).

 >>So far worked just fine. I have 5000 rows of items and I think will 
still work fine later when I'd have 100K items.

I have a Lucene-plus-database hybrid application with 100 million 
documents running a business today, taking daily updates. Trust me, I 
don't store Lucene doc ids in the database because it is not  a scalable 
or robust approach for the reasons I outlined earlier :)

Cheers,
Mark



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29027-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 04 13:51:08 2007
Return-Path: <java-user-return-29027-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56307 invoked from network); 4 Jul 2007 13:51:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jul 2007 13:51:07 -0000
Received: (qmail 80116 invoked by uid 500); 4 Jul 2007 13:50:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80084 invoked by uid 500); 4 Jul 2007 13:50:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80055 invoked by uid 99); 4 Jul 2007 13:50:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Jul 2007 06:50:57 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.162.226 as permitted sender)
Received: from [64.233.162.226] (HELO nz-out-0506.google.com) (64.233.162.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Jul 2007 06:50:53 -0700
Received: by nz-out-0506.google.com with SMTP id i28so1080810nzi
        for <java-user@lucene.apache.org>; Wed, 04 Jul 2007 06:50:32 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=PvK+fhIkVuNUWz8Cf4gywkalo4wuhspbgdcYA4M4fzK2DXl/Zv2eWo+UESFHy0CVuyc7CBqSoIcwGXEXP044XsKJ3yQmKaBo69cvBbs7FEJau2lPzg3PInx1h61gn2wXcgnhl30ikXP4vpU5Sbw+9x0oYlp6ds9lEsEzTScw00w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=mbxPW/U5N47unhdLRUXIbLvsSlfWUVD6eORbS/8/1MX7fEap5n7xAiCw3mLLYC91c3GXz13fklke8bJf3orKy2Abhyua2H3MArHq9DYjQI35joDbVPtLkqLJ+r/QwbDNPKMLgbhaIYdWwI0fpAIc/e07CgX8ECvPvSWO1kX0jBE=
Received: by 10.142.83.4 with SMTP id g4mr512008wfb.1183557031899;
        Wed, 04 Jul 2007 06:50:31 -0700 (PDT)
Received: by 10.143.167.8 with HTTP; Wed, 4 Jul 2007 06:50:31 -0700 (PDT)
Message-ID: <c68e39170707040650r4495b012o96fa34db837ea5ac@mail.gmail.com>
Date: Wed, 4 Jul 2007 09:50:31 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: problems with deleteDocuments
In-Reply-To: <20070704004859.J82369@turing>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <20070704004859.J82369@turing>
X-Google-Sender-Auth: a5ba1506511df62c
X-Virus-Checked: Checked by ClamAV on apache.org

Nick, are you opening a new IndexSearcher after you close the IndexWriter?

-Yonik

On 7/4/07, Nick Johnson <yhprar@spatula.net> wrote:
> I'm having several problems with deleting documents with Lucene 2.2.
>
> Via the IndexWriter, I can successfully delete a document by its primary
> key via a Term, but ONLY if the field was stored as
> Field.Index.UN_TOKENIZED.  If it was stored as TOKENIZED, the debug output
> says it is deleting the document, but subsequent searches executed against
> terms that existed only in the original document (and not the one I add to
> replace it) still return the deleted document.  (Searches against terms
> only in the new document will return the new document.)
>
> Another problem is that if I first delete the document using
> deleteDocuments(Term) and then add a new document that happens to have
> identical fields to the one I deleted, the new document is not added.  Of
> course this operation is fairly wasteful, but it seems like the new
> document should replace the old one, even though they're the same.  This
> happens even if I perform a flush() after the delete and before the add.
> It will also happen even if I flush, close the IndexWriter and create a
> new IndexWriter.  It seems that once a document with a particular set of
> fields has been deleted, an identical one can never be re-added.
>
> Any pointers or things I should check or more detailed information I can
> provide to track this down?
>
>    Nick
>
> --
> "Courage isn't just a matter of not being frightened, you know. It's being
>  afraid and doing what you have to do anyway."
>    Doctor Who - Planet of the Daleks
> This message has been brought to you by Nick Johnson 2.3b1 and the number 6.
> http://healerNick.com/       http://morons.org/        http://spatula.net/
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29028-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 04 14:06:16 2007
Return-Path: <java-user-return-29028-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60579 invoked from network); 4 Jul 2007 14:06:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jul 2007 14:06:15 -0000
Received: (qmail 1970 invoked by uid 500); 4 Jul 2007 14:06:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1786 invoked by uid 500); 4 Jul 2007 14:06:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1775 invoked by uid 99); 4 Jul 2007 14:06:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Jul 2007 07:06:10 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Jul 2007 07:06:04 -0700
Received: by ug-out-1314.google.com with SMTP id c2so321912ugf
        for <java-user@lucene.apache.org>; Wed, 04 Jul 2007 07:05:42 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=I4mynWxyLwC0TnA0YpVUULzVILWjWskLu1Lk2rmP09PdcreCBDZ6CwILYPBV5diZf8kW7ZyXfPzXRyRIRIsVikvunidRuQJ69vxiR33hkzTkNED2jzAeDhI0bC/0+4eJV/V/DQkczXRK+UW4qruiiacdi7uCj6eLOFpal5k2L4A=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=LbG9CxNuC8WuatCsLSskPb2T1SAc0NwYe7sM7LaDHJ77HHlufxjYkadm7h93uaHx2/oN3meMMFdZDL6t/usqRiXMVfRrTE+qtXsv1uL3BLESfoQl5HBDexxgJCgzHghgGThBgDThRYspCXNfCX+Ba91nCkEC3SKqR+057lRrxlU=
Received: by 10.82.108.9 with SMTP id g9mr17904539buc.1183557942542;
        Wed, 04 Jul 2007 07:05:42 -0700 (PDT)
Received: by 10.82.167.12 with HTTP; Wed, 4 Jul 2007 07:05:42 -0700 (PDT)
Message-ID: <359a92830707040705r68dccf51q74efd085910b044e@mail.gmail.com>
Date: Wed, 4 Jul 2007 10:05:42 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Indexing and searching - help
In-Reply-To: <11426245.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_83909_17842742.1183557942505"
References: <11426245.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_83909_17842742.1183557942505
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

A couple of things would help us help you....

1> tell us what you're trying to do. What's the point of your code?
     Offhand, I can't tell what it is you're really after.

2> post an example of query.toString(); along with your sample
     for one of the offending queries.

3> Post the query string itself from above.

TooManyClauses really means that the underlying expansion
of the query finds more than the limit (1024 by default) that
match your wildcard. For instance, s* would match
s, sat, sent, sight, s...... So this expansion would barf if your
index contains more than 1024 (or whatever) terms that start
with 's'. And you're compounding your problem by adding multiple
clauses that are single-letter wildcards.

I suspect (going back to <1>) that people would have better
suggestions if you outlined your purpose....

Best
Erick

On 7/4/07, emmettwalsh <emmettwalsh@gmail.com> wrote:
>
>
> Hi,
> :
> : lucene documentation seems to be very confusing... here is my
> predicament
> :
> : I have an object like the following:
> :
> : public class PropertyImpl implements Property {
> :
> : String id;
> :
> : List<String> names = new ArrayList<String>();
> :
> : String address = "";
> :
> : String city = "";
> :
> : String street = "";
> :
> : String state = "";
> :
> : String cachedMatchingString;
> :
> : ...
> :
> : ..
> : public String toString() {
> : // save some time
> : if (cachedMatchingString == null) {
> :
> : StringBuffer buf = new StringBuffer();
> :
> : for (String name : names) {
> : //buf.append(name + ",");
> : buf.append(name + " ");
> : }
> :
> : if (address != null) {
> : //buf.append(address + ",");
> : buf.append(address + " ");
> : }
> : if (city != null) {
> : //buf.append(city + ",");
> : buf.append(city + " ");
> : }
> : if (street != null) {
> : //buf.append(street + ",");
> : buf.append(street + " ");
> : }
> : if (state != null) {
> : //buf.append(state);
> : buf.append(state);
> : }
> :
> : // get rid of any spaces
> : //cachedMatchingString = buf.toString().replace(" ", "");
> : cachedMatchingString = buf.toString();
> : }
> : return cachedMatchingString;
> : }
> :
> :
> : A typical instance of this object would have the following data
> :
> : id=123134
> : names= {'Emmett Walsh', 'John Walsh'}
> : address="Milltown."
> : city="Dublin"
> : street="Bankside Cottages"
> : state="Ireland"
> : cachedMatchingString="Emmett Walsh John Walsh Milltown Dublin Bankside
> : Cottages Ireland"
> :
> :
> :
> : I have about 8000 of these objects which I store in a hashmap for direct
> : access based on there id. It is the id(s) that I need lucene to return
> to
> me
> : so that I can retireve the desired object(s) from the hashmap.
> :
> : The cachedMatchingString string is what I use when indexing the
> information
> : like following:
> :
> : e.g. so for each of the 8000 objects i do the following to build the
> index
> :
> : idxWriter.addDocument(createDocument(prop));
> :
> :
> : private static Document createDocument(Property prop) {
> : Document doc = new Document();
> :
> : Field field = new Field("id", prop.getId(), Store.YES, Index.NO);
> : doc.add(field);
> :
> : Field field2 = new Field("content", prop.toString(), Store.NO,
> : Index.TOKENIZED);  //will tokenise our long string
> : doc.add(field2);
> :
> : return doc;
> : }
> :
> :
> :
> : Searching
> : I have a text field in my app that typically would take in a strings
> like
> :
> : "Main s" , which
> : would end up in a query like "Main AND s*" like follows
> :
> : "B", which would end up in a query like "b*"
> :
> :                         queryString = queryString.trim();  //the string
> : taken in from textbox
> :
> :
> : String[] strings = queryString.split(" ");
> : int numStrings = strings.length;
> :
> : StringBuffer luceneQuery = new StringBuffer();
> :
> : for(int i=0;i<numStrings;i++){
> : String aString = strings[i];
> : if(aString.equals("")){
> : continue;
> : }
> : luceneQuery.append(aString);
> : if((i+1) != numStrings){
> : luceneQuery.append(" AND ");
> : }else{
> : luceneQuery.append("*");
> : }
> : }
> :
> : //BooleanQuery.setMaxClauseCount(2*1024);
> :
> :
> : QueryParser parser = new QueryParser("content",
> : new StandardAnalyzer());
> :
> :
> : org.apache.lucene.search.Query query =
> : parser.parse(luceneQuery.toString());
> :
> : // Search for the query
> : Hits hits = searcher.search(query);
> :
> :
> : but i keep getting Toomanyclausesexceptions
> :
> : Any suggestions on how to index or search better ?
> --
> View this message in context:
> http://www.nabble.com/Lucene-Indexing-and-searching---help-tf4022884.html#a11426245
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_83909_17842742.1183557942505--

From java-user-return-29029-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 04 14:19:39 2007
Return-Path: <java-user-return-29029-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66390 invoked from network); 4 Jul 2007 14:19:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jul 2007 14:19:38 -0000
Received: (qmail 32302 invoked by uid 500); 4 Jul 2007 14:19:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32261 invoked by uid 500); 4 Jul 2007 14:19:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32250 invoked by uid 99); 4 Jul 2007 14:19:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Jul 2007 07:19:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [213.162.48.15] (HELO soufre.accelance.net) (213.162.48.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Jul 2007 07:19:29 -0700
Received: from [192.168.3.123] (LSt-Amand-152-32-31-90.w82-127.abo.wanadoo.fr [82.127.74.90])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by soufre.accelance.net (Postfix) with ESMTP id 6D28B5E26
	for <java-user@lucene.apache.org>; Wed,  4 Jul 2007 16:19:04 +0200 (CEST)
Message-ID: <468BAC54.70601@garambrogne.net>
Date: Wed, 04 Jul 2007 16:19:00 +0200
From: Mathieu Lecarme <mathieu@garambrogne.net>
User-Agent: Thunderbird 2.0.0.4 (X11/20070604)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Index partitioning by term
References: <5791bc090707040531x4a7b0309nb3e5982fab8ea0c6@mail.gmail.com>
In-Reply-To: <5791bc090707040531x4a7b0309nb3e5982fab8ea0c6@mail.gmail.com>
X-Enigmail-Version: 0.95.2
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Ndapa Nakashole a crit :
> I am considering using Lucene in my mini Grid-based search engine. I
> would
> like to partition my index by term as opposed to partition by
> document. From
> what i have read in the mailing list so far, it seems like partition
> by term
> is impossible with Lucene. am i right to conclude this! I know Nutch
> partitions by document, by in my environment of very limited bandwidth i
> would like to avoid partition by document.
>
Each partitionned index is a full index, if your try to partition by
term, you can refer a Document in an other index.
A cluster with low bandwidth seems strange. Are you using a cluster on
cell phones?!

M.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29030-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 04 14:20:37 2007
Return-Path: <java-user-return-29030-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66796 invoked from network); 4 Jul 2007 14:20:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jul 2007 14:20:37 -0000
Received: (qmail 35188 invoked by uid 500); 4 Jul 2007 14:20:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35160 invoked by uid 500); 4 Jul 2007 14:20:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35149 invoked by uid 99); 4 Jul 2007 14:20:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Jul 2007 07:20:32 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.134.184 as permitted sender)
Received: from [209.85.134.184] (HELO mu-out-0910.google.com) (209.85.134.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Jul 2007 07:20:28 -0700
Received: by mu-out-0910.google.com with SMTP id g7so2548385muf
        for <java-user@lucene.apache.org>; Wed, 04 Jul 2007 07:20:07 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=RxuIp7ZVzQv2SBIRY9r0DX/1tdzIaOo3izz/wLb9rvQm3N5Map7jkm/MNxKaoErDKR7caBiHPYgjAN/IuPmVE6Zg4bK+ekdMSA2BFMoWJlwdsGPRulel6PWlM9VHmpu3jfYAkUflf/aHzqpga9+7n+kSH0gEUhhOMvqG/Wh6I2c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=MJw38OYy//fZt5hgkTjA5O6ZDPKaEtAn0caqbm7+QQpJhbtgEsXotneyoLHtmvGyFzfzWza3SGbCJ87XaRsnhAcBVXlO4FtWgcONFcGsk98PpZ/8R/3AK/n+PXL/yK71gQDJo6N6b8wkRVlRaukKZ+QpTfuXSqd3gRESXQ3c/68=
Received: by 10.82.134.12 with SMTP id h12mr17970351bud.1183558806157;
        Wed, 04 Jul 2007 07:20:06 -0700 (PDT)
Received: by 10.82.167.12 with HTTP; Wed, 4 Jul 2007 07:20:05 -0700 (PDT)
Message-ID: <359a92830707040720w1e605a3p4f7b0243746aae8a@mail.gmail.com>
Date: Wed, 4 Jul 2007 10:20:05 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Modify search results
In-Reply-To: <ac440ca10707040319i3cad12cfnc3d2a35c77e9aa7e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_84057_12242276.1183558805916"
References: <ac440ca10707021114s58762eeapf61026e70621087d@mail.gmail.com>
	 <Pine.LNX.4.58.0707031440270.16912@hal.rescomp.berkeley.edu>
	 <ac440ca10707040319i3cad12cfnc3d2a35c77e9aa7e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_84057_12242276.1183558805916
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

First, get Luke (google lucene, luke). Use it to open the index created
by the demo (I confess I don't know if the index is a RAMdir or FSDIR.
if it's a RAMdir, find the code in the demo that opens it and change it
to an FSDir). This is important as it'll give you a clue about the
structure of an index.

What you'll see in Luke is a set of fields along the left side.
(Available fields).

In general, these fields are accessible through the Document class.
You get a document by calling IndexReader.document(#);, where
# is the *lucene* document id (see the Documents tab in Luke). These
IDs are assigned by lucene, so don't count on them being the same over
time (as in across different openings of IndexReader).

Then call document.get("field name"); to get the value stored.

You get the lucene document IDs from the Hits obect.

Best of luck trying to learn both at once....
Erick

On 7/4/07, Robert Mullin <amalafrida@gmail.com> wrote:
>
> Hoss,
>
> Thanks for your reply.  You are correct.  I am working with the Lucene
> Demo
> and trying to get some traction.  But without much luck.  Most postings on
> the list are way beyond me.  I continue to research the literature in
> order
> to find something that will bring me gently forward so that I can begin to
> understand how to use Lucene.  Not much luck so far.
>
> I am in the process of teaching myself Java, so as the days go by things
> should become more clear.
>
> But about the results that Lucene produces . . . how do I begin to look at
> and then manipulate those results?  I understand that Lucene is not an
> application, that I must develop the interface.  But I do need to
> "intercept" the results and "manipulate" it in some way . . . Hunh????\
>
> In any cas, thanks for your response.
>
> Robert
>
> On 7/3/07, Chris Hostetter <hossman_lucene@fucit.org> wrote:
> >
> >
> > : Question: how do I go about manipulating the search results?  Is it
> > possible
> > : to "intercept" the listing of HTML pages returned by the Lucene search
> > : function and modify the report it sends to the screen.
> > :
> > : Can this be as simple as adding a line to the Lucene Java code so that
> > : instead of reporting a simple chapter number, it will report the
> chapter
> >
> > please bear in mind that Lucene is not an application, it is a library
> ...
> > it will return you the results of a query as a datastructure which you
> can
> > then dispplay in your application anyway you want.  it sounds like you
> are
> > looking at a particular chunk of example client code that does a search
> > and prints some results to the screen (perhaps you are even looking at
> the
> > demo that comes with lucene and is refered to in the "getting started"
> > tutorial) ... if it is usefull to use that as a starting point for you
> > application then by all means do so, but the Lucene library doesn't know
> > (and doesn't care) how you are using the results it produces ... that's
> > entirely up to you.
> >
> >
> >
> > -Hoss
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_84057_12242276.1183558805916--

From java-user-return-29031-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 04 14:30:33 2007
Return-Path: <java-user-return-29031-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70957 invoked from network); 4 Jul 2007 14:30:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jul 2007 14:30:31 -0000
Received: (qmail 62717 invoked by uid 500); 4 Jul 2007 14:30:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62662 invoked by uid 500); 4 Jul 2007 14:30:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62647 invoked by uid 99); 4 Jul 2007 14:30:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Jul 2007 07:30:26 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Jul 2007 07:30:23 -0700
Received: by ug-out-1314.google.com with SMTP id c2so326495ugf
        for <java-user@lucene.apache.org>; Wed, 04 Jul 2007 07:30:02 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=YmCvkiV29mMuH6MbfPkzoDQIC6zky6laV4FtTNNjQ2m1ulxmPJ1DulVVfjuHMQ4Gwp5pzEAjG3K5fDWHizl01k/D8SGDC6ZBXRASnnkl+KrHhgAyxBXSWa4efPuNqqJgphUyQXabcRHLjNzh4gwoDoiQRLKXLSoVgHxUQxLV1qQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Urgsi3Ucx4D0TDS3P6DJ2cleXgaI+u762AejrVb2QsBqgCAl47JZR74F7qo0u5/R69MqBpiDnV7npxiuwgxfX1dWeSmR8YqnY3RBTHSdzCoCw+wKMsWlOQDbRsSIFFHUSqwP3BaBF6odxfS2UxX/mYBhggR7xxJFp0txUzK3cZQ=
Received: by 10.82.183.19 with SMTP id g19mr17963657buf.1183559401758;
        Wed, 04 Jul 2007 07:30:01 -0700 (PDT)
Received: by 10.82.167.12 with HTTP; Wed, 4 Jul 2007 07:30:01 -0700 (PDT)
Message-ID: <359a92830707040730y31ef1934u93784df70e9c40de@mail.gmail.com>
Date: Wed, 4 Jul 2007 10:30:01 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: problems with deleteDocuments
In-Reply-To: <20070704004859.J82369@turing>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_84149_2664082.1183559401666"
References: <20070704004859.J82369@turing>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_84149_2664082.1183559401666
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

This is exactly the behavior I'd expect.

Consider what would happen otherwise. Say you have documents
with the following values for a field (call it blah).
some data
some data I put in the index
lots of data
data

Then I don't want deleting on the term blah:data to remove all
of them. Which seems to be what you're asking. Even if
you restricted things to "phrases", then deleting on the term
'blah:some data' would remove two documents.

So, while UN_TOKENIZED isn't a *requirement*, exact total term
matches *is* the requirement. By that, I meant that whatever
goes into the field must not be broken into pieces by the indexing
tokenizer for deletes to work as you expect.

Best
Erick


On 7/4/07, Nick Johnson <yhprar@spatula.net> wrote:
>
> I'm having several problems with deleting documents with Lucene 2.2.
>
> Via the IndexWriter, I can successfully delete a document by its primary
> key via a Term, but ONLY if the field was stored as
> Field.Index.UN_TOKENIZED.  If it was stored as TOKENIZED, the debug output
> says it is deleting the document, but subsequent searches executed against
> terms that existed only in the original document (and not the one I add to
> replace it) still return the deleted document.  (Searches against terms
> only in the new document will return the new document.)
>
> Another problem is that if I first delete the document using
> deleteDocuments(Term) and then add a new document that happens to have
> identical fields to the one I deleted, the new document is not added.  Of
> course this operation is fairly wasteful, but it seems like the new
> document should replace the old one, even though they're the same.  This
> happens even if I perform a flush() after the delete and before the add.
> It will also happen even if I flush, close the IndexWriter and create a
> new IndexWriter.  It seems that once a document with a particular set of
> fields has been deleted, an identical one can never be re-added.
>
> Any pointers or things I should check or more detailed information I can
> provide to track this down?
>
>    Nick
>
> --
> "Courage isn't just a matter of not being frightened, you know. It's being
> afraid and doing what you have to do anyway."
>    Doctor Who - Planet of the Daleks
> This message has been brought to you by Nick Johnson 2.3b1 and the number
> 6.
> http://healerNick.com/       http://morons.org/        http://spatula.net/
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_84149_2664082.1183559401666--

From java-user-return-29032-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 04 15:56:47 2007
Return-Path: <java-user-return-29032-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76134 invoked from network); 4 Jul 2007 15:56:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jul 2007 15:56:46 -0000
Received: (qmail 35909 invoked by uid 500); 4 Jul 2007 15:56:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35877 invoked by uid 500); 4 Jul 2007 15:56:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35866 invoked by uid 99); 4 Jul 2007 15:56:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Jul 2007 08:56:40 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yhprar@spatula.net designates 208.96.51.42 as permitted sender)
Received: from [208.96.51.42] (HELO turing.morons.org) (208.96.51.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Jul 2007 08:56:35 -0700
Received: by turing.morons.org (Postfix, from userid 1001)
	id 0A58317030; Wed,  4 Jul 2007 08:56:13 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by turing.morons.org (Postfix) with ESMTP id 0776F1702C
	for <java-user@lucene.apache.org>; Wed,  4 Jul 2007 08:56:13 -0700 (PDT)
Date: Wed, 4 Jul 2007 08:56:13 -0700 (PDT)
From: Nick Johnson <yhprar@spatula.net>
X-X-Sender: spatula@turing
To: java-user@lucene.apache.org
Subject: Re: problems with deleteDocuments
In-Reply-To: <c68e39170707040650r4495b012o96fa34db837ea5ac@mail.gmail.com>
Message-ID: <20070704085502.S82369@turing>
References: <20070704004859.J82369@turing> <c68e39170707040650r4495b012o96fa34db837ea5ac@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

I am.

On Wed, 4 Jul 2007, Yonik Seeley wrote:

> Nick, are you opening a new IndexSearcher after you close the IndexWriter?

-- 
"Courage isn't just a matter of not being frightened, you know. It's being
 afraid and doing what you have to do anyway."
   Doctor Who - Planet of the Daleks
This message has been brought to you by Nick Johnson 2.3b1 and the number 6.
http://healerNick.com/       http://morons.org/        http://spatula.net/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29033-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 04 16:02:01 2007
Return-Path: <java-user-return-29033-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78101 invoked from network); 4 Jul 2007 16:02:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jul 2007 16:02:00 -0000
Received: (qmail 45883 invoked by uid 500); 4 Jul 2007 16:01:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45851 invoked by uid 500); 4 Jul 2007 16:01:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45840 invoked by uid 99); 4 Jul 2007 16:01:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Jul 2007 09:01:55 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yhprar@spatula.net designates 208.96.51.42 as permitted sender)
Received: from [208.96.51.42] (HELO turing.morons.org) (208.96.51.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Jul 2007 09:01:50 -0700
Received: by turing.morons.org (Postfix, from userid 1001)
	id B671B17030; Wed,  4 Jul 2007 09:01:29 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by turing.morons.org (Postfix) with ESMTP id 8B4EA1702C
	for <java-user@lucene.apache.org>; Wed,  4 Jul 2007 09:01:29 -0700 (PDT)
Date: Wed, 4 Jul 2007 09:01:29 -0700 (PDT)
From: Nick Johnson <yhprar@spatula.net>
X-X-Sender: spatula@turing
To: java-user@lucene.apache.org
Subject: Re: problems with deleteDocuments
In-Reply-To: <359a92830707040730y31ef1934u93784df70e9c40de@mail.gmail.com>
Message-ID: <20070704085616.E82369@turing>
References: <20070704004859.J82369@turing> <359a92830707040730y31ef1934u93784df70e9c40de@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

I think I follow you.  I don't have a problem with storing something like 
a primary key as UN_TOKENIZED, though I'm a bit baffled about why it 
didn't work as TOKENIZED, since the _only_ thing in that field is the 
value of the primary key (ie, the string value of some integer).  It seems 
like it should have matched exactly either way...unless perhaps the 
StopAnalyzer is tokenizing the primary key strangely.

What still confounds me is the second problem- where adding a new document 
that has identical fields to a deleted document fails to store the new 
document.

On Wed, 4 Jul 2007, Erick Erickson wrote:

> This is exactly the behavior I'd expect.
> 
> Consider what would happen otherwise. Say you have documents
> with the following values for a field (call it blah).
> some data
> some data I put in the index
> lots of data
> data
> 
> Then I don't want deleting on the term blah:data to remove all
> of them. Which seems to be what you're asking. Even if
> you restricted things to "phrases", then deleting on the term
> 'blah:some data' would remove two documents.
> 
> So, while UN_TOKENIZED isn't a *requirement*, exact total term
> matches *is* the requirement. By that, I meant that whatever
> goes into the field must not be broken into pieces by the indexing
> tokenizer for deletes to work as you expect.
> 
> Best
> Erick

-- 
"Courage isn't just a matter of not being frightened, you know. It's being
 afraid and doing what you have to do anyway."
   Doctor Who - Planet of the Daleks
This message has been brought to you by Nick Johnson 2.3b1 and the number 6.
http://healerNick.com/       http://morons.org/        http://spatula.net/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29034-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 04 16:20:29 2007
Return-Path: <java-user-return-29034-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84693 invoked from network); 4 Jul 2007 16:20:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jul 2007 16:20:28 -0000
Received: (qmail 71603 invoked by uid 500); 4 Jul 2007 16:20:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71572 invoked by uid 500); 4 Jul 2007 16:20:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71561 invoked by uid 99); 4 Jul 2007 16:20:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Jul 2007 09:20:24 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Jul 2007 09:20:18 -0700
Received: by ug-out-1314.google.com with SMTP id c2so347294ugf
        for <java-user@lucene.apache.org>; Wed, 04 Jul 2007 09:19:57 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=mqaxn7PQ5Co1Jnid4QKrkYDVgAK35fpikhoAIkh8SEtiuxt3RgFagvLMxq59/3w9DyxjakDqgb2TQuofQDjExgTiBudwhZ7G7rKfUStz/5aZjhMPOk9i9XIOMNG6TQNaFAxQw2L14i3ssrYs9p8mXyKS7+69GIF6tFIbW3ndDyc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=UCX60N6dtaZmMILDaT2z8iztOESyEpHqGQrV2/twSlEf7BCJxTEkf/d0eZjp6e2hyw2GAcQALSpH9kY2dtxZdf5jwmDpkeqR2BZs4Swvf1GFLK9DHSDVD+wJ/o6xbNr/w7pMHbDV6IsdselgsB43oR0pDb5F/tL/KrOISr72cSo=
Received: by 10.82.183.19 with SMTP id g19mr18162892buf.1183565995830;
        Wed, 04 Jul 2007 09:19:55 -0700 (PDT)
Received: by 10.82.167.12 with HTTP; Wed, 4 Jul 2007 09:19:55 -0700 (PDT)
Message-ID: <359a92830707040919t1f831ef1s15eb0adb4fb27554@mail.gmail.com>
Date: Wed, 4 Jul 2007 12:19:55 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: problems with deleteDocuments
In-Reply-To: <20070704085616.E82369@turing>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_85138_841592.1183565995800"
References: <20070704004859.J82369@turing>
	 <359a92830707040730y31ef1934u93784df70e9c40de@mail.gmail.com>
	 <20070704085616.E82369@turing>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_85138_841592.1183565995800
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

See below

On 7/4/07, Nick Johnson <yhprar@spatula.net> wrote:
>
> I think I follow you.  I don't have a problem with storing something like
> a primary key as UN_TOKENIZED, though I'm a bit baffled about why it
> didn't work as TOKENIZED, since the _only_ thing in that field is the
> value of the primary key (ie, the string value of some integer).  It seems
> like it should have matched exactly either way...unless perhaps the
> StopAnalyzer is tokenizing the primary key strangely.



This surprises me as well. Could you post an example of the value you store,
and the analyzer you're using? Perhaps a code snippet, or, better yet, a
small,
self-contained program illustrating the problem. I know when I've tried this
latter, I've often found out what was happening. A recommendation: if you
try to make a self-contained program, please use one of the stock analyzers
since we're interested in lucene's behavior, not the behavior of custom
analyzers.


What still confounds me is the second problem- where adding a new document
> that has identical fields to a deleted document fails to store the new
> document.



Ditto for the self-contained program here. How are you identifying the
failure to index the second doc? Luke might be your friend...


On Wed, 4 Jul 2007, Erick Erickson wrote:
>
> > This is exactly the behavior I'd expect.
> >
> > Consider what would happen otherwise. Say you have documents
> > with the following values for a field (call it blah).
> > some data
> > some data I put in the index
> > lots of data
> > data
> >
> > Then I don't want deleting on the term blah:data to remove all
> > of them. Which seems to be what you're asking. Even if
> > you restricted things to "phrases", then deleting on the term
> > 'blah:some data' would remove two documents.
> >
> > So, while UN_TOKENIZED isn't a *requirement*, exact total term
> > matches *is* the requirement. By that, I meant that whatever
> > goes into the field must not be broken into pieces by the indexing
> > tokenizer for deletes to work as you expect.
> >
> > Best
> > Erick
>
> --
> "Courage isn't just a matter of not being frightened, you know. It's being
> afraid and doing what you have to do anyway."
>    Doctor Who - Planet of the Daleks
> This message has been brought to you by Nick Johnson 2.3b1 and the number
> 6.
> http://healerNick.com/       http://morons.org/        http://spatula.net/
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_85138_841592.1183565995800--

From java-user-return-29035-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 04 16:48:19 2007
Return-Path: <java-user-return-29035-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93043 invoked from network); 4 Jul 2007 16:48:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jul 2007 16:48:18 -0000
Received: (qmail 27074 invoked by uid 500); 4 Jul 2007 16:48:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26047 invoked by uid 500); 4 Jul 2007 16:48:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26033 invoked by uid 99); 4 Jul 2007 16:48:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Jul 2007 09:48:13 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yhprar@spatula.net designates 208.96.51.42 as permitted sender)
Received: from [208.96.51.42] (HELO turing.morons.org) (208.96.51.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Jul 2007 09:48:08 -0700
Received: by turing.morons.org (Postfix, from userid 1001)
	id 6169B17030; Wed,  4 Jul 2007 09:47:46 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by turing.morons.org (Postfix) with ESMTP id 5E0CF1702C
	for <java-user@lucene.apache.org>; Wed,  4 Jul 2007 09:47:46 -0700 (PDT)
Date: Wed, 4 Jul 2007 09:47:46 -0700 (PDT)
From: Nick Johnson <yhprar@spatula.net>
X-X-Sender: spatula@turing
To: java-user@lucene.apache.org
Subject: Re: problems with deleteDocuments
In-Reply-To: <359a92830707040919t1f831ef1s15eb0adb4fb27554@mail.gmail.com>
Message-ID: <20070704093520.F82369@turing>
References: <20070704004859.J82369@turing>  <359a92830707040730y31ef1934u93784df70e9c40de@mail.gmail.com>
  <20070704085616.E82369@turing> <359a92830707040919t1f831ef1s15eb0adb4fb27554@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

A little more digging and I found the problem (amazing what coffee can 
do).  It was a bad assertion in my unit test.  Basically I was checking to 
see that the article was indexed after the update, but didn't check to see 
whether it was indexed BEFORE the update.  It wasn't.  Or rather, it was, 
but not on the term I was using in my unit tests to check for existence.  
I was performing this check by searching on "id:{primary key}".

It turned out that switching from StopAnalyzer to StandardAnalyzer on both 
the IndexWriter and the QueryParser cured both problems.  Looking at the 
source, this seems to be because StopAnalyzer uses a LowerCaseTokenizer, 
which is a LetterTokenizer, which excludes non-letters, whereas the 
StandardAnalyzer uses a LowerCaseFilter instead, which just sends 
everything toLowerCase() and consequently does not exclude numbers.

On Wed, 4 Jul 2007, Erick Erickson wrote:

> See below
> 
> On 7/4/07, Nick Johnson <yhprar@spatula.net> wrote:
> >
> > I think I follow you.  I don't have a problem with storing something like
> > a primary key as UN_TOKENIZED, though I'm a bit baffled about why it
> > didn't work as TOKENIZED, since the _only_ thing in that field is the
> > value of the primary key (ie, the string value of some integer).  It seems
> > like it should have matched exactly either way...unless perhaps the
> > StopAnalyzer is tokenizing the primary key strangely.
> 
> 
> 
> This surprises me as well. Could you post an example of the value you store,
> and the analyzer you're using? Perhaps a code snippet, or, better yet, a
> small,
> self-contained program illustrating the problem. I know when I've tried this
> latter, I've often found out what was happening. A recommendation: if you
> try to make a self-contained program, please use one of the stock analyzers
> since we're interested in lucene's behavior, not the behavior of custom
> analyzers.
> 
> 
> What still confounds me is the second problem- where adding a new document
> > that has identical fields to a deleted document fails to store the new
> > document.
> 
> 
> 
> Ditto for the self-contained program here. How are you identifying the
> failure to index the second doc? Luke might be your friend...
> 
> 
> On Wed, 4 Jul 2007, Erick Erickson wrote:
> >
> > > This is exactly the behavior I'd expect.
> > >
> > > Consider what would happen otherwise. Say you have documents
> > > with the following values for a field (call it blah).
> > > some data
> > > some data I put in the index
> > > lots of data
> > > data
> > >
> > > Then I don't want deleting on the term blah:data to remove all
> > > of them. Which seems to be what you're asking. Even if
> > > you restricted things to "phrases", then deleting on the term
> > > 'blah:some data' would remove two documents.
> > >
> > > So, while UN_TOKENIZED isn't a *requirement*, exact total term
> > > matches *is* the requirement. By that, I meant that whatever
> > > goes into the field must not be broken into pieces by the indexing
> > > tokenizer for deletes to work as you expect.
> > >
> > > Best
> > > Erick
> >
> > --
> > "Courage isn't just a matter of not being frightened, you know. It's being
> > afraid and doing what you have to do anyway."
> >    Doctor Who - Planet of the Daleks
> > This message has been brought to you by Nick Johnson 2.3b1 and the number
> > 6.
> > http://healerNick.com/       http://morons.org/        http://spatula.net/
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 
> 

-- 
"Courage isn't just a matter of not being frightened, you know. It's being
 afraid and doing what you have to do anyway."
   Doctor Who - Planet of the Daleks
This message has been brought to you by Nick Johnson 2.3b1 and the number 6.
http://healerNick.com/       http://morons.org/        http://spatula.net/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29036-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 04 17:55:47 2007
Return-Path: <java-user-return-29036-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3740 invoked from network); 4 Jul 2007 17:55:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jul 2007 17:55:45 -0000
Received: (qmail 18418 invoked by uid 500); 4 Jul 2007 17:55:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18370 invoked by uid 500); 4 Jul 2007 17:55:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18341 invoked by uid 99); 4 Jul 2007 17:55:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Jul 2007 10:55:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [64.81.62.48] (HELO mail01.apmindsf.com) (64.81.62.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Jul 2007 10:55:38 -0700
Received: from [172.30.62.126] (helo=h00215.dev.sfo1.metaweb.com)
	by mail01.apmindsf.com with esmtp (Exim 4.50)
	id 1I694O-0005KR-Fi; Wed, 04 Jul 2007 10:55:16 -0700
Received: from localhost (localhost [127.0.0.1])
	by h00215.dev.sfo1.metaweb.com (Postfix) with ESMTP id 581BB1755B8;
	Wed,  4 Jul 2007 14:05:23 -0400 (EDT)
X-Virus-Scanned: amavisd-new at 
X-Spam-Score: -2.679
X-Spam-Level: 
Received: from h00215.dev.sfo1.metaweb.com ([127.0.0.1])
	by localhost (h00215.dev.sfo1.metaweb.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id cfau5Vn0Ojys; Wed,  4 Jul 2007 14:05:18 -0400 (EDT)
Received: from h00215.dev.sfo1.metaweb.com (zimbra.metaweb.com [172.30.62.126])
	by h00215.dev.sfo1.metaweb.com (Postfix) with ESMTP id 22AFB175827;
	Wed,  4 Jul 2007 14:05:18 -0400 (EDT)
Date: Wed, 4 Jul 2007 14:05:17 -0400 (EDT)
From: Tim Sturge <tsturge@metaweb.com>
To: java-user@lucene.apache.org
Cc: hossman_lucene@fucit.org
Message-ID: <20153459.717571183572317952.JavaMail.root@h00215>
In-Reply-To: <30247405.717551183571286058.JavaMail.root@h00215>
Subject: Re: product based term combination for BooleanQuery?
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Originating-IP: [70.231.236.182]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.679 tagged_above=-10 required=6.6
	tests=[AWL=-0.080, BAYES_00=-2.599]


:-) The use of wikipedia data here is no secret; it's all over www.freebase.com. I just hoped to avoid being sucked into a "what is the best way to index wikipedia with Lucene?" discussion, which I believe several other groups are already tackling.

At index time, I used a per document boost (over all fields) and a per field bost (over all documents). I can certainly factor out the first into a query boost, but I was under the impression that if I ever wanted to combine fields (eg to index all "name" "alias" and "title" data in a single "head" field) then I had to pre-boost the data prior to combining it. I tend to believe that these (short) fields contain more relevant information than (long) wikipedia articles or other documents. 

Should idf and tf take care of that short/long quality distinction? It sounds like you feel they should. 
I'll build an index without the per field boost and see if that produces improved results.

Thanks,

Tim

----- Original Message -----
From: "Chris Hostetter" <hossman_lucene@fucit.org>
To: "Lucene Users" <java-user@lucene.apache.org>
Sent: Tuesday, July 3, 2007 10:26:57 PM (GMT-0800) America/Los_Angeles
Subject: Re: product based term combination for BooleanQuery?


(side note: if you are going to try and obfuscate your field names when
sending explain output so we don't know you are using wikipedia data (not
that we care), please at least be consistent about it so the final
explanations actual make sense -- it will save everyone a lot of confusion
and help us help you)

the biggest factor in your scores seems to be the fieldNorms for your
name, title and alias fields ... they are so high, that tf and idf are
pretty much irrelevant.

By the looks of it, when you were indexing your docs, you used a
consistent field boost per field on every instance of that field for every
document ... this is really not a use case where index time field (or
document) boosts make sense.  in my opinion hte number one thing you can
do to imrpove your relevency right now is to stop using index time
boosts and use query boosts instead.

If you don't want to reindex completely the LengthNormModifier class (in
the misc contrib) can update all of your norms in place without reindexing
and throw away any index time boosts you had.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29037-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 04 19:10:04 2007
Return-Path: <java-user-return-29037-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15753 invoked from network); 4 Jul 2007 19:10:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jul 2007 19:10:04 -0000
Received: (qmail 21239 invoked by uid 500); 4 Jul 2007 19:10:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20178 invoked by uid 500); 4 Jul 2007 19:09:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20163 invoked by uid 99); 4 Jul 2007 19:09:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Jul 2007 12:09:57 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.134.188 as permitted sender)
Received: from [209.85.134.188] (HELO mu-out-0910.google.com) (209.85.134.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Jul 2007 12:09:53 -0700
Received: by mu-out-0910.google.com with SMTP id g7so2622695muf
        for <java-user@lucene.apache.org>; Wed, 04 Jul 2007 12:09:32 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Or1RMKzWpoDS4zL0XYPTrKRdycGCgyif3aGH99wZyrm2icQNIH+HHWCiuzsCi0W7VXdON364o02nvTmYPToOv4l/fwwd6ZWKFyh2rjFesJwFfgSM3yaxUuarHeZX2WqtKh6ue2iPt1haYp/VX0uHZuQ5MyzZNKmfoAkUyNOb/to=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Lh5Z13yfZL37Yl3oXYRKDw8lxjQyeN4ZzRjTpipKBw6hIjkhgqUvMwS18TmX2MOVa+mxZ4KLsbyf3pbiVUDUrnUepqsYBd5owBi+cLgNhNVx5iWftUBs3kOj16RwF/dsVhsRZrXdbpU9AVhUC/CRPZbYd7kiFXPmFXeiqzIi2a0=
Received: by 10.82.100.1 with SMTP id x1mr18511158bub.1183576171653;
        Wed, 04 Jul 2007 12:09:31 -0700 (PDT)
Received: by 10.82.167.12 with HTTP; Wed, 4 Jul 2007 12:09:31 -0700 (PDT)
Message-ID: <359a92830707041209r6616d06br164cd49eb7d4afdf@mail.gmail.com>
Date: Wed, 4 Jul 2007 15:09:31 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: product based term combination for BooleanQuery?
In-Reply-To: <20153459.717571183572317952.JavaMail.root@h00215>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_86254_4685527.1183576171609"
References: <30247405.717551183571286058.JavaMail.root@h00215>
	 <20153459.717571183572317952.JavaMail.root@h00215>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_86254_4685527.1183576171609
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

It looks like you may already be aware of this, but if not, this is
something Chris H. posted quite a while ago that I found useful....

<<<it depends on your goal.  index time field boosts are a way to express
things like "this documents title is worth twice as much as the title of
most documents" query time boosts are a way to express "i care about
matches on this clause of my query twice as much as i do about matches to
other clauses of my query.>>>

Erick

On 7/4/07, Tim Sturge <tsturge@metaweb.com> wrote:
>
>
> :-) The use of wikipedia data here is no secret; it's all over
> www.freebase.com. I just hoped to avoid being sucked into a "what is the
> best way to index wikipedia with Lucene?" discussion, which I believe
> several other groups are already tackling.
>
> At index time, I used a per document boost (over all fields) and a per
> field bost (over all documents). I can certainly factor out the first into a
> query boost, but I was under the impression that if I ever wanted to combine
> fields (eg to index all "name" "alias" and "title" data in a single "head"
> field) then I had to pre-boost the data prior to combining it. I tend to
> believe that these (short) fields contain more relevant information than
> (long) wikipedia articles or other documents.
>
> Should idf and tf take care of that short/long quality distinction? It
> sounds like you feel they should.
> I'll build an index without the per field boost and see if that produces
> improved results.
>
> Thanks,
>
> Tim
>
> ----- Original Message -----
> From: "Chris Hostetter" <hossman_lucene@fucit.org>
> To: "Lucene Users" <java-user@lucene.apache.org>
> Sent: Tuesday, July 3, 2007 10:26:57 PM (GMT-0800) America/Los_Angeles
> Subject: Re: product based term combination for BooleanQuery?
>
>
> (side note: if you are going to try and obfuscate your field names when
> sending explain output so we don't know you are using wikipedia data (not
> that we care), please at least be consistent about it so the final
> explanations actual make sense -- it will save everyone a lot of confusion
> and help us help you)
>
> the biggest factor in your scores seems to be the fieldNorms for your
> name, title and alias fields ... they are so high, that tf and idf are
> pretty much irrelevant.
>
> By the looks of it, when you were indexing your docs, you used a
> consistent field boost per field on every instance of that field for every
> document ... this is really not a use case where index time field (or
> document) boosts make sense.  in my opinion hte number one thing you can
> do to imrpove your relevency right now is to stop using index time
> boosts and use query boosts instead.
>
> If you don't want to reindex completely the LengthNormModifier class (in
> the misc contrib) can update all of your norms in place without reindexing
> and throw away any index time boosts you had.
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_86254_4685527.1183576171609--

From java-user-return-29038-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 04 21:35:06 2007
Return-Path: <java-user-return-29038-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51283 invoked from network); 4 Jul 2007 21:35:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jul 2007 21:35:05 -0000
Received: (qmail 3816 invoked by uid 500); 4 Jul 2007 21:34:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3737 invoked by uid 500); 4 Jul 2007 21:34:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3685 invoked by uid 99); 4 Jul 2007 21:34:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Jul 2007 14:34:54 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mike.klaas@gmail.com designates 209.85.146.182 as permitted sender)
Received: from [209.85.146.182] (HELO wa-out-1112.google.com) (209.85.146.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Jul 2007 14:34:49 -0700
Received: by wa-out-1112.google.com with SMTP id j40so3557470wah
        for <java-user@lucene.apache.org>; Wed, 04 Jul 2007 14:34:29 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=jOA1rtihuNBtjhTlqLLPSw5rHEaMbTeydPOJ0Cljj9MQLEMmWkOcNBFXQO3/D8zq3hfdWqD8RRl/houT0zTCjMxSsiMXPHSU6VfT9mC+gH2ux3r/RBn/XJ6JKsItuRoTI9Tu7EYo4TI7m1vUaeEotmsB/AbYS2CidrDcChaRfJw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=RDB14p6DmHVftlvQT/vZDoZrZM1+OS0Oj31S7C36iTdVfhoJYG0KjPm5cfKhiqZYA+QmXkoKzyRDv8rhsp4Lu65SBJSt/2QkgKiCiIXRg5EocZonLieaps6vOeVUlHrrsxsKxONHTGeelrxfAin4gVxnPWIXKKr6C+ipHhGVOO0=
Received: by 10.115.59.4 with SMTP id m4mr7522373wak.1183584869413;
        Wed, 04 Jul 2007 14:34:29 -0700 (PDT)
Received: from ?192.168.1.100? ( [24.84.38.75])
        by mx.google.com with ESMTP id k26sm22213759waf.2007.07.04.14.34.24
        (version=TLSv1/SSLv3 cipher=OTHER);
        Wed, 04 Jul 2007 14:34:26 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <468ADF32.2080907@metaweb.com>
References: <46899FF8.6060309@metaweb.com> <468A8CBF.3090604@metaweb.com> <468A9C03.30000@healthline.com> <468AA187.4010409@metaweb.com> <5E71DC0E-2E19-4CC4-92B0-AAB926941D43@gmail.com> <468ADF32.2080907@metaweb.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <75DB2335-1ECE-482B-A411-3D2F917864F1@gmail.com>
Content-Transfer-Encoding: 7bit
From: Mike Klaas <mike.klaas@gmail.com>
Subject: Re: product based term combination for BooleanQuery?
Date: Wed, 4 Jul 2007 14:34:20 -0700
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

On 3-Jul-07, at 4:43 PM, Tim Sturge wrote:

> Here's the explain output I currently get for "George Bush" "George  
> W Bush", "John Kerry" "John Denver" and "John Bush". (there are  
> others in between, but they follow very much the same pattern; an  
> enormous score for one of "John" or "Bush" and a very small score  
> for the other being better than an average score for both.
>
> As you can see I have a lot of fields, some very important (name,  
> alias, title, anchor) and others much less important (text,  
> surround, content, body).

It is definitely not necessary to jack up the field boosts to such  
high levels (and better to do so at query-time, regardless).  Fields  
like title in particularly get huge boosts from the lengthNorm and  
idf.  This is part of the problem.

> I will experiment with DisjunctionMaxQuery, but it honestly seems  
> like ProductQuery is what I want at the outer layer with  
> BooleanQuery inside.

Give it a shot: I'd be interested in usecases for multiplicative  
query scoring.

I think that you are being too hasty in dismissing the implicit  
sloppy phrase query approach.  You can apply this even in the  
presence of user phrase queries (the difference being that those are  
_required_ matches).  All major search engines implement some form or  
another of term-proximity scoring (the huge importance of this factor  
has been obscured by the hype about pagerank, but it should not be  
ignored).

good luck, I'm interested in your results,
-Mike

> Tim
>
> Grant Ingersoll wrote:
>> When you do an explain on these results, what are all the factors  
>> that contribute to the score?
>>
>> Could you increase the coord() factor in a custom Similarity  
>> implementation, to give a bigger boost to documents that have more  
>> matching terms? The point of coord is to give a little bump to  
>> those docs that have more terms from the query in a given  
>> document. Sounds like you want a bigger bump once you have  
>> multiple query terms in a document. Would this work for you?
>>
>> Also, below...
>>
>> On Jul 3, 2007, at 3:20 PM, Tim Sturge wrote:
>>
>>> That's true, but it's not clear that I want phrase matches.  
>>> Consider for example:
>>>
>>> "Lucene Download" as a query. I want something that strongly  
>>> references "Lucene" (in the title) and strongly references  
>>> "Download" but "Download Lucene" or "Lucene Project Download" are  
>>> better than some page that happens to contain the exact phrase.
>>
>> Not sure I follow you here. By strongly references, do you mean  
>> there are multiple occurrences of Download? Why would those  
>> alternatives be better than an exact phrase match?
>>
>>>
>>> Other examples are "camera review" or "Gonzales scandal"; there's  
>>> a whole class of "subject <modifier>" queries that are not really  
>>> phrase based, and my corpus isn't large enough to necessarily  
>>> contain the phrase anyway.
>>>
>>> I agree that many two or three word queries are really best  
>>> matched by phrases, but not all. Is it common to use a phrase  
>>> query with high slop to overcome the unequal weighting problem?
>>>
>>> Also, my interface does support "\"John Bush\"" (ie the user can  
>>> quote the phrase if they like) and I would prefer not to infer  
>>> automatically that they meant to do so.
>>>
>>> Tim
>>>
>>> Jason Pump wrote:
>>>> You're not using any type of phrase search. Try ->
>>>>
>>>> ( (title:"John Bush"^4.0) OR (body:"John Bush") ) AND  
>>>> ( (title:John^4.0 body:John) AND (title:Bush^4.0 body:Bush) )
>>>>
>>>> or maybe
>>>>
>>>> ( (title:"John Bush"~4^4.0) OR (body:"John Bush"~4) ) AND  
>>>> ( (title:John^4.0 body:John) AND (title:Bush^4.0 body:Bush) )
>>>>
>>>>
>>>>
>>>> Tim Sturge wrote:
>>>>> I'm following myself up here to ask if anyone has experience or  
>>>>> code with a BooleanQuery that weights the terms it encounters  
>>>>> on a product basis rather than a sum basis.
>>>>>
>>>>> This would effectively compute the geometric mean of the term  
>>>>> score (rather than the arithmetic mean) and would give me more  
>>>>> "middle bias". It also has the great advantage that it  
>>>>> automatically implements AND (as something without the term has  
>>>>> a score of 0.0 which causes the query to go to 0.0 as well.)
>>>>>
>>>>> I'm curious though why this doesn't already exist. Is it a bad  
>>>>> idea in general (that I will discover once I implement it and  
>>>>> look at the results?) or does it make searching a lot slower?
>>>>>
>>>>> Thanks,
>>>>>
>>>>> Tim
>>>>>
>>>>> Tim Sturge wrote:
>>>>>> I have an index with two different sources of information, one  
>>>>>> small but of high quality (call it "title"), and one large,  
>>>>>> but of lower quality (call it "body"). I give boosts to  
>>>>>> certain documents related to their popularity (this is very  
>>>>>> similar to what one would do indexing the web).
>>>>>>
>>>>>> The problem I have is a query like "John Bush". I translate  
>>>>>> that into " (title:John^4.0 body:John) AND (title:Bush^4.0  
>>>>>> body:Bush) ". But the results I get are:
>>>>>>
>>>>>> 1. George Bush
>>>>>> ...
>>>>>> 4. John Kerry
>>>>>> ...
>>>>>> 10. John Bush
>>>>>>
>>>>>> The reason is (looking at explain) that George Bush is scored:
>>>>>> 169 = sum(
>>>>>> 1 = <match in body with tiny norm for "John">
>>>>>> )
>>>>>> 168 = sum(
>>>>>> 160 = <title match for "Bush">
>>>>>> 8 = <body match for "Bush">
>>>>>> )
>>>>>> )
>>>>>>
>>>>>> and John Kerry is similar but reversed. Poor old "John Bush"  
>>>>>> only scores:
>>>>>>
>>>>>> 72 = sum(
>>>>>> 40 = (<title match for "John">+<body match>)
>>>>>> 32 = (<title match for "Bush">+ <body match>)
>>>>>> )
>>>>>>
>>>>>> because his initial boost was only 1/4 of George's.
>>>>>>
>>>>>> The question I have is, how can tell the searcher to care  
>>>>>> about "balance"? I really want the score over 2 terms to be  
>>>>>> more like (sqrt(X)+sqrt(Y))^2 or maybe even exp(log(X)+log(Y))  
>>>>>> rather than just X+Y. Is that supported in some obvious way,  
>>>>>> or is there some other way to phrase my query to say "I want  
>>>>>> both terms but they should both be important if possible?"
>>>>>>
>>>>>> Thanks,
>>>>>>
>>>>>> Tim
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> ----------------------------------------------------------------- 
>>>>>> -- --
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>
>>>>>
>>>>> ------------------------------------------------------------------ 
>>>>> -- -
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>
>>>>
>>>>
>>>> ------------------------------------------------------------------- 
>>>> --
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>
>>>
>>> -------------------------------------------------------------------- 
>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>> ------------------------------------------------------
>> Grant Ingersoll
>> http://www.grantingersoll.com/
>> http://lucene.grantingersoll.com
>> http://www.paperoftheweek.com/
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> [
>   {
>     "explain" : "169.71423 = (MATCH) sum of:
>   0.033628028 = (MATCH) product of:
>     0.23539619 = (MATCH) sum of:
>       0.23539619 = (MATCH) weight(body:john in 1673743), product of:
>         0.12947647 = queryWeight(body:john), product of:
>           5.0118046 = idf(docFreq=185620)
>           0.025834301 = queryNorm
>         1.8180615 = (MATCH) fieldWeight(body:john in 1673743),  
> product of:
>           3.3166249 = tf(termFreq(body:john)=11)
>           5.0118046 = idf(docFreq=185620)
>           0.109375 = fieldNorm(field=wikipedia, doc=1673743)
>     0.14285715 = coord(1\/7)
>   169.6806 = (MATCH) product of:
>     197.9607 = (MATCH) sum of:
>       51.99727 = (MATCH) weight(name:bush in 1673743), product of:
>         0.25916338 = queryWeight(name:bush), product of:
>           10.0317545 = idf(docFreq=1225)
>           0.025834301 = queryNorm
>         200.63509 = (MATCH) fieldWeight(name:bush in 1673743),  
> product of:
>           1.0 = tf(termFreq(name:bush)=1)
>           10.0317545 = idf(docFreq=1225)
>           20.0 = fieldNorm(field=name, doc=1673743)
>       51.013706 = (MATCH) weight(alias:bush in 1673743), product of:
>         0.3630294 = queryWeight(alias:bush), product of:
>           14.052224 = idf(docFreq=21)
>           0.025834301 = queryNorm
>         140.52225 = (MATCH) fieldWeight(alias:bush in 1673743),  
> product of:
>           1.0 = tf(termFreq(alias:bush)=1)
>           14.052224 = idf(docFreq=21)
>           10.0 = fieldNorm(field=alias, doc=1673743)
>       33.15815 = (MATCH) weight(title:bush in 1673743), product of:
>         0.29268032 = queryWeight(title:bush), product of:
>           11.329136 = idf(docFreq=334)
>           0.025834301 = queryNorm
>         113.29136 = (MATCH) fieldWeight(title:bush in 1673743),  
> product of:
>           1.0 = tf(termFreq(title:bush)=1)
>           11.329136 = idf(docFreq=334)
>           10.0 = fieldNorm(field=title, doc=1673743)
>       41.10021 = (MATCH) weight(anchor:bush in 1673743), product of:
>         0.30437908 = queryWeight(anchor:bush), product of:
>           11.781975 = idf(docFreq=212)
>           0.025834301 = queryNorm
>         135.02968 = (MATCH) fieldWeight(anchor:bush in 1673743),  
> product of:
>           36.67424 = tf(termFreq(anchor:bush)=1345)
>           11.781975 = idf(docFreq=212)
>           0.3125 = fieldNorm(field=anchor, doc=1673743)
>       18.274998 = (MATCH) weight(text:bush in 1673743), product of:
>         0.25839525 = queryWeight(text:bush), product of:
>           10.002022 = idf(docFreq=1262)
>           0.025834301 = queryNorm
>         70.724976 = (MATCH) fieldWeight(text:bush in 1673743),  
> product of:
>           1.4142135 = tf(termFreq(text:bush)=2)
>           10.002022 = idf(docFreq=1262)
>           5.0 = fieldNorm(field=text, doc=1673743)
>       2.4163725 = (MATCH) weight(body:bush in 1673743), product of:
>         0.19234328 = queryWeight(body:bush), product of:
>           7.445267 = idf(docFreq=16284)
>           0.025834301 = queryNorm
>         12.562812 = (MATCH) fieldWeight(body:bush in 1673743),  
> product of:
>           15.427249 = tf(termFreq(body:bush)=238)
>           7.445267 = idf(docFreq=16284)
>           0.109375 = fieldNorm(field=wikipedia, doc=1673743)
>     0.85714287 = coord(6\/7)
> ",
>     "name" : "George W. Bush",
>   },
>   {
>     "explain" : "154.83218 = (MATCH) sum of:
>   0.02267201 = (MATCH) product of:
>     0.15870407 = (MATCH) sum of:
>       0.15870407 = (MATCH) weight(body:john in 14947), product of:
>         0.12947647 = queryWeight(body:john), product of:
>           5.0118046 = idf(docFreq=185620)
>           0.025834301 = queryNorm
>         1.2257367 = (MATCH) fieldWeight(body:john in 14947),  
> product of:
>           2.236068 = tf(termFreq(body:john)=5)
>           5.0118046 = idf(docFreq=185620)
>           0.109375 = fieldNorm(field=wikipedia, doc=14947)
>     0.14285715 = coord(1\/7)
>   154.80951 = (MATCH) product of:
>     180.6111 = (MATCH) sum of:
>       41.597813 = (MATCH) weight(name:bush in 14947), product of:
>         0.25916338 = queryWeight(name:bush), product of:
>           10.0317545 = idf(docFreq=1225)
>           0.025834301 = queryNorm
>         160.50807 = (MATCH) fieldWeight(name:bush in 14947),  
> product of:
>           1.0 = tf(termFreq(name:bush)=1)
>           10.0317545 = idf(docFreq=1225)
>           16.0 = fieldNorm(field=name, doc=14947)
>       61.216446 = (MATCH) weight(alias:bush in 14947), product of:
>         0.3630294 = queryWeight(alias:bush), product of:
>           14.052224 = idf(docFreq=21)
>           0.025834301 = queryNorm
>         168.6267 = (MATCH) fieldWeight(alias:bush in 14947),  
> product of:
>           1.0 = tf(termFreq(alias:bush)=1)
>           14.052224 = idf(docFreq=21)
>           12.0 = fieldNorm(field=alias, doc=14947)
>       26.526522 = (MATCH) weight(title:bush in 14947), product of:
>         0.29268032 = queryWeight(title:bush), product of:
>           11.329136 = idf(docFreq=334)
>           0.025834301 = queryNorm
>         90.63309 = (MATCH) fieldWeight(title:bush in 14947),  
> product of:
>           1.0 = tf(termFreq(title:bush)=1)
>           11.329136 = idf(docFreq=334)
>           8.0 = fieldNorm(field=title, doc=14947)
>       30.758215 = (MATCH) weight(anchor:bush in 14947), product of:
>         0.30437908 = queryWeight(anchor:bush), product of:
>           11.781975 = idf(docFreq=212)
>           0.025834301 = queryNorm
>         101.05233 = (MATCH) fieldWeight(anchor:bush in 14947),  
> product of:
>           34.307434 = tf(termFreq(anchor:bush)=1177)
>           11.781975 = idf(docFreq=212)
>           0.25 = fieldNorm(field=anchor, doc=14947)
>       18.274998 = (MATCH) weight(text:bush in 14947), product of:
>         0.25839525 = queryWeight(text:bush), product of:
>           10.002022 = idf(docFreq=1262)
>           0.025834301 = queryNorm
>         70.724976 = (MATCH) fieldWeight(text:bush in 14947),  
> product of:
>           1.4142135 = tf(termFreq(text:bush)=2)
>           10.002022 = idf(docFreq=1262)
>           5.0 = fieldNorm(field=text, doc=14947)
>       2.237126 = (MATCH) weight(body:bush in 14947), product of:
>         0.19234328 = queryWeight(body:bush), product of:
>           7.445267 = idf(docFreq=16284)
>           0.025834301 = queryNorm
>         11.630903 = (MATCH) fieldWeight(body:bush in 14947),  
> product of:
>           14.282857 = tf(termFreq(body:bush)=204)
>           7.445267 = idf(docFreq=16284)
>           0.109375 = fieldNorm(field=wikipedia, doc=14947)
>     0.85714287 = coord(6\/7)
> ",
>     "name" : "George H. W. Bush",
>   },
>   {
>     "explain" : "92.35373 = (MATCH) sum of:
>   92.255936 = (MATCH) product of:
>     107.63193 = (MATCH) sum of:
>       29.974728 = (MATCH) weight(name:john in 2198385), product of:
>         0.17962648 = queryWeight(name:john), product of:
>           6.9530225 = idf(docFreq=26641)
>           0.025834301 = queryNorm
>         166.87254 = (MATCH) fieldWeight(name:john in 2198385),  
> product of:
>           1.0 = tf(termFreq(name:john)=1)
>           6.9530225 = idf(docFreq=26641)
>           24.0 = fieldNorm(field=name, doc=2198385)
>       34.876133 = (MATCH) weight(alias:john in 2198385), product of:
>         0.27401346 = queryWeight(alias:john), product of:
>           10.606575 = idf(docFreq=689)
>           0.025834301 = queryNorm
>         127.2789 = (MATCH) fieldWeight(alias:john in 2198385),  
> product of:
>           1.0 = tf(termFreq(alias:john)=1)
>           10.606575 = idf(docFreq=689)
>           12.0 = fieldNorm(field=alias, doc=2198385)
>       17.689255 = (MATCH) weight(title:john in 2198385), product of:
>         0.19514729 = queryWeight(title:john), product of:
>           7.5538054 = idf(docFreq=14609)
>           0.025834301 = queryNorm
>         90.64566 = (MATCH) fieldWeight(title:john in 2198385),  
> product of:
>           1.0 = tf(termFreq(title:john)=1)
>           7.5538054 = idf(docFreq=14609)
>           12.0 = fieldNorm(field=title, doc=2198385)
>       14.100239 = (MATCH) weight(anchor:john in 2198385), product of:
>         0.20842676 = queryWeight(anchor:john), product of:
>           8.06783 = idf(docFreq=8737)
>           0.025834301 = queryNorm
>         67.65081 = (MATCH) fieldWeight(anchor:john in 2198385),  
> product of:
>           13.416408 = tf(termFreq(anchor:john)=180)
>           8.06783 = idf(docFreq=8737)
>           0.625 = fieldNorm(field=anchor, doc=2198385)
>       10.557128 = (MATCH) weight(text:john in 2198385), product of:
>         0.1792826 = queryWeight(text:john), product of:
>           6.9397116 = idf(docFreq=26998)
>           0.025834301 = queryNorm
>         58.885403 = (MATCH) fieldWeight(text:john in 2198385),  
> product of:
>           1.4142135 = tf(termFreq(text:john)=2)
>           6.9397116 = idf(docFreq=26998)
>           6.0 = fieldNorm(field=text, doc=2198385)
>       0.43445155 = (MATCH) weight(body:john in 2198385), product of:
>         0.12947647 = queryWeight(body:john), product of:
>           5.0118046 = idf(docFreq=185620)
>           0.025834301 = queryNorm
>         3.3554478 = (MATCH) fieldWeight(body:john in 2198385),  
> product of:
>           7.1414285 = tf(termFreq(body:john)=51)
>           5.0118046 = idf(docFreq=185620)
>           0.09375 = fieldNorm(field=wikipedia, doc=2198385)
>     0.85714287 = coord(6\/7)
>   0.097795136 = (MATCH) product of:
>     0.6845659 = (MATCH) sum of:
>       0.6845659 = (MATCH) weight(body:bush in 2198385), product of:
>         0.19234328 = queryWeight(body:bush), product of:
>           7.445267 = idf(docFreq=16284)
>           0.025834301 = queryNorm
>         3.559084 = (MATCH) fieldWeight(body:bush in 2198385),  
> product of:
>           5.0990195 = tf(termFreq(body:bush)=26)
>           7.445267 = idf(docFreq=16284)
>           0.09375 = fieldNorm(field=wikipedia, doc=2198385)
>     0.14285715 = coord(1\/7)
> ",
>     "name" : "John Kerry",
>   },
>   {
>     "explain" : "81.16132 = (MATCH) sum of:
>   81.13575 = (MATCH) product of:
>     94.65837 = (MATCH) sum of:
>       24.978941 = (MATCH) weight(name:john in 66053), product of:
>         0.17962648 = queryWeight(name:john), product of:
>           6.9530225 = idf(docFreq=26641)
>           0.025834301 = queryNorm
>         139.06046 = (MATCH) fieldWeight(name:john in 66053),  
> product of:
>           1.0 = tf(termFreq(name:john)=1)
>           6.9530225 = idf(docFreq=26641)
>           20.0 = fieldNorm(field=name, doc=66053)
>       29.063442 = (MATCH) weight(alias:john in 66053), product of:
>         0.27401346 = queryWeight(alias:john), product of:
>           10.606575 = idf(docFreq=689)
>           0.025834301 = queryNorm
>         106.06575 = (MATCH) fieldWeight(alias:john in 66053),  
> product of:
>           1.0 = tf(termFreq(alias:john)=1)
>           10.606575 = idf(docFreq=689)
>           10.0 = fieldNorm(field=alias, doc=66053)
>       14.741047 = (MATCH) weight(title:john in 66053), product of:
>         0.19514729 = queryWeight(title:john), product of:
>           7.5538054 = idf(docFreq=14609)
>           0.025834301 = queryNorm
>         75.538055 = (MATCH) fieldWeight(title:john in 66053),  
> product of:
>           1.0 = tf(termFreq(title:john)=1)
>           7.5538054 = idf(docFreq=14609)
>           10.0 = fieldNorm(field=title, doc=66053)
>       16.475775 = (MATCH) weight(anchor:john in 66053), product of:
>         0.20842676 = queryWeight(anchor:john), product of:
>           8.06783 = idf(docFreq=8737)
>           0.025834301 = queryNorm
>         79.04827 = (MATCH) fieldWeight(anchor:john in 66053),  
> product of:
>           2.4494898 = tf(termFreq(anchor:john)=6)
>           8.06783 = idf(docFreq=8737)
>           4.0 = fieldNorm(field=anchor, doc=66053)
>       8.797606 = (MATCH) weight(text:john in 66053), product of:
>         0.1792826 = queryWeight(text:john), product of:
>           6.9397116 = idf(docFreq=26998)
>           0.025834301 = queryNorm
>         49.071167 = (MATCH) fieldWeight(text:john in 66053),  
> product of:
>           1.4142135 = tf(termFreq(text:john)=2)
>           6.9397116 = idf(docFreq=26998)
>           5.0 = fieldNorm(field=text, doc=66053)
>       0.60155636 = (MATCH) weight(body:john in 66053), product of:
>         0.12947647 = queryWeight(body:john), product of:
>           5.0118046 = idf(docFreq=185620)
>           0.025834301 = queryNorm
>         4.646067 = (MATCH) fieldWeight(body:john in 66053), product  
> of:
>           7.4161983 = tf(termFreq(body:john)=55)
>           5.0118046 = idf(docFreq=185620)
>           0.125 = fieldNorm(field=wikipedia, doc=66053)
>     0.85714287 = coord(6\/7)
>   0.025572272 = (MATCH) product of:
>     0.17900589 = (MATCH) sum of:
>       0.17900589 = (MATCH) weight(body:bush in 66053), product of:
>         0.19234328 = queryWeight(body:bush), product of:
>           7.445267 = idf(docFreq=16284)
>           0.025834301 = queryNorm
>         0.9306584 = (MATCH) fieldWeight(body:bush in 66053),  
> product of:
>           1.0 = tf(termFreq(body:bush)=1)
>           7.445267 = idf(docFreq=16284)
>           0.125 = fieldNorm(field=wikipedia, doc=66053)
>     0.14285715 = coord(1\/7)
> ",
>     "name" : "John Denver",
>   },
>   {
>     "explain" : "72.412 = (MATCH) sum of:
>   23.203518 = (MATCH) product of:
>     32.484924 = (MATCH) sum of:
>       12.4894705 = (MATCH) weight(name:john in 535045), product of:
>         0.17962648 = queryWeight(name:john), product of:
>           6.9530225 = idf(docFreq=26641)
>           0.025834301 = queryNorm
>         69.53023 = (MATCH) fieldWeight(name:john in 535045),  
> product of:
>           1.0 = tf(termFreq(name:john)=1)
>           6.9530225 = idf(docFreq=26641)
>           10.0 = fieldNorm(field=name, doc=535045)
>       5.8964186 = (MATCH) weight(title:john in 535045), product of:
>         0.19514729 = queryWeight(title:john), product of:
>           7.5538054 = idf(docFreq=14609)
>           0.025834301 = queryNorm
>         30.215221 = (MATCH) fieldWeight(title:john in 535045),  
> product of:
>           1.0 = tf(termFreq(title:john)=1)
>           7.5538054 = idf(docFreq=14609)
>           4.0 = fieldNorm(field=title, doc=535045)
>       8.737598 = (MATCH) weight(anchor:john in 535045), product of:
>         0.20842676 = queryWeight(anchor:john), product of:
>           8.06783 = idf(docFreq=8737)
>           0.025834301 = queryNorm
>         41.921673 = (MATCH) fieldWeight(anchor:john in 535045),  
> product of:
>           3.4641016 = tf(termFreq(anchor:john)=12)
>           8.06783 = idf(docFreq=8737)
>           1.5 = fieldNorm(field=anchor, doc=535045)
>       4.9766784 = (MATCH) weight(text:john in 535045), product of:
>         0.1792826 = queryWeight(text:john), product of:
>           6.9397116 = idf(docFreq=26998)
>           0.025834301 = queryNorm
>         27.758846 = (MATCH) fieldWeight(text:john in 535045),  
> product of:
>           1.0 = tf(termFreq(text:john)=1)
>           6.9397116 = idf(docFreq=26998)
>           4.0 = fieldNorm(field=text, doc=535045)
>       0.38475677 = (MATCH) weight(body:john in 535045), product of:
>         0.12947647 = queryWeight(body:john), product of:
>           5.0118046 = idf(docFreq=185620)
>           0.025834301 = queryNorm
>         2.9716346 = (MATCH) fieldWeight(body:john in 535045),  
> product of:
>           3.1622777 = tf(termFreq(body:john)=10)
>           5.0118046 = idf(docFreq=185620)
>           0.1875 = fieldNorm(field=wikipedia, doc=535045)
>     0.71428573 = coord(5\/7)
>   49.208485 = (MATCH) product of:
>     68.89188 = (MATCH) sum of:
>       25.998634 = (MATCH) weight(name:bush in 535045), product of:
>         0.25916338 = queryWeight(name:bush), product of:
>           10.0317545 = idf(docFreq=1225)
>           0.025834301 = queryNorm
>         100.31754 = (MATCH) fieldWeight(name:bush in 535045),  
> product of:
>           1.0 = tf(termFreq(name:bush)=1)
>           10.0317545 = idf(docFreq=1225)
>           10.0 = fieldNorm(field=name, doc=535045)
>       13.263261 = (MATCH) weight(title:bush in 535045), product of:
>         0.29268032 = queryWeight(title:bush), product of:
>           11.329136 = idf(docFreq=334)
>           0.025834301 = queryNorm
>         45.316544 = (MATCH) fieldWeight(title:bush in 535045),  
> product of:
>           1.0 = tf(termFreq(title:bush)=1)
>           11.329136 = idf(docFreq=334)
>           4.0 = fieldNorm(field=title, doc=535045)
>       18.634373 = (MATCH) weight(anchor:bush in 535045), product of:
>         0.30437908 = queryWeight(anchor:bush), product of:
>           11.781975 = idf(docFreq=212)
>           0.025834301 = queryNorm
>         61.220936 = (MATCH) fieldWeight(anchor:bush in 535045),  
> product of:
>           3.4641016 = tf(termFreq(anchor:bush)=12)
>           11.781975 = idf(docFreq=212)
>           1.5 = fieldNorm(field=anchor, doc=535045)
>       10.3379 = (MATCH) weight(text:bush in 535045), product of:
>         0.25839525 = queryWeight(text:bush), product of:
>           10.002022 = idf(docFreq=1262)
>           0.025834301 = queryNorm
>         40.008087 = (MATCH) fieldWeight(text:bush in 535045),  
> product of:
>           1.0 = tf(termFreq(text:bush)=1)
>           10.002022 = idf(docFreq=1262)
>           4.0 = fieldNorm(field=text, doc=535045)
>       0.65770966 = (MATCH) weight(body:bush in 535045), product of:
>         0.19234328 = queryWeight(body:bush), product of:
>           7.445267 = idf(docFreq=16284)
>           0.025834301 = queryNorm
>         3.4194574 = (MATCH) fieldWeight(body:bush in 535045),  
> product of:
>           2.4494898 = tf(termFreq(body:bush)=6)
>           7.445267 = idf(docFreq=16284)
>           0.1875 = fieldNorm(field=wikipedia, doc=535045)
>     0.71428573 = coord(5\/7)
> ",
>     "name" : "John Bush",
>   }
> ]
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29039-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 04 21:38:18 2007
Return-Path: <java-user-return-29039-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51899 invoked from network); 4 Jul 2007 21:38:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jul 2007 21:38:17 -0000
Received: (qmail 11506 invoked by uid 500); 4 Jul 2007 21:38:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10957 invoked by uid 500); 4 Jul 2007 21:38:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10940 invoked by uid 99); 4 Jul 2007 21:38:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Jul 2007 14:38:12 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mike.klaas@gmail.com designates 209.85.146.180 as permitted sender)
Received: from [209.85.146.180] (HELO wa-out-1112.google.com) (209.85.146.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Jul 2007 14:38:08 -0700
Received: by wa-out-1112.google.com with SMTP id j40so3558233wah
        for <java-user@lucene.apache.org>; Wed, 04 Jul 2007 14:37:48 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=gC5dfC3u7RgCjliR1ZOiAjPAxXKRxQcw6Wakr3dlk97rTtF3v0ds7SRFnQIaQICwqX62iBiC6NTIZy/z/HCR8zIbPcc8LrpPGfZLVW8/CD2o7PdBtDH7WP4GHVglutxdpWlOdlOWbHm3U62aGk3kVsT2LQJBPxmJbQAgBFwAFf4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=qxN1IdAo5UaXaczIDOZUCaNa4QScXSq/R70f6orLCmdjXvielwgUbNpeG0ntRv5G9VmsurBaUBpVFRfPDqzFvem9NsNTmekjJxgKKaVmtyHVgmdm4ye+SJNrM/c2Hoys/PO1qPhbeK3XC5azDVEsgJBWxq+zokgPbEOLoz3+MIg=
Received: by 10.114.12.9 with SMTP id 9mr7535340wal.1183585068059;
        Wed, 04 Jul 2007 14:37:48 -0700 (PDT)
Received: from ?192.168.1.100? ( [24.84.38.75])
        by mx.google.com with ESMTP id m27sm22264242wag.2007.07.04.14.37.45
        (version=TLSv1/SSLv3 cipher=OTHER);
        Wed, 04 Jul 2007 14:37:46 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <5791bc090707040531x4a7b0309nb3e5982fab8ea0c6@mail.gmail.com>
References: <5791bc090707040531x4a7b0309nb3e5982fab8ea0c6@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <F97F9D34-EA86-4C19-90F3-9881016A27DE@gmail.com>
Content-Transfer-Encoding: 7bit
From: Mike Klaas <mike.klaas@gmail.com>
Subject: Re: Index partitioning by term
Date: Wed, 4 Jul 2007 14:37:43 -0700
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

On 4-Jul-07, at 5:31 AM, Ndapa Nakashole wrote:

> I am considering using Lucene in my mini Grid-based search engine.  
> I would
> like to partition my index by term as opposed to partition by  
> document. From
> what i have read in the mailing list so far, it seems like  
> partition by term
> is impossible with Lucene. am i right to conclude this! I know Nutch
> partitions by document, by in my environment of very limited  
> bandwidth i
> would like to avoid partition by document.

Partitioning indices by term is an approach whose adoption (as far as  
I am away) is limited to academic projects.  Further, it is much more  
bandwdith intensive than the document partition approach (you have to  
do term-posting list intersections across machines, instead of  
locally).  With doc partitioning, you get the top X docs from each  
server, using almost no bandwidth.

-Mike 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29040-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 05 07:44:43 2007
Return-Path: <java-user-return-29040-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24539 invoked from network); 5 Jul 2007 07:44:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jul 2007 07:44:41 -0000
Received: (qmail 40688 invoked by uid 500); 5 Jul 2007 07:44:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40657 invoked by uid 500); 5 Jul 2007 07:44:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40643 invoked by uid 99); 5 Jul 2007 07:44:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Jul 2007 00:44:34 -0700
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_BL_SPAMCOP_NET
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.117.178.41] (HELO ns21.webhostsg.com) (203.117.178.41)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Jul 2007 00:44:28 -0700
X-ClientAddr: 202.63.154.60
Received: from xenb04 (60.202-63-154.unknown.qala.com.sg [202.63.154.60])
	by ns21.webhostsg.com (8.12.11/8.12.11) with ESMTP id l657p8Cl007687
	for <java-user@lucene.apache.org>; Thu, 5 Jul 2007 15:51:32 +0800
Message-Id: <200707050751.l657p8Cl007687@ns21.webhostsg.com>
From: "Lee Li Bin" <leelb@xedge.com.sg>
To: <java-user@lucene.apache.org>
Subject: Chinese words highlighting
Date: Thu, 5 Jul 2007 15:42:49 +0800
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_000F_01C7BF1B.2CCFDA30"
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
Thread-Index: Ace+2BT+uf3WFwc+RCmyH/BHCcn8SA==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-ns21-MailScanner-Information: Please contact the ISP for more information
X-ns21-MailScanner: Found to be clean
X-ns21-MailScanner-SpamCheck: 
X-MailScanner-From: leelb@xedge.com.sg
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_000F_01C7BF1B.2CCFDA30
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit

 

Hi,

 

Anyone knows how to highlight Chinese character? When I do the highlight, it
tends to highlight the whole sentence instead of the keywords.

For Chinese highlighting, do I need to use the TermVector in order to
highlight the correct keywords?

 

Thanks

 


------=_NextPart_000_000F_01C7BF1B.2CCFDA30--



From java-user-return-29041-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 05 14:20:58 2007
Return-Path: <java-user-return-29041-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85153 invoked from network); 5 Jul 2007 14:20:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jul 2007 14:20:57 -0000
Received: (qmail 37623 invoked by uid 500); 5 Jul 2007 14:20:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37320 invoked by uid 500); 5 Jul 2007 14:20:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37303 invoked by uid 99); 5 Jul 2007 14:20:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Jul 2007 07:20:51 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mailing.patrick.kimber@gmail.com designates 64.233.162.237 as permitted sender)
Received: from [64.233.162.237] (HELO nz-out-0506.google.com) (64.233.162.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Jul 2007 07:20:46 -0700
Received: by nz-out-0506.google.com with SMTP id i28so1325970nzi
        for <java-user@lucene.apache.org>; Thu, 05 Jul 2007 07:20:25 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=BjFkPitH/l9CQaawNebr9ODtwMub3RGT4qDq1C3UUp3TEwSnB0KMYIQ08hCoU3BtgLhjMofv7p+Wk/oTYsitexSJOntKx3MlBWvPa5ZuQWzyXrDiYueREl04qLk1OFwuS++QOJS8vlhIj5YBvfL/B4FZgpbJBwMr3NLBextP6nI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=BfkzlAfNnW9I4hKptXELcRAOBbmrdkhwUbHzMsGioVDgFf8/ZUWi5EWZSHXSbTg9qxlUKJmLhu8pnVBw3/5rVtg8sKHjcn8HWzLzxLyuu71Efc5ufJsRpyekq+5sufeJ42mvUAQU3F/HaCnj7X+Bk+jNmkuJCpDZ3arC/SyfEL4=
Received: by 10.115.60.1 with SMTP id n1mr8205494wak.1183645225114;
        Thu, 05 Jul 2007 07:20:25 -0700 (PDT)
Received: by 10.115.55.4 with HTTP; Thu, 5 Jul 2007 07:20:25 -0700 (PDT)
Message-ID: <4f9b23800707050720o1661900fle3ac06cfae6e28ad@mail.gmail.com>
Date: Thu, 5 Jul 2007 15:20:25 +0100
From: "Patrick Kimber" <mailing.patrick.kimber@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene 2.2, NFS, Lock obtain timed out
In-Reply-To: <1183544020.31233.1198452157@webmail.messagingengine.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <OF19D3F11C.A08B201A-ON6525730D.003B9E55-6525730D.003DD835@hewitt.com>
	 <1183461674.2220.1198268681@webmail.messagingengine.com>
	 <4f9b23800707030432i1067a67auc8fc0f83abeeea0@mail.gmail.com>
	 <1183465207.11743.1198277029@webmail.messagingengine.com>
	 <4f9b23800707030650y6139a19fn2870bef783636f46@mail.gmail.com>
	 <4f9b23800707030813m998f3e5u1984d913f51d13b6@mail.gmail.com>
	 <1183476448.14138.1198311153@webmail.messagingengine.com>
	 <4f9b23800707040028g209341f8l24ce8363723d9729@mail.gmail.com>
	 <1183544020.31233.1198452157@webmail.messagingengine.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Michael

Just to let you know, I am on holiday for one week so will not be able
to send a progress report until I return.

I have deployed the new code to a test site so I will be informed if
the users notice any issues.

Thanks for your help

Patrick


On 04/07/07, Michael McCandless <lucene@mikemccandless.com> wrote:
>
> "Patrick Kimber" <mailing.patrick.kimber@gmail.com> wrote:
>
> > Yes, there are many lines in the logs saying:
> > hit FileNotFoundException when loading commit "segment_X"; skipping
> > this commit point
> > ...so it looks like the new code is working perfectly.
>
> Super!
>
> > I am sorry to be vague... but how do I check which segments file is
> > opened when a new writer is created?
>
> Oh, sorry, it's not exactly obvious.  Here's what to look for:
>
> On machine #1 (the machine that added docs & then closed its writer)
> you should see lines like this, which are printed every time the
> writer flushes its docs:
>
>     checkpoint: wrote segments file "segments_X"
>
> Find the last such line on machine #1 before it closes the writer, and
> that's the "current" segments_X in the index.
>
> Then on machine #2 (the machine that immediately opens a new writer
> after machine #1 closed its writer) you should see a line like this:
>
>     org.apache.lucene.index.IndexFileDeleter@XXXXXXX main: init: current segments file is "segments_Y"
>
> which indicates which segments file was loaded by this writer.  The
> thing to verify is that X is always equal to Y whenever a writer
> quickly moves from machine #1 to machine #2.
>
> > I will add a check to my test to see if all documents are added.  This
> > should tell us if any documents are being silently lost.
>
> Very good!  Keep us posted, and good luck,
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29042-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 05 14:52:11 2007
Return-Path: <java-user-return-29042-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96912 invoked from network); 5 Jul 2007 14:52:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jul 2007 14:52:11 -0000
Received: (qmail 17864 invoked by uid 500); 5 Jul 2007 14:52:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17834 invoked by uid 500); 5 Jul 2007 14:52:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17823 invoked by uid 99); 5 Jul 2007 14:52:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Jul 2007 07:52:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [193.110.102.5] (HELO linuxap01e.dmc.de) (193.110.102.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Jul 2007 07:51:56 -0700
Received: from [127.0.0.1] (helo=localhost)
	by linuxap01e.dmc.de with esmtp (Exim 4.63)
	(envelope-from <Michael.Boeckling@dmc.de>)
	id 1I6Sfy-0001Yo-9K
	for java-user@lucene.apache.org; Thu, 05 Jul 2007 16:51:22 +0200
X-Virus-Scanned: amavisd-new at dmc.de
Received: from linuxap01e.dmc.de ([127.0.0.1])
	by localhost (linux-ap01e.dmc.de [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id VIwjpw1wV1yJ for <java-user@lucene.apache.org>;
	Thu,  5 Jul 2007 16:51:20 +0200 (CEST)
Received: from [193.110.102.2] (helo=fafnir.dmc.local)
	by linuxap01e.dmc.de with esmtp (Exim 4.63)
	(envelope-from <Michael.Boeckling@dmc.de>)
	id 1I6Sfw-0001YX-04
	for java-user@lucene.apache.org; Thu, 05 Jul 2007 16:51:20 +0200
Received: by fafnir.intra.dmc.de with Internet Mail Service (5.5.2653.19)
	id <N4LKH621>; Thu, 5 Jul 2007 16:51:20 +0200
Message-ID: <F60407925D044842B7E21677C8B8CE2818C526E4@fafnir.intra.dmc.de>
From: =?iso-8859-1?Q?Michael_B=F6ckling?= <Michael.Boeckling@dmc.de>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Subject: AW: Searching over multiple indexes with 1:m relationship
Date: Thu, 5 Jul 2007 16:51:19 +0200 
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2653.19)
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

thanks for your answers, you really helped me make the right decision. =
I
have now a fully denormalized second index, which is way easier to =
handle
than the attempt I made before that mimicked the DB schema, and I don't =
have
any speed problems.

It seems Lucene's mailinglist is just as great as the code. :-)

Regards,
Michael



> -----Urspr=FCngliche Nachricht-----
> Von: Erick Erickson [mailto:erickerickson@gmail.com]
> Gesendet: Donnerstag, 28. Juni 2007 20:45
> An: java-user@lucene.apache.org
> Betreff: Re: Searching over multiple indexes with 1:m relationship
>=20
>=20
> Chris is spot-on. Your data set is so small that I wouldn't=20
> worry about
> speed unless and until you have proof that it's a problem.=20
> The complexity
> you'll introduce by having multiple indexes just won't be worth it.
>=20
> In your case, following Chris's advice and de-normalizing the=20
> data would
> be the first you should try.
>=20
> Erick.
>=20
> On 6/28/07, Michael B=F6ckling <Michael.Boeckling@dmc.de> wrote:
> >
> > Hi Erickson,
> >
> > thanks for your reply.
> >
> > Of course you are right that its a bit insane to mimic a=20
> database-schema
> > with indices, but thats how it is. The primary index is=20
> already in use,
> > the
> > extended requirements came later.
> >
> > The Index isn't really that big, the primary one has 2-3 MB=20
> of data, I
> > don't
> > know yet how big the secondary one will be, but probably=20
> less than 20
> > Megs.
> > The idea was that most searches will only need the first=20
> index, it is only
> > by using an extended search form that the secondary index=20
> is queried.
> > Keeping the first index small should help with performance,=20
> where the main
> > load is handled.
> >
> > The number of primary results will often be less than 200, =
typically
> > around
> > 20 I guess, so its not that big of a deal to iterate through them.
> >
> > Regards,
> >
> > Michael
> >
> >
> > > -----Urspr=FCngliche Nachricht-----
> > > Von: Erick Erickson [mailto:erickerickson@gmail.com]
> > > Gesendet: Donnerstag, 28. Juni 2007 16:09
> > > An: java-user@lucene.apache.org
> > > Betreff: Re: Searching over multiple indexes with 1:m =
relationship
> > >
> > >
> > > I do have an off-the-wall question.. Why have two indexes? There
> > > are, of course, good reasons, but they're things like=20
> size and speed.
> > >
> > > Where I'm going here is that Lucene does NOT require that all
> > > documents have the same fields. So it's perfectly=20
> reasonable to index
> > > heterogeneous data (or differing forms of the same data) in a
> > > single index.
> > > This may not fit your requirements, but I thought I'd mention it.
> > >
> > > That said, it really doesn't bear on your question since
> > > you'd really have
> > > two logical indexes in the same physical index. Although
> > > maybe it does.
> > > If all the data were in one index, then perhaps you could do
> > > exactly one
> > > search instead.
> > >
> > > I'm always leery of using an index to mimic what looks=20
> like database
> > > functionality. That often means that you either should=20
> actually use a
> > > database for the database-like parts or get much more clever
> > > in your index
> > > so you don't need what are essentially joins.
> > >
> > > All that said, a lot depends on the data set size. If=20
> your first query
> > > results
> > > in, say, 100 documents (pks) that you need to use for your
> > > second query,
> > > it probably doesn't matter whether you do a lot of manual
> > > processing. If the
> > > first query results in 1,000,000 pks, then it does....
> > >
> > > So how much data are you talking about? Even the single-index =
idea
> > > depends upon whether we're talking a couple of G index size of a
> > > couple of T...
> > >
> > > Best
> > > Erick
> > >
> > >
> > >
> > >
> > > On 6/28/07, Michael B=F6ckling <Michael.Boeckling@dmc.de> wrote:
> > > >
> > > > Hi folks!
> > > >
> > > > I know there is a MultiSearcher for searching over multiple
> > > indices, but
> > > > my
> > > > requirement is a bit special.
> > > > I have two indices whose documents have a 1:m relationship.
> > > Most queries
> > > > will only use the primary index, but some will have to look
> > > for detailed
> > > > information in the secondary index (the index fields=20
> are of course
> > > > different).
> > > >
> > > > What I plan to do:
> > > > - first get the results from the primary index
> > > > - then use the pk of the found documents and the=20
> additional search
> > > > constraints to search in the secondary index
> > > > - discard any primary results that did not match in the
> > > secondary index
> > > >
> > > > Is this ok, or am I completely nuts by doing that? Is=20
> there a better
> > > > alternative?
> > > >
> > > > Thanks for any clues!
> > > >
> > > > Michael
> > > >
> > > >
> > > > --
> > > > Michael B=F6ckling
> > > > Java Engineer
> > > > dmc digital media center GmbH
> > > > Rommelstra=DFe 11
> > > > 70376 Stuttgart (Germany)
> > > > Telefon: +49 711 601747-0
> > > > Telefax: +49 711 601747-141
> > > > E-Mail: Michael.Boeckling@dmc.de
> > > > Internet: www.dmc.de
> > > >
> > > > Handelsregister: AG Stuttgart HRB 18974
> > > > Gesch=E4ftsf=FChrer: Andreas Magg, Daniel Rebhorn, Andreas =
Schwend
> > > >
> > > > ---------------------------------------------
> > > > Besseres E-Business.
> > > > dmc ist die kreative Vernetzung von Agentur, Systemhaus und
> > > Service. Seit
> > > > =FCber 10 Jahren entwickeln und realisieren wir=20
> zukunftweisende und
> > > > erfolgreiche E-Business-L=F6sungen. Zu unseren langj=E4hrigen
> > > Kunden z=E4hlen
> > > > neckermann.de, Kodak und Telekom Training.
> > > >
> > > > dmc auf Platz 8 im aktuellen New Media Service Ranking.
> > > > Als inhabergef=FChrte und netzwerkunabh=E4ngige Agentur =
geh=F6ren
> > > wir mit einem
> > > > Umsatz von 13,50 Mio. Euro zu den Top 10 der
> > > erfolgreichsten New Media
> > > > Dienstleister in Deutschland.
> > > >
> > > >
> > >=20
> ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail:=20
> java-user-help@lucene.apache.org
> > > >
> > > >
> > >
> >
> >=20
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29043-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 05 18:24:18 2007
Return-Path: <java-user-return-29043-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16334 invoked from network); 5 Jul 2007 18:24:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jul 2007 18:24:16 -0000
Received: (qmail 74937 invoked by uid 500); 5 Jul 2007 18:24:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74907 invoked by uid 500); 5 Jul 2007 18:24:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74896 invoked by uid 99); 5 Jul 2007 18:24:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Jul 2007 11:24:10 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of vnguyen@ur.com designates 63.241.148.49 as permitted sender)
Received: from [63.241.148.49] (HELO iris.ur.com) (63.241.148.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Jul 2007 11:24:05 -0700
Received: from unknown (HELO exchsmtp1.ur.com) ([10.6.134.46])
  by iris.ur.com with ESMTP; 05 Jul 2007 18:24:03 +0000
X-OriginatingIP: 10.6.134.46
X-InternalServer: 10.6.134.46
Received: from EXCL1VS1.ur.com ([10.6.138.54]) by exchsmtp1.ur.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 5 Jul 2007 14:21:20 -0400
x-mimeole: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Too Many Open files Exception
Date: Thu, 5 Jul 2007 14:24:33 -0400
Message-ID: <8F0A781213C3584099D4F903798727F89F11EF@EXCL1VS1.ur.com>
In-Reply-To: <Pine.LNX.4.58.0707032135440.23647@hal.rescomp.berkeley.edu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Too Many Open files Exception
Thread-Index: Ace99URodfTeklbWSo+7sornhawR5ABOYIFQ
References: <8F0A781213C3584099D4F903798727F89F1187@EXCL1VS1.ur.com> <Pine.LNX.4.58.0707032135440.23647@hal.rescomp.berkeley.edu>
From: "Van Nguyen" <vnguyen@ur.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 05 Jul 2007 18:21:20.0048 (UTC) FILETIME=[48E2E300:01C7BF31]
X-Virus-Checked: Checked by ClamAV on apache.org

: so ... what is your ulimit set to?=20
Issuing a "limit descriptors", I see that I have it set to 1024

: how many files are in your index directory? =20
In the directory that I'm getting this particular error: 3
I have 24 different index directories... I think the most I saw at that
particular time in any one index was 20

: have you tried running lsof on your processes to see all the
: files you have open?
I'm not too familiar with this command.  Do I need to issue this command
for the processes I'm using (should it be the command: apache, jboss,
etc or process id?) or for the whole system?  If I do issue the command,
does each line it comes back with considered an "open file"?

: or it could just be that your index has a ton of files because of the
: number of segments and the number of fields, and between it, and all
the
: jars your app loads it really does just use 1 too many files for your
: ulimit.
How do you calculate this?  I found this formula: (1 + mergeFacotr) *
FilesPerSegment... but am unsure how to apply it to my indices.  Keep in
mind I have 24 different indices.  Do I apply this formula per index?

Thanks

Van

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29044-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 05 19:27:11 2007
Return-Path: <java-user-return-29044-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34284 invoked from network); 5 Jul 2007 18:57:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jul 2007 18:57:22 -0000
Received: (qmail 33595 invoked by uid 500); 5 Jul 2007 18:55:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32879 invoked by uid 500); 5 Jul 2007 18:55:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32864 invoked by uid 99); 5 Jul 2007 18:55:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Jul 2007 11:55:18 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of ahuntwork@gmail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO py-out-1112.google.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Jul 2007 11:55:13 -0700
Received: by py-out-1112.google.com with SMTP id f31so3516850pyh
        for <java-user@lucene.apache.org>; Thu, 05 Jul 2007 11:54:52 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition:x-google-sender-auth;
        b=pq75NpKofYqUfEtcr25GbVhAlmYJJxrO+idbnw5A+yqCSa27lrMClJ7sE3q2VARbxzeDrdqLdUYT3QWpx+qLO5BvPgP0ZYNYJDAqB6JpmUJBzOkBqGE+OVhxZdpj2Huzp1lxiCHlHjj/EN3TVOlzzYoGEJwZlouFy0ASC2urPcU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition:x-google-sender-auth;
        b=MRaQB6VBpxoTdrZuw353rVieUQJIUMLa2VED3pYQFWQh0eWffW+N8bNJjYLh8zYMB1Zdca+C5t+Y0TA2OetXwbiX/F+zQil2f68FaLzyTnP63+Vo0wosAXYj7mi6XcD4lSgZqSySyDmWmOBq5BReM+kfDn0GgJcySwDp3zhGflk=
Received: by 10.35.33.15 with SMTP id l15mr12072746pyj.1183661691970;
        Thu, 05 Jul 2007 11:54:51 -0700 (PDT)
Received: by 10.35.91.3 with HTTP; Thu, 5 Jul 2007 11:54:51 -0700 (PDT)
Message-ID: <15606c360707051154t4ec15993u2883eab0d3b7bf5f@mail.gmail.com>
Date: Thu, 5 Jul 2007 11:54:51 -0700
From: "Andrew Huntwork" <ash@huntwork.net>
Sender: ahuntwork@gmail.com
To: java-user@lucene.apache.org
Subject: making hudson available on port 80
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Google-Sender-Auth: 6f2a1427b86c8e88
X-Virus-Checked: Checked by ClamAV on apache.org

Are there any plans to make the hudson instance that hosts the apidocs
available on port 80?  My company has an traffic filter for various
reasons and port 8080 is not on the approved list of ports, so I'm
unable to see the apidocs or anything else in
lucene.zones.apache.org:8080.

thanks.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29045-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 05 21:18:54 2007
Return-Path: <java-user-return-29045-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82724 invoked from network); 5 Jul 2007 21:18:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jul 2007 21:18:52 -0000
Received: (qmail 93754 invoked by uid 500); 5 Jul 2007 21:18:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93528 invoked by uid 500); 5 Jul 2007 21:18:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93517 invoked by uid 99); 5 Jul 2007 21:18:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Jul 2007 14:18:47 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.238 as permitted sender)
Received: from [66.249.82.238] (HELO wx-out-0506.google.com) (66.249.82.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Jul 2007 14:18:41 -0700
Received: by wx-out-0506.google.com with SMTP id i28so11002wxd
        for <java-user@lucene.apache.org>; Thu, 05 Jul 2007 14:18:20 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:content-type:content-transfer-encoding;
        b=Zpo0xqTw2EbxmxdaLdoYeerMP43rJ8H0D9vfDJERFBxVqA87j3s2mFKXzpNd3geoHbr2zNyixi4lfHKA922bq0pdPun3bX2/zM4mGog8e3yVNZGxeR15/ycg4HsPeMfo+7uswstWy8qGyabB0YJr77IYodLyQLH/cSKYS4X/zhk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:content-type:content-transfer-encoding;
        b=IvZtmedkxXaRoYkQNI7SPtruvaWX4F2Sl3RiCeV2BNkwmpJn5rxDlJuQAhs31G3Lmz8vq+eoYQY8XL3p4Mrcj8wMRF7eDAfuI8pXTytIZlT5Xi4MaFYjTfQq9zzvNd+tdYGVSioeH9DLMwUCaf6nYQzMcu3BP9RVPVtaCinvQiw=
Received: by 10.70.72.11 with SMTP id u11mr34813wxa.1183670300666;
        Thu, 05 Jul 2007 14:18:20 -0700 (PDT)
Received: from ?192.168.1.100? ( [216.66.114.204])
        by mx.google.com with ESMTP id q26sm13230663ele.2007.07.05.14.18.19
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 05 Jul 2007 14:18:20 -0700 (PDT)
Message-ID: <468D5FE6.8070409@gmail.com>
Date: Thu, 05 Jul 2007 17:17:26 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.4 (Windows/20070604)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Position Sensitive Highlighter Performance
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

For those that where wondering about the performance of the Phrase/Span 
Query Highlighter VS the standard contrib Highlighter, here is some 
basic benchmark info.

Best viewed in mono-space font. Highlighter is original, HighlighterSpan 
is position sensitive version.

[echo] Working Directory: work
     [java] Running algorithm from: 
C:\workspace\ApacheLucene\contrib\benchmark\conf\highlight.alg
     [java] ------------> config properties:
     [java] log.queries = true
     [java] task.max.depth.log = 2
     [java] doc.maker = 
org.apache.lucene.benchmark.byTask.feeds.ReutersDocMaker
     [java] analyzer = org.apache.lucene.analysis.standard.StandardAnalyzer
     [java] doc.add.log.step = 500
     [java] doc.term.vector = false
     [java] directory = FSDirectory
     [java] query.maker = 
org.apache.lucene.benchmark.byTask.feeds.ReutersQueryMaker
     [java] doc.stored = true
     [java] work.dir = work
     [java] docs.dir = reuters-out
     [java] compound = true
     [java] doc.tokenized = true
     [java] -------------------------------
     [java] ------------> ReutersDocMaker statistics (0):
     [java] total count of unique texts:             21,578
     [java] total bytes of unique texts:         17,673,672
     [java] ------------> queries:
     [java] 0. TermQuery - body:salomon
     [java] 1. TermQuery - body:comex
     [java] 2. BooleanQuery - body:night body:trading
     [java] 3. BooleanQuery - body:japan body:sony
     [java] 4. PhraseQuery - body:"sony japan"
     [java] 5. PhraseQuery - body:"food needs"~3
     [java] 6. BooleanQuery - +body:"world bank"^2.0 +body:nigeria
     [java] 7. BooleanQuery - body:"world bank" -body:nigeria
     [java] 8. PhraseQuery - body:"ford credit"~5
     [java] 9. BooleanQuery - body:airline body:europe body:canada 
body:destination
     [java] 10. BooleanQuery - body:long body:term body:pressure 
body:trade body:ministers body:necessary body:current body:uruguay 
body:round body:talks body:general body:agreement body:trade 
body:tariffs body:gatt body:succeed
     [java] 11. SpanFirstQuery - spanFirst(body:ford, 5)
     [java] 12. SpanNearQuery - spanNear([body:night, body:trading], 4, 
false)
     [java] 13. SpanNearQuery - spanNear([spanFirst(body:ford, 10), 
body:credit], 10, false)
     [java] 14. WildcardQuery - body:fo*
     [java] ------------> algorithm:
     [java] Seq {
     [java] Populate {
     [java] CreateIndex
     [java] MAddDocs_4000 {
     [java] AddDoc
     [java] > * 4000
     [java] Optimize
     [java] CloseIndex
     [java] }
     [java] Rounds_4 {
     [java] Highlight_200 {
     [java] Highlight
     [java] > * 200
     [java] HighlightSpan_200 {
     [java] HighlightSpan
     [java] > * 200
     [java] NewRound
     [java] } * 4
     [java] RepSumByName
     [java] RepSumByPrefRound Highlight
     [java] }
     [java] ------------> starting task: Populate
     [java] ------------> starting task: CreateIndex
     [java] ------------> starting task: MAddDocs_4000
     [java] --> main processed (add) 500 docs
     [java] --> main processed (add) 1000 docs
     [java] --> main processed (add) 1500 docs
     [java] --> main processed (add) 2000 docs
     [java] --> main processed (add) 2500 docs
     [java] --> main processed (add) 3000 docs
     [java] --> main processed (add) 3500 docs
     [java] --> main processed (add) 4000 docs
     [java] ------------> starting task: Optimize
     [java] ------------> starting task: CloseIndex
     [java] ------------> starting task: Rounds_4
     [java] ------------> starting task: Highlight_200
     [java] ------------> starting task: HighlightSpan_200
     [java] ------------> starting task: NewRound
     [java] --> Round 0-->1
     [java] ------------> starting task: Highlight_200
     [java] ------------> starting task: HighlightSpan_200
     [java] ------------> starting task: NewRound
     [java] --> Round 1-->2
     [java] ------------> starting task: Highlight_200
     [java] ------------> starting task: HighlightSpan_200
     [java] ------------> starting task: NewRound
     [java] --> Round 2-->3
     [java] ------------> starting task: Highlight_200
     [java] ------------> starting task: HighlightSpan_200
     [java] ------------> starting task: NewRound
     [java] --> Round 3-->4
     [java] ------------> Report Sum By (any) Name (8 about 14 out of 14)
     [java] Operation         round   runCnt   recsPerRun        rec/s  
elapsedSec    avgUsedMem    avgTotalMem
     [java] Populate              0        1         4003        
150.3       26.62     6,153,584     10,395,648
     [java] CreateIndex -  -  -   0 -  -   1 -  -  -  - 1 -  -  -  7.1 
-  -   0.14 -   3,901,352 -  - 8,179,712
     [java] MAddDocs_4000         0        1         4000        
154.7       25.86     6,346,824     10,395,648
     [java] Optimize -  -  -  -   0 -  -   1 -  -  -  - 1 -  -  -  1.6 
-  -   0.62 -   6,346,824 -   10,395,648
     [java] CloseIndex            0        1            1      
1,000.0        0.00     6,153,584     10,395,648
     [java] Rounds_4 -  -  -  -   0 -  -   1 -  -  346980 -  -   461.4 
-  - 751.97 -   8,834,520 -   11,456,512
     [java] Highlight_200         -        4        43372        
468.4      370.41     8,328,474     11,358,208
     [java] HighlightSpan_200 -   - -  -   4 -  -   43372 -  -   454.7 
-  - 381.56 -   8,233,914 -   11,358,208
     [java] ------------> Report sum by Prefix (Highlight) and Round (8 
about 8 out of 14)
     [java] Operation         round   runCnt   recsPerRun        rec/s  
elapsedSec    avgUsedMem    avgTotalMem
     [java] Highlight_200         0        1        42890        
519.7       82.53     8,417,256     11,325,440
     [java] HighlightSpan_200 -   0 -  -   1 -  -   42890 -  -   465.5 
-  -  92.14 -   8,417,256 -   11,325,440
     [java] Highlight_200         1        1        42731        
470.4       90.84     7,547,592     11,325,440
     [java] HighlightSpan_200 -   1 -  -   1 -  -   42731 -  -   449.2 
-  -  95.12 -   7,169,352 -   11,325,440
     [java] Highlight_200         2        1        44979        
463.5       97.05     6,540,944     11,325,440
     [java] HighlightSpan_200 -   2 -  -   1 -  -   44979 -  -   468.2 
-  -  96.08 -   6,540,944 -   11,325,440
     [java] Highlight_200         3        1        42890        
429.0       99.98    10,808,104     11,456,512
     [java] HighlightSpan_200 -   3 -  -   1 -  -   42890 -  -   436.7 
-  -  98.22 -  10,808,104 -   11,456,512
     [java] ####################
     [java] ###  D O N E !!! ###
     [java] ####################

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29046-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 05 21:24:19 2007
Return-Path: <java-user-return-29046-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84644 invoked from network); 5 Jul 2007 21:24:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jul 2007 21:24:17 -0000
Received: (qmail 5984 invoked by uid 500); 5 Jul 2007 21:24:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5555 invoked by uid 500); 5 Jul 2007 21:24:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5544 invoked by uid 99); 5 Jul 2007 21:24:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Jul 2007 14:24:13 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of vnguyen@ur.com designates 63.241.148.49 as permitted sender)
Received: from [63.241.148.49] (HELO iris.ur.com) (63.241.148.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Jul 2007 14:24:08 -0700
Received: from unknown (HELO exchsmtp1.ur.com) ([10.6.134.46])
  by iris.ur.com with ESMTP; 05 Jul 2007 21:24:12 +0000
X-OriginatingIP: 10.6.134.46
X-InternalServer: 10.6.134.46
Received: from EXCL1VS1.ur.com ([10.6.138.54]) by exchsmtp1.ur.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 5 Jul 2007 17:21:29 -0400
x-mimeole: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Too Many Open files Exception
Date: Thu, 5 Jul 2007 17:24:43 -0400
Message-ID: <8F0A781213C3584099D4F903798727F89F1205@EXCL1VS1.ur.com>
In-Reply-To: <Pine.LNX.4.58.0707032135440.23647@hal.rescomp.berkeley.edu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Too Many Open files Exception
Thread-Index: Ace99URodfTeklbWSo+7sornhawR5ABVUbeQ
References: <8F0A781213C3584099D4F903798727F89F1187@EXCL1VS1.ur.com> <Pine.LNX.4.58.0707032135440.23647@hal.rescomp.berkeley.edu>
From: "Van Nguyen" <vnguyen@ur.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 05 Jul 2007 21:21:29.0180 (UTC) FILETIME=[73A189C0:01C7BF4A]
X-Virus-Checked: Checked by ClamAV on apache.org

Ok... after spending time looking at the code... I see that a method is
not closing a TokenStream in one of the classes (a class that is
instantiated quite often) - I would imagine this could quite possibly be
the culprit?

Van

-----Original Message-----
From: Chris Hostetter [mailto:hossman_lucene@fucit.org]=20
Sent: Tuesday, July 03, 2007 9:41 PM
To: java-user@lucene.apache.org
Subject: Re: Too Many Open files Exception

: I am getting a "Too Many Open Files" Exception.  I've read the FAQ
about
: lowering the merge factor (currently set to 25), issuing a ulimit -n
: <number>, etc... but I am still getting the "Too Many Open Files"
: Exception (yes... I'm making sure I close all writer/searchers/reader
: and I only have one open at a time).

so ... what is your ulimit set to? how many files are in your index
directory?  have you tried running lsof on your processes to see all the
files you have open?

the anoying thing about "Too Many Open Files" type errors, is that the
method/class/library that encounters the problem isn't neccessarily the
guy that caused hte problem ... it's just the straw that breaks the
camels
back.  it could be that you aren't closing some network socket (sockets
are files too) and it may not have anything to do with lucene.

or it could just be that your index has a ton of files because of hte
number of segments and the number of fields, and between it, and all the
jars your app loads it really does just use 1 too many files for your
ulimit.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29047-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 05 21:28:08 2007
Return-Path: <java-user-return-29047-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85909 invoked from network); 5 Jul 2007 21:28:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jul 2007 21:28:06 -0000
Received: (qmail 10725 invoked by uid 500); 5 Jul 2007 21:28:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10682 invoked by uid 500); 5 Jul 2007 21:28:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10670 invoked by uid 99); 5 Jul 2007 21:28:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Jul 2007 14:28:03 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jpsondag@gmail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO py-out-1112.google.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Jul 2007 14:27:58 -0700
Received: by py-out-1112.google.com with SMTP id f31so57349pyh
        for <java-user@lucene.apache.org>; Thu, 05 Jul 2007 14:27:37 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        b=ggiZhlcKr/zOYY5+eMEazWtbJbPSwb/jHQxV/gaN5BKV8pl8KeNB+p6csOUIOIz5Ja4nqpVQKCKwZoqZJ409kljbEyqwrkUra+w3uIcIXGOLuCOfEv/TxLS5zaK8xLpCAZWNBXbvr/Gj6Kf9hlm1woiwFiHodNucS843RUfFQBU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        b=pk8QkanIufYjfCvDvyFrar5KjPPTfEB0FtQ2S0eDJTxlGmi9fbaXpGKgkFPpbrxLdBST/UqFm2ypLxZekKpNi6QMLMeMuGbc0kedqklVKL0zF26hIFextb91nCej04gaNGdfl2Ur8fMV3el9JlWKNrzFXdnUXM7DYlUc1VSayJg=
Received: by 10.65.124.8 with SMTP id b8mr70275qbn.1183670857167;
        Thu, 05 Jul 2007 14:27:37 -0700 (PDT)
Received: by 10.65.203.18 with HTTP; Thu, 5 Jul 2007 14:27:37 -0700 (PDT)
Message-ID: <bd67edef0707051427n5d60a0aeya68a0cb76936e7e7@mail.gmail.com>
Date: Thu, 5 Jul 2007 16:27:37 -0500
From: "John Paul Sondag" <jsondag2@uiuc.edu>
Sender: jpsondag@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Retrieve nearest token based off location in original Text
In-Reply-To: <bd67edef0707031049v69dc004ev11f0ebe905a7c396@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_73039_1274948.1183670857135"
References: <bd67edef0707031049v69dc004ev11f0ebe905a7c396@mail.gmail.com>
X-Google-Sender-Auth: 474b2d6870c591bb
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_73039_1274948.1183670857135
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

I never got a response to this and thought maybe I was too wordy.

I'm wondering if there's a way where given a position in the original text
you can retrieve the token index that is nearest to that position using the
StandardToken/StandardTokenizer classes?



--JP

On 7/3/07, John Paul Sondag <jsondag2@uiuc.edu> wrote:
>
> Hi,
>
> I was wondering if it's possible to get the token offset based of the
> position in the original text.
>
> My problem is I'm working on my own "Snippet Generator" and I'm giving a
> token index (call it t) as input and need to make a snippet of the original
> text.  I want the Snippet to be some number of tokens (call it n tokens).
> But to make the Snippet easier to read I want to see if it's close to the
> end of a paragraph (if it is I'll make more of the Snippet before the token
> than usual).  So I'm scanning the original text forward some number of
> characters looking for a new line or tab.  If I find it I'd like to get the
> token before that new line (and it's offset, call it y).  Once I have the
> offset I know I have y - t tokens after my token, and finally I know I put
> n-(y-t) tokens before my token and can successfully make my Snippet.
>
> Thanks in advance!
>
> --JP
>

------=_Part_73039_1274948.1183670857135--

From java-user-return-29048-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 05 22:00:26 2007
Return-Path: <java-user-return-29048-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94745 invoked from network); 5 Jul 2007 22:00:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jul 2007 22:00:25 -0000
Received: (qmail 65909 invoked by uid 500); 5 Jul 2007 22:00:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65873 invoked by uid 500); 5 Jul 2007 22:00:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65862 invoked by uid 99); 5 Jul 2007 22:00:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Jul 2007 15:00:20 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Jul 2007 15:00:15 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1I6ZMg-0002iF-TJ
	for java-user@lucene.apache.org; Thu, 05 Jul 2007 14:59:54 -0700
Message-ID: <11455374.post@talk.nabble.com>
Date: Thu, 5 Jul 2007 14:59:54 -0700 (PDT)
From: emmettwalsh <emmettwalsh@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Indexing and searching - help
In-Reply-To: <359a92830707040705r68dccf51q74efd085910b044e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: emmettwalsh@gmail.com
References: <11426245.post@talk.nabble.com> <359a92830707040705r68dccf51q74efd085910b044e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


ok heres the deal with my application...


I have got an xml file with about 8000 of these properties...

<property id="80000438">
		<name>Dighton Rock</name>
		<name>The Rock</name>
		<address>Across the Taunton River from Dighton in Dighton Rock State
Park</address>
		<city>Dighton</city>
		<state>MA</state>
</property>


I parse this file and convert each into a Property object (to store in a
hashmap)


Meanwhile I have a web front end that has a search box which through ajax
calls a servlet to do a search.

On initialisation the servlet reads the xml file and builds the lucene index
(FSDirectory type).

My idea was to have the servlet hold a hashmap of the objects (keyed on the
id of each property) and have lucene searches return the keys of properties 

from its index so I can retrieve the correct objetcs then from the hashmap.


As I said I have a class like the following...

public class PropertyImpl implements Property {
> :
> : String id;
> :
> : List<String> names = new ArrayList<String>();
> :
> : String address = "";
> :
> : String city = "";
> :
> : String street = "";
> :
> : String state = "";
> :
> : String cachedMatchingString;
> :
> : ...
> :
> : ..
> : public String toString() {
> : // save some time
> : if (cachedMatchingString == null) {
> :
> : StringBuffer buf = new StringBuffer();
> :
> : for (String name : names) {
> : buf.append(name + " ");
> : }
> :
> : if (address != null) {
> : buf.append(address + " ");
> : }
> : if (city != null) {
> : buf.append(city + " ");
> : }
> : if (street != null) {
> : buf.append(street + " ");
> : }
> : if (state != null) {
> : buf.append(state);
> : }
> :
> : // get rid of any spaces
> : //cachedMatchingString = buf.toString().replace(" ", "");
> : cachedMatchingString = buf.toString();
> : }
> : return cachedMatchingString;
> : } 


For now I am just adding the address field and id to the index:

		Field field = new Field("id", prop.getId(), Store.YES, Index.NO);
		doc.add(field);

		Field field2 = new Field("address", prop.getAddress().replace("
","").toLowerCase(), Store.NO,
				Index.UN_TOKENIZED);  //take out spaces
		doc.add(field2);


A search example...


ok lets say the search box on the gui might take in a string like:   
	1. M
     or	2. Main St

when theses gets back to the servlet the following code will get executed:

			QueryParser parser = new QueryParser("content",
					new StandardAnalyzer());
			
			org.apache.lucene.search.Query query =
parser.parse("*"+queryString.toLowerCase()+"**");

where luceneQuery.toString() would be:
	1. *m**
    or	2. *mainst**   //apparently I need to trail with 2 asterisks when
using a leading wildcard



I expect to get a Hits object back where I can get the id(s) of the objects
i need from the hashmap
		int hitCount = hits.length();
		for(int i=0;i<hitCount;i++)
		{
			Document doc = (Document)hits.doc(i);
			String id = doc.get("id");
			Property prop = (Property) propMap.get(id);
			results.add(prop);
			
		}


but I get the following:

Lucene Index built. Took 329 seconds
Aug 5, 2007 10:41:54 PM org.apache.tomcat.util.http.Parameters
processParameters
WARNING: Parameters: Invalid chunk ignored.
org.apache.lucene.search.BooleanQuery$TooManyClauses: maxClauseCount is set
to 2048
	at org.apache.lucene.search.BooleanQuery.add(BooleanQuery.java:165)
	at org.apache.lucene.search.BooleanQuery.add(BooleanQuery.java:156)
	at org.apache.lucene.search.MultiTermQuery.rewrite(MultiTermQuery.java:63)
	at org.apache.lucene.search.WildcardQuery.rewrite(WildcardQuery.java:54)
	at org.apache.lucene.search.IndexSearcher.rewrite(IndexSearcher.java:138)
	at org.apache.lucene.search.Query.weight(Query.java:94)
	at org.apache.lucene.search.Hits.<init>(Hits.java:42)
	at org.apache.lucene.search.Searcher.search(Searcher.java:45)
	at org.apache.lucene.search.Searcher.search(Searcher.java:37)
	at
com.sodaitsolutions.instantsearch.model.PropertyDatabaseImpl.search(PropertyDatabaseImpl.java:306)




-- 
View this message in context: http://www.nabble.com/Lucene-Indexing-and-searching---help-tf4022884.html#a11455374
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29049-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 05 23:04:28 2007
Return-Path: <java-user-return-29049-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8876 invoked from network); 5 Jul 2007 23:04:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jul 2007 23:04:27 -0000
Received: (qmail 48928 invoked by uid 500); 5 Jul 2007 23:04:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48894 invoked by uid 500); 5 Jul 2007 23:04:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48883 invoked by uid 99); 5 Jul 2007 23:04:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Jul 2007 16:04:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.74] (HELO spunkymail-a14.g.dreamhost.com) (208.97.132.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Jul 2007 16:04:15 -0700
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a14.g.dreamhost.com (Postfix) with ESMTP id 39D24190E2D
	for <java-user@lucene.apache.org>; Thu,  5 Jul 2007 16:03:55 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <15606c360707051154t4ec15993u2883eab0d3b7bf5f@mail.gmail.com>
References: <15606c360707051154t4ec15993u2883eab0d3b7bf5f@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <0BE30C33-996C-48E1-9E1E-4395C2D4C3C0@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: making hudson available on port 80
Date: Thu, 5 Jul 2007 19:03:43 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

I know this doesn't completely solve your problem, but if you are  
dealing with a specific release, as opposed to a nightly build, you  
can see the javadocs for a specific build by choosing the specific  
version of Lucene you are working on under the "Site Versions" menu  
on the left hand menu of the main Lucene Java page.  From there, you  
can get to javadocs for a specific version.

-Grant

On Jul 5, 2007, at 2:54 PM, Andrew Huntwork wrote:

> Are there any plans to make the hudson instance that hosts the apidocs
> available on port 80?  My company has an traffic filter for various
> reasons and port 8080 is not on the approved list of ports, so I'm
> unable to see the apidocs or anything else in
> lucene.zones.apache.org:8080.
>
> thanks.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

Read the Lucene Java FAQ at http://wiki.apache.org/lucene-java/LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29051-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 06 06:31:28 2007
Return-Path: <java-user-return-29051-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49836 invoked from network); 6 Jul 2007 06:23:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jul 2007 06:23:57 -0000
Received: (qmail 22163 invoked by uid 500); 6 Jul 2007 04:11:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22125 invoked by uid 500); 6 Jul 2007 04:11:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22114 invoked by uid 99); 6 Jul 2007 04:11:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Jul 2007 21:11:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [60.52.184.45] (HELO mail.tecforte.com) (60.52.184.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Jul 2007 21:11:48 -0700
Received: from DFPYWL2S ([192.168.2.96]) by tecforte.com with MailEnable ESMTP; Fri, 06 Jul 2007 12:11:29 +0800
From: "Chew Yee Chuang" <yeechuang@tecforte.com>
To: <java-user@lucene.apache.org>
References: <003d01c7af1a$bc11eb90$3435c2b0$@com>	 <359a92830706150811h751a208bwa0cc65c7853ee1a1@mail.gmail.com>	 <002901c7b182$da91edd0$8fb5c970$@com>	 <6e3ae6310706181118m18f59255o3d05026663dbe197@mail.gmail.com>	 <005501c7b218$78f17dc0$6ad47940$@com>	 <359a92830706190703s389333dcwc52fed9f6ac26571@mail.gmail.com>	 <002201c7b323$91d633b0$b5829b10$@com> <359a92830706200555y2c138109j3309be15775bddab@mail.gmail.com>
In-Reply-To: <359a92830706200555y2c138109j3309be15775bddab@mail.gmail.com>
Subject: RE: FW: Lucene indexing vs RDBMS insertion.
Date: Fri, 6 Jul 2007 12:08:49 +0800
Message-ID: <000301c7bf83$5b409a90$11c1cfb0$@com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="windows-1250"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcezOmGVWJgHvCyuR/WnStM72uWAoQMPVm3Q
Content-Language: en-us
X-Virus-Checked: Checked by ClamAV on apache.org

Greetings,

I tried the RAM directory and it really speed up the indexing process a =
lot.
Now my indexing can handle 700 - 800 documents/sec with mergeFactor:10 =
and
addIndexesNoOptimize. However, when I run indexing and searching
concurrently, my indexing process will hit the maximum heap space(512m) =
and
thus OutOfMemory exception was thrown. The indexing and searching is run =
on
the same index, and search is activated every 5sec with more than 30
queries/search. I'm running all this in a Pentium 4, 2.8GHz with 1GB Ram
machine.=20

Is it anyway to lighten indexing process? I had think of scoring, =
because I
don=92t really need the relevancy of a given document to a query, but I =
don=92t
know what lucene did in order to get the score, just thinking it might =
have
some process during indexing so the search can return documents' score /
order but documents' score, pls correct me if I'm wrong. Any suggestion =
to
lighten the indexing is always welcome.

Thank you

=20
-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]=20
Sent: Wednesday, June 20, 2007 8:56 PM
To: java-user@lucene.apache.org
Subject: Re: FW: Lucene indexing vs RDBMS insertion.

That's a tough one. What I still don't get is why your 1,000 records/sec
is important. If you're really inserting records that fast, for very =
long,
you must have an impressive piece of hardware <G>...

That said, it might be possible to do something like have your base
index out on disk somewhere, and use, say, a RAMdir for some period
of time to collect new insertions. Your searches would have to go
against both indexes. Periodically you'd have to merge the RAMdir
with your filesystem based index and close/reopen the FSDir index.

One problem you'll have is that your application won't be able to see
index updates until you close/reopen your readers. Doing this every
minute for a large index will lead to performance problems. The RAMDir
approach at least lets you close/open on a (hopefully) much =
smaller/faster
index every minute. Of course you'll have to combine the results from =
the
different indexes, which may or may not be difficult.

Hope this helps
Erick

On 6/20/07, Chew Yee Chuang <yeechuang@tecforte.com> wrote:
>
> Greetings Erick, my index need to have latest data (almost real time, =
but
> a
> delay of less than 1 minutes is acceptable). Thus there is no way to
> schedule the indexing. What I can do is to find a solution to minimize
> delay
> so system can get "almost" real time data to display.
>
> Thanks.
> -------
> eChuang, Chew
>
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: Tuesday, June 19, 2007 10:03 PM
> To: java-user@lucene.apache.org
> Subject: Re: FW: Lucene indexing vs RDBMS insertion.
>
> You still haven't described how often you need to index and why.
> That's critical. If you have an index that only needs to be updated
> every month, many of your concerns disappear. If it needs to be
> updated every 5 seconds, it's another matter entirely.
>
> So which is it?
>
> Best
> Erick
>
> On 6/18/07, Chew Yee Chuang <yeechuang@tecforte.com> wrote:
> >
> > Thanks for the sharing and suggestion.
> > Yes Chris, the index is to be partitioned by date time, and old =
index
> will
> > not be access so frequent.
> >
> > I also did consider indexing in parallel to different index as well
> Erick.
> > But I can only put all index in ONE machine and there is only ONE
> machine
> > to
> > process the job (both searching and indexing).
> >
> > I haven't try out the addIndexes to combine indexes but I did tried =
out
> > MultiSearcher for 3 millions of documents in 3 separate indexes and =
it
> > does
> > not have much different compare to a search in 1 index. Could you =
mind
> to
> > share your experience in addIndexes, how is the performance for that =
?
> In
> > my
> > situation,  the indexes may be use for searching at the same time.
> Another
> > worry for indexing is optimization process, I have tried it out and =
it
> > take
> > quite some time to optimize my index, e.g indexing for 5000 is about
> > 10seconds (MergeFactor =3D 1000, and recreate IndexWriter every 5000
> > documents), but to optimize, it will take around ONE minute. So do =
you
> > guys
> > have any suggestion on optimization process as well ? when should I =
run
> > the
> > optimization process ? and is it a lot of different with searching =
in a
> > optimized index compare to a un-optimize ?
> >
> > ------
> > eChuang, Chew
> >
> > -----Original Message-----
> > From: Chris Lu [mailto:chris.lu@gmail.com]
> > Sent: Tuesday, June 19, 2007 2:19 AM
> > To: java-user@lucene.apache.org
> > Subject: Re: FW: Lucene indexing vs RDBMS insertion.
> >
> > Definitely very aggressive.
> >
> > Currently my experience is that, together with database access,
> > DBSight can do 3 million in 2 hours, with Pentium D 3.4Hz. Seems you
> > definitely need some good hardware, and a fast hard drive for this. =
I
> > feel the hard drive is actually the bottleneck for large indexes.
> > Partitioning your data and pruning the old data should be also
> > considered.
> >
> > --
> > Chris Lu
> > -------------------------
> > Instant Scalable Full-Text Search On Any Database/Application
> > site: http://www.dbsight.net
> > demo: http://search.dbsight.com
> > Lucene Database Search in 3 minutes:
> >
> >
>
>
http://wiki.dbsight.com/index.php?title=3DCreate_Lucene_Database_Search_i=
n_3_m
> > inutes
> >
> >
> > On 6/18/07, Chew Yee Chuang <yeechuang@tecforte.com> wrote:
> > > Thanks for your suggestion Erick. I'm planning to test the =
indexing
> > soon.
> > > For your information, currently the system is inserting into RDBMS
> which
> > is
> > > around 1000 records per seconds. Thus, if lucene in place, I would
> > expect
> > it
> > > will index that much of documents per seconds as well (Our target =
is
> 3.6
> > > millions of document to be indexed in 1 hour). Beside of that, I'm
> > planning
> > > to queue the record so lucene will have enough time to index it.
> Anyway,
> > > thanks for your suggestion and will come back to you once I tested =
the
> > > solution.
> > >
> > > Thanks,
> > > eChuang, Chew
> > >
> > > -----Original Message-----
> > > From: Erick Erickson [mailto:erickerickson@gmail.com]
> > > Sent: Friday, June 15, 2007 11:11 PM
> > > To: java-user@lucene.apache.org
> > > Subject: Re: FW: Lucene indexing vs RDBMS insertion.
> > >
> > > From my perspective, this is an irrelevant question. The real =
question
> > > is "is Lucene indexing fast enough for my application?". Which =
nobody
> > > can answer for you, you have to experiment.
> > >
> > > If you're building an index that's only updated every 6 months,
> > > Lucene is certainly "fast enough". If you're recreating the
> > > index every 6 seconds, it's a different question.
> > >
> > > So, I recommend that you create a test application that does
> > > nothing except read your source, do whatever parsing you
> > > need to do and does NOT index it at all. Record the time it
> > > takes.
> > >
> > > Then try the same thing WITH indexing and record the difference.
> > >
> > > Then, to get a sense of the dimension of the problem, try
> > > substituting inserting into the RDBMS instead of the Lucene
> > > index.
> > >
> > > Once you have numbers, you can make better decisions
> > > And people can give you better advice,  especially if you
> > > include more detail of your design.
> > >
> > > Best
> > > Erick
> > >
> > > On 6/15/07, Chew Yee Chuang <yeechuang@tecforte.com> wrote:
> > > >
> > > > Hi, I'm  a new user to Lucene, and heard that it is a powerful =
tool
> > for
> > > > full
> > > > text search and I'm planning to use it in my project for data
> storage
> > > > purpose. Before the implementation, I could like to know whether
> there
> > is
> > > > performance issue on Lucene indexing process. I have no doubt on =
the
> > > > retrieving and searching feature in Lucene but the indexing =
process.
> I
> > > > have
> > > > tested my current system to insert 1000 records in RDBMS storage =
it
> > took
> > > > about 1 seconds. Thus, if I change my solution to Lucene, can =
Lucene
> > > > indexing process perform faster than RDBMS ? I have go through =
some
> of
> > the
> > > > article talking about the "MergeFactor" and "MaxMergeDocs" =
parameter
> > for
> > > > fine tune the indexing process, but no comparison between Lucene
> > indexing
> > > > process and RDBMS insertion. Thus, hope someone who have =
experience
> in
> > > > Lucene can provide this information or some article that discuss
> > between
> > > > Lucene and RDBMS.
> > > >
> > > >
> > > >
> > > > I really appreciate any help in this. Thanks
> > > >
> > > >
> > > > No virus found in this outgoing message.
> > > > Checked by AVG Free Edition.
> > > > Version: 7.5.472 / Virus Database: 269.8.16/849 - Release Date:
> > 6/14/2007
> > > > 12:44 PM
> > > >
> > > >
> > >
> > > No virus found in this incoming message.
> > > Checked by AVG Free Edition.
> > > Version: 7.5.472 / Virus Database: 269.9.0/852 - Release Date:
> 6/17/2007
> > > 8:23 AM
> > >
> > >
> > > No virus found in this outgoing message.
> > > Checked by AVG Free Edition.
> > > Version: 7.5.472 / Virus Database: 269.9.0/852 - Release Date:
> 6/17/2007
> > > 8:23 AM
> > >
> > >
> > >
> > >
> > > =
---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> > No virus found in this incoming message.
> > Checked by AVG Free Edition.
> > Version: 7.5.472 / Virus Database: 269.9.0/852 - Release Date: =
6/17/2007
> > 8:23 AM
> >
> >
> > No virus found in this outgoing message.
> > Checked by AVG Free Edition.
> > Version: 7.5.472 / Virus Database: 269.9.0/853 - Release Date: =
6/18/2007
> > 3:02 PM
> >
> >
> >
> >
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> No virus found in this incoming message.
> Checked by AVG Free Edition.
> Version: 7.5.472 / Virus Database: 269.9.0/853 - Release Date: =
6/18/2007
> 3:02 PM
>
>
> No virus found in this outgoing message.
> Checked by AVG Free Edition.
> Version: 7.5.472 / Virus Database: 269.9.1/854 - Release Date: =
6/19/2007
> 1:12 PM
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

No virus found in this incoming message.
Checked by AVG Free Edition.=20
Version: 7.5.472 / Virus Database: 269.9.4/860 - Release Date: 6/21/2007
5:53 PM
=20

No virus found in this outgoing message.
Checked by AVG Free Edition.=20
Version: 7.5.476 / Virus Database: 269.10.0/887 - Release Date: 7/5/2007
1:55 PM
=20



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29052-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 06 06:57:47 2007
Return-Path: <java-user-return-29052-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76695 invoked from network); 6 Jul 2007 06:39:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jul 2007 06:39:52 -0000
Received: (qmail 35340 invoked by uid 500); 6 Jul 2007 04:21:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35306 invoked by uid 500); 6 Jul 2007 04:21:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35295 invoked by uid 99); 6 Jul 2007 04:21:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Jul 2007 21:21:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Jul 2007 21:21:38 -0700
Received: from xylophone.syd.nuix.com.au (unknown [192.168.222.102])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id DCE454A809D
	for <java-user@lucene.apache.org>; Fri,  6 Jul 2007 14:25:50 +1000 (EST)
From: Daniel Noll <daniel@nuix.com>
To: java-user@lucene.apache.org
Subject: Re: How to make a case insensitive search using a FuzzyQuery?
Date: Fri, 6 Jul 2007 14:15:12 +1000
User-Agent: KMail/1.9.7
References: <7372a1430707051839y6f7a477fj11768a9c2613aa3e@mail.gmail.com>
In-Reply-To: <7372a1430707051839y6f7a477fj11768a9c2613aa3e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200707061415.12776.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Friday 06 July 2007 11:39:00 Eloi Rocha Neto wrote:
> Hi,
>
>    Anyone knows how to make a case insensitive search using a FuzzyQuery?
>
>    I want that the results coming from "PP-Trip SubAlcance Seq Negativa",
> "pp-trip subAlcance seq negativa" and "PP-TRIP SUBALCANCE SEQ NEGATIVA" be
> the same. The field must be indexed by "PP-Trip SubAlcance Seq Negativa".
>
>    My code:
>       Query query = new FuzzyQuery( new Term( field, input ) , similarity
> ); Hits hits = indexSearcher.search(query);
>
>   I really appreciate any help!

Why don't you just have your analyser lowercase the field at indexing time?  I 
don't see why you would use a FuzzyQuery for something where a normal 
PhraseQuery should suffice.

Daniel


-- 
Daniel Noll
Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
Web: http://nuix.com/                               Fax: +61 2 9212 6902

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29053-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 06 14:47:40 2007
Return-Path: <java-user-return-29053-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46857 invoked from network); 6 Jul 2007 07:16:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jul 2007 07:16:50 -0000
Received: (qmail 96750 invoked by uid 500); 6 Jul 2007 14:16:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96711 invoked by uid 500); 6 Jul 2007 14:16:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96694 invoked by uid 99); 6 Jul 2007 14:16:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Jul 2007 07:16:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.74] (HELO spunkymail-a11.g.dreamhost.com) (208.97.132.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Jul 2007 07:16:35 -0700
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a11.g.dreamhost.com (Postfix) with ESMTP id A63D6B84EA
	for <java-user@lucene.apache.org>; Fri,  6 Jul 2007 07:16:12 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <ae6f38f60707031402v63c59e4ax3a944a623be038fe@mail.gmail.com>
References: <ae6f38f60707031402v63c59e4ax3a944a623be038fe@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <CCDFB8E8-4AE8-41CD-996A-A522099F3F4A@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Auto Slop
Date: Fri, 6 Jul 2007 10:16:11 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

FYI: Solr has a nice Analysis debugging tool that lets you see the  
results of running an analysis as it passes through each phase of the  
Analyzer.  Some enterprising soul might want to make a contribution  
along these lines that could be added to the contrib.  :-)

Cheers,
Grant


On Jul 3, 2007, at 5:02 PM, Walt Stoneburner wrote:

> I've solved the problem, thanks to tips from Mark Miller and Ard
> Schrijvers, and am simply recording it so that someone else walking
> through the archives might get some benefit.
>
> A while ago I had been working on a case-sensitive version of Lucene,
> where with a prefix symbol, it was possible to indicate whether you
> were interested in the token as-is, or the case insensitive version.
> (For instance 'LET' is a real acronym, whereas 'let' is a stop word.)
>
> I did this by writing a filter that injected two tokens for every one.
> The problem was, that token.setPositionIncrement(0) wasn't being
> called on the duplicate token.  As such, it did appear that there were
> intermediate tokens between the real ones, when they should have
> occupied the same logical position.
>
> Adding that simple call made phrases work perfectly, even in the light
> of all the modified functionality I've added.  Gotta love Lucene!
>
> What would have been a helpful debugging tool, would have been if Luke
> was capable of dumping the token positions.  Clearly it can
> reconstruct a document in this manner, but it would have been extra
> nice to see numerical positions they resided at, not just the sequence
> of tokens.
>
> Hope this helps someone else in the future,
> -Walt Stoneburner,
> http://www.wwco.com/~wls/blog/
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29054-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 06 14:49:43 2007
Return-Path: <java-user-return-29054-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47850 invoked from network); 6 Jul 2007 07:17:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jul 2007 07:17:29 -0000
Received: (qmail 100 invoked by uid 500); 6 Jul 2007 14:17:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99948 invoked by uid 500); 6 Jul 2007 14:17:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99937 invoked by uid 99); 6 Jul 2007 14:17:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Jul 2007 07:17:21 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.128.225.190] (HELO spmler1.mail.eds.com) (194.128.225.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Jul 2007 07:17:13 -0700
Received: from spmlir2.mail.eds.com (spmlir2.mail.eds.com [205.191.69.42])
	by spmler1.mail.eds.com (8.13.8/8.13.8) with ESMTP id l66EGoM2010646
	for <java-user@lucene.apache.org>; Fri, 6 Jul 2007 15:16:50 +0100
Received: from spmlir2.mail.eds.com (localhost.localdomain [127.0.0.1])
	by spmlir2.mail.eds.com (8.13.8/8.12.10) with ESMTP id l66EGatv012837
	for <java-user@lucene.apache.org>; Fri, 6 Jul 2007 15:16:36 +0100
Received: from DERUM100.emea.corp.eds.com ([205.239.192.123])
	by spmlir2.mail.eds.com (8.13.8/8.12.10) with ESMTP id l66EGZNk012775
	for <java-user@lucene.apache.org>; Fri, 6 Jul 2007 15:16:36 +0100
Received: from derum202.emea.corp.eds.com ([145.16.186.20]) by DERUM100.emea.corp.eds.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Fri, 6 Jul 2007 16:16:28 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C7BFD8.3E46DEA4"
Subject: document delete after reader.close()
Date: Fri, 6 Jul 2007 16:16:23 +0200
Message-ID: <2DD42166EF0A554B83F30B6F7B0CBA5C0BBDA5@derum202.emea.corp.eds.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: document delete after reader.close()
Thread-Index: Ace/2DuwxVSFja5JQf2zjvo4RQsJIw==
From: "Boeckli, Dominique" <dominique.boeckli@eds.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 06 Jul 2007 14:16:28.0270 (UTC) FILETIME=[3E5138E0:01C7BFD8]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C7BFD8.3E46DEA4
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable


Hello,

i have following problem:

I have written a Lucene JCA Connector which also taking care of the
index maintenance. From time to time the connector
is called (time initiated) and verifies if the index still is in synch
with the filesystem (deleted, added or updated documents).
If something changes, for example when a file was deleted, then the
documents are delete from the index as well:

IndexReader reader =3D getIndexReader();
	for (int i=3D0; i<documentsToDelete.size();i++) {
		String path =3D documentsToDelete.get(i).getPath();
		Term term =3D new Term(FileDocument.PATH, path);
		reader.deleteDocuments(term);
            count++;
	}
reader.close();

The problem is that the document is not deleted after the close. The
document is only deleted after a while
when the jca connector was recreated (deleted from the jca pool), which
means only after the thread has
terminated.

strange, did i missed something.

Please explain to me if i did something wrong

many thanks

Dominique

------_=_NextPart_001_01C7BFD8.3E46DEA4--

From java-user-return-29055-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 06 15:08:09 2007
Return-Path: <java-user-return-29055-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88552 invoked from network); 6 Jul 2007 14:38:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jul 2007 14:38:24 -0000
Received: (qmail 53222 invoked by uid 500); 6 Jul 2007 14:38:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53182 invoked by uid 500); 6 Jul 2007 14:38:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53171 invoked by uid 99); 6 Jul 2007 14:38:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Jul 2007 07:38:18 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Jul 2007 07:38:13 -0700
Received: by nf-out-0910.google.com with SMTP id d3so13918nfc
        for <java-user@lucene.apache.org>; Fri, 06 Jul 2007 07:37:51 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=P7I7iIxZ+W+crMDUoU8VwvB8RleovR8JsNc68EJ8XKeZRnz7ow8dSxcdyd6ayUE/b3uySCaAX9g+NHVAzng7Ocgb+cmfIUOrpIIwbDeFvHiFlLGuN5+yW6VqepQCkEtobm/nh7pthrpfMe5Vz9CBGN7RNZYGrfIg2iS5pvOSLgM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Dwm2eXFh0AIjCoNqFc8OIUDbVSTDe5PdbhtDRDy2DZHL97M02ZgLIGGA/VLr6kniq4i7DVJ+XfSWT6/FiL8AeyvP2pOzKmgOkMbnktReizfDnM0XlcdSndGQFHVCLuRn+pTsSJZIkO2ktEq/2Wo/uRJyUt9R4vA+L+dWfn81yek=
Received: by 10.82.158.12 with SMTP id g12mr1866171bue.1183732670606;
        Fri, 06 Jul 2007 07:37:50 -0700 (PDT)
Received: by 10.82.167.12 with HTTP; Fri, 6 Jul 2007 07:37:50 -0700 (PDT)
Message-ID: <359a92830707060737maf762fp734b914f72edf34@mail.gmail.com>
Date: Fri, 6 Jul 2007 10:37:50 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: document delete after reader.close()
In-Reply-To: <2DD42166EF0A554B83F30B6F7B0CBA5C0BBDA5@derum202.emea.corp.eds.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_102892_20243370.1183732670582"
References: <2DD42166EF0A554B83F30B6F7B0CBA5C0BBDA5@derum202.emea.corp.eds.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_102892_20243370.1183732670582
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Warning, I don't know much about JCA Connector.

That said, index modifications aren't visible to a searcher
until the *searcher* is closed and re-opened. Which sounds
suspiciously like what would happen when the thread
terminates.

This may be totally off base, but sounds like a place to look...

Best
Erick

On 7/6/07, Boeckli, Dominique <dominique.boeckli@eds.com> wrote:
>
>
> Hello,
>
> i have following problem:
>
> I have written a Lucene JCA Connector which also taking care of the
> index maintenance. From time to time the connector
> is called (time initiated) and verifies if the index still is in synch
> with the filesystem (deleted, added or updated documents).
> If something changes, for example when a file was deleted, then the
> documents are delete from the index as well:
>
> IndexReader reader = getIndexReader();
>         for (int i=0; i<documentsToDelete.size();i++) {
>                 String path = documentsToDelete.get(i).getPath();
>                 Term term = new Term(FileDocument.PATH, path);
>                 reader.deleteDocuments(term);
>             count++;
>         }
> reader.close();
>
> The problem is that the document is not deleted after the close. The
> document is only deleted after a while
> when the jca connector was recreated (deleted from the jca pool), which
> means only after the thread has
> terminated.
>
> strange, did i missed something.
>
> Please explain to me if i did something wrong
>
> many thanks
>
> Dominique
>

------=_Part_102892_20243370.1183732670582--

From java-user-return-29050-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 06 15:34:36 2007
Return-Path: <java-user-return-29050-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25395 invoked from network); 6 Jul 2007 15:20:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jul 2007 15:20:51 -0000
Received: (qmail 40698 invoked by uid 500); 6 Jul 2007 01:39:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39766 invoked by uid 500); 6 Jul 2007 01:39:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39755 invoked by uid 99); 6 Jul 2007 01:39:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Jul 2007 18:39:27 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of eloi.rocha@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Jul 2007 18:39:21 -0700
Received: by py-out-1112.google.com with SMTP id f31so225876pyh
        for <java-user@lucene.apache.org>; Thu, 05 Jul 2007 18:39:00 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=dzJUKoU3ZokRE0Cxd8oDxIbfDiKZQU8JruPwfnTRjM7USbPedp815FaYTNEJ9/NkhAsQWGT/VVDl45sriUHQVs62wMcTt1u+XnS+iJs1/Na78xq1DnqxLAANwRIhwwiqv5bp1BftwMr9Q2QkvHKWFuUFsPzBfVj/tkxtKkx4H2E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=IjnDW05rqsZX6qRtjHPNv0boGts9vfoqTbHapznOd5A9W43yrwhgKAzhRl/Dsf03Kv/grrRbpY+cjyKRaONCQJiUksQHrd/3GfVaxD/lldn+D+G49YDi/WLuJjyGesuXZ9dlb7sWoympgwwadC3hXBZTesty8nHGFsFOy6ohG78=
Received: by 10.65.248.19 with SMTP id a19mr242554qbs.1183685940661;
        Thu, 05 Jul 2007 18:39:00 -0700 (PDT)
Received: by 10.65.121.15 with HTTP; Thu, 5 Jul 2007 18:39:00 -0700 (PDT)
Message-ID: <7372a1430707051839y6f7a477fj11768a9c2613aa3e@mail.gmail.com>
Date: Thu, 5 Jul 2007 22:39:00 -0300
From: "Eloi Rocha Neto" <eloi.rocha@gmail.com>
To: java-user@lucene.apache.org
Subject: How to make a case insensitive search using a FuzzyQuery?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_30890_27910937.1183685940631"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_30890_27910937.1183685940631
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

   Anyone knows how to make a case insensitive search using a FuzzyQuery?

   I want that the results coming from "PP-Trip SubAlcance Seq Negativa",
"pp-trip subAlcance seq negativa" and "PP-TRIP SUBALCANCE SEQ NEGATIVA" be
the same. The field must be indexed by "PP-Trip SubAlcance Seq Negativa".

   My code:
      Query query = new FuzzyQuery( new Term( field, input ) , similarity );
      Hits hits = indexSearcher.search(query);

  I really appreciate any help!

  Thanks in advance,

Eloi

------=_Part_30890_27910937.1183685940631--

From java-user-return-29056-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 06 15:36:34 2007
Return-Path: <java-user-return-29056-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32150 invoked from network); 6 Jul 2007 15:25:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jul 2007 15:25:00 -0000
Received: (qmail 73696 invoked by uid 500); 6 Jul 2007 15:24:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73650 invoked by uid 500); 6 Jul 2007 15:24:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73639 invoked by uid 99); 6 Jul 2007 15:24:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Jul 2007 08:24:55 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of eloi.rocha@gmail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO py-out-1112.google.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Jul 2007 08:24:50 -0700
Received: by py-out-1112.google.com with SMTP id f31so722985pyh
        for <java-user@lucene.apache.org>; Fri, 06 Jul 2007 08:24:29 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=czEgJdd7+jS7WmF+LsH04BW7Hgdba/0So5rj3Z0P8VjvVE5dwbTfB8KNey+SqZtvzs13PtZh6ZLQE79I82q5kDqJ2pV+0AIn6ADcAG8LAGWyiwRAMDlRqupi05BUcqrSSVDwDRW+MvO3p9kjNFCQDFbuijklWbziFqV7kruU3Fc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=t+F0NTFndbX6Dk4pWVt2bFeW2d7Gs2DeyiGIXmFxt5Isu3bZq8CkryZMq9F/v5yrsMh2ONNpxourqkFv2gUu4FoKz1FfQJOEcehRnIjkqnuytO7TaI0jDBfUrZVua1zuF29OY+Z4KcVlo2S14Rh/2fcOIDHEYVFonG9LOdYjv+U=
Received: by 10.64.251.9 with SMTP id y9mr1339753qbh.1183735468971;
        Fri, 06 Jul 2007 08:24:28 -0700 (PDT)
Received: by 10.65.121.15 with HTTP; Fri, 6 Jul 2007 08:24:28 -0700 (PDT)
Message-ID: <7372a1430707060824p5bd46ee9x7e9fe46fb87bbf5d@mail.gmail.com>
Date: Fri, 6 Jul 2007 12:24:28 -0300
From: "Eloi Rocha Neto" <eloi.rocha@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to make a case insensitive search using a FuzzyQuery?
In-Reply-To: <200707061415.12776.daniel@nuix.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_36322_16904800.1183735468893"
References: <7372a1430707051839y6f7a477fj11768a9c2613aa3e@mail.gmail.com>
	 <200707061415.12776.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_36322_16904800.1183735468893
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Daniel,

   I dont lowercase the field at index time, because I have to show the
results in the same way as it was found.

   For instance:

     Some fields indexed:

      PP-Trip SubAlcance Seq Negativa
      PP-Trip SubAlcance Seq Positiva
      PS-Trip SubAlcance Seq Negativa
      PS-Trip SubAlcance Seq Positiva

    If I search for "PP-TRIP SUBALCANCE SEQ NEG", I want that the result
showed are:
       PP-Trip SubAlcance Seq Negativa
       PS-Trip SubAlcance Seq Negativa

    Not:
       pp-trip subalcance seq negativa
       ps-trip subalcance seq negativa

  A possible solution is store in a document object two fields: the original
and the lowercased. I use the last one to make the query, and the other one
to show the results. It works, but it doesnt smell good!

  Thanks for your help!

Eloi


On 7/6/07, Daniel Noll <daniel@nuix.com> wrote:
>
> On Friday 06 July 2007 11:39:00 Eloi Rocha Neto wrote:
> > Hi,
> >
> >    Anyone knows how to make a case insensitive search using a
> FuzzyQuery?
> >
> >    I want that the results coming from "PP-Trip SubAlcance Seq
> Negativa",
> > "pp-trip subAlcance seq negativa" and "PP-TRIP SUBALCANCE SEQ NEGATIVA"
> be
> > the same. The field must be indexed by "PP-Trip SubAlcance Seq
> Negativa".
> >
> >    My code:
> >       Query query = new FuzzyQuery( new Term( field, input ) ,
> similarity
> > ); Hits hits = indexSearcher.search(query);
> >
> >   I really appreciate any help!
>
> Why don't you just have your analyser lowercase the field at indexing
> time?  I
> don't see why you would use a FuzzyQuery for something where a normal
> PhraseQuery should suffice.
>
> Daniel
>
>
> --
> Daniel Noll
> Nuix Pty Ltd
> Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
> Web: http://nuix.com/                               Fax: +61 2 9212 6902
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_36322_16904800.1183735468893--

From java-user-return-29057-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 06 16:03:17 2007
Return-Path: <java-user-return-29057-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76149 invoked from network); 6 Jul 2007 16:03:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jul 2007 16:03:15 -0000
Received: (qmail 56645 invoked by uid 500); 6 Jul 2007 16:03:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56613 invoked by uid 500); 6 Jul 2007 16:03:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56602 invoked by uid 99); 6 Jul 2007 16:03:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Jul 2007 09:03:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [130.107.64.135] (HELO Balboa.AI.SRI.COM) (130.107.64.135)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Jul 2007 09:03:01 -0700
Received: from Balboa.AI.SRI.COM (localhost [127.0.0.1])
	by Balboa.AI.SRI.COM (8.11.7p2+Sun/8.10.1) with SMTP id l66G2e004628
	for <java-user@lucene.apache.org>; Fri, 6 Jul 2007 09:02:40 -0700 (PDT)
Received: from Salt.AI.SRI.COM ([130.107.65.211])
 by Balboa.AI.SRI.COM (SMSSMTP 4.1.9.35) with SMTP id M2007070609024009959
 for <java-user@lucene.apache.org>; Fri, 06 Jul 2007 09:02:40 -0700
Received: from avocado.ai.sri.com ([130.107.65.9])
	by Salt.AI.SRI.COM with asmtp 
	(Cipher TLSv1:RC4-MD5:128) (Exim 3.35 #1 (Debian))
	id 1I6qGV-0004wd-00
	for <java-user@lucene.apache.org>; Fri, 06 Jul 2007 09:02:39 -0700
Message-ID: <468E6799.9010708@ai.sri.com>
Date: Fri, 06 Jul 2007 09:02:33 -0700
From: Jiye Yu <yu@AI.SRI.COM>
Organization: AIC
User-Agent: Thunderbird 1.5.0.12 (Windows/20070509)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: How to make a case insensitive search using a FuzzyQuery?
References: <7372a1430707051839y6f7a477fj11768a9c2613aa3e@mail.gmail.com>	 <200707061415.12776.daniel@nuix.com> <7372a1430707060824p5bd46ee9x7e9fe46fb87bbf5d@mail.gmail.com>
In-Reply-To: <7372a1430707060824p5bd46ee9x7e9fe46fb87bbf5d@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

You may store the original text in the doc w/o index it and index the 
lower case version without storing it. This may save you some space/time.

Eloi Rocha Neto wrote:
> Hi Daniel,
> 
>   I dont lowercase the field at index time, because I have to show the
> results in the same way as it was found.
> 
>   For instance:
> 
>     Some fields indexed:
> 
>      PP-Trip SubAlcance Seq Negativa
>      PP-Trip SubAlcance Seq Positiva
>      PS-Trip SubAlcance Seq Negativa
>      PS-Trip SubAlcance Seq Positiva
> 
>    If I search for "PP-TRIP SUBALCANCE SEQ NEG", I want that the result
> showed are:
>       PP-Trip SubAlcance Seq Negativa
>       PS-Trip SubAlcance Seq Negativa
> 
>    Not:
>       pp-trip subalcance seq negativa
>       ps-trip subalcance seq negativa
> 
>  A possible solution is store in a document object two fields: the original
> and the lowercased. I use the last one to make the query, and the other one
> to show the results. It works, but it doesnt smell good!
> 
>  Thanks for your help!
> 
> Eloi
> 
> 
> On 7/6/07, Daniel Noll <daniel@nuix.com> wrote:
>>
>> On Friday 06 July 2007 11:39:00 Eloi Rocha Neto wrote:
>> > Hi,
>> >
>> >    Anyone knows how to make a case insensitive search using a
>> FuzzyQuery?
>> >
>> >    I want that the results coming from "PP-Trip SubAlcance Seq
>> Negativa",
>> > "pp-trip subAlcance seq negativa" and "PP-TRIP SUBALCANCE SEQ NEGATIVA"
>> be
>> > the same. The field must be indexed by "PP-Trip SubAlcance Seq
>> Negativa".
>> >
>> >    My code:
>> >       Query query = new FuzzyQuery( new Term( field, input ) ,
>> similarity
>> > ); Hits hits = indexSearcher.search(query);
>> >
>> >   I really appreciate any help!
>>
>> Why don't you just have your analyser lowercase the field at indexing
>> time?  I
>> don't see why you would use a FuzzyQuery for something where a normal
>> PhraseQuery should suffice.
>>
>> Daniel
>>
>>
>> -- 
>> Daniel Noll
>> Nuix Pty Ltd
>> Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
>> Web: http://nuix.com/                               Fax: +61 2 9212 6902
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29058-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 06 16:03:55 2007
Return-Path: <java-user-return-29058-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76405 invoked from network); 6 Jul 2007 16:03:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jul 2007 16:03:54 -0000
Received: (qmail 59216 invoked by uid 500); 6 Jul 2007 16:03:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59185 invoked by uid 500); 6 Jul 2007 16:03:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59174 invoked by uid 99); 6 Jul 2007 16:03:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Jul 2007 09:03:48 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Jul 2007 09:03:41 -0700
Received: by ug-out-1314.google.com with SMTP id c2so796413ugf
        for <java-user@lucene.apache.org>; Fri, 06 Jul 2007 09:03:20 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=DbnOD3ouJX1iFxw7DLb2WJxhQJ82iqEXRpckm0ys+hiZc+bzoe5xGel3P/1jeyOJeCHKcHVwPSRrWLsTAvFZaPeKsodopaglEWq+lHATv4z80Sip2XrEZIKAeFbR74khOMu06DlF5nHMz/ZsmQZ/msryLmMClH8evQaFOjuZTCY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=opuyjgVNyfND3dID042KJGe1Ktsw7h08dT9NLvJKyQ465JejzyEqKaDNR09BFAQhZIuQLFpKao7GUXx+qKbqbmM1RLLJahIhyeZ+ilQNNQP0StOVHxKLNx2EulM+y67bggNTjR7s0vNcHG0dWltOEhD8FANskk6InhXWE6M2j/k=
Received: by 10.82.156.12 with SMTP id d12mr2006438bue.1183737799069;
        Fri, 06 Jul 2007 09:03:19 -0700 (PDT)
Received: by 10.82.167.12 with HTTP; Fri, 6 Jul 2007 09:03:19 -0700 (PDT)
Message-ID: <359a92830707060903i50ebe5f7r1dec9cd1b50c81eb@mail.gmail.com>
Date: Fri, 6 Jul 2007 12:03:19 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to make a case insensitive search using a FuzzyQuery?
In-Reply-To: <7372a1430707060824p5bd46ee9x7e9fe46fb87bbf5d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_103565_10592311.1183737799035"
References: <7372a1430707051839y6f7a477fj11768a9c2613aa3e@mail.gmail.com>
	 <200707061415.12776.daniel@nuix.com>
	 <7372a1430707060824p5bd46ee9x7e9fe46fb87bbf5d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_103565_10592311.1183737799035
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I flat guarantee that if you try to search on fields that are indexed
mixed case, you'll have no end of grief <G>. Everything from
mis-typed search requests to the same word being cased
differently in different parts of the source to ......

Your idea to index it twice is actually a solution that is often used.
Perhaps it'll relieve your nose to consider your storage and index
options <G>...

For example, index the field as Field.Store.NO, Field.Index.TOKENIZED
and search on that one.

For display, index as Field.Store.YES, Field.Index.NO

Even though you're breaking these into two fields, I don't think
your index size changes much. I know that was the hurdle I
had to get past to get comfortable with this....

BTW, how big do you expect your index to get anyway? It''s
one thing to be concerned about size if your index is many
gigabytes, but it's a needless worry if your index is under, say,
a gigabyte or so.

Best
Erick

On 7/6/07, Eloi Rocha Neto <eloi.rocha@gmail.com> wrote:
>
> Hi Daniel,
>
>    I dont lowercase the field at index time, because I have to show the
> results in the same way as it was found.
>
>    For instance:
>
>      Some fields indexed:
>
>       PP-Trip SubAlcance Seq Negativa
>       PP-Trip SubAlcance Seq Positiva
>       PS-Trip SubAlcance Seq Negativa
>       PS-Trip SubAlcance Seq Positiva
>
>     If I search for "PP-TRIP SUBALCANCE SEQ NEG", I want that the result
> showed are:
>        PP-Trip SubAlcance Seq Negativa
>        PS-Trip SubAlcance Seq Negativa
>
>     Not:
>        pp-trip subalcance seq negativa
>        ps-trip subalcance seq negativa
>
>   A possible solution is store in a document object two fields: the
> original
> and the lowercased. I use the last one to make the query, and the other
> one
> to show the results. It works, but it doesnt smell good!
>
>   Thanks for your help!
>
> Eloi
>
>
> On 7/6/07, Daniel Noll <daniel@nuix.com> wrote:
> >
> > On Friday 06 July 2007 11:39:00 Eloi Rocha Neto wrote:
> > > Hi,
> > >
> > >    Anyone knows how to make a case insensitive search using a
> > FuzzyQuery?
> > >
> > >    I want that the results coming from "PP-Trip SubAlcance Seq
> > Negativa",
> > > "pp-trip subAlcance seq negativa" and "PP-TRIP SUBALCANCE SEQ
> NEGATIVA"
> > be
> > > the same. The field must be indexed by "PP-Trip SubAlcance Seq
> > Negativa".
> > >
> > >    My code:
> > >       Query query = new FuzzyQuery( new Term( field, input ) ,
> > similarity
> > > ); Hits hits = indexSearcher.search(query);
> > >
> > >   I really appreciate any help!
> >
> > Why don't you just have your analyser lowercase the field at indexing
> > time?  I
> > don't see why you would use a FuzzyQuery for something where a normal
> > PhraseQuery should suffice.
> >
> > Daniel
> >
> >
> > --
> > Daniel Noll
> > Nuix Pty Ltd
> > Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
> > Web: http://nuix.com/                               Fax: +61 2 9212 6902
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_103565_10592311.1183737799035--

From java-user-return-29059-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 06 16:58:13 2007
Return-Path: <java-user-return-29059-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19406 invoked from network); 6 Jul 2007 16:58:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jul 2007 16:58:12 -0000
Received: (qmail 77410 invoked by uid 500); 6 Jul 2007 16:58:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76844 invoked by uid 500); 6 Jul 2007 16:58:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76829 invoked by uid 99); 6 Jul 2007 16:58:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Jul 2007 09:58:05 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of eloi.rocha@gmail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO py-out-1112.google.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Jul 2007 09:58:00 -0700
Received: by py-out-1112.google.com with SMTP id f31so815449pyh
        for <java-user@lucene.apache.org>; Fri, 06 Jul 2007 09:57:39 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=sHPIQoeHJeXtePOVdcKUelfE1ySi0mIUTkRbmBWDq8zI5LKpHI7XlByGxKf0LnRBhWowwKg22ExNXCwISnPbvuMXKtfpLLy747Y1iNxTbwsqH3TuMXIJaXAFOBedts6TlKu1FaVYjKtdL+U95uYvbrmhA2k1uxAmRcLyiW+HG6Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=IYkBKJ7ExvcUuWeoJG1LmDNut7lmZUJaTQzePZeixj78OrejHiQycrsmCjzvhFlK/6g/liZ7nw/Mih+HZPskKrNNdxaQ2ZNu4B7ZXRkEYCxjRd9sb5dpAba8pzf1Xs7H4cBEFDOKrsXLz5qqTniclc0VoiLLPI4sdRWEVJtasEE=
Received: by 10.65.153.10 with SMTP id f10mr1488571qbo.1183741055965;
        Fri, 06 Jul 2007 09:57:35 -0700 (PDT)
Received: by 10.65.121.15 with HTTP; Fri, 6 Jul 2007 09:57:35 -0700 (PDT)
Message-ID: <7372a1430707060957k7b8cdcc6k8a15c635f36e5acd@mail.gmail.com>
Date: Fri, 6 Jul 2007 13:57:35 -0300
From: "Eloi Rocha Neto" <eloi.rocha@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to make a case insensitive search using a FuzzyQuery?
In-Reply-To: <359a92830707060903i50ebe5f7r1dec9cd1b50c81eb@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_37916_21606002.1183741055910"
References: <7372a1430707051839y6f7a477fj11768a9c2613aa3e@mail.gmail.com>
	 <200707061415.12776.daniel@nuix.com>
	 <7372a1430707060824p5bd46ee9x7e9fe46fb87bbf5d@mail.gmail.com>
	 <359a92830707060903i50ebe5f7r1dec9cd1b50c81eb@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_37916_21606002.1183741055910
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Erick, Jiye,

  Thanks for your help!

  My index is too short (less then 2MB). So I am not worry about it! I will
index it twice!

  Thanks again!

[]s

Eloi

On 7/6/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> I flat guarantee that if you try to search on fields that are indexed
> mixed case, you'll have no end of grief <G>. Everything from
> mis-typed search requests to the same word being cased
> differently in different parts of the source to ......
>
> Your idea to index it twice is actually a solution that is often used.
> Perhaps it'll relieve your nose to consider your storage and index
> options <G>...
>
> For example, index the field as Field.Store.NO, Field.Index.TOKENIZED
> and search on that one.
>
> For display, index as Field.Store.YES, Field.Index.NO
>
> Even though you're breaking these into two fields, I don't think
> your index size changes much. I know that was the hurdle I
> had to get past to get comfortable with this....
>
> BTW, how big do you expect your index to get anyway? It''s
> one thing to be concerned about size if your index is many
> gigabytes, but it's a needless worry if your index is under, say,
> a gigabyte or so.
>
> Best
> Erick
>
> On 7/6/07, Eloi Rocha Neto <eloi.rocha@gmail.com> wrote:
> >
> > Hi Daniel,
> >
> >    I dont lowercase the field at index time, because I have to show the
> > results in the same way as it was found.
> >
> >    For instance:
> >
> >      Some fields indexed:
> >
> >       PP-Trip SubAlcance Seq Negativa
> >       PP-Trip SubAlcance Seq Positiva
> >       PS-Trip SubAlcance Seq Negativa
> >       PS-Trip SubAlcance Seq Positiva
> >
> >     If I search for "PP-TRIP SUBALCANCE SEQ NEG", I want that the result
> > showed are:
> >        PP-Trip SubAlcance Seq Negativa
> >        PS-Trip SubAlcance Seq Negativa
> >
> >     Not:
> >        pp-trip subalcance seq negativa
> >        ps-trip subalcance seq negativa
> >
> >   A possible solution is store in a document object two fields: the
> > original
> > and the lowercased. I use the last one to make the query, and the other
> > one
> > to show the results. It works, but it doesnt smell good!
> >
> >   Thanks for your help!
> >
> > Eloi
> >
> >
> > On 7/6/07, Daniel Noll <daniel@nuix.com> wrote:
> > >
> > > On Friday 06 July 2007 11:39:00 Eloi Rocha Neto wrote:
> > > > Hi,
> > > >
> > > >    Anyone knows how to make a case insensitive search using a
> > > FuzzyQuery?
> > > >
> > > >    I want that the results coming from "PP-Trip SubAlcance Seq
> > > Negativa",
> > > > "pp-trip subAlcance seq negativa" and "PP-TRIP SUBALCANCE SEQ
> > NEGATIVA"
> > > be
> > > > the same. The field must be indexed by "PP-Trip SubAlcance Seq
> > > Negativa".
> > > >
> > > >    My code:
> > > >       Query query = new FuzzyQuery( new Term( field, input ) ,
> > > similarity
> > > > ); Hits hits = indexSearcher.search(query);
> > > >
> > > >   I really appreciate any help!
> > >
> > > Why don't you just have your analyser lowercase the field at indexing
> > > time?  I
> > > don't see why you would use a FuzzyQuery for something where a normal
> > > PhraseQuery should suffice.
> > >
> > > Daniel
> > >
> > >
> > > --
> > > Daniel Noll
> > > Nuix Pty Ltd
> > > Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280
> 0699
> > > Web: http://nuix.com/                               Fax: +61 2 9212
> 6902
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
>

------=_Part_37916_21606002.1183741055910--

From java-user-return-29060-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 06 17:19:09 2007
Return-Path: <java-user-return-29060-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29848 invoked from network); 6 Jul 2007 17:19:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jul 2007 17:19:08 -0000
Received: (qmail 15048 invoked by uid 500); 6 Jul 2007 17:19:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15009 invoked by uid 500); 6 Jul 2007 17:19:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14998 invoked by uid 99); 6 Jul 2007 17:19:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Jul 2007 10:19:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.150] (HELO rescomp.berkeley.edu) (169.229.70.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Jul 2007 10:18:59 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 7BD235B780; Fri,  6 Jul 2007 10:18:39 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 619EB7F403
	for <java-user@lucene.apache.org>; Fri,  6 Jul 2007 10:18:39 -0700 (PDT)
Date: Fri, 6 Jul 2007 10:18:39 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: How to make a case insensitive search using a FuzzyQuery?
In-Reply-To: <7372a1430707060824p5bd46ee9x7e9fe46fb87bbf5d@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0707061016550.32617@hal.rescomp.berkeley.edu>
References: <7372a1430707051839y6f7a477fj11768a9c2613aa3e@mail.gmail.com> 
 <200707061415.12776.daniel@nuix.com> <7372a1430707060824p5bd46ee9x7e9fe46fb87bbf5d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


:   A possible solution is store in a document object two fields: the original
: and the lowercased. I use the last one to make the query, and the other one
: to show the results. It works, but it doesnt smell good!

if your analyzer is what does hte lowercasing then you don't need two
seperate fields, the stored value (returned to you for displaying to the
user) is unaffected by the analyzer, only the query options and sorting
are affected by the indexed values produced by your analyzer



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29061-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 06 17:24:20 2007
Return-Path: <java-user-return-29061-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31404 invoked from network); 6 Jul 2007 17:24:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jul 2007 17:24:19 -0000
Received: (qmail 21052 invoked by uid 500); 6 Jul 2007 17:24:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20887 invoked by uid 500); 6 Jul 2007 17:24:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20876 invoked by uid 99); 6 Jul 2007 17:24:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Jul 2007 10:24:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.150] (HELO rescomp.berkeley.edu) (169.229.70.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Jul 2007 10:24:10 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 9A27F5B780; Fri,  6 Jul 2007 10:23:49 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 7E6567F403
	for <java-user@lucene.apache.org>; Fri,  6 Jul 2007 10:23:49 -0700 (PDT)
Date: Fri, 6 Jul 2007 10:23:49 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Retrieve nearest token based off location in original Text
In-Reply-To: <bd67edef0707051427n5d60a0aeya68a0cb76936e7e7@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0707061021510.32617@hal.rescomp.berkeley.edu>
References: <bd67edef0707031049v69dc004ev11f0ebe905a7c396@mail.gmail.com>
 <bd67edef0707051427n5d60a0aeya68a0cb76936e7e7@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

: I never got a response to this and thought maybe I was too wordy.
:
: I'm wondering if there's a way where given a position in the original text
: you can retrieve the token index that is nearest to that position using the
: StandardToken/StandardTokenizer classes?

i may not be understanding the question, but wouldn't that just be...

  TokenStream s = getTokenStreamForOrriginalText()
  Token t;
  for (i=0; i<thePositionYouKnow; i++) {
    t = s.next();
  }
  return t;

?


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29062-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 06 17:40:05 2007
Return-Path: <java-user-return-29062-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36982 invoked from network); 6 Jul 2007 17:40:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jul 2007 17:40:04 -0000
Received: (qmail 42180 invoked by uid 500); 6 Jul 2007 17:39:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42133 invoked by uid 500); 6 Jul 2007 17:39:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42121 invoked by uid 99); 6 Jul 2007 17:39:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Jul 2007 10:39:59 -0700
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.196.97.106] (HELO web57002.mail.re3.yahoo.com) (66.196.97.106)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 06 Jul 2007 10:39:53 -0700
Received: (qmail 99293 invoked by uid 60001); 6 Jul 2007 17:39:32 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=hIh2/SomNSEgB1xBwryyjO9btvRONOqX0gWDD5IiiG8hoFtbWOO9Z8q9UIxtKt2RPvXKXyuZQdieXpUoT+9Cllb1OUyBdXwXR7JJyWDlUuQTV4x7FKDjUoNB0k16OuWtD2/UkSN0RgVHZZyzJy9CwtjyrQa9aN8VMvuD7ie+YxM=;
X-YMail-OSG: qiSeq6gVM1nU8ZahONU.eduf7NZXQWP7BtjJXWmFbqXochLVNMUcDFRuVM5mCtPDIh.Gd4Dbi2Ddu8.Xuga8SFwKOZsZYl3_QMsAdeP9iReFKOt6gkbKzhyl_MWNaA--
Received: from [38.99.201.242] by web57002.mail.re3.yahoo.com via HTTP; Fri, 06 Jul 2007 10:39:32 PDT
Date: Fri, 6 Jul 2007 10:39:32 -0700 (PDT)
From: Xiaocheng Luan <jenaluan@yahoo.com>
Subject: Re: Custom sorting - memory leaks
To: java-user@lucene.apache.org
In-Reply-To: <200707050751.l657p8Cl007687@ns21.webhostsg.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1147439087-1183743572=:98795"
Content-Transfer-Encoding: 8bit
Message-ID: <648906.98795.qm@web57002.mail.re3.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1147439087-1183743572=:98795
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Intentionally copied the subject line of this thread (from last August), and an email from the thread is attached at the end of this email - 

I ran into similar problems in custom sorting (memory leak due to caching) - the subject has been well discussed in the thread but just want to add a voice and some philosophical thinking (as an attempt to push/support for a/the patch):

I think it makes sense to add the isCacheable() method (that Chris mentioned) to the SortComparatorSource (or maybe ScoreDocComparator?). Custom sort is by definition "custom" and may/should contain anything (like a reference to a large, dynamic data structure) appropriate for the application. Therefore, caching the custom sort object indiscriminately may not be the best behavior. Adding the isCacheable() method makes it a true (or "more true") "custom".

Even though there are workarounds like function query or customized hit collector, etc, the organic Lucene custom sort solution provides added benefits such as allowing secondary sort, relevancy scores, etc, without the need to re-invent the wheels.

The changes required to Lucene itself are minimal. Even though it will certainly create compatibility issues, but I think these issues are no more difficult to resolve than those created by dropping the deprecated classes.

I'd be more than happy to create a patch if the committers think there is a slight chance that it may get in.

Thanks,
Xiaocheng

========== Attachment ===========

Chris,

> I see what you're saying now ... yes, for cases like this it probably
> would be useful to a way to prevent the Comparator from being cached ...
That's what I'm talking about.
I agree this is very uncommon case.

> perhaps by adding a SortComparatorSource.isCachable() method ... but the
> changes you suggested would completely eliminate the ability for Lucene to
> cache custom comparators at all -- which owuld be just as bad for many
> people as the current behavior is for you.
It would be great if we have some isCachable method but i understand
all your points about compatibility.
I do not suggest to apply my patch - this is just "works for me" workaround.
Is it possible to add some kind of SortComparatorSource class / not
interface in new lucene releases with default behaviour to cache
ScoreDocComparators?

> On a related note: have you considered using FunctionQueries (in teh Solr
> code base) to do your distance calculations? ... it's been discussed on
> the java-users list a few times ... now that i understand that
> DistanceComparatorSource caches the computed distances for each requested
> "center" point, FunctionQuery certainly seems like a better way to go.
To say the truth i can't figure out how to switch from lucene sorting
capabilities to FunctionQueries. I have altered RequestHandler with
parsing SolrQueryRequest, building  complex Query, ChainedFilters,
Sort objects and i do not want to change all that stuff.

Thanks

Aleksey


 
---------------------------------
 Get your own web address.
 Have a HUGE year through Yahoo! Small Business.
--0-1147439087-1183743572=:98795--

From java-user-return-29063-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 06 17:51:12 2007
Return-Path: <java-user-return-29063-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41137 invoked from network); 6 Jul 2007 17:51:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jul 2007 17:51:10 -0000
Received: (qmail 62761 invoked by uid 500); 6 Jul 2007 17:51:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62540 invoked by uid 500); 6 Jul 2007 17:51:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62529 invoked by uid 99); 6 Jul 2007 17:51:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Jul 2007 10:51:04 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jpsondag@gmail.com designates 66.249.82.230 as permitted sender)
Received: from [66.249.82.230] (HELO wx-out-0506.google.com) (66.249.82.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Jul 2007 10:50:59 -0700
Received: by wx-out-0506.google.com with SMTP id i28so248780wxd
        for <java-user@lucene.apache.org>; Fri, 06 Jul 2007 10:50:38 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        b=HNRwengEeS9+S6BMhv8YmO44nWQPkrILINXBlBhm4RAD4JxydQoCpXUYyE059s8Est9UqB2PCAlDzQQxSj1hVXaKONO5eqbFnqRnHZ+FkFzEumeZU0AMNNU6pvSxE6UEkODKaengBqkak86Jkk4H0Oo5bLPr5mDqpxLKIZlCzOU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        b=GNwvhVhTuArPvt1wz8OYVSWzOZeZ/62dAmHdxZJYri+S79A/1gAYRL0n8JVY91k1YEFwiSgrafTth2h5hKr+g3CAMvLWNQtGIErzPQjESjzDevzb91VVzcUWFR0DCjt+hlmrKFsWNAqmBIwAmi4e4ws6ta2mGp16dOlaXOmzlwE=
Received: by 10.90.71.3 with SMTP id t3mr665074aga.1183744238448;
        Fri, 06 Jul 2007 10:50:38 -0700 (PDT)
Received: by 10.65.203.18 with HTTP; Fri, 6 Jul 2007 10:50:38 -0700 (PDT)
Message-ID: <bd67edef0707061050q2af33aebgb4a908ca910468@mail.gmail.com>
Date: Fri, 6 Jul 2007 12:50:38 -0500
From: "John Paul Sondag" <jsondag2@uiuc.edu>
Sender: jpsondag@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Retrieve nearest token based off location in original Text
In-Reply-To: <Pine.LNX.4.58.0707061021510.32617@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_79374_18977365.1183744238317"
References: <bd67edef0707031049v69dc004ev11f0ebe905a7c396@mail.gmail.com>
	 <bd67edef0707051427n5d60a0aeya68a0cb76936e7e7@mail.gmail.com>
	 <Pine.LNX.4.58.0707061021510.32617@hal.rescomp.berkeley.edu>
X-Google-Sender-Auth: 55dad5fb2da2ad46
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_79374_18977365.1183744238317
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I thought that went to the "index" of the token.  I may not understand it
completely but this is how I currently view the TokenStream

For example if my text was the following:

This is an Example

This is index of 1, is has index 2, an has index 3 Example has index 4.
What I have is the actual "character position" in the original text.  "This"
is characters 0-3, "is" is characters 5-6, "an" is characters 8-9, and
"Example" is characters 11-17.  I know that given Token 4 (Example) I can
get the startOffset and endOffset (11, and 17).  What I'm wondering is given
character offset can I get a tokenIndex.  (I.E.  given character offset 12,
it would return 3, because Example is the closest token that starts at
character 12).

--JP

On 7/6/07, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
> : I never got a response to this and thought maybe I was too wordy.
> :
> : I'm wondering if there's a way where given a position in the original
> text
> : you can retrieve the token index that is nearest to that position using
> the
> : StandardToken/StandardTokenizer classes?
>
> i may not be understanding the question, but wouldn't that just be...
>
>   TokenStream s = getTokenStreamForOrriginalText()
>   Token t;
>   for (i=0; i<thePositionYouKnow; i++) {
>     t = s.next();
>   }
>   return t;
>
> ?
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_79374_18977365.1183744238317--

From java-user-return-29064-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 06 18:02:22 2007
Return-Path: <java-user-return-29064-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44111 invoked from network); 6 Jul 2007 18:02:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jul 2007 18:02:21 -0000
Received: (qmail 80364 invoked by uid 500); 6 Jul 2007 18:02:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79806 invoked by uid 500); 6 Jul 2007 18:02:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79794 invoked by uid 99); 6 Jul 2007 18:02:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Jul 2007 11:02:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.150] (HELO rescomp.berkeley.edu) (169.229.70.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Jul 2007 11:02:11 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 5E8755B780; Fri,  6 Jul 2007 11:01:51 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 2247C7F403
	for <java-user@lucene.apache.org>; Fri,  6 Jul 2007 11:01:51 -0700 (PDT)
Date: Fri, 6 Jul 2007 11:01:51 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Retrieve nearest token based off location in original Text
In-Reply-To: <bd67edef0707061050q2af33aebgb4a908ca910468@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0707061056510.13561@hal.rescomp.berkeley.edu>
References: <bd67edef0707031049v69dc004ev11f0ebe905a7c396@mail.gmail.com> 
 <bd67edef0707051427n5d60a0aeya68a0cb76936e7e7@mail.gmail.com> 
 <Pine.LNX.4.58.0707061021510.32617@hal.rescomp.berkeley.edu>
 <bd67edef0707061050q2af33aebgb4a908ca910468@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: This is index of 1, is has index 2, an has index 3 Example has index 4.
: What I have is the actual "character position" in the original text.  "This"

in that case, you'll have to do a while loop over next() calls and check
the startOffset (or endOffset) of each untill you find the one you are
looking for.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29065-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 06 23:35:47 2007
Return-Path: <java-user-return-29065-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27446 invoked from network); 6 Jul 2007 23:35:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jul 2007 23:35:46 -0000
Received: (qmail 1908 invoked by uid 500); 6 Jul 2007 23:35:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1212 invoked by uid 500); 6 Jul 2007 23:35:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1201 invoked by uid 99); 6 Jul 2007 23:35:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Jul 2007 16:35:41 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Jul 2007 16:35:35 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1I6xKV-0005WA-Cc
	for java-user@lucene.apache.org; Fri, 06 Jul 2007 16:35:15 -0700
Message-ID: <11474031.post@talk.nabble.com>
Date: Fri, 6 Jul 2007 16:35:15 -0700 (PDT)
From: sdeck <scott.decker@gmail.com>
To: java-user@lucene.apache.org
Subject: Related Article question
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: scott.decker@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hello all,
  I have been trying out the MoreLikeThis and many other similarity types of
queries, but still run into problems with content not being matched up.

Let me give an example, as well as some question that, hopefully someone can
answer, to help me refine my work.

Example:
1) Document A may have a title: Oden and Durant Are being recruited, and
Document B would have a title
Trailblazers look at Oden and Durant.
 Both Document A and B talk about the recruitment of Oden and Durant, just
in fairly different ways.  One may emphasis Oden over Durant, or vice versa.
 The way the MoreLikeThis and similarity queries seem to work is that they
take terms and see if a lot of them match up in the documents. So, if Durant
is ins doc A 10 times and 10 times in doc B, then the similarity will be
higher.

Here is my problem though. I run these morelike this and other similarity
queries and it many of those types of articles do not get matched, because a
lot of the terms are not the same, but they are talking about the same
topic.  

Here is what I wonder
1) Should I somehow give more boost to a full name, or other names, or
titles to help matching? Or, does that hinder things?
2) How does shorter content versus longer content work? I make only get
around 5-6 sentences in one document, but a full page in another, but they
are still talking about the same thing
3) How would term vectors help, versus not storing term vectors?

To also help, the way the system is setup, I have one main index.  I will
run a search of the web and collect more documents. Before adding these to
the main index, I will run a morelikethis query against the main index of
each of the new documents to be inserted.  That way, I can keep a separate
place of what articles are related to each other for faster lookups.  I also
do a query of morelikethis against the new index, just to see what recently
searched articles are similar to each other. 
It would seem that document frequency and term numbers will not really work
in these sorts of scenarios.

Not sure if I am explaining my problem as well as I can, but I would love
some kind of reference to figuring out how to do related article searching
and see how I can refine my results. Right now, I would say about 60-70% get
correctly mapped into related articles, and about 10-20 percent get
incorrectly mapped as a related article (similar terms, but perhaps not
enough content, but the article is not about any of the others)

Any help would be appreciated.
Thanks
Scott
-- 
View this message in context: http://www.nabble.com/Related-Article-question-tf4038641.html#a11474031
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29066-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 07 11:45:20 2007
Return-Path: <java-user-return-29066-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3402 invoked from network); 7 Jul 2007 11:45:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jul 2007 11:45:19 -0000
Received: (qmail 63390 invoked by uid 500); 7 Jul 2007 11:45:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62302 invoked by uid 500); 7 Jul 2007 11:45:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62291 invoked by uid 99); 7 Jul 2007 11:45:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 07 Jul 2007 04:45:15 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 07 Jul 2007 04:45:11 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1I78iY-0004BZ-EG
	for java-user@lucene.apache.org; Sat, 07 Jul 2007 04:44:50 -0700
Message-ID: <11477786.post@talk.nabble.com>
Date: Sat, 7 Jul 2007 04:44:50 -0700 (PDT)
From: muraalee <muraalee@gmail.com>
To: java-user@lucene.apache.org
Subject: Scaling Lucene to 500 million+ documents - preferred architecture
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: muraalee@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Everybody,
We are building a search infrastructure using lucene to scale upto 500
million document with search < 500 ms.

Here is my rough math on the size of content & index :
Total Documents = 500 million documents
Size / Document = 10k / document
Index Size / Million = 2 GB / million document
Total Index size = 500 million ~ 1 TB

We are planning to partition this 1 TB index into 25 partitions  with each
partition of around 20 million documents @ 40 GB size.

Since 1TB doesn't seem to be that much, we are debating whether we should go
for RAM memory for the whole 1 TB. Checked the prices for RAM memory ( 64 GB
/ 8 CPU boxes ) and they are very competitive.

Now the question is..  Can we use RAM Directory for all of this 1 TB or
FSDirectory is better with separate spindle for each CPU ?

We are considering 25 boxes ( 8 CPU - 64 GB boxes ) for each partition and
separate brokers to merge these results.

Did anybody did something like this in the past ? Appreciate if you guys can
share your experiences.

thanks
Murali V 
-- 
View this message in context: http://www.nabble.com/Scaling-Lucene-to-500-million%2B-documents---preferred-architecture-tf4040120.html#a11477786
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29067-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 07 13:14:33 2007
Return-Path: <java-user-return-29067-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28381 invoked from network); 7 Jul 2007 13:14:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jul 2007 13:14:32 -0000
Received: (qmail 73014 invoked by uid 500); 7 Jul 2007 13:14:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72085 invoked by uid 500); 7 Jul 2007 13:14:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72074 invoked by uid 99); 7 Jul 2007 13:14:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 07 Jul 2007 06:14:27 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of ryanackley@gmail.com designates 209.85.146.179 as permitted sender)
Received: from [209.85.146.179] (HELO wa-out-1112.google.com) (209.85.146.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 07 Jul 2007 06:14:23 -0700
Received: by wa-out-1112.google.com with SMTP id j40so694210wah
        for <java-user@lucene.apache.org>; Sat, 07 Jul 2007 06:14:03 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=GtbjfADYcJZkCcjL39Wz9p0vIHixj34VvkLonG5fO1mdjOrMylRFEO/L2ovBWocsAES0ckP2kq3eb/k0kZsJRlpxxfMVfpj6LdpyKpoq5g/vNxPGJ3YT4Aaff22trFKOq/rR2AgNnrSCQvtdtGgvfCwF13rgsRH2n6fRNu+2HEk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=XsMsXCF42b1xq6I2Mu32Z+NtJpZap01PNOoKVeWS12quUSubic8blt4JoLwqkLW6vsqRGJYyQevuXHdVTE2klW8R7xdR1JQG8EW3kQ3Nlkc/5S1SRR4SJxx3wFiTps1aU388xB+ndZEIMrpL3K+/vVmp+2e9QdRzOG8McRf6Gtc=
Received: by 10.114.61.1 with SMTP id j1mr1531606waa.1183814042782;
        Sat, 07 Jul 2007 06:14:02 -0700 (PDT)
Received: by 10.115.94.10 with HTTP; Sat, 7 Jul 2007 06:14:02 -0700 (PDT)
Message-ID: <e15c52dc0707070614j7bcc9fc6vbb1c4e9218919d11@mail.gmail.com>
Date: Sat, 7 Jul 2007 08:14:02 -0500
From: "Ryan Ackley" <ryanackley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Related Article question
In-Reply-To: <11474031.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <11474031.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I was playing around with MoreLikeThis and I noticed the problems you
are talking about as well.

One idea I thought of was for MoreLikeThis to focus only on proper
nouns for the purposes of similarity or give a significant boost to
those. Pretty much the same idea you had in #1.

I found a list of the 1000 most used English words somewhere on the
net (including stemmed variations, see link below). This would be one
way to look for proper nouns. The idea is if the term for the
MoreLikeThis query is in that list, don't use it.

This is a good resource:

http://www1.harenet.ne.jp/~waring/vocab/wordlists/vocfreq.html

On 7/6/07, sdeck <scott.decker@gmail.com> wrote:
>
> Hello all,
>  I have been trying out the MoreLikeThis and many other similarity types of
> queries, but still run into problems with content not being matched up.
>
> Let me give an example, as well as some question that, hopefully someone can
> answer, to help me refine my work.
>
> Example:
> 1) Document A may have a title: Oden and Durant Are being recruited, and
> Document B would have a title
> Trailblazers look at Oden and Durant.
>  Both Document A and B talk about the recruitment of Oden and Durant, just
> in fairly different ways.  One may emphasis Oden over Durant, or vice versa.
>  The way the MoreLikeThis and similarity queries seem to work is that they
> take terms and see if a lot of them match up in the documents. So, if Durant
> is ins doc A 10 times and 10 times in doc B, then the similarity will be
> higher.
>
> Here is my problem though. I run these morelike this and other similarity
> queries and it many of those types of articles do not get matched, because a
> lot of the terms are not the same, but they are talking about the same
> topic.
>
> Here is what I wonder
> 1) Should I somehow give more boost to a full name, or other names, or
> titles to help matching? Or, does that hinder things?
> 2) How does shorter content versus longer content work? I make only get
> around 5-6 sentences in one document, but a full page in another, but they
> are still talking about the same thing
> 3) How would term vectors help, versus not storing term vectors?
>
> To also help, the way the system is setup, I have one main index.  I will
> run a search of the web and collect more documents. Before adding these to
> the main index, I will run a morelikethis query against the main index of
> each of the new documents to be inserted.  That way, I can keep a separate
> place of what articles are related to each other for faster lookups.  I also
> do a query of morelikethis against the new index, just to see what recently
> searched articles are similar to each other.
> It would seem that document frequency and term numbers will not really work
> in these sorts of scenarios.
>
> Not sure if I am explaining my problem as well as I can, but I would love
> some kind of reference to figuring out how to do related article searching
> and see how I can refine my results. Right now, I would say about 60-70% get
> correctly mapped into related articles, and about 10-20 percent get
> incorrectly mapped as a related article (similar terms, but perhaps not
> enough content, but the article is not about any of the others)
>
> Any help would be appreciated.
> Thanks
> Scott
> --
> View this message in context: http://www.nabble.com/Related-Article-question-tf4038641.html#a11474031
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29068-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 07 15:13:26 2007
Return-Path: <java-user-return-29068-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45591 invoked from network); 7 Jul 2007 15:13:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jul 2007 15:13:25 -0000
Received: (qmail 20023 invoked by uid 500); 7 Jul 2007 15:13:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19980 invoked by uid 500); 7 Jul 2007 15:13:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19969 invoked by uid 99); 7 Jul 2007 15:13:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 07 Jul 2007 08:13:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [202.224.39.197] (HELO mail.asahi-net.or.jp) (202.224.39.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 07 Jul 2007 08:13:16 -0700
Received: from [127.0.0.1] (w244069.ppp.asahi-net.or.jp [121.1.244.69])
	by mail.asahi-net.or.jp (Postfix) with ESMTP id D881949577
	for <java-user@lucene.apache.org>; Sun,  8 Jul 2007 00:12:54 +0900 (JST)
Message-ID: <468FAD5F.8070605@r.email.ne.jp>
Date: Sun, 08 Jul 2007 00:12:31 +0900
From: Koji Sekiguchi <koji@r.email.ne.jp>
User-Agent: Thunderbird 2.0.0.4 (Windows/20070604)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Chinese words highlighting
References: <200707050751.l657p8Cl007687@ns21.webhostsg.com>
In-Reply-To: <200707050751.l657p8Cl007687@ns21.webhostsg.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

One possibility I can think of is that you are using CJKAnalyzer and 
Lucene 2.0 or previous version.
The combination of those cannot highlight CJK keywords correctly.
If this is your case, try StandardAnalyzer or upgrading Lucene 2.1/2.2 
and its CJKAnalyzer and highlighter.

Also check:
http://issues.apache.org/jira/browse/LUCENE-627

Hope this helps,

Koji

Lee Li Bin wrote:
>  
>
> Hi,
>
>  
>
> Anyone knows how to highlight Chinese character? When I do the highlight, it
> tends to highlight the whole sentence instead of the keywords.
>
> For Chinese highlighting, do I need to use the TermVector in order to
> highlight the correct keywords?
>
>  
>
> Thanks
>
>  
>
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29069-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 08 03:08:57 2007
Return-Path: <java-user-return-29069-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57367 invoked from network); 8 Jul 2007 03:08:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jul 2007 03:08:55 -0000
Received: (qmail 76128 invoked by uid 500); 8 Jul 2007 03:08:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76088 invoked by uid 500); 8 Jul 2007 03:08:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76076 invoked by uid 99); 8 Jul 2007 03:08:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 07 Jul 2007 20:08:50 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of cwho.work@gmail.com designates 64.233.162.224 as permitted sender)
Received: from [64.233.162.224] (HELO nz-out-0506.google.com) (64.233.162.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 07 Jul 2007 20:08:47 -0700
Received: by nz-out-0506.google.com with SMTP id i28so410497nzi
        for <java-user@lucene.apache.org>; Sat, 07 Jul 2007 20:08:26 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Qh11HxrrHXVkbvIcWl8LaUvPs5PnS5/zxBRxciE0tXtx9GxLJKnRUrSal/gAFgDsmQ0gL4Q+TH4ig5L0hvHa/tpdA1Fm9AtlWOuAvGLTwNBGVbxVUl6D8Vzz9hY6CKnMkfENHbpvJDo04yjbir2zV7BKCsH+4Yv4o+FgHJzwomk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=hhBpzCB78dATdJdGud17VssA60pWPa5ColcMd4BV6QP7M1D9+BXzMkVvKoDcJRDa8WA2yamhcuk4oRCc/N/Qb5bW6j8ILSyoqvwddqwE84/jnzwcjCoT5DlMyYZYPn/osxRWawUY1wnwmSfb1UGKYywAOsmhyIKuSIUxQGYX/bA=
Received: by 10.143.11.13 with SMTP id o13mr152187wfi.1183864105664;
        Sat, 07 Jul 2007 20:08:25 -0700 (PDT)
Received: by 10.142.113.12 with HTTP; Sat, 7 Jul 2007 20:08:25 -0700 (PDT)
Message-ID: <6c33f9950707072008j691700fbybd51f64194604434@mail.gmail.com>
Date: Sun, 8 Jul 2007 11:08:25 +0800
From: "Chun Wei Ho" <cwho.work@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Scaling up to several machines with Lucene
In-Reply-To: <80FCB62D-5AF5-4B4E-BC24-3597692BC7C2@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <6c33f9950706280650g15a5df8bk1b3bc2ec226c1fcf@mail.gmail.com>
	 <4683C386.1000802@lingway.com>
	 <80FCB62D-5AF5-4B4E-BC24-3597692BC7C2@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for your comments and suggestions everyone :)

It looks like the general trend is to be in favour of (2) splitting
the frontend web application and the searching application.

Solr looks a lot like what we would liked, but unfortunately we
finished our application a while before Solr initially became
available, and I honestly say reading up on Solr's architecture and
how it segregates the searching layer from the frontend (so you can
add further dedicated search machines) was our idea for (2).

Splitting our index looks like a way to go and I am curious as to how
people are splitting their indexes? A split by category, or a split by
time (say divide 2 months worthed of index additions into 8 indexes of
a week each) and how would the system cope with the multiple indexes?



On 6/29/07, Grant Ingersoll <gsingers@apache.org> wrote:
> Hadoop is not designed for this type of scenario.
>
> Have a look at Solr (http://lucene.apache.org/solr), this is pretty
> much one of it's main use cases.  I think it will do what you need to
> do and will more than likely work w/ a minimal of configuration on
> your existing index (but don't hold me to that statement).
>
> Also, have you done profiling on your application such that you are
> sure moving Lucene off the machine is going to help that much?
>
> Cheers,
> Grant
>
> ps, the mailing lists strips attachments.
>
> On Jun 28, 2007, at 10:19 AM, Samuel LEMOINE wrote:
>
> > Chun Wei Ho a =E9crit :
> >> Hi,
> >>
> >> We are currently running a Tomcat web application serving searches
> >> over our Lucene index (10GB) on a single server machine (Dual 3GHz
> >> CPU, 4GB RAM). Due to performance issues and to scale up to handle
> >> more traffic/search requests, we are getting another server machine.
> >>
> >> We are looking at two ways of scaling:
> >> (1) duplicating the web application and index on the second machine
> >> and load-balancing incoming users between the two servers.
> >>
> >> (2) modifying our web application so that one machine will host our
> >> web application (and associated MySQL database), while the other one
> >> will host the Lucene index. The first machine would be dedicated to
> >> our web application and database, while the second becomes our
> >> dedicated Lucene search server. When users perform a search on the
> >> website, the web application will send the request to the Lucene
> >> index
> >> server, which will perform the search and return the results to the
> >> web application.
> >>
> >> We would like comments from users who have set up similar systems on
> >> how you have accomplished (1) in your setups, and whether (2) is a
> >> good choice for scaling.
> >>
> >>
> >> Attached is a more complete RTF document outlining our architecture
> >> and proposal. We appreciate your perusal and comments.
> >>
> >> Regards,
> >> CW
> >>
> >> ---------------------------------------------------------------------
> >> ---
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> > I'm acutely interrested by this issue too, as I'm working on
> > distributed architecture of Lucene. I'm only at the very beginning
> > of my study so that I can't help you much, but Hadoop maybe could
> > fit to your requirements. It's a sub-project of Lucene aiming to
> > parallelise Lucene.
> > See http://lucene.apache.org/hadoop/about.html but I don't know
> > wether it scales well to very small clusters...
> >
> > About your attached, I couldn't access it, it was only a "Partie
> > 1.2" file containing this text:
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> > Cordially,
> >
> > Samuel
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
> --------------------------
> Grant Ingersoll
> Center for Natural Language Processing
> http://www.cnlp.org/tech/lucene.asp
>
> Read the Lucene Java FAQ at http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29070-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 08 03:19:57 2007
Return-Path: <java-user-return-29070-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59077 invoked from network); 8 Jul 2007 03:19:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jul 2007 03:19:57 -0000
Received: (qmail 84760 invoked by uid 500); 8 Jul 2007 03:19:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83722 invoked by uid 500); 8 Jul 2007 03:19:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83711 invoked by uid 99); 8 Jul 2007 03:19:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 07 Jul 2007 20:19:53 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of cwho.work@gmail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO py-out-1112.google.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 07 Jul 2007 20:19:50 -0700
Received: by py-out-1112.google.com with SMTP id f31so1968570pyh
        for <java-user@lucene.apache.org>; Sat, 07 Jul 2007 20:19:29 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=YihQqOsxvDs5q8/j2r0909upE6P9Ajh5g4XE53NrYlyiYim7r+F7egIjseInqKvm+IAD/0zEx7VreuXB848orb4RT5DRVBLgahnvww6+BcBnx6SsKZPYv/dtQVHfM7tjZmZ/7f9rDYQ/UdhxFB027zpA/1A7/iz23EjocMUpVLY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=f35oce9dBbXlEF0I8PTlt1ZlRyWQdNBgu90FQjjX6/boV/Hts6suObpoWBVAfrEMx8RzjmsKfhw2kJ84jtmIxrAJCAyAV6HnAp2HqSsJ7VU9Ccfy8zIG1zSZKkyjMwLhbL+P8q7c+PxsLmIXeneRxFA1nus8bcCePefEewg+qBo=
Received: by 10.143.39.16 with SMTP id r16mr152438wfj.1183864769086;
        Sat, 07 Jul 2007 20:19:29 -0700 (PDT)
Received: by 10.142.113.12 with HTTP; Sat, 7 Jul 2007 20:19:29 -0700 (PDT)
Message-ID: <6c33f9950707072019g24d5143ao6a53ed5794cc7b05@mail.gmail.com>
Date: Sun, 8 Jul 2007 11:19:29 +0800
From: "Chun Wei Ho" <cwho.work@gmail.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: Lucene index sizes and performance
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

We are currently running a search service with a single Lucene index
of about 10 GB. We would like to find out:

(a) What is the usual index size of everyone else? How large have
Lucene index gone in prodution environments, and is there a sort of a
optimal size that Lucene indexes should be?

(b) With a index size of 10GB, how much memory would you recommend a
dual 3GHz machine serving searches on it to have. We currently have
4GB RAM and are thinking of adding more for faster searches?

Is there a ballpark figure or guide that we can adhere to - so we
might add more RAM depending on the rate of index growth.


(c) We're considered the possibility of splitting our large index into
several smaller ones based on discussions in previous threads.

Did anyone do so here and how did you manage it - splitting by logical
category, or splitting by time (so perhaps a index that holds 2 months
worth of documents might be split into 8 indexes of 1 week each). How
would the searching application handle/merge results from different
indexes?


Regards,
CW

Just a postscript here to thank mailing list folks who have been
providing us with guidance on Lucene all this time :)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29071-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 08 03:42:35 2007
Return-Path: <java-user-return-29071-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63789 invoked from network); 8 Jul 2007 03:42:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jul 2007 03:42:33 -0000
Received: (qmail 98998 invoked by uid 500); 8 Jul 2007 03:42:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98955 invoked by uid 500); 8 Jul 2007 03:42:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98944 invoked by uid 99); 8 Jul 2007 03:42:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 07 Jul 2007 20:42:29 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of chris.lu@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 07 Jul 2007 20:42:26 -0700
Received: by ug-out-1314.google.com with SMTP id c2so1035549ugf
        for <java-user@lucene.apache.org>; Sat, 07 Jul 2007 20:42:04 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=mo6G8HKUq4DSoXAltHmJUjv0y3eoLUmuuhF/uEF1SIqXiVToKANrllr43N87GcT9FtDR4ozbpBZpv93rvhh/mlOzG5APaf+6xFgFVtPTmb4qU9N/VuMsrMktHxdpMk9mH6l/JwMZtMlnwLtuoH5ksmxtddjH0jDpcVcU5jihDk0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=cC1tx7WTkSoiBWYDLjVnlxe7zO+xBLCP7osqwxMVW9UynkiRojjcLQQh3ZKBJHuwkNGIkCXQf99OeAZZWauiN62SUBxRlv20pxxEReAb6HScr7yE4EuZ3UN9zfYGtlpuR0HSMKutkxjynNyQhpeMf8AwzMZvOkSA66vl5cpZQAU=
Received: by 10.78.193.5 with SMTP id q5mr979685huf.1183866124501;
        Sat, 07 Jul 2007 20:42:04 -0700 (PDT)
Received: by 10.78.155.16 with HTTP; Sat, 7 Jul 2007 20:42:04 -0700 (PDT)
Message-ID: <6e3ae6310707072042sacb2447ve008be1ea55a2e0b@mail.gmail.com>
Date: Sat, 7 Jul 2007 20:42:04 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene index sizes and performance
In-Reply-To: <6c33f9950707072019g24d5143ao6a53ed5794cc7b05@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <6c33f9950707072019g24d5143ao6a53ed5794cc7b05@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Not really suggestion but some points to consider.
(a) Greatly depending on your hardware, especially harddrive speed.
(b) Do you do SortBy? Each SortBy field will need an array in memory.
If no sortBy, reserve memory for about 10~15% of index size will be enough.
(c) Maybe try to split by index content category first, much easier.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes

On 7/7/07, Chun Wei Ho <cwho.work@gmail.com> wrote:
> We are currently running a search service with a single Lucene index
> of about 10 GB. We would like to find out:
>
> (a) What is the usual index size of everyone else? How large have
> Lucene index gone in prodution environments, and is there a sort of a
> optimal size that Lucene indexes should be?
>
> (b) With a index size of 10GB, how much memory would you recommend a
> dual 3GHz machine serving searches on it to have. We currently have
> 4GB RAM and are thinking of adding more for faster searches?
>
> Is there a ballpark figure or guide that we can adhere to - so we
> might add more RAM depending on the rate of index growth.
>
>
> (c) We're considered the possibility of splitting our large index into
> several smaller ones based on discussions in previous threads.
>
> Did anyone do so here and how did you manage it - splitting by logical
> category, or splitting by time (so perhaps a index that holds 2 months
> worth of documents might be split into 8 indexes of 1 week each). How
> would the searching application handle/merge results from different
> indexes?
>
>
> Regards,
> CW
>
> Just a postscript here to thank mailing list folks who have been
> providing us with guidance on Lucene all this time :)
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29072-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 08 06:40:35 2007
Return-Path: <java-user-return-29072-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1237 invoked from network); 8 Jul 2007 06:40:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jul 2007 06:40:33 -0000
Received: (qmail 90567 invoked by uid 500); 8 Jul 2007 06:40:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90528 invoked by uid 500); 8 Jul 2007 06:40:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90517 invoked by uid 99); 8 Jul 2007 06:40:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 07 Jul 2007 23:40:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [132.68.225.10] (HELO mailgw10.technion.ac.il) (132.68.225.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 07 Jul 2007 23:40:24 -0700
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: Ao8CAK4ikEaERHMG/2dsb2JhbAA
X-IronPort-AV: E=Sophos;i="4.16,513,1175461200"; 
   d="scan'208";a="33206972"
Received: from fermat.math.technion.ac.il ([132.68.115.6])
  by mailgw10.technion.ac.il with ESMTP; 08 Jul 2007 09:40:01 +0300
Received: from fermat.math.technion.ac.il (localhost [127.0.0.1])
	by fermat.math.technion.ac.il (8.12.10/8.12.10) with ESMTP id l686e0UD014649
	for <java-user@lucene.apache.org>; Sun, 8 Jul 2007 09:40:00 +0300 (IDT)
Received: (from nyh@localhost)
	by fermat.math.technion.ac.il (8.12.10/8.12.10/Submit) id l686dwKJ014648
	for java-user@lucene.apache.org; Sun, 8 Jul 2007 09:39:58 +0300 (IDT)
X-Authentication-Warning: fermat.math.technion.ac.il: nyh set sender to nyh@math.technion.ac.il using -f
Date: Sun, 8 Jul 2007 09:39:58 +0300
From: "Nadav Har'El" <nyh@math.technion.ac.il>
To: java-user@lucene.apache.org
Subject: Re: problems with deleteDocuments
Message-ID: <20070708063958.GA14351@fermat.math.technion.ac.il>
References: <20070704004859.J82369@turing> <359a92830707040730y31ef1934u93784df70e9c40de@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <359a92830707040730y31ef1934u93784df70e9c40de@mail.gmail.com>
User-Agent: Mutt/1.4.2.2i
Hebrew-Date: 22 Tammuz 5767
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, Jul 04, 2007, Erick Erickson wrote about "Re: problems with deleteDocuments":
> Consider what would happen otherwise. Say you have documents
> with the following values for a field (call it blah).
> some data
> some data I put in the index
> lots of data
> data
> 
> Then I don't want deleting on the term blah:data to remove all
> of them. Which seems to be what you're asking. Even if
> you restricted things to "phrases", then deleting on the term
> 'blah:some data' would remove two documents.
> 
> So, while UN_TOKENIZED isn't a *requirement*, exact total term
> matches *is* the requirement. By that, I meant that whatever
> goes into the field must not be broken into pieces by the indexing
> tokenizer for deletes to work as you expect.

I disagree, and frankly, am very surprised that "exact total term matches" is
actually a requirement (I never tried it, so you may be absolutely right, I
just hope you aren't).

Let me give you just one example where id fields containing multiple words,
and the ability for a delete query to match several documents, are useful.

Consider an application for indexing emails with attachments. The email text,
and each document attachment, is indexed as a separate document. When an
email is deleted, we also need to delete its attachments. How shall we do
this? One simple implementation is to have an "id" field for each document;
The email text document will have a unique id, and the attachment document
will have two ids: its own unique id, and the containing email's id. When
we need to remove an email and all its attachments, we just remove all
documents that match the email's id - and this will include the main text
and the attachments.

By the way, the method is called "deleteDocuments" - doesn't that imply
that it's perfectly acceptable to delete many documents with one term?


-- 
Nadav Har'El                        |      Sunday, Jul  8 2007, 22 Tammuz 5767
IBM Haifa Research Lab              |-----------------------------------------
                                    |I am not a complete idiot - some parts
http://nadav.harel.org.il           |are missing.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29073-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 08 07:10:16 2007
Return-Path: <java-user-return-29073-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13728 invoked from network); 8 Jul 2007 07:10:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jul 2007 07:10:15 -0000
Received: (qmail 16685 invoked by uid 500); 8 Jul 2007 07:10:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16651 invoked by uid 500); 8 Jul 2007 07:10:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16635 invoked by uid 99); 8 Jul 2007 07:10:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Jul 2007 00:10:10 -0700
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=FORGED_YAHOO_RCVD,FROM_HAS_ULINE_NUMS,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Jul 2007 00:10:07 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1I7Qtu-0005Fa-Ts
	for java-user@lucene.apache.org; Sun, 08 Jul 2007 00:09:46 -0700
Message-ID: <11486721.post@talk.nabble.com>
Date: Sun, 8 Jul 2007 00:09:46 -0700 (PDT)
From: Amadeous <someone_else_2@yahoo.com>
To: java-user@lucene.apache.org
Subject: Deleting from distributed index
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: someone_else_2@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


Dear All
I want to use Lucene in a multi-server architecture. The built-in rmi
implementation of Lucene helped me to search in my servers concurrently: I
have a gateway machine, and queries are handed to this machine. Then it asks
the query from server machines and returns the aggregative results to the
requester.
Now for something like "deleting from indexes" I want to design a similar
distributed mechanism, with a center gateway. For example I want to delete
all documents returned by a special query, from all the indexing machines.
As I know, Lucene do not offer any special api for this purpose. Do you have
any idea? Is there any pattern or common approach for these needs? If there
is a relative post on this forum(I didn't find), please let me know.
Thanks in advance and best regards
-- 
View this message in context: http://www.nabble.com/Deleting-from-distributed-index-tf4043814.html#a11486721
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29074-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 08 21:12:32 2007
Return-Path: <java-user-return-29074-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12545 invoked from network); 8 Jul 2007 21:12:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jul 2007 21:12:31 -0000
Received: (qmail 30116 invoked by uid 500); 8 Jul 2007 21:12:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30084 invoked by uid 500); 8 Jul 2007 21:12:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30069 invoked by uid 99); 8 Jul 2007 21:12:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Jul 2007 14:12:26 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [165.212.64.22] (HELO gateout02.mbox.net) (165.212.64.22)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Jul 2007 14:12:22 -0700
Received: from gateout02.mbox.net (gateout02.mbox.net [165.212.64.22])
	by gateout02.mbox.net (Postfix) with ESMTP id CC7AC20D7
	for <java-user@lucene.apache.org>; Sun,  8 Jul 2007 21:12:01 +0000 (GMT)
Received: from GW2.EXCHPROD.USA.NET [165.212.116.254] by gateout02.mbox.net via smtad (C8.MAIN.3.34P) 
	with ESMTP id XID043LgHVmB9363Xo2; Sun, 08 Jul 2007 21:12:01 -0000
X-USANET-Source: 165.212.116.254 IN   jkim@sitescape.com GW2.EXCHPROD.USA.NET
X-USANET-MsgId: XID043LgHVmB9363Xo2
Received: from PEACE ([216.195.213.27]) by GW2.EXCHPROD.USA.NET with Microsoft SMTPSVC(6.0.3790.1830);
	 Sun, 8 Jul 2007 15:10:14 -0600
From: "Jong Kim" <jkim@sitescape.com>
To: <java-user@lucene.apache.org>
Subject: Stop-words comparison in MoreLikeThis class in Lucene's contrib/queries project
Date: Sun, 8 Jul 2007 17:12:08 -0400
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_00D0_01C7C183.1E2D99D0"
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
Thread-Index: AcfBpKSyO0IYmEogT7GjQstrKM6bQQ==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
Message-ID: <GW2vyo3DjFbUcOV1Eet0001c370@GW2.EXCHPROD.USA.NET>
X-OriginalArrivalTime: 08 Jul 2007 21:10:14.0512 (UTC) FILETIME=[60BC9F00:01C7C1A4]
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_00D0_01C7C183.1E2D99D0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit

Hi,
 
The MoreLikeThis class in Lucene's contrib/queries project performs noise
word filtering based on the case-sensitive comparison of the terms against
the user-supplied stopwords set. 
 
I need this comparison to be case-insensitive, but I don't see any way of
achieving it by extending this class. I would have created a subclass of
MoreLikeThis and override the isNoiseWord() method. However, the problem is
that, neither isNoiseWord() method nor the instance variables referenced
inside that method are declared protected. They are all private. Has anyone
solved this problem without modifying and building MoreLikeThis class
directly?
 
An alternative approach would be to supply a stopwords list containing all
variants of the stop words with all possible mixed cases. Needless to say,
that isn't likely to be a workable solution for many.
 
Ultimately it would be nice if those methods and variables would have been
made protected so that applications could override some of the default
behaviors without having to modify the class directly.
 
Any help would be appreciated.
 
Thanks
/Jong

------=_NextPart_000_00D0_01C7C183.1E2D99D0--


From java-user-return-29075-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 08 22:19:21 2007
Return-Path: <java-user-return-29075-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24674 invoked from network); 8 Jul 2007 22:19:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jul 2007 22:19:19 -0000
Received: (qmail 87155 invoked by uid 500); 8 Jul 2007 22:19:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87107 invoked by uid 500); 8 Jul 2007 22:19:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87095 invoked by uid 99); 8 Jul 2007 22:19:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Jul 2007 15:19:15 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.134.188 as permitted sender)
Received: from [209.85.134.188] (HELO mu-out-0910.google.com) (209.85.134.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Jul 2007 15:19:11 -0700
Received: by mu-out-0910.google.com with SMTP id g7so526232muf
        for <java-user@lucene.apache.org>; Sun, 08 Jul 2007 15:18:49 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=uKL5TMZPb96cE5njlD/yendpoSw810hjJ47rsO3ncUtDdW6aovN0yyjTMWQ4qchRGnWt2oWHKoqP2nKF/cyL+j3jKBYKW7hAM6WCQszJGWb8Ki5SkgkSijF+d6yAjjmWuTOEHVqJtfEitw93VV9NakAJFnO1UUVCdXJXL4uG1Dc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=j4XNZwGG8FPajpzvWy0h58ISQDwiobkH1XsSUZY11HtOF2lr6Ns24E5ZHZdNCZPZ6I19uBLxr2Ji0ZnOrPFFalLbFZtGyUnCDaB0PfAFzxakgPaQSn/ggHXpHtaJITL55sZ/AYeKPy2xgF4SzVkEPxHxzxAdjzY/UQ+EB8rC7mE=
Received: by 10.82.105.13 with SMTP id d13mr6742354buc.1183933128945;
        Sun, 08 Jul 2007 15:18:48 -0700 (PDT)
Received: by 10.82.167.12 with HTTP; Sun, 8 Jul 2007 15:18:48 -0700 (PDT)
Message-ID: <359a92830707081518t5892d2c3he747f3caab732720@mail.gmail.com>
Date: Sun, 8 Jul 2007 18:18:48 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: problems with deleteDocuments
In-Reply-To: <20070708063958.GA14351@fermat.math.technion.ac.il>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_116159_16083419.1183933128916"
References: <20070704004859.J82369@turing>
	 <359a92830707040730y31ef1934u93784df70e9c40de@mail.gmail.com>
	 <20070708063958.GA14351@fermat.math.technion.ac.il>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_116159_16083419.1183933128916
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

First, let me say that I ran a few tests to determine the behavior, so
it's entirely possible someone who actually understands the code will
tell me I'm all wet.

The problem here is that for every scenario in which deleting on partial
field matches would be good, I can create one where it would be bad. Or
worse, disastrous <G>....

The issue isn't deleting multiple documents at once, it's deleting on
partial term matches. In your example, you could have, say, two
IDs for the attachments, one the unique ID and one the parent ID. This
would allow you to remove all the attachments in one delete, and use
a separate delete for the original. Or you could have a "group" id
for an  e-mail and it's attachments, and delete them all with a single
delete on the "group" term. Or.....

But I'd *much* rather have a system that required me to jump through
a hoop when I wanted this kind of behavior than have a system that
allowed me to shoot myself in the foot. Or blow off the whole leg. And
deleting on, say, a text field with a partial term match on "the" is just
too terrible to contemplate <G>....

Best
Erick


On 7/8/07, Nadav Har'El <nyh@math.technion.ac.il> wrote:
>
> On Wed, Jul 04, 2007, Erick Erickson wrote about "Re: problems with
> deleteDocuments":
> > Consider what would happen otherwise. Say you have documents
> > with the following values for a field (call it blah).
> > some data
> > some data I put in the index
> > lots of data
> > data
> >
> > Then I don't want deleting on the term blah:data to remove all
> > of them. Which seems to be what you're asking. Even if
> > you restricted things to "phrases", then deleting on the term
> > 'blah:some data' would remove two documents.
> >
> > So, while UN_TOKENIZED isn't a *requirement*, exact total term
> > matches *is* the requirement. By that, I meant that whatever
> > goes into the field must not be broken into pieces by the indexing
> > tokenizer for deletes to work as you expect.
>
> I disagree, and frankly, am very surprised that "exact total term matches"
> is
> actually a requirement (I never tried it, so you may be absolutely right,
> I
> just hope you aren't).
>
> Let me give you just one example where id fields containing multiple
> words,
> and the ability for a delete query to match several documents, are useful.
>
> Consider an application for indexing emails with attachments. The email
> text,
> and each document attachment, is indexed as a separate document. When an
> email is deleted, we also need to delete its attachments. How shall we do
> this? One simple implementation is to have an "id" field for each
> document;
> The email text document will have a unique id, and the attachment document
> will have two ids: its own unique id, and the containing email's id. When
> we need to remove an email and all its attachments, we just remove all
> documents that match the email's id - and this will include the main text
> and the attachments.
>
> By the way, the method is called "deleteDocuments" - doesn't that imply
> that it's perfectly acceptable to delete many documents with one term?
>
>
> --
> Nadav Har'El                        |      Sunday, Jul  8 2007, 22 Tammuz
> 5767
> IBM Haifa Research
> Lab              |-----------------------------------------
>                                     |I am not a complete idiot - some
> parts
> http://nadav.harel.org.il           |are missing.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_116159_16083419.1183933128916--

From java-user-return-29076-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 08 22:23:50 2007
Return-Path: <java-user-return-29076-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26037 invoked from network); 8 Jul 2007 22:23:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jul 2007 22:23:49 -0000
Received: (qmail 92388 invoked by uid 500); 8 Jul 2007 22:23:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91364 invoked by uid 500); 8 Jul 2007 22:23:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91353 invoked by uid 99); 8 Jul 2007 22:23:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Jul 2007 15:23:44 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of weber@mediaworx.com designates 213.218.169.75 as permitted sender)
Received: from [213.218.169.75] (HELO merrimac.mediaworx.net) (213.218.169.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Jul 2007 15:23:41 -0700
Received: from titicaca.mediaworx.de (berlin.gate.mediaworx.net [213.61.134.194])
	by merrimac.mediaworx.net (8.13.1/8.13.1) with ESMTP id l68MNMKe000682
	(version=TLSv1/SSLv3 cipher=RC4-MD5 bits=128 verify=NO)
	for <java-user@lucene.apache.org>; Mon, 9 Jul 2007 00:23:22 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: Using KeywordAnalyzer with stop word filter
Date: Mon, 9 Jul 2007 00:23:26 +0200
Message-ID: <4718727090011946A8EFA58889F5714B0143FB1D@titicaca.mediaworx.de>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Using KeywordAnalyzer with stop word filter
Thread-Index: AcfBrppxUv64YXw1TI2Ypl9Iu5rSNw==
From: "Kai Weber" <weber@mediaworx.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

I want to parse my query string as follows:

* filter out stop words (from GermanAnalyzer)
* ignore every string field:foo
* search words exactly as written (key_word not "key word") on a certain
field

Example (using english words):
Querystring: how cool is a crazyanalyzer -test -baz:foo bar
Resulting query: field:cool field:crazyanalyzer -field:test field:bar

Is there a way to stack Analyzers together and use them for query
parsing? How would I do this?

Regards, Kai

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29077-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 09 00:47:17 2007
Return-Path: <java-user-return-29077-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73505 invoked from network); 9 Jul 2007 00:47:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jul 2007 00:47:16 -0000
Received: (qmail 24171 invoked by uid 500); 9 Jul 2007 00:47:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24116 invoked by uid 500); 9 Jul 2007 00:47:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24105 invoked by uid 99); 9 Jul 2007 00:47:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Jul 2007 17:47:11 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.150] (HELO rescomp.berkeley.edu) (169.229.70.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Jul 2007 17:47:08 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id D20C85B764; Sun,  8 Jul 2007 17:46:47 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id B99557F403
	for <java-user@lucene.apache.org>; Sun,  8 Jul 2007 17:46:47 -0700 (PDT)
Date: Sun, 8 Jul 2007 17:46:47 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Stop-words comparison in MoreLikeThis class in Lucene's
 contrib/queries project
In-Reply-To: <GW2vyo3DjFbUcOV1Eet0001c370@GW2.EXCHPROD.USA.NET>
Message-ID: <Pine.LNX.4.58.0707081741310.25716@hal.rescomp.berkeley.edu>
References: <GW2vyo3DjFbUcOV1Eet0001c370@GW2.EXCHPROD.USA.NET>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I need this comparison to be case-insensitive, but I don't see any way of
: achieving it by extending this class. I would have created a subclass of
: MoreLikeThis and override the isNoiseWord() method. However, the problem is
: that, neither isNoiseWord() method nor the instance variables referenced
: inside that method are declared protected. They are all private. Has anyone

a more direct problem for you in this appraoch would be that the entire
class is final.

: solved this problem without modifying and building MoreLikeThis class
: directly?
:
: An alternative approach would be to supply a stopwords list containing all
: variants of the stop words with all possible mixed cases. Needless to say,

it looks like MLT doesn't do any processing of the Set you pass to
setStopWords ... the only method it calls is contains(String) so as long
as you only ever put lower case terms in your set you could easily do
something like...

   Set stopWords = new HashSet() {
     public boolean contains(Object o) {
       return super.contains(o.toString().toLowerCase());
     }
   }

: Ultimately it would be nice if those methods and variables would have been
: made protected so that applications could override some of the default
: behaviors without having to modify the class directly.

agreed ... patches welcome :)



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29078-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 09 01:36:51 2007
Return-Path: <java-user-return-29078-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92398 invoked from network); 9 Jul 2007 01:36:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jul 2007 01:36:50 -0000
Received: (qmail 72143 invoked by uid 500); 9 Jul 2007 01:36:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72108 invoked by uid 500); 9 Jul 2007 01:36:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72083 invoked by uid 99); 9 Jul 2007 01:36:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Jul 2007 18:36:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.150] (HELO rescomp.berkeley.edu) (169.229.70.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Jul 2007 18:36:42 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 8880F5B764; Sun,  8 Jul 2007 18:36:22 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 6885B7F403
	for <java-user@lucene.apache.org>; Sun,  8 Jul 2007 18:36:22 -0700 (PDT)
Date: Sun, 8 Jul 2007 18:36:22 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: product based term combination for BooleanQuery?
In-Reply-To: <20153459.717571183572317952.JavaMail.root@h00215>
Message-ID: <Pine.LNX.4.58.0707081826110.25716@hal.rescomp.berkeley.edu>
References: <20153459.717571183572317952.JavaMail.root@h00215>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: At index time, I used a per document boost (over all fields) and a per
: field bost (over all documents). I can certainly factor out the first
: into a query boost, but I was under the impression that if I ever wanted
: to combine fields (eg to index all "name" "alias" and "title" data in a
: single "head" field) then I had to pre-boost the data prior to combining

whoa, whoa, WHOA! ... not at ALL ... I'm not sure how you got that
impression, but when combining differnet pieces of source data into single
field Lucene has no idea where those differnet peices come from --
boosting a "title" field has no impact whatsoever on a "head" field just
because you happen to put the same piece of text in both "title" and
"head"

furthermore, field boosts apply to the entire field value, if you are
making a "head" field containing some text you think of as title and some
text you think of as "name" you can't set a boost just on the "title" part
of the "head" field.

as i said -- loose those field boosts and you hsould see a *big*
improcement ... in general, i would advise against any attempt to combine
differnet ideas into a single field for the purpose of improving relevancy
... the only reason i would ever take something like a "title" and an
"author" and combine them into a single field is to make hte quering
simpler/faster, not in an attempt to improve relevancy ... query lots of
seperate fields using unique query time boosts.

: it. I tend to believe that these (short) fields contain more relevant
: information than (long) wikipedia articles or other documents.

: Should idf and tf take care of that short/long quality distinction? It
: sounds like you feel they should.

tf/idf will take care of recognizing that the word "John" is relaly
common, so it's not as significant to the query as "Bush" ... the
lengthNorm function of Similarity is what will help score fields better
then longer fields.

: I'll build an index without the per field boost and see if that produces
: improved results.

try the DisjunctionMaxQuery too .. particularly if you have multiword
queries.  the DisMaxQueryParser in solr thta i mentioned before can be
very handy.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29079-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 09 02:41:12 2007
Return-Path: <java-user-return-29079-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9144 invoked from network); 9 Jul 2007 02:41:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jul 2007 02:41:11 -0000
Received: (qmail 32555 invoked by uid 500); 9 Jul 2007 02:41:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32517 invoked by uid 500); 9 Jul 2007 02:41:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32506 invoked by uid 99); 9 Jul 2007 02:41:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Jul 2007 19:41:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.150] (HELO rescomp.berkeley.edu) (169.229.70.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Jul 2007 19:41:03 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 59B795B764; Sun,  8 Jul 2007 19:40:43 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 406717F403
	for <java-user@lucene.apache.org>; Sun,  8 Jul 2007 19:40:43 -0700 (PDT)
Date: Sun, 8 Jul 2007 19:40:43 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: RE: Too Many Open files Exception
In-Reply-To: <8F0A781213C3584099D4F903798727F89F11EF@EXCL1VS1.ur.com>
Message-ID: <Pine.LNX.4.58.0707081929380.25716@hal.rescomp.berkeley.edu>
References: <8F0A781213C3584099D4F903798727F89F1187@EXCL1VS1.ur.com>
 <Pine.LNX.4.58.0707032135440.23647@hal.rescomp.berkeley.edu>
 <8F0A781213C3584099D4F903798727F89F11EF@EXCL1VS1.ur.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Issuing a "limit descriptors", I see that I have it set to 1024

: In the directory that I'm getting this particular error: 3
: I have 24 different index directories... I think the most I saw at that
: particular time in any one index was 20

as i said ... it doesn't matter where in the code your encounter the
error, or what directory the line of code that throws the errors happens
to be operating on, what matters is the totla number of file handles in
use by the process.

since you didn't tel us what the total number if files for all of your 24
index is, let's assume it 15 ... 15*24 is 360 ... assuming you open new
readers before closing the olde ones you might have as many as 720 files
open at once just considering the searching aspects of the index files ...
thta doesn't even count filehanldes open involved in writting to the index
directories.

and we're still just talking about index files, there's all the jars/class
files your process has to open, plus any network connections.  Solr for
example, on startup while sitting idle and not counting the files in the
index directory has 64 files open ... thta's just jars and basic shared
libraries the JVM needs.

it wouldn't supprise me if 1024 was way to low for an application
maintaining 24 different indexes and dealing with concurrent network
connections.

: : have you tried running lsof on your processes to see all the
: : files you have open?
: I'm not too familiar with this command.  Do I need to issue this command

lsof -p [pid] | wc -l

The number that comes back is the one that will cuase you problems once it
approaches your open files limit.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29080-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 09 02:48:29 2007
Return-Path: <java-user-return-29080-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10288 invoked from network); 9 Jul 2007 02:48:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jul 2007 02:48:27 -0000
Received: (qmail 39801 invoked by uid 500); 9 Jul 2007 02:48:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39756 invoked by uid 500); 9 Jul 2007 02:48:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39745 invoked by uid 99); 9 Jul 2007 02:48:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Jul 2007 19:48:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.150] (HELO rescomp.berkeley.edu) (169.229.70.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Jul 2007 19:48:21 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id D862D5B764; Sun,  8 Jul 2007 19:48:00 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id BF47E7F403
	for <java-user@lucene.apache.org>; Sun,  8 Jul 2007 19:48:00 -0700 (PDT)
Date: Sun, 8 Jul 2007 19:48:00 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: RE: Too Many Open files Exception
In-Reply-To: <8F0A781213C3584099D4F903798727F89F1205@EXCL1VS1.ur.com>
Message-ID: <Pine.LNX.4.58.0707081940460.25716@hal.rescomp.berkeley.edu>
References: <8F0A781213C3584099D4F903798727F89F1187@EXCL1VS1.ur.com>
 <Pine.LNX.4.58.0707032135440.23647@hal.rescomp.berkeley.edu>
 <8F0A781213C3584099D4F903798727F89F1205@EXCL1VS1.ur.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Ok... after spending time looking at the code... I see that a method is
: not closing a TokenStream in one of the classes (a class that is
: instantiated quite often) - I would imagine this could quite possibly be
: the culprit?

can you be more specific about the code in question?

I'm not sure what class is responsible for closing TokenStreams when
documents get added ... but the only way i can imagine this might possible
be causing you problems is if you are using Field instances built from a
Reader (because failure to close the TokenStream *might* mean failure to
close the Reader -- but i'm just guessing there)

if you aren't constructing your Document's using Fields built with
Readers, then even if there is a bug with closing TokenStreams it isn't
causing your problem.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29081-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 09 04:52:36 2007
Return-Path: <java-user-return-29081-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33562 invoked from network); 9 Jul 2007 04:52:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jul 2007 04:52:35 -0000
Received: (qmail 62755 invoked by uid 500); 9 Jul 2007 04:52:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62713 invoked by uid 500); 9 Jul 2007 04:52:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62700 invoked by uid 99); 9 Jul 2007 04:52:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Jul 2007 21:52:30 -0700
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=HTML_MESSAGE,MISSING_MIMEOLE
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [203.12.160.46] (HELO mail8.tpgi.com.au) (203.12.160.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Jul 2007 21:52:26 -0700
X-TPG-Antivirus: Passed
Received: from frodo.site (60-242-156-124.tpgi.com.au [60.242.156.124])
	by mail8.tpgi.com.au (envelope-from mail@avenuedesign.net) (8.13.6/8.13.6) with ESMTP id l694q2h7029808
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Mon, 9 Jul 2007 14:52:04 +1000
Received: from frodo.site (localhost [127.0.0.1])
	by frodo.site (8.13.6/8.13.6/SuSE Linux 0.8) with ESMTP id l694q2IB002912
	for <java-user@lucene.apache.org>; Mon, 9 Jul 2007 14:52:02 +1000
Received: from Frodo (frodo.site [192.168.1.2])
    by frodo.site (Scalix SMTP Relay 11.0.2.15)
    via ESMTP; Mon, 09 Jul 2007 14:52:01 +1000 (EST)
Date: Mon, 9 Jul 2007 14:52:01 +1000
From: Ed Murray <mail@avenuedesign.net>
To: java-user@lucene.apache.org
Message-ID: <19499046.371183956721704.JavaMail.root@Frodo>
Subject: Search that supports all valid characters in a Unix filename
X-MSMail-Priority: medium
x-scalix-Hops: 1
X-Mailer: Scalix 11.0.2.23
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_Part_9_22018074.1183956721702"
X-Virus-Scanned: by amavisd-new
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9_22018074.1183956721702
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline



Could
someone let me know the best Analyzer to use to get an exact match on a U=
nix
filename when it is inserted into an untokened field.=20


Filenames
obviously contain spaces and forward slashes along with other characters.=
 I am using
a WhitespaceAnalyzer but when the query is parsed it is
chopped into different keywords as such:=20


I have
tried several different Analyzers but I can=E2=80=99t seem to get what I w=
ant.






Filename:
/repository/Administration/780 IT Support/filegate.txt=20
Query:URL:/repository/Administration/780
URL:IT URL:Support/filegate.txt






I am
assuming that this would be in common usage with Lucene but there does no=
t seem
to be an easy way to do it.


------=_Part_9_22018074.1183956721702--

From java-user-return-29082-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 09 07:13:29 2007
Return-Path: <java-user-return-29082-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60201 invoked from network); 9 Jul 2007 07:13:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jul 2007 07:13:27 -0000
Received: (qmail 58021 invoked by uid 500); 9 Jul 2007 07:13:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57986 invoked by uid 500); 9 Jul 2007 07:13:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57973 invoked by uid 99); 9 Jul 2007 07:13:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jul 2007 00:13:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.109.24.23] (HELO smtp-vbr3.xs4all.nl) (194.109.24.23)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jul 2007 00:13:19 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr3.xs4all.nl (8.13.8/8.13.8) with ESMTP id l697CvZe031246
	for <java-user@lucene.apache.org>; Mon, 9 Jul 2007 09:12:57 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: product based term combination for BooleanQuery?
Date: Mon, 9 Jul 2007 09:12:56 +0200
User-Agent: KMail/1.8.2
References: <20153459.717571183572317952.JavaMail.root@h00215> <Pine.LNX.4.58.0707081826110.25716@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0707081826110.25716@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200707090912.56826.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org


I don't know whether this was mentioned here before, but an easy way
to get product based term combination is by using a logarithm based
term score.
The addition of the logarithms will result in the logarithm of the product,
which is sorted in the same order as the product itself.

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29083-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 09 07:45:57 2007
Return-Path: <java-user-return-29083-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74767 invoked from network); 9 Jul 2007 07:45:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jul 2007 07:45:56 -0000
Received: (qmail 5745 invoked by uid 500); 9 Jul 2007 07:45:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5597 invoked by uid 500); 9 Jul 2007 07:45:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5586 invoked by uid 99); 9 Jul 2007 07:45:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jul 2007 00:45:52 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [216.237.123.82] (HELO spear.webhostingindia.com) (216.237.123.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jul 2007 00:45:47 -0700
X-ClientAddr: 61.17.203.130
Received: from Rajgad (61.17.203.130.static.vsnl.net.in [61.17.203.130] (may be forged))
	(authenticated bits=0)
	by spear.webhostingindia.com (8.12.10/8.12.10) with ESMTP id l697U4kf018873
	for <java-user@lucene.apache.org>; Mon, 9 Jul 2007 13:00:06 +0530
Message-ID: <000e01c7c1fc$c071eec0$0901a8c0@UNNATENET>
Reply-To: "Vikas" <vikas.khengare@unnat-e.com>
From: "Vikas" <vikas.khengare@unnat-e.com>
To: "lucene user" <java-user@lucene.apache.org>
Subject: UnExpected result for: indexReader.termDocs()
Date: Mon, 9 Jul 2007 12:41:57 +0530
Organization: Unnat-e Infotech
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_000B_01C7C226.898F8AA0"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1807
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1896
X-Virus-Scanned: ClamAV version 0.87.1, clamav-milter version 0.87 on spear.webhostingindia.com
X-Virus-Status: Clean
X-II-MailScanner-Information: Please contact the ISP for more information
X-MailScanner-From: vikas.khengare@unnat-e.com
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_000B_01C7C226.898F8AA0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi Friends,

Before indexing somthing I want to check whether this term is already =
exist in index / NOT.[i.e. primary key kind of thing].

When I am trying to get docs with indexReader.termDocs(term); it is not =
returning expected results.
I put "TermDocs" object in while loop to print document number where I =
found this term; but it is always printing "0" and going in infinite =
loop.
Where the term, I am searching is exists in index and can get it though =
"indexReader.terms(term);"

Here is the code -->

Term term =3D new Term( SomeDocument.KEY, value);
TermDocs termDocs =3D indexReader.termDocs(term);
while(termDocs !=3Dnull)
{
   System.out.println("Document num:"+termDocs.doc());
   termDocs.next();
}

This is going in infinite loop and printing "Document num:0" always.
Can some one will give me information on this?

With best regards

From
Vikas R. Khengare

------=_NextPart_000_000B_01C7C226.898F8AA0--


From java-user-return-29084-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 09 07:53:17 2007
Return-Path: <java-user-return-29084-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76009 invoked from network); 9 Jul 2007 07:53:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jul 2007 07:53:15 -0000
Received: (qmail 15613 invoked by uid 500); 9 Jul 2007 07:53:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15581 invoked by uid 500); 9 Jul 2007 07:53:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15570 invoked by uid 99); 9 Jul 2007 07:53:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jul 2007 00:53:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [219.118.71.125] (HELO mail.kai.ad.jp) (219.118.71.125)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jul 2007 00:53:07 -0700
Received: from mail.kai.ad.jp by mail.kai.ad.jp
          via smtpd (for herse.apache.org [140.211.11.133]) with ESMTP; Mon, 9 Jul 2007 16:52:46 +0900
Received: from linkclub-staff.com [219.118.70.66] by mail.kai.ad.jp
  (SMTPD32-7.07) id A94D12BB006A; Mon, 09 Jul 2007 16:52:45 +0900
From: anson <anson@linkclub-staff.com>
To: java-user@lucene.apache.org
Subject: Should the IndexSearcher be closed after very search completed
Date: Mon, 09 Jul 2007 16:51:41 +0900
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Mailer: HidemaruMail 4.59 (WinNT,501)
Message-Id: <1EC7C1FDFCD802anson@linkclub-staff.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Should the IndexSearcher instance be closed after very search completed.

I wrote a sample, but I have not closed the singleton instatnce of 
IndexSearcher unless IndexReader#isCurrent() return false.

Now the sample runs well, but I saw almost other samples would close the  
IndexSearcher instance on the end of very search.

Should I do it like them?

By the way, I use the constructor IndexSearcher(Directory directory), so  
should I call the method IndexSearcher.close()?


------------------------------------
the Code sample:
------------------------------------
public IndexSearcher getIndexSearcher() throws IOException {
		
	if (this.indexSearcher == null) {
		return new IndexSearcher(getIndexDirectory());
	} else {
		IndexReader ir = indexSearcher.getIndexReader();
		if(!ir.isCurrent()){
			this.indexSearcher.close();
			this.indexSearcher=new IndexSearcher
(getIndexDirectory());
			ir=indexSearcher.getIndexReader();
			if(ir.hasDeletions()){
				if (this.indexWriter != null) {
					this.indexWriter.optimize();
				}	
			}
		}
		return this.indexSearcher;
	}
}


Best regards
Anson

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29085-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 09 08:08:30 2007
Return-Path: <java-user-return-29085-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79797 invoked from network); 9 Jul 2007 08:08:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jul 2007 08:08:29 -0000
Received: (qmail 39417 invoked by uid 500); 9 Jul 2007 08:08:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39382 invoked by uid 500); 9 Jul 2007 08:08:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39371 invoked by uid 99); 9 Jul 2007 08:08:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jul 2007 01:08:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [219.118.71.125] (HELO mail.kai.ad.jp) (219.118.71.125)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jul 2007 01:08:20 -0700
Received: from mail.kai.ad.jp by mail.kai.ad.jp
          via smtpd (for herse.apache.org [140.211.11.133]) with ESMTP; Mon, 9 Jul 2007 17:07:59 +0900
Received: from linkclub-staff.com [219.118.70.66] by mail.kai.ad.jp
  (SMTPD32-7.07) id ACDE1BA0006E; Mon, 09 Jul 2007 17:07:58 +0900
From: anson <anson@linkclub-staff.com>
To: java-user@lucene.apache.org
Subject: Re: Should the IndexSearcher be closed after very search completed
Date: Mon, 09 Jul 2007 17:06:55 +0900
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Mailer: HidemaruMail 4.59 (WinNT,501)
In-Reply-To: <1EC7C1FDFCD802anson@linkclub-staff.com>
References: <1EC7C1FDFCD802anson@linkclub-staff.com>
Message-Id: <1FC7C2001D84BBanson@linkclub-staff.com>
X-Virus-Checked: Checked by ClamAV on apache.org

sorry, the subject should be "Should the IndexSearcher be closed after 
every search completed"
~~~~~
>Hi,
>
>Should the IndexSearcher instance be closed after very search completed.
>
>I wrote a sample, but I have not closed the singleton instatnce of 
>IndexSearcher unless IndexReader#isCurrent() return false.
>
>Now the sample runs well, but I saw almost other samples would close the  
>IndexSearcher instance on the end of very search.
>
>Should I do it like them?
>
>By the way, I use the constructor IndexSearcher(Directory directory), so  
>should I call the method IndexSearcher.close()?
>
>
>------------------------------------
>the Code sample:
>------------------------------------
>public IndexSearcher getIndexSearcher() throws IOException {
>		
>	if (this.indexSearcher == null) {
>		return new IndexSearcher(getIndexDirectory());
>	} else {
>		IndexReader ir = indexSearcher.getIndexReader();
>		if(!ir.isCurrent()){
>			this.indexSearcher.close();
>			this.indexSearcher=new IndexSearcher
>(getIndexDirectory());
>			ir=indexSearcher.getIndexReader();
>			if(ir.hasDeletions()){
>				if (this.indexWriter != null) {
>					this.indexWriter.optimize();
>				}	
>			}
>		}
>		return this.indexSearcher;
>	}
>}
>
>
>Best regards
>Anson
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29086-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 09 08:11:14 2007
Return-Path: <java-user-return-29086-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80366 invoked from network); 9 Jul 2007 08:11:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jul 2007 08:11:13 -0000
Received: (qmail 43395 invoked by uid 500); 9 Jul 2007 08:11:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42628 invoked by uid 500); 9 Jul 2007 08:11:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42617 invoked by uid 99); 9 Jul 2007 08:11:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jul 2007 01:11:08 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jul 2007 01:11:05 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1I7oKS-0007Yo-Un
	for java-user@lucene.apache.org; Mon, 09 Jul 2007 01:10:44 -0700
Message-ID: <11497597.post@talk.nabble.com>
Date: Mon, 9 Jul 2007 01:10:44 -0700 (PDT)
From: vcampa <campanile@interfree.it>
To: java-user@lucene.apache.org
Subject: Calling indexWriter.close() in web app
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: campanile@interfree.it
X-Virus-Checked: Checked by ClamAV on apache.org


I'm developing a web app with struts that need to embed lucene
functionalities. I need that my app adds documents to the index after that a
document is added (documents are very few, but of large size). I read that i
have to use a single instance of indexwriter to edit the index. Suppose i
use a singleton or store indexwriter in the application scope to grant all
users to use that single instance. 
My questions are: 
- when i can close indexwriter to flush changes? 
- How to know that an indexwriter has been closed before adding documents to
it? 
- What does it happen if users continue adding documents to the index after
one user action closed it?

Please help!

Sorry for my bad english.
-- 
View this message in context: http://www.nabble.com/Calling-indexWriter.close%28%29-in-web-app-tf4047813.html#a11497597
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29087-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 09 08:19:09 2007
Return-Path: <java-user-return-29087-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84123 invoked from network); 9 Jul 2007 08:19:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jul 2007 08:19:07 -0000
Received: (qmail 60755 invoked by uid 500); 9 Jul 2007 08:19:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60548 invoked by uid 500); 9 Jul 2007 08:19:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60537 invoked by uid 99); 9 Jul 2007 08:19:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jul 2007 01:19:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [213.133.33.40] (HELO smtp.is.nl) (213.133.33.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jul 2007 01:18:58 -0700
Received: from [213.133.51.241] (HELO hai01.hippo.local)
  by smtp.is.nl (CommuniGate Pro SMTP 5.0.10)
  with ESMTP id 19067709 for java-user@lucene.apache.org; Mon, 09 Jul 2007 10:18:36 +0200
content-class: urn:content-classes:message
Subject: RE: Should the IndexSearcher be closed after very search completed
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Date: Mon, 9 Jul 2007 10:18:35 +0200
Message-ID: <A955EA1F8FE31749AEC8C998082F6C7C01AC10D0@hai01.hippo.local>
X-MimeOLE: Produced By Microsoft Exchange V6.0.6619.12
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Should the IndexSearcher be closed after very search completed
Thread-Index: AcfCAFSc+MR0nWtKRWu/G2Tp+q6gpgAAUOBg
From: "Ard Schrijvers" <a.schrijvers@hippo.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Closing the IndexSearcher is best only after a deleteDocuments with a =
reader or changes with a writer.

For performance reasons, it is better to not close the IndexSearcher if =
not needed

Regarsd Ard=20

>=20
>=20
> sorry, the subject should be "Should the IndexSearcher be=20
> closed after=20
> every search completed"
> ~~~~~
> >Hi,
> >
> >Should the IndexSearcher instance be closed after very=20
> search completed.
> >
> >I wrote a sample, but I have not closed the singleton instatnce of=20
> >IndexSearcher unless IndexReader#isCurrent() return false.
> >
> >Now the sample runs well, but I saw almost other samples=20
> would close the =20
> >IndexSearcher instance on the end of very search.
> >
> >Should I do it like them?
> >
> >By the way, I use the constructor IndexSearcher(Directory=20
> directory), so =20
> >should I call the method IndexSearcher.close()?
> >
> >
> >------------------------------------
> >the Code sample:
> >------------------------------------
> >public IndexSearcher getIndexSearcher() throws IOException {
> >	=09
> >	if (this.indexSearcher =3D=3D null) {
> >		return new IndexSearcher(getIndexDirectory());
> >	} else {
> >		IndexReader ir =3D indexSearcher.getIndexReader();
> >		if(!ir.isCurrent()){
> >			this.indexSearcher.close();
> >			this.indexSearcher=3Dnew IndexSearcher
> >(getIndexDirectory());
> >			ir=3DindexSearcher.getIndexReader();
> >			if(ir.hasDeletions()){
> >				if (this.indexWriter !=3D null) {
> >					this.indexWriter.optimize();
> >				}=09
> >			}
> >		}
> >		return this.indexSearcher;
> >	}
> >}
> >
> >
> >Best regards
> >Anson
> >
> >---------------------------------------------------------------------
> >To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29088-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 09 08:28:35 2007
Return-Path: <java-user-return-29088-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89050 invoked from network); 9 Jul 2007 08:28:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jul 2007 08:28:33 -0000
Received: (qmail 76210 invoked by uid 500); 9 Jul 2007 08:28:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75778 invoked by uid 500); 9 Jul 2007 08:28:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75765 invoked by uid 99); 9 Jul 2007 08:28:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jul 2007 01:28:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [213.133.33.40] (HELO smtp.is.nl) (213.133.33.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jul 2007 01:28:25 -0700
Received: from [213.133.51.241] (HELO hai01.hippo.local)
  by smtp.is.nl (CommuniGate Pro SMTP 5.0.10)
  with ESMTP id 19068480 for java-user@lucene.apache.org; Mon, 09 Jul 2007 10:28:04 +0200
content-class: urn:content-classes:message
Subject: RE: Calling indexWriter.close() in web app
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Date: Mon, 9 Jul 2007 10:28:03 +0200
Message-ID: <A955EA1F8FE31749AEC8C998082F6C7CD6EA2A@hai01.hippo.local>
X-MimeOLE: Produced By Microsoft Exchange V6.0.6619.12
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Calling indexWriter.close() in web app
Thread-Index: AcfCALbnev3ohVDfQjatFbv28TLNpgAAWzFA
From: "Ard Schrijvers" <a.schrijvers@hippo.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

> I'm developing a web app with struts that need to embed lucene
> functionalities. I need that my app adds documents to the=20
> index after that a
> document is added (documents are very few, but of large=20
> size). I read that i
> have to use a single instance of indexwriter to edit the=20
> index. Suppose i
> use a singleton or store indexwriter in the application scope=20
> to grant all
> users to use that single instance.=20
> My questions are:=20
> - when i can close indexwriter to flush changes?=20

After you have added documents

> - How to know that an indexwriter has been closed before=20
> adding documents to
> it?=20

You are using probably a Singleton for it, so I suppose you are totally =
in charge wether it has been closed or not. After closing you just set =
the Singleton indexWriter instance to null after closing. Then, you open =
a new one when doing a getInstance on the Singleton.

> - What does it happen if users continue adding documents to=20
> the index after
> one user action closed it?

This obviously should not be possible. You should design your Singleton =
accordingly. Since you are telling you have very few documents to be =
indexed, I would rely on synchronized static functions for adding and =
deleting documents. If OTOH, you have many documents to add, for =
performance reasons an index queue is adviseable

>=20
> Please help!

Regards Ard

>=20
> Sorry for my bad english.
> --=20
> View this message in context:=20
> http://www.nabble.com/Calling-indexWriter.close%28%29-in-web-a
> pp-tf4047813.html#a11497597
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29089-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 09 08:36:03 2007
Return-Path: <java-user-return-29089-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92725 invoked from network); 9 Jul 2007 08:36:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jul 2007 08:36:02 -0000
Received: (qmail 93363 invoked by uid 500); 9 Jul 2007 08:35:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92900 invoked by uid 500); 9 Jul 2007 08:35:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92888 invoked by uid 99); 9 Jul 2007 08:35:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jul 2007 01:35:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [219.118.71.125] (HELO mail.kai.ad.jp) (219.118.71.125)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jul 2007 01:35:53 -0700
Received: from mail.kai.ad.jp by mail.kai.ad.jp
          via smtpd (for herse.apache.org [140.211.11.133]) with ESMTP; Mon, 9 Jul 2007 17:35:33 +0900
Received: from linkclub-staff.com [219.118.70.66] by mail.kai.ad.jp
  (SMTPD32-7.07) id A3501BBD006E; Mon, 09 Jul 2007 17:35:28 +0900
From: anson <anson@linkclub-staff.com>
To: java-user@lucene.apache.org
Subject: RE: Should the IndexSearcher be closed after very search completed
Date: Mon, 09 Jul 2007 17:34:25 +0900
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Mailer: HidemaruMail 4.59 (WinNT,501)
In-Reply-To: <A955EA1F8FE31749AEC8C998082F6C7C01AC10D0@hai01.hippo.local>
References: <A955EA1F8FE31749AEC8C998082F6C7C01AC10D0@hai01.hippo.local>
Message-Id: <20C7C203F4DD5Fanson@linkclub-staff.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Ard,

Thanks for your reply, well, I think I have done right.


>Closing the IndexSearcher is best only after a deleteDocuments with a 
>reader or changes with a writer.
>
>For performance reasons, it is better to not close the IndexSearcher if not
> needed
>
>Regarsd Ard 
>
>> 
>> 
>> sorry, the subject should be "Should the IndexSearcher be 
>> closed after 
>> every search completed"
>> ~~~~~
>> >Hi,
>> >
>> >Should the IndexSearcher instance be closed after very 
>> search completed.
>> >
>> >I wrote a sample, but I have not closed the singleton instatnce of 
>> >IndexSearcher unless IndexReader#isCurrent() return false.
>> >
>> >Now the sample runs well, but I saw almost other samples 
>> would close the  
>> >IndexSearcher instance on the end of very search.
>> >
>> >Should I do it like them?
>> >
>> >By the way, I use the constructor IndexSearcher(Directory 
>> directory), so  
>> >should I call the method IndexSearcher.close()?
>> >
>> >
>> >------------------------------------
>> >the Code sample:
>> >------------------------------------
>> >public IndexSearcher getIndexSearcher() throws IOException {
>> >		
>> >	if (this.indexSearcher == null) {
>> >		return new IndexSearcher(getIndexDirectory());
>> >	} else {
>> >		IndexReader ir = indexSearcher.getIndexReader();
>> >		if(!ir.isCurrent()){
>> >			this.indexSearcher.close();
>> >			this.indexSearcher=new IndexSearcher
>> >(getIndexDirectory());
>> >			ir=indexSearcher.getIndexReader();
>> >			if(ir.hasDeletions()){
>> >				if (this.indexWriter != null) {
>> >					this.indexWriter.optimize();
>> >				}	
>> >			}
>> >		}
>> >		return this.indexSearcher;
>> >	}
>> >}
>> >
>> >
>> >Best regards
>> >Anson
>> >
>> >---------------------------------------------------------------------
>> >To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> 
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> 
>> 
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29090-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 09 09:01:15 2007
Return-Path: <java-user-return-29090-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6410 invoked from network); 9 Jul 2007 09:01:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jul 2007 09:01:10 -0000
Received: (qmail 55834 invoked by uid 500); 9 Jul 2007 09:01:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55801 invoked by uid 500); 9 Jul 2007 09:01:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55790 invoked by uid 99); 9 Jul 2007 09:01:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jul 2007 02:01:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.88] (HELO web26014.mail.ukl.yahoo.com) (217.12.10.88)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 09 Jul 2007 02:01:01 -0700
Received: (qmail 11470 invoked by uid 60001); 9 Jul 2007 09:00:39 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=UpaAi+o0iGasIeTfQnnMWzquZzKWw1qMpMORLjM9hFJ4wJ1cIwLx2+vu7U0u3kIZ8Qj1uzQHSYBp427luZqAr9DpdntBfjlnh3XesEXk/Zn+BT4RaGWK6vwmH615rGqlactbxOP8PjvqyzzCmVEQiZNoyS3epPXgqMj3J+JznYg=;
X-YMail-OSG: 1wauYukVM1nx5rE8pI0t1jOiWnM5sSxnH_LrdiVXGe3thijfY_A3lblUaJ3NHORxkpdmQ8VvxF2kWOlVGuFfQeDWWZGLKgX3dtzlqsLZcfO2naST6T98HnQzKXE-
Received: from [193.36.230.96] by web26014.mail.ukl.yahoo.com via HTTP; Mon, 09 Jul 2007 09:00:39 GMT
X-Mailer: YahooMailRC/651.41 YahooMailWebService/0.7.41.16
Date: Mon, 9 Jul 2007 09:00:39 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Stop-words comparison in MoreLikeThis class in Lucene's contrib/queries project
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <809789.10126.qm@web26014.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

>>I need this comparison to be case-insensitive

The choice of case-sensitivity (and preservation of punctuation, numbers etc etc) is controlled by your choice of analyzer that you pass to MoreLikeThis. If you want to ensure your list of stop words adheres to the same logic - use the same analyzer to construct the set from wherever you store your stop words e.g. a file. 
I don't imagine there should be a need to change the MoreLikeThis source.


Cheers
Mark



----- Original Message ----
From: Jong Kim <jkim@sitescape.com>
To: java-user@lucene.apache.org
Sent: Sunday, 8 July, 2007 10:12:08 PM
Subject: Stop-words comparison in MoreLikeThis class in Lucene's contrib/queries project

Hi,
 
The MoreLikeThis class in Lucene's contrib/queries project performs noise
word filtering based on the case-sensitive comparison of the terms against
the user-supplied stopwords set. 
 
I need this comparison to be case-insensitive, but I don't see any way of
achieving it by extending this class. I would have created a subclass of
MoreLikeThis and override the isNoiseWord() method. However, the problem is
that, neither isNoiseWord() method nor the instance variables referenced
inside that method are declared protected. They are all private. Has anyone
solved this problem without modifying and building MoreLikeThis class
directly?
 
An alternative approach would be to supply a stopwords list containing all
variants of the stop words with all possible mixed cases. Needless to say,
that isn't likely to be a workable solution for many.
 
Ultimately it would be nice if those methods and variables would have been
made protected so that applications could override some of the default
behaviors without having to modify the class directly.
 
Any help would be appreciated.
 
Thanks
/Jong





      ___________________________________________________________
Yahoo! Answers - Got a question? Someone out there knows the answer. Try it
now.
http://uk.answers.yahoo.com/ 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29091-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 09 12:32:22 2007
Return-Path: <java-user-return-29091-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90335 invoked from network); 9 Jul 2007 12:32:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jul 2007 12:32:19 -0000
Received: (qmail 48218 invoked by uid 500); 9 Jul 2007 12:32:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48174 invoked by uid 500); 9 Jul 2007 12:32:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48158 invoked by uid 99); 9 Jul 2007 12:32:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jul 2007 05:32:13 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of sonusr@gmail.com designates 64.233.184.238 as permitted sender)
Received: from [64.233.184.238] (HELO wr-out-0506.google.com) (64.233.184.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jul 2007 05:32:10 -0700
Received: by wr-out-0506.google.com with SMTP id m59so378098wrm
        for <java-user@lucene.apache.org>; Mon, 09 Jul 2007 05:31:49 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=J3ahGXtHnh6FXXHD9+qZkWDGBNnEAaJ0rUmYe63ylF6DFEWtt/bwO5/8BzE1pDpXA2ppa+/mcWGL+o7+KCPlVfRlriJ7ZeAnuTPKHVmeJamx7DTo4BKgoUrM5qFyKuNUO0dadfMlTLzqU6oxe1X0SwQXt7+VyaHz7pT7gslsjNk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=LSwTeC6qedhGhPisyzaBSQXqRn12u1tzI7+OPbcfK557QR1mcYpFUR7RFQ/GYQSUHho3TpvRYAtPsRQJns152lryRliJbgUWYEKgp+426+ln1qVkwZlNBjDrk0aCCn27JASYCN9BrB1BygNoltDQ5KYlibu/digV39Cv5pLFKks=
Received: by 10.78.176.20 with SMTP id y20mr1525741hue.1183984308892;
        Mon, 09 Jul 2007 05:31:48 -0700 (PDT)
Received: by 10.78.178.13 with HTTP; Mon, 9 Jul 2007 05:31:48 -0700 (PDT)
Message-ID: <d5b3ea330707090531w2df49027rcfa330da651ba2b4@mail.gmail.com>
Date: Mon, 9 Jul 2007 18:01:48 +0530
From: "Sonu SR" <sonusr@gmail.com>
To: java-user@lucene.apache.org
Subject: Question regarding Index Update
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_127042_24064876.1183984308871"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_127042_24064876.1183984308871
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
My application using lucene index. The index documents having number of
fields. We have around 5 million such documents. I have problem with regular
update of some of the fields in the document. So every update I need to
delete and index that updated documents. This is a huge task. I know from
version 2.1 lucene added update Document feature. But I think this is also
just like my process(first delete and index). Is lucene supports the update
of particular fields only, like database? ie:- without deleting the document

Thanks,
Sonu

------=_Part_127042_24064876.1183984308871--

From java-user-return-29092-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 09 13:04:38 2007
Return-Path: <java-user-return-29092-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1742 invoked from network); 9 Jul 2007 13:04:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jul 2007 13:04:37 -0000
Received: (qmail 24157 invoked by uid 500); 9 Jul 2007 13:04:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24120 invoked by uid 500); 9 Jul 2007 13:04:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24109 invoked by uid 99); 9 Jul 2007 13:04:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jul 2007 06:04:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.128.225.190] (HELO spmler1.mail.eds.com) (194.128.225.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jul 2007 06:04:28 -0700
Received: from spmlir2.mail.eds.com (spmlir2.mail.eds.com [205.191.69.42])
	by spmler1.mail.eds.com (8.13.8/8.13.8) with ESMTP id l69D457O003485
	for <java-user@lucene.apache.org>; Mon, 9 Jul 2007 14:04:05 +0100
Received: from spmlir2.mail.eds.com (localhost.localdomain [127.0.0.1])
	by spmlir2.mail.eds.com (8.13.8/8.12.10) with ESMTP id l69D3xZB014190
	for <java-user@lucene.apache.org>; Mon, 9 Jul 2007 14:03:59 +0100
Received: from DERUM100.emea.corp.eds.com ([205.239.192.123])
	by spmlir2.mail.eds.com (8.13.8/8.12.10) with ESMTP id l69D3wH4014164
	for <java-user@lucene.apache.org>; Mon, 9 Jul 2007 14:03:59 +0100
Received: from derum202.emea.corp.eds.com ([145.16.186.20]) by DERUM100.emea.corp.eds.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 9 Jul 2007 15:03:59 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: document delete after reader.close()
Date: Mon, 9 Jul 2007 15:03:27 +0200
Message-ID: <2DD42166EF0A554B83F30B6F7B0CBA5C0BC1DE@derum202.emea.corp.eds.com>
In-Reply-To: <359a92830707060737maf762fp734b914f72edf34@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: document delete after reader.close()
Thread-Index: Ace/23JgFdX6hXJCRCix1rdt7Lu9sQCTZY9g
References: <2DD42166EF0A554B83F30B6F7B0CBA5C0BBDA5@derum202.emea.corp.eds.com> <359a92830707060737maf762fp734b914f72edf34@mail.gmail.com>
From: "Boeckli, Dominique" <dominique.boeckli@eds.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 09 Jul 2007 13:03:59.0056 (UTC) FILETIME=[9D391500:01C7C229]
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Erick,

thanks for your help, this was the solution: Connectors are pooled
resources and i kept always the same reader for all=20
connections: bad idea. They never see updates in the index for that
reason. Now i close the readers and everything
is ok.

Best

Dominique =20

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]=20
Sent: Friday, July 06, 2007 04:38 PM
To: java-user@lucene.apache.org
Subject: Re: document delete after reader.close()

Warning, I don't know much about JCA Connector.

That said, index modifications aren't visible to a searcher until the
*searcher* is closed and re-opened. Which sounds suspiciously like what
would happen when the thread terminates.

This may be totally off base, but sounds like a place to look...

Best
Erick

On 7/6/07, Boeckli, Dominique <dominique.boeckli@eds.com> wrote:
>
>
> Hello,
>
> i have following problem:
>
> I have written a Lucene JCA Connector which also taking care of the=20
> index maintenance. From time to time the connector is called (time=20
> initiated) and verifies if the index still is in synch with the=20
> filesystem (deleted, added or updated documents).
> If something changes, for example when a file was deleted, then the=20
> documents are delete from the index as well:
>
> IndexReader reader =3D getIndexReader();
>         for (int i=3D0; i<documentsToDelete.size();i++) {
>                 String path =3D documentsToDelete.get(i).getPath();
>                 Term term =3D new Term(FileDocument.PATH, path);
>                 reader.deleteDocuments(term);
>             count++;
>         }
> reader.close();
>
> The problem is that the document is not deleted after the close. The=20
> document is only deleted after a while when the jca connector was=20
> recreated (deleted from the jca pool), which means only after the=20
> thread has terminated.
>
> strange, did i missed something.
>
> Please explain to me if i did something wrong
>
> many thanks
>
> Dominique
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29093-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 09 13:43:57 2007
Return-Path: <java-user-return-29093-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31678 invoked from network); 9 Jul 2007 13:43:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jul 2007 13:43:56 -0000
Received: (qmail 22649 invoked by uid 500); 9 Jul 2007 13:43:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22435 invoked by uid 500); 9 Jul 2007 13:43:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22424 invoked by uid 99); 9 Jul 2007 13:43:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jul 2007 06:43:52 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jul 2007 06:43:48 -0700
Received: by ug-out-1314.google.com with SMTP id c2so1239748ugf
        for <java-user@lucene.apache.org>; Mon, 09 Jul 2007 06:43:27 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=H9Cx6KsVW6rkTR7t/GeKBZy6IW8DKcs+DaiKhkOPDna1cIG4/HGGZPVfcIrjmDroe88DyZiTh9dQuMBDN3NtQj3Ac8uiFSkRVvPovbsGaR7k6GRACp7wG2KMoFuk35gp6116Q94rQntNX+Nqmy9QIEM34heJqBtQQtxHaMKiK7I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=t/nt1J6aAht6BT3UAAegi9pzhy8+GdLq1SzM/L2bSiamSeWIDkpz2+UBuREzt3j3bK4Zwx7aEYaVFwBSpw+GYR4T61AkLTvijJ9RdZRzL3eBT6saGODGPdSmph/0eaJMab6niaLdkbkKhpU5gX5Mra1bL6vI+PxFZICkWFIC/7s=
Received: by 10.82.100.1 with SMTP id x1mr8254379bub.1183988606947;
        Mon, 09 Jul 2007 06:43:26 -0700 (PDT)
Received: by 10.82.167.12 with HTTP; Mon, 9 Jul 2007 06:43:26 -0700 (PDT)
Message-ID: <359a92830707090643s6bcfb60btd2cbeacb07cd55c8@mail.gmail.com>
Date: Mon, 9 Jul 2007 09:43:26 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org, Vikas <vikas.khengare@unnat-e.com>
Subject: Re: UnExpected result for: indexReader.termDocs()
In-Reply-To: <000e01c7c1fc$c071eec0$0901a8c0@UNNATENET>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_120859_23921213.1183988606924"
References: <000e01c7c1fc$c071eec0$0901a8c0@UNNATENET>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_120859_23921213.1183988606924
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Well, first you never test anything that will break the loop. TermDocs.next
()
does not set termdocs == null, but returns false....


I've always found it a bit confusing that calling next() doesn't skiph the
first term, but you want something like this....

        Term term = new Term(field, value);
        TermDocs termDocs = reader.termDocs(term);

        while (termDocs.next()) {
            System.out.println("Document num:" + termDocs.doc());
        }


Best
Erick

On 7/9/07, Vikas <vikas.khengare@unnat-e.com> wrote:
>
> Hi Friends,
>
> Before indexing somthing I want to check whether this term is already
> exist in index / NOT.[i.e. primary key kind of thing].
>
> When I am trying to get docs with indexReader.termDocs(term); it is not
> returning expected results.
> I put "TermDocs" object in while loop to print document number where I
> found this term; but it is always printing "0" and going in infinite loop.
> Where the term, I am searching is exists in index and can get it though "
> indexReader.terms(term);"
>
> Here is the code -->
>
> Term term = new Term( SomeDocument.KEY, value);
> TermDocs termDocs = indexReader.termDocs(term);
> while(termDocs !=null)
> {
>    System.out.println("Document num:"+termDocs.doc());
>    termDocs.next();
> }
>
> This is going in infinite loop and printing "Document num:0" always.
> Can some one will give me information on this?
>
> With best regards
>
> From
> Vikas R. Khengare
>

------=_Part_120859_23921213.1183988606924--

From java-user-return-29094-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 09 13:48:10 2007
Return-Path: <java-user-return-29094-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32791 invoked from network); 9 Jul 2007 13:48:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jul 2007 13:48:08 -0000
Received: (qmail 28804 invoked by uid 500); 9 Jul 2007 13:48:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28616 invoked by uid 500); 9 Jul 2007 13:48:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28604 invoked by uid 99); 9 Jul 2007 13:48:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jul 2007 06:48:04 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jul 2007 06:48:00 -0700
Received: by ug-out-1314.google.com with SMTP id c2so1240681ugf
        for <java-user@lucene.apache.org>; Mon, 09 Jul 2007 06:47:37 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=GAsAQPxwOqIa+mj8u+A8I5mu2ktTJ1hKaVzuutIFTDT8vkyYDSB7NoqfcgoNcIrkNqr0N6/x3UqQdDrOir3OzWgJiHmUktomxLgqTaAEKrJ5e5BVRY6JVgd8Ca0bby4bFPzLJuKQBSvQzrZcfY09+tfRlt07IhOhnyK3wImHktE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ZavaXdcoP0L6v431V0oOqvCCXFCSQqZS09H0ADHfa+Bq0edbKe7LlagjtvaNa3RIXrc0mWIDKr5NUkuF+lobZ+FS9XQHJHq0ewjK0tpkghzEnJSAFIwSK+ugCEIUkSJCPYwaoU8VHSYWLW5Rq4/1I4iWKhw5yX2F8nTZNFbCwaU=
Received: by 10.82.108.9 with SMTP id g9mr8228630buc.1183988857543;
        Mon, 09 Jul 2007 06:47:37 -0700 (PDT)
Received: by 10.82.167.12 with HTTP; Mon, 9 Jul 2007 06:47:37 -0700 (PDT)
Message-ID: <359a92830707090647r24e0af1cq1e94b60bf2b571d2@mail.gmail.com>
Date: Mon, 9 Jul 2007 09:47:37 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Question regarding Index Update
In-Reply-To: <d5b3ea330707090531w2df49027rcfa330da651ba2b4@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_120947_31903256.1183988857516"
References: <d5b3ea330707090531w2df49027rcfa330da651ba2b4@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_120947_31903256.1183988857516
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

No, Lucene doesn't support just updating a field in a document. You
must delete/re-add it as you suppose.

And you are correct, the UpdateDocument feature just conceals the
underlying delete/add functionality, it's not update-in-place.

Best
Erick

On 7/9/07, Sonu SR <sonusr@gmail.com> wrote:
>
> Hi,
> My application using lucene index. The index documents having number of
> fields. We have around 5 million such documents. I have problem with
> regular
> update of some of the fields in the document. So every update I need to
> delete and index that updated documents. This is a huge task. I know from
> version 2.1 lucene added update Document feature. But I think this is also
> just like my process(first delete and index). Is lucene supports the
> update
> of particular fields only, like database? ie:- without deleting the
> document
>
> Thanks,
> Sonu
>

------=_Part_120947_31903256.1183988857516--

From java-user-return-29095-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 09 13:51:27 2007
Return-Path: <java-user-return-29095-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34035 invoked from network); 9 Jul 2007 13:51:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jul 2007 13:51:26 -0000
Received: (qmail 38863 invoked by uid 500); 9 Jul 2007 13:51:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38837 invoked by uid 500); 9 Jul 2007 13:51:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38797 invoked by uid 99); 9 Jul 2007 13:51:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jul 2007 06:51:17 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jul 2007 06:51:12 -0700
Received: by nf-out-0910.google.com with SMTP id d3so61424nfc
        for <java-user@lucene.apache.org>; Mon, 09 Jul 2007 06:50:47 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=bABUKmMLylYA5OiMgAsPTof54CPg6orJsVabgeQTBadelFhlLYDATsdUpb+HXDBY43jH7mQpEJkBipaalNjrP+OKLdkq5K59FY+pcbdmQo0Er6mKyLDzjsROm/y0RVa8NNtkHXgIBJBMGMeW1gDLJke0BRNQC7r9BIDLcBQLwhg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=GkLHX40YiERWSaVDr67KnIzbQXFsvrNfayrD6XCHl0uL3r1dqn7+mHnyM6KFL1FpToiZYOo5T0YzT9VsRmup5WU5SiqRY/f1qqMgBkB4s+5GHuO+KhbhcZrh/vtjl2d5BX+32pSAPHQi6wCCjo3M7Shw7xWaDKd33YcZ1wBsMtg=
Received: by 10.82.158.12 with SMTP id g12mr8246111bue.1183989047502;
        Mon, 09 Jul 2007 06:50:47 -0700 (PDT)
Received: by 10.82.167.12 with HTTP; Mon, 9 Jul 2007 06:50:47 -0700 (PDT)
Message-ID: <359a92830707090650r2a10672eude9406a676376043@mail.gmail.com>
Date: Mon, 9 Jul 2007 09:50:47 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: document delete after reader.close()
In-Reply-To: <2DD42166EF0A554B83F30B6F7B0CBA5C0BC1DE@derum202.emea.corp.eds.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_120971_2292737.1183989047457"
References: <2DD42166EF0A554B83F30B6F7B0CBA5C0BBDA5@derum202.emea.corp.eds.com>
	 <359a92830707060737maf762fp734b914f72edf34@mail.gmail.com>
	 <2DD42166EF0A554B83F30B6F7B0CBA5C0BC1DE@derum202.emea.corp.eds.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_120971_2292737.1183989047457
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Glad that worked for you. But one caution, don't be over-anxious to
close readers since opening a reader is an expensive operation and
will affect performance. So you should close/re-open them only when
you know you've modified your index.... But if you're not experiencing
performance issues, you probably don't care <G>......

Best
Erick

On 7/9/07, Boeckli, Dominique <dominique.boeckli@eds.com> wrote:
>
> Hi Erick,
>
> thanks for your help, this was the solution: Connectors are pooled
> resources and i kept always the same reader for all
> connections: bad idea. They never see updates in the index for that
> reason. Now i close the readers and everything
> is ok.
>
> Best
>
> Dominique
>
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: Friday, July 06, 2007 04:38 PM
> To: java-user@lucene.apache.org
> Subject: Re: document delete after reader.close()
>
> Warning, I don't know much about JCA Connector.
>
> That said, index modifications aren't visible to a searcher until the
> *searcher* is closed and re-opened. Which sounds suspiciously like what
> would happen when the thread terminates.
>
> This may be totally off base, but sounds like a place to look...
>
> Best
> Erick
>
> On 7/6/07, Boeckli, Dominique <dominique.boeckli@eds.com> wrote:
> >
> >
> > Hello,
> >
> > i have following problem:
> >
> > I have written a Lucene JCA Connector which also taking care of the
> > index maintenance. From time to time the connector is called (time
> > initiated) and verifies if the index still is in synch with the
> > filesystem (deleted, added or updated documents).
> > If something changes, for example when a file was deleted, then the
> > documents are delete from the index as well:
> >
> > IndexReader reader = getIndexReader();
> >         for (int i=0; i<documentsToDelete.size();i++) {
> >                 String path = documentsToDelete.get(i).getPath();
> >                 Term term = new Term(FileDocument.PATH, path);
> >                 reader.deleteDocuments(term);
> >             count++;
> >         }
> > reader.close();
> >
> > The problem is that the document is not deleted after the close. The
> > document is only deleted after a while when the jca connector was
> > recreated (deleted from the jca pool), which means only after the
> > thread has terminated.
> >
> > strange, did i missed something.
> >
> > Please explain to me if i did something wrong
> >
> > many thanks
> >
> > Dominique
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_120971_2292737.1183989047457--

From java-user-return-29096-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 09 14:00:29 2007
Return-Path: <java-user-return-29096-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36997 invoked from network); 9 Jul 2007 14:00:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jul 2007 14:00:28 -0000
Received: (qmail 63758 invoked by uid 500); 9 Jul 2007 14:00:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63205 invoked by uid 500); 9 Jul 2007 14:00:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63190 invoked by uid 99); 9 Jul 2007 14:00:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jul 2007 07:00:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [165.212.64.22] (HELO gateout02.mbox.net) (165.212.64.22)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jul 2007 07:00:19 -0700
Received: from gateout02.mbox.net (gateout02.mbox.net [165.212.64.22])
	by gateout02.mbox.net (Postfix) with ESMTP id D19533828
	for <java-user@lucene.apache.org>; Mon,  9 Jul 2007 13:59:58 +0000 (GMT)
Received: from GW1.EXCHPROD.USA.NET [165.212.116.254] by gateout02.mbox.net via smtad (C8.MAIN.3.34P) 
	with ESMTP id XID431LgiN879512Xo2; Mon, 09 Jul 2007 13:59:58 -0000
X-USANET-Source: 165.212.116.254 IN   jkim@sitescape.com GW1.EXCHPROD.USA.NET
X-USANET-MsgId: XID431LgiN879512Xo2
Received: from PEACE ([216.195.213.27]) by GW1.EXCHPROD.USA.NET with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 9 Jul 2007 07:58:10 -0600
From: "Jong Kim" <jkim@sitescape.com>
To: <java-user@lucene.apache.org>
Subject: RE: Stop-words comparison in MoreLikeThis class in Lucene's contrib/queries project
Date: Mon, 9 Jul 2007 10:00:05 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
Thread-Index: AcfCB3BrGvslLbIyQoizblsHJ7PP8gAKR6kg
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
In-Reply-To: <809789.10126.qm@web26014.mail.ukl.yahoo.com>
Message-ID: <GW1h1vdkmyCF1Hkikie0001d33f@GW1.EXCHPROD.USA.NET>
X-OriginalArrivalTime: 09 Jul 2007 13:58:11.0094 (UTC) FILETIME=[2F96B360:01C7C231]
X-Virus-Checked: Checked by ClamAV on apache.org

My application stores term vectors with the index, and use that information
to implement more-like-this rather than tokenizing the original text using
an analyzer. Consequently the option of achieving the effect by specifying
different analyzer is no good for my case.

/Jong

-----Original Message-----
From: mark harwood [mailto:markharw00d@yahoo.co.uk] 
Sent: Monday, July 09, 2007 5:01 AM
To: java-user@lucene.apache.org
Subject: Re: Stop-words comparison in MoreLikeThis class in Lucene's
contrib/queries project

>>I need this comparison to be case-insensitive

The choice of case-sensitivity (and preservation of punctuation, numbers etc
etc) is controlled by your choice of analyzer that you pass to MoreLikeThis.
If you want to ensure your list of stop words adheres to the same logic -
use the same analyzer to construct the set from wherever you store your stop
words e.g. a file. 
I don't imagine there should be a need to change the MoreLikeThis source.


Cheers
Mark



----- Original Message ----
From: Jong Kim <jkim@sitescape.com>
To: java-user@lucene.apache.org
Sent: Sunday, 8 July, 2007 10:12:08 PM
Subject: Stop-words comparison in MoreLikeThis class in Lucene's
contrib/queries project

Hi,
 
The MoreLikeThis class in Lucene's contrib/queries project performs noise
word filtering based on the case-sensitive comparison of the terms against
the user-supplied stopwords set. 
 
I need this comparison to be case-insensitive, but I don't see any way of
achieving it by extending this class. I would have created a subclass of
MoreLikeThis and override the isNoiseWord() method. However, the problem is
that, neither isNoiseWord() method nor the instance variables referenced
inside that method are declared protected. They are all private. Has anyone
solved this problem without modifying and building MoreLikeThis class
directly?
 
An alternative approach would be to supply a stopwords list containing all
variants of the stop words with all possible mixed cases. Needless to say,
that isn't likely to be a workable solution for many.
 
Ultimately it would be nice if those methods and variables would have been
made protected so that applications could override some of the default
behaviors without having to modify the class directly.
 
Any help would be appreciated.
 
Thanks
/Jong





      ___________________________________________________________
Yahoo! Answers - Got a question? Someone out there knows the answer. Try it
now.
http://uk.answers.yahoo.com/ 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29097-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 09 14:33:13 2007
Return-Path: <java-user-return-29097-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58107 invoked from network); 9 Jul 2007 14:33:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jul 2007 14:33:12 -0000
Received: (qmail 35608 invoked by uid 500); 9 Jul 2007 14:33:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35578 invoked by uid 500); 9 Jul 2007 14:33:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35565 invoked by uid 99); 9 Jul 2007 14:33:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jul 2007 07:33:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.217] (HELO web26006.mail.ukl.yahoo.com) (217.12.10.217)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 09 Jul 2007 07:33:04 -0700
Received: (qmail 65219 invoked by uid 60001); 9 Jul 2007 14:32:42 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=qt3e9O474Ww1sNoY+f5KUsRYzb/E+GdHNTdNShWrbPNW+GCjFTISXlk/54O2KHfqox1H9+PtVcs8/j+Fq1AO94M2ZXTarhjkSpJi8z728NgGLd4BTiUM1lElQIHBp46wIHc+hV5kpptEN2iMCJZzvi+J+R1yodFKl9cOEgVa/Bo=;
X-YMail-OSG: GIAEqKcVM1kv18MZWHsv7i38nTbyLOAf.b0h9iXRbSjK5WUcPluVHuGXQSJikiSbgBLYkYkXgq32VfOTh2xJGnGdYGzGjh6GqUV7c_o6gACd6kddm60aJ1id6Qs-
Received: from [193.36.230.96] by web26006.mail.ukl.yahoo.com via HTTP; Mon, 09 Jul 2007 14:32:42 GMT
X-Mailer: YahooMailRC/651.41 YahooMailWebService/0.7.41.16
Date: Mon, 9 Jul 2007 14:32:42 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Stop-words comparison in MoreLikeThis class in Lucene's contrib/queries project
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <766301.64566.qm@web26006.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

>>My application stores term vectors with the index

And those stored term vectors contain terms produced by your choice of analyzer, no? 
Or are you saying that you have deliberately chosen to index the content with a case-sensitive analyzer and that you want to supply stop words in a case-insensitive fashion?



----- Original Message ----
From: Jong Kim <jkim@sitescape.com>
To: java-user@lucene.apache.org
Sent: Monday, 9 July, 2007 3:00:05 PM
Subject: RE: Stop-words comparison in MoreLikeThis class in Lucene's contrib/queries project

My application stores term vectors with the index, and use that information
to implement more-like-this rather than tokenizing the original text using
an analyzer. Consequently the option of achieving the effect by specifying
different analyzer is no good for my case.

/Jong

-----Original Message-----
From: mark harwood [mailto:markharw00d@yahoo.co.uk] 
Sent: Monday, July 09, 2007 5:01 AM
To: java-user@lucene.apache.org
Subject: Re: Stop-words comparison in MoreLikeThis class in Lucene's
contrib/queries project

>>I need this comparison to be case-insensitive

The choice of case-sensitivity (and preservation of punctuation, numbers etc
etc) is controlled by your choice of analyzer that you pass to MoreLikeThis.
If you want to ensure your list of stop words adheres to the same logic -
use the same analyzer to construct the set from wherever you store your stop
words e.g. a file. 
I don't imagine there should be a need to change the MoreLikeThis source.


Cheers
Mark



----- Original Message ----
From: Jong Kim <jkim@sitescape.com>
To: java-user@lucene.apache.org
Sent: Sunday, 8 July, 2007 10:12:08 PM
Subject: Stop-words comparison in MoreLikeThis class in Lucene's
contrib/queries project

Hi,
 
The MoreLikeThis class in Lucene's contrib/queries project performs noise
word filtering based on the case-sensitive comparison of the terms against
the user-supplied stopwords set. 
 
I need this comparison to be case-insensitive, but I don't see any way of
achieving it by extending this class. I would have created a subclass of
MoreLikeThis and override the isNoiseWord() method. However, the problem is
that, neither isNoiseWord() method nor the instance variables referenced
inside that method are declared protected. They are all private. Has anyone
solved this problem without modifying and building MoreLikeThis class
directly?
 
An alternative approach would be to supply a stopwords list containing all
variants of the stop words with all possible mixed cases. Needless to say,
that isn't likely to be a workable solution for many.
 
Ultimately it would be nice if those methods and variables would have been
made protected so that applications could override some of the default
behaviors without having to modify the class directly.
 
Any help would be appreciated.
 
Thanks
/Jong





      ___________________________________________________________
Yahoo! Answers - Got a question? Someone out there knows the answer. Try it
now.
http://uk.answers.yahoo.com/ 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org






      ___________________________________________________________ 
Yahoo! Mail is the world's favourite email. Don't settle for less, sign up for
your free account today http://uk.rd.yahoo.com/evt=44106/*http://uk.docs.yahoo.com/mail/winter07.html 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29098-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 09 14:55:26 2007
Return-Path: <java-user-return-29098-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71965 invoked from network); 9 Jul 2007 14:55:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jul 2007 14:55:25 -0000
Received: (qmail 74959 invoked by uid 500); 9 Jul 2007 14:55:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74560 invoked by uid 500); 9 Jul 2007 14:55:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74549 invoked by uid 99); 9 Jul 2007 14:55:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jul 2007 07:55:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [165.212.64.22] (HELO gateout02.mbox.net) (165.212.64.22)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jul 2007 07:55:16 -0700
Received: from gateout02.mbox.net (gateout02.mbox.net [165.212.64.22])
	by gateout02.mbox.net (Postfix) with ESMTP id C42AE3C02
	for <java-user@lucene.apache.org>; Mon,  9 Jul 2007 14:54:55 +0000 (GMT)
Received: from GW2.EXCHPROD.USA.NET [165.212.116.254] by gateout02.mbox.net via smtad (C8.MAIN.3.34P) 
	with ESMTP id XID039Lgio340223Xo2; Mon, 09 Jul 2007 14:54:55 -0000
X-USANET-Source: 165.212.116.254 IN   jkim@sitescape.com GW2.EXCHPROD.USA.NET
X-USANET-MsgId: XID039Lgio340223Xo2
Received: from PEACE ([216.195.213.27]) by GW2.EXCHPROD.USA.NET with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 9 Jul 2007 08:53:07 -0600
From: "Jong Kim" <jkim@sitescape.com>
To: <java-user@lucene.apache.org>
Subject: RE: Stop-words comparison in MoreLikeThis class in Lucene's contrib/queries project
Date: Mon, 9 Jul 2007 10:55:03 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
Thread-Index: AcfCNdLbjabUeVAnQDuSUOicjJryOgAAhShg
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
In-Reply-To: <766301.64566.qm@web26006.mail.ukl.yahoo.com>
Message-ID: <GW2N6XsxC6iPbDsouUH0001f2aa@GW2.EXCHPROD.USA.NET>
X-OriginalArrivalTime: 09 Jul 2007 14:53:08.0002 (UTC) FILETIME=[DCB2F020:01C7C238]
X-Virus-Checked: Checked by ClamAV on apache.org

>>Or are you saying that you have deliberately chosen to index the content
with a case-sensitive analyzer and that you want to supply stop words in a
case-insensitive fashion?

Correct. 
To be precise, we index each token up to twice - original token and its
all-lowercase equivalent.
Due to a product requirement, no token is thrown away at the time of
indexing, that is, no stopwords filtering at indexing time.
However, when executing MoreLikeThis feature, we do use a stopwords list
(the fact that we indexed each and every word does not mean that they have
to be included in the execution of MoreLikeThis), and we want the stopwords
filtering to be case insensitive.

/Jong

-----Original Message-----
From: mark harwood [mailto:markharw00d@yahoo.co.uk] 
Sent: Monday, July 09, 2007 10:33 AM
To: java-user@lucene.apache.org
Subject: Re: Stop-words comparison in MoreLikeThis class in Lucene's
contrib/queries project

>>My application stores term vectors with the index

And those stored term vectors contain terms produced by your choice of
analyzer, no? 
Or are you saying that you have deliberately chosen to index the content
with a case-sensitive analyzer and that you want to supply stop words in a
case-insensitive fashion?



----- Original Message ----
From: Jong Kim <jkim@sitescape.com>
To: java-user@lucene.apache.org
Sent: Monday, 9 July, 2007 3:00:05 PM
Subject: RE: Stop-words comparison in MoreLikeThis class in Lucene's
contrib/queries project

My application stores term vectors with the index, and use that information
to implement more-like-this rather than tokenizing the original text using
an analyzer. Consequently the option of achieving the effect by specifying
different analyzer is no good for my case.

/Jong

-----Original Message-----
From: mark harwood [mailto:markharw00d@yahoo.co.uk]
Sent: Monday, July 09, 2007 5:01 AM
To: java-user@lucene.apache.org
Subject: Re: Stop-words comparison in MoreLikeThis class in Lucene's
contrib/queries project

>>I need this comparison to be case-insensitive

The choice of case-sensitivity (and preservation of punctuation, numbers etc
etc) is controlled by your choice of analyzer that you pass to MoreLikeThis.
If you want to ensure your list of stop words adheres to the same logic -
use the same analyzer to construct the set from wherever you store your stop
words e.g. a file. 
I don't imagine there should be a need to change the MoreLikeThis source.


Cheers
Mark



----- Original Message ----
From: Jong Kim <jkim@sitescape.com>
To: java-user@lucene.apache.org
Sent: Sunday, 8 July, 2007 10:12:08 PM
Subject: Stop-words comparison in MoreLikeThis class in Lucene's
contrib/queries project

Hi,
 
The MoreLikeThis class in Lucene's contrib/queries project performs noise
word filtering based on the case-sensitive comparison of the terms against
the user-supplied stopwords set. 
 
I need this comparison to be case-insensitive, but I don't see any way of
achieving it by extending this class. I would have created a subclass of
MoreLikeThis and override the isNoiseWord() method. However, the problem is
that, neither isNoiseWord() method nor the instance variables referenced
inside that method are declared protected. They are all private. Has anyone
solved this problem without modifying and building MoreLikeThis class
directly?
 
An alternative approach would be to supply a stopwords list containing all
variants of the stop words with all possible mixed cases. Needless to say,
that isn't likely to be a workable solution for many.
 
Ultimately it would be nice if those methods and variables would have been
made protected so that applications could override some of the default
behaviors without having to modify the class directly.
 
Any help would be appreciated.
 
Thanks
/Jong





      ___________________________________________________________
Yahoo! Answers - Got a question? Someone out there knows the answer. Try it
now.
http://uk.answers.yahoo.com/ 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org






      ___________________________________________________________
Yahoo! Mail is the world's favourite email. Don't settle for less, sign up
for your free account today
http://uk.rd.yahoo.com/evt=44106/*http://uk.docs.yahoo.com/mail/winter07.htm
l 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29099-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 09 15:54:38 2007
Return-Path: <java-user-return-29099-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98677 invoked from network); 9 Jul 2007 15:54:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jul 2007 15:54:35 -0000
Received: (qmail 97996 invoked by uid 500); 9 Jul 2007 15:54:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97964 invoked by uid 500); 9 Jul 2007 15:54:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97953 invoked by uid 99); 9 Jul 2007 15:54:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jul 2007 08:54:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.87] (HELO web26013.mail.ukl.yahoo.com) (217.12.10.87)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 09 Jul 2007 08:54:25 -0700
Received: (qmail 87980 invoked by uid 60001); 9 Jul 2007 15:54:03 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=fiGP0VRWTosy6x3xPw4aEM8o8GTwsTUV37ew5dgHMOePqsjuW29QN/++KeUGB/t8MnA2mCMQz5LqJya/9Rr6UZlUJk+u9WV35ZpW/QC+0bMZi9X1yhxDzEep0I+DxdsAsUqy6qsvQwuiQrlXcmoXdrcVSQ2/Ue/OmUxfzmS5pHI=;
X-YMail-OSG: ahO5ARMVM1kRG.Hw7oowea_D87gBDzhzPEMxskHegtroleocIUxVtqxIT5vxgREQX6P1nAZ6FMksbKlHZMPb3mXeaRUPihElfQ--
Received: from [193.36.230.96] by web26013.mail.ukl.yahoo.com via HTTP; Mon, 09 Jul 2007 15:54:03 GMT
X-Mailer: YahooMailRC/651.41 YahooMailWebService/0.7.41.16
Date: Mon, 9 Jul 2007 15:54:03 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Stop-words comparison in MoreLikeThis class in Lucene's contrib/queries project
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <346338.87603.qm@web26013.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

OK. I can see the logic that says it might be useful/convenient to filter case-sensitive search terms using a case-insensitive list of stop words.

What seems slightly odd is that you want exactness in the choice of case yet are using an imprecise matching technique (MoreLikeThis) - effectively saying "I really care about the exact use of case but really don't care exactly which words match". Is this really the requirement? I would have thought in most cases the user would be willing to relax the exact case match requirement along with their choice of precisely which words are used to match. If this applies to your app you could run MoreLikeThis on the lower-cased version of the field in the index.


Cheers
Mark


----- Original Message ----
From: Jong Kim <jkim@sitescape.com>
To: java-user@lucene.apache.org
Sent: Monday, 9 July, 2007 3:55:03 PM
Subject: RE: Stop-words comparison in MoreLikeThis class in Lucene's contrib/queries project

>>Or are you saying that you have deliberately chosen to index the content
with a case-sensitive analyzer and that you want to supply stop words in a
case-insensitive fashion?

Correct. 
To be precise, we index each token up to twice - original token and its
all-lowercase equivalent.
Due to a product requirement, no token is thrown away at the time of
indexing, that is, no stopwords filtering at indexing time.
However, when executing MoreLikeThis feature, we do use a stopwords list
(the fact that we indexed each and every word does not mean that they have
to be included in the execution of MoreLikeThis), and we want the stopwords
filtering to be case insensitive.

/Jong

-----Original Message-----
From: mark harwood [mailto:markharw00d@yahoo.co.uk] 
Sent: Monday, July 09, 2007 10:33 AM
To: java-user@lucene.apache.org
Subject: Re: Stop-words comparison in MoreLikeThis class in Lucene's
contrib/queries project

>>My application stores term vectors with the index

And those stored term vectors contain terms produced by your choice of
analyzer, no? 
Or are you saying that you have deliberately chosen to index the content
with a case-sensitive analyzer and that you want to supply stop words in a
case-insensitive fashion?



----- Original Message ----
From: Jong Kim <jkim@sitescape.com>
To: java-user@lucene.apache.org
Sent: Monday, 9 July, 2007 3:00:05 PM
Subject: RE: Stop-words comparison in MoreLikeThis class in Lucene's
contrib/queries project

My application stores term vectors with the index, and use that information
to implement more-like-this rather than tokenizing the original text using
an analyzer. Consequently the option of achieving the effect by specifying
different analyzer is no good for my case.

/Jong

-----Original Message-----
From: mark harwood [mailto:markharw00d@yahoo.co.uk]
Sent: Monday, July 09, 2007 5:01 AM
To: java-user@lucene.apache.org
Subject: Re: Stop-words comparison in MoreLikeThis class in Lucene's
contrib/queries project

>>I need this comparison to be case-insensitive

The choice of case-sensitivity (and preservation of punctuation, numbers etc
etc) is controlled by your choice of analyzer that you pass to MoreLikeThis.
If you want to ensure your list of stop words adheres to the same logic -
use the same analyzer to construct the set from wherever you store your stop
words e.g. a file. 
I don't imagine there should be a need to change the MoreLikeThis source.


Cheers
Mark



----- Original Message ----
From: Jong Kim <jkim@sitescape.com>
To: java-user@lucene.apache.org
Sent: Sunday, 8 July, 2007 10:12:08 PM
Subject: Stop-words comparison in MoreLikeThis class in Lucene's
contrib/queries project

Hi,
 
The MoreLikeThis class in Lucene's contrib/queries project performs noise
word filtering based on the case-sensitive comparison of the terms against
the user-supplied stopwords set. 
 
I need this comparison to be case-insensitive, but I don't see any way of
achieving it by extending this class. I would have created a subclass of
MoreLikeThis and override the isNoiseWord() method. However, the problem is
that, neither isNoiseWord() method nor the instance variables referenced
inside that method are declared protected. They are all private. Has anyone
solved this problem without modifying and building MoreLikeThis class
directly?
 
An alternative approach would be to supply a stopwords list containing all
variants of the stop words with all possible mixed cases. Needless to say,
that isn't likely to be a workable solution for many.
 
Ultimately it would be nice if those methods and variables would have been
made protected so that applications could override some of the default
behaviors without having to modify the class directly.
 
Any help would be appreciated.
 
Thanks
/Jong





      ___________________________________________________________
Yahoo! Answers - Got a question? Someone out there knows the answer. Try it
now.
http://uk.answers.yahoo.com/ 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org






      ___________________________________________________________
Yahoo! Mail is the world's favourite email. Don't settle for less, sign up
for your free account today
http://uk.rd.yahoo.com/evt=44106/*http://uk.docs.yahoo.com/mail/winter07.htm
l 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org






      ___________________________________________________________ 
Yahoo! Mail is the world's favourite email. Don't settle for less, sign up for
your free account today http://uk.rd.yahoo.com/evt=44106/*http://uk.docs.yahoo.com/mail/winter07.html 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29100-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 09 16:32:55 2007
Return-Path: <java-user-return-29100-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16605 invoked from network); 9 Jul 2007 16:32:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jul 2007 16:32:55 -0000
Received: (qmail 81728 invoked by uid 500); 9 Jul 2007 16:32:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81694 invoked by uid 500); 9 Jul 2007 16:32:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81679 invoked by uid 99); 9 Jul 2007 16:32:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jul 2007 09:32:49 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of sonusr@gmail.com designates 66.249.90.178 as permitted sender)
Received: from [66.249.90.178] (HELO ik-out-1112.google.com) (66.249.90.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jul 2007 09:32:46 -0700
Received: by ik-out-1112.google.com with SMTP id b32so587136ika
        for <java-user@lucene.apache.org>; Mon, 09 Jul 2007 09:32:25 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=LV7zBmjD9NfQJ3dWiHssjMilqeqI+uP1thAbtEJfAO3H7c/Eb1WqYUzh2fvGK0a2bsXiEOi2xS31kttPmGfsJFQsj4HtxjpL+iwZnxu12jL1w9lfTDPDpLWfZGrz4rYgVpws1CDo5rNvbDB2H35vWABXG3/Jiq9yyNi6mu3aOj8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=sYJAKflK0WOuCM4l7Ib5EJ7wFXym2jjoXXPSCcDbt/+Rr8Co//J8lrRrOL0yrfaL7/S/4ic43V3OpjuahIVarHgMxgrTRKMhBq7UbKSVJKmOBJpL7YRD5SiaclevAybs/wTBHjCYKYqfLIRsmHtzVei3weoYw29uogW9/dHru+U=
Received: by 10.78.162.4 with SMTP id k4mr1667616hue.1183998744605;
        Mon, 09 Jul 2007 09:32:24 -0700 (PDT)
Received: by 10.78.178.13 with HTTP; Mon, 9 Jul 2007 09:32:24 -0700 (PDT)
Message-ID: <d5b3ea330707090932h766de658h8da6f1dfb4af6fd1@mail.gmail.com>
Date: Mon, 9 Jul 2007 22:02:24 +0530
From: "Sonu SR" <sonusr@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Question regarding Index Update
In-Reply-To: <359a92830707090647r24e0af1cq1e94b60bf2b571d2@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_130225_29445562.1183998744571"
References: <d5b3ea330707090531w2df49027rcfa330da651ba2b4@mail.gmail.com>
	 <359a92830707090647r24e0af1cq1e94b60bf2b571d2@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_130225_29445562.1183998744571
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks Erik. Is the field update is too difficult task in lucene? I expect
this feature also in lucene, in near future.

On 7/9/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> No, Lucene doesn't support just updating a field in a document. You
> must delete/re-add it as you suppose.
>
> And you are correct, the UpdateDocument feature just conceals the
> underlying delete/add functionality, it's not update-in-place.
>
> Best
> Erick
>
> On 7/9/07, Sonu SR <sonusr@gmail.com> wrote:
> >
> > Hi,
> > My application using lucene index. The index documents having number of
> > fields. We have around 5 million such documents. I have problem with
> > regular
> > update of some of the fields in the document. So every update I need to
> > delete and index that updated documents. This is a huge task. I know
> from
> > version 2.1 lucene added update Document feature. But I think this is
> also
> > just like my process(first delete and index). Is lucene supports the
> > update
> > of particular fields only, like database? ie:- without deleting the
> > document
> >
> > Thanks,
> > Sonu
> >
>

------=_Part_130225_29445562.1183998744571--

From java-user-return-29101-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 09 16:35:02 2007
Return-Path: <java-user-return-29101-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17631 invoked from network); 9 Jul 2007 16:35:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jul 2007 16:35:00 -0000
Received: (qmail 86989 invoked by uid 500); 9 Jul 2007 16:34:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86953 invoked by uid 500); 9 Jul 2007 16:34:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86942 invoked by uid 99); 9 Jul 2007 16:34:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jul 2007 09:34:55 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jul 2007 09:34:52 -0700
Received: by ug-out-1314.google.com with SMTP id c2so1278825ugf
        for <java-user@lucene.apache.org>; Mon, 09 Jul 2007 09:34:30 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=nV8OZDzAxyxXfVYFDrWJMK1dg/nbjCBcUv/zTGKafthht3CSNIChTjmM/X4H+vCYyKAaWDWsl/aEO3iQt41FecqiQfioSvbyaeIaWyM1voZSgo4szVAWJLpsB23C6HSW6ox3rFlXWSEHcY+pkjlA7+rdylPZdlxkHQabvoYSWZ8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=qu1H1v3Gihq5UOY6wvz3qGYvVWx9zQxlix/0x9/Thu46zY7ecp403Cd7NaptVFaw+0H9CCn1kX/hTGj1NzSiYGoe8Fsi0YoYlwhnujdHxVAej8CzrXGyZREAsry85+uFU/nlzmdRbj8vzKV6fvY9LbUQcnS8G2myKal2sOjYEyU=
Received: by 10.82.152.16 with SMTP id z16mr8563676bud.1183998870173;
        Mon, 09 Jul 2007 09:34:30 -0700 (PDT)
Received: by 10.82.167.12 with HTTP; Mon, 9 Jul 2007 09:34:30 -0700 (PDT)
Message-ID: <359a92830707090934l19b3e28bn18b7ae25fbf7a7bd@mail.gmail.com>
Date: Mon, 9 Jul 2007 12:34:30 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Question regarding Index Update
In-Reply-To: <d5b3ea330707090932h766de658h8da6f1dfb4af6fd1@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_122463_19965860.1183998870150"
References: <d5b3ea330707090531w2df49027rcfa330da651ba2b4@mail.gmail.com>
	 <359a92830707090647r24e0af1cq1e94b60bf2b571d2@mail.gmail.com>
	 <d5b3ea330707090932h766de658h8da6f1dfb4af6fd1@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_122463_19965860.1183998870150
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Then I think you'll be disappointed. Search the archive for phrases
like "update in place" and you'll see a discussion of why this isn't
as straight-forward as you might think.

Best
Erick

On 7/9/07, Sonu SR <sonusr@gmail.com> wrote:
>
> Thanks Erik. Is the field update is too difficult task in lucene? I expect
> this feature also in lucene, in near future.
>
> On 7/9/07, Erick Erickson <erickerickson@gmail.com> wrote:
> >
> > No, Lucene doesn't support just updating a field in a document. You
> > must delete/re-add it as you suppose.
> >
> > And you are correct, the UpdateDocument feature just conceals the
> > underlying delete/add functionality, it's not update-in-place.
> >
> > Best
> > Erick
> >
> > On 7/9/07, Sonu SR <sonusr@gmail.com> wrote:
> > >
> > > Hi,
> > > My application using lucene index. The index documents having number
> of
> > > fields. We have around 5 million such documents. I have problem with
> > > regular
> > > update of some of the fields in the document. So every update I need
> to
> > > delete and index that updated documents. This is a huge task. I know
> > from
> > > version 2.1 lucene added update Document feature. But I think this is
> > also
> > > just like my process(first delete and index). Is lucene supports the
> > > update
> > > of particular fields only, like database? ie:- without deleting the
> > > document
> > >
> > > Thanks,
> > > Sonu
> > >
> >
>

------=_Part_122463_19965860.1183998870150--

From java-user-return-29102-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 09 17:34:59 2007
Return-Path: <java-user-return-29102-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50249 invoked from network); 9 Jul 2007 17:34:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jul 2007 17:34:57 -0000
Received: (qmail 9986 invoked by uid 500); 9 Jul 2007 17:34:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9951 invoked by uid 500); 9 Jul 2007 17:34:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9936 invoked by uid 99); 9 Jul 2007 17:34:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jul 2007 10:34:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [165.212.64.22] (HELO gateout02.mbox.net) (165.212.64.22)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jul 2007 10:34:48 -0700
Received: from gateout02.mbox.net (gateout02.mbox.net [165.212.64.22])
	by gateout02.mbox.net (Postfix) with ESMTP id D7DDD187A
	for <java-user@lucene.apache.org>; Mon,  9 Jul 2007 17:34:27 +0000 (GMT)
Received: from GW2.EXCHPROD.USA.NET [165.212.116.254] by gateout02.mbox.net via smtad (C8.MAIN.3.34P) 
	with ESMTP id XID262LgiRIb9326Xo2; Mon, 09 Jul 2007 17:34:27 -0000
X-USANET-Source: 165.212.116.254 IN   jkim@sitescape.com GW2.EXCHPROD.USA.NET
X-USANET-MsgId: XID262LgiRIb9326Xo2
Received: from PEACE ([216.195.213.27]) by GW2.EXCHPROD.USA.NET with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 9 Jul 2007 11:32:39 -0600
From: "Jong Kim" <jkim@sitescape.com>
To: <java-user@lucene.apache.org>
Subject: RE: Stop-words comparison in MoreLikeThis class in Lucene's contrib/queries project
Date: Mon, 9 Jul 2007 13:34:34 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
Thread-Index: AcfCQTDB1jJ5IZlfSoCT6rxSp9TFyAAC6DfA
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
In-Reply-To: <346338.87603.qm@web26013.mail.ukl.yahoo.com>
Message-ID: <GW2lnhPOwHZfvaGwoKy0001fe0a@GW2.EXCHPROD.USA.NET>
X-OriginalArrivalTime: 09 Jul 2007 17:32:39.0181 (UTC) FILETIME=[2590F3D0:01C7C24F]
X-Virus-Checked: Checked by ClamAV on apache.org

Our requirement is simply that - 

1. Do not throw away any information at indexing time - so we preserve case
information and keep all tokens.

2. Search functionality is provided at two levels - 

2.1 End User search - stop word filtering is done on the search terms, the
same stop word list is used for MoreLikeThis function.

2.2 Admin search - this is more like raw index lookup than typical end-user
search, can include stop words in the search terms.
 
The point here is that, the case matters only for those words that should be
included. For the words we do not want included in the end user search, we
do not care about the case (which to me is quite reasonable). 

I still think it makes sense to re-factor the MoreLikeThis class so that it
can serve a wide variety of use cases (however weird it may look) than
trying to dictate the use cases. I think it is better approach to making the
useful class even more useful.

/Jong

-----Original Message-----
From: mark harwood [mailto:markharw00d@yahoo.co.uk] 
Sent: Monday, July 09, 2007 11:54 AM
To: java-user@lucene.apache.org
Subject: Re: Stop-words comparison in MoreLikeThis class in Lucene's
contrib/queries project

OK. I can see the logic that says it might be useful/convenient to filter
case-sensitive search terms using a case-insensitive list of stop words.

What seems slightly odd is that you want exactness in the choice of case yet
are using an imprecise matching technique (MoreLikeThis) - effectively
saying "I really care about the exact use of case but really don't care
exactly which words match". Is this really the requirement? I would have
thought in most cases the user would be willing to relax the exact case
match requirement along with their choice of precisely which words are used
to match. If this applies to your app you could run MoreLikeThis on the
lower-cased version of the field in the index.


Cheers
Mark


----- Original Message ----
From: Jong Kim <jkim@sitescape.com>
To: java-user@lucene.apache.org
Sent: Monday, 9 July, 2007 3:55:03 PM
Subject: RE: Stop-words comparison in MoreLikeThis class in Lucene's
contrib/queries project

>>Or are you saying that you have deliberately chosen to index the 
>>content
with a case-sensitive analyzer and that you want to supply stop words in a
case-insensitive fashion?

Correct. 
To be precise, we index each token up to twice - original token and its
all-lowercase equivalent.
Due to a product requirement, no token is thrown away at the time of
indexing, that is, no stopwords filtering at indexing time.
However, when executing MoreLikeThis feature, we do use a stopwords list
(the fact that we indexed each and every word does not mean that they have
to be included in the execution of MoreLikeThis), and we want the stopwords
filtering to be case insensitive.

/Jong

-----Original Message-----
From: mark harwood [mailto:markharw00d@yahoo.co.uk]
Sent: Monday, July 09, 2007 10:33 AM
To: java-user@lucene.apache.org
Subject: Re: Stop-words comparison in MoreLikeThis class in Lucene's
contrib/queries project

>>My application stores term vectors with the index

And those stored term vectors contain terms produced by your choice of
analyzer, no? 
Or are you saying that you have deliberately chosen to index the content
with a case-sensitive analyzer and that you want to supply stop words in a
case-insensitive fashion?



----- Original Message ----
From: Jong Kim <jkim@sitescape.com>
To: java-user@lucene.apache.org
Sent: Monday, 9 July, 2007 3:00:05 PM
Subject: RE: Stop-words comparison in MoreLikeThis class in Lucene's
contrib/queries project

My application stores term vectors with the index, and use that information
to implement more-like-this rather than tokenizing the original text using
an analyzer. Consequently the option of achieving the effect by specifying
different analyzer is no good for my case.

/Jong

-----Original Message-----
From: mark harwood [mailto:markharw00d@yahoo.co.uk]
Sent: Monday, July 09, 2007 5:01 AM
To: java-user@lucene.apache.org
Subject: Re: Stop-words comparison in MoreLikeThis class in Lucene's
contrib/queries project

>>I need this comparison to be case-insensitive

The choice of case-sensitivity (and preservation of punctuation, numbers etc
etc) is controlled by your choice of analyzer that you pass to MoreLikeThis.
If you want to ensure your list of stop words adheres to the same logic -
use the same analyzer to construct the set from wherever you store your stop
words e.g. a file. 
I don't imagine there should be a need to change the MoreLikeThis source.


Cheers
Mark



----- Original Message ----
From: Jong Kim <jkim@sitescape.com>
To: java-user@lucene.apache.org
Sent: Sunday, 8 July, 2007 10:12:08 PM
Subject: Stop-words comparison in MoreLikeThis class in Lucene's
contrib/queries project

Hi,
 
The MoreLikeThis class in Lucene's contrib/queries project performs noise
word filtering based on the case-sensitive comparison of the terms against
the user-supplied stopwords set. 
 
I need this comparison to be case-insensitive, but I don't see any way of
achieving it by extending this class. I would have created a subclass of
MoreLikeThis and override the isNoiseWord() method. However, the problem is
that, neither isNoiseWord() method nor the instance variables referenced
inside that method are declared protected. They are all private. Has anyone
solved this problem without modifying and building MoreLikeThis class
directly?
 
An alternative approach would be to supply a stopwords list containing all
variants of the stop words with all possible mixed cases. Needless to say,
that isn't likely to be a workable solution for many.
 
Ultimately it would be nice if those methods and variables would have been
made protected so that applications could override some of the default
behaviors without having to modify the class directly.
 
Any help would be appreciated.
 
Thanks
/Jong





      ___________________________________________________________
Yahoo! Answers - Got a question? Someone out there knows the answer. Try it
now.
http://uk.answers.yahoo.com/ 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org






      ___________________________________________________________
Yahoo! Mail is the world's favourite email. Don't settle for less, sign up
for your free account today
http://uk.rd.yahoo.com/evt=44106/*http://uk.docs.yahoo.com/mail/winter07.htm
l 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org






      ___________________________________________________________
Yahoo! Mail is the world's favourite email. Don't settle for less, sign up
for your free account today
http://uk.rd.yahoo.com/evt=44106/*http://uk.docs.yahoo.com/mail/winter07.htm
l 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29103-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 09 18:06:40 2007
Return-Path: <java-user-return-29103-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60794 invoked from network); 9 Jul 2007 18:06:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jul 2007 18:06:39 -0000
Received: (qmail 74078 invoked by uid 500); 9 Jul 2007 18:06:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74050 invoked by uid 500); 9 Jul 2007 18:06:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74039 invoked by uid 99); 9 Jul 2007 18:06:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jul 2007 11:06:33 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jul 2007 11:06:29 -0700
Received: by ug-out-1314.google.com with SMTP id c2so1297284ugf
        for <java-user@lucene.apache.org>; Mon, 09 Jul 2007 11:06:06 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=dqX+wQ0h/y7ctPcwvCMKBFAyzdJ1VN9SoHQHL2QabSQIKD9XJN33kfzVTp9T6z4Cqy7Oes+vdZBsZ2g0Iy0aiFDh1zhkW+A0e/2J+Q4AA1BkV65WV//c+Oy8Z9WAAoShcdL+lP13Z6H/I9yOOSUW1cWX/XFboqEFCSFBks1TceU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=RF+Ka2dFudYM5ULxKizg5N6d8W7B8ne/jE1c80xU5KlKa2qwvkXONL8TBjFBiBRN9/RFp27QX6ydlAz1iFMo/rl7BYrKSbWtL9WucMqw+fDEmMZPibCwr5BzqRFRQzP70BPIAtDWFMLFHSntZrK0rLyogo03/EUQDe29TdbbPjk=
Received: by 10.82.183.19 with SMTP id g19mr8723470buf.1184004365640;
        Mon, 09 Jul 2007 11:06:05 -0700 (PDT)
Received: by 10.82.167.12 with HTTP; Mon, 9 Jul 2007 11:06:05 -0700 (PDT)
Message-ID: <359a92830707091106g53181fd5o38aeefd1fb751c5c@mail.gmail.com>
Date: Mon, 9 Jul 2007 14:06:05 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Stop-words comparison in MoreLikeThis class in Lucene's contrib/queries project
In-Reply-To: <GW2lnhPOwHZfvaGwoKy0001fe0a@GW2.EXCHPROD.USA.NET>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_123208_7392949.1184004365568"
References: <346338.87603.qm@web26013.mail.ukl.yahoo.com>
	 <GW2lnhPOwHZfvaGwoKy0001fe0a@GW2.EXCHPROD.USA.NET>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_123208_7392949.1184004365568
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I have to disagree here. What you get when you try to encompass
more and more use cases is a bloated system that is not
performant.

This gets very close to  "make the engine solve my problems for me
out of the box". Which may be reasonable for an application that is
designed as an end-to-end solution, but is less than reasonable
for an *engine*. IMO.

Leaving that aside, how big is your index? Is it an option to index
the relevant data twice in two separate fields, one with and one without
stopwords and search the relevant fields based on whether it's an
admin search or not? Unless your current index is pretty big this
may be a better option than you think.

Alternatively, what *real* purpose does having the stop-words-included
form of search? Or is this just something somebody threw in without
real justification? I've spent waaaay too much time implementing some
"gosh that would be nice even though I don't know why" requirements,
so I'm suspicious <G>.... And I've actually had some success going
back to the product manager and telling her something like "Sure, we
can do that. But it'll take X people Y weeks. Is it worth that?". Of course
if she answers "yes", I still whimper. But at least the PM can make
an informed decision.

Best
Erick

On 7/9/07, Jong Kim <jkim@sitescape.com> wrote:
>
> Our requirement is simply that -
>
> 1. Do not throw away any information at indexing time - so we preserve
> case
> information and keep all tokens.
>
> 2. Search functionality is provided at two levels -
>
> 2.1 End User search - stop word filtering is done on the search terms, the
> same stop word list is used for MoreLikeThis function.
>
> 2.2 Admin search - this is more like raw index lookup than typical
> end-user
> search, can include stop words in the search terms.
>
> The point here is that, the case matters only for those words that should
> be
> included. For the words we do not want included in the end user search, we
> do not care about the case (which to me is quite reasonable).
>
> I still think it makes sense to re-factor the MoreLikeThis class so that
> it
> can serve a wide variety of use cases (however weird it may look) than
> trying to dictate the use cases. I think it is better approach to making
> the
> useful class even more useful.
>
> /Jong
>
> -----Original Message-----
> From: mark harwood [mailto:markharw00d@yahoo.co.uk]
> Sent: Monday, July 09, 2007 11:54 AM
> To: java-user@lucene.apache.org
> Subject: Re: Stop-words comparison in MoreLikeThis class in Lucene's
> contrib/queries project
>
> OK. I can see the logic that says it might be useful/convenient to filter
> case-sensitive search terms using a case-insensitive list of stop words.
>
> What seems slightly odd is that you want exactness in the choice of case
> yet
> are using an imprecise matching technique (MoreLikeThis) - effectively
> saying "I really care about the exact use of case but really don't care
> exactly which words match". Is this really the requirement? I would have
> thought in most cases the user would be willing to relax the exact case
> match requirement along with their choice of precisely which words are
> used
> to match. If this applies to your app you could run MoreLikeThis on the
> lower-cased version of the field in the index.
>
>
> Cheers
> Mark
>
>
> ----- Original Message ----
> From: Jong Kim <jkim@sitescape.com>
> To: java-user@lucene.apache.org
> Sent: Monday, 9 July, 2007 3:55:03 PM
> Subject: RE: Stop-words comparison in MoreLikeThis class in Lucene's
> contrib/queries project
>
> >>Or are you saying that you have deliberately chosen to index the
> >>content
> with a case-sensitive analyzer and that you want to supply stop words in a
> case-insensitive fashion?
>
> Correct.
> To be precise, we index each token up to twice - original token and its
> all-lowercase equivalent.
> Due to a product requirement, no token is thrown away at the time of
> indexing, that is, no stopwords filtering at indexing time.
> However, when executing MoreLikeThis feature, we do use a stopwords list
> (the fact that we indexed each and every word does not mean that they have
> to be included in the execution of MoreLikeThis), and we want the
> stopwords
> filtering to be case insensitive.
>
> /Jong
>
> -----Original Message-----
> From: mark harwood [mailto:markharw00d@yahoo.co.uk]
> Sent: Monday, July 09, 2007 10:33 AM
> To: java-user@lucene.apache.org
> Subject: Re: Stop-words comparison in MoreLikeThis class in Lucene's
> contrib/queries project
>
> >>My application stores term vectors with the index
>
> And those stored term vectors contain terms produced by your choice of
> analyzer, no?
> Or are you saying that you have deliberately chosen to index the content
> with a case-sensitive analyzer and that you want to supply stop words in a
> case-insensitive fashion?
>
>
>
> ----- Original Message ----
> From: Jong Kim <jkim@sitescape.com>
> To: java-user@lucene.apache.org
> Sent: Monday, 9 July, 2007 3:00:05 PM
> Subject: RE: Stop-words comparison in MoreLikeThis class in Lucene's
> contrib/queries project
>
> My application stores term vectors with the index, and use that
> information
> to implement more-like-this rather than tokenizing the original text using
> an analyzer. Consequently the option of achieving the effect by specifying
> different analyzer is no good for my case.
>
> /Jong
>
> -----Original Message-----
> From: mark harwood [mailto:markharw00d@yahoo.co.uk]
> Sent: Monday, July 09, 2007 5:01 AM
> To: java-user@lucene.apache.org
> Subject: Re: Stop-words comparison in MoreLikeThis class in Lucene's
> contrib/queries project
>
> >>I need this comparison to be case-insensitive
>
> The choice of case-sensitivity (and preservation of punctuation, numbers
> etc
> etc) is controlled by your choice of analyzer that you pass to
> MoreLikeThis.
> If you want to ensure your list of stop words adheres to the same logic -
> use the same analyzer to construct the set from wherever you store your
> stop
> words e.g. a file.
> I don't imagine there should be a need to change the MoreLikeThis source.
>
>
> Cheers
> Mark
>
>
>
> ----- Original Message ----
> From: Jong Kim <jkim@sitescape.com>
> To: java-user@lucene.apache.org
> Sent: Sunday, 8 July, 2007 10:12:08 PM
> Subject: Stop-words comparison in MoreLikeThis class in Lucene's
> contrib/queries project
>
> Hi,
>
> The MoreLikeThis class in Lucene's contrib/queries project performs noise
> word filtering based on the case-sensitive comparison of the terms against
> the user-supplied stopwords set.
>
> I need this comparison to be case-insensitive, but I don't see any way of
> achieving it by extending this class. I would have created a subclass of
> MoreLikeThis and override the isNoiseWord() method. However, the problem
> is
> that, neither isNoiseWord() method nor the instance variables referenced
> inside that method are declared protected. They are all private. Has
> anyone
> solved this problem without modifying and building MoreLikeThis class
> directly?
>
> An alternative approach would be to supply a stopwords list containing all
> variants of the stop words with all possible mixed cases. Needless to say,
> that isn't likely to be a workable solution for many.
>
> Ultimately it would be nice if those methods and variables would have been
> made protected so that applications could override some of the default
> behaviors without having to modify the class directly.
>
> Any help would be appreciated.
>
> Thanks
> /Jong
>
>
>
>
>
>       ___________________________________________________________
> Yahoo! Answers - Got a question? Someone out there knows the answer. Try
> it
> now.
> http://uk.answers.yahoo.com/
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
>
>       ___________________________________________________________
> Yahoo! Mail is the world's favourite email. Don't settle for less, sign up
> for your free account today
>
> http://uk.rd.yahoo.com/evt=44106/*http://uk.docs.yahoo.com/mail/winter07.htm
> l
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
>
>       ___________________________________________________________
> Yahoo! Mail is the world's favourite email. Don't settle for less, sign up
> for your free account today
>
> http://uk.rd.yahoo.com/evt=44106/*http://uk.docs.yahoo.com/mail/winter07.htm
> l
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_123208_7392949.1184004365568--

From java-user-return-29104-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 09 19:08:38 2007
Return-Path: <java-user-return-29104-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82251 invoked from network); 9 Jul 2007 19:08:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jul 2007 19:08:38 -0000
Received: (qmail 23225 invoked by uid 500); 9 Jul 2007 19:08:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23194 invoked by uid 500); 9 Jul 2007 19:08:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23171 invoked by uid 99); 9 Jul 2007 19:08:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jul 2007 12:08:33 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.67] (HELO web50402.mail.re2.yahoo.com) (206.190.38.67)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 09 Jul 2007 12:08:29 -0700
Received: (qmail 59450 invoked by uid 60001); 9 Jul 2007 19:08:07 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=m6QC5xk5Khlsp00V4sSTILUHSL3MLNWqJrk3dXjHt+Nzpzjc5tC0z8Ial2XA4tGPFJio2mtUzMjrqF+mOqzgOXnETzdhGT4VEdhHgeoCkEt5gHDNHLE59ST8rIuEwrJy9BO/pyq8o4zZSQAGaudDvEBH/1sP2F1Z4e649uBbkr0=;
X-YMail-OSG: DTSodYsVM1naO3Jaa28VonwjL5OGPS6jMbNynuinJxHTo2IVI5VSEl_WQIrTKnCPD2AaQBsaKXs06rnkAoQbJpg7OKkC9sRHGRcfMynr0Ebnc.jaZZ2MsokI1MUw6SwNA77DdBa3oyJM4N2_mGqHLtJ2
Received: from [85.15.6.242] by web50402.mail.re2.yahoo.com via HTTP; Mon, 09 Jul 2007 12:08:07 PDT
Date: Mon, 9 Jul 2007 12:08:07 -0700 (PDT)
From: Shaghayegh Sahebie <shaghayegh_sahebie@yahoo.com>
Subject: index compatibility of lucene and clucene
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1318574528-1184008087=:59271"
Content-Transfer-Encoding: 8bit
Message-ID: <859279.59271.qm@web50402.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1318574528-1184008087=:59271
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

hi all,
I wanted to use Lucene for indexing and CLucene for searching the same index. can I do that and which versions of them are compatible?

thanks in advance
Chagh

       
---------------------------------
Fussy? Opinionated? Impossible to please? Perfect.  Join Yahoo!'s user panel and lay it on us.
--0-1318574528-1184008087=:59271--

From java-user-return-29105-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 09 19:13:24 2007
Return-Path: <java-user-return-29105-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86091 invoked from network); 9 Jul 2007 19:13:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jul 2007 19:13:21 -0000
Received: (qmail 33320 invoked by uid 500); 9 Jul 2007 19:13:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32971 invoked by uid 500); 9 Jul 2007 19:13:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32960 invoked by uid 99); 9 Jul 2007 19:13:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jul 2007 12:13:16 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [217.12.11.79] (HELO smtp010.mail.ukl.yahoo.com) (217.12.11.79)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 09 Jul 2007 12:13:12 -0700
Received: (qmail 81471 invoked from network); 9 Jul 2007 19:12:50 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:X-YMail-OSG:Message-ID:Date:From:User-Agent:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding;
  b=CW8ra/TvGZcyDwxVF5VCkehXfdhAXjkPpNvJqviKLZBAUI+MCor9jHVrmqx59vbOFsLoPHhi+h7gOX+GF2nKm/Lgj7yE0T0XOFA14APOXZ/bLe1O5zhRGy66awHba37aCwBLMoOV8zf2OB2pC6qi/BkyWhrMYnRNjqbLn69Fh4k=  ;
Received: from unknown (HELO ?127.0.0.1?) (markharw00d@194.106.34.5 with plain)
  by smtp010.mail.ukl.yahoo.com with SMTP; 9 Jul 2007 19:12:50 -0000
X-YMail-OSG: iWM7J64VM1mudSoojSLz4YkLcUYn_9AcCA2DZCCbXTcotIyOXw5apzHmZqrHToJ8fTeK5MkRDHTm.a4tmwEu4ot_UBbp
Message-ID: <469288AE.1000806@yahoo.co.uk>
Date: Mon, 09 Jul 2007 20:12:46 +0100
From: markharw00d <markharw00d@yahoo.co.uk>
User-Agent: Thunderbird 1.5.0.12 (Windows/20070509)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Stop-words comparison in MoreLikeThis class in Lucene's contrib/queries
 project
References: <GW2lnhPOwHZfvaGwoKy0001fe0a@GW2.EXCHPROD.USA.NET>
In-Reply-To: <GW2lnhPOwHZfvaGwoKy0001fe0a@GW2.EXCHPROD.USA.NET>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

 >>the case matters only for those words that should be included.

Jong, just want to check we're on the same page - you do know 
MoreLikeThis has a kind of automatic Stop-Wording built in , yes?
MoreLikeThis looks at the document frequency of all terms in the "this" 
text you provide and only selects a shortlist (up to maxQueryTerms) of 
the rarer words. As such, users (admin or otherwise) surrender precise 
control over what terms are used, hence my earlier point "does case 
really matter in this 'inexact' scenario?" and can you use the 
lower-case version of the field you said you already create?

Cheers
Mark




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29106-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 09 19:45:55 2007
Return-Path: <java-user-return-29106-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20354 invoked from network); 9 Jul 2007 19:45:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jul 2007 19:45:53 -0000
Received: (qmail 95632 invoked by uid 500); 9 Jul 2007 19:45:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95576 invoked by uid 500); 9 Jul 2007 19:45:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95530 invoked by uid 99); 9 Jul 2007 19:45:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jul 2007 12:45:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [165.212.64.21] (HELO gateout01.mbox.net) (165.212.64.21)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jul 2007 12:45:40 -0700
Received: from gateout01.mbox.net (gateout01.mbox.net [165.212.64.21])
	by gateout01.mbox.net (Postfix) with ESMTP id AC11E1638
	for <java-user@lucene.apache.org>; Mon,  9 Jul 2007 19:45:19 +0000 (GMT)
Received: from GW1.EXCHPROD.USA.NET [165.212.116.254] by gateout01.mbox.net via smtad (C8.MAIN.3.34P) 
	with ESMTP id XID994LgiTtT9959Xo1; Mon, 09 Jul 2007 19:45:19 -0000
X-USANET-Source: 165.212.116.254 IN   jkim@sitescape.com GW1.EXCHPROD.USA.NET
X-USANET-MsgId: XID994LgiTtT9959Xo1
Received: from PEACE ([216.195.213.27]) by GW1.EXCHPROD.USA.NET with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 9 Jul 2007 13:43:31 -0600
From: "Jong Kim" <jkim@sitescape.com>
To: <java-user@lucene.apache.org>
Subject: RE: Stop-words comparison in MoreLikeThis class in Lucene's contrib/queries project
Date: Mon, 9 Jul 2007 15:45:27 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
Thread-Index: AcfCXPU0aERWtubKTEiaT756Y8qv8AAA0wwg
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
In-Reply-To: <469288AE.1000806@yahoo.co.uk>
Message-ID: <GW1RsjNti54zvb3Qjza00020c5b@GW1.EXCHPROD.USA.NET>
X-OriginalArrivalTime: 09 Jul 2007 19:43:31.0438 (UTC) FILETIME=[6DE048E0:01C7C261]
X-Virus-Checked: Checked by ClamAV on apache.org

Mark,

I understand your point. 
However, we do not maintain a separate field for the lower-case version of
the words. 
Instead we index them twice at the same position within the same field,
which allows us to provide case-exact match for search queries containing
upper case characters, but case-insensitive match for search queries given
in all low cases.
So I'm afraid I can't use the technique you recommend.

/Jong

-----Original Message-----
From: markharw00d [mailto:markharw00d@yahoo.co.uk] 
Sent: Monday, July 09, 2007 3:13 PM
To: java-user@lucene.apache.org
Subject: Re: Stop-words comparison in MoreLikeThis class in Lucene's
contrib/queries project

 >>the case matters only for those words that should be included.

Jong, just want to check we're on the same page - you do know MoreLikeThis
has a kind of automatic Stop-Wording built in , yes?
MoreLikeThis looks at the document frequency of all terms in the "this" 
text you provide and only selects a shortlist (up to maxQueryTerms) of the
rarer words. As such, users (admin or otherwise) surrender precise control
over what terms are used, hence my earlier point "does case really matter in
this 'inexact' scenario?" and can you use the lower-case version of the
field you said you already create?

Cheers
Mark




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29107-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 09 19:59:49 2007
Return-Path: <java-user-return-29107-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29541 invoked from network); 9 Jul 2007 19:59:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jul 2007 19:59:48 -0000
Received: (qmail 29249 invoked by uid 500); 9 Jul 2007 19:59:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29217 invoked by uid 500); 9 Jul 2007 19:59:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29206 invoked by uid 99); 9 Jul 2007 19:59:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jul 2007 12:59:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [217.12.11.79] (HELO smtp010.mail.ukl.yahoo.com) (217.12.11.79)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 09 Jul 2007 12:59:40 -0700
Received: (qmail 2662 invoked from network); 9 Jul 2007 19:59:18 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:X-YMail-OSG:Message-ID:Date:From:User-Agent:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding;
  b=ACmWzNQVL3rRejeXZKcTRBgjsqZGkzkrpu1BGQoHa8W6p7X4T/a/NDo4xZNt08d3TIda3IZM6st4cNl4CXVvbwSSrUynSHmzvtt8/MN10t1vNTRU5Acf8i6R7umYglnromDqIFUMlgUc+ZFKC98GyBTbcaYPGQJbdrfu56ujY8w=  ;
Received: from unknown (HELO ?127.0.0.1?) (markharw00d@194.106.34.5 with plain)
  by smtp010.mail.ukl.yahoo.com with SMTP; 9 Jul 2007 19:59:18 -0000
X-YMail-OSG: zEvCBnIVM1mj2ZxLu4GYvZSYOjvUmo1nH7bTBP0kCI0cVKjuWg6EdRCUi..927Q_64Hhi947Nw--
Message-ID: <46929393.10107@yahoo.co.uk>
Date: Mon, 09 Jul 2007 20:59:15 +0100
From: markharw00d <markharw00d@yahoo.co.uk>
User-Agent: Thunderbird 1.5.0.12 (Windows/20070509)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Stop-words comparison in MoreLikeThis class in Lucene's contrib/queries
 project
References: <GW1RsjNti54zvb3Qjza00020c5b@GW1.EXCHPROD.USA.NET>
In-Reply-To: <GW1RsjNti54zvb3Qjza00020c5b@GW1.EXCHPROD.USA.NET>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

 >>So I'm afraid I can't use the technique you recommend.

ah right - so the TermVector you use from the index will return mixed 
and lower case versions of the same text.
One point to note - this would mean that of the 25 or so top terms 
selected by MoreLikeThis for querying there is a reasonable chance that 
you would be needlessly selecting both mixed and lower case versions of 
the same term. Given such duplication any match on a mixed case term 
will obviously also have a match on the lower-cased version so you are 
likely to have redundant query terms both needlessly slowing down your 
searches and limiting the variety of terms that make the cut into the 
top 25.

Cheers
Mark


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29108-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 09 20:42:01 2007
Return-Path: <java-user-return-29108-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52855 invoked from network); 9 Jul 2007 20:42:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jul 2007 20:42:00 -0000
Received: (qmail 4482 invoked by uid 500); 9 Jul 2007 20:41:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3467 invoked by uid 500); 9 Jul 2007 20:41:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3456 invoked by uid 99); 9 Jul 2007 20:41:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jul 2007 13:41:52 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of amit.hanchinamani@gmail.com designates 209.85.146.182 as permitted sender)
Received: from [209.85.146.182] (HELO wa-out-1112.google.com) (209.85.146.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jul 2007 13:41:49 -0700
Received: by wa-out-1112.google.com with SMTP id j40so1605868wah
        for <java-user@lucene.apache.org>; Mon, 09 Jul 2007 13:41:28 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=iUYGh+30+O0wT+CGhoA5HqdRjiTMrkfVkZibFAtsEPmnlpAv5T2Rg72x/3WL2B/kG83Kf8EQ4c/m+sb8vhiPQVxMIMebqo12+0a1BjYimww1remVcQG3v34V883c9nx/enWSjeDVys64tI8T1qo2xhlNEg7a71sBLgnRwL1dNqQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=aSLgV/BEl4FOx/avQMMyHALV6GFBekJPJKyOg6amHNqsgUkLvk4L1/TydyQYDDYyrW6WYm1/ByukmI2/ZnDjs7XYMkcKKVOLEtgJmnG7gNJXHQBb/8fCtGWhPgPguBnz6ljG9CzsRAObOXU0tVipOPK/vEWVaBZg/5lMzAQ/Rl8=
Received: by 10.114.169.2 with SMTP id r2mr3488830wae.1184013687802;
        Mon, 09 Jul 2007 13:41:27 -0700 (PDT)
Received: by 10.114.179.14 with HTTP; Mon, 9 Jul 2007 13:41:27 -0700 (PDT)
Message-ID: <49923b590707091341v8f07579l33f1170eb9773064@mail.gmail.com>
Date: Mon, 9 Jul 2007 22:41:27 +0200
From: Amit <amit.hanchinamani@gmail.com>
To: java-user@lucene.apache.org
Subject: Cannot get Field.Text to work
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_182194_33484983.1184013687759"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_182194_33484983.1184013687759
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi

I am new to Lucene and trying out the example code. But when I try to insert
values using Field.Text the compiler does not recognize the Text as a method
of Field. The code looks like this

contactDocument.add(Field.Text("name", contact.getName()));

I wanted to know if the version 2.2 does not have this method anymore, or do
I have to access it in another way.
Any help appreciated.


Regards,

Amit





<a href="http://www.spreadfirefox.com/?q=affiliates&amp;id=111787&amp;t=1">Get
Firefox!</a>

------=_Part_182194_33484983.1184013687759--

From java-user-return-29109-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 09 21:15:55 2007
Return-Path: <java-user-return-29109-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69565 invoked from network); 9 Jul 2007 21:15:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jul 2007 21:15:54 -0000
Received: (qmail 64366 invoked by uid 500); 9 Jul 2007 21:15:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64303 invoked by uid 500); 9 Jul 2007 21:15:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64254 invoked by uid 99); 9 Jul 2007 21:15:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jul 2007 14:15:32 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jul 2007 14:15:25 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1I80ZV-00070V-1V
	for java-user@lucene.apache.org; Mon, 09 Jul 2007 14:15:05 -0700
Message-ID: <11510351.post@talk.nabble.com>
Date: Mon, 9 Jul 2007 14:15:04 -0700 (PDT)
From: muraalee <muraalee@gmail.com>
To: java-user@lucene.apache.org
Subject: Lucene RAM Directory doesn't work for Index Size > 8 GB
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: muraalee@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

We are facing a strange problem with RAMDirectory for indices greater than 8
GB. We have indexed around 6.5 million lucene documents and the index size
is around 8 GB. Below is the contents of Index Directory.

2236964197  _1x.fdt
   51811488  _1x.fdx
           293  _1x.fnm
2234929832  _1x.frq
 369156856  _1x.nrm
2746607717  _1x.prx
     4979893  _1x.tii
 389652682  _1x.tis
            42  segments_3x
            20  segments.gen

We could open this using FSDirectory and it seems to be working fine. But if
we switch to RAMDirectory, we get the following exception.

- We are using Lucene 2.2.0 currently 

Caused by: java.lang.ArrayIndexOutOfBoundsException: -369      
        at
org.apache.lucene.store.RAMInputStream.readByte(RAMInputStream.java:64)
        at org.apache.lucene.store.IndexInput.readVLong(IndexInput.java:77)      
        at
org.apache.lucene.index.MultiLevelSkipListReader.loadSkipLevels(MultiLevelSkipListReader.java:194)    
        at
org.apache.lucene.index.MultiLevelSkipListReader.skipTo(MultiLevelSkipListReader.java:97)      
        at
org.apache.lucene.index.SegmentTermDocs.skipTo(SegmentTermDocs.java:164)                
        at
org.apache.lucene.search.PhrasePositions.skipTo(PhrasePositions.java:52)      
        at
org.apache.lucene.search.PhraseScorer.doNext(PhraseScorer.java:88)      
        at org.apache.lucene.search.PhraseScorer.next(PhraseScorer.java:81)      
        at
org.apache.lucene.search.DisjunctionSumScorer.initScorerDocQueue(DisjunctionSumScorer.java:105)  
        at
org.apache.lucene.search.DisjunctionSumScorer.next(DisjunctionSumScorer.java:144)    
        at
org.apache.lucene.search.BooleanScorer2.score(BooleanScorer2.java:327)          
        at
org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:146)        
        at org.apache.lucene.search.Searcher.search(Searcher.java:118)        
        at org.apache.lucene.search.Searcher.search(Searcher.java:97)    
        at
org.apache.lucene.search.QueryWrapperFilter.bits(QueryWrapperFilter.java:50)  


Any help to address this problem is greatly appreciated.


thanks
Murali V 
-- 
View this message in context: http://www.nabble.com/Lucene-RAM-Directory-doesn%27t-work-for-Index-Size-%3E-8-GB-tf4052298.html#a11510351
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29110-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 09 21:19:12 2007
Return-Path: <java-user-return-29110-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70614 invoked from network); 9 Jul 2007 21:19:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jul 2007 21:19:10 -0000
Received: (qmail 76552 invoked by uid 500); 9 Jul 2007 21:19:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76514 invoked by uid 500); 9 Jul 2007 21:19:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76503 invoked by uid 99); 9 Jul 2007 21:19:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jul 2007 14:19:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.230.18.67] (HELO mx5.syr.edu) (128.230.18.67)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jul 2007 14:19:02 -0700
Received: from [128.230.84.100] (ist-h335-d03.syr.edu [128.230.84.100])
	(authenticated bits=0)
	by mx5.syr.edu (8.13.7/8.13.7) with ESMTP id l69LIe4O014322
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Mon, 9 Jul 2007 17:18:41 -0400
Message-ID: <4692A5B8.2050306@syr.edu>
Date: Mon, 09 Jul 2007 17:16:40 -0400
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5.0.4-GroupWise-IMAP-fix (Windows/20060619)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Search that supports all valid characters in a Unix filename
References: <19499046.371183956721704.JavaMail.root@Frodo>
In-Reply-To: <19499046.371183956721704.JavaMail.root@Frodo>
X-Enigmail-Version: 0.94.3.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit
X-Scanner: InterScan AntiVirus for Sendmail
X-Virus-Scanned: by amavisd-new
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Ed,

Ed Murray wrote:
> Could
> someone let me know the best Analyzer to use to get an exact match on a Unix
> filename when it is inserted into an untokened field. 
> 
> Filenames
> obviously contain spaces and forward slashes along with other characters. I am using
> a WhitespaceAnalyzer but when the query is parsed it is
> chopped into different keywords as such: 
> 
> I have
> tried several different Analyzers but I cant seem to get what I want.
> 
> Filename:
> /repository/Administration/780 IT Support/filegate.txt 
> Query:URL:/repository/Administration/780
> URL:IT URL:Support/filegate.txt

The usual way to enable this is using PerFieldAnalyzerWrapper, with
KeywordAnalyzer on the Unix filename field.

Steve

-- 
Steve Rowe
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29111-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 09 22:17:12 2007
Return-Path: <java-user-return-29111-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91808 invoked from network); 9 Jul 2007 22:17:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jul 2007 22:17:10 -0000
Received: (qmail 99692 invoked by uid 500); 9 Jul 2007 22:17:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99655 invoked by uid 500); 9 Jul 2007 22:17:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99627 invoked by uid 99); 9 Jul 2007 22:17:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jul 2007 15:17:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.39.202] (HELO web50311.mail.re2.yahoo.com) (206.190.39.202)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 09 Jul 2007 15:16:59 -0700
Received: (qmail 9285 invoked by uid 60001); 9 Jul 2007 22:16:37 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=dSXS9/rZNmTMEAFAfdgLIEUIounpyZpKoTr9CGR/3Pc0uLGWQzXuTWc8EY3JBPaKfJ2ZVmWZ9SoZQQoA12baqmPDSUuAkXFuUWa6MJESOp/i0WUcjnCOon3BDszNe2Nb1PftUjjdrzxxiiUjzYYNYrJdCvgG5k3kneZxAKk/E1U=;
X-YMail-OSG: iD3jWLIVM1mPOFV0Ezzxl3Yr7q2ODBJgbMSDp9TbbfdP7YwTYjqQo0h3czwmkhB0qhudOXKSLFA5xuQTsu.k0zgAN2PUaTHMaxGpnmtNnPS8gYGTxRHJps8HuHLU1TePLnT.r_wYpV3JJC.5J_CbgXL2xw--
Received: from [83.131.149.21] by web50311.mail.re2.yahoo.com via HTTP; Mon, 09 Jul 2007 15:16:37 PDT
X-Mailer: YahooMailRC/651.41 YahooMailWebService/0.7.41.16
Date: Mon, 9 Jul 2007 15:16:37 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Cannot get Field.Text to work
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <718766.8363.qm@web50311.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Amit,

Field.Text method is long gone from Lucene.  I think that was in version 1.4.3 of Lucene, maybe 1.9*, but we are in 2.* now.
The place to look at the new Field API is here:
http://lucene.apache.org/java/2_2_0/api/org/apache/lucene/document/Field.html

Otis
 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share

----- Original Message ----
From: Amit <amit.hanchinamani@gmail.com>
To: java-user@lucene.apache.org
Sent: Monday, July 9, 2007 10:41:27 PM
Subject: Cannot get Field.Text to work

Hi

I am new to Lucene and trying out the example code. But when I try to insert
values using Field.Text the compiler does not recognize the Text as a method
of Field. The code looks like this

contactDocument.add(Field.Text("name", contact.getName()));

I wanted to know if the version 2.2 does not have this method anymore, or do
I have to access it in another way.
Any help appreciated.


Regards,

Amit





<a href="http://www.spreadfirefox.com/?q=affiliates&amp;id=111787&amp;t=1">Get
Firefox!</a>




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29112-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 09 22:20:22 2007
Return-Path: <java-user-return-29112-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93549 invoked from network); 9 Jul 2007 22:20:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jul 2007 22:20:21 -0000
Received: (qmail 4903 invoked by uid 500); 9 Jul 2007 22:20:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4879 invoked by uid 500); 9 Jul 2007 22:20:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4864 invoked by uid 99); 9 Jul 2007 22:20:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jul 2007 15:20:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.58] (HELO web50304.mail.re2.yahoo.com) (206.190.38.58)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 09 Jul 2007 15:20:11 -0700
Received: (qmail 14935 invoked by uid 60001); 9 Jul 2007 22:19:49 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=PJXvWtnKmDlcTvjUaqwbxVdGYPJrvHAFt6K+KyyDJzuj8WZTCV5GYsVzBIPk1UISb6KTqqtYTzSBti6chdBi680wWbXSCRpsHsQrTDyqBpJyFfut8mDfmX07eOqyLtBzWFxJWYV1YawNk2Ykzt+leJyDee4r+AvDYf5c4jxUQXE=;
X-YMail-OSG: jTHp1d0VM1lAIO.1BWM6SkpVP9C.OVNxozmHNagLFNhjFb7PPAgMAsOm_jHxeyA5fA--
Received: from [83.131.149.21] by web50304.mail.re2.yahoo.com via HTTP; Mon, 09 Jul 2007 15:19:49 PDT
X-Mailer: YahooMailRC/651.41 YahooMailWebService/0.7.41.16
Date: Mon, 9 Jul 2007 15:19:49 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Search that supports all valid characters in a Unix filename
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-7
Content-Transfer-Encoding: quoted-printable
Message-ID: <807409.13086.qm@web50304.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I am not sure if I understood you 100%, but it sounds like you might be loo=
king for KeywordAnalyzer:=0Ahttp://lucene.apache.org/java/2_2_0/api/org/apa=
che/lucene/analysis/KeywordAnalyzer.html=0A=0AOtis=0A . . . . . . . . . . .=
 . . . . . . . . . . . . . . . . . . .=0ASimpy -- http://www.simpy.com/  - =
 Tag  -  Search  -  Share=0A=0A----- Original Message ----=0AFrom: Ed Murra=
y <mail@avenuedesign.net>=0ATo: java-user@lucene.apache.org=0ASent: Monday,=
 July 9, 2007 6:52:01 AM=0ASubject: Search that supports all valid characte=
rs in a Unix filename=0A=0A=0A=0ACould=0Asomeone let me know the best Analy=
zer to use to get an exact match on a Unix=0Afilename when it is inserted i=
nto an untokened field. =0A=0A=0AFilenames=0Aobviously contain spaces and f=
orward slashes along with other characters. I am using=0Aa WhitespaceAnalyz=
er but when the query is parsed it is=0Achopped into different keywords as =
such: =0A=0A=0AI have=0Atried several different Analyzers but I can=A2t see=
m to get what I want.=0A=0A=0A=0A=0A=0A=0AFilename:=0A/repository/Administr=
ation/780 IT Support/filegate.txt =0AQuery:URL:/repository/Administration/7=
80=0AURL:IT URL:Support/filegate.txt=0A=0A=0A=0A=0A=0A=0AI am=0Aassuming th=
at this would be in common usage with Lucene but there does not seem=0Ato b=
e an easy way to do it.=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29113-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 10 03:39:32 2007
Return-Path: <java-user-return-29113-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23748 invoked from network); 10 Jul 2007 03:39:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jul 2007 03:39:31 -0000
Received: (qmail 10791 invoked by uid 500); 10 Jul 2007 03:39:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10275 invoked by uid 500); 10 Jul 2007 03:39:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10264 invoked by uid 99); 10 Jul 2007 03:39:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jul 2007 20:39:26 -0700
X-ASF-Spam-Status: No, hits=3.5 required=10.0
	tests=HTML_MESSAGE,MIME_BASE64_TEXT,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of chee.wu@gmail.com designates 64.233.162.233 as permitted sender)
Received: from [64.233.162.233] (HELO nz-out-0506.google.com) (64.233.162.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jul 2007 20:39:22 -0700
Received: by nz-out-0506.google.com with SMTP id i28so775921nzi
        for <java-user@lucene.apache.org>; Mon, 09 Jul 2007 20:39:02 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:from:to:subject:date:mime-version:content-type:x-priority:x-msmail-priority:x-mailer:x-mimeole;
        b=cieFHCcKIOVtQxNYn6mvR7Co0o+MJxWc4XwGwXGeqoQZAe1NM7OuMahJ0P+AS6B/cGfe3tU+ox1bODUDgUuzf6bSyBr95JuXcIIey6PlhrvX+9hFlTkylNHGbd5jlmFRyBIlvdIgFbIj44eb/wbmfzFQrMsBv+lFg6Mf36sEDhE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:from:to:subject:date:mime-version:content-type:x-priority:x-msmail-priority:x-mailer:x-mimeole;
        b=eLYn7zCUISK9sWcKBVpBbxVX+SmjTPLk150RgzLE7mN3Isb6PmsIwO5rndm6RhMF3tvV2oUBlc+/S7+Yhbx76+kgQBXCFttKfiZsmJJnVxQL+J48QTIwF2BFSbvckppcOCUhvowdFfEAoMXj5xkR6sVNvWrHPLrf7o4qIKORooo=
Received: by 10.114.132.5 with SMTP id f5mr3737469wad.1184038741158;
        Mon, 09 Jul 2007 20:39:01 -0700 (PDT)
Received: from D7B19P1X ( [222.131.255.106])
        by mx.google.com with ESMTP id c26sm21807waa.2007.07.09.20.38.56
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 09 Jul 2007 20:39:00 -0700 (PDT)
Message-ID: <002b01c7c2a3$d8366610$4fe0fea9@D7B19P1X>
From: "qi wu" <chee.wu@gmail.com>
To: <java-user@lucene.apache.org>
Subject: who has used mutual information on millions of doc?
Date: Tue, 10 Jul 2007 11:38:44 +0800
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0026_01C7C2E6.DF302710"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0026_01C7C2E6.DF302710
Content-Type: text/plain;
	charset="Windows-1252"
Content-Transfer-Encoding: base64

SGksDQogSSBhbSB0cnlpbmcgdG8gdXNlIG11dHVhbCBpbmZvcm1hdGlvbiB0byBmaW5kIHRoZSBj
b3JyZWxhdGlvbiBiZXR3ZWVuIGRpZmZlcmVudCB0ZXJtcyBpbiBkb2N1bWVudHMuIEJ1dCBmb3Ig
bWlsbGlvbnMgb2YgZG9jdW1lbnRzIHRoZSBzcGVlZCBpcyB0b28gc2xvdyB0byBjYWxjdWxhdGUg
dGhlIG11dHVhbCBpbmZvcm1hdGlvbi4gQW55IGJvZHkgaGF2ZSBidWlsZCBhIGhpZ2ggcGVyZm9y
bWFuY2Ugc29sdXRpb25zIGZvciB0aGlzID8NCkkgZm91bmQgdGhlIGFydGljbGUgYmVsb3cgaW4g
dGhlIGZvcm1lciBtYWlsIGxpc3QsIGJ1dCBubyBkZXRhaWwgaW5mb3JtYXRpb24gcHJvdmlkZWQ6
DQpodHRwOi8vbWFpbC1hcmNoaXZlcy5hcGFjaGUub3JnL21vZF9tYm94L2x1Y2VuZS1qYXZhLWRl
di8yMDA0MDcubWJveC8lM0M0MEVDMDk1Mi4zMDYwODAxQGRldGVnby1zb2Z0d2FyZS5kZSUzRQ0K
DQpBbnkgaGludHMgcGFwZXJzIG9yIGV2ZW4gc29tZSBrZXkgd29yZHMgdG8gaGVscCBtZSB0byBz
ZWFyY2ggaW4gR29vZ2xlIGFyZSB3ZWxjb21lISBNYW55IHRoYW5rcyBhbmQgYm93ISENCg0KVGhh
bmtzDQotUWk=

------=_NextPart_000_0026_01C7C2E6.DF302710--


From java-user-return-29114-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 10 06:29:28 2007
Return-Path: <java-user-return-29114-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61948 invoked from network); 10 Jul 2007 06:29:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jul 2007 06:29:27 -0000
Received: (qmail 15107 invoked by uid 500); 10 Jul 2007 06:29:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15071 invoked by uid 500); 10 Jul 2007 06:29:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15056 invoked by uid 99); 10 Jul 2007 06:29:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jul 2007 23:29:22 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [64.233.162.227] (HELO nz-out-0506.google.com) (64.233.162.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jul 2007 23:29:18 -0700
Received: by nz-out-0506.google.com with SMTP id i28so801636nzi
        for <java-user@lucene.apache.org>; Mon, 09 Jul 2007 23:28:57 -0700 (PDT)
Received: by 10.142.115.10 with SMTP id n10mr291736wfc.1184048936905;
        Mon, 09 Jul 2007 23:28:56 -0700 (PDT)
Received: by 10.142.99.5 with HTTP; Mon, 9 Jul 2007 23:28:56 -0700 (PDT)
Message-ID: <7cbc67ff0707092328w70841b48g930cdd68c78108d8@mail.gmail.com>
Date: Tue, 10 Jul 2007 11:58:56 +0530
From: "Harini Raghavan" <harini.raghavan@insideview.com>
To: java-user@lucene.apache.org
Subject: unused tmp fdt files in index
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_128224_26202396.1184048936884"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_128224_26202396.1184048936884
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi All,

I have a large lucene index of size 60G. We have had Out Of Memory issues a
few times in the past due to which the indexing had got interrupted. This
has resulted in a lot of .fnm, .fdt,.tmp files which don't get removed even
through optimizing the index. We have data for last 90 days in the lucene
index, but some of these index related files are older than 6-7 months. My
gut feeling is they are not really used internally by the IndexSearcher. Can
I go ahead and delete those older files manually?

Thanks,
Harini

------=_Part_128224_26202396.1184048936884--

From java-user-return-29115-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 10 06:40:53 2007
Return-Path: <java-user-return-29115-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64104 invoked from network); 10 Jul 2007 06:40:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jul 2007 06:40:52 -0000
Received: (qmail 38209 invoked by uid 500); 10 Jul 2007 06:40:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38164 invoked by uid 500); 10 Jul 2007 06:40:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38153 invoked by uid 99); 10 Jul 2007 06:40:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jul 2007 23:40:47 -0700
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=FROM_HAS_ULINE_NUMS,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.222.32.20] (HELO mexforward.lss.emc.com) (128.222.32.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jul 2007 23:40:43 -0700
Received: from mailhub.lss.emc.com (uraeus.lss.emc.com [10.254.144.14])
	by mexforward.lss.emc.com (Switch-3.2.5/Switch-3.1.7) with ESMTP id l6A6eLNA006052
	for <java-user@lucene.apache.org>; Tue, 10 Jul 2007 02:40:21 -0400 (EDT)
Received: from corpussmtp3.corp.emc.com (corpussmtp3.corp.emc.com [10.254.64.53])
	by mailhub.lss.emc.com (Switch-3.2.5/Switch-3.1.7) with ESMTP id l6A6dNjj009780
	for <java-user@lucene.apache.org>; Tue, 10 Jul 2007 02:40:19 -0400 (EDT)
From: Liu_Andy2@emc.com
Received: from CORPUSMX10B.corp.emc.com ([128.221.14.93]) by corpussmtp3.corp.emc.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 10 Jul 2007 02:39:58 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: unused tmp fdt files in index
Date: Tue, 10 Jul 2007 02:38:44 -0400
Message-ID: <F3B3254741B1404D92215D80C451DE84018C1A7F@CORPUSMX10B.corp.emc.com>
In-Reply-To: <7cbc67ff0707092328w70841b48g930cdd68c78108d8@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: unused tmp fdt files in index
Thread-Index: AcfCu62wK63TJN2dQU2UllZzFzrULwAAOIvA
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 10 Jul 2007 06:39:58.0357 (UTC) FILETIME=[224F2C50:01C7C2BD]
X-PMX-Version: 4.7.1.128075, Antispam-Engine: 2.5.1.298604, Antispam-Data: 2007.7.6.21134
X-PerlMx-Spam: Gauge=, SPAM=1%, Reason='EMC_FROM_0+ -3, NO_REAL_NAME 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __IMS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0'
X-Virus-Checked: Checked by ClamAV on apache.org

You can use Luke to open your index.=20
In the Files tab, if some files are shown as deletable, it is should be
safe to delete these files.
Please backup your data before testing.

Andy


-----Original Message-----
From: Harini Raghavan [mailto:harini.raghavan@insideview.com]=20
Sent: Tuesday, July 10, 2007 2:29 PM
To: java-user@lucene.apache.org
Subject: unused tmp fdt files in index

Hi All,

I have a large lucene index of size 60G. We have had Out Of Memory
issues a
few times in the past due to which the indexing had got interrupted.
This
has resulted in a lot of .fnm, .fdt,.tmp files which don't get removed
even
through optimizing the index. We have data for last 90 days in the
lucene
index, but some of these index related files are older than 6-7 months.
My
gut feeling is they are not really used internally by the IndexSearcher.
Can
I go ahead and delete those older files manually?

Thanks,
Harini

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29116-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 10 07:34:46 2007
Return-Path: <java-user-return-29116-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84304 invoked from network); 10 Jul 2007 07:34:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jul 2007 07:34:45 -0000
Received: (qmail 35733 invoked by uid 500); 10 Jul 2007 07:34:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35693 invoked by uid 500); 10 Jul 2007 07:34:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35682 invoked by uid 99); 10 Jul 2007 07:34:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jul 2007 00:34:39 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [64.233.162.224] (HELO nz-out-0506.google.com) (64.233.162.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jul 2007 00:34:36 -0700
Received: by nz-out-0506.google.com with SMTP id i28so812863nzi
        for <java-user@lucene.apache.org>; Tue, 10 Jul 2007 00:34:14 -0700 (PDT)
Received: by 10.142.97.20 with SMTP id u20mr294007wfb.1184052854344;
        Tue, 10 Jul 2007 00:34:14 -0700 (PDT)
Received: by 10.142.99.5 with HTTP; Tue, 10 Jul 2007 00:34:14 -0700 (PDT)
Message-ID: <7cbc67ff0707100034v7f3a35e1v540a6838d27516d9@mail.gmail.com>
Date: Tue, 10 Jul 2007 13:04:14 +0530
From: "Harini Raghavan" <harini.raghavan@insideview.com>
To: java-user@lucene.apache.org
Subject: Re: unused tmp fdt files in index
In-Reply-To: <F3B3254741B1404D92215D80C451DE84018C1A7F@CORPUSMX10B.corp.emc.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_128559_30607756.1184052854326"
References: <7cbc67ff0707092328w70841b48g930cdd68c78108d8@mail.gmail.com>
	 <F3B3254741B1404D92215D80C451DE84018C1A7F@CORPUSMX10B.corp.emc.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_128559_30607756.1184052854326
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I need to remove these on the production server. Luke can be used only on
windows right? Can I use Lucli for the same purpose?

Thanks,
Harini

On 7/10/07, Liu_Andy2@emc.com <Liu_Andy2@emc.com> wrote:
>
> You can use Luke to open your index.
> In the Files tab, if some files are shown as deletable, it is should be
> safe to delete these files.
> Please backup your data before testing.
>
> Andy
>
>
> -----Original Message-----
> From: Harini Raghavan [mailto:harini.raghavan@insideview.com]
> Sent: Tuesday, July 10, 2007 2:29 PM
> To: java-user@lucene.apache.org
> Subject: unused tmp fdt files in index
>
> Hi All,
>
> I have a large lucene index of size 60G. We have had Out Of Memory
> issues a
> few times in the past due to which the indexing had got interrupted.
> This
> has resulted in a lot of .fnm, .fdt,.tmp files which don't get removed
> even
> through optimizing the index. We have data for last 90 days in the
> lucene
> index, but some of these index related files are older than 6-7 months.
> My
> gut feeling is they are not really used internally by the IndexSearcher.
> Can
> I go ahead and delete those older files manually?
>
> Thanks,
> Harini
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_128559_30607756.1184052854326--

From java-user-return-29117-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 10 08:19:38 2007
Return-Path: <java-user-return-29117-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13460 invoked from network); 10 Jul 2007 08:19:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jul 2007 08:19:37 -0000
Received: (qmail 22131 invoked by uid 500); 10 Jul 2007 08:19:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22089 invoked by uid 500); 10 Jul 2007 08:19:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22073 invoked by uid 99); 10 Jul 2007 08:19:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jul 2007 01:19:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [219.118.71.125] (HELO mail.kai.ad.jp) (219.118.71.125)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jul 2007 01:19:27 -0700
Received: from mail.kai.ad.jp by mail.kai.ad.jp
          via smtpd (for herse.apache.org [140.211.11.133]) with ESMTP; Tue, 10 Jul 2007 17:19:06 +0900
Received: from linkclub-staff.com [219.118.70.66] by mail.kai.ad.jp
  (SMTPD32-7.07) id A0F9149B0032; Tue, 10 Jul 2007 17:19:05 +0900
From: anson <anson@linkclub-staff.com>
To: java-user@lucene.apache.org
Subject: How to use "point-in-time" feature
Date: Tue, 10 Jul 2007 17:17:58 +0900
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Mailer: HidemaruMail 4.59 (WinNT,501)
Message-Id: <27C7C2CAD357DBanson@linkclub-staff.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

I saw the new feature "point-in-time" on Lucene2.2.
If I upgrade my web-app from Lucene2.0 to Lucene2.2, I want to do that 
my web-app can access the INDEX over NFS , so what should I do to change 
my old web-app.

Could anyone show me some samples or your opinions.
(i.e. what difference on making index, searching between Lucene2.0 and 
Lucene2.2)

Best regards
Anson

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29118-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 10 09:48:37 2007
Return-Path: <java-user-return-29118-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54726 invoked from network); 10 Jul 2007 09:48:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jul 2007 09:48:36 -0000
Received: (qmail 1725 invoked by uid 500); 10 Jul 2007 09:48:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1695 invoked by uid 500); 10 Jul 2007 09:48:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1684 invoked by uid 99); 10 Jul 2007 09:48:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jul 2007 02:48:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [153.96.1.18] (HELO mailgw1.fraunhofer.de) (153.96.1.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jul 2007 02:48:27 -0700
Received: from mailgw1.fraunhofer.de (localhost [127.0.0.1])
	by mailgw1.fraunhofer.de (8.13.5+/8.13.4) with ESMTP id l6A9m5Tu005002
	for <java-user@lucene.apache.org>; Tue, 10 Jul 2007 11:48:05 +0200 (CEST)
Received: from pluto.fokus.fraunhofer.de (pluto.fokus.fraunhofer.de [195.37.77.164])
	by mailgw1.fraunhofer.de (8.13.5+/8.13.4) with ESMTP id l6A9m4Yb004933
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=OK)
	for <java-user@lucene.apache.org>; Tue, 10 Jul 2007 11:48:04 +0200 (CEST)
Received: from EXCHSRV.fokus.fraunhofer.de (bohr [10.147.9.231])
	by pluto.fokus.fraunhofer.de (8.13.7/8.13.7) with SMTP id l6A9m3Tt010536
	for <java-user@lucene.apache.org>; Tue, 10 Jul 2007 11:48:04 +0200 (MEST)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C7C2D7.6928FF31"
Subject: RE: Calling indexWriter.close() in web app
Date: Tue, 10 Jul 2007 11:48:04 +0200
Message-ID: <79C0EA6E7AD7CE4A85EDAF482B5456B230E6B9@EXCHSRV.fokus.fraunhofer.de>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <79C0EA6E7AD7CE4A85EDAF482B5456B230E6B9@EXCHSRV.fokus.fraunhofer.de>
Thread-Topic: Calling indexWriter.close() in web app
Thread-Index: AcfCALp2R0WnFtBxQ6+xlK+dp0g5HAA1TSxj
References: <11497597.post@talk.nabble.com>
From: "Steinert, Fabian" <Fabian.Steinert@fokus.fraunhofer.de>
To: <java-user@lucene.apache.org>
Received-SPF: None (mailgw1.fraunhofer.de: domain of Fabian.Steinert@fokus.fraunhofer.de
	does not designate permitted sender hosts)
	receiver=mailgw1.fraunhofer.de; client-ip=195.37.77.164;
	envelope-from=<Fabian.Steinert@fokus.fraunhofer.de>; helo=pluto.fokus.fraunhofer.de; x-agent=smf-spf;
X-Fraunhofer-Email-Policy: accepted
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C7C2D7.6928FF31
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi,
=20
you do not need to writer.close() the IndexWriter at all to make changes =
visible.
=20
When IndexWriter is constructed with autoCommit =3D true flag set,
calling writer.flush() will do.
=20
This way you can keep your single IndexWriter at App-level handling all =
the synchonization.
=20
Have a look at the IndexWriter API Spec, too.
=20
Hope im right with this and it helps you,
Fabian
=20

________________________________

Von: vcampa [mailto:campanile@interfree.it]
Gesendet: Mo 09.07.2007 10:10
An: java-user@lucene.apache.org
Betreff: Calling indexWriter.close() in web app




I'm developing a web app with struts that need to embed lucene
functionalities. I need that my app adds documents to the index after =
that a
document is added (documents are very few, but of large size). I read =
that i
have to use a single instance of indexwriter to edit the index. Suppose =
i
use a singleton or store indexwriter in the application scope to grant =
all
users to use that single instance.
My questions are:
- when i can close indexwriter to flush changes?
- How to know that an indexwriter has been closed before adding =
documents to
it?
- What does it happen if users continue adding documents to the index =
after
one user action closed it?

Please help!

Sorry for my bad english.
--
View this message in context: =
http://www.nabble.com/Calling-indexWriter.close%28%29-in-web-app-tf404781=
3.html#a11497597
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





------_=_NextPart_001_01C7C2D7.6928FF31
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C7C2D7.6928FF31--

From java-user-return-29119-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 10 10:00:05 2007
Return-Path: <java-user-return-29119-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60152 invoked from network); 10 Jul 2007 10:00:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jul 2007 10:00:03 -0000
Received: (qmail 27903 invoked by uid 500); 10 Jul 2007 09:59:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27622 invoked by uid 500); 10 Jul 2007 09:59:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27610 invoked by uid 99); 10 Jul 2007 09:59:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jul 2007 02:59:58 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of amit.hanchinamani@gmail.com designates 64.233.162.233 as permitted sender)
Received: from [64.233.162.233] (HELO nz-out-0506.google.com) (64.233.162.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jul 2007 02:59:55 -0700
Received: by nz-out-0506.google.com with SMTP id i28so838659nzi
        for <java-user@lucene.apache.org>; Tue, 10 Jul 2007 02:59:34 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=djGq2PGLID9MGbFvAPlmIpqkuRhCJAxmbj7yYeOE//iPckO1LORQR3DJOfBMcFgkNr7RicfN6x4f/zrUKtAcW7S7WIkNwF1W5x2g9Al2HnY8n2BQJ5LadFSu7mpBKyGLprVpzRwFMbbkMT4aUeUpGz2JtO0zbpjQR/SwcfqPzGE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=IwgvQZKW3Dxrwu5zN+D25Hhkn2xQWmqSCycha+CrXTcMxVZzx4eRSxPTkb76VHcyq/xKcqvcZNSiVqUglxQnAKutHRC2ez90B7ykSvPX/JEVAeaZie/a8VNg4iCK1gW03Il7/aVj6uezVyeblKhJDWoFwrTUoDkAJxTLDiJvCvk=
Received: by 10.115.88.1 with SMTP id q1mr4016328wal.1184061573618;
        Tue, 10 Jul 2007 02:59:33 -0700 (PDT)
Received: by 10.114.179.14 with HTTP; Tue, 10 Jul 2007 02:59:33 -0700 (PDT)
Message-ID: <49923b590707100259j7c25e94fvb580d18c65a0e681@mail.gmail.com>
Date: Tue, 10 Jul 2007 11:59:33 +0200
From: Amit <amit.hanchinamani@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Cannot get Field.Text to work
In-Reply-To: <718766.8363.qm@web50311.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_189673_7444112.1184061573582"
References: <718766.8363.qm@web50311.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_189673_7444112.1184061573582
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Otis,

Thanks for the reply. I didn't know that as all the examples on Lucene still
use the old approach.
I had a look at the API  and it does not seem to provide any new methods as
a substitute for Field.Text.
Can you give a small example just how to add name-value pair to the
document.
Thanks

Amit


On 7/10/07, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
>
> Amit,
>
> Field.Text method is long gone from Lucene.  I think that was in version
> 1.4.3 of Lucene, maybe 1.9*, but we are in 2.* now.
> The place to look at the new Field API is here:
>
> http://lucene.apache.org/java/2_2_0/api/org/apache/lucene/document/Field.html
>
> Otis
> . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
> Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share
>
> ----- Original Message ----
> From: Amit <amit.hanchinamani@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Monday, July 9, 2007 10:41:27 PM
> Subject: Cannot get Field.Text to work
>
> Hi
>
> I am new to Lucene and trying out the example code. But when I try to
> insert
> values using Field.Text the compiler does not recognize the Text as a
> method
> of Field. The code looks like this
>
> contactDocument.add(Field.Text("name", contact.getName()));
>
> I wanted to know if the version 2.2 does not have this method anymore, or
> do
> I have to access it in another way.
> Any help appreciated.
>
>
> Regards,
>
> Amit
>
>
>
>
>
> <a href="http://www.spreadfirefox.com/?q=affiliates&id=111787&t=1">Get
> Firefox!</a>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_189673_7444112.1184061573582--

From java-user-return-29120-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 10 10:09:45 2007
Return-Path: <java-user-return-29120-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62477 invoked from network); 10 Jul 2007 10:09:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jul 2007 10:09:43 -0000
Received: (qmail 50040 invoked by uid 500); 10 Jul 2007 10:09:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49993 invoked by uid 500); 10 Jul 2007 10:09:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49982 invoked by uid 99); 10 Jul 2007 10:09:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jul 2007 03:09:36 -0700
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=FROM_HAS_ULINE_NUMS,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.222.32.20] (HELO mexforward.lss.emc.com) (128.222.32.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jul 2007 03:09:32 -0700
Received: from mailhub.lss.emc.com (uraeus.lss.emc.com [10.254.144.14])
	by mexforward.lss.emc.com (Switch-3.2.5/Switch-3.1.7) with ESMTP id l6AA9AvO004513
	for <java-user@lucene.apache.org>; Tue, 10 Jul 2007 06:09:10 -0400 (EDT)
Received: from corpussmtp3.corp.emc.com (corpussmtp3.corp.emc.com [10.254.64.53])
	by mailhub.lss.emc.com (Switch-3.2.5/Switch-3.1.7) with ESMTP id l6AA99dG018191
	for <java-user@lucene.apache.org>; Tue, 10 Jul 2007 06:09:09 -0400 (EDT)
From: Liu_Andy2@emc.com
Received: from CORPUSMX10B.corp.emc.com ([128.221.14.93]) by corpussmtp3.corp.emc.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 10 Jul 2007 06:08:42 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Cannot get Field.Text to work
Date: Tue, 10 Jul 2007 06:07:29 -0400
Message-ID: <F3B3254741B1404D92215D80C451DE8401905E1A@CORPUSMX10B.corp.emc.com>
In-Reply-To: <49923b590707100259j7c25e94fvb580d18c65a0e681@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Cannot get Field.Text to work
Thread-Index: AcfC2SAqsJXOxl6NSGan7Tcv2uOgsAAAHrnA
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 10 Jul 2007 10:08:42.0850 (UTC) FILETIME=[4B7D2420:01C7C2DA]
X-PMX-Version: 4.7.1.128075, Antispam-Engine: 2.5.1.298604, Antispam-Data: 2007.7.6.21134
X-PerlMx-Spam: Gauge=, SPAM=1%, Reason='EMC_FROM_0+ -3, NO_REAL_NAME 0, __CP_URI_IN_BODY 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __IMS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0'
X-Virus-Checked: Checked by ClamAV on apache.org

You can reference org.apache.lucene.document.Field class. It should be
similar as:
ontactDocument.add(new Field("name", contact.getName(),Field.Store.YES,
Field.Index.TOKENIZED));

Andy


-----Original Message-----
From: Amit [mailto:amit.hanchinamani@gmail.com]=20
Sent: Tuesday, July 10, 2007 6:00 PM
To: java-user@lucene.apache.org
Subject: Re: Cannot get Field.Text to work

Hi Otis,

Thanks for the reply. I didn't know that as all the examples on Lucene
still
use the old approach.
I had a look at the API  and it does not seem to provide any new methods
as
a substitute for Field.Text.
Can you give a small example just how to add name-value pair to the
document.
Thanks

Amit


On 7/10/07, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
>
> Amit,
>
> Field.Text method is long gone from Lucene.  I think that was in
version
> 1.4.3 of Lucene, maybe 1.9*, but we are in 2.* now.
> The place to look at the new Field API is here:
>
>
http://lucene.apache.org/java/2_2_0/api/org/apache/lucene/document/Field
.html
>
> Otis
> . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
> Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share
>
> ----- Original Message ----
> From: Amit <amit.hanchinamani@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Monday, July 9, 2007 10:41:27 PM
> Subject: Cannot get Field.Text to work
>
> Hi
>
> I am new to Lucene and trying out the example code. But when I try to
> insert
> values using Field.Text the compiler does not recognize the Text as a
> method
> of Field. The code looks like this
>
> contactDocument.add(Field.Text("name", contact.getName()));
>
> I wanted to know if the version 2.2 does not have this method anymore,
or
> do
> I have to access it in another way.
> Any help appreciated.
>
>
> Regards,
>
> Amit
>
>
>
>
>
> <a =
href=3D"http://www.spreadfirefox.com/?q=3Daffiliates&id=3D111787&t=3D1">G=
et
> Firefox!</a>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29121-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 10 10:14:44 2007
Return-Path: <java-user-return-29121-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64294 invoked from network); 10 Jul 2007 10:14:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jul 2007 10:14:41 -0000
Received: (qmail 61327 invoked by uid 500); 10 Jul 2007 10:14:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61294 invoked by uid 500); 10 Jul 2007 10:14:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61282 invoked by uid 99); 10 Jul 2007 10:14:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jul 2007 03:14:35 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of amit.hanchinamani@gmail.com designates 209.85.146.178 as permitted sender)
Received: from [209.85.146.178] (HELO wa-out-1112.google.com) (209.85.146.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jul 2007 03:14:31 -0700
Received: by wa-out-1112.google.com with SMTP id j40so1833547wah
        for <java-user@lucene.apache.org>; Tue, 10 Jul 2007 03:14:11 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=uOy/rGirL9dkXeJgLx9kYJMcpY+VXvNxvPZMWX7UJ1wNDygidCu9Y9PMYJMjW7Or+onLSTzlrHRO8+mv+/Bp8LU5ZazJbZUxAVF4ziA834HzG3Zae3GkIayk6B/cSXht2gSGMMHLaZH/ao+eSlT5poKaIB/xtpNOh52b96aXcxo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=fVa5HOTE9BnLqboYxlZAUoQaHZWlHLP3tuEXrdFjB+DxYnRViHCkOUBhv9I+U1x8/JZbHFJB2FP5MFLvQ5A8HKTK2ufzHWyU8fulZSgt5t79FJvGE+nGK8A/JGy/JuTLsz7qFiU46ljfGt3fSLWApebp2iNZ9RHOxaBz01Yy/J4=
Received: by 10.114.14.1 with SMTP id 1mr1186739wan.1184062451413;
        Tue, 10 Jul 2007 03:14:11 -0700 (PDT)
Received: by 10.114.179.14 with HTTP; Tue, 10 Jul 2007 03:14:11 -0700 (PDT)
Message-ID: <49923b590707100314p2a043fb9q59b86fcf362cb13e@mail.gmail.com>
Date: Tue, 10 Jul 2007 12:14:11 +0200
From: Amit <amit.hanchinamani@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Cannot get Field.Text to work
In-Reply-To: <F3B3254741B1404D92215D80C451DE8401905E1A@CORPUSMX10B.corp.emc.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_189765_11207607.1184062451384"
References: <49923b590707100259j7c25e94fvb580d18c65a0e681@mail.gmail.com>
	 <F3B3254741B1404D92215D80C451DE8401905E1A@CORPUSMX10B.corp.emc.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_189765_11207607.1184062451384
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Andy,

Thanks for the example, i tried it and it works like a charm :)
I will explore more of Lucene on my own.

Amit


On 7/10/07, Liu_Andy2@emc.com <Liu_Andy2@emc.com> wrote:
>
> You can reference org.apache.lucene.document.Field class. It should be
> similar as:
> ontactDocument.add(new Field("name", contact.getName(),Field.Store.YES,
> Field.Index.TOKENIZED));
>
> Andy
>
>
> -----Original Message-----
> From: Amit [mailto:amit.hanchinamani@gmail.com]
> Sent: Tuesday, July 10, 2007 6:00 PM
> To: java-user@lucene.apache.org
> Subject: Re: Cannot get Field.Text to work
>
> Hi Otis,
>
> Thanks for the reply. I didn't know that as all the examples on Lucene
> still
> use the old approach.
> I had a look at the API  and it does not seem to provide any new methods
> as
> a substitute for Field.Text.
> Can you give a small example just how to add name-value pair to the
> document.
> Thanks
>
> Amit
>
>
> On 7/10/07, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> >
> > Amit,
> >
> > Field.Text method is long gone from Lucene.  I think that was in
> version
> > 1.4.3 of Lucene, maybe 1.9*, but we are in 2.* now.
> > The place to look at the new Field API is here:
> >
> >
> http://lucene.apache.org/java/2_2_0/api/org/apache/lucene/document/Field
> .html
> >
> > Otis
> > . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
> > Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share
> >
> > ----- Original Message ----
> > From: Amit <amit.hanchinamani@gmail.com>
> > To: java-user@lucene.apache.org
> > Sent: Monday, July 9, 2007 10:41:27 PM
> > Subject: Cannot get Field.Text to work
> >
> > Hi
> >
> > I am new to Lucene and trying out the example code. But when I try to
> > insert
> > values using Field.Text the compiler does not recognize the Text as a
> > method
> > of Field. The code looks like this
> >
> > contactDocument.add(Field.Text("name", contact.getName()));
> >
> > I wanted to know if the version 2.2 does not have this method anymore,
> or
> > do
> > I have to access it in another way.
> > Any help appreciated.
> >
> >
> > Regards,
> >
> > Amit
> >
> >
> >
> >
> >
> > <a href="http://www.spreadfirefox.com/?q=affiliates&id=111787&t=1">Get
> > Firefox!</a>
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_189765_11207607.1184062451384--

From java-user-return-29122-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 10 11:01:21 2007
Return-Path: <java-user-return-29122-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79723 invoked from network); 10 Jul 2007 11:01:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jul 2007 11:01:21 -0000
Received: (qmail 40302 invoked by uid 500); 10 Jul 2007 11:01:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40235 invoked by uid 500); 10 Jul 2007 11:01:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40200 invoked by uid 99); 10 Jul 2007 11:01:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jul 2007 04:01:14 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jul 2007 04:01:10 -0700
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id 39CF683B0
	for <java-user@lucene.apache.org>; Tue, 10 Jul 2007 07:00:49 -0400 (EDT)
Received: from web8.messagingengine.com ([10.202.2.217])
  by compute1.internal (MEProxy); Tue, 10 Jul 2007 07:00:49 -0400
Received: by web8.messagingengine.com (Postfix, from userid 99)
	id 194EAADD7; Tue, 10 Jul 2007 07:00:49 -0400 (EDT)
Message-Id: <1184065249.8730.1199385863@webmail.messagingengine.com>
X-Sasl-Enc: +l9JFL1P4EJYP7CcBs5o+NP+nxB1yaNS6LHpTkbhrAeK 1184065249
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
Subject: Re: unused tmp fdt files in index
In-Reply-To: <7cbc67ff0707092328w70841b48g930cdd68c78108d8@mail.gmail.com>
Date: Tue, 10 Jul 2007 07:00:49 -0400
References: <7cbc67ff0707092328w70841b48g930cdd68c78108d8@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


What version of Lucene are you using?

As of 2.1, Lucene should remove such partially created files
immediately on hitting the OOM exception, and if somehow it failed to
do that (eg if JVM had crashed or machine running JVM crashed, etc) it
should then remove them the next time a writer is created on the
index.

However, versions before 2.1 can leave partial files in the index
indefinitely (ie requiring manual removal).

Mike

"Harini Raghavan" <harini.raghavan@insideview.com> wrote:
> Hi All,
> 
> I have a large lucene index of size 60G. We have had Out Of Memory issues
> a
> few times in the past due to which the indexing had got interrupted. This
> has resulted in a lot of .fnm, .fdt,.tmp files which don't get removed
> even
> through optimizing the index. We have data for last 90 days in the lucene
> index, but some of these index related files are older than 6-7 months.
> My
> gut feeling is they are not really used internally by the IndexSearcher.
> Can
> I go ahead and delete those older files manually?
> 
> Thanks,
> Harini

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29123-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 10 11:17:28 2007
Return-Path: <java-user-return-29123-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87984 invoked from network); 10 Jul 2007 11:17:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jul 2007 11:17:27 -0000
Received: (qmail 68547 invoked by uid 500); 10 Jul 2007 11:17:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67461 invoked by uid 500); 10 Jul 2007 11:17:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67449 invoked by uid 99); 10 Jul 2007 11:17:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jul 2007 04:17:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jul 2007 04:17:16 -0700
Received: from compute2.internal (compute2.internal [10.202.2.42])
	by out1.messagingengine.com (Postfix) with ESMTP id 3889B844B
	for <java-user@lucene.apache.org>; Tue, 10 Jul 2007 07:16:55 -0400 (EDT)
Received: from web8.messagingengine.com ([10.202.2.217])
  by compute2.internal (MEProxy); Tue, 10 Jul 2007 07:16:55 -0400
Received: by web8.messagingengine.com (Postfix, from userid 99)
	id 1A597AE13; Tue, 10 Jul 2007 07:16:55 -0400 (EDT)
Message-Id: <1184066215.11113.1199388165@webmail.messagingengine.com>
X-Sasl-Enc: Iugjen456Niz20M7AM1U9JMUUvYg5NGPJ28smwM3a2Yo 1184066215
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <27C7C2CAD357DBanson@linkclub-staff.com>
Subject: Re: How to use "point-in-time" feature
In-Reply-To: <27C7C2CAD357DBanson@linkclub-staff.com>
Date: Tue, 10 Jul 2007 07:16:55 -0400
X-Virus-Checked: Checked by ClamAV on apache.org

In your application, can more than one machine be the writer?  If so,
there is at least one known active issue
(http://issues.apache.org/jira/browse/LUCENE-948) in Lucene 2.2 that
prevents this from working.

If instead the writer is always on a single machine, then it should
work, though please note that this area is not heavily tested yet!
Please report back if you move forward on this so we can gather data
points...

The thing you have to do is create a custom deletion policy, which is
just a class implementing this interface:

  http://lucene.apache.org/java/2_2_0/api/org/apache/lucene/index/IndexDeletionPolicy.html

You will need to implement your own application-dependent logic here
to tell the writer when it is safe to remove old commits.  For example
if you know all of your readers will check once per hour and re-init
themselves if the index has changed, then you would make a deletion
policy that removes any commits older than 1 hour.

The unit test for deletion policies (in the source distribution for
2.2) has several example deletion policies including one called
"ExpirationTimeDeletionPolicy" which implements the example above.

Once you've implemented such a class, then every time you open the
writer you must pass in an instance of your class and this will
prevent the writer from removing commit points (and the segments they
reference) that might be in use by your readers on other machines.

You can see gory details on current known status of Lucene over NFS
here:

  http://issues.apache.org/jira/browse/LUCENE-673

Mike

"anson" <anson@linkclub-staff.com> wrote:
> 
> Hi,
> 
> I saw the new feature "point-in-time" on Lucene2.2.
> If I upgrade my web-app from Lucene2.0 to Lucene2.2, I want to do that 
> my web-app can access the INDEX over NFS , so what should I do to change 
> my old web-app.
> 
> Could anyone show me some samples or your opinions.
> (i.e. what difference on making index, searching between Lucene2.0 and 
> Lucene2.2)
> 
> Best regards
> Anson
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29124-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 10 16:34:42 2007
Return-Path: <java-user-return-29124-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7054 invoked from network); 10 Jul 2007 16:34:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jul 2007 16:34:40 -0000
Received: (qmail 85536 invoked by uid 500); 10 Jul 2007 16:34:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85489 invoked by uid 500); 10 Jul 2007 16:34:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85478 invoked by uid 99); 10 Jul 2007 16:34:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jul 2007 09:34:34 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of john.smith391@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jul 2007 09:34:28 -0700
Received: by nf-out-0910.google.com with SMTP id d3so86789nfc
        for <java-user@lucene.apache.org>; Tue, 10 Jul 2007 09:34:07 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:content-type:content-transfer-encoding;
        b=Xjx0wxbwIavDW1H97uazjblI/gDTHTdn28rwIKjH3cyAFFd89RWcjXFaDWPDc8JLlrXxU/ZfS8OoLofZ+sG81TkoghQ5l1hm4SCyDteWY33LMxv/KoQ2/sPhXbondpiXKrwYORZoQfFvqCqq4CqX3+4p3DY0xkUmxTaCT2Vri1Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:content-type:content-transfer-encoding;
        b=KizKUlMngJyNitu/1q7CmeKH6N9/RlJSIni5iHYwwGljw7zr+O2E4Ot6W1gvgwwXe6OSr/uj17uGOR8oBM4NV7r0aOsOkrXvwR3Hp+bBVY0CdOv6O9/yFE5AdgMfjXXxTJYvZxhGy6Qgqgmf3MmThSPxPFVo+d7kc+I4e3w/Ouw=
Received: by 10.82.174.20 with SMTP id w20mr9890891bue.1184085247536;
        Tue, 10 Jul 2007 09:34:07 -0700 (PDT)
Received: from ?84.201.222.22? ( [84.201.222.22])
        by mx.google.com with ESMTP id 1sm19564433nfv.2007.07.10.09.34.04
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 10 Jul 2007 09:34:05 -0700 (PDT)
Message-ID: <4693B500.7070208@gmail.com>
Date: Tue, 10 Jul 2007 18:34:08 +0200
From: john smith <john.smith391@gmail.com>
User-Agent: Thunderbird 2.0.0.4 (Windows/20070604)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: document field indexing
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi
 Lets say we have a single lucene document that has two text fields: 
field1 and field2.
 Data kept in field1 is a long string that changes rarely. It takes some 
time to index it.
 Data kept in field2 is a short string and changes often.
 
 Is it possible to update (reindex) document field2 without reindexing 
the whole document  ?
 
Regards
John  

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29125-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 10 16:42:00 2007
Return-Path: <java-user-return-29125-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15679 invoked from network); 10 Jul 2007 16:41:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jul 2007 16:41:59 -0000
Received: (qmail 1177 invoked by uid 500); 10 Jul 2007 16:41:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1133 invoked by uid 500); 10 Jul 2007 16:41:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1118 invoked by uid 99); 10 Jul 2007 16:41:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jul 2007 09:41:52 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jul 2007 09:41:48 -0700
Received: by nf-out-0910.google.com with SMTP id d3so86940nfc
        for <java-user@lucene.apache.org>; Tue, 10 Jul 2007 09:41:27 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=aTMXgtG6CaJ5HPbsR31i1IP+Tsf2GTheC6bywXQs7H8rv6KW5JB9qDBBycXwB66BaVXeCJrgBmogtFidtEkPnsekcv+MVLgBsX5jbvWc/+6Qep/dYm5Rj9LyNU55kiwjMOdtZqAFrPf2B8SlkobaDDH9T9rsIdxK9EK3pAHc0cY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=cpUj2r6BR+Y1ac+0T8DpxQSbLu7nSjdVAcsyB9PDH4QA03wFX+vt3TMNzj8H+VD6SZMwBso1LSjEYoIKeH3wSjLh52TMPC41MQaoUxDVliz1zxdDCkC8FygDAtjX1DEy1pC3uG/6M92tzvKTct4kA9EVR+wmNvSjH5tO9Y6GNgo=
Received: by 10.82.136.4 with SMTP id j4mr9908536bud.1184085687273;
        Tue, 10 Jul 2007 09:41:27 -0700 (PDT)
Received: by 10.82.167.12 with HTTP; Tue, 10 Jul 2007 09:41:27 -0700 (PDT)
Message-ID: <359a92830707100941o2cdb20cco882f2d04b820772c@mail.gmail.com>
Date: Tue, 10 Jul 2007 12:41:27 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: document field indexing
In-Reply-To: <4693B500.7070208@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_132464_32184493.1184085687249"
References: <4693B500.7070208@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_132464_32184493.1184085687249
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

No. One of the most frequent requests is update-in-place,
but if you search the mail archive you'll find the reasons why it's
not going to happen.

Erick

On 7/10/07, john smith <john.smith391@gmail.com> wrote:
>
> Hi
> Lets say we have a single lucene document that has two text fields:
> field1 and field2.
> Data kept in field1 is a long string that changes rarely. It takes some
> time to index it.
> Data kept in field2 is a short string and changes often.
>
> Is it possible to update (reindex) document field2 without reindexing
> the whole document  ?
>
> Regards
> John
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_132464_32184493.1184085687249--

From java-user-return-29126-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 10 16:43:29 2007
Return-Path: <java-user-return-29126-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17134 invoked from network); 10 Jul 2007 16:43:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jul 2007 16:43:28 -0000
Received: (qmail 7046 invoked by uid 500); 10 Jul 2007 16:43:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7010 invoked by uid 500); 10 Jul 2007 16:43:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6999 invoked by uid 99); 10 Jul 2007 16:43:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jul 2007 09:43:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [213.133.33.40] (HELO smtp.is.nl) (213.133.33.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jul 2007 09:43:19 -0700
Received: from [213.133.51.241] (HELO hai01.hippo.local)
  by smtp.is.nl (CommuniGate Pro SMTP 5.0.10)
  with ESMTP id 19201931 for java-user@lucene.apache.org; Tue, 10 Jul 2007 18:42:57 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6619.12
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: base64
Subject: RE: document field indexing
Date: Tue, 10 Jul 2007 18:42:56 +0200
Message-ID: <A955EA1F8FE31749AEC8C998082F6C7C01AC1105@hai01.hippo.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: document field indexing
Thread-Index: AcfDEDYSeJa8N87fSB+2+qnwd1cvcwAAPiYg
From: "Ard Schrijvers" <a.schrijvers@hippo.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

SGVsbG8gSm9obiwNCg0Kc2VlIGFub3RoZXIgdGhyZWFkIGFib3V0IHRoaXMgaXNzdWUgdGhpcyBt
b3JuaW5nLiBEdWUgdG8gaW5kZXggcGVyZm9ybWFuY2UgaW4gY29tYmluYXRpb24gd2l0aCBhbiBp
bnZlcnRlZCBpbmRleCBpdCBpcyBub3QgcG9zc2libGUgd2hhdCB5b3Ugd2FudC4gDQoNClJlZ2Fy
ZHMgQXJkDQoNCj4gDQo+IEhpDQo+ICBMZXRzIHNheSB3ZSBoYXZlIGEgc2luZ2xlIGx1Y2VuZSBk
b2N1bWVudCB0aGF0IGhhcyB0d28gdGV4dCBmaWVsZHM6IA0KPiBmaWVsZDEgYW5kIGZpZWxkMi4N
Cj4gIERhdGEga2VwdCBpbiBmaWVsZDEgaXMgYSBsb25nIHN0cmluZyB0aGF0IGNoYW5nZXMgcmFy
ZWx5LiBJdCANCj4gdGFrZXMgc29tZSANCj4gdGltZSB0byBpbmRleCBpdC4NCj4gIERhdGEga2Vw
dCBpbiBmaWVsZDIgaXMgYSBzaG9ydCBzdHJpbmcgYW5kIGNoYW5nZXMgb2Z0ZW4uDQo+ICANCj4g
IElzIGl0IHBvc3NpYmxlIHRvIHVwZGF0ZSAocmVpbmRleCkgZG9jdW1lbnQgZmllbGQyIHdpdGhv
dXQgDQo+IHJlaW5kZXhpbmcgDQo+IHRoZSB3aG9sZSBkb2N1bWVudCAgPw0KPiAgDQo+IFJlZ2Fy
ZHMNCj4gSm9obiAgDQo+IA0KPiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFp
bDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnDQo+IEZvciBhZGRpdGlv
bmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnDQo+
IA0KPiANCg==


From java-user-return-29127-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 10 17:31:13 2007
Return-Path: <java-user-return-29127-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50332 invoked from network); 10 Jul 2007 17:31:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jul 2007 17:31:12 -0000
Received: (qmail 25945 invoked by uid 500); 10 Jul 2007 17:31:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25780 invoked by uid 500); 10 Jul 2007 17:31:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25755 invoked by uid 99); 10 Jul 2007 17:31:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jul 2007 10:31:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [130.107.64.135] (HELO Balboa.AI.SRI.COM) (130.107.64.135)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jul 2007 10:31:07 -0700
Received: from Balboa.AI.SRI.COM (localhost [127.0.0.1])
	by Balboa.AI.SRI.COM (8.11.7p2+Sun/8.10.1) with SMTP id l6AHUk019853
	for <java-user@lucene.apache.org>; Tue, 10 Jul 2007 10:30:46 -0700 (PDT)
Received: from Salt.AI.SRI.COM ([130.107.65.211])
 by Balboa.AI.SRI.COM (SMSSMTP 4.1.9.35) with SMTP id M2007071010304611987
 for <java-user@lucene.apache.org>; Tue, 10 Jul 2007 10:30:46 -0700
Received: from avocado.ai.sri.com ([130.107.65.9])
	by Salt.AI.SRI.COM with asmtp 
	(Cipher TLSv1:RC4-MD5:128) (Exim 3.35 #1 (Debian))
	id 1I8JXy-0004QN-00
	for <java-user@lucene.apache.org>; Tue, 10 Jul 2007 10:30:46 -0700
Message-ID: <4693C23C.6040400@ai.sri.com>
Date: Tue, 10 Jul 2007 10:30:36 -0700
From: Jay Yu <yu@AI.SRI.COM>
Reply-To: yu@AI.SRI.COM
Organization: AIC
User-Agent: Thunderbird 1.5.0.12 (Windows/20070509)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: RangeFilter
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi All,
Does anyone know if the RangeFilter  is a cached filter? I could not 
tell from the api.

Thanks!

Jay

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29128-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 10 18:12:27 2007
Return-Path: <java-user-return-29128-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72661 invoked from network); 10 Jul 2007 18:12:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jul 2007 18:12:26 -0000
Received: (qmail 19664 invoked by uid 500); 10 Jul 2007 18:12:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19617 invoked by uid 500); 10 Jul 2007 18:12:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19605 invoked by uid 99); 10 Jul 2007 18:12:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jul 2007 11:12:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.150] (HELO rescomp.berkeley.edu) (169.229.70.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jul 2007 11:12:16 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 9A47B5B776; Tue, 10 Jul 2007 11:11:55 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 77ADB7F403
	for <java-user@lucene.apache.org>; Tue, 10 Jul 2007 11:11:55 -0700 (PDT)
Date: Tue, 10 Jul 2007 11:11:55 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Cannot get Field.Text to work
In-Reply-To: <49923b590707100259j7c25e94fvb580d18c65a0e681@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0707101110390.25373@hal.rescomp.berkeley.edu>
References: <718766.8363.qm@web50311.mail.re2.yahoo.com>
 <49923b590707100259j7c25e94fvb580d18c65a0e681@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Thanks for the reply. I didn't know that as all the examples on Lucene still
: use the old approach.
: I had a look at the API  and it does not seem to provide any new methods as
: a substitute for Field.Text.

Please note there is a FAQ specificly about "How do I get code written
for Lucene 1.4.x to work with Lucene 2.x?"

http://wiki.apache.org/lucene-java/LuceneFAQ#head-86d479476c63a2579e867b75d4faa9664ef6cf4d


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29129-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 10 18:45:41 2007
Return-Path: <java-user-return-29129-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3398 invoked from network); 10 Jul 2007 18:45:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jul 2007 18:45:40 -0000
Received: (qmail 78706 invoked by uid 500); 10 Jul 2007 18:45:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78673 invoked by uid 500); 10 Jul 2007 18:45:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78662 invoked by uid 99); 10 Jul 2007 18:45:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jul 2007 11:45:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.150] (HELO rescomp.berkeley.edu) (169.229.70.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jul 2007 11:45:32 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id F2EC55B77C; Tue, 10 Jul 2007 11:45:11 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id D89167F403;
	Tue, 10 Jul 2007 11:45:11 -0700 (PDT)
Date: Tue, 10 Jul 2007 11:45:11 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org, yu@AI.SRI.COM
Subject: Re: RangeFilter
In-Reply-To: <4693C23C.6040400@ai.sri.com>
Message-ID: <Pine.LNX.4.58.0707101141250.25373@hal.rescomp.berkeley.edu>
References: <4693C23C.6040400@ai.sri.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Does anyone know if the RangeFilter  is a cached filter? I could not
: tell from the api.

Generally speaking classes only document what they do, not what they
*don't* do ... so if the javadocs don't say anything about caching, then
it doesn't have any caching.

more specificly, the existence of CachingWrapperFilter makes it
unneccessary for any other filter to implement caching ... which is why
QueryFilter has been deprecated in favor of QueryWrapperFilter.





-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29130-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 10 20:34:43 2007
Return-Path: <java-user-return-29130-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82909 invoked from network); 10 Jul 2007 20:34:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jul 2007 20:34:41 -0000
Received: (qmail 29282 invoked by uid 500); 10 Jul 2007 20:34:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29251 invoked by uid 500); 10 Jul 2007 20:34:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29240 invoked by uid 99); 10 Jul 2007 20:34:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jul 2007 13:34:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [130.107.64.135] (HELO Balboa.AI.SRI.COM) (130.107.64.135)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jul 2007 13:34:32 -0700
Received: from Balboa.AI.SRI.COM (localhost [127.0.0.1])
	by Balboa.AI.SRI.COM (8.11.7p2+Sun/8.10.1) with SMTP id l6AKYB021826;
	Tue, 10 Jul 2007 13:34:11 -0700 (PDT)
Received: from Salt.AI.SRI.COM ([130.107.65.211])
 by Balboa.AI.SRI.COM (SMSSMTP 4.1.9.35) with SMTP id M2007071013341119809
 ; Tue, 10 Jul 2007 13:34:11 -0700
Received: from localhost.ai.sri.com
	([127.0.0.1] helo=[130.107.65.150] ident=root)
	by Salt.AI.SRI.COM with asmtp (Exim 3.35 #1 (Debian))
	id 1I8MPS-00066v-00; Tue, 10 Jul 2007 13:34:11 -0700
Message-ID: <4693ED3D.90501@ai.sri.com>
Date: Tue, 10 Jul 2007 13:34:05 -0700
From: Jay Yu <yu@AI.SRI.COM>
User-Agent: Thunderbird 2.0.0.4 (Windows/20070604)
MIME-Version: 1.0
To: Chris Hostetter <hossman_lucene@fucit.org>
CC: java-user@lucene.apache.org
Subject: Re: RangeFilter
References: <4693C23C.6040400@ai.sri.com> <Pine.LNX.4.58.0707101141250.25373@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0707101141250.25373@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for clarifying this, Chris!
I agree with you that javadocs usual should doc all they do but often 
times they skip few important things they do do.



Chris Hostetter wrote:
> : Does anyone know if the RangeFilter  is a cached filter? I could not
> : tell from the api.
> 
> Generally speaking classes only document what they do, not what they
> *don't* do ... so if the javadocs don't say anything about caching, then
> it doesn't have any caching.
> 
> more specificly, the existence of CachingWrapperFilter makes it
> unneccessary for any other filter to implement caching ... which is why
> QueryFilter has been deprecated in favor of QueryWrapperFilter.
> 
> 
> 
> 
> 
> -Hoss

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29131-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 11 12:26:15 2007
Return-Path: <java-user-return-29131-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59017 invoked from network); 11 Jul 2007 12:26:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jul 2007 12:26:14 -0000
Received: (qmail 35172 invoked by uid 500); 11 Jul 2007 12:26:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35123 invoked by uid 500); 11 Jul 2007 12:26:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35090 invoked by uid 99); 11 Jul 2007 12:26:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Jul 2007 05:26:07 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Jul 2007 05:26:03 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1I8bGJ-0003kA-1c
	for java-user@lucene.apache.org; Wed, 11 Jul 2007 05:25:43 -0700
Message-ID: <11538916.post@talk.nabble.com>
Date: Wed, 11 Jul 2007 05:25:43 -0700 (PDT)
From: vcampa <campanile@interfree.it>
To: java-user@lucene.apache.org
Subject: RE: Calling indexWriter.close() in web app
In-Reply-To: <79C0EA6E7AD7CE4A85EDAF482B5456B230E6B9@EXCHSRV.fokus.fraunhofer.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: campanile@interfree.it
References: <11497597.post@talk.nabble.com> <79C0EA6E7AD7CE4A85EDAF482B5456B230E6B9@EXCHSRV.fokus.fraunhofer.de>
X-Virus-Checked: Checked by ClamAV on apache.org



Steinert, Fabian wrote:
> 
> Hi,
> you do not need to writer.close() the IndexWriter at all to make changes
> visible.
> When IndexWriter is constructed with autoCommit = true flag set,
> calling writer.flush() will do.
> 

Ok, but what about the write.lock? IndexWriter releases its write.lock only
when closed, so i think problems may begin when i try to open IndexReader on
a locked index. I'm still confused... help.

-- 
View this message in context: http://www.nabble.com/Calling-indexWriter.close%28%29-in-web-app-tf4047813.html#a11538916
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29132-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 12 00:19:36 2007
Return-Path: <java-user-return-29132-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63701 invoked from network); 12 Jul 2007 00:19:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jul 2007 00:19:34 -0000
Received: (qmail 34932 invoked by uid 500); 12 Jul 2007 00:19:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34895 invoked by uid 500); 12 Jul 2007 00:19:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34884 invoked by uid 99); 12 Jul 2007 00:19:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Jul 2007 17:19:28 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=DNS_FROM_AHBL_RHSBL,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of peterlkeegan@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Jul 2007 17:19:25 -0700
Received: by py-out-1112.google.com with SMTP id f31so6185619pyh
        for <java-user@lucene.apache.org>; Wed, 11 Jul 2007 17:19:04 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=kIhQRrWLN9aY6Zn1fFcsP2EEp4j3McmE0mQJ5Nb0EqBt4fzPZ+CDjcV4MhwkpZFYoGihRnEFtwF8tWoEdXQIGp1ZTK5eR7+1Jf/r0NWRx5HNDOeuHcsDGvD/3NR+fTpDqQFj16lWfXm7wTKbj0qDPFdtfg7ZrLlZlmyVck7JO00=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=sdtoTramUlSFfT88w0CVplkzjKwZ2wFksVlhSkFHdsrutcF6pKIZufObTnQkC7NDVis7BmrF3wZM8UMxZ3e/hgnTTbFmQu5NETY8GKLqaGeapxZ+liHhV2UL8z/yV72jVJ/1DfyJymuO65i8wDyFC+qMDMN4nxLakvB8z0Jns+k=
Received: by 10.65.189.20 with SMTP id r20mr29421qbp.1184199544127;
        Wed, 11 Jul 2007 17:19:04 -0700 (PDT)
Received: by 10.65.154.8 with HTTP; Wed, 11 Jul 2007 17:19:04 -0700 (PDT)
Message-ID: <e994873a0707111719o2a083862h6aaafca529c2cfcf@mail.gmail.com>
Date: Wed, 11 Jul 2007 20:19:04 -0400
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Payloads and PhraseQuery
In-Reply-To: <1C6823A4-BA05-4C20-8B74-3BE527E6CD97@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13260_27299277.1184199544075"
References: <e994873a0706270745o458b969aqdd0204b0c4027ec4@mail.gmail.com>
	 <1C6823A4-BA05-4C20-8B74-3BE527E6CD97@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_13260_27299277.1184199544075
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'm now looking at using payloads with SpanNearQuery but I don't see any
clear way of getting the payload(s) from the matching span terms. The term
positions for the payloads seem to be buried beneath SpanCells in the
NearSpansOrdered and NearSpansUnordered classes, which are not public. I'd
be content to be able to get the payload from just the first term of the
span.

Can anyone suggest an approach for making payloads work with SpanNearQuery?

Peter


On 6/27/07, Grant Ingersoll <gsingers@apache.org> wrote:
>
> Could you get what you need combining the BoostingTermQuery with a
> SpanNearQuery to produce a score?  Just guessing here..
>
> At some point, I would like to see more Query classes around the
> payload stuff, so please submit patches/feedback if and when you get
> a solution
>
> On Jun 27, 2007, at 10:45 AM, Peter Keegan wrote:
>
> > I'm looking at the new Payload api and would like to use it in the
> > following
> > manner. Meta-data is indexed as a special phrase (all terms at same
> > position) and a payload is stored with the first term of each
> > phrase. I
> > would like to create a custom query class that extends PhraseQuery
> > and uses
> > its PhraseScorer to find matching documents. The custom query class
> > then
> > reads the payload from the first term of the matching query and
> > uses it to
> > produce a new score. However, I don't see how to get the payload
> > from the
> > PhraseScorer's TermPositions. Is this possible?
> >
> >
> > Peter
>
> --------------------------
> Grant Ingersoll
> Center for Natural Language Processing
> http://www.cnlp.org/tech/lucene.asp
>
> Read the Lucene Java FAQ at http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_13260_27299277.1184199544075--

From java-user-return-29133-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 12 00:37:19 2007
Return-Path: <java-user-return-29133-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67082 invoked from network); 12 Jul 2007 00:37:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jul 2007 00:37:18 -0000
Received: (qmail 50541 invoked by uid 500); 12 Jul 2007 00:37:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50499 invoked by uid 500); 12 Jul 2007 00:37:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50488 invoked by uid 99); 12 Jul 2007 00:37:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Jul 2007 17:37:14 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.150] (HELO rescomp.berkeley.edu) (169.229.70.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Jul 2007 17:37:11 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 8CE4F5B771; Wed, 11 Jul 2007 17:36:48 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 71E0E7F403
	for <java-user@lucene.apache.org>; Wed, 11 Jul 2007 17:36:48 -0700 (PDT)
Date: Wed, 11 Jul 2007 17:36:48 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Payloads and PhraseQuery
In-Reply-To: <e994873a0707111719o2a083862h6aaafca529c2cfcf@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0707111733080.28722@hal.rescomp.berkeley.edu>
References: <e994873a0706270745o458b969aqdd0204b0c4027ec4@mail.gmail.com> 
 <1C6823A4-BA05-4C20-8B74-3BE527E6CD97@apache.org>
 <e994873a0707111719o2a083862h6aaafca529c2cfcf@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I'm now looking at using payloads with SpanNearQuery but I don't see any
: clear way of getting the payload(s) from the matching span terms. The term
: positions for the payloads seem to be buried beneath SpanCells in the

Isn't Spans.start() and Spans.end() what you are looking for?





-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29134-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 12 00:47:18 2007
Return-Path: <java-user-return-29134-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68698 invoked from network); 12 Jul 2007 00:47:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jul 2007 00:47:14 -0000
Received: (qmail 58815 invoked by uid 500); 12 Jul 2007 00:47:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57747 invoked by uid 500); 12 Jul 2007 00:47:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57736 invoked by uid 99); 12 Jul 2007 00:47:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Jul 2007 17:47:09 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=DNS_FROM_AHBL_RHSBL,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.231 as permitted sender)
Received: from [66.249.82.231] (HELO wx-out-0506.google.com) (66.249.82.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Jul 2007 17:47:05 -0700
Received: by wx-out-0506.google.com with SMTP id i28so1627742wxd
        for <java-user@lucene.apache.org>; Wed, 11 Jul 2007 17:46:45 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=Hd4jjrixTJUmgCwJ8y6mJK87itP7vc9Tpz8D3E1Azob0Mwc1vaw9+l9QKtt4kwikV2U/GX6jFL6UQdCdI2TkIbdGDERUc2ot2ljG+Y7Wm7f/fPtw/m2H7LdGPlVuRDyhVcyGGtWjNwtf7vE20tC/JpLGogtD3KL3ruAqLE08H88=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=dPMSZxrEdQOaVS4ViuGkc7vkpjN6dqfVlQbVx6jTERVJhQGpIhWoSAWfhS5TH4t46GlFXn1EDtJ2cZhHJALpReecN5b9zXC6FgVdCm/qZ5eJ8KgA81oxwm6N3cUKUaLm3lqZxn6OOJtZW1r2rEiaUUfn0ZsoI9LHV1KAs+ql87g=
Received: by 10.70.25.12 with SMTP id 12mr95530wxy.1184201204947;
        Wed, 11 Jul 2007 17:46:44 -0700 (PDT)
Received: from ?192.168.1.100? ( [216.66.114.204])
        by mx.google.com with ESMTP id t26sm20070095ele.2007.07.11.17.46.43
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 11 Jul 2007 17:46:44 -0700 (PDT)
Message-ID: <46957991.3050900@gmail.com>
Date: Wed, 11 Jul 2007 20:45:05 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.4 (Windows/20070604)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Calling indexWriter.close() in web app
References: <11497597.post@talk.nabble.com> <79C0EA6E7AD7CE4A85EDAF482B5456B230E6B9@EXCHSRV.fokus.fraunhofer.de> <11538916.post@talk.nabble.com>
In-Reply-To: <11538916.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

The lock file is only for Writers. The lock file ensures that even two 
writers from two JVM's will not step on each other. Readers do not care 
about what the writers are doing or whether there is a lock file...even 
more so with the new generational files i believe.

- Mark

vcampa wrote:
> Steinert, Fabian wrote:
>   
>> Hi,
>> you do not need to writer.close() the IndexWriter at all to make changes
>> visible.
>> When IndexWriter is constructed with autoCommit = true flag set,
>> calling writer.flush() will do.
>>
>>     
>
> Ok, but what about the write.lock? IndexWriter releases its write.lock only
> when closed, so i think problems may begin when i try to open IndexReader on
> a locked index. I'm still confused... help.
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29135-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 12 07:45:51 2007
Return-Path: <java-user-return-29135-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5208 invoked from network); 12 Jul 2007 07:45:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jul 2007 07:45:50 -0000
Received: (qmail 35983 invoked by uid 500); 12 Jul 2007 07:45:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35945 invoked by uid 500); 12 Jul 2007 07:45:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35925 invoked by uid 99); 12 Jul 2007 07:45:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jul 2007 00:45:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [193.110.102.5] (HELO linuxap01e.dmc.de) (193.110.102.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jul 2007 00:45:40 -0700
Received: from [127.0.0.1] (helo=localhost)
	by linuxap01e.dmc.de with esmtp (Exim 4.63)
	(envelope-from <Michael.Boeckling@dmc.de>)
	id 1I8tMV-0005Th-1i
	for java-user@lucene.apache.org; Thu, 12 Jul 2007 09:45:19 +0200
X-Virus-Scanned: amavisd-new at dmc.de
Received: from linuxap01e.dmc.de ([127.0.0.1])
	by localhost (linux-ap01e.dmc.de [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id DEIlMtFp35lQ for <java-user@lucene.apache.org>;
	Thu, 12 Jul 2007 09:45:14 +0200 (CEST)
Received: from [193.110.102.2] (helo=fafnir.dmc.local)
	by linuxap01e.dmc.de with esmtp (Exim 4.63)
	(envelope-from <Michael.Boeckling@dmc.de>)
	id 1I8tMQ-0005TD-5m
	for java-user@lucene.apache.org; Thu, 12 Jul 2007 09:45:14 +0200
Received: by fafnir.intra.dmc.de with Internet Mail Service (5.5.2653.19)
	id <3T25A0V8>; Thu, 12 Jul 2007 09:45:14 +0200
Message-ID: <F60407925D044842B7E21677C8B8CE2818C526F4@fafnir.intra.dmc.de>
From: =?iso-8859-1?Q?Michael_B=F6ckling?= <Michael.Boeckling@dmc.de>
To: java-user@lucene.apache.org
Subject: Wildcard queries don't work on untokenized fields (Lucene 2.2.0)
Date: Thu, 12 Jul 2007 09:45:11 +0200
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2653.19)
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi!

I just discovered that it is not possible to search in untokenized =
fields
when using a wildcard query.

The query=20

code:KP00* becomes code:kp00*

in its parsed form when it should really be "code:KP00*", as tested in =
Luke
using a whitespace analyzer. When omitting the wildcard character *, =
the
parsed query reads correctly as "code:KP00".

Is this a bug or a "feature"?

Thanks for any help!


Michael


--=20
Michael B=F6ckling
Java Engineer
dmc digital media center GmbH=20
Rommelstra=DFe 11=20
70376 Stuttgart (Germany)=20
Telefon: +49 711 601747-0
Telefax: +49 711 601747-141=20
E-Mail: Michael.Boeckling@dmc.de=20
Internet: www.dmc.de=20

Handelsregister: AG Stuttgart HRB 18974
Gesch=E4ftsf=FChrer: Andreas Magg, Daniel Rebhorn, Andreas Schwend

---------------------------------------------
Besseres E-Business.
dmc ist die kreative Vernetzung von Agentur, Systemhaus und Service. =
Seit
=FCber 10 Jahren entwickeln und realisieren wir zukunftweisende und
erfolgreiche E-Business-L=F6sungen. Zu unseren langj=E4hrigen Kunden =
z=E4hlen
neckermann.de, Kodak und Telekom Training.

dmc auf Platz 8 im aktuellen New Media Service Ranking.
Als inhabergef=FChrte und netzwerkunabh=E4ngige Agentur geh=F6ren wir =
mit einem
Umsatz von 13,50 Mio. Euro zu den Top 10 der erfolgreichsten New Media
Dienstleister in Deutschland.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29136-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 12 09:03:52 2007
Return-Path: <java-user-return-29136-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32116 invoked from network); 12 Jul 2007 09:03:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jul 2007 09:03:50 -0000
Received: (qmail 61225 invoked by uid 500); 12 Jul 2007 09:03:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61185 invoked by uid 500); 12 Jul 2007 09:03:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61174 invoked by uid 99); 12 Jul 2007 09:03:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jul 2007 02:03:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [213.133.33.40] (HELO smtp.is.nl) (213.133.33.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jul 2007 02:03:40 -0700
Received: from [213.133.51.241] (HELO hai01.hippo.local)
  by smtp.is.nl (CommuniGate Pro SMTP 5.0.10)
  with ESMTP id 19320056 for java-user@lucene.apache.org; Thu, 12 Jul 2007 11:03:18 +0200
content-class: urn:content-classes:message
Subject: RE: Calling indexWriter.close() in web app
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Date: Thu, 12 Jul 2007 11:03:18 +0200
Message-ID: <A955EA1F8FE31749AEC8C998082F6C7CD6EA35@hai01.hippo.local>
X-MimeOLE: Produced By Microsoft Exchange V6.0.6619.12
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Calling indexWriter.close() in web app
Thread-Index: AcfEHjMJTYwOTsxjSkODWxT70ueTzQARLusQ
From: "Ard Schrijvers" <a.schrijvers@hippo.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,
>=20
> The lock file is only for Writers. The lock file ensures that=20
> even two=20
> writers from two JVM's will not step on each other. Readers=20
> do not care=20
> about what the writers are doing or whether there is a lock=20
> file...

Is this always true? The deleteDocuments method of the IndexReader will =
throw a LockObtainFailedException when another writer has the index =
open.=20

It might be confusing that from a reader you can delete documents. IIRC, =
the thing above will only hold when you only use a reader for reading.

Regards Ard

> even=20
> more so with the new generational files i believe.
>=20
> - Mark
>=20
> vcampa wrote:
> > Steinert, Fabian wrote:
> >  =20
> >> Hi,
> >> you do not need to writer.close() the IndexWriter at all=20
> to make changes
> >> visible.
> >> When IndexWriter is constructed with autoCommit =3D true flag set,
> >> calling writer.flush() will do.
> >>
> >>    =20
> >
> > Ok, but what about the write.lock? IndexWriter releases its=20
> write.lock only
> > when closed, so i think problems may begin when i try to=20
> open IndexReader on
> > a locked index. I'm still confused... help.
> >
> >  =20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29137-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 12 10:35:18 2007
Return-Path: <java-user-return-29137-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71543 invoked from network); 12 Jul 2007 10:35:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jul 2007 10:35:15 -0000
Received: (qmail 78769 invoked by uid 500); 12 Jul 2007 10:35:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78672 invoked by uid 500); 12 Jul 2007 10:35:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78661 invoked by uid 99); 12 Jul 2007 10:35:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jul 2007 03:35:02 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=DNS_FROM_AHBL_RHSBL,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.228 as permitted sender)
Received: from [66.249.82.228] (HELO wx-out-0506.google.com) (66.249.82.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jul 2007 03:34:59 -0700
Received: by wx-out-0506.google.com with SMTP id i28so89523wxd
        for <java-user@lucene.apache.org>; Thu, 12 Jul 2007 03:34:38 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=oloLC6a/DvwdcAApTPNj6eBPOAbAvUiv7S6sAXuOYV/7CdmAcyls2cygTpqHdFiuHA3zUwITl+uS8JCFyalTy+/U6neUQ7xIYPfz7iP/iNny3Zys4LZCXsHGL++R3VyjKK37lY/Ow/zMRdw3Dd/4CljabKTVA6OX+jluupwlUXc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=AxjvGqvuwuGiPkoiLJxoWs4EaOHcEr5TTuMTOlucocQWaV2dFWAbQ/F2dbxuovgAm6WVaSqT7JY8tGUkkT/22llnt/DlVpfgNleHSnKlVy2uaYlPrCrnI/zqw7zQ3ruyBss6fmcuCcg+fQWTcHvRemQUf1OqlbWwRX1XHu6XVd8=
Received: by 10.70.25.12 with SMTP id 12mr861059wxy.1184236478625;
        Thu, 12 Jul 2007 03:34:38 -0700 (PDT)
Received: from ?192.168.1.100? ( [216.66.114.204])
        by mx.google.com with ESMTP id m33sm20849663ele.2007.07.12.03.34.37
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 12 Jul 2007 03:34:37 -0700 (PDT)
Message-ID: <4696034D.7070600@gmail.com>
Date: Thu, 12 Jul 2007 06:32:45 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.4 (Windows/20070604)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Calling indexWriter.close() in web app
References: <A955EA1F8FE31749AEC8C998082F6C7CD6EA35@hai01.hippo.local>
In-Reply-To: <A955EA1F8FE31749AEC8C998082F6C7CD6EA35@hai01.hippo.local>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Sorry I was not clear on this. I just meant that you will not have any 
trouble opening a Reader on an index with a lock file. You may have 
trouble deleting with that Reader <g>

When you are using a Reader as a "Writing Reader" i.e. deleting, then 
you pretty much have to consider it as a Writer. I find it very 
convenient to separate my Readers from my Writing Readers. In fact, now 
that Writers can delete (by buffering and using an in internal Reader), 
I only use Readers for read-only operations. Either way, it makes sense 
to draw a separation between Reading Readers and Writing Readers. If 
your going to delete with a Reader, you might as well just consider it a 
Writer as you will have to coordinate it as such. I prefer the Writer 
delete approach as you don't have to close and then reopen the writer.

- Mark

Ard Schrijvers wrote:
> Hello,
>   
>> The lock file is only for Writers. The lock file ensures that 
>> even two 
>> writers from two JVM's will not step on each other. Readers 
>> do not care 
>> about what the writers are doing or whether there is a lock 
>> file...
>>     
>
> Is this always true? The deleteDocuments method of the IndexReader will throw a LockObtainFailedException when another writer has the index open. 
>
> It might be confusing that from a reader you can delete documents. IIRC, the thing above will only hold when you only use a reader for reading.
>
> Regards Ard
>
>   
>> even 
>> more so with the new generational files i believe.
>>
>> - Mark
>>
>> vcampa wrote:
>>     
>>> Steinert, Fabian wrote:
>>>   
>>>       
>>>> Hi,
>>>> you do not need to writer.close() the IndexWriter at all 
>>>>         
>> to make changes
>>     
>>>> visible.
>>>> When IndexWriter is constructed with autoCommit = true flag set,
>>>> calling writer.flush() will do.
>>>>
>>>>     
>>>>         
>>> Ok, but what about the write.lock? IndexWriter releases its 
>>>       
>> write.lock only
>>     
>>> when closed, so i think problems may begin when i try to 
>>>       
>> open IndexReader on
>>     
>>> a locked index. I'm still confused... help.
>>>
>>>   
>>>       
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29138-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 12 10:37:25 2007
Return-Path: <java-user-return-29138-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72818 invoked from network); 12 Jul 2007 10:37:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jul 2007 10:37:20 -0000
Received: (qmail 85489 invoked by uid 500); 12 Jul 2007 10:37:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85447 invoked by uid 500); 12 Jul 2007 10:37:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85436 invoked by uid 99); 12 Jul 2007 10:37:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jul 2007 03:37:14 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=DNS_FROM_AHBL_RHSBL,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.234 as permitted sender)
Received: from [66.249.82.234] (HELO wx-out-0506.google.com) (66.249.82.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jul 2007 03:37:10 -0700
Received: by wx-out-0506.google.com with SMTP id i28so89939wxd
        for <java-user@lucene.apache.org>; Thu, 12 Jul 2007 03:36:49 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=WgQ4g/+hxG/6KI38NIYvVqRUXkXxJShq4V4OZzpLEdgKa+kn1bVOJBeq0/Dj0/r/Jw3pjT7436t5V+sxkAwvHAgFg5HDtRdt5kySRlSXxtTc4rAuLHhV9V/sDmvBEGfBEhFgZL885gfS60m2e3U2Ur+VN6KQ8HVbtP1rdaiiUTg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=F4wT26gFM2phY5iR9zt/KojXSu0IivkZ6J1sE+3/jiAdKw7ufeD5H6pdzaYko6ulv1GCmNRflpBNtu2vDf9a7MnTj41fuRr8LukEmVsVRdbE4XesZEUMZB0ix+7N1UmMwpaZeK1jgewlK3/+pIJmep67nKwplMJrdnnUH1JvDgs=
Received: by 10.70.111.2 with SMTP id j2mr847004wxc.1184236609505;
        Thu, 12 Jul 2007 03:36:49 -0700 (PDT)
Received: from ?192.168.1.100? ( [216.66.114.204])
        by mx.google.com with ESMTP id o29sm22660948elf.2007.07.12.03.36.47
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 12 Jul 2007 03:36:49 -0700 (PDT)
Message-ID: <469603D0.5080104@gmail.com>
Date: Thu, 12 Jul 2007 06:34:56 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.4 (Windows/20070604)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Wildcard queries don't work on untokenized fields (Lucene 2.2.0)
References: <F60407925D044842B7E21677C8B8CE2818C526F4@fafnir.intra.dmc.de>
In-Reply-To: <F60407925D044842B7E21677C8B8CE2818C526F4@fafnir.intra.dmc.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

On the QueryParser:

  /**
   * Whether terms of wildcard, prefix, fuzzy and range queries are to 
be automatically
   * lower-cased or not.  Default is <code>true</code>.
   */
  public void setLowercaseExpandedTerms(boolean lowercaseExpandedTerms) {
    this.lowercaseExpandedTerms = lowercaseExpandedTerms;
  }

- Mark

Michael Bckling wrote:
> Hi!
>
> I just discovered that it is not possible to search in untokenized fields
> when using a wildcard query.
>
> The query 
>
> code:KP00* becomes code:kp00*
>
> in its parsed form when it should really be "code:KP00*", as tested in Luke
> using a whitespace analyzer. When omitting the wildcard character *, the
> parsed query reads correctly as "code:KP00".
>
> Is this a bug or a "feature"?
>
> Thanks for any help!
>
>
> Michael
>
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29139-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 12 12:21:21 2007
Return-Path: <java-user-return-29139-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28795 invoked from network); 12 Jul 2007 12:21:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jul 2007 12:21:20 -0000
Received: (qmail 10273 invoked by uid 500); 12 Jul 2007 12:21:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10244 invoked by uid 500); 12 Jul 2007 12:21:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10232 invoked by uid 99); 12 Jul 2007 12:21:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jul 2007 05:21:14 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=DNS_FROM_AHBL_RHSBL,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of peterlkeegan@gmail.com designates 64.233.166.182 as permitted sender)
Received: from [64.233.166.182] (HELO py-out-1112.google.com) (64.233.166.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jul 2007 05:21:10 -0700
Received: by py-out-1112.google.com with SMTP id f31so364072pyh
        for <java-user@lucene.apache.org>; Thu, 12 Jul 2007 05:20:49 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=A1et9whIJ7/v0ygKs/emFiSOMJQQEWXjAU2XJDlcyR1RNukLbB7k2AbmjKif9kIWHzjJfkNPErtxh7otuXwe62orzIHtomK65nzmo7rt2LLpacJYn1R4LdmIM7sNFhp+yIaSSdtmxYGLlcDdOYTswm7amhFj8FZDft5S8/jQqgU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=IdDgYB4V44TGJQM9+PNggL4AvNNJUBhneEv2MdrfOBI+Q8J43DRv3D9Uj+JWrlhlkGuQoh9RAD8c4nY/GiBsQarPX04jOR+I8EbMrr2Rtn59kUVRrrFDhVUl/q1uf3zoLDwG0b24GoJLuZJT4MAwK0GqXH7tyZkOCw9gtzYcEhc=
Received: by 10.64.199.2 with SMTP id w2mr852079qbf.1184242849512;
        Thu, 12 Jul 2007 05:20:49 -0700 (PDT)
Received: by 10.65.154.8 with HTTP; Thu, 12 Jul 2007 05:20:49 -0700 (PDT)
Message-ID: <e994873a0707120520lfee8853i7f37cf1c08c7d658@mail.gmail.com>
Date: Thu, 12 Jul 2007 08:20:49 -0400
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Payloads and PhraseQuery
In-Reply-To: <Pine.LNX.4.58.0707111733080.28722@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_19633_27592389.1184242849470"
References: <e994873a0706270745o458b969aqdd0204b0c4027ec4@mail.gmail.com>
	 <1C6823A4-BA05-4C20-8B74-3BE527E6CD97@apache.org>
	 <e994873a0707111719o2a083862h6aaafca529c2cfcf@mail.gmail.com>
	 <Pine.LNX.4.58.0707111733080.28722@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_19633_27592389.1184242849470
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'm looking for Spans.getPositions(), as shown in BoostingTermQuery, but
neither NearSpansOrdered nor NearSpansUnordered (which are the Spans
provided by SpanNearQuery) provide this method and it's not clear to me how
to add it.

Peter

On 7/11/07, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
>
> : I'm now looking at using payloads with SpanNearQuery but I don't see any
> : clear way of getting the payload(s) from the matching span terms. The
> term
> : positions for the payloads seem to be buried beneath SpanCells in the
>
> Isn't Spans.start() and Spans.end() what you are looking for?
>
>
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_19633_27592389.1184242849470--

From java-user-return-29140-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 12 12:52:00 2007
Return-Path: <java-user-return-29140-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40604 invoked from network); 12 Jul 2007 12:51:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jul 2007 12:51:03 -0000
Received: (qmail 73882 invoked by uid 500); 12 Jul 2007 12:50:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73845 invoked by uid 500); 12 Jul 2007 12:50:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73832 invoked by uid 99); 12 Jul 2007 12:50:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jul 2007 05:50:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.207] (HELO spunkymail-a18.g.dreamhost.com) (208.97.132.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jul 2007 05:50:53 -0700
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a18.g.dreamhost.com (Postfix) with ESMTP id E50D45B531
	for <java-user@lucene.apache.org>; Thu, 12 Jul 2007 05:50:30 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <e994873a0707120520lfee8853i7f37cf1c08c7d658@mail.gmail.com>
References: <e994873a0706270745o458b969aqdd0204b0c4027ec4@mail.gmail.com> <1C6823A4-BA05-4C20-8B74-3BE527E6CD97@apache.org> <e994873a0707111719o2a083862h6aaafca529c2cfcf@mail.gmail.com> <Pine.LNX.4.58.0707111733080.28722@hal.rescomp.berkeley.edu> <e994873a0707120520lfee8853i7f37cf1c08c7d658@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <2C5B5373-6A53-49EC-B168-010D57F432DB@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Payloads and PhraseQuery
Date: Thu, 12 Jul 2007 08:50:25 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

That is off of the TermSpans class.  BTQ (BoostingTermQuery) is  
implemented to extend SpanQuery, thus SpanNearQuery isn't, w/o  
modification, going to have access to these things.  However, if you  
look at the SpanTermQuery, you will see that it's implementation of  
Spans is indeed the TermSpans class.  So, I think you could cast to  
it or handle it through instanceof.

I am not completely sure here, but it seems like we may need an  
efficient way to access the TermPositions for each document.  That  
is, the Spans class doesn't provide this and maybe it should  
somehow.  Again, I am just thinking out loud here.

Thus, if we modified Spans to have the following methods:

byte[] getPayload(byte[] data, int offset)

boolean isPayloadAvailable()

I think this would be useful.  Perhaps this should be discussed on dev.

Cheers,
Grant


On Jul 12, 2007, at 8:20 AM, Peter Keegan wrote:

> I'm looking for Spans.getPositions(), as shown in  
> BoostingTermQuery, but
> neither NearSpansOrdered nor NearSpansUnordered (which are the Spans
> provided by SpanNearQuery) provide this method and it's not clear  
> to me how
> to add it.
>
> Peter
>
> On 7/11/07, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>>
>>
>> : I'm now looking at using payloads with SpanNearQuery but I don't  
>> see any
>> : clear way of getting the payload(s) from the matching span  
>> terms. The
>> term
>> : positions for the payloads seem to be buried beneath SpanCells  
>> in the
>>
>> Isn't Spans.start() and Spans.end() what you are looking for?
>>
>>
>>
>>
>>
>> -Hoss
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

Read the Lucene Java FAQ at http://wiki.apache.org/lucene-java/LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29141-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 12 13:28:33 2007
Return-Path: <java-user-return-29141-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64781 invoked from network); 12 Jul 2007 13:28:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jul 2007 13:28:31 -0000
Received: (qmail 71836 invoked by uid 500); 12 Jul 2007 13:28:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71793 invoked by uid 500); 12 Jul 2007 13:28:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71782 invoked by uid 99); 12 Jul 2007 13:28:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jul 2007 06:28:26 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [68.142.201.182] (HELO web31702.mail.mud.yahoo.com) (68.142.201.182)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 12 Jul 2007 06:28:22 -0700
Received: (qmail 73171 invoked by uid 60001); 12 Jul 2007 13:28:00 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=uZHRt4nbzSm67efNY7syTG7P5QX/MzOtW7ufVskD52zZod3NAQhW9NhwVpbDA9cUDYcpjmT/lLt5/IBwjxVPvKRgKQLdK09j0fq2v9gGUt9Oj6MyJscqPYbLRUiPl8SAgpvlc7kYok2bDOF+wQKeZpki5Z+FIqkqgVGBHK53ST4=;
X-YMail-OSG: 4asLTvsVM1lQPwOH0dFoo_0CF77BXSdt1O584BetaW7HAYLHekszfusI.iTxOPrW.rpYIt.jSfckiOP.1cQbziFrqQFspftPNkBs91Xk_aBsGIE.88yMXWGgKT_Vrw--
Received: from [196.204.160.40] by web31702.mail.mud.yahoo.com via HTTP; Thu, 12 Jul 2007 06:27:59 PDT
Date: Thu, 12 Jul 2007 06:27:59 -0700 (PDT)
From: Heba Farouk <heba.farouk@yahoo.com>
Reply-To: heba.farouk@yahoo.com
Subject: checking existing docs before indexing
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-589024334-1184246879=:73163"
Content-Transfer-Encoding: 8bit
Message-ID: <241150.73163.qm@web31702.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-589024334-1184246879=:73163
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hello
i'm a newbie to lucene world and i hope that u help me.
i was asking is there any options in IndexWriter to check if a document already exsits before adding it to the index or i should maintain it manually ??

thanks in advance


Yours 

Heba

       
---------------------------------
Choose the right car based on your needs.  Check out Yahoo! Autos new Car Finder tool.
--0-589024334-1184246879=:73163--

From java-user-return-29142-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 12 13:40:52 2007
Return-Path: <java-user-return-29142-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73094 invoked from network); 12 Jul 2007 13:40:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jul 2007 13:40:51 -0000
Received: (qmail 1264 invoked by uid 500); 12 Jul 2007 13:40:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1233 invoked by uid 500); 12 Jul 2007 13:40:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1216 invoked by uid 99); 12 Jul 2007 13:40:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jul 2007 06:40:46 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=DNS_FROM_AHBL_RHSBL,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jeff.lucene@gmail.com designates 64.233.184.232 as permitted sender)
Received: from [64.233.184.232] (HELO wr-out-0506.google.com) (64.233.184.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jul 2007 06:40:43 -0700
Received: by wr-out-0506.google.com with SMTP id m59so98904wrm
        for <java-user@lucene.apache.org>; Thu, 12 Jul 2007 06:40:22 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=MU78CzGf4iKOB+6PePiwPDwvGuqLfHn8droXSh69g5yQtn7zjUapOu9Ojvo+JkE+4hvRjLIfZZNhtgAdYWliug0NnNTgQ7INkgqIremMBssBx5zxbfskSJYlQnTdqzm1HmBOXqHYI9H4GT2qVgfY5U3+eEkcrc6OHJ0P/oqfflA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=pejrgU0RlLVrew1/uiL8fjfBE4MRJfliEKajZ+rgvfgqOuk1SL1yxdQ+QZoEO50pLdCc0e7sCtBZU9QSHhOGMMIfTfGr4N4AuhkXUFyt6ZND7vGZCLn8Xujuk+iSEvyLkH5RbWCsRGrt+q8741u5MOk8qdAWgCcno7zsEhZeX04=
Received: by 10.142.73.8 with SMTP id v8mr44015wfa.1184247621616;
        Thu, 12 Jul 2007 06:40:21 -0700 (PDT)
Received: by 10.143.8.11 with HTTP; Thu, 12 Jul 2007 06:40:21 -0700 (PDT)
Message-ID: <cfc620660707120640w28d6848bj9e57ec7f5e38fb9c@mail.gmail.com>
Date: Thu, 12 Jul 2007 09:40:21 -0400
From: Jeff <jeff.lucene@gmail.com>
To: java-user@lucene.apache.org
Subject: replace values in index
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14001_21089228.1184247621550"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_14001_21089228.1184247621550
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I have documents with lots of text. Part of the text is in the following
format:

word1,word2,word3,word4,word5

I am currently using the StandardAnalyzer and everything is working great
with the other data, except I can't query for 'word3' as a ',' isn't a token
seperator. Is there an easy way to add ',' as a token seperator?

Thanks,

-Jeff

------=_Part_14001_21089228.1184247621550--

From java-user-return-29143-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 12 14:09:52 2007
Return-Path: <java-user-return-29143-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90802 invoked from network); 12 Jul 2007 14:09:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jul 2007 14:09:50 -0000
Received: (qmail 88503 invoked by uid 500); 12 Jul 2007 14:09:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88454 invoked by uid 500); 12 Jul 2007 14:09:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88443 invoked by uid 99); 12 Jul 2007 14:09:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jul 2007 07:09:44 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=DNS_FROM_AHBL_RHSBL,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.239 as permitted sender)
Received: from [66.249.82.239] (HELO wx-out-0506.google.com) (66.249.82.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jul 2007 07:09:41 -0700
Received: by wx-out-0506.google.com with SMTP id i28so137327wxd
        for <java-user@lucene.apache.org>; Thu, 12 Jul 2007 07:09:20 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=b/UOeB3KUETflpc+Aocw3e+c2WBwQKmbDFWBQ+NilEopjZWCY8rglY+jYncW09PDFcgoXd4o+1oNtw8CPlFhCyXPCG/efjfK/p69JjyYe5+dtNm/AUYnV5kOUTeDl8JHy6iHT1waeoSG/6kmL8p6jzVA+GQTiHiE7Yg1ZqjbJxQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=Xl6sF+4Whvdf4HpOL1aefp0p/UGu4XaU/vfvceHDTQNdE28gNsr3Fo+frs+5aYHeRQtD4H7TkbAk5hvm/7wU8Exc/63oBNEEIdcGfk8jiVZugnYgJCe7YRc4BuD8AXw/TSHcsOKL3//wyEGy6yLqfZA60CvAnuwa8geUZe3UrYo=
Received: by 10.90.79.6 with SMTP id c6mr394708agb.1184249360779;
        Thu, 12 Jul 2007 07:09:20 -0700 (PDT)
Received: from ?192.168.1.100? ( [216.66.114.204])
        by mx.google.com with ESMTP id q34sm34761322wrq.2007.07.12.07.09.17
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 12 Jul 2007 07:09:18 -0700 (PDT)
Message-ID: <46963595.1010507@gmail.com>
Date: Thu, 12 Jul 2007 10:07:17 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.4 (Windows/20070604)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: replace values in index
References: <cfc620660707120640w28d6848bj9e57ec7f5e38fb9c@mail.gmail.com>
In-Reply-To: <cfc620660707120640w28d6848bj9e57ec7f5e38fb9c@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

While it is possible to alter the StandardAnalyzer, depending on more 
details of your source text, it may be better to use a different 
analyzer or make your own. The StandardAnalyzer is quite slow if you do 
not need all of its features, and modifying it will make it harder to 
keep up with bug fixes or improvements.

That said, StandardAnalyzer does split on commas, so you might want to 
check into whats really going on.

I suspect that 'word1,word2,word3,word4,word5' is being recognized as a 
NUM by StandardAnalzyer. A NUM match will keep a comma deliminated list 
intact as long as every other word contains a digit.

You might alter the <#P regular expression in StandardAnalyzer.jj by 
taking out the ','. This will take out certain matches (like the match 
your getting <g>), but will stop screwing up your matches.
 
- Mark

Jeff wrote:
> I have documents with lots of text. Part of the text is in the following
> format:
>
> word1,word2,word3,word4,word5
>
> I am currently using the StandardAnalyzer and everything is working great
> with the other data, except I can't query for 'word3' as a ',' isn't a 
> token
> seperator. Is there an easy way to add ',' as a token seperator?
>
> Thanks,
>
> -Jeff
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29144-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 12 14:18:23 2007
Return-Path: <java-user-return-29144-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94906 invoked from network); 12 Jul 2007 14:18:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jul 2007 14:18:21 -0000
Received: (qmail 8942 invoked by uid 500); 12 Jul 2007 14:18:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8897 invoked by uid 500); 12 Jul 2007 14:18:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8884 invoked by uid 99); 12 Jul 2007 14:18:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jul 2007 07:18:17 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=DNS_FROM_AHBL_RHSBL,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jul 2007 07:18:13 -0700
Received: by nf-out-0910.google.com with SMTP id d3so9813nfc
        for <java-user@lucene.apache.org>; Thu, 12 Jul 2007 07:17:52 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=eAmImaOiThlxbOQG9QDEFtk3yzggZRnBxaN4iVozFfzgL+2rgemMBoMreBVKdY2OXqczbdyl4k0MXRhvUsphHhWgIitFP4uBp587UwewXl+VHsql5hskLJg5//keBJdOJ+bIkW0/YZ1e3tH8RHlhm45BFASJ7u+eWfQfFxp3cB4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Ra40cbefDVbHbjeeYxXQollmF3hP0QyRTK662kbzE8wF9s+hFou+VF9aL0OT65HzGbVXr6uAU0WOBzkUubN23k9cXNoopKPWX7fpx5zVJegGDeg28gdXQ31x2BH4RXfrN38jNqLSyrQ6OiM8BQKSvs+unOxCYaQnonRNXM7i6C8=
Received: by 10.82.127.14 with SMTP id z14mr567167buc.1184249872116;
        Thu, 12 Jul 2007 07:17:52 -0700 (PDT)
Received: by 10.82.167.12 with HTTP; Thu, 12 Jul 2007 07:17:52 -0700 (PDT)
Message-ID: <359a92830707120717x57cd8f12g72ab588141725838@mail.gmail.com>
Date: Thu, 12 Jul 2007 10:17:52 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org, heba.farouk@yahoo.com
Subject: Re: checking existing docs before indexing
In-Reply-To: <241150.73163.qm@web31702.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14712_24803428.1184249872094"
References: <241150.73163.qm@web31702.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_14712_24803428.1184249872094
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You have to check yourself. Lucene has no concept of relations
*between* documents. What you're really asking for is something
like a database unique key. No such luck, you have to create
one yourself.

What I've done is post-process the entire index, removing duplicates.
This can be done quite efficiently with TermDocs/TermEnum, and you
can then institute policies like, say, LIFO or FIFO.

You could also certainly check before adding a document, also
using TermEnum/TermDocs.

Best
Erick

On 7/12/07, Heba Farouk <heba.farouk@yahoo.com> wrote:
>
> Hello
> i'm a newbie to lucene world and i hope that u help me.
> i was asking is there any options in IndexWriter to check if a document
> already exsits before adding it to the index or i should maintain it
> manually ??
>
> thanks in advance
>
>
> Yours
>
> Heba
>
>
> ---------------------------------
> Choose the right car based on your needs.  Check out Yahoo! Autos new Car
> Finder tool.

------=_Part_14712_24803428.1184249872094--

From java-user-return-29145-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 12 14:19:54 2007
Return-Path: <java-user-return-29145-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95418 invoked from network); 12 Jul 2007 14:19:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jul 2007 14:19:52 -0000
Received: (qmail 14511 invoked by uid 500); 12 Jul 2007 14:19:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14470 invoked by uid 500); 12 Jul 2007 14:19:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14459 invoked by uid 99); 12 Jul 2007 14:19:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jul 2007 07:19:47 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [204.152.235.220] (HELO l98upmt3.hewitt.com) (204.152.235.220)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jul 2007 07:19:43 -0700
Received: from linkap11.hewitt.com (linkap11.hewitt.com [10.20.63.2])
	by l98upmt3.hewitt.com (8.13.4/8.13.4) with ESMTP id l6CEJMTX007385;
	Thu, 12 Jul 2007 09:19:22 -0500 (CDT)
Received: from 10.20.63.62 by linkap11.hewitt.com with ESMTP (Tumbleweed
 MMS SMTP Relay); Thu, 12 Jul 2007 09:20:43 -0500
X-Server-Uuid: 8E43C66C-9DC0-4EF6-8749-D8C04BB61E49
In-Reply-To: <241150.73163.qm@web31702.mail.mud.yahoo.com>
To: java-user@lucene.apache.org, heba.farouk@yahoo.com
Subject: Re: checking existing docs before indexing
MIME-Version: 1.0
X-Mailer: Lotus Notes 652HF1094 September 19, 2005
Message-ID: <OF98425C1A.F66AFB38-ON65257316.004E511B-65257316.004EAAEC@hewitt.com>
From: "Neeraj Gupta" <neeraj.gupta.2@hewitt.com>
Date: Thu, 12 Jul 2007 19:50:41 +0530
X-HANotesOU: Gurgaon
X-MIMETrack: Serialize by Router on LINTNG1/National/Hewitt
 Associates(Release 6.5.6|March 06, 2007) at 07/12/2007 09:20:43 AM,
 Serialize complete at 07/12/2007 09:20:43 AM
X-WSS-ID: 6A88E7312R813751289-06-01
Content-Type: multipart/alternative;
 boundary="=_alternative 004EAAEB65257316_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 004EAAEB65257316_=
Content-Type: text/plain;
 charset=us-ascii
Content-Transfer-Encoding: 7bit

Hi,

You an use updateDocument() method of IndexWriter to update any existing 
document.. It searches for a document matching the Term, if document 
existes then delete that document. After that it adds the provided 
document to the indexes in both the cases whether document exists or not.

Cheers,
Neeraj




"Heba Farouk" <heba.farouk@yahoo.com> 

07/12/2007 06:57 PM
Please respond to
java-user@lucene.apache.org, heba.farouk@yahoo.com



To
java-user@lucene.apache.org
cc

Subject
checking existing docs before indexing






Hello
i'm a newbie to lucene world and i hope that u help me.
i was asking is there any options in IndexWriter to check if a document 
already exsits before adding it to the index or i should maintain it 
manually ??

thanks in advance


Yours 

Heba

 
---------------------------------
Choose the right car based on your needs.  Check out Yahoo! Autos new Car 
Finder tool.

 
The information contained in this e-mail and any accompanying documents may contain information that is confidential or otherwise protected from disclosure. If you are not the intended recipient of this message, or if this message has been addressed to you in error, please immediately alert the sender by reply e-mail and then delete this message, including any attachments. Any dissemination, distribution or other use of the contents of this message by anyone other than the intended recipient 
is strictly prohibited.



--=_alternative 004EAAEB65257316_=--


From java-user-return-29146-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 12 16:08:52 2007
Return-Path: <java-user-return-29146-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25044 invoked from network); 12 Jul 2007 16:08:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jul 2007 16:08:50 -0000
Received: (qmail 93148 invoked by uid 500); 12 Jul 2007 16:08:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93105 invoked by uid 500); 12 Jul 2007 16:08:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93094 invoked by uid 99); 12 Jul 2007 16:08:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jul 2007 09:08:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [84.96.25.182] (HELO mail.e-manation.com) (84.96.25.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jul 2007 09:08:41 -0700
Received: by mail.e-manation.com (Postfix, from userid 1007)
	id EF794A0007A; Thu, 12 Jul 2007 18:03:08 +0200 (CEST)
X-Spam-Checker-Version: SpamAssassin 3.1.7-deb (2006-10-05) on 
	actarus.e-manation.com
X-Spam-Level: 
Received: from [10.10.1.131] (unknown [10.10.1.131])
	by mail.e-manation.com (Postfix) with ESMTP id BF8D3A0006C;
	Thu, 12 Jul 2007 18:03:06 +0200 (CEST)
Message-ID: <469651EC.90701@lingway.com>
Date: Thu, 12 Jul 2007 18:08:12 +0200
From: Samuel LEMOINE <samuel.lemoine@lingway.com>
User-Agent: Thunderbird 2.0.0.0 (X11/20070326)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
CC:  heba.farouk@yahoo.com
Subject: Re: checking existing docs before indexing
References: <OF98425C1A.F66AFB38-ON65257316.004E511B-65257316.004EAAEC@hewitt.com>
In-Reply-To: <OF98425C1A.F66AFB38-ON65257316.004E511B-65257316.004EAAEC@hewitt.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.1.7-deb

Neeraj Gupta a crit :
> Hi,
>
> You an use updateDocument() method of IndexWriter to update any existing 
> document.. It searches for a document matching the Term, if document 
> existes then delete that document. After that it adds the provided 
> document to the indexes in both the cases whether document exists or not.
>
> Cheers,
> Neeraj
>
>
>
>
> "Heba Farouk" <heba.farouk@yahoo.com> 
>
> 07/12/2007 06:57 PM
> Please respond to
> java-user@lucene.apache.org, heba.farouk@yahoo.com
>
>
>
> To
> java-user@lucene.apache.org
> cc
>
> Subject
> checking existing docs before indexing
>
>
>
>
>
>
> Hello
> i'm a newbie to lucene world and i hope that u help me.
> i was asking is there any options in IndexWriter to check if a document 
> already exsits before adding it to the index or i should maintain it 
> manually ??
>
> thanks in advance
>
>
> Yours 
>
> Heba
>
>  
> ---------------------------------
> Choose the right car based on your needs.  Check out Yahoo! Autos new Car 
> Finder tool.
>
>  
> The information contained in this e-mail and any accompanying documents may contain information that is confidential or otherwise protected from disclosure. If you are not the intended recipient of this message, or if this message has been addressed to you in error, please immediately alert the sender by reply e-mail and then delete this message, including any attachments. Any dissemination, distribution or other use of the contents of this message by anyone other than the intended recipient 
> is strictly prohibited.
>
>
>
>   
I also used the updateDocument() to do so, but I encountered the issue 
that it takes a term as argument, so that other documents may be deleted 
by this method. To avoid this, my conclusion was that a solution is to 
store some stored untokenized fields, used as keys to identify solely a 
document, each document being identified by a string that distinguish it 
from others (such as url or file path).

Sam


PS: Here is the sample code I've wrote during my internship, quite 
simple to grasp:
(there are no commentaries, I removed them as they were in french)
The method that could interest you is the addDocument(String) one.
Hope it helped.

public class Indexer {

    private static final Logger theLogger = Logger.getLogger(Indexer.class);

    private Analyzer theAnalyzer;
    private IndexWriter theIndexWriter;
    private Reader theReaderContent;
    private String theIndexPath;

    public Indexer(String anIndexPath) {
        theAnalyzer = new StandardAnalyzer();
        theIndexPath = anIndexPath;
    }

    public void addDocument(String aFileName){

        try {
        theIndexWriter = new IndexWriter(theIndexPath, theAnalyzer);
        } catch (IOException e) {
            theLogger.error(e);
        }

        Document doc = new Document();

        try {
            theReaderContent = new FileReader(aFileName);
        } catch (FileNotFoundException e) {
            theLogger.error(e);
        }

        TokenStream tokenStreamContent = new 
StandardTokenizer(theReaderContent);
        Field docPath = new Field("path", aFileName, Field.Store.YES, 
Field.Index.UN_TOKENIZED);
        Field docContent = new Field("content", tokenStreamContent);
        doc.add(docPath);
        doc.add(docContent);

        try {
//            theIndexWriter.addDocument(doc);
            theIndexWriter.updateDocument(new Term("path",aFileName),doc);
            theIndexWriter.close();
        } catch (IOException e) {
            theLogger.error(e);
        }
    }

    public void sort(){
        try {
            theIndexWriter = new IndexWriter(theIndexPath, theAnalyzer);
            theIndexWriter.optimize();
            theIndexWriter.close();
        } catch (IOException e) {
            theLogger.error(e);
        }
    }

   
    public void addAllDocuments(String aDirectoryPath){
        File directory = new File(aDirectoryPath);
        File[] subDirectory = directory.listFiles();
        System.out.println(subDirectory.length+" fichiers ont t 
indexs.");
        for (File file : subDirectory) {
        addDocument(file.getPath());
        }
        this.sort();
    }
}


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29147-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 12 17:14:02 2007
Return-Path: <java-user-return-29147-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57148 invoked from network); 12 Jul 2007 17:13:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jul 2007 17:13:59 -0000
Received: (qmail 29180 invoked by uid 500); 12 Jul 2007 17:13:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29135 invoked by uid 500); 12 Jul 2007 17:13:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29124 invoked by uid 99); 12 Jul 2007 17:13:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jul 2007 10:13:53 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=DNS_FROM_AHBL_RHSBL,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of sonusr@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jul 2007 10:13:50 -0700
Received: by ug-out-1314.google.com with SMTP id c2so434923ugf
        for <java-user@lucene.apache.org>; Thu, 12 Jul 2007 10:13:29 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=rJpCpUV2VVnBPHbG62aqm4LJ3XQR/1JQbHcbhMOe9ITQxSXSQJg5SvsD3jigDzlg4/4H9vbeJAV+O2x1dB4PPo7yxkFoVpwIKsV97Y2PwHfqB5aXZohJvaTAGt7rxWPcg7VTNmpeeikbxHWvHnSJZ7BOEZbPup3MPxomrUKSyDc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=Bly924IR6pGe40lvlrVGXrKnciiZz/YSqMNhNtt54AdvLTN2ACBfL8TjjAN9deenol0NIMxFOz9LOqtkEA+k2jNIAqBKuhurkPQwva7BxNBNwDPdhff1XwezV0cIe20X53SaFZHxz2CfgUjVHSCH1c7BbQ2MC0SQuCK4K6ObJKA=
Received: by 10.78.122.16 with SMTP id u16mr197633huc.1184260408963;
        Thu, 12 Jul 2007 10:13:28 -0700 (PDT)
Received: by 10.78.178.13 with HTTP; Thu, 12 Jul 2007 10:13:28 -0700 (PDT)
Message-ID: <d5b3ea330707121013j7baeee49r1ac80b695b040291@mail.gmail.com>
Date: Thu, 12 Jul 2007 22:43:28 +0530
From: "Sonu SR" <sonusr@gmail.com>
To: java-user@lucene.apache.org
Subject: How to reflect index changes to search automatically
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_16095_14132170.1184260408939"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_16095_14132170.1184260408939
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
     I have SearchServer and SearchClient programs. The SearchServer
using RemoteSearchable
for binding the indices in servers . The SearchClient using
ParallelMultiSearcher for searching the indices. The problem is that I have
to restart the search servers for reflecting the index change in search on
every index change(add or update). Is there any other solution to reflect
the changes in search. That is without restarting the SearchServer.

Thanks,
Sonu

------=_Part_16095_14132170.1184260408939--

From java-user-return-29148-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 12 17:15:49 2007
Return-Path: <java-user-return-29148-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58333 invoked from network); 12 Jul 2007 17:15:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jul 2007 17:15:48 -0000
Received: (qmail 35277 invoked by uid 500); 12 Jul 2007 17:15:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35246 invoked by uid 500); 12 Jul 2007 17:15:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35235 invoked by uid 99); 12 Jul 2007 17:15:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jul 2007 10:15:43 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [216.64.83.114] (HELO mail.rci-together.com) (216.64.83.114)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jul 2007 10:15:40 -0700
Received: from [10.1.11.120] (helo=thomrandolph.rci-together.com)
	by rcifw1.rci-together.com with esmtp (Exim 4.43)
	id 1I8ziO-0000mM-S5
	for java-user@lucene.apache.org; Thu, 12 Jul 2007 10:32:20 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C7C492.191F72AB"
Subject: Unable to set up CLASSPATH
Date: Thu, 12 Jul 2007 10:36:56 -0400
Message-ID: <E6F9A32D2602B042BE87133C08D8692F2D6E50@thomrandolph.rci-together.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Unable to set up CLASSPATH
Thread-Index: AcfEkhjvG8c27L1tRtSM9XPp9+asGA==
From: "Yom Chouloute" <ychouloute@rci-together.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C7C492.191F72AB
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I am trying to get Lucene installed on a redhat server but I have having
issues setting up the classpath
Here are my steps:

I downloaded the zip files from the lucene web site

I extracted  them to a folder titled : /var/www/html/lucene

I ran "ant war-demo" which was able to create a build directory with the
jar files (demo and core) inside  even though I got a couple errors like
clover not found and several warnings but it did say that the build was
successfull and it did  generate the jar files.


On the tutorial (http://lucene.apache.org/java/docs/demo.html) it says
"Put both of these files in your Java CLASSPATH."

Now when I run:
Javac -classpath  /var/www/html/lucene/build/....jar









------_=_NextPart_001_01C7C492.191F72AB--

From java-user-return-29149-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 12 17:17:42 2007
Return-Path: <java-user-return-29149-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59381 invoked from network); 12 Jul 2007 17:17:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jul 2007 17:17:41 -0000
Received: (qmail 45232 invoked by uid 500); 12 Jul 2007 17:17:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45205 invoked by uid 500); 12 Jul 2007 17:17:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45191 invoked by uid 99); 12 Jul 2007 17:17:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jul 2007 10:17:35 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=DNS_FROM_AHBL_RHSBL,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jul 2007 10:17:32 -0700
Received: by ug-out-1314.google.com with SMTP id c2so435786ugf
        for <java-user@lucene.apache.org>; Thu, 12 Jul 2007 10:17:10 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=n55fcMsu3wEdgIw64D4c8TIhaxzVmVBuEXvx1EtdrWdDfMLs1/woGCrbPowEKU6E3cMqtaD66hictxnLZphi6aGSSPXpW3ly1B03KC6q8ywWMdyC6MATxuKjHC5WqO6hBDXIJZsJv7ANlqJEKm5d0nGhujH+TTM+SDKo6ur8/S0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=d5VHI3yRsm+egAbGQ8foLTRrUFG6IcJ+bWsG5PzIBWCZ0tXcPGVUR+vr08F3j66zEhJyPyYJp/RfCaN7OK7lbvEHi+pqtt9Hkj/Hr+0dITMrP9kKxDyLI3v95AhPKww8QUhV24KXRqraZnweUmwuTopIHQz6BftKOsrXf9Ela4g=
Received: by 10.82.170.2 with SMTP id s2mr842129bue.1184260630624;
        Thu, 12 Jul 2007 10:17:10 -0700 (PDT)
Received: by 10.82.167.12 with HTTP; Thu, 12 Jul 2007 10:17:10 -0700 (PDT)
Message-ID: <359a92830707121017o43b4e727s5d13b8785b4cc661@mail.gmail.com>
Date: Thu, 12 Jul 2007 13:17:10 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to reflect index changes to search automatically
In-Reply-To: <d5b3ea330707121013j7baeee49r1ac80b695b040291@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_16381_22065462.1184260630608"
References: <d5b3ea330707121013j7baeee49r1ac80b695b040291@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_16381_22065462.1184260630608
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

In general, searchers cannot see changes to an index with out restarting,
so I suspect that the answer is "no". This is entirely independent of
remote,
parallel, etc.

Erick

On 7/12/07, Sonu SR <sonusr@gmail.com> wrote:
>
> Hi,
>      I have SearchServer and SearchClient programs. The SearchServer
> using RemoteSearchable
> for binding the indices in servers . The SearchClient using
> ParallelMultiSearcher for searching the indices. The problem is that I
> have
> to restart the search servers for reflecting the index change in search on
> every index change(add or update). Is there any other solution to reflect
> the changes in search. That is without restarting the SearchServer.
>
> Thanks,
> Sonu
>

------=_Part_16381_22065462.1184260630608--

From java-user-return-29150-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 12 17:22:07 2007
Return-Path: <java-user-return-29150-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61919 invoked from network); 12 Jul 2007 17:22:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jul 2007 17:22:06 -0000
Received: (qmail 55195 invoked by uid 500); 12 Jul 2007 17:22:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55166 invoked by uid 500); 12 Jul 2007 17:22:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55155 invoked by uid 99); 12 Jul 2007 17:22:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jul 2007 10:22:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [216.64.83.114] (HELO mail.rci-together.com) (216.64.83.114)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jul 2007 10:21:58 -0700
Received: from [10.1.11.120] (helo=thomrandolph.rci-together.com)
	by rcifw1.rci-together.com with esmtp (Exim 4.43)
	id 1I92B9-00061P-95
	for java-user@lucene.apache.org; Thu, 12 Jul 2007 13:10:11 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Unable to set up CLASSPATH
Date: Thu, 12 Jul 2007 13:21:36 -0400
Message-ID: <E6F9A32D2602B042BE87133C08D8692F2D6E53@thomrandolph.rci-together.local>
In-Reply-To: <E6F9A32D2602B042BE87133C08D8692F2D6E50@thomrandolph.rci-together.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Unable to set up CLASSPATH
Thread-Index: AcfEkhjvG8c27L1tRtSM9XPp9+asGAAFsynA
References: <E6F9A32D2602B042BE87133C08D8692F2D6E50@thomrandolph.rci-together.local>
From: "Yom Chouloute" <ychouloute@rci-together.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org


I am trying to get Lucene installed on a redhat server but I have having
issues setting up the classpath
Here are my steps:

I downloaded the zip files from the lucene web site

I extracted  them to a folder titled : /var/www/html/lucene

I ran "ant war-demo" which was able to create a build directory with the
jar files (demo and core) inside  even though I got a couple errors like
clover not found and several warnings but it did say that the build was
successfull and it did  generate the jar files.


On the tutorial (http://lucene.apache.org/java/docs/demo.html) it says
"Put both of these files in your Java CLASSPATH."

Now when I run:
Javac -classpath  /var/www/html/lucene/build/....jar

It is not working... Any good tutorial other than the one lucene
provides







---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29151-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 12 17:23:25 2007
Return-Path: <java-user-return-29151-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62671 invoked from network); 12 Jul 2007 17:23:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jul 2007 17:23:24 -0000
Received: (qmail 57628 invoked by uid 500); 12 Jul 2007 17:23:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57582 invoked by uid 500); 12 Jul 2007 17:23:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57571 invoked by uid 99); 12 Jul 2007 17:23:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jul 2007 10:23:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.109.24.32] (HELO smtp-vbr12.xs4all.nl) (194.109.24.32)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jul 2007 10:23:15 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr12.xs4all.nl (8.13.8/8.13.8) with ESMTP id l6CHMsZX023469
	for <java-user@lucene.apache.org>; Thu, 12 Jul 2007 19:22:54 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Payloads and PhraseQuery
Date: Thu, 12 Jul 2007 19:22:53 +0200
User-Agent: KMail/1.8.2
References: <e994873a0706270745o458b969aqdd0204b0c4027ec4@mail.gmail.com> <e994873a0707120520lfee8853i7f37cf1c08c7d658@mail.gmail.com> <2C5B5373-6A53-49EC-B168-010D57F432DB@apache.org>
In-Reply-To: <2C5B5373-6A53-49EC-B168-010D57F432DB@apache.org>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200707121922.53347.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org


On Thursday 12 July 2007 14:50, Grant Ingersoll wrote:
> That is off of the TermSpans class.  BTQ (BoostingTermQuery) is  
> implemented to extend SpanQuery, thus SpanNearQuery isn't, w/o  
> modification, going to have access to these things.  However, if you  
> look at the SpanTermQuery, you will see that it's implementation of  
> Spans is indeed the TermSpans class.  So, I think you could cast to  
> it or handle it through instanceof.
> 
> I am not completely sure here, but it seems like we may need an  
> efficient way to access the TermPositions for each document.  That  
> is, the Spans class doesn't provide this and maybe it should  
> somehow.  Again, I am just thinking out loud here.

SpanQueries can be nested, so the relationship between a span
and a term position can also be one to many, not only one to one.
For example a matching span in the Spans of a SpanNearQuery
can be based on two matching (near enough to match) term positions.

> 
> Thus, if we modified Spans to have the following methods:
> 
> byte[] getPayload(byte[] data, int offset)
> 
> boolean isPayloadAvailable()
> 
> I think this would be useful.  Perhaps this should be discussed on dev.

And the same holds for the payloads, there many be more than one
for a single Span.

Regards,
Paul Elschot

> 
> Cheers,
> Grant
> 
> 
> On Jul 12, 2007, at 8:20 AM, Peter Keegan wrote:
> 
> > I'm looking for Spans.getPositions(), as shown in  
> > BoostingTermQuery, but
> > neither NearSpansOrdered nor NearSpansUnordered (which are the Spans
> > provided by SpanNearQuery) provide this method and it's not clear  
> > to me how
> > to add it.
> >
> > Peter
> >
> > On 7/11/07, Chris Hostetter <hossman_lucene@fucit.org> wrote:
> >>
> >>
> >> : I'm now looking at using payloads with SpanNearQuery but I don't  
> >> see any
> >> : clear way of getting the payload(s) from the matching span  
> >> terms. The
> >> term
> >> : positions for the payloads seem to be buried beneath SpanCells  
> >> in the
> >>
> >> Isn't Spans.start() and Spans.end() what you are looking for?
> >>
> >>
> >>
> >>
> >>
> >> -Hoss
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> 
> --------------------------
> Grant Ingersoll
> Center for Natural Language Processing
> http://www.cnlp.org/tech/lucene.asp
> 
> Read the Lucene Java FAQ at http://wiki.apache.org/lucene-java/LuceneFAQ
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29152-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 12 17:24:16 2007
Return-Path: <java-user-return-29152-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63249 invoked from network); 12 Jul 2007 17:24:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jul 2007 17:24:15 -0000
Received: (qmail 60035 invoked by uid 500); 12 Jul 2007 17:24:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60004 invoked by uid 500); 12 Jul 2007 17:24:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59993 invoked by uid 99); 12 Jul 2007 17:24:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jul 2007 10:24:10 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=DNS_FROM_AHBL_RHSBL,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mbarbarelli@gmail.com designates 209.85.132.247 as permitted sender)
Received: from [209.85.132.247] (HELO an-out-0708.google.com) (209.85.132.247)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jul 2007 10:24:06 -0700
Received: by an-out-0708.google.com with SMTP id c5so57004anc
        for <java-user@lucene.apache.org>; Thu, 12 Jul 2007 10:23:46 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=aTD6FOkXIwJ2WW8ybXrhYDuHVnDThR3dL5mz2U1XXBJdmQdah3pDUIX4Sb5NMqgau+kp6zDVPy8dKnA5bdEctXt4l0XsdLazYwJkZjyNmM+gK5JlefiZyh6NKsBPzXQeave/x2BR1kWcTV+uEiDlZXQJuu2ZKWMXMCWOm2WwMuk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=e2nQzuPT8cGEMcK6tOrSF5W7riDJh+Wj8U6Ey0YNjq7FGOJQUh54Sa6ICTKsJ59cBy/OyK8pnMW9Lf7Rfw7NZCAGomCJjtKhFDPb4JWUq2JTqS05w9epDODmMDOyrGyxxiNzE9jWDGmxrYhX2k5d5i6bZiBqo1qk+HXGjMvcW5U=
Received: by 10.100.95.19 with SMTP id s19mr411714anb.1184261025998;
        Thu, 12 Jul 2007 10:23:45 -0700 (PDT)
Received: by 10.100.127.8 with HTTP; Thu, 12 Jul 2007 10:23:45 -0700 (PDT)
Message-ID: <a258c0620707121023n1c7c20aek5d39b6a5daa08b44@mail.gmail.com>
Date: Thu, 12 Jul 2007 18:23:45 +0100
From: "Michael Barbarelli" <mbarbarelli@gmail.com>
To: java-user@lucene.apache.org
Subject: Customizing Stop Word List?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_22118_12009499.1184261025819"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_22118_12009499.1184261025819
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello to All,

I'm having a problem with Lucene where certain words that I would like to be
included in the query are actually being ommitted from it.  And I think that
is because Lucene recognizes them as stop words.  This is the case with
roughly four terms in particular.  They look like English grammar particles,
but they are actually ISO country codes.

"IT"     (Italy)
"IN"     (India)
"BE"   (Belgium)
"NO"   (Norway)
"AT"    (Austria)

Scenario:
-------------
The user submits ISO country codes as part of the Lucene query to be matched
against a field in the Lucene index that also contains ISO country codes.
In most cases, this works fine due to the fact that the majority of ISO
country codes do not resemble grammar particles.  The following are okay,
for example.

GB  (Great Britain)
FR  (France)
NL  (Netherlands)

The following are stripped from queries, as listed above.

 "IT"     (Italy)
"IN"     (India)
"BE"   (Belgium)
"NO"   (Norway)
"AT"    (Austria)


So far, I have attempted to fix this problem by defining my own list of stop
words and passing that array onto a standard analyzer used for both indexing
and searching.  That didn't work.  Would a per-field analyzer work in this
case?

Any ideas?  Many thanks in advance for your help.

------=_Part_22118_12009499.1184261025819--

From java-user-return-29153-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 12 17:41:49 2007
Return-Path: <java-user-return-29153-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70966 invoked from network); 12 Jul 2007 17:41:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jul 2007 17:41:48 -0000
Received: (qmail 95758 invoked by uid 500); 12 Jul 2007 17:41:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95413 invoked by uid 500); 12 Jul 2007 17:41:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95323 invoked by uid 99); 12 Jul 2007 17:41:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jul 2007 10:41:41 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=DNS_FROM_AHBL_RHSBL,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jafarim@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jul 2007 10:41:37 -0700
Received: by py-out-1112.google.com with SMTP id f31so718358pyh
        for <java-user@lucene.apache.org>; Thu, 12 Jul 2007 10:41:16 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=T0H/x+dGEt7CGEuFfJ66iycsVGqrIXef5DTKWQb1bsxJFvX66JWF3G28zk1v7Rl0jU/uzoqW7HVsGCls+9BTqP64lPPB/o8Ql/MT73Kn2Mb+ZmjMQEZi7qJj1ztQpI65WQvlYB6Y7X3T5b0ZtGpx0/fuhxgSDn8R23RIuWeB+Bk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ehva/N7koFdmtuZg24Vm08WQxEFDhYv82E04/zCStV48T9wDUl5tvH9KyCgc+C5aki6z0N+eoGVVapukyZAogPOEMSgQfzmXSudZ7DG8Ox9ENcrXr+Dy3fGC/ZvWdNykbrRGQM+bgh0NLxvoAP116GQyqmHoA7ndrQZ5ATouA7w=
Received: by 10.65.234.2 with SMTP id l2mr1401118qbr.1184262076023;
        Thu, 12 Jul 2007 10:41:16 -0700 (PDT)
Received: by 10.65.233.18 with HTTP; Thu, 12 Jul 2007 10:41:15 -0700 (PDT)
Message-ID: <bddd3c950707121041h42741034oc65859299b336887@mail.gmail.com>
Date: Thu, 12 Jul 2007 21:11:15 +0330
From: jafarim <jafarim@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to reflect index changes to search automatically
In-Reply-To: <359a92830707121017o43b4e727s5d13b8785b4cc661@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_19334_7162042.1184262075977"
References: <d5b3ea330707121013j7baeee49r1ac80b695b040291@mail.gmail.com>
	 <359a92830707121017o43b4e727s5d13b8785b4cc661@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_19334_7162042.1184262075977
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

With local indices, it is enough to reopen the IndexSearcher by calling
close() and then renew the IndexSearcher object. How about RemoteSearchers?
Is it necessary to re-initialize remote search server?

--jaf


On 7/12/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> In general, searchers cannot see changes to an index with out restarting,
> so I suspect that the answer is "no". This is entirely independent of
> remote,
> parallel, etc.
>
> Erick
>
> On 7/12/07, Sonu SR <sonusr@gmail.com> wrote:
> >
> > Hi,
> >      I have SearchServer and SearchClient programs. The SearchServer
> > using RemoteSearchable
> > for binding the indices in servers . The SearchClient using
> > ParallelMultiSearcher for searching the indices. The problem is that I
> > have
> > to restart the search servers for reflecting the index change in search
> on
> > every index change(add or update). Is there any other solution to
> reflect
> > the changes in search. That is without restarting the SearchServer.
> >
> > Thanks,
> > Sonu
> >
>

------=_Part_19334_7162042.1184262075977--

From java-user-return-29154-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 12 17:45:53 2007
Return-Path: <java-user-return-29154-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73235 invoked from network); 12 Jul 2007 17:45:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jul 2007 17:45:52 -0000
Received: (qmail 3799 invoked by uid 500); 12 Jul 2007 17:45:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2806 invoked by uid 500); 12 Jul 2007 17:45:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2795 invoked by uid 99); 12 Jul 2007 17:45:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jul 2007 10:45:47 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=DNS_FROM_AHBL_RHSBL,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of grant.ingersoll@gmail.com designates 209.85.132.240 as permitted sender)
Received: from [209.85.132.240] (HELO an-out-0708.google.com) (209.85.132.240)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jul 2007 10:45:43 -0700
Received: by an-out-0708.google.com with SMTP id c5so58833anc
        for <java-user@lucene.apache.org>; Thu, 12 Jul 2007 10:45:22 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=nezHJi5o8KcI42o8zFKmVbJQyLNIq+4a/7SyzI5LPYuwGdgKFTmOTNL8CQDTD8/CnEP0vG1/Xa6vXZtg7lz2wIgDy79wWXo0/gB28tN4Qxio1Kq0Xxmn5gMlUScXpJoJWMvADJyY2bW+gX+IOnzhat+9dIF3uGJMjuVLEpX1jp4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=RiDVqPDZNVD7DboH/D8lUPz0qoXwAWFFVuQ3G3B/oIj5sRusb0nu86MdHwbVFzFgKX9CbPrJhcfAJhUqKXpKexiz+tOLWyYTajVG/n1O5C91BFIxq+VQoGT+q+P3QCMVJ5GqAglenL9sp0tfwGrmFbSDTJONJ5fJbwd4pYAQOMo=
Received: by 10.100.48.7 with SMTP id v7mr416199anv.1184262322804;
        Thu, 12 Jul 2007 10:45:22 -0700 (PDT)
Received: from ?192.168.0.3? ( [74.229.189.244])
        by mx.google.com with ESMTP id d34sm7834213and.2007.07.12.10.45.21
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 12 Jul 2007 10:45:22 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <200707121922.53347.paul.elschot@xs4all.nl>
References: <e994873a0706270745o458b969aqdd0204b0c4027ec4@mail.gmail.com> <e994873a0707120520lfee8853i7f37cf1c08c7d658@mail.gmail.com> <2C5B5373-6A53-49EC-B168-010D57F432DB@apache.org> <200707121922.53347.paul.elschot@xs4all.nl>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <7128553F-26E8-442B-9697-CF3A2C9A862E@gmail.com>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <grant.ingersoll@gmail.com>
Subject: Re: Payloads and PhraseQuery
Date: Thu, 12 Jul 2007 13:45:13 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Yep, totally agree.    One way to handle this initially at least is  
have isPayloadAvailable() only return true for the SpanTermQuery.   
The other option is to come up with some modification of the  
suggested methods below to return all the payloads in a span.

I have a basic implementation for just the SpanTermQuery (i.e. via  
TermSpans) in the works.  I will take a crack at fleshing out the  
rest at some point soon.

-Grant

On Jul 12, 2007, at 1:22 PM, Paul Elschot wrote:

>
> On Thursday 12 July 2007 14:50, Grant Ingersoll wrote:
>> That is off of the TermSpans class.  BTQ (BoostingTermQuery) is
>> implemented to extend SpanQuery, thus SpanNearQuery isn't, w/o
>> modification, going to have access to these things.  However, if you
>> look at the SpanTermQuery, you will see that it's implementation of
>> Spans is indeed the TermSpans class.  So, I think you could cast to
>> it or handle it through instanceof.
>>
>> I am not completely sure here, but it seems like we may need an
>> efficient way to access the TermPositions for each document.  That
>> is, the Spans class doesn't provide this and maybe it should
>> somehow.  Again, I am just thinking out loud here.
>
> SpanQueries can be nested, so the relationship between a span
> and a term position can also be one to many, not only one to one.
> For example a matching span in the Spans of a SpanNearQuery
> can be based on two matching (near enough to match) term positions.
>
>>
>> Thus, if we modified Spans to have the following methods:
>>
>> byte[] getPayload(byte[] data, int offset)
>>
>> boolean isPayloadAvailable()
>>
>> I think this would be useful.  Perhaps this should be discussed on  
>> dev.
>
> And the same holds for the payloads, there many be more than one
> for a single Span.
>
> Regards,
> Paul Elschot
>
>>
>> Cheers,
>> Grant
>>
>>
>> On Jul 12, 2007, at 8:20 AM, Peter Keegan wrote:
>>
>>> I'm looking for Spans.getPositions(), as shown in
>>> BoostingTermQuery, but
>>> neither NearSpansOrdered nor NearSpansUnordered (which are the Spans
>>> provided by SpanNearQuery) provide this method and it's not clear
>>> to me how
>>> to add it.
>>>
>>> Peter
>>>
>>> On 7/11/07, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>>>>
>>>>
>>>> : I'm now looking at using payloads with SpanNearQuery but I don't
>>>> see any
>>>> : clear way of getting the payload(s) from the matching span
>>>> terms. The
>>>> term
>>>> : positions for the payloads seem to be buried beneath SpanCells
>>>> in the
>>>>
>>>> Isn't Spans.start() and Spans.end() what you are looking for?
>>>>
>>>>
>>>>
>>>>
>>>>
>>>> -Hoss
>>>>
>>>>
>>>> ------------------------------------------------------------------- 
>>>> --
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>
>> --------------------------
>> Grant Ingersoll
>> Center for Natural Language Processing
>> http://www.cnlp.org/tech/lucene.asp
>>
>> Read the Lucene Java FAQ at http://wiki.apache.org/lucene-java/ 
>> LuceneFAQ
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

------------------------------------------------------
Grant Ingersoll
http://www.grantingersoll.com/
http://lucene.grantingersoll.com
http://www.paperoftheweek.com/



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29155-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 12 17:54:09 2007
Return-Path: <java-user-return-29155-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77579 invoked from network); 12 Jul 2007 17:54:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jul 2007 17:54:07 -0000
Received: (qmail 20875 invoked by uid 500); 12 Jul 2007 17:54:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20840 invoked by uid 500); 12 Jul 2007 17:54:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20829 invoked by uid 99); 12 Jul 2007 17:54:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jul 2007 10:54:02 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=DNS_FROM_AHBL_RHSBL,HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jpsondag@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jul 2007 10:53:59 -0700
Received: by py-out-1112.google.com with SMTP id f31so732349pyh
        for <java-user@lucene.apache.org>; Thu, 12 Jul 2007 10:53:38 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:mime-version:content-type:x-google-sender-auth;
        b=KVwCqMelVVEsHuTufLIeULB5Tgfyp+cn1+tELgcn5zdjYjVm0apROCQyQfcmnQpkORDkAaIohNz27QeqUrLOOcghK0e51LSApmnCyI+gRWKBMrrwonNoi/Q/YSBUICF303eZvtbLStfJvImEW9p6Xmsm0doTXGREQ3ROajWXuRg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:mime-version:content-type:x-google-sender-auth;
        b=PLDGm0ZEAiVolUFbuE8lP7YOFFyh/QP1oY3JAe1BIsJMZPoEPkc2QlyUbE1LYtUCo9doaDOpqi8a36rhkiEqckOkh0KtSSrXwRC+NmsK3JOLIYSzG8JYqrQh1pC/hfKVBD662cliIxt/jFOvG2wdC3wrEKfLGG/XZAgH/4SebOw=
Received: by 10.65.43.5 with SMTP id v5mr1414483qbj.1184262818532;
        Thu, 12 Jul 2007 10:53:38 -0700 (PDT)
Received: by 10.65.177.7 with HTTP; Thu, 12 Jul 2007 10:53:38 -0700 (PDT)
Message-ID: <bd67edef0707121053m3d692818r7ccdc238d07fdd74@mail.gmail.com>
Date: Thu, 12 Jul 2007 12:53:38 -0500
From: "John Paul Sondag" <jsondag2@uiuc.edu>
Sender: jpsondag@gmail.com
To: java-user@lucene.apache.org
Subject: Does Index have a Tokenizer Built into it
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_22126_22818566.1184262818505"
X-Google-Sender-Auth: b5ca981d59374b61
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_22126_22818566.1184262818505
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

When Lucene's standard Indexer is used to store documents does it store the
information about the tokens in anyway.  I'm playing around with making a
Snippet Generator (like the highlighter class), and it is going to involve a
very large amount of documents.  For my test cases I have only used one
document and simply passed the document into the StandardTokenizer.  But now
I am ready to start working with a large amount of documents.  I know one
option is to store the text of a document as a field and then open the index
and pass the text of the document into a tokenizer, but storing the text of
each document costs me way too much.  I'm wondering if after opening the
index I can retrieve the Tokens (not the terms) of a document, something
akin to IndexReader.Document(n).getTokenizer().

In summary:

My current ( too wasteful implementation is this)

StandardTokenizer(BufferedReader (  IndexReader.Document(n).getField("text"
)  )

I'm wondering if Lucene has a more efficient manner to retrieve the tokens
of a document from an index.  Because it seems like it has information about
every "term" already, Since you can get retrieve a TermPositions object.

Thanks,


--JP

------=_Part_22126_22818566.1184262818505--

From java-user-return-29156-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 12 18:23:28 2007
Return-Path: <java-user-return-29156-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85976 invoked from network); 12 Jul 2007 18:23:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jul 2007 18:23:26 -0000
Received: (qmail 91821 invoked by uid 500); 12 Jul 2007 18:23:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91782 invoked by uid 500); 12 Jul 2007 18:23:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91771 invoked by uid 99); 12 Jul 2007 18:23:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jul 2007 11:23:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.150] (HELO rescomp.berkeley.edu) (169.229.70.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jul 2007 11:23:17 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 43E885B77B; Thu, 12 Jul 2007 11:22:56 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 04E407F403
	for <java-user@lucene.apache.org>; Thu, 12 Jul 2007 11:22:56 -0700 (PDT)
Date: Thu, 12 Jul 2007 11:22:55 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Customizing Stop Word List?
In-Reply-To: <a258c0620707121023n1c7c20aek5d39b6a5daa08b44@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0707121121260.28552@hal.rescomp.berkeley.edu>
References: <a258c0620707121023n1c7c20aek5d39b6a5daa08b44@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: So far, I have attempted to fix this problem by defining my own list of stop
: words and passing that array onto a standard analyzer used for both indexing
: and searching.  That didn't work.  Would a per-field analyzer work in this

that is the correct way to change your stop word set ... you'll have to be
a little more specific about "That didn't work." to get any more specific
suggestions on your problem ... ie: can you send a small bit of self
contained sample code that shows it not working for you?

(typically the act of writing this sample code helps you spot where you
amy be doing something wrong in your application)


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29157-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 12 19:44:24 2007
Return-Path: <java-user-return-29157-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24773 invoked from network); 12 Jul 2007 19:44:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jul 2007 19:44:23 -0000
Received: (qmail 85409 invoked by uid 500); 12 Jul 2007 19:44:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85365 invoked by uid 500); 12 Jul 2007 19:44:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85353 invoked by uid 99); 12 Jul 2007 19:44:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jul 2007 12:44:17 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=DNS_FROM_AHBL_RHSBL,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mbarbarelli@gmail.com designates 209.85.132.250 as permitted sender)
Received: from [209.85.132.250] (HELO an-out-0708.google.com) (209.85.132.250)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jul 2007 12:44:14 -0700
Received: by an-out-0708.google.com with SMTP id c5so68980anc
        for <java-user@lucene.apache.org>; Thu, 12 Jul 2007 12:43:53 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=aluAiQh7x+gY3Xj5fiicPGx9AUwtFg+AUauCf0Fizy3gEnuCXRh6BcU30CxQMlFOTf1WO1xWQpKSZaSPv1uPsyRz+qsk4ZdVCVDIQZY5+7i+UTVHARLv7Tf1TYs79IyXEp+wJPmkYrEDNtCRl7XO4Bpd2uCvNseSZX0Lw88vjtI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=uEVgWVCj/8skCe7jbt/b3pnrEtrX3oOUcJRrd/GO0a69SyR/A1jJux1WeelRjMaxLv29a/2BwRmQQx+q+8HCtFhNs+M6bbwpNnnEuiMLEmJ7be7faO0H1zDgvLiJ21qWXEQifNEcPeJje/Y8+QU0eioRm0C8bLgBPbW62yE7jzU=
Received: by 10.100.144.11 with SMTP id r11mr516942and.1184269433566;
        Thu, 12 Jul 2007 12:43:53 -0700 (PDT)
Received: by 10.100.127.8 with HTTP; Thu, 12 Jul 2007 12:43:53 -0700 (PDT)
Message-ID: <a258c0620707121243h10a6f4dbp1a710d9978ba02bd@mail.gmail.com>
Date: Thu, 12 Jul 2007 20:43:53 +0100
From: "Michael Barbarelli" <mbarbarelli@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Customizing Stop Word List?
In-Reply-To: <Pine.LNX.4.58.0707121121260.28552@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_24187_11204841.1184269433529"
References: <a258c0620707121023n1c7c20aek5d39b6a5daa08b44@mail.gmail.com>
	 <Pine.LNX.4.58.0707121121260.28552@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_24187_11204841.1184269433529
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello Hoss.

Cheers for your response.  Much appreciated.

"typically the act of writing this sample code helps you spot where you
amy be doing something wrong in your application"

Fair enough point.  Unfortunately, I won't be able to post any sample code
until I return to my home office. Will post it as soon as possible.


"you'll have to be a little more specific about "That didn't work." "

Well, after supplying my own list of stop words as an argument to both
analyzers,  (for indexing and searching)  I noticed that the ISO country
codes in question (AT, BE, IN, etc..) were still being stripped from the
query syntax, as though my own list of stop words had never taken effect.  I
would very much appreciate it if you could stand by for my sample code.

Kindest Regards,
Mike

On 7/12/07, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
>
> : So far, I have attempted to fix this problem by defining my own list of
> stop
> : words and passing that array onto a standard analyzer used for both
> indexing
> : and searching.  That didn't work.  Would a per-field analyzer work in
> this
>
> that is the correct way to change your stop word set ... you'll have to be
> a little more specific about "That didn't work." to get any more specific
> suggestions on your problem ... ie: can you send a small bit of self
> contained sample code that shows it not working for you?
>
> (typically the act of writing this sample code helps you spot where you
> amy be doing something wrong in your application)
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_24187_11204841.1184269433529--

From java-user-return-29158-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 12 19:59:36 2007
Return-Path: <java-user-return-29158-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29624 invoked from network); 12 Jul 2007 19:59:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jul 2007 19:59:34 -0000
Received: (qmail 7608 invoked by uid 500); 12 Jul 2007 19:59:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7571 invoked by uid 500); 12 Jul 2007 19:59:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7411 invoked by uid 99); 12 Jul 2007 19:59:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jul 2007 12:59:27 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=DNS_FROM_AHBL_RHSBL,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of peterlkeegan@gmail.com designates 64.233.162.229 as permitted sender)
Received: from [64.233.162.229] (HELO nz-out-0506.google.com) (64.233.162.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jul 2007 12:59:23 -0700
Received: by nz-out-0506.google.com with SMTP id i28so203214nzi
        for <java-user@lucene.apache.org>; Thu, 12 Jul 2007 12:59:02 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=IPd4StmPJFFVPZRgoCzBkJ9SJhn769BeTHP8qfp3kps1Ug+BRcIDWhZFbyCN6FWEYHiDH+GElYyRIQgSU45JGHjM4AuPa1T+oEBC5zMmKpKWmhE+dR5p/BM2Ng8IF73hwScT/rDkPq7KxcIPUbLEGYPALomu0MN5uGFgjrV/ftc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=tLnxKZlx94yaGYxiCcL7XHITA3qTzBHaHwXqRFjhgj2MX2fB3HG390Oa2D/TiTuaMkQLZ4hFN81u8pXiZLUn1Q1RFOfN1aFPtueYI5ZpRnuCFhjtexYgg2zlha3+CMDyP9AA+E9OM0bZqLUFzrRa3ONYYaU0ah6kvIuu3QLCZjk=
Received: by 10.64.199.2 with SMTP id w2mr1681819qbf.1184270342482;
        Thu, 12 Jul 2007 12:59:02 -0700 (PDT)
Received: by 10.65.154.8 with HTTP; Thu, 12 Jul 2007 12:59:02 -0700 (PDT)
Message-ID: <e994873a0707121259g4a41f51ah37d6328e53e67683@mail.gmail.com>
Date: Thu, 12 Jul 2007 15:59:02 -0400
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Payloads and PhraseQuery
In-Reply-To: <7128553F-26E8-442B-9697-CF3A2C9A862E@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_25311_18220388.1184270342436"
References: <e994873a0706270745o458b969aqdd0204b0c4027ec4@mail.gmail.com>
	 <e994873a0707120520lfee8853i7f37cf1c08c7d658@mail.gmail.com>
	 <2C5B5373-6A53-49EC-B168-010D57F432DB@apache.org>
	 <200707121922.53347.paul.elschot@xs4all.nl>
	 <7128553F-26E8-442B-9697-CF3A2C9A862E@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_25311_18220388.1184270342436
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Grant,

If/when you have an implementation for SpanNearQuery, I'd be happy to test
it.

Peter

On 7/12/07, Grant Ingersoll <grant.ingersoll@gmail.com> wrote:
>
> Yep, totally agree.    One way to handle this initially at least is
> have isPayloadAvailable() only return true for the SpanTermQuery.
> The other option is to come up with some modification of the
> suggested methods below to return all the payloads in a span.
>
> I have a basic implementation for just the SpanTermQuery (i.e. via
> TermSpans) in the works.  I will take a crack at fleshing out the
> rest at some point soon.
>
> -Grant
>
> On Jul 12, 2007, at 1:22 PM, Paul Elschot wrote:
>
> >
> > On Thursday 12 July 2007 14:50, Grant Ingersoll wrote:
> >> That is off of the TermSpans class.  BTQ (BoostingTermQuery) is
> >> implemented to extend SpanQuery, thus SpanNearQuery isn't, w/o
> >> modification, going to have access to these things.  However, if you
> >> look at the SpanTermQuery, you will see that it's implementation of
> >> Spans is indeed the TermSpans class.  So, I think you could cast to
> >> it or handle it through instanceof.
> >>
> >> I am not completely sure here, but it seems like we may need an
> >> efficient way to access the TermPositions for each document.  That
> >> is, the Spans class doesn't provide this and maybe it should
> >> somehow.  Again, I am just thinking out loud here.
> >
> > SpanQueries can be nested, so the relationship between a span
> > and a term position can also be one to many, not only one to one.
> > For example a matching span in the Spans of a SpanNearQuery
> > can be based on two matching (near enough to match) term positions.
> >
> >>
> >> Thus, if we modified Spans to have the following methods:
> >>
> >> byte[] getPayload(byte[] data, int offset)
> >>
> >> boolean isPayloadAvailable()
> >>
> >> I think this would be useful.  Perhaps this should be discussed on
> >> dev.
> >
> > And the same holds for the payloads, there many be more than one
> > for a single Span.
> >
> > Regards,
> > Paul Elschot
> >
> >>
> >> Cheers,
> >> Grant
> >>
> >>
> >> On Jul 12, 2007, at 8:20 AM, Peter Keegan wrote:
> >>
> >>> I'm looking for Spans.getPositions(), as shown in
> >>> BoostingTermQuery, but
> >>> neither NearSpansOrdered nor NearSpansUnordered (which are the Spans
> >>> provided by SpanNearQuery) provide this method and it's not clear
> >>> to me how
> >>> to add it.
> >>>
> >>> Peter
> >>>
> >>> On 7/11/07, Chris Hostetter <hossman_lucene@fucit.org> wrote:
> >>>>
> >>>>
> >>>> : I'm now looking at using payloads with SpanNearQuery but I don't
> >>>> see any
> >>>> : clear way of getting the payload(s) from the matching span
> >>>> terms. The
> >>>> term
> >>>> : positions for the payloads seem to be buried beneath SpanCells
> >>>> in the
> >>>>
> >>>> Isn't Spans.start() and Spans.end() what you are looking for?
> >>>>
> >>>>
> >>>>
> >>>>
> >>>>
> >>>> -Hoss
> >>>>
> >>>>
> >>>> -------------------------------------------------------------------
> >>>> --
> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>
> >>>>
> >>
> >> --------------------------
> >> Grant Ingersoll
> >> Center for Natural Language Processing
> >> http://www.cnlp.org/tech/lucene.asp
> >>
> >> Read the Lucene Java FAQ at http://wiki.apache.org/lucene-java/
> >> LuceneFAQ
> >>
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >>
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
> ------------------------------------------------------
> Grant Ingersoll
> http://www.grantingersoll.com/
> http://lucene.grantingersoll.com
> http://www.paperoftheweek.com/
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_25311_18220388.1184270342436--

From java-user-return-29159-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 12 22:12:33 2007
Return-Path: <java-user-return-29159-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73025 invoked from network); 12 Jul 2007 22:12:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jul 2007 22:12:32 -0000
Received: (qmail 33209 invoked by uid 500); 12 Jul 2007 22:12:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33158 invoked by uid 500); 12 Jul 2007 22:12:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33147 invoked by uid 99); 12 Jul 2007 22:12:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jul 2007 15:12:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.150] (HELO rescomp.berkeley.edu) (169.229.70.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jul 2007 15:12:22 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id F19915B77B; Thu, 12 Jul 2007 15:12:00 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id D788D7F403
	for <java-user@lucene.apache.org>; Thu, 12 Jul 2007 15:12:00 -0700 (PDT)
Date: Thu, 12 Jul 2007 15:12:00 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Payloads and PhraseQuery
In-Reply-To: <2C5B5373-6A53-49EC-B168-010D57F432DB@apache.org>
Message-ID: <Pine.LNX.4.58.0707121359330.21045@hal.rescomp.berkeley.edu>
References: <e994873a0706270745o458b969aqdd0204b0c4027ec4@mail.gmail.com>
 <1C6823A4-BA05-4C20-8B74-3BE527E6CD97@apache.org>
 <e994873a0707111719o2a083862h6aaafca529c2cfcf@mail.gmail.com>
 <Pine.LNX.4.58.0707111733080.28722@hal.rescomp.berkeley.edu>
 <e994873a0707120520lfee8853i7f37cf1c08c7d658@mail.gmail.com>
 <2C5B5373-6A53-49EC-B168-010D57F432DB@apache.org>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: That is off of the TermSpans class.  BTQ (BoostingTermQuery) is
	...
: I am not completely sure here, but it seems like we may need an
: efficient way to access the TermPositions for each document.  That
: is, the Spans class doesn't provide this and maybe it should
	...
: > I'm looking for Spans.getPositions(), as shown in
	...
: >> : I'm now looking at using payloads with SpanNearQuery but I don't
: >> see any
: >> : clear way of getting the payload(s) from the matching span
: >> terms. The

Hmm... okay so the issue is that in order to get the payload data, you
have to have a TermPositions instance.

instead of adding getPayload methods to the Spans class (which as Paul
points out, can have nesting issues) perhaps more general solutions would
be:

a) a more high level getPayload API that let's you get a payload
arbitrarily for a toc/position (perhaps as part of the TernDocs API?) ...
then for Spans you could use this new API with Spans.start() and
Spans.end(). (and all the positions in between)

b) add a variation of the TermPositions class to allow people to iterate
through the terms of a TermDoc in position order (TermPosition first
iterates over the Terms and then over the positions) ... then you could
seek(span.start()) to get the Payload data

c) add methods to the Spans API to get the subspans (if any) ... this
would be the Spans corrilary to getTerms() and would always return
TermSpans which would have TermPositions for getting payload data.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29160-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 12 23:13:00 2007
Return-Path: <java-user-return-29160-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1205 invoked from network); 12 Jul 2007 23:12:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jul 2007 23:12:59 -0000
Received: (qmail 56413 invoked by uid 500); 12 Jul 2007 23:12:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55880 invoked by uid 500); 12 Jul 2007 23:12:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55869 invoked by uid 99); 12 Jul 2007 23:12:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jul 2007 16:12:54 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.153 as permitted sender)
Received: from [195.212.29.153] (HELO mtagate4.de.ibm.com) (195.212.29.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jul 2007 16:12:51 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate4.de.ibm.com (8.13.8/8.13.8) with ESMTP id l6CNCTXp053860
	for <java-user@lucene.apache.org>; Thu, 12 Jul 2007 23:12:29 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.3) with ESMTP id l6CNBEWI2240542
	for <java-user@lucene.apache.org>; Fri, 13 Jul 2007 01:11:14 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l6CNBEmV007224
	for <java-user@lucene.apache.org>; Fri, 13 Jul 2007 01:11:14 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l6CNBEAi007221
	for <java-user@lucene.apache.org>; Fri, 13 Jul 2007 01:11:14 +0200
In-Reply-To: <11510351.post@talk.nabble.com>
Subject: Re: Lucene RAM Directory doesn't work for Index Size > 8 GB
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF2D856333.70400879-ON88257316.007EAD40-88257316.007F25B2@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Thu, 12 Jul 2007 16:08:47 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 13/07/2007 02:11:13
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

hi Murali, I found a casting issue that can cause
this problem - see patch in
http://issues.apache.org/jira/browse/LUCENE-957
is the problem solved with this patch?
Doron

muraalee <muraalee@gmail.com> wrote on 09/07/2007 14:15:04:

>
> Hi,
>
> We are facing a strange problem with RAMDirectory for indices
> greater than 8
> GB. We have indexed around 6.5 million lucene documents and theindex size
> is around 8 GB. Below is the contents of Index Directory.
>
> 2236964197  _1x.fdt
>    51811488  _1x.fdx
>            293  _1x.fnm
> 2234929832  _1x.frq
>  369156856  _1x.nrm
> 2746607717  _1x.prx
>      4979893  _1x.tii
>  389652682  _1x.tis
>             42  segments_3x
>             20  segments.gen
>
> We could open this using FSDirectory and it seems to be working
> fine. But if
> we switch to RAMDirectory, we get the following exception.
>
> - We are using Lucene 2.2.0 currently
>
> Caused by: java.lang.ArrayIndexOutOfBoundsException: -369
>         at
> org.apache.lucene.store.RAMInputStream.readByte(RAMInputStream.java:64)
>         at org.apache.lucene.store.IndexInput.
> readVLong(IndexInput.java:77)
>         at
> org.apache.lucene.index.MultiLevelSkipListReader.
> loadSkipLevels(MultiLevelSkipListReader.java:194)
>         at
> org.apache.lucene.index.MultiLevelSkipListReader.
> skipTo(MultiLevelSkipListReader.java:97)
>         at
> org.apache.lucene.index.SegmentTermDocs.skipTo(SegmentTermDocs.
> java:164)
>         at
> org.apache.lucene.search.PhrasePositions.
> skipTo(PhrasePositions.java:52)
>         at
> org.apache.lucene.search.PhraseScorer.doNext(PhraseScorer.java:88)
>         at org.apache.lucene.search.PhraseScorer.
> next(PhraseScorer.java:81)
>         at
> org.apache.lucene.search.DisjunctionSumScorer.
> initScorerDocQueue(DisjunctionSumScorer.java:105)
>         at
> org.apache.lucene.search.DisjunctionSumScorer.
> next(DisjunctionSumScorer.java:144)
>         at
> org.apache.lucene.search.BooleanScorer2.score(BooleanScorer2.
> java:327)
>         at
> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.
> java:146)
>         at org.apache.lucene.search.Searcher.search(Searcher.
> java:118)
>         at org.apache.lucene.search.Searcher.search(Searcher.java:97)
>         at
> org.apache.lucene.search.QueryWrapperFilter.
> bits(QueryWrapperFilter.java:50)
>
>
> Any help to address this problem is greatly appreciated.
>
>
> thanks
> Murali V


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29161-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 13 01:13:48 2007
Return-Path: <java-user-return-29161-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36579 invoked from network); 13 Jul 2007 01:13:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jul 2007 01:13:46 -0000
Received: (qmail 96472 invoked by uid 500); 13 Jul 2007 01:13:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96432 invoked by uid 500); 13 Jul 2007 01:13:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96413 invoked by uid 99); 13 Jul 2007 01:13:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jul 2007 18:13:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.145] (HELO spunkymail-a7.g.dreamhost.com) (208.97.132.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jul 2007 18:13:37 -0700
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a7.g.dreamhost.com (Postfix) with ESMTP id 4F9905C442
	for <java-user@lucene.apache.org>; Thu, 12 Jul 2007 18:13:16 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <Pine.LNX.4.58.0707121359330.21045@hal.rescomp.berkeley.edu>
References: <e994873a0706270745o458b969aqdd0204b0c4027ec4@mail.gmail.com> <1C6823A4-BA05-4C20-8B74-3BE527E6CD97@apache.org> <e994873a0707111719o2a083862h6aaafca529c2cfcf@mail.gmail.com> <Pine.LNX.4.58.0707111733080.28722@hal.rescomp.berkeley.edu> <e994873a0707120520lfee8853i7f37cf1c08c7d658@mail.gmail.com> <2C5B5373-6A53-49EC-B168-010D57F432DB@apache.org> <Pine.LNX.4.58.0707121359330.21045@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <21C823CE-3524-4B6E-8AFC-633882B3D679@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Payloads and PhraseQuery
Date: Thu, 12 Jul 2007 21:13:06 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


On Jul 12, 2007, at 6:12 PM, Chris Hostetter wrote:


>
> Hmm... okay so the issue is that in order to get the payload data, you
> have to have a TermPositions instance.
>
> instead of adding getPayload methods to the Spans class (which as Paul
> points out, can have nesting issues) perhaps more general solutions  
> would
> be:
>
> a) a more high level getPayload API that let's you get a payload
> arbitrarily for a toc/position (perhaps as part of the TernDocs  
> API?) ...
> then for Spans you could use this new API with Spans.start() and
> Spans.end(). (and all the positions in between)

Not sure I follow this.  I don't see the fit w/ TermDocs.
>
> b) add a variation of the TermPositions class to allow people to  
> iterate
> through the terms of a TermDoc in position order (TermPosition first
> iterates over the Terms and then over the positions) ... then you  
> could
> seek(span.start()) to get the Payload data
>
> c) add methods to the Spans API to get the subspans (if any) ... this
> would be the Spans corrilary to getTerms() and would always return
> TermSpans which would have TermPositions for getting payload data.


This could be a good alternative.

When we first talked about payloads we wondered if we could just make  
all Queries into SpanQueries by passing TermPositions instead of term  
docs, but in the end decided not to do it because of performance  
issues (some of which are lessened by lazy loading of TermPositions.

The thing is, I think, that the Spans is already moving you along in  
the term positions, so it just seems like a natural fit to have it  
there, even if there is nesting.  It doesn't seem like it would be  
that hard to then return back the nesting stuff b/c you are just  
collating the results from the underlying SpanTermQuery.  Having said  
that, I haven't looked into the actual code, so take that w/ a grain  
of salt.

I will try to do some more investigation, as others are welcome to  
do.  Perhaps we should move this to dev?

Cheers,
Grant


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29162-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 13 06:44:55 2007
Return-Path: <java-user-return-29162-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21695 invoked from network); 13 Jul 2007 06:44:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jul 2007 06:44:54 -0000
Received: (qmail 29660 invoked by uid 500); 13 Jul 2007 06:44:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28674 invoked by uid 500); 13 Jul 2007 06:44:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28663 invoked by uid 99); 13 Jul 2007 06:44:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jul 2007 23:44:48 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [204.152.239.220] (HELO l4dupmt4.hewitt.com) (204.152.239.220)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jul 2007 23:44:45 -0700
Received: from linkap13.hewitt.com (linkap13.hewitt.com [10.64.63.9])
	by l4dupmt4.hewitt.com (8.13.4/8.13.4) with ESMTP id l6D6h27n011511
	for <java-user@lucene.apache.org>; Fri, 13 Jul 2007 01:44:14 -0500 (CDT)
Received: from 10.20.63.62 by linkap13.hewitt.com with ESMTP (Tumbleweed
 MMS SMTP Relay); Fri, 13 Jul 2007 01:45:35 -0500
X-Server-Uuid: 5481ADDC-4403-4C6D-B2F2-5688E6B2910D
In-Reply-To: <469651EC.90701@lingway.com>
To: java-user@lucene.apache.org
Subject: Re: checking existing docs before indexing
MIME-Version: 1.0
X-Mailer: Lotus Notes 652HF1094 September 19, 2005
Message-ID: <OF358B6B1E.63D4FDCE-ON65257317.0024C442-65257317.0024F60F@hewitt.com>
From: "Neeraj Gupta" <neeraj.gupta.2@hewitt.com>
Date: Fri, 13 Jul 2007 12:15:08 +0530
X-HANotesOU: Gurgaon
X-MIMETrack: Serialize by Router on LINTNG1/National/Hewitt
 Associates(Release 6.5.6|March 06, 2007) at 07/13/2007 01:45:36 AM,
 Serialize complete at 07/13/2007 01:45:36 AM
X-WSS-ID: 6A89C0051U812385299-01-01
Content-Type: multipart/alternative;
 boundary="=_alternative 0024F60B65257317_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 0024F60B65257317_=
Content-Type: text/plain;
 charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Yes, you need to store one untokenized field which will identifiy the=20
exact document you want to update.

You can also check whether any document like that exists in your indexes,=20
by using deleteDocuments() method of Indexreader. This returns the number=20
of documents deleted as per the Term provided.=20

Cheers,
Neeraj




"Samuel LEMOINE" <samuel.lemoine@lingway.com>=20

07/12/2007 09:38 PM
Please respond to
java-user@lucene.apache.org



To
java-user@lucene.apache.org
cc
heba.farouk@yahoo.com
Subject
Re: checking existing docs before indexing






Neeraj Gupta a =E9crit :
> Hi,
>
> You an use updateDocument() method of IndexWriter to update any existing=
=20

> document.. It searches for a document matching the Term, if document=20
> existes then delete that document. After that it adds the provided=20
> document to the indexes in both the cases whether document exists or=20
not.
>
> Cheers,
> Neeraj
>
>
>
>
> "Heba Farouk" <heba.farouk@yahoo.com>=20
>
> 07/12/2007 06:57 PM
> Please respond to
> java-user@lucene.apache.org, heba.farouk@yahoo.com
>
>
>
> To
> java-user@lucene.apache.org
> cc
>
> Subject
> checking existing docs before indexing
>
>
>
>
>
>
> Hello
> i'm a newbie to lucene world and i hope that u help me.
> i was asking is there any options in IndexWriter to check if a document=20
> already exsits before adding it to the index or i should maintain it=20
> manually =3F=3F
>
> thanks in advance
>
>
> Yours=20
>
> Heba
>
>=20
> ---------------------------------
> Choose the right car based on your needs.  Check out Yahoo! Autos new=20
Car=20
> Finder tool.
>
>=20
> The information contained in this e-mail and any accompanying documents=20
may contain information that is confidential or otherwise protected from=20
disclosure. If you are not the intended recipient of this message, or if=20
this message has been addressed to you in error, please immediately alert=20
the sender by reply e-mail and then delete this message, including any=20
attachments. Any dissemination, distribution or other use of the contents=20
of this message by anyone other than the intended recipient=20
> is strictly prohibited.
>
>
>
>=20
I also used the updateDocument() to do so, but I encountered the issue=20
that it takes a term as argument, so that other documents may be deleted=20
by this method. To avoid this, my conclusion was that a solution is to=20
store some stored untokenized fields, used as keys to identify solely a=20
document, each document being identified by a string that distinguish it=20
=66rom others (such as url or file path).

Sam


PS: Here is the sample code I've wrote during my internship, quite=20
simple to grasp:
(there are no commentaries, I removed them as they were in french)
The method that could interest you is the addDocument(String) one.
Hope it helped.

public class Indexer {

    private static final Logger theLogger =3D=20
Logger.getLogger(Indexer.class);

    private Analyzer theAnalyzer;
    private IndexWriter theIndexWriter;
    private Reader theReaderContent;
    private String theIndexPath;

    public Indexer(String anIndexPath) {
        theAnalyzer =3D new StandardAnalyzer();
        theIndexPath =3D anIndexPath;
    }

    public void addDocument(String aFileName){

        try {
        theIndexWriter =3D new IndexWriter(theIndexPath, theAnalyzer);
        } catch (IOException e) {
            theLogger.error(e);
        }

        Document doc =3D new Document();

        try {
            theReaderContent =3D new FileReader(aFileName);
        } catch (FileNotFoundException e) {
            theLogger.error(e);
        }

        TokenStream tokenStreamContent =3D new=20
StandardTokenizer(theReaderContent);
        Field docPath =3D new Field("path", aFileName, Field.Store.YES,=20
=46ield.Index.UN_TOKENIZED);
        Field docContent =3D new Field("content", tokenStreamContent);
        doc.add(docPath);
        doc.add(docContent);

        try {
//            theIndexWriter.addDocument(doc);
            theIndexWriter.updateDocument(new Term("path",aFileName),doc);
            theIndexWriter.close();
        } catch (IOException e) {
            theLogger.error(e);
        }
    }

    public void sort(){
        try {
            theIndexWriter =3D new IndexWriter(theIndexPath, theAnalyzer);
            theIndexWriter.optimize();
            theIndexWriter.close();
        } catch (IOException e) {
            theLogger.error(e);
        }
    }

=20
    public void addAllDocuments(String aDirectoryPath){
        File directory =3D new File(aDirectoryPath);
        File[] subDirectory =3D directory.listFiles();
        System.out.println(subDirectory.length+" fichiers ont =E9t=E9=20
index=E9s.");
        for (File file : subDirectory) {
        addDocument(file.getPath());
        }
        this.sort();
    }
}


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
=46or additional commands, e-mail: java-user-help@lucene.apache.org




=20
The information contained in this e-mail and any accompanying documents may=
 =
contain information that is confidential or otherwise protected from =
disclosure. If you are not the intended recipient of this message, or if =
this message has been addressed to you in error, please immediately alert =
the sender by reply e-mail and then delete this message, including any =
attachments. Any dissemination, distribution or other use of the contents o=
=66=
 this message by anyone other than the intended recipient=20
is strictly prohibited.



--=_alternative 0024F60B65257317_=--


From java-user-return-29163-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 13 07:48:55 2007
Return-Path: <java-user-return-29163-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48323 invoked from network); 13 Jul 2007 07:48:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jul 2007 07:48:53 -0000
Received: (qmail 17064 invoked by uid 500); 13 Jul 2007 07:48:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16599 invoked by uid 500); 13 Jul 2007 07:48:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16588 invoked by uid 99); 13 Jul 2007 07:48:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Jul 2007 00:48:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [213.133.33.40] (HELO smtp.is.nl) (213.133.33.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Jul 2007 00:48:44 -0700
Received: from [213.133.51.241] (HELO hai01.hippo.local)
  by smtp.is.nl (CommuniGate Pro SMTP 5.0.10)
  with ESMTP id 19423094 for java-user@lucene.apache.org; Fri, 13 Jul 2007 09:48:21 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6619.12
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: How to reflect index changes to search automatically
Date: Fri, 13 Jul 2007 09:48:20 +0200
Message-ID: <A955EA1F8FE31749AEC8C998082F6C7CD6EA37@hai01.hippo.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: How to reflect index changes to search automatically
Thread-Index: AcfEqAjf6FdB71dPQoCusWAQ2jf0vwAeJQZQ
From: "Ard Schrijvers" <a.schrijvers@hippo.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

The SearchClient is obviously not aware of a changing index, so doesn't =
know when it has to be reopened.=20

You can at least do the following:

1) you periodically check for the index folder wether its timestamp did =
change (or if this stays the same, do it with the files in it) --> if =
changed, reopen the ParallelMultiSearcher. All you would need is some =
file monitor (filetimestamp validity cache)

2) you add eventListeners to the SearchServer, and implement something =
like jms (activeMQ , openJMS) to send events to all listeners on an =
index update, which in turn invalidate their ParallelMultiSearcher. =
(eventvalidity cache)

3) keep your searcher for X minutes, and then after x minnutes, reopen =
it (expires validity cache)

obviously, number 2 is the nicest, though also the hardest

Regards Ard

> Hi,
>      I have SearchServer and SearchClient programs. The SearchServer
> using RemoteSearchable
> for binding the indices in servers . The SearchClient using
> ParallelMultiSearcher for searching the indices. The problem=20
> is that I have
> to restart the search servers for reflecting the index change=20
> in search on
> every index change(add or update). Is there any other=20
> solution to reflect
> the changes in search. That is without restarting the SearchServer.
>=20
> Thanks,
> Sonu
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29164-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 13 07:58:57 2007
Return-Path: <java-user-return-29164-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50674 invoked from network); 13 Jul 2007 07:58:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jul 2007 07:58:55 -0000
Received: (qmail 41183 invoked by uid 500); 13 Jul 2007 07:58:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41148 invoked by uid 500); 13 Jul 2007 07:58:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41137 invoked by uid 99); 13 Jul 2007 07:58:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Jul 2007 00:58:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [213.133.33.40] (HELO smtp.is.nl) (213.133.33.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Jul 2007 00:58:44 -0700
Received: from [213.133.51.241] (HELO hai01.hippo.local)
  by smtp.is.nl (CommuniGate Pro SMTP 5.0.10)
  with ESMTP id 19423928 for java-user@lucene.apache.org; Fri, 13 Jul 2007 09:58:23 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6619.12
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Does Index have a Tokenizer Built into it
Date: Fri, 13 Jul 2007 09:58:18 +0200
Message-ID: <A955EA1F8FE31749AEC8C998082F6C7C01AC112D@hai01.hippo.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Does Index have a Tokenizer Built into it
Thread-Index: AcfEraQK4lYBggk4TP+nd9+xb40eLAAdTzoQ
From: "Ard Schrijvers" <a.schrijvers@hippo.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

> I'm wondering if after=20
> opening the
> index I can retrieve the Tokens (not the terms) of a=20
> document, something
> akin to IndexReader.Document(n).getTokenizer().

It is obviously not possible to get the original tokens of the document =
back when you haven't stored the document, because:

1) the analyzer might have removed stop words in the first place
2) the terms in lucene index are perhaps stemmed words / synonyms / etc =
etc
3) how would you expect things like spaces, commas, dots etc to be =
restored?

And, I think what you want does not comply with an inverted index. When =
you do not store the document, you always loose information about the =
document during indexing/analyzing

How many documents are you talking about? They must be either somewhere =
on FS or accessible over http...when you need the document, why not just =
provide a link to the original location?

Regards Ard

>=20
> In summary:
>=20
> My current ( too wasteful implementation is this)
>=20
> StandardTokenizer(BufferedReader ( =20
> IndexReader.Document(n).getField("text"
> )  )
>=20
> I'm wondering if Lucene has a more efficient manner to=20
> retrieve the tokens
> of a document from an index.  Because it seems like it has=20
> information about
> every "term" already, Since you can get retrieve a=20
> TermPositions object.
>=20
> Thanks,
>=20
>=20
> --JP
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29165-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 13 09:16:30 2007
Return-Path: <java-user-return-29165-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79301 invoked from network); 13 Jul 2007 09:16:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jul 2007 09:16:27 -0000
Received: (qmail 71880 invoked by uid 500); 13 Jul 2007 09:16:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71833 invoked by uid 500); 13 Jul 2007 09:16:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71822 invoked by uid 99); 13 Jul 2007 09:16:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Jul 2007 02:16:22 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of sonusr@gmail.com designates 66.249.90.183 as permitted sender)
Received: from [66.249.90.183] (HELO ik-out-1112.google.com) (66.249.90.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Jul 2007 02:16:18 -0700
Received: by ik-out-1112.google.com with SMTP id b32so304936ika
        for <java-user@lucene.apache.org>; Fri, 13 Jul 2007 02:15:57 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ORqUZQM5RTfK+cAxcRJ0S1Qu7ytvLKwERPtSQ1HZO6+tzsp9oAt2/i/5NUmlAK1xWb3vWLY05aaa2vI9KjuTKJzVIXyNsMqypW1H2oRbiEcKQ2gnslwXmrdMDc/3hF5Gblp/4qUgd9iS9m4tLgjXvVtvD6EOBhysEaIdIXDE/jM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=g6tzW4h3jgR+KV/HwkXxIloilgE5BOurHww5bQKLkD03pfjlEVQIjlArpuAzNHJW3kUYfy8VYVuvNiqHlXU1WYs/74tx/Py0kDC3jT8dgy0p7OUKIBbLQXLxdq2EHiBxGDNfsklm+zydcy1nYBumKB9liY3rnOc2pQNctiOW84U=
Received: by 10.78.170.6 with SMTP id s6mr429343hue.1184318157197;
        Fri, 13 Jul 2007 02:15:57 -0700 (PDT)
Received: by 10.78.178.13 with HTTP; Fri, 13 Jul 2007 02:15:57 -0700 (PDT)
Message-ID: <d5b3ea330707130215y5fd99dffn28be49abe6cdb4@mail.gmail.com>
Date: Fri, 13 Jul 2007 14:45:57 +0530
From: "Sonu SR" <sonusr@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to reflect index changes to search automatically
In-Reply-To: <A955EA1F8FE31749AEC8C998082F6C7CD6EA37@hai01.hippo.local>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_24284_29271223.1184318157170"
References: <A955EA1F8FE31749AEC8C998082F6C7CD6EA37@hai01.hippo.local>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_24284_29271223.1184318157170
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks Ard. I think option 2 is good. I will try this.

On 7/13/07, Ard Schrijvers <a.schrijvers@hippo.nl> wrote:
>
> The SearchClient is obviously not aware of a changing index, so doesn't
> know when it has to be reopened.
>
> You can at least do the following:
>
> 1) you periodically check for the index folder wether its timestamp did
> change (or if this stays the same, do it with the files in it) --> if
> changed, reopen the ParallelMultiSearcher. All you would need is some file
> monitor (filetimestamp validity cache)
>
> 2) you add eventListeners to the SearchServer, and implement something
> like jms (activeMQ , openJMS) to send events to all listeners on an index
> update, which in turn invalidate their ParallelMultiSearcher. (eventvalidity
> cache)
>
> 3) keep your searcher for X minutes, and then after x minnutes, reopen it
> (expires validity cache)
>
> obviously, number 2 is the nicest, though also the hardest
>
> Regards Ard
>
> > Hi,
> >      I have SearchServer and SearchClient programs. The SearchServer
> > using RemoteSearchable
> > for binding the indices in servers . The SearchClient using
> > ParallelMultiSearcher for searching the indices. The problem
> > is that I have
> > to restart the search servers for reflecting the index change
> > in search on
> > every index change(add or update). Is there any other
> > solution to reflect
> > the changes in search. That is without restarting the SearchServer.
> >
> > Thanks,
> > Sonu
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_24284_29271223.1184318157170--

From java-user-return-29166-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 13 09:39:13 2007
Return-Path: <java-user-return-29166-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90692 invoked from network); 13 Jul 2007 09:39:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jul 2007 09:39:12 -0000
Received: (qmail 3586 invoked by uid 500); 13 Jul 2007 09:39:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3546 invoked by uid 500); 13 Jul 2007 09:39:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3531 invoked by uid 99); 13 Jul 2007 09:39:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Jul 2007 02:39:06 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mbarbarelli@gmail.com designates 209.85.132.240 as permitted sender)
Received: from [209.85.132.240] (HELO an-out-0708.google.com) (209.85.132.240)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Jul 2007 02:39:02 -0700
Received: by an-out-0708.google.com with SMTP id c5so116865anc
        for <java-user@lucene.apache.org>; Fri, 13 Jul 2007 02:38:42 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=cuJQvOpjn9TIC0SiiC/iZUjaKnJLZTqVCOgLuqr2RDK00ac1XDocQmHF+ZiGnwdZCFqBr6mwxPNieQLdPCUs3B/SQaFR9OBkDzOEAeUrW+tGN/U/cCxFA6a1+Xn4rjvIcXYS0l1YDyQxAEET+RGxgku+YLHVRBqjAjD8oapoFE0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ZzsxFO0Wy7irUJaEGYQ14egAk+omnGK3qHKzsoqI/jWxBpFElqmhKlKBNGF2N9wYWndITE1NzcmsBPACMbku9GN2NtMggvSEyTPLUz9++gXj2K/c/Pbr4MQ+rUtJq7jvcg6ulhaiHKLeq7kG0ISt2js4tqYpQpzRK5BeYc+G0Ws=
Received: by 10.100.189.17 with SMTP id m17mr853098anf.1184319521694;
        Fri, 13 Jul 2007 02:38:41 -0700 (PDT)
Received: by 10.100.127.8 with HTTP; Fri, 13 Jul 2007 02:38:41 -0700 (PDT)
Message-ID: <a258c0620707130238p74393a9dr5901130c0d3bb5be@mail.gmail.com>
Date: Fri, 13 Jul 2007 10:38:41 +0100
From: "Michael Barbarelli" <mbarbarelli@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Customizing Stop Word List?
In-Reply-To: <a258c0620707121243h10a6f4dbp1a710d9978ba02bd@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_30924_15428194.1184319521652"
References: <a258c0620707121023n1c7c20aek5d39b6a5daa08b44@mail.gmail.com>
	 <Pine.LNX.4.58.0707121121260.28552@hal.rescomp.berkeley.edu>
	 <a258c0620707121243h10a6f4dbp1a710d9978ba02bd@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_30924_15428194.1184319521652
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Here's the sample code. Incidentally, this is in C#. I am using Lucene.NET,
but I am assuming this problem could be universal to all versions and that
this is a question that is best exposed to the collective wisdom of the Java
user group.

default list of ISO country codes.
*

public string[] DEFAULT_STOP_WORDS = { "a", "and", "are", "as", "at", "be",
"but", "by", "for", "if", "in", "into", "is", "no", "not", "of", "on", "or",
"s", "such", "t", "that", "the", "their", "then", "there", "these", "they",
"this", "to", "was", "will", "with", "inc","incorporated","co.","ltd","ltd."
};
*

create array containing stop words, but where ISO country code equivalents
are omitted.
*

public string[] MY_STOP_WORDS = { "a", "and", "are", "as", "but", "by",
"for", "if", "in", "into", "is", "no", "not", "of", "on", "or", "s", "such",
"t", "that", "the", "their", "then", "there", "these", "they", "this", "to",
"was", "will", "with", "inc", "incorporated", "co.", "ltd", "ltd." };
*

Next, create query and submit to search. Provide MY_STOP_WORDS array as
parameter to the standard analyzer.
*

Query query = QueryParser.Parse(strQuery, "company_name", new
StandardAnalyzer(MY_STOP_WORDS));

Hits hits = searcher.Search(query);
*

Note that the default field for the query object is company name. However,
multi-field queries will be submitted to the query object in the variable
"strQuery".

For example,
*

+(company_name:widgets ^10~ international ^5~ incorporated~ )
+(country_iso:US)
*

There is a bit of logic elsewhere in my application that constructs this
syntax based on field names and values submitted via the UI. However, if one
of those country code values is "AT", "BE", "IT", "IN", etc; then the query
logic is erroneously constructed as the following. Note that the country
code is missing.


*

+(company_name:belgium ^10~ telecom ^5~ ) +(country_iso:)
*



Note that the country ISO field is null. If a query is sumbitted to the
search object in this way, then I receive the following exception at
runtime.
*

Lucene.Net.QueryParsers.ParseException was unhandled by user code

Message="Encountered \")\" at line 1, column 60.\r\nWas expecting one
of:\r\n \"(\" ...\r\n <QUOTED> ...\r\n <TERM> ...\r\n <PREFIXTERM> ...\r\n
<WILDTERM> ...\r\n \"[\" ...\r\n \"{\" ...\r\n <NUMBER> ...\r\n "

Source="Lucene.Net"

StackTrace:

at Lucene.Net.QueryParsers.QueryParser.jj_consume_token(Int32 kind)

at Lucene.Net.QueryParsers.QueryParser.Clause(String field)

at Lucene.Net.QueryParsers.QueryParser.Query(String field)
*



And finally, here is how I am creating my index:


*

doc.Add(Field.Keyword("rec_id", entity_id.Trim()));

doc.Add(Field.Text("aaa", ob10_account_id.Trim()));

doc.Add(Field.Text("company_name", entity_name.Trim()));

doc.Add(Field.Text("VAT_reg", VAT_reg.Trim()));

doc.Add(Field.Text("account_type_description",
account_type_description.Trim()));

doc.Add(Field.Text("account_type", account_type.Trim()));

doc.Add(Field.Text("add_line1", add_line1.Trim()));

doc.Add(Field.Text("add_line2", add_line2.Trim()));

doc.Add(Field.Text("add_line3", add_line3.Trim()));

doc.Add(Field.Text("add_line4", add_line4.Trim()));

doc.Add(Field.Text("add_line5", add_line5.Trim()));

doc.Add(Field.Text("add_line6", add_line6.Trim()));

doc.Add(Field.Keyword("country_iso", country_iso.Trim()));

doc.Add(Field.Text("country_name", country_name.Trim()));

doc.Add(Field.Text("entity_status_desc", entity_status_desc.Trim()));

doc.Add(Field.Text("acct_status_desc", acct_status_desc.Trim()));

doc.Add(Field.Text("firstname", firstname.Trim()));

doc.Add(Field.Text("lastname", lastname.Trim()));



writer.AddDocument(doc);
*



Have I submitted my custom stop words incorrectly? Should I somehow use a
per-field analyzer for the country_ISO field? If so, which?

Thanks so much in advance for your help.

------=_Part_30924_15428194.1184319521652--

From java-user-return-29167-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 13 15:13:43 2007
Return-Path: <java-user-return-29167-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97353 invoked from network); 13 Jul 2007 15:13:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jul 2007 15:13:41 -0000
Received: (qmail 52313 invoked by uid 500); 13 Jul 2007 15:13:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52279 invoked by uid 500); 13 Jul 2007 15:13:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52268 invoked by uid 99); 13 Jul 2007 15:13:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Jul 2007 08:13:35 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of walt.stoneburner@gmail.com designates 209.85.146.178 as permitted sender)
Received: from [209.85.146.178] (HELO wa-out-1112.google.com) (209.85.146.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Jul 2007 08:13:32 -0700
Received: by wa-out-1112.google.com with SMTP id j40so625572wah
        for <java-user@lucene.apache.org>; Fri, 13 Jul 2007 08:13:12 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=AE9GLR53g+Nux0R201t/FvQ131SexSQgtCvWZwUtNG1l+FfabwnLsCdLy9/E6z0PXYMId4nEvYgefzrJyLBqEdua1ZhEWIiAdylbLJyKZf6lLaxPfU2V3F/72KL67WbJK6gwy68JDdqXeduUi2JNKbkE0Qk3PxP0Qx4U8tujl8c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=RyGJU7lAm2GIdLf0Yaa6iT0bdeV6R3KEYWePh6HmaMZSd/zYwZkKPV38sJ3Ri64NZQFZ0AGQ2fW+KvwDq/PNYdVjk+16OscZjbhl3qps9UrxuBtHpyxKW9HYv/dfVdUYW3c/BEeA6wDNy5oKtwkV+HgFuP78W9QNifRysvGJgD4=
Received: by 10.115.60.1 with SMTP id n1mr1740798wak.1184339591792;
        Fri, 13 Jul 2007 08:13:11 -0700 (PDT)
Received: by 10.115.32.13 with HTTP; Fri, 13 Jul 2007 08:13:11 -0700 (PDT)
Message-ID: <ae6f38f60707130813r76937013wa5a0480fac2ea0dc@mail.gmail.com>
Date: Fri, 13 Jul 2007 11:13:11 -0400
From: "Walt Stoneburner" <walt.stoneburner@gmail.com>
To: java-user@lucene.apache.org
Subject: Standard Analyzer Escapes
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

In reading the documentation for escape characters, I'm having a
little trouble understanding what it wants me to do for certain
special cases.

http://lucene.apache.org/java/docs/queryparsersyntax.html#Escaping%20Special%20Characters
says: "Lucene supports escaping special characters that are part of
the query syntax. The current list special characters are:   + - && ||
! ( ) { } [ ] ^ " ~ * ? : \     To escape these character use the \
before the character."

Specifically, I'm curious about the double characters && and || and
how they should be properly escaped.

Experimentation showed some very strange things with the StandardAnalyzer.

Using Luke, I get some interesting mappings.
  AT&T    becomes  at&t    (as expected)
  AT&&T  becomes  t   (tricky... at is now taken as a stop word; fine
makes sense)

..but what about...   "AT&&T"   ...nope, still t.

AAA&BBB becomes aaa&bbb    ...correct
AAA&&BBB becomes   aaa bbb   ...ampersand becomes a space?
"AAA&&BBB" is also    aaa bbb

AAA\&BBB correctly is   aaa&bbb   ...just as before
AAA\&&BBB   is  aaa bbb   ...but perhaps we got the escape wrong.

Is '&&' special "character" and is it escaped as \&& or escaped as
\&\& ...let's find out.

AAA\&\&BBB   is also  aaa bbb   ...perhaps we need quotes?
"AAA\&\&BBB"   is also  aaa bbb   ...I can't seem to get the escape to work.

How about this?
AAA&BBB&CCC    strangely becomes   aaa&bbb ccc

Even when escaped?
AAA\&BBB\&CCC  is also    aaa&bbb ccc    ...appears so.

What about...
AAA&BBB&CCC&DDD   becomes   aaa&bbb ccc&ddd  ....whoa, not expecting that.

AAA&&BBB&&CCC&&DDD  becomes   aaa bbb ccc ddd  ...if && means AND, ok...

AAA\&&BBB\&&CCC\&&DDD   no change  aaa bbb ccc ddd

AAA\&\&BBB\&\&CCC\&\&DDD  also no change  aaa bbb ccc ddd


It appears I literally cannot search for the token with two ampersands
in it, whether they are touching or not.

Clearly I'm missing something.  Is there a way to get any literal
sequence of my choosing, using escapes, as a term in the Lucene
expression?

-Walt Stoneburner

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29168-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 13 15:17:24 2007
Return-Path: <java-user-return-29168-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10518 invoked from network); 13 Jul 2007 15:17:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jul 2007 15:17:24 -0000
Received: (qmail 59221 invoked by uid 500); 13 Jul 2007 15:17:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59174 invoked by uid 500); 13 Jul 2007 15:17:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59159 invoked by uid 99); 13 Jul 2007 15:17:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Jul 2007 08:17:18 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mbarbarelli@gmail.com designates 209.85.132.247 as permitted sender)
Received: from [209.85.132.247] (HELO an-out-0708.google.com) (209.85.132.247)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Jul 2007 08:17:14 -0700
Received: by an-out-0708.google.com with SMTP id c5so140105anc
        for <java-user@lucene.apache.org>; Fri, 13 Jul 2007 08:16:53 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=lAdENm9VVRRVbCCZNMM+EOC5hRQTyYfAJCEObnMSUyxD8Sevq0x9FB1Z97VdNcVSs1eo4mH4q/YuRky71jY80Lt4uwJ2cvoL8JkQpSMr977wmCd3wTgOinaDVN8F2xOkuM8w9jiHmjWpsZDE7GTfHvxluBhQfAd6i3gCBCZpXrU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=L/trYjVYsbmtwT6MuaofgDOSVDQ0OY7qkAeI1PnXVMZikXj3OGufHPFQh7o+cyzvU+aUNXQ23poTh8cFfNDwZKHL80ncseraXlE/qL6JzZ8aJA/KJ1g3Tt2Rxh6QxuTLeAkStbsSb8aJJLMU8z232ULk3hqFcsXrk1z/ZHOVoRY=
Received: by 10.100.139.12 with SMTP id m12mr969126and.1184339813311;
        Fri, 13 Jul 2007 08:16:53 -0700 (PDT)
Received: by 10.100.127.8 with HTTP; Fri, 13 Jul 2007 08:16:53 -0700 (PDT)
Message-ID: <a258c0620707130816gbc5b21cla738512680d70cf9@mail.gmail.com>
Date: Fri, 13 Jul 2007 16:16:53 +0100
From: "Michael Barbarelli" <mbarbarelli@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Customizing Stop Word List?
In-Reply-To: <a258c0620707130238p74393a9dr5901130c0d3bb5be@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_34344_8293362.1184339813274"
References: <a258c0620707121023n1c7c20aek5d39b6a5daa08b44@mail.gmail.com>
	 <Pine.LNX.4.58.0707121121260.28552@hal.rescomp.berkeley.edu>
	 <a258c0620707121243h10a6f4dbp1a710d9978ba02bd@mail.gmail.com>
	 <a258c0620707130238p74393a9dr5901130c0d3bb5be@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_34344_8293362.1184339813274
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Please disregard previous request for assistance.  I've fixed the bug I was
struggling with and it actually had nothing to do with the analyzer in
question.

Thanks very much.


On 7/13/07, Michael Barbarelli <mbarbarelli@gmail.com> wrote:
>
> Here's the sample code. Incidentally, this is in C#. I am using Lucene.NET,
> but I am assuming this problem could be universal to all versions and that
> this is a question that is best exposed to the collective wisdom of the Java
> user group.
>
> default list of ISO country codes.
> *
>
> public string[] DEFAULT_STOP_WORDS = { "a", "and", "are", "as", "at",
> "be", "but", "by", "for", "if", "in", "into", "is", "no", "not", "of", "on",
> "or", "s", "such", "t", "that", "the", "their", "then", "there", "these",
> "they", "this", "to", "was", "will", "with",
> "inc","incorporated","co.","ltd","ltd." };
> *
>
> create array containing stop words, but where ISO country code equivalents
> are omitted.
> *
>
> public string[] MY_STOP_WORDS = { "a", "and" , "are", "as" , "but", "by" ,
> "for", "if" , "in", "into" , "is", "no" , "not", "of" , "on", "or" , "s",
> "such" , "t", "that" , "the", "their" , "then", "there" , "these", "they",
> "this", "to" , "was", "will" , "with", "inc" , "incorporated", "co." ,
> "ltd", "ltd." };*
>
> Next, create query and submit to search. Provide MY_STOP_WORDS array as
> parameter to the standard analyzer.
> *
>
> Query
> query = QueryParser.Parse(strQuery, "company_name", new StandardAnalyzer
> (MY_STOP_WORDS));
>
> Hits
> hits = searcher.Search(query);*
>
> Note that the default field for the query object is company name. However,
> multi-field queries will be submitted to the query object in the variable
> "strQuery".
>
> For example,
> *
>
> +(company_name:widgets ^10~ international ^5~ incorporated~ )
> +(country_iso:US)
> *
>
> There is a bit of logic elsewhere in my application that constructs this
> syntax based on field names and values submitted via the UI. However, if one
> of those country code values is "AT", "BE", "IT", "IN", etc; then the query
> logic is erroneously constructed as the following. Note that the country
> code is missing.
>
>
> *
>
> +(company_name:belgium ^10~ telecom ^5~ ) +(country_iso:)
> *
>
>
>
> Note that the country ISO field is null. If a query is sumbitted to the
> search object in this way, then I receive the following exception at
> runtime.
> *
>
> Lucene.Net.QueryParsers.ParseException was unhandled by user code
>
> Message="Encountered \")\" at line 1, column 60.\r\nWas expecting one
> of:\r\n \"(\" ...\r\n <QUOTED> ...\r\n <TERM> ...\r\n <PREFIXTERM> ...\r\n
> <WILDTERM> ...\r\n \"[\" ...\r\n \"{\" ...\r\n <NUMBER> ...\r\n "
>
> Source="Lucene.Net"
>
> StackTrace:
>
> at Lucene.Net.QueryParsers.QueryParser.jj_consume_token(Int32 kind)
>
> at Lucene.Net.QueryParsers.QueryParser.Clause(String field)
>
> at Lucene.Net.QueryParsers.QueryParser.Query(String field)
> *
>
>
>
> And finally, here is how I am creating my index:
>
>
> *
>
> doc.Add(
> Field.Keyword("rec_id" , entity_id.Trim()));
>
> doc.Add(
> Field.Text("aaa" , ob10_account_id.Trim()));
>
> doc.Add(
> Field.Text("company_name" , entity_name.Trim()));
>
> doc.Add(
> Field.Text("VAT_reg" , VAT_reg.Trim()));
>
> doc.Add(
> Field.Text("account_type_description" , account_type_description.Trim()));
>
>
> doc.Add(
> Field.Text("account_type" , account_type.Trim()));
>
> doc.Add(
> Field.Text("add_line1" , add_line1.Trim()));
>
> doc.Add(
> Field.Text("add_line2" , add_line2.Trim()));
>
> doc.Add(
> Field.Text("add_line3" , add_line3.Trim()));
>
> doc.Add(
> Field.Text("add_line4" , add_line4.Trim()));
>
> doc.Add(
> Field.Text("add_line5" , add_line5.Trim()));
>
> doc.Add(
> Field.Text("add_line6" , add_line6.Trim()));
>
> doc.Add(
> Field.Keyword("country_iso" , country_iso.Trim()));
>
> doc.Add(
> Field.Text("country_name" , country_name.Trim()));
>
> doc.Add(
> Field.Text("entity_status_desc" , entity_status_desc.Trim()));
>
> doc.Add(
> Field.Text("acct_status_desc" , acct_status_desc.Trim()));
>
> doc.Add(
> Field.Text("firstname" , firstname.Trim()));
>
> doc.Add(
> Field.Text("lastname" , lastname.Trim()));
>
>
>
> writer.AddDocument(doc);
> *
>
>
>
> Have I submitted my custom stop words incorrectly? Should I somehow use a
> per-field analyzer for the country_ISO field? If so, which?
>
> Thanks so much in advance for your help.
>
>
>

------=_Part_34344_8293362.1184339813274--

From java-user-return-29169-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 13 15:47:29 2007
Return-Path: <java-user-return-29169-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30080 invoked from network); 13 Jul 2007 15:47:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jul 2007 15:47:28 -0000
Received: (qmail 31074 invoked by uid 500); 13 Jul 2007 15:47:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31046 invoked by uid 500); 13 Jul 2007 15:47:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31035 invoked by uid 99); 13 Jul 2007 15:47:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Jul 2007 08:47:22 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.184.234 as permitted sender)
Received: from [64.233.184.234] (HELO wr-out-0506.google.com) (64.233.184.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Jul 2007 08:47:19 -0700
Received: by wr-out-0506.google.com with SMTP id m59so362623wrm
        for <java-user@lucene.apache.org>; Fri, 13 Jul 2007 08:46:58 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=ijfZjQvgxS4wLp2mWSrRf15c22BJReJq2WcNmSxN0JbUTX1osa3sNOW7ZURXdiVlo8v3QYXJrA1ALS1HJiHlPDUsXVxYiCXWn9cluDXra4NEYGzb8K/zuUBw2XdbtXRAJA0t5dEXWOC3vcWysklXcdQ+5a0nG+OHUFeuU6H1sHk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=BiaM0Oh98Ymx+F5dqgt2nEq+u1hPqkf/gMNXD1hxihGDOSB6vj8hjeUvlMSF7TnImHgeHAyzxQGgtGdf1l4IDFerVU0YQ1gKmBpbX3qrXkA3RV7cgIYaATOKgi6G3Fy8PpbyDTb1G20MnRbWUIwsZSx/f9wmPgBZcIV6EAORMyg=
Received: by 10.142.251.9 with SMTP id y9mr139914wfh.1184341617925;
        Fri, 13 Jul 2007 08:46:57 -0700 (PDT)
Received: by 10.143.167.8 with HTTP; Fri, 13 Jul 2007 08:46:57 -0700 (PDT)
Message-ID: <c68e39170707130846x25608c17y4bad70a7aca12454@mail.gmail.com>
Date: Fri, 13 Jul 2007 11:46:57 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Standard Analyzer Escapes
In-Reply-To: <ae6f38f60707130813r76937013wa5a0480fac2ea0dc@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <ae6f38f60707130813r76937013wa5a0480fac2ea0dc@mail.gmail.com>
X-Google-Sender-Auth: a105a81eb44eb673
X-Virus-Checked: Checked by ClamAV on apache.org

I just tried some things fast via the Solr admin interface, and
everything seems fine.
I think you are probably confusing what the parser does vs what the
analyzer does.
Try your tests with an un-tokenized field to remove that effect.

-Yonik

On 7/13/07, Walt Stoneburner <walt.stoneburner@gmail.com> wrote:
> In reading the documentation for escape characters, I'm having a
> little trouble understanding what it wants me to do for certain
> special cases.
>
> http://lucene.apache.org/java/docs/queryparsersyntax.html#Escaping%20Special%20Characters
> says: "Lucene supports escaping special characters that are part of
> the query syntax. The current list special characters are:   + - && ||
> ! ( ) { } [ ] ^ " ~ * ? : \     To escape these character use the \
> before the character."
>
> Specifically, I'm curious about the double characters && and || and
> how they should be properly escaped.
>
> Experimentation showed some very strange things with the StandardAnalyzer.
>
> Using Luke, I get some interesting mappings.
>   AT&T    becomes  at&t    (as expected)
>   AT&&T  becomes  t   (tricky... at is now taken as a stop word; fine
> makes sense)
>
> ..but what about...   "AT&&T"   ...nope, still t.
>
> AAA&BBB becomes aaa&bbb    ...correct
> AAA&&BBB becomes   aaa bbb   ...ampersand becomes a space?
> "AAA&&BBB" is also    aaa bbb
>
> AAA\&BBB correctly is   aaa&bbb   ...just as before
> AAA\&&BBB   is  aaa bbb   ...but perhaps we got the escape wrong.
>
> Is '&&' special "character" and is it escaped as \&& or escaped as
> \&\& ...let's find out.
>
> AAA\&\&BBB   is also  aaa bbb   ...perhaps we need quotes?
> "AAA\&\&BBB"   is also  aaa bbb   ...I can't seem to get the escape to work.
>
> How about this?
> AAA&BBB&CCC    strangely becomes   aaa&bbb ccc
>
> Even when escaped?
> AAA\&BBB\&CCC  is also    aaa&bbb ccc    ...appears so.
>
> What about...
> AAA&BBB&CCC&DDD   becomes   aaa&bbb ccc&ddd  ....whoa, not expecting that.
>
> AAA&&BBB&&CCC&&DDD  becomes   aaa bbb ccc ddd  ...if && means AND, ok...
>
> AAA\&&BBB\&&CCC\&&DDD   no change  aaa bbb ccc ddd
>
> AAA\&\&BBB\&\&CCC\&\&DDD  also no change  aaa bbb ccc ddd
>
>
> It appears I literally cannot search for the token with two ampersands
> in it, whether they are touching or not.
>
> Clearly I'm missing something.  Is there a way to get any literal
> sequence of my choosing, using escapes, as a term in the Lucene
> expression?
>
> -Walt Stoneburner
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29170-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 13 16:03:31 2007
Return-Path: <java-user-return-29170-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36185 invoked from network); 13 Jul 2007 16:03:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jul 2007 16:03:31 -0000
Received: (qmail 66702 invoked by uid 500); 13 Jul 2007 16:03:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66673 invoked by uid 500); 13 Jul 2007 16:03:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66655 invoked by uid 99); 13 Jul 2007 16:03:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Jul 2007 09:03:23 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Jul 2007 09:03:19 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1I9Nbf-00064G-CJ
	for java-user@lucene.apache.org; Fri, 13 Jul 2007 09:02:59 -0700
Message-ID: <11582478.post@talk.nabble.com>
Date: Fri, 13 Jul 2007 09:02:59 -0700 (PDT)
From: Mohsen Saboorian <mohsens@gmail.com>
To: java-user@lucene.apache.org
Subject: User Defined Matcher
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: mohsens@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Is it possible that I inject my own matching mechanism into Lucene
IndexSearcher? In other words, is this possible that my own method be called
in order to collect results (hits)? Suppose the case that I want to match -
for example - "foo" with both "foo" and "oof".

Thanks in advance,
Mohsen.
-- 
View this message in context: http://www.nabble.com/User-Defined-Matcher-tf4075337.html#a11582478
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29171-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 13 16:06:13 2007
Return-Path: <java-user-return-29171-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37954 invoked from network); 13 Jul 2007 16:06:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jul 2007 16:06:11 -0000
Received: (qmail 78471 invoked by uid 500); 13 Jul 2007 16:06:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78436 invoked by uid 500); 13 Jul 2007 16:06:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78423 invoked by uid 99); 13 Jul 2007 16:06:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Jul 2007 09:06:03 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.162.239 as permitted sender)
Received: from [64.233.162.239] (HELO nz-out-0506.google.com) (64.233.162.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Jul 2007 09:06:00 -0700
Received: by nz-out-0506.google.com with SMTP id i28so422914nzi
        for <java-user@lucene.apache.org>; Fri, 13 Jul 2007 09:05:40 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=IPvqQ1D5868BYCN+zgB98E7gbWlIPYnXM6GqRuO1aM4FCZtK7XmywbMe01MtwdHWus+ryMLTdzSbyQzn6EBeZI1ghffgzGPNEKt5H+O4cMTR57u3ePHAlnhcDvyzNoLQ3MC0p1Xrs6D3DJ9leHz2jw/10OdZzZk2P8l4ohcJXFM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=TrIOH9F3DR2BawYi8W0mxy/50FLN7dbOxumXae/nv/X5yy9J6GpfOYANhD+68dgMVYMw2vqWeRwo/fL6miEUeAvYSN3H0KEu2JI0D3y55syftLufeb1WRpjdUuG5wOaK61HTObxHVGsmmfQRuWSMgcD/6Uh+sxAd+UA5v6TpLsI=
Received: by 10.142.245.10 with SMTP id s10mr142309wfh.1184342739530;
        Fri, 13 Jul 2007 09:05:39 -0700 (PDT)
Received: by 10.143.167.8 with HTTP; Fri, 13 Jul 2007 09:05:39 -0700 (PDT)
Message-ID: <c68e39170707130905r4f9ae937q7f59fa069fe245ca@mail.gmail.com>
Date: Fri, 13 Jul 2007 12:05:39 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: User Defined Matcher
In-Reply-To: <11582478.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <11582478.post@talk.nabble.com>
X-Google-Sender-Auth: b51e4ff88df6af61
X-Virus-Checked: Checked by ClamAV on apache.org

On 7/13/07, Mohsen Saboorian <mohsens@gmail.com> wrote:
> Is it possible that I inject my own matching mechanism into Lucene
> IndexSearcher? In other words, is this possible that my own method be called
> in order to collect results (hits)? Suppose the case that I want to match -
> for example - "foo" with both "foo" and "oof".

Yes, create your own query object (and associated weight and scorer objects).

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29172-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 13 16:07:05 2007
Return-Path: <java-user-return-29172-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38088 invoked from network); 13 Jul 2007 16:07:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jul 2007 16:07:02 -0000
Received: (qmail 82259 invoked by uid 500); 13 Jul 2007 16:06:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82226 invoked by uid 500); 13 Jul 2007 16:06:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82213 invoked by uid 99); 13 Jul 2007 16:06:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Jul 2007 09:06:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [213.162.48.15] (HELO soufre.accelance.net) (213.162.48.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Jul 2007 09:06:54 -0700
Received: from [192.168.3.144] (LSt-Amand-152-32-31-90.w82-127.abo.wanadoo.fr [82.127.74.90])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by soufre.accelance.net (Postfix) with ESMTP id EC1B95CF6
	for <java-user@lucene.apache.org>; Fri, 13 Jul 2007 18:06:14 +0200 (CEST)
Message-ID: <4697A2F4.3030107@garambrogne.net>
Date: Fri, 13 Jul 2007 18:06:12 +0200
From: Mathieu Lecarme <mathieu@garambrogne.net>
User-Agent: Thunderbird 2.0.0.4 (X11/20070604)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: User Defined Matcher
References: <11582478.post@talk.nabble.com>
In-Reply-To: <11582478.post@talk.nabble.com>
X-Enigmail-Version: 0.95.2
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Mohsen Saboorian a crit :
> Is it possible that I inject my own matching mechanism into Lucene
> IndexSearcher? In other words, is this possible that my own method be called
> in order to collect results (hits)? Suppose the case that I want to match -
> for example - "foo" with both "foo" and "oof".
>
> Thanks in advance,
> Mohsen.
>   
Uses synonyms in the query parser

M.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29173-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 13 16:43:40 2007
Return-Path: <java-user-return-29173-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52187 invoked from network); 13 Jul 2007 16:43:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jul 2007 16:43:39 -0000
Received: (qmail 70143 invoked by uid 500); 13 Jul 2007 16:43:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70109 invoked by uid 500); 13 Jul 2007 16:43:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70097 invoked by uid 99); 13 Jul 2007 16:43:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Jul 2007 09:43:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.100.3.120] (HELO cliff.cs.toronto.edu) (128.100.3.120)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Jul 2007 09:43:30 -0700
Received: from [127.0.0.1] (dvp.cs.toronto.edu [128.100.3.9])
	by cliff.cs.toronto.edu (Postfix) with ESMTP id A07A25FD03
	for <java-user@lucene.apache.org>; Fri, 13 Jul 2007 12:43:12 -0400 (EDT)
Message-ID: <4697ABCF.1090208@cs.toronto.edu>
Date: Fri, 13 Jul 2007 12:43:59 -0400
From: Shahan Khatchadourian <shahan@cs.toronto.edu>
User-Agent: Thunderbird 1.5.0.12 (Windows/20070509)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Token offset values for custom Tokenizer
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
I am storing custom values in the Tokens provided by a Tokenizer but 
when retrieving them from the index the values don't match. I've looked 
in the LIA book but it's not current since it mentioned term vectors 
aren't stored. I'm using Lucene Nightly 146 but the same thing has 
happened with older versions. Looking at the internals, DocumentWriter 
seems to keep track of the end offset that was placed into the index and 
modifies the token values (with +1) but I'm not sure whether I should be 
concerned with it.
No existing analyzers are used when adding the document so all the 
offsets are generated manually.
Any suggestions of how the token offsets should be stored?

Is this valid?
Token, start, end
aaa, 0, 3
bbb, 4, 7
ccc, 8, 11

Thanks,
Shahan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29174-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 13 17:10:00 2007
Return-Path: <java-user-return-29174-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65140 invoked from network); 13 Jul 2007 17:09:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jul 2007 17:09:59 -0000
Received: (qmail 35017 invoked by uid 500); 13 Jul 2007 17:09:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34973 invoked by uid 500); 13 Jul 2007 17:09:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34962 invoked by uid 99); 13 Jul 2007 17:09:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Jul 2007 10:09:54 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Jul 2007 10:09:49 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1I9Oe1-0000jh-4q
	for java-user@lucene.apache.org; Fri, 13 Jul 2007 10:09:29 -0700
Message-ID: <11583698.post@talk.nabble.com>
Date: Fri, 13 Jul 2007 10:09:29 -0700 (PDT)
From: Mohsen Saboorian <mohsens@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: User Defined Matcher
In-Reply-To: <4697A2F4.3030107@garambrogne.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: mohsens@gmail.com
References: <11582478.post@talk.nabble.com> <4697A2F4.3030107@garambrogne.net>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks for quick replies.


Mathieu Lecarme wrote:
> 
> Uses synonyms in the query parser
> 

Sorry, I didn't get the point of synonym. Can you explain more?
-- 
View this message in context: http://www.nabble.com/User-Defined-Matcher-tf4075337.html#a11583698
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29175-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 13 18:08:12 2007
Return-Path: <java-user-return-29175-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87598 invoked from network); 13 Jul 2007 18:08:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jul 2007 18:08:10 -0000
Received: (qmail 51327 invoked by uid 500); 13 Jul 2007 18:08:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51276 invoked by uid 500); 13 Jul 2007 18:08:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51265 invoked by uid 99); 13 Jul 2007 18:08:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Jul 2007 11:08:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [212.27.42.28] (HELO smtp2-g19.free.fr) (212.27.42.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Jul 2007 11:08:02 -0700
Received: from [192.168.1.102] (dau94-4-82-227-122-98.fbx.proxad.net [82.227.122.98])
	by smtp2-g19.free.fr (Postfix) with ESMTP id 32CED98F9F
	for <java-user@lucene.apache.org>; Fri, 13 Jul 2007 20:07:40 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <11583698.post@talk.nabble.com>
References: <11582478.post@talk.nabble.com> <4697A2F4.3030107@garambrogne.net> <11583698.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <9F6503C3-FCA0-44AE-A528-90D5DD2D9813@garambrogne.net>
Content-Transfer-Encoding: quoted-printable
X-Image-Url: http://homepage.mac.com/rdupond/.cv/thumbs/me.thumbnail
From: Mathieu Lecarme <mathieu@garambrogne.net>
Subject: Re: User Defined Matcher
Date: Fri, 13 Jul 2007 20:07:38 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

You creates your own class wich extends SynonymTokenFilter.
You pipe it with your Analyzer.

M.

Le 13 juil. 07 =E0 19:09, Mohsen Saboorian a =E9crit :

>
> Thanks for quick replies.
>
>
> Mathieu Lecarme wrote:
>>
>> Uses synonyms in the query parser
>>
>
> Sorry, I didn't get the point of synonym. Can you explain more?
> -- =20
> View this message in context: http://www.nabble.com/User-Defined-=20
> Matcher-tf4075337.html#a11583698
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29176-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 13 18:40:29 2007
Return-Path: <java-user-return-29176-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 979 invoked from network); 13 Jul 2007 18:40:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jul 2007 18:40:29 -0000
Received: (qmail 11240 invoked by uid 500); 13 Jul 2007 18:40:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11177 invoked by uid 500); 13 Jul 2007 18:40:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11166 invoked by uid 99); 13 Jul 2007 18:40:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Jul 2007 11:40:24 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.225 as permitted sender)
Received: from [66.249.82.225] (HELO wx-out-0506.google.com) (66.249.82.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Jul 2007 11:40:21 -0700
Received: by wx-out-0506.google.com with SMTP id i28so503934wxd
        for <java-user@lucene.apache.org>; Fri, 13 Jul 2007 11:40:00 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=ecJUKnzB/I/EMyVpu+2NkmM/ss5EUWPNXHHLv71/HOsP1lTypzDeXPt6WPf+5hucvS1XNML/gGNYgP5WeXD3pixMkwzcc3i3yGA5At29TDgK5kCk9Nv5pr92YQOl9deacBArFefy2GHom6nGOFg2cHoPuYPCbcbr2NBkdqFHdmI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=C1AV4AQ3hcEUavUTBdt+2R+6wXA/1+w+bvk6l/oAf+WBIm2w4Lesu2fEvqD4weCTSuuHkuuUXVTCUD+WYMb/q8R58SW8y7PVkgKGfdmTr4oygunCKNcJPBOzSgj1Ec6SkOFouLlZXJAQyIUOQqB3bMSH6FxngT8my/PEPasKtEY=
Received: by 10.90.29.18 with SMTP id c18mr1968955agc.1184351999874;
        Fri, 13 Jul 2007 11:39:59 -0700 (PDT)
Received: from ?192.168.1.100? ( [216.66.114.204])
        by mx.google.com with ESMTP id 1sm25261454agb.2007.07.13.11.39.55
        (version=SSLv3 cipher=RC4-MD5);
        Fri, 13 Jul 2007 11:39:56 -0700 (PDT)
Message-ID: <4697C6CA.2030702@gmail.com>
Date: Fri, 13 Jul 2007 14:39:06 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.4 (Windows/20070604)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Standard Analyzer Escapes
References: <ae6f38f60707130813r76937013wa5a0480fac2ea0dc@mail.gmail.com> <c68e39170707130846x25608c17y4bad70a7aca12454@mail.gmail.com>
In-Reply-To: <c68e39170707130846x25608c17y4bad70a7aca12454@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

This is certainly the case. StandardAnalyzer has a regex matcher that 
looks for a possible company name involving an & or an @. The 
QueryParser is escaping the '&' -- all of the affects described are 
standard results of using the StandardAnalzyer. Any double '&&' will 
break text, but 'sdfdf&dfsdf' will match as a company name. Escaping 
will not affect the matches that StandardAnalyzer tries to make, it will 
just keep the QueryParser from matching the escapee as an operator.

'sdfdf&dfsdf&sdfd' will match to company name: sdfdf&dfsdf and then 
token: sdfd...the second '&' breaks, the first causes a company match. 
Check out the regex in StandardTokenizer.jj.

Also, to point out, there is no 'real' literal search in Lucene. 
Anything in quotes gets passed to the Analyzer, so you will get similar 
results whether you use quotes or not.

- Mark

Yonik Seeley wrote:
> I just tried some things fast via the Solr admin interface, and
> everything seems fine.
> I think you are probably confusing what the parser does vs what the
> analyzer does.
> Try your tests with an un-tokenized field to remove that effect.
>
> -Yonik
>
> On 7/13/07, Walt Stoneburner <walt.stoneburner@gmail.com> wrote:
>> In reading the documentation for escape characters, I'm having a
>> little trouble understanding what it wants me to do for certain
>> special cases.
>>
>> http://lucene.apache.org/java/docs/queryparsersyntax.html#Escaping%20Special%20Characters 
>>
>> says: "Lucene supports escaping special characters that are part of
>> the query syntax. The current list special characters are:   + - && ||
>> ! ( ) { } [ ] ^ " ~ * ? : \     To escape these character use the \
>> before the character."
>>
>> Specifically, I'm curious about the double characters && and || and
>> how they should be properly escaped.
>>
>> Experimentation showed some very strange things with the 
>> StandardAnalyzer.
>>
>> Using Luke, I get some interesting mappings.
>>   AT&T    becomes  at&t    (as expected)
>>   AT&&T  becomes  t   (tricky... at is now taken as a stop word; fine
>> makes sense)
>>
>> ..but what about...   "AT&&T"   ...nope, still t.
>>
>> AAA&BBB becomes aaa&bbb    ...correct
>> AAA&&BBB becomes   aaa bbb   ...ampersand becomes a space?
>> "AAA&&BBB" is also    aaa bbb
>>
>> AAA\&BBB correctly is   aaa&bbb   ...just as before
>> AAA\&&BBB   is  aaa bbb   ...but perhaps we got the escape wrong.
>>
>> Is '&&' special "character" and is it escaped as \&& or escaped as
>> \&\& ...let's find out.
>>
>> AAA\&\&BBB   is also  aaa bbb   ...perhaps we need quotes?
>> "AAA\&\&BBB"   is also  aaa bbb   ...I can't seem to get the escape 
>> to work.
>>
>> How about this?
>> AAA&BBB&CCC    strangely becomes   aaa&bbb ccc
>>
>> Even when escaped?
>> AAA\&BBB\&CCC  is also    aaa&bbb ccc    ...appears so.
>>
>> What about...
>> AAA&BBB&CCC&DDD   becomes   aaa&bbb ccc&ddd  ....whoa, not expecting 
>> that.
>>
>> AAA&&BBB&&CCC&&DDD  becomes   aaa bbb ccc ddd  ...if && means AND, ok...
>>
>> AAA\&&BBB\&&CCC\&&DDD   no change  aaa bbb ccc ddd
>>
>> AAA\&\&BBB\&\&CCC\&\&DDD  also no change  aaa bbb ccc ddd
>>
>>
>> It appears I literally cannot search for the token with two ampersands
>> in it, whether they are touching or not.
>>
>> Clearly I'm missing something.  Is there a way to get any literal
>> sequence of my choosing, using escapes, as a term in the Lucene
>> expression?
>>
>> -Walt Stoneburner
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29177-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 13 23:19:29 2007
Return-Path: <java-user-return-29177-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2460 invoked from network); 13 Jul 2007 23:19:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jul 2007 23:19:27 -0000
Received: (qmail 73179 invoked by uid 500); 13 Jul 2007 23:19:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73057 invoked by uid 500); 13 Jul 2007 23:19:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73045 invoked by uid 99); 13 Jul 2007 23:19:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Jul 2007 16:19:21 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jpsondag@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Jul 2007 16:19:18 -0700
Received: by py-out-1112.google.com with SMTP id f31so1876330pyh
        for <java-user@lucene.apache.org>; Fri, 13 Jul 2007 16:18:57 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        b=IdeOrO5Wf970sqEavoWg+19UNL3IC/DDzul0dOR176Lt+7ruaaYVnO1vwdE0b2VxbDQcBRXF+RIlo6RHyynCSoJDPhlrBtl2IOrdrh+z5XtNWzs7Y+YZbJwCL9SZqzTsgWMO2mTjRqE6Gq85rT4Pk9EdPy04Uop+urP93L8JE94=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        b=RjXsdJSTq0MH54TYEPBl/EBXdk1iMM4NOfd0U55notLTgBXW+u9kyVMmLXI0I0K9bfnhs0OfsuYyJw4U8y7THD8g8zHNcYPqdjm+/vUuVzc87ywILX2m+VEe+5yDUlr0Ylgnfh/rkUnhPLNed80NfgzPJVA3exh7B1XvMD9B8sY=
Received: by 10.65.248.19 with SMTP id a19mr3888063qbs.1184368736697;
        Fri, 13 Jul 2007 16:18:56 -0700 (PDT)
Received: by 10.65.177.7 with HTTP; Fri, 13 Jul 2007 16:18:56 -0700 (PDT)
Message-ID: <bd67edef0707131618v6b0e58e7n38824b018850d1b@mail.gmail.com>
Date: Fri, 13 Jul 2007 18:18:56 -0500
From: "John Paul Sondag" <jsondag2@uiuc.edu>
Sender: jpsondag@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Does Index have a Tokenizer Built into it
In-Reply-To: <A955EA1F8FE31749AEC8C998082F6C7C01AC112D@hai01.hippo.local>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_37119_18184405.1184368736615"
References: <A955EA1F8FE31749AEC8C998082F6C7C01AC112D@hai01.hippo.local>
X-Google-Sender-Auth: e1569674b3bb7301
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_37119_18184405.1184368736615
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Ard,

I do have access to the URL's of the documents, but because I will be making
short snippets for many pages (suppose it had about 20 hits per page and I
need to make Snippets for each of them) I was worried it would be
inefficient to open each "hit" tokenize it and then make the Snippet, of
course the price of this may be worth the price of the increased Index
size.  I have been looking into storing "Field Vectors with positions" in
the index.  It seems that by doing this I will have access to everything
that the Tokenizer is giving me correct?   Will I need to store "term text"
in order to be able to access the actual term instead of stemmed words?

Thanks for all your help,

--JP

On 7/13/07, Ard Schrijvers <a.schrijvers@hippo.nl> wrote:
>
> Hello,
>
> > I'm wondering if after
> > opening the
> > index I can retrieve the Tokens (not the terms) of a
> > document, something
> > akin to IndexReader.Document(n).getTokenizer().
>
> It is obviously not possible to get the original tokens of the document
> back when you haven't stored the document, because:
>
> 1) the analyzer might have removed stop words in the first place
> 2) the terms in lucene index are perhaps stemmed words / synonyms / etc
> etc
> 3) how would you expect things like spaces, commas, dots etc to be
> restored?
>
> And, I think what you want does not comply with an inverted index. When
> you do not store the document, you always loose information about the
> document during indexing/analyzing
>
> How many documents are you talking about? They must be either somewhere on
> FS or accessible over http...when you need the document, why not just
> provide a link to the original location?
>
> Regards Ard
>
> >
> > In summary:
> >
> > My current ( too wasteful implementation is this)
> >
> > StandardTokenizer(BufferedReader (
> > IndexReader.Document(n).getField("text"
> > )  )
> >
> > I'm wondering if Lucene has a more efficient manner to
> > retrieve the tokens
> > of a document from an index.  Because it seems like it has
> > information about
> > every "term" already, Since you can get retrieve a
> > TermPositions object.
> >
> > Thanks,
> >
> >
> > --JP
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_37119_18184405.1184368736615--

From java-user-return-29178-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 14 08:50:55 2007
Return-Path: <java-user-return-29178-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49800 invoked from network); 14 Jul 2007 08:50:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jul 2007 08:50:54 -0000
Received: (qmail 10913 invoked by uid 500); 14 Jul 2007 08:50:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10741 invoked by uid 500); 14 Jul 2007 08:50:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10730 invoked by uid 99); 14 Jul 2007 08:50:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Jul 2007 01:50:49 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mnrz57@gmail.com designates 209.85.132.250 as permitted sender)
Received: from [209.85.132.250] (HELO an-out-0708.google.com) (209.85.132.250)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Jul 2007 01:50:46 -0700
Received: by an-out-0708.google.com with SMTP id c5so194844anc
        for <java-user@lucene.apache.org>; Sat, 14 Jul 2007 01:50:25 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=tRWej/rWFpH8FGa/1vzeMIOwZDDsdO1RhPehB0g36MDMqlIvnLSabyMXEcE3cdirMcaTRjqPkvCaGgp8wepH1BrUsr/LqJWfhffJG4nPnseo6QMV/+fbYgadP5cPI4xzZ6dPlFaX7qNJiH85kvtqeLhkGE5OyBsj+8mvDdoBnJc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=kXilvcITybmpc9uYhZ9OK+M2YwZJdUVVvxGPT3vn/onrBux7KQOKdNlyjfrQrruWwPseLfnpbmhEq8GbysWCVvRiJB4sz1LOui1nAcfR8IwURfPtTc5OLubEqDVQJ1T2e+UmxHkUGSV7lmIRT/LTN2aD3LTznrW3etxNEtYbAjo=
Received: by 10.100.95.19 with SMTP id s19mr1332919anb.1184403025604;
        Sat, 14 Jul 2007 01:50:25 -0700 (PDT)
Received: by 10.100.9.13 with HTTP; Sat, 14 Jul 2007 01:50:25 -0700 (PDT)
Message-ID: <34b8543c0707140150s2a6f0c99pedcbd9f82356f43@mail.gmail.com>
Date: Sat, 14 Jul 2007 12:20:25 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: search through all fields
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_39527_30073259.1184403025456"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_39527_30073259.1184403025456
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello all
is there any way to search through all the fields without using
MultiFieldQueryParser? currently I am using this parser but it requires to
pass all fields as an array to its parse method and QueryParser will search
through the default field if no field name is specified

lots of thanks

-- 
Regards,
Mohammad
--------------------------
see my blog: http://brainable.blogspot.com/
another in Persian: http://fekre-motefavet.blogspot.com/

------=_Part_39527_30073259.1184403025456--

From java-user-return-29179-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 14 09:29:54 2007
Return-Path: <java-user-return-29179-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63876 invoked from network); 14 Jul 2007 09:29:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jul 2007 09:29:53 -0000
Received: (qmail 51832 invoked by uid 500); 14 Jul 2007 09:29:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51804 invoked by uid 500); 14 Jul 2007 09:29:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51793 invoked by uid 99); 14 Jul 2007 09:29:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Jul 2007 02:29:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [212.27.42.28] (HELO smtp2-g19.free.fr) (212.27.42.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Jul 2007 02:29:46 -0700
Received: from [192.168.1.102] (dau94-4-82-227-122-98.fbx.proxad.net [82.227.122.98])
	by smtp2-g19.free.fr (Postfix) with ESMTP id 3F2CA97341
	for <java-user@lucene.apache.org>; Sat, 14 Jul 2007 11:29:24 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <34b8543c0707140150s2a6f0c99pedcbd9f82356f43@mail.gmail.com>
References: <34b8543c0707140150s2a6f0c99pedcbd9f82356f43@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <034ED9E0-41CA-495F-AE18-52A63A3078EB@garambrogne.net>
Content-Transfer-Encoding: quoted-printable
X-Image-Url: http://homepage.mac.com/rdupond/.cv/thumbs/me.thumbnail
From: Mathieu Lecarme <mathieu@garambrogne.net>
Subject: Re: search through all fields
Date: Sat, 14 Jul 2007 11:29:23 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

you can use the "all" special field, but you loose the differents =20
boost values.

M.
Le 14 juil. 07 =E0 10:50, Mohammad Norouzi a =E9crit :

> Hello all
> is there any way to search through all the fields without using
> MultiFieldQueryParser? currently I am using this parser but it =20
> requires to
> pass all fields as an array to its parse method and QueryParser =20
> will search
> through the default field if no field name is specified
>
> lots of thanks
>
> --=20
> Regards,
> Mohammad
> --------------------------
> see my blog: http://brainable.blogspot.com/
> another in Persian: http://fekre-motefavet.blogspot.com/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29180-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 14 11:09:15 2007
Return-Path: <java-user-return-29180-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12614 invoked from network); 14 Jul 2007 11:09:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jul 2007 11:09:14 -0000
Received: (qmail 80839 invoked by uid 500); 14 Jul 2007 11:09:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80806 invoked by uid 500); 14 Jul 2007 11:09:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80795 invoked by uid 99); 14 Jul 2007 11:09:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Jul 2007 04:09:05 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mnrz57@gmail.com designates 209.85.132.242 as permitted sender)
Received: from [209.85.132.242] (HELO an-out-0708.google.com) (209.85.132.242)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Jul 2007 04:09:02 -0700
Received: by an-out-0708.google.com with SMTP id c5so199536anc
        for <java-user@lucene.apache.org>; Sat, 14 Jul 2007 04:08:41 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=CS37B163vJTpgF/D2vUswg9nmq0USEaC1sH/B8C7307+jnNS6aSn0n53lZ2YmiL1396KmONjQfDsxcCc0CUnKyFbrqe4oVH6KuBPnPHivSDEnixUoyWV4r/gGqmYDxXn5DozdTpzyTDLOC+fR4OqMdIz2HEkUa/ea68336xWlFQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=XqnS04ec9m6X+liP/gbrNFBiA12VD9j3NZzHE1bOFo3lkKdFBXn+bvffGZ4jfGpJS4wZdzzqvbnBdlB+GtH9XVfpNl9Z7KsQ8577tlbbn8kp790Yfb7osHbBfc2SGwx2KXYuBemyM8EtuiJ51NOmDxOnliVIHj6am6aOUd2t6Q0=
Received: by 10.100.166.14 with SMTP id o14mr1370409ane.1184411321512;
        Sat, 14 Jul 2007 04:08:41 -0700 (PDT)
Received: by 10.100.9.13 with HTTP; Sat, 14 Jul 2007 04:08:41 -0700 (PDT)
Message-ID: <34b8543c0707140408w2a929c8ch7ae8d0ead0c20c93@mail.gmail.com>
Date: Sat, 14 Jul 2007 14:38:41 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: search through all fields
In-Reply-To: <034ED9E0-41CA-495F-AE18-52A63A3078EB@garambrogne.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_39979_32822265.1184411321481"
References: <34b8543c0707140150s2a6f0c99pedcbd9f82356f43@mail.gmail.com>
	 <034ED9E0-41CA-495F-AE18-52A63A3078EB@garambrogne.net>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_39979_32822265.1184411321481
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: base64
Content-Disposition: inline

VGhhbmtzIE1hdGhpZXUKeW91IG1lYW4gdXNlIGEgcXVlcnkgbGlrZSAiYWxsOnRlc3QiIHVzaW5n
IFF1ZXJ5UGFyc2VyPwoKCk9uIDcvMTQvMDcsIE1hdGhpZXUgTGVjYXJtZSA8bWF0aGlldUBnYXJh
bWJyb2duZS5uZXQ+IHdyb3RlOgo+Cj4geW91IGNhbiB1c2UgdGhlICJhbGwiIHNwZWNpYWwgZmll
bGQsIGJ1dCB5b3UgbG9vc2UgdGhlIGRpZmZlcmVudHMKPiBib29zdCB2YWx1ZXMuCj4KPiBNLgo+
IExlIDE0IGp1aWwuIDA3IMOgIDEwOjUwLCBNb2hhbW1hZCBOb3JvdXppIGEgw6ljcml0IDoKPgo+
ID4gSGVsbG8gYWxsCj4gPiBpcyB0aGVyZSBhbnkgd2F5IHRvIHNlYXJjaCB0aHJvdWdoIGFsbCB0
aGUgZmllbGRzIHdpdGhvdXQgdXNpbmcKPiA+IE11bHRpRmllbGRRdWVyeVBhcnNlcj8gY3VycmVu
dGx5IEkgYW0gdXNpbmcgdGhpcyBwYXJzZXIgYnV0IGl0Cj4gPiByZXF1aXJlcyB0bwo+ID4gcGFz
cyBhbGwgZmllbGRzIGFzIGFuIGFycmF5IHRvIGl0cyBwYXJzZSBtZXRob2QgYW5kIFF1ZXJ5UGFy
c2VyCj4gPiB3aWxsIHNlYXJjaAo+ID4gdGhyb3VnaCB0aGUgZGVmYXVsdCBmaWVsZCBpZiBubyBm
aWVsZCBuYW1lIGlzIHNwZWNpZmllZAo+ID4KPiA+IGxvdHMgb2YgdGhhbmtzCj4gPgo+ID4gLS0K
PiA+IFJlZ2FyZHMsCj4gPiBNb2hhbW1hZAo+ID4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0K
PiA+IHNlZSBteSBibG9nOiBodHRwOi8vYnJhaW5hYmxlLmJsb2dzcG90LmNvbS8KPiA+IGFub3Ro
ZXIgaW4gUGVyc2lhbjogaHR0cDovL2Zla3JlLW1vdGVmYXZldC5ibG9nc3BvdC5jb20vCj4KPgo+
IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLQo+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNj
cmliZUBsdWNlbmUuYXBhY2hlLm9yZwo+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6
IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnCj4KPgoKCi0tIApSZWdhcmRzLApNb2hh
bW1hZAotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpzZWUgbXkgYmxvZzogaHR0cDovL2JyYWlu
YWJsZS5ibG9nc3BvdC5jb20vCmFub3RoZXIgaW4gUGVyc2lhbjogaHR0cDovL2Zla3JlLW1vdGVm
YXZldC5ibG9nc3BvdC5jb20vCg==
------=_Part_39979_32822265.1184411321481--

From java-user-return-29181-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 14 12:00:11 2007
Return-Path: <java-user-return-29181-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56981 invoked from network); 14 Jul 2007 12:00:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jul 2007 12:00:11 -0000
Received: (qmail 38742 invoked by uid 500); 14 Jul 2007 12:00:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38701 invoked by uid 500); 14 Jul 2007 12:00:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38689 invoked by uid 99); 14 Jul 2007 12:00:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Jul 2007 05:00:06 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_MESSAGE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mnrz57@gmail.com designates 209.85.132.250 as permitted sender)
Received: from [209.85.132.250] (HELO an-out-0708.google.com) (209.85.132.250)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Jul 2007 05:00:02 -0700
Received: by an-out-0708.google.com with SMTP id c5so201276anc
        for <java-user@lucene.apache.org>; Sat, 14 Jul 2007 04:59:42 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=NTYM/7bcA73RG99QN2OBs3US6dNnyc2v5B0i8UqvPRnGcAZpdibSKXRK3rWgUvOfDKKemQjfeWY+/wsHgw1NRBbzFqwfYlk021GAubXxWl1IoZG82XYtis7px3GPWry6wwc2jJfXas2zuLC27whbisy8d1ddFyI5xuNi4Mu8cMg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=T5SlALV9sx+h4V3ZsQ8UX+m3d3dPSQDxIPfAj4NL6iG7W8pANtPIKz//EcA+VWt/D/soIHRQSLCT/WjCPpsFsLUQ656B2Fk6GGr+bXsm81oaBJMxPeJaDhgzeSTyOUP/LZrvdHPHbof+kzrc04XdgZfQ/T8qHHPmr6/oIIU6SPs=
Received: by 10.100.140.6 with SMTP id n6mr1388972and.1184414382181;
        Sat, 14 Jul 2007 04:59:42 -0700 (PDT)
Received: by 10.100.9.13 with HTTP; Sat, 14 Jul 2007 04:59:42 -0700 (PDT)
Message-ID: <34b8543c0707140459v43974e3wbbeec170fe770a0d@mail.gmail.com>
Date: Sat, 14 Jul 2007 15:29:42 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: search through all fields
In-Reply-To: <34b8543c0707140408w2a929c8ch7ae8d0ead0c20c93@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_40135_29771347.1184414382148"
References: <34b8543c0707140150s2a6f0c99pedcbd9f82356f43@mail.gmail.com>
	 <034ED9E0-41CA-495F-AE18-52A63A3078EB@garambrogne.net>
	 <34b8543c0707140408w2a929c8ch7ae8d0ead0c20c93@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_40135_29771347.1184414382148
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: base64
Content-Disposition: inline

SSd2ZSBqdXN0IHRyaWVkICJhbGwiIGFzIGEgc3BlY2lhbCBmaWVsZCBidXQgaXQgZG9lc250IHdv
cmshISEgcGxlYXNlIHRha2UgYQpsb29rIGF0IG15IHNuaXBwZXQgY29kZSBpZiBJIHdhcyBtaXN0
YWtlbgoKICAgICAgIFF1ZXJ5UGFyc2VyIHBhcnNlciA9IG5ldyBRdWVyeVBhcnNlcigiQWxsIixn
ZXRBbmFseXplcigxKSk7CiAgICAgICBRdWVyeSBxID0gcGFyc2VyLnBhcnNlKG15UXVlcnkuZ2V0
UXVlcnlTdHJpbmcoKSk7Cgp0aGFua3MgYWdhaW4KCk9uIDcvMTQvMDcsIE1vaGFtbWFkIE5vcm91
emkgPG1ucno1N0BnbWFpbC5jb20+IHdyb3RlOgo+Cj4gVGhhbmtzIE1hdGhpZXUKPiB5b3UgbWVh
biB1c2UgYSBxdWVyeSBsaWtlICJhbGw6dGVzdCIgdXNpbmcgUXVlcnlQYXJzZXI/Cj4KPgo+IE9u
IDcvMTQvMDcsIE1hdGhpZXUgTGVjYXJtZSA8IG1hdGhpZXVAZ2FyYW1icm9nbmUubmV0PiB3cm90
ZToKPiA+Cj4gPiB5b3UgY2FuIHVzZSB0aGUgImFsbCIgc3BlY2lhbCBmaWVsZCwgYnV0IHlvdSBs
b29zZSB0aGUgZGlmZmVyZW50cwo+ID4gYm9vc3QgdmFsdWVzLgo+ID4KPiA+IE0uCj4gPiBMZSAx
NCBqdWlsLiAwNyDDoCAxMDo1MCwgTW9oYW1tYWQgTm9yb3V6aSBhIMOpY3JpdCA6Cj4gPgo+ID4g
PiBIZWxsbyBhbGwKPiA+ID4gaXMgdGhlcmUgYW55IHdheSB0byBzZWFyY2ggdGhyb3VnaCBhbGwg
dGhlIGZpZWxkcyB3aXRob3V0IHVzaW5nCj4gPiA+IE11bHRpRmllbGRRdWVyeVBhcnNlcj8gY3Vy
cmVudGx5IEkgYW0gdXNpbmcgdGhpcyBwYXJzZXIgYnV0IGl0Cj4gPiA+IHJlcXVpcmVzIHRvCj4g
PiA+IHBhc3MgYWxsIGZpZWxkcyBhcyBhbiBhcnJheSB0byBpdHMgcGFyc2UgbWV0aG9kIGFuZCBR
dWVyeVBhcnNlcgo+ID4gPiB3aWxsIHNlYXJjaAo+ID4gPiB0aHJvdWdoIHRoZSBkZWZhdWx0IGZp
ZWxkIGlmIG5vIGZpZWxkIG5hbWUgaXMgc3BlY2lmaWVkCj4gPiA+Cj4gPiA+IGxvdHMgb2YgdGhh
bmtzCj4gPiA+Cj4gPiA+IC0tCj4gPiA+IFJlZ2FyZHMsCj4gPiA+IE1vaGFtbWFkCj4gPiA+IC0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4gPiA+IHNlZSBteSBibG9nOiBodHRwOi8vYnJhaW5h
YmxlLmJsb2dzcG90LmNvbS8KPiA+ID4gYW5vdGhlciBpbiBQZXJzaWFuOiBodHRwOi8vZmVrcmUt
bW90ZWZhdmV0LmJsb2dzcG90LmNvbS8KPiA+Cj4gPgo+ID4gLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4gPiBUbyB1
bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5v
cmcKPiA+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1
Y2VuZS5hcGFjaGUub3JnCj4gPgo+ID4KPgo+Cj4gLS0KPiBSZWdhcmRzLAo+IE1vaGFtbWFkCj4g
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KPiBzZWUgbXkgYmxvZzogaHR0cDovL2JyYWluYWJs
ZS5ibG9nc3BvdC5jb20vCj4gYW5vdGhlciBpbiBQZXJzaWFuOiBodHRwOi8vZmVrcmUtbW90ZWZh
dmV0LmJsb2dzcG90LmNvbS8KPgoKCgotLSAKUmVnYXJkcywKTW9oYW1tYWQKLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0Kc2VlIG15IGJsb2c6IGh0dHA6Ly9icmFpbmFibGUuYmxvZ3Nwb3QuY29t
Lwphbm90aGVyIGluIFBlcnNpYW46IGh0dHA6Ly9mZWtyZS1tb3RlZmF2ZXQuYmxvZ3Nwb3QuY29t
Lwo=
------=_Part_40135_29771347.1184414382148--

From java-user-return-29182-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 14 15:20:11 2007
Return-Path: <java-user-return-29182-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81841 invoked from network); 14 Jul 2007 15:20:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jul 2007 15:20:10 -0000
Received: (qmail 2032 invoked by uid 500); 14 Jul 2007 15:20:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1927 invoked by uid 500); 14 Jul 2007 15:20:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1916 invoked by uid 99); 14 Jul 2007 15:20:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Jul 2007 08:20:04 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of crspan@gmail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO py-out-1112.google.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Jul 2007 08:20:01 -0700
Received: by py-out-1112.google.com with SMTP id f31so2428595pyh
        for <java-user@lucene.apache.org>; Sat, 14 Jul 2007 08:19:40 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:content-type:content-transfer-encoding;
        b=diskbK3Bx76PgRNGq1+TEpo+M8ilZwlxbSQ1P+6qzGK5bRFMApdxSi/Qa5qMsW+v4yCsdxnxOc4R2rnXCLfLQzZYxpTldZrgWwNqeOvuJdXN7K7zdT1y/eikNYQS7y+Z3YOzfKLe0l7TsnIc1U/bJOvfHgcky/O+wt5MfjHo0tM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:content-type:content-transfer-encoding;
        b=KUJWJ9agsvF/jVaelbGKWx2gT5KjVy0/4PfOhFpjB6IArKt8A/z/VcU5goMnhOYYeK57iTL2+xLBxtgL4OxUZVoS0uFoAtrbt033hIS+xE9ma1ChH8Ayf2jxbhIcLlsDcrfiEUK/wXYQnumX+MO7n4QilJuZ4j3M/WeT7WTGYoI=
Received: by 10.35.47.10 with SMTP id z10mr4669122pyj.1184426380273;
        Sat, 14 Jul 2007 08:19:40 -0700 (PDT)
Received: from ?134.193.128.90? ( [134.193.128.90])
        by mx.google.com with ESMTP id f6sm34362723pyh.2007.07.14.08.19.38
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sat, 14 Jul 2007 08:19:38 -0700 (PDT)
Message-ID: <4698E963.3020000@gmail.com>
Date: Sat, 14 Jul 2007 10:18:59 -0500
From: crspan <crspan@gmail.com>
User-Agent: Thunderbird 2.0.0.4 (Windows/20070604)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: index U.K. U.S. U.N. U.V.
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Would you please advice the best practice of indexing:

  U.S.

The standard analyzer will transform it to be "us", which collide with 
"us"(we).

Thanks,

Charlie




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29183-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 14 18:54:40 2007
Return-Path: <java-user-return-29183-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52894 invoked from network); 14 Jul 2007 18:54:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jul 2007 18:54:39 -0000
Received: (qmail 15324 invoked by uid 500); 14 Jul 2007 18:54:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15293 invoked by uid 500); 14 Jul 2007 18:54:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15282 invoked by uid 99); 14 Jul 2007 18:54:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Jul 2007 11:54:33 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of grant.ingersoll@gmail.com designates 209.85.132.247 as permitted sender)
Received: from [209.85.132.247] (HELO an-out-0708.google.com) (209.85.132.247)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Jul 2007 11:54:30 -0700
Received: by an-out-0708.google.com with SMTP id c5so218257anc
        for <java-user@lucene.apache.org>; Sat, 14 Jul 2007 11:54:09 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=CkhIMGcrAcB7rYMRQ/ianGMrA+fC3TL1p+KJNF6SYK0EZVTA3j07Jb6AXrQ/TvgAj5Mzo1qwlS0L5OBxMSfGV/lz1/vblIjRhuFpgxkBeb62uuWGnM+KsEz6kTzDFzdwNuuJlMtp1hw3WUDHhGtuvnA8S60XklOAggMof18l1M8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=Oo9p1+DkVdlL6WhGqaG0ZHFJ3Vgj3ny49v/oVvwleVLIL6YDGIKA6XvBcdrV5p2QnNXDeAdDfEsHSHe1n88BfsGfzXWbe2/U1pABgyb5asc0QOZq6HzkVM6PGaK/9O/nYC3LDXXUyvItfJnOSxkgwTfqRcW5yRN3EuZT5/cH1qM=
Received: by 10.100.47.9 with SMTP id u9mr1532497anu.1184439249795;
        Sat, 14 Jul 2007 11:54:09 -0700 (PDT)
Received: from ?192.168.0.3? ( [74.229.189.244])
        by mx.google.com with ESMTP id c40sm8757950anc.2007.07.14.11.54.08
        (version=TLSv1/SSLv3 cipher=OTHER);
        Sat, 14 Jul 2007 11:54:09 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <34b8543c0707140459v43974e3wbbeec170fe770a0d@mail.gmail.com>
References: <34b8543c0707140150s2a6f0c99pedcbd9f82356f43@mail.gmail.com> <034ED9E0-41CA-495F-AE18-52A63A3078EB@garambrogne.net> <34b8543c0707140408w2a929c8ch7ae8d0ead0c20c93@mail.gmail.com> <34b8543c0707140459v43974e3wbbeec170fe770a0d@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <08B583CE-6C47-454C-BC16-BC6001FD4272@gmail.com>
Content-Transfer-Encoding: quoted-printable
From: Grant Ingersoll <grant.ingersoll@gmail.com>
Subject: Re: search through all fields
Date: Sat, 14 Jul 2007 14:54:02 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

I think he means index all your different fields into a single field =20
named "all".  Not sure what makes it special, it is just like any =20
other field.

-Grant

On Jul 14, 2007, at 7:59 AM, Mohammad Norouzi wrote:

> I've just tried "all" as a special field but it doesnt work!!! =20
> please take a
> look at my snippet code if I was mistaken
>
>       QueryParser parser =3D new QueryParser("All",getAnalyzer(1));
>       Query q =3D parser.parse(myQuery.getQueryString());
>
> thanks again
>
> On 7/14/07, Mohammad Norouzi <mnrz57@gmail.com> wrote:
>>
>> Thanks Mathieu
>> you mean use a query like "all:test" using QueryParser?
>>
>>
>> On 7/14/07, Mathieu Lecarme < mathieu@garambrogne.net> wrote:
>> >
>> > you can use the "all" special field, but you loose the differents
>> > boost values.
>> >
>> > M.
>> > Le 14 juil. 07 =E0 10:50, Mohammad Norouzi a =E9crit :
>> >
>> > > Hello all
>> > > is there any way to search through all the fields without using
>> > > MultiFieldQueryParser? currently I am using this parser but it
>> > > requires to
>> > > pass all fields as an array to its parse method and QueryParser
>> > > will search
>> > > through the default field if no field name is specified
>> > >
>> > > lots of thanks
>> > >
>> > > --
>> > > Regards,
>> > > Mohammad
>> > > --------------------------
>> > > see my blog: http://brainable.blogspot.com/
>> > > another in Persian: http://fekre-motefavet.blogspot.com/
>> >
>> >
>> > =20
>> ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>
>>
>> --
>> Regards,
>> Mohammad
>> --------------------------
>> see my blog: http://brainable.blogspot.com/
>> another in Persian: http://fekre-motefavet.blogspot.com/
>>
>
>
>
> --=20
> Regards,
> Mohammad
> --------------------------
> see my blog: http://brainable.blogspot.com/
> another in Persian: http://fekre-motefavet.blogspot.com/

------------------------------------------------------
Grant Ingersoll
http://www.grantingersoll.com/
http://lucene.grantingersoll.com
http://www.paperoftheweek.com/



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29184-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 16 02:11:09 2007
Return-Path: <java-user-return-29184-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18249 invoked from network); 16 Jul 2007 02:10:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jul 2007 02:10:45 -0000
Received: (qmail 82658 invoked by uid 500); 16 Jul 2007 02:10:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82623 invoked by uid 500); 16 Jul 2007 02:10:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82612 invoked by uid 99); 16 Jul 2007 02:10:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Jul 2007 19:10:40 -0700
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Jul 2007 19:10:37 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IAG2T-0000Hd-2W
	for java-user@lucene.apache.org; Sun, 15 Jul 2007 19:10:17 -0700
Message-ID: <11608209.post@talk.nabble.com>
Date: Sun, 15 Jul 2007 19:10:17 -0700 (PDT)
From: kumarlimbu <kumarlimbu@gmail.com>
To: java-user@lucene.apache.org
Subject: Serving remote lucene client - RMI vs HTTP
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_51794_15774466.1184551817069"
X-Nabble-From: kumarlimbu@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_51794_15774466.1184551817069
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


Hi Everyone,

We are using lucene,nutch and spring framework to create a specialized
search engine. Due to growing traffic we are trying to scale. By doing some
tests we found out that the bottle neck was lucene search. We used some
heavy traffic simulation and logged the time taken by each portion of the
server response and found out that the bulk of the time was spent in
searching from lucene index.

In order to accomodate higher traffic we are planning on splitting our
application in 2 portions:
1. Web application (on 1 machine)
2. Search application (one more than 1 machine)

Each one of the application will reside on a (possibly) separate machines.
We are looking forward to scaling by adding more than 1 machine dedicated to
searching as lucene search seems to be the bottleneck. 

Web application will provide the front-end to the user. All static pages,
images and the style information will reside on this machine. It will also
serve dynamic pages but all the searching will take place on the search
application. Web application will send search parameters to the search
application and after searching, it will send back the results to the web
application which will format it and display it to the user.

What we are unable to decide is whether to use RMI (
http://www.soft-amis.com/index.html?return=http://www.soft-amis.com/cluster4spring/index.html
cluster4spring  )or simple HTTP POST/GET request with response in XML
format. We did some research and found out that RMI (with clustering
support) might be more suitable for our needs. Unfortunately our team is not
familiar with RMI and so we don't know if there will be any issues with it
during implementation. 
Advantage of using simple GET/POST is we have more control which searcher
app to use and when. An important criteria for us is to disable searching
from the searcher app who's index is being updated. This is very important
for us. Is there anyway in RMI to inform the web (client) application that a
particular server is unavailable (due to index being updated).

We would also like to know if anybody has implemented lucene searching in a
similar fashion. Thanks for your help.

Kumar Limbu

-- 
View this message in context: http://www.nabble.com/Serving-remote-lucene-client---RMI-vs-HTTP-tf4084167.html#a11608209
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

------=_Part_51794_15774466.1184551817069--


From java-user-return-29185-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 16 02:34:43 2007
Return-Path: <java-user-return-29185-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33913 invoked from network); 16 Jul 2007 02:34:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jul 2007 02:34:42 -0000
Received: (qmail 720 invoked by uid 500); 16 Jul 2007 02:34:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 667 invoked by uid 500); 16 Jul 2007 02:34:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 655 invoked by uid 99); 16 Jul 2007 02:34:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Jul 2007 19:34:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [69.147.64.91] (HELO smtp118.sbc.mail.sp1.yahoo.com) (69.147.64.91)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 15 Jul 2007 19:34:33 -0700
Received: (qmail 91741 invoked from network); 16 Jul 2007 02:34:11 -0000
Received: from unknown (HELO ?192.168.1.34?) (kkrugler@pacbell.net@63.200.72.123 with plain)
  by smtp118.sbc.mail.sp1.yahoo.com with SMTP; 16 Jul 2007 02:34:11 -0000
X-YMail-OSG: xr6Hvt0VM1n5T2CNc42kN5U6Bd6MH285ofpWRRTx.sMhrRPO85wpOLzuTyAVhVlKhgWrslzh5A--
Mime-Version: 1.0
Message-Id: <p06240807c2c089630cdc@[192.168.1.34]>
In-Reply-To: <11608209.post@talk.nabble.com>
References: <11608209.post@talk.nabble.com>
Date: Sun, 15 Jul 2007 19:34:02 -0700
To: java-user@lucene.apache.org
From: Ken Krugler <kkrugler_lists@transpac.com>
Subject: Re: Serving remote lucene client - RMI vs HTTP
Content-Type: text/plain; charset="us-ascii" ; format="flowed"
X-Virus-Checked: Checked by ClamAV on apache.org

>Hi Everyone,
>
>We are using lucene,nutch and spring framework to create a specialized
>search engine. Due to growing traffic we are trying to scale. By doing some
>tests we found out that the bottle neck was lucene search. We used some
>heavy traffic simulation and logged the time taken by each portion of the
>server response and found out that the bulk of the time was spent in
>searching from lucene index.
>
>In order to accomodate higher traffic we are planning on splitting our
>application in 2 portions:
>1. Web application (on 1 machine)
>2. Search application (one more than 1 machine)

[snip]

Nutch already supports distributed Lucene searchers, using Hadoop RPC.

-- Ken
-- 
Ken Krugler
Krugle, Inc.
+1 530-210-6378
"If you can't find it, you can't fix it"

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29186-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 16 02:44:04 2007
Return-Path: <java-user-return-29186-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37565 invoked from network); 16 Jul 2007 02:44:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jul 2007 02:44:03 -0000
Received: (qmail 9136 invoked by uid 500); 16 Jul 2007 02:44:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8464 invoked by uid 500); 16 Jul 2007 02:43:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8452 invoked by uid 99); 16 Jul 2007 02:43:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Jul 2007 19:43:58 -0700
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=MIME_BASE64_TEXT,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of chee.wu@gmail.com designates 209.85.146.178 as permitted sender)
Received: from [209.85.146.178] (HELO wa-out-1112.google.com) (209.85.146.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Jul 2007 19:43:54 -0700
Received: by wa-out-1112.google.com with SMTP id j40so1502486wah
        for <java-user@lucene.apache.org>; Sun, 15 Jul 2007 19:43:34 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:from:to:references:subject:date:mime-version:content-type:content-transfer-encoding:x-priority:x-msmail-priority:x-mailer:x-mimeole;
        b=Czga9kMlS2LI29v14SaEaux0NtBtyHXsPbbHfPgymADAFGwPH9Sberz+5SEj0s4BtLNF2yCR1oTYiajoXWqmbM6avFcPRfCFvCGQFZnJhMfswyxTohtIPxzQ/VocrqRV/oG+YlX/IFxcz9F0cyMI5yK6nP0DNPDUnY8J9IbXaNU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:from:to:references:subject:date:mime-version:content-type:content-transfer-encoding:x-priority:x-msmail-priority:x-mailer:x-mimeole;
        b=Er/DnbH7hnICjc7DMsQ97Qyhd6ApRuoOT7Bp2z13C+ebOrBFtLSxSVMIoMZSDXualJEHPAcqhgG+JnSZDyaju/F9E3v4yE4ASWjf4FuXl3C063icl+8bQR0SLc4gw04G1PBUaDY9u1UvhIQzmbYSTBRMz9OMwbm5r62EhveTd3M=
Received: by 10.114.134.1 with SMTP id h1mr3746506wad.1184553813889;
        Sun, 15 Jul 2007 19:43:33 -0700 (PDT)
Received: from D7B19P1X ( [221.223.17.165])
        by mx.google.com with ESMTP id k14sm26172412waf.2007.07.15.19.43.32
        (version=SSLv3 cipher=RC4-MD5);
        Sun, 15 Jul 2007 19:43:33 -0700 (PDT)
Message-ID: <000c01c7c753$14baade0$0246a8c0@D7B19P1X>
From: "qi wu" <chee.wu@gmail.com>
To: <java-user@lucene.apache.org>
References: <11608209.post@talk.nabble.com>
Subject: Re: Serving remote lucene client - RMI vs HTTP
Date: Mon, 16 Jul 2007 10:43:12 +0800
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: base64
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

SGkgS3VtYXIsDQpJIGFtIGFsc28gaW50ZXJlc3RlZCBpbiB0aGlzIHF1ZXN0aW9uLiBJIGhhdmUg
dXNlZCBzaW1wbGUgSFRUUCBQT1NUL0dFVCByZXF1ZXN0IHdpdGggb3BlbiBzZWFyY2gsYW5kIGl0
IHJlcXVpcmVzIGFib3V0IGV4dHJhIDE1bXMgZm9yICB0cmFuc2ZlcnJpbmcgc2VhcmNoIHJlc3Vs
dHMgYmV0d2VlbiB0d28gbWFjaGluZXMuQW5kIHdhbnQgdG8ga25vdyB3aGV0aGVyIFJNSSBjYW4g
Z2l2ZSBhIGJldHRlciBwZXJmb3JtYW5jZS4NCg0KVGhhbmtzDQotUWkNCi0tLS0tIE9yaWdpbmFs
IE1lc3NhZ2UgLS0tLS0gDQpGcm9tOiAia3VtYXJsaW1idSIgPGt1bWFybGltYnVAZ21haWwuY29t
Pg0KVG86IDxqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmc+DQpTZW50OiBNb25kYXksIEp1bHkg
MTYsIDIwMDcgMTA6MTAgQU0NClN1YmplY3Q6IFNlcnZpbmcgcmVtb3RlIGx1Y2VuZSBjbGllbnQg
LSBSTUkgdnMgSFRUUA0KDQoNCj4gDQo+IEhpIEV2ZXJ5b25lLA0KPiANCj4gV2UgYXJlIHVzaW5n
IGx1Y2VuZSxudXRjaCBhbmQgc3ByaW5nIGZyYW1ld29yayB0byBjcmVhdGUgYSBzcGVjaWFsaXpl
ZA0KPiBzZWFyY2ggZW5naW5lLiBEdWUgdG8gZ3Jvd2luZyB0cmFmZmljIHdlIGFyZSB0cnlpbmcg
dG8gc2NhbGUuIEJ5IGRvaW5nIHNvbWUNCj4gdGVzdHMgd2UgZm91bmQgb3V0IHRoYXQgdGhlIGJv
dHRsZSBuZWNrIHdhcyBsdWNlbmUgc2VhcmNoLiBXZSB1c2VkIHNvbWUNCj4gaGVhdnkgdHJhZmZp
YyBzaW11bGF0aW9uIGFuZCBsb2dnZWQgdGhlIHRpbWUgdGFrZW4gYnkgZWFjaCBwb3J0aW9uIG9m
IHRoZQ0KPiBzZXJ2ZXIgcmVzcG9uc2UgYW5kIGZvdW5kIG91dCB0aGF0IHRoZSBidWxrIG9mIHRo
ZSB0aW1lIHdhcyBzcGVudCBpbg0KPiBzZWFyY2hpbmcgZnJvbSBsdWNlbmUgaW5kZXguDQo+IA0K
PiBJbiBvcmRlciB0byBhY2NvbW9kYXRlIGhpZ2hlciB0cmFmZmljIHdlIGFyZSBwbGFubmluZyBv
biBzcGxpdHRpbmcgb3VyDQo+IGFwcGxpY2F0aW9uIGluIDIgcG9ydGlvbnM6DQo+IDEuIFdlYiBh
cHBsaWNhdGlvbiAob24gMSBtYWNoaW5lKQ0KPiAyLiBTZWFyY2ggYXBwbGljYXRpb24gKG9uZSBt
b3JlIHRoYW4gMSBtYWNoaW5lKQ0KPiANCj4gRWFjaCBvbmUgb2YgdGhlIGFwcGxpY2F0aW9uIHdp
bGwgcmVzaWRlIG9uIGEgKHBvc3NpYmx5KSBzZXBhcmF0ZSBtYWNoaW5lcy4NCj4gV2UgYXJlIGxv
b2tpbmcgZm9yd2FyZCB0byBzY2FsaW5nIGJ5IGFkZGluZyBtb3JlIHRoYW4gMSBtYWNoaW5lIGRl
ZGljYXRlZCB0bw0KPiBzZWFyY2hpbmcgYXMgbHVjZW5lIHNlYXJjaCBzZWVtcyB0byBiZSB0aGUg
Ym90dGxlbmVjay4gDQo+IA0KPiBXZWIgYXBwbGljYXRpb24gd2lsbCBwcm92aWRlIHRoZSBmcm9u
dC1lbmQgdG8gdGhlIHVzZXIuIEFsbCBzdGF0aWMgcGFnZXMsDQo+IGltYWdlcyBhbmQgdGhlIHN0
eWxlIGluZm9ybWF0aW9uIHdpbGwgcmVzaWRlIG9uIHRoaXMgbWFjaGluZS4gSXQgd2lsbCBhbHNv
DQo+IHNlcnZlIGR5bmFtaWMgcGFnZXMgYnV0IGFsbCB0aGUgc2VhcmNoaW5nIHdpbGwgdGFrZSBw
bGFjZSBvbiB0aGUgc2VhcmNoDQo+IGFwcGxpY2F0aW9uLiBXZWIgYXBwbGljYXRpb24gd2lsbCBz
ZW5kIHNlYXJjaCBwYXJhbWV0ZXJzIHRvIHRoZSBzZWFyY2gNCj4gYXBwbGljYXRpb24gYW5kIGFm
dGVyIHNlYXJjaGluZywgaXQgd2lsbCBzZW5kIGJhY2sgdGhlIHJlc3VsdHMgdG8gdGhlIHdlYg0K
PiBhcHBsaWNhdGlvbiB3aGljaCB3aWxsIGZvcm1hdCBpdCBhbmQgZGlzcGxheSBpdCB0byB0aGUg
dXNlci4NCj4gDQo+IFdoYXQgd2UgYXJlIHVuYWJsZSB0byBkZWNpZGUgaXMgd2hldGhlciB0byB1
c2UgUk1JICgNCj4gaHR0cDovL3d3dy5zb2Z0LWFtaXMuY29tL2luZGV4Lmh0bWw/cmV0dXJuPWh0
dHA6Ly93d3cuc29mdC1hbWlzLmNvbS9jbHVzdGVyNHNwcmluZy9pbmRleC5odG1sDQo+IGNsdXN0
ZXI0c3ByaW5nICApb3Igc2ltcGxlIEhUVFAgUE9TVC9HRVQgcmVxdWVzdCB3aXRoIHJlc3BvbnNl
IGluIFhNTA0KPiBmb3JtYXQuIFdlIGRpZCBzb21lIHJlc2VhcmNoIGFuZCBmb3VuZCBvdXQgdGhh
dCBSTUkgKHdpdGggY2x1c3RlcmluZw0KPiBzdXBwb3J0KSBtaWdodCBiZSBtb3JlIHN1aXRhYmxl
IGZvciBvdXIgbmVlZHMuIFVuZm9ydHVuYXRlbHkgb3VyIHRlYW0gaXMgbm90DQo+IGZhbWlsaWFy
IHdpdGggUk1JIGFuZCBzbyB3ZSBkb24ndCBrbm93IGlmIHRoZXJlIHdpbGwgYmUgYW55IGlzc3Vl
cyB3aXRoIGl0DQo+IGR1cmluZyBpbXBsZW1lbnRhdGlvbi4gDQo+IEFkdmFudGFnZSBvZiB1c2lu
ZyBzaW1wbGUgR0VUL1BPU1QgaXMgd2UgaGF2ZSBtb3JlIGNvbnRyb2wgd2hpY2ggc2VhcmNoZXIN
Cj4gYXBwIHRvIHVzZSBhbmQgd2hlbi4gQW4gaW1wb3J0YW50IGNyaXRlcmlhIGZvciB1cyBpcyB0
byBkaXNhYmxlIHNlYXJjaGluZw0KPiBmcm9tIHRoZSBzZWFyY2hlciBhcHAgd2hvJ3MgaW5kZXgg
aXMgYmVpbmcgdXBkYXRlZC4gVGhpcyBpcyB2ZXJ5IGltcG9ydGFudA0KPiBmb3IgdXMuIElzIHRo
ZXJlIGFueXdheSBpbiBSTUkgdG8gaW5mb3JtIHRoZSB3ZWIgKGNsaWVudCkgYXBwbGljYXRpb24g
dGhhdCBhDQo+IHBhcnRpY3VsYXIgc2VydmVyIGlzIHVuYXZhaWxhYmxlIChkdWUgdG8gaW5kZXgg
YmVpbmcgdXBkYXRlZCkuDQo+IA0KPiBXZSB3b3VsZCBhbHNvIGxpa2UgdG8ga25vdyBpZiBhbnli
b2R5IGhhcyBpbXBsZW1lbnRlZCBsdWNlbmUgc2VhcmNoaW5nIGluIGENCj4gc2ltaWxhciBmYXNo
aW9uLiBUaGFua3MgZm9yIHlvdXIgaGVscC4NCj4gDQo+IEt1bWFyIExpbWJ1DQo+IA0KPiAtLSAN
Cj4gVmlldyB0aGlzIG1lc3NhZ2UgaW4gY29udGV4dDogaHR0cDovL3d3dy5uYWJibGUuY29tL1Nl
cnZpbmctcmVtb3RlLWx1Y2VuZS1jbGllbnQtLS1STUktdnMtSFRUUC10ZjQwODQxNjcuaHRtbCNh
MTE2MDgyMDkNCj4gU2VudCBmcm9tIHRoZSBMdWNlbmUgLSBKYXZhIFVzZXJzIG1haWxpbmcgbGlz
dCBhcmNoaXZlIGF0IE5hYmJsZS5jb20uDQo+



From java-user-return-29187-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 16 03:00:09 2007
Return-Path: <java-user-return-29187-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41969 invoked from network); 16 Jul 2007 03:00:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jul 2007 03:00:08 -0000
Received: (qmail 25778 invoked by uid 500); 16 Jul 2007 03:00:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25737 invoked by uid 500); 16 Jul 2007 03:00:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25720 invoked by uid 99); 16 Jul 2007 03:00:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Jul 2007 20:00:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.119] (HELO spunkymail-a11.g.dreamhost.com) (208.97.132.119)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Jul 2007 20:00:01 -0700
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a11.g.dreamhost.com (Postfix) with ESMTP id 192E0B83A0
	for <java-user@lucene.apache.org>; Sun, 15 Jul 2007 19:59:32 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <11608209.post@talk.nabble.com>
References: <11608209.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <D11E6185-AA19-422D-BAEB-C40EC0A3BE7D@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Serving remote lucene client - RMI vs HTTP
Date: Sun, 15 Jul 2007 22:59:32 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Kumar,

I am curious about where the bulk of time was spent in Lucene.  I am  
not doubting your numbers or analysis, just want to know if there was  
anything that could be improved in Lucene and make sure you are  
solidly in need of going to multiple machines as it adds an extra  
level of complexity.  Can you provide info about number of documents,  
# of updates, # of queries etc. ?  What kind of analysis, etc. are  
you doing?  That being said, putting the web app on one machine and  
the search application on the other makes sense much in the same way  
it makes sense in most cases to do this for a database.

As for POST/GET vs. RMI, have a look at Solr, esp. its replication  
capabilities for load balancing search servers.  I think it answers  
the question in favor of the POST/GET approach.  In fact, you may be  
able to drop in Solr to your situation w/o too much work.

Cheers,
Grant


On Jul 15, 2007, at 10:10 PM, kumarlimbu wrote:

>
> Hi Everyone,
>
> We are using lucene,nutch and spring framework to create a specialized
> search engine. Due to growing traffic we are trying to scale. By  
> doing some
> tests we found out that the bottle neck was lucene search. We used  
> some
> heavy traffic simulation and logged the time taken by each portion  
> of the
> server response and found out that the bulk of the time was spent in
> searching from lucene index.
>
> In order to accomodate higher traffic we are planning on splitting our
> application in 2 portions:
> 1. Web application (on 1 machine)
> 2. Search application (one more than 1 machine)
>
> Each one of the application will reside on a (possibly) separate  
> machines.
> We are looking forward to scaling by adding more than 1 machine  
> dedicated to
> searching as lucene search seems to be the bottleneck.
>
> Web application will provide the front-end to the user. All static  
> pages,
> images and the style information will reside on this machine. It  
> will also
> serve dynamic pages but all the searching will take place on the  
> search
> application. Web application will send search parameters to the search
> application and after searching, it will send back the results to  
> the web
> application which will format it and display it to the user.
>
> What we are unable to decide is whether to use RMI (
> http://www.soft-amis.com/index.html?return=http://www.soft-amis.com/ 
> cluster4spring/index.html
> cluster4spring  )or simple HTTP POST/GET request with response in XML
> format. We did some research and found out that RMI (with clustering
> support) might be more suitable for our needs. Unfortunately our  
> team is not
> familiar with RMI and so we don't know if there will be any issues  
> with it
> during implementation.
> Advantage of using simple GET/POST is we have more control which  
> searcher
> app to use and when. An important criteria for us is to disable  
> searching
> from the searcher app who's index is being updated. This is very  
> important
> for us. Is there anyway in RMI to inform the web (client)  
> application that a
> particular server is unavailable (due to index being updated).
>
> We would also like to know if anybody has implemented lucene  
> searching in a
> similar fashion. Thanks for your help.
>
> Kumar Limbu
>
> -- 
> View this message in context: http://www.nabble.com/Serving-remote- 
> lucene-client---RMI-vs-HTTP-tf4084167.html#a11608209
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

Read the Lucene Java FAQ at http://wiki.apache.org/lucene-java/LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29188-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 16 04:22:23 2007
Return-Path: <java-user-return-29188-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56476 invoked from network); 16 Jul 2007 04:22:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jul 2007 04:22:21 -0000
Received: (qmail 1605 invoked by uid 500); 16 Jul 2007 04:22:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1571 invoked by uid 500); 16 Jul 2007 04:22:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1559 invoked by uid 99); 16 Jul 2007 04:22:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Jul 2007 21:22:17 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Jul 2007 21:22:13 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IAI5o-00038U-QM
	for java-user@lucene.apache.org; Sun, 15 Jul 2007 21:21:52 -0700
Message-ID: <11609007.post@talk.nabble.com>
Date: Sun, 15 Jul 2007 21:21:52 -0700 (PDT)
From: kumarlimbu <kumarlimbu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Serving remote lucene client - RMI vs HTTP
In-Reply-To: <D11E6185-AA19-422D-BAEB-C40EC0A3BE7D@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: kumarlimbu@gmail.com
References: <11608209.post@talk.nabble.com> <D11E6185-AA19-422D-BAEB-C40EC0A3BE7D@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi EVeryone,

Thank you all for your replies.

And reply to your questions Grant:
We have more than 3 Million document in our index.
We get more than 150,000 searches (queries) per day. We expect this no to go
up. This count only includes actual user search and doesn't include robot
searches and other internal searches (for sending emails to user etc).
And our final queries sent to lucene are quite complicated. This is because
we need to confirm to a lot of criteria (some are set by users and some are
internal logics). I don't think we can simplify our queries.

And importantly we are looking to scale to a larger no. of traffic. Our
current performance in terms of speed is ok. 

We are not sure about implementing using Solr because we crawl only specific
type of sites and our crawling mechanism has proven to be quite stable. We
are only looking to scale to larger no. of users and doing a new
implementation using Solr might be an overkill as time is a huge factor.

Best Regards,
Kumar


Grant Ingersoll-6 wrote:
> 
> Hi Kumar,
> 
> I am curious about where the bulk of time was spent in Lucene.  I am  
> not doubting your numbers or analysis, just want to know if there was  
> anything that could be improved in Lucene and make sure you are  
> solidly in need of going to multiple machines as it adds an extra  
> level of complexity.  Can you provide info about number of documents,  
> # of updates, # of queries etc. ?  What kind of analysis, etc. are  
> you doing?  That being said, putting the web app on one machine and  
> the search application on the other makes sense much in the same way  
> it makes sense in most cases to do this for a database.
> 
> As for POST/GET vs. RMI, have a look at Solr, esp. its replication  
> capabilities for load balancing search servers.  I think it answers  
> the question in favor of the POST/GET approach.  In fact, you may be  
> able to drop in Solr to your situation w/o too much work.
> 
> Cheers,
> Grant
> 
> 
> On Jul 15, 2007, at 10:10 PM, kumarlimbu wrote:
> 
>>
>> Hi Everyone,
>>
>> We are using lucene,nutch and spring framework to create a specialized
>> search engine. Due to growing traffic we are trying to scale. By  
>> doing some
>> tests we found out that the bottle neck was lucene search. We used  
>> some
>> heavy traffic simulation and logged the time taken by each portion  
>> of the
>> server response and found out that the bulk of the time was spent in
>> searching from lucene index.
>>
>> In order to accomodate higher traffic we are planning on splitting our
>> application in 2 portions:
>> 1. Web application (on 1 machine)
>> 2. Search application (one more than 1 machine)
>>
>> Each one of the application will reside on a (possibly) separate  
>> machines.
>> We are looking forward to scaling by adding more than 1 machine  
>> dedicated to
>> searching as lucene search seems to be the bottleneck.
>>
>> Web application will provide the front-end to the user. All static  
>> pages,
>> images and the style information will reside on this machine. It  
>> will also
>> serve dynamic pages but all the searching will take place on the  
>> search
>> application. Web application will send search parameters to the search
>> application and after searching, it will send back the results to  
>> the web
>> application which will format it and display it to the user.
>>
>> What we are unable to decide is whether to use RMI (
>> http://www.soft-amis.com/index.html?return=http://www.soft-amis.com/ 
>> cluster4spring/index.html
>> cluster4spring  )or simple HTTP POST/GET request with response in XML
>> format. We did some research and found out that RMI (with clustering
>> support) might be more suitable for our needs. Unfortunately our  
>> team is not
>> familiar with RMI and so we don't know if there will be any issues  
>> with it
>> during implementation.
>> Advantage of using simple GET/POST is we have more control which  
>> searcher
>> app to use and when. An important criteria for us is to disable  
>> searching
>> from the searcher app who's index is being updated. This is very  
>> important
>> for us. Is there anyway in RMI to inform the web (client)  
>> application that a
>> particular server is unavailable (due to index being updated).
>>
>> We would also like to know if anybody has implemented lucene  
>> searching in a
>> similar fashion. Thanks for your help.
>>
>> Kumar Limbu
>>
>> -- 
>> View this message in context: http://www.nabble.com/Serving-remote- 
>> lucene-client---RMI-vs-HTTP-tf4084167.html#a11608209
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> --------------------------
> Grant Ingersoll
> Center for Natural Language Processing
> http://www.cnlp.org/tech/lucene.asp
> 
> Read the Lucene Java FAQ at http://wiki.apache.org/lucene-java/LuceneFAQ
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Serving-remote-lucene-client---RMI-vs-HTTP-tf4084167.html#a11609007
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29189-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 16 04:40:03 2007
Return-Path: <java-user-return-29189-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62132 invoked from network); 16 Jul 2007 04:40:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jul 2007 04:40:02 -0000
Received: (qmail 22631 invoked by uid 500); 16 Jul 2007 04:39:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21612 invoked by uid 500); 16 Jul 2007 04:39:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21589 invoked by uid 99); 16 Jul 2007 04:39:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Jul 2007 21:39:57 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mnrz57@gmail.com designates 209.85.132.242 as permitted sender)
Received: from [209.85.132.242] (HELO an-out-0708.google.com) (209.85.132.242)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Jul 2007 21:39:54 -0700
Received: by an-out-0708.google.com with SMTP id c5so284285anc
        for <java-user@lucene.apache.org>; Sun, 15 Jul 2007 21:39:33 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=BHKX5zi6cw94F/S8QYsd0dl24G0DuYwpC1Lum2qHOethDTiFkZiHQW6Ng9n9BuPy/P4SSIOqnlrbeIFxNZogCCv6qvVNzt445Z24p369ogRAXwjsQDVKaqOkUeuhUUrDI/vK3AJ4z3SUjfMQin/p1MWyg/2a1cnaa3RIKv9kMW8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Rvkr7exZvEiIz66fwkSawBWezgz3+OcdmGz7rz3omWlz8vOjsHv3mHAnwD7LWhbmTGUa2fNYp41iIlHFPpNCZmGWc1ASU5Z1GnGQaCNyHwuh162ICpn49G6uWTQIsAbttbzEAJEDHV+w9qEnpsymrcaRl6U2UnxeZOKx864k9Rw=
Received: by 10.100.128.8 with SMTP id a8mr494228and.1184560773448;
        Sun, 15 Jul 2007 21:39:33 -0700 (PDT)
Received: by 10.100.9.13 with HTTP; Sun, 15 Jul 2007 21:39:33 -0700 (PDT)
Message-ID: <34b8543c0707152139p457e0a0enafc5e7bf3f6616c4@mail.gmail.com>
Date: Mon, 16 Jul 2007 08:09:33 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: search through all fields
In-Reply-To: <08B583CE-6C47-454C-BC16-BC6001FD4272@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_51076_29959939.1184560773418"
References: <34b8543c0707140150s2a6f0c99pedcbd9f82356f43@mail.gmail.com>
	 <034ED9E0-41CA-495F-AE18-52A63A3078EB@garambrogne.net>
	 <34b8543c0707140408w2a929c8ch7ae8d0ead0c20c93@mail.gmail.com>
	 <34b8543c0707140459v43974e3wbbeec170fe770a0d@mail.gmail.com>
	 <08B583CE-6C47-454C-BC16-BC6001FD4272@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_51076_29959939.1184560773418
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

On 7/14/07, Grant Ingersoll <grant.ingersoll@gmail.com> wrote:
>
> I think he means index all your different fields into a single field
> named "all".  Not sure what makes it special, it is just like any
> other field.
>


but that really impossible ! because I have near millions records to be
indexed so this job will decrease the time of indexing and increase the
index size

-- 
Regards,
Mohammad
--------------------------
see my blog: http://brainable.blogspot.com/
another in Persian: http://fekre-motefavet.blogspot.com/

------=_Part_51076_29959939.1184560773418--

From java-user-return-29190-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 16 05:15:43 2007
Return-Path: <java-user-return-29190-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72546 invoked from network); 16 Jul 2007 05:15:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jul 2007 05:15:41 -0000
Received: (qmail 52926 invoked by uid 500); 16 Jul 2007 05:15:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52713 invoked by uid 500); 16 Jul 2007 05:15:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52702 invoked by uid 99); 16 Jul 2007 05:15:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Jul 2007 22:15:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.150] (HELO rescomp.berkeley.edu) (169.229.70.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Jul 2007 22:15:33 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 2F88A5B763; Sun, 15 Jul 2007 22:15:13 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 18ACF7F403
	for <java-user@lucene.apache.org>; Sun, 15 Jul 2007 22:15:13 -0700 (PDT)
Date: Sun, 15 Jul 2007 22:15:13 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Serving remote lucene client - RMI vs HTTP
In-Reply-To: <11609007.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.58.0707152207480.7207@hal.rescomp.berkeley.edu>
References: <11608209.post@talk.nabble.com> <D11E6185-AA19-422D-BAEB-C40EC0A3BE7D@apache.org>
 <11609007.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: And our final queries sent to lucene are quite complicated. This is because
: we need to confirm to a lot of criteria (some are set by users and some are
: internal logics). I don't think we can simplify our queries.

in my experience, your queries can always be made simpler by making your
indexing more complex -- that's not neccessarily a good tradeoff to make
in every situation, but it's usually possible to "denormalize" your index
to help decrease complexity.

: We are not sure about implementing using Solr because we crawl only specific
: type of sites and our crawling mechanism has proven to be quite stable. We

whether or not you want to use Solr is really independent of what kidn of
crawler you currently have -- you'd still use hte same crawler, but
dpeneding on how you wanted to leverage Solr either you'd change your
crawler to POST your new documents to Solr instead of writing the the
index directly, or you could keep writing to the index directly and just
use Solr to serve the searches (assuming you configure the Solr schema.xml
to match up with the fields/analyzers your crawler uses when writing to
the index so it can query on the right fields)

if you have no interest in using Solr to manage your index, even if you
have no interest in using Solr to search your index over HTTP, you might
want to take a look at the distribution scripts that come with Solr to
provide replication.  At the core they are incredibly simple, just
taking advantage of rsync, hard links, and properties of the lucene
fileformat to help minimize the amount of data that needs to go over the
wire when you want to index on one box and then replicate that index to 10
other boxes to distribute the search load.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29191-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 16 07:01:56 2007
Return-Path: <java-user-return-29191-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98638 invoked from network); 16 Jul 2007 07:01:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jul 2007 07:01:54 -0000
Received: (qmail 52795 invoked by uid 500); 16 Jul 2007 07:01:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52218 invoked by uid 500); 16 Jul 2007 07:01:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52207 invoked by uid 99); 16 Jul 2007 07:01:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jul 2007 00:01:37 -0700
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mnrz57@gmail.com designates 209.85.132.250 as permitted sender)
Received: from [209.85.132.250] (HELO an-out-0708.google.com) (209.85.132.250)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jul 2007 00:01:34 -0700
Received: by an-out-0708.google.com with SMTP id c5so289537anc
        for <java-user@lucene.apache.org>; Mon, 16 Jul 2007 00:01:13 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=CH5vETSesgVWXSCE3zAcNcdEfxJGTDgsFS+Go+HF3DMz52gAd9AwGZ8wV3/xfo3zVeeaKMRfSUZPmjabmrI4zax8Xi2GMInhkaIN0IG/6zVNAngaLcPWlgI6HBaSXm3Rqv3puph5/OlT4MRUv7jL/04/BiyJnZpg8uz5j8wgvOg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=eFqTZ+z+Fi3Ab4y8Rcz8F/9Hk7M1EKC1fZtGIzGU0oLOrJf2QmBZsow1416sg3T1JEuYeVv0fpMSUVYdB5dPNvqdl3QySVqtXPkpTx8QbtCIBllMA6mw7JxYo7fKnxUsWkJlALywtKq+Xdzl5HdGGQ0LDVDXPQJVKYmiSAV22HI=
Received: by 10.100.138.2 with SMTP id l2mr2130624and.1184569273537;
        Mon, 16 Jul 2007 00:01:13 -0700 (PDT)
Received: by 10.100.9.13 with HTTP; Mon, 16 Jul 2007 00:01:13 -0700 (PDT)
Message-ID: <34b8543c0707160001q235f7589uc188f9e99b74672e@mail.gmail.com>
Date: Mon, 16 Jul 2007 10:31:13 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: two questions about NumberTools
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_51788_8093980.1184569273516"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_51788_8093980.1184569273516
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello
I have problem in range queries, for example, I have queries like "field:[1
TO 25]" or "field:[1.1 TO 11.25]"
currently these queries not work. field:[20 TO 25] works fine but when the
both limits of the range have different number of digits the query won't
work. so the solution is NumberTools.

1 - the NumberTools utility has two methods longToString() and
stringToLong(). how about the double or float  numbers?? I think it should
be extends to support more data types

2 - suppose we are indexing a bunch of information and a field is in long
that we need to apply range queries on that later.
now I have a query like "fieldone:(just for test) AND field_long:[1 TO 25]",
the question is whether this query returns correct result? because
field_long already encoded with longToString() method and in the index files
you can't find any real value say, 1 or 25 or 10 ...
do I need to use stringToLong() method while I am building query?


any comment would be of great help

-- 
Regards,
Mohammad
--------------------------
see my blog: http://brainable.blogspot.com/
another in Persian: http://fekre-motefavet.blogspot.com/

------=_Part_51788_8093980.1184569273516--

From java-user-return-29192-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 16 08:14:31 2007
Return-Path: <java-user-return-29192-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23280 invoked from network); 16 Jul 2007 08:14:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jul 2007 08:14:29 -0000
Received: (qmail 77202 invoked by uid 500); 16 Jul 2007 08:14:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77161 invoked by uid 500); 16 Jul 2007 08:14:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77149 invoked by uid 99); 16 Jul 2007 08:14:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jul 2007 01:14:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [213.133.33.40] (HELO smtp.is.nl) (213.133.33.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jul 2007 01:14:19 -0700
Received: from [213.133.51.241] (HELO hai01.hippo.local)
  by smtp.is.nl (CommuniGate Pro SMTP 5.0.10)
  with ESMTP id 19597242 for java-user@lucene.apache.org; Mon, 16 Jul 2007 10:13:56 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6619.12
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Token offset values for custom Tokenizer
Date: Mon, 16 Jul 2007 10:13:55 +0200
Message-ID: <A955EA1F8FE31749AEC8C998082F6C7CD6EA39@hai01.hippo.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Token offset values for custom Tokenizer
Thread-Index: AcfFbPZ3tRAeTsQrQeyTQI0WH5hoBACEZ3/w
From: "Ard Schrijvers" <a.schrijvers@hippo.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

> Hi,
> I am storing custom values in the Tokens provided by a Tokenizer but=20
> when retrieving them from the index the values don't match.=20

What do you mean by retrieving? Do you mean retrieving terms, or do you =
mean doing a search with words you know that should be in, but you do =
not find a match?

In the latter, you must make sure that you are using the same analyzer =
for the search as you used for indexing.=20

> I've looked=20
> in the LIA book but it's not current since it mentioned term vectors=20
> aren't stored. I'm using Lucene Nightly 146 but the same thing has=20
> happened with older versions. Looking at the internals,=20
> DocumentWriter=20
> seems to keep track of the end offset that was placed into=20
> the index and=20
> modifies the token values (with +1) but I'm not sure whether=20
> I should be=20
> concerned with it.
> No existing analyzers are used when adding the document so all the=20
> offsets are generated manually.
> Any suggestions of how the token offsets should be stored?
>=20

Look at other clases that implement TokenStream. Also take a look at =
setPositionIncrement when you are putting in your own terms

Regards Ard

> Is this valid?
> Token, start, end
> aaa, 0, 3
> bbb, 4, 7
> ccc, 8, 11
>=20
> Thanks,
> Shahan
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29193-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 16 08:27:02 2007
Return-Path: <java-user-return-29193-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25873 invoked from network); 16 Jul 2007 08:27:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jul 2007 08:27:01 -0000
Received: (qmail 92388 invoked by uid 500); 16 Jul 2007 08:26:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92039 invoked by uid 500); 16 Jul 2007 08:26:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92027 invoked by uid 99); 16 Jul 2007 08:26:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jul 2007 01:26:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [213.133.33.40] (HELO smtp.is.nl) (213.133.33.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jul 2007 01:26:53 -0700
Received: from [213.133.51.241] (HELO hai01.hippo.local)
  by smtp.is.nl (CommuniGate Pro SMTP 5.0.10)
  with ESMTP id 19598542 for java-user@lucene.apache.org; Mon, 16 Jul 2007 10:26:31 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6619.12
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Does Index have a Tokenizer Built into it
Date: Mon, 16 Jul 2007 10:26:31 +0200
Message-ID: <A955EA1F8FE31749AEC8C998082F6C7CD6EA3A@hai01.hippo.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Does Index have a Tokenizer Built into it
Thread-Index: AcfFpEJus+vBV0PwQs2aNxIOUt4wigB3eYQw
From: "Ard Schrijvers" <a.schrijvers@hippo.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

> Ard,
>=20
> I do have access to the URL's of the documents, but because I=20
> will be making
> short snippets for many pages (suppose it had about 20 hits=20
> per page and I
> need to make Snippets for each of them) I was worried it would be
> inefficient to open each "hit" tokenize it and then make the=20
> Snippet, of

Yes, getting all the documents over http just to get the snippet, for =
example the first 2 lines, is really bad for your performance in search =
overviews.

Logically, what you want to show, you need to store in your index. For =
example, if for search hits you need to show the title and subtitle, =
just store these two in the index. If you want to have a google like =
highlighter of text snippets where the term occured, you need to store =
the entire text IIRC (see HighlighterTest in lucene).=20

How many docs are you talking about that you cannot store the entire =
content?=20

You could also just index the content and not store it, and in another =
lucene field, store the first 2 or 3 lines of  the document, which serve =
as text snippet. Making correct extracts of text snippets is very hard =
(see lingpipe for example)

Regards Ard

> course the price of this may be worth the price of the increased Index
> size.  I have been looking into storing "Field Vectors with=20
> positions" in
> the index.  It seems that by doing this I will have access to=20
> everything
> that the Tokenizer is giving me correct?   Will I need to=20
> store "term text"
> in order to be able to access the actual term instead of=20
> stemmed words?
>=20
> Thanks for all your help,
>=20
> --JP
>=20
> On 7/13/07, Ard Schrijvers <a.schrijvers@hippo.nl> wrote:
> >
> > Hello,
> >
> > > I'm wondering if after
> > > opening the
> > > index I can retrieve the Tokens (not the terms) of a
> > > document, something
> > > akin to IndexReader.Document(n).getTokenizer().
> >
> > It is obviously not possible to get the original tokens of=20
> the document
> > back when you haven't stored the document, because:
> >
> > 1) the analyzer might have removed stop words in the first place
> > 2) the terms in lucene index are perhaps stemmed words /=20
> synonyms / etc
> > etc
> > 3) how would you expect things like spaces, commas, dots etc to be
> > restored?
> >
> > And, I think what you want does not comply with an inverted=20
> index. When
> > you do not store the document, you always loose information=20
> about the
> > document during indexing/analyzing
> >
> > How many documents are you talking about? They must be=20
> either somewhere on
> > FS or accessible over http...when you need the document,=20
> why not just
> > provide a link to the original location?
> >
> > Regards Ard
> >
> > >
> > > In summary:
> > >
> > > My current ( too wasteful implementation is this)
> > >
> > > StandardTokenizer(BufferedReader (
> > > IndexReader.Document(n).getField("text"
> > > )  )
> > >
> > > I'm wondering if Lucene has a more efficient manner to
> > > retrieve the tokens
> > > of a document from an index.  Because it seems like it has
> > > information about
> > > every "term" already, Since you can get retrieve a
> > > TermPositions object.
> > >
> > > Thanks,
> > >
> > >
> > > --JP
> > >
> >
> >=20
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29194-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 16 08:57:33 2007
Return-Path: <java-user-return-29194-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37097 invoked from network); 16 Jul 2007 08:57:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jul 2007 08:57:33 -0000
Received: (qmail 53914 invoked by uid 500); 16 Jul 2007 08:57:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53881 invoked by uid 500); 16 Jul 2007 08:57:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53870 invoked by uid 99); 16 Jul 2007 08:57:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jul 2007 01:57:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [213.133.33.40] (HELO smtp.is.nl) (213.133.33.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jul 2007 01:57:24 -0700
Received: from [213.133.51.241] (HELO hai01.hippo.local)
  by smtp.is.nl (CommuniGate Pro SMTP 5.0.10)
  with ESMTP id 19600699 for java-user@lucene.apache.org; Mon, 16 Jul 2007 10:57:02 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6619.12
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Serving remote lucene client - RMI vs HTTP
Date: Mon, 16 Jul 2007 10:57:02 +0200
Message-ID: <A955EA1F8FE31749AEC8C998082F6C7C01AC1153@hai01.hippo.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Serving remote lucene client - RMI vs HTTP
Thread-Index: AcfHYOnkiE+ueNsaSBetKW0poGl0PQAJVPMQ
From: "Ard Schrijvers" <a.schrijvers@hippo.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

> Hi EVeryone,
>=20
> Thank you all for your replies.
>=20
> And reply to your questions Grant:
> We have more than 3 Million document in our index.
> We get more than 150,000 searches (queries) per day. We=20
> expect this no to go
> up.=20

Just curious, but suppose those 150.000 searches are done during 8 hours =
a day, that means around 6 searches a second...that is not too much is =
it?=20

Perhaps a too trivial question, but do you only re-open the index reader =
when there is actually something changed in the index (or are you =
crawling all day? perhaps you should only crawl during the night)? =
Reopening the index over and over again while not needed is inefficient. =
Also, there are some caching mechanisms around

Furthermore, if you use sorting in your query, you might gain much speed =
by indexing these fields differently (like sorting on some large field =
is very expensive)

Then of course, do you use range searches?=20

Also, did you check setting maxmemory of your jvm higher?

One more suggestion: try to open your index with "luke" and see wether =
"luke" is faster in doing the searches. If so, you certainly can find =
some simple ways to increase the performance,

Ard=20

> This count only includes actual user search and doesn't=20
> include robot
> searches and other internal searches (for sending emails to user etc).
> And our final queries sent to lucene are quite complicated.=20
> This is because
> we need to confirm to a lot of criteria (some are set by=20
> users and some are
> internal logics). I don't think we can simplify our queries.
>=20
> And importantly we are looking to scale to a larger no. of=20
> traffic. Our
> current performance in terms of speed is ok.=20
>=20
> We are not sure about implementing using Solr because we=20
> crawl only specific
> type of sites and our crawling mechanism has proven to be=20
> quite stable. We
> are only looking to scale to larger no. of users and doing a new
> implementation using Solr might be an overkill as time is a=20
> huge factor.
>=20
> Best Regards,
> Kumar
>=20
>=20
> Grant Ingersoll-6 wrote:
> >=20
> > Hi Kumar,
> >=20
> > I am curious about where the bulk of time was spent in=20
> Lucene.  I am =20
> > not doubting your numbers or analysis, just want to know if=20
> there was =20
> > anything that could be improved in Lucene and make sure you are =20
> > solidly in need of going to multiple machines as it adds an extra =20
> > level of complexity.  Can you provide info about number of=20
> documents, =20
> > # of updates, # of queries etc. ?  What kind of analysis, etc. are =20
> > you doing?  That being said, putting the web app on one=20
> machine and =20
> > the search application on the other makes sense much in the=20
> same way =20
> > it makes sense in most cases to do this for a database.
> >=20
> > As for POST/GET vs. RMI, have a look at Solr, esp. its replication =20
> > capabilities for load balancing search servers.  I think it=20
> answers =20
> > the question in favor of the POST/GET approach.  In fact,=20
> you may be =20
> > able to drop in Solr to your situation w/o too much work.
> >=20
> > Cheers,
> > Grant
> >=20
> >=20
> > On Jul 15, 2007, at 10:10 PM, kumarlimbu wrote:
> >=20
> >>
> >> Hi Everyone,
> >>
> >> We are using lucene,nutch and spring framework to create a=20
> specialized
> >> search engine. Due to growing traffic we are trying to scale. By =20
> >> doing some
> >> tests we found out that the bottle neck was lucene search.=20
> We used =20
> >> some
> >> heavy traffic simulation and logged the time taken by each=20
> portion =20
> >> of the
> >> server response and found out that the bulk of the time=20
> was spent in
> >> searching from lucene index.
> >>
> >> In order to accomodate higher traffic we are planning on=20
> splitting our
> >> application in 2 portions:
> >> 1. Web application (on 1 machine)
> >> 2. Search application (one more than 1 machine)
> >>
> >> Each one of the application will reside on a (possibly) separate =20
> >> machines.
> >> We are looking forward to scaling by adding more than 1 machine =20
> >> dedicated to
> >> searching as lucene search seems to be the bottleneck.
> >>
> >> Web application will provide the front-end to the user.=20
> All static =20
> >> pages,
> >> images and the style information will reside on this machine. It =20
> >> will also
> >> serve dynamic pages but all the searching will take place on the =20
> >> search
> >> application. Web application will send search parameters=20
> to the search
> >> application and after searching, it will send back the results to =20
> >> the web
> >> application which will format it and display it to the user.
> >>
> >> What we are unable to decide is whether to use RMI (
> >>=20
http://www.soft-amis.com/index.html?return=3Dhttp://www.soft-amis.com/=20
>> cluster4spring/index.html
>> cluster4spring  )or simple HTTP POST/GET request with response in XML
>> format. We did some research and found out that RMI (with clustering
>> support) might be more suitable for our needs. Unfortunately our =20
>> team is not
>> familiar with RMI and so we don't know if there will be any issues =20
>> with it
>> during implementation.
>> Advantage of using simple GET/POST is we have more control which =20
>> searcher
>> app to use and when. An important criteria for us is to disable =20
>> searching
>> from the searcher app who's index is being updated. This is very =20
>> important
>> for us. Is there anyway in RMI to inform the web (client) =20
>> application that a
>> particular server is unavailable (due to index being updated).
>>
>> We would also like to know if anybody has implemented lucene =20
>> searching in a
>> similar fashion. Thanks for your help.
>>
>> Kumar Limbu
>>
>> --=20
>> View this message in context: http://www.nabble.com/Serving-remote-=20
>> lucene-client---RMI-vs-HTTP-tf4084167.html#a11608209
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>=20
> --------------------------
> Grant Ingersoll
> Center for Natural Language Processing
> http://www.cnlp.org/tech/lucene.asp
>=20
> Read the Lucene Java FAQ at =
http://wiki.apache.org/lucene-java/LuceneFAQ
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20

--=20
View this message in context: =
http://www.nabble.com/Serving-remote-lucene-client---RMI-vs-HTTP-tf408416=
7.html#a11609007
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29195-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 16 15:33:19 2007
Return-Path: <java-user-return-29195-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24172 invoked from network); 16 Jul 2007 15:33:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jul 2007 15:33:18 -0000
Received: (qmail 48004 invoked by uid 500); 16 Jul 2007 15:33:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47961 invoked by uid 500); 16 Jul 2007 15:33:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47950 invoked by uid 99); 16 Jul 2007 15:33:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jul 2007 08:33:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.100.3.120] (HELO cliff.cs.toronto.edu) (128.100.3.120)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jul 2007 08:33:08 -0700
Received: from [127.0.0.1] (qew.cs.toronto.edu [128.100.2.15])
	by cliff.cs.toronto.edu (Postfix) with ESMTP id 1973C5FD0D
	for <java-user@lucene.apache.org>; Mon, 16 Jul 2007 11:32:48 -0400 (EDT)
Message-ID: <469B8FD0.90203@cs.toronto.edu>
Date: Mon, 16 Jul 2007 11:33:36 -0400
From: Shahan Khatchadourian <shahan@cs.toronto.edu>
User-Agent: Thunderbird 1.5.0.12 (Windows/20070509)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Token offset values for custom Tokenizer
References: <A955EA1F8FE31749AEC8C998082F6C7CD6EA39@hai01.hippo.local>
In-Reply-To: <A955EA1F8FE31749AEC8C998082F6C7CD6EA39@hai01.hippo.local>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thank you for the reply Ard,

The tokens exist in the index and are returned accurately, except for 
the offsets. In this case I am not dealing with the positions, so the 
termvector is specified as using 'with_offsets'. I have left the term 
position incrememt as its default. Looking at the existing tokenstreams, 
they don't maintain knowledge of the current position, they always 
generate values startoffsets beginning at 0 of the current stream, and 
then a 'proper' offset is generated based on the +1 of the previous 
token the DocumentWriter applies when indexeding. Nor are there any test 
cases for offsets. I found a bug that was opened a while ago dealing 
with this issue (as well as related one). It is:
https://issues.apache.org/jira/browse/LUCENE-579

I am retrieving the a text token's offset values using 
TermPositionVector.getOffsets() which returns TermVectorOffsetInfo[]. 
The same offset values that were placed into the token during indexing 
are not being returned, they have been shifted.
Thanks.
Shahan

Ard Schrijvers wrote:
> Hello,
>
>   
>> Hi,
>> I am storing custom values in the Tokens provided by a Tokenizer but 
>> when retrieving them from the index the values don't match. 
>>     
>
> What do you mean by retrieving? Do you mean retrieving terms, or do you mean doing a search with words you know that should be in, but you do not find a match?
>
> In the latter, you must make sure that you are using the same analyzer for the search as you used for indexing. 
>
>   
>> I've looked 
>> in the LIA book but it's not current since it mentioned term vectors 
>> aren't stored. I'm using Lucene Nightly 146 but the same thing has 
>> happened with older versions. Looking at the internals, 
>> DocumentWriter 
>> seems to keep track of the end offset that was placed into 
>> the index and 
>> modifies the token values (with +1) but I'm not sure whether 
>> I should be 
>> concerned with it.
>> No existing analyzers are used when adding the document so all the 
>> offsets are generated manually.
>> Any suggestions of how the token offsets should be stored?
>>
>>     
>
> Look at other clases that implement TokenStream. Also take a look at setPositionIncrement when you are putting in your own terms
>
> Regards Ard
>
>   
>> Is this valid?
>> Token, start, end
>> aaa, 0, 3
>> bbb, 4, 7
>> ccc, 8, 11
>>
>> Thanks,
>> Shahan
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29196-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 16 15:41:37 2007
Return-Path: <java-user-return-29196-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27405 invoked from network); 16 Jul 2007 15:41:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jul 2007 15:41:37 -0000
Received: (qmail 65222 invoked by uid 500); 16 Jul 2007 15:41:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65189 invoked by uid 500); 16 Jul 2007 15:41:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65178 invoked by uid 99); 16 Jul 2007 15:41:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jul 2007 08:41:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [213.133.33.40] (HELO smtp.is.nl) (213.133.33.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jul 2007 08:41:29 -0700
Received: from [213.133.51.241] (HELO hai01.hippo.local)
  by smtp.is.nl (CommuniGate Pro SMTP 5.0.10)
  with ESMTP id 19631234 for java-user@lucene.apache.org; Mon, 16 Jul 2007 17:41:07 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6619.12
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Token offset values for custom Tokenizer
Date: Mon, 16 Jul 2007 17:41:07 +0200
Message-ID: <A955EA1F8FE31749AEC8C998082F6C7C01AC1164@hai01.hippo.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Token offset values for custom Tokenizer
Thread-Index: AcfHvqGyG/TAzPSJRuu9PahF2/UYmQAANa3w
From: "Ard Schrijvers" <a.schrijvers@hippo.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

The issue is about lucene 1.9. Can you test it with lucene 2.2? Perhaps =
the issue is already addressed and solved...

Regards Ard

>=20
> Thank you for the reply Ard,
>=20
> The tokens exist in the index and are returned accurately, except for=20
> the offsets. In this case I am not dealing with the positions, so the=20
> termvector is specified as using 'with_offsets'. I have left the term=20
> position incrememt as its default. Looking at the existing=20
> tokenstreams,=20
> they don't maintain knowledge of the current position, they always=20
> generate values startoffsets beginning at 0 of the current=20
> stream, and=20
> then a 'proper' offset is generated based on the +1 of the previous=20
> token the DocumentWriter applies when indexeding. Nor are=20
> there any test=20
> cases for offsets. I found a bug that was opened a while ago dealing=20
> with this issue (as well as related one). It is:
> https://issues.apache.org/jira/browse/LUCENE-579
>=20
> I am retrieving the a text token's offset values using=20
> TermPositionVector.getOffsets() which returns TermVectorOffsetInfo[].=20
> The same offset values that were placed into the token during=20
> indexing=20
> are not being returned, they have been shifted.
> Thanks.
> Shahan
>=20
> Ard Schrijvers wrote:
> > Hello,
> >
> >  =20
> >> Hi,
> >> I am storing custom values in the Tokens provided by a=20
> Tokenizer but=20
> >> when retrieving them from the index the values don't match.=20
> >>    =20
> >
> > What do you mean by retrieving? Do you mean retrieving=20
> terms, or do you mean doing a search with words you know that=20
> should be in, but you do not find a match?
> >
> > In the latter, you must make sure that you are using the=20
> same analyzer for the search as you used for indexing.=20
> >
> >  =20
> >> I've looked=20
> >> in the LIA book but it's not current since it mentioned=20
> term vectors=20
> >> aren't stored. I'm using Lucene Nightly 146 but the same thing has=20
> >> happened with older versions. Looking at the internals,=20
> >> DocumentWriter=20
> >> seems to keep track of the end offset that was placed into=20
> >> the index and=20
> >> modifies the token values (with +1) but I'm not sure whether=20
> >> I should be=20
> >> concerned with it.
> >> No existing analyzers are used when adding the document so all the=20
> >> offsets are generated manually.
> >> Any suggestions of how the token offsets should be stored?
> >>
> >>    =20
> >
> > Look at other clases that implement TokenStream. Also take=20
> a look at setPositionIncrement when you are putting in your own terms
> >
> > Regards Ard
> >
> >  =20
> >> Is this valid?
> >> Token, start, end
> >> aaa, 0, 3
> >> bbb, 4, 7
> >> ccc, 8, 11
> >>
> >> Thanks,
> >> Shahan
> >>
> >>=20
> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >>    =20
> >
> >=20
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >  =20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29197-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 16 15:46:37 2007
Return-Path: <java-user-return-29197-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28779 invoked from network); 16 Jul 2007 15:46:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jul 2007 15:46:36 -0000
Received: (qmail 77325 invoked by uid 500); 16 Jul 2007 15:46:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77086 invoked by uid 500); 16 Jul 2007 15:46:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77075 invoked by uid 99); 16 Jul 2007 15:46:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jul 2007 08:46:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.100.3.120] (HELO cliff.cs.toronto.edu) (128.100.3.120)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jul 2007 08:46:28 -0700
Received: from [127.0.0.1] (qew.cs.toronto.edu [128.100.2.15])
	by cliff.cs.toronto.edu (Postfix) with ESMTP id 958B85FD08
	for <java-user@lucene.apache.org>; Mon, 16 Jul 2007 11:46:10 -0400 (EDT)
Message-ID: <469B92F2.70104@cs.toronto.edu>
Date: Mon, 16 Jul 2007 11:46:58 -0400
From: Shahan Khatchadourian <shahan@cs.toronto.edu>
User-Agent: Thunderbird 1.5.0.12 (Windows/20070509)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Token offset values for custom Tokenizer
References: <A955EA1F8FE31749AEC8C998082F6C7C01AC1164@hai01.hippo.local>
In-Reply-To: <A955EA1F8FE31749AEC8C998082F6C7C01AC1164@hai01.hippo.local>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

The issue continues to exist with nightly 146 from Jul 10, 2007.

http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/146/


Ard Schrijvers wrote:
> Hello,
>
> The issue is about lucene 1.9. Can you test it with lucene 2.2? Perhaps the issue is already addressed and solved...
>
> Regards Ard
>
>   
>> Thank you for the reply Ard,
>>
>> The tokens exist in the index and are returned accurately, except for 
>> the offsets. In this case I am not dealing with the positions, so the 
>> termvector is specified as using 'with_offsets'. I have left the term 
>> position incrememt as its default. Looking at the existing 
>> tokenstreams, 
>> they don't maintain knowledge of the current position, they always 
>> generate values startoffsets beginning at 0 of the current 
>> stream, and 
>> then a 'proper' offset is generated based on the +1 of the previous 
>> token the DocumentWriter applies when indexeding. Nor are 
>> there any test 
>> cases for offsets. I found a bug that was opened a while ago dealing 
>> with this issue (as well as related one). It is:
>> https://issues.apache.org/jira/browse/LUCENE-579
>>
>> I am retrieving the a text token's offset values using 
>> TermPositionVector.getOffsets() which returns TermVectorOffsetInfo[]. 
>> The same offset values that were placed into the token during 
>> indexing 
>> are not being returned, they have been shifted.
>> Thanks.
>> Shahan
>>
>> Ard Schrijvers wrote:
>>     
>>> Hello,
>>>
>>>   
>>>       
>>>> Hi,
>>>> I am storing custom values in the Tokens provided by a 
>>>>         
>> Tokenizer but 
>>     
>>>> when retrieving them from the index the values don't match. 
>>>>     
>>>>         
>>> What do you mean by retrieving? Do you mean retrieving 
>>>       
>> terms, or do you mean doing a search with words you know that 
>> should be in, but you do not find a match?
>>     
>>> In the latter, you must make sure that you are using the 
>>>       
>> same analyzer for the search as you used for indexing. 
>>     
>>>   
>>>       
>>>> I've looked 
>>>> in the LIA book but it's not current since it mentioned 
>>>>         
>> term vectors 
>>     
>>>> aren't stored. I'm using Lucene Nightly 146 but the same thing has 
>>>> happened with older versions. Looking at the internals, 
>>>> DocumentWriter 
>>>> seems to keep track of the end offset that was placed into 
>>>> the index and 
>>>> modifies the token values (with +1) but I'm not sure whether 
>>>> I should be 
>>>> concerned with it.
>>>> No existing analyzers are used when adding the document so all the 
>>>> offsets are generated manually.
>>>> Any suggestions of how the token offsets should be stored?
>>>>
>>>>     
>>>>         
>>> Look at other clases that implement TokenStream. Also take 
>>>       
>> a look at setPositionIncrement when you are putting in your own terms
>>     
>>> Regards Ard
>>>
>>>   
>>>       
>>>> Is this valid?
>>>> Token, start, end
>>>> aaa, 0, 3
>>>> bbb, 4, 7
>>>> ccc, 8, 11
>>>>
>>>> Thanks,
>>>> Shahan
>>>>
>>>>
>>>>         
>> ---------------------------------------------------------------------
>>     
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>     
>>>>         
>>>       
>> ---------------------------------------------------------------------
>>     
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>   
>>>       
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29198-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 16 16:40:08 2007
Return-Path: <java-user-return-29198-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51035 invoked from network); 16 Jul 2007 16:40:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jul 2007 16:40:06 -0000
Received: (qmail 91537 invoked by uid 500); 16 Jul 2007 16:39:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91492 invoked by uid 500); 16 Jul 2007 16:39:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91478 invoked by uid 99); 16 Jul 2007 16:39:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jul 2007 09:39:59 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jpsondag@gmail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO py-out-1112.google.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jul 2007 09:39:56 -0700
Received: by py-out-1112.google.com with SMTP id f31so4023087pyh
        for <java-user@lucene.apache.org>; Mon, 16 Jul 2007 09:39:35 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        b=YZ71LcF8fy6DjSkBUZks0EGmk0hliz8VGjib/qBoWBIXp9+Y7n/ncLKeH/ezRj0RE0WWO5mJWtuWvHlCYpAS59VGZKyA38SoSAsXkcTaLQwZKX0T8qHTJugj7XLTVnFEk6uSp66nFOtMdnTIhUYoHrxyggz3bIsh9ZWqurbMKGM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        b=A3J8G+DbsZyso/Zk738RsVDqUMf1GxnI84ahHGuDcMqtw7nW6QfxJKMgJJYzJvV/VB/3Le23p9SvQH+Yjl6g2Gv1GTFC8RptFcR3WS1UX/bJVIe9GDg1w0ufaOMTOvXitQaBS7v+3/IRBir8WmnuOKZ6bwDU1Fmvy1APDoSdXqk=
Received: by 10.65.204.7 with SMTP id g7mr7061479qbq.1184603975048;
        Mon, 16 Jul 2007 09:39:35 -0700 (PDT)
Received: by 10.65.177.7 with HTTP; Mon, 16 Jul 2007 09:39:34 -0700 (PDT)
Message-ID: <bd67edef0707160939x7f4664cbl595fab6cfd4c1b78@mail.gmail.com>
Date: Mon, 16 Jul 2007 11:39:35 -0500
From: "John Paul Sondag" <jsondag2@uiuc.edu>
Sender: jpsondag@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Does Index have a Tokenizer Built into it
In-Reply-To: <A955EA1F8FE31749AEC8C998082F6C7CD6EA3A@hai01.hippo.local>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_53681_11310296.1184603974998"
References: <A955EA1F8FE31749AEC8C998082F6C7CD6EA3A@hai01.hippo.local>
X-Google-Sender-Auth: 0983d14b6af1e792
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_53681_11310296.1184603974998
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Some of the data sets that will be using have about 2 TB of data (90 million
web pages).  The Snippet I will be generating I would like to include the
words that are being queried, so I don't want to simply store the first 2 or
3 lines.  I have looked at the HighlighterTest and I do believe that it
requires the entire text of the document.  However, unlike the highlighter I
know where the termOffset in the document.

The input to my Snippet will be a vector of querywords and their offsets in
the document.  (not their position in the document).  I'm reading about the
option "term vectors" I can store while indexing my data.  It seems to be
much more efficient than storing the entire document, I'm just not sure if
the "term offset" is the same as a "token offset".  Here's what I'm reading
in case I'm totally off the ball here and this is useless to me:

http://lucene.apache.org/java/docs/fileformats.html#Term%20Vectors

It seems like this has all the information that I would have if I tokenized
the document anyways, or am I missing something?

Thanks again for all the help!

--JP




On 7/16/07, Ard Schrijvers <a.schrijvers@hippo.nl> wrote:
>
> Hello,
>
> > Ard,
> >
> > I do have access to the URL's of the documents, but because I
> > will be making
> > short snippets for many pages (suppose it had about 20 hits
> > per page and I
> > need to make Snippets for each of them) I was worried it would be
> > inefficient to open each "hit" tokenize it and then make the
> > Snippet, of
>
> Yes, getting all the documents over http just to get the snippet, for
> example the first 2 lines, is really bad for your performance in search
> overviews.
>
> Logically, what you want to show, you need to store in your index. For
> example, if for search hits you need to show the title and subtitle, just
> store these two in the index. If you want to have a google like highlighter
> of text snippets where the term occured, you need to store the entire text
> IIRC (see HighlighterTest in lucene).
>
> How many docs are you talking about that you cannot store the entire
> content?
>
> You could also just index the content and not store it, and in another
> lucene field, store the first 2 or 3 lines of  the document, which serve as
> text snippet. Making correct extracts of text snippets is very hard (see
> lingpipe for example)
>
> Regards Ard
>
> > course the price of this may be worth the price of the increased Index
> > size.  I have been looking into storing "Field Vectors with
> > positions" in
> > the index.  It seems that by doing this I will have access to
> > everything
> > that the Tokenizer is giving me correct?   Will I need to
> > store "term text"
> > in order to be able to access the actual term instead of
> > stemmed words?
> >
> > Thanks for all your help,
> >
> > --JP
> >
> > On 7/13/07, Ard Schrijvers <a.schrijvers@hippo.nl> wrote:
> > >
> > > Hello,
> > >
> > > > I'm wondering if after
> > > > opening the
> > > > index I can retrieve the Tokens (not the terms) of a
> > > > document, something
> > > > akin to IndexReader.Document(n).getTokenizer().
> > >
> > > It is obviously not possible to get the original tokens of
> > the document
> > > back when you haven't stored the document, because:
> > >
> > > 1) the analyzer might have removed stop words in the first place
> > > 2) the terms in lucene index are perhaps stemmed words /
> > synonyms / etc
> > > etc
> > > 3) how would you expect things like spaces, commas, dots etc to be
> > > restored?
> > >
> > > And, I think what you want does not comply with an inverted
> > index. When
> > > you do not store the document, you always loose information
> > about the
> > > document during indexing/analyzing
> > >
> > > How many documents are you talking about? They must be
> > either somewhere on
> > > FS or accessible over http...when you need the document,
> > why not just
> > > provide a link to the original location?
> > >
> > > Regards Ard
> > >
> > > >
> > > > In summary:
> > > >
> > > > My current ( too wasteful implementation is this)
> > > >
> > > > StandardTokenizer(BufferedReader (
> > > > IndexReader.Document(n).getField("text"
> > > > )  )
> > > >
> > > > I'm wondering if Lucene has a more efficient manner to
> > > > retrieve the tokens
> > > > of a document from an index.  Because it seems like it has
> > > > information about
> > > > every "term" already, Since you can get retrieve a
> > > > TermPositions object.
> > > >
> > > > Thanks,
> > > >
> > > >
> > > > --JP
> > > >
> > >
> > >
> > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_53681_11310296.1184603974998--

From java-user-return-29199-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 16 18:40:49 2007
Return-Path: <java-user-return-29199-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21516 invoked from network); 16 Jul 2007 18:40:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jul 2007 18:40:48 -0000
Received: (qmail 16614 invoked by uid 500); 16 Jul 2007 17:32:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16587 invoked by uid 500); 16 Jul 2007 17:32:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16560 invoked by uid 99); 16 Jul 2007 17:32:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jul 2007 10:32:33 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_MESSAGE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of dimamay@gmail.com designates 66.249.82.230 as permitted sender)
Received: from [66.249.82.230] (HELO wx-out-0506.google.com) (66.249.82.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jul 2007 10:32:29 -0700
Received: by wx-out-0506.google.com with SMTP id i28so1452270wxd
        for <java-user@lucene.apache.org>; Mon, 16 Jul 2007 10:32:08 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=aVd2bLYmZ3fhARIBtJiynf7OZXAuTQZ6d5r4+hJ8Ikmy/aY21GXWm+T90rkVwxTe/sHVP2OGQuTVdlW7u2ATyi5pAB4+TdwRppS2kV0hHTiMbtO2B5lT41lrlct6Y0NtA4IUKMG/2SHiWe5yB/kZ9vW2m0Mm5FmBSjQMRxnnXmI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=X9DHBwI/1FnB8BEmPcTC7natlty5Y4fIxkaW9yeGqrMUwoY/lUU4CcfKXcI1FbF50bor5C+/1IfoLvkoxWczo04d8adwvvqox6ye7X2J5dJjjLAdp3CoPzXmyabcjnqqnQARyuEV5J5/aZjrJvYGRjgOv503TPmv0jrMrnj7Azw=
Received: by 10.70.70.7 with SMTP id s7mr8186009wxa.1184607128680;
        Mon, 16 Jul 2007 10:32:08 -0700 (PDT)
Received: by 10.70.56.5 with HTTP; Mon, 16 Jul 2007 10:32:08 -0700 (PDT)
Message-ID: <700cf4dd0707161032ucc51949web237e8faed46463@mail.gmail.com>
Date: Mon, 16 Jul 2007 13:32:08 -0400
From: "Dima May" <dimamay@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: two questions about NumberTools
In-Reply-To: <34b8543c0707160001q235f7589uc188f9e99b74672e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_47809_27595633.1184607128303"
References: <34b8543c0707160001q235f7589uc188f9e99b74672e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_47809_27595633.1184607128303
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Mohammad,

see for my 2 cents below,

Good luck.

D


On 7/16/07, Mohammad Norouzi <mnrz57@gmail.com> wrote:
>
> Hello
> I have problem in range queries, for example, I have queries like
> "field:[1
> TO 25]" or "field:[1.1 TO 11.25]"
> currently these queries not work. field:[20 TO 25] works fine but when the
> both limits of the range have different number of digits the query won't
> work. so the solution is NumberTools.
>
1 - the NumberTools utility has two methods longToString() and
> stringToLong(). how about the double or float  numbers?? I think it should
> be extends to support more data types


Check out these resources:
1. https://issues.apache.org/jira/browse/LUCENE-530
2. Solr has a class that will help you encode/decode floats for lucene range
queries and sorting:
http://lucene.apache.org/solr/api/org/apache/solr/util/NumberUtils.html
3. Alternatively you can pad the floats with zeros like this: 000001.3000.
As long as the padding is consistent between indexing and querying your
range queries and sorting should work fine as appending zeros enforces
lexicographical order.

2 - suppose we are indexing a bunch of information and a field is in long
> that we need to apply range queries on that later.
> now I have a query like "fieldone:(just for test) AND field_long:[1 TO
> 25]",
> the question is whether this query returns correct result? because
> field_long already encoded with longToString() method and in the index
> files
> you can't find any real value say, 1 or 25 or 10 ...
> do I need to use stringToLong() method while I am building query?


Yes the search query must "match" whats in the index so you would have to
encode the value before performing the search. The good news are that you
can encapsulate that logic into the custom analyzer and custom query parser.
In query parser you should implement getRangeQuery.

any comment would be of great help
>
> --
> Regards,
> Mohammad
> --------------------------
> see my blog: http://brainable.blogspot.com/
> another in Persian: http://fekre-motefavet.blogspot.com/
>

------=_Part_47809_27595633.1184607128303--

From java-user-return-29200-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 16 20:41:23 2007
Return-Path: <java-user-return-29200-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73107 invoked from network); 16 Jul 2007 20:41:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jul 2007 20:41:22 -0000
Received: (qmail 5258 invoked by uid 500); 16 Jul 2007 20:41:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5223 invoked by uid 500); 16 Jul 2007 20:41:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5211 invoked by uid 99); 16 Jul 2007 20:41:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jul 2007 13:41:16 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.134.184 as permitted sender)
Received: from [209.85.134.184] (HELO mu-out-0910.google.com) (209.85.134.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jul 2007 13:41:13 -0700
Received: by mu-out-0910.google.com with SMTP id g7so1636471muf
        for <java-user@lucene.apache.org>; Mon, 16 Jul 2007 13:40:51 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=TDcHidUPeY8LDKZC0XHX13hpv0Xa3K7cj6j5ayVLqBe0/qsNtZufLb0zjQEmw+6ld1YdypXrjEp8LLCDeUTYGZGHetTYI8zWR6SDnN+9OXzmJKF4sJtwNsOYilGksKqMUp9S4QcJlfL2RWVUoWJ7NSWXkioUUqkOJnpQHsqULE4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=UdlRF4BDnAmfzQdFU9NvoMczAm6BEjaxs/Pf+bwvboRAEHtWJ0aqjQNGcQGI2YiSl5v1YdqXKvSuGieyQecdcplYTbAWmFyor9kU8lk4ECiZSTIXZFuK4MmmXR0ZDOkWKxnUaAPGzp2ByDsjvAB9t9XIYBcvchc38GHtLVFsH5I=
Received: by 10.82.108.9 with SMTP id g9mr5136338buc.1184618449993;
        Mon, 16 Jul 2007 13:40:49 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Mon, 16 Jul 2007 13:40:49 -0700 (PDT)
Message-ID: <359a92830707161340n23a02ba2xa3de2ad2679672b3@mail.gmail.com>
Date: Mon, 16 Jul 2007 16:40:49 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Serving remote lucene client - RMI vs HTTP
In-Reply-To: <A955EA1F8FE31749AEC8C998082F6C7C01AC1153@hai01.hippo.local>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_50132_9762176.1184618449959"
References: <A955EA1F8FE31749AEC8C998082F6C7C01AC1153@hai01.hippo.local>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_50132_9762176.1184618449959
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Another question would be what queries take the longest. Are your
response times pretty constant on a per-query basis or are there
outliers that could perhaps point to a different solution?

Finally, what is the size of your index? The total number of documents
is certainly useful, but so is the finished index size. I can put a million
document in a 100M index or a 100G index, and size does matter <G>...

Best
Erick

On 7/16/07, Ard Schrijvers <a.schrijvers@hippo.nl> wrote:
>
> Hello,
>
> > Hi EVeryone,
> >
> > Thank you all for your replies.
> >
> > And reply to your questions Grant:
> > We have more than 3 Million document in our index.
> > We get more than 150,000 searches (queries) per day. We
> > expect this no to go
> > up.
>
> Just curious, but suppose those 150.000 searches are done during 8 hours a
> day, that means around 6 searches a second...that is not too much is it?
>
> Perhaps a too trivial question, but do you only re-open the index reader
> when there is actually something changed in the index (or are you crawling
> all day? perhaps you should only crawl during the night)? Reopening the
> index over and over again while not needed is inefficient. Also, there are
> some caching mechanisms around
>
> Furthermore, if you use sorting in your query, you might gain much speed
> by indexing these fields differently (like sorting on some large field is
> very expensive)
>
> Then of course, do you use range searches?
>
> Also, did you check setting maxmemory of your jvm higher?
>
> One more suggestion: try to open your index with "luke" and see wether
> "luke" is faster in doing the searches. If so, you certainly can find some
> simple ways to increase the performance,
>
> Ard
>
> > This count only includes actual user search and doesn't
> > include robot
> > searches and other internal searches (for sending emails to user etc).
> > And our final queries sent to lucene are quite complicated.
> > This is because
> > we need to confirm to a lot of criteria (some are set by
> > users and some are
> > internal logics). I don't think we can simplify our queries.
> >
> > And importantly we are looking to scale to a larger no. of
> > traffic. Our
> > current performance in terms of speed is ok.
> >
> > We are not sure about implementing using Solr because we
> > crawl only specific
> > type of sites and our crawling mechanism has proven to be
> > quite stable. We
> > are only looking to scale to larger no. of users and doing a new
> > implementation using Solr might be an overkill as time is a
> > huge factor.
> >
> > Best Regards,
> > Kumar
> >
> >
> > Grant Ingersoll-6 wrote:
> > >
> > > Hi Kumar,
> > >
> > > I am curious about where the bulk of time was spent in
> > Lucene.  I am
> > > not doubting your numbers or analysis, just want to know if
> > there was
> > > anything that could be improved in Lucene and make sure you are
> > > solidly in need of going to multiple machines as it adds an extra
> > > level of complexity.  Can you provide info about number of
> > documents,
> > > # of updates, # of queries etc. ?  What kind of analysis, etc. are
> > > you doing?  That being said, putting the web app on one
> > machine and
> > > the search application on the other makes sense much in the
> > same way
> > > it makes sense in most cases to do this for a database.
> > >
> > > As for POST/GET vs. RMI, have a look at Solr, esp. its replication
> > > capabilities for load balancing search servers.  I think it
> > answers
> > > the question in favor of the POST/GET approach.  In fact,
> > you may be
> > > able to drop in Solr to your situation w/o too much work.
> > >
> > > Cheers,
> > > Grant
> > >
> > >
> > > On Jul 15, 2007, at 10:10 PM, kumarlimbu wrote:
> > >
> > >>
> > >> Hi Everyone,
> > >>
> > >> We are using lucene,nutch and spring framework to create a
> > specialized
> > >> search engine. Due to growing traffic we are trying to scale. By
> > >> doing some
> > >> tests we found out that the bottle neck was lucene search.
> > We used
> > >> some
> > >> heavy traffic simulation and logged the time taken by each
> > portion
> > >> of the
> > >> server response and found out that the bulk of the time
> > was spent in
> > >> searching from lucene index.
> > >>
> > >> In order to accomodate higher traffic we are planning on
> > splitting our
> > >> application in 2 portions:
> > >> 1. Web application (on 1 machine)
> > >> 2. Search application (one more than 1 machine)
> > >>
> > >> Each one of the application will reside on a (possibly) separate
> > >> machines.
> > >> We are looking forward to scaling by adding more than 1 machine
> > >> dedicated to
> > >> searching as lucene search seems to be the bottleneck.
> > >>
> > >> Web application will provide the front-end to the user.
> > All static
> > >> pages,
> > >> images and the style information will reside on this machine. It
> > >> will also
> > >> serve dynamic pages but all the searching will take place on the
> > >> search
> > >> application. Web application will send search parameters
> > to the search
> > >> application and after searching, it will send back the results to
> > >> the web
> > >> application which will format it and display it to the user.
> > >>
> > >> What we are unable to decide is whether to use RMI (
> > >>
> http://www.soft-amis.com/index.html?return=http://www.soft-amis.com/
> >> cluster4spring/index.html
> >> cluster4spring  )or simple HTTP POST/GET request with response in XML
> >> format. We did some research and found out that RMI (with clustering
> >> support) might be more suitable for our needs. Unfortunately our
> >> team is not
> >> familiar with RMI and so we don't know if there will be any issues
> >> with it
> >> during implementation.
> >> Advantage of using simple GET/POST is we have more control which
> >> searcher
> >> app to use and when. An important criteria for us is to disable
> >> searching
> >> from the searcher app who's index is being updated. This is very
> >> important
> >> for us. Is there anyway in RMI to inform the web (client)
> >> application that a
> >> particular server is unavailable (due to index being updated).
> >>
> >> We would also like to know if anybody has implemented lucene
> >> searching in a
> >> similar fashion. Thanks for your help.
> >>
> >> Kumar Limbu
> >>
> >> --
> >> View this message in context: http://www.nabble.com/Serving-remote-
> >> lucene-client---RMI-vs-HTTP-tf4084167.html#a11608209
> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >
> > --------------------------
> > Grant Ingersoll
> > Center for Natural Language Processing
> > http://www.cnlp.org/tech/lucene.asp
> >
> > Read the Lucene Java FAQ at http://wiki.apache.org/lucene-java/LuceneFAQ
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/Serving-remote-lucene-client---RMI-vs-HTTP-tf4084167.html#a11609007
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_50132_9762176.1184618449959--

From java-user-return-29201-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 16 21:42:35 2007
Return-Path: <java-user-return-29201-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95907 invoked from network); 16 Jul 2007 21:42:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jul 2007 21:42:34 -0000
Received: (qmail 49087 invoked by uid 500); 16 Jul 2007 21:42:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49050 invoked by uid 500); 16 Jul 2007 21:42:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49039 invoked by uid 99); 16 Jul 2007 21:42:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jul 2007 14:42:25 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [128.218.33.11] (HELO gossamer.ckm.ucsf.edu) (128.218.33.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jul 2007 14:42:21 -0700
Received: from CKMPC08 (tikal.library.ucsf.edu [128.218.15.151])
	by gossamer.ckm.ucsf.edu (8.13.8/8.13.8) with ESMTP id l6GLfug8028200
	for <java-user@lucene.apache.org>; Mon, 16 Jul 2007 14:41:59 -0700 (PDT)
From: "Renaud Waldura" <renaud.waldura@library.ucsf.edu>
To: <java-user@lucene.apache.org>
Subject: RE: search through all fields
Date: Mon, 16 Jul 2007 14:41:51 -0700
Message-ID: <003401c7c7f2$21fb5140$970fda80@libraria.ucsf.edu>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <34b8543c0707152139p457e0a0enafc5e7bf3f6616c4@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
Thread-Index: AcfHY19sgP4aNCtOS1KlTDZGJBDyygAjd6fg
X-Filter-Version: 1.15 (gossamer)
X-Virus-Checked: Checked by ClamAV on apache.org

Often documents can be divided in "metadata" and "contents" sections. Say
you're indexing Web pages, you could index them with HEAD data all in one
field, and the BODY content in another. While also creating separate fields
for every HEAD field, e.g. TITLE etc.

At search time, you rewrite every query to become "+head:(query)
+body:(query)" using MultiFieldQueryParser. This way you don't have to
create an "all" field that contains everything, head + body.

I will increase your index size, no doubt. Might increase indexing time too.

--Renaud
 

-----Original Message-----
From: Mohammad Norouzi [mailto:mnrz57@gmail.com] 
Sent: Sunday, July 15, 2007 9:40 PM
To: java-user@lucene.apache.org
Subject: Re: search through all fields

On 7/14/07, Grant Ingersoll <grant.ingersoll@gmail.com> wrote:
>
> I think he means index all your different fields into a single field 
> named "all".  Not sure what makes it special, it is just like any 
> other field.
>


but that really impossible ! because I have near millions records to be
indexed so this job will decrease the time of indexing and increase the
index size

--
Regards,
Mohammad
--------------------------
see my blog: http://brainable.blogspot.com/ another in Persian:
http://fekre-motefavet.blogspot.com/



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29202-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 16 22:30:39 2007
Return-Path: <java-user-return-29202-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15081 invoked from network); 16 Jul 2007 22:30:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jul 2007 22:30:36 -0000
Received: (qmail 46665 invoked by uid 500); 16 Jul 2007 22:30:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46507 invoked by uid 500); 16 Jul 2007 22:30:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46496 invoked by uid 99); 16 Jul 2007 22:30:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jul 2007 15:30:28 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=FROM_EXCESS_QP,SPF_PASS,SUBJECT_EXCESS_QP
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mhzmark@o2.pl designates 193.17.41.76 as permitted sender)
Received: from [193.17.41.76] (HELO rekin26.go2.pl) (193.17.41.76)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jul 2007 15:30:25 -0700
Received: from o2.pl (unknown [10.0.0.76])
	by rekin26.go2.pl (Postfix) with SMTP id 8CC6C5BDCA
	for <java-user@lucene.apache.org>; Tue, 17 Jul 2007 00:30:04 +0200 (CEST)
Subject: =?UTF-8?Q?What_should_I_download_to_use_"RegexQuery"?=
From: =?UTF-8?Q?mhzmark?= <mhzmark@o2.pl>
To: java-user@lucene.apache.org
Mime-Version: 1.0
Message-ID: <dfcf003.5debde3e.469bf16c.89598@o2.pl>
Date: Tue, 17 Jul 2007 00:30:04 +0200
X-Originator: 83.4.187.244
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,=20everybody.
=20=20=20I=20am=20new=20in=20lucene=20technology.=20I've=20downloaded=20l=
ucene-demos-2.2.0.jar=20and
lucene-core-2.2.0.jar.=20Then=20I=20added=20these=20files=20to=20my=20CLA=
SSPATH.=20And=20now=20I=20can=20successfully=20import=20classes=20like:
=20=20=20import=20org.apache.lucene.search.IndexSearcher;
=20=20=20import=20org.apache.lucene.search.Query;
=20=20=20import=20org.apache.lucene.search.Hits;
=20=20=20(...)
=20etc.

But=20I=20can't=20import:
=20=20=20import=20org.apache.lucene.search.regex.RegexQuery;

I've=20checked=20that=20there=20is=20no=20"RegexQuery.class"=20in=20lucen=
e-core-2.2.0.jar=20and=20lucene-demos-2.2.0.jar.
So=20my=20question=20is:
=20=20=20what=20additional=20jar-files=20should=20I=20download=20to=20use=
=20RegexQuery=20class.

Thanks,=20in=20advance.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29203-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 16 22:55:26 2007
Return-Path: <java-user-return-29203-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29217 invoked from network); 16 Jul 2007 22:55:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jul 2007 22:55:17 -0000
Received: (qmail 13166 invoked by uid 500); 16 Jul 2007 22:55:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12933 invoked by uid 500); 16 Jul 2007 22:55:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12912 invoked by uid 99); 16 Jul 2007 22:55:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jul 2007 15:55:08 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.234 as permitted sender)
Received: from [66.249.82.234] (HELO wx-out-0506.google.com) (66.249.82.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jul 2007 15:55:05 -0700
Received: by wx-out-0506.google.com with SMTP id i28so1555148wxd
        for <java-user@lucene.apache.org>; Mon, 16 Jul 2007 15:54:44 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=NVIKei2ZQmhWILx3rB/4kUAkWxtXZzI5g1HOzJXGKYQBWgXN4FTLf8kisjLW7baZ7s/haCFm84Lf0ZWsQkJmUxCVqQlpAIwZwZLC7FOey0B7WRT4CaSbkzIJfWTDQz3Jw0HjYPaO5zkG2phvg1COatJ0lT/Q2USAjiUt/Msh3/I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=PG6NP48V1xuGen5nCDUZRlmwxPZ26SbrhY+ieholGiL0lt029vTeq/5FmW7ARYSo6fmQJ2sIQpTUlYIsd4PSePMeIkRRCjP5aig5A5hStNx7PFl+QS7LL1by+/mtgHE9FfdZk3d8hGqTpaB8y99AmN9uYH1zXDk3DMWDUBHuvdY=
Received: by 10.90.97.11 with SMTP id u11mr3864290agb.1184626483525;
        Mon, 16 Jul 2007 15:54:43 -0700 (PDT)
Received: from ?192.168.1.100? ( [216.66.114.204])
        by mx.google.com with ESMTP id 71sm10125733wry.2007.07.16.15.54.42
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 16 Jul 2007 15:54:43 -0700 (PDT)
Message-ID: <469BF6DC.1020200@gmail.com>
Date: Mon, 16 Jul 2007 18:53:16 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.4 (Windows/20070604)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: What should I download to use "RegexQuery"
References: <dfcf003.5debde3e.469bf16c.89598@o2.pl>
In-Reply-To: <dfcf003.5debde3e.469bf16c.89598@o2.pl>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Its in a contrib jar. Download the release: 
http://www.apache.org/dyn/closer.cgi/lucene/java/ then look in the 
contrib folder for a folder that has 'regex' in it for the correct jar.

- Mark

mhzmark wrote:
> Hi, everybody.
>    I am new in lucene technology. I've downloaded lucene-demos-2.2.0.jar and
> lucene-core-2.2.0.jar. Then I added these files to my CLASSPATH. And now I can successfully import classes like:
>    import org.apache.lucene.search.IndexSearcher;
>    import org.apache.lucene.search.Query;
>    import org.apache.lucene.search.Hits;
>    (...)
>  etc.
>
> But I can't import:
>    import org.apache.lucene.search.regex.RegexQuery;
>
> I've checked that there is no "RegexQuery.class" in lucene-core-2.2.0.jar and lucene-demos-2.2.0.jar.
> So my question is:
>    what additional jar-files should I download to use RegexQuery class.
>
> Thanks, in advance.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29204-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 16 23:06:03 2007
Return-Path: <java-user-return-29204-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35010 invoked from network); 16 Jul 2007 23:06:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jul 2007 23:06:01 -0000
Received: (qmail 32169 invoked by uid 500); 16 Jul 2007 23:05:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32125 invoked by uid 500); 16 Jul 2007 23:05:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32110 invoked by uid 99); 16 Jul 2007 23:05:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jul 2007 16:05:56 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jul 2007 16:05:51 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IAZdC-0000WE-Tk
	for java-user@lucene.apache.org; Mon, 16 Jul 2007 16:05:30 -0700
Message-ID: <11639991.post@talk.nabble.com>
Date: Mon, 16 Jul 2007 16:05:30 -0700 (PDT)
From: psimoneschi <paul@insound.com>
To: java-user@lucene.apache.org
Subject: Failed to load Main-Class manifest attribute
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: paul@insound.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

I'm getting an error message when trying to create my Lucene index files. 
The error is as follows:

Failed to load Main-Class manifest attribute from
e:\lib\jakarta-regexp-1.3\jakarta-regexp-1.3.jar

When I clear the error message by clicking OK it seems that the index
finishes running properly.  If anyone has any insight into this problem it
would be greatly appreciated.

Thanks,

Paul.
-- 
View this message in context: http://www.nabble.com/Failed-to-load-Main-Class-manifest-attribute-tf4093581.html#a11639991
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29205-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 17 00:06:19 2007
Return-Path: <java-user-return-29205-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30384 invoked from network); 17 Jul 2007 00:06:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jul 2007 00:06:18 -0000
Received: (qmail 57214 invoked by uid 500); 17 Jul 2007 00:06:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57188 invoked by uid 500); 17 Jul 2007 00:06:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57177 invoked by uid 99); 17 Jul 2007 00:06:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jul 2007 17:06:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.59] (HELO web50305.mail.re2.yahoo.com) (206.190.38.59)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 16 Jul 2007 17:06:09 -0700
Received: (qmail 68769 invoked by uid 60001); 17 Jul 2007 00:05:47 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:Cc:MIME-Version:Content-Type:Message-ID;
  b=bP1ciNtXZBhQIz1s1jsyOZNC+NDmvwTMBB7Mnvq+8AhB/Vpeh4h0xfSIx8pDN8LoixWilzhYtI1qrkAdpb453nrqvEnmfEsb/CnRyRKthK/6mWxOi2qQWNcu42xYpFViyx0PYs2pgYbHiul2ZlN4Gb9+b8sc+LVhIpirPymFZck=;
X-YMail-OSG: 487QidwVM1lNZLZR6rkQ1w.tXRbhLTgdaXN.NdID330G7sc5DzRmx6qCFzeY9FN6Yg--
Received: from [78.3.14.193] by web50305.mail.re2.yahoo.com via HTTP; Mon, 16 Jul 2007 17:05:47 PDT
X-Mailer: YahooMailRC/651.41 YahooMailWebService/0.7.41.16
Date: Mon, 16 Jul 2007 17:05:47 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Scaling Lucene to 500 million documents - preferred architecture
To: java-user@lucene.apache.org
Cc: muraalee <muraalee@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <678371.68752.qm@web50305.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Murali (redirecting to the more appropriate java-user list)

Sounds doable.  I'd go with FSDirectory (or even its memory mapped cousin) instead of RAMDirectory - let the OS cache Lucene indices.  I'm looking at a search cluster with 3 times that many machines (but not as high-end as your 8 CPU/64GB ones) and well over 1B docs.

Otis
--
Lucene Consulting -- http://lucene-consulting.com/


----- Original Message ----
From: muraalee <muraalee@gmail.com>
To: java-dev@lucene.apache.org
Sent: Saturday, July 7, 2007 2:25:06 AM
Subject: Scaling Lucene to 500 million documents - preferred architecture


Hi Everybody,
We are building a search infrastructure using lucene to scale upto 500
million document with search < 500 ms. 

Here is my rough math on the size of content & index :
Total Documents = 500 million documents 
Size / Document = 10k / document
Index Size / Million = 2 GB / million document
Total Index size = 500 million ~ 1 TB

We are planning to partition this 1 TB index into 25 partitions  with each
partition of around 20 million documents @ 40 GB size. 

Since 1TB doesn't seem to be that much, we are debating whether we should go
for RAM memory for the whole 1 TB. Checked the prices for RAM memory ( 64 GB
/ 8 CPU boxes ) and they are very competitive.

Now the question is..  Can we use RAM Directory for all of this 1 TB or
FSDirectory is better with separate spindle for each CPU ?

We are considering 25 boxes ( 8 CPU - 64 GB boxes ) for each partition and
separate brokers to merge these results. 

Did anybody did something like this in the past ? Appreciate if you guys can
share your experiences.

thanks
Murali V

-- 
View this message in context: http://www.nabble.com/Scaling-Lucene-to-500-million-documents---preferred-architecture-tf4038794.html#a11474442
Sent from the Lucene - Java Developer mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-dev-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-dev-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29206-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 17 00:12:45 2007
Return-Path: <java-user-return-29206-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34529 invoked from network); 17 Jul 2007 00:12:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jul 2007 00:12:44 -0000
Received: (qmail 74466 invoked by uid 500); 17 Jul 2007 00:12:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74441 invoked by uid 500); 17 Jul 2007 00:12:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74426 invoked by uid 99); 17 Jul 2007 00:12:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jul 2007 17:12:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.59] (HELO web50305.mail.re2.yahoo.com) (206.190.38.59)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 16 Jul 2007 17:12:37 -0700
Received: (qmail 72140 invoked by uid 60001); 17 Jul 2007 00:12:15 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=v/g/3tbhnMNBqDV4TPF+2tdgjVlPKVe5ErVjwKtqe7xrA+3duMHuSIbdHevas2PJIV6ec6d9vPneScJKC0hTLsQ5Zi/yYVyRKg6Hygcdgrsm47aVFT0ylQuekvW4iLdSCPMuiTBXGtgDwBC9XyfbVBAhOPc9nOKa2NQy9XsGxAg=;
X-YMail-OSG: qbbnJnkVM1kIRY6pBAKVvcmWBb9aLovd0tfEDsbj9z46cgX782J4cAGL6yswkVeI8.NA7mPEMGBkTNkGgZiaSRm_D9nFS4OPNJSOaJvpunu1BSEYDxU-
Received: from [78.3.14.193] by web50305.mail.re2.yahoo.com via HTTP; Mon, 16 Jul 2007 17:12:15 PDT
X-Mailer: YahooMailRC/651.41 YahooMailWebService/0.7.41.16
Date: Mon, 16 Jul 2007 17:12:15 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: index U.K. U.S. U.N. U.V.
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <902193.71951.qm@web50305.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Use KeywordAnalyzer to leave "U.S." as-is and index it as-is.

Otis
--
Lucene Consulting -- http://lucene-consulting.com/


----- Original Message ----
From: crspan <crspan@gmail.com>
To: java-user@lucene.apache.org
Sent: Saturday, July 14, 2007 5:18:59 PM
Subject: index U.K. U.S. U.N. U.V.

Would you please advice the best practice of indexing:

  U.S.

The standard analyzer will transform it to be "us", which collide with 
"us"(we).

Thanks,

Charlie




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29207-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 17 03:23:20 2007
Return-Path: <java-user-return-29207-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20362 invoked from network); 17 Jul 2007 03:18:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jul 2007 03:18:40 -0000
Received: (qmail 25168 invoked by uid 500); 17 Jul 2007 03:17:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25136 invoked by uid 500); 17 Jul 2007 03:17:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25123 invoked by uid 99); 17 Jul 2007 03:17:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jul 2007 20:17:07 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of crspan@gmail.com designates 66.249.82.224 as permitted sender)
Received: from [66.249.82.224] (HELO wx-out-0506.google.com) (66.249.82.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jul 2007 20:17:04 -0700
Received: by wx-out-0506.google.com with SMTP id i28so1618712wxd
        for <java-user@lucene.apache.org>; Mon, 16 Jul 2007 20:16:43 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=XknZ865JnwI9lUmnnbKsOiKJtxnLaxhCkfrODzloCo4EAywsIlbKDf8v6b9mDqZnMXD/jJvlQfbAL9re8boaYMPDnio46uMpyZYO+hmkHHG5JDT5MAz79n0LA1lssWP5v0ZHmGIP3kqq/FC8/wGQlMOzoxOAxuygy8xITjgwfa4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=VgKVcQKluzEaabh3nBQb67qtNx01sp53PD1ma3dbwdXs14Qzw4KJLo5vLmWugCXbH3CRKrpIq+ottVYKKEwyDtZfIx1hSuKaQhetqp8nqqFlcQvmKm6bdHxIE4V7LFzSUuYfMZJJbNYwHgktwN7AixJ08tebeM7zQtqVcgS03as=
Received: by 10.70.39.11 with SMTP id m11mr8996585wxm.1184642203332;
        Mon, 16 Jul 2007 20:16:43 -0700 (PDT)
Received: from ?192.168.168.2? ( [72.191.15.112])
        by mx.google.com with ESMTP id 13sm31692815wrl.2007.07.16.20.16.42
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 16 Jul 2007 20:16:42 -0700 (PDT)
Message-ID: <469C3495.8020704@gmail.com>
Date: Mon, 16 Jul 2007 22:16:37 -0500
From: crspan <crspan@gmail.com>
User-Agent: Thunderbird 2.0.0.4 (Windows/20070604)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: index U.K. U.S. U.N. U.V.
References: <902193.71951.qm@web50305.mail.re2.yahoo.com>
In-Reply-To: <902193.71951.qm@web50305.mail.re2.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Are we sure about KeywordAnalyzer here? Which suppose to  "Tokenizes" 
the entire stream as a single token. (useful for data like zip codes, 
ids, and some product names.)

In the scenario we are discussing,  U.S. is  just a  token within the 
text and we still would like to leverage from StandardAnalyzer for all 
other goodies. I am sorry for the incomplete set up in previous message.

More or less, I expect somewhere we can instruct StandardTokenizer.jj 
that U.S. is a special token (even it is indeed an ACRONYM) and we 
prefer to index it as U.S. as is. Can we do that?

Charlie



Otis Gospodnetic wrote:
> Use KeywordAnalyzer to leave "U.S." as-is and index it as-is.
>
> Otis
> --
> Lucene Consulting -- http://lucene-consulting.com/
>
>
> ----- Original Message ----
> From: crspan <crspan@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Saturday, July 14, 2007 5:18:59 PM
> Subject: index U.K. U.S. U.N. U.V.
>
> Would you please advice the best practice of indexing:
>
>   U.S.
>
> The standard analyzer will transform it to be "us", which collide with 
> "us"(we).
>
> Thanks,
>
> Charlie


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29208-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 17 04:52:10 2007
Return-Path: <java-user-return-29208-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44924 invoked from network); 17 Jul 2007 04:52:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jul 2007 04:52:09 -0000
Received: (qmail 71651 invoked by uid 500); 17 Jul 2007 04:51:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71588 invoked by uid 500); 17 Jul 2007 04:51:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71533 invoked by uid 99); 17 Jul 2007 04:51:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jul 2007 21:51:56 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jul 2007 21:51:53 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IAf24-0007tC-6g
	for java-user@lucene.apache.org; Mon, 16 Jul 2007 21:51:32 -0700
Message-ID: <11643027.post@talk.nabble.com>
Date: Mon, 16 Jul 2007 21:51:32 -0700 (PDT)
From: kumarlimbu <kumarlimbu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Serving remote lucene client - RMI vs HTTP
In-Reply-To: <359a92830707161340n23a02ba2xa3de2ad2679672b3@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: kumarlimbu@gmail.com
References: <11608209.post@talk.nabble.com> <A955EA1F8FE31749AEC8C998082F6C7C01AC1153@hai01.hippo.local> <359a92830707161340n23a02ba2xa3de2ad2679672b3@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thank you everyone for your response,

Size of our index is around 10GB. Our queries usually take similar response
times. Only exception is when we are updating our index and after the index
has been switched to a new one from the old one.

Yesterday, as Grant and Hossman pointed us to Solr and we will definitely
look at it. Solr looks like a very good implementation of searching using
lucene clusters. One of the concern for implementing searching using Solr is
that our current application is highly customized and we don't know how
customizable Solr really is (rather the ease with which we can do it). Also
Solr doesn't support queryFilter out of the box (Hossman: there's nothing to
stop a solr request handler from using QueryFilter's if they want). How much
extra work is it?

But we are very much interested in how Solr implements index distribution
over more than 1 machine. If you guys can provide other alternatives or
advise then please let me know. :)




Erick Erickson wrote:
> 
> Another question would be what queries take the longest. Are your
> response times pretty constant on a per-query basis or are there
> outliers that could perhaps point to a different solution?
> 
> Finally, what is the size of your index? The total number of documents
> is certainly useful, but so is the finished index size. I can put a
> million
> document in a 100M index or a 100G index, and size does matter <G>...
> 
> Best
> Erick
> 
> On 7/16/07, Ard Schrijvers <a.schrijvers@hippo.nl> wrote:
>>
>> Hello,
>>
>> > Hi EVeryone,
>> >
>> > Thank you all for your replies.
>> >
>> > And reply to your questions Grant:
>> > We have more than 3 Million document in our index.
>> > We get more than 150,000 searches (queries) per day. We
>> > expect this no to go
>> > up.
>>
>> Just curious, but suppose those 150.000 searches are done during 8 hours
>> a
>> day, that means around 6 searches a second...that is not too much is it?
>>
>> Perhaps a too trivial question, but do you only re-open the index reader
>> when there is actually something changed in the index (or are you
>> crawling
>> all day? perhaps you should only crawl during the night)? Reopening the
>> index over and over again while not needed is inefficient. Also, there
>> are
>> some caching mechanisms around
>>
>> Furthermore, if you use sorting in your query, you might gain much speed
>> by indexing these fields differently (like sorting on some large field is
>> very expensive)
>>
>> Then of course, do you use range searches?
>>
>> Also, did you check setting maxmemory of your jvm higher?
>>
>> One more suggestion: try to open your index with "luke" and see wether
>> "luke" is faster in doing the searches. If so, you certainly can find
>> some
>> simple ways to increase the performance,
>>
>> Ard
>>
>> > This count only includes actual user search and doesn't
>> > include robot
>> > searches and other internal searches (for sending emails to user etc).
>> > And our final queries sent to lucene are quite complicated.
>> > This is because
>> > we need to confirm to a lot of criteria (some are set by
>> > users and some are
>> > internal logics). I don't think we can simplify our queries.
>> >
>> > And importantly we are looking to scale to a larger no. of
>> > traffic. Our
>> > current performance in terms of speed is ok.
>> >
>> > We are not sure about implementing using Solr because we
>> > crawl only specific
>> > type of sites and our crawling mechanism has proven to be
>> > quite stable. We
>> > are only looking to scale to larger no. of users and doing a new
>> > implementation using Solr might be an overkill as time is a
>> > huge factor.
>> >
>> > Best Regards,
>> > Kumar
>> >
>> >
>> > Grant Ingersoll-6 wrote:
>> > >
>> > > Hi Kumar,
>> > >
>> > > I am curious about where the bulk of time was spent in
>> > Lucene.  I am
>> > > not doubting your numbers or analysis, just want to know if
>> > there was
>> > > anything that could be improved in Lucene and make sure you are
>> > > solidly in need of going to multiple machines as it adds an extra
>> > > level of complexity.  Can you provide info about number of
>> > documents,
>> > > # of updates, # of queries etc. ?  What kind of analysis, etc. are
>> > > you doing?  That being said, putting the web app on one
>> > machine and
>> > > the search application on the other makes sense much in the
>> > same way
>> > > it makes sense in most cases to do this for a database.
>> > >
>> > > As for POST/GET vs. RMI, have a look at Solr, esp. its replication
>> > > capabilities for load balancing search servers.  I think it
>> > answers
>> > > the question in favor of the POST/GET approach.  In fact,
>> > you may be
>> > > able to drop in Solr to your situation w/o too much work.
>> > >
>> > > Cheers,
>> > > Grant
>> > >
>> > >
>> > > On Jul 15, 2007, at 10:10 PM, kumarlimbu wrote:
>> > >
>> > >>
>> > >> Hi Everyone,
>> > >>
>> > >> We are using lucene,nutch and spring framework to create a
>> > specialized
>> > >> search engine. Due to growing traffic we are trying to scale. By
>> > >> doing some
>> > >> tests we found out that the bottle neck was lucene search.
>> > We used
>> > >> some
>> > >> heavy traffic simulation and logged the time taken by each
>> > portion
>> > >> of the
>> > >> server response and found out that the bulk of the time
>> > was spent in
>> > >> searching from lucene index.
>> > >>
>> > >> In order to accomodate higher traffic we are planning on
>> > splitting our
>> > >> application in 2 portions:
>> > >> 1. Web application (on 1 machine)
>> > >> 2. Search application (one more than 1 machine)
>> > >>
>> > >> Each one of the application will reside on a (possibly) separate
>> > >> machines.
>> > >> We are looking forward to scaling by adding more than 1 machine
>> > >> dedicated to
>> > >> searching as lucene search seems to be the bottleneck.
>> > >>
>> > >> Web application will provide the front-end to the user.
>> > All static
>> > >> pages,
>> > >> images and the style information will reside on this machine. It
>> > >> will also
>> > >> serve dynamic pages but all the searching will take place on the
>> > >> search
>> > >> application. Web application will send search parameters
>> > to the search
>> > >> application and after searching, it will send back the results to
>> > >> the web
>> > >> application which will format it and display it to the user.
>> > >>
>> > >> What we are unable to decide is whether to use RMI (
>> > >>
>> http://www.soft-amis.com/index.html?return=http://www.soft-amis.com/
>> >> cluster4spring/index.html
>> >> cluster4spring  )or simple HTTP POST/GET request with response in XML
>> >> format. We did some research and found out that RMI (with clustering
>> >> support) might be more suitable for our needs. Unfortunately our
>> >> team is not
>> >> familiar with RMI and so we don't know if there will be any issues
>> >> with it
>> >> during implementation.
>> >> Advantage of using simple GET/POST is we have more control which
>> >> searcher
>> >> app to use and when. An important criteria for us is to disable
>> >> searching
>> >> from the searcher app who's index is being updated. This is very
>> >> important
>> >> for us. Is there anyway in RMI to inform the web (client)
>> >> application that a
>> >> particular server is unavailable (due to index being updated).
>> >>
>> >> We would also like to know if anybody has implemented lucene
>> >> searching in a
>> >> similar fashion. Thanks for your help.
>> >>
>> >> Kumar Limbu
>> >>
>> >> --
>> >> View this message in context: http://www.nabble.com/Serving-remote-
>> >> lucene-client---RMI-vs-HTTP-tf4084167.html#a11608209
>> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>> >
>> > --------------------------
>> > Grant Ingersoll
>> > Center for Natural Language Processing
>> > http://www.cnlp.org/tech/lucene.asp
>> >
>> > Read the Lucene Java FAQ at
>> http://wiki.apache.org/lucene-java/LuceneFAQ
>> >
>> >
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>> >
>>
>> --
>> View this message in context:
>> http://www.nabble.com/Serving-remote-lucene-client---RMI-vs-HTTP-tf4084167.html#a11609007
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/Serving-remote-lucene-client---RMI-vs-HTTP-tf4084167.html#a11643027
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29209-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 17 04:59:53 2007
Return-Path: <java-user-return-29209-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49127 invoked from network); 17 Jul 2007 04:59:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jul 2007 04:59:51 -0000
Received: (qmail 99809 invoked by uid 500); 17 Jul 2007 04:59:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99765 invoked by uid 500); 17 Jul 2007 04:59:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99745 invoked by uid 99); 17 Jul 2007 04:59:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jul 2007 21:59:45 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_MESSAGE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mnrz57@gmail.com designates 209.85.132.251 as permitted sender)
Received: from [209.85.132.251] (HELO an-out-0708.google.com) (209.85.132.251)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jul 2007 21:59:42 -0700
Received: by an-out-0708.google.com with SMTP id c5so375618anc
        for <java-user@lucene.apache.org>; Mon, 16 Jul 2007 21:59:21 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=aD8eBub3JP2nrGQxlzGHfn2+suxqHAknFLhwrB/JBTt2qqDip8a1TS++xsqkL8RrmE+J0y5qdZJeLRIO48AkRS5Lo76rulw6zAHDAYrVEjBvAgGj56XFsrwIrcuYEj792lfZWdVod28GA/R9sWdl9CydF7pdpUhjq4gUWUiSaik=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=djqVJFyt1y/KzBFgoB/lAlzVSniB4r5N+Z71zIphl1XGvexnXUQ1bY+qtMswLR52skrLw4Q8k/PSe7QKGXhitILzbHji2eE/c9lq5wX1jvtt/cpjBXrS0kNjTAChEcJ/841IJa3UJ+rmXkfMCLKjpefGAgk30bOiJV6e/GZGTwA=
Received: by 10.100.105.18 with SMTP id d18mr22660anc.1184648361764;
        Mon, 16 Jul 2007 21:59:21 -0700 (PDT)
Received: by 10.100.9.13 with HTTP; Mon, 16 Jul 2007 21:59:21 -0700 (PDT)
Message-ID: <34b8543c0707162159o2931a838t51217fed3790986f@mail.gmail.com>
Date: Tue, 17 Jul 2007 08:29:21 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: two questions about NumberTools
In-Reply-To: <700cf4dd0707161032ucc51949web237e8faed46463@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_64321_27486235.1184648361738"
References: <34b8543c0707160001q235f7589uc188f9e99b74672e@mail.gmail.com>
	 <700cf4dd0707161032ucc51949web237e8faed46463@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_64321_27486235.1184648361738
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks Dima
the first link is very nice and I put some comment on that if you take a
look again but it has no decode method.
anyway, I decided to use solr solution

thanks again :)

On 7/16/07, Dima May <dimamay@gmail.com> wrote:
>
> Mohammad,
>
> see for my 2 cents below,
>
> Good luck.
>
> D
>
>
> On 7/16/07, Mohammad Norouzi <mnrz57@gmail.com> wrote:
> >
> > Hello
> > I have problem in range queries, for example, I have queries like
> > "field:[1
> > TO 25]" or "field:[1.1 TO 11.25]"
> > currently these queries not work. field:[20 TO 25] works fine but when
> the
> > both limits of the range have different number of digits the query won't
> > work. so the solution is NumberTools.
> >
> 1 - the NumberTools utility has two methods longToString() and
> > stringToLong(). how about the double or float  numbers?? I think it
> should
> > be extends to support more data types
>
>
> Check out these resources:
> 1. https://issues.apache.org/jira/browse/LUCENE-530
> 2. Solr has a class that will help you encode/decode floats for lucene
> range
> queries and sorting:
> http://lucene.apache.org/solr/api/org/apache/solr/util/NumberUtils.html
> 3. Alternatively you can pad the floats with zeros like this: 000001.3000.
> As long as the padding is consistent between indexing and querying your
> range queries and sorting should work fine as appending zeros enforces
> lexicographical order.
>
> 2 - suppose we are indexing a bunch of information and a field is in long
> > that we need to apply range queries on that later.
> > now I have a query like "fieldone:(just for test) AND field_long:[1 TO
> > 25]",
> > the question is whether this query returns correct result? because
> > field_long already encoded with longToString() method and in the index
> > files
> > you can't find any real value say, 1 or 25 or 10 ...
> > do I need to use stringToLong() method while I am building query?
>
>
> Yes the search query must "match" whats in the index so you would have to
> encode the value before performing the search. The good news are that you
> can encapsulate that logic into the custom analyzer and custom query
> parser.
> In query parser you should implement getRangeQuery.
>
> any comment would be of great help
> >
> > --
> > Regards,
> > Mohammad
> > --------------------------
> > see my blog: http://brainable.blogspot.com/
> > another in Persian: http://fekre-motefavet.blogspot.com/
> >
>



-- 
Regards,
Mohammad
--------------------------
see my blog: http://brainable.blogspot.com/
another in Persian: http://fekre-motefavet.blogspot.com/

------=_Part_64321_27486235.1184648361738--

From java-user-return-29210-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 17 05:35:06 2007
Return-Path: <java-user-return-29210-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54348 invoked from network); 17 Jul 2007 05:35:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jul 2007 05:35:04 -0000
Received: (qmail 6370 invoked by uid 500); 17 Jul 2007 05:05:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6334 invoked by uid 500); 17 Jul 2007 05:05:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6323 invoked by uid 99); 17 Jul 2007 05:05:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jul 2007 22:05:43 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of ryantxu@gmail.com designates 64.233.162.236 as permitted sender)
Received: from [64.233.162.236] (HELO nz-out-0506.google.com) (64.233.162.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jul 2007 22:05:39 -0700
Received: by nz-out-0506.google.com with SMTP id i28so925372nzi
        for <java-user@lucene.apache.org>; Mon, 16 Jul 2007 22:05:18 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=QM9RVZ11TaWaJcdoRxx9g5nnZjIwHtr031s5xfK5OMNrhTapXUaK21si/+WwtVg3p1U0KvHNm+XiuZt+0HpRCw0GQp3Q8doRWJXvSv9hy/HZHO65nSm4/mMOD43HsIN20PE2df4ACncq23JS7D3533saV4KDTbXWkYaqhr89S44=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=F7ujy5LfSQHNYhdgyl7+fHm/8ig7PLaLwkm4xRZ/imFMrubo6NkbqUqulj8FSyQEGAlvpVUqZecvNASbf+De2D1KsFho1kBrlq/A4yy0objl5+zQp5pPDVJ9ukadElBWku0nTINujnI5gI1Kxvo3zVzs02ojtugCsEV/W/fsFSU=
Received: by 10.141.1.2 with SMTP id d2mr18137rvi.1184648717907;
        Mon, 16 Jul 2007 22:05:17 -0700 (PDT)
Received: from ?127.0.0.1? ( [24.7.67.61])
        by mx.google.com with ESMTP id g39sm4928861rvb.2007.07.16.22.05.16
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 16 Jul 2007 22:05:17 -0700 (PDT)
Message-ID: <469C4DB1.2080108@gmail.com>
Date: Mon, 16 Jul 2007 22:03:45 -0700
From: Ryan McKinley <ryantxu@gmail.com>
User-Agent: Thunderbird 2.0.0.4 (Windows/20070604)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Serving remote lucene client - RMI vs HTTP
References: <11608209.post@talk.nabble.com> <A955EA1F8FE31749AEC8C998082F6C7C01AC1153@hai01.hippo.local> <359a92830707161340n23a02ba2xa3de2ad2679672b3@mail.gmail.com> <11643027.post@talk.nabble.com>
In-Reply-To: <11643027.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


> customizable Solr really is (rather the ease with which we can do it). Also
> Solr doesn't support queryFilter out of the box (Hossman: there's nothing to
> stop a solr request handler from using QueryFilter's if they want). How much
> extra work is it?

out of the box, solr supports query filters.  check:
http://wiki.apache.org/solr/CommonQueryParameters#head-6522ef80f22d0e50d2f12ec487758577506d6002

If you have custom queries you need to make and using the standard 
interface is not sufficient, it is relatively easy to write a custom 
request handler.  Assuming you are used to working with lucene, writing 
a custom handler should be straight forward.

ryan


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29213-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 17 10:38:46 2007
Return-Path: <java-user-return-29213-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7701 invoked from network); 17 Jul 2007 10:21:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jul 2007 10:21:30 -0000
Received: (qmail 45289 invoked by uid 500); 17 Jul 2007 09:13:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45226 invoked by uid 500); 17 Jul 2007 09:13:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45212 invoked by uid 99); 17 Jul 2007 09:13:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Jul 2007 02:13:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [213.162.48.15] (HELO soufre.accelance.net) (213.162.48.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Jul 2007 02:13:30 -0700
Received: from [192.168.3.147] (LSt-Amand-152-32-31-90.w82-127.abo.wanadoo.fr [82.127.74.90])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by soufre.accelance.net (Postfix) with ESMTP id 021D85D68
	for <java-user@lucene.apache.org>; Tue, 17 Jul 2007 11:13:04 +0200 (CEST)
Message-ID: <469C881A.1040200@garambrogne.net>
Date: Tue, 17 Jul 2007 11:12:58 +0200
From: Mathieu Lecarme <mathieu@garambrogne.net>
User-Agent: Thunderbird 2.0.0.4 (X11/20070604)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: search through all fields
References: <003401c7c7f2$21fb5140$970fda80@libraria.ucsf.edu>	 <469C768D.4030608@garambrogne.net> <34b8543c0707170113h163ad5feqe25e58de3c378cc6@mail.gmail.com>
In-Reply-To: <34b8543c0707170113h163ad5feqe25e58de3c378cc6@mail.gmail.com>
X-Enigmail-Version: 0.95.2
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

http://www.opensymphony.com/compass/
The project is free, following Lucene version quickly, the forum is
great, and the lead developer is quick reacting.

M.


Mohammad Norouzi a crit :
> Mathieu,
> I need an object mapper for lucene would you please give me the
> Compass web
> site? is it open source?
>
> thanks


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29211-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 17 10:51:56 2007
Return-Path: <java-user-return-29211-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43617 invoked from network); 17 Jul 2007 10:51:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jul 2007 10:51:54 -0000
Received: (qmail 28408 invoked by uid 500); 17 Jul 2007 07:58:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28371 invoked by uid 500); 17 Jul 2007 07:58:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28360 invoked by uid 99); 17 Jul 2007 07:58:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Jul 2007 00:58:33 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [213.162.48.15] (HELO soufre.accelance.net) (213.162.48.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Jul 2007 00:58:29 -0700
Received: from [192.168.3.147] (LSt-Amand-152-32-31-90.w82-127.abo.wanadoo.fr [82.127.74.90])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by soufre.accelance.net (Postfix) with ESMTP id 70AE75CCC
	for <java-user@lucene.apache.org>; Tue, 17 Jul 2007 09:58:07 +0200 (CEST)
Message-ID: <469C768D.4030608@garambrogne.net>
Date: Tue, 17 Jul 2007 09:58:05 +0200
From: Mathieu Lecarme <mathieu@garambrogne.net>
User-Agent: Thunderbird 2.0.0.4 (X11/20070604)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: search through all fields
References: <003401c7c7f2$21fb5140$970fda80@libraria.ucsf.edu>
In-Reply-To: <003401c7c7f2$21fb5140$970fda80@libraria.ucsf.edu>
X-Enigmail-Version: 0.95.2
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Sorry, I use Compass, an object mapper for Lucene, and it provides a
special field "all", I thought it was a Lucene feature.

M.

Renaud Waldura a crit :
> Often documents can be divided in "metadata" and "contents" sections. Say
> you're indexing Web pages, you could index them with HEAD data all in one
> field, and the BODY content in another. While also creating separate fields
> for every HEAD field, e.g. TITLE etc.
>
> At search time, you rewrite every query to become "+head:(query)
> +body:(query)" using MultiFieldQueryParser. This way you don't have to
> create an "all" field that contains everything, head + body.
>
> I will increase your index size, no doubt. Might increase indexing time too.
>
> --Renaud
>  
>
> -----Original Message-----
> From: Mohammad Norouzi [mailto:mnrz57@gmail.com] 
> Sent: Sunday, July 15, 2007 9:40 PM
> To: java-user@lucene.apache.org
> Subject: Re: search through all fields
>
> On 7/14/07, Grant Ingersoll <grant.ingersoll@gmail.com> wrote:
>   
>> I think he means index all your different fields into a single field 
>> named "all".  Not sure what makes it special, it is just like any 
>> other field.
>>
>>     
>
>
> but that really impossible ! because I have near millions records to be
> indexed so this job will decrease the time of indexing and increase the
> index size
>
> --
> Regards,
> Mohammad
> --------------------------
> see my blog: http://brainable.blogspot.com/ another in Persian:
> http://fekre-motefavet.blogspot.com/
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29212-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 17 11:31:52 2007
Return-Path: <java-user-return-29212-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49824 invoked from network); 17 Jul 2007 11:12:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jul 2007 11:11:47 -0000
Received: (qmail 53475 invoked by uid 500); 17 Jul 2007 08:14:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53249 invoked by uid 500); 17 Jul 2007 08:14:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53238 invoked by uid 99); 17 Jul 2007 08:14:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Jul 2007 01:14:02 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_MESSAGE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mnrz57@gmail.com designates 209.85.132.244 as permitted sender)
Received: from [209.85.132.244] (HELO an-out-0708.google.com) (209.85.132.244)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Jul 2007 01:13:59 -0700
Received: by an-out-0708.google.com with SMTP id c5so385258anc
        for <java-user@lucene.apache.org>; Tue, 17 Jul 2007 01:13:39 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=fWNVZTeibWRD1NeG0dD0dwOiwQhxD2IBMg0rWf3+YBODK3lpki+BZ/aktAbBZb6DCgLIkJoS5XXpdJKnUdBW0QAXD6O3Nk22+c14/jNZKsWK4x2oKZ2+8LSFrCSm9zRqdAlu1qtkNvshAvNAUn3cY36TnnzzRyXbOS1v0EWYUvY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=bVLdRpUZHB5hHYod8kpOdFR5wOSfY8xvmLZntz44NbtBCE56cwRucBQbrS9FJaascMrDctukVuMDDNsTfPGdIPXdnvAFZ07HNqXIxEjfZzuuvFd7pf64wKSieYFZljUnVR4Nmex8uH86JtCm2Dhg+IFz8CY+u/mrbrs1HHuM1F4=
Received: by 10.100.31.2 with SMTP id e2mr68741ane.1184660019071;
        Tue, 17 Jul 2007 01:13:39 -0700 (PDT)
Received: by 10.100.9.13 with HTTP; Tue, 17 Jul 2007 01:13:39 -0700 (PDT)
Message-ID: <34b8543c0707170113h163ad5feqe25e58de3c378cc6@mail.gmail.com>
Date: Tue, 17 Jul 2007 11:43:39 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: search through all fields
In-Reply-To: <469C768D.4030608@garambrogne.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_65705_23540494.1184660019038"
References: <003401c7c7f2$21fb5140$970fda80@libraria.ucsf.edu>
	 <469C768D.4030608@garambrogne.net>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_65705_23540494.1184660019038
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: base64
Content-Disposition: inline

TWF0aGlldSwKSSBuZWVkIGFuIG9iamVjdCBtYXBwZXIgZm9yIGx1Y2VuZSB3b3VsZCB5b3UgcGxl
YXNlIGdpdmUgbWUgdGhlIENvbXBhc3Mgd2ViCnNpdGU/IGlzIGl0IG9wZW4gc291cmNlPwoKdGhh
bmtzCgpPbiA3LzE3LzA3LCBNYXRoaWV1IExlY2FybWUgPG1hdGhpZXVAZ2FyYW1icm9nbmUubmV0
PiB3cm90ZToKPgo+IFNvcnJ5LCBJIHVzZSBDb21wYXNzLCBhbiBvYmplY3QgbWFwcGVyIGZvciBM
dWNlbmUsIGFuZCBpdCBwcm92aWRlcyBhCj4gc3BlY2lhbCBmaWVsZCAiYWxsIiwgSSB0aG91Z2h0
IGl0IHdhcyBhIEx1Y2VuZSBmZWF0dXJlLgo+Cj4gTS4KPgo+IFJlbmF1ZCBXYWxkdXJhIGEgw6lj
cml0IDoKPiA+IE9mdGVuIGRvY3VtZW50cyBjYW4gYmUgZGl2aWRlZCBpbiAibWV0YWRhdGEiIGFu
ZCAiY29udGVudHMiIHNlY3Rpb25zLgo+IFNheQo+ID4geW91J3JlIGluZGV4aW5nIFdlYiBwYWdl
cywgeW91IGNvdWxkIGluZGV4IHRoZW0gd2l0aCBIRUFEIGRhdGEgYWxsIGluCj4gb25lCj4gPiBm
aWVsZCwgYW5kIHRoZSBCT0RZIGNvbnRlbnQgaW4gYW5vdGhlci4gV2hpbGUgYWxzbyBjcmVhdGlu
ZyBzZXBhcmF0ZQo+IGZpZWxkcwo+ID4gZm9yIGV2ZXJ5IEhFQUQgZmllbGQsIGUuZy4gVElUTEUg
ZXRjLgo+ID4KPiA+IEF0IHNlYXJjaCB0aW1lLCB5b3UgcmV3cml0ZSBldmVyeSBxdWVyeSB0byBi
ZWNvbWUgIitoZWFkOihxdWVyeSkKPiA+ICtib2R5OihxdWVyeSkiIHVzaW5nIE11bHRpRmllbGRR
dWVyeVBhcnNlci4gVGhpcyB3YXkgeW91IGRvbid0IGhhdmUgdG8KPiA+IGNyZWF0ZSBhbiAiYWxs
IiBmaWVsZCB0aGF0IGNvbnRhaW5zIGV2ZXJ5dGhpbmcsIGhlYWQgKyBib2R5Lgo+ID4KPiA+IEkg
d2lsbCBpbmNyZWFzZSB5b3VyIGluZGV4IHNpemUsIG5vIGRvdWJ0LiBNaWdodCBpbmNyZWFzZSBp
bmRleGluZyB0aW1lCj4gdG9vLgo+ID4KPiA+IC0tUmVuYXVkCj4gPgo+ID4KPiA+IC0tLS0tT3Jp
Z2luYWwgTWVzc2FnZS0tLS0tCj4gPiBGcm9tOiBNb2hhbW1hZCBOb3JvdXppIFttYWlsdG86bW5y
ejU3QGdtYWlsLmNvbV0KPiA+IFNlbnQ6IFN1bmRheSwgSnVseSAxNSwgMjAwNyA5OjQwIFBNCj4g
PiBUbzogamF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnCj4gPiBTdWJqZWN0OiBSZTogc2VhcmNo
IHRocm91Z2ggYWxsIGZpZWxkcwo+ID4KPiA+IE9uIDcvMTQvMDcsIEdyYW50IEluZ2Vyc29sbCA8
Z3JhbnQuaW5nZXJzb2xsQGdtYWlsLmNvbT4gd3JvdGU6Cj4gPgo+ID4+IEkgdGhpbmsgaGUgbWVh
bnMgaW5kZXggYWxsIHlvdXIgZGlmZmVyZW50IGZpZWxkcyBpbnRvIGEgc2luZ2xlIGZpZWxkCj4g
Pj4gbmFtZWQgImFsbCIuICBOb3Qgc3VyZSB3aGF0IG1ha2VzIGl0IHNwZWNpYWwsIGl0IGlzIGp1
c3QgbGlrZSBhbnkKPiA+PiBvdGhlciBmaWVsZC4KPiA+Pgo+ID4+Cj4gPgo+ID4KPiA+IGJ1dCB0
aGF0IHJlYWxseSBpbXBvc3NpYmxlICEgYmVjYXVzZSBJIGhhdmUgbmVhciBtaWxsaW9ucyByZWNv
cmRzIHRvIGJlCj4gPiBpbmRleGVkIHNvIHRoaXMgam9iIHdpbGwgZGVjcmVhc2UgdGhlIHRpbWUg
b2YgaW5kZXhpbmcgYW5kIGluY3JlYXNlIHRoZQo+ID4gaW5kZXggc2l6ZQo+ID4KPiA+IC0tCj4g
PiBSZWdhcmRzLAo+ID4gTW9oYW1tYWQKPiA+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4g
PiBzZWUgbXkgYmxvZzogaHR0cDovL2JyYWluYWJsZS5ibG9nc3BvdC5jb20vIGFub3RoZXIgaW4g
UGVyc2lhbjoKPiA+IGh0dHA6Ly9mZWtyZS1tb3RlZmF2ZXQuYmxvZ3Nwb3QuY29tLwo+ID4KPiA+
Cj4gPgo+ID4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4gPiBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVz
ZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcKPiA+IEZvciBhZGRpdGlvbmFsIGNvbW1h
bmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnCj4gPgo+ID4KPiA+
Cj4KPgo+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLQo+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11
bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZwo+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBl
LW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnCj4KPgoKCi0tIApSZWdhcmRz
LApNb2hhbW1hZAotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpzZWUgbXkgYmxvZzogaHR0cDov
L2JyYWluYWJsZS5ibG9nc3BvdC5jb20vCmFub3RoZXIgaW4gUGVyc2lhbjogaHR0cDovL2Zla3Jl
LW1vdGVmYXZldC5ibG9nc3BvdC5jb20vCg==
------=_Part_65705_23540494.1184660019038--

From java-user-return-29214-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 17 12:18:25 2007
Return-Path: <java-user-return-29214-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51392 invoked from network); 17 Jul 2007 11:20:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jul 2007 11:20:10 -0000
Received: (qmail 77077 invoked by uid 500); 17 Jul 2007 11:17:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76986 invoked by uid 500); 17 Jul 2007 11:17:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76975 invoked by uid 99); 17 Jul 2007 11:17:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Jul 2007 04:17:38 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Jul 2007 04:17:33 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IAl3I-0000hD-Im
	for java-user@lucene.apache.org; Tue, 17 Jul 2007 04:17:12 -0700
Message-ID: <11647342.post@talk.nabble.com>
Date: Tue, 17 Jul 2007 04:17:12 -0700 (PDT)
From: neetika <neetika.markanday@iflexsolutions.com>
To: java-user@lucene.apache.org
Subject: getting problem while indexing pdf files with pdfbox
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: neetika.markanday@iflexsolutions.com
X-Virus-Checked: Checked by ClamAV on apache.org


http://www.nabble.com/file/p11647342/DRra0026.pdf DRra0026.pdf 

hi all,

 i am able to convert a pdf in to a text file using pdfbox. 
 and this is the code that I used, but I am not able to index it
 
// code for parsing and making index

		public Document getDocument(InputStream is)
		{
		COSDocument cosDoc = null;
		try {
			PDFParser parser = new PDFParser(is);
			parser.parse();
		cosDoc = parser.getDocument();
		}
		catch (IOException e) {
		e.printStackTrace();
				}
		String docText = null;
		try {
		PDFTextStripper stripper = new PDFTextStripper();
		docText = stripper.getText(new PDDocument(cosDoc));
		}
		catch (IOException e) {
			e.printStackTrace();
		}
		Document doc = new Document();
		if (docText != null) {
		doc.add(new Field("body", docText, Field.Store.YES, 
        		Field.Index.TOKENIZED));
		}
		return doc;
		}
		
		public static void main(String[] args) throws Exception {
			TestPDFParser handler = new TestPDFParser();
			
		Document doc = handler.getDocument(new FileInputStream(new
File("D:\\lucenePdf\\DRra0026.pdf")));

		System.out.println(doc);
		
		//Following code is for making index
		
		IndexWriter f_writer = new IndexWriter("D:\\lucenePdf", new
StandardAnalyzer(), true);

		f_writer.addDocument(doc);
		
		}
		}
 //code for searching a particular string..

 public static void main(String[] args) throws Exception {
        String indexDir = "D:\\lucenePdf";
        String q = "RA0083";


        Directory fsDir = FSDirectory.getDirectory(indexDir);
        IndexSearcher is = new IndexSearcher(fsDir);

        Query query = new QueryParser("body", new
StandardAnalyzer()).parse(q); 

        Hits hits = is.search(query);
        System.out.println("Found " + hits.length() + " documents that
matched query '" + q + "':");
        for (int i = 0; i < hits.length(); i++) {
            Document doc = hits.doc(i);
            
        }
    }


When I run the above code...I get folowing output as a result of running
indexer class

Document<stored/uncompressed,indexed,tokenized<body:000099062000061300000021000000100110468147201102006PAYOUT
: RA0083 
000099062000062000000021000000100220468148001102006PAYOUT : RA0083 
000099062000063000000021000000100330468153601102006PAYOUT : RA0083 
000099062000064700000021000000100440468155401102006PAYOUT : RA0083 
000099062000065700000021000000100550468156201102006PAYOUT : RA0083 

and following  files are generated in the specified path..

segments.gen
write.lock
segments_4


but when I run the search class it gives the result as:

Found 0 documents that matched query 'RA0083':

I am also attaching the corresponding pdf file for reference.
It seems as the index is not getting created..

Please help me with some of your inputs,it will be very helpfull for me.
-- 
View this message in context: http://www.nabble.com/getting-problem-while-indexing-pdf-files-with-pdfbox-tf4096205.html#a11647342
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29215-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 17 13:52:47 2007
Return-Path: <java-user-return-29215-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40265 invoked from network); 17 Jul 2007 13:52:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jul 2007 13:52:45 -0000
Received: (qmail 61583 invoked by uid 500); 17 Jul 2007 13:52:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61546 invoked by uid 500); 17 Jul 2007 13:52:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61529 invoked by uid 99); 17 Jul 2007 13:52:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Jul 2007 06:52:39 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Jul 2007 06:52:34 -0700
Received: by ug-out-1314.google.com with SMTP id c2so158622ugf
        for <java-user@lucene.apache.org>; Tue, 17 Jul 2007 06:52:12 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=REmBE8w3n3/3Txf+0dSWzhavvDHwmyjFN3H3cQ2cldu68ESARwcssJjQonySAD0BJtQMrkQmH9xpwh6SYwrsm2U6LPhVwiHo63687PHpe8WOaipPTorUkk1Z7KbhsEH0bMGAv3G7oFXPK7LdQQNIgMTKofzOkcdi+VmTmA7W8gY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Xp7swenUzgmXEU8QcqOnyddD7Wk6MaUY+KcFO3+Z7YAJ2qoKmYyjPJYwU7qtdd6vdyuLCrBvme5qo2vGD1M2+sMjUfQK3ILcMJtYI5AroK9Lxb+MIAHdLbhySvATMKeld5pSw8DHmb5lL3dNUlknMNFY8QXITOG5v+wXyQ67qeo=
Received: by 10.82.105.13 with SMTP id d13mr462870buc.1184680332039;
        Tue, 17 Jul 2007 06:52:12 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Tue, 17 Jul 2007 06:52:11 -0700 (PDT)
Message-ID: <359a92830707170652o6de17af5u38bb4f7bbf6a565d@mail.gmail.com>
Date: Tue, 17 Jul 2007 09:52:12 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: getting problem while indexing pdf files with pdfbox
In-Reply-To: <11647342.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_57364_28318025.1184680331999"
References: <11647342.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_57364_28318025.1184680331999
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Offhand I'd assume that your problem is using PDFbox. Have you
tried printing out the docText string you get  back from

docText = stripper.getText(new PDDocument(cosDoc))?

I'd recommend you assure yourself that you get valid text back from
the PDF document before worrying about indexing it.

Best
Erick

On 7/17/07, neetika <neetika.markanday@iflexsolutions.com> wrote:
>
>
> http://www.nabble.com/file/p11647342/DRra0026.pdf DRra0026.pdf
>
> hi all,
>
> i am able to convert a pdf in to a text file using pdfbox.
> and this is the code that I used, but I am not able to index it
>
> // code for parsing and making index
>
>                 public Document getDocument(InputStream is)
>                 {
>                 COSDocument cosDoc = null;
>                 try {
>                         PDFParser parser = new PDFParser(is);
>                         parser.parse();
>                 cosDoc = parser.getDocument();
>                 }
>                 catch (IOException e) {
>                 e.printStackTrace();
>                                 }
>                 String docText = null;
>                 try {
>                 PDFTextStripper stripper = new PDFTextStripper();
>                 docText = stripper.getText(new PDDocument(cosDoc));
>                 }
>                 catch (IOException e) {
>                         e.printStackTrace();
>                 }
>                 Document doc = new Document();
>                 if (docText != null) {
>                 doc.add(new Field("body", docText, Field.Store.YES,
>                         Field.Index.TOKENIZED));
>                 }
>                 return doc;
>                 }
>
>                 public static void main(String[] args) throws Exception {
>                         TestPDFParser handler = new TestPDFParser();
>
>                 Document doc = handler.getDocument(new FileInputStream(new
> File("D:\\lucenePdf\\DRra0026.pdf")));
>
>                 System.out.println(doc);
>
>                 //Following code is for making index
>
>                 IndexWriter f_writer = new IndexWriter("D:\\lucenePdf",
> new
> StandardAnalyzer(), true);
>
>                 f_writer.addDocument(doc);
>
>                 }
>                 }
> //code for searching a particular string..
>
> public static void main(String[] args) throws Exception {
>         String indexDir = "D:\\lucenePdf";
>         String q = "RA0083";
>
>
>         Directory fsDir = FSDirectory.getDirectory(indexDir);
>         IndexSearcher is = new IndexSearcher(fsDir);
>
>         Query query = new QueryParser("body", new
> StandardAnalyzer()).parse(q);
>
>         Hits hits = is.search(query);
>         System.out.println("Found " + hits.length() + " documents that
> matched query '" + q + "':");
>         for (int i = 0; i < hits.length(); i++) {
>             Document doc = hits.doc(i);
>
>         }
>     }
>
>
> When I run the above code...I get folowing output as a result of running
> indexer class
>
>
> Document<stored/uncompressed,indexed,tokenized<body:000099062000061300000021000000100110468147201102006PAYOUT
> : RA0083
> 000099062000062000000021000000100220468148001102006PAYOUT : RA0083
> 000099062000063000000021000000100330468153601102006PAYOUT : RA0083
> 000099062000064700000021000000100440468155401102006PAYOUT : RA0083
> 000099062000065700000021000000100550468156201102006PAYOUT : RA0083
>
> and following  files are generated in the specified path..
>
> segments.gen
> write.lock
> segments_4
>
>
> but when I run the search class it gives the result as:
>
> Found 0 documents that matched query 'RA0083':
>
> I am also attaching the corresponding pdf file for reference.
> It seems as the index is not getting created..
>
> Please help me with some of your inputs,it will be very helpfull for me.
> --
> View this message in context:
> http://www.nabble.com/getting-problem-while-indexing-pdf-files-with-pdfbox-tf4096205.html#a11647342
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_57364_28318025.1184680331999--

From java-user-return-29216-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 17 17:21:43 2007
Return-Path: <java-user-return-29216-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17809 invoked from network); 17 Jul 2007 17:21:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jul 2007 17:21:41 -0000
Received: (qmail 28347 invoked by uid 500); 17 Jul 2007 17:21:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28290 invoked by uid 500); 17 Jul 2007 17:21:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28264 invoked by uid 99); 17 Jul 2007 17:21:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Jul 2007 10:21:32 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jpsondag@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Jul 2007 10:21:27 -0700
Received: by py-out-1112.google.com with SMTP id f31so5248354pyh
        for <java-user@lucene.apache.org>; Tue, 17 Jul 2007 10:21:06 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        b=pDcNEXlRefQ67cL/2829xt/9XDj/K3266UqXlnsau2sx0io6s7b8Mv2Cr9RAdT5XwdacleovmCCi2112JYiJwfj5ITphgZR1flFJ/UNsAJOa9k2IlEPcxa8iDprwYWHAMk0MTXnrN8x8sATK9FM9mf4bEa4qvH7tf0Sl6apmFdA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        b=aB+qTdMq9QA1rGk6FCnDuwbfEmxLG6EK/AcONwdRMHSE55g/g0cd0+Jazp81oPhGZya68w2odET6laJ4afIEwJJUv3lJ6cJDgGOPJHfBuLCVi2GfYS5y7AOEgxrtu7AiRhfEJMGmuheF40MXTSpKFCDXdc3jak7H3/Ey6mwOteo=
Received: by 10.65.189.20 with SMTP id r20mr1188752qbp.1184692866114;
        Tue, 17 Jul 2007 10:21:06 -0700 (PDT)
Received: by 10.65.177.7 with HTTP; Tue, 17 Jul 2007 10:21:06 -0700 (PDT)
Message-ID: <bd67edef0707171021o5b9160ffv90276ca4ef6d3c20@mail.gmail.com>
Date: Tue, 17 Jul 2007 12:21:06 -0500
From: "John Paul Sondag" <jsondag2@uiuc.edu>
Sender: jpsondag@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Does Index have a Tokenizer Built into it
In-Reply-To: <bd67edef0707160939x7f4664cbl595fab6cfd4c1b78@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_67871_20056857.1184692866059"
References: <A955EA1F8FE31749AEC8C998082F6C7CD6EA3A@hai01.hippo.local>
	 <bd67edef0707160939x7f4664cbl595fab6cfd4c1b78@mail.gmail.com>
X-Google-Sender-Auth: dba73e86c072d74e
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_67871_20056857.1184692866059
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

I've been looking into the indexing documents with the vectors for terms and
positions on to solve my problem.  However, I've run into a bit of a snag.
After indexing I have been able to retrieve the TermPositionVector from the
index and it has all of the data, but I cannot find a way where given a
position I can retrieve the term at that position. Which is how I was hoping
to create my contextual snippets.

They have functions where given a term you can get it's position but I see
no method to achieve the reverse affect.  Is there another class I need to
use for this?

--JP

On 7/16/07, John Paul Sondag <jsondag2@uiuc.edu> wrote:
>
> Some of the data sets that will be using have about 2 TB of data (90
> million web pages).  The Snippet I will be generating I would like to
> include the words that are being queried, so I don't want to simply store
> the first 2 or 3 lines.  I have looked at the HighlighterTest and I do
> believe that it requires the entire text of the document.  However, unlike
> the highlighter I know where the termOffset in the document.
>
> The input to my Snippet will be a vector of querywords and their offsets
> in the document.  (not their position in the document).  I'm reading about
> the option "term vectors" I can store while indexing my data.  It seems to
> be much more efficient than storing the entire document, I'm just not sure
> if the "term offset" is the same as a "token offset".  Here's what I'm
> reading in case I'm totally off the ball here and this is useless to me:
>
> http://lucene.apache.org/java/docs/fileformats.html#Term%20Vectors
>
> It seems like this has all the information that I would have if I
> tokenized the document anyways, or am I missing something?
>
> Thanks again for all the help!
>
> --JP
>
>
>
>
> On 7/16/07, Ard Schrijvers < a.schrijvers@hippo.nl> wrote:
> >
> > Hello,
> >
> > > Ard,
> > >
> > > I do have access to the URL's of the documents, but because I
> > > will be making
> > > short snippets for many pages (suppose it had about 20 hits
> > > per page and I
> > > need to make Snippets for each of them) I was worried it would be
> > > inefficient to open each "hit" tokenize it and then make the
> > > Snippet, of
> >
> > Yes, getting all the documents over http just to get the snippet, for
> > example the first 2 lines, is really bad for your performance in search
> > overviews.
> >
> > Logically, what you want to show, you need to store in your index. For
> > example, if for search hits you need to show the title and subtitle, just
> > store these two in the index. If you want to have a google like highlighter
> > of text snippets where the term occured, you need to store the entire text
> > IIRC (see HighlighterTest in lucene).
> >
> > How many docs are you talking about that you cannot store the entire
> > content?
> >
> > You could also just index the content and not store it, and in another
> > lucene field, store the first 2 or 3 lines of  the document, which serve as
> > text snippet. Making correct extracts of text snippets is very hard (see
> > lingpipe for example)
> >
> > Regards Ard
> >
> > > course the price of this may be worth the price of the increased Index
> > > size.  I have been looking into storing "Field Vectors with
> > > positions" in
> > > the index.  It seems that by doing this I will have access to
> > > everything
> > > that the Tokenizer is giving me correct?   Will I need to
> > > store "term text"
> > > in order to be able to access the actual term instead of
> > > stemmed words?
> > >
> > > Thanks for all your help,
> > >
> > > --JP
> > >
> > > On 7/13/07, Ard Schrijvers <a.schrijvers@hippo.nl> wrote:
> > > >
> > > > Hello,
> > > >
> > > > > I'm wondering if after
> > > > > opening the
> > > > > index I can retrieve the Tokens (not the terms) of a
> > > > > document, something
> > > > > akin to IndexReader.Document (n).getTokenizer().
> > > >
> > > > It is obviously not possible to get the original tokens of
> > > the document
> > > > back when you haven't stored the document, because:
> > > >
> > > > 1) the analyzer might have removed stop words in the first place
> > > > 2) the terms in lucene index are perhaps stemmed words /
> > > synonyms / etc
> > > > etc
> > > > 3) how would you expect things like spaces, commas, dots etc to be
> > > > restored?
> > > >
> > > > And, I think what you want does not comply with an inverted
> > > index. When
> > > > you do not store the document, you always loose information
> > > about the
> > > > document during indexing/analyzing
> > > >
> > > > How many documents are you talking about? They must be
> > > either somewhere on
> > > > FS or accessible over http...when you need the document,
> > > why not just
> > > > provide a link to the original location?
> > > >
> > > > Regards Ard
> > > >
> > > > >
> > > > > In summary:
> > > > >
> > > > > My current ( too wasteful implementation is this)
> > > > >
> > > > > StandardTokenizer(BufferedReader (
> > > > > IndexReader.Document(n).getField("text"
> > > > > )  )
> > > > >
> > > > > I'm wondering if Lucene has a more efficient manner to
> > > > > retrieve the tokens
> > > > > of a document from an index.  Because it seems like it has
> > > > > information about
> > > > > every "term" already, Since you can get retrieve a
> > > > > TermPositions object.
> > > > >
> > > > > Thanks,
> > > > >
> > > > >
> > > > > --JP
> > > > >
> > > >
> > > >
> > > ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >
> > > >
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_67871_20056857.1184692866059--

From java-user-return-29217-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 17 17:26:27 2007
Return-Path: <java-user-return-29217-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19721 invoked from network); 17 Jul 2007 17:26:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jul 2007 17:26:25 -0000
Received: (qmail 41473 invoked by uid 500); 17 Jul 2007 17:26:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41424 invoked by uid 500); 17 Jul 2007 17:26:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41413 invoked by uid 99); 17 Jul 2007 17:26:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Jul 2007 10:26:17 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Jul 2007 10:26:12 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IAqo3-00050M-Qj
	for java-user@lucene.apache.org; Tue, 17 Jul 2007 10:25:51 -0700
Message-ID: <11653883.post@talk.nabble.com>
Date: Tue, 17 Jul 2007 10:25:51 -0700 (PDT)
From: neetika <neetika.markanday@iflexsolutions.com>
To: java-user@lucene.apache.org
Subject: Re: getting problem while indexing pdf files with pdfbox
In-Reply-To: <359a92830707170652o6de17af5u38bb4f7bbf6a565d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: neetika.markanday@iflexsolutions.com
References: <11647342.post@talk.nabble.com> <359a92830707170652o6de17af5u38bb4f7bbf6a565d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Erick,

Befoe indexing I have printed the doc, and I have given the output also.It
is printing well.
Kindly please check my post again following...

" System.out.println(doc);
                 //Following code is for making index"

and the corresponding output is...

Document<stored/uncompressed,indexed,tokenized<body:000099062000061300000021000000100110468147201102006PAYOUT:
RA0083
 000099062000062000000021000000100220468148001102006PAYOUT : RA0083
 000099062000063000000021000000100330468153601102006PAYOUT : RA0083
 000099062000064700000021000000100440468155401102006PAYOUT : RA0083
 0000099062000065700000021000000100550468156201102006PAYOUT : RA0083
which is as expected...but  my problem is...index file is not getting
generated.

Please help



Erick Erickson wrote:
> 
> Offhand I'd assume that your problem is using PDFbox. Have you
> tried printing out the docText string you get  back from
> 
> docText = stripper.getText(new PDDocument(cosDoc))?
> 
> I'd recommend you assure yourself that you get valid text back from
> the PDF document before worrying about indexing it.
> 
> Best
> Erick
> 
> On 7/17/07, neetika <neetika.markanday@iflexsolutions.com> wrote:
>>
>>
>> http://www.nabble.com/file/p11647342/DRra0026.pdf DRra0026.pdf
>>
>> hi all,
>>
>> i am able to convert a pdf in to a text file using pdfbox.
>> and this is the code that I used, but I am not able to index it
>>
>> // code for parsing and making index
>>
>>                 public Document getDocument(InputStream is)
>>                 {
>>                 COSDocument cosDoc = null;
>>                 try {
>>                         PDFParser parser = new PDFParser(is);
>>                         parser.parse();
>>                 cosDoc = parser.getDocument();
>>                 }
>>                 catch (IOException e) {
>>                 e.printStackTrace();
>>                                 }
>>                 String docText = null;
>>                 try {
>>                 PDFTextStripper stripper = new PDFTextStripper();
>>                 docText = stripper.getText(new PDDocument(cosDoc));
>>                 }
>>                 catch (IOException e) {
>>                         e.printStackTrace();
>>                 }
>>                 Document doc = new Document();
>>                 if (docText != null) {
>>                 doc.add(new Field("body", docText, Field.Store.YES,
>>                         Field.Index.TOKENIZED));
>>                 }
>>                 return doc;
>>                 }
>>
>>                 public static void main(String[] args) throws Exception {
>>                         TestPDFParser handler = new TestPDFParser();
>>
>>                 Document doc = handler.getDocument(new
>> FileInputStream(new
>> File("D:\\lucenePdf\\DRra0026.pdf")));
>>
>>                 System.out.println(doc);
>>
>>                 //Following code is for making index
>>
>>                 IndexWriter f_writer = new IndexWriter("D:\\lucenePdf",
>> new
>> StandardAnalyzer(), true);
>>
>>                 f_writer.addDocument(doc);
>>
>>                 }
>>                 }
>> //code for searching a particular string..
>>
>> public static void main(String[] args) throws Exception {
>>         String indexDir = "D:\\lucenePdf";
>>         String q = "RA0083";
>>
>>
>>         Directory fsDir = FSDirectory.getDirectory(indexDir);
>>         IndexSearcher is = new IndexSearcher(fsDir);
>>
>>         Query query = new QueryParser("body", new
>> StandardAnalyzer()).parse(q);
>>
>>         Hits hits = is.search(query);
>>         System.out.println("Found " + hits.length() + " documents that
>> matched query '" + q + "':");
>>         for (int i = 0; i < hits.length(); i++) {
>>             Document doc = hits.doc(i);
>>
>>         }
>>     }
>>
>>
>> When I run the above code...I get folowing output as a result of running
>> indexer class
>>
>>
>> Document<stored/uncompressed,indexed,tokenized<body:000099062000061300000021000000100110468147201102006PAYOUT
>> : RA0083
>> 000099062000062000000021000000100220468148001102006PAYOUT : RA0083
>> 000099062000063000000021000000100330468153601102006PAYOUT : RA0083
>> 000099062000064700000021000000100440468155401102006PAYOUT : RA0083
>> 000099062000065700000021000000100550468156201102006PAYOUT : RA0083
>>
>> and following  files are generated in the specified path..
>>
>> segments.gen
>> write.lock
>> segments_4
>>
>>
>> but when I run the search class it gives the result as:
>>
>> Found 0 documents that matched query 'RA0083':
>>
>> I am also attaching the corresponding pdf file for reference.
>> It seems as the index is not getting created..
>>
>> Please help me with some of your inputs,it will be very helpfull for me.
>> --
>> View this message in context:
>> http://www.nabble.com/getting-problem-while-indexing-pdf-files-with-pdfbox-tf4096205.html#a11647342
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/getting-problem-while-indexing-pdf-files-with-pdfbox-tf4096205.html#a11653883
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29218-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 17 18:08:33 2007
Return-Path: <java-user-return-29218-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36484 invoked from network); 17 Jul 2007 18:08:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jul 2007 18:08:31 -0000
Received: (qmail 46103 invoked by uid 500); 17 Jul 2007 18:08:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46051 invoked by uid 500); 17 Jul 2007 18:08:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46036 invoked by uid 99); 17 Jul 2007 18:08:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Jul 2007 11:08:22 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Jul 2007 11:08:17 -0700
Received: by nf-out-0910.google.com with SMTP id d3so113313nfc
        for <java-user@lucene.apache.org>; Tue, 17 Jul 2007 11:07:55 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=V+6m+Cg70LrSsiod23tUC3Q5/dKZIJ5ChxDa3BrgJp9kLxFB6u810TZACJWGExWjR8ic27s8gZbfqzFJam7or2Jt279qZa7ojd4f1S35z8pvk2iJjaQWpA3A4dV64phY1Xz8xumLsWxELzcIZpqB1sb2J6bWBGGpsMGdO05T50g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=jIy1QHf2KcP9aCzEUsJAQk0v+S7sPvN/qDr/VlROslxl801qfMC+xf/8fFnwVvTDp95Vxsa/qk+G5BgtBHDdGve8+NV1H1P51eaeZP4fdHY9LNVGO7zUlbnCzORP0OaG1mzx3IyxmfqagX+mrO2nT3PjgoGxW+vMSuDLqeG5mNQ=
Received: by 10.82.108.9 with SMTP id g9mr816261buc.1184695672141;
        Tue, 17 Jul 2007 11:07:52 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Tue, 17 Jul 2007 11:07:52 -0700 (PDT)
Message-ID: <359a92830707171107s125cdebaqcbb4e210a0c7ad95@mail.gmail.com>
Date: Tue, 17 Jul 2007 14:07:52 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: getting problem while indexing pdf files with pdfbox
In-Reply-To: <11653883.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_60549_29576718.1184695672101"
References: <11647342.post@talk.nabble.com>
	 <359a92830707170652o6de17af5u38bb4f7bbf6a565d@mail.gmail.com>
	 <11653883.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_60549_29576718.1184695672101
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

 You have NOT supplied an example of the text you extracted
from the document. But let's assume that the interesting
string is exactly what you expect.

Have you looked at your index with Luke to see if the data is there?
I *strongly* suggest you get a copy of Luke (google lucene luke) to
examine indexes with.

The existence of the write.lock file suggests that you haven't closed your
index prior to searching it. Although flushing it would probably work. Be
aware that you cannot see changes to an index if the reader you use
has been opened before the indexing operation. Also, there is some period
of time when the indexed data is buffered by the writer, and I'm unsure (but
doubt) it's available until it's been flushed.

I suspect that your problem is not related to PDF, but rather to whether
you've properly indexed data and closed your index prior to searching
it.....

The other possibility is that your analyzer is parsing things
"interestingly".
StandardAnalyzer() does some interesting things when tokenizing, including
lowercasing the input stream. Although that shouldn't have been a problem
since you use the same analyzer for indexing and searching.

Also, try query.toString to see what is actually searched, that often gives
insights. The aforementioned Luke will allow you to submit queries to the
index, including explaining what the actual query produced is.
What are the file sizes of your index files?


Best
Erick

On 7/17/07, neetika <neetika.markanday@iflexsolutions.com> wrote:
>
>
> Hi Erick,
>
> Befoe indexing I have printed the doc, and I have given the output also.It
> is printing well.
> Kindly please check my post again following...
>
> " System.out.println(doc);
>                  //Following code is for making index"
>
> and the corresponding output is...
>
>
> Document<stored/uncompressed,indexed,tokenized<body:000099062000061300000021000000100110468147201102006PAYOUT:
> RA0083
> 000099062000062000000021000000100220468148001102006PAYOUT : RA0083
> 000099062000063000000021000000100330468153601102006PAYOUT : RA0083
> 000099062000064700000021000000100440468155401102006PAYOUT : RA0083
> 0000099062000065700000021000000100550468156201102006PAYOUT : RA0083
> which is as expected...but  my problem is...index file is not getting
> generated.
>
> Please help
>
>
>
> Erick Erickson wrote:
> >
> > Offhand I'd assume that your problem is using PDFbox. Have you
> > tried printing out the docText string you get  back from
> >
> > docText = stripper.getText(new PDDocument(cosDoc))?
> >
> > I'd recommend you assure yourself that you get valid text back from
> > the PDF document before worrying about indexing it.
> >
> > Best
> > Erick
> >
> > On 7/17/07, neetika <neetika.markanday@iflexsolutions.com> wrote:
> >>
> >>
> >> http://www.nabble.com/file/p11647342/DRra0026.pdf DRra0026.pdf
> >>
> >> hi all,
> >>
> >> i am able to convert a pdf in to a text file using pdfbox.
> >> and this is the code that I used, but I am not able to index it
> >>
> >> // code for parsing and making index
> >>
> >>                 public Document getDocument(InputStream is)
> >>                 {
> >>                 COSDocument cosDoc = null;
> >>                 try {
> >>                         PDFParser parser = new PDFParser(is);
> >>                         parser.parse();
> >>                 cosDoc = parser.getDocument();
> >>                 }
> >>                 catch (IOException e) {
> >>                 e.printStackTrace();
> >>                                 }
> >>                 String docText = null;
> >>                 try {
> >>                 PDFTextStripper stripper = new PDFTextStripper();
> >>                 docText = stripper.getText(new PDDocument(cosDoc));
> >>                 }
> >>                 catch (IOException e) {
> >>                         e.printStackTrace();
> >>                 }
> >>                 Document doc = new Document();
> >>                 if (docText != null) {
> >>                 doc.add(new Field("body", docText, Field.Store.YES,
> >>                         Field.Index.TOKENIZED));
> >>                 }
> >>                 return doc;
> >>                 }
> >>
> >>                 public static void main(String[] args) throws Exception
> {
> >>                         TestPDFParser handler = new TestPDFParser();
> >>
> >>                 Document doc = handler.getDocument(new
> >> FileInputStream(new
> >> File("D:\\lucenePdf\\DRra0026.pdf")));
> >>
> >>                 System.out.println(doc);
> >>
> >>                 //Following code is for making index
> >>
> >>                 IndexWriter f_writer = new IndexWriter("D:\\lucenePdf",
> >> new
> >> StandardAnalyzer(), true);
> >>
> >>                 f_writer.addDocument(doc);
> >>
> >>                 }
> >>                 }
> >> //code for searching a particular string..
> >>
> >> public static void main(String[] args) throws Exception {
> >>         String indexDir = "D:\\lucenePdf";
> >>         String q = "RA0083";
> >>
> >>
> >>         Directory fsDir = FSDirectory.getDirectory(indexDir);
> >>         IndexSearcher is = new IndexSearcher(fsDir);
> >>
> >>         Query query = new QueryParser("body", new
> >> StandardAnalyzer()).parse(q);
> >>
> >>         Hits hits = is.search(query);
> >>         System.out.println("Found " + hits.length() + " documents that
> >> matched query '" + q + "':");
> >>         for (int i = 0; i < hits.length(); i++) {
> >>             Document doc = hits.doc(i);
> >>
> >>         }
> >>     }
> >>
> >>
> >> When I run the above code...I get folowing output as a result of
> running
> >> indexer class
> >>
> >>
> >>
> Document<stored/uncompressed,indexed,tokenized<body:000099062000061300000021000000100110468147201102006PAYOUT
> >> : RA0083
> >> 000099062000062000000021000000100220468148001102006PAYOUT : RA0083
> >> 000099062000063000000021000000100330468153601102006PAYOUT : RA0083
> >> 000099062000064700000021000000100440468155401102006PAYOUT : RA0083
> >> 000099062000065700000021000000100550468156201102006PAYOUT : RA0083
> >>
> >> and following  files are generated in the specified path..
> >>
> >> segments.gen
> >> write.lock
> >> segments_4
> >>
> >>
> >> but when I run the search class it gives the result as:
> >>
> >> Found 0 documents that matched query 'RA0083':
> >>
> >> I am also attaching the corresponding pdf file for reference.
> >> It seems as the index is not getting created..
> >>
> >> Please help me with some of your inputs,it will be very helpfull for
> me.
> >> --
> >> View this message in context:
> >>
> http://www.nabble.com/getting-problem-while-indexing-pdf-files-with-pdfbox-tf4096205.html#a11647342
> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/getting-problem-while-indexing-pdf-files-with-pdfbox-tf4096205.html#a11653883
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_60549_29576718.1184695672101--

From java-user-return-29219-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 18 03:59:26 2007
Return-Path: <java-user-return-29219-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31140 invoked from network); 18 Jul 2007 03:59:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jul 2007 03:59:25 -0000
Received: (qmail 95098 invoked by uid 500); 18 Jul 2007 03:59:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95057 invoked by uid 500); 18 Jul 2007 03:59:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95045 invoked by uid 99); 18 Jul 2007 03:59:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Jul 2007 20:59:10 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of cedric.ho@gmail.com designates 209.85.146.182 as permitted sender)
Received: from [209.85.146.182] (HELO wa-out-1112.google.com) (209.85.146.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Jul 2007 20:59:06 -0700
Received: by wa-out-1112.google.com with SMTP id j40so76032wah
        for <java-user@lucene.apache.org>; Tue, 17 Jul 2007 20:58:45 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=fJzotNvUCbo5g0VbPZwwreWF/xRp1qyS2dfehScC1rdL2aaqXIzd0FTyB8CtfY1ctvicjKV2Yln3yfHf3qCE6CSzQBv90Za7UAwVlCQWhKaAzQaCL7VMe6EcTOqx/OdD1iB0ZHvXpMsIXFRASZqCc56oQO2/o4XrEF/CPgbp7QA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=EpWN2FjWWRM4y+1s+GcxW9TWdfRxgyRxDcHXoliso4AtCItjfGAw7UiSOtxFVQARUtobYpZkWC+ftpVMS7l0HciYDQpFqx6rxTmQFkdmW2gxMzR73IiGCAxo0AvEJR6xhks3rl5laBZeAR8lwlVC5ZES4XOYTDojN5aD3Toh4Io=
Received: by 10.114.135.1 with SMTP id i1mr1071982wad.1184731124833;
        Tue, 17 Jul 2007 20:58:44 -0700 (PDT)
Received: by 10.114.52.18 with HTTP; Tue, 17 Jul 2007 20:58:44 -0700 (PDT)
Message-ID: <839ba01c0707172058l62d17dax1c68097dfdd08ca9@mail.gmail.com>
Date: Wed, 18 Jul 2007 11:58:44 +0800
From: "Cedric Ho" <cedric.ho@gmail.com>
To: java-user@lucene.apache.org
Subject: WildcardQuery and SpanQuery
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi everybody,

We recently need to support wildcard search terms "*", "?" together
with SpanQuery. It seems that there's no SpanWildcardQuery available.
After looking into the lucene source code for a while, I guess we can
either:

1. Use SpanRegexQuery, or

2. Write our own SpanWildcardQuery, and implements the
rewrite(IndexReader) method to rewrite the query into a SpanOrQuery
with some SpanTermQuery.

Of the two approaches, Option 1 seems to be easier. But I am rather
concerned about the performance of using regular expression. On the
other hand, I am not sure if there are any other concerns I am not
aware of for option 2 (i.e. is there a reason why there's no
SpanWildcardQuery in the first place?)

Any advices ?

Cedric

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29220-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 18 04:30:15 2007
Return-Path: <java-user-return-29220-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40673 invoked from network); 18 Jul 2007 04:30:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jul 2007 04:30:13 -0000
Received: (qmail 36983 invoked by uid 500); 18 Jul 2007 04:30:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36577 invoked by uid 500); 18 Jul 2007 04:30:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36566 invoked by uid 99); 18 Jul 2007 04:30:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Jul 2007 21:30:00 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Jul 2007 21:29:57 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IB1AO-0005eK-T9
	for java-user@lucene.apache.org; Tue, 17 Jul 2007 21:29:36 -0700
Message-ID: <11662355.post@talk.nabble.com>
Date: Tue, 17 Jul 2007 21:29:36 -0700 (PDT)
From: neetika <neetika.markanday@iflexsolutions.com>
To: java-user@lucene.apache.org
Subject: Re: getting problem while indexing pdf files with pdfbox
In-Reply-To: <359a92830707171107s125cdebaqcbb4e210a0c7ad95@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: neetika.markanday@iflexsolutions.com
References: <11647342.post@talk.nabble.com> <359a92830707170652o6de17af5u38bb4f7bbf6a565d@mail.gmail.com> <11653883.post@talk.nabble.com> <359a92830707171107s125cdebaqcbb4e210a0c7ad95@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Erick,

I am able to get the result fine.
The problem was, I forgot to close the writer and so the index file (.cfs)
was not getting generated.

Thanks a lot for the timely help.

Regards,
Neetika


Erick Erickson wrote:
> 
>  You have NOT supplied an example of the text you extracted
> from the document. But let's assume that the interesting
> string is exactly what you expect.
> 
> Have you looked at your index with Luke to see if the data is there?
> I *strongly* suggest you get a copy of Luke (google lucene luke) to
> examine indexes with.
> 
> The existence of the write.lock file suggests that you haven't closed your
> index prior to searching it. Although flushing it would probably work. Be
> aware that you cannot see changes to an index if the reader you use
> has been opened before the indexing operation. Also, there is some period
> of time when the indexed data is buffered by the writer, and I'm unsure
> (but
> doubt) it's available until it's been flushed.
> 
> I suspect that your problem is not related to PDF, but rather to whether
> you've properly indexed data and closed your index prior to searching
> it.....
> 
> The other possibility is that your analyzer is parsing things
> "interestingly".
> StandardAnalyzer() does some interesting things when tokenizing, including
> lowercasing the input stream. Although that shouldn't have been a problem
> since you use the same analyzer for indexing and searching.
> 
> Also, try query.toString to see what is actually searched, that often
> gives
> insights. The aforementioned Luke will allow you to submit queries to the
> index, including explaining what the actual query produced is.
> What are the file sizes of your index files?
> 
> 
> Best
> Erick
> 
> On 7/17/07, neetika <neetika.markanday@iflexsolutions.com> wrote:
>>
>>
>> Hi Erick,
>>
>> Befoe indexing I have printed the doc, and I have given the output
>> also.It
>> is printing well.
>> Kindly please check my post again following...
>>
>> " System.out.println(doc);
>>                  //Following code is for making index"
>>
>> and the corresponding output is...
>>
>>
>> Document<stored/uncompressed,indexed,tokenized<body:000099062000061300000021000000100110468147201102006PAYOUT:
>> RA0083
>> 000099062000062000000021000000100220468148001102006PAYOUT : RA0083
>> 000099062000063000000021000000100330468153601102006PAYOUT : RA0083
>> 000099062000064700000021000000100440468155401102006PAYOUT : RA0083
>> 0000099062000065700000021000000100550468156201102006PAYOUT : RA0083
>> which is as expected...but  my problem is...index file is not getting
>> generated.
>>
>> Please help
>>
>>
>>
>> Erick Erickson wrote:
>> >
>> > Offhand I'd assume that your problem is using PDFbox. Have you
>> > tried printing out the docText string you get  back from
>> >
>> > docText = stripper.getText(new PDDocument(cosDoc))?
>> >
>> > I'd recommend you assure yourself that you get valid text back from
>> > the PDF document before worrying about indexing it.
>> >
>> > Best
>> > Erick
>> >
>> > On 7/17/07, neetika <neetika.markanday@iflexsolutions.com> wrote:
>> >>
>> >>
>> >> http://www.nabble.com/file/p11647342/DRra0026.pdf DRra0026.pdf
>> >>
>> >> hi all,
>> >>
>> >> i am able to convert a pdf in to a text file using pdfbox.
>> >> and this is the code that I used, but I am not able to index it
>> >>
>> >> // code for parsing and making index
>> >>
>> >>                 public Document getDocument(InputStream is)
>> >>                 {
>> >>                 COSDocument cosDoc = null;
>> >>                 try {
>> >>                         PDFParser parser = new PDFParser(is);
>> >>                         parser.parse();
>> >>                 cosDoc = parser.getDocument();
>> >>                 }
>> >>                 catch (IOException e) {
>> >>                 e.printStackTrace();
>> >>                                 }
>> >>                 String docText = null;
>> >>                 try {
>> >>                 PDFTextStripper stripper = new PDFTextStripper();
>> >>                 docText = stripper.getText(new PDDocument(cosDoc));
>> >>                 }
>> >>                 catch (IOException e) {
>> >>                         e.printStackTrace();
>> >>                 }
>> >>                 Document doc = new Document();
>> >>                 if (docText != null) {
>> >>                 doc.add(new Field("body", docText, Field.Store.YES,
>> >>                         Field.Index.TOKENIZED));
>> >>                 }
>> >>                 return doc;
>> >>                 }
>> >>
>> >>                 public static void main(String[] args) throws
>> Exception
>> {
>> >>                         TestPDFParser handler = new TestPDFParser();
>> >>
>> >>                 Document doc = handler.getDocument(new
>> >> FileInputStream(new
>> >> File("D:\\lucenePdf\\DRra0026.pdf")));
>> >>
>> >>                 System.out.println(doc);
>> >>
>> >>                 //Following code is for making index
>> >>
>> >>                 IndexWriter f_writer = new
>> IndexWriter("D:\\lucenePdf",
>> >> new
>> >> StandardAnalyzer(), true);
>> >>
>> >>                 f_writer.addDocument(doc);
>> >>
>> >>                 }
>> >>                 }
>> >> //code for searching a particular string..
>> >>
>> >> public static void main(String[] args) throws Exception {
>> >>         String indexDir = "D:\\lucenePdf";
>> >>         String q = "RA0083";
>> >>
>> >>
>> >>         Directory fsDir = FSDirectory.getDirectory(indexDir);
>> >>         IndexSearcher is = new IndexSearcher(fsDir);
>> >>
>> >>         Query query = new QueryParser("body", new
>> >> StandardAnalyzer()).parse(q);
>> >>
>> >>         Hits hits = is.search(query);
>> >>         System.out.println("Found " + hits.length() + " documents that
>> >> matched query '" + q + "':");
>> >>         for (int i = 0; i < hits.length(); i++) {
>> >>             Document doc = hits.doc(i);
>> >>
>> >>         }
>> >>     }
>> >>
>> >>
>> >> When I run the above code...I get folowing output as a result of
>> running
>> >> indexer class
>> >>
>> >>
>> >>
>> Document<stored/uncompressed,indexed,tokenized<body:000099062000061300000021000000100110468147201102006PAYOUT
>> >> : RA0083
>> >> 000099062000062000000021000000100220468148001102006PAYOUT : RA0083
>> >> 000099062000063000000021000000100330468153601102006PAYOUT : RA0083
>> >> 000099062000064700000021000000100440468155401102006PAYOUT : RA0083
>> >> 000099062000065700000021000000100550468156201102006PAYOUT : RA0083
>> >>
>> >> and following  files are generated in the specified path..
>> >>
>> >> segments.gen
>> >> write.lock
>> >> segments_4
>> >>
>> >>
>> >> but when I run the search class it gives the result as:
>> >>
>> >> Found 0 documents that matched query 'RA0083':
>> >>
>> >> I am also attaching the corresponding pdf file for reference.
>> >> It seems as the index is not getting created..
>> >>
>> >> Please help me with some of your inputs,it will be very helpfull for
>> me.
>> >> --
>> >> View this message in context:
>> >>
>> http://www.nabble.com/getting-problem-while-indexing-pdf-files-with-pdfbox-tf4096205.html#a11647342
>> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>> >>
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >
>> >
>>
>> --
>> View this message in context:
>> http://www.nabble.com/getting-problem-while-indexing-pdf-files-with-pdfbox-tf4096205.html#a11653883
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/getting-problem-while-indexing-pdf-files-with-pdfbox-tf4096205.html#a11662355
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29221-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 18 05:07:59 2007
Return-Path: <java-user-return-29221-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59521 invoked from network); 18 Jul 2007 05:07:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jul 2007 05:07:57 -0000
Received: (qmail 8573 invoked by uid 500); 18 Jul 2007 05:07:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8136 invoked by uid 500); 18 Jul 2007 05:07:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8125 invoked by uid 99); 18 Jul 2007 05:07:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Jul 2007 22:07:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.150] (HELO rescomp.berkeley.edu) (169.229.70.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Jul 2007 22:07:41 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id E98825B775; Tue, 17 Jul 2007 22:07:18 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id C43A57F403
	for <java-user@lucene.apache.org>; Tue, 17 Jul 2007 22:07:18 -0700 (PDT)
Date: Tue, 17 Jul 2007 22:07:18 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Does Index have a Tokenizer Built into it
In-Reply-To: <bd67edef0707171021o5b9160ffv90276ca4ef6d3c20@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0707172203580.13123@hal.rescomp.berkeley.edu>
References: <A955EA1F8FE31749AEC8C998082F6C7CD6EA3A@hai01.hippo.local> 
 <bd67edef0707160939x7f4664cbl595fab6cfd4c1b78@mail.gmail.com>
 <bd67edef0707171021o5b9160ffv90276ca4ef6d3c20@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: After indexing I have been able to retrieve the TermPositionVector from the
: index and it has all of the data, but I cannot find a way where given a
: position I can retrieve the term at that position. Which is how I was hoping
: to create my contextual snippets.

there is no easy way to go from a position to a term -- coincidently there
is a very recent thread on this on java-dev...
http://www.nabble.com/Best-Practices-for-getting-Strings-from-a-position-range-tf4084187.html

...a new API may come out of it, but in the mean time you may be
interested in taking the approach the current highlighter uses (as
mentioned in that thread), of using the TermPositionVector to rebuild the
orriginal tokenstream, then skipping ahead to the positions you are
interested in.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29222-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 18 06:53:32 2007
Return-Path: <java-user-return-29222-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99471 invoked from network); 18 Jul 2007 06:53:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jul 2007 06:53:31 -0000
Received: (qmail 74446 invoked by uid 500); 18 Jul 2007 06:53:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74406 invoked by uid 500); 18 Jul 2007 06:53:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74395 invoked by uid 99); 18 Jul 2007 06:53:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Jul 2007 23:53:16 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.109.24.30] (HELO smtp-vbr10.xs4all.nl) (194.109.24.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Jul 2007 23:53:13 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr10.xs4all.nl (8.13.8/8.13.8) with ESMTP id l6I6qpIi030138
	for <java-user@lucene.apache.org>; Wed, 18 Jul 2007 08:52:52 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: WildcardQuery and SpanQuery
Date: Wed, 18 Jul 2007 08:52:51 +0200
User-Agent: KMail/1.8.2
References: <839ba01c0707172058l62d17dax1c68097dfdd08ca9@mail.gmail.com>
In-Reply-To: <839ba01c0707172058l62d17dax1c68097dfdd08ca9@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200707180852.51255.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

On Wednesday 18 July 2007 05:58, Cedric Ho wrote:
> Hi everybody,
> 
> We recently need to support wildcard search terms "*", "?" together
> with SpanQuery. It seems that there's no SpanWildcardQuery available.
> After looking into the lucene source code for a while, I guess we can
> either:
> 
> 1. Use SpanRegexQuery, or
> 
> 2. Write our own SpanWildcardQuery, and implements the
> rewrite(IndexReader) method to rewrite the query into a SpanOrQuery
> with some SpanTermQuery.
> 
> Of the two approaches, Option 1 seems to be easier. But I am rather
> concerned about the performance of using regular expression. On the
> other hand, I am not sure if there are any other concerns I am not
> aware of for option 2 (i.e. is there a reason why there's no
> SpanWildcardQuery in the first place?)
> 
> Any advices ?

The basic problem you are facing is that in Lucene
the expansion of the terms is tightly coupled to the generation
of a combination query using the expanded terms.

In contrib/surround the term expansion and query generation
are decoupled using a visitor pattern for the terms. The code is here:
http://svn.apache.org/viewvc/lucene/java/trunk/contrib/surround/src/java/org/apache/lucene/queryParser/surround/query

In surround a wild card term can provide either an OR of 
normal term queries, or a SpanOrQuery of span term queries.
This query generation is in class SimpleTerm, which has one method
for a normal boolean OR query over the terms, and one for
a span query for the terms.

In both cases surround uses a regular expression to expand 
the matching terms, but that could be changed to use
another wildcard expansion mechanisms than the ones in
SrndPrefixQuery and SrndTruncQuery, which
are subclasses of SimpleTerm.

With the term expansion and the query combination split,
it is also necessary to limit the maximum number of expanded
terms in another way than Lucene does. In surround the
classes BasicQueryFactory and TooManyBasicQueries are
used for that.

Regards,
Paul Elschot



> 
> Cedric
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29223-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 18 10:30:57 2007
Return-Path: <java-user-return-29223-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8264 invoked from network); 18 Jul 2007 10:30:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jul 2007 10:30:56 -0000
Received: (qmail 2478 invoked by uid 500); 18 Jul 2007 10:30:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2218 invoked by uid 500); 18 Jul 2007 10:30:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2200 invoked by uid 99); 18 Jul 2007 10:30:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Jul 2007 03:30:38 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of cedric.ho@gmail.com designates 72.14.204.226 as permitted sender)
Received: from [72.14.204.226] (HELO qb-out-0506.google.com) (72.14.204.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Jul 2007 03:30:35 -0700
Received: by qb-out-0506.google.com with SMTP id o21so187846qba
        for <java-user@lucene.apache.org>; Wed, 18 Jul 2007 03:30:14 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=FY9DN2nZnDIefatKPmAV+spZOZxFoqwwDeV9Pf4KFmN6t6espD2mX+tD3YcYVd2JXhOvCvIul4Z2exta5bzlJe4BQVIDhGHRxweqXOZ0ce7xJO63USh7l9ptwOgofxWi/IsQ1QwZYJ+EuULXEa7g2dul9EwrUml/SanJZuRdNmw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=GMOot/izYxwD+/Wzbd4/p/BobBiPMzUF27lk6vvSAfy3hz+o+sAMyDmW+KVGpjNoCLXylwQufVsiFDPpyV/b5rr+rIQNWeCOm0P9cARByjzI8kIIiNU7UutELStvJdo5QZTbA73z8VicY/K981aKHUes632Csi/sDdDrcqA1NQU=
Received: by 10.115.61.1 with SMTP id o1mr1345870wak.1184754613778;
        Wed, 18 Jul 2007 03:30:13 -0700 (PDT)
Received: by 10.114.52.18 with HTTP; Wed, 18 Jul 2007 03:30:13 -0700 (PDT)
Message-ID: <839ba01c0707180330k4fa29404m655fccf3e8ff5ceb@mail.gmail.com>
Date: Wed, 18 Jul 2007 18:30:13 +0800
From: "Cedric Ho" <cedric.ho@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: WildcardQuery and SpanQuery
In-Reply-To: <200707180852.51255.paul.elschot@xs4all.nl>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <839ba01c0707172058l62d17dax1c68097dfdd08ca9@mail.gmail.com>
	 <200707180852.51255.paul.elschot@xs4all.nl>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for the quick response Paul =)

However I am lost while looking at the surround package. Are you
suggesting I can solve my problem at hand using the surround package?


On 7/18/07, Paul Elschot <paul.elschot@xs4all.nl> wrote:
> On Wednesday 18 July 2007 05:58, Cedric Ho wrote:
> > Hi everybody,
> >
> > We recently need to support wildcard search terms "*", "?" together
> > with SpanQuery. It seems that there's no SpanWildcardQuery available.
> > After looking into the lucene source code for a while, I guess we can
> > either:
> >
> > 1. Use SpanRegexQuery, or
> >
> > 2. Write our own SpanWildcardQuery, and implements the
> > rewrite(IndexReader) method to rewrite the query into a SpanOrQuery
> > with some SpanTermQuery.
> >
> > Of the two approaches, Option 1 seems to be easier. But I am rather
> > concerned about the performance of using regular expression. On the
> > other hand, I am not sure if there are any other concerns I am not
> > aware of for option 2 (i.e. is there a reason why there's no
> > SpanWildcardQuery in the first place?)
> >
> > Any advices ?
>
> The basic problem you are facing is that in Lucene
> the expansion of the terms is tightly coupled to the generation
> of a combination query using the expanded terms.
>
> In contrib/surround the term expansion and query generation
> are decoupled using a visitor pattern for the terms. The code is here:
> http://svn.apache.org/viewvc/lucene/java/trunk/contrib/surround/src/java/org/apache/lucene/queryParser/surround/query
>
> In surround a wild card term can provide either an OR of
> normal term queries, or a SpanOrQuery of span term queries.
> This query generation is in class SimpleTerm, which has one method
> for a normal boolean OR query over the terms, and one for
> a span query for the terms.
>
> In both cases surround uses a regular expression to expand
> the matching terms, but that could be changed to use
> another wildcard expansion mechanisms than the ones in
> SrndPrefixQuery and SrndTruncQuery, which
> are subclasses of SimpleTerm.
>
> With the term expansion and the query combination split,
> it is also necessary to limit the maximum number of expanded
> terms in another way than Lucene does. In surround the
> classes BasicQueryFactory and TooManyBasicQueries are
> used for that.
>
> Regards,
> Paul Elschot
>
>
>
> >
> > Cedric
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29224-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 18 10:52:49 2007
Return-Path: <java-user-return-29224-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19099 invoked from network); 18 Jul 2007 10:52:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jul 2007 10:52:48 -0000
Received: (qmail 42272 invoked by uid 500); 18 Jul 2007 10:52:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42243 invoked by uid 500); 18 Jul 2007 10:52:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42231 invoked by uid 99); 18 Jul 2007 10:52:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Jul 2007 03:52:30 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.228 as permitted sender)
Received: from [66.249.82.228] (HELO wx-out-0506.google.com) (66.249.82.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Jul 2007 03:52:26 -0700
Received: by wx-out-0506.google.com with SMTP id i28so122232wxd
        for <java-user@lucene.apache.org>; Wed, 18 Jul 2007 03:52:06 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=JXEpfBho54YmO+dIY8nUYVuoMq/u98zs4hXup9cdsz1qS52zkJPFCtRVINPzZM7m9hRXq0PduVCVMjHNwwMTRkj5PUCNK2DxSPjPZHgoqnJ/kewBR5gsqbYTgCwbL/Q2UU+sssiS+GnPJ4aTnhqNZwuZTZNsWxMlPGQm0pwu/sk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=ZtAyduQfinqOBM1ZFSZwgXPkIx3lkaduBB4bs4Ok8+EE09oQhoolrdW447Mi2/3ODuADRxJCmaozAscNNi09wB0yXP8KOCrZb94wu26l7L3mLB9GFaU/jp2kXGfc54ylnkXN21DJQP7lo20F5EC73FVYwBtQkCr2RXQvP6Q0EHI=
Received: by 10.90.119.15 with SMTP id r15mr1235312agc.1184755925927;
        Wed, 18 Jul 2007 03:52:05 -0700 (PDT)
Received: from ?192.168.1.100? ( [216.66.114.204])
        by mx.google.com with ESMTPS id 44sm113277wri.2007.07.18.03.51.57
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 18 Jul 2007 03:52:05 -0700 (PDT)
Message-ID: <469DF09F.9030407@gmail.com>
Date: Wed, 18 Jul 2007 06:51:11 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.4 (Windows/20070604)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: WildcardQuery and SpanQuery
References: <839ba01c0707172058l62d17dax1c68097dfdd08ca9@mail.gmail.com>
In-Reply-To: <839ba01c0707172058l62d17dax1c68097dfdd08ca9@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

You could give this a shot (From my Qsol query parser):

package com.mhs.qsol.spans;

/**
 * Copyright 2006 Mark Miller (markrmiller@gmail.com)
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
import java.io.IOException;
import java.util.ArrayList;
import java.util.Collection;
import java.util.Set;

import org.apache.lucene.index.IndexReader;
import org.apache.lucene.index.Term;
import org.apache.lucene.search.BooleanClause;
import org.apache.lucene.search.BooleanQuery;
import org.apache.lucene.search.Query;
import org.apache.lucene.search.TermQuery;
import org.apache.lucene.search.WildcardQuery;
import org.apache.lucene.search.spans.SpanOrQuery;
import org.apache.lucene.search.spans.SpanQuery;
import org.apache.lucene.search.spans.SpanTermQuery;
import org.apache.lucene.search.spans.Spans;

/**
 * @author mark miller
 *
 */
public class SpanWildcardQuery extends SpanQuery {
    private Term term;

    private BooleanQuery rewrittenWildQuery;

    public SpanWildcardQuery(Term term) {
        this.term = term;
    }

    public Term getTerm() {
        return term;
    }

    public Query rewrite(IndexReader reader) throws IOException {
        WildcardQuery wildQuery = new WildcardQuery(term);

        rewrittenWildQuery = (BooleanQuery) wildQuery.rewrite(reader);

        BooleanQuery bq = (BooleanQuery) rewrittenWildQuery.rewrite(reader);

        BooleanClause[] clauses = bq.getClauses();
        SpanQuery[] sqs = new SpanQuery[clauses.length];

        for (int i = 0; i < clauses.length; i++) {
            BooleanClause clause = clauses[i];

            TermQuery tq = (TermQuery) clause.getQuery();

            sqs[i] = new SpanTermQuery(tq.getTerm());
            sqs[i].setBoost(tq.getBoost());
        }

        SpanOrQuery query = new SpanOrQuery(sqs);
        query.setBoost(wildQuery.getBoost());

        return query;
    }

    public Spans getSpans(IndexReader reader) throws IOException {
        throw new UnsupportedOperationException(
                "Query should have been rewritten");
    }

    public String getField() {
        return term.field();
    }

    /**
     * @deprecated use extractTerms instead
     * @see #extractTerms(Set);
     */
    public Collection getTerms() {
        Collection terms = new ArrayList();
        terms.add(term);

        return terms;
    }

    public void extractTerms(Set terms) {
        terms.add(term);
    }

    public String toString(String field) {
        StringBuffer buffer = new StringBuffer();
        buffer.append("spanWildcardQuery(");
        buffer.append(term);
        buffer.append(")");

        // buffer.append(ToStringUtils.boost(getBoost()));
        return buffer.toString();
    }
}


Cedric Ho wrote:
> Hi everybody,
>
> We recently need to support wildcard search terms "*", "?" together
> with SpanQuery. It seems that there's no SpanWildcardQuery available.
> After looking into the lucene source code for a while, I guess we can
> either:
>
> 1. Use SpanRegexQuery, or
>
> 2. Write our own SpanWildcardQuery, and implements the
> rewrite(IndexReader) method to rewrite the query into a SpanOrQuery
> with some SpanTermQuery.
>
> Of the two approaches, Option 1 seems to be easier. But I am rather
> concerned about the performance of using regular expression. On the
> other hand, I am not sure if there are any other concerns I am not
> aware of for option 2 (i.e. is there a reason why there's no
> SpanWildcardQuery in the first place?)
>
> Any advices ?
>
> Cedric
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29225-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 18 11:44:08 2007
Return-Path: <java-user-return-29225-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46560 invoked from network); 18 Jul 2007 11:43:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jul 2007 11:43:56 -0000
Received: (qmail 31985 invoked by uid 500); 18 Jul 2007 11:43:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31955 invoked by uid 500); 18 Jul 2007 11:43:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31943 invoked by uid 99); 18 Jul 2007 11:43:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Jul 2007 04:43:38 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [136.173.62.228] (HELO SMTP15.europarl.europa.eu) (136.173.62.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Jul 2007 04:43:34 -0700
Received: from EPLUXSEX01.ep.parl.union.eu (unverified) by SMTP15.europarl.europa.eu
 (European Parliament) with ESMTP id <T80e5fa22b388ad3ee4172c@SMTP15.europarl.europa.eu> for <java-user@lucene.apache.org>;
 Wed, 18 Jul 2007 13:43:09 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C7C930.C78F6A28"
Subject: Query in lucene
Date: Wed, 18 Jul 2007 13:42:54 +0200
Message-ID: <CA7398CB8402E445AABF081C51E43ACB08F51C@EPLUXSEX01.ep.parl.union.eu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Query in lucene
Thread-Index: AcfJMMeHV3i/FN0ARzGxKq0+UpHjAg==
From: "WATHELET Thomas" <thomas.wathelet@europarl.europa.eu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C7C930.C78F6A28
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Witch analyser I have to use to find text like this '<commision>'?

------_=_NextPart_001_01C7C930.C78F6A28--

From java-user-return-29226-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 18 13:16:59 2007
Return-Path: <java-user-return-29226-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88194 invoked from network); 18 Jul 2007 13:16:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jul 2007 13:16:58 -0000
Received: (qmail 34023 invoked by uid 500); 18 Jul 2007 13:16:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33938 invoked by uid 500); 18 Jul 2007 13:16:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33924 invoked by uid 99); 18 Jul 2007 13:16:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Jul 2007 06:16:40 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.134.186 as permitted sender)
Received: from [209.85.134.186] (HELO mu-out-0910.google.com) (209.85.134.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Jul 2007 06:16:36 -0700
Received: by mu-out-0910.google.com with SMTP id g7so217544muf
        for <java-user@lucene.apache.org>; Wed, 18 Jul 2007 06:16:14 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=HfZmP1xvau171gy5yYEkbPpEwkCvcMv055kfRQYEbL9R8iuoMLbL5jamPfEWh8K0v9deVQCQi7ThHodwbCJV5W/91rcOwS+qyVmN0Wg4bn5wLcU5IhIgQMV5Wv6Vjv99TmBXo1A//cmINAgCZ6apoe6ToMMoIsiycaaHRKiUuvM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=dR6QSUTolUrhQZb9BonQA1Oqhn5R2vtggEVvdoz76nxFZqGn6IgNrx71QXhW8dbmfuvZ3XUTkODF9oZt5wMsiFy+Q+4sJ3aUS3jic/ZVR1cNdIISCKW++avilK4nwEeBNfaSN72bB5jbCIK78E+mBhxeTtu6LCeH+nLwKSGnnc4=
Received: by 10.82.126.5 with SMTP id y5mr2057764buc.1184764574190;
        Wed, 18 Jul 2007 06:16:14 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Wed, 18 Jul 2007 06:16:14 -0700 (PDT)
Message-ID: <359a92830707180616h5da82005o9c01857b24e17819@mail.gmail.com>
Date: Wed, 18 Jul 2007 09:16:14 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Query in lucene
In-Reply-To: <CA7398CB8402E445AABF081C51E43ACB08F51C@EPLUXSEX01.ep.parl.union.eu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_67545_20554640.1184764574166"
References: <CA7398CB8402E445AABF081C51E43ACB08F51C@EPLUXSEX01.ep.parl.union.eu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_67545_20554640.1184764574166
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

When in doubt, WhitespaceAnalyzer is the most predictable. Note that
it doesn't lower-case the tokens though. Depending upon your
requirements, you can always pre-process your query and indexing
streams and do your own lowercasing and/or character stripping.

You can always create your own analyzer with the building blocks
provided via Filters and Tokenizers....

Erick.

On 7/18/07, WATHELET Thomas <thomas.wathelet@europarl.europa.eu> wrote:
>
> Witch analyser I have to use to find text like this '<commision>'?
>

------=_Part_67545_20554640.1184764574166--

From java-user-return-29227-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 18 16:15:09 2007
Return-Path: <java-user-return-29227-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55639 invoked from network); 18 Jul 2007 16:15:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jul 2007 16:15:08 -0000
Received: (qmail 11970 invoked by uid 500); 18 Jul 2007 16:14:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11937 invoked by uid 500); 18 Jul 2007 16:14:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11925 invoked by uid 99); 18 Jul 2007 16:14:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Jul 2007 09:14:47 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jpsondag@gmail.com designates 66.249.90.182 as permitted sender)
Received: from [66.249.90.182] (HELO ik-out-1112.google.com) (66.249.90.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Jul 2007 09:14:42 -0700
Received: by ik-out-1112.google.com with SMTP id b32so234303ika
        for <java-user@lucene.apache.org>; Wed, 18 Jul 2007 09:14:20 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        b=OTDw2O+I3/RWiSJzYqF9HtBFfPmxaz0jGnXyWmZthDG/btu3afbm+IGF+Ec4AYMiO1bV2BpEGgKV5Vp2kAEbIgnr8bwRHLkb6OuGh92kymplt94tbLUqgtPLyiTaVZ2GPqTTYEiGwZRA6zYM2mwaOkDJHfFFdzf1F0adQGfvEQ4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        b=cweRljnUCof2pHmvn3M6wJkyNrcJdiuxPHG+9eug9YOUXJxuFZ3zqmPWi6vfj/6bxMD58bgLbv5o1wDRLr3o/BL8mHfRn5mS72bkJHwa3gVG/F/z7TUVpZe44udkdo5jx/FeeqOpvlAg8AefHKbnGOdxt/GLgS1ElUOo/ed8KP4=
Received: by 10.65.225.7 with SMTP id c7mr1472247qbr.1184775259887;
        Wed, 18 Jul 2007 09:14:19 -0700 (PDT)
Received: by 10.65.177.7 with HTTP; Wed, 18 Jul 2007 09:14:19 -0700 (PDT)
Message-ID: <bd67edef0707180914x211e48ecxfe497719d2ac9c95@mail.gmail.com>
Date: Wed, 18 Jul 2007 11:14:19 -0500
From: "John Paul Sondag" <jsondag2@uiuc.edu>
Sender: jpsondag@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Does Index have a Tokenizer Built into it
In-Reply-To: <Pine.LNX.4.58.0707172203580.13123@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_81651_9569051.1184775259832"
References: <A955EA1F8FE31749AEC8C998082F6C7CD6EA3A@hai01.hippo.local>
	 <bd67edef0707160939x7f4664cbl595fab6cfd4c1b78@mail.gmail.com>
	 <bd67edef0707171021o5b9160ffv90276ca4ef6d3c20@mail.gmail.com>
	 <Pine.LNX.4.58.0707172203580.13123@hal.rescomp.berkeley.edu>
X-Google-Sender-Auth: 863db5f95e943ba2
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_81651_9569051.1184775259832
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Is there a way to know how big to make the array before hand (how many terms
are in the topic total?).  I'm worried about the efficiency of this, since
I'd have to rebuild every document that is a "hit" on the fly to make a
snippet for each "hit" on the page (say 10 a page).

Now I have to wonder how storing the termPosition vectors in the index +
sorting them by position  compares to storing the location of the document +
using a tokenizer on the document.  Both in the end give me the result I
want.

Any opinions?

--JP

On 7/18/07, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
>
> : After indexing I have been able to retrieve the TermPositionVector from
> the
> : index and it has all of the data, but I cannot find a way where given a
> : position I can retrieve the term at that position. Which is how I was
> hoping
> : to create my contextual snippets.
>
> there is no easy way to go from a position to a term -- coincidently there
> is a very recent thread on this on java-dev...
>
> http://www.nabble.com/Best-Practices-for-getting-Strings-from-a-position-range-tf4084187.html
>
> ...a new API may come out of it, but in the mean time you may be
> interested in taking the approach the current highlighter uses (as
> mentioned in that thread), of using the TermPositionVector to rebuild the
> orriginal tokenstream, then skipping ahead to the positions you are
> interested in.
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_81651_9569051.1184775259832--

From java-user-return-29228-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 18 18:55:09 2007
Return-Path: <java-user-return-29228-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25624 invoked from network); 18 Jul 2007 18:55:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jul 2007 18:55:08 -0000
Received: (qmail 55014 invoked by uid 500); 18 Jul 2007 18:54:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54983 invoked by uid 500); 18 Jul 2007 18:54:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54972 invoked by uid 99); 18 Jul 2007 18:54:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Jul 2007 11:54:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.109.24.24] (HELO smtp-vbr4.xs4all.nl) (194.109.24.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Jul 2007 11:54:44 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr4.xs4all.nl (8.13.8/8.13.8) with ESMTP id l6IIsMSk052428
	for <java-user@lucene.apache.org>; Wed, 18 Jul 2007 20:54:23 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: WildcardQuery and SpanQuery
Date: Wed, 18 Jul 2007 20:54:22 +0200
User-Agent: KMail/1.8.2
References: <839ba01c0707172058l62d17dax1c68097dfdd08ca9@mail.gmail.com> <200707180852.51255.paul.elschot@xs4all.nl> <839ba01c0707180330k4fa29404m655fccf3e8ff5ceb@mail.gmail.com>
In-Reply-To: <839ba01c0707180330k4fa29404m655fccf3e8ff5ceb@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200707182054.22374.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

On Wednesday 18 July 2007 12:30, Cedric Ho wrote:
> Thanks for the quick response Paul =)
> 
> However I am lost while looking at the surround package.

That is not really surprising, the code is factored to the bone, and it
is hardly documented. 
You could have a look at the test code to start.
Also the surround.txt file in the contrib/surround directory should
be helpful.

> Are you 
> suggesting I can solve my problem at hand using the surround package?

In case the surround syntax fits what you need, you might use the surround
package.

You could also use your own parser and target the
o.a.l.queryParser.surround.query package.
The code posted by Mark Miller may solve your problem, too.

Regards,
Paul Elschot


> 
> 
> On 7/18/07, Paul Elschot <paul.elschot@xs4all.nl> wrote:
> > On Wednesday 18 July 2007 05:58, Cedric Ho wrote:
> > > Hi everybody,
> > >
> > > We recently need to support wildcard search terms "*", "?" together
> > > with SpanQuery. It seems that there's no SpanWildcardQuery available.
> > > After looking into the lucene source code for a while, I guess we can
> > > either:
> > >
> > > 1. Use SpanRegexQuery, or
> > >
> > > 2. Write our own SpanWildcardQuery, and implements the
> > > rewrite(IndexReader) method to rewrite the query into a SpanOrQuery
> > > with some SpanTermQuery.
> > >
> > > Of the two approaches, Option 1 seems to be easier. But I am rather
> > > concerned about the performance of using regular expression. On the
> > > other hand, I am not sure if there are any other concerns I am not
> > > aware of for option 2 (i.e. is there a reason why there's no
> > > SpanWildcardQuery in the first place?)
> > >
> > > Any advices ?
> >
> > The basic problem you are facing is that in Lucene
> > the expansion of the terms is tightly coupled to the generation
> > of a combination query using the expanded terms.
> >
> > In contrib/surround the term expansion and query generation
> > are decoupled using a visitor pattern for the terms. The code is here:
> > 
http://svn.apache.org/viewvc/lucene/java/trunk/contrib/surround/src/java/org/apache/lucene/queryParser/surround/query
> >
> > In surround a wild card term can provide either an OR of
> > normal term queries, or a SpanOrQuery of span term queries.
> > This query generation is in class SimpleTerm, which has one method
> > for a normal boolean OR query over the terms, and one for
> > a span query for the terms.
> >
> > In both cases surround uses a regular expression to expand
> > the matching terms, but that could be changed to use
> > another wildcard expansion mechanisms than the ones in
> > SrndPrefixQuery and SrndTruncQuery, which
> > are subclasses of SimpleTerm.
> >
> > With the term expansion and the query combination split,
> > it is also necessary to limit the maximum number of expanded
> > terms in another way than Lucene does. In surround the
> > classes BasicQueryFactory and TooManyBasicQueries are
> > used for that.
> >
> > Regards,
> > Paul Elschot
> >
> >
> >
> > >
> > > Cedric
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29229-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 18 19:41:12 2007
Return-Path: <java-user-return-29229-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50011 invoked from network); 18 Jul 2007 19:41:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jul 2007 19:41:11 -0000
Received: (qmail 42775 invoked by uid 500); 18 Jul 2007 19:40:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42739 invoked by uid 500); 18 Jul 2007 19:40:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42727 invoked by uid 99); 18 Jul 2007 19:40:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Jul 2007 12:40:49 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of askar.zaidi@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Jul 2007 12:40:46 -0700
Received: by ug-out-1314.google.com with SMTP id c2so342497ugf
        for <java-user@lucene.apache.org>; Wed, 18 Jul 2007 12:40:25 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=rp9g9tTx8UWMLBjXPggjq8wxRhi0FJXAtXgHLJ3sXb5t+p4HR/B9OAKZ4fR5vfWYumOx2wUKGT1gWdFb8yljnIe97oiDTXTaUK+1gkWAUg6j9sFuZNGcUVNu9BdAj9PBLXFyNndFNj+v3++t/2XU9GON5aTIPOYhHO0y2nkWArQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=E6OIoJlH5HqN6QIE2izZOOo0cjdsjcqP8G0fJW9UzHRWEcsvw3ELJ4/NCkOw8CWqYn87PGXzCh7xHSDIUcMfVLDjdjh3+N/nJYj3z3SGIYCSjgAm4hJpyxmfk9pGviQUDwHG0JxcsICNA5CknXANi3nHrXb6l0OaJeuX+hcJQKI=
Received: by 10.66.232.9 with SMTP id e9mr551105ugh.1184787625484;
        Wed, 18 Jul 2007 12:40:25 -0700 (PDT)
Received: by 10.66.251.15 with HTTP; Wed, 18 Jul 2007 12:40:25 -0700 (PDT)
Message-ID: <c0c0e1d40707181240q4086b018h5dff9f6b11e7d6a@mail.gmail.com>
Date: Wed, 18 Jul 2007 15:40:25 -0400
From: "Askar Zaidi" <askar.zaidi@gmail.com>
To: java-user@lucene.apache.org
Subject: Lucene shows parts of search query as a HIT
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_86761_26206788.1184787625453"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_86761_26206788.1184787625453
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hey folks,

I am a new Lucene user , I used the following after indexing:

search(searcher, "W. Chan Kim");

Lucene showed me hits of documents where "channel" word existed. Notice that
"Chan" is a part of "Channel" . How do I stop this ?

I am keen to find the exact word.

I used the following, before the search method:

 IndexWriter writer = new IndexWriter(indexPath, new StandardAnalyzer(),
true);

                                writer.addDocument
(createDocument(item,words));
                                writer.optimize();
                                writer.close();
                                searcher = new IndexSearcher(indexPath);

thanks !

AZ

------=_Part_86761_26206788.1184787625453--

From java-user-return-29230-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 18 19:59:25 2007
Return-Path: <java-user-return-29230-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56281 invoked from network); 18 Jul 2007 19:59:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jul 2007 19:59:24 -0000
Received: (qmail 2508 invoked by uid 500); 18 Jul 2007 19:59:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2474 invoked by uid 500); 18 Jul 2007 19:59:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2458 invoked by uid 99); 18 Jul 2007 19:59:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Jul 2007 12:59:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.105.6.20] (HELO sabe.cs.wisc.edu) (128.105.6.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Jul 2007 12:58:59 -0700
Received: from [9.1.67.17] (p1.almaden.ibm.com [198.4.83.52])
	(authenticated bits=0)
	by sabe.cs.wisc.edu (8.13.6/8.13.6) with ESMTP id l6IJwb8B002157
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Wed, 18 Jul 2007 14:58:38 -0500
Message-ID: <469E701F.6080908@cs.wisc.edu>
Date: Wed, 18 Jul 2007 12:55:11 -0700
From: Akanksha Baid <baid@cs.wisc.edu>
User-Agent: Thunderbird 2.0.0.4 (Windows/20070604)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: lucene version?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Is there a way to test as to which version of Lucene was used to build 
an index?

-Akanksha

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29231-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 18 20:15:39 2007
Return-Path: <java-user-return-29231-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61033 invoked from network); 18 Jul 2007 20:15:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jul 2007 20:15:37 -0000
Received: (qmail 35317 invoked by uid 500); 18 Jul 2007 20:15:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35278 invoked by uid 500); 18 Jul 2007 20:15:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35266 invoked by uid 99); 18 Jul 2007 20:15:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Jul 2007 13:15:16 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.134.187 as permitted sender)
Received: from [209.85.134.187] (HELO mu-out-0910.google.com) (209.85.134.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Jul 2007 13:15:13 -0700
Received: by mu-out-0910.google.com with SMTP id g7so357740muf
        for <java-user@lucene.apache.org>; Wed, 18 Jul 2007 13:14:52 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=GmLPjKqs2UkylVcgyzLEFA9g1CGm+3VzFAhccNKc0lK0bi1HjhtvxtjNVmpnPqKbdM+eEQJxSts3xnKpj1PYyyN0XHScqTOjN+laBTQ/5U/CiX9SpdpcPzn4XswV7vc+3Rczusz+jCH1D+VItCnY1y5/CmrH7dcG8Wy3POTwLQ0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=BEevG1kHrhsK0+gGcict4qC+y/iEKx4tmrwDwTtfeF8vaIqJsaHnnWfbbykV3bou1ctzf1j1QWexPNeDuONNxTo7xHts7cnDPSDIxUnloC19/dgL3YkTW7zK/g0ezNthh9ft8y58A3HoDb6nSBb8fQO6ZJMI4l6VxYqYbLF+ylk=
Received: by 10.82.170.2 with SMTP id s2mr1437439bue.1184789692066;
        Wed, 18 Jul 2007 13:14:52 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Wed, 18 Jul 2007 13:14:52 -0700 (PDT)
Message-ID: <359a92830707181314w52013929qee8ae464928355d0@mail.gmail.com>
Date: Wed, 18 Jul 2007 16:14:52 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene shows parts of search query as a HIT
In-Reply-To: <c0c0e1d40707181240q4086b018h5dff9f6b11e7d6a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_71795_8808367.1184789692047"
References: <c0c0e1d40707181240q4086b018h5dff9f6b11e7d6a@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_71795_8808367.1184789692047
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Are you sure that the hit wasn't on "w" or "kim"? The
default for searching is OR...

I recommend that you get a copy of Luke (google lucene luke)
which allows you to examine your index as well as see how
queries parse using various analyzers. It's an invaluable tool...

Best
Erick

On 7/18/07, Askar Zaidi <askar.zaidi@gmail.com> wrote:
>
> Hey folks,
>
> I am a new Lucene user , I used the following after indexing:
>
> search(searcher, "W. Chan Kim");
>
> Lucene showed me hits of documents where "channel" word existed. Notice
> that
> "Chan" is a part of "Channel" . How do I stop this ?
>
> I am keen to find the exact word.
>
> I used the following, before the search method:
>
> IndexWriter writer = new IndexWriter(indexPath, new StandardAnalyzer(),
> true);
>
>                                 writer.addDocument
> (createDocument(item,words));
>                                 writer.optimize();
>                                 writer.close();
>                                 searcher = new IndexSearcher(indexPath);
>
> thanks !
>
> AZ
>

------=_Part_71795_8808367.1184789692047--

From java-user-return-29232-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 18 20:18:24 2007
Return-Path: <java-user-return-29232-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61745 invoked from network); 18 Jul 2007 20:18:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jul 2007 20:18:23 -0000
Received: (qmail 42858 invoked by uid 500); 18 Jul 2007 20:18:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42826 invoked by uid 500); 18 Jul 2007 20:18:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42815 invoked by uid 99); 18 Jul 2007 20:18:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Jul 2007 13:18:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Jul 2007 13:17:59 -0700
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id 43B9BA0B3
	for <java-user@lucene.apache.org>; Wed, 18 Jul 2007 16:17:38 -0400 (EDT)
Received: from web6.messagingengine.com ([10.202.2.215])
  by compute1.internal (MEProxy); Wed, 18 Jul 2007 16:17:38 -0400
Received: by web6.messagingengine.com (Postfix, from userid 99)
	id 0D2DF1240F; Wed, 18 Jul 2007 16:17:38 -0400 (EDT)
Message-Id: <1184789858.18550.1200860149@webmail.messagingengine.com>
X-Sasl-Enc: xPV9Dcc5lbInOtJx0iX90351+R7nzxEjS4jj2wBjGXt8 1184789858
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <469E701F.6080908@cs.wisc.edu>
Subject: Re: lucene version?
In-Reply-To: <469E701F.6080908@cs.wisc.edu>
Date: Wed, 18 Jul 2007 16:17:38 -0400
X-Virus-Checked: Checked by ClamAV on apache.org


I don't think this is stored in the index.

I think the closest you can get is the "format" of the segments_N file
which changes every time the index file format changes.  That at least
lets you narrow it down possibly to a single release if the file
format is changing frequently (eg it has in the past 2 releases).

There's no public API to read the format.  You could instead make your
own class, in package org.apache.lucene.index, that implements a
method similar to how the SegmentInfos.readCurrentVersion(...) method
is implemented, but just returns the format instead.

Mike

"Akanksha Baid" <baid@cs.wisc.edu> wrote:
> Is there a way to test as to which version of Lucene was used to build 
> an index?
> 
> -Akanksha
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29233-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 18 22:08:42 2007
Return-Path: <java-user-return-29233-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1882 invoked from network); 18 Jul 2007 22:08:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jul 2007 22:08:41 -0000
Received: (qmail 3536 invoked by uid 500); 18 Jul 2007 22:08:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3509 invoked by uid 500); 18 Jul 2007 22:08:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3498 invoked by uid 99); 18 Jul 2007 22:08:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Jul 2007 15:08:18 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of askar.zaidi@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Jul 2007 15:08:15 -0700
Received: by ug-out-1314.google.com with SMTP id c2so369171ugf
        for <java-user@lucene.apache.org>; Wed, 18 Jul 2007 15:07:54 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Hyq1/vIuwaVEAo3IsWPVXPZFsX3nLFpYiSy4hLHMwHhAbQJsUYj5uZAEQb+egZ7uo7xUmJQ7hBpEkdLVOJel4xm9J5d6GlU3UD9aeQ5oJrW+3gksCx9bTBJDxtnOoCohGOfD/lk0axayvoRCT7vRQ6xGKgF64JG+eZj7qnEJp0Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=S9ZIah1W/Z27MOGVHhaNSOWwFhdH3LTC5Nfcsk4P6frpYcQBkN0PRHto3P/gicFm5NSxxQ4DZumWTr9W0Cx8DwuQYwKuxdCtDG42XYE+NUTWoiDruVF9RCG5eiitCwIdpH2mOqwC1nQwv5suTa8TMDMB9iyJro4ggDISX3bkYFo=
Received: by 10.67.26.7 with SMTP id d7mr630435ugj.1184796474123;
        Wed, 18 Jul 2007 15:07:54 -0700 (PDT)
Received: by 10.66.251.15 with HTTP; Wed, 18 Jul 2007 15:07:54 -0700 (PDT)
Message-ID: <c0c0e1d40707181507l5255d659ua8c20bbc4a841b78@mail.gmail.com>
Date: Wed, 18 Jul 2007 18:07:54 -0400
From: "Askar Zaidi" <askar.zaidi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene shows parts of search query as a HIT
In-Reply-To: <359a92830707181314w52013929qee8ae464928355d0@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_88423_914297.1184796474085"
References: <c0c0e1d40707181240q4086b018h5dff9f6b11e7d6a@mail.gmail.com>
	 <359a92830707181314w52013929qee8ae464928355d0@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_88423_914297.1184796474085
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hey Guys,

I just checked my Lucene results. It shows a document with the word hit
"change" when I am searching for "Chan", and it considers that as a hit. Is
there a way to stop this and show just the exact word match ?

I started using Lucene yesterday, so I am fairly new !

thanks
AZ

On 7/18/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> Are you sure that the hit wasn't on "w" or "kim"? The
> default for searching is OR...
>
> I recommend that you get a copy of Luke (google lucene luke)
> which allows you to examine your index as well as see how
> queries parse using various analyzers. It's an invaluable tool...
>
> Best
> Erick
>
> On 7/18/07, Askar Zaidi <askar.zaidi@gmail.com> wrote:
> >
> > Hey folks,
> >
> > I am a new Lucene user , I used the following after indexing:
> >
> > search(searcher, "W. Chan Kim");
> >
> > Lucene showed me hits of documents where "channel" word existed. Notice
> > that
> > "Chan" is a part of "Channel" . How do I stop this ?
> >
> > I am keen to find the exact word.
> >
> > I used the following, before the search method:
> >
> > IndexWriter writer = new IndexWriter(indexPath, new StandardAnalyzer(),
> > true);
> >
> >                                 writer.addDocument
> > (createDocument(item,words));
> >                                 writer.optimize();
> >                                 writer.close();
> >                                 searcher = new IndexSearcher(indexPath);
> >
> > thanks !
> >
> > AZ
> >
>

------=_Part_88423_914297.1184796474085--

From java-user-return-29234-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 18 23:41:14 2007
Return-Path: <java-user-return-29234-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47724 invoked from network); 18 Jul 2007 23:41:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jul 2007 23:41:12 -0000
Received: (qmail 43057 invoked by uid 500); 18 Jul 2007 23:40:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42817 invoked by uid 500); 18 Jul 2007 23:40:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42806 invoked by uid 99); 18 Jul 2007 23:40:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Jul 2007 16:40:50 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Jul 2007 16:40:46 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IBJ85-0005pZ-LT
	for java-user@lucene.apache.org; Wed, 18 Jul 2007 16:40:25 -0700
Message-ID: <11679841.post@talk.nabble.com>
Date: Wed, 18 Jul 2007 16:40:25 -0700 (PDT)
From: muraalee <muraalee@gmail.com>
To: java-user@lucene.apache.org
Subject: Dictionary Type Lookup
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: muraalee@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

I am trying to model a Dictionary Type Search in Lucene. My approach was
this

- Load the dictionary file ( words & their meanings ) and index each
dictionary term and associated meaning as a Lucene Document.
- Use IndexReader's term method to peek at the index and get the TermEnum.
TermEnum' next() return's the next term.

The snippet looks like this
  TermEnum browseTermEnum = indexReader.terms(new Term(browseIndex,
browsableTerm));
  while( browseTermEnum.next()){
     System.out.println(browseTermEnum.term().text())
  }

This works fine, and i can fetch next 'n' terms. 
The only problem i see with this route is, i can't get the previous terms
!!!

1. Is there a way to get previous terms from TermEnum ?
2. Is there a better way to model Dictionary Type lookup in Lucene ?


Appreciate your suggestions ?

Thanks
Murali V


-- 
View this message in context: http://www.nabble.com/Dictionary-Type-Lookup-tf4107251.html#a11679841
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29235-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 18 23:44:35 2007
Return-Path: <java-user-return-29235-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48157 invoked from network); 18 Jul 2007 23:44:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jul 2007 23:44:34 -0000
Received: (qmail 47656 invoked by uid 500); 18 Jul 2007 23:44:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47614 invoked by uid 500); 18 Jul 2007 23:44:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47603 invoked by uid 99); 18 Jul 2007 23:44:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Jul 2007 16:44:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.105.6.20] (HELO sabe.cs.wisc.edu) (128.105.6.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Jul 2007 16:44:09 -0700
Received: from [9.1.67.17] (p1.almaden.ibm.com [198.4.83.52])
	(authenticated bits=0)
	by sabe.cs.wisc.edu (8.13.6/8.13.6) with ESMTP id l6INhlqM004220
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Wed, 18 Jul 2007 18:43:48 -0500
Message-ID: <469EA4E8.2080208@cs.wisc.edu>
Date: Wed, 18 Jul 2007 16:40:24 -0700
From: Akanksha Baid <baid@cs.wisc.edu>
User-Agent: Thunderbird 2.0.0.4 (Windows/20070604)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: MoreLikeThis 
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I am using Lucene 2.1.0 and want to use MoreLikeThis for querying 
documents. I understand that the jar file for the same is in contrib. I 
have the contrib folder extracted, but am not sure what to do from this 
point on. What jar file am I looking for and where should  put it. I am 
using Eclipse.

If someone could please point me to some directions for the same , that 
would be a big help.
Thanks.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29236-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 18 23:50:31 2007
Return-Path: <java-user-return-29236-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49447 invoked from network); 18 Jul 2007 23:50:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jul 2007 23:50:30 -0000
Received: (qmail 55081 invoked by uid 500); 18 Jul 2007 23:50:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55037 invoked by uid 500); 18 Jul 2007 23:50:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55025 invoked by uid 99); 18 Jul 2007 23:50:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Jul 2007 16:50:09 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Jul 2007 16:50:06 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IBJH7-00060C-Tc
	for java-user@lucene.apache.org; Wed, 18 Jul 2007 16:49:45 -0700
Message-ID: <11679947.post@talk.nabble.com>
Date: Wed, 18 Jul 2007 16:49:45 -0700 (PDT)
From: muraalee <muraalee@gmail.com>
To: java-user@lucene.apache.org
Subject: TermEnum  - previous() method ?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: muraalee@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi All,
I searched in this forum for anybody looking for need for previous() method
in TermEnum. I found only this link
http://www.nabble.com/How-to-navigate-through-indexed-terms-tf28148.html#a189225

Would it be possible to implement previous() method ? I know i am asking for
quick solution here ;) Just i want to ensure if it not implemented, there
might be a reason. So i can consider alternates approaches to implement
similar feature..

appreciate your thoughts...

Thanks
Murali V
-- 
View this message in context: http://www.nabble.com/TermEnum----previous%28%29-method---tf4107296.html#a11679947
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29237-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 19 00:23:46 2007
Return-Path: <java-user-return-29237-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61237 invoked from network); 19 Jul 2007 00:23:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jul 2007 00:23:44 -0000
Received: (qmail 91161 invoked by uid 500); 19 Jul 2007 00:23:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91127 invoked by uid 500); 19 Jul 2007 00:23:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91116 invoked by uid 99); 19 Jul 2007 00:23:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Jul 2007 17:23:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [130.107.64.135] (HELO Balboa.AI.SRI.COM) (130.107.64.135)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Jul 2007 17:23:17 -0700
Received: from Balboa.AI.SRI.COM (localhost [127.0.0.1])
	by Balboa.AI.SRI.COM (8.11.7p2+Sun/8.10.1) with SMTP id l6J0Mu000786
	for <java-user@lucene.apache.org>; Wed, 18 Jul 2007 17:22:56 -0700 (PDT)
Received: from Salt.AI.SRI.COM ([130.107.65.211])
 by Balboa.AI.SRI.COM (SMSSMTP 4.1.9.35) with SMTP id M2007071817225606703
 for <java-user@lucene.apache.org>; Wed, 18 Jul 2007 17:22:56 -0700
Received: from localhost.ai.sri.com
	([127.0.0.1] helo=[67.169.10.96] ident=root)
	by Salt.AI.SRI.COM with asmtp (Exim 3.35 #1 (Debian))
	id 1IBJnE-0005Qk-00
	for <java-user@lucene.apache.org>; Wed, 18 Jul 2007 17:22:56 -0700
Message-ID: <469EB039.9060802@ai.sri.com>
Date: Wed, 18 Jul 2007 17:28:41 -0700
From: yu <yu@AI.SRI.COM>
User-Agent: Thunderbird 2.0.0.4 (Windows/20070604)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: MoreLikeThis
References: <469EA4E8.2080208@cs.wisc.edu>
In-Reply-To: <469EA4E8.2080208@cs.wisc.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

You can put lucene-queries-2.2.0.jar on your class path or your Eclipse 
project build path. That's all you need.


Jay

Akanksha Baid wrote:
> I am using Lucene 2.1.0 and want to use MoreLikeThis for querying 
> documents. I understand that the jar file for the same is in contrib. 
> I have the contrib folder extracted, but am not sure what to do from 
> this point on. What jar file am I looking for and where should  put 
> it. I am using Eclipse.
>
> If someone could please point me to some directions for the same , 
> that would be a big help.
> Thanks.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29238-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 19 00:25:53 2007
Return-Path: <java-user-return-29238-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61990 invoked from network); 19 Jul 2007 00:25:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jul 2007 00:25:52 -0000
Received: (qmail 95096 invoked by uid 500); 19 Jul 2007 00:25:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94802 invoked by uid 500); 19 Jul 2007 00:25:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94791 invoked by uid 99); 19 Jul 2007 00:25:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Jul 2007 17:25:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.105.6.20] (HELO sabe.cs.wisc.edu) (128.105.6.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Jul 2007 17:25:27 -0700
Received: from [9.1.67.17] (p1.almaden.ibm.com [198.4.83.52])
	(authenticated bits=0)
	by sabe.cs.wisc.edu (8.13.6/8.13.6) with ESMTP id l6J0P5tv004553
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Wed, 18 Jul 2007 19:25:05 -0500
Message-ID: <469EAE92.8080203@cs.wisc.edu>
Date: Wed, 18 Jul 2007 17:21:38 -0700
From: Akanksha Baid <baid@cs.wisc.edu>
User-Agent: Thunderbird 2.0.0.4 (Windows/20070604)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: MoreLikeThis
References: <469EA4E8.2080208@cs.wisc.edu> <469EB039.9060802@ai.sri.com>
In-Reply-To: <469EB039.9060802@ai.sri.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Right , I was making a silly mistake there. I have it working now. 
Thanks for the reply.

yu wrote:
> You can put lucene-queries-2.2.0.jar on your class path or your 
> Eclipse project build path. That's all you need.
>
>
> Jay
>
> Akanksha Baid wrote:
>> I am using Lucene 2.1.0 and want to use MoreLikeThis for querying 
>> documents. I understand that the jar file for the same is in contrib. 
>> I have the contrib folder extracted, but am not sure what to do from 
>> this point on. What jar file am I looking for and where should  put 
>> it. I am using Eclipse.
>>
>> If someone could please point me to some directions for the same , 
>> that would be a big help.
>> Thanks.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29239-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 19 00:29:35 2007
Return-Path: <java-user-return-29239-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63069 invoked from network); 19 Jul 2007 00:29:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jul 2007 00:29:33 -0000
Received: (qmail 99185 invoked by uid 500); 19 Jul 2007 00:29:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99144 invoked by uid 500); 19 Jul 2007 00:29:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99133 invoked by uid 99); 19 Jul 2007 00:29:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Jul 2007 17:29:10 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of stopman@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Jul 2007 17:29:06 -0700
Received: by py-out-1112.google.com with SMTP id f31so1258730pyh
        for <java-user@lucene.apache.org>; Wed, 18 Jul 2007 17:28:44 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=YFd49njjRl1cjhZANlaTLjCrkCcm77Si6q1XXDge4Ff4n9qMGxdsFQKpoxQADqbYDQpX4ZDt4QKv/WTNrgFHDsi7AoLXb0hC0tRHp+AGRzMcZIfmeQt4z6eXM0/lIiW59sy7xCKq1m2TO6orpeh3vDSY5nwwUMxSTbAA5oTkI7w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=rEvSHazoQacGA2SLP88Ma5aQ6hzjSZBtoLg+8feg/VCxVz6YNkwhOckU3Du0Ovk3qj2mhbeG1ys+wToHQr6U3Rp8rAwyQCe+Tg39xll1h7ecrphkAJ0GdKZU7uggHEJ2VudENo5GFGic25leHuf4ppgBUuSnrzN14w7FIjvJ0Kk=
Received: by 10.64.184.16 with SMTP id h16mr3747502qbf.1184804924219;
        Wed, 18 Jul 2007 17:28:44 -0700 (PDT)
Received: by 10.65.176.12 with HTTP; Wed, 18 Jul 2007 17:28:44 -0700 (PDT)
Message-ID: <652776090707181728t416b8839x72fef70d45d6824d@mail.gmail.com>
Date: Wed, 18 Jul 2007 17:28:44 -0700
From: "Michael Stoppelman" <stopman@gmail.com>
To: java-user@lucene.apache.org
Subject: StandardTokenizer is slowing down highlighting a lot
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6349_25640939.1184804924172"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_6349_25640939.1184804924172
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all,

I was tracking down slowness in the contrib highlighter code and it seems
the seemingly simple tokenStream.next() is the culprit.
I've seen multiple posts about this being a possible cause. Has anyone
looked into how to speed up StandardTokenizer? For my
documents it's taking about 70ms per document that's a big ugh! I was
thinking I might just cache the TermVectors in memory if
that will be faster. Anyone have another approach to solving this problem?

-M

------=_Part_6349_25640939.1184804924172--

From java-user-return-29240-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 19 01:00:05 2007
Return-Path: <java-user-return-29240-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72010 invoked from network); 19 Jul 2007 01:00:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jul 2007 01:00:01 -0000
Received: (qmail 36962 invoked by uid 500); 19 Jul 2007 00:59:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36642 invoked by uid 500); 19 Jul 2007 00:59:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36628 invoked by uid 99); 19 Jul 2007 00:59:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Jul 2007 17:59:38 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.239 as permitted sender)
Received: from [66.249.82.239] (HELO wx-out-0506.google.com) (66.249.82.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Jul 2007 17:59:34 -0700
Received: by wx-out-0506.google.com with SMTP id i28so298176wxd
        for <java-user@lucene.apache.org>; Wed, 18 Jul 2007 17:59:13 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=g3ogVi7HBDe0dzgLXAubvK2BXPKROyDRMZY4nQ+MxfjUwZSUIviicu4XPQKfwSjwMvQ2Hk2H0GrD1CBaZe2v4XH8AT7laEAL68XOKQ11r714Wf32imlxABR/noD+KFkGV3MHbfrttDOnXsBe4Hcjk3T5TfFOhJMfPB9icrA58dk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=Z7ruCvhOcqWriUsSZqywMm7Az8vWTVng1A1MkvTJ9Q9hbHU4NsQbxMooi0QvLXTcoeX8tlvby9iv+LSIdWQYVvllMlqndToG+IKtdKhfwsURQfyB5a+KtI5cw9dJ8CdwYjerWm+0AveBGHGazG9i2zg2+hnGw3PXFeHxso/Eetk=
Received: by 10.90.34.3 with SMTP id h3mr2352577agh.1184806753840;
        Wed, 18 Jul 2007 17:59:13 -0700 (PDT)
Received: from ?192.168.1.100? ( [216.66.114.204])
        by mx.google.com with ESMTPS id 39sm1632328agb.2007.07.18.17.59.12
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 18 Jul 2007 17:59:13 -0700 (PDT)
Message-ID: <469EB70C.3040907@gmail.com>
Date: Wed, 18 Jul 2007 20:57:48 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.4 (Windows/20070604)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: StandardTokenizer is slowing down highlighting a lot
References: <652776090707181728t416b8839x72fef70d45d6824d@mail.gmail.com>
In-Reply-To: <652776090707181728t416b8839x72fef70d45d6824d@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Unfortunately, StandardAnalyzer is slow. StandardAnalyzer is really 
limited by JavaCC speed. You cannot shave much more performance out of 
the grammar as it is already about as simple as it gets. You should 
first see if you can get away without it and use a different Analyzer, 
or if you can re-implement just the functionality you need in a custom 
Analyzer. Do you really need the support for abbreviations, companies, 
email address, etc?

If so:

You can use the TokenSources class in the highlighter package to rebuild 
a TokenStream without re-analyzing if you store term offsets and 
positions in the index. I have not found this to be super beneficial, 
even when using the StandardAnalyzer to re-analyze, but it certainly 
could be faster if you have large enough documents.

Your best bet is probably to use 
https://issues.apache.org/jira/browse/LUCENE-644, which is a 
non-positional Highlighter that finds offsets to highlight by looking up 
query term offset information in the index. For larger documents this 
can be much faster than using the standard contrib Highlighter, even if 
your using TokenSources. LUCENE-644 has a much flatter curve than the 
contrib Highlighter as document size goes up.

- Mark

Michael Stoppelman wrote:
> Hi all,
>
> I was tracking down slowness in the contrib highlighter code and it seems
> the seemingly simple tokenStream.next() is the culprit.
> I've seen multiple posts about this being a possible cause. Has anyone
> looked into how to speed up StandardTokenizer? For my
> documents it's taking about 70ms per document that's a big ugh! I was
> thinking I might just cache the TermVectors in memory if
> that will be faster. Anyone have another approach to solving this 
> problem?
>
> -M
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29241-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 19 01:14:59 2007
Return-Path: <java-user-return-29241-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76920 invoked from network); 19 Jul 2007 01:14:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jul 2007 01:14:57 -0000
Received: (qmail 53695 invoked by uid 500); 19 Jul 2007 01:14:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53575 invoked by uid 500); 19 Jul 2007 01:14:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53547 invoked by uid 99); 19 Jul 2007 01:14:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Jul 2007 18:14:34 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of stopman@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Jul 2007 18:14:30 -0700
Received: by py-out-1112.google.com with SMTP id f31so1293081pyh
        for <java-user@lucene.apache.org>; Wed, 18 Jul 2007 18:14:09 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=EoGDcxbV8EHHUJJAYiQQphu8fRDh/Q7U0E6cv0S2G3C74OgwoVurBotHA6QeAC392kXuw8EJSvTGEbdflnOaTbtC8gj8U4UHErIncHIzpZ6YKUSDM1zD6G1HzIf10WzWjPg5VOFKOtOp0/YaQaGl5EL0ZADqIojYlBzwg/GJzcg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=XkPdNzLYQZG+VjAeFl8WtlesL288rsGmfnpBoQ3BVRGHrvK7pRIdQx7MzNC/N73Pfda44iRIwyECJb5RD08d4U5lBZs1FvNiPJer5qfMsWieBWqUcog7G06XEYCPM/y9NoFoPDuAyRxt1wBLlzZTYKiP8UwI13MTgEcAYh9XKyo=
Received: by 10.65.141.18 with SMTP id t18mr3796364qbn.1184807649438;
        Wed, 18 Jul 2007 18:14:09 -0700 (PDT)
Received: by 10.65.176.12 with HTTP; Wed, 18 Jul 2007 18:14:09 -0700 (PDT)
Message-ID: <652776090707181814i3ab83c1fsa9f3a01329f750a7@mail.gmail.com>
Date: Wed, 18 Jul 2007 18:14:09 -0700
From: "Michael Stoppelman" <stopman@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: StandardTokenizer is slowing down highlighting a lot
In-Reply-To: <469EB70C.3040907@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6545_22119922.1184807649375"
References: <652776090707181728t416b8839x72fef70d45d6824d@mail.gmail.com>
	 <469EB70C.3040907@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_6545_22119922.1184807649375
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Might be nice to add a line of documentation to the highlighter on the
possible
performance hit if one uses StandardAnalyzer which probably is a common
case.
Thanks for the speedy response.

-M

On 7/18/07, Mark Miller <markrmiller@gmail.com> wrote:
>
> Unfortunately, StandardAnalyzer is slow. StandardAnalyzer is really
> limited by JavaCC speed. You cannot shave much more performance out of
> the grammar as it is already about as simple as it gets. You should
> first see if you can get away without it and use a different Analyzer,
> or if you can re-implement just the functionality you need in a custom
> Analyzer. Do you really need the support for abbreviations, companies,
> email address, etc?
>
> If so:
>
> You can use the TokenSources class in the highlighter package to rebuild
> a TokenStream without re-analyzing if you store term offsets and
> positions in the index. I have not found this to be super beneficial,
> even when using the StandardAnalyzer to re-analyze, but it certainly
> could be faster if you have large enough documents.
>
> Your best bet is probably to use
> https://issues.apache.org/jira/browse/LUCENE-644, which is a
> non-positional Highlighter that finds offsets to highlight by looking up
> query term offset information in the index. For larger documents this
> can be much faster than using the standard contrib Highlighter, even if
> your using TokenSources. LUCENE-644 has a much flatter curve than the
> contrib Highlighter as document size goes up.
>
> - Mark
>
> Michael Stoppelman wrote:
> > Hi all,
> >
> > I was tracking down slowness in the contrib highlighter code and it
> seems
> > the seemingly simple tokenStream.next() is the culprit.
> > I've seen multiple posts about this being a possible cause. Has anyone
> > looked into how to speed up StandardTokenizer? For my
> > documents it's taking about 70ms per document that's a big ugh! I was
> > thinking I might just cache the TermVectors in memory if
> > that will be faster. Anyone have another approach to solving this
> > problem?
> >
> > -M
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_6545_22119922.1184807649375--

From java-user-return-29242-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 19 04:57:11 2007
Return-Path: <java-user-return-29242-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69886 invoked from network); 19 Jul 2007 04:57:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jul 2007 04:57:10 -0000
Received: (qmail 16746 invoked by uid 500); 19 Jul 2007 04:56:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16709 invoked by uid 500); 19 Jul 2007 04:56:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16698 invoked by uid 99); 19 Jul 2007 04:56:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Jul 2007 21:56:44 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Jul 2007 21:56:39 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IBO3m-0004As-Ou
	for java-user@lucene.apache.org; Wed, 18 Jul 2007 21:56:18 -0700
Message-ID: <11682360.post@talk.nabble.com>
Date: Wed, 18 Jul 2007 21:56:18 -0700 (PDT)
From: miztaken <manish@ccnep.com.np>
To: java-user@lucene.apache.org
Subject: Inrease the performance of Indexing in Lucene
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: manish@ccnep.com.np
X-Virus-Checked: Checked by ClamAV on apache.org


Hi, Please help me.
Its been a month since i am trying lucene.
My requirements are huge, i have to index and search in TB of data. 
I have question regarding three topics:

1. Problem in Indexing
  As i need to index TB of data, so by googling and visiting different forum
i deployed following fashion for indexing:

1. First i created an array of RAMDirectory then i added the documents on
it. 
   After crossing certain threshold i dumped it into my drive as tempIndex1

2. I repeated the same process until all documents are indexed in my drive
as tempindex1. tempindex2...

3. Then finally i loaded the temp directories and merged in as a main full
indexed directories. 

4. I have used threading too for this purpose.

5. This some what removed the optimize() overhead of IndexWriter, as i added
directories together only at the end.

Am i doing this the right way or not, is there any other solution to boost
the indexing process. 

2. Problem in searching

As lucene doesnt support LSI and SVD so as to achieve conceptual search, i
first search the lucene index for the user inputted text then retrieved the
document and then expanded the query using LSI and SVD and then re-searched
the index. 
Now with few words in query doesnt seem to have performance problem but when
i expand the query i.e. when the query contains ten words ORed together then
it takes tremendously unacceptable amount of time to get Hits. Is this
obvious or am i missing something here too.. 
What are the ways to achieve boost in query performance when the query
contains many terms and especially they are ORed, as for ANDed query it
requires less time to produce Hits.
I have used single Indexsearcher and my index is optimized as well..


3. Another Problem

As i require to dump my database table too inside lucene along with fulltext
info. 
What effect will it have on indexing and searching.?
Also i might need to change the name of Field of Document indexed in lucene,
will it be possible.?
I know its not possible to change the value of the field but will it be
possible to change the name of the field or we have to control externally..? 

Please shade me some light in these things:
Your help is highly anticipated

-- 
View this message in context: http://www.nabble.com/Inrease-the-performance-of-Indexing-in-Lucene-tf4108165.html#a11682360
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29243-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 19 07:37:53 2007
Return-Path: <java-user-return-29243-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15884 invoked from network); 19 Jul 2007 07:37:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jul 2007 07:37:51 -0000
Received: (qmail 33370 invoked by uid 500); 19 Jul 2007 07:37:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33335 invoked by uid 500); 19 Jul 2007 07:37:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33324 invoked by uid 99); 19 Jul 2007 07:37:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 00:37:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.11.34] (HELO smtp003.mail.ukl.yahoo.com) (217.12.11.34)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 19 Jul 2007 00:37:17 -0700
Received: (qmail 38507 invoked from network); 19 Jul 2007 07:36:55 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.de;
  h=Received:X-YMail-OSG:Message-ID:Date:From:User-Agent:MIME-Version:To:Subject:Content-Type:Content-Transfer-Encoding;
  b=CS6WCU9cz+8ecME3YWcxNI2V4qGQSYvLvc0WhZGWDks5rcPnExh3jtD9t+63VylMplsCcr3yaKXMUggHNN1/tAmUI9cAHnTJgloKaiQgUmUi103zOE9JNHDkvjNKRZG7AKuQm6m+2Zw+rUJPptLcNLF3kReOFuftIfNx3w/DIfA=  ;
Received: from unknown (HELO ?192.168.0.2?) (you_ment_everything_to_me@80.108.89.196 with plain)
  by smtp003.mail.ukl.yahoo.com with SMTP; 19 Jul 2007 07:36:55 -0000
X-YMail-OSG: 9GufGNAVM1lCMdak1osXDnttCB4xZsAN5cW.LwKEIZptwkU7uI3IcsMU3mMH8zh6YNIqa.WgdQ--
Message-ID: <469F1493.9000507@yahoo.de>
Date: Thu, 19 Jul 2007 09:36:51 +0200
From: Thomas <you_meant_everything_to_me@yahoo.de>
User-Agent: Thunderbird 1.5.0.12 (Windows/20070509)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Lucene and XML Architecture
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

As part of my diploma thesis I'm starting to work on an information 
retrieval
solution for a law and business publisher. Currently I'm trying to define a
flexible and scalable architecture. All the data is present in XML-form and
at the moment simply stored on the file system and indexed and retrieved
by a proprietary solution. The total amount of data is only a few gigabyte.

My intention is to use an open source native XML database like eXist or 
Xindice
as datastore, Lucene for indexing/searching and Cocoon for presentation. 
Does
anyone have experience with the combination of native XML stores and Lucene?
Are there any problems that could arise from this combination?

- Thomas

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29244-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 19 08:26:07 2007
Return-Path: <java-user-return-29244-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30416 invoked from network); 19 Jul 2007 08:26:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jul 2007 08:26:06 -0000
Received: (qmail 12379 invoked by uid 500); 19 Jul 2007 08:25:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12334 invoked by uid 500); 19 Jul 2007 08:25:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12319 invoked by uid 99); 19 Jul 2007 08:25:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 01:25:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [213.133.33.40] (HELO smtp.is.nl) (213.133.33.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 01:25:35 -0700
Received: from [213.133.51.241] (HELO hai01.hippo.local)
  by smtp.is.nl (CommuniGate Pro SMTP 5.0.10)
  with ESMTP id 19841799 for java-user@lucene.apache.org; Thu, 19 Jul 2007 10:25:13 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6619.12
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Lucene shows parts of search query as a HIT
Date: Thu, 19 Jul 2007 10:25:12 +0200
Message-ID: <A955EA1F8FE31749AEC8C998082F6C7CD6EA4A@hai01.hippo.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene shows parts of search query as a HIT
Thread-Index: AcfJiCh+GowcYo/kS5GHjNBiNR5VvQAU+Ibg
From: "Ard Schrijvers" <a.schrijvers@hippo.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hello Askar,

Which analyzer are you using for indexing and searching? If you use an =
analyzer that uses stemming, you might see that "change", "changing", =
"changed", "chan" etc al get reduced to the same word "chan".

In luke you can test with plugins that show you what tokens are created =
from your analyzer,

Regards Ard


>=20
>=20
> Hey Guys,
>=20
> I just checked my Lucene results. It shows a document with=20
> the word hit
> "change" when I am searching for "Chan", and it considers=20
> that as a hit. Is
> there a way to stop this and show just the exact word match ?
>=20
> I started using Lucene yesterday, so I am fairly new !
>=20
> thanks
> AZ
>=20
> On 7/18/07, Erick Erickson <erickerickson@gmail.com> wrote:
> >
> > Are you sure that the hit wasn't on "w" or "kim"? The
> > default for searching is OR...
> >
> > I recommend that you get a copy of Luke (google lucene luke)
> > which allows you to examine your index as well as see how
> > queries parse using various analyzers. It's an invaluable tool...
> >
> > Best
> > Erick
> >
> > On 7/18/07, Askar Zaidi <askar.zaidi@gmail.com> wrote:
> > >
> > > Hey folks,
> > >
> > > I am a new Lucene user , I used the following after indexing:
> > >
> > > search(searcher, "W. Chan Kim");
> > >
> > > Lucene showed me hits of documents where "channel" word=20
> existed. Notice
> > > that
> > > "Chan" is a part of "Channel" . How do I stop this ?
> > >
> > > I am keen to find the exact word.
> > >
> > > I used the following, before the search method:
> > >
> > > IndexWriter writer =3D new IndexWriter(indexPath, new=20
> StandardAnalyzer(),
> > > true);
> > >
> > >                                 writer.addDocument
> > > (createDocument(item,words));
> > >                                 writer.optimize();
> > >                                 writer.close();
> > >                                 searcher =3D new=20
> IndexSearcher(indexPath);
> > >
> > > thanks !
> > >
> > > AZ
> > >
> >
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29245-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 19 09:28:13 2007
Return-Path: <java-user-return-29245-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58680 invoked from network); 19 Jul 2007 09:28:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jul 2007 09:28:12 -0000
Received: (qmail 9608 invoked by uid 500); 19 Jul 2007 09:27:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9375 invoked by uid 500); 19 Jul 2007 09:27:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9364 invoked by uid 99); 19 Jul 2007 09:27:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 02:27:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [213.133.33.40] (HELO smtp.is.nl) (213.133.33.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 02:27:40 -0700
Received: from [213.133.51.241] (HELO hai01.hippo.local)
  by smtp.is.nl (CommuniGate Pro SMTP 5.0.10)
  with ESMTP id 19845747 for java-user@lucene.apache.org; Thu, 19 Jul 2007 11:27:18 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6619.12
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Inrease the performance of Indexing in Lucene
Date: Thu, 19 Jul 2007 11:27:18 +0200
Message-ID: <A955EA1F8FE31749AEC8C998082F6C7CD6EA4B@hai01.hippo.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Inrease the performance of Indexing in Lucene
Thread-Index: AcfJwTjzPjT9ExDRSgiG3r3k26E5gQAJJXYA
From: "Ard Schrijvers" <a.schrijvers@hippo.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

Did take a look at nutch or hadoop or solr? They partially seem to =
address the things you describe...About the LSI I am not sure what has =
been done in those projects

Regards Ard

>=20
> Hi, Please help me.
> Its been a month since i am trying lucene.
> My requirements are huge, i have to index and search in TB of data.=20
> I have question regarding three topics:
>=20
> 1. Problem in Indexing
>   As i need to index TB of data, so by googling and visiting=20
> different forum
> i deployed following fashion for indexing:
>=20
> 1. First i created an array of RAMDirectory then i added the=20
> documents on
> it.=20
>    After crossing certain threshold i dumped it into my drive=20
> as tempIndex1
>=20
> 2. I repeated the same process until all documents are=20
> indexed in my drive
> as tempindex1. tempindex2...
>=20
> 3. Then finally i loaded the temp directories and merged in=20
> as a main full
> indexed directories.=20
>=20
> 4. I have used threading too for this purpose.
>=20
> 5. This some what removed the optimize() overhead of=20
> IndexWriter, as i added
> directories together only at the end.
>=20
> Am i doing this the right way or not, is there any other=20
> solution to boost
> the indexing process.=20
>=20
> 2. Problem in searching
>=20
> As lucene doesnt support LSI and SVD so as to achieve=20
> conceptual search, i
> first search the lucene index for the user inputted text then=20
> retrieved the
> document and then expanded the query using LSI and SVD and=20
> then re-searched
> the index.=20
> Now with few words in query doesnt seem to have performance=20
> problem but when
> i expand the query i.e. when the query contains ten words=20
> ORed together then
> it takes tremendously unacceptable amount of time to get Hits. Is this
> obvious or am i missing something here too..=20
> What are the ways to achieve boost in query performance when the query
> contains many terms and especially they are ORed, as for=20
> ANDed query it
> requires less time to produce Hits.
> I have used single Indexsearcher and my index is optimized as well..
>=20
>=20
> 3. Another Problem
>=20
> As i require to dump my database table too inside lucene=20
> along with fulltext
> info.=20
> What effect will it have on indexing and searching.?
> Also i might need to change the name of Field of Document=20
> indexed in lucene,
> will it be possible.?
> I know its not possible to change the value of the field but=20
> will it be
> possible to change the name of the field or we have to=20
> control externally..?=20
>=20
> Please shade me some light in these things:
> Your help is highly anticipated
>=20
> --=20
> View this message in context:=20
http://www.nabble.com/Inrease-the-performance-of-Indexing-in-Lucene-tf410=
8165.html#a11682360
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29246-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 19 10:23:54 2007
Return-Path: <java-user-return-29246-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79282 invoked from network); 19 Jul 2007 10:23:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jul 2007 10:23:52 -0000
Received: (qmail 14274 invoked by uid 500); 19 Jul 2007 10:23:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14234 invoked by uid 500); 19 Jul 2007 10:23:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14223 invoked by uid 99); 19 Jul 2007 10:23:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 03:23:24 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 03:23:20 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IBT9w-0003vC-5H
	for java-user@lucene.apache.org; Thu, 19 Jul 2007 03:23:00 -0700
Message-ID: <11685997.post@talk.nabble.com>
Date: Thu, 19 Jul 2007 03:23:00 -0700 (PDT)
From: miztaken <manish@ccnep.com.np>
To: java-user@lucene.apache.org
Subject: RE: Inrease the performance of Indexing in Lucene
In-Reply-To: <A955EA1F8FE31749AEC8C998082F6C7CD6EA4B@hai01.hippo.local>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: manish@ccnep.com.np
References: <11682360.post@talk.nabble.com> <A955EA1F8FE31749AEC8C998082F6C7CD6EA4B@hai01.hippo.local>
X-Virus-Checked: Checked by ClamAV on apache.org


I am using lucene in .net.. i.e. dotlucene.
So i believe i have to do this all by my own.
Or am i missing something..

-- 
View this message in context: http://www.nabble.com/Inrease-the-performance-of-Indexing-in-Lucene-tf4108165.html#a11685997
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29247-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 19 10:25:16 2007
Return-Path: <java-user-return-29247-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79925 invoked from network); 19 Jul 2007 10:25:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jul 2007 10:25:15 -0000
Received: (qmail 16876 invoked by uid 500); 19 Jul 2007 10:24:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16582 invoked by uid 500); 19 Jul 2007 10:24:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16571 invoked by uid 99); 19 Jul 2007 10:24:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 03:24:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 03:24:45 -0700
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id 3CB81A2B4
	for <java-user@lucene.apache.org>; Thu, 19 Jul 2007 06:24:24 -0400 (EDT)
Received: from web6.messagingengine.com ([10.202.2.215])
  by compute1.internal (MEProxy); Thu, 19 Jul 2007 06:24:24 -0400
Received: by web6.messagingengine.com (Postfix, from userid 99)
	id 01D7119779; Thu, 19 Jul 2007 06:24:23 -0400 (EDT)
Message-Id: <1184840663.6304.1200959635@webmail.messagingengine.com>
X-Sasl-Enc: dCHQPRQ6yBErw7Cqfnnpx8c6Hp8IWaH89jkd1a9rKl1b 1184840663
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <11682360.post@talk.nabble.com>
Subject: Re: Inrease the performance of Indexing in Lucene
In-Reply-To: <11682360.post@talk.nabble.com>
Date: Thu, 19 Jul 2007 06:24:23 -0400
X-Virus-Checked: Checked by ClamAV on apache.org

This new Wiki page has a number of best practices for maximizing your
indexing speed:

    http://wiki.apache.org/lucene-java/ImproveIndexingSpeed

Also, if appropriate you can try testing with the trunk version of
Lucene which includes substantial optimizations (from LUCENE-843).
Usual caveat: this is not yet released and may have sneaky bugs,
so, use at your own risk....

With LUCENE-843, both the indexing speed and the RAM efficiency of
IndexWriter have been greatly improved such that you can fit more docs
into each MB of RAM (depending on how small the docs are).

Mike

"miztaken" <manish@ccnep.com.np> wrote:
> 
> Hi, Please help me.
> Its been a month since i am trying lucene.
> My requirements are huge, i have to index and search in TB of data. 
> I have question regarding three topics:
> 
> 1. Problem in Indexing
>   As i need to index TB of data, so by googling and visiting different
>   forum
> i deployed following fashion for indexing:
> 
> 1. First i created an array of RAMDirectory then i added the documents on
> it. 
>    After crossing certain threshold i dumped it into my drive as
>    tempIndex1
> 
> 2. I repeated the same process until all documents are indexed in my
> drive
> as tempindex1. tempindex2...
> 
> 3. Then finally i loaded the temp directories and merged in as a main
> full
> indexed directories. 
> 
> 4. I have used threading too for this purpose.
> 
> 5. This some what removed the optimize() overhead of IndexWriter, as i
> added
> directories together only at the end.
> 
> Am i doing this the right way or not, is there any other solution to
> boost
> the indexing process. 
> 
> 2. Problem in searching
> 
> As lucene doesnt support LSI and SVD so as to achieve conceptual search,
> i
> first search the lucene index for the user inputted text then retrieved
> the
> document and then expanded the query using LSI and SVD and then
> re-searched
> the index. 
> Now with few words in query doesnt seem to have performance problem but
> when
> i expand the query i.e. when the query contains ten words ORed together
> then
> it takes tremendously unacceptable amount of time to get Hits. Is this
> obvious or am i missing something here too.. 
> What are the ways to achieve boost in query performance when the query
> contains many terms and especially they are ORed, as for ANDed query it
> requires less time to produce Hits.
> I have used single Indexsearcher and my index is optimized as well..
> 
> 
> 3. Another Problem
> 
> As i require to dump my database table too inside lucene along with
> fulltext
> info. 
> What effect will it have on indexing and searching.?
> Also i might need to change the name of Field of Document indexed in
> lucene,
> will it be possible.?
> I know its not possible to change the value of the field but will it be
> possible to change the name of the field or we have to control
> externally..? 
> 
> Please shade me some light in these things:
> Your help is highly anticipated
> 
> -- 
> View this message in context:
> http://www.nabble.com/Inrease-the-performance-of-Indexing-in-Lucene-tf4108165.html#a11682360
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29248-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 19 10:48:47 2007
Return-Path: <java-user-return-29248-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92990 invoked from network); 19 Jul 2007 10:48:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jul 2007 10:48:45 -0000
Received: (qmail 54483 invoked by uid 500); 19 Jul 2007 10:48:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54191 invoked by uid 500); 19 Jul 2007 10:48:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54180 invoked by uid 99); 19 Jul 2007 10:48:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 03:48:16 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of patrek@gmail.com designates 66.249.90.182 as permitted sender)
Received: from [66.249.90.182] (HELO ik-out-1112.google.com) (66.249.90.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 03:48:13 -0700
Received: by ik-out-1112.google.com with SMTP id b32so500926ika
        for <java-user@lucene.apache.org>; Thu, 19 Jul 2007 03:47:52 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=VIjAt1y+ua2oRymjMmi1hNvq1xzcSVcqd4vXBXBV8Kp/2T3Nue0dW7W+VoUtLFUvGA+89x2x1b1YzySqI36MfNz+SROC6jLbatxsnKLP7ZX/hWLAU8imQ5YI3nfG9c1rlm6Szj3j43Wic5QU4YIzf/Y3uQDh22KiER8IMmrs01M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=EHdLu4Nwom7XdhS5O7FBTS5/X8NqaWsEjKQY4Uj5QHMZyt5wi5BjLjGy4yIaIe5OQcIgGUlYeBBwIJx7qjIjM/RsEceSU5rVzLlNCneTqbfElodp6mP5SP+UEQKhT7yFiqdsK8dBxACAHRCSMHAvN/SbvZ1PlDRoMQE/od/CcJc=
Received: by 10.78.131.8 with SMTP id e8mr435848hud.1184842071880;
        Thu, 19 Jul 2007 03:47:51 -0700 (PDT)
Received: by 10.78.26.4 with HTTP; Thu, 19 Jul 2007 03:47:51 -0700 (PDT)
Message-ID: <48b038c60707190347r338ac477s813afb68b06751a0@mail.gmail.com>
Date: Thu, 19 Jul 2007 06:47:51 -0400
From: "Patrick Turcotte" <patrek@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene and XML Architecture
In-Reply-To: <469F1493.9000507@yahoo.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <469F1493.9000507@yahoo.de>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

There is a Lucene-eXist trigger that allows you to do just that. Take
a look at patch
http://sourceforge.net/tracker/index.php?func=detail&aid=1654205&group_id=17691&atid=317691

Then, from exist, you can search either with XQuery or Lucene syntax.

Patrick

Thomas wrote:
> My intention is to use an open source native XML database like eXist or Xindice
> as datastore, Lucene for indexing/searching and Cocoon for presentation. Does
> anyone have experience with the combination of native XML stores and Lucene?
> Are there any problems that could arise from this combination?
>
> - Thomas
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29249-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 19 12:05:23 2007
Return-Path: <java-user-return-29249-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29554 invoked from network); 19 Jul 2007 12:05:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jul 2007 12:05:23 -0000
Received: (qmail 95479 invoked by uid 500); 19 Jul 2007 12:04:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95369 invoked by uid 500); 19 Jul 2007 12:04:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95358 invoked by uid 99); 19 Jul 2007 12:04:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 05:04:51 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 05:04:49 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IBUk8-0006V9-LL
	for java-user@lucene.apache.org; Thu, 19 Jul 2007 05:04:28 -0700
Message-ID: <11687272.post@talk.nabble.com>
Date: Thu, 19 Jul 2007 05:04:28 -0700 (PDT)
From: miztaken <manish@ccnep.com.np>
To: java-user@lucene.apache.org
Subject: Re: Inrease the performance of Indexing in Lucene
In-Reply-To: <1184840663.6304.1200959635@webmail.messagingengine.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: manish@ccnep.com.np
References: <11682360.post@talk.nabble.com> <1184840663.6304.1200959635@webmail.messagingengine.com>
X-Virus-Checked: Checked by ClamAV on apache.org


But will it be possible to rename the Field's name inside Lucene Document.
I know its not possible to change the value of the Document's Field but can
we change the field's name.
Any Ideas...
I am totally petrified of googling.
-- 
View this message in context: http://www.nabble.com/Inrease-the-performance-of-Indexing-in-Lucene-tf4108165.html#a11687272
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29250-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 19 12:09:46 2007
Return-Path: <java-user-return-29250-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30753 invoked from network); 19 Jul 2007 12:09:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jul 2007 12:09:45 -0000
Received: (qmail 3620 invoked by uid 500); 19 Jul 2007 12:09:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3597 invoked by uid 500); 19 Jul 2007 12:09:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3585 invoked by uid 99); 19 Jul 2007 12:09:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 05:09:14 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of gresh@us.ibm.com designates 32.97.182.141 as permitted sender)
Received: from [32.97.182.141] (HELO e1.ny.us.ibm.com) (32.97.182.141)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 05:09:10 -0700
Received: from d01relay02.pok.ibm.com (d01relay02.pok.ibm.com [9.56.227.234])
	by e1.ny.us.ibm.com (8.13.8/8.13.8) with ESMTP id l6JC8n1V026557
	for <java-user@lucene.apache.org>; Thu, 19 Jul 2007 08:08:49 -0400
Received: from d01av02.pok.ibm.com (d01av02.pok.ibm.com [9.56.224.216])
	by d01relay02.pok.ibm.com (8.13.8/8.13.8/NCO v8.4) with ESMTP id l6JC8k3a529236
	for <java-user@lucene.apache.org>; Thu, 19 Jul 2007 08:08:49 -0400
Received: from d01av02.pok.ibm.com (loopback [127.0.0.1])
	by d01av02.pok.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l6JC8jQu005284
	for <java-user@lucene.apache.org>; Thu, 19 Jul 2007 08:08:46 -0400
Received: from d01ml605.pok.ibm.com (d01ml605.pok.ibm.com [9.56.227.91])
	by d01av02.pok.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l6JC8jmZ005277
	for <java-user@lucene.apache.org>; Thu, 19 Jul 2007 08:08:45 -0400
To: java-user@lucene.apache.org
MIME-Version: 1.0
Subject: question about flush(), optimize(), and deleted documents
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
From: Donna L Gresh <gresh@us.ibm.com>
Message-ID: <OF57F19A72.03859BEC-ON8525731D.0041B83B-8525731D.0042B804@us.ibm.com>
Date: Thu, 19 Jul 2007 08:08:46 -0400
X-MIMETrack: Serialize by Router on D01ML605/01/M/IBM(Build V80_M5_05202007|May 20, 2007) at
 07/19/2007 08:08:47,
	Serialize complete at 07/19/2007 08:08:47
Content-Type: multipart/alternative; boundary="=_alternative 0042B7568525731D_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 0042B7568525731D_=
Content-Type: text/plain; charset="US-ASCII"

I have run into problems with an error that I am trying to access a 
deleted document when doing something along the lines below; my brief 
question is, what is necessary to avoid "seeing" deleted documents? Is an 
optimize() necessary? Or will a flush() or close() accomplish the same 
thing? 

IndexReader ireader = IndexReader.open(directoryName);
int numdocs = ireader.numDocs();
for (int i=0; i<numdocs; i++) {
        Document doc = ireader.document(i);
        Field field = doc.getField("id");



Donna L. Gresh
Services Research, Mathematical Sciences Department
IBM T.J. Watson Research Center
(914) 945-2472
http://www.research.ibm.com/people/g/donnagresh
gresh@us.ibm.com

--=_alternative 0042B7568525731D_=--

From java-user-return-29251-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 19 12:27:07 2007
Return-Path: <java-user-return-29251-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38896 invoked from network); 19 Jul 2007 12:27:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jul 2007 12:27:05 -0000
Received: (qmail 38968 invoked by uid 500); 19 Jul 2007 12:26:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38835 invoked by uid 500); 19 Jul 2007 12:26:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38823 invoked by uid 99); 19 Jul 2007 12:26:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 05:26:37 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 209.85.132.251 as permitted sender)
Received: from [209.85.132.251] (HELO an-out-0708.google.com) (209.85.132.251)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 05:26:34 -0700
Received: by an-out-0708.google.com with SMTP id c5so147230anc
        for <java-user@lucene.apache.org>; Thu, 19 Jul 2007 05:26:13 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Yz7trZEglXhjD34haBvkskgnayO+MzrC00T61MemZdAFI8ymkeObCcMeLNvqzsenSeHDVwLeN46/AXNtmYFd1sYo9tKqdERWAwmoKGFPNO2LonPJ1K66SJ4fdoWgKazA+Sx0bO3Jui41q8KXI8qXLJ81V6YSwgajhZ4aGI2rUmE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=mf+LzQcGLohXUYa7M2WUT5GIi1Hfwr0MwNHO7WPNIe5e0z7qzGunltBseb0CwRmLr44LUKNIMXmYn94thq1hdvBnOIELf1+RIJDwEEZyCMicdP0CR7ChpaEUvRUc7tfzKUC2YF/ZkiXlQzlItqfMCoCjeZopCJu79iVqf8n0rKg=
Received: by 10.100.153.17 with SMTP id a17mr1505869ane.1184847973517;
        Thu, 19 Jul 2007 05:26:13 -0700 (PDT)
Received: by 10.100.38.5 with HTTP; Thu, 19 Jul 2007 05:26:13 -0700 (PDT)
Message-ID: <ab0709bf0707190526v69f77636o613c5ec3812a7f35@mail.gmail.com>
Date: Thu, 19 Jul 2007 08:26:13 -0400
From: "Mark Miller" <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: question about flush(), optimize(), and deleted documents
In-Reply-To: <OF57F19A72.03859BEC-ON8525731D.0041B83B-8525731D.0042B804@us.ibm.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_112253_17766223.1184847973491"
References: <OF57F19A72.03859BEC-ON8525731D.0041B83B-8525731D.0042B804@us.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_112253_17766223.1184847973491
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

All deletes should be removed after an optimize. Otherwise, I think you'll
have to call isDeleted before trying to access the document. numDocs does
not include deletes, but the document() call will retrieve deletes. You
might try using maxDoc() instead of numDocs().

- Mark

------=_Part_112253_17766223.1184847973491--

From java-user-return-29252-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 19 13:08:47 2007
Return-Path: <java-user-return-29252-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54214 invoked from network); 19 Jul 2007 13:08:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jul 2007 13:08:46 -0000
Received: (qmail 31842 invoked by uid 500); 19 Jul 2007 13:08:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31588 invoked by uid 500); 19 Jul 2007 13:08:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31577 invoked by uid 99); 19 Jul 2007 13:08:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 06:08:16 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.134.191 as permitted sender)
Received: from [209.85.134.191] (HELO mu-out-0910.google.com) (209.85.134.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 06:08:13 -0700
Received: by mu-out-0910.google.com with SMTP id g7so620287muf
        for <java-user@lucene.apache.org>; Thu, 19 Jul 2007 06:07:51 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=OWyWpn/aIYlp19FijAlBq7wN6HzCqizga7ri3bY3N4I3WSlUTArt6zfupSV5T7gD69v75L1gTYDe/Wia8EVWqfXVyC01oy1Ww1Hospin7Q+aLx9NLCt+7HMHcHoUZwukKp0CJyfybOhRpGKYAv3yXKKBUKI+oYOMxuTR0JSzwOo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=UlJMy7sAl8NdelP+Pl6WRJ+M8ctPUgRirInMIUnJAto0LTvky6D3XOw1/RiYzzjzusKvcxnbz1c+/h2gV2cPMZBv2jq5eVX7GwEUu5qHXaNXWc9DZ62XKWFU/Db8r+a8LR4zpVF8439pwlHEJUqxPmHR3Rg0Oi0F9j5mcbOsL7E=
Received: by 10.82.112.3 with SMTP id k3mr3221401buc.1184850470711;
        Thu, 19 Jul 2007 06:07:50 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Thu, 19 Jul 2007 06:07:50 -0700 (PDT)
Message-ID: <359a92830707190607g5c5fb26eqbe9dc47d11143d65@mail.gmail.com>
Date: Thu, 19 Jul 2007 09:07:50 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene shows parts of search query as a HIT
In-Reply-To: <A955EA1F8FE31749AEC8C998082F6C7CD6EA4A@hai01.hippo.local>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_77569_12992813.1184850470677"
References: <A955EA1F8FE31749AEC8C998082F6C7CD6EA4A@hai01.hippo.local>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_77569_12992813.1184850470677
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You say there's only one document and you added many. The line

 IndexWriter writer = new IndexWriter(indexPath, new StandardAnalyzer(),
true);

blows away any existing index data and starts over. If you're calling
this fragment for each document, you'll always have only one doc. Try
changing the 'true' to 'false'. Or better yet, open the writer outside the
document add routines and pass it in...

I still have no clue why you're getting the results you are.
StandardAnalyzer
doesn't stem, so that's probably not it. Try query.toString() to see what
the actual query you're submitting is. Then, I'd think about playing with
that
query in Luke to see what's happening.

Best
ErickOn 7/19/07, Ard Schrijvers <a.schrijvers@hippo.nl> wrote:
>
> Hello Askar,
>
> Which analyzer are you using for indexing and searching? If you use an
> analyzer that uses stemming, you might see that "change", "changing",
> "changed", "chan" etc al get reduced to the same word "chan".
>
> In luke you can test with plugins that show you what tokens are created
> from your analyzer,
>
> Regards Ard
>
>
> >
> >
> > Hey Guys,
> >
> > I just checked my Lucene results. It shows a document with
> > the word hit
> > "change" when I am searching for "Chan", and it considers
> > that as a hit. Is
> > there a way to stop this and show just the exact word match ?
> >
> > I started using Lucene yesterday, so I am fairly new !
> >
> > thanks
> > AZ
> >
> > On 7/18/07, Erick Erickson <erickerickson@gmail.com> wrote:
> > >
> > > Are you sure that the hit wasn't on "w" or "kim"? The
> > > default for searching is OR...
> > >
> > > I recommend that you get a copy of Luke (google lucene luke)
> > > which allows you to examine your index as well as see how
> > > queries parse using various analyzers. It's an invaluable tool...
> > >
> > > Best
> > > Erick
> > >
> > > On 7/18/07, Askar Zaidi <askar.zaidi@gmail.com> wrote:
> > > >
> > > > Hey folks,
> > > >
> > > > I am a new Lucene user , I used the following after indexing:
> > > >
> > > > search(searcher, "W. Chan Kim");
> > > >
> > > > Lucene showed me hits of documents where "channel" word
> > existed. Notice
> > > > that
> > > > "Chan" is a part of "Channel" . How do I stop this ?
> > > >
> > > > I am keen to find the exact word.
> > > >
> > > > I used the following, before the search method:
> > > >
> > > > IndexWriter writer = new IndexWriter(indexPath, new
> > StandardAnalyzer(),
> > > > true);
> > > >
> > > >                                 writer.addDocument
> > > > (createDocument(item,words));
> > > >                                 writer.optimize();
> > > >                                 writer.close();
> > > >                                 searcher = new
> > IndexSearcher(indexPath);
> > > >
> > > > thanks !
> > > >
> > > > AZ
> > > >
> > >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_77569_12992813.1184850470677--

From java-user-return-29253-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 19 13:23:54 2007
Return-Path: <java-user-return-29253-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65386 invoked from network); 19 Jul 2007 13:23:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jul 2007 13:23:52 -0000
Received: (qmail 71535 invoked by uid 500); 19 Jul 2007 13:23:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71487 invoked by uid 500); 19 Jul 2007 13:23:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71476 invoked by uid 99); 19 Jul 2007 13:23:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 06:23:21 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 06:23:18 -0700
Received: by ug-out-1314.google.com with SMTP id c2so444508ugf
        for <java-user@lucene.apache.org>; Thu, 19 Jul 2007 06:22:57 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Jv+6JAP7WpHL33DFzlS0END1ZPpzmXbnYiha1WR+azFf1vdYyPdkliU7o58X/hLdF3gBHjKs5kWSjJzIz5nHbkFl4RCPvbTjzYQd/Hx/jlv45HdA73prF661156XwnucTch2W5p+cV/hvqaXSOHxE0MdOVvOMQxvzxgiQkMSJBM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=XW/hSLkebCd+4vwSGiWgkf+o+9LLCdP7jFMvnFXk2rdVMWhiYyURxI+60dgI+ALwYjZNr1PsX9vamh+FyE2MuKK1eLoE8XcJ8bdjZXwlaUuhESf37UWnGd970Lt9W8m8iF0Z7Bjm4tNtjyZVEwiBkwe0XZNDjTbNVw3kss7Ld50=
Received: by 10.82.178.11 with SMTP id a11mr3240458buf.1184851376651;
        Thu, 19 Jul 2007 06:22:56 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Thu, 19 Jul 2007 06:22:56 -0700 (PDT)
Message-ID: <359a92830707190622maab17f6i88563b8087c0b03d@mail.gmail.com>
Date: Thu, 19 Jul 2007 09:22:56 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Inrease the performance of Indexing in Lucene
In-Reply-To: <11687272.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_77845_14797526.1184851376612"
References: <11682360.post@talk.nabble.com>
	 <1184840663.6304.1200959635@webmail.messagingengine.com>
	 <11687272.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_77845_14797526.1184851376612
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Well, instead of googling, look at the lucene searchable archive.
It's linked to from the lucene home page. I have no clue whether
what you want is already in there, but there is a wealth of info
there.....

Erick

On 7/19/07, miztaken <manish@ccnep.com.np> wrote:
>
>
> But will it be possible to rename the Field's name inside Lucene Document.
> I know its not possible to change the value of the Document's Field but
> can
> we change the field's name.
> Any Ideas...
> I am totally petrified of googling.
> --
> View this message in context:
> http://www.nabble.com/Inrease-the-performance-of-Indexing-in-Lucene-tf4108165.html#a11687272
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_77845_14797526.1184851376612--

From java-user-return-29254-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 19 13:37:19 2007
Return-Path: <java-user-return-29254-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70208 invoked from network); 19 Jul 2007 13:37:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jul 2007 13:37:17 -0000
Received: (qmail 22254 invoked by uid 500); 19 Jul 2007 13:36:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22212 invoked by uid 500); 19 Jul 2007 13:36:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22201 invoked by uid 99); 19 Jul 2007 13:36:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 06:36:47 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of gresh@us.ibm.com designates 32.97.182.144 as permitted sender)
Received: from [32.97.182.144] (HELO e4.ny.us.ibm.com) (32.97.182.144)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 06:36:44 -0700
Received: from d01relay02.pok.ibm.com (d01relay02.pok.ibm.com [9.56.227.234])
	by e4.ny.us.ibm.com (8.13.8/8.13.8) with ESMTP id l6JDaMvJ023788
	for <java-user@lucene.apache.org>; Thu, 19 Jul 2007 09:36:22 -0400
Received: from d01av03.pok.ibm.com (d01av03.pok.ibm.com [9.56.224.217])
	by d01relay02.pok.ibm.com (8.13.8/8.13.8/NCO v8.4) with ESMTP id l6JDaKIx457526
	for <java-user@lucene.apache.org>; Thu, 19 Jul 2007 09:36:22 -0400
Received: from d01av03.pok.ibm.com (loopback [127.0.0.1])
	by d01av03.pok.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l6JDaKg8029509
	for <java-user@lucene.apache.org>; Thu, 19 Jul 2007 09:36:20 -0400
Received: from d01ml605.pok.ibm.com (d01ml605.pok.ibm.com [9.56.227.91])
	by d01av03.pok.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l6JDaKto029506
	for <java-user@lucene.apache.org>; Thu, 19 Jul 2007 09:36:20 -0400
In-Reply-To: <ab0709bf0707190526v69f77636o613c5ec3812a7f35@mail.gmail.com>
To: java-user@lucene.apache.org
MIME-Version: 1.0
Subject: Re: question about flush(), optimize(), and deleted documents
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
From: Donna L Gresh <gresh@us.ibm.com>
Message-ID: <OF0754D8B2.83E6A8C4-ON8525731D.004AA748-8525731D.004ABCBC@us.ibm.com>
Date: Thu, 19 Jul 2007 09:36:21 -0400
X-MIMETrack: Serialize by Router on D01ML605/01/M/IBM(Build V80_M5_05202007|May 20, 2007) at
 07/19/2007 09:36:22,
	Serialize complete at 07/19/2007 09:36:22
Content-Type: multipart/alternative; boundary="=_alternative 004ABC5D8525731D_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 004ABC5D8525731D_=
Content-Type: text/plain; charset="US-ASCII"

Thank you-- this is what appeared to be the case, but I wanted to check if 
there 
was something simple I wasn't understanding--

>All deletes should be removed after an optimize. Otherwise, I think 
you'll
>have to call isDeleted before trying to access the document. numDocs does
>not include deletes, but the document() call will retrieve deletes. You
>might try using maxDoc() instead of numDocs().


Donna L. Gresh
Services Research, Mathematical Sciences Department
IBM T.J. Watson Research Center
(914) 945-2472
http://www.research.ibm.com/people/g/donnagresh
gresh@us.ibm.com

--=_alternative 004ABC5D8525731D_=--

From java-user-return-29255-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 19 13:38:49 2007
Return-Path: <java-user-return-29255-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70669 invoked from network); 19 Jul 2007 13:38:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jul 2007 13:38:47 -0000
Received: (qmail 25770 invoked by uid 500); 19 Jul 2007 13:38:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25736 invoked by uid 500); 19 Jul 2007 13:38:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25725 invoked by uid 99); 19 Jul 2007 13:38:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 06:38:17 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of askar.zaidi@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 06:38:14 -0700
Received: by ug-out-1314.google.com with SMTP id c2so447769ugf
        for <java-user@lucene.apache.org>; Thu, 19 Jul 2007 06:37:52 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=C1SyGVYN2xq3z1K+XQYbocMEIms3wkVCHWosrlIm0HV3EeWRPmFW2Pa/c7gU5M9tJHiQWjRB/p6AL4HLTNlf9CNH+hNI9hkg5F+7w1fLpBUOjNmyvYjJy51oeY8le/EUA0zpqzwyHahGckrW89JuuEFxb+j+0DFwVnBA7zPt+lM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Mw7y2YK5sq/R3eKP7fef+H9jEGdXIwlMlaUZ23hMGbcDTXuXtOQG+a8Y32+ZgrrREhD6ZJ5997U47lnzplYPCGRWSKDwWYbOMBCS5+ynU66dxbppz1vG2D1HsizQ3fCQs7o8u3/mSO1neVPknrT5FH4pLOoGIB3oqtAGVOu/2ks=
Received: by 10.67.88.17 with SMTP id q17mr1198241ugl.1184852272752;
        Thu, 19 Jul 2007 06:37:52 -0700 (PDT)
Received: by 10.66.251.15 with HTTP; Thu, 19 Jul 2007 06:37:52 -0700 (PDT)
Message-ID: <c0c0e1d40707190637p62ca3f64uf1ba5bddcdc4937e@mail.gmail.com>
Date: Thu, 19 Jul 2007 09:37:52 -0400
From: "Askar Zaidi" <askar.zaidi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene shows parts of search query as a HIT
In-Reply-To: <359a92830707190607g5c5fb26eqbe9dc47d11143d65@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_95626_27026260.1184852272693"
References: <A955EA1F8FE31749AEC8C998082F6C7CD6EA4A@hai01.hippo.local>
	 <359a92830707190607g5c5fb26eqbe9dc47d11143d65@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_95626_27026260.1184852272693
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Yes, I realized that. Now I have all the documents in the Index. I'll play
around with Luke to see what can stop stemming.

thanks !

AZ

On 7/19/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> You say there's only one document and you added many. The line
>
> IndexWriter writer = new IndexWriter(indexPath, new StandardAnalyzer(),
> true);
>
> blows away any existing index data and starts over. If you're calling
> this fragment for each document, you'll always have only one doc. Try
> changing the 'true' to 'false'. Or better yet, open the writer outside the
> document add routines and pass it in...
>
> I still have no clue why you're getting the results you are.
> StandardAnalyzer
> doesn't stem, so that's probably not it. Try query.toString() to see what
> the actual query you're submitting is. Then, I'd think about playing with
> that
> query in Luke to see what's happening.
>
> Best
> ErickOn 7/19/07, Ard Schrijvers <a.schrijvers@hippo.nl> wrote:
> >
> > Hello Askar,
> >
> > Which analyzer are you using for indexing and searching? If you use an
> > analyzer that uses stemming, you might see that "change", "changing",
> > "changed", "chan" etc al get reduced to the same word "chan".
> >
> > In luke you can test with plugins that show you what tokens are created
> > from your analyzer,
> >
> > Regards Ard
> >
> >
> > >
> > >
> > > Hey Guys,
> > >
> > > I just checked my Lucene results. It shows a document with
> > > the word hit
> > > "change" when I am searching for "Chan", and it considers
> > > that as a hit. Is
> > > there a way to stop this and show just the exact word match ?
> > >
> > > I started using Lucene yesterday, so I am fairly new !
> > >
> > > thanks
> > > AZ
> > >
> > > On 7/18/07, Erick Erickson <erickerickson@gmail.com> wrote:
> > > >
> > > > Are you sure that the hit wasn't on "w" or "kim"? The
> > > > default for searching is OR...
> > > >
> > > > I recommend that you get a copy of Luke (google lucene luke)
> > > > which allows you to examine your index as well as see how
> > > > queries parse using various analyzers. It's an invaluable tool...
> > > >
> > > > Best
> > > > Erick
> > > >
> > > > On 7/18/07, Askar Zaidi <askar.zaidi@gmail.com> wrote:
> > > > >
> > > > > Hey folks,
> > > > >
> > > > > I am a new Lucene user , I used the following after indexing:
> > > > >
> > > > > search(searcher, "W. Chan Kim");
> > > > >
> > > > > Lucene showed me hits of documents where "channel" word
> > > existed. Notice
> > > > > that
> > > > > "Chan" is a part of "Channel" . How do I stop this ?
> > > > >
> > > > > I am keen to find the exact word.
> > > > >
> > > > > I used the following, before the search method:
> > > > >
> > > > > IndexWriter writer = new IndexWriter(indexPath, new
> > > StandardAnalyzer(),
> > > > > true);
> > > > >
> > > > >                                 writer.addDocument
> > > > > (createDocument(item,words));
> > > > >                                 writer.optimize();
> > > > >                                 writer.close();
> > > > >                                 searcher = new
> > > IndexSearcher(indexPath);
> > > > >
> > > > > thanks !
> > > > >
> > > > > AZ
> > > > >
> > > >
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_95626_27026260.1184852272693--

From java-user-return-29256-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 19 13:41:35 2007
Return-Path: <java-user-return-29256-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71472 invoked from network); 19 Jul 2007 13:41:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jul 2007 13:41:33 -0000
Received: (qmail 34876 invoked by uid 500); 19 Jul 2007 13:40:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34820 invoked by uid 500); 19 Jul 2007 13:40:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34795 invoked by uid 99); 19 Jul 2007 13:40:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 06:40:56 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_SORBS_WEB
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.197.35.8] (HELO rediff.co.in) (203.197.35.8)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 06:40:51 -0700
Received: (qmail 8827 invoked from network); 19 Jul 2007 19:02:25 +0530
Received: from unknown (HELO bhavin) (202.137.232.130)
  by mailserver with SMTP; 19 Jul 2007 19:02:25 +0530
Message-ID: <00f601c7ca0a$c018c140$0b0410ac@bhavin>
Reply-To: "Bhavin Pandya" <bhavinp@rediff.co.in>
From: "Bhavin Pandya" <bhavinp@rediff.co.in>
To: <java-user@lucene.apache.org>
Subject: Where exact score is getting calculate?
Date: Thu, 19 Jul 2007 19:13:12 +0530
Organization: rediff.com
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_00F3_01C7CA38.D99A35D0"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_00F3_01C7CA38.D99A35D0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi,

The score i am getting in DocCollector is raw score... which is not =
necessary between 0 and 1.
Where lucene exactly calculating the final score...? Or
what if i want final score in DocCollector ??? How to ???

Regards.
Bhavin pandya
------=_NextPart_000_00F3_01C7CA38.D99A35D0--


From java-user-return-29257-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 19 13:49:52 2007
Return-Path: <java-user-return-29257-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74111 invoked from network); 19 Jul 2007 13:49:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jul 2007 13:49:50 -0000
Received: (qmail 55352 invoked by uid 500); 19 Jul 2007 13:49:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55318 invoked by uid 500); 19 Jul 2007 13:49:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55307 invoked by uid 99); 19 Jul 2007 13:49:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 06:49:20 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [216.64.83.114] (HELO mail.rci-together.com) (216.64.83.114)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 06:49:16 -0700
Received: from [10.1.11.120] (helo=thomrandolph.rci-together.com)
	by rcifw1.rci-together.com with esmtp (Exim 4.43)
	id 1IBWBv-0000TI-UY
	for java-user@lucene.apache.org; Thu, 19 Jul 2007 09:37:15 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C7CA0B.8CB84BA3"
Subject: Lucene newbie
Date: Thu, 19 Jul 2007 09:48:55 -0400
Message-ID: <E6F9A32D2602B042BE87133C08D8692F2D6E6F@thomrandolph.rci-together.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene newbie
Thread-Index: AcfKC4xLN7xzDGPwTyaw4gYG4p3WTg==
From: "Yom Chouloute" <ychouloute@rci-together.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C7CA0B.8CB84BA3
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hello All=20
=09
I am working on a couple of projects that require some search engine
capabilities.=20
I came across Lucene and I think that it might be good tool to
incorporate into the project.=20
I started implementing the software but got some error messages that
prevent me from going further.

My time frame at this moment will not allow me so get the full grasp of
that software so if anybody on that list would like to do some contract
work you can contact me at Contact me at Teck@napboule.com
(possibly with rate,  experience)

I have emailed the list yesterday with a different email address but
never got an answer. Even though a US location is preferred but the
location is not an issue, I am in Florida. =20
As long as we can communicate, we should be fine.

Sincerely, =20




------_=_NextPart_001_01C7CA0B.8CB84BA3--

From java-user-return-29258-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 19 13:52:11 2007
Return-Path: <java-user-return-29258-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74987 invoked from network); 19 Jul 2007 13:52:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jul 2007 13:52:10 -0000
Received: (qmail 63851 invoked by uid 500); 19 Jul 2007 13:51:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63820 invoked by uid 500); 19 Jul 2007 13:51:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63809 invoked by uid 99); 19 Jul 2007 13:51:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 06:51:40 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 06:51:37 -0700
Received: by ug-out-1314.google.com with SMTP id c2so450724ugf
        for <java-user@lucene.apache.org>; Thu, 19 Jul 2007 06:51:16 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=EATvsT1GcUu2eNvXHwsX1mwbt2tWgx18PRdRMywwddSSa0vF6z12WpVhMK6myHTY4N/XUJ/G60BZpUlZD9XB0gg72L0WnB4Fpt1N6T9PibE7ofCJuBd2Av19UZQPfsq4WznTV4z+9qPofr6HW4qgESKz/Ab6VPQyyF0AGHPUdq8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=gBS55NBVMQe4z5VL4WKUXVU+L1JXFTarbXQou1UbFIjGXjrMd6T7pb7e2jeajrv2dliJE1yxDnI2x0aOnzQGyb+8/swjTaVJrGHuGcM4YpsA2KB8xrKQKb0ZH59vsHxFQ4siAleRbuoI+2+det8/xJk5bAM5Gd0SPoR4fHBWUT8=
Received: by 10.82.181.10 with SMTP id d10mr3050738buf.1184853076395;
        Thu, 19 Jul 2007 06:51:16 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Thu, 19 Jul 2007 06:51:16 -0700 (PDT)
Message-ID: <359a92830707190651p71b82349oae5e103f42ef1bf4@mail.gmail.com>
Date: Thu, 19 Jul 2007 09:51:16 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org, "Bhavin Pandya" <bhavinp@rediff.co.in>
Subject: Re: Where exact score is getting calculate?
In-Reply-To: <00f601c7ca0a$c018c140$0b0410ac@bhavin>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_78167_27304380.1184853076334"
References: <00f601c7ca0a$c018c140$0b0410ac@bhavin>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_78167_27304380.1184853076334
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I don't think you can using a HitCollector. If you used a TopDocs instead,
you have access to the maximum score and can normalize the
scores to between 0 and 1, but I don't know if that suits your needs.

Erick

On 7/19/07, Bhavin Pandya <bhavinp@rediff.co.in> wrote:
>
> Hi,
>
> The score i am getting in DocCollector is raw score... which is not
> necessary between 0 and 1.
> Where lucene exactly calculating the final score...? Or
> what if i want final score in DocCollector ??? How to ???
>
> Regards.
> Bhavin pandya

------=_Part_78167_27304380.1184853076334--

From java-user-return-29259-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 19 14:14:29 2007
Return-Path: <java-user-return-29259-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82685 invoked from network); 19 Jul 2007 14:14:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jul 2007 14:14:14 -0000
Received: (qmail 38607 invoked by uid 500); 19 Jul 2007 14:13:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38574 invoked by uid 500); 19 Jul 2007 14:13:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38555 invoked by uid 99); 19 Jul 2007 14:13:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 07:13:43 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=RCVD_IN_SORBS_WEB
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.197.35.8] (HELO rediff.co.in) (203.197.35.8)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 07:13:41 -0700
Received: (qmail 17082 invoked from network); 19 Jul 2007 19:35:16 +0530
Received: from unknown (HELO bhavin) (202.137.232.130)
  by mailserver with SMTP; 19 Jul 2007 19:35:16 +0530
Message-ID: <012101c7ca0f$56eea8b0$0b0410ac@bhavin>
Reply-To: "Bhavin Pandya" <bhavinp@rediff.co.in>
From: "Bhavin Pandya" <bhavinp@rediff.co.in>
To: <java-user@lucene.apache.org>
Cc: "Erick Erickson" <erickerickson@gmail.com>
References: <00f601c7ca0a$c018c140$0b0410ac@bhavin> <359a92830707190651p71b82349oae5e103f42ef1bf4@mail.gmail.com>
Subject: distinct query how to???
Date: Thu, 19 Jul 2007 19:46:03 +0530
Organization: rediff.com
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

Hi erick,
Thanks for your prompt reply...

Let me explain what i m doing....

There is lucene query which returns relevant result when i am searching 
through Hits object.
But when i m using same query using DocCollector ( I want this way  because 
want to remove duplicate records at search time )
.. Its giving results which is not relevant although its printing score in 
descending order.

Here is what i am doing in DocCollector...

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
public void collect(int doc, float score)
{

    Document document = reader.document(doc);
    String photoid = document.get("photoid");
    if (!uniquelist.contains(photoid))
    {
        uniquelist.add(photoid);
        hq.insert(new ScoreDoc(doc, score));
        minScore = ((ScoreDoc)hq.top()).score; // maintain minScore
    }
 }

public TopDocs topDocs() {

    ScoreDoc[] scoreDocs = new ScoreDoc[hq.size()];
    for (int i = hq.size()-1; i >= 0; i--)      // put docs in array
      scoreDocs[i] = (ScoreDoc)hq.pop();

    float maxScore = (totalHits==0)
      ? Float.NEGATIVE_INFINITY
      : scoreDocs[0].score;

    return new TopDocs(totalHits, scoreDocs, maxScore);
  }


public ArrayList getAllDocIds()
  {
   ArrayList docidlist = new ArrayList();
   ArrayList mainlist = new ArrayList();
   TopDocs tc = topDocs();
   ScoreDoc[] scoredoc = tc.scoreDocs;

   for (int i=0;i<scoredoc.length;i++)
   {
        doclist.add(new Integer(scoredoc[i].doc).toString());
    }
    return doclist;
}
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

Is this a proper way to find duplicate records ???  If yes please let me 
know where i am wrong.. ???
Note: In this case, i can not handle duplicate records at index time...

Thanks.
Bhavin pandya




----- Original Message ----- 
From: "Erick Erickson" <erickerickson@gmail.com>
To: <java-user@lucene.apache.org>; "Bhavin Pandya" <bhavinp@rediff.co.in>
Sent: Thursday, July 19, 2007 7:21 PM
Subject: Re: Where exact score is getting calculate?


>I don't think you can using a HitCollector. If you used a TopDocs instead,
> you have access to the maximum score and can normalize the
> scores to between 0 and 1, but I don't know if that suits your needs.
>
> Erick
>
> On 7/19/07, Bhavin Pandya <bhavinp@rediff.co.in> wrote:
>>
>> Hi,
>>
>> The score i am getting in DocCollector is raw score... which is not
>> necessary between 0 and 1.
>> Where lucene exactly calculating the final score...? Or
>> what if i want final score in DocCollector ??? How to ???
>>
>> Regards.
>> Bhavin pandya
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29260-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 19 14:30:47 2007
Return-Path: <java-user-return-29260-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90772 invoked from network); 19 Jul 2007 14:30:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jul 2007 14:30:46 -0000
Received: (qmail 89804 invoked by uid 500); 19 Jul 2007 14:30:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89770 invoked by uid 500); 19 Jul 2007 14:30:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89746 invoked by uid 99); 19 Jul 2007 14:30:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 07:30:07 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of askar.zaidi@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 07:30:04 -0700
Received: by ug-out-1314.google.com with SMTP id c2so459479ugf
        for <java-user@lucene.apache.org>; Thu, 19 Jul 2007 07:29:42 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=mekdmtc2SKjNq5MFFhmFALab8+Z3VBrvqMgEM9tF6bE1joJ20SatcSkHpCtR3WWX8fM1ujMb0PbuLRK+QkK7/e7cahD3Flk+vzggXrhBwjqfCgJi+OYZU+eDMxERwJ+mtwSKpHFMAvxaYPwozQ7kDPSm+jJ9H5ID3REe+wHQao8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=T4DKtq9M0tSvXfBgOPjrsG4XHRDzzFp/O776KIYrcj0GdkpCscOtU0WoNG0SGShzS8ZE8R0CEUVvkyzw8vrWxaFZ8R2aCiCpsixapB/OmYn6W24akfCsQqvIljWmTGCkHFvFYmVGiKfVlyUnohKWkK4/B3TUWR/vl1MmXR3WsnA=
Received: by 10.67.29.7 with SMTP id g7mr1213111ugj.1184855382178;
        Thu, 19 Jul 2007 07:29:42 -0700 (PDT)
Received: by 10.66.251.15 with HTTP; Thu, 19 Jul 2007 07:29:42 -0700 (PDT)
Message-ID: <c0c0e1d40707190729p40ea2826l73907fa0dbb6bad2@mail.gmail.com>
Date: Thu, 19 Jul 2007 10:29:42 -0400
From: "Askar Zaidi" <askar.zaidi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene shows parts of search query as a HIT
In-Reply-To: <359a92830707190607g5c5fb26eqbe9dc47d11143d65@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_96465_26733597.1184855382124"
References: <A955EA1F8FE31749AEC8C998082F6C7CD6EA4A@hai01.hippo.local>
	 <359a92830707190607g5c5fb26eqbe9dc47d11143d65@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_96465_26733597.1184855382124
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hey Erik,

How can I change the default Lucene OR property to AND.

When I tried query.toString(), I got

contents:w contents:chan contents: kim

Thats fine, but its doing OR, how can I make it AND so that it shows:

contents: W Chan Kim ??

thanks a ton !

AZ

On 7/19/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> You say there's only one document and you added many. The line
>
> IndexWriter writer = new IndexWriter(indexPath, new StandardAnalyzer(),
> true);
>
> blows away any existing index data and starts over. If you're calling
> this fragment for each document, you'll always have only one doc. Try
> changing the 'true' to 'false'. Or better yet, open the writer outside the
> document add routines and pass it in...
>
> I still have no clue why you're getting the results you are.
> StandardAnalyzer
> doesn't stem, so that's probably not it. Try query.toString() to see what
> the actual query you're submitting is. Then, I'd think about playing with
> that
> query in Luke to see what's happening.
>
> Best
> ErickOn 7/19/07, Ard Schrijvers <a.schrijvers@hippo.nl> wrote:
> >
> > Hello Askar,
> >
> > Which analyzer are you using for indexing and searching? If you use an
> > analyzer that uses stemming, you might see that "change", "changing",
> > "changed", "chan" etc al get reduced to the same word "chan".
> >
> > In luke you can test with plugins that show you what tokens are created
> > from your analyzer,
> >
> > Regards Ard
> >
> >
> > >
> > >
> > > Hey Guys,
> > >
> > > I just checked my Lucene results. It shows a document with
> > > the word hit
> > > "change" when I am searching for "Chan", and it considers
> > > that as a hit. Is
> > > there a way to stop this and show just the exact word match ?
> > >
> > > I started using Lucene yesterday, so I am fairly new !
> > >
> > > thanks
> > > AZ
> > >
> > > On 7/18/07, Erick Erickson <erickerickson@gmail.com> wrote:
> > > >
> > > > Are you sure that the hit wasn't on "w" or "kim"? The
> > > > default for searching is OR...
> > > >
> > > > I recommend that you get a copy of Luke (google lucene luke)
> > > > which allows you to examine your index as well as see how
> > > > queries parse using various analyzers. It's an invaluable tool...
> > > >
> > > > Best
> > > > Erick
> > > >
> > > > On 7/18/07, Askar Zaidi <askar.zaidi@gmail.com> wrote:
> > > > >
> > > > > Hey folks,
> > > > >
> > > > > I am a new Lucene user , I used the following after indexing:
> > > > >
> > > > > search(searcher, "W. Chan Kim");
> > > > >
> > > > > Lucene showed me hits of documents where "channel" word
> > > existed. Notice
> > > > > that
> > > > > "Chan" is a part of "Channel" . How do I stop this ?
> > > > >
> > > > > I am keen to find the exact word.
> > > > >
> > > > > I used the following, before the search method:
> > > > >
> > > > > IndexWriter writer = new IndexWriter(indexPath, new
> > > StandardAnalyzer(),
> > > > > true);
> > > > >
> > > > >                                 writer.addDocument
> > > > > (createDocument(item,words));
> > > > >                                 writer.optimize();
> > > > >                                 writer.close();
> > > > >                                 searcher = new
> > > IndexSearcher(indexPath);
> > > > >
> > > > > thanks !
> > > > >
> > > > > AZ
> > > > >
> > > >
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_96465_26733597.1184855382124--

From java-user-return-29261-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 19 14:41:58 2007
Return-Path: <java-user-return-29261-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94259 invoked from network); 19 Jul 2007 14:41:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jul 2007 14:41:57 -0000
Received: (qmail 23061 invoked by uid 500); 19 Jul 2007 14:41:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23022 invoked by uid 500); 19 Jul 2007 14:41:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23011 invoked by uid 99); 19 Jul 2007 14:41:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 07:41:26 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.134.187 as permitted sender)
Received: from [209.85.134.187] (HELO mu-out-0910.google.com) (209.85.134.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 07:41:23 -0700
Received: by mu-out-0910.google.com with SMTP id g7so653356muf
        for <java-user@lucene.apache.org>; Thu, 19 Jul 2007 07:41:01 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=CASvfdkd4rfwX+gV0jBVv5ZsAQdzPyvCBxqg/YLHgKuf8yoOf1kzNcVvL0YgraTjWPc9nfEAlA3j1E5KlCpQt7hcZR5K9r4CpGycEXQFbu0fTDQ9W4FVcdqlak593i4fw2UJBPO94CLCLEJnDeDddHd8Mp7XkbPfHCuwPgaOXAU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Gmy7W91AiWO89y6re6iacJp8Fs+ZO+wYpO4ZSX2pnEIYW0k54TTuCzBxZPwwi45717dOeUAl5+cGul4cfNA6n/oSebpCcMmbCAy2oZhePoKDS2rXhdsKpMcmrUvJAmehe5Aza4I+XuFr9vQGFNfXl1oaSmJorD5Lhz/teVaBIyE=
Received: by 10.82.152.16 with SMTP id z16mr2166060bud.1184856060909;
        Thu, 19 Jul 2007 07:41:00 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Thu, 19 Jul 2007 07:41:00 -0700 (PDT)
Message-ID: <359a92830707190741q609d6fbhb992b603b4ba0a0a@mail.gmail.com>
Date: Thu, 19 Jul 2007 10:41:00 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene shows parts of search query as a HIT
In-Reply-To: <c0c0e1d40707190729p40ea2826l73907fa0dbb6bad2@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_78635_7707809.1184856060805"
References: <A955EA1F8FE31749AEC8C998082F6C7CD6EA4A@hai01.hippo.local>
	 <359a92830707190607g5c5fb26eqbe9dc47d11143d65@mail.gmail.com>
	 <c0c0e1d40707190729p40ea2826l73907fa0dbb6bad2@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_78635_7707809.1184856060805
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

QueryParser.setDefaultOperator

On 7/19/07, Askar Zaidi <askar.zaidi@gmail.com> wrote:
>
> Hey Erik,
>
> How can I change the default Lucene OR property to AND.
>
> When I tried query.toString(), I got
>
> contents:w contents:chan contents: kim
>
> Thats fine, but its doing OR, how can I make it AND so that it shows:
>
> contents: W Chan Kim ??
>
> thanks a ton !
>
> AZ
>
> On 7/19/07, Erick Erickson <erickerickson@gmail.com> wrote:
> >
> > You say there's only one document and you added many. The line
> >
> > IndexWriter writer = new IndexWriter(indexPath, new StandardAnalyzer(),
> > true);
> >
> > blows away any existing index data and starts over. If you're calling
> > this fragment for each document, you'll always have only one doc. Try
> > changing the 'true' to 'false'. Or better yet, open the writer outside
> the
> > document add routines and pass it in...
> >
> > I still have no clue why you're getting the results you are.
> > StandardAnalyzer
> > doesn't stem, so that's probably not it. Try query.toString() to see
> what
> > the actual query you're submitting is. Then, I'd think about playing
> with
> > that
> > query in Luke to see what's happening.
> >
> > Best
> > ErickOn 7/19/07, Ard Schrijvers <a.schrijvers@hippo.nl> wrote:
> > >
> > > Hello Askar,
> > >
> > > Which analyzer are you using for indexing and searching? If you use an
> > > analyzer that uses stemming, you might see that "change", "changing",
> > > "changed", "chan" etc al get reduced to the same word "chan".
> > >
> > > In luke you can test with plugins that show you what tokens are
> created
> > > from your analyzer,
> > >
> > > Regards Ard
> > >
> > >
> > > >
> > > >
> > > > Hey Guys,
> > > >
> > > > I just checked my Lucene results. It shows a document with
> > > > the word hit
> > > > "change" when I am searching for "Chan", and it considers
> > > > that as a hit. Is
> > > > there a way to stop this and show just the exact word match ?
> > > >
> > > > I started using Lucene yesterday, so I am fairly new !
> > > >
> > > > thanks
> > > > AZ
> > > >
> > > > On 7/18/07, Erick Erickson <erickerickson@gmail.com> wrote:
> > > > >
> > > > > Are you sure that the hit wasn't on "w" or "kim"? The
> > > > > default for searching is OR...
> > > > >
> > > > > I recommend that you get a copy of Luke (google lucene luke)
> > > > > which allows you to examine your index as well as see how
> > > > > queries parse using various analyzers. It's an invaluable tool...
> > > > >
> > > > > Best
> > > > > Erick
> > > > >
> > > > > On 7/18/07, Askar Zaidi <askar.zaidi@gmail.com> wrote:
> > > > > >
> > > > > > Hey folks,
> > > > > >
> > > > > > I am a new Lucene user , I used the following after indexing:
> > > > > >
> > > > > > search(searcher, "W. Chan Kim");
> > > > > >
> > > > > > Lucene showed me hits of documents where "channel" word
> > > > existed. Notice
> > > > > > that
> > > > > > "Chan" is a part of "Channel" . How do I stop this ?
> > > > > >
> > > > > > I am keen to find the exact word.
> > > > > >
> > > > > > I used the following, before the search method:
> > > > > >
> > > > > > IndexWriter writer = new IndexWriter(indexPath, new
> > > > StandardAnalyzer(),
> > > > > > true);
> > > > > >
> > > > > >                                 writer.addDocument
> > > > > > (createDocument(item,words));
> > > > > >                                 writer.optimize();
> > > > > >                                 writer.close();
> > > > > >                                 searcher = new
> > > > IndexSearcher(indexPath);
> > > > > >
> > > > > > thanks !
> > > > > >
> > > > > > AZ
> > > > > >
> > > > >
> > > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
>

------=_Part_78635_7707809.1184856060805--

From java-user-return-29262-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 19 15:18:57 2007
Return-Path: <java-user-return-29262-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71727 invoked from network); 19 Jul 2007 15:18:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jul 2007 15:18:56 -0000
Received: (qmail 26896 invoked by uid 500); 19 Jul 2007 15:18:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26865 invoked by uid 500); 19 Jul 2007 15:18:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26850 invoked by uid 99); 19 Jul 2007 15:18:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 08:18:24 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.234 as permitted sender)
Received: from [66.249.82.234] (HELO wx-out-0506.google.com) (66.249.82.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 08:18:21 -0700
Received: by wx-out-0506.google.com with SMTP id i28so471711wxd
        for <java-user@lucene.apache.org>; Thu, 19 Jul 2007 08:18:00 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=YUjAYTV/TXk6Lif7Krd9k0EIbxWNA+0V9lCjFct2pa5+hN3Mwpe++c/RlMyJDU8jdwcl4U1GE/SEdyB1gCwKRBL4Xa0dXRu/5G22pqJoAbBTM0e+lhfb9z7gqxgEvwKMoteGmjpHeUuWdVq9yGkiRVbQfaGKqr/kBYn5OWHLB08=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=DaTUAtea+vVAM7+mlN+JAwgM+MtvItycMOHEF60FhL+IPYRcfYji+cN3N8CpA6HiSB0q4H9deivN+u/TYzm9B7Nf8uXsgLbhIhkTabcNltt5qD4GJYhqu9laqNvBZ44yzPGZAUqlKp5Bfs7r75MlR00qX5GH6KW46RDWSjy3hMY=
Received: by 10.90.66.9 with SMTP id o9mr1892954aga.1184858280167;
        Thu, 19 Jul 2007 08:18:00 -0700 (PDT)
Received: from ?192.168.1.100? ( [216.66.114.204])
        by mx.google.com with ESMTPS id 20sm2436388agb.2007.07.19.08.17.58
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 19 Jul 2007 08:17:59 -0700 (PDT)
Message-ID: <469F8061.8080007@gmail.com>
Date: Thu, 19 Jul 2007 11:16:49 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.4 (Windows/20070604)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: StandardTokenizer is slowing down highlighting a lot
References: <652776090707181728t416b8839x72fef70d45d6824d@mail.gmail.com>	 <469EB70C.3040907@gmail.com> <652776090707181814i3ab83c1fsa9f3a01329f750a7@mail.gmail.com>
In-Reply-To: <652776090707181814i3ab83c1fsa9f3a01329f750a7@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I think it goes without saying that a semi-complex NFA or DFA is going 
to be quite a bit slower than say, breaking on whitespace. Not that I am 
against such a warning.

To support my point on writing a custom solution that is more exact 
towards your needs:

If you just remove the <NUM> recognizer in StandardTokenizer.jj you will 
gain 20-25% speed in my tests of small and large documents.

Limiting what is considered a letter to just the language/encodings you 
need might also get some good returns.

- Mark

Michael Stoppelman wrote:
> Might be nice to add a line of documentation to the highlighter on the
> possible
> performance hit if one uses StandardAnalyzer which probably is a common
> case.
> Thanks for the speedy response.
>
> -M
>
> On 7/18/07, Mark Miller <markrmiller@gmail.com> wrote:
>>
>> Unfortunately, StandardAnalyzer is slow. StandardAnalyzer is really
>> limited by JavaCC speed. You cannot shave much more performance out of
>> the grammar as it is already about as simple as it gets. You should
>> first see if you can get away without it and use a different Analyzer,
>> or if you can re-implement just the functionality you need in a custom
>> Analyzer. Do you really need the support for abbreviations, companies,
>> email address, etc?
>>
>> If so:
>>
>> You can use the TokenSources class in the highlighter package to rebuild
>> a TokenStream without re-analyzing if you store term offsets and
>> positions in the index. I have not found this to be super beneficial,
>> even when using the StandardAnalyzer to re-analyze, but it certainly
>> could be faster if you have large enough documents.
>>
>> Your best bet is probably to use
>> https://issues.apache.org/jira/browse/LUCENE-644, which is a
>> non-positional Highlighter that finds offsets to highlight by looking up
>> query term offset information in the index. For larger documents this
>> can be much faster than using the standard contrib Highlighter, even if
>> your using TokenSources. LUCENE-644 has a much flatter curve than the
>> contrib Highlighter as document size goes up.
>>
>> - Mark
>>
>> Michael Stoppelman wrote:
>> > Hi all,
>> >
>> > I was tracking down slowness in the contrib highlighter code and it
>> seems
>> > the seemingly simple tokenStream.next() is the culprit.
>> > I've seen multiple posts about this being a possible cause. Has anyone
>> > looked into how to speed up StandardTokenizer? For my
>> > documents it's taking about 70ms per document that's a big ugh! I was
>> > thinking I might just cache the TermVectors in memory if
>> > that will be faster. Anyone have another approach to solving this
>> > problem?
>> >
>> > -M
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29263-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 19 15:31:45 2007
Return-Path: <java-user-return-29263-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93019 invoked from network); 19 Jul 2007 15:31:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jul 2007 15:31:44 -0000
Received: (qmail 60055 invoked by uid 500); 19 Jul 2007 15:31:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60023 invoked by uid 500); 19 Jul 2007 15:31:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60012 invoked by uid 99); 19 Jul 2007 15:31:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 08:31:12 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.230 as permitted sender)
Received: from [66.249.82.230] (HELO wx-out-0506.google.com) (66.249.82.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 08:31:10 -0700
Received: by wx-out-0506.google.com with SMTP id i28so474965wxd
        for <java-user@lucene.apache.org>; Thu, 19 Jul 2007 08:30:49 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=YBS/yw02BLdjY4WUO8KjvFbp27upbu95pZ0hWSHDb4CVlm2GuKUnIXHLeBXGjhuS4pX4kGR6WInnS9zz+LAsLkxBExMBzNkjGYY4f7jly0QNewxRBocgsnEuJmCkm4JPEojy0Ujkt0HPl8ZUJpabUAkEPcQDhfoWuT9BayxCe50=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=kkMtmmEczOAG0B86djt3trBdZtZ5fmnjkxiYO3zgqn8AdJLrW/ac7xNokd9OsL2MHOYPM/pA4T8KADDla0w/CfGekR3UVVkk55sDy4UNbQ0wMqWQF0NGTOlGycxILDLrOxxHPfrVe0OVOmwphzKJDdKC5NvTmiaKKRPtprnMPWw=
Received: by 10.90.63.16 with SMTP id l16mr2934652aga.1184859049177;
        Thu, 19 Jul 2007 08:30:49 -0700 (PDT)
Received: from ?192.168.1.100? ( [216.66.114.204])
        by mx.google.com with ESMTPS id 33sm2602461wra.2007.07.19.08.30.47
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 19 Jul 2007 08:30:48 -0700 (PDT)
Message-ID: <469F8361.3050007@gmail.com>
Date: Thu, 19 Jul 2007 11:29:37 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.4 (Windows/20070604)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: distinct query how to???
References: <00f601c7ca0a$c018c140$0b0410ac@bhavin> <359a92830707190651p71b82349oae5e103f42ef1bf4@mail.gmail.com> <012101c7ca0f$56eea8b0$0b0410ac@bhavin>
In-Reply-To: <012101c7ca0f$56eea8b0$0b0410ac@bhavin>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

You get non relevant results because normally a HitCollector will only 
collect documents with scores greater than 0.

Hits normalizes raw scores like this:

    if (hitDocs.size() > min) {
      min = hitDocs.size();
    }

    int n = min * 2;    // double # retrieved
    TopDocs topDocs = (sort == null) ? searcher.search(weight, filter, 
n) : searcher.search(weight, filter, n, sort);
    length = topDocs.totalHits;
    ScoreDoc[] scoreDocs = topDocs.scoreDocs;

    float scoreNorm = 1.0f;
   
    if (length > 0 && topDocs.getMaxScore() > 1.0f) {
      scoreNorm = 1.0f / topDocs.getMaxScore();
    }

    int end = scoreDocs.length < length ? scoreDocs.length : length;
    for (int i = hitDocs.size(); i < end; i++) {
      hitDocs.addElement(new HitDoc(scoreDocs[i].score * scoreNorm,
                                    scoreDocs[i].doc));
    }

- Mark

Bhavin Pandya wrote:
> Hi erick,
> Thanks for your prompt reply...
>
> Let me explain what i m doing....
>
> There is lucene query which returns relevant result when i am 
> searching through Hits object.
> But when i m using same query using DocCollector ( I want this way  
> because want to remove duplicate records at search time )
> .. Its giving results which is not relevant although its printing 
> score in descending order.
>
> Here is what i am doing in DocCollector...
>
> /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// 
>
> public void collect(int doc, float score)
> {
>
>    Document document = reader.document(doc);
>    String photoid = document.get("photoid");
>    if (!uniquelist.contains(photoid))
>    {
>        uniquelist.add(photoid);
>        hq.insert(new ScoreDoc(doc, score));
>        minScore = ((ScoreDoc)hq.top()).score; // maintain minScore
>    }
> }
>
> public TopDocs topDocs() {
>
>    ScoreDoc[] scoreDocs = new ScoreDoc[hq.size()];
>    for (int i = hq.size()-1; i >= 0; i--)      // put docs in array
>      scoreDocs[i] = (ScoreDoc)hq.pop();
>
>    float maxScore = (totalHits==0)
>      ? Float.NEGATIVE_INFINITY
>      : scoreDocs[0].score;
>
>    return new TopDocs(totalHits, scoreDocs, maxScore);
>  }
>
>
> public ArrayList getAllDocIds()
>  {
>   ArrayList docidlist = new ArrayList();
>   ArrayList mainlist = new ArrayList();
>   TopDocs tc = topDocs();
>   ScoreDoc[] scoredoc = tc.scoreDocs;
>
>   for (int i=0;i<scoredoc.length;i++)
>   {
>        doclist.add(new Integer(scoredoc[i].doc).toString());
>    }
>    return doclist;
> }
> /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// 
>
>
> Is this a proper way to find duplicate records ???  If yes please let 
> me know where i am wrong.. ???
> Note: In this case, i can not handle duplicate records at index time...
>
> Thanks.
> Bhavin pandya
>
>
>
>
> ----- Original Message ----- From: "Erick Erickson" 
> <erickerickson@gmail.com>
> To: <java-user@lucene.apache.org>; "Bhavin Pandya" <bhavinp@rediff.co.in>
> Sent: Thursday, July 19, 2007 7:21 PM
> Subject: Re: Where exact score is getting calculate?
>
>
>> I don't think you can using a HitCollector. If you used a TopDocs 
>> instead,
>> you have access to the maximum score and can normalize the
>> scores to between 0 and 1, but I don't know if that suits your needs.
>>
>> Erick
>>
>> On 7/19/07, Bhavin Pandya <bhavinp@rediff.co.in> wrote:
>>>
>>> Hi,
>>>
>>> The score i am getting in DocCollector is raw score... which is not
>>> necessary between 0 and 1.
>>> Where lucene exactly calculating the final score...? Or
>>> what if i want final score in DocCollector ??? How to ???
>>>
>>> Regards.
>>> Bhavin pandya
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29264-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 19 17:18:51 2007
Return-Path: <java-user-return-29264-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44862 invoked from network); 19 Jul 2007 17:18:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jul 2007 17:18:49 -0000
Received: (qmail 52703 invoked by uid 500); 19 Jul 2007 17:18:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52666 invoked by uid 500); 19 Jul 2007 17:18:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52650 invoked by uid 99); 19 Jul 2007 17:18:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 10:18:17 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 10:18:14 -0700
Received: by ug-out-1314.google.com with SMTP id c2so497641ugf
        for <java-user@lucene.apache.org>; Thu, 19 Jul 2007 10:17:53 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:in-reply-to:references:mime-version:content-type:message-id:cc:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=ssUZZTAlBOtEVbb6kCVQ2aD4rTo1teSi742CNGeYw9OIm9ttuBpoxIJKc4RvaJFhDX2NGwYRmUqiU32rDiC9XVUHzE5gV+UcvT+7clf+5cQQCUjMWiREl13GV3pDhtIIooIL+S2mkvaoeYSVpCfT66eTfGPRZZFvOKDeaxPDB5g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:in-reply-to:references:mime-version:content-type:message-id:cc:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=Ps9Ec/TMt+n5OgZR5bgld8Tl7KnUWyq5QTZAbsBmQ6FJM2AIfowAOmW0OnS9TW8JE50v2MXIwpLLHWyen3gead/8NeatPxgW0X+R2qF6OApGdvuibdV0y6eGD02LTR9ms9DdJGet6gIkqVpoWsINnNFnAeB9R7JYKxaYlIV4+MU=
Received: by 10.86.28.5 with SMTP id b5mr2077659fgb.1184865472662;
        Thu, 19 Jul 2007 10:17:52 -0700 (PDT)
Received: from ?192.168.2.101? ( [83.249.110.50])
        by mx.google.com with ESMTPS id e9sm7410033muf.2007.07.19.10.17.50
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 19 Jul 2007 10:17:51 -0700 (PDT)
In-Reply-To: <E6F9A32D2602B042BE87133C08D8692F2D6E6F@thomrandolph.rci-together.local>
References: <E6F9A32D2602B042BE87133C08D8692F2D6E6F@thomrandolph.rci-together.local>
Mime-Version: 1.0 (Apple Message framework v752.3)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <A82F118B-7D01-487A-978F-DDD8D04510E6@gmail.com>
Cc: Teck@napboule.com
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Lucene newbie
Date: Thu, 19 Jul 2007 19:14:07 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


19 jul 2007 kl. 15.48 skrev Yom Chouloute:

>
> My time frame at this moment will not allow me so get the full  
> grasp of
> that software so if anybody on that list would like to do some  
> contract
> work you can contact me at

Hi Yom,

you can find human resources at this page:
<http://wiki.apache.org/jakarta-lucene/Support>

Many of us are listed.

-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29265-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 19 18:29:22 2007
Return-Path: <java-user-return-29265-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64537 invoked from network); 19 Jul 2007 18:29:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jul 2007 18:29:21 -0000
Received: (qmail 79766 invoked by uid 500); 19 Jul 2007 18:28:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79682 invoked by uid 500); 19 Jul 2007 18:28:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79671 invoked by uid 99); 19 Jul 2007 18:28:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 11:28:48 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of stopman@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 11:28:44 -0700
Received: by py-out-1112.google.com with SMTP id f31so2060716pyh
        for <java-user@lucene.apache.org>; Thu, 19 Jul 2007 11:28:23 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=LrZwY1xbAE6eWRax064AqnG7EEL4rJauYfwpDh5EfH8jwnBsDLW10RpdufQWxaQ/ZFGBsqLdztC88WhmY6QhdkDMRwZzpnm2KfAQ6HuEgItP1ADRzMaNRuLWr2p4mGEZcNr4/3ey02n0NpwLwCD8KbMRj80KuzuwqQ3tbszc7yo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=XHZLtVAJ7oxcQ577obg2lCLP8HAgZE4avPslP6A0gI2iiNi4urF3E6oED1SaGm6B4dXT115MoIP8NRo5JZSFoGx/2F49XNQ5LWu1ptFbmN5f78Llh5zBVT0bBHrLd1Mgajbve+cRwlxIZYH9OWRvMMlYUC1qBS6Fa74YXEKe1PM=
Received: by 10.65.133.8 with SMTP id k8mr5215737qbn.1184869703588;
        Thu, 19 Jul 2007 11:28:23 -0700 (PDT)
Received: by 10.65.176.12 with HTTP; Thu, 19 Jul 2007 11:28:23 -0700 (PDT)
Message-ID: <652776090707191128ocd1a165k7999f11b4fd35875@mail.gmail.com>
Date: Thu, 19 Jul 2007 11:28:23 -0700
From: "Michael Stoppelman" <stopman@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: StandardTokenizer is slowing down highlighting a lot
In-Reply-To: <469F8061.8080007@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_15688_1001509.1184869703521"
References: <652776090707181728t416b8839x72fef70d45d6824d@mail.gmail.com>
	 <469EB70C.3040907@gmail.com>
	 <652776090707181814i3ab83c1fsa9f3a01329f750a7@mail.gmail.com>
	 <469F8061.8080007@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_15688_1001509.1184869703521
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

On 7/19/07, Mark Miller <markrmiller@gmail.com> wrote:
>
> I think it goes without saying that a semi-complex NFA or DFA is going
> to be quite a bit slower than say, breaking on whitespace. Not that I am
> against such a warning.


This is true to those very familiar with the code base and the Tokenizer
source code. I think having a comment
about using complex a semi-complex NFA/DFA possibly being a major
performance hit in the highlighting code
would save others time, imho.

To support my point on writing a custom solution that is more exact
> towards your needs:
>
> If you just remove the <NUM> recognizer in StandardTokenizer.jj you will
> gain 20-25% speed in my tests of small and large documents.
>
> Limiting what is considered a letter to just the language/encodings you
> need might also get some good returns.


Both good ideas. I just released that the tokenizer for highlighting doesn't
need
to be the same as the tokenizer for indexing so I can make the highlighting
tokenizer
much simpler. Everything will be fast and happy soon.

-M

- Mark
>
> Michael Stoppelman wrote:
> > Might be nice to add a line of documentation to the highlighter on the
> > possible
> > performance hit if one uses StandardAnalyzer which probably is a common
> > case.
> > Thanks for the speedy response.
> >
> > -M
> >
> > On 7/18/07, Mark Miller <markrmiller@gmail.com> wrote:
> >>
> >> Unfortunately, StandardAnalyzer is slow. StandardAnalyzer is really
> >> limited by JavaCC speed. You cannot shave much more performance out of
> >> the grammar as it is already about as simple as it gets. You should
> >> first see if you can get away without it and use a different Analyzer,
> >> or if you can re-implement just the functionality you need in a custom
> >> Analyzer. Do you really need the support for abbreviations, companies,
> >> email address, etc?
> >>
> >> If so:
> >>
> >> You can use the TokenSources class in the highlighter package to
> rebuild
> >> a TokenStream without re-analyzing if you store term offsets and
> >> positions in the index. I have not found this to be super beneficial,
> >> even when using the StandardAnalyzer to re-analyze, but it certainly
> >> could be faster if you have large enough documents.
> >>
> >> Your best bet is probably to use
> >> https://issues.apache.org/jira/browse/LUCENE-644, which is a
> >> non-positional Highlighter that finds offsets to highlight by looking
> up
> >> query term offset information in the index. For larger documents this
> >> can be much faster than using the standard contrib Highlighter, even if
> >> your using TokenSources. LUCENE-644 has a much flatter curve than the
> >> contrib Highlighter as document size goes up.
> >>
> >> - Mark
> >>
> >> Michael Stoppelman wrote:
> >> > Hi all,
> >> >
> >> > I was tracking down slowness in the contrib highlighter code and it
> >> seems
> >> > the seemingly simple tokenStream.next() is the culprit.
> >> > I've seen multiple posts about this being a possible cause. Has
> anyone
> >> > looked into how to speed up StandardTokenizer? For my
> >> > documents it's taking about 70ms per document that's a big ugh! I was
> >> > thinking I might just cache the TermVectors in memory if
> >> > that will be faster. Anyone have another approach to solving this
> >> > problem?
> >> >
> >> > -M
> >> >
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_15688_1001509.1184869703521--

From java-user-return-29266-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 19 18:53:43 2007
Return-Path: <java-user-return-29266-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70377 invoked from network); 19 Jul 2007 18:53:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jul 2007 18:53:40 -0000
Received: (qmail 24863 invoked by uid 500); 19 Jul 2007 18:53:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24820 invoked by uid 500); 19 Jul 2007 18:53:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24809 invoked by uid 99); 19 Jul 2007 18:53:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 11:53:07 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_MESSAGE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of peterlkeegan@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 11:53:04 -0700
Received: by py-out-1112.google.com with SMTP id f31so2086515pyh
        for <java-user@lucene.apache.org>; Thu, 19 Jul 2007 11:52:43 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ecYQ7pKD7UhQJnG57qgQi6zzxTgnbvgHUuOMDmEk64ljxuPHxW30YA8lkHf7vWJFRZOpVUbNrLsH86LrghizHyVVapiqp+kcO3uYsJCYnI5mPsFzYVd1QZkLUjwfJblXONdLXCsTfxi94vidvFGbc5mmuUAVjnQ5uBGwb2R2lmM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=RlpKIb5v1eGUEGF8qkok1TPS114aqGPggxgfOECvA1i1LLSOImdHfJsa8xBd1c8axYKGCrk2cXfFC5WRFE1fd7WBK3hzWljLQz04ZwDJJ4J00xrJZQeOkOkk2WEsIO5FvIl9YtkzJXR6AWTgpqDO7gxFr/M57P9tIFcotjIp/N4=
Received: by 10.64.241.3 with SMTP id o3mr5289811qbh.1184871163505;
        Thu, 19 Jul 2007 11:52:43 -0700 (PDT)
Received: by 10.65.154.8 with HTTP; Thu, 19 Jul 2007 11:52:43 -0700 (PDT)
Message-ID: <e994873a0707191152g7dd51b27r1422026b63f7c22a@mail.gmail.com>
Date: Thu, 19 Jul 2007 14:52:43 -0400
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: encoding question.
In-Reply-To: <Pine.LNX.4.58.0702140040420.13587@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_106573_27471203.1184871163413"
References: <34b8543c0702132146g76abec8t885ce611a84ccabd@mail.gmail.com>
	 <Pine.LNX.4.58.0702140040420.13587@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_106573_27471203.1184871163413
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

The source data for my index is already in standard UTF-8 and available as a
simple byte array. I need to do some simple tokenization of the data (check
for whitespace and special characters that control position increment). What
is the most efficient way to index this data and avoid unnecessary
conversions to/from java Strings or char arrays? Looking at DocumentsWriter,
I see that all terms are eventually converted to char arrays and written in
modified-UTF-8, so there doesn't seem to be much advantage to having the
source data in standard UTF-8.

Peter


On 2/14/07, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
>
> Internally Lucene deals with pure Java Strings; when writing those strings
> to and reading those strings back from disk, Lucene allways uses the stock
> Java "modified UTF-8"  format, regardless of what your file.encoding
> system property may be.
>
> typcially when people have encoding problems in their lucene applications,
> the origin of hte problem is in the way they fetch the data before
> indexing it ... if you can make a String object, and System.out.println
> that string and see what you expect, then handing that string to Lucene as
> a field value should work fine.
>
> what exactly is the "value" object you are calling getBytes on? ... if
> it's another String, then you've already got serious problems -- i can't
> imagine any situation where fetching the bytes from a String in one
> charset and using those bytes to construct another string (either in a
> different charset, or in the system default charset) would make any sense
> at all.
>
> wherever your original binary data is coming from (files on disk, network
> socket, etcc...) that's when you should be converting those bytes into
> chars using whatever charset you know those bytes represent.
>
>
>
> : Date: Wed, 14 Feb 2007 09:16:58 +0330
> : From: Mohammad Norouzi <mnrz57@gmail.com>
> : Reply-To: java-user@lucene.apache.org
> : To: java-user@lucene.apache.org
> : Subject: encoding question.
> :
> : Hi
> : I want to index data with utf-8 encoding, so when adding field to a
> document
> : I am using the code new String(value.getBytes("utf-8"))
> : in the other hand, when I am going to search I was using the same
> snippet
> : code to convert to utf-8 but it did not work so finally I found
> somewhere
> : that had been said to use new String(valueToSearch.getBytes
> ("cp1252"),"UTF8")
> : and it worked fine but I still has some problem.
> : first, some characters are weird when I get result from lucene, It seems
> it
> : is in cp1252 encoding.
> : second, if the java environment property "file.encoding" not been cp1252
> the
> : result is completely in incorrect encoding. so I must change this
> property
> : using System.setProperty("file.encoding","cp1252")
> :
> : is lucene neglect my utf-8 encoding and proceed indexing data using
> cp1252?
> : how can I correct weird characters I received by searching?
> :
> : Thank you very much in advance.
> : --
> : Regards,
> : Mohammad
> :
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_106573_27471203.1184871163413--

From java-user-return-29267-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 19 20:42:15 2007
Return-Path: <java-user-return-29267-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12617 invoked from network); 19 Jul 2007 20:42:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jul 2007 20:42:14 -0000
Received: (qmail 89614 invoked by uid 500); 19 Jul 2007 20:41:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89543 invoked by uid 500); 19 Jul 2007 20:41:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89515 invoked by uid 99); 19 Jul 2007 20:41:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 13:41:31 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jeogoodjob@gmail.com designates 209.85.146.177 as permitted sender)
Received: from [209.85.146.177] (HELO wa-out-1112.google.com) (209.85.146.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 13:41:29 -0700
Received: by wa-out-1112.google.com with SMTP id j40so813602wah
        for <java-user@lucene.apache.org>; Thu, 19 Jul 2007 13:41:08 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition:x-google-sender-auth;
        b=svc8TCI7DsCCm4H0UZZES8/dcJXjtiishBw3D45VKj1cTPwBxvGH8+u3zl0b3FY2mUaEMGwdAMmMnPRd67EmeXUkzphPsgwEkagLaQ30GMPoCWO/RZl3kpUTeKc+DGfH57ujCR2htcjK4CtMHRRebd5c7s/wXS/Nmu+PaS0iJIA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition:x-google-sender-auth;
        b=U+xBzPhbHT7Yr6MsSk53BW04LLuxXhjSRojcY/uK/yUoyTxlQOJLI2KofYl4m3Q4MU3e8ZaFeGEtyKd9TvV44KXFpwRE1uU8VZPVHBjNyWrIYJhm49D/4rFH16ipmkpVgmLr9G98OXWA55BfeTC75ojbQi3juy3okPsslfIgxes=
Received: by 10.115.22.1 with SMTP id z1mr2943656wai.1184877667706;
        Thu, 19 Jul 2007 13:41:07 -0700 (PDT)
Received: by 10.115.109.14 with HTTP; Thu, 19 Jul 2007 13:41:07 -0700 (PDT)
Message-ID: <8ce43bbd0707191341i42118105h907e4b95a555d480@mail.gmail.com>
Date: Fri, 20 Jul 2007 04:41:07 +0800
From: "li hao cho" <cholihao@gmail.com>
Sender: jeogoodjob@gmail.com
To: java-user@lucene.apache.org
Subject: Question about lucene query (+body:12) (+title:12) ?
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Google-Sender-Auth: 538318e7d5d8897b
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all, I use query (+body:12) (+title:12) , but I got some wrong
message bellow:

java.io.IOException: read past EOF
       at org.apache.lucene.store.BufferedIndexInput.refill(BufferedIndexInput.java:137)
       at org.apache.lucene.store.BufferedIndexInput.readByte(BufferedIndexInput.java:38)
       at org.apache.lucene.store.IndexInput.readInt(IndexInput.java:47)
       at org.apache.lucene.store.IndexInput.readLong(IndexInput.java:70)
       at org.apache.lucene.index.TermVectorsReader.get(TermVectorsReader.java:107)
       at org.apache.lucene.index.SegmentReader.getTermFreqVector(SegmentReader.java:576)
       at org.apache.lucene.index.MultiReader.getTermFreqVector(MultiReader.java:85)
       at org.apache.bbs.Server.dowork(Server.java:654)
       at org.apache.bbs.Server$ServerThread.run(Server.java:262)
       at java.lang.Thread.run(Thread.java:619)

line 262 in Server.java as bellows:
TermPositionVector tpv = (TermPositionVector)
reader..getTermFreqVector(hits.id(index)) "body");

I am confused about the error message.



-- 
Li-Hao Cho
cholihao@gmail.com
Department of Computer Science
National Cheng Chi University, Taipei, Taiwan, R.O.C."

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29268-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 19 20:59:27 2007
Return-Path: <java-user-return-29268-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16443 invoked from network); 19 Jul 2007 20:59:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jul 2007 20:59:26 -0000
Received: (qmail 20563 invoked by uid 500); 19 Jul 2007 20:58:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20526 invoked by uid 500); 19 Jul 2007 20:58:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20515 invoked by uid 99); 19 Jul 2007 20:58:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 13:58:52 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FROM_HAS_ULINE_NUMS,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [68.180.197.52] (HELO web45401.mail.sp1.yahoo.com) (68.180.197.52)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 19 Jul 2007 13:58:50 -0700
Received: (qmail 29791 invoked by uid 60001); 19 Jul 2007 20:58:29 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=om86FrWfRwnFptV9fW9yiCvNvjNqIDiSg/x3MDQp+D4ad7v7XAuKs1vNMQl+/8RAXDeKv0sv7nCCT5jGyEgWBWarAc9qpANse68KcQlOWKfp+aTUPxE6gMZREwoKpjuAPkoNVhDQ/Kw/yE5ccL8VkgmeAMEeWrfn/tPJDP28pxM=;
X-YMail-OSG: mITaTw0VM1kfFyvp86c7Z79cCzrczXD0aRYsTvgSPyZxUJ.II1jqqUfgBobJgNskpZ27fy.kkbl46NWjCUX7Ietod0JyK7v39aE-
Received: from [198.4.83.52] by web45401.mail.sp1.yahoo.com via HTTP; Thu, 19 Jul 2007 13:58:29 PDT
Date: Thu, 19 Jul 2007 13:58:29 -0700 (PDT)
From: Kevin Chen <chen_k80@yahoo.com>
Subject: TermFreqVector
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1606207443-1184878709=:28987"
Content-Transfer-Encoding: 8bit
Message-ID: <469816.28987.qm@web45401.mail.sp1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1606207443-1184878709=:28987
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

I need to use getTermFreqVector on a subset of docs that belong to the hits for a query. I understand I need to pass the docNumber as an argument in this case. How do I access that.

For ex .

doc = hits.doc(0);
TermFreqVector vector = reader.getTermFreqVector(docId, "field");


How do I get docId? 

       
---------------------------------
Looking for a deal? Find great prices on flights and hotels with Yahoo! FareChase.
--0-1606207443-1184878709=:28987--

From java-user-return-29269-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 19 21:18:14 2007
Return-Path: <java-user-return-29269-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21631 invoked from network); 19 Jul 2007 21:18:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jul 2007 21:18:09 -0000
Received: (qmail 59865 invoked by uid 500); 19 Jul 2007 21:17:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59769 invoked by uid 500); 19 Jul 2007 21:17:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59732 invoked by uid 99); 19 Jul 2007 21:17:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 14:17:30 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 14:17:26 -0700
Received: by ug-out-1314.google.com with SMTP id c2so546677ugf
        for <java-user@lucene.apache.org>; Thu, 19 Jul 2007 14:17:05 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=YV0JbDetWEXG3l3N+2XROxqAB5wori7eYk/oeCshha13/OMs/WjLdXWhd52KiTvt7LBSsT5FetLiRaVmI0Ln6H8XyEDZTueLpxPttl/9nrCblacxwDkTIR0HplwRvgwiPjm5NqN/h1OthsmSGHqvQOCM/jFhxfxVbC0SkVo0KrA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=uc9YmMi95u/mHfZe23Y+0AtSC46vOhqRkUIhxreRgZMdWOEElXcd2B8g4qvfH9uAs1g0U0e6dcVOeJ+bP+8aNynPpXLviU/noyItRz5gEHivhYXsF59Ps8BMfPF0pFnJVSNnMRV1kfhLHe0wp1ZgUJCm/x5xkwW3IDEn1qg7mhA=
Received: by 10.86.86.12 with SMTP id j12mr2225637fgb.1184879825666;
        Thu, 19 Jul 2007 14:17:05 -0700 (PDT)
Received: from ?192.168.2.101? ( [83.249.110.50])
        by mx.google.com with ESMTPS id e9sm8069794muf.2007.07.19.14.17.03
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 19 Jul 2007 14:17:03 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <469816.28987.qm@web45401.mail.sp1.yahoo.com>
References: <469816.28987.qm@web45401.mail.sp1.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <539632E6-C025-4CDA-8CBD-14E81B8AF543@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: TermFreqVector
Date: Thu, 19 Jul 2007 23:13:18 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


19 jul 2007 kl. 22.58 skrev Kevin Chen:

>
> doc = hits.doc(0);
> TermFreqVector vector = reader.getTermFreqVector(docId, "field");
>
>
> How do I get docId?

If you use Hits, it is hits.doc()


-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29270-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 19 21:28:49 2007
Return-Path: <java-user-return-29270-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24657 invoked from network); 19 Jul 2007 21:28:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jul 2007 21:28:47 -0000
Received: (qmail 93972 invoked by uid 500); 19 Jul 2007 21:28:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93936 invoked by uid 500); 19 Jul 2007 21:28:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93925 invoked by uid 99); 19 Jul 2007 21:28:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 14:28:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.105.6.20] (HELO sabe.cs.wisc.edu) (128.105.6.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 14:28:06 -0700
Received: from [9.1.67.17] (p1.almaden.ibm.com [198.4.83.52])
	(authenticated bits=0)
	by sabe.cs.wisc.edu (8.13.6/8.13.6) with ESMTP id l6JLRi8H015542
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Thu, 19 Jul 2007 16:27:45 -0500
Message-ID: <469FD683.4060801@cs.wisc.edu>
Date: Thu, 19 Jul 2007 14:24:19 -0700
From: Akanksha Baid <baid@cs.wisc.edu>
User-Agent: Thunderbird 2.0.0.4 (Windows/20070604)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: TermFreqVector
References: <469816.28987.qm@web45401.mail.sp1.yahoo.com> <539632E6-C025-4CDA-8CBD-14E81B8AF543@gmail.com>
In-Reply-To: <539632E6-C025-4CDA-8CBD-14E81B8AF543@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

hits.id() should work.


karl wettin wrote:
>
> 19 jul 2007 kl. 22.58 skrev Kevin Chen:
>
>>
>> doc = hits.doc(0);
>> TermFreqVector vector = reader.getTermFreqVector(docId, "field");
>>
>>
>> How do I get docId?
>
> If you use Hits, it is hits.doc()
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29271-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 19 21:35:28 2007
Return-Path: <java-user-return-29271-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25858 invoked from network); 19 Jul 2007 21:35:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jul 2007 21:35:27 -0000
Received: (qmail 5673 invoked by uid 500); 19 Jul 2007 21:34:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5642 invoked by uid 500); 19 Jul 2007 21:34:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5631 invoked by uid 99); 19 Jul 2007 21:34:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 14:34:53 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 209.85.132.248 as permitted sender)
Received: from [209.85.132.248] (HELO an-out-0708.google.com) (209.85.132.248)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 14:34:50 -0700
Received: by an-out-0708.google.com with SMTP id c5so194660anc
        for <java-user@lucene.apache.org>; Thu, 19 Jul 2007 14:34:30 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=krcxgngTEHjkL0EUMQwpFpYfWaYW8lik/YK6RZOg5zx8jWjxXQZPmfvG3eNtUP6uoEq6v4GN1QmUzLIOLnQRB4i3jlLeaGlq8KaA8mCTuOXtPmrGGjYz/RG/qXJpPHJWn9C0bmHgtkCdxpTLPKh9z/2RNnDhqLpnQ7eY7hx12xU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=ABC0w9A2lNSLO2UUVSOdp9rpyoEwwMGQLkH2ltf9xljX9LmejZu2YtyHZbCvPxQBSIKWkiCS7f9GfnwlUtArR4QIuboYe1w2njJYOsfj1WFZAwPjCyMPoSbYhzDCL/zTbSm9befUZKXJJ3jmxH+Ls4aPfT9woEvjkNqMX0ZZOK0=
Received: by 10.100.128.8 with SMTP id a8mr1645600and.1184880869845;
        Thu, 19 Jul 2007 14:34:29 -0700 (PDT)
Received: from ?192.168.1.100? ( [216.66.114.204])
        by mx.google.com with ESMTPS id b3sm2978835ana.2007.07.19.14.34.27
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 19 Jul 2007 14:34:27 -0700 (PDT)
Message-ID: <469FD88B.1020202@gmail.com>
Date: Thu, 19 Jul 2007 17:32:59 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.4 (Windows/20070604)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Question about lucene query (+body:12) (+title:12) ?
References: <8ce43bbd0707191341i42118105h907e4b95a555d480@mail.gmail.com>
In-Reply-To: <8ce43bbd0707191341i42118105h907e4b95a555d480@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hopefully someone will be able to give you some further insight into 
this. To me, it looks like a corrupted index. If TermVectors where not 
stored, at worst you should be seeing a NullPointerException. Has this 
index had anything interesting happen to it? Made with an older version 
of Lucene, used with a newer version? You are literally trying to read 
past the end of a file, so Lucene is not finding what it expects in your 
index. Not much insight there I know :) I am sure someone else will be 
of further help -- a few more details might be of help in diagnosing the 
problem though.

- Mark

li hao cho wrote:
> Hi all, I use query (+body:12) (+title:12) , but I got some wrong
> message bellow:
>
> java.io.IOException: read past EOF
>       at 
> org.apache.lucene.store.BufferedIndexInput.refill(BufferedIndexInput.java:137) 
>
>       at 
> org.apache.lucene.store.BufferedIndexInput.readByte(BufferedIndexInput.java:38) 
>
>       at org.apache.lucene.store.IndexInput.readInt(IndexInput.java:47)
>       at org.apache.lucene.store.IndexInput.readLong(IndexInput.java:70)
>       at 
> org.apache.lucene.index.TermVectorsReader.get(TermVectorsReader.java:107)
>       at 
> org.apache.lucene.index.SegmentReader.getTermFreqVector(SegmentReader.java:576) 
>
>       at 
> org.apache.lucene.index.MultiReader.getTermFreqVector(MultiReader.java:85) 
>
>       at org.apache.bbs.Server.dowork(Server.java:654)
>       at org.apache.bbs.Server$ServerThread.run(Server.java:262)
>       at java.lang.Thread.run(Thread.java:619)
>
> line 262 in Server.java as bellows:
> TermPositionVector tpv = (TermPositionVector)
> reader..getTermFreqVector(hits.id(index)) "body");
>
> I am confused about the error message.
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29272-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 20 00:42:19 2007
Return-Path: <java-user-return-29272-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91178 invoked from network); 20 Jul 2007 00:42:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jul 2007 00:42:18 -0000
Received: (qmail 11155 invoked by uid 500); 20 Jul 2007 00:41:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11115 invoked by uid 500); 20 Jul 2007 00:41:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11104 invoked by uid 99); 20 Jul 2007 00:41:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 17:41:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.202] (HELO spunkymail-a15.dreamhost.com) (208.97.132.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 17:41:39 -0700
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a15.dreamhost.com (Postfix) with ESMTP id D77007F058
	for <java-user@lucene.apache.org>; Thu, 19 Jul 2007 17:41:17 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <469FD88B.1020202@gmail.com>
References: <8ce43bbd0707191341i42118105h907e4b95a555d480@mail.gmail.com> <469FD88B.1020202@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <139EC98C-8629-46CC-8DE5-7564D872DB7C@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Question about lucene query (+body:12) (+title:12) ?
Date: Thu, 19 Jul 2007 20:41:04 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Can you provide a self contained test or at least some code for this?

On Jul 19, 2007, at 5:32 PM, Mark Miller wrote:

> Hopefully someone will be able to give you some further insight  
> into this. To me, it looks like a corrupted index. If TermVectors  
> where not stored, at worst you should be seeing a  
> NullPointerException. Has this index had anything interesting  
> happen to it? Made with an older version of Lucene, used with a  
> newer version? You are literally trying to read past the end of a  
> file, so Lucene is not finding what it expects in your index. Not  
> much insight there I know :) I am sure someone else will be of  
> further help -- a few more details might be of help in diagnosing  
> the problem though.
>
> - Mark
>
> li hao cho wrote:
>> Hi all, I use query (+body:12) (+title:12) , but I got some wrong
>> message bellow:
>>
>> java.io.IOException: read past EOF
>>       at org.apache.lucene.store.BufferedIndexInput.refill 
>> (BufferedIndexInput.java:137)
>>       at org.apache.lucene.store.BufferedIndexInput.readByte 
>> (BufferedIndexInput.java:38)
>>       at org.apache.lucene.store.IndexInput.readInt 
>> (IndexInput.java:47)
>>       at org.apache.lucene.store.IndexInput.readLong 
>> (IndexInput.java:70)
>>       at org.apache.lucene.index.TermVectorsReader.get 
>> (TermVectorsReader.java:107)
>>       at org.apache.lucene.index.SegmentReader.getTermFreqVector 
>> (SegmentReader.java:576)
>>       at org.apache.lucene.index.MultiReader.getTermFreqVector 
>> (MultiReader.java:85)
>>       at org.apache.bbs.Server.dowork(Server.java:654)
>>       at org.apache.bbs.Server$ServerThread.run(Server.java:262)
>>       at java.lang.Thread.run(Thread.java:619)
>>
>> line 262 in Server.java as bellows:
>> TermPositionVector tpv = (TermPositionVector)
>> reader..getTermFreqVector(hits.id(index)) "body");
>>
>> I am confused about the error message.
>>
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

Read the Lucene Java FAQ at http://wiki.apache.org/lucene-java/LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29273-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 20 01:42:44 2007
Return-Path: <java-user-return-29273-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20895 invoked from network); 20 Jul 2007 01:42:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jul 2007 01:42:42 -0000
Received: (qmail 85002 invoked by uid 500); 20 Jul 2007 01:41:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84960 invoked by uid 500); 20 Jul 2007 01:41:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84923 invoked by uid 99); 20 Jul 2007 01:41:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 18:41:52 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of cedric.ho@gmail.com designates 209.85.146.176 as permitted sender)
Received: from [209.85.146.176] (HELO wa-out-1112.google.com) (209.85.146.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 18:41:49 -0700
Received: by wa-out-1112.google.com with SMTP id j40so891498wah
        for <java-user@lucene.apache.org>; Thu, 19 Jul 2007 18:41:29 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=FI1PLO/8I9VTYOS2PTngLeTsuwkFKwz399j1MDOiPYbQcVwsHEccOGZQt+u8XbCgSMrnAPZoZp+wNdWQ5uTN0p5kKI26DVu5x0OffMUneRbsbFpKphhyI46l0tiMDFeZK3tXZgDO+Ld7CLILLw6dPoPagmGNQf+BOxdxpj1l9mY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=NZ2ZtexAk0L1bjlfB/X9xswl1sTK0OpnbnAU6muZOque+8TMdmMc0zcWk1VdEiSEeylS+Zk6enoNk4n+TK6HVRjLO3KztQOTJaRDX/F90KHwgJEIWVT5GqFh4AVr7kIYnsQIT8ooUcRk6UQLU5Z9kwUdMLbclC7+Lbqb1PiwE70=
Received: by 10.114.15.1 with SMTP id 1mr3162718wao.1184895689426;
        Thu, 19 Jul 2007 18:41:29 -0700 (PDT)
Received: by 10.114.52.18 with HTTP; Thu, 19 Jul 2007 18:41:29 -0700 (PDT)
Message-ID: <839ba01c0707191841x134367b2p2873f15bd76bac95@mail.gmail.com>
Date: Fri, 20 Jul 2007 09:41:29 +0800
From: "Cedric Ho" <cedric.ho@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: WildcardQuery and SpanQuery
In-Reply-To: <200707182054.22374.paul.elschot@xs4all.nl>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <839ba01c0707172058l62d17dax1c68097dfdd08ca9@mail.gmail.com>
	 <200707180852.51255.paul.elschot@xs4all.nl>
	 <839ba01c0707180330k4fa29404m655fccf3e8ff5ceb@mail.gmail.com>
	 <200707182054.22374.paul.elschot@xs4all.nl>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks so much for helping ~ I will try it out tomorrow.

Regards,
Cedric


On 7/19/07, Paul Elschot <paul.elschot@xs4all.nl> wrote:
> On Wednesday 18 July 2007 12:30, Cedric Ho wrote:
> > Thanks for the quick response Paul =)
> >
> > However I am lost while looking at the surround package.
>
> That is not really surprising, the code is factored to the bone, and it
> is hardly documented.
> You could have a look at the test code to start.
> Also the surround.txt file in the contrib/surround directory should
> be helpful.
>
> > Are you
> > suggesting I can solve my problem at hand using the surround package?
>
> In case the surround syntax fits what you need, you might use the surround
> package.
>
> You could also use your own parser and target the
> o.a.l.queryParser.surround.query package.
> The code posted by Mark Miller may solve your problem, too.
>
> Regards,
> Paul Elschot
>
>
> >
> >
> > On 7/18/07, Paul Elschot <paul.elschot@xs4all.nl> wrote:
> > > On Wednesday 18 July 2007 05:58, Cedric Ho wrote:
> > > > Hi everybody,
> > > >
> > > > We recently need to support wildcard search terms "*", "?" together
> > > > with SpanQuery. It seems that there's no SpanWildcardQuery available.
> > > > After looking into the lucene source code for a while, I guess we can
> > > > either:
> > > >
> > > > 1. Use SpanRegexQuery, or
> > > >
> > > > 2. Write our own SpanWildcardQuery, and implements the
> > > > rewrite(IndexReader) method to rewrite the query into a SpanOrQuery
> > > > with some SpanTermQuery.
> > > >
> > > > Of the two approaches, Option 1 seems to be easier. But I am rather
> > > > concerned about the performance of using regular expression. On the
> > > > other hand, I am not sure if there are any other concerns I am not
> > > > aware of for option 2 (i.e. is there a reason why there's no
> > > > SpanWildcardQuery in the first place?)
> > > >
> > > > Any advices ?
> > >
> > > The basic problem you are facing is that in Lucene
> > > the expansion of the terms is tightly coupled to the generation
> > > of a combination query using the expanded terms.
> > >
> > > In contrib/surround the term expansion and query generation
> > > are decoupled using a visitor pattern for the terms. The code is here:
> > >
> http://svn.apache.org/viewvc/lucene/java/trunk/contrib/surround/src/java/org/apache/lucene/queryParser/surround/query
> > >
> > > In surround a wild card term can provide either an OR of
> > > normal term queries, or a SpanOrQuery of span term queries.
> > > This query generation is in class SimpleTerm, which has one method
> > > for a normal boolean OR query over the terms, and one for
> > > a span query for the terms.
> > >
> > > In both cases surround uses a regular expression to expand
> > > the matching terms, but that could be changed to use
> > > another wildcard expansion mechanisms than the ones in
> > > SrndPrefixQuery and SrndTruncQuery, which
> > > are subclasses of SimpleTerm.
> > >
> > > With the term expansion and the query combination split,
> > > it is also necessary to limit the maximum number of expanded
> > > terms in another way than Lucene does. In surround the
> > > classes BasicQueryFactory and TooManyBasicQueries are
> > > used for that.
> > >
> > > Regards,
> > > Paul Elschot
> > >
> > >
> > >
> > > >
> > > > Cedric
> > > >
> > > > ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >
> > > >
> > > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29274-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 20 01:47:20 2007
Return-Path: <java-user-return-29274-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23381 invoked from network); 20 Jul 2007 01:47:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jul 2007 01:47:18 -0000
Received: (qmail 2161 invoked by uid 500); 20 Jul 2007 01:46:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2113 invoked by uid 500); 20 Jul 2007 01:46:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2069 invoked by uid 99); 20 Jul 2007 01:46:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 18:46:40 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 18:46:36 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IBhZP-0006IZ-Q4
	for java-user@lucene.apache.org; Thu, 19 Jul 2007 18:46:15 -0700
Message-ID: <11700958.post@talk.nabble.com>
Date: Thu, 19 Jul 2007 18:46:15 -0700 (PDT)
From: savageboy <eingmarra@hotmail.com>
To: java-user@lucene.apache.org
Subject: How to open the term vector storage?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: eingmarra@hotmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hello, everyone:

doc.add(Field.Unstored("subject", subject, true));
This syntax above is for Lucene1.4

I need the syntax which could do the same work for Lucene2.0
Could you help me?
Thank you very much!
-- 
View this message in context: http://www.nabble.com/How-to-open-the-term-vector-storage--tf4114700.html#a11700958
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29275-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 20 01:50:27 2007
Return-Path: <java-user-return-29275-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24334 invoked from network); 20 Jul 2007 01:50:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jul 2007 01:50:26 -0000
Received: (qmail 9655 invoked by uid 500); 20 Jul 2007 01:49:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9505 invoked by uid 500); 20 Jul 2007 01:49:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9494 invoked by uid 99); 20 Jul 2007 01:49:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 18:49:49 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 18:49:47 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IBhcU-0006M6-Rk
	for java-user@lucene.apache.org; Thu, 19 Jul 2007 18:49:26 -0700
Message-ID: <11701017.post@talk.nabble.com>
Date: Thu, 19 Jul 2007 18:49:26 -0700 (PDT)
From: savageboy <eingmarra@hotmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to open the term vector storage?
In-Reply-To: <11700958.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: eingmarra@hotmail.com
References: <11700958.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Sorry, I ve found it "Field.TermVector.YES", there is no more problem!
Thanks a lot!



savageboy wrote:
> 
> Hello, everyone:
> 
> doc.add(Field.Unstored("subject", subject, true));
> This syntax above is for Lucene1.4
> 
> I need the syntax which could do the same work for Lucene2.0
> Could you help me?
> Thank you very much!
> 

-- 
View this message in context: http://www.nabble.com/How-to-open-the-term-vector-storage--tf4114700.html#a11701017
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29276-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 20 01:55:21 2007
Return-Path: <java-user-return-29276-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25908 invoked from network); 20 Jul 2007 01:55:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jul 2007 01:55:19 -0000
Received: (qmail 17840 invoked by uid 500); 20 Jul 2007 01:54:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17797 invoked by uid 500); 20 Jul 2007 01:54:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17784 invoked by uid 99); 20 Jul 2007 01:54:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 18:54:43 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [65.160.94.7] (HELO CTSUKLNDSXIB.cts.com) (65.160.94.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 18:54:39 -0700
Received: from ctsuklndsxub.cts.com ([10.236.208.200]) by mail3.cognizant.com with InterScan Message Security Suite; Fri, 20 Jul 2007 02:50:47 +0100
Received: from CTSCNSHNSXUA.cts.com ([10.225.68.4]) by ctsuklndsxub.cts.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Fri, 20 Jul 2007 02:54:16 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
Subject: RE: How to open the term vector storage?
MIME-Version: 1.0
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: quoted-printable
Date: Fri, 20 Jul 2007 09:54:11 +0800
Message-ID: <EAAF003CE5E5094DB92052DD646CAD8E015CDAC4@CTSCNSHNSXUA.cts.com>
In-Reply-To: <11700958.post@talk.nabble.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: How to open the term vector storage?
Thread-Index: AcfKb9XCyzw3uScyQ4us0raQu5PjcwAAIXsg
From: <Jun.Chen@cognizant.com>
To: <java-user@lucene.apache.org>
Cc: <eingmarra@hotmail.com>
X-OriginalArrivalTime: 20 Jul 2007 01:54:16.0513 (UTC) FILETIME=[E11ADB10:01C7CA70]
X-Virus-Checked: Checked by ClamAV on apache.org


I also have this problem...
Field.Text
Field.Keyword
...
I cannot find this method in lucene2.0 API



-----Original Message-----
From: savageboy [mailto:eingmarra@hotmail.com]=0D
Sent: 2007=C4=EA7=D4=C220=C8=D5 9:46 =C9=CF=CE=E7=BA=C3,Daniel
To: java-user@lucene.apache.org
Subject: How to open the term vector storage?


Hello, everyone:

doc.add(Field.Unstored("subject", subject, true));
This syntax above is for Lucene1.4

I need the syntax which could do the same work for Lucene2.0
Could you help me?
Thank you very much!
--=0D
View this message in context:=
 http://www.nabble.com/How-to-open-the-term-vector-storage--tf4114700.html#=
a11700958
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


This e-mail and any files transmitted with it are for the sole use of the=
 intended recipient(s) and may contain confidential and privileged=
 information.
If you are not the intended recipient, please contact the sender by reply=
 e-mail and destroy all copies of the original message.=0D
Any unauthorized review, use, disclosure, dissemination, forwarding,=
 printing or copying of this email or any action taken in reliance on this=
 e-mail is strictly=0D
prohibited and may be unlawful.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29277-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 20 02:19:24 2007
Return-Path: <java-user-return-29277-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33050 invoked from network); 20 Jul 2007 02:19:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jul 2007 02:19:17 -0000
Received: (qmail 51797 invoked by uid 500); 20 Jul 2007 02:18:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51766 invoked by uid 500); 20 Jul 2007 02:18:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51755 invoked by uid 99); 20 Jul 2007 02:18:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 19:18:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.150] (HELO rescomp.berkeley.edu) (169.229.70.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 19:18:37 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 590725B772; Thu, 19 Jul 2007 19:18:17 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 3A9A37F403
	for <java-user@lucene.apache.org>; Thu, 19 Jul 2007 19:18:17 -0700 (PDT)
Date: Thu, 19 Jul 2007 19:18:17 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: RE: How to open the term vector storage?
In-Reply-To: <EAAF003CE5E5094DB92052DD646CAD8E015CDAC4@CTSCNSHNSXUA.cts.com>
Message-ID: <Pine.LNX.4.58.0707191916410.29261@hal.rescomp.berkeley.edu>
References: <EAAF003CE5E5094DB92052DD646CAD8E015CDAC4@CTSCNSHNSXUA.cts.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I also have this problem...
: Field.Text
: Field.Keyword
: ...
: I cannot find this method in lucene2.0 API

please see the FAQ "How do I get code written for Lucene 1.4.x to work
with Lucene 2.x?"

http://wiki.apache.org/lucene-java/LuceneFAQ#head-86d479476c63a2579e867b75d4faa9664ef6cf4d




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29278-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 20 06:33:49 2007
Return-Path: <java-user-return-29278-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3448 invoked from network); 20 Jul 2007 06:33:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jul 2007 06:33:48 -0000
Received: (qmail 91917 invoked by uid 500); 20 Jul 2007 06:33:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91886 invoked by uid 500); 20 Jul 2007 06:33:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91875 invoked by uid 99); 20 Jul 2007 06:33:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 23:33:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [63.246.22.40] (HELO mail.atlassian.com) (63.246.22.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 23:33:05 -0700
Received: (qmail 27020 invoked from network); 20 Jul 2007 06:32:45 -0000
Received: from unknown (HELO mail.atlassian.com) (127.0.0.1)
  by 63-246-22-40.contegix.com with SMTP; 20 Jul 2007 06:32:45 -0000
Received: from threesheets.sydney.atlassian.com (unknown [202.47.1.18])
	by mail.atlassian.com (Postfix) with ESMTP id B68BF186C1CF
	for <java-user@lucene.apache.org>; Fri, 20 Jul 2007 01:32:44 -0500 (CDT)
Message-ID: <46A05709.6010504@atlassian.com>
Date: Fri, 20 Jul 2007 16:32:41 +1000
From: Andreas Knecht <andreask@atlassian.com>
User-Agent: Thunderbird 2.0.0.4 (Macintosh/20070604)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Upgrade of Lucene from 1.9.1 to 2.2.0 in JIRA
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

We're about to upgrade Lucene from version 1.9.1 to version 2.2.0 in 
JIRA <http://www.atlassian.com/software/jira>. We've already switched 
from DateFields to DateTools (which will require a complete re-index for 
all of our customers). 

Are there any problems we should be aware of that could cause problems 
with this upgrade? (which wont be fixed by a full re-index)

Cheers,
  Andreas

-- 
ATLASSIAN
Our products help over 7,000 organisations in more than 88 countries to collaborate. http://www.atlassian.com/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29279-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 20 06:53:31 2007
Return-Path: <java-user-return-29279-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8272 invoked from network); 20 Jul 2007 06:53:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jul 2007 06:53:30 -0000
Received: (qmail 15054 invoked by uid 500); 20 Jul 2007 06:52:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15019 invoked by uid 500); 20 Jul 2007 06:52:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15003 invoked by uid 99); 20 Jul 2007 06:52:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 23:52:43 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jeogoodjob@gmail.com designates 64.233.162.239 as permitted sender)
Received: from [64.233.162.239] (HELO nz-out-0506.google.com) (64.233.162.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 23:52:41 -0700
Received: by nz-out-0506.google.com with SMTP id i28so619544nzi
        for <java-user@lucene.apache.org>; Thu, 19 Jul 2007 23:52:20 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition:x-google-sender-auth;
        b=VxT+vxO8SGMxa9fiItIj/0chb5/8YsrUTL4qO+nyLKprRZeAXp7gLN/76Dmi9MzVyxDAdkQvxkUXBpDm4c+1FrMtHddT5EqKUt+7VnVxHOt8lgzMAslLgc3r6e79brnXlxCWh7czZhIcGZo5MCI4Z8eMEGUT3jTM+aVpL3/NS2c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition:x-google-sender-auth;
        b=GywpXKoYJ+ZpPB85LzCAMZa7Ux2LmIsM+3v1G745eWs6OwCBLpwxMh8zOTda86yc/gNVM6us/zeEhePcLPMWBDWIyiy/POmeHV1ANIp0k2otB+q4oQNvIdZJ1LfUtpsrjnLOQIOehdOC7fo4ix+UI6R2eydNA93PAYu8FgTuk5o=
Received: by 10.114.52.1 with SMTP id z1mr154931waz.1184914339868;
        Thu, 19 Jul 2007 23:52:19 -0700 (PDT)
Received: by 10.115.109.14 with HTTP; Thu, 19 Jul 2007 23:52:19 -0700 (PDT)
Message-ID: <8ce43bbd0707192352t43f91200s5f66975d89c2ebd9@mail.gmail.com>
Date: Fri, 20 Jul 2007 14:52:19 +0800
From: "li hao cho" <cholihao@gmail.com>
Sender: jeogoodjob@gmail.com
To: java-user@lucene.apache.org
Subject: Question regarding ignore case?
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Google-Sender-Auth: cb08e73cdece33d6
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all, my lucene index is prepared for search, but I forgot to change
all the english word to lower case. When I search, I have to type the
same case as in lucene index. I found that QueryFilter may solve the
problem, but it seems that it's used for filter query, not the lucene
index. How do I ignore the case in lucene index?

--
Li-Hao Cho
cholihao@gmail.com
Department of Computer Science
National Cheng Chi University, Taipei, Taiwan, R.O.C."

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29280-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 20 06:59:30 2007
Return-Path: <java-user-return-29280-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10625 invoked from network); 20 Jul 2007 06:59:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jul 2007 06:59:28 -0000
Received: (qmail 27145 invoked by uid 500); 20 Jul 2007 06:58:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27112 invoked by uid 500); 20 Jul 2007 06:58:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27097 invoked by uid 99); 20 Jul 2007 06:58:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 23:58:49 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=MSGID_FROM_MTA_HEADER,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of dmitrytkach1@hotmail.com designates 65.54.246.230 as permitted sender)
Received: from [65.54.246.230] (HELO bay0-omc3-s30.bay0.hotmail.com) (65.54.246.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jul 2007 23:58:45 -0700
Received: from hotmail.com ([65.54.169.82]) by bay0-omc3-s30.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.2668);
	 Thu, 19 Jul 2007 23:58:25 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Thu, 19 Jul 2007 23:58:25 -0700
Message-ID: <BAY114-DAV1000251023201EC5A6DA1494F40@phx.gbl>
Received: from 24.12.157.130 by BAY114-DAV10.phx.gbl with DAV;
	Fri, 20 Jul 2007 06:58:21 +0000
X-Originating-IP: [24.12.157.130]
X-Originating-Email: [dmitrytkach1@hotmail.com]
X-Sender: dmitrytkach1@hotmail.com
From: "Dmitry" <dmitrytkach1@hotmail.com>
To: <java-user@lucene.apache.org>
References: <46A05709.6010504@atlassian.com>
Subject: Re: Upgrade of Lucene from 1.9.1 to 2.2.0 in JIRA
Date: Fri, 20 Jul 2007 01:57:52 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3028
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
X-OriginalArrivalTime: 20 Jul 2007 06:58:25.0221 (UTC) FILETIME=[5E2EB750:01C7CA9B]
X-Virus-Checked: Checked by ClamAV on apache.org

Folks,
why do we need full re0indexing during  the switch from DateFields to 
DateTools ? I'll have the same issue in future may be?
Thanks,
Dm
www.ejinz.com
----- Original Message ----- 
From: "Andreas Knecht" <andreask@atlassian.com>
To: <java-user@lucene.apache.org>
Sent: Friday, July 20, 2007 1:32 AM
Subject: Upgrade of Lucene from 1.9.1 to 2.2.0 in JIRA


> Hi,
>
> We're about to upgrade Lucene from version 1.9.1 to version 2.2.0 in JIRA 
> <http://www.atlassian.com/software/jira>. We've already switched from 
> DateFields to DateTools (which will require a complete re-index for all of 
> our customers).
> Are there any problems we should be aware of that could cause problems 
> with this upgrade? (which wont be fixed by a full re-index)
>
> Cheers,
>  Andreas
>
> -- 
> ATLASSIAN
> Our products help over 7,000 organisations in more than 88 countries to 
> collaborate. http://www.atlassian.com/
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29281-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 20 07:24:50 2007
Return-Path: <java-user-return-29281-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23832 invoked from network); 20 Jul 2007 07:24:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jul 2007 07:24:49 -0000
Received: (qmail 73130 invoked by uid 500); 20 Jul 2007 07:24:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73090 invoked by uid 500); 20 Jul 2007 07:24:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73079 invoked by uid 99); 20 Jul 2007 07:24:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jul 2007 00:24:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [63.246.22.40] (HELO mail.atlassian.com) (63.246.22.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jul 2007 00:24:08 -0700
Received: (qmail 18734 invoked from network); 20 Jul 2007 07:23:47 -0000
Received: from unknown (HELO mail.atlassian.com) (127.0.0.1)
  by 63-246-22-40.contegix.com with SMTP; 20 Jul 2007 07:23:47 -0000
Received: from threesheets.sydney.atlassian.com (unknown [202.47.1.18])
	by mail.atlassian.com (Postfix) with ESMTP id 32771186C1CF
	for <java-user@lucene.apache.org>; Fri, 20 Jul 2007 02:23:46 -0500 (CDT)
Message-ID: <46A06300.80700@atlassian.com>
Date: Fri, 20 Jul 2007 17:23:44 +1000
From: Andreas Knecht <andreask@atlassian.com>
User-Agent: Thunderbird 2.0.0.4 (Macintosh/20070604)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Upgrade of Lucene from 1.9.1 to 2.2.0 in JIRA
References: <46A05709.6010504@atlassian.com> <BAY114-DAV1000251023201EC5A6DA1494F40@phx.gbl>
In-Reply-To: <BAY114-DAV1000251023201EC5A6DA1494F40@phx.gbl>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Dmitry,

The full re-index is necessary, because DateTools stores dates in a 
different (human-readable) format in the index.  This means that 
JIRA/lucene wont be able to read dates from the current indexes which 
use dates stored in the old format.

Cheers,
  Andreas
> Folks,
> why do we need full re0indexing during  the switch from DateFields to 
> DateTools ? I'll have the same issue in future may be?
> Thanks,
> Dm
> www.ejinz.com
> ----- Original Message ----- From: "Andreas Knecht" 
> <andreask@atlassian.com>
> To: <java-user@lucene.apache.org>
> Sent: Friday, July 20, 2007 1:32 AM
> Subject: Upgrade of Lucene from 1.9.1 to 2.2.0 in JIRA
>
>
>> Hi,
>>
>> We're about to upgrade Lucene from version 1.9.1 to version 2.2.0 in 
>> JIRA <http://www.atlassian.com/software/jira>. We've already switched 
>> from DateFields to DateTools (which will require a complete re-index 
>> for all of our customers).
>> Are there any problems we should be aware of that could cause 
>> problems with this upgrade? (which wont be fixed by a full re-index)
>>
>> Cheers,
>>  Andreas
>>
>> -- 
>> ATLASSIAN
>> Our products help over 7,000 organisations in more than 88 countries 
>> to collaborate. http://www.atlassian.com/
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

-- 
ATLASSIAN
Our products help over 7,000 organisations in more than 88 countries to collaborate. http://www.atlassian.com/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29282-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 20 07:31:35 2007
Return-Path: <java-user-return-29282-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26316 invoked from network); 20 Jul 2007 07:31:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jul 2007 07:31:34 -0000
Received: (qmail 81777 invoked by uid 500); 20 Jul 2007 07:30:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81507 invoked by uid 500); 20 Jul 2007 07:30:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81495 invoked by uid 99); 20 Jul 2007 07:30:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jul 2007 00:30:55 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=MSGID_FROM_MTA_HEADER,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of dmitrytkach1@hotmail.com designates 65.54.246.166 as permitted sender)
Received: from [65.54.246.166] (HELO bay0-omc2-s30.bay0.hotmail.com) (65.54.246.166)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jul 2007 00:30:51 -0700
Received: from hotmail.com ([65.54.169.82]) by bay0-omc2-s30.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.2668);
	 Fri, 20 Jul 2007 00:30:31 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Fri, 20 Jul 2007 00:30:30 -0700
Message-ID: <BAY114-DAV1087D22D013C853BF3B26A94F40@phx.gbl>
Received: from 24.12.157.130 by BAY114-DAV10.phx.gbl with DAV;
	Fri, 20 Jul 2007 07:30:26 +0000
X-Originating-IP: [24.12.157.130]
X-Originating-Email: [dmitrytkach1@hotmail.com]
X-Sender: dmitrytkach1@hotmail.com
From: "Dmitry" <dmitrytkach1@hotmail.com>
To: <java-user@lucene.apache.org>
References: <46A05709.6010504@atlassian.com> <BAY114-DAV1000251023201EC5A6DA1494F40@phx.gbl> <46A06300.80700@atlassian.com>
Subject: Re: Upgrade of Lucene from 1.9.1 to 2.2.0 in JIRA
Date: Fri, 20 Jul 2007 02:30:35 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-OriginalArrivalTime: 20 Jul 2007 07:30:30.0915 (UTC) FILETIME=[D9FC4D30:01C7CA9F]
X-Virus-Checked: Checked by ClamAV on apache.org

Andreas,
Thanks, I get it now.
www.ejinz.com
----- Original Message ----- 
From: "Andreas Knecht" <andreask@atlassian.com>
To: <java-user@lucene.apache.org>
Sent: Friday, July 20, 2007 2:23 AM
Subject: Re: Upgrade of Lucene from 1.9.1 to 2.2.0 in JIRA


> Hi Dmitry,
>
> The full re-index is necessary, because DateTools stores dates in a 
> different (human-readable) format in the index.  This means that 
> JIRA/lucene wont be able to read dates from the current indexes which use 
> dates stored in the old format.
>
> Cheers,
>  Andreas
>> Folks,
>> why do we need full re0indexing during  the switch from DateFields to 
>> DateTools ? I'll have the same issue in future may be?
>> Thanks,
>> Dm
>> www.ejinz.com
>> ----- Original Message ----- From: "Andreas Knecht" 
>> <andreask@atlassian.com>
>> To: <java-user@lucene.apache.org>
>> Sent: Friday, July 20, 2007 1:32 AM
>> Subject: Upgrade of Lucene from 1.9.1 to 2.2.0 in JIRA
>>
>>
>>> Hi,
>>>
>>> We're about to upgrade Lucene from version 1.9.1 to version 2.2.0 in 
>>> JIRA <http://www.atlassian.com/software/jira>. We've already switched 
>>> from DateFields to DateTools (which will require a complete re-index for 
>>> all of our customers).
>>> Are there any problems we should be aware of that could cause problems 
>>> with this upgrade? (which wont be fixed by a full re-index)
>>>
>>> Cheers,
>>>  Andreas
>>>
>>> -- 
>>> ATLASSIAN
>>> Our products help over 7,000 organisations in more than 88 countries to 
>>> collaborate. http://www.atlassian.com/
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> -- 
> ATLASSIAN
> Our products help over 7,000 organisations in more than 88 countries to 
> collaborate. http://www.atlassian.com/
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29283-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 20 07:33:00 2007
Return-Path: <java-user-return-29283-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26805 invoked from network); 20 Jul 2007 07:32:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jul 2007 07:32:59 -0000
Received: (qmail 84378 invoked by uid 500); 20 Jul 2007 07:32:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84341 invoked by uid 500); 20 Jul 2007 07:32:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84330 invoked by uid 99); 20 Jul 2007 07:32:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jul 2007 00:32:19 -0700
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=FROM_HAS_ULINE_NUMS,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.222.32.20] (HELO mexforward.lss.emc.com) (128.222.32.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jul 2007 00:32:16 -0700
Received: from mailhub.lss.emc.com (uraeus.lss.emc.com [10.254.144.14])
	by mexforward.lss.emc.com (Switch-3.2.5/Switch-3.1.7) with ESMTP id l6K7VsEs010882
	for <java-user@lucene.apache.org>; Fri, 20 Jul 2007 03:31:54 -0400 (EDT)
Received: from corpussmtp3.corp.emc.com (corpussmtp3.corp.emc.com [10.254.64.53])
	by mailhub.lss.emc.com (Switch-3.2.5/Switch-3.1.7) with ESMTP id l6K7V0CK016149
	for <java-user@lucene.apache.org>; Fri, 20 Jul 2007 03:31:52 -0400 (EDT)
From: Liu_Andy2@emc.com
Received: from CORPUSMX10B.corp.emc.com ([128.221.14.93]) by corpussmtp3.corp.emc.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Fri, 20 Jul 2007 03:30:17 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Question regarding ignore case?
Date: Fri, 20 Jul 2007 03:28:53 -0400
Message-ID: <F3B3254741B1404D92215D80C451DE8401993F89@CORPUSMX10B.corp.emc.com>
In-Reply-To: <8ce43bbd0707192352t43f91200s5f66975d89c2ebd9@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Question regarding ignore case?
Thread-Index: AcfKmp3DT07ecE+QQg2Jjw+J5x0I4gABDyLA
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 20 Jul 2007 07:30:17.0296 (UTC) FILETIME=[D1DE3500:01C7CA9F]
X-PMX-Version: 4.7.1.128075, Antispam-Engine: 2.5.1.298604, Antispam-Data: 2007.7.6.21134
X-PerlMx-Spam: Gauge=, SPAM=1%, Reason='EMC_FROM_0+ -3, NO_REAL_NAME 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __IMS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0'
X-Virus-Checked: Checked by ClamAV on apache.org

When index, you can add LowerCaseFilter to your analyzer, or just use
some analyzer already done lowercase, such as
StandardAnalyzer,SimpleAnalyzer

Andy

-----Original Message-----
From: jeogoodjob@gmail.com [mailto:jeogoodjob@gmail.com] On Behalf Of li
hao cho
Sent: Friday, July 20, 2007 2:52 PM
To: java-user@lucene.apache.org
Subject: Question regarding ignore case?

Hi all, my lucene index is prepared for search, but I forgot to change
all the english word to lower case. When I search, I have to type the
same case as in lucene index. I found that QueryFilter may solve the
problem, but it seems that it's used for filter query, not the lucene
index. How do I ignore the case in lucene index?

--
Li-Hao Cho
cholihao@gmail.com
Department of Computer Science
National Cheng Chi University, Taipei, Taiwan, R.O.C."

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29284-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 20 08:15:39 2007
Return-Path: <java-user-return-29284-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40863 invoked from network); 20 Jul 2007 08:15:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jul 2007 08:15:37 -0000
Received: (qmail 56379 invoked by uid 500); 20 Jul 2007 08:14:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56325 invoked by uid 500); 20 Jul 2007 08:14:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56310 invoked by uid 99); 20 Jul 2007 08:14:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jul 2007 01:14:57 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [65.160.94.7] (HELO CTSUKLNDSXIB.cts.com) (65.160.94.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jul 2007 01:14:53 -0700
Received: from ctsuklndsxub.cts.com ([10.236.208.200]) by mail3.cognizant.com with InterScan Message Security Suite; Fri, 20 Jul 2007 09:11:01 +0100
Received: from CTSCNSHNSXUA.cts.com ([10.225.68.4]) by ctsuklndsxub.cts.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Fri, 20 Jul 2007 09:14:30 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: quoted-printable
Subject: RE: How to open the term vector storage?
Date: Fri, 20 Jul 2007 16:14:26 +0800
Message-ID: <EAAF003CE5E5094DB92052DD646CAD8E01604088@CTSCNSHNSXUA.cts.com>
In-Reply-To: <Pine.LNX.4.58.0707191916410.29261@hal.rescomp.berkeley.edu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: How to open the term vector storage?
Thread-Index: AcfKdEyAhurmDKmWSaGxLahp3m7OpAAMaEHw
From: <Jun.Chen@cognizant.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 20 Jul 2007 08:14:30.0626 (UTC) FILETIME=[FF603C20:01C7CAA5]
X-Virus-Checked: Checked by ClamAV on apache.org


Thank you.
Document 1.9 is very useful.

-----Original Message-----
From: Chris Hostetter [mailto:hossman_lucene@fucit.org]=0D
Sent: 2007=C4=EA7=D4=C220=C8=D5 10:18 =C9=CF=CE=E7=BA=C3,Daniel
To: Lucene Users
Subject: RE: How to open the term vector storage?


: I also have this problem...
: Field.Text
: Field.Keyword
: ...
: I cannot find this method in lucene2.0 API

please see the FAQ "How do I get code written for Lucene 1.4.x to work
with Lucene 2.x?"

http://wiki.apache.org/lucene-java/LuceneFAQ#head-86d479476c63a2579e867b75d=
4faa9664ef6cf4d




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


This e-mail and any files transmitted with it are for the sole use of the=
 intended recipient(s) and may contain confidential and privileged=
 information.
If you are not the intended recipient, please contact the sender by reply=
 e-mail and destroy all copies of the original message.=0D
Any unauthorized review, use, disclosure, dissemination, forwarding,=
 printing or copying of this email or any action taken in reliance on this=
 e-mail is strictly=0D
prohibited and may be unlawful.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29285-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 20 08:53:45 2007
Return-Path: <java-user-return-29285-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55257 invoked from network); 20 Jul 2007 08:53:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jul 2007 08:53:43 -0000
Received: (qmail 19542 invoked by uid 500); 20 Jul 2007 08:53:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19497 invoked by uid 500); 20 Jul 2007 08:53:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19484 invoked by uid 99); 20 Jul 2007 08:53:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jul 2007 01:53:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [80.67.64.10] (HELO smtp2.akamai.com) (80.67.64.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jul 2007 01:53:00 -0700
Received: from smtp1.akamai.com (vwall.kendall.corp.akamai.com [172.17.4.35])
	by smtp2.akamai.com (8.13.8/8.12.10) with ESMTP id l6K8rPLr005507
	for <java-user@lucene.apache.org>; Fri, 20 Jul 2007 04:53:25 -0400 (EDT)
Received: from USMA1EX-GATE1.kendall.corp.akamai.com (usma1ex-gate1.kendall.corp.akamai.com [172.17.0.215])
	by smtp1.akamai.com (8.13.8/8.12.10) with ESMTP id l6K8phPP023514
	for <java-user@lucene.apache.org>; Fri, 20 Jul 2007 04:51:43 -0400 (EDT)
Received: from INVS1.bangalore.corp.akamai.com ([172.21.20.14]) by USMA1EX-GATE1.kendall.corp.akamai.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Fri, 20 Jul 2007 04:47:39 -0400
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: TermFreqVector
X-MimeOLE: Produced By Microsoft Exchange V6.5
Date: Fri, 20 Jul 2007 14:22:34 +0530
Message-ID: <4FA8C6AEE609B644B38DE471A3657A62012FFCCD@INVS1.bangalore.corp.akamai.com>
In-Reply-To: <469816.28987.qm@web45401.mail.sp1.yahoo.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: TermFreqVector
Thread-Index: AcfKR6A6W9IGM3KDTpmLVsl0PTveVAAY35Yw
References: <469816.28987.qm@web45401.mail.sp1.yahoo.com>
From: "Chhabra, Kapil" <kchhabra@akamai.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 20 Jul 2007 08:47:39.0515 (UTC) FILETIME=[A0D89CB0:01C7CAAA]
X-Virus-Checked: Checked by ClamAV on apache.org

http://lucene.apache.org/java/2_2_0/api/org/apache/lucene/search/Hits.ht
ml#id(int)

public final int id(int n)
             throws IOException

    Returns the id for the nth document in this set. Note that ids may
change when the index changes, so you cannot rely on the id to be
stable.


kapilChhabra

-----Original Message-----
From: Kevin Chen [mailto:chen_k80@yahoo.com]=20
Sent: Friday, July 20, 2007 2:28 AM
To: java-user@lucene.apache.org
Subject: TermFreqVector

I need to use getTermFreqVector on a subset of docs that belong to the
hits for a query. I understand I need to pass the docNumber as an
argument in this case. How do I access that.

For ex .

doc =3D hits.doc(0);
TermFreqVector vector =3D reader.getTermFreqVector(docId, "field");


How do I get docId?=20

      =20
---------------------------------
Looking for a deal? Find great prices on flights and hotels with Yahoo!
FareChase.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29286-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 20 09:05:15 2007
Return-Path: <java-user-return-29286-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61124 invoked from network); 20 Jul 2007 09:05:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jul 2007 09:05:13 -0000
Received: (qmail 36743 invoked by uid 500); 20 Jul 2007 09:04:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36705 invoked by uid 500); 20 Jul 2007 09:04:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36694 invoked by uid 99); 20 Jul 2007 09:04:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jul 2007 02:04:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [80.67.64.10] (HELO smtp1.akamai.com) (80.67.64.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jul 2007 02:04:30 -0700
Received: from smtp1.akamai.com (vwall.kendall.corp.akamai.com [172.17.4.35])
	by smtp1.akamai.com (8.13.8/8.12.10) with ESMTP id l6K93DV7029096
	for <java-user@lucene.apache.org>; Fri, 20 Jul 2007 05:03:13 -0400 (EDT)
Received: from USMA1EX-GATE1.kendall.corp.akamai.com (usma1ex-gate1.kendall.corp.akamai.com [172.17.0.215])
	by smtp1.akamai.com (8.13.8/8.12.10) with ESMTP id l6K93Ca9029086
	for <java-user@lucene.apache.org>; Fri, 20 Jul 2007 05:03:12 -0400 (EDT)
Received: from MAVS2.kendall.corp.akamai.com ([172.17.33.18]) by USMA1EX-GATE1.kendall.corp.akamai.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Fri, 20 Jul 2007 04:59:08 -0400
Received: from INVS1.bangalore.corp.akamai.com ([172.21.20.14]) by MAVS2.kendall.corp.akamai.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Fri, 20 Jul 2007 05:04:07 -0400
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Question regarding ignore case?
X-MimeOLE: Produced By Microsoft Exchange V6.5
Date: Fri, 20 Jul 2007 14:34:04 +0530
Message-ID: <4FA8C6AEE609B644B38DE471A3657A62012FFCD5@INVS1.bangalore.corp.akamai.com>
In-Reply-To: <8ce43bbd0707192352t43f91200s5f66975d89c2ebd9@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Question regarding ignore case?
Thread-Index: AcfKmpq+ErtSU1ADTde9ouVdghpxowAEb9zg
References: <8ce43bbd0707192352t43f91200s5f66975d89c2ebd9@mail.gmail.com>
From: "Chhabra, Kapil" <kchhabra@akamai.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 20 Jul 2007 09:04:07.0465 (UTC) FILETIME=[EDB5D190:01C7CAAC]
X-Virus-Checked: Checked by ClamAV on apache.org

I don't think that there is any other way out apart from re-indexing in
all-small or all-caps case(through an Analyzer or externally), and then
searching in the same case as you used while indexing.
Even if you find a way by which you can run case insensitive searches, I
am sure it'll add to the complexity at the search time.
QueryFilter is used to filter down the search results and I doubt if
it'll solve your problem.

Regards,
kapilChhabra

-----Original Message-----
From: li hao cho [mailto:cholihao@gmail.com]=20
Sent: Friday, July 20, 2007 12:22 PM
To: java-user@lucene.apache.org
Subject: Question regarding ignore case?

Hi all, my lucene index is prepared for search, but I forgot to change
all the english word to lower case. When I search, I have to type the
same case as in lucene index. I found that QueryFilter may solve the
problem, but it seems that it's used for filter query, not the lucene
index. How do I ignore the case in lucene index?

--
Li-Hao Cho
cholihao@gmail.com
Department of Computer Science
National Cheng Chi University, Taipei, Taiwan, R.O.C."

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29287-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 20 10:44:18 2007
Return-Path: <java-user-return-29287-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96813 invoked from network); 20 Jul 2007 10:44:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jul 2007 10:44:16 -0000
Received: (qmail 8924 invoked by uid 500); 20 Jul 2007 10:43:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8894 invoked by uid 500); 20 Jul 2007 10:43:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8874 invoked by uid 99); 20 Jul 2007 10:43:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jul 2007 03:43:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.11.63] (HELO smtp009.mail.ukl.yahoo.com) (217.12.11.63)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 20 Jul 2007 03:43:32 -0700
Received: (qmail 48358 invoked from network); 20 Jul 2007 10:43:10 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.de;
  h=Received:X-YMail-OSG:Message-ID:Date:From:User-Agent:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding;
  b=Ji6ymTXYlU6ngtm0SXv7acZyqQvc3W3W0hfvYyGk70WFFYTZ5utl9jwi9uzUFC+S5GyALrwDbQzT5+TBlsf88d0M9+HIkvfoQEfuk1ve+fAu8LD4xtNaW+JGR9l4t+cQA1bHYSW7UcO3PNxcBXEsbMqCxNML05UQUJ7SNzwJgC4=  ;
Received: from unknown (HELO ?192.168.0.2?) (you_ment_everything_to_me@80.108.89.196 with plain)
  by smtp009.mail.ukl.yahoo.com with SMTP; 20 Jul 2007 10:43:10 -0000
X-YMail-OSG: 0gImB.EVM1ndzc58RgKPtlO1y0NhSPIVSfdG9mpcXosDFTC1Q18D_c_tg3sXUzhrc4RF1xl0rE5flFODbd9dlPDWigP0WmbLwFWzJgGjchmPuSGk
Message-ID: <46A091B7.5040402@yahoo.de>
Date: Fri, 20 Jul 2007 12:43:03 +0200
From: Thomas <you_meant_everything_to_me@yahoo.de>
User-Agent: Thunderbird 1.5.0.12 (Windows/20070509)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lucene and XML Architecture
References: <469F1493.9000507@yahoo.de> <48b038c60707190347r338ac477s813afb68b06751a0@mail.gmail.com>
In-Reply-To: <48b038c60707190347r338ac477s813afb68b06751a0@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanx a lot Patrick! That's exactly what I was hoping for. I'll give it 
a shot.

-Thomas

Patrick Turcotte wrote:
> Hi,
>
> There is a Lucene-eXist trigger that allows you to do just that. Take
> a look at patch
> http://sourceforge.net/tracker/index.php?func=detail&aid=1654205&group_id=17691&atid=317691 
>
>
> Then, from exist, you can search either with XQuery or Lucene syntax.
>
> Patrick
>
> Thomas wrote:
>> My intention is to use an open source native XML database like eXist 
>> or Xindice
>> as datastore, Lucene for indexing/searching and Cocoon for 
>> presentation. Does
>> anyone have experience with the combination of native XML stores and 
>> Lucene?
>> Are there any problems that could arise from this combination?
>>
>> - Thomas
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29288-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 20 12:10:30 2007
Return-Path: <java-user-return-29288-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33213 invoked from network); 20 Jul 2007 12:10:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jul 2007 12:10:29 -0000
Received: (qmail 57046 invoked by uid 500); 20 Jul 2007 12:09:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57018 invoked by uid 500); 20 Jul 2007 12:09:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57007 invoked by uid 99); 20 Jul 2007 12:09:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jul 2007 05:09:48 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jul 2007 05:09:46 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IBrIT-0002pV-6z
	for java-user@lucene.apache.org; Fri, 20 Jul 2007 05:09:25 -0700
Message-ID: <11706989.post@talk.nabble.com>
Date: Fri, 20 Jul 2007 05:09:25 -0700 (PDT)
From: markrmiller <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: TermEnum  - previous() method ?
In-Reply-To: <11679947.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: markrmiller@gmail.com
References: <11679947.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I am not very familiar with the Lucene file formats, but I think that there
is a lot of "this number tells you how far ahead to read" when enumerating
terms. As you might guess, I think this lends toward reading the terms file
forward. Not that an index couldn't point you into the terms index somehow
(a meta index?). It would make just as much sense (or more) to buffer all of
the terms to allow a previous though. Depending on your RAM and index size,
this could be an option.

I do wonder why you want a previous though? It sounds like you might be
better off heading down a different path...

- Mark



muraalee wrote:
> 
> Hi All,
> I searched in this forum for anybody looking for need for previous()
> method in TermEnum. I found only this link
> http://www.nabble.com/How-to-navigate-through-indexed-terms-tf28148.html#a189225
> 
> Would it be possible to implement previous() method ? I know i am asking
> for quick solution here ;) Just i want to ensure if it not implemented,
> there might be a reason. So i can consider alternates approaches to
> implement similar feature..
> 
> appreciate your thoughts...
> 
> Thanks
> Murali V
> 

-- 
View this message in context: http://www.nabble.com/TermEnum----previous%28%29-method---tf4107296.html#a11706989
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29289-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 20 12:23:04 2007
Return-Path: <java-user-return-29289-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37825 invoked from network); 20 Jul 2007 12:23:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jul 2007 12:23:03 -0000
Received: (qmail 97318 invoked by uid 500); 20 Jul 2007 12:22:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97282 invoked by uid 500); 20 Jul 2007 12:22:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97269 invoked by uid 99); 20 Jul 2007 12:22:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jul 2007 05:22:20 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jul 2007 05:22:17 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IBrUa-00037g-Of
	for java-user@lucene.apache.org; Fri, 20 Jul 2007 05:21:56 -0700
Message-ID: <11707160.post@talk.nabble.com>
Date: Fri, 20 Jul 2007 05:21:56 -0700 (PDT)
From: muraalee <muraalee@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: TermEnum  - previous() method ?
In-Reply-To: <11706989.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: muraalee@gmail.com
References: <11679947.post@talk.nabble.com> <11706989.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Mark,
Thanks for your inputs.

>> I do wonder why you want a previous though? It sounds like you might be
>> better off heading down a different path...

In our content, we have indexed Author as separate field. We want to expose
a feature to  'browse' the Author list. They can type any author name and do
a locate from there onwards.. While doing that they need to navigate
'previous' & 'next' author list.

e.g AU:Rowling

sample code snippet:
TermEnum browseTermEnum = indexReader.terms(new Term("AU", "rowling"));
 while(browseTermEnum.next()){
  System.out.println( browseTermEnum.term().text());
}

Navigating the next 10 authors is straight foward becuase we do that by
calling browseTermEnum.next(), but we couldn't do previous. I did consider
the approach of all terms while navigation. But the problem is, when we do a
lookup of term like 'rowling', we didn't iterate from the start of the list,
hence we may not have the previous terms..

Any thoughts ?


markrmiller wrote:
> 
> I am not very familiar with the Lucene file formats, but I think that
> there is a lot of "this number tells you how far ahead to read" when
> enumerating terms. As you might guess, I think this lends toward reading
> the terms file forward. Not that an index couldn't point you into the
> terms index somehow (a meta index?). It would make just as much sense (or
> more) to buffer all of the terms to allow a previous though. Depending on
> your RAM and index size, this could be an option.
> 
> I do wonder why you want a previous though? It sounds like you might be
> better off heading down a different path...
> 
> - Mark
> 
> 
> 
> muraalee wrote:
>> 
>> Hi All,
>> I searched in this forum for anybody looking for need for previous()
>> method in TermEnum. I found only this link
>> http://www.nabble.com/How-to-navigate-through-indexed-terms-tf28148.html#a189225
>> 
>> Would it be possible to implement previous() method ? I know i am asking
>> for quick solution here ;) Just i want to ensure if it not implemented,
>> there might be a reason. So i can consider alternates approaches to
>> implement similar feature..
>> 
>> appreciate your thoughts...
>> 
>> Thanks
>> Murali V
>> 
> 
> 

-- 
View this message in context: http://www.nabble.com/TermEnum----previous%28%29-method---tf4107296.html#a11707160
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29290-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 20 13:02:11 2007
Return-Path: <java-user-return-29290-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57182 invoked from network); 20 Jul 2007 13:02:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jul 2007 13:02:09 -0000
Received: (qmail 18663 invoked by uid 500); 20 Jul 2007 13:01:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18612 invoked by uid 500); 20 Jul 2007 13:01:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18601 invoked by uid 99); 20 Jul 2007 13:01:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jul 2007 06:01:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [84.96.25.182] (HELO mail.e-manation.com) (84.96.25.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jul 2007 06:01:23 -0700
Received: by mail.e-manation.com (Postfix, from userid 1007)
	id C423EA0007A; Fri, 20 Jul 2007 14:54:54 +0200 (CEST)
X-Spam-Checker-Version: SpamAssassin 3.1.7-deb (2006-10-05) on 
	actarus.e-manation.com
X-Spam-Level: 
Received: from [10.10.1.131] (unknown [10.10.1.131])
	by mail.e-manation.com (Postfix) with ESMTP id 67266A0006C;
	Fri, 20 Jul 2007 14:54:54 +0200 (CEST)
Message-ID: <46A0B209.4000308@lingway.com>
Date: Fri, 20 Jul 2007 15:00:57 +0200
From: Samuel LEMOINE <samuel.lemoine@lingway.com>
User-Agent: Thunderbird 2.0.0.0 (X11/20070326)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: deleting/updating/identifying a document
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.1.7-deb

Hi everybody !

I'm asking myself about the way Lucene deals with deleting documents.
As far as I know, a document is identified by a document number, but 
this document number is not reliable for long-term issues as it may 
change on segment merging.
The way Lucene deletes documents' data from the index questions me, 
cause it relies on terms (or document number, which as told above is not 
reliable, and must be retrieved from a request). The methods I've found 
for deleting documents from the index are those from IndexWriter and 
IndexReader classes, deleteDocuments(term ) or deleteDocuments(term[] ).
These methods deletes the index'entries containing the given term. 
According to the API javadoc, deleteDocuments(term[] ) will delete each 
file that contains at least one of the given terms: if it really works 
in this way, I don't really understand why it's does so. Wouldn't it be 
more useful if it deleted each file containing *all of* the given terms? 
(or maybe it'is the way it works actually?)
These reflexions lead me to conclude that, in order to be able to remove 
the entries of a specific document in a Lucene index, we must store an 
untokenized field to identify each document solely. I find it strange 
having to use such an "artifice" to keep traces of documents 
independantly. It's not very impeding, it's just... strange.
Any contributive thinkings on this matter are welcome :)

Thanks for reading,

Samuel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29291-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 20 13:18:59 2007
Return-Path: <java-user-return-29291-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64190 invoked from network); 20 Jul 2007 13:18:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jul 2007 13:18:57 -0000
Received: (qmail 72411 invoked by uid 500); 20 Jul 2007 13:18:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72374 invoked by uid 500); 20 Jul 2007 13:18:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72363 invoked by uid 99); 20 Jul 2007 13:18:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jul 2007 06:18:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.39.214] (HELO web50312.mail.re2.yahoo.com) (206.190.39.214)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 20 Jul 2007 06:18:12 -0700
Received: (qmail 4614 invoked by uid 60001); 20 Jul 2007 13:17:51 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=r7fML5P0P0zZsxzR/iwb7ObA0jlYOGBTs917o3DBN4PcjLWiVpspo4kGI1eoHVF1/Oi1Slrqpav3xuw5bs7+dDQNiC51ZPLJEc5bhYQKXZWOmdLb5zapDxRfVGlu8MRLj4eKzrqa5Jfj+Z32Vzk/hQq+jhW9dLJo9JF5aEmhAtg=  ;
Message-ID: <20070720131751.4612.qmail@web50312.mail.re2.yahoo.com>
X-YMail-OSG: GZQv1CYVM1nreTFSYNfXu5djpMgbDIVvBy2e_HtGbX4uVRApAZ_Biz1c3.grv4aWOiXzLXITIxpVdksxnEGmHA_W27KcBq0c5TCll1f56L2F9wypK9Y-
Received: from [89.172.86.3] by web50312.mail.re2.yahoo.com via HTTP; Fri, 20 Jul 2007 06:17:51 PDT
X-Mailer: YahooMailRC/651.41 YahooMailWebService/0.7.119
Date: Fri, 20 Jul 2007 06:17:51 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: deleting/updating/identifying a document
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Samuel,=0A=0AIndeed, you can have a PK-like identifier field in each Luc=
ene Document and use deleteDocument(new Term("your PK field", "your ID"))=
=0AWhile Having an ID field that uniquely identifies a document is not a mu=
st, it is a Lucene best practice in my book and experience so far.=0A=0AOti=
s=0A--=0ALucene Consulting -- http://lucene-consulting.com/=0A=0A=0A----- O=
riginal Message ----=0AFrom: Samuel LEMOINE <samuel.lemoine@lingway.com>=0A=
To: java-user@lucene.apache.org=0ASent: Friday, July 20, 2007 3:00:57 PM=0A=
Subject: deleting/updating/identifying a document=0A=0AHi everybody !=0A=0A=
I'm asking myself about the way Lucene deals with deleting documents.=0AAs =
far as I know, a document is identified by a document number, but =0Athis d=
ocument number is not reliable for long-term issues as it may =0Achange on =
segment merging.=0AThe way Lucene deletes documents' data from the index qu=
estions me, =0Acause it relies on terms (or document number, which as told =
above is not =0Areliable, and must be retrieved from a request). The method=
s I've found =0Afor deleting documents from the index are those from IndexW=
riter and =0AIndexReader classes, deleteDocuments(term ) or deleteDocuments=
(term[] ).=0AThese methods deletes the index'entries containing the given t=
erm. =0AAccording to the API javadoc, deleteDocuments(term[] ) will delete =
each =0Afile that contains at least one of the given terms: if it really wo=
rks =0Ain this way, I don't really understand why it's does so. Wouldn't it=
 be =0Amore useful if it deleted each file containing *all of* the given te=
rms? =0A(or maybe it'is the way it works actually?)=0AThese reflexions lead=
 me to conclude that, in order to be able to remove =0Athe entries of a spe=
cific document in a Lucene index, we must store an =0Auntokenized field to =
identify each document solely. I find it strange =0Ahaving to use such an "=
artifice" to keep traces of documents =0Aindependantly. It's not very imped=
ing, it's just... strange.=0AAny contributive thinkings on this matter are =
welcome :)=0A=0AThanks for reading,=0A=0ASamuel=0A=0A----------------------=
-----------------------------------------------=0ATo unsubscribe, e-mail: j=
ava-user-unsubscribe@lucene.apache.org=0AFor additional commands, e-mail: j=
ava-user-help@lucene.apache.org=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29292-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 20 13:19:12 2007
Return-Path: <java-user-return-29292-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64294 invoked from network); 20 Jul 2007 13:19:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jul 2007 13:19:09 -0000
Received: (qmail 74010 invoked by uid 500); 20 Jul 2007 13:18:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73966 invoked by uid 500); 20 Jul 2007 13:18:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73954 invoked by uid 99); 20 Jul 2007 13:18:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jul 2007 06:18:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [80.67.64.10] (HELO smtp1.akamai.com) (80.67.64.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jul 2007 06:18:21 -0700
Received: from smtp1.akamai.com (vwall.kendall.corp.akamai.com [172.17.4.35])
	by smtp1.akamai.com (8.13.8/8.12.10) with ESMTP id l6KDH4hD018862
	for <java-user@lucene.apache.org>; Fri, 20 Jul 2007 09:17:04 -0400 (EDT)
Received: from USMA1EX-GATE1.kendall.corp.akamai.com (usma1ex-gate1.kendall.corp.akamai.com [172.17.0.215])
	by smtp1.akamai.com (8.13.8/8.12.10) with ESMTP id l6KDH4PG018856
	for <java-user@lucene.apache.org>; Fri, 20 Jul 2007 09:17:04 -0400 (EDT)
Received: from INVS1.bangalore.corp.akamai.com ([172.21.20.14]) by USMA1EX-GATE1.kendall.corp.akamai.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Fri, 20 Jul 2007 09:12:59 -0400
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: deleting/updating/identifying a document
X-MimeOLE: Produced By Microsoft Exchange V6.5
Date: Fri, 20 Jul 2007 18:47:23 +0530
Message-ID: <4FA8C6AEE609B644B38DE471A3657A62012FFD82@INVS1.bangalore.corp.akamai.com>
In-Reply-To: <46A0B209.4000308@lingway.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: deleting/updating/identifying a document
Thread-Index: AcfKzhvbL/hpEiYSRZiyvv+yuQ3cOwAAVFyQ
References: <46A0B209.4000308@lingway.com>
From: "Chhabra, Kapil" <kchhabra@akamai.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 20 Jul 2007 13:12:59.0656 (UTC) FILETIME=[B1FD5880:01C7CACF]
X-Virus-Checked: Checked by ClamAV on apache.org

Is it not true for any RDBMS table as well which does not have a Primary
Key?
If this is a problem that you are facing, then it can be solved by
introducing one unique identifier as a field in your index which would
act as a Primary Key for your index.
Using an untokenized field might not be a good idea in some cases. :)

Also, the deleteDocuments(term[]) function then gives the added
flexibility of identifying and deleting more that one documents (by a
single function call) identified by an array of Primary Key values.

kapilChhabra

-----Original Message-----
From: Samuel LEMOINE [mailto:samuel.lemoine@lingway.com]=20
Sent: Friday, July 20, 2007 6:31 PM
To: java-user@lucene.apache.org
Subject: deleting/updating/identifying a document

Hi everybody !

I'm asking myself about the way Lucene deals with deleting documents.
As far as I know, a document is identified by a document number, but=20
this document number is not reliable for long-term issues as it may=20
change on segment merging.
The way Lucene deletes documents' data from the index questions me,=20
cause it relies on terms (or document number, which as told above is not

reliable, and must be retrieved from a request). The methods I've found=20
for deleting documents from the index are those from IndexWriter and=20
IndexReader classes, deleteDocuments(term ) or deleteDocuments(term[] ).
These methods deletes the index'entries containing the given term.=20
According to the API javadoc, deleteDocuments(term[] ) will delete each=20
file that contains at least one of the given terms: if it really works=20
in this way, I don't really understand why it's does so. Wouldn't it be=20
more useful if it deleted each file containing *all of* the given terms?

(or maybe it'is the way it works actually?)
These reflexions lead me to conclude that, in order to be able to remove

the entries of a specific document in a Lucene index, we must store an=20
untokenized field to identify each document solely. I find it strange=20
having to use such an "artifice" to keep traces of documents=20
independantly. It's not very impeding, it's just... strange.
Any contributive thinkings on this matter are welcome :)

Thanks for reading,

Samuel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29293-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 20 14:05:46 2007
Return-Path: <java-user-return-29293-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92302 invoked from network); 20 Jul 2007 14:05:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jul 2007 14:05:44 -0000
Received: (qmail 1172 invoked by uid 500); 20 Jul 2007 14:05:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1117 invoked by uid 500); 20 Jul 2007 14:05:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1106 invoked by uid 99); 20 Jul 2007 14:05:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jul 2007 07:05:00 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.128.185 as permitted sender)
Received: from [209.85.128.185] (HELO fk-out-0910.google.com) (209.85.128.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jul 2007 07:04:57 -0700
Received: by fk-out-0910.google.com with SMTP id z23so87142fkz
        for <java-user@lucene.apache.org>; Fri, 20 Jul 2007 07:04:36 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Sq5JvUF+kKca1NcfsJw5YqjNS8EGq4VNeoME5JsBKWtjM7yiASof+7THz+Xsf2saAH0uyuwivdKuV+HfCwQOJK3upk9cr1T3ZVOrz1TLBk5DqOy8NopEyFCDej9agmqHfzMRgoio5RDYXmZU23UO6AFuIhVDfpvm5QqkP6+t4kE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=dlL46Z++qW2UaSdiuoYT/T7XnV+AxKT5ne9aVwep5QSoSppmXBNOx7w41zTysRLIDAYLdQndUdTreVEaRXJurKQ4xBiyMtxNOLbT4dDqfKl5tsj5S5zk9FTgQxF+EVH9PRtSFOGuvAFZTDUcw7xmIpNlwqIilpgNKqGxZUYoOqk=
Received: by 10.82.182.1 with SMTP id e1mr542343buf.1184940275408;
        Fri, 20 Jul 2007 07:04:35 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Fri, 20 Jul 2007 07:04:35 -0700 (PDT)
Message-ID: <359a92830707200704l25dc026lcc7455a09e58f466@mail.gmail.com>
Date: Fri, 20 Jul 2007 10:04:35 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: TermEnum - previous() method ?
In-Reply-To: <11707160.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_88506_22387430.1184940275362"
References: <11679947.post@talk.nabble.com> <11706989.post@talk.nabble.com>
	 <11707160.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_88506_22387430.1184940275362
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

There's nothing that I know of built in to Lucene that allows you
to do anything like termenum.previous(), I'm pretty sure you
have to roll your own.

Some possibilities:

1> Depending upon how many terms in your index, you could
just read all the authors into a Java collection of your choice
at startup time and reference that list.

2> You could just iterate from the beginning of the list every
time, storing the N elements somewhere and stop when
you get to the ones you need. Do you have any evidence
that this wouldn't work for you? I was surprised how quickly this
worked.

3> A variant of <2> would be to choose some arbitrary term that's
less than your target, skip to that one, and iterate forward. For instance,
if you were looking for the terms previous to "Erickson", you could
skip to "Eg", and iterate forward. You'd have to do some heuristics
in case there was, say, only one author between "Eg" and "Erickson".

4> You could assemble a list of, say, every 100th term, either at
startup time or as a permanent part of your index. When you had
to do a previous, skip to the appropriate term and iterate forward.
Remember that not all documents need to have the same fields,
so you can have a "super special document" that contains some
list like this.

I'd recommend that you take some simple timings of iterating
through the entire list to see if you need to get fancy or not. The
critical piece of information you've omitted is any indication of
how many terms you expect to have to iterate over. If it's
10,000 terms, the simple solution will almost certainly work for
you. If it's 10,000,000,000 then you have to do some fancier
dancing.

Best
Erick

On 7/20/07, muraalee <muraalee@gmail.com> wrote:
>
>
> Hi Mark,
> Thanks for your inputs.
>
> >> I do wonder why you want a previous though? It sounds like you might be
> >> better off heading down a different path...
>
> In our content, we have indexed Author as separate field. We want to
> expose
> a feature to  'browse' the Author list. They can type any author name and
> do
> a locate from there onwards.. While doing that they need to navigate
> 'previous' & 'next' author list.
>
> e.g AU:Rowling
>
> sample code snippet:
> TermEnum browseTermEnum = indexReader.terms(new Term("AU", "rowling"));
> while(browseTermEnum.next()){
>   System.out.println( browseTermEnum.term().text());
> }
>
> Navigating the next 10 authors is straight foward becuase we do that by
> calling browseTermEnum.next(), but we couldn't do previous. I did consider
> the approach of all terms while navigation. But the problem is, when we do
> a
> lookup of term like 'rowling', we didn't iterate from the start of the
> list,
> hence we may not have the previous terms..
>
> Any thoughts ?
>
>
> markrmiller wrote:
> >
> > I am not very familiar with the Lucene file formats, but I think that
> > there is a lot of "this number tells you how far ahead to read" when
> > enumerating terms. As you might guess, I think this lends toward reading
> > the terms file forward. Not that an index couldn't point you into the
> > terms index somehow (a meta index?). It would make just as much sense
> (or
> > more) to buffer all of the terms to allow a previous though. Depending
> on
> > your RAM and index size, this could be an option.
> >
> > I do wonder why you want a previous though? It sounds like you might be
> > better off heading down a different path...
> >
> > - Mark
> >
> >
> >
> > muraalee wrote:
> >>
> >> Hi All,
> >> I searched in this forum for anybody looking for need for previous()
> >> method in TermEnum. I found only this link
> >>
> http://www.nabble.com/How-to-navigate-through-indexed-terms-tf28148.html#a189225
> >>
> >> Would it be possible to implement previous() method ? I know i am
> asking
> >> for quick solution here ;) Just i want to ensure if it not implemented,
> >> there might be a reason. So i can consider alternates approaches to
> >> implement similar feature..
> >>
> >> appreciate your thoughts...
> >>
> >> Thanks
> >> Murali V
> >>
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/TermEnum----previous%28%29-method---tf4107296.html#a11707160
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_88506_22387430.1184940275362--

From java-user-return-29294-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 20 14:12:21 2007
Return-Path: <java-user-return-29294-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95051 invoked from network); 20 Jul 2007 14:12:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jul 2007 14:12:20 -0000
Received: (qmail 26484 invoked by uid 500); 20 Jul 2007 14:11:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26377 invoked by uid 500); 20 Jul 2007 14:11:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26365 invoked by uid 99); 20 Jul 2007 14:11:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jul 2007 07:11:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [207.31.238.50] (HELO athena.getconnectedinc.com) (207.31.238.50)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jul 2007 07:11:34 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: TermEnum - previous() method ?
Date: Fri, 20 Jul 2007 10:11:10 -0400
Message-ID: <3D97BD422499564FA26C6F7160FA95520B54E621@athena.getconnectedinc.com>
In-Reply-To: <359a92830707200704l25dc026lcc7455a09e58f466@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: TermEnum - previous() method ?
Thread-Index: AcfK1vZWs524yqZ/S7Ge2N14+B8sCAAADS4g
References: <11679947.post@talk.nabble.com> <11706989.post@talk.nabble.com> <11707160.post@talk.nabble.com> <359a92830707200704l25dc026lcc7455a09e58f466@mail.gmail.com>
From: "Will Johnson" <wjohnson@GETCONNECTED.COM>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

One other possibility I've used in the past:

Store 2 fields, one with the normal characters, one with each character
inversed, A->Z, Y->B, and so on.  As long as you have the function to go
from the normal->reversed and reversed->normal you can iterate over both
fields in a forward only mode and just reverse out the strings on the
display side. =20

This method makes a number of assumptions about index size constraints,
character sets; ie ymmv.

- will =20

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]=20
Sent: Friday, July 20, 2007 10:05 AM
To: java-user@lucene.apache.org
Subject: Re: TermEnum - previous() method ?

There's nothing that I know of built in to Lucene that allows you
to do anything like termenum.previous(), I'm pretty sure you
have to roll your own.

Some possibilities:

1> Depending upon how many terms in your index, you could
just read all the authors into a Java collection of your choice
at startup time and reference that list.

2> You could just iterate from the beginning of the list every
time, storing the N elements somewhere and stop when
you get to the ones you need. Do you have any evidence
that this wouldn't work for you? I was surprised how quickly this
worked.

3> A variant of <2> would be to choose some arbitrary term that's
less than your target, skip to that one, and iterate forward. For
instance,
if you were looking for the terms previous to "Erickson", you could
skip to "Eg", and iterate forward. You'd have to do some heuristics
in case there was, say, only one author between "Eg" and "Erickson".

4> You could assemble a list of, say, every 100th term, either at
startup time or as a permanent part of your index. When you had
to do a previous, skip to the appropriate term and iterate forward.
Remember that not all documents need to have the same fields,
so you can have a "super special document" that contains some
list like this.

I'd recommend that you take some simple timings of iterating
through the entire list to see if you need to get fancy or not. The
critical piece of information you've omitted is any indication of
how many terms you expect to have to iterate over. If it's
10,000 terms, the simple solution will almost certainly work for
you. If it's 10,000,000,000 then you have to do some fancier
dancing.

Best
Erick

On 7/20/07, muraalee <muraalee@gmail.com> wrote:
>
>
> Hi Mark,
> Thanks for your inputs.
>
> >> I do wonder why you want a previous though? It sounds like you
might be
> >> better off heading down a different path...
>
> In our content, we have indexed Author as separate field. We want to
> expose
> a feature to  'browse' the Author list. They can type any author name
and
> do
> a locate from there onwards.. While doing that they need to navigate
> 'previous' & 'next' author list.
>
> e.g AU:Rowling
>
> sample code snippet:
> TermEnum browseTermEnum =3D indexReader.terms(new Term("AU",
"rowling"));
> while(browseTermEnum.next()){
>   System.out.println( browseTermEnum.term().text());
> }
>
> Navigating the next 10 authors is straight foward becuase we do that
by
> calling browseTermEnum.next(), but we couldn't do previous. I did
consider
> the approach of all terms while navigation. But the problem is, when
we do
> a
> lookup of term like 'rowling', we didn't iterate from the start of the
> list,
> hence we may not have the previous terms..
>
> Any thoughts ?
>
>
> markrmiller wrote:
> >
> > I am not very familiar with the Lucene file formats, but I think
that
> > there is a lot of "this number tells you how far ahead to read" when
> > enumerating terms. As you might guess, I think this lends toward
reading
> > the terms file forward. Not that an index couldn't point you into
the
> > terms index somehow (a meta index?). It would make just as much
sense
> (or
> > more) to buffer all of the terms to allow a previous though.
Depending
> on
> > your RAM and index size, this could be an option.
> >
> > I do wonder why you want a previous though? It sounds like you might
be
> > better off heading down a different path...
> >
> > - Mark
> >
> >
> >
> > muraalee wrote:
> >>
> >> Hi All,
> >> I searched in this forum for anybody looking for need for
previous()
> >> method in TermEnum. I found only this link
> >>
>
http://www.nabble.com/How-to-navigate-through-indexed-terms-tf28148.html
#a189225
> >>
> >> Would it be possible to implement previous() method ? I know i am
> asking
> >> for quick solution here ;) Just i want to ensure if it not
implemented,
> >> there might be a reason. So i can consider alternates approaches to
> >> implement similar feature..
> >>
> >> appreciate your thoughts...
> >>
> >> Thanks
> >> Murali V
> >>
> >
> >
>
> --
> View this message in context:
>
http://www.nabble.com/TermEnum----previous%28%29-method---tf4107296.html
#a11707160
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29295-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 20 14:22:35 2007
Return-Path: <java-user-return-29295-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99365 invoked from network); 20 Jul 2007 14:22:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jul 2007 14:22:34 -0000
Received: (qmail 54074 invoked by uid 500); 20 Jul 2007 14:21:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54040 invoked by uid 500); 20 Jul 2007 14:21:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54029 invoked by uid 99); 20 Jul 2007 14:21:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jul 2007 07:21:50 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.134.190 as permitted sender)
Received: from [209.85.134.190] (HELO mu-out-0910.google.com) (209.85.134.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jul 2007 07:21:47 -0700
Received: by mu-out-0910.google.com with SMTP id g7so1027935muf
        for <java-user@lucene.apache.org>; Fri, 20 Jul 2007 07:21:25 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=LQe4YHCy7O1zHcNX/5vyXlar4uo+/10ZdNK/dOvbzzezNp8iAVLub3fzP2kjI52MW5OuRpYuK/NYAllk8KcFB4TyHbC5FsCSsac2k0eihzZQxiG0QI3gzGZ6f7zIl3BCevPHIJ7xtd11Pmz/zgkgDL8u+TEE483enzZzJUm38zg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=sxMTDwyLCqNhQDmaA9ybdYjwyPB7IEirpuzd7DOg8jmZZIFZvyAZvONKMHStKzzNUtve7iwZbI2mfpgamRjt965ABu1fwxNEozeU8RHGnOsWc2nRCzBpKyMIl4PM38b9Gfvzk+4Bi5n9ccyL6wHK/iwbM0NoPzOly7lBuxLSP8o=
Received: by 10.82.174.20 with SMTP id w20mr570476bue.1184941284113;
        Fri, 20 Jul 2007 07:21:24 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Fri, 20 Jul 2007 07:21:24 -0700 (PDT)
Message-ID: <359a92830707200721t65feba71x4b9a70aef73f1c7@mail.gmail.com>
Date: Fri, 20 Jul 2007 10:21:24 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: TermEnum - previous() method ?
In-Reply-To: <3D97BD422499564FA26C6F7160FA95520B54E621@athena.getconnectedinc.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_88782_27389509.1184941284080"
References: <11679947.post@talk.nabble.com> <11706989.post@talk.nabble.com>
	 <11707160.post@talk.nabble.com>
	 <359a92830707200704l25dc026lcc7455a09e58f466@mail.gmail.com>
	 <3D97BD422499564FA26C6F7160FA95520B54E621@athena.getconnectedinc.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_88782_27389509.1184941284080
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You know, every time I see a solution like this, I have to smack
myself upside the head. As an old C programmer, I have a real
problem "wasting", say,  a few tens of megabytes just to make
my life easier. Of disk space. That costs virtually nothing. And
(as you say, assuming some constraints) doesn't change my
search response time. And won't cost the company time tracing
down bugs. Which will let me work on something *else* that's
might generate revenue.

Siiigggghhhh. Sometime I'll get into the modern world and actually
think of this kind of solution myself.

Erick

On 7/20/07, Will Johnson <wjohnson@getconnected.com> wrote:
>
> One other possibility I've used in the past:
>
> Store 2 fields, one with the normal characters, one with each character
> inversed, A->Z, Y->B, and so on.  As long as you have the function to go
> from the normal->reversed and reversed->normal you can iterate over both
> fields in a forward only mode and just reverse out the strings on the
> display side.
>
> This method makes a number of assumptions about index size constraints,
> character sets; ie ymmv.
>
> - will
>
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: Friday, July 20, 2007 10:05 AM
> To: java-user@lucene.apache.org
> Subject: Re: TermEnum - previous() method ?
>
> There's nothing that I know of built in to Lucene that allows you
> to do anything like termenum.previous(), I'm pretty sure you
> have to roll your own.
>
> Some possibilities:
>
> 1> Depending upon how many terms in your index, you could
> just read all the authors into a Java collection of your choice
> at startup time and reference that list.
>
> 2> You could just iterate from the beginning of the list every
> time, storing the N elements somewhere and stop when
> you get to the ones you need. Do you have any evidence
> that this wouldn't work for you? I was surprised how quickly this
> worked.
>
> 3> A variant of <2> would be to choose some arbitrary term that's
> less than your target, skip to that one, and iterate forward. For
> instance,
> if you were looking for the terms previous to "Erickson", you could
> skip to "Eg", and iterate forward. You'd have to do some heuristics
> in case there was, say, only one author between "Eg" and "Erickson".
>
> 4> You could assemble a list of, say, every 100th term, either at
> startup time or as a permanent part of your index. When you had
> to do a previous, skip to the appropriate term and iterate forward.
> Remember that not all documents need to have the same fields,
> so you can have a "super special document" that contains some
> list like this.
>
> I'd recommend that you take some simple timings of iterating
> through the entire list to see if you need to get fancy or not. The
> critical piece of information you've omitted is any indication of
> how many terms you expect to have to iterate over. If it's
> 10,000 terms, the simple solution will almost certainly work for
> you. If it's 10,000,000,000 then you have to do some fancier
> dancing.
>
> Best
> Erick
>
> On 7/20/07, muraalee <muraalee@gmail.com> wrote:
> >
> >
> > Hi Mark,
> > Thanks for your inputs.
> >
> > >> I do wonder why you want a previous though? It sounds like you
> might be
> > >> better off heading down a different path...
> >
> > In our content, we have indexed Author as separate field. We want to
> > expose
> > a feature to  'browse' the Author list. They can type any author name
> and
> > do
> > a locate from there onwards.. While doing that they need to navigate
> > 'previous' & 'next' author list.
> >
> > e.g AU:Rowling
> >
> > sample code snippet:
> > TermEnum browseTermEnum = indexReader.terms(new Term("AU",
> "rowling"));
> > while(browseTermEnum.next()){
> >   System.out.println( browseTermEnum.term().text());
> > }
> >
> > Navigating the next 10 authors is straight foward becuase we do that
> by
> > calling browseTermEnum.next(), but we couldn't do previous. I did
> consider
> > the approach of all terms while navigation. But the problem is, when
> we do
> > a
> > lookup of term like 'rowling', we didn't iterate from the start of the
> > list,
> > hence we may not have the previous terms..
> >
> > Any thoughts ?
> >
> >
> > markrmiller wrote:
> > >
> > > I am not very familiar with the Lucene file formats, but I think
> that
> > > there is a lot of "this number tells you how far ahead to read" when
> > > enumerating terms. As you might guess, I think this lends toward
> reading
> > > the terms file forward. Not that an index couldn't point you into
> the
> > > terms index somehow (a meta index?). It would make just as much
> sense
> > (or
> > > more) to buffer all of the terms to allow a previous though.
> Depending
> > on
> > > your RAM and index size, this could be an option.
> > >
> > > I do wonder why you want a previous though? It sounds like you might
> be
> > > better off heading down a different path...
> > >
> > > - Mark
> > >
> > >
> > >
> > > muraalee wrote:
> > >>
> > >> Hi All,
> > >> I searched in this forum for anybody looking for need for
> previous()
> > >> method in TermEnum. I found only this link
> > >>
> >
> http://www.nabble.com/How-to-navigate-through-indexed-terms-tf28148.html
> #a189225
> > >>
> > >> Would it be possible to implement previous() method ? I know i am
> > asking
> > >> for quick solution here ;) Just i want to ensure if it not
> implemented,
> > >> there might be a reason. So i can consider alternates approaches to
> > >> implement similar feature..
> > >>
> > >> appreciate your thoughts...
> > >>
> > >> Thanks
> > >> Murali V
> > >>
> > >
> > >
> >
> > --
> > View this message in context:
> >
> http://www.nabble.com/TermEnum----previous%28%29-method---tf4107296.html
> #a11707160
> > Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_88782_27389509.1184941284080--

From java-user-return-29296-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 20 14:41:43 2007
Return-Path: <java-user-return-29296-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6362 invoked from network); 20 Jul 2007 14:41:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jul 2007 14:41:42 -0000
Received: (qmail 16266 invoked by uid 500); 20 Jul 2007 14:41:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16226 invoked by uid 500); 20 Jul 2007 14:41:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16215 invoked by uid 99); 20 Jul 2007 14:41:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jul 2007 07:41:35 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lukas.vlcek@gmail.com designates 64.233.162.233 as permitted sender)
Received: from [64.233.162.233] (HELO nz-out-0506.google.com) (64.233.162.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jul 2007 07:41:32 -0700
Received: by nz-out-0506.google.com with SMTP id i28so698278nzi
        for <java-user@lucene.apache.org>; Fri, 20 Jul 2007 07:41:10 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=fn/Ui7JTiQ7UsuPd4IXrFgZAdd7dwao0cCZCH/5WLG+lGvYavwoaz/eDeT4VsXlASTMAru/TCO7g+FPp3mzHwRhKFtzNl+5oanmPMgCtoAorZc2qV2exlAHRtZ7xppNoU9uf9qfrlMkvSPzU4Z1ITIc3HsatSk9maxHLl0uXH50=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=c2HwNNamojUVcvX6P8OzOMcW/9ic/MHAJGfvJqQZosDOMbdafx5K3Ux+pW0dzXeqV6vDMXObaBm6Gbu7wzJBsX2psQBF7Z/tkTErgHHjALRgZaedohtjy4ucS9mrIB2cabDrUUGhhax2q7ivUpPvvwzteSbFwvcI4NTV1B2v7qA=
Received: by 10.140.199.19 with SMTP id w19mr155161rvf.1184942470268;
        Fri, 20 Jul 2007 07:41:10 -0700 (PDT)
Received: by 10.141.210.7 with HTTP; Fri, 20 Jul 2007 07:41:10 -0700 (PDT)
Message-ID: <52c3ddca0707200741o16d507c5pda53486842e9cc91@mail.gmail.com>
Date: Fri, 20 Jul 2007 16:41:10 +0200
From: "Lukas Vlcek" <lukas.vlcek@gmail.com>
To: java-user@lucene.apache.org
Subject: multi-field and wildcard query highlighter questions
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_15515_16892900.1184942470231"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_15515_16892900.1184942470231
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

I have two questions:

1) Is it possible to get some highlighted text when using wildcard query? (I
am using query rewrite)
I found that it works for queries like [prefix*suffix] or [prefix?suffix]
but I was not able to get results for queries like [prefix*]

2) What kind of problems I should expect when trying to get highlighted
fragment(s) from multi-filed document? (I mean when the document has more
fields of the same name).
So far I am often experiencing StringIndexOutOfBoundsException (see example
below):

SEVERE: String index out of range: 17
java.lang.StringIndexOutOfBoundsException: String index out of range: 17
        at java.lang.String.substring(String.java:1765)
        at
org.apache.lucene.search.highlight.Highlighter.getBestTextFragments(
Highlighter.java:235)
        at org.apache.lucene.search.highlight.Highlighter.getBestFragments(
Highlighter.java:175)
        at org.apache.lucene.search.highlight.Highlighter.getBestFragment(
Highlighter.java:101)
        at
org.compass.core.lucene.engine.LuceneSearchEngineHighlighter.collectionFragment
(LuceneSearchEngineHighlighter.java:204)
        at
org.compass.core.lucene.engine.LuceneSearchEngineHighlighter.collectionFragment
(LuceneSearchEngineHighlighter.java:189)
        at
org.compass.core.impl.DefaultCompassHighlighter.collectionFragment(
DefaultCompassHighlighter.java:127)
... [truncated]
... [also you can notice that I am using Compass above Lucene but to me this
seems like Lucene related problem because index seems to be OK (via Luke)]

I am using Lucene-2.2.0.

Regards,
Lukas

------=_Part_15515_16892900.1184942470231--

From java-user-return-29297-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 20 14:52:49 2007
Return-Path: <java-user-return-29297-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10307 invoked from network); 20 Jul 2007 14:52:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jul 2007 14:52:49 -0000
Received: (qmail 47108 invoked by uid 500); 20 Jul 2007 14:52:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47066 invoked by uid 500); 20 Jul 2007 14:52:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47045 invoked by uid 99); 20 Jul 2007 14:52:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jul 2007 07:52:38 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of askar.zaidi@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jul 2007 07:52:34 -0700
Received: by ug-out-1314.google.com with SMTP id c2so689736ugf
        for <java-user@lucene.apache.org>; Fri, 20 Jul 2007 07:52:13 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=LyFzQSwtfP5yATcTpOF4rmRB8d5rmfoMk/mPLZpc20FBAJftxXqRPJd9t/l0a72dE/tpsyUMrbEIAHGnlx6fOPpSvCtJszqA1FK1dkwJLWuf/wfsrA2T5FTnf4AQrO5lJ6yOnhfcjuUDtidkgS9K/Bgu8VefLdHvty+/B8PfyL8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=m2zB7EnBw+pPEtPr74pNMonQ9IrB4eS4A6FjTbiieVhiUmovCcbJL40/KHk2y7V805GTKviX34L9mRXcTt+LYuAM6MJs+u+1cWb6g6U6EdQXOo72j+1jGNFY/9yi5CsU9C/pZl22rH/PNgDH+TbyHSO+ZEWAHCMCVHXGdktTlk4=
Received: by 10.66.225.1 with SMTP id x1mr2011078ugg.1184943132968;
        Fri, 20 Jul 2007 07:52:12 -0700 (PDT)
Received: by 10.66.251.15 with HTTP; Fri, 20 Jul 2007 07:52:12 -0700 (PDT)
Message-ID: <c0c0e1d40707200752n57268e91i659a9f1bb427216c@mail.gmail.com>
Date: Fri, 20 Jul 2007 10:52:12 -0400
From: "Askar Zaidi" <askar.zaidi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene shows parts of search query as a HIT
In-Reply-To: <359a92830707190741q609d6fbhb992b603b4ba0a0a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4726_6629957.1184943132915"
References: <A955EA1F8FE31749AEC8C998082F6C7CD6EA4A@hai01.hippo.local>
	 <359a92830707190607g5c5fb26eqbe9dc47d11143d65@mail.gmail.com>
	 <c0c0e1d40707190729p40ea2826l73907fa0dbb6bad2@mail.gmail.com>
	 <359a92830707190741q609d6fbhb992b603b4ba0a0a@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4726_6629957.1184943132915
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hey guys,

Thanks for all the response. One more thing, I am accessing my documents
like this:

 for (int i = 0; i < hitCount; i++) {
                Document doc = hits.doc(i);
                System.out.println("  " + (i + 1) + ". " + doc.get("item"));
            }

This shows me the item value. Now I wanna see the score related to this
item, how do I get that?

thanks,

AZ


On 7/19/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> QueryParser.setDefaultOperator
>
> On 7/19/07, Askar Zaidi <askar.zaidi@gmail.com> wrote:
> >
> > Hey Erik,
> >
> > How can I change the default Lucene OR property to AND.
> >
> > When I tried query.toString(), I got
> >
> > contents:w contents:chan contents: kim
> >
> > Thats fine, but its doing OR, how can I make it AND so that it shows:
> >
> > contents: W Chan Kim ??
> >
> > thanks a ton !
> >
> > AZ
> >
> > On 7/19/07, Erick Erickson <erickerickson@gmail.com> wrote:
> > >
> > > You say there's only one document and you added many. The line
> > >
> > > IndexWriter writer = new IndexWriter(indexPath, new
> StandardAnalyzer(),
> > > true);
> > >
> > > blows away any existing index data and starts over. If you're calling
> > > this fragment for each document, you'll always have only one doc. Try
> > > changing the 'true' to 'false'. Or better yet, open the writer outside
> > the
> > > document add routines and pass it in...
> > >
> > > I still have no clue why you're getting the results you are.
> > > StandardAnalyzer
> > > doesn't stem, so that's probably not it. Try query.toString() to see
> > what
> > > the actual query you're submitting is. Then, I'd think about playing
> > with
> > > that
> > > query in Luke to see what's happening.
> > >
> > > Best
> > > ErickOn 7/19/07, Ard Schrijvers <a.schrijvers@hippo.nl> wrote:
> > > >
> > > > Hello Askar,
> > > >
> > > > Which analyzer are you using for indexing and searching? If you use
> an
> > > > analyzer that uses stemming, you might see that "change",
> "changing",
> > > > "changed", "chan" etc al get reduced to the same word "chan".
> > > >
> > > > In luke you can test with plugins that show you what tokens are
> > created
> > > > from your analyzer,
> > > >
> > > > Regards Ard
> > > >
> > > >
> > > > >
> > > > >
> > > > > Hey Guys,
> > > > >
> > > > > I just checked my Lucene results. It shows a document with
> > > > > the word hit
> > > > > "change" when I am searching for "Chan", and it considers
> > > > > that as a hit. Is
> > > > > there a way to stop this and show just the exact word match ?
> > > > >
> > > > > I started using Lucene yesterday, so I am fairly new !
> > > > >
> > > > > thanks
> > > > > AZ
> > > > >
> > > > > On 7/18/07, Erick Erickson <erickerickson@gmail.com> wrote:
> > > > > >
> > > > > > Are you sure that the hit wasn't on "w" or "kim"? The
> > > > > > default for searching is OR...
> > > > > >
> > > > > > I recommend that you get a copy of Luke (google lucene luke)
> > > > > > which allows you to examine your index as well as see how
> > > > > > queries parse using various analyzers. It's an invaluable
> tool...
> > > > > >
> > > > > > Best
> > > > > > Erick
> > > > > >
> > > > > > On 7/18/07, Askar Zaidi <askar.zaidi@gmail.com> wrote:
> > > > > > >
> > > > > > > Hey folks,
> > > > > > >
> > > > > > > I am a new Lucene user , I used the following after indexing:
> > > > > > >
> > > > > > > search(searcher, "W. Chan Kim");
> > > > > > >
> > > > > > > Lucene showed me hits of documents where "channel" word
> > > > > existed. Notice
> > > > > > > that
> > > > > > > "Chan" is a part of "Channel" . How do I stop this ?
> > > > > > >
> > > > > > > I am keen to find the exact word.
> > > > > > >
> > > > > > > I used the following, before the search method:
> > > > > > >
> > > > > > > IndexWriter writer = new IndexWriter(indexPath, new
> > > > > StandardAnalyzer(),
> > > > > > > true);
> > > > > > >
> > > > > > >                                 writer.addDocument
> > > > > > > (createDocument(item,words));
> > > > > > >                                 writer.optimize();
> > > > > > >                                 writer.close();
> > > > > > >                                 searcher = new
> > > > > IndexSearcher(indexPath);
> > > > > > >
> > > > > > > thanks !
> > > > > > >
> > > > > > > AZ
> > > > > > >
> > > > > >
> > > > >
> > > >
> > > >
> ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >
> > > >
> > >
> >
>

------=_Part_4726_6629957.1184943132915--

From java-user-return-29298-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 20 15:06:04 2007
Return-Path: <java-user-return-29298-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37567 invoked from network); 20 Jul 2007 15:06:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jul 2007 15:06:02 -0000
Received: (qmail 89672 invoked by uid 500); 20 Jul 2007 15:05:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89638 invoked by uid 500); 20 Jul 2007 15:05:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89619 invoked by uid 99); 20 Jul 2007 15:05:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jul 2007 08:05:54 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.237 as permitted sender)
Received: from [66.249.82.237] (HELO wx-out-0506.google.com) (66.249.82.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jul 2007 08:05:51 -0700
Received: by wx-out-0506.google.com with SMTP id i28so756600wxd
        for <java-user@lucene.apache.org>; Fri, 20 Jul 2007 08:05:30 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=SMk9o4II+pHnshWpzzPjA+8iOcUL2SEuzK0NxrxRs9NyJDSphKaunlk3fN4q5Y6OOiBWTcY9jf98Hq4XfLGEvsBMbA0lRP1q8I7Ohsk/gkwtNXteTQWX6J7SOKOw9jMbZQ0j8/81loco+4BIUDOnVaZjLCo7FHXh0mFysuv8P4o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=XakS3FyfR3kGuw2SlJwIWduGa502XLVndsLWQOlV5uDg+5SNScMIiVY5reEYNz4oGxrT/2Ns51ZpEzuWEuy+IK0GZRgE/ARHJjFf6U9vB6gvvCXU1hFdEanm5CHuwlBzxmltkYsnf4rojf9E1NMxFVVVCp2mggwWIESgd1DspXY=
Received: by 10.90.75.10 with SMTP id x10mr428764aga.1184943930473;
        Fri, 20 Jul 2007 08:05:30 -0700 (PDT)
Received: from ?192.168.1.100? ( [216.66.114.204])
        by mx.google.com with ESMTPS id 39sm3854784agb.2007.07.20.08.05.29
        (version=SSLv3 cipher=RC4-MD5);
        Fri, 20 Jul 2007 08:05:29 -0700 (PDT)
Message-ID: <46A0CF1B.1050706@gmail.com>
Date: Fri, 20 Jul 2007 11:04:59 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.4 (Windows/20070604)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: multi-field and wildcard query highlighter questions
References: <52c3ddca0707200741o16d507c5pda53486842e9cc91@mail.gmail.com>
In-Reply-To: <52c3ddca0707200741o16d507c5pda53486842e9cc91@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

1) Perhaps the the query you tried does not match anything in your 
index? What release are you using? [prefix*] works fine for me.

2) The Highlighter should not care if you have more than one field with 
the same name in a document. The Highlighter does not deal with 
documents. It takes a TokenStream of field:value pairs and then compares 
those to the field:value pairs in the query. If you pass a field name, 
only field matches are scored over 0, if you pass null for the field 
name, fields are ignored and only values are compared. This is all very 
separate from storing fields in a document. Are you doing something 
weird with your TokenStream?


- Mark

Lukas Vlcek wrote:
> Hi,
>
> I have two questions:
>
> 1) Is it possible to get some highlighted text when using wildcard 
> query? (I
> am using query rewrite)
> I found that it works for queries like [prefix*suffix] or [prefix?suffix]
> but I was not able to get results for queries like [prefix*]
>
> 2) What kind of problems I should expect when trying to get highlighted
> fragment(s) from multi-filed document? (I mean when the document has more
> fields of the same name).
> So far I am often experiencing StringIndexOutOfBoundsException (see 
> example
> below):
>
> SEVERE: String index out of range: 17
> java.lang.StringIndexOutOfBoundsException: String index out of range: 17
>        at java.lang.String.substring(String.java:1765)
>        at
> org.apache.lucene.search.highlight.Highlighter.getBestTextFragments(
> Highlighter.java:235)
>        at 
> org.apache.lucene.search.highlight.Highlighter.getBestFragments(
> Highlighter.java:175)
>        at org.apache.lucene.search.highlight.Highlighter.getBestFragment(
> Highlighter.java:101)
>        at
> org.compass.core.lucene.engine.LuceneSearchEngineHighlighter.collectionFragment 
>
> (LuceneSearchEngineHighlighter.java:204)
>        at
> org.compass.core.lucene.engine.LuceneSearchEngineHighlighter.collectionFragment 
>
> (LuceneSearchEngineHighlighter.java:189)
>        at
> org.compass.core.impl.DefaultCompassHighlighter.collectionFragment(
> DefaultCompassHighlighter.java:127)
> ... [truncated]
> ... [also you can notice that I am using Compass above Lucene but to 
> me this
> seems like Lucene related problem because index seems to be OK (via 
> Luke)]
>
> I am using Lucene-2.2.0.
>
> Regards,
> Lukas
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29299-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 20 15:11:25 2007
Return-Path: <java-user-return-29299-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56794 invoked from network); 20 Jul 2007 15:11:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jul 2007 15:11:25 -0000
Received: (qmail 8108 invoked by uid 500); 20 Jul 2007 15:11:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8079 invoked by uid 500); 20 Jul 2007 15:11:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8067 invoked by uid 99); 20 Jul 2007 15:11:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jul 2007 08:11:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [213.133.33.40] (HELO smtp.is.nl) (213.133.33.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jul 2007 08:11:16 -0700
Received: from [213.133.51.241] (HELO hai01.hippo.local)
  by smtp.is.nl (CommuniGate Pro SMTP 5.0.10)
  with ESMTP id 19934349 for java-user@lucene.apache.org; Fri, 20 Jul 2007 17:10:54 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6619.12
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Lucene shows parts of search query as a HIT
Date: Fri, 20 Jul 2007 17:10:53 +0200
Message-ID: <A955EA1F8FE31749AEC8C998082F6C7C01AC11B5@hai01.hippo.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene shows parts of search query as a HIT
Thread-Index: AcfK3aNsTCD4nLBzRDWALjb0cgq9SgAAnSrA
From: "Ard Schrijvers" <a.schrijvers@hippo.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

hits.score(i)

See =
http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/javadoc/org=
/apache/lucene/search/Hits.html

Ard



> Hey guys,
>=20
> Thanks for all the response. One more thing, I am accessing=20
> my documents
> like this:
>=20
>  for (int i =3D 0; i < hitCount; i++) {
>                 Document doc =3D hits.doc(i);
>                 System.out.println("  " + (i + 1) + ". " +=20
> doc.get("item"));
>             }
>=20
> This shows me the item value. Now I wanna see the score=20
> related to this
> item, how do I get that?
>=20
> thanks,
>=20
> AZ
>=20
>=20
> On 7/19/07, Erick Erickson <erickerickson@gmail.com> wrote:
> >
> > QueryParser.setDefaultOperator
> >
> > On 7/19/07, Askar Zaidi <askar.zaidi@gmail.com> wrote:
> > >
> > > Hey Erik,
> > >
> > > How can I change the default Lucene OR property to AND.
> > >
> > > When I tried query.toString(), I got
> > >
> > > contents:w contents:chan contents: kim
> > >
> > > Thats fine, but its doing OR, how can I make it AND so=20
> that it shows:
> > >
> > > contents: W Chan Kim ??
> > >
> > > thanks a ton !
> > >
> > > AZ
> > >
> > > On 7/19/07, Erick Erickson <erickerickson@gmail.com> wrote:
> > > >
> > > > You say there's only one document and you added many. The line
> > > >
> > > > IndexWriter writer =3D new IndexWriter(indexPath, new
> > StandardAnalyzer(),
> > > > true);
> > > >
> > > > blows away any existing index data and starts over. If=20
> you're calling
> > > > this fragment for each document, you'll always have=20
> only one doc. Try
> > > > changing the 'true' to 'false'. Or better yet, open the=20
> writer outside
> > > the
> > > > document add routines and pass it in...
> > > >
> > > > I still have no clue why you're getting the results you are.
> > > > StandardAnalyzer
> > > > doesn't stem, so that's probably not it. Try=20
> query.toString() to see
> > > what
> > > > the actual query you're submitting is. Then, I'd think=20
> about playing
> > > with
> > > > that
> > > > query in Luke to see what's happening.
> > > >
> > > > Best
> > > > ErickOn 7/19/07, Ard Schrijvers <a.schrijvers@hippo.nl> wrote:
> > > > >
> > > > > Hello Askar,
> > > > >
> > > > > Which analyzer are you using for indexing and=20
> searching? If you use
> > an
> > > > > analyzer that uses stemming, you might see that "change",
> > "changing",
> > > > > "changed", "chan" etc al get reduced to the same word "chan".
> > > > >
> > > > > In luke you can test with plugins that show you what=20
> tokens are
> > > created
> > > > > from your analyzer,
> > > > >
> > > > > Regards Ard
> > > > >
> > > > >
> > > > > >
> > > > > >
> > > > > > Hey Guys,
> > > > > >
> > > > > > I just checked my Lucene results. It shows a document with
> > > > > > the word hit
> > > > > > "change" when I am searching for "Chan", and it considers
> > > > > > that as a hit. Is
> > > > > > there a way to stop this and show just the exact=20
> word match ?
> > > > > >
> > > > > > I started using Lucene yesterday, so I am fairly new !
> > > > > >
> > > > > > thanks
> > > > > > AZ
> > > > > >
> > > > > > On 7/18/07, Erick Erickson <erickerickson@gmail.com> wrote:
> > > > > > >
> > > > > > > Are you sure that the hit wasn't on "w" or "kim"? The
> > > > > > > default for searching is OR...
> > > > > > >
> > > > > > > I recommend that you get a copy of Luke (google=20
> lucene luke)
> > > > > > > which allows you to examine your index as well as see how
> > > > > > > queries parse using various analyzers. It's an invaluable
> > tool...
> > > > > > >
> > > > > > > Best
> > > > > > > Erick
> > > > > > >
> > > > > > > On 7/18/07, Askar Zaidi <askar.zaidi@gmail.com> wrote:
> > > > > > > >
> > > > > > > > Hey folks,
> > > > > > > >
> > > > > > > > I am a new Lucene user , I used the following=20
> after indexing:
> > > > > > > >
> > > > > > > > search(searcher, "W. Chan Kim");
> > > > > > > >
> > > > > > > > Lucene showed me hits of documents where "channel" word
> > > > > > existed. Notice
> > > > > > > > that
> > > > > > > > "Chan" is a part of "Channel" . How do I stop this ?
> > > > > > > >
> > > > > > > > I am keen to find the exact word.
> > > > > > > >
> > > > > > > > I used the following, before the search method:
> > > > > > > >
> > > > > > > > IndexWriter writer =3D new IndexWriter(indexPath, new
> > > > > > StandardAnalyzer(),
> > > > > > > > true);
> > > > > > > >
> > > > > > > >                                 writer.addDocument
> > > > > > > > (createDocument(item,words));
> > > > > > > >                                 writer.optimize();
> > > > > > > >                                 writer.close();
> > > > > > > >                                 searcher =3D new
> > > > > > IndexSearcher(indexPath);
> > > > > > > >
> > > > > > > > thanks !
> > > > > > > >
> > > > > > > > AZ
> > > > > > > >
> > > > > > >
> > > > > >
> > > > >
> > > > >
> >=20
> ---------------------------------------------------------------------
> > > > > To unsubscribe, e-mail:=20
> java-user-unsubscribe@lucene.apache.org
> > > > > For additional commands, e-mail:=20
> java-user-help@lucene.apache.org
> > > > >
> > > > >
> > > >
> > >
> >
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29300-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 20 19:28:14 2007
Return-Path: <java-user-return-29300-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95315 invoked from network); 20 Jul 2007 19:28:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jul 2007 19:28:13 -0000
Received: (qmail 38061 invoked by uid 500); 20 Jul 2007 19:28:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38027 invoked by uid 500); 20 Jul 2007 19:28:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38015 invoked by uid 99); 20 Jul 2007 19:28:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jul 2007 12:28:07 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=NO_REAL_NAME,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mhzmark@interia.eu designates 80.48.65.35 as permitted sender)
Received: from [80.48.65.35] (HELO smtp4.poczta.interia.pl) (80.48.65.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jul 2007 12:28:02 -0700
Received: by smtp4.poczta.interia.pl (INTERIA.PL, from userid 502)
	id 83F3913FAE4; Fri, 20 Jul 2007 21:27:41 +0200 (CEST)
Received: from f38.poczta.interia.pl (f38.poczta.interia.pl [10.217.2.38])
	by smtp4.poczta.interia.pl (INTERIA.PL) with ESMTP id 1F99213F9F4
	for <java-user@lucene.apache.org>; Fri, 20 Jul 2007 21:27:40 +0200 (CEST)
Received: from localhost (localhost.poczta.interia.pl [127.0.0.1])
	by f38.poczta.interia.pl (Postfix) with ESMTP id 9AC2D3E886E
	for <java-user@lucene.apache.org>; Fri, 20 Jul 2007 21:27:40 +0200 (CEST)
Date: 20 Jul 2007 21:27:40 +0200
From: mhzmark@interia.eu
Subject: [RegexQuery]  how to check what words were founded in particulary Documents ?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: TEXT/plain; CHARSET=ISO-8859-2
Content-Transfer-Encoding: QUOTED-PRINTABLE
X-ORIGINATE-IP: 83.4.166.18
X-Mailer: PSE
Message-Id: <20070720192740.9AC2D3E886E@f38.poczta.interia.pl>
X-EMID: 3d540acc
X-Virus-Checked: Checked by ClamAV on apache.org

Hello.=20

Let assume that I have this code in my application:

   (...)
   Query query =3D new RegexQuery(new Term("field", "C.T"));;=20
   // searching...
   (...)

And now, I would like to know if my application founded "cat" or "cot" or
something else. How can I check what was founded by my application ?

I would like to write application like this:
   INPUT -> regular expression
   OUTPUT -> file  ---> word
             =09
example: INPUT =3D "C.T"
         OUTPUT =3D=20
                  a.txt --> CAT
                  a.txt --> COT
                  b.txt --> CAT
                  b.txt --> CAT
                  b.txt --> COT
                  (...)

So, how to check what words were founded in particulary Documents after
searching? I see that Hits class contains only founded documents and
nothing more (I am new in this technology so I can be wrong...)







----------------------------------------------------------------------
Dowiedz sie, co naprawde podnieca kobiety. Wiecej wiesz, latwiej je
oczarujesz 

>>>http://link.interia.pl/f1b17


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29301-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 20 20:11:14 2007
Return-Path: <java-user-return-29301-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9321 invoked from network); 20 Jul 2007 20:11:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jul 2007 20:11:13 -0000
Received: (qmail 15334 invoked by uid 500); 20 Jul 2007 20:11:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15301 invoked by uid 500); 20 Jul 2007 20:11:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15289 invoked by uid 99); 20 Jul 2007 20:11:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jul 2007 13:11:07 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jul 2007 13:11:03 -0700
Received: by nf-out-0910.google.com with SMTP id d3so69001nfc
        for <java-user@lucene.apache.org>; Fri, 20 Jul 2007 13:10:42 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=DkUFQiQ7O0nKOG8rgblll5CHAxh/ffxj1lE2IEnyO4VZNHgZ6d1SLVTvKO0nMch4t7h/P90AGhu5KI0vYWWSsu2zutiD/OkHy1iloZHRTKBOJBgvRxMR9ohmy4C5lEoyMUtpWyHWtqbYJ8x+KOG+kCm/Y9GvjNHOvkHQKaMpNY4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=GYY62mKsUGP+iHRT6jb7QNDz30G18RJlsHfrRs2/h2gVclRX0X3hC4o3AaeiPlGtOe0Chsizbxr9gW+hF3ciYnO1R8jPjo2SDaGDoFxYpZVBLVIXft+c8eUje4+f0OhtvowmlNRMxn5Bsqy9RsIVsVCIFNO8Mfi6u0kugJZp5kA=
Received: by 10.82.181.10 with SMTP id d10mr909508buf.1184962242320;
        Fri, 20 Jul 2007 13:10:42 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Fri, 20 Jul 2007 13:10:42 -0700 (PDT)
Message-ID: <359a92830707201310o1442bedembeb45051a4299eee@mail.gmail.com>
Date: Fri, 20 Jul 2007 16:10:42 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: [RegexQuery] how to check what words were founded in particulary Documents ?
In-Reply-To: <20070720192740.9AC2D3E886E@f38.poczta.interia.pl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_92530_19260912.1184962242290"
References: <20070720192740.9AC2D3E886E@f38.poczta.interia.pl>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_92530_19260912.1184962242290
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

First, the period (.) isn't part of the syntax, so make sure you look
more carefully at the Lucene syntax...

Then, you might be able to use WildcardTermEnum to find
the terms that match and TermDocs to find the documents
that contain those terms.

There's nothing built into Lucene to do this out of the box, you
have to roll your own.

Best
Erick

On 20 Jul 2007 21:27:40 +0200, mhzmark@interia.eu <mhzmark@interia.eu>
wrote:
>
> Hello.
>
> Let assume that I have this code in my application:
>
>    (...)
>    Query query = new RegexQuery(new Term("field", "C.T"));;
>    // searching...
>    (...)
>
> And now, I would like to know if my application founded "cat" or "cot" or
> something else. How can I check what was founded by my application ?
>
> I would like to write application like this:
>    INPUT -> regular expression
>    OUTPUT -> file  ---> word
>
> example: INPUT = "C.T"
>          OUTPUT =
>                   a.txt --> CAT
>                   a.txt --> COT
>                   b.txt --> CAT
>                   b.txt --> CAT
>                   b.txt --> COT
>                   (...)
>
> So, how to check what words were founded in particulary Documents after
> searching? I see that Hits class contains only founded documents and
> nothing more (I am new in this technology so I can be wrong...)
>
>
>
>
>
>
>
> ----------------------------------------------------------------------
> Dowiedz sie, co naprawde podnieca kobiety. Wiecej wiesz, latwiej je
> oczarujesz
>
> >>>http://link.interia.pl/f1b17
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_92530_19260912.1184962242290--

From java-user-return-29302-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 20 20:49:59 2007
Return-Path: <java-user-return-29302-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17356 invoked from network); 20 Jul 2007 20:49:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jul 2007 20:49:57 -0000
Received: (qmail 96503 invoked by uid 500); 20 Jul 2007 20:49:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96469 invoked by uid 500); 20 Jul 2007 20:49:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96451 invoked by uid 99); 20 Jul 2007 20:49:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jul 2007 13:49:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jul 2007 13:49:48 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 722AB30EFC17; Fri, 20 Jul 2007 14:49:27 -0600 (MDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.3] (va-76-6-215-202.dhcp.embarqhsd.net [76.6.215.202])
	by ehatchersolutions.com (Postfix) with ESMTP id 1041D30EFC16
	for <java-user@lucene.apache.org>; Fri, 20 Jul 2007 14:49:23 -0600 (MDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <359a92830707201310o1442bedembeb45051a4299eee@mail.gmail.com>
References: <20070720192740.9AC2D3E886E@f38.poczta.interia.pl> <359a92830707201310o1442bedembeb45051a4299eee@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <3F8F627A-CC84-4EC9-8159-336EF36335CE@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: [RegexQuery] how to check what words were founded in particulary Documents ?
Date: Fri, 20 Jul 2007 16:49:21 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1

Erick - I think you're mixing things up with WildcardQuery.   
RegexQuery does support all regex capabilities (depending on the  
underlying regex matcher used).

A couple of techniques you could use to achieve the goal:

	* Use RegexTermEnum, though that'll give you the terms across the  
entire index, so maybe in your use case you could index a single  
document into a RAMDirectory and RegexTermEnum on it.

	* Try out SpanRegexQuery and use getSpans() to get the exact matches.

Erik



On Jul 20, 2007, at 4:10 PM, Erick Erickson wrote:

> First, the period (.) isn't part of the syntax, so make sure you look
> more carefully at the Lucene syntax...
>
> Then, you might be able to use WildcardTermEnum to find
> the terms that match and TermDocs to find the documents
> that contain those terms.
>
> There's nothing built into Lucene to do this out of the box, you
> have to roll your own.
>
> Best
> Erick
>
> On 20 Jul 2007 21:27:40 +0200, mhzmark@interia.eu <mhzmark@interia.eu>
> wrote:
>>
>> Hello.
>>
>> Let assume that I have this code in my application:
>>
>>    (...)
>>    Query query = new RegexQuery(new Term("field", "C.T"));;
>>    // searching...
>>    (...)
>>
>> And now, I would like to know if my application founded "cat" or  
>> "cot" or
>> something else. How can I check what was founded by my application ?
>>
>> I would like to write application like this:
>>    INPUT -> regular expression
>>    OUTPUT -> file  ---> word
>>
>> example: INPUT = "C.T"
>>          OUTPUT =
>>                   a.txt --> CAT
>>                   a.txt --> COT
>>                   b.txt --> CAT
>>                   b.txt --> CAT
>>                   b.txt --> COT
>>                   (...)
>>
>> So, how to check what words were founded in particulary Documents  
>> after
>> searching? I see that Hits class contains only founded documents and
>> nothing more (I am new in this technology so I can be wrong...)
>>
>>
>>
>>
>>
>>
>>
>> --------------------------------------------------------------------- 
>> -
>> Dowiedz sie, co naprawde podnieca kobiety. Wiecej wiesz, latwiej je
>> oczarujesz
>>
>> >>>http://link.interia.pl/f1b17
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29303-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 20 21:46:06 2007
Return-Path: <java-user-return-29303-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31238 invoked from network); 20 Jul 2007 21:46:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jul 2007 21:46:05 -0000
Received: (qmail 12353 invoked by uid 500); 20 Jul 2007 21:45:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12313 invoked by uid 500); 20 Jul 2007 21:45:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12302 invoked by uid 99); 20 Jul 2007 21:45:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jul 2007 14:45:59 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.134.190 as permitted sender)
Received: from [209.85.134.190] (HELO mu-out-0910.google.com) (209.85.134.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jul 2007 14:45:57 -0700
Received: by mu-out-0910.google.com with SMTP id g7so1155535muf
        for <java-user@lucene.apache.org>; Fri, 20 Jul 2007 14:45:34 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=FkeEAR/WQNBQw1TZlch+f8Lq2RCp/+Vmh2QiqP2IiZPhFNV2wWUcKW9iPh7Vl/ZNAyc0lvb6L/N5kqCPq6c0QPK4HI+wGkMD0It5rbdU2AYSTpczSh+x7IpdrOmuysqb0hMnjQg+uPhDVOkRa5+0xUPuUPs/EyDIcB9dVIATOWc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=R1GNej7vh+8Iwv6jV+C36MRn5hPP/gpN6fUtaJeW9W6BQZ4zjiKwX4Pa3pAoo8m2SkrSFA3RQt4ATx1VENGYQrfdZ1xfcQ+XM1gIJF5x4VZ71tIBxdFe7adOy8WJ8pD2HQ1UGfD/uz3euxDcNGzdwcNYvaRFTkuCXq7frMu9g2A=
Received: by 10.82.151.14 with SMTP id y14mr937088bud.1184967934050;
        Fri, 20 Jul 2007 14:45:34 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Fri, 20 Jul 2007 14:45:33 -0700 (PDT)
Message-ID: <359a92830707201445j6c269186j2b35330814e62b60@mail.gmail.com>
Date: Fri, 20 Jul 2007 17:45:33 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: [RegexQuery] how to check what words were founded in particulary Documents ?
In-Reply-To: <3F8F627A-CC84-4EC9-8159-336EF36335CE@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_93159_24885789.1184967933927"
References: <20070720192740.9AC2D3E886E@f38.poczta.interia.pl>
	 <359a92830707201310o1442bedembeb45051a4299eee@mail.gmail.com>
	 <3F8F627A-CC84-4EC9-8159-336EF36335CE@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_93159_24885789.1184967933927
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Erik:

Well, you wrote the book <G>. But I thought something like this
would work

TermDocs td = reader.termDocs();
WildcardTermEnum we = new WildcardTermEnum(reader, new term("field",
"c*t"));
while (we.next()) {
  td.seek(we);
  while (td.next()) {
     report document contains term;
  }
}

Although I admit I haven't tried it, so I could be totally off base. What
am I missing?

Erick

On 7/20/07, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>
> Erick - I think you're mixing things up with WildcardQuery.
> RegexQuery does support all regex capabilities (depending on the
> underlying regex matcher used).
>
> A couple of techniques you could use to achieve the goal:
>
>         * Use RegexTermEnum, though that'll give you the terms across the
> entire index, so maybe in your use case you could index a single
> document into a RAMDirectory and RegexTermEnum on it.
>
>         * Try out SpanRegexQuery and use getSpans() to get the exact
> matches.
>
> Erik
>
>
>
> On Jul 20, 2007, at 4:10 PM, Erick Erickson wrote:
>
> > First, the period (.) isn't part of the syntax, so make sure you look
> > more carefully at the Lucene syntax...
> >
> > Then, you might be able to use WildcardTermEnum to find
> > the terms that match and TermDocs to find the documents
> > that contain those terms.
> >
> > There's nothing built into Lucene to do this out of the box, you
> > have to roll your own.
> >
> > Best
> > Erick
> >
> > On 20 Jul 2007 21:27:40 +0200, mhzmark@interia.eu <mhzmark@interia.eu>
> > wrote:
> >>
> >> Hello.
> >>
> >> Let assume that I have this code in my application:
> >>
> >>    (...)
> >>    Query query = new RegexQuery(new Term("field", "C.T"));;
> >>    // searching...
> >>    (...)
> >>
> >> And now, I would like to know if my application founded "cat" or
> >> "cot" or
> >> something else. How can I check what was founded by my application ?
> >>
> >> I would like to write application like this:
> >>    INPUT -> regular expression
> >>    OUTPUT -> file  ---> word
> >>
> >> example: INPUT = "C.T"
> >>          OUTPUT =
> >>                   a.txt --> CAT
> >>                   a.txt --> COT
> >>                   b.txt --> CAT
> >>                   b.txt --> CAT
> >>                   b.txt --> COT
> >>                   (...)
> >>
> >> So, how to check what words were founded in particulary Documents
> >> after
> >> searching? I see that Hits class contains only founded documents and
> >> nothing more (I am new in this technology so I can be wrong...)
> >>
> >>
> >>
> >>
> >>
> >>
> >>
> >> ---------------------------------------------------------------------
> >> -
> >> Dowiedz sie, co naprawde podnieca kobiety. Wiecej wiesz, latwiej je
> >> oczarujesz
> >>
> >> >>>http://link.interia.pl/f1b17
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_93159_24885789.1184967933927--

From java-user-return-29304-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 21 01:01:40 2007
Return-Path: <java-user-return-29304-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96185 invoked from network); 21 Jul 2007 01:01:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jul 2007 01:01:39 -0000
Received: (qmail 70920 invoked by uid 500); 21 Jul 2007 01:01:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70728 invoked by uid 500); 21 Jul 2007 01:01:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70717 invoked by uid 99); 21 Jul 2007 01:01:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jul 2007 18:01:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jul 2007 18:01:30 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id C1ABB30EFC17; Fri, 20 Jul 2007 19:01:09 -0600 (MDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.3] (va-76-6-215-202.dhcp.embarqhsd.net [76.6.215.202])
	by ehatchersolutions.com (Postfix) with ESMTP id F3A4130EFC16
	for <java-user@lucene.apache.org>; Fri, 20 Jul 2007 19:00:53 -0600 (MDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <359a92830707201445j6c269186j2b35330814e62b60@mail.gmail.com>
References: <20070720192740.9AC2D3E886E@f38.poczta.interia.pl> <359a92830707201310o1442bedembeb45051a4299eee@mail.gmail.com> <3F8F627A-CC84-4EC9-8159-336EF36335CE@ehatchersolutions.com> <359a92830707201445j6c269186j2b35330814e62b60@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <664C2674-F52E-471E-A7BD-421FA66C013B@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: [RegexQuery] how to check what words were founded in particulary Documents ?
Date: Fri, 20 Jul 2007 21:00:51 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1

Erick - you're not missing anything, except that the original poster  
is after RegexQuery, not WildcardQuery.  Both work basically the same  
way, except in the pattern matching capabilities.

	Erik

On Jul 20, 2007, at 5:45 PM, Erick Erickson wrote:
> Erik:
>
> Well, you wrote the book <G>. But I thought something like this
> would work
>
> TermDocs td = reader.termDocs();
> WildcardTermEnum we = new WildcardTermEnum(reader, new term("field",
> "c*t"));
> while (we.next()) {
>  td.seek(we);
>  while (td.next()) {
>     report document contains term;
>  }
> }
>
> Although I admit I haven't tried it, so I could be totally off  
> base. What
> am I missing?
>
> Erick
>
> On 7/20/07, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>>
>> Erick - I think you're mixing things up with WildcardQuery.
>> RegexQuery does support all regex capabilities (depending on the
>> underlying regex matcher used).
>>
>> A couple of techniques you could use to achieve the goal:
>>
>>         * Use RegexTermEnum, though that'll give you the terms  
>> across the
>> entire index, so maybe in your use case you could index a single
>> document into a RAMDirectory and RegexTermEnum on it.
>>
>>         * Try out SpanRegexQuery and use getSpans() to get the exact
>> matches.
>>
>> Erik
>>
>>
>>
>> On Jul 20, 2007, at 4:10 PM, Erick Erickson wrote:
>>
>> > First, the period (.) isn't part of the syntax, so make sure you  
>> look
>> > more carefully at the Lucene syntax...
>> >
>> > Then, you might be able to use WildcardTermEnum to find
>> > the terms that match and TermDocs to find the documents
>> > that contain those terms.
>> >
>> > There's nothing built into Lucene to do this out of the box, you
>> > have to roll your own.
>> >
>> > Best
>> > Erick
>> >
>> > On 20 Jul 2007 21:27:40 +0200, mhzmark@interia.eu  
>> <mhzmark@interia.eu>
>> > wrote:
>> >>
>> >> Hello.
>> >>
>> >> Let assume that I have this code in my application:
>> >>
>> >>    (...)
>> >>    Query query = new RegexQuery(new Term("field", "C.T"));;
>> >>    // searching...
>> >>    (...)
>> >>
>> >> And now, I would like to know if my application founded "cat" or
>> >> "cot" or
>> >> something else. How can I check what was founded by my  
>> application ?
>> >>
>> >> I would like to write application like this:
>> >>    INPUT -> regular expression
>> >>    OUTPUT -> file  ---> word
>> >>
>> >> example: INPUT = "C.T"
>> >>          OUTPUT =
>> >>                   a.txt --> CAT
>> >>                   a.txt --> COT
>> >>                   b.txt --> CAT
>> >>                   b.txt --> CAT
>> >>                   b.txt --> COT
>> >>                   (...)
>> >>
>> >> So, how to check what words were founded in particulary Documents
>> >> after
>> >> searching? I see that Hits class contains only founded  
>> documents and
>> >> nothing more (I am new in this technology so I can be wrong...)
>> >>
>> >>
>> >>
>> >>
>> >>
>> >>
>> >>
>> >>  
>> ---------------------------------------------------------------------
>> >> -
>> >> Dowiedz sie, co naprawde podnieca kobiety. Wiecej wiesz,  
>> latwiej je
>> >> oczarujesz
>> >>
>> >> >>>http://link.interia.pl/f1b17
>> >>
>> >>
>> >>  
>> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29305-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 21 12:23:26 2007
Return-Path: <java-user-return-29305-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83798 invoked from network); 21 Jul 2007 12:23:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jul 2007 12:23:24 -0000
Received: (qmail 42051 invoked by uid 500); 21 Jul 2007 12:23:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42001 invoked by uid 500); 21 Jul 2007 12:23:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41989 invoked by uid 99); 21 Jul 2007 12:23:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Jul 2007 05:23:18 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Jul 2007 05:23:14 -0700
Received: by ug-out-1314.google.com with SMTP id c2so833970ugf
        for <java-user@lucene.apache.org>; Sat, 21 Jul 2007 05:22:53 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:content-transfer-encoding:message-id:content-type:to:from:subject:date:x-mailer;
        b=KUDTP1WCB3bEossgvr5QLUc33LlumuFnC2sISyygBtKu7X4NNp1XSEp+jf9o1/JW+FEYzmI2aLO7xvU63tV5jQs9okMyhSbdK7/umno2SMVgsLNtP3HUB78wQ7fP9QquotUnwKkdG2+ZYlToOEPKs/EdtSQf9FGz+isE7Tu59m4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:content-transfer-encoding:message-id:content-type:to:from:subject:date:x-mailer;
        b=cGPsZeIhrAkL3T+sgbqbXf4FQfGZIPgvJhLOJeCjbdbwlM1RJGc8+qWszqrNnubPB32SZDcWGz7hauWTlXJ+Y0h6nOLEKwOX0uLFUGIBi9uOytLV0GggvtZtlJrPdHuabZeDSbQLYmByxZsptByHv2a9Pg6oGK58fNFDYPcVgD4=
Received: by 10.86.62.3 with SMTP id k3mr1053995fga.1185020572659;
        Sat, 21 Jul 2007 05:22:52 -0700 (PDT)
Received: from ?192.168.2.101? ( [83.249.110.50])
        by mx.google.com with ESMTPS id j9sm14207377mue.2007.07.21.05.22.50
        (version=TLSv1/SSLv3 cipher=OTHER);
        Sat, 21 Jul 2007 05:22:51 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
Content-Transfer-Encoding: 7bit
Message-Id: <5FCD5FCE-5883-468B-A426-24BDA3332F9F@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: karl wettin <karl.wettin@gmail.com>
Subject: [ANN] Limax 0.2
Date: Sat, 21 Jul 2007 14:18:58 +0200
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Limax is a Java 1.5 @annotation library for object oriented Lucene  
applications,
distributed under the Apache2 Licence.

The API is inspired by the Sleepycat BDB implementation.
It can do pretty much anything Hibernate can, and more.

  * Binds Java classes to the UML 1.4 class model semantics.
  * Mappable in root or static inner interfaces, abstract and  
concrete classes.
  * Lazy loading transactional object persistency using Lucene as  
storage.
  * Tokenization of class attributes.
  * Denormalization of aggregated class associations.

Depends on plain old Lucene, Silvertejp meta models and ASM.

There are no benchmarks available. Hint: <http://images.google.com/ 
images?q=limax>

mvn: <http://www.ginandtonique.org/~kalle/maven2/>
cvs: <http://silvertejp.tigris.org/source/browse/silvertejp/>  
(temporary hosting)
doc: <http://projects.ginandtonique.org/projects/limax> (currently  
outdated)

There are lots of well documented test cases that demonstrate how to  
use the API,
but if you rather ask questions I'll be happy to help you out.

It is still in beta state.


Very simple example:

void test() {
   EntityStore store = new EntityStore(new RAMDirectory());
   Transaction txn = store.newTransaction();
   Company c = new Company("Bluff bros");
   store.getPrimaryEntityIndex(Company.class).put(txn, c);
   Human h = new Human("Johnny");
   h.setEmployer(c);
   store.getPrimaryEntityIndex(Human.class).put(txn, h);

   // queries the transient entities in the transaction
   // and the persistent entities in the store.
   assertEquals(1, txn.getSearcher().search(new TermQuery(new Term 
("name", "Johnny"))).length());

   assertTrue(c.getEmployees().contains(h));
   txn.commit(); // merges transaction index with store index
   txn.close();  // you can also reuse() a transaction to avoid read  
the data.

   txn = store.newTransaction();
   Company d = store.getPrimaryEntityIndex(Company.class).get(txn, 0l);
   assertEquals(c, d);
   txn.close();

}

@Entity
class Company {
   @ObjectIdentity @Attribute
   long oid;

   @Attribute @StandardTokenized
   String name;

   @BinaryAssociationEnd(otherEndName = "employer")
   List<Human> employees = new ArrayList<Human>

   ..getters and setters
}

@Entity
class Human {
   @ObjectIdentity @Attribute
   long oid;

   @Attribute @StandardTokenized
   String name;

   @BinaryAssociationEnd(otherEndName = "employees")
   // adds Company.name in Human instance documents.
   @Denormalization(xpaths = "name")
   Company employer;

   ..getters and setters
}





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29306-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 21 17:39:42 2007
Return-Path: <java-user-return-29306-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33757 invoked from network); 21 Jul 2007 17:39:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jul 2007 17:39:40 -0000
Received: (qmail 24438 invoked by uid 500); 21 Jul 2007 17:39:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24294 invoked by uid 500); 21 Jul 2007 17:39:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24281 invoked by uid 99); 21 Jul 2007 17:39:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Jul 2007 10:39:32 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=NO_REAL_NAME,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mhzmark@interia.eu designates 80.48.65.35 as permitted sender)
Received: from [80.48.65.35] (HELO smtp4.poczta.interia.pl) (80.48.65.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Jul 2007 10:39:30 -0700
Received: by smtp4.poczta.interia.pl (INTERIA.PL, from userid 502)
	id A5CF542B15B; Sat, 21 Jul 2007 19:39:07 +0200 (CEST)
Received: from poczta.interia.pl (f05.poczta.interia.pl [10.217.2.5])
	by smtp4.poczta.interia.pl (INTERIA.PL) with ESMTP id 475A542B159
	for <java-user@lucene.apache.org>; Sat, 21 Jul 2007 19:39:07 +0200 (CEST)
Received: by poczta.interia.pl (Postfix, from userid 502)
	id 06070EB334; Sat, 21 Jul 2007 19:39:07 +0200 (CEST)
Received: from localhost (localhost.interia.pl [127.0.0.1])
	by poczta.interia.pl (Postfix) with ESMTP id C87EAEB2F9
	for <java-user@lucene.apache.org>; Sat, 21 Jul 2007 19:39:06 +0200 (CEST)
Date: 21 Jul 2007 19:39:06 +0200
From: mhzmark@interia.eu
Subject: Re: [RegexQuery] how to check what words were founded in particulary Documents ?
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
MIME-Version: 1.0
Content-Type: TEXT/plain; CHARSET=ISO-8859-2
Content-Transfer-Encoding: QUOTED-PRINTABLE
X-ORIGINATE-IP: 83.4.133.105
X-Mailer: PSE
Message-Id: <20070721173906.C87EAEB2F9@poczta.interia.pl>
X-EMID: ae940acc
X-Virus-Checked: Checked by ClamAV on apache.org

To begin with, thanks for Yours quick response.

I am still trying write this code and I've already written this one:

import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.store.*;
import org.apache.lucene.index.*;
import org.apache.lucene.document.*;
import org.apache.lucene.search.*;
import org.apache.lucene.search.regex.*;

public class TmpMain {
=09public static void main(String[] args) throws Exception {=09
=09=09RAMDirectory directory =3D new RAMDirectory();=20
=09=09IndexWriter writer =3D new IndexWriter(directory, new StandardAnalyze=
r(),=20
                                                      true);=20
=09=09Document doc =3D new Document();=20
=09=09doc.add(new Field("field", "Cat Cot Cit Cet", Field.Store.YES,=20
                                    Field.Index.TOKENIZED));=20
=09=09writer.addDocument(doc);=20
=09=09writer.optimize();
=09=09writer.close();=20
=09=09IndexReader reader=3DIndexReader.open(directory);
=09=09RegexTermEnum regexTermEnum=3Dnew RegexTermEnum(reader, new Term("fie=
ld",=20
=09=09=09=09"C.t"), new JavaUtilRegexCapabilities());
=09/*
=09//Second Version:
=09=09WildcardTermEnum regexTermEnum=3Dnew WildcardTermEnum(reader, new=20
                                          Term("field", "C?t"));
=09*/
=09=09while(regexTermEnum.next()) {
=09=09=09System.out.println("Next:");
=09=09=09System.out.println(regexTermEnum.term().text());
=09=09}
=09=09System.out.println("End.");=09=09
=09}
}


But the output of this code is:
End.

As you can see above I have tried change line:
=09RegexTermEnum regexTermEnum=3Dnew RegexTermEnum(reader, new Term("field"=
,=20
=09=09"C.t"), new JavaUtilRegexCapabilities());
on
=09WildcardTermEnum regexTermEnum=3Dnew WildcardTermEnum(reader, new Term("=
field",=20
=09=09"C?t"));

but the result is the same :/
What am I doing wrong ?




> Erick - you're not missing anything, except that the original poster =20
> is after RegexQuery, not WildcardQuery.  Both work basically the same =20
> way, except in the pattern matching capabilities.
>=20
> =09Erik
>=20
> On Jul 20, 2007, at 5:45 PM, Erick Erickson wrote:
> > Erik:
> >
> > Well, you wrote the book <G>. But I thought something like this
> > would work
> >
> > TermDocs td =3D reader.termDocs();
> > WildcardTermEnum we =3D new WildcardTermEnum(reader, new term("field",
> > "c*t"));
> > while (we.next()) {
> >  td.seek(we);
> >  while (td.next()) {
> >     report document contains term;
> >  }
> > }
> >
> > Although I admit I haven't tried it, so I could be totally off =20
> > base. What
> > am I missing?
> >
> > Erick
> >
> > On 7/20/07, Erik Hatcher <erik@ehatchersolutions.com> wrote:
> >>
> >> Erick - I think you're mixing things up with WildcardQuery.
> >> RegexQuery does support all regex capabilities (depending on the
> >> underlying regex matcher used).
> >>
> >> A couple of techniques you could use to achieve the goal:
> >>
> >>         * Use RegexTermEnum, though that'll give you the terms =20
> >> across the
> >> entire index, so maybe in your use case you could index a single
> >> document into a RAMDirectory and RegexTermEnum on it.
> >>
> >>         * Try out SpanRegexQuery and use getSpans() to get the exact
> >> matches.
> >>
> >> Erik
> >>
> >>
> >>
> >> On Jul 20, 2007, at 4:10 PM, Erick Erickson wrote:
> >>
> >> > First, the period (.) isn't part of the syntax, so make sure you =20
> >> look
> >> > more carefully at the Lucene syntax...
> >> >
> >> > Then, you might be able to use WildcardTermEnum to find
> >> > the terms that match and TermDocs to find the documents
> >> > that contain those terms.
> >> >
> >> > There's nothing built into Lucene to do this out of the box, you
> >> > have to roll your own.
> >> >
> >> > Best
> >> > Erick
> >> >
> >> > On 20 Jul 2007 21:27:40 +0200, mhzmark@interia.eu =20
> >> <mhzmark@interia.eu>
> >> > wrote:
> >> >>
> >> >> Hello.
> >> >>
> >> >> Let assume that I have this code in my application:
> >> >>
> >> >>    (...)
> >> >>    Query query =3D new RegexQuery(new Term("field", "C.T"));;
> >> >>    // searching...
> >> >>    (...)
> >> >>
> >> >> And now, I would like to know if my application founded "cat" or
> >> >> "cot" or
> >> >> something else. How can I check what was founded by my =20
> >> application ?
> >> >>
> >> >> I would like to write application like this:
> >> >>    INPUT -> regular expression
> >> >>    OUTPUT -> file  ---> word
> >> >>
> >> >> example: INPUT =3D "C.T"
> >> >>          OUTPUT =3D
> >> >>                   a.txt --> CAT
> >> >>                   a.txt --> COT
> >> >>                   b.txt --> CAT
> >> >>                   b.txt --> CAT
> >> >>                   b.txt --> COT
> >> >>                   (...)
> >> >>
> >> >> So, how to check what words were founded in particulary Documents
> >> >> after
> >> >> searching? I see that Hits class contains only founded =20
> >> documents and
> >> >> nothing more (I am new in this technology so I can be wrong...)
> >> >>
> >> >>
> >> >>
> >> >>
> >> >>
> >> >>
> >> >>
> >> >> =20
> >> ---------------------------------------------------------------------
> >> >> -
> >> >> Dowiedz sie, co naprawde podnieca kobiety. Wiecej wiesz, =20
> >> latwiej je
> >> >> oczarujesz
> >> >>
> >> >> >>>http://link.interia.pl/f1b17
> >> >>
> >> >>
> >> >> =20
> >> ---------------------------------------------------------------------
> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >>
> >> >>
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20


----------------------------------------------------------------------
Najbogatsza Polka 
Zobacz >>> http://link.interia.pl/f1ae2


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29307-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 21 18:01:49 2007
Return-Path: <java-user-return-29307-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39619 invoked from network); 21 Jul 2007 18:01:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jul 2007 18:01:47 -0000
Received: (qmail 48246 invoked by uid 500); 21 Jul 2007 18:01:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48205 invoked by uid 500); 21 Jul 2007 18:01:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48190 invoked by uid 99); 21 Jul 2007 18:01:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Jul 2007 11:01:42 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 64.233.166.182 as permitted sender)
Received: from [64.233.166.182] (HELO py-out-1112.google.com) (64.233.166.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Jul 2007 11:01:39 -0700
Received: by py-out-1112.google.com with SMTP id f31so4018371pyh
        for <java-user@lucene.apache.org>; Sat, 21 Jul 2007 11:01:18 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=DnFppiO4GYk4K/r190FjAJX6+r2BHTwGkXDdSVSnUfBuUjBBEHMgbxQgaG8phZXpdHRLoXzV3Kgw+wMCDgH+fXJBUN9bhNlCGUp0lpXA8BR3XUecK86rmqPj+LmpCwbDXy7s4FaLsbLhJUnaaOQ0jqmC6egjI7JpFkywmh+vJO8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=WqEGiXx2EcYzG0+hx7o86FnLs2mVI1YppYgDIB+M6vR+ZeNqYmTQ4VRdJAk1M/ICw9S/KSom2crtb5XZHVSX6LB6Z3wEOgro9OHAPaBpkDrPCqoKb60iWEhf7DK9oWTfQ9IoIsI5h2IOuHsofBIZUjaL4yLYc3YhA4DFnzXgb9U=
Received: by 10.65.214.2 with SMTP id r2mr2480739qbq.1185040878139;
        Sat, 21 Jul 2007 11:01:18 -0700 (PDT)
Received: from ?192.168.1.105? ( [67.86.221.9])
        by mx.google.com with ESMTPS id f16sm2262219qba.2007.07.21.11.01.17
        (version=SSLv3 cipher=RC4-MD5);
        Sat, 21 Jul 2007 11:01:17 -0700 (PDT)
Message-ID: <46A249BB.3020208@gmail.com>
Date: Sat, 21 Jul 2007 14:00:27 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.5 (Windows/20070716)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: [RegexQuery] how to check what words were founded in particulary
 Documents ?
References: <20070721173906.C87EAEB2F9@poczta.interia.pl>
In-Reply-To: <20070721173906.C87EAEB2F9@poczta.interia.pl>
Content-Type: text/plain; charset=ISO-8859-2; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

StandardAnalyzer lowercases terms. The term you pass to the term enum 
has an upper case character. You really need to be careful if you are 
going to use an analyzer to store and then a term enum to cycle 
through...the term you pass the term enum must match the output of the 
analyzer.

- Mark

mhzmark@interia.eu wrote:
> To begin with, thanks for Yours quick response.
>
> I am still trying write this code and I've already written this one:
>
> import org.apache.lucene.analysis.standard.StandardAnalyzer;
> import org.apache.lucene.store.*;
> import org.apache.lucene.index.*;
> import org.apache.lucene.document.*;
> import org.apache.lucene.search.*;
> import org.apache.lucene.search.regex.*;
>
> public class TmpMain {
> 	public static void main(String[] args) throws Exception {	
> 		RAMDirectory directory = new RAMDirectory(); 
> 		IndexWriter writer = new IndexWriter(directory, new StandardAnalyzer(), 
>                                                       true); 
> 		Document doc = new Document(); 
> 		doc.add(new Field("field", "Cat Cot Cit Cet", Field.Store.YES, 
>                                     Field.Index.TOKENIZED)); 
> 		writer.addDocument(doc); 
> 		writer.optimize();
> 		writer.close(); 
> 		IndexReader reader=IndexReader.open(directory);
> 		RegexTermEnum regexTermEnum=new RegexTermEnum(reader, new Term("field", 
> 				"C.t"), new JavaUtilRegexCapabilities());
> 	/*
> 	//Second Version:
> 		WildcardTermEnum regexTermEnum=new WildcardTermEnum(reader, new 
>                                           Term("field", "C?t"));
> 	*/
> 		while(regexTermEnum.next()) {
> 			System.out.println("Next:");
> 			System.out.println(regexTermEnum.term().text());
> 		}
> 		System.out.println("End.");		
> 	}
> }
>
>
> But the output of this code is:
> End.
>
> As you can see above I have tried change line:
> 	RegexTermEnum regexTermEnum=new RegexTermEnum(reader, new Term("field", 
> 		"C.t"), new JavaUtilRegexCapabilities());
> on
> 	WildcardTermEnum regexTermEnum=new WildcardTermEnum(reader, new Term("field", 
> 		"C?t"));
>
> but the result is the same :/
> What am I doing wrong ?
>
>
>
>
>   
>> Erick - you're not missing anything, except that the original poster  
>> is after RegexQuery, not WildcardQuery.  Both work basically the same  
>> way, except in the pattern matching capabilities.
>>
>> 	Erik
>>
>> On Jul 20, 2007, at 5:45 PM, Erick Erickson wrote:
>>     
>>> Erik:
>>>
>>> Well, you wrote the book <G>. But I thought something like this
>>> would work
>>>
>>> TermDocs td = reader.termDocs();
>>> WildcardTermEnum we = new WildcardTermEnum(reader, new term("field",
>>> "c*t"));
>>> while (we.next()) {
>>>  td.seek(we);
>>>  while (td.next()) {
>>>     report document contains term;
>>>  }
>>> }
>>>
>>> Although I admit I haven't tried it, so I could be totally off  
>>> base. What
>>> am I missing?
>>>
>>> Erick
>>>
>>> On 7/20/07, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>>>       
>>>> Erick - I think you're mixing things up with WildcardQuery.
>>>> RegexQuery does support all regex capabilities (depending on the
>>>> underlying regex matcher used).
>>>>
>>>> A couple of techniques you could use to achieve the goal:
>>>>
>>>>         * Use RegexTermEnum, though that'll give you the terms  
>>>> across the
>>>> entire index, so maybe in your use case you could index a single
>>>> document into a RAMDirectory and RegexTermEnum on it.
>>>>
>>>>         * Try out SpanRegexQuery and use getSpans() to get the exact
>>>> matches.
>>>>
>>>> Erik
>>>>
>>>>
>>>>
>>>> On Jul 20, 2007, at 4:10 PM, Erick Erickson wrote:
>>>>
>>>>         
>>>>> First, the period (.) isn't part of the syntax, so make sure you  
>>>>>           
>>>> look
>>>>         
>>>>> more carefully at the Lucene syntax...
>>>>>
>>>>> Then, you might be able to use WildcardTermEnum to find
>>>>> the terms that match and TermDocs to find the documents
>>>>> that contain those terms.
>>>>>
>>>>> There's nothing built into Lucene to do this out of the box, you
>>>>> have to roll your own.
>>>>>
>>>>> Best
>>>>> Erick
>>>>>
>>>>> On 20 Jul 2007 21:27:40 +0200, mhzmark@interia.eu  
>>>>>           
>>>> <mhzmark@interia.eu>
>>>>         
>>>>> wrote:
>>>>>           
>>>>>> Hello.
>>>>>>
>>>>>> Let assume that I have this code in my application:
>>>>>>
>>>>>>    (...)
>>>>>>    Query query = new RegexQuery(new Term("field", "C.T"));;
>>>>>>    // searching...
>>>>>>    (...)
>>>>>>
>>>>>> And now, I would like to know if my application founded "cat" or
>>>>>> "cot" or
>>>>>> something else. How can I check what was founded by my  
>>>>>>             
>>>> application ?
>>>>         
>>>>>> I would like to write application like this:
>>>>>>    INPUT -> regular expression
>>>>>>    OUTPUT -> file  ---> word
>>>>>>
>>>>>> example: INPUT = "C.T"
>>>>>>          OUTPUT =
>>>>>>                   a.txt --> CAT
>>>>>>                   a.txt --> COT
>>>>>>                   b.txt --> CAT
>>>>>>                   b.txt --> CAT
>>>>>>                   b.txt --> COT
>>>>>>                   (...)
>>>>>>
>>>>>> So, how to check what words were founded in particulary Documents
>>>>>> after
>>>>>> searching? I see that Hits class contains only founded  
>>>>>>             
>>>> documents and
>>>>         
>>>>>> nothing more (I am new in this technology so I can be wrong...)
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>  
>>>>>>             
>>>> ---------------------------------------------------------------------
>>>>         
>>>>>> -
>>>>>> Dowiedz sie, co naprawde podnieca kobiety. Wiecej wiesz,  
>>>>>>             
>>>> latwiej je
>>>>         
>>>>>> oczarujesz
>>>>>>
>>>>>>             
>>>>>>>>> http://link.interia.pl/f1b17
>>>>>>>>>                   
>>>>>>  
>>>>>>             
>>>> ---------------------------------------------------------------------
>>>>         
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>>             
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>         
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>     
>
>
> ----------------------------------------------------------------------
> Najbogatsza Polka 
> Zobacz >>> http://link.interia.pl/f1ae2
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29308-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 21 18:17:07 2007
Return-Path: <java-user-return-29308-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41627 invoked from network); 21 Jul 2007 18:17:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jul 2007 18:17:05 -0000
Received: (qmail 60468 invoked by uid 500); 21 Jul 2007 18:17:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60428 invoked by uid 500); 21 Jul 2007 18:17:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60417 invoked by uid 99); 21 Jul 2007 18:17:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Jul 2007 11:17:00 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=NO_REAL_NAME,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mhzmark@interia.eu designates 80.48.65.35 as permitted sender)
Received: from [80.48.65.35] (HELO smtp4.poczta.interia.pl) (80.48.65.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Jul 2007 11:16:58 -0700
Received: by smtp4.poczta.interia.pl (INTERIA.PL, from userid 502)
	id 2169B3F81AE; Sat, 21 Jul 2007 20:16:36 +0200 (CEST)
Received: from poczta.interia.pl (f05.poczta.interia.pl [10.217.2.5])
	by smtp4.poczta.interia.pl (INTERIA.PL) with ESMTP id B518C3F8165
	for <java-user@lucene.apache.org>; Sat, 21 Jul 2007 20:16:35 +0200 (CEST)
Received: by poczta.interia.pl (Postfix, from userid 502)
	id 89A75EB337; Sat, 21 Jul 2007 20:16:35 +0200 (CEST)
Received: from localhost (localhost.interia.pl [127.0.0.1])
	by poczta.interia.pl (Postfix) with ESMTP id 6A080EB335
	for <java-user@lucene.apache.org>; Sat, 21 Jul 2007 20:16:35 +0200 (CEST)
Date: 21 Jul 2007 20:16:35 +0200
From: mhzmark@interia.eu
Subject: Re: [RegexQuery] how to check what words were founded in particulary Documents ?
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
MIME-Version: 1.0
Content-Type: TEXT/plain; CHARSET=ISO-8859-2
Content-Transfer-Encoding: QUOTED-PRINTABLE
X-ORIGINATE-IP: 83.4.133.105
X-Mailer: PSE
Message-Id: <20070721181635.6A080EB335@poczta.interia.pl>
X-EMID: 64b40acc
X-Virus-Checked: Checked by ClamAV on apache.org

You are right. After I changed "Cat Cot Cit Cet" to "cat cot cit cet", it w=
orks very good :)I see that there is quite a lot of knowledge to acquire in=
 order to be familiar with this technology... Thank You !

> StandardAnalyzer lowercases terms. The term you pass to the term enum=20
> has an upper case character. You really need to be careful if you are=20
> going to use an analyzer to store and then a term enum to cycle=20
> through...the term you pass the term enum must match the output of the=20
> analyzer.
>=20
> - Mark
>=20
> mhzmark@interia.eu wrote:
> > To begin with, thanks for Yours quick response.
> >
> > I am still trying write this code and I've already written this one:
> >
> > import org.apache.lucene.analysis.standard.StandardAnalyzer;
> > import org.apache.lucene.store.*;
> > import org.apache.lucene.index.*;
> > import org.apache.lucene.document.*;
> > import org.apache.lucene.search.*;
> > import org.apache.lucene.search.regex.*;
> >
> > public class TmpMain {
> > =09public static void main(String[] args) throws Exception {=09
> > =09=09RAMDirectory directory =3D new RAMDirectory();=20
> > =09=09IndexWriter writer =3D new IndexWriter(directory, new
> StandardAnalyzer(),=20
> >                                                       true);=20
> > =09=09Document doc =3D new Document();=20
> > =09=09doc.add(new Field("field", "Cat Cot Cit Cet", Field.Store.YES,=20
> >                                     Field.Index.TOKENIZED));=20
> > =09=09writer.addDocument(doc);=20
> > =09=09writer.optimize();
> > =09=09writer.close();=20
> > =09=09IndexReader reader=3DIndexReader.open(directory);
> > =09=09RegexTermEnum regexTermEnum=3Dnew RegexTermEnum(reader, new
> Term("field",=20
> > =09=09=09=09"C.t"), new JavaUtilRegexCapabilities());
> > =09/*
> > =09//Second Version:
> > =09=09WildcardTermEnum regexTermEnum=3Dnew WildcardTermEnum(reader, new=
=20
> >                                           Term("field", "C?t"));
> > =09*/
> > =09=09while(regexTermEnum.next()) {
> > =09=09=09System.out.println("Next:");
> > =09=09=09System.out.println(regexTermEnum.term().text());
> > =09=09}
> > =09=09System.out.println("End.");=09=09
> > =09}
> > }
> >
> >
> > But the output of this code is:
> > End.
> >
> > As you can see above I have tried change line:
> > =09RegexTermEnum regexTermEnum=3Dnew RegexTermEnum(reader, new Term("fi=
eld",
>=20
> > =09=09"C.t"), new JavaUtilRegexCapabilities());
> > on
> > =09WildcardTermEnum regexTermEnum=3Dnew WildcardTermEnum(reader, new
> Term("field",=20
> > =09=09"C?t"));
> >
> > but the result is the same :/
> > What am I doing wrong ?
> >
> >
> >
> >
> >  =20
> >> Erick - you're not missing anything, except that the original poster =
=20
> >> is after RegexQuery, not WildcardQuery.  Both work basically the same=
=20
>=20
> >> way, except in the pattern matching capabilities.
> >>
> >> =09Erik
> >>
> >> On Jul 20, 2007, at 5:45 PM, Erick Erickson wrote:
> >>    =20
> >>> Erik:
> >>>
> >>> Well, you wrote the book <G>. But I thought something like this
> >>> would work
> >>>
> >>> TermDocs td =3D reader.termDocs();
> >>> WildcardTermEnum we =3D new WildcardTermEnum(reader, new term("field"=
,
> >>> "c*t"));
> >>> while (we.next()) {
> >>>  td.seek(we);
> >>>  while (td.next()) {
> >>>     report document contains term;
> >>>  }
> >>> }
> >>>
> >>> Although I admit I haven't tried it, so I could be totally off =20
> >>> base. What
> >>> am I missing?
> >>>
> >>> Erick
> >>>
> >>> On 7/20/07, Erik Hatcher <erik@ehatchersolutions.com> wrote:
> >>>      =20
> >>>> Erick - I think you're mixing things up with WildcardQuery.
> >>>> RegexQuery does support all regex capabilities (depending on the
> >>>> underlying regex matcher used).
> >>>>
> >>>> A couple of techniques you could use to achieve the goal:
> >>>>
> >>>>         * Use RegexTermEnum, though that'll give you the terms =20
> >>>> across the
> >>>> entire index, so maybe in your use case you could index a single
> >>>> document into a RAMDirectory and RegexTermEnum on it.
> >>>>
> >>>>         * Try out SpanRegexQuery and use getSpans() to get the exact
> >>>> matches.
> >>>>
> >>>> Erik
> >>>>
> >>>>
> >>>>
> >>>> On Jul 20, 2007, at 4:10 PM, Erick Erickson wrote:
> >>>>
> >>>>        =20
> >>>>> First, the period (.) isn't part of the syntax, so make sure you =
=20
> >>>>>          =20
> >>>> look
> >>>>        =20
> >>>>> more carefully at the Lucene syntax...
> >>>>>
> >>>>> Then, you might be able to use WildcardTermEnum to find
> >>>>> the terms that match and TermDocs to find the documents
> >>>>> that contain those terms.
> >>>>>
> >>>>> There's nothing built into Lucene to do this out of the box, you
> >>>>> have to roll your own.
> >>>>>
> >>>>> Best
> >>>>> Erick
> >>>>>
> >>>>> On 20 Jul 2007 21:27:40 +0200, mhzmark@interia.eu =20
> >>>>>          =20
> >>>> <mhzmark@interia.eu>
> >>>>        =20
> >>>>> wrote:
> >>>>>          =20
> >>>>>> Hello.
> >>>>>>
> >>>>>> Let assume that I have this code in my application:
> >>>>>>
> >>>>>>    (...)
> >>>>>>    Query query =3D new RegexQuery(new Term("field", "C.T"));;
> >>>>>>    // searching...
> >>>>>>    (...)
> >>>>>>
> >>>>>> And now, I would like to know if my application founded "cat" or
> >>>>>> "cot" or
> >>>>>> something else. How can I check what was founded by my =20
> >>>>>>            =20
> >>>> application ?
> >>>>        =20
> >>>>>> I would like to write application like this:
> >>>>>>    INPUT -> regular expression
> >>>>>>    OUTPUT -> file  ---> word
> >>>>>>
> >>>>>> example: INPUT =3D "C.T"
> >>>>>>          OUTPUT =3D
> >>>>>>                   a.txt --> CAT
> >>>>>>                   a.txt --> COT
> >>>>>>                   b.txt --> CAT
> >>>>>>                   b.txt --> CAT
> >>>>>>                   b.txt --> COT
> >>>>>>                   (...)
> >>>>>>
> >>>>>> So, how to check what words were founded in particulary Documents
> >>>>>> after
> >>>>>> searching? I see that Hits class contains only founded =20
> >>>>>>            =20
> >>>> documents and
> >>>>        =20
> >>>>>> nothing more (I am new in this technology so I can be wrong...)
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>> =20
> >>>>>>            =20
> >>>>
> ---------------------------------------------------------------------
> >>>>        =20
> >>>>>> -
> >>>>>> Dowiedz sie, co naprawde podnieca kobiety. Wiecej wiesz, =20
> >>>>>>            =20
> >>>> latwiej je
> >>>>        =20
> >>>>>> oczarujesz
> >>>>>>
> >>>>>>            =20
> >>>>>>>>> http://link.interia.pl/f1b17
> >>>>>>>>>                  =20
> >>>>>> =20
> >>>>>>            =20
> >>>>
> ---------------------------------------------------------------------
> >>>>        =20
> >>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>>>
> >>>>>>
> >>>>>>            =20
> >>>>
> ---------------------------------------------------------------------
> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>
> >>>>
> >>>>        =20
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >>
> >>    =20
> >
> >
> > ----------------------------------------------------------------------
> > Najbogatsza Polka=20
> > Zobacz >>> http://link.interia.pl/f1ae2
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >  =20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20


----------------------------------------------------------------------
Wszystko czego potrzebujesz latem: kremy do opalania, 
stroje kapielowe, maly romans 

>>>http://link.interia.pl/f1b15


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29309-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 22 02:20:16 2007
Return-Path: <java-user-return-29309-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37100 invoked from network); 22 Jul 2007 02:20:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jul 2007 02:20:15 -0000
Received: (qmail 31542 invoked by uid 500); 22 Jul 2007 02:20:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30553 invoked by uid 500); 22 Jul 2007 02:20:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30542 invoked by uid 99); 22 Jul 2007 02:20:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Jul 2007 19:20:09 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=MSGID_FROM_MTA_HEADER,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of dmitrytkach1@hotmail.com designates 65.54.246.98 as permitted sender)
Received: from [65.54.246.98] (HELO bay0-omc1-s26.bay0.hotmail.com) (65.54.246.98)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Jul 2007 19:20:06 -0700
Received: from hotmail.com ([65.54.169.88]) by bay0-omc1-s26.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.2668);
	 Sat, 21 Jul 2007 19:19:46 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Sat, 21 Jul 2007 19:19:46 -0700
Message-ID: <BAY114-DAV16328346EE9656DF80571294F60@phx.gbl>
Received: from 24.12.157.130 by BAY114-DAV16.phx.gbl with DAV;
	Sun, 22 Jul 2007 02:19:40 +0000
X-Originating-IP: [24.12.157.130]
X-Originating-Email: [dmitrytkach1@hotmail.com]
X-Sender: dmitrytkach1@hotmail.com
From: "Dmitry" <dmitrytkach1@hotmail.com>
To: <java-user@lucene.apache.org>
References: <20070720192740.9AC2D3E886E@f38.poczta.interia.pl> <359a92830707201310o1442bedembeb45051a4299eee@mail.gmail.com> <3F8F627A-CC84-4EC9-8159-336EF36335CE@ehatchersolutions.com> <359a92830707201445j6c269186j2b35330814e62b60@mail.gmail.com>
Subject: Lucene indexing for PDM system like Windchill
Date: Sat, 21 Jul 2007 21:19:47 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-OriginalArrivalTime: 22 Jul 2007 02:19:46.0019 (UTC) FILETIME=[C5967330:01C7CC06]
X-Virus-Checked: Checked by ClamAV on apache.org

Folks,
Trying to integrate PDM system  : WTPart obejct with Lucene indexing search 
framework.
Part of the work is integration with persistent layer <hibernate>+ indeces 
storage+ mysql
Could not find a good solution ...
please advice

thanks, DT
www.ejinz.com
search engine 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29310-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 22 04:28:18 2007
Return-Path: <java-user-return-29310-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52325 invoked from network); 22 Jul 2007 04:28:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jul 2007 04:28:17 -0000
Received: (qmail 54220 invoked by uid 500); 22 Jul 2007 04:28:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54181 invoked by uid 500); 22 Jul 2007 04:28:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54166 invoked by uid 99); 22 Jul 2007 04:28:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Jul 2007 21:28:10 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 209.85.134.184 as permitted sender)
Received: from [209.85.134.184] (HELO mu-out-0910.google.com) (209.85.134.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Jul 2007 21:28:07 -0700
Received: by mu-out-0910.google.com with SMTP id g7so1557101muf
        for <java-user@lucene.apache.org>; Sat, 21 Jul 2007 21:27:46 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:in-reply-to:references:mime-version:x-priority:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=bfBMeurTDVLs/iuDvhR/hGWCbZVkL1AD3eFJiK1Q830yg7V75Nl5ZhUS5x0MhMXoEYFuWLhpXfbk4RhuvMKAtC9n1i9bQZBnevm27CPwZAQM+eYcATdnfvJe7gJxEdan8fkmEYqYtj7VvFfnSwwUeMO5nW+E2xwbUuW0iMSfhJ4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:in-reply-to:references:mime-version:x-priority:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=V4w4tYIKnXB5hqZpx23pKJ2+cn6sCrvxSsmxXhEEYvM79WEfUAGFFlHXt4VAybKI80R++Az3EFmZqpBLQDNvYNbBzbZiGh1f2Br/cEtZd6gNlhouuqmzZFtRjhYADlwuKKz1riEqyQm7+xY5llj0yLdMXEPqiQNsFRJaa4TuAvk=
Received: by 10.86.51.2 with SMTP id y2mr1493063fgy.1185078466104;
        Sat, 21 Jul 2007 21:27:46 -0700 (PDT)
Received: from ?192.168.2.101? ( [83.249.110.50])
        by mx.google.com with ESMTPS id p38sm10687754fke.2007.07.21.21.27.43
        (version=TLSv1/SSLv3 cipher=OTHER);
        Sat, 21 Jul 2007 21:27:44 -0700 (PDT)
In-Reply-To: <BAY114-DAV16328346EE9656DF80571294F60@phx.gbl>
References: <20070720192740.9AC2D3E886E@f38.poczta.interia.pl> <359a92830707201310o1442bedembeb45051a4299eee@mail.gmail.com> <3F8F627A-CC84-4EC9-8159-336EF36335CE@ehatchersolutions.com> <359a92830707201445j6c269186j2b35330814e62b60@mail.gmail.com> <BAY114-DAV16328346EE9656DF80571294F60@phx.gbl>
Mime-Version: 1.0 (Apple Message framework v752.3)
X-Priority: 3
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <3E1D2418-76C8-4E54-9C7C-664998320FB7@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Lucene indexing for PDM system like Windchill
Date: Sun, 22 Jul 2007 06:23:50 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


22 jul 2007 kl. 04.19 skrev Dmitry:

> Trying to integrate PDM system  : WTPart obejct with Lucene  
> indexing search framework.
> Part of the work is integration with persistent layer <hibernate>+  
> indeces storage+ mysql

You have a product data management software of some sort that use  
MySQL via Hibernate for persistency, and now you want to use Lucene  
to search the data?

> Could not find a good solution ...

What possible solutions did you find, and what was the problem with  
these?

> please advice

My guess is that very few people in this forum knows how Windchill  
works, what a WTPart is or what the complexity of the system is in a  
persistent state. So you probably need to explain your requirements a  
bit more in order to get a helpful answer or discussion going.


-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29311-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 22 09:17:08 2007
Return-Path: <java-user-return-29311-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99940 invoked from network); 22 Jul 2007 09:17:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jul 2007 09:17:07 -0000
Received: (qmail 20085 invoked by uid 500); 22 Jul 2007 09:17:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20041 invoked by uid 500); 22 Jul 2007 09:17:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20029 invoked by uid 99); 22 Jul 2007 09:17:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Jul 2007 02:17:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [212.27.42.28] (HELO smtp2-g19.free.fr) (212.27.42.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Jul 2007 02:17:00 -0700
Received: from [192.168.1.102] (dau94-4-82-227-122-98.fbx.proxad.net [82.227.122.98])
	by smtp2-g19.free.fr (Postfix) with ESMTP id D82A6973D6
	for <java-user@lucene.apache.org>; Sun, 22 Jul 2007 11:16:37 +0200 (CEST)
In-Reply-To: <BAY114-DAV16328346EE9656DF80571294F60@phx.gbl>
References: <20070720192740.9AC2D3E886E@f38.poczta.interia.pl> <359a92830707201310o1442bedembeb45051a4299eee@mail.gmail.com> <3F8F627A-CC84-4EC9-8159-336EF36335CE@ehatchersolutions.com> <359a92830707201445j6c269186j2b35330814e62b60@mail.gmail.com> <BAY114-DAV16328346EE9656DF80571294F60@phx.gbl>
Mime-Version: 1.0 (Apple Message framework v752.2)
X-Priority: 3
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <C1730AB9-8CE1-4EA4-9D3B-9204E44864A1@garambrogne.net>
Content-Transfer-Encoding: quoted-printable
X-Image-Url: http://homepage.mac.com/rdupond/.cv/thumbs/me.thumbnail
From: Mathieu Lecarme <mathieu@garambrogne.net>
Subject: Re: Lucene indexing for PDM system like Windchill
Date: Sun, 22 Jul 2007 11:16:36 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

If you wont to index Hibernate persisted data, just use Compass.

M.
Le 22 juil. 07 =E0 04:19, Dmitry a =E9crit :

> Folks,
> Trying to integrate PDM system  : WTPart obejct with Lucene =20
> indexing search framework.
> Part of the work is integration with persistent layer <hibernate>+ =20
> indeces storage+ mysql
> Could not find a good solution ...
> please advice
>
> thanks, DT
> www.ejinz.com
> search engine
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29312-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 22 10:55:05 2007
Return-Path: <java-user-return-29312-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20277 invoked from network); 22 Jul 2007 10:55:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jul 2007 10:55:05 -0000
Received: (qmail 99734 invoked by uid 500); 22 Jul 2007 10:55:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99708 invoked by uid 500); 22 Jul 2007 10:54:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99697 invoked by uid 99); 22 Jul 2007 10:54:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Jul 2007 03:54:59 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mnrz57@gmail.com designates 209.85.132.246 as permitted sender)
Received: from [209.85.132.246] (HELO an-out-0708.google.com) (209.85.132.246)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Jul 2007 03:54:55 -0700
Received: by an-out-0708.google.com with SMTP id c5so362833anc
        for <java-user@lucene.apache.org>; Sun, 22 Jul 2007 03:54:34 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=GecVFpP5YisMISWv7sISW66zoh3gsBZXG8dW++C6eMpMrXNOq1/bmE+zELtQSHBNca8jTsbu6SXOrFxxcYKXr85d7pG4lVAqJhB9gJaMVsm0gWLxH+aBWiciFuZfCjsrBKaXOY1RicE/Mci7osP6AC2YpFA9CoAfn/E4FFO1Zng=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=HVWG38fYshR4B8VhmcKzCQFBvXPmqAMXzAfJhUXnIcY9Os9vSB4l9luhJdbvcmiWAN9RzwzTM2JcHkKKDOLRCVIfhUdyabq7mrJ6z6F2TEiPCUVWxTVYfAcb10Bcka8oKhnxCVSxOFhIBwBdawIQ41LvK3h1wnOkacJE0zW/Ifw=
Received: by 10.100.141.13 with SMTP id o13mr1116177and.1185101674623;
        Sun, 22 Jul 2007 03:54:34 -0700 (PDT)
Received: by 10.100.9.13 with HTTP; Sun, 22 Jul 2007 03:54:34 -0700 (PDT)
Message-ID: <34b8543c0707220354h34b1febcocd36a5d99b4a8ff3@mail.gmail.com>
Date: Sun, 22 Jul 2007 15:24:34 +0430
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: search through all fields
In-Reply-To: <469C881A.1040200@garambrogne.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_124932_15061395.1185101674559"
References: <003401c7c7f2$21fb5140$970fda80@libraria.ucsf.edu>
	 <469C768D.4030608@garambrogne.net>
	 <34b8543c0707170113h163ad5feqe25e58de3c378cc6@mail.gmail.com>
	 <469C881A.1040200@garambrogne.net>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_124932_15061395.1185101674559
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: base64
Content-Disposition: inline

VGhhbmtzIE10aGlldQp3b3VsZCB5b3UgdGVsbCBtZSBkb2VzIENvbXBhc3Mgc3VwcG9ydCByZWxh
dGlvbnNoaXAgYmV0d2VlbiBvYmplY3RzIGxpa2UgYQpyZWxhdGlvbmFsIGRhdGFiYXNlPwoKT24g
Ny8xNy8wNywgTWF0aGlldSBMZWNhcm1lIDwgbWF0aGlldUBnYXJhbWJyb2duZS5uZXQ+IHdyb3Rl
Ogo+Cj4gaHR0cDovL3d3dy5vcGVuc3ltcGhvbnkuY29tL2NvbXBhc3MvCj4gVGhlIHByb2plY3Qg
aXMgZnJlZSwgZm9sbG93aW5nIEx1Y2VuZSB2ZXJzaW9uIHF1aWNrbHksIHRoZSBmb3J1bSBpcwo+
IGdyZWF0LCBhbmQgdGhlIGxlYWQgZGV2ZWxvcGVyIGlzIHF1aWNrIHJlYWN0aW5nLgo+Cj4gTS4K
Pgo+Cj4gTW9oYW1tYWQgTm9yb3V6aSBhIMOpY3JpdCA6Cj4gPiBNYXRoaWV1LAo+ID4gSSBuZWVk
IGFuIG9iamVjdCBtYXBwZXIgZm9yIGx1Y2VuZSB3b3VsZCB5b3UgcGxlYXNlIGdpdmUgbWUgdGhl
Cj4gPiBDb21wYXNzIHdlYgo+ID4gc2l0ZT8gaXMgaXQgb3BlbiBzb3VyY2U/Cj4gPgo+ID4gdGhh
bmtzCj4KPgo+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLQo+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNl
ci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZwo+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRz
LCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnCj4KPgoKCi0tIApSZWdh
cmRzLApNb2hhbW1hZAotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpzZWUgbXkgYmxvZzogaHR0
cDovL2JyYWluYWJsZS5ibG9nc3BvdC5jb20vCmFub3RoZXIgaW4gUGVyc2lhbjogaHR0cDovL2Zl
a3JlLW1vdGVmYXZldC5ibG9nc3BvdC5jb20vCg==
------=_Part_124932_15061395.1185101674559--

From java-user-return-29313-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 22 11:25:50 2007
Return-Path: <java-user-return-29313-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31746 invoked from network); 22 Jul 2007 11:25:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jul 2007 11:25:49 -0000
Received: (qmail 14242 invoked by uid 500); 22 Jul 2007 11:25:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14195 invoked by uid 500); 22 Jul 2007 11:25:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14184 invoked by uid 99); 22 Jul 2007 11:25:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Jul 2007 04:25:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [212.27.42.28] (HELO smtp2-g19.free.fr) (212.27.42.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Jul 2007 04:25:41 -0700
Received: from [192.168.1.102] (dau94-4-82-227-122-98.fbx.proxad.net [82.227.122.98])
	by smtp2-g19.free.fr (Postfix) with ESMTP id CB70A97C88
	for <java-user@lucene.apache.org>; Sun, 22 Jul 2007 13:25:19 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <34b8543c0707220354h34b1febcocd36a5d99b4a8ff3@mail.gmail.com>
References: <003401c7c7f2$21fb5140$970fda80@libraria.ucsf.edu> <469C768D.4030608@garambrogne.net> <34b8543c0707170113h163ad5feqe25e58de3c378cc6@mail.gmail.com> <469C881A.1040200@garambrogne.net> <34b8543c0707220354h34b1febcocd36a5d99b4a8ff3@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <BDB633E6-C3BA-443B-9FD6-62B505D5B2B8@garambrogne.net>
Content-Transfer-Encoding: quoted-printable
X-Image-Url: http://homepage.mac.com/rdupond/.cv/thumbs/me.thumbnail
From: Mathieu Lecarme <mathieu@garambrogne.net>
Subject: Re: search through all fields
Date: Sun, 22 Jul 2007 13:25:18 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Compass doesn't index database, but pojo mapped with an orm. Parent =20
relation is nice handled.
When a pojo is persisted, compass catch the information and index/=20
remove it with lucene.
There is some troubles when you change something related to a pojo. =20
Compass doesn't see that change. They were some works for that, just =20
have some try to see if it's works, now.

http://www.opensymphony.com/compass/versions/1.2M2/html/index.html

M.

Le 22 juil. 07 =E0 12:54, Mohammad Norouzi a =E9crit :

> Thanks Mthieu
> would you tell me does Compass support relationship between objects =20=

> like a
> relational database?
>
> On 7/17/07, Mathieu Lecarme < mathieu@garambrogne.net> wrote:
>>
>> http://www.opensymphony.com/compass/
>> The project is free, following Lucene version quickly, the forum is
>> great, and the lead developer is quick reacting.
>>
>> M.
>>
>>
>> Mohammad Norouzi a =E9crit :
>> > Mathieu,
>> > I need an object mapper for lucene would you please give me the
>> > Compass web
>> > site? is it open source?
>> >
>> > thanks
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> --=20
> Regards,
> Mohammad
> --------------------------
> see my blog: http://brainable.blogspot.com/
> another in Persian: http://fekre-motefavet.blogspot.com/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29314-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 22 18:17:51 2007
Return-Path: <java-user-return-29314-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98897 invoked from network); 22 Jul 2007 18:17:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jul 2007 18:17:50 -0000
Received: (qmail 97665 invoked by uid 500); 22 Jul 2007 18:17:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97633 invoked by uid 500); 22 Jul 2007 18:17:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97622 invoked by uid 99); 22 Jul 2007 18:17:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Jul 2007 11:17:43 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=MSGID_FROM_MTA_HEADER,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of dmitrytkach1@hotmail.com designates 65.54.246.167 as permitted sender)
Received: from [65.54.246.167] (HELO bay0-omc2-s31.bay0.hotmail.com) (65.54.246.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Jul 2007 11:17:41 -0700
Received: from hotmail.com ([65.54.169.84]) by bay0-omc2-s31.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.2668);
	 Sun, 22 Jul 2007 11:17:21 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Sun, 22 Jul 2007 11:17:21 -0700
Message-ID: <BAY114-DAV12EC8EB2C65FDD3654C3E994F60@phx.gbl>
Received: from 24.12.157.130 by BAY114-DAV12.phx.gbl with DAV;
	Sun, 22 Jul 2007 18:17:18 +0000
X-Originating-IP: [24.12.157.130]
X-Originating-Email: [dmitrytkach1@hotmail.com]
X-Sender: dmitrytkach1@hotmail.com
From: "Dmitry" <dmitrytkach1@hotmail.com>
To: <java-user@lucene.apache.org>
References: <20070720192740.9AC2D3E886E@f38.poczta.interia.pl> <359a92830707201310o1442bedembeb45051a4299eee@mail.gmail.com> <3F8F627A-CC84-4EC9-8159-336EF36335CE@ehatchersolutions.com> <359a92830707201445j6c269186j2b35330814e62b60@mail.gmail.com> <BAY114-DAV16328346EE9656DF80571294F60@phx.gbl> <C1730AB9-8CE1-4EA4-9D3B-9204E44864A1@garambrogne.net>
Subject: Re: Lucene indexing for PDM system like Windchill
Date: Sun, 22 Jul 2007 13:17:28 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 8bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-OriginalArrivalTime: 22 Jul 2007 18:17:21.0140 (UTC) FILETIME=[8B822B40:01C7CC8C]
X-Virus-Checked: Checked by ClamAV on apache.org

Mathieru,
I never used Compass, i know that there is integration Shards /Search with 
Hibernate, but it absolutely different what actually I need, probably I can 
take a look on it. any way thanks
thanks,
DT
www.ejinz.com
search engine
----- Original Message ----- 
From: "Mathieu Lecarme" <mathieu@garambrogne.net>
To: <java-user@lucene.apache.org>
Sent: Sunday, July 22, 2007 4:16 AM
Subject: Re: Lucene indexing for PDM system like Windchill


If you wont to index Hibernate persisted data, just use Compass.

M.
Le 22 juil. 07  04:19, Dmitry a crit :

> Folks,
> Trying to integrate PDM system  : WTPart obejct with Lucene  indexing 
> search framework.
> Part of the work is integration with persistent layer <hibernate>+ 
> indeces storage+ mysql
> Could not find a good solution ...
> please advice
>
> thanks, DT
> www.ejinz.com
> search engine
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29315-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 23 03:07:42 2007
Return-Path: <java-user-return-29315-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46014 invoked from network); 23 Jul 2007 03:07:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jul 2007 03:07:40 -0000
Received: (qmail 78737 invoked by uid 500); 23 Jul 2007 03:07:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78576 invoked by uid 500); 23 Jul 2007 03:07:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78565 invoked by uid 99); 23 Jul 2007 03:07:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Jul 2007 20:07:32 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Jul 2007 20:07:30 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1ICoGL-0000bT-IC
	for java-user@lucene.apache.org; Sun, 22 Jul 2007 20:07:09 -0700
Message-ID: <11737297.post@talk.nabble.com>
Date: Sun, 22 Jul 2007 20:07:09 -0700 (PDT)
From: oiunt <xoiunt@gmail.com>
To: java-user@lucene.apache.org
Subject: Questions about Query's Idf and NEW Similarity fomula. Thanks!
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: xoiunt@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


        Nowadays, I=E2=80=99m doing research using the lucene to build the =
prototype.
I have read the book =E2=80=9CLucene in Action=E2=80=9D, but can=E2=80=99t =
find the solution, so I
try to beg for your help.

I have 2 questions:
1)=09I found that the term in query doesn=E2=80=99t use the idf but only tf=
, however,
in my application I have many queries and it will be inaccurate regardless
idf. My prototype will establish the traces between two kinds of document,
so the idf of the query is also important, could you give some advices?

2)=09I try to use the WordNet to associate words, however, lucene provides
synonymy approach which considers the similarity between word =E2=80=9Cseek=
=E2=80=9D and
word =E2=80=9Csearch=E2=80=9D is 1. In my research, I will consider the sim=
ilarity
coefficient between words ranges from 0 to 1, and I revise the similarity
formula. I don=E2=80=99t know where to insert my formula into lucene.


         Thanks for your help!
--=20
View this message in context: http://www.nabble.com/Questions-about-Query%2=
7s-Idf-and-NEW-Similarity-fomula.-Thanks%21-tf4127297.html#a11737297
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29316-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 23 04:38:51 2007
Return-Path: <java-user-return-29316-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64038 invoked from network); 23 Jul 2007 04:38:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jul 2007 04:38:50 -0000
Received: (qmail 63976 invoked by uid 500); 23 Jul 2007 04:38:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63611 invoked by uid 500); 23 Jul 2007 04:38:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63600 invoked by uid 99); 23 Jul 2007 04:38:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Jul 2007 21:38:45 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of khosravi@us.ibm.com designates 32.97.110.153 as permitted sender)
Received: from [32.97.110.153] (HELO e35.co.us.ibm.com) (32.97.110.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Jul 2007 21:38:43 -0700
Received: from d03relay02.boulder.ibm.com (d03relay02.boulder.ibm.com [9.17.195.227])
	by e35.co.us.ibm.com (8.13.8/8.13.8) with ESMTP id l6N4cM9n029804
	for <java-user@lucene.apache.org>; Mon, 23 Jul 2007 00:38:22 -0400
Received: from d03av01.boulder.ibm.com (d03av01.boulder.ibm.com [9.17.195.167])
	by d03relay02.boulder.ibm.com (8.13.8/8.13.8/NCO v8.4) with ESMTP id l6N4cM41264862
	for <java-user@lucene.apache.org>; Sun, 22 Jul 2007 22:38:22 -0600
Received: from d03av01.boulder.ibm.com (loopback [127.0.0.1])
	by d03av01.boulder.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l6N4cM2x001304
	for <java-user@lucene.apache.org>; Sun, 22 Jul 2007 22:38:22 -0600
Received: from d03nm132.boulder.ibm.com (d03nm132.boulder.ibm.com [9.17.195.172])
	by d03av01.boulder.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l6N4cMdi001296
	for <java-user@lucene.apache.org>; Sun, 22 Jul 2007 22:38:22 -0600
Subject: CJKAnalyzer - Issues with scoring
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OFBDCDA374.8F60BC82-ON87257321.0018AE3E-87257321.001970A8@us.ibm.com>
From: Nina Khosravi <khosravi@us.ibm.com>
Date: Sun, 22 Jul 2007 22:38:20 -0600
X-MIMETrack: Serialize by Router on D03NM132/03/M/IBM(Release 7.0.2HF32 | October 17, 2006) at
 07/22/2007 22:38:22
MIME-Version: 1.0
Content-type: multipart/alternative; 
	Boundary="0__=08BBF9B2DF8B28AE8f9e8a93df938690918c08BBF9B2DF8B28AE"
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

--0__=08BBF9B2DF8B28AE8f9e8a93df938690918c08BBF9B2DF8B28AE
Content-type: text/plain; charset=US-ASCII
Content-transfer-encoding: quoted-printable



Hello,

I am in desperate need of help on a problem with our newly deployed
application that is now using the CJKAnalyzer/CJKTokenizer.  Our previo=
us
release was using the WhitespaceAnalyzer and the users were extremely h=
appy
with the search results ordered by the score of the documents.  We swit=
ched
to the CJKAnalyzer and now the scoring is not giving them the results t=
hey
are expecting.   Any ideas on why using the CJKAnalyzer would be so
different?  Some documents that contain more instances of a search term=
 are
appearing at a lower position in the search results than those having o=
ne
instance of the search term.

I tried printing the explanation of the scoring but don't get any
information, just the value 0.0 for each doc returned.  Anyone have any=

ideas?  I have not dug deep into this problem.  I am pressed for time s=
o
was hoping someone could provide some guidance.

Thanks!!

Nina
=

--0__=08BBF9B2DF8B28AE8f9e8a93df938690918c08BBF9B2DF8B28AE--


From java-user-return-29317-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 23 04:45:14 2007
Return-Path: <java-user-return-29317-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66829 invoked from network); 23 Jul 2007 04:45:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jul 2007 04:45:13 -0000
Received: (qmail 69917 invoked by uid 500); 23 Jul 2007 04:45:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68726 invoked by uid 500); 23 Jul 2007 04:45:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68715 invoked by uid 99); 23 Jul 2007 04:45:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Jul 2007 21:45:08 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=MSGID_FROM_MTA_HEADER,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of dmitrytkach1@hotmail.com designates 65.54.246.77 as permitted sender)
Received: from [65.54.246.77] (HELO bay0-omc1-s5.bay0.hotmail.com) (65.54.246.77)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Jul 2007 21:45:05 -0700
Received: from hotmail.com ([65.54.169.74]) by bay0-omc1-s5.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.2668);
	 Sun, 22 Jul 2007 21:44:45 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Sun, 22 Jul 2007 21:44:45 -0700
Message-ID: <BAY114-DAV24D4BE9EF82795AC87F5794F70@phx.gbl>
Received: from 24.12.157.130 by BAY114-DAV2.phx.gbl with DAV;
	Mon, 23 Jul 2007 04:44:40 +0000
X-Originating-IP: [24.12.157.130]
X-Originating-Email: [dmitrytkach1@hotmail.com]
X-Sender: dmitrytkach1@hotmail.com
From: "Dmitry" <dmitrytkach1@hotmail.com>
To: <java-user@lucene.apache.org>
References: <OFBDCDA374.8F60BC82-ON87257321.0018AE3E-87257321.001970A8@us.ibm.com>
Subject: Re: CJKAnalyzer - Issues with scoring
Date: Sun, 22 Jul 2007 23:44:53 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3028
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
X-OriginalArrivalTime: 23 Jul 2007 04:44:45.0356 (UTC) FILETIME=[3135AEC0:01C7CCE4]
X-Virus-Checked: Checked by ClamAV on apache.org

Nina,
can you point me to the link where I can get documentation about 
CJKAnalyzer.
thanks,
DT
www.ejinz.com
Search Engine Economy

----- Original Message ----- 
From: "Nina Khosravi" <khosravi@us.ibm.com>
To: <java-user@lucene.apache.org>
Sent: Sunday, July 22, 2007 11:38 PM
Subject: CJKAnalyzer - Issues with scoring




Hello,

I am in desperate need of help on a problem with our newly deployed
application that is now using the CJKAnalyzer/CJKTokenizer.  Our previous
release was using the WhitespaceAnalyzer and the users were extremely happy
with the search results ordered by the score of the documents.  We switched
to the CJKAnalyzer and now the scoring is not giving them the results they
are expecting.   Any ideas on why using the CJKAnalyzer would be so
different?  Some documents that contain more instances of a search term are
appearing at a lower position in the search results than those having one
instance of the search term.

I tried printing the explanation of the scoring but don't get any
information, just the value 0.0 for each doc returned.  Anyone have any
ideas?  I have not dug deep into this problem.  I am pressed for time so
was hoping someone could provide some guidance.

Thanks!!

Nina


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29318-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 23 04:56:27 2007
Return-Path: <java-user-return-29318-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71626 invoked from network); 23 Jul 2007 04:56:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jul 2007 04:56:25 -0000
Received: (qmail 88068 invoked by uid 500); 23 Jul 2007 04:56:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88025 invoked by uid 500); 23 Jul 2007 04:56:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88014 invoked by uid 99); 23 Jul 2007 04:56:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Jul 2007 21:56:18 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of khosravi@us.ibm.com designates 32.97.110.152 as permitted sender)
Received: from [32.97.110.152] (HELO e34.co.us.ibm.com) (32.97.110.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Jul 2007 21:56:15 -0700
Received: from d03relay04.boulder.ibm.com (d03relay04.boulder.ibm.com [9.17.195.106])
	by e34.co.us.ibm.com (8.13.8/8.13.8) with ESMTP id l6N4tsAH008792
	for <java-user@lucene.apache.org>; Mon, 23 Jul 2007 00:55:54 -0400
Received: from d03av02.boulder.ibm.com (d03av02.boulder.ibm.com [9.17.195.168])
	by d03relay04.boulder.ibm.com (8.13.8/8.13.8/NCO v8.4) with ESMTP id l6N4trA9213986
	for <java-user@lucene.apache.org>; Sun, 22 Jul 2007 22:55:53 -0600
Received: from d03av02.boulder.ibm.com (loopback [127.0.0.1])
	by d03av02.boulder.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l6N4trhh013760
	for <java-user@lucene.apache.org>; Sun, 22 Jul 2007 22:55:53 -0600
Received: from d03nm132.boulder.ibm.com (d03nm132.boulder.ibm.com [9.17.195.172])
	by d03av02.boulder.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l6N4tpBw013632
	for <java-user@lucene.apache.org>; Sun, 22 Jul 2007 22:55:51 -0600
In-Reply-To: <BAY114-DAV24D4BE9EF82795AC87F5794F70@phx.gbl>
Subject: Re: CJKAnalyzer - Issues with scoring
To: java-user@lucene.apache.org
Cc: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF08DE4074.B3737F24-ON87257321.001ACDDD-87257321.001B0A70@us.ibm.com>
From: Nina Khosravi <khosravi@us.ibm.com>
Date: Sun, 22 Jul 2007 22:55:49 -0600
X-MIMETrack: Serialize by Router on D03NM132/03/M/IBM(Release 7.0.2HF32 | October 17, 2006) at
 07/22/2007 22:55:50
MIME-Version: 1.0
Content-type: multipart/related; 
	Boundary="0__=08BBF9B2DF894B4D8f9e8a93df938690918c08BBF9B2DF894B4D"
X-Virus-Checked: Checked by ClamAV on apache.org

--0__=08BBF9B2DF894B4D8f9e8a93df938690918c08BBF9B2DF894B4D
Content-type: multipart/alternative; 
	Boundary="1__=08BBF9B2DF894B4D8f9e8a93df938690918c08BBF9B2DF894B4D"

--1__=08BBF9B2DF894B4D8f9e8a93df938690918c08BBF9B2DF894B4D
Content-type: text/plain; charset=US-ASCII
Content-transfer-encoding: quoted-printable


Sure.  It is one of the contributed analyzers.

The Java docs are here:
http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/javadoc/i=
ndex.html.

Also, the source files are  here:
http://svn.apache.org/viewvc/lucene/java/trunk/contrib/analyzers/src/ja=
va/org/apache/lucene/analysis/cjk/

Thanks,
Nina



                                                                       =
    
             "Dmitry"                                                  =
    
             <dmitrytkach1@hot                                         =
    
             mail.com>                                                 =
 To 
                                       <java-user@lucene.apache.org>   =
    
             07/22/2007 10:44                                          =
 cc 
             PM                                                        =
    
                                                                   Subj=
ect 
                                       Re: CJKAnalyzer - Issues with   =
    
             Please respond to         scoring                         =
    
             java-user@lucene.                                         =
    
                apache.org                                             =
    
                                                                       =
    
                                                                       =
    
                                                                       =
    
                                                                       =
    




Nina,
can you point me to the link where I can get documentation about
CJKAnalyzer.
thanks,
DT
www.ejinz.com
Search Engine Economy

----- Original Message -----
From: "Nina Khosravi" <khosravi@us.ibm.com>
To: <java-user@lucene.apache.org>
Sent: Sunday, July 22, 2007 11:38 PM
Subject: CJKAnalyzer - Issues with scoring




Hello,

I am in desperate need of help on a problem with our newly deployed
application that is now using the CJKAnalyzer/CJKTokenizer.  Our previo=
us
release was using the WhitespaceAnalyzer and the users were extremely h=
appy
with the search results ordered by the score of the documents.  We swit=
ched
to the CJKAnalyzer and now the scoring is not giving them the results t=
hey
are expecting.   Any ideas on why using the CJKAnalyzer would be so
different?  Some documents that contain more instances of a search term=
 are
appearing at a lower position in the search results than those having o=
ne
instance of the search term.

I tried printing the explanation of the scoring but don't get any
information, just the value 0.0 for each doc returned.  Anyone have any=

ideas?  I have not dug deep into this problem.  I am pressed for time s=
o
was hoping someone could provide some guidance.

Thanks!!

Nina


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

=

--1__=08BBF9B2DF894B4D8f9e8a93df938690918c08BBF9B2DF894B4D
Content-type: text/html; charset=US-ASCII
Content-Disposition: inline
Content-transfer-encoding: quoted-printable

<html><body>
<p>Sure.  It is one of the contributed analyzers.  <br>
<br>
The Java docs are here: <a href=3D"http://lucene.zones.apache.org:8080/=
hudson/job/Lucene-Nightly/javadoc/index.html">http://lucene.zones.apach=
e.org:8080/hudson/job/Lucene-Nightly/javadoc/index.html</a>.<br>
<br>
Also, the source files are  here: <a href=3D"http://svn.apache.org/view=
vc/lucene/java/trunk/contrib/analyzers/src/java/org/apache/lucene/analy=
sis/cjk/">http://svn.apache.org/viewvc/lucene/java/trunk/contrib/analyz=
ers/src/java/org/apache/lucene/analysis/cjk/</a><br>
<br>
Thanks,<br>
Nina<br>
<br>
<img width=3D"16" height=3D"16" src=3D"cid:1__=3D08BBF9B2DF894B4D8f9e8a=
93df938@us.ibm.com" border=3D"0" alt=3D"Inactive hide details for &quot=
;Dmitry&quot; &lt;dmitrytkach1@hotmail.com&gt;">&quot;Dmitry&quot; &lt;=
dmitrytkach1@hotmail.com&gt;<br>
<br>
<br>

<table width=3D"100%" border=3D"0" cellspacing=3D"0" cellpadding=3D"0">=

<tr valign=3D"top"><td style=3D"background-image:url(cid:2__=3D08BBF9B2=
DF894B4D8f9e8a93df938@us.ibm.com); background-repeat: no-repeat; " widt=
h=3D"40%">
<ul>
<ul>
<ul>
<ul><b><font size=3D"2">&quot;Dmitry&quot; &lt;dmitrytkach1@hotmail.com=
&gt;</font></b><font size=3D"2"> </font>
<p><font size=3D"2">07/22/2007 10:44 PM</font>
<table border=3D"1">
<tr valign=3D"top"><td width=3D"168" bgcolor=3D"#FFFFFF"><div align=3D"=
center"><font size=3D"2">Please respond to<br>
java-user@lucene.apache.org</font></div></td></tr>
</table>
</ul>
</ul>
</ul>
</ul>
</td><td width=3D"60%">
<table width=3D"100%" border=3D"0" cellspacing=3D"0" cellpadding=3D"0">=

<tr valign=3D"top"><td width=3D"1%"><img width=3D"58" height=3D"1" src=3D=
"cid:3__=3D08BBF9B2DF894B4D8f9e8a93df938@us.ibm.com" border=3D"0" alt=3D=
""><br>
<div align=3D"right"><font size=3D"2">To</font></div></td><td width=3D"=
100%"><img width=3D"1" height=3D"1" src=3D"cid:3__=3D08BBF9B2DF894B4D8f=
9e8a93df938@us.ibm.com" border=3D"0" alt=3D""><br>
<font size=3D"2">&lt;java-user@lucene.apache.org&gt;</font></td></tr>

<tr valign=3D"top"><td width=3D"1%"><img width=3D"58" height=3D"1" src=3D=
"cid:3__=3D08BBF9B2DF894B4D8f9e8a93df938@us.ibm.com" border=3D"0" alt=3D=
""><br>
<div align=3D"right"><font size=3D"2">cc</font></div></td><td width=3D"=
100%"><img width=3D"1" height=3D"1" src=3D"cid:3__=3D08BBF9B2DF894B4D8f=
9e8a93df938@us.ibm.com" border=3D"0" alt=3D""><br>
</td></tr>

<tr valign=3D"top"><td width=3D"1%"><img width=3D"58" height=3D"1" src=3D=
"cid:3__=3D08BBF9B2DF894B4D8f9e8a93df938@us.ibm.com" border=3D"0" alt=3D=
""><br>
<div align=3D"right"><font size=3D"2">Subject</font></div></td><td widt=
h=3D"100%"><img width=3D"1" height=3D"1" src=3D"cid:3__=3D08BBF9B2DF894=
B4D8f9e8a93df938@us.ibm.com" border=3D"0" alt=3D""><br>
<font size=3D"2">Re: CJKAnalyzer - Issues with scoring</font></td></tr>=

</table>

<table border=3D"0" cellspacing=3D"0" cellpadding=3D"0">
<tr valign=3D"top"><td width=3D"58"><img width=3D"1" height=3D"1" src=3D=
"cid:3__=3D08BBF9B2DF894B4D8f9e8a93df938@us.ibm.com" border=3D"0" alt=3D=
""></td><td width=3D"336"><img width=3D"1" height=3D"1" src=3D"cid:3__=3D=
08BBF9B2DF894B4D8f9e8a93df938@us.ibm.com" border=3D"0" alt=3D""></td></=
tr>
</table>
</td></tr>
</table>
<br>
<tt>Nina,<br>
can you point me to the link where I can get documentation about <br>
CJKAnalyzer.<br>
thanks,<br>
DT<br>
www.ejinz.com<br>
Search Engine Economy<br>
<br>
----- Original Message ----- <br>
From: &quot;Nina Khosravi&quot; &lt;khosravi@us.ibm.com&gt;<br>
To: &lt;java-user@lucene.apache.org&gt;<br>
Sent: Sunday, July 22, 2007 11:38 PM<br>
Subject: CJKAnalyzer - Issues with scoring<br>
<br>
<br>
<br>
<br>
Hello,<br>
<br>
I am in desperate need of help on a problem with our newly deployed<br>=

application that is now using the CJKAnalyzer/CJKTokenizer. &nbsp;Our p=
revious<br>
release was using the WhitespaceAnalyzer and the users were extremely h=
appy<br>
with the search results ordered by the score of the documents. &nbsp;We=
 switched<br>
to the CJKAnalyzer and now the scoring is not giving them the results t=
hey<br>
are expecting. &nbsp; Any ideas on why using the CJKAnalyzer would be s=
o<br>
different? &nbsp;Some documents that contain more instances of a search=
 term are<br>
appearing at a lower position in the search results than those having o=
ne<br>
instance of the search term.<br>
<br>
I tried printing the explanation of the scoring but don't get any<br>
information, just the value 0.0 for each doc returned. &nbsp;Anyone hav=
e any<br>
ideas? &nbsp;I have not dug deep into this problem. &nbsp;I am pressed =
for time so<br>
was hoping someone could provide some guidance.<br>
<br>
Thanks!!<br>
<br>
Nina<br>
<br>
<br>
---------------------------------------------------------------------<b=
r>
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org<br>
For additional commands, e-mail: java-user-help@lucene.apache.org<br>
<br>
</tt><br>
</body></html>=


--1__=08BBF9B2DF894B4D8f9e8a93df938690918c08BBF9B2DF894B4D--


--0__=08BBF9B2DF894B4D8f9e8a93df938690918c08BBF9B2DF894B4D--


From java-user-return-29319-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 23 05:22:20 2007
Return-Path: <java-user-return-29319-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81234 invoked from network); 23 Jul 2007 05:22:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jul 2007 05:22:18 -0000
Received: (qmail 13467 invoked by uid 500); 23 Jul 2007 05:22:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13424 invoked by uid 500); 23 Jul 2007 05:22:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13412 invoked by uid 99); 23 Jul 2007 05:22:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Jul 2007 22:22:13 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of khosravi@us.ibm.com designates 32.97.110.154 as permitted sender)
Received: from [32.97.110.154] (HELO e36.co.us.ibm.com) (32.97.110.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Jul 2007 22:22:11 -0700
Received: from d03relay04.boulder.ibm.com (d03relay04.boulder.ibm.com [9.17.195.106])
	by e36.co.us.ibm.com (8.13.8/8.13.8) with ESMTP id l6N5Lo2A025864
	for <java-user@lucene.apache.org>; Mon, 23 Jul 2007 01:21:50 -0400
Received: from d03av01.boulder.ibm.com (d03av01.boulder.ibm.com [9.17.195.167])
	by d03relay04.boulder.ibm.com (8.13.8/8.13.8/NCO v8.4) with ESMTP id l6N5LnM2213814
	for <java-user@lucene.apache.org>; Sun, 22 Jul 2007 23:21:49 -0600
Received: from d03av01.boulder.ibm.com (loopback [127.0.0.1])
	by d03av01.boulder.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l6N5LnpQ006284
	for <java-user@lucene.apache.org>; Sun, 22 Jul 2007 23:21:49 -0600
Received: from d03nm132.boulder.ibm.com (d03nm132.boulder.ibm.com [9.17.195.172])
	by d03av01.boulder.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l6N5LnsJ006272
	for <java-user@lucene.apache.org>; Sun, 22 Jul 2007 23:21:49 -0600
In-Reply-To: <OF08DE4074.B3737F24-ON87257321.001ACDDD-87257321.001B0A70@us.ibm.com>
Subject: Re: CJKAnalyzer - Issues with scoring
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF6C1C678D.72BE7C0B-ON87257321.001D58BB-87257321.001D6B4B@us.ibm.com>
From: Nina Khosravi <khosravi@us.ibm.com>
Date: Sun, 22 Jul 2007 23:21:48 -0600
X-MIMETrack: Serialize by Router on D03NM132/03/M/IBM(Release 7.0.2HF32 | October 17, 2006) at
 07/22/2007 23:21:48
MIME-Version: 1.0
Content-type: multipart/alternative; 
	Boundary="0__=08BBF9B2DF8EDE2B8f9e8a93df938690918c08BBF9B2DF8EDE2B"
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

--0__=08BBF9B2DF8EDE2B8f9e8a93df938690918c08BBF9B2DF8EDE2B
Content-type: text/plain; charset=US-ASCII

Hello,

I actually found an error in my code.  Thanks to anyone taking a look at
this but the way I was setting the "score" sort field had an error.  Sorry
about this.

Thanks,
Nina

--0__=08BBF9B2DF8EDE2B8f9e8a93df938690918c08BBF9B2DF8EDE2B--


From java-user-return-29320-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 23 12:58:29 2007
Return-Path: <java-user-return-29320-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30792 invoked from network); 23 Jul 2007 12:58:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jul 2007 12:58:27 -0000
Received: (qmail 95686 invoked by uid 500); 23 Jul 2007 12:58:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95378 invoked by uid 500); 23 Jul 2007 12:58:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95367 invoked by uid 99); 23 Jul 2007 12:58:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jul 2007 05:58:20 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of sand.chawla@gmail.com designates 64.233.162.233 as permitted sender)
Received: from [64.233.162.233] (HELO nz-out-0506.google.com) (64.233.162.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jul 2007 05:58:18 -0700
Received: by nz-out-0506.google.com with SMTP id i28so951778nzi
        for <java-user@lucene.apache.org>; Mon, 23 Jul 2007 05:57:57 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=RHR0orc3IYj6lE9eFlVVmlpBBkdoJmSvPA2Nwe6fd56t3dZPNcwzAJhmLxu0nAwj+4xQbbYFtflC9a+z7+JHu1C3OM9M5JbZKxCpLQkqspmw+59kR7sTE0cz7PXan/FNHfO+BdGBSspiQS6IbNzijKv4zh1+nnf45+bN55jgNq0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=BiWvQ0dl55dLU5e30Mw8kJRfPKr8Tc85Mf8qW1CIM7ZbQsMBGMogaybipPv85oVPAnAnhqtG50eGb78jH/3obarFxsVcTCPAne4VrrSjyeN6YjhWCUjgqFaxw13rcEs7pSKr6GkHf7MuCoipj06VH2H2H6u1YVU/tCJcSs6cZB4=
Received: by 10.114.166.1 with SMTP id o1mr2954591wae.1185195473108;
        Mon, 23 Jul 2007 05:57:53 -0700 (PDT)
Received: by 10.114.127.3 with HTTP; Mon, 23 Jul 2007 05:57:53 -0700 (PDT)
Message-ID: <a70e4c2b0707230557k38b80c32xf76763344d27ffb7@mail.gmail.com>
Date: Mon, 23 Jul 2007 18:27:53 +0530
From: "sandeep chawla" <sand.chawla@gmail.com>
To: java-user@lucene.apache.org
Subject: Synonym Search and stemming
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I want to implement synonym search in my application.

I think there are two ways to implement synonym search.
Index the documents using a synonym analyzer
OR
Expand the query using a parser which uses a synonym analyzer.

Well  I am expanding query as indexing with synonym analyzer takes
much time and more space too.

Also I am using PorterStemmer in indexing.

Now suppose i want to search for word "simple"

There are two ways now..
1----

First i stem this word to "simp" so that i can match all the variants
of "simple" in my index like simply etc.

then i expend this query using synonym analyzer but it doesnt get
expand as i m using the stemmed word for synonyms..ie. "simpl".

so when query.toString

It is field:simpl

I just get all the documents which have only "simple"

2----

First expand the query using synonym analyzer
then i stem it.

In this case

Query.toString = field:"simpl elementari uncompl childlik unproblemat
unsubdivid"

I would like it to  be

field:simple field:elementari field:uncompl field:childlik and so on

i'd appreciate any help in this regard

Thanks
Sandeep
-- 
SANDEEP CHAWLA
House No- 23
10th main
BTM 1st  Stage
Bangalore Mobile: 91-9986150603

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29321-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 23 13:27:36 2007
Return-Path: <java-user-return-29321-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51261 invoked from network); 23 Jul 2007 13:27:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jul 2007 13:27:35 -0000
Received: (qmail 68178 invoked by uid 500); 23 Jul 2007 13:27:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68146 invoked by uid 500); 23 Jul 2007 13:27:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68135 invoked by uid 99); 23 Jul 2007 13:27:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jul 2007 06:27:28 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=RCVD_IN_SORBS_WEB
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [213.162.48.15] (HELO soufre.accelance.net) (213.162.48.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jul 2007 06:27:26 -0700
Received: from [192.168.2.156] (corp-gw.accelance.net [213.162.48.17])
	(using TLSv1 with cipher RC4-MD5 (128/128 bits))
	(No client certificate requested)
	by soufre.accelance.net (Postfix) with ESMTP id 025725D36
	for <java-user@lucene.apache.org>; Mon, 23 Jul 2007 15:27:01 +0200 (CEST)
Subject: Re: Lucene indexing for PDM system like Windchill
From: Mathieu Lecarme <mathieu@garambrogne.net>
To: java-user@lucene.apache.org
In-Reply-To: <BAY114-DAV12EC8EB2C65FDD3654C3E994F60@phx.gbl>
References: <20070720192740.9AC2D3E886E@f38.poczta.interia.pl>
	 <359a92830707201310o1442bedembeb45051a4299eee@mail.gmail.com>
	 <3F8F627A-CC84-4EC9-8159-336EF36335CE@ehatchersolutions.com>
	 <359a92830707201445j6c269186j2b35330814e62b60@mail.gmail.com>
	 <BAY114-DAV16328346EE9656DF80571294F60@phx.gbl>
	 <C1730AB9-8CE1-4EA4-9D3B-9204E44864A1@garambrogne.net>
	 <BAY114-DAV12EC8EB2C65FDD3654C3E994F60@phx.gbl>
Content-Type: text/plain; charset=utf-8
Date: Mon, 23 Jul 2007 15:26:53 +0200
Message-Id: <1185197213.5817.9.camel@mlecarme-laptop>
Mime-Version: 1.0
X-Mailer: Evolution 2.10.1 
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Le dimanche 22 juillet 2007  13:17 -0500, Dmitry a crit :
> Mathieru,
> I never used Compass, i know that there is integration Shards /Search with 
> Hibernate, but it absolutely different what actually I need, probably I can 
> take a look on it. any way thanks
> thanks,
> DT

Not only hibernate, a lot of ORM are supported.
I don't understand your needs.

M.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29322-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 23 13:46:26 2007
Return-Path: <java-user-return-29322-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58979 invoked from network); 23 Jul 2007 13:46:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jul 2007 13:46:25 -0000
Received: (qmail 11485 invoked by uid 500); 23 Jul 2007 13:46:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11454 invoked by uid 500); 23 Jul 2007 13:46:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11443 invoked by uid 99); 23 Jul 2007 13:46:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jul 2007 06:46:18 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=RCVD_IN_SORBS_WEB
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [213.162.48.15] (HELO soufre.accelance.net) (213.162.48.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jul 2007 06:46:16 -0700
Received: from [192.168.2.156] (corp-gw.accelance.net [213.162.48.17])
	(using TLSv1 with cipher RC4-MD5 (128/128 bits))
	(No client certificate requested)
	by soufre.accelance.net (Postfix) with ESMTP id B6F805DE1
	for <java-user@lucene.apache.org>; Mon, 23 Jul 2007 15:45:55 +0200 (CEST)
Subject: Re: Synonym Search and stemming
From: Mathieu Lecarme <mathieu@garambrogne.net>
To: java-user@lucene.apache.org
In-Reply-To: <a70e4c2b0707230557k38b80c32xf76763344d27ffb7@mail.gmail.com>
References: <a70e4c2b0707230557k38b80c32xf76763344d27ffb7@mail.gmail.com>
Content-Type: text/plain; charset=utf-8
Date: Mon, 23 Jul 2007 15:45:55 +0200
Message-Id: <1185198355.5817.13.camel@mlecarme-laptop>
Mime-Version: 1.0
X-Mailer: Evolution 2.10.1 
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

IMHO, stemming is hurting index. A stemmed index can't be use for
completion or other kind of search.
But stemming is nice for synonyms search. You should look for
spellchecker code. If you index your word with stemmed version, you can
provide a synonym filter, just like wordnet example.

M.

Le lundi 23 juillet 2007  18:27 +0530, sandeep chawla a crit :
> Hi,
> 
> I want to implement synonym search in my application.
> 
> I think there are two ways to implement synonym search.
> Index the documents using a synonym analyzer
> OR
> Expand the query using a parser which uses a synonym analyzer.
> 
> Well  I am expanding query as indexing with synonym analyzer takes
> much time and more space too.
> 
> Also I am using PorterStemmer in indexing.
> 
> Now suppose i want to search for word "simple"
> 
> There are two ways now..
> 1----
> 
> First i stem this word to "simp" so that i can match all the variants
> of "simple" in my index like simply etc.
> 
> then i expend this query using synonym analyzer but it doesnt get
> expand as i m using the stemmed word for synonyms..ie. "simpl".
> 
> so when query.toString
> 
> It is field:simpl
> 
> I just get all the documents which have only "simple"
> 
> 2----
> 
> First expand the query using synonym analyzer
> then i stem it.
> 
> In this case
> 
> Query.toString = field:"simpl elementari uncompl childlik unproblemat
> unsubdivid"
> 
> I would like it to  be
> 
> field:simple field:elementari field:uncompl field:childlik and so on
> 
> i'd appreciate any help in this regard
> 
> Thanks
> Sandeep


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29323-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 23 15:32:57 2007
Return-Path: <java-user-return-29323-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92107 invoked from network); 23 Jul 2007 15:32:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jul 2007 15:32:54 -0000
Received: (qmail 46965 invoked by uid 500); 23 Jul 2007 15:32:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46914 invoked by uid 500); 23 Jul 2007 15:32:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46903 invoked by uid 99); 23 Jul 2007 15:32:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jul 2007 08:32:47 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jul 2007 08:32:43 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1ICztW-0000bG-Sw
	for java-user@lucene.apache.org; Mon, 23 Jul 2007 08:32:22 -0700
Message-ID: <11746864.post@talk.nabble.com>
Date: Mon, 23 Jul 2007 08:32:22 -0700 (PDT)
From: testn <test1@doramail.com>
To: java-user@lucene.apache.org
Subject: Search for null
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: test1@doramail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Is it possible to search for the document that specified field doesn't exist
or such field value is null?
-- 
View this message in context: http://www.nabble.com/Search-for-null-tf4130600.html#a11746864
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29324-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 23 17:01:32 2007
Return-Path: <java-user-return-29324-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28158 invoked from network); 23 Jul 2007 17:01:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jul 2007 17:01:31 -0000
Received: (qmail 13022 invoked by uid 500); 23 Jul 2007 17:01:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12991 invoked by uid 500); 23 Jul 2007 17:01:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12980 invoked by uid 99); 23 Jul 2007 17:01:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jul 2007 10:01:25 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [64.233.184.234] (HELO wr-out-0506.google.com) (64.233.184.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jul 2007 10:01:23 -0700
Received: by wr-out-0506.google.com with SMTP id i4so1025617wra
        for <java-user@lucene.apache.org>; Mon, 23 Jul 2007 10:01:01 -0700 (PDT)
Received: by 10.143.33.19 with SMTP id l19mr244531wfj.1185210060829;
        Mon, 23 Jul 2007 10:01:00 -0700 (PDT)
Received: by 10.143.39.9 with HTTP; Mon, 23 Jul 2007 10:01:00 -0700 (PDT)
Message-ID: <7cbc67ff0707231001tf8a9068vc93dd321eeb7dfdb@mail.gmail.com>
Date: Mon, 23 Jul 2007 22:31:00 +0530
From: "Harini Raghavan" <harini.raghavan@insideview.com>
To: java-user@lucene.apache.org
Subject: Lucene 2.2 + Not Merging Segments
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_119264_30153301.1185210060800"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_119264_30153301.1185210060800
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi All,

I just upgraded my application to use lucene 2.2. Prior to this, I was using
lucene 1.9.1 and the addDocument method in the IndexWriter used to keep
merging smaller segments while adding new documents depending on the
mergeFactor. I was using the default mergeFactor settings. But after the
upgrade, when I add documents, every time it is creating a new segment and
not merging the older ones. Within 2 hours of running, it had created over
1000 segments. I verified the IndexWriter in the new source and it seemed to
me that there is no change to the default values.

Has anything else changed that would affect the
IndexWriter.addDocumentbehaviour? Can someone shed some light on this.

Thanks,
Harini

------=_Part_119264_30153301.1185210060800--

From java-user-return-29325-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 23 19:05:18 2007
Return-Path: <java-user-return-29325-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73357 invoked from network); 23 Jul 2007 19:05:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jul 2007 19:05:11 -0000
Received: (qmail 50550 invoked by uid 500); 23 Jul 2007 19:05:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50521 invoked by uid 500); 23 Jul 2007 19:05:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50509 invoked by uid 99); 23 Jul 2007 19:05:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jul 2007 12:05:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jul 2007 12:05:02 -0700
Received: from compute2.internal (compute2.internal [10.202.2.42])
	by out1.messagingengine.com (Postfix) with ESMTP id E6D0AADB3
	for <java-user@lucene.apache.org>; Mon, 23 Jul 2007 15:04:41 -0400 (EDT)
Received: from web8.messagingengine.com ([10.202.2.217])
  by compute2.internal (MEProxy); Mon, 23 Jul 2007 15:04:41 -0400
Received: by web8.messagingengine.com (Postfix, from userid 99)
	id CA7F39BB2; Mon, 23 Jul 2007 15:04:41 -0400 (EDT)
Message-Id: <1185217481.2207.1201623403@webmail.messagingengine.com>
X-Sasl-Enc: wWKi1jyboM1Fm06QvhzLTmHFlLE0rMpH9eXRw9tHpblJ 1185217481
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <7cbc67ff0707231001tf8a9068vc93dd321eeb7dfdb@mail.gmail.com>
Subject: Re: Lucene 2.2 + Not Merging Segments
In-Reply-To: <7cbc67ff0707231001tf8a9068vc93dd321eeb7dfdb@mail.gmail.com>
Date: Mon, 23 Jul 2007 15:04:41 -0400
X-Virus-Checked: Checked by ClamAV on apache.org


This is spooky.  Could you provide more details about how you are using
IndexWriter?  Are you changing "max buffered docs" from the default?

Also, can you call writer.setInfoStream(System.out), capture that log, and
post it?

Mike

"Harini Raghavan" <harini.raghavan@insideview.com> wrote:
> Hi All,
> 
> I just upgraded my application to use lucene 2.2. Prior to this, I was using
> lucene 1.9.1 and the addDocument method in the IndexWriter used to keep
> merging smaller segments while adding new documents depending on the
> mergeFactor. I was using the default mergeFactor settings. But after the
> upgrade, when I add documents, every time it is creating a new segment and
> not merging the older ones. Within 2 hours of running, it had created over
> 1000 segments. I verified the IndexWriter in the new source and it seemed to
> me that there is no change to the default values.
> 
> Has anything else changed that would affect the
> IndexWriter.addDocumentbehaviour? Can someone shed some light on this.
> 
> Thanks,
> Harini

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29326-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 23 19:16:12 2007
Return-Path: <java-user-return-29326-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76971 invoked from network); 23 Jul 2007 19:16:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jul 2007 19:16:10 -0000
Received: (qmail 69746 invoked by uid 500); 23 Jul 2007 19:16:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69702 invoked by uid 500); 23 Jul 2007 19:16:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69670 invoked by uid 99); 23 Jul 2007 19:16:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jul 2007 12:16:04 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.156 as permitted sender)
Received: from [195.212.29.156] (HELO mtagate7.de.ibm.com) (195.212.29.156)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jul 2007 12:16:01 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate7.de.ibm.com (8.13.8/8.13.8) with ESMTP id l6NJFdG6282844
	for <java-user@lucene.apache.org>; Mon, 23 Jul 2007 19:15:39 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.4) with ESMTP id l6NJFde41835120
	for <java-user@lucene.apache.org>; Mon, 23 Jul 2007 21:15:39 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l6NJFNBV027896
	for <java-user@lucene.apache.org>; Mon, 23 Jul 2007 21:15:23 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l6NJFMbl027438
	for <java-user@lucene.apache.org>; Mon, 23 Jul 2007 21:15:22 +0200
In-Reply-To: <1185217481.2207.1201623403@webmail.messagingengine.com>
Subject: Re: Lucene 2.2 + Not Merging Segments
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF4CC3E51A.13F2CDC7-ON88257321.00695C1A-88257321.00697A52@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Mon, 23 Jul 2007 12:12:05 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 23/07/2007 22:15:22
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

Also, are you perhaps closing the indexWriter after each addDoc()?

"Michael McCandless" <lucene@mikemccandless.com> wrote:

>
> This is spooky.  Could you provide more details about how you are using
> IndexWriter?  Are you changing "max buffered docs" from the default?
>
> Also, can you call writer.setInfoStream(System.out), capture
> that log, and
> post it?
>
> Mike
>
> "Harini Raghavan" <harini.raghavan@insideview.com> wrote:
> > Hi All,
> >
> > I just upgraded my application to use lucene 2.2. Prior to
> this, I was using
> > lucene 1.9.1 and the addDocument method in the IndexWriter used to keep
> > merging smaller segments while adding new documents depending on the
> > mergeFactor. I was using the default mergeFactor settings.
> But after the
> > upgrade, when I add documents, every time it is creating a
> new segment and
> > not merging the older ones. Within 2 hours of running, it had
> created over
> > 1000 segments. I verified the IndexWriter in the new source
> and it seemed to
> > me that there is no change to the default values.
> >
> > Has anything else changed that would affect the
> > IndexWriter.addDocumentbehaviour? Can someone shed some light on this.
> >
> > Thanks,
> > Harini


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29327-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 23 20:24:07 2007
Return-Path: <java-user-return-29327-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14075 invoked from network); 23 Jul 2007 20:24:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jul 2007 20:24:06 -0000
Received: (qmail 35846 invoked by uid 500); 23 Jul 2007 20:24:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35795 invoked by uid 500); 23 Jul 2007 20:24:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35782 invoked by uid 99); 23 Jul 2007 20:24:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jul 2007 13:24:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jul 2007 13:23:58 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 0D1FB30EFC18; Mon, 23 Jul 2007 14:23:37 -0600 (MDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [128.143.193.70] (d-128-193-70.bootp.Virginia.EDU [128.143.193.70])
	by ehatchersolutions.com (Postfix) with ESMTP id B8BD430EFC16
	for <java-user@lucene.apache.org>; Mon, 23 Jul 2007 14:23:36 -0600 (MDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <11746864.post@talk.nabble.com>
References: <11746864.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <0E1018D4-E9DB-424C-84F9-C72B1AA5D3B3@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Search for null
Date: Mon, 23 Jul 2007 16:23:33 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1


On Jul 23, 2007, at 11:32 AM, testn wrote:
> Is it possible to search for the document that specified field  
> doesn't exist
> or such field value is null?

This is from Solr, so I'm not sure off the top of my head if this  
mojo applies by itself, but a search for -fieldname:[* TO *] will  
result in all documents that do not have the specified field.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29328-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 23 20:30:25 2007
Return-Path: <java-user-return-29328-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15433 invoked from network); 23 Jul 2007 20:30:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jul 2007 20:30:24 -0000
Received: (qmail 43792 invoked by uid 500); 23 Jul 2007 20:30:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43749 invoked by uid 500); 23 Jul 2007 20:30:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43734 invoked by uid 99); 23 Jul 2007 20:30:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jul 2007 13:30:18 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of les@affinitycircles.com designates 207.7.158.80 as permitted sender)
Received: from [207.7.158.80] (HELO boom.affinityengines.com) (207.7.158.80)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jul 2007 13:30:16 -0700
Received: from [10.200.1.71] (216-31-250-110.static-ip.telepacific.net [216.31.250.110])
	by boom.affinityengines.com (Postfix) with ESMTP id 4A7381DB129
	for <java-user@lucene.apache.org>; Mon, 23 Jul 2007 13:29:55 -0700 (PDT)
Message-ID: <46A50FBA.9000109@affinitycircles.com>
Date: Mon, 23 Jul 2007 13:29:46 -0700
From: Les Fletcher <les@affinitycircles.com>
User-Agent: Icedove 1.5.0.10 (X11/20070329)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Search for null
References: <11746864.post@talk.nabble.com> <0E1018D4-E9DB-424C-84F9-C72B1AA5D3B3@ehatchersolutions.com>
In-Reply-To: <0E1018D4-E9DB-424C-84F9-C72B1AA5D3B3@ehatchersolutions.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Does this particular range query have any significant performance issues?

Les

Erik Hatcher wrote:
>
> On Jul 23, 2007, at 11:32 AM, testn wrote:
>> Is it possible to search for the document that specified field 
>> doesn't exist
>> or such field value is null?
>
> This is from Solr, so I'm not sure off the top of my head if this mojo 
> applies by itself, but a search for -fieldname:[* TO *] will result in 
> all documents that do not have the specified field.
>
>     Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29329-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 23 20:58:13 2007
Return-Path: <java-user-return-29329-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22905 invoked from network); 23 Jul 2007 20:58:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jul 2007 20:58:12 -0000
Received: (qmail 96228 invoked by uid 500); 23 Jul 2007 20:58:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96090 invoked by uid 500); 23 Jul 2007 20:58:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96079 invoked by uid 99); 23 Jul 2007 20:58:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jul 2007 13:58:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [130.107.64.135] (HELO Balboa.AI.SRI.COM) (130.107.64.135)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jul 2007 13:58:04 -0700
Received: from Balboa.AI.SRI.COM (localhost [127.0.0.1])
	by Balboa.AI.SRI.COM (8.11.7p2+Sun/8.10.1) with SMTP id l6NKvh021891
	for <java-user@lucene.apache.org>; Mon, 23 Jul 2007 13:57:43 -0700 (PDT)
Received: from Salt.AI.SRI.COM ([130.107.65.211])
 by Balboa.AI.SRI.COM (SMSSMTP 4.1.9.35) with SMTP id M2007072313574323179
 for <java-user@lucene.apache.org>; Mon, 23 Jul 2007 13:57:43 -0700
Received: from avocado.ai.sri.com ([130.107.65.9])
	by Salt.AI.SRI.COM with asmtp 
	(Cipher TLSv1:RC4-MD5:128) (Exim 3.35 #1 (Debian))
	id 1ID4yN-0000qv-00
	for <java-user@lucene.apache.org>; Mon, 23 Jul 2007 13:57:43 -0700
Message-ID: <46A51638.1050708@ai.sri.com>
Date: Mon, 23 Jul 2007 13:57:28 -0700
From: Jay Yu <yu@AI.SRI.COM>
Organization: AIC
User-Agent: Thunderbird 1.5.0.12 (Windows/20070509)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Search for null
References: <11746864.post@talk.nabble.com> <0E1018D4-E9DB-424C-84F9-C72B1AA5D3B3@ehatchersolutions.com> <46A50FBA.9000109@affinitycircles.com>
In-Reply-To: <46A50FBA.9000109@affinitycircles.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

If you want performance, a better way might be to assign some special 
string/value (if it's easy to create) to the missing field of docs and 
index the field without tokenizing it. Then you may search for that 
special value to find the docs.

Jay

Les Fletcher wrote:
> Does this particular range query have any significant performance issues?
> 
> Les
> 
> Erik Hatcher wrote:
>>
>> On Jul 23, 2007, at 11:32 AM, testn wrote:
>>> Is it possible to search for the document that specified field 
>>> doesn't exist
>>> or such field value is null?
>>
>> This is from Solr, so I'm not sure off the top of my head if this mojo 
>> applies by itself, but a search for -fieldname:[* TO *] will result in 
>> all documents that do not have the specified field.
>>
>>     Erik
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29330-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 24 07:22:51 2007
Return-Path: <java-user-return-29330-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25327 invoked from network); 24 Jul 2007 07:22:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jul 2007 07:22:42 -0000
Received: (qmail 46211 invoked by uid 500); 24 Jul 2007 07:22:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46157 invoked by uid 500); 24 Jul 2007 07:22:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46146 invoked by uid 99); 24 Jul 2007 07:22:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 00:22:34 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [68.142.200.238] (HELO smtp103.biz.mail.mud.yahoo.com) (68.142.200.238)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 24 Jul 2007 00:22:32 -0700
Received: (qmail 66487 invoked from network); 24 Jul 2007 07:22:10 -0000
Received: from unknown (HELO toto) (elie.choueiri@elementn.com@194.126.31.57 with login)
  by smtp103.biz.mail.mud.yahoo.com with SMTP; 24 Jul 2007 07:22:08 -0000
X-YMail-OSG: LxH36.cVM1kGohUD5tJyn1S7f9yJMEW4IW.70aTHmwEp1DDp
From: "Elie Choueiri" <elie.choueiri@elementn.com>
To: <java-user@lucene.apache.org>
Subject: Multiple Languages with Lucene (Arabic & English)
Date: Tue, 24 Jul 2007 10:21:24 +0300
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0000_01C7CDDC.667DD410"
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
Thread-Index: AcfNwz4PEILB4DIHQ42A5izv6F1yQw==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org
Message-Id: <20070724072232.9603410FB011@herse.apache.org>

------=_NextPart_000_0000_01C7CDDC.667DD410
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi

 

I'm new to searching and am trying to use Lucene to search English & Arabic
documents.  I've got a bunch of questions (hopefully you'll find some
interesting!) and am hoping someone's gone through some of them and has some
answers for me!

 

First, do I have to worry about the Arabic Analyzer overwriting the index
files of the English analyzer? (Or vice versa?)

i.e. When I index documents a second time, will data be overwritten?

 

I could just store the index files for different languages in a different
location, but it's good to know and I'd rather not if I don't have to :)

 

Also, on the same note, if I'm indexing documents that contain both Arabic
and English, will the index files created by the English (or Arabic)
analyzer contain garbage or become corrupted because of the language
difference?

 

It is possible to index (using an English/Latin/Standard analyzer) a file
that contains both english and arabic words, and expect the searches in
English using the same analyzer to be valid, right?

 

In an Arabic document with a single English word (the name of a corporation,
for example) will the English word even be indexed and located by a search?
I could test something like this with a small subset of documents, but I
doubt the actual usefulness of a test with such a tiny (relatively
speaking!) amount of data.. I know we can tell Lucene to store the full copy
of the document, but does that affect the index itself?

 

Finally, and here's the tricky one, are searches that contain both English
and Arabic words valid?  My limited understanding of the way search engines
work tells me the search analyzes the context of words as well as
statistical data to decide the relevance of hits, is this still valid for
multi-lingual searches?  

 

 

Thanks for any help you can provide!

 


------=_NextPart_000_0000_01C7CDDC.667DD410--


From java-user-return-29331-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 24 11:49:15 2007
Return-Path: <java-user-return-29331-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27963 invoked from network); 24 Jul 2007 11:49:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jul 2007 11:49:13 -0000
Received: (qmail 41831 invoked by uid 500); 24 Jul 2007 11:49:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41629 invoked by uid 500); 24 Jul 2007 11:49:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41610 invoked by uid 99); 24 Jul 2007 11:49:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 04:49:07 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of daniel.rosher@hotonline.com designates 217.69.20.190 as permitted sender)
Received: from [217.69.20.190] (HELO cluster-d.mailcontrol.com) (217.69.20.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 04:49:05 -0700
Received: from mail.workthing.com (mail.workthing.com [195.224.106.50])
	by rly31d.srv.mailcontrol.com (MailControl) with ESMTP id l6OBmQ7t010022
	for <java-user@lucene.apache.org>; Tue, 24 Jul 2007 12:48:40 +0100
thread-index: AcfN6IEP4AsGZhjcQhGbooutXp0xjg==
Content-Class: urn:content-classes:message
Importance: normal
Priority: normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.2757
Received: from [192.168.222.59] ([192.168.222.59] RDNS failed) by mail.workthing.com with Microsoft SMTPSVC(6.0.3790.1830); Tue, 24 Jul 2007 12:48:08 +0100
Subject: Re: Search for null
From: "daniel rosher" <daniel.rosher@hotonline.com>
To: <java-user@lucene.apache.org>
In-Reply-To: <46A51638.1050708@ai.sri.com>
References: <11746864.post@talk.nabble.com> <0E1018D4-E9DB-424C-84F9-C72B1AA5D3B3@ehatchersolutions.com> <46A50FBA.9000109@affinitycircles.com>  <46A51638.1050708@ai.sri.com>
Content-Type: text/plain;
	charset="Windows-1252"
Date: Tue, 24 Jul 2007 12:48:30 +0100
Message-ID: <1185277710.10469.26.camel@rosher.org>
MIME-Version: 1.0
X-Mailer: Evolution 2.10.1 
Content-Transfer-Encoding: quoted-printable
X-OriginalArrivalTime: 24 Jul 2007 11:48:08.0317 (UTC) FILETIME=[80F7AAD0:01C7CDE8]
X-Scanned-By: MailControl A-07-08-00 (www.mailcontrol.com) on 10.68.0.141
X-Virus-Checked: Checked by ClamAV on apache.org

Perhaps you can use a filter in the following way.

-Create a filter (via QueryFilter) that would contain all document that
do not have null values for the field
-flip the bits of the filter so that it now contains documents that have
null values for a field
-Use the filter in conjunction with subsequent queries.

This would also help with performance as filters are simply bitsets and
can cheaply be stored, generated once and used often.

Dan

On Mon, 2007-07-23 at 13:57 -0700, Jay Yu wrote:
> If you want performance, a better way might be to assign some special=20
> string/value (if it's easy to create) to the missing field of docs and=20
> index the field without tokenizing it. Then you may search for that=20
> special value to find the docs.
>=20
> Jay
>=20
> Les Fletcher wrote:
> > Does this particular range query have any significant performance issue=
s?
> >=20
> > Les
> >=20
> > Erik Hatcher wrote:
> >>
> >> On Jul 23, 2007, at 11:32 AM, testn wrote:
> >>> Is it possible to search for the document that specified field=20
> >>> doesn't exist
> >>> or such field value is null?
> >>
> >> This is from Solr, so I'm not sure off the top of my head if this mojo=
=20
> >> applies by itself, but a search for -fieldname:[* TO *] will result in=
=20
> >> all documents that do not have the specified field.
> >>
> >>     Erik
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >=20
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20
> <<This email has been scanned for virus and spam content>>
Daniel Rosher
Developer


d: 0207 3489 912
t: 0870 2020 121
f: 0870 2020 131
m:=20
http://www.hotonline.com/






- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -=
 - - - - - - - - - - - - - - - - -
This message is sent in confidence for the addressee only. It may contain p=
rivileged=20
information. The contents are not to be disclosed to anyone other than the =
addressee.=20
Unauthorised recipients are requested to preserve this confidentiality and =
to advise=20
us of any errors in transmission. Thank you.

hotonline ltd is registered in England & Wales. Registered office: One Cana=
da Square,=20
Canary Wharf, London E14 5AP. Registered No: 1904765.


This message has been scanned for viruses by BlackSpider MailControl - www.=
blackspider.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29332-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 24 12:11:29 2007
Return-Path: <java-user-return-29332-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37632 invoked from network); 24 Jul 2007 12:11:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jul 2007 12:11:28 -0000
Received: (qmail 82834 invoked by uid 500); 24 Jul 2007 12:11:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82563 invoked by uid 500); 24 Jul 2007 12:11:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82552 invoked by uid 99); 24 Jul 2007 12:11:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 05:11:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.5] (HELO spunkymail-a4.g.dreamhost.com) (208.97.132.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 05:11:20 -0700
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a4.g.dreamhost.com (Postfix) with ESMTP id A7662131A3F
	for <java-user@lucene.apache.org>; Tue, 24 Jul 2007 05:11:01 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <20070724072232.9603410FB011@herse.apache.org>
References: <20070724072232.9603410FB011@herse.apache.org>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <531DD34C-FB74-4A1B-BF30-9B2ECA506D5B@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Multiple Languages with Lucene (Arabic & English)
Date: Tue, 24 Jul 2007 08:10:53 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


On Jul 24, 2007, at 3:21 AM, Elie Choueiri wrote:

> Hi
>
>
>
> I'm new to searching and am trying to use Lucene to search English  
> & Arabic
> documents.  I've got a bunch of questions (hopefully you'll find some
> interesting!) and am hoping someone's gone through some of them and  
> has some
> answers for me!
>
>
>
> First, do I have to worry about the Arabic Analyzer overwriting the  
> index
> files of the English analyzer? (Or vice versa?)
>
> i.e. When I index documents a second time, will data be overwritten?
>

That depends whether you tell Lucene to create a new index or not.   
See the IndexWriter API for your options.

>
>
> I could just store the index files for different languages in a  
> different
> location, but it's good to know and I'd rather not if I don't have  
> to :)
>
>
>
> Also, on the same note, if I'm indexing documents that contain both  
> Arabic
> and English, will the index files created by the English (or Arabic)
> analyzer contain garbage or become corrupted because of the language
> difference?
>

I don't know if it will be corrupted, but probably won't be all that  
useful, either. You may find the PerFieldAnalyzerWrapper to be helpful.

>
>
> It is possible to index (using an English/Latin/Standard analyzer)  
> a file
> that contains both english and arabic words, and expect the  
> searches in
> English using the same analyzer to be valid, right?

I should think so.  I don't recall running across this case too much,  
but do remember the reverse, Arabic files w/ some English and the  
Arabic analyzer usually just skipped over the English leaving it  
intact, thus searching those English terms in the Arabic index worked  
just fine.

>
>
>
> In an Arabic document with a single English word (the name of a  
> corporation,
> for example) will the English word even be indexed and located by a  
> search?
> I could test something like this with a small subset of documents,  
> but I
> doubt the actual usefulness of a test with such a tiny (relatively
> speaking!) amount of data.. I know we can tell Lucene to store the  
> full copy
> of the document, but does that affect the index itself?
>
>
>
> Finally, and here's the tricky one, are searches that contain both  
> English
> and Arabic words valid?  My limited understanding of the way search  
> engines
> work tells me the search analyzes the context of words as well as
> statistical data to decide the relevance of hits, is this still  
> valid for
> multi-lingual searches?
>
>

They are valid, just not sure how useful, but that is for your app to  
decide.  I guess if your users know both Arabic and English, it  
probably isn't a big deal.  Lucene just tries to match up what is in  
the query w/ what is in the index, so if you have validly analyzed  
tokens in both the query and the index then Lucene should find them.

HTH,
Grant

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

Read the Lucene Java FAQ at http://wiki.apache.org/lucene-java/LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29333-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 24 13:27:25 2007
Return-Path: <java-user-return-29333-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68622 invoked from network); 24 Jul 2007 13:27:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jul 2007 13:27:24 -0000
Received: (qmail 45916 invoked by uid 500); 24 Jul 2007 13:27:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45877 invoked by uid 500); 24 Jul 2007 13:27:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45866 invoked by uid 99); 24 Jul 2007 13:27:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 06:27:17 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 06:27:13 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IDKPd-0006F7-4Z
	for java-user@lucene.apache.org; Tue, 24 Jul 2007 06:26:53 -0700
Message-ID: <11762894.post@talk.nabble.com>
Date: Tue, 24 Jul 2007 06:26:52 -0700 (PDT)
From: testn <test1@doramail.com>
To: java-user@lucene.apache.org
Subject: Re: Search for null
In-Reply-To: <1185277710.10469.26.camel@rosher.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: test1@doramail.com
References: <11746864.post@talk.nabble.com> <0E1018D4-E9DB-424C-84F9-C72B1AA5D3B3@ehatchersolutions.com> <46A50FBA.9000109@affinitycircles.com> <46A51638.1050708@ai.sri.com> <1185277710.10469.26.camel@rosher.org>
X-Virus-Checked: Checked by ClamAV on apache.org


Would it be more efficient to create an additional inverted field where I
assign a value to that field only when the field I would like to search is
NULL?


daniel rosher wrote:
> 
> Perhaps you can use a filter in the following way.
> 
> -Create a filter (via QueryFilter) that would contain all document that
> do not have null values for the field
> -flip the bits of the filter so that it now contains documents that have
> null values for a field
> -Use the filter in conjunction with subsequent queries.
> 
> This would also help with performance as filters are simply bitsets and
> can cheaply be stored, generated once and used often.
> 
> Dan
> 
> On Mon, 2007-07-23 at 13:57 -0700, Jay Yu wrote:
>> If you want performance, a better way might be to assign some special 
>> string/value (if it's easy to create) to the missing field of docs and 
>> index the field without tokenizing it. Then you may search for that 
>> special value to find the docs.
>> 
>> Jay
>> 
>> Les Fletcher wrote:
>> > Does this particular range query have any significant performance
>> issues?
>> > 
>> > Les
>> > 
>> > Erik Hatcher wrote:
>> >>
>> >> On Jul 23, 2007, at 11:32 AM, testn wrote:
>> >>> Is it possible to search for the document that specified field 
>> >>> doesn't exist
>> >>> or such field value is null?
>> >>
>> >> This is from Solr, so I'm not sure off the top of my head if this mojo 
>> >> applies by itself, but a search for -fieldname:[* TO *] will result in 
>> >> all documents that do not have the specified field.
>> >>
>> >>     Erik
>> >>
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> > 
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> 
>> 
>> 
>> <<This email has been scanned for virus and spam content>>
> Daniel Rosher
> Developer
> 
> 
> d: 0207 3489 912
> t: 0870 2020 121
> f: 0870 2020 131
> m: 
> http://www.hotonline.com/
> 
> 
> 
> 
> 
> 
> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
> - - - - - - - - - - - - - - - - - -
> This message is sent in confidence for the addressee only. It may contain
> privileged 
> information. The contents are not to be disclosed to anyone other than the
> addressee. 
> Unauthorised recipients are requested to preserve this confidentiality and
> to advise 
> us of any errors in transmission. Thank you.
> 
> hotonline ltd is registered in England & Wales. Registered office: One
> Canada Square, 
> Canary Wharf, London E14 5AP. Registered No: 1904765.
> 
> 
> This message has been scanned for viruses by BlackSpider MailControl -
> www.blackspider.com
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Search-for-null-tf4130600.html#a11762894
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29334-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 24 14:20:47 2007
Return-Path: <java-user-return-29334-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87041 invoked from network); 24 Jul 2007 14:20:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jul 2007 14:20:45 -0000
Received: (qmail 69687 invoked by uid 500); 24 Jul 2007 14:20:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69651 invoked by uid 500); 24 Jul 2007 14:20:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69640 invoked by uid 99); 24 Jul 2007 14:20:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 07:20:39 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.184.231 as permitted sender)
Received: from [64.233.184.231] (HELO wr-out-0506.google.com) (64.233.184.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 07:20:37 -0700
Received: by wr-out-0506.google.com with SMTP id m59so1225995wrm
        for <java-user@lucene.apache.org>; Tue, 24 Jul 2007 07:20:16 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=siKurCXjH4JVBm7r4mC7MOe0JQtNMBK0DKo/aHTEiXmFhwoorrV+uPMbyQDFRsLIZllf8KQDUW/wILt3ZfxZxw5buQ50Pmw/ii/PVj/rxPj/aKI18lfBe7oM/HSRDVFZkoivjm9wHB/vIcYv+uc3n6Dw0E9btzt0YfHSQs2poEY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=D5aP5pvhVxUmvCCemkvsXsfFyCo1HfuelG2hZp+5UMJ2q2eUb4E6rpacBGFDbWnu4/pOlcigbyfelUVOa14d2GLzZ721DANrC7j9IYjiDY+CTiH6gyxaV5f3RH6K5lLNK19domh2z+Iw53sUZh7mGIY83Z+l60RXMkl6vFRgoyg=
Received: by 10.143.39.16 with SMTP id r16mr336717wfj.1185286816207;
        Tue, 24 Jul 2007 07:20:16 -0700 (PDT)
Received: by 10.143.3.1 with HTTP; Tue, 24 Jul 2007 07:20:16 -0700 (PDT)
Message-ID: <c68e39170707240720k5f2e7f10p929f164300c3bf0f@mail.gmail.com>
Date: Tue, 24 Jul 2007 10:20:16 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Search for null
In-Reply-To: <1185277710.10469.26.camel@rosher.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <11746864.post@talk.nabble.com>
	 <0E1018D4-E9DB-424C-84F9-C72B1AA5D3B3@ehatchersolutions.com>
	 <46A50FBA.9000109@affinitycircles.com> <46A51638.1050708@ai.sri.com>
	 <1185277710.10469.26.camel@rosher.org>
X-Google-Sender-Auth: 7637695cd5b7e14c
X-Virus-Checked: Checked by ClamAV on apache.org

On 7/24/07, daniel rosher <daniel.rosher@hotonline.com> wrote:
> Perhaps you can use a filter in the following way.
>
> -Create a filter (via QueryFilter) that would contain all document that
> do not have null values for the field
> -flip the bits of the filter so that it now contains documents that have
> null values for a field
> -Use the filter in conjunction with subsequent queries.

That's pretty much what Solr does with it's filters.  A negative
filter like -inStock:true
is generated as it's positive counterpart, and cached that way also
(generally smaller, and can satisfy both negative and positive
variants of the filter).

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29335-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 24 14:47:24 2007
Return-Path: <java-user-return-29335-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95642 invoked from network); 24 Jul 2007 14:47:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jul 2007 14:47:22 -0000
Received: (qmail 51289 invoked by uid 500); 24 Jul 2007 14:47:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51241 invoked by uid 500); 24 Jul 2007 14:47:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51230 invoked by uid 99); 24 Jul 2007 14:47:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 07:47:16 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of rafael.rossini@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 07:47:14 -0700
Received: by ug-out-1314.google.com with SMTP id c2so201966ugf
        for <java-user@lucene.apache.org>; Tue, 24 Jul 2007 07:46:52 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=YeNXKz3gYq0lauLiwMVB7VCZilwlC86vaThZ1HcmE+3keUCGW+731mIkcqYikIGkcMNWhQSpkDXfDAITTo87XFE0nvDJy7kLslWK4LkaGfPQ6nMtnr38tqygbA1VDT5IVm8QKYLQfYAlGVvBKkcDY8oTx0/qx7XtPb0w56EGCdk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=IlajPKkJM4OnqHlwogsvQ+z9HD9Qqw2sQXtWZdEKEZ8NTb1kT04EeqvA2+XLAkkVg6eBajhXX9KH8xCqtJEVZ9Hj7lkfLC4oiGUIejBGnZ8opYgXGtnYF2v4G/bMLB2lCw67mos6gPEGkdJqXShf27FGdbiEew5/H4QqhFyK2hA=
Received: by 10.82.127.14 with SMTP id z14mr3281354buc.1185288412164;
        Tue, 24 Jul 2007 07:46:52 -0700 (PDT)
Received: by 10.82.113.12 with HTTP; Tue, 24 Jul 2007 07:46:51 -0700 (PDT)
Message-ID: <a8d89b3b0707240746p7a34b3b8qab0d0d5999319a42@mail.gmail.com>
Date: Tue, 24 Jul 2007 11:46:52 -0300
From: "Rafael Rossini" <rafael.rossini@gmail.com>
To: java-user@lucene.apache.org
Subject: ArrayIndexOutOfBoundsException on TermScorer
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_145796_331094.1185288412127"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_145796_331094.1185288412127
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hello all,

I=B4m using solr in an app, but I=B4m getting an error that it might be a l=
ucene
problem. When I perform a simple query like q =3D brasil I=B4m getting this
exception:

java.lang.ArrayIndexOutOfBoundsException: 1226511
   at org.apache.lucene.search.TermScorer.score(TermScorer.java:74)
   at org.apache.lucene.search.TermScorer.score(TermScorer.java:61)
   at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:146)
   at org.apache.lucene.search.Searcher.search(Searcher.java:118)
   at org.apache.lucene.search.Searcher.search(Searcher.java:97)

I=B4m using a very recent build from lucene. In the TermScorer.class, line =
74
is:

score *=3D normDecoder[norms[doc] & 0xFF]; // normalize for field

Thanks for any help, and sorry for cross-posting

------=_Part_145796_331094.1185288412127--

From java-user-return-29336-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 24 14:53:18 2007
Return-Path: <java-user-return-29336-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96994 invoked from network); 24 Jul 2007 14:53:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jul 2007 14:53:16 -0000
Received: (qmail 64685 invoked by uid 500); 24 Jul 2007 14:53:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64358 invoked by uid 500); 24 Jul 2007 14:53:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64347 invoked by uid 99); 24 Jul 2007 14:53:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 07:53:09 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.134.188 as permitted sender)
Received: from [209.85.134.188] (HELO mu-out-0910.google.com) (209.85.134.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 07:53:07 -0700
Received: by mu-out-0910.google.com with SMTP id g7so2398012muf
        for <java-user@lucene.apache.org>; Tue, 24 Jul 2007 07:52:45 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=aDZoUWxwr5wH0Pkr9TQfNKYkixba9tRt7nUPRaNalDnijVQgrbFbmUZGWNPeDHYh1w391D1PDe7EuplI2M+4Fzt7YWG2/ZMsMCcd8ox4Y5NSPamd3RbzG0fY9nEP+Mmd6ftev+jcuJhEa/0HU4bG5PGjdC3t22jEPujW0X9AyLg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Y/s1J4nBGbpYvrieEnuftzBEgTvCQkTJu9ERfL4QiJtm7JidW4nAwfsmbY1QJ6bJKqo4ULFvYEO64kqOl0Gp0Zb0+87FmthBaQMm28xcsxmeQeHEWuTuGEAOHmmLOGLlHrdwQTs4uxUvIoJ/DLDWaZsD3y43nTnA3Ccbx8Gua2k=
Received: by 10.82.178.11 with SMTP id a11mr3285469buf.1185288765513;
        Tue, 24 Jul 2007 07:52:45 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Tue, 24 Jul 2007 07:52:44 -0700 (PDT)
Message-ID: <359a92830707240752x6f2a201dg258821133b88c8b1@mail.gmail.com>
Date: Tue, 24 Jul 2007 07:52:45 -0700
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Multiple Languages with Lucene (Arabic & English)
In-Reply-To: <531DD34C-FB74-4A1B-BF30-9B2ECA506D5B@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_118108_21487570.1185288765475"
References: <20070724072232.9603410FB011@herse.apache.org>
	 <531DD34C-FB74-4A1B-BF30-9B2ECA506D5B@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_118108_21487570.1185288765475
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You'll also find lots of discussion about indexing multiple
languages if you search the mail archive for things like multiple
language.

I think one thing you're missing is that Lucene indexes data however
you tell it to. You have both total control over and total responsibility
for how things are indexed. You could, say, determine that a document
was English, and index all of the fields like
title_english
text_english
etc.. and then write that document out to your index. Say the next
document was Arabic. You could index
title_arabic
text_arabic
and write that document to your index. Now if you're searching
in Arabic, you search on the title_arabic and text_arabic fields and
you'd never get any hits on English documents.

Not saying you want to do it this way, but you need to be clear that
Lucene well do what you tell it to. Nothing more and nothing less <G>.

Best
Erick


On 7/24/07, Grant Ingersoll <gsingers@apache.org> wrote:
>
>
> On Jul 24, 2007, at 3:21 AM, Elie Choueiri wrote:
>
> > Hi
> >
> >
> >
> > I'm new to searching and am trying to use Lucene to search English
> > & Arabic
> > documents.  I've got a bunch of questions (hopefully you'll find some
> > interesting!) and am hoping someone's gone through some of them and
> > has some
> > answers for me!
> >
> >
> >
> > First, do I have to worry about the Arabic Analyzer overwriting the
> > index
> > files of the English analyzer? (Or vice versa?)
> >
> > i.e. When I index documents a second time, will data be overwritten?
> >
>
> That depends whether you tell Lucene to create a new index or not.
> See the IndexWriter API for your options.
>
> >
> >
> > I could just store the index files for different languages in a
> > different
> > location, but it's good to know and I'd rather not if I don't have
> > to :)
> >
> >
> >
> > Also, on the same note, if I'm indexing documents that contain both
> > Arabic
> > and English, will the index files created by the English (or Arabic)
> > analyzer contain garbage or become corrupted because of the language
> > difference?
> >
>
> I don't know if it will be corrupted, but probably won't be all that
> useful, either. You may find the PerFieldAnalyzerWrapper to be helpful.
>
> >
> >
> > It is possible to index (using an English/Latin/Standard analyzer)
> > a file
> > that contains both english and arabic words, and expect the
> > searches in
> > English using the same analyzer to be valid, right?
>
> I should think so.  I don't recall running across this case too much,
> but do remember the reverse, Arabic files w/ some English and the
> Arabic analyzer usually just skipped over the English leaving it
> intact, thus searching those English terms in the Arabic index worked
> just fine.
>
> >
> >
> >
> > In an Arabic document with a single English word (the name of a
> > corporation,
> > for example) will the English word even be indexed and located by a
> > search?
> > I could test something like this with a small subset of documents,
> > but I
> > doubt the actual usefulness of a test with such a tiny (relatively
> > speaking!) amount of data.. I know we can tell Lucene to store the
> > full copy
> > of the document, but does that affect the index itself?
> >
> >
> >
> > Finally, and here's the tricky one, are searches that contain both
> > English
> > and Arabic words valid?  My limited understanding of the way search
> > engines
> > work tells me the search analyzes the context of words as well as
> > statistical data to decide the relevance of hits, is this still
> > valid for
> > multi-lingual searches?
> >
> >
>
> They are valid, just not sure how useful, but that is for your app to
> decide.  I guess if your users know both Arabic and English, it
> probably isn't a big deal.  Lucene just tries to match up what is in
> the query w/ what is in the index, so if you have validly analyzed
> tokens in both the query and the index then Lucene should find them.
>
> HTH,
> Grant
>
> --------------------------
> Grant Ingersoll
> Center for Natural Language Processing
> http://www.cnlp.org/tech/lucene.asp
>
> Read the Lucene Java FAQ at http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_118108_21487570.1185288765475--

From java-user-return-29337-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 24 14:57:37 2007
Return-Path: <java-user-return-29337-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98398 invoked from network); 24 Jul 2007 14:57:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jul 2007 14:57:37 -0000
Received: (qmail 75350 invoked by uid 500); 24 Jul 2007 14:57:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75096 invoked by uid 500); 24 Jul 2007 14:57:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75085 invoked by uid 99); 24 Jul 2007 14:57:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 07:57:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 07:57:29 -0700
Received: from compute2.internal (compute2.internal [10.202.2.42])
	by out1.messagingengine.com (Postfix) with ESMTP id 862C7ABC1
	for <java-user@lucene.apache.org>; Tue, 24 Jul 2007 10:57:08 -0400 (EDT)
Received: from web8.messagingengine.com ([10.202.2.217])
  by compute2.internal (MEProxy); Tue, 24 Jul 2007 10:57:08 -0400
Received: by web8.messagingengine.com (Postfix, from userid 99)
	id 6454C4AB2; Tue, 24 Jul 2007 10:57:08 -0400 (EDT)
Message-Id: <1185289028.14235.1201784149@webmail.messagingengine.com>
X-Sasl-Enc: 5oet/Gl3lBZO8ZwIPzReLmHjxBT3nY7ksyr4XhIR1SxK 1185289028
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <a8d89b3b0707240746p7a34b3b8qab0d0d5999319a42@mail.gmail.com>
Subject: Re: ArrayIndexOutOfBoundsException on TermScorer
In-Reply-To: <a8d89b3b0707240746p7a34b3b8qab0d0d5999319a42@mail.gmail.com>
Date: Tue, 24 Jul 2007 10:57:08 -0400
X-Virus-Checked: Checked by ClamAV on apache.org


That looks spooky.  It looks like either the norms array is not
large enough or that docID is too large.  Do you know how many
docs you have in your index?

Is this easy to reproduce, maybe on a smaller index?

There was a very large change recently (LUCENE-843) to speed
up indexing and it's possible that this introduced a bug.  Is
the build you are using after July 4?

Mike

"Rafael Rossini" <rafael.rossini@gmail.com> wrote:
> Hello all,
>=20
> I=B4m using solr in an app, but I=B4m getting an error that it might be a
> lucene
> problem. When I perform a simple query like q =3D brasil I=B4m getting th=
is
> exception:
>=20
> java.lang.ArrayIndexOutOfBoundsException: 1226511
>    at org.apache.lucene.search.TermScorer.score(TermScorer.java:74)
>    at org.apache.lucene.search.TermScorer.score(TermScorer.java:61)
>    at
>    org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:146)
>    at org.apache.lucene.search.Searcher.search(Searcher.java:118)
>    at org.apache.lucene.search.Searcher.search(Searcher.java:97)
>=20
> I=B4m using a very recent build from lucene. In the TermScorer.class, line
> 74
> is:
>=20
> score *=3D normDecoder[norms[doc] & 0xFF]; // normalize for field
>=20
> Thanks for any help, and sorry for cross-posting

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29338-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 24 14:58:15 2007
Return-Path: <java-user-return-29338-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98633 invoked from network); 24 Jul 2007 14:58:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jul 2007 14:58:15 -0000
Received: (qmail 77473 invoked by uid 500); 24 Jul 2007 14:58:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77445 invoked by uid 500); 24 Jul 2007 14:58:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77434 invoked by uid 99); 24 Jul 2007 14:58:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 07:58:08 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 07:58:06 -0700
Received: by ug-out-1314.google.com with SMTP id c2so204256ugf
        for <java-user@lucene.apache.org>; Tue, 24 Jul 2007 07:57:45 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=iy0QGsawPC4rDeMPefDBmF/63esmfnSMhZB/jac/3KuBTnmFI1P0xFCCKkJ/BYDceUdiUOb0vzKzQNAxN34vIeFRvoG1DDcZczpf3TsPVw3BD7PIbJD4FkcK7sKYtmBCRao1Q5/ry7JnJvbRRZ7QEwxet+zL+8z7jDbE7tRVbK4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=q2opxtW+30AbxJTvF0woAXqUqVdnGVBQIglCAGH8win+Zdkl3L3Z1GQnTeEUZHKHKDLOs8ZvoxCF5hSFGhJcwfR5i+dAVdtgOT97AiuzNg/nF59xcj4TmHusPHU3XLujWj8i8sOXR5zD8MsUt6WMzT13LwBzYkOHefKHh2O/sxk=
Received: by 10.82.112.3 with SMTP id k3mr3306912buc.1185289065136;
        Tue, 24 Jul 2007 07:57:45 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Tue, 24 Jul 2007 07:57:45 -0700 (PDT)
Message-ID: <359a92830707240757l65298ac6l8e480fb0854f33b6@mail.gmail.com>
Date: Tue, 24 Jul 2007 07:57:45 -0700
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Search for null
In-Reply-To: <11762894.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_118152_8375151.1185289065071"
References: <11746864.post@talk.nabble.com>
	 <0E1018D4-E9DB-424C-84F9-C72B1AA5D3B3@ehatchersolutions.com>
	 <46A50FBA.9000109@affinitycircles.com> <46A51638.1050708@ai.sri.com>
	 <1185277710.10469.26.camel@rosher.org> <11762894.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_118152_8375151.1185289065071
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Nobody can answer that question, you have to test in your particular
situation. Filters are very efficient to use once created, can be created
once and used often, etc.

Adding a special value to stand for an empty field is conceptually
simple, and queries are straight forward.

Unless you can demonstrate that there are speed issues, which method
you choose is largely a matter of taste. Spending valuable programming
time improving query response time by 0.000001% is...er...less than
a good expenditure of time.

Best
Erick

On 7/24/07, testn <test1@doramail.com> wrote:
>
>
> Would it be more efficient to create an additional inverted field where I
> assign a value to that field only when the field I would like to search is
> NULL?
>
>
> daniel rosher wrote:
> >
> > Perhaps you can use a filter in the following way.
> >
> > -Create a filter (via QueryFilter) that would contain all document that
> > do not have null values for the field
> > -flip the bits of the filter so that it now contains documents that have
> > null values for a field
> > -Use the filter in conjunction with subsequent queries.
> >
> > This would also help with performance as filters are simply bitsets and
> > can cheaply be stored, generated once and used often.
> >
> > Dan
> >
> > On Mon, 2007-07-23 at 13:57 -0700, Jay Yu wrote:
> >> If you want performance, a better way might be to assign some special
> >> string/value (if it's easy to create) to the missing field of docs and
> >> index the field without tokenizing it. Then you may search for that
> >> special value to find the docs.
> >>
> >> Jay
> >>
> >> Les Fletcher wrote:
> >> > Does this particular range query have any significant performance
> >> issues?
> >> >
> >> > Les
> >> >
> >> > Erik Hatcher wrote:
> >> >>
> >> >> On Jul 23, 2007, at 11:32 AM, testn wrote:
> >> >>> Is it possible to search for the document that specified field
> >> >>> doesn't exist
> >> >>> or such field value is null?
> >> >>
> >> >> This is from Solr, so I'm not sure off the top of my head if this
> mojo
> >> >> applies by itself, but a search for -fieldname:[* TO *] will result
> in
> >> >> all documents that do not have the specified field.
> >> >>
> >> >>     Erik
> >> >>
> >> >>
> >> >>
> ---------------------------------------------------------------------
> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >>
> >> >
> >> > ---------------------------------------------------------------------
> >> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >>
> >> <<This email has been scanned for virus and spam content>>
> > Daniel Rosher
> > Developer
> >
> >
> > d: 0207 3489 912
> > t: 0870 2020 121
> > f: 0870 2020 131
> > m:
> > http://www.hotonline.com/
> >
> >
> >
> >
> >
> >
> > - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
> -
> > - - - - - - - - - - - - - - - - - -
> > This message is sent in confidence for the addressee only. It may
> contain
> > privileged
> > information. The contents are not to be disclosed to anyone other than
> the
> > addressee.
> > Unauthorised recipients are requested to preserve this confidentiality
> and
> > to advise
> > us of any errors in transmission. Thank you.
> >
> > hotonline ltd is registered in England & Wales. Registered office: One
> > Canada Square,
> > Canary Wharf, London E14 5AP. Registered No: 1904765.
> >
> >
> > This message has been scanned for viruses by BlackSpider MailControl -
> > www.blackspider.com
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/Search-for-null-tf4130600.html#a11762894
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_118152_8375151.1185289065071--

From java-user-return-29339-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 24 15:33:24 2007
Return-Path: <java-user-return-29339-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95254 invoked from network); 24 Jul 2007 15:33:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jul 2007 15:33:22 -0000
Received: (qmail 81928 invoked by uid 500); 24 Jul 2007 15:33:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81892 invoked by uid 500); 24 Jul 2007 15:33:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81881 invoked by uid 99); 24 Jul 2007 15:33:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 08:33:14 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of rafael.rossini@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 08:33:12 -0700
Received: by ug-out-1314.google.com with SMTP id c2so211376ugf
        for <java-user@lucene.apache.org>; Tue, 24 Jul 2007 08:32:51 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ho4Mt89MnD/fxOrNU7tmrqJrbIQYcZpwc5jakc8xnTwuqTTOjek1kk2RL01gGrHjhaQ6twzh/HlgCmRz2PA0iWa7ePolTuh4AyEGu2DsVn5Sa09Nx7dAbmCblCOsFcWEWxy09ts8VQVFuGMdmUWNfsy33g5jW1/yy0xXUVO1R2c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=CcVM3EPYhHz7Om2AENAaae61G9kzyEVOVAKc8kcUeyrWfabT80Om8Pjtc4CXmmrfus4PVn+GESKE7IryNS5MmqqCmNo+UuRQ/F+6CRJxGx/QafzwQm7bloaPPKAFVGNpsGstX7DNMMNH0kDlJyQ33ftYW17nWjjV0Wo18jjBvB0=
Received: by 10.82.182.1 with SMTP id e1mr3341705buf.1185291170492;
        Tue, 24 Jul 2007 08:32:50 -0700 (PDT)
Received: by 10.82.113.12 with HTTP; Tue, 24 Jul 2007 08:32:50 -0700 (PDT)
Message-ID: <a8d89b3b0707240832l310b9475t77ae6b06e1d7521f@mail.gmail.com>
Date: Tue, 24 Jul 2007 12:32:50 -0300
From: "Rafael Rossini" <rafael.rossini@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: ArrayIndexOutOfBoundsException on TermScorer
In-Reply-To: <1185289028.14235.1201784149@webmail.messagingengine.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_146405_5644553.1185291170394"
References: <a8d89b3b0707240746p7a34b3b8qab0d0d5999319a42@mail.gmail.com>
	 <1185289028.14235.1201784149@webmail.messagingengine.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_146405_5644553.1185291170394
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

I don=B4t know the exact date of the build, but it is certainly before July=
 4,
and before the LUCENE-843 patch was committed. My index has 1.119.934 docs
on it and is about 8.2G.

I really don=B4t know how to reproduce this, the only query that I get this
error, so far, is "brasil"... and I don=B4t know about the docID being too
large, because in my app, I index daily more than 2000 docs, and I can
access the newer with no problems...

Do you have any ideia how can I debug better this, or how can I solve it?

Thanks a lot


On 7/24/07, Michael McCandless <lucene@mikemccandless.com> wrote:
>
>
> That looks spooky.  It looks like either the norms array is not
> large enough or that docID is too large.  Do you know how many
> docs you have in your index?
>
> Is this easy to reproduce, maybe on a smaller index?
>
> There was a very large change recently (LUCENE-843) to speed
> up indexing and it's possible that this introduced a bug.  Is
> the build you are using after July 4?
>
> Mike
>
> "Rafael Rossini" <rafael.rossini@gmail.com> wrote:
> > Hello all,
> >
> > I=B4m using solr in an app, but I=B4m getting an error that it might be=
 a
> > lucene
> > problem. When I perform a simple query like q =3D brasil I=B4m getting =
this
> > exception:
> >
> > java.lang.ArrayIndexOutOfBoundsException: 1226511
> >    at org.apache.lucene.search.TermScorer.score(TermScorer.java:74)
> >    at org.apache.lucene.search.TermScorer.score(TermScorer.java:61)
> >    at
> >    org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:146=
)
> >    at org.apache.lucene.search.Searcher.search(Searcher.java:118)
> >    at org.apache.lucene.search.Searcher.search(Searcher.java:97)
> >
> > I=B4m using a very recent build from lucene. In the TermScorer.class, l=
ine
> > 74
> > is:
> >
> > score *=3D normDecoder[norms[doc] & 0xFF]; // normalize for field
> >
> > Thanks for any help, and sorry for cross-posting
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_146405_5644553.1185291170394--

From java-user-return-29340-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 24 16:41:27 2007
Return-Path: <java-user-return-29340-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26659 invoked from network); 24 Jul 2007 16:41:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jul 2007 16:41:26 -0000
Received: (qmail 75814 invoked by uid 500); 24 Jul 2007 16:41:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75763 invoked by uid 500); 24 Jul 2007 16:41:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75752 invoked by uid 99); 24 Jul 2007 16:41:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 09:41:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [130.107.64.135] (HELO Balboa.AI.SRI.COM) (130.107.64.135)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 09:41:16 -0700
Received: from Balboa.AI.SRI.COM (localhost [127.0.0.1])
	by Balboa.AI.SRI.COM (8.11.7p2+Sun/8.10.1) with SMTP id l6OGet012964
	for <java-user@lucene.apache.org>; Tue, 24 Jul 2007 09:40:55 -0700 (PDT)
Received: from Salt.AI.SRI.COM ([130.107.65.211])
 by Balboa.AI.SRI.COM (SMSSMTP 4.1.9.35) with SMTP id M2007072409405502565
 for <java-user@lucene.apache.org>; Tue, 24 Jul 2007 09:40:55 -0700
Received: from localhost.ai.sri.com
	([127.0.0.1] helo=[130.107.65.150] ident=root)
	by Salt.AI.SRI.COM with asmtp (Exim 3.35 #1 (Debian))
	id 1IDNRP-0007jP-00
	for <java-user@lucene.apache.org>; Tue, 24 Jul 2007 09:40:55 -0700
Message-ID: <46A62B98.40602@ai.sri.com>
Date: Tue, 24 Jul 2007 09:40:56 -0700
From: Jay Yu <yu@AI.SRI.COM>
User-Agent: Thunderbird 2.0.0.5 (Windows/20070716)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Search for null
References: <11746864.post@talk.nabble.com> <0E1018D4-E9DB-424C-84F9-C72B1AA5D3B3@ehatchersolutions.com> <46A50FBA.9000109@affinitycircles.com>  <46A51638.1050708@ai.sri.com> <1185277710.10469.26.camel@rosher.org>
In-Reply-To: <1185277710.10469.26.camel@rosher.org>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org



daniel rosher wrote:
> Perhaps you can use a filter in the following way.
> 
> -Create a filter (via QueryFilter) that would contain all document that
> do not have null values for the field
Interesting: what does the QueryFilter look like? Isn't it just as hard 
as finding out what docs have the null values for the field?
I really like to know your trick here.
> -flip the bits of the filter so that it now contains documents that have
> null values for a field
> -Use the filter in conjunction with subsequent queries.
> 
> This would also help with performance as filters are simply bitsets and
> can cheaply be stored, generated once and used often.
> 
> Dan
> 
> On Mon, 2007-07-23 at 13:57 -0700, Jay Yu wrote:
>> If you want performance, a better way might be to assign some special 
>> string/value (if it's easy to create) to the missing field of docs and 
>> index the field without tokenizing it. Then you may search for that 
>> special value to find the docs.
>>
>> Jay
>>
>> Les Fletcher wrote:
>>> Does this particular range query have any significant performance issues?
>>>
>>> Les
>>>
>>> Erik Hatcher wrote:
>>>> On Jul 23, 2007, at 11:32 AM, testn wrote:
>>>>> Is it possible to search for the document that specified field 
>>>>> doesn't exist
>>>>> or such field value is null?
>>>> This is from Solr, so I'm not sure off the top of my head if this mojo 
>>>> applies by itself, but a search for -fieldname:[* TO *] will result in 
>>>> all documents that do not have the specified field.
>>>>
>>>>     Erik
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>> <<This email has been scanned for virus and spam content>>
> Daniel Rosher
> Developer
> 
> 
> d: 0207 3489 912
> t: 0870 2020 121
> f: 0870 2020 131
> m: 
> http://www.hotonline.com/
> 
> 
> 
> 
> 
> 
> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
> This message is sent in confidence for the addressee only. It may contain privileged 
> information. The contents are not to be disclosed to anyone other than the addressee. 
> Unauthorised recipients are requested to preserve this confidentiality and to advise 
> us of any errors in transmission. Thank you.
> 
> hotonline ltd is registered in England & Wales. Registered office: One Canada Square, 
> Canary Wharf, London E14 5AP. Registered No: 1904765.
> 
> 
> This message has been scanned for viruses by BlackSpider MailControl - www.blackspider.com
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29341-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 24 16:46:39 2007
Return-Path: <java-user-return-29341-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28987 invoked from network); 24 Jul 2007 16:46:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jul 2007 16:46:37 -0000
Received: (qmail 89831 invoked by uid 500); 24 Jul 2007 16:46:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89794 invoked by uid 500); 24 Jul 2007 16:46:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89783 invoked by uid 99); 24 Jul 2007 16:46:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 09:46:32 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [209.85.162.180] (HELO el-out-1112.google.com) (209.85.162.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 09:46:30 -0700
Received: by el-out-1112.google.com with SMTP id y26so61356ele
        for <java-user@lucene.apache.org>; Tue, 24 Jul 2007 09:46:09 -0700 (PDT)
Received: by 10.142.51.4 with SMTP id y4mr343788wfy.1185295568266;
        Tue, 24 Jul 2007 09:46:08 -0700 (PDT)
Received: by 10.143.39.9 with HTTP; Tue, 24 Jul 2007 09:46:08 -0700 (PDT)
Message-ID: <7cbc67ff0707240946k785d66dbi24af8ac3a1a34c92@mail.gmail.com>
Date: Tue, 24 Jul 2007 22:16:08 +0530
From: "Harini Raghavan" <harini.raghavan@insideview.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene 2.2 + Not Merging Segments
In-Reply-To: <1185217481.2207.1201623403@webmail.messagingengine.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_133164_10747247.1185295568257"
References: <7cbc67ff0707231001tf8a9068vc93dd321eeb7dfdb@mail.gmail.com>
	 <1185217481.2207.1201623403@webmail.messagingengine.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_133164_10747247.1185295568257
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I figured out the problem. The issue had nothing to do with Lucene 2.2. I
had accidentally reset the default mergeFactor to 1000. This was the reason
it was not merging the segments. With the default mergeFactor, the indexing
is working perfectly fine.

Thanks,
Harini

On 7/24/07, Michael McCandless <lucene@mikemccandless.com> wrote:
>
>
> This is spooky.  Could you provide more details about how you are using
> IndexWriter?  Are you changing "max buffered docs" from the default?
>
> Also, can you call writer.setInfoStream(System.out), capture that log, and
> post it?
>
> Mike
>
> "Harini Raghavan" <harini.raghavan@insideview.com> wrote:
> > Hi All,
> >
> > I just upgraded my application to use lucene 2.2. Prior to this, I was
> using
> > lucene 1.9.1 and the addDocument method in the IndexWriter used to keep
> > merging smaller segments while adding new documents depending on the
> > mergeFactor. I was using the default mergeFactor settings. But after the
> > upgrade, when I add documents, every time it is creating a new segment
> and
> > not merging the older ones. Within 2 hours of running, it had created
> over
> > 1000 segments. I verified the IndexWriter in the new source and it
> seemed to
> > me that there is no change to the default values.
> >
> > Has anything else changed that would affect the
> > IndexWriter.addDocumentbehaviour? Can someone shed some light on this.
> >
> > Thanks,
> > Harini
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_133164_10747247.1185295568257--

From java-user-return-29342-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 24 16:55:07 2007
Return-Path: <java-user-return-29342-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33619 invoked from network); 24 Jul 2007 16:55:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jul 2007 16:55:05 -0000
Received: (qmail 6359 invoked by uid 500); 24 Jul 2007 16:54:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6309 invoked by uid 500); 24 Jul 2007 16:54:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6298 invoked by uid 99); 24 Jul 2007 16:54:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 09:54:55 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of rafael.rossini@gmail.com designates 209.85.134.186 as permitted sender)
Received: from [209.85.134.186] (HELO mu-out-0910.google.com) (209.85.134.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 09:54:53 -0700
Received: by mu-out-0910.google.com with SMTP id g7so2436975muf
        for <java-user@lucene.apache.org>; Tue, 24 Jul 2007 09:54:31 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Ovsn/Z8MIOF3blS1fvBxobLddNSTRikxAUciBUAM5Bqy7WSucK30WjKX4uq4gg/tIzT6jdBYc2xP0ixFwgpQspFlkEK/hHTYu04spJN8P2ljagDaRXJR0WOPoB76hzE50wfx+y5xQWKEfy2bv5zb2v9j4hnB3gPRi32ymax7y3c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=MzF1nmQDyQGK3omMZrT6xuNmJckPlMZ+nTa31MKx6gcxy2osMGt9ZtdBoZ+0p+9lbIJ8GuXfKPkhFmRu7xrH+X+7WdOUE8l5sxunpE1RmCy4T+XSghUQ4Ro92c8RZ88SR0qYvCCxJc0IwcahrGCtWCZsyNL7pJFkNh3l9uQo9RM=
Received: by 10.82.186.5 with SMTP id j5mr3443052buf.1185296070643;
        Tue, 24 Jul 2007 09:54:30 -0700 (PDT)
Received: by 10.82.113.12 with HTTP; Tue, 24 Jul 2007 09:54:30 -0700 (PDT)
Message-ID: <a8d89b3b0707240954x6a06f96cv7063c7b31810b32e@mail.gmail.com>
Date: Tue, 24 Jul 2007 13:54:30 -0300
From: "Rafael Rossini" <rafael.rossini@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: ArrayIndexOutOfBoundsException on TermScorer
In-Reply-To: <a8d89b3b0707240832l310b9475t77ae6b06e1d7521f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_147487_17226526.1185296070611"
References: <a8d89b3b0707240746p7a34b3b8qab0d0d5999319a42@mail.gmail.com>
	 <1185289028.14235.1201784149@webmail.messagingengine.com>
	 <a8d89b3b0707240832l310b9475t77ae6b06e1d7521f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_147487_17226526.1185296070611
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

I did a litle debug and found that in the TermScorer, the byte[] norms has
size =3D 1.119.933, wich is the number of docs on my index, and there is a
docID =3D 1226511, that is if the "doc" variable in the method is the docID=
.

I tried to access this document with reader.document() and got a *
java.io.IOException*: read past EOF.

Any ideias how to fix or delete this document?


On 7/24/07, Rafael Rossini <rafael.rossini@gmail.com> wrote:
>
> I don=B4t know the exact date of the build, but it is certainly before Ju=
ly
> 4, and before the LUCENE-843 patch was committed. My index has 1.119.934d=
ocs on it and is about
> 8.2G.
>
> I really don=B4t know how to reproduce this, the only query that I get th=
is
> error, so far, is "brasil"... and I don=B4t know about the docID being to=
o
> large, because in my app, I index daily more than 2000 docs, and I can
> access the newer with no problems...
>
> Do you have any ideia how can I debug better this, or how can I solve it?
>
> Thanks a lot
>
>
> On 7/24/07, Michael McCandless <lucene@mikemccandless.com> wrote:
> >
> >
> > That looks spooky.  It looks like either the norms array is not
> > large enough or that docID is too large.  Do you know how many
> > docs you have in your index?
> >
> > Is this easy to reproduce, maybe on a smaller index?
> >
> > There was a very large change recently (LUCENE-843) to speed
> > up indexing and it's possible that this introduced a bug.  Is
> > the build you are using after July 4?
> >
> > Mike
> >
> > "Rafael Rossini" <rafael.rossini@gmail.com> wrote:
> > > Hello all,
> > >
> > > I=B4m using solr in an app, but I=B4m getting an error that it might =
be a
> > > lucene
> > > problem. When I perform a simple query like q =3D brasil I=B4m gettin=
g
> > this
> > > exception:
> > >
> > > java.lang.ArrayIndexOutOfBoundsException: 1226511
> > >    at org.apache.lucene.search.TermScorer.score (TermScorer.java:74)
> > >    at org.apache.lucene.search.TermScorer.score(TermScorer.java:61)
> > >    at
> > >    org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java
> > :146)
> > >    at org.apache.lucene.search.Searcher.search (Searcher.java:118)
> > >    at org.apache.lucene.search.Searcher.search(Searcher.java:97)
> > >
> > > I=B4m using a very recent build from lucene. In the TermScorer.class,
> > line
> > > 74
> > > is:
> > >
> > > score *=3D normDecoder[norms[doc] & 0xFF]; // normalize for field
> > >
> > > Thanks for any help, and sorry for cross-posting
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_147487_17226526.1185296070611--

From java-user-return-29343-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 24 17:04:17 2007
Return-Path: <java-user-return-29343-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39006 invoked from network); 24 Jul 2007 17:04:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jul 2007 17:04:15 -0000
Received: (qmail 30213 invoked by uid 500); 24 Jul 2007 17:04:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30173 invoked by uid 500); 24 Jul 2007 17:04:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30162 invoked by uid 99); 24 Jul 2007 17:04:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 10:04:10 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.162.224 as permitted sender)
Received: from [64.233.162.224] (HELO nz-out-0506.google.com) (64.233.162.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 10:04:08 -0700
Received: by nz-out-0506.google.com with SMTP id i28so1282523nzi
        for <java-user@lucene.apache.org>; Tue, 24 Jul 2007 10:03:47 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=RSkRE4dA2xXkj4YdbVF6ueUTVcCUPiAXABofGnxuu1sI+JZNSvTPUsy/XvOoulL78rrG2qzcGcXZlVtbJHr8zsoo8XrQyTraCC+VEneEltC37deeaqEYUnAncWpLxqwV6tlrJ74N8EXK5frkPfIkYJCP2+hblesTO8Vkwb+qjVs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=aJ9959OBh0AMGtwX2gZyd8O07Z/yNUBa0mYE/Fjjm5CpksLwnAlKXKP1txbBfV0QCE+9M91Y70Vk+MFYgt2tJlOReAA6QvjFiiY/CnW+lVua3f/UK5UjBNaR7Pc0G7tKfYNpihrX4BDdwAzNmLxdQZUi/7cFy3WQNUYp2+zFF+I=
Received: by 10.142.14.20 with SMTP id 20mr354896wfn.1185296627131;
        Tue, 24 Jul 2007 10:03:47 -0700 (PDT)
Received: by 10.143.3.1 with HTTP; Tue, 24 Jul 2007 10:03:47 -0700 (PDT)
Message-ID: <c68e39170707241003j58906483o27d6d0b2c5e3b6f8@mail.gmail.com>
Date: Tue, 24 Jul 2007 13:03:47 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: ArrayIndexOutOfBoundsException on TermScorer
In-Reply-To: <a8d89b3b0707240954x6a06f96cv7063c7b31810b32e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <a8d89b3b0707240746p7a34b3b8qab0d0d5999319a42@mail.gmail.com>
	 <1185289028.14235.1201784149@webmail.messagingengine.com>
	 <a8d89b3b0707240832l310b9475t77ae6b06e1d7521f@mail.gmail.com>
	 <a8d89b3b0707240954x6a06f96cv7063c7b31810b32e@mail.gmail.com>
X-Google-Sender-Auth: 00db32059e2d2b6c
X-Virus-Checked: Checked by ClamAV on apache.org

On 7/24/07, Rafael Rossini <rafael.rossini@gmail.com> wrote:
> I did a litle debug and found that in the TermScorer, the byte[] norms has
> size = 1.119.933, wich is the number of docs on my index, and there is a
> docID = 1226511, that is if the "doc" variable in the method is the docID.
>
> I tried to access this document with reader.document() and got a *
> java.io.IOException*: read past EOF.
>
> Any ideias how to fix or delete this document?

That document does not exist (docids are just the index into the array
of documents, which only goes up to 1.119.933 (if that's maxDoc()).
So the big question is how the "doc" variable got set to 1226511.

It sounds like perhaps index corruption to me.  The question is if
it's due to a bug or a hardware fault.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29344-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 24 17:45:40 2007
Return-Path: <java-user-return-29344-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57945 invoked from network); 24 Jul 2007 17:45:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jul 2007 17:45:38 -0000
Received: (qmail 13374 invoked by uid 500); 24 Jul 2007 17:45:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13345 invoked by uid 500); 24 Jul 2007 17:45:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13333 invoked by uid 99); 24 Jul 2007 17:45:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 10:45:32 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of rafael.rossini@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 10:45:30 -0700
Received: by nf-out-0910.google.com with SMTP id d3so147667nfc
        for <java-user@lucene.apache.org>; Tue, 24 Jul 2007 10:45:08 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=qqrmeWjx0fu7JIz30FS2Jh1bzx7Eq66j2j8s/fstBY4TrqkxLZ9HK7kDT6H0S0m/7yjgZ/q35bFvRvVv7vVTdBkP2JOOA937Gqr6VxgARoHjMGxX+7TzgvF8EFZIFGkwUc3LkXeAGvlojd11VkrCwlGhs7LqFUNsYYOIgHuDKlc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=VidUzAOSel0hrK0wFPXNJBp1gdeKOTAs7n698/JFQ8f4Ld3wzRaWXE/fVoEtNyvEGheCVPu0mmosaDN1/KHOITbcFGFEBDgTn0TJHWsFxB3BIOjEt74TWf1ErbkwZd419pKkgRVbzPFO+oIL2grU8lfarJtQwVZvXWBY5l6Omso=
Received: by 10.82.190.2 with SMTP id n2mr3473342buf.1185299107106;
        Tue, 24 Jul 2007 10:45:07 -0700 (PDT)
Received: by 10.82.113.12 with HTTP; Tue, 24 Jul 2007 10:45:07 -0700 (PDT)
Message-ID: <a8d89b3b0707241045y788da938r90130c5c29980ae7@mail.gmail.com>
Date: Tue, 24 Jul 2007 14:45:07 -0300
From: "Rafael Rossini" <rafael.rossini@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: ArrayIndexOutOfBoundsException on TermScorer
In-Reply-To: <c68e39170707241003j58906483o27d6d0b2c5e3b6f8@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_148293_32478103.1185299107027"
References: <a8d89b3b0707240746p7a34b3b8qab0d0d5999319a42@mail.gmail.com>
	 <1185289028.14235.1201784149@webmail.messagingengine.com>
	 <a8d89b3b0707240832l310b9475t77ae6b06e1d7521f@mail.gmail.com>
	 <a8d89b3b0707240954x6a06f96cv7063c7b31810b32e@mail.gmail.com>
	 <c68e39170707241003j58906483o27d6d0b2c5e3b6f8@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_148293_32478103.1185299107027
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Got it,

    I don=B4t have a clue if this corruption was caused by hardware failure=
,
but that is possible because we suffer with a lot of power failures from
time to time. But the thing is that I=B4ve been using lucene for a long tim=
e
and I never got this kind of exception.

    The thing is that I=B4d like to delete this document, but I get now
another exception:

Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: Array
index out of range: 106577
   at org.apache.lucene.util.BitVector.set(BitVector.java:53)
   at org.apache.lucene.index.SegmentReader.doDelete(SegmentReader.java:301=
)
   at org.apache.lucene.index.IndexReader.deleteDocument(IndexReader.java
:674)
   at org.apache.lucene.index.MultiReader.doDelete(MultiReader.java:125)
   at org.apache.lucene.index.IndexReader.deleteDocument(IndexReader.java
:674)
   at teste.DeleteError.main(DeleteError.java:9)

Is there a way of fixing my index without having to rebuild it all from the
ground? It takes lots of hours to re-index my whole collection.

On 7/24/07, Yonik Seeley <yonik@apache.org> wrote:
>
> On 7/24/07, Rafael Rossini <rafael.rossini@gmail.com> wrote:
> > I did a litle debug and found that in the TermScorer, the byte[] norms
> has
> > size =3D 1.119.933, wich is the number of docs on my index, and there i=
s a
> > docID =3D 1226511, that is if the "doc" variable in the method is the
> docID.
> >
> > I tried to access this document with reader.document() and got a *
> > java.io.IOException*: read past EOF.
> >
> > Any ideias how to fix or delete this document?
>
> That document does not exist (docids are just the index into the array
> of documents, which only goes up to 1.119.933 (if that's maxDoc()).
> So the big question is how the "doc" variable got set to 1226511.
>
> It sounds like perhaps index corruption to me.  The question is if
> it's due to a bug or a hardware fault.
>
> -Yonik
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_148293_32478103.1185299107027--

From java-user-return-29345-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 24 19:43:55 2007
Return-Path: <java-user-return-29345-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97343 invoked from network); 24 Jul 2007 19:43:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jul 2007 19:43:54 -0000
Received: (qmail 18004 invoked by uid 500); 24 Jul 2007 19:43:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17974 invoked by uid 500); 24 Jul 2007 19:43:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17963 invoked by uid 99); 24 Jul 2007 19:43:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 12:43:41 -0700
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of askar.zaidi@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 12:43:38 -0700
Received: by ug-out-1314.google.com with SMTP id c2so261213ugf
        for <java-user@lucene.apache.org>; Tue, 24 Jul 2007 12:43:16 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=IH5DvEn3+nc7+IGcWa53GY9Bp4SxvQFylHxE0ZM/6LgoTrsowEOI+27pZcdvfkQBCV3/SMTf3rMGmZUbaNeOSzmXcs2MhwP+B69zB6FwQAeCHYrzBQ/O+YWMFuSgX/TVV1aHDRxCyo6qbZtjHCAZOeYd/leifGH2cfI+1t3t6eQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=orBK4u58XVDwaIS8fbID6fi2QNTKMYFEMWJjqiTk5NBzWJP12PyMkZH72dhmYG3dILs8ewaaD8kXGyDRIU0bPcyeS/mHfrrm8bXu1/uLAqzh5bicuKuW0Ea8ND1uACCAxAadbVw32LnfzJYkQEAzafNYU9SucW2foXqbOw4yvII=
Received: by 10.67.15.15 with SMTP id s15mr829804ugi.1185306196638;
        Tue, 24 Jul 2007 12:43:16 -0700 (PDT)
Received: by 10.66.251.15 with HTTP; Tue, 24 Jul 2007 12:43:16 -0700 (PDT)
Message-ID: <c0c0e1d40707241243y5ddfd5fai10381873a2d2bd64@mail.gmail.com>
Date: Tue, 24 Jul 2007 15:43:16 -0400
From: "Askar Zaidi" <askar.zaidi@gmail.com>
To: java-user@lucene.apache.org
Subject: Fine Tuning Lucene implementation
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_36541_15986195.1185306196600"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_36541_15986195.1185306196600
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hey Guys,

I just finished up using Lucene in my application. I have data in a database
, so while indexing I extract this data from the database and pump it into
the index. Specifically , I have the following data in the index:

<itemID> <tags> <title> <summary> <contents>

where itemID is just a number (primary key in the DB)
tags : text
titie: text
summary: text
contents: Huge text (text extracted from files: pdfs, docs etc).

Now while running a search query I realized that the response time increases
in a linear fashion as the number of <itemID> increase in the DB.

If I have 50 items, its 8 seconds
100 items, its 17 seconds.
300+ items, its 60 seconds and maybe more.

In a perfect world, I'd like to search on 300+ items within 10-15 seconds.
Can anyone give me tips to fine tune lucene ?

Heres a code snippet:

sql query = "SELECT itemID from items where creator = 'askar' ;

--execute query--

while(rs.next()){

score = doTagSearch(askar,text,itemID);
scoreTitle = doTitleSearch(askar,text,itemID);
scoreSummary = doSummarySearch(askar,text,itemID);

----

}

So this code asks Lucene to search for the "text" in the itemID passed.
itemID is already indexed. The while loop will run 300 times if there are
300 items....that gets slow...what can I do here ??

thanks for the replies,

AZ

------=_Part_36541_15986195.1185306196600--

From java-user-return-29346-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 24 20:00:19 2007
Return-Path: <java-user-return-29346-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4136 invoked from network); 24 Jul 2007 20:00:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jul 2007 20:00:18 -0000
Received: (qmail 56169 invoked by uid 500); 24 Jul 2007 20:00:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56133 invoked by uid 500); 24 Jul 2007 20:00:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56122 invoked by uid 99); 24 Jul 2007 20:00:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 13:00:13 -0700
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of askar.zaidi@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 13:00:11 -0700
Received: by ug-out-1314.google.com with SMTP id c2so264468ugf
        for <java-user@lucene.apache.org>; Tue, 24 Jul 2007 12:59:50 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=iR0wikma77widZlPn/zx++pWhqshZ4k/DbXSZRgIonufPpIaKkUS+0dkGv9MX9pK0oigSm3XMi56u6uAS0pNuqAYK84Fmfvk5K310J+4MHKFR/J2YLJDfHpdGKuxsosCmJx3+ET7FbOSsmT0etOc4uQZJKuTBdy8dc6W5fFJSjE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=lXkLueNC0mbQcoCUtF4EfkYmgUjZX4qy+WpFiS/o5oz+LTwV70LKgZ+hHo87nWGTh6oCCHgf500uq7HsVvq02HGxUSkUGvogDHkhOE8CTPZmUOplx5XQNQ6z9E3WtSZYlWcs9Z37vyqwvZJoE6VzzMZ8neB405fVoyS5t+OdNEk=
Received: by 10.66.244.10 with SMTP id r10mr841779ugh.1185307190167;
        Tue, 24 Jul 2007 12:59:50 -0700 (PDT)
Received: by 10.66.251.15 with HTTP; Tue, 24 Jul 2007 12:59:50 -0700 (PDT)
Message-ID: <c0c0e1d40707241259i144e428dxfefc7a6c173bb29c@mail.gmail.com>
Date: Tue, 24 Jul 2007 15:59:50 -0400
From: "Askar Zaidi" <askar.zaidi@gmail.com>
To: java-user@lucene.apache.org
Subject: FieldCache for Search
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_36929_6562006.1185307190122"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_36929_6562006.1185307190122
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hey Guys,

>From what I understand, FieldCache is used to store only the field required
for search. I am using a Document object and then using doc.get("item"). One
of my fields is HUGE, so using Document will slow things down.

How can I use FieldCache ? an example ?

thanks,
AZ

------=_Part_36929_6562006.1185307190122--

From java-user-return-29347-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 24 20:01:47 2007
Return-Path: <java-user-return-29347-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4574 invoked from network); 24 Jul 2007 20:01:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jul 2007 20:01:45 -0000
Received: (qmail 59205 invoked by uid 500); 24 Jul 2007 20:01:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59176 invoked by uid 500); 24 Jul 2007 20:01:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59165 invoked by uid 99); 24 Jul 2007 20:01:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 13:01:40 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of James_Shaw@intuit.com designates 12.149.175.12 as permitted sender)
Received: from [12.149.175.12] (HELO mail2.intuit.com) (12.149.175.12)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 13:01:38 -0700
DomainKey-Signature: s=default; d=intuit.com; c=nofws; q=dns; b=uQAKVO2+h6tX/2nu0xQVGViLvN5qacMsgDJtrq2WjQv2XMI2QZI5t97n00w/P2yVQBVimpJ8Y7HyMRcY2xWViTtdZynFuCR9bz8jP0BKt9IPrIK/1n4GQgrncYpva99D;
X-SBRS: None
X-IronPort-AV: E=Sophos;i="4.16,575,1175497200"; 
   d="scan'208,217";a="300192770"
Received: from sdgexbh04.corp.intuit.net ([172.17.135.78])
  by mail2.sdg.ie.intuit.com with ESMTP; 24 Jul 2007 13:01:18 -0700
Received: from SDGEXEVS01.corp.intuit.net ([172.17.135.183]) by sdgexbh04.corp.intuit.net with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 24 Jul 2007 13:01:17 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C7CE2D.65BEC021"
Subject: Lucene and Eastern languages (Japanese, Korean and Chinese)
Date: Tue, 24 Jul 2007 13:01:17 -0700
Message-ID: <95570511135B1042A7B5A3269303107005DAEE50@SDGEXEVS01.corp.intuit.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene and Eastern languages (Japanese, Korean and Chinese)
Thread-Index: AcfOLWVsiiR1eKrdQ0Sr6XERl/owQw==
From: "Shaw, James" <James_Shaw@intuit.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 24 Jul 2007 20:01:17.0756 (UTC) FILETIME=[65A5BFC0:01C7CE2D]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C7CE2D.65BEC021
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi, guys,
I found Analyzers for Japanese, Korean and Chinese, but not stemmers;
the Snowball stemmers only include European languages.  Does stemming
not make sense for ideograph-based languages (i.e., no stemming is
needed for Japanese, Korean and Chinese)?

Also for spell checking, does the default Lucene SpellChecker work for
Japanese, Korean and Chinese?  Does edit distance make sense for these
languages?

What other gotcha's can you guys think of when making Lucene work with
foreign languages, besides analyzer, stemmer and spell checking?  Thanks
in advance for your help.

------_=_NextPart_001_01C7CE2D.65BEC021--

From java-user-return-29348-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 24 20:32:10 2007
Return-Path: <java-user-return-29348-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12603 invoked from network); 24 Jul 2007 20:32:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jul 2007 20:32:06 -0000
Received: (qmail 92949 invoked by uid 500); 24 Jul 2007 20:31:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92770 invoked by uid 500); 24 Jul 2007 20:31:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92251 invoked by uid 99); 24 Jul 2007 20:31:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 13:31:54 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of askar.zaidi@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 13:31:51 -0700
Received: by ug-out-1314.google.com with SMTP id c2so270549ugf
        for <java-user@lucene.apache.org>; Tue, 24 Jul 2007 13:31:30 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=GSrcUR9U9nv4fZ6tLRPzcbJ6iUew5v7G24JeccmFrAzLt24/LREOsbLzP5ni6U70EkUwbrpT/qPU6D0HkmmyrkxAIFT8Dm2vuxqGm6Fi+JHoP2CGwBCVxDVkv0UXDv8pVyRuoMYGd2YnJyqwEqdfAfk72Xpbl4DA9SsjYIjCpFg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=C6bLQMypUZQ9cvtgDj85s8L5Dd+6WqNot3+FbH/mIzroAiw9SEuWiP7/lgeNzTQAGqVJ37TcLhVxuW9Q4jG0t//X+s5ZpMh9YpQ6iUS5PKPFFkvZz0uhCIFc0c+TjqEpEEmzysL0Yf+5szjwEtT/dpsjO7n+VCIMq7tyfdpPZL8=
Received: by 10.66.222.19 with SMTP id u19mr836690ugg.1185309090091;
        Tue, 24 Jul 2007 13:31:30 -0700 (PDT)
Received: by 10.66.251.15 with HTTP; Tue, 24 Jul 2007 13:31:30 -0700 (PDT)
Message-ID: <c0c0e1d40707241331i7be68a3dr27924a8e4f186427@mail.gmail.com>
Date: Tue, 24 Jul 2007 16:31:30 -0400
From: "Askar Zaidi" <askar.zaidi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Fine Tuning Lucene implementation
In-Reply-To: <c0c0e1d40707241243y5ddfd5fai10381873a2d2bd64@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_37553_6225040.1185309090048"
References: <c0c0e1d40707241243y5ddfd5fai10381873a2d2bd64@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_37553_6225040.1185309090048
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I have 512MB RAM allocated to JVM Heap. If I double my system RAM from 768MB
to say 2GB or so, and give JVM 1.5GB Heap space, will I get quicker results
?

Can I expect results which take 1 minute to be returned in 30 seconds with
more RAM ? Should I also get a more powerful CPU ? A real server class
machine ?

I have also done some of the optimizations that are mentioned on the Lucene
website.

thanks,
AZ

On 7/24/07, Askar Zaidi <askar.zaidi@gmail.com> wrote:
>
> Hey Guys,
>
> I just finished up using Lucene in my application. I have data in a
> database , so while indexing I extract this data from the database and pump
> it into the index. Specifically , I have the following data in the index:
>
> <itemID> <tags> <title> <summary> <contents>
>
> where itemID is just a number (primary key in the DB)
> tags : text
> titie: text
> summary: text
> contents: Huge text (text extracted from files: pdfs, docs etc).
>
> Now while running a search query I realized that the response time
> increases in a linear fashion as the number of <itemID> increase in the DB.
>
> If I have 50 items, its 8 seconds
> 100 items, its 17 seconds.
> 300+ items, its 60 seconds and maybe more.
>
> In a perfect world, I'd like to search on 300+ items within 10-15 seconds.
> Can anyone give me tips to fine tune lucene ?
>
> Heres a code snippet:
>
> sql query = "SELECT itemID from items where creator = 'askar' ;
>
> --execute query--
>
> while(rs.next()){
>
> score = doTagSearch(askar,text,itemID);
> scoreTitle = doTitleSearch(askar,text,itemID);
> scoreSummary = doSummarySearch(askar,text,itemID);
>
> ----
>
> }
>
> So this code asks Lucene to search for the "text" in the itemID passed.
> itemID is already indexed. The while loop will run 300 times if there are
> 300 items....that gets slow...what can I do here ??
>
> thanks for the replies,
>
> AZ
>

------=_Part_37553_6225040.1185309090048--

From java-user-return-29349-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 24 21:22:24 2007
Return-Path: <java-user-return-29349-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24482 invoked from network); 24 Jul 2007 21:22:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jul 2007 21:22:22 -0000
Received: (qmail 52867 invoked by uid 500); 24 Jul 2007 21:22:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52828 invoked by uid 500); 24 Jul 2007 21:22:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52817 invoked by uid 99); 24 Jul 2007 21:22:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 14:22:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.83] (HELO spunkymail-a1.g.dreamhost.com) (208.97.132.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 14:22:15 -0700
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a1.g.dreamhost.com (Postfix) with ESMTP id BB9A6FF111
	for <java-user@lucene.apache.org>; Tue, 24 Jul 2007 14:21:54 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <c0c0e1d40707241331i7be68a3dr27924a8e4f186427@mail.gmail.com>
References: <c0c0e1d40707241243y5ddfd5fai10381873a2d2bd64@mail.gmail.com> <c0c0e1d40707241331i7be68a3dr27924a8e4f186427@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <B6CD8741-E8F5-4D00-8579-DDD8944469AA@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Fine Tuning Lucene implementation
Date: Tue, 24 Jul 2007 17:21:47 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Where are you getting your numbers from?  That is, where are your  
timers?  Are you timing the rs.next() loop, or the individual calls  
to Lucene?  What do the getXXXXX methods look like?  How big are your  
queries?  How big is your index?

Essentially, we need more info to really help you.  From what I can  
tell, you are generating 3 different Lucene queries for each record  
in the database.  Frankly, I surprised your slowdown is only linear.

On Jul 24, 2007, at 4:31 PM, Askar Zaidi wrote:

> I have 512MB RAM allocated to JVM Heap. If I double my system RAM  
> from 768MB
> to say 2GB or so, and give JVM 1.5GB Heap space, will I get quicker  
> results
> ?
>
> Can I expect results which take 1 minute to be returned in 30  
> seconds with
> more RAM ? Should I also get a more powerful CPU ? A real server class
> machine ?
>
> I have also done some of the optimizations that are mentioned on  
> the Lucene
> website.
>
> thanks,
> AZ
>
> On 7/24/07, Askar Zaidi <askar.zaidi@gmail.com> wrote:
>>
>> Hey Guys,
>>
>> I just finished up using Lucene in my application. I have data in a
>> database , so while indexing I extract this data from the database  
>> and pump
>> it into the index. Specifically , I have the following data in the  
>> index:
>>
>> <itemID> <tags> <title> <summary> <contents>
>>
>> where itemID is just a number (primary key in the DB)
>> tags : text
>> titie: text
>> summary: text
>> contents: Huge text (text extracted from files: pdfs, docs etc).
>>
>> Now while running a search query I realized that the response time
>> increases in a linear fashion as the number of <itemID> increase  
>> in the DB.
>>
>> If I have 50 items, its 8 seconds
>> 100 items, its 17 seconds.
>> 300+ items, its 60 seconds and maybe more.
>>
>> In a perfect world, I'd like to search on 300+ items within 10-15  
>> seconds.
>> Can anyone give me tips to fine tune lucene ?
>>
>> Heres a code snippet:
>>
>> sql query = "SELECT itemID from items where creator = 'askar' ;
>>
>> --execute query--
>>
>> while(rs.next()){
>>
>> score = doTagSearch(askar,text,itemID);
>> scoreTitle = doTitleSearch(askar,text,itemID);
>> scoreSummary = doSummarySearch(askar,text,itemID);
>>
>> ----
>>
>> }
>>
>> So this code asks Lucene to search for the "text" in the itemID  
>> passed.
>> itemID is already indexed. The while loop will run 300 times if  
>> there are
>> 300 items....that gets slow...what can I do here ??
>>
>> thanks for the replies,
>>
>> AZ
>>

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

Read the Lucene Java FAQ at http://wiki.apache.org/lucene-java/LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29350-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 24 21:29:06 2007
Return-Path: <java-user-return-29350-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26966 invoked from network); 24 Jul 2007 21:29:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jul 2007 21:29:05 -0000
Received: (qmail 63574 invoked by uid 500); 24 Jul 2007 21:29:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63544 invoked by uid 500); 24 Jul 2007 21:29:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63533 invoked by uid 99); 24 Jul 2007 21:29:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 14:29:00 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of askar.zaidi@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 14:28:58 -0700
Received: by ug-out-1314.google.com with SMTP id c2so280890ugf
        for <java-user@lucene.apache.org>; Tue, 24 Jul 2007 14:28:36 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=IKsF9I7qpGob6Ll0AbEZC6QGEOoe+aDHST56UCKtENC7CrxIqKFeL8Ac4S7CUxn/cwRpKxP25gumDGNNru86uX08KIilX6y2eG67dgH+cBaBrFfxjY44FCmZzi8HtzLOO7em+6Ii5vmgIO3rhI7T53SzcV7y7vzn/a20aiv16sM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=dgOhZw+tQ5fB6UOwWasZHdwcW+L/kmYR5r/yeW1GXVAlafYDDriqUuPy84yDEkOGd+LFWEIxPkX9OCjyeHo7UpvZXnPcO+oUuUdSP20ZuQm2Q+n4LFdZ7Vj6eh2r+HjjKD1ApLmhkOceCevxMjFnqUBUMBafhXp1cnlMSx38+2w=
Received: by 10.67.119.9 with SMTP id w9mr873569ugm.1185312516855;
        Tue, 24 Jul 2007 14:28:36 -0700 (PDT)
Received: by 10.66.251.15 with HTTP; Tue, 24 Jul 2007 14:28:36 -0700 (PDT)
Message-ID: <c0c0e1d40707241428r44ee7926q7f9199687650baf3@mail.gmail.com>
Date: Tue, 24 Jul 2007 17:28:36 -0400
From: "Askar Zaidi" <askar.zaidi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Fine Tuning Lucene implementation
In-Reply-To: <B6CD8741-E8F5-4D00-8579-DDD8944469AA@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_38297_20506843.1185312516806"
References: <c0c0e1d40707241243y5ddfd5fai10381873a2d2bd64@mail.gmail.com>
	 <c0c0e1d40707241331i7be68a3dr27924a8e4f186427@mail.gmail.com>
	 <B6CD8741-E8F5-4D00-8579-DDD8944469AA@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_38297_20506843.1185312516806
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks for the reply.

I am timing the entire search process with a stop watch, a bit ghetto style.
My getXXX methods are:

Document doc = hits.doc(i);
String str = doc.get("item");

So you can see that I am retrieving the entire document in a search query.
Ideally , I'd like to just retrieve the Field object that I want to run the
search on. I know this will give me a boost as one of my Fields is really
huge.

My query is selecting the entire user data-set in the database. I'd like to
do some SQL based search in the query too so that I pick only those items
where the phrase matches.

Index contains about 650MB of data. Index file size is 14478869 bytes.

thanks,
AZ


On 7/24/07, Grant Ingersoll <gsingers@apache.org> wrote:
>
> Where are you getting your numbers from?  That is, where are your
> timers?  Are you timing the rs.next() loop, or the individual calls
> to Lucene?  What do the getXXXXX methods look like?  How big are your
> queries?  How big is your index?
>
> Essentially, we need more info to really help you.  From what I can
> tell, you are generating 3 different Lucene queries for each record
> in the database.  Frankly, I surprised your slowdown is only linear.
>
> On Jul 24, 2007, at 4:31 PM, Askar Zaidi wrote:
>
> > I have 512MB RAM allocated to JVM Heap. If I double my system RAM
> > from 768MB
> > to say 2GB or so, and give JVM 1.5GB Heap space, will I get quicker
> > results
> > ?
> >
> > Can I expect results which take 1 minute to be returned in 30
> > seconds with
> > more RAM ? Should I also get a more powerful CPU ? A real server class
> > machine ?
> >
> > I have also done some of the optimizations that are mentioned on
> > the Lucene
> > website.
> >
> > thanks,
> > AZ
> >
> > On 7/24/07, Askar Zaidi <askar.zaidi@gmail.com> wrote:
> >>
> >> Hey Guys,
> >>
> >> I just finished up using Lucene in my application. I have data in a
> >> database , so while indexing I extract this data from the database
> >> and pump
> >> it into the index. Specifically , I have the following data in the
> >> index:
> >>
> >> <itemID> <tags> <title> <summary> <contents>
> >>
> >> where itemID is just a number (primary key in the DB)
> >> tags : text
> >> titie: text
> >> summary: text
> >> contents: Huge text (text extracted from files: pdfs, docs etc).
> >>
> >> Now while running a search query I realized that the response time
> >> increases in a linear fashion as the number of <itemID> increase
> >> in the DB.
> >>
> >> If I have 50 items, its 8 seconds
> >> 100 items, its 17 seconds.
> >> 300+ items, its 60 seconds and maybe more.
> >>
> >> In a perfect world, I'd like to search on 300+ items within 10-15
> >> seconds.
> >> Can anyone give me tips to fine tune lucene ?
> >>
> >> Heres a code snippet:
> >>
> >> sql query = "SELECT itemID from items where creator = 'askar' ;
> >>
> >> --execute query--
> >>
> >> while(rs.next()){
> >>
> >> score = doTagSearch(askar,text,itemID);
> >> scoreTitle = doTitleSearch(askar,text,itemID);
> >> scoreSummary = doSummarySearch(askar,text,itemID);
> >>
> >> ----
> >>
> >> }
> >>
> >> So this code asks Lucene to search for the "text" in the itemID
> >> passed.
> >> itemID is already indexed. The while loop will run 300 times if
> >> there are
> >> 300 items....that gets slow...what can I do here ??
> >>
> >> thanks for the replies,
> >>
> >> AZ
> >>
>
> --------------------------
> Grant Ingersoll
> Center for Natural Language Processing
> http://www.cnlp.org/tech/lucene.asp
>
> Read the Lucene Java FAQ at http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_38297_20506843.1185312516806--

From java-user-return-29351-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 24 21:45:12 2007
Return-Path: <java-user-return-29351-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29906 invoked from network); 24 Jul 2007 21:45:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jul 2007 21:45:12 -0000
Received: (qmail 80432 invoked by uid 500); 24 Jul 2007 21:45:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80400 invoked by uid 500); 24 Jul 2007 21:45:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80389 invoked by uid 99); 24 Jul 2007 21:45:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 14:45:05 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of askar.zaidi@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 14:45:03 -0700
Received: by ug-out-1314.google.com with SMTP id c2so283461ugf
        for <java-user@lucene.apache.org>; Tue, 24 Jul 2007 14:44:42 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=sNUOlsGxHwSo6IOU52AnD6FyoskqwF1q3+JRHRJagfORgoPV+CAxq6tOWHS8W7aOPP2IXvcvvuXRIGsUZN0oxiRfvFceiYnshIEEs8kjOlZOp0SKSOwk9Kcmg2y7EaSLEIDeF8I8Nil/fokt3dy11sBO1a3OKEcLqWUlgho3kl0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=GRqh0trdXKTchXchHaHsFEZLgu368snIPAwaFgKggNmRJ0FdykxoecMX28pJK2YVqzvanw2k4fyxfCaTOmCekcU+7n/wSUngChWEh6uFyS2B/kcr7JptY9Kd1hMATPm8TQEUPgPBw7Hsl9MnZSmji28w73FwV2wlhiFU/+6WSiY=
Received: by 10.66.221.6 with SMTP id t6mr906301ugg.1185313482226;
        Tue, 24 Jul 2007 14:44:42 -0700 (PDT)
Received: by 10.66.251.15 with HTTP; Tue, 24 Jul 2007 14:44:42 -0700 (PDT)
Message-ID: <c0c0e1d40707241444j32598f38i2b14f80b263ce3ee@mail.gmail.com>
Date: Tue, 24 Jul 2007 17:44:42 -0400
From: "Askar Zaidi" <askar.zaidi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Fine Tuning Lucene implementation
In-Reply-To: <c0c0e1d40707241428r44ee7926q7f9199687650baf3@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_38425_25386657.1185313482120"
References: <c0c0e1d40707241243y5ddfd5fai10381873a2d2bd64@mail.gmail.com>
	 <c0c0e1d40707241331i7be68a3dr27924a8e4f186427@mail.gmail.com>
	 <B6CD8741-E8F5-4D00-8579-DDD8944469AA@apache.org>
	 <c0c0e1d40707241428r44ee7926q7f9199687650baf3@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_38425_25386657.1185313482120
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Can someone please tell me how to cache results in Lucene ? I know the
classes, but I don't know how to go about it.

thanks,
Askar

On 7/24/07, Askar Zaidi <askar.zaidi@gmail.com> wrote:
>
> Thanks for the reply.
>
> I am timing the entire search process with a stop watch, a bit ghetto
> style. My getXXX methods are:
>
> Document doc = hits.doc(i);
> String str = doc.get("item");
>
> So you can see that I am retrieving the entire document in a search query.
> Ideally , I'd like to just retrieve the Field object that I want to run the
> search on. I know this will give me a boost as one of my Fields is really
> huge.
>
> My query is selecting the entire user data-set in the database. I'd like
> to do some SQL based search in the query too so that I pick only those items
> where the phrase matches.
>
> Index contains about 650MB of data. Index file size is 14478869 bytes.
>
> thanks,
> AZ
>
>
> On 7/24/07, Grant Ingersoll <gsingers@apache.org> wrote:
> >
> > Where are you getting your numbers from?  That is, where are your
> > timers?  Are you timing the rs.next() loop, or the individual calls
> > to Lucene?  What do the getXXXXX methods look like?  How big are your
> > queries?  How big is your index?
> >
> > Essentially, we need more info to really help you.  From what I can
> > tell, you are generating 3 different Lucene queries for each record
> > in the database.  Frankly, I surprised your slowdown is only linear.
> >
> > On Jul 24, 2007, at 4:31 PM, Askar Zaidi wrote:
> >
> > > I have 512MB RAM allocated to JVM Heap. If I double my system RAM
> > > from 768MB
> > > to say 2GB or so, and give JVM 1.5GB Heap space, will I get quicker
> > > results
> > > ?
> > >
> > > Can I expect results which take 1 minute to be returned in 30
> > > seconds with
> > > more RAM ? Should I also get a more powerful CPU ? A real server class
> > > machine ?
> > >
> > > I have also done some of the optimizations that are mentioned on
> > > the Lucene
> > > website.
> > >
> > > thanks,
> > > AZ
> > >
> > > On 7/24/07, Askar Zaidi < askar.zaidi@gmail.com> wrote:
> > >>
> > >> Hey Guys,
> > >>
> > >> I just finished up using Lucene in my application. I have data in a
> > >> database , so while indexing I extract this data from the database
> > >> and pump
> > >> it into the index. Specifically , I have the following data in the
> > >> index:
> > >>
> > >> <itemID> <tags> <title> <summary> <contents>
> > >>
> > >> where itemID is just a number (primary key in the DB)
> > >> tags : text
> > >> titie: text
> > >> summary: text
> > >> contents: Huge text (text extracted from files: pdfs, docs etc).
> > >>
> > >> Now while running a search query I realized that the response time
> > >> increases in a linear fashion as the number of <itemID> increase
> > >> in the DB.
> > >>
> > >> If I have 50 items, its 8 seconds
> > >> 100 items, its 17 seconds.
> > >> 300+ items, its 60 seconds and maybe more.
> > >>
> > >> In a perfect world, I'd like to search on 300+ items within 10-15
> > >> seconds.
> > >> Can anyone give me tips to fine tune lucene ?
> > >>
> > >> Heres a code snippet:
> > >>
> > >> sql query = "SELECT itemID from items where creator = 'askar' ;
> > >>
> > >> --execute query--
> > >>
> > >> while(rs.next ()){
> > >>
> > >> score = doTagSearch(askar,text,itemID);
> > >> scoreTitle = doTitleSearch(askar,text,itemID);
> > >> scoreSummary = doSummarySearch(askar,text,itemID);
> > >>
> > >> ----
> > >>
> > >> }
> > >>
> > >> So this code asks Lucene to search for the "text" in the itemID
> > >> passed.
> > >> itemID is already indexed. The while loop will run 300 times if
> > >> there are
> > >> 300 items....that gets slow...what can I do here ??
> > >>
> > >> thanks for the replies,
> > >>
> > >> AZ
> > >>
> >
> > --------------------------
> > Grant Ingersoll
> > Center for Natural Language Processing
> > http://www.cnlp.org/tech/lucene.asp
> >
> > Read the Lucene Java FAQ at http://wiki.apache.org/lucene-java/LuceneFAQ
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_38425_25386657.1185313482120--

From java-user-return-29352-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 24 22:44:49 2007
Return-Path: <java-user-return-29352-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53480 invoked from network); 24 Jul 2007 22:44:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jul 2007 22:44:47 -0000
Received: (qmail 46591 invoked by uid 500); 24 Jul 2007 22:44:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46545 invoked by uid 500); 24 Jul 2007 22:44:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46534 invoked by uid 99); 24 Jul 2007 22:44:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 15:44:42 -0700
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [209.191.68.227] (HELO web36201.mail.mud.yahoo.com) (209.191.68.227)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 24 Jul 2007 15:44:40 -0700
Received: (qmail 95667 invoked by uid 60001); 24 Jul 2007 22:44:17 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=XeTZEC1LFw9s4gUhMV3LV2gZ33EvMOuJm0yZPUAA8eqsdSCinZim9Sw+DBUNP17G8kIgNW7u4irdfcFXmrWoBbLQ6pRV7PsKLtKayKtoBxX9wWaLUNIo0kgG+4HckffX5y9wfDj6sGcxIVHRwOy1RoaUxFZ4MNERDRlAUq8n5CI=;
X-YMail-OSG: DxFoaRoVM1mrXUUL04X2.qX6h.Af0DUkmJtKEiC8DwtdJY12UVRFLhFnxmFe428D.w--
Received: from [129.55.200.20] by web36201.mail.mud.yahoo.com via HTTP; Tue, 24 Jul 2007 15:44:17 PDT
Date: Tue, 24 Jul 2007 15:44:17 -0700 (PDT)
From: Lindsey Hess <lindseyhess83@yahoo.com>
Subject: Query parsing?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1076593985-1185317057=:95410"
Content-Transfer-Encoding: 8bit
Message-ID: <557524.95410.qm@web36201.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1076593985-1185317057=:95410
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hi,

I'm building an application that needs to translate one query format into another.  For example, my application generates the following query from a UI:

((title="Gone With The Wind") <OR> (title="Brave New World"))

and internally I need to convert it into this format so that I can make a web service call to another application:

{//title}:Gone With The Wind OR Brave New World

Now, I do not need Lucene to index anything, but I'm wondering if Lucene has query parsing classes that will allow me to transform the queries.  If so, this will save me a lot of time from building tedious parsing logic.

Thank you.

Lindsey

       
---------------------------------
Sick sense of humor? Visit Yahoo! TV's Comedy with an Edge to see what's on, when. 
--0-1076593985-1185317057=:95410--

From java-user-return-29353-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 24 22:48:50 2007
Return-Path: <java-user-return-29353-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55637 invoked from network); 24 Jul 2007 22:48:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jul 2007 22:48:49 -0000
Received: (qmail 53463 invoked by uid 500); 24 Jul 2007 22:48:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53257 invoked by uid 500); 24 Jul 2007 22:48:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53246 invoked by uid 99); 24 Jul 2007 22:48:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 15:48:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.119] (HELO spunkymail-a7.g.dreamhost.com) (208.97.132.119)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 15:48:41 -0700
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a7.g.dreamhost.com (Postfix) with ESMTP id 94CBD5C508
	for <java-user@lucene.apache.org>; Tue, 24 Jul 2007 15:48:19 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <c0c0e1d40707241428r44ee7926q7f9199687650baf3@mail.gmail.com>
References: <c0c0e1d40707241243y5ddfd5fai10381873a2d2bd64@mail.gmail.com> <c0c0e1d40707241331i7be68a3dr27924a8e4f186427@mail.gmail.com> <B6CD8741-E8F5-4D00-8579-DDD8944469AA@apache.org> <c0c0e1d40707241428r44ee7926q7f9199687650baf3@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <28F241F7-C4AD-414C-89D8-95AC22C0736B@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Fine Tuning Lucene implementation
Date: Tue, 24 Jul 2007 18:48:12 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Sorry, I mistyped. I don't mean the getXXXX methods, I mean the  
doTagSearch, doTitleSearch, etc.

As for the stop watch, not really sure what to make of that...  Try  
System.currentTimeMillis()...

You can get just the fields you want when loading a Document by using  
the FieldSelector API on IndexReader, etc.

Perhaps, you can also use some Filters and cache them.

Its really hard to give suggestions when it is not at all obvious  
where the slowness is.  Please try to isolate the Lucene calls from  
the DB calls and look at the timings for both.

On Jul 24, 2007, at 5:28 PM, Askar Zaidi wrote:

> Thanks for the reply.
>
> I am timing the entire search process with a stop watch, a bit  
> ghetto style.
> My getXXX methods are:
>
> Document doc = hits.doc(i);
> String str = doc.get("item");
>
> So you can see that I am retrieving the entire document in a search  
> query.
> Ideally , I'd like to just retrieve the Field object that I want to  
> run the
> search on. I know this will give me a boost as one of my Fields is  
> really
> huge.
>
> My query is selecting the entire user data-set in the database. I'd  
> like to
> do some SQL based search in the query too so that I pick only those  
> items
> where the phrase matches.
>
> Index contains about 650MB of data. Index file size is 14478869 bytes.
>
> thanks,
> AZ
>
>
> On 7/24/07, Grant Ingersoll <gsingers@apache.org> wrote:
>>
>> Where are you getting your numbers from?  That is, where are your
>> timers?  Are you timing the rs.next() loop, or the individual calls
>> to Lucene?  What do the getXXXXX methods look like?  How big are your
>> queries?  How big is your index?
>>
>> Essentially, we need more info to really help you.  From what I can
>> tell, you are generating 3 different Lucene queries for each record
>> in the database.  Frankly, I surprised your slowdown is only linear.
>>
>> On Jul 24, 2007, at 4:31 PM, Askar Zaidi wrote:
>>
>>> I have 512MB RAM allocated to JVM Heap. If I double my system RAM
>>> from 768MB
>>> to say 2GB or so, and give JVM 1.5GB Heap space, will I get quicker
>>> results
>>> ?
>>>
>>> Can I expect results which take 1 minute to be returned in 30
>>> seconds with
>>> more RAM ? Should I also get a more powerful CPU ? A real server  
>>> class
>>> machine ?
>>>
>>> I have also done some of the optimizations that are mentioned on
>>> the Lucene
>>> website.
>>>
>>> thanks,
>>> AZ
>>>
>>> On 7/24/07, Askar Zaidi <askar.zaidi@gmail.com> wrote:
>>>>
>>>> Hey Guys,
>>>>
>>>> I just finished up using Lucene in my application. I have data in a
>>>> database , so while indexing I extract this data from the database
>>>> and pump
>>>> it into the index. Specifically , I have the following data in the
>>>> index:
>>>>
>>>> <itemID> <tags> <title> <summary> <contents>
>>>>
>>>> where itemID is just a number (primary key in the DB)
>>>> tags : text
>>>> titie: text
>>>> summary: text
>>>> contents: Huge text (text extracted from files: pdfs, docs etc).
>>>>
>>>> Now while running a search query I realized that the response time
>>>> increases in a linear fashion as the number of <itemID> increase
>>>> in the DB.
>>>>
>>>> If I have 50 items, its 8 seconds
>>>> 100 items, its 17 seconds.
>>>> 300+ items, its 60 seconds and maybe more.
>>>>
>>>> In a perfect world, I'd like to search on 300+ items within 10-15
>>>> seconds.
>>>> Can anyone give me tips to fine tune lucene ?
>>>>
>>>> Heres a code snippet:
>>>>
>>>> sql query = "SELECT itemID from items where creator = 'askar' ;
>>>>
>>>> --execute query--
>>>>
>>>> while(rs.next()){
>>>>
>>>> score = doTagSearch(askar,text,itemID);
>>>> scoreTitle = doTitleSearch(askar,text,itemID);
>>>> scoreSummary = doSummarySearch(askar,text,itemID);
>>>>
>>>> ----
>>>>
>>>> }
>>>>
>>>> So this code asks Lucene to search for the "text" in the itemID
>>>> passed.
>>>> itemID is already indexed. The while loop will run 300 times if
>>>> there are
>>>> 300 items....that gets slow...what can I do here ??
>>>>
>>>> thanks for the replies,
>>>>
>>>> AZ
>>>>
>>
>> --------------------------
>> Grant Ingersoll
>> Center for Natural Language Processing
>> http://www.cnlp.org/tech/lucene.asp
>>
>> Read the Lucene Java FAQ at http://wiki.apache.org/lucene-java/ 
>> LuceneFAQ
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29354-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 24 23:58:46 2007
Return-Path: <java-user-return-29354-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79683 invoked from network); 24 Jul 2007 23:58:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jul 2007 23:58:44 -0000
Received: (qmail 16419 invoked by uid 500); 24 Jul 2007 23:58:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16389 invoked by uid 500); 24 Jul 2007 23:58:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16371 invoked by uid 99); 24 Jul 2007 23:58:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 16:58:36 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of askar.zaidi@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 16:58:34 -0700
Received: by ug-out-1314.google.com with SMTP id c2so303625ugf
        for <java-user@lucene.apache.org>; Tue, 24 Jul 2007 16:58:12 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=hhlGmVuEtybGMPUF9aTjAqfstzMDbhL0dyyO6XnQNKzaTSxky8GxH0YvvElJ7hRPCP8t0Ke6p0gp0pMagcsCZmvrC31ZGXzG8xS21pidV5haL1LSNwTfw7sIJuz4G6SCC3PsJdqBbGW+IsWrCkIeLYkuqBHiuzkW9wbP+u44lBA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=USeeWAqN44C5tqri4C6Vj7BPjpyW5oByk2z5BJtJha3XkE5vRl/fd8NOEdqoh/xwWDkPd1RfgtJfCAO5tIYkSSNemUvb3MiCGz4Hgk5fOlP/0k20oFylAZVXtdWNLIi0CL7SkruTmjjJwPY6XGu2CTDVgkDE+j2RjuYbGHY7OzI=
Received: by 10.67.118.20 with SMTP id v20mr949714ugm.1185321492554;
        Tue, 24 Jul 2007 16:58:12 -0700 (PDT)
Received: by 10.66.251.15 with HTTP; Tue, 24 Jul 2007 16:58:12 -0700 (PDT)
Message-ID: <c0c0e1d40707241658tfd64870v40a6b9431780fe98@mail.gmail.com>
Date: Tue, 24 Jul 2007 19:58:12 -0400
From: "Askar Zaidi" <askar.zaidi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Fine Tuning Lucene implementation
In-Reply-To: <28F241F7-C4AD-414C-89D8-95AC22C0736B@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_39586_23355880.1185321492493"
References: <c0c0e1d40707241243y5ddfd5fai10381873a2d2bd64@mail.gmail.com>
	 <c0c0e1d40707241331i7be68a3dr27924a8e4f186427@mail.gmail.com>
	 <B6CD8741-E8F5-4D00-8579-DDD8944469AA@apache.org>
	 <c0c0e1d40707241428r44ee7926q7f9199687650baf3@mail.gmail.com>
	 <28F241F7-C4AD-414C-89D8-95AC22C0736B@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_39586_23355880.1185321492493
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I ran some tests and it seems that the slowness is from Lucene calls when I
do "doBodySearch", if I remove that call, Lucene gives me results in 5
seconds. otherwise it takes about 50 seconds.

But I need to do Body search and that field contains lots of text. The field
is <contents>. How can I optimize that ?

thanks,
Askar



On 7/24/07, Grant Ingersoll <gsingers@apache.org> wrote:
>
> Sorry, I mistyped. I don't mean the getXXXX methods, I mean the
> doTagSearch, doTitleSearch, etc.
>
> As for the stop watch, not really sure what to make of that...  Try
> System.currentTimeMillis()...
>
> You can get just the fields you want when loading a Document by using
> the FieldSelector API on IndexReader, etc.
>
> Perhaps, you can also use some Filters and cache them.
>
> Its really hard to give suggestions when it is not at all obvious
> where the slowness is.  Please try to isolate the Lucene calls from
> the DB calls and look at the timings for both.
>
> On Jul 24, 2007, at 5:28 PM, Askar Zaidi wrote:
>
> > Thanks for the reply.
> >
> > I am timing the entire search process with a stop watch, a bit
> > ghetto style.
> > My getXXX methods are:
> >
> > Document doc = hits.doc(i);
> > String str = doc.get("item");
> >
> > So you can see that I am retrieving the entire document in a search
> > query.
> > Ideally , I'd like to just retrieve the Field object that I want to
> > run the
> > search on. I know this will give me a boost as one of my Fields is
> > really
> > huge.
> >
> > My query is selecting the entire user data-set in the database. I'd
> > like to
> > do some SQL based search in the query too so that I pick only those
> > items
> > where the phrase matches.
> >
> > Index contains about 650MB of data. Index file size is 14478869 bytes.
> >
> > thanks,
> > AZ
> >
> >
> > On 7/24/07, Grant Ingersoll <gsingers@apache.org> wrote:
> >>
> >> Where are you getting your numbers from?  That is, where are your
> >> timers?  Are you timing the rs.next() loop, or the individual calls
> >> to Lucene?  What do the getXXXXX methods look like?  How big are your
> >> queries?  How big is your index?
> >>
> >> Essentially, we need more info to really help you.  From what I can
> >> tell, you are generating 3 different Lucene queries for each record
> >> in the database.  Frankly, I surprised your slowdown is only linear.
> >>
> >> On Jul 24, 2007, at 4:31 PM, Askar Zaidi wrote:
> >>
> >>> I have 512MB RAM allocated to JVM Heap. If I double my system RAM
> >>> from 768MB
> >>> to say 2GB or so, and give JVM 1.5GB Heap space, will I get quicker
> >>> results
> >>> ?
> >>>
> >>> Can I expect results which take 1 minute to be returned in 30
> >>> seconds with
> >>> more RAM ? Should I also get a more powerful CPU ? A real server
> >>> class
> >>> machine ?
> >>>
> >>> I have also done some of the optimizations that are mentioned on
> >>> the Lucene
> >>> website.
> >>>
> >>> thanks,
> >>> AZ
> >>>
> >>> On 7/24/07, Askar Zaidi <askar.zaidi@gmail.com> wrote:
> >>>>
> >>>> Hey Guys,
> >>>>
> >>>> I just finished up using Lucene in my application. I have data in a
> >>>> database , so while indexing I extract this data from the database
> >>>> and pump
> >>>> it into the index. Specifically , I have the following data in the
> >>>> index:
> >>>>
> >>>> <itemID> <tags> <title> <summary> <contents>
> >>>>
> >>>> where itemID is just a number (primary key in the DB)
> >>>> tags : text
> >>>> titie: text
> >>>> summary: text
> >>>> contents: Huge text (text extracted from files: pdfs, docs etc).
> >>>>
> >>>> Now while running a search query I realized that the response time
> >>>> increases in a linear fashion as the number of <itemID> increase
> >>>> in the DB.
> >>>>
> >>>> If I have 50 items, its 8 seconds
> >>>> 100 items, its 17 seconds.
> >>>> 300+ items, its 60 seconds and maybe more.
> >>>>
> >>>> In a perfect world, I'd like to search on 300+ items within 10-15
> >>>> seconds.
> >>>> Can anyone give me tips to fine tune lucene ?
> >>>>
> >>>> Heres a code snippet:
> >>>>
> >>>> sql query = "SELECT itemID from items where creator = 'askar' ;
> >>>>
> >>>> --execute query--
> >>>>
> >>>> while(rs.next()){
> >>>>
> >>>> score = doTagSearch(askar,text,itemID);
> >>>> scoreTitle = doTitleSearch(askar,text,itemID);
> >>>> scoreSummary = doSummarySearch(askar,text,itemID);
> >>>>
> >>>> ----
> >>>>
> >>>> }
> >>>>
> >>>> So this code asks Lucene to search for the "text" in the itemID
> >>>> passed.
> >>>> itemID is already indexed. The while loop will run 300 times if
> >>>> there are
> >>>> 300 items....that gets slow...what can I do here ??
> >>>>
> >>>> thanks for the replies,
> >>>>
> >>>> AZ
> >>>>
> >>
> >> --------------------------
> >> Grant Ingersoll
> >> Center for Natural Language Processing
> >> http://www.cnlp.org/tech/lucene.asp
> >>
> >> Read the Lucene Java FAQ at http://wiki.apache.org/lucene-java/
> >> LuceneFAQ
> >>
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_39586_23355880.1185321492493--

From java-user-return-29355-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 25 00:01:24 2007
Return-Path: <java-user-return-29355-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80215 invoked from network); 25 Jul 2007 00:01:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2007 00:01:23 -0000
Received: (qmail 19615 invoked by uid 500); 25 Jul 2007 00:01:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19390 invoked by uid 500); 25 Jul 2007 00:01:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19379 invoked by uid 99); 25 Jul 2007 00:01:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 17:01:18 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of askar.zaidi@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 17:01:16 -0700
Received: by ug-out-1314.google.com with SMTP id c2so303979ugf
        for <java-user@lucene.apache.org>; Tue, 24 Jul 2007 17:00:55 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=DifF9eaRJwS8u8UXaqevujh39qOonTGQk7Got8uHK2ZfEl61jb/UmQUhfzaokQMC5SgjNspbPsazecbXyd9Zxghuus5qvp1DL0Hsac/TWztPvSLMH3ILk1y616fD7Vb2Owm4bmhFHr6n6xXaDaXhaaTxSYbXcywvmFEcQ7WwVss=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=JGE/vL982hoXmZS5y8hxemDNtb/3m1xPvWeuuDLYDg2O/0FBMVKcHDjmZzsJbeQsl130SObVU4Tuh6Ai24vpQh2Qmlen9disuu+TNu6VMpV4ydU1vJI830oSFhF6O/BP51VFLQ048cuzxg63sMKAalGuHxgURrdaxv1Vu6T7b/4=
Received: by 10.66.237.9 with SMTP id k9mr975254ugh.1185321655054;
        Tue, 24 Jul 2007 17:00:55 -0700 (PDT)
Received: by 10.66.251.15 with HTTP; Tue, 24 Jul 2007 17:00:54 -0700 (PDT)
Message-ID: <c0c0e1d40707241700l23daa7c4yd9adbcb0c37ec21c@mail.gmail.com>
Date: Tue, 24 Jul 2007 20:00:54 -0400
From: "Askar Zaidi" <askar.zaidi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Fine Tuning Lucene implementation
In-Reply-To: <c0c0e1d40707241658tfd64870v40a6b9431780fe98@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_39606_33465799.1185321654989"
References: <c0c0e1d40707241243y5ddfd5fai10381873a2d2bd64@mail.gmail.com>
	 <c0c0e1d40707241331i7be68a3dr27924a8e4f186427@mail.gmail.com>
	 <B6CD8741-E8F5-4D00-8579-DDD8944469AA@apache.org>
	 <c0c0e1d40707241428r44ee7926q7f9199687650baf3@mail.gmail.com>
	 <28F241F7-C4AD-414C-89D8-95AC22C0736B@apache.org>
	 <c0c0e1d40707241658tfd64870v40a6b9431780fe98@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_39606_33465799.1185321654989
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Shall I setMergeFactor = 2 ?

Slow indexing is not a bother.


On 7/24/07, Askar Zaidi <askar.zaidi@gmail.com> wrote:
>
> I ran some tests and it seems that the slowness is from Lucene calls when
> I do "doBodySearch", if I remove that call, Lucene gives me results in 5
> seconds. otherwise it takes about 50 seconds.
>
> But I need to do Body search and that field contains lots of text. The
> field is <contents>. How can I optimize that ?
>
> thanks,
> Askar
>
>
>
> On 7/24/07, Grant Ingersoll <gsingers@apache.org> wrote:
> >
> > Sorry, I mistyped. I don't mean the getXXXX methods, I mean the
> > doTagSearch, doTitleSearch, etc.
> >
> > As for the stop watch, not really sure what to make of that...  Try
> > System.currentTimeMillis()...
> >
> > You can get just the fields you want when loading a Document by using
> > the FieldSelector API on IndexReader, etc.
> >
> > Perhaps, you can also use some Filters and cache them.
> >
> > Its really hard to give suggestions when it is not at all obvious
> > where the slowness is.  Please try to isolate the Lucene calls from
> > the DB calls and look at the timings for both.
> >
> > On Jul 24, 2007, at 5:28 PM, Askar Zaidi wrote:
> >
> > > Thanks for the reply.
> > >
> > > I am timing the entire search process with a stop watch, a bit
> > > ghetto style.
> > > My getXXX methods are:
> > >
> > > Document doc = hits.doc(i);
> > > String str = doc.get("item");
> > >
> > > So you can see that I am retrieving the entire document in a search
> > > query.
> > > Ideally , I'd like to just retrieve the Field object that I want to
> > > run the
> > > search on. I know this will give me a boost as one of my Fields is
> > > really
> > > huge.
> > >
> > > My query is selecting the entire user data-set in the database. I'd
> > > like to
> > > do some SQL based search in the query too so that I pick only those
> > > items
> > > where the phrase matches.
> > >
> > > Index contains about 650MB of data. Index file size is 14478869 bytes.
> > >
> > > thanks,
> > > AZ
> > >
> > >
> > > On 7/24/07, Grant Ingersoll <gsingers@apache.org > wrote:
> > >>
> > >> Where are you getting your numbers from?  That is, where are your
> > >> timers?  Are you timing the rs.next() loop, or the individual calls
> > >> to Lucene?  What do the getXXXXX methods look like?  How big are your
> >
> > >> queries?  How big is your index?
> > >>
> > >> Essentially, we need more info to really help you.  From what I can
> > >> tell, you are generating 3 different Lucene queries for each record
> > >> in the database.  Frankly, I surprised your slowdown is only linear.
> > >>
> > >> On Jul 24, 2007, at 4:31 PM, Askar Zaidi wrote:
> > >>
> > >>> I have 512MB RAM allocated to JVM Heap. If I double my system RAM
> > >>> from 768MB
> > >>> to say 2GB or so, and give JVM 1.5GB Heap space, will I get quicker
> > >>> results
> > >>> ?
> > >>>
> > >>> Can I expect results which take 1 minute to be returned in 30
> > >>> seconds with
> > >>> more RAM ? Should I also get a more powerful CPU ? A real server
> > >>> class
> > >>> machine ?
> > >>>
> > >>> I have also done some of the optimizations that are mentioned on
> > >>> the Lucene
> > >>> website.
> > >>>
> > >>> thanks,
> > >>> AZ
> > >>>
> > >>> On 7/24/07, Askar Zaidi <askar.zaidi@gmail.com > wrote:
> > >>>>
> > >>>> Hey Guys,
> > >>>>
> > >>>> I just finished up using Lucene in my application. I have data in a
> > >>>> database , so while indexing I extract this data from the database
> > >>>> and pump
> > >>>> it into the index. Specifically , I have the following data in the
> > >>>> index:
> > >>>>
> > >>>> <itemID> <tags> <title> <summary> <contents>
> > >>>>
> > >>>> where itemID is just a number (primary key in the DB)
> > >>>> tags : text
> > >>>> titie: text
> > >>>> summary: text
> > >>>> contents: Huge text (text extracted from files: pdfs, docs etc).
> > >>>>
> > >>>> Now while running a search query I realized that the response time
> > >>>> increases in a linear fashion as the number of <itemID> increase
> > >>>> in the DB.
> > >>>>
> > >>>> If I have 50 items, its 8 seconds
> > >>>> 100 items, its 17 seconds.
> > >>>> 300+ items, its 60 seconds and maybe more.
> > >>>>
> > >>>> In a perfect world, I'd like to search on 300+ items within 10-15
> > >>>> seconds.
> > >>>> Can anyone give me tips to fine tune lucene ?
> > >>>>
> > >>>> Heres a code snippet:
> > >>>>
> > >>>> sql query = "SELECT itemID from items where creator = 'askar' ;
> > >>>>
> > >>>> --execute query--
> > >>>>
> > >>>> while(rs.next()){
> > >>>>
> > >>>> score = doTagSearch(askar,text,itemID);
> > >>>> scoreTitle = doTitleSearch(askar,text,itemID);
> > >>>> scoreSummary = doSummarySearch(askar,text,itemID);
> > >>>>
> > >>>> ----
> > >>>>
> > >>>> }
> > >>>>
> > >>>> So this code asks Lucene to search for the "text" in the itemID
> > >>>> passed.
> > >>>> itemID is already indexed. The while loop will run 300 times if
> > >>>> there are
> > >>>> 300 items....that gets slow...what can I do here ??
> > >>>>
> > >>>> thanks for the replies,
> > >>>>
> > >>>> AZ
> > >>>>
> > >>
> > >> --------------------------
> > >> Grant Ingersoll
> > >> Center for Natural Language Processing
> > >> http://www.cnlp.org/tech/lucene.asp
> > >>
> > >> Read the Lucene Java FAQ at http://wiki.apache.org/lucene-java/
> > >> LuceneFAQ
> > >>
> > >>
> > >>
> > >> ---------------------------------------------------------------------
> > >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >> For additional commands, e-mail: java-user-help@lucene.apache.org
> > >>
> > >>
> >
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_39606_33465799.1185321654989--

From java-user-return-29356-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 25 00:08:35 2007
Return-Path: <java-user-return-29356-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82086 invoked from network); 25 Jul 2007 00:08:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2007 00:08:34 -0000
Received: (qmail 28238 invoked by uid 500); 25 Jul 2007 00:08:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28192 invoked by uid 500); 25 Jul 2007 00:08:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28179 invoked by uid 99); 25 Jul 2007 00:08:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 17:08:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [69.147.95.91] (HELO smtp128.plus.mail.sp1.yahoo.com) (69.147.95.91)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 24 Jul 2007 17:08:27 -0700
Received: (qmail 98645 invoked from network); 25 Jul 2007 00:08:05 -0000
Received: from unknown (HELO ?192.168.1.101?) (nhira@cognocys.com@75.168.19.27 with plain)
  by smtp128.plus.mail.sp1.yahoo.com with SMTP; 25 Jul 2007 00:08:05 -0000
X-YMail-OSG: XKqJoJoVM1mua866Kirr6ec4vEiIRDHXxBvJQi10.oOJUNAIV1EB7PvqswKrwSyBL.jPy456kg--
Subject: Re: Fine Tuning Lucene implementation
From: "N. Hira" <nhira@cognocys.com>
Reply-To: nhira@cognocys.com
To: java-user@lucene.apache.org
In-Reply-To: <c0c0e1d40707241658tfd64870v40a6b9431780fe98@mail.gmail.com>
References: <c0c0e1d40707241243y5ddfd5fai10381873a2d2bd64@mail.gmail.com>
	 <c0c0e1d40707241331i7be68a3dr27924a8e4f186427@mail.gmail.com>
	 <B6CD8741-E8F5-4D00-8579-DDD8944469AA@apache.org>
	 <c0c0e1d40707241428r44ee7926q7f9199687650baf3@mail.gmail.com>
	 <28F241F7-C4AD-414C-89D8-95AC22C0736B@apache.org>
	 <c0c0e1d40707241658tfd64870v40a6b9431780fe98@mail.gmail.com>
Content-Type: text/plain
Organization: Cognocys, Inc.
Date: Tue, 24 Jul 2007 19:08:03 -0500
Message-Id: <1185322083.4593.54.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.8.3 (2.8.3-2.fc6) 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Could you show us the relevant source from doBodySearch()?

-h

On Tue, 2007-07-24 at 19:58 -0400, Askar Zaidi wrote:
> I ran some tests and it seems that the slowness is from Lucene calls when I
> do "doBodySearch", if I remove that call, Lucene gives me results in 5
> seconds. otherwise it takes about 50 seconds.
> 
> But I need to do Body search and that field contains lots of text. The field
> is <contents>. How can I optimize that ?
> 
> thanks,
> Askar
> 
> 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29357-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 25 00:15:27 2007
Return-Path: <java-user-return-29357-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83912 invoked from network); 25 Jul 2007 00:15:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2007 00:15:25 -0000
Received: (qmail 33769 invoked by uid 500); 25 Jul 2007 00:15:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33731 invoked by uid 500); 25 Jul 2007 00:15:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33720 invoked by uid 99); 25 Jul 2007 00:15:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 17:15:20 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of askar.zaidi@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 17:15:17 -0700
Received: by ug-out-1314.google.com with SMTP id c2so305939ugf
        for <java-user@lucene.apache.org>; Tue, 24 Jul 2007 17:14:56 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=EEdBRR7LFv2wjYNOlSZ6oF1Yc+5FzWxK+5Iym79gikOkfnLQOEmqQVhiTmaWNtnRIsMuOVPtDEMEDL/AblGHd16tzL4iqGib80tILjIrahqOk6GcVem+NE6I0d0vCpi4yMkkJDIr2KhYQO7FQlwLYb22lyvMpMB+OVef3XOMPrs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=uoFj3cdjZ4Vsbt6oyw3j9Qnp+Jz230ZATynwo7mg+qhOgwHWzMvaDjqGVdkFWMpKLweOGU6Xrju0LeW4biZREIBOjbMxx3fEFJbvdE4v0dCONMQpOiaK8TBRqinRKhJ9/uezV8MfwUjVoaxXieqKtPglhgxJNb6ZYQnNroMTGlM=
Received: by 10.67.29.12 with SMTP id g12mr983362ugj.1185322496533;
        Tue, 24 Jul 2007 17:14:56 -0700 (PDT)
Received: by 10.66.251.15 with HTTP; Tue, 24 Jul 2007 17:14:56 -0700 (PDT)
Message-ID: <c0c0e1d40707241714k4cef2167lcd7a5cec866b8555@mail.gmail.com>
Date: Tue, 24 Jul 2007 20:14:56 -0400
From: "Askar Zaidi" <askar.zaidi@gmail.com>
To: java-user@lucene.apache.org, nhira@cognocys.com
Subject: Re: Fine Tuning Lucene implementation
In-Reply-To: <1185322083.4593.54.camel@localhost>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_39758_22216950.1185322496475"
References: <c0c0e1d40707241243y5ddfd5fai10381873a2d2bd64@mail.gmail.com>
	 <c0c0e1d40707241331i7be68a3dr27924a8e4f186427@mail.gmail.com>
	 <B6CD8741-E8F5-4D00-8579-DDD8944469AA@apache.org>
	 <c0c0e1d40707241428r44ee7926q7f9199687650baf3@mail.gmail.com>
	 <28F241F7-C4AD-414C-89D8-95AC22C0736B@apache.org>
	 <c0c0e1d40707241658tfd64870v40a6b9431780fe98@mail.gmail.com>
	 <1185322083.4593.54.camel@localhost>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_39758_22216950.1185322496475
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Sure.

 public float doBodySearch(Searcher searcher,String query, int id){

                 try{
                                score = search(searcher, query,id);
                     }
                      catch(IOException io){}
                      catch(ParseException pe){}

                      return score;

                }

 private float search(Searcher searcher, String queryString, int id) throws
ParseException, IOException {

        // Build a Query object

        QueryParser queryParser = new QueryParser("contents", new
KeywordAnalyzer());

        queryParser.setDefaultOperator(QueryParser.Operator.AND);

        Query query = queryParser.parse(queryString);

        // Search for the query

        Hits hits = searcher.search(query);
        Document doc = null;

        // Examine the Hits object to see if there were any matches
        int hitCount = hits.length();

                for(int i=0;i<hitCount;i++){
                doc = hits.doc(i);
                String str = doc.get("item");
                int tmp = Integer.parseInt(str);
                if(tmp==id)
                score = hits.score(i);
                }

        return score;
    }

I really need to optimize doBodySearch(...) as this takes the most time.

thanks guys,
Askar

On 7/24/07, N. Hira <nhira@cognocys.com> wrote:
>
> Could you show us the relevant source from doBodySearch()?
>
> -h
>
> On Tue, 2007-07-24 at 19:58 -0400, Askar Zaidi wrote:
> > I ran some tests and it seems that the slowness is from Lucene calls
> when I
> > do "doBodySearch", if I remove that call, Lucene gives me results in 5
> > seconds. otherwise it takes about 50 seconds.
> >
> > But I need to do Body search and that field contains lots of text. The
> field
> > is <contents>. How can I optimize that ?
> >
> > thanks,
> > Askar
> >
> >
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_39758_22216950.1185322496475--

From java-user-return-29358-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 25 00:55:25 2007
Return-Path: <java-user-return-29358-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91723 invoked from network); 25 Jul 2007 00:55:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2007 00:55:23 -0000
Received: (qmail 64792 invoked by uid 500); 25 Jul 2007 00:55:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64608 invoked by uid 500); 25 Jul 2007 00:55:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64591 invoked by uid 99); 25 Jul 2007 00:55:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 17:55:17 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.231 as permitted sender)
Received: from [66.249.82.231] (HELO wx-out-0506.google.com) (66.249.82.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 17:55:14 -0700
Received: by wx-out-0506.google.com with SMTP id i28so22197wxd
        for <java-user@lucene.apache.org>; Tue, 24 Jul 2007 17:54:54 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=WjzlkgUEetSD9vqYiN9kAJc2/RU3gm2EXBnbGj4C49BvRFujEmvjYLyY2GyC5bl/oTBWsD9TYVEAJcaFdSmSHPMf3cRvnVL8tDQJo3jYUWo6S6vjGuKQOArBohhnQAw8XbdoSK6kNGMasFuyuOKXg9KS/M/dp+ZzzEYD8zOKT/k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=YBkVakDLvNd55GywEj9hCr7bmdFdLkoFU312XH7vSnWhcFOZceaP6jMdbAyIM9s0Hb7DDwCjndgX+vvD4HMRkW0KK1kRtFcT5nvi/DoPJ+UcZxFmBM7AkEwA2w8BeXz5fpdmPAtU/5SrKF/+ecXvNfRKwCchHJAznmEBi3mvn7M=
Received: by 10.70.76.13 with SMTP id y13mr135509wxa.1185324894316;
        Tue, 24 Jul 2007 17:54:54 -0700 (PDT)
Received: from ?192.168.1.105? ( [216.66.114.204])
        by mx.google.com with ESMTPS id 8sm137958wra.2007.07.24.17.54.52
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 24 Jul 2007 17:54:53 -0700 (PDT)
Message-ID: <46A69F2D.6090609@gmail.com>
Date: Tue, 24 Jul 2007 20:54:05 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.5 (Windows/20070716)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Fine Tuning Lucene implementation
References: <c0c0e1d40707241243y5ddfd5fai10381873a2d2bd64@mail.gmail.com>	 <c0c0e1d40707241331i7be68a3dr27924a8e4f186427@mail.gmail.com>	 <B6CD8741-E8F5-4D00-8579-DDD8944469AA@apache.org>	 <c0c0e1d40707241428r44ee7926q7f9199687650baf3@mail.gmail.com>	 <28F241F7-C4AD-414C-89D8-95AC22C0736B@apache.org>	 <c0c0e1d40707241658tfd64870v40a6b9431780fe98@mail.gmail.com>	 <1185322083.4593.54.camel@localhost> <c0c0e1d40707241714k4cef2167lcd7a5cec866b8555@mail.gmail.com>
In-Reply-To: <c0c0e1d40707241714k4cef2167lcd7a5cec866b8555@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Are you sure you are using the same Searcher for every search? Don't 
open a new one unless you have modified the index. You are iterating 
over every hit with the Hits class. You don't ever want to do this. Use 
a HitCollector if you want to iterate over more than a hundred or so 
hits. You will find further info about this if you check out the Lucene 
webpage, the faq: http://wiki.apache.org/lucene-java/LuceneFAQ and the 
wiki: 
http://wiki.apache.org/lucene-java/FrontPage?action=show&redirect=FrontPageEN 
especially  http://wiki.apache.org/lucene-java/ImproveSearchingSpeed.

- Mark

Askar Zaidi wrote:
> Sure.
>
>  public float doBodySearch(Searcher searcher,String query, int id){
>
>                  try{
>                                 score = search(searcher, query,id);
>                      }
>                       catch(IOException io){}
>                       catch(ParseException pe){}
>
>                       return score;
>
>                 }
>
>  private float search(Searcher searcher, String queryString, int id) throws
> ParseException, IOException {
>
>         // Build a Query object
>
>         QueryParser queryParser = new QueryParser("contents", new
> KeywordAnalyzer());
>
>         queryParser.setDefaultOperator(QueryParser.Operator.AND);
>
>         Query query = queryParser.parse(queryString);
>
>         // Search for the query
>
>         Hits hits = searcher.search(query);
>         Document doc = null;
>
>         // Examine the Hits object to see if there were any matches
>         int hitCount = hits.length();
>
>                 for(int i=0;i<hitCount;i++){
>                 doc = hits.doc(i);
>                 String str = doc.get("item");
>                 int tmp = Integer.parseInt(str);
>                 if(tmp==id)
>                 score = hits.score(i);
>                 }
>
>         return score;
>     }
>
> I really need to optimize doBodySearch(...) as this takes the most time.
>
> thanks guys,
> Askar
>
> On 7/24/07, N. Hira <nhira@cognocys.com> wrote:
>   
>> Could you show us the relevant source from doBodySearch()?
>>
>> -h
>>
>> On Tue, 2007-07-24 at 19:58 -0400, Askar Zaidi wrote:
>>     
>>> I ran some tests and it seems that the slowness is from Lucene calls
>>>       
>> when I
>>     
>>> do "doBodySearch", if I remove that call, Lucene gives me results in 5
>>> seconds. otherwise it takes about 50 seconds.
>>>
>>> But I need to do Body search and that field contains lots of text. The
>>>       
>> field
>>     
>>> is <contents>. How can I optimize that ?
>>>
>>> thanks,
>>> Askar
>>>
>>>
>>>       
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29359-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 25 01:00:40 2007
Return-Path: <java-user-return-29359-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92824 invoked from network); 25 Jul 2007 01:00:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2007 01:00:37 -0000
Received: (qmail 75721 invoked by uid 500); 25 Jul 2007 01:00:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75539 invoked by uid 500); 25 Jul 2007 01:00:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75516 invoked by uid 99); 25 Jul 2007 01:00:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 18:00:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.202] (HELO spunkymail-a2.g.dreamhost.com) (208.97.132.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 18:00:26 -0700
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a2.g.dreamhost.com (Postfix) with ESMTP id 8F83D87E2E
	for <java-user@lucene.apache.org>; Tue, 24 Jul 2007 18:00:06 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <c0c0e1d40707241714k4cef2167lcd7a5cec866b8555@mail.gmail.com>
References: <c0c0e1d40707241243y5ddfd5fai10381873a2d2bd64@mail.gmail.com> <c0c0e1d40707241331i7be68a3dr27924a8e4f186427@mail.gmail.com> <B6CD8741-E8F5-4D00-8579-DDD8944469AA@apache.org> <c0c0e1d40707241428r44ee7926q7f9199687650baf3@mail.gmail.com> <28F241F7-C4AD-414C-89D8-95AC22C0736B@apache.org> <c0c0e1d40707241658tfd64870v40a6b9431780fe98@mail.gmail.com> <1185322083.4593.54.camel@localhost> <c0c0e1d40707241714k4cef2167lcd7a5cec866b8555@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <1F3C66F4-5441-45EC-B796-334C61DAD0D1@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Fine Tuning Lucene implementation
Date: Tue, 24 Jul 2007 20:59:58 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Inline below

On Jul 24, 2007, at 8:14 PM, Askar Zaidi wrote:

> Sure.
>
>  public float doBodySearch(Searcher searcher,String query, int id){
>
>                  try{
>                                 score = search(searcher, query,id);
>                      }
>                       catch(IOException io){}
>                       catch(ParseException pe){}
>
>                       return score;
>
>                 }
>
>  private float search(Searcher searcher, String queryString, int  
> id) throws
> ParseException, IOException {
>
>         // Build a Query object
>
>         QueryParser queryParser = new QueryParser("contents", new
> KeywordAnalyzer());
>
>         queryParser.setDefaultOperator(QueryParser.Operator.AND);
>
>         Query query = queryParser.parse(queryString);
>
>         // Search for the query
>
>         Hits hits = searcher.search(query);
>         Document doc = null;
>
>         // Examine the Hits object to see if there were any matches
>         int hitCount = hits.length();
>
>                 for(int i=0;i<hitCount;i++){
>                 doc = hits.doc(i);
>                 String str = doc.get("item");
>                 int tmp = Integer.parseInt(str);
>                 if(tmp==id)
>                 score = hits.score(i);
>                 }

Why do you need this if clause?  Can't you make the id a required  
term in your query, that way you know it is a match in all returned  
documents?  Also, do all three of your searches do this inner loop on  
the hits?  You either need to implement caching, or, and this is  
better, I think, you need to refactor so that you can combine your  
various searches into a single search and only loop over the hits  
once.  But, that is just a guess.  I don't actually know what your  
application is doing.  Also, if you are returning "score", why don't  
you break out of the hits loop after you find your hit?

In database land, I think you are doing the equivalent of the n- 
select problem (or whatever they call it, i.e. when you do a select,  
iterate over each select, generating a new select for each statement  
on other tables) and should try to figure out how to do a "join"  
instead, whereby a single query or two gets you all your results and  
then you process them.

-Grant


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29360-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 25 01:03:16 2007
Return-Path: <java-user-return-29360-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94570 invoked from network); 25 Jul 2007 01:03:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2007 01:03:15 -0000
Received: (qmail 85377 invoked by uid 500); 25 Jul 2007 01:03:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85213 invoked by uid 500); 25 Jul 2007 01:03:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85202 invoked by uid 99); 25 Jul 2007 01:03:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 18:03:08 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [69.147.95.86] (HELO smtp123.plus.mail.sp1.yahoo.com) (69.147.95.86)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 24 Jul 2007 18:03:06 -0700
Received: (qmail 97438 invoked from network); 25 Jul 2007 01:02:45 -0000
Received: from unknown (HELO ?192.168.1.101?) (nhira@cognocys.com@75.168.19.27 with plain)
  by smtp123.plus.mail.sp1.yahoo.com with SMTP; 25 Jul 2007 01:02:44 -0000
X-YMail-OSG: hAdHoMIVM1my2rFRqmnQL0tdQHnp9XvLaNC35JZyJWEDZbHyYhj2O1VnThK1gWrXtU25__9fNQ--
Subject: Re: Fine Tuning Lucene implementation
From: "N. Hira" <nhira@cognocys.com>
Reply-To: nhira@cognocys.com
To: java-user <java-user@lucene.apache.org>
In-Reply-To: <c0c0e1d40707241714k4cef2167lcd7a5cec866b8555@mail.gmail.com>
References: <c0c0e1d40707241243y5ddfd5fai10381873a2d2bd64@mail.gmail.com>
	 <c0c0e1d40707241331i7be68a3dr27924a8e4f186427@mail.gmail.com>
	 <B6CD8741-E8F5-4D00-8579-DDD8944469AA@apache.org>
	 <c0c0e1d40707241428r44ee7926q7f9199687650baf3@mail.gmail.com>
	 <28F241F7-C4AD-414C-89D8-95AC22C0736B@apache.org>
	 <c0c0e1d40707241658tfd64870v40a6b9431780fe98@mail.gmail.com>
	 <1185322083.4593.54.camel@localhost>
	 <c0c0e1d40707241714k4cef2167lcd7a5cec866b8555@mail.gmail.com>
Content-Type: multipart/alternative; boundary="=-RIeOAlpw2lhQAsHtbW+p"
Organization: Cognocys, Inc.
Date: Tue, 24 Jul 2007 20:02:43 -0500
Message-Id: <1185325363.4593.70.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.8.3 (2.8.3-2.fc6) 
X-Virus-Checked: Checked by ClamAV on apache.org

--=-RIeOAlpw2lhQAsHtbW+p
Content-Type: text/plain
Content-Transfer-Encoding: 7bit

I'm no expert on this (so please accept the comments in that context)
but 2 things seem weird to me:

1.  Iterating over each hit is an expensive proposition.  I've often
seen people recommending a HitCollector.

2.  It seems that doBodySearch() is essentially saying, do this search
and return the score pertinent to this ID (using an exhaustive loop).
Would it be possible to just include a query clause?
    - i.e., instead of just contents:<userQuery>, also add
+id:<idWeCareAbout>

In general though, I think your algorithm seems inefficient (if I
understand it correctly):-- if I want to search for one term among 3 in
a "collection" of 300 documents (as defined by some external attribute),
I will wind up executing 300 x 3 searches, and for each search that is
executed, I will iterate over every Hit, even if I've already found the
one that I "care about".

What would break if you:
1.  Included "creator" in the Lucene index (or, filtered out the Hits
using a BitSet or something like it)
2.  Executed 1 search
3.  Collected the results of the first N Hits (where N is some
reasonable limit, like 100 or 500)

-h


On Tue, 2007-07-24 at 20:14 -0400, Askar Zaidi wrote:

> Sure.
> 
>  public float doBodySearch(Searcher searcher,String query, int id){
> 
>                  try{
>                                 score = search(searcher, query,id);
>                      }
>                       catch(IOException io){} 
>                       catch(ParseException pe){}
> 
>                       return score;
> 
>                 }
> 
>  private float search(Searcher searcher, String queryString, int id)
> throws ParseException, IOException { 
> 
>         // Build a Query object
> 
>         QueryParser queryParser = new QueryParser("contents", new
> KeywordAnalyzer());
> 
>         queryParser.setDefaultOperator(QueryParser.Operator.AND);
> 
>         Query query = queryParser.parse(queryString);
> 
>         // Search for the query
> 
>         Hits hits = searcher.search(query);
>         Document doc = null;
> 
>         // Examine the Hits object to see if there were any matches 
>         int hitCount = hits.length();
> 
>                 for(int i=0;i<hitCount;i++){
>                 doc = hits.doc(i);
>                 String str = doc.get("item");
>                 int tmp = Integer.parseInt(str);
>                 if(tmp==id)
>                 score = hits.score(i);
>                 }
> 
>         return score;
>     }
> 
> I really need to optimize doBodySearch(...) as this takes the most
> time. 
> 
> thanks guys,
> Askar 
> 
> 
> On 7/24/07, N. Hira <nhira@cognocys.com> wrote:
> 
>         Could you show us the relevant source from doBodySearch()?
>         
>         -h
>         
>         On Tue, 2007-07-24 at 19:58 -0400, Askar Zaidi wrote:
>         > I ran some tests and it seems that the slowness is from
>         Lucene calls when I
>         > do "doBodySearch", if I remove that call, Lucene gives me
>         results in 5 
>         > seconds. otherwise it takes about 50 seconds.
>         >
>         > But I need to do Body search and that field contains lots of
>         text. The field
>         > is <contents>. How can I optimize that ?
>         >
>         > thanks, 
>         > Askar
>         >
>         >




--=-RIeOAlpw2lhQAsHtbW+p--


From java-user-return-29361-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 25 04:31:00 2007
Return-Path: <java-user-return-29361-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45023 invoked from network); 25 Jul 2007 04:30:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2007 04:30:58 -0000
Received: (qmail 12400 invoked by uid 500); 25 Jul 2007 04:30:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12358 invoked by uid 500); 25 Jul 2007 04:30:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12347 invoked by uid 99); 25 Jul 2007 04:30:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 21:30:54 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [209.191.68.232] (HELO web36206.mail.mud.yahoo.com) (209.191.68.232)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 24 Jul 2007 21:30:51 -0700
Received: (qmail 1922 invoked by uid 60001); 25 Jul 2007 04:30:30 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=LZkc8jjSfm6TrmbvzDF8fTUFKsnv3pzP8ROMk5GYhaNK900SAWXWHg8mHBF5Cygsffd5jcKHjdZ8gX/oGHd045G8qM/s+Qgm8dCPXYqORhYUUsjZ4yGKTIQVWSt9O2IwFJdppNlZBMEsxXmCIKBtWq0l/WAqgCtemlSGYj1xFUw=  ;
Message-ID: <20070725043030.1920.qmail@web36206.mail.mud.yahoo.com>
X-YMail-OSG: IJ0hedcVM1ne8z9sX2iQs1e3sYL6IzaLgz0wuHOfDk8zuNyoJ8mbPbBufZJ6TRFAiCHQ2MJhR.MzBNspeDh8A8ubXigFGbjlMK5TuLg3Vp4OK4uXZfmddLCQ3EbBJQ--
Received: from [71.232.15.100] by web36206.mail.mud.yahoo.com via HTTP; Tue, 24 Jul 2007 21:30:30 PDT
Date: Tue, 24 Jul 2007 21:30:30 -0700 (PDT)
From: Lindsey Hess <lindseyhess83@yahoo.com>
Subject: What replaced org.apache.lucene.document.Field.Text?
To: Lucene <java-user@lucene.apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1535916747-1185337830=:871"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1535916747-1185337830=:871
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

I'm trying to get some relatively old Lucene code to compile (please see below), and it appears that Field.Text has been deprecated.  Can someone please suggest what I should use in its place?
   
  Thank you.
   
  Lindsey
   
   
   
  public static void main(String args[]) throws Exception
  {
  String indexDir =
  System.getProperty("java.io.tmpdir", "tmp") +
  System.getProperty("file.separator") + "address-book";
  Analyzer analyzer = new WhitespaceAnalyzer();
  boolean createFlag = true;
  
  IndexWriter writer = new IndexWriter(indexDir, analyzer, createFlag);
  Document contactDocument = new Document();
  contactDocument.add(Field.Text("type", "individual"));
  
  contactDocument.add(Field.Text("name", "Zane Pasolini"));
  contactDocument.add(Field.Text("address", "999 W. Prince St."));
  contactDocument.add(Field.Text("city", "New York"));
  contactDocument.add(Field.Text("province", "NY"));
  contactDocument.add(Field.Text("postalcode", "10013"));
  contactDocument.add(Field.Text("country", "USA"));
  contactDocument.add(Field.Text("telephone", "1-212-345-6789"));
  writer.addDocument(contactDocument);
  writer.close();
  }

       
---------------------------------
Fussy? Opinionated? Impossible to please? Perfect.  Join Yahoo!'s user panel and lay it on us.
--0-1535916747-1185337830=:871--

From java-user-return-29362-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 25 05:40:28 2007
Return-Path: <java-user-return-29362-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67104 invoked from network); 25 Jul 2007 05:40:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2007 05:40:26 -0000
Received: (qmail 93708 invoked by uid 500); 25 Jul 2007 05:40:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93667 invoked by uid 500); 25 Jul 2007 05:40:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93656 invoked by uid 99); 25 Jul 2007 05:40:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 22:40:18 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of askar.zaidi@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 22:40:16 -0700
Received: by ug-out-1314.google.com with SMTP id c2so349308ugf
        for <java-user@lucene.apache.org>; Tue, 24 Jul 2007 22:39:55 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=gosqK5EwnSu7qXUJVhJoRYRFXZG8aRfNPN+GPNimgxrpXnMn8jK5Pye+0pDpxoUxFGz86jFFpF7A9dfTEZe9M+ytoL3UlGs8JnzeM6FWfu0JGxWw3M8gUpi89wiUxkoslJiawtcldpgCG08pifczbusGJURuWIMDKv++wgJUoVQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=aXJ/p7F4tdMchlJkwLpnGnzgEUeJeAsqML5qkdrUj8wJkGPLSiRhuzrAE/o+sj+eJ7fck++/881XIfTU5MxLJPW13OGUOmgpnLA+Mue2DQbrFhBW7i8vpZjcN6ZyHXvgs0sScvPwwlAM52fD09m8cs+J6hVMpr7cGdflKKMl8nQ=
Received: by 10.67.89.6 with SMTP id r6mr1146661ugl.1185341994967;
        Tue, 24 Jul 2007 22:39:54 -0700 (PDT)
Received: by 10.66.251.15 with HTTP; Tue, 24 Jul 2007 22:39:54 -0700 (PDT)
Message-ID: <c0c0e1d40707242239y17296bf3rcb9daf6ab3cd9c2f@mail.gmail.com>
Date: Wed, 25 Jul 2007 01:39:54 -0400
From: "Askar Zaidi" <askar.zaidi@gmail.com>
To: java-user@lucene.apache.org, nhira@cognocys.com
Subject: Re: Fine Tuning Lucene implementation
In-Reply-To: <1185325363.4593.70.camel@localhost>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_557_9503203.1185341994899"
References: <c0c0e1d40707241243y5ddfd5fai10381873a2d2bd64@mail.gmail.com>
	 <c0c0e1d40707241331i7be68a3dr27924a8e4f186427@mail.gmail.com>
	 <B6CD8741-E8F5-4D00-8579-DDD8944469AA@apache.org>
	 <c0c0e1d40707241428r44ee7926q7f9199687650baf3@mail.gmail.com>
	 <28F241F7-C4AD-414C-89D8-95AC22C0736B@apache.org>
	 <c0c0e1d40707241658tfd64870v40a6b9431780fe98@mail.gmail.com>
	 <1185322083.4593.54.camel@localhost>
	 <c0c0e1d40707241714k4cef2167lcd7a5cec866b8555@mail.gmail.com>
	 <1185325363.4593.70.camel@localhost>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_557_9503203.1185341994899
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hey Hira ,

Thanks so much for the reply. Much appreciate it.

Quote:

Would it be possible to just include a query clause?
   - i.e., instead of just contents:<userQuery>, also add
+id:<idWeCareAbout>

How can I do that ?

I see my query as :

+contents:harvard +contents:business +contents:review

where the search phrase was: harvard business review

Now how can I add +id:<idWeCareAbout>  ??

This would give me that one exact document I am looking for , for that id. I
don't have to iterate through hits.

thanks,

Askar



On 7/24/07, N. Hira <nhira@cognocys.com> wrote:
>
> I'm no expert on this (so please accept the comments in that context)
> but 2 things seem weird to me:
>
> 1.  Iterating over each hit is an expensive proposition.  I've often
> seen people recommending a HitCollector.
>
> 2.  It seems that doBodySearch() is essentially saying, do this search
> and return the score pertinent to this ID (using an exhaustive loop).
> Would it be possible to just include a query clause?
>     - i.e., instead of just contents:<userQuery>, also add
> +id:<idWeCareAbout>
>
> In general though, I think your algorithm seems inefficient (if I
> understand it correctly):-- if I want to search for one term among 3 in
> a "collection" of 300 documents (as defined by some external attribute),
> I will wind up executing 300 x 3 searches, and for each search that is
> executed, I will iterate over every Hit, even if I've already found the
> one that I "care about".
>
> What would break if you:
> 1.  Included "creator" in the Lucene index (or, filtered out the Hits
> using a BitSet or something like it)
> 2.  Executed 1 search
> 3.  Collected the results of the first N Hits (where N is some
> reasonable limit, like 100 or 500)
>
> -h
>
>
> On Tue, 2007-07-24 at 20:14 -0400, Askar Zaidi wrote:
>
> > Sure.
> >
> >  public float doBodySearch(Searcher searcher,String query, int id){
> >
> >                  try{
> >                                 score = search(searcher, query,id);
> >                      }
> >                       catch(IOException io){}
> >                       catch(ParseException pe){}
> >
> >                       return score;
> >
> >                 }
> >
> >  private float search(Searcher searcher, String queryString, int id)
> > throws ParseException, IOException {
> >
> >         // Build a Query object
> >
> >         QueryParser queryParser = new QueryParser("contents", new
> > KeywordAnalyzer());
> >
> >         queryParser.setDefaultOperator(QueryParser.Operator.AND);
> >
> >         Query query = queryParser.parse(queryString);
> >
> >         // Search for the query
> >
> >         Hits hits = searcher.search(query);
> >         Document doc = null;
> >
> >         // Examine the Hits object to see if there were any matches
> >         int hitCount = hits.length();
> >
> >                 for(int i=0;i<hitCount;i++){
> >                 doc = hits.doc(i);
> >                 String str = doc.get("item");
> >                 int tmp = Integer.parseInt(str);
> >                 if(tmp==id)
> >                 score = hits.score(i);
> >                 }
> >
> >         return score;
> >     }
> >
> > I really need to optimize doBodySearch(...) as this takes the most
> > time.
> >
> > thanks guys,
> > Askar
> >
> >
> > On 7/24/07, N. Hira <nhira@cognocys.com> wrote:
> >
> >         Could you show us the relevant source from doBodySearch()?
> >
> >         -h
> >
> >         On Tue, 2007-07-24 at 19:58 -0400, Askar Zaidi wrote:
> >         > I ran some tests and it seems that the slowness is from
> >         Lucene calls when I
> >         > do "doBodySearch", if I remove that call, Lucene gives me
> >         results in 5
> >         > seconds. otherwise it takes about 50 seconds.
> >         >
> >         > But I need to do Body search and that field contains lots of
> >         text. The field
> >         > is <contents>. How can I optimize that ?
> >         >
> >         > thanks,
> >         > Askar
> >         >
> >         >
>
>
>
>

------=_Part_557_9503203.1185341994899--

From java-user-return-29363-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 25 05:51:07 2007
Return-Path: <java-user-return-29363-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68230 invoked from network); 25 Jul 2007 05:51:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2007 05:51:06 -0000
Received: (qmail 8426 invoked by uid 500); 25 Jul 2007 05:51:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8380 invoked by uid 500); 25 Jul 2007 05:51:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8369 invoked by uid 99); 25 Jul 2007 05:51:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 22:51:01 -0700
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=FROM_HAS_ULINE_NUMS,MAILTO_TO_SPAM_ADDR,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.222.32.20] (HELO mexforward.lss.emc.com) (128.222.32.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 22:50:59 -0700
Received: from mailhub.lss.emc.com (nagas.lss.emc.com [10.254.144.11])
	by mexforward.lss.emc.com (Switch-3.2.5/Switch-3.1.7) with ESMTP id l6P5oask028589
	for <java-user@lucene.apache.org>; Wed, 25 Jul 2007 01:50:36 -0400 (EDT)
Received: from corpussmtp3.corp.emc.com (corpussmtp3.corp.emc.com [10.254.64.53])
	by mailhub.lss.emc.com (Switch-3.2.5/Switch-3.1.7) with ESMTP id l6P5o7Y3020349
	for <java-user@lucene.apache.org>; Wed, 25 Jul 2007 01:50:35 -0400 (EDT)
From: Liu_Andy2@emc.com
Received: from CORPUSMX10B.corp.emc.com ([128.221.14.93]) by corpussmtp3.corp.emc.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 25 Jul 2007 01:50:34 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: What replaced org.apache.lucene.document.Field.Text?
Date: Wed, 25 Jul 2007 01:49:06 -0400
Message-ID: <F3B3254741B1404D92215D80C451DE8401A0EA3F@CORPUSMX10B.corp.emc.com>
In-Reply-To: <20070725043030.1920.qmail@web36206.mail.mud.yahoo.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: What replaced org.apache.lucene.document.Field.Text?
Thread-Index: AcfOdKB1hvZnu5AwTwaOBkOoeyIv+AACsbfw
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 25 Jul 2007 05:50:34.0918 (UTC) FILETIME=[B8288460:01C7CE7F]
X-PMX-Version: 4.7.1.128075, Antispam-Engine: 2.5.1.298604, Antispam-Data: 2007.7.6.21134
X-PerlMx-Spam: Gauge=, SPAM=1%, Reason='EMC_FROM_0+ -3, NO_REAL_NAME 0, __C230066_P5 0, __CP_URI_IN_BODY 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __IMS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0'
X-Virus-Checked: Checked by ClamAV on apache.org

Please reference How do I get code written for Lucene 1.4.x to work with
Lucene 2.x?
http://wiki.apache.org/lucene-java/LuceneFAQ#head-86d479476c63a2579e867b
75d4faa9664ef6cf4d


Andy
-----Original Message-----
From: Lindsey Hess [mailto:lindseyhess83@yahoo.com]=20
Sent: Wednesday, July 25, 2007 12:31 PM
To: Lucene
Subject: What replaced org.apache.lucene.document.Field.Text?

I'm trying to get some relatively old Lucene code to compile (please see
below), and it appears that Field.Text has been deprecated.  Can someone
please suggest what I should use in its place?
  =20
  Thank you.
  =20
  Lindsey
  =20
  =20
  =20
  public static void main(String args[]) throws Exception
  {
  String indexDir =3D
  System.getProperty("java.io.tmpdir", "tmp") +
  System.getProperty("file.separator") + "address-book";
  Analyzer analyzer =3D new WhitespaceAnalyzer();
  boolean createFlag =3D true;
 =20
  IndexWriter writer =3D new IndexWriter(indexDir, analyzer, =
createFlag);
  Document contactDocument =3D new Document();
  contactDocument.add(Field.Text("type", "individual"));
 =20
  contactDocument.add(Field.Text("name", "Zane Pasolini"));
  contactDocument.add(Field.Text("address", "999 W. Prince St."));
  contactDocument.add(Field.Text("city", "New York"));
  contactDocument.add(Field.Text("province", "NY"));
  contactDocument.add(Field.Text("postalcode", "10013"));
  contactDocument.add(Field.Text("country", "USA"));
  contactDocument.add(Field.Text("telephone", "1-212-345-6789"));
  writer.addDocument(contactDocument);
  writer.close();
  }

      =20
---------------------------------
Fussy? Opinionated? Impossible to please? Perfect.  Join Yahoo!'s user
panel and lay it on us.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29364-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 25 06:01:49 2007
Return-Path: <java-user-return-29364-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70806 invoked from network); 25 Jul 2007 06:01:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2007 06:01:48 -0000
Received: (qmail 28084 invoked by uid 500); 25 Jul 2007 06:01:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28057 invoked by uid 500); 25 Jul 2007 06:01:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28046 invoked by uid 99); 25 Jul 2007 06:01:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 23:01:43 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=MSGID_FROM_MTA_HEADER,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of dmitrytkach1@hotmail.com designates 65.54.246.107 as permitted sender)
Received: from [65.54.246.107] (HELO bay0-omc1-s35.bay0.hotmail.com) (65.54.246.107)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jul 2007 23:01:40 -0700
Received: from hotmail.com ([65.54.169.82]) by bay0-omc1-s35.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.2668);
	 Tue, 24 Jul 2007 23:01:20 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Tue, 24 Jul 2007 23:01:20 -0700
Message-ID: <BAY114-DAV100592591AD1D725911CE594F10@phx.gbl>
Received: from 24.12.157.130 by BAY114-DAV10.phx.gbl with DAV;
	Wed, 25 Jul 2007 06:01:19 +0000
X-Originating-IP: [24.12.157.130]
X-Originating-Email: [dmitrytkach1@hotmail.com]
X-Sender: dmitrytkach1@hotmail.com
From: "Dmitry" <dmitrytkach1@hotmail.com>
To: <java-user@lucene.apache.org>
References: <c0c0e1d40707241243y5ddfd5fai10381873a2d2bd64@mail.gmail.com> <c0c0e1d40707241331i7be68a3dr27924a8e4f186427@mail.gmail.com> <B6CD8741-E8F5-4D00-8579-DDD8944469AA@apache.org> <c0c0e1d40707241428r44ee7926q7f9199687650baf3@mail.gmail.com> <28F241F7-C4AD-414C-89D8-95AC22C0736B@apache.org> <c0c0e1d40707241658tfd64870v40a6b9431780fe98@mail.gmail.com> <1185322083.4593.54.camel@localhost> <c0c0e1d40707241714k4cef2167lcd7a5cec866b8555@mail.gmail.com> <1185325363.4593.70.camel@localhost> <c0c0e1d40707242239y17296bf3rcb9daf6ab3cd9c2f@mail.gmail.com>
Subject: Re: Fine Tuning Lucene implementation
Date: Wed, 25 Jul 2007 01:01:18 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3028
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
X-OriginalArrivalTime: 25 Jul 2007 06:01:20.0247 (UTC) FILETIME=[38CDE870:01C7CE81]
X-Virus-Checked: Checked by ClamAV on apache.org

Askar,
why do you need to add +id:<idWeCareAbout>?
thanks,
dt,
www.ejinz.com
search engine news forms
----- Original Message ----- 
From: "Askar Zaidi" <askar.zaidi@gmail.com>
To: <java-user@lucene.apache.org>; <nhira@cognocys.com>
Sent: Wednesday, July 25, 2007 12:39 AM
Subject: Re: Fine Tuning Lucene implementation


> Hey Hira ,
>
> Thanks so much for the reply. Much appreciate it.
>
> Quote:
>
> Would it be possible to just include a query clause?
>   - i.e., instead of just contents:<userQuery>, also add
> +id:<idWeCareAbout>
>
> How can I do that ?
>
> I see my query as :
>
> +contents:harvard +contents:business +contents:review
>
> where the search phrase was: harvard business review
>
> Now how can I add +id:<idWeCareAbout>  ??
>
> This would give me that one exact document I am looking for , for that id. 
> I
> don't have to iterate through hits.
>
> thanks,
>
> Askar
>
>
>
> On 7/24/07, N. Hira <nhira@cognocys.com> wrote:
>>
>> I'm no expert on this (so please accept the comments in that context)
>> but 2 things seem weird to me:
>>
>> 1.  Iterating over each hit is an expensive proposition.  I've often
>> seen people recommending a HitCollector.
>>
>> 2.  It seems that doBodySearch() is essentially saying, do this search
>> and return the score pertinent to this ID (using an exhaustive loop).
>> Would it be possible to just include a query clause?
>>     - i.e., instead of just contents:<userQuery>, also add
>> +id:<idWeCareAbout>
>>
>> In general though, I think your algorithm seems inefficient (if I
>> understand it correctly):-- if I want to search for one term among 3 in
>> a "collection" of 300 documents (as defined by some external attribute),
>> I will wind up executing 300 x 3 searches, and for each search that is
>> executed, I will iterate over every Hit, even if I've already found the
>> one that I "care about".
>>
>> What would break if you:
>> 1.  Included "creator" in the Lucene index (or, filtered out the Hits
>> using a BitSet or something like it)
>> 2.  Executed 1 search
>> 3.  Collected the results of the first N Hits (where N is some
>> reasonable limit, like 100 or 500)
>>
>> -h
>>
>>
>> On Tue, 2007-07-24 at 20:14 -0400, Askar Zaidi wrote:
>>
>> > Sure.
>> >
>> >  public float doBodySearch(Searcher searcher,String query, int id){
>> >
>> >                  try{
>> >                                 score = search(searcher, query,id);
>> >                      }
>> >                       catch(IOException io){}
>> >                       catch(ParseException pe){}
>> >
>> >                       return score;
>> >
>> >                 }
>> >
>> >  private float search(Searcher searcher, String queryString, int id)
>> > throws ParseException, IOException {
>> >
>> >         // Build a Query object
>> >
>> >         QueryParser queryParser = new QueryParser("contents", new
>> > KeywordAnalyzer());
>> >
>> >         queryParser.setDefaultOperator(QueryParser.Operator.AND);
>> >
>> >         Query query = queryParser.parse(queryString);
>> >
>> >         // Search for the query
>> >
>> >         Hits hits = searcher.search(query);
>> >         Document doc = null;
>> >
>> >         // Examine the Hits object to see if there were any matches
>> >         int hitCount = hits.length();
>> >
>> >                 for(int i=0;i<hitCount;i++){
>> >                 doc = hits.doc(i);
>> >                 String str = doc.get("item");
>> >                 int tmp = Integer.parseInt(str);
>> >                 if(tmp==id)
>> >                 score = hits.score(i);
>> >                 }
>> >
>> >         return score;
>> >     }
>> >
>> > I really need to optimize doBodySearch(...) as this takes the most
>> > time.
>> >
>> > thanks guys,
>> > Askar
>> >
>> >
>> > On 7/24/07, N. Hira <nhira@cognocys.com> wrote:
>> >
>> >         Could you show us the relevant source from doBodySearch()?
>> >
>> >         -h
>> >
>> >         On Tue, 2007-07-24 at 19:58 -0400, Askar Zaidi wrote:
>> >         > I ran some tests and it seems that the slowness is from
>> >         Lucene calls when I
>> >         > do "doBodySearch", if I remove that call, Lucene gives me
>> >         results in 5
>> >         > seconds. otherwise it takes about 50 seconds.
>> >         >
>> >         > But I need to do Body search and that field contains lots of
>> >         text. The field
>> >         > is <contents>. How can I optimize that ?
>> >         >
>> >         > thanks,
>> >         > Askar
>> >         >
>> >         >
>>
>>
>>
>>
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29365-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 25 07:00:39 2007
Return-Path: <java-user-return-29365-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86026 invoked from network); 25 Jul 2007 07:00:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2007 07:00:38 -0000
Received: (qmail 21965 invoked by uid 500); 25 Jul 2007 07:00:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21922 invoked by uid 500); 25 Jul 2007 07:00:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21911 invoked by uid 99); 25 Jul 2007 07:00:26 -0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=RCVD_IN_SORBS_WEB
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [213.162.48.15] (HELO soufre.accelance.net) (213.162.48.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 00:00:25 -0700
Received: from [192.168.2.156] (corp-gw.accelance.net [213.162.48.17])
	(using TLSv1 with cipher RC4-MD5 (128/128 bits))
	(No client certificate requested)
	by soufre.accelance.net (Postfix) with ESMTP id 10D415D76
	for <java-user@lucene.apache.org>; Wed, 25 Jul 2007 08:59:53 +0200 (CEST)
Subject: Re: Lucene and Eastern languages (Japanese, Korean and Chinese)
From: Mathieu Lecarme <mathieu@garambrogne.net>
To: java-user@lucene.apache.org
In-Reply-To: <95570511135B1042A7B5A3269303107005DAEE50@SDGEXEVS01.corp.intuit.net>
References:
	 <95570511135B1042A7B5A3269303107005DAEE50@SDGEXEVS01.corp.intuit.net>
Content-Type: text/plain; charset=utf-8
Date: Wed, 25 Jul 2007 08:59:52 +0200
Message-Id: <1185346792.5845.7.camel@mlecarme-laptop>
Mime-Version: 1.0
X-Mailer: Evolution 2.10.1 
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Le mardi 24 juillet 2007  13:01 -0700, Shaw, James a crit :
> Hi, guys,
> I found Analyzers for Japanese, Korean and Chinese, but not stemmers;
> the Snowball stemmers only include European languages.  Does stemming
> not make sense for ideograph-based languages (i.e., no stemming is
> needed for Japanese, Korean and Chinese)?
No.

> Also for spell checking, does the default Lucene SpellChecker work for
> Japanese, Korean and Chinese?  Does edit distance make sense for these
> languages?
Japanese used group of ideogram, but levenstein distance don't make
sense with few letters but I'm not a CJK expert.

M.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29366-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 25 07:19:21 2007
Return-Path: <java-user-return-29366-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89984 invoked from network); 25 Jul 2007 07:19:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2007 07:19:20 -0000
Received: (qmail 50939 invoked by uid 500); 25 Jul 2007 07:19:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50891 invoked by uid 500); 25 Jul 2007 07:19:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50865 invoked by uid 99); 25 Jul 2007 07:19:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 00:19:14 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mailing.patrick.kimber@gmail.com designates 209.85.146.181 as permitted sender)
Received: from [209.85.146.181] (HELO wa-out-1112.google.com) (209.85.146.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 00:19:12 -0700
Received: by wa-out-1112.google.com with SMTP id j40so121925wah
        for <java-user@lucene.apache.org>; Wed, 25 Jul 2007 00:18:51 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=IA7qd4Y8nC9BXtvt6iHM9m4BgLkQNdFr0W93fcN1Rr8+kLESD/hA4n99Y4JYZP7L2rFCcLn0DXGQ+wu0GunB+tOMWFFWrR/kbpe6PB06pcRSuOIl3pxhYssyOtNric9c0zWIjg4miEcTdna49nD5qvUelrEJ+fCDMyLsmO6mqyk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=XrEPvByrH8u3/btZekV5zbE8s/lM+WPolEjirggjeW5R7wuPUg1Lchpf0SgySOGphe0yF5MKfPlM3N3YAcrX2ISKk5bFjRGEJTiS2SiPQQRib0v7AjooL+wtwlmlskxLoKZY1AASGyQwwOL11vSWH23xjhxo7cup+nBrypwHhuQ=
Received: by 10.115.79.1 with SMTP id g1mr367741wal.1185347931125;
        Wed, 25 Jul 2007 00:18:51 -0700 (PDT)
Received: by 10.114.37.3 with HTTP; Wed, 25 Jul 2007 00:18:51 -0700 (PDT)
Message-ID: <4f9b23800707250018u38132a2fs2619cb3b3bc5c779@mail.gmail.com>
Date: Wed, 25 Jul 2007 08:18:51 +0100
From: "Patrick Kimber" <mailing.patrick.kimber@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: What replaced org.apache.lucene.document.Field.Text?
In-Reply-To: <F3B3254741B1404D92215D80C451DE8401A0EA3F@CORPUSMX10B.corp.emc.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <20070725043030.1920.qmail@web36206.mail.mud.yahoo.com>
	 <F3B3254741B1404D92215D80C451DE8401A0EA3F@CORPUSMX10B.corp.emc.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Andy

I think:
Field.Text("name", "value");

has been replaced with:
new Field("name", "value", Field.Store.YES, Field.Index.TOKENIZED);

Patrick

On 25/07/07, Liu_Andy2@emc.com <Liu_Andy2@emc.com> wrote:
> Please reference How do I get code written for Lucene 1.4.x to work with
> Lucene 2.x?
> http://wiki.apache.org/lucene-java/LuceneFAQ#head-86d479476c63a2579e867b
> 75d4faa9664ef6cf4d
>
>
> Andy
> -----Original Message-----
> From: Lindsey Hess [mailto:lindseyhess83@yahoo.com]
> Sent: Wednesday, July 25, 2007 12:31 PM
> To: Lucene
> Subject: What replaced org.apache.lucene.document.Field.Text?
>
> I'm trying to get some relatively old Lucene code to compile (please see
> below), and it appears that Field.Text has been deprecated.  Can someone
> please suggest what I should use in its place?
>
>   Thank you.
>
>   Lindsey
>
>
>
>   public static void main(String args[]) throws Exception
>   {
>   String indexDir =
>   System.getProperty("java.io.tmpdir", "tmp") +
>   System.getProperty("file.separator") + "address-book";
>   Analyzer analyzer = new WhitespaceAnalyzer();
>   boolean createFlag = true;
>
>   IndexWriter writer = new IndexWriter(indexDir, analyzer, createFlag);
>   Document contactDocument = new Document();
>   contactDocument.add(Field.Text("type", "individual"));
>
>   contactDocument.add(Field.Text("name", "Zane Pasolini"));
>   contactDocument.add(Field.Text("address", "999 W. Prince St."));
>   contactDocument.add(Field.Text("city", "New York"));
>   contactDocument.add(Field.Text("province", "NY"));
>   contactDocument.add(Field.Text("postalcode", "10013"));
>   contactDocument.add(Field.Text("country", "USA"));
>   contactDocument.add(Field.Text("telephone", "1-212-345-6789"));
>   writer.addDocument(contactDocument);
>   writer.close();
>   }
>
>
> ---------------------------------
> Fussy? Opinionated? Impossible to please? Perfect.  Join Yahoo!'s user
> panel and lay it on us.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29367-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 25 08:57:57 2007
Return-Path: <java-user-return-29367-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21366 invoked from network); 25 Jul 2007 08:57:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2007 08:57:56 -0000
Received: (qmail 95615 invoked by uid 500); 25 Jul 2007 08:57:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95430 invoked by uid 500); 25 Jul 2007 08:57:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95418 invoked by uid 99); 25 Jul 2007 08:57:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 01:57:50 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of daniel.rosher@hotonline.com designates 85.115.41.190 as permitted sender)
Received: from [85.115.41.190] (HELO cluster-g.mailcontrol.com) (85.115.41.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 01:57:48 -0700
Received: from mail.workthing.com (mail.workthing.com [195.224.106.50])
	by rly14g.srv.mailcontrol.com (MailControl) with ESMTP id l6P8vG80016474
	for <java-user@lucene.apache.org>; Wed, 25 Jul 2007 09:57:26 +0100
thread-index: AcfOmbSQlWWy1hQGRQ+mZ57jpxZeKg==
Content-Class: urn:content-classes:message
Importance: normal
Priority: normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.2757
Received: from [192.168.222.59] ([192.168.222.59] RDNS failed) by mail.workthing.com with Microsoft SMTPSVC(6.0.3790.1830); Wed, 25 Jul 2007 09:56:35 +0100
Subject: Re: Search for null
From: "daniel rosher" <daniel.rosher@hotonline.com>
To: <java-user@lucene.apache.org>
In-Reply-To: <46A62B98.40602@ai.sri.com>
References: <11746864.post@talk.nabble.com> <0E1018D4-E9DB-424C-84F9-C72B1AA5D3B3@ehatchersolutions.com> <46A50FBA.9000109@affinitycircles.com>  <46A51638.1050708@ai.sri.com> <1185277710.10469.26.camel@rosher.org>  <46A62B98.40602@ai.sri.com>
Content-Type: text/plain;
	charset="Windows-1252"
Date: Wed, 25 Jul 2007 09:56:55 +0100
Message-ID: <1185353815.9695.20.camel@rosher.org>
MIME-Version: 1.0
X-Mailer: Evolution 2.10.1 
Content-Transfer-Encoding: quoted-printable
X-OriginalArrivalTime: 25 Jul 2007 08:56:35.0524 (UTC) FILETIME=[B465D840:01C7CE99]
X-Scanned-By: MailControl A-07-08-00 (www.mailcontrol.com) on 10.71.0.124
X-Virus-Checked: Checked by ClamAV on apache.org

You will be unable to search for fields that do not exist which is what
you originally wanted to do, instead you can do something like:

-Establish the query that will select all non-null values

TermQuery tq1 =3D new TermQuery(new Term("field","value1"));
TermQuery tq2 =3D new TermQuery(new Term("field","value2"));
...
TermQuery tqn =3D new TermQuery(new Term("field","valuen"));
BooleanQuery query =3D new BooleanQuery();
booleanQuery.add(tq1,BooleanClause.Occur.SHOULD);
booleanQuery.add(tq2,BooleanClause.Occur.SHOULD);
...
booleanQuery.add(tqn,BooleanClause.Occur.SHOULD);

OR perhaps a range query if your values are contiguous

Term start =3D new Term("field","198805");
Term end =3D new Term("field","198810");
Query query =3D new RangeQuery(start, end, true);
;

OR just use the QueryParser

Query query =3D QueryParser.parse(parseCriteria,
"field", new StandardAnalyzer());

-Create the QueryFilter

QueryFilter queryFilter =3D new QueryFilter(query);

-flip the bits

final BitSet filterBitSet =3D queryFilter.bits(reader);
filterBitSet.flip(0,filterBitSet.size());

Now you have a filter that contains document matching the opposite of
that specified by the query, and can use in subsequent queries

Dan



On Tue, 2007-07-24 at 09:40 -0700, Jay Yu wrote:
>=20
> daniel rosher wrote:
> > Perhaps you can use a filter in the following way.
> >=20
> > -Create a filter (via QueryFilter) that would contain all document =
that
> > do not have null values for the field
> Interesting: what does the QueryFilter look like? Isn't it just as =
hard=20
> as finding out what docs have the null values for the field?
> I really like to know your trick here.
> > -flip the bits of the filter so that it now contains documents that =
have
> > null values for a field
> > -Use the filter in conjunction with subsequent queries.
> >=20
> > This would also help with performance as filters are simply bitsets =
and
> > can cheaply be stored, generated once and used often.
> >=20
> > Dan
> >=20
> > On Mon, 2007-07-23 at 13:57 -0700, Jay Yu wrote:
> >> If you want performance, a better way might be to assign some =
special=20
> >> string/value (if it's easy to create) to the missing field of docs =
and=20
> >> index the field without tokenizing it. Then you may search for that =

> >> special value to find the docs.
> >>
> >> Jay
> >>
> >> Les Fletcher wrote:
> >>> Does this particular range query have any significant performance =
issues?
> >>>
> >>> Les
> >>>
> >>> Erik Hatcher wrote:
> >>>> On Jul 23, 2007, at 11:32 AM, testn wrote:
> >>>>> Is it possible to search for the document that specified field=20
> >>>>> doesn't exist
> >>>>> or such field value is null?
> >>>> This is from Solr, so I'm not sure off the top of my head if this =
mojo=20
> >>>> applies by itself, but a search for -fieldname:[* TO *] will =
result in=20
> >>>> all documents that do not have the specified field.
> >>>>
> >>>>     Erik
> >>>>
> >>>>
> >>>> =
---------------------------------------------------------------------
> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>
> >>> =
---------------------------------------------------------------------
> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >> =
---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >>
> >> <<This email has been scanned for virus and spam content>>
> > Daniel Rosher
> > Developer
> >=20
> >=20
> > d: 0207 3489 912
> > t: 0870 2020 121
> > f: 0870 2020 131
> > m:=20
> > http://www.hotonline.com/
> >=20
> >=20
> >=20
> >=20
> >=20
> >=20
> > - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - =
- - - - - - - - - - - - - - - - - - - - -
> > This message is sent in confidence for the addressee only. It may =
contain privileged=20
> > information. The contents are not to be disclosed to anyone other =
than the addressee.=20
> > Unauthorised recipients are requested to preserve this =
confidentiality and to advise=20
> > us of any errors in transmission. Thank you.
> >=20
> > hotonline ltd is registered in England & Wales. Registered office: =
One Canada Square,=20
> > Canary Wharf, London E14 5AP. Registered No: 1904765.
> >=20
> >=20
> > This message has been scanned for viruses by BlackSpider MailControl =
- www.blackspider.com
> >=20
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
Daniel Rosher
Developer


d: 0207 3489 912
t: 0870 2020 121
f: 0870 2020 131
m:=20
http://www.hotonline.com/






- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - =
- - - - - - - - - - - - - - - - - - -
This message is sent in confidence for the addressee only. It may =
contain privileged=20
information. The contents are not to be disclosed to anyone other than =
the addressee.=20
Unauthorised recipients are requested to preserve this confidentiality =
and to advise=20
us of any errors in transmission. Thank you.

hotonline ltd is registered in England & Wales. Registered office: One =
Canada Square,=20
Canary Wharf, London E14 5AP. Registered No: 1904765.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29368-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 25 09:09:29 2007
Return-Path: <java-user-return-29368-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25233 invoked from network); 25 Jul 2007 09:09:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2007 09:09:27 -0000
Received: (qmail 15065 invoked by uid 500); 25 Jul 2007 09:09:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15031 invoked by uid 500); 25 Jul 2007 09:09:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15020 invoked by uid 99); 25 Jul 2007 09:09:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 02:09:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [82.138.248.236] (HELO bacchus.thegestalt.org) (82.138.248.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 02:09:18 -0700
Received: from [82.138.248.236] (helo=bacchus.thegestalt.org)
	by bacchus.thegestalt.org with esmtp (Exim 4.61 (FreeBSD))
	(envelope-from <simon@thegestalt.org>)
	id 1IDcrY-000AkF-Lk
	for java-user@lucene.apache.org; Wed, 25 Jul 2007 10:08:56 +0100
Received: (from simon@localhost)
	by bacchus.thegestalt.org (8.13.6/8.13.6/Submit) id l6P98uxB041306
	for java-user@lucene.apache.org; Wed, 25 Jul 2007 10:08:56 +0100 (BST)
	(envelope-from simon@thegestalt.org)
X-Authentication-Warning: bacchus.thegestalt.org: simon set sender to simon@thegestalt.org using -f
Date: Wed, 25 Jul 2007 10:08:56 +0100
From: Simon Wistow <simon@thegestalt.org>
To: Lucene <java-user@lucene.apache.org>
Subject: Recovering from a Crash
Message-ID: <20070725090856.GP74636@thegestalt.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.4.2.1i
X-Virus-Checked: Checked by ClamAV on apache.org

We were affected by the great SF outage yesterday and apparently the 
indexing machine crashed without being shutdown properly.

I've taken a backup of the indexes which has the usual smattering of 
write.lock segments.gen, .cfs, .fdt, .fnm and .fdx etc files and looks 
to be about the right size.

However, if I start up my indexer with that directory it shrinks to a 
fraction of its size (500 times smaller) and (obviously) contains 
virtually no documents.

The data appears to be there - please tell me that I'm doing something 
stupid and I can recover from this.

Simon



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29369-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 25 09:20:10 2007
Return-Path: <java-user-return-29369-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27456 invoked from network); 25 Jul 2007 09:20:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2007 09:20:09 -0000
Received: (qmail 29901 invoked by uid 500); 25 Jul 2007 09:19:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29873 invoked by uid 500); 25 Jul 2007 09:19:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29615 invoked by uid 99); 25 Jul 2007 09:19:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 02:19:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 02:19:52 -0700
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id 2D527A38B
	for <java-user@lucene.apache.org>; Wed, 25 Jul 2007 05:19:31 -0400 (EDT)
Received: from web8.messagingengine.com ([10.202.2.217])
  by compute1.internal (MEProxy); Wed, 25 Jul 2007 05:19:31 -0400
Received: by web8.messagingengine.com (Postfix, from userid 99)
	id 0DFD7C5DF; Wed, 25 Jul 2007 05:19:31 -0400 (EDT)
Message-Id: <1185355171.13227.1201934431@webmail.messagingengine.com>
X-Sasl-Enc: 31FeNHcvmhXsPxdb133d5wsvCY9Bl1yaMrpl151zej9J 1185355171
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <20070725090856.GP74636@thegestalt.org>
Subject: Re: Recovering from a Crash
In-Reply-To: <20070725090856.GP74636@thegestalt.org>
Date: Wed, 25 Jul 2007 05:19:31 -0400
X-Virus-Checked: Checked by ClamAV on apache.org

"Simon Wistow" <simon@thegestalt.org> wrote:
> We were affected by the great SF outage yesterday and apparently the 
> indexing machine crashed without being shutdown properly.

Eek, sorry!  We are so reliant on electricity these days....
 
> I've taken a backup of the indexes which has the usual smattering of 
> write.lock segments.gen, .cfs, .fdt, .fnm and .fdx etc files and looks 
> to be about the right size.

Hmm, how do you do your backups?   Is there a segments_N file present
in the backup?

It's somewhat spooky that you have a write.lock present because that
means you backed up while a writer was actively writing to the index
which is a bit dangerous because if the timing is unlucky (backup does
an "ls" but before it can copy the segments_N file a commit has
happened) you could fail to copy a segments_N file.  It's best to
either pause the writer for backpus to occur (simplest) or make a
custom deletion policy that safely allows the backup to slowly copy
even while indexing is continuing (advanced).

> However, if I start up my indexer with that directory it shrinks to a 
> fraction of its size (500 times smaller) and (obviously) contains 
> virtually no documents.

It seems like the segments_N file may be missing?

> The data appears to be there - please tell me that I'm doing something 
> stupid and I can recover from this.

Maybe try other (older) backups to see if they have the segments_N file?

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29370-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 25 09:22:04 2007
Return-Path: <java-user-return-29370-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27815 invoked from network); 25 Jul 2007 09:22:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2007 09:22:02 -0000
Received: (qmail 34508 invoked by uid 500); 25 Jul 2007 09:21:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34010 invoked by uid 500); 25 Jul 2007 09:21:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33999 invoked by uid 99); 25 Jul 2007 09:21:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 02:21:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [82.138.248.236] (HELO bacchus.thegestalt.org) (82.138.248.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 02:21:54 -0700
Received: from [82.138.248.236] (helo=bacchus.thegestalt.org)
	by bacchus.thegestalt.org with esmtp (Exim 4.61 (FreeBSD))
	(envelope-from <simon@thegestalt.org>)
	id 1IDd3l-000B8P-Ne
	for java-user@lucene.apache.org; Wed, 25 Jul 2007 10:21:33 +0100
Received: (from simon@localhost)
	by bacchus.thegestalt.org (8.13.6/8.13.6/Submit) id l6P9LXFH042804
	for java-user@lucene.apache.org; Wed, 25 Jul 2007 10:21:33 +0100 (BST)
	(envelope-from simon@thegestalt.org)
X-Authentication-Warning: bacchus.thegestalt.org: simon set sender to simon@thegestalt.org using -f
Date: Wed, 25 Jul 2007 10:21:33 +0100
From: Simon Wistow <simon@thegestalt.org>
To: Lucene <java-user@lucene.apache.org>
Subject: Re: Recovering from a Crash
Message-ID: <20070725092133.GQ74636@thegestalt.org>
References: <20070725090856.GP74636@thegestalt.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <20070725090856.GP74636@thegestalt.org>
User-Agent: Mutt/1.4.2.1i
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, Jul 25, 2007 at 10:08:56AM +0100, me said:
> The data appears to be there - please tell me that I'm doing something 
> stupid and I can recover from this.

It appears by deleting the write.lock files everything has recovered.

Is this best practice? Have I just done something so terribly wrong that 
I've bought about the end of the universe?




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29371-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 25 09:23:21 2007
Return-Path: <java-user-return-29371-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28165 invoked from network); 25 Jul 2007 09:23:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2007 09:23:20 -0000
Received: (qmail 36056 invoked by uid 500); 25 Jul 2007 09:23:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36019 invoked by uid 500); 25 Jul 2007 09:23:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36008 invoked by uid 99); 25 Jul 2007 09:23:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 02:23:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [213.174.32.97] (HELO mailout02.ims-firmen.de) (213.174.32.97)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 02:23:13 -0700
Received: from mailin02.ims-firmen.de ([192.168.1.111])
	by mailout02.ims-firmen.de with esmtp (Exim 4.67)
	(envelope-from <mh@blue-elephant-systems.com>)
	id 1IDd52-00087v-8M
	for java-user@lucene.apache.org; Wed, 25 Jul 2007 11:22:52 +0200
Received: from [212.202.229.86] (helo=[192.168.123.118])
	by mailin02.ims-firmen.de with esmtpsa (TLSv1:DHE-RSA-AES256-SHA:256)
	(Exim 4.67)
	(envelope-from <mh@blue-elephant-systems.com>)
	id 1IDd52-0008E5-03
	for java-user@lucene.apache.org; Wed, 25 Jul 2007 11:22:52 +0200
Message-ID: <46A71758.3060204@blue-elephant-systems.com>
Date: Wed, 25 Jul 2007 11:26:48 +0200
From: =?UTF-8?B?TWF4aW1pbGlhbiBIw7x0dGVy?= <mh@blue-elephant-systems.com>
User-Agent: Thunderbird 1.5.0.12 (X11/20060911)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lucene and Eastern languages (Japanese, Korean and Chinese)
References: <95570511135B1042A7B5A3269303107005DAEE50@SDGEXEVS01.corp.intuit.net> <1185346792.5845.7.camel@mlecarme-laptop>
In-Reply-To: <1185346792.5845.7.camel@mlecarme-laptop>
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Mathieu Lecarme schrieb:
> Le mardi 24 juillet 2007  13:01 -0700, Shaw, James a crit :
>> Hi, guys,
>> I found Analyzers for Japanese, Korean and Chinese, but not stemmers;
>> the Snowball stemmers only include European languages.  Does stemming
>> not make sense for ideograph-based languages (i.e., no stemming is
>> needed for Japanese, Korean and Chinese)?
> No.

This not quite correct, Chinese doesn't need any stemming but Japanese
is not completely ideograph-based and it could use stemming. I doubt
anyone has done this, besides some commercial software for the japanese
market. I don't know for Korean.

>> Also for spell checking, does the default Lucene SpellChecker work for
>> Japanese, Korean and Chinese?  Does edit distance make sense for these
>> languages?
> Japanese used group of ideogram, but levenstein distance don't make
> sense with few letters but I'm not a CJK expert.
> 
> M.

Edit distance only seems to work with latin character based (writen)
languages. Spell checking Chinese, Japanese (and Korean?) is more or
less pointless, as they are inputed using input methods, which should
produce "correct" words.

Best regards,

Max


-- 
Maximilian Htter
blue elephant systems GmbH
Wollgrasweg 49
D-70599 Stuttgart

Tel            :  (+49) 0711 - 45 10 17 578
Fax            :  (+49) 0711 - 45 10 17 573
e-mail         :  max.huetter@blue-elephant-systems.com
Sitz           :  Stuttgart, Amtsgericht Stuttgart, HRB 24106
Geschftsfhrer:  Joachim Hrnle, Thomas Gentsch, Holger Dietrich

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29372-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 25 09:33:33 2007
Return-Path: <java-user-return-29372-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31253 invoked from network); 25 Jul 2007 09:33:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2007 09:33:32 -0000
Received: (qmail 50029 invoked by uid 500); 25 Jul 2007 09:33:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49976 invoked by uid 500); 25 Jul 2007 09:33:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49965 invoked by uid 99); 25 Jul 2007 09:33:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 02:33:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [82.138.248.236] (HELO bacchus.thegestalt.org) (82.138.248.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 02:33:24 -0700
Received: from [82.138.248.236] (helo=bacchus.thegestalt.org)
	by bacchus.thegestalt.org with esmtp (Exim 4.61 (FreeBSD))
	(envelope-from <simon@thegestalt.org>)
	id 1IDdEt-000BV0-Ts
	for java-user@lucene.apache.org; Wed, 25 Jul 2007 10:33:03 +0100
Received: (from simon@localhost)
	by bacchus.thegestalt.org (8.13.6/8.13.6/Submit) id l6P9X3f6044205
	for java-user@lucene.apache.org; Wed, 25 Jul 2007 10:33:03 +0100 (BST)
	(envelope-from simon@thegestalt.org)
X-Authentication-Warning: bacchus.thegestalt.org: simon set sender to simon@thegestalt.org using -f
Date: Wed, 25 Jul 2007 10:33:03 +0100
From: Simon Wistow <simon@thegestalt.org>
To: java-user@lucene.apache.org
Subject: Re: Recovering from a Crash
Message-ID: <20070725093303.GR74636@thegestalt.org>
References: <20070725090856.GP74636@thegestalt.org> <1185355171.13227.1201934431@webmail.messagingengine.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <1185355171.13227.1201934431@webmail.messagingengine.com>
User-Agent: Mutt/1.4.2.1i
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, Jul 25, 2007 at 05:19:31AM -0400, Michael McCandless said:
> It's somewhat spooky that you have a write.lock present because that
> means you backed up while a writer was actively writing to the index
> which is a bit dangerous because if the timing is unlucky (backup does
> an "ls" but before it can copy the segments_N file a commit has
> happened) you could fail to copy a segments_N file.  It's best to
> either pause the writer for backpus to occur (simplest) or make a
> custom deletion policy that safely allows the backup to slowly copy
> even while indexing is continuing (advanced).

Sorry, I should have been clearer - I took the backup of the state of 
the index when the machine restarted after the crash. I did have another 
backup from a day or so ago but I was hoping to not have to reindex a 
days worth of data (which is alot).

Our backup strategy is currently -
1) Stop the writer (and let write tasks queue up)
2) cp -lr indexes indexes-<date>
3) Restart the writer

Is this something approximating best practice?

Simon



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29373-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 25 09:50:11 2007
Return-Path: <java-user-return-29373-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35379 invoked from network); 25 Jul 2007 09:50:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2007 09:50:10 -0000
Received: (qmail 81777 invoked by uid 500); 25 Jul 2007 09:50:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81749 invoked by uid 500); 25 Jul 2007 09:50:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81738 invoked by uid 99); 25 Jul 2007 09:50:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 02:50:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 02:50:02 -0700
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id 7ACECA7E3
	for <java-user@lucene.apache.org>; Wed, 25 Jul 2007 05:49:41 -0400 (EDT)
Received: from web8.messagingengine.com ([10.202.2.217])
  by compute1.internal (MEProxy); Wed, 25 Jul 2007 05:49:41 -0400
Received: by web8.messagingengine.com (Postfix, from userid 99)
	id 5FAD21AD48; Wed, 25 Jul 2007 05:49:41 -0400 (EDT)
Message-Id: <1185356981.18049.1201938697@webmail.messagingengine.com>
X-Sasl-Enc: dbus3534bGXPLkf9PTsbCkvHTnk6kjHLdUri7+aF2yKE 1185356981
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <20070725090856.GP74636@thegestalt.org>
   <1185355171.13227.1201934431@webmail.messagingengine.com>
   <20070725093303.GR74636@thegestalt.org>
Subject: Re: Recovering from a Crash
In-Reply-To: <20070725093303.GR74636@thegestalt.org>
Date: Wed, 25 Jul 2007 05:49:41 -0400
X-Virus-Checked: Checked by ClamAV on apache.org

"Simon Wistow" <simon@thegestalt.org> wrote:
> On Wed, Jul 25, 2007 at 05:19:31AM -0400, Michael McCandless said:
> > It's somewhat spooky that you have a write.lock present because that
> > means you backed up while a writer was actively writing to the index
> > which is a bit dangerous because if the timing is unlucky (backup does
> > an "ls" but before it can copy the segments_N file a commit has
> > happened) you could fail to copy a segments_N file.  It's best to
> > either pause the writer for backpus to occur (simplest) or make a
> > custom deletion policy that safely allows the backup to slowly copy
> > even while indexing is continuing (advanced).
>
> Sorry, I should have been clearer - I took the backup of the state of
> the index when the machine restarted after the crash. I did have another
> backup from a day or so ago but I was hoping to not have to reindex a
> days worth of data (which is alot).

Ahhh, OK.  But do you have a segments_N file?

> Our backup strategy is currently -
> 1) Stop the writer (and let write tasks queue up)
> 2) cp -lr indexes indexes-<date>
> 3) Restart the writer
>
> Is this something approximating best practice?

Yes, this is perfect.  This is the "simple" option I described.  The
more complex option is to use a custom deletion policy which enables
you to safely do backups (even if the copy process is slow) without
pausing the write task (indexing).

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29374-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 25 09:53:33 2007
Return-Path: <java-user-return-29374-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36571 invoked from network); 25 Jul 2007 09:53:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2007 09:53:33 -0000
Received: (qmail 91120 invoked by uid 500); 25 Jul 2007 09:53:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90890 invoked by uid 500); 25 Jul 2007 09:53:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90877 invoked by uid 99); 25 Jul 2007 09:53:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 02:53:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 02:53:25 -0700
Received: from compute2.internal (compute2.internal [10.202.2.42])
	by out1.messagingengine.com (Postfix) with ESMTP id 219A8B443
	for <java-user@lucene.apache.org>; Wed, 25 Jul 2007 05:53:05 -0400 (EDT)
Received: from web8.messagingengine.com ([10.202.2.217])
  by compute2.internal (MEProxy); Wed, 25 Jul 2007 05:53:05 -0400
Received: by web8.messagingengine.com (Postfix, from userid 99)
	id 050DC6EDA; Wed, 25 Jul 2007 05:53:05 -0400 (EDT)
Message-Id: <1185357184.19253.1201939455@webmail.messagingengine.com>
X-Sasl-Enc: 8vkNihiG849GYzXQIJAbKE6rGdrnmf8DKXoybwP7wUWI 1185357184
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <20070725090856.GP74636@thegestalt.org>
   <20070725092133.GQ74636@thegestalt.org>
Subject: Re: Recovering from a Crash
In-Reply-To: <20070725092133.GQ74636@thegestalt.org>
Date: Wed, 25 Jul 2007 05:53:04 -0400
X-Virus-Checked: Checked by ClamAV on apache.org

> > The data appears to be there - please tell me that I'm doing something
> > stupid and I can recover from this.
>
> It appears by deleting the write.lock files everything has recovered.

Hmmm -- it's odd that the existence of the write.lock caused you to
lose most of your index.  All that should have happened here is on
creating a new writer it would throw a LockObtainTimedOut exception
saying it could not obtain the write lock.  I don't see how this would
cause most of your index to be deleted...

> Is this best practice? Have I just done something so terribly wrong
> that I've bought about the end of the universe?

Universe seems intact on my end :)  But yes deleting the write.lock is
the right thing to do in this case.  You can also switch to native
locking (NativeFSLockFactory) and then the OS would free the lock
so you would not have to delete the write.lock manually...

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29375-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 25 09:58:21 2007
Return-Path: <java-user-return-29375-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59253 invoked from network); 25 Jul 2007 09:58:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2007 09:58:20 -0000
Received: (qmail 1249 invoked by uid 500); 25 Jul 2007 09:58:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1213 invoked by uid 500); 25 Jul 2007 09:58:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1201 invoked by uid 99); 25 Jul 2007 09:58:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 02:58:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [82.138.248.236] (HELO bacchus.thegestalt.org) (82.138.248.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 02:58:11 -0700
Received: from [82.138.248.236] (helo=bacchus.thegestalt.org)
	by bacchus.thegestalt.org with esmtp (Exim 4.61 (FreeBSD))
	(envelope-from <simon@thegestalt.org>)
	id 1IDdcs-000CAa-4m
	for java-user@lucene.apache.org; Wed, 25 Jul 2007 10:57:50 +0100
Received: (from simon@localhost)
	by bacchus.thegestalt.org (8.13.6/8.13.6/Submit) id l6P9vnUF046783
	for java-user@lucene.apache.org; Wed, 25 Jul 2007 10:57:49 +0100 (BST)
	(envelope-from simon@thegestalt.org)
X-Authentication-Warning: bacchus.thegestalt.org: simon set sender to simon@thegestalt.org using -f
Date: Wed, 25 Jul 2007 10:57:49 +0100
From: Simon Wistow <simon@thegestalt.org>
To: java-user@lucene.apache.org
Subject: Re: Recovering from a Crash
Message-ID: <20070725095749.GS74636@thegestalt.org>
References: <20070725090856.GP74636@thegestalt.org> <1185355171.13227.1201934431@webmail.messagingengine.com> <20070725093303.GR74636@thegestalt.org> <1185356981.18049.1201938697@webmail.messagingengine.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <1185356981.18049.1201938697@webmail.messagingengine.com>
User-Agent: Mutt/1.4.2.1i
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, Jul 25, 2007 at 05:49:41AM -0400, Michael McCandless said:
> Ahhh, OK.  But do you have a segments_N file?

Yup.
 
> Yes, this is perfect.  This is the "simple" option I described.  The
> more complex option is to use a custom deletion policy which enables
> you to safely do backups (even if the copy process is slow) without
> pausing the write task (indexing).

I vaguely remember seeing something about that going past. 

Is there any documentation on custom deletion policies? Or example code 
for such a beast? At the moment at any given point we have to have disk 
space to allow for 3x Index size - index, backup we've just taken and 
previous backup we're just about to delete. Since our indexes are large 
even 2x is quite an issue.

I've read through JIRA LUCENE-710 but a more point-and-drool explanation 
would be useful to someone who hasn't been up all night :)

Simon




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29376-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 25 10:09:30 2007
Return-Path: <java-user-return-29376-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82385 invoked from network); 25 Jul 2007 10:09:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2007 10:09:28 -0000
Received: (qmail 22189 invoked by uid 500); 25 Jul 2007 10:09:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22091 invoked by uid 500); 25 Jul 2007 10:09:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22056 invoked by uid 99); 25 Jul 2007 10:09:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 03:09:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 03:09:14 -0700
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id 71D84AA0A
	for <java-user@lucene.apache.org>; Wed, 25 Jul 2007 06:08:53 -0400 (EDT)
Received: from web8.messagingengine.com ([10.202.2.217])
  by compute1.internal (MEProxy); Wed, 25 Jul 2007 06:08:53 -0400
Received: by web8.messagingengine.com (Postfix, from userid 99)
	id 53B3389DA; Wed, 25 Jul 2007 06:08:53 -0400 (EDT)
Message-Id: <1185358133.21950.1201941213@webmail.messagingengine.com>
X-Sasl-Enc: kgwJCkblAJKfoCjhwGQSjT8JiAaXl8zVXf+l+Jqt6bG+ 1185358133
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <20070725090856.GP74636@thegestalt.org>
   <1185355171.13227.1201934431@webmail.messagingengine.com>
   <20070725093303.GR74636@thegestalt.org>
   <1185356981.18049.1201938697@webmail.messagingengine.com>
   <20070725095749.GS74636@thegestalt.org>
Subject: Re: Recovering from a Crash
In-Reply-To: <20070725095749.GS74636@thegestalt.org>
Date: Wed, 25 Jul 2007 06:08:53 -0400
X-Virus-Checked: Checked by ClamAV on apache.org


"Simon Wistow" <simon@thegestalt.org> wrote:
> On Wed, Jul 25, 2007 at 05:49:41AM -0400, Michael McCandless said:
> > Ahhh, OK.  But do you have a segments_N file?
> 
> Yup.

OK, though I still don't understand why the existence of "write.lock"
caused you to lose most of your index on creating a new writer.

> > Yes, this is perfect.  This is the "simple" option I described.  The
> > more complex option is to use a custom deletion policy which enables
> > you to safely do backups (even if the copy process is slow) without
> > pausing the write task (indexing).
> 
> I vaguely remember seeing something about that going past. 
> 
> Is there any documentation on custom deletion policies? Or example code 
> for such a beast? At the moment at any given point we have to have disk 
> space to allow for 3x Index size - index, backup we've just taken and 
> previous backup we're just about to delete. Since our indexes are large 
> even 2x is quite an issue.
> 
> I've read through JIRA LUCENE-710 but a more point-and-drool explanation 
> would be useful to someone who hasn't been up all night :)

Good question ... there is no good documentation, sample code, etc.,
for this as of yet ... I've been secretly hoping the first person
who creates this deletion policy would share it :)  I don't think it's
very difficult to create.  If that doesn't happen sometime soon I'll
try to make time to create an example.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29377-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 25 11:20:04 2007
Return-Path: <java-user-return-29377-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21539 invoked from network); 25 Jul 2007 11:20:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2007 11:20:02 -0000
Received: (qmail 46365 invoked by uid 500); 25 Jul 2007 11:19:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46236 invoked by uid 500); 25 Jul 2007 11:19:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46185 invoked by uid 99); 25 Jul 2007 11:19:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 04:19:55 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of stachoo@gmail.com designates 209.85.132.242 as permitted sender)
Received: from [209.85.132.242] (HELO an-out-0708.google.com) (209.85.132.242)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 04:19:53 -0700
Received: by an-out-0708.google.com with SMTP id c5so30228anc
        for <java-user@lucene.apache.org>; Wed, 25 Jul 2007 04:19:32 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        b=myLqBAfqJcakaVNmzXfUvp/uZ+X0wcl6AcIUG/B8Fty0ljoveHEJHY9Hn9W1N0IrN8knSX85Y1Z3fpfpPoptcikCwN2kzXJrUDri2q0NHhO0eB4TBG9DX6dAh5yT3/j51Tmws+90Dgt3erjCrhrzuICqD+IM0k/KLreXIbrBQ8k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        b=VhBBcRWs1DbSjGp0LPBlRTRMLPjA7MEabLN9A/PlgDdvvcLiZoJz73z1D9k8dFAQJMPJviv9Us3T7stueANFKVtcaMW0T0LAjkV9YP2nvPrMm4I4lpMDE4ZO+vmoGOa1H5ITrAyULSRpuu+hVAV88r/ny68a2r5Yv9h51J5NUTo=
Received: by 10.100.11.7 with SMTP id 7mr266628ank.1185362371975;
        Wed, 25 Jul 2007 04:19:31 -0700 (PDT)
Received: by 10.100.124.9 with HTTP; Wed, 25 Jul 2007 04:19:31 -0700 (PDT)
Message-ID: <5af106d60707250419g57f1549cvaf01087b9f7027b6@mail.gmail.com>
Date: Wed, 25 Jul 2007 13:19:31 +0200
From: "Stanislaw Osinski" <stanislaw.osinski@man.poznan.pl>
Sender: stachoo@gmail.com
To: java-user@lucene.apache.org
Subject: Re: StandardTokenizer is slowing down highlighting a lot
In-Reply-To: <469EB70C.3040907@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_156822_28276750.1185362371861"
References: <652776090707181728t416b8839x72fef70d45d6824d@mail.gmail.com>
	 <469EB70C.3040907@gmail.com>
X-Google-Sender-Auth: 82785b0e121cdae5
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_156822_28276750.1185362371861
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

>
> Unfortunately, StandardAnalyzer is slow. StandardAnalyzer is really
> limited by JavaCC speed. You cannot shave much more performance out of
> the grammar as it is already about as simple as it gets.


JavaCC is slow indeed. We used it for a while for Carrot2, but then (3 years
ago :) switched to JFlex, which for roughly the same grammar would sometimes
be up to 10x (!) faster. You can have a look at our JFlex specification at:

http://carrot2.svn.sourceforge.net/viewvc/carrot2/trunk/carrot2/components/carrot2-util-tokenizer/src/org/carrot2/util/tokenizer/parser/jflex/JFlexWordBasedParserImpl.jflex?view=markup

This one seems more complex than the StandardAnalyzer's but it's much faster
anyway.

If anyone is interested, I could prepare a JFlex based Analyzer equivalent
(to the extent possible) to current StandardAnalyzer, which might offer nice
indexing and highlighting speed-ups.

Best,

Staszek

-- 
Stanislaw Osinski, stanislaw.osinski@carrot-search.com
http://www.carrot-search.com

------=_Part_156822_28276750.1185362371861--

From java-user-return-29378-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 25 11:29:04 2007
Return-Path: <java-user-return-29378-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26391 invoked from network); 25 Jul 2007 11:29:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2007 11:29:04 -0000
Received: (qmail 66261 invoked by uid 500); 25 Jul 2007 11:28:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66227 invoked by uid 500); 25 Jul 2007 11:28:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66216 invoked by uid 99); 25 Jul 2007 11:28:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 04:28:57 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 04:28:54 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IDf2f-0005Dk-Fv
	for java-user@lucene.apache.org; Wed, 25 Jul 2007 04:28:33 -0700
Message-ID: <11780708.post@talk.nabble.com>
Date: Wed, 25 Jul 2007 04:28:33 -0700 (PDT)
From: makkhar <mkharche@selectica.com>
To: java-user@lucene.apache.org
Subject: Which field matched ?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: mkharche@selectica.com
X-Virus-Checked: Checked by ClamAV on apache.org


This problem has been baffling me since quite some time now and has no
perfect solution in the forum !

I have 10 documents, each with 10 fields with "parameterName and
parameterValue". Now, When i search for some term and I get 5 hits, how do I
find out which paramName-Value pair matched ? 

I am seeking an optimal solution for this. Explanation, highlighter etc are
some of the solutions. But not the best since highlighter would perform very
bad for wildcard queries and explanation is generally not the nice way of
doing this ! I am talking really large datasets here.

Any help, highly appreciated.


-- 
View this message in context: http://www.nabble.com/Which-field-matched---tf4141549.html#a11780708
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29379-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 25 11:29:58 2007
Return-Path: <java-user-return-29379-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26830 invoked from network); 25 Jul 2007 11:29:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2007 11:29:57 -0000
Received: (qmail 69477 invoked by uid 500); 25 Jul 2007 11:29:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69443 invoked by uid 500); 25 Jul 2007 11:29:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69430 invoked by uid 99); 25 Jul 2007 11:29:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 04:29:51 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.230 as permitted sender)
Received: from [66.249.82.230] (HELO wx-out-0506.google.com) (66.249.82.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 04:29:49 -0700
Received: by wx-out-0506.google.com with SMTP id i28so121192wxd
        for <java-user@lucene.apache.org>; Wed, 25 Jul 2007 04:29:28 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=no4HoyzLyC1wjQ/QpzghLgtdH9mx+V1GuYvTqApAPKcltaE41zJ8t0SsKz7onWCsy2Jmpg+J7Jvz55iuqaL1P1zo79Njt255/EVgR7vSFtSTqe/HH6Is44hZrtZQrjst1JHNkgJyTRauiL8The5r2MhMVdgHxpj5lFFCXGN9k6w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=R/ybLpBtr8qGXLkm79OaOFPLamwyQC0ZEl1HJxyLEDn5ituVSbaHz80pSXQfCLPqmBNNmx4WT1YWxuLnjQCI6RjJIlFQgKFAJrP81AIJtWogDpvdOl6duTTNxxFJNpBd7qS3L7IRigyFs3UXXhJIQd+8kFEbf8KK96GH4yOIWpA=
Received: by 10.90.52.18 with SMTP id z18mr278329agz.1185362968442;
        Wed, 25 Jul 2007 04:29:28 -0700 (PDT)
Received: from ?192.168.1.105? ( [216.66.114.204])
        by mx.google.com with ESMTPS id m29sm653645wrm.2007.07.25.04.29.26
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 25 Jul 2007 04:29:27 -0700 (PDT)
Message-ID: <46A73408.4090600@gmail.com>
Date: Wed, 25 Jul 2007 07:29:12 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.5 (Windows/20070716)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: StandardTokenizer is slowing down highlighting a lot
References: <652776090707181728t416b8839x72fef70d45d6824d@mail.gmail.com>	 <469EB70C.3040907@gmail.com> <5af106d60707250419g57f1549cvaf01087b9f7027b6@mail.gmail.com>
In-Reply-To: <5af106d60707250419g57f1549cvaf01087b9f7027b6@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I would be very interested. I have been playing around with Antlr to see 
if it is any faster than JavaCC, but haven't seen great gains in my 
simple tests. I had not considered trying JFlex.

I am sure a faster StandardAnalyzer would be greatly appreciated. 
StandardAnalyzer appears widely used and horrendously slow. Even better 
would be a StandardAnalyzer that could have different recognizers 
enabled/disabled. For example, dropping NUM recognition if you don't 
need it in the current StandardAnalyzer gains like 25% speed.

- Mark

Stanislaw Osinski wrote:
>>
>> Unfortunately, StandardAnalyzer is slow. StandardAnalyzer is really
>> limited by JavaCC speed. You cannot shave much more performance out of
>> the grammar as it is already about as simple as it gets.
>
>
> JavaCC is slow indeed. We used it for a while for Carrot2, but then (3 
> years
> ago :) switched to JFlex, which for roughly the same grammar would 
> sometimes
> be up to 10x (!) faster. You can have a look at our JFlex 
> specification at:
>
> http://carrot2.svn.sourceforge.net/viewvc/carrot2/trunk/carrot2/components/carrot2-util-tokenizer/src/org/carrot2/util/tokenizer/parser/jflex/JFlexWordBasedParserImpl.jflex?view=markup 
>
>
> This one seems more complex than the StandardAnalyzer's but it's much 
> faster
> anyway.
>
> If anyone is interested, I could prepare a JFlex based Analyzer 
> equivalent
> (to the extent possible) to current StandardAnalyzer, which might 
> offer nice
> indexing and highlighting speed-ups.
>
> Best,
>
> Staszek
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29380-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 25 11:32:15 2007
Return-Path: <java-user-return-29380-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28349 invoked from network); 25 Jul 2007 11:32:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2007 11:32:14 -0000
Received: (qmail 72792 invoked by uid 500); 25 Jul 2007 11:32:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72748 invoked by uid 500); 25 Jul 2007 11:32:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72737 invoked by uid 99); 25 Jul 2007 11:32:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 04:32:08 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 04:32:06 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IDf5m-0005HU-IO
	for java-user@lucene.apache.org; Wed, 25 Jul 2007 04:31:46 -0700
Message-ID: <11780757.post@talk.nabble.com>
Date: Wed, 25 Jul 2007 04:31:46 -0700 (PDT)
From: makkhar <mkharche@selectica.com>
To: java-user@lucene.apache.org
Subject: Re: Which field matched ?
In-Reply-To: <11780708.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: mkharche@selectica.com
References: <11780708.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org



Currently, we use regular expression pattern matching to get hold of which
field matched. Again a pathetic solution since we have to agree upon the
subset of the lucene search and pattern matching. We cannot use Boolean
queries etc in this case.



makkhar wrote:
> 
> This problem has been baffling me since quite some time now and has no
> perfect solution in the forum !
> 
> I have 10 documents, each with 10 fields with "parameterName and
> parameterValue". Now, When i search for some term and I get 5 hits, how do
> I
> find out which paramName-Value pair matched ? 
> 
> I am seeking an optimal solution for this. Explanation, highlighter etc
> are some of the solutions. But not the best since highlighter would
> perform very bad for wildcard queries and explanation is generally not the
> nice way of doing this ! I am talking really large datasets here.
> 
> Any help, highly appreciated.
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Which-field-matched---tf4141549.html#a11780757
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29381-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 25 11:43:51 2007
Return-Path: <java-user-return-29381-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32805 invoked from network); 25 Jul 2007 11:43:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2007 11:43:51 -0000
Received: (qmail 93413 invoked by uid 500); 25 Jul 2007 11:43:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93380 invoked by uid 500); 25 Jul 2007 11:43:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93369 invoked by uid 99); 25 Jul 2007 11:43:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 04:43:43 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of stachoo@gmail.com designates 209.85.132.244 as permitted sender)
Received: from [209.85.132.244] (HELO an-out-0708.google.com) (209.85.132.244)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 04:43:41 -0700
Received: by an-out-0708.google.com with SMTP id c5so31417anc
        for <java-user@lucene.apache.org>; Wed, 25 Jul 2007 04:43:21 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        b=jO6GwtfdHT8dO0upAcex0IoI/Wiqpiob6n0JKH/OCbqSl2qKM9Am7oaKDUeXicgq1xOFAZbBwO7IInPB4CwL8P5yCS1MNL4MiaN5Fr+S/4vDMzv3SdVd45GQphMGtG7GLlSTc9qByoxPYw5KhUXyVBLtKkmYGrihrAfZ0mvG3j4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        b=VzbBLfyk8O1gKTJWUM74UwSq/h2sccywj1kXORnfKvDPAbHiEHpqX6HeHoR+hRvSNYZgLGN2fOeqmapuzdCx0BfjSO6EmVZO4eEdp83Ojkwd4B3j7IaFu2X/mbfjC2WsuhhpaGFf39sn00jEidv6wDg2hSsb9TKmk8lNAZKU+Qc=
Received: by 10.100.153.17 with SMTP id a17mr288463ane.1185363800476;
        Wed, 25 Jul 2007 04:43:20 -0700 (PDT)
Received: by 10.100.124.9 with HTTP; Wed, 25 Jul 2007 04:43:20 -0700 (PDT)
Message-ID: <5af106d60707250443j12bed647r883f487df0cfa437@mail.gmail.com>
Date: Wed, 25 Jul 2007 13:43:20 +0200
From: "Stanislaw Osinski" <stanislaw.osinski@man.poznan.pl>
Sender: stachoo@gmail.com
To: java-user@lucene.apache.org
Subject: Re: StandardTokenizer is slowing down highlighting a lot
In-Reply-To: <46A73408.4090600@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_157146_23105882.1185363800352"
References: <652776090707181728t416b8839x72fef70d45d6824d@mail.gmail.com>
	 <469EB70C.3040907@gmail.com>
	 <5af106d60707250419g57f1549cvaf01087b9f7027b6@mail.gmail.com>
	 <46A73408.4090600@gmail.com>
X-Google-Sender-Auth: 852349723d8c9096
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_157146_23105882.1185363800352
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

>
> I am sure a faster StandardAnalyzer would be greatly appreciated.


I'm increasing the priority of that task then :)

StandardAnalyzer appears widely used and horrendously slow. Even better
> would be a StandardAnalyzer that could have different recognizers
> enabled/disabled. For example, dropping NUM recognition if you don't
> need it in the current StandardAnalyzer gains like 25% speed.


That's a good idea, though I'd need to check if in case of JFlex there would
be considerable performance differences depending on the grammar.

Staszek

-- 
Stanislaw Osinski, stanislaw.osinski@carrot-search.com
http://www.carrot-search.com

------=_Part_157146_23105882.1185363800352--

From java-user-return-29382-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 25 11:53:44 2007
Return-Path: <java-user-return-29382-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36176 invoked from network); 25 Jul 2007 11:53:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2007 11:53:42 -0000
Received: (qmail 17285 invoked by uid 500); 25 Jul 2007 11:53:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16994 invoked by uid 500); 25 Jul 2007 11:53:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16983 invoked by uid 99); 25 Jul 2007 11:53:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 04:53:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.83] (HELO spunkymail-a1.g.dreamhost.com) (208.97.132.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 04:53:35 -0700
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a1.g.dreamhost.com (Postfix) with ESMTP id 9716CFF111
	for <java-user@lucene.apache.org>; Wed, 25 Jul 2007 04:53:12 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <5af106d60707250419g57f1549cvaf01087b9f7027b6@mail.gmail.com>
References: <652776090707181728t416b8839x72fef70d45d6824d@mail.gmail.com> <469EB70C.3040907@gmail.com> <5af106d60707250419g57f1549cvaf01087b9f7027b6@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <7DEC1E16-6B62-4587-B8CA-2987C93CB38A@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: StandardTokenizer is slowing down highlighting a lot
Date: Wed, 25 Jul 2007 07:53:05 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


On Jul 25, 2007, at 7:19 AM, Stanislaw Osinski wrote:

>>
>> Unfortunately, StandardAnalyzer is slow. StandardAnalyzer is really
>> limited by JavaCC speed. You cannot shave much more performance  
>> out of
>> the grammar as it is already about as simple as it gets.
>
>
> JavaCC is slow indeed. We used it for a while for Carrot2, but then  
> (3 years
> ago :) switched to JFlex, which for roughly the same grammar would  
> sometimes
> be up to 10x (!) faster. You can have a look at our JFlex  
> specification at:
>
> http://carrot2.svn.sourceforge.net/viewvc/carrot2/trunk/carrot2/ 
> components/carrot2-util-tokenizer/src/org/carrot2/util/tokenizer/ 
> parser/jflex/JFlexWordBasedParserImpl.jflex?view=markup
>
> This one seems more complex than the StandardAnalyzer's but it's  
> much faster
> anyway.
>
> If anyone is interested, I could prepare a JFlex based Analyzer  
> equivalent
> (to the extent possible) to current StandardAnalyzer, which might  
> offer nice
> indexing and highlighting speed-ups.

+1.  I think a lot of people would be interested in a faster  
StandardAnalyzer.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29383-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 25 13:19:09 2007
Return-Path: <java-user-return-29383-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71647 invoked from network); 25 Jul 2007 13:19:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2007 13:19:08 -0000
Received: (qmail 82031 invoked by uid 500); 25 Jul 2007 13:19:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81986 invoked by uid 500); 25 Jul 2007 13:19:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81975 invoked by uid 99); 25 Jul 2007 13:19:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 06:19:01 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS,WEIRD_QUOTING
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 06:19:00 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IDglD-0008SQ-OF
	for java-user@lucene.apache.org; Wed, 25 Jul 2007 06:18:39 -0700
Message-ID: <11782482.post@talk.nabble.com>
Date: Wed, 25 Jul 2007 06:18:39 -0700 (PDT)
From: ki <kirsten_gruene@web.de>
To: java-user@lucene.apache.org
Subject: Lucene Highlighter linkage Error
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: kirsten_gruene@web.de
X-Virus-Checked: Checked by ClamAV on apache.org


Hello!

I am working with Tomcat. I have put the Lucene highlighter.jar in the
folder lib. And I have created an extra css, where I say that the background
color has to be yellow. The searchword has to be highlighted know.
I have got a dataTable in which the result of the following Lucene method is
loaded:

[code]
public void search(String q,  File index, String [] fields, ArrayList
subresult, int numresults)  throws Exception {
 
 
		    	Directory fsDir = FSDirectory.getDirectory(index, false);
		    	IndexSearcher is = new IndexSearcher(fsDir);
 
				Analyzer analyzer = new StandardAnalyzer();
				Fragmenter fragmenter = new SimpleFragmenter(100);
				QueryParser queryparser = new MultiFieldQueryParser (fields, analyzer);
						Query query = queryparser.parse(q);
						Hits hits = is.search(query);
						IndexReader reader=null;
						query=query.rewrite(reader);
						QueryScorer scorer = new QueryScorer(query);

	SimpleHTMLFormatter formatter= new SimpleHTMLFormatter("","");
						Highlighter high = new Highlighter(formatter,scorer);
						high.setTextFragmenter(fragmenter); 
						numresults = numresults == -1 || numresults > hits.length() ?
hits.length() : numresults;
						String rating = "";
						for (int i = 0; i <numresults; i++) {
							 if (hits.score(i)>schwelli){
							 	float f = hits.score(i);
							 	if (0.9f <= f) {rating = "******";}
							 	else if (0.8f <= f && f<0.9f){rating = "*****";}
							 	else if (0.7f <= f && f<0.8f){rating = "****";}
							 	else if (0.6f <= f && f<0.7f){rating = "***";}
							 	else if (0.5f <= f && f<0.6f){rating = "**";}
							 	else if (f <= 0.5f){rating = "*";}
								 Document doc = hits.doc(i);
								 String abstracts =doc.get("ABSTRACTS");
								 String title = doc.get("TITLE");
								 TokenStream abstract_stream = analyzer.tokenStream(q, new
StringReader(abstracts));
								 TokenStream title_straem = analyzer.tokenStream(q, new
StringReader(title));
								String fragment_abstract =
high.getBestFragments(abstract_stream,abstracts, 5, "...");
								 String fragment_title = high.getBestFragments(title_straem,title,
5, "...");
								 if(fragment_title.length()==0){
									 	 setAusgabeTitle(doc.get("TITLE"));
								 }else{
									 	 setAusgabeTitle(fragment_title);
								 }
								  if(fragment_abstract.length()==0){
									 	 setAusgabeAbstract(doc.get("ABSTRACTS"));
								 }else{
									 	 setAusgabeAbstract(fragment_abstract);
								 }
								  
								
//list.add(i+1+"\t"+q+"\t"+doc.get(entry_medline)+"\t"+hits.score(i)+"\t"+abstract_stream+"\t"+title_straem+"\t"+"MEDLINE");
							     
							     /*int No = i;
							     subresult.add((new Integer(No)).toString());*/
							     subresult.add(doc.get(entry_medline));
							     subresult.add("No Id");
							     subresult.add("No Id");
							     float sco = hits.score(i);
		    				     subresult.add(rating);//(hits.score(i));
		    				     subresult.add(abstract_stream);
		    				     subresult.add(title_straem);
		    				     subresult.add("No hits for this index");
		    				     subresult.add("MEDLINE");
							}
					}
							 	
			}
[code]
But I get the following error.

Error:

javax.servlet.ServletException: #{suggestBox.Search}:
javax.faces.el.EvaluationException: java.lang.LinkageError: Class
org/apache/lucene/search/Query violates loader constraints
javax.faces.webapp.FacesServlet.service(FacesServlet.java:209)
org.ajax4jsf.framework.ajax.xmlfilter.BaseXMLFilter.doXmlFilter(BaseXMLFilter.j
ava:96)
org.ajax4jsf.framework.ajax.xmlfilter.BaseFilter.doFilter(BaseFilter.java:220)

Does someone know what I am doing wrong?
-- 
View this message in context: http://www.nabble.com/Lucene-Highlighter-linkage-Error-tf4142164.html#a11782482
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29384-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 25 14:11:25 2007
Return-Path: <java-user-return-29384-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99177 invoked from network); 25 Jul 2007 14:11:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2007 14:11:23 -0000
Received: (qmail 2956 invoked by uid 500); 25 Jul 2007 14:11:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2918 invoked by uid 500); 25 Jul 2007 14:11:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2907 invoked by uid 99); 25 Jul 2007 14:11:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 07:11:17 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of askar.zaidi@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 07:11:15 -0700
Received: by ug-out-1314.google.com with SMTP id c2so422466ugf
        for <java-user@lucene.apache.org>; Wed, 25 Jul 2007 07:10:53 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=o1jECeveIHbCOPtj3b46LnI+le+WwvzeE2WvZx4KEi/MnrwPD3MpeRm6WS2eZdkQZGeh8WkDoTPcIMlbN7Ajn4appWkoCQX1CIhKO47L1zLhdQLkAsOqxjcTICin4pIp/k22nK62vPuYeKe5Izt47MmVTcU0VtUI8y4NB/6Itk8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=R13K1+Asa02sipV5SUsFHJhmkGTsJ2AY04gMybYGsoFYm4V13ZJ9T7zCxkGtmlQY0WUYEDIWddAZCiOx5hGAtuLbWphjcdb0rZY72Khae7EtPWhv6EjgQU07JAv48jW0mg66n/Ub9RnhE7oCMQDjQ+KGMFoMhURz7fLqwZurYY8=
Received: by 10.67.92.1 with SMTP id u1mr1415771ugl.1185372653331;
        Wed, 25 Jul 2007 07:10:53 -0700 (PDT)
Received: by 10.66.251.15 with HTTP; Wed, 25 Jul 2007 07:10:53 -0700 (PDT)
Message-ID: <c0c0e1d40707250710v5e7e7694obead0b44449507e0@mail.gmail.com>
Date: Wed, 25 Jul 2007 10:10:53 -0400
From: "Askar Zaidi" <askar.zaidi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Fine Tuning Lucene implementation
In-Reply-To: <BAY114-DAV100592591AD1D725911CE594F10@phx.gbl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4681_25274998.1185372653264"
References: <c0c0e1d40707241243y5ddfd5fai10381873a2d2bd64@mail.gmail.com>
	 <B6CD8741-E8F5-4D00-8579-DDD8944469AA@apache.org>
	 <c0c0e1d40707241428r44ee7926q7f9199687650baf3@mail.gmail.com>
	 <28F241F7-C4AD-414C-89D8-95AC22C0736B@apache.org>
	 <c0c0e1d40707241658tfd64870v40a6b9431780fe98@mail.gmail.com>
	 <1185322083.4593.54.camel@localhost>
	 <c0c0e1d40707241714k4cef2167lcd7a5cec866b8555@mail.gmail.com>
	 <1185325363.4593.70.camel@localhost>
	 <c0c0e1d40707242239y17296bf3rcb9daf6ab3cd9c2f@mail.gmail.com>
	 <BAY114-DAV100592591AD1D725911CE594F10@phx.gbl>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4681_25274998.1185372653264
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hey Guys,

I need to know how I can use the HitCollector class ? I am using Hits and
looping over all the possible document hits (turns out its 92 times I am
looping; for 300 searches, its 300*92 !!). Can I avoid this using
HitCollector ? I can't seem to understand how its used.

thanks a lot,

Askar

On 7/25/07, Dmitry <dmitrytkach1@hotmail.com> wrote:
>
> Askar,
> why do you need to add +id:<idWeCareAbout>?
> thanks,
> dt,
> www.ejinz.com
> search engine news forms
> ----- Original Message -----
> From: "Askar Zaidi" <askar.zaidi@gmail.com>
> To: <java-user@lucene.apache.org>; <nhira@cognocys.com>
> Sent: Wednesday, July 25, 2007 12:39 AM
> Subject: Re: Fine Tuning Lucene implementation
>
>
> > Hey Hira ,
> >
> > Thanks so much for the reply. Much appreciate it.
> >
> > Quote:
> >
> > Would it be possible to just include a query clause?
> >   - i.e., instead of just contents:<userQuery>, also add
> > +id:<idWeCareAbout>
> >
> > How can I do that ?
> >
> > I see my query as :
> >
> > +contents:harvard +contents:business +contents:review
> >
> > where the search phrase was: harvard business review
> >
> > Now how can I add +id:<idWeCareAbout>  ??
> >
> > This would give me that one exact document I am looking for , for that
> id.
> > I
> > don't have to iterate through hits.
> >
> > thanks,
> >
> > Askar
> >
> >
> >
> > On 7/24/07, N. Hira <nhira@cognocys.com> wrote:
> >>
> >> I'm no expert on this (so please accept the comments in that context)
> >> but 2 things seem weird to me:
> >>
> >> 1.  Iterating over each hit is an expensive proposition.  I've often
> >> seen people recommending a HitCollector.
> >>
> >> 2.  It seems that doBodySearch() is essentially saying, do this search
> >> and return the score pertinent to this ID (using an exhaustive loop).
> >> Would it be possible to just include a query clause?
> >>     - i.e., instead of just contents:<userQuery>, also add
> >> +id:<idWeCareAbout>
> >>
> >> In general though, I think your algorithm seems inefficient (if I
> >> understand it correctly):-- if I want to search for one term among 3 in
> >> a "collection" of 300 documents (as defined by some external
> attribute),
> >> I will wind up executing 300 x 3 searches, and for each search that is
> >> executed, I will iterate over every Hit, even if I've already found the
> >> one that I "care about".
> >>
> >> What would break if you:
> >> 1.  Included "creator" in the Lucene index (or, filtered out the Hits
> >> using a BitSet or something like it)
> >> 2.  Executed 1 search
> >> 3.  Collected the results of the first N Hits (where N is some
> >> reasonable limit, like 100 or 500)
> >>
> >> -h
> >>
> >>
> >> On Tue, 2007-07-24 at 20:14 -0400, Askar Zaidi wrote:
> >>
> >> > Sure.
> >> >
> >> >  public float doBodySearch(Searcher searcher,String query, int id){
> >> >
> >> >                  try{
> >> >                                 score = search(searcher, query,id);
> >> >                      }
> >> >                       catch(IOException io){}
> >> >                       catch(ParseException pe){}
> >> >
> >> >                       return score;
> >> >
> >> >                 }
> >> >
> >> >  private float search(Searcher searcher, String queryString, int id)
> >> > throws ParseException, IOException {
> >> >
> >> >         // Build a Query object
> >> >
> >> >         QueryParser queryParser = new QueryParser("contents", new
> >> > KeywordAnalyzer());
> >> >
> >> >         queryParser.setDefaultOperator(QueryParser.Operator.AND);
> >> >
> >> >         Query query = queryParser.parse(queryString);
> >> >
> >> >         // Search for the query
> >> >
> >> >         Hits hits = searcher.search(query);
> >> >         Document doc = null;
> >> >
> >> >         // Examine the Hits object to see if there were any matches
> >> >         int hitCount = hits.length();
> >> >
> >> >                 for(int i=0;i<hitCount;i++){
> >> >                 doc = hits.doc(i);
> >> >                 String str = doc.get("item");
> >> >                 int tmp = Integer.parseInt(str);
> >> >                 if(tmp==id)
> >> >                 score = hits.score(i);
> >> >                 }
> >> >
> >> >         return score;
> >> >     }
> >> >
> >> > I really need to optimize doBodySearch(...) as this takes the most
> >> > time.
> >> >
> >> > thanks guys,
> >> > Askar
> >> >
> >> >
> >> > On 7/24/07, N. Hira <nhira@cognocys.com> wrote:
> >> >
> >> >         Could you show us the relevant source from doBodySearch()?
> >> >
> >> >         -h
> >> >
> >> >         On Tue, 2007-07-24 at 19:58 -0400, Askar Zaidi wrote:
> >> >         > I ran some tests and it seems that the slowness is from
> >> >         Lucene calls when I
> >> >         > do "doBodySearch", if I remove that call, Lucene gives me
> >> >         results in 5
> >> >         > seconds. otherwise it takes about 50 seconds.
> >> >         >
> >> >         > But I need to do Body search and that field contains lots
> of
> >> >         text. The field
> >> >         > is <contents>. How can I optimize that ?
> >> >         >
> >> >         > thanks,
> >> >         > Askar
> >> >         >
> >> >         >
> >>
> >>
> >>
> >>
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_4681_25274998.1185372653264--

From java-user-return-29385-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 25 15:33:13 2007
Return-Path: <java-user-return-29385-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10956 invoked from network); 25 Jul 2007 15:33:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2007 15:33:12 -0000
Received: (qmail 38205 invoked by uid 500); 25 Jul 2007 15:33:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37822 invoked by uid 500); 25 Jul 2007 15:33:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37811 invoked by uid 99); 25 Jul 2007 15:33:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 08:33:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.83] (HELO spunkymail-a8.g.dreamhost.com) (208.97.132.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 08:33:04 -0700
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a8.g.dreamhost.com (Postfix) with ESMTP id 2528810B9F2
	for <java-user@lucene.apache.org>; Wed, 25 Jul 2007 08:32:44 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <c0c0e1d40707250710v5e7e7694obead0b44449507e0@mail.gmail.com>
References: <c0c0e1d40707241243y5ddfd5fai10381873a2d2bd64@mail.gmail.com> <B6CD8741-E8F5-4D00-8579-DDD8944469AA@apache.org> <c0c0e1d40707241428r44ee7926q7f9199687650baf3@mail.gmail.com> <28F241F7-C4AD-414C-89D8-95AC22C0736B@apache.org> <c0c0e1d40707241658tfd64870v40a6b9431780fe98@mail.gmail.com> <1185322083.4593.54.camel@localhost> <c0c0e1d40707241714k4cef2167lcd7a5cec866b8555@mail.gmail.com> <1185325363.4593.70.camel@localhost> <c0c0e1d40707242239y17296bf3rcb9daf6ab3cd9c2f@mail.gmail.com> <BAY114-DAV100592591AD1D725911CE594F10@phx.gbl> <c0c0e1d40707250710v5e7e7694obead0b44449507e0@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <F5C96C89-A4FE-4392-8E2D-92706F4E4923@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Fine Tuning Lucene implementation
Date: Wed, 25 Jul 2007 11:27:00 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Askar,

I suggest we take a step back, and ask the question, what are you  
trying to accomplish?  That is, what is your application trying to  
do?  Forget the code, etc. just explain what you want the end result  
to be and we can work from there.   Based on what you have described,  
I am not sure you need access to the hits.  It seems like you just  
need to make better queries.

Is your itemID a unique identifier?  If yes, then you shouldn't need  
to loop over hits at all, as you should only ever have one result IF  
your query contains a required term.  Also, if this is the case, why  
do you need to do a search at all?  Haven't you already identified  
the items of interest when you did your select query in the  
database?  Or is it that you want to score the item based on some  
terms as well.  If that is the case, there are other ways of doing  
this and we can discuss them.

-Grant

On Jul 25, 2007, at 10:10 AM, Askar Zaidi wrote:

> Hey Guys,
>
> I need to know how I can use the HitCollector class ? I am using  
> Hits and
> looping over all the possible document hits (turns out its 92 times  
> I am
> looping; for 300 searches, its 300*92 !!). Can I avoid this using
> HitCollector ? I can't seem to understand how its used.
>
> thanks a lot,
>
> Askar
>
> On 7/25/07, Dmitry <dmitrytkach1@hotmail.com> wrote:
>>
>> Askar,
>> why do you need to add +id:<idWeCareAbout>?
>> thanks,
>> dt,
>> www.ejinz.com
>> search engine news forms
>> ----- Original Message -----
>> From: "Askar Zaidi" <askar.zaidi@gmail.com>
>> To: <java-user@lucene.apache.org>; <nhira@cognocys.com>
>> Sent: Wednesday, July 25, 2007 12:39 AM
>> Subject: Re: Fine Tuning Lucene implementation
>>
>>
>>> Hey Hira ,
>>>
>>> Thanks so much for the reply. Much appreciate it.
>>>
>>> Quote:
>>>
>>> Would it be possible to just include a query clause?
>>>   - i.e., instead of just contents:<userQuery>, also add
>>> +id:<idWeCareAbout>
>>>
>>> How can I do that ?
>>>
>>> I see my query as :
>>>
>>> +contents:harvard +contents:business +contents:review
>>>
>>> where the search phrase was: harvard business review
>>>
>>> Now how can I add +id:<idWeCareAbout>  ??
>>>
>>> This would give me that one exact document I am looking for , for  
>>> that
>> id.
>>> I
>>> don't have to iterate through hits.
>>>
>>> thanks,
>>>
>>> Askar
>>>
>>>
>>>
>>> On 7/24/07, N. Hira <nhira@cognocys.com> wrote:
>>>>
>>>> I'm no expert on this (so please accept the comments in that  
>>>> context)
>>>> but 2 things seem weird to me:
>>>>
>>>> 1.  Iterating over each hit is an expensive proposition.  I've  
>>>> often
>>>> seen people recommending a HitCollector.
>>>>
>>>> 2.  It seems that doBodySearch() is essentially saying, do this  
>>>> search
>>>> and return the score pertinent to this ID (using an exhaustive  
>>>> loop).
>>>> Would it be possible to just include a query clause?
>>>>     - i.e., instead of just contents:<userQuery>, also add
>>>> +id:<idWeCareAbout>
>>>>
>>>> In general though, I think your algorithm seems inefficient (if I
>>>> understand it correctly):-- if I want to search for one term  
>>>> among 3 in
>>>> a "collection" of 300 documents (as defined by some external
>> attribute),
>>>> I will wind up executing 300 x 3 searches, and for each search  
>>>> that is
>>>> executed, I will iterate over every Hit, even if I've already  
>>>> found the
>>>> one that I "care about".
>>>>
>>>> What would break if you:
>>>> 1.  Included "creator" in the Lucene index (or, filtered out the  
>>>> Hits
>>>> using a BitSet or something like it)
>>>> 2.  Executed 1 search
>>>> 3.  Collected the results of the first N Hits (where N is some
>>>> reasonable limit, like 100 or 500)
>>>>
>>>> -h
>>>>
>>>>
>>>> On Tue, 2007-07-24 at 20:14 -0400, Askar Zaidi wrote:
>>>>
>>>>> Sure.
>>>>>
>>>>>  public float doBodySearch(Searcher searcher,String query, int  
>>>>> id){
>>>>>
>>>>>                  try{
>>>>>                                 score = search(searcher,  
>>>>> query,id);
>>>>>                      }
>>>>>                       catch(IOException io){}
>>>>>                       catch(ParseException pe){}
>>>>>
>>>>>                       return score;
>>>>>
>>>>>                 }
>>>>>
>>>>>  private float search(Searcher searcher, String queryString,  
>>>>> int id)
>>>>> throws ParseException, IOException {
>>>>>
>>>>>         // Build a Query object
>>>>>
>>>>>         QueryParser queryParser = new QueryParser("contents", new
>>>>> KeywordAnalyzer());
>>>>>
>>>>>         queryParser.setDefaultOperator(QueryParser.Operator.AND);
>>>>>
>>>>>         Query query = queryParser.parse(queryString);
>>>>>
>>>>>         // Search for the query
>>>>>
>>>>>         Hits hits = searcher.search(query);
>>>>>         Document doc = null;
>>>>>
>>>>>         // Examine the Hits object to see if there were any  
>>>>> matches
>>>>>         int hitCount = hits.length();
>>>>>
>>>>>                 for(int i=0;i<hitCount;i++){
>>>>>                 doc = hits.doc(i);
>>>>>                 String str = doc.get("item");
>>>>>                 int tmp = Integer.parseInt(str);
>>>>>                 if(tmp==id)
>>>>>                 score = hits.score(i);
>>>>>                 }
>>>>>
>>>>>         return score;
>>>>>     }
>>>>>
>>>>> I really need to optimize doBodySearch(...) as this takes the most
>>>>> time.
>>>>>
>>>>> thanks guys,
>>>>> Askar
>>>>>
>>>>>
>>>>> On 7/24/07, N. Hira <nhira@cognocys.com> wrote:
>>>>>
>>>>>         Could you show us the relevant source from doBodySearch()?
>>>>>
>>>>>         -h
>>>>>
>>>>>         On Tue, 2007-07-24 at 19:58 -0400, Askar Zaidi wrote:
>>>>>> I ran some tests and it seems that the slowness is from
>>>>>         Lucene calls when I
>>>>>> do "doBodySearch", if I remove that call, Lucene gives me
>>>>>         results in 5
>>>>>> seconds. otherwise it takes about 50 seconds.
>>>>>>
>>>>>> But I need to do Body search and that field contains lots
>> of
>>>>>         text. The field
>>>>>> is <contents>. How can I optimize that ?
>>>>>>
>>>>>> thanks,
>>>>>> Askar
>>>>>>
>>>>>>
>>>>
>>>>
>>>>
>>>>
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

Read the Lucene Java FAQ at http://wiki.apache.org/lucene-java/LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29386-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 25 15:45:58 2007
Return-Path: <java-user-return-29386-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24763 invoked from network); 25 Jul 2007 15:45:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2007 15:45:56 -0000
Received: (qmail 81326 invoked by uid 500); 25 Jul 2007 15:45:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81285 invoked by uid 500); 25 Jul 2007 15:45:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81274 invoked by uid 99); 25 Jul 2007 15:45:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 08:45:49 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of askar.zaidi@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 08:45:47 -0700
Received: by ug-out-1314.google.com with SMTP id c2so442886ugf
        for <java-user@lucene.apache.org>; Wed, 25 Jul 2007 08:45:25 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=PklGgxNVnweFlteyj3c45v7gqT5kpFSJA3T1cpzC3Jzv2KGSelJQIZSbfJ12w3n915tpnwHDELLnIXnPtRFVZa9ftPNjpve5v6RjMsSAHrxXuQGoqUmWFrkLrhjNvb5RUhZLeFQNnmau37aaLDikjDKWiXnPYd/4Mm62T6wrx5Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=IK56RwOJQjTMYJZIRhC+7vGLljJ1C89PiZGyCdpKMA2elIoSHxsTBW/GKturUCgWtiJ77/URj5FBiPo0JszKUALfA5nqUwPB9t/61SP44b04HjCESOPCFr1Pi3ReZ/R6md9BqMDaMwsKnwwIFkXI3Hluq7OhlCBHAUefp3Xvj2w=
Received: by 10.67.29.7 with SMTP id g7mr1465409ugj.1185378325061;
        Wed, 25 Jul 2007 08:45:25 -0700 (PDT)
Received: by 10.66.251.15 with HTTP; Wed, 25 Jul 2007 08:45:24 -0700 (PDT)
Message-ID: <c0c0e1d40707250845s6b91c66ei79e94bacfb292f2c@mail.gmail.com>
Date: Wed, 25 Jul 2007 11:45:24 -0400
From: "Askar Zaidi" <askar.zaidi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Fine Tuning Lucene implementation
In-Reply-To: <F5C96C89-A4FE-4392-8E2D-92706F4E4923@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5823_7476693.1185378324950"
References: <c0c0e1d40707241243y5ddfd5fai10381873a2d2bd64@mail.gmail.com>
	 <28F241F7-C4AD-414C-89D8-95AC22C0736B@apache.org>
	 <c0c0e1d40707241658tfd64870v40a6b9431780fe98@mail.gmail.com>
	 <1185322083.4593.54.camel@localhost>
	 <c0c0e1d40707241714k4cef2167lcd7a5cec866b8555@mail.gmail.com>
	 <1185325363.4593.70.camel@localhost>
	 <c0c0e1d40707242239y17296bf3rcb9daf6ab3cd9c2f@mail.gmail.com>
	 <BAY114-DAV100592591AD1D725911CE594F10@phx.gbl>
	 <c0c0e1d40707250710v5e7e7694obead0b44449507e0@mail.gmail.com>
	 <F5C96C89-A4FE-4392-8E2D-92706F4E4923@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5823_7476693.1185378324950
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Grant,

Thanks for the response. Heres what I am trying to accomplish:

1. Iterate over itemID (unique) in the database using one SQL query.
2. For every itemID found, run 4 searches on Lucene Index.
3. doTagSearch(itemID....) ; collect score
4. doTitleSearch(itemID...) ; collect score
5. doSummarySearch(itemID...) ; collect score
6. doBodySearch(itemID....) ; collect score

These scores are then added and I get a total score for each unique item in
the database.

Lucene Index has: <itemID><tags><title><summary><contents>

So if I am running a body search, I have 92 hits from over 300 documents for
a query. I already know my hit with the <itemID> .

For instance, from step (1) if itemID 16 is passed to all the 4 searches, I
just need to get the score of the document which has itemID field = 16. I
don't have to iterate over all the hits.

I suppose I have to change my query to look for <contents> where itemID=16.
Can you guide me as to how to do it ?

thanks a ton,

Askar

On 7/25/07, Grant Ingersoll <gsingers@apache.org> wrote:
>
> Hi Askar,
>
> I suggest we take a step back, and ask the question, what are you
> trying to accomplish?  That is, what is your application trying to
> do?  Forget the code, etc. just explain what you want the end result
> to be and we can work from there.   Based on what you have described,
> I am not sure you need access to the hits.  It seems like you just
> need to make better queries.
>
> Is your itemID a unique identifier?  If yes, then you shouldn't need
> to loop over hits at all, as you should only ever have one result IF
> your query contains a required term.  Also, if this is the case, why
> do you need to do a search at all?  Haven't you already identified
> the items of interest when you did your select query in the
> database?  Or is it that you want to score the item based on some
> terms as well.  If that is the case, there are other ways of doing
> this and we can discuss them.
>
> -Grant
>
> On Jul 25, 2007, at 10:10 AM, Askar Zaidi wrote:
>
> > Hey Guys,
> >
> > I need to know how I can use the HitCollector class ? I am using
> > Hits and
> > looping over all the possible document hits (turns out its 92 times
> > I am
> > looping; for 300 searches, its 300*92 !!). Can I avoid this using
> > HitCollector ? I can't seem to understand how its used.
> >
> > thanks a lot,
> >
> > Askar
> >
> > On 7/25/07, Dmitry <dmitrytkach1@hotmail.com> wrote:
> >>
> >> Askar,
> >> why do you need to add +id:<idWeCareAbout>?
> >> thanks,
> >> dt,
> >> www.ejinz.com
> >> search engine news forms
> >> ----- Original Message -----
> >> From: "Askar Zaidi" <askar.zaidi@gmail.com>
> >> To: <java-user@lucene.apache.org>; <nhira@cognocys.com>
> >> Sent: Wednesday, July 25, 2007 12:39 AM
> >> Subject: Re: Fine Tuning Lucene implementation
> >>
> >>
> >>> Hey Hira ,
> >>>
> >>> Thanks so much for the reply. Much appreciate it.
> >>>
> >>> Quote:
> >>>
> >>> Would it be possible to just include a query clause?
> >>>   - i.e., instead of just contents:<userQuery>, also add
> >>> +id:<idWeCareAbout>
> >>>
> >>> How can I do that ?
> >>>
> >>> I see my query as :
> >>>
> >>> +contents:harvard +contents:business +contents:review
> >>>
> >>> where the search phrase was: harvard business review
> >>>
> >>> Now how can I add +id:<idWeCareAbout>  ??
> >>>
> >>> This would give me that one exact document I am looking for , for
> >>> that
> >> id.
> >>> I
> >>> don't have to iterate through hits.
> >>>
> >>> thanks,
> >>>
> >>> Askar
> >>>
> >>>
> >>>
> >>> On 7/24/07, N. Hira <nhira@cognocys.com> wrote:
> >>>>
> >>>> I'm no expert on this (so please accept the comments in that
> >>>> context)
> >>>> but 2 things seem weird to me:
> >>>>
> >>>> 1.  Iterating over each hit is an expensive proposition.  I've
> >>>> often
> >>>> seen people recommending a HitCollector.
> >>>>
> >>>> 2.  It seems that doBodySearch() is essentially saying, do this
> >>>> search
> >>>> and return the score pertinent to this ID (using an exhaustive
> >>>> loop).
> >>>> Would it be possible to just include a query clause?
> >>>>     - i.e., instead of just contents:<userQuery>, also add
> >>>> +id:<idWeCareAbout>
> >>>>
> >>>> In general though, I think your algorithm seems inefficient (if I
> >>>> understand it correctly):-- if I want to search for one term
> >>>> among 3 in
> >>>> a "collection" of 300 documents (as defined by some external
> >> attribute),
> >>>> I will wind up executing 300 x 3 searches, and for each search
> >>>> that is
> >>>> executed, I will iterate over every Hit, even if I've already
> >>>> found the
> >>>> one that I "care about".
> >>>>
> >>>> What would break if you:
> >>>> 1.  Included "creator" in the Lucene index (or, filtered out the
> >>>> Hits
> >>>> using a BitSet or something like it)
> >>>> 2.  Executed 1 search
> >>>> 3.  Collected the results of the first N Hits (where N is some
> >>>> reasonable limit, like 100 or 500)
> >>>>
> >>>> -h
> >>>>
> >>>>
> >>>> On Tue, 2007-07-24 at 20:14 -0400, Askar Zaidi wrote:
> >>>>
> >>>>> Sure.
> >>>>>
> >>>>>  public float doBodySearch(Searcher searcher,String query, int
> >>>>> id){
> >>>>>
> >>>>>                  try{
> >>>>>                                 score = search(searcher,
> >>>>> query,id);
> >>>>>                      }
> >>>>>                       catch(IOException io){}
> >>>>>                       catch(ParseException pe){}
> >>>>>
> >>>>>                       return score;
> >>>>>
> >>>>>                 }
> >>>>>
> >>>>>  private float search(Searcher searcher, String queryString,
> >>>>> int id)
> >>>>> throws ParseException, IOException {
> >>>>>
> >>>>>         // Build a Query object
> >>>>>
> >>>>>         QueryParser queryParser = new QueryParser("contents", new
> >>>>> KeywordAnalyzer());
> >>>>>
> >>>>>         queryParser.setDefaultOperator(QueryParser.Operator.AND);
> >>>>>
> >>>>>         Query query = queryParser.parse(queryString);
> >>>>>
> >>>>>         // Search for the query
> >>>>>
> >>>>>         Hits hits = searcher.search(query);
> >>>>>         Document doc = null;
> >>>>>
> >>>>>         // Examine the Hits object to see if there were any
> >>>>> matches
> >>>>>         int hitCount = hits.length();
> >>>>>
> >>>>>                 for(int i=0;i<hitCount;i++){
> >>>>>                 doc = hits.doc(i);
> >>>>>                 String str = doc.get("item");
> >>>>>                 int tmp = Integer.parseInt(str);
> >>>>>                 if(tmp==id)
> >>>>>                 score = hits.score(i);
> >>>>>                 }
> >>>>>
> >>>>>         return score;
> >>>>>     }
> >>>>>
> >>>>> I really need to optimize doBodySearch(...) as this takes the most
> >>>>> time.
> >>>>>
> >>>>> thanks guys,
> >>>>> Askar
> >>>>>
> >>>>>
> >>>>> On 7/24/07, N. Hira <nhira@cognocys.com> wrote:
> >>>>>
> >>>>>         Could you show us the relevant source from doBodySearch()?
> >>>>>
> >>>>>         -h
> >>>>>
> >>>>>         On Tue, 2007-07-24 at 19:58 -0400, Askar Zaidi wrote:
> >>>>>> I ran some tests and it seems that the slowness is from
> >>>>>         Lucene calls when I
> >>>>>> do "doBodySearch", if I remove that call, Lucene gives me
> >>>>>         results in 5
> >>>>>> seconds. otherwise it takes about 50 seconds.
> >>>>>>
> >>>>>> But I need to do Body search and that field contains lots
> >> of
> >>>>>         text. The field
> >>>>>> is <contents>. How can I optimize that ?
> >>>>>>
> >>>>>> thanks,
> >>>>>> Askar
> >>>>>>
> >>>>>>
> >>>>
> >>>>
> >>>>
> >>>>
> >>>
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
>
> --------------------------
> Grant Ingersoll
> Center for Natural Language Processing
> http://www.cnlp.org/tech/lucene.asp
>
> Read the Lucene Java FAQ at http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_5823_7476693.1185378324950--

From java-user-return-29387-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 25 15:58:21 2007
Return-Path: <java-user-return-29387-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33022 invoked from network); 25 Jul 2007 15:58:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2007 15:58:20 -0000
Received: (qmail 20566 invoked by uid 500); 25 Jul 2007 15:58:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20532 invoked by uid 500); 25 Jul 2007 15:58:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20521 invoked by uid 99); 25 Jul 2007 15:58:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 08:58:14 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [130.107.64.135] (HELO Balboa.AI.SRI.COM) (130.107.64.135)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 08:58:12 -0700
Received: from Balboa.AI.SRI.COM (localhost [127.0.0.1])
	by Balboa.AI.SRI.COM (8.11.7p2+Sun/8.10.1) with SMTP id l6PFvp011856
	for <java-user@lucene.apache.org>; Wed, 25 Jul 2007 08:57:51 -0700 (PDT)
Received: from Salt.AI.SRI.COM ([130.107.65.211])
 by Balboa.AI.SRI.COM (SMSSMTP 4.1.9.35) with SMTP id M2007072508575024453
 for <java-user@lucene.apache.org>; Wed, 25 Jul 2007 08:57:50 -0700
Received: from localhost.ai.sri.com
	([127.0.0.1] helo=[130.107.65.150] ident=root)
	by Salt.AI.SRI.COM with asmtp (Exim 3.35 #1 (Debian))
	id 1IDjFG-0007cv-00
	for <java-user@lucene.apache.org>; Wed, 25 Jul 2007 08:57:51 -0700
Message-ID: <46A772FC.8000102@ai.sri.com>
Date: Wed, 25 Jul 2007 08:57:48 -0700
From: Jay Yu <yu@AI.SRI.COM>
User-Agent: Thunderbird 2.0.0.5 (Windows/20070716)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Search for null
References: <11746864.post@talk.nabble.com> <0E1018D4-E9DB-424C-84F9-C72B1AA5D3B3@ehatchersolutions.com> <46A50FBA.9000109@affinitycircles.com>  <46A51638.1050708@ai.sri.com> <1185277710.10469.26.camel@rosher.org>  <46A62B98.40602@ai.sri.com> <1185353815.9695.20.camel@rosher.org>
In-Reply-To: <1185353815.9695.20.camel@rosher.org>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

what if I do not know all possible values of that field which is a 
typical case in a free text search?

daniel rosher wrote:
> You will be unable to search for fields that do not exist which is what
> you originally wanted to do, instead you can do something like:
> 
> -Establish the query that will select all non-null values
> 
> TermQuery tq1 = new TermQuery(new Term("field","value1"));
> TermQuery tq2 = new TermQuery(new Term("field","value2"));
> ...
> TermQuery tqn = new TermQuery(new Term("field","valuen"));
> BooleanQuery query = new BooleanQuery();
> booleanQuery.add(tq1,BooleanClause.Occur.SHOULD);
> booleanQuery.add(tq2,BooleanClause.Occur.SHOULD);
> ...
> booleanQuery.add(tqn,BooleanClause.Occur.SHOULD);
> 
> OR perhaps a range query if your values are contiguous
> 
> Term start = new Term("field","198805");
> Term end = new Term("field","198810");
> Query query = new RangeQuery(start, end, true);
> ;
> 
> OR just use the QueryParser
> 
> Query query = QueryParser.parse(parseCriteria,
> "field", new StandardAnalyzer());
> 
> -Create the QueryFilter
> 
> QueryFilter queryFilter = new QueryFilter(query);
> 
> -flip the bits
> 
> final BitSet filterBitSet = queryFilter.bits(reader);
> filterBitSet.flip(0,filterBitSet.size());
> 
> Now you have a filter that contains document matching the opposite of
> that specified by the query, and can use in subsequent queries
> 
> Dan
> 
> 
> 
> On Tue, 2007-07-24 at 09:40 -0700, Jay Yu wrote:
>> daniel rosher wrote:
>>> Perhaps you can use a filter in the following way.
>>>
>>> -Create a filter (via QueryFilter) that would contain all document that
>>> do not have null values for the field
>> Interesting: what does the QueryFilter look like? Isn't it just as hard 
>> as finding out what docs have the null values for the field?
>> I really like to know your trick here.
>>> -flip the bits of the filter so that it now contains documents that have
>>> null values for a field
>>> -Use the filter in conjunction with subsequent queries.
>>>
>>> This would also help with performance as filters are simply bitsets and
>>> can cheaply be stored, generated once and used often.
>>>
>>> Dan
>>>
>>> On Mon, 2007-07-23 at 13:57 -0700, Jay Yu wrote:
>>>> If you want performance, a better way might be to assign some special 
>>>> string/value (if it's easy to create) to the missing field of docs and 
>>>> index the field without tokenizing it. Then you may search for that 
>>>> special value to find the docs.
>>>>
>>>> Jay
>>>>
>>>> Les Fletcher wrote:
>>>>> Does this particular range query have any significant performance issues?
>>>>>
>>>>> Les
>>>>>
>>>>> Erik Hatcher wrote:
>>>>>> On Jul 23, 2007, at 11:32 AM, testn wrote:
>>>>>>> Is it possible to search for the document that specified field 
>>>>>>> doesn't exist
>>>>>>> or such field value is null?
>>>>>> This is from Solr, so I'm not sure off the top of my head if this mojo 
>>>>>> applies by itself, but a search for -fieldname:[* TO *] will result in 
>>>>>> all documents that do not have the specified field.
>>>>>>
>>>>>>     Erik
>>>>>>
>>>>>>
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>> <<This email has been scanned for virus and spam content>>
>>> Daniel Rosher
>>> Developer
>>>
>>>
>>> d: 0207 3489 912
>>> t: 0870 2020 121
>>> f: 0870 2020 131
>>> m: 
>>> http://www.hotonline.com/
>>>
>>>
>>>
>>>
>>>
>>>
>>> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
>>> This message is sent in confidence for the addressee only. It may contain privileged 
>>> information. The contents are not to be disclosed to anyone other than the addressee. 
>>> Unauthorised recipients are requested to preserve this confidentiality and to advise 
>>> us of any errors in transmission. Thank you.
>>>
>>> hotonline ltd is registered in England & Wales. Registered office: One Canada Square, 
>>> Canary Wharf, London E14 5AP. Registered No: 1904765.
>>>
>>>
>>> This message has been scanned for viruses by BlackSpider MailControl - www.blackspider.com
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> Daniel Rosher
> Developer
> 
> 
> d: 0207 3489 912
> t: 0870 2020 121
> f: 0870 2020 131
> m: 
> http://www.hotonline.com/
> 
> 
> 
> 
> 
> 
> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
> This message is sent in confidence for the addressee only. It may contain privileged 
> information. The contents are not to be disclosed to anyone other than the addressee. 
> Unauthorised recipients are requested to preserve this confidentiality and to advise 
> us of any errors in transmission. Thank you.
> 
> hotonline ltd is registered in England & Wales. Registered office: One Canada Square, 
> Canary Wharf, London E14 5AP. Registered No: 1904765.
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29388-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 25 16:14:19 2007
Return-Path: <java-user-return-29388-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44370 invoked from network); 25 Jul 2007 16:14:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2007 16:14:18 -0000
Received: (qmail 83061 invoked by uid 500); 25 Jul 2007 16:14:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83030 invoked by uid 500); 25 Jul 2007 16:14:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83019 invoked by uid 99); 25 Jul 2007 16:14:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 09:14:12 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of grant.ingersoll@gmail.com designates 66.249.82.238 as permitted sender)
Received: from [66.249.82.238] (HELO wx-out-0506.google.com) (66.249.82.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 09:14:10 -0700
Received: by wx-out-0506.google.com with SMTP id i28so189052wxd
        for <java-user@lucene.apache.org>; Wed, 25 Jul 2007 09:13:49 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=rIqaCycaZhQzkrUPAwv8kTXW9G5/O3EFWBeOYyuHMoc/IizhoQ670OXBJEOf+5ry210vKvUNpAYWCXHX91l3Dwb06rFFHRoUSDk5oRq0cJHT74Bu3acopNv4K506gqPg2B5Aei2dIws2GulmLLq7QH6VVoiWtRwvmqPeVa0sykI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=oZXNawwND02y2Sp7axz0GHE8B9V8ySnnEDTsfWenqpjHvAmQKd0F15x/aPm7NhMHgYPOFPGrLWCoQOkn0wNTZrHzxnRIJYJhxBRrnWKgqAGWl0thDCsmfXxw9uxK2ckgLbIr4zlZL2Zkq+ec2tiBnpRa19sEIc6ebv65D3B7wEg=
Received: by 10.90.34.3 with SMTP id h3mr707367agh.1185380029349;
        Wed, 25 Jul 2007 09:13:49 -0700 (PDT)
Received: from ?192.168.0.3? ( [74.229.189.244])
        by mx.google.com with ESMTPS id 39sm427764wrl.2007.07.25.09.13.47
        (version=TLSv1/SSLv3 cipher=OTHER);
        Wed, 25 Jul 2007 09:13:48 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <c0c0e1d40707250845s6b91c66ei79e94bacfb292f2c@mail.gmail.com>
References: <c0c0e1d40707241243y5ddfd5fai10381873a2d2bd64@mail.gmail.com> <28F241F7-C4AD-414C-89D8-95AC22C0736B@apache.org> <c0c0e1d40707241658tfd64870v40a6b9431780fe98@mail.gmail.com> <1185322083.4593.54.camel@localhost> <c0c0e1d40707241714k4cef2167lcd7a5cec866b8555@mail.gmail.com> <1185325363.4593.70.camel@localhost> <c0c0e1d40707242239y17296bf3rcb9daf6ab3cd9c2f@mail.gmail.com> <BAY114-DAV100592591AD1D725911CE594F10@phx.gbl> <c0c0e1d40707250710v5e7e7694obead0b44449507e0@mail.gmail.com> <F5C96C89-A4FE-4392-8E2D-92706F4E4923@apache.org> <c0c0e1d40707250845s6b91c66ei79e94bacfb292f2c@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <C31E77DA-C5D3-44C6-8D96-4E7DF1812849@gmail.com>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <grant.ingersoll@gmail.com>
Subject: Re: Fine Tuning Lucene implementation
Date: Wed, 25 Jul 2007 12:13:38 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

So, you really want a single Lucene score (based on the scores of  
your 4 fields) for every itemID, correct?  And this score consists of  
scoring the title, tag, summary and body against some keywords correct?

Here's what I would do:

while (rs.next())
{
     doc = getDocument(itemId);  // Get your document, including  
contents from your database, no need even to put them in Lucene,  
although you could
     add the doc to a MemoryIndex (see contrib/memory)
     Run your 4 searches against that memory index to get your  
score.  Even better, combine your query into a single query that  
searches all 4 fields at once, then Lucene will combine the score for  
you
}

MemoryIndex info can be found at http://lucene.zones.apache.org:8080/ 
hudson/job/Lucene-Nightly/javadoc/org/apache/lucene/index/memory/ 
package-summary.html

-Grant

On Jul 25, 2007, at 11:45 AM, Askar Zaidi wrote:

> Hi Grant,
>
> Thanks for the response. Heres what I am trying to accomplish:
>
> 1. Iterate over itemID (unique) in the database using one SQL query.
> 2. For every itemID found, run 4 searches on Lucene Index.
> 3. doTagSearch(itemID....) ; collect score
> 4. doTitleSearch(itemID...) ; collect score
> 5. doSummarySearch(itemID...) ; collect score
> 6. doBodySearch(itemID....) ; collect score
>
> These scores are then added and I get a total score for each unique  
> item in
> the database.
>
> Lucene Index has: <itemID><tags><title><summary><contents>
>
> So if I am running a body search, I have 92 hits from over 300  
> documents for
> a query. I already know my hit with the <itemID> .
>
> For instance, from step (1) if itemID 16 is passed to all the 4  
> searches, I
> just need to get the score of the document which has itemID field =  
> 16. I
> don't have to iterate over all the hits.
>
> I suppose I have to change my query to look for <contents> where  
> itemID=16.
> Can you guide me as to how to do it ?
>
> thanks a ton,
>
> Askar
>
> On 7/25/07, Grant Ingersoll <gsingers@apache.org> wrote:
>>
>> Hi Askar,
>>
>> I suggest we take a step back, and ask the question, what are you
>> trying to accomplish?  That is, what is your application trying to
>> do?  Forget the code, etc. just explain what you want the end result
>> to be and we can work from there.   Based on what you have described,
>> I am not sure you need access to the hits.  It seems like you just
>> need to make better queries.
>>
>> Is your itemID a unique identifier?  If yes, then you shouldn't need
>> to loop over hits at all, as you should only ever have one result IF
>> your query contains a required term.  Also, if this is the case, why
>> do you need to do a search at all?  Haven't you already identified
>> the items of interest when you did your select query in the
>> database?  Or is it that you want to score the item based on some
>> terms as well.  If that is the case, there are other ways of doing
>> this and we can discuss them.
>>
>> -Grant
>>
>> On Jul 25, 2007, at 10:10 AM, Askar Zaidi wrote:
>>
>>> Hey Guys,
>>>
>>> I need to know how I can use the HitCollector class ? I am using
>>> Hits and
>>> looping over all the possible document hits (turns out its 92 times
>>> I am
>>> looping; for 300 searches, its 300*92 !!). Can I avoid this using
>>> HitCollector ? I can't seem to understand how its used.
>>>
>>> thanks a lot,
>>>
>>> Askar
>>>
>>> On 7/25/07, Dmitry <dmitrytkach1@hotmail.com> wrote:
>>>>
>>>> Askar,
>>>> why do you need to add +id:<idWeCareAbout>?
>>>> thanks,
>>>> dt,
>>>> www.ejinz.com
>>>> search engine news forms
>>>> ----- Original Message -----
>>>> From: "Askar Zaidi" <askar.zaidi@gmail.com>
>>>> To: <java-user@lucene.apache.org>; <nhira@cognocys.com>
>>>> Sent: Wednesday, July 25, 2007 12:39 AM
>>>> Subject: Re: Fine Tuning Lucene implementation
>>>>
>>>>
>>>>> Hey Hira ,
>>>>>
>>>>> Thanks so much for the reply. Much appreciate it.
>>>>>
>>>>> Quote:
>>>>>
>>>>> Would it be possible to just include a query clause?
>>>>>   - i.e., instead of just contents:<userQuery>, also add
>>>>> +id:<idWeCareAbout>
>>>>>
>>>>> How can I do that ?
>>>>>
>>>>> I see my query as :
>>>>>
>>>>> +contents:harvard +contents:business +contents:review
>>>>>
>>>>> where the search phrase was: harvard business review
>>>>>
>>>>> Now how can I add +id:<idWeCareAbout>  ??
>>>>>
>>>>> This would give me that one exact document I am looking for , for
>>>>> that
>>>> id.
>>>>> I
>>>>> don't have to iterate through hits.
>>>>>
>>>>> thanks,
>>>>>
>>>>> Askar
>>>>>
>>>>>
>>>>>
>>>>> On 7/24/07, N. Hira <nhira@cognocys.com> wrote:
>>>>>>
>>>>>> I'm no expert on this (so please accept the comments in that
>>>>>> context)
>>>>>> but 2 things seem weird to me:
>>>>>>
>>>>>> 1.  Iterating over each hit is an expensive proposition.  I've
>>>>>> often
>>>>>> seen people recommending a HitCollector.
>>>>>>
>>>>>> 2.  It seems that doBodySearch() is essentially saying, do this
>>>>>> search
>>>>>> and return the score pertinent to this ID (using an exhaustive
>>>>>> loop).
>>>>>> Would it be possible to just include a query clause?
>>>>>>     - i.e., instead of just contents:<userQuery>, also add
>>>>>> +id:<idWeCareAbout>
>>>>>>
>>>>>> In general though, I think your algorithm seems inefficient (if I
>>>>>> understand it correctly):-- if I want to search for one term
>>>>>> among 3 in
>>>>>> a "collection" of 300 documents (as defined by some external
>>>> attribute),
>>>>>> I will wind up executing 300 x 3 searches, and for each search
>>>>>> that is
>>>>>> executed, I will iterate over every Hit, even if I've already
>>>>>> found the
>>>>>> one that I "care about".
>>>>>>
>>>>>> What would break if you:
>>>>>> 1.  Included "creator" in the Lucene index (or, filtered out the
>>>>>> Hits
>>>>>> using a BitSet or something like it)
>>>>>> 2.  Executed 1 search
>>>>>> 3.  Collected the results of the first N Hits (where N is some
>>>>>> reasonable limit, like 100 or 500)
>>>>>>
>>>>>> -h
>>>>>>
>>>>>>
>>>>>> On Tue, 2007-07-24 at 20:14 -0400, Askar Zaidi wrote:
>>>>>>
>>>>>>> Sure.
>>>>>>>
>>>>>>>  public float doBodySearch(Searcher searcher,String query, int
>>>>>>> id){
>>>>>>>
>>>>>>>                  try{
>>>>>>>                                 score = search(searcher,
>>>>>>> query,id);
>>>>>>>                      }
>>>>>>>                       catch(IOException io){}
>>>>>>>                       catch(ParseException pe){}
>>>>>>>
>>>>>>>                       return score;
>>>>>>>
>>>>>>>                 }
>>>>>>>
>>>>>>>  private float search(Searcher searcher, String queryString,
>>>>>>> int id)
>>>>>>> throws ParseException, IOException {
>>>>>>>
>>>>>>>         // Build a Query object
>>>>>>>
>>>>>>>         QueryParser queryParser = new QueryParser("contents",  
>>>>>>> new
>>>>>>> KeywordAnalyzer());
>>>>>>>
>>>>>>>         queryParser.setDefaultOperator 
>>>>>>> (QueryParser.Operator.AND);
>>>>>>>
>>>>>>>         Query query = queryParser.parse(queryString);
>>>>>>>
>>>>>>>         // Search for the query
>>>>>>>
>>>>>>>         Hits hits = searcher.search(query);
>>>>>>>         Document doc = null;
>>>>>>>
>>>>>>>         // Examine the Hits object to see if there were any
>>>>>>> matches
>>>>>>>         int hitCount = hits.length();
>>>>>>>
>>>>>>>                 for(int i=0;i<hitCount;i++){
>>>>>>>                 doc = hits.doc(i);
>>>>>>>                 String str = doc.get("item");
>>>>>>>                 int tmp = Integer.parseInt(str);
>>>>>>>                 if(tmp==id)
>>>>>>>                 score = hits.score(i);
>>>>>>>                 }
>>>>>>>
>>>>>>>         return score;
>>>>>>>     }
>>>>>>>
>>>>>>> I really need to optimize doBodySearch(...) as this takes the  
>>>>>>> most
>>>>>>> time.
>>>>>>>
>>>>>>> thanks guys,
>>>>>>> Askar
>>>>>>>
>>>>>>>
>>>>>>> On 7/24/07, N. Hira <nhira@cognocys.com> wrote:
>>>>>>>
>>>>>>>         Could you show us the relevant source from  
>>>>>>> doBodySearch()?
>>>>>>>
>>>>>>>         -h
>>>>>>>
>>>>>>>         On Tue, 2007-07-24 at 19:58 -0400, Askar Zaidi wrote:
>>>>>>>> I ran some tests and it seems that the slowness is from
>>>>>>>         Lucene calls when I
>>>>>>>> do "doBodySearch", if I remove that call, Lucene gives me
>>>>>>>         results in 5
>>>>>>>> seconds. otherwise it takes about 50 seconds.
>>>>>>>>
>>>>>>>> But I need to do Body search and that field contains lots
>>>> of
>>>>>>>         text. The field
>>>>>>>> is <contents>. How can I optimize that ?
>>>>>>>>
>>>>>>>> thanks,
>>>>>>>> Askar
>>>>>>>>
>>>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>
>>>>
>>>>
>>>> ------------------------------------------------------------------- 
>>>> --
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>
>> --------------------------
>> Grant Ingersoll
>> Center for Natural Language Processing
>> http://www.cnlp.org/tech/lucene.asp
>>
>> Read the Lucene Java FAQ at http://wiki.apache.org/lucene-java/ 
>> LuceneFAQ
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>

------------------------------------------------------
Grant Ingersoll
http://www.grantingersoll.com/
http://lucene.grantingersoll.com
http://www.paperoftheweek.com/



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29389-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 25 16:26:53 2007
Return-Path: <java-user-return-29389-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55686 invoked from network); 25 Jul 2007 16:26:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2007 16:26:51 -0000
Received: (qmail 12824 invoked by uid 500); 25 Jul 2007 16:26:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12792 invoked by uid 500); 25 Jul 2007 16:26:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12781 invoked by uid 99); 25 Jul 2007 16:26:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 09:26:45 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of askar.zaidi@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 09:26:42 -0700
Received: by ug-out-1314.google.com with SMTP id c2so451178ugf
        for <java-user@lucene.apache.org>; Wed, 25 Jul 2007 09:26:20 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Nm0ZTZPqI1QoIfenrmSQxFCNIAfzIwNYCsV9AnziZouCVl8LkUe5anhq5ixyTOFiAxxNqIRLxSF97cf6sceRMvK8LU9o9k29wPwh34wt5nz5/GPvZX/uNBn7qt90v/1alViALsydmla9sB7dTaOEpN8aEs1H9q4ha/veVMHIo8k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=hA9YCk9naNJ2hG9Y+rYtRNZ3gUaFb1tXfNmo4uyRFO1fTmLpK3ZCLIU6N9vtpkuUqE5LJBlIDVGxCgAv9XXwgje5Ox6XLA4/+azYxuaApJGdFLvnUZerlgIA9I5zXD2GGuFJpHLwfTaCn+oSuJPQRizmhGi2OGixbenf+PiYU/8=
Received: by 10.66.222.19 with SMTP id u19mr1474119ugg.1185380780099;
        Wed, 25 Jul 2007 09:26:20 -0700 (PDT)
Received: by 10.66.251.15 with HTTP; Wed, 25 Jul 2007 09:26:20 -0700 (PDT)
Message-ID: <c0c0e1d40707250926i895af09m647e2b9bfce575f2@mail.gmail.com>
Date: Wed, 25 Jul 2007 12:26:20 -0400
From: "Askar Zaidi" <askar.zaidi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Fine Tuning Lucene implementation
In-Reply-To: <C31E77DA-C5D3-44C6-8D96-4E7DF1812849@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6508_31916151.1185380780021"
References: <c0c0e1d40707241243y5ddfd5fai10381873a2d2bd64@mail.gmail.com>
	 <1185322083.4593.54.camel@localhost>
	 <c0c0e1d40707241714k4cef2167lcd7a5cec866b8555@mail.gmail.com>
	 <1185325363.4593.70.camel@localhost>
	 <c0c0e1d40707242239y17296bf3rcb9daf6ab3cd9c2f@mail.gmail.com>
	 <BAY114-DAV100592591AD1D725911CE594F10@phx.gbl>
	 <c0c0e1d40707250710v5e7e7694obead0b44449507e0@mail.gmail.com>
	 <F5C96C89-A4FE-4392-8E2D-92706F4E4923@apache.org>
	 <c0c0e1d40707250845s6b91c66ei79e94bacfb292f2c@mail.gmail.com>
	 <C31E77DA-C5D3-44C6-8D96-4E7DF1812849@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_6508_31916151.1185380780021
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Instead of refactoring the code, would there be a way to just modify the
query in each search routine ?

Such as, "search contents:<text> and item:<itemID>"; This means it would
just collect the score of that one document whose itemID field = itemID
passed from while(rs.next()).

I just need to collect the score of the <itemID> already in the index.

Would there be a way to modify the query ? Add a clause ?

thanks,
Askar


On 7/25/07, Grant Ingersoll <grant.ingersoll@gmail.com> wrote:
>
> So, you really want a single Lucene score (based on the scores of
> your 4 fields) for every itemID, correct?  And this score consists of
> scoring the title, tag, summary and body against some keywords correct?
>
> Here's what I would do:
>
> while (rs.next())
> {
>      doc = getDocument(itemId);  // Get your document, including
> contents from your database, no need even to put them in Lucene,
> although you could
>      add the doc to a MemoryIndex (see contrib/memory)
>      Run your 4 searches against that memory index to get your
> score.  Even better, combine your query into a single query that
> searches all 4 fields at once, then Lucene will combine the score for
> you
> }
>
> MemoryIndex info can be found at http://lucene.zones.apache.org:8080/
> hudson/job/Lucene-Nightly/javadoc/org/apache/lucene/index/memory/
> package-summary.html
>
> -Grant
>
> On Jul 25, 2007, at 11:45 AM, Askar Zaidi wrote:
>
> > Hi Grant,
> >
> > Thanks for the response. Heres what I am trying to accomplish:
> >
> > 1. Iterate over itemID (unique) in the database using one SQL query.
> > 2. For every itemID found, run 4 searches on Lucene Index.
> > 3. doTagSearch(itemID....) ; collect score
> > 4. doTitleSearch(itemID...) ; collect score
> > 5. doSummarySearch(itemID...) ; collect score
> > 6. doBodySearch(itemID....) ; collect score
> >
> > These scores are then added and I get a total score for each unique
> > item in
> > the database.
> >
> > Lucene Index has: <itemID><tags><title><summary><contents>
> >
> > So if I am running a body search, I have 92 hits from over 300
> > documents for
> > a query. I already know my hit with the <itemID> .
> >
> > For instance, from step (1) if itemID 16 is passed to all the 4
> > searches, I
> > just need to get the score of the document which has itemID field =
> > 16. I
> > don't have to iterate over all the hits.
> >
> > I suppose I have to change my query to look for <contents> where
> > itemID=16.
> > Can you guide me as to how to do it ?
> >
> > thanks a ton,
> >
> > Askar
> >
> > On 7/25/07, Grant Ingersoll <gsingers@apache.org> wrote:
> >>
> >> Hi Askar,
> >>
> >> I suggest we take a step back, and ask the question, what are you
> >> trying to accomplish?  That is, what is your application trying to
> >> do?  Forget the code, etc. just explain what you want the end result
> >> to be and we can work from there.   Based on what you have described,
> >> I am not sure you need access to the hits.  It seems like you just
> >> need to make better queries.
> >>
> >> Is your itemID a unique identifier?  If yes, then you shouldn't need
> >> to loop over hits at all, as you should only ever have one result IF
> >> your query contains a required term.  Also, if this is the case, why
> >> do you need to do a search at all?  Haven't you already identified
> >> the items of interest when you did your select query in the
> >> database?  Or is it that you want to score the item based on some
> >> terms as well.  If that is the case, there are other ways of doing
> >> this and we can discuss them.
> >>
> >> -Grant
> >>
> >> On Jul 25, 2007, at 10:10 AM, Askar Zaidi wrote:
> >>
> >>> Hey Guys,
> >>>
> >>> I need to know how I can use the HitCollector class ? I am using
> >>> Hits and
> >>> looping over all the possible document hits (turns out its 92 times
> >>> I am
> >>> looping; for 300 searches, its 300*92 !!). Can I avoid this using
> >>> HitCollector ? I can't seem to understand how its used.
> >>>
> >>> thanks a lot,
> >>>
> >>> Askar
> >>>
> >>> On 7/25/07, Dmitry <dmitrytkach1@hotmail.com> wrote:
> >>>>
> >>>> Askar,
> >>>> why do you need to add +id:<idWeCareAbout>?
> >>>> thanks,
> >>>> dt,
> >>>> www.ejinz.com
> >>>> search engine news forms
> >>>> ----- Original Message -----
> >>>> From: "Askar Zaidi" <askar.zaidi@gmail.com>
> >>>> To: <java-user@lucene.apache.org>; <nhira@cognocys.com>
> >>>> Sent: Wednesday, July 25, 2007 12:39 AM
> >>>> Subject: Re: Fine Tuning Lucene implementation
> >>>>
> >>>>
> >>>>> Hey Hira ,
> >>>>>
> >>>>> Thanks so much for the reply. Much appreciate it.
> >>>>>
> >>>>> Quote:
> >>>>>
> >>>>> Would it be possible to just include a query clause?
> >>>>>   - i.e., instead of just contents:<userQuery>, also add
> >>>>> +id:<idWeCareAbout>
> >>>>>
> >>>>> How can I do that ?
> >>>>>
> >>>>> I see my query as :
> >>>>>
> >>>>> +contents:harvard +contents:business +contents:review
> >>>>>
> >>>>> where the search phrase was: harvard business review
> >>>>>
> >>>>> Now how can I add +id:<idWeCareAbout>  ??
> >>>>>
> >>>>> This would give me that one exact document I am looking for , for
> >>>>> that
> >>>> id.
> >>>>> I
> >>>>> don't have to iterate through hits.
> >>>>>
> >>>>> thanks,
> >>>>>
> >>>>> Askar
> >>>>>
> >>>>>
> >>>>>
> >>>>> On 7/24/07, N. Hira <nhira@cognocys.com> wrote:
> >>>>>>
> >>>>>> I'm no expert on this (so please accept the comments in that
> >>>>>> context)
> >>>>>> but 2 things seem weird to me:
> >>>>>>
> >>>>>> 1.  Iterating over each hit is an expensive proposition.  I've
> >>>>>> often
> >>>>>> seen people recommending a HitCollector.
> >>>>>>
> >>>>>> 2.  It seems that doBodySearch() is essentially saying, do this
> >>>>>> search
> >>>>>> and return the score pertinent to this ID (using an exhaustive
> >>>>>> loop).
> >>>>>> Would it be possible to just include a query clause?
> >>>>>>     - i.e., instead of just contents:<userQuery>, also add
> >>>>>> +id:<idWeCareAbout>
> >>>>>>
> >>>>>> In general though, I think your algorithm seems inefficient (if I
> >>>>>> understand it correctly):-- if I want to search for one term
> >>>>>> among 3 in
> >>>>>> a "collection" of 300 documents (as defined by some external
> >>>> attribute),
> >>>>>> I will wind up executing 300 x 3 searches, and for each search
> >>>>>> that is
> >>>>>> executed, I will iterate over every Hit, even if I've already
> >>>>>> found the
> >>>>>> one that I "care about".
> >>>>>>
> >>>>>> What would break if you:
> >>>>>> 1.  Included "creator" in the Lucene index (or, filtered out the
> >>>>>> Hits
> >>>>>> using a BitSet or something like it)
> >>>>>> 2.  Executed 1 search
> >>>>>> 3.  Collected the results of the first N Hits (where N is some
> >>>>>> reasonable limit, like 100 or 500)
> >>>>>>
> >>>>>> -h
> >>>>>>
> >>>>>>
> >>>>>> On Tue, 2007-07-24 at 20:14 -0400, Askar Zaidi wrote:
> >>>>>>
> >>>>>>> Sure.
> >>>>>>>
> >>>>>>>  public float doBodySearch(Searcher searcher,String query, int
> >>>>>>> id){
> >>>>>>>
> >>>>>>>                  try{
> >>>>>>>                                 score = search(searcher,
> >>>>>>> query,id);
> >>>>>>>                      }
> >>>>>>>                       catch(IOException io){}
> >>>>>>>                       catch(ParseException pe){}
> >>>>>>>
> >>>>>>>                       return score;
> >>>>>>>
> >>>>>>>                 }
> >>>>>>>
> >>>>>>>  private float search(Searcher searcher, String queryString,
> >>>>>>> int id)
> >>>>>>> throws ParseException, IOException {
> >>>>>>>
> >>>>>>>         // Build a Query object
> >>>>>>>
> >>>>>>>         QueryParser queryParser = new QueryParser("contents",
> >>>>>>> new
> >>>>>>> KeywordAnalyzer());
> >>>>>>>
> >>>>>>>         queryParser.setDefaultOperator
> >>>>>>> (QueryParser.Operator.AND);
> >>>>>>>
> >>>>>>>         Query query = queryParser.parse(queryString);
> >>>>>>>
> >>>>>>>         // Search for the query
> >>>>>>>
> >>>>>>>         Hits hits = searcher.search(query);
> >>>>>>>         Document doc = null;
> >>>>>>>
> >>>>>>>         // Examine the Hits object to see if there were any
> >>>>>>> matches
> >>>>>>>         int hitCount = hits.length();
> >>>>>>>
> >>>>>>>                 for(int i=0;i<hitCount;i++){
> >>>>>>>                 doc = hits.doc(i);
> >>>>>>>                 String str = doc.get("item");
> >>>>>>>                 int tmp = Integer.parseInt(str);
> >>>>>>>                 if(tmp==id)
> >>>>>>>                 score = hits.score(i);
> >>>>>>>                 }
> >>>>>>>
> >>>>>>>         return score;
> >>>>>>>     }
> >>>>>>>
> >>>>>>> I really need to optimize doBodySearch(...) as this takes the
> >>>>>>> most
> >>>>>>> time.
> >>>>>>>
> >>>>>>> thanks guys,
> >>>>>>> Askar
> >>>>>>>
> >>>>>>>
> >>>>>>> On 7/24/07, N. Hira <nhira@cognocys.com> wrote:
> >>>>>>>
> >>>>>>>         Could you show us the relevant source from
> >>>>>>> doBodySearch()?
> >>>>>>>
> >>>>>>>         -h
> >>>>>>>
> >>>>>>>         On Tue, 2007-07-24 at 19:58 -0400, Askar Zaidi wrote:
> >>>>>>>> I ran some tests and it seems that the slowness is from
> >>>>>>>         Lucene calls when I
> >>>>>>>> do "doBodySearch", if I remove that call, Lucene gives me
> >>>>>>>         results in 5
> >>>>>>>> seconds. otherwise it takes about 50 seconds.
> >>>>>>>>
> >>>>>>>> But I need to do Body search and that field contains lots
> >>>> of
> >>>>>>>         text. The field
> >>>>>>>> is <contents>. How can I optimize that ?
> >>>>>>>>
> >>>>>>>> thanks,
> >>>>>>>> Askar
> >>>>>>>>
> >>>>>>>>
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>
> >>>>
> >>>>
> >>>> -------------------------------------------------------------------
> >>>> --
> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>
> >>>>
> >>
> >> --------------------------
> >> Grant Ingersoll
> >> Center for Natural Language Processing
> >> http://www.cnlp.org/tech/lucene.asp
> >>
> >> Read the Lucene Java FAQ at http://wiki.apache.org/lucene-java/
> >> LuceneFAQ
> >>
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
>
> ------------------------------------------------------
> Grant Ingersoll
> http://www.grantingersoll.com/
> http://lucene.grantingersoll.com
> http://www.paperoftheweek.com/
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_6508_31916151.1185380780021--

From java-user-return-29390-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 25 16:31:36 2007
Return-Path: <java-user-return-29390-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58311 invoked from network); 25 Jul 2007 16:31:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2007 16:31:35 -0000
Received: (qmail 18797 invoked by uid 500); 25 Jul 2007 16:31:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18613 invoked by uid 500); 25 Jul 2007 16:31:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18602 invoked by uid 99); 25 Jul 2007 16:31:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 09:31:29 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of askar.zaidi@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 09:31:27 -0700
Received: by ug-out-1314.google.com with SMTP id c2so452141ugf
        for <java-user@lucene.apache.org>; Wed, 25 Jul 2007 09:31:05 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=QxaTfWNLzEYFYr6meTjmlSVMNXj0VKVi3mrw3UB0rstR8VAcHUa2aEQv4nys6hDH5tTOARkfbNZPP4ix9jgcZVqzBc0gsf0n/8/5agxrkgId+BAgA8XhdsmHj6qKQT2aQao9nfBkRIQF7LUhhTpxWBjxw+I3l1KiaD+elJb6anc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=YPONBrzmCvJlyYm4j+rI4w1M1GrZN/Ub8UNRrqFM6YwJ5lJFX3SQRFqi9KWkKGh3VQ/LezbkIy2B+JrdpUj0+YqX+nyZnIEqpuTUZJPub2IR5JBkM71dDTogAP35dm/1g74uO3bwc+EwSZPqZUJ90mFMvIXGfVnHTrzxAGqLCSw=
Received: by 10.67.99.4 with SMTP id b4mr1479023ugm.1185381065060;
        Wed, 25 Jul 2007 09:31:05 -0700 (PDT)
Received: by 10.66.251.15 with HTTP; Wed, 25 Jul 2007 09:31:04 -0700 (PDT)
Message-ID: <c0c0e1d40707250931t7922d012ma84d2d6561e59c9a@mail.gmail.com>
Date: Wed, 25 Jul 2007 12:31:04 -0400
From: "Askar Zaidi" <askar.zaidi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Fine Tuning Lucene implementation
In-Reply-To: <c0c0e1d40707250926i895af09m647e2b9bfce575f2@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6566_7100191.1185381064982"
References: <c0c0e1d40707241243y5ddfd5fai10381873a2d2bd64@mail.gmail.com>
	 <c0c0e1d40707241714k4cef2167lcd7a5cec866b8555@mail.gmail.com>
	 <1185325363.4593.70.camel@localhost>
	 <c0c0e1d40707242239y17296bf3rcb9daf6ab3cd9c2f@mail.gmail.com>
	 <BAY114-DAV100592591AD1D725911CE594F10@phx.gbl>
	 <c0c0e1d40707250710v5e7e7694obead0b44449507e0@mail.gmail.com>
	 <F5C96C89-A4FE-4392-8E2D-92706F4E4923@apache.org>
	 <c0c0e1d40707250845s6b91c66ei79e94bacfb292f2c@mail.gmail.com>
	 <C31E77DA-C5D3-44C6-8D96-4E7DF1812849@gmail.com>
	 <c0c0e1d40707250926i895af09m647e2b9bfce575f2@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_6566_7100191.1185381064982
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Heres what I mean:

http://lucene.apache.org/java/docs/queryparsersyntax.html#Fields

title:"The Right Way" AND text:go


Although, I am not searching for the title "the right way" , I am looking
for the score by specifying a unique field (itemID).

when I do System.out.println(query);

I get:

+contents:Harvard +contents:Business + contents: Review

Can I just add:

+contents:Harvard +contents:Business + contents: Review +itemID=id       ??

That query would just return one document.

On 7/25/07, Askar Zaidi <askar.zaidi@gmail.com> wrote:
>
> Instead of refactoring the code, would there be a way to just modify the
> query in each search routine ?
>
> Such as, "search contents:<text> and item:<itemID>"; This means it would
> just collect the score of that one document whose itemID field = itemID
> passed from while( rs.next()).
>
> I just need to collect the score of the <itemID> already in the index.
>
> Would there be a way to modify the query ? Add a clause ?
>
> thanks,
> Askar
>
>
> On 7/25/07, Grant Ingersoll <grant.ingersoll@gmail.com> wrote:
> >
> > So, you really want a single Lucene score (based on the scores of
> > your 4 fields) for every itemID, correct?  And this score consists of
> > scoring the title, tag, summary and body against some keywords correct?
> >
> > Here's what I would do:
> >
> > while (rs.next())
> > {
> >      doc = getDocument(itemId);  // Get your document, including
> > contents from your database, no need even to put them in Lucene,
> > although you could
> >      add the doc to a MemoryIndex (see contrib/memory)
> >      Run your 4 searches against that memory index to get your
> > score.  Even better, combine your query into a single query that
> > searches all 4 fields at once, then Lucene will combine the score for
> > you
> > }
> >
> > MemoryIndex info can be found at http://lucene.zones.apache.org:8080/
> > hudson/job/Lucene-Nightly/javadoc/org/apache/lucene/index/memory/
> > package-summary.html
> >
> > -Grant
> >
> > On Jul 25, 2007, at 11:45 AM, Askar Zaidi wrote:
> >
> > > Hi Grant,
> > >
> > > Thanks for the response. Heres what I am trying to accomplish:
> > >
> > > 1. Iterate over itemID (unique) in the database using one SQL query.
> > > 2. For every itemID found, run 4 searches on Lucene Index.
> > > 3. doTagSearch(itemID....) ; collect score
> > > 4. doTitleSearch(itemID...) ; collect score
> > > 5. doSummarySearch(itemID...) ; collect score
> > > 6. doBodySearch(itemID....) ; collect score
> > >
> > > These scores are then added and I get a total score for each unique
> > > item in
> > > the database.
> > >
> > > Lucene Index has: <itemID><tags><title><summary><contents>
> > >
> > > So if I am running a body search, I have 92 hits from over 300
> > > documents for
> > > a query. I already know my hit with the <itemID> .
> > >
> > > For instance, from step (1) if itemID 16 is passed to all the 4
> > > searches, I
> > > just need to get the score of the document which has itemID field =
> > > 16. I
> > > don't have to iterate over all the hits.
> > >
> > > I suppose I have to change my query to look for <contents> where
> > > itemID=16.
> > > Can you guide me as to how to do it ?
> > >
> > > thanks a ton,
> > >
> > > Askar
> > >
> > > On 7/25/07, Grant Ingersoll <gsingers@apache.org > wrote:
> > >>
> > >> Hi Askar,
> > >>
> > >> I suggest we take a step back, and ask the question, what are you
> > >> trying to accomplish?  That is, what is your application trying to
> > >> do?  Forget the code, etc. just explain what you want the end result
> > >> to be and we can work from there.   Based on what you have described,
> > >> I am not sure you need access to the hits.  It seems like you just
> > >> need to make better queries.
> > >>
> > >> Is your itemID a unique identifier?  If yes, then you shouldn't need
> > >> to loop over hits at all, as you should only ever have one result IF
> > >> your query contains a required term.  Also, if this is the case, why
> > >> do you need to do a search at all?  Haven't you already identified
> > >> the items of interest when you did your select query in the
> > >> database?  Or is it that you want to score the item based on some
> > >> terms as well.  If that is the case, there are other ways of doing
> > >> this and we can discuss them.
> > >>
> > >> -Grant
> > >>
> > >> On Jul 25, 2007, at 10:10 AM, Askar Zaidi wrote:
> > >>
> > >>> Hey Guys,
> > >>>
> > >>> I need to know how I can use the HitCollector class ? I am using
> > >>> Hits and
> > >>> looping over all the possible document hits (turns out its 92 times
> > >>> I am
> > >>> looping; for 300 searches, its 300*92 !!). Can I avoid this using
> > >>> HitCollector ? I can't seem to understand how its used.
> > >>>
> > >>> thanks a lot,
> > >>>
> > >>> Askar
> > >>>
> > >>> On 7/25/07, Dmitry <dmitrytkach1@hotmail.com> wrote:
> > >>>>
> > >>>> Askar,
> > >>>> why do you need to add +id:<idWeCareAbout>?
> > >>>> thanks,
> > >>>> dt,
> > >>>> www.ejinz.com
> > >>>> search engine news forms
> > >>>> ----- Original Message -----
> > >>>> From: "Askar Zaidi" <askar.zaidi@gmail.com >
> > >>>> To: <java-user@lucene.apache.org>; <nhira@cognocys.com>
> > >>>> Sent: Wednesday, July 25, 2007 12:39 AM
> > >>>> Subject: Re: Fine Tuning Lucene implementation
> > >>>>
> > >>>>
> > >>>>> Hey Hira ,
> > >>>>>
> > >>>>> Thanks so much for the reply. Much appreciate it.
> > >>>>>
> > >>>>> Quote:
> > >>>>>
> > >>>>> Would it be possible to just include a query clause?
> > >>>>>   - i.e., instead of just contents:<userQuery>, also add
> > >>>>> +id:<idWeCareAbout>
> > >>>>>
> > >>>>> How can I do that ?
> > >>>>>
> > >>>>> I see my query as :
> > >>>>>
> > >>>>> +contents:harvard +contents:business +contents:review
> > >>>>>
> > >>>>> where the search phrase was: harvard business review
> > >>>>>
> > >>>>> Now how can I add +id:<idWeCareAbout>  ??
> > >>>>>
> > >>>>> This would give me that one exact document I am looking for , for
> > >>>>> that
> > >>>> id.
> > >>>>> I
> > >>>>> don't have to iterate through hits.
> > >>>>>
> > >>>>> thanks,
> > >>>>>
> > >>>>> Askar
> > >>>>>
> > >>>>>
> > >>>>>
> > >>>>> On 7/24/07, N. Hira < nhira@cognocys.com> wrote:
> > >>>>>>
> > >>>>>> I'm no expert on this (so please accept the comments in that
> > >>>>>> context)
> > >>>>>> but 2 things seem weird to me:
> > >>>>>>
> > >>>>>> 1.  Iterating over each hit is an expensive proposition.  I've
> > >>>>>> often
> > >>>>>> seen people recommending a HitCollector.
> > >>>>>>
> > >>>>>> 2.  It seems that doBodySearch() is essentially saying, do this
> > >>>>>> search
> > >>>>>> and return the score pertinent to this ID (using an exhaustive
> > >>>>>> loop).
> > >>>>>> Would it be possible to just include a query clause?
> > >>>>>>     - i.e., instead of just contents:<userQuery>, also add
> > >>>>>> +id:<idWeCareAbout>
> > >>>>>>
> > >>>>>> In general though, I think your algorithm seems inefficient (if I
> > >>>>>> understand it correctly):-- if I want to search for one term
> > >>>>>> among 3 in
> > >>>>>> a "collection" of 300 documents (as defined by some external
> > >>>> attribute),
> > >>>>>> I will wind up executing 300 x 3 searches, and for each search
> > >>>>>> that is
> > >>>>>> executed, I will iterate over every Hit, even if I've already
> > >>>>>> found the
> > >>>>>> one that I "care about".
> > >>>>>>
> > >>>>>> What would break if you:
> > >>>>>> 1.  Included "creator" in the Lucene index (or, filtered out the
> > >>>>>> Hits
> > >>>>>> using a BitSet or something like it)
> > >>>>>> 2.  Executed 1 search
> > >>>>>> 3.  Collected the results of the first N Hits (where N is some
> > >>>>>> reasonable limit, like 100 or 500)
> > >>>>>>
> > >>>>>> -h
> > >>>>>>
> > >>>>>>
> > >>>>>> On Tue, 2007-07-24 at 20:14 -0400, Askar Zaidi wrote:
> > >>>>>>
> > >>>>>>> Sure.
> > >>>>>>>
> > >>>>>>>  public float doBodySearch(Searcher searcher,String query, int
> > >>>>>>> id){
> > >>>>>>>
> > >>>>>>>                  try{
> > >>>>>>>                                 score = search(searcher,
> > >>>>>>> query,id);
> > >>>>>>>                      }
> > >>>>>>>                       catch(IOException io){}
> > >>>>>>>                       catch(ParseException pe){}
> > >>>>>>>
> > >>>>>>>                       return score;
> > >>>>>>>
> > >>>>>>>                 }
> > >>>>>>>
> > >>>>>>>  private float search(Searcher searcher, String queryString,
> > >>>>>>> int id)
> > >>>>>>> throws ParseException, IOException {
> > >>>>>>>
> > >>>>>>>         // Build a Query object
> > >>>>>>>
> > >>>>>>>         QueryParser queryParser = new QueryParser("contents",
> > >>>>>>> new
> > >>>>>>> KeywordAnalyzer());
> > >>>>>>>
> > >>>>>>>         queryParser.setDefaultOperator
> > >>>>>>> ( QueryParser.Operator.AND);
> > >>>>>>>
> > >>>>>>>         Query query = queryParser.parse(queryString);
> > >>>>>>>
> > >>>>>>>         // Search for the query
> > >>>>>>>
> > >>>>>>>         Hits hits = searcher.search(query);
> > >>>>>>>         Document doc = null;
> > >>>>>>>
> > >>>>>>>         // Examine the Hits object to see if there were any
> > >>>>>>> matches
> > >>>>>>>         int hitCount = hits.length();
> > >>>>>>>
> > >>>>>>>                 for(int i=0;i<hitCount;i++){
> > >>>>>>>                 doc = hits.doc(i);
> > >>>>>>>                 String str = doc.get("item");
> > >>>>>>>                 int tmp = Integer.parseInt (str);
> > >>>>>>>                 if(tmp==id)
> > >>>>>>>                 score = hits.score(i);
> > >>>>>>>                 }
> > >>>>>>>
> > >>>>>>>         return score;
> > >>>>>>>     }
> > >>>>>>>
> > >>>>>>> I really need to optimize doBodySearch(...) as this takes the
> > >>>>>>> most
> > >>>>>>> time.
> > >>>>>>>
> > >>>>>>> thanks guys,
> > >>>>>>> Askar
> > >>>>>>>
> > >>>>>>>
> > >>>>>>> On 7/24/07, N. Hira <nhira@cognocys.com> wrote:
> > >>>>>>>
> > >>>>>>>         Could you show us the relevant source from
> > >>>>>>> doBodySearch()?
> > >>>>>>>
> > >>>>>>>         -h
> > >>>>>>>
> > >>>>>>>         On Tue, 2007-07-24 at 19:58 -0400, Askar Zaidi wrote:
> > >>>>>>>> I ran some tests and it seems that the slowness is from
> > >>>>>>>         Lucene calls when I
> > >>>>>>>> do "doBodySearch", if I remove that call, Lucene gives me
> > >>>>>>>         results in 5
> > >>>>>>>> seconds. otherwise it takes about 50 seconds.
> > >>>>>>>>
> > >>>>>>>> But I need to do Body search and that field contains lots
> > >>>> of
> > >>>>>>>         text. The field
> > >>>>>>>> is <contents>. How can I optimize that ?
> > >>>>>>>>
> > >>>>>>>> thanks,
> > >>>>>>>> Askar
> > >>>>>>>>
> > >>>>>>>>
> > >>>>>>
> > >>>>>>
> > >>>>>>
> > >>>>>>
> > >>>>>
> > >>>>
> > >>>>
> > >>>> -------------------------------------------------------------------
> > >>>> --
> > >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> > >>>>
> > >>>>
> > >>
> > >> --------------------------
> > >> Grant Ingersoll
> > >> Center for Natural Language Processing
> > >> http://www.cnlp.org/tech/lucene.asp
> > >>
> > >> Read the Lucene Java FAQ at http://wiki.apache.org/lucene-java/
> > >> LuceneFAQ
> > >>
> > >>
> > >>
> > >> ---------------------------------------------------------------------
> >
> > >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >> For additional commands, e-mail: java-user-help@lucene.apache.org
> > >>
> > >>
> >
> > ------------------------------------------------------
> > Grant Ingersoll
> > http://www.grantingersoll.com/
> > http://lucene.grantingersoll.com
> > http://www.paperoftheweek.com/
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_6566_7100191.1185381064982--

From java-user-return-29391-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 25 16:35:44 2007
Return-Path: <java-user-return-29391-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60251 invoked from network); 25 Jul 2007 16:35:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2007 16:35:43 -0000
Received: (qmail 31425 invoked by uid 500); 25 Jul 2007 16:35:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31371 invoked by uid 500); 25 Jul 2007 16:35:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31332 invoked by uid 99); 25 Jul 2007 16:35:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 09:35:29 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of grant.ingersoll@gmail.com designates 66.249.82.238 as permitted sender)
Received: from [66.249.82.238] (HELO wx-out-0506.google.com) (66.249.82.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 09:35:27 -0700
Received: by wx-out-0506.google.com with SMTP id i28so194500wxd
        for <java-user@lucene.apache.org>; Wed, 25 Jul 2007 09:35:06 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=Wyf+sXwMz0G6cUoG+sHN6Ya5499sL2az/FiZztjx3umV7C8KLcKDtsuCS3dNEoXr3bHo8cOT/4dEwdeEoZK/pQMmIkeWgBGfxlLIVtj63waUVMGrEX7ghTd+zEzNuEwpS9Wu7pTo1QR57aMbJFYQRhPXd5MLEuL6VT1poWH3aGg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=F5KfDrYvHoyiWX229xN+5oJzmn02HVDSv9hv37UCdeLD39PJOgeR7bCnKSdaKJgJu/yeSyPz4p1rUagzbBPiQ29kvIauvQLffNqlJxEe+YgRB/XoLhUeJMOUAOJP/aD5I1qgneyh8gW+eZ0Gd/xJzocJrSWr4JNhoGGkqTZky1c=
Received: by 10.90.73.7 with SMTP id v7mr728402aga.1185381305758;
        Wed, 25 Jul 2007 09:35:05 -0700 (PDT)
Received: from ?192.168.0.3? ( [74.229.189.244])
        by mx.google.com with ESMTPS id g9sm1288142wra.2007.07.25.09.35.04
        (version=TLSv1/SSLv3 cipher=OTHER);
        Wed, 25 Jul 2007 09:35:05 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <c0c0e1d40707250931t7922d012ma84d2d6561e59c9a@mail.gmail.com>
References: <c0c0e1d40707241243y5ddfd5fai10381873a2d2bd64@mail.gmail.com> <c0c0e1d40707241714k4cef2167lcd7a5cec866b8555@mail.gmail.com> <1185325363.4593.70.camel@localhost> <c0c0e1d40707242239y17296bf3rcb9daf6ab3cd9c2f@mail.gmail.com> <BAY114-DAV100592591AD1D725911CE594F10@phx.gbl> <c0c0e1d40707250710v5e7e7694obead0b44449507e0@mail.gmail.com> <F5C96C89-A4FE-4392-8E2D-92706F4E4923@apache.org> <c0c0e1d40707250845s6b91c66ei79e94bacfb292f2c@mail.gmail.com> <C31E77DA-C5D3-44C6-8D96-4E7DF1812849@gmail.com> <c0c0e1d40707250926i895af09m647e2b9bfce575f2@mail.gmail.com> <c0c0e1d40707250931t7922d012ma84d2d6561e59c9a@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <C26EACBD-986A-4319-857B-1502788797F7@gmail.com>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <grant.ingersoll@gmail.com>
Subject: Re: Fine Tuning Lucene implementation
Date: Wed, 25 Jul 2007 12:34:55 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Yes, you can do that.


On Jul 25, 2007, at 12:31 PM, Askar Zaidi wrote:

> Heres what I mean:
>
> http://lucene.apache.org/java/docs/queryparsersyntax.html#Fields
>
> title:"The Right Way" AND text:go
>
>
> Although, I am not searching for the title "the right way" , I am  
> looking
> for the score by specifying a unique field (itemID).
>
> when I do System.out.println(query);
>
> I get:
>
> +contents:Harvard +contents:Business + contents: Review
>
> Can I just add:
>
> +contents:Harvard +contents:Business + contents: Review  
> +itemID=id       ??
>
> That query would just return one document.
>
> On 7/25/07, Askar Zaidi <askar.zaidi@gmail.com> wrote:
>>
>> Instead of refactoring the code, would there be a way to just  
>> modify the
>> query in each search routine ?
>>
>> Such as, "search contents:<text> and item:<itemID>"; This means it  
>> would
>> just collect the score of that one document whose itemID field =  
>> itemID
>> passed from while( rs.next()).
>>
>> I just need to collect the score of the <itemID> already in the  
>> index.
>>
>> Would there be a way to modify the query ? Add a clause ?
>>
>> thanks,
>> Askar
>>
>>
>> On 7/25/07, Grant Ingersoll <grant.ingersoll@gmail.com> wrote:
>>>
>>> So, you really want a single Lucene score (based on the scores of
>>> your 4 fields) for every itemID, correct?  And this score  
>>> consists of
>>> scoring the title, tag, summary and body against some keywords  
>>> correct?
>>>
>>> Here's what I would do:
>>>
>>> while (rs.next())
>>> {
>>>      doc = getDocument(itemId);  // Get your document, including
>>> contents from your database, no need even to put them in Lucene,
>>> although you could
>>>      add the doc to a MemoryIndex (see contrib/memory)
>>>      Run your 4 searches against that memory index to get your
>>> score.  Even better, combine your query into a single query that
>>> searches all 4 fields at once, then Lucene will combine the score  
>>> for
>>> you
>>> }
>>>
>>> MemoryIndex info can be found at http://lucene.zones.apache.org: 
>>> 8080/
>>> hudson/job/Lucene-Nightly/javadoc/org/apache/lucene/index/memory/
>>> package-summary.html
>>>
>>> -Grant
>>>
>>> On Jul 25, 2007, at 11:45 AM, Askar Zaidi wrote:
>>>
>>>> Hi Grant,
>>>>
>>>> Thanks for the response. Heres what I am trying to accomplish:
>>>>
>>>> 1. Iterate over itemID (unique) in the database using one SQL  
>>>> query.
>>>> 2. For every itemID found, run 4 searches on Lucene Index.
>>>> 3. doTagSearch(itemID....) ; collect score
>>>> 4. doTitleSearch(itemID...) ; collect score
>>>> 5. doSummarySearch(itemID...) ; collect score
>>>> 6. doBodySearch(itemID....) ; collect score
>>>>
>>>> These scores are then added and I get a total score for each unique
>>>> item in
>>>> the database.
>>>>
>>>> Lucene Index has: <itemID><tags><title><summary><contents>
>>>>
>>>> So if I am running a body search, I have 92 hits from over 300
>>>> documents for
>>>> a query. I already know my hit with the <itemID> .
>>>>
>>>> For instance, from step (1) if itemID 16 is passed to all the 4
>>>> searches, I
>>>> just need to get the score of the document which has itemID field =
>>>> 16. I
>>>> don't have to iterate over all the hits.
>>>>
>>>> I suppose I have to change my query to look for <contents> where
>>>> itemID=16.
>>>> Can you guide me as to how to do it ?
>>>>
>>>> thanks a ton,
>>>>
>>>> Askar
>>>>
>>>> On 7/25/07, Grant Ingersoll <gsingers@apache.org > wrote:
>>>>>
>>>>> Hi Askar,
>>>>>
>>>>> I suggest we take a step back, and ask the question, what are you
>>>>> trying to accomplish?  That is, what is your application trying to
>>>>> do?  Forget the code, etc. just explain what you want the end  
>>>>> result
>>>>> to be and we can work from there.   Based on what you have  
>>>>> described,
>>>>> I am not sure you need access to the hits.  It seems like you just
>>>>> need to make better queries.
>>>>>
>>>>> Is your itemID a unique identifier?  If yes, then you shouldn't  
>>>>> need
>>>>> to loop over hits at all, as you should only ever have one  
>>>>> result IF
>>>>> your query contains a required term.  Also, if this is the  
>>>>> case, why
>>>>> do you need to do a search at all?  Haven't you already identified
>>>>> the items of interest when you did your select query in the
>>>>> database?  Or is it that you want to score the item based on some
>>>>> terms as well.  If that is the case, there are other ways of doing
>>>>> this and we can discuss them.
>>>>>
>>>>> -Grant
>>>>>
>>>>> On Jul 25, 2007, at 10:10 AM, Askar Zaidi wrote:
>>>>>
>>>>>> Hey Guys,
>>>>>>
>>>>>> I need to know how I can use the HitCollector class ? I am using
>>>>>> Hits and
>>>>>> looping over all the possible document hits (turns out its 92  
>>>>>> times
>>>>>> I am
>>>>>> looping; for 300 searches, its 300*92 !!). Can I avoid this using
>>>>>> HitCollector ? I can't seem to understand how its used.
>>>>>>
>>>>>> thanks a lot,
>>>>>>
>>>>>> Askar
>>>>>>
>>>>>> On 7/25/07, Dmitry <dmitrytkach1@hotmail.com> wrote:
>>>>>>>
>>>>>>> Askar,
>>>>>>> why do you need to add +id:<idWeCareAbout>?
>>>>>>> thanks,
>>>>>>> dt,
>>>>>>> www.ejinz.com
>>>>>>> search engine news forms
>>>>>>> ----- Original Message -----
>>>>>>> From: "Askar Zaidi" <askar.zaidi@gmail.com >
>>>>>>> To: <java-user@lucene.apache.org>; <nhira@cognocys.com>
>>>>>>> Sent: Wednesday, July 25, 2007 12:39 AM
>>>>>>> Subject: Re: Fine Tuning Lucene implementation
>>>>>>>
>>>>>>>
>>>>>>>> Hey Hira ,
>>>>>>>>
>>>>>>>> Thanks so much for the reply. Much appreciate it.
>>>>>>>>
>>>>>>>> Quote:
>>>>>>>>
>>>>>>>> Would it be possible to just include a query clause?
>>>>>>>>   - i.e., instead of just contents:<userQuery>, also add
>>>>>>>> +id:<idWeCareAbout>
>>>>>>>>
>>>>>>>> How can I do that ?
>>>>>>>>
>>>>>>>> I see my query as :
>>>>>>>>
>>>>>>>> +contents:harvard +contents:business +contents:review
>>>>>>>>
>>>>>>>> where the search phrase was: harvard business review
>>>>>>>>
>>>>>>>> Now how can I add +id:<idWeCareAbout>  ??
>>>>>>>>
>>>>>>>> This would give me that one exact document I am looking  
>>>>>>>> for , for
>>>>>>>> that
>>>>>>> id.
>>>>>>>> I
>>>>>>>> don't have to iterate through hits.
>>>>>>>>
>>>>>>>> thanks,
>>>>>>>>
>>>>>>>> Askar
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> On 7/24/07, N. Hira < nhira@cognocys.com> wrote:
>>>>>>>>>
>>>>>>>>> I'm no expert on this (so please accept the comments in that
>>>>>>>>> context)
>>>>>>>>> but 2 things seem weird to me:
>>>>>>>>>
>>>>>>>>> 1.  Iterating over each hit is an expensive proposition.  I've
>>>>>>>>> often
>>>>>>>>> seen people recommending a HitCollector.
>>>>>>>>>
>>>>>>>>> 2.  It seems that doBodySearch() is essentially saying, do  
>>>>>>>>> this
>>>>>>>>> search
>>>>>>>>> and return the score pertinent to this ID (using an exhaustive
>>>>>>>>> loop).
>>>>>>>>> Would it be possible to just include a query clause?
>>>>>>>>>     - i.e., instead of just contents:<userQuery>, also add
>>>>>>>>> +id:<idWeCareAbout>
>>>>>>>>>
>>>>>>>>> In general though, I think your algorithm seems inefficient  
>>>>>>>>> (if I
>>>>>>>>> understand it correctly):-- if I want to search for one term
>>>>>>>>> among 3 in
>>>>>>>>> a "collection" of 300 documents (as defined by some external
>>>>>>> attribute),
>>>>>>>>> I will wind up executing 300 x 3 searches, and for each search
>>>>>>>>> that is
>>>>>>>>> executed, I will iterate over every Hit, even if I've already
>>>>>>>>> found the
>>>>>>>>> one that I "care about".
>>>>>>>>>
>>>>>>>>> What would break if you:
>>>>>>>>> 1.  Included "creator" in the Lucene index (or, filtered  
>>>>>>>>> out the
>>>>>>>>> Hits
>>>>>>>>> using a BitSet or something like it)
>>>>>>>>> 2.  Executed 1 search
>>>>>>>>> 3.  Collected the results of the first N Hits (where N is some
>>>>>>>>> reasonable limit, like 100 or 500)
>>>>>>>>>
>>>>>>>>> -h
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> On Tue, 2007-07-24 at 20:14 -0400, Askar Zaidi wrote:
>>>>>>>>>
>>>>>>>>>> Sure.
>>>>>>>>>>
>>>>>>>>>>  public float doBodySearch(Searcher searcher,String query,  
>>>>>>>>>> int
>>>>>>>>>> id){
>>>>>>>>>>
>>>>>>>>>>                  try{
>>>>>>>>>>                                 score = search(searcher,
>>>>>>>>>> query,id);
>>>>>>>>>>                      }
>>>>>>>>>>                       catch(IOException io){}
>>>>>>>>>>                       catch(ParseException pe){}
>>>>>>>>>>
>>>>>>>>>>                       return score;
>>>>>>>>>>
>>>>>>>>>>                 }
>>>>>>>>>>
>>>>>>>>>>  private float search(Searcher searcher, String queryString,
>>>>>>>>>> int id)
>>>>>>>>>> throws ParseException, IOException {
>>>>>>>>>>
>>>>>>>>>>         // Build a Query object
>>>>>>>>>>
>>>>>>>>>>         QueryParser queryParser = new QueryParser("contents",
>>>>>>>>>> new
>>>>>>>>>> KeywordAnalyzer());
>>>>>>>>>>
>>>>>>>>>>         queryParser.setDefaultOperator
>>>>>>>>>> ( QueryParser.Operator.AND);
>>>>>>>>>>
>>>>>>>>>>         Query query = queryParser.parse(queryString);
>>>>>>>>>>
>>>>>>>>>>         // Search for the query
>>>>>>>>>>
>>>>>>>>>>         Hits hits = searcher.search(query);
>>>>>>>>>>         Document doc = null;
>>>>>>>>>>
>>>>>>>>>>         // Examine the Hits object to see if there were any
>>>>>>>>>> matches
>>>>>>>>>>         int hitCount = hits.length();
>>>>>>>>>>
>>>>>>>>>>                 for(int i=0;i<hitCount;i++){
>>>>>>>>>>                 doc = hits.doc(i);
>>>>>>>>>>                 String str = doc.get("item");
>>>>>>>>>>                 int tmp = Integer.parseInt (str);
>>>>>>>>>>                 if(tmp==id)
>>>>>>>>>>                 score = hits.score(i);
>>>>>>>>>>                 }
>>>>>>>>>>
>>>>>>>>>>         return score;
>>>>>>>>>>     }
>>>>>>>>>>
>>>>>>>>>> I really need to optimize doBodySearch(...) as this takes the
>>>>>>>>>> most
>>>>>>>>>> time.
>>>>>>>>>>
>>>>>>>>>> thanks guys,
>>>>>>>>>> Askar
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> On 7/24/07, N. Hira <nhira@cognocys.com> wrote:
>>>>>>>>>>
>>>>>>>>>>         Could you show us the relevant source from
>>>>>>>>>> doBodySearch()?
>>>>>>>>>>
>>>>>>>>>>         -h
>>>>>>>>>>
>>>>>>>>>>         On Tue, 2007-07-24 at 19:58 -0400, Askar Zaidi wrote:
>>>>>>>>>>> I ran some tests and it seems that the slowness is from
>>>>>>>>>>         Lucene calls when I
>>>>>>>>>>> do "doBodySearch", if I remove that call, Lucene gives me
>>>>>>>>>>         results in 5
>>>>>>>>>>> seconds. otherwise it takes about 50 seconds.
>>>>>>>>>>>
>>>>>>>>>>> But I need to do Body search and that field contains lots
>>>>>>> of
>>>>>>>>>>         text. The field
>>>>>>>>>>> is <contents>. How can I optimize that ?
>>>>>>>>>>>
>>>>>>>>>>> thanks,
>>>>>>>>>>> Askar
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> ---------------------------------------------------------------- 
>>>>>>> ---
>>>>>>> --
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>> For additional commands, e-mail: java-user- 
>>>>>>> help@lucene.apache.org
>>>>>>>
>>>>>>>
>>>>>
>>>>> --------------------------
>>>>> Grant Ingersoll
>>>>> Center for Natural Language Processing
>>>>> http://www.cnlp.org/tech/lucene.asp
>>>>>
>>>>> Read the Lucene Java FAQ at http://wiki.apache.org/lucene-java/
>>>>> LuceneFAQ
>>>>>
>>>>>
>>>>>
>>>>> ------------------------------------------------------------------ 
>>>>> ---
>>>
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>
>>> ------------------------------------------------------
>>> Grant Ingersoll
>>> http://www.grantingersoll.com/
>>> http://lucene.grantingersoll.com
>>> http://www.paperoftheweek.com/
>>>
>>>
>>>
>>> -------------------------------------------------------------------- 
>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>

------------------------------------------------------
Grant Ingersoll
http://www.grantingersoll.com/
http://lucene.grantingersoll.com
http://www.paperoftheweek.com/



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29392-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 25 17:12:57 2007
Return-Path: <java-user-return-29392-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86759 invoked from network); 25 Jul 2007 17:12:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2007 17:12:55 -0000
Received: (qmail 14008 invoked by uid 500); 25 Jul 2007 17:12:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13974 invoked by uid 500); 25 Jul 2007 17:12:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13963 invoked by uid 99); 25 Jul 2007 17:12:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 10:12:49 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of daniel.rosher@hotonline.com designates 85.115.41.190 as permitted sender)
Received: from [85.115.41.190] (HELO cluster-g.mailcontrol.com) (85.115.41.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 10:12:48 -0700
Received: from mail.workthing.com (mail.workthing.com [195.224.106.50])
	by rly14g.srv.mailcontrol.com (MailControl) with ESMTP id l6PHCPSX005064
	for <java-user@lucene.apache.org>; Wed, 25 Jul 2007 18:12:25 +0100
thread-index: AcfO3uubcAytTbXkSi2d2AAhGrOYMQ==
Content-Class: urn:content-classes:message
Importance: normal
Priority: normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.2757
Received: from [192.168.222.59] ([192.168.222.59] RDNS failed) by mail.workthing.com with Microsoft SMTPSVC(6.0.3790.1830); Wed, 25 Jul 2007 18:12:03 +0100
Subject: Re: Search for null
From: "daniel rosher" <daniel.rosher@hotonline.com>
To: <java-user@lucene.apache.org>
In-Reply-To: <46A772FC.8000102@ai.sri.com>
References: <11746864.post@talk.nabble.com> <0E1018D4-E9DB-424C-84F9-C72B1AA5D3B3@ehatchersolutions.com> <46A50FBA.9000109@affinitycircles.com>  <46A51638.1050708@ai.sri.com> <1185277710.10469.26.camel@rosher.org>  <46A62B98.40602@ai.sri.com> <1185353815.9695.20.camel@rosher.org>  <46A772FC.8000102@ai.sri.com>
Content-Type: text/plain;
	charset="Windows-1252"
Date: Wed, 25 Jul 2007 18:12:20 +0100
Message-ID: <1185383540.22328.11.camel@rosher.org>
MIME-Version: 1.0
X-Mailer: Evolution 2.10.1 
Content-Transfer-Encoding: quoted-printable
X-OriginalArrivalTime: 25 Jul 2007 17:12:03.0067 (UTC) FILETIME=[EB64ECB0:01C7CEDE]
X-Scanned-By: MailControl A-07-08-00 (www.mailcontrol.com) on 10.71.0.124
X-Virus-Checked: Checked by ClamAV on apache.org

In this case you should look at the source for RangeFilter.java.=20

Using this you could create your own filter using TermEnum and TermDocs
to find all documents that had some value for the field.=20

You would then flip this filter (perhaps write a FlipFilter.java, that
takes an existing filter in it's constructor, for reuse) to get all
documents then didn't have a value for this field (i.e. null values).=20

Depending on the time it takes to generate these filters, you could then
cache this filter with CachingWrappingFilter for subsequent searches.

Dan

On Wed, 2007-07-25 at 08:57 -0700, Jay Yu wrote:
> what if I do not know all possible values of that field which is a=20
> typical case in a free text search?
>=20
> daniel rosher wrote:
> > You will be unable to search for fields that do not exist which is =
what
> > you originally wanted to do, instead you can do something like:
> >=20
> > -Establish the query that will select all non-null values
> >=20
> > TermQuery tq1 =3D new TermQuery(new Term("field","value1"));
> > TermQuery tq2 =3D new TermQuery(new Term("field","value2"));
> > ...
> > TermQuery tqn =3D new TermQuery(new Term("field","valuen"));
> > BooleanQuery query =3D new BooleanQuery();
> > booleanQuery.add(tq1,BooleanClause.Occur.SHOULD);
> > booleanQuery.add(tq2,BooleanClause.Occur.SHOULD);
> > ...
> > booleanQuery.add(tqn,BooleanClause.Occur.SHOULD);
> >=20
> > OR perhaps a range query if your values are contiguous
> >=20
> > Term start =3D new Term("field","198805");
> > Term end =3D new Term("field","198810");
> > Query query =3D new RangeQuery(start, end, true);
> > ;
> >=20
> > OR just use the QueryParser
> >=20
> > Query query =3D QueryParser.parse(parseCriteria,
> > "field", new StandardAnalyzer());
> >=20
> > -Create the QueryFilter
> >=20
> > QueryFilter queryFilter =3D new QueryFilter(query);
> >=20
> > -flip the bits
> >=20
> > final BitSet filterBitSet =3D queryFilter.bits(reader);
> > filterBitSet.flip(0,filterBitSet.size());
> >=20
> > Now you have a filter that contains document matching the opposite =
of
> > that specified by the query, and can use in subsequent queries
> >=20
> > Dan
> >=20
> >=20
> >=20
> > On Tue, 2007-07-24 at 09:40 -0700, Jay Yu wrote:
> >> daniel rosher wrote:
> >>> Perhaps you can use a filter in the following way.
> >>>
> >>> -Create a filter (via QueryFilter) that would contain all document =
that
> >>> do not have null values for the field
> >> Interesting: what does the QueryFilter look like? Isn't it just as =
hard=20
> >> as finding out what docs have the null values for the field?
> >> I really like to know your trick here.
> >>> -flip the bits of the filter so that it now contains documents =
that have
> >>> null values for a field
> >>> -Use the filter in conjunction with subsequent queries.
> >>>
> >>> This would also help with performance as filters are simply =
bitsets and
> >>> can cheaply be stored, generated once and used often.
> >>>
> >>> Dan
> >>>
> >>> On Mon, 2007-07-23 at 13:57 -0700, Jay Yu wrote:
> >>>> If you want performance, a better way might be to assign some =
special=20
> >>>> string/value (if it's easy to create) to the missing field of =
docs and=20
> >>>> index the field without tokenizing it. Then you may search for =
that=20
> >>>> special value to find the docs.
> >>>>
> >>>> Jay
> >>>>
> >>>> Les Fletcher wrote:
> >>>>> Does this particular range query have any significant =
performance issues?
> >>>>>
> >>>>> Les
> >>>>>
> >>>>> Erik Hatcher wrote:
> >>>>>> On Jul 23, 2007, at 11:32 AM, testn wrote:
> >>>>>>> Is it possible to search for the document that specified field =

> >>>>>>> doesn't exist
> >>>>>>> or such field value is null?
> >>>>>> This is from Solr, so I'm not sure off the top of my head if =
this mojo=20
> >>>>>> applies by itself, but a search for -fieldname:[* TO *] will =
result in=20
> >>>>>> all documents that do not have the specified field.
> >>>>>>
> >>>>>>     Erik
> >>>>>>
> >>>>>>
> >>>>>> =
---------------------------------------------------------------------
> >>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>>>> For additional commands, e-mail: =
java-user-help@lucene.apache.org
> >>>>>>
> >>>>> =
---------------------------------------------------------------------
> >>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>>> For additional commands, e-mail: =
java-user-help@lucene.apache.org
> >>>> =
---------------------------------------------------------------------
> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>
> >>>>
> >>>>
> >>>> <<This email has been scanned for virus and spam content>>
> >>> Daniel Rosher
> >>> Developer
> >>>
> >>>
> >>> d: 0207 3489 912
> >>> t: 0870 2020 121
> >>> f: 0870 2020 131
> >>> m:=20
> >>> http://www.hotonline.com/
> >>>
> >>>
> >>>
> >>>
> >>>
> >>>
> >>> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - =
- - - - - - - - - - - - - - - - - - - - - -
> >>> This message is sent in confidence for the addressee only. It may =
contain privileged=20
> >>> information. The contents are not to be disclosed to anyone other =
than the addressee.=20
> >>> Unauthorised recipients are requested to preserve this =
confidentiality and to advise=20
> >>> us of any errors in transmission. Thank you.
> >>>
> >>> hotonline ltd is registered in England & Wales. Registered office: =
One Canada Square,=20
> >>> Canary Wharf, London E14 5AP. Registered No: 1904765.
> >>>
> >>>
> >>> This message has been scanned for viruses by BlackSpider =
MailControl - www.blackspider.com
> >>>
> >>> =
---------------------------------------------------------------------
> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>
> >> =
---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> > Daniel Rosher
> > Developer
> >=20
> >=20
> > d: 0207 3489 912
> > t: 0870 2020 121
> > f: 0870 2020 131
> > m:=20
> > http://www.hotonline.com/
> >=20
> >=20
> >=20
> >=20
> >=20
> >=20
> > - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - =
- - - - - - - - - - - - - - - - - - - - -
> > This message is sent in confidence for the addressee only. It may =
contain privileged=20
> > information. The contents are not to be disclosed to anyone other =
than the addressee.=20
> > Unauthorised recipients are requested to preserve this =
confidentiality and to advise=20
> > us of any errors in transmission. Thank you.
> >=20
> > hotonline ltd is registered in England & Wales. Registered office: =
One Canada Square,=20
> > Canary Wharf, London E14 5AP. Registered No: 1904765.
> >=20
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
Daniel Rosher
Developer


d: 0207 3489 912
t: 0870 2020 121
f: 0870 2020 131
m:=20
http://www.hotonline.com/






- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - =
- - - - - - - - - - - - - - - - - - -
This message is sent in confidence for the addressee only. It may =
contain privileged=20
information. The contents are not to be disclosed to anyone other than =
the addressee.=20
Unauthorised recipients are requested to preserve this confidentiality =
and to advise=20
us of any errors in transmission. Thank you.

hotonline ltd is registered in England & Wales. Registered office: One =
Canada Square,=20
Canary Wharf, London E14 5AP. Registered No: 1904765.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29393-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 25 17:26:54 2007
Return-Path: <java-user-return-29393-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94078 invoked from network); 25 Jul 2007 17:26:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2007 17:26:53 -0000
Received: (qmail 47313 invoked by uid 500); 25 Jul 2007 17:26:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47276 invoked by uid 500); 25 Jul 2007 17:26:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47265 invoked by uid 99); 25 Jul 2007 17:26:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 10:26:47 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of askar.zaidi@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 10:26:44 -0700
Received: by ug-out-1314.google.com with SMTP id c2so462810ugf
        for <java-user@lucene.apache.org>; Wed, 25 Jul 2007 10:26:23 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=XZ6aKh3fjpfkhA5uuWZbFp/mR4B26mu25qn4fUuvSF1/UO5f8XnF9dQxBZd8S2OjKHkkUSrruFVaVIhtvpMBUhWUvz68vDl71oqHdX/PArVoJ6DIkDfdFFeFHgqOWJuJHpYfE7x+nSxByGhY9uPMv13BpmTSmRdt6QAJ/6iv1yQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Nbl9S1NDGF++j8s7d9ArEobyW9ab+t3jQXZaYzVwL17cTHOwvCy5kp96M9f/OCw3+RlY51+k3mtvtOv9kYsVDLepIV3vJlW9ixVz1rjkoRrzJMRi7gsLXGyOQ/6NFahlaybX2xr5I+VJoA3QkwHNMW8lRbDWdQiqMaUVPtXI2yg=
Received: by 10.67.89.11 with SMTP id r11mr1506164ugl.1185384382103;
        Wed, 25 Jul 2007 10:26:22 -0700 (PDT)
Received: by 10.66.251.15 with HTTP; Wed, 25 Jul 2007 10:26:21 -0700 (PDT)
Message-ID: <c0c0e1d40707251026x6774a80ej2552b8dac17a22d4@mail.gmail.com>
Date: Wed, 25 Jul 2007 13:26:21 -0400
From: "Askar Zaidi" <askar.zaidi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Fine Tuning Lucene implementation
In-Reply-To: <C26EACBD-986A-4319-857B-1502788797F7@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7156_26916256.1185384381927"
References: <c0c0e1d40707241243y5ddfd5fai10381873a2d2bd64@mail.gmail.com>
	 <c0c0e1d40707242239y17296bf3rcb9daf6ab3cd9c2f@mail.gmail.com>
	 <BAY114-DAV100592591AD1D725911CE594F10@phx.gbl>
	 <c0c0e1d40707250710v5e7e7694obead0b44449507e0@mail.gmail.com>
	 <F5C96C89-A4FE-4392-8E2D-92706F4E4923@apache.org>
	 <c0c0e1d40707250845s6b91c66ei79e94bacfb292f2c@mail.gmail.com>
	 <C31E77DA-C5D3-44C6-8D96-4E7DF1812849@gmail.com>
	 <c0c0e1d40707250926i895af09m647e2b9bfce575f2@mail.gmail.com>
	 <c0c0e1d40707250931t7922d012ma84d2d6561e59c9a@mail.gmail.com>
	 <C26EACBD-986A-4319-857B-1502788797F7@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_7156_26916256.1185384381927
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hey guys,

One last question and I think I'll have an optimized algorithm.

How can I build a query in my program ?

This is what I am doing:

QueryParser queryParser = new QueryParser("contents", new
StandardAnalyzer());

 queryParser.setDefaultOperator(QueryParser.Operator.AND);

 Query q = queryParser.parse(queryString);

So doing : System.out.println(q) shows:

+contents:harvard +contents:business +contents:review

I'd like to modify Query q to read:

+contents:harvard +contents:business +contents:review +itemID: (id passed in
the search method)

So this would pick the one document I need from the Index and give me the
score. I don't have to iterate over Hits.

Any clues ? I can't find any examples on query building .

thanks !

Askar


On 7/25/07, Grant Ingersoll <grant.ingersoll@gmail.com> wrote:
>
> Yes, you can do that.
>
>
> On Jul 25, 2007, at 12:31 PM, Askar Zaidi wrote:
>
> > Heres what I mean:
> >
> > http://lucene.apache.org/java/docs/queryparsersyntax.html#Fields
> >
> > title:"The Right Way" AND text:go
> >
> >
> > Although, I am not searching for the title "the right way" , I am
> > looking
> > for the score by specifying a unique field (itemID).
> >
> > when I do System.out.println(query);
> >
> > I get:
> >
> > +contents:Harvard +contents:Business + contents: Review
> >
> > Can I just add:
> >
> > +contents:Harvard +contents:Business + contents: Review
> > +itemID=id       ??
> >
> > That query would just return one document.
> >
> > On 7/25/07, Askar Zaidi <askar.zaidi@gmail.com> wrote:
> >>
> >> Instead of refactoring the code, would there be a way to just
> >> modify the
> >> query in each search routine ?
> >>
> >> Such as, "search contents:<text> and item:<itemID>"; This means it
> >> would
> >> just collect the score of that one document whose itemID field =
> >> itemID
> >> passed from while( rs.next()).
> >>
> >> I just need to collect the score of the <itemID> already in the
> >> index.
> >>
> >> Would there be a way to modify the query ? Add a clause ?
> >>
> >> thanks,
> >> Askar
> >>
> >>
> >> On 7/25/07, Grant Ingersoll <grant.ingersoll@gmail.com> wrote:
> >>>
> >>> So, you really want a single Lucene score (based on the scores of
> >>> your 4 fields) for every itemID, correct?  And this score
> >>> consists of
> >>> scoring the title, tag, summary and body against some keywords
> >>> correct?
> >>>
> >>> Here's what I would do:
> >>>
> >>> while (rs.next())
> >>> {
> >>>      doc = getDocument(itemId);  // Get your document, including
> >>> contents from your database, no need even to put them in Lucene,
> >>> although you could
> >>>      add the doc to a MemoryIndex (see contrib/memory)
> >>>      Run your 4 searches against that memory index to get your
> >>> score.  Even better, combine your query into a single query that
> >>> searches all 4 fields at once, then Lucene will combine the score
> >>> for
> >>> you
> >>> }
> >>>
> >>> MemoryIndex info can be found at http://lucene.zones.apache.org:
> >>> 8080/
> >>> hudson/job/Lucene-Nightly/javadoc/org/apache/lucene/index/memory/
> >>> package-summary.html
> >>>
> >>> -Grant
> >>>
> >>> On Jul 25, 2007, at 11:45 AM, Askar Zaidi wrote:
> >>>
> >>>> Hi Grant,
> >>>>
> >>>> Thanks for the response. Heres what I am trying to accomplish:
> >>>>
> >>>> 1. Iterate over itemID (unique) in the database using one SQL
> >>>> query.
> >>>> 2. For every itemID found, run 4 searches on Lucene Index.
> >>>> 3. doTagSearch(itemID....) ; collect score
> >>>> 4. doTitleSearch(itemID...) ; collect score
> >>>> 5. doSummarySearch(itemID...) ; collect score
> >>>> 6. doBodySearch(itemID....) ; collect score
> >>>>
> >>>> These scores are then added and I get a total score for each unique
> >>>> item in
> >>>> the database.
> >>>>
> >>>> Lucene Index has: <itemID><tags><title><summary><contents>
> >>>>
> >>>> So if I am running a body search, I have 92 hits from over 300
> >>>> documents for
> >>>> a query. I already know my hit with the <itemID> .
> >>>>
> >>>> For instance, from step (1) if itemID 16 is passed to all the 4
> >>>> searches, I
> >>>> just need to get the score of the document which has itemID field =
> >>>> 16. I
> >>>> don't have to iterate over all the hits.
> >>>>
> >>>> I suppose I have to change my query to look for <contents> where
> >>>> itemID=16.
> >>>> Can you guide me as to how to do it ?
> >>>>
> >>>> thanks a ton,
> >>>>
> >>>> Askar
> >>>>
> >>>> On 7/25/07, Grant Ingersoll <gsingers@apache.org > wrote:
> >>>>>
> >>>>> Hi Askar,
> >>>>>
> >>>>> I suggest we take a step back, and ask the question, what are you
> >>>>> trying to accomplish?  That is, what is your application trying to
> >>>>> do?  Forget the code, etc. just explain what you want the end
> >>>>> result
> >>>>> to be and we can work from there.   Based on what you have
> >>>>> described,
> >>>>> I am not sure you need access to the hits.  It seems like you just
> >>>>> need to make better queries.
> >>>>>
> >>>>> Is your itemID a unique identifier?  If yes, then you shouldn't
> >>>>> need
> >>>>> to loop over hits at all, as you should only ever have one
> >>>>> result IF
> >>>>> your query contains a required term.  Also, if this is the
> >>>>> case, why
> >>>>> do you need to do a search at all?  Haven't you already identified
> >>>>> the items of interest when you did your select query in the
> >>>>> database?  Or is it that you want to score the item based on some
> >>>>> terms as well.  If that is the case, there are other ways of doing
> >>>>> this and we can discuss them.
> >>>>>
> >>>>> -Grant
> >>>>>
> >>>>> On Jul 25, 2007, at 10:10 AM, Askar Zaidi wrote:
> >>>>>
> >>>>>> Hey Guys,
> >>>>>>
> >>>>>> I need to know how I can use the HitCollector class ? I am using
> >>>>>> Hits and
> >>>>>> looping over all the possible document hits (turns out its 92
> >>>>>> times
> >>>>>> I am
> >>>>>> looping; for 300 searches, its 300*92 !!). Can I avoid this using
> >>>>>> HitCollector ? I can't seem to understand how its used.
> >>>>>>
> >>>>>> thanks a lot,
> >>>>>>
> >>>>>> Askar
> >>>>>>
> >>>>>> On 7/25/07, Dmitry <dmitrytkach1@hotmail.com> wrote:
> >>>>>>>
> >>>>>>> Askar,
> >>>>>>> why do you need to add +id:<idWeCareAbout>?
> >>>>>>> thanks,
> >>>>>>> dt,
> >>>>>>> www.ejinz.com
> >>>>>>> search engine news forms
> >>>>>>> ----- Original Message -----
> >>>>>>> From: "Askar Zaidi" <askar.zaidi@gmail.com >
> >>>>>>> To: <java-user@lucene.apache.org>; <nhira@cognocys.com>
> >>>>>>> Sent: Wednesday, July 25, 2007 12:39 AM
> >>>>>>> Subject: Re: Fine Tuning Lucene implementation
> >>>>>>>
> >>>>>>>
> >>>>>>>> Hey Hira ,
> >>>>>>>>
> >>>>>>>> Thanks so much for the reply. Much appreciate it.
> >>>>>>>>
> >>>>>>>> Quote:
> >>>>>>>>
> >>>>>>>> Would it be possible to just include a query clause?
> >>>>>>>>   - i.e., instead of just contents:<userQuery>, also add
> >>>>>>>> +id:<idWeCareAbout>
> >>>>>>>>
> >>>>>>>> How can I do that ?
> >>>>>>>>
> >>>>>>>> I see my query as :
> >>>>>>>>
> >>>>>>>> +contents:harvard +contents:business +contents:review
> >>>>>>>>
> >>>>>>>> where the search phrase was: harvard business review
> >>>>>>>>
> >>>>>>>> Now how can I add +id:<idWeCareAbout>  ??
> >>>>>>>>
> >>>>>>>> This would give me that one exact document I am looking
> >>>>>>>> for , for
> >>>>>>>> that
> >>>>>>> id.
> >>>>>>>> I
> >>>>>>>> don't have to iterate through hits.
> >>>>>>>>
> >>>>>>>> thanks,
> >>>>>>>>
> >>>>>>>> Askar
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>> On 7/24/07, N. Hira < nhira@cognocys.com> wrote:
> >>>>>>>>>
> >>>>>>>>> I'm no expert on this (so please accept the comments in that
> >>>>>>>>> context)
> >>>>>>>>> but 2 things seem weird to me:
> >>>>>>>>>
> >>>>>>>>> 1.  Iterating over each hit is an expensive proposition.  I've
> >>>>>>>>> often
> >>>>>>>>> seen people recommending a HitCollector.
> >>>>>>>>>
> >>>>>>>>> 2.  It seems that doBodySearch() is essentially saying, do
> >>>>>>>>> this
> >>>>>>>>> search
> >>>>>>>>> and return the score pertinent to this ID (using an exhaustive
> >>>>>>>>> loop).
> >>>>>>>>> Would it be possible to just include a query clause?
> >>>>>>>>>     - i.e., instead of just contents:<userQuery>, also add
> >>>>>>>>> +id:<idWeCareAbout>
> >>>>>>>>>
> >>>>>>>>> In general though, I think your algorithm seems inefficient
> >>>>>>>>> (if I
> >>>>>>>>> understand it correctly):-- if I want to search for one term
> >>>>>>>>> among 3 in
> >>>>>>>>> a "collection" of 300 documents (as defined by some external
> >>>>>>> attribute),
> >>>>>>>>> I will wind up executing 300 x 3 searches, and for each search
> >>>>>>>>> that is
> >>>>>>>>> executed, I will iterate over every Hit, even if I've already
> >>>>>>>>> found the
> >>>>>>>>> one that I "care about".
> >>>>>>>>>
> >>>>>>>>> What would break if you:
> >>>>>>>>> 1.  Included "creator" in the Lucene index (or, filtered
> >>>>>>>>> out the
> >>>>>>>>> Hits
> >>>>>>>>> using a BitSet or something like it)
> >>>>>>>>> 2.  Executed 1 search
> >>>>>>>>> 3.  Collected the results of the first N Hits (where N is some
> >>>>>>>>> reasonable limit, like 100 or 500)
> >>>>>>>>>
> >>>>>>>>> -h
> >>>>>>>>>
> >>>>>>>>>
> >>>>>>>>> On Tue, 2007-07-24 at 20:14 -0400, Askar Zaidi wrote:
> >>>>>>>>>
> >>>>>>>>>> Sure.
> >>>>>>>>>>
> >>>>>>>>>>  public float doBodySearch(Searcher searcher,String query,
> >>>>>>>>>> int
> >>>>>>>>>> id){
> >>>>>>>>>>
> >>>>>>>>>>                  try{
> >>>>>>>>>>                                 score = search(searcher,
> >>>>>>>>>> query,id);
> >>>>>>>>>>                      }
> >>>>>>>>>>                       catch(IOException io){}
> >>>>>>>>>>                       catch(ParseException pe){}
> >>>>>>>>>>
> >>>>>>>>>>                       return score;
> >>>>>>>>>>
> >>>>>>>>>>                 }
> >>>>>>>>>>
> >>>>>>>>>>  private float search(Searcher searcher, String queryString,
> >>>>>>>>>> int id)
> >>>>>>>>>> throws ParseException, IOException {
> >>>>>>>>>>
> >>>>>>>>>>         // Build a Query object
> >>>>>>>>>>
> >>>>>>>>>>         QueryParser queryParser = new QueryParser("contents",
> >>>>>>>>>> new
> >>>>>>>>>> KeywordAnalyzer());
> >>>>>>>>>>
> >>>>>>>>>>         queryParser.setDefaultOperator
> >>>>>>>>>> ( QueryParser.Operator.AND);
> >>>>>>>>>>
> >>>>>>>>>>         Query query = queryParser.parse(queryString);
> >>>>>>>>>>
> >>>>>>>>>>         // Search for the query
> >>>>>>>>>>
> >>>>>>>>>>         Hits hits = searcher.search(query);
> >>>>>>>>>>         Document doc = null;
> >>>>>>>>>>
> >>>>>>>>>>         // Examine the Hits object to see if there were any
> >>>>>>>>>> matches
> >>>>>>>>>>         int hitCount = hits.length();
> >>>>>>>>>>
> >>>>>>>>>>                 for(int i=0;i<hitCount;i++){
> >>>>>>>>>>                 doc = hits.doc(i);
> >>>>>>>>>>                 String str = doc.get("item");
> >>>>>>>>>>                 int tmp = Integer.parseInt (str);
> >>>>>>>>>>                 if(tmp==id)
> >>>>>>>>>>                 score = hits.score(i);
> >>>>>>>>>>                 }
> >>>>>>>>>>
> >>>>>>>>>>         return score;
> >>>>>>>>>>     }
> >>>>>>>>>>
> >>>>>>>>>> I really need to optimize doBodySearch(...) as this takes the
> >>>>>>>>>> most
> >>>>>>>>>> time.
> >>>>>>>>>>
> >>>>>>>>>> thanks guys,
> >>>>>>>>>> Askar
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>> On 7/24/07, N. Hira <nhira@cognocys.com> wrote:
> >>>>>>>>>>
> >>>>>>>>>>         Could you show us the relevant source from
> >>>>>>>>>> doBodySearch()?
> >>>>>>>>>>
> >>>>>>>>>>         -h
> >>>>>>>>>>
> >>>>>>>>>>         On Tue, 2007-07-24 at 19:58 -0400, Askar Zaidi wrote:
> >>>>>>>>>>> I ran some tests and it seems that the slowness is from
> >>>>>>>>>>         Lucene calls when I
> >>>>>>>>>>> do "doBodySearch", if I remove that call, Lucene gives me
> >>>>>>>>>>         results in 5
> >>>>>>>>>>> seconds. otherwise it takes about 50 seconds.
> >>>>>>>>>>>
> >>>>>>>>>>> But I need to do Body search and that field contains lots
> >>>>>>> of
> >>>>>>>>>>         text. The field
> >>>>>>>>>>> is <contents>. How can I optimize that ?
> >>>>>>>>>>>
> >>>>>>>>>>> thanks,
> >>>>>>>>>>> Askar
> >>>>>>>>>>>
> >>>>>>>>>>>
> >>>>>>>>>
> >>>>>>>>>
> >>>>>>>>>
> >>>>>>>>>
> >>>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>> ----------------------------------------------------------------
> >>>>>>> ---
> >>>>>>> --
> >>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>>>>> For additional commands, e-mail: java-user-
> >>>>>>> help@lucene.apache.org
> >>>>>>>
> >>>>>>>
> >>>>>
> >>>>> --------------------------
> >>>>> Grant Ingersoll
> >>>>> Center for Natural Language Processing
> >>>>> http://www.cnlp.org/tech/lucene.asp
> >>>>>
> >>>>> Read the Lucene Java FAQ at http://wiki.apache.org/lucene-java/
> >>>>> LuceneFAQ
> >>>>>
> >>>>>
> >>>>>
> >>>>> ------------------------------------------------------------------
> >>>>> ---
> >>>
> >>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>>
> >>>>>
> >>>
> >>> ------------------------------------------------------
> >>> Grant Ingersoll
> >>> http://www.grantingersoll.com/
> >>> http://lucene.grantingersoll.com
> >>> http://www.paperoftheweek.com/
> >>>
> >>>
> >>>
> >>> --------------------------------------------------------------------
> >>> -
> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>
> >>>
> >>
>
> ------------------------------------------------------
> Grant Ingersoll
> http://www.grantingersoll.com/
> http://lucene.grantingersoll.com
> http://www.paperoftheweek.com/
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_7156_26916256.1185384381927--

From java-user-return-29394-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 25 17:32:38 2007
Return-Path: <java-user-return-29394-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95451 invoked from network); 25 Jul 2007 17:32:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2007 17:32:37 -0000
Received: (qmail 56525 invoked by uid 500); 25 Jul 2007 17:32:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56483 invoked by uid 500); 25 Jul 2007 17:32:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56472 invoked by uid 99); 25 Jul 2007 17:32:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 10:32:32 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_MESSAGE,MAILTO_TO_SPAM_ADDR
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [209.191.68.235] (HELO web36209.mail.mud.yahoo.com) (209.191.68.235)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 25 Jul 2007 10:32:30 -0700
Received: (qmail 19716 invoked by uid 60001); 25 Jul 2007 17:32:07 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=N5RLcW1rB8LjKVC2d+b0tf5uFQn/68DcOFRIIp9xp6ThNe53OyKzdOWc97539T8V/LmkkEJEjdRZHS7rLvNf76lfJEHbsC80lKQEU7R0ZTe797FptnHj51meAKWTFB453hoXIH/DF9qM/VS0HvoX2nhnpLH5CaY+Uh1izX7oB6U=;
X-YMail-OSG: ecCfCYcVM1nDjkY_jYyPRSrsI4eGDz7Ry0lDQAz_afhDQJjlj9KxomXd1T5nWapa6COZAih0_xFP_CVxoWgMCkHK6HgjaYr5yu6UDcM6pvCHeBXbW5qous0CalqnEQ--
Received: from [129.55.200.20] by web36209.mail.mud.yahoo.com via HTTP; Wed, 25 Jul 2007 10:32:07 PDT
Date: Wed, 25 Jul 2007 10:32:07 -0700 (PDT)
From: Lindsey Hess <lindseyhess83@yahoo.com>
Subject: Re: What replaced org.apache.lucene.document.Field.Text?
To: java-user@lucene.apache.org
In-Reply-To: <4f9b23800707250018u38132a2fs2619cb3b3bc5c779@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-687683285-1185384727=:19709"
Content-Transfer-Encoding: 8bit
Message-ID: <576905.19709.qm@web36209.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-687683285-1185384727=:19709
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Andy, Patrick,
   
  Thank you.  I replaced Field.Text with new Field("name", "value", Field.Store.YES, Field.Index.TOKENIZED); and it works just fine.
   
  Cheers,
   
  Lindsey

   
  

Patrick Kimber <mailing.patrick.kimber@gmail.com> wrote:
  Hi Andy

I think:
Field.Text("name", "value");

has been replaced with:
new Field("name", "value", Field.Store.YES, Field.Index.TOKENIZED);

Patrick

On 25/07/07, Liu_Andy2@emc.com 
wrote:
> Please reference How do I get code written for Lucene 1.4.x to work with
> Lucene 2.x?
> http://wiki.apache.org/lucene-java/LuceneFAQ#head-86d479476c63a2579e867b
> 75d4faa9664ef6cf4d
>
>
> Andy
> -----Original Message-----
> From: Lindsey Hess [mailto:lindseyhess83@yahoo.com]
> Sent: Wednesday, July 25, 2007 12:31 PM
> To: Lucene
> Subject: What replaced org.apache.lucene.document.Field.Text?
>
> I'm trying to get some relatively old Lucene code to compile (please see
> below), and it appears that Field.Text has been deprecated. Can someone
> please suggest what I should use in its place?
>
> Thank you.
>
> Lindsey
>
>
>
> public static void main(String args[]) throws Exception
> {
> String indexDir =
> System.getProperty("java.io.tmpdir", "tmp") +
> System.getProperty("file.separator") + "address-book";
> Analyzer analyzer = new WhitespaceAnalyzer();
> boolean createFlag = true;
>
> IndexWriter writer = new IndexWriter(indexDir, analyzer, createFlag);
> Document contactDocument = new Document();
> contactDocument.add(Field.Text("type", "individual"));
>
> contactDocument.add(Field.Text("name", "Zane Pasolini"));
> contactDocument.add(Field.Text("address", "999 W. Prince St."));
> contactDocument.add(Field.Text("city", "New York"));
> contactDocument.add(Field.Text("province", "NY"));
> contactDocument.add(Field.Text("postalcode", "10013"));
> contactDocument.add(Field.Text("country", "USA"));
> contactDocument.add(Field.Text("telephone", "1-212-345-6789"));
> writer.addDocument(contactDocument);
> writer.close();
> }
>
>
> ---------------------------------
> Fussy? Opinionated? Impossible to please? Perfect. Join Yahoo!'s user
> panel and lay it on us.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



       
---------------------------------
Boardwalk for $500? In 2007? Ha! 
Play Monopoly Here and Now (it's updated for today's economy) at Yahoo! Games.
--0-687683285-1185384727=:19709--

From java-user-return-29395-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 25 17:40:01 2007
Return-Path: <java-user-return-29395-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97191 invoked from network); 25 Jul 2007 17:39:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2007 17:39:59 -0000
Received: (qmail 73779 invoked by uid 500); 25 Jul 2007 17:39:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73737 invoked by uid 500); 25 Jul 2007 17:39:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73726 invoked by uid 99); 25 Jul 2007 17:39:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 10:39:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.177] (HELO spunkymail-a16.dreamhost.com) (208.97.132.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 10:39:52 -0700
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a16.dreamhost.com (Postfix) with ESMTP id DDFFF7CE8D
	for <java-user@lucene.apache.org>; Wed, 25 Jul 2007 10:39:30 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <c0c0e1d40707251026x6774a80ej2552b8dac17a22d4@mail.gmail.com>
References: <c0c0e1d40707241243y5ddfd5fai10381873a2d2bd64@mail.gmail.com> <c0c0e1d40707242239y17296bf3rcb9daf6ab3cd9c2f@mail.gmail.com> <BAY114-DAV100592591AD1D725911CE594F10@phx.gbl> <c0c0e1d40707250710v5e7e7694obead0b44449507e0@mail.gmail.com> <F5C96C89-A4FE-4392-8E2D-92706F4E4923@apache.org> <c0c0e1d40707250845s6b91c66ei79e94bacfb292f2c@mail.gmail.com> <C31E77DA-C5D3-44C6-8D96-4E7DF1812849@gmail.com> <c0c0e1d40707250926i895af09m647e2b9bfce575f2@mail.gmail.com> <c0c0e1d40707250931t7922d012ma84d2d6561e59c9a@mail.gmail.com> <C26EACBD-986A-4319-857B-1502788797F7@gmail.com> <c0c0e1d40707251026x6774a80ej2552b8dac17a22d4@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <CB5F3150-0DC2-44FB-A201-307C7148EE71@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Fine Tuning Lucene implementation
Date: Wed, 25 Jul 2007 13:39:22 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


On Jul 25, 2007, at 1:26 PM, Askar Zaidi wrote:

> Hey guys,
>
> One last question and I think I'll have an optimized algorithm.
>
> How can I build a query in my program ?
>
> This is what I am doing:
>
> QueryParser queryParser = new QueryParser("contents", new
> StandardAnalyzer());
>
>  queryParser.setDefaultOperator(QueryParser.Operator.AND);
>
>  Query q = queryParser.parse(queryString);

Just concatenate it onto your string:

  Query q = queryParser.parse(queryString + " +" + itemID);



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29396-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 25 18:08:32 2007
Return-Path: <java-user-return-29396-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6000 invoked from network); 25 Jul 2007 18:08:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2007 18:08:30 -0000
Received: (qmail 18525 invoked by uid 500); 25 Jul 2007 18:08:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18499 invoked by uid 500); 25 Jul 2007 18:08:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18488 invoked by uid 99); 25 Jul 2007 18:08:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 11:08:25 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lucenelist2007@danielnaber.de designates 80.67.29.7 as permitted sender)
Received: from [80.67.29.7] (HELO smtprelay07.ispgateway.de) (80.67.29.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 11:08:22 -0700
Received: (qmail 14149 invoked from network); 25 Jul 2007 18:08:00 -0000
Received: from unknown (HELO p54bffb7f.dip.t-dialin.net) ([pbs]695637@[84.191.251.127])
          (envelope-sender <lucenelist2007@danielnaber.de>)
          by smtprelay07.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 25 Jul 2007 18:08:00 -0000
From: Daniel Naber <lucenelist2007@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Query parsing?
Date: Wed, 25 Jul 2007 20:09:13 +0200
User-Agent: KMail/1.8.2
References: <557524.95410.qm@web36201.mail.mud.yahoo.com>
In-Reply-To: <557524.95410.qm@web36201.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200707252009.14061@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org

On Wednesday 25 July 2007 00:44, Lindsey Hess wrote:

> Now, I do not need Lucene to index anything, but I'm wondering if Lucene
> has query parsing classes that will allow me to transform the queries. 

The Lucene QueryParser class can parse the format descriped at 
http://lucene.apache.org/java/docs/queryparsersyntax.html. To adapt it to 
other formats, the javacc grammar needs to be modified. To output in yet 
another format, either the Java code would need to be modified or you'd 
need to write some new Java code that iterates over the object produced by 
the QueryParser. In other words: this is not what Lucene's QueryParser was 
made for and it's not too simple unless you're already familiar with 
javacc.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29397-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 25 18:29:56 2007
Return-Path: <java-user-return-29397-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18239 invoked from network); 25 Jul 2007 18:29:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2007 18:29:55 -0000
Received: (qmail 85126 invoked by uid 500); 25 Jul 2007 18:29:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84956 invoked by uid 500); 25 Jul 2007 18:29:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84945 invoked by uid 99); 25 Jul 2007 18:29:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 11:29:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [64.81.62.48] (HELO mail01.apmindsf.com) (64.81.62.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 11:29:47 -0700
Received: from [172.30.250.102] (helo=[172.30.250.102])
	by mail01.apmindsf.com with esmtp (Exim 4.50)
	id 1IDlbx-0001Zx-1Q
	for java-user@lucene.apache.org; Wed, 25 Jul 2007 11:29:25 -0700
Message-ID: <46A7995D.5030004@metaweb.com>
Date: Wed, 25 Jul 2007 11:41:33 -0700
From: Tim Sturge <tsturge@metaweb.com>
User-Agent: Mozilla Thunderbird 1.0.6 (X11/20050715)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: java gc with a frequently changing index?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I am indexing a set of constantly changing documents. The change rate is 
moderate (about 10 docs/sec over a 10M document collection with a 6G 
total size) but I want to be  right up to date (ideally within a second 
but within 5 seconds is acceptable) with the index.

Right now I have code that adds new documents to the index and deletes 
old ones using updateDocument() in the 2.1 IndexWriter. In order to see 
the changes, I need to recreate the IndexReader/IndexSearcher every 
second or so. I am not calling optimize() on the index in the writer, 
and the mergeFactor is 10.

The problem I am facing is that java gc is terrible at collecting the 
IndexSearchers I am discarding. I usually have a 3msec query time, but I 
get gc pauses of 300msec to 3 sec (I assume is is collecting the 
"tenured" generation in these pauses, which is my old IndexSearcher)

I've tried "-Xincgc", "-XX:+UseConcMarkSweepGC -XX:+UseParNewGC" and 
calling System.gc() right after I close the old index without much luck 
(I get the pauses down to 1sec, but get 3x as many. I want < 25 msec 
pauses). So my question is, should I be avoiding reloading my index in 
this way? Should I keep a separate IndexReader (which only deletes old 
documents) and one for new documents? Is there a standard technique for 
a quickly changing index?

Thanks,

Tim


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29398-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 25 18:35:20 2007
Return-Path: <java-user-return-29398-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19860 invoked from network); 25 Jul 2007 18:35:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2007 18:35:19 -0000
Received: (qmail 93694 invoked by uid 500); 25 Jul 2007 18:35:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92855 invoked by uid 500); 25 Jul 2007 18:35:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92844 invoked by uid 99); 25 Jul 2007 18:35:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 11:35:14 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.154 as permitted sender)
Received: from [195.212.29.154] (HELO mtagate5.de.ibm.com) (195.212.29.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 11:35:11 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate5.de.ibm.com (8.13.8/8.13.8) with ESMTP id l6PIYn4f498712
	for <java-user@lucene.apache.org>; Wed, 25 Jul 2007 18:34:49 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.4) with ESMTP id l6PIYkMU2056230
	for <java-user@lucene.apache.org>; Wed, 25 Jul 2007 20:34:49 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l6PIYU2L004238
	for <java-user@lucene.apache.org>; Wed, 25 Jul 2007 20:34:30 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l6PIYTIo004078
	for <java-user@lucene.apache.org>; Wed, 25 Jul 2007 20:34:29 +0200
In-Reply-To: <c0c0e1d40707250845s6b91c66ei79e94bacfb292f2c@mail.gmail.com>
Subject: Re: Fine Tuning Lucene implementation
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF73BAB206.A895E104-ON88257323.005EA761-88257323.0065AA79@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Wed, 25 Jul 2007 11:30:27 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 25/07/2007 21:34:29
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

"Askar Zaidi" wrote:

> ... Heres what I am trying to accomplish:
>
> 1. Iterate over itemID (unique) in the database using one SQL query.
> 2. For every itemID found, run 4 searches on Lucene Index.
> 3. doTagSearch(itemID....) ; collect score
> 4. doTitleSearch(itemID...) ; collect score
> 5. doSummarySearch(itemID...) ; collect score
> 6. doBodySearch(itemID....) ; collect score
>
> These scores are then added and I get a total score for each
> unique item in the database.

oining this late I might be missing something. Still I
would like to understand better *what* you are trying to do
here (before going into the *how*).

By your description above, my understanding is this:

1. Assume one table in the DB, with textual
   columns: ItemID(unique), Title, Summary, Body, Tags.
2. The ItemID columns is a unique key in the table.
3. Assume entries in the ItemID column looks like
   this: itemID=127, itemID=75, etc.
4. Some of the other columns (not the ItemID column)
   can contain IDs as well.
5. You are iterating over the ItemID column, and,
   for each value, (each ID), ranking all the documents
   in the index (all the rows in that table) for
   occurrences of that ID.

Is that so?

If so, you are actually trying to find for each row (doc),
which (other) rows (docs) "refer" to it most. Right?
Is this really a textual search problem?

For instance, if rows X has N references to row Z,
and row Y has N+1 references to row Z, but the length
of the text in row Z is much more than that of row X,
would you expect row X to rank higher, because it is
shorter (what Lucene is likely to do) or that row Y
will rank higher, because it has slightly more
references to row Z?

In another email you have this:

> Can I just add:
>
> +contents:Harvard +contents:Business +contents: Review +itemID=77
??
>
> That query would just return one document.

Which is different than the above - it has a textual
task, not only ID. Are you interested here in all docs
(rows) that reference itemID=77 or only want to check
if the specific row whose ID is itemID=77, satisfies
the textual part of this query?

This brings back to the start point: perhaps it would
help more if you once again define the task/problem you
are trying to solve? Forget about loops and doXyzSearch()
methods - just define input; output; logic;

Regards,
Doron


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29399-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 25 18:38:39 2007
Return-Path: <java-user-return-29399-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21049 invoked from network); 25 Jul 2007 18:38:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2007 18:38:37 -0000
Received: (qmail 2003 invoked by uid 500); 25 Jul 2007 18:38:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1968 invoked by uid 500); 25 Jul 2007 18:38:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1957 invoked by uid 99); 25 Jul 2007 18:38:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 11:38:32 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of rafael.rossini@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 11:38:30 -0700
Received: by nf-out-0910.google.com with SMTP id d3so18098nfc
        for <java-user@lucene.apache.org>; Wed, 25 Jul 2007 11:38:09 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=YIUjaSpcpEE+fWJj5LJVrWS9w2BdI2CB1xTrk07crc5K1e9T6rWWd2Fps6bHU5cbmzcjDr1Mjy+3TBwyqBOOA9iXh0erEmeVXrPOhHB99zwxlyo5kEyT12g444O4+6Slse/6nNgUSCyf7GqVonvUeeDLUH3btsMzpba9L67X5tU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=DwpnVxCRv1z1uRNDEOPk3PRZXu70P5wkzUm8OqMAYCoilXTsFMvUmEY1DEwZgZCy+L4mM+GLNAwbF/FDYCkYcsWU2w9UaIzYt56PVY+RbNtAZ19qxNc5kyH+ZhLma2zkIg4qwKlCgK58Zh26cdItk6nptokEpEaRMTH0Oo3jtgo=
Received: by 10.82.112.3 with SMTP id k3mr793227buc.1185388689680;
        Wed, 25 Jul 2007 11:38:09 -0700 (PDT)
Received: by 10.82.113.12 with HTTP; Wed, 25 Jul 2007 11:38:09 -0700 (PDT)
Message-ID: <a8d89b3b0707251138t7b2f4611kc390e198d7246bbc@mail.gmail.com>
Date: Wed, 25 Jul 2007 15:38:09 -0300
From: "Rafael Rossini" <rafael.rossini@gmail.com>
To: java-user@lucene.apache.org
Subject: Delete corrupted doc
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_162202_30373560.1185388689659"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_162202_30373560.1185388689659
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi guys,

    Is there a way of deleting a document that, because of some corruption,
got and docID larger than the maxDoc() ? I=B4m trying to do this but I get
this Exception:

 Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: Array
index out of range: 106577
   at org.apache.lucene.util.BitVector.set(BitVector.java:53)
   at org.apache.lucene.index.SegmentReader.doDelete (SegmentReader.java
:301)
   at org.apache.lucene.index.IndexReader.deleteDocument(IndexReader.java
:674)
   at org.apache.lucene.index.MultiReader.doDelete(MultiReader.java:125)
   at org.apache.lucene.index.IndexReader.deleteDocument (IndexReader.java
:674)
   at teste.DeleteError.main(DeleteError.java:9)

Thanks

------=_Part_162202_30373560.1185388689659--

From java-user-return-29400-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 25 18:45:17 2007
Return-Path: <java-user-return-29400-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22744 invoked from network); 25 Jul 2007 18:45:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2007 18:45:15 -0000
Received: (qmail 14978 invoked by uid 500); 25 Jul 2007 18:45:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14617 invoked by uid 500); 25 Jul 2007 18:45:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14606 invoked by uid 99); 25 Jul 2007 18:45:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 11:45:10 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of askar.zaidi@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 11:45:08 -0700
Received: by ug-out-1314.google.com with SMTP id c2so478272ugf
        for <java-user@lucene.apache.org>; Wed, 25 Jul 2007 11:44:47 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=otvt/9/pdlcBCTGIA6cFPn3HCLn74Sf/nrzfz2i6tfjwXdG0/WQbF+ZGtFEHqWBlrnf8hlp9nVqdpxM1Wb0xa79MhhlH+S6sfRF4Kzzf4ikzof30R434NFFZCIXC/i/sxZjaWm7C9tzgWX0UStsiBs2kWpg3Oly5LaQ7L5qY6RE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=I/l6myDKJ1+Eo4bPZN0eGcWWG0QI7xR1mFcvWbjG5FPkYJA8rWUljHPmhwh/5il7kbO4ySsfyWgvbjsvGlllf8HTzIDkP+eY3fy/pfM+HDsJfMkLxcvvcF4Q7pL8gsLQlYvrM/yYvMALk1notu+2GN+IZFNVs+8avQlKfy8/w6M=
Received: by 10.66.220.17 with SMTP id s17mr1571678ugg.1185389087280;
        Wed, 25 Jul 2007 11:44:47 -0700 (PDT)
Received: by 10.66.251.15 with HTTP; Wed, 25 Jul 2007 11:44:47 -0700 (PDT)
Message-ID: <c0c0e1d40707251144x26055fddt2048a30e3359e4cc@mail.gmail.com>
Date: Wed, 25 Jul 2007 14:44:47 -0400
From: "Askar Zaidi" <askar.zaidi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Fine Tuning Lucene implementation
In-Reply-To: <OF73BAB206.A895E104-ON88257323.005EA761-88257323.0065AA79@il.ibm.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8033_5732448.1185389087192"
References: <c0c0e1d40707250845s6b91c66ei79e94bacfb292f2c@mail.gmail.com>
	 <OF73BAB206.A895E104-ON88257323.005EA761-88257323.0065AA79@il.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_8033_5732448.1185389087192
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hey Guys,

Thanks for all the responses. I finally got it working with some query
modification.

The idea was to pick an itemID from the database and for that itemID in the
Index, get the scores across 4 fields; add them up and ta-da !

I still have to verify my scores.

Thanks a ton, I'll be active on this list from now on and try and answer
questions to which I was seeking answers.

later,
Askar

On 7/25/07, Doron Cohen <DORONC@il.ibm.com> wrote:
>
> "Askar Zaidi" wrote:
>
> > ... Heres what I am trying to accomplish:
> >
> > 1. Iterate over itemID (unique) in the database using one SQL query.
> > 2. For every itemID found, run 4 searches on Lucene Index.
> > 3. doTagSearch(itemID....) ; collect score
> > 4. doTitleSearch(itemID...) ; collect score
> > 5. doSummarySearch(itemID...) ; collect score
> > 6. doBodySearch(itemID....) ; collect score
> >
> > These scores are then added and I get a total score for each
> > unique item in the database.
>
> oining this late I might be missing something. Still I
> would like to understand better *what* you are trying to do
> here (before going into the *how*).
>
> By your description above, my understanding is this:
>
> 1. Assume one table in the DB, with textual
>    columns: ItemID(unique), Title, Summary, Body, Tags.
> 2. The ItemID columns is a unique key in the table.
> 3. Assume entries in the ItemID column looks like
>    this: itemID=127, itemID=75, etc.
> 4. Some of the other columns (not the ItemID column)
>    can contain IDs as well.
> 5. You are iterating over the ItemID column, and,
>    for each value, (each ID), ranking all the documents
>    in the index (all the rows in that table) for
>    occurrences of that ID.
>
> Is that so?
>
> If so, you are actually trying to find for each row (doc),
> which (other) rows (docs) "refer" to it most. Right?
> Is this really a textual search problem?
>
> For instance, if rows X has N references to row Z,
> and row Y has N+1 references to row Z, but the length
> of the text in row Z is much more than that of row X,
> would you expect row X to rank higher, because it is
> shorter (what Lucene is likely to do) or that row Y
> will rank higher, because it has slightly more
> references to row Z?
>
> In another email you have this:
>
> > Can I just add:
> >
> > +contents:Harvard +contents:Business +contents: Review +itemID=77
> ??
> >
> > That query would just return one document.
>
> Which is different than the above - it has a textual
> task, not only ID. Are you interested here in all docs
> (rows) that reference itemID=77 or only want to check
> if the specific row whose ID is itemID=77, satisfies
> the textual part of this query?
>
> This brings back to the start point: perhaps it would
> help more if you once again define the task/problem you
> are trying to solve? Forget about loops and doXyzSearch()
> methods - just define input; output; logic;
>
> Regards,
> Doron
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_8033_5732448.1185389087192--

From java-user-return-29401-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 25 19:16:48 2007
Return-Path: <java-user-return-29401-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31634 invoked from network); 25 Jul 2007 19:16:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2007 19:16:46 -0000
Received: (qmail 71901 invoked by uid 500); 25 Jul 2007 19:16:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71875 invoked by uid 500); 25 Jul 2007 19:16:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 51149 invoked by uid 99); 25 Jul 2007 19:05:08 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Message-ID: <46A79EBF.4070500@grivolla.net>
Date: Wed, 25 Jul 2007 21:04:31 +0200
From: Jens Grivolla <j-lucene@grivolla.net>
User-Agent: Thunderbird 2.0.0.5 (Macintosh/20070716)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: MoreLikeThis for multiple documents
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-IUA-MailScanner: Found to be clean
X-IUA-MailScanner-SpamCheck: not spam (whitelisted),
	SpamAssassin (not cached, score=-4.399, required 5,
	autolearn=not spam, ALL_TRUSTED -1.80, BAYES_00 -2.60)
X-IUA-MailScanner-From: j-lucene@grivolla.net
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

I'm looking to extract significant terms characterizing a set of 
documents (which in turn relate to a topic).

This basically comes down to functionality similar to determining the 
terms with the greatest offer weight (as used for blind relevance 
feedback), or maximizing tf.idf (as is done in MoreLikeThis).

Is there anything like this already implemented, or do I need to iterate 
through all documents in the set "manually", re-tokenize each one (or 
maybe use TermVectors), and then calculate the weight for each term?

Thanks,
    Jens

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29402-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 25 20:44:34 2007
Return-Path: <java-user-return-29402-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68315 invoked from network); 25 Jul 2007 20:44:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2007 20:44:33 -0000
Received: (qmail 52649 invoked by uid 500); 25 Jul 2007 20:44:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52595 invoked by uid 500); 25 Jul 2007 20:44:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52584 invoked by uid 99); 25 Jul 2007 20:44:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 13:44:28 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.162.226 as permitted sender)
Received: from [64.233.162.226] (HELO nz-out-0506.google.com) (64.233.162.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 13:44:26 -0700
Received: by nz-out-0506.google.com with SMTP id i28so248634nzi
        for <java-user@lucene.apache.org>; Wed, 25 Jul 2007 13:44:05 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=mr1dF4NREVztlFdzvo7fXsj7auDjfioBiRboH4G9feCN/jCvdkHUcR+rRiZmtIM6oUWEAFdYkG5CZqs0RF8q2eYOtW8+hqX2EFtqWQ0iEyZLhfyAeiqDYiCJ/w1ntXTusy21dX/UxQCicnstsbGmrtaJefTN5SV/HVpV5+tyOrw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=ojbpGxtb2oyY8v+OnWX8S6mxEQQzRZ1x8CKa0XyLfjh6wdCnJpHUBM5BNmtRCD24WuCjU/WaGrQVvL4CDHAWvEH90U1s7rV75CVBzhHVd2UFJauhtlUGTdpmYqbFGHKpNDfXC9cOM2IOXM5KW2q2BEQIHUwyuUm9BkVEDuSojWQ=
Received: by 10.142.154.20 with SMTP id b20mr6398wfe.1185396244963;
        Wed, 25 Jul 2007 13:44:04 -0700 (PDT)
Received: by 10.143.3.1 with HTTP; Wed, 25 Jul 2007 13:44:04 -0700 (PDT)
Message-ID: <c68e39170707251344se69149bxefcf0ad270473dcc@mail.gmail.com>
Date: Wed, 25 Jul 2007 16:44:04 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: StandardTokenizer is slowing down highlighting a lot
In-Reply-To: <5af106d60707250419g57f1549cvaf01087b9f7027b6@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <652776090707181728t416b8839x72fef70d45d6824d@mail.gmail.com>
	 <469EB70C.3040907@gmail.com>
	 <5af106d60707250419g57f1549cvaf01087b9f7027b6@mail.gmail.com>
X-Google-Sender-Auth: 424c24e1299a5311
X-Virus-Checked: Checked by ClamAV on apache.org

On 7/25/07, Stanislaw Osinski <stanislaw.osinski@man.poznan.pl> wrote:
> JavaCC is slow indeed.

JavaCC is a very fast parser for a large document... the issue is
small fields and JavaCC's use of an exception for flow control at the
end of a value.  As JVMs have advanced, exception-as-control-flow as
gotten comparably slower.

Does JFlex have a jar associated with it?  It's GPL (although you can
freely use the files it generates under any license), so if there were
other non-generated files required, we wouldn't be able to incorporate
them.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29403-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 25 21:05:44 2007
Return-Path: <java-user-return-29403-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74955 invoked from network); 25 Jul 2007 21:05:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2007 21:05:43 -0000
Received: (qmail 95148 invoked by uid 500); 25 Jul 2007 21:05:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94718 invoked by uid 500); 25 Jul 2007 21:05:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94707 invoked by uid 99); 25 Jul 2007 21:05:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 14:05:38 -0700
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jattardi@gmail.com designates 209.85.146.177 as permitted sender)
Received: from [209.85.146.177] (HELO wa-out-1112.google.com) (209.85.146.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 14:05:36 -0700
Received: by wa-out-1112.google.com with SMTP id j40so377020wah
        for <java-user@lucene.apache.org>; Wed, 25 Jul 2007 14:05:15 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=aUXtP51GR5S4aDon7PRE8u9a8ztnAXK+9PmxpezuW2vPdc7UAMLri4pOkx3cGsAYtCbzRcGFugrpRRBtRj2VwTMXH5Q9QlxbTh8TA5ru6kvb/6Zw3iU9A2o3AtR/IpxAME38yJQuok579eR4xiNnQ48zIqu/Iqr4QTPf8yQPUOM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=UGjgPVsf4harpADLy1j0e5AEJaq7FaZwJXJfEbaLqdK9tTC5ZXmYtg/ifRLww/ceiVK9HdZgzih5Kp0sPARa8qfGAEEsjyWrCdkMmx+sR0AaShEr8sfvz4CMEYYbzib1uHwKs7qoaDr+qldu4a2mmP3MAUpGbfW9A4iOZpvYdf8=
Received: by 10.114.209.1 with SMTP id h1mr1044230wag.1185397514787;
        Wed, 25 Jul 2007 14:05:14 -0700 (PDT)
Received: by 10.114.121.8 with HTTP; Wed, 25 Jul 2007 14:05:14 -0700 (PDT)
Message-ID: <7a14509e0707251405n1a5891e7m5df182ddf0bfa22e@mail.gmail.com>
Date: Wed, 25 Jul 2007 17:05:14 -0400
From: "Joe Attardi" <jattardi@gmail.com>
To: "Lucene Mailing List" <java-user@lucene.apache.org>
Subject: Assembling a query from multiple fields
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_159845_18035433.1185397514765"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_159845_18035433.1185397514765
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all,

Apologies for the cryptic subject line, but I couldn't think of a more
descriptive one-liner to describe my problem/question to you all. Still
fairly new to Lucene here, although I'm hoping to have more of a clue once I
get a chance to read "Lucene In Action".

I am implementing a search engine using Lucene for a web application. It is
not really a free-text search like some other, more standard
implementations.
The requirement is for the search to be as easy and user-friendly as
possible, so instead of specifying the field to search in the query itself -
such as ip:192.168.102.230 - and being parsed with QueryParser, the field is
being selected via a HTML <select> element, and the search keywords are
entered in a text field.

As far as I can tell, I basically have two options:
(1) Manually prepend the field identifier to the query text, for example:
          String fullQuery = field + ":" + queryText;
     then parse this query normally with QueryParser, OR
(2) Since I know it is only going to be searching one term, manually create
a TermQuery with a Term object representing what the user typed in, for
example:
          Query query = new TermQuery(new Term(field, queryText));

Is there any advantage or disadvantage to any of these, or is one preferable
over the other? My gut tells me that directly creating the TermQuery is more
efficient since it doesn't have to perform parsing, but I'm not sure.

I have other questions, too, but I don't want to get ahead of myself. One at
a time... :)

Appreciate any help you all might have!

-- 
Joe Attardi

------=_Part_159845_18035433.1185397514765--

From java-user-return-29404-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 26 02:33:42 2007
Return-Path: <java-user-return-29404-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84768 invoked from network); 26 Jul 2007 02:33:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jul 2007 02:33:40 -0000
Received: (qmail 73816 invoked by uid 500); 26 Jul 2007 02:33:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73439 invoked by uid 500); 26 Jul 2007 02:33:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73428 invoked by uid 99); 26 Jul 2007 02:33:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 19:33:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 19:33:33 -0700
Received: from host68.syd.nuix.com.au (host68.syd.nuix.com.au [192.168.222.68])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 8480B4A80AC
	for <java-user@lucene.apache.org>; Thu, 26 Jul 2007 12:30:02 +1000 (EST)
From: Daniel Noll <daniel@nuix.com>
To: java-user@lucene.apache.org
Subject: Re: Search for null
Date: Thu, 26 Jul 2007 12:32:56 +1000
User-Agent: KMail/1.9.7
References: <11746864.post@talk.nabble.com> <46A772FC.8000102@ai.sri.com> <1185383540.22328.11.camel@rosher.org>
In-Reply-To: <1185383540.22328.11.camel@rosher.org>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="windows-1252"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200707261232.56146.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Thursday 26 July 2007 03:12:20 daniel rosher wrote:
> In this case you should look at the source for RangeFilter.java.
>
> Using this you could create your own filter using TermEnum and TermDocs
> to find all documents that had some value for the field.

That's certainly the way to do it for speed.

For the least code you can probably do...

  BooleanFilter f = new BooleanFilter();
  f.add(new FilterClause(RangeFilter.More("field", ""),
                         BooleanClause.Occur.MUST_NOT));
  f = new CachingWrapperFilter(f);

Daniel

-- 
Daniel Noll
Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
Web: http://nuix.com/                               Fax: +61 2 9212 6902

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29405-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 26 03:39:01 2007
Return-Path: <java-user-return-29405-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96367 invoked from network); 26 Jul 2007 03:39:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jul 2007 03:39:00 -0000
Received: (qmail 34754 invoked by uid 500); 26 Jul 2007 03:38:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34530 invoked by uid 500); 26 Jul 2007 03:38:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34518 invoked by uid 99); 26 Jul 2007 03:38:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 20:38:55 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=MSGID_FROM_MTA_HEADER,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of dmitrytkach1@hotmail.com designates 65.54.246.144 as permitted sender)
Received: from [65.54.246.144] (HELO bay0-omc2-s8.bay0.hotmail.com) (65.54.246.144)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 20:38:53 -0700
Received: from hotmail.com ([65.54.169.79]) by bay0-omc2-s8.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.2668);
	 Wed, 25 Jul 2007 20:38:32 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Wed, 25 Jul 2007 20:38:32 -0700
Message-ID: <BAY114-DAV75FB1CC8B7A9563461B4294F20@phx.gbl>
Received: from 24.12.157.130 by BAY114-DAV7.phx.gbl with DAV;
	Thu, 26 Jul 2007 03:38:31 +0000
X-Originating-IP: [24.12.157.130]
X-Originating-Email: [dmitrytkach1@hotmail.com]
X-Sender: dmitrytkach1@hotmail.com
From: "Dmitry" <dmitrytkach1@hotmail.com>
To: <java-user@lucene.apache.org>
References: <20070720192740.9AC2D3E886E@f38.poczta.interia.pl> <359a92830707201310o1442bedembeb45051a4299eee@mail.gmail.com> <3F8F627A-CC84-4EC9-8159-336EF36335CE@ehatchersolutions.com> <359a92830707201445j6c269186j2b35330814e62b60@mail.gmail.com>
Subject: Displaying results in the order
Date: Wed, 25 Jul 2007 22:38:04 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3028
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
X-OriginalArrivalTime: 26 Jul 2007 03:38:32.0743 (UTC) FILETIME=[70964B70:01C7CF36]
X-Virus-Checked: Checked by ClamAV on apache.org

Is there a way to update a document in the Index without causing any change
to the order in which it comes up in searches?

thanks,
DT,
www.ejinz.com
Search everything
news, tech, movies, music


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29406-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 26 03:40:42 2007
Return-Path: <java-user-return-29406-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96767 invoked from network); 26 Jul 2007 03:40:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jul 2007 03:40:40 -0000
Received: (qmail 36661 invoked by uid 500); 26 Jul 2007 03:40:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36621 invoked by uid 500); 26 Jul 2007 03:40:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36610 invoked by uid 99); 26 Jul 2007 03:40:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 20:40:35 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=MSGID_FROM_MTA_HEADER,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of dmitrytkach1@hotmail.com designates 65.54.246.96 as permitted sender)
Received: from [65.54.246.96] (HELO bay0-omc1-s24.bay0.hotmail.com) (65.54.246.96)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 20:40:33 -0700
Received: from hotmail.com ([65.54.169.91]) by bay0-omc1-s24.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.2668);
	 Wed, 25 Jul 2007 20:40:12 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Wed, 25 Jul 2007 20:40:12 -0700
Message-ID: <BAY114-DAV196F8F593A7083CDCFFE8294F20@phx.gbl>
Received: from 24.12.157.130 by BAY114-DAV19.phx.gbl with DAV;
	Thu, 26 Jul 2007 03:40:06 +0000
X-Originating-IP: [24.12.157.130]
X-Originating-Email: [dmitrytkach1@hotmail.com]
X-Sender: dmitrytkach1@hotmail.com
From: "Dmitry" <dmitrytkach1@hotmail.com>
To: <java-user@lucene.apache.org>
References: <20070720192740.9AC2D3E886E@f38.poczta.interia.pl> <359a92830707201310o1442bedembeb45051a4299eee@mail.gmail.com> <3F8F627A-CC84-4EC9-8159-336EF36335CE@ehatchersolutions.com> <359a92830707201445j6c269186j2b35330814e62b60@mail.gmail.com>
Subject: Highlighter strategy in Lucene
Date: Wed, 25 Jul 2007 22:39:40 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3028
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
X-OriginalArrivalTime: 26 Jul 2007 03:40:12.0121 (UTC) FILETIME=[ABD22C90:01C7CF36]
X-Virus-Checked: Checked by ClamAV on apache.org

Waht kind of Highlighter strategy Lucene is using?

thanks,
Dt
www.ejinz.com
Search Engine for News

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29407-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 26 03:57:29 2007
Return-Path: <java-user-return-29407-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 820 invoked from network); 26 Jul 2007 03:57:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jul 2007 03:57:27 -0000
Received: (qmail 52416 invoked by uid 500); 26 Jul 2007 03:57:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52238 invoked by uid 500); 26 Jul 2007 03:57:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52227 invoked by uid 99); 26 Jul 2007 03:57:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 20:57:22 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=MSGID_FROM_MTA_HEADER,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of dmitrytkach1@hotmail.com designates 65.54.246.75 as permitted sender)
Received: from [65.54.246.75] (HELO bay0-omc1-s3.bay0.hotmail.com) (65.54.246.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 20:57:21 -0700
Received: from hotmail.com ([65.54.169.88]) by bay0-omc1-s3.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.2668);
	 Wed, 25 Jul 2007 20:57:00 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Wed, 25 Jul 2007 20:57:00 -0700
Message-ID: <BAY114-DAV16DE73F92F3E4D45A8C55294F20@phx.gbl>
Received: from 24.12.157.130 by BAY114-DAV16.phx.gbl with DAV;
	Thu, 26 Jul 2007 03:56:58 +0000
X-Originating-IP: [24.12.157.130]
X-Originating-Email: [dmitrytkach1@hotmail.com]
X-Sender: dmitrytkach1@hotmail.com
From: "Dmitry" <dmitrytkach1@hotmail.com>
To: <java-user@lucene.apache.org>
References: <20070720192740.9AC2D3E886E@f38.poczta.interia.pl> <359a92830707201310o1442bedembeb45051a4299eee@mail.gmail.com> <3F8F627A-CC84-4EC9-8159-336EF36335CE@ehatchersolutions.com> <359a92830707201445j6c269186j2b35330814e62b60@mail.gmail.com> <BAY114-DAV75FB1CC8B7A9563461B4294F20@phx.gbl>
Subject: Linear Hashing in Lucene?
Date: Wed, 25 Jul 2007 22:56:31 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3028
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
X-OriginalArrivalTime: 26 Jul 2007 03:57:00.0514 (UTC) FILETIME=[04DEBC20:01C7CF39]
X-Virus-Checked: Checked by ClamAV on apache.org

Hey,
Some common questions about Lucene.
1. does exist Ontology Wraper in Lucene implementation?
2. Does Lucene using Linear Hashing?

thnaks,
DT,
www.ejinz.com
Search news

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29408-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 26 06:28:33 2007
Return-Path: <java-user-return-29408-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48039 invoked from network); 26 Jul 2007 06:28:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jul 2007 06:28:29 -0000
Received: (qmail 17561 invoked by uid 500); 26 Jul 2007 06:28:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17526 invoked by uid 500); 26 Jul 2007 06:28:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17515 invoked by uid 99); 26 Jul 2007 06:28:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 23:28:22 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 23:28:20 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IDwpL-0000Cn-WA
	for java-user@lucene.apache.org; Wed, 25 Jul 2007 23:27:59 -0700
Message-ID: <11804824.post@talk.nabble.com>
Date: Wed, 25 Jul 2007 23:27:59 -0700 (PDT)
From: miztaken <manish@ccnep.com.np>
To: java-user@lucene.apache.org
Subject: Strange Error while deleting Documents from index while indexing.
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: manish@ccnep.com.np
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,
I am dumping the database tables into lucene documents.
I am doing like this:

1. Get the rowset from database to be stored as Lucene Document.
2. Open IndexReader and check if they are already indexed.
   If Indexed, delete them and add the new rowset.
   Continue this till the end
3. Close IndexReader
4. Open IndexWriter
5. Write the same rowset in the index.
6. delete the rowset from database..
7. Repeat the same process[step 1 - step 7 ] till there are records in
database.


Like this i am doing Indexing and deletion.
Some key points:
1. New indexWriter is opened when there is not instance of indexwriter
available,but if available it makes use of the same IndexWriter. i.e. My
index Writer opens once in Step 4 and after that the whole process makes use
of it.
2. But i open indexReader for each deletion and close.
3. I optimize IndexWriter after certain threshold is crossed.

Now my problem is:
In the first deletion of document (if present) in step 2 and closing of
indexreader in step 3. I get no error.
But in the second loop, i get the error while trying to close the
IndexReader.

The error is : 
Unable to cast object of type 'System.Collections.DictionaryEntry' to type
'System.String'.

Stack Trace:
   at Lucene.Net.Index.IndexFileDeleter.DeleteFiles(ArrayList files)
   at Lucene.Net.Index.IndexFileDeleter.DeleteFiles()
   at Lucene.Net.Index.IndexFileDeleter.CommitPendingFiles()
   at Lucene.Net.Index.IndexReader.Commit()
   at Lucene.Net.Index.IndexReader.Close()
   at QueryDatabaseForIndexing.Program.Main(String[] args) in E:\Test
Applications\ORS Lucene Developments\July 25\
TotalIndexingAndSearching_25_july\T otalIndexingAndSearching\  
QueryDatabaseForIndexing \Program2.cs:line 159

I dont know whats the cause of this error.

I am in real need of help.
Please help me find error.



-- 
View this message in context: http://www.nabble.com/Strange-Error-while-deleting-Documents-from-index-while-indexing.-tf4149570.html#a11804824
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29409-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 26 06:54:15 2007
Return-Path: <java-user-return-29409-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55305 invoked from network); 26 Jul 2007 06:54:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jul 2007 06:54:14 -0000
Received: (qmail 54234 invoked by uid 500); 26 Jul 2007 06:54:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54197 invoked by uid 500); 26 Jul 2007 06:54:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54185 invoked by uid 99); 26 Jul 2007 06:54:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 23:54:08 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of stachoo@gmail.com designates 209.85.132.244 as permitted sender)
Received: from [209.85.132.244] (HELO an-out-0708.google.com) (209.85.132.244)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jul 2007 23:54:06 -0700
Received: by an-out-0708.google.com with SMTP id c5so91177anc
        for <java-user@lucene.apache.org>; Wed, 25 Jul 2007 23:53:45 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        b=BqxKX/mkI5Mp+L8q2CBfzh8R4BrN8LdsvSNSYAHcqkQKqplPK1Lsg4c5qUscjJ2G2SKAfWf4K1BAa9N+XRRZNe9Tao0q/eXOP+85bFy7hVeY7pr6Zd8sQ0HHG2wnDZuIcgaOO8C28fQfZmOpoEejHEWhgVem6Nmf2FW62we8g3Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        b=OPy/ce6MKpGzjpmwBNBq8zcAVtmpYNWacvx8d3UjcwPQ9aho2UImA+2H3M3f95s+xLg3O78mp7hB77SSk27K3HozSLrHLvWbsPD60jwfvuW7VdzTcw33/UyAUoB9LimYImsShYqBaEH9ZdBtQ8gb8hnYhhxgL6xgK+Ag4jpXUPY=
Received: by 10.100.120.5 with SMTP id s5mr902176anc.1185432825438;
        Wed, 25 Jul 2007 23:53:45 -0700 (PDT)
Received: by 10.100.124.9 with HTTP; Wed, 25 Jul 2007 23:53:45 -0700 (PDT)
Message-ID: <5af106d60707252353l6981dbcarf8d750ee26f2694c@mail.gmail.com>
Date: Thu, 26 Jul 2007 08:53:45 +0200
From: "Stanislaw Osinski" <stanislaw.osinski@man.poznan.pl>
Sender: stachoo@gmail.com
To: java-user@lucene.apache.org
Subject: Re: StandardTokenizer is slowing down highlighting a lot
In-Reply-To: <c68e39170707251344se69149bxefcf0ad270473dcc@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_176062_29762889.1185432825043"
References: <652776090707181728t416b8839x72fef70d45d6824d@mail.gmail.com>
	 <469EB70C.3040907@gmail.com>
	 <5af106d60707250419g57f1549cvaf01087b9f7027b6@mail.gmail.com>
	 <c68e39170707251344se69149bxefcf0ad270473dcc@mail.gmail.com>
X-Google-Sender-Auth: dcb81b71e024be88
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_176062_29762889.1185432825043
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

On 25/07/07, Yonik Seeley <yonik@apache.org> wrote:
>
> On 7/25/07, Stanislaw Osinski <stanislaw.osinski@man.poznan.pl> wrote:
> > JavaCC is slow indeed.
>
> JavaCC is a very fast parser for a large document... the issue is
> small fields and JavaCC's use of an exception for flow control at the
> end of a value.  As JVMs have advanced, exception-as-control-flow as
> gotten comparably slower.


In Carrot2 we tokenize mostly very short documents (search results), so in
this context JFlex proved much faster. I did a very rough performance test
of Highlighter using JFlex and JavaCC-generated analyzers with medium-sized
documents (up to ~1kB), and JFlex was still faster. What size would a
'large' document be?

Does JFlex have a jar associated with it?  It's GPL (although you can
> freely use the files it generates under any license), so if there were
> other non-generated files required, we wouldn't be able to incorporate
> them.


You need JFlex jar only to generate the tokenizer (one Java class). The
generated tokenizer is standalone and doesn't need the JFlex jar to run.

Staszek

------=_Part_176062_29762889.1185432825043--

From java-user-return-29410-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 26 07:07:54 2007
Return-Path: <java-user-return-29410-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58775 invoked from network); 26 Jul 2007 07:07:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jul 2007 07:07:54 -0000
Received: (qmail 75072 invoked by uid 500); 26 Jul 2007 07:07:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74984 invoked by uid 500); 26 Jul 2007 07:07:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74973 invoked by uid 99); 26 Jul 2007 07:07:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jul 2007 00:07:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [68.142.229.217] (HELO smtp103.biz.mail.re2.yahoo.com) (68.142.229.217)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 26 Jul 2007 00:07:45 -0700
Received: (qmail 96144 invoked from network); 26 Jul 2007 07:07:23 -0000
Received: from unknown (HELO toto) (elie.choueiri@elementn.com@194.126.31.57 with login)
  by smtp103.biz.mail.re2.yahoo.com with SMTP; 26 Jul 2007 07:07:21 -0000
X-YMail-OSG: AJTNhfMVM1kgCRPk3BhD9oAzPGS1UtHH87Q5Bhd.ixiYrwOFAfwqdRboJJK1sqULoeWmuw_iUiENABLIv_ui0YR2jQ--
From: "Elie Choueiri" <elie.choueiri@elementn.com>
To: <java-user@lucene.apache.org>
Subject: RE: Multiple Languages with Lucene (Arabic & English)
Date: Thu, 26 Jul 2007 10:06:39 +0300
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
In-Reply-To: <359a92830707240752x6f2a201dg258821133b88c8b1@mail.gmail.com>
thread-index: AcfOAltHqRsl1hVQQhqXLMrZKEuQygBUPD0g
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org
Message-Id: <20070726070745.C260810FB015@herse.apache.org>


Thanks for the clarification, I'll play around with it and head back if
things don't work according to plan.

Thanks again,
e

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com] 
Sent: Tuesday, July 24, 2007 5:53 PM
To: java-user@lucene.apache.org
Subject: Re: Multiple Languages with Lucene (Arabic & English)

You'll also find lots of discussion about indexing multiple
languages if you search the mail archive for things like multiple
language.

I think one thing you're missing is that Lucene indexes data however
you tell it to. You have both total control over and total responsibility
for how things are indexed. You could, say, determine that a document
was English, and index all of the fields like
title_english
text_english
etc.. and then write that document out to your index. Say the next
document was Arabic. You could index
title_arabic
text_arabic
and write that document to your index. Now if you're searching
in Arabic, you search on the title_arabic and text_arabic fields and
you'd never get any hits on English documents.

Not saying you want to do it this way, but you need to be clear that
Lucene well do what you tell it to. Nothing more and nothing less <G>.

Best
Erick


On 7/24/07, Grant Ingersoll <gsingers@apache.org> wrote:
>
>
> On Jul 24, 2007, at 3:21 AM, Elie Choueiri wrote:
>
> > Hi
> >
> >
> >
> > I'm new to searching and am trying to use Lucene to search English
> > & Arabic
> > documents.  I've got a bunch of questions (hopefully you'll find some
> > interesting!) and am hoping someone's gone through some of them and
> > has some
> > answers for me!
> >
> >
> >
> > First, do I have to worry about the Arabic Analyzer overwriting the
> > index
> > files of the English analyzer? (Or vice versa?)
> >
> > i.e. When I index documents a second time, will data be overwritten?
> >
>
> That depends whether you tell Lucene to create a new index or not.
> See the IndexWriter API for your options.
>
> >
> >
> > I could just store the index files for different languages in a
> > different
> > location, but it's good to know and I'd rather not if I don't have
> > to :)
> >
> >
> >
> > Also, on the same note, if I'm indexing documents that contain both
> > Arabic
> > and English, will the index files created by the English (or Arabic)
> > analyzer contain garbage or become corrupted because of the language
> > difference?
> >
>
> I don't know if it will be corrupted, but probably won't be all that
> useful, either. You may find the PerFieldAnalyzerWrapper to be helpful.
>
> >
> >
> > It is possible to index (using an English/Latin/Standard analyzer)
> > a file
> > that contains both english and arabic words, and expect the
> > searches in
> > English using the same analyzer to be valid, right?
>
> I should think so.  I don't recall running across this case too much,
> but do remember the reverse, Arabic files w/ some English and the
> Arabic analyzer usually just skipped over the English leaving it
> intact, thus searching those English terms in the Arabic index worked
> just fine.
>
> >
> >
> >
> > In an Arabic document with a single English word (the name of a
> > corporation,
> > for example) will the English word even be indexed and located by a
> > search?
> > I could test something like this with a small subset of documents,
> > but I
> > doubt the actual usefulness of a test with such a tiny (relatively
> > speaking!) amount of data.. I know we can tell Lucene to store the
> > full copy
> > of the document, but does that affect the index itself?
> >
> >
> >
> > Finally, and here's the tricky one, are searches that contain both
> > English
> > and Arabic words valid?  My limited understanding of the way search
> > engines
> > work tells me the search analyzes the context of words as well as
> > statistical data to decide the relevance of hits, is this still
> > valid for
> > multi-lingual searches?
> >
> >
>
> They are valid, just not sure how useful, but that is for your app to
> decide.  I guess if your users know both Arabic and English, it
> probably isn't a big deal.  Lucene just tries to match up what is in
> the query w/ what is in the index, so if you have validly analyzed
> tokens in both the query and the index then Lucene should find them.
>
> HTH,
> Grant
>
> --------------------------
> Grant Ingersoll
> Center for Natural Language Processing
> http://www.cnlp.org/tech/lucene.asp
>
> Read the Lucene Java FAQ at http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

-----Original Message-----
From: Grant Ingersoll [mailto:gsingers@apache.org] 
Sent: Tuesday, July 24, 2007 3:11 PM
To: java-user@lucene.apache.org
Subject: Re: Multiple Languages with Lucene (Arabic & English)


On Jul 24, 2007, at 3:21 AM, Elie Choueiri wrote:

> Hi
>
>
>
> I'm new to searching and am trying to use Lucene to search English  
> & Arabic
> documents.  I've got a bunch of questions (hopefully you'll find some
> interesting!) and am hoping someone's gone through some of them and  
> has some
> answers for me!
>
>
>
> First, do I have to worry about the Arabic Analyzer overwriting the  
> index
> files of the English analyzer? (Or vice versa?)
>
> i.e. When I index documents a second time, will data be overwritten?
>

That depends whether you tell Lucene to create a new index or not.   
See the IndexWriter API for your options.

>
>
> I could just store the index files for different languages in a  
> different
> location, but it's good to know and I'd rather not if I don't have  
> to :)
>
>
>
> Also, on the same note, if I'm indexing documents that contain both  
> Arabic
> and English, will the index files created by the English (or Arabic)
> analyzer contain garbage or become corrupted because of the language
> difference?
>

I don't know if it will be corrupted, but probably won't be all that  
useful, either. You may find the PerFieldAnalyzerWrapper to be helpful.

>
>
> It is possible to index (using an English/Latin/Standard analyzer)  
> a file
> that contains both english and arabic words, and expect the  
> searches in
> English using the same analyzer to be valid, right?

I should think so.  I don't recall running across this case too much,  
but do remember the reverse, Arabic files w/ some English and the  
Arabic analyzer usually just skipped over the English leaving it  
intact, thus searching those English terms in the Arabic index worked  
just fine.

>
>
>
> In an Arabic document with a single English word (the name of a  
> corporation,
> for example) will the English word even be indexed and located by a  
> search?
> I could test something like this with a small subset of documents,  
> but I
> doubt the actual usefulness of a test with such a tiny (relatively
> speaking!) amount of data.. I know we can tell Lucene to store the  
> full copy
> of the document, but does that affect the index itself?
>
>
>
> Finally, and here's the tricky one, are searches that contain both  
> English
> and Arabic words valid?  My limited understanding of the way search  
> engines
> work tells me the search analyzes the context of words as well as
> statistical data to decide the relevance of hits, is this still  
> valid for
> multi-lingual searches?
>
>

They are valid, just not sure how useful, but that is for your app to  
decide.  I guess if your users know both Arabic and English, it  
probably isn't a big deal.  Lucene just tries to match up what is in  
the query w/ what is in the index, so if you have validly analyzed  
tokens in both the query and the index then Lucene should find them.

HTH,
Grant

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

Read the Lucene Java FAQ at http://wiki.apache.org/lucene-java/LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29411-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 26 12:04:16 2007
Return-Path: <java-user-return-29411-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85230 invoked from network); 26 Jul 2007 12:04:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jul 2007 12:04:14 -0000
Received: (qmail 19567 invoked by uid 500); 26 Jul 2007 12:04:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19532 invoked by uid 500); 26 Jul 2007 12:04:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19521 invoked by uid 99); 26 Jul 2007 12:04:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jul 2007 05:04:08 -0700
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of arne.muller@gmail.com designates 64.233.184.235 as permitted sender)
Received: from [64.233.184.235] (HELO wr-out-0506.google.com) (64.233.184.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jul 2007 05:04:05 -0700
Received: by wr-out-0506.google.com with SMTP id 41so237267wry
        for <java-user@lucene.apache.org>; Thu, 26 Jul 2007 05:03:45 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=S+TdH9d2Uvcy2DzfET/2X6KYpqlAQ6pDkq9SZb7EVJmwF3bB2X004WD9vrVQivSeuvZgt2RvmYTr9M19SWi9uef0W5AkK//fBUgpwhEUp6ZJK/TZ7mWri7nDhY62FcvdIweq4QTIOSRvWXvht8VN+hXSRwl1/K+UGU6+YFc83oA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=lx3hRrP34jqckRKcUSv6Gc9HlW4JPHXEk8TBQMEKXwNnMxFJzTASWPcbtZIzi2zHBgQgSF6x6gl+BT9Wi3G9QUztHlUZXDfmcYFqqwSjToTpNCGFPRnja7XgNLHWAI4AJODe4QwapM0/dAEuAYdoittRKcC11S0ioA2vO5IN2h4=
Received: by 10.100.95.19 with SMTP id s19mr1166991anb.1185451424940;
        Thu, 26 Jul 2007 05:03:44 -0700 (PDT)
Received: by 10.100.42.2 with HTTP; Thu, 26 Jul 2007 05:03:44 -0700 (PDT)
Message-ID: <6caff30c0707260503j6afeb230kdaea65327c1b1855@mail.gmail.com>
Date: Thu, 26 Jul 2007 14:03:44 +0200
From: "Arne Muller" <arne.muller@gmail.com>
To: Lucene <java-user@lucene.apache.org>
Subject: Solr newbe
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_209431_3689825.1185451424902"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_209431_3689825.1185451424902
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello,

I've just started with Lucene to index a file server and aiming to index
lotus notes and some tables from relational databases.

After some research, I came (so far) to the conclusion that I'm re-inventing
the wheel, and that it may be better to use solr or nutch as lucene
front-ends.

I was wondering if the following workflow is kind of state of the art, or
whether you've something to comment or add:

Since there web-crawling is not necessary (my documents are on a file
server), I was thinking of using solr and to implement a basic program that
traverses the file system as a scheduled task (or cron job). The program
will not "crawl", i.e. it will not follow any references within the
documents to continue its search elsewhere. It just processes each found
file, and if the file's modification date is newer than 24h it adds it to
solr.

Most of the files are doc, xls, ppt and pdf. My "traverser" will therefore
use apache POI and PDFBox to extract the contents from the documents,
creating an appropriate XML stream with the solr "add" tag and sending it to
solr.

I was wondering if there are already tools for this kind of task available
(this time I'd like to avoid reinventing the wheel ;-)?

   thanks a lot for your help,
   +kind regards,

  Arne

------=_Part_209431_3689825.1185451424902--

From java-user-return-29412-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 26 12:34:33 2007
Return-Path: <java-user-return-29412-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94921 invoked from network); 26 Jul 2007 12:34:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jul 2007 12:34:33 -0000
Received: (qmail 65398 invoked by uid 500); 26 Jul 2007 12:34:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65363 invoked by uid 500); 26 Jul 2007 12:34:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65352 invoked by uid 99); 26 Jul 2007 12:34:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jul 2007 05:34:27 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 64.233.184.235 as permitted sender)
Received: from [64.233.184.235] (HELO wr-out-0506.google.com) (64.233.184.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jul 2007 05:34:25 -0700
Received: by wr-out-0506.google.com with SMTP id 41so243210wry
        for <java-user@lucene.apache.org>; Thu, 26 Jul 2007 05:34:04 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=e7MxsW/rkgDnt+mVp18l+RqCjf6HAmMpMqhqI02CxlcCbbPbTYlWspw7TsOhO4R2rgHbXP0TDKaBQnA+YFsm4wHAa8KUuaV2zyqjCUFwgNOJujXSBcyhwB9nBu5MI1Ml0VkQSSao7zXrT2CzNCG7F1yXXgXA1Tc7fDIQkv4yDbU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=D5QN+0M8uJMfJkH8spedD6ciiflj0qH+i4CwyEdhXlajVI4xLfieGIASv95z7KRHA3UbEUIpJGtvc3LR1B1F1T2+gcmSGw3c/M26dMjjXu3FhjQiBtXuF+/oF8+I4chjVHoRzzNDZmoIs5tfasFaQWCA09KPY3ag8Dt7ZieILng=
Received: by 10.100.174.16 with SMTP id w16mr1180461ane.1185453243831;
        Thu, 26 Jul 2007 05:34:03 -0700 (PDT)
Received: by 10.100.38.5 with HTTP; Thu, 26 Jul 2007 05:34:03 -0700 (PDT)
Message-ID: <ab0709bf0707260534i435f1647s6ebead1ab99d5e18@mail.gmail.com>
Date: Thu, 26 Jul 2007 08:34:03 -0400
From: "Mark Miller" <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Highlighter strategy in Lucene
In-Reply-To: <BAY114-DAV196F8F593A7083CDCFFE8294F20@phx.gbl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_208608_9502115.1185453243818"
References: <20070720192740.9AC2D3E886E@f38.poczta.interia.pl>
	 <359a92830707201310o1442bedembeb45051a4299eee@mail.gmail.com>
	 <3F8F627A-CC84-4EC9-8159-336EF36335CE@ehatchersolutions.com>
	 <359a92830707201445j6c269186j2b35330814e62b60@mail.gmail.com>
	 <BAY114-DAV196F8F593A7083CDCFFE8294F20@phx.gbl>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_208608_9502115.1185453243818
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

There has been a lot of Highlighter discussion on the list. Search the list
at nabble or gossamer-threads and you will find a lot of info.

- Mark

On 7/25/07, Dmitry <dmitrytkach1@hotmail.com> wrote:
>
> Waht kind of Highlighter strategy Lucene is using?
>
> thanks,
> Dt
> www.ejinz.com
> Search Engine for News
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_208608_9502115.1185453243818--

From java-user-return-29413-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 26 12:48:44 2007
Return-Path: <java-user-return-29413-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99371 invoked from network); 26 Jul 2007 12:48:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jul 2007 12:48:43 -0000
Received: (qmail 8888 invoked by uid 500); 26 Jul 2007 12:48:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8668 invoked by uid 500); 26 Jul 2007 12:48:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8657 invoked by uid 99); 26 Jul 2007 12:48:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jul 2007 05:48:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [208.78.78.2] (HELO AUGEXCH.ghsinc.com) (208.78.78.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jul 2007 05:48:34 -0700
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Solr newbe
X-MimeOLE: Produced By Microsoft Exchange V6.5
Date: Thu, 26 Jul 2007 08:48:13 -0400
Message-ID: <214FF1B5E37DC84D9968F0F82FBB112501A710FD@AUGEXCH.ghsinc.com>
In-Reply-To: <6caff30c0707260503j6afeb230kdaea65327c1b1855@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Solr newbe
thread-index: AcfPfRMdubRTeT5+RWKemDZt1HrijwABau3g
From: "Darren Hartford" <dhartford@ghsinc.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

One side-note is various content management tools already handle a lot
of data extraction (POI/PDFBox/etc).

In the case of Jakarta Slide and Apache Jackrabbit, both use Lucene
under the covers to index this data.

Not sure if you want to take the approach of putting your documents as
'managed' under a content management tool, but that's another avenue to
investigate.

-D=20

> -----Original Message-----
> From: Arne Muller [mailto:arne.muller@gmail.com]=20
> Sent: Thursday, July 26, 2007 8:04 AM
> To: Lucene
> Subject: Solr newbe
>=20
> Hello,
>=20
> I've just started with Lucene to index a file server and=20
> aiming to index lotus notes and some tables from relational databases.
>=20
> After some research, I came (so far) to the conclusion that=20
> I'm re-inventing the wheel, and that it may be better to use=20
> solr or nutch as lucene front-ends.
>=20
> I was wondering if the following workflow is kind of state of=20
> the art, or whether you've something to comment or add:
>=20
> Since there web-crawling is not necessary (my documents are=20
> on a file server), I was thinking of using solr and to=20
> implement a basic program that traverses the file system as a=20
> scheduled task (or cron job). The program will not "crawl",=20
> i.e. it will not follow any references within the documents=20
> to continue its search elsewhere. It just processes each=20
> found file, and if the file's modification date is newer than=20
> 24h it adds it to solr.
>=20
> Most of the files are doc, xls, ppt and pdf. My "traverser"=20
> will therefore use apache POI and PDFBox to extract the=20
> contents from the documents, creating an appropriate XML=20
> stream with the solr "add" tag and sending it to solr.
>=20
> I was wondering if there are already tools for this kind of=20
> task available (this time I'd like to avoid reinventing the wheel ;-)?
>=20
>    thanks a lot for your help,
>    +kind regards,
>=20
>   Arne
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29414-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 26 12:50:18 2007
Return-Path: <java-user-return-29414-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99733 invoked from network); 26 Jul 2007 12:50:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jul 2007 12:50:16 -0000
Received: (qmail 14135 invoked by uid 500); 26 Jul 2007 12:50:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14096 invoked by uid 500); 26 Jul 2007 12:50:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14085 invoked by uid 99); 26 Jul 2007 12:50:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jul 2007 05:50:09 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.233 as permitted sender)
Received: from [66.249.82.233] (HELO wx-out-0506.google.com) (66.249.82.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jul 2007 05:50:07 -0700
Received: by wx-out-0506.google.com with SMTP id i28so394334wxd
        for <java-user@lucene.apache.org>; Thu, 26 Jul 2007 05:49:47 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=dINxgFkHw7hUT7tKeMg6/msUfDyv7BzW86CEF96TSO1WJhskgqR1mqcZKeqMiGFB9mv4eXh370gq2UMsMkebfoiDTaJ7WXpalNFBx79lRF4il+Dd6hm8/VPErDFzOyWt6SIeHt28P+LwBTwcVoYCbuiYJe1QMcIbFezRPidSauM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=lPmlxsDGFBA5wU0Gq6TRHKpXChJtwwTPfh5ZPgv0CIhijgSJEyAYDJ63rMafzMkMoMWcPp6Yv84ownjVrsq6fWbsMCwEZ7OvZqEHni6nq8QylX2Fl5Su6LhWHorPx7qOKR/MwVjwGa0UhYd6CpHtHM3NzXnjmLJjXwJrEznfyfw=
Received: by 10.100.108.11 with SMTP id g11mr1205748anc.1185454186916;
        Thu, 26 Jul 2007 05:49:46 -0700 (PDT)
Received: by 10.100.38.5 with HTTP; Thu, 26 Jul 2007 05:49:46 -0700 (PDT)
Message-ID: <ab0709bf0707260549v5f4446afh42318a73aba02341@mail.gmail.com>
Date: Thu, 26 Jul 2007 08:49:46 -0400
From: "Mark Miller" <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Delete corrupted doc
In-Reply-To: <a8d89b3b0707251138t7b2f4611kc390e198d7246bbc@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_208864_97734.1185454186892"
References: <a8d89b3b0707251138t7b2f4611kc390e198d7246bbc@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_208864_97734.1185454186892
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

This may not be very elegant, but if you are really in a jam, here is what =
I
would try:

Check out a copy of Lucene. Modify the isDeleted method on both MultiReader
and SegmentReader so that it returns true if the docid passed in is the id
in question (if it is not the id, then just have the method do what it
would). This will keep Lucene from looking in the deleted bitvector and
causing an arrayoutbounds exception...instead it will just return that the
bad id has been removed. Then run a full optimize. When the new segments ar=
e
created, your bad doc should be ignored and not make it into the new
generation.

Kind of a pain, but if you really cannot reindex...

- Mark

On 7/25/07, Rafael Rossini <rafael.rossini@gmail.com> wrote:
>
> Hi guys,
>
>     Is there a way of deleting a document that, because of some
> corruption,
> got and docID larger than the maxDoc() ? I=B4m trying to do this but I ge=
t
> this Exception:
>
> Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: Arra=
y
> index out of range: 106577
>    at org.apache.lucene.util.BitVector.set(BitVector.java:53)
>    at org.apache.lucene.index.SegmentReader.doDelete (SegmentReader.java
> :301)
>    at org.apache.lucene.index.IndexReader.deleteDocument(IndexReader.java
> :674)
>    at org.apache.lucene.index.MultiReader.doDelete(MultiReader.java:125)
>    at org.apache.lucene.index.IndexReader.deleteDocument (IndexReader.jav=
a
> :674)
>    at teste.DeleteError.main(DeleteError.java:9)
>
> Thanks
>

------=_Part_208864_97734.1185454186892--

From java-user-return-29415-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 26 13:00:02 2007
Return-Path: <java-user-return-29415-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3638 invoked from network); 26 Jul 2007 13:00:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jul 2007 12:59:59 -0000
Received: (qmail 39675 invoked by uid 500); 26 Jul 2007 12:59:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39633 invoked by uid 500); 26 Jul 2007 12:59:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39622 invoked by uid 99); 26 Jul 2007 12:59:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jul 2007 05:59:52 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.225 as permitted sender)
Received: from [66.249.82.225] (HELO wx-out-0506.google.com) (66.249.82.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jul 2007 05:59:51 -0700
Received: by wx-out-0506.google.com with SMTP id i28so396268wxd
        for <java-user@lucene.apache.org>; Thu, 26 Jul 2007 05:59:30 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=chtbYU+jpTNBBF4N5g7Dt7S6Wg+gNVAePn+kQrSk77ef1vX5c0BpDUVj4RMasANcll1aC7Txn+v0P5u5Y+LLu7o7uVpsFnxukpFdhqGPh9IpwAOklAAkmAyrGW931BUUyEcErIg5a+lC8z24s1s5d5oeB0ypsoKWa2G0pv9dW2o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=KwVKd6uqCvgzUZ3mQBqmPEGkk1y3vTBuIOVTBjg3UMaaAHue3xadVz3FibU4hNt7Dv4vEjn1CezGJ3xbVTXZueGphfx7XphE7aCW2ek0aZkK5qcocTUkmZKo+mSVSatqFRuQgq8Es6RVOUXRnlZuoVbdErOXKAY8Kgo4f+EJaVY=
Received: by 10.100.106.5 with SMTP id e5mr1214466anc.1185454770217;
        Thu, 26 Jul 2007 05:59:30 -0700 (PDT)
Received: by 10.100.38.5 with HTTP; Thu, 26 Jul 2007 05:59:30 -0700 (PDT)
Message-ID: <ab0709bf0707260559o26d48480wf8121fa7ec9d8bf@mail.gmail.com>
Date: Thu, 26 Jul 2007 08:59:30 -0400
From: "Mark Miller" <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Delete corrupted doc
In-Reply-To: <a8d89b3b0707251138t7b2f4611kc390e198d7246bbc@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_209004_22453143.1185454770169"
References: <a8d89b3b0707251138t7b2f4611kc390e198d7246bbc@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_209004_22453143.1185454770169
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

You know, on second though, a merge shouldn't even try to access a doc >
maxdoc (i think). Have you just tried an optimize?

On 7/25/07, Rafael Rossini <rafael.rossini@gmail.com> wrote:
>
> Hi guys,
>
>     Is there a way of deleting a document that, because of some
> corruption,
> got and docID larger than the maxDoc() ? I=B4m trying to do this but I ge=
t
> this Exception:
>
> Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: Arra=
y
> index out of range: 106577
>    at org.apache.lucene.util.BitVector.set(BitVector.java:53)
>    at org.apache.lucene.index.SegmentReader.doDelete (SegmentReader.java
> :301)
>    at org.apache.lucene.index.IndexReader.deleteDocument(IndexReader.java
> :674)
>    at org.apache.lucene.index.MultiReader.doDelete(MultiReader.java:125)
>    at org.apache.lucene.index.IndexReader.deleteDocument (IndexReader.jav=
a
> :674)
>    at teste.DeleteError.main(DeleteError.java:9)
>
> Thanks
>

------=_Part_209004_22453143.1185454770169--

From java-user-return-29416-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 26 13:08:54 2007
Return-Path: <java-user-return-29416-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7554 invoked from network); 26 Jul 2007 13:08:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jul 2007 13:08:53 -0000
Received: (qmail 62107 invoked by uid 500); 26 Jul 2007 13:08:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62078 invoked by uid 500); 26 Jul 2007 13:08:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62067 invoked by uid 99); 26 Jul 2007 13:08:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jul 2007 06:08:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jul 2007 06:08:45 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 3E1AD30EFC1A; Thu, 26 Jul 2007 07:08:25 -0600 (MDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [128.143.193.70] (d-128-193-70.bootp.Virginia.EDU [128.143.193.70])
	by ehatchersolutions.com (Postfix) with ESMTP id BA28430EFC19
	for <java-user@lucene.apache.org>; Thu, 26 Jul 2007 07:08:21 -0600 (MDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <7a14509e0707251405n1a5891e7m5df182ddf0bfa22e@mail.gmail.com>
References: <7a14509e0707251405n1a5891e7m5df182ddf0bfa22e@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <D5F16198-29F9-4E33-9175-89D87EF4D14C@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Assembling a query from multiple fields
Date: Thu, 26 Jul 2007 09:08:18 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1


On Jul 25, 2007, at 5:05 PM, Joe Attardi wrote:
> As far as I can tell, I basically have two options:
> (1) Manually prepend the field identifier to the query text, for  
> example:
>          String fullQuery = field + ":" + queryText;
>     then parse this query normally with QueryParser, OR
> (2) Since I know it is only going to be searching one term,  
> manually create
> a TermQuery with a Term object representing what the user typed in,  
> for
> example:
>          Query query = new TermQuery(new Term(field, queryText));
>
> Is there any advantage or disadvantage to any of these, or is one  
> preferable
> over the other? My gut tells me that directly creating the  
> TermQuery is more
> efficient since it doesn't have to perform parsing, but I'm not sure.

I recommend constructing the Query manually whenever possible to  
avoid the possibility of QueryParser escaping or other syntax getting  
in the way.  The only note to that is to be sure that the terms you  
pass to things like TermQuery are in the same state as they got  
indexed (lowercased, stemmed, whatever).  You can manually run  
through an Analyzer if you need to get the terms normalized in some  
fashion.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29417-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 26 13:15:13 2007
Return-Path: <java-user-return-29417-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9530 invoked from network); 26 Jul 2007 13:15:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jul 2007 13:15:11 -0000
Received: (qmail 81933 invoked by uid 500); 26 Jul 2007 13:15:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81796 invoked by uid 500); 26 Jul 2007 13:15:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81743 invoked by uid 99); 26 Jul 2007 13:15:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jul 2007 06:15:01 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of askar.zaidi@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jul 2007 06:14:59 -0700
Received: by ug-out-1314.google.com with SMTP id c2so623350ugf
        for <java-user@lucene.apache.org>; Thu, 26 Jul 2007 06:14:38 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Wqj9jQvmfvQ4Sl4NuyleF8yKePotRD/PsnvzzkWm0fysxFHZaGwsCkloPvFii+a0Oa+XDJBpo1hrl8qeTBxF6bPx/pmhqSOoWNYIC/AlHSUNazu9gu5dg1VFxFP14zKhiZEsckEEu+hB6EzqqrZd7FF5PWhlMpBCm53g7DiiYcs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=mUfo8ibgFz+bW+Y1j78yNorSPdcx8AfucmO9OUs1UM9MeEk6gkpE/6Up03WrjHHP7XFPKivR9B9JDx89KW/mxVCNLAUG/9Im48ShQo62vBku7H7lf/3VEiHv92Oi61FXT6TwBMsk0NdjWUhy28ktwGePJLY3i5vInx7PZOH7cyI=
Received: by 10.67.15.15 with SMTP id s15mr2160101ugi.1185455678102;
        Thu, 26 Jul 2007 06:14:38 -0700 (PDT)
Received: by 10.66.251.15 with HTTP; Thu, 26 Jul 2007 06:14:38 -0700 (PDT)
Message-ID: <c0c0e1d40707260614r5dae7011kf3865947676dec08@mail.gmail.com>
Date: Thu, 26 Jul 2007 09:14:38 -0400
From: "Askar Zaidi" <askar.zaidi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Assembling a query from multiple fields
In-Reply-To: <D5F16198-29F9-4E33-9175-89D87EF4D14C@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2915_25862036.1185455678056"
References: <7a14509e0707251405n1a5891e7m5df182ddf0bfa22e@mail.gmail.com>
	 <D5F16198-29F9-4E33-9175-89D87EF4D14C@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2915_25862036.1185455678056
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I did this yesterday. Manually appended an extra field to the query. It
works fine.

On 7/26/07, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>
>
> On Jul 25, 2007, at 5:05 PM, Joe Attardi wrote:
> > As far as I can tell, I basically have two options:
> > (1) Manually prepend the field identifier to the query text, for
> > example:
> >          String fullQuery = field + ":" + queryText;
> >     then parse this query normally with QueryParser, OR
> > (2) Since I know it is only going to be searching one term,
> > manually create
> > a TermQuery with a Term object representing what the user typed in,
> > for
> > example:
> >          Query query = new TermQuery(new Term(field, queryText));
> >
> > Is there any advantage or disadvantage to any of these, or is one
> > preferable
> > over the other? My gut tells me that directly creating the
> > TermQuery is more
> > efficient since it doesn't have to perform parsing, but I'm not sure.
>
> I recommend constructing the Query manually whenever possible to
> avoid the possibility of QueryParser escaping or other syntax getting
> in the way.  The only note to that is to be sure that the terms you
> pass to things like TermQuery are in the same state as they got
> indexed (lowercased, stemmed, whatever).  You can manually run
> through an Analyzer if you need to get the terms normalized in some
> fashion.
>
>         Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_2915_25862036.1185455678056--

From java-user-return-29418-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 26 13:20:47 2007
Return-Path: <java-user-return-29418-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12193 invoked from network); 26 Jul 2007 13:20:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jul 2007 13:20:45 -0000
Received: (qmail 95084 invoked by uid 500); 26 Jul 2007 13:20:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95033 invoked by uid 500); 26 Jul 2007 13:20:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95015 invoked by uid 99); 26 Jul 2007 13:20:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jul 2007 06:20:39 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=RCVD_IN_SORBS_WEB
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [213.162.48.15] (HELO soufre.accelance.net) (213.162.48.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jul 2007 06:20:37 -0700
Received: from [192.168.2.156] (corp-gw.accelance.net [213.162.48.17])
	by soufre.accelance.net (Postfix) with ESMTP id 9E37D5E16
	for <java-user@lucene.apache.org>; Thu, 26 Jul 2007 15:20:14 +0200 (CEST)
Message-ID: <46A89F8D.4030704@garambrogne.net>
Date: Thu, 26 Jul 2007 15:20:13 +0200
From: Mathieu Lecarme <mathieu@garambrogne.net>
User-Agent: Thunderbird 1.5.0.12 (X11/20070604)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: MoreLikeThis for multiple documents
References: <46A79EBF.4070500@grivolla.net>
In-Reply-To: <46A79EBF.4070500@grivolla.net>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Jens Grivolla a crit :
> Hello,
>
> I'm looking to extract significant terms characterizing a set of
> documents (which in turn relate to a topic).
>
> This basically comes down to functionality similar to determining the
> terms with the greatest offer weight (as used for blind relevance
> feedback), or maximizing tf.idf (as is done in MoreLikeThis).
>
> Is there anything like this already implemented, or do I need to
> iterate through all documents in the set "manually", re-tokenize each
> one (or maybe use TermVectors), and then calculate the weight for each
> term? 
http://project.carrot2.org/index.html may be your friend.

M.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29419-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 26 13:22:08 2007
Return-Path: <java-user-return-29419-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17620 invoked from network); 26 Jul 2007 13:22:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jul 2007 13:22:06 -0000
Received: (qmail 1588 invoked by uid 500); 26 Jul 2007 13:22:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1539 invoked by uid 500); 26 Jul 2007 13:22:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1528 invoked by uid 99); 26 Jul 2007 13:22:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jul 2007 06:22:00 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of stachoo@gmail.com designates 209.85.132.248 as permitted sender)
Received: from [209.85.132.248] (HELO an-out-0708.google.com) (209.85.132.248)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jul 2007 06:21:59 -0700
Received: by an-out-0708.google.com with SMTP id c5so108991anc
        for <java-user@lucene.apache.org>; Thu, 26 Jul 2007 06:21:38 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        b=NJyNzOl33o6lsiUN2Cu5uSYv/WKxtvETKMnilYAjrSzXqzQMREScwJCVUvm/f8VEwjxmhN2cD9nTom/ouzReSW09NqIXhOiCEed4xF2IL6uClp9Tl+ueit8AsaFN7Gb71fMdiysvknotPFy0Xr9tjX+UA96IWwH+Fi7CZWfXz4I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        b=qeevch4hBF+TyVObNEsFWjk1fNLb43mzQ/+nLW+WGEtU3pmJJFxdOXitI011PP0MdSjJLEQ1L8jGrm/FSHLPtsnCEt0KKAo2RjlYZxY2D7wxpsEzp05yUclaj+kKg2pFaOCI/JA32iuO5SG3TLmqZGbLDLx2/W/EX05jXU8FesM=
Received: by 10.100.44.13 with SMTP id r13mr1243389anr.1185456097723;
        Thu, 26 Jul 2007 06:21:37 -0700 (PDT)
Received: by 10.100.124.9 with HTTP; Thu, 26 Jul 2007 06:21:37 -0700 (PDT)
Message-ID: <5af106d60707260621u768c4273sd8a3f7aa609ed206@mail.gmail.com>
Date: Thu, 26 Jul 2007 15:21:37 +0200
From: "Stanislaw Osinski" <stanislaw.osinski@man.poznan.pl>
Sender: stachoo@gmail.com
To: java-user@lucene.apache.org
Subject: Re: StandardTokenizer is slowing down highlighting a lot
In-Reply-To: <7DEC1E16-6B62-4587-B8CA-2987C93CB38A@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_180738_33453488.1185456097681"
References: <652776090707181728t416b8839x72fef70d45d6824d@mail.gmail.com>
	 <469EB70C.3040907@gmail.com>
	 <5af106d60707250419g57f1549cvaf01087b9f7027b6@mail.gmail.com>
	 <7DEC1E16-6B62-4587-B8CA-2987C93CB38A@apache.org>
X-Google-Sender-Auth: 44ab839d72ae5882
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_180738_33453488.1185456097681
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

> > If anyone is interested, I could prepare a JFlex based Analyzer
> > equivalent
> > (to the extent possible) to current StandardAnalyzer, which might
> > offer nice
> > indexing and highlighting speed-ups.
>
> +1.  I think a lot of people would be interested in a faster
> StandardAnalyzer.
>

I've attached a patch with the JFlex-based analyzer to
https://issues.apache.org/jira/browse/LUCENE-966. The code needs some
refactoring, but it shows some nice performance gains (5.5 -- 8.1 times
compared to StandardAnalyzer on Sun JVMs).

Staszek

-- 
Stanislaw Osinski, stanislaw.osinski@carrot-search.com
http://www.carrot-search.com

------=_Part_180738_33453488.1185456097681--

From java-user-return-29420-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 26 14:10:51 2007
Return-Path: <java-user-return-29420-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38570 invoked from network); 26 Jul 2007 14:10:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jul 2007 14:10:49 -0000
Received: (qmail 22595 invoked by uid 500); 26 Jul 2007 14:10:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22553 invoked by uid 500); 26 Jul 2007 14:10:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22542 invoked by uid 99); 26 Jul 2007 14:10:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jul 2007 07:10:41 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lukas.vlcek@gmail.com designates 209.85.198.185 as permitted sender)
Received: from [209.85.198.185] (HELO rv-out-0910.google.com) (209.85.198.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jul 2007 07:10:39 -0700
Received: by rv-out-0910.google.com with SMTP id k20so28837rvb
        for <java-user@lucene.apache.org>; Thu, 26 Jul 2007 07:10:19 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=lSfWBBWp0zzgi3J+U2dszpLKlWDd+CNmZXxaztMHbflmI5ki5+D+UrQfUceTc/pBo8LxVDlrvJzdcdho4Wl2aON2qdmpVbmeOEvm/tVCvjK94nDupQ8d+rFxqOujKDuX1z8sIoKnJ7D99qL2HK3+pHWaHYciqKs+VpeLBoWTFm4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=dkBCSbvwTLAblHtZF69aMB/ZqMJhTGtedEVvlxhZHAAKyfc1HFwHVqgatx/sCjZXG+c7olYY4ewQiD4Xlj1wNHQIfP1A5EfXUzcuX8UElkPp5fSmQTEHC1cvGjytXggXc637Ked9y0AvRAQrhJtSwzTYSNMl3Sk6IkOmvUaoLh8=
Received: by 10.141.142.15 with SMTP id u15mr559728rvn.1185459019663;
        Thu, 26 Jul 2007 07:10:19 -0700 (PDT)
Received: by 10.141.210.7 with HTTP; Thu, 26 Jul 2007 07:10:19 -0700 (PDT)
Message-ID: <52c3ddca0707260710t6323f72bm5d11530559083859@mail.gmail.com>
Date: Thu, 26 Jul 2007 16:10:19 +0200
From: "Lukas Vlcek" <lukas.vlcek@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: multi-field and wildcard query highlighter questions
In-Reply-To: <46A0CF1B.1050706@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_767_8416945.1185459019630"
References: <52c3ddca0707200741o16d507c5pda53486842e9cc91@mail.gmail.com>
	 <46A0CF1B.1050706@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_767_8416945.1185459019630
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi!

On 7/20/07, Mark Miller <markrmiller@gmail.com> wrote:
>
> 1) Perhaps the the query you tried does not match anything in your
> index? What release are you using? [prefix*] works fine for me.


I realized that this was caused by Compass' own implementation of
Queryparser (i.e.: CompassQueryParser). I will investigate this issue later
but this does not fall into Lucene user-list.

2) The Highlighter should not care if you have more than one field with
> the same name in a document. The Highlighter does not deal with
> documents. It takes a TokenStream of field:value pairs and then compares
> those to the field:value pairs in the query. If you pass a field name,
> only field matches are scored over 0, if you pass null for the field
> name, fields are ignored and only values are compared. This is all very
> separate from storing fields in a document. Are you doing something
> weird with your TokenStream?


Mark, this is important point. I found that this issue is related to
TokenStream. I am not sure if this is Lucene or Compass issue but what
happens is the following:

I have [all] filed in documents and I do search against this filed. Then
when iterating Hits I try to get highlighted [id] fileds (Stored, indexed,
tokenized, TermVector: offset, positions). There are more [id] fields in
every document. For each Hit the TokenStream is created like this:

TermFreqVector tfv = indexReader.getTermFreqVector(docId, "id");
    if (tfv instanceof TermPositionVector) {
        return TokenSources.getTokenStream((TermPositionVector) tfv);
    }

And then when using this TokenStream in highlighter:

String result = highlighter.getBestFragment(tokenStream,my_text);

...I get that Exception.

I haven't investigated all the Lucene source yet but to me it seems that the
problem is that my_text contains just part of the TokenStream's information.

For example if I have three [id] fileds in document:
<id>111</id>
<id>222</id>
<id>333</id>

Then my_text can be one of the <id> elements (e.g.: 111) but the TokenStream
is {id: 111/1, 222/1, 333/1}. Can this be the problem?

My goal is the get all the ids from document which match to Query. For
example if user provides query like:[111 333] then I would like to get
[<b>111</b> <b>333</b>]. I don't want to get anything like [<b>111</b> 222
<b>333</b>].

Any idea how to do that?

- Mark
>
> Lukas Vlcek wrote:
> > Hi,
> >
> > I have two questions:
> >
> > 1) Is it possible to get some highlighted text when using wildcard
> > query? (I
> > am using query rewrite)
> > I found that it works for queries like [prefix*suffix] or
> [prefix?suffix]
> > but I was not able to get results for queries like [prefix*]
> >
> > 2) What kind of problems I should expect when trying to get highlighted
> > fragment(s) from multi-filed document? (I mean when the document has
> more
> > fields of the same name).
> > So far I am often experiencing StringIndexOutOfBoundsException (see
> > example
> > below):
> >
> > SEVERE: String index out of range: 17
> > java.lang.StringIndexOutOfBoundsException: String index out of range: 17
> >        at java.lang.String.substring(String.java:1765)
> >        at
> > org.apache.lucene.search.highlight.Highlighter.getBestTextFragments(
> > Highlighter.java:235)
> >        at
> > org.apache.lucene.search.highlight.Highlighter.getBestFragments(
> > Highlighter.java:175)
> >        at org.apache.lucene.search.highlight.Highlighter.getBestFragment
> (
> > Highlighter.java:101)
> >        at
> >
> org.compass.core.lucene.engine.LuceneSearchEngineHighlighter.collectionFragment
> >
> > (LuceneSearchEngineHighlighter.java:204)
> >        at
> >
> org.compass.core.lucene.engine.LuceneSearchEngineHighlighter.collectionFragment
> >
> > (LuceneSearchEngineHighlighter.java:189)
> >        at
> > org.compass.core.impl.DefaultCompassHighlighter.collectionFragment(
> > DefaultCompassHighlighter.java:127)
> > ... [truncated]
> > ... [also you can notice that I am using Compass above Lucene but to
> > me this
> > seems like Lucene related problem because index seems to be OK (via
> > Luke)]
> >
> > I am using Lucene-2.2.0.
> >
> > Regards,
> > Lukas
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_767_8416945.1185459019630--

From java-user-return-29421-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 26 15:17:30 2007
Return-Path: <java-user-return-29421-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12315 invoked from network); 26 Jul 2007 15:17:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jul 2007 15:17:29 -0000
Received: (qmail 21668 invoked by uid 500); 26 Jul 2007 15:17:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21582 invoked by uid 500); 26 Jul 2007 15:17:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21540 invoked by uid 99); 26 Jul 2007 15:17:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jul 2007 08:17:15 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_SORBS_WEB
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.197.35.8] (HELO rediff.co.in) (203.197.35.8)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jul 2007 08:17:13 -0700
Received: (qmail 8238 invoked from network); 26 Jul 2007 20:38:34 +0530
Received: from unknown (HELO bhavin) (202.137.232.130)
  by mailserver with SMTP; 26 Jul 2007 20:38:34 +0530
Message-ID: <00b401c7cf98$73167a20$150410ac@bhavin>
Reply-To: "Bhavin Pandya" <bhavinp@rediff.co.in>
From: "Bhavin Pandya" <bhavinp@rediff.co.in>
To: <java-user@lucene.apache.org>
Subject: How to show category count with results?
Date: Thu, 26 Jul 2007 20:50:05 +0530
Organization: rediff.com
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_00B1_01C7CFC6.8BD206A0"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_00B1_01C7CFC6.8BD206A0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi,

I want to show each category name and its count with results.
I achieved this using DocCollector but its very slow when no of results =
in lacs... As fetching of documents from reader in collect method is =
expensive...

public void collect(int doc, float score)=20
{ =20
    Document document =3D mreader.document(doc);
    strcatid =3D =
document.get("CAMPCATID")=3D=3Dnull?"":document.get("CAMPCATID");
   =20
    if (catcountmap.containsKey(strcatid))
    {
        // catid already exists in hashmap... increase count by one

        value =3D ((Integer)catcountmap.get(strcatid)).intValue();
        value =3D value + 1;
        catcountmap.put(strcatid,new Integer(value));
    }
    else
        catcountmap.put(strcatid,new Integer(1));   =20

}


is there any other better way to achieve this ????


Thanks.
Bhavin pandya
------=_NextPart_000_00B1_01C7CFC6.8BD206A0--


From java-user-return-29422-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 26 15:23:41 2007
Return-Path: <java-user-return-29422-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26908 invoked from network); 26 Jul 2007 15:23:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jul 2007 15:23:40 -0000
Received: (qmail 56565 invoked by uid 500); 26 Jul 2007 15:23:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56539 invoked by uid 500); 26 Jul 2007 15:23:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56528 invoked by uid 99); 26 Jul 2007 15:23:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jul 2007 08:23:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.177] (HELO spunkymail-a14.g.dreamhost.com) (208.97.132.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jul 2007 08:23:32 -0700
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a14.g.dreamhost.com (Postfix) with ESMTP id 79C6C190E36
	for <java-user@lucene.apache.org>; Thu, 26 Jul 2007 08:23:11 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <46A79EBF.4070500@grivolla.net>
References: <46A79EBF.4070500@grivolla.net>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <D79448B5-8134-4560-A5F4-FE2EBA810EDF@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: MoreLikeThis for multiple documents
Date: Thu, 26 Jul 2007 11:23:00 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

I have some sample code for doing relevance feedback across multiple  
documents at http://www.cnlp.org/apachecon2005

It could be modified to provide more of the MoreLikeThis  
functionality (i.e. determining important terms via tf/idf) for now  
it just takes the top X terms

-Grant

On Jul 25, 2007, at 3:04 PM, Jens Grivolla wrote:

> Hello,
>
> I'm looking to extract significant terms characterizing a set of  
> documents (which in turn relate to a topic).
>
> This basically comes down to functionality similar to determining  
> the terms with the greatest offer weight (as used for blind  
> relevance feedback), or maximizing tf.idf (as is done in  
> MoreLikeThis).
>
> Is there anything like this already implemented, or do I need to  
> iterate through all documents in the set "manually", re-tokenize  
> each one (or maybe use TermVectors), and then calculate the weight  
> for each term?
>
> Thanks,
>    Jens
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29423-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 26 15:29:15 2007
Return-Path: <java-user-return-29423-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40837 invoked from network); 26 Jul 2007 15:29:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jul 2007 15:29:14 -0000
Received: (qmail 69072 invoked by uid 500); 26 Jul 2007 15:29:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69042 invoked by uid 500); 26 Jul 2007 15:29:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69019 invoked by uid 99); 26 Jul 2007 15:29:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jul 2007 08:29:09 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of ramana.jelda@ciao-group.com designates 194.97.158.185 as permitted sender)
Received: from [194.97.158.185] (HELO pigeon.ciao.com) (194.97.158.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jul 2007 08:29:07 -0700
Received: from Jelda (gateway.ciao.com [194.221.9.215])
	by pigeon.ciao.com (8.13.3/8.13.3) with ESMTP id l6QFSSXx031875;
	Thu, 26 Jul 2007 17:28:28 +0200 (CEST)
	(envelope-from ramana.jelda@ciao-group.com)
Message-Id: <200707261528.l6QFSSXx031875@pigeon.ciao.com>
From: "Ramana Jelda" <ramana.jelda@ciao-group.com>
To: <java-user@lucene.apache.org>, "'Bhavin Pandya'" <bhavinp@rediff.co.in>
Subject: RE: How to show category count with results?
Date: Thu, 26 Jul 2007 17:28:22 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
In-Reply-To: <00b401c7cf98$73167a20$150410ac@bhavin>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
Thread-Index: AcfPmB18w3vU0LdDTfKKhgtejZwAIgAAUgAA
X-Scanned-By: MIMEDefang 2.61 on 194.97.158.185
X-Virus-Checked: Checked by ClamAV on apache.org

Hi ,
Of course this statement is very expensive.
-->document.get("CAMPCATID")==null?"":document.get("CAMPCATID");

Use StringIndex/FieldCache/something similar to implement category counting.
:)

Jelda

> -----Original Message-----
> From: Bhavin Pandya [mailto:bhavinp@rediff.co.in] 
> Sent: Thursday, July 26, 2007 5:20 PM
> To: java-user@lucene.apache.org
> Subject: How to show category count with results?
> 
> Hi,
> 
> I want to show each category name and its count with results.
> I achieved this using DocCollector but its very slow when no 
> of results in lacs... As fetching of documents from reader in 
> collect method is expensive...
> 
> public void collect(int doc, float score) {  
>     Document document = mreader.document(doc);
>     strcatid = 
> document.get("CAMPCATID")==null?"":document.get("CAMPCATID");
>     
>     if (catcountmap.containsKey(strcatid))
>     {
>         // catid already exists in hashmap... increase count by one
> 
>         value = ((Integer)catcountmap.get(strcatid)).intValue();
>         value = value + 1;
>         catcountmap.put(strcatid,new Integer(value));
>     }
>     else
>         catcountmap.put(strcatid,new Integer(1));    
> 
> }
> 
> 
> is there any other better way to achieve this ????
> 
> 
> Thanks.
> Bhavin pandya


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29424-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 26 17:19:32 2007
Return-Path: <java-user-return-29424-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14899 invoked from network); 26 Jul 2007 17:19:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jul 2007 17:19:28 -0000
Received: (qmail 64537 invoked by uid 500); 26 Jul 2007 17:19:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64502 invoked by uid 500); 26 Jul 2007 17:19:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64491 invoked by uid 99); 26 Jul 2007 17:19:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jul 2007 10:19:21 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of rafael.rossini@gmail.com designates 209.85.134.188 as permitted sender)
Received: from [209.85.134.188] (HELO mu-out-0910.google.com) (209.85.134.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jul 2007 10:19:19 -0700
Received: by mu-out-0910.google.com with SMTP id g7so646099muf
        for <java-user@lucene.apache.org>; Thu, 26 Jul 2007 10:18:57 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=lTFT8iP1vzQz0de1i6P+eFplO6SvZEAnLEQpO6A1ZoGFK9lvTdsSQjw4JNvfKwHHtkppCT2W4sbxcChYEZCUciHo6bYhu1Jq5VWWs9T2RKwKG5eLfSGkv2ey95a24hTBaYGMk84CeYES3ZV3HBmhHIFGo0CGVttJcWsPSkHB6Vw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=GDF3CsT3I4NVk+G/qANfQnMIpgivfGgoBSvr9idMK2xcsVpqtzUGkE4Sn2tT467jsVU0gUGAEfx+EBARxmVe9Nvgtul87zfgCokXG4GXeZVb5dDxcZRNCpY9i7w8H/QccZqyg2z1mc3Fx7ACnazI2+9u62sScjFJS6NPpjbWUjc=
Received: by 10.82.116.15 with SMTP id o15mr1704707buc.1185470337239;
        Thu, 26 Jul 2007 10:18:57 -0700 (PDT)
Received: by 10.82.113.12 with HTTP; Thu, 26 Jul 2007 10:18:57 -0700 (PDT)
Message-ID: <a8d89b3b0707261018k28d4b231n423c6b15638fea71@mail.gmail.com>
Date: Thu, 26 Jul 2007 14:18:57 -0300
From: "Rafael Rossini" <rafael.rossini@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Delete corrupted doc
In-Reply-To: <ab0709bf0707260559o26d48480wf8121fa7ec9d8bf@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_174177_5468395.1185470337215"
References: <a8d89b3b0707251138t7b2f4611kc390e198d7246bbc@mail.gmail.com>
	 <ab0709bf0707260559o26d48480wf8121fa7ec9d8bf@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_174177_5468395.1185470337215
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Yes, I optimized, but in the with SOLR. I don=B4t know why, but when optimi=
ze
an index with SOLR, it leaves you with about 15 files, instead of the 3...
I=B4ll try to optimize directly on lucene, and see what happens, if nothing
happens I=B4ll try your suggestion. Thanks a lot Mark!!

On 7/26/07, Mark Miller <markrmiller@gmail.com> wrote:
>
> You know, on second though, a merge shouldn't even try to access a doc >
> maxdoc (i think). Have you just tried an optimize?
>
> On 7/25/07, Rafael Rossini <rafael.rossini@gmail.com> wrote:
> >
> > Hi guys,
> >
> >     Is there a way of deleting a document that, because of some
> > corruption,
> > got and docID larger than the maxDoc() ? I=B4m trying to do this but I =
get
> > this Exception:
> >
> > Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException:
> Array
> > index out of range: 106577
> >    at org.apache.lucene.util.BitVector.set(BitVector.java:53)
> >    at org.apache.lucene.index.SegmentReader.doDelete (SegmentReader.jav=
a
> > :301)
> >    at org.apache.lucene.index.IndexReader.deleteDocument(
> IndexReader.java
> > :674)
> >    at org.apache.lucene.index.MultiReader.doDelete(MultiReader.java:125=
)
> >    at org.apache.lucene.index.IndexReader.deleteDocument (
> IndexReader.java
> > :674)
> >    at teste.DeleteError.main(DeleteError.java:9)
> >
> > Thanks
> >
>

------=_Part_174177_5468395.1185470337215--

From java-user-return-29425-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 26 17:53:17 2007
Return-Path: <java-user-return-29425-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37215 invoked from network); 26 Jul 2007 17:53:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jul 2007 17:53:16 -0000
Received: (qmail 56610 invoked by uid 500); 26 Jul 2007 17:53:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56589 invoked by uid 500); 26 Jul 2007 17:53:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56578 invoked by uid 99); 26 Jul 2007 17:53:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jul 2007 10:53:09 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.236 as permitted sender)
Received: from [66.249.82.236] (HELO wx-out-0506.google.com) (66.249.82.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jul 2007 10:53:07 -0700
Received: by wx-out-0506.google.com with SMTP id i28so466564wxd
        for <java-user@lucene.apache.org>; Thu, 26 Jul 2007 10:52:47 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=UZbL80fd3kM3Yui1/E2NSxjpPTJS4AUxaX/55Ie/kR68wKu8RKCXyg9K7tLeer4mLQc6JIGeOMAfl96Xlafk2BohjiC+eE8hsFly6YiX330aB0Sg/a1YKCxldXJeG3b2SU7KrD1675IEmgx+1mR+FphJ77X3fhixkNA6fcP5QkU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=hMahDjTo13fLZ9uyoJqJOfG3Z4ocH0glGb2ZPqxM1GMDnDgoLoEqkptWX9lUtyGvfGYbEM32xu74zWZwmaj3G41xQiT3JkT5s8es0j3eFD/yhu02v0McRgV5uvRJOkSAzvC8UfdFQ5BxDhEM5Ki9VxCgAneFj8WkoZ0XGy7HwF4=
Received: by 10.100.153.17 with SMTP id a17mr1734778ane.1185472367033;
        Thu, 26 Jul 2007 10:52:47 -0700 (PDT)
Received: by 10.100.38.5 with HTTP; Thu, 26 Jul 2007 10:52:46 -0700 (PDT)
Message-ID: <ab0709bf0707261052p295c03f4j75770362aa4657c5@mail.gmail.com>
Date: Thu, 26 Jul 2007 13:52:46 -0400
From: "Mark Miller" <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Delete corrupted doc
In-Reply-To: <a8d89b3b0707261018k28d4b231n423c6b15638fea71@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_215090_30270042.1185472366965"
References: <a8d89b3b0707251138t7b2f4611kc390e198d7246bbc@mail.gmail.com>
	 <ab0709bf0707260559o26d48480wf8121fa7ec9d8bf@mail.gmail.com>
	 <a8d89b3b0707261018k28d4b231n423c6b15638fea71@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_215090_30270042.1185472366965
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

>From what I can tell, you shouldn't need to even try my first suggestion
(what happened to the experts on this question by the way?).

Returning true from isDeleted for the corrupt id should not matter.

It appears to me that deletes are handled by keeping a simple list of the
id's that are deleted. When a merge is done and a new segment is created,
the deleted ids are just not brought along for the ride. Instead, just docs
0-maxdoc() with isDeleted=3Dfalse are put into the new segment. Your corrup=
t
id that is greater than maxdoc() should not make the new segment as it will
never be retrieved.

Anyway, what this says to me (and I should have realized this before) is
that there is no document with your corrupt id, rather there is a term that
thinks it is in that invalid doc id. The corruption must be in the
term:docids inverted index.

Getting that invalid number out of that file might be rather difficult.
There are some brilliant guys on the list that might have an idea how to do
it though. Certainly my approach in that first e-mail will not do it.

I will try to think of something if no one chimes in. Obviously, re-index
will be the easiest solution <g>

- Mark

On 7/26/07, Rafael Rossini <rafael.rossini@gmail.com> wrote:
>
> Yes, I optimized, but in the with SOLR. I don=B4t know why, but when
> optimize
> an index with SOLR, it leaves you with about 15 files, instead of the 3..=
.
> I=B4ll try to optimize directly on lucene, and see what happens, if nothi=
ng
> happens I=B4ll try your suggestion. Thanks a lot Mark!!
>
> On 7/26/07, Mark Miller <markrmiller@gmail.com> wrote:
> >
> > You know, on second though, a merge shouldn't even try to access a doc =
>
> > maxdoc (i think). Have you just tried an optimize?
> >
> > On 7/25/07, Rafael Rossini <rafael.rossini@gmail.com> wrote:
> > >
> > > Hi guys,
> > >
> > >     Is there a way of deleting a document that, because of some
> > > corruption,
> > > got and docID larger than the maxDoc() ? I=B4m trying to do this but =
I
> get
> > > this Exception:
> > >
> > > Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException:
> > Array
> > > index out of range: 106577
> > >    at org.apache.lucene.util.BitVector.set(BitVector.java:53)
> > >    at org.apache.lucene.index.SegmentReader.doDelete (
> SegmentReader.java
> > > :301)
> > >    at org.apache.lucene.index.IndexReader.deleteDocument(
> > IndexReader.java
> > > :674)
> > >    at org.apache.lucene.index.MultiReader.doDelete(MultiReader.java
> :125)
> > >    at org.apache.lucene.index.IndexReader.deleteDocument (
> > IndexReader.java
> > > :674)
> > >    at teste.DeleteError.main(DeleteError.java:9)
> > >
> > > Thanks
> > >
> >
>

------=_Part_215090_30270042.1185472366965--

From java-user-return-29426-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 26 17:58:27 2007
Return-Path: <java-user-return-29426-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40477 invoked from network); 26 Jul 2007 17:58:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jul 2007 17:58:26 -0000
Received: (qmail 70596 invoked by uid 500); 26 Jul 2007 17:58:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70558 invoked by uid 500); 26 Jul 2007 17:58:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70467 invoked by uid 99); 26 Jul 2007 17:58:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jul 2007 10:58:18 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 209.85.162.183 as permitted sender)
Received: from [209.85.162.183] (HELO el-out-1112.google.com) (209.85.162.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jul 2007 10:58:16 -0700
Received: by el-out-1112.google.com with SMTP id y26so45120ele
        for <java-user@lucene.apache.org>; Thu, 26 Jul 2007 10:57:55 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=SW+f3LbuyogXzsMu9d2JOs2OpC5CbzK3/6nL7wbTOx7En4czYCRf5MPZPyzSjVmyE2VsWoeE9Y69+W/jw3f4wXpI6pB7zRya1p/n7UDwjZO/7xXiyo9lre+aPx9rhrFnmDHF2prPviF6OcRTvkKsViRiGoT2LBQYUan1dmhFTSo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=FSfXNpqqfT1S/uKi4K/H2xSavndxFogW8bPkuxWhEO+xMfvYA8ok/hpaYg7qitYlMbdnJy0C/Lp/PDtl3a+V3PCyPsVwGuSTysqbg1y0QDiSOzlFnE6/Ug8DlU3HU9wW9l4dztQtQQlnYdc/lMrQGLbs8efBHS0ZilLJyGPBEYA=
Received: by 10.142.106.8 with SMTP id e8mr47974wfc.1185472675044;
        Thu, 26 Jul 2007 10:57:55 -0700 (PDT)
Received: by 10.143.3.1 with HTTP; Thu, 26 Jul 2007 10:57:54 -0700 (PDT)
Message-ID: <c68e39170707261057m18cff4e3sf827434b9dbeb402@mail.gmail.com>
Date: Thu, 26 Jul 2007 13:57:54 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Delete corrupted doc
In-Reply-To: <ab0709bf0707261052p295c03f4j75770362aa4657c5@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <a8d89b3b0707251138t7b2f4611kc390e198d7246bbc@mail.gmail.com>
	 <ab0709bf0707260559o26d48480wf8121fa7ec9d8bf@mail.gmail.com>
	 <a8d89b3b0707261018k28d4b231n423c6b15638fea71@mail.gmail.com>
	 <ab0709bf0707261052p295c03f4j75770362aa4657c5@mail.gmail.com>
X-Google-Sender-Auth: b6972d0dff70ad4b
X-Virus-Checked: Checked by ClamAV on apache.org

On 7/26/07, Mark Miller <markrmiller@gmail.com> wrote:
> Anyway, what this says to me (and I should have realized this before) is
> that there is no document with your corrupt id, rather there is a term that
> thinks it is in that invalid doc id. The corruption must be in the
> term:docids inverted index.

Correct.  And the ids that *are* less than maxDoc may be incorrect
(pointint to the wrong docs), and there could be other terms with the
same issue.
The index should be rebuilt.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29427-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 26 18:28:09 2007
Return-Path: <java-user-return-29427-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62430 invoked from network); 26 Jul 2007 18:28:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jul 2007 18:28:08 -0000
Received: (qmail 42874 invoked by uid 500); 26 Jul 2007 18:28:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42840 invoked by uid 500); 26 Jul 2007 18:28:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42829 invoked by uid 99); 26 Jul 2007 18:28:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jul 2007 11:28:01 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of rafael.rossini@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jul 2007 11:28:00 -0700
Received: by ug-out-1314.google.com with SMTP id c2so681514ugf
        for <java-user@lucene.apache.org>; Thu, 26 Jul 2007 11:27:38 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=KwmShWxO00xhZwYRIMPnrTHiiL4bylQytyEMerJjJpJZPACb2b1/wThNTnZy37jjDYtOTGf3sIv2GYQSuMEoC+eNHD3ZfaFgBgldQmpwImJ1pz7cMnthCLrm7iCnYK7DTLZBVAUxgvEAi/xmjPz53Vfxzphb/Mkwq8/nUC6RFxA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=lCYIDYWpcCAwKWwLNoo3E4UGLvTtNafwHApZJnw8wbEQcrVYr67TeSFEK5qnYdXRcs4RgXtggwpacQOrGuWB6j8c0WrZNyhAKcQX+p3mC2xu3iP8Rc8zVDF6hswlAjXCt9C2g2Z8DQLW2yCcK/BGMXEzlkY7hOgOwVKejVds6+8=
Received: by 10.82.100.1 with SMTP id x1mr1804948bub.1185474458447;
        Thu, 26 Jul 2007 11:27:38 -0700 (PDT)
Received: by 10.82.113.12 with HTTP; Thu, 26 Jul 2007 11:27:38 -0700 (PDT)
Message-ID: <a8d89b3b0707261127o65b99738sb674fce21f9df4f8@mail.gmail.com>
Date: Thu, 26 Jul 2007 15:27:38 -0300
From: "Rafael Rossini" <rafael.rossini@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Delete corrupted doc
In-Reply-To: <c68e39170707261057m18cff4e3sf827434b9dbeb402@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_175141_28813751.1185474458419"
References: <a8d89b3b0707251138t7b2f4611kc390e198d7246bbc@mail.gmail.com>
	 <ab0709bf0707260559o26d48480wf8121fa7ec9d8bf@mail.gmail.com>
	 <a8d89b3b0707261018k28d4b231n423c6b15638fea71@mail.gmail.com>
	 <ab0709bf0707261052p295c03f4j75770362aa4657c5@mail.gmail.com>
	 <c68e39170707261057m18cff4e3sf827434b9dbeb402@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_175141_28813751.1185474458419
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Well... thanks for the help, this was really my last solution (rebuild) but
I think I have no other choice... I really can=B4t tell exactly if this
corruption was caused by bad hardware or not, but do you guys have any
ideia about what might have happend here? Could I have generated this
corruption some how?

On 7/26/07, Yonik Seeley <yonik@apache.org> wrote:
>
> On 7/26/07, Mark Miller <markrmiller@gmail.com> wrote:
> > Anyway, what this says to me (and I should have realized this before) i=
s
> > that there is no document with your corrupt id, rather there is a term
> that
> > thinks it is in that invalid doc id. The corruption must be in the
> > term:docids inverted index.
>
> Correct.  And the ids that *are* less than maxDoc may be incorrect
> (pointint to the wrong docs), and there could be other terms with the
> same issue.
> The index should be rebuilt.
>
> -Yonik
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_175141_28813751.1185474458419--

From java-user-return-29428-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 26 18:45:40 2007
Return-Path: <java-user-return-29428-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68531 invoked from network); 26 Jul 2007 18:45:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jul 2007 18:45:39 -0000
Received: (qmail 81183 invoked by uid 500); 26 Jul 2007 18:45:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81143 invoked by uid 500); 26 Jul 2007 18:45:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81132 invoked by uid 99); 26 Jul 2007 18:45:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jul 2007 11:45:33 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 209.85.162.180 as permitted sender)
Received: from [209.85.162.180] (HELO el-out-1112.google.com) (209.85.162.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jul 2007 11:45:32 -0700
Received: by el-out-1112.google.com with SMTP id y26so51050ele
        for <java-user@lucene.apache.org>; Thu, 26 Jul 2007 11:45:11 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=ac4MmK8uhY0ksff72dwAGMpXVyijinWus3LzkMC7MTxTItfHOr86c5FbFQdgPK/GWPfa1ZD7PoINmbOb+JEcJGvprCgIcIclm0cRfMrA1QMJ5imOYX+cKujKxukcJFzC0W6k3e96NPC4/EEpxdIhvK7J52KbRxA+i1M4mWFoxqE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=twbmNLIt+czNYVn0zoAyyk1QjRrXP8py93LptbG7Dq+pCAzRo5/cyT7NM9fML/IIhqovuxrhF1KdfKRMv9By+DizaGrAUOPkMqn40nIOENGUzReruHGxFY5JdEpI232/NA8phjh2KPulswRWkepcTwQyHV4XauG+DLm4AqKsHO8=
Received: by 10.142.102.5 with SMTP id z5mr122290wfb.1185475510974;
        Thu, 26 Jul 2007 11:45:10 -0700 (PDT)
Received: by 10.143.3.1 with HTTP; Thu, 26 Jul 2007 11:45:10 -0700 (PDT)
Message-ID: <c68e39170707261145k54d9118by5fa7535be86588d8@mail.gmail.com>
Date: Thu, 26 Jul 2007 14:45:10 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Delete corrupted doc
In-Reply-To: <a8d89b3b0707261127o65b99738sb674fce21f9df4f8@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <a8d89b3b0707251138t7b2f4611kc390e198d7246bbc@mail.gmail.com>
	 <ab0709bf0707260559o26d48480wf8121fa7ec9d8bf@mail.gmail.com>
	 <a8d89b3b0707261018k28d4b231n423c6b15638fea71@mail.gmail.com>
	 <ab0709bf0707261052p295c03f4j75770362aa4657c5@mail.gmail.com>
	 <c68e39170707261057m18cff4e3sf827434b9dbeb402@mail.gmail.com>
	 <a8d89b3b0707261127o65b99738sb674fce21f9df4f8@mail.gmail.com>
X-Google-Sender-Auth: aeede6bbe2eb5663
X-Virus-Checked: Checked by ClamAV on apache.org

On 7/26/07, Rafael Rossini <rafael.rossini@gmail.com> wrote:
> Well... thanks for the help, this was really my last solution (rebuild) b=
ut
> I think I have no other choice... I really can=B4t tell exactly if this
> corruption was caused by bad hardware or not, but do you guys have any
> ideia about what might have happend here?

Unless it's reproducible, I'd chalk it up as a hardware blip.

> Could I have generated this corruption some how?

No, anything you can do through Lucene's API should result in a valid index=
.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29429-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 26 19:09:08 2007
Return-Path: <java-user-return-29429-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76515 invoked from network); 26 Jul 2007 19:09:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jul 2007 19:09:07 -0000
Received: (qmail 66289 invoked by uid 500); 26 Jul 2007 19:09:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66255 invoked by uid 500); 26 Jul 2007 19:09:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66244 invoked by uid 99); 26 Jul 2007 19:09:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jul 2007 12:09:00 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mike.klaas@gmail.com designates 209.85.146.177 as permitted sender)
Received: from [209.85.146.177] (HELO wa-out-1112.google.com) (209.85.146.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jul 2007 12:08:59 -0700
Received: by wa-out-1112.google.com with SMTP id j40so738212wah
        for <java-user@lucene.apache.org>; Thu, 26 Jul 2007 12:08:39 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=ua087nJXiGfWzyfRBc616nNO7UNxWMpts5Qjbu4/VsuoAoC7qWNeE/pp6UTEkCB3qoSy/4TjSZ4rpQQd/VDa8d+t9VmPfK8T6LRMdotkPyrWbg41DFl6uX/n/3NUH5owGpjBRgbwtpSEPM1mloeli6nlycTIjsW++y2SaT0YBig=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=A2T9vJK8b6838LAGohmZE/ZmnXkGuIDqMaEtEDUL9c/P0wvm2CCzKm3tsmVAsfUxiCHUEAbfoqaUMoWriIh1LheNoP3cUXaBaiemIyPfm0A7EpmMXzhjaLSGtLLFr4nRWBccdfzeAOkCfnFGKzZdB314fQgPb/egMB8HywlDerw=
Received: by 10.114.111.1 with SMTP id j1mr1725836wac.1185476918883;
        Thu, 26 Jul 2007 12:08:38 -0700 (PDT)
Received: from ?192.168.1.101? ( [24.82.155.191])
        by mx.google.com with ESMTPS id k23sm3090742waf.2007.07.26.12.08.36
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 26 Jul 2007 12:08:36 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <a8d89b3b0707261018k28d4b231n423c6b15638fea71@mail.gmail.com>
References: <a8d89b3b0707251138t7b2f4611kc390e198d7246bbc@mail.gmail.com> <ab0709bf0707260559o26d48480wf8121fa7ec9d8bf@mail.gmail.com> <a8d89b3b0707261018k28d4b231n423c6b15638fea71@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <DE6E6F7F-8663-4FCC-A35A-C92FAE2EF147@gmail.com>
Content-Transfer-Encoding: quoted-printable
From: Mike Klaas <mike.klaas@gmail.com>
Subject: Re: Delete corrupted doc
Date: Thu, 26 Jul 2007 12:08:33 -0700
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On 26-Jul-07, at 10:18 AM, Rafael Rossini wrote:

> Yes, I optimized, but in the with SOLR. I don=B4t know why, but when =20=

> optimize
> an index with SOLR, it leaves you with about 15 files, instead of =20
> the 3...

You are probably not using the compound file format.  Try setting:
     <useCompoundFile>true</useCompoundFile>

in solrconfig.xml

-Mike=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29430-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 26 19:33:25 2007
Return-Path: <java-user-return-29430-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93030 invoked from network); 26 Jul 2007 19:33:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jul 2007 19:33:23 -0000
Received: (qmail 24244 invoked by uid 500); 26 Jul 2007 19:33:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24206 invoked by uid 500); 26 Jul 2007 19:33:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24195 invoked by uid 99); 26 Jul 2007 19:33:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jul 2007 12:33:17 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of rafael.rossini@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jul 2007 12:33:15 -0700
Received: by ug-out-1314.google.com with SMTP id c2so691830ugf
        for <java-user@lucene.apache.org>; Thu, 26 Jul 2007 12:32:54 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=PlTxpYvzDsgYyNxRCD3sdlK8sRWvCaHhkYb4Iw2ZsGPbAAS0X6ca9D9tYhk9wKhl0fFuRR5EIyIx87BdVykkQNqVLE9Htqf9laIIKShs4C7lqUS5DZ5+lMfjmbVcDzxhWh0EyUDBMSO00Uz2MEp2H6TKaT+Fdr7dnSQJjRDZmiA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=DWJlf1BhFNYLEzEcp/u3B2WrYJQiJOTiXonM2BRN+0Df0pu4wmtECUzRJb4ExLDymjcSOzPtLaMUhDpnJTlaa05ViicSpCGu52Qg/GgfwYqrhsARhM1mNdwBTBAI6MHwZSoQtGUjJAqMALcv1C5IHfpJyWYskZwzwhZfhy+f8dc=
Received: by 10.82.152.16 with SMTP id z16mr1893205bud.1185478374279;
        Thu, 26 Jul 2007 12:32:54 -0700 (PDT)
Received: by 10.82.113.12 with HTTP; Thu, 26 Jul 2007 12:32:53 -0700 (PDT)
Message-ID: <a8d89b3b0707261232i6541bbcfy1e12440b9b78ad7c@mail.gmail.com>
Date: Thu, 26 Jul 2007 16:32:54 -0300
From: "Rafael Rossini" <rafael.rossini@gmail.com>
To: java-user@lucene.apache.org
Subject: Search terms on a single "instance" of field
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_175857_5064995.1185478374255"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_175857_5064995.1185478374255
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi guys,

    I have a problem that is kind of tricky:

       I have a set of documents that I enrich with dynamic metadata. The
metada name is the fieldName in lucene and the value is the text. For
example:
"Rio de Janeiro is a beautiful city." would be indexed in one field called
text, and on another field, I would do something like new Field("city", "Ri=
o
de Janeiro" ....). With this I can search on documents like this city:rio.

       The thing is, we now are composing more complex information on a
text, like this:
       "Daniel, the new presidente of Company XY, is 30 years old, but on
Company AB the director, George, is much older. He is 80 now."
       I will add on a document 2 fields, like Field("position",
"Daniel president Company XY", ...); Field("position", "George director
Company AB", ...). With this I=B4d like to search for documents that has
daniel and president on the same field, because in a same text, can exist
daniel and president in different fields. Is this possible?? I know that if
I had and index where the Document is a phrase like this, it would solve my
problem, but I=B4d like to stay with only one index.

   Hope I made myself clear.

[]s
    Rossini

------=_Part_175857_5064995.1185478374255--

From java-user-return-29431-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 26 19:40:52 2007
Return-Path: <java-user-return-29431-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96369 invoked from network); 26 Jul 2007 19:40:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jul 2007 19:40:50 -0000
Received: (qmail 41346 invoked by uid 500); 26 Jul 2007 19:40:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41042 invoked by uid 500); 26 Jul 2007 19:40:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41031 invoked by uid 99); 26 Jul 2007 19:40:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jul 2007 12:40:44 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of rafael.rossini@gmail.com designates 209.85.134.189 as permitted sender)
Received: from [209.85.134.189] (HELO mu-out-0910.google.com) (209.85.134.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jul 2007 12:40:43 -0700
Received: by mu-out-0910.google.com with SMTP id g7so683141muf
        for <java-user@lucene.apache.org>; Thu, 26 Jul 2007 12:40:21 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=qJBgRR+vCgFUnx3b45GGVLoHGuuf02Rq5qQn0y5aWTeI7lgYN9YWmC/Ar02VCwDK9h90gKj9VanTDGCuQ6/QlcuhbQvHTLKyI3Rbnlr1HgiB7IaGm2ftV+RvAcigV6J/+Fjj/DJYd7eNNmeydh1++/Q/M/VKuowoD+it44hlKBw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Yg71K1vIvjE5XU/Xj3gDAtJzMubzmqsCTcPaeKUhqt6VV+VUcd/Pppg02xnBEXJsG3GbMAMqxTekX1PvYCXhPnMGNRUMcbM7/4YA6+an0148m+zF5Kdxg1TLcYck7T5H/5YpQCoIU/E7CUX0cfT6t/LmNnTMutUmSDcbOoEUDJg=
Received: by 10.82.116.15 with SMTP id o15mr1899273buc.1185478820939;
        Thu, 26 Jul 2007 12:40:20 -0700 (PDT)
Received: by 10.82.113.12 with HTTP; Thu, 26 Jul 2007 12:40:20 -0700 (PDT)
Message-ID: <a8d89b3b0707261240s503f620bl87bfd789a3806eb4@mail.gmail.com>
Date: Thu, 26 Jul 2007 16:40:20 -0300
From: "Rafael Rossini" <rafael.rossini@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Delete corrupted doc
In-Reply-To: <DE6E6F7F-8663-4FCC-A35A-C92FAE2EF147@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_175929_4525986.1185478820887"
References: <a8d89b3b0707251138t7b2f4611kc390e198d7246bbc@mail.gmail.com>
	 <ab0709bf0707260559o26d48480wf8121fa7ec9d8bf@mail.gmail.com>
	 <a8d89b3b0707261018k28d4b231n423c6b15638fea71@mail.gmail.com>
	 <DE6E6F7F-8663-4FCC-A35A-C92FAE2EF147@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_175929_4525986.1185478820887
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

I see, thanks.

On 7/26/07, Mike Klaas <mike.klaas@gmail.com> wrote:
>
>
> On 26-Jul-07, at 10:18 AM, Rafael Rossini wrote:
>
> > Yes, I optimized, but in the with SOLR. I don=B4t know why, but when
> > optimize
> > an index with SOLR, it leaves you with about 15 files, instead of
> > the 3...
>
> You are probably not using the compound file format.  Try setting:
>     <useCompoundFile>true</useCompoundFile>
>
> in solrconfig.xml
>
> -Mike
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_175929_4525986.1185478820887--

From java-user-return-29432-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 26 20:51:42 2007
Return-Path: <java-user-return-29432-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20530 invoked from network); 26 Jul 2007 20:51:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jul 2007 20:51:41 -0000
Received: (qmail 49257 invoked by uid 500); 26 Jul 2007 20:51:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49224 invoked by uid 500); 26 Jul 2007 20:51:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49208 invoked by uid 99); 26 Jul 2007 20:51:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jul 2007 13:51:35 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jul 2007 13:51:34 -0700
Received: by ug-out-1314.google.com with SMTP id c2so704173ugf
        for <java-user@lucene.apache.org>; Thu, 26 Jul 2007 13:51:13 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:in-reply-to:references:mime-version:x-priority:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=XmzB/bhJuKaTWINT+/jMJzvr4mZAXqaqvlo2IPLFYT5Ewv1zortyc/OO7zZSAmPvH11JLXirBVxByklMQL8gl4qkc6+lQeWsxjH/FnX3XOhK2QCnLOAvzRf/xEr1UxwYT5FBTaEUW50N2/aeF/K+w/cj34T5iCNPgApNsFG+JvA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:in-reply-to:references:mime-version:x-priority:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=osejckXj8/mjPHQWsrTmo8DHN+CjYpQgXL4+Y+RIooauAaUukrqhzyZJ4eV9YLIS3cRHu4WbKo15HMsiB3lkjkIG09QG4WkYTmhJLPrpfQaLyif84egWemQymn7tiQm1VtME5GXIRM9yaekbG5H8DoM9wp2cvg2YHaMtS1kRK6c=
Received: by 10.86.76.16 with SMTP id y16mr1465552fga.1185483073041;
        Thu, 26 Jul 2007 13:51:13 -0700 (PDT)
Received: from ?192.168.2.101? ( [83.249.110.50])
        by mx.google.com with ESMTPS id g1sm6993003muf.2007.07.26.13.51.09
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 26 Jul 2007 13:51:10 -0700 (PDT)
In-Reply-To: <BAY114-DAV75FB1CC8B7A9563461B4294F20@phx.gbl>
References: <20070720192740.9AC2D3E886E@f38.poczta.interia.pl> <359a92830707201310o1442bedembeb45051a4299eee@mail.gmail.com> <3F8F627A-CC84-4EC9-8159-336EF36335CE@ehatchersolutions.com> <359a92830707201445j6c269186j2b35330814e62b60@mail.gmail.com> <BAY114-DAV75FB1CC8B7A9563461B4294F20@phx.gbl>
Mime-Version: 1.0 (Apple Message framework v752.3)
X-Priority: 3
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <82E2D742-C21E-48EA-AFC0-16503EB0A6AE@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Displaying results in the order
Date: Thu, 26 Jul 2007 22:47:03 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


26 jul 2007 kl. 05.38 skrev Dmitry:

> Is there a way to update a document in the Index without causing  
> any change
> to the order in which it comes up in searches?

I would say no, the score is calculated based on the matching terms,  
content length, et c. For details see
<http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/ 
javadoc/org/apache/lucene/search/Similarity.html>

You might want to explain why you want to do this.

-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29433-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 26 20:54:29 2007
Return-Path: <java-user-return-29433-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21261 invoked from network); 26 Jul 2007 20:54:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jul 2007 20:54:29 -0000
Received: (qmail 55834 invoked by uid 500); 26 Jul 2007 20:54:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55801 invoked by uid 500); 26 Jul 2007 20:54:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55790 invoked by uid 99); 26 Jul 2007 20:54:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jul 2007 13:54:23 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jul 2007 13:54:21 -0700
Received: by ug-out-1314.google.com with SMTP id c2so704543ugf
        for <java-user@lucene.apache.org>; Thu, 26 Jul 2007 13:54:00 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:in-reply-to:references:mime-version:x-priority:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=PbJZvM0a9USkOfYK424NmSt1dQ7mAGtV7uFaemnPY1ZXCLNb6az4iYJ9zmu5mK7RyVoDvTd5CJta12t1tYsM/0KaGFGHTeu2yBklg8ChlLOuwZZxAWe/H87+bo4JEjXQJRWHEtnytjBlBMlHFpIhCx3HQeZ7y26jhJIaBsE1ZdI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:in-reply-to:references:mime-version:x-priority:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=e7gyXaCtuUK9owOVoXoRiEgXIuH/hCGm/wfhmiUSCMqW4mPxYT3/P7KgT8s5L3AzGlwGALhtgcbQ5/0NG6l7ZHsMuTKBb7CclHo7/sN38kAEqZ7D5/Y21v1MvShnvO/+9exduzpMjnpRkIn69nDzdqeJbpHb3QbyY9diG92F//o=
Received: by 10.86.98.18 with SMTP id v18mr1476990fgb.1185483240576;
        Thu, 26 Jul 2007 13:54:00 -0700 (PDT)
Received: from ?192.168.2.101? ( [83.249.110.50])
        by mx.google.com with ESMTPS id i5sm7035895mue.2007.07.26.13.53.59
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 26 Jul 2007 13:53:59 -0700 (PDT)
In-Reply-To: <BAY114-DAV16DE73F92F3E4D45A8C55294F20@phx.gbl>
References: <20070720192740.9AC2D3E886E@f38.poczta.interia.pl> <359a92830707201310o1442bedembeb45051a4299eee@mail.gmail.com> <3F8F627A-CC84-4EC9-8159-336EF36335CE@ehatchersolutions.com> <359a92830707201445j6c269186j2b35330814e62b60@mail.gmail.com> <BAY114-DAV75FB1CC8B7A9563461B4294F20@phx.gbl> <BAY114-DAV16DE73F92F3E4D45A8C55294F20@phx.gbl>
Mime-Version: 1.0 (Apple Message framework v752.3)
X-Priority: 3
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <42A056A2-34B7-45F2-9F5B-3D7C1CE285DF@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Linear Hashing in Lucene?
Date: Thu, 26 Jul 2007 22:49:53 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


26 jul 2007 kl. 05.56 skrev Dmitry:

> 1. does exist Ontology Wraper in Lucene implementation?

Not publically available as far as I know. There have been some  
discussion on the forums though, you could try to search for OWL, RDF  
or something using Nabble and get in touch with the authors of those  
threads to see if they came up with something you can use. Feel free  
to report with your success or failure in locating something.

--
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29434-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 26 20:58:15 2007
Return-Path: <java-user-return-29434-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21910 invoked from network); 26 Jul 2007 20:58:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jul 2007 20:58:13 -0000
Received: (qmail 58552 invoked by uid 500); 26 Jul 2007 20:58:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58511 invoked by uid 500); 26 Jul 2007 20:58:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58500 invoked by uid 99); 26 Jul 2007 20:58:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jul 2007 13:58:08 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=MSGID_FROM_MTA_HEADER,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of dmitrytkach1@hotmail.com designates 65.54.246.79 as permitted sender)
Received: from [65.54.246.79] (HELO bay0-omc1-s7.bay0.hotmail.com) (65.54.246.79)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jul 2007 13:58:06 -0700
Received: from hotmail.com ([65.54.169.73]) by bay0-omc1-s7.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.2668);
	 Thu, 26 Jul 2007 13:57:45 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Thu, 26 Jul 2007 13:57:45 -0700
Message-ID: <BAY114-DAV1712BD42B53F3E30CADB494F20@phx.gbl>
Received: from 24.12.157.130 by BAY114-DAV1.phx.gbl with DAV;
	Thu, 26 Jul 2007 20:57:42 +0000
X-Originating-IP: [24.12.157.130]
X-Originating-Email: [dmitrytkach1@hotmail.com]
X-Sender: dmitrytkach1@hotmail.com
From: "Dmitry" <dmitrytkach1@hotmail.com>
To: <java-user@lucene.apache.org>
References: <20070720192740.9AC2D3E886E@f38.poczta.interia.pl> <359a92830707201310o1442bedembeb45051a4299eee@mail.gmail.com> <3F8F627A-CC84-4EC9-8159-336EF36335CE@ehatchersolutions.com> <359a92830707201445j6c269186j2b35330814e62b60@mail.gmail.com> <BAY114-DAV75FB1CC8B7A9563461B4294F20@phx.gbl> <BAY114-DAV16DE73F92F3E4D45A8C55294F20@phx.gbl> <42A056A2-34B7-45F2-9F5B-3D7C1CE285DF@gmail.com>
Subject: Re: Linear Hashing in Lucene?
Date: Thu, 26 Jul 2007 15:57:22 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3028
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
X-OriginalArrivalTime: 26 Jul 2007 20:57:45.0205 (UTC) FILETIME=[9D8CF250:01C7CFC7]
X-Virus-Checked: Checked by ClamAV on apache.org

Karl,
Thanks for info, its very difficult to find something about Orion Algorithm 
and Linear Hashing.
I will check the thread .

DT,
www.ejinz.com
Search Engine Advertisement
----- Original Message ----- 
From: "karl wettin" <karl.wettin@gmail.com>
To: <java-user@lucene.apache.org>
Sent: Thursday, July 26, 2007 3:49 PM
Subject: Re: Linear Hashing in Lucene?


>
> 26 jul 2007 kl. 05.56 skrev Dmitry:
>
>> 1. does exist Ontology Wraper in Lucene implementation?
>
> Not publically available as far as I know. There have been some 
> discussion on the forums though, you could try to search for OWL, RDF  or 
> something using Nabble and get in touch with the authors of those  threads 
> to see if they came up with something you can use. Feel free  to report 
> with your success or failure in locating something.
>
> --
> karl
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29435-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 26 22:12:23 2007
Return-Path: <java-user-return-29435-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46237 invoked from network); 26 Jul 2007 22:12:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jul 2007 22:12:22 -0000
Received: (qmail 88795 invoked by uid 500); 26 Jul 2007 22:12:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88756 invoked by uid 500); 26 Jul 2007 22:12:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88744 invoked by uid 99); 26 Jul 2007 22:12:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jul 2007 15:12:16 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.151 as permitted sender)
Received: from [195.212.29.151] (HELO mtagate2.de.ibm.com) (195.212.29.151)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jul 2007 15:12:14 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate2.de.ibm.com (8.13.8/8.13.8) with ESMTP id l6QMBqaP192666
	for <java-user@lucene.apache.org>; Thu, 26 Jul 2007 22:11:52 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.4) with ESMTP id l6QMBqHQ1499212
	for <java-user@lucene.apache.org>; Fri, 27 Jul 2007 00:11:52 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l6QMBfaj000436
	for <java-user@lucene.apache.org>; Fri, 27 Jul 2007 00:11:41 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l6QMBf8r000344
	for <java-user@lucene.apache.org>; Fri, 27 Jul 2007 00:11:41 +0200
In-Reply-To: <11804824.post@talk.nabble.com>
Subject: Re: Strange Error while deleting Documents from index while indexing.
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF490CFE84.545B32C7-ON88257324.007923D2-88257324.00797CAE@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Thu, 26 Jul 2007 15:06:57 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 27/07/2007 01:11:40
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

Seems like a Lucene.Net issue, better post there to
solve this. One comment - must close the writer
between iterations otherwise next attempt to delete
a document with a reader will fail to obtain
a write lock.

miztaken <manish@ccnep.com.np> wrote on 25/07/2007 23:27:59:

>
> Hi,
> I am dumping the database tables into lucene documents.
> I am doing like this:
>
> 1. Get the rowset from database to be stored as Lucene Document.
> 2. Open IndexReader and check if they are already indexed.
>    If Indexed, delete them and add the new rowset.
>    Continue this till the end
> 3. Close IndexReader
> 4. Open IndexWriter
> 5. Write the same rowset in the index.
> 6. delete the rowset from database..
> 7. Repeat the same process[step 1 - step 7 ] till there are records in
> database.
>
>
> Like this i am doing Indexing and deletion.
> Some key points:
> 1. New indexWriter is opened when there is not instance of indexwriter
> available,but if available it makes use of the same IndexWriter. i.e. My
> index Writer opens once in Step 4 and after that the whole
> process makes use
> of it.
> 2. But i open indexReader for each deletion and close.
> 3. I optimize IndexWriter after certain threshold is crossed.
>
> Now my problem is:
> In the first deletion of document (if present) in step 2 and closing of
> indexreader in step 3. I get no error.
> But in the second loop, i get the error while trying to close the
> IndexReader.
>
> The error is :
> Unable to cast object of type 'System.Collections.
> DictionaryEntry' to type
> 'System.String'.
>
> Stack Trace:
>    at Lucene.Net.Index.IndexFileDeleter.DeleteFiles(ArrayList files)
>    at Lucene.Net.Index.IndexFileDeleter.DeleteFiles()
>    at Lucene.Net.Index.IndexFileDeleter.CommitPendingFiles()
>    at Lucene.Net.Index.IndexReader.Commit()
>    at Lucene.Net.Index.IndexReader.Close()
>    at QueryDatabaseForIndexing.Program.Main(String[] args) in E:\Test
> Applications\ORS Lucene Developments\July 25\
> TotalIndexingAndSearching_25_july\T otalIndexingAndSearching\
> QueryDatabaseForIndexing \Program2.cs:line 159
>
> I dont know whats the cause of this error.
>
> I am in real need of help.
> Please help me find error.
>
>
>
> --
> View this message in context: http://www.nabble.com/Strange-
> Error-while-deleting-Documents-from-index-while-indexing.-
> tf4149570.html#a11804824
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29436-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 27 02:50:47 2007
Return-Path: <java-user-return-29436-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36114 invoked from network); 27 Jul 2007 02:50:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jul 2007 02:50:45 -0000
Received: (qmail 15644 invoked by uid 500); 27 Jul 2007 02:50:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15584 invoked by uid 500); 27 Jul 2007 02:50:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15570 invoked by uid 99); 27 Jul 2007 02:50:39 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jul 2007 19:50:39 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jul 2007 02:50:33 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IEFu8-00086k-Sx
	for java-user@lucene.apache.org; Thu, 26 Jul 2007 19:50:12 -0700
Message-ID: <11822265.post@talk.nabble.com>
Date: Thu, 26 Jul 2007 19:50:12 -0700 (PDT)
From: TimF <tim@timflanders.com>
To: java-user@lucene.apache.org
Subject: Lucene equivalent of SQL DISTINCT for a specific field's "stored
 values"
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: tim@timflanders.com
X-Virus-Checked: Checked by ClamAV on apache.org


I have a field called "category".
Sample data for "category:
   Hello World
   Goodbye World
   Foo Bar
   Mad Mad Mad Mad World

It is tokenized and stored in the index. I tokenize the field because I may
want to search on a specific word(s) in a category but not necessarily the
entire category.

However, I also would like to offer a select box in my web application that
gives the end user the distinct list of stored values for the category
field, which they could choose one of to search on.

I have tried what most people recommend in this forum, use
IndexReader.terms("cateogry") and enumerate that list.

However, obviously this returns the list of distinct terms, 
   Hello , World , Goodbye , Foo , Bar , Mad

not the list of distinct stored values,
   Hello World , Goodbye World , Foo Bar , Mad Mad Mad Mad World

I could add another field to the index that is not tokenized and then
enumerate the terms for that new field, but this seems like a hack, and it
would also add size to the index in that I would be duplicating data for the
category for each document.

Any other ideas?
Thanks,
Tim
-- 
View this message in context: http://www.nabble.com/Lucene-equivalent-of-SQL-DISTINCT-for-a-specific-field%27s-%22stored-values%22-tf4155152.html#a11822265
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29437-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 27 02:56:00 2007
Return-Path: <java-user-return-29437-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37088 invoked from network); 27 Jul 2007 02:55:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jul 2007 02:55:59 -0000
Received: (qmail 19495 invoked by uid 500); 27 Jul 2007 02:55:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19412 invoked by uid 500); 27 Jul 2007 02:55:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19400 invoked by uid 99); 27 Jul 2007 02:55:54 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jul 2007 19:55:54 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jul 2007 02:55:46 +0000
Received: from host68.syd.nuix.com.au (host68.syd.nuix.com.au [192.168.222.68])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id BF4084A81A9
	for <java-user@lucene.apache.org>; Fri, 27 Jul 2007 12:52:14 +1000 (EST)
From: Daniel Noll <daniel@nuix.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene equivalent of SQL DISTINCT for a specific field's "stored values"
Date: Fri, 27 Jul 2007 12:55:00 +1000
User-Agent: KMail/1.9.7
References: <11822265.post@talk.nabble.com>
In-Reply-To: <11822265.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200707271255.01042.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Friday 27 July 2007 12:50:12 TimF wrote:
> However, obviously this returns the list of distinct terms,
>    Hello , World , Goodbye , Foo , Bar , Mad
>
> not the list of distinct stored values,
>    Hello World , Goodbye World , Foo Bar , Mad Mad Mad Mad World
>
> I could add another field to the index that is not tokenized and then
> enumerate the terms for that new field, but this seems like a hack, and it
> would also add size to the index in that I would be duplicating data for
> the category for each document.

That is certainly how I would do it.  This sort of thing only works with 
untokenised fields, unless you have somewhere else you can store the 
untokenised version which is quicker to iterate over.

Daniel


-- 
Daniel Noll
Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
Web: http://nuix.com/                               Fax: +61 2 9212 6902

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29438-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 27 06:12:51 2007
Return-Path: <java-user-return-29438-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88580 invoked from network); 27 Jul 2007 06:12:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jul 2007 06:12:50 -0000
Received: (qmail 56469 invoked by uid 500); 27 Jul 2007 06:12:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55463 invoked by uid 500); 27 Jul 2007 06:12:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55452 invoked by uid 99); 27 Jul 2007 06:12:43 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jul 2007 23:12:43 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jul 2007 06:12:37 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IEJ3g-0003fN-WD
	for java-user@lucene.apache.org; Thu, 26 Jul 2007 23:12:17 -0700
Message-ID: <11823559.post@talk.nabble.com>
Date: Thu, 26 Jul 2007 23:12:16 -0700 (PDT)
From: miztaken <manish@ccnep.com.np>
To: java-user@lucene.apache.org
Subject: Re: Strange Error while deleting Documents from index while
 indexing.
In-Reply-To: <OF490CFE84.545B32C7-ON88257324.007923D2-88257324.00797CAE@il.ibm.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: manish@ccnep.com.np
References: <11804824.post@talk.nabble.com> <OF490CFE84.545B32C7-ON88257324.007923D2-88257324.00797CAE@il.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Where shall i post this issue.
I am naive to Lucene.
And about IndexWriter Closing.
Now i am trying like this:

1. Open New IndexReader.
2. Delete Documents.
3. Close IndexReader.
4. Open New IndexWriter.
5. Write Documents.
6. Close IndexWriter.
7. Repeat the process for n times the in nth time optimize the index before
closing indexwriter.

Is it acceptable.
But according to the http://wiki.apache.org/lucene-java/ImproveIndexingSpeed
It says to use only once instance of IndexWriter.
But in my case, after each iteration i have to close my IndexWriter as you
have suggested.
Is this the only way to do this..
Or is it that, using one instance of IndexWriter is only applicable while
doing indexing without deleting documents..?
Please make me clear.

And another question..?
What can be the possible scenario for threaded indexWriting and deleting
context..?  


-- 
View this message in context: http://www.nabble.com/Strange-Error-while-deleting-Documents-from-index-while-indexing.-tf4149570.html#a11823559
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29439-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 27 08:51:03 2007
Return-Path: <java-user-return-29439-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28065 invoked from network); 27 Jul 2007 08:51:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jul 2007 08:51:01 -0000
Received: (qmail 51764 invoked by uid 500); 27 Jul 2007 08:50:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51727 invoked by uid 500); 27 Jul 2007 08:50:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51716 invoked by uid 99); 27 Jul 2007 08:50:55 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jul 2007 01:50:55 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jul 2007 08:50:48 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IELWm-0007Jy-A9
	for java-user@lucene.apache.org; Fri, 27 Jul 2007 01:50:28 -0700
Message-ID: <11823559.post@talk.nabble.com>
Date: Fri, 27 Jul 2007 01:50:28 -0700 (PDT)
From: miztaken <manish@ccnep.com.np>
To: java-user@lucene.apache.org
Subject: Re: Strange Error while deleting Documents from index while
 indexing.
In-Reply-To: <OF490CFE84.545B32C7-ON88257324.007923D2-88257324.00797CAE@il.ibm.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: manish@ccnep.com.np
References: <11804824.post@talk.nabble.com> <OF490CFE84.545B32C7-ON88257324.007923D2-88257324.00797CAE@il.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Where shall i post this issue.
I am naive to Lucene.
Now i have switched to lucene 1.9.1.4
And about IndexWriter Closing.
Now i am trying like this:

1. Open New IndexReader.
2. Delete Documents.
3. Close IndexReader.
4. Open New IndexWriter.
5. Write Documents.
6. Close IndexWriter.
7. Repeat the process for n times the in nth time optimize the index before
closing indexwriter.

By doing this i am not getting any of my previous problems but i got the new
problem.
When i close my application then i call indexwriter.optimize() and then
indexwriter.close() eventually.
For small amount of indexing, things are working fine but for larger
indexing indexwriter.optimze() terminated unexpectedly and it also didnt
threw any exception.
My application simply shut downs.
After that when i try to open the same index using IndexReader and fetch the
document then it says "trying to access deleted document". After getting
such error, i opened the indexWriter, optimized and then closed it.
Then again i tried to get the documents using indexreader and its working
all fine.

What can be the problem.

Well the pseudo code will be like:

Not Working pseudo-code
1. Open Application (declare int countWriting=0;)
2. Open IndexReader
3. Delete Document
4. Close IndexReader.
5. Open IndexWriter
6. Add Documents
7.  countWriting++;
8. Close IndexWriter.
9. If countWriting==10 then optimize();
10. if user donot cacel, repeat the whole process.
11. else try optimize
The program terminates abnormally in step 11.

But afterwards in the same index, when i try to open indexReader to fetch
documents then it says "trying to access deleted documents" but when i open
indexwriter optimize the index and then close it and open indexreader then
everything works fine.

-- 
View this message in context: http://www.nabble.com/Strange-Error-while-deleting-Documents-from-index-while-indexing.-tf4149570.html#a11823559
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29440-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 27 09:02:30 2007
Return-Path: <java-user-return-29440-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32137 invoked from network); 27 Jul 2007 09:02:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jul 2007 09:02:30 -0000
Received: (qmail 69077 invoked by uid 500); 27 Jul 2007 09:02:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69047 invoked by uid 500); 27 Jul 2007 09:02:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69036 invoked by uid 99); 27 Jul 2007 09:02:23 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jul 2007 02:02:23 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jul 2007 09:02:17 +0000
Received: by ug-out-1314.google.com with SMTP id c2so791583ugf
        for <java-user@lucene.apache.org>; Fri, 27 Jul 2007 02:01:55 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=VTB/ppwTMzmTvaI2nmMDLf2Pl79LCcxvX77g6lP6qZkcyxv14dGaXVSuAVWG5KD+IALhI+aFMElKn1jwEFVr1UYocUKwjZ9uqNq5ymnFqy/5XlPw6GM3Tqo+jKGS1h2GNEKKsZtI3ngJGnWSxTRfET/gP1441uBN21TaZEJMG7c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=BqZJy1ge9zkYg0D1XgjQUdlu7McVFbXMUcBMz2silGD/IDcEdit2YFFhkYOUByoqS7ycgKT6P+ug5XOBR76la/Zn3Ysn+XyVFr8uyfNeQHP4QiHT/KI8AlfUka32jBH0iRs4rhg+qLCStdim7h7X3P94X51uEN9JkpjFAp6qsAA=
Received: by 10.86.82.16 with SMTP id f16mr1801722fgb.1185526914884;
        Fri, 27 Jul 2007 02:01:54 -0700 (PDT)
Received: from ?192.168.2.101? ( [83.249.110.50])
        by mx.google.com with ESMTPS id g1sm9234927muf.2007.07.27.02.01.52
        (version=TLSv1/SSLv3 cipher=OTHER);
        Fri, 27 Jul 2007 02:01:52 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <11823559.post@talk.nabble.com>
References: <11804824.post@talk.nabble.com> <OF490CFE84.545B32C7-ON88257324.007923D2-88257324.00797CAE@il.ibm.com> <11823559.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <563E9174-B8AB-45FA-B117-6D2DDA974791@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Strange Error while deleting Documents from index while indexing.
Date: Fri, 27 Jul 2007 10:57:45 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


27 jul 2007 kl. 10.50 skrev miztaken:

>
> My application simply shut downs.
> After that when i try to open the same index using IndexReader and  
> fetch the
> document then it says "trying to access deleted document". After  
> getting
> such error, i opened the indexWriter, optimized and then closed it.
> Then again i tried to get the documents using indexreader and its  
> working
> all fine.
>
> What can be the problem.
>
> Well the pseudo code will be like:

Can you please supply an isolated and working test case that  
demonstrate your problem?

Can you use IndexWriter#deleteDocument instead?

-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29441-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 27 09:05:18 2007
Return-Path: <java-user-return-29441-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32636 invoked from network); 27 Jul 2007 09:05:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jul 2007 09:05:15 -0000
Received: (qmail 72213 invoked by uid 500); 27 Jul 2007 09:05:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72178 invoked by uid 500); 27 Jul 2007 09:05:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72167 invoked by uid 99); 27 Jul 2007 09:05:09 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jul 2007 02:05:09 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [213.133.33.40] (HELO smtp.is.nl) (213.133.33.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jul 2007 09:05:03 +0000
Received: from [213.133.51.241] (HELO hai01.hippo.local)
  by smtp.is.nl (CommuniGate Pro SMTP 5.0.10)
  with ESMTP id 20267413 for java-user@lucene.apache.org; Fri, 27 Jul 2007 09:21:58 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6619.12
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Search terms on a single "instance" of field
Date: Fri, 27 Jul 2007 09:21:57 +0200
Message-ID: <A955EA1F8FE31749AEC8C998082F6C7C01ECDB3A@hai01.hippo.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Search terms on a single "instance" of field
Thread-Index: AcfPu9S2UexsrPydRBmHNVnR+m5p5gAYgUIg
From: "Ard Schrijvers" <a.schrijvers@hippo.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,
>=20

> Company AB", ...). With this I=B4d like to search for documents that =
has
> daniel and president on the same field, because in a same=20
> text, can exist
> daniel and president in different fields. Is this possible??

Not totally sure wether I understand your problem, because it does not =
sound like a problem at all:=20

If you just have a query that looks like: fieldA:termA + fieldA:termB =
you are looking for documents which have termA AND termB in fieldA.=20

Isn't that all you want/need?

Regards Ard
=20
> I know that if
> I had and index where the Document is a phrase like this, it=20
> would solve my
> problem, but I=B4d like to stay with only one index.
>=20
>    Hope I made myself clear.
>=20
> []s
>     Rossini
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29442-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 27 11:44:00 2007
Return-Path: <java-user-return-29442-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6508 invoked from network); 27 Jul 2007 11:43:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jul 2007 11:43:58 -0000
Received: (qmail 2605 invoked by uid 500); 27 Jul 2007 11:43:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2553 invoked by uid 500); 27 Jul 2007 11:43:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2542 invoked by uid 99); 27 Jul 2007 11:43:52 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jul 2007 04:43:52 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jul 2007 11:43:47 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IEOEA-0003QQ-RD
	for java-user@lucene.apache.org; Fri, 27 Jul 2007 04:43:26 -0700
Message-ID: <11827583.post@talk.nabble.com>
Date: Fri, 27 Jul 2007 04:43:26 -0700 (PDT)
From: miztaken <manish@ccnep.com.np>
To: java-user@lucene.apache.org
Subject: Re: Strange Error while deleting Documents from index while
 indexing.
In-Reply-To: <563E9174-B8AB-45FA-B117-6D2DDA974791@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: manish@ccnep.com.np
References: <11804824.post@talk.nabble.com> <OF490CFE84.545B32C7-ON88257324.007923D2-88257324.00797CAE@il.ibm.com> <11823559.post@talk.nabble.com> <563E9174-B8AB-45FA-B117-6D2DDA974791@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


>Can you use IndexWriter#deleteDocument instead?

No i cant use this method.
I dont know docid and i dont wanna search for it. It will only add extra
time.
I am deleting the document on the basis of unique key field.


>Can you please supply an isolated and working test case that  
>demonstrate your problem?

Well my application is used to index the database rowsets so i wont be able
to give you running code but i have tried my best to keep it elaborative.
Please check the attachment.
I have attached a C# file.
Please open with any text editor of your choice.
Find the attachment here:  http://www.nabble.com/file/p11827583/Program2.cs
Program2.cs 

Please help me.

-- 
View this message in context: http://www.nabble.com/Strange-Error-while-deleting-Documents-from-index-while-indexing.-tf4149570.html#a11827583
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29443-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 27 11:58:27 2007
Return-Path: <java-user-return-29443-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16272 invoked from network); 27 Jul 2007 11:58:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jul 2007 11:58:26 -0000
Received: (qmail 20490 invoked by uid 500); 27 Jul 2007 11:58:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20461 invoked by uid 500); 27 Jul 2007 11:58:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20450 invoked by uid 99); 27 Jul 2007 11:58:19 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jul 2007 04:58:19 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jul 2007 11:58:11 +0000
Received: by ug-out-1314.google.com with SMTP id c2so813300ugf
        for <java-user@lucene.apache.org>; Fri, 27 Jul 2007 04:57:50 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=aNMHx0tCz80P5MxYGtEjH6qJF5Pgkco6Zma0DtBAcZMeTUfr2Allcyspci59TgGGo1Yg659ZEkxm0Bp7xkFr2aByYg4aVFNguTyXCGBQL3+dJCzvMzCB5Ax/0mxo5mMJJK4jXniauBqXLKoi1cbxalonAsKm8hiQKHH3uejaDW0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=qQC9a8h+hKPY+E1Bea//txqdKjiRG+UQA+XxanXz/AE3wBzgh6V60GTdkhcueWIt0LGZ+OOyA307kgwyvbQUNfXXE6IG8xBEIGMaR8ajbFQsLX6yrMizCBTdxK4P8gag176FjCK8NmtQ7UqXmToYAAm9LgUeSPf64Pl4GKsG4LU=
Received: by 10.86.68.16 with SMTP id q16mr1902208fga.1185537470061;
        Fri, 27 Jul 2007 04:57:50 -0700 (PDT)
Received: from ?192.168.2.101? ( [83.249.110.50])
        by mx.google.com with ESMTPS id g1sm9903551muf.2007.07.27.04.57.49
        (version=TLSv1/SSLv3 cipher=OTHER);
        Fri, 27 Jul 2007 04:57:49 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <11827583.post@talk.nabble.com>
References: <11804824.post@talk.nabble.com> <OF490CFE84.545B32C7-ON88257324.007923D2-88257324.00797CAE@il.ibm.com> <11823559.post@talk.nabble.com> <563E9174-B8AB-45FA-B117-6D2DDA974791@gmail.com> <11827583.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <7C95AE9D-0818-4254-BB9D-6343B5A4ED29@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Strange Error while deleting Documents from index while indexing.
Date: Fri, 27 Jul 2007 13:53:41 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


27 jul 2007 kl. 13.43 skrev miztaken:

>
>> Can you use IndexWriter#deleteDocument instead?
>
> No i cant use this method.
> I dont know docid and i dont wanna search for it. It will only add  
> extra
> time.
> I am deleting the document on the basis of unique key field.

You can do that with IndexWriter#deleteDocuments(Term)

And if Lucene.Net does not support that, can you try doing it by  
searching and deleting just to see how it changes the outcome?

>> Can you please supply an isolated and working test case that
>> demonstrate your problem?
>
> Find the attachment here:  http://www.nabble.com/file/p11827583/ 
> Program2.cs

That is a fairly large amount of code. And as it is C# I have nothing  
to test it on. Too much for me to compile and run in the head. I was  
hoping for a few line of code that demonstrated the problem and  
nothing else.


-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29444-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 27 14:34:15 2007
Return-Path: <java-user-return-29444-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90167 invoked from network); 27 Jul 2007 14:34:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jul 2007 14:34:15 -0000
Received: (qmail 23191 invoked by uid 500); 27 Jul 2007 14:34:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22938 invoked by uid 500); 27 Jul 2007 14:34:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22927 invoked by uid 99); 27 Jul 2007 14:34:07 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jul 2007 07:34:07 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rafael.rossini@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jul 2007 14:34:02 +0000
Received: by nf-out-0910.google.com with SMTP id d3so54137nfc
        for <java-user@lucene.apache.org>; Fri, 27 Jul 2007 07:33:41 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=MHfxdVtXMkxmmbGyWWyRyLvZjRd9rTM5ISrK+60cKShvud1PkHu8yj4T1/Azxuv0gG0iliRKdtABgvkuoKdqkMgBEuO04FG1c+NDZ03vpICQN8akI9ONzjS1G9oMFNzx9obSh7IXc3FsP8K3mv5IAfRkdIwqhcR0xTwLpdvxJFM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=gyJ3bgJXZMWVRfaSqlNKkdWDfFWgYQlbFBCOAV9Rnkci84LD6DAF1hKc30B66yOtn5KWpKBhHeDgO1BQDNjDEr4M7hBzo7hK1uFB0CjNbYFwQZ38+FG5GJwceFL5NCTTk52VSZwI54A4eLsZJHlsJKtdZfy/+LGMwu4xu4syaoQ=
Received: by 10.82.178.11 with SMTP id a11mr2708612buf.1185546821434;
        Fri, 27 Jul 2007 07:33:41 -0700 (PDT)
Received: by 10.82.113.12 with HTTP; Fri, 27 Jul 2007 07:33:41 -0700 (PDT)
Message-ID: <a8d89b3b0707270733r11ac01f4o77307033d97360d3@mail.gmail.com>
Date: Fri, 27 Jul 2007 11:33:41 -0300
From: "Rafael Rossini" <rafael.rossini@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Search terms on a single "instance" of field
In-Reply-To: <A955EA1F8FE31749AEC8C998082F6C7C01ECDB3A@hai01.hippo.local>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4961_2911713.1185546821385"
References: <A955EA1F8FE31749AEC8C998082F6C7C01ECDB3A@hai01.hippo.local>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4961_2911713.1185546821385
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Actually no,

   Because I'd like to retrieve terms that were computed on the same
instance of Field. Taking your example to ilustrate better, I have 2
documents, on documentA I structured one field, Field("fieldA", "termA
termB", customAnalyzer). On documentB I structured 2 fields, Field("fieldA"=
,
"termA termC", customAnalyzer) and Field("fieldA", "termB termC",
customAnalyzer).

   The problem is, if I search like you suggested, fieldA:termA +
fieldA:termB, I will get both documents, but I want only documentA. For tha=
t
to happen, somehow, somewhere should be an information that tells that on
documentA, termA and termB where indexed on the same instance of fieldA. I=
=B4m
guessing this is not possible, but it would be great if someone has an idei=
a
to solve this.

Thanks for the response Ard.

[]s
    Rossini


On 7/27/07, Ard Schrijvers <a.schrijvers@hippo.nl> wrote:
>
> Hello,
> >
>
> > Company AB", ...). With this I=B4d like to search for documents that ha=
s
> > daniel and president on the same field, because in a same
> > text, can exist
> > daniel and president in different fields. Is this possible??
>
> Not totally sure wether I understand your problem, because it does not
> sound like a problem at all:
>
> If you just have a query that looks like: fieldA:termA + fieldA:termB you
> are looking for documents which have termA AND termB in fieldA.
>
> Isn't that all you want/need?
>
> Regards Ard
>
> > I know that if
> > I had and index where the Document is a phrase like this, it
> > would solve my
> > problem, but I=B4d like to stay with only one index.
> >
> >    Hope I made myself clear.
> >
> > []s
> >     Rossini
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_4961_2911713.1185546821385--

From java-user-return-29445-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 27 15:23:51 2007
Return-Path: <java-user-return-29445-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61167 invoked from network); 27 Jul 2007 15:23:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jul 2007 15:23:23 -0000
Received: (qmail 6824 invoked by uid 500); 27 Jul 2007 15:23:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6784 invoked by uid 500); 27 Jul 2007 15:23:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6773 invoked by uid 99); 27 Jul 2007 15:23:16 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jul 2007 08:23:16 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of eduardobb@gmail.com designates 209.85.146.181 as permitted sender)
Received: from [209.85.146.181] (HELO wa-out-1112.google.com) (209.85.146.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jul 2007 15:23:12 +0000
Received: by wa-out-1112.google.com with SMTP id j40so1039716wah
        for <java-user@lucene.apache.org>; Fri, 27 Jul 2007 08:22:51 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=I/IeXGyNPh2hZVwyD96Y8lYhVxL+3QDgRUpSAnaEt6JZBw5ffPomG5AQZ3nCqcdwfIJgOh/aepNxM3ic4aqGpLxZ2EBzcQZBEXFHjuWeOaCnd3I0hNgXyjOjm5yFIXbf+mA0BOdmfuy5msIWFQfFxtART5bsA9ESG7L93txW6Uw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=ozYrCACFkkLm6Ul9jpJz8S9Jn99ILgBagWa2ZJagUCjz6FYWtlx+rnEkuegw8mTcFJJ2FvcOZP/cjFLUvAzSJqKyDrdXEGennJCYMpKkfuKeu55HgYh0Lo3du7DNftwIDlwGzrVdbZHIZamAYAxw+Xrdll9KTopn1mro7tVI7o8=
Received: by 10.114.53.1 with SMTP id b1mr3018597waa.1185549771597;
        Fri, 27 Jul 2007 08:22:51 -0700 (PDT)
Received: by 10.114.150.12 with HTTP; Fri, 27 Jul 2007 08:22:51 -0700 (PDT)
Message-ID: <9708bc630707270822r541ffdd1t9b9e3732f9afaf80@mail.gmail.com>
Date: Fri, 27 Jul 2007 11:22:51 -0400
From: "Eduardo Botelho" <eduardobb@gmail.com>
To: java-user@lucene.apache.org
Subject: Size of field?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6235_7376367.1185549771431"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_6235_7376367.1185549771431
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi guys,

I would like to know if exist some limit of size for the fields of a
document.

I'm with the following problem:
When a term is after a certain amount of characters (approximately 87300) in
a field, the search does not find de occurrency.
If I divide my field in pages, the terms are found normally.
This problem occours when I make an exact query (query between quotes)

What can be happening?

I'm using BrazilianAnalyzer and StandardAnalyzer(for tests only) for both,
search and indexation.

thanks...

Sorry for my poor english...

------=_Part_6235_7376367.1185549771431--

From java-user-return-29446-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 27 18:55:12 2007
Return-Path: <java-user-return-29446-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97242 invoked from network); 27 Jul 2007 18:55:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jul 2007 18:55:10 -0000
Received: (qmail 65290 invoked by uid 500); 27 Jul 2007 18:55:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65244 invoked by uid 500); 27 Jul 2007 18:55:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65233 invoked by uid 99); 27 Jul 2007 18:55:02 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jul 2007 11:55:02 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of peterlkeegan@gmail.com designates 64.233.162.230 as permitted sender)
Received: from [64.233.162.230] (HELO nz-out-0506.google.com) (64.233.162.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jul 2007 18:54:58 +0000
Received: by nz-out-0506.google.com with SMTP id i28so712281nzi
        for <java-user@lucene.apache.org>; Fri, 27 Jul 2007 11:54:37 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=CgHbslVBqBQh6E3VEi5Ibs8r++5PQdc4Es5eOLpOFQl//S2a1z2rpBYX5FPqMb+5mGuGm7dLcH6U9Mau5BVM8TfckFXPf4sgeZK8QiZ9r1mk2fbqYWBUT3G8eptZ79HcQ99Y4Vw016npTN0gwqF+kGiGc3TGfnlsIdiujdeQDkA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=MUYEerbTLRqWqPamVyQenKciIn+zyAvS3MZIChdJYyZt0YikovNCSo19M+D8vr5dPGuihp82PXRLbZFEjS99RO43lP+/J2qZevULDyzWh1tlSLP/31TV3soB7JcaC+ipmWcBcD7lSJVcydKg0ppxVSpC+6oSm56Pd0Tz3Cd3bao=
Received: by 10.115.90.1 with SMTP id s1mr3213809wal.1185562476656;
        Fri, 27 Jul 2007 11:54:36 -0700 (PDT)
Received: by 10.114.135.8 with HTTP; Fri, 27 Jul 2007 11:54:36 -0700 (PDT)
Message-ID: <e994873a0707271154o4efcff41h698518cf91575a8d@mail.gmail.com>
Date: Fri, 27 Jul 2007 14:54:36 -0400
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Payloads and PhraseQuery
In-Reply-To: <21C823CE-3524-4B6E-8AFC-633882B3D679@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8323_12033002.1185562476608"
References: <e994873a0706270745o458b969aqdd0204b0c4027ec4@mail.gmail.com>
	 <1C6823A4-BA05-4C20-8B74-3BE527E6CD97@apache.org>
	 <e994873a0707111719o2a083862h6aaafca529c2cfcf@mail.gmail.com>
	 <Pine.LNX.4.58.0707111733080.28722@hal.rescomp.berkeley.edu>
	 <e994873a0707120520lfee8853i7f37cf1c08c7d658@mail.gmail.com>
	 <2C5B5373-6A53-49EC-B168-010D57F432DB@apache.org>
	 <Pine.LNX.4.58.0707121359330.21045@hal.rescomp.berkeley.edu>
	 <21C823CE-3524-4B6E-8AFC-633882B3D679@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_8323_12033002.1185562476608
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I have a question about the way fields are analyzed and inverted by the
index writer. Currently, if a field has multiple occurrences in a document,
each occurrence is analyzed separately (see DocumentsWriter.processField).
Is it safe to assume that this behavior won't change in the future? The
reason I ask is that my custom analyzer's 'tokenStream' method creates a
custom filter which produces a payload based on the existence of each field
occurrence. However, if DocumentsWriter was changed and combined all the
occurrences before inversion, my scheme wouldn't work.  Since payloads are
created by filters/tokenizers, it helps to keep things flexible.

Thanks,
Peter


On 7/12/07, Grant Ingersoll <gsingers@apache.org> wrote:
>
>
> On Jul 12, 2007, at 6:12 PM, Chris Hostetter wrote:
>
>
> >
> > Hmm... okay so the issue is that in order to get the payload data, you
> > have to have a TermPositions instance.
> >
> > instead of adding getPayload methods to the Spans class (which as Paul
> > points out, can have nesting issues) perhaps more general solutions
> > would
> > be:
> >
> > a) a more high level getPayload API that let's you get a payload
> > arbitrarily for a toc/position (perhaps as part of the TernDocs
> > API?) ...
> > then for Spans you could use this new API with Spans.start() and
> > Spans.end(). (and all the positions in between)
>
> Not sure I follow this.  I don't see the fit w/ TermDocs.
> >
> > b) add a variation of the TermPositions class to allow people to
> > iterate
> > through the terms of a TermDoc in position order (TermPosition first
> > iterates over the Terms and then over the positions) ... then you
> > could
> > seek(span.start()) to get the Payload data
> >
> > c) add methods to the Spans API to get the subspans (if any) ... this
> > would be the Spans corrilary to getTerms() and would always return
> > TermSpans which would have TermPositions for getting payload data.
>
>
> This could be a good alternative.
>
> When we first talked about payloads we wondered if we could just make
> all Queries into SpanQueries by passing TermPositions instead of term
> docs, but in the end decided not to do it because of performance
> issues (some of which are lessened by lazy loading of TermPositions.
>
> The thing is, I think, that the Spans is already moving you along in
> the term positions, so it just seems like a natural fit to have it
> there, even if there is nesting.  It doesn't seem like it would be
> that hard to then return back the nesting stuff b/c you are just
> collating the results from the underlying SpanTermQuery.  Having said
> that, I haven't looked into the actual code, so take that w/ a grain
> of salt.
>
> I will try to do some more investigation, as others are welcome to
> do.  Perhaps we should move this to dev?
>
> Cheers,
> Grant
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_8323_12033002.1185562476608--

From java-user-return-29447-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 27 19:00:37 2007
Return-Path: <java-user-return-29447-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98297 invoked from network); 27 Jul 2007 19:00:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jul 2007 19:00:35 -0000
Received: (qmail 76696 invoked by uid 500); 27 Jul 2007 19:00:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76639 invoked by uid 500); 27 Jul 2007 19:00:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76628 invoked by uid 99); 27 Jul 2007 19:00:28 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jul 2007 12:00:28 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of peterlkeegan@gmail.com designates 64.233.162.227 as permitted sender)
Received: from [64.233.162.227] (HELO nz-out-0506.google.com) (64.233.162.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jul 2007 19:00:24 +0000
Received: by nz-out-0506.google.com with SMTP id i28so713169nzi
        for <java-user@lucene.apache.org>; Fri, 27 Jul 2007 12:00:03 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=lAocpHgoiRh8tdSFhIe/ia5I3s6JNKlx0Kqj3REw8KA7iHOQ7BRzXI10Ny/4G2q31nxVs3OWCrjm19i5MLxZsCDJX2QHNubTQE4/HuBRz+lNol0BqQKQjPLM0YehMHThWCam4BWNgb5u2uM6od7nsSlXG/ZZ5LvDwYkq+atLiWo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ePNwuT2o4GpxGUZgZjRV40xMm35jJULiTbWTfApGr0xhO3ZIRtTTgYtdoD0Jl8tEOoXcMiAhStoE8q7pBfF52/z2SnIjR3r38fwGuhcCJgVjh5N0eSwuYpyXGyvvChpIteV4PF2/y6dM7Q1G11tAt7Lbxy4Z9Ng+Hx9/SWPfCLA=
Received: by 10.114.204.7 with SMTP id b7mr3206946wag.1185562802698;
        Fri, 27 Jul 2007 12:00:02 -0700 (PDT)
Received: by 10.114.135.8 with HTTP; Fri, 27 Jul 2007 12:00:02 -0700 (PDT)
Message-ID: <e994873a0707271200j35cd9d44y753d43acb1a94920@mail.gmail.com>
Date: Fri, 27 Jul 2007 15:00:02 -0400
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Payloads and PhraseQuery
In-Reply-To: <e994873a0707271154o4efcff41h698518cf91575a8d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8363_16610055.1185562802462"
References: <e994873a0706270745o458b969aqdd0204b0c4027ec4@mail.gmail.com>
	 <1C6823A4-BA05-4C20-8B74-3BE527E6CD97@apache.org>
	 <e994873a0707111719o2a083862h6aaafca529c2cfcf@mail.gmail.com>
	 <Pine.LNX.4.58.0707111733080.28722@hal.rescomp.berkeley.edu>
	 <e994873a0707120520lfee8853i7f37cf1c08c7d658@mail.gmail.com>
	 <2C5B5373-6A53-49EC-B168-010D57F432DB@apache.org>
	 <Pine.LNX.4.58.0707121359330.21045@hal.rescomp.berkeley.edu>
	 <21C823CE-3524-4B6E-8AFC-633882B3D679@apache.org>
	 <e994873a0707271154o4efcff41h698518cf91575a8d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_8363_16610055.1185562802462
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I guess this also ties in with 'getPositionIncrementGap', which is relevant
to fields with multiple occurrences.

Peter

On 7/27/07, Peter Keegan <peterlkeegan@gmail.com> wrote:
>
> I have a question about the way fields are analyzed and inverted by the
> index writer. Currently, if a field has multiple occurrences in a document,
> each occurrence is analyzed separately (see DocumentsWriter.processField).
> Is it safe to assume that this behavior won't change in the future? The
> reason I ask is that my custom analyzer's 'tokenStream' method creates a
> custom filter which produces a payload based on the existence of each field
> occurrence. However, if DocumentsWriter was changed and combined all the
> occurrences before inversion, my scheme wouldn't work.  Since payloads are
> created by filters/tokenizers, it helps to keep things flexible.
>
> Thanks,
> Peter
>
>
> On 7/12/07, Grant Ingersoll <gsingers@apache.org> wrote:
> >
> >
> > On Jul 12, 2007, at 6:12 PM, Chris Hostetter wrote:
> >
> >
> > >
> > > Hmm... okay so the issue is that in order to get the payload data, you
> > > have to have a TermPositions instance.
> > >
> > > instead of adding getPayload methods to the Spans class (which as Paul
> >
> > > points out, can have nesting issues) perhaps more general solutions
> > > would
> > > be:
> > >
> > > a) a more high level getPayload API that let's you get a payload
> > > arbitrarily for a toc/position (perhaps as part of the TernDocs
> > > API?) ...
> > > then for Spans you could use this new API with Spans.start() and
> > > Spans.end(). (and all the positions in between)
> >
> > Not sure I follow this.  I don't see the fit w/ TermDocs.
> > >
> > > b) add a variation of the TermPositions class to allow people to
> > > iterate
> > > through the terms of a TermDoc in position order (TermPosition first
> > > iterates over the Terms and then over the positions) ... then you
> > > could
> > > seek(span.start()) to get the Payload data
> > >
> > > c) add methods to the Spans API to get the subspans (if any) ... this
> > > would be the Spans corrilary to getTerms() and would always return
> > > TermSpans which would have TermPositions for getting payload data.
> >
> >
> > This could be a good alternative.
> >
> > When we first talked about payloads we wondered if we could just make
> > all Queries into SpanQueries by passing TermPositions instead of term
> > docs, but in the end decided not to do it because of performance
> > issues (some of which are lessened by lazy loading of TermPositions.
> >
> > The thing is, I think, that the Spans is already moving you along in
> > the term positions, so it just seems like a natural fit to have it
> > there, even if there is nesting.  It doesn't seem like it would be
> > that hard to then return back the nesting stuff b/c you are just
> > collating the results from the underlying SpanTermQuery.  Having said
> > that, I haven't looked into the actual code, so take that w/ a grain
> > of salt.
> >
> > I will try to do some more investigation, as others are welcome to
> > do.  Perhaps we should move this to dev?
> >
> > Cheers,
> > Grant
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_8363_16610055.1185562802462--

From java-user-return-29448-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 28 00:50:45 2007
Return-Path: <java-user-return-29448-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7778 invoked from network); 28 Jul 2007 00:50:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jul 2007 00:50:44 -0000
Received: (qmail 37849 invoked by uid 500); 28 Jul 2007 00:50:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37809 invoked by uid 500); 28 Jul 2007 00:50:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37798 invoked by uid 99); 28 Jul 2007 00:50:38 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jul 2007 17:50:38 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Jul 2007 00:50:32 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IEaVY-00007C-2C
	for java-user@lucene.apache.org; Fri, 27 Jul 2007 17:50:12 -0700
Message-ID: <11838713.post@talk.nabble.com>
Date: Fri, 27 Jul 2007 17:50:12 -0700 (PDT)
From: testn <test1@doramail.com>
To: java-user@lucene.apache.org
Subject: NPE in MultiReader
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: test1@doramail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Every once in a while I got the following exception with Lucene 2.2. Do you
have any idea?

Thanks,

java.lang.NullPointerException
        at
org.apache.lucene.index.MultiReader.getFieldNames(MultiReader.java:264)
        at
org.apache.lucene.index.SegmentMerger.mergeFields(SegmentMerger.java:180)
        at
org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:97)
        at
org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:1883)
        at
org.apache.lucene.index.IndexWriter.flushRamSegments(IndexWriter.java:1741)
        at
org.apache.lucene.index.IndexWriter.flushRamSegments(IndexWriter.java:1733)
        at
org.apache.lucene.index.IndexWriter.maybeFlushRamSegments(IndexWriter.java:1727)
        at
org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:1004)
        at
org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:983)
        at
org.springmodules.lucene.index.factory.SimpleLuceneIndexWriter.addDocument(SimpleLucen
eIndexWriter.java:44)
        at
org.springmodules.lucene.index.object.database.DefaultDatabaseIndexer.addDocumentsInIn
dex(DefaultDatabaseIndexer.java:274)
        at
org.springmodules.lucene.index.object.database.DefaultDatabaseIndexer.doHandleRequest(
DefaultDatabaseIndexer.java:306)
        at
org.springmodules.lucene.index.object.database.DefaultDatabaseIndexer.index(DefaultDat
abaseIndexer.java:354)

-- 
View this message in context: http://www.nabble.com/NPE-in-MultiReader-tf4160812.html#a11838713
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29449-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 28 01:19:54 2007
Return-Path: <java-user-return-29449-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12708 invoked from network); 28 Jul 2007 01:19:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jul 2007 01:19:51 -0000
Received: (qmail 66819 invoked by uid 500); 28 Jul 2007 01:19:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66557 invoked by uid 500); 28 Jul 2007 01:19:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66540 invoked by uid 99); 28 Jul 2007 01:19:45 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jul 2007 18:19:45 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dmitrytkach1@hotmail.com designates 65.54.246.158 as permitted sender)
Received: from [65.54.246.158] (HELO bay0-omc2-s22.bay0.hotmail.com) (65.54.246.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Jul 2007 01:19:26 +0000
Received: from hotmail.com ([65.54.169.79]) by bay0-omc2-s22.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.2668);
	 Fri, 27 Jul 2007 18:19:06 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Fri, 27 Jul 2007 18:19:06 -0700
Message-ID: <BAY114-DAV7FC6600BBF4634B89E2C694EC0@phx.gbl>
Received: from 24.12.157.130 by BAY114-DAV7.phx.gbl with DAV;
	Sat, 28 Jul 2007 01:19:04 +0000
X-Originating-IP: [24.12.157.130]
X-Originating-Email: [dmitrytkach1@hotmail.com]
X-Sender: dmitrytkach1@hotmail.com
From: "Dmitry" <dmitrytkach1@hotmail.com>
To: <java-user@lucene.apache.org>
References: <11838713.post@talk.nabble.com>
Subject: Re: NPE in MultiReader
Date: Fri, 27 Jul 2007 20:18:34 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3028
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
X-OriginalArrivalTime: 28 Jul 2007 01:19:06.0029 (UTC) FILETIME=[4A768DD0:01C7D0B5]
X-Virus-Checked: Checked by ClamAV on apache.org

What the conditions you are following when running lucene - like 
configuration, parameters..can you describe more?
thanks,
dt,
www.ejinz.com
Search Engine News

----- Original Message ----- 
From: "testn" <test1@doramail.com>
To: <java-user@lucene.apache.org>
Sent: Friday, July 27, 2007 7:50 PM
Subject: NPE in MultiReader


>
> Every once in a while I got the following exception with Lucene 2.2. Do 
> you
> have any idea?
>
> Thanks,
>
> java.lang.NullPointerException
>        at
> org.apache.lucene.index.MultiReader.getFieldNames(MultiReader.java:264)
>        at
> org.apache.lucene.index.SegmentMerger.mergeFields(SegmentMerger.java:180)
>        at
> org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:97)
>        at
> org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:1883)
>        at
> org.apache.lucene.index.IndexWriter.flushRamSegments(IndexWriter.java:1741)
>        at
> org.apache.lucene.index.IndexWriter.flushRamSegments(IndexWriter.java:1733)
>        at
> org.apache.lucene.index.IndexWriter.maybeFlushRamSegments(IndexWriter.java:1727)
>        at
> org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:1004)
>        at
> org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:983)
>        at
> org.springmodules.lucene.index.factory.SimpleLuceneIndexWriter.addDocument(SimpleLucen
> eIndexWriter.java:44)
>        at
> org.springmodules.lucene.index.object.database.DefaultDatabaseIndexer.addDocumentsInIn
> dex(DefaultDatabaseIndexer.java:274)
>        at
> org.springmodules.lucene.index.object.database.DefaultDatabaseIndexer.doHandleRequest(
> DefaultDatabaseIndexer.java:306)
>        at
> org.springmodules.lucene.index.object.database.DefaultDatabaseIndexer.index(DefaultDat
> abaseIndexer.java:354)
>
> -- 
> View this message in context: 
> http://www.nabble.com/NPE-in-MultiReader-tf4160812.html#a11838713
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29450-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 28 01:55:05 2007
Return-Path: <java-user-return-29450-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22578 invoked from network); 28 Jul 2007 01:55:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jul 2007 01:55:03 -0000
Received: (qmail 82624 invoked by uid 500); 28 Jul 2007 01:54:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82581 invoked by uid 500); 28 Jul 2007 01:54:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82570 invoked by uid 99); 28 Jul 2007 01:54:58 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jul 2007 18:54:58 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Jul 2007 01:54:49 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IEbVk-0001HH-Mz
	for java-user@lucene.apache.org; Fri, 27 Jul 2007 18:54:28 -0700
Message-ID: <11839042.post@talk.nabble.com>
Date: Fri, 27 Jul 2007 18:54:28 -0700 (PDT)
From: testn <test1@doramail.com>
To: java-user@lucene.apache.org
Subject: Re: NPE in MultiReader
In-Reply-To: <BAY114-DAV7FC6600BBF4634B89E2C694EC0@phx.gbl>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: test1@doramail.com
References: <11838713.post@talk.nabble.com> <BAY114-DAV7FC6600BBF4634B89E2C694EC0@phx.gbl>
X-Virus-Checked: Checked by ClamAV on apache.org


- Using Spring Module 0.8a
- Using RAM directory
- Having about 100,000 documents
- Index all documents in one thread
- Perform the optimize only at the end of the indexing process
- Using Lucene 2.2


Dmitry-17 wrote:
> 
> What the conditions you are following when running lucene - like 
> configuration, parameters..can you describe more?
> thanks,
> dt,
> www.ejinz.com
> Search Engine News
> 
> ----- Original Message ----- 
> From: "testn" <test1@doramail.com>
> To: <java-user@lucene.apache.org>
> Sent: Friday, July 27, 2007 7:50 PM
> Subject: NPE in MultiReader
> 
> 
>>
>> Every once in a while I got the following exception with Lucene 2.2. Do 
>> you
>> have any idea?
>>
>> Thanks,
>>
>> java.lang.NullPointerException
>>        at
>> org.apache.lucene.index.MultiReader.getFieldNames(MultiReader.java:264)
>>        at
>> org.apache.lucene.index.SegmentMerger.mergeFields(SegmentMerger.java:180)
>>        at
>> org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:97)
>>        at
>> org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:1883)
>>        at
>> org.apache.lucene.index.IndexWriter.flushRamSegments(IndexWriter.java:1741)
>>        at
>> org.apache.lucene.index.IndexWriter.flushRamSegments(IndexWriter.java:1733)
>>        at
>> org.apache.lucene.index.IndexWriter.maybeFlushRamSegments(IndexWriter.java:1727)
>>        at
>> org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:1004)
>>        at
>> org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:983)
>>        at
>> org.springmodules.lucene.index.factory.SimpleLuceneIndexWriter.addDocument(SimpleLucen
>> eIndexWriter.java:44)
>>        at
>> org.springmodules.lucene.index.object.database.DefaultDatabaseIndexer.addDocumentsInIn
>> dex(DefaultDatabaseIndexer.java:274)
>>        at
>> org.springmodules.lucene.index.object.database.DefaultDatabaseIndexer.doHandleRequest(
>> DefaultDatabaseIndexer.java:306)
>>        at
>> org.springmodules.lucene.index.object.database.DefaultDatabaseIndexer.index(DefaultDat
>> abaseIndexer.java:354)
>>
>> -- 
>> View this message in context: 
>> http://www.nabble.com/NPE-in-MultiReader-tf4160812.html#a11838713
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/NPE-in-MultiReader-tf4160812.html#a11839042
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29451-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 28 03:55:32 2007
Return-Path: <java-user-return-29451-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41123 invoked from network); 28 Jul 2007 03:55:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jul 2007 03:55:31 -0000
Received: (qmail 71038 invoked by uid 500); 28 Jul 2007 03:55:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70994 invoked by uid 500); 28 Jul 2007 03:55:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70976 invoked by uid 99); 28 Jul 2007 03:55:25 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jul 2007 20:55:25 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of kent.fitch@gmail.com designates 209.85.134.187 as permitted sender)
Received: from [209.85.134.187] (HELO mu-out-0910.google.com) (209.85.134.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Jul 2007 03:55:15 +0000
Received: by mu-out-0910.google.com with SMTP id g7so1080334muf
        for <java-user@lucene.apache.org>; Fri, 27 Jul 2007 20:54:53 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=to76wgYtTJlrUpJkocMwfZNkb8G0/wQNMU3T1kgMoD2HbVRCW2iJApmokzTTY0zNZuh8bZ4iP9r5h5g/ie01IOR+v+ZBevB6juHWU7g6H4pDtInI0se3xMlBJe1G99rBP1CEwsjfv2+QyFwOA6M3alsqHcDJ79ZMXETTIUbcMTE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=IC5u3Sg/wXoAcXQNEUKYBwKwZrLD/mIQDuya+e0AGtdP6P764FK+/N2khVydfaQY2AXlWX3CvNeW43zZza6ak/bvVJdxYsJ75z35RPxLgT2gXHSoZ5qmjCPMfC0NFOPwttTlYRgxtR+ZUavtyIIIjrBT3amCu0K1kJltq+p92yc=
Received: by 10.82.152.16 with SMTP id z16mr3121711bud.1185594893523;
        Fri, 27 Jul 2007 20:54:53 -0700 (PDT)
Received: by 10.82.111.18 with HTTP; Fri, 27 Jul 2007 20:54:53 -0700 (PDT)
Message-ID: <355005590707272054n54b1c229ndc642f211765fc33@mail.gmail.com>
Date: Sat, 28 Jul 2007 13:54:53 +1000
From: "Kent Fitch" <kent.fitch@gmail.com>
To: java-user@lucene.apache.org
Subject: Lucene performance using a solid state disk (SSD)
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Has anyone done any benchmarking of Lucene running with the index
stored on a SSD?

Given the performance characteristics quoted for, say, the SANDISK
devices (eg http://www.sandisk.com/OEM/ProductCatalog(1321)-SanDisk_SSD_SATA_5000_25.aspx:
7000 IO/sec for 512 byte requests, 67MB/sec sustained read rate), it
looks a promising match for some Lucene applications

Regards,

Kent Fitch

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29452-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 28 12:54:41 2007
Return-Path: <java-user-return-29452-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24440 invoked from network); 28 Jul 2007 12:54:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jul 2007 12:54:41 -0000
Received: (qmail 6068 invoked by uid 500); 28 Jul 2007 12:54:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6030 invoked by uid 500); 28 Jul 2007 12:54:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6019 invoked by uid 99); 28 Jul 2007 12:54:34 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Jul 2007 05:54:34 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO py-out-1112.google.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Jul 2007 12:54:28 +0000
Received: by py-out-1112.google.com with SMTP id f31so3626269pyh
        for <java-user@lucene.apache.org>; Sat, 28 Jul 2007 05:54:07 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=QrxW82xamoN3trtxiAW2xBZf9a4kIO1dHk2gHbHNp6XTqxsajaI2PsI8VYPzJa27MKNz1qLLNfGsWGhVXwK9lgdeXOzOG8xTqp2H5ePZpXgXcpWIjx8RYjoZWbDpCCdMXsbmuE5GBXIJ39y8u+wY3KZeB1hLoXPWd5ODlxcsq5Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=rUjySCByyLhuNaVtN28puDk2Rz3G7MSNJ4/+iaHTMZT09o1aJoKr3cAhtdCCCbjSqATFz3vg6GTJLQD7miSVHofSEdWHNu8IJxCPlcvXX5Da8cDYZhZXq5TrS3Vn+1IzSxCm4BRyWpR/RmN8zflw1g6plJn0YYTOaxliTMNWb18=
Received: by 10.64.142.10 with SMTP id p10mr3756350qbd.1185627246742;
        Sat, 28 Jul 2007 05:54:06 -0700 (PDT)
Received: from ?192.168.1.105? ( [67.86.221.9])
        by mx.google.com with ESMTPS id e13sm333389qbe.2007.07.28.05.54.05
        (version=SSLv3 cipher=RC4-MD5);
        Sat, 28 Jul 2007 05:54:05 -0700 (PDT)
Message-ID: <46AB3C57.9070509@gmail.com>
Date: Sat, 28 Jul 2007 08:53:43 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.5 (Windows/20070716)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: NPE in MultiReader
References: <11838713.post@talk.nabble.com>
In-Reply-To: <11838713.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Very odd...looks to me like one of the subreaders in the subreader array 
is null. Very odd because at one point it must not have been null to get 
past the MultiReader creation...

testn wrote:
> Every once in a while I got the following exception with Lucene 2.2. Do you
> have any idea?
>
> Thanks,
>
> java.lang.NullPointerException
>         at
> org.apache.lucene.index.MultiReader.getFieldNames(MultiReader.java:264)
>         at
> org.apache.lucene.index.SegmentMerger.mergeFields(SegmentMerger.java:180)
>         at
> org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:97)
>         at
> org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:1883)
>         at
> org.apache.lucene.index.IndexWriter.flushRamSegments(IndexWriter.java:1741)
>         at
> org.apache.lucene.index.IndexWriter.flushRamSegments(IndexWriter.java:1733)
>         at
> org.apache.lucene.index.IndexWriter.maybeFlushRamSegments(IndexWriter.java:1727)
>         at
> org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:1004)
>         at
> org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:983)
>         at
> org.springmodules.lucene.index.factory.SimpleLuceneIndexWriter.addDocument(SimpleLucen
> eIndexWriter.java:44)
>         at
> org.springmodules.lucene.index.object.database.DefaultDatabaseIndexer.addDocumentsInIn
> dex(DefaultDatabaseIndexer.java:274)
>         at
> org.springmodules.lucene.index.object.database.DefaultDatabaseIndexer.doHandleRequest(
> DefaultDatabaseIndexer.java:306)
>         at
> org.springmodules.lucene.index.object.database.DefaultDatabaseIndexer.index(DefaultDat
> abaseIndexer.java:354)
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29453-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 28 14:05:56 2007
Return-Path: <java-user-return-29453-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41504 invoked from network); 28 Jul 2007 14:05:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jul 2007 14:05:55 -0000
Received: (qmail 47960 invoked by uid 500); 28 Jul 2007 14:05:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47927 invoked by uid 500); 28 Jul 2007 14:05:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47914 invoked by uid 99); 28 Jul 2007 14:05:49 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Jul 2007 07:05:49 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.58] (HELO web50304.mail.re2.yahoo.com) (206.190.38.58)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 28 Jul 2007 14:05:24 +0000
Received: (qmail 31876 invoked by uid 60001); 28 Jul 2007 14:05:03 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=de3JY5jW5Nza32MKNvVJNNpv0Uvjo0VMi42lJ1dJGAXhKDfTGq3qx4z1L9/tR5ZQ4XzsYl5C7jjVOxgBM41lmRfhgQL5/4c+rTtm824R86PWvlmUPMjfFEWcqoIsV+dkU1rxMzx587FVw93oZq8RuKcJCEMTbh2Zw7KYovdEGl4=;
X-YMail-OSG: mrNEscIVM1mrOpTlxXRzA9B5tg_F_QpW4AeysZDA3h5THokJ_kGhUMaF9vpLK74mXoDQhjZ04Kc9SWrOpl6YHyrTvHIzsbBoJ.ErgiqHHZcJlUHJCEyPo5osf.s9M22_GjV.QmEABg36Wuc-
Received: from [78.3.20.60] by web50304.mail.re2.yahoo.com via HTTP; Sat, 28 Jul 2007 07:05:03 PDT
X-Mailer: YahooMailRC/651.41 YahooMailWebService/0.7.119
Date: Sat, 28 Jul 2007 07:05:03 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Lucene performance using a solid state disk (SSD)
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable
Message-ID: <508092.27772.qm@web50304.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Kent,=0A=0AI have not seen anyone do this, but I know Kevin Burton of TailR=
ank (BCCed) has been drooling over the same idea (check his blog(s)). :)=0A=
=0AOtis=0A--=0ALucene Consulting -- http://lucene-consulting.com/=0A=0A=0A-=
---- Original Message ----=0AFrom: Kent Fitch <kent.fitch@gmail.com>=0ATo: =
java-user@lucene.apache.org=0ASent: Saturday, July 28, 2007 5:54:53 AM=0ASu=
bject: Lucene performance using a solid state disk (SSD)=0A=0AHas anyone do=
ne any benchmarking of Lucene running with the index=0Astored on a SSD?=0A=
=0AGiven the performance characteristics quoted for, say, the SANDISK=0Adev=
ices (eg http://www.sandisk.com/OEM/ProductCatalog(1321)-SanDisk_SSD_SATA_5=
000_25.aspx:=0A7000 IO/sec for 512 byte requests, 67MB/sec sustained read r=
ate), it=0Alooks a promising match for some Lucene applications=0A=0ARegard=
s,=0A=0AKent Fitch=0A=0A---------------------------------------------------=
------------------=0ATo unsubscribe, e-mail: java-user-unsubscribe@lucene.a=
pache.org=0AFor additional commands, e-mail: java-user-help@lucene.apache.o=
rg=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29454-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 28 19:30:51 2007
Return-Path: <java-user-return-29454-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56287 invoked from network); 28 Jul 2007 19:30:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jul 2007 19:30:49 -0000
Received: (qmail 35483 invoked by uid 500); 28 Jul 2007 19:30:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35440 invoked by uid 500); 28 Jul 2007 19:30:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35426 invoked by uid 99); 28 Jul 2007 19:30:43 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Jul 2007 12:30:43 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.134.188 as permitted sender)
Received: from [209.85.134.188] (HELO mu-out-0910.google.com) (209.85.134.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Jul 2007 19:30:39 +0000
Received: by mu-out-0910.google.com with SMTP id g7so1255607muf
        for <java-user@lucene.apache.org>; Sat, 28 Jul 2007 12:30:17 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=RTxGiS3UFbK0up/Ne9u+S3lSwQ39BKnOaBI+olY90dECf6UOLx4pKsc7ImXxi8rTYBEccRGyJLSv4SvFxqh0W3GF+WCTWK3GKWDScDoCz+yZU0OS2DS/5F4YfwRo4kw5SNiXPGL5QEKnYiQ8qmSaIQWcatDedXF9nUxxzkwXajU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=prC/p63Bj2GY8lFlsfCsEJggGvfFxx0qkuG9p6trJ2twWpViuN9QPxEHtqIcYXSp5pO43oZLrp/fVLehuEROD2+JYjaC7iUynKzkijJpq/9udbh927fuyopZiAbZZlobjYSJZ8PlN3OzjDtS5N3fIk5MWh8Qp1vhwaHZyFAskRE=
Received: by 10.82.181.10 with SMTP id d10mr3326144buf.1185651017688;
        Sat, 28 Jul 2007 12:30:17 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Sat, 28 Jul 2007 12:30:17 -0700 (PDT)
Message-ID: <359a92830707281230p1d43abbdw2f1a3215284ae685@mail.gmail.com>
Date: Sat, 28 Jul 2007 15:30:17 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: FieldCache for Search
In-Reply-To: <c0c0e1d40707241259i144e428dxfefc7a6c173bb29c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9577_32741221.1185651017668"
References: <c0c0e1d40707241259i144e428dxfefc7a6c173bb29c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9577_32741221.1185651017668
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You might try lazy loading. See
IndexReader.*document<file:///C:/lucene-2.1.0/docs/api/org/apache/lucene/index/IndexReader.html#document%28int,%20org.apache.lucene.document.FieldSelector%29>
*(int n, FieldSelector<file:///C:/lucene-2.1.0/docs/api/org/apache/lucene/document/FieldSelector.html>
 fieldSelector),
particularly the FieldSelector. It allows you to selectively load only the
fields you want.

Otherwise, I'm sure if you looked in the unit tests you'd find examples
of how to use FieldCache. If your fields are really that huge, I'm not
sure how FieldCache would help you all that much before you'd run out
of memory. Perhaps you could outline your problem in more detail
and get some better answers.....

Best
Erick

On 7/24/07, Askar Zaidi <askar.zaidi@gmail.com> wrote:
>
> Hey Guys,
>
> From what I understand, FieldCache is used to store only the field
> required
> for search. I am using a Document object and then using doc.get("item").
> One
> of my fields is HUGE, so using Document will slow things down.
>
> How can I use FieldCache ? an example ?
>
> thanks,
> AZ
>

------=_Part_9577_32741221.1185651017668--

From java-user-return-29455-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 28 19:46:50 2007
Return-Path: <java-user-return-29455-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58853 invoked from network); 28 Jul 2007 19:46:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jul 2007 19:46:48 -0000
Received: (qmail 49041 invoked by uid 500); 28 Jul 2007 19:46:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48820 invoked by uid 500); 28 Jul 2007 19:46:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48809 invoked by uid 99); 28 Jul 2007 19:46:42 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Jul 2007 12:46:42 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.134.186 as permitted sender)
Received: from [209.85.134.186] (HELO mu-out-0910.google.com) (209.85.134.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Jul 2007 19:46:38 +0000
Received: by mu-out-0910.google.com with SMTP id g7so1258006muf
        for <java-user@lucene.apache.org>; Sat, 28 Jul 2007 12:46:16 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Z6VtaXQ8Z+L8/nVlSgqAHbIBCpSYmjYiLZbC4amIz0JmDjyKATWaKm0Fw6WTx0bvPgNSwye2ZdDOxzT/c6gn6I5sbw/chZOIuSStNyDVgjzxwc/kbAsTAXXd1KdjrX/hHL73YGrOHh3j+8sFhrhy/NBSQtxIWY4O68K3mLTyILU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=oGs9KxELsjtscNaf6Mda74B0hxjcoj3aZSKOrEEFR3iXQ8OOzjm3omQJ8sFlqfmK3T0pEgvOl+leSHV3FrZMaoQobGg4Bva2G9Ft4orMpbzVASzzvM7xk44ObOervmYDTfQ2PkGlItp1eo8rSvsM2oC6ZkAzJ1I5af/HajDv6NA=
Received: by 10.82.158.12 with SMTP id g12mr3321157bue.1185651976587;
        Sat, 28 Jul 2007 12:46:16 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Sat, 28 Jul 2007 12:46:16 -0700 (PDT)
Message-ID: <359a92830707281246h15a5c5c7i114ee410094c478a@mail.gmail.com>
Date: Sat, 28 Jul 2007 15:46:16 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: java gc with a frequently changing index?
In-Reply-To: <46A7995D.5030004@metaweb.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9689_16521666.1185651976562"
References: <46A7995D.5030004@metaweb.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9689_16521666.1185651976562
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Why do you believe that it's the gc? I admit i just scanned your
e-mail, but I *do* know that the first search (especially sorts) on
a newly-opened IndexReader incure a bunch of overhead. Could
that be what you're seeing?

I'm not sure there is a "best practice", but I have seen two
solutions mentioned, both more complex than opening/closing
the reader.

1> open the reader in the background, fire a few "warmup" queries
at it, then switch it with the one you actually use to answer queries.

2> Use a RAMDirectory to hold your new entries for some period
of time. You'd have to do some fancy dancing to keep this straight
since you're updating documents, but it might be viable. The scheme
is something like
Open your FSDIR
Open a RAMdir.

Add all new documents to BOTH of them. When servicing a query,
look in both indexes, but you only open/close the RAMdir for
every query. Note that since, when you open a reader, it
takes a snapshot of the index, these two views will be disjoint. When you
get your results back, you'll have to do something about the documents
from the FSdir that have been replaced in the RAMdir, which is where
the fancy dancing part comes in. But I leave that as an exercise for
the reader.

Periodically, shut everything down and repeat. The point here is that
you can (probably) close/open your RAMdir with very small costs and
have the whole thing be up to date.

There'll be some coordination issues, and you'll have to cope with data
integrity if your process barfs before you've closed your FSDir....

Or, you could ask whether 5 seconds is really necessary.I've seen a lot
of times when "real time" could be 5 minutes and nobody would really
complain, and other times when it really is critical. But that's between you
and our Product Manager....

Hope this helps
Erick

On 7/25/07, Tim Sturge <tsturge@metaweb.com> wrote:
>
> Hi,
>
> I am indexing a set of constantly changing documents. The change rate is
> moderate (about 10 docs/sec over a 10M document collection with a 6G
> total size) but I want to be  right up to date (ideally within a second
> but within 5 seconds is acceptable) with the index.
>
> Right now I have code that adds new documents to the index and deletes
> old ones using updateDocument() in the 2.1 IndexWriter. In order to see
> the changes, I need to recreate the IndexReader/IndexSearcher every
> second or so. I am not calling optimize() on the index in the writer,
> and the mergeFactor is 10.
>
> The problem I am facing is that java gc is terrible at collecting the
> IndexSearchers I am discarding. I usually have a 3msec query time, but I
> get gc pauses of 300msec to 3 sec (I assume is is collecting the
> "tenured" generation in these pauses, which is my old IndexSearcher)
>
> I've tried "-Xincgc", "-XX:+UseConcMarkSweepGC -XX:+UseParNewGC" and
> calling System.gc() right after I close the old index without much luck
> (I get the pauses down to 1sec, but get 3x as many. I want < 25 msec
> pauses). So my question is, should I be avoiding reloading my index in
> this way? Should I keep a separate IndexReader (which only deletes old
> documents) and one for new documents? Is there a standard technique for
> a quickly changing index?
>
> Thanks,
>
> Tim
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_9689_16521666.1185651976562--

From java-user-return-29456-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 28 20:04:08 2007
Return-Path: <java-user-return-29456-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62161 invoked from network); 28 Jul 2007 20:04:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jul 2007 20:04:06 -0000
Received: (qmail 64674 invoked by uid 500); 28 Jul 2007 20:04:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64641 invoked by uid 500); 28 Jul 2007 20:04:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64630 invoked by uid 99); 28 Jul 2007 20:04:00 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Jul 2007 13:04:00 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,NORMAL_HTTP_TO_IP,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.134.189 as permitted sender)
Received: from [209.85.134.189] (HELO mu-out-0910.google.com) (209.85.134.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Jul 2007 20:03:55 +0000
Received: by mu-out-0910.google.com with SMTP id g7so1260887muf
        for <java-user@lucene.apache.org>; Sat, 28 Jul 2007 13:03:34 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=TDV/Pq0rAa0LAYdLqIec+rz3XRErkjBesuxHRvL1dhwQjJqSgons9xwAIwgCcT6Zu9zTK6GWienSD2jLBbtswoK3B+Q34rqftzK/l3DhDExIHKWhNfKbzHZUAWhMVo4NNRCA+ajaxGyz4Lpwz5GMxQhC6Nla/mb5y6RkWVGXZKM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Z4zgLfT/u4EcRs4KGIX1XHBts9tSvgnex6I0erpxBSP9p8JMcjvaLD+OX7loTo8kSnLS4+m/KDOaRif9RpD8QjE4ylTTYBmH8vJQ9LhZ8hmcFT1v7aCGHVyFOTtQBPJNo87xgkccFyBcQm61xaatRyyuMBkDr5ykGVLz5Cl/Rvg=
Received: by 10.82.100.1 with SMTP id x1mr3330377bub.1185653014022;
        Sat, 28 Jul 2007 13:03:34 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Sat, 28 Jul 2007 13:03:33 -0700 (PDT)
Message-ID: <359a92830707281303l1baabbeu93bbd1e517d2ef1f@mail.gmail.com>
Date: Sat, 28 Jul 2007 16:03:33 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Assembling a query from multiple fields
In-Reply-To: <7a14509e0707251405n1a5891e7m5df182ddf0bfa22e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9718_32346410.1185653013997"
References: <7a14509e0707251405n1a5891e7m5df182ddf0bfa22e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9718_32346410.1185653013997
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Since you say you're new, I'll risk stating the obvious <G>. Do you
know about the BooleanQuery class?

But do note that the TermQuery isn't quite what
you might expect. For instance, making a TermQuery from the
string "this is junk" is different from making three TermQuery
objects, one for each word. If that's confusing, it'll save you
some grief if you understand why before pushing on.....

But do pay attention to Erik's response. The QueryParser
will give you surprising results if, say, there's a colon in the data
the user typed in. And manually making TermQueries will give
you surprising results if you case differently.........

Best
Erick

On 7/25/07, Joe Attardi <jattardi@gmail.com> wrote:
>
> Hi all,
>
> Apologies for the cryptic subject line, but I couldn't think of a more
> descriptive one-liner to describe my problem/question to you all. Still
> fairly new to Lucene here, although I'm hoping to have more of a clue once
> I
> get a chance to read "Lucene In Action".
>
> I am implementing a search engine using Lucene for a web application. It
> is
> not really a free-text search like some other, more standard
> implementations.
> The requirement is for the search to be as easy and user-friendly as
> possible, so instead of specifying the field to search in the query itself
> -
> such as ip:192.168.102.230 - and being parsed with QueryParser, the field
> is
> being selected via a HTML <select> element, and the search keywords are
> entered in a text field.
>
> As far as I can tell, I basically have two options:
> (1) Manually prepend the field identifier to the query text, for example:
>           String fullQuery = field + ":" + queryText;
>      then parse this query normally with QueryParser, OR
> (2) Since I know it is only going to be searching one term, manually
> create
> a TermQuery with a Term object representing what the user typed in, for
> example:
>           Query query = new TermQuery(new Term(field, queryText));
>
> Is there any advantage or disadvantage to any of these, or is one
> preferable
> over the other? My gut tells me that directly creating the TermQuery is
> more
> efficient since it doesn't have to perform parsing, but I'm not sure.
>
> I have other questions, too, but I don't want to get ahead of myself. One
> at
> a time... :)
>
> Appreciate any help you all might have!
>
> --
> Joe Attardi
>

------=_Part_9718_32346410.1185653013997--

From java-user-return-29457-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 28 22:03:07 2007
Return-Path: <java-user-return-29457-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91873 invoked from network); 28 Jul 2007 22:03:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jul 2007 22:03:06 -0000
Received: (qmail 30397 invoked by uid 500); 28 Jul 2007 22:03:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30355 invoked by uid 500); 28 Jul 2007 22:03:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30344 invoked by uid 99); 28 Jul 2007 22:03:00 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Jul 2007 15:03:00 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lukas.vlcek@gmail.com designates 209.85.198.191 as permitted sender)
Received: from [209.85.198.191] (HELO rv-out-0910.google.com) (209.85.198.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Jul 2007 22:02:55 +0000
Received: by rv-out-0910.google.com with SMTP id k20so194468rvb
        for <java-user@lucene.apache.org>; Sat, 28 Jul 2007 15:02:34 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=JHIM0eNDOFfxlWDHDy1U5tCHCRiwkI0eiI43dp4cIXFIQB56EY6SKmRPJd5wK8mXepHALNxDNOKx8/3cnyneqqP2oGhfBIdB/RjwykGFa42n2mYN1gPHSOA5TGRH1RCMfQ7vshX4NC64UKwYMmFSL4LsjNZ75MngrhT4YxNBVO4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=oRM8gMjW38KU7lqCr+8WfKlbuFyoSMAQ9P+BEb9jqueAOHrUoOZx51qX/0oh6KmF/GIp4Y4vQNoq3mibcO9RRKSMtrfOv4yVzYL+hv5hcFgEDW/yV8qejJM2jfy/sZVYcp8L6W5V0uAyxjF6IZ96ynASPlkeqm5TDO5rpXRgIxM=
Received: by 10.140.170.12 with SMTP id s12mr1348682rve.1185660154671;
        Sat, 28 Jul 2007 15:02:34 -0700 (PDT)
Received: by 10.141.18.9 with HTTP; Sat, 28 Jul 2007 15:02:34 -0700 (PDT)
Message-ID: <52c3ddca0707281502t56efed1dp9552f0907a4ffdde@mail.gmail.com>
Date: Sun, 29 Jul 2007 00:02:34 +0200
From: "Lukas Vlcek" <lukas.vlcek@gmail.com>
To: java-user@lucene.apache.org
Subject: Bug in Lucene 2.2.0 code? Simple code included (StringIndexOutOfBoundsException).
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5168_22137130.1185660154632"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5168_22137130.1185660154632
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Lucene experts,

The following is a simple Lucene code which generates
StringIndexOutOfBoundsException exception. I am using Lucene 2.2.0 official
releasse. Can anyone tell me what is wrong with this code? Is this a bug or
a feature of Lucene? Any comments/hits highly welcommed!

In a nutshell I have a document with two (or four) fileds:
1) all
2-4) small

I use [all] for searching and [small] for highlighting.

[packkage and imports truncated...]

public class MemoryIndexCase {
    static public void main(String[] arg) {

        Document doc = new Document();

        doc.add(new Field("all","example long text",
                Field.Store.NO, Field.Index.TOKENIZED));
        doc.add(new Field("small","example",
                Field.Store.YES, Field.Index.UN_TOKENIZED,
Field.TermVector.WITH_POSITIONS_OFFSETS));
        doc.add(new Field("small","long",
                Field.Store.YES, Field.Index.UN_TOKENIZED,
Field.TermVector.WITH_POSITIONS_OFFSETS));
        doc.add(new Field("small","text",
                Field.Store.YES, Field.Index.UN_TOKENIZED,
Field.TermVector.WITH_POSITIONS_OFFSETS));

        try {
            Directory idx = new RAMDirectory();
            IndexWriter writer = new IndexWriter(idx, new
StandardAnalyzer(), true);

            writer.addDocument(doc);
            writer.optimize();
            writer.close();

            Searcher searcher = new IndexSearcher(idx);

            QueryParser qp = new QueryParser("all", new StandardAnalyzer());
            Query query = qp.parse("example text");
            Hits hits = searcher.search(query);

            Highlighter highlighter =    new Highlighter(new
QueryScorer(query));

            IndexReader ir = IndexReader.open(idx);
            for (int i = 0; i < hits.length(); i++) {

                String text = hits.doc(i).get("small");

                TermFreqVector tfv = ir.getTermFreqVector(hits.id(i),
"small");
                TokenStream tokenStream=
TokenSources.getTokenStream((TermPositionVector)
tfv);

                String result =
                    highlighter.getBestFragment(tokenStream,text);
                System.out.println(result);
            }

        } catch (Throwable e) {
            e.printStackTrace();
        }
    }
}

The exception is:
java.lang.StringIndexOutOfBoundsException: String index out of range: 11
    at java.lang.String.substring(String.java:1935)
    at org.apache.lucene.search.highlight.Highlighter.getBestTextFragments(
Highlighter.java:235)
    at org.apache.lucene.search.highlight.Highlighter.getBestFragments(
Highlighter.java:175)
    at org.apache.lucene.search.highlight.Highlighter.getBestFragment(
Highlighter.java:101)
    at org.lucenetest.MemoryIndexCase.main(MemoryIndexCase.java:70)

Best regards,
Lukas

------=_Part_5168_22137130.1185660154632--

From java-user-return-29458-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 28 23:34:02 2007
Return-Path: <java-user-return-29458-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26090 invoked from network); 28 Jul 2007 23:34:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jul 2007 23:34:01 -0000
Received: (qmail 15530 invoked by uid 500); 28 Jul 2007 23:33:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15494 invoked by uid 500); 28 Jul 2007 23:33:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15471 invoked by uid 99); 28 Jul 2007 23:33:50 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Jul 2007 16:33:50 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.166.176 as permitted sender)
Received: from [64.233.166.176] (HELO py-out-1112.google.com) (64.233.166.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Jul 2007 23:33:43 +0000
Received: by py-out-1112.google.com with SMTP id f31so3897410pyh
        for <java-user@lucene.apache.org>; Sat, 28 Jul 2007 16:33:22 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=luaugpfwbqyHlx2gjyZezmQMk6eEhDaHo0uCNMHyMeznqTH78fkpxyjYCQrLekmsAWAGHB14RRctjLqOG1TA5DUs4WgrmCNROK1hq/MACmi7VS4h60E5HWEJEStXzVlDMQ7rGB5IpqkU/6HNoQ2az7pZUGSJZvVLpUZpEDA89ao=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=mCZKG6JlSJWpHeLNak2NTwHoFySKXocyB5M6rf0P8vIm3aKhAsn0CW6q9naJmZQhQAZqQW+6ZrAbfTIN4BRpFqjN94fFnzNKuLnH+GF7d/eLODrrslmQa3ewgLwVHKVnPCMbC3GozdeTC6mc7mvvp2V+lXmEaVnFb2tKzAF+Mxg=
Received: by 10.65.224.11 with SMTP id b11mr6866101qbr.1185665602190;
        Sat, 28 Jul 2007 16:33:22 -0700 (PDT)
Received: from ?192.168.1.105? ( [67.86.221.9])
        by mx.google.com with ESMTPS id f17sm543838qba.2007.07.28.16.33.21
        (version=SSLv3 cipher=RC4-MD5);
        Sat, 28 Jul 2007 16:33:21 -0700 (PDT)
Message-ID: <46ABD23E.6010505@gmail.com>
Date: Sat, 28 Jul 2007 19:33:18 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.5 (Windows/20070716)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Bug in Lucene 2.2.0 code? Simple code included (StringIndexOutOfBoundsException).
References: <52c3ddca0707281502t56efed1dp9552f0907a4ffdde@mail.gmail.com>
In-Reply-To: <52c3ddca0707281502t56efed1dp9552f0907a4ffdde@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hey Lukas,

Sorry I havn't gotten back to you on this sooner. Been meaning too, but 
I have been busy. Still am a little, but here is some to get you started:

The token stream you send to the highlighter must match the text you 
send to the highlighter.

Your token stream is this:

(example,0,7)
(long,14,18)
(text,22,26)

but your text is: example

if you look at hits.get(i) it returns a document. Getting the field off 
the document:

    for (int i = 0; i < fields.size(); i++) {
      Fieldable field = (Fieldable)fields.get(i);
      if (field.name().equals(name) && (!field.isBinary()))
        return field.stringValue();
    }
    return null;

as you can see, you will only get the stored value of the first "small" 
field. Not the other two.

I have more for you, but hopefully that will get you started.

In the end, the tokenstream must exactly match the text you are passing 
to the highlighter...this is why you are getting the exception.

- Mark

Lukas Vlcek wrote:
> Hi Lucene experts,
>
> The following is a simple Lucene code which generates
> StringIndexOutOfBoundsException exception. I am using Lucene 2.2.0 official
> releasse. Can anyone tell me what is wrong with this code? Is this a bug or
> a feature of Lucene? Any comments/hits highly welcommed!
>
> In a nutshell I have a document with two (or four) fileds:
> 1) all
> 2-4) small
>
> I use [all] for searching and [small] for highlighting.
>
> [packkage and imports truncated...]
>
> public class MemoryIndexCase {
>     static public void main(String[] arg) {
>
>         Document doc = new Document();
>
>         doc.add(new Field("all","example long text",
>                 Field.Store.NO, Field.Index.TOKENIZED));
>         doc.add(new Field("small","example",
>                 Field.Store.YES, Field.Index.UN_TOKENIZED,
> Field.TermVector.WITH_POSITIONS_OFFSETS));
>         doc.add(new Field("small","long",
>                 Field.Store.YES, Field.Index.UN_TOKENIZED,
> Field.TermVector.WITH_POSITIONS_OFFSETS));
>         doc.add(new Field("small","text",
>                 Field.Store.YES, Field.Index.UN_TOKENIZED,
> Field.TermVector.WITH_POSITIONS_OFFSETS));
>
>         try {
>             Directory idx = new RAMDirectory();
>             IndexWriter writer = new IndexWriter(idx, new
> StandardAnalyzer(), true);
>
>             writer.addDocument(doc);
>             writer.optimize();
>             writer.close();
>
>             Searcher searcher = new IndexSearcher(idx);
>
>             QueryParser qp = new QueryParser("all", new StandardAnalyzer());
>             Query query = qp.parse("example text");
>             Hits hits = searcher.search(query);
>
>             Highlighter highlighter =    new Highlighter(new
> QueryScorer(query));
>
>             IndexReader ir = IndexReader.open(idx);
>             for (int i = 0; i < hits.length(); i++) {
>
>                 String text = hits.doc(i).get("small");
>
>                 TermFreqVector tfv = ir.getTermFreqVector(hits.id(i),
> "small");
>                 TokenStream tokenStream=
> TokenSources.getTokenStream((TermPositionVector)
> tfv);
>
>                 String result =
>                     highlighter.getBestFragment(tokenStream,text);
>                 System.out.println(result);
>             }
>
>         } catch (Throwable e) {
>             e.printStackTrace();
>         }
>     }
> }
>
> The exception is:
> java.lang.StringIndexOutOfBoundsException: String index out of range: 11
>     at java.lang.String.substring(String.java:1935)
>     at org.apache.lucene.search.highlight.Highlighter.getBestTextFragments(
> Highlighter.java:235)
>     at org.apache.lucene.search.highlight.Highlighter.getBestFragments(
> Highlighter.java:175)
>     at org.apache.lucene.search.highlight.Highlighter.getBestFragment(
> Highlighter.java:101)
>     at org.lucenetest.MemoryIndexCase.main(MemoryIndexCase.java:70)
>
> Best regards,
> Lukas
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29459-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 28 23:55:15 2007
Return-Path: <java-user-return-29459-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33556 invoked from network); 28 Jul 2007 23:55:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jul 2007 23:55:15 -0000
Received: (qmail 26324 invoked by uid 500); 28 Jul 2007 23:55:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26290 invoked by uid 500); 28 Jul 2007 23:55:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26279 invoked by uid 99); 28 Jul 2007 23:55:09 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Jul 2007 16:55:09 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dmitrytkach1@hotmail.com designates 65.54.246.148 as permitted sender)
Received: from [65.54.246.148] (HELO bay0-omc2-s12.bay0.hotmail.com) (65.54.246.148)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Jul 2007 23:55:01 +0000
Received: from hotmail.com ([65.54.169.90]) by bay0-omc2-s12.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.2668);
	 Sat, 28 Jul 2007 16:54:40 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Sat, 28 Jul 2007 16:54:40 -0700
Message-ID: <BAY114-DAV182552E8007FE1EE46F82994EC0@phx.gbl>
Received: from 24.12.157.130 by BAY114-DAV18.phx.gbl with DAV;
	Sat, 28 Jul 2007 23:54:33 +0000
X-Originating-IP: [24.12.157.130]
X-Originating-Email: [dmitrytkach1@hotmail.com]
X-Sender: dmitrytkach1@hotmail.com
From: "Dmitry" <dmitrytkach1@hotmail.com>
To: <java-user@lucene.apache.org>
References: <20070720192740.9AC2D3E886E@f38.poczta.interia.pl> <359a92830707201310o1442bedembeb45051a4299eee@mail.gmail.com> <3F8F627A-CC84-4EC9-8159-336EF36335CE@ehatchersolutions.com> <359a92830707201445j6c269186j2b35330814e62b60@mail.gmail.com> <BAY114-DAV75FB1CC8B7A9563461B4294F20@phx.gbl>
Subject: Re: lucene integration with PDM Windchill  (Product Data Management System)
Date: Sat, 28 Jul 2007 18:56:21 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3028
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
X-OriginalArrivalTime: 28 Jul 2007 23:54:40.0331 (UTC) FILETIME=[A97C21B0:01C7D172]
X-Virus-Checked: Checked by ClamAV on apache.org

Karl,

thanks for help.

I will try to explain requirements. There is system PDM - product Data 
Management System - which manages the data related to products, supports 
precudures druing the product lifecycle deals with the development and 
production infrastructure.
There following design paterns which can be used for implementation and 
customization of this system  - point to integrate Lucene with Windchill 
(PDM):

 - The Object Reference Design Pattern (encapsulates details concerning 
persistable objects and their unique databse keys- like for Objects WTParts, 
WTAssemblies, WTDocuments and their relations)
 - Business Service Design Pattern (building windchill services - like using 
remote interfaces service Events)
 - Master-iteration Design Pattern (like two objects: Mastered and Iterated: 
adhare all versioned data in Windchill PDM system <PDMLink> and 
<ProjectLink>)

We need use Lucene with WTObeject like WTDocuments && WTParts to create 
indexes and provide search service.
The properties of a document for instance - MS Documnts or PDF files are 
specified on the WTDocument class. But the sum of the propertiesare stored 
on WTDocumnetMaster. WTDocument implements ContenrHolder - primary content 
and secondary content. And by the way WTDocument can create two types of 
relationships to other documents using WTDocumentUsageLink (build 
relationships between documents and document structure). Atributes which 
need to be used for searching are on either  WTDocumentMaster or WTDocument 
clasess.

This was just short desription of architecture of PDMLink  - Windchill.
 So we need create  some Lucene services(processors) embedded to the system 
using extended interfaces for creation indexes and Search all Documnets by 
Attributes.

thanks,
Dmitry
www.ejinz.com
Search Engine News

--------------------------------------------------------------------

> Trying to integrate PDM system : WTPart obejct with Lucene indexing search 
> framework. Part of the work is integration with persistent layer 
> <hibernate>+ indeces storage+ mysql

You have a product data management software of some sort that use
MySQL via Hibernate for persistency, and now you want to use Lucene
to search the data?

> Could not find a good solution ...

What possible solutions did you find, and what was the problem with
these?

> please advice

My guess is that very few people in this forum knows how Windchill
works, what a WTPart is or what the complexity of the system is in a
persistent state. So you probably need to explain your requirements a
bit more in order to get a helpful answer or discussion going.


-- 
karl



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29460-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 29 00:02:51 2007
Return-Path: <java-user-return-29460-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34585 invoked from network); 29 Jul 2007 00:02:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jul 2007 00:02:50 -0000
Received: (qmail 29718 invoked by uid 500); 29 Jul 2007 00:02:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29682 invoked by uid 500); 29 Jul 2007 00:02:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29671 invoked by uid 99); 29 Jul 2007 00:02:44 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Jul 2007 17:02:44 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dmitrytkach1@hotmail.com designates 65.54.246.89 as permitted sender)
Received: from [65.54.246.89] (HELO bay0-omc1-s17.bay0.hotmail.com) (65.54.246.89)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Jul 2007 00:02:35 +0000
Received: from hotmail.com ([65.54.169.88]) by bay0-omc1-s17.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.2668);
	 Sat, 28 Jul 2007 17:02:15 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Sat, 28 Jul 2007 17:02:15 -0700
Message-ID: <BAY114-DAV167591A60B9A4F0005444C94ED0@phx.gbl>
Received: from 24.12.157.130 by BAY114-DAV16.phx.gbl with DAV;
	Sun, 29 Jul 2007 00:02:12 +0000
X-Originating-IP: [24.12.157.130]
X-Originating-Email: [dmitrytkach1@hotmail.com]
X-Sender: dmitrytkach1@hotmail.com
From: "Dmitry" <dmitrytkach1@hotmail.com>
To: <java-user@lucene.apache.org>
References: <20070720192740.9AC2D3E886E@f38.poczta.interia.pl> <359a92830707201310o1442bedembeb45051a4299eee@mail.gmail.com> <3F8F627A-CC84-4EC9-8159-336EF36335CE@ehatchersolutions.com> <359a92830707201445j6c269186j2b35330814e62b60@mail.gmail.com> <BAY114-DAV75FB1CC8B7A9563461B4294F20@phx.gbl> <BAY114-DAV182552E8007FE1EE46F82994EC0@phx.gbl>
Subject: Re: lucene integration with PDM Windchill  (Product Data Management System)
Date: Sat, 28 Jul 2007 19:04:00 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3028
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
X-OriginalArrivalTime: 29 Jul 2007 00:02:15.0356 (UTC) FILETIME=[B8B36FC0:01C7D173]
X-Virus-Checked: Checked by ClamAV on apache.org

Karl,

And by the way we created one of the solution  - but we need to have more 
embedded interfaces  / implementation fucntions to the PDM Widchill. 
(article you can find on www.profilesmagazine.com for one of the solution).

Thanks,
DT,
www.ejinz.com
Search Engine Platform News

----- Original Message ----- 
From: "Dmitry" <dmitrytkach1@hotmail.com>
To: <java-user@lucene.apache.org>
Sent: Saturday, July 28, 2007 6:56 PM
Subject: Re: lucene integration with PDM Windchill (Product Data Management 
System)


> Karl,
>
> thanks for help.
>
> I will try to explain requirements. There is system PDM - product Data 
> Management System - which manages the data related to products, supports 
> precudures druing the product lifecycle deals with the development and 
> production infrastructure.
> There following design paterns which can be used for implementation and 
> customization of this system  - point to integrate Lucene with Windchill 
> (PDM):
>
> - The Object Reference Design Pattern (encapsulates details concerning 
> persistable objects and their unique databse keys- like for Objects 
> WTParts, WTAssemblies, WTDocuments and their relations)
> - Business Service Design Pattern (building windchill services - like 
> using remote interfaces service Events)
> - Master-iteration Design Pattern (like two objects: Mastered and 
> Iterated: adhare all versioned data in Windchill PDM system <PDMLink> and 
> <ProjectLink>)
>
> We need use Lucene with WTObeject like WTDocuments && WTParts to create 
> indexes and provide search service.
> The properties of a document for instance - MS Documnts or PDF files are 
> specified on the WTDocument class. But the sum of the propertiesare stored 
> on WTDocumnetMaster. WTDocument implements ContenrHolder - primary content 
> and secondary content. And by the way WTDocument can create two types of 
> relationships to other documents using WTDocumentUsageLink (build 
> relationships between documents and document structure). Atributes which 
> need to be used for searching are on either  WTDocumentMaster or 
> WTDocument clasess.
>
> This was just short desription of architecture of PDMLink  - Windchill.
> So we need create  some Lucene services(processors) embedded to the system 
> using extended interfaces for creation indexes and Search all Documnets by 
> Attributes.
>
> thanks,
> Dmitry
> www.ejinz.com
> Search Engine News
>
> --------------------------------------------------------------------
>
>> Trying to integrate PDM system : WTPart obejct with Lucene indexing 
>> search framework. Part of the work is integration with persistent layer 
>> <hibernate>+ indeces storage+ mysql
>
> You have a product data management software of some sort that use
> MySQL via Hibernate for persistency, and now you want to use Lucene
> to search the data?
>
>> Could not find a good solution ...
>
> What possible solutions did you find, and what was the problem with
> these?
>
>> please advice
>
> My guess is that very few people in this forum knows how Windchill
> works, what a WTPart is or what the complexity of the system is in a
> persistent state. So you probably need to explain your requirements a
> bit more in order to get a helpful answer or discussion going.
>
>
> -- 
> karl
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29461-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 29 01:05:49 2007
Return-Path: <java-user-return-29461-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43804 invoked from network); 29 Jul 2007 01:05:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jul 2007 01:05:48 -0000
Received: (qmail 88747 invoked by uid 500); 29 Jul 2007 01:05:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88702 invoked by uid 500); 29 Jul 2007 01:05:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88686 invoked by uid 99); 29 Jul 2007 01:05:42 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Jul 2007 18:05:42 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.166.176 as permitted sender)
Received: from [64.233.166.176] (HELO py-out-1112.google.com) (64.233.166.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Jul 2007 01:05:35 +0000
Received: by py-out-1112.google.com with SMTP id f31so3926998pyh
        for <java-user@lucene.apache.org>; Sat, 28 Jul 2007 18:05:14 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=K3UZkJxlpu8ANvYuUvfLc4PqLup47IO36V3HOZjHIl+l0VNkBkbCMXnEE0SBJ+p/GXK7iQg7QJzcgZ0aL5nduTnEbsQCYCgrpoGoZMpBcs3nUd00AJ1d/hNhsOu9F2iI2eI8IVmZZxa2JrX92c3+YCLcBsbqyFaRr53UpG48Krg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=jRI6/Bv6Q+dpEihjduvFz68RL7KxBdOE0P2kv9v6GJZubi0uVhjh5DdHQ8op7q2YG7itHw7oRU/h6M6kJjFJ1Mm5Z95C7kSzWiDyqD3BL4F6UVm39XfkmopJZFNJNCht4Y+ETZgCJbcOMfWt+smnAmEIjznfhG168WyQ7xNPr8w=
Received: by 10.65.219.20 with SMTP id w20mr6904720qbq.1185671114073;
        Sat, 28 Jul 2007 18:05:14 -0700 (PDT)
Received: from ?192.168.1.105? ( [67.86.221.9])
        by mx.google.com with ESMTPS id f17sm566373qba.2007.07.28.18.05.13
        (version=SSLv3 cipher=RC4-MD5);
        Sat, 28 Jul 2007 18:05:13 -0700 (PDT)
Message-ID: <46ABE7C6.9000204@gmail.com>
Date: Sat, 28 Jul 2007 21:05:10 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.5 (Windows/20070716)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Bug in Lucene 2.2.0 code? Simple code included (StringIndexOutOfBoundsException).
References: <52c3ddca0707281502t56efed1dp9552f0907a4ffdde@mail.gmail.com>
In-Reply-To: <52c3ddca0707281502t56efed1dp9552f0907a4ffdde@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I'm am going to try and write up some more info for you tomorrow, but 
just to point out: I do think there is a bug in the way offsets are 
being handled. I don't think this is causing your current problem (what 
I mentioned is) but it will prob cause you problems down the road. I 
will look into this further.

- Mark

Lukas Vlcek wrote:
> Hi Lucene experts,
>
> The following is a simple Lucene code which generates
> StringIndexOutOfBoundsException exception. I am using Lucene 2.2.0 official
> releasse. Can anyone tell me what is wrong with this code? Is this a bug or
> a feature of Lucene? Any comments/hits highly welcommed!
>
> In a nutshell I have a document with two (or four) fileds:
> 1) all
> 2-4) small
>
> I use [all] for searching and [small] for highlighting.
>
> [packkage and imports truncated...]
>
> public class MemoryIndexCase {
>     static public void main(String[] arg) {
>
>         Document doc = new Document();
>
>         doc.add(new Field("all","example long text",
>                 Field.Store.NO, Field.Index.TOKENIZED));
>         doc.add(new Field("small","example",
>                 Field.Store.YES, Field.Index.UN_TOKENIZED,
> Field.TermVector.WITH_POSITIONS_OFFSETS));
>         doc.add(new Field("small","long",
>                 Field.Store.YES, Field.Index.UN_TOKENIZED,
> Field.TermVector.WITH_POSITIONS_OFFSETS));
>         doc.add(new Field("small","text",
>                 Field.Store.YES, Field.Index.UN_TOKENIZED,
> Field.TermVector.WITH_POSITIONS_OFFSETS));
>
>         try {
>             Directory idx = new RAMDirectory();
>             IndexWriter writer = new IndexWriter(idx, new
> StandardAnalyzer(), true);
>
>             writer.addDocument(doc);
>             writer.optimize();
>             writer.close();
>
>             Searcher searcher = new IndexSearcher(idx);
>
>             QueryParser qp = new QueryParser("all", new StandardAnalyzer());
>             Query query = qp.parse("example text");
>             Hits hits = searcher.search(query);
>
>             Highlighter highlighter =    new Highlighter(new
> QueryScorer(query));
>
>             IndexReader ir = IndexReader.open(idx);
>             for (int i = 0; i < hits.length(); i++) {
>
>                 String text = hits.doc(i).get("small");
>
>                 TermFreqVector tfv = ir.getTermFreqVector(hits.id(i),
> "small");
>                 TokenStream tokenStream=
> TokenSources.getTokenStream((TermPositionVector)
> tfv);
>
>                 String result =
>                     highlighter.getBestFragment(tokenStream,text);
>                 System.out.println(result);
>             }
>
>         } catch (Throwable e) {
>             e.printStackTrace();
>         }
>     }
> }
>
> The exception is:
> java.lang.StringIndexOutOfBoundsException: String index out of range: 11
>     at java.lang.String.substring(String.java:1935)
>     at org.apache.lucene.search.highlight.Highlighter.getBestTextFragments(
> Highlighter.java:235)
>     at org.apache.lucene.search.highlight.Highlighter.getBestFragments(
> Highlighter.java:175)
>     at org.apache.lucene.search.highlight.Highlighter.getBestFragment(
> Highlighter.java:101)
>     at org.lucenetest.MemoryIndexCase.main(MemoryIndexCase.java:70)
>
> Best regards,
> Lukas
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29462-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 29 05:38:59 2007
Return-Path: <java-user-return-29462-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1635 invoked from network); 29 Jul 2007 05:38:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jul 2007 05:38:58 -0000
Received: (qmail 68029 invoked by uid 500); 29 Jul 2007 05:38:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58129 invoked by uid 500); 29 Jul 2007 05:35:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50723 invoked by uid 99); 29 Jul 2007 05:32:44 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Jul 2007 22:32:37 -0700
Received-SPF: pass (athena.apache.org: domain of lukas.vlcek@gmail.com designates 209.85.146.180 as permitted sender)
Received: from [209.85.146.180] (HELO wa-out-1112.google.com) (209.85.146.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Jul 2007 05:32:07 +0000
Received: by wa-out-1112.google.com with SMTP id j40so1499899wah
        for <java-user@lucene.apache.org>; Sat, 28 Jul 2007 22:31:28 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=R4T9zqTpRVXwPgDilXBZBgvZ2BXgksGpbvwLWrH9k4sMCoqgCrDYmD5XNrDlqnQe9xtrjUjE0ykYebngxL08VE3bORQW7eUK1YWTkP1azP/bEBJjslglx3OvvrmvSR/7Y1lXb2XFuvW69eSa+3QS4kH6LEfZSG6kfpk2l8L7vcI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=kVk8PYixLZrGSBxddO5izlWZ8HhmQjMK+IDaqzwz1GP4B633LVUljW5hQAErxC4qXcER+eF8tVumflcaPNJm6LrbqZ0qlUu2wzs4KhmOFu/r9ocXyJPd2PAnNO+3WXahagijgVxMEUan1pNOJso3WwXQfGFqOutZG5AhvS7t5qI=
Received: by 10.114.126.1 with SMTP id y1mr4434145wac.1185687088078;
        Sat, 28 Jul 2007 22:31:28 -0700 (PDT)
Received: by 10.114.15.19 with HTTP; Sat, 28 Jul 2007 22:31:28 -0700 (PDT)
Message-ID: <52c3ddca0707282231s52d8c881oc2813fa96741bb80@mail.gmail.com>
Date: Sun, 29 Jul 2007 07:31:28 +0200
From: "Lukas Vlcek" <lukas.vlcek@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Bug in Lucene 2.2.0 code? Simple code included (StringIndexOutOfBoundsException).
In-Reply-To: <46ABE7C6.9000204@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_15053_17468056.1185687088036"
References: <52c3ddca0707281502t56efed1dp9552f0907a4ffdde@mail.gmail.com>
	 <46ABE7C6.9000204@gmail.com>

------=_Part_15053_17468056.1185687088036
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Mark,
thank you for this. I will wait for your other responses.
This will keep me going on :-)

I didn't know that there is a design restriction in Lucene that the text and
TokenStream must be exactly the same (still this seems redundant, I will
dive into Lucene API more).

BR
Lukas

On 7/29/07, Mark Miller <markrmiller@gmail.com> wrote:
>
> I'm am going to try and write up some more info for you tomorrow, but
> just to point out: I do think there is a bug in the way offsets are
> being handled. I don't think this is causing your current problem (what
> I mentioned is) but it will prob cause you problems down the road. I
> will look into this further.
>
> - Mark
>
> Lukas Vlcek wrote:
> > Hi Lucene experts,
> >
> > The following is a simple Lucene code which generates
> > StringIndexOutOfBoundsException exception. I am using Lucene 2.2.0official
> > releasse. Can anyone tell me what is wrong with this code? Is this a bug
> or
> > a feature of Lucene? Any comments/hits highly welcommed!
> >
> > In a nutshell I have a document with two (or four) fileds:
> > 1) all
> > 2-4) small
> >
> > I use [all] for searching and [small] for highlighting.
> >
> > [packkage and imports truncated...]
> >
> > public class MemoryIndexCase {
> >     static public void main(String[] arg) {
> >
> >         Document doc = new Document();
> >
> >         doc.add(new Field("all","example long text",
> >                 Field.Store.NO, Field.Index.TOKENIZED));
> >         doc.add(new Field("small","example",
> >                 Field.Store.YES, Field.Index.UN_TOKENIZED,
> > Field.TermVector.WITH_POSITIONS_OFFSETS));
> >         doc.add(new Field("small","long",
> >                 Field.Store.YES, Field.Index.UN_TOKENIZED,
> > Field.TermVector.WITH_POSITIONS_OFFSETS));
> >         doc.add(new Field("small","text",
> >                 Field.Store.YES, Field.Index.UN_TOKENIZED,
> > Field.TermVector.WITH_POSITIONS_OFFSETS));
> >
> >         try {
> >             Directory idx = new RAMDirectory();
> >             IndexWriter writer = new IndexWriter(idx, new
> > StandardAnalyzer(), true);
> >
> >             writer.addDocument(doc);
> >             writer.optimize();
> >             writer.close();
> >
> >             Searcher searcher = new IndexSearcher(idx);
> >
> >             QueryParser qp = new QueryParser("all", new
> StandardAnalyzer());
> >             Query query = qp.parse("example text");
> >             Hits hits = searcher.search(query);
> >
> >             Highlighter highlighter =    new Highlighter(new
> > QueryScorer(query));
> >
> >             IndexReader ir = IndexReader.open(idx);
> >             for (int i = 0; i < hits.length(); i++) {
> >
> >                 String text = hits.doc(i).get("small");
> >
> >                 TermFreqVector tfv = ir.getTermFreqVector(hits.id(i),
> > "small");
> >                 TokenStream tokenStream=
> > TokenSources.getTokenStream((TermPositionVector)
> > tfv);
> >
> >                 String result =
> >                     highlighter.getBestFragment(tokenStream,text);
> >                 System.out.println(result);
> >             }
> >
> >         } catch (Throwable e) {
> >             e.printStackTrace();
> >         }
> >     }
> > }
> >
> > The exception is:
> > java.lang.StringIndexOutOfBoundsException: String index out of range: 11
> >     at java.lang.String.substring(String.java:1935)
> >     at
> org.apache.lucene.search.highlight.Highlighter.getBestTextFragments(
> > Highlighter.java:235)
> >     at org.apache.lucene.search.highlight.Highlighter.getBestFragments(
> > Highlighter.java:175)
> >     at org.apache.lucene.search.highlight.Highlighter.getBestFragment(
> > Highlighter.java:101)
> >     at org.lucenetest.MemoryIndexCase.main(MemoryIndexCase.java:70)
> >
> > Best regards,
> > Lukas
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_15053_17468056.1185687088036--

From java-user-return-29463-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 29 06:17:42 2007
Return-Path: <java-user-return-29463-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13270 invoked from network); 29 Jul 2007 06:17:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jul 2007 06:17:40 -0000
Received: (qmail 5742 invoked by uid 500); 29 Jul 2007 06:17:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5712 invoked by uid 500); 29 Jul 2007 06:17:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5700 invoked by uid 99); 29 Jul 2007 06:17:35 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Jul 2007 23:17:35 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dmitrytkach1@hotmail.com designates 65.54.246.177 as permitted sender)
Received: from [65.54.246.177] (HELO bay0-omc2-s41.bay0.hotmail.com) (65.54.246.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Jul 2007 06:17:25 +0000
Received: from hotmail.com ([65.54.169.89]) by bay0-omc2-s41.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.2668);
	 Sat, 28 Jul 2007 23:17:05 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Sat, 28 Jul 2007 23:17:05 -0700
Message-ID: <BAY114-DAV17D3F0CB7194EC697AFAA894ED0@phx.gbl>
Received: from 24.12.157.130 by BAY114-DAV17.phx.gbl with DAV;
	Sun, 29 Jul 2007 06:17:02 +0000
X-Originating-IP: [24.12.157.130]
X-Originating-Email: [dmitrytkach1@hotmail.com]
X-Sender: dmitrytkach1@hotmail.com
From: "Dmitry" <dmitrytkach1@hotmail.com>
To: <java-user@lucene.apache.org>
References: <20070720192740.9AC2D3E886E@f38.poczta.interia.pl> <359a92830707201310o1442bedembeb45051a4299eee@mail.gmail.com> <3F8F627A-CC84-4EC9-8159-336EF36335CE@ehatchersolutions.com> <359a92830707201445j6c269186j2b35330814e62b60@mail.gmail.com> <BAY114-DAV75FB1CC8B7A9563461B4294F20@phx.gbl> <BAY114-DAV182552E8007FE1EE46F82994EC0@phx.gbl>
Subject: Detection of index dublicates in Lucene
Date: Sun, 29 Jul 2007 01:18:48 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3028
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
X-OriginalArrivalTime: 29 Jul 2007 06:17:05.0382 (UTC) FILETIME=[15CD1060:01C7D1A8]
X-Virus-Checked: Checked by ClamAV on apache.org

We trying to find are any implementation for Lucene  -  detection index 
duclicates.
Assuming we have a set of documents and a document is a bunch of words. 
After we created indexec for the same document we need to knwo that all 
ideces will be uniq for specific document. (lexical equivalency).

Can we have like implementation of algorithm  has not determined a duplicate 
and another situation when algorithm has offered a false duplicate. In this 
case we can find all dublicate indeces.

And the same Algorithm we can use to detect Document dublicates - in this 
case we save time and can get better performance not to run indexed services 
against this document.

Please any suggestions will be good.

Thanks,

DT,

www.ejinz.com

Search Engine News




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29464-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 29 08:30:14 2007
Return-Path: <java-user-return-29464-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32739 invoked from network); 29 Jul 2007 08:30:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jul 2007 08:30:13 -0000
Received: (qmail 82838 invoked by uid 500); 29 Jul 2007 08:30:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82796 invoked by uid 500); 29 Jul 2007 08:30:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82783 invoked by uid 99); 29 Jul 2007 08:30:07 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Jul 2007 01:30:07 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mnrz57@gmail.com designates 209.85.132.251 as permitted sender)
Received: from [209.85.132.251] (HELO an-out-0708.google.com) (209.85.132.251)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Jul 2007 08:30:03 +0000
Received: by an-out-0708.google.com with SMTP id c5so248321anc
        for <java-user@lucene.apache.org>; Sun, 29 Jul 2007 01:29:42 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=DIK4n1O5RU3/PwUg2sjSSVmBdYybCS3sTF38xwXApC5fJV8ocRL6/x9yAy8qG8RTbIz1x8Lcq1o57HeiIH0mrKT/Fk9ur00ELTWw/yzwuVhIZrDFYAjWxICZCPYlM3WOstPBdKxFfyBdhWdEZ5P4CHEDB7aze1GNalb4m5l9MDI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=O2nrBTK1AqMYZb3Lqu66D9MiwdSRA28aPVBmx5gCWEgJnXL94s4d290Ff0EsquOgVvOFlluRJfQ2C0QGRysHTEEYPr+fJhEp3SXn4zknK/F7JSTAXkahjjiAiFiGrDziAkzuL9e2WaBwbACkDwU2/i82f4FKg9Mo7/J+0E8BKc8=
Received: by 10.100.167.7 with SMTP id p7mr4028291ane.1185697782056;
        Sun, 29 Jul 2007 01:29:42 -0700 (PDT)
Received: by 10.100.14.12 with HTTP; Sun, 29 Jul 2007 01:29:42 -0700 (PDT)
Message-ID: <34b8543c0707290129y167835d5obe62432966e0da2f@mail.gmail.com>
Date: Sun, 29 Jul 2007 11:59:42 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: two questions about NumberTools
In-Reply-To: <34b8543c0707162159o2931a838t51217fed3790986f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_25060_23843783.1185697782027"
References: <34b8543c0707160001q235f7589uc188f9e99b74672e@mail.gmail.com>
	 <700cf4dd0707161032ucc51949web237e8faed46463@mail.gmail.com>
	 <34b8543c0707162159o2931a838t51217fed3790986f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_25060_23843783.1185697782027
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi
I create my index files and encode all numbers using solr's NumberUtils but
searching not works!!! I created a custom query parser and override the
getRangeQuery and getFieldQuery but no result will return.
do I have to implement a custom analyzer too? currently I am using
whitespace analayzer and I don't think it needs to be customized.


> On 7/16/07, Dima May <dimamay@gmail.com> wrote:
> >
> > Mohammad,
> >
> > see for my 2 cents below,
> >
> > Good luck.
> >
> > D
> >
> >
> > On 7/16/07, Mohammad Norouzi <mnrz57@gmail.com> wrote:
> > >
> > > Hello
> > > I have problem in range queries, for example, I have queries like
> > > "field:[1
> > > TO 25]" or "field:[1.1 TO 11.25]"
> > > currently these queries not work. field:[20 TO 25] works fine but when
> > the
> > > both limits of the range have different number of digits the query
> > won't
> > > work. so the solution is NumberTools.
> > >
> > 1 - the NumberTools utility has two methods longToString() and
> > > stringToLong(). how about the double or float  numbers?? I think it
> > should
> > > be extends to support more data types
> >
> >
> > Check out these resources:
> > 1. https://issues.apache.org/jira/browse/LUCENE-530
> > 2. Solr has a class that will help you encode/decode floats for lucene
> > range
> > queries and sorting:
> > http://lucene.apache.org/solr/api/org/apache/solr/util/NumberUtils.html
> > 3. Alternatively you can pad the floats with zeros like this:
> > 000001.3000.
> > As long as the padding is consistent between indexing and querying your
> > range queries and sorting should work fine as appending zeros enforces
> > lexicographical order.
> >
> > 2 - suppose we are indexing a bunch of information and a field is in
> > long
> > > that we need to apply range queries on that later.
> > > now I have a query like "fieldone:(just for test) AND field_long:[1 TO
> > > 25]",
> > > the question is whether this query returns correct result? because
> > > field_long already encoded with longToString() method and in the index
> > > files
> > > you can't find any real value say, 1 or 25 or 10 ...
> > > do I need to use stringToLong() method while I am building query?
> >
> >
> > Yes the search query must "match" whats in the index so you would have
> > to
> > encode the value before performing the search. The good news are that
> > you
> > can encapsulate that logic into the custom analyzer and custom query
> > parser.
> > In query parser you should implement getRangeQuery.
> >
> > any comment would be of great help
> > >
> > > --
> > > Regards,
> > > Mohammad
> > > --------------------------
> > > see my blog: http://brainable.blogspot.com/
> > > another in Persian: http://fekre-motefavet.blogspot.com/
> > >
> >
>
>
>
> --
> Regards,
> Mohammad
> --------------------------
> see my blog: http://brainable.blogspot.com/
> another in Persian: http://fekre-motefavet.blogspot.com/
>



-- 
Regards,
Mohammad
--------------------------
see my blog: http://brainable.blogspot.com/
another in Persian: http://fekre-motefavet.blogspot.com/

------=_Part_25060_23843783.1185697782027--

From java-user-return-29465-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 29 13:19:45 2007
Return-Path: <java-user-return-29465-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6794 invoked from network); 29 Jul 2007 13:19:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jul 2007 13:19:44 -0000
Received: (qmail 68780 invoked by uid 500); 29 Jul 2007 13:19:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68741 invoked by uid 500); 29 Jul 2007 13:19:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68730 invoked by uid 99); 29 Jul 2007 13:19:37 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Jul 2007 06:19:37 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Jul 2007 13:19:29 +0000
Received: by nf-out-0910.google.com with SMTP id d3so126128nfc
        for <java-user@lucene.apache.org>; Sun, 29 Jul 2007 06:19:07 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:in-reply-to:references:mime-version:x-priority:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=DsjXyN50++/5p99l21xIFivdKIj+SHr2X/4vhhQgx2jYdV0K1ApuClYSRvh4aYKcKu21Xoffm4tVhloFoTHjOzyi7NNOwjwl2EABBpKz50Ef9LDEewKv/gxyIglzZlATjN7OLjwCi383fRN5GQxJtzfR5oNiUiZcsxRgo+ITIOM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:in-reply-to:references:mime-version:x-priority:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=VaTM391D5XsCjEJy4mHdT14IhnGIihro2dKhuzMy1gTWF1vlfpUOTtIb9rzlLBP9W50yP5nZcWkeHZU5cmoLjtcWpNAMtSjfK/oo1GfjhZpdXXQWJ6LOuKvBxHexmCnng4ER84wVNaA92UuSY73n2LJ1MApVJQSTWdJDkmqkiXM=
Received: by 10.86.49.13 with SMTP id w13mr3211175fgw.1185715146907;
        Sun, 29 Jul 2007 06:19:06 -0700 (PDT)
Received: from ?192.168.2.101? ( [83.249.110.50])
        by mx.google.com with ESMTPS id i5sm9065205mue.2007.07.29.06.19.05
        (version=TLSv1/SSLv3 cipher=OTHER);
        Sun, 29 Jul 2007 06:19:06 -0700 (PDT)
In-Reply-To: <BAY114-DAV182552E8007FE1EE46F82994EC0@phx.gbl>
References: <20070720192740.9AC2D3E886E@f38.poczta.interia.pl> <359a92830707201310o1442bedembeb45051a4299eee@mail.gmail.com> <3F8F627A-CC84-4EC9-8159-336EF36335CE@ehatchersolutions.com> <359a92830707201445j6c269186j2b35330814e62b60@mail.gmail.com> <BAY114-DAV75FB1CC8B7A9563461B4294F20@phx.gbl> <BAY114-DAV182552E8007FE1EE46F82994EC0@phx.gbl>
Mime-Version: 1.0 (Apple Message framework v752.3)
X-Priority: 3
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <33C27A70-877D-4B6C-A6D9-96E9E50A0EC1@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: lucene integration with PDM Windchill  (Product Data Management System)
Date: Sun, 29 Jul 2007 15:14:50 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

I'm not sure I understand how all the objects you talk to relate to  
each other, nor do I see a concrete question in your post.

Is your problem that you do not know how to denormalize the object  
grapgs in order to represent them as Lucene documents that make sense  
to search in? Or are you asking how to implement an ad hoc service  
for your PDM that communicate with Lucene?

The latter is probably a question we will not be able to help out  
with more than explaining how readers, writers and searchers work.


29 jul 2007 kl. 01.56 skrev Dmitry:

> Karl,
>
> thanks for help.
>
> I will try to explain requirements. There is system PDM - product  
> Data Management System - which manages the data related to  
> products, supports precudures druing the product lifecycle deals  
> with the development and production infrastructure.
> There following design paterns which can be used for implementation  
> and customization of this system  - point to integrate Lucene with  
> Windchill (PDM):
>
> - The Object Reference Design Pattern (encapsulates details  
> concerning persistable objects and their unique databse keys- like  
> for Objects WTParts, WTAssemblies, WTDocuments and their relations)
> - Business Service Design Pattern (building windchill services -  
> like using remote interfaces service Events)
> - Master-iteration Design Pattern (like two objects: Mastered and  
> Iterated: adhare all versioned data in Windchill PDM system  
> <PDMLink> and <ProjectLink>)
>
> We need use Lucene with WTObeject like WTDocuments && WTParts to  
> create indexes and provide search service.
> The properties of a document for instance - MS Documnts or PDF  
> files are specified on the WTDocument class. But the sum of the  
> propertiesare stored on WTDocumnetMaster. WTDocument implements  
> ContenrHolder - primary content and secondary content. And by the  
> way WTDocument can create two types of relationships to other  
> documents using WTDocumentUsageLink (build relationships between  
> documents and document structure). Atributes which need to be used  
> for searching are on either  WTDocumentMaster or WTDocument clasess.
>
> This was just short desription of architecture of PDMLink  -  
> Windchill.
> So we need create  some Lucene services(processors) embedded to the  
> system using extended interfaces for creation indexes and Search  
> all Documnets by Attributes.
>
> thanks,
> Dmitry
> www.ejinz.com
> Search Engine News
>
> --------------------------------------------------------------------
>
>> Trying to integrate PDM system : WTPart obejct with Lucene  
>> indexing search framework. Part of the work is integration with  
>> persistent layer <hibernate>+ indeces storage+ mysql
>
> You have a product data management software of some sort that use
> MySQL via Hibernate for persistency, and now you want to use Lucene
> to search the data?
>
>> Could not find a good solution ...
>
> What possible solutions did you find, and what was the problem with
> these?
>
>> please advice
>
> My guess is that very few people in this forum knows how Windchill
> works, what a WTPart is or what the complexity of the system is in a
> persistent state. So you probably need to explain your requirements a
> bit more in order to get a helpful answer or discussion going.
>
>
> -- 
> karl
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29466-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 29 22:09:27 2007
Return-Path: <java-user-return-29466-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17334 invoked from network); 29 Jul 2007 22:09:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jul 2007 22:09:26 -0000
Received: (qmail 6928 invoked by uid 500); 29 Jul 2007 22:09:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6895 invoked by uid 500); 29 Jul 2007 22:09:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6884 invoked by uid 99); 29 Jul 2007 22:09:20 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Jul 2007 15:09:20 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Jul 2007 22:09:14 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IFGwX-0003n2-L1
	for java-user@lucene.apache.org; Sun, 29 Jul 2007 15:08:53 -0700
Message-ID: <11855658.post@talk.nabble.com>
Date: Sun, 29 Jul 2007 15:08:53 -0700 (PDT)
From: Jeff French <jeff@mdbconsulting.com>
To: java-user@lucene.apache.org
Subject: Re: Search terms on a single "instance" of field
In-Reply-To: <a8d89b3b0707270733r11ac01f4o77307033d97360d3@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: jeff@mdbconsulting.com
References: <a8d89b3b0707261232i6541bbcfy1e12440b9b78ad7c@mail.gmail.com> <A955EA1F8FE31749AEC8C998082F6C7C01ECDB3A@hai01.hippo.local> <a8d89b3b0707270733r11ac01f4o77307033d97360d3@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Rossini, have you had any luck with this?  I don't know if this solves your
exact problem, but could you do something like this:

1. Use Analyzer.getPositionIncrementGap to create a gap (let's say 100)
between your fieldA's.
2. Then query like this:

       fieldA:("termA termB"~99)

I did this playing around with table cells, and it seems to work so far.

    Jeff


rossini wrote:
>=20
> Actually no,
>=20
>    Because I'd like to retrieve terms that were computed on the same
> instance of Field. Taking your example to ilustrate better, I have 2
> documents, on documentA I structured one field, Field("fieldA", "termA
> termB", customAnalyzer). On documentB I structured 2 fields,
> Field("fieldA",
> "termA termC", customAnalyzer) and Field("fieldA", "termB termC",
> customAnalyzer).
>=20
>    The problem is, if I search like you suggested, fieldA:termA +
> fieldA:termB, I will get both documents, but I want only documentA. For
> that
> to happen, somehow, somewhere should be an information that tells that on
> documentA, termA and termB where indexed on the same instance of fieldA.
> I=C2=B4m
> guessing this is not possible, but it would be great if someone has an
> ideia
> to solve this.
>=20
--=20
View this message in context: http://www.nabble.com/Search-terms-on-a-singl=
e-%22instance%22-of-field-tf4153674.html#a11855658
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29467-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 30 07:13:44 2007
Return-Path: <java-user-return-29467-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41050 invoked from network); 30 Jul 2007 07:13:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2007 07:13:43 -0000
Received: (qmail 56506 invoked by uid 500); 30 Jul 2007 07:13:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56349 invoked by uid 500); 30 Jul 2007 07:13:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56324 invoked by uid 99); 30 Jul 2007 07:13:26 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 00:13:26 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of stopman@gmail.com designates 66.249.82.224 as permitted sender)
Received: from [66.249.82.224] (HELO wx-out-0506.google.com) (66.249.82.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 07:13:17 +0000
Received: by wx-out-0506.google.com with SMTP id i28so1094002wxd
        for <java-user@lucene.apache.org>; Mon, 30 Jul 2007 00:12:57 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=jY4AMuhJ430OiWVa9UtWZLihtTMRm5iHHlEPFYBast8uKBQWfUszyQUPxvGlCZUoz/eMTLlYkBfRFSRkDjZyvNtxb2kdf1+yYyZR0Ivqm40S3pFlmZherdFdJPbd9isXT081Iqoe5B3O6honBNzQXhTZVpZvF6J7yxIc/Vq65TI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ZZALVHncukUZJS1za2jhbGzzGxkJjC1O6tThL6ACdVMt7RH38tJiB2FnzPAhvxA6KHDOPTo8gR3GSk+/+t/LigFtLJEpva0F1a+fAzyPQ8LnEccyW4JHNvIIWnsU4iuV4XsDHk+pmCa8qgSbdQ4GcjlXe1Z4noMLQdwox3Urexo=
Received: by 10.90.89.5 with SMTP id m5mr1487314agb.1185779576767;
        Mon, 30 Jul 2007 00:12:56 -0700 (PDT)
Received: by 10.90.27.10 with HTTP; Mon, 30 Jul 2007 00:12:56 -0700 (PDT)
Message-ID: <652776090707300012w149fa5efq54ff702e8edc2dd7@mail.gmail.com>
Date: Mon, 30 Jul 2007 00:12:56 -0700
From: "Michael Stoppelman" <stopman@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Detection of index dublicates in Lucene
In-Reply-To: <BAY114-DAV17D3F0CB7194EC697AFAA894ED0@phx.gbl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_20501_16914050.1185779576736"
References: <20070720192740.9AC2D3E886E@f38.poczta.interia.pl>
	 <359a92830707201310o1442bedembeb45051a4299eee@mail.gmail.com>
	 <3F8F627A-CC84-4EC9-8159-336EF36335CE@ehatchersolutions.com>
	 <359a92830707201445j6c269186j2b35330814e62b60@mail.gmail.com>
	 <BAY114-DAV75FB1CC8B7A9563461B4294F20@phx.gbl>
	 <BAY114-DAV182552E8007FE1EE46F82994EC0@phx.gbl>
	 <BAY114-DAV17D3F0CB7194EC697AFAA894ED0@phx.gbl>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_20501_16914050.1185779576736
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

A couple of thoughts here...

You could hash (e.g.md5) all the documents in your index and eliminate
duplicates that way. Just pick one of the docs in the hash bucket as
the non-dup document and the delete the other dups. This could be run as a
batch job to eliminate the duplicates in an off-line process.

Alternatively, if you don't want to run over the entire index all the time,
you could add a field that contains some kind of hash (e.g. md5) as a field
in
lucene Document. At query time you could make sure all the Documents
returned are unique.

-M

On 7/28/07, Dmitry <dmitrytkach1@hotmail.com> wrote:
>
> We trying to find are any implementation for Lucene  -  detection index
> duclicates.
> Assuming we have a set of documents and a document is a bunch of words.
> After we created indexec for the same document we need to knwo that all
> ideces will be uniq for specific document. (lexical equivalency).
>
> Can we have like implementation of algorithm  has not determined a
> duplicate
> and another situation when algorithm has offered a false duplicate. In
> this
> case we can find all dublicate indeces.
>
> And the same Algorithm we can use to detect Document dublicates - in this
> case we save time and can get better performance not to run indexed
> services
> against this document.
>
> Please any suggestions will be good.
>
> Thanks,
>
> DT,
>
> www.ejinz.com
>
> Search Engine News
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_20501_16914050.1185779576736--

From java-user-return-29468-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 30 08:27:46 2007
Return-Path: <java-user-return-29468-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66941 invoked from network); 30 Jul 2007 08:27:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2007 08:27:43 -0000
Received: (qmail 93853 invoked by uid 500); 30 Jul 2007 08:27:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86166 invoked by uid 500); 30 Jul 2007 08:25:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79794 invoked by uid 99); 30 Jul 2007 08:24:02 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 01:24:02 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [169.229.70.150] (HELO rescomp.berkeley.edu) (169.229.70.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 08:22:10 +0000
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id EFA7DAD402; Mon, 30 Jul 2007 01:21:31 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id E2AC443139
	for <java-user@lucene.apache.org>; Mon, 30 Jul 2007 01:21:31 -0700 (PDT)
Date: Mon, 30 Jul 2007 01:21:31 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Strange Error while deleting Documents from index while indexing.
In-Reply-To: <11823559.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.58.0707300120130.14441@hal.rescomp.berkeley.edu>
References: <11804824.post@talk.nabble.com>
 <OF490CFE84.545B32C7-ON88257324.007923D2-88257324.00797CAE@il.ibm.com>
 <11823559.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Where shall i post this issue.

you are currently posting to a list named "java-user" this is for "user"
related questions about the "java" lucene project.

if you have questions about "Lucene.Net" you should be asking them on the
"Lucene.Net" user list...

http://incubator.apache.org/lucene.net/
http://mail-archives.apache.org/mod_mbox/incubator-lucene-net-user/




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29469-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 30 12:26:45 2007
Return-Path: <java-user-return-29469-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63540 invoked from network); 30 Jul 2007 12:26:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2007 12:26:44 -0000
Received: (qmail 42757 invoked by uid 500); 30 Jul 2007 12:26:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42720 invoked by uid 500); 30 Jul 2007 12:26:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42708 invoked by uid 99); 30 Jul 2007 12:26:36 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 05:26:36 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 66.249.82.227 as permitted sender)
Received: from [66.249.82.227] (HELO wx-out-0506.google.com) (66.249.82.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 12:26:29 +0000
Received: by wx-out-0506.google.com with SMTP id i28so1138958wxd
        for <java-user@lucene.apache.org>; Mon, 30 Jul 2007 05:26:08 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=RNGhbD5/wXAkjwuQvctePXe9/q13nOsTiwpal54gdKxGidP3Hbt7bfOB4HJC8WkhSf2aM/W+BYeZP0xnHuKtyGgAR2uDmuWbwZBoANkWh6yTErk6fCE26h1IPTdZYmQyF1m5kJkNxV9FmL39iCpqdlWe7rWaPv8f634D0C7XyIo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=WtPgrgCNXu9/7A9XW48yTAMQSammt0cVoKlPqm4V8hkYH7x3Zz1Yw0RbtFjib2SycVB/6zwvLT71ZwlBPgMaC/NDC8bW6ObGkBMbBmCx4YTMvtAY+XfCffgkzJQLGvNZUHcnnQ4585DE9e2NdG9qEwHJUe8vIDvgkJvU/IB0X9c=
Received: by 10.90.63.16 with SMTP id l16mr1676152aga.1185798368435;
        Mon, 30 Jul 2007 05:26:08 -0700 (PDT)
Received: from ?192.168.1.105? ( [216.66.114.204])
        by mx.google.com with ESMTPS id m75sm2777548wrm.2007.07.30.05.26.06
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 30 Jul 2007 05:26:07 -0700 (PDT)
Message-ID: <46ADD8D3.4020805@gmail.com>
Date: Mon, 30 Jul 2007 08:25:55 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.5 (Windows/20070716)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Bug in Lucene 2.2.0 code? Simple code included (StringIndexOutOfBoundsException).
References: <52c3ddca0707281502t56efed1dp9552f0907a4ffdde@mail.gmail.com>	 <46ABE7C6.9000204@gmail.com> <52c3ddca0707282231s52d8c881oc2813fa96741bb80@mail.gmail.com>
In-Reply-To: <52c3ddca0707282231s52d8c881oc2813fa96741bb80@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hey Lukas,

I was being simplistic when I said that the text and TokenSteam must be 
exactly the same. It's difficult to think of a reason why you would not 
want them to be the same though. Each Token records the offsets where it 
can be found in the original text -- that is how the Highlighter knows 
where to highlight in the original text with the only the Tokens to 
inspect. So if a Token is scored >0, then the offsets for that Token 
must be valid indexes into the text String (In the case of the 
HTMLFormmatter, which only marks Tokens that score >0).

Now an issue I see you having:

The TokenStream for "example long text" is:
(term,startoffset,endoffset)

(example,0,7)
(long,8,12)
(text,13,17)

So for the query "example long" the Highlighter will highlight offsets 
0-7 and 8-12 in the source text. In your example, with the text only 
being "example", the attempt to highlight the Token "long" will index 
into the source text 8 and cause an outofbounds.

In your case you are even worse off because you are building the 
TokenStream from a field that was added more than once. This gives you 
seemingly wrong offsets of:

(example,0,7)
(long,14,18)
(text,22,26)

Each word has its space accounted for twice. Maybe there is a reason for 
this, but it looks wrong. I have not investigated enough to know if 
TokenSources is responsible for this, or if core Lucene is the culprit. 
Even if it was done differently though, there would still seem to be 
possible issues with the possible spacing between words when you are 
adding the words one at a time with no spacing in the same field.

Looking at your original email though, you may be trying to do something 
that is best done without the Highlighter.

In summary , you should use Document.getFields (more efficient if you 
are getting more than one field anyway) and get around the offset issues 
above.

- Mark

Lukas Vlcek wrote:
> Mark,
> thank you for this. I will wait for your other responses.
> This will keep me going on :-)
>
> I didn't know that there is a design restriction in Lucene that the text and
> TokenStream must be exactly the same (still this seems redundant, I will
> dive into Lucene API more).
>
> BR
> Lukas
>
> On 7/29/07, Mark Miller <markrmiller@gmail.com> wrote:
>   
>> I'm am going to try and write up some more info for you tomorrow, but
>> just to point out: I do think there is a bug in the way offsets are
>> being handled. I don't think this is causing your current problem (what
>> I mentioned is) but it will prob cause you problems down the road. I
>> will look into this further.
>>
>> - Mark
>>
>> Lukas Vlcek wrote:
>>     
>>> Hi Lucene experts,
>>>
>>> The following is a simple Lucene code which generates
>>> StringIndexOutOfBoundsException exception. I am using Lucene 2.2.0official
>>> releasse. Can anyone tell me what is wrong with this code? Is this a bug
>>>       
>> or
>>     
>>> a feature of Lucene? Any comments/hits highly welcommed!
>>>
>>> In a nutshell I have a document with two (or four) fileds:
>>> 1) all
>>> 2-4) small
>>>
>>> I use [all] for searching and [small] for highlighting.
>>>
>>> [packkage and imports truncated...]
>>>
>>> public class MemoryIndexCase {
>>>     static public void main(String[] arg) {
>>>
>>>         Document doc = new Document();
>>>
>>>         doc.add(new Field("all","example long text",
>>>                 Field.Store.NO, Field.Index.TOKENIZED));
>>>         doc.add(new Field("small","example",
>>>                 Field.Store.YES, Field.Index.UN_TOKENIZED,
>>> Field.TermVector.WITH_POSITIONS_OFFSETS));
>>>         doc.add(new Field("small","long",
>>>                 Field.Store.YES, Field.Index.UN_TOKENIZED,
>>> Field.TermVector.WITH_POSITIONS_OFFSETS));
>>>         doc.add(new Field("small","text",
>>>                 Field.Store.YES, Field.Index.UN_TOKENIZED,
>>> Field.TermVector.WITH_POSITIONS_OFFSETS));
>>>
>>>         try {
>>>             Directory idx = new RAMDirectory();
>>>             IndexWriter writer = new IndexWriter(idx, new
>>> StandardAnalyzer(), true);
>>>
>>>             writer.addDocument(doc);
>>>             writer.optimize();
>>>             writer.close();
>>>
>>>             Searcher searcher = new IndexSearcher(idx);
>>>
>>>             QueryParser qp = new QueryParser("all", new
>>>       
>> StandardAnalyzer());
>>     
>>>             Query query = qp.parse("example text");
>>>             Hits hits = searcher.search(query);
>>>
>>>             Highlighter highlighter =    new Highlighter(new
>>> QueryScorer(query));
>>>
>>>             IndexReader ir = IndexReader.open(idx);
>>>             for (int i = 0; i < hits.length(); i++) {
>>>
>>>                 String text = hits.doc(i).get("small");
>>>
>>>                 TermFreqVector tfv = ir.getTermFreqVector(hits.id(i),
>>> "small");
>>>                 TokenStream tokenStream=
>>> TokenSources.getTokenStream((TermPositionVector)
>>> tfv);
>>>
>>>                 String result =
>>>                     highlighter.getBestFragment(tokenStream,text);
>>>                 System.out.println(result);
>>>             }
>>>
>>>         } catch (Throwable e) {
>>>             e.printStackTrace();
>>>         }
>>>     }
>>> }
>>>
>>> The exception is:
>>> java.lang.StringIndexOutOfBoundsException: String index out of range: 11
>>>     at java.lang.String.substring(String.java:1935)
>>>     at
>>>       
>> org.apache.lucene.search.highlight.Highlighter.getBestTextFragments(
>>     
>>> Highlighter.java:235)
>>>     at org.apache.lucene.search.highlight.Highlighter.getBestFragments(
>>> Highlighter.java:175)
>>>     at org.apache.lucene.search.highlight.Highlighter.getBestFragment(
>>> Highlighter.java:101)
>>>     at org.lucenetest.MemoryIndexCase.main(MemoryIndexCase.java:70)
>>>
>>> Best regards,
>>> Lukas
>>>
>>>
>>>       
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29470-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 30 12:43:56 2007
Return-Path: <java-user-return-29470-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72932 invoked from network); 30 Jul 2007 12:43:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2007 12:43:55 -0000
Received: (qmail 64488 invoked by uid 500); 30 Jul 2007 12:43:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64158 invoked by uid 500); 30 Jul 2007 12:43:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64147 invoked by uid 99); 30 Jul 2007 12:43:48 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 05:43:48 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.83] (HELO spunkymail-a16.dreamhost.com) (208.97.132.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 12:43:40 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a16.dreamhost.com (Postfix) with ESMTP id D42297CDAF
	for <java-user@lucene.apache.org>; Mon, 30 Jul 2007 05:43:18 -0700 (PDT)
In-Reply-To: <BAY114-DAV17D3F0CB7194EC697AFAA894ED0@phx.gbl>
References: <20070720192740.9AC2D3E886E@f38.poczta.interia.pl> <359a92830707201310o1442bedembeb45051a4299eee@mail.gmail.com> <3F8F627A-CC84-4EC9-8159-336EF36335CE@ehatchersolutions.com> <359a92830707201445j6c269186j2b35330814e62b60@mail.gmail.com> <BAY114-DAV75FB1CC8B7A9563461B4294F20@phx.gbl> <BAY114-DAV182552E8007FE1EE46F82994EC0@phx.gbl> <BAY114-DAV17D3F0CB7194EC697AFAA894ED0@phx.gbl>
Mime-Version: 1.0 (Apple Message framework v752.3)
X-Priority: 3
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <126D9BCF-064D-43FE-BBEE-ECCD1C662556@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Detection of index dublicates in Lucene
Date: Mon, 30 Jul 2007 08:43:00 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

I believe Nutch has a duplicate detection algorithm.  I don't know  
how easy it would be to run independently on a Lucene index.

-Grant

On Jul 29, 2007, at 2:18 AM, Dmitry wrote:

> We trying to find are any implementation for Lucene  -  detection  
> index duclicates.
> Assuming we have a set of documents and a document is a bunch of  
> words. After we created indexec for the same document we need to  
> knwo that all ideces will be uniq for specific document. (lexical  
> equivalency).
>
> Can we have like implementation of algorithm  has not determined a  
> duplicate and another situation when algorithm has offered a false  
> duplicate. In this case we can find all dublicate indeces.
>
> And the same Algorithm we can use to detect Document dublicates -  
> in this case we save time and can get better performance not to run  
> indexed services against this document.
>
> Please any suggestions will be good.
>
> Thanks,
>
> DT,
>
> www.ejinz.com
>
> Search Engine News
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29471-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 30 12:51:46 2007
Return-Path: <java-user-return-29471-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77880 invoked from network); 30 Jul 2007 12:51:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2007 12:51:45 -0000
Received: (qmail 79194 invoked by uid 500); 30 Jul 2007 12:51:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79156 invoked by uid 500); 30 Jul 2007 12:51:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79145 invoked by uid 99); 30 Jul 2007 12:51:38 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 05:51:38 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 12:51:28 +0000
Received: by nf-out-0910.google.com with SMTP id d3so168773nfc
        for <java-user@lucene.apache.org>; Mon, 30 Jul 2007 05:51:07 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:in-reply-to:references:mime-version:x-priority:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=OeezIzq9ik+DWupUJEFUYWYKT695FkEU/Wp8V0Sy539Nm0E3yEbLmrZaOg7vtX69MBK5ywwzw99ChZBzfNiGjL0XDrL6XXieB0vjfgZVLPTdYCGB/fqsC9331Cgkacj4UoUrItlRbzcPt3TP/PmQGuSPG8cQxyXb5eC76pZgmkU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:in-reply-to:references:mime-version:x-priority:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=q5syH9Fjx+sLlYyrlqPbqHe9rI3gJAVkzM30/UL/qgH1kFUpIVZs5Yl74wW8H5ZongDvdlj5RKq6N4Is9QqlFYzM8vaP5pZbkPOskrgs2xPjihaOSbz0VarlEkP1Rby2GhWDL5f0B7l4LGXfoldHWwbUo37QU6Fg+pfZaDkKfuQ=
Received: by 10.86.71.1 with SMTP id t1mr3897485fga.1185799867174;
        Mon, 30 Jul 2007 05:51:07 -0700 (PDT)
Received: from ?192.168.2.101? ( [83.249.110.50])
        by mx.google.com with ESMTPS id g28sm437478fkg.2007.07.30.05.51.06
        (version=TLSv1/SSLv3 cipher=OTHER);
        Mon, 30 Jul 2007 05:51:06 -0700 (PDT)
In-Reply-To: <126D9BCF-064D-43FE-BBEE-ECCD1C662556@apache.org>
References: <20070720192740.9AC2D3E886E@f38.poczta.interia.pl> <359a92830707201310o1442bedembeb45051a4299eee@mail.gmail.com> <3F8F627A-CC84-4EC9-8159-336EF36335CE@ehatchersolutions.com> <359a92830707201445j6c269186j2b35330814e62b60@mail.gmail.com> <BAY114-DAV75FB1CC8B7A9563461B4294F20@phx.gbl> <BAY114-DAV182552E8007FE1EE46F82994EC0@phx.gbl> <BAY114-DAV17D3F0CB7194EC697AFAA894ED0@phx.gbl> <126D9BCF-064D-43FE-BBEE-ECCD1C662556@apache.org>
Mime-Version: 1.0 (Apple Message framework v752.3)
X-Priority: 3
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <B532EB72-C936-499A-9921-1024049DA380@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Detection of index dublicates in Lucene
Date: Mon, 30 Jul 2007 14:46:49 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

30 jul 2007 kl. 14.43 skrev Grant Ingersoll:

> I believe Nutch has a duplicate detection algorithm.  I don't know  
> how easy it would be to run independently on a Lucene index.

There have also been a bunch of near-duplicate ideas that have been  
presented on the forums before.

This is one of the threads: <http://www.nabble.com/Checking-for- 
duplicates-inside-index-tf1665494.html>


-- 
karl


>
> -Grant
>
> On Jul 29, 2007, at 2:18 AM, Dmitry wrote:
>
>> We trying to find are any implementation for Lucene  -  detection  
>> index duclicates.
>> Assuming we have a set of documents and a document is a bunch of  
>> words. After we created indexec for the same document we need to  
>> knwo that all ideces will be uniq for specific document. (lexical  
>> equivalency).
>>
>> Can we have like implementation of algorithm  has not determined a  
>> duplicate and another situation when algorithm has offered a false  
>> duplicate. In this case we can find all dublicate indeces.
>>
>> And the same Algorithm we can use to detect Document dublicates -  
>> in this case we save time and can get better performance not to  
>> run indexed services against this document.
>>
>> Please any suggestions will be good.
>>
>> Thanks,
>>
>> DT,
>>
>> www.ejinz.com
>>
>> Search Engine News
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29472-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 30 13:22:43 2007
Return-Path: <java-user-return-29472-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93546 invoked from network); 30 Jul 2007 13:22:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2007 13:22:41 -0000
Received: (qmail 36971 invoked by uid 500); 30 Jul 2007 13:22:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36933 invoked by uid 500); 30 Jul 2007 13:22:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36901 invoked by uid 99); 30 Jul 2007 13:22:31 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 06:22:30 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 13:22:24 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IFVCG-0006qH-2l
	for java-user@lucene.apache.org; Mon, 30 Jul 2007 06:22:04 -0700
Message-ID: <11863644.post@talk.nabble.com>
Date: Mon, 30 Jul 2007 06:22:04 -0700 (PDT)
From: testn <test1@doramail.com>
To: java-user@lucene.apache.org
Subject: LUCENE-843 Release
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: test1@doramail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi guys,

Do you think LUCENE-843 is stable enough? If so, do you think it's worth to
release it with probably LUCENE 2.2.1? It would be nice so that people can
take the advantage of it right away without risking other breaking changes
in the HEAD branch or waiting until 2.3 release.

Thanks,
-- 
View this message in context: http://www.nabble.com/LUCENE-843-Release-tf4170191.html#a11863644
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29473-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 30 13:57:14 2007
Return-Path: <java-user-return-29473-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4092 invoked from network); 30 Jul 2007 13:57:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2007 13:57:13 -0000
Received: (qmail 99150 invoked by uid 500); 30 Jul 2007 13:57:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98846 invoked by uid 500); 30 Jul 2007 13:57:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98835 invoked by uid 99); 30 Jul 2007 13:57:05 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 06:57:05 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jattardi@gmail.com designates 209.85.198.189 as permitted sender)
Received: from [209.85.198.189] (HELO rv-out-0910.google.com) (209.85.198.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 13:57:01 +0000
Received: by rv-out-0910.google.com with SMTP id k20so319938rvb
        for <java-user@lucene.apache.org>; Mon, 30 Jul 2007 06:56:41 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=t8JRtt0hqFdQlCDomdrhod5f9adDh1A3rqvbdDXL58+okdUUgMArjYTerf0+1ayabPYD/48CUxo7QBDF4eYKoEqnglPaiykCOmF9dSlhtjatal2LFH35TdkY+n1KgY3DhFkRZL0akB2kZgpIfxIoYvqQ0Tpc2PCAtz2/VMA8DBU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=b9D3r1t1yNSRhSd0n/K3tSknK+xjonXpphe5CQBuLFxucP8vHrRHgwp1dyknVbvmXr3mqXK3vcl9T9vvpbs7FCIMasMcYqD3h9+aMs614aEHawjKKPASVw1AwcCf5kV/+gjoV55TJqERyTyBWAvGTlLLNmB4BKxjq+zYED3sOPc=
Received: by 10.115.110.6 with SMTP id n6mr5602694wam.1185803801607;
        Mon, 30 Jul 2007 06:56:41 -0700 (PDT)
Received: by 10.114.121.8 with HTTP; Mon, 30 Jul 2007 06:56:41 -0700 (PDT)
Message-ID: <7a14509e0707300656j3f26b1eh70ef6fb934f05479@mail.gmail.com>
Date: Mon, 30 Jul 2007 09:56:41 -0400
From: "Joe Attardi" <jattardi@gmail.com>
To: "Lucene Mailing List" <java-user@lucene.apache.org>
Subject: Indexing/Analyzer question - case-insensitive "contains" search
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_21701_26204643.1185803801594"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_21701_26204643.1185803801594
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi everyone,

I told you I'd be back with more questions!  :-)
Here is my situation. In my application, the field to be searched is
selected via a drop-down box. I want my searches to basically be "contains"
searches - I take what the user typed in, put a wildcard character at the
beginning and end, and put that in a WildcardQuery with the selected field.
In simple cases, this works great.

But, the StandardAnalyzer and SimpleAnalyzer is removing some characters I
need. For example, one of my objects has a name of "Joe's Devices". If I
search for "Joe's", it doesn't work, because the apostrophe is stripped out.
I tried using the KeywordAnalyzer, which keeps the string intact, but then
won't my searches be case-sensitive? This is easy to fix of course by
calling toLowerCase() on the text when it is indexed, but then later when
retrieved from the index to be displayed in the search results, "Joe's
Devices" is displayed as "joe's devices". Is there anything I can do here
short of putting two copies of the name in the document - one indexed/not
stored ("joe's devices"), and one stored/not indexed("Joe's Devices") ? Or
can I accomplish this case-insensitive "contains" search some other way -
would I have to write a custom Analyzer, or something?

Thanks in advance!

-- 
Joe Attardi
jattardi@gmail.com
http://thinksincode.blogspot.com/

------=_Part_21701_26204643.1185803801594--

From java-user-return-29474-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 30 14:13:18 2007
Return-Path: <java-user-return-29474-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11827 invoked from network); 30 Jul 2007 14:13:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2007 14:13:17 -0000
Received: (qmail 22219 invoked by uid 500); 30 Jul 2007 14:13:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22180 invoked by uid 500); 30 Jul 2007 14:13:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22160 invoked by uid 99); 30 Jul 2007 14:13:10 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 07:13:10 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [213.133.33.40] (HELO smtp.is.nl) (213.133.33.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 14:13:04 +0000
Received: from [213.133.51.241] (HELO hai01.hippo.local)
  by smtp.is.nl (CommuniGate Pro SMTP 5.0.10)
  with ESMTP id 20439154 for java-user@lucene.apache.org; Mon, 30 Jul 2007 16:12:41 +0200
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.0.6619.12
Subject: RE: Indexing/Analyzer question - case-insensitive "contains" search
Date: Mon, 30 Jul 2007 16:12:31 +0200
Message-ID: <A955EA1F8FE31749AEC8C998082F6C7C01AC1259@hai01.hippo.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Indexing/Analyzer question - case-insensitive "contains" search
Thread-Index: AcfSsYewg50vMwseQPmUFqGp1r4mwgAAQYmw
From: "Ard Schrijvers" <a.schrijvers@hippo.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

> Hi everyone,
>=20
> I told you I'd be back with more questions!  :-)
> Here is my situation. In my application, the field to be searched is
> selected via a drop-down box. I want my searches to basically=20
> be "contains"
> searches - I take what the user typed in, put a wildcard=20
> character at the
> beginning and end, and put that in a WildcardQuery with the=20
> selected field.
> In simple cases, this works great.

It does sound very strange to me, to default to a WildCardQuery! Suppose =
I am looking for "bold", I am getting hits for "old".=20

IMO, you should move the WildcardQuery and just use a simple QueryParser =
(with the analyzer you use at indexing time). Your problem below arises =
from the fact that you construct your search with WildcardQuery(Term t) =
and t =3D new Term("field","Joe's");

But, now you are looking for a term that is very likely not to be =
present in the index, although you idnexed text that contains "Joe's". =
The StandardAnalyzer() for example would probably split in ' , and =
ignores the s. If you use queryparser instead of creating your own term, =
you are save (and you have no problems with case-sensitive either).

If you do not really understand why it works like this, it might be good =
to play around with luke: open your index with luke, go to plugins tab, =
and put in some text and see how it is tokenized with some sample =
analyzers.=20

Regards Ard

>=20
> But, the StandardAnalyzer and SimpleAnalyzer is removing some=20
> characters I
> need. For example, one of my objects has a name of "Joe's=20
> Devices". If I
> search for "Joe's", it doesn't work, because the apostrophe=20
> is stripped out.
> I tried using the KeywordAnalyzer, which keeps the string=20
> intact, but then
> won't my searches be case-sensitive? This is easy to fix of course by
> calling toLowerCase() on the text when it is indexed, but=20
> then later when
> retrieved from the index to be displayed in the search results, "Joe's
> Devices" is displayed as "joe's devices". Is there anything I=20
> can do here
> short of putting two copies of the name in the document - one=20
> indexed/not
> stored ("joe's devices"), and one stored/not indexed("Joe's=20
> Devices") ? Or
> can I accomplish this case-insensitive "contains" search some=20
> other way -
> would I have to write a custom Analyzer, or something?
>=20
> Thanks in advance!
>=20
> --=20
> Joe Attardi
> jattardi@gmail.com
> http://thinksincode.blogspot.com/
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29475-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 30 14:15:45 2007
Return-Path: <java-user-return-29475-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13200 invoked from network); 30 Jul 2007 14:15:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2007 14:15:44 -0000
Received: (qmail 31313 invoked by uid 500); 30 Jul 2007 14:15:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31281 invoked by uid 500); 30 Jul 2007 14:15:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31270 invoked by uid 99); 30 Jul 2007 14:15:37 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 07:15:37 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of peterlkeegan@gmail.com designates 209.85.146.177 as permitted sender)
Received: from [209.85.146.177] (HELO wa-out-1112.google.com) (209.85.146.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 14:15:30 +0000
Received: by wa-out-1112.google.com with SMTP id j40so1894940wah
        for <java-user@lucene.apache.org>; Mon, 30 Jul 2007 07:15:05 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=JPkx0pRWso3084DMP9Kd4D4nReOJukisxy7M2kpGqCkoW8pa0foIjIHVH8SnC+CsH6zoMt2tXJF8wuZENvqoXSScMPOXsn78dq7wA4NpcrcFYw6Id5WnMNewJmlV26/P3HdjRccPWIg2rHy0sAvPWBwlYbdTrKrF+YIsRlmsDu8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=HFCeXF3AVqa8bxx3txRtF7WMX/1hSKFvryKcD4xdjFNtNZIu029Pm24F0R84WkOiCpxPVhvv6CorNLoIG8QsUJdEXekwQJXo0At8pATmHJQV2SvYZQHzZGqZNHfg62aPf0M24rmtDYOOc2oTrGpEVb+NP+N+C6qqlqa3Vxn2Qxk=
Received: by 10.115.15.1 with SMTP id s1mr5653211wai.1185804905553;
        Mon, 30 Jul 2007 07:15:05 -0700 (PDT)
Received: by 10.114.135.8 with HTTP; Mon, 30 Jul 2007 07:15:05 -0700 (PDT)
Message-ID: <e994873a0707300715i3daf233am999f0f2d4d38eefe@mail.gmail.com>
Date: Mon, 30 Jul 2007 10:15:05 -0400
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: LUCENE-843 Release
In-Reply-To: <11863644.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_26847_27164863.1185804905508"
References: <11863644.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_26847_27164863.1185804905508
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I've built a production index with this patch and done some query stress
testing with no problems.
I'd give it a thumbs up.

Peter

On 7/30/07, testn <test1@doramail.com> wrote:
>
>
> Hi guys,
>
> Do you think LUCENE-843 is stable enough? If so, do you think it's worth
> to
> release it with probably LUCENE 2.2.1? It would be nice so that people can
> take the advantage of it right away without risking other breaking changes
> in the HEAD branch or waiting until 2.3 release.
>
> Thanks,
> --
> View this message in context:
> http://www.nabble.com/LUCENE-843-Release-tf4170191.html#a11863644
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_26847_27164863.1185804905508--

From java-user-return-29476-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 30 14:22:09 2007
Return-Path: <java-user-return-29476-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16373 invoked from network); 30 Jul 2007 14:22:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2007 14:22:08 -0000
Received: (qmail 51133 invoked by uid 500); 30 Jul 2007 14:22:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51103 invoked by uid 500); 30 Jul 2007 14:22:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51092 invoked by uid 99); 30 Jul 2007 14:22:01 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 07:22:01 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.187 as permitted sender)
Received: from [209.85.128.187] (HELO fk-out-0910.google.com) (209.85.128.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 14:21:57 +0000
Received: by fk-out-0910.google.com with SMTP id z23so147955fkz
        for <java-user@lucene.apache.org>; Mon, 30 Jul 2007 07:21:35 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=I5TGNaxavhZoTbk7imHA+tPb0YV6Ujf8hUqUwVIqjovo/mF249C4IJQbTNWELQiALb3bFNQ2fQ6gRViFPTNDz3O9ApHnGi7k8PKHvv56WEGTSn2Y+p/tRpV7s4vh0+3hEMB8eIUxSymyNV3Le3RdS86rjq9zqMD5pOeYI14c3dg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=DpupJ2BOJayBHFlifjRMr06Rr2jwwW3bJipG4Hd4Vn3lIPWVyyRPf9HPGJcNb/rdPQd6wtOCfDpOMdAmRrKb+d+HJrwFOaNW0f+GqFjh2LnLbwG7RV52t5S4aXXlj1WdO65mFJd+3PkQkVHblftrxnoby4c4CHRMwnPQBS7kcYA=
Received: by 10.82.112.3 with SMTP id k3mr4303426buc.1185805295749;
        Mon, 30 Jul 2007 07:21:35 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Mon, 30 Jul 2007 07:21:35 -0700 (PDT)
Message-ID: <359a92830707300721r49811895g2091804847c66847@mail.gmail.com>
Date: Mon, 30 Jul 2007 10:21:35 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to show category count with results?
In-Reply-To: <200707261528.l6QFSSXx031875@pigeon.ciao.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_18868_28216150.1185805295622"
References: <00b401c7cf98$73167a20$150410ac@bhavin>
	 <200707261528.l6QFSSXx031875@pigeon.ciao.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_18868_28216150.1185805295622
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You might want to search the mail archive for "facets" or "faceted search"
(no quotes), as I *think* this might be relevant.

Best
Erick

On 7/26/07, Ramana Jelda <ramana.jelda@ciao-group.com> wrote:
>
> Hi ,
> Of course this statement is very expensive.
> -->document.get("CAMPCATID")==null?"":document.get("CAMPCATID");
>
> Use StringIndex/FieldCache/something similar to implement category
> counting.
> :)
>
> Jelda
>
> > -----Original Message-----
> > From: Bhavin Pandya [mailto:bhavinp@rediff.co.in]
> > Sent: Thursday, July 26, 2007 5:20 PM
> > To: java-user@lucene.apache.org
> > Subject: How to show category count with results?
> >
> > Hi,
> >
> > I want to show each category name and its count with results.
> > I achieved this using DocCollector but its very slow when no
> > of results in lacs... As fetching of documents from reader in
> > collect method is expensive...
> >
> > public void collect(int doc, float score) {
> >     Document document = mreader.document(doc);
> >     strcatid =
> > document.get("CAMPCATID")==null?"":document.get("CAMPCATID");
> >
> >     if (catcountmap.containsKey(strcatid))
> >     {
> >         // catid already exists in hashmap... increase count by one
> >
> >         value = ((Integer)catcountmap.get(strcatid)).intValue();
> >         value = value + 1;
> >         catcountmap.put(strcatid,new Integer(value));
> >     }
> >     else
> >         catcountmap.put(strcatid,new Integer(1));
> >
> > }
> >
> >
> > is there any other better way to achieve this ????
> >
> >
> > Thanks.
> > Bhavin pandya
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_18868_28216150.1185805295622--

From java-user-return-29477-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 30 14:27:46 2007
Return-Path: <java-user-return-29477-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18783 invoked from network); 30 Jul 2007 14:27:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2007 14:27:43 -0000
Received: (qmail 67605 invoked by uid 500); 30 Jul 2007 14:27:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67557 invoked by uid 500); 30 Jul 2007 14:27:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67546 invoked by uid 99); 30 Jul 2007 14:27:36 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 07:27:36 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.186 as permitted sender)
Received: from [209.85.128.186] (HELO fk-out-0910.google.com) (209.85.128.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 14:27:32 +0000
Received: by fk-out-0910.google.com with SMTP id z23so149298fkz
        for <java-user@lucene.apache.org>; Mon, 30 Jul 2007 07:27:11 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=CSloVvsjXWLkC/5SRTaCVxf+OI96+1rfIE5WofmR6f17j4KmcuXKZpQjLBpNCcLYeUdsSyFDUzflUsrpwVXvW6FWwT+B4c3uu74hOcSXMWlhYQ7M8x1w1S/auftQEGs8VOSsnt9/eBlaDK89QzmrK+CTCmUXTV/oZFGCP3bT8C0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Z8UBNVbHdnCGGP3Bh5fDjA0vnk+xGAd7BlASoVqkyrxGloqxeSt4DAmG/A1CZ17HE/bm6P7a1GuFXk8nx8yMC2+EGlSOIcG3QX5AnIrQ3eaChw2eY/00fMKV0oJDt64XrVHk33Oz1tKm00bG98D9y0o9LInR3Ek0cfpsZeHF8Q0=
Received: by 10.82.183.19 with SMTP id g19mr4324361buf.1185805630779;
        Mon, 30 Jul 2007 07:27:10 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Mon, 30 Jul 2007 07:27:10 -0700 (PDT)
Message-ID: <359a92830707300727r9e9220euacb499d78038213f@mail.gmail.com>
Date: Mon, 30 Jul 2007 10:27:10 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Size of field?
In-Reply-To: <9708bc630707270822r541ffdd1t9b9e3732f9afaf80@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_18932_7105766.1185805630753"
References: <9708bc630707270822r541ffdd1t9b9e3732f9afaf80@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_18932_7105766.1185805630753
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

See IndexWriter.setMaxFieldLength(). 87,300 is odd, since the default
max field length, last I knew, was 10,000. But this sounds like
it might relate to your issue.

Best
Erick

On 7/27/07, Eduardo Botelho <eduardobb@gmail.com> wrote:
>
> Hi guys,
>
> I would like to know if exist some limit of size for the fields of a
> document.
>
> I'm with the following problem:
> When a term is after a certain amount of characters (approximately 87300)
> in
> a field, the search does not find de occurrency.
> If I divide my field in pages, the terms are found normally.
> This problem occours when I make an exact query (query between quotes)
>
> What can be happening?
>
> I'm using BrazilianAnalyzer and StandardAnalyzer(for tests only) for both,
> search and indexation.
>
> thanks...
>
> Sorry for my poor english...
>

------=_Part_18932_7105766.1185805630753--

From java-user-return-29478-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 30 14:32:20 2007
Return-Path: <java-user-return-29478-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20862 invoked from network); 30 Jul 2007 14:32:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2007 14:32:19 -0000
Received: (qmail 73149 invoked by uid 500); 30 Jul 2007 14:32:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72560 invoked by uid 500); 30 Jul 2007 14:32:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72549 invoked by uid 99); 30 Jul 2007 14:32:13 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 07:32:13 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,NORMAL_HTTP_TO_IP,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jattardi@gmail.com designates 209.85.146.181 as permitted sender)
Received: from [209.85.146.181] (HELO wa-out-1112.google.com) (209.85.146.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 14:32:08 +0000
Received: by wa-out-1112.google.com with SMTP id j40so1899686wah
        for <java-user@lucene.apache.org>; Mon, 30 Jul 2007 07:31:48 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=LUjPyqyWbHb6y3hWVqL7Uh8GleIe9aD8I5TCvdrgJQmD4MwoDS+OFwPrXNK1GG9Xun+0ijbNC4vScymsd99Nuta831A988tZFDvOaF6cXoBwVigX1lGDaHHLuhk/f1QHkywqUzt7kDD9uLz+m36z4MKY2B1aRQ5+XlqtjPP8hK4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=GI3D3sj9ZZLMd6CMRdqtW8jIxs+38ca9qVWLE+lcOt1XTiyDIffHCwJ9/rNNkWsPOmX3/F8BfFZTN/iEE2VFXKJWTb7vbVxsrBzlqxisMh+i0ntrao/R9Z32LtkjfkUs2k88oWL563RImDfm9AX6ZgkA0z3gkQyZ/LuHHb1FxAs=
Received: by 10.115.93.16 with SMTP id v16mr5625929wal.1185805908053;
        Mon, 30 Jul 2007 07:31:48 -0700 (PDT)
Received: by 10.114.121.8 with HTTP; Mon, 30 Jul 2007 07:31:48 -0700 (PDT)
Message-ID: <7a14509e0707300731jd5d5065jdb59ec0791c8818e@mail.gmail.com>
Date: Mon, 30 Jul 2007 10:31:48 -0400
From: "Joe Attardi" <jattardi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing/Analyzer question - case-insensitive "contains" search
In-Reply-To: <A955EA1F8FE31749AEC8C998082F6C7C01AC1259@hai01.hippo.local>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_22241_15434619.1185805908021"
References: <A955EA1F8FE31749AEC8C998082F6C7C01AC1259@hai01.hippo.local>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_22241_15434619.1185805908021
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

>
> It does sound very strange to me, to default to a WildCardQuery! Suppose I
> am looking for "bold", I am getting hits for "old".

I know - but that's what the requirements dictate. A better example might be
a MAC or IP address, where someone might be searching for a string in the
middle - like, I might search for "102" to get "192.168.102.151" and "
192.168.102.200" as results.

------=_Part_22241_15434619.1185805908021--

From java-user-return-29479-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 30 14:40:07 2007
Return-Path: <java-user-return-29479-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24941 invoked from network); 30 Jul 2007 14:40:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2007 14:40:06 -0000
Received: (qmail 739 invoked by uid 500); 30 Jul 2007 14:40:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 679 invoked by uid 500); 30 Jul 2007 14:40:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 668 invoked by uid 99); 30 Jul 2007 14:40:00 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 07:40:00 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rafael.rossini@gmail.com designates 209.85.128.186 as permitted sender)
Received: from [209.85.128.186] (HELO fk-out-0910.google.com) (209.85.128.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 14:39:53 +0000
Received: by fk-out-0910.google.com with SMTP id z23so152081fkz
        for <java-user@lucene.apache.org>; Mon, 30 Jul 2007 07:39:32 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ZO7mmXzSO4FreguK63Y0UQcoDVMxvij4NK+Zz4WauScWhrXm1xifH5kAlOyjdZn+T89jernacaODMcOkm0EICScwFJLrOLvCUMiZPiDfRW+x4jT7vhRNbtI5aEShMqC5rshlf2pT444N5qRCtA1SPgfjmUsO1m2ccCsAG6y5t0k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=MQyBXXc8mWU+rcxMozxpIbbzxIDkA8X8Fq0UxQOD6NsEKUwNRqNM6HjxWu3iVNTfJP+Y4BKgaEOknodsi/ggvXY86Pasr1H84/M6DQQqn8WEKnpCcQcXWyGz5pE22vwKLEteo0e3v3yOhxDTSc/incHXkCVv+FVqRxUcsZozAqU=
Received: by 10.82.190.2 with SMTP id n2mr4330108buf.1185806371942;
        Mon, 30 Jul 2007 07:39:31 -0700 (PDT)
Received: by 10.82.113.12 with HTTP; Mon, 30 Jul 2007 07:39:31 -0700 (PDT)
Message-ID: <a8d89b3b0707300739h28cbce54g844125014010a38c@mail.gmail.com>
Date: Mon, 30 Jul 2007 11:39:31 -0300
From: "Rafael Rossini" <rafael.rossini@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Search terms on a single "instance" of field
In-Reply-To: <11855658.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_28207_8650766.1185806371911"
References: <a8d89b3b0707261232i6541bbcfy1e12440b9b78ad7c@mail.gmail.com>
	 <A955EA1F8FE31749AEC8C998082F6C7C01ECDB3A@hai01.hippo.local>
	 <a8d89b3b0707270733r11ac01f4o77307033d97360d3@mail.gmail.com>
	 <11855658.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_28207_8650766.1185806371911
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hey Jeff, I didn=B4t had any luck, I don=B4t think you=B4re approach is goi=
ng to
help me, thanks for the reply. I=B4ll try a solution that does not require
this kind of problem.

[]s
   Rossini


On 7/29/07, Jeff French <jeff@mdbconsulting.com> wrote:
>
>
> Rossini, have you had any luck with this?  I don't know if this solves
> your
> exact problem, but could you do something like this:
>
> 1. Use Analyzer.getPositionIncrementGap to create a gap (let's say 100)
> between your fieldA's.
> 2. Then query like this:
>
>       fieldA:("termA termB"~99)
>
> I did this playing around with table cells, and it seems to work so far.
>
>    Jeff
>
>
> rossini wrote:
> >
> > Actually no,
> >
> >    Because I'd like to retrieve terms that were computed on the same
> > instance of Field. Taking your example to ilustrate better, I have 2
> > documents, on documentA I structured one field, Field("fieldA", "termA
> > termB", customAnalyzer). On documentB I structured 2 fields,
> > Field("fieldA",
> > "termA termC", customAnalyzer) and Field("fieldA", "termB termC",
> > customAnalyzer).
> >
> >    The problem is, if I search like you suggested, fieldA:termA +
> > fieldA:termB, I will get both documents, but I want only documentA. For
> > that
> > to happen, somehow, somewhere should be an information that tells that
> on
> > documentA, termA and termB where indexed on the same instance of fieldA=
.
> > I=B4m
> > guessing this is not possible, but it would be great if someone has an
> > ideia
> > to solve this.
> >
> --
> View this message in context:
> http://www.nabble.com/Search-terms-on-a-single-%22instance%22-of-field-tf=
4153674.html#a11855658
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_28207_8650766.1185806371911--

From java-user-return-29480-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 30 14:53:16 2007
Return-Path: <java-user-return-29480-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31797 invoked from network); 30 Jul 2007 14:53:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2007 14:53:15 -0000
Received: (qmail 23441 invoked by uid 500); 30 Jul 2007 14:53:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23409 invoked by uid 500); 30 Jul 2007 14:53:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23398 invoked by uid 99); 30 Jul 2007 14:53:07 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 07:53:07 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jattardi@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 14:53:03 +0000
Received: by py-out-1112.google.com with SMTP id f31so4954122pyh
        for <java-user@lucene.apache.org>; Mon, 30 Jul 2007 07:52:42 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=fpcNhLx35LPgXC52kWrhjLMZcED9P9JPM5GRXfCVa8jo8r1tdh/Oe0nIm23RPdEAlGufLjWETzWSdurO0IbLSiM/kugX2wU6gF6dKVu2imkIco10Mk0xQA4h33AtIXqZ4cUaWSf9uPf69JE5DoQ9vSwLrUY1MXu9kGgPite+r5U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=qGjtVBz3sOSKCMIr+urywsy1u/2iw9n4RhXWchIyGtbZ6qax6ujHeicVYYY3qUN1Fk5s02pIcsHcQazVSBy/AiDY/M3yzKF/NQxLNBqUWWuZbHzZCmhuLnpes3KEyLuGGzFMEu5R36WI+oUCn+KdGllJTZqGi2keBAhNNVwCOoo=
Received: by 10.115.88.1 with SMTP id q1mr5664844wal.1185807161689;
        Mon, 30 Jul 2007 07:52:41 -0700 (PDT)
Received: by 10.114.121.8 with HTTP; Mon, 30 Jul 2007 07:52:41 -0700 (PDT)
Message-ID: <7a14509e0707300752r442111d3x9366441d6c40e12@mail.gmail.com>
Date: Mon, 30 Jul 2007 10:52:41 -0400
From: "Joe Attardi" <jattardi@gmail.com>
To: "Lucene Mailing List" <java-user@lucene.apache.org>
Subject: Running query text through an Analyzer without QueryParser?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_22601_1125568.1185807161670"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_22601_1125568.1185807161670
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Following up on my recent question. It has been suggested to me that I can
run the query text through an Analyzer without using the QueryParser. For
example, if I know what field to be searched I can create a PrefixQuery or
WildcardQuery, but still want to process the search text with the same
Analyzer that did the indexing. How do I run a query through an Analyzer
without using the QueryParser... is this possible?

------=_Part_22601_1125568.1185807161670--

From java-user-return-29481-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 30 15:01:12 2007
Return-Path: <java-user-return-29481-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35754 invoked from network); 30 Jul 2007 15:01:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2007 15:01:09 -0000
Received: (qmail 40210 invoked by uid 500); 30 Jul 2007 15:00:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39016 invoked by uid 500); 30 Jul 2007 15:00:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37299 invoked by uid 99); 30 Jul 2007 14:59:42 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [213.133.33.40] (HELO smtp.is.nl) (213.133.33.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 07:59:27 -0700
Received: from [213.133.51.241] (HELO hai01.hippo.local)
  by smtp.is.nl (CommuniGate Pro SMTP 5.0.10)
  with ESMTP id 20441447 for java-user@lucene.apache.org; Mon, 30 Jul 2007 16:58:14 +0200
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.0.6619.12
Subject: RE: How to show category count with results?
Date: Mon, 30 Jul 2007 16:58:14 +0200
Message-ID: <A955EA1F8FE31749AEC8C998082F6C7C01AC125B@hai01.hippo.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: How to show category count with results?
Thread-Index: AcfStQLUb3pE1f9dQLyOufrZYiDlDwABPW2A
From: "Ard Schrijvers" <a.schrijvers@hippo.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Or check out Solr and see if you can use that, or see how they do it,

Regards Ard

>=20
> You might want to search the mail archive for "facets" or=20
> "faceted search"
> (no quotes), as I *think* this might be relevant.
>=20
> Best
> Erick
>=20
> On 7/26/07, Ramana Jelda <ramana.jelda@ciao-group.com> wrote:
> >
> > Hi ,
> > Of course this statement is very expensive.
> > -->document.get("CAMPCATID")=3D=3Dnull?"":document.get("CAMPCATID");
> >
> > Use StringIndex/FieldCache/something similar to implement category
> > counting.
> > :)
> >
> > Jelda
> >
> > > -----Original Message-----
> > > From: Bhavin Pandya [mailto:bhavinp@rediff.co.in]
> > > Sent: Thursday, July 26, 2007 5:20 PM
> > > To: java-user@lucene.apache.org
> > > Subject: How to show category count with results?
> > >
> > > Hi,
> > >
> > > I want to show each category name and its count with results.
> > > I achieved this using DocCollector but its very slow when no
> > > of results in lacs... As fetching of documents from reader in
> > > collect method is expensive...
> > >
> > > public void collect(int doc, float score) {
> > >     Document document =3D mreader.document(doc);
> > >     strcatid =3D
> > > document.get("CAMPCATID")=3D=3Dnull?"":document.get("CAMPCATID");
> > >
> > >     if (catcountmap.containsKey(strcatid))
> > >     {
> > >         // catid already exists in hashmap... increase=20
> count by one
> > >
> > >         value =3D ((Integer)catcountmap.get(strcatid)).intValue();
> > >         value =3D value + 1;
> > >         catcountmap.put(strcatid,new Integer(value));
> > >     }
> > >     else
> > >         catcountmap.put(strcatid,new Integer(1));
> > >
> > > }
> > >
> > >
> > > is there any other better way to achieve this ????
> > >
> > >
> > > Thanks.
> > > Bhavin pandya
> >
> >
> >=20
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29482-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 30 15:04:43 2007
Return-Path: <java-user-return-29482-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44637 invoked from network); 30 Jul 2007 15:04:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2007 15:04:33 -0000
Received: (qmail 59359 invoked by uid 500); 30 Jul 2007 15:04:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59318 invoked by uid 500); 30 Jul 2007 15:04:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59307 invoked by uid 99); 30 Jul 2007 15:04:26 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 08:04:26 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [213.133.33.40] (HELO smtp.is.nl) (213.133.33.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 15:04:20 +0000
Received: from [213.133.51.241] (HELO hai01.hippo.local)
  by smtp.is.nl (CommuniGate Pro SMTP 5.0.10)
  with ESMTP id 20441816 for java-user@lucene.apache.org; Mon, 30 Jul 2007 17:03:58 +0200
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.0.6619.12
Subject: RE: Indexing/Analyzer question - case-insensitive "contains" search
Date: Mon, 30 Jul 2007 17:03:58 +0200
Message-ID: <A955EA1F8FE31749AEC8C998082F6C7C01AC125C@hai01.hippo.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Indexing/Analyzer question - case-insensitive "contains" search
Thread-Index: AcfStm69ceX1xDBIT7yed6MCT4KVkgAA73pw
From: "Ard Schrijvers" <a.schrijvers@hippo.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org


> > It does sound very strange to me, to default to a=20
> WildCardQuery! Suppose I
> > am looking for "bold", I am getting hits for "old".
>=20
> I know - but that's what the requirements dictate. A better=20
> example might be
> a MAC or IP address, where someone might be searching for a=20
> string in the
> middle - like, I might search for "102" to get "192.168.102.151" and "
> 192.168.102.200" as results.

Yes....so you think that if you use StandardAnalyzer(), and you index a =
field with 192.168.102.151, and then you use the queryparser [1] to =
search for "102", you do not get a hit? Lucene would not have the status =
it has if it could not do this. Obviously, it depends on your analyzer =
how the indexing is done exactly.=20

I disencourage you to use the WildCardQuery when it is not needed.

[1] http://lucene.apache.org/java/docs/queryparsersyntax.html

Regards Ard

>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29483-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 30 15:50:34 2007
Return-Path: <java-user-return-29483-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35014 invoked from network); 30 Jul 2007 15:50:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2007 15:50:28 -0000
Received: (qmail 56138 invoked by uid 500); 30 Jul 2007 15:48:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54754 invoked by uid 500); 30 Jul 2007 15:48:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53553 invoked by uid 99); 30 Jul 2007 15:48:24 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 08:48:24 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [63.133.162.107] (HELO mp-s01.dragonflymc.com) (63.133.162.107)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 15:19:21 +0000
Received: from [192.168.1.249] (bigfoo.visvo.com [192.168.1.249])
	by mp-s01.dragonflymc.com (Postfix) with ESMTP id 0473CF8071
	for <java-user@lucene.apache.org>; Mon, 30 Jul 2007 09:54:16 -0500 (CDT)
Message-ID: <46AE0162.8070900@apache.org>
Date: Mon, 30 Jul 2007 10:18:58 -0500
From: Dennis Kubes <kubes@apache.org>
User-Agent: Thunderbird 2.0.0.5 (Windows/20070716)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: How to show category count with results?
References: <00b401c7cf98$73167a20$150410ac@bhavin>	 <200707261528.l6QFSSXx031875@pigeon.ciao.com> <359a92830707300721r49811895g2091804847c66847@mail.gmail.com>
In-Reply-To: <359a92830707300721r49811895g2091804847c66847@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

We found that a fast way to do this simply by running a query for each 
category and getting the maxDocs.  There would be one query for category
getting a single hit.

Dennis Kubes

Erick Erickson wrote:
> You might want to search the mail archive for "facets" or "faceted search"
> (no quotes), as I *think* this might be relevant.
> 
> Best
> Erick
> 
> On 7/26/07, Ramana Jelda <ramana.jelda@ciao-group.com> wrote:
>> Hi ,
>> Of course this statement is very expensive.
>> -->document.get("CAMPCATID")==null?"":document.get("CAMPCATID");
>>
>> Use StringIndex/FieldCache/something similar to implement category
>> counting.
>> :)
>>
>> Jelda
>>
>>> -----Original Message-----
>>> From: Bhavin Pandya [mailto:bhavinp@rediff.co.in]
>>> Sent: Thursday, July 26, 2007 5:20 PM
>>> To: java-user@lucene.apache.org
>>> Subject: How to show category count with results?
>>>
>>> Hi,
>>>
>>> I want to show each category name and its count with results.
>>> I achieved this using DocCollector but its very slow when no
>>> of results in lacs... As fetching of documents from reader in
>>> collect method is expensive...
>>>
>>> public void collect(int doc, float score) {
>>>     Document document = mreader.document(doc);
>>>     strcatid =
>>> document.get("CAMPCATID")==null?"":document.get("CAMPCATID");
>>>
>>>     if (catcountmap.containsKey(strcatid))
>>>     {
>>>         // catid already exists in hashmap... increase count by one
>>>
>>>         value = ((Integer)catcountmap.get(strcatid)).intValue();
>>>         value = value + 1;
>>>         catcountmap.put(strcatid,new Integer(value));
>>>     }
>>>     else
>>>         catcountmap.put(strcatid,new Integer(1));
>>>
>>> }
>>>
>>>
>>> is there any other better way to achieve this ????
>>>
>>>
>>> Thanks.
>>> Bhavin pandya
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29484-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 30 15:52:36 2007
Return-Path: <java-user-return-29484-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41503 invoked from network); 30 Jul 2007 15:52:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2007 15:52:11 -0000
Received: (qmail 75637 invoked by uid 500); 30 Jul 2007 15:50:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75352 invoked by uid 500); 30 Jul 2007 15:50:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75029 invoked by uid 99); 30 Jul 2007 15:50:39 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 08:50:39 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sonusr@gmail.com designates 64.233.184.237 as permitted sender)
Received: from [64.233.184.237] (HELO wr-out-0506.google.com) (64.233.184.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 15:49:49 +0000
Received: by wr-out-0506.google.com with SMTP id 57so743196wri
        for <java-user@lucene.apache.org>; Mon, 30 Jul 2007 08:49:28 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=ZKpG5/mq01fIBKxqARaeat2QT0/g+4MyVOC0ZTgzUvXnJ3SBNGxnuoduQEqwRpphygWnaqSdIgROHgEnoIHCweE1syEcrDVFGM93fWhAt/M3DiJmBHfa341+OiCxoPD4cU+yjarsya5gaAhkawajMDWbCLoabpmeGCW+mxinFlk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=DB8QAkNp1g4g0MZ8cXDh0MZ0kM0rmL2JtqsjIrMFlgKnBrc1O33IwgbMhrJA0mAx9LOGj9AXDRZyWB7SdSd3lVdZFXdfa12Re9YKW+eidSQ7EmmbrHF7+sqqkHWKKqS11g0eylHFnIko5ysTin8g7JSPqxKmnCVSSc5evQy1uDU=
Received: by 10.78.131.8 with SMTP id e8mr1541844hud.1185810567437;
        Mon, 30 Jul 2007 08:49:27 -0700 (PDT)
Received: by 10.78.186.11 with HTTP; Mon, 30 Jul 2007 08:49:27 -0700 (PDT)
Message-ID: <d5b3ea330707300849x2bab9aa8vbaec0a4f40a1511f@mail.gmail.com>
Date: Mon, 30 Jul 2007 21:19:27 +0530
From: "Sonu SR" <sonusr@gmail.com>
To: java-user@lucene.apache.org
Subject: Question regarding boolean query
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_45249_22286809.1185810567419"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_45249_22286809.1185810567419
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

    I am getting different results for the following queries.

   1. ABST:"spring-elastic"^3 AND SPEC:"internal combustion"^2 OR
ABST:"cylinder"^3
   2. SPEC:"internal combustion"^2 AND ABST:"spring-elastic"^3 OR
ABST:"cylinder"^3

I think the above two queries are similar and will give the same results.
I want to know the order of boolean operators. Is there any grouping is
applied when fields repeats in the query?

By applying the queries to lucene QueryParser, I got the results as

   1. +ABST:"spring elastic"^3.0 SPEC:"internal combustion"^2.0ABST:cylinder^
3.0
   2. +SPEC:"internal combustion"^2.0 ABST:"spring elastic"^3.0ABST:cylinder^
3.0

I have set the QueryParser operator as 'AND'.  I was confused by looking on
the QueryParser output.
Please give me a good explanation, how lucene handling the boolean queries.

Thanks,
Sonu

------=_Part_45249_22286809.1185810567419--

From java-user-return-29485-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 30 16:05:52 2007
Return-Path: <java-user-return-29485-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58592 invoked from network); 30 Jul 2007 16:05:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2007 16:05:51 -0000
Received: (qmail 56922 invoked by uid 500); 30 Jul 2007 16:05:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56875 invoked by uid 500); 30 Jul 2007 16:05:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56864 invoked by uid 99); 30 Jul 2007 16:05:43 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 09:05:43 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jpsondag@gmail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO py-out-1112.google.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 16:05:37 +0000
Received: by py-out-1112.google.com with SMTP id f31so5023790pyh
        for <java-user@lucene.apache.org>; Mon, 30 Jul 2007 09:05:16 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:mime-version:content-type:x-google-sender-auth;
        b=DzxgVO9cu1FnuYG/M2mApvsAtYyUd627t9fOXP3WpQFN5gulU3GTyF1/0QVpeR9o88FHPIN0GMRKm6JPbCekpMAEGYlCUHCcbpiOpSPFOM3IGnzy7yz7vuOI4BBv+r59D7xL+t2/QoTB+r1pptGLdTQj8JmJKHISkQNAgOIsRLc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:mime-version:content-type:x-google-sender-auth;
        b=SgYyOv7yDCsOEPVsygEiVwmUtCeQTUzUvGd7r6IbDVDYbznIOxNArg0Qw9pAzECRCuDaaGx5sUeXDoA9wzUSPRPNEQkXyYcQywg40PDxnke+0uJRpyvPqB0E1+mtDCHUB/6Y5gDped6nHWQlqtg8mHsjva5lK7FA862JQR89UAg=
Received: by 10.65.150.18 with SMTP id c18mr8941911qbo.1185811516061;
        Mon, 30 Jul 2007 09:05:16 -0700 (PDT)
Received: by 10.65.177.7 with HTTP; Mon, 30 Jul 2007 09:05:15 -0700 (PDT)
Message-ID: <bd67edef0707300905h49164259p7dcfe11ee2c77630@mail.gmail.com>
Date: Mon, 30 Jul 2007 11:05:15 -0500
From: "John Paul Sondag" <jsondag2@uiuc.edu>
Sender: jpsondag@gmail.com
To: java-user@lucene.apache.org
Subject: Tokenizer
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_29937_22223012.1185811515922"
X-Google-Sender-Auth: 78ac0c1fecbc9221
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_29937_22223012.1185811515922
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I have two questions.

First, Is there a tokenizer that takes every word and simply makes a token
out of it?  So it looks for two white spaces and takes the characters
between them and makes a token out of them?

If this tokenizer exists, is there a difference between doing that and
simply storing the field in the document with Field.Index = UN_TOKENIZED?

--JP

------=_Part_29937_22223012.1185811515922--

From java-user-return-29486-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 30 16:15:40 2007
Return-Path: <java-user-return-29486-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63822 invoked from network); 30 Jul 2007 16:15:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2007 16:15:39 -0000
Received: (qmail 83472 invoked by uid 500); 30 Jul 2007 16:15:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83430 invoked by uid 500); 30 Jul 2007 16:15:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83419 invoked by uid 99); 30 Jul 2007 16:15:31 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 09:15:31 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [213.133.33.40] (HELO smtp.is.nl) (213.133.33.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 16:15:23 +0000
Received: from [213.133.51.241] (HELO hai01.hippo.local)
  by smtp.is.nl (CommuniGate Pro SMTP 5.0.10)
  with ESMTP id 20445782 for java-user@lucene.apache.org; Mon, 30 Jul 2007 18:15:01 +0200
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.0.6619.12
Subject: RE: Tokenizer
Date: Mon, 30 Jul 2007 18:15:01 +0200
Message-ID: <A955EA1F8FE31749AEC8C998082F6C7C01AC1264@hai01.hippo.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Tokenizer
Thread-Index: AcfSw3+bcVITRhZfRH643y8BuylqzQAAORsQ
From: "Ard Schrijvers" <a.schrijvers@hippo.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

> I have two questions.
>=20
> First, Is there a tokenizer that takes every word and simply=20
> makes a token
> out of it?=20

org.apache.lucene.analysis.WhitespaceTokenizer

> So it looks for two white spaces and takes the characters
> between them and makes a token out of them?
>=20
> If this tokenizer exists, is there a difference between doing that and
> simply storing the field in the document with Field.Index =3D=20
> UN_TOKENIZED?

Yes certainly it is different. UN_TOKENIZED is as it says, taking a =
String for example and put it "AS IS", as one single TERM in your index. =
For example you might want to do this when you want to sort on caption =
of a document, or title. TOKENIZED in combination with the =
org.apache.lucene.analysis.WhitespaceTokenizer tokenizes your string and =
indexes.

Regards Ard

>=20
> --JP
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29487-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 30 16:18:48 2007
Return-Path: <java-user-return-29487-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64871 invoked from network); 30 Jul 2007 16:18:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2007 16:18:46 -0000
Received: (qmail 91576 invoked by uid 500); 30 Jul 2007 16:18:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91543 invoked by uid 500); 30 Jul 2007 16:18:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91529 invoked by uid 99); 30 Jul 2007 16:18:39 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 09:18:39 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dimamay@gmail.com designates 66.249.82.232 as permitted sender)
Received: from [66.249.82.232] (HELO wx-out-0506.google.com) (66.249.82.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 16:18:30 +0000
Received: by wx-out-0506.google.com with SMTP id i28so1184576wxd
        for <java-user@lucene.apache.org>; Mon, 30 Jul 2007 09:18:09 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=iFErgwPTca774zXFa6IlJJBNBtK2jwqHyqJAo+K8bLnL8ZijnAaomll4C8VYoBHWNsuf+ghCxU4Q5FgUg1VMTNcncaOag9aZ5ZxmsfUByE5yByHgXrnc57kH8uavww/Rbvvc0JyE7Ue3z8t1HKEj1mKAF/OpePIDkukZtC37jFg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=tyc1ii8FUbfaxg3fBrdStFkq4DExKJmzevtpZkCePp4zFwraBkvbehDFnXD3MP04u0Qn/M0jZTQTENK4J4aNMqWe2Oi/AT0RCT/Tm0tb1xa4/5gNzziABT8dTishXZ3iGcGKJnFtRhVYrBWwOFLKtgp0tgiiktRHfS+R59Bk/CQ=
Received: by 10.70.113.5 with SMTP id l5mr10237103wxc.1185812289487;
        Mon, 30 Jul 2007 09:18:09 -0700 (PDT)
Received: by 10.70.115.9 with HTTP; Mon, 30 Jul 2007 09:18:09 -0700 (PDT)
Message-ID: <700cf4dd0707300918oc7eaef0u4b495e15e3b9e682@mail.gmail.com>
Date: Mon, 30 Jul 2007 12:18:09 -0400
From: "Dima May" <dimamay@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to show category count with results?
In-Reply-To: <46AE0162.8070900@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_29955_27674109.1185812289445"
References: <00b401c7cf98$73167a20$150410ac@bhavin>
	 <200707261528.l6QFSSXx031875@pigeon.ciao.com>
	 <359a92830707300721r49811895g2091804847c66847@mail.gmail.com>
	 <46AE0162.8070900@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_29955_27674109.1185812289445
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Check this out:

http://www.gossamer-threads.com/lists/lucene/java-user/35433?search_string=category;#35433


On 7/30/07, Dennis Kubes <kubes@apache.org> wrote:
>
> We found that a fast way to do this simply by running a query for each
> category and getting the maxDocs.  There would be one query for category
> getting a single hit.
>
> Dennis Kubes
>
> Erick Erickson wrote:
> > You might want to search the mail archive for "facets" or "faceted
> search"
> > (no quotes), as I *think* this might be relevant.
> >
> > Best
> > Erick
> >
> > On 7/26/07, Ramana Jelda <ramana.jelda@ciao-group.com> wrote:
> >> Hi ,
> >> Of course this statement is very expensive.
> >> -->document.get("CAMPCATID")==null?"":document.get("CAMPCATID");
> >>
> >> Use StringIndex/FieldCache/something similar to implement category
> >> counting.
> >> :)
> >>
> >> Jelda
> >>
> >>> -----Original Message-----
> >>> From: Bhavin Pandya [mailto:bhavinp@rediff.co.in]
> >>> Sent: Thursday, July 26, 2007 5:20 PM
> >>> To: java-user@lucene.apache.org
> >>> Subject: How to show category count with results?
> >>>
> >>> Hi,
> >>>
> >>> I want to show each category name and its count with results.
> >>> I achieved this using DocCollector but its very slow when no
> >>> of results in lacs... As fetching of documents from reader in
> >>> collect method is expensive...
> >>>
> >>> public void collect(int doc, float score) {
> >>>     Document document = mreader.document(doc);
> >>>     strcatid =
> >>> document.get("CAMPCATID")==null?"":document.get("CAMPCATID");
> >>>
> >>>     if (catcountmap.containsKey(strcatid))
> >>>     {
> >>>         // catid already exists in hashmap... increase count by one
> >>>
> >>>         value = ((Integer)catcountmap.get(strcatid)).intValue();
> >>>         value = value + 1;
> >>>         catcountmap.put(strcatid,new Integer(value));
> >>>     }
> >>>     else
> >>>         catcountmap.put(strcatid,new Integer(1));
> >>>
> >>> }
> >>>
> >>>
> >>> is there any other better way to achieve this ????
> >>>
> >>>
> >>> Thanks.
> >>> Bhavin pandya
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_29955_27674109.1185812289445--

From java-user-return-29488-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 30 17:39:43 2007
Return-Path: <java-user-return-29488-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12157 invoked from network); 30 Jul 2007 17:39:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2007 17:39:40 -0000
Received: (qmail 79755 invoked by uid 500); 30 Jul 2007 17:39:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79720 invoked by uid 500); 30 Jul 2007 17:39:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79697 invoked by uid 99); 30 Jul 2007 17:39:31 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 10:39:31 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [128.218.33.11] (HELO gossamer.ckm.ucsf.edu) (128.218.33.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 17:39:22 +0000
Received: from CKMPC08 (tikal.library.ucsf.edu [128.218.15.151])
	by gossamer.ckm.ucsf.edu (8.13.8/8.13.8) with ESMTP id l6UHcw4S028746
	for <java-user@lucene.apache.org>; Mon, 30 Jul 2007 10:39:00 -0700 (PDT)
From: "Renaud Waldura" <renaud.waldura@library.ucsf.edu>
To: <java-user@lucene.apache.org>
Subject: RE: Question regarding boolean query
Date: Mon, 30 Jul 2007 10:38:53 -0700
Message-ID: <007601c7d2d0$8238f5b0$970fda80@libraria.ucsf.edu>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <d5b3ea330707300849x2bab9aa8vbaec0a4f40a1511f@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
thread-index: AcfSwZcqSMuijJVtTKmkomGS1iSOXgADojVw
X-Filter-Version: 1.15 (gossamer)
X-Virus-Checked: Checked by ClamAV on apache.org

Yeah, it's a surprise, isn't it? I'm afraid there isn't a good answer.

http://wiki.apache.org/lucene-java/BooleanQuerySyntax

The "best practice" appears to be to require parens everywhere to force the
evaluation order. Not very satisfying, but it does work 100%.



-----Original Message-----
From: Sonu SR [mailto:sonusr@gmail.com] 
Sent: Monday, July 30, 2007 8:49 AM
To: java-user@lucene.apache.org
Subject: Question regarding boolean query

Hi,

    I am getting different results for the following queries.

   1. ABST:"spring-elastic"^3 AND SPEC:"internal combustion"^2 OR
ABST:"cylinder"^3
   2. SPEC:"internal combustion"^2 AND ABST:"spring-elastic"^3 OR
ABST:"cylinder"^3

I think the above two queries are similar and will give the same results.
I want to know the order of boolean operators. Is there any grouping is
applied when fields repeats in the query?

By applying the queries to lucene QueryParser, I got the results as

   1. +ABST:"spring elastic"^3.0 SPEC:"internal
combustion"^2.0ABST:cylinder^ 3.0
   2. +SPEC:"internal combustion"^2.0 ABST:"spring
elastic"^3.0ABST:cylinder^ 3.0

I have set the QueryParser operator as 'AND'.  I was confused by looking on
the QueryParser output.
Please give me a good explanation, how lucene handling the boolean queries.

Thanks,
Sonu



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29489-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 30 17:50:06 2007
Return-Path: <java-user-return-29489-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19318 invoked from network); 30 Jul 2007 17:50:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2007 17:50:04 -0000
Received: (qmail 7924 invoked by uid 500); 30 Jul 2007 17:49:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7897 invoked by uid 500); 30 Jul 2007 17:49:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7886 invoked by uid 99); 30 Jul 2007 17:49:55 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 10:49:55 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.134.190 as permitted sender)
Received: from [209.85.134.190] (HELO mu-out-0910.google.com) (209.85.134.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 17:49:49 +0000
Received: by mu-out-0910.google.com with SMTP id g7so1754342muf
        for <java-user@lucene.apache.org>; Mon, 30 Jul 2007 10:49:26 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=OzQ1xOQBQ6fqgB4AGmS0FC0pODPVxQ/w/MQaNqxVnWIsFGt34B19R7lWdTYwn1urTDJ587GriwG3B3qv0IiA/j01/hy7nK24NQiv0ElgbnuJIvNtI+XEMfjnKZ2S2ms5c6imaEuQ45E/RSsd9hf+v+ySEs3esQ2oLFsVFbeHWlk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=lw0NEGqw5hb+Q+0x3a6ITjANViLXnpiDXAXzDAtzTX+w1uG5AD351dh0KUQSlQ9IxS7Nvr3K7B3vVf+1/pQb+sxxTXeqL5751r7y5Pxm2SDta9HlgxkOg50b6xLVzv9i790KTha14iQcPyCq1TVY7Lpcx53NBN4yV99cg6apvyk=
Received: by 10.82.152.16 with SMTP id z16mr4666908bud.1185817766577;
        Mon, 30 Jul 2007 10:49:26 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Mon, 30 Jul 2007 10:49:26 -0700 (PDT)
Message-ID: <359a92830707301049pda15bb6s37741bd2242b439a@mail.gmail.com>
Date: Mon, 30 Jul 2007 13:49:26 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Running query text through an Analyzer without QueryParser?
In-Reply-To: <7a14509e0707300752r442111d3x9366441d6c40e12@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_21152_26770470.1185817766550"
References: <7a14509e0707300752r442111d3x9366441d6c40e12@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_21152_26770470.1185817766550
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Would this work?

TokenStream ts =  StandardAnalyzer.tokenStream();
while ((Token tok = ts.next()) != null) {
    do whatever
}

Best
Erick

On 7/30/07, Joe Attardi <jattardi@gmail.com> wrote:
>
> Following up on my recent question. It has been suggested to me that I can
> run the query text through an Analyzer without using the QueryParser. For
> example, if I know what field to be searched I can create a PrefixQuery or
> WildcardQuery, but still want to process the search text with the same
> Analyzer that did the indexing. How do I run a query through an Analyzer
> without using the QueryParser... is this possible?
>

------=_Part_21152_26770470.1185817766550--

From java-user-return-29490-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 30 17:58:08 2007
Return-Path: <java-user-return-29490-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23327 invoked from network); 30 Jul 2007 17:58:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2007 17:58:07 -0000
Received: (qmail 31596 invoked by uid 500); 30 Jul 2007 17:58:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31552 invoked by uid 500); 30 Jul 2007 17:57:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31541 invoked by uid 99); 30 Jul 2007 17:57:59 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 10:57:59 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jattardi@gmail.com designates 209.85.146.181 as permitted sender)
Received: from [209.85.146.181] (HELO wa-out-1112.google.com) (209.85.146.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 17:57:54 +0000
Received: by wa-out-1112.google.com with SMTP id j40so1959489wah
        for <java-user@lucene.apache.org>; Mon, 30 Jul 2007 10:57:33 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=JNYCD/j2Tttiq/8R1YMlCpR9ggplliqeyy0WxAZEf7xuZZw/zTrRI5Vb4vCNtSaf8EPTggXvanXZSkPIpzMyoweMKZpzxoHTWadMS9m+9i6Bp0XHHmFcc1ehvaZ9+pCkHOW0pK+GgRGUkxdQbfe+fEDDncDCnDyVdJo1uaDvN38=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=r8DYi6tMBvRyMF+tFg4qm8FxjpNYM87MS/zq21/CdCcjZT39N4pz4wTeFbh53W9M+smYrBt1oXvAxECvJvoXow5ja/UgKFujFoXSJhCnzYQLLxaw01eTJvLZ2zUQejRFTDaJ04dqA10eBlqtBhkE8uCn8+5b0/gM0eTV+sC5zmM=
Received: by 10.114.132.5 with SMTP id f5mr753677wad.1185818253620;
        Mon, 30 Jul 2007 10:57:33 -0700 (PDT)
Received: by 10.114.121.8 with HTTP; Mon, 30 Jul 2007 10:57:33 -0700 (PDT)
Message-ID: <7a14509e0707301057t2cbfa504m9508a3f8ee968ab6@mail.gmail.com>
Date: Mon, 30 Jul 2007 13:57:33 -0400
From: "Joe Attardi" <jattardi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Running query text through an Analyzer without QueryParser?
In-Reply-To: <359a92830707301049pda15bb6s37741bd2242b439a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_24897_25611369.1185818253596"
References: <7a14509e0707300752r442111d3x9366441d6c40e12@mail.gmail.com>
	 <359a92830707301049pda15bb6s37741bd2242b439a@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_24897_25611369.1185818253596
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

So then would I just concatenate the tokens together to form the query text?

-- 
Joe Attardi
jattardi@gmail.com
http://thinksincode.blogspot.com/

On 7/30/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> Would this work?
>
> TokenStream ts =  StandardAnalyzer.tokenStream();
> while ((Token tok = ts.next()) != null) {
>     do whatever
> }
>
> Best
> Erick
>
> On 7/30/07, Joe Attardi <jattardi@gmail.com> wrote:
> >
> > Following up on my recent question. It has been suggested to me that I
> can
> > run the query text through an Analyzer without using the QueryParser.
> For
> > example, if I know what field to be searched I can create a PrefixQuery
> or
> > WildcardQuery, but still want to process the search text with the same
> > Analyzer that did the indexing. How do I run a query through an Analyzer
> > without using the QueryParser... is this possible?
> >
>

------=_Part_24897_25611369.1185818253596--

From java-user-return-29491-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 30 18:05:31 2007
Return-Path: <java-user-return-29491-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26331 invoked from network); 30 Jul 2007 18:05:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2007 18:05:30 -0000
Received: (qmail 49557 invoked by uid 500); 30 Jul 2007 18:05:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49334 invoked by uid 500); 30 Jul 2007 18:05:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49323 invoked by uid 99); 30 Jul 2007 18:05:23 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 11:05:23 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [213.133.33.40] (HELO smtp.is.nl) (213.133.33.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 18:05:16 +0000
Received: from [213.133.51.241] (HELO hai01.hippo.local)
  by smtp.is.nl (CommuniGate Pro SMTP 5.0.10)
  with ESMTP id 20450802 for java-user@lucene.apache.org; Mon, 30 Jul 2007 20:04:54 +0200
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.0.6619.12
Subject: RE: Running query text through an Analyzer without QueryParser?
Date: Mon, 30 Jul 2007 20:04:53 +0200
Message-ID: <A955EA1F8FE31749AEC8C998082F6C7C01AC126A@hai01.hippo.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Running query text through an Analyzer without QueryParser?
Thread-Index: AcfS003f61WGYeB3Tw+dziKlTsJRNgAAHo+w
From: "Ard Schrijvers" <a.schrijvers@hippo.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org


>=20
> So then would I just concatenate the tokens together to form=20
> the query text?

You might better create a TermQuery for each token instead of =
concatenating, and combine them in a BooleanQuery and say wether all =
terms must or should occur. Very simple, see [1]

Regards Ard

[1] =
http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/javadoc/org=
/apache/lucene/search/BooleanQuery.html

>=20
> --=20
> Joe Attardi
> jattardi@gmail.com
> http://thinksincode.blogspot.com/
>=20
> On 7/30/07, Erick Erickson <erickerickson@gmail.com> wrote:
> >
> > Would this work?
> >
> > TokenStream ts =3D  StandardAnalyzer.tokenStream();
> > while ((Token tok =3D ts.next()) !=3D null) {
> >     do whatever
> > }
> >
> > Best
> > Erick
> >
> > On 7/30/07, Joe Attardi <jattardi@gmail.com> wrote:
> > >
> > > Following up on my recent question. It has been suggested=20
> to me that I
> > can
> > > run the query text through an Analyzer without using the=20
> QueryParser.
> > For
> > > example, if I know what field to be searched I can create=20
> a PrefixQuery
> > or
> > > WildcardQuery, but still want to process the search text=20
> with the same
> > > Analyzer that did the indexing. How do I run a query=20
> through an Analyzer
> > > without using the QueryParser... is this possible?
> > >
> >
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29492-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 30 18:06:48 2007
Return-Path: <java-user-return-29492-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26770 invoked from network); 30 Jul 2007 18:06:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2007 18:06:47 -0000
Received: (qmail 51878 invoked by uid 500); 30 Jul 2007 18:06:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51835 invoked by uid 500); 30 Jul 2007 18:06:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51824 invoked by uid 99); 30 Jul 2007 18:06:41 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 11:06:41 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 18:06:33 +0000
Received: by ug-out-1314.google.com with SMTP id c2so1266459ugf
        for <java-user@lucene.apache.org>; Mon, 30 Jul 2007 11:06:11 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=PLthejiCI/C8HyQ7XStB8OAoiUEkz2GtX63fdlD/S22hKMLkKSI4otA++cAOYFOuaJNG4jD5SjUielqhfhVkuSwYkRaAuXGCLd1f8HzYQ0QQk9XrQGlTL9CKAS/0rOQVteVse1vO/PHDAl4OWMxzryxXBbN6Fr0DBwCPK+hHiFc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=JrxGOrbOaWdNevf5QjF7SfB9YyGLkFr2Vsu0reXFHdekvaA+ZjurLm4bF+y2s+fnA36BiQ6A/PWEO+c/YR8HwhsagtwmQIGcX7YvxGwDi++loJmIc9quuy+JrTIalIeigRX/tcRvClibkHV04CTcKNyu4qRrvvMI7HXvqtaBpbM=
Received: by 10.78.185.15 with SMTP id i15mr1591349huf.1185818771709;
        Mon, 30 Jul 2007 11:06:11 -0700 (PDT)
Received: by 10.78.140.12 with HTTP; Mon, 30 Jul 2007 11:06:11 -0700 (PDT)
Message-ID: <6e3ae6310707301106p175e85dmfb9d6724ac0f9851@mail.gmail.com>
Date: Mon, 30 Jul 2007 11:06:11 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: a question for french analyzer
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I am not a French speaker, but here are some questions regarding
French analyzer:

Is there any analyzer that can do this? Analyze accentuated letters to
non accentuated corresponding letters (=E9,=E8,=EA,=EB -> e), so that

search "fen=EAtre" (=3Dwindow) found all docs with "fen=EAtre" or "fenetre"
and
search "fenetre" found the same result, all docs with "fen=EAtre" or "fenet=
re"

Current analyzers, Snowball-French and FrenchAnalyzer don't have this featu=
re.

--=20
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=3DCreate_Lucene_Database_Search_in_=
3_minutes

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29493-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 30 18:18:44 2007
Return-Path: <java-user-return-29493-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32536 invoked from network); 30 Jul 2007 18:18:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2007 18:18:43 -0000
Received: (qmail 82558 invoked by uid 500); 30 Jul 2007 18:18:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82521 invoked by uid 500); 30 Jul 2007 18:18:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82510 invoked by uid 99); 30 Jul 2007 18:18:36 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 11:18:36 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.134.190 as permitted sender)
Received: from [209.85.134.190] (HELO mu-out-0910.google.com) (209.85.134.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 18:18:27 +0000
Received: by mu-out-0910.google.com with SMTP id g7so1761392muf
        for <java-user@lucene.apache.org>; Mon, 30 Jul 2007 11:18:06 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=LrroMQq8CNA0shC882s6nP2uNOTZSHGFRsWZYO3jZkdT8ixk4cG9NUQy4YqHe9UFBrnD7pQPBIUkSSdDIboL6TO2qOCs+RcCdlztfwITu1zYYgM8IetuVBsXpfib3Y9hc2tpJINzD/6VmTH/lkKcGJwqo+hVRlqx6m/a4ki9Vl8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Bfa5KoEM4eiQ1dLeeSip67qn1SR0JTzWn79FEUPr98DCeipwwO2DFt6REF0mKyB5WYxSRrRQdImXkPDNODXPoSogITeFsKdV2JItRDIBizZsHsJUCV0X+MsSW468awkaA2n4BF2nchdzYztwcyigzdSbOwa8LJ4NLaZjWlgwzLs=
Received: by 10.82.112.3 with SMTP id k3mr4704920buc.1185819486098;
        Mon, 30 Jul 2007 11:18:06 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Mon, 30 Jul 2007 11:18:06 -0700 (PDT)
Message-ID: <359a92830707301118k2abb67a3we47ea024b249ac80@mail.gmail.com>
Date: Mon, 30 Jul 2007 14:18:06 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: a question for french analyzer
In-Reply-To: <6e3ae6310707301106p175e85dmfb9d6724ac0f9851@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_21432_19254436.1185819486071"
References: <6e3ae6310707301106p175e85dmfb9d6724ac0f9851@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_21432_19254436.1185819486071
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Gosh, I sure hope not, because that would mean that we rolled our
own for no good reason. We wound up just collapsing
the input stream by substituting plain old 'e' for all the accented
variants before indexing and before searching. Be *really* careful
what character set you're using.

Actually, we would have still had to roll our own because the
character mapping was...er...wonky <G>....

You have to store the data raw for display purposes if you want the
accents to show though...

Best
Erick

On 7/30/07, Chris Lu <chris.lu@gmail.com> wrote:
>
> Hi,
>
> I am not a French speaker, but here are some questions regarding
> French analyzer:
>
> Is there any analyzer that can do this? Analyze accentuated letters to
> non accentuated corresponding letters (=E9,=E8,=EA,=EB -> e), so that
>
> search "fen=EAtre" (=3Dwindow) found all docs with "fen=EAtre" or "fenetr=
e"
> and
> search "fenetre" found the same result, all docs with "fen=EAtre" or
> "fenetre"
>
> Current analyzers, Snowball-French and FrenchAnalyzer don't have this
> feature.
>
> --
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
> Lucene Database Search in 3 minutes:
>
> http://wiki.dbsight.com/index.php?title=3DCreate_Lucene_Database_Search_i=
n_3_minutes
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_21432_19254436.1185819486071--

From java-user-return-29494-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 30 18:19:18 2007
Return-Path: <java-user-return-29494-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32920 invoked from network); 30 Jul 2007 18:19:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2007 18:19:16 -0000
Received: (qmail 84722 invoked by uid 500); 30 Jul 2007 18:19:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84687 invoked by uid 500); 30 Jul 2007 18:19:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84590 invoked by uid 99); 30 Jul 2007 18:19:07 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 11:19:07 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=MSGID_MULTIPLE_AT,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of samir.abdou@unine.ch designates 130.125.1.52 as permitted sender)
Received: from [130.125.1.52] (HELO columba.unine.ch) (130.125.1.52)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 18:18:57 +0000
Received: from mail01.unine.ch [130.125.5.51]
	by columba.unine.ch
	with XWall v3.40l ;
	Mon, 30 Jul 2007 20:18:35 +0200
Received: from webmail.UNINE.CH ([130.125.1.20]) by mail01.UNINE.CH with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 30 Jul 2007 20:18:34 +0200
Received: from philosophe ([83.68.201.51]) by webmail.UNINE.CH over TLS secured channel with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 30 Jul 2007 20:18:34 +0200
From: "Samir Abdou" <samir.abdou@unine.ch>
To: <java-user@lucene.apache.org>
References: <6e3ae6310707301106p175e85dmfb9d6724ac0f9851@mail.gmail.com>
In-Reply-To: <6e3ae6310707301106p175e85dmfb9d6724ac0f9851@mail.gmail.com>
Subject: RE: a question for french analyzer
Date: Mon, 30 Jul 2007 20:18:48 +0200
Organization: =?iso-8859-1?Q?Universit=E9_de_Neuch=E2tel?=
Message-ID: <000301c7d2d6$12f07010$38d15030$@abdou@unine.ch>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
thread-index: AcfS1Gc4yySkSYbxTD2FdlyJ7mD0PAAAIdQQ
Content-Language: fr-ch
X-OriginalArrivalTime: 30 Jul 2007 18:18:34.0470 (UTC) FILETIME=[0A857060:01C7D2D6]
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Take a look to the class ISOLatin1AccentFilter !  Add this to your =
analyzer
and it should work !

Hope this will help,
Samir

-----Message d'origine-----
De=A0: Chris Lu [mailto:chris.lu@gmail.com]=20
Envoy=E9=A0: lundi, 30. juillet 2007 20:06
=C0=A0: java-user@lucene.apache.org
Objet=A0: a question for french analyzer

Hi,

I am not a French speaker, but here are some questions regarding
French analyzer:

Is there any analyzer that can do this? Analyze accentuated letters to
non accentuated corresponding letters (=E9,=E8,=EA,=EB -> e), so that

search "fen=EAtre" (=3Dwindow) found all docs with "fen=EAtre" or =
"fenetre"
and
search "fenetre" found the same result, all docs with "fen=EAtre" or =
"fenetre"

Current analyzers, Snowball-French and FrenchAnalyzer don't have this
feature.

--=20
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=3DCreate_Lucene_Database_Search_i=
n_3_m
inutes

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29495-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 30 18:40:43 2007
Return-Path: <java-user-return-29495-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44350 invoked from network); 30 Jul 2007 18:40:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2007 18:40:43 -0000
Received: (qmail 39414 invoked by uid 500); 30 Jul 2007 18:40:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39379 invoked by uid 500); 30 Jul 2007 18:40:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39368 invoked by uid 99); 30 Jul 2007 18:40:36 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 11:40:36 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of max@artsalliancelabs.com designates 66.92.91.130 as permitted sender)
Received: from [66.92.91.130] (HELO artsalliancelabs.com) (66.92.91.130)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 18:40:30 +0000
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C7D2D9.0DADD604"
Subject: Maximum phrase query?
x-mimeole: Produced By Microsoft Exchange V6.5
Date: Mon, 30 Jul 2007 14:40:07 -0400
Message-ID: <E9DD5BE59E84CA4E87AE0E5E6F1B8B122A2708@sbsrv.AALabs.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Maximum phrase query?
Thread-Index: AcfS2Q1Ft+H2McwhRai2EtcDoXXDnw==
From: "Max Metral" <max@artsalliancelabs.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C7D2D9.0DADD604
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I have a set of tags associated with content in my corpus.  I also have
normal text.  Our system tries to figure out which "words" are tags and
which are text, and falls back on text when tags fail.  I'm wondering,
is there anything in Lucene which might help disambiguate multi-word
tags from text?  Specific example:

=20

Tags: "post office", "office"

=20

Search: post office mail

=20

In this case, I would like something that would indicate that the search
could be one of (in scored order):

=20

"post office" + mail

post + office + mail

=20

I realize it's a strange request and that I'm essentially asking Lucene
to perform a combinatorically problematic operation.

=20

--Max


------_=_NextPart_001_01C7D2D9.0DADD604--

From java-user-return-29496-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 30 20:17:42 2007
Return-Path: <java-user-return-29496-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81629 invoked from network); 30 Jul 2007 20:17:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2007 20:17:39 -0000
Received: (qmail 5932 invoked by uid 500); 30 Jul 2007 20:17:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5409 invoked by uid 500); 30 Jul 2007 20:17:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5398 invoked by uid 99); 30 Jul 2007 20:17:32 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 13:17:32 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.81.62.48] (HELO mail01.apmindsf.com) (64.81.62.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 20:17:26 +0000
Received: from [172.30.250.101] (helo=[172.30.250.101])
	by mail01.apmindsf.com with esmtp (Exim 4.50)
	id 1IFbfr-00022w-Pm
	for java-user@lucene.apache.org; Mon, 30 Jul 2007 13:17:03 -0700
Message-ID: <46AE4A1E.3070907@metaweb.com>
Date: Mon, 30 Jul 2007 13:29:18 -0700
From: Tim Sturge <tsturge@metaweb.com>
User-Agent: Mozilla Thunderbird 1.0.6 (X11/20050715)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: java gc with a frequently changing index?
References: <46A7995D.5030004@metaweb.com> <359a92830707281246h15a5c5c7i114ee410094c478a@mail.gmail.com>
In-Reply-To: <359a92830707281246h15a5c5c7i114ee410094c478a@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for the reply Erick,

I believe it is the gc for four reasons:

- I've tried the "warmup" approach alredy and it didn't change the 
situation.

- The server completely pauses for several seconds. I run jstack to find 
out where the pause is, and it also pauses for several seconds before 
telling me the server is doing something perfectly innocuous. If I was 
stuck in some search overhead, I would expect jstack to tell me where 
(and I would expect the where to be somewhere interesting and vaguely 
repeatable)

- The impact is very uneven. Over 50000 queries (sequentially) I get 
49500 at 3 msec, 450 at 300 msec and 50 at 3 sec or more (ouch). I 
really would be much happier with a consistent 10msec (which adds up to 
the same amount of time in total) or even 25msec

- "-XX:+UseConcMarkSweepGC -XX:+UseParNewGC" changes the pauses (I get 
100 msec and 1 sec pauses instead, but 5x as many for slower overall 
time; 1 sec is far too slow)

Your solution looks possible, but seems really too complex for what I am 
trying to do (which is basic incremental update). What I really am 
looking for is a way to avoid reopening the first segment of my FSDir. I 
have a single 6G segment, and then another 20-50 segments with updates, 
but they are <100M in total size. So if I could have lucene open just 
the segments file and the new or changed *.del and *.cfs files (without 
reopening the unchanged *.cfs files) that would be a huge win for me I 
think.

It strikes me this should be possible with a thin but complex layer 
between the SegmentReader and MultiReader, and perhaps a way to get 
SegmentReader to update what *.del file it is using. I'm just curious 
why this doesn't already exist.

Tim

Erick Erickson wrote:
> Why do you believe that it's the gc? I admit i just scanned your
> e-mail, but I *do* know that the first search (especially sorts) on
> a newly-opened IndexReader incure a bunch of overhead. Could
> that be what you're seeing?
>
> I'm not sure there is a "best practice", but I have seen two
> solutions mentioned, both more complex than opening/closing
> the reader.
> 1> open the reader in the background, fire a few "warmup" queries
> at it, then switch it with the one you actually use to answer queries.
>
> 2> Use a RAMDirectory to hold your new entries for some period
> of time. You'd have to do some fancy dancing to keep this straight
> since you're updating documents, but it might be viable. The scheme
> is something like
> Open your FSDIR
> Open a RAMdir.
>
> Add all new documents to BOTH of them. When servicing a query,
> look in both indexes, but you only open/close the RAMdir for
> every query. Note that since, when you open a reader, it
> takes a snapshot of the index, these two views will be disjoint. When you
> get your results back, you'll have to do something about the documents
> from the FSdir that have been replaced in the RAMdir, which is where
> the fancy dancing part comes in. But I leave that as an exercise for
> the reader.
>
> Periodically, shut everything down and repeat. The point here is that
> you can (probably) close/open your RAMdir with very small costs and
> have the whole thing be up to date.
>
> There'll be some coordination issues, and you'll have to cope with data
> integrity if your process barfs before you've closed your FSDir....
>
> Or, you could ask whether 5 seconds is really necessary.I've seen a lot
> of times when "real time" could be 5 minutes and nobody would really
> complain, and other times when it really is critical. But that's between you
> and our Product Manager....
>
> Hope this helps
> Erick
>
> On 7/25/07, Tim Sturge <tsturge@metaweb.com> wrote:
>   
>> Hi,
>>
>> I am indexing a set of constantly changing documents. The change rate is
>> moderate (about 10 docs/sec over a 10M document collection with a 6G
>> total size) but I want to be  right up to date (ideally within a second
>> but within 5 seconds is acceptable) with the index.
>>
>> Right now I have code that adds new documents to the index and deletes
>> old ones using updateDocument() in the 2.1 IndexWriter. In order to see
>> the changes, I need to recreate the IndexReader/IndexSearcher every
>> second or so. I am not calling optimize() on the index in the writer,
>> and the mergeFactor is 10.
>>
>> The problem I am facing is that java gc is terrible at collecting the
>> IndexSearchers I am discarding. I usually have a 3msec query time, but I
>> get gc pauses of 300msec to 3 sec (I assume is is collecting the
>> "tenured" generation in these pauses, which is my old IndexSearcher)
>>
>> I've tried "-Xincgc", "-XX:+UseConcMarkSweepGC -XX:+UseParNewGC" and
>> calling System.gc() right after I close the old index without much luck
>> (I get the pauses down to 1sec, but get 3x as many. I want < 25 msec
>> pauses). So my question is, should I be avoiding reloading my index in
>> this way? Should I keep a separate IndexReader (which only deletes old
>> documents) and one for new documents? Is there a standard technique for
>> a quickly changing index?
>>
>> Thanks,
>>
>> Tim
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29497-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 30 20:20:17 2007
Return-Path: <java-user-return-29497-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82337 invoked from network); 30 Jul 2007 20:20:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2007 20:20:16 -0000
Received: (qmail 14733 invoked by uid 500); 30 Jul 2007 20:20:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14705 invoked by uid 500); 30 Jul 2007 20:20:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14694 invoked by uid 99); 30 Jul 2007 20:20:09 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 13:20:09 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 209.85.132.247 as permitted sender)
Received: from [209.85.132.247] (HELO an-out-0708.google.com) (209.85.132.247)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 20:20:03 +0000
Received: by an-out-0708.google.com with SMTP id c5so328158anc
        for <java-user@lucene.apache.org>; Mon, 30 Jul 2007 13:19:42 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=KpFenozOJvN0KgkaVrlE87RFv3sWaVVaVCY+86HsOVMt0eYZR/3RSwCDmafPI+r494aYSSy20GOppgOeZkeu5bPZohVM+SMxzjv2I/bOxG0iWRdxAdBh2tScSgBhz7qmmVb/QA3jR2TMNgJNgqa4zja4JdWkRem5MpLidhrhH30=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=eDHbSkzuOhbzJL2cBC4uYvNkMJiYhzbDeW3anQKsxOBIuu0JTH9sAkbpl2lQUvk418lgpHbPRCqFiSwNsbAvF2nbvo2Wy9shWJ0+9uX1ULPpNjOQcSjgNydCnkRwcI0c8mikM8ZpHFmwIm9fVuqXl7nmdNGLmII69rR1iHdFIlw=
Received: by 10.100.167.7 with SMTP id p7mr4867931ane.1185826782189;
        Mon, 30 Jul 2007 13:19:42 -0700 (PDT)
Received: by 10.100.14.15 with HTTP; Mon, 30 Jul 2007 13:19:42 -0700 (PDT)
Message-ID: <ab0709bf0707301319mda3ef61t579cac1b1e5d2623@mail.gmail.com>
Date: Mon, 30 Jul 2007 16:19:42 -0400
From: "Mark Miller" <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: java gc with a frequently changing index?
In-Reply-To: <46AE4A1E.3070907@metaweb.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_43880_24426962.1185826782061"
References: <46A7995D.5030004@metaweb.com>
	 <359a92830707281246h15a5c5c7i114ee410094c478a@mail.gmail.com>
	 <46AE4A1E.3070907@metaweb.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_43880_24426962.1185826782061
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I believe there is an issue in JIRA that handles reopening an IndexReader
without reopening segments that have not changed.

On 7/30/07, Tim Sturge <tsturge@metaweb.com> wrote:
>
> Thanks for the reply Erick,
>
> I believe it is the gc for four reasons:
>
> - I've tried the "warmup" approach alredy and it didn't change the
> situation.
>
> - The server completely pauses for several seconds. I run jstack to find
> out where the pause is, and it also pauses for several seconds before
> telling me the server is doing something perfectly innocuous. If I was
> stuck in some search overhead, I would expect jstack to tell me where
> (and I would expect the where to be somewhere interesting and vaguely
> repeatable)
>
> - The impact is very uneven. Over 50000 queries (sequentially) I get
> 49500 at 3 msec, 450 at 300 msec and 50 at 3 sec or more (ouch). I
> really would be much happier with a consistent 10msec (which adds up to
> the same amount of time in total) or even 25msec
>
> - "-XX:+UseConcMarkSweepGC -XX:+UseParNewGC" changes the pauses (I get
> 100 msec and 1 sec pauses instead, but 5x as many for slower overall
> time; 1 sec is far too slow)
>
> Your solution looks possible, but seems really too complex for what I am
> trying to do (which is basic incremental update). What I really am
> looking for is a way to avoid reopening the first segment of my FSDir. I
> have a single 6G segment, and then another 20-50 segments with updates,
> but they are <100M in total size. So if I could have lucene open just
> the segments file and the new or changed *.del and *.cfs files (without
> reopening the unchanged *.cfs files) that would be a huge win for me I
> think.
>
> It strikes me this should be possible with a thin but complex layer
> between the SegmentReader and MultiReader, and perhaps a way to get
> SegmentReader to update what *.del file it is using. I'm just curious
> why this doesn't already exist.
>
> Tim
>
> Erick Erickson wrote:
> > Why do you believe that it's the gc? I admit i just scanned your
> > e-mail, but I *do* know that the first search (especially sorts) on
> > a newly-opened IndexReader incure a bunch of overhead. Could
> > that be what you're seeing?
> >
> > I'm not sure there is a "best practice", but I have seen two
> > solutions mentioned, both more complex than opening/closing
> > the reader.
> > 1> open the reader in the background, fire a few "warmup" queries
> > at it, then switch it with the one you actually use to answer queries.
> >
> > 2> Use a RAMDirectory to hold your new entries for some period
> > of time. You'd have to do some fancy dancing to keep this straight
> > since you're updating documents, but it might be viable. The scheme
> > is something like
> > Open your FSDIR
> > Open a RAMdir.
> >
> > Add all new documents to BOTH of them. When servicing a query,
> > look in both indexes, but you only open/close the RAMdir for
> > every query. Note that since, when you open a reader, it
> > takes a snapshot of the index, these two views will be disjoint. When
> you
> > get your results back, you'll have to do something about the documents
> > from the FSdir that have been replaced in the RAMdir, which is where
> > the fancy dancing part comes in. But I leave that as an exercise for
> > the reader.
> >
> > Periodically, shut everything down and repeat. The point here is that
> > you can (probably) close/open your RAMdir with very small costs and
> > have the whole thing be up to date.
> >
> > There'll be some coordination issues, and you'll have to cope with data
> > integrity if your process barfs before you've closed your FSDir....
> >
> > Or, you could ask whether 5 seconds is really necessary.I've seen a lot
> > of times when "real time" could be 5 minutes and nobody would really
> > complain, and other times when it really is critical. But that's between
> you
> > and our Product Manager....
> >
> > Hope this helps
> > Erick
> >
> > On 7/25/07, Tim Sturge <tsturge@metaweb.com> wrote:
> >
> >> Hi,
> >>
> >> I am indexing a set of constantly changing documents. The change rate
> is
> >> moderate (about 10 docs/sec over a 10M document collection with a 6G
> >> total size) but I want to be  right up to date (ideally within a second
> >> but within 5 seconds is acceptable) with the index.
> >>
> >> Right now I have code that adds new documents to the index and deletes
> >> old ones using updateDocument() in the 2.1 IndexWriter. In order to see
> >> the changes, I need to recreate the IndexReader/IndexSearcher every
> >> second or so. I am not calling optimize() on the index in the writer,
> >> and the mergeFactor is 10.
> >>
> >> The problem I am facing is that java gc is terrible at collecting the
> >> IndexSearchers I am discarding. I usually have a 3msec query time, but
> I
> >> get gc pauses of 300msec to 3 sec (I assume is is collecting the
> >> "tenured" generation in these pauses, which is my old IndexSearcher)
> >>
> >> I've tried "-Xincgc", "-XX:+UseConcMarkSweepGC -XX:+UseParNewGC" and
> >> calling System.gc() right after I close the old index without much luck
> >> (I get the pauses down to 1sec, but get 3x as many. I want < 25 msec
> >> pauses). So my question is, should I be avoiding reloading my index in
> >> this way? Should I keep a separate IndexReader (which only deletes old
> >> documents) and one for new documents? Is there a standard technique for
> >> a quickly changing index?
> >>
> >> Thanks,
> >>
> >> Tim
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >>
> >
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_43880_24426962.1185826782061--

From java-user-return-29498-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 30 20:24:09 2007
Return-Path: <java-user-return-29498-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83396 invoked from network); 30 Jul 2007 20:24:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2007 20:24:08 -0000
Received: (qmail 23812 invoked by uid 500); 30 Jul 2007 20:24:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23755 invoked by uid 500); 30 Jul 2007 20:24:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23689 invoked by uid 99); 30 Jul 2007 20:24:00 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 13:24:00 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 209.85.132.245 as permitted sender)
Received: from [209.85.132.245] (HELO an-out-0708.google.com) (209.85.132.245)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 20:23:53 +0000
Received: by an-out-0708.google.com with SMTP id c5so328348anc
        for <java-user@lucene.apache.org>; Mon, 30 Jul 2007 13:23:33 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=TpnoyN4G2hyP0UEfNpCkh8K1SGVZ6WQgU3D4X9e2oTZrQKc/2GQfePpxXPqqParpMxhQ/wZdM/SiGj5JBBsZgucUpCPFodCjx7lzr6H6azJbiwxpAkM16B0w4wOJ8rdl2dVNDN6CyUNwil+mPiD+MHVput51My+yZ96OxZFdbqQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Q08LorxKE2TzvyM2WV2Fzm9iK3/eeNFabXXrMaUzUSioiTrkmU5UF4TkbglQpVSaTNxOtb87zlpwlHDnM6wJ+ynAdAn0VLxP20iY8og/IIXMTx1jdaPghkOR2qNMKZjelO3qqPB4ddC/DQQsN5Hjr8vqjTZmv0vZLXn2/46/uCA=
Received: by 10.100.142.12 with SMTP id p12mr4862267and.1185827012541;
        Mon, 30 Jul 2007 13:23:32 -0700 (PDT)
Received: by 10.100.14.15 with HTTP; Mon, 30 Jul 2007 13:23:32 -0700 (PDT)
Message-ID: <ab0709bf0707301323p1931d222naea731feae97d44@mail.gmail.com>
Date: Mon, 30 Jul 2007 16:23:32 -0400
From: "Mark Miller" <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: java gc with a frequently changing index?
In-Reply-To: <ab0709bf0707301319mda3ef61t579cac1b1e5d2623@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_43968_15382660.1185827012497"
References: <46A7995D.5030004@metaweb.com>
	 <359a92830707281246h15a5c5c7i114ee410094c478a@mail.gmail.com>
	 <46AE4A1E.3070907@metaweb.com>
	 <ab0709bf0707301319mda3ef61t579cac1b1e5d2623@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_43968_15382660.1185827012497
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

And by the way, I cannot see it ever making sense to keep reopening an index
reader every second or so. It has to be MUCH more efficient to even wait
every 2 or 4 seconds...even that is going to be pretty nasty, but you have
to allow for a bit of batch man. You will waste so much time opening those
readers that its not going to be real-time anyway. You are just going to be
in a world of slow.

On 7/30/07, Mark Miller <markrmiller@gmail.com> wrote:
>
> I believe there is an issue in JIRA that handles reopening an IndexReader
> without reopening segments that have not changed.
>
> On 7/30/07, Tim Sturge < tsturge@metaweb.com> wrote:
> >
> > Thanks for the reply Erick,
> >
> > I believe it is the gc for four reasons:
> >
> > - I've tried the "warmup" approach alredy and it didn't change the
> > situation.
> >
> > - The server completely pauses for several seconds. I run jstack to find
> > out where the pause is, and it also pauses for several seconds before
> > telling me the server is doing something perfectly innocuous. If I was
> > stuck in some search overhead, I would expect jstack to tell me where
> > (and I would expect the where to be somewhere interesting and vaguely
> > repeatable)
> >
> > - The impact is very uneven. Over 50000 queries (sequentially) I get
> > 49500 at 3 msec, 450 at 300 msec and 50 at 3 sec or more (ouch). I
> > really would be much happier with a consistent 10msec (which adds up to
> > the same amount of time in total) or even 25msec
> >
> > - "-XX:+UseConcMarkSweepGC -XX:+UseParNewGC" changes the pauses (I get
> > 100 msec and 1 sec pauses instead, but 5x as many for slower overall
> > time; 1 sec is far too slow)
> >
> > Your solution looks possible, but seems really too complex for what I am
> > trying to do (which is basic incremental update). What I really am
> > looking for is a way to avoid reopening the first segment of my FSDir. I
> >
> > have a single 6G segment, and then another 20-50 segments with updates,
> > but they are <100M in total size. So if I could have lucene open just
> > the segments file and the new or changed *.del and *.cfs files (without
> > reopening the unchanged *.cfs files) that would be a huge win for me I
> > think.
> >
> > It strikes me this should be possible with a thin but complex layer
> > between the SegmentReader and MultiReader, and perhaps a way to get
> > SegmentReader to update what *.del file it is using. I'm just curious
> > why this doesn't already exist.
> >
> > Tim
> >
> > Erick Erickson wrote:
> > > Why do you believe that it's the gc? I admit i just scanned your
> > > e-mail, but I *do* know that the first search (especially sorts) on
> > > a newly-opened IndexReader incure a bunch of overhead. Could
> > > that be what you're seeing?
> > >
> > > I'm not sure there is a "best practice", but I have seen two
> > > solutions mentioned, both more complex than opening/closing
> > > the reader.
> > > 1> open the reader in the background, fire a few "warmup" queries
> > > at it, then switch it with the one you actually use to answer queries.
> >
> > >
> > > 2> Use a RAMDirectory to hold your new entries for some period
> > > of time. You'd have to do some fancy dancing to keep this straight
> > > since you're updating documents, but it might be viable. The scheme
> > > is something like
> > > Open your FSDIR
> > > Open a RAMdir.
> > >
> > > Add all new documents to BOTH of them. When servicing a query,
> > > look in both indexes, but you only open/close the RAMdir for
> > > every query. Note that since, when you open a reader, it
> > > takes a snapshot of the index, these two views will be disjoint. When
> > you
> > > get your results back, you'll have to do something about the documents
> >
> > > from the FSdir that have been replaced in the RAMdir, which is where
> > > the fancy dancing part comes in. But I leave that as an exercise for
> > > the reader.
> > >
> > > Periodically, shut everything down and repeat. The point here is that
> > > you can (probably) close/open your RAMdir with very small costs and
> > > have the whole thing be up to date.
> > >
> > > There'll be some coordination issues, and you'll have to cope with
> > data
> > > integrity if your process barfs before you've closed your FSDir....
> > >
> > > Or, you could ask whether 5 seconds is really necessary.I've seen a
> > lot
> > > of times when "real time" could be 5 minutes and nobody would really
> > > complain, and other times when it really is critical. But that's
> > between you
> > > and our Product Manager....
> > >
> > > Hope this helps
> > > Erick
> > >
> > > On 7/25/07, Tim Sturge <tsturge@metaweb.com> wrote:
> > >
> > >> Hi,
> > >>
> > >> I am indexing a set of constantly changing documents. The change rate
> > is
> > >> moderate (about 10 docs/sec over a 10M document collection with a 6G
> > >> total size) but I want to be  right up to date (ideally within a
> > second
> > >> but within 5 seconds is acceptable) with the index.
> > >>
> > >> Right now I have code that adds new documents to the index and
> > deletes
> > >> old ones using updateDocument() in the 2.1 IndexWriter. In order to
> > see
> > >> the changes, I need to recreate the IndexReader/IndexSearcher every
> > >> second or so. I am not calling optimize() on the index in the writer,
> > >> and the mergeFactor is 10.
> > >>
> > >> The problem I am facing is that java gc is terrible at collecting the
> >
> > >> IndexSearchers I am discarding. I usually have a 3msec query time,
> > but I
> > >> get gc pauses of 300msec to 3 sec (I assume is is collecting the
> > >> "tenured" generation in these pauses, which is my old IndexSearcher)
> > >>
> > >> I've tried "-Xincgc", "-XX:+UseConcMarkSweepGC -XX:+UseParNewGC" and
> > >> calling System.gc() right after I close the old index without much
> > luck
> > >> (I get the pauses down to 1sec, but get 3x as many. I want < 25 msec
> > >> pauses). So my question is, should I be avoiding reloading my index
> > in
> > >> this way? Should I keep a separate IndexReader (which only deletes
> > old
> > >> documents) and one for new documents? Is there a standard technique
> > for
> > >> a quickly changing index?
> > >>
> > >> Thanks,
> > >>
> > >> Tim
> > >>
> > >>
> > >> ---------------------------------------------------------------------
> > >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >> For additional commands, e-mail: java-user-help@lucene.apache.org
> > >>
> > >>
> > >>
> > >
> > >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_43968_15382660.1185827012497--

From java-user-return-29499-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 30 20:32:08 2007
Return-Path: <java-user-return-29499-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87257 invoked from network); 30 Jul 2007 20:32:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2007 20:32:06 -0000
Received: (qmail 47496 invoked by uid 500); 30 Jul 2007 20:31:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47459 invoked by uid 500); 30 Jul 2007 20:31:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47447 invoked by uid 99); 30 Jul 2007 20:31:58 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 13:31:58 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 64.233.184.227 as permitted sender)
Received: from [64.233.184.227] (HELO wr-out-0506.google.com) (64.233.184.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 20:31:49 +0000
Received: by wr-out-0506.google.com with SMTP id 25so710268wry
        for <java-user@lucene.apache.org>; Mon, 30 Jul 2007 13:31:28 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Cm0FUt27jBf5q5xa0oC9nnoIC9WetwFYvdVMifIR4DZ5ymrxmzXTsKUYLpSXg9IFRWZL5CXeoQup/5mQrgGYGsXc89s0YJYC7SDgMi/5oH8QXME55nKK5mHMLlFVZWdCtXJ2P0hCl1+yGbNz5UgHbMY3XfWTFB/c3fB6h5yvh50=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=iQ38VEeEkfrBzgPOeof+DyG1CK8lSlRXn52Qzg8cMJn97zs/ybhZwZ7j22GZZgGNRqiNAiggZW2QuTO4kTkRHLuD0sOqI9ulioAFIMQow9MY8nKr8CTfVw4xIY7RggUx9tKEUvDFYGIujs3xMGaee7V1fFCg5NzgHnshB4Ou28g=
Received: by 10.78.180.18 with SMTP id c18mr1617861huf.1185827487503;
        Mon, 30 Jul 2007 13:31:27 -0700 (PDT)
Received: by 10.78.140.12 with HTTP; Mon, 30 Jul 2007 13:31:27 -0700 (PDT)
Message-ID: <6e3ae6310707301331x6bd85591i462dcfda0a149d11@mail.gmail.com>
Date: Mon, 30 Jul 2007 13:31:27 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: a question for french analyzer
In-Reply-To: <5866165297481789773@unknownmsgid>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <6e3ae6310707301106p175e85dmfb9d6724ac0f9851@mail.gmail.com>
	 <5866165297481789773@unknownmsgid>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi, Samir,

Thanks a lot for this tip! It works great!

--=20
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=3DCreate_Lucene_Database_Search_in_=
3_minutes

On 7/30/07, Samir Abdou <samir.abdou@unine.ch> wrote:
> Hi,
>
> Take a look to the class ISOLatin1AccentFilter !  Add this to your analyz=
er
> and it should work !
>
> Hope this will help,
> Samir
>
> -----Message d'origine-----
> De: Chris Lu [mailto:chris.lu@gmail.com]
> Envoy=E9: lundi, 30. juillet 2007 20:06
> =C0: java-user@lucene.apache.org
> Objet: a question for french analyzer
>
> Hi,
>
> I am not a French speaker, but here are some questions regarding
> French analyzer:
>
> Is there any analyzer that can do this? Analyze accentuated letters to
> non accentuated corresponding letters (=E9,=E8,=EA,=EB -> e), so that
>
> search "fen=EAtre" (=3Dwindow) found all docs with "fen=EAtre" or "fenetr=
e"
> and
> search "fenetre" found the same result, all docs with "fen=EAtre" or "fen=
etre"
>
> Current analyzers, Snowball-French and FrenchAnalyzer don't have this
> feature.
>
> --
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
> Lucene Database Search in 3 minutes:
> http://wiki.dbsight.com/index.php?title=3DCreate_Lucene_Database_Search_i=
n_3_m
> inutes
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29500-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 30 20:37:03 2007
Return-Path: <java-user-return-29500-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89598 invoked from network); 30 Jul 2007 20:37:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2007 20:37:02 -0000
Received: (qmail 67785 invoked by uid 500); 30 Jul 2007 20:36:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67750 invoked by uid 500); 30 Jul 2007 20:36:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67739 invoked by uid 99); 30 Jul 2007 20:36:55 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 13:36:55 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 20:36:46 +0000
Received: by nf-out-0910.google.com with SMTP id d3so187298nfc
        for <java-user@lucene.apache.org>; Mon, 30 Jul 2007 13:36:25 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=FjR4u8qZJMLpNycVUw5nKfopURLIb8P1mOhWjbXE1wS8hfaNucr9GlG1YsNdSZ4QfhWmCJKzVT2RQS2jk+aPVrO4lhqt/1D9znB/TSHykosAPQpzIsO39ardSh2potcqZbc8BaSTG1msJMUjnP3AiwoTn1mSuev4a4rJvCmXSvE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=CKN/bsFkqG7rtApZvQN7aU4qw6YSeKJIS8FlLKwaraXpsxJTySOL3YE216jjL8fmrILay4Cfl3py3mbnIpjCtEeBQls6XF/k/+szifukepgJdIYs02qMYEyGtN0zfzLa1JdrOscrx1LPK5uTdZHRViZH4KDodOruvBk9dEW10Q8=
Received: by 10.78.162.4 with SMTP id k4mr1612598hue.1185827785264;
        Mon, 30 Jul 2007 13:36:25 -0700 (PDT)
Received: by 10.78.140.12 with HTTP; Mon, 30 Jul 2007 13:36:25 -0700 (PDT)
Message-ID: <6e3ae6310707301336w6fe01895w4dc5319783c3f666@mail.gmail.com>
Date: Mon, 30 Jul 2007 13:36:25 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: a question for french analyzer
In-Reply-To: <359a92830707301118k2abb67a3we47ea024b249ac80@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <6e3ae6310707301106p175e85dmfb9d6724ac0f9851@mail.gmail.com>
	 <359a92830707301118k2abb67a3we47ea024b249ac80@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi, Erick,

I added ISOLatin1AccentFilter to FrenchAnalyzer following Samir's tip,
and it works great! And I think it's the right way to go. Problems
like "You have to store the data raw for display purposes if you want
the accents to show though" will go away since Analyzer already have
the original text and analyzed token mechanism built-in. And it's
pretty easy to do!

However, is there any special case that you have? Not really knowing
French, I only tested one word, "fen=EAtre", and it's analyzed into
"fenetre".

--=20
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=3DCreate_Lucene_Database_Search_in_=
3_minutes


On 7/30/07, Erick Erickson <erickerickson@gmail.com> wrote:
> Gosh, I sure hope not, because that would mean that we rolled our
> own for no good reason. We wound up just collapsing
> the input stream by substituting plain old 'e' for all the accented
> variants before indexing and before searching. Be *really* careful
> what character set you're using.
>
> Actually, we would have still had to roll our own because the
> character mapping was...er...wonky <G>....
>
> You have to store the data raw for display purposes if you want the
> accents to show though...
>
> Best
> Erick
>
> On 7/30/07, Chris Lu <chris.lu@gmail.com> wrote:
> >
> > Hi,
> >
> > I am not a French speaker, but here are some questions regarding
> > French analyzer:
> >
> > Is there any analyzer that can do this? Analyze accentuated letters to
> > non accentuated corresponding letters (=E9,=E8,=EA,=EB -> e), so that
> >
> > search "fen=EAtre" (=3Dwindow) found all docs with "fen=EAtre" or "fene=
tre"
> > and
> > search "fenetre" found the same result, all docs with "fen=EAtre" or
> > "fenetre"
> >
> > Current analyzers, Snowball-French and FrenchAnalyzer don't have this
> > feature.
> >
> > --
> > Chris Lu
> > -------------------------
> > Instant Scalable Full-Text Search On Any Database/Application
> > site: http://www.dbsight.net
> > demo: http://search.dbsight.com
> > Lucene Database Search in 3 minutes:
> >
> > http://wiki.dbsight.com/index.php?title=3DCreate_Lucene_Database_Search=
_in_3_minutes
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29501-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 30 21:04:49 2007
Return-Path: <java-user-return-29501-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98220 invoked from network); 30 Jul 2007 21:04:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2007 21:04:46 -0000
Received: (qmail 16840 invoked by uid 500); 30 Jul 2007 21:04:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16803 invoked by uid 500); 30 Jul 2007 21:04:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16792 invoked by uid 99); 30 Jul 2007 21:04:39 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 14:04:39 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.81.62.48] (HELO mail01.apmindsf.com) (64.81.62.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 21:04:34 +0000
Received: from [172.30.250.101] (helo=[172.30.250.101])
	by mail01.apmindsf.com with esmtp (Exim 4.50)
	id 1IFcPT-0001fl-G8
	for java-user@lucene.apache.org; Mon, 30 Jul 2007 14:04:12 -0700
Message-ID: <46AE552A.8010305@metaweb.com>
Date: Mon, 30 Jul 2007 14:16:26 -0700
From: Tim Sturge <tsturge@metaweb.com>
User-Agent: Mozilla Thunderbird 1.0.6 (X11/20050715)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: java gc with a frequently changing index?
References: <46A7995D.5030004@metaweb.com>	 <359a92830707281246h15a5c5c7i114ee410094c478a@mail.gmail.com>	 <46AE4A1E.3070907@metaweb.com>	 <ab0709bf0707301319mda3ef61t579cac1b1e5d2623@mail.gmail.com> <ab0709bf0707301323p1931d222naea731feae97d44@mail.gmail.com>
In-Reply-To: <ab0709bf0707301323p1931d222naea731feae97d44@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Oh, yeah, I know now :-).  But I really do have a requirement to show 
search results from items that came in 5 seconds ago. We have an 
application where a common usage pattern is

add an item
navigate to another item
search for the first item (to associate it with the second item)

and the gap between step 1 and step 3 is not very long.

Right now, I get a notification within a few hundred msec that the item 
has been added. I just don't see why it is hard (in theory anyway, 
lucene's implementation notwithstanding) to put that on the end of the 
index I'm currently searching. I have lots of CPU available.

Can you tell me the JIRA issue? What kind of patch would lucene devs be 
likely to accept (do I need to get it 100% done, or is 80% of the way 
interesting?)

Tim

Mark Miller wrote:
> And by the way, I cannot see it ever making sense to keep reopening an index
> reader every second or so. It has to be MUCH more efficient to even wait
> every 2 or 4 seconds...even that is going to be pretty nasty, but you have
> to allow for a bit of batch man. You will waste so much time opening those
> readers that its not going to be real-time anyway. You are just going to be
> in a world of slow.
>
> On 7/30/07, Mark Miller <markrmiller@gmail.com> wrote:
>   
>> I believe there is an issue in JIRA that handles reopening an IndexReader
>> without reopening segments that have not changed.
>>
>> On 7/30/07, Tim Sturge < tsturge@metaweb.com> wrote:
>>     
>>> Thanks for the reply Erick,
>>>
>>> I believe it is the gc for four reasons:
>>>
>>> - I've tried the "warmup" approach alredy and it didn't change the
>>> situation.
>>>
>>> - The server completely pauses for several seconds. I run jstack to find
>>> out where the pause is, and it also pauses for several seconds before
>>> telling me the server is doing something perfectly innocuous. If I was
>>> stuck in some search overhead, I would expect jstack to tell me where
>>> (and I would expect the where to be somewhere interesting and vaguely
>>> repeatable)
>>>
>>> - The impact is very uneven. Over 50000 queries (sequentially) I get
>>> 49500 at 3 msec, 450 at 300 msec and 50 at 3 sec or more (ouch). I
>>> really would be much happier with a consistent 10msec (which adds up to
>>> the same amount of time in total) or even 25msec
>>>
>>> - "-XX:+UseConcMarkSweepGC -XX:+UseParNewGC" changes the pauses (I get
>>> 100 msec and 1 sec pauses instead, but 5x as many for slower overall
>>> time; 1 sec is far too slow)
>>>
>>> Your solution looks possible, but seems really too complex for what I am
>>> trying to do (which is basic incremental update). What I really am
>>> looking for is a way to avoid reopening the first segment of my FSDir. I
>>>
>>> have a single 6G segment, and then another 20-50 segments with updates,
>>> but they are <100M in total size. So if I could have lucene open just
>>> the segments file and the new or changed *.del and *.cfs files (without
>>> reopening the unchanged *.cfs files) that would be a huge win for me I
>>> think.
>>>
>>> It strikes me this should be possible with a thin but complex layer
>>> between the SegmentReader and MultiReader, and perhaps a way to get
>>> SegmentReader to update what *.del file it is using. I'm just curious
>>> why this doesn't already exist.
>>>
>>> Tim
>>>
>>> Erick Erickson wrote:
>>>       
>>>> Why do you believe that it's the gc? I admit i just scanned your
>>>> e-mail, but I *do* know that the first search (especially sorts) on
>>>> a newly-opened IndexReader incure a bunch of overhead. Could
>>>> that be what you're seeing?
>>>>
>>>> I'm not sure there is a "best practice", but I have seen two
>>>> solutions mentioned, both more complex than opening/closing
>>>> the reader.
>>>> 1> open the reader in the background, fire a few "warmup" queries
>>>> at it, then switch it with the one you actually use to answer queries.
>>>>         
>>>> 2> Use a RAMDirectory to hold your new entries for some period
>>>> of time. You'd have to do some fancy dancing to keep this straight
>>>> since you're updating documents, but it might be viable. The scheme
>>>> is something like
>>>> Open your FSDIR
>>>> Open a RAMdir.
>>>>
>>>> Add all new documents to BOTH of them. When servicing a query,
>>>> look in both indexes, but you only open/close the RAMdir for
>>>> every query. Note that since, when you open a reader, it
>>>> takes a snapshot of the index, these two views will be disjoint. When
>>>>         
>>> you
>>>       
>>>> get your results back, you'll have to do something about the documents
>>>>         
>>>> from the FSdir that have been replaced in the RAMdir, which is where
>>>> the fancy dancing part comes in. But I leave that as an exercise for
>>>> the reader.
>>>>
>>>> Periodically, shut everything down and repeat. The point here is that
>>>> you can (probably) close/open your RAMdir with very small costs and
>>>> have the whole thing be up to date.
>>>>
>>>> There'll be some coordination issues, and you'll have to cope with
>>>>         
>>> data
>>>       
>>>> integrity if your process barfs before you've closed your FSDir....
>>>>
>>>> Or, you could ask whether 5 seconds is really necessary.I've seen a
>>>>         
>>> lot
>>>       
>>>> of times when "real time" could be 5 minutes and nobody would really
>>>> complain, and other times when it really is critical. But that's
>>>>         
>>> between you
>>>       
>>>> and our Product Manager....
>>>>
>>>> Hope this helps
>>>> Erick
>>>>
>>>> On 7/25/07, Tim Sturge <tsturge@metaweb.com> wrote:
>>>>
>>>>         
>>>>> Hi,
>>>>>
>>>>> I am indexing a set of constantly changing documents. The change rate
>>>>>           
>>> is
>>>       
>>>>> moderate (about 10 docs/sec over a 10M document collection with a 6G
>>>>> total size) but I want to be  right up to date (ideally within a
>>>>>           
>>> second
>>>       
>>>>> but within 5 seconds is acceptable) with the index.
>>>>>
>>>>> Right now I have code that adds new documents to the index and
>>>>>           
>>> deletes
>>>       
>>>>> old ones using updateDocument() in the 2.1 IndexWriter. In order to
>>>>>           
>>> see
>>>       
>>>>> the changes, I need to recreate the IndexReader/IndexSearcher every
>>>>> second or so. I am not calling optimize() on the index in the writer,
>>>>> and the mergeFactor is 10.
>>>>>
>>>>> The problem I am facing is that java gc is terrible at collecting the
>>>>>           
>>>>> IndexSearchers I am discarding. I usually have a 3msec query time,
>>>>>           
>>> but I
>>>       
>>>>> get gc pauses of 300msec to 3 sec (I assume is is collecting the
>>>>> "tenured" generation in these pauses, which is my old IndexSearcher)
>>>>>
>>>>> I've tried "-Xincgc", "-XX:+UseConcMarkSweepGC -XX:+UseParNewGC" and
>>>>> calling System.gc() right after I close the old index without much
>>>>>           
>>> luck
>>>       
>>>>> (I get the pauses down to 1sec, but get 3x as many. I want < 25 msec
>>>>> pauses). So my question is, should I be avoiding reloading my index
>>>>>           
>>> in
>>>       
>>>>> this way? Should I keep a separate IndexReader (which only deletes
>>>>>           
>>> old
>>>       
>>>>> documents) and one for new documents? Is there a standard technique
>>>>>           
>>> for
>>>       
>>>>> a quickly changing index?
>>>>>
>>>>> Thanks,
>>>>>
>>>>> Tim
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>
>>>>>           
>>>>         
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>       
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29502-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 30 21:26:08 2007
Return-Path: <java-user-return-29502-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3258 invoked from network); 30 Jul 2007 21:26:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2007 21:26:06 -0000
Received: (qmail 56181 invoked by uid 500); 30 Jul 2007 21:25:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56137 invoked by uid 500); 30 Jul 2007 21:25:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56122 invoked by uid 99); 30 Jul 2007 21:25:57 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 14:25:57 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [128.218.33.11] (HELO gossamer.ckm.ucsf.edu) (128.218.33.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 21:25:49 +0000
Received: from CKMPC08 (tikal.library.ucsf.edu [128.218.15.151])
	by gossamer.ckm.ucsf.edu (8.13.8/8.13.8) with ESMTP id l6ULPPiZ020657
	for <java-user@lucene.apache.org>; Mon, 30 Jul 2007 14:25:28 -0700 (PDT)
From: "Renaud Waldura" <renaud.waldura@library.ucsf.edu>
To: <java-user@lucene.apache.org>
Subject: RE: a question for french analyzer
Date: Mon, 30 Jul 2007 14:25:20 -0700
Message-ID: <009c01c7d2f0$2501fde0$970fda80@libraria.ucsf.edu>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="windows-1258"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <6e3ae6310707301336w6fe01895w4dc5319783c3f666@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
thread-index: AcfS6WIx8QR+nmucTIK7OkCrNZIh7AABXQ/A
X-Filter-Version: 1.15 (gossamer)
X-Virus-Checked: Checked by ClamAV on apache.org

Being a French speaker, I will mention the following special cases:

- "plus =E7a change" -> "plus ca change"
- "=9Cuf" -> "oeuf"
- "l=E6titia" -> "laetitia"

But I just looked, and it looks like ISOLatin1AccentFilter handles =
these.
Better test to be sure...

--Renaud
=20

-----Original Message-----
From: Chris Lu [mailto:chris.lu@gmail.com]=20
Sent: Monday, July 30, 2007 1:36 PM
To: java-user@lucene.apache.org
Subject: Re: a question for french analyzer

Hi, Erick,

I added ISOLatin1AccentFilter to FrenchAnalyzer following Samir's tip, =
and
it works great! And I think it's the right way to go. Problems like "You
have to store the data raw for display purposes if you want the accents =
to
show though" will go away since Analyzer already have the original text =
and
analyzed token mechanism built-in. And it's pretty easy to do!

However, is there any special case that you have? Not really knowing =
French,
I only tested one word, "fen=EAtre", and it's analyzed into "fenetre".

--
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=3DCreate_Lucene_Database_Search_i=
n_3_m
inutes


On 7/30/07, Erick Erickson <erickerickson@gmail.com> wrote:
> Gosh, I sure hope not, because that would mean that we rolled our
> own for no good reason. We wound up just collapsing
> the input stream by substituting plain old 'e' for all the accented
> variants before indexing and before searching. Be *really* careful
> what character set you're using.
>
> Actually, we would have still had to roll our own because the
> character mapping was...er...wonky <G>....
>
> You have to store the data raw for display purposes if you want the
> accents to show though...
>
> Best
> Erick
>
> On 7/30/07, Chris Lu <chris.lu@gmail.com> wrote:
> >
> > Hi,
> >
> > I am not a French speaker, but here are some questions regarding
> > French analyzer:
> >
> > Is there any analyzer that can do this? Analyze accentuated letters =
to
> > non accentuated corresponding letters (=E9,=E8,=EA,=EB -> e), so =
that
> >
> > search "fen=EAtre" (=3Dwindow) found all docs with "fen=EAtre" or =
"fenetre"
> > and
> > search "fenetre" found the same result, all docs with "fen=EAtre" or
> > "fenetre"
> >
> > Current analyzers, Snowball-French and FrenchAnalyzer don't have =
this
> > feature.
> >
> > --
> > Chris Lu
> > -------------------------
> > Instant Scalable Full-Text Search On Any Database/Application
> > site: http://www.dbsight.net
> > demo: http://search.dbsight.com
> > Lucene Database Search in 3 minutes:
> >
> >
http://wiki.dbsight.com/index.php?title=3DCreate_Lucene_Database_Search_i=
n_3_m
inutes
> >
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29503-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 30 21:26:35 2007
Return-Path: <java-user-return-29503-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3392 invoked from network); 30 Jul 2007 21:26:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2007 21:26:33 -0000
Received: (qmail 59009 invoked by uid 500); 30 Jul 2007 21:26:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58964 invoked by uid 500); 30 Jul 2007 21:26:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58952 invoked by uid 99); 30 Jul 2007 21:26:26 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 14:26:26 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jattardi@gmail.com designates 64.233.162.233 as permitted sender)
Received: from [64.233.162.233] (HELO nz-out-0506.google.com) (64.233.162.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 21:26:20 +0000
Received: by nz-out-0506.google.com with SMTP id i28so964157nzi
        for <java-user@lucene.apache.org>; Mon, 30 Jul 2007 14:25:59 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=S+COLQwcB0mWsvvwPUzyIwmp3f3uUQm3jZwzPj/ZBspli+r/6sEFopEf18R2vIqqiepLDBY54TKiQ8GCccWcwp73S6OessXrquf6JVJ2xgZSccttw1jch8sIFfm1hvVYZmpCFYqZ7gyQ+YkttBvgaDSN90NQ13rv+M1YKKiDxQY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=tMtEjDAXtzhm3JX4JGkFVlZULm/iKGtTHJsqHlEuhbJ1bPebLftVZ/7z24OTizJppr4iL8aZq1vyumTw6GyXJDjjCEpT/fOHlc+3gcCBxFqvXmmspvP7yLME9EsYIMK2cqUrkCNiPCb2rspdIbMSdtFDuMp3UULJ7rtKVktGpDM=
Received: by 10.114.58.1 with SMTP id g1mr6008703waa.1185830758901;
        Mon, 30 Jul 2007 14:25:58 -0700 (PDT)
Received: by 10.114.121.8 with HTTP; Mon, 30 Jul 2007 14:25:58 -0700 (PDT)
Message-ID: <7a14509e0707301425j1ae8626fkf7c5126ac5b86fc8@mail.gmail.com>
Date: Mon, 30 Jul 2007 17:25:58 -0400
From: "Joe Attardi" <jattardi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Running query text through an Analyzer without QueryParser?
In-Reply-To: <A955EA1F8FE31749AEC8C998082F6C7C01AC126A@hai01.hippo.local>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_27655_9925027.1185830758873"
References: <A955EA1F8FE31749AEC8C998082F6C7C01AC126A@hai01.hippo.local>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_27655_9925027.1185830758873
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

What about the case where I want to search a MAC address? For example,
00:14:da:81:21:4f will be split by the StandardTokenizer as the tokens
"00", "14", "da", "81", "21", and "4f".

Suppose I want to search for 00:14:da:81:21:4f. In the search box, I type
00:14:da:81:21:4f. But because these are all separate tokens, it would still
find a match if it had all the tokens but in a different order - for
example, that query would also find a MAC of da:14:4f:21:00:81. Is there
some way to enforce the order in which terms appear, or should I just index
a MAC address as UN_TOKENIZED ?

Thanks

-- 
Joe Attardi
jattardi@gmail.com
http://thinksincode.blogspot.com/

On 7/30/07, Ard Schrijvers <a.schrijvers@hippo.nl> wrote:
>
>
> >
> > So then would I just concatenate the tokens together to form
> > the query text?
>
> You might better create a TermQuery for each token instead of
> concatenating, and combine them in a BooleanQuery and say wether all terms
> must or should occur. Very simple, see [1]
>
> Regards Ard
>
> [1]
> http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/javadoc/org/apache/lucene/search/BooleanQuery.html
>
> >
> > --
> > Joe Attardi
> > jattardi@gmail.com
> > http://thinksincode.blogspot.com/
> >
> > On 7/30/07, Erick Erickson <erickerickson@gmail.com> wrote:
> > >
> > > Would this work?
> > >
> > > TokenStream ts =  StandardAnalyzer.tokenStream();
> > > while ((Token tok = ts.next()) != null) {
> > >     do whatever
> > > }
> > >
> > > Best
> > > Erick
> > >
> > > On 7/30/07, Joe Attardi <jattardi@gmail.com> wrote:
> > > >
> > > > Following up on my recent question. It has been suggested
> > to me that I
> > > can
> > > > run the query text through an Analyzer without using the
> > QueryParser.
> > > For
> > > > example, if I know what field to be searched I can create
> > a PrefixQuery
> > > or
> > > > WildcardQuery, but still want to process the search text
> > with the same
> > > > Analyzer that did the indexing. How do I run a query
> > through an Analyzer
> > > > without using the QueryParser... is this possible?
> > > >
> > >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_27655_9925027.1185830758873--

From java-user-return-29504-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 30 22:50:17 2007
Return-Path: <java-user-return-29504-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31300 invoked from network); 30 Jul 2007 22:50:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2007 22:50:16 -0000
Received: (qmail 37735 invoked by uid 500); 30 Jul 2007 22:50:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37692 invoked by uid 500); 30 Jul 2007 22:50:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37681 invoked by uid 99); 30 Jul 2007 22:50:08 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 15:50:08 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [213.9.79.74] (HELO box7974.elkhouse.de) (213.9.79.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 22:50:00 +0000
Received: from [192.168.0.135] (d041219.adsl.hansenet.de [::ffff:80.171.41.219])
  (AUTH: LOGIN kroepke@classdump.org, TLS: TLSv1/SSLv3,128bits,AES128-SHA)
  by box7974.elkhouse.de with esmtp; Tue, 31 Jul 2007 00:49:37 +0200
  id 0700A3A4.46AE6B01.00001670
In-Reply-To: <46A7995D.5030004@metaweb.com>
References: <46A7995D.5030004@metaweb.com>
Mime-Version: 1.0 (Apple Message framework v752.3)
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <1BB79753-3544-4320-8490-CBAE21BC25CE@classdump.org>
Cc: java-user@lucene.apache.org
Content-Transfer-Encoding: quoted-printable
From: Kay Roepke <kroepke@classdump.org>
Subject: Re: java gc with a frequently changing index?
Date: Tue, 31 Jul 2007 00:48:22 +0200
To: Tim Sturge <tsturge@metaweb.com>
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Tim!

On Jul 25, 2007, at 8:41 PM, Tim Sturge wrote:

> I am indexing a set of constantly changing documents. The change =20
> rate is moderate (about 10 docs/sec over a 10M document collection =20
> with a 6G total size) but I want to be  right up to date (ideally =20
> within a second but within 5 seconds is acceptable) with the index.

We have a change rate between 2-3 to 60 docs/sec over a bit smaller =20
index (but not too much smaller). We are actually reopening =20
IndexSearchers every five seconds or if the amount of index changes =20
exceeds a certain threshold (100 changes IIRC). The latter is to =20
guard against spikes in updates we like to see reflected earlier. =20
This is purely an implementation detail, though.

> Right now I have code that adds new documents to the index and =20
> deletes old ones using updateDocument() in the 2.1 IndexWriter. In =20
> order to see the changes, I need to recreate the IndexReader/=20
> IndexSearcher every second or so. I am not calling optimize() on =20
> the index in the writer, and the mergeFactor is 10.

Is there a separation between the code that inserts/updates and the =20
one that searches? We have that distinction and it's been working =20
great. Might not possible for your application (I simply don't know =20
what your objectives are) but might be worth considering. In other =20
words we have separate VMs doing the updates and searches, so we can =20
set different heap sizes and GC strategies.

> The problem I am facing is that java gc is terrible at collecting =20
> the IndexSearchers I am discarding. I usually have a 3msec query =20
> time, but I get gc pauses of 300msec to 3 sec (I assume is is =20
> collecting the "tenured" generation in these pauses, which is my =20
> old IndexSearcher)

We used to have that, too, until we switched GC algorithms. It was =20
unbearable.

> I've tried "-Xincgc", "-XX:+UseConcMarkSweepGC -XX:+UseParNewGC" =20
> and calling System.gc() right after I close the old index without =20
> much luck (I get the pauses down to 1sec, but get 3x as many. I =20
> want < 25 msec pauses). So my question is, should I be avoiding =20
> reloading my index in this way? Should I keep a separate =20
> IndexReader (which only deletes old documents) and one for new =20
> documents? Is there a standard technique for a quickly changing index?

So, these are the settings we use for the search application (this is =20=

Java 6, though, YMMV):
-XX:+UseConcMarkSweepGC
-XX:+CMSIncrementalMode
-XX:+CMSIncrementalPacing
-XX:CMSIncrementalDutyCycleMin=3D0
-XX:CMSIncrementalDutyCycle=3D10

You might have to tweak the generation sizes for your application. =20
That is rather tricky business, but
-verbosegc
-XX:+PrintGCDetails
-XX:+PrintGCTimeStamps

might help you to figure out what the correct sizes are. Those =20
settings should also tell you whether your tweaks are actually =20
working for you.
Systems.gc() is just asking for trouble, really. I have yet to see a =20
situation where it really helped me. The best way is to figure out =20
the right settings for the GC itself, and then forget about it. It =20
actually took some experimenting and load-testing to find the right =20
mixture for us.

GC pauses aren't user-noticable in our application (which is web-=20
based). Given our architecture we have a certain amount of latency =20
between a document change and the reflection of that in the index, =20
but it is not limited by GC. The machines are 64bit P4 Xeons with 4GB =20=

RAM, so nothing out of the ordinary.
Java 6 made a noticable difference for us, on the order of some 10% =20
performance increase, both in load average and response time.
We have yet to encounter problems with it...

The updating part of the application runs with a simple -XX:=20
+UseParallelGC and its max heap size is much smaller.

Also we are using a custom refcounted scheme for index searchers, so =20
that new requests always get the latest IndexSearcher opened. We =20
reopen searchers constantly, as I mentioned above. This pretty much =20
ensures that we meet our 5 second max delay time. I cannot say that =20
it actually takes that long to reopen, though we have made some =20
modifications to the Lucene core which should make it even slower to =20
reopen and write to disc. So I guess this is not your bottleneck, =20
either.

HTH,
-k
--=20
Kay R=F6pke
http://classdump.org/





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29505-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 30 23:48:16 2007
Return-Path: <java-user-return-29505-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62427 invoked from network); 30 Jul 2007 23:48:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2007 23:48:15 -0000
Received: (qmail 18086 invoked by uid 500); 30 Jul 2007 23:48:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18045 invoked by uid 500); 30 Jul 2007 23:48:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18034 invoked by uid 99); 30 Jul 2007 23:48:09 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 16:48:09 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.189 as permitted sender)
Received: from [209.85.128.189] (HELO fk-out-0910.google.com) (209.85.128.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 23:48:05 +0000
Received: by fk-out-0910.google.com with SMTP id z23so261771fkz
        for <java-user@lucene.apache.org>; Mon, 30 Jul 2007 16:47:44 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=tWpuyGKSaX1UfKwEIwJE0UUZvJex+gM+/gH5lkiftoytuTO+R3Ci1QCteB/O1N2CtpyrtDLi7jOz5IF0LMHP3ZdZxiAM/8/vJ4BOAAFwHAoRTGummDDCUxRTHcg23GaAJ+M9Th8TRsSsIDovgEpnrlG01JB0hm1aJLZpjbzbNZs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=OTjglYCbadDvkcFK0T7fG1heox4xrQ+KzSpIFyt30mPPsPQNntjzwgy9vqa4WwbTyHBHm3O96t86VW+zw1bSOviW3YbkXpqx9Drx2Mb1wxz05wEyeWRMc/KXot/ziln0c1wuILyje04VZSNA1rWRk47VjCOVxHbXAxszRmVT3Ws=
Received: by 10.82.152.16 with SMTP id z16mr4984733bud.1185839264200;
        Mon, 30 Jul 2007 16:47:44 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Mon, 30 Jul 2007 16:47:44 -0700 (PDT)
Message-ID: <359a92830707301647i61e3a82fw80321328ec6be49b@mail.gmail.com>
Date: Mon, 30 Jul 2007 19:47:44 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Maximum phrase query?
In-Reply-To: <E9DD5BE59E84CA4E87AE0E5E6F1B8B122A2708@sbsrv.AALabs.local>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_24428_16437102.1185839264177"
References: <E9DD5BE59E84CA4E87AE0E5E6F1B8B122A2708@sbsrv.AALabs.local>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_24428_16437102.1185839264177
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

not that I know of....

Erick

On 7/30/07, Max Metral <max@artsalliancelabs.com> wrote:
>
> I have a set of tags associated with content in my corpus.  I also have
> normal text.  Our system tries to figure out which "words" are tags and
> which are text, and falls back on text when tags fail.  I'm wondering,
> is there anything in Lucene which might help disambiguate multi-word
> tags from text?  Specific example:
>
>
>
> Tags: "post office", "office"
>
>
>
> Search: post office mail
>
>
>
> In this case, I would like something that would indicate that the search
> could be one of (in scored order):
>
>
>
> "post office" + mail
>
> post + office + mail
>
>
>
> I realize it's a strange request and that I'm essentially asking Lucene
> to perform a combinatorically problematic operation.
>
>
>
> --Max
>
>

------=_Part_24428_16437102.1185839264177--

From java-user-return-29506-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 31 00:06:11 2007
Return-Path: <java-user-return-29506-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66752 invoked from network); 31 Jul 2007 00:06:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jul 2007 00:06:10 -0000
Received: (qmail 46709 invoked by uid 500); 31 Jul 2007 00:05:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38926 invoked by uid 500); 31 Jul 2007 00:03:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35261 invoked by uid 99); 31 Jul 2007 00:02:14 -0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of erickerickson@gmail.com designates 209.85.128.188 as permitted sender)
Received: from [209.85.128.188] (HELO fk-out-0910.google.com) (209.85.128.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 17:02:07 -0700
Received: by fk-out-0910.google.com with SMTP id z23so264008fkz
        for <java-user@lucene.apache.org>; Mon, 30 Jul 2007 17:01:09 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=r0Nc83a8qCdJ4uvSpAs4MjvrCnRa0v9F/P98q/8GVngnzwRDSa1d70m75uTxjqSzKdAxpBJa0uva3rcuWussQxAMzH1vFNcmfnNsE96NietbwhugcRLOwzXBZuWm1m+7RofsrxQnl0yySk5xOapHeVyQZ+GyzGYMRQul34mGU/U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=d78uCZcYfktOTXcnnPZQz5Cf5ceHb5OsRsPFmKm5Svjikh8A82qZx125Nm9wS/R3wVLQ3nImmZhO/sz5DKUTgtzUn1Bbot+Fk3zGRE2GGeQPlBBdsWJiJ2726ol7VwOBhuKl02iokT34mgzOrSQgPkY1oa8bT/wAABqBSGzRsPQ=
Received: by 10.82.152.16 with SMTP id z16mr4986845bud.1185840069511;
        Mon, 30 Jul 2007 17:01:09 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Mon, 30 Jul 2007 17:01:09 -0700 (PDT)
Message-ID: <359a92830707301701q49ae063an9981dd9a6a899e47@mail.gmail.com>
Date: Mon, 30 Jul 2007 20:01:09 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Running query text through an Analyzer without QueryParser?
In-Reply-To: <7a14509e0707301425j1ae8626fkf7c5126ac5b86fc8@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_24596_1154203.1185840069367"
References: <A955EA1F8FE31749AEC8C998082F6C7C01AC126A@hai01.hippo.local>
	 <7a14509e0707301425j1ae8626fkf7c5126ac5b86fc8@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_24596_1154203.1185840069367
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

*SpanNearQuery<file:///C:/lucene-2.1.0/docs/api/org/apache/lucene/search/spans/SpanNearQuery.html#SpanNearQuery%28org.apache.lucene.search.spans.SpanQuery%5B%5D,%20int,%20boolean%29>
*(SpanQuery<file:///C:/lucene-2.1.0/docs/api/org/apache/lucene/search/spans/SpanQuery.html>[]
clauses,
int slop, boolean inOrder)

Erick

On 7/30/07, Joe Attardi <jattardi@gmail.com> wrote:
>
> What about the case where I want to search a MAC address? For example,
> 00:14:da:81:21:4f will be split by the StandardTokenizer as the tokens
> "00", "14", "da", "81", "21", and "4f".
>
> Suppose I want to search for 00:14:da:81:21:4f. In the search box, I type
> 00:14:da:81:21:4f. But because these are all separate tokens, it would
> still
> find a match if it had all the tokens but in a different order - for
> example, that query would also find a MAC of da:14:4f:21:00:81. Is there
> some way to enforce the order in which terms appear, or should I just
> index
> a MAC address as UN_TOKENIZED ?
>
> Thanks
>
> --
> Joe Attardi
> jattardi@gmail.com
> http://thinksincode.blogspot.com/
>
> On 7/30/07, Ard Schrijvers <a.schrijvers@hippo.nl> wrote:
> >
> >
> > >
> > > So then would I just concatenate the tokens together to form
> > > the query text?
> >
> > You might better create a TermQuery for each token instead of
> > concatenating, and combine them in a BooleanQuery and say wether all
> terms
> > must or should occur. Very simple, see [1]
> >
> > Regards Ard
> >
> > [1]
> >
> http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/javadoc/org/apache/lucene/search/BooleanQuery.html
> >
> > >
> > > --
> > > Joe Attardi
> > > jattardi@gmail.com
> > > http://thinksincode.blogspot.com/
> > >
> > > On 7/30/07, Erick Erickson <erickerickson@gmail.com> wrote:
> > > >
> > > > Would this work?
> > > >
> > > > TokenStream ts =  StandardAnalyzer.tokenStream();
> > > > while ((Token tok = ts.next()) != null) {
> > > >     do whatever
> > > > }
> > > >
> > > > Best
> > > > Erick
> > > >
> > > > On 7/30/07, Joe Attardi <jattardi@gmail.com> wrote:
> > > > >
> > > > > Following up on my recent question. It has been suggested
> > > to me that I
> > > > can
> > > > > run the query text through an Analyzer without using the
> > > QueryParser.
> > > > For
> > > > > example, if I know what field to be searched I can create
> > > a PrefixQuery
> > > > or
> > > > > WildcardQuery, but still want to process the search text
> > > with the same
> > > > > Analyzer that did the indexing. How do I run a query
> > > through an Analyzer
> > > > > without using the QueryParser... is this possible?
> > > > >
> > > >
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_24596_1154203.1185840069367--

From java-user-return-29507-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 31 00:14:04 2007
Return-Path: <java-user-return-29507-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69078 invoked from network); 31 Jul 2007 00:14:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jul 2007 00:14:02 -0000
Received: (qmail 68334 invoked by uid 500); 31 Jul 2007 00:13:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67792 invoked by uid 500); 31 Jul 2007 00:13:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67781 invoked by uid 99); 31 Jul 2007 00:13:56 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 17:13:56 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.188 as permitted sender)
Received: from [209.85.128.188] (HELO fk-out-0910.google.com) (209.85.128.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 00:13:48 +0000
Received: by fk-out-0910.google.com with SMTP id z23so265906fkz
        for <java-user@lucene.apache.org>; Mon, 30 Jul 2007 17:13:27 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=kibWG3gnyDsvny/eFvuNlnHLcLsJBZA/bQ/HWBcxUqI7v8b0VN+K5pl+Or8xq+9I5GOXAVxL1h1H5Q4wVPP2FsHv6nPOGXbDdhjZJboL5IourYMpaJnhzLFE5YPgkfooT9CHDtcE2AvGzLLnUK/I9W5JPAmZXbySoojWqtksR8w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=bSwj5VO0mx1FItQfRc+wu6F6CAXCppAjjG4KgsUZjo0XQ9BpE4gpUbS5Ugjq+Yk3h9lEThYtgSPLT7gOtVd9v8UAdAL8oFPeW9SRNXT1Brwy515eg6CP26dKhE0H9MtE1GbktqwOMy8JltV7CRQPDyVqUl99zt2P0m+flAeh+Jw=
Received: by 10.82.181.10 with SMTP id d10mr4979589buf.1185840807253;
        Mon, 30 Jul 2007 17:13:27 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Mon, 30 Jul 2007 17:13:27 -0700 (PDT)
Message-ID: <359a92830707301713u5d1de969rdef54991bcb2aa44@mail.gmail.com>
Date: Mon, 30 Jul 2007 20:13:27 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: a question for french analyzer
In-Reply-To: <6e3ae6310707301336w6fe01895w4dc5319783c3f666@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_24736_5090720.1185840807206"
References: <6e3ae6310707301106p175e85dmfb9d6724ac0f9851@mail.gmail.com>
	 <359a92830707301118k2abb67a3we47ea024b249ac80@mail.gmail.com>
	 <6e3ae6310707301336w6fe01895w4dc5319783c3f666@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_24736_5090720.1185840807206
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

<<<However, is there any special case that you have?>>>

Yes, the character set we use is, as I remember,
MARC-8. Which I don't think is the ISOLatin....,
but since I didn't know about that filter when we had our problem,
I didn't even look. Oh well, smarter/braver/lazier next time <G>...

Which is why I love this list, I find things like this and look
smarter next time something similar comes up <G>.

Thanks
Erick

On 7/30/07, Chris Lu <chris.lu@gmail.com> wrote:
>
> Hi, Erick,
>
> I added ISOLatin1AccentFilter to FrenchAnalyzer following Samir's tip,
> and it works great! And I think it's the right way to go. Problems
> like "You have to store the data raw for display purposes if you want
> the accents to show though" will go away since Analyzer already have
> the original text and analyzed token mechanism built-in. And it's
> pretty easy to do!
>
> However, is there any special case that you have? Not really knowing
> French, I only tested one word, "fen=EAtre", and it's analyzed into
> "fenetre".
>
> --
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
> Lucene Database Search in 3 minutes:
>
> http://wiki.dbsight.com/index.php?title=3DCreate_Lucene_Database_Search_i=
n_3_minutes
>
>
> On 7/30/07, Erick Erickson <erickerickson@gmail.com> wrote:
> > Gosh, I sure hope not, because that would mean that we rolled our
> > own for no good reason. We wound up just collapsing
> > the input stream by substituting plain old 'e' for all the accented
> > variants before indexing and before searching. Be *really* careful
> > what character set you're using.
> >
> > Actually, we would have still had to roll our own because the
> > character mapping was...er...wonky <G>....
> >
> > You have to store the data raw for display purposes if you want the
> > accents to show though...
> >
> > Best
> > Erick
> >
> > On 7/30/07, Chris Lu <chris.lu@gmail.com> wrote:
> > >
> > > Hi,
> > >
> > > I am not a French speaker, but here are some questions regarding
> > > French analyzer:
> > >
> > > Is there any analyzer that can do this? Analyze accentuated letters t=
o
> > > non accentuated corresponding letters (=E9,=E8,=EA,=EB -> e), so that
> > >
> > > search "fen=EAtre" (=3Dwindow) found all docs with "fen=EAtre" or "fe=
netre"
> > > and
> > > search "fenetre" found the same result, all docs with "fen=EAtre" or
> > > "fenetre"
> > >
> > > Current analyzers, Snowball-French and FrenchAnalyzer don't have this
> > > feature.
> > >
> > > --
> > > Chris Lu
> > > -------------------------
> > > Instant Scalable Full-Text Search On Any Database/Application
> > > site: http://www.dbsight.net
> > > demo: http://search.dbsight.com
> > > Lucene Database Search in 3 minutes:
> > >
> > >
> http://wiki.dbsight.com/index.php?title=3DCreate_Lucene_Database_Search_i=
n_3_minutes
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_24736_5090720.1185840807206--

From java-user-return-29508-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 31 03:24:59 2007
Return-Path: <java-user-return-29508-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10254 invoked from network); 31 Jul 2007 03:24:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jul 2007 03:24:58 -0000
Received: (qmail 54813 invoked by uid 500); 31 Jul 2007 03:24:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54777 invoked by uid 500); 31 Jul 2007 03:24:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54766 invoked by uid 99); 31 Jul 2007 03:24:52 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 20:24:52 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [60.52.184.45] (HELO mail.tecforte.com) (60.52.184.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 03:24:48 +0000
Received: from DFPYWL2S ([192.168.2.96]) by tecforte.com with MailEnable ESMTP; Tue, 31 Jul 2007 11:24:32 +0800
From: "Chew Yee Chuang" <yeechuang@tecforte.com>
To: <java-user@lucene.apache.org>
Subject: High CPU usage duing index and search
Date: Tue, 31 Jul 2007 11:25:15 +0800
Message-ID: <004201c7d322$69c8bae0$3d5a30a0$@com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0043_01C7D365.77EBFAE0"
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcfTImbeR8rGTgVIR3iJQ1mSWWYlSw==
Content-Language: en-us
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0043_01C7D365.77EBFAE0
Content-Type: text/plain;
	charset="windows-1250"
Content-Transfer-Encoding: 7bit

Greetings All,

 

I have been trying out Lucene recently and very happy with the search
performance. But just notice that when Lucene performing search or index,
the CPU usage on my machine raise to 100%, because of this issue, some of my
others backend process will slow down eventually. Just want to know does
anyone face this problem before ? and is it any idea on how to overcome this
problem ? Currently Im running Lucene in a machine with the following spec:-
Pentium D 3.00GHz, 2G Ram (allocate 1G for Java Heap space).

 

Any help would be appreciated.

Thanks

 

eChuang, Chew




No virus found in this outgoing message.
Checked by AVG Free Edition. 
Version: 7.5.476 / Virus Database: 269.11.0/927 - Release Date: 7/30/2007
5:02 PM
 

------=_NextPart_000_0043_01C7D365.77EBFAE0--



From java-user-return-29509-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 31 05:10:41 2007
Return-Path: <java-user-return-29509-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36909 invoked from network); 31 Jul 2007 05:10:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jul 2007 05:10:40 -0000
Received: (qmail 55030 invoked by uid 500); 31 Jul 2007 05:10:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54903 invoked by uid 500); 31 Jul 2007 05:10:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54892 invoked by uid 99); 31 Jul 2007 05:10:31 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 22:10:31 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of srinivas.apache@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 05:10:27 +0000
Received: by nf-out-0910.google.com with SMTP id d3so211316nfc
        for <java-user@lucene.apache.org>; Mon, 30 Jul 2007 22:10:06 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=ZZOoNN/KNNMOlErM6wpcSoxaQxz/4RcUphDqbiNMKY3warLwxjg83wjWv2AjYb5zDFP9zNRuixO8yv/uUctRy2QfsTzXyis2Rd+bXdS+5YSubKglhMtNo/3OhYTE0Wh39qbGnlHKtJsngdiLE2Dw/BS1l55042Z6zb2pCaT4mFo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=QlS4O1Hnw5iTNCRlUCo0mHMrFitacLafLg+oV6QaJvjXzETsiTAn+KeIkOeTu38iTnJltgaNoJ7KCFpVa3mB0O55Z6YKgCUCvdzpm2vw9KpRPbLxhmod5pIfLfT5fdid0jEfKgg2Ufk5bi1jW1LleUjLFFs+7jO1xYaS8Q0gUAs=
Received: by 10.78.138.14 with SMTP id l14mr1695814hud.1185858606302;
        Mon, 30 Jul 2007 22:10:06 -0700 (PDT)
Received: by 10.78.182.11 with HTTP; Mon, 30 Jul 2007 22:10:06 -0700 (PDT)
Message-ID: <b0ba206a0707302210s2b094344jf9e758b03da046c0@mail.gmail.com>
Date: Tue, 31 Jul 2007 10:40:06 +0530
From: "Srinivasarao Vundavalli" <srinivas.apache@gmail.com>
To: java-user@lucene.apache.org
Subject: Problem in Lucene
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_26612_11231837.1185858606284"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_26612_11231837.1185858606284
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
     I am using nutch index to search in lucene.  One of my classes use
makeStopTable method ( which is deprecated) of class  StopFilter  in
org.apache.lucene.analysis. When I run my program with lucene 2.1.0

~/j2sdk1.4.2/bin/java -classpath .:lucene-core-2.1.0.jar SearchFiles

Exception in thread "main" java.lang.NoSuchMethodError:
org.apache.lucene.analysis.StopFilter.makeStopTable
([Ljava/lang/String;)Ljava/util/Hashtable;
        at GenericLanguageAnalyzer.<init>(GenericLanguageAnalyzer.java:179)
        at SearchFiles.main(SearchFiles.java:110)

So, as that method(makeStopTable) is there in lucene 1.9.1 I run my program
using this version of lucene.

~/j2sdk1.4.2/bin/java -classpath .:lucene-core-1.9.1.jar SearchFiles

This gives me the following where crawl/index is my index directory.  If we
build the index with lucene, there will be a file called 'segments' in the
index directory. But the index i am using is built by nutch. It contains
'segments_3' and 'segments.gen'. So, it gives me the following exception.

Exception in thread "main" java.io.FileNotFoundException:
crawl/index/segments (No such file or directory)
        at java.io.RandomAccessFile.open(Native Method)
        at java.io.RandomAccessFile.<init>(RandomAccessFile.java:204)
        at org.apache.lucene.store.FSIndexInput$Descriptor.<init>(
FSDirectory.java:425)
        at org.apache.lucene.store.FSIndexInput.<init>(FSDirectory.java:434)
        at org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java
:324)
        at org.apache.lucene.index.SegmentInfos.read(SegmentInfos.java:45)
        at org.apache.lucene.index.IndexReader$1.doBody(IndexReader.java
:148)
        at org.apache.lucene.store.Lock$With.run(Lock.java:109)
        at org.apache.lucene.index.IndexReader.open(IndexReader.java:143)
        at org.apache.lucene.index.IndexReader.open(IndexReader.java:127)
        at SearchFiles.main(SearchFiles.java:103)

Please help me to get rid of this exception.
Thanx in advance

------=_Part_26612_11231837.1185858606284--

From java-user-return-29510-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 31 06:37:51 2007
Return-Path: <java-user-return-29510-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60685 invoked from network); 31 Jul 2007 06:37:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jul 2007 06:37:50 -0000
Received: (qmail 56981 invoked by uid 500); 31 Jul 2007 06:37:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56934 invoked by uid 500); 31 Jul 2007 06:37:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56923 invoked by uid 99); 31 Jul 2007 06:37:43 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jul 2007 23:37:43 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rsk.sen@gmail.com designates 209.85.146.176 as permitted sender)
Received: from [209.85.146.176] (HELO wa-out-1112.google.com) (209.85.146.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 06:37:40 +0000
Received: by wa-out-1112.google.com with SMTP id j40so2131565wah
        for <java-user@lucene.apache.org>; Mon, 30 Jul 2007 23:37:20 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=atNcc+dzg2SfBt6C5UHPDZSL1skCCB5bkXEN3pc7XR7KwW0fvP+WdhITjMjW4s2+QikqnsnZT3fP8jkWPOUZ9qvPCVe9EfVM6M1zr/ldAROEycVwmr/M1KwSw578jErTFIQ4JGn3Us08hkinZbf5iP9DUpXL3dw4rt63oV50NoQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=Nqfz3878D/KdSt+DkzrWKUUsC6yoi0n7CelntViPQT8LCrq+aZ/apylhM5escaBaqmf6fJOpb29n0ohmyUBYXuL4YfoIQ/OSlSwRQZMEvNpDCPfo7yNAHzJwnqE5Yfp+P+YVPkrydPmgcwLBnR41Z+d3xc3KCcVa1WLc6m3Tv00=
Received: by 10.114.209.1 with SMTP id h1mr6391052wag.1185863839936;
        Mon, 30 Jul 2007 23:37:19 -0700 (PDT)
Received: by 10.114.93.18 with HTTP; Mon, 30 Jul 2007 23:37:18 -0700 (PDT)
Message-ID: <4628d2a90707302337m13c6fd8aj456b3ee55b06070f@mail.gmail.com>
Date: Tue, 31 Jul 2007 12:07:18 +0530
From: "SK R" <rsk.sen@gmail.com>
To: java-user@lucene.apache.org
Subject: How to get FastAnalyzer?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_37295_8721639.1185863838749"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_37295_8721639.1185863838749
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
    During my search on alternative for StandardAnalyzer , I got some useful
information about JFlex based FastAnalyzer in this user-group. I tried to
get corresponding files from
https://issues.apache.org/jira/browse/LUCENE-966  . But they are in txt
format and how can i get and test that improved analyzer?(please provide the
steps)
    Also is there any known issues for usage of that analyzer?


Thanks & Regards
RSK

------=_Part_37295_8721639.1185863838749--

From java-user-return-29511-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 31 08:23:45 2007
Return-Path: <java-user-return-29511-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94603 invoked from network); 31 Jul 2007 08:23:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jul 2007 08:23:43 -0000
Received: (qmail 37911 invoked by uid 500); 31 Jul 2007 08:23:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37864 invoked by uid 500); 31 Jul 2007 08:23:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37840 invoked by uid 99); 31 Jul 2007 08:23:35 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 01:23:35 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FH_HELO_EQ_D_D_D_D,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [202.124.246.50] (HELO 202-124-246-50.dedsvrs.net) (202.124.246.50)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 08:23:29 +0000
Received: (qmail 27394 invoked from network); 31 Jul 2007 18:22:27 +1000
Received: from spectr11.lnk.telstra.net (HELO v) (165.228.154.97)
  by 202-124-246-50.dedsvrs.net with SMTP; 31 Jul 2007 18:22:27 +1000
From: "Vijay Santhanam" <vijay@spectrumwired.com>
To: <java-user@lucene.apache.org>
References: <1185835808.37787.ezmlm@lucene.apache.org>
In-Reply-To: <1185835808.37787.ezmlm@lucene.apache.org>
Subject: Exact field searches
Date: Tue, 31 Jul 2007 18:23:04 +1000
Message-ID: <011601c7d34c$0423d1a0$0c6b74e0$@com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcfS++mIXKgULI/qQ6Wxk4++3uNJgQAUAFlg
Content-Language: en-au
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Guys,

Currently I construct a PrefixQuery to exact search through an index of
documents that represent Compact Discs, something like www.discogs.com.

On the search page, we offer a suggestion list as the user enters text, like
google suggest.
When a user selects an item out of this list, we mark the search as being an
"exact" search, because they know what they want.

An exact search wraps the name of the disc in a PrefixQuery and performs the
search.

But, I'm getting some unwanted results and I'm not sure which solution
approach to use.

In our dataset, there are hundreds of CDs with single English word titles.
Like, "Pink" and "Dust" and "Walk" etc.

If the user selects the "Pink" from the suggestion list, then CDs with
titles like "Pink Sunset", "A Pink lady", "Pink McPinkington", "Tomorrow the
Pink" appear in the results (along with the CDs just titled "Pink").

Obviously, the PhraseQuery finds instances of that phrase in the title
field, but I need to somehow exclude those titles that have a different
number of tokens from the query.

How do I make search for a specific number of tokens in a field?

Thanks for your help,

Vijay Santhanam
B.Eng.(Soft.)
Spectrum Wired - Software Engineer

T: +61 2 4925 3266
F: +61 2 4925 3255
M: +61 407 525 087
W: www.spectrumwired.com 





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29512-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 31 10:00:41 2007
Return-Path: <java-user-return-29512-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27998 invoked from network); 31 Jul 2007 10:00:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jul 2007 10:00:36 -0000
Received: (qmail 45357 invoked by uid 500); 31 Jul 2007 10:00:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40952 invoked by uid 500); 31 Jul 2007 10:00:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37280 invoked by uid 99); 31 Jul 2007 09:59:16 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 02:59:16 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 209.85.134.189 as permitted sender)
Received: from [209.85.134.189] (HELO mu-out-0910.google.com) (209.85.134.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 09:58:38 +0000
Received: by mu-out-0910.google.com with SMTP id g7so1966633muf
        for <java-user@lucene.apache.org>; Tue, 31 Jul 2007 02:58:01 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=b5qSEV4aARQo8tzd8I5+p5g4IwNJT7shmj32d7FbqIYs4tK899QU6/2vdNKGRjtkSNFuTZ/BSrxjk2poSOCpowEvNmoDTfSe7D5pV3CLen43y4t40aG8CBqpbBC2IiKYgg4nXWBhxC31U+9rwKGCl4UQtS2j7VbSoBSQ9g4SMW0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=eH4i3ZVhhX1X5UxcO3IDSmXKR6G95R6RZQ5TaJSppEPtF66LIl7neKh789J/kguqVzD6tmvpgkYX1njyW0rCu84fbrePsZI0MUqGG62NgE1u5IZBWcbe+oDDb1g5aie561sNFI37TtXtcxPDIGFLpog8mu4HU2GDy1nyk+o4kZE=
Received: by 10.86.76.16 with SMTP id y16mr4578206fga.1185875880777;
        Tue, 31 Jul 2007 02:58:00 -0700 (PDT)
Received: from ?192.168.2.101? ( [83.249.110.50])
        by mx.google.com with ESMTPS id g8sm17558090muf.2007.07.31.02.58.00
        (version=TLSv1/SSLv3 cipher=OTHER);
        Tue, 31 Jul 2007 02:58:00 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <004201c7d322$69c8bae0$3d5a30a0$@com>
References: <004201c7d322$69c8bae0$3d5a30a0$@com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <4E0025CD-A1FF-44E4-8322-2A71F9F26332@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: High CPU usage duing index and search
Date: Tue, 31 Jul 2007 11:53:42 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


31 jul 2007 kl. 05.25 skrev Chew Yee Chuang:
> But just notice that when Lucene performing search or index,
> the CPU usage on my machine raise to 100%, because of this issue,  
> some of my
> others backend process will slow down eventually. Just want to know  
> does
> anyone face this problem before ? and is it any idea on how to  
> overcome this
> problem ?

Did you run a profiler to see what it is that consume all the resources?
It is very hard to guess based on the information you supplied. Start  
here:

http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/ImproveIndexingSpeed
http://wiki.apache.org/lucene-java/ImproveSearchingSpeed


-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29513-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 31 10:02:33 2007
Return-Path: <java-user-return-29513-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28943 invoked from network); 31 Jul 2007 10:02:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jul 2007 10:02:31 -0000
Received: (qmail 53902 invoked by uid 500); 31 Jul 2007 10:02:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53865 invoked by uid 500); 31 Jul 2007 10:02:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53854 invoked by uid 99); 31 Jul 2007 10:02:23 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 03:02:23 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [153.96.1.18] (HELO mailgw1.fraunhofer.de) (153.96.1.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 10:02:15 +0000
Received: from mailgw1.fraunhofer.de (localhost [127.0.0.1])
	by mailgw1.fraunhofer.de (8.13.5+/8.13.4) with ESMTP id l6VA1q72012498
	for <java-user@lucene.apache.org>; Tue, 31 Jul 2007 12:01:52 +0200 (CEST)
Received: from pluto.fokus.fraunhofer.de (pluto.fokus.fraunhofer.de [195.37.77.164])
	by mailgw1.fraunhofer.de (8.13.5+/8.13.4) with ESMTP id l6VA1paX012456
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=OK)
	for <java-user@lucene.apache.org>; Tue, 31 Jul 2007 12:01:52 +0200 (CEST)
Received: from EXCHSRV.fokus.fraunhofer.de (bohr [10.147.9.231])
	by pluto.fokus.fraunhofer.de (8.13.7/8.13.7) with SMTP id l6VA1pJ2027036
	for <java-user@lucene.apache.org>; Tue, 31 Jul 2007 12:01:51 +0200 (MEST)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Exact field searches
Date: Tue, 31 Jul 2007 12:02:02 +0200
Message-ID: <79C0EA6E7AD7CE4A85EDAF482B5456B2957131@EXCHSRV.fokus.fraunhofer.de>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Exact field searches
Thread-Index: AcfS++mIXKgULI/qQ6Wxk4++3uNJgQAUAFlgAAMCCyA=
From: "Steinert, Fabian" <Fabian.Steinert@fokus.fraunhofer.de>
To: <java-user@lucene.apache.org>
X-Fraunhofer-Email-Policy: accepted
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Vijay,

with a frequent usage pattern of searching (exactly) for a whole fields
value (e.g. the whole name) it may be worth to store that field (name:)
twice:

1) as field name_tokenized: with Field.Index.TOKENIZED for normal
"contains" querys and

2) as field name_untokenized: with Field.Index.UN_TOKENIZED for matching
complete content

>From the usage (user selects...) you will know which field to search.

Btw. as long as you want *exact* matches consider use of TermQuery
instead of PrefixQuery as a PrefixQuery for "Pink*" will of course yield
"Pinky" as well.

Best regards,
Fabian


-----Original Message-----
From: Vijay Santhanam [mailto:vijay@spectrumwired.com]=20
Sent: Dienstag, 31. Juli 2007 10:23
To: java-user@lucene.apache.org
Subject: Exact field searches

Hi Guys,

Currently I construct a PrefixQuery to exact search through an index of
documents that represent Compact Discs, something like www.discogs.com.

On the search page, we offer a suggestion list as the user enters text,
like
google suggest.
When a user selects an item out of this list, we mark the search as
being an
"exact" search, because they know what they want.

An exact search wraps the name of the disc in a PrefixQuery and performs
the
search.

But, I'm getting some unwanted results and I'm not sure which solution
approach to use.

In our dataset, there are hundreds of CDs with single English word
titles.
Like, "Pink" and "Dust" and "Walk" etc.

If the user selects the "Pink" from the suggestion list, then CDs with
titles like "Pink Sunset", "A Pink lady", "Pink McPinkington", "Tomorrow
the
Pink" appear in the results (along with the CDs just titled "Pink").

Obviously, the PhraseQuery finds instances of that phrase in the title
field, but I need to somehow exclude those titles that have a different
number of tokens from the query.

How do I make search for a specific number of tokens in a field?

Thanks for your help,

Vijay Santhanam
B.Eng.(Soft.)
Spectrum Wired - Software Engineer

T: +61 2 4925 3266
F: +61 2 4925 3255
M: +61 407 525 087
W: www.spectrumwired.com=20





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29514-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 31 10:03:29 2007
Return-Path: <java-user-return-29514-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29560 invoked from network); 31 Jul 2007 10:03:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jul 2007 10:03:27 -0000
Received: (qmail 56706 invoked by uid 500); 31 Jul 2007 10:03:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56675 invoked by uid 500); 31 Jul 2007 10:03:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56664 invoked by uid 99); 31 Jul 2007 10:03:20 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 03:03:20 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 10:03:15 +0000
Received: by nf-out-0910.google.com with SMTP id d3so228829nfc
        for <java-user@lucene.apache.org>; Tue, 31 Jul 2007 03:02:54 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=iCyO95EVdu6rpgdCqcwNadnxVKfNxi8gZeD45M/GR7xzZIGGGJOiBVCC1qXT4wgo/ZKmrBL3I3cxy3d+zvJOq0qUsSn9ogxnhwwOFR+vlhv6KF4yKt5pRjZh+xRsc33arA5BEDhaskIHJgrpyQ3EhWvIbaw/fpvs/NQ/1VYxO2w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=bYCXtfVzr5hB/RreZEGaKKadB6mWKUxEwRnDCTCIsglOt4evA6a/8HecrCranNOhmZdTxiQi02tbG4e9xSgLlulrFMqhcRaDc5a1WbFbhJkc+/6Y30+B3z0l1ReSQbbghC6TZynAG0ZIdFCdBt7HvxqXf7FAvVqGZ6fIAUrDXu0=
Received: by 10.86.68.16 with SMTP id q16mr4562435fga.1185876174574;
        Tue, 31 Jul 2007 03:02:54 -0700 (PDT)
Received: from ?192.168.2.101? ( [83.249.110.50])
        by mx.google.com with ESMTPS id w5sm17586892mue.2007.07.31.03.02.53
        (version=TLSv1/SSLv3 cipher=OTHER);
        Tue, 31 Jul 2007 03:02:53 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <4628d2a90707302337m13c6fd8aj456b3ee55b06070f@mail.gmail.com>
References: <4628d2a90707302337m13c6fd8aj456b3ee55b06070f@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <2F5A9356-6EBC-49AD-81D8-1C9464BC8AF7@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: How to get FastAnalyzer?
Date: Tue, 31 Jul 2007 11:58:36 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


31 jul 2007 kl. 08.37 skrev SK R:

> https://issues.apache.org/jira/browse/LUCENE-966  . But they are in  
> txt
> format and how can i get and test that improved analyzer?(please  
> provide the
> steps)

Those are patches created with "svn diff". You use "patch" to apply them
on the source code.

http://wiki.apache.org/lucene-java/PatchCheckList

>     Also is there any known issues for usage of that analyzer?

A thumb rule would be that anything in the Jira not committed,
is not recommended for production. But please test it and report
in the issue tracker how well it works for you.

-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29515-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 31 10:06:06 2007
Return-Path: <java-user-return-29515-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30917 invoked from network); 31 Jul 2007 10:06:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jul 2007 10:06:04 -0000
Received: (qmail 63600 invoked by uid 500); 31 Jul 2007 10:05:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63568 invoked by uid 500); 31 Jul 2007 10:05:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63556 invoked by uid 99); 31 Jul 2007 10:05:43 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 03:05:43 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 209.85.134.185 as permitted sender)
Received: from [209.85.134.185] (HELO mu-out-0910.google.com) (209.85.134.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 10:05:36 +0000
Received: by mu-out-0910.google.com with SMTP id g7so1968226muf
        for <java-user@lucene.apache.org>; Tue, 31 Jul 2007 03:05:15 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=iMSTTL7qdB6sQeIKw9nG395GhcYNhAiyh343iwsK5qU9qjyW6eiDHPX7aWcwIxLtBNmGtMnbVE6Dh558ajBA7FcIP62aZj7/3FtH4c7NRKwjkZPhUBHytlSwi3o1TEhk0f8tI6LD06mdw0oMOMTrfJ+EAXIcf/IRqlQV0KP04hU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=dJa37D/eL2qGD52x4zhxQ7Ye5RRAZ6WOGpupaQO/bGKjRJrxGl8JexGV8Sm58GMlB3roQp5HkQPVuMUUHdfpZeOU7S37vBrfNOrDUY5jemr/2PkColBI6/jjiohyas9btdlCi6uMzIebO79gsL/qVYDWjYvIbFrn19kWOM8c6aQ=
Received: by 10.86.81.8 with SMTP id e8mr4582558fgb.1185876315345;
        Tue, 31 Jul 2007 03:05:15 -0700 (PDT)
Received: from ?192.168.2.101? ( [83.249.110.50])
        by mx.google.com with ESMTPS id e8sm17556961muf.2007.07.31.03.05.14
        (version=TLSv1/SSLv3 cipher=OTHER);
        Tue, 31 Jul 2007 03:05:14 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <011601c7d34c$0423d1a0$0c6b74e0$@com>
References: <1185835808.37787.ezmlm@lucene.apache.org> <011601c7d34c$0423d1a0$0c6b74e0$@com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <BA13F0D6-E478-4E36-9EE1-2284E14390A5@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Exact field searches
Date: Tue, 31 Jul 2007 12:00:57 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


31 jul 2007 kl. 10.23 skrev Vijay Santhanam:

> How do I make search for a specific number of tokens in a field?

I think you are looking for SpanFirstQuery.

-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29516-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 31 10:21:02 2007
Return-Path: <java-user-return-29516-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34999 invoked from network); 31 Jul 2007 10:21:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jul 2007 10:21:02 -0000
Received: (qmail 95615 invoked by uid 500); 31 Jul 2007 10:20:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95581 invoked by uid 500); 31 Jul 2007 10:20:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95566 invoked by uid 99); 31 Jul 2007 10:20:53 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 03:20:53 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 209.85.134.187 as permitted sender)
Received: from [209.85.134.187] (HELO mu-out-0910.google.com) (209.85.134.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 10:20:47 +0000
Received: by mu-out-0910.google.com with SMTP id g7so1971757muf
        for <java-user@lucene.apache.org>; Tue, 31 Jul 2007 03:20:25 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=rBeVoCGrL1wPGq6AH0ugYvEVstfNoaC6RJBJqcdO5O6YC6z7l3ur5OFOdMDrocTsX4F1Q6UPyJmebvhZHrIsWM4ZUWO3FZrlE4i7umNky7Ak181N5BBjq7OYSOyUGLVPKGUoxGTW9zh4WYkJlGUOezXANhd14jqv7n3Oz+RNXfw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=GFE2/eh8k3X0A+HaSX9f7RZJ6d/bQzvcDgljKLlFqR3Q1RpijtPyl8k9iUIJj9Y72wZrnAaE5e/FIjl//nDn0xH6RJRVy8/+xLSwG792RvdWJwrLWa5Kmq1Q7w+SoCweGciKT1D67hbSq7dt6Nw1ySqOQwahVTmuyy5LdJh5p7o=
Received: by 10.86.86.12 with SMTP id j12mr4597746fgb.1185877225768;
        Tue, 31 Jul 2007 03:20:25 -0700 (PDT)
Received: from ?192.168.2.101? ( [83.249.110.50])
        by mx.google.com with ESMTPS id y2sm17652887mug.2007.07.31.03.20.24
        (version=TLSv1/SSLv3 cipher=OTHER);
        Tue, 31 Jul 2007 03:20:24 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <BA13F0D6-E478-4E36-9EE1-2284E14390A5@gmail.com>
References: <1185835808.37787.ezmlm@lucene.apache.org> <011601c7d34c$0423d1a0$0c6b74e0$@com> <BA13F0D6-E478-4E36-9EE1-2284E14390A5@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <8E9199AA-180F-45FA-8DF0-12EC8BC75F33@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Exact field searches
Date: Tue, 31 Jul 2007 12:16:06 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


31 jul 2007 kl. 12.00 skrev karl wettin:
> 31 jul 2007 kl. 10.23 skrev Vijay Santhanam:
>
>> How do I make search for a specific number of tokens in a field?
>
> I think you are looking for SpanFirstQuery.

Also, this is a similar thread with alternative solutions:

http://www.nabble.com/Search-for-docs-containing-only-a-certain-word- 
in-a-specified-field--tf3655925.html


-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29517-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 31 13:48:54 2007
Return-Path: <java-user-return-29517-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39374 invoked from network); 31 Jul 2007 13:48:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jul 2007 13:48:52 -0000
Received: (qmail 47131 invoked by uid 500); 31 Jul 2007 13:48:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47091 invoked by uid 500); 31 Jul 2007 13:48:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47080 invoked by uid 99); 31 Jul 2007 13:48:45 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 06:48:45 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [145.232.250.18] (HELO sndmz03e1.vd.ch) (145.232.250.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 13:48:37 +0000
To: java-user@lucene.apache.org
Subject: Search query with wildcard and spaces
MIME-Version: 1.0
X-Mailer: Lotus Notes Release 6.5.3 September 14, 2004
Message-ID: <OFD89A8549.B525F2B1-ONC1257329.004B7879-C1257329.004BDF3A@vd.ch>
From: jean-eric.cuendet@vd.ch
Date: Tue, 31 Jul 2007 15:48:43 +0200
X-MIMETrack: Serialize by Router on PBC_DMZ03/externe-VD(Release 6.5.6FP1|April 24, 2007) at
 31/07/2007 15:48:36,
	Serialize complete at 31/07/2007 15:48:36
Content-Type: multipart/alternative; boundary="=_alternative 004BDF38C1257329_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 004BDF38C1257329_=
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: base64

SGksDQpJIHdvdWxkIGxpa2UgdG8gbWFrZSBhIHNlYXJjaCBxdWVyeSB0aGF0IHNob3VsZCBtYXRj
aCB0aGUgZm9sbG93aW5nIA0KZG9jdW1lbnRzOg0KDQogICBOQU1FOiBEZSBhZ29zdGlubw0KICAg
RklSU1Q6IE1hcmlhDQoNCiAgIE5BTUU6IERlIGFnb3N0YXRvDQogICBGSVJTVDogTWFyaWENCg0K
SG93IHRvIGRlc2lnbiB0aGUgcXVlcnk/IFRoZSBmb2xsb3dpbmc6DQogICBOQU1FOkRlIEFnb3Mq
IEFORCBGSVJTVDpNYXJpYQ0KRG9lc24ndCB3b3JrIHNpbmNlIHRoZXJlIGlzIGEgc3BhY2UgaW4g
dGhlIG5hbWUuIEFuZDoNCiAgIE5BTUU6IkRlIEFnb3MiKiBBTkQgRklSU1Q6TWFyaWENCiAgIE5B
TUU6IkRlIEFnb3MqIiBBTkQgRklSU1Q6TWFyaWENCmRvZXNuJ3Qgd29yayBuZWl0aGVyLCBzaW5j
ZSB0aGUgZG91YmxlLXF1b3RlcyBkb24ndCBhY2NlcHQgdGhlIHdpcmxkY2FyZC4NCg0KVGhhbmtz
IGZvciBoZWxwDQotamVjDQoNCi0tLSANCkplYW4tRXJpYyBDdWVuZGV0DQpFdGF0IGRlIFZhdWQs
IERpcmVjdGlvbiBkZXMgc3lzdGVtZXMgZCdpbmZvcm1hdGlvbiAoRFNJKQ0KQXYuIFJlY29yZG9u
IDEsIDEwMTQgTGF1c2FubmUNClRlbCA6ICs0MSAyMSAzMTYgMTUgNzkg4oCTIE1vYiA6ICs0MSA3
NiAyMjIgMzMgNDMNCm1haWx0bzogamVhbi1lcmljLmN1ZW5kZXRAdmQuY2ggLSBodHRwOi8vd3d3
LnZkLmNoDQo=
--=_alternative 004BDF38C1257329_=--

From java-user-return-29518-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 31 13:55:33 2007
Return-Path: <java-user-return-29518-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41725 invoked from network); 31 Jul 2007 13:55:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jul 2007 13:55:31 -0000
Received: (qmail 64238 invoked by uid 500); 31 Jul 2007 13:55:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64212 invoked by uid 500); 31 Jul 2007 13:55:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64197 invoked by uid 99); 31 Jul 2007 13:55:18 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 06:55:18 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [213.133.33.40] (HELO smtp.is.nl) (213.133.33.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 13:55:10 +0000
Received: from [213.133.51.241] (HELO hai01.hippo.local)
  by smtp.is.nl (CommuniGate Pro SMTP 5.0.10)
  with ESMTP id 20501880 for java-user@lucene.apache.org; Tue, 31 Jul 2007 15:54:49 +0200
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: base64
X-MimeOLE: Produced By Microsoft Exchange V6.0.6619.12
Subject: RE: Search query with wildcard and spaces
Date: Tue, 31 Jul 2007 15:54:49 +0200
Message-ID: <A955EA1F8FE31749AEC8C998082F6C7C01AC1278@hai01.hippo.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Search query with wildcard and spaces
Thread-Index: AcfTeYhePRtGCFnSRsi9KuzmWdNNsAAAIQ9Q
From: "Ard Schrijvers" <a.schrijvers@hippo.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

SGVsbG8sDQoNCmlzIHRoaXMganVzdCBvbmUgc2luZ2xlIGV4YW1wbGUgb2YgZGlmZmVyZW50IHdv
cmRzIHRoYXQgc2hvdWxkIHJldHVybiB0aGUgc2FtZSByZXN1bHRzPyBZb3UgbWlnaHQgY29uc2lk
ZXIgaW1wbGVtZW50aW5nIGEgc3lub255bSBhbmFseXplciBvdGhlcndpc2UuDQoNCkluIHlvdXIg
Y2FzZSwgc3RvcmluZyBOQU1FIGFzIFVOX1RPS0VOSVpFRCBzaG91bGQgZW5hYmxlIHlvdXIgTkFN
RToiRGUgQWdvcyIqIHNlYXJjaA0KDQpSZWdhcmRzIEFyZA0KDQo+IA0KPiBIaSwNCj4gSSB3b3Vs
ZCBsaWtlIHRvIG1ha2UgYSBzZWFyY2ggcXVlcnkgdGhhdCBzaG91bGQgbWF0Y2ggdGhlIGZvbGxv
d2luZyANCj4gZG9jdW1lbnRzOg0KPiANCj4gICAgTkFNRTogRGUgYWdvc3Rpbm8NCj4gICAgRklS
U1Q6IE1hcmlhDQo+IA0KPiAgICBOQU1FOiBEZSBhZ29zdGF0bw0KPiAgICBGSVJTVDogTWFyaWEN
Cj4gDQo+IEhvdyB0byBkZXNpZ24gdGhlIHF1ZXJ5PyBUaGUgZm9sbG93aW5nOg0KPiAgICBOQU1F
OkRlIEFnb3MqIEFORCBGSVJTVDpNYXJpYQ0KPiBEb2Vzbid0IHdvcmsgc2luY2UgdGhlcmUgaXMg
YSBzcGFjZSBpbiB0aGUgbmFtZS4gQW5kOg0KPiAgICBOQU1FOiJEZSBBZ29zIiogQU5EIEZJUlNU
Ok1hcmlhDQo+ICAgIE5BTUU6IkRlIEFnb3MqIiBBTkQgRklSU1Q6TWFyaWENCj4gZG9lc24ndCB3
b3JrIG5laXRoZXIsIHNpbmNlIHRoZSBkb3VibGUtcXVvdGVzIGRvbid0IGFjY2VwdCANCj4gdGhl
IHdpcmxkY2FyZC4NCj4gDQo+IFRoYW5rcyBmb3IgaGVscA0KPiAtamVjDQo+IA0KPiAtLS0gDQo+
IEplYW4tRXJpYyBDdWVuZGV0DQo+IEV0YXQgZGUgVmF1ZCwgRGlyZWN0aW9uIGRlcyBzeXN0ZW1l
cyBkJ2luZm9ybWF0aW9uIChEU0kpDQo+IEF2LiBSZWNvcmRvbiAxLCAxMDE0IExhdXNhbm5lDQo+
IFRlbCA6ICs0MSAyMSAzMTYgMTUgNzkg4oCTIE1vYiA6ICs0MSA3NiAyMjIgMzMgNDMNCj4gbWFp
bHRvOiBqZWFuLWVyaWMuY3VlbmRldEB2ZC5jaCAtIGh0dHA6Ly93d3cudmQuY2gNCj4gDQo=


From java-user-return-29519-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 31 15:01:44 2007
Return-Path: <java-user-return-29519-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67475 invoked from network); 31 Jul 2007 15:01:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jul 2007 15:01:19 -0000
Received: (qmail 38421 invoked by uid 500); 31 Jul 2007 15:00:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37503 invoked by uid 500); 31 Jul 2007 15:00:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36980 invoked by uid 99); 31 Jul 2007 15:00:19 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 08:00:19 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [145.232.250.18] (HELO sndmz03e1.vd.ch) (145.232.250.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 14:29:45 +0000
In-Reply-To: <A955EA1F8FE31749AEC8C998082F6C7C01AC1278@hai01.hippo.local>
To: java-user@lucene.apache.org
Subject: RE: Search query with wildcard and spaces
MIME-Version: 1.0
X-Mailer: Lotus Notes Release 6.5.3 September 14, 2004
Message-ID: <OF873CF70B.DB0812B7-ONC1257329.004F7B4D-C1257329.004FA384@vd.ch>
From: jean-eric.cuendet@vd.ch
Date: Tue, 31 Jul 2007 16:29:51 +0200
X-MIMETrack: Serialize by Router on PBC_DMZ03/externe-VD(Release 6.5.6FP1|April 24, 2007) at
 31/07/2007 16:29:44,
	Serialize complete at 31/07/2007 16:29:44
Content-Type: multipart/alternative; boundary="=_alternative 004FA382C1257329_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 004FA382C1257329_=
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: base64

PiBpcyB0aGlzIGp1c3Qgb25lIHNpbmdsZSBleGFtcGxlIG9mIGRpZmZlcmVudCB3b3JkcyB0aGF0
IHNob3VsZCANCj4gcmV0dXJuIHRoZSBzYW1lIHJlc3VsdHM/IFlvdSBtaWdodCBjb25zaWRlciBp
bXBsZW1lbnRpbmcgYSBzeW5vbnltIA0KPiBhbmFseXplciBvdGhlcndpc2UuDQoNCk5vLCB0aGUg
cXVlcnkgc2hvdWxkIG1hdGNoIGFsbCBvZiB0aGVtLg0KVGhlIHF1ZXJ5Og0KICBOQU1FOkRlIEFn
b3MqIEFORCBGSVJTVDpNYXJpYQ0Kc2hvdWxkIHJldHVybiAyIGRvY3VtZW50czoNCiAgTkFNRTog
RGUgYWdvc3Rpbm8NCiAgRklSU1Q6IE1hcmlhDQoNCiAgTkFNRTogRGUgYWdvc3RhdG8NCiAgRklS
U1Q6IE1hcmlhDQoNCkRvIEkgbmVlZCBzeW5vbnltIGZvciB0aGF0Pw0KDQo+IEluIHlvdXIgY2Fz
ZSwgc3RvcmluZyBOQU1FIGFzIFVOX1RPS0VOSVpFRCBzaG91bGQgZW5hYmxlIHlvdXIgDQo+IE5B
TUU6IkRlIEFnb3MiKiBzZWFyY2gNCg0KVGhlIHF1ZXJ5Og0KICAgTk9NOiJadWxsbyIqIEFORCBQ
UkVOT006IkFuZHJlYSIqIEFORCBEQVRFX05BSVNTQU5DRToxOTYzMDYyMg0KZG9lc24ndCB3b3Jr
Og0KICAgQ2Fubm90IHBhcnNlICdOT006IkRlIFp1bGxvIiogQU5EIFBSRU5PTToiQW5kcmVhIiog
QU5EIA0KREFURV9OQUlTU0FOQ0U6MTk2MzA2MjInOiAnKicgb3IgJz8nIG5vdCBhbGxvd2VkIGFz
IGZpcnN0IGNoYXJhY3RlciBpbiANCldpbGRjYXJkUXVlcnkNCg0KQW55IGlkZWE/DQoNCj4gUmVn
YXJkcyBBcmQNCj4gDQo+ID4gDQo+ID4gSGksDQo+ID4gSSB3b3VsZCBsaWtlIHRvIG1ha2UgYSBz
ZWFyY2ggcXVlcnkgdGhhdCBzaG91bGQgbWF0Y2ggdGhlIGZvbGxvd2luZyANCj4gPiBkb2N1bWVu
dHM6DQo+ID4gDQo+ID4gICAgTkFNRTogRGUgYWdvc3Rpbm8NCj4gPiAgICBGSVJTVDogTWFyaWEN
Cj4gPiANCj4gPiAgICBOQU1FOiBEZSBhZ29zdGF0bw0KPiA+ICAgIEZJUlNUOiBNYXJpYQ0KPiA+
IA0KPiA+IEhvdyB0byBkZXNpZ24gdGhlIHF1ZXJ5PyBUaGUgZm9sbG93aW5nOg0KPiA+ICAgIE5B
TUU6RGUgQWdvcyogQU5EIEZJUlNUOk1hcmlhDQo+ID4gRG9lc24ndCB3b3JrIHNpbmNlIHRoZXJl
IGlzIGEgc3BhY2UgaW4gdGhlIG5hbWUuIEFuZDoNCj4gPiAgICBOQU1FOiJEZSBBZ29zIiogQU5E
IEZJUlNUOk1hcmlhDQo+ID4gICAgTkFNRToiRGUgQWdvcyoiIEFORCBGSVJTVDpNYXJpYQ0KPiA+
IGRvZXNuJ3Qgd29yayBuZWl0aGVyLCBzaW5jZSB0aGUgZG91YmxlLXF1b3RlcyBkb24ndCBhY2Nl
cHQgDQo+ID4gdGhlIHdpcmxkY2FyZC4NCj4gPiANCj4gPiBUaGFua3MgZm9yIGhlbHANCj4gPiAt
amVjDQo+ID4gDQo+ID4gLS0tIA0KPiA+IEplYW4tRXJpYyBDdWVuZGV0DQo+ID4gRXRhdCBkZSBW
YXVkLCBEaXJlY3Rpb24gZGVzIHN5c3RlbWVzIGQnaW5mb3JtYXRpb24gKERTSSkNCj4gPiBBdi4g
UmVjb3Jkb24gMSwgMTAxNCBMYXVzYW5uZQ0KPiA+IFRlbCA6ICs0MSAyMSAzMTYgMTUgNzkg4oCT
IE1vYiA6ICs0MSA3NiAyMjIgMzMgNDMNCj4gPiBtYWlsdG86IGplYW4tZXJpYy5jdWVuZGV0QHZk
LmNoIC0gaHR0cDovL3d3dy52ZC5jaA0KPiA+IA0KDQo=
--=_alternative 004FA382C1257329_=--

From java-user-return-29520-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 31 15:02:54 2007
Return-Path: <java-user-return-29520-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70877 invoked from network); 31 Jul 2007 15:02:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jul 2007 15:02:06 -0000
Received: (qmail 41526 invoked by uid 500); 31 Jul 2007 15:00:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41476 invoked by uid 500); 31 Jul 2007 15:00:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41191 invoked by uid 99); 31 Jul 2007 15:00:40 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 08:00:39 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.188 as permitted sender)
Received: from [209.85.128.188] (HELO fk-out-0910.google.com) (209.85.128.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 15:00:21 +0000
Received: by fk-out-0910.google.com with SMTP id z23so426611fkz
        for <java-user@lucene.apache.org>; Tue, 31 Jul 2007 08:00:00 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Ti1wZqleF4fRuRF0xM+VRv4+jY2ztrys59iMqlwF+yhxwiQNVP+rvn2XrKgRA97/qEOOUbqrIWcn+TjFRZxDAe6nrJ0rJ9mQqciCMx4K+Hx8OfkpgbWjVxLJ2mi5eMzFfHeX+F5XfTZAsL4NukqkePnNsO2dvzB22VX45dcQYp0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=C3jPB/BPWBMGYMJArwU1DGYoSTk6LHL/I7ifI0qta/X7GCWawVHSrdVlBp/puKkv6jY/QTzIwf7iYrxlnhg1CGd1IC4Oc9YBVCvDUKGPsVTVEbst1lzcXMROCr7vc8QQqKj1MFaBfbWGGl+ryuSaxT1q6HBlBPVzyufM04SpsnY=
Received: by 10.82.127.14 with SMTP id z14mr5733115buc.1185894000095;
        Tue, 31 Jul 2007 08:00:00 -0700 (PDT)
Received: by 10.82.190.14 with HTTP; Tue, 31 Jul 2007 08:00:00 -0700 (PDT)
Message-ID: <359a92830707310800y7380c8f8qf1b7f2eec6aec76b@mail.gmail.com>
Date: Tue, 31 Jul 2007 11:00:00 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Problem in Lucene
In-Reply-To: <b0ba206a0707302210s2b094344jf9e758b03da046c0@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_31851_12984914.1185894000073"
References: <b0ba206a0707302210s2b094344jf9e758b03da046c0@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_31851_12984914.1185894000073
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Why not fix your code to be 2.1 compliant instead? For instance,
StopFilter has a constructor that takes Set and a constructor
that takes an array of  String for stopwords.

Otherwise, please tell us more about what you are doing with
MakeStopTable and why making your code 2.1 compliant isn't an option.

Best
Erick

On 7/31/07, Srinivasarao Vundavalli <srinivas.apache@gmail.com> wrote:
>
> Hi,
>      I am using nutch index to search in lucene.  One of my classes use
> makeStopTable method ( which is deprecated) of class  StopFilter  in
> org.apache.lucene.analysis. When I run my program with lucene 2.1.0
>
> ~/j2sdk1.4.2/bin/java -classpath .:lucene-core-2.1.0.jar SearchFiles
>
> Exception in thread "main" java.lang.NoSuchMethodError:
> org.apache.lucene.analysis.StopFilter.makeStopTable
> ([Ljava/lang/String;)Ljava/util/Hashtable;
>         at GenericLanguageAnalyzer.<init>(GenericLanguageAnalyzer.java
> :179)
>         at SearchFiles.main(SearchFiles.java:110)
>
> So, as that method(makeStopTable) is there in lucene 1.9.1 I run my
> program
> using this version of lucene.
>
> ~/j2sdk1.4.2/bin/java -classpath .:lucene-core-1.9.1.jar SearchFiles
>
> This gives me the following where crawl/index is my index directory.  If
> we
> build the index with lucene, there will be a file called 'segments' in the
> index directory. But the index i am using is built by nutch. It contains
> 'segments_3' and 'segments.gen'. So, it gives me the following exception.
>
> Exception in thread "main" java.io.FileNotFoundException:
> crawl/index/segments (No such file or directory)
>         at java.io.RandomAccessFile.open(Native Method)
>         at java.io.RandomAccessFile.<init>(RandomAccessFile.java:204)
>         at org.apache.lucene.store.FSIndexInput$Descriptor.<init>(
> FSDirectory.java:425)
>         at org.apache.lucene.store.FSIndexInput.<init>(FSDirectory.java
> :434)
>         at org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java
> :324)
>         at org.apache.lucene.index.SegmentInfos.read(SegmentInfos.java:45)
>         at org.apache.lucene.index.IndexReader$1.doBody(IndexReader.java
> :148)
>         at org.apache.lucene.store.Lock$With.run(Lock.java:109)
>         at org.apache.lucene.index.IndexReader.open(IndexReader.java:143)
>         at org.apache.lucene.index.IndexReader.open(IndexReader.java:127)
>         at SearchFiles.main(SearchFiles.java:103)
>
> Please help me to get rid of this exception.
> Thanx in advance
>

------=_Part_31851_12984914.1185894000073--

From java-user-return-29521-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 31 15:05:08 2007
Return-Path: <java-user-return-29521-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78493 invoked from network); 31 Jul 2007 15:05:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jul 2007 15:05:06 -0000
Received: (qmail 63062 invoked by uid 500); 31 Jul 2007 15:04:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63028 invoked by uid 500); 31 Jul 2007 15:04:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63017 invoked by uid 99); 31 Jul 2007 15:04:59 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 08:04:59 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of srinivas.apache@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 15:04:55 +0000
Received: by ug-out-1314.google.com with SMTP id c2so99948ugf
        for <java-user@lucene.apache.org>; Tue, 31 Jul 2007 08:04:34 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=WcTNJFREPt707rbcJPmuUyzeVAAzUrdSxRPSHJIMcrpJ/ZV3neBFWyEQqrsuh2cCSvq+vu0RyiglxrTVcNpWUqt64hFwnmTu4+42ivMa5I2efuX2877k+aZeuHC1ZRAZuqSFp/nIj29TJcKxiynz0/6afJjtrZJMZ14GL4wJdRc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ZyOMRfuACBhC2YqVpiV5QEE4bc5zMiMVdeYDu390dNlsEEZoyrKPYIgT7XDwamTA7FFH8g+1U2a9oPw3Ixq4Cb7HyUvzTJf4Yw1Uzzy6bt/d2YZU/bxdzoD1u87T/50GY1TXIzsMbwW3A7PWyYjK7YneNHsnOgGGwmRQly/Q99s=
Received: by 10.78.175.14 with SMTP id x14mr1833716hue.1185894273891;
        Tue, 31 Jul 2007 08:04:33 -0700 (PDT)
Received: by 10.78.182.11 with HTTP; Tue, 31 Jul 2007 08:04:33 -0700 (PDT)
Message-ID: <b0ba206a0707310804i5613ba0eqbd1eabb4a8b9f0c7@mail.gmail.com>
Date: Tue, 31 Jul 2007 20:34:33 +0530
From: "Srinivasarao Vundavalli" <srinivas.apache@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Problem in Lucene
In-Reply-To: <359a92830707310800y7380c8f8qf1b7f2eec6aec76b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_30987_8843787.1185894273856"
References: <b0ba206a0707302210s2b094344jf9e758b03da046c0@mail.gmail.com>
	 <359a92830707310800y7380c8f8qf1b7f2eec6aec76b@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_30987_8843787.1185894273856
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

The code that is making use of that makeStopFilter is not written by me. It
has read-only permission. So, I can't make any changes to it.

On 7/31/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> Why not fix your code to be 2.1 compliant instead? For instance,
> StopFilter has a constructor that takes Set and a constructor
> that takes an array of  String for stopwords.
>
> Otherwise, please tell us more about what you are doing with
> MakeStopTable and why making your code 2.1 compliant isn't an option.
>
> Best
> Erick
>
> On 7/31/07, Srinivasarao Vundavalli <srinivas.apache@gmail.com> wrote:
> >
> > Hi,
> >      I am using nutch index to search in lucene.  One of my classes use
> > makeStopTable method ( which is deprecated) of class  StopFilter  in
> > org.apache.lucene.analysis. When I run my program with lucene 2.1.0
> >
> > ~/j2sdk1.4.2/bin/java -classpath .:lucene-core-2.1.0.jar SearchFiles
> >
> > Exception in thread "main" java.lang.NoSuchMethodError:
> > org.apache.lucene.analysis.StopFilter.makeStopTable
> > ([Ljava/lang/String;)Ljava/util/Hashtable;
> >         at GenericLanguageAnalyzer.<init>(GenericLanguageAnalyzer.java
> > :179)
> >         at SearchFiles.main(SearchFiles.java:110)
> >
> > So, as that method(makeStopTable) is there in lucene 1.9.1 I run my
> > program
> > using this version of lucene.
> >
> > ~/j2sdk1.4.2/bin/java -classpath .:lucene-core-1.9.1.jar SearchFiles
> >
> > This gives me the following where crawl/index is my index directory.  If
> > we
> > build the index with lucene, there will be a file called 'segments' in
> the
> > index directory. But the index i am using is built by nutch. It contains
> > 'segments_3' and 'segments.gen'. So, it gives me the following
> exception.
> >
> > Exception in thread "main" java.io.FileNotFoundException:
> > crawl/index/segments (No such file or directory)
> >         at java.io.RandomAccessFile.open(Native Method)
> >         at java.io.RandomAccessFile.<init>(RandomAccessFile.java:204)
> >         at org.apache.lucene.store.FSIndexInput$Descriptor.<init>(
> > FSDirectory.java:425)
> >         at org.apache.lucene.store.FSIndexInput.<init>(FSDirectory.java
> > :434)
> >         at org.apache.lucene.store.FSDirectory.openInput(
> FSDirectory.java
> > :324)
> >         at org.apache.lucene.index.SegmentInfos.read(SegmentInfos.java
> :45)
> >         at org.apache.lucene.index.IndexReader$1.doBody(IndexReader.java
> > :148)
> >         at org.apache.lucene.store.Lock$With.run(Lock.java:109)
> >         at org.apache.lucene.index.IndexReader.open(IndexReader.java
> :143)
> >         at org.apache.lucene.index.IndexReader.open(IndexReader.java
> :127)
> >         at SearchFiles.main(SearchFiles.java:103)
> >
> > Please help me to get rid of this exception.
> > Thanx in advance
> >
>

------=_Part_30987_8843787.1185894273856--

From java-user-return-29522-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 31 15:20:12 2007
Return-Path: <java-user-return-29522-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13954 invoked from network); 31 Jul 2007 15:20:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jul 2007 15:20:10 -0000
Received: (qmail 21293 invoked by uid 500); 31 Jul 2007 15:20:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21246 invoked by uid 500); 31 Jul 2007 15:20:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21235 invoked by uid 99); 31 Jul 2007 15:20:00 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 08:20:00 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.134.190 as permitted sender)
Received: from [209.85.134.190] (HELO mu-out-0910.google.com) (209.85.134.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 15:19:52 +0000
Received: by mu-out-0910.google.com with SMTP id g7so2039481muf
        for <java-user@lucene.apache.org>; Tue, 31 Jul 2007 08:19:31 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=IWsxz1fgZn+0fN3fjlZDu0d7M7JjM0xjGssNJ6UaXB/S1vUtcOHfRGTfInNOV4ednnP6KmYWcy3WYGUfylwW042h3ftyG+GIdG7CgYsl4TnjpMB0E8W4NpC4AnMr8fhguJ58ceUT4QBqIK1zw0t/sTOftB634m1Ca0+cLAIDCqk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=nb9D9uxuA6sN/O+vSl/LJrYRxaMuHy92SLBBUbdh99YWiTJr63iDO27u62QQ6u8YstpSk2jLPkJl+EVVyOxgHNFaI5BWEkkl+y4Pq0SNEkAluAARx4t6C5jlq+xh9NBYiw8DB4R9tX/tsCBN9z3dNXyjzChAxj3HHPFYqhCPLEw=
Received: by 10.82.182.1 with SMTP id e1mr5752918buf.1185895170379;
        Tue, 31 Jul 2007 08:19:30 -0700 (PDT)
Received: by 10.82.190.14 with HTTP; Tue, 31 Jul 2007 08:19:30 -0700 (PDT)
Message-ID: <359a92830707310819t2a5f3c2aldf246859ffc5a457@mail.gmail.com>
Date: Tue, 31 Jul 2007 11:19:30 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Search query with wildcard and spaces
In-Reply-To: <OF873CF70B.DB0812B7-ONC1257329.004F7B4D-C1257329.004FA384@vd.ch>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_32223_902035.1185895170339"
References: <A955EA1F8FE31749AEC8C998082F6C7C01AC1278@hai01.hippo.local>
	 <OF873CF70B.DB0812B7-ONC1257329.004F7B4D-C1257329.004FA384@vd.ch>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_32223_902035.1185895170339
Content-Type: text/plain; charset=WINDOWS-1252
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

You're going to have to delve into the details of what the various analyzer=
s
do. And perhaps write your own.

The syntax "something and"*, with the asterisk outside the quotes isn't
supported syntax as far as I know.

Adding quotes changes the syntax, so "some word*" is a phrase query,
which probably isn't what you want.

Some things to think about.... How do spaces play in your problem space?
What about capitalizations? One solution is to take total control over
the inputs, and index things exactly as you wish, for instance
substitute underbars for spaces, manually lowercase things (or writer a
filter
and/or analyzer) and index using WhitespaceAnalyzer. Do something similar
on searches.  Of course, you need to do a similar process for your search
terms.

You could also think about SpanFirstQuery, although you have to construct
that query yourself since, last I knew, there wasn't support for the Span
family in the QueryParser.

KeywordAnalyzer might help here.

What would definitely help you is to get a copy of Luke and try various
analyzers out to see how they parse the query strings you want to try with
various analyzers. This will give you a MUCH better idea of what actually
happens with the analyzers. Google lucene luke......

Best
Erick

On 7/31/07, jean-eric.cuendet@vd.ch <jean-eric.cuendet@vd.ch> wrote:
>
> > is this just one single example of different words that should
> > return the same results? You might consider implementing a synonym
> > analyzer otherwise.
>
> No, the query should match all of them.
> The query:
>   NAME:De Agos* AND FIRST:Maria
> should return 2 documents:
>   NAME: De agostino
>   FIRST: Maria
>
>   NAME: De agostato
>   FIRST: Maria
>
> Do I need synonym for that?
>
> > In your case, storing NAME as UN_TOKENIZED should enable your
> > NAME:"De Agos"* search
>
> The query:
>    NOM:"Zullo"* AND PRENOM:"Andrea"* AND DATE_NAISSANCE:19630622
> doesn't work:
>    Cannot parse 'NOM:"De Zullo"* AND PRENOM:"Andrea"* AND
> DATE_NAISSANCE:19630622': '*' or '?' not allowed as first character in
> WildcardQuery
>
> Any idea?
>
> > Regards Ard
> >
> > >
> > > Hi,
> > > I would like to make a search query that should match the following
> > > documents:
> > >
> > >    NAME: De agostino
> > >    FIRST: Maria
> > >
> > >    NAME: De agostato
> > >    FIRST: Maria
> > >
> > > How to design the query? The following:
> > >    NAME:De Agos* AND FIRST:Maria
> > > Doesn't work since there is a space in the name. And:
> > >    NAME:"De Agos"* AND FIRST:Maria
> > >    NAME:"De Agos*" AND FIRST:Maria
> > > doesn't work neither, since the double-quotes don't accept
> > > the wirldcard.
> > >
> > > Thanks for help
> > > -jec
> > >
> > > ---
> > > Jean-Eric Cuendet
> > > Etat de Vaud, Direction des systemes d'information (DSI)
> > > Av. Recordon 1, 1014 Lausanne
> > > Tel : +41 21 316 15 79 =96 Mob : +41 76 222 33 43
> > > mailto: jean-eric.cuendet@vd.ch - http://www.vd.ch
> > >
>
>

------=_Part_32223_902035.1185895170339--

From java-user-return-29523-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 31 15:45:59 2007
Return-Path: <java-user-return-29523-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58866 invoked from network); 31 Jul 2007 15:45:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jul 2007 15:45:57 -0000
Received: (qmail 91840 invoked by uid 500); 31 Jul 2007 15:44:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89476 invoked by uid 500); 31 Jul 2007 15:44:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86849 invoked by uid 99); 31 Jul 2007 15:43:19 -0000
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of askar.zaidi@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 08:43:10 -0700
Received: by ug-out-1314.google.com with SMTP id c2so106263ugf
        for <java-user@lucene.apache.org>; Tue, 31 Jul 2007 08:42:32 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=kyucu6MihYiFgsaU7oAuseXvXkMq8mg/xt44LczzIg97monPfsI0h4Kz04y03LlMtdnmrOwDSF020nshaS4DVWF3xHOu5U1V5nG64AwW8o8Y3k5fpLtudVxvZxgFzJkFcrtgZ32HK6fl4TEB9oWzUaND6EnE7FK10xStjmsQG6w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=Ck4GhzFQMmeuhayniJ+tOQyacBCMAf8cz2KLYtPBDnL77EvPoQa6W0rKtH4SxjTVhvCwEy4QT7i+1LbN62IszJ46/nWeaVuVSAfBxcL75C+xXiIi738AexXM5uVsf5wraVJjzuPlWBTjDUus64belBGQfKQN4s2avnLw1KnKhnc=
Received: by 10.67.106.3 with SMTP id i3mr648465ugm.1185896552288;
        Tue, 31 Jul 2007 08:42:32 -0700 (PDT)
Received: by 10.66.251.15 with HTTP; Tue, 31 Jul 2007 08:42:32 -0700 (PDT)
Message-ID: <c0c0e1d40707310842q2d300fe2pe997922101549097@mail.gmail.com>
Date: Tue, 31 Jul 2007 11:42:32 -0400
From: "Askar Zaidi" <askar.zaidi@gmail.com>
To: java-user@lucene.apache.org
Subject: Lucene Field score value
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_47291_5471706.1185896552134"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_47291_5471706.1185896552134
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hey guys,

I was wondering if there is a way to retrieve score of a field in a document
?

If my document looks like this:

{itemID},{field 1},{field 2}

I'd like to get score of individual fields 1 and 2 rather than the score of
the entire document.

Is it possible ?

thanks,
AZ

------=_Part_47291_5471706.1185896552134--

From java-user-return-29524-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 31 16:25:43 2007
Return-Path: <java-user-return-29524-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3215 invoked from network); 31 Jul 2007 16:25:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jul 2007 16:25:42 -0000
Received: (qmail 88947 invoked by uid 500); 31 Jul 2007 16:25:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88916 invoked by uid 500); 31 Jul 2007 16:25:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88904 invoked by uid 99); 31 Jul 2007 16:25:35 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 09:25:35 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.15.214.217] (HELO email.hannonhill.com) (69.15.214.217)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 16:25:29 +0000
Received: by email.hannonhill.com (Postfix, from userid 543)
	id 40A5D63285AB; Tue, 31 Jul 2007 12:25:09 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.0 (2005-09-13) on 
	files.hannonhill.com
X-Spam-Level: 
Received: from [10.0.1.156] (unknown [10.0.1.156])
	by email.hannonhill.com (Postfix) with ESMTP id 056C663283A8
	for <java-user@lucene.apache.org>; Tue, 31 Jul 2007 12:25:09 -0400 (EDT)
Message-ID: <46AF61DD.4050704@hannonhill.com>
Date: Tue, 31 Jul 2007 12:22:53 -0400
From: Zach Bailey <zach.bailey@hannonhill.com>
Organization: Hannon Hill
User-Agent: Thunderbird 2.0.0.5 (Windows/20070716)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Clustered Indexing on common network filesystem
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.5 required=4.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.1.0

Hello all,

First a little background - we are developing a clustered application 
that will in part leverage Lucene to provide index and search 
capabilities. We have already spent time investigating various index 
storage implementations (database vs. filesystem) and we've decided for 
performance reasons to go with a filesystem index storage scheme.

That said, I have read back through the archives a bit and noticed that 
the support for index storage on NFS is still experimental (e.g. the 
latest bugfixes have not made it out to an official, stable release). I 
realize most of the issues related to using a shared file system revolve 
around locking, and I haven't seen much about the maturity of locking 
for other network filesystems.

I was wondering if anyone has tried any other networked filesystems or 
had any recommendations. We have clients who would be doing this on both 
Windows and Unix/Linux so any insight there would be appreciated as well 
- it can be assumed that across any cluster the operating system use 
would be homogeneous (i.e. all nodes are on windows and would use 
windows shares, or all nodes are on linux and would use xyz filesystem).

Thanks in advance,
-Zach Bailey

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29525-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 31 17:54:37 2007
Return-Path: <java-user-return-29525-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54768 invoked from network); 31 Jul 2007 17:54:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jul 2007 17:54:36 -0000
Received: (qmail 98096 invoked by uid 500); 31 Jul 2007 17:54:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98061 invoked by uid 500); 31 Jul 2007 17:54:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98050 invoked by uid 99); 31 Jul 2007 17:54:29 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 10:54:29 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of shailendra.sharma@gmail.com designates 209.85.162.178 as permitted sender)
Received: from [209.85.162.178] (HELO el-out-1112.google.com) (209.85.162.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 17:54:23 +0000
Received: by el-out-1112.google.com with SMTP id r27so273048ele
        for <java-user@lucene.apache.org>; Tue, 31 Jul 2007 10:54:02 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=h/amipAgHj2mQ1ihGCeAlBMYVR0taB+Xs05uXpeWDwetffEEGjPPalDeH3fr1uss3U7epk22ptAwkCGwbeJuAmBjelXol+kvaS1wky5TElRZIQ4NxxIQbkVhRF+K6VZxYEV7WtZ5Ml7jm8ELt8rrkGgh6h8WCZ22T1N86+1vdo4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=OBw9p3yIpqLB1F2s6N8RzwX0/laAN1OPvPwx+7rSAvc3lPenaOx9HsJCPSQVP98sKMB1h/9YFVWUfxPY0R0Fs90UIQUE65wqJOZcZcU9+Cmn/mDjQrObRa217uWpgq1L8x58S0HE8DtknhCwcFQ3tunkm+BCl1n4k400n//z3Ig=
Received: by 10.143.16.9 with SMTP id t9mr362282wfi.1185904442130;
        Tue, 31 Jul 2007 10:54:02 -0700 (PDT)
Received: by 10.142.102.21 with HTTP; Tue, 31 Jul 2007 10:54:02 -0700 (PDT)
Message-ID: <d27fa17e0707311054l727480fen9431d873eab24021@mail.gmail.com>
Date: Tue, 31 Jul 2007 23:24:02 +0530
From: "Shailendra Sharma" <shailendra.sharma@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to show category count with results?
In-Reply-To: <46AE0162.8070900@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_44460_18044498.1185904442090"
References: <00b401c7cf98$73167a20$150410ac@bhavin>
	 <200707261528.l6QFSSXx031875@pigeon.ciao.com>
	 <359a92830707300721r49811895g2091804847c66847@mail.gmail.com>
	 <46AE0162.8070900@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_44460_18044498.1185904442090
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

A better way is following:
Cache the list of doc-ids for each category - you can cache this in a
BitSet.. a bit at index "doc-id" is on if the category is present in
document "doc-id", else it is off.

For user query, you need to calculate the BitSet, similar to above way. This
can be done in a HitCollector implementation.

Then simply do the intersection of user query's BitSet and each category
BitSet - find count of "on" bits, this would give you count of documents for
each category.

The BitSet operations I talked above are already provided in Java, so your
piece of code would be really small.

Thanks,
Shailendra Sharma
CTO, Ver Se' Innovation Private Ltd.
Bangalore, India

On 7/30/07, Dennis Kubes <kubes@apache.org> wrote:
>
> We found that a fast way to do this simply by running a query for each
> category and getting the maxDocs.  There would be one query for category
> getting a single hit.
>
> Dennis Kubes
>
> Erick Erickson wrote:
> > You might want to search the mail archive for "facets" or "faceted
> search"
> > (no quotes), as I *think* this might be relevant.
> >
> > Best
> > Erick
> >
> > On 7/26/07, Ramana Jelda <ramana.jelda@ciao-group.com> wrote:
> >> Hi ,
> >> Of course this statement is very expensive.
> >> -->document.get("CAMPCATID")==null?"":document.get("CAMPCATID");
> >>
> >> Use StringIndex/FieldCache/something similar to implement category
> >> counting.
> >> :)
> >>
> >> Jelda
> >>
> >>> -----Original Message-----
> >>> From: Bhavin Pandya [mailto:bhavinp@rediff.co.in]
> >>> Sent: Thursday, July 26, 2007 5:20 PM
> >>> To: java-user@lucene.apache.org
> >>> Subject: How to show category count with results?
> >>>
> >>> Hi,
> >>>
> >>> I want to show each category name and its count with results.
> >>> I achieved this using DocCollector but its very slow when no
> >>> of results in lacs... As fetching of documents from reader in
> >>> collect method is expensive...
> >>>
> >>> public void collect(int doc, float score) {
> >>>     Document document = mreader.document(doc);
> >>>     strcatid =
> >>> document.get("CAMPCATID")==null?"":document.get("CAMPCATID");
> >>>
> >>>     if (catcountmap.containsKey(strcatid))
> >>>     {
> >>>         // catid already exists in hashmap... increase count by one
> >>>
> >>>         value = ((Integer)catcountmap.get(strcatid)).intValue();
> >>>         value = value + 1;
> >>>         catcountmap.put(strcatid,new Integer(value));
> >>>     }
> >>>     else
> >>>         catcountmap.put(strcatid,new Integer(1));
> >>>
> >>> }
> >>>
> >>>
> >>> is there any other better way to achieve this ????
> >>>
> >>>
> >>> Thanks.
> >>> Bhavin pandya
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_44460_18044498.1185904442090--

From java-user-return-29526-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 31 17:57:41 2007
Return-Path: <java-user-return-29526-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58048 invoked from network); 31 Jul 2007 17:57:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jul 2007 17:57:41 -0000
Received: (qmail 9819 invoked by uid 500); 31 Jul 2007 17:57:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9791 invoked by uid 500); 31 Jul 2007 17:57:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9776 invoked by uid 99); 31 Jul 2007 17:57:34 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 10:57:34 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of askar.zaidi@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 17:57:28 +0000
Received: by ug-out-1314.google.com with SMTP id c2so128002ugf
        for <java-user@lucene.apache.org>; Tue, 31 Jul 2007 10:57:07 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=TaiS2wSJujR0YH8op95kZDqj9IsHZE6GSObFmmAPs971z0jCCyY1UPuKk+BDXI1DIr8ZA2vGSKLnP4dW5jsDXMDV8WrtH3HBeBbOngHoVx93eLchrgWNfVvhD84XeLAa0mVovcIzeqZvH6qgMsEh03ivyCsfbM1lPdgu8Kwztkg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=nEcEugTJtZfBbdfYWzOwzSgUyrY3Y9kTJVbzLZ+N7tgRIhWbSAQm5DHLrXu9ZGCEw33T3EbuBnuFnx5YooPDXqpxRlhbUxEa4NK++DsyD98i8NtMz2YHQsrQq7PAwefCr5a7+6S7oRi4amk7GJEkRPvwaTFrahCR7gvj5AWngfc=
Received: by 10.66.225.1 with SMTP id x1mr736803ugg.1185904627056;
        Tue, 31 Jul 2007 10:57:07 -0700 (PDT)
Received: by 10.66.251.15 with HTTP; Tue, 31 Jul 2007 10:57:07 -0700 (PDT)
Message-ID: <c0c0e1d40707311057m6d3aa565p7660aa5b7642fc52@mail.gmail.com>
Date: Tue, 31 Jul 2007 13:57:07 -0400
From: "Askar Zaidi" <askar.zaidi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Field score value
In-Reply-To: <c0c0e1d40707310842q2d300fe2pe997922101549097@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_48547_21086593.1185904627015"
References: <c0c0e1d40707310842q2d300fe2pe997922101549097@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_48547_21086593.1185904627015
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

Does anyone know how to retrieve the score of an individual field instead of
doing:

hits = score(i); This will get me the entire score of the document. I'd like
to get the score of a single field by specifying the field name.

thanks,
AZ

On 7/31/07, Askar Zaidi <askar.zaidi@gmail.com> wrote:
>
> Hey guys,
>
> I was wondering if there is a way to retrieve score of a field in a
> document ?
>
> If my document looks like this:
>
> {itemID},{field 1},{field 2}
>
> I'd like to get score of individual fields 1 and 2 rather than the score
> of the entire document.
>
> Is it possible ?
>
> thanks,
> AZ
>

------=_Part_48547_21086593.1185904627015--

From java-user-return-29527-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 31 18:03:31 2007
Return-Path: <java-user-return-29527-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62295 invoked from network); 31 Jul 2007 18:03:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jul 2007 18:03:30 -0000
Received: (qmail 27867 invoked by uid 500); 31 Jul 2007 18:03:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27698 invoked by uid 500); 31 Jul 2007 18:03:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27687 invoked by uid 99); 31 Jul 2007 18:03:24 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 11:03:24 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of askar.zaidi@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 18:03:18 +0000
Received: by ug-out-1314.google.com with SMTP id c2so128848ugf
        for <java-user@lucene.apache.org>; Tue, 31 Jul 2007 11:02:57 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Ok9WwhiDE+OJU8a2EIod11hzBU4of/lTGCJZLSC/EpXlXg2FE/yQc+296bg6HasrL7Psc+44V4oA2z+FnwHeRsCFyKaHXB3Sbfzgo+lLT/dfx2SazkVPu5LYALpOy9ZZgSateaYaWiqDClSCoM+WzgeJW95AdKceR9qPh2oDp8I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=i8yZxqaWKVoO4LdKbPPC7vvlIVfhRfO28QfyRKXMnb2lO9Ric0gwGsVnSYaBBqr4k9F244lOXHw+rfFHiv32A3j/oniD2wBv0sdW0utdXDcpEJkMxvTv1PJdoPAMlh+TQ/GoZO1p466ufofgA3VxjxWu5CAVDX3dvx34g2u0Ls8=
Received: by 10.66.236.13 with SMTP id j13mr713313ugh.1185904976867;
        Tue, 31 Jul 2007 11:02:56 -0700 (PDT)
Received: by 10.66.251.15 with HTTP; Tue, 31 Jul 2007 11:02:56 -0700 (PDT)
Message-ID: <c0c0e1d40707311102v4a7b5a45rb0337089cee7c3c6@mail.gmail.com>
Date: Tue, 31 Jul 2007 14:02:56 -0400
From: "Askar Zaidi" <askar.zaidi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Field score value
In-Reply-To: <c0c0e1d40707310842q2d300fe2pe997922101549097@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_48595_559494.1185904976811"
References: <c0c0e1d40707310842q2d300fe2pe997922101549097@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_48595_559494.1185904976811
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

To be more specific:

I want to retrieve the scores of individual fields inside a document so that
I can manipulate the score of one field. This is the requirement of my
application. After the manipulation I can add these scores and then show the
total.

thanks,

AZ

On 7/31/07, Askar Zaidi <askar.zaidi@gmail.com> wrote:
>
> Hey guys,
>
> I was wondering if there is a way to retrieve score of a field in a
> document ?
>
> If my document looks like this:
>
> {itemID},{field 1},{field 2}
>
> I'd like to get score of individual fields 1 and 2 rather than the score
> of the entire document.
>
> Is it possible ?
>
> thanks,
> AZ
>

------=_Part_48595_559494.1185904976811--

From java-user-return-29528-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 31 18:03:53 2007
Return-Path: <java-user-return-29528-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62489 invoked from network); 31 Jul 2007 18:03:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jul 2007 18:03:51 -0000
Received: (qmail 29585 invoked by uid 500); 31 Jul 2007 18:03:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29542 invoked by uid 500); 31 Jul 2007 18:03:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29531 invoked by uid 99); 31 Jul 2007 18:03:45 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 11:03:45 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of shailendra.sharma@gmail.com designates 66.249.90.179 as permitted sender)
Received: from [66.249.90.179] (HELO ik-out-1112.google.com) (66.249.90.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 18:03:39 +0000
Received: by ik-out-1112.google.com with SMTP id b32so1093737ika
        for <java-user@lucene.apache.org>; Tue, 31 Jul 2007 11:03:17 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=VVGpFbST3HvRFi9CHLyp8K1z5vu695hyPqhhDwalqyoYYi5tqqjL59cm4j88b64CGz9P9O99F94krNOfeJOI7YevPYQYGJFYVx7iHzfThHmwvrj4hjroZbAQ33VtLBzdVXofSUz3To3GuAgTjtisGbAm4Bse7FrDx7pV/QdmDag=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=bZOHqkTRJMIGKVa8n5gr1jhm74pxKrhZn6bx8fREsrrkja4FlNjeNJvW6Hzw9eAwqlpDs0wiCjRYbinmpc8q5Fqs3MWIbNrJjL/ULq2FDielifWmtzYgv+l62LisSYCeBkh7ADXXtO74iW9t8Xuxp50jxI6EyDfhxiNE2iT9uw8=
Received: by 10.142.225.11 with SMTP id x11mr279049wfg.1185904996464;
        Tue, 31 Jul 2007 11:03:16 -0700 (PDT)
Received: by 10.142.102.21 with HTTP; Tue, 31 Jul 2007 11:03:16 -0700 (PDT)
Message-ID: <d27fa17e0707311103s456ecfd8qc4a8bd5039e01710@mail.gmail.com>
Date: Tue, 31 Jul 2007 23:33:16 +0530
From: "Shailendra Sharma" <shailendra.sharma@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Field score value
In-Reply-To: <c0c0e1d40707310842q2d300fe2pe997922101549097@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_44572_29165860.1185904996433"
References: <c0c0e1d40707310842q2d300fe2pe997922101549097@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_44572_29165860.1185904996433
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Though I am not sure what is the possible use case for thing like below, but
here is the pointer:

Using IndexSearcher you can get the "Explanation" for the given query and
document-id. Complex Explanation has multiple sub-explanations and so forth.
Simple Explanation would contain the weight of the query (queryWeight) and
weight of the field (fieldWeight).

You can simply write some method which consumes Explanation and returns you
the score for given field. Note that, there might be explanations for the
same field - so you need to add them. Don't forget to multiply by factors
like boost-factor to get the exact score for a given field.

Thanks, Shailendra

On 7/31/07, Askar Zaidi <askar.zaidi@gmail.com> wrote:
>
> Hey guys,
>
> I was wondering if there is a way to retrieve score of a field in a
> document
> ?
>
> If my document looks like this:
>
> {itemID},{field 1},{field 2}
>
> I'd like to get score of individual fields 1 and 2 rather than the score
> of
> the entire document.
>
> Is it possible ?
>
> thanks,
> AZ
>

------=_Part_44572_29165860.1185904996433--

From java-user-return-29529-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 31 18:21:16 2007
Return-Path: <java-user-return-29529-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69757 invoked from network); 31 Jul 2007 18:21:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jul 2007 18:21:15 -0000
Received: (qmail 70429 invoked by uid 500); 31 Jul 2007 18:21:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70396 invoked by uid 500); 31 Jul 2007 18:21:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70385 invoked by uid 99); 31 Jul 2007 18:21:08 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 11:21:08 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [213.133.33.40] (HELO smtp.is.nl) (213.133.33.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 18:21:00 +0000
Received: from [213.133.51.241] (HELO hai01.hippo.local)
  by smtp.is.nl (CommuniGate Pro SMTP 5.0.10)
  with ESMTP id 20516680 for java-user@lucene.apache.org; Tue, 31 Jul 2007 20:20:37 +0200
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.0.6619.12
Subject: RE: How to show category count with results?
Date: Tue, 31 Jul 2007 20:20:23 +0200
Message-ID: <A955EA1F8FE31749AEC8C998082F6C7C01ECDB47@hai01.hippo.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: How to show category count with results?
Thread-Index: AcfTm9ucDiy9x+TCSTmVM+davgyt4AAAiJuQ
From: "Ard Schrijvers" <a.schrijvers@hippo.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hello Shailendra,

AFAICS you are reasoning from a static doc-id POV, while documents do =
not have a static doc-id in lucene. When you have a frequently updated =
index, you'll end up invalidating cached BitSet's (which as the number =
of categories and number of documents grow can absorb quite amounts of =
memory as well), because merging of segments and lucene optimizations =
take place (shuffling doc-id's around (actually compressing where =
'holes' are from deleted documents)). So, obviously, you need to =
minimize segment merging which you can control to some level, but after =
merging, you frequently need to compute and cache your BitSet's again. =
For many categories and many documents, this is not fast enough. If your =
index changes only a few times, you are fine (not sure how solr handles =
this, but they ofcourse build facetted navigation in it). Otherwise, you =
might try having some more or less "static" persistent index, and a =
volatile memory index in which documents are added. When a doc is =
updated, you need to set the correct bits in the cached BitSets of the =
persistent index to 0. Think it is not very easy, but might just work...

Regards Ard

>=20
> A better way is following:
> Cache the list of doc-ids for each category - you can cache this in a
> BitSet.. a bit at index "doc-id" is on if the category is present in
> document "doc-id", else it is off.
>=20
> For user query, you need to calculate the BitSet, similar to=20
> above way. This
> can be done in a HitCollector implementation.
>=20
> Then simply do the intersection of user query's BitSet and=20
> each category
> BitSet - find count of "on" bits, this would give you count=20
> of documents for
> each category.
>=20
> The BitSet operations I talked above are already provided in=20
> Java, so your
> piece of code would be really small.
>=20
> Thanks,
> Shailendra Sharma
> CTO, Ver Se' Innovation Private Ltd.
> Bangalore, India
>=20
> On 7/30/07, Dennis Kubes <kubes@apache.org> wrote:
> >
> > We found that a fast way to do this simply by running a=20
> query for each
> > category and getting the maxDocs.  There would be one query=20
> for category
> > getting a single hit.
> >
> > Dennis Kubes
> >
> > Erick Erickson wrote:
> > > You might want to search the mail archive for "facets" or "faceted
> > search"
> > > (no quotes), as I *think* this might be relevant.
> > >
> > > Best
> > > Erick
> > >
> > > On 7/26/07, Ramana Jelda <ramana.jelda@ciao-group.com> wrote:
> > >> Hi ,
> > >> Of course this statement is very expensive.
> > >> =
-->document.get("CAMPCATID")=3D=3Dnull?"":document.get("CAMPCATID");
> > >>
> > >> Use StringIndex/FieldCache/something similar to=20
> implement category
> > >> counting.
> > >> :)
> > >>
> > >> Jelda
> > >>
> > >>> -----Original Message-----
> > >>> From: Bhavin Pandya [mailto:bhavinp@rediff.co.in]
> > >>> Sent: Thursday, July 26, 2007 5:20 PM
> > >>> To: java-user@lucene.apache.org
> > >>> Subject: How to show category count with results?
> > >>>
> > >>> Hi,
> > >>>
> > >>> I want to show each category name and its count with results.
> > >>> I achieved this using DocCollector but its very slow when no
> > >>> of results in lacs... As fetching of documents from reader in
> > >>> collect method is expensive...
> > >>>
> > >>> public void collect(int doc, float score) {
> > >>>     Document document =3D mreader.document(doc);
> > >>>     strcatid =3D
> > >>> =
document.get("CAMPCATID")=3D=3Dnull?"":document.get("CAMPCATID");
> > >>>
> > >>>     if (catcountmap.containsKey(strcatid))
> > >>>     {
> > >>>         // catid already exists in hashmap... increase=20
> count by one
> > >>>
> > >>>         value =3D =
((Integer)catcountmap.get(strcatid)).intValue();
> > >>>         value =3D value + 1;
> > >>>         catcountmap.put(strcatid,new Integer(value));
> > >>>     }
> > >>>     else
> > >>>         catcountmap.put(strcatid,new Integer(1));
> > >>>
> > >>> }
> > >>>
> > >>>
> > >>> is there any other better way to achieve this ????
> > >>>
> > >>>
> > >>> Thanks.
> > >>> Bhavin pandya
> > >>
> > >>=20
> ---------------------------------------------------------------------
> > >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >> For additional commands, e-mail: java-user-help@lucene.apache.org
> > >>
> > >>
> > >
> >
> >=20
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29530-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 31 18:22:45 2007
Return-Path: <java-user-return-29530-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70111 invoked from network); 31 Jul 2007 18:22:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jul 2007 18:22:44 -0000
Received: (qmail 73314 invoked by uid 500); 31 Jul 2007 18:22:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73284 invoked by uid 500); 31 Jul 2007 18:22:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73273 invoked by uid 99); 31 Jul 2007 18:22:37 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 11:22:37 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.191 as permitted sender)
Received: from [209.85.128.191] (HELO fk-out-0910.google.com) (209.85.128.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 18:22:32 +0000
Received: by fk-out-0910.google.com with SMTP id z23so465589fkz
        for <java-user@lucene.apache.org>; Tue, 31 Jul 2007 11:22:11 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Bo94YpT28SmdrVdIdLmtp80vtqY4c14161sbufO36FfUzaGjO1Zu+mu6gBZ7K9uP/UqsbGogl7L64xEr/mnmX94S/CPEMvwQIIfgloUbHSeUWrqLz91TXPAOiwsGFQ5rMSfSLyUQIeVhiuKKyl1MAFxpEzoY3enmVnTMyLla6lE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=YrEayJSNtn8bqD+NyHPH5xZOYXy/giGxbx3JP6eYdeyi5iqFr+rc4jq6d5j0uSqiO1oqeq0hLaTVYrnHoPYjBuObS/uM8IlqKhG1ho1jygqjQ/H1ue5eplrK91EWd1AX46ZxfbKS8HqIX+VErIWOHKwrbBYEypzVQIhcZ04O4vA=
Received: by 10.82.186.5 with SMTP id j5mr6009425buf.1185906130896;
        Tue, 31 Jul 2007 11:22:10 -0700 (PDT)
Received: by 10.82.190.14 with HTTP; Tue, 31 Jul 2007 11:22:10 -0700 (PDT)
Message-ID: <359a92830707311122i54bc49d4y9a8f34b068aaca9e@mail.gmail.com>
Date: Tue, 31 Jul 2007 14:22:10 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Field score value
In-Reply-To: <c0c0e1d40707311102v4a7b5a45rb0337089cee7c3c6@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_34540_1264712.1185906130877"
References: <c0c0e1d40707310842q2d300fe2pe997922101549097@mail.gmail.com>
	 <c0c0e1d40707311102v4a7b5a45rb0337089cee7c3c6@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_34540_1264712.1185906130877
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Wouldn't boosting handle this for you?

On 7/31/07, Askar Zaidi <askar.zaidi@gmail.com> wrote:
>
> To be more specific:
>
> I want to retrieve the scores of individual fields inside a document so
> that
> I can manipulate the score of one field. This is the requirement of my
> application. After the manipulation I can add these scores and then show
> the
> total.
>
> thanks,
>
> AZ
>
> On 7/31/07, Askar Zaidi <askar.zaidi@gmail.com> wrote:
> >
> > Hey guys,
> >
> > I was wondering if there is a way to retrieve score of a field in a
> > document ?
> >
> > If my document looks like this:
> >
> > {itemID},{field 1},{field 2}
> >
> > I'd like to get score of individual fields 1 and 2 rather than the score
> > of the entire document.
> >
> > Is it possible ?
> >
> > thanks,
> > AZ
> >
>

------=_Part_34540_1264712.1185906130877--

From java-user-return-29531-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 31 18:32:54 2007
Return-Path: <java-user-return-29531-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72911 invoked from network); 31 Jul 2007 18:32:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jul 2007 18:32:54 -0000
Received: (qmail 88552 invoked by uid 500); 31 Jul 2007 18:32:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88510 invoked by uid 500); 31 Jul 2007 18:32:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88499 invoked by uid 99); 31 Jul 2007 18:32:44 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 11:32:44 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of askar.zaidi@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 18:32:38 +0000
Received: by ug-out-1314.google.com with SMTP id c2so133396ugf
        for <java-user@lucene.apache.org>; Tue, 31 Jul 2007 11:32:17 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=CoaPo99E1dxqX+e1F7MSqAfVhBEEdaza7zVe4rrhxJzLkXVdLYFTrgR+TOMEETVeO4DirWHpM06ij4d4OnXTQq4R03CCDA6JkH4rqqdq+l6c9okGEFWGsSxXwx4Rr8Tz2O/AomEG0DHJZMohkz7NuQX0LUslncWnT81r0MMbyok=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=eeC256CkbOw+FFHcDoYP38meloc0OfeqWsnfukMF0uF+n89Jxv/QgAN48mjf8JGU89dYvzjSnGs8K6LQ02ry9w2h4bTWbOL479aFYkCATGkxHSp60/MwpIokDQNgo6PTUzPIvdYFdeK/p8eZuyBcq4ZkBQFbtry7e/dmxQasQVA=
Received: by 10.66.248.5 with SMTP id v5mr753937ugh.1185906736829;
        Tue, 31 Jul 2007 11:32:16 -0700 (PDT)
Received: by 10.66.251.15 with HTTP; Tue, 31 Jul 2007 11:32:16 -0700 (PDT)
Message-ID: <c0c0e1d40707311132h27906b58oefb6c1918117bbc6@mail.gmail.com>
Date: Tue, 31 Jul 2007 14:32:16 -0400
From: "Askar Zaidi" <askar.zaidi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Field score value
In-Reply-To: <359a92830707311122i54bc49d4y9a8f34b068aaca9e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_48971_8104327.1185906736737"
References: <c0c0e1d40707310842q2d300fe2pe997922101549097@mail.gmail.com>
	 <c0c0e1d40707311102v4a7b5a45rb0337089cee7c3c6@mail.gmail.com>
	 <359a92830707311122i54bc49d4y9a8f34b068aaca9e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_48971_8104327.1185906736737
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Boosting during Indexing or boosting during search ?

I have 4 fields:

{tags},{title},{summary},{contents}

Typically a phrase occurs too many times in contents as compared to the
other fields. If I get the score of contents field , I can pass it through
an adjuster function which will bring the score down. Something like:

public static double adjuster(double count){

                double newCount;
                newCount = 1/Math.exp(count);
                System.out.println(newCount);
                return newCount;

                }

Do you mean I could boost the values of the other 3 fields ? Will that help
? Would there be a way to bring down the score of the contents field ?

thanks,
AZ


On 7/31/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> Wouldn't boosting handle this for you?
>
> On 7/31/07, Askar Zaidi <askar.zaidi@gmail.com> wrote:
> >
> > To be more specific:
> >
> > I want to retrieve the scores of individual fields inside a document so
> > that
> > I can manipulate the score of one field. This is the requirement of my
> > application. After the manipulation I can add these scores and then show
> > the
> > total.
> >
> > thanks,
> >
> > AZ
> >
> > On 7/31/07, Askar Zaidi <askar.zaidi@gmail.com> wrote:
> > >
> > > Hey guys,
> > >
> > > I was wondering if there is a way to retrieve score of a field in a
> > > document ?
> > >
> > > If my document looks like this:
> > >
> > > {itemID},{field 1},{field 2}
> > >
> > > I'd like to get score of individual fields 1 and 2 rather than the
> score
> > > of the entire document.
> > >
> > > Is it possible ?
> > >
> > > thanks,
> > > AZ
> > >
> >
>

------=_Part_48971_8104327.1185906736737--

From java-user-return-29532-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 31 18:39:03 2007
Return-Path: <java-user-return-29532-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75425 invoked from network); 31 Jul 2007 18:39:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jul 2007 18:39:03 -0000
Received: (qmail 98554 invoked by uid 500); 31 Jul 2007 18:38:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98519 invoked by uid 500); 31 Jul 2007 18:38:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98508 invoked by uid 99); 31 Jul 2007 18:38:56 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 11:38:56 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.184 as permitted sender)
Received: from [209.85.128.184] (HELO fk-out-0910.google.com) (209.85.128.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 18:38:50 +0000
Received: by fk-out-0910.google.com with SMTP id z23so468780fkz
        for <java-user@lucene.apache.org>; Tue, 31 Jul 2007 11:38:28 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=LsWEEgf+MHPX6W43OGU2z2Fdzb3NFkI9cgPlp046W+vwqYLCTA+cf8Yq08TvhWjkltf6FFHOOJjiMd2UbF5Z2WgviXtW+JwETpP+4GaJhcRVtCs9g+5cjG++6IN2zReWRbwn/YJsXrImv4/UWOTIPUKq4Vfi1Zap/s0KrhBqXcA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Sr1XV6G0D4dXtopqAk6zxhtMatngcTgSrHm7ktv7DBkn0vRlDH72boT5mropdsvZOoJLcD5QgCqgMXrhJk/JAhzGCeIj2CPXTffjN1+npkWJHTFn0NaTzqKmaHJ27JRX8KIzf5wL2Tdn0RXwiLd2je2N7LhHPdyGPeDb2EzNycE=
Received: by 10.82.108.9 with SMTP id g9mr6026233buc.1185907108071;
        Tue, 31 Jul 2007 11:38:28 -0700 (PDT)
Received: by 10.82.190.14 with HTTP; Tue, 31 Jul 2007 11:38:28 -0700 (PDT)
Message-ID: <359a92830707311138r50dc8504jdac65c344dbdb2b4@mail.gmail.com>
Date: Tue, 31 Jul 2007 14:38:28 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Field score value
In-Reply-To: <c0c0e1d40707311132h27906b58oefb6c1918117bbc6@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_34912_7860625.1185907108038"
References: <c0c0e1d40707310842q2d300fe2pe997922101549097@mail.gmail.com>
	 <c0c0e1d40707311102v4a7b5a45rb0337089cee7c3c6@mail.gmail.com>
	 <359a92830707311122i54bc49d4y9a8f34b068aaca9e@mail.gmail.com>
	 <c0c0e1d40707311132h27906b58oefb6c1918117bbc6@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_34912_7860625.1185907108038
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Boost the other three fields at search time. Boosting during
index time expresses "this document's title is worth more than
other doucments' titles". Boosting during search time expresses
"I care about matches on this clause more than I do on other
clauses".

Will it help? How should I know? It's *your* application and
*you* are the one who is dissatisfied with the current scoring <G>.

All I can say is try it and find out. You might consider using Luke
to try various boosts without having to mess with too much code.

Erick

On 7/31/07, Askar Zaidi <askar.zaidi@gmail.com> wrote:
>
> Boosting during Indexing or boosting during search ?
>
> I have 4 fields:
>
> {tags},{title},{summary},{contents}
>
> Typically a phrase occurs too many times in contents as compared to the
> other fields. If I get the score of contents field , I can pass it through
> an adjuster function which will bring the score down. Something like:
>
> public static double adjuster(double count){
>
>                 double newCount;
>                 newCount = 1/Math.exp(count);
>                 System.out.println(newCount);
>                 return newCount;
>
>                 }
>
> Do you mean I could boost the values of the other 3 fields ? Will that
> help
> ? Would there be a way to bring down the score of the contents field ?
>
> thanks,
> AZ
>
>
> On 7/31/07, Erick Erickson <erickerickson@gmail.com> wrote:
> >
> > Wouldn't boosting handle this for you?
> >
> > On 7/31/07, Askar Zaidi <askar.zaidi@gmail.com> wrote:
> > >
> > > To be more specific:
> > >
> > > I want to retrieve the scores of individual fields inside a document
> so
> > > that
> > > I can manipulate the score of one field. This is the requirement of my
> > > application. After the manipulation I can add these scores and then
> show
> > > the
> > > total.
> > >
> > > thanks,
> > >
> > > AZ
> > >
> > > On 7/31/07, Askar Zaidi <askar.zaidi@gmail.com> wrote:
> > > >
> > > > Hey guys,
> > > >
> > > > I was wondering if there is a way to retrieve score of a field in a
> > > > document ?
> > > >
> > > > If my document looks like this:
> > > >
> > > > {itemID},{field 1},{field 2}
> > > >
> > > > I'd like to get score of individual fields 1 and 2 rather than the
> > score
> > > > of the entire document.
> > > >
> > > > Is it possible ?
> > > >
> > > > thanks,
> > > > AZ
> > > >
> > >
> >
>

------=_Part_34912_7860625.1185907108038--

From java-user-return-29533-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 31 19:18:45 2007
Return-Path: <java-user-return-29533-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90984 invoked from network); 31 Jul 2007 19:18:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jul 2007 19:18:43 -0000
Received: (qmail 6629 invoked by uid 500); 31 Jul 2007 19:18:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6595 invoked by uid 500); 31 Jul 2007 19:18:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6563 invoked by uid 99); 31 Jul 2007 19:18:36 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 12:18:36 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of askar.zaidi@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 19:18:30 +0000
Received: by ug-out-1314.google.com with SMTP id c2so140457ugf
        for <java-user@lucene.apache.org>; Tue, 31 Jul 2007 12:18:08 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=RZqWADkk0SB/YRwd5uAGwWiv2MT1Gfya6x+mhrsWnyaSsIB+f/WhP/X6UsehWGsWzsMRYIyG7Qx/WFnm5vNxI2aho1YuaEoeZkp1hM5EVAl6rlpXitIg1S5D2gmEw3kSqwXwDEXGjBvw1z03zgV1w2851rrU9gJbx+FJWbEzQ8s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=k1I2FDBdAg/VySzzfBgVu+gnGK8auQuZ4mLh7oEHYux9U6ibCrnG4yw+OzV78WvotsKeIymEYOBqMjsmHUFZqGja4FvRRe3J1p+LDVLCu7Rw+0X/T9Fnyp6GmMFZeta5ECh6HD87dRKpAA8SrWFKRawn4xVmDbbdmmV5o1eQwyM=
Received: by 10.67.119.13 with SMTP id w13mr762619ugm.1185909488573;
        Tue, 31 Jul 2007 12:18:08 -0700 (PDT)
Received: by 10.66.251.15 with HTTP; Tue, 31 Jul 2007 12:18:08 -0700 (PDT)
Message-ID: <c0c0e1d40707311218t13b06559s26e9eb67422cc8d0@mail.gmail.com>
Date: Tue, 31 Jul 2007 15:18:08 -0400
From: "Askar Zaidi" <askar.zaidi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Field score value
In-Reply-To: <359a92830707311138r50dc8504jdac65c344dbdb2b4@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_49668_24332904.1185909488513"
References: <c0c0e1d40707310842q2d300fe2pe997922101549097@mail.gmail.com>
	 <c0c0e1d40707311102v4a7b5a45rb0337089cee7c3c6@mail.gmail.com>
	 <359a92830707311122i54bc49d4y9a8f34b068aaca9e@mail.gmail.com>
	 <c0c0e1d40707311132h27906b58oefb6c1918117bbc6@mail.gmail.com>
	 <359a92830707311138r50dc8504jdac65c344dbdb2b4@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_49668_24332904.1185909488513
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Using the Explanation method can help me get the exact score of a field. I
am concerned with how I can access it , this is what I am doing:


 for(int i=0;i<hitCount;i++){
                doc = hits.doc(i);
                score = hits.score(i);
                int ID = hits.id(i);
                System.out.println( id + "\t" + score + "\t" + doc.get
("item"));
                Explanation exp = searcher.explain( query , ID );
                System.out.println( exp.toString() );
                }

This shows me o/p as follows (trimmed output):
6.6197186E-4 = (MATCH) product of:
  0.0033098592 = (MATCH) sum of:
    0.0033098592 = (MATCH) weight(contents:innovation in 4), product of:
      0.28244132 = queryWeight(contents:innovation), product of:
        1.0 = idf(docFreq=5)
        0.28244132 = queryNorm
      0.01171875 = (MATCH) fieldWeight(contents:innovation in 4), product
of:
        1.0 = tf(termFreq(contents:innovation)=1)
        1.0 = idf(docFreq=5)
        0.01171875 = fieldNorm(field=contents, doc=4)
  0.2 = coord(1/5)

The 6.6197E-4 is the total score of the document. How can I access the
fieldWeight ? Any example would be great.

thanks,
AZ


On 7/31/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> Boost the other three fields at search time. Boosting during
> index time expresses "this document's title is worth more than
> other doucments' titles". Boosting during search time expresses
> "I care about matches on this clause more than I do on other
> clauses".
>
> Will it help? How should I know? It's *your* application and
> *you* are the one who is dissatisfied with the current scoring <G>.
>
> All I can say is try it and find out. You might consider using Luke
> to try various boosts without having to mess with too much code.
>
> Erick
>
> On 7/31/07, Askar Zaidi <askar.zaidi@gmail.com> wrote:
> >
> > Boosting during Indexing or boosting during search ?
> >
> > I have 4 fields:
> >
> > {tags},{title},{summary},{contents}
> >
> > Typically a phrase occurs too many times in contents as compared to the
> > other fields. If I get the score of contents field , I can pass it
> through
> > an adjuster function which will bring the score down. Something like:
> >
> > public static double adjuster(double count){
> >
> >                 double newCount;
> >                 newCount = 1/Math.exp(count);
> >                 System.out.println(newCount);
> >                 return newCount;
> >
> >                 }
> >
> > Do you mean I could boost the values of the other 3 fields ? Will that
> > help
> > ? Would there be a way to bring down the score of the contents field ?
> >
> > thanks,
> > AZ
> >
> >
> > On 7/31/07, Erick Erickson <erickerickson@gmail.com> wrote:
> > >
> > > Wouldn't boosting handle this for you?
> > >
> > > On 7/31/07, Askar Zaidi <askar.zaidi@gmail.com> wrote:
> > > >
> > > > To be more specific:
> > > >
> > > > I want to retrieve the scores of individual fields inside a document
> > so
> > > > that
> > > > I can manipulate the score of one field. This is the requirement of
> my
> > > > application. After the manipulation I can add these scores and then
> > show
> > > > the
> > > > total.
> > > >
> > > > thanks,
> > > >
> > > > AZ
> > > >
> > > > On 7/31/07, Askar Zaidi <askar.zaidi@gmail.com> wrote:
> > > > >
> > > > > Hey guys,
> > > > >
> > > > > I was wondering if there is a way to retrieve score of a field in
> a
> > > > > document ?
> > > > >
> > > > > If my document looks like this:
> > > > >
> > > > > {itemID},{field 1},{field 2}
> > > > >
> > > > > I'd like to get score of individual fields 1 and 2 rather than the
> > > score
> > > > > of the entire document.
> > > > >
> > > > > Is it possible ?
> > > > >
> > > > > thanks,
> > > > > AZ
> > > > >
> > > >
> > >
> >
>

------=_Part_49668_24332904.1185909488513--

From java-user-return-29534-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 31 20:01:22 2007
Return-Path: <java-user-return-29534-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14921 invoked from network); 31 Jul 2007 20:01:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jul 2007 20:01:21 -0000
Received: (qmail 7160 invoked by uid 500); 31 Jul 2007 20:01:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6902 invoked by uid 500); 31 Jul 2007 20:01:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6881 invoked by uid 99); 31 Jul 2007 20:01:14 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 13:01:14 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of askar.zaidi@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 20:01:08 +0000
Received: by ug-out-1314.google.com with SMTP id c2so147060ugf
        for <java-user@lucene.apache.org>; Tue, 31 Jul 2007 13:00:46 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=JWy9uKb91gt3McBRl/linkePs05QMkl/yhCxDixQA4baok6LwbgdizrMsLNSbChvVPTyG2vG2yg3sOtlwfq2twUNAuPRpOWj5MzNapROHa8FyQ5JigFzNarEJoWGvmAIE0zXDsm1ddGveapgIFgfKIbV/qGJEi+YNOxDS63QFqI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=YT/m423PqdFbczP2qOJAglNFlz6cc3gSBun+aaY0ZkmFNXCyWlktR9u8zDlQRxMrpzS4BqzPQlPlpwZEqn2xkIS2Q+0+hdfZxuIlKJiE9cg+nGMa067U0nTh4tOjWr2vZKfofMf5eiMT2p29+UsWSZVjsb3H+yML5in7pwc2hi0=
Received: by 10.67.88.17 with SMTP id q17mr806592ugl.1185912045927;
        Tue, 31 Jul 2007 13:00:45 -0700 (PDT)
Received: by 10.66.251.15 with HTTP; Tue, 31 Jul 2007 13:00:45 -0700 (PDT)
Message-ID: <c0c0e1d40707311300q3a639fach10fe5dc0f6b163a7@mail.gmail.com>
Date: Tue, 31 Jul 2007 16:00:45 -0400
From: "Askar Zaidi" <askar.zaidi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Field score value
In-Reply-To: <c0c0e1d40707311218t13b06559s26e9eb67422cc8d0@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_50264_23834087.1185912045883"
References: <c0c0e1d40707310842q2d300fe2pe997922101549097@mail.gmail.com>
	 <c0c0e1d40707311102v4a7b5a45rb0337089cee7c3c6@mail.gmail.com>
	 <359a92830707311122i54bc49d4y9a8f34b068aaca9e@mail.gmail.com>
	 <c0c0e1d40707311132h27906b58oefb6c1918117bbc6@mail.gmail.com>
	 <359a92830707311138r50dc8504jdac65c344dbdb2b4@mail.gmail.com>
	 <c0c0e1d40707311218t13b06559s26e9eb67422cc8d0@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_50264_23834087.1185912045883
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'll have to use StringBuffer and get the Explanation in it as a String.
Then parse StringBuffer to get the scores of each field, then add them and
then boost the scores. That seems to be a non-trivial task. Is there any
other way around it ?

Considering Boosting, can I boost the score of a field ? I came across
Boosting of a term in the query so that would mean,

"apache^4 jakarta"

This means I am more keen to find apache than jakarta. I am keen to boost
the score of a field, how can that be done ?

On 7/31/07, Askar Zaidi <askar.zaidi@gmail.com> wrote:
>
> Using the Explanation method can help me get the exact score of a field. I
> am concerned with how I can access it , this is what I am doing:
>
>
>  for(int i=0;i<hitCount;i++){
>                 doc = hits.doc(i);
>                 score = hits.score(i);
>                 int ID = hits.id(i);
>                 System.out.println( id + "\t" + score + "\t" + doc.get
> ("item"));
>                 Explanation exp = searcher.explain( query , ID );
>                 System.out.println( exp.toString() );
>                 }
>
> This shows me o/p as follows (trimmed output):
> 6.6197186E-4 = (MATCH) product of:
>   0.0033098592 = (MATCH) sum of:
>     0.0033098592 = (MATCH) weight(contents:innovation in 4), product of:
>       0.28244132 = queryWeight(contents:innovation), product of:
>         1.0 = idf(docFreq=5)
>         0.28244132 = queryNorm
>       0.01171875 = (MATCH) fieldWeight(contents:innovation in 4), product
> of:
>         1.0 = tf(termFreq(contents:innovation)=1)
>         1.0 = idf(docFreq=5)
>         0.01171875 = fieldNorm(field=contents, doc=4)
>   0.2 = coord(1/5)
>
> The 6.6197E-4 is the total score of the document. How can I access the
> fieldWeight ? Any example would be great.
>
> thanks,
> AZ
>
>
> On 7/31/07, Erick Erickson <erickerickson@gmail.com> wrote:
> >
> > Boost the other three fields at search time. Boosting during
> > index time expresses "this document's title is worth more than
> > other doucments' titles". Boosting during search time expresses
> > "I care about matches on this clause more than I do on other
> > clauses".
> >
> > Will it help? How should I know? It's *your* application and
> > *you* are the one who is dissatisfied with the current scoring <G>.
> >
> > All I can say is try it and find out. You might consider using Luke
> > to try various boosts without having to mess with too much code.
> >
> > Erick
> >
> > On 7/31/07, Askar Zaidi <askar.zaidi@gmail.com> wrote:
> > >
> > > Boosting during Indexing or boosting during search ?
> > >
> > > I have 4 fields:
> > >
> > > {tags},{title},{summary},{contents}
> > >
> > > Typically a phrase occurs too many times in contents as compared to
> > the
> > > other fields. If I get the score of contents field , I can pass it
> > through
> > > an adjuster function which will bring the score down. Something like:
> > >
> > > public static double adjuster(double count){
> > >
> > >                 double newCount;
> > >                 newCount = 1/Math.exp(count);
> > >                 System.out.println(newCount);
> > >                 return newCount;
> > >
> > >                 }
> > >
> > > Do you mean I could boost the values of the other 3 fields ? Will that
> > > help
> > > ? Would there be a way to bring down the score of the contents field ?
> > >
> > > thanks,
> > > AZ
> > >
> > >
> > > On 7/31/07, Erick Erickson <erickerickson@gmail.com > wrote:
> > > >
> > > > Wouldn't boosting handle this for you?
> > > >
> > > > On 7/31/07, Askar Zaidi <askar.zaidi@gmail.com> wrote:
> > > > >
> > > > > To be more specific:
> > > > >
> > > > > I want to retrieve the scores of individual fields inside a
> > document
> > > so
> > > > > that
> > > > > I can manipulate the score of one field. This is the requirement
> > of my
> > > > > application. After the manipulation I can add these scores and
> > then
> > > show
> > > > > the
> > > > > total.
> > > > >
> > > > > thanks,
> > > > >
> > > > > AZ
> > > > >
> > > > > On 7/31/07, Askar Zaidi <askar.zaidi@gmail.com> wrote:
> > > > > >
> > > > > > Hey guys,
> > > > > >
> > > > > > I was wondering if there is a way to retrieve score of a field
> > in a
> > > > > > document ?
> > > > > >
> > > > > > If my document looks like this:
> > > > > >
> > > > > > {itemID},{field 1},{field 2}
> > > > > >
> > > > > > I'd like to get score of individual fields 1 and 2 rather than
> > the
> > > > score
> > > > > > of the entire document.
> > > > > >
> > > > > > Is it possible ?
> > > > > >
> > > > > > thanks,
> > > > > > AZ
> > > > > >
> > > > >
> > > >
> > >
> >
>
>

------=_Part_50264_23834087.1185912045883--

From java-user-return-29535-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 31 20:05:04 2007
Return-Path: <java-user-return-29535-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16307 invoked from network); 31 Jul 2007 20:05:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jul 2007 20:05:02 -0000
Received: (qmail 16654 invoked by uid 500); 31 Jul 2007 20:04:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16628 invoked by uid 500); 31 Jul 2007 20:04:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16617 invoked by uid 99); 31 Jul 2007 20:04:55 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 13:04:55 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of askar.zaidi@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 20:04:48 +0000
Received: by ug-out-1314.google.com with SMTP id c2so147609ugf
        for <java-user@lucene.apache.org>; Tue, 31 Jul 2007 13:04:27 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=BMb9uJ4kMKzHEwP7iecYywTLgkGH8PUMg22H7L5zr3X509BMDYFGMV6zbENNPMy4VNtA7k+2ZYy0kwbouooq+DyW9q7Y7JC8CGmm1iHjPQACc+kGh2nEH920BovPE4kEZ4wlyZyeFBA5GaoKUdzrtMnIzvfFLmHNdLQCsjUi0Hg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=qXBdFjS5hao8hYXIyG43X+mMK3qe84kg0YMFg4C2Kw8+EWOK1mz6iwrXs4jtm1eQyVSL2n7X4g9/IiisGf22lGGCrgfEDHbts810EFH4Ae4TCPxC/FI2m8cH+LOdA/ldTp/ISPyy5hqv7Opu+aPbci2p/1FPVjXjxUmZ5mxQ9io=
Received: by 10.67.102.16 with SMTP id e16mr788612ugm.1185912266503;
        Tue, 31 Jul 2007 13:04:26 -0700 (PDT)
Received: by 10.66.251.15 with HTTP; Tue, 31 Jul 2007 13:04:26 -0700 (PDT)
Message-ID: <c0c0e1d40707311304m22ddb0f7kd445359b0c24bd89@mail.gmail.com>
Date: Tue, 31 Jul 2007 16:04:26 -0400
From: "Askar Zaidi" <askar.zaidi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Field score value
In-Reply-To: <c0c0e1d40707311300q3a639fach10fe5dc0f6b163a7@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_50312_10040364.1185912266449"
References: <c0c0e1d40707310842q2d300fe2pe997922101549097@mail.gmail.com>
	 <c0c0e1d40707311102v4a7b5a45rb0337089cee7c3c6@mail.gmail.com>
	 <359a92830707311122i54bc49d4y9a8f34b068aaca9e@mail.gmail.com>
	 <c0c0e1d40707311132h27906b58oefb6c1918117bbc6@mail.gmail.com>
	 <359a92830707311138r50dc8504jdac65c344dbdb2b4@mail.gmail.com>
	 <c0c0e1d40707311218t13b06559s26e9eb67422cc8d0@mail.gmail.com>
	 <c0c0e1d40707311300q3a639fach10fe5dc0f6b163a7@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_50312_10040364.1185912266449
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Guys,

Heres someone who did this hack:

http://blog.mindbridge.com/?p=55

Cheers,
AZ

On 7/31/07, Askar Zaidi <askar.zaidi@gmail.com> wrote:
>
> I'll have to use StringBuffer and get the Explanation in it as a String.
> Then parse StringBuffer to get the scores of each field, then add them and
> then boost the scores. That seems to be a non-trivial task. Is there any
> other way around it ?
>
> Considering Boosting, can I boost the score of a field ? I came across
> Boosting of a term in the query so that would mean,
>
> "apache^4 jakarta"
>
> This means I am more keen to find apache than jakarta. I am keen to boost
> the score of a field, how can that be done ?
>
> On 7/31/07, Askar Zaidi <askar.zaidi@gmail.com> wrote:
> >
> > Using the Explanation method can help me get the exact score of a field.
> > I am concerned with how I can access it , this is what I am doing:
> >
> >
> >  for(int i=0;i<hitCount;i++){
> >                 doc = hits.doc(i);
> >                 score = hits.score(i);
> >                 int ID = hits.id(i);
> >                 System.out.println( id + "\t" + score + "\t" + doc.get
> > ("item"));
> >                 Explanation exp = searcher.explain( query , ID );
> >                 System.out.println( exp.toString() );
> >                 }
> >
> > This shows me o/p as follows (trimmed output):
> > 6.6197186E-4 = (MATCH) product of:
> >   0.0033098592 = (MATCH) sum of:
> >     0.0033098592 = (MATCH) weight(contents:innovation in 4), product of:
> >       0.28244132 = queryWeight(contents:innovation), product of:
> >         1.0 = idf(docFreq=5)
> >         0.28244132 = queryNorm
> >       0.01171875 = (MATCH) fieldWeight(contents:innovation in 4),
> > product of:
> >         1.0 = tf(termFreq(contents:innovation)=1)
> >         1.0 = idf(docFreq=5)
> >         0.01171875 = fieldNorm(field=contents, doc=4)
> >   0.2 = coord(1/5)
> >
> > The 6.6197E-4 is the total score of the document. How can I access the
> > fieldWeight ? Any example would be great.
> >
> > thanks,
> > AZ
> >
> >
> > On 7/31/07, Erick Erickson <erickerickson@gmail.com> wrote:
> > >
> > > Boost the other three fields at search time. Boosting during
> > > index time expresses "this document's title is worth more than
> > > other doucments' titles". Boosting during search time expresses
> > > "I care about matches on this clause more than I do on other
> > > clauses".
> > >
> > > Will it help? How should I know? It's *your* application and
> > > *you* are the one who is dissatisfied with the current scoring <G>.
> > >
> > > All I can say is try it and find out. You might consider using Luke
> > > to try various boosts without having to mess with too much code.
> > >
> > > Erick
> > >
> > > On 7/31/07, Askar Zaidi < askar.zaidi@gmail.com> wrote:
> > > >
> > > > Boosting during Indexing or boosting during search ?
> > > >
> > > > I have 4 fields:
> > > >
> > > > {tags},{title},{summary},{contents}
> > > >
> > > > Typically a phrase occurs too many times in contents as compared to
> > > the
> > > > other fields. If I get the score of contents field , I can pass it
> > > through
> > > > an adjuster function which will bring the score down. Something
> > > like:
> > > >
> > > > public static double adjuster(double count){
> > > >
> > > >                 double newCount;
> > > >                 newCount = 1/Math.exp(count);
> > > >                 System.out.println(newCount);
> > > >                 return newCount;
> > > >
> > > >                 }
> > > >
> > > > Do you mean I could boost the values of the other 3 fields ? Will
> > > that
> > > > help
> > > > ? Would there be a way to bring down the score of the contents field
> > > ?
> > > >
> > > > thanks,
> > > > AZ
> > > >
> > > >
> > > > On 7/31/07, Erick Erickson < erickerickson@gmail.com > wrote:
> > > > >
> > > > > Wouldn't boosting handle this for you?
> > > > >
> > > > > On 7/31/07, Askar Zaidi < askar.zaidi@gmail.com> wrote:
> > > > > >
> > > > > > To be more specific:
> > > > > >
> > > > > > I want to retrieve the scores of individual fields inside a
> > > document
> > > > so
> > > > > > that
> > > > > > I can manipulate the score of one field. This is the requirement
> > > of my
> > > > > > application. After the manipulation I can add these scores and
> > > then
> > > > show
> > > > > > the
> > > > > > total.
> > > > > >
> > > > > > thanks,
> > > > > >
> > > > > > AZ
> > > > > >
> > > > > > On 7/31/07, Askar Zaidi <askar.zaidi@gmail.com> wrote:
> > > > > > >
> > > > > > > Hey guys,
> > > > > > >
> > > > > > > I was wondering if there is a way to retrieve score of a field
> > > in a
> > > > > > > document ?
> > > > > > >
> > > > > > > If my document looks like this:
> > > > > > >
> > > > > > > {itemID},{field 1},{field 2}
> > > > > > >
> > > > > > > I'd like to get score of individual fields 1 and 2 rather than
> > > the
> > > > > score
> > > > > > > of the entire document.
> > > > > > >
> > > > > > > Is it possible ?
> > > > > > >
> > > > > > > thanks,
> > > > > > > AZ
> > > > > > >
> > > > > >
> > > > >
> > > >
> > >
> >
> >
>

------=_Part_50312_10040364.1185912266449--

From java-user-return-29536-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 31 21:49:27 2007
Return-Path: <java-user-return-29536-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58092 invoked from network); 31 Jul 2007 21:49:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jul 2007 21:49:25 -0000
Received: (qmail 37537 invoked by uid 500); 31 Jul 2007 21:49:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37380 invoked by uid 500); 31 Jul 2007 21:49:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37277 invoked by uid 99); 31 Jul 2007 21:49:08 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 14:49:07 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mike.klaas@gmail.com designates 209.85.198.188 as permitted sender)
Received: from [209.85.198.188] (HELO rv-out-0910.google.com) (209.85.198.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 21:48:59 +0000
Received: by rv-out-0910.google.com with SMTP id k20so9227rvb
        for <java-user@lucene.apache.org>; Tue, 31 Jul 2007 14:48:39 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=T6Chg0F1ns+c6SMYcMOSIyd27nwVm7Iy7xmffIsf3JOpazmEvbvoa1SBskd80TGGb3dfiHNdKQODd3p4H4YGD3vcy1tzyPtMP/MdJ5La8ERu463yWvxKEBFbLPqu6PxahaEuvXddyfP7gfhFkGqvMk3depFKCu8qKPsU5/m3yoc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=CP5vLGwJ4Gec8iU+T/GCqV2vh6FgUOiin8eH1UaxILO3SiTkoVjDnfSjHNW0zyRUr0mjnY1RMkc0qbgnDeMlV+vxXSpNRuczcAh/cW+cI5168HiWBdP+yE6QwlCBfRZpKG0u8u4IQccctvtZyxOFPsxG9zKiycBfWRA0vtW4WbY=
Received: by 10.115.17.1 with SMTP id u1mr24713wai.1185918518838;
        Tue, 31 Jul 2007 14:48:38 -0700 (PDT)
Received: from ?192.168.1.103? ( [24.82.155.191])
        by mx.google.com with ESMTPS id l36sm38047waf.2007.07.31.14.48.35
        (version=TLSv1/SSLv3 cipher=OTHER);
        Tue, 31 Jul 2007 14:48:36 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <c0c0e1d40707311300q3a639fach10fe5dc0f6b163a7@mail.gmail.com>
References: <c0c0e1d40707310842q2d300fe2pe997922101549097@mail.gmail.com> <c0c0e1d40707311102v4a7b5a45rb0337089cee7c3c6@mail.gmail.com> <359a92830707311122i54bc49d4y9a8f34b068aaca9e@mail.gmail.com> <c0c0e1d40707311132h27906b58oefb6c1918117bbc6@mail.gmail.com> <359a92830707311138r50dc8504jdac65c344dbdb2b4@mail.gmail.com> <c0c0e1d40707311218t13b06559s26e9eb67422cc8d0@mail.gmail.com> <c0c0e1d40707311300q3a639fach10fe5dc0f6b163a7@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <3A21F478-669E-40B8-96E6-3B690EECF2CC@gmail.com>
Content-Transfer-Encoding: 7bit
From: Mike Klaas <mike.klaas@gmail.com>
Subject: Re: Lucene Field score value
Date: Tue, 31 Jul 2007 14:48:34 -0700
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

You can boost any clause of a query:

http://lucene.apache.org/java/docs/queryparsersyntax.html

title:foo^5 header:foo^2 body:foo

On 31-Jul-07, at 1:00 PM, Askar Zaidi wrote:

> I'll have to use StringBuffer and get the Explanation in it as a  
> String.
> Then parse StringBuffer to get the scores of each field, then add  
> them and
> then boost the scores. That seems to be a non-trivial task. Is  
> there any
> other way around it ?
>
> Considering Boosting, can I boost the score of a field ? I came across
> Boosting of a term in the query so that would mean,
>
> "apache^4 jakarta"
>
> This means I am more keen to find apache than jakarta. I am keen to  
> boost
> the score of a field, how can that be done ?
>
> On 7/31/07, Askar Zaidi <askar.zaidi@gmail.com> wrote:
>>
>> Using the Explanation method can help me get the exact score of a  
>> field. I
>> am concerned with how I can access it , this is what I am doing:
>>
>>
>>  for(int i=0;i<hitCount;i++){
>>                 doc = hits.doc(i);
>>                 score = hits.score(i);
>>                 int ID = hits.id(i);
>>                 System.out.println( id + "\t" + score + "\t" +  
>> doc.get
>> ("item"));
>>                 Explanation exp = searcher.explain( query , ID );
>>                 System.out.println( exp.toString() );
>>                 }
>>
>> This shows me o/p as follows (trimmed output):
>> 6.6197186E-4 = (MATCH) product of:
>>   0.0033098592 = (MATCH) sum of:
>>     0.0033098592 = (MATCH) weight(contents:innovation in 4),  
>> product of:
>>       0.28244132 = queryWeight(contents:innovation), product of:
>>         1.0 = idf(docFreq=5)
>>         0.28244132 = queryNorm
>>       0.01171875 = (MATCH) fieldWeight(contents:innovation in 4),  
>> product
>> of:
>>         1.0 = tf(termFreq(contents:innovation)=1)
>>         1.0 = idf(docFreq=5)
>>         0.01171875 = fieldNorm(field=contents, doc=4)
>>   0.2 = coord(1/5)
>>
>> The 6.6197E-4 is the total score of the document. How can I access  
>> the
>> fieldWeight ? Any example would be great.
>>
>> thanks,
>> AZ
>>
>>
>> On 7/31/07, Erick Erickson <erickerickson@gmail.com> wrote:
>>>
>>> Boost the other three fields at search time. Boosting during
>>> index time expresses "this document's title is worth more than
>>> other doucments' titles". Boosting during search time expresses
>>> "I care about matches on this clause more than I do on other
>>> clauses".
>>>
>>> Will it help? How should I know? It's *your* application and
>>> *you* are the one who is dissatisfied with the current scoring <G>.
>>>
>>> All I can say is try it and find out. You might consider using Luke
>>> to try various boosts without having to mess with too much code.
>>>
>>> Erick
>>>
>>> On 7/31/07, Askar Zaidi <askar.zaidi@gmail.com> wrote:
>>>>
>>>> Boosting during Indexing or boosting during search ?
>>>>
>>>> I have 4 fields:
>>>>
>>>> {tags},{title},{summary},{contents}
>>>>
>>>> Typically a phrase occurs too many times in contents as compared to
>>> the
>>>> other fields. If I get the score of contents field , I can pass it
>>> through
>>>> an adjuster function which will bring the score down. Something  
>>>> like:
>>>>
>>>> public static double adjuster(double count){
>>>>
>>>>                 double newCount;
>>>>                 newCount = 1/Math.exp(count);
>>>>                 System.out.println(newCount);
>>>>                 return newCount;
>>>>
>>>>                 }
>>>>
>>>> Do you mean I could boost the values of the other 3 fields ?  
>>>> Will that
>>>> help
>>>> ? Would there be a way to bring down the score of the contents  
>>>> field ?
>>>>
>>>> thanks,
>>>> AZ
>>>>
>>>>
>>>> On 7/31/07, Erick Erickson <erickerickson@gmail.com > wrote:
>>>>>
>>>>> Wouldn't boosting handle this for you?
>>>>>
>>>>> On 7/31/07, Askar Zaidi <askar.zaidi@gmail.com> wrote:
>>>>>>
>>>>>> To be more specific:
>>>>>>
>>>>>> I want to retrieve the scores of individual fields inside a
>>> document
>>>> so
>>>>>> that
>>>>>> I can manipulate the score of one field. This is the requirement
>>> of my
>>>>>> application. After the manipulation I can add these scores and
>>> then
>>>> show
>>>>>> the
>>>>>> total.
>>>>>>
>>>>>> thanks,
>>>>>>
>>>>>> AZ
>>>>>>
>>>>>> On 7/31/07, Askar Zaidi <askar.zaidi@gmail.com> wrote:
>>>>>>>
>>>>>>> Hey guys,
>>>>>>>
>>>>>>> I was wondering if there is a way to retrieve score of a field
>>> in a
>>>>>>> document ?
>>>>>>>
>>>>>>> If my document looks like this:
>>>>>>>
>>>>>>> {itemID},{field 1},{field 2}
>>>>>>>
>>>>>>> I'd like to get score of individual fields 1 and 2 rather than
>>> the
>>>>> score
>>>>>>> of the entire document.
>>>>>>>
>>>>>>> Is it possible ?
>>>>>>>
>>>>>>> thanks,
>>>>>>> AZ
>>>>>>>
>>>>>>
>>>>>
>>>>
>>>
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29537-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 31 23:47:30 2007
Return-Path: <java-user-return-29537-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16747 invoked from network); 31 Jul 2007 23:47:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jul 2007 23:47:22 -0000
Received: (qmail 43173 invoked by uid 500); 31 Jul 2007 23:47:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38758 invoked by uid 500); 31 Jul 2007 23:46:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33657 invoked by uid 99); 31 Jul 2007 23:46:13 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 16:46:12 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.81.62.48] (HELO mail01.apmindsf.com) (64.81.62.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 23:46:03 +0000
Received: from [172.30.250.102] (helo=[172.30.250.102])
	by mail01.apmindsf.com with esmtp (Exim 4.50)
	id 1IG1Nd-0007fk-0O
	for java-user@lucene.apache.org; Tue, 31 Jul 2007 16:43:57 -0700
Message-ID: <46AFCC1D.8060902@metaweb.com>
Date: Tue, 31 Jul 2007 16:56:13 -0700
From: Tim Sturge <tsturge@metaweb.com>
User-Agent: Mozilla Thunderbird 1.0.6 (X11/20050715)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: calling commit() on IndexReader
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Can anyone explain to me why commit() on IndexReader is a protected method?

I want to do periodic deletes from my main index. I don't want to reopen 
the index (all that is changing are things are being deleted), so I 
don't want to call close(), but I can't call commit() from outside the 
class directly (which writes the *.del file)

Is this done for my protection or for my annoyance? (meaning, if I 
subclass just this to make the method public am I going to cause any 
problems?)

Thanks,

Tim

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29538-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 01 02:02:07 2007
Return-Path: <java-user-return-29538-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55577 invoked from network); 1 Aug 2007 02:01:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Aug 2007 02:01:59 -0000
Received: (qmail 9896 invoked by uid 500); 1 Aug 2007 02:01:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4459 invoked by uid 500); 1 Aug 2007 02:01:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99084 invoked by uid 99); 1 Aug 2007 02:00:31 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [202.124.246.50] (HELO 202-124-246-50.dedsvrs.net) (202.124.246.50)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 19:00:20 -0700
Received: (qmail 22092 invoked from network); 1 Aug 2007 11:57:36 +1000
Received: from spectr11.lnk.telstra.net (HELO v) (165.228.154.97)
  by 202-124-246-50.dedsvrs.net with SMTP; 1 Aug 2007 11:57:36 +1000
From: "Vijay Santhanam" <vijay@spectrumwired.com>
To: <java-user@lucene.apache.org>
References: <1185895201.21304.ezmlm@lucene.apache.org>
In-Reply-To: <1185895201.21304.ezmlm@lucene.apache.org>
Subject: Exact searches with PhraseQuery
Date: Wed, 1 Aug 2007 11:58:22 +1000
Message-ID: <018a01c7d3df$709e78b0$51db6a10$@com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcfThjFTRYxYuH9cSjKDAhl+XgwpowAWFPKQ
Content-Language: en-au
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Guys,

For some reason, I said I was using "PrefixQuery" for exact queries.
What I meant to say is PhraseQuery... but the editor between my brain and
fingers had gone home.

The TermQuery idea may be the simplest solution, because I store the name
un-tokenized for sorting purposes.

Otherwise;  Between SpanFirstQuery, RegexQuery and the many other solutions
at 
http://www.nabble.com/Search-for-docs-containing-only-a-certain-word-in-a-sp
ecified-field--tf3655925.html

I should have a good solution.

Thanks for your help Guys!


Vijay Santhanam
B.Eng.(Soft.)
Spectrum Wired - Software Engineer

T: +61 2 4925 3266
F: +61 2 4925 3255
M: +61 407 525 087
W: www.spectrumwired.com 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29539-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 01 02:29:20 2007
Return-Path: <java-user-return-29539-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62822 invoked from network); 1 Aug 2007 02:29:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Aug 2007 02:29:18 -0000
Received: (qmail 48744 invoked by uid 500); 1 Aug 2007 02:29:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48709 invoked by uid 500); 1 Aug 2007 02:29:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48697 invoked by uid 99); 1 Aug 2007 02:29:13 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 19:29:13 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [60.52.184.45] (HELO mail.tecforte.com) (60.52.184.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Aug 2007 02:29:07 +0000
Received: from DFPYWL2S ([192.168.2.96]) by tecforte.com with MailEnable ESMTP; Wed, 01 Aug 2007 10:28:47 +0800
From: "Chew Yee Chuang" <yeechuang@tecforte.com>
To: <java-user@lucene.apache.org>
References: <004201c7d322$69c8bae0$3d5a30a0$@com> <4E0025CD-A1FF-44E4-8322-2A71F9F26332@gmail.com>
In-Reply-To: <4E0025CD-A1FF-44E4-8322-2A71F9F26332@gmail.com>
Subject: RE: High CPU usage duing index and search
Date: Wed, 1 Aug 2007 10:29:30 +0800
Message-ID: <003501c7d3e3$ca58e990$5f0abcb0$@com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="windows-1250"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcfTWaIwnTWayFGcTVuJaKrjSu8T7gAgJaow
Content-Language: en-us
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Thanks for the link provided, actually I've go through those article =
when I
developing the index and search function for my application. I haven=92t =
try
profiler yet, but I monitor the CPU usage and notice that whatever index =
or
search performing, the CPU usage raise to 100%. Below I will try to
elaborate more on what my application is doing and how I index and =
search.

There are many concurrent process running, first, the application will =
write
records that received into a text file with tab separated each different
field. Application will point to a new file every 10mins and start =
writing
to it. So every file will contains only 10mins record, approximate =
600,000
records per file. Then, the indexing process will check whether there is =
a
text file to be index, if it is, the thread will wake up and start =
perform
indexing.
=20
The indexing process will first add documents to RAMDir, Then later, add
RAMDir into FSDir by calling addIndexNoOptimize() when there is 100,000
documents(32 fields per doc) in RAMDir. There is only 1 =
IndexWriter(FSDir)
was created but a few IndexWriter(RAMDir) was created during the whole
process. Below are some configuration for IndexWriters that I =
mentioned:-

IndexWriter (RAMDir)
- SimpleAnalyzer
- setMaxBufferedDocs(10000)
- Filed.Store.YES
- Field.Index.NO_NORMS

IndexWriter (FSDir)
- SimpleAnalyzer
- setMergeFactor(20)
- addIndexesNoOptimize()

For the searching, because there are many queries(20,000) run =
continuously
to generate the aggregate table for reporting purpose. All this queries =
is
run in nested loop, and there is only 1 Searcher created, I try searcher =
and
filter as well, filter give me better result, but both also utilize lots =
of
CPU resources.

Hope this info will help and sorry for my bad English.

Thanks
eChuang, Chew

-----Original Message-----
From: karl wettin [mailto:karl.wettin@gmail.com]=20
Sent: Tuesday, July 31, 2007 5:54 PM
To: java-user@lucene.apache.org
Subject: Re: High CPU usage duing index and search


31 jul 2007 kl. 05.25 skrev Chew Yee Chuang:
> But just notice that when Lucene performing search or index,
> the CPU usage on my machine raise to 100%, because of this issue, =20
> some of my
> others backend process will slow down eventually. Just want to know =20
> does
> anyone face this problem before ? and is it any idea on how to =20
> overcome this
> problem ?

Did you run a profiler to see what it is that consume all the resources?
It is very hard to guess based on the information you supplied. Start =20
here:

http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/ImproveIndexingSpeed
http://wiki.apache.org/lucene-java/ImproveSearchingSpeed


--=20
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


No virus found in this incoming message.
Checked by AVG Free Edition.=20
Version: 7.5.476 / Virus Database: 269.11.0/927 - Release Date: =
7/30/2007
5:02 PM
=20

No virus found in this outgoing message.
Checked by AVG Free Edition.=20
Version: 7.5.476 / Virus Database: 269.11.0/929 - Release Date: =
7/31/2007
5:26 PM
=20



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29540-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 01 04:13:38 2007
Return-Path: <java-user-return-29540-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85304 invoked from network); 1 Aug 2007 04:13:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Aug 2007 04:13:36 -0000
Received: (qmail 28674 invoked by uid 500); 1 Aug 2007 04:13:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28627 invoked by uid 500); 1 Aug 2007 04:13:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28612 invoked by uid 99); 1 Aug 2007 04:13:30 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 21:13:30 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cedric.ho@gmail.com designates 209.85.146.179 as permitted sender)
Received: from [209.85.146.179] (HELO wa-out-1112.google.com) (209.85.146.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Aug 2007 04:13:27 +0000
Received: by wa-out-1112.google.com with SMTP id j40so91056wah
        for <java-user@lucene.apache.org>; Tue, 31 Jul 2007 21:13:06 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=g4gw23UOsAKFeRf1PZ1SFxXR5DyS01/gQcwBdpQNq6WqBF63Y/iUj7zAcZ0/Cy06/jy080aHL8iqeWqqlrIxgCEw/OVntqEmvcvGRxCrUFKcs/POeSHtPWOWZsYksF3STco4pAbxnP6NKIpMRUqBL8X7MASXWQs/Xokt7MC1WZk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=fCK4aE/yBrHsO7QbRfcqQvsVQ/ZxXcARJXKuVJxWgUFBZfc9V6YSA+0X9P/BObONuqKpeaN0S97x5uTZ6oZni1BJI3V+CwlFy7oo0oiUMrzeJCRabVck9wB/+IZhbFpsZkdv68iZqJXTzOeJDLgmcRQWTkS/5QkquabT2VDpDuc=
Received: by 10.114.210.2 with SMTP id i2mr305404wag.1185941586611;
        Tue, 31 Jul 2007 21:13:06 -0700 (PDT)
Received: by 10.114.46.4 with HTTP; Tue, 31 Jul 2007 21:13:06 -0700 (PDT)
Message-ID: <839ba01c0707312113p278da04bg636e2bfa853e6ff4@mail.gmail.com>
Date: Wed, 1 Aug 2007 12:13:06 +0800
From: "Cedric Ho" <cedric.ho@gmail.com>
To: java-user@lucene.apache.org
Subject: Can I do boosting based on term postions?
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

I was wondering if it is possible to do boosting by search terms'
position in the document.

for example:
search terms appear in the first 100 words, or first 10% words, or in
first two paragraphs would be given higher score.

Is it achievable through using the new Payload function in lucene 2.2?
Or are there any easier ways to achieve these ?


Regards,
Cedric

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29541-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 01 04:32:07 2007
Return-Path: <java-user-return-29541-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88517 invoked from network); 1 Aug 2007 04:32:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Aug 2007 04:32:06 -0000
Received: (qmail 47349 invoked by uid 500); 1 Aug 2007 04:29:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42278 invoked by uid 500); 1 Aug 2007 04:27:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40326 invoked by uid 99); 1 Aug 2007 04:26:31 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 21:26:30 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Aug 2007 04:24:55 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IG5l6-0000OX-37
	for java-user@lucene.apache.org; Tue, 31 Jul 2007 21:24:28 -0700
Message-ID: <11939477.post@talk.nabble.com>
Date: Tue, 31 Jul 2007 21:24:28 -0700 (PDT)
From: masz-wow <maznorlia.syafina@gmail.com>
To: java-user@lucene.apache.org
Subject: Problem Search using lucene
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: maznorlia.syafina@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


I understand that only document that has been indexed will be able to search.
I already manage to index the document and also search the content of the
document.
The problem is, why is that there are a few words that cannot be search?
E.g : A document contains this sentence 
"So on the next Monday, when Big taufiq John once again got on the bus and
said, keratong >"Big John doesn't pay!" The driver stood up, glared back at
the passenger, >and screamed, "And why not?" With a surprised look on his
face, Big John >replied, "Big John has a bus pass." Managementq "

I can search all the contents of this document BUT when I key in the word
'on' or 'and' the document cannot be searched anymore.

>From my understanding, once the document being indexed we will be able to
search all the contents of the document
-- 
View this message in context: http://www.nabble.com/Problem-Search-using-lucene-tf4197963.html#a11939477
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29542-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 01 04:34:40 2007
Return-Path: <java-user-return-29542-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90316 invoked from network); 1 Aug 2007 04:34:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Aug 2007 04:34:39 -0000
Received: (qmail 74397 invoked by uid 500); 1 Aug 2007 04:34:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74358 invoked by uid 500); 1 Aug 2007 04:34:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74347 invoked by uid 99); 1 Aug 2007 04:34:30 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 21:34:30 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jattardi@gmail.com designates 209.85.146.183 as permitted sender)
Received: from [209.85.146.183] (HELO wa-out-1112.google.com) (209.85.146.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Aug 2007 04:34:22 +0000
Received: by wa-out-1112.google.com with SMTP id j40so95541wah
        for <java-user@lucene.apache.org>; Tue, 31 Jul 2007 21:34:01 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=fbQhm3DUQMKf6JRhJtO8IXVpyx1os8NbD5Pbm5brmcgFf2Ajw7r4MT0ZCjpGqfqlqMND725QUh41JyK+1uGh7v16+jkGYiqj4TlKZVYukeirwA197JF35PDSA9BiXJvrcFL7E+E75mzCSucuPE0UBPoMBc5hqq/xmOGZmwBCF9c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=L/7j4gy2jCxtPIV1ScMkzpYzRVfk3jUQ8GcMi0tUpp8xnMB2KbJXT3IDfeh5rr0Wn3Dz5WDWOpGta21DyQHwrn611q8ITtMbF7Qj9p1nQynQfPRnzQEQ+k/KYG9ss/hDtghXyI6VKKFFEM4mkvHz8Yf4UPYDPRYA8vAbRaBpGbs=
Received: by 10.115.14.1 with SMTP id r1mr320177wai.1185942838798;
        Tue, 31 Jul 2007 21:33:58 -0700 (PDT)
Received: by 10.114.121.8 with HTTP; Tue, 31 Jul 2007 21:33:58 -0700 (PDT)
Message-ID: <7a14509e0707312133y79b69e8cq7a07c4ef60e51917@mail.gmail.com>
Date: Wed, 1 Aug 2007 00:33:58 -0400
From: "Joe Attardi" <jattardi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Problem Search using lucene
In-Reply-To: <11939477.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_42826_1961446.1185942838768"
References: <11939477.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_42826_1961446.1185942838768
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You are probably using the StandardAnalyzer which removes stop words such as
"and".

-- 
Joe Attardi
jattardi@gmail.com
http://thinksincode.blogspot.com/

On 8/1/07, masz-wow <maznorlia.syafina@gmail.com> wrote:
>
>
> I understand that only document that has been indexed will be able to
> search.
> I already manage to index the document and also search the content of the
> document.
> The problem is, why is that there are a few words that cannot be search?
> E.g : A document contains this sentence
> "So on the next Monday, when Big taufiq John once again got on the bus and
> said, keratong >"Big John doesn't pay!" The driver stood up, glared back
> at
> the passenger, >and screamed, "And why not?" With a surprised look on his
> face, Big John >replied, "Big John has a bus pass." Managementq "
>
> I can search all the contents of this document BUT when I key in the word
> 'on' or 'and' the document cannot be searched anymore.
>
> From my understanding, once the document being indexed we will be able to
> search all the contents of the document
> --
> View this message in context:
> http://www.nabble.com/Problem-Search-using-lucene-tf4197963.html#a11939477
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_42826_1961446.1185942838768--

From java-user-return-29543-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 01 05:45:24 2007
Return-Path: <java-user-return-29543-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14061 invoked from network); 1 Aug 2007 05:45:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Aug 2007 05:45:24 -0000
Received: (qmail 42153 invoked by uid 500); 1 Aug 2007 05:45:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42117 invoked by uid 500); 1 Aug 2007 05:45:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42105 invoked by uid 99); 1 Aug 2007 05:45:17 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 22:45:17 -0700
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=MSGID_FROM_MTA_HEADER,SPF_PASS,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [17.250.248.181] (HELO smtpout.mac.com) (17.250.248.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Aug 2007 05:45:12 +0000
Received: from webmail011 (webmail011-s [10.13.128.11])
	by smtpout.mac.com (Xserve/smtpout11/MantshX 4.0) with ESMTP id l715io5q012481
	for <java-user@lucene.apache.org>; Tue, 31 Jul 2007 22:44:51 -0700 (PDT)
Date: Tue, 31 Jul 2007 22:44:50 -0700
From: Michael Prichard <michael_prichard@mac.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Message-ID: <921764FE-0113-1000-FE74-856B9C5D860C-Webmail-10021@mac.com>
Subject: extracting non-english text from word, pdf, etc....??
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Originating-IP: 71.53.212.98
Received: from [71.53.212.98] from webmail.mac.com with HTTP; Tue, 31 Jul 2007 22:44:50 -0700
X-Brightmail-Tracker: AAAAAA==
X-Brightmail-scanned: yes
X-Virus-Checked: Checked by ClamAV on apache.org

I know how to do english text with POI and PDFBox and so on.  Now, I want to start indexing non-english language such as french and spanish.  Which extraction libs are available for me?

I want to do:

Excel
Word
PowerPoint
PDF
HTML
RTF

Thanks!
Michael

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29544-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 01 06:06:38 2007
Return-Path: <java-user-return-29544-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23094 invoked from network); 1 Aug 2007 06:06:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Aug 2007 06:06:36 -0000
Received: (qmail 64565 invoked by uid 500); 1 Aug 2007 06:06:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64522 invoked by uid 500); 1 Aug 2007 06:06:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64510 invoked by uid 99); 1 Aug 2007 06:06:30 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 23:06:30 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of shailendra.sharma@gmail.com designates 209.85.198.190 as permitted sender)
Received: from [209.85.198.190] (HELO rv-out-0910.google.com) (209.85.198.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Aug 2007 06:06:27 +0000
Received: by rv-out-0910.google.com with SMTP id k20so88509rvb
        for <java-user@lucene.apache.org>; Tue, 31 Jul 2007 23:06:06 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=KuG8FaYVStFN/1cc/xvxMiS6x66/b46QxztTNger9Vw/tpHYtK/HQBOf/Ulxm6obW3w3Di0HVlNbZRvJGBjq8KPJ71Obw9zAj9QTi3uKMako0oZn26HFp2IEJ136NPVdKScJ1eng5EuhZsankkcen1Olahyxol6XsbdCGuwXylE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=BBYWaf5m/+V813I/dOzTkAsn0Lwr0jMC5AlrTfFxVt7MZ9Zd8aL+kiCbLc3lm2hnwQE/deIbiYmlKzm2CJjFMp8wliUfEBKi2zuIieTo2ixX+RnYiAzbjtuYc4uqgSesZTpOjYSq1NSGNtQdKG3ydK5BFqyYeMotb4QPoZPoQew=
Received: by 10.142.231.7 with SMTP id d7mr15871wfh.1185948366877;
        Tue, 31 Jul 2007 23:06:06 -0700 (PDT)
Received: by 10.142.102.21 with HTTP; Tue, 31 Jul 2007 23:06:06 -0700 (PDT)
Message-ID: <d27fa17e0707312306q5e517d7fyedbedc31094dc6c4@mail.gmail.com>
Date: Wed, 1 Aug 2007 11:36:06 +0530
From: "Shailendra Sharma" <shailendra.sharma@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Can I do boosting based on term postions?
In-Reply-To: <839ba01c0707312113p278da04bg636e2bfa853e6ff4@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_48968_31177641.1185948366851"
References: <839ba01c0707312113p278da04bg636e2bfa853e6ff4@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_48968_31177641.1185948366851
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Yes, it is easily doable through "Payload" facility. During indexing process
(mainly tokenization), you need to push this extra information in each
token. And then you can use BoostingTermQuery for using Payload value to
include Payload in the score. You also need to implement Similarity for this
(mainly scorePayload method).

Other way can be to extend SpanTermQuery, this already calculates the
position of match. You just need to do something to use this position value
in the score calculation.

One possible advantage of SpanTermQuery approach is that you can play
around, without re-creating indices everytime.

Thanks,
Shailendra Sharma,
CTO, Ver se' Innovation Pvt. Ltd.
Bangalore, India

On 8/1/07, Cedric Ho <cedric.ho@gmail.com> wrote:
>
> Hi all,
>
> I was wondering if it is possible to do boosting by search terms'
> position in the document.
>
> for example:
> search terms appear in the first 100 words, or first 10% words, or in
> first two paragraphs would be given higher score.
>
> Is it achievable through using the new Payload function in lucene 2.2?
> Or are there any easier ways to achieve these ?
>
>
> Regards,
> Cedric
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_48968_31177641.1185948366851--

From java-user-return-29545-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 01 06:43:59 2007
Return-Path: <java-user-return-29545-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32370 invoked from network); 1 Aug 2007 06:43:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Aug 2007 06:43:57 -0000
Received: (qmail 94436 invoked by uid 500); 1 Aug 2007 06:43:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94405 invoked by uid 500); 1 Aug 2007 06:43:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94394 invoked by uid 99); 1 Aug 2007 06:43:51 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 23:43:51 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Aug 2007 06:43:45 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IG7vY-00034c-VL
	for java-user@lucene.apache.org; Tue, 31 Jul 2007 23:43:24 -0700
Message-ID: <11940536.post@talk.nabble.com>
Date: Tue, 31 Jul 2007 23:43:24 -0700 (PDT)
From: masz-wow <maznorlia.syafina@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Problem Search using lucene
In-Reply-To: <7a14509e0707312133y79b69e8cq7a07c4ef60e51917@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: maznorlia.syafina@gmail.com
References: <11939477.post@talk.nabble.com> <7a14509e0707312133y79b69e8cq7a07c4ef60e51917@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks Joe

I'm using this function as my analyzer

public static Analyzer getDefaultAnalyzer() {
	PerFieldAnalyzerWrapper perFieldAnalyzer = new PerFieldAnalyzerWrapper(new
StopAnalyzer());
		perFieldAnalyzer.addAnalyzer("contents", new StopAnalyzer());
		perFieldAnalyzer.addAnalyzer("fileID", new WhitespaceAnalyzer());
		perFieldAnalyzer.addAnalyzer("path", new KeywordAnalyzer());
		return perFieldAnalyzer;
	}

StopAnalyzer builds an analyzer which removes words in
ENGLISH_STOP_WORDS.That might be the cause why I cannot search words such as
'and' 'to'

BUT

I'm still having problem when I search a few words other than english words
such as name (eg: Ghazat) or string of numbers (eg:45600).
-- 
View this message in context: http://www.nabble.com/Problem-Search-using-lucene-tf4197963.html#a11940536
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29546-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 01 06:51:57 2007
Return-Path: <java-user-return-29546-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33406 invoked from network); 1 Aug 2007 06:51:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Aug 2007 06:51:55 -0000
Received: (qmail 931 invoked by uid 500); 1 Aug 2007 06:51:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 887 invoked by uid 500); 1 Aug 2007 06:51:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 875 invoked by uid 99); 1 Aug 2007 06:51:49 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Jul 2007 23:51:49 -0700
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [80.67.64.10] (HELO smtp1.akamai.com) (80.67.64.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Aug 2007 06:51:41 +0000
Received: from smtp1.akamai.com (vwall.kendall.corp.akamai.com [172.17.4.35])
	by smtp1.akamai.com (8.13.8/8.12.10) with ESMTP id l716oHW0013127
	for <java-user@lucene.apache.org>; Wed, 1 Aug 2007 02:50:17 -0400 (EDT)
Received: from USMA1EX-GATE1.kendall.corp.akamai.com (usma1ex-gate1.kendall.corp.akamai.com [172.17.0.215])
	by smtp1.akamai.com (8.13.8/8.12.10) with ESMTP id l716oGKn013121
	for <java-user@lucene.apache.org>; Wed, 1 Aug 2007 02:50:16 -0400 (EDT)
Received: from INVS1.bangalore.corp.akamai.com ([172.21.20.14]) by USMA1EX-GATE1.kendall.corp.akamai.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 1 Aug 2007 02:46:04 -0400
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: RE: Problem Search using lucene
Date: Wed, 1 Aug 2007 12:18:12 +0530
Message-ID: <4FA8C6AEE609B644B38DE471A3657A620141D4F6@INVS1.bangalore.corp.akamai.com>
In-Reply-To: <11940536.post@talk.nabble.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Problem Search using lucene
Thread-Index: AcfUB1sxkvP0fForSVKQiojcqipp3QAAEs4w
References: <11939477.post@talk.nabble.com> <7a14509e0707312133y79b69e8cq7a07c4ef60e51917@mail.gmail.com> <11940536.post@talk.nabble.com>
From: "Chhabra, Kapil" <kchhabra@akamai.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 01 Aug 2007 06:46:04.0062 (UTC) FILETIME=[A15FD3E0:01C7D407]
X-Virus-Checked: Checked by ClamAV on apache.org

You just have to make sure that what you are searching is indexed (and
esp. in the same format/case).
Use Luke (http://www.getopt.org/luke/) to browse through your index.
This might give you an insight of what you have indexed and what you are
searching for.

Regards,
kapilChhabra

-----Original Message-----
From: masz-wow [mailto:maznorlia.syafina@gmail.com]=20
Sent: Wednesday, August 01, 2007 12:13 PM
To: java-user@lucene.apache.org
Subject: Re: Problem Search using lucene


Thanks Joe

I'm using this function as my analyzer

public static Analyzer getDefaultAnalyzer() {
	PerFieldAnalyzerWrapper perFieldAnalyzer =3D new
PerFieldAnalyzerWrapper(new
StopAnalyzer());
		perFieldAnalyzer.addAnalyzer("contents", new
StopAnalyzer());
		perFieldAnalyzer.addAnalyzer("fileID", new
WhitespaceAnalyzer());
		perFieldAnalyzer.addAnalyzer("path", new
KeywordAnalyzer());
		return perFieldAnalyzer;
	}

StopAnalyzer builds an analyzer which removes words in
ENGLISH_STOP_WORDS.That might be the cause why I cannot search words
such as
'and' 'to'

BUT

I'm still having problem when I search a few words other than english
words
such as name (eg: Ghazat) or string of numbers (eg:45600).
--=20
View this message in context:
http://www.nabble.com/Problem-Search-using-lucene-tf4197963.html#a119405
36
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


