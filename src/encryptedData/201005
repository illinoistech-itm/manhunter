From java-user-return-45997-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat May 01 03:16:26 2010
Return-Path: <java-user-return-45997-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41963 invoked from network); 1 May 2010 03:16:26 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 1 May 2010 03:16:26 -0000
Received: (qmail 52502 invoked by uid 500); 1 May 2010 03:16:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52267 invoked by uid 500); 1 May 2010 03:16:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52259 invoked by uid 99); 1 May 2010 03:16:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 May 2010 03:16:23 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of Lisheng.Zhang@broadvision.com designates 139.56.8.26 as permitted sender)
Received: from [139.56.8.26] (HELO mail-fw.broadvision.com) (139.56.8.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 May 2010 03:16:15 +0000
X-ASG-Debug-ID: 1272683753-2b8300170000-H1Y1KX
X-Barracuda-URL: http://mail-fw.broadvision.com:8000/cgi-bin/mark.cgi
Received: from RW-EX2003.BROADVISION.COM (localhost [127.0.0.1])
	by mail-fw.broadvision.com (Spam Firewall) with ESMTP id 9FB75A7B2
	for <java-user@lucene.apache.org>; Fri, 30 Apr 2010 20:15:53 -0700 (PDT)
Received: from RW-EX2003.BROADVISION.COM (rw-ex2003.broadvision.com [10.10.160.33]) by mail-fw.broadvision.com with ESMTP id Ku9lpHKxpnj4JAW1 for <java-user@lucene.apache.org>; Fri, 30 Apr 2010 20:15:53 -0700 (PDT)
X-ASG-Whitelist: Client
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-ASG-Orig-Subj: RE: Modify TermQueries or Tokens
Subject: RE: Modify TermQueries or Tokens
Date: Fri, 30 Apr 2010 20:15:53 -0700
Message-ID: <ED081AC9AEEE0248BBCCDE9989AAE3FC02CB13C0@rw-ex2003.BROADVISION.COM>
In-Reply-To: <BAFDED91EF7D5A43A30F897D6C94B1287294224CEE@MBX.ad.sdsc.edu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Modify TermQueries or Tokens
Thread-Index: AcrooAxG+5ISL+55R72f7nqnl5LbjQABQRdwAADeEBAAAITpkAADr1FQAAizisA=
From: "Zhang, Lisheng" <Lisheng.Zhang@BroadVision.com>
To: <java-user@lucene.apache.org>
X-Barracuda-Connect: rw-ex2003.broadvision.com[10.10.160.33]
X-Barracuda-Start-Time: 1272683753
X-Barracuda-Virus-Scanned: by Barracuda Spam Firewall at broadvision.com
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

It looks good to me, but I did not test, when testing,
we may print out both

initialQuery.toString() // query produced by QueryParser
finalQuery.toString()   // query after your new function

as comparison, besides testing the query result.

Best regards, Lisheng

-----Original Message-----
From: Christopher Condit [mailto:condit@sdsc.edu]
Sent: Friday, April 30, 2010 4:06 PM
To: java-user@lucene.apache.org
Subject: RE: Modify TermQueries or Tokens


> 2) if I have to accept whole input string with all logic (AND, OR, ..) =
inside,
>    I think it is easier to change TermQuery afterwards than parsing =
the string,
>    since final result from query parser should be BooleanQuery (in =
your
> example),
>    then we iterate through each BooleanClause, if the clause is still
> BooleanQuery,
>    recursively go deep, if TermQuery, we may try to convert to
> WildCardQuery?

protected static void wildcardQuery(Query query) {
		if (query instanceof BooleanQuery) {
			BooleanQuery bQuery =3D (BooleanQuery)query;
			for (BooleanClause clause: bQuery.getClauses()) {
				if (clause.getQuery() instanceof TermQuery) {
					Term term =3D ((TermQuery)clause.getQuery()).getTerm();
					clause.setQuery(new WildcardQuery(new Term(term.field(), "*" + =
term.text() + "*")));
				}
				else
					wildcardQuery(clause.getQuery());
			}		=09
		}=20
	}

Does the trick (as long as the original query is a BooleanQuery). Thanks =
for the suggestion!
-Chris

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45998-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat May 01 03:18:44 2010
Return-Path: <java-user-return-45998-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42093 invoked from network); 1 May 2010 03:18:44 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 1 May 2010 03:18:44 -0000
Received: (qmail 54407 invoked by uid 500); 1 May 2010 03:18:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54214 invoked by uid 500); 1 May 2010 03:18:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54206 invoked by uid 99); 1 May 2010 03:18:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 May 2010 03:18:41 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=SPF_PASS,T_FRT_ADULT2
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of koji@r.email.ne.jp designates 202.224.39.198 as permitted sender)
Received: from [202.224.39.198] (HELO mail2.asahi-net.or.jp) (202.224.39.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 May 2010 03:18:33 +0000
Received: from koji-sekiguchi-no-macbook.local (w244069.ppp.asahi-net.or.jp [121.1.244.69])
	by mail2.asahi-net.or.jp (Postfix) with ESMTP id 8C796A05C3
	for <java-user@lucene.apache.org>; Sat,  1 May 2010 12:18:11 +0900 (JST)
Message-ID: <4BDB9D73.90902@r.email.ne.jp>
Date: Sat, 01 May 2010 12:18:11 +0900
From: Koji Sekiguchi <koji@r.email.ne.jp>
User-Agent: Thunderbird 2.0.0.24 (Macintosh/20100228)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: FieldCache memory estimation - term values are interned?
Content-Type: text/plain; charset=ISO-2022-JP
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

Are Strings that are got via FieldCache.DEFAULT.getStrings( reader,
field ) interned?

Since I have a requirement for having FieldCaches of some
fields in 250M docs index, I'd like to estimate memory
consumed by FieldCache.

By looking at FieldCacheImpl source code, it seems that
field names are interned, but values are not?

Than you,

Koji

-- 
http://www.rondhuit.com/en/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45999-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat May 01 14:27:31 2010
Return-Path: <java-user-return-45999-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45255 invoked from network); 1 May 2010 14:27:30 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 1 May 2010 14:27:30 -0000
Received: (qmail 76683 invoked by uid 500); 1 May 2010 14:27:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76626 invoked by uid 500); 1 May 2010 14:27:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76618 invoked by uid 99); 1 May 2010 14:27:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 May 2010 14:27:27 +0000
X-ASF-Spam-Status: No, hits=-0.6 required=10.0
	tests=AWL,FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 May 2010 14:27:22 +0000
Received: by wyb33 with SMTP id 33so798793wyb.35
        for <java-user@lucene.apache.org>; Sat, 01 May 2010 07:27:01 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:sender:reply-to:received
         :in-reply-to:references:date:x-google-sender-auth:message-id:subject
         :from:to:content-type;
        bh=n1BrVLYSquZ0hiT3KfII/KUzhXG9LGv2wVjvLGlzw0k=;
        b=fg3DnNG9xIzAatE3h1ZaihLOwsKIoLx68t0HEcPCgsGTE7IbuGm6v9Y5Xj8QauxBMw
         yJ4+AwqrSfAXo/7CGGmYqWLPZ59FeWwtgSraauOW4nh8A9gc3G5LqEyikobXDs6+Fu8W
         QGZJqMr5xGLaPJt7hd9kA3yOKUwn7qusN4hhY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:reply-to:in-reply-to:references:date
         :x-google-sender-auth:message-id:subject:from:to:content-type;
        b=IM0b8FLbN5vV5A4l+YwhFUcA4jcsan7JkhUmkHouvH2ztxJomzRQk7QIgMXOKiT8ed
         Ge6NLsZUJxWn3RQdjmp1zTPSvimSvmaStDfWmdeK95bnB7/d2cvES20LRYmLnBwURWzt
         kMc/oeSBWv4qhtA04iT9kT45Tut+i2uloz1HI=
MIME-Version: 1.0
Received: by 10.216.86.195 with SMTP id w45mr4744032wee.47.1272724021011; Sat, 
	01 May 2010 07:27:01 -0700 (PDT)
Sender: yseeley@gmail.com
Reply-To: yonik@lucidimagination.com
Received: by 10.216.22.140 with HTTP; Sat, 1 May 2010 07:27:00 -0700 (PDT)
In-Reply-To: <4BDB9D73.90902@r.email.ne.jp>
References: <4BDB9D73.90902@r.email.ne.jp>
Date: Sat, 1 May 2010 10:27:00 -0400
X-Google-Sender-Auth: f4c0ccd0c9c2f4d3
Message-ID: <g2rc68e39171005010727y6c5569b3nf41f0ed9b136c72f@mail.gmail.com>
Subject: Re: FieldCache memory estimation - term values are interned?
From: Yonik Seeley <yonik@lucidimagination.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

2010/4/30 Koji Sekiguchi <koji@r.email.ne.jp>:
> Are Strings that are got via FieldCache.DEFAULT.getStrings( reader,
> field ) interned?
>
> Since I have a requirement for having FieldCaches of some
> fields in 250M docs index, I'd like to estimate memory
> consumed by FieldCache.
>
> By looking at FieldCacheImpl source code, it seems that
> field names are interned, but values are not?

Values are not interned, but in a single field cache entry (String[])
the same String object is used for all docs with that same value.

But... I think StringIndex is more commonly used in both Lucene and
Solr than String[] (sorting, faceting, etc) so double check that it's
not StringIndex you should be looking at.

-Yonik
Apache Lucene Eurocon 2010
18-21 May 2010 | Prague

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46000-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat May 01 17:43:14 2010
Return-Path: <java-user-return-46000-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70925 invoked from network); 1 May 2010 17:43:14 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 1 May 2010 17:43:14 -0000
Received: (qmail 89830 invoked by uid 500); 1 May 2010 17:43:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89667 invoked by uid 500); 1 May 2010 17:43:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89659 invoked by uid 99); 1 May 2010 17:43:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 May 2010 17:43:11 +0000
X-ASF-Spam-Status: No, hits=-3.9 required=10.0
	tests=AWL,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [132.249.20.114] (HELO postal.sdsc.edu) (132.249.20.114)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 May 2010 17:43:04 +0000
Received: from mta.ad.sdsc.edu (mta.ad.sdsc.edu [132.249.69.68])
	by postal.sdsc.edu (8.11.7/8.11.7/server/80) with ESMTP id o41Hghc03574
	for <java-user@lucene.apache.org>; Sat, 1 May 2010 10:42:43 -0700 (PDT)
Received: from MBX.ad.sdsc.edu ([fe80::85f9:e068:7dc0:4fe0]) by
 mta.ad.sdsc.edu ([132.249.69.68]) with mapi; Sat, 1 May 2010 10:42:38 -0700
From: Christopher Condit <condit@sdsc.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Sat, 1 May 2010 10:42:35 -0700
Subject: RE: Modify TermQueries or Tokens
Thread-Topic: Modify TermQueries or Tokens
Thread-Index: AcrooAxG+5ISL+55R72f7nqnl5LbjQABQRdwAADeEBAAAITpkAADr1FQAAizisAAHkvtsA==
Message-ID: <BAFDED91EF7D5A43A30F897D6C94B1287294224CF9@MBX.ad.sdsc.edu>
References: <BAFDED91EF7D5A43A30F897D6C94B1287294224CEE@MBX.ad.sdsc.edu>
 <ED081AC9AEEE0248BBCCDE9989AAE3FC02CB13C0@rw-ex2003.BROADVISION.COM>
In-Reply-To: <ED081AC9AEEE0248BBCCDE9989AAE3FC02CB13C0@rw-ex2003.BROADVISION.COM>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0

> It looks good to me, but I did not test, when testing, we may print out b=
oth
>=20
> initialQuery.toString() // query produced by QueryParser
> finalQuery.toString()   // query after your new function
>=20
> as comparison, besides testing the query result.

Yes - it's exactly what I wanted:
Test Input: "foo OR baz AND (\"bar trumpet test\" OR (cheese AND nacho~.8))=
"
Initialquery.toString(): (test1:foo test2:foo) +(test1:baz test2:baz) +((te=
st1:"bar trumpet test" test2:"bar trumpet test") (+(test1:cheese test2:chee=
se) +(test1:nacho~0.5 test2:nacho~0.5) (test1:8 test2:8)))
Finaqueryl.toString(): (test1:*foo* test2:*foo*) +(test1:*baz* test2:*baz*)=
 +((test1:"bar trumpet test" test2:"bar trumpet test") (+(test1:*cheese* te=
st2:*cheese*) +(test1:nacho~0.5 test2:nacho~0.5) (test1:*8* test2:*8*)))

Thanks again,
-Chris


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46001-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun May 02 00:23:52 2010
Return-Path: <java-user-return-46001-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35379 invoked from network); 2 May 2010 00:23:51 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 2 May 2010 00:23:51 -0000
Received: (qmail 29959 invoked by uid 500); 2 May 2010 00:23:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29900 invoked by uid 500); 2 May 2010 00:23:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29892 invoked by uid 99); 2 May 2010 00:23:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 May 2010 00:23:49 +0000
X-ASF-Spam-Status: No, hits=-0.9 required=10.0
	tests=AWL,SPF_PASS,T_FRT_ADULT2
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of koji@r.email.ne.jp designates 202.224.39.198 as permitted sender)
Received: from [202.224.39.198] (HELO mail2.asahi-net.or.jp) (202.224.39.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 May 2010 00:23:43 +0000
Received: from koji-sekiguchi-no-macbook.local (w244069.ppp.asahi-net.or.jp [121.1.244.69])
	by mail2.asahi-net.or.jp (Postfix) with ESMTP id 4697CA15F5
	for <java-user@lucene.apache.org>; Sun,  2 May 2010 09:23:22 +0900 (JST)
Message-ID: <4BDCC5F9.40901@r.email.ne.jp>
Date: Sun, 02 May 2010 09:23:21 +0900
From: Koji Sekiguchi <koji@r.email.ne.jp>
User-Agent: Thunderbird 2.0.0.24 (Macintosh/20100228)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: FieldCache memory estimation - term values are interned?
References: <4BDB9D73.90902@r.email.ne.jp> <g2rc68e39171005010727y6c5569b3nf41f0ed9b136c72f@mail.gmail.com>
In-Reply-To: <g2rc68e39171005010727y6c5569b3nf41f0ed9b136c72f@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Yonik Seeley wrote:
> 2010/4/30 Koji Sekiguchi <koji@r.email.ne.jp>:
>   
>> Are Strings that are got via FieldCache.DEFAULT.getStrings( reader,
>> field ) interned?
>>
>> Since I have a requirement for having FieldCaches of some
>> fields in 250M docs index, I'd like to estimate memory
>> consumed by FieldCache.
>>
>> By looking at FieldCacheImpl source code, it seems that
>> field names are interned, but values are not?
>>     
>
> Values are not interned, but in a single field cache entry (String[])
> the same String object is used for all docs with that same value.
>
>   
Yeah, you are right. Because I could see the arbitrary two Strings that have
same value were identical (== is true) in String[] gotten by 
getStrings() but
I coudn't see explicit intern() for them, I asked. Can you elaborate who 
done it?

> But... I think StringIndex is more commonly used in both Lucene and
> Solr than String[] (sorting, faceting, etc) so double check that it's
> not StringIndex you should be looking at.
>
>   
Yes, I think StringIndex is better than String[] for my requirement in terms
of memory consumption as well (an extreme case, male/female field etc.).

Thank you,

Koji

-- 
http://www.rondhuit.com/en/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46002-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun May 02 00:43:10 2010
Return-Path: <java-user-return-46002-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37317 invoked from network); 2 May 2010 00:43:10 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 2 May 2010 00:43:10 -0000
Received: (qmail 33333 invoked by uid 500); 2 May 2010 00:43:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33271 invoked by uid 500); 2 May 2010 00:43:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33263 invoked by uid 99); 2 May 2010 00:43:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 May 2010 00:43:08 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_FRT_ADULT2,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of yseeley@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 May 2010 00:43:02 +0000
Received: by wyb33 with SMTP id 33so1001255wyb.35
        for <java-user@lucene.apache.org>; Sat, 01 May 2010 17:42:42 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:sender:reply-to:received
         :in-reply-to:references:date:x-google-sender-auth:message-id:subject
         :from:to:content-type;
        bh=lxsS91NErT/TdVETS1YGc8uurKUXHnL3hg19rLqICzU=;
        b=B9HLr215xa4vrARktA+HrrtHBjcpE+MjMT6Hg+C6En3i3S3UE1EXaYj6mb50nIvs8a
         FYwWdZHJKZaQH8IGC2LgB1b+Hrdixwvf/Yu/Db3+DCWn0AuUIhZdIsdYjXSpNlTFKL4P
         R5PqHkUgTVtnOk5afe9UjQL8snhQ/47aGJMHs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:reply-to:in-reply-to:references:date
         :x-google-sender-auth:message-id:subject:from:to:content-type;
        b=a2t4aN2u1jLI/RWpb6r/19vP2zDvgWsPZfagz8KFw6IA/Z6JRyET3D2JxzXdwNG5/J
         eqMvk0gyhoexRAent9xcbr9zQfeeDRh51IQUTRO++PdF8NhZSUZgwanu/mU6Vetq1/qe
         phkIFTin628db3F0yrkKL3a4v35ETd3r2Egic=
MIME-Version: 1.0
Received: by 10.216.90.69 with SMTP id d47mr2199667wef.198.1272760961799; Sat, 
	01 May 2010 17:42:41 -0700 (PDT)
Sender: yseeley@gmail.com
Reply-To: yonik@lucidimagination.com
Received: by 10.216.22.140 with HTTP; Sat, 1 May 2010 17:42:41 -0700 (PDT)
In-Reply-To: <4BDCC5F9.40901@r.email.ne.jp>
References: <4BDB9D73.90902@r.email.ne.jp>
	 <g2rc68e39171005010727y6c5569b3nf41f0ed9b136c72f@mail.gmail.com>
	 <4BDCC5F9.40901@r.email.ne.jp>
Date: Sat, 1 May 2010 20:42:41 -0400
X-Google-Sender-Auth: 340972c4681823a2
Message-ID: <k2nc68e39171005011742uc40d721fyd38fcb74338aa01e@mail.gmail.com>
Subject: Re: FieldCache memory estimation - term values are interned?
From: Yonik Seeley <yonik@lucidimagination.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

On Sat, May 1, 2010 at 8:23 PM, Koji Sekiguchi <koji@r.email.ne.jp> wrote:
> Yonik Seeley wrote:
>> Values are not interned, but in a single field cache entry (String[])
>> the same String object is used for all docs with that same value.
>
> Yeah, you are right. Because I could see the arbitrary two Strings that have
> same value were identical (== is true) in String[] gotten by getStrings()
> but
> I coudn't see explicit intern() for them, I asked. Can you elaborate who
> done it?

FieldCacheImpl:675 on trunk.

For every term, a string value in constructed... then TermDocs (now
DocsEnum in trunk) steps over every doc with that value and sets the
same value.

-Yonik
Apache Lucene Eurocon 2010
18-21 May 2010 | Prague




>> But... I think StringIndex is more commonly used in both Lucene and
>> Solr than String[] (sorting, faceting, etc) so double check that it's
>> not StringIndex you should be looking at.
>>
>>
>
> Yes, I think StringIndex is better than String[] for my requirement in terms
> of memory consumption as well (an extreme case, male/female field etc.).
>
> Thank you,
>
> Koji
>
> --
> http://www.rondhuit.com/en/
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46003-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun May 02 02:04:02 2010
Return-Path: <java-user-return-46003-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49528 invoked from network); 2 May 2010 02:04:02 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 2 May 2010 02:04:02 -0000
Received: (qmail 61734 invoked by uid 500); 2 May 2010 02:04:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61696 invoked by uid 500); 2 May 2010 02:04:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61688 invoked by uid 99); 2 May 2010 02:04:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 May 2010 02:04:00 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=SPF_PASS,T_FRT_ADULT2
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of koji@r.email.ne.jp designates 202.224.39.198 as permitted sender)
Received: from [202.224.39.198] (HELO mail2.asahi-net.or.jp) (202.224.39.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 May 2010 02:03:52 +0000
Received: from koji-sekiguchi-no-macbook.local (w244069.ppp.asahi-net.or.jp [121.1.244.69])
	by mail2.asahi-net.or.jp (Postfix) with ESMTP id B00A9A019B
	for <java-user@lucene.apache.org>; Sun,  2 May 2010 11:03:31 +0900 (JST)
Message-ID: <4BDCDD73.5070508@r.email.ne.jp>
Date: Sun, 02 May 2010 11:03:31 +0900
From: Koji Sekiguchi <koji@r.email.ne.jp>
User-Agent: Thunderbird 2.0.0.24 (Macintosh/20100228)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: FieldCache memory estimation - term values are interned?
References: <4BDB9D73.90902@r.email.ne.jp>	 <g2rc68e39171005010727y6c5569b3nf41f0ed9b136c72f@mail.gmail.com>	 <4BDCC5F9.40901@r.email.ne.jp> <k2nc68e39171005011742uc40d721fyd38fcb74338aa01e@mail.gmail.com>
In-Reply-To: <k2nc68e39171005011742uc40d721fyd38fcb74338aa01e@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Yonik Seeley wrote:
> On Sat, May 1, 2010 at 8:23 PM, Koji Sekiguchi <koji@r.email.ne.jp> wrote:
>   
>> Yonik Seeley wrote:
>>     
>>> Values are not interned, but in a single field cache entry (String[])
>>> the same String object is used for all docs with that same value.
>>>       
>> Yeah, you are right. Because I could see the arbitrary two Strings that have
>> same value were identical (== is true) in String[] gotten by getStrings()
>> but
>> I coudn't see explicit intern() for them, I asked. Can you elaborate who
>> done it?
>>     
>
> FieldCacheImpl:675 on trunk.
>
> For every term, a string value in constructed... then TermDocs (now
> DocsEnum in trunk) steps over every doc with that value and sets the
> same value.
>
>   
Uh, I looked that code but I didn't wise up.
Thank you very much for taking your time!

Koji

-- 
http://www.rondhuit.com/en/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46004-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun May 02 12:50:39 2010
Return-Path: <java-user-return-46004-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20049 invoked from network); 2 May 2010 12:50:38 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 2 May 2010 12:50:38 -0000
Received: (qmail 42613 invoked by uid 500); 2 May 2010 12:50:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42543 invoked by uid 500); 2 May 2010 12:50:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42535 invoked by uid 99); 2 May 2010 12:50:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 May 2010 12:50:35 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of arosenschein@gmail.com designates 209.85.222.180 as permitted sender)
Received: from [209.85.222.180] (HELO mail-pz0-f180.google.com) (209.85.222.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 May 2010 12:50:29 +0000
Received: by pzk10 with SMTP id 10so776763pzk.20
        for <java-user@lucene.apache.org>; Sun, 02 May 2010 05:50:07 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=4LM7hXYG0d/XZB/yk/BWP9f4nG+AatQbpgvYXm0g8TA=;
        b=TGNXDswZj5mUMk3Ds83tcaChO3O6JG0A9w3n/tFTTiRFyUa6ic2FbC54o6B8nmlXX/
         41lC2cgSBIQOWpLfZKduQB1Ij/3OaGnxuvmOSKNiyoTLtXvPP1yjGff8yOGWca26oXnK
         McFQ6ptbBBF5yZ+pNUj/YVLQhCFINbJrcxzs0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=b2UyHKUGzqV0tjOTOjx5BuFMnslsQ+CYOi4LAsuLYUq4OP8EjDMEg0pUT7aTyPqZHj
         ++cB7FHdVB0zaTqzU5XIhh5091RrJyt7qQs4msfC7mR3r8Imkwm8zsrETVkGb1nDX2Vk
         5V75NCR56XDekJW/GHgItHpOPovvfjqngABoU=
MIME-Version: 1.0
Received: by 10.141.106.15 with SMTP id i15mr2547252rvm.194.1272804607823; 
	Sun, 02 May 2010 05:50:07 -0700 (PDT)
Received: by 10.141.18.15 with HTTP; Sun, 2 May 2010 05:50:07 -0700 (PDT)
In-Reply-To: <E77D01D3-EB7D-4C8C-A817-03BE5A0E5D9E@apache.org>
References: <E6C119F7-C966-4280-94DD-3575BB3CE3F4@apache.org>
	 <x2i3504767f1004290759u6de20a3ehfa4d46fb11a97954@mail.gmail.com>
	 <h2r698f0de11004300500g71aba2b1g21378ba061b674c@mail.gmail.com>
	 <E77D01D3-EB7D-4C8C-A817-03BE5A0E5D9E@apache.org>
Date: Sun, 2 May 2010 15:50:07 +0300
Message-ID: <r2q698f0de11005020550o82e21da0ke400dd7187bc82a7@mail.gmail.com>
Subject: Re: Relevancy Practices
From: Avi Rosenschein <arosenschein@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

On 4/30/10, Grant Ingersoll <gsingers@apache.org> wrote:
>
> On Apr 30, 2010, at 8:00 AM, Avi Rosenschein wrote:
>> Also, tuning the algorithms to the users can be very important. For
>> instance, we have found that in a basic search functionality, the default
>> query parser operator OR works very well. But on a page for advanced
>> users,
>> who want to very precisely tune their search results, a default of AND
>> works
>> better.
>
> Avi,
>
> Great example.  Can you elaborate on how you arrived at this conclusion?
> What things did you do to determine it was a problem?
>
> -Grant

Hi Grant,

Sure. On http://wiki.answers.com/, we use search in a variety of
places and ways.

In the basic search box (what you get if you look stuff up in the main
Ask box on the home page), we generally want the relevancy matching to
be pretty fuzzy. For example, if the user looked up "Where can you see
photos of the Aurora Borealis effect?" I would still want to show them
"Where can you see photos of the Aurora Borealis?" as a match.

However, the advanced search page,
http://wiki.answers.com/Q/Special:Search, is used by advanced users to
filter questions by various facets and searches, and to them it is
important for the filter to filter out non-matches, since they use it
as a working page. For example, if they want to do a search for "Harry
Potter" and classify all results into the "Harry Potter" category, it
is important that not every match for "Harry" is returned.

-- Avi

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46005-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun May 02 19:48:58 2010
Return-Path: <java-user-return-46005-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81361 invoked from network); 2 May 2010 19:48:58 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 2 May 2010 19:48:58 -0000
Received: (qmail 59903 invoked by uid 500); 2 May 2010 19:48:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59849 invoked by uid 500); 2 May 2010 19:48:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59841 invoked by uid 99); 2 May 2010 19:48:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 May 2010 19:48:56 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.49.13] (HELO web52903.mail.re2.yahoo.com) (206.190.49.13)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 02 May 2010 19:48:47 +0000
Received: (qmail 94005 invoked by uid 60001); 2 May 2010 19:48:25 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1272829705; bh=m0clt6LarsMNH3bn/X8bvrzDCaNcKrOMUIV3XIw2yvo=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=LfoEvzNu+QLGqqVax6Eyv9P7nFr7IP4Oy7Y5Pi0trHf1iGIZK6YhGghSSTBZwqfqqJOfHfjPZLmOQ7MX9io7/8SwfPFNvf/j/MfA3nQtQ1N0dAWedwS5K0yNLDLYV2bgKF9qGq946Hyl5pSs/GqbhCMgrAXMshzytq0Pr53LcoE=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=LvnxyZSzSx0GsccC9K80dxrtCspJ5uzT+Or4b0CZpSW2rH75LR9r0/Fl4ySc7iLgoIx33sWvXxIXp3lws+YMvBlTFXPXk3bqKJ7mUjWj2IyLt9xECn6ArJ0aRl301mrzajqqolOfjkEkels5Ufws8mD0m6dkQ/RZnfjomYTc6u0=;
Message-ID: <906864.92846.qm@web52903.mail.re2.yahoo.com>
X-YMail-OSG: EnIow7MVM1mrz3lLiwAgAPo8OGx1l5Xe_hzAbzWQarxXMjW
 3TJHe1EKh4HrtHonrkZbDVRLKSWGL3S9fbcMD4L0FwcCnW4qyKHfaYOrwUDN
 exE0SscB_ZYVGO4zoEqT9xRMm7zlE8h7r7E14EI_VvjPoFtu7ckWwIb5oyoc
 96B9BdSoKGqaE624m8BgLQ74XoBj3XXF4K_QKZMQKsPM9MO9zp4gb1d444qs
 N1Yy4yo5G.JG9YJhp9PcMaciY7_Sn1KhtcQIufBFmfeFxGYMjt51qNqnqis.
 N5TTGnv4DjHFhgQQo6vx7UJgQiQ--
Received: from [78.168.185.134] by web52903.mail.re2.yahoo.com via HTTP; Sun, 02 May 2010 12:48:25 PDT
X-Mailer: YahooMailClassic/10.1.11 YahooMailWebService/0.8.103.269680
Date: Sun, 2 May 2010 12:48:25 -0700 (PDT)
From: Ahmet Arslan <iorixxx@yahoo.com>
Subject: Re: Lucene QueryParser and Analyzer
To: java-user@lucene.apache.org
In-Reply-To: <4BDA0FB2.8020501@princeton.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

> I think I've figured out what the=0A> problem is. Given the inputs,=0A> =
=0A> Input1: C1C2,C3C4,C5C6,C7,C8C9C10=0A> Input2: C1C2=A0 C3C4=A0 C5C6=A0 =
C7=A0 C8C9C10=0A> =0A> Input1 gets parsed as=0A> Query1: (text: "C1C2=A0 C3=
C4=A0 C5C6=A0 C7=A0=0A> C8C9C10")=0A> whereas Input2 gets parsed as=0A> Que=
ry2: (text: "C1C2") (text: "C3C4") (text: "C5C6") (text:=0A> "C7") (text: =
=0A> "C8C9C10")=0A> =0A> That is, Lucene constructs the query and then pass=
 the=0A> query text =0A> through the analyzer. Is there any way to=0A> forc=
e QueryParser to pass the input string through the=0A> analyzer before =0A>=
 creating the query? That is, force Lucene=0A> to create Query2 for both In=
put1 and Input2.=0A=0AQueryParser tokenizes input query string using white-=
spaces. You can alter this behavior to ways: =0A=0A1-) escaping whitespaces=
 with backslash, e.g. C1C2\ C3C4\ C5C6\ C7\ C8C9C10=0A2-) using quotes, e.g=
. "C1C2=A0 C3C4=A0 C5C6=A0 C7=A0 C8C9C10"=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46006-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun May 02 23:47:56 2010
Return-Path: <java-user-return-46006-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23275 invoked from network); 2 May 2010 23:47:56 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 2 May 2010 23:47:56 -0000
Received: (qmail 76711 invoked by uid 500); 2 May 2010 23:47:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76659 invoked by uid 500); 2 May 2010 23:47:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76651 invoked by uid 99); 2 May 2010 23:47:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 May 2010 23:47:54 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.83.176] (HELO mail-pv0-f176.google.com) (74.125.83.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 May 2010 23:47:49 +0000
Received: by pvd12 with SMTP id 12so16294pvd.35
        for <java-user@lucene.apache.org>; Sun, 02 May 2010 16:47:28 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.141.214.40 with SMTP id r40mr3046380rvq.11.1272844048302; Sun, 
	02 May 2010 16:47:28 -0700 (PDT)
Received: by 10.141.48.20 with HTTP; Sun, 2 May 2010 16:47:28 -0700 (PDT)
Date: Mon, 3 May 2010 09:47:28 +1000
Message-ID: <s2lbb132a4a1005021647nb2d0d2fej92f57d2b4b4d261d@mail.gmail.com>
Subject: Questions about the new query parser framework
From: Daniel Noll <daniel@nuix.com>
To: Lucene Java Users Mailing List <java-user@lucene.apache.org>
Content-Type: text/plain; charset=UTF-8

Hi all.

I have been using the new query parser framework fairly heavily,
although our use case is largely for *generating* queries rather than
parsing them - the intermediate query nodes happened to be a very good
model for doing this without all the usual nightmares of thinking
about the escape syntax, and without having to think about how each
query is encoded, which is the usual drawback of using Query objects
directly.

But I have some questions.

  1. Is it intentional that query nodes do not implement equals()?  I
had rather a lot of overhead when writing unit tests due to being
unable to use it - it's either (a) define a Matcher for every single
QueryNode class, or (b) toString() it and perform some sanitisation
(which is what we're doing.)

  2. Is there a plan to introduce a QuerySyntaxFormatter interface as
a counterpart to QuerySyntaxParser, for generating the same query
format using the nodes that would have been generated when parsing it
(obviously with a small change in format in some situations)?

  3. I have been parsing a lot of boolean queries, and have noticed
that there is *always* a GroupQueryNode around any BooleanQueryNode.
Is this really required, given that BooleanQueryNode is already
implicitly a grouping type of query?

  4. If GroupQueryNode is specifically a cue to whether the user
specified parentheses or not (i.e. if it is supposed to be cosmetic,
for the purposes of getting back to what the user typed in) then why
is it that "tag:a tag:b" and "tag:(a b)" both parse to the same node
structure (making it impossible to figure out which the user actually
used)?

Daniel



-- 
Daniel Noll                            Forensic and eDiscovery Software
Senior Developer                              The world's most advanced
Nuix                                                email data analysis
http://nuix.com/                                and eDiscovery software

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46007-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 03 05:12:42 2010
Return-Path: <java-user-return-46007-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67567 invoked from network); 3 May 2010 05:12:41 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 3 May 2010 05:12:41 -0000
Received: (qmail 64166 invoked by uid 500); 3 May 2010 05:12:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64068 invoked by uid 500); 3 May 2010 05:12:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64060 invoked by uid 99); 3 May 2010 05:12:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 May 2010 05:12:38 +0000
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=AWL,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of adrianocrestani@gmail.com designates 209.85.223.189 as permitted sender)
Received: from [209.85.223.189] (HELO mail-iw0-f189.google.com) (209.85.223.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 May 2010 05:12:33 +0000
Received: by iwn27 with SMTP id 27so2597267iwn.5
        for <java-user@lucene.apache.org>; Sun, 02 May 2010 22:12:12 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=XX5SobHEa2v+myaBK+rMdgRRp+VAW1XnRf2mJHTL3Vo=;
        b=TU2Zxd/Q4e3QkFgxsYWITibw1LWvBeFFudRYJ7lUo9WgjganqvW4iiIgRLA4eE2SfK
         f9BNneTk6XWfItzgGmCCsTIclebM/CDZbwnZlV/mH0suXVPr15OzaMFcxxb7M92fPx4J
         ew2Amz8a6O4A+uUaevsmBxKT69GjtPy3QGjUg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=lM/2uK20bw8IJ/JpDDfQFyydfGcOvJlmZz89tv7GYpx8bV2xT6MeuWfg3t07fdNFvB
         KDWtEGbEaKVXzob++9t97xJF9zezmLxPWC4ZsfyPvqhD4GlUND13DOzjPuj31pKX6cwN
         wza0hVaN65W1QcpCQf/kP46XcFrEpavtNydoA=
Received: by 10.231.150.131 with SMTP id y3mr207514ibv.67.1272863532356; Sun, 
	02 May 2010 22:12:12 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.60.6 with HTTP; Sun, 2 May 2010 22:11:52 -0700 (PDT)
In-Reply-To: <s2lbb132a4a1005021647nb2d0d2fej92f57d2b4b4d261d@mail.gmail.com>
References: <s2lbb132a4a1005021647nb2d0d2fej92f57d2b4b4d261d@mail.gmail.com>
From: Adriano Crestani <adrianocrestani@gmail.com>
Date: Mon, 3 May 2010 01:11:52 -0400
Message-ID: <AANLkTikkHpf6Y20K3qkgx_O9T2xQ9wBE14XvOW-cWYFl@mail.gmail.com>
Subject: Re: Questions about the new query parser framework
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0050450140abb1a7c90485a9a28b

--0050450140abb1a7c90485a9a28b
Content-Type: text/plain; charset=ISO-8859-1

Hi Daniel,

 1. Is it intentional that query nodes do not implement equals()?  I
had rather a lot of overhead when writing unit tests due to being
unable to use it - it's either (a) define a Matcher for every single
QueryNode class, or (b) toString() it and perform some sanitisation
(which is what we're doing.)

Good point! QueryNode(s) are data objects, and it makes sense to override
their equals method. But before, we need to define what is a QueryNode
equality. Should two nodes be considered equal if they represent
syntactically or semantically the same query? e.g. an ORQueryNode created
from the query <a OR b OR c> will not have the same children ordering as the
query <b OR c OR a>, so they are syntactically not equal, but they are
semantically equal, because the order of the OR operands (usually) does not
matter when the query is executed. I say it usually does not matter, because
it's up to the Query object implementation built from that ORQueryNode
object, for this reason, I vote for defining that two query nodes should be
equals if they are syntactically equal.

I also vote for excluding query node tags from the equality check, because
they are not meant to represent the query structure, but to attach extra
info to the node, which is usually used for communication between
processors.


 2. Is there a plan to introduce a QuerySyntaxFormatter interface as
a counterpart to QuerySyntaxParser, for generating the same query
format using the nodes that would have been generated when parsing it
(obviously with a small change in format in some situations)?

I actually never liked how QueryNode -> query string is done today, using
QueryNode.toQueryString(...) method. A QueryNode shouldn't be responsible
for converting itself back to the string format, because different
SyntaxParser(s) may create, e.g., an ORQueryNode from a <OR(a, b)> or <a OR
b> syntax, so what should orQueryNode.toQueryString(...) return? So a
QuerySyntaxFormatter makes sense, now we need to start working on how this
interface should look like, so SyntaxParser implementors can start
implementing equivalent QuerySyntaxFormatter(s).

 3. I have been parsing a lot of boolean queries, and have noticed
that there is *always* a GroupQueryNode around any BooleanQueryNode.
Is this really required, given that BooleanQueryNode is already
implicitly a grouping type of query?

 4. If GroupQueryNode is specifically a cue to whether the user
specified parentheses or not (i.e. if it is supposed to be cosmetic,
for the purposes of getting back to what the user typed in) then why
is it that "tag:a tag:b" and "tag:(a b)" both parse to the same node
structure (making it impossible to figure out which the user actually
used)?

Yes, it's created when parentheses are defined. The standard query
processors needs to know where parentheses were typed, so they can enforce
Lucene operator precedence, which is not that trivial and rely on some
conditions on whether the user typed or not the parentheses.

StandardSyntaxParser generate <tag:a tag:b> and <tag:(a b)> different query
node trees for these two queries, one with GroupQueryNode and the other
without. However, after the query node tree is sent through the
StandardQueryNodeProcessorPipeline, the query node tree is optimized and
usually GroupQueryNode(s) are removed.

Best Regards,
Adriano Crestani

On Sun, May 2, 2010 at 7:47 PM, Daniel Noll <daniel@nuix.com> wrote:

> Hi all.
>
> I have been using the new query parser framework fairly heavily,
> although our use case is largely for *generating* queries rather than
> parsing them - the intermediate query nodes happened to be a very good
> model for doing this without all the usual nightmares of thinking
> about the escape syntax, and without having to think about how each
> query is encoded, which is the usual drawback of using Query objects
> directly.
>
> But I have some questions.
>
>  1. Is it intentional that query nodes do not implement equals()?  I
> had rather a lot of overhead when writing unit tests due to being
> unable to use it - it's either (a) define a Matcher for every single
> QueryNode class, or (b) toString() it and perform some sanitisation
> (which is what we're doing.)
>
>  2. Is there a plan to introduce a QuerySyntaxFormatter interface as
> a counterpart to QuerySyntaxParser, for generating the same query
> format using the nodes that would have been generated when parsing it
> (obviously with a small change in format in some situations)?
>
>  3. I have been parsing a lot of boolean queries, and have noticed
> that there is *always* a GroupQueryNode around any BooleanQueryNode.
> Is this really required, given that BooleanQueryNode is already
> implicitly a grouping type of query?
>
>  4. If GroupQueryNode is specifically a cue to whether the user
> specified parentheses or not (i.e. if it is supposed to be cosmetic,
> for the purposes of getting back to what the user typed in) then why
> is it that "tag:a tag:b" and "tag:(a b)" both parse to the same node
> structure (making it impossible to figure out which the user actually
> used)?
>
> Daniel
>
>
>
> --
> Daniel Noll                            Forensic and eDiscovery Software
> Senior Developer                              The world's most advanced
> Nuix                                                email data analysis
> http://nuix.com/                                and eDiscovery software
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0050450140abb1a7c90485a9a28b--

From java-user-return-46008-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 03 07:22:03 2010
Return-Path: <java-user-return-46008-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88182 invoked from network); 3 May 2010 07:22:03 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 3 May 2010 07:22:03 -0000
Received: (qmail 35056 invoked by uid 500); 3 May 2010 07:22:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35030 invoked by uid 500); 3 May 2010 07:22:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35005 invoked by uid 99); 3 May 2010 07:22:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 May 2010 07:22:00 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of vijay.raghavan08@gmail.com designates 209.85.223.189 as permitted sender)
Received: from [209.85.223.189] (HELO mail-iw0-f189.google.com) (209.85.223.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 May 2010 07:21:53 +0000
Received: by iwn27 with SMTP id 27so2685442iwn.5
        for <java-user@lucene.apache.org>; Mon, 03 May 2010 00:21:31 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        bh=FLlcYTmUy07q7YCHfsJtpN0lg/1vkZjsxgdd53dOKIs=;
        b=sfdYQ+S89u7ywd6ZZCxkOPUE/kZTtUmKntnSBUv/S3tY7pjkC8WUMMnD7qxkvhsKuJ
         ADYKUEqnOA4NZx9HH05yi/QQ6jjJ5mH2MbN0Rfo9VhtNQVdgiDFqqxjw1ZfdQHhZ6FtO
         EuwpMmOgXHE+OymSjzk6Bjfj38JjrFBbGctIQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=PjDAEze/pGWZ0WqJsIMn4EGFca79blDdgc1hU/EN3ME2412pSJni9EGxBKwz/Ino37
         vAgD8waJ9C14nfKDWBI/UtoXPDcVlo0X26NpjsMSrQ5a7XP6fBTv6jeiq4oispZ0iot+
         TyfTxxCPG4na2IzIie51SMEu/zxVwpSrvg3/s=
MIME-Version: 1.0
Received: by 10.231.182.140 with SMTP id cc12mr1664592ibb.18.1272871291900; 
	Mon, 03 May 2010 00:21:31 -0700 (PDT)
Received: by 10.231.184.18 with HTTP; Mon, 3 May 2010 00:21:31 -0700 (PDT)
Date: Mon, 3 May 2010 00:21:31 -0700
Message-ID: <r2wbd236a1005030021kb5e5c2d6x73b8449d28bbb3b8@mail.gmail.com>
Subject: Indexing only newly created files
From: Vijay Veeraraghavan <vijay.raghavan08@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Dear all,
I am using lucene 3.0 to index the pdf reports that I generate
dynamically. I index the pdf file name (without extension), file path
and its absolute path as fields. I search with the file name without
extension; it retrieves a list, as usually 2 or more files are present
in the same name in different sub directories. As I create the index
for the first time it updates, assuming 100 pdf files in different
directories, the files meta info. If again I do indexing, while my
report generator scheduler has the produced 500 more pdf files
totaling to 600 files in different directories, I wish to index only
the new files to the index. But presently it=92s doing the whole thing
again (600 files). How to implement this functionality? Think of the
thousands of pdf files created on each run.

P.S: I cannot keep the meta-info of generated pdf files in the java
memory, as it exceeds thousands in a single run, and update the index
looping this list.

new IndexWriter(FSDirectory.open(this.indexDir), new StandardAnalyzer(
					Version.LUCENE_CURRENT), true,
					IndexWriter.MaxFieldLength.LIMITED);

is the boolean parameter is for this purpose? Please guide me.

--=20
Thanks
Vijay Veeraraghavan



--=20
Thanks & Regards
Vijay Veeraraghavan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46009-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 03 07:33:26 2010
Return-Path: <java-user-return-46009-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89103 invoked from network); 3 May 2010 07:33:26 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 3 May 2010 07:33:26 -0000
Received: (qmail 40758 invoked by uid 500); 3 May 2010 07:33:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40437 invoked by uid 500); 3 May 2010 07:33:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40429 invoked by uid 99); 3 May 2010 07:33:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 May 2010 07:33:23 +0000
X-ASF-Spam-Status: No, hits=1.8 required=10.0
	tests=AWL,FREEMAIL_FROM,FREEMAIL_REPLYTO,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 May 2010 07:33:18 +0000
Received: by fxm16 with SMTP id 16so1864676fxm.35
        for <java-user@lucene.apache.org>; Mon, 03 May 2010 00:32:56 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:reply-to
         :in-reply-to:references:date:message-id:subject:from:to:content-type;
        bh=NA1I5YZ/XP3ZbaQbcY1eFIPZREus3pleGodOhuVoTv0=;
        b=A/8svf2JsipIPTg1jSPbeajDjJ1uI9j/8JTkQY0MdYz2BGr+LMqZuYotZ70E4lLxsx
         /n/we7xJ4wvOCxqWH4/iCH6l79F0sj3wOyAEU6fvUtPlGbpERduiXwQazM41YE883VKv
         riMb9QW3lY+1W1ByzK/1B/8LpGOEKRATjICDs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type;
        b=FzWQCAtDMHyVCnfxkfXdL7Yl2VAxGGXSBEOYke+BPa0fFcx8l45xy6qtomRcnJzq/M
         c8a7HkfUinvLhuF+yWrsMYUC7RmCSCyuxTpdp6gbsIE7NZlq6kmdJOZkXpSeUdyvYdvO
         0PFVSsFDSm2+gcxeIsOKFRwBm98wAUdrGR4Q4=
MIME-Version: 1.0
Received: by 10.239.186.11 with SMTP id e11mr1464232hbh.82.1272871976532; Mon, 
	03 May 2010 00:32:56 -0700 (PDT)
Received: by 10.239.135.209 with HTTP; Mon, 3 May 2010 00:32:56 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <r2wbd236a1005030021kb5e5c2d6x73b8449d28bbb3b8@mail.gmail.com>
References: <r2wbd236a1005030021kb5e5c2d6x73b8449d28bbb3b8@mail.gmail.com>
Date: Mon, 3 May 2010 09:32:56 +0200
Message-ID: <y2hf18c9dde1005030032wd63729bfo13fafda67ce2ee49@mail.gmail.com>
Subject: Re: Indexing only newly created files
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485f44e86017b6b0485ab9ab6

--001485f44e86017b6b0485ab9ab6
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Hey there,

you might have to implement a some kind of unique identifier using an
indexed lucene field. When you are indexing you should fire a query with th=
e
uuid of your document (maybe the path to you pdf document) and check if the
document is in the index already. You could also do a boolean query
combining UUID, timestamp and / or a hash value to see if the document has
been changed. if so you can simply update the document by its UUID
(something like indexwriter.updateDocument(new Term("uuid",
value),document);)

Unfortunately you have to implement this yourself but it should not be that
much of a deal.

simon

On Mon, May 3, 2010 at 9:21 AM, Vijay Veeraraghavan <
vijay.raghavan08@gmail.com> wrote:

> Dear all,
> I am using lucene 3.0 to index the pdf reports that I generate
> dynamically. I index the pdf file name (without extension), file path
> and its absolute path as fields. I search with the file name without
> extension; it retrieves a list, as usually 2 or more files are present
> in the same name in different sub directories. As I create the index
> for the first time it updates, assuming 100 pdf files in different
> directories, the files meta info. If again I do indexing, while my
> report generator scheduler has the produced 500 more pdf files
> totaling to 600 files in different directories, I wish to index only
> the new files to the index. But presently it=E2=80=99s doing the whole th=
ing
> again (600 files). How to implement this functionality? Think of the
> thousands of pdf files created on each run.
>
> P.S: I cannot keep the meta-info of generated pdf files in the java
> memory, as it exceeds thousands in a single run, and update the index
> looping this list.
>
> new IndexWriter(FSDirectory.open(this.indexDir), new StandardAnalyzer(
>                                        Version.LUCENE_CURRENT), true,
>                                        IndexWriter.MaxFieldLength.LIMITED=
);
>
> is the boolean parameter is for this purpose? Please guide me.
>
> --
> Thanks
> Vijay Veeraraghavan
>
>
>
> --
> Thanks & Regards
> Vijay Veeraraghavan
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001485f44e86017b6b0485ab9ab6--

From java-user-return-46010-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 03 08:02:54 2010
Return-Path: <java-user-return-46010-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92281 invoked from network); 3 May 2010 08:02:54 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 3 May 2010 08:02:54 -0000
Received: (qmail 57355 invoked by uid 500); 3 May 2010 08:02:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57260 invoked by uid 500); 3 May 2010 08:02:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57251 invoked by uid 99); 3 May 2010 08:02:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 May 2010 08:02:51 +0000
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=AWL,FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vijay.raghavan08@gmail.com designates 209.85.223.189 as permitted sender)
Received: from [209.85.223.189] (HELO mail-iw0-f189.google.com) (209.85.223.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 May 2010 08:02:46 +0000
Received: by iwn27 with SMTP id 27so2714492iwn.5
        for <java-user@lucene.apache.org>; Mon, 03 May 2010 01:02:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=RyywPsj5TRQNoGmmKCydxdlF7GViJLuWxb2x01uIjrA=;
        b=KqZfomRGzemGJZpXZApL3HBhtH2/t26YvR8MR+AAE+eM4Ueg6P3SmmmdFpun9/YX74
         4IEqx9EJ2iMMR4tHAg4Ck2skDZ7I52irNJ39+hriYm+0apsUOPp/icnr41GhbdFHk76s
         rFUXubx57Vd4DkL72L5HywVvo+KPP8whc7Hps=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=hgnJ4uTxW/6eL0Kia96sPdgkvsKZ0tnG0LJDaj3IKoiaiz4Moffzh13w43262WAdGU
         +gFSIOZB6lj4hooh42WC5/wV7bptpUS9Tf6A3eODAl4FEtrYNz7N/PejbfceKrm7Yday
         Zc8LH9Lk86P3krzp3ZRIVMOGa+nrPg1xmQaB4=
MIME-Version: 1.0
Received: by 10.231.190.204 with SMTP id dj12mr1095261ibb.9.1272873745070; 
	Mon, 03 May 2010 01:02:25 -0700 (PDT)
Received: by 10.231.184.18 with HTTP; Mon, 3 May 2010 01:02:25 -0700 (PDT)
In-Reply-To: <y2hf18c9dde1005030032wd63729bfo13fafda67ce2ee49@mail.gmail.com>
References: <r2wbd236a1005030021kb5e5c2d6x73b8449d28bbb3b8@mail.gmail.com>
	 <y2hf18c9dde1005030032wd63729bfo13fafda67ce2ee49@mail.gmail.com>
Date: Mon, 3 May 2010 01:02:25 -0700
Message-ID: <q2ybd236a1005030102h1727f80bg9a963fdf582812be@mail.gmail.com>
Subject: Re: Indexing only newly created files
From: Vijay Veeraraghavan <vijay.raghavan08@gmail.com>
To: java-user@lucene.apache.org, simon.willnauer@gmail.com
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: quoted-printable

dear,
Thanks for you reply Mr. simon, I found it very useful.
I have another doubt, I create the index in a clustered environment (2
physical systems and 2 virtual). A shared system among the nodes is
where this index will be created. The scheduler runs in another remote
system which will create and save the pdfs to a remote file server. Is
it advisable to create a local index and add it the main index shared
by the nodes? Or create a local index and copy it to the nodes?

Thanks
Vijay

On 5/3/10, Simon Willnauer <simon.willnauer@googlemail.com> wrote:
> Hey there,
>
> you might have to implement a some kind of unique identifier using an
> indexed lucene field. When you are indexing you should fire a query with =
the
> uuid of your document (maybe the path to you pdf document) and check if t=
he
> document is in the index already. You could also do a boolean query
> combining UUID, timestamp and / or a hash value to see if the document ha=
s
> been changed. if so you can simply update the document by its UUID
> (something like indexwriter.updateDocument(new Term("uuid",
> value),document);)
>
> Unfortunately you have to implement this yourself but it should not be th=
at
> much of a deal.
>
> simon
>
> On Mon, May 3, 2010 at 9:21 AM, Vijay Veeraraghavan <
> vijay.raghavan08@gmail.com> wrote:
>
>> Dear all,
>> I am using lucene 3.0 to index the pdf reports that I generate
>> dynamically. I index the pdf file name (without extension), file path
>> and its absolute path as fields. I search with the file name without
>> extension; it retrieves a list, as usually 2 or more files are present
>> in the same name in different sub directories. As I create the index
>> for the first time it updates, assuming 100 pdf files in different
>> directories, the files meta info. If again I do indexing, while my
>> report generator scheduler has the produced 500 more pdf files
>> totaling to 600 files in different directories, I wish to index only
>> the new files to the index. But presently it=92s doing the whole thing
>> again (600 files). How to implement this functionality? Think of the
>> thousands of pdf files created on each run.
>>
>> P.S: I cannot keep the meta-info of generated pdf files in the java
>> memory, as it exceeds thousands in a single run, and update the index
>> looping this list.
>>
>> new IndexWriter(FSDirectory.open(this.indexDir), new StandardAnalyzer(
>>                                        Version.LUCENE_CURRENT), true,
>>
>> IndexWriter.MaxFieldLength.LIMITED);
>>
>> is the boolean parameter is for this purpose? Please guide me.
>>
>> --
>> Thanks
>> Vijay Veeraraghavan
>>
>>
>>
>> --
>> Thanks & Regards
>> Vijay Veeraraghavan
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>


--=20
Thanks & Regards
Vijay Veeraraghavan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46011-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 03 09:34:27 2010
Return-Path: <java-user-return-46011-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5137 invoked from network); 3 May 2010 09:34:27 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 3 May 2010 09:34:27 -0000
Received: (qmail 20599 invoked by uid 500); 3 May 2010 09:34:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20562 invoked by uid 500); 3 May 2010 09:34:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20554 invoked by uid 99); 3 May 2010 09:34:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 May 2010 09:34:24 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of vijay.raghavan08@gmail.com designates 209.85.223.189 as permitted sender)
Received: from [209.85.223.189] (HELO mail-iw0-f189.google.com) (209.85.223.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 May 2010 09:34:16 +0000
Received: by iwn27 with SMTP id 27so2776160iwn.5
        for <java-user@lucene.apache.org>; Mon, 03 May 2010 02:33:56 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=vUx6v6+6xrvWcc0Yvb2Q3TkLcjk4FNj/bWFVGEQP7DA=;
        b=C46P1Ja4L8/5hf6PV+oUOPqsgOxNFZSiUN5w1kE6N460oiHGV8YaJwuGXWll835cYY
         TiJQkGQB6cqgHpeDl53UNksj+ghFJoq9qFLLlTnKyxoTPD00Lcy7lkubPg10xLd+74Xo
         XOE82sNM3H0bA3D94ezf+UsSFLuxTxRN8NvcQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=Wuyl7YTQ9g+sCKMqtBD7v+Y1XN6F7zrZPbtdPs51xCfhIvZVjfB1dMkR7YC+myxxXe
         GPn+qu7c7sfZg9qJEMbiEaf90KU3/NULB3VONzfblTfmIVoyznPTJGMfR/MDcfm/AazI
         pMGVFyCjMDn8lcj+mPsOD/Kdn61eZQ5dhs9MY=
MIME-Version: 1.0
Received: by 10.231.159.143 with SMTP id j15mr8254220ibx.73.1272879194876; 
	Mon, 03 May 2010 02:33:14 -0700 (PDT)
Received: by 10.231.184.18 with HTTP; Mon, 3 May 2010 02:33:14 -0700 (PDT)
In-Reply-To: <q2ybd236a1005030102h1727f80bg9a963fdf582812be@mail.gmail.com>
References: <r2wbd236a1005030021kb5e5c2d6x73b8449d28bbb3b8@mail.gmail.com>
	 <y2hf18c9dde1005030032wd63729bfo13fafda67ce2ee49@mail.gmail.com>
	 <q2ybd236a1005030102h1727f80bg9a963fdf582812be@mail.gmail.com>
Date: Mon, 3 May 2010 02:33:14 -0700
Message-ID: <l2wbd236a1005030233s15813b86l83e32141de1b82ed@mail.gmail.com>
Subject: Re: Indexing only newly created files
From: Vijay Veeraraghavan <vijay.raghavan08@gmail.com>
To: java-user@lucene.apache.org, simon.willnauer@gmail.com
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

dear all,

as replied below, does searching again for the document in the index
and if found skip the indexing else index it, is this not similar to
indexing all pdf documents once again, is not this overhead? As I am
not going to index the details of the pdf (so if an indexed pdf was
recreated i need not reindex it) but just the paths of the documents.

Vijay

>> Hey there,
>>
>> you might have to implement a some kind of unique identifier using an
>> indexed lucene field. When you are indexing you should fire a query with
>> the
>> uuid of your document (maybe the path to you pdf document) and check if
>> the
>> document is in the index already. You could also do a boolean query
>> combining UUID, timestamp and / or a hash value to see if the document
>> has
>> been changed. if so you can simply update the document by its UUID
>> (something like indexwriter.updateDocument(new Term("uuid",
>> value),document);)
>>
>> Unfortunately you have to implement this yourself but it should not be
>> that
>> much of a deal.
>>
>> simon
>>
>> On Mon, May 3, 2010 at 9:21 AM, Vijay Veeraraghavan <
>> vijay.raghavan08@gmail.com> wrote:
>>
>>> Dear all,
>>> I am using lucene 3.0 to index the pdf reports that I generate
>>> dynamically. I index the pdf file name (without extension), file path
>>> and its absolute path as fields. I search with the file name without
>>> extension; it retrieves a list, as usually 2 or more files are present
>>> in the same name in different sub directories. As I create the index
>>> for the first time it updates, assuming 100 pdf files in different
>>> directories, the files meta info. If again I do indexing, while my
>>> report generator scheduler has the produced 500 more pdf files
>>> totaling to 600 files in different directories, I wish to index only
>>> the new files to the index. But presently it=92s doing the whole thing
>>> again (600 files). How to implement this functionality? Think of the
>>> thousands of pdf files created on each run.
>>>
>>> P.S: I cannot keep the meta-info of generated pdf files in the java
>>> memory, as it exceeds thousands in a single run, and update the index
>>> looping this list.
>>>
>>> new IndexWriter(FSDirectory.open(this.indexDir), new StandardAnalyzer(
>>>                                        Version.LUCENE_CURRENT), true,
>>>
>>> IndexWriter.MaxFieldLength.LIMITED);
>>>
>>> is the boolean parameter is for this purpose? Please guide me.
>>>
>>> --
>>> Thanks
>>> Vijay Veeraraghavan
>>>
>>>
>>>
>>> --
>>> Thanks & Regards
>>> Vijay Veeraraghavan
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>
>
> --
> Thanks & Regards
> Vijay Veeraraghavan
>


--=20
Thanks & Regards
Vijay Veeraraghavan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46012-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 03 10:21:48 2010
Return-Path: <java-user-return-46012-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12600 invoked from network); 3 May 2010 10:21:47 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 3 May 2010 10:21:47 -0000
Received: (qmail 63735 invoked by uid 500); 3 May 2010 10:21:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63469 invoked by uid 500); 3 May 2010 10:21:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63461 invoked by uid 99); 3 May 2010 10:21:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 May 2010 10:21:41 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of vijay.raghavan08@gmail.com designates 209.85.223.189 as permitted sender)
Received: from [209.85.223.189] (HELO mail-iw0-f189.google.com) (209.85.223.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 May 2010 10:21:33 +0000
Received: by iwn27 with SMTP id 27so2808609iwn.5
        for <java-user@lucene.apache.org>; Mon, 03 May 2010 03:21:12 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        bh=keO32owbxUOUEwY1NKfx5JyW/HudiSpusk1c5yAsmYU=;
        b=UT0/K+Jvta9cDlvg3uGwsHkQ5jSWxbEat5N27xLAbDfBmIXbo/ZHwhGblCn5wUWwdF
         EvqPhDgd43vXhEFSgid/ymz/hpYqWqgGqSmLbi6XbC+HdlaB/EaHnL3ZjQLPkgJ1fnAS
         HkKIes/StCKYCBbSC8JFQtjWz95fpKG0cYpj0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=J20BQ+m+iERyLNjiHVr59CZgxb1DDFbwZdui+pfFk1c8v8W2RbdfhMoc+CUUyItUbw
         m8L74KIwyiSG8LOdPVpnykz1CZCe4RD2NOwcC92ErzoNy+nZE2sjyFhrR/316X5jlGnZ
         Id0/a6Sy+1wb39QDE4vKYv1N43F655OYb6ahc=
MIME-Version: 1.0
Received: by 10.231.162.85 with SMTP id u21mr559764ibx.95.1272882072287; Mon, 
	03 May 2010 03:21:12 -0700 (PDT)
Received: by 10.231.184.18 with HTTP; Mon, 3 May 2010 03:21:12 -0700 (PDT)
Date: Mon, 3 May 2010 03:21:12 -0700
Message-ID: <q2gbd236a1005030321gd9f4506fy7b5136a05afb9263@mail.gmail.com>
Subject: Using IndexReader in the web environment
From: Vijay Veeraraghavan <vijay.raghavan08@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

In a clustered environment I search the index from the web
application. In the web application I am creating IndexReader on each
request. is it expensive to do like this? I read somewhere in the web
that try using the same reader as much as possible. Can i keep the
initially created IndexReader in the session/application scopes and
use the same for each request? Any other idea?

Viay

On 5/3/10, Vijay Veeraraghavan <vijay.raghavan08@gmail.com> wrote:
> dear all,
>
> as replied below, does searching again for the document in the index
> and if found skip the indexing else index it, is this not similar to
> indexing all pdf documents once again, is not this overhead? As I am
> not going to index the details of the pdf (so if an indexed pdf was
> recreated i need not reindex it) but just the paths of the documents.
>
> Vijay
>
>>> Hey there,
>>>
>>> you might have to implement a some kind of unique identifier using an
>>> indexed lucene field. When you are indexing you should fire a query wit=
h
>>> the
>>> uuid of your document (maybe the path to you pdf document) and check if
>>> the
>>> document is in the index already. You could also do a boolean query
>>> combining UUID, timestamp and / or a hash value to see if the document
>>> has
>>> been changed. if so you can simply update the document by its UUID
>>> (something like indexwriter.updateDocument(new Term("uuid",
>>> value),document);)
>>>
>>> Unfortunately you have to implement this yourself but it should not be
>>> that
>>> much of a deal.
>>>
>>> simon
>>>
>>> On Mon, May 3, 2010 at 9:21 AM, Vijay Veeraraghavan <
>>> vijay.raghavan08@gmail.com> wrote:
>>>
>>>> Dear all,
>>>> I am using lucene 3.0 to index the pdf reports that I generate
>>>> dynamically. I index the pdf file name (without extension), file path
>>>> and its absolute path as fields. I search with the file name without
>>>> extension; it retrieves a list, as usually 2 or more files are present
>>>> in the same name in different sub directories. As I create the index
>>>> for the first time it updates, assuming 100 pdf files in different
>>>> directories, the files meta info. If again I do indexing, while my
>>>> report generator scheduler has the produced 500 more pdf files
>>>> totaling to 600 files in different directories, I wish to index only
>>>> the new files to the index. But presently it=92s doing the whole thing
>>>> again (600 files). How to implement this functionality? Think of the
>>>> thousands of pdf files created on each run.
>>>>
>>>> P.S: I cannot keep the meta-info of generated pdf files in the java
>>>> memory, as it exceeds thousands in a single run, and update the index
>>>> looping this list.
>>>>
>>>> new IndexWriter(FSDirectory.open(this.indexDir), new StandardAnalyzer(
>>>>                                        Version.LUCENE_CURRENT), true,
>>>>
>>>> IndexWriter.MaxFieldLength.LIMITED);
>>>>
>>>> is the boolean parameter is for this purpose? Please guide me.
>>>>
>>>> --
>>>> Thanks
>>>> Vijay Veeraraghavan
>>>>
>>>>
>>>>
>>>> --
>>>> Thanks & Regards
>>>> Vijay Veeraraghavan
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>
>>
>> --
>> Thanks & Regards
>> Vijay Veeraraghavan
>>
>
>
> --
> Thanks & Regards
> Vijay Veeraraghavan
>


--=20
Thanks & Regards
Vijay Veeraraghavan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46013-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 03 13:18:46 2010
Return-Path: <java-user-return-46013-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50351 invoked from network); 3 May 2010 13:18:46 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 3 May 2010 13:18:46 -0000
Received: (qmail 60587 invoked by uid 500); 3 May 2010 13:18:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60470 invoked by uid 500); 3 May 2010 13:18:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60462 invoked by uid 99); 3 May 2010 13:18:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 May 2010 13:18:43 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [217.237.170.35] (HELO mail.healy-hudson.com) (217.237.170.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 May 2010 13:18:38 +0000
Content-class: urn:content-classes:message
Subject: AW: Relevancy Practices
Date: Mon, 3 May 2010 15:18:15 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Message-ID: <D7206503EB5BE94497458AF4FE4AE8AB01B9ADEA@owamz.healy-hudson.com>
In-Reply-To: <x2i3504767f1004290759u6de20a3ehfa4d46fb11a97954@mail.gmail.com>
X-MimeOLE: Produced By Microsoft Exchange V6.5
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Relevancy Practices
Thread-Index: AcrnrK7y3vMmtTNTQrCeaxKUPzFR3gDFFqWQ
References: <E6C119F7-C966-4280-94DD-3575BB3CE3F4@apache.org> <x2i3504767f1004290759u6de20a3ehfa4d46fb11a97954@mail.gmail.com>
From: "Uwe Goetzke" <uwe.goetzke@healy-hudson.com>
To: <java-user@lucene.apache.org>

Regarding Part3:=20
Data quality
For our search domain (catalog products) we face very often the problem =
that the search data is full of acronyms and abbreviations like:
cable,nym-j,pvc,3x2.5mm=B2
or
dvd-/cd-/usb-carradio,4x50W,divx,bl

We solved this by a combination of normalization for better data quality =
(or less variations)
and some tolerant sloppy phrase search where the search token needs only =
to partly match an indexed token.
We use here a dictionary lookup approach into the indexed tokens of some =
fields and expand the users query with a well weighted set of search =
terms.

It took us some iterations to get this right and fast enough to search =
in several million products.
The next step on our list are facets.

Uwe=20


-----Urspr=FCngliche Nachricht-----
Von: mbennett.ideaeng@gmail.com [mailto:mbennett.ideaeng@gmail.com] Im =
Auftrag von Mark Bennett
Gesendet: Donnerstag, 29. April 2010 16:59
An: java-user@lucene.apache.org
Betreff: Re: Relevancy Practices

Hi Grant,

You're welcome to use any of my slides (Dave's got them), with =
attribution
of course.

BUT....

Have you considered a section something like "why the hell do you think
Relevancy tweaking is gonna save you!?!?"

Basically that, as a corpus grows exponentially, so do results list =
sizes,
so ALL relevancy tweaks will eventually fail.  And FACETS (or other
navigators) are the answer.  I've got slides on that as well.

Of course relevancy matters.... but it's only ONE of perhaps a three =
pronged
approach:
1: Organic Relevancy and top query suggetions
2: Results list Navigators, the best the system can support, and
3: Data quality (spidering, METADATA quality, source weighting, etc)

Mark

--
Mark Bennett / New Idea Engineering, Inc. / mbennett@ideaeng.com
Direct: 408-733-0387 / Main: 866-IDEA-ENG / Cell: 408-829-6513


On Thu, Apr 29, 2010 at 7:14 AM, Grant Ingersoll =
<gsingers@apache.org>wrote:

> I'm putting on a talk at Lucene Eurocon (
> http://lucene-eurocon.org/sessions-track1-day2.html#1) on "Practical
> Relevance" and I'm curious as to what people put in practice for =
testing and
> improving relevance.  I have my own inclinations, but I don't want to =
muddy
> the water just yet.  So, if you have a few moments, I'd love to hear
> responses to the following questions.
>
> What worked?
> What didn't work?
> What didn't you understand about it?
> What tools did you use?
> What tools did you wish you had either for debugging relevance or =
"fixing"
> it?
> How much time did you spend on it?
> How did you avoid over/under tuning?
> What stage of development/testing/production did you decide to do =
relevance
> tuning?  Was that timing planned or not?
>
>
> Thanks,
> Grant
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46014-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 03 13:24:04 2010
Return-Path: <java-user-return-46014-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51511 invoked from network); 3 May 2010 13:24:04 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 3 May 2010 13:24:04 -0000
Received: (qmail 66463 invoked by uid 500); 3 May 2010 13:24:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66334 invoked by uid 500); 3 May 2010 13:24:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66325 invoked by uid 99); 3 May 2010 13:24:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 May 2010 13:24:02 +0000
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=AWL,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.210.179 as permitted sender)
Received: from [209.85.210.179] (HELO mail-yx0-f179.google.com) (209.85.210.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 May 2010 13:23:57 +0000
Received: by yxe9 with SMTP id 9so770820yxe.29
        for <java-user@lucene.apache.org>; Mon, 03 May 2010 06:23:36 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=5Vzs/sook9RBWvMg0IwZSAVjfpWgwWTlUoyUPP98T84=;
        b=lA5F8QYfhJxtph0qAe8vvG8jEJkfvH1FltDDoNwgXi7n2fJlAkSI6Gvseji2527sYy
         9M+Egyg6XDasfFsuEd5yK/uQzQ5VF4Su79aGPUj39c2uQ5KRg2Y2ZWfHcO03/KAHYjAE
         AXab8e7C3UfbKmOGcVdKn/mVCybSUIvgsn+qI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=JY6Pi2vpINGhc5Gx7AJ77f6uJBNYgZYlqThPRyBCnwRFn1ImPCjgeW3AOW1WfapvQY
         XBVkTSe8qnv8D8LGS/fbXDgby0pp2i97pO3sgZ7EHOWIRBBogu9AoG3tzHNHnd5NElCZ
         8fhy+ksvlJ9IQlc+yiTrZgy4o0HgimJzCK0Tc=
MIME-Version: 1.0
Received: by 10.150.119.11 with SMTP id r11mr7818207ybc.334.1272893015874; 
	Mon, 03 May 2010 06:23:35 -0700 (PDT)
Received: by 10.151.43.7 with HTTP; Mon, 3 May 2010 06:23:35 -0700 (PDT)
In-Reply-To: <q2gbd236a1005030321gd9f4506fy7b5136a05afb9263@mail.gmail.com>
References: <q2gbd236a1005030321gd9f4506fy7b5136a05afb9263@mail.gmail.com>
Date: Mon, 3 May 2010 09:23:35 -0400
Message-ID: <g2z359a92831005030623t9dc5be2ay99048d61340b0979@mail.gmail.com>
Subject: Re: Using IndexReader in the web environment
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd6cf160c5d730485b08033

--000e0cd6cf160c5d730485b08033
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: quoted-printable

The quick answer is that the session is probably the wrong place to keep
an IndexReader, since that's per-user. I'd define  a new server/servlet tha=
t
did my searching and have my webapps use that. Makes it really simple
to re-use index readers.

And reopening the IndexReader for each request will probably cause you
to have very unsatisfactory search performance under load.

FWIW
Erick

Also:
>From Hossman's Apache page:

When starting a new discussion on a mailing list, please do not reply to
an existing message, instead start a fresh email.  Even if you change the
subject line of your email, other mail headers still track which thread
you replied to and your question is "hidden" in that thread and gets less
attention.   It makes following discussions in the mailing list archives
particularly difficult.
See Also:  http://en.wikipedia.org/wiki/User:DonDiego/Thread_hijacking



On Mon, May 3, 2010 at 6:21 AM, Vijay Veeraraghavan <
vijay.raghavan08@gmail.com> wrote:

> Hi all,
>
> In a clustered environment I search the index from the web
> application. In the web application I am creating IndexReader on each
> request. is it expensive to do like this? I read somewhere in the web
> that try using the same reader as much as possible. Can i keep the
> initially created IndexReader in the session/application scopes and
> use the same for each request? Any other idea?
>
> Viay
>
> On 5/3/10, Vijay Veeraraghavan <vijay.raghavan08@gmail.com> wrote:
> > dear all,
> >
> > as replied below, does searching again for the document in the index
> > and if found skip the indexing else index it, is this not similar to
> > indexing all pdf documents once again, is not this overhead? As I am
> > not going to index the details of the pdf (so if an indexed pdf was
> > recreated i need not reindex it) but just the paths of the documents.
> >
> > Vijay
> >
> >>> Hey there,
> >>>
> >>> you might have to implement a some kind of unique identifier using an
> >>> indexed lucene field. When you are indexing you should fire a query
> with
> >>> the
> >>> uuid of your document (maybe the path to you pdf document) and check =
if
> >>> the
> >>> document is in the index already. You could also do a boolean query
> >>> combining UUID, timestamp and / or a hash value to see if the documen=
t
> >>> has
> >>> been changed. if so you can simply update the document by its UUID
> >>> (something like indexwriter.updateDocument(new Term("uuid",
> >>> value),document);)
> >>>
> >>> Unfortunately you have to implement this yourself but it should not b=
e
> >>> that
> >>> much of a deal.
> >>>
> >>> simon
> >>>
> >>> On Mon, May 3, 2010 at 9:21 AM, Vijay Veeraraghavan <
> >>> vijay.raghavan08@gmail.com> wrote:
> >>>
> >>>> Dear all,
> >>>> I am using lucene 3.0 to index the pdf reports that I generate
> >>>> dynamically. I index the pdf file name (without extension), file pat=
h
> >>>> and its absolute path as fields. I search with the file name without
> >>>> extension; it retrieves a list, as usually 2 or more files are prese=
nt
> >>>> in the same name in different sub directories. As I create the index
> >>>> for the first time it updates, assuming 100 pdf files in different
> >>>> directories, the files meta info. If again I do indexing, while my
> >>>> report generator scheduler has the produced 500 more pdf files
> >>>> totaling to 600 files in different directories, I wish to index only
> >>>> the new files to the index. But presently it=92s doing the whole thi=
ng
> >>>> again (600 files). How to implement this functionality? Think of the
> >>>> thousands of pdf files created on each run.
> >>>>
> >>>> P.S: I cannot keep the meta-info of generated pdf files in the java
> >>>> memory, as it exceeds thousands in a single run, and update the inde=
x
> >>>> looping this list.
> >>>>
> >>>> new IndexWriter(FSDirectory.open(this.indexDir), new StandardAnalyze=
r(
> >>>>                                        Version.LUCENE_CURRENT), true=
,
> >>>>
> >>>> IndexWriter.MaxFieldLength.LIMITED);
> >>>>
> >>>> is the boolean parameter is for this purpose? Please guide me.
> >>>>
> >>>> --
> >>>> Thanks
> >>>> Vijay Veeraraghavan
> >>>>
> >>>>
> >>>>
> >>>> --
> >>>> Thanks & Regards
> >>>> Vijay Veeraraghavan
> >>>>
> >>>> --------------------------------------------------------------------=
-
> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>
> >>>>
> >>>
> >>
> >>
> >> --
> >> Thanks & Regards
> >> Vijay Veeraraghavan
> >>
> >
> >
> > --
> > Thanks & Regards
> > Vijay Veeraraghavan
> >
>
>
> --
> Thanks & Regards
> Vijay Veeraraghavan
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd6cf160c5d730485b08033--

From java-user-return-46015-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 03 18:09:29 2010
Return-Path: <java-user-return-46015-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50558 invoked from network); 3 May 2010 18:09:29 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 3 May 2010 18:09:29 -0000
Received: (qmail 9658 invoked by uid 500); 3 May 2010 18:09:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9632 invoked by uid 500); 3 May 2010 18:09:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9624 invoked by uid 99); 3 May 2010 18:09:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 May 2010 18:09:27 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of peterlkeegan@gmail.com designates 209.85.221.180 as permitted sender)
Received: from [209.85.221.180] (HELO mail-qy0-f180.google.com) (209.85.221.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 May 2010 18:09:20 +0000
Received: by qyk10 with SMTP id 10so3992009qyk.11
        for <java-user@lucene.apache.org>; Mon, 03 May 2010 11:08:59 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=1MjEK3IMJu8rcumJFNzuHFqIqNDF3mb/abQFE7zOQxA=;
        b=viXGO+Bcw7HLrizxUKEU11hrggSCQD/iahHu8ETYoXoufjOGOWdOAw8bl3ObJWJeGM
         PefMn87Sh+WRWDtbyma1fZElaoz64NTu1ZvMgYpEi0CFajtB1PPVnVBerxay62gUrA1o
         D8HOCDRkr8ELxbZKfCO875u3eYv6H7aZcgIzM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=W/NdOdDYL+5XDVEjdy9TWxeKH/xbnJNZLD1GyGItxM4ZhPPagB+sytT1lSdTl7D1mE
         Vwg7aDJp9R1BhqWft0wWRfFVnRubT5x5oBfZAFo0KA2ImzVohreVEKJ1j90ym4E+hM4y
         Yw+lrtls46m6DirEAtcoKIGApgWgj/ftnrGjo=
MIME-Version: 1.0
Received: by 10.224.94.65 with SMTP id y1mr3444494qam.136.1272910136032; Mon, 
	03 May 2010 11:08:56 -0700 (PDT)
Received: by 10.229.84.134 with HTTP; Mon, 3 May 2010 11:08:55 -0700 (PDT)
In-Reply-To: <E6C119F7-C966-4280-94DD-3575BB3CE3F4@apache.org>
References: <E6C119F7-C966-4280-94DD-3575BB3CE3F4@apache.org>
Date: Mon, 3 May 2010 14:08:55 -0400
Message-ID: <y2re994873a1005031108g8d8a0153u161aaf008a03a7ab@mail.gmail.com>
Subject: Re: Relevancy Practices
From: Peter Keegan <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000feaed9d917ea6c90485b47c5b
X-Virus-Checked: Checked by ClamAV on apache.org

--000feaed9d917ea6c90485b47c5b
Content-Type: text/plain; charset=ISO-8859-1

We discovered very soon after going to production that Lucene's scores were
often 'too precise'. For example, a page of 25 results may have several
different score values, and all within 15% of each other, but to the end
user all 25 results were equally relevant. Thus we wanted the secondary sort
field to determine the order, instead. This required writing a custom score
comparator to 'round' the scores. The same thing occurred for distance
sorting. We also limit the effect of term frequency to help prevent
spamming.  In comparison to Avi, we use 'AND' as the default operator for
keyword queries and if no docs are found, the query is automatically retried
with 'OR'. This improves precision a bit and only occurs if the user
provides no operators.

Lucene's Explanation class has been invaluable in helping me to explain a
particular sort order in many, many situations.
Most of our relevance tuning has occurred after deployment to production.

Peter

On Thu, Apr 29, 2010 at 10:14 AM, Grant Ingersoll <gsingers@apache.org>wrote:

> I'm putting on a talk at Lucene Eurocon (
> http://lucene-eurocon.org/sessions-track1-day2.html#1) on "Practical
> Relevance" and I'm curious as to what people put in practice for testing and
> improving relevance.  I have my own inclinations, but I don't want to muddy
> the water just yet.  So, if you have a few moments, I'd love to hear
> responses to the following questions.
>
> What worked?
> What didn't work?
> What didn't you understand about it?
> What tools did you use?
> What tools did you wish you had either for debugging relevance or "fixing"
> it?
> How much time did you spend on it?
> How did you avoid over/under tuning?
> What stage of development/testing/production did you decide to do relevance
> tuning?  Was that timing planned or not?
>
>
> Thanks,
> Grant
>

--000feaed9d917ea6c90485b47c5b--

From java-user-return-46016-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 03 19:20:40 2010
Return-Path: <java-user-return-46016-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89248 invoked from network); 3 May 2010 19:20:40 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 3 May 2010 19:20:40 -0000
Received: (qmail 20866 invoked by uid 500); 3 May 2010 19:20:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20831 invoked by uid 500); 3 May 2010 19:20:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20823 invoked by uid 99); 3 May 2010 19:20:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 May 2010 19:20:38 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of pablo.queixalos@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 May 2010 19:20:32 +0000
Received: by fxm16 with SMTP id 16so2463987fxm.35
        for <java-user@lucene.apache.org>; Mon, 03 May 2010 12:20:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=prok00XUi4UAp0frkCn+rbKsYJudwqOI2EsQDZRyn/Y=;
        b=lYcj054JKv0HQYBGC5CNZJPrEV8t87SdXfdlbfBIqOirUCkhF/oioBNP09W42jtczV
         llqBSevxOQiZUZFHpjIA064EuvGpJ7tFol+TX7s1ENdfBknMFRaW0iDOU86UErXWSWYN
         RaMu3whmoUZZWoUZMIM0a6Sks6NHyy4UHG3jQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=FshXe9rTaDn4KoUyC2y9QTf9KP18Kg5CtzGet8+2AiiGQujTjRSMCvAxmOzRb4cig6
         uyKWc/YUgcg3LQSFj3s/rzQDiPC7Yw+NqGglbhFkDFBVuy4LyuVP121wLxDzv6JSuWc5
         UhFCPcTWt4vXUThQBsKe82gaTruES52rNSd5Q=
MIME-Version: 1.0
Received: by 10.102.13.24 with SMTP id 24mr9279320mum.6.1272914410707; Mon, 03 
	May 2010 12:20:10 -0700 (PDT)
Received: by 10.103.241.19 with HTTP; Mon, 3 May 2010 12:20:10 -0700 (PDT)
In-Reply-To: <s2uca64e7161005031152gfd75fa3cha003686d515ca9cc@mail.gmail.com>
References: <s2uca64e7161005031152gfd75fa3cha003686d515ca9cc@mail.gmail.com>
Date: Mon, 3 May 2010 21:20:10 +0200
Message-ID: <m2pca64e7161005031220m66578428i6760427c5875f61c@mail.gmail.com>
Subject: Wich way would you recommend for successive-words similarity and 
	scoring ?
From: Pablo <pablo.queixalos@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hello,

Lucene core doesn't seems to use relative word positioning (?) for scoring.

For example, indexing that phrase "a b c d e f g h i j k l m n o p q r
s t u v w x y z", these queries give the same results (0.19308087) :
=A0- 1 : phrase:'e f g'
=A0- 2 : phrase:'o k z'

I'm a bit familiar with lucene and snowballs, but I never (really)
needed this feature before, and didn't browse the lucene contribs.

Maybe I'm misunderstanding something, but, what can I do to obtain
query 1 get a better score than the second ?

Should I implement a Scorer and or a Similarity, or can an analyser
and a specific stemmer be sufficient?


Thanks, [I first wrote to dev, wasn't the right place.]

Pablo

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46017-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 04 00:42:26 2010
Return-Path: <java-user-return-46017-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56119 invoked from network); 4 May 2010 00:42:26 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 May 2010 00:42:26 -0000
Received: (qmail 34054 invoked by uid 500); 4 May 2010 00:42:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33993 invoked by uid 500); 4 May 2010 00:42:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33950 invoked by uid 99); 4 May 2010 00:42:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 May 2010 00:42:23 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [98.136.167.18] (HELO web113318.mail.gq1.yahoo.com) (98.136.167.18)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 04 May 2010 00:42:15 +0000
Received: (qmail 44733 invoked by uid 60001); 4 May 2010 00:41:53 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1272933713; bh=1leZgRhzPirtnxJ6U0K7+gJVF9Fyp7OzXe9V2iYQ0wE=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=WsihbG+FHV2tBcdwFhNbGs+a3Xz7KGEBhz4T8I3Ykv6t1o/U2kG8Iqb5ChSQsliS+NGNVU0wSfJC4SrRkzQ20jrlghDbeFrXlFlO1iM/TSX6skeEuTK+shUj9ahLuhRJTaWqn/Y4OP8bXOH0hJpInys3DZ+JVG6oQCzen2hXbW0=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=2VjaV5Jvi+s4R5BZx03B6E+0zL75/E7KS3l8EPKK4TLeVzyOhTne3jb9rF4LBijXyEfaYf0v3tmsza2GhXiSrxGCZLJEyzOUlzUhWvEx3SCOp0sZPlG1UY1RRMkP03c2w34KIKU5PV+38Rv9+Lvl3GVZ6Ptk7oUTS4pwTXvUeMQ=;
Message-ID: <713587.43972.qm@web113318.mail.gq1.yahoo.com>
X-YMail-OSG: ByVo5eUVM1khUdDhwdY68NTh6c.mJUr8JvX7ln45rV6gYfz
 boQTxYPjB2FIeRjQ6y6pMInYdMRNkgqg46zv6RMd1JrekOY6WDGZ73F9AS7n
 KppdH0JGWtYGS_wwZdYCafr6uB1XWUkZiL1ktXd1bljV1HDFtybyy4WC841k
 Oh0awW9_llm1mTRNuspu96NmBMrAWgZCoZi9Kjti1AntpCRf8OCp2EzWOYPD
 A2R5vQenO1KIZ2N70zKqhXxI7qNN84xL11lNklJPJbHAIa5jMJyKrX7SrIBu
 RrXp.fhVoTZcZcjrIcpuYDd3MtEdeNKviARfOR4lraaF2CpzZX.S4UA--
Received: from [99.150.141.64] by web113318.mail.gq1.yahoo.com via HTTP; Mon, 03 May 2010 17:41:53 PDT
X-Mailer: YahooMailClassic/10.1.11 YahooMailWebService/0.8.103.269680
Date: Mon, 3 May 2010 17:41:53 -0700 (PDT)
From: Ivan Provalov <iprovalo@yahoo.com>
Subject: Re: Relevancy Practices
To: java-user@lucene.apache.org
In-Reply-To: <E6C119F7-C966-4280-94DD-3575BB3CE3F4@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Grant,=0A=0AWe are currently working on a relevancy improvement project.  W=
e took the IBM's paper from 2007 TREC and followed the approaches they desc=
ribed to improve Lucene's relevance.  It also gave us some idea of Lucene=
=E2=80=99s out-of-the-box precision performance (MAP).  In addition to it w=
e used some of the best practices described in TREC's book (Voorhees 2005, =
MIT).  We also looked into the probability scoring model (BM25). =0A=0AWe s=
tarted by comparing =E2=80=9Cvanilla=E2=80=9D Lucene to our Lucene-based pr=
oduct=E2=80=99s performance.  We obtained the collections and the judgments=
 from the past TREC which were close to the genre of the content we store. =
 We then proceeded to study how different tunings affected the scores.  We =
used Lucene's benchmarking module to run against the TREC data.  Even thoug=
h there were a few old TREC document/topic format related issues along the =
way, this benchmarking tool was all together great in helping find the MAP =
and measure where we were at.  =0A=0AThen we applied the Sweet Spot similar=
ity, Pivot Point document length normalization (Lnb/Ltc), and BM25 scoring =
algorithms.  After applying these different scoring mechanism changes and o=
ther techniques (different stemmers, query expansion), we saw some improvem=
ents.  We then compared this to our current production system and started t=
uning it as well.  =0A=0AOur second goal here was to include the relevance =
measurement into the continuous integration tests running nightly.  The tho=
ught here is that if one of the system=E2=80=99s changes inadvertently affe=
cted the scoring, we would find out right away.  This second phase also hel=
ped us discover hidden bugs in our production system. =0A=0AIn addition to =
the English-based analyzers, we also studied Chinese analyzers and compared=
 the results with the English collection runs.  We used TREC data for that.=
=0A=0ASome observations:=0A1.=09Even though the Vector Space model with Boo=
lean query (OR) gives good MAP scores, in some products the large number of=
 returned results makes the product less usable.  So, defaulting to AND ope=
rator may be a better option as was mentioned in this user group post earli=
er.=0A2.=09This TREC-based evaluation is just of many tools to use.  For ex=
ample, user feed-back is still the most important evaluation one can do.=0A=
3.=09We will continue studying how different scoring mechanisms affect rele=
vance quality before making a decision whether to switch from the default V=
SM.  Some of our concerns are over-tuning and performance testing.=0A4.=09L=
ucene user community has been very helpful.  Robert Muir, Joaquin Iglesias,=
 and others helped with applying the scoring algorithms and providing great=
 suggestions. =0A5.=09Some of the tools we use constantly - Lucene=E2=80=99=
s query Explanation and Luke.=0A=0AThanks,=0A=0AIvan Provalov=0A=0A=0A=0A=
=0A--- On Thu, 4/29/10, Grant Ingersoll <gsingers@apache.org> wrote:=0A=0A>=
 From: Grant Ingersoll <gsingers@apache.org>=0A> Subject: Relevancy Practic=
es=0A> To: java-user@lucene.apache.org=0A> Date: Thursday, April 29, 2010, =
10:14 AM=0A> I'm putting on a talk at Lucene=0A> Eurocon (http://lucene-eur=
ocon.org/sessions-track1-day2.html#1)=0A> on "Practical Relevance" and I'm =
curious as to what people=0A> put in practice for testing and improving rel=
evance.=C2=A0 I=0A> have my own inclinations, but I don't want to muddy the=
=0A> water just yet.=C2=A0 So, if you have a few moments, I'd=0A> love to h=
ear responses to the following questions.=0A> =0A> What worked?=C2=A0 =0A> =
What didn't work?=C2=A0 =0A> What didn't you understand about it?=C2=A0 =0A=
> What tools did you use?=C2=A0 =0A> What tools did you wish you had either=
 for debugging=0A> relevance or "fixing" it?=0A> How much time did you spen=
d on it?=0A> How did you avoid over/under tuning?=0A> What stage of develop=
ment/testing/production did you decide=0A> to do relevance tuning?=C2=A0 Wa=
s that timing planned or=0A> not?=0A> =0A> =0A> Thanks,=0A> Grant=0A> =0A=
=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46018-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 04 01:27:36 2010
Return-Path: <java-user-return-46018-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63340 invoked from network); 4 May 2010 01:27:36 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 May 2010 01:27:36 -0000
Received: (qmail 66793 invoked by uid 500); 4 May 2010 01:27:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66604 invoked by uid 500); 4 May 2010 01:27:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66596 invoked by uid 99); 4 May 2010 01:27:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 May 2010 01:27:34 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.83.176] (HELO mail-pv0-f176.google.com) (74.125.83.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 May 2010 01:27:27 +0000
Received: by pvd12 with SMTP id 12so427752pvd.35
        for <java-user@lucene.apache.org>; Mon, 03 May 2010 18:27:05 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.141.106.16 with SMTP id i16mr4055854rvm.220.1272936425613; 
	Mon, 03 May 2010 18:27:05 -0700 (PDT)
Received: by 10.140.169.21 with HTTP; Mon, 3 May 2010 18:27:05 -0700 (PDT)
In-Reply-To: <AANLkTikkHpf6Y20K3qkgx_O9T2xQ9wBE14XvOW-cWYFl@mail.gmail.com>
References: <s2lbb132a4a1005021647nb2d0d2fej92f57d2b4b4d261d@mail.gmail.com>
	 <AANLkTikkHpf6Y20K3qkgx_O9T2xQ9wBE14XvOW-cWYFl@mail.gmail.com>
Date: Tue, 4 May 2010 11:27:05 +1000
Message-ID: <v2ibb132a4a1005031827h5fcab42ep69d5f7365412b7c9@mail.gmail.com>
Subject: Re: Questions about the new query parser framework
From: Daniel Noll <daniel@nuix.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On Mon, May 3, 2010 at 15:11, Adriano Crestani
<adrianocrestani@gmail.com> wrote:
> I actually never liked how QueryNode -> query string is done today, using
> QueryNode.toQueryString(...) method. A QueryNode shouldn't be responsible
> for converting itself back to the string format, because different
> SyntaxParser(s) may create, e.g., an ORQueryNode from a <OR(a, b)> or <a =
OR
> b> syntax, so what should orQueryNode.toQueryString(...) return? So a
> QuerySyntaxFormatter makes sense, now we need to start working on how thi=
s
> interface should look like, so SyntaxParser implementors can start
> implementing equivalent QuerySyntaxFormatter(s).

Essentially I have started doing this for the few queries we are
already building programmatically (full support isn't in there yet for
anything a user might type in though.)

The interface itself is dead simple:

    public interface SyntaxFormatter {
        CharSequence format(QueryNode node, CharSequence field);
    }

Internal to our particular implementation I have a
PartialQueryFormatter<N extends QueryNode> interface which I implement
for each type of query and have been slowly building these up.  Most
of the tricky implementation has been making it spit out an
aesthetically pleasing format, and what is aesthetically pleasing to
people will wildly differ so I'm imagining that any future
StandardSyntaxFormatter which appears in Lucene will have options for
a bunch of things (e.g. do you prefer to group booleans under a single
field or not, do you put spaces inside parentheses, do you use + style
booleans or OR/AND style, ...)

> =C2=A03. I have been parsing a lot of boolean queries, and have noticed
> that there is *always* a GroupQueryNode around any BooleanQueryNode.
> Is this really required, given that BooleanQueryNode is already
> implicitly a grouping type of query?
>
> =C2=A04. If GroupQueryNode is specifically a cue to whether the user
> specified parentheses or not (i.e. if it is supposed to be cosmetic,
> for the purposes of getting back to what the user typed in) then why
> is it that "tag:a tag:b" and "tag:(a b)" both parse to the same node
> structure (making it impossible to figure out which the user actually
> used)?
>
> Yes, it's created when parentheses are defined. The standard query
> processors needs to know where parentheses were typed, so they can enforc=
e
> Lucene operator precedence, which is not that trivial and rely on some
> conditions on whether the user typed or not the parentheses.

I see, so from my perspective where I am manually creating an
OrQueryNode - the node is already a group so I didn't insert any
GroupQueryNode.  And if I understand correctly, not inserting one
isn't actually a problem either (correct formatting code has to
generate the right parentheses whether it came from the user or not.)

> StandardSyntaxParser generate <tag:a tag:b> and <tag:(a b)> different que=
ry
> node trees for these two queries, one with GroupQueryNode and the other
> without. However, after the query node tree is sent through the
> StandardQueryNodeProcessorPipeline, the query node tree is optimized and
> usually GroupQueryNode(s) are removed.

Aha.  That explains why I had to write my own little piece of code to
strip them out again, because my code doesn't go through the rest of
the pipeline.

It doesn't explain why these two queries generate the same node tree, howev=
er:

   tag:a AND (tag:b OR tag:c)

   tag:a AND tag:(b OR c)

For me these both parse with a "group" around the "or" node.  This is
probably fine anyway, as I don't really want to encourage the former
way of formatting it as the latter is more concise.  Actually it could
even be...

   tag:(a AND (b OR c))

But I don't think my formatting logic is quite smart enough for that yet.

Daniel


--=20
Daniel Noll                            Forensic and eDiscovery Software
Senior Developer                              The world's most advanced
Nuix                                                email data analysis
http://nuix.com/                                and eDiscovery software

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46019-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 04 08:54:16 2010
Return-Path: <java-user-return-46019-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46499 invoked from network); 4 May 2010 08:54:16 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 May 2010 08:54:16 -0000
Received: (qmail 48465 invoked by uid 500); 4 May 2010 08:54:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48240 invoked by uid 500); 4 May 2010 08:54:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48228 invoked by uid 99); 4 May 2010 08:54:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 May 2010 08:54:13 +0000
X-ASF-Spam-Status: No, hits=-0.9 required=10.0
	tests=AWL,FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.218.220 as permitted sender)
Received: from [209.85.218.220] (HELO mail-bw0-f220.google.com) (209.85.218.220)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 May 2010 08:54:07 +0000
Received: by bwz20 with SMTP id 20so1757396bwz.12
        for <java-user@lucene.apache.org>; Tue, 04 May 2010 01:53:46 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=VqyCDJrWY4ycj6g2wvesYlJmpk1O8EEvx76zv3sg0so=;
        b=BkP+zhNRJlMERpnBN+z8w7+h0bxhACni2s1rK7D4mMFBxvQcD8AORr668x2+zmRMql
         kSkujVGUr+kE7VSQvAUcpX4ZKzCEurmt4dZYychche7Aqlnk8cxBLNR6VWInIi9Dq8+g
         xOUOYYmFnlq9CnudkHARsBwm6fK/+OXWICV+Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=jiBGWz3dIJYdvspNasQ6dr+3BL6gvJiCMY10uYzb4pFviAl2JjnlZ/9sz8FBEdgHfR
         9/OYWywjwwdPn6SIQOvcjJ3VkJmD4oeh8kGlEJhXNLCnJQKOTRVKTyUVxqbWamotH2IJ
         Xz4wiMg5GFe1o3lHRvx96ifCij79wDFbWua+U=
Received: by 10.204.30.208 with SMTP id v16mr5395305bkc.187.1272963224376; 
	Tue, 04 May 2010 01:53:44 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.54.198 with HTTP; Tue, 4 May 2010 01:53:24 -0700 (PDT)
In-Reply-To: <m2pca64e7161005031220m66578428i6760427c5875f61c@mail.gmail.com>
References: <s2uca64e7161005031152gfd75fa3cha003686d515ca9cc@mail.gmail.com> 
	<m2pca64e7161005031220m66578428i6760427c5875f61c@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Tue, 4 May 2010 09:53:24 +0100
Message-ID: <o2t8c4e68611005040153i2990d28ew4c6a4b01f4a8c071@mail.gmail.com>
Subject: Re: Wich way would you recommend for successive-words similarity and 
	scoring ?
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hi


Take a look at PhraseQuery or SpanNearQuery, particularly the
setSlop() methods and the inOrder flag on the latter.
http://www.lucidimagination.com/blog/2009/07/18/the-spanquery/ is well
worth reading.


--
Ian.


On Mon, May 3, 2010 at 8:20 PM, Pablo <pablo.queixalos@gmail.com> wrote:
> Hello,
>
> Lucene core doesn't seems to use relative word positioning (?) for scorin=
g.
>
> For example, indexing that phrase "a b c d e f g h i j k l m n o p q r
> s t u v w x y z", these queries give the same results (0.19308087) :
> =A0- 1 : phrase:'e f g'
> =A0- 2 : phrase:'o k z'
>
> I'm a bit familiar with lucene and snowballs, but I never (really)
> needed this feature before, and didn't browse the lucene contribs.
>
> Maybe I'm misunderstanding something, but, what can I do to obtain
> query 1 get a better score than the second ?
>
> Should I implement a Scorer and or a Similarity, or can an analyser
> and a specific stemmer be sufficient?
>
>
> Thanks, [I first wrote to dev, wasn't the right place.]
>
> Pablo
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46020-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 04 09:14:41 2010
Return-Path: <java-user-return-46020-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50979 invoked from network); 4 May 2010 09:14:41 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 May 2010 09:14:41 -0000
Received: (qmail 74703 invoked by uid 500); 4 May 2010 09:14:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74450 invoked by uid 500); 4 May 2010 09:14:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74441 invoked by uid 99); 4 May 2010 09:14:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 May 2010 09:14:38 +0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=AWL,FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vijay.raghavan08@gmail.com designates 209.85.223.189 as permitted sender)
Received: from [209.85.223.189] (HELO mail-iw0-f189.google.com) (209.85.223.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 May 2010 09:14:32 +0000
Received: by iwn27 with SMTP id 27so4397413iwn.5
        for <java-user@lucene.apache.org>; Tue, 04 May 2010 02:14:11 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=kbSMuSv3WQvohYYVM7wDP6epuWQP1SdW62FBxFNyFrY=;
        b=cPYnkZYn+fKX48O//G0jMKPl6aqLeKXroVlx7ZcR3plJJBMndc/Tgrwzky3I4TK7Z7
         oziq7CYm4dyx2vqm0dBcKNJlts4XAoAHxag8wVtG6sNm2XYfaQa+rNq3l4WAB998ePSK
         SE8n1CJb47dcjnB2QKY+tKF7mXUZCBtPsOL9I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=hLOny16PIgUN665srNdpOw5SS+x7Yyaz6zIMSP29gi3swcPCa17z4ru6Kd7r8xVieD
         T79bzgOsJf3oZFAWU2xmPWizkh3B6AxlXzpiwZ3I758gsvE4I9CXZp/ua8YDp3x3hbkU
         LvUVgoHJrCCP1IA/nZCwa0OJuAuIhDRmBgics=
MIME-Version: 1.0
Received: by 10.231.153.130 with SMTP id k2mr212566ibw.78.1272964420558; Tue, 
	04 May 2010 02:13:40 -0700 (PDT)
Received: by 10.231.184.18 with HTTP; Tue, 4 May 2010 02:13:40 -0700 (PDT)
In-Reply-To: <q2gbd236a1005030321gd9f4506fy7b5136a05afb9263@mail.gmail.com>
References: <q2gbd236a1005030321gd9f4506fy7b5136a05afb9263@mail.gmail.com>
Date: Tue, 4 May 2010 14:43:40 +0530
Message-ID: <p2mbd236a1005040213k7e5a4035w387c2ad906d54129@mail.gmail.com>
Subject: Re: Using IndexReader in the web environment
From: Vijay Veeraraghavan <vijay.raghavan08@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: quoted-printable

Hi,
Thanks for the reply. So I will have a dedicated servlet to search the
index, but does it mean that the indexsearcher does not close the
index, keep it open? Is it not possible to keep it in the application
scope?

Vijay

On 5/3/10, Vijay Veeraraghavan <vijay.raghavan08@gmail.com> wrote:
> Hi all,
>
> In a clustered environment I search the index from the web
> application. In the web application I am creating IndexReader on each
> request. is it expensive to do like this? I read somewhere in the web
> that try using the same reader as much as possible. Can i keep the
> initially created IndexReader in the session/application scopes and
> use the same for each request? Any other idea?
>
> Viay
>
> On 5/3/10, Vijay Veeraraghavan <vijay.raghavan08@gmail.com> wrote:
>> dear all,
>>
>> as replied below, does searching again for the document in the index
>> and if found skip the indexing else index it, is this not similar to
>> indexing all pdf documents once again, is not this overhead? As I am
>> not going to index the details of the pdf (so if an indexed pdf was
>> recreated i need not reindex it) but just the paths of the documents.
>>
>> Vijay
>>
>>>> Hey there,
>>>>
>>>> you might have to implement a some kind of unique identifier using an
>>>> indexed lucene field. When you are indexing you should fire a query
>>>> with
>>>> the
>>>> uuid of your document (maybe the path to you pdf document) and check i=
f
>>>> the
>>>> document is in the index already. You could also do a boolean query
>>>> combining UUID, timestamp and / or a hash value to see if the document
>>>> has
>>>> been changed. if so you can simply update the document by its UUID
>>>> (something like indexwriter.updateDocument(new Term("uuid",
>>>> value),document);)
>>>>
>>>> Unfortunately you have to implement this yourself but it should not be
>>>> that
>>>> much of a deal.
>>>>
>>>> simon
>>>>
>>>> On Mon, May 3, 2010 at 9:21 AM, Vijay Veeraraghavan <
>>>> vijay.raghavan08@gmail.com> wrote:
>>>>
>>>>> Dear all,
>>>>> I am using lucene 3.0 to index the pdf reports that I generate
>>>>> dynamically. I index the pdf file name (without extension), file path
>>>>> and its absolute path as fields. I search with the file name without
>>>>> extension; it retrieves a list, as usually 2 or more files are presen=
t
>>>>> in the same name in different sub directories. As I create the index
>>>>> for the first time it updates, assuming 100 pdf files in different
>>>>> directories, the files meta info. If again I do indexing, while my
>>>>> report generator scheduler has the produced 500 more pdf files
>>>>> totaling to 600 files in different directories, I wish to index only
>>>>> the new files to the index. But presently it=92s doing the whole thin=
g
>>>>> again (600 files). How to implement this functionality? Think of the
>>>>> thousands of pdf files created on each run.
>>>>>
>>>>> P.S: I cannot keep the meta-info of generated pdf files in the java
>>>>> memory, as it exceeds thousands in a single run, and update the index
>>>>> looping this list.
>>>>>
>>>>> new IndexWriter(FSDirectory.open(this.indexDir), new StandardAnalyzer=
(
>>>>>                                        Version.LUCENE_CURRENT), true,
>>>>>
>>>>> IndexWriter.MaxFieldLength.LIMITED);
>>>>>
>>>>> is the boolean parameter is for this purpose? Please guide me.
>>>>>
>>>>> --
>>>>> Thanks
>>>>> Vijay Veeraraghavan
>>>>>
>>>>>
>>>>>
>>>>> --
>>>>> Thanks & Regards
>>>>> Vijay Veeraraghavan
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>
>>>
>>>
>>> --
>>> Thanks & Regards
>>> Vijay Veeraraghavan
>>>
>>
>>
>> --
>> Thanks & Regards
>> Vijay Veeraraghavan
>>
>
>
> --
> Thanks & Regards
> Vijay Veeraraghavan
>


--=20
Thanks & Regards
Vijay Veeraraghavan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46021-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 04 12:46:39 2010
Return-Path: <java-user-return-46021-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2124 invoked from network); 4 May 2010 12:46:39 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 May 2010 12:46:39 -0000
Received: (qmail 84731 invoked by uid 500); 4 May 2010 12:46:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84677 invoked by uid 500); 4 May 2010 12:46:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84669 invoked by uid 99); 4 May 2010 12:46:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 May 2010 12:46:36 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of licinio.fernandez@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 May 2010 12:46:28 +0000
Received: by wya21 with SMTP id 21so506092wya.35
        for <java-user@lucene.apache.org>; Tue, 04 May 2010 05:46:08 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=mNi7f718ekkU0u8MnAE4mdLQ0E26wrWIIo9EQAa18L8=;
        b=JKFSCU4C5NCyfkbOIedP2ear+dPt0jJuDZW11vuk7f6WzRTeHaEYpsJeYuTWqE9LoR
         1/c7UUMYmq+re6LhPyxUnNHld9nFDgYdZJFX1XnE7lvI/pEoo72TvN6wHOSsJCjR6GT6
         Hl52KLX7gxV+zv35DXQULfkMCIl5D6gwC8RfU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=whzIqxDWuXZx3VzeIVzktfiTH4mklbvxERTGC9wfGv6PL335mDgd0aHfGdtxX0GFaR
         BDBKl+Ya4Ha9p74CUPvnQiavta9tKjg3agN6rnXCTMvfPS76DXek8xFgbuQneWqx0VDe
         nz/d/wd4gk8bVBIJelAgeIB9/uSjNOFSeo6UY=
MIME-Version: 1.0
Received: by 10.227.133.137 with SMTP id f9mr1253118wbt.215.1272977167378; 
	Tue, 04 May 2010 05:46:07 -0700 (PDT)
Received: by 10.216.155.213 with HTTP; Tue, 4 May 2010 05:46:07 -0700 (PDT)
Date: Tue, 4 May 2010 14:46:07 +0200
Message-ID: <q2he2e3ce451005040546le70015b3mceb65f26dbb766b6@mail.gmail.com>
Subject: Retrieving indexed field data
From: =?ISO-8859-1?Q?Licinio_Fern=E1ndez_Maurelo?= <licinio.fernandez@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485f7c16ede684c0485c4171b
X-Virus-Checked: Checked by ClamAV on apache.org

--001485f7c16ede684c0485c4171b
Content-Type: text/plain; charset=ISO-8859-1

Hi all,
notice that i come from the solr-user mail list to get an answer ...

We need to retrieve the indexed data for a field *indexed but not
stored*(yes, i know this could sounds strange but we just want
retrieve the chunk
of bytes indexed related).

Is there any way to do this (avoiding reindexing original data or copyng
index files)

Thanks in advance

-- 
Lici
~Java Developer~

--001485f7c16ede684c0485c4171b--

From java-user-return-46022-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 04 13:32:40 2010
Return-Path: <java-user-return-46022-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15842 invoked from network); 4 May 2010 13:32:39 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 May 2010 13:32:39 -0000
Received: (qmail 69909 invoked by uid 500); 4 May 2010 13:32:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69874 invoked by uid 500); 4 May 2010 13:32:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69866 invoked by uid 99); 4 May 2010 13:32:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 May 2010 13:32:37 +0000
X-ASF-Spam-Status: No, hits=-0.9 required=10.0
	tests=AWL,FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.218.220 as permitted sender)
Received: from [209.85.218.220] (HELO mail-bw0-f220.google.com) (209.85.218.220)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 May 2010 13:32:31 +0000
Received: by bwz20 with SMTP id 20so1920920bwz.12
        for <java-user@lucene.apache.org>; Tue, 04 May 2010 06:32:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=AXTk2YNKJ9xube0ZM+KkmRouY/8QiPPdYzAZGCZ8W2s=;
        b=V0zD+XNmHz2bl6TO+q7Zq7PUOA8j/logTKE8Henbhxu8TOwNgOT7I/qo8n+Lj8trAD
         AQ+xE6K6JiwZ5+5timhKf4gQzphfAOZAI8ASejGAvSFFijQ6SicItltPVkwKr0hZ4ybQ
         FHdMUoUOiapv7FCOVA3m5i7z/NRXmrfB7y6Vc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=krRTwqmklODKkSlYjRRLeglOni0v6gxLMe3PBdYbPToEnf/qhT708ns4VgnA/QPA7B
         cm6R6o79YeUpuQYhXjp1Q3SrQuo2O9o0yUzkJuzpRsXmRVuC8vvPwVudc6isSsmNV3JD
         fLAfGQx9wXHqYC69H5cKTQyChPcvbexyZwu6c=
Received: by 10.204.142.207 with SMTP id r15mr6240213bku.134.1272979929634; 
	Tue, 04 May 2010 06:32:09 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.54.198 with HTTP; Tue, 4 May 2010 06:31:49 -0700 (PDT)
In-Reply-To: <p2mbd236a1005040213k7e5a4035w387c2ad906d54129@mail.gmail.com>
References: <q2gbd236a1005030321gd9f4506fy7b5136a05afb9263@mail.gmail.com> 
	<p2mbd236a1005040213k7e5a4035w387c2ad906d54129@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Tue, 4 May 2010 14:31:49 +0100
Message-ID: <m2m8c4e68611005040631qbd7d0693v2787f50bc915d0c3@mail.gmail.com>
Subject: Re: Using IndexReader in the web environment
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: quoted-printable

For best performance you should aim to keep a shared index searcher,
or the underlying index reader, open as long as possible.  You may of
course need to reopen it if/when the index changes.  As to scope, you
can store it wherever it makes sense for your application.


--
Ian.


On Tue, May 4, 2010 at 10:13 AM, Vijay Veeraraghavan
<vijay.raghavan08@gmail.com> wrote:
> Hi,
> Thanks for the reply. So I will have a dedicated servlet to search the
> index, but does it mean that the indexsearcher does not close the
> index, keep it open? Is it not possible to keep it in the application
> scope?
>
> Vijay
>
> On 5/3/10, Vijay Veeraraghavan <vijay.raghavan08@gmail.com> wrote:
>> Hi all,
>>
>> In a clustered environment I search the index from the web
>> application. In the web application I am creating IndexReader on each
>> request. is it expensive to do like this? I read somewhere in the web
>> that try using the same reader as much as possible. Can i keep the
>> initially created IndexReader in the session/application scopes and
>> use the same for each request? Any other idea?
>>
>> Viay
>>
>> On 5/3/10, Vijay Veeraraghavan <vijay.raghavan08@gmail.com> wrote:
>>> dear all,
>>>
>>> as replied below, does searching again for the document in the index
>>> and if found skip the indexing else index it, is this not similar to
>>> indexing all pdf documents once again, is not this overhead? As I am
>>> not going to index the details of the pdf (so if an indexed pdf was
>>> recreated i need not reindex it) but just the paths of the documents.
>>>
>>> Vijay
>>>
>>>>> Hey there,
>>>>>
>>>>> you might have to implement a some kind of unique identifier using an
>>>>> indexed lucene field. When you are indexing you should fire a query
>>>>> with
>>>>> the
>>>>> uuid of your document (maybe the path to you pdf document) and check =
if
>>>>> the
>>>>> document is in the index already. You could also do a boolean query
>>>>> combining UUID, timestamp and / or a hash value to see if the documen=
t
>>>>> has
>>>>> been changed. if so you can simply update the document by its UUID
>>>>> (something like indexwriter.updateDocument(new Term("uuid",
>>>>> value),document);)
>>>>>
>>>>> Unfortunately you have to implement this yourself but it should not b=
e
>>>>> that
>>>>> much of a deal.
>>>>>
>>>>> simon
>>>>>
>>>>> On Mon, May 3, 2010 at 9:21 AM, Vijay Veeraraghavan <
>>>>> vijay.raghavan08@gmail.com> wrote:
>>>>>
>>>>>> Dear all,
>>>>>> I am using lucene 3.0 to index the pdf reports that I generate
>>>>>> dynamically. I index the pdf file name (without extension), file pat=
h
>>>>>> and its absolute path as fields. I search with the file name without
>>>>>> extension; it retrieves a list, as usually 2 or more files are prese=
nt
>>>>>> in the same name in different sub directories. As I create the index
>>>>>> for the first time it updates, assuming 100 pdf files in different
>>>>>> directories, the files meta info. If again I do indexing, while my
>>>>>> report generator scheduler has the produced 500 more pdf files
>>>>>> totaling to 600 files in different directories, I wish to index only
>>>>>> the new files to the index. But presently it=92s doing the whole thi=
ng
>>>>>> again (600 files). How to implement this functionality? Think of the
>>>>>> thousands of pdf files created on each run.
>>>>>>
>>>>>> P.S: I cannot keep the meta-info of generated pdf files in the java
>>>>>> memory, as it exceeds thousands in a single run, and update the inde=
x
>>>>>> looping this list.
>>>>>>
>>>>>> new IndexWriter(FSDirectory.open(this.indexDir), new StandardAnalyze=
r(
>>>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0Version.LUCENE_CURRENT), true,
>>>>>>
>>>>>> IndexWriter.MaxFieldLength.LIMITED);
>>>>>>
>>>>>> is the boolean parameter is for this purpose? Please guide me.
>>>>>>
>>>>>> --
>>>>>> Thanks
>>>>>> Vijay Veeraraghavan
>>>>>>
>>>>>>
>>>>>>
>>>>>> --
>>>>>> Thanks & Regards
>>>>>> Vijay Veeraraghavan
>>>>>>
>>>>>> --------------------------------------------------------------------=
-
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>
>>>>
>>>>
>>>> --
>>>> Thanks & Regards
>>>> Vijay Veeraraghavan
>>>>
>>>
>>>
>>> --
>>> Thanks & Regards
>>> Vijay Veeraraghavan
>>>
>>
>>
>> --
>> Thanks & Regards
>> Vijay Veeraraghavan
>>
>
>
> --
> Thanks & Regards
> Vijay Veeraraghavan
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46023-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 04 16:42:25 2010
Return-Path: <java-user-return-46023-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62525 invoked from network); 4 May 2010 16:42:24 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 May 2010 16:42:24 -0000
Received: (qmail 75440 invoked by uid 500); 4 May 2010 16:42:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75305 invoked by uid 500); 4 May 2010 16:42:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75297 invoked by uid 99); 4 May 2010 16:42:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 May 2010 16:42:22 +0000
X-ASF-Spam-Status: No, hits=-0.9 required=10.0
	tests=AWL,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [134.96.191.147] (HELO smtp.dfki.de) (134.96.191.147)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 May 2010 16:42:14 +0000
Received: from smtp.dfki.de (localhost [127.0.0.1])
	by imss.7 (Postfix) with ESMTP id 4EC4B31242
	for <java-user@lucene.apache.org>; Tue,  4 May 2010 18:41:49 +0200 (CEST)
Received: from mail.dfki.de (lnv-104.sb.dfki.de [134.96.191.146])
	by smtp.dfki.de (Postfix) with ESMTP id 3D3BA3123C
	for <java-user@lucene.apache.org>; Tue,  4 May 2010 18:41:49 +0200 (CEST)
Received: from [IPv6:::1] (dave.dfki.uni-sb.de [134.96.184.220])
	by mail.dfki.de (Postfix) with ESMTP id 216DD310B4
	for <java-user@lucene.apache.org>; Tue,  4 May 2010 18:41:49 +0200 (CEST)
Message-Id: <5DAF9761-A551-49A1-B65B-F25296E7CAC4@activemath.org>
From: Paul Libbrecht <paul@activemath.org>
To: java-user@lucene.apache.org
In-Reply-To: <q2he2e3ce451005040546le70015b3mceb65f26dbb766b6@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v936)
Subject: Re: Retrieving indexed field data
Date: Tue, 4 May 2010 18:41:46 +0200
References: <q2he2e3ce451005040546le70015b3mceb65f26dbb766b6@mail.gmail.com>
X-Mailer: Apple Mail (2.936)

No way but re-index, that was easy in my case.

paul


Le 04-mai-10 =E0 14:46, Licinio Fern=E1ndez Maurelo a =E9crit :

> Hi all,
> notice that i come from the solr-user mail list to get an answer ...
>
> We need to retrieve the indexed data for a field *indexed but not
> stored*(yes, i know this could sounds strange but we just want
> retrieve the chunk
> of bytes indexed related).
>
> Is there any way to do this (avoiding reindexing original data or =20
> copyng
> index files)
>
> Thanks in advance
>
> --=20
> Lici
> ~Java Developer~


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46024-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 05 04:18:22 2010
Return-Path: <java-user-return-46024-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8423 invoked from network); 5 May 2010 04:18:21 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 May 2010 04:18:21 -0000
Received: (qmail 87297 invoked by uid 500); 5 May 2010 04:18:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86938 invoked by uid 500); 5 May 2010 04:18:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86925 invoked by uid 99); 5 May 2010 04:18:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 May 2010 04:18:15 +0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=AWL,FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vijay.raghavan08@gmail.com designates 209.85.223.173 as permitted sender)
Received: from [209.85.223.173] (HELO mail-iw0-f173.google.com) (209.85.223.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 May 2010 04:18:09 +0000
Received: by iwn3 with SMTP id 3so6221305iwn.3
        for <java-user@lucene.apache.org>; Tue, 04 May 2010 21:17:49 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=bJKJDGOQQjVZypSElFeYJOs60A+Y7v0nRjLLDCHPArg=;
        b=rFR7n9xKwuqcqgNA9c5SsbVfIe6H3517fynzpQoG0FKDm1XBC8x6TLtCT8kFv4ceFz
         +n3DkyOc8cD9jlkwWahLNBgSGAlrOv+dteTJgTc8xQpTgZnMBN2m+3elMKfV1vj+nX+x
         IvWRvZ1esQcbhmHZjODvZqLU2YaoM/4NsazSk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=cSQ8AChJdeSlsPW9vO2SQyo87tEvV3h5Nvv0IBj1/W3UlJ3ThXpHEhuh2vFHJFUPyT
         cMH4cROLjk5aUKnJS0cBcyEgqG203uOCOdHq4Q7MdMSc1py/lncfdKnDUJeVhMd5fo0k
         JFE1fYPTg6sJB4+m3kVMC2GYfOJ61/BzVRpMc=
MIME-Version: 1.0
Received: by 10.231.156.80 with SMTP id v16mr873256ibw.99.1273033068872; Tue, 
	04 May 2010 21:17:48 -0700 (PDT)
Received: by 10.231.184.18 with HTTP; Tue, 4 May 2010 21:17:48 -0700 (PDT)
In-Reply-To: <m2m8c4e68611005040631qbd7d0693v2787f50bc915d0c3@mail.gmail.com>
References: <q2gbd236a1005030321gd9f4506fy7b5136a05afb9263@mail.gmail.com>
	 <p2mbd236a1005040213k7e5a4035w387c2ad906d54129@mail.gmail.com>
	 <m2m8c4e68611005040631qbd7d0693v2787f50bc915d0c3@mail.gmail.com>
Date: Wed, 5 May 2010 09:47:48 +0530
Message-ID: <s2ubd236a1005042117wd8e12f41i18e0fda2aa6604cd@mail.gmail.com>
Subject: Re: Using IndexReader in the web environment
From: Vijay Veeraraghavan <vijay.raghavan08@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: quoted-printable

hey Ian,
thanks for the reply. I find it very useful. My report generating
scheduler will run periodically, once done it will invoke the indexer
and exit. In this case I do not know if the index has changed or not.
How do i keep track of the changes in the index? As the two entities,
scheduler/indexer and the web application, are totally different.

Vijay

On 5/4/10, Ian Lea <ian.lea@gmail.com> wrote:
> For best performance you should aim to keep a shared index searcher,
> or the underlying index reader, open as long as possible.  You may of
> course need to reopen it if/when the index changes.  As to scope, you
> can store it wherever it makes sense for your application.
>
>
> --
> Ian.
>
>
> On Tue, May 4, 2010 at 10:13 AM, Vijay Veeraraghavan
> <vijay.raghavan08@gmail.com> wrote:
>> Hi,
>> Thanks for the reply. So I will have a dedicated servlet to search the
>> index, but does it mean that the indexsearcher does not close the
>> index, keep it open? Is it not possible to keep it in the application
>> scope?
>>
>> Vijay
>>
>> On 5/3/10, Vijay Veeraraghavan <vijay.raghavan08@gmail.com> wrote:
>>> Hi all,
>>>
>>> In a clustered environment I search the index from the web
>>> application. In the web application I am creating IndexReader on each
>>> request. is it expensive to do like this? I read somewhere in the web
>>> that try using the same reader as much as possible. Can i keep the
>>> initially created IndexReader in the session/application scopes and
>>> use the same for each request? Any other idea?
>>>
>>> Viay
>>>
>>> On 5/3/10, Vijay Veeraraghavan <vijay.raghavan08@gmail.com> wrote:
>>>> dear all,
>>>>
>>>> as replied below, does searching again for the document in the index
>>>> and if found skip the indexing else index it, is this not similar to
>>>> indexing all pdf documents once again, is not this overhead? As I am
>>>> not going to index the details of the pdf (so if an indexed pdf was
>>>> recreated i need not reindex it) but just the paths of the documents.
>>>>
>>>> Vijay
>>>>
>>>>>> Hey there,
>>>>>>
>>>>>> you might have to implement a some kind of unique identifier using a=
n
>>>>>> indexed lucene field. When you are indexing you should fire a query
>>>>>> with
>>>>>> the
>>>>>> uuid of your document (maybe the path to you pdf document) and check
>>>>>> if
>>>>>> the
>>>>>> document is in the index already. You could also do a boolean query
>>>>>> combining UUID, timestamp and / or a hash value to see if the docume=
nt
>>>>>> has
>>>>>> been changed. if so you can simply update the document by its UUID
>>>>>> (something like indexwriter.updateDocument(new Term("uuid",
>>>>>> value),document);)
>>>>>>
>>>>>> Unfortunately you have to implement this yourself but it should not =
be
>>>>>> that
>>>>>> much of a deal.
>>>>>>
>>>>>> simon
>>>>>>
>>>>>> On Mon, May 3, 2010 at 9:21 AM, Vijay Veeraraghavan <
>>>>>> vijay.raghavan08@gmail.com> wrote:
>>>>>>
>>>>>>> Dear all,
>>>>>>> I am using lucene 3.0 to index the pdf reports that I generate
>>>>>>> dynamically. I index the pdf file name (without extension), file pa=
th
>>>>>>> and its absolute path as fields. I search with the file name withou=
t
>>>>>>> extension; it retrieves a list, as usually 2 or more files are
>>>>>>> present
>>>>>>> in the same name in different sub directories. As I create the inde=
x
>>>>>>> for the first time it updates, assuming 100 pdf files in different
>>>>>>> directories, the files meta info. If again I do indexing, while my
>>>>>>> report generator scheduler has the produced 500 more pdf files
>>>>>>> totaling to 600 files in different directories, I wish to index onl=
y
>>>>>>> the new files to the index. But presently it=92s doing the whole th=
ing
>>>>>>> again (600 files). How to implement this functionality? Think of th=
e
>>>>>>> thousands of pdf files created on each run.
>>>>>>>
>>>>>>> P.S: I cannot keep the meta-info of generated pdf files in the java
>>>>>>> memory, as it exceeds thousands in a single run, and update the ind=
ex
>>>>>>> looping this list.
>>>>>>>
>>>>>>> new IndexWriter(FSDirectory.open(this.indexDir), new
>>>>>>> StandardAnalyzer(
>>>>>>>                                        Version.LUCENE_CURRENT), tru=
e,
>>>>>>>
>>>>>>> IndexWriter.MaxFieldLength.LIMITED);
>>>>>>>
>>>>>>> is the boolean parameter is for this purpose? Please guide me.
>>>>>>>
>>>>>>> --
>>>>>>> Thanks
>>>>>>> Vijay Veeraraghavan
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> --
>>>>>>> Thanks & Regards
>>>>>>> Vijay Veeraraghavan
>>>>>>>
>>>>>>> -------------------------------------------------------------------=
--
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>
>>>>>>>
>>>>>>
>>>>>
>>>>>
>>>>> --
>>>>> Thanks & Regards
>>>>> Vijay Veeraraghavan
>>>>>
>>>>
>>>>
>>>> --
>>>> Thanks & Regards
>>>> Vijay Veeraraghavan
>>>>
>>>
>>>
>>> --
>>> Thanks & Regards
>>> Vijay Veeraraghavan
>>>
>>
>>
>> --
>> Thanks & Regards
>> Vijay Veeraraghavan
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
Thanks & Regards
Vijay Veeraraghavan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46025-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 05 06:24:16 2010
Return-Path: <java-user-return-46025-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37280 invoked from network); 5 May 2010 06:24:16 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 May 2010 06:24:16 -0000
Received: (qmail 8769 invoked by uid 500); 5 May 2010 06:24:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8549 invoked by uid 500); 5 May 2010 06:24:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8541 invoked by uid 99); 5 May 2010 06:24:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 May 2010 06:24:10 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=MIME_BASE64_BLANKS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of zhitian.zhang@dianping.com designates 114.80.162.48 as permitted sender)
Received: from [114.80.162.48] (HELO mail.dianping.com) (114.80.162.48)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 05 May 2010 06:24:02 +0000
Received: from techzhangzht ([61.152.173.114])
	(envelope-sender <zhitian.zhang@dianping.com>)
	by 114.80.162.48 with ESMTP
	for <java-user@lucene.apache.org>; Wed, 05 May 2010 14:23:38 +0800
Message-ID: <FCDE1AE6109442EEA67D8E959B71A05C@techzhangzht>
From: =?gb2312?B?1cXWvszv?= <zhitian.zhang@dianping.com>
To: <java-user@lucene.apache.org>
Subject: How can I merge .cfx and .cfs into a single cfs file?
Date: Wed, 5 May 2010 14:24:09 +0800
MIME-Version: 1.0
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: base64
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.3790.4548
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4325

SGkgYWxsLA0KDQpJIGhhdmUgYW4gaW5kZXggdGFzayB3aGljaCB3aWxsIGluZGV4IHRob3VzYW5k
cyBvZiByZWNvcmRzIHdpdGggbHVjZW5lIDMuMC4xLiBNeSBjb25mdXNpb24gaXMgbHVjZW5lIHdp
bGwgYWx3YXlzIGNyZWF0ZSBhIC5jZnggYW5kIGEgLmNmcyBmaWxlIGluIHRoZSBmaWxlIHN5c3Rl
bSwgc29tZXRpbWVzIG1vcmUsIHdoaWxlIEkgdGhvdWdodCBpdCBzaG91bGQgY3JlYXRlIGEgc2lu
Z2xlIC5jZnMgZmlsZSBpZiBJIG9wdGltaXplIHRoZSBpbmRleCBkYXRhLiBJcyBpdCBieSBkZXNp
Z24/IElmIHllcywgaXMgdGhlcmUgYW55IHdheS9jb25maWd1cmF0aW9uIEkgY2FuIGRvIHRvIG1l
cmdlIGFsbCBvZiB0aGUgaW5kZXggZmlsZXMgaW50byBhIHNpbmdlIG9uZT8NCg0KQnkgdGhlIHdh
eSwgSSBoYXZlIGEgbG9naWMgdG8gdmFsaWRhdGUgdGhlIGluZGV4IGRhdGEsIGlmIHRoZSBzaXpl
IG9mIC5jZnMgaW5jcmVhc2VzIGRyYW1hdGljYWxseSBjb21wYXJpbmcgdG8gdGhlIGZpbGUgZ2Vu
ZXJhdGVkIGxhc3QgdGltZSwgdGhlcmUgbWF5IGJlIHNvbWV0aGluZyB3cm9uZywgYSB3YXJuaW5n
IG1lc3NhZ2Ugd2lsbCBiZSB0aHJldy4gVGhpcyBpcyB0aGUgcmVhc29uIHRoYXQgSSB3YW50IHRv
IGdlbmVyYXRlIGEgc2luZ2xlIC5jZnMgZmlsZS4gQW55IG90aGVyIHN1Z2dlc3Rpb24gYWJvdXQg
dGhlIGluZGV4IHZhbGlkYXRpb24/DQoNCkFueSBib2R5IGNhbiBnaXZlIG1lIGEgaGFuZD8NCg0K
VGhhbmtzIGluIGFkdmFuY2UuDQoNCkdhcnJ5



From java-user-return-46026-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 05 07:57:56 2010
Return-Path: <java-user-return-46026-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54296 invoked from network); 5 May 2010 07:57:56 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 May 2010 07:57:56 -0000
Received: (qmail 95490 invoked by uid 500); 5 May 2010 07:57:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95265 invoked by uid 500); 5 May 2010 07:57:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95231 invoked by uid 99); 5 May 2010 07:57:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 May 2010 07:57:53 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [217.237.170.35] (HELO mail.healy-hudson.com) (217.237.170.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 May 2010 07:57:46 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
x-cr-hashedpuzzle: AEGY BNT+ B0Ut B3Zs DXJK DboK DfY3 Du0Y EUof EhU+ HD6H HvW3 H33A JJTP JkUa KOpz;1;agBhAHYAYQAtAHUAcwBlAHIAQABsAHUAYwBlAG4AZQAuAGEAcABhAGMAaABlAC4AbwByAGcA;Sosha1_v1;7;{8E59D4B2-44DE-48AB-AF47-5BA1A740F3CC};dQB3AGUALgBnAG8AZQB0AHoAawBlAEAAaABlAGEAbAB5AC0AaAB1AGQAcwBvAG4ALgBjAG8AbQA=;Wed, 05 May 2010 07:57:17 GMT;QQBXADoAIABIAG8AdwAgAGMAYQBuACAASQAgAG0AZQByAGcAZQAgAC4AYwBmAHgAIABhAG4AZAAgAC4AYwBmAHMAIABpAG4AdABvACAAYQAgAHMAaQBuAGcAbABlACAAYwBmAHMAIABmAGkAbABlAD8A
MIME-Version: 1.0
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: quoted-printable
Content-class: urn:content-classes:message
Subject: AW: How can I merge .cfx and .cfs into a single cfs file?
Date: Wed, 5 May 2010 09:57:17 +0200
Message-ID: <D7206503EB5BE94497458AF4FE4AE8AB01B9AFB8@owamz.healy-hudson.com>
In-Reply-To: <FCDE1AE6109442EEA67D8E959B71A05C@techzhangzht>
X-MS-Has-Attach: 
x-cr-puzzleid: {8E59D4B2-44DE-48AB-AF47-5BA1A740F3CC}
X-MS-TNEF-Correlator: 
Thread-Topic: How can I merge .cfx and .cfs into a single cfs file?
Thread-Index: AcrsG5Zrl81JB/H/Q92W1DYbNOSxSQAC6v2w
References: <FCDE1AE6109442EEA67D8E959B71A05C@techzhangzht>
From: "Uwe Goetzke" <uwe.goetzke@healy-hudson.com>
To: <java-user@lucene.apache.org>

Index all into a directory and determine the size of all files in it.

>From http://lucene.apache.org/java/3_0_1/fileformats.html=20
Starting with Lucene 2.3, doc store files (stored field values and term =
vectors) can be shared in a single set of files for more than one =
segment. When compound file is enabled, these shared files will be added =
into a single compound file (same format as above) but with the =
extension .cfx.

In addition to
Compound File  	.cfs  	An optional "virtual" file consisting of all the =
other index files for systems that frequently run out of file handles.

Uwe


-----Urspr=A8=B9ngliche Nachricht-----
Von: =D5=C5=D6=BE=CC=EF [mailto:zhitian.zhang@dianping.com]=20
Gesendet: Mittwoch, 5. Mai 2010 08:24
An: java-user@lucene.apache.org
Betreff: How can I merge .cfx and .cfs into a single cfs file?

Hi all,

I have an index task which will index thousands of records with lucene =
3.0.1. My confusion is lucene will always create a .cfx and a .cfs file =
in the file system, sometimes more, while I thought it should create a =
single .cfs file if I optimize the index data. Is it by design? If yes, =
is there any way/configuration I can do to merge all of the index files =
into a singe one?

By the way, I have a logic to validate the index data, if the size of =
.cfs increases dramatically comparing to the file generated last time, =
there may be something wrong, a warning message will be threw. This is =
the reason that I want to generate a single .cfs file. Any other =
suggestion about the index validation?

Any body can give me a hand?

Thanks in advance.

Garry

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46027-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 05 08:18:33 2010
Return-Path: <java-user-return-46027-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58437 invoked from network); 5 May 2010 08:18:33 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 May 2010 08:18:33 -0000
Received: (qmail 17134 invoked by uid 500); 5 May 2010 08:18:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16860 invoked by uid 500); 5 May 2010 08:18:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16852 invoked by uid 99); 5 May 2010 08:18:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 May 2010 08:18:30 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=MIME_BASE64_BLANKS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of zhitian.zhang@dianping.com designates 114.80.162.48 as permitted sender)
Received: from [114.80.162.48] (HELO mail.dianping.com) (114.80.162.48)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 05 May 2010 08:18:22 +0000
Received: from techzhangzht ([61.152.173.114])
	(envelope-sender <zhitian.zhang@dianping.com>)
	by 114.80.162.48 with ESMTP
	for <java-user@lucene.apache.org>; Wed, 05 May 2010 16:17:49 +0800
Message-ID: <2EA2D6FCAAE34B6D8FB43D0050D47087@techzhangzht>
From: =?gb2312?B?1cXWvszv?= <zhitian.zhang@dianping.com>
To: <java-user@lucene.apache.org>
References: <FCDE1AE6109442EEA67D8E959B71A05C@techzhangzht> <D7206503EB5BE94497458AF4FE4AE8AB01B9AFB8@owamz.healy-hudson.com>
Subject: Re: How can I merge .cfx and .cfs into a single cfs file?
Date: Wed, 5 May 2010 16:18:21 +0800
MIME-Version: 1.0
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: base64
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.3790.4548
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4325
X-Virus-Checked: Checked by ClamAV on apache.org

VXdlLCB0aGFuayB5b3UgdmVyeSBtdWNoLg0KDQpXaGF0IGlzIHRoZSBtZWNoYW5pem0gbHVjZW5l
IHdpbGwgbWVyZ2UgdGhlc2UgdHdvIGtpbmRzIG9mIGZpbGVzPyBTb21ldGltZXMgSSBmb3VuZCB0
aGVyZSB3YXMgb25seSBvbmUgLmNmcyBmaWxlLCBidXQgaW4gYW5vdGhlciB0aW1lIHRoZXJlIG1h
eSBiZSBvbmUgY2ZzIGFuZCBjZnguIEkgdW5kZXJzdGFuZCB0aGUgLmNmeCBpcyB1c2VkIHRvIHN0
b3JlIHRoZSB0ZXJtIHZlY3RvcnMgZXRjLCBidXQgd2h5IGRvZXMgdGhlIGluZGV4IHJlc3VsdCBu
b3Qgc2VlbSB0byBiZSBjb25zaXN0ZW50Pw0KDQpUaGFua3MsDQpHYXJyeQ0KLS0tLS0gT3JpZ2lu
YWwgTWVzc2FnZSAtLS0tLSANCkZyb206ICJVd2UgR29ldHprZSIgPHV3ZS5nb2V0emtlQGhlYWx5
LWh1ZHNvbi5jb20+DQpUbzogPGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZz4NClNlbnQ6IFdl
ZG5lc2RheSwgTWF5IDA1LCAyMDEwIDM6NTcgUE0NClN1YmplY3Q6IEFXOiBIb3cgY2FuIEkgbWVy
Z2UgLmNmeCBhbmQgLmNmcyBpbnRvIGEgc2luZ2xlIGNmcyBmaWxlPw0KDQoNCkluZGV4IGFsbCBp
bnRvIGEgZGlyZWN0b3J5IGFuZCBkZXRlcm1pbmUgdGhlIHNpemUgb2YgYWxsIGZpbGVzIGluIGl0
Lg0KDQpGcm9tIGh0dHA6Ly9sdWNlbmUuYXBhY2hlLm9yZy9qYXZhLzNfMF8xL2ZpbGVmb3JtYXRz
Lmh0bWwgDQpTdGFydGluZyB3aXRoIEx1Y2VuZSAyLjMsIGRvYyBzdG9yZSBmaWxlcyAoc3RvcmVk
IGZpZWxkIHZhbHVlcyBhbmQgdGVybSB2ZWN0b3JzKSBjYW4gYmUgc2hhcmVkIGluIGEgc2luZ2xl
IHNldCBvZiBmaWxlcyBmb3IgbW9yZSB0aGFuIG9uZSBzZWdtZW50LiBXaGVuIGNvbXBvdW5kIGZp
bGUgaXMgZW5hYmxlZCwgdGhlc2Ugc2hhcmVkIGZpbGVzIHdpbGwgYmUgYWRkZWQgaW50byBhIHNp
bmdsZSBjb21wb3VuZCBmaWxlIChzYW1lIGZvcm1hdCBhcyBhYm92ZSkgYnV0IHdpdGggdGhlIGV4
dGVuc2lvbiAuY2Z4Lg0KDQpJbiBhZGRpdGlvbiB0bw0KQ29tcG91bmQgRmlsZSAgLmNmcyAgQW4g
b3B0aW9uYWwgInZpcnR1YWwiIGZpbGUgY29uc2lzdGluZyBvZiBhbGwgdGhlIG90aGVyIGluZGV4
IGZpbGVzIGZvciBzeXN0ZW1zIHRoYXQgZnJlcXVlbnRseSBydW4gb3V0IG9mIGZpbGUgaGFuZGxl
cy4NCg0KVXdlDQoNCg0KLS0tLS1VcnNwcqi5bmdsaWNoZSBOYWNocmljaHQtLS0tLQ0KVm9uOiDV
xda+zO8gW21haWx0bzp6aGl0aWFuLnpoYW5nQGRpYW5waW5nLmNvbV0gDQpHZXNlbmRldDogTWl0
dHdvY2gsIDUuIE1haSAyMDEwIDA4OjI0DQpBbjogamF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3Jn
DQpCZXRyZWZmOiBIb3cgY2FuIEkgbWVyZ2UgLmNmeCBhbmQgLmNmcyBpbnRvIGEgc2luZ2xlIGNm
cyBmaWxlPw0KDQpIaSBhbGwsDQoNCkkgaGF2ZSBhbiBpbmRleCB0YXNrIHdoaWNoIHdpbGwgaW5k
ZXggdGhvdXNhbmRzIG9mIHJlY29yZHMgd2l0aCBsdWNlbmUgMy4wLjEuIE15IGNvbmZ1c2lvbiBp
cyBsdWNlbmUgd2lsbCBhbHdheXMgY3JlYXRlIGEgLmNmeCBhbmQgYSAuY2ZzIGZpbGUgaW4gdGhl
IGZpbGUgc3lzdGVtLCBzb21ldGltZXMgbW9yZSwgd2hpbGUgSSB0aG91Z2h0IGl0IHNob3VsZCBj
cmVhdGUgYSBzaW5nbGUgLmNmcyBmaWxlIGlmIEkgb3B0aW1pemUgdGhlIGluZGV4IGRhdGEuIElz
IGl0IGJ5IGRlc2lnbj8gSWYgeWVzLCBpcyB0aGVyZSBhbnkgd2F5L2NvbmZpZ3VyYXRpb24gSSBj
YW4gZG8gdG8gbWVyZ2UgYWxsIG9mIHRoZSBpbmRleCBmaWxlcyBpbnRvIGEgc2luZ2Ugb25lPw0K
DQpCeSB0aGUgd2F5LCBJIGhhdmUgYSBsb2dpYyB0byB2YWxpZGF0ZSB0aGUgaW5kZXggZGF0YSwg
aWYgdGhlIHNpemUgb2YgLmNmcyBpbmNyZWFzZXMgZHJhbWF0aWNhbGx5IGNvbXBhcmluZyB0byB0
aGUgZmlsZSBnZW5lcmF0ZWQgbGFzdCB0aW1lLCB0aGVyZSBtYXkgYmUgc29tZXRoaW5nIHdyb25n
LCBhIHdhcm5pbmcgbWVzc2FnZSB3aWxsIGJlIHRocmV3LiBUaGlzIGlzIHRoZSByZWFzb24gdGhh
dCBJIHdhbnQgdG8gZ2VuZXJhdGUgYSBzaW5nbGUgLmNmcyBmaWxlLiBBbnkgb3RoZXIgc3VnZ2Vz
dGlvbiBhYm91dCB0aGUgaW5kZXggdmFsaWRhdGlvbj8NCg0KQW55IGJvZHkgY2FuIGdpdmUgbWUg
YSBoYW5kPw0KDQpUaGFua3MgaW4gYWR2YW5jZS4NCg0KR2FycnkNCg0KLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQpU
byB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNo
ZS5vcmcNCkZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1
Y2VuZS5hcGFjaGUub3JnDQo=



From java-user-return-46028-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 05 08:51:04 2010
Return-Path: <java-user-return-46028-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63392 invoked from network); 5 May 2010 08:51:04 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 May 2010 08:51:04 -0000
Received: (qmail 51538 invoked by uid 500); 5 May 2010 08:51:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51127 invoked by uid 500); 5 May 2010 08:50:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51114 invoked by uid 99); 5 May 2010 08:50:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 May 2010 08:50:58 +0000
X-ASF-Spam-Status: No, hits=-0.8 required=10.0
	tests=AWL,FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.218.211 as permitted sender)
Received: from [209.85.218.211] (HELO mail-bw0-f211.google.com) (209.85.218.211)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 May 2010 08:50:52 +0000
Received: by bwz3 with SMTP id 3so2561700bwz.11
        for <java-user@lucene.apache.org>; Wed, 05 May 2010 01:50:28 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=H/3LqPU0KaOD2Thzm33q0yrq1jIj1pkQgM5hHHYwiIk=;
        b=PjGn9dK/VpdYepfzl84JefskqZdriiV3H3u/Hu4zzVRsWjo4VphBlSWaFOQ7OLzzRN
         PLOpW3cmw4zphZbto4PZ2YrkjZnx1SUbdOTPVvzt4JtvgQm0zDDV0eNmWO9PZx7OHz2l
         T20y6mCTA+nZii3XtdBADg5MG5HPoy2vK9ruc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=SjYi4t5t4bmAjHqSOY9MXGIt9fFAy45dGRz7HuqseKiV54Enf2m1lOvtMPfgJXEarK
         bA4pwf2Ckx6Yrtgoz83V2zmsvquy6DAiIBqvUKG6//wJP6PGpVKSBb8C747kWon0o9oi
         /kNVzY/YoWU7dD29jbd/pEHoZCGR6x84t0Dlo=
Received: by 10.204.10.15 with SMTP id n15mr4833685bkn.158.1273049428376; Wed, 
	05 May 2010 01:50:28 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.54.198 with HTTP; Wed, 5 May 2010 01:50:08 -0700 (PDT)
In-Reply-To: <s2ubd236a1005042117wd8e12f41i18e0fda2aa6604cd@mail.gmail.com>
References: <q2gbd236a1005030321gd9f4506fy7b5136a05afb9263@mail.gmail.com> 
	<p2mbd236a1005040213k7e5a4035w387c2ad906d54129@mail.gmail.com> 
	<m2m8c4e68611005040631qbd7d0693v2787f50bc915d0c3@mail.gmail.com> 
	<s2ubd236a1005042117wd8e12f41i18e0fda2aa6604cd@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Wed, 5 May 2010 09:50:08 +0100
Message-ID: <y2w8c4e68611005050150nbbd61e44w3f804663ccdfed70@mail.gmail.com>
Subject: Re: Using IndexReader in the web environment
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: quoted-printable

You could tell the searching part of your app, via some notification
or messaging call.  Or call IndexReader.isCurrent() from time to time,
or even on every search, and reopen() if necessary.  See the javadocs
and don't forget to close the old reader when you do call reopen.


--
Ian.


On Wed, May 5, 2010 at 5:17 AM, Vijay Veeraraghavan
<vijay.raghavan08@gmail.com> wrote:
> hey Ian,
> thanks for the reply. I find it very useful. My report generating
> scheduler will run periodically, once done it will invoke the indexer
> and exit. In this case I do not know if the index has changed or not.
> How do i keep track of the changes in the index? As the two entities,
> scheduler/indexer and the web application, are totally different.
>
> Vijay
>
> On 5/4/10, Ian Lea <ian.lea@gmail.com> wrote:
>> For best performance you should aim to keep a shared index searcher,
>> or the underlying index reader, open as long as possible. =A0You may of
>> course need to reopen it if/when the index changes. =A0As to scope, you
>> can store it wherever it makes sense for your application.
>>
>>
>> --
>> Ian.
>>
>>
>> On Tue, May 4, 2010 at 10:13 AM, Vijay Veeraraghavan
>> <vijay.raghavan08@gmail.com> wrote:
>>> Hi,
>>> Thanks for the reply. So I will have a dedicated servlet to search the
>>> index, but does it mean that the indexsearcher does not close the
>>> index, keep it open? Is it not possible to keep it in the application
>>> scope?
>>>
>>> Vijay
>>>
>>> On 5/3/10, Vijay Veeraraghavan <vijay.raghavan08@gmail.com> wrote:
>>>> Hi all,
>>>>
>>>> In a clustered environment I search the index from the web
>>>> application. In the web application I am creating IndexReader on each
>>>> request. is it expensive to do like this? I read somewhere in the web
>>>> that try using the same reader as much as possible. Can i keep the
>>>> initially created IndexReader in the session/application scopes and
>>>> use the same for each request? Any other idea?
>>>>
>>>> Viay
>>>>
>>>> On 5/3/10, Vijay Veeraraghavan <vijay.raghavan08@gmail.com> wrote:
>>>>> dear all,
>>>>>
>>>>> as replied below, does searching again for the document in the index
>>>>> and if found skip the indexing else index it, is this not similar to
>>>>> indexing all pdf documents once again, is not this overhead? As I am
>>>>> not going to index the details of the pdf (so if an indexed pdf was
>>>>> recreated i need not reindex it) but just the paths of the documents.
>>>>>
>>>>> Vijay
>>>>>
>>>>>>> Hey there,
>>>>>>>
>>>>>>> you might have to implement a some kind of unique identifier using =
an
>>>>>>> indexed lucene field. When you are indexing you should fire a query
>>>>>>> with
>>>>>>> the
>>>>>>> uuid of your document (maybe the path to you pdf document) and chec=
k
>>>>>>> if
>>>>>>> the
>>>>>>> document is in the index already. You could also do a boolean query
>>>>>>> combining UUID, timestamp and / or a hash value to see if the docum=
ent
>>>>>>> has
>>>>>>> been changed. if so you can simply update the document by its UUID
>>>>>>> (something like indexwriter.updateDocument(new Term("uuid",
>>>>>>> value),document);)
>>>>>>>
>>>>>>> Unfortunately you have to implement this yourself but it should not=
 be
>>>>>>> that
>>>>>>> much of a deal.
>>>>>>>
>>>>>>> simon
>>>>>>>
>>>>>>> On Mon, May 3, 2010 at 9:21 AM, Vijay Veeraraghavan <
>>>>>>> vijay.raghavan08@gmail.com> wrote:
>>>>>>>
>>>>>>>> Dear all,
>>>>>>>> I am using lucene 3.0 to index the pdf reports that I generate
>>>>>>>> dynamically. I index the pdf file name (without extension), file p=
ath
>>>>>>>> and its absolute path as fields. I search with the file name witho=
ut
>>>>>>>> extension; it retrieves a list, as usually 2 or more files are
>>>>>>>> present
>>>>>>>> in the same name in different sub directories. As I create the ind=
ex
>>>>>>>> for the first time it updates, assuming 100 pdf files in different
>>>>>>>> directories, the files meta info. If again I do indexing, while my
>>>>>>>> report generator scheduler has the produced 500 more pdf files
>>>>>>>> totaling to 600 files in different directories, I wish to index on=
ly
>>>>>>>> the new files to the index. But presently it=92s doing the whole t=
hing
>>>>>>>> again (600 files). How to implement this functionality? Think of t=
he
>>>>>>>> thousands of pdf files created on each run.
>>>>>>>>
>>>>>>>> P.S: I cannot keep the meta-info of generated pdf files in the jav=
a
>>>>>>>> memory, as it exceeds thousands in a single run, and update the in=
dex
>>>>>>>> looping this list.
>>>>>>>>
>>>>>>>> new IndexWriter(FSDirectory.open(this.indexDir), new
>>>>>>>> StandardAnalyzer(
>>>>>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0 =A0Version.LUCENE_CURRENT), true,
>>>>>>>>
>>>>>>>> IndexWriter.MaxFieldLength.LIMITED);
>>>>>>>>
>>>>>>>> is the boolean parameter is for this purpose? Please guide me.
>>>>>>>>
>>>>>>>> --
>>>>>>>> Thanks
>>>>>>>> Vijay Veeraraghavan
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> --
>>>>>>>> Thanks & Regards
>>>>>>>> Vijay Veeraraghavan
>>>>>>>>
>>>>>>>> ------------------------------------------------------------------=
---
>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>
>>>>>>>>
>>>>>>>
>>>>>>
>>>>>>
>>>>>> --
>>>>>> Thanks & Regards
>>>>>> Vijay Veeraraghavan
>>>>>>
>>>>>
>>>>>
>>>>> --
>>>>> Thanks & Regards
>>>>> Vijay Veeraraghavan
>>>>>
>>>>
>>>>
>>>> --
>>>> Thanks & Regards
>>>> Vijay Veeraraghavan
>>>>
>>>
>>>
>>> --
>>> Thanks & Regards
>>> Vijay Veeraraghavan
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> --
> Thanks & Regards
> Vijay Veeraraghavan
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46029-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 05 12:24:35 2010
Return-Path: <java-user-return-46029-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13941 invoked from network); 5 May 2010 12:24:35 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 May 2010 12:24:35 -0000
Received: (qmail 4078 invoked by uid 500); 5 May 2010 12:24:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4029 invoked by uid 500); 5 May 2010 12:24:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4018 invoked by uid 99); 5 May 2010 12:24:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 May 2010 12:24:32 +0000
X-ASF-Spam-Status: No, hits=-0.6 required=10.0
	tests=AWL,RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.160.176] (HELO mail-gy0-f176.google.com) (209.85.160.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 May 2010 12:24:27 +0000
Received: by gyf1 with SMTP id 1so2756005gyf.35
        for <java-user@lucene.apache.org>; Wed, 05 May 2010 05:24:06 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.150.93.14 with SMTP id q14mr13590802ybb.307.1273062243817; 
	Wed, 05 May 2010 05:24:03 -0700 (PDT)
Received: by 10.151.11.20 with HTTP; Wed, 5 May 2010 05:24:03 -0700 (PDT)
In-Reply-To: <2EA2D6FCAAE34B6D8FB43D0050D47087@techzhangzht>
References: <FCDE1AE6109442EEA67D8E959B71A05C@techzhangzht>
	 <D7206503EB5BE94497458AF4FE4AE8AB01B9AFB8@owamz.healy-hudson.com>
	 <2EA2D6FCAAE34B6D8FB43D0050D47087@techzhangzht>
Date: Wed, 5 May 2010 08:24:03 -0400
Message-ID: <l2v9ac0c6aa1005050524la0f638bem660ec1f203fe5e97@mail.gmail.com>
Subject: Re: How can I merge .cfx and .cfs into a single cfs file?
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: quoted-printable

Lucene considers an index with a single .cfx and a single .cfs as optimized=
.

Also, note that how Lucene stores files in the index is an impl detail
-- it can change from release to release -- so relying on any of these
details is dangerous.

That said, with recent Lucene versions, if you really want to force
these two files to be consolidated, you can make a custom MergePolicy
that returns a merge from the findMergesForOptimize for this case (the
default MergePolicy returns null since it thinks this case is already
optimized).

Or... if you index with two separate IndexWriter sessions, and then
call optimize, that should also merge down to one file.

Mike

2010/5/5 =D5=C5=D6=BE=CC=EF <zhitian.zhang@dianping.com>:
> Uwe, thank you very much.
>
> What is the mechanizm lucene will merge these two kinds of files? Sometim=
es I found there was only one .cfs file, but in another time there may be o=
ne cfs and cfx. I understand the .cfx is used to store the term vectors etc=
, but why does the index result not seem to be consistent?
>
> Thanks,
> Garry
> ----- Original Message -----
> From: "Uwe Goetzke" <uwe.goetzke@healy-hudson.com>
> To: <java-user@lucene.apache.org>
> Sent: Wednesday, May 05, 2010 3:57 PM
> Subject: AW: How can I merge .cfx and .cfs into a single cfs file?
>
>
> Index all into a directory and determine the size of all files in it.
>
> From http://lucene.apache.org/java/3_0_1/fileformats.html
> Starting with Lucene 2.3, doc store files (stored field values and term v=
ectors) can be shared in a single set of files for more than one segment. W=
hen compound file is enabled, these shared files will be added into a singl=
e compound file (same format as above) but with the extension .cfx.
>
> In addition to
> Compound File  .cfs  An optional "virtual" file consisting of all the oth=
er index files for systems that frequently run out of file handles.
>
> Uwe
>
>
> -----Urspr=A8=B9ngliche Nachricht-----
> Von: =D5=C5=D6=BE=CC=EF [mailto:zhitian.zhang@dianping.com]
> Gesendet: Mittwoch, 5. Mai 2010 08:24
> An: java-user@lucene.apache.org
> Betreff: How can I merge .cfx and .cfs into a single cfs file?
>
> Hi all,
>
> I have an index task which will index thousands of records with lucene 3.=
0.1. My confusion is lucene will always create a .cfx and a .cfs file in th=
e file system, sometimes more, while I thought it should create a single .c=
fs file if I optimize the index data. Is it by design? If yes, is there any=
 way/configuration I can do to merge all of the index files into a singe on=
e?
>
> By the way, I have a logic to validate the index data, if the size of .cf=
s increases dramatically comparing to the file generated last time, there m=
ay be something wrong, a warning message will be threw. This is the reason =
that I want to generate a single .cfs file. Any other suggestion about the =
index validation?
>
> Any body can give me a hand?
>
> Thanks in advance.
>
> Garry
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46030-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 05 14:09:17 2010
Return-Path: <java-user-return-46030-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36079 invoked from network); 5 May 2010 14:09:17 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 May 2010 14:09:17 -0000
Received: (qmail 82416 invoked by uid 500); 5 May 2010 14:09:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82365 invoked by uid 500); 5 May 2010 14:09:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82357 invoked by uid 99); 5 May 2010 14:09:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 May 2010 14:09:15 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of gsiasf@gmail.com designates 209.85.221.171 as permitted sender)
Received: from [209.85.221.171] (HELO mail-qy0-f171.google.com) (209.85.221.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 May 2010 14:09:07 +0000
Received: by qyk1 with SMTP id 1so775215qyk.5
        for <java-user@lucene.apache.org>; Wed, 05 May 2010 07:08:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:sender:content-type
         :mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        bh=qBcU8jQEjGA8dajPueRRdFzQ196CWBA9pNWpr102Loc=;
        b=pdYQiIXhnX+UJZBBSMsXmbGc8iXXk7Hq9E15ju4bML+KwnZaKeaFe+JwV32SAs63uh
         zW7/dzhzlJ4NbTFigIoxwPvSJSpQdTpzzvXGSmGz4z0C/+XIHBlaMVxwFM+pjR00Qq7H
         A8908EFeUCGYKNrgtkWow6PxKxRvNrvLoikpc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=sender:content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        b=Xk+XUNNbMU5lEd2pTPCI1rk88n9Yk1GQtaLctIZG9Px3mWThhEqzkHrwMOW33fQxPm
         GuTv2SpN3i5+FuDn6I7jHaN+f+GZ8g+r/E/PAe18cl0iqKFITAvr/RjleL7uK08lz0ad
         dq76vNJDrFDGtlotWPE9EFFz3UdWSzChWuVCQ=
Received: by 10.224.79.75 with SMTP id o11mr6386306qak.195.1273068524531;
        Wed, 05 May 2010 07:08:44 -0700 (PDT)
Received: from [10.9.244.35] (72-254-85-150.client.stsn.net [72.254.85.150])
        by mx.google.com with ESMTPS id 20sm4487412qyk.0.2010.05.05.07.08.43
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 05 May 2010 07:08:43 -0700 (PDT)
Sender: Grant Ingersoll <gsiasf@gmail.com>
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1078)
Subject: Re: Relevancy Practices
From: Grant Ingersoll <gsingers@apache.org>
In-Reply-To: <r2q698f0de11005020550o82e21da0ke400dd7187bc82a7@mail.gmail.com>
Date: Wed, 5 May 2010 07:08:41 -0700
Content-Transfer-Encoding: quoted-printable
Message-Id: <B1D380AF-E26E-4801-888C-07BA136EF7AF@apache.org>
References: <E6C119F7-C966-4280-94DD-3575BB3CE3F4@apache.org> <x2i3504767f1004290759u6de20a3ehfa4d46fb11a97954@mail.gmail.com> <h2r698f0de11004300500g71aba2b1g21378ba061b674c@mail.gmail.com> <E77D01D3-EB7D-4C8C-A817-03BE5A0E5D9E@apache.org> <r2q698f0de11005020550o82e21da0ke400dd7187bc82a7@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1078)
X-Virus-Checked: Checked by ClamAV on apache.org


On May 2, 2010, at 5:50 AM, Avi Rosenschein wrote:

> On 4/30/10, Grant Ingersoll <gsingers@apache.org> wrote:
>>=20
>> On Apr 30, 2010, at 8:00 AM, Avi Rosenschein wrote:
>>> Also, tuning the algorithms to the users can be very important. For
>>> instance, we have found that in a basic search functionality, the =
default
>>> query parser operator OR works very well. But on a page for advanced
>>> users,
>>> who want to very precisely tune their search results, a default of =
AND
>>> works
>>> better.
>>=20
>> Avi,
>>=20
>> Great example.  Can you elaborate on how you arrived at this =
conclusion?
>> What things did you do to determine it was a problem?
>>=20
>> -Grant
>=20
> Hi Grant,
>=20
> Sure. On http://wiki.answers.com/, we use search in a variety of
> places and ways.
>=20
> In the basic search box (what you get if you look stuff up in the main
> Ask box on the home page), we generally want the relevancy matching to
> be pretty fuzzy. For example, if the user looked up "Where can you see
> photos of the Aurora Borealis effect?" I would still want to show them
> "Where can you see photos of the Aurora Borealis?" as a match.
>=20
> However, the advanced search page,
> http://wiki.answers.com/Q/Special:Search, is used by advanced users to
> filter questions by various facets and searches, and to them it is
> important for the filter to filter out non-matches, since they use it
> as a working page. For example, if they want to do a search for "Harry
> Potter" and classify all results into the "Harry Potter" category, it
> is important that not every match for "Harry" is returned.

I'm curious, Avi, if you can share how you came to these conclusions?  =
For instance, did you have any qualitative evidence that "fuzzy" was =
better for the main page?  Or was it a "I know it when I see it" kind of =
thing.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46031-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 05 14:10:41 2010
Return-Path: <java-user-return-46031-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36420 invoked from network); 5 May 2010 14:10:41 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 May 2010 14:10:41 -0000
Received: (qmail 85194 invoked by uid 500); 5 May 2010 14:10:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85156 invoked by uid 500); 5 May 2010 14:10:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85147 invoked by uid 99); 5 May 2010 14:10:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 May 2010 14:10:39 +0000
X-ASF-Spam-Status: No, hits=-1.2 required=10.0
	tests=AWL,FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gsiasf@gmail.com designates 209.85.221.171 as permitted sender)
Received: from [209.85.221.171] (HELO mail-qy0-f171.google.com) (209.85.221.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 May 2010 14:10:32 +0000
Received: by qyk1 with SMTP id 1so777257qyk.5
        for <java-user@lucene.apache.org>; Wed, 05 May 2010 07:10:12 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:sender:content-type
         :mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        bh=y91TcHZQCp/WAdGYQTQd7z5p1/FSdqq1Qgdz428plQc=;
        b=HsXhZb72qGgjZ2cjs/Kd3CMRs2hqs/VxV8Z3ozAg6PdmA4e8BAJ84mkRzjA+vvoCEY
         Doi6fgZ1Q3WGZhSksCFWTe3exBauGhXqLZJ8ceEJtFEEclY0pme3rGPgt/j7+0k6vmlA
         tBV7vPo7yymD4NuRKwHs3BLjLOO3YxEjS3v1c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=sender:content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        b=I5phnOEugm65B++SciZRYbKB9GYefNNnVFJRqpVtCDOOZPuLqO2DaiI7T0ojy3baLM
         6obSLmPxocrffXFiKXyr6oVuwFN8uF/ijdMC//bsoPakTUgoI8OfpH56mEL/OP0ZJqHb
         7+FkD91+MmWT67PIZhBTDRSEFtllgIn5IWeOs=
Received: by 10.224.59.70 with SMTP id k6mr5643478qah.237.1273068611639;
        Wed, 05 May 2010 07:10:11 -0700 (PDT)
Received: from [10.9.244.35] (72-254-85-150.client.stsn.net [72.254.85.150])
        by mx.google.com with ESMTPS id 21sm4493549qyk.5.2010.05.05.07.10.10
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 05 May 2010 07:10:10 -0700 (PDT)
Sender: Grant Ingersoll <gsiasf@gmail.com>
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1078)
Subject: Re: Relevancy Practices
From: Grant Ingersoll <gsingers@apache.org>
In-Reply-To: <y2re994873a1005031108g8d8a0153u161aaf008a03a7ab@mail.gmail.com>
Date: Wed, 5 May 2010 07:10:08 -0700
Content-Transfer-Encoding: quoted-printable
Message-Id: <5CD2BE19-C279-41C9-A353-F25C5F5138AE@apache.org>
References: <E6C119F7-C966-4280-94DD-3575BB3CE3F4@apache.org> <y2re994873a1005031108g8d8a0153u161aaf008a03a7ab@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1078)

Thanks, Peter.

Can you share what kind of evaluations you did to determine that the end =
user believed the results were equally relevant?  How formal was that =
process?

-Grant

On May 3, 2010, at 11:08 AM, Peter Keegan wrote:

> We discovered very soon after going to production that Lucene's scores =
were
> often 'too precise'. For example, a page of 25 results may have =
several
> different score values, and all within 15% of each other, but to the =
end
> user all 25 results were equally relevant. Thus we wanted the =
secondary sort
> field to determine the order, instead. This required writing a custom =
score
> comparator to 'round' the scores. The same thing occurred for distance
> sorting. We also limit the effect of term frequency to help prevent
> spamming.  In comparison to Avi, we use 'AND' as the default operator =
for
> keyword queries and if no docs are found, the query is automatically =
retried
> with 'OR'. This improves precision a bit and only occurs if the user
> provides no operators.
>=20
> Lucene's Explanation class has been invaluable in helping me to =
explain a
> particular sort order in many, many situations.
> Most of our relevance tuning has occurred after deployment to =
production.
>=20
> Peter
>=20
> On Thu, Apr 29, 2010 at 10:14 AM, Grant Ingersoll =
<gsingers@apache.org>wrote:
>=20
>> I'm putting on a talk at Lucene Eurocon (
>> http://lucene-eurocon.org/sessions-track1-day2.html#1) on "Practical
>> Relevance" and I'm curious as to what people put in practice for =
testing and
>> improving relevance.  I have my own inclinations, but I don't want to =
muddy
>> the water just yet.  So, if you have a few moments, I'd love to hear
>> responses to the following questions.
>>=20
>> What worked?
>> What didn't work?
>> What didn't you understand about it?
>> What tools did you use?
>> What tools did you wish you had either for debugging relevance or =
"fixing"
>> it?
>> How much time did you spend on it?
>> How did you avoid over/under tuning?
>> What stage of development/testing/production did you decide to do =
relevance
>> tuning?  Was that timing planned or not?
>>=20
>>=20
>> Thanks,
>> Grant
>>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46032-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 05 15:32:11 2010
Return-Path: <java-user-return-46032-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61298 invoked from network); 5 May 2010 15:32:11 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 May 2010 15:32:11 -0000
Received: (qmail 72360 invoked by uid 500); 5 May 2010 15:32:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72305 invoked by uid 500); 5 May 2010 15:32:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72297 invoked by uid 99); 5 May 2010 15:32:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 May 2010 15:32:09 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of peterlkeegan@gmail.com designates 209.85.160.176 as permitted sender)
Received: from [209.85.160.176] (HELO mail-gy0-f176.google.com) (209.85.160.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 May 2010 15:32:01 +0000
Received: by gyf1 with SMTP id 1so2903511gyf.35
        for <java-user@lucene.apache.org>; Wed, 05 May 2010 08:31:40 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=ny+PGcbp0gI/W5av39eynvBAh+GHfFpJ+fwfeW5sPks=;
        b=bLXiYedIY+C7JYoU7ERZLQcfYaUJZUDoEw/WY4IBqJ8ymdV4j8Okpe1tUuU5OZ7obB
         6Iu5dc/wdO8cj+BWqE5gLPEi1D8w0ncHMdVpEzjcO3eYjeYKZvTu751D2gZ5URpWW/EG
         7+AvSbaCQ5he5gvElDuoP1XfDTNupVptrw0CQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=f9zbFWMVTPy/oIG/Hej/lDg9uUOJKtfzkkcnOJEneksAzQcQ+BvIsx0MVw+/tf01l5
         eg992Kpcpub3ch+3so4G47TWPfdEuIv+27gE2KOUVqcsGxWNeNGa6KkTI3tWFcPSdOLR
         ohAxG+Hhf4Y/v9vIJREz/RcFl86ynxaGAiyCU=
MIME-Version: 1.0
Received: by 10.229.222.208 with SMTP id ih16mr1661598qcb.55.1273073493407; 
	Wed, 05 May 2010 08:31:33 -0700 (PDT)
Received: by 10.229.84.134 with HTTP; Wed, 5 May 2010 08:31:30 -0700 (PDT)
In-Reply-To: <5CD2BE19-C279-41C9-A353-F25C5F5138AE@apache.org>
References: <E6C119F7-C966-4280-94DD-3575BB3CE3F4@apache.org>
	 <y2re994873a1005031108g8d8a0153u161aaf008a03a7ab@mail.gmail.com>
	 <5CD2BE19-C279-41C9-A353-F25C5F5138AE@apache.org>
Date: Wed, 5 May 2010 11:31:30 -0400
Message-ID: <r2qe994873a1005050831g862718b5s8a0e8ed8c81a8336@mail.gmail.com>
Subject: Re: Relevancy Practices
From: Peter Keegan <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016361e829e58fa250485da8518
X-Virus-Checked: Checked by ClamAV on apache.org

--0016361e829e58fa250485da8518
Content-Type: text/plain; charset=ISO-8859-1

The feedback came directly from customers and customer facing support folks.
Here is an example of a query with keywords: nurse, rn, nursing, hospital.
The top 2 hits have scores of 26.86348 and 26.407215. To the customer, both
results were equally relevant because all of their keywords were in the
documents. For this application, the subtleties of TF/IDF are not
appreciated by the end user ;-).  Here are the Explanations for the scores
(I hope they are readable):

Doc 1:

26.86348  sum of:
  26.86348  product of:
    33.57935  sum of:
      10.403484  weight(contents:nurse in 110320), product of:
        0.30413723  queryWeight(contents:nurse), product of:
          4.8375363  idf(contents:  nurse=9554)
          0.06287027  queryNorm
        34.206547  fieldWeight(contents:nurse in 110320), product of:
          7.071068  btq, product of:
            1.4142135  tf(phraseFreq=2.0)
            5.0  scorePayload(...)
          4.8375363  idf(contents:  nurse=9554)
          1.0  fieldNorm(field=contents, doc=110320)
      11.005695  weight(contents:rn in 110320), product of:
        0.31281596  queryWeight(contents:rn), product of:
          4.9755783  idf(contents:  rn=8322)
          0.06287027  queryNorm
        35.18265  fieldWeight(contents:rn in 110320), product of:
          7.071068  btq, product of:
            1.4142135  tf(phraseFreq=3.0)
            5.0  scorePayload(...)
          4.9755783  idf(contents:  rn=8322)
          1.0  fieldNorm(field=contents, doc=110320)
      10.136917  weight(contents:nursing in 110320), product of:
        0.3002155  queryWeight(contents:nursing), product of:
          4.7751584  idf(contents:  nursing=10169)
          0.06287027  queryNorm
        33.76547  fieldWeight(contents:nursing in 110320), product of:
          7.071068  btq, product of:
            1.4142135  tf(phraseFreq=11.0)
            5.0  scorePayload(...)
          4.7751584  idf(contents:  nursing=10169)
          1.0  fieldNorm(field=contents, doc=110320)
      2.0332527  weight(contents:hospital in 110320), product of:
        0.30064976  queryWeight(contents:hospital), product of:
          4.7820654  idf(contents:  hospital=10099)
          0.06287027  queryNorm
        6.7628617  fieldWeight(contents:hospital in 110320), product of:
          1.4142135  btq, product of:
            1.4142135  tf(phraseFreq=3.0)
            1.0  scorePayload(...)
          4.7820654  idf(contents:  hospital=10099)
          1.0  fieldNorm(field=contents, doc=110320)
    0.8  coord(4/5)

Doc 2:

26.407215  sum of:
  26.407215  product of:
    33.009018  sum of:
      10.403484  weight(contents:nurse in 271166), product of:
        0.30413723  queryWeight(contents:nurse), product of:
          4.8375363  idf(contents:  nurse=9554)
          0.06287027  queryNorm
        34.206547  fieldWeight(contents:nurse in 271166), product of:
          7.071068  btq, product of:
            1.4142135  tf(phraseFreq=4.0)
            5.0  scorePayload(...)
          4.8375363  idf(contents:  nurse=9554)
          1.0  fieldNorm(field=contents, doc=271166)
      11.005695  weight(contents:rn in 271166), product of:
        0.31281596  queryWeight(contents:rn), product of:
          4.9755783  idf(contents:  rn=8322)
          0.06287027  queryNorm
        35.18265  fieldWeight(contents:rn in 271166), product of:
          7.071068  btq, product of:
            1.4142135  tf(phraseFreq=4.0)
            5.0  scorePayload(...)
          4.9755783  idf(contents:  rn=8322)
          1.0  fieldNorm(field=contents, doc=271166)
      1.4335766  weight(contents:nursing in 271166), product of:
        0.3002155  queryWeight(contents:nursing), product of:
          4.7751584  idf(contents:  nursing=10169)
          0.06287027  queryNorm
        4.7751584  fieldWeight(contents:nursing in 271166), product of:
          1.0  btq, product of:
            1.0  tf(phraseFreq=1.0)
            1.0  scorePayload(...)
          4.7751584  idf(contents:  nursing=10169)
          1.0  fieldNorm(field=contents, doc=271166)
      10.166264  weight(contents:hospital in 271166), product of:
        0.30064976  queryWeight(contents:hospital), product of:
          4.7820654  idf(contents:  hospital=10099)
          0.06287027  queryNorm
        33.81431  fieldWeight(contents:hospital in 271166), product of:
          7.071068  btq, product of:
            1.4142135  tf(phraseFreq=9.0)
            5.0  scorePayload(...)
          4.7820654  idf(contents:  hospital=10099)
          1.0  fieldNorm(field=contents, doc=271166)
    0.8  coord(4/5)

Peter

On Wed, May 5, 2010 at 10:10 AM, Grant Ingersoll <gsingers@apache.org>wrote:

> Thanks, Peter.
>
> Can you share what kind of evaluations you did to determine that the end
> user believed the results were equally relevant?  How formal was that
> process?
>
> -Grant
>
> On May 3, 2010, at 11:08 AM, Peter Keegan wrote:
>
> > We discovered very soon after going to production that Lucene's scores
> were
> > often 'too precise'. For example, a page of 25 results may have several
> > different score values, and all within 15% of each other, but to the end
> > user all 25 results were equally relevant. Thus we wanted the secondary
> sort
> > field to determine the order, instead. This required writing a custom
> score
> > comparator to 'round' the scores. The same thing occurred for distance
> > sorting. We also limit the effect of term frequency to help prevent
> > spamming.  In comparison to Avi, we use 'AND' as the default operator for
> > keyword queries and if no docs are found, the query is automatically
> retried
> > with 'OR'. This improves precision a bit and only occurs if the user
> > provides no operators.
> >
> > Lucene's Explanation class has been invaluable in helping me to explain a
> > particular sort order in many, many situations.
> > Most of our relevance tuning has occurred after deployment to production.
> >
> > Peter
> >
> > On Thu, Apr 29, 2010 at 10:14 AM, Grant Ingersoll <gsingers@apache.org
> >wrote:
> >
> >> I'm putting on a talk at Lucene Eurocon (
> >> http://lucene-eurocon.org/sessions-track1-day2.html#1) on "Practical
> >> Relevance" and I'm curious as to what people put in practice for testing
> and
> >> improving relevance.  I have my own inclinations, but I don't want to
> muddy
> >> the water just yet.  So, if you have a few moments, I'd love to hear
> >> responses to the following questions.
> >>
> >> What worked?
> >> What didn't work?
> >> What didn't you understand about it?
> >> What tools did you use?
> >> What tools did you wish you had either for debugging relevance or
> "fixing"
> >> it?
> >> How much time did you spend on it?
> >> How did you avoid over/under tuning?
> >> What stage of development/testing/production did you decide to do
> relevance
> >> tuning?  Was that timing planned or not?
> >>
> >>
> >> Thanks,
> >> Grant
> >>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016361e829e58fa250485da8518--

From java-user-return-46033-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 05 16:41:16 2010
Return-Path: <java-user-return-46033-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78978 invoked from network); 5 May 2010 16:41:16 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 May 2010 16:41:16 -0000
Received: (qmail 3485 invoked by uid 500); 5 May 2010 16:41:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3448 invoked by uid 500); 5 May 2010 16:41:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3440 invoked by uid 99); 5 May 2010 16:41:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 May 2010 16:41:13 +0000
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=AWL,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of arosenschein@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 May 2010 16:41:08 +0000
Received: by pwi2 with SMTP id 2so2683678pwi.35
        for <java-user@lucene.apache.org>; Wed, 05 May 2010 09:40:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=tUC1K/zFCfTdJSKyugDOP54FOwSHPIH6GMrn87SFCww=;
        b=nE0PNmn8cLjvpX5iUzzW1C+4NsbLKX1w999o5Axncrcq/q4wXIiq8S20hxgXLV9kve
         9KLvkTPw8VRPhGZ/iuE/eIvGBFj7VXD/5WZmPRIMCGoTzDJNjqXEY/gyMuIQ55lGmnUH
         pKfmPC6F2DvStcDN24orS4qtKrn471Z38ukMM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=CVWf5fSLDahAz4o0C58hDq3dzLY3jXZg3ViB2odGSv4p2zLV2uJQkRN6DMNFEuFKLT
         cmWDWpXiTRRXC63ShJSSOoHkLeE5hxkBTHSbDwF/SXPOaxAqk0LUVWkAgzDwly/emmKm
         vZMTfhNLABnxEPmdvmCbmphRl9lGyLDSviHaU=
MIME-Version: 1.0
Received: by 10.141.106.16 with SMTP id i16mr5964134rvm.220.1273077647877; 
	Wed, 05 May 2010 09:40:47 -0700 (PDT)
Received: by 10.141.18.15 with HTTP; Wed, 5 May 2010 09:40:47 -0700 (PDT)
In-Reply-To: <B1D380AF-E26E-4801-888C-07BA136EF7AF@apache.org>
References: <E6C119F7-C966-4280-94DD-3575BB3CE3F4@apache.org>
	 <x2i3504767f1004290759u6de20a3ehfa4d46fb11a97954@mail.gmail.com>
	 <h2r698f0de11004300500g71aba2b1g21378ba061b674c@mail.gmail.com>
	 <E77D01D3-EB7D-4C8C-A817-03BE5A0E5D9E@apache.org>
	 <r2q698f0de11005020550o82e21da0ke400dd7187bc82a7@mail.gmail.com>
	 <B1D380AF-E26E-4801-888C-07BA136EF7AF@apache.org>
Date: Wed, 5 May 2010 19:40:47 +0300
Message-ID: <t2k698f0de11005050940l89b78a54jaf701fa7ae182f8f@mail.gmail.com>
Subject: Re: Relevancy Practices
From: Avi Rosenschein <arosenschein@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd13bcaf9279c0485db7c58

--000e0cd13bcaf9279c0485db7c58
Content-Type: text/plain; charset=UTF-8

On Wed, May 5, 2010 at 5:08 PM, Grant Ingersoll <gsingers@apache.org> wrote:

>
> On May 2, 2010, at 5:50 AM, Avi Rosenschein wrote:
>
> > On 4/30/10, Grant Ingersoll <gsingers@apache.org> wrote:
> >>
> >> On Apr 30, 2010, at 8:00 AM, Avi Rosenschein wrote:
> >>> Also, tuning the algorithms to the users can be very important. For
> >>> instance, we have found that in a basic search functionality, the
> default
> >>> query parser operator OR works very well. But on a page for advanced
> >>> users,
> >>> who want to very precisely tune their search results, a default of AND
> >>> works
> >>> better.
> >>
> >> Avi,
> >>
> >> Great example.  Can you elaborate on how you arrived at this conclusion?
> >> What things did you do to determine it was a problem?
> >>
> >> -Grant
> >
> > Hi Grant,
> >
> > Sure. On http://wiki.answers.com/, we use search in a variety of
> > places and ways.
> >
> > In the basic search box (what you get if you look stuff up in the main
> > Ask box on the home page), we generally want the relevancy matching to
> > be pretty fuzzy. For example, if the user looked up "Where can you see
> > photos of the Aurora Borealis effect?" I would still want to show them
> > "Where can you see photos of the Aurora Borealis?" as a match.
> >
> > However, the advanced search page,
> > http://wiki.answers.com/Q/Special:Search, is used by advanced users to
> > filter questions by various facets and searches, and to them it is
> > important for the filter to filter out non-matches, since they use it
> > as a working page. For example, if they want to do a search for "Harry
> > Potter" and classify all results into the "Harry Potter" category, it
> > is important that not every match for "Harry" is returned.
>
> I'm curious, Avi, if you can share how you came to these conclusions?  For
> instance, did you have any qualitative evidence that "fuzzy" was better for
> the main page?  Or was it a "I know it when I see it" kind of thing.
>

I guess it was an "I know it when I see it" kind of thing. But it is
supported by evidence from our testing team and direct feedback from users.
I guess one could say that the difference is less in level of user
sophistication (though that is part of it), and more in user expectation
when using different input methods of search.

Our home page encourages asking questions in natural language, and therefore
search based on that query is going to need to be "fuzzier" than a strict
match of all the terms.

-- Avi

--000e0cd13bcaf9279c0485db7c58--

From java-user-return-46034-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 05 16:58:43 2010
Return-Path: <java-user-return-46034-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82795 invoked from network); 5 May 2010 16:58:43 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 May 2010 16:58:43 -0000
Received: (qmail 42273 invoked by uid 500); 5 May 2010 16:58:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42236 invoked by uid 500); 5 May 2010 16:58:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42228 invoked by uid 99); 5 May 2010 16:58:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 May 2010 16:58:40 +0000
X-ASF-Spam-Status: No, hits=-1.3 required=10.0
	tests=AWL,FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jose.aguera@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 May 2010 16:58:36 +0000
Received: by fxm16 with SMTP id 16so4344404fxm.35
        for <java-user@lucene.apache.org>; Wed, 05 May 2010 09:58:15 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        bh=bAUlpykcLUqpEhTop+44OpTr1qLtZY2vWosvWsGkr0k=;
        b=N1QrH904+KfHZ0aSW/jye91uXwBAjldu/G7N2PM7+SGGT9Sk12R5OqFPcZZ6BQrQpc
         jtWkvuan/PzKO/IPEBXvGOZHUx7EN4EEzSjEd4WYjWQsVnLYBPSfDgLn8NjdEKAFsHCv
         +4fZUZVimD6i8Pg7z1qstNNg42bidIPw3GOlA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=WypR165OgTNJzQxU+y9ZjtbzCPoeZL75YpfNFQZQDRvrqDbawRQTixKeX8DDO/k8jm
         btpTpUxjYTeNEhg4XgXsQDK7nJR/lCpBJ7EQOVKdvha/BFOw6VDViw8k8qIKWvk8Y6In
         wLebbjd4frlc3JfGTluUP16pCrq8Rq30H/fcQ=
MIME-Version: 1.0
Received: by 10.223.24.5 with SMTP id t5mr5643486fab.72.1273078695127; Wed, 05 
	May 2010 09:58:15 -0700 (PDT)
Received: by 10.223.117.210 with HTTP; Wed, 5 May 2010 09:58:15 -0700 (PDT)
Date: Wed, 5 May 2010 12:58:15 -0400
Message-ID: <l2y9ab5344d1005050958kd7c63781h8a90229c85a08bb1@mail.gmail.com>
Subject: problem in Lucene's ranking function
From: =?ISO-8859-1?Q?Jos=E9_Ram=F3n_P=E9rez_Ag=FCera?= <jose.aguera@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hi all,

We realize that there is a bug in Lucene's ranking function. Most
ranking functions, use a non-linear method to saturate the computation
of the frequencies.
This is due to the fact that the information gained on observing a
term the first time is greater than the information gained on
subsequently seeing the same term. The non-linear method can be as
simple as a logarithmic or a square-root function or more complex
parameter-based approaches like BM25 k1 parameter. S. Robertson 2004
http://portal.acm.org/citation.cfm?id=3D1031181 has described the
dangers to combine scores from different document fields and what are
the most tipical errors when ranking functions are modified to
consider the structure of the documents.

To rank these structured documents, Lucene combines the scores from
document fields. The method used by Lucene to compute the score of an
structured document is based on the linear combination of the scores
for each field of the document.

Lucene's ranking function uses the square root of the term frequency
to implement the non-linear method to saturate the computation of the
frequencies, but the linear combination of the scores by field to
compute the score for the whole document that Lucene implements breaks
the saturation effect, since field's boost factors are applied after
of non-linear methods are used. The consequence is that a document
matching a single query term over several fields could score much
higher than a document matching several query terms in one field only,
which is not a good way to compute relevance and use to hurt
dramatically ranking function performance.

We have written a paper where this problem is described and some
experiments are carried out to show the effect in Lucene performance.
http://km.aifb.kit.edu/ws/semsearch10/Files/bm25f.pdf

It would be possible to fix this problem to have Lucene working
properly for structured documents?

thank you very much in advance

jose

--=20
Jose R. P=E9rez-Ag=FCera

Clinical Assistant Professor
Metadata Research Center
School of Information and Library Science
University of North Carolina at Chapel Hill
email: jaguera@email.unc.edu
Web page: http://www.unc.edu/~jaguera/
MRC website: http://ils.unc.edu/mrc/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46035-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 05 17:39:25 2010
Return-Path: <java-user-return-46035-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91615 invoked from network); 5 May 2010 17:39:25 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 May 2010 17:39:25 -0000
Received: (qmail 10141 invoked by uid 500); 5 May 2010 17:39:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10114 invoked by uid 500); 5 May 2010 17:39:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10106 invoked by uid 99); 5 May 2010 17:39:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 May 2010 17:39:22 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=AWL,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 209.85.218.211 as permitted sender)
Received: from [209.85.218.211] (HELO mail-bw0-f211.google.com) (209.85.218.211)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 May 2010 17:39:18 +0000
Received: by bwz3 with SMTP id 3so2897247bwz.11
        for <java-user@lucene.apache.org>; Wed, 05 May 2010 10:38:56 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=sRHLUcFFYGc6t+dBwbkwEXoEaZSwqI/dRIChLN6KRGk=;
        b=V40pb/nBmxtLCdXHTx8O688lh/Jh5Qgde+ZEW5OKUwmcLOQ4N9ccVvfT2M8IEKKHuq
         Tw6NweRgZSr4BVKcmmnECkrSeuScQJ4PtaNZvtedC+nDliv0kuWUDZKOxQNpwMYsVf6c
         2BMZxQXEmUny5DnUoY4G8gaIpVi14ID785Joo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=rMT9mDxek6Oofas6TSrIl0bmij+8b9f09tcDoSkW5oyOrPRJypcySHopLzuBF86ICX
         oXOqOY6w3SmtqQGXJjIYIrkKzq7Y4vWBL/7ttUXaHRtYyCg9NjioCgnwbKQY6qegyd/u
         6mfbZbiww9iuOF9Of/YNTsutcCsNnubwBESyQ=
Received: by 10.204.1.136 with SMTP id 8mr7143306bkf.92.1273081136557; Wed, 05 
	May 2010 10:38:56 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.58.136 with HTTP; Wed, 5 May 2010 10:38:36 -0700 (PDT)
In-Reply-To: <l2y9ab5344d1005050958kd7c63781h8a90229c85a08bb1@mail.gmail.com>
References: <l2y9ab5344d1005050958kd7c63781h8a90229c85a08bb1@mail.gmail.com>
From: Robert Muir <rcmuir@gmail.com>
Date: Wed, 5 May 2010 13:38:36 -0400
Message-ID: <k2r8f0ad1f31005051038t9779f7c9nded3d2a001026b7b@mail.gmail.com>
Subject: Re: problem in Lucene's ranking function
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00151750e832ea30c80485dc4cc2

--00151750e832ea30c80485dc4cc2
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Jos=C3=A9, you might want to watch LUCENE-2392.

In this issue, we are proposing adding additional flexibility to the scorin=
g
mechanism including:
* controlling scoring on a per-field basis
* the ability to compute and use aggregate statistics (average field length=
,
total TF across all docs)
* fine-grained calculation of the score: essentially at the end of the day
if you want, you can implement score() in your Similarity and do whatever
you want, so things like tf() and idf() as methods "go away" in that they
might not even make sense for your scorer. So, SimilarityProvider in this
model gets the flexibility of Scorer hopefully without the hassles.

As far as combining scores across fields, I do not see why
2010/5/5 Jos=C3=A9 Ram=C3=B3n P=C3=A9rez Ag=C3=BCera <jose.aguera@gmail.com=
>

> Hi all,
>
> We realize that there is a bug in Lucene's ranking function. Most
> ranking functions, use a non-linear method to saturate the computation
> of the frequencies.
> This is due to the fact that the information gained on observing a
> term the first time is greater than the information gained on
> subsequently seeing the same term. The non-linear method can be as
> simple as a logarithmic or a square-root function or more complex
> parameter-based approaches like BM25 k1 parameter. S. Robertson 2004
> http://portal.acm.org/citation.cfm?id=3D1031181 has described the
> dangers to combine scores from different document fields and what are
> the most tipical errors when ranking functions are modified to
> consider the structure of the documents.
>
> To rank these structured documents, Lucene combines the scores from
> document fields. The method used by Lucene to compute the score of an
> structured document is based on the linear combination of the scores
> for each field of the document.
>
> Lucene's ranking function uses the square root of the term frequency
> to implement the non-linear method to saturate the computation of the
> frequencies, but the linear combination of the scores by field to
> compute the score for the whole document that Lucene implements breaks
> the saturation effect, since field's boost factors are applied after
> of non-linear methods are used. The consequence is that a document
> matching a single query term over several fields could score much
> higher than a document matching several query terms in one field only,
> which is not a good way to compute relevance and use to hurt
> dramatically ranking function performance.
>
> We have written a paper where this problem is described and some
> experiments are carried out to show the effect in Lucene performance.
> http://km.aifb.kit.edu/ws/semsearch10/Files/bm25f.pdf
>
> It would be possible to fix this problem to have Lucene working
> properly for structured documents?
>
> thank you very much in advance
>
> jose
>
> --
> Jose R. P=C3=A9rez-Ag=C3=BCera
>
> Clinical Assistant Professor
> Metadata Research Center
> School of Information and Library Science
> University of North Carolina at Chapel Hill
> email: jaguera@email.unc.edu
> Web page: http://www.unc.edu/~jaguera/
> MRC website: http://ils.unc.edu/mrc/
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
Robert Muir
rcmuir@gmail.com

--00151750e832ea30c80485dc4cc2--

From java-user-return-46036-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 05 17:55:53 2010
Return-Path: <java-user-return-46036-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96603 invoked from network); 5 May 2010 17:55:53 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 May 2010 17:55:53 -0000
Received: (qmail 32597 invoked by uid 500); 5 May 2010 17:55:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32566 invoked by uid 500); 5 May 2010 17:55:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32558 invoked by uid 99); 5 May 2010 17:55:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 May 2010 17:55:50 +0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLY,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jose.aguera@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 May 2010 17:55:44 +0000
Received: by fxm16 with SMTP id 16so4391841fxm.35
        for <java-user@lucene.apache.org>; Wed, 05 May 2010 10:55:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=yeLHlXjrnPJ5JsKKxooZ1gi2b2Gh7e8AgYDpnrUv0Vw=;
        b=DzGU9LG9XbNdslGLG5vJpLQ2HXBad2MqMsyNTflZiuAjKHDCpGqxQ+JPw3CK4S23Cs
         HdPHvhp/78KvOTEOC4F5QOQ2jWrvlirDCtRuVD56LlPbqLkG8AfsRXjm/IM70mPq66qH
         AYCELC0nqbzkwbKpUXXz5I1gmY7a+vn2SYH04=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=SyUeHCOFP/f1QRXmIWbhe+mb1LIdjmmVFD5TNxtYt0VDnjF57iXKB8tZFIZVDg0q9p
         eOR+cW5FU/5zs9tcMjOeA+GDZfTjjoQfl5YYCqMdyE/HL0vL4N8tJlYvh4QDmbIR7iJT
         5mgHRdxNAZjG0px6f5kdtHj7eL490jjuN2wOs=
MIME-Version: 1.0
Received: by 10.223.99.78 with SMTP id t14mr5704278fan.85.1273082124550; Wed, 
	05 May 2010 10:55:24 -0700 (PDT)
Received: by 10.223.117.210 with HTTP; Wed, 5 May 2010 10:55:24 -0700 (PDT)
In-Reply-To: <k2r8f0ad1f31005051038t9779f7c9nded3d2a001026b7b@mail.gmail.com>
References: <l2y9ab5344d1005050958kd7c63781h8a90229c85a08bb1@mail.gmail.com>
	 <k2r8f0ad1f31005051038t9779f7c9nded3d2a001026b7b@mail.gmail.com>
Date: Wed, 5 May 2010 13:55:24 -0400
Message-ID: <z2n9ab5344d1005051055pf3d56d87vd9c3c445b6fe0d59@mail.gmail.com>
Subject: Re: problem in Lucene's ranking function
From: =?ISO-8859-1?Q?Jos=E9_Ram=F3n_P=E9rez_Ag=FCera?= <jose.aguera@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Robert,

thank you very much for your quick response, I have a couple of questions,

did you read the papers that I mention in my e-mail?
do you think that Lucene ranking function could have this problem?

My concern is not about how to implement different kind of ranking
functions for Lucene, I know that you are doing a very nice work to
implement a very flexible ranking framework for Lucene, my concern is
about a bug, which is independent of the ranking function that you are
using and which appears whether some kind of saturation function is
used in combination with a linear combination of fields for structured
documents.

Maybe I'm wrong, but if the linear combination of fields remains in
lucene ranking function core, Lucene is never going to work properly
to compute the score for structured documents.

I know how to solve the problem, and we have our own implementation of
BM25F for Lucene which performance is much better that standard
Lucene's ranking function, but I think that would be useful for other
Lucene users to know what is the problem to deal with structured
documents, and how to fix this problem for the next version,
independently what ranking function is finally implemented for Lucene.

jose

On Wed, May 5, 2010 at 1:38 PM, Robert Muir <rcmuir@gmail.com> wrote:
> Jos=E9, you might want to watch LUCENE-2392.
>
> In this issue, we are proposing adding additional flexibility to the scor=
ing
> mechanism including:
> * controlling scoring on a per-field basis
> * the ability to compute and use aggregate statistics (average field leng=
th,
> total TF across all docs)
> * fine-grained calculation of the score: essentially at the end of the da=
y
> if you want, you can implement score() in your Similarity and do whatever
> you want, so things like tf() and idf() as methods "go away" in that they
> might not even make sense for your scorer. So, SimilarityProvider in this
> model gets the flexibility of Scorer hopefully without the hassles.
>
> As far as combining scores across fields, I do not see why
> 2010/5/5 Jos=E9 Ram=F3n P=E9rez Ag=FCera <jose.aguera@gmail.com>
>
>> Hi all,
>>
>> We realize that there is a bug in Lucene's ranking function. Most
>> ranking functions, use a non-linear method to saturate the computation
>> of the frequencies.
>> This is due to the fact that the information gained on observing a
>> term the first time is greater than the information gained on
>> subsequently seeing the same term. The non-linear method can be as
>> simple as a logarithmic or a square-root function or more complex
>> parameter-based approaches like BM25 k1 parameter. S. Robertson 2004
>> http://portal.acm.org/citation.cfm?id=3D1031181 has described the
>> dangers to combine scores from different document fields and what are
>> the most tipical errors when ranking functions are modified to
>> consider the structure of the documents.
>>
>> To rank these structured documents, Lucene combines the scores from
>> document fields. The method used by Lucene to compute the score of an
>> structured document is based on the linear combination of the scores
>> for each field of the document.
>>
>> Lucene's ranking function uses the square root of the term frequency
>> to implement the non-linear method to saturate the computation of the
>> frequencies, but the linear combination of the scores by field to
>> compute the score for the whole document that Lucene implements breaks
>> the saturation effect, since field's boost factors are applied after
>> of non-linear methods are used. The consequence is that a document
>> matching a single query term over several fields could score much
>> higher than a document matching several query terms in one field only,
>> which is not a good way to compute relevance and use to hurt
>> dramatically ranking function performance.
>>
>> We have written a paper where this problem is described and some
>> experiments are carried out to show the effect in Lucene performance.
>> http://km.aifb.kit.edu/ws/semsearch10/Files/bm25f.pdf
>>
>> It would be possible to fix this problem to have Lucene working
>> properly for structured documents?
>>
>> thank you very much in advance
>>
>> jose
>>
>> --
>> Jose R. P=E9rez-Ag=FCera
>>
>> Clinical Assistant Professor
>> Metadata Research Center
>> School of Information and Library Science
>> University of North Carolina at Chapel Hill
>> email: jaguera@email.unc.edu
>> Web page: http://www.unc.edu/~jaguera/
>> MRC website: http://ils.unc.edu/mrc/
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> --
> Robert Muir
> rcmuir@gmail.com
>



--=20
Jose R. P=E9rez-Ag=FCera

Clinical Assistant Professor
Metadata Research Center
School of Information and Library Science
University of North Carolina at Chapel Hill
email: jaguera@email.unc.edu
Web page: http://www.unc.edu/~jaguera/
MRC website: http://ils.unc.edu/mrc/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46037-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 05 18:13:41 2010
Return-Path: <java-user-return-46037-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1942 invoked from network); 5 May 2010 18:13:41 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 May 2010 18:13:41 -0000
Received: (qmail 53486 invoked by uid 500); 5 May 2010 18:13:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53450 invoked by uid 500); 5 May 2010 18:13:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53442 invoked by uid 99); 5 May 2010 18:13:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 May 2010 18:13:38 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rcmuir@gmail.com designates 209.85.218.211 as permitted sender)
Received: from [209.85.218.211] (HELO mail-bw0-f211.google.com) (209.85.218.211)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 May 2010 18:13:31 +0000
Received: by bwz3 with SMTP id 3so2918325bwz.11
        for <java-user@lucene.apache.org>; Wed, 05 May 2010 11:13:11 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=yNnDmchl/GIfYSVSdG9s+OzRqa4+IiFGzyv7YpugOs8=;
        b=LeA+QRX1+wuXb2AbYcMhAIPiEs3BvVE9Pf/IZ1FSX+drVTSyX1nLAN9M5vUBnyAN9x
         VvPT1WZGfCUQxUEi28ptldZjBoa00CM3MG3QyCmFkzd7Nyzw2fK/S7zBpplDDaLDBUY2
         txyov0MyzxTR3zpWv0lnkunOIYQxM/kwHfOp4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=ESFlwAFf2G3FMR+MEZpJz/iFZW47DQ5gFxn7PPuflKvJTsTOfJnDlDIa4SDqci8F13
         T06U4ZRGtQzeTA9IaTzWBBuBMruYngpcIuNCWAhXKaAtQ1bbQ334jRiVjrjGYAlIZ9ao
         0tSL4ddqd8pPLQp8aXWrE0+9NREwD2aJlYEmM=
Received: by 10.204.36.199 with SMTP id u7mr5673978bkd.212.1273083191116; Wed, 
	05 May 2010 11:13:11 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.58.136 with HTTP; Wed, 5 May 2010 11:12:51 -0700 (PDT)
In-Reply-To: <z2n9ab5344d1005051055pf3d56d87vd9c3c445b6fe0d59@mail.gmail.com>
References: <l2y9ab5344d1005050958kd7c63781h8a90229c85a08bb1@mail.gmail.com> 
	<k2r8f0ad1f31005051038t9779f7c9nded3d2a001026b7b@mail.gmail.com> 
	<z2n9ab5344d1005051055pf3d56d87vd9c3c445b6fe0d59@mail.gmail.com>
From: Robert Muir <rcmuir@gmail.com>
Date: Wed, 5 May 2010 14:12:51 -0400
Message-ID: <z2y8f0ad1f31005051112x79ae034dl49b1f95056a3fab7@mail.gmail.com>
Subject: Re: problem in Lucene's ranking function
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00032555850a6044c20485dcc7b4
X-Virus-Checked: Checked by ClamAV on apache.org

--00032555850a6044c20485dcc7b4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

2010/5/5 Jos=C3=A9 Ram=C3=B3n P=C3=A9rez Ag=C3=BCera <jose.aguera@gmail.com=
>

> Hi Robert,
>
> thank you very much for your quick response, I have a couple of questions=
,
>
> did you read the papers that I mention in my e-mail?
>

Yes.


> do you think that Lucene ranking function could have this problem?
>
>
I know it does.


> My concern is not about how to implement different kind of ranking
> functions for Lucene, I know that you are doing a very nice work to
> implement a very flexible ranking framework for Lucene, my concern is
> about a bug, which is independent of the ranking function that you are
> using and which appears whether some kind of saturation function is
> used in combination with a linear combination of fields for structured
> documents.
>

I think we might disagree here though. Must 'the combining of scores from
different fields' must be hardcoded to one simple solution, or should it be
something that you can control yourself?

For example, it appears Terrier implements something different for this
problem, not the paper you referenced but a different technique?:
http://terrier.org/docs/v3.0/javadoc/org/terrier/matching/models/BM25F.html=
 But
I don't quite understand all the subleties involved... it seems in this
other paper there is still a linear combination, but you introduce
additional per-field parameters.

The thing that makes me nervous about "hardcoding/changing" the way that
scores are combined across fields is that Lucene presents some strange
peculiarities, most notably the ability to use different scoring models for
different fields. This in fact already exists today, if you "omitTF" for on=
e
field but not for another, you are using a different scoring model for the
two fields.


> Maybe I'm wrong, but if the linear combination of fields remains in
> lucene ranking function core, Lucene is never going to work properly
> to compute the score for structured documents.
>

I wouldn't say never, maybe we will not get there in the first go, but
hopefully at least you will be able to do the things i mentioned above, suc=
h
as using different similarities for different fields, including ones that
are not supported today.


>
> I know how to solve the problem, and we have our own implementation of
> BM25F for Lucene which performance is much better that standard
> Lucene's ranking function, but I think that would be useful for other
> Lucene users to know what is the problem to deal with structured
> documents, and how to fix this problem for the next version,
> independently what ranking function is finally implemented for Lucene.
>
>
It would be great if you could help us on that issue (I know the patch is a
bit out of date), to try to fix the scoring APIs, including perhaps thinkin=
g
about how to improve search across multiple fields for structured documents=
.

In my opinion, I would like to see the situation evolve away from "which
ranking function is implemented for Lucene" instead to having a variety of
built-in functions you can choose from.

So, I would rather it be more like Analyzers, where we have a variety of
high-quality implementations available, and you can make your own if you
must, but there is no real default.

--=20
Robert Muir
rcmuir@gmail.com

--00032555850a6044c20485dcc7b4--

From java-user-return-46038-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 05 18:52:43 2010
Return-Path: <java-user-return-46038-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15535 invoked from network); 5 May 2010 18:52:43 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 May 2010 18:52:43 -0000
Received: (qmail 91498 invoked by uid 500); 5 May 2010 18:52:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91427 invoked by uid 500); 5 May 2010 18:52:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91419 invoked by uid 99); 5 May 2010 18:52:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 May 2010 18:52:41 +0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLY,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jose.aguera@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 May 2010 18:52:34 +0000
Received: by fxm16 with SMTP id 16so4436044fxm.35
        for <java-user@lucene.apache.org>; Wed, 05 May 2010 11:52:14 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=3UTJCMdJzyI/opbX421qZsrI2v/5pIe1q4Bvm+8GBSo=;
        b=oU09/ou+xq/NJ0q84V4ImjbtQLu6MIZ2YeRK2eTc3kxixfN7QSyphJ/e5H6BVjPGDU
         aWofXwg2bpY+qpzW43sWo6CoofTB7fGIGrYVViEWnSMrjfV0Sv1HhbqRF9Gi8LytAMCD
         lRYbFa/M8XQHzNFV23erfd1IarQ0uCCVqtUHU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=HX67z1VSXNrYXtqu9HPN9NsQRw/z9DxZ3QuIpLj4z2ZJRw9pcDXVqZsGhL8TLNpCe/
         jTU/MH5lIpkJjaq2newlj+Rx8bMO0oESefXuMxq6g8TULIrhAHal6A9P5FvFwJuMseBF
         INV5mB0jYKpC17JsTrjExmTzbIYE0aEWhOq54=
MIME-Version: 1.0
Received: by 10.223.27.151 with SMTP id i23mr5789684fac.104.1273085534333; 
	Wed, 05 May 2010 11:52:14 -0700 (PDT)
Received: by 10.223.117.210 with HTTP; Wed, 5 May 2010 11:52:14 -0700 (PDT)
In-Reply-To: <z2y8f0ad1f31005051112x79ae034dl49b1f95056a3fab7@mail.gmail.com>
References: <l2y9ab5344d1005050958kd7c63781h8a90229c85a08bb1@mail.gmail.com>
	 <k2r8f0ad1f31005051038t9779f7c9nded3d2a001026b7b@mail.gmail.com>
	 <z2n9ab5344d1005051055pf3d56d87vd9c3c445b6fe0d59@mail.gmail.com>
	 <z2y8f0ad1f31005051112x79ae034dl49b1f95056a3fab7@mail.gmail.com>
Date: Wed, 5 May 2010 14:52:14 -0400
Message-ID: <y2z9ab5344d1005051152r95e46393n4d25703f23481667@mail.gmail.com>
Subject: Re: problem in Lucene's ranking function
From: =?ISO-8859-1?Q?Jos=E9_Ram=F3n_P=E9rez_Ag=FCera?= <jose.aguera@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Robert,

the problem is not the linear combination of fields, the problem is to
apply the boost factor per field after the term frequency saturation
function and then make the linear combination of fields. Every system
that implement BM25F, including terrier, take care of that, because if
you don't do it you have a bug in your ranking function and not just a
different ranking function.

It is very easy solve the problem in the current Lucene ranking
function, just move the boost factor per field inside the term
frequency square root, that's all. If you implement this little
change, Lucene ranking fucntion will work properly with structured
documents and all your other concerns about allowing users to
implement different ranking functions for different situations will be
not affected by this change.

I really appreciate your work to improve Lucene ranking function, and
your time to response this emails :-)

best

jose

On Wed, May 5, 2010 at 2:12 PM, Robert Muir <rcmuir@gmail.com> wrote:
> 2010/5/5 Jos=E9 Ram=F3n P=E9rez Ag=FCera <jose.aguera@gmail.com>
>
>> Hi Robert,
>>
>> thank you very much for your quick response, I have a couple of question=
s,
>>
>> did you read the papers that I mention in my e-mail?
>>
>
> Yes.
>
>
>> do you think that Lucene ranking function could have this problem?
>>
>>
> I know it does.
>
>
>> My concern is not about how to implement different kind of ranking
>> functions for Lucene, I know that you are doing a very nice work to
>> implement a very flexible ranking framework for Lucene, my concern is
>> about a bug, which is independent of the ranking function that you are
>> using and which appears whether some kind of saturation function is
>> used in combination with a linear combination of fields for structured
>> documents.
>>
>
> I think we might disagree here though. Must 'the combining of scores from
> different fields' must be hardcoded to one simple solution, or should it =
be
> something that you can control yourself?
>
> For example, it appears Terrier implements something different for this
> problem, not the paper you referenced but a different technique?:
> http://terrier.org/docs/v3.0/javadoc/org/terrier/matching/models/BM25F.ht=
ml But
> I don't quite understand all the subleties involved... it seems in this
> other paper there is still a linear combination, but you introduce
> additional per-field parameters.
>
> The thing that makes me nervous about "hardcoding/changing" the way that
> scores are combined across fields is that Lucene presents some strange
> peculiarities, most notably the ability to use different scoring models f=
or
> different fields. This in fact already exists today, if you "omitTF" for =
one
> field but not for another, you are using a different scoring model for th=
e
> two fields.
>
>
>> Maybe I'm wrong, but if the linear combination of fields remains in
>> lucene ranking function core, Lucene is never going to work properly
>> to compute the score for structured documents.
>>
>
> I wouldn't say never, maybe we will not get there in the first go, but
> hopefully at least you will be able to do the things i mentioned above, s=
uch
> as using different similarities for different fields, including ones that
> are not supported today.
>
>
>>
>> I know how to solve the problem, and we have our own implementation of
>> BM25F for Lucene which performance is much better that standard
>> Lucene's ranking function, but I think that would be useful for other
>> Lucene users to know what is the problem to deal with structured
>> documents, and how to fix this problem for the next version,
>> independently what ranking function is finally implemented for Lucene.
>>
>>
> It would be great if you could help us on that issue (I know the patch is=
 a
> bit out of date), to try to fix the scoring APIs, including perhaps think=
ing
> about how to improve search across multiple fields for structured documen=
ts.
>
> In my opinion, I would like to see the situation evolve away from "which
> ranking function is implemented for Lucene" instead to having a variety o=
f
> built-in functions you can choose from.
>
> So, I would rather it be more like Analyzers, where we have a variety of
> high-quality implementations available, and you can make your own if you
> must, but there is no real default.
>
> --
> Robert Muir
> rcmuir@gmail.com
>



--=20
Jose R. P=E9rez-Ag=FCera

Clinical Assistant Professor
Metadata Research Center
School of Information and Library Science
University of North Carolina at Chapel Hill
email: jaguera@email.unc.edu
Web page: http://www.unc.edu/~jaguera/
MRC website: http://ils.unc.edu/mrc/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46039-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 05 19:10:53 2010
Return-Path: <java-user-return-46039-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19092 invoked from network); 5 May 2010 19:10:53 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 May 2010 19:10:53 -0000
Received: (qmail 17638 invoked by uid 500); 5 May 2010 19:10:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17598 invoked by uid 500); 5 May 2010 19:10:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17590 invoked by uid 99); 5 May 2010 19:10:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 May 2010 19:10:51 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=AWL,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 209.85.218.211 as permitted sender)
Received: from [209.85.218.211] (HELO mail-bw0-f211.google.com) (209.85.218.211)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 May 2010 19:10:44 +0000
Received: by bwz3 with SMTP id 3so2952801bwz.11
        for <java-user@lucene.apache.org>; Wed, 05 May 2010 12:10:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=tuPJbYLQhPAs7qZN6Q5TaWWmZVM7LRxMQJtS2JrxeNc=;
        b=TPZLbCqBKyR9vjzEOZGGDkgIUXP38Uaqzg4AeMbNDz6Gqp1NE2z4YyGav1ZtlG2qG/
         /xFd6zrlJGEcmEcNmFCANYyz4Ta5N/ZD/WUITYqAt/zNuJ2LpPq/cNH1pYdOEQ4M/48r
         Zf/KRpBBi/dQpXRoIssXzCkun3Maw8RXmovc4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=VPh2p2q5ZQ2cW3Brtbnjh5hKRSbEC5pNV5ZCeDGEXs0of1ESsSSm3pSMDFy+h20pEp
         f1A5Dj7ctANDza503SEN3ktBJ87tzbgay1RbKkErPluHpAyIJn41FPXwmQH5uHgTSy/s
         XWufSsc/qNrpoR2C9PQ9c5yBBSqDsX1F5/jxg=
Received: by 10.204.74.98 with SMTP id t34mr2445538bkj.154.1273086623177; Wed, 
	05 May 2010 12:10:23 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.58.136 with HTTP; Wed, 5 May 2010 12:10:03 -0700 (PDT)
In-Reply-To: <y2z9ab5344d1005051152r95e46393n4d25703f23481667@mail.gmail.com>
References: <l2y9ab5344d1005050958kd7c63781h8a90229c85a08bb1@mail.gmail.com> 
	<k2r8f0ad1f31005051038t9779f7c9nded3d2a001026b7b@mail.gmail.com> 
	<z2n9ab5344d1005051055pf3d56d87vd9c3c445b6fe0d59@mail.gmail.com> 
	<z2y8f0ad1f31005051112x79ae034dl49b1f95056a3fab7@mail.gmail.com> 
	<y2z9ab5344d1005051152r95e46393n4d25703f23481667@mail.gmail.com>
From: Robert Muir <rcmuir@gmail.com>
Date: Wed, 5 May 2010 15:10:03 -0400
Message-ID: <o2t8f0ad1f31005051210h88cb4ea5j807c5331e99a3034@mail.gmail.com>
Subject: Re: problem in Lucene's ranking function
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d77dacf15a7b0485dd930e

--0016e6d77dacf15a7b0485dd930e
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

2010/5/5 Jos=C3=A9 Ram=C3=B3n P=C3=A9rez Ag=C3=BCera <jose.aguera@gmail.com=
>

> Hi Robert,
>
> the problem is not the linear combination of fields, the problem is to
> apply the boost factor per field after the term frequency saturation
> function and then make the linear combination of fields. Every system
> that implement BM25F, including terrier, take care of that, because if
> you don't do it you have a bug in your ranking function and not just a
> different ranking function.
>

Jos=C3=A9, well then this should not be much of a problem to handle in
LUCENE-2392, because as I mentioned, if you have a tf() or idf() its really
because you decided to do this yourself. So you could easily apply the boos=
t
inside your log or sqrt or whatever, if you want.

But what I propose we do, is make sure the relevance functions we provide
(especially any default for 4.0) take care of this for your structured case=
,
while still providing the capability for someone to get the old behavior
[see below]


> If you implement this little
> change, Lucene ranking fucntion will work properly with structured
> documents and all your other concerns about allowing users to
> implement different ranking functions for different situations will be
> not affected by this change.
>
>
Well, I'm not sure all my concerns go away! I think its best to implement a
change like this in the flexible scoring framework (LUCENE-2392), so that
users, if they want, can get the old behavior: "the bug" as you call it.

The reason I say this due to the unique cases of lucene, some people are
doing scoring in very crazy ways and if they aren't able to get the old
behavior with regards to boosting, they might be upset... even if it is
really giving them worse relevance...

--=20
Robert Muir
rcmuir@gmail.com

--0016e6d77dacf15a7b0485dd930e--

From java-user-return-46040-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 05 20:01:21 2010
Return-Path: <java-user-return-46040-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29412 invoked from network); 5 May 2010 20:01:21 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 May 2010 20:01:21 -0000
Received: (qmail 82650 invoked by uid 500); 5 May 2010 20:01:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82617 invoked by uid 500); 5 May 2010 20:01:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82609 invoked by uid 99); 5 May 2010 20:01:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 May 2010 20:01:18 +0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=AWL,FREEMAIL_FROM,FREEMAIL_REPLY,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jose.aguera@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 May 2010 20:01:13 +0000
Received: by fxm16 with SMTP id 16so4489043fxm.35
        for <java-user@lucene.apache.org>; Wed, 05 May 2010 13:00:52 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=oW6vghG9hmhpWSVXzXE/pSZnLnKsBRY5M9XJdZxNJIs=;
        b=heP0OWT/DhQFgMiMUrg+EMgm4Mer5v7jfUl0gaDxR9NR6rIGO+VnC9hKlyf9uVAsf+
         JsBwUqBmgK1Zj++k0O4OdZm4fznZKOSL6f0oe7do0BrNqP6gNbydEDKl1e1RfiWd0v40
         5NnoINJLbvccB5DiIdTWcw+JGU5GRdeDCIUu0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=kjDzpMPMcKv9ql8wb5r278fPKmV4aLrxnKetYZezPVxDv/Tmff30edndfKtKcDkPLm
         JSD6erWqjeso34UpluI/L8MwWQxGIktuXh/pRDEyemSFLKRgaEFSLJB7xjfPqlkJNknz
         SV6igRRkARNJJmaLte9fYbKUf/bg72hi5Hs5I=
MIME-Version: 1.0
Received: by 10.223.20.216 with SMTP id g24mr5818067fab.63.1273089652627; Wed, 
	05 May 2010 13:00:52 -0700 (PDT)
Received: by 10.223.117.210 with HTTP; Wed, 5 May 2010 13:00:52 -0700 (PDT)
In-Reply-To: <o2t8f0ad1f31005051210h88cb4ea5j807c5331e99a3034@mail.gmail.com>
References: <l2y9ab5344d1005050958kd7c63781h8a90229c85a08bb1@mail.gmail.com>
	 <k2r8f0ad1f31005051038t9779f7c9nded3d2a001026b7b@mail.gmail.com>
	 <z2n9ab5344d1005051055pf3d56d87vd9c3c445b6fe0d59@mail.gmail.com>
	 <z2y8f0ad1f31005051112x79ae034dl49b1f95056a3fab7@mail.gmail.com>
	 <y2z9ab5344d1005051152r95e46393n4d25703f23481667@mail.gmail.com>
	 <o2t8f0ad1f31005051210h88cb4ea5j807c5331e99a3034@mail.gmail.com>
Date: Wed, 5 May 2010 16:00:52 -0400
Message-ID: <q2u9ab5344d1005051300z73195d20t2c72948800066dc5@mail.gmail.com>
Subject: Re: problem in Lucene's ranking function
From: =?ISO-8859-1?Q?Jos=E9_Ram=F3n_P=E9rez_Ag=FCera?= <jose.aguera@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hi Robert,

I will be very happy to see this problem fixed :-) I can not image
what reasons people have to use software with bugs, I guess that
others bugs in lucene are removed. Anyway, if finally you are going to
fix the problem, these are good news :-) thank you very much for your
time.

jose

On Wed, May 5, 2010 at 3:10 PM, Robert Muir <rcmuir@gmail.com> wrote:
> 2010/5/5 Jos=E9 Ram=F3n P=E9rez Ag=FCera <jose.aguera@gmail.com>
>
>> Hi Robert,
>>
>> the problem is not the linear combination of fields, the problem is to
>> apply the boost factor per field after the term frequency saturation
>> function and then make the linear combination of fields. Every system
>> that implement BM25F, including terrier, take care of that, because if
>> you don't do it you have a bug in your ranking function and not just a
>> different ranking function.
>>
>
> Jos=E9, well then this should not be much of a problem to handle in
> LUCENE-2392, because as I mentioned, if you have a tf() or idf() its real=
ly
> because you decided to do this yourself. So you could easily apply the bo=
ost
> inside your log or sqrt or whatever, if you want.
>
> But what I propose we do, is make sure the relevance functions we provide
> (especially any default for 4.0) take care of this for your structured ca=
se,
> while still providing the capability for someone to get the old behavior
> [see below]
>
>
>> If you implement this little
>> change, Lucene ranking fucntion will work properly with structured
>> documents and all your other concerns about allowing users to
>> implement different ranking functions for different situations will be
>> not affected by this change.
>>
>>
> Well, I'm not sure all my concerns go away! I think its best to implement=
 a
> change like this in the flexible scoring framework (LUCENE-2392), so that
> users, if they want, can get the old behavior: "the bug" as you call it.
>
> The reason I say this due to the unique cases of lucene, some people are
> doing scoring in very crazy ways and if they aren't able to get the old
> behavior with regards to boosting, they might be upset... even if it is
> really giving them worse relevance...
>
> --
> Robert Muir
> rcmuir@gmail.com
>



--=20
Jose R. P=E9rez-Ag=FCera

Clinical Assistant Professor
Metadata Research Center
School of Information and Library Science
University of North Carolina at Chapel Hill
email: jaguera@email.unc.edu
Web page: http://www.unc.edu/~jaguera/
MRC website: http://ils.unc.edu/mrc/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46041-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 05 20:12:18 2010
Return-Path: <java-user-return-46041-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32563 invoked from network); 5 May 2010 20:12:17 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 May 2010 20:12:17 -0000
Received: (qmail 2274 invoked by uid 500); 5 May 2010 20:12:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2246 invoked by uid 500); 5 May 2010 20:12:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2238 invoked by uid 99); 5 May 2010 20:12:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 May 2010 20:12:15 +0000
X-ASF-Spam-Status: No, hits=-0.5 required=10.0
	tests=AWL,FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 May 2010 20:12:09 +0000
Received: by wyb34 with SMTP id 34so941984wyb.35
        for <java-user@lucene.apache.org>; Wed, 05 May 2010 13:11:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:sender:reply-to:received
         :in-reply-to:references:date:x-google-sender-auth:message-id:subject
         :from:to:content-type:content-transfer-encoding;
        bh=mOvv7tIv1YlU0kVsXQAwqVcLHVJ63ImLGk94a+6d3zg=;
        b=a+lUD9xXD0kzsXU/XDBpOh5rSMk2pLM7wjdW5QMT8Ak9g5H73HhX9JVimq81hhYnt9
         RMdZoc8+WqJ34+3xarp/BusRJwsb+vbfnR5RG10qvMY6mn9q4ndkFs60VESZaDP8E+Qq
         rjT8YQMVXKrYbkReR1zCumDzhdy3zStiae6Js=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:reply-to:in-reply-to:references:date
         :x-google-sender-auth:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=lDKj/mPhK0C1XB7ZOhPUSQ8l+YAYb4POfT6PbwUwNwjq6mMDgb9PW0F5BtGpDKMVlz
         GqfLRTn2uYaJf1wXa5LQBYXKTCTG1UnyFZa9Yh6ZiwJBf9vB9fy+AfZtQyF0GUZGeihp
         PxlC8qVmkkNa+FsMIer7MGopjHx7Mb68e8Wa0=
MIME-Version: 1.0
Received: by 10.216.86.20 with SMTP id v20mr3242054wee.122.1273090306266; Wed, 
	05 May 2010 13:11:46 -0700 (PDT)
Sender: yseeley@gmail.com
Reply-To: yonik@lucidimagination.com
Received: by 10.216.22.140 with HTTP; Wed, 5 May 2010 13:11:46 -0700 (PDT)
In-Reply-To: <l2y9ab5344d1005050958kd7c63781h8a90229c85a08bb1@mail.gmail.com>
References: <l2y9ab5344d1005050958kd7c63781h8a90229c85a08bb1@mail.gmail.com>
Date: Wed, 5 May 2010 16:11:46 -0400
X-Google-Sender-Auth: 5f5590604bd16aae
Message-ID: <m2pc68e39171005051311ub183a55fo5b34392cb3f857d7@mail.gmail.com>
Subject: Re: problem in Lucene's ranking function
From: Yonik Seeley <yonik@lucidimagination.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

2010/5/5 Jos=E9 Ram=F3n P=E9rez Ag=FCera <jose.aguera@gmail.com>:
[...]
> The consequence is that a document
> matching a single query term over several fields could score much
> higher than a document matching several query terms in one field only,

One partial workaround that people use is DisjunctionMaxQuery (used by
"dismax" query parser in Solr).
http://lucene.apache.org/java/2_0_0/api/org/apache/lucene/search/Disjunctio=
nMaxQuery.html

-Yonik
Apache Lucene Eurocon 2010
18-21 May 2010 | Prague

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46042-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 06 01:42:50 2010
Return-Path: <java-user-return-46042-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98797 invoked from network); 6 May 2010 01:42:49 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 6 May 2010 01:42:49 -0000
Received: (qmail 64380 invoked by uid 500); 6 May 2010 01:42:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64338 invoked by uid 500); 6 May 2010 01:42:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64330 invoked by uid 99); 6 May 2010 01:42:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 May 2010 01:42:47 +0000
X-ASF-Spam-Status: No, hits=-0.5 required=10.0
	tests=AWL,MIME_BASE64_BLANKS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of zhitian.zhang@dianping.com designates 114.80.162.48 as permitted sender)
Received: from [114.80.162.48] (HELO mail.dianping.com) (114.80.162.48)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 06 May 2010 01:42:42 +0000
Received: from techzhangzht ([61.152.173.114])
	(envelope-sender <zhitian.zhang@dianping.com>)
	by 114.80.162.48 with ESMTP
	for <java-user@lucene.apache.org>; Thu, 06 May 2010 09:42:14 +0800
Message-ID: <BBFC49E9129640CA8698649848E7166E@techzhangzht>
From: =?gb2312?B?1cXWvszv?= <zhitian.zhang@dianping.com>
To: <java-user@lucene.apache.org>
References: <FCDE1AE6109442EEA67D8E959B71A05C@techzhangzht> <D7206503EB5BE94497458AF4FE4AE8AB01B9AFB8@owamz.healy-hudson.com> <2EA2D6FCAAE34B6D8FB43D0050D47087@techzhangzht> <l2v9ac0c6aa1005050524la0f638bem660ec1f203fe5e97@mail.gmail.com>
Subject: Re: How can I merge .cfx and .cfs into a single cfs file?
Date: Thu, 6 May 2010 09:42:49 +0800
MIME-Version: 1.0
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: base64
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.3790.4548
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4325

VGhhbmsgeW91IE1pa2UuDQoNCkdhcnJ5DQotLS0tLSBPcmlnaW5hbCBNZXNzYWdlIC0tLS0tIA0K
RnJvbTogIk1pY2hhZWwgTWNDYW5kbGVzcyIgPGx1Y2VuZUBtaWtlbWNjYW5kbGVzcy5jb20+DQpU
bzogPGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZz4NClNlbnQ6IFdlZG5lc2RheSwgTWF5IDA1
LCAyMDEwIDg6MjQgUE0NClN1YmplY3Q6IFJlOiBIb3cgY2FuIEkgbWVyZ2UgLmNmeCBhbmQgLmNm
cyBpbnRvIGEgc2luZ2xlIGNmcyBmaWxlPw0KDQoNCkx1Y2VuZSBjb25zaWRlcnMgYW4gaW5kZXgg
d2l0aCBhIHNpbmdsZSAuY2Z4IGFuZCBhIHNpbmdsZSAuY2ZzIGFzIG9wdGltaXplZC4NCg0KQWxz
bywgbm90ZSB0aGF0IGhvdyBMdWNlbmUgc3RvcmVzIGZpbGVzIGluIHRoZSBpbmRleCBpcyBhbiBp
bXBsIGRldGFpbA0KLS0gaXQgY2FuIGNoYW5nZSBmcm9tIHJlbGVhc2UgdG8gcmVsZWFzZSAtLSBz
byByZWx5aW5nIG9uIGFueSBvZiB0aGVzZQ0KZGV0YWlscyBpcyBkYW5nZXJvdXMuDQoNClRoYXQg
c2FpZCwgd2l0aCByZWNlbnQgTHVjZW5lIHZlcnNpb25zLCBpZiB5b3UgcmVhbGx5IHdhbnQgdG8g
Zm9yY2UNCnRoZXNlIHR3byBmaWxlcyB0byBiZSBjb25zb2xpZGF0ZWQsIHlvdSBjYW4gbWFrZSBh
IGN1c3RvbSBNZXJnZVBvbGljeQ0KdGhhdCByZXR1cm5zIGEgbWVyZ2UgZnJvbSB0aGUgZmluZE1l
cmdlc0Zvck9wdGltaXplIGZvciB0aGlzIGNhc2UgKHRoZQ0KZGVmYXVsdCBNZXJnZVBvbGljeSBy
ZXR1cm5zIG51bGwgc2luY2UgaXQgdGhpbmtzIHRoaXMgY2FzZSBpcyBhbHJlYWR5DQpvcHRpbWl6
ZWQpLg0KDQpPci4uLiBpZiB5b3UgaW5kZXggd2l0aCB0d28gc2VwYXJhdGUgSW5kZXhXcml0ZXIg
c2Vzc2lvbnMsIGFuZCB0aGVuDQpjYWxsIG9wdGltaXplLCB0aGF0IHNob3VsZCBhbHNvIG1lcmdl
IGRvd24gdG8gb25lIGZpbGUuDQoNCk1pa2UNCg0KMjAxMC81LzUg1cXWvszvIDx6aGl0aWFuLnpo
YW5nQGRpYW5waW5nLmNvbT46DQo+IFV3ZSwgdGhhbmsgeW91IHZlcnkgbXVjaC4NCj4NCj4gV2hh
dCBpcyB0aGUgbWVjaGFuaXptIGx1Y2VuZSB3aWxsIG1lcmdlIHRoZXNlIHR3byBraW5kcyBvZiBm
aWxlcz8gU29tZXRpbWVzIEkgZm91bmQgdGhlcmUgd2FzIG9ubHkgb25lIC5jZnMgZmlsZSwgYnV0
IGluIGFub3RoZXIgdGltZSB0aGVyZSBtYXkgYmUgb25lIGNmcyBhbmQgY2Z4LiBJIHVuZGVyc3Rh
bmQgdGhlIC5jZnggaXMgdXNlZCB0byBzdG9yZSB0aGUgdGVybSB2ZWN0b3JzIGV0YywgYnV0IHdo
eSBkb2VzIHRoZSBpbmRleCByZXN1bHQgbm90IHNlZW0gdG8gYmUgY29uc2lzdGVudD8NCj4NCj4g
VGhhbmtzLA0KPiBHYXJyeQ0KPiAtLS0tLSBPcmlnaW5hbCBNZXNzYWdlIC0tLS0tDQo+IEZyb206
ICJVd2UgR29ldHprZSIgPHV3ZS5nb2V0emtlQGhlYWx5LWh1ZHNvbi5jb20+DQo+IFRvOiA8amF2
YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnPg0KPiBTZW50OiBXZWRuZXNkYXksIE1heSAwNSwgMjAx
MCAzOjU3IFBNDQo+IFN1YmplY3Q6IEFXOiBIb3cgY2FuIEkgbWVyZ2UgLmNmeCBhbmQgLmNmcyBp
bnRvIGEgc2luZ2xlIGNmcyBmaWxlPw0KPg0KPg0KPiBJbmRleCBhbGwgaW50byBhIGRpcmVjdG9y
eSBhbmQgZGV0ZXJtaW5lIHRoZSBzaXplIG9mIGFsbCBmaWxlcyBpbiBpdC4NCj4NCj4gRnJvbSBo
dHRwOi8vbHVjZW5lLmFwYWNoZS5vcmcvamF2YS8zXzBfMS9maWxlZm9ybWF0cy5odG1sDQo+IFN0
YXJ0aW5nIHdpdGggTHVjZW5lIDIuMywgZG9jIHN0b3JlIGZpbGVzIChzdG9yZWQgZmllbGQgdmFs
dWVzIGFuZCB0ZXJtIHZlY3RvcnMpIGNhbiBiZSBzaGFyZWQgaW4gYSBzaW5nbGUgc2V0IG9mIGZp
bGVzIGZvciBtb3JlIHRoYW4gb25lIHNlZ21lbnQuIFdoZW4gY29tcG91bmQgZmlsZSBpcyBlbmFi
bGVkLCB0aGVzZSBzaGFyZWQgZmlsZXMgd2lsbCBiZSBhZGRlZCBpbnRvIGEgc2luZ2xlIGNvbXBv
dW5kIGZpbGUgKHNhbWUgZm9ybWF0IGFzIGFib3ZlKSBidXQgd2l0aCB0aGUgZXh0ZW5zaW9uIC5j
ZnguDQo+DQo+IEluIGFkZGl0aW9uIHRvDQo+IENvbXBvdW5kIEZpbGUgIC5jZnMgIEFuIG9wdGlv
bmFsICJ2aXJ0dWFsIiBmaWxlIGNvbnNpc3Rpbmcgb2YgYWxsIHRoZSBvdGhlciBpbmRleCBmaWxl
cyBmb3Igc3lzdGVtcyB0aGF0IGZyZXF1ZW50bHkgcnVuIG91dCBvZiBmaWxlIGhhbmRsZXMuDQo+
DQo+IFV3ZQ0KPg0KPg0KPiAtLS0tLVVyc3ByqLluZ2xpY2hlIE5hY2hyaWNodC0tLS0tDQo+IFZv
bjog1cXWvszvIFttYWlsdG86emhpdGlhbi56aGFuZ0BkaWFucGluZy5jb21dDQo+IEdlc2VuZGV0
OiBNaXR0d29jaCwgNS4gTWFpIDIwMTAgMDg6MjQNCj4gQW46IGphdmEtdXNlckBsdWNlbmUuYXBh
Y2hlLm9yZw0KPiBCZXRyZWZmOiBIb3cgY2FuIEkgbWVyZ2UgLmNmeCBhbmQgLmNmcyBpbnRvIGEg
c2luZ2xlIGNmcyBmaWxlPw0KPg0KPiBIaSBhbGwsDQo+DQo+IEkgaGF2ZSBhbiBpbmRleCB0YXNr
IHdoaWNoIHdpbGwgaW5kZXggdGhvdXNhbmRzIG9mIHJlY29yZHMgd2l0aCBsdWNlbmUgMy4wLjEu
IE15IGNvbmZ1c2lvbiBpcyBsdWNlbmUgd2lsbCBhbHdheXMgY3JlYXRlIGEgLmNmeCBhbmQgYSAu
Y2ZzIGZpbGUgaW4gdGhlIGZpbGUgc3lzdGVtLCBzb21ldGltZXMgbW9yZSwgd2hpbGUgSSB0aG91
Z2h0IGl0IHNob3VsZCBjcmVhdGUgYSBzaW5nbGUgLmNmcyBmaWxlIGlmIEkgb3B0aW1pemUgdGhl
IGluZGV4IGRhdGEuIElzIGl0IGJ5IGRlc2lnbj8gSWYgeWVzLCBpcyB0aGVyZSBhbnkgd2F5L2Nv
bmZpZ3VyYXRpb24gSSBjYW4gZG8gdG8gbWVyZ2UgYWxsIG9mIHRoZSBpbmRleCBmaWxlcyBpbnRv
IGEgc2luZ2Ugb25lPw0KPg0KPiBCeSB0aGUgd2F5LCBJIGhhdmUgYSBsb2dpYyB0byB2YWxpZGF0
ZSB0aGUgaW5kZXggZGF0YSwgaWYgdGhlIHNpemUgb2YgLmNmcyBpbmNyZWFzZXMgZHJhbWF0aWNh
bGx5IGNvbXBhcmluZyB0byB0aGUgZmlsZSBnZW5lcmF0ZWQgbGFzdCB0aW1lLCB0aGVyZSBtYXkg
YmUgc29tZXRoaW5nIHdyb25nLCBhIHdhcm5pbmcgbWVzc2FnZSB3aWxsIGJlIHRocmV3LiBUaGlz
IGlzIHRoZSByZWFzb24gdGhhdCBJIHdhbnQgdG8gZ2VuZXJhdGUgYSBzaW5nbGUgLmNmcyBmaWxl
LiBBbnkgb3RoZXIgc3VnZ2VzdGlvbiBhYm91dCB0aGUgaW5kZXggdmFsaWRhdGlvbj8NCj4NCj4g
QW55IGJvZHkgY2FuIGdpdmUgbWUgYSBoYW5kPw0KPg0KPiBUaGFua3MgaW4gYWR2YW5jZS4NCj4N
Cj4gR2FycnkNCj4NCj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQo+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGph
dmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZw0KPiBGb3IgYWRkaXRpb25hbCBj
b21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZw0KPg0KDQot
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0NClRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmli
ZUBsdWNlbmUuYXBhY2hlLm9yZw0KRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2
YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcNCg==



From java-user-return-46043-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 06 02:53:42 2010
Return-Path: <java-user-return-46043-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8952 invoked from network); 6 May 2010 02:53:42 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 6 May 2010 02:53:42 -0000
Received: (qmail 97700 invoked by uid 500); 6 May 2010 02:53:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97568 invoked by uid 500); 6 May 2010 02:53:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97560 invoked by uid 99); 6 May 2010 02:53:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 May 2010 02:53:40 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of javacache@gmail.com designates 209.85.221.180 as permitted sender)
Received: from [209.85.221.180] (HELO mail-qy0-f180.google.com) (209.85.221.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 May 2010 02:53:33 +0000
Received: by qyk10 with SMTP id 10so472109qyk.11
        for <java-user@lucene.apache.org>; Wed, 05 May 2010 19:53:12 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=yqleL/y6z5LrOYzXekQxLEM2/AyxUOpZBYWn1qy+6XU=;
        b=GDzfMMaK4cR0H4+tWgcIep2+a5mO9CXZRAKFbGO6RvTmlH5Z4Rz1XfddyZwJQGzaKO
         TSDAtPlW5BlVNgLOFkwhQrKiGQnRHuHKGfl7tCJo6l4t+RTMgNe1lJFzmvx12fu3WJRe
         hVpNuhsHRKotFXVZLzrKVyGN1LmY1C16Iinvg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=eNVz1OeikDhFojztwfB6oOKZX5FXHKbeajcLyTLKAqVAQ1K6O5PB7v3lol0m2FnFIh
         ZzbfDV8orhq5VFCNaPYXgrutsN6aCAehdcNlsPw7NN8Hq5Vu4RBMfSmnQ6LII3adFHe6
         g32/xlkBD3vvdexw0vmC1M+YPOL/QBTVJoXhk=
MIME-Version: 1.0
Received: by 10.229.96.80 with SMTP id g16mr4869320qcn.85.1273114392236; Wed, 
	05 May 2010 19:53:12 -0700 (PDT)
Received: by 10.229.99.199 with HTTP; Wed, 5 May 2010 19:53:12 -0700 (PDT)
In-Reply-To: <y2w8c4e68611005050150nbbd61e44w3f804663ccdfed70@mail.gmail.com>
References: <q2gbd236a1005030321gd9f4506fy7b5136a05afb9263@mail.gmail.com>
	 <p2mbd236a1005040213k7e5a4035w387c2ad906d54129@mail.gmail.com>
	 <m2m8c4e68611005040631qbd7d0693v2787f50bc915d0c3@mail.gmail.com>
	 <s2ubd236a1005042117wd8e12f41i18e0fda2aa6604cd@mail.gmail.com>
	 <y2w8c4e68611005050150nbbd61e44w3f804663ccdfed70@mail.gmail.com>
Date: Thu, 6 May 2010 10:53:12 +0800
Message-ID: <i2n738ff0911005051953k6c2c42f2u94effcdb71a050ae@mail.gmail.com>
Subject: Re: Using IndexReader in the web environment
From: Ivan Liu <javacache@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016364edc141b914d0485e40b86
X-Virus-Checked: Checked by ClamAV on apache.org

--0016364edc141b914d0485e40b86
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: quoted-printable

You may look this:
private static IndexSearcher indexSearcher =3D null;

 public synchronized IndexSearcher newIndexSearcher() {
  try {

   if (null =3D=3D indexSearcher) {
    Directory directory =3D FSDirectory.open(new
File(Config.DB_DIR+"/rssindex"));
    indexSearcher =3D new IndexSearcher(IndexReader.open(directory, true));
   } else {
    IndexReader indexReader =3D indexSearcher.getIndexReader();
    IndexReader newIndexReader =3D indexReader.reopen();//reopen old
indexReader
    if (newIndexReader!=3DindexReader) {
     indexReader.close();
     indexSearcher.close();


     indexSearcher =3D new IndexSearcher(newIndexReader);
    }
   }
   return indexSearcher;
  } catch (CorruptIndexException e) {
   log.error(e.getMessage(),e);
   return null;
  } catch (IOException e) {
   log.error(e.getMessage(),e);
   return null;
  }
 }



--=20
=B3=E5=C0=CB=B0=E5

my blog:http://chonglangban.appspot.com/
my site:http://kejiblog.appspot.com/

--0016364edc141b914d0485e40b86--

From java-user-return-46044-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 06 10:40:34 2010
Return-Path: <java-user-return-46044-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96532 invoked from network); 6 May 2010 10:40:34 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 6 May 2010 10:40:34 -0000
Received: (qmail 275 invoked by uid 500); 6 May 2010 10:40:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99938 invoked by uid 500); 6 May 2010 10:40:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99930 invoked by uid 99); 6 May 2010 10:40:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 May 2010 10:40:27 +0000
X-ASF-Spam-Status: No, hits=4.4 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of manjula53@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 May 2010 10:40:19 +0000
Received: by pwi2 with SMTP id 2so3008871pwi.35
        for <java-user@lucene.apache.org>; Thu, 06 May 2010 03:39:58 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=Fvyu9MuB4EHumNZ4IKS1igxINqScySOVueitX6FtNUU=;
        b=EVoLWzawT9gJ3UnLrncH+jYR2Qi6yn6lU3bWVqlBcxbzxIXrEONuOZaoHBgxQCk90c
         OmNIrNJV7cnKoAtbkxUJ+h5ewPsf7V7sYtmcATS0N7GQYpe9ygjPNSNfU/pTSpaeipwS
         kOs45Se3n5vTZszWwcT6CwbGeSe8vAYLVIGAc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=kYTKofGTJ9A6r94ziF6WAfUMupimM6jk4wim+KLa1sEJy17bECEDzBxqR2XRXtrHMQ
         rkSoUX5KVVQaB5K0XAYFN/RwnHI776BTGIU0oNVSg6grummMiIglS2IBFbmAlwurAfZX
         c7h0j5pqXKkcUy7zzI75Tc3LDjGNOfjtyhCtk=
MIME-Version: 1.0
Received: by 10.140.251.11 with SMTP id y11mr6582171rvh.279.1273142398139; 
	Thu, 06 May 2010 03:39:58 -0700 (PDT)
Received: by 10.140.147.1 with HTTP; Thu, 6 May 2010 03:39:58 -0700 (PDT)
Date: Thu, 6 May 2010 16:09:58 +0530
Message-ID: <u2id1412c691005060339z3203ac4bo3466d0e96940fa3f@mail.gmail.com>
Subject: Term/Phrase frequencies
From: manjula wijewickrema <manjula53@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd112ba63bd4a0485ea905f
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd112ba63bd4a0485ea905f
Content-Type: text/plain; charset=ISO-8859-1

Hi,

I am new to Lucene. If I want to know the term or phrase frequency of an
input document, will it be possible through Lucene?

Thanks,
Manjula

--000e0cd112ba63bd4a0485ea905f--

From java-user-return-46045-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 06 12:40:24 2010
Return-Path: <java-user-return-46045-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25769 invoked from network); 6 May 2010 12:40:23 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 6 May 2010 12:40:23 -0000
Received: (qmail 71723 invoked by uid 500); 6 May 2010 12:40:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71594 invoked by uid 500); 6 May 2010 12:40:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71586 invoked by uid 99); 6 May 2010 12:40:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 May 2010 12:40:20 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.210.187 as permitted sender)
Received: from [209.85.210.187] (HELO mail-yx0-f187.google.com) (209.85.210.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 May 2010 12:40:13 +0000
Received: by yxe17 with SMTP id 17so2781728yxe.20
        for <java-user@lucene.apache.org>; Thu, 06 May 2010 05:39:52 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=w4TqItZUgQ+8IsRY/5kaW+1LLBHMdfCRMtXn6Q1i11g=;
        b=m8TfNwfHiTk7OHVQvGpt6xW4Ea86j7zaMjf5f2DhMnpogxeiq7gjjyTdE1u0ZbGRmb
         TtnJLnJ/tzDDax0fI/ApV44eHMTPFW843u4lI2PpGIeN+kiBMRfHi/6w89NOr3hQF6uk
         psOkvowUGlht2/eJJqunIGXp6JifR7MQL0o38=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=kjsXOXDmvUierbul91W5HSYFFqySjQPDQdghKeYciVH1bvotdrTAw1g0LX/7F3xasl
         GO4m/itIccfiG35qZC0aZbML53i1I464Oa2JvivciFMD4o4z6wggl1JEfOt3HYJKsSIP
         9Ku0ikckSVMXsO/K+dvXxLPtZSH/f9ZglwpGs=
MIME-Version: 1.0
Received: by 10.150.188.18 with SMTP id l18mr1491106ybf.166.1273149591482; 
	Thu, 06 May 2010 05:39:51 -0700 (PDT)
Received: by 10.151.43.7 with HTTP; Thu, 6 May 2010 05:39:51 -0700 (PDT)
In-Reply-To: <u2id1412c691005060339z3203ac4bo3466d0e96940fa3f@mail.gmail.com>
References: <u2id1412c691005060339z3203ac4bo3466d0e96940fa3f@mail.gmail.com>
Date: Thu, 6 May 2010 08:39:51 -0400
Message-ID: <y2u359a92831005060539m68de5599g340458c30c65dd35@mail.gmail.com>
Subject: Re: Term/Phrase frequencies
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd6eca42571680485ec3d67
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd6eca42571680485ec3d67
Content-Type: text/plain; charset=ISO-8859-1

Terms are relatively easy, see TermFreqVector in the JavaDocs.

Phrases aren't as easy, before you go there, though, what is the
high-level problem you're trying to solve? Possibly this is an XY problem
(see http://people.apache.org/~hossman/#xyproblem).

Best
Erick

On Thu, May 6, 2010 at 6:39 AM, manjula wijewickrema <manjula53@gmail.com>wrote:

> Hi,
>
> I am new to Lucene. If I want to know the term or phrase frequency of an
> input document, will it be possible through Lucene?
>
> Thanks,
> Manjula
>

--000e0cd6eca42571680485ec3d67--

From java-user-return-46046-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 06 17:03:48 2010
Return-Path: <java-user-return-46046-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93064 invoked from network); 6 May 2010 17:03:48 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 6 May 2010 17:03:48 -0000
Received: (qmail 11597 invoked by uid 500); 6 May 2010 17:03:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11550 invoked by uid 500); 6 May 2010 17:03:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11542 invoked by uid 99); 6 May 2010 17:03:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 May 2010 17:03:45 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=SPF_PASS,URIBL_RED
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [198.147.195.5] (HELO flicker.bmc.com) (198.147.195.5)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 06 May 2010 17:03:38 +0000
Received: by flicker.bmc.com (Postfix, from userid 13749)
	id 3AB7D1E6D2F; Thu,  6 May 2010 10:03:17 -0700 (MST)
Received: from PHX-HTPRD-02.adprod.bmc.com (phx-htprd-02.adprod.bmc.com [172.24.32.8])
	by flicker.bmc.com (Postfix) with ESMTP id 29D301E6D1B
	for <java-user@lucene.apache.org>; Thu,  6 May 2010 10:03:17 -0700 (MST)
Received: from PHXCCRPRD02.adprod.bmc.com ([172.24.32.181]) by
 PHX-HTPRD-02.adprod.bmc.com ([172.24.32.8]) with mapi; Thu, 6 May 2010
 12:03:17 -0500
From: "Woolf, Ross" <Ross_Woolf@BMC.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Thu, 6 May 2010 12:03:04 -0500
Subject: RE: IndexWriter and memory usage
Thread-Topic: IndexWriter and memory usage
Thread-Index: Acrn16o9lOk1bLm0RMmXiUWzljjDNQFW+QBg
Message-ID: <492379B6AA909E4FAF672AACCA0EADC25CC106250D@PHXCCRPRD02.adprod.bmc.com>
References: <492379B6AA909E4FAF672AACCA0EADC24A40EE9B10@PHXCCRPRD02.adprod.bmc.com>
	 <g2k87c998321004122119q6d68fedbv58be2327ae042eae@mail.gmail.com>
	 <492379B6AA909E4FAF672AACCA0EADC25CBAA42B46@PHXCCRPRD02.adprod.bmc.com>
	 <492379B6AA909E4FAF672AACCA0EADC25CBAA42E77@PHXCCRPRD02.adprod.bmc.com>
	 <o2y9ac0c6aa1004140312wc3c74ffdp57158f871761cdda@mail.gmail.com>
	 <492379B6AA909E4FAF672AACCA0EADC25CBABBED4D@PHXCCRPRD02.adprod.bmc.com>
	 <n2w9ac0c6aa1004141352s5edb3082o2f1952626c551450@mail.gmail.com>
	 <492379B6AA909E4FAF672AACCA0EADC25CC066FD36@PHXCCRPRD02.adprod.bmc.com>
	 <i2i9ac0c6aa1004270340heec28687zc734ebfbbae10bd3@mail.gmail.com>
	 <492379B6AA909E4FAF672AACCA0EADC25CC09D6A1A@PHXCCRPRD02.adprod.bmc.com>
 <v2k9ac0c6aa1004291307z9aa93222y7512e27808eeb9db@mail.gmail.com>
In-Reply-To: <v2k9ac0c6aa1004291307z9aa93222y7512e27808eeb9db@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
x-cr-hashedpuzzle: ACiZ DUiq DVAI DjN+ FHFb FQ72 F1k3 GI+4 GQib Hs2G JaxL
 KIy1 KNe7 Knpa K02W
 LFPC;1;agBhAHYAYQAtAHUAcwBlAHIAQABsAHUAYwBlAG4AZQAuAGEAcABhAGMAaABlAC4AbwByAGcA;Sosha1_v1;7;{9E809534-DA08-4E66-8504-7CEDAF9A9081};cgBvAHMAcwBfAHcAbwBvAGwAZgBAAGIAbQBjAC4AYwBvAG0A;Thu,
 06 May 2010 17:03:05
 GMT;UgBFADoAIABJAG4AZABlAHgAVwByAGkAdABlAHIAIABhAG4AZAAgAG0AZQBtAG8AcgB5ACAAdQBzAGEAZwBlAA==
x-cr-puzzleid: {9E809534-DA08-4E66-8504-7CEDAF9A9081}
acceptlanguage: en-US
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

Sorry to be so long in getting back on this. The patch you provided has imp=
roved the situation but we are still seeing some memory loss.  The followin=
g are some images from the heap dump.  I'll share with you what we are seei=
ng now.

This first image shows the memory pattern.  Our fist commit takes place at =
about 3:54 when the steady trend up takes a drop and the new cycle begins. =
  What we have found is the 2422 fix has made the memory in the first phase=
 before the commit much better (and I'm sure throughout the entire run).  B=
ut as you can see after the commit then we then again begin to lose memory.=
  One of the pieces of info to know about this is what you are seeing, we h=
ave 5 threads that are pushing data to our Lucene plugin.  If we drop it do=
wn to 1 thread then we are much more successful and can actually index all =
of our data without running out of memory but at 5 threads it gets into tro=
uble.  We still see a trend up in memory usage, but not as severe as when w=
e use the multiple threads.
http://tinypic.com/view.php?pic=3D2w6bf68&s=3D5

There is another piece of the picture that I think might be coming into pla=
y.  We have plugged Lucene into a legacy app and are subject to how we can =
get it to deliver the data that we are indexing.  In some scenarios (like t=
he one we are having this problem with) we are building our documents progr=
essively (adding fields to the document through the process).  What you see=
 before the first commit is the legacy system handing us the first field fo=
r many documents. Once we have gotten all of "field 1" for all documents th=
en we commit that data into the index.  Then the system starts feeding us "=
field 2."  So we perform a search to see if the document already exists (fo=
r the scenario you are seeing it does) and so it retrieves the original doc=
ument (we store a document ID) and it then adds the new field of data to th=
e existing document and we "update" the document in the index.  After the f=
irst commit, the rest of the process is one where a document already exist =
and so the new field is added and and the document is updated.  It is in th=
is process that we start rapidly losing memory.  The following images show =
some examples of common areas where memory is being held.

http://tinypic.com/view.php?pic=3D11vkwnb&s=3D5
http://tinypic.com/view.php?pic=3Dabq9fp&s=3D5
http://tinypic.com/view.php?pic=3D25pskyp&s=3D5

As mentioned, we are subject to how we can have the legacy app feed us the =
data and so this is why we do it this way.  We treat this system as a real =
time system and at anytime the legacy system may send us a field that needs=
 to be added or updated to a document.  So we search for the document and i=
f found we either add or update a field if the field is already existing in=
 the document.  So I started to wonder if a clue in this memory loss comes =
from the fact that we are retrieving an existing document and then adding t=
o it and updating.

Now, if we eliminate the updating and simply add each item as a new documen=
t (which we did just to test but won't be adequate for our running system),=
 then we still see a slight trend upward in memory usage and the following =
images show that now most of the  memory is consumed in char[] rather than =
the byte[] we saw before.  We don't know if this is normal and expected, or=
 if it is something to be concerned about as well.

http://tinypic.com/view.php?pic=3Dvfgkyt&s=3D5

Any thoughts?

-----Original Message-----
From: Michael McCandless [mailto:lucene@mikemccandless.com]
Sent: Thursday, April 29, 2010 2:07 PM
To: java-user@lucene.apache.org
Subject: Re: IndexWriter and memory usage

OK I think you may be hitting this:

    https://issues.apache.org/jira/browse/LUCENE-2422

Since you have very large docs, the reuse that's done by
IndexInput/Output is tying up alot of memory.

Ross can you try the patch I just attached on that issue (merge it w/
the other issues) and see if that fixes it?  Thanks.

Mike

On Thu, Apr 29, 2010 at 11:58 AM, Woolf, Ross <Ross_Woolf@bmc.com> wrote:
> I ported the patch to 2.9.2 dev but it did not seem to help.  Attached is=
 my port of the patch.  This patch contains both 2283 and 2387, both of whi=
ch I have applied in trying to resolving this issue.
>
> -----Original Message-----
> From: Michael McCandless [mailto:lucene@mikemccandless.com]
> Sent: Tuesday, April 27, 2010 4:40 AM
> To: java-user@lucene.apache.org
> Subject: Re: IndexWriter and memory usage
>
> Oooh -- I suspect you are hitting this issue:
>
>    https://issues.apache.org/jira/browse/LUCENE-2283
>
> Your 3rd image ("fdt") jogged my memory on this one.  Can you try
> testing the trunk JAR from after that issue landed?  (Or, apply that
> patch against 3.0.x -- let me know if it does not apply cleanly and
> I'll try to back port it).
>
> But: it's spooky that you cannot repro this issue in your dev
> environment.  Are you matching the # thread and exact sequence of
> docs?
>
> Mike
>
> On Mon, Apr 26, 2010 at 4:14 PM, Woolf, Ross <Ross_Woolf@bmc.com> wrote:
>> We are still plagued by this issue.  I tried applying the patch mentione=
d but this did not resolve the issue.
>>
>> I once tried to attach images from the heap dump to send out to the grou=
p but the server removed them so I have posted the images on a public servi=
ce with links this time.  I would appreciate someone looking at them to see=
 if they provide any insight into what is occurring with this issue.
>>
>> When you follow the link click on the image and then once you see the im=
age click on a link in the lower left hand corner that says "View Raw Image=
."  This will let you view the images at 100% resolution.
>>
>> This first image shows what we are seeing within VisualVM in regards to =
the memory.  As you can see, over time the memory gets consumed.  Finally w=
e are at a point where there is no more memory available.
>> Graph
>> http://tinypic.com/view.php?pic=3D2ltk0h3&s=3D5
>>
>> This second image in VisualVM shows the classes sorted by size.  As you =
can see, about 70% of all memory is consumed in the bytes array.
>> Bytes
>> http://tinypic.com/view.php?pic=3Ds10mqs&s=3D5
>>
>> This third image is where the real info is.  This is where one of the by=
tes is being examined and the option to go to nearest GC is chosen.  What y=
ou see here is what the majority of the bytes show if selected, so this one=
 is representative of most all.  As you can see this one byte is associated=
 with the index writer as you look at the chain of objects (and thus so too=
 are all the other bytes that have not been released for GC).
>> Garbage Collection
>> http://tinypic.com/view.php?pic=3D5obalj&s=3D5
>>
>> I'm hoping that as you look at this that it might mean something to you =
or give you a clue as to what is holding on to all the memory.
>>
>> Now the mysterious thing in all of this is that our use of Lucene has be=
en developed into a "plug-in" that we use within an application that we hav=
e.  If I just run JUnit tests around this plugin, indexing some of the same=
 files that the actual application is indexing, I cannot ever get the memor=
y loss in my dev environment.  Everything seems to work as expected.  Howev=
er, once we are in our real situation, then we see this behavior.  Because =
of this I would expect that the problem lays with the application, but once=
 we examine the heap dumps it then goes back to showing that the consumed b=
ytes are "owned" by the index writer process.  It makes no sense to me that=
 we see this as we do, but none the less we do.  We see that the Index Writ=
er process is hanging onto a lot of data in byte arrays and it doesn't ever=
 seam to release it.
>>
>> In addition, we would love to show this to someone via a webex if that w=
ould help in seeing what is going on.
>>
>> Please, any help appreciated and any suggestions on how to resolve or ev=
en troubleshoot.  I can provide an actual heap dump but it is 63mb in size =
(compressed) so we would need to work out some FTP where we can provide it =
if someone is willing to look at it in VisualVM (or any other profiling too=
l).
>>
>> BTW - If we open and close the index writer on a regular basis then we d=
on't run into this problem.  It is only when we run continuously with an op=
en index writer that we do see this problem (we altered the code to open/cl=
ose the writer a lot, but this slows things down, so we don't want to run l=
ike this, but we wanted to test the behavior if we did so).
>>
>> Thanks,
>> Ross
>>
>> -----Original Message-----
>> From: Michael McCandless [mailto:lucene@mikemccandless.com]
>> Sent: Wednesday, April 14, 2010 2:52 PM
>> To: java-user@lucene.apache.org
>> Subject: Re: IndexWriter and memory usage
>>
>> Run this:
>>
>>    svn co https://svn.apache.org/repos/asf/lucene/java/branches/lucene_2=
_9
>> lucene.29x
>>
>> Then apply the patch, then, run "ant jar-core", and in that should
>> create the lucene-core-2.9.2-dev.jar.
>>
>> Mike
>>
>> On Wed, Apr 14, 2010 at 1:28 PM, Woolf, Ross <Ross_Woolf@bmc.com> wrote:
>>> How do I get to the 2.9.x branch?  Every link I take from the Lucene si=
te takes me to the trunk which I assume is the 3.x version.  I've tried to =
look around svn but can't find anything labeled 2.9.x.  Is there a daily bu=
ild of 2.9.x or do I need to build it myself.  I would like to try out the =
fix you put into it, but I'm not sure where I get it from.
>>>
>>> -----Original Message-----
>>> From: Michael McCandless [mailto:lucene@mikemccandless.com]
>>> Sent: Wednesday, April 14, 2010 4:12 AM
>>> To: java-user@lucene.apache.org
>>> Subject: Re: IndexWriter and memory usage
>>>
>>> It looks like the mailing list software stripped your image attachments=
...
>>>
>>> Alas these fixes are only committed on 3.1.
>>>
>>> But I just posted the patch on LUCENE-2387 for 2.9.x -- it's a tiny
>>> fix.  I think the other issue was part of LUCENE-2074 (though this
>>> issue included many other changes) -- Uwe can you peel out just a
>>> 2.9.x patch for resetting JFlex's zzBuffer?
>>>
>>> You could also try switching analyzers (eg to WhitespaceAnalyzer) to
>>> see if in fact LUCENE-2074 (which affects StandandAnalyzer, since it
>>> uses JFlex) is [part of] your problem.
>>>
>>> Mike
>>>
>>> On Tue, Apr 13, 2010 at 6:42 PM, Woolf, Ross <Ross_Woolf@bmc.com> wrote=
:
>>>> Since the heap dump was so big and can't be attached, I have taken a f=
ew screen shots from Java VisualVM of the heap dump.  In the first image yo=
u can see that at the time our memory has become very tight most of it is h=
eld up in bytes.  In the second image I examine one of those instances and =
navigate to the nearest garbage collection root.  In looking at very many o=
f these objects, they all end up being instantiated through the IndexWriter=
 process.
>>>>
>>>> This heap dump is the same one correlating to the infoStream that was =
attached in a prior message.  So while the infoStream shows the buffer bein=
g flushed, what we experience is that our memory gets consumed over time by=
 these bytes in the IndexWriter.
>>
>>>>
>>>> I wanted to provide these images to see if they might correlate to the=
 fixes mentioned below.  Hopefully those fixes mentioned below have rectifi=
ed this problem.  And as I state in the prior message, I'm hoping these fix=
es are in a 2.9x branch and hoping for someone to point me to where I can g=
et those fixes to try out.
>>>>
>>>> Thanks
>>>>
>>>> -----Original Message-----
>>>> From: Woolf, Ross [mailto:Ross_Woolf@BMC.com]
>>>> Sent: Tuesday, April 13, 2010 1:29 PM
>>>> To: java-user@lucene.apache.org
>>>> Subject: RE: IndexWriter and memory usage
>>>>
>>>> Are these fixes in 2.9x branch?  We are using 2.9x and can't move to 3=
x just yet.  If so, where do I specifically pick this up from?
>>>>
>>>> -----Original Message-----
>>>> From: Lance Norskog [mailto:goksron@gmail.com]
>>>> Sent: Monday, April 12, 2010 10:20 PM
>>>> To: java-user@lucene.apache.org
>>>> Subject: Re: IndexWriter and memory usage
>>>>
>>>> There is some bugs where the writer data structures retain data after
>>>> it is flushed. They are committed as of maybe the past week. If you
>>>> can pull the trunk and try it with your use case, that would be great.
>>>>
>>>> On Mon, Apr 12, 2010 at 8:54 AM, Woolf, Ross <Ross_Woolf@bmc.com> wrot=
e:
>>>>> I was on vacation last week so just getting back to this...  Here is =
the info stream (as an attachment).  I'll see what I can do about reducing =
the heap dump (It was supplied by a colleague).
>>>>>
>>>>>
>>>>> -----Original Message-----
>>>>> From: Michael McCandless [mailto:lucene@mikemccandless.com]
>>>>> Sent: Saturday, April 03, 2010 3:39 AM
>>>>> To: java-user@lucene.apache.org
>>>>> Subject: Re: IndexWriter and memory usage
>>>>>
>>>>> Hmm why is the heap dump so immense?  Normally it contains the top N
>>>>> (eg 100) object types and their count/aggregate RAM usage.
>>>>>
>>>>> Can you attach the infoStream output to an email (to java-user)?
>>>>>
>>>>> Mike
>>>>>
>>>>> On Fri, Apr 2, 2010 at 5:28 PM, Woolf, Ross <Ross_Woolf@bmc.com> wrot=
e:
>>>>>> I have this and the heap dump is 63mb zipped.  The info stream is mu=
ch smaller (31 kb zipped), but I don't know how to get them to you.
>>>>>>
>>>>>> We are not using the NRT readers
>>>>>>
>>>>>> -----Original Message-----
>>>>>> From: Michael McCandless [mailto:lucene@mikemccandless.com]
>>>>>> Sent: Thursday, April 01, 2010 5:21 PM
>>>>>> To: java-user@lucene.apache.org
>>>>>> Subject: Re: IndexWriter and memory usage
>>>>>>
>>>>>> Hmm, not good.  Can you post a heap dump?  Also, can you turn on
>>>>>> infoStream, index up to the OOM @ 512 MB, and post the output?
>>>>>>
>>>>>> IndexWriter should not hang onto much beyond the RAM buffer.  But, i=
t
>>>>>> does allocate and then recycle this RAM buffer, so even in an idle
>>>>>> state (having indexed enough docs to fill up the RAM buffer at least
>>>>>> once) it'll hold onto those 16 MB.
>>>>>>
>>>>>> Are you using getReader (to get your NRT readers)?  If so, are you
>>>>>> really sure you're eventually closing the previous reader after
>>>>>> opening a new one?
>>>>>>
>>>>>> Mike
>>>>>>
>>>>>> On Thu, Apr 1, 2010 at 6:58 PM, Woolf, Ross <Ross_Woolf@bmc.com> wro=
te:
>>>>>>> We are seeing a situation where the IndexWriter is using up the Jav=
a Heap space and only releases memory for garbage collection upon a commit.=
   We are using the default RAMBufferSize of 16 mb.  We are using Lucene 2.=
9.1. We are set at heap size of 512 mb.
>>>>>>>
>>>>>>> We have a large number of documents that are run through Tika and t=
hen added to the index.  The data from Tika is changed to a string, and the=
n sent to Lucene.  Heap dumps clearly show the data in the Lucene classes a=
nd not in Tika.  Our intent is to only perform a commit once the entire ind=
exing run is complete, but several hours into the process everything comes =
to a crawl.  In using both JConsole and VisualVM  we can see that the heap =
space is maxed out and garbage collection is not able to clean up any memor=
y once we get into this state.  It is our understanding that the IndexWrite=
r should be only holding onto 16 mb of data before it flushes it, but what =
we are seeing is that while it is in fact writing data to disk when it hits=
 the 16 mb limit, it is also holding onto some data in memory and not allow=
ing garbage collection to take place, and this continues until garbage coll=
ection is unable to free up enough space to all things to move faster than =
a crawl.
>>>>>>>
>>>>>>> As a test we caused a commit to occur after each document is indexe=
d and we see the total amount of memory reduced from nearly 100% of the Jav=
a Heap to around 70-75%.  The profiling tools now show that the memory is c=
leaned up to some extent after each document.  But of course this completel=
y defeats the whole reason why we want to only commit at the end of the run=
 for performance sake.  Most of the data, as seen using Heap analasis, is h=
eld in Byte, Character, and Integer classes whos GC roots are tied back to =
the Writer Objects and threads.  The instance counts, after running just 1,=
100 documents seems staggering
>>>>>>>
>>>>>>> Is there additional data that the IndexWriter hangs onto regardless=
 of when it hits the RAMBufferSize limit?  Why are we seeing the heap space=
 all being used up?
>>>>>>>
>>>>>>> A side question to this is the fact that we always see a large amou=
nt of memory used by the IndexWriter even after our indexing has been compl=
eted and all commits have taken place (basically in an idle state).  Why wo=
uld this be?  Is the only way to totally clean up the memory is to close th=
e writer?  Our index is also used for real time indexing so the IndexWriter=
 is intended to remain open for the lifetime of the app.
>>>>>>>
>>>>>>> Any help in understanding why the IndexWriter is maxing out our hea=
p space or what is expected from memory usage of the IndexWriter would be a=
ppreciated.
>>>>>>>
>>>>>>
>>>>>> --------------------------------------------------------------------=
-
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>> --------------------------------------------------------------------=
-
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>
>>>>
>>>>
>>>> --
>>>> Lance Norskog
>>>> goksron@gmail.com
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46047-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 06 21:35:12 2010
Return-Path: <java-user-return-46047-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67288 invoked from network); 6 May 2010 21:35:11 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 6 May 2010 21:35:11 -0000
Received: (qmail 42652 invoked by uid 500); 6 May 2010 21:35:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42404 invoked by uid 500); 6 May 2010 21:35:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42387 invoked by uid 99); 6 May 2010 21:35:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 May 2010 21:35:09 +0000
X-ASF-Spam-Status: No, hits=-0.3 required=10.0
	tests=AWL,FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jose.aguera@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 May 2010 21:35:04 +0000
Received: by fxm16 with SMTP id 16so339837fxm.35
        for <java-user@lucene.apache.org>; Thu, 06 May 2010 14:34:43 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=eJaJPwmjW8rTS+VbOw1Hiy0zR/HJuW6fMMr4xC6P2+s=;
        b=DFOqisWNbdJH74mREfxmT2QNHbL6pFaBQIqGty6NYr4PKC6SExfLzhARsi9KRyFO9x
         oxqwddxvH0lq7CPl0DqFBh23SNVNeLgojSFLXfN7WO2yLjJX+xRW0OAi7tid8lCgQ8Lb
         YoxOSFZW/HwKfouESuY4JdMv2G35iDmslrSds=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=UAckt5mfAuBBcT/QwDJKHbqL4jPhXqcPcRdNeY6BWch6uoDbYZL4wehIelu9jX+d6Z
         3z9VR/IPkwHZLcYACnj0AV5Z1ZLcspQkCJqaigKvu0eUllHwnuyTgk/pOWzMlYpQichW
         M7tACM0rNuxGW67MAErmj2aJ9WEk2THU2B9EY=
MIME-Version: 1.0
Received: by 10.223.16.84 with SMTP id n20mr7303934faa.94.1273181683405; Thu, 
	06 May 2010 14:34:43 -0700 (PDT)
Received: by 10.223.117.210 with HTTP; Thu, 6 May 2010 14:34:43 -0700 (PDT)
In-Reply-To: <m2pc68e39171005051311ub183a55fo5b34392cb3f857d7@mail.gmail.com>
References: <l2y9ab5344d1005050958kd7c63781h8a90229c85a08bb1@mail.gmail.com>
	 <m2pc68e39171005051311ub183a55fo5b34392cb3f857d7@mail.gmail.com>
Date: Thu, 6 May 2010 17:34:43 -0400
Message-ID: <u2h9ab5344d1005061434k1aaf748bnb3b489d66844a7f@mail.gmail.com>
Subject: Re: problem in Lucene's ranking function
From: =?ISO-8859-1?Q?Jos=E9_Ram=F3n_P=E9rez_Ag=FCera?= <jose.aguera@gmail.com>
To: java-user@lucene.apache.org, yonik@lucidimagination.com
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

thank you very much for your answer, but even trying to solve the
problem at the boolean layer, the problem remains at ranking function,
therefore the quality of the ranking would be very low, since term
frequency function is not computed properly.

jose

On Wed, May 5, 2010 at 4:11 PM, Yonik Seeley <yonik@lucidimagination.com> w=
rote:
> 2010/5/5 Jos=E9 Ram=F3n P=E9rez Ag=FCera <jose.aguera@gmail.com>:
> [...]
>> The consequence is that a document
>> matching a single query term over several fields could score much
>> higher than a document matching several query terms in one field only,
>
> One partial workaround that people use is DisjunctionMaxQuery (used by
> "dismax" query parser in Solr).
> http://lucene.apache.org/java/2_0_0/api/org/apache/lucene/search/Disjunct=
ionMaxQuery.html
>
> -Yonik
> Apache Lucene Eurocon 2010
> 18-21 May 2010 | Prague
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



--=20
Jose R. P=E9rez-Ag=FCera

Clinical Assistant Professor
Metadata Research Center
School of Information and Library Science
University of North Carolina at Chapel Hill
email: jaguera@email.unc.edu
Web page: http://www.unc.edu/~jaguera/
MRC website: http://ils.unc.edu/mrc/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46048-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 07 03:48:34 2010
Return-Path: <java-user-return-46048-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42997 invoked from network); 7 May 2010 03:48:34 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 7 May 2010 03:48:34 -0000
Received: (qmail 89871 invoked by uid 500); 7 May 2010 03:48:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89734 invoked by uid 500); 7 May 2010 03:48:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89726 invoked by uid 99); 7 May 2010 03:48:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 May 2010 03:48:28 +0000
X-ASF-Spam-Status: No, hits=3.9 required=10.0
	tests=AWL,FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of manjula53@gmail.com designates 209.85.222.180 as permitted sender)
Received: from [209.85.222.180] (HELO mail-pz0-f180.google.com) (209.85.222.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 May 2010 03:48:22 +0000
Received: by pzk10 with SMTP id 10so302235pzk.20
        for <java-user@lucene.apache.org>; Thu, 06 May 2010 20:48:02 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=303tduEGgWQSYaEFsIelTnevnxBOX/yzVvgrjwbBt7U=;
        b=I7N7sH16pMYFxhyFRZp8yfY7T1D3nraAq5zZoAmeCrkAotQI8sJcecfrhUiD2A1xAE
         /gXR9ew7r2RE20TM/1YmzsGFEBwZzCn6CNSZEHh4fqJlWJLQcSAGZ3rVPGWOYvO+HY+l
         caeVcOdczYgwcSAAT8sUGlv38t1KCInV8OXps=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=UGzpzPPmxjbCDYEUVqEBNuWr2pkr2a43X88awVWUKrekWje+5komGWOsgm38qyJJ+8
         E8PAhWun/yppw+ZhVzvolO3urACJ5UKYBy1S9bXtZ6dqTmtlgUqkBN1WNuz33MEXNUUj
         txfhWdRd0ZuOZZ/IdUIoyoDnvypUV4IMQEO9s=
MIME-Version: 1.0
Received: by 10.141.91.9 with SMTP id t9mr7313992rvl.53.1273204082176; Thu, 06 
	May 2010 20:48:02 -0700 (PDT)
Received: by 10.140.147.1 with HTTP; Thu, 6 May 2010 20:48:02 -0700 (PDT)
In-Reply-To: <y2u359a92831005060539m68de5599g340458c30c65dd35@mail.gmail.com>
References: <u2id1412c691005060339z3203ac4bo3466d0e96940fa3f@mail.gmail.com>
	 <y2u359a92831005060539m68de5599g340458c30c65dd35@mail.gmail.com>
Date: Fri, 7 May 2010 09:18:02 +0530
Message-ID: <m2vd1412c691005062048o8a0162b3nb5be439af472cb5c@mail.gmail.com>
Subject: Re: Term/Phrase frequencies
From: manjula wijewickrema <manjula53@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd110280b71ba0485f8ed15

--000e0cd110280b71ba0485f8ed15
Content-Type: text/plain; charset=ISO-8859-1

Hi Erik,

Thanks for the reply. What I want to do is, to identify key terms and key
phrases of a document according to their number of occurences in the
document. Output should be the highest freequency words and (two or three
word) phrases. For this purpose can I use Lucene?

Thanks
Manjula

On Thu, May 6, 2010 at 6:09 PM, Erick Erickson <erickerickson@gmail.com>wrote:

> Terms are relatively easy, see TermFreqVector in the JavaDocs.
>
> Phrases aren't as easy, before you go there, though, what is the
> high-level problem you're trying to solve? Possibly this is an XY problem
> (see http://people.apache.org/~hossman/#xyproblem).
>
> Best
> Erick
>
> On Thu, May 6, 2010 at 6:39 AM, manjula wijewickrema <manjula53@gmail.com
> >wrote:
>
> > Hi,
> >
> > I am new to Lucene. If I want to know the term or phrase frequency of an
> > input document, will it be possible through Lucene?
> >
> > Thanks,
> > Manjula
> >
>

--000e0cd110280b71ba0485f8ed15--

From java-user-return-46049-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 07 08:53:19 2010
Return-Path: <java-user-return-46049-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91691 invoked from network); 7 May 2010 08:53:19 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 7 May 2010 08:53:19 -0000
Received: (qmail 82549 invoked by uid 500); 7 May 2010 08:53:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82352 invoked by uid 500); 7 May 2010 08:53:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82344 invoked by uid 99); 7 May 2010 08:53:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 May 2010 08:53:16 +0000
X-ASF-Spam-Status: No, hits=4.4 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of manjula53@gmail.com designates 209.85.222.180 as permitted sender)
Received: from [209.85.222.180] (HELO mail-pz0-f180.google.com) (209.85.222.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 May 2010 08:53:08 +0000
Received: by pzk10 with SMTP id 10so390148pzk.20
        for <java-user@lucene.apache.org>; Fri, 07 May 2010 01:52:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=rfsbi4eVFuEo9ohJtGdg55hFH1Azchrek2Jfn2OVgHA=;
        b=BMXAFdO78V3bxSHhKztvthq8FV4kECxJsVqiGH3R65vkjYiTuJdD7p/V9ZnvnssCZN
         MVB61XKaXLVt5CaF5AAbLlW6lNw4Z4ZwIgLKL1TX4bnisLJihavVu0o7p7SH2lFpC/jv
         CvPbwABLtHIobo5Rgk2Mj1bO7nqklmmXD4FGo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=mpxg5roqvSQRObQjZLDaU7/jtzP6jmGBLMW8kp3B7rDXvJZJ0LfhzrsULbjz+x605N
         f3ynoiSrNcXBEbzdxrCDfylebs1hWWEq/Jcl/rjRPsYAXcpqMybxthOyGjnPNapwivnK
         bVIavmx+/iA7fk6hmUqtuBRQNDuCFnNEoiwEM=
MIME-Version: 1.0
Received: by 10.141.214.35 with SMTP id r35mr7405312rvq.264.1273222367432; 
	Fri, 07 May 2010 01:52:47 -0700 (PDT)
Received: by 10.140.147.1 with HTTP; Fri, 7 May 2010 01:52:47 -0700 (PDT)
Date: Fri, 7 May 2010 14:22:47 +0530
Message-ID: <j2zd1412c691005070152y59806e55na823988581db89b3@mail.gmail.com>
Subject: Trace only exactly matching terms!
From: manjula wijewickrema <manjula53@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd17e94ee521f0485fd2e43
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd17e94ee521f0485fd2e43
Content-Type: text/plain; charset=ISO-8859-1

Hi,

I am using Lucene 2.9.1 . I have downloaded and run the 'HelloLucene.java'
class by modifing the input document and user query in various ways. Once I
put the document sentenses as 'Lucene in actions' insted of 'Lucene in
action', and I gave the query as 'action' and run the programme. But it did
not show me the 'Lucene in action as a hit'! What is the reason for this?
Why it doesn't tackle word 'actions' as a hit? Does Lucene identify only the
exactly matching words?

Thanks
Manjula

--000e0cd17e94ee521f0485fd2e43--

From java-user-return-46050-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 07 13:08:47 2010
Return-Path: <java-user-return-46050-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37734 invoked from network); 7 May 2010 13:08:46 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 7 May 2010 13:08:46 -0000
Received: (qmail 17303 invoked by uid 500); 7 May 2010 13:08:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17242 invoked by uid 500); 7 May 2010 13:08:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17234 invoked by uid 99); 7 May 2010 13:08:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 May 2010 13:08:43 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of anshumg@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 May 2010 13:08:36 +0000
Received: by vws12 with SMTP id 12so19253vws.35
        for <java-user@lucene.apache.org>; Fri, 07 May 2010 06:08:15 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=TVpOHpTqVe/wdH6duGYN06axYDzj8/q8PkzmegnEVew=;
        b=JX22nuAJfXtpiG8iMHhFzTdCBaguVLgh6Rbh7WN98BrnNRub14P+kps1/3hDC9LFgq
         BUEsCyfFNsAiTgFvuMGuUDqqyKA7VyrpHV/E/uNBVWDqt8zdu7Uj+3i/5MiixWMMxrS3
         Jl0bG9lwOvdCemBiFedQ0Tn1gZ2AzI6aPDN9o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=hcowbfSMhuXoakKEMEsTL/1MAuixjkMw4wjnpwOHjMHvw3bgqn1Llub9DvMNe53GL8
         0CnWvFG9BxpWDV5yRhBRoV9dASBLEmLfezzd+YhzFqEWf4uAnUGSfVwujwXeHokMeEBI
         ewa/nlLlW1CyjzSG9HQa0IruN0n+M7r8RBWxU=
Received: by 10.220.107.167 with SMTP id b39mr27723vcp.16.1273237695209; Fri, 
	07 May 2010 06:08:15 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.220.80.149 with HTTP; Fri, 7 May 2010 06:07:55 -0700 (PDT)
In-Reply-To: <j2zd1412c691005070152y59806e55na823988581db89b3@mail.gmail.com>
References: <j2zd1412c691005070152y59806e55na823988581db89b3@mail.gmail.com>
From: Anshum <anshumg@gmail.com>
Date: Fri, 7 May 2010 18:37:55 +0530
Message-ID: <r2v867513fe1005070607u6d0a0176wa4a275375a591ef0@mail.gmail.com>
Subject: Re: Trace only exactly matching terms!
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00c09f8fe45089a41e048600c09a
X-Virus-Checked: Checked by ClamAV on apache.org

--00c09f8fe45089a41e048600c09a
Content-Type: text/plain; charset=ISO-8859-1

Hi Manjula,
Yes lucene by default would only tackle exact term matches unless you use a
custom analyzer to expand the index/query.

--
Anshum Gupta
http://ai-cafe.blogspot.com

The facts expressed here belong to everybody, the opinions to me. The
distinction is yours to draw............


On Fri, May 7, 2010 at 2:22 PM, manjula wijewickrema <manjula53@gmail.com>wrote:

> Hi,
>
> I am using Lucene 2.9.1 . I have downloaded and run the 'HelloLucene.java'
> class by modifing the input document and user query in various ways. Once I
> put the document sentenses as 'Lucene in actions' insted of 'Lucene in
> action', and I gave the query as 'action' and run the programme. But it did
> not show me the 'Lucene in action as a hit'! What is the reason for this?
> Why it doesn't tackle word 'actions' as a hit? Does Lucene identify only
> the
> exactly matching words?
>
> Thanks
> Manjula
>

--00c09f8fe45089a41e048600c09a--

From java-user-return-46051-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 07 14:53:35 2010
Return-Path: <java-user-return-46051-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60587 invoked from network); 7 May 2010 14:53:35 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 7 May 2010 14:53:35 -0000
Received: (qmail 19816 invoked by uid 500); 7 May 2010 14:53:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19759 invoked by uid 500); 7 May 2010 14:53:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19751 invoked by uid 99); 7 May 2010 14:53:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 May 2010 14:53:32 +0000
X-ASF-Spam-Status: No, hits=4.7 required=10.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLY,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 74.125.83.48 as permitted sender)
Received: from [74.125.83.48] (HELO mail-gw0-f48.google.com) (74.125.83.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 May 2010 14:53:24 +0000
Received: by gwj15 with SMTP id 15so783252gwj.35
        for <java-user@lucene.apache.org>; Fri, 07 May 2010 07:53:00 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=t/roBFWKyGDVEuqQt/kDt8H7nHfb5XgYbDnbevfiatA=;
        b=Ye/yDSvdMhj4BlbqNeF0X7q3foMxoS+BDyFDDXPoa5qjuF0cdE18m1qFVZWcRvKIjU
         nnZ3Z39LIq9OPEjfxqtdwhz5cFruNaLBD5mKbyDFtZflRJ5p2Jbhro/Tv4WXp1UsX7Ue
         HrJprqmQVMPFXNfS5Nygef9MXhF6eO21tiR0M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=HCKSzDSwug3wE9YSgC7BP8egvLKVplDrD+Tdm+4QMs8PoaPPBRIjGgThaiOTbNWBua
         4Pah0dqipEGGCwiG3WPb7/4w7VAJLSKrv/gr0drC2BYF1F7bh4d+XfEYEg1E6zgvW3by
         j+hRdiazMdzN9mcpRSvEfLypRYQ4vAtOHuXOE=
MIME-Version: 1.0
Received: by 10.151.59.13 with SMTP id m13mr3580787ybk.250.1273243979651; Fri, 
	07 May 2010 07:52:59 -0700 (PDT)
Received: by 10.151.43.7 with HTTP; Fri, 7 May 2010 07:52:59 -0700 (PDT)
In-Reply-To: <m2vd1412c691005062048o8a0162b3nb5be439af472cb5c@mail.gmail.com>
References: <u2id1412c691005060339z3203ac4bo3466d0e96940fa3f@mail.gmail.com>
	 <y2u359a92831005060539m68de5599g340458c30c65dd35@mail.gmail.com>
	 <m2vd1412c691005062048o8a0162b3nb5be439af472cb5c@mail.gmail.com>
Date: Fri, 7 May 2010 10:52:59 -0400
Message-ID: <v2q359a92831005070752h98daa4e0r8e40fdffcd163f9a@mail.gmail.com>
Subject: Re: Term/Phrase frequencies
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00151750e27e1eb0b404860237ab
X-Virus-Checked: Checked by ClamAV on apache.org

--00151750e27e1eb0b404860237ab
Content-Type: text/plain; charset=ISO-8859-1

Well, counting frequency isn't the best approach. For instance, if a field
has 1,000 terms and 10 occurrences of your target, is that a better match
than a field with 10 terms and 5 occurrences of your target?

This kind of thing is already taken into account with Lucene scoring, you
might
want to look at this:
http://lucene.apache.org/java/2_4_0/scoring.html

<http://lucene.apache.org/java/2_4_0/scoring.html>Best
Erick

On Thu, May 6, 2010 at 11:48 PM, manjula wijewickrema
<manjula53@gmail.com>wrote:

> Hi Erik,
>
> Thanks for the reply. What I want to do is, to identify key terms and key
> phrases of a document according to their number of occurences in the
> document. Output should be the highest freequency words and (two or three
> word) phrases. For this purpose can I use Lucene?
>
> Thanks
> Manjula
>
> On Thu, May 6, 2010 at 6:09 PM, Erick Erickson <erickerickson@gmail.com
> >wrote:
>
> > Terms are relatively easy, see TermFreqVector in the JavaDocs.
> >
> > Phrases aren't as easy, before you go there, though, what is the
> > high-level problem you're trying to solve? Possibly this is an XY problem
> > (see http://people.apache.org/~hossman/#xyproblem).
> >
> > Best
> > Erick
> >
> > On Thu, May 6, 2010 at 6:39 AM, manjula wijewickrema <
> manjula53@gmail.com
> > >wrote:
> >
> > > Hi,
> > >
> > > I am new to Lucene. If I want to know the term or phrase frequency of
> an
> > > input document, will it be possible through Lucene?
> > >
> > > Thanks,
> > > Manjula
> > >
> >
>

--00151750e27e1eb0b404860237ab--

From java-user-return-46052-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 07 14:57:59 2010
Return-Path: <java-user-return-46052-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61636 invoked from network); 7 May 2010 14:57:59 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 7 May 2010 14:57:59 -0000
Received: (qmail 32748 invoked by uid 500); 7 May 2010 14:57:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32714 invoked by uid 500); 7 May 2010 14:57:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32706 invoked by uid 99); 7 May 2010 14:57:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 May 2010 14:57:57 +0000
X-ASF-Spam-Status: No, hits=4.7 required=10.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLY,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 74.125.83.48 as permitted sender)
Received: from [74.125.83.48] (HELO mail-gw0-f48.google.com) (74.125.83.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 May 2010 14:57:49 +0000
Received: by gwj15 with SMTP id 15so787179gwj.35
        for <java-user@lucene.apache.org>; Fri, 07 May 2010 07:57:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=/52xyWF3xCuAk0ICLZCOTJ7tjm7ViN7XRceksxRMTno=;
        b=AasIKGHS+gBd+wYtW7kCgfc2C2gNZX8RoIa2va3rgJcqaNrIA/jI9l15MFwi9g+2lA
         m3mYjesRnxI4PDPQCHr2Lx7HKY5P1oAbWr2euol2NMIKQ4jsF4zWbY/ym7tyZshKFeuv
         Oi8zhKgzVeGdPuZL1K6szR/Imw1eY2VpvXwDw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=T9ncpkjbo7LaD9lhg9ZL9vUDuZBXPRxtTNDbPdN3Fa2gjAEH5AXU1rPmnoXyNgybnK
         w1TJRpPCdRM22tKRRyoDjada/suu9PRM1/qoWhJDqAGW1CaDdW7kpamL83zS582aieoq
         e8QGjKtOmW3vkXLI22whog02TeVXBo3Sq44qo=
MIME-Version: 1.0
Received: by 10.150.166.13 with SMTP id o13mr1500551ybe.370.1273244248923; 
	Fri, 07 May 2010 07:57:28 -0700 (PDT)
Received: by 10.151.43.7 with HTTP; Fri, 7 May 2010 07:57:28 -0700 (PDT)
In-Reply-To: <r2v867513fe1005070607u6d0a0176wa4a275375a591ef0@mail.gmail.com>
References: <j2zd1412c691005070152y59806e55na823988581db89b3@mail.gmail.com>
	 <r2v867513fe1005070607u6d0a0176wa4a275375a591ef0@mail.gmail.com>
Date: Fri, 7 May 2010 10:57:28 -0400
Message-ID: <s2n359a92831005070757iff2f1ee2r1071c74022b8ce24@mail.gmail.com>
Subject: Re: Trace only exactly matching terms!
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd5a1fc2b5d4504860247f1
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd5a1fc2b5d4504860247f1
Content-Type: text/plain; charset=ISO-8859-1

The other approach is to use a stemmer both at index and query time.

BTW, it's very easy to make a "custom" analyzer by chaining together
the Tokenizer and as many filters (e.g. PorterStemFilter), essentially
composing your analyzer from various pre-built Lucene parts.

HTH
Erick

On Fri, May 7, 2010 at 9:07 AM, Anshum <anshumg@gmail.com> wrote:

> Hi Manjula,
> Yes lucene by default would only tackle exact term matches unless you use a
> custom analyzer to expand the index/query.
>
> --
> Anshum Gupta
> http://ai-cafe.blogspot.com
>
> The facts expressed here belong to everybody, the opinions to me. The
> distinction is yours to draw............
>
>
> On Fri, May 7, 2010 at 2:22 PM, manjula wijewickrema <manjula53@gmail.com
> >wrote:
>
> > Hi,
> >
> > I am using Lucene 2.9.1 . I have downloaded and run the
> 'HelloLucene.java'
> > class by modifing the input document and user query in various ways. Once
> I
> > put the document sentenses as 'Lucene in actions' insted of 'Lucene in
> > action', and I gave the query as 'action' and run the programme. But it
> did
> > not show me the 'Lucene in action as a hit'! What is the reason for this?
> > Why it doesn't tackle word 'actions' as a hit? Does Lucene identify only
> > the
> > exactly matching words?
> >
> > Thanks
> > Manjula
> >
>

--000e0cd5a1fc2b5d4504860247f1--

From java-user-return-46053-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 07 17:19:59 2010
Return-Path: <java-user-return-46053-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95821 invoked from network); 7 May 2010 17:19:59 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 7 May 2010 17:19:59 -0000
Received: (qmail 76552 invoked by uid 500); 7 May 2010 17:19:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76518 invoked by uid 500); 7 May 2010 17:19:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76510 invoked by uid 99); 7 May 2010 17:19:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 May 2010 17:19:56 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of tpoljak@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 May 2010 17:19:50 +0000
Received: by fxm16 with SMTP id 16so965494fxm.35
        for <java-user@lucene.apache.org>; Fri, 07 May 2010 10:19:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:subject:from:to:content-type
         :date:message-id:mime-version:x-mailer:content-transfer-encoding;
        bh=u9NBg1nyWeM/bpsjcSpypzYbUBrmztm8iUYmtAsjlb4=;
        b=gCjx8ODmyw0sEPdmfSwx0nIpWcr4dtEuHZEBzWpGoem8sbulxyQHTtOz2ZVVNHGrJs
         nrt9A+aN+JBn+has/FYcLRhTGE9GXh9hdh1ymh6Lq8KSaYo3U+u+wgo8LfgVwk2BzhgL
         n5hTcGhwLHEobmvLN5XyUmxmJaLlGzgEVVLkE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=subject:from:to:content-type:date:message-id:mime-version:x-mailer
         :content-transfer-encoding;
        b=xmH9k+JE/n5p9q+R+OipKpBSB6oabfLl1pGm7mbBT01VCraGoZa6zOgYl4vLseXvoj
         U90OW8c4G/b8E2ok7dPd+BJU16W3aFqCpYoUd1ygV0oTBRzvM/1ih6DgTkb/mqKmypon
         j05hOi3YMMlwrWB8ubsq68oQELBfAscst/9pE=
Received: by 10.223.99.78 with SMTP id t14mr341771fan.85.1273252769330;
        Fri, 07 May 2010 10:19:29 -0700 (PDT)
Received: from [192.168.1.223] (89-172-38-165.adsl.net.t-com.hr [89.172.38.165])
        by mx.google.com with ESMTPS id u12sm7518787fah.4.2010.05.07.10.19.27
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 07 May 2010 10:19:28 -0700 (PDT)
Subject: TermsFilter instead of "should" TermQueries
From: Tomislav Poljak <tpoljak@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain
Date: Fri, 07 May 2010 19:19:26 +0200
Message-Id: <1273252766.3827.27.camel@tpoljak-laptop>
Mime-Version: 1.0
X-Mailer: Evolution 2.26.1 
Content-Transfer-Encoding: 7bit

Hi,
in API documentation for TermsFilter:

http://search-lucene.com/jd/lucene/org/apache/lucene/search/TermsFilter.html

it states:

'As a filter, this is much faster than the equivalent query (a
BooleanQuery with many "should" TermQueries)'

I would like to replace "should" TermQueries with TermsFilter to benefit
in performance, but I'm trying to understand how this change/switch can
work. 

I was under the impression that the BooleanQuery with many "should"
TermQueries affects scoring like: each "should" term present in result,
increases the result's score. 

If someone could explain how can a TermsFilter (which is like any filter
a binary thing - result document is matched or not) be used to replace
should clauses, I would really appreciate it.

Tomislav


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46054-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 07 18:09:37 2010
Return-Path: <java-user-return-46054-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5615 invoked from network); 7 May 2010 18:09:36 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 7 May 2010 18:09:36 -0000
Received: (qmail 38485 invoked by uid 500); 7 May 2010 18:09:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38352 invoked by uid 500); 7 May 2010 18:09:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38337 invoked by uid 99); 7 May 2010 18:09:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 May 2010 18:09:32 +0000
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=AWL,FREEMAIL_FROM,FREEMAIL_REPLYTO,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 May 2010 18:09:28 +0000
Received: by fxm16 with SMTP id 16so997713fxm.35
        for <multiple recipients>; Fri, 07 May 2010 11:09:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:reply-to:date
         :message-id:subject:from:to:content-type;
        bh=0JJGFs7zp1+nW56PpqVjRgnuo+SNyRI6tcH+5jsSLAE=;
        b=OqTNiHk0vmKkMmoyMoP2qEBfv8OWYVXS1DtK0nb1YkkdZHbC7hbSUif/VVi4BEd7CQ
         DkUUn518UbsrQ5/ypJ2EITd+S5hJtYeWxoYzkyRikNUKug55jdER7vhRO4ZYgb7gHAup
         sNR5XC3AK0gTGiOtmG944yJJ7pIu0k8gZFA9U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:date:message-id:subject:from:to:content-type;
        b=nec7uc7YudEphhfL9Ch43ZaYfbKUWL1YQoJIpwcPmQRQ0DxR2HnZsLY6Q+w4E1XS9P
         KDzNzP+pLULvZXbICrxroJDi81fZXHd9nDX02Yci2Wu4AKDLlbryhyoqZgcGSEFaGafv
         Puq8yvD7nTwoJgSgMsIEyMPXA2+7Wr89pG4OY=
MIME-Version: 1.0
Received: by 10.239.187.66 with SMTP id k2mr34942hbh.84.1273255746568; Fri, 07 
	May 2010 11:09:06 -0700 (PDT)
Received: by 10.239.135.209 with HTTP; Fri, 7 May 2010 11:09:06 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
Date: Fri, 7 May 2010 20:09:06 +0200
Message-ID: <z2tf18c9dde1005071109q57f8a10dh36d3d84090db638@mail.gmail.com>
Subject: Speakers and Schedule for Berlin Buzzwords 2010 - Search, Store and 
	Scale 7th/8th 2010
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: dev@lucene.apache.org, java-user <java-user@lucene.apache.org>
Content-Type: text/plain; charset=UTF-8

Hi folks,

Today we proudly present the Berlin Buzzwords talks and presentations.
As promised there are tracks specific to the three tags search, store and scale.
We have a fantastic mixture of developers and users of open source software
projects that make scaling data processing today possible.

There is Steve Loughran, Aaron Kimball and Stefan Groschupf from the
Apache Hadoop community. We have Grant Ingersoll, Robert Muir and the
"Generics Policeman" Uwe Schindler from the Lucene community.

For those interested in NoSQL databases there is Mathias Stearn from MongoDB,
Jan Lehnardt from CouchDB and Eric Evans, the guy who coined the term
NoSQL one year ago.

We have just published the initial version of the schedule here:

http://berlinbuzzwords.de/content/schedule-published

It seems like we are having a fantastic set of talks and speakers for Buzzwords.

Visit us at http://berlinbuzzwords.de - looking forward to see you there!

Simon

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46055-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 07 18:35:20 2010
Return-Path: <java-user-return-46055-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17094 invoked from network); 7 May 2010 18:35:20 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 7 May 2010 18:35:20 -0000
Received: (qmail 73167 invoked by uid 500); 7 May 2010 18:35:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73130 invoked by uid 500); 7 May 2010 18:35:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73122 invoked by uid 99); 7 May 2010 18:35:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 May 2010 18:35:18 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of tpoljak@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 May 2010 18:35:09 +0000
Received: by fxm16 with SMTP id 16so1013769fxm.35
        for <java-user@lucene.apache.org>; Fri, 07 May 2010 11:34:49 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:subject:from:to:content-type
         :date:message-id:mime-version:x-mailer:content-transfer-encoding;
        bh=AXjMj7FLh/4+yMwDN3wPU1W/eNOpIq+imbsnjyMYj8A=;
        b=sB4wxVIidWbKVJPykhikmKqfWxPPNfviD5Q2f9mVsa4w/6nKNfs5TM/FJ0yVcnCuKW
         9DIhnyHNmvwZJzMxRTemLtidCLXa1S1MVyC3OO2L8N+7k+ITXA1FyY5MnLT1hFftFJOx
         ynGtdLEou47tVM5GtuSYgr6dcmFQx+SODwrAs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=subject:from:to:content-type:date:message-id:mime-version:x-mailer
         :content-transfer-encoding;
        b=PB1JvnZ+oSIE2VaGXzpZppjKdiTgGftkrABQhTvw5DpS7nSe3ZOYb3DNOoQpXAAJ5O
         qGeKOZO1HK52+sKDTmfHcXDbEnbun3mlrSaSljIXdlnyc2AZNL4y6jugDJUM1DQobZG/
         00RI7uqgHxS2V2NnbA/jg0h7HVEb+fvGZd+2Y=
Received: by 10.223.22.145 with SMTP id n17mr536019fab.23.1273257289484;
        Fri, 07 May 2010 11:34:49 -0700 (PDT)
Received: from [192.168.1.223] (89-172-38-165.adsl.net.t-com.hr [89.172.38.165])
        by mx.google.com with ESMTPS id 7sm7775297far.18.2010.05.07.11.34.48
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 07 May 2010 11:34:49 -0700 (PDT)
Subject: Filter vs. TermQuery performance
From: Tomislav Poljak <tpoljak@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain
Date: Fri, 07 May 2010 20:34:46 +0200
Message-Id: <1273257286.3827.100.camel@tpoljak-laptop>
Mime-Version: 1.0
X-Mailer: Evolution 2.26.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
when is it wise to replace a TermQuery with cached Filter (regarding
search performance). If TermQuery is used only to filter results based
on field value (it doesn't participate in scoring), is it alway wise to
replace it with filter? Is it only wise if Filter is cached (wrapped in
CachingWrapperFilter) and reused often?


Does it matter how many distinct values field has (which is related to
how many matches/results for one given/selected value is returned and
also with how many times same filter instance is reused)?

For example, what if filter for single value matches only 5% of docs,
should filter be used or is it better to use TermQuery? 

What about if filter for single value matches 20%? or 50% or 75%

I have a question regarding caching performance/memory usage. Documents
have date&time indexed (as NumericField) with minute resolution and
there are few thousands unique date&time in index. On the search side
open ended range filter is used (NumericRangeFilter) with current time
as a parameter.

Now, is it wise to cache NumericRangeFilter here (reuse instance of
CachingWrapperFilter wrapping NumericRangeFilter) since it will not be
reused often (only from users searching at same time in same time zone)?

Is it better to use NumericRangeFilter or NumericRangeQuery in this
case?

Tomislav








---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46056-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat May 08 00:30:48 2010
Return-Path: <java-user-return-46056-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92276 invoked from network); 8 May 2010 00:30:48 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 8 May 2010 00:30:48 -0000
Received: (qmail 47986 invoked by uid 500); 8 May 2010 00:30:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47956 invoked by uid 500); 8 May 2010 00:30:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47948 invoked by uid 99); 8 May 2010 00:30:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 May 2010 00:30:46 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 74.125.83.48 as permitted sender)
Received: from [74.125.83.48] (HELO mail-gw0-f48.google.com) (74.125.83.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 May 2010 00:30:39 +0000
Received: by gwj15 with SMTP id 15so1183514gwj.35
        for <java-user@lucene.apache.org>; Fri, 07 May 2010 17:30:18 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=V3U8cR7j8Kk+uMd7LqhtMmlPAEa0Ur2j9iqILxfUK4g=;
        b=dPhUyF5/a7aAkVVgqFlMfVYdaFOEGGIe5m2mPSfJnRVUMnAdUrhv0w9p/QVPjOcvrb
         S8129IjpacK1rGhrbft/GHLr6ksWbYl9/SQmA2M6BC0eG7JbxhPlNkDFIOIGBZ8DhY8W
         huVFE8FqsMYH26/0dw5zPor5ELwy/1IGjzCNI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=rRHUI2q+C2QpW12ltTrsjJZLb7oLX2c1IAzs+SNujMTg7bYHhkMyUIxTyQEeRH+BhW
         XFbGjtmydTBuzdg/IAlWRK3smVxBGbS4s5/cO+6rc6+PMYZiaH+Ni+7PPOCo3pphf+12
         bVLqB3WYIq/Ypx8T0fj8ddGXcFBuEGx4M9uhQ=
MIME-Version: 1.0
Received: by 10.151.3.25 with SMTP id f25mr4012384ybi.183.1273278618443; Fri, 
	07 May 2010 17:30:18 -0700 (PDT)
Received: by 10.151.43.7 with HTTP; Fri, 7 May 2010 17:30:18 -0700 (PDT)
In-Reply-To: <1273252766.3827.27.camel@tpoljak-laptop>
References: <1273252766.3827.27.camel@tpoljak-laptop>
Date: Fri, 7 May 2010 20:30:18 -0400
Message-ID: <k2k359a92831005071730kcfff8b53h64d11ed90379e5cd@mail.gmail.com>
Subject: Re: TermsFilter instead of "should" TermQueries
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd6a67ec09fb004860a47fa
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd6a67ec09fb004860a47fa
Content-Type: text/plain; charset=ISO-8859-1

Well, you construct the filter by enumerating the terms you're
interested in and pass it along to the relevant search.

But it looks like you've figured that part out. If you're asking
how can you use a Filter and still have the terms replaced
by the filter contribute to scoring, you can't. But it's a reasonable
question to ask whether it changes the score enough to
matter given that this is only a problem when there are many
terms.

If this doesn't speak to your question, can you ask for more
detail?

HTH
Erick

On Fri, May 7, 2010 at 1:19 PM, Tomislav Poljak <tpoljak@gmail.com> wrote:

> Hi,
> in API documentation for TermsFilter:
>
>
> http://search-lucene.com/jd/lucene/org/apache/lucene/search/TermsFilter.html
>
> it states:
>
> 'As a filter, this is much faster than the equivalent query (a
> BooleanQuery with many "should" TermQueries)'
>
> I would like to replace "should" TermQueries with TermsFilter to benefit
> in performance, but I'm trying to understand how this change/switch can
> work.
>
> I was under the impression that the BooleanQuery with many "should"
> TermQueries affects scoring like: each "should" term present in result,
> increases the result's score.
>
> If someone could explain how can a TermsFilter (which is like any filter
> a binary thing - result document is matched or not) be used to replace
> should clauses, I would really appreciate it.
>
> Tomislav
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd6a67ec09fb004860a47fa--

From java-user-return-46057-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat May 08 09:10:47 2010
Return-Path: <java-user-return-46057-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63995 invoked from network); 8 May 2010 09:10:47 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 8 May 2010 09:10:47 -0000
Received: (qmail 76041 invoked by uid 500); 8 May 2010 09:10:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75851 invoked by uid 500); 8 May 2010 09:10:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75843 invoked by uid 99); 8 May 2010 09:10:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 May 2010 09:10:44 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of panxiaoliang@baixing.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 May 2010 09:10:38 +0000
Received: by pwi2 with SMTP id 2so957013pwi.35
        for <java-user@lucene.apache.org>; Sat, 08 May 2010 02:10:18 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.141.23.21 with SMTP id a21mr718867rvj.50.1273309818038; Sat, 
	08 May 2010 02:10:18 -0700 (PDT)
Received: by 10.140.142.1 with HTTP; Sat, 8 May 2010 02:10:18 -0700 (PDT)
Date: Sat, 8 May 2010 17:10:18 +0800
Message-ID: <i2k4ac67a081005080210o3eccabfftde924f3c9edddbb7@mail.gmail.com>
Subject: baixing.com(an eBay company) is looking for tech talents
From: =?UTF-8?B?5r2Y5pmT6Imv?= <panxiaoliang@baixing.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd1b77864ad7a0486118b60

--000e0cd1b77864ad7a0486118b60
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Sorry for bothering you. This is an advertisement, about one job opportunit=
y
in Shanghai, China. If you don't like it, please ignore it.

Baixing.com is one start-up company invested by eBay, and it's in eBay
Classified Group.

We started in March 1st, 2005, and now we have a big C2C classified site
with one billion page view every month, and 300 million ads. If you want to
learn more, please try using it: http://www.baixing.com

Why work in baixing.com?

1. We are a small team with talents
a. Keep strong growth with only 1/10 of employees of competitors
b. 1 million RMB revenue per employee in last year
c. High pressure, Fast growth and High return

2. We also have big global company's benefit=EF=BC=89
a. We are sharing with classified experience globally, half of our employee=
s
have business trips to U.S. or Europe
b. We have leveling and performance reviewing system, good work, good pay
c. We are in Xujiahui CBD with Convenient traffic, and metrical lines 1#,
9#, 10# are nearby
d. For employees who need relocate, we will pay two month's house rent fee,
and after that we have allowance for house renting too
e. We have free breakfast, fruit every day,  and we have many kinds of
sports like basketball, badminton, travel etc.

Here is jobs opening:

   - Software Engineer=EF=BC=88PHP=EF=BC=89
    <http://shanghai.baixing.com/chengxuyuan/a50257052.html>
   - Product Manager=EF=BC=88Mobile=EF=BC=89<http://shanghai.baixing.com/ch=
engxuyuan/a50184703.html>
   - Internet Marketing Manager
    <http://shanghai.baixing.com/qitazhaopin/a49495617.html>
   - Software Engineer (PHP) -
Intern<http://shanghai.baixing.com/chengxuyuan/a49094554.html>
   - Analyst=EF=BC=88Competition=EF=BC=89<http://shanghai.baixing.com/qitaz=
haopin/a49080908.html>
   - Finance Manager <http://shanghai.baixing.com/kuaiji/a49058313.html>
   - Software Engineer=EF=BC=88Mobile=EF=BC=89<http://shanghai.baixing.com/=
chengxuyuan/a49072355.html>
   - Software Engineer=EF=BC=88SEO=EF=BC=89<http://shanghai.baixing.com/che=
ngxuyuan/a49072643.html>
   - Software Engineer=EF=BC=88Anti-spam=EF=BC=89<http://shanghai.baixing.c=
om/chengxuyuan/a49072809.html>
   - Software Engineer=EF=BC=88Data
Warehouse=EF=BC=89<http://shanghai.baixing.com/chengxuyuan/a49073017.html>
   - Software Engineer=EF=BC=88Architect=EF=BC=89<http://shanghai.baixing.c=
om/chengxuyuan/a49073147.html>
   - Product Manager<http://shanghai.baixing.com/chengxuyuan/a49073483.html=
>



--=20
=E6=99=93=E8=89=AF

--000e0cd1b77864ad7a0486118b60--

From java-user-return-46058-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat May 08 15:24:13 2010
Return-Path: <java-user-return-46058-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21673 invoked from network); 8 May 2010 15:24:13 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 8 May 2010 15:24:13 -0000
Received: (qmail 44834 invoked by uid 500); 8 May 2010 15:24:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44119 invoked by uid 500); 8 May 2010 15:24:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43933 invoked by uid 99); 8 May 2010 15:24:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 May 2010 15:24:07 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of markrmiller@gmail.com designates 209.85.221.191 as permitted sender)
Received: from [209.85.221.191] (HELO mail-qy0-f191.google.com) (209.85.221.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 May 2010 15:24:00 +0000
Received: by qyk29 with SMTP id 29so3480296qyk.14
        for <multiple recipients>; Sat, 08 May 2010 08:23:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:content-type
         :content-transfer-encoding;
        bh=gpox7PRYhPT9uCzuEKXHmeJzK0FtclIIjGQSLu/QmaQ=;
        b=bQp56DlYMDC4hyndZFnvR4Oc+gr1mxih7OBKZNyKEpzUmQ/J7tN8P2gZTI5v62cDrR
         HT7N1Apj7O8AchKq6xRpgDbty4B6F2Y097LpNeIwznf/vQWTMWz/XPfOUGim9jqDwSvR
         41jKTdfdxOU3GqMWZheulwG6Y1dOQnZxxQPTM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject
         :content-type:content-transfer-encoding;
        b=q49hFaPRNEKVJhC+Iuf/vid787oGWDY1gI00nkYo4vG2cu9hkcKIauRWnD016wGETa
         OtwE01nwKJuZKYWPzsH7wnGtsFrmRXmLwIWj7inRqUtj3XvBycd1A3PWzcORR2mjpYcz
         PKaZwqiCDOdwKWYb+h1a4+yvJFJUV/EtctsX0=
Received: by 10.224.58.152 with SMTP id g24mr934032qah.382.1273332219495;
        Sat, 08 May 2010 08:23:39 -0700 (PDT)
Received: from Mark-Millers-MacBook-Pro.local (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 7sm1158217qwb.24.2010.05.08.08.23.37
        (version=SSLv3 cipher=RC4-MD5);
        Sat, 08 May 2010 08:23:38 -0700 (PDT)
Message-ID: <4BE581F8.8080100@gmail.com>
Date: Sat, 08 May 2010 11:23:36 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.1.9) Gecko/20100317 Thunderbird/3.0.4
MIME-Version: 1.0
To: java-user@lucene.apache.org, solr-user@lucene.apache.org
Subject: [ANN] Lucene/Solr Meetup in NYC on May 11th
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

If you haven't heard, there is a Lucene/Solr meetup in New York next 
week: http://www.meetup.com/NYC-Apache-Lucene-Solr-Meetup/calendar/13325754/

The scheduled talks are (in addition to lightening talks):

Solr 1.5 and Beyond:

Yonik Seeley, author of Solr, co-founder, Lucid Imagination Topics will 
include new faceting functionality, new function queries, increased 
scalability, field collapsing, and spatial search. There will also be a 
discussion about the recently announced Lucene/Solr merge, the 
rationale, its implications, and plans for its completion. The talk will 
span features already included in trunk, features slated for the next 
release, as well as incomplete features under consideration for future 
releases.

Cool Linguistic Tricks to Apply to Search Results:

A source code level demonstration using LingPipe Breck Baldwin, Founder, 
LingPipe: The talk will cover post-processing options for Twitter 
searches. I will cover clustering and classification with some potential 
for conceptual indexing at the level of persons/orgs/locations. There 
will be a demo available for download that runs the examples and 
contains the source.

-- 
- Mark

http://www.lucidimagination.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46059-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun May 09 16:07:48 2010
Return-Path: <java-user-return-46059-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20183 invoked from network); 9 May 2010 16:07:48 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 9 May 2010 16:07:48 -0000
Received: (qmail 78834 invoked by uid 500); 9 May 2010 16:07:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78778 invoked by uid 500); 9 May 2010 16:07:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78770 invoked by uid 99); 9 May 2010 16:07:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 May 2010 16:07:45 +0000
X-ASF-Spam-Status: No, hits=-0.9 required=10.0
	tests=AWL,FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.60] (HELO web50306.mail.re2.yahoo.com) (206.190.38.60)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 09 May 2010 16:07:39 +0000
Received: (qmail 64894 invoked by uid 60001); 9 May 2010 16:07:18 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1273421238; bh=RWqeQHfn1Z36+5b/pyDvEcPpYc2SKugMhxqb+LC4Irk=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=i3fgrSlvXN0fGLsDvBUReAwWI5RWKApkClEptTWpPTOUQ4wXKK1DSTI/l7CVKb/jB9O2NvMISYqFQlpbEzXms5DEvRMSaF/kdA8n/DnJdaNH6RRSUQ4RmvqXf2F+9LhqBTOk3our81UJAx5dCFlJMJ0aSDB/KLUEvnZTVP+pVZ0=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=SCOaJuMkFeU+TuKmISfM1bF6wM5IWtm+pEm3Rg7i3+ZE2Y/1kBMdwaHPihOW92ZB4LMWGoNflOvq3ZL1ZAvIr7z9UtJ4pUfz1WRsNcd4NI0J4fQzpJ+y1G1qE0q9jMfH65DIbOf2rnWdFOYKy+N/OvLYAPWdEpcuY/fhv4JOvp8=;
Message-ID: <308550.64887.qm@web50306.mail.re2.yahoo.com>
X-YMail-OSG: JvijITYVM1lyfdW3vAaXzLCbHe7VTk7rLkA4Ct6RfKDUkcd
 VQmB6UZSd_rM_ZNZzwSd5uubK7pyiLRRyXlEuwbcOurskhlK20sqMoXZw52l
 UBQT_JpUrvdrlTx2nVIjj6o0VRhbkUn3KXdjjimDeNv.PQS3Z9SZibzIlv1N
 cCnkMqfnAsX4ZcfLe9mKmu1F9u5LykT9FvGSy7Kv6EqzDGVMqC52wRGSdURM
 Ty.o_Z4Y5aeFj9KbbGe7rnCMf3gHylXaDo0CMAsK1zlhrD368UcEffnGHFl2
 Q5b0ep3hRma33bezrKfDFxMVOmN73eY6BPVSqVd0hapqRGhmJJYwfULumm_2
 ydafST_dnGDr1ImdQ1F.YNHBzQyGDdw--
Received: from [74.73.6.27] by web50306.mail.re2.yahoo.com via HTTP; Sun, 09 May 2010 09:07:18 PDT
X-Mailer: YahooMailRC/374.4 YahooMailWebService/0.8.103.269680
References: <1273252766.3827.27.camel@tpoljak-laptop> <k2k359a92831005071730kcfff8b53h64d11ed90379e5cd@mail.gmail.com>
Date: Sun, 9 May 2010 09:07:18 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: TermsFilter instead of "should" TermQueries
To: java-user@lucene.apache.org
In-Reply-To: <k2k359a92831005071730kcfff8b53h64d11ed90379e5cd@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

I think what Tomislav was trying to ask is:

Can filters replace only strictly boolean clauses (i.e. only MUST and MUST_NOT), such as: +gender:F, -rating:xxx)?
Or can filters also replace SHOULD clauses, such as: food:banana (which is neither absolutely required or strictly prohibited)?

 Otis
----
Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch
Lucene ecosystem search :: http://search-lucene.com/



----- Original Message ----
> From: Erick Erickson <erickerickson@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Fri, May 7, 2010 8:30:18 PM
> Subject: Re: TermsFilter instead of "should" TermQueries
> 
> Well, you construct the filter by enumerating the terms you're
interested in 
> and pass it along to the relevant search.

But it looks like you've 
> figured that part out. If you're asking
how can you use a Filter and still 
> have the terms replaced
by the filter contribute to scoring, you can't. But 
> it's a reasonable
question to ask whether it changes the score enough 
> to
matter given that this is only a problem when there are 
> many
terms.

If this doesn't speak to your question, can you ask for 
> more
detail?

HTH
Erick

On Fri, May 7, 2010 at 1:19 PM, 
> Tomislav Poljak <
> href="mailto:tpoljak@gmail.com">tpoljak@gmail.com> wrote:

> 
> Hi,
> in API documentation for TermsFilter:
>
>
> 
> href="http://search-lucene.com/jd/lucene/org/apache/lucene/search/TermsFilter.html" 
> target=_blank 
> >http://search-lucene.com/jd/lucene/org/apache/lucene/search/TermsFilter.html
>
> 
> it states:
>
> 'As a filter, this is much faster than the equivalent 
> query (a
> BooleanQuery with many "should" TermQueries)'
>
> I 
> would like to replace "should" TermQueries with TermsFilter to benefit
> 
> in performance, but I'm trying to understand how this change/switch can
> 
> work.
>
> I was under the impression that the BooleanQuery with many 
> "should"
> TermQueries affects scoring like: each "should" term present in 
> result,
> increases the result's score.
>
> If someone could 
> explain how can a TermsFilter (which is like any filter
> a binary thing - 
> result document is matched or not) be used to replace
> should clauses, I 
> would really appreciate it.
>
> Tomislav
>
>
> 
> ---------------------------------------------------------------------
> To 
> unsubscribe, e-mail: 
> href="mailto:java-user-unsubscribe@lucene.apache.org">java-user-unsubscribe@lucene.apache.org
> 
> For additional commands, e-mail: 
> ymailto="mailto:java-user-help@lucene.apache.org" 
> href="mailto:java-user-help@lucene.apache.org">java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46060-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun May 09 16:24:42 2010
Return-Path: <java-user-return-46060-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21903 invoked from network); 9 May 2010 16:24:42 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 9 May 2010 16:24:42 -0000
Received: (qmail 89040 invoked by uid 500); 9 May 2010 16:24:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89009 invoked by uid 500); 9 May 2010 16:24:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89000 invoked by uid 99); 9 May 2010 16:24:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 May 2010 16:24:40 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.38.59] (HELO web50305.mail.re2.yahoo.com) (206.190.38.59)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 09 May 2010 16:24:31 +0000
Received: (qmail 86216 invoked by uid 60001); 9 May 2010 16:24:10 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1273422249; bh=41iOsObx/eHPboBoQC1exggiFqDeOygj9J6it3K5gNg=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=eMRcbPh+/mGJkIfH//0OPF5e75bg0fAGQ+DuqpQaH1SrEKNirTrq7hXdKiSf1LIrmpMFtpRlcL+gjy0iTyvITrMUHk2O/hRfxyYkmA7E0RhVMHjjoSg17SXbOADmGMvLc8mVEIFNkpb8IF+Iv7zCvcjn+aeBNh0Tm2vsHWnmjVs=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=jsHHP5g7jlU6smc/1rBARS4U5unm31Vnc3cufTdQhWcDG7NNLnG0zNyc6hmP+2lKiTNUNDo35oJVDJDnSG4zOyZi7OjU14KRSU5A1anNVL4lR4GbYSTzKHZSmrz3UDEBrBwdObTL1D+XQugzNza5u6iwleEXeXqmeWqajwDnFmw=;
Message-ID: <998887.85947.qm@web50305.mail.re2.yahoo.com>
X-YMail-OSG: xUqLKMUVM1nIAeP.0WgXIgCy4rX.ilEGM4tXGgoXxHdjweU
 c7Eg3rxWVOtUegbMU.lTdPr928G5rbPDGLhDquhGjIVzwNkABPMldijtDTs9
 abYsRqZUI77c.yLetLudo4YnKlNqUROyDF9ZYqMEHcjExgRii.9p_NEbWtEk
 Yp.AxOouGtUTPS_4v1gGYJhHGlpIcJpaVEGG0xb_RqDFjMh.PolQ1cAvtDhU
 lYc0CycQTvX7bP_rmx0a.JE_eyIibU1y2dqaink2WKkDb.KLoGj5LOa_X8hH
 9Z2J9qa8OyjAub9nM9axNzmI_tmDrP6na5P0Pn3xjMHZxAmFksQPeOsyQaYS
 UMaSAhUq5.E1MLo5lKnZgCEow3m1o
Received: from [74.73.6.27] by web50305.mail.re2.yahoo.com via HTTP; Sun, 09 May 2010 09:24:09 PDT
X-Mailer: YahooMailRC/374.4 YahooMailWebService/0.8.103.269680
References: <1273257286.3827.100.camel@tpoljak-laptop>
Date: Sun, 9 May 2010 09:24:09 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Filter vs. TermQuery performance
To: java-user@lucene.apache.org
In-Reply-To: <1273257286.3827.100.camel@tpoljak-laptop>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org

I think others will have more thoughts on this, esp. for Numeric* questions... but I'll try answering...
 

----- Original Message ----
> From: Tomislav Poljak <tpoljak@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Fri, May 7, 2010 2:34:46 PM
> Subject: Filter vs. TermQuery performance
> 
> Hi,
> when is it wise to replace a TermQuery with cached Filter 
> (regarding search performance). If TermQuery is used only to filter results 
> based on field value (it doesn't participate in scoring), is it alway wise 
> to replace it with filter? 

Yes, assuming the filter will be reused.  I think there is not a lot of value in using a filter (vs. just a regular query) if that filter will not be reused.  This is why in Solr "fq"s (filtered queries) are cached in a special filter cache.  I *think* the only other benefit of using a filter query vs., say, TermQuery, is that the former will not spend any time/CPU on computing the score for the filter part.

> Is it only wise if Filter is cached (wrapped in CachingWrapperFilter) and reused often?

I think so.  See above.

> Does it matter how many 
> distinct values field has (which is related to how many matches/results for 
> one given/selected value is returned and also with how many times same filter 
> instance is reused)?

I *think* it matters.  I think the more docs a filter matches, the higher the benefit from reusing a filter.

> For example, what if filter for single value matches 
> only 5% of docs, should filter be used or is it better to use TermQuery? 
> What about if filter for single value matches 20%? or 50% or 
> 75%

I'm not sure...

> I have a question regarding caching performance/memory usage. 
> Documents have date&time indexed (as NumericField) with minute resolution 
> and there are few thousands unique date&time in index. On the search 
> side open ended range filter is used (NumericRangeFilter) with current 
> time as a parameter.

> Now, is it wise to cache NumericRangeFilter here 
> (reuse instance of CachingWrapperFilter wrapping NumericRangeFilter) since it 
> will not be reused often (only from users searching at same time in same time 
> zone)?

If the cache hit rate is low, why waste memory on caching is what I would think is the logic to apply here.
If you have 3 queries, and each uses a different date range query, then you will not see benefits from caching..
If 2 of those 3 queries use the exact same date range query, then you will see caching benefits.

> Is it better to use NumericRangeFilter or NumericRangeQuery in this case?

I'm not sure, but I'd be happy to add specific advice to Javadoc when the answer is clear.

Otis

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46061-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 10 08:27:26 2010
Return-Path: <java-user-return-46061-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59017 invoked from network); 10 May 2010 08:27:25 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 10 May 2010 08:27:25 -0000
Received: (qmail 8855 invoked by uid 500); 10 May 2010 08:27:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8536 invoked by uid 500); 10 May 2010 08:27:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8528 invoked by uid 99); 10 May 2010 08:27:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 May 2010 08:27:22 +0000
X-ASF-Spam-Status: No, hits=-0.6 required=10.0
	tests=AWL,RCVD_IN_DNSWL_NONE,SPF_NEUTRAL,URIBL_RED
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 May 2010 08:27:17 +0000
Received: by pwi2 with SMTP id 2so1640846pwi.35
        for <java-user@lucene.apache.org>; Mon, 10 May 2010 01:26:56 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.115.36.31 with SMTP id o31mr2857107waj.79.1273480016508; Mon, 
	10 May 2010 01:26:56 -0700 (PDT)
Received: by 10.114.158.14 with HTTP; Mon, 10 May 2010 01:26:53 -0700 (PDT)
In-Reply-To: <492379B6AA909E4FAF672AACCA0EADC25CC106250D@PHXCCRPRD02.adprod.bmc.com>
References: <492379B6AA909E4FAF672AACCA0EADC24A40EE9B10@PHXCCRPRD02.adprod.bmc.com>
	 <492379B6AA909E4FAF672AACCA0EADC25CBAA42E77@PHXCCRPRD02.adprod.bmc.com>
	 <o2y9ac0c6aa1004140312wc3c74ffdp57158f871761cdda@mail.gmail.com>
	 <492379B6AA909E4FAF672AACCA0EADC25CBABBED4D@PHXCCRPRD02.adprod.bmc.com>
	 <n2w9ac0c6aa1004141352s5edb3082o2f1952626c551450@mail.gmail.com>
	 <492379B6AA909E4FAF672AACCA0EADC25CC066FD36@PHXCCRPRD02.adprod.bmc.com>
	 <i2i9ac0c6aa1004270340heec28687zc734ebfbbae10bd3@mail.gmail.com>
	 <492379B6AA909E4FAF672AACCA0EADC25CC09D6A1A@PHXCCRPRD02.adprod.bmc.com>
	 <v2k9ac0c6aa1004291307z9aa93222y7512e27808eeb9db@mail.gmail.com>
	 <492379B6AA909E4FAF672AACCA0EADC25CC106250D@PHXCCRPRD02.adprod.bmc.com>
Date: Mon, 10 May 2010 04:26:53 -0400
Message-ID: <i2v9ac0c6aa1005100126od669496anaec10961d42a4b1f@mail.gmail.com>
Subject: Re: IndexWriter and memory usage
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hmmmm...

Your usage (searching for old doc & updating it, to add new fields) is fine=
.

But: what memory usage do you see if you open a searcher, and search
for all docs, but don't open an IndexWriter?  We need to tease apart
the IndexReader vs IndexWriter memory usage you are seeing.  Also, can
you post the output of CheckIndex (java
org.apache.lucene.index.CheckIndex /path/to/index) of your fully built
index?  That may give some hints about expected memory usage of IR (eg
if # unique terms is large).

More comments below:

On Thu, May 6, 2010 at 1:03 PM, Woolf, Ross <Ross_Woolf@bmc.com> wrote:
> Sorry to be so long in getting back on this. The patch you provided has i=
mproved the situation but we are still seeing some memory loss. =A0The foll=
owing are some images from the heap dump. =A0I'll share with you what we ar=
e seeing now.
>
> This first image shows the memory pattern. =A0Our fist commit takes place=
 at about 3:54 when the steady trend up takes a drop and the new cycle begi=
ns. =A0 What we have found is the 2422 fix has made the memory in the first=
 phase before the commit much better (and I'm sure throughout the entire ru=
n). =A0But as you can see after the commit then we then again begin to lose=
 memory. =A0One of the pieces of info to know about this is what you are se=
eing, we have 5 threads that are pushing data to our Lucene plugin. =A0If w=
e drop it down to 1 thread then we are much more successful and can actuall=
y index all of our data without running out of memory but at 5 threads it g=
ets into trouble. =A0We still see a trend up in memory usage, but not as se=
vere as when we use the multiple threads.
> http://tinypic.com/view.php?pic=3D2w6bf68&s=3D5

Can you post the output of "svn diff" on the 2.9 code base you're
using?  I just want to look & verify all issues we've discussed are
included in your changes.  The fact that 1 thread is fine and 5
threads are not still sounds like a symptom of LUCENE-2283.

Also, does that heap usage graph exclude garbage?  Or, alternatively,
can you provoke an OOME w/ 512 MB heap and then capture the heap dump
at that point?

> There is another piece of the picture that I think might be coming into p=
lay. =A0We have plugged Lucene into a legacy app and are subject to how we =
can get it to deliver the data that we are indexing. =A0In some scenarios (=
like the one we are having this problem with) we are building our documents=
 progressively (adding fields to the document through the process). =A0What=
 you see before the first commit is the legacy system handing us the first =
field for many documents. Once we have gotten all of "field 1" for all docu=
ments then we commit that data into the index. =A0Then the system starts fe=
eding us "field 2." =A0So we perform a search to see if the document alread=
y exists (for the scenario you are seeing it does) and so it retrieves the =
original document (we store a document ID) and it then adds the new field o=
f data to the existing document and we "update" the document in the index. =
=A0After the first commit, the rest of the process is one where a document =
already exist and so the new field is added and and the document is updated=
. =A0It is in this process that we start rapidly losing memory. =A0The foll=
owing images show some examples of common areas where memory is being held.
>
> http://tinypic.com/view.php?pic=3D11vkwnb&s=3D5

This looks like "normal" memory usage of IndexWriter -- these are the
recycled buffers used for holding stored fields.  However: the net RAM
used by this allocation should not exceed your 16 MB IW ram buffer
size -- does it?

> http://tinypic.com/view.php?pic=3Dabq9fp&s=3D5

This one is the byte[] buffer used by CompoundFileReader, opened by
IndexReader.  It's odd that you have so many of these (if I'm reading
this correctly) -- are you certain all opened readers are being
closed?  How many segments do you have in your index?  Or... are there
many unique threads doing the searching?  EG do you create a new
thread for every search or update?

> http://tinypic.com/view.php?pic=3D25pskyp&s=3D5

This one is also normal memory used by IndexWriter, but as above, the
net RAM used by this allocation (summed w/ the above one) should not
exceed your 16 MB IW ram buffer size.

> As mentioned, we are subject to how we can have the legacy app feed us th=
e data and so this is why we do it this way. =A0We treat this system as a r=
eal time system and at anytime the legacy system may send us a field that n=
eeds to be added or updated to a document. =A0So we search for the document=
 and if found we either add or update a field if the field is already exist=
ing in the document. =A0So I started to wonder if a clue in this memory los=
s comes from the fact that we are retrieving an existing document and then =
adding to it and updating.
>
> Now, if we eliminate the updating and simply add each item as a new docum=
ent (which we did just to test but won't be adequate for our running system=
), then we still see a slight trend upward in memory usage and the followin=
g images show that now most of the =A0memory is consumed in char[] rather t=
han the byte[] we saw before. =A0We don't know if this is normal and expect=
ed, or if it is something to be concerned about as well.
>
> http://tinypic.com/view.php?pic=3Dvfgkyt&s=3D5

That memory usage is normal -- it's used by the in-RAM terms index of
your opened IndexReader.  But I'd like to see the memory usage of
simply opening your IndexReader and searching for documents to update,
but not opening an IndexWriter at all.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46062-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 10 09:27:25 2010
Return-Path: <java-user-return-46062-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69082 invoked from network); 10 May 2010 09:27:24 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 10 May 2010 09:27:24 -0000
Received: (qmail 70487 invoked by uid 500); 10 May 2010 09:27:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69792 invoked by uid 500); 10 May 2010 09:27:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69774 invoked by uid 99); 10 May 2010 09:27:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 May 2010 09:27:20 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of alx27alx@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 May 2010 09:27:14 +0000
Received: by vws4 with SMTP id 4so2092396vws.35
        for <java-user@lucene.apache.org>; Mon, 10 May 2010 02:26:53 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=lqIqvvP73tiy1TnmsbTxUN637r7OM+5qmP1P796pOKg=;
        b=PowtzxRh0k02rGtQAjTsVL3neGrQrHeKkQWNuw6jZ9xBQkjxmZtK3mISQLvhCVJNTm
         mBS2Zup5t4Fn7uweMnHb3JJ9z1+9Xz8iquMeNrKQSQjbbXnGDvY48ysoEeR9INI1quBr
         RPUY0fwZdkH/H8wMKJXI1Ung04v7XC5N8+tWg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=plpBfnt5NC97dXkXQi0n6Iwi0UKUe6qqet2JT4HUAcxSfcEvDzrd9QPV0GNc/23q5R
         PZBeDvMxTTUe3TKSZCAdC6kRD3v2uWJlbjjGa+FaLeOVJ9Z9hYe82b6OxRMPxXI2O2Rv
         RzxjpyBySeARGBLFa2lJDzxwq9r6i4G+ycNJ4=
MIME-Version: 1.0
Received: by 10.220.122.8 with SMTP id j8mr3022145vcr.155.1273483613530; Mon, 
	10 May 2010 02:26:53 -0700 (PDT)
Received: by 10.220.173.33 with HTTP; Mon, 10 May 2010 02:26:53 -0700 (PDT)
Date: Mon, 10 May 2010 17:26:53 +0800
Message-ID: <AANLkTinrthbxWDTomae6D4U6lLmCqqAza9MN_1vOXP0q@mail.gmail.com>
Subject: The best way to stop indexing quickly?
From: alx27 alx27 <alx27alx@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636c92b92696c8204863a0216

--001636c92b92696c8204863a0216
Content-Type: text/plain; charset=ISO-8859-1

Hi all,

Imagine a situation: Lucene started indexing a huge file, and just after
this user demands the application to be shut down immediately. What would be
the recommended way of doing this, so that application shuts down within
seconds, but with least possible damage to the index?

best regards,
Alex

--001636c92b92696c8204863a0216--

From java-user-return-46063-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 10 11:30:01 2010
Return-Path: <java-user-return-46063-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90244 invoked from network); 10 May 2010 11:30:01 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 10 May 2010 11:30:01 -0000
Received: (qmail 64785 invoked by uid 500); 10 May 2010 11:29:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64628 invoked by uid 500); 10 May 2010 11:29:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64620 invoked by uid 99); 10 May 2010 11:29:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 May 2010 11:29:58 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.218.222 as permitted sender)
Received: from [209.85.218.222] (HELO mail-bw0-f222.google.com) (209.85.218.222)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 May 2010 11:29:50 +0000
Received: by bwz22 with SMTP id 22so1604089bwz.5
        for <java-user@lucene.apache.org>; Mon, 10 May 2010 04:29:30 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=jgWxpHjm62XeAm7JfPdErMgGxMClroUSXgI1Ywf3PoY=;
        b=BAXKakroG9PSXMtmxXb5g4aLdRry2N2sTBpzZqrdAEXpj8rFT+mTV+Tj7Jha1BadYN
         azcXi6jcD8VtDKYj+/U2tfplfVswTkkptA4yyxuQuYcmFNlfShq9ZAuwbvO/kcvCnp5j
         3dEBOBHfVTrZ3r1MRmZHPQAPLaTRB23RqJeH4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=Pv/KCIw0GBA3oK1ve4IuxNHGTbsyn/+/RKnA7n38ArGAyXPQnji1rWgoMgHoRSvfQy
         mJRuxJjhB7iK/BbWAeTk/LH98lVKpEhFJlnmqxZ6JqpiNM+1UllQKeRiskzEXMbEhirI
         ijkm1BqSwsB4kea/drP+m43IO5iXn2Qz9IU3I=
Received: by 10.204.49.211 with SMTP id w19mr1743005bkf.150.1273490970131; 
	Mon, 10 May 2010 04:29:30 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.54.198 with HTTP; Mon, 10 May 2010 04:29:10 -0700 (PDT)
In-Reply-To: <AANLkTinrthbxWDTomae6D4U6lLmCqqAza9MN_1vOXP0q@mail.gmail.com>
References: <AANLkTinrthbxWDTomae6D4U6lLmCqqAza9MN_1vOXP0q@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Mon, 10 May 2010 12:29:10 +0100
Message-ID: <AANLkTikFBpNZ4IBV0PE1DDCfM3HuD_I8ZmNypDVm2ika@mail.gmail.com>
Subject: Re: The best way to stop indexing quickly?
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

One way would be to identify the most recently added document, save
that info somewhere, and close the IndexWriter as normal.  Then, when
you restart the indexing of the file, skip ahead and start from the
last indexed document.   Or skip the identify/save bit if your
indexing app already has code to avoid indexing duplicate docs.

Alternatively, open the IndexWriter with autocommit=false and call
rollback() when shutdown requested.

The first method will cause the file to be partially indexed and
should be very quick.  The second method will cause the file not to be
indexed, but I guess could be slower if there is a lot of data to
rollback.

As to which is best - you decide.  I'm sure there are other ideas too.

If by "damage" you mean corruption, you should be safe whatever you
do.  Lucene is very good at keeping indexes in a consistent state.


--
Ian.


On Mon, May 10, 2010 at 10:26 AM, alx27 alx27 <alx27alx@gmail.com> wrote:
> Hi all,
>
> Imagine a situation: Lucene started indexing a huge file, and just after
> this user demands the application to be shut down immediately. What would be
> the recommended way of doing this, so that application shuts down within
> seconds, but with least possible damage to the index?
>
> best regards,
> Alex
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46064-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 10 11:33:14 2010
Return-Path: <java-user-return-46064-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90637 invoked from network); 10 May 2010 11:33:14 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 10 May 2010 11:33:14 -0000
Received: (qmail 67080 invoked by uid 500); 10 May 2010 11:33:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67028 invoked by uid 500); 10 May 2010 11:33:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67020 invoked by uid 99); 10 May 2010 11:33:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 May 2010 11:33:12 +0000
X-ASF-Spam-Status: No, hits=4.4 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of manjula53@gmail.com designates 209.85.212.176 as permitted sender)
Received: from [209.85.212.176] (HELO mail-px0-f176.google.com) (209.85.212.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 May 2010 11:33:04 +0000
Received: by pxi10 with SMTP id 10so1697648pxi.35
        for <java-user@lucene.apache.org>; Mon, 10 May 2010 04:32:43 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=JMBWUcjRkx69P55/KQLpoSnQbbhyemchKVwxy5XiLJ0=;
        b=DeY/hmMhEIjtk9sfzXhwVUKVMEITgyYe24Pzc0LaBLxXOlw3rPmBu4NVIzdTz9FPDH
         Nly6JTWMLcvSAWZpP2xkkWi9GLFn7vud8yRSHpfYF7fliaP+XO/W2bPfBhmZgsghCNaJ
         3S8vkNNo5hFSEflqWs1yEWKnW3iiGtYvR2UXg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=DupNjQyCmnWcicba3TtVBSS355Sbte4qOt3v+gbYa9dKvnFAJGE/udOFZLl4pmqAKG
         7ML3eNUINL+nBdKwV67N1W9MA9o/poG5aFhApqQhSuhb07o7lcgstuf8VKJLZ050zK3y
         GnPaGMJMC9stzp9QxwUQ/NSpaZ41LAPuya3yU=
MIME-Version: 1.0
Received: by 10.141.91.3 with SMTP id t3mr2504758rvl.191.1273491163478; Mon, 
	10 May 2010 04:32:43 -0700 (PDT)
Received: by 10.140.147.1 with HTTP; Mon, 10 May 2010 04:32:43 -0700 (PDT)
In-Reply-To: <s2n359a92831005070757iff2f1ee2r1071c74022b8ce24@mail.gmail.com>
References: <j2zd1412c691005070152y59806e55na823988581db89b3@mail.gmail.com>
	 <r2v867513fe1005070607u6d0a0176wa4a275375a591ef0@mail.gmail.com>
	 <s2n359a92831005070757iff2f1ee2r1071c74022b8ce24@mail.gmail.com>
Date: Mon, 10 May 2010 17:02:43 +0530
Message-ID: <o2od1412c691005100432h7ad413e1p45743fe52c01c148@mail.gmail.com>
Subject: Re: Trace only exactly matching terms!
From: manjula wijewickrema <manjula53@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd110926c7b6604863bc42b
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd110926c7b6604863bc42b
Content-Type: text/plain; charset=ISO-8859-1

Hi Anshum & Erick,

As you have mentioned, I used SnowballAnalyzer for stemming purposes. It
worked nicely. Thnks a lot for your guidence.

Manjula.

On Fri, May 7, 2010 at 8:27 PM, Erick Erickson <erickerickson@gmail.com>wrote:

> The other approach is to use a stemmer both at index and query time.
>
> BTW, it's very easy to make a "custom" analyzer by chaining together
> the Tokenizer and as many filters (e.g. PorterStemFilter), essentially
> composing your analyzer from various pre-built Lucene parts.
>
> HTH
> Erick
>
> On Fri, May 7, 2010 at 9:07 AM, Anshum <anshumg@gmail.com> wrote:
>
> > Hi Manjula,
> > Yes lucene by default would only tackle exact term matches unless you use
> a
> > custom analyzer to expand the index/query.
> >
> > --
> > Anshum Gupta
> > http://ai-cafe.blogspot.com
> >
> > The facts expressed here belong to everybody, the opinions to me. The
> > distinction is yours to draw............
> >
> >
> > On Fri, May 7, 2010 at 2:22 PM, manjula wijewickrema <
> manjula53@gmail.com
> > >wrote:
> >
> > > Hi,
> > >
> > > I am using Lucene 2.9.1 . I have downloaded and run the
> > 'HelloLucene.java'
> > > class by modifing the input document and user query in various ways.
> Once
> > I
> > > put the document sentenses as 'Lucene in actions' insted of 'Lucene in
> > > action', and I gave the query as 'action' and run the programme. But it
> > did
> > > not show me the 'Lucene in action as a hit'! What is the reason for
> this?
> > > Why it doesn't tackle word 'actions' as a hit? Does Lucene identify
> only
> > > the
> > > exactly matching words?
> > >
> > > Thanks
> > > Manjula
> > >
> >
>

--000e0cd110926c7b6604863bc42b--

From java-user-return-46065-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 10 12:11:11 2010
Return-Path: <java-user-return-46065-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3184 invoked from network); 10 May 2010 12:11:11 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 10 May 2010 12:11:11 -0000
Received: (qmail 10842 invoked by uid 500); 10 May 2010 12:11:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10804 invoked by uid 500); 10 May 2010 12:11:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10796 invoked by uid 99); 10 May 2010 12:11:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 May 2010 12:11:08 +0000
X-ASF-Spam-Status: No, hits=4.1 required=10.0
	tests=AWL,FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of manjula53@gmail.com designates 209.85.222.180 as permitted sender)
Received: from [209.85.222.180] (HELO mail-pz0-f180.google.com) (209.85.222.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 May 2010 12:11:02 +0000
Received: by pzk10 with SMTP id 10so1476902pzk.20
        for <java-user@lucene.apache.org>; Mon, 10 May 2010 05:10:42 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=z57lkHZTMtcYaJ46k3gEfp6zrWac24p7cQQ0MrRJBHU=;
        b=ZTj0col6nq9JwbRdBDLZzohMXW1C9E/pm/jEiHFHqFSvsXNnvpvAptbYnxAWxUMtyw
         mhhOhmS3PG2NMT9FO2fTjkBv6BTrOPQ3Au1ZuhP9vu8z5ArD4qQt4Rtz+bJ6kR8xc1tu
         u95jaZeBjC8lDRWngZlsJEsRhLbDKd2nNlPoM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=qO1G7+tKupvnfuDk4VGEgAGFjlfsE05ajrwUB7lGe/V8+jbQAi7OPpQ283d440cY4C
         cQF1cqT8ePXTfyRUMxwBmFNCv/aZhwhaXF2NPd7XylrUHCxmrvG6tLBpRGFn+vuL/yog
         wAllDACQhtJKgPPHnmMm6EE2S0/moXwawEW/I=
MIME-Version: 1.0
Received: by 10.141.91.3 with SMTP id t3mr2533547rvl.191.1273493442338; Mon, 
	10 May 2010 05:10:42 -0700 (PDT)
Received: by 10.140.147.1 with HTTP; Mon, 10 May 2010 05:10:42 -0700 (PDT)
Date: Mon, 10 May 2010 17:40:42 +0530
Message-ID: <n2rd1412c691005100510pdd55d7b7h71dd76c99d90a150@mail.gmail.com>
Subject: Class_for_HighFrequencyTerms
From: manjula wijewickrema <manjula53@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd110924121d704863c4cee

--000e0cd110924121d704863c4cee
Content-Type: text/plain; charset=ISO-8859-1

Hi,

If I index a document (single document) in Lucene, then how can I get the
term frequencies (even the first and second highest occuring terms) of that
document? Is there any class/method to do taht? If anybody knows, pls. help
me.

Thanks
Manjula

--000e0cd110924121d704863c4cee--

From java-user-return-46066-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 10 13:31:20 2010
Return-Path: <java-user-return-46066-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39040 invoked from network); 10 May 2010 13:31:20 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 10 May 2010 13:31:20 -0000
Received: (qmail 15115 invoked by uid 500); 10 May 2010 13:31:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15082 invoked by uid 500); 10 May 2010 13:31:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15074 invoked by uid 99); 10 May 2010 13:31:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 May 2010 13:31:18 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mindas@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 May 2010 13:31:11 +0000
Received: by fxm16 with SMTP id 16so2450499fxm.35
        for <java-user@lucene.apache.org>; Mon, 10 May 2010 06:30:50 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=SN07UlrCK4wtEWdqkstCdqVz3q4U8EMZz3uXlaj1Z3E=;
        b=cGLjHcHo2UUrq4JXH8p6yTVU1VY9/FWSMERGbCNzu9nXK9qCqhAFoP8q34FkgeFT8M
         yipRq8MxEIa6QrFjs3/m0h0fWwsQIebEYDFrFXXN+vb5wGlaQkZKuSNmxdPG6yHFoKYb
         xRESxr7LMgKbj1ZGB30ZiHWa39dePw5FSqyVw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=SFsdzHn3K8kaUzbThyAKZevmdQbFEobGDDudoYyOqTJTMzYiBqidRIFzZbCJHIDQiR
         g6ZQVYiUDp2HM9a/pnFK9KvKlbG+IP7nfIRrfE+AkPurF1MJqqPEmReaFOJH/jJE0WaC
         0SI4w29RmTiHUOEMcB9TxVdQTjh2XlsJrBxq4=
MIME-Version: 1.0
Received: by 10.239.187.203 with SMTP id m11mr406175hbh.124.1273498250456; 
	Mon, 10 May 2010 06:30:50 -0700 (PDT)
Received: by 10.239.171.147 with HTTP; Mon, 10 May 2010 06:30:50 -0700 (PDT)
Date: Mon, 10 May 2010 14:30:50 +0100
Message-ID: <AANLkTikf83sRo95Db2VW7iB9vw9XRtjjOYbKMUkUqH63@mail.gmail.com>
Subject: MatchAllDocsQuery and MatchNoDocsQuery
From: =?ISO-8859-13?Q?Mindaugas_=DEak=F0auskas?= <mindas@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

Hi,

Can anybody confirm whether MatchAllDocsQuery can be used as an
immutable singletone? By this I mean creating a single instance and
sharing it whenever I need to either use it on its own or in
cojunction with other queries put into a BooleanQuery; to result all
documents in a search result. Can the same instance even be reused
among different threads?

What would be the best way implementing MatchNoDocsQuery? My initial
tests show that a new BooleanQuery() without any additional clauses
would just do the job, but I just wanted to double check whether this
is be a reliable assumption. Above questions also apply - could this
be reused among different contexts, threads?

Thanks in advance.

Regards,
Mindaugas

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46067-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 10 14:19:19 2010
Return-Path: <java-user-return-46067-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52279 invoked from network); 10 May 2010 14:19:19 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 10 May 2010 14:19:19 -0000
Received: (qmail 76312 invoked by uid 500); 10 May 2010 14:19:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76167 invoked by uid 500); 10 May 2010 14:19:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76159 invoked by uid 99); 10 May 2010 14:19:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 May 2010 14:19:17 +0000
X-ASF-Spam-Status: No, hits=-0.5 required=10.0
	tests=AWL,FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 May 2010 14:19:11 +0000
Received: by wwb28 with SMTP id 28so2267746wwb.35
        for <java-user@lucene.apache.org>; Mon, 10 May 2010 07:18:49 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:sender:reply-to:received
         :in-reply-to:references:date:x-google-sender-auth:message-id:subject
         :from:to:content-type:content-transfer-encoding;
        bh=fGwT/wYd2/pt7lalQHjgNaNw9BHRZMAeGR0PnHg4+KQ=;
        b=VYZ9xjvCZBXCPrTNhn/n+vYJucV+QyGM9Mppj8B5+VAJnE9jDlLbMY3z1KAlHhFja1
         E4bpFkCMXHx//MR8eJ6hYgzkueF1jlbW4pX6qiCT1k3gtcjM1kVViBtTqUSn/+5L4ac6
         oqhz/vnMpWNVVmZ4dqVyUf5etomRUnqfPYHjo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:reply-to:in-reply-to:references:date
         :x-google-sender-auth:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=rZLh+cgBTeW/8aPlskULNDKZ/yRF4wqxa059IogCVZxVTGp8BbuoLxjMurpoJEBJvV
         br3KCZNakczpV9zlidddn8Lii0+cY4yf6opSDZG4N0pN4U4hRoyZZd0wnb+1zuD+Svh9
         llKAKDTp0gzkezx9xu/Lq6DSeX1N49vk3svrw=
MIME-Version: 1.0
Received: by 10.216.188.201 with SMTP id a51mr2461661wen.224.1273501129576; 
	Mon, 10 May 2010 07:18:49 -0700 (PDT)
Sender: yseeley@gmail.com
Reply-To: yonik@lucidimagination.com
Received: by 10.216.22.140 with HTTP; Mon, 10 May 2010 07:18:49 -0700 (PDT)
In-Reply-To: <AANLkTikf83sRo95Db2VW7iB9vw9XRtjjOYbKMUkUqH63@mail.gmail.com>
References: <AANLkTikf83sRo95Db2VW7iB9vw9XRtjjOYbKMUkUqH63@mail.gmail.com>
Date: Mon, 10 May 2010 10:18:49 -0400
X-Google-Sender-Auth: lLgKpuXtdA1AvB8UhU48_LGi5-0
Message-ID: <AANLkTim4TLS9ynd-zzKDrnjdIi-pYp7oCkl2luHtMuRu@mail.gmail.com>
Subject: Re: MatchAllDocsQuery and MatchNoDocsQuery
From: Yonik Seeley <yonik@lucidimagination.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-13
Content-Transfer-Encoding: quoted-printable

Yes on all counts.  Lucene doesn't modify query objects, so they are
save for reuse among multiple threads.

-Yonik
Apache Lucene Eurocon 2010
18-21 May 2010 | Prague



2010/5/10 Mindaugas =DEak=F0auskas <mindas@gmail.com>:
> Hi,
>
> Can anybody confirm whether MatchAllDocsQuery can be used as an
> immutable singletone? By this I mean creating a single instance and
> sharing it whenever I need to either use it on its own or in
> cojunction with other queries put into a BooleanQuery; to result all
> documents in a search result. Can the same instance even be reused
> among different threads?
>
> What would be the best way implementing MatchNoDocsQuery? My initial
> tests show that a new BooleanQuery() without any additional clauses
> would just do the job, but I just wanted to double check whether this
> is be a reliable assumption. Above questions also apply - could this
> be reused among different contexts, threads?
>
> Thanks in advance.
>
> Regards,
> Mindaugas
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46068-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 10 19:56:42 2010
Return-Path: <java-user-return-46068-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75773 invoked from network); 10 May 2010 19:56:42 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 10 May 2010 19:56:42 -0000
Received: (qmail 32923 invoked by uid 500); 10 May 2010 19:56:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32899 invoked by uid 500); 10 May 2010 19:56:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32890 invoked by uid 99); 10 May 2010 19:56:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 May 2010 19:56:40 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 74.125.83.48 as permitted sender)
Received: from [74.125.83.48] (HELO mail-gw0-f48.google.com) (74.125.83.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 May 2010 19:56:32 +0000
Received: by gwj20 with SMTP id 20so1208529gwj.35
        for <java-user@lucene.apache.org>; Mon, 10 May 2010 12:56:11 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=W6zrddqheyiOsCgtYGCwiLG/BPFLWceGWzx+22xy5J0=;
        b=NFyw1SnHCDAa/VrA1Is/uNm2iLP6bdLbMERvuqVrN4yuJ4cr3U3V2rvlaF0oU7nEJY
         xtbiRWmXlJMzJdlBWlB6eHyEHnYtYnDxWyLGfM1mXk/fAl+Y7y2EYsxeP0SOb1tLyZ12
         sr5RqtouGBeMIsYyVZkLUWcIo+8LQVfgMRwLA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=F5mYYSA1FoDpPX8Rxv3gPmeEL+40zTgeE2QgcjpJtQhkwMPZ4D3vgX9iU/SVRVf0QU
         +qMzRRwygEF8O7sMWwf9hxqEdz3dDgfiHu3/Ohl7n3Wct/Z/usOjc2rA+J4UI5qXYU8q
         neFsoEIn1VvgYBxCp9+z6fIZK79fW8Z4spMVM=
MIME-Version: 1.0
Received: by 10.150.132.7 with SMTP id f7mr6685046ybd.350.1273521371537; Mon, 
	10 May 2010 12:56:11 -0700 (PDT)
Received: by 10.151.43.7 with HTTP; Mon, 10 May 2010 12:56:11 -0700 (PDT)
In-Reply-To: <n2rd1412c691005100510pdd55d7b7h71dd76c99d90a150@mail.gmail.com>
References: <n2rd1412c691005100510pdd55d7b7h71dd76c99d90a150@mail.gmail.com>
Date: Mon, 10 May 2010 15:56:11 -0400
Message-ID: <AANLkTinE4FZyhWi14_ZK5PvPkY8lNy78dCZIGdOOFQlq@mail.gmail.com>
Subject: Re: Class_for_HighFrequencyTerms
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd4884af6e14c048642ccdf
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd4884af6e14c048642ccdf
Content-Type: text/plain; charset=ISO-8859-1

Have you looked at TermFreqVector?

Best
Erick

On Mon, May 10, 2010 at 8:10 AM, manjula wijewickrema
<manjula53@gmail.com>wrote:

> Hi,
>
> If I index a document (single document) in Lucene, then how can I get the
> term frequencies (even the first and second highest occuring terms) of that
> document? Is there any class/method to do taht? If anybody knows, pls. help
> me.
>
> Thanks
> Manjula
>

--000e0cd4884af6e14c048642ccdf--

From java-user-return-46069-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 11 04:12:07 2010
Return-Path: <java-user-return-46069-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2923 invoked from network); 11 May 2010 04:12:07 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 11 May 2010 04:12:07 -0000
Received: (qmail 73384 invoked by uid 500); 11 May 2010 04:12:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73174 invoked by uid 500); 11 May 2010 04:12:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73166 invoked by uid 99); 11 May 2010 04:12:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 May 2010 04:12:04 +0000
X-ASF-Spam-Status: No, hits=-1.1 required=10.0
	tests=AWL,FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ssenecal.work@gmail.com designates 209.85.221.191 as permitted sender)
Received: from [209.85.221.191] (HELO mail-qy0-f191.google.com) (209.85.221.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 May 2010 04:11:58 +0000
Received: by qyk29 with SMTP id 29so7473437qyk.14
        for <java-user@lucene.apache.org>; Mon, 10 May 2010 21:11:37 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=fwERy/vljSfKh3mPsXCM57Ku3HCx+gS3SkiiGXFUdrA=;
        b=YjUAG5sF0Jw10ui+TWIPJLLZ7MibbzeadtYiK/WQEedXi93awx5dfWQoav3rH6fUVj
         nW//BlwG6VHcB3LGO1wCrbPNFtn2+FgGXPoACRmVuZrUVNh7GVo4qcnLZzdQQMDBBbyC
         knwdLvjYsORwJmc07bO/2/mqEE7TUo474c4gA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=OyoaBI2ktvig1aoRBCXAKr78yhjW2hmSvWajPd3NdNtanVRdrfo5kB94SFZo672PgL
         xdFQ66wrUXycBCOJx2ncElMmiQs8QBVVhC0FQoDY9oF8/Ut1Q5UB1Zyb6wMaNWqFXpQd
         it3YnLOqomy5vnu43iFDb6YK9v9UgtXtXBaLQ=
MIME-Version: 1.0
Received: by 10.229.222.208 with SMTP id ih16mr4092112qcb.55.1273551097136; 
	Mon, 10 May 2010 21:11:37 -0700 (PDT)
Received: by 10.229.74.81 with HTTP; Mon, 10 May 2010 21:11:37 -0700 (PDT)
In-Reply-To: <FD2CBD25-C482-4C8C-A6E6-DBEC891A5459@gmail.com>
References: <l2s15060d5e1004250302wdb368630q1e1e8b0f924b298f@mail.gmail.com>
	 <FD2CBD25-C482-4C8C-A6E6-DBEC891A5459@gmail.com>
Date: Tue, 11 May 2010 13:11:37 +0900
Message-ID: <AANLkTikjcx3Nif19_yHCNZn79myyW8iCEF37GZIu56gg@mail.gmail.com>
Subject: Re: merge results from physically separate hosts
From: Shaun Senecal <ssenecal.work@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Sorry for the delayed response...

Thanks, thats what I thought.  In my case, the schema of each index
would be slightly different, so I would want to run a PrefixQuery
against each index (all fields in each index) using the same query
text.  Maybe I would be able to take the results from each index and
then simply sort based on the ScoreDoc or something to get the most
relevant docs.

Is there a technical reason why Solr requires the index schema to be
the same, or was this simply the design that was chosen?


Shaun


On Mon, Apr 26, 2010 at 6:59 PM, Erik Hatcher <erik.hatcher@gmail.com> wrot=
e:
> Solr's distributed search feature is about querying multiple indexes and
> merging the results. Different indexes, but same schema.
>
> =A0 =A0 =A0 =A0Erik
>
> On Apr 25, 2010, at 6:02 AM, Shaun Senecal wrote:
>
>> Is there currently a way to take a query, run it on multiple hosts
>> containing different indexes, then merge the results from each host to
>> present to the user? =A0It looks like Solr can handle multiple hosts
>> supporting the same index, but my case requires each index to be
>> different.
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46070-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 11 09:43:42 2010
Return-Path: <java-user-return-46070-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68253 invoked from network); 11 May 2010 09:43:42 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 11 May 2010 09:43:42 -0000
Received: (qmail 32451 invoked by uid 500); 11 May 2010 09:43:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32182 invoked by uid 500); 11 May 2010 09:43:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32174 invoked by uid 99); 11 May 2010 09:43:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 May 2010 09:43:39 +0000
X-ASF-Spam-Status: No, hits=4.2 required=10.0
	tests=AWL,FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of manjula53@gmail.com designates 209.85.222.180 as permitted sender)
Received: from [209.85.222.180] (HELO mail-pz0-f180.google.com) (209.85.222.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 May 2010 09:43:34 +0000
Received: by pzk10 with SMTP id 10so1962130pzk.20
        for <java-user@lucene.apache.org>; Tue, 11 May 2010 02:43:14 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=CGnToBqfQN2iReMjcmXdGc+6D9g9A4dIyNX8SQ8eLtM=;
        b=JEYesNAYg+tk06Lee+jw4yqn84LeWotddwwpw47s/1sIxg9Q4i72+3zizy8E5/CgAO
         NQxkycmYkdowVHaSHHUP75kuakz7go8D+QWptULEZF609DEeBqoIhEqM6OXzq2pZqYDP
         50e99g52tYIuR8pdl5DLW4aKVNUGiPwUFjsOc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=HY0Hph404QWAzzcOgAy8QP0rCR5UYs+4eMtBcgZxfmJxgfe9O7n1Hkd4V+8NBjc+au
         hVY+O6YPlXNYxCRmUfVbqUzWi3O0Pyk87m+wBljQBeJ0gKUCVu/DvLN3pfvi777YSQwA
         RaN5Gqxf/r/NmyARKNzsiEIJWKogXDBwJWHoU=
MIME-Version: 1.0
Received: by 10.141.125.12 with SMTP id c12mr3610466rvn.142.1273570992245; 
	Tue, 11 May 2010 02:43:12 -0700 (PDT)
Received: by 10.140.147.1 with HTTP; Tue, 11 May 2010 02:43:12 -0700 (PDT)
In-Reply-To: <AANLkTinE4FZyhWi14_ZK5PvPkY8lNy78dCZIGdOOFQlq@mail.gmail.com>
References: <n2rd1412c691005100510pdd55d7b7h71dd76c99d90a150@mail.gmail.com>
	 <AANLkTinE4FZyhWi14_ZK5PvPkY8lNy78dCZIGdOOFQlq@mail.gmail.com>
Date: Tue, 11 May 2010 15:13:12 +0530
Message-ID: <AANLkTil59HXMgqV_O8EZQotstfJJ2BydsbPnS7SXxAqt@mail.gmail.com>
Subject: Re: Class_for_HighFrequencyTerms
From: manjula wijewickrema <manjula53@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00032556336296cb2e04864e5a40

--00032556336296cb2e04864e5a40
Content-Type: text/plain; charset=ISO-8859-1

Dear Erick,

I lokked for it and even added IndexReader.java and TermFreqVector.java
from
http://www.jarvana.com/jarvana/search?search_type=class&java_class=org.apache.lucene.index.IndexReader
.
But after adding the system indicated a lot of errors in the source code
IndexReader.java (eg: DirectoryOwningReader cannot be resolved to a
type, indexCommit
cannot be resolved to a type, SegmentInfos cannot be resolved, TermEnum
cannot be resolved to a type, etc.). I am using Lucene 2.9.1 and this
particular website has listed this source code under 2.9.1 version of
Lucene. What is the reason for this kind of scenario? Do I have to add
another JAR file (in order to solve this even I added
lucene-core-2.9.1-sources.jar, but nothing happened). Pls. be kind enough to
make a reply.

Tanks
Manjula

On Tue, May 11, 2010 at 1:26 AM, Erick Erickson <erickerickson@gmail.com>wrote:

> Have you looked at TermFreqVector?
>
> Best
> Erick
>
> On Mon, May 10, 2010 at 8:10 AM, manjula wijewickrema
> <manjula53@gmail.com>wrote:
>
> > Hi,
> >
> > If I index a document (single document) in Lucene, then how can I get the
> > term frequencies (even the first and second highest occuring terms) of
> that
> > document? Is there any class/method to do taht? If anybody knows, pls.
> help
> > me.
> >
> > Thanks
> > Manjula
> >
>

--00032556336296cb2e04864e5a40--

From java-user-return-46071-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 11 09:52:50 2010
Return-Path: <java-user-return-46071-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70241 invoked from network); 11 May 2010 09:52:49 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 11 May 2010 09:52:49 -0000
Received: (qmail 47790 invoked by uid 500); 11 May 2010 09:52:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47699 invoked by uid 500); 11 May 2010 09:52:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47691 invoked by uid 99); 11 May 2010 09:52:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 May 2010 09:52:46 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [193.51.247.27] (HELO olrik.inrp.fr) (193.51.247.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 May 2010 09:52:37 +0000
Received: from olrik.inrp.fr (olrik.inrp.fr [127.0.0.1])
	by localhost.olrik.inrp.fr (Postfix) with ESMTP id 152EE18EAD7
	for <java-user@lucene.apache.org>; Tue, 11 May 2010 11:52:11 +0200 (CEST)
Received: from madagascar.inrp.fr (madagascar.inrp.fr [195.83.134.93])
	by olrik.inrp.fr (Postfix) with ESMTP id 0A6C718EAD2
	for <java-user@lucene.apache.org>; Tue, 11 May 2010 11:52:11 +0200 (CEST)
Received: from [192.168.110.45] (unknown [193.51.247.13])
	by madagascar.inrp.fr (Postfix) with ESMTP id 03B2C8CCAF
	for <java-user@lucene.apache.org>; Tue, 11 May 2010 11:52:15 +0200 (CEST)
Message-Id: <9A525C49-5E48-47F2-9FB1-60AF97883547@activemath.org>
From: Paul Libbrecht <paul@activemath.org>
To: java-user@lucene.apache.org
In-Reply-To: <9D9D39B8-C2C7-4FA7-B567-D1B06DA46B69@activemath.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v936)
Subject: Re: best way to interest two queries?
Date: Tue, 11 May 2010 11:52:14 +0200
References: <9D9D39B8-C2C7-4FA7-B567-D1B06DA46B69@activemath.org>
X-Mailer: Apple Mail (2.936)
X-Virus-Checked: Checked by ClamAV on apache.org

Dear lucene experts,

Let me try to make this precise since there was not answer.

I have a query that's, about,
   a & b & c
and I have a good search result.
Now I want to know:

a) for the first page, which matches are matches for a, b, or c
b) for the remaining results (for the "tail"), are there matches of a, =20=

b, or c

Thus far, I'd only know the usage of the highlighter to go to fields, =20=

it's not exactly the same and it's slow.
I know I could use termDocs or another search-result for a,b, and c, =20
probably to annotate my initial results list; that could work well for =20=

a).

I still don't know what to do for b).

thanks for hints.

paul

Le 31-mars-10 =E0 23:00, Paul Libbrecht a =E9crit :
> I've been wandering around but I see no solution yet: I would like =20
> to intersect two query results: going through the list of one query =20=

> and indicating which ones actually match the other query or, even =20
> better, indicating that "passed this, nothing matches that query =20
> anymore".
>
> What should be the strategy?



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46072-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 11 10:01:55 2010
Return-Path: <java-user-return-46072-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72197 invoked from network); 11 May 2010 10:01:55 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 11 May 2010 10:01:55 -0000
Received: (qmail 58709 invoked by uid 500); 11 May 2010 10:01:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58587 invoked by uid 500); 11 May 2010 10:01:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58574 invoked by uid 99); 11 May 2010 10:01:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 May 2010 10:01:52 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,MIME_BASE64_BLANKS,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of adam.saltiel@gmail.com designates 209.85.217.214 as permitted sender)
Received: from [209.85.217.214] (HELO mail-gx0-f214.google.com) (209.85.217.214)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 May 2010 10:01:45 +0000
Received: by gxk6 with SMTP id 6so312651gxk.5
        for <java-user@lucene.apache.org>; Tue, 11 May 2010 03:01:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:x-rim-org-msg-ref-id
         :message-id:content-transfer-encoding:reply-to:x-priority:references
         :in-reply-to:sensitivity:importance:subject:to:from:date
         :content-type:mime-version;
        bh=qm/jXT8kGg/ihzZe9J+dx0WhO1DDzFS2gu39FpXO0pI=;
        b=pICh4rHqCOCfsTIV7KCN2Uh14ZbIVgV4wq2gMmxgcnEGL/4U92PvdGbIJxhRHEhULV
         8B/XZyrCHJGjtmvVDEXd0bkOftv+clW7x3UUsN24n/C2ody+1cuh5plaejlc9YUtn+2W
         MQ6wFU2yA8afqrErrB0KPfVC/pWjhwCgxzzWg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=x-rim-org-msg-ref-id:message-id:content-transfer-encoding:reply-to
         :x-priority:references:in-reply-to:sensitivity:importance:subject:to
         :from:date:content-type:mime-version;
        b=kzcerGEdoPOlNMDRXogFyw1mEfvUU5oGpL33BANE432hUSC7yYpK1ug5YWPB7asbR0
         o2l4ECvRF4aO/lTluDV5LGb/5g/WT2R4MNk6FZanyWgxBUhNJgY5rL175vI2H/9X5fFl
         G/d4GSf1TKci7ovB79cU9QSvcx6srXPUHpr3I=
Received: by 10.101.2.30 with SMTP id e30mr1890446ani.127.1273572083986;
        Tue, 11 May 2010 03:01:23 -0700 (PDT)
Received: from bda2169.bisx.produk.on.blackberry (bda-68-171-236-177.bise.eu.blackberry.com [68.171.236.177])
        by mx.google.com with ESMTPS id b1sm8727015anb.10.2010.05.11.03.01.22
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 11 May 2010 03:01:23 -0700 (PDT)
X-rim-org-msg-ref-id:2074142523
Message-ID:<2074142523-1273572081-cardhu_decombobulator_blackberry.rim.net-57823665-@bda152.bisx.produk.on.blackberry>
Content-Transfer-Encoding: base64
Reply-To: adam.saltiel@gmail.com
X-Priority: Normal
References: <n2rd1412c691005100510pdd55d7b7h71dd76c99d90a150@mail.gmail.com> <AANLkTinE4FZyhWi14_ZK5PvPkY8lNy78dCZIGdOOFQlq@mail.gmail.com><AANLkTil59HXMgqV_O8EZQotstfJJ2BydsbPnS7SXxAqt@mail.gmail.com>
In-Reply-To: <AANLkTil59HXMgqV_O8EZQotstfJJ2BydsbPnS7SXxAqt@mail.gmail.com>
Sensitivity: Normal
Importance: Normal
Subject: Re: Class_for_HighFrequencyTerms
To: java-user@lucene.apache.org
From: adam.saltiel@gmail.com
Date: Tue, 11 May 2010 10:01:20 +0000
Content-Type: text/plain; charset="Windows-1252"
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

U291bmRzIGxpa2UgeW91ciBwYXRoIGlzIG1lc3NlZCB1cCBhbmQgeW91J3JlIG5vdCB1c2luZyBt
YXZlbiBjb3JyZWN0bHkuIFN0YXJ0IHdpdGggdGhlIGphciB2ZXJzaW9uIHRoYXQgY29udGFpbnMg
dGhlIGNsYXNzIHlvdSByZXF1aXJlIGFuZCB1c2UgbWF2ZW4gcG9tIHRvIGNvcnJlY3RseSByZXNv
bHZlIGRlcGVuZGVuY2llcyANCkFkYW0NClNlbnQgdXNpbmcgQmxhY2tCZXJyea4gZnJvbSBPcmFu
Z2UNCg0KLS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0tLS0NCkZyb206IG1hbmp1bGEgd2lqZXdpY2ty
ZW1hIDxtYW5qdWxhNTNAZ21haWwuY29tPg0KRGF0ZTogVHVlLCAxMSBNYXkgMjAxMCAxNToxMzox
MiANClRvOiA8amF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnPg0KU3ViamVjdDogUmU6IENsYXNz
X2Zvcl9IaWdoRnJlcXVlbmN5VGVybXMNCg0KRGVhciBFcmljaywNCg0KSSBsb2trZWQgZm9yIGl0
IGFuZCBldmVuIGFkZGVkIEluZGV4UmVhZGVyLmphdmEgYW5kIFRlcm1GcmVxVmVjdG9yLmphdmEN
CmZyb20NCmh0dHA6Ly93d3cuamFydmFuYS5jb20vamFydmFuYS9zZWFyY2g/c2VhcmNoX3R5cGU9
Y2xhc3MmamF2YV9jbGFzcz1vcmcuYXBhY2hlLmx1Y2VuZS5pbmRleC5JbmRleFJlYWRlcg0KLg0K
QnV0IGFmdGVyIGFkZGluZyB0aGUgc3lzdGVtIGluZGljYXRlZCBhIGxvdCBvZiBlcnJvcnMgaW4g
dGhlIHNvdXJjZSBjb2RlDQpJbmRleFJlYWRlci5qYXZhIChlZzogRGlyZWN0b3J5T3duaW5nUmVh
ZGVyIGNhbm5vdCBiZSByZXNvbHZlZCB0byBhDQp0eXBlLCBpbmRleENvbW1pdA0KY2Fubm90IGJl
IHJlc29sdmVkIHRvIGEgdHlwZSwgU2VnbWVudEluZm9zIGNhbm5vdCBiZSByZXNvbHZlZCwgVGVy
bUVudW0NCmNhbm5vdCBiZSByZXNvbHZlZCB0byBhIHR5cGUsIGV0Yy4pLiBJIGFtIHVzaW5nIEx1
Y2VuZSAyLjkuMSBhbmQgdGhpcw0KcGFydGljdWxhciB3ZWJzaXRlIGhhcyBsaXN0ZWQgdGhpcyBz
b3VyY2UgY29kZSB1bmRlciAyLjkuMSB2ZXJzaW9uIG9mDQpMdWNlbmUuIFdoYXQgaXMgdGhlIHJl
YXNvbiBmb3IgdGhpcyBraW5kIG9mIHNjZW5hcmlvPyBEbyBJIGhhdmUgdG8gYWRkDQphbm90aGVy
IEpBUiBmaWxlIChpbiBvcmRlciB0byBzb2x2ZSB0aGlzIGV2ZW4gSSBhZGRlZA0KbHVjZW5lLWNv
cmUtMi45LjEtc291cmNlcy5qYXIsIGJ1dCBub3RoaW5nIGhhcHBlbmVkKS4gUGxzLiBiZSBraW5k
IGVub3VnaCB0bw0KbWFrZSBhIHJlcGx5Lg0KDQpUYW5rcw0KTWFuanVsYQ0KDQpPbiBUdWUsIE1h
eSAxMSwgMjAxMCBhdCAxOjI2IEFNLCBFcmljayBFcmlja3NvbiA8ZXJpY2tlcmlja3NvbkBnbWFp
bC5jb20+d3JvdGU6DQoNCj4gSGF2ZSB5b3UgbG9va2VkIGF0IFRlcm1GcmVxVmVjdG9yPw0KPg0K
PiBCZXN0DQo+IEVyaWNrDQo+DQo+IE9uIE1vbiwgTWF5IDEwLCAyMDEwIGF0IDg6MTAgQU0sIG1h
bmp1bGEgd2lqZXdpY2tyZW1hDQo+IDxtYW5qdWxhNTNAZ21haWwuY29tPndyb3RlOg0KPg0KPiA+
IEhpLA0KPiA+DQo+ID4gSWYgSSBpbmRleCBhIGRvY3VtZW50IChzaW5nbGUgZG9jdW1lbnQpIGlu
IEx1Y2VuZSwgdGhlbiBob3cgY2FuIEkgZ2V0IHRoZQ0KPiA+IHRlcm0gZnJlcXVlbmNpZXMgKGV2
ZW4gdGhlIGZpcnN0IGFuZCBzZWNvbmQgaGlnaGVzdCBvY2N1cmluZyB0ZXJtcykgb2YNCj4gdGhh
dA0KPiA+IGRvY3VtZW50PyBJcyB0aGVyZSBhbnkgY2xhc3MvbWV0aG9kIHRvIGRvIHRhaHQ/IElm
IGFueWJvZHkga25vd3MsIHBscy4NCj4gaGVscA0KPiA+IG1lLg0KPiA+DQo+ID4gVGhhbmtzDQo+
ID4gTWFuanVsYQ0KPiA+DQo+DQoNCg==



From java-user-return-46073-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 11 10:02:42 2010
Return-Path: <java-user-return-46073-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72273 invoked from network); 11 May 2010 10:02:41 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 11 May 2010 10:02:41 -0000
Received: (qmail 60522 invoked by uid 500); 11 May 2010 10:02:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60451 invoked by uid 500); 11 May 2010 10:02:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60443 invoked by uid 99); 11 May 2010 10:02:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 May 2010 10:02:39 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=FREEMAIL_FROM,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [212.82.110.145] (HELO web29008.mail.ird.yahoo.com) (212.82.110.145)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 11 May 2010 10:02:31 +0000
Received: (qmail 46926 invoked by uid 60001); 11 May 2010 10:02:11 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1273572131; bh=tLx1cD2iQQp+JxmD8TwSygAzCHexFFP1+K1Dhg0Blj8=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=sJqiASUtHApK+tpIKjE7/4yhy+J8QGGLLRpBiSotp5o3I9pDmqWm768/WPqjvLUG37uZTN7q2IQGFzVJiojNEP11cASi3CxhZZKooPyhdJty8ASMq9UAsUywi+hcWZ5YPuiAf+r/nUjFLNb+Qc1mtRWMR/j/inE67jCCQZc5tMc=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=q2DfWDOVSZFgl/Yk8s2pmF2AN2QblVSbEtIKleSAJ+hnxuHhlaOIrB4W3wbs3F2xnCh+N3+sKjg5QO+MaXHM5qngayYa3XMK9buHesBz0l/dRAPz2mTdpR7WfSXGQ++z/sw4aLIwtdCT6V0Ffw6oPH+4YLo/C6UQdYA6qdnDDZE=;
Message-ID: <55241.46827.qm@web29008.mail.ird.yahoo.com>
X-YMail-OSG: ypNTifsVM1ls1Ae6rZVsvpkeae6Gs4MwywixMV0tL9deX4a
 xpLTkSU6xBU4Fh.CJ1kIMJ1TOjCsFGzGyWwc1sPta0.fJuoopMFc_FahFurl
 h6Vg_KVeIwEDKf3qs1boMCAeo5jSCdbBlOVewTdhz4q3PVCt97MdNlmWHvvo
 KKI_9Kik.s9sh.QgzGfBeBCKgBplUYmLadFcwErVqpKUezagaDjiOvLiH..j
 OGHPpajrXOHDC8D7E4HhEcLOjPJRK996OIEDzAKW2oZ3g.VfZ.JfsrYSLsE.
 KSrvrko5UQOpl8TVuOvXTZ9TPCZpA475nIW5SZYVh_jAMXekYutGkLYw-
Received: from [193.36.230.96] by web29008.mail.ird.yahoo.com via HTTP; Tue, 11 May 2010 10:02:10 GMT
X-Mailer: YahooMailRC/374.4 YahooMailWebService/0.8.103.269680
References: <9D9D39B8-C2C7-4FA7-B567-D1B06DA46B69@activemath.org> <9A525C49-5E48-47F2-9FB1-60AF97883547@activemath.org>
Date: Tue, 11 May 2010 10:02:10 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: best way to interest two queries?
To: java-user@lucene.apache.org
In-Reply-To: <9A525C49-5E48-47F2-9FB1-60AF97883547@activemath.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

See https://issues.apache.org/jira/browse/LUCENE-1999=0A=0A=0A=0A----- Orig=
inal Message ----=0AFrom: Paul Libbrecht <paul@activemath.org>=0ATo: java-u=
ser@lucene.apache.org=0ASent: Tue, 11 May, 2010 10:52:14=0ASubject: Re: bes=
t way to interest two queries?=0A=0ADear lucene experts,=0A=0ALet me try to=
 make this precise since there was not answer.=0A=0AI have a query that's, =
about,=0A  a & b & c=0Aand I have a good search result.=0ANow I want to kno=
w:=0A=0Aa) for the first page, which matches are matches for a, b, or c=0Ab=
) for the remaining results (for the "tail"), are there matches of a, b, or=
 c=0A=0AThus far, I'd only know the usage of the highlighter to go to field=
s, it's not exactly the same and it's slow.=0AI know I could use termDocs o=
r another search-result for a,b, and c, probably to annotate my initial res=
ults list; that could work well for a).=0A=0AI still don't know what to do =
for b).=0A=0Athanks for hints.=0A=0Apaul=0A=0ALe 31-mars-10 =E0 23:00, Paul=
 Libbrecht a =E9crit :=0A> I've been wandering around but I see no solution=
 yet: I would like to intersect two query results: going through the list o=
f one query and indicating which ones actually match the other query or, ev=
en better, indicating that "passed this, nothing matches that query anymore=
".=0A> =0A> What should be the strategy?=0A=0A=0A=0A-----------------------=
----------------------------------------------=0ATo unsubscribe, e-mail: ja=
va-user-unsubscribe@lucene.apache.org=0AFor additional commands, e-mail: ja=
va-user-help@lucene.apache.org=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46074-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 11 11:06:19 2010
Return-Path: <java-user-return-46074-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82454 invoked from network); 11 May 2010 11:06:19 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 11 May 2010 11:06:19 -0000
Received: (qmail 3937 invoked by uid 500); 11 May 2010 11:06:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3607 invoked by uid 500); 11 May 2010 11:06:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3597 invoked by uid 99); 11 May 2010 11:06:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 May 2010 11:06:11 +0000
X-ASF-Spam-Status: No, hits=-0.5 required=10.0
	tests=AWL,FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rff.rff@gmail.com designates 209.85.219.215 as permitted sender)
Received: from [209.85.219.215] (HELO mail-ew0-f215.google.com) (209.85.219.215)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 May 2010 11:06:07 +0000
Received: by ewy7 with SMTP id 7so204597ewy.11
        for <java-user@lucene.apache.org>; Tue, 11 May 2010 04:05:46 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:from:date
         :message-id:subject:to:content-type;
        bh=+vKssgrd0l++nC1YWFM6wENmct7FXbhd8WB2V5BGY34=;
        b=d0rYFN7T3+WrMTVBSv9B0ClOCwT34+9zhSIvlrmLuAGmcdJmUZUg8FuifmdS5CDZFC
         gnREq/Dox+UiNdsAuGQkuCDPEQCCjzgs22lnVsXUADf9EHwkR3yYMoLU2SaZfMT7sFg8
         ISryVwvXuvD8NMGkXf1RON1YiNvj68d2iTN1g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=l0wLQPF3UmeVTb2YfArVh3T7P5T+yU4doxfoCLPhojxzaIICJEvfAG/TVmgAIXoOJu
         RiWZNHijR11gD9Z7LnpZj9aL+pCMnX45FAXgOBAl0uHOTzmsDVNhWPgqeZh2zFF6KREC
         2BWh/Kkzyh7hZ2CfFXUr0CkRu66x+dsDan87U=
Received: by 10.213.63.75 with SMTP id a11mr2406297ebi.9.1273575945731; Tue, 
	11 May 2010 04:05:45 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.213.11.6 with HTTP; Tue, 11 May 2010 04:05:25 -0700 (PDT)
From: gabriele renzi <rff.rff@gmail.com>
Date: Tue, 11 May 2010 13:05:25 +0200
Message-ID: <h2q828083e71005110405x5e7c30e6qbf0eea86f2964b56@mail.gmail.com>
Subject: External ValueSource and value mapping
To: lucene-user <java-user@lucene.apache.org>
Content-Type: text/plain; charset=ISO-8859-1

Hi everyone,

I am trying to implement something akin to  Solr's ExternalFileSource
backed by a Map object with plain lucene (as we are working on top of
an existing solution) and while it is easy to write a ValueSource that
does it I have a problem with the mapping phase.

Basically I have tried two things:
1. keep a map of  unique-ids for the documents, such as
 joe=10
 john = 20
and at runtime retrieve the unique-key field and use that to find the
value in the map
2. keep a map/array of _document ids_ as Solr's ExternalFileSource seems to do
 doc1=10
 doc2=20
and at runtime use the document id in floatValue as the lookup.

The problem I found is two-fold: the former solution seems to be
pretty slow, probably because of the need to fetch a Field for every
document involved in scoring, while the latter seems to be impossible:
as far as I can tell, when ValueSource.getValues is called different
index segments may be passed, meaning that the document id becomes a
non-unique key.
This also means I can't neithery precalculate this docIds/score
mapping, ena neither can I cache them using a hybrid solution.

 Looking at solr sources, this seems to be solved using
SolrIndexReader objects that have a #base attribute that can be used
to offset the document id, but as I said, we are using plain old
lucene's IndexReader objects and this seems impossible to replicate
using only them.

Is my assesent of the issue correct or am i missing something?
If it is, does someone have a solution for this, or has seen this
problem in the past and cares to share a workaround?

Thanks in advance.

-- 
blog en: http://www.riffraff.info
blog it: http://riffraff.blogsome.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46075-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 11 13:18:49 2010
Return-Path: <java-user-return-46075-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16118 invoked from network); 11 May 2010 13:18:49 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 11 May 2010 13:18:49 -0000
Received: (qmail 52843 invoked by uid 500); 11 May 2010 13:18:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52796 invoked by uid 500); 11 May 2010 13:18:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52788 invoked by uid 99); 11 May 2010 13:18:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 May 2010 13:18:46 +0000
X-ASF-Spam-Status: No, hits=-1.3 required=10.0
	tests=AWL,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [195.253.6.130] (HELO kmx10a.knipp.de) (195.253.6.130)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 May 2010 13:18:38 +0000
Received: from localhost (localhost [127.0.0.1])
	by kmx10a.knipp.de (Postfix) with ESMTP id 8AC292DF;
	Tue, 11 May 2010 15:18:16 +0200 (MESZ)
X-Knipp-VirusScanned: Yes
Received: from kmx10a.knipp.de ([127.0.0.1])
	by localhost (kmx10a.knipp.de [127.0.0.1]) (amavisd-new, port 10004)
	with ESMTP id Erj8NkgV9P2p; Tue, 11 May 2010 15:18:14 +0200 (MESZ)
Received: from hp9000.do.knipp.de (hp9000.do.knipp.de [195.253.2.54])
	by kmx10a.knipp.de (Postfix) with ESMTP id AD57C2DE;
	Tue, 11 May 2010 15:18:14 +0200 (MESZ)
Received: from [195.253.2.27] (mclane.do.knipp.de [195.253.2.27])
	by hp9000.do.knipp.de (@(#)Sendmail version 8.13.3 - Revision 1.000 - 1st August,2006/8.13.3) with ESMTP id o4BDIBAG006891;
	Tue, 11 May 2010 15:18:14 +0200 (MESZ)
Message-ID: <4BE95917.6040007@knipp.de>
Date: Tue, 11 May 2010 15:18:15 +0200
From: Klaus Malorny <Klaus.Malorny@knipp.de>
User-Agent: Mozilla/5.0 (X11; U; Linux i686 (x86_64); en-US; rv:1.9.3a5pre) Gecko/20100506 Shredder/3.2a1pre
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: spatial searches
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit


Hi all,

I hope someone can enlighten me. I am trying to figure out how spatial searches 
are to be implemented with Lucene. From walking through mailing lists and 
various web pages, looking at the JavaDoc and source code, I understand how the 
tiers work and how the search is limited by a special term query containing the 
ID(s) of the relevant grid cells.

However, it still puzzles me how, where and when the final distance filtering 
takes place. I see three possibilities: the "Filter" class, the 
"ValueSourceQuery" or the use of a subclass of "Collector". With my limited 
understanding of the inner working of Lucene, it seems to me that the first two 
ways more or less operate on the whole document set, i.e. prior to the moment 
where the term query for the tiers comes into effect, rendering it useless. The 
"Collector" approach seems to be much more appropriate, but additionally to the 
decision whether the document meets the distance condition or not, I would like 
to have different scores depending on the distance (lower score for larger 
distances). Originally I thought that the solution would be some kind of 
subclass of "Query", but haven't seen any hints pointing in this direction and I 
don't know whether I am able to implement that on my own. I fear that I 
completely misunderstand something. Thanks in advance for any hints.

Regards,

Klaus

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46076-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 11 13:28:07 2010
Return-Path: <java-user-return-46076-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19382 invoked from network); 11 May 2010 13:28:07 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 11 May 2010 13:28:07 -0000
Received: (qmail 67289 invoked by uid 500); 11 May 2010 13:28:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67261 invoked by uid 500); 11 May 2010 13:28:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67253 invoked by uid 99); 11 May 2010 13:28:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 May 2010 13:28:05 +0000
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [207.126.144.141] (HELO eu1sys200aog116.obsmtp.com) (207.126.144.141)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 11 May 2010 13:27:56 +0000
Received: from source ([193.36.230.103]) by eu1sys200aob116.postini.com ([207.126.147.11]) with SMTP
	ID DSNKS+lbReMoajezEwiFYa+8Ag5VxF4a4ibE@postini.com; Tue, 11 May 2010 13:27:35 UTC
Received: from blackex05.detica.com ([10.1.1.10]) by proxy02.detica.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Tue, 11 May 2010 14:27:32 +0100
Received: from uksrpblkexb01.detica.com ([10.1.1.38]) by blackex05.detica.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Tue, 11 May 2010 14:27:33 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01CAF10D.B637E275"
Subject: FieldCache and 2.9
Date: Tue, 11 May 2010 14:27:31 +0100
Message-ID: <8163028120305742991D2FB7F19412ABD472D9@uksrpblkexb01.detica.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: FieldCache and 2.9
Thread-Index: AcrxDbW+4c/cPCIwSLaPdEJxlf/ZAg==
From: "Carl Austin" <Carl.austin@detica.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 11 May 2010 13:27:33.0008 (UTC) FILETIME=[B65FC900:01CAF10D]

------_=_NextPart_001_01CAF10D.B637E275
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,

I have been using the FieldCache in lucene version 2.9 compared to that
in 2.4. The load time is massively decreased, however I am not seeing
any benefit in getting a field cache after re-open of an index reader
when I have only added a few extra documents.
A small test class is included below (based off one from Lucid
Imagination), that creates 5Mil docs, gets a field cache, creates
another few docs and gets the field cache again. I though the second get
would be very very fast, as only 1 segment should have changed, however
it takes more time for the reopen and cache get than it did the
original.

Am I doing something wrong here or have I misunderstood the new segment
changes?

Thanks

Carl


import java.io.File;

import org.apache.lucene.analysis.SimpleAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.index.IndexReader;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.search.FieldCache;
import org.apache.lucene.store.Directory;
import org.apache.lucene.store.FSDirectory;

public class ContrivedFCTest {

	public static void main(String[] args) throws Exception {
		Directory dir =3D FSDirectory.open(new File(args[0]));
		IndexWriter writer =3D new IndexWriter(dir, new
SimpleAnalyzer(), true,
				IndexWriter.MaxFieldLength.LIMITED);
		for (int i =3D 0; i < 5000000; i++) {
			if (i % 100000 =3D=3D 0) {
				System.out.println(i);
			}
			Document doc =3D new Document();
			doc.add(new Field("field", "String" + i,
Field.Store.NO,
					Field.Index.NOT_ANALYZED));
			writer.addDocument(doc);
		}
		writer.close();

		IndexReader reader =3D IndexReader.open(dir, true);
		long start =3D System.currentTimeMillis();
		FieldCache.DEFAULT.getStrings(reader, "field");
		long end =3D System.currentTimeMillis();
		System.out.println("load time for initial field cache:"
+ (end - start)
				/ 1000.0f + "s");

		writer =3D new IndexWriter(dir, new SimpleAnalyzer(),
false,
				IndexWriter.MaxFieldLength.LIMITED);
		for (int i =3D 5000001; i < 5000005; i++) {
			if (i % 100000 =3D=3D 0) {
				System.out.println(i);
			}
			Document doc =3D new Document();
			doc.add(new Field("field", "String" + i,
Field.Store.NO,
					Field.Index.NOT_ANALYZED));
			writer.addDocument(doc);
		}
		writer.close();

		IndexReader reader2 =3D reader.reopen(true);
		System.out.println("reader size =3D " +
reader2.numDocs());
		long start2 =3D System.currentTimeMillis();
		FieldCache.DEFAULT.getStrings(reader2, "field");
		long end2 =3D System.currentTimeMillis();
		System.out.println("load time for re-opened field
cache:"
				+ (end2 - start2) / 1000.0f + "s");
	}
}

This message should be regarded as confidential. If you have received thi=
s email in error please notify the sender and destroy it immediately.
Statements of intent shall only become binding when confirmed in hard cop=
y by an authorised signatory.  The contents of this email may relate to d=
ealings with other companies within the Detica Limited group of companies=
=2E

Detica Limited is registered in England under No: 1337451.

Registered offices: Surrey Research Park, Guildford, Surrey, GU2 7YP, Eng=
land.
=0D
------_=_NextPart_001_01CAF10D.B637E275--

From java-user-return-46077-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 11 13:41:45 2010
Return-Path: <java-user-return-46077-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21624 invoked from network); 11 May 2010 13:41:45 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 11 May 2010 13:41:45 -0000
Received: (qmail 83748 invoked by uid 500); 11 May 2010 13:41:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83670 invoked by uid 500); 11 May 2010 13:41:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83662 invoked by uid 99); 11 May 2010 13:41:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 May 2010 13:41:43 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of yseeley@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 May 2010 13:41:35 +0000
Received: by wya21 with SMTP id 21so618418wya.35
        for <java-user@lucene.apache.org>; Tue, 11 May 2010 06:41:15 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:sender:reply-to:received
         :in-reply-to:references:date:x-google-sender-auth:message-id:subject
         :from:to:content-type:content-transfer-encoding;
        bh=mGYL9EMbqooJ8wPkovGVpleyZohGC2Ej2headU6qKBc=;
        b=UV9Bcc5lD7Su4VyuJAmhwjkD4SNQ4v+JhtgIw/J5SBPZGNusS7LJAEVCRcljtD78mZ
         +hUrHOT+9B6QrXFrDaus1xDF52sVyy9JBMPnm9HK635k9Iz0g8w0+HG2UOuBo/nbHCW+
         H1iYICF1lvFNT2pEPfjoWejtqKBldFPEY4SxM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:reply-to:in-reply-to:references:date
         :x-google-sender-auth:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=Cgh+u+45QCAlH5+cRdtZf/Q1ptvYrz2j3Czpht4CU8qGsupoqNXmnUpf+MZOCwMjk2
         sDZGTyQjdYRCGApSbJz/0KS63iHr7wo9/9b6W1+3LyQ/pGfu/D8kE+eH+oXQ44ugqqkv
         li8QD5PpNbk+8CCZOSihwhDOxt1lKMftNNKFA=
MIME-Version: 1.0
Received: by 10.216.85.7 with SMTP id t7mr2204605wee.114.1273585274613; Tue, 
	11 May 2010 06:41:14 -0700 (PDT)
Sender: yseeley@gmail.com
Reply-To: yonik@lucidimagination.com
Received: by 10.216.22.140 with HTTP; Tue, 11 May 2010 06:41:14 -0700 (PDT)
In-Reply-To: <8163028120305742991D2FB7F19412ABD472D9@uksrpblkexb01.detica.com>
References: <8163028120305742991D2FB7F19412ABD472D9@uksrpblkexb01.detica.com>
Date: Tue, 11 May 2010 09:41:14 -0400
X-Google-Sender-Auth: lMd2IN-ZMYR4pirrCb_C3J1e0Q0
Message-ID: <AANLkTimPkDe8KNI0DF6Uh3LVc4JxlgFVVhUbX84-arv_@mail.gmail.com>
Subject: Re: FieldCache and 2.9
From: Yonik Seeley <yonik@lucidimagination.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

You are requesting the FieldCache entry from the top-level reader and
hence a whole new FieldCache entry must be created.
Lucene 2.9 sorting requests FieldCache entries at the segment level
and hence reuses entries for those segments that haven't changed.

-Yonik
Apache Lucene Eurocon 2010
18-21 May 2010 | Prague



On Tue, May 11, 2010 at 9:27 AM, Carl Austin <Carl.austin@detica.com> wrote=
:
> Hi,
>
> I have been using the FieldCache in lucene version 2.9 compared to that
> in 2.4. The load time is massively decreased, however I am not seeing
> any benefit in getting a field cache after re-open of an index reader
> when I have only added a few extra documents.
> A small test class is included below (based off one from Lucid
> Imagination), that creates 5Mil docs, gets a field cache, creates
> another few docs and gets the field cache again. I though the second get
> would be very very fast, as only 1 segment should have changed, however
> it takes more time for the reopen and cache get than it did the
> original.
>
> Am I doing something wrong here or have I misunderstood the new segment
> changes?
>
> Thanks
>
> Carl
>
>
> import java.io.File;
>
> import org.apache.lucene.analysis.SimpleAnalyzer;
> import org.apache.lucene.document.Document;
> import org.apache.lucene.document.Field;
> import org.apache.lucene.index.IndexReader;
> import org.apache.lucene.index.IndexWriter;
> import org.apache.lucene.search.FieldCache;
> import org.apache.lucene.store.Directory;
> import org.apache.lucene.store.FSDirectory;
>
> public class ContrivedFCTest {
>
> =A0 =A0 =A0 =A0public static void main(String[] args) throws Exception {
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0Directory dir =3D FSDirectory.open(new Fil=
e(args[0]));
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0IndexWriter writer =3D new IndexWriter(dir=
, new
> SimpleAnalyzer(), true,
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0IndexWrite=
r.MaxFieldLength.LIMITED);
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0for (int i =3D 0; i < 5000000; i++) {
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0if (i % 100000 =3D=3D 0) {
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0System.out=
.println(i);
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0Document doc =3D new Docum=
ent();
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0doc.add(new Field("field",=
 "String" + i,
> Field.Store.NO,
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0Field.Index.NOT_ANALYZED));
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0writer.addDocument(doc);
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0writer.close();
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0IndexReader reader =3D IndexReader.open(di=
r, true);
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0long start =3D System.currentTimeMillis();
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0FieldCache.DEFAULT.getStrings(reader, "fie=
ld");
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0long end =3D System.currentTimeMillis();
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0System.out.println("load time for initial =
field cache:"
> + (end - start)
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0/ 1000.0f =
+ "s");
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0writer =3D new IndexWriter(dir, new Simple=
Analyzer(),
> false,
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0IndexWrite=
r.MaxFieldLength.LIMITED);
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0for (int i =3D 5000001; i < 5000005; i++) =
{
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0if (i % 100000 =3D=3D 0) {
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0System.out=
.println(i);
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0Document doc =3D new Docum=
ent();
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0doc.add(new Field("field",=
 "String" + i,
> Field.Store.NO,
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0Field.Index.NOT_ANALYZED));
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0writer.addDocument(doc);
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0writer.close();
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0IndexReader reader2 =3D reader.reopen(true=
);
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0System.out.println("reader size =3D " +
> reader2.numDocs());
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0long start2 =3D System.currentTimeMillis()=
;
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0FieldCache.DEFAULT.getStrings(reader2, "fi=
eld");
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0long end2 =3D System.currentTimeMillis();
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0System.out.println("load time for re-opene=
d field
> cache:"
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0+ (end2 - =
start2) / 1000.0f + "s");
> =A0 =A0 =A0 =A0}
> }
>
> This message should be regarded as confidential. If you have received thi=
s email in error please notify the sender and destroy it immediately.
> Statements of intent shall only become binding when confirmed in hard cop=
y by an authorised signatory. =A0The contents of this email may relate to d=
ealings with other companies within the Detica Limited group of companies.
>
> Detica Limited is registered in England under No: 1337451.
>
> Registered offices: Surrey Research Park, Guildford, Surrey, GU2 7YP, Eng=
land.
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46078-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 11 13:47:53 2010
Return-Path: <java-user-return-46078-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22525 invoked from network); 11 May 2010 13:47:53 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 11 May 2010 13:47:53 -0000
Received: (qmail 90766 invoked by uid 500); 11 May 2010 13:47:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90724 invoked by uid 500); 11 May 2010 13:47:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90716 invoked by uid 99); 11 May 2010 13:47:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 May 2010 13:47:51 +0000
X-ASF-Spam-Status: No, hits=-1.6 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [207.126.144.129] (HELO eu1sys200aog110.obsmtp.com) (207.126.144.129)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 11 May 2010 13:47:42 +0000
Received: from source ([193.36.230.103]) by eu1sys200aob110.postini.com ([207.126.147.11]) with SMTP
	ID DSNKS+lf6oHHE2XeZRX2mE2Z4WTDiCcGe038@postini.com; Tue, 11 May 2010 13:47:22 UTC
Received: from blackex05.detica.com ([10.1.1.10]) by proxy02.detica.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Tue, 11 May 2010 14:47:21 +0100
Received: from uksrpblkexb01.detica.com ([10.1.1.38]) by blackex05.detica.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Tue, 11 May 2010 14:47:21 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: FieldCache and 2.9
Date: Tue, 11 May 2010 14:47:20 +0100
Message-ID: <8163028120305742991D2FB7F19412ABD472E6@uksrpblkexb01.detica.com>
In-Reply-To: <AANLkTimPkDe8KNI0DF6Uh3LVc4JxlgFVVhUbX84-arv_@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: FieldCache and 2.9
Thread-Index: AcrxD7KN63YFZjbRSEGv5hducP4+DgAADEzw
References: <8163028120305742991D2FB7F19412ABD472D9@uksrpblkexb01.detica.com> <AANLkTimPkDe8KNI0DF6Uh3LVc4JxlgFVVhUbX84-arv_@mail.gmail.com>
From: "Carl Austin" <Carl.austin@detica.com>
To: <java-user@lucene.apache.org>,
	<yonik@lucidimagination.com>
X-OriginalArrivalTime: 11 May 2010 13:47:21.0704 (UTC) FILETIME=[7AE46680:01CAF110]
X-Virus-Checked: Checked by ClamAV on apache.org

Ah, ok, thanks for that.=20
I had hoped that the field cache would do this for me, by going through =
the subreaders itself. Is this likely to be done in a future release?
I may have to implement some wrapper that does this anyway, and if so, =
can submit it as contrib if that would be useful?

Thanks

Carl

-----Original Message-----
From: yseeley@gmail.com [mailto:yseeley@gmail.com] On Behalf Of Yonik =
Seeley
Sent: 11 May 2010 14:41
To: java-user@lucene.apache.org
Subject: Re: FieldCache and 2.9

You are requesting the FieldCache entry from the top-level reader and =
hence a whole new FieldCache entry must be created.
Lucene 2.9 sorting requests FieldCache entries at the segment level and =
hence reuses entries for those segments that haven't changed.

-Yonik
Apache Lucene Eurocon 2010
18-21 May 2010 | Prague



On Tue, May 11, 2010 at 9:27 AM, Carl Austin <Carl.austin@detica.com> =
wrote:
> Hi,
>
> I have been using the FieldCache in lucene version 2.9 compared to=20
> that in 2.4. The load time is massively decreased, however I am not=20
> seeing any benefit in getting a field cache after re-open of an index=20
> reader when I have only added a few extra documents.
> A small test class is included below (based off one from Lucid=20
> Imagination), that creates 5Mil docs, gets a field cache, creates=20
> another few docs and gets the field cache again. I though the second=20
> get would be very very fast, as only 1 segment should have changed,=20
> however it takes more time for the reopen and cache get than it did=20
> the original.
>
> Am I doing something wrong here or have I misunderstood the new=20
> segment changes?
>
> Thanks
>
> Carl
>
>
> import java.io.File;
>
> import org.apache.lucene.analysis.SimpleAnalyzer;
> import org.apache.lucene.document.Document;
> import org.apache.lucene.document.Field; import=20
> org.apache.lucene.index.IndexReader;
> import org.apache.lucene.index.IndexWriter;
> import org.apache.lucene.search.FieldCache;
> import org.apache.lucene.store.Directory;
> import org.apache.lucene.store.FSDirectory;
>
> public class ContrivedFCTest {
>
> =A0 =A0 =A0 =A0public static void main(String[] args) throws Exception =
{
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0Directory dir =3D FSDirectory.open(new =
File(args[0]));
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0IndexWriter writer =3D new =
IndexWriter(dir, new=20
> SimpleAnalyzer(), true,
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0IndexWriter.MaxFieldLength.LIMITED);
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0for (int i =3D 0; i < 5000000; i++) {
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0if (i % 100000 =3D=3D =
0) {
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0System.out.println(i);
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0Document doc =3D new =
Document();
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0doc.add(new =
Field("field", "String" + i,=20
> Field.Store.NO,
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0Field.Index.NOT_ANALYZED));
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0writer.addDocument(doc);
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0writer.close();
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0IndexReader reader =3D =
IndexReader.open(dir, true);
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0long start =3D =
System.currentTimeMillis();
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0FieldCache.DEFAULT.getStrings(reader, =
"field");
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0long end =3D =
System.currentTimeMillis();
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0System.out.println("load time for =
initial field cache:"
> + (end - start)
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0/ =
1000.0f + "s");
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0writer =3D new IndexWriter(dir, new =
SimpleAnalyzer(),=20
> false,
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0IndexWriter.MaxFieldLength.LIMITED);
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0for (int i =3D 5000001; i < 5000005; =
i++) {
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0if (i % 100000 =3D=3D =
0) {
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0System.out.println(i);
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0Document doc =3D new =
Document();
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0doc.add(new =
Field("field", "String" + i,=20
> Field.Store.NO,
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0Field.Index.NOT_ANALYZED));
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0writer.addDocument(doc);
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0writer.close();
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0IndexReader reader2 =3D =
reader.reopen(true);
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0System.out.println("reader size =3D " + =

> reader2.numDocs());
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0long start2 =3D =
System.currentTimeMillis();
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0FieldCache.DEFAULT.getStrings(reader2, =
"field");
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0long end2 =3D =
System.currentTimeMillis();
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0System.out.println("load time for =
re-opened field=20
> cache:"
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0+ (end2 =
- start2) / 1000.0f + "s");
> =A0 =A0 =A0 =A0}
> }
>
> This message should be regarded as confidential. If you have received =
this email in error please notify the sender and destroy it immediately.
> Statements of intent shall only become binding when confirmed in hard =
copy by an authorised signatory. =A0The contents of this email may =
relate to dealings with other companies within the Detica Limited group =
of companies.
>
> Detica Limited is registered in England under No: 1337451.
>
> Registered offices: Surrey Research Park, Guildford, Surrey, GU2 7YP, =
England.
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

This message should be regarded as confidential. If you have received thi=
s email in error please notify the sender and destroy it immediately.
Statements of intent shall only become binding when confirmed in hard cop=
y by an authorised signatory.  The contents of this email may relate to d=
ealings with other companies within the Detica Limited group of companies=
=2E

Detica Limited is registered in England under No: 1337451.

Registered offices: Surrey Research Park, Guildford, Surrey, GU2 7YP, Eng=
land.
=0D

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46079-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 11 14:21:54 2010
Return-Path: <java-user-return-46079-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30302 invoked from network); 11 May 2010 14:21:54 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 11 May 2010 14:21:54 -0000
Received: (qmail 40836 invoked by uid 500); 11 May 2010 14:21:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40802 invoked by uid 500); 11 May 2010 14:21:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40794 invoked by uid 99); 11 May 2010 14:21:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 May 2010 14:21:52 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of luocan19826164@sohu.com designates 61.135.132.86 as permitted sender)
Received: from [61.135.132.86] (HELO relay.mail.sohu.com) (61.135.132.86)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 May 2010 14:21:43 +0000
Received: from 85737ec54efc4e1 (unknown [116.7.9.222])
	by relay.mail.sohu.com (Postfix) with ESMTPA id B577C698932
	for <java-user@lucene.apache.org>; Tue, 11 May 2010 22:20:04 +0800 (CST)
From: "luocanrao" <luocan19826164@sohu.com>
To: <java-user@lucene.apache.org>
Subject: is there some dangerous bug in lucene?
Date: Tue, 11 May 2010 22:20:46 +0800
Message-ID: <003001caf115$25fa2c40$71ee84c0$@com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0031_01CAF158.341D6C40"
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcrxFSOtmWIIfSARTZmpBVaWxDJ5yA==
Content-Language: zh-cn
x-cr-hashedpuzzle: Ac0T AdHG DMU3 Dr29 EjKp FRa6 GqIs Gq5B HVza HsJX Ij0b Im1O IzoP KcHM Keed KhSP;1;agBhAHYAYQAtAHUAcwBlAHIAQABsAHUAYwBlAG4AZQAuAGEAcABhAGMAaABlAC4AbwByAGcA;Sosha1_v1;7;{DE3C25C8-7E26-4F15-BB56-095B250EE5E2};bAB1AG8AYwBhAG4AMQA5ADgAMgA2ADEANgA0AEAAcwBvAGgAdQAuAGMAbwBtAA==;Tue, 11 May 2010 14:20:42 GMT;aQBzACAAdABoAGUAcgBlACAAcwBvAG0AZQAgAGQAYQBuAGcAZQByAG8AdQBzACAAYgB1AGcAIABpAG4AIABsAHUAYwBlAG4AZQA/AA==
x-cr-puzzleid: {DE3C25C8-7E26-4F15-BB56-095B250EE5E2}
X-SOHU-Antispam-Bayes: 0
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0031_01CAF158.341D6C40
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

I have a problem. I found the store field in a document is not consistent.

Here are some small case about my program.

 

Field A = new Filed(Store.Yes,FieldAValue);

FieldBValue.add(FieldAValue);            // FiledBValue is a container that
contains other store field value, FiledBValue is like a complete document
record

Field B = new Filed(Store.Yes,FieldBValue); 

Document doc = new Document;

doc.add(A); doc.add(B);

indexWriter.updateDocument(new Term(..),doc);

 

 

after a long time , today some body found some bug.

I observe that value of filed A is the old value, but the value of field B
is the new and right value.

At first I thought maybe it was the bug of indexwriter.getReader(), 

but after I restart the program, the bug is still existing.

Finally I have to reconstruct all the data to fix it.

 

Ps : I use FieldCache to store the value of field A, not field B

I use indexwriter.getReader() to get realtime search

 

I hope somebody to help me explain it. 


------=_NextPart_000_0031_01CAF158.341D6C40--


From java-user-return-46080-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 11 15:26:32 2010
Return-Path: <java-user-return-46080-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50280 invoked from network); 11 May 2010 15:26:32 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 11 May 2010 15:26:32 -0000
Received: (qmail 69495 invoked by uid 500); 11 May 2010 15:26:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69457 invoked by uid 500); 11 May 2010 15:26:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69449 invoked by uid 99); 11 May 2010 15:26:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 May 2010 15:26:30 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 72.14.220.153 as permitted sender)
Received: from [72.14.220.153] (HELO fg-out-1718.google.com) (72.14.220.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 May 2010 15:26:23 +0000
Received: by fg-out-1718.google.com with SMTP id 19so2684fgg.5
        for <java-user@lucene.apache.org>; Tue, 11 May 2010 08:26:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=Wo264nMP7SgHGWXutXY+W6/3HMN/SCxFyLKOJRtuLPA=;
        b=ParfG19wEQFk70ngitGOiYI69lXOL6FgsKk8rlnYiTKsvKvz1UbwBUZiJ23OrXvBuu
         2lYItBjZjrQxczfA6eraYVaa6rxzsvIwfSV59Zct3y1WbnUDrs+zo7vZ+TCl4sU7VFyG
         Ba9PFzqurcKP7MiJLlVTxxmN/FBW3aWCRs3uc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=eLnfuJFVHBvRFSikmAu74titZKr0L2r1JJsGfS/mzHR2IRTS7mWKZfq8b9AU9WsVAT
         MNreEztOCz0Fwja0Ftrqgko3GewCHJdO7BJl9iUkDa4RGm+GYSjf8BVoPHUcQcBTyJgU
         SmY5fEW6dwEMe1IAX/x79bWcXGWELNnNV4eJs=
Received: by 10.204.22.75 with SMTP id m11mr435291bkb.51.1273591562945; Tue, 
	11 May 2010 08:26:02 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.54.198 with HTTP; Tue, 11 May 2010 08:25:42 -0700 (PDT)
In-Reply-To: <003001caf115$25fa2c40$71ee84c0$@com>
References: <003001caf115$25fa2c40$71ee84c0$@com>
From: Ian Lea <ian.lea@gmail.com>
Date: Tue, 11 May 2010 16:25:42 +0100
Message-ID: <AANLkTikir-vYDzVi9NnRpCfw86bnbtRxqQbNXwTctLLl@mail.gmail.com>
Subject: Re: is there some dangerous bug in lucene?
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

> is there some dangerous bug in lucene?

Highly unlikely.  Much more likely that there is a bug in your code,
perhaps somewhere in the confusing (to me, reading your uncompilable
code snippet) cross linking of values between fields A and B.  Or
you've got duplicate docs in the index.  Or something completely
different.

If you really do think it is a problem in lucene itself, or in your
usage of lucene, I suggest that you break it down to the smallest
possible self-contained test case or program that demonstrates the
problem and post it here.  And tell us what version of lucene you are
using.  Before doing that it would be worth using Luke to examine the
index to double check that it holds what you thing it does.


--
Ian.


On Tue, May 11, 2010 at 3:20 PM, luocanrao <luocan19826164@sohu.com> wrote:
> I have a problem. I found the store field in a document is not consistent=
.
>
> Here are some small case about my program.
>
>
>
> Field A =3D new Filed(Store.Yes,FieldAValue);
>
> FieldBValue.add(FieldAValue); =A0 =A0 =A0 =A0 =A0 =A0// FiledBValue is a =
container that
> contains other store field value, FiledBValue is like a complete document
> record
>
> Field B =3D new Filed(Store.Yes,FieldBValue);
>
> Document doc =3D new Document;
>
> doc.add(A); doc.add(B);
>
> indexWriter.updateDocument(new Term(..),doc);
>
>
>
>
>
> after a long time , today some body found some bug.
>
> I observe that value of filed A is the old value, but the value of field =
B
> is the new and right value.
>
> At first I thought maybe it was the bug of indexwriter.getReader(),
>
> but after I restart the program, the bug is still existing.
>
> Finally I have to reconstruct all the data to fix it.
>
>
>
> Ps : I use FieldCache to store the value of field A, not field B
>
> I use indexwriter.getReader() to get realtime search
>
>
>
> I hope somebody to help me explain it.
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46081-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 11 15:31:43 2010
Return-Path: <java-user-return-46081-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52338 invoked from network); 11 May 2010 15:31:42 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 11 May 2010 15:31:42 -0000
Received: (qmail 82501 invoked by uid 500); 11 May 2010 15:31:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82467 invoked by uid 500); 11 May 2010 15:31:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82459 invoked by uid 99); 11 May 2010 15:31:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 May 2010 15:31:40 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.211.189 as permitted sender)
Received: from [209.85.211.189] (HELO mail-yw0-f189.google.com) (209.85.211.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 May 2010 15:31:34 +0000
Received: by ywh27 with SMTP id 27so2614362ywh.20
        for <java-user@lucene.apache.org>; Tue, 11 May 2010 08:31:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=T5aWvDVVWn+PaiU2QZwxbbdv3Jgg+iBYrFuiS3r8BOs=;
        b=EfUMnL4b9yfn+ZstcDfEU/deedVzs65sqSYu/SRt7Yzmf4zGSUVa3mtKguLzlSbtoA
         zzGxopAPEKqXcZY7Ll80XIqsCrzRj6kiKUwNQhqK+zC2nodI0O4JaJueO5G6zCcZm0nu
         6duMsUHlQ4Cox7tBA60yHHnlkQJ9AToMTD2gI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=sUwT8vjf3OGd3mU41Rb08ArJjBLJ8stdZ6dMXbsCMpq6tDmpI/P6w8dEoG3+5JOfDN
         nKqKS90gYSIp5/B2lMOCXs7kgiRfke5HkK7uie8s075xFEFCNIykRX1ECXfI0Oo+XcXU
         fbRgiq5FDtZQShlUm8pzArOKbpVz9VmbcPA+o=
MIME-Version: 1.0
Received: by 10.151.28.14 with SMTP id f14mr8845092ybj.398.1273591873237; Tue, 
	11 May 2010 08:31:13 -0700 (PDT)
Received: by 10.151.43.7 with HTTP; Tue, 11 May 2010 08:31:13 -0700 (PDT)
In-Reply-To: <AANLkTikir-vYDzVi9NnRpCfw86bnbtRxqQbNXwTctLLl@mail.gmail.com>
References: <003001caf115$25fa2c40$71ee84c0$@com>
	 <AANLkTikir-vYDzVi9NnRpCfw86bnbtRxqQbNXwTctLLl@mail.gmail.com>
Date: Tue, 11 May 2010 11:31:13 -0400
Message-ID: <AANLkTinyEZSPUyNOez5dQDVjSJuNpG0n3y7FhrVzvNm-@mail.gmail.com>
Subject: Re: is there some dangerous bug in lucene?
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd25d123173d6048653377a
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd25d123173d6048653377a
Content-Type: text/plain; charset=ISO-8859-1

Is it possible that you're looking at the deleted document? When you update
a document you're actually deleting the old one and adding a new one....

If not, I second Ian's comment that a self-contained test case will be very
useful.

HTH
Erick

On Tue, May 11, 2010 at 11:25 AM, Ian Lea <ian.lea@gmail.com> wrote:

> > is there some dangerous bug in lucene?
>
> Highly unlikely.  Much more likely that there is a bug in your code,
> perhaps somewhere in the confusing (to me, reading your uncompilable
> code snippet) cross linking of values between fields A and B.  Or
> you've got duplicate docs in the index.  Or something completely
> different.
>
> If you really do think it is a problem in lucene itself, or in your
> usage of lucene, I suggest that you break it down to the smallest
> possible self-contained test case or program that demonstrates the
> problem and post it here.  And tell us what version of lucene you are
> using.  Before doing that it would be worth using Luke to examine the
> index to double check that it holds what you thing it does.
>
>
> --
> Ian.
>
>
> On Tue, May 11, 2010 at 3:20 PM, luocanrao <luocan19826164@sohu.com>
> wrote:
> > I have a problem. I found the store field in a document is not
> consistent.
> >
> > Here are some small case about my program.
> >
> >
> >
> > Field A = new Filed(Store.Yes,FieldAValue);
> >
> > FieldBValue.add(FieldAValue);            // FiledBValue is a container
> that
> > contains other store field value, FiledBValue is like a complete document
> > record
> >
> > Field B = new Filed(Store.Yes,FieldBValue);
> >
> > Document doc = new Document;
> >
> > doc.add(A); doc.add(B);
> >
> > indexWriter.updateDocument(new Term(..),doc);
> >
> >
> >
> >
> >
> > after a long time , today some body found some bug.
> >
> > I observe that value of filed A is the old value, but the value of field
> B
> > is the new and right value.
> >
> > At first I thought maybe it was the bug of indexwriter.getReader(),
> >
> > but after I restart the program, the bug is still existing.
> >
> > Finally I have to reconstruct all the data to fix it.
> >
> >
> >
> > Ps : I use FieldCache to store the value of field A, not field B
> >
> > I use indexwriter.getReader() to get realtime search
> >
> >
> >
> > I hope somebody to help me explain it.
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd25d123173d6048653377a--

From java-user-return-46082-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 11 17:43:14 2010
Return-Path: <java-user-return-46082-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88330 invoked from network); 11 May 2010 17:43:14 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 11 May 2010 17:43:14 -0000
Received: (qmail 5234 invoked by uid 500); 11 May 2010 17:43:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5119 invoked by uid 500); 11 May 2010 17:43:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5111 invoked by uid 99); 11 May 2010 17:43:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 May 2010 17:43:11 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of spencertickner@gmail.com designates 209.85.222.180 as permitted sender)
Received: from [209.85.222.180] (HELO mail-pz0-f180.google.com) (209.85.222.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 May 2010 17:43:04 +0000
Received: by pzk10 with SMTP id 10so2204266pzk.20
        for <java-user@lucene.apache.org>; Tue, 11 May 2010 10:42:42 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=B/YvpMj0FBKi77xD8BqnXa73/WDbPK0CcgzqJlEljoI=;
        b=VZEPk4YEFrvhD3RjGX0bHD/zNxCsXce4XTg/l8BaMK3++FyVOeeifwHmIc6hs5ZEJn
         suwGiVLAM7oz6KazdQU1HHY1ZsCsCxP9/8MuEOOoK8hdziTEvgKRPcca2ZwSwDa4KRZK
         aATg8HwnqKcacaFpqSBE1zY3sA2GUf6JV1sXk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=hySs8ld/Gwyd6mP8+NfFJSifdZW6dOm+hkafzK/QhQaproezP5CG1k8AGO+c0GAPS5
         ftgOmxbRswgRxlx8IF6izhnN7toDnbdNVq/K2KhFibkcv1T2PNDql5KtDSbSyJhinmkB
         CU/aHx20pdcTUR+nvgVol8x/7L19aLcTil5Q4=
MIME-Version: 1.0
Received: by 10.142.117.27 with SMTP id p27mr4209163wfc.252.1273599762805; 
	Tue, 11 May 2010 10:42:42 -0700 (PDT)
Received: by 10.142.213.2 with HTTP; Tue, 11 May 2010 10:42:42 -0700 (PDT)
Date: Tue, 11 May 2010 10:42:42 -0700
Message-ID: <AANLkTinkg2GCWPGua3q6uX5zickgJVjuYPY1lLQtSGWn@mail.gmail.com>
Subject: Location of HTMLStripCharFilter
From: Spencer Tickner <spencertickner@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Everyone, and thanks in advance for the help. I downloaded the
latest 4.0 dev release of the lucene/solr trunk. Everything seems to
be fine except I can't for the life of me find the HTMLStripCharFilter
Class. I've been poking around for awhile and I figure I'm missing
something incredibly obvious, but I'm at the point where I have to lay
myself at your mercy and ask for help.

Thanks,

Spence

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46083-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 11 17:54:13 2010
Return-Path: <java-user-return-46083-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90654 invoked from network); 11 May 2010 17:54:12 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 11 May 2010 17:54:12 -0000
Received: (qmail 30205 invoked by uid 500); 11 May 2010 17:54:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30175 invoked by uid 500); 11 May 2010 17:54:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30167 invoked by uid 99); 11 May 2010 17:54:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 May 2010 17:54:10 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spencertickner@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 May 2010 17:54:04 +0000
Received: by vws4 with SMTP id 4so1118363vws.35
        for <java-user@lucene.apache.org>; Tue, 11 May 2010 10:53:43 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=Wzh6tyCXXQM/LDVM2GvqUpgcbpjIuRY0P9x1Gsi/bh4=;
        b=CpI+UNip0KjasSFFqT2hT2JYGQlwMyvXVJl96z62TQv2YrG/6vDZ7aOWddlJAMNhw8
         aO++1ApcZhzawBlh+LTI+Znpb0VQCd1WbgwJYCwyFCm3Ehc86YZgeyHfMaSGfs4zMFWH
         S0CbemjAulm7Gz5a+VQJXoRyng/ekzccqz7DU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=g6h7308wVz0d2InxRoZ57tvvY+xdYY7aHUe2iYUIPNjedkiAmzO9G/zydNnNcdIhXY
         gzjTjGrA0qwH8jowpAYwZD51rNx+rKUTCT7uD/F/TufXCEeFmglG2Ap51ecMK1naG9tC
         qWz6VfXqbYxfbCkCveOaCb0aowb1VjT82qaIo=
MIME-Version: 1.0
Received: by 10.220.107.161 with SMTP id b33mr359733vcp.253.1273600422705; 
	Tue, 11 May 2010 10:53:42 -0700 (PDT)
Received: by 10.220.70.196 with HTTP; Tue, 11 May 2010 10:53:42 -0700 (PDT)
In-Reply-To: <AANLkTinkg2GCWPGua3q6uX5zickgJVjuYPY1lLQtSGWn@mail.gmail.com>
References: <AANLkTinkg2GCWPGua3q6uX5zickgJVjuYPY1lLQtSGWn@mail.gmail.com>
Date: Tue, 11 May 2010 10:53:42 -0700
Message-ID: <AANLkTildHZD0h8ctrz1sU-ax6IfAx_qXeT0rvA3h748V@mail.gmail.com>
Subject: Re: Location of HTMLStripCharFilter
From: Spencer Tickner <spencertickner@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8

Sorry everyone,, found it in modules. Please disregard.

Thanks,

Spence

On Tue, May 11, 2010 at 10:42 AM, Spencer Tickner
<spencertickner@gmail.com> wrote:
> Hi Everyone, and thanks in advance for the help. I downloaded the
> latest 4.0 dev release of the lucene/solr trunk. Everything seems to
> be fine except I can't for the life of me find the HTMLStripCharFilter
> Class. I've been poking around for awhile and I figure I'm missing
> something incredibly obvious, but I'm at the point where I have to lay
> myself at your mercy and ask for help.
>
> Thanks,
>
> Spence
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46084-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 11 18:58:48 2010
Return-Path: <java-user-return-46084-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14300 invoked from network); 11 May 2010 18:58:47 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 11 May 2010 18:58:47 -0000
Received: (qmail 25345 invoked by uid 500); 11 May 2010 18:58:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25297 invoked by uid 500); 11 May 2010 18:58:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25289 invoked by uid 99); 11 May 2010 18:58:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 May 2010 18:58:45 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=SPF_PASS,URIBL_RED
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [198.147.195.5] (HELO flicker.bmc.com) (198.147.195.5)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 11 May 2010 18:58:38 +0000
Received: by flicker.bmc.com (Postfix, from userid 13749)
	id 1402E1E6E47; Tue, 11 May 2010 11:58:17 -0700 (MST)
Received: from PHX-HTPRD-01.adprod.bmc.com (phx-htprd-01.adprod.bmc.com [172.24.32.7])
	by flicker.bmc.com (Postfix) with ESMTP id 0AC601E6DFF
	for <java-user@lucene.apache.org>; Tue, 11 May 2010 11:58:17 -0700 (MST)
Received: from PHXCCRPRD02.adprod.bmc.com ([172.24.32.181]) by
 PHX-HTPRD-01.adprod.bmc.com ([172.24.32.7]) with mapi; Tue, 11 May 2010
 12:58:17 -0600
From: "Woolf, Ross" <Ross_Woolf@BMC.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Tue, 11 May 2010 12:57:56 -0600
Subject: RE: IndexWriter and memory usage
Thread-Topic: IndexWriter and memory usage
Thread-Index: AcrwGqkrvc7eBTQ2QBCZhcEcHJGa9ABHnGhw
Message-ID: <492379B6AA909E4FAF672AACCA0EADC25CC134E53B@PHXCCRPRD02.adprod.bmc.com>
References: <492379B6AA909E4FAF672AACCA0EADC24A40EE9B10@PHXCCRPRD02.adprod.bmc.com>
	 <492379B6AA909E4FAF672AACCA0EADC25CBAA42E77@PHXCCRPRD02.adprod.bmc.com>
	 <o2y9ac0c6aa1004140312wc3c74ffdp57158f871761cdda@mail.gmail.com>
	 <492379B6AA909E4FAF672AACCA0EADC25CBABBED4D@PHXCCRPRD02.adprod.bmc.com>
	 <n2w9ac0c6aa1004141352s5edb3082o2f1952626c551450@mail.gmail.com>
	 <492379B6AA909E4FAF672AACCA0EADC25CC066FD36@PHXCCRPRD02.adprod.bmc.com>
	 <i2i9ac0c6aa1004270340heec28687zc734ebfbbae10bd3@mail.gmail.com>
	 <492379B6AA909E4FAF672AACCA0EADC25CC09D6A1A@PHXCCRPRD02.adprod.bmc.com>
	 <v2k9ac0c6aa1004291307z9aa93222y7512e27808eeb9db@mail.gmail.com>
	 <492379B6AA909E4FAF672AACCA0EADC25CC106250D@PHXCCRPRD02.adprod.bmc.com>
 <i2v9ac0c6aa1005100126od669496anaec10961d42a4b1f@mail.gmail.com>
In-Reply-To: <i2v9ac0c6aa1005100126od669496anaec10961d42a4b1f@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: yes
X-MS-TNEF-Correlator:
x-cr-hashedpuzzle: BN5z BRa3 BgyR Bz/u B8qc DJxV DP5Z EgS/ EopH FGqC G8JH
 HeTA IcFP IxG7 I8Yg
 J7Sn;1;agBhAHYAYQAtAHUAcwBlAHIAQABsAHUAYwBlAG4AZQAuAGEAcABhAGMAaABlAC4AbwByAGcA;Sosha1_v1;7;{A34673C4-A391-44F5-B1B9-9FAA3C02A9A6};cgBvAHMAcwBfAHcAbwBvAGwAZgBAAGIAbQBjAC4AYwBvAG0A;Tue,
 11 May 2010 18:57:56
 GMT;UgBFADoAIABJAG4AZABlAHgAVwByAGkAdABlAHIAIABhAG4AZAAgAG0AZQBtAG8AcgB5ACAAdQBzAGEAZwBlAA==
x-cr-puzzleid: {A34673C4-A391-44F5-B1B9-9FAA3C02A9A6}
acceptlanguage: en-US
Content-Type: multipart/mixed;
	boundary="_002_492379B6AA909E4FAF672AACCA0EADC25CC134E53BPHXCCRPRD02ad_"
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

--_002_492379B6AA909E4FAF672AACCA0EADC25CC134E53BPHXCCRPRD02ad_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Still working on some of the things you ask, namely searching without index=
ing.  I need to modify our code and the general indexing process takes 2 ho=
urs, so I won't have a quick turn around on that.  We also have a hard time=
 answering the question about items that are normal but do they use more th=
an the 16 MB.  The heap dump does not allow us to quickly identify specific=
s on objects like we show in images below, so we really don't know what the=
 amount of memory is used up in objects of this sort.  We only know that by=
te[] total for all is at 197891887.

However, I have provided another image that breaks down the memory usage fr=
om the heap.   A big question we have is that we talk about the 16 mb buffe=
r, but is there other memory used by Lucene beyond that that we should expe=
ct to see?=20

http://i39.tinypic.com/o0o560.jpg

we have 197891887 used in byte[] (anyone we look at is related in some way =
to the index writer)
we have 169263904 used in char[] (these are related to the index writer too=
)
we have 72658944 used in FreqProxTermsWriter$PostingList
we have 37722668 used in RawPostingList[]

All of these are well over the 16mb.  So we are a little lost as to what we=
 should expect to see when we look at the memory usage

I've attached the patch and the CheckIndex files.  Unfortunately on the pat=
ch I guess my editor made some space line changes, so you get a lot of extr=
a items in the patch that really are not any changes other than tab/space. =
=20

If you are open to a live share again, then maybe you could look at this da=
ta quicker than the screen shots I send. =20

-----Original Message-----
From: Michael McCandless [mailto:lucene@mikemccandless.com]=20
Sent: Monday, May 10, 2010 2:27 AM
To: java-user@lucene.apache.org
Subject: Re: IndexWriter and memory usage

Hmmmm...

Your usage (searching for old doc & updating it, to add new fields) is fine=
.

But: what memory usage do you see if you open a searcher, and search
for all docs, but don't open an IndexWriter?  We need to tease apart
the IndexReader vs IndexWriter memory usage you are seeing.  Also, can
you post the output of CheckIndex (java
org.apache.lucene.index.CheckIndex /path/to/index) of your fully built
index?  That may give some hints about expected memory usage of IR (eg
if # unique terms is large).

More comments below:

On Thu, May 6, 2010 at 1:03 PM, Woolf, Ross <Ross_Woolf@bmc.com> wrote:
> Sorry to be so long in getting back on this. The patch you provided has i=
mproved the situation but we are still seeing some memory loss. =A0The foll=
owing are some images from the heap dump. =A0I'll share with you what we ar=
e seeing now.
>
> This first image shows the memory pattern. =A0Our fist commit takes place=
 at about 3:54 when the steady trend up takes a drop and the new cycle begi=
ns. =A0 What we have found is the 2422 fix has made the memory in the first=
 phase before the commit much better (and I'm sure throughout the entire ru=
n). =A0But as you can see after the commit then we then again begin to lose=
 memory. =A0One of the pieces of info to know about this is what you are se=
eing, we have 5 threads that are pushing data to our Lucene plugin. =A0If w=
e drop it down to 1 thread then we are much more successful and can actuall=
y index all of our data without running out of memory but at 5 threads it g=
ets into trouble. =A0We still see a trend up in memory usage, but not as se=
vere as when we use the multiple threads.
> http://tinypic.com/view.php?pic=3D2w6bf68&s=3D5

Can you post the output of "svn diff" on the 2.9 code base you're
using?  I just want to look & verify all issues we've discussed are
included in your changes.  The fact that 1 thread is fine and 5
threads are not still sounds like a symptom of LUCENE-2283.

Also, does that heap usage graph exclude garbage?  Or, alternatively,
can you provoke an OOME w/ 512 MB heap and then capture the heap dump
at that point?

> There is another piece of the picture that I think might be coming into p=
lay. =A0We have plugged Lucene into a legacy app and are subject to how we =
can get it to deliver the data that we are indexing. =A0In some scenarios (=
like the one we are having this problem with) we are building our documents=
 progressively (adding fields to the document through the process). =A0What=
 you see before the first commit is the legacy system handing us the first =
field for many documents. Once we have gotten all of "field 1" for all docu=
ments then we commit that data into the index. =A0Then the system starts fe=
eding us "field 2." =A0So we perform a search to see if the document alread=
y exists (for the scenario you are seeing it does) and so it retrieves the =
original document (we store a document ID) and it then adds the new field o=
f data to the existing document and we "update" the document in the index. =
=A0After the first commit, the rest of the process is one where a document =
already exist and so the new field is added and and the document is updated=
. =A0It is in this process that we start rapidly losing memory. =A0The foll=
owing images show some examples of common areas where memory is being held.
>
> http://tinypic.com/view.php?pic=3D11vkwnb&s=3D5

This looks like "normal" memory usage of IndexWriter -- these are the
recycled buffers used for holding stored fields.  However: the net RAM
used by this allocation should not exceed your 16 MB IW ram buffer
size -- does it?

> http://tinypic.com/view.php?pic=3Dabq9fp&s=3D5

This one is the byte[] buffer used by CompoundFileReader, opened by
IndexReader.  It's odd that you have so many of these (if I'm reading
this correctly) -- are you certain all opened readers are being
closed?  How many segments do you have in your index?  Or... are there
many unique threads doing the searching?  EG do you create a new
thread for every search or update?

> http://tinypic.com/view.php?pic=3D25pskyp&s=3D5

This one is also normal memory used by IndexWriter, but as above, the
net RAM used by this allocation (summed w/ the above one) should not
exceed your 16 MB IW ram buffer size.

> As mentioned, we are subject to how we can have the legacy app feed us th=
e data and so this is why we do it this way. =A0We treat this system as a r=
eal time system and at anytime the legacy system may send us a field that n=
eeds to be added or updated to a document. =A0So we search for the document=
 and if found we either add or update a field if the field is already exist=
ing in the document. =A0So I started to wonder if a clue in this memory los=
s comes from the fact that we are retrieving an existing document and then =
adding to it and updating.
>
> Now, if we eliminate the updating and simply add each item as a new docum=
ent (which we did just to test but won't be adequate for our running system=
), then we still see a slight trend upward in memory usage and the followin=
g images show that now most of the =A0memory is consumed in char[] rather t=
han the byte[] we saw before. =A0We don't know if this is normal and expect=
ed, or if it is something to be concerned about as well.
>
> http://tinypic.com/view.php?pic=3Dvfgkyt&s=3D5

That memory usage is normal -- it's used by the in-RAM terms index of
your opened IndexReader.  But I'd like to see the memory usage of
simply opening your IndexReader and searching for documents to update,
but not opening an IndexWriter at all.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


--_002_492379B6AA909E4FAF672AACCA0EADC25CC134E53BPHXCCRPRD02ad_
Content-Type: application/x-zip-compressed; name="LuceneFix2.zip"
Content-Description: LuceneFix2.zip
Content-Disposition: attachment; filename="LuceneFix2.zip"; size=8727;
	creation-date="Tue, 11 May 2010 12:37:33 GMT";
	modification-date="Tue, 11 May 2010 12:37:33 GMT"
Content-Transfer-Encoding: base64

UEsDBBQAAAAIACxeqzz/4A72ohwAANxnAAAQAAAATHVjZW5lRml4Mi5wYXRjaM09a1MbR7afTVX+
Q8e7yUpIGpAQD1smZfPwhl0DLsDJ3ptyuQZphCaWZsg8wGyW/37Pq3u6Z0ZIkF3vVTkI+nH6nNOn
z6sfOYpGwZeX6lf/xl+Lk6s1/9ofToK1aT4MomDNj/zpXRqmaxfx5yAK/xkkHrb8ZmX3j3++Wel0
Oo8c+FkjCW7CNIwj9WKjv7ndb36z0mq1Hg3lNk4+h9GVGsbXdwDi9WvV2Vhvb6sW/Xz9+psVpdTQ
n07V76+nYfRZvcmyJLzMs+A8zpNh8KfhNPATU5g2mvfqMhjHSYAd0yDLELpv6j0sPs8vh1M/TYNU
xTdBkoQjbCQD/CkKvmQNwhNgzfI0o/FXOkq3oDoeuBjOjEW19ohqpfXUroDs6tqKus4vp+FQ+Zdp
lvhDwAeRV4aVChAOopGUnGdJ4M/U70jo2uqqupgEKoMWKiWGKRhRZZPQ6u/hIMT5nXa3B6ynL+K9
BrIfRzB2DmP7KjPj3obZREU5TE4YXecZwYEO10mcBcMsGBVDNJrq93tk4UprLkiVMubQfRikKTIk
A9yvwhuoWzjAWeCPACVq12TqFdHpUZHaVfsTP+FW3lWQNbjlABsuwqyOWJWXMDQy+BamKE7uHkK2
3FaN+dsgnubX0EyXDmh2tjZpdvDLrAzdkueWqXkq2Xt3ahSM/XyatUHCYlwdSB3DEQiaJhbImzgc
cVOY32ySxLepOjo9/DIMrjPUDL/jAErmTtoNcDVA2VgxKurbXeIqkk419e0BxTX17sP+4clhp7ex
s/1SjeLoL5maxNORiqMsFgyVP87gJ3Vug8hbvf+6Dws5UkkAyyecOYMpxkHGuq9hzlmQ5UlEDBnG
ScITGo/HsHQ9dTQ2yoPA3StYXr4uwwngRXkPs8Wah+ZpldfhLMgm8YiUTFrt8ycZ7pTGum+rYJoG
QASik6pXw3gU/DDMoUmETV6tUYEn8F9f+wmsqKJeUFZ+CkqHlhWRFOcZoL1y9KAJCrF27SAeHkWg
NIHL74PkbRhMR1/JEj08/iMN0iJgNXZpexPtEv00q48FeUwdw5T4F4xgMXz/Pcgng6Y1rVsrNQ7B
FKrLOAYbALo+uiOtMOCVgh+WuRLw88zPAm8aRFeghH5Q682iDYI0La7jNKSl19oFBIZcSMb3n7z+
30uDo2iYBDMQir/61zzEUTSOvcifkRYhgrvrPaSYvyySCzJsg8Pae7BMo5/8aR7AmmO+ZUU9VTQI
gU4BBrlgdzQaQ6/hhxrZ+ChtYnZtRByUaXX97nYC3YGLhLAFroJejGLQPP5NAIvcoq7NXOu+IK7R
V4lr+AF1fTGB5iMPcAARE80aRmHW4BLCqjkod0xYwe3OgVBqf29z0JYp/ABF2hgJWX4E/41GYO8U
yBB6Ixf+5TSYw72qaCVBnmIHix0lsWoLAS5h98yz3k67B7ZNvktc42FhCNBcLBxWJctYGIF/k/lJ
9o6XyK6qLJvBfIYAO0bBNWhZaD2qAjeLdTqNb4/DKE+7ehk5vKhWl3DNwNKXZAsRZ518CDPgoM3F
na6DeHUuNXYTPz0GZ5ImIDUSDnIlC50qKuxztIfv+tYGSKUPGyPjxQgFxd+7qlFq0nxgHA8EzzQs
d/TIXpZXQ0WNFWOD+GKpg8z85svjNR+GQfHBeRqCV5nPYKmQnPLiWNQHfPXGYFCyIPwBmQW34zZQ
kxDMeQQxgPa6Qu1JexjJQIwBYsmrbLPXfgGLjL5qNBOAjOKo41/GCUdNIJEN+OsmaLKnEkcBinuO
1Nd0vg3BOb4M1MxPPoN3BD7GKJgGsKTaCtgESEF9TTdhDOhSgH104HKkyhNW9d864t5Ul0Dw58Hi
voW6EDlBfVqSmFo72agq5Dl2V8BVmiPadSrkX/+qhYRWHiaeJu4FhcT8VZm4+6q1SsKrKzAVLAYp
KfUgAWGaKYgTO/G4I5o8hmIfR0vrFL0HjRsLRbSssJAFJX2AgHhZV7ioHaA6jQ0ssHS6azZ4Iqd3
wqEe+ChbqoVf3fWqr1KDYq13xEgal8hG1gICGjfN1Kr2X6DfHpZYtN2vtJ49mxOw+LCyKGAxPgXG
KRKdSD8Tozx7Ri3SX8KPRYyyImOITjCKBVgSphNEY0lHnhZy+nMSZl8tnTR/7Kc68DWA6pJKOygf
8FMWUDi7Bi2nAK7HcD2G66WBnwwn3s9BeDXJBg81hNA88N5M0au528d4c2Qi38X9DkIM6iC4h/lc
0PTszfHbcBo8BDMH1eq9SRL/7gP8trAlJTh84NpAe/pbXWRPd6vX3ilWj8TBuORJ5nRuBIXNRKBi
GFQAo+Ci8pS6wCIMzFNc3gRrFXUKrB1o7mecVANDMZ7m6QQsRXoXDSdJjO7oSD0H+8WGQDrGCXiN
zwHuz4G68mHVYP4KfEGyTwQC/56h3aOmJp3VhViti2Rt77Q3d2ytQAkSso6wqOBr4BBsB/4UYgDZ
MMsZj8iEg7WKglsF8seSt5ePxzA0N1/DLwgooZbLsa39d8NkOwQawnIbUC7iHllv4yGyAPaUwGIu
z6CQ2qNzitDBQWcJNYzfGXgBHgd4AwYK3WB1eZdBoJODVKtxEkPkNvET+P0avE1Pt17jX4oMF3b6
5SNSI2SQXw7TamV3MO+acKna3VXvD88+HZzuf9p7d7r/90/nR/97aDI+wptrIkIQi0lP78E4e/D3
58bYh4BNJ4nu6yg6C4Z3w2lA6rYgqkyDI4KU10q4X8NOTIEFZ86nHuIPdWKlTSAK5oPNVWMdsSoq
QKs7mCD2aVFd+CVUsx/nEQqnO5oDUGIT4jjwnAGis6uLmrpzFpNqaJCUUW0xBnZtDhC9Yhap9bsw
zV4xqB80GrRabqv1JksHRMLn/C7NgpkX55l3DfFpNo0az7+t/WiskbyX6nmL/xTzX6T+VEUGZHKM
HKQN7tpW622LgzYIzQ1Jvls1OPpRtEeysavWHS6LtEb5jCU6hTnf5Ubc4N6InsifXrBYytl3ssZg
j/YnPugoUn6jAKaPJUFnDkGsqUGjZNNwE4IyhALxdhKCpi3Ub4AawKhl0q9SaEOR9CJ6gpxex0bk
2a0al162KpwSHpSSvmb7ATV5OBQV4xIn0a1paqM2j8BiNCF4UFLDMh4LvDveASes3UKWUqesYcVQ
T8JJ/MyNrS1Kwve7XbNHosS88U7OFfZSmPDQllBPFe8djJHx0BK0qdJCAmGXiGcwsmeD+e6opnPK
+HB++wBdWBj1weS7dhdFkEEKOHeUHo2mgZUO4IT8OJZEXTl9NgOR8a+CxnNnZFizqoVRRIQWxSjF
FhSPsQDlTSx0bHiDXUYC4FzKsAesMYCb7mK9/H4UUSsdg2hadMojzYckyuCJoxkwtHCeBedrc7uL
kdNWd0s7fo+jlpGXjFjKafOCCqrlmECKT2De5xMDlvfppGx1t3n/B5y08vbcXh5OR+DugteXo1OE
5p33+QqRvA3Ur6h6tNPFwsVbOOTd7Et3nMqGyJl0XkbA7O5a54z1cuIlWW3SGGk/uG0QBfZ5yDZa
wNgUmZp6+6fH708/nBx8env07vDT4T8uDk/Oj05PdNB1lGEoCzSHaDetmRF6WUBDaWViNdCmQG2Y
eRM/PcGN36YRAoM95oGIKcKVJoxB3iM0NtGxZgOYwPcSayP3QclcSRa1gGe2tpROgG5vU9J4p9d3
I3xM1KIOoR3wkBPPjj5Aj5RS0tgAVXrREaMg/SfrTuMqij2lBB/yyISQYhy0NnSi/yLyL2PlYISp
nrGfZtbQEJUaiDRgWxAoIuZC/rMEU/KcSd/eobxHr7fhsOUiSGZ/SXlXG4YXWW2c7v3t04+Hbw4O
z0B6+qtHJxfw/f4UvrFE+jqNOH8u/sbq/o9vzpqgtfdEFR9Q9goChRyCi7SuP4AmLd0R5jCbxV6h
M7f3PxeH55/Ixz189wnwOAYKd1YFqU8nH44/YRMAtbkKkA/3LwQ4FZ9D+RbSYRoO9JpXZ3F+NVHT
+CocvsQ8G8dMKdkV8s2Ooiy4CpIfgKBz/05NoUxy7esY5QFX+6BQNgpFAr7aDXr+bNeNa2WcLhNA
mKr3GAwU9WhhW0pVnNlzkAvjVFXhNpyGljdNUZqpQG/YgoYNJPNl/FGIVALLJyy7q42y8l2z4h0f
lhaGlhLCUMxD6rOIe0RlKt3GCUS0Ike/R9OGiTWzpe8a8rLD4SGxJt/X67Kb0e2xv1FKaNGGFBkk
cvc4sUQD0x6FjKwaAHdW6ndD2hZGQsXhAlENYN9vGAd8KXXS9q/p2blA9InRZyZiMaWGAurEcVbj
S5kMYl2p4UfLF68BW571GoCmycdBgfo9bebZpFwW4VGzJCsQUczim6CBHkynayf+0FWoTGodHz5g
rFzHhhridFuLNtPGCjlM01e7Ll+s5hIlX5ois6XWpWW+sQGuat8WIaQctIMQDsZNgqdfwo/aJtH+
a40KuKwW8TTULGsOsf4gkBIzyV9t1SjaahoBYHbXe31RPNyhBplSZDkfk+oIHI/rVBH4K2EWwiDD
SQ7xHOU34rGtQ4bwVUTqlFrJYpkUDh9wwbJZY1VTIRNNlMbgx6O3F0hkX6zlRq+LyW+Y8e1tR2no
HNPYQ7fEzxo3a8gZj386Uw5k/Bzw1jZ4fEFAei9FOsB3fYnbbqQI2jSHOonBUWSDM35Gh2itoUZ+
5rO+QQZo8rm59MUKCBcxxSAnUpATaIsPQrLFESqoIcZSv+XgMUq3Gz+5o42qGaVLAEtkIzjuRn2n
mg457+dxdG6IHMd5shSNrSVobNcR2HqIQOIKSGAHiDNJlgbJwoj3BtI1kgmttiXFN4ctCxgifZkt
RLnNFRONviVT78+up+CnEXg6+jbzozuVR+FvOQg0DDINOvGQTxYNA+maTjDrjBinvBsIQq7yayJY
8xW5THQDS0bTOytFLKuF7XB2G2PKF2Nl3Eg0aNwEEBFNffCqeRyR/T7l97v99a26LTL8PJfdyPR4
j6KyLD7ea0gRoIRqtmm8RKffTap31IqOqEMvuHBOL6Pl3kLTomNV+XklS8RB9GpZ8ykrK1WMwurL
HaKcLKuHX6PP6glB2a0hBKHu6yoD1VZQAJL/1t5rs0g3aN02jTHKxF0+y+jvlp0A5c6TVnhbovD6
vfWSibPOV5mQwozMMZ8zRMsdQP1ARvJdcBPQwcRSjIcfx5nTzlvp0NI6pgqXnXA8M0Ydahnr1BbG
u6j8FkgtoUC+20lMXh4fbMJ0DGrDTofTkJzeiOJbz5Ytg/pSglSWSo3osnTP61/Lhocal7lS01Yz
ya15BJecfqywj9K3mNjbdRy2GnlCIKIxBi6cOcmo8lEhbui4hS7YpiyL7a12bwOXxcaL9ka/qg3l
rIRVcl89cMcSEGKy4DvVJxFbdkbNpsizZzWwNp8EyyVgYWfx5hc35FFcjx8/rgLq1Hj1VuM69nUr
7Ktf1+UNpJrum4u7K/tTaim8qO2/BOEljY6bobZOX8iIXi0jKipsDh96tXyY11vZH7ehxYVy7yWY
gDkYhwelpEzxsc5dOtwgajYqvECFVCF6o0L0Upq4hoey74ikgx92Cx4XObobPeOl0r49/YGptO7f
S2oTs8iUoAlpawy+XkHvgWq1wqoiXYSmzMFyxHRU196k409lYh7YPtYfZOlyQ+LGXg1VRmOWyu/d
AudPPAEk30UxTW6/MrkkAxYgmLI36WdzrsfYI3RmZONzxIlbuxe7OsVhIOgB1od3eMgu9NdpL6Tb
L46w6/4LtkOsDREaia5Y4AAv6edIPOoiwGyUPLqOM2+dktftRKO0e4KxcRXoAwa2BoaPQ1WAOIg4
naqp/PvSafDiyCWGjpiKHyZxSmE8hC3d9fXv6Ogjn3bENlZHu+WLTW4oISdCxKwtxIc5IH0nZzU3
Nmi2tta3yxEN0PCzH2Iw1WpZuueWy4g8OeFGgi1b287xtIpDKzmCUfzez83ehDkRs8x5MtqpG9Ed
iv/GkbI5wz/pVNlcWDUHyzZxelqbziSZaxt6+6u8oOxK3qAyu0Fm11un42mHDm8H2PjM2/KtH363
4lFy8CUbJ+XNWBIdQe4qyA7casSUz4y9aHe7KKEvnG0E3h46PTh9SdF/GuPpBRxmhhmuGZgACOCD
8TgchgBtQBYmnfn6aDCexcdgn5dUr6+POul8GiyYU7qtJLrq1k8z2v6KM5bqcoPxKJOkXqnGbAeg
eYM1Zc+61vVm38zJ1TvHqgQ/m2mV014a3PK4MVTTsRZFYbecVqLTtdYMj7LixoRYIAbqmZNNRiGU
QPMpGKq519Zjh9XRjnP96V7jIBcCOZq3dU4RkYqGQbxKWqnlNBAkQfDOa5RXeUQiXh98rV8Tyygv
3FH8iXNs+Ot/Q4E9gMKTlNiD8GoUWXedZ3jd3Wu1xJrdt1M57cE7uV5JeegDEHU7+D8d7l+cnp2j
v/bh+PDk4tzdxdcDTmFFH+BmJoshic89/mBBEZNEzXFZkJ2n0146LfSCbjnQV/Usa6furB+qV4tf
D+pYwZKw+WOQCm2d3XyxlXTFOv9Bde34eZXu2jax27FFQrBZSqMSgtY45tiGx2dHWHdVYC8QhKOT
g8N/VI9y4HCjpw33JMHTY47/E2O+PTp8d+AOWJle4K53i6NCZNqwpIcv9nlvT8+O31x82v9wdgbI
O1x6Wrfxo7rxDRS+CvqichUUV+v7GE3GdZxaHqb8woGXZ8a8iEHYxwUTrHrLWj2rr3BhgtFizOca
rV4fj9O08Gvn/6+DwoI3x0Ehlffv9UKWH984IUS4+CA2z41qgTo8NIGFJ/nssjgrjBXdjyxEvU2+
pLNpLMxDDkxJJOjzkAOzSBa2aTu8t71RuuLwWAcG8So5MGyiMN+5yIdpPXuCAyM0lg5S0Z7Doqs+
tJW4Rm2O6FWFr+PR1A77SC9mDowaz6VHNgt+bsnErqrXaRAoc8dm5aFnVIoR8NbMlC77pWofJCHA
C808/zoYw4QybuHjfA7U/A8oCdrfv7yjW89suRsU/5ljVnwaAL8eA+o4HoWwzkYfLt7u1IHVO1/X
SVA0qRmArgnmAboEkn9A6MhZfFGjMZNhFAJpykE5xUkUHRL0+IBJz7mVSNk2Z2wT9crimEeFpWam
+hY3tv3pyDqISFcwkPvab8Hrk+a6INXo6wN63Urz4rQQ5jObqiGn/rpeb7OJR5Ce2Tcqqr24uT5g
hIjxqqaGdO/AXFuwqcX+QmG5ZVs9B/o7O8917M9hdZ/zPj1bSRYXCg6/gPnL5ACEs29/Hs7CqU/p
Qn2nALHEnH/aYGlrI3fpBz4+lGfKvGYwiimBOIzxzQpao8XdULzeVdyeCenMpRaWMPLw7K11uXcV
b6IjEmF0E38OHFyQY/juER1E9tPl8EQcOacWWghHAZ5+1XYPj5ejvkAiyJgLKnjOwO7FJ1tiTa6c
OLgMs9sQXIGC5DYecRgGuDT4dJ1OzqkhLpVbPDEXmrMcyBi5gE3AAzC/szAKJHLutrubeAvtBX5b
zpNxkijNSMnhS/W9Wv9yuN7ElBH/YvR/IXSwGtbW8A+8+O2PRnRhWERXSz0nLyVa0fZTCguIAia7
jctwUq923AcL71eKL85kFRfp1H7xpFAqjkesxnlCpz0KzpeeGDLKesFbQwNt5nvkqPZAKW3ZvB6i
Psfjf4W6b9LTSR7VFPkFmOBsOFENMgAncXaeX+NVSutyp8Izqvd6b4e6e0Zb0A3dYkSP1HtR4agG
avEIC86+2dc34da4T7fhDpA6I04H4OGnMeIPW2yGh6vDts8fohAfQMJbsB7alrMgzaeZyrOx/pU1
en07EyujvJIXjc848WEnWhTmXSV0LwpJsnSbpFL4Ou26bRnre9kmvOZxLYqZpI2+kjHHS9T269/A
AvyUqrtbWYytGmzAtJFtNNsWZN2XsCazXdR5rnWkJmxArTYJfdEIdT2XWSlyu/WrrhJ7zCetEBdA
3epYb/f7+L5Buy/rQ254Yw/r+jcecx+4lWHsnQdJ6E/Df6I/ixLe4XWkLwJbbq/dEmUKF8JruToO
1jhIUMLwzqwI6bKAnAsGzn0+jrio9U/seXygzF+X1KW1tItT/nNuo0qcWHOPdUEP6+7rsyfdfQXa
iAz90JCiINuEH8qkksiJLceYJayr1ayS5M4N/GPegy/CTjqx+Cb0i3jHy+J8OKEkbZMel2AEwImh
OzZ0iUibNXtimAg/zbR7DkTLZV55Qu4inAXH4OmFaaEr1xRNPgUp4NMxv9B5w2uNNh+QeBGVRtO8
B2nT7tS2hI9UUs9P4x3RVRFTjGmQguXKhPmIapzQIzfigghH5Lgw+0L0QgG+/oBPFIBDLKTz8VPU
W+heltPIxLorc/lbThHIKlnU0nYKLBmam64uLplbYqeHNMx8RL+ChybyKuHxlbhnyd5SPCy3dzhp
VS7mpw2psg6W5O1CGBaf3VU2D1cnJAUPvf5ZhQKvJdoTDjrI1VnD4sUGaiZGuvaMq+KPvk5P10d0
npCuMvbavR3V2u7jV/kOAresUujeILwz16sK9GlTaw69j+htI2OuAmla+H1UbLkAQ0mF8gBpYxm0
arpUGVM89GAtOwj9Odrn0P+lvuMVyBskkmxU0sp63Hgoj9ZR45G+MjC9M/f8H4YojZYBSLSY90Yp
Fa7z4br9yICVtvohlfp6vFSp53LueyJLvjxiM9rkc7Dy41y9oDWMk79drJDKzWlkZxlVbZdBzTX6
SjmRNFjDRedwjC9pJ/G/tiNcGfupDnENoDrHmM600U9JlnGqbFW9ka2cDgQV4QhNkGSbrPDxvnBZ
KfuA9xspq8YgXutc2J+PRn9e4fiMRt2gJMOGk6IrpYjF7u0VCk83QMl0agmhgZ5ltyGvCes9yZK3
xvXneNyuMgjX6dfTEO8+4d13NvFQrzdk94edL0f7lfeEtK8/dlfDg81oHHqUYFeNBzoLAv7EzP8M
iiJP5F2oW/gD/IQhPReBl9nJnqzTVVj86joJUXWGu0PyAlUW0yOIs+vszijEajhdbDJR7oYfV5CE
GQTnn+nRHt7N0XkgO8hGZaLqPkBKOonz6QjUC8iMmvjX10GkIVO4zhtseZSBB20gNgJw1XUKoNhI
6nC+zhESk0OqVpH8QD0+FUq1rtCo4rkaS1oqpeblVL1zhhPmue8ZKRYLUUOgp7K5K/gCKn/Mr4Iz
f/afiMcfPfY8NfQEQHVqCLydLu4041ehiBQCUBOAYGJkvksXs8hHoIzolr53/OYfn3568+7DoSRf
7fSXPPfv4mJu478jhLF2309lu8rVI9V4uxhtV5Gn2lQ9vN7Iv1ZwGqzI5dBV9RZXrM8koamnVX15
Z72Gn+IJIMqIi3eJ++dg5Mnn+GMgxHMQX0nlIIYJ6JAvoOyK1/Ydmpl1B0GUBnoCqs+gkbQ7WnWI
whBmd9Zq0PU/+unk2L+WrKC4c5IckDqzWbXIfXmcA6MKtFq7VDXQFbh3YCpf7Rbz62wfgJaix2CF
Zahu8dlmzWXrDVDN+1/w1UnjJjskk7Mc0TtLJC0cONgbBPJa2u5u6VgTDZDrMweWL2a2Kea2KIAj
NXXvjGlvEl8Ts0MZ/rgU4HGeCgVtGNjuxLtyfXqIpL/Tdk6/zHcpy66b+oPaoCEvib7Y3G7W2LVM
dIMkT+afInBWgmawXdiQKG6HCN5xCOaHCQ5/y/1p2njO/+MEyRfQPbkZWszn7agdRiY9rFlZP1sO
jF2YMqtn67n6jg/YlCq+w0IN19xP+XV3faB+ffUOfrRalrRxHM6XSlUHGNn5tbk6K2RtTr1ZWZFH
jgHeFtho1hUXhcVdGcQlfAWjhIzL/wFQSwMEFAAAAAgAjWOrPFvE4XmLBAAAvioAAA4AAABjaGVj
a0luZGV4LnR4dO2a32/bNhDH3wP0f+DjBjgq7/g7hYB1KTIEXephKbCHLAg8mbbV2lImykm2Yf/7
KFu2JUVBZ9QFBNt6E3mkSIoffe9OPOnf2yROxiROhvaJ/EDOz36P0unURnmcJievTq7teGaT3JFR
PLWhK+/ukCTz2aouBEYebOZ8i/Ci/+vV24937y7f/vShf/3x8vya3Pw8j2xiCQbm9tUJIUDSEQF2
RpLBzIZ3n8kwjc7TeZKHnBooLAiJ0tm9LxqGeTa3y6LJwP2SpU+VEj+ECz8qF+Ly3sV/W/Ld1Y/f
hyBoIKhcFg/jwThJXR5HjoTkn/Q+j2feMhwNps72yMxmY3sxiPI0C4H2SOqC1WREgMV9+JtfnfTR
EaSUlQ3epdG1b+EfXnYzXUxy3dRPNgCiGTLJyGnR0pwCnFJGKD9j6owzclPY4G2PuHSeRTZc9Lt4
/iCLJuGTlj3yafAwWPcJgQzoHeh1sR9VFl7PE3IVR1nq/nK5nTlymUTBv+XUy1H2RyNn85DWS8v3
F941yi/debn8xfJWFzwlQzu1xdZwy5LcuvyMpH4TkcwOhjYLVlf/fdViFNvp0AW1q/+e3Jiy5vaZ
sX9YNnNfNs6tN+uRUWb/7JF7v0FKYwAhlTbL+jeEMSGAlbev/UwduR/Ema8xQnlLqUmefrZJvXNX
LMewPvqic9SSKd8gH0zL0UbFBn5DBg9jokp7cm+zYk2fDdfDUuy29eSKHmnZ27Kq2h1dtHldTHBV
+6z/4glYx+phgxVwIXeClWQBsCNVDao2X62DAEsprpCtuAJuqGKyhSsOArlguA1XQMFgx7hida5A
VsBidDd6pSBgiEew6mAJwdUBgSUYgMQNWFwYEG1gKY8VXejP/wbLAO2aXvEGV5NvIFiKBkyZI1d1
rqTm+oC4UpqC2AiWpAKRt3OFSnDYhqsuCpZogOUqYKHcjWBJHiA9gtUASzPKDwksYFyJDVjIDbZ6
gqiVYNt5glpj1wRL1rnyPvCaK7lyVL4SK0ODtctzpKqkyggpDokq7tdfr6nyQZTX61aquKfPyG2o
4gJNx6hSDarshiqUbCdUKRagWXk8R6xKrIAiYL1mr7mSTKKQG7VSVJi2fCBDSZkQdBuuQC/cxi5x
pRtcjSpeoOI74QpkgOKFdOCXuPl6QkbTuZt8Y0L8B/aACEH/NuVaeVAxaBUeZFTJwu/bgg8E3TE+
TIOPcZWPHWUfAuCreGAv8ZDc1Gv2Gg/wq843eQRW+GkteAiQnJrt5ANZ15IIQBt8VNJzSHcT7Xj5
WH9f95IPjYckHxqY2fhXnHuVaMGDSa4Rt8oF+L66FrVA4xADxhX5EHoneKjA6Beilr3AAyg7pPgD
VKEfKz7Qb+r2ZJkxyItzC1vw4ZW4a3w0TiPgp4p87Caq54FUL+TK9gMPMAd1XgeVpuvjOsC8ekIL
HgoFbpdJBtm10BwaRwqwcgRuRz8+eaBXybP9hAOB1Wv2Gg7ONK6lQzIDbWj4cF36qGQbNljHfl5+
SItZ/zEt3v6jzax/Q7k39kN/jPMJySexW55UDU4K8/8AUEsBAhQLFAAAAAgALF6rPP/gDvaiHAAA
3GcAABAAAAAAAAAAAQAgAAAAAAAAAEx1Y2VuZUZpeDIucGF0Y2hQSwECFAsUAAAACACNY6s8W8Th
eYsEAAC+KgAADgAAAAAAAAABACAAAADQHAAAY2hlY2tJbmRleC50eHRQSwUGAAAAAAIAAgB6AAAA
hyEAAAAA


--_002_492379B6AA909E4FAF672AACCA0EADC25CC134E53BPHXCCRPRD02ad_
Content-Type: text/plain; charset=us-ascii


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--_002_492379B6AA909E4FAF672AACCA0EADC25CC134E53BPHXCCRPRD02ad_--


From java-user-return-46085-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 11 23:11:52 2010
Return-Path: <java-user-return-46085-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82211 invoked from network); 11 May 2010 23:11:51 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 11 May 2010 23:11:51 -0000
Received: (qmail 13104 invoked by uid 500); 11 May 2010 23:11:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13061 invoked by uid 500); 11 May 2010 23:11:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13053 invoked by uid 99); 11 May 2010 23:11:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 May 2010 23:11:49 +0000
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=AWL,FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_LOTS_OF_MONEY,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 209.85.222.180 as permitted sender)
Received: from [209.85.222.180] (HELO mail-pz0-f180.google.com) (209.85.222.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 May 2010 23:11:43 +0000
Received: by pzk10 with SMTP id 10so2367108pzk.20
        for <java-user@lucene.apache.org>; Tue, 11 May 2010 16:11:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=LpsHudiFTkVySCM1TpUWqerpYXXxbrmnKazZAorit3I=;
        b=SmWj+V1dLf+3UidVmQ2njPPe6aX/UtYc+ByqF1flytKaWmk3dcHLGMyWCzyNLllH1H
         QDbkBp+vyODuWK/ZrJnBXWskqKtCk/i3idOcg/lpX29XbzziOMkvP/pVlWSr8l+dcpO7
         gvoTAFwgNPvbsqAkKxaiyB1SI4o0Hv0LJC1cA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=MrZd+fgn75pVB1If5dg/+wqguBUUsgZKEVifrKH8wkqTnP9/fzxCl9hs44aFUer6G6
         sBfC/QjzkoX7+5yICX1miV6hD0DBdtfyG1vJcRkVti20OQ3DNUhO2LBfCWBGuOZOE7cP
         aZCLpnTAYOzUg6WUVe1+QEaf2Tm6JLTL+yc40=
Received: by 10.114.7.35 with SMTP id 35mr5093832wag.4.1273619482219;
        Tue, 11 May 2010 16:11:22 -0700 (PDT)
Received: from [10.1.1.109] (hq.compositesw.com [209.237.61.131])
        by mx.google.com with ESMTPS id f11sm38967629wai.11.2010.05.11.16.11.20
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 11 May 2010 16:11:20 -0700 (PDT)
Message-ID: <4BE9E415.4020000@gmail.com>
Date: Tue, 11 May 2010 16:11:17 -0700
From: Chris Lu <chris.lu@gmail.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.1.9) Gecko/20100317 Thunderbird/3.0.4
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: is there some dangerous bug in lucene?
References: <003001caf115$25fa2c40$71ee84c0$@com>
In-Reply-To: <003001caf115$25fa2c40$71ee84c0$@com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

If you are using field cache for field A, and updating field A, isn't it 
normal that the field A is not updated?

Field cache is keyed via index reader, it won't be efficient to reload 
the field cache for each updateDocument().

--
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request) 
got 2.6 Million Euro funding!

On 5/11/2010 7:20 AM, luocanrao wrote:
> I have a problem. I found the store field in a document is not consistent.
>
> Here are some small case about my program.
>
>
>
> Field A = new Filed(Store.Yes,FieldAValue);
>
> FieldBValue.add(FieldAValue);            // FiledBValue is a container that
> contains other store field value, FiledBValue is like a complete document
> record
>
> Field B = new Filed(Store.Yes,FieldBValue);
>
> Document doc = new Document;
>
> doc.add(A); doc.add(B);
>
> indexWriter.updateDocument(new Term(..),doc);
>
>
>
>
>
> after a long time , today some body found some bug.
>
> I observe that value of filed A is the old value, but the value of field B
> is the new and right value.
>
> At first I thought maybe it was the bug of indexwriter.getReader(),
>
> but after I restart the program, the bug is still existing.
>
> Finally I have to reconstruct all the data to fix it.
>
>
>
> Ps : I use FieldCache to store the value of field A, not field B
>
> I use indexwriter.getReader() to get realtime search
>
>
>
> I hope somebody to help me explain it.
>
>
>    


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46086-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 11 23:26:44 2010
Return-Path: <java-user-return-46086-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84265 invoked from network); 11 May 2010 23:26:44 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 11 May 2010 23:26:44 -0000
Received: (qmail 25808 invoked by uid 500); 11 May 2010 23:26:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25765 invoked by uid 500); 11 May 2010 23:26:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25756 invoked by uid 99); 11 May 2010 23:26:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 May 2010 23:26:42 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [134.96.191.147] (HELO smtp.dfki.de) (134.96.191.147)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 May 2010 23:26:33 +0000
Received: from smtp.dfki.de (localhost [127.0.0.1])
	by imss.7 (Postfix) with ESMTP id 52BE5314AB
	for <java-user@lucene.apache.org>; Wed, 12 May 2010 01:26:13 +0200 (CEST)
Received: from mail.dfki.de (lnv-104.sb.dfki.de [134.96.191.146])
	by smtp.dfki.de (Postfix) with ESMTP id 323563149A
	for <java-user@lucene.apache.org>; Wed, 12 May 2010 01:26:13 +0200 (CEST)
Received: from [IPv6:::1] (dave.dfki.uni-sb.de [134.96.184.220])
	by mail.dfki.de (Postfix) with ESMTP id F08EF310E8
	for <java-user@lucene.apache.org>; Wed, 12 May 2010 01:26:12 +0200 (CEST)
Message-Id: <057D5149-84FE-4B5B-B44E-D6E2FCDAB08C@activemath.org>
From: Paul Libbrecht <paul@activemath.org>
To: java-user@lucene.apache.org
In-Reply-To: <55241.46827.qm@web29008.mail.ird.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v936)
Subject: Re: best way to interest two queries?
Date: Wed, 12 May 2010 01:26:11 +0200
References: <9D9D39B8-C2C7-4FA7-B567-D1B06DA46B69@activemath.org> <9A525C49-5E48-47F2-9FB1-60AF97883547@activemath.org> <55241.46827.qm@web29008.mail.ird.yahoo.com>
X-Mailer: Apple Mail (2.936)
X-Virus-Checked: Checked by ClamAV on apache.org

Very interesting, finding the field name is enough for me.
What's cute is to wrap in this Flag-queries because, indeed, I don't =20
want to know the details of each matched query just some of them.

two terminology questions:

- is multiplier in the mail mentioned there the same as boost?

- I intended to use prefix and fuzzyqueries. I believe this is =20
contradictory to this or?

paul


Le 11-mai-10 =E0 12:02, mark harwood a =E9crit :

> See https://issues.apache.org/jira/browse/LUCENE-1999
>
>
>
> ----- Original Message ----
> From: Paul Libbrecht <paul@activemath.org>
> To: java-user@lucene.apache.org
> Sent: Tue, 11 May, 2010 10:52:14
> Subject: Re: best way to interest two queries?
>
> Dear lucene experts,
>
> Let me try to make this precise since there was not answer.
>
> I have a query that's, about,
>  a & b & c
> and I have a good search result.
> Now I want to know:
>
> a) for the first page, which matches are matches for a, b, or c
> b) for the remaining results (for the "tail"), are there matches of =20=

> a, b, or c
>
> Thus far, I'd only know the usage of the highlighter to go to =20
> fields, it's not exactly the same and it's slow.
> I know I could use termDocs or another search-result for a,b, and c, =20=

> probably to annotate my initial results list; that could work well =20
> for a).
>
> I still don't know what to do for b).
>
> thanks for hints.
>
> paul
>
> Le 31-mars-10 =E0 23:00, Paul Libbrecht a =E9crit :
>> I've been wandering around but I see no solution yet: I would like =20=

>> to intersect two query results: going through the list of one query =20=

>> and indicating which ones actually match the other query or, even =20
>> better, indicating that "passed this, nothing matches that query =20
>> anymore".
>>
>> What should be the strategy?
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46087-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 11 23:56:50 2010
Return-Path: <java-user-return-46087-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93180 invoked from network); 11 May 2010 23:56:50 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 11 May 2010 23:56:50 -0000
Received: (qmail 44643 invoked by uid 500); 11 May 2010 23:56:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44604 invoked by uid 500); 11 May 2010 23:56:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44596 invoked by uid 99); 11 May 2010 23:56:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 May 2010 23:56:48 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 72.14.220.154 as permitted sender)
Received: from [72.14.220.154] (HELO fg-out-1718.google.com) (72.14.220.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 May 2010 23:56:44 +0000
Received: by fg-out-1718.google.com with SMTP id e12so67818fga.5
        for <java-user@lucene.apache.org>; Tue, 11 May 2010 16:56:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=UBIqaEs+qiyJvaEF+1RQVFGoq1zHeSNb9fAsHhUpITg=;
        b=r4FHFD6N3+a9aWqIJNPpd3FFx12R7+OQRcUY6+OKpr2VNkUE5TimvTWK2Puigi82oI
         pJ4Xk4+pWMRkI3auLgL5gGIMx1maFHet485RGx2G98rWqH3USYF8QtngMBD7ifnQRluV
         CZGIIyxQgx+KToIq1E44f+vSYtLqflXVABcUU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=EITOuKZfu9iFTMXdTVL+l3vIxcYCJsPBcxPWVgFWyzYzUDrWcbQLz2Zmwm2NxwdPbV
         79sv8EQ5lIK6gDaLStIZVzFCFYRbOTAdnDJzc6XpIcayMmFmoNhys6UbCoiCB69e6I7M
         kYuES9WywKyUtH8F72wvgI591rbefa4lwA23E=
Received: by 10.204.15.23 with SMTP id i23mr528820bka.106.1273622182284; Tue, 
	11 May 2010 16:56:22 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.71.197 with HTTP; Tue, 11 May 2010 16:56:02 -0700 (PDT)
In-Reply-To: <4BDA0FB2.8020501@princeton.edu>
References: <4BD9E329.5030306@princeton.edu> <F8A04958BB57B64096F9BE6B95725643081E3D74@FMD3VS012.fda.gov> 
	<4BD9E616.7030103@princeton.edu> <F8A04958BB57B64096F9BE6B95725643081E3D75@FMD3VS012.fda.gov> 
	<4BD9EF96.5030206@princeton.edu> <F8A04958BB57B64096F9BE6B95725643081E3D76@FMD3VS012.fda.gov> 
	<4BDA0FB2.8020501@princeton.edu>
From: Robert Muir <rcmuir@gmail.com>
Date: Tue, 11 May 2010 19:56:02 -0400
Message-ID: <AANLkTik3eeYk_6pdqy3RHcpSFb32i6SMlO8x6EVh0x1g@mail.gmail.com>
Subject: Re: Lucene QueryParser and Analyzer
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

FYI: I opened a jira issue for this bug here:
https://issues.apache.org/jira/browse/LUCENE-2458

On Thu, Apr 29, 2010 at 7:01 PM, Wei Ho <weiho@princeton.edu> wrote:
> I think I've figured out what the problem is. Given the inputs,
>
> Input1: C1C2,C3C4,C5C6,C7,C8C9C10
> Input2: C1C2 =C2=A0C3C4 =C2=A0C5C6 =C2=A0C7 =C2=A0C8C9C10
>
> Input1 gets parsed as
> Query1: (text: "C1C2 =C2=A0C3C4 =C2=A0C5C6 =C2=A0C7 =C2=A0C8C9C10")
> whereas Input2 gets parsed as
> Query2: (text: "C1C2") (text: "C3C4") (text: "C5C6") (text: "C7") (text:
> "C8C9C10")
>
> That is, Lucene constructs the query and then pass the query text through
> the analyzer. Is there any way to
> force QueryParser to pass the input string through the analyzer before
> creating the query? That is, force Lucene
> to create Query2 for both Input1 and Input2.
>
> Thanks,
> Wei
>
>
> -------- Original Message =C2=A0--------
> Subject: Re: Lucene QueryParser and Analyzer
> From: Sudarsan, Sithu D. <Sithu.Sudarsan@fda.hhs.gov>
> To: java-user@lucene.apache.org
> Date: 4/29/2010 4:54 PM
>>
>> -------sample code-------------
>>
>>>>
>>>> Analyzer analyzer =3D new LingPipeAnalyzer();
>>>> Searcher searcher =3D new IndexSearcher(directory);
>>>> QueryParser qParser =3D new MultiFieldQueryParser(Version.LUCENE_30,
>>>> SEARCH_FIELDS, analyzer);
>>>> Query query =3D qParser.parse(queryLine[1]);
>>>> ScoreDoc[] results =3D searcher.search(query, TOP_N).scoreDocs;
>>>>
>>
>> qParser will use the analyzer LingPipeAnalyzer() before forming the
>> query.
>>
>>
>> Sincerely,
>> Sithu D Sudarsan
>>
>>
>> -----Original Message-----
>> From: Wei Ho [mailto:weiho@princeton.edu]
>> Sent: Thursday, April 29, 2010 4:44 PM
>> To: java-user@lucene.apache.org
>> Subject: Re: Lucene QueryParser and Analyzer
>>
>> Sorry, I guess "discarding the punctuation" was a bit misleading.
>> I meant that given the two input strings,
>>
>> Input1: C1C2,C3C4,C5C6,C7,C8C9C10
>> Input2: C1C2 =C2=A0C3C4 =C2=A0C5C6 =C2=A0C7 =C2=A0C8C9C10
>>
>> The analyzer I implemented tokenizes both Input1 and Input2 as "C1C2",
>> "C3C4", "C5C6", "C7", "C8C9C10" - that is, it doesn't include the
>> punctuation in the tokenization. I'm assuming that QueryParser is simply
>>
>> passing the entire input string to the analyzer and taking the tokens,
>> in which case Input1 and Input2 should be considered identifcal. Does
>> QueryParser doing any sort of pre-processing or filtering beforehand? If
>>
>> so, how can I turn it off?
>>
>> Aside from stopping tokens at punctuations, my analyzer is also doing
>> Chinese word segmentation, so I'd like to be sure that QueryParser is
>> using the analyzer the way I expect it to.
>>
>> Thanks,
>> Wei
>>
>>
>>
>> -------- Original Message =C2=A0--------
>> Subject: Re: Lucene QueryParser and Analyzer
>> From: Sudarsan, Sithu D.<Sithu.Sudarsan@fda.hhs.gov>
>> To: java-user@lucene.apache.org
>> Date: 4/29/2010 4:08 PM
>>
>>>
>>> If so,
>>>
>>> Input1: =C2=A0c1c2c3c4c5c6c7....
>>> Input2: c1c2 c3c4 ...
>>>
>>> I guess, they are different! Add a whitespace after commas and see if
>>> that works...
>>>
>>> Sincerely,
>>> Sithu D Sudarsan
>>>
>>>
>>> -----Original Message-----
>>> From: Wei Ho [mailto:weiho@princeton.edu]
>>> Sent: Thursday, April 29, 2010 4:04 PM
>>> To: java-user@lucene.apache.org
>>> Subject: Re: Lucene QueryParser and Analyzer
>>>
>>> No, there is no whitespace after the comma in Input1
>>>
>>> Input1: C1C2,C3C4,C5C6,C7,C8C9C10
>>> Input2: C1C2 =C2=A0C3C4 =C2=A0C5C6 =C2=A0C7 =C2=A0C8C9C10
>>>
>>> Input1 is basically one big long word with commas and Chinese
>>>
>>
>> characters
>>
>>>
>>> one after the other. Input2 is where I manually separated the string
>>> into the component terms by replacing the comma with whitespace. My
>>> confusion stems from the fact that I thought it should not matter
>>>
>>
>> since
>>
>>>
>>> the analyzer should be discarding the punctuation anyway? So the
>>> tokenization process should be the same for both Input1 and Input2? If
>>> that is not the case, what do I need to change?
>>>
>>> Thanks,
>>> Wei Ho
>>>
>>> -------- Original Message =C2=A0--------
>>> Subject: Re: Lucene QueryParser and Analyzer
>>> From: Sudarsan, Sithu D.<Sithu.Sudarsan@fda.hhs.gov>
>>> To: java-user@lucene.apache.org
>>> Date: 4/29/2010 3:54 PM
>>>
>>>
>>>>
>>>> Hi,
>>>>
>>>> Is there a whitespace after the comma?
>>>>
>>>>
>>>> Sincerely,
>>>> Sithu D Sudarsan
>>>>
>>>>
>>>> -----Original Message-----
>>>> From: Wei Ho [mailto:weiho@princeton.edu]
>>>> Sent: Thursday, April 29, 2010 3:51 PM
>>>> To: java-user@lucene.apache.org
>>>> Subject: Lucene QueryParser and Analyzer
>>>>
>>>> Hello,
>>>>
>>>> I'm using Lucene to index and search through a collection of Chinese
>>>> documents. However, I'm noticing an odd behavior in query
>>>> parsing/searching.
>>>>
>>>> Given the two queries below:
>>>>
>>>> (Ci refers to Chinese character i)
>>>> Input1: C1C2,C3C4,C5C6,C7,C8C9C10
>>>> Input2: C1C2 =C2=A0C3C4 =C2=A0C5C6 =C2=A0C7 =C2=A0C8C9C10
>>>>
>>>> Input1 returns absolutely nothing, while Input2 (replacing the commas
>>>> with spaces) works as expected. I'm a bit confused why this would be
>>>> happening - it seems that QueryParser uses the Analyzer passed to it
>>>>
>>>>
>>>
>>> to
>>>
>>>
>>>>
>>>> tokenize the input query string, so if the Analyzer ignores the
>>>> punctuations, it seems that Input1 and Input2 should return identical
>>>> results. Is there some pre-Analyzer filtering or whatever that
>>>> QueryParser does? I've tried this with the StandardAnalyzer,
>>>> SmartChineseAnalyzer, and an analyzer that I implemented which
>>>> explicitly skips over punctuations and whitespaces in tokenizing the
>>>> query string, but to no avail.
>>>>
>>>>
>>>> -----------------------------------
>>>>
>>>> I'm probably just doing something dumb, but any help would be greatly
>>>> appreciated!
>>>>
>>>> Thanks,
>>>> Wei Ho
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



--=20
Robert Muir
rcmuir@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46088-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 12 08:55:45 2010
Return-Path: <java-user-return-46088-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17796 invoked from network); 12 May 2010 08:55:45 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 12 May 2010 08:55:45 -0000
Received: (qmail 86659 invoked by uid 500); 12 May 2010 08:55:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86419 invoked by uid 500); 12 May 2010 08:55:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86411 invoked by uid 99); 12 May 2010 08:55:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 May 2010 08:55:42 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=FREEMAIL_FROM,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [212.82.110.161] (HELO web29016.mail.ird.yahoo.com) (212.82.110.161)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 12 May 2010 08:55:36 +0000
Received: (qmail 49867 invoked by uid 60001); 12 May 2010 08:55:14 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1273654514; bh=jk3wOvd1PkgPG48iKnVLnDogh3numajgJFVQrIJzE6A=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=FDLu5VYywYRFW6LDC0oi4bpgNuIov5uAbVEw3JO3MbjWTGfIY16E8ySRdXfNWWoZqrZ0EoPF8zeawGMA3+f+K+j86e8n8p4Ys6RxtvcA/d0mOasWk7W2AnOfp4lQYziwqUVplg2snmnxmLCnfyqThyrXpTfEynYc3fJrsK0Wfko=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=W1Xgu/iGxBxYPSuNCh7mlSwU2AnjGxxJnsbNkICcfw6Z8zyOx9DOKJ7at/YgfbthMp8/S8rdv30UyoZ4mrjghSGgm4FvJ4hhHxAI5ObGinhWJXwjFenF00JfEauO5WJ8kh33DqbRSZliomvvNHO5QdwEr+Yupw1wfpDRQJgYDyo=;
Message-ID: <469705.48901.qm@web29016.mail.ird.yahoo.com>
X-YMail-OSG: kaIXiBIVM1kOmL7hh3ZKodKpGpyM5rnBxuYJvgF_mJvmc2R
 a5O06oBr9Ks1eXN2g76tpfSOy0IeMmOM7rhcD9uz2Vh5kHdWrXU0F1xp_Xwo
 oqJ2nAcmeNe5YLZ5GSv3xNDcznLeu4s99yCfv..73FRmGcFen1JwaZisJZZS
 7zMPJtyJItYj34XNMeiuDCmSnYQBC8anQTgdJBUe.EsbCE0PIZgp436MdNk_
 eIeSM9t5UOv2ZRmihnhDH9Ny8r8UpGmioD75DcbLaufQv1sdpuF1_y87FxfB
 F8sbpl8AtZvJLsozr6NLng6Lt8iFQ2aZoXss-
Received: from [194.106.34.5] by web29016.mail.ird.yahoo.com via HTTP; Wed, 12 May 2010 08:55:14 GMT
X-Mailer: YahooMailRC/374.4 YahooMailWebService/0.8.103.269680
References: <9D9D39B8-C2C7-4FA7-B567-D1B06DA46B69@activemath.org> <9A525C49-5E48-47F2-9FB1-60AF97883547@activemath.org> <55241.46827.qm@web29008.mail.ird.yahoo.com> <057D5149-84FE-4B5B-B44E-D6E2FCDAB08C@activemath.org>
Date: Wed, 12 May 2010 08:55:14 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: best way to interest two queries?
To: java-user@lucene.apache.org
In-Reply-To: <057D5149-84FE-4B5B-B44E-D6E2FCDAB08C@activemath.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

=0A=0A>>two terminology questions:=0A=0A>>- is multiplier in the mail menti=
oned there the same as boost?=0A=0AThis factor controls how many decimal pl=
aces precision is retained in the adjusted scores. Pick to low a multiplier=
 and scores that are only differentiated by a very small value will appear =
equal. Pick too high a multiplier and you start to lose the most significan=
t parts of the score. This trade-off is summarised here for various setting=
s of "multiplier":=0A=0Amultiplier       max score   fraction precision=0A=
=3D=3D=3D=3D=3D=3D   =3D=3D=3D=3D=3D=3D=3D=3D   =3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=0A10           838860         0.x=0A100         83886         =
     0.xx=0A1000       8388             0.xxx=0A10000     838              =
 0.xxxx=0A=0AThe default setting of 1000 seems like a safe setting for the =
typical scores generated by Lucene.=0A=0A- I intended to use prefix and fuz=
zyqueries. I believe this is contradictory to this or?=0A=0AYou can wrap an=
y queries with this class - the only limitation is it hides all match info =
in a single byte encoded into the score which only allows for 8 bits or 8 m=
atch flags i.e. reports on max 8 clauses. You could try use > 8 bits encode=
d into the score but then you lose more score precision again (see above).=
=0A=0ASome thoughts on a less bit-twiddly, more robust approach:=0AHaving p=
layed with the new Attribute stuff in 2.9/3.0 Analyzers recently I am intri=
gued with using a similar approach to capture low-level match metadata  i.e=
. clients decide what types of MatchAttributes are of interest and Query ob=
jects record match metadata in singleton MatchAttribute objects as they str=
eam their way through result sets.=0AResult set streaming and tokenisation =
streams are similar problems and the Attribute design seems like it can app=
ly here.=0A=0ACheers=0AMark=0A=0ALe 11-mai-10 =E0 12:02, mark harwood a =E9=
crit :=0A=0A> See https://issues.apache.org/jira/browse/LUCENE-1999=0A> =0A=
> =0A> =0A> ----- Original Message ----=0A> From: Paul Libbrecht <paul@acti=
vemath.org>=0A> To: java-user@lucene.apache.org=0A> Sent: Tue, 11 May, 2010=
 10:52:14=0A> Subject: Re: best way to interest two queries?=0A> =0A> Dear =
lucene experts,=0A> =0A> Let me try to make this precise since there was no=
t answer.=0A> =0A> I have a query that's, about,=0A>  a & b & c=0A> and I h=
ave a good search result.=0A> Now I want to know:=0A> =0A> a) for the first=
 page, which matches are matches for a, b, or c=0A> b) for the remaining re=
sults (for the "tail"), are there matches of a, b, or c=0A> =0A> Thus far, =
I'd only know the usage of the highlighter to go to fields, it's not exactl=
y the same and it's slow.=0A> I know I could use termDocs or another search=
-result for a,b, and c, probably to annotate my initial results list; that =
could work well for a).=0A> =0A> I still don't know what to do for b).=0A> =
=0A> thanks for hints.=0A> =0A> paul=0A> =0A> Le 31-mars-10 =E0 23:00, Paul=
 Libbrecht a =E9crit :=0A>> I've been wandering around but I see no solutio=
n yet: I would like to intersect two query results: going through the list =
of one query and indicating which ones actually match the other query or, e=
ven better, indicating that "passed this, nothing matches that query anymor=
e".=0A>> =0A>> What should be the strategy?=0A> =0A> =0A> =0A> ------------=
---------------------------------------------------------=0A> To unsubscrib=
e, e-mail: java-user-unsubscribe@lucene.apache.org=0A> For additional comma=
nds, e-mail: java-user-help@lucene.apache.org=0A> =0A> =0A> =0A> =0A> -----=
----------------------------------------------------------------=0A> To uns=
ubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A> For additiona=
l commands, e-mail: java-user-help@lucene.apache.org=0A> =0A=0A=0A---------=
------------------------------------------------------------=0ATo unsubscri=
be, e-mail: java-user-unsubscribe@lucene.apache.org=0AFor additional comman=
ds, e-mail: java-user-help@lucene.apache.org=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46089-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 12 09:33:54 2010
Return-Path: <java-user-return-46089-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26277 invoked from network); 12 May 2010 09:33:54 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 12 May 2010 09:33:54 -0000
Received: (qmail 29019 invoked by uid 500); 12 May 2010 09:33:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28857 invoked by uid 500); 12 May 2010 09:33:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28849 invoked by uid 99); 12 May 2010 09:33:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 May 2010 09:33:51 +0000
X-ASF-Spam-Status: No, hits=-1.3 required=10.0
	tests=AWL,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [62.213.161.134] (HELO pmx.sirma.bg) (62.213.161.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 May 2010 09:33:45 +0000
X-Virus-Scanned: Sirma Antivirus System
Received: from [192.168.128.140] (ivasilev.sirma.int [192.168.128.140])
	by pmx.sirma.bg (Sirma mail system) with ESMTP id E671E2400B
	for <java-user@lucene.apache.org>; Wed, 12 May 2010 12:33:22 +0300 (EEST)
Message-ID: <4BEA75E2.1000204@sirma.bg>
Date: Wed, 12 May 2010 12:33:22 +0300
From: Ivan Vasilev <ivasilev@sirma.bg>
User-Agent: Thunderbird 2.0.0.24 (Windows/20100228)
MIME-Version: 1.0
To: LUCENE MAIL LIST <java-user@lucene.apache.org>
Subject: How to avoid sharing docStore files?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Hi Guys,

Can anybody tell me how to avoid sharing of docStore files (term vectors 
& stored fields)? I mean to avoid creation of cfx files.

This is important for us because we support some operations like 
splitting index, updating index fields (via running optimization that 
has some differences compare to normal optimization).

With Lucene 2.4.X we used constructor of IndexWriter that used 
"autoCommit" parameter. We set it to "true" and this forced each flush 
to be done in a new .cfs file.
Is there now some way to do it?

Cheers,
Ivan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46090-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 12 09:39:12 2010
Return-Path: <java-user-return-46090-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27912 invoked from network); 12 May 2010 09:39:12 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 12 May 2010 09:39:12 -0000
Received: (qmail 35432 invoked by uid 500); 12 May 2010 09:39:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35356 invoked by uid 500); 12 May 2010 09:39:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35348 invoked by uid 99); 12 May 2010 09:39:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 May 2010 09:39:09 +0000
X-ASF-Spam-Status: No, hits=-1.6 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [207.126.144.133] (HELO eu1sys200aog112.obsmtp.com) (207.126.144.133)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 12 May 2010 09:39:00 +0000
Received: from source ([193.36.230.103]) by eu1sys200aob112.postini.com ([207.126.147.11]) with SMTP
	ID DSNKS+p3H8ONGFRrEwk254o8TkGZaPz6hPNf@postini.com; Wed, 12 May 2010 09:38:40 UTC
Received: from blackex04.detica.com ([10.1.1.9]) by proxy03.detica.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Wed, 12 May 2010 10:38:32 +0100
Received: from uksrpblkexb01.detica.com ([10.1.1.38]) by blackex04.detica.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 12 May 2010 10:38:39 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: Unsupported operation in DocIdSetIterator using lucene 2.9
Date: Wed, 12 May 2010 10:38:37 +0100
Message-ID: <614C529D389A5944B351F7DFB7594F24AD9E10@uksrpblkexb01.detica.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Unsupported operation in DocIdSetIterator using lucene 2.9
Thread-Index: AcrxtuXw+LPEnBXSS8GDuQvLqYxQgA==
From: "Gregory Tarr" <Gregory.tarr@detica.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 12 May 2010 09:38:39.0888 (UTC) FILETIME=[E735B900:01CAF1B6]
X-Virus-Checked: Checked by ClamAV on apache.org

I am using lucene 2.9 and I can't understand why a succession of
un-deprecated methods calls a deprecated method in this class.
The series of calls is as follows:

Searcher.search(Query, Collector)
IndexSearcher.search(Weight, Filter, Collector)
Scorer.score(Collector)
DocIdSetIterator.nextDoc()
DocIdSetIterator.next()

The javadocs for next() say that you should call nextDoc() but yet the
nextDoc() method calls next()!

I understand it is changing in 3.0, but can this be made to work in 2.9
without editing the code?

Many thanks,

Greg Tarr


This message should be regarded as confidential. If you have received thi=
s email in error please notify the sender and destroy it immediately.
Statements of intent shall only become binding when confirmed in hard cop=
y by an authorised signatory.  The contents of this email may relate to d=
ealings with other companies within the Detica Limited group of companies=
=2E

Detica Limited is registered in England under No: 1337451.

Registered offices: Surrey Research Park, Guildford, Surrey, GU2 7YP, Eng=
land.
=0D

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46091-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 12 10:15:55 2010
Return-Path: <java-user-return-46091-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33848 invoked from network); 12 May 2010 10:15:55 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 12 May 2010 10:15:55 -0000
Received: (qmail 64469 invoked by uid 500); 12 May 2010 10:15:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64181 invoked by uid 500); 12 May 2010 10:15:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64172 invoked by uid 99); 12 May 2010 10:15:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 May 2010 10:15:52 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.160.176] (HELO mail-gy0-f176.google.com) (209.85.160.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 May 2010 10:15:45 +0000
Received: by gyf1 with SMTP id 1so4124444gyf.35
        for <java-user@lucene.apache.org>; Wed, 12 May 2010 03:15:24 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.150.60.5 with SMTP id i5mr10902812yba.148.1273659324074; Wed, 
	12 May 2010 03:15:24 -0700 (PDT)
Received: by 10.151.11.20 with HTTP; Wed, 12 May 2010 03:15:24 -0700 (PDT)
In-Reply-To: <4BEA75E2.1000204@sirma.bg>
References: <4BEA75E2.1000204@sirma.bg>
Date: Wed, 12 May 2010 06:15:24 -0400
Message-ID: <AANLkTinK2JCXiVHOIoa9ArvTz9RRYGzECVJgEbbO52tP@mail.gmail.com>
Subject: Re: How to avoid sharing docStore files?
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

This isn't something you can disable in Lucene, currently.  In
general, how Lucene represents the index as files is "private" to it
-- it's free to change from release to release.

That said, we are thinking of moving away from doc stores, with
LUCENE-2324.  Now that both stored fields & term vectors can be
bulk-copied during merging, the optimization does not buy us as much
as it did before.

Can you explain in more detail what you are doing w/ Lucene that
requires the doc stores to not be shared?  EG for splitting an index,
there is the multi-pass index splitter (in contrib/misc).

Mike

On Wed, May 12, 2010 at 5:33 AM, Ivan Vasilev <ivasilev@sirma.bg> wrote:
> Hi Guys,
>
> Can anybody tell me how to avoid sharing of docStore files (term vectors &
> stored fields)? I mean to avoid creation of cfx files.
>
> This is important for us because we support some operations like splitting
> index, updating index fields (via running optimization that has some
> differences compare to normal optimization).
>
> With Lucene 2.4.X we used constructor of IndexWriter that used "autoCommit"
> parameter. We set it to "true" and this forced each flush to be done in a
> new .cfs file.
> Is there now some way to do it?
>
> Cheers,
> Ivan
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46092-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 12 11:33:46 2010
Return-Path: <java-user-return-46092-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50354 invoked from network); 12 May 2010 11:33:46 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 12 May 2010 11:33:46 -0000
Received: (qmail 52491 invoked by uid 500); 12 May 2010 11:33:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52324 invoked by uid 500); 12 May 2010 11:33:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52314 invoked by uid 99); 12 May 2010 11:33:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 May 2010 11:33:43 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of midhatali@gmail.com designates 209.85.221.173 as permitted sender)
Received: from [209.85.221.173] (HELO mail-qy0-f173.google.com) (209.85.221.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 May 2010 11:33:36 +0000
Received: by qyk4 with SMTP id 4so730018qyk.21
        for <java-user@lucene.apache.org>; Wed, 12 May 2010 04:33:15 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:from:date
         :message-id:subject:to:content-type;
        bh=YKhZkWo2UKW7IQ3PAa1JOcMMulOTyuTByiIQS9FHomQ=;
        b=EqWRhuC3v1P7yaYXaCIHTOyGwS9SNR+NOTyVcJuJNFDbTpstgNTDdHlm89lHNV+Uii
         Rayx2JIdKvq961R54zBInkSrieY0PrMCA94XYgmMX+EdFBhNnv2szFyRIfdjXYNMu7Af
         k78UatrjyaE/XCwDVlv5/y6CUYpLYp14s8qEA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=G0WH3UYGSKa91Hy/beqqzdSHD75gDKPZ/h8U417fYXSdgYuwFw4XVXrvafDzGQHbZ5
         MPwh5h7FUBXJS0i0Xy1SKhE2z4UY87VC4e3UeYulbFeulGnhI5bEfcbCpUB3CCIHO4Dc
         GosEZ80V/jfh1uHX33TshMBVzS/Z9nV0vZchc=
Received: by 10.229.223.129 with SMTP id ik1mr579117qcb.116.1273663995161; 
	Wed, 12 May 2010 04:33:15 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.19.7 with HTTP; Wed, 12 May 2010 04:32:55 -0700 (PDT)
From: Midhat Ali <midhatali@gmail.com>
Date: Wed, 12 May 2010 16:32:55 +0500
Message-ID: <AANLkTil-goCrhAg-ckJCcjf-2KjaV6fo5wpWd0aQ6aYl@mail.gmail.com>
Subject: Return Entire field from GetBestFragment in FastVectorHighlighter
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016364d30adfeb0b704866401d4

--0016364d30adfeb0b704866401d4
Content-Type: text/plain; charset=ISO-8859-1

Is it possible to return entire field contents instead of a fixed size
fragment. In Highlightrer, there is a Nullfragmenter. Whats's its
counterpart in FastVectorhighlighter

--0016364d30adfeb0b704866401d4--

From java-user-return-46093-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 12 12:30:11 2010
Return-Path: <java-user-return-46093-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70589 invoked from network); 12 May 2010 12:30:11 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 12 May 2010 12:30:11 -0000
Received: (qmail 21824 invoked by uid 500); 12 May 2010 12:30:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21769 invoked by uid 500); 12 May 2010 12:30:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21761 invoked by uid 99); 12 May 2010 12:30:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 May 2010 12:30:08 +0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=AWL,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [62.213.161.134] (HELO pmx.sirma.bg) (62.213.161.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 May 2010 12:30:04 +0000
X-Virus-Scanned: Sirma Antivirus System
Received: from [192.168.128.140] (ivasilev.sirma.int [192.168.128.140])
	by pmx.sirma.bg (Sirma mail system) with ESMTP id 8D41824008
	for <java-user@lucene.apache.org>; Wed, 12 May 2010 15:29:41 +0300 (EEST)
Message-ID: <4BEA9F35.30606@sirma.bg>
Date: Wed, 12 May 2010 15:29:41 +0300
From: Ivan Vasilev <ivasilev@sirma.bg>
User-Agent: Thunderbird 2.0.0.24 (Windows/20100228)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: How to avoid sharing docStore files?
References: <4BEA75E2.1000204@sirma.bg> <AANLkTinK2JCXiVHOIoa9ArvTz9RRYGzECVJgEbbO52tP@mail.gmail.com>
In-Reply-To: <AANLkTinK2JCXiVHOIoa9ArvTz9RRYGzECVJgEbbO52tP@mail.gmail.com>
Content-Type: multipart/alternative;
 boundary="------------020107040306070609090404"

--------------020107040306070609090404
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Hi Michael,
Thanks for your answer.
What we do now:
1. Splitting indexes. We do it not by reading indexes and distributing 
docs in separate indexes like in MultiPassIndexSplitter. We do it by 
binary copping segments to different folders and then recreate segment 
descriptor file for each one (we have created tool for this). The 
decision of which segment to which new index to go is taken by taking 
segment sizes and calculating so that to have almost equal indexes. If 
we have .cfx file this would be an obstacle for current logic of division.
I saw the class MultiPassIndexSplitter. It offers splitting index by 
docs (not by segments). It has a big advantage - index could be split 
better (to more similar in size parts). It would be done even if index 
was just optimized and we have only one big segment. But it has also 
disadvantages. Index is read as many times as the number of new indexes 
is (it is bad for ~40Gb indexes). Also the original index remains all 
the time this means if we do the split in one and the same partition we 
need double disk space.
May be we should offer both index split approaches to the user... this 
depends on higher levels :)

2. More important problem with the .cfx file - we support document 
modification on one field. We do it like this - for the index we have a 
paired index that has only that field. We read and write both indexes by 
parallel reader/writer. To be everything OK both indexes must have the 
same responding documents distributed in the same responding segments 
(due to our split mechanism). When changing document content in little 
index we run optimization on it and we have some source changes and new 
classes that make so that instead of current values for responding docs 
to be used new onces - for stored values as well as for indexed terms 
(this idea we got from Lucene forum by the way). So I expect we to have 
problems with .cfx file - may be during the optimization it's content 
could be sent to .cfs files... and may be some other things...

Looking at the situation I think the best is I to see where are the 
points where the "autoCommit" took place in Lucene 2.3 and to force 
flushing at that points so that we to have CommitPoint for each CheckPoint.

Ivan


Michael McCandless wrote:
> This isn't something you can disable in Lucene, currently.  In
> general, how Lucene represents the index as files is "private" to it
> -- it's free to change from release to release.
>
> That said, we are thinking of moving away from doc stores, with
> LUCENE-2324.  Now that both stored fields & term vectors can be
> bulk-copied during merging, the optimization does not buy us as much
> as it did before.
>
> Can you explain in more detail what you are doing w/ Lucene that
> requires the doc stores to not be shared?  EG for splitting an index,
> there is the multi-pass index splitter (in contrib/misc).
>
> Mike
>
> On Wed, May 12, 2010 at 5:33 AM, Ivan Vasilev <ivasilev@sirma.bg> wrote:
>   
>> Hi Guys,
>>
>> Can anybody tell me how to avoid sharing of docStore files (term vectors &
>> stored fields)? I mean to avoid creation of cfx files.
>>
>> This is important for us because we support some operations like splitting
>> index, updating index fields (via running optimization that has some
>> differences compare to normal optimization).
>>
>> With Lucene 2.4.X we used constructor of IndexWriter that used "autoCommit"
>> parameter. We set it to "true" and this forced each flush to be done in a
>> new .cfs file.
>> Is there now some way to do it?
>>
>> Cheers,
>> Ivan
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> __________ NOD32 3990 (20090406) Information __________
>
> This message was checked by NOD32 antivirus system.
> http://www.eset.com
>
>
>
>   


--------------020107040306070609090404--

From java-user-return-46094-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 12 13:15:20 2010
Return-Path: <java-user-return-46094-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79758 invoked from network); 12 May 2010 13:15:19 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 12 May 2010 13:15:19 -0000
Received: (qmail 91150 invoked by uid 500); 12 May 2010 13:15:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91106 invoked by uid 500); 12 May 2010 13:15:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91098 invoked by uid 99); 12 May 2010 13:15:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 May 2010 13:15:17 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [72.167.82.89] (HELO p3plsmtpa01-09.prod.phx3.secureserver.net) (72.167.82.89)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 12 May 2010 13:15:09 +0000
Received: (qmail 12054 invoked from network); 12 May 2010 13:14:47 -0000
Received: from unknown (81.219.54.251)
  by p3plsmtpa01-09.prod.phx3.secureserver.net (72.167.82.89) with ESMTP; 12 May 2010 13:14:46 -0000
Message-ID: <4BEAA9C1.3010303@getopt.org>
Date: Wed, 12 May 2010 15:14:41 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.1.9) Gecko/20100317 Thunderbird/3.0.4
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: How to avoid sharing docStore files?
References: <4BEA75E2.1000204@sirma.bg> <AANLkTinK2JCXiVHOIoa9ArvTz9RRYGzECVJgEbbO52tP@mail.gmail.com> <4BEA9F35.30606@sirma.bg>
In-Reply-To: <4BEA9F35.30606@sirma.bg>
X-Enigmail-Version: 1.0.1
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On 2010-05-12 14:29, Ivan Vasilev wrote:
> Hi Michael,
> Thanks for your answer.
> What we do now:
> 1. Splitting indexes. We do it not by reading indexes and distributing
> docs in separate indexes like in MultiPassIndexSplitter. We do it by
> binary copping segments to different folders and then recreate segment
> descriptor file for each one (we have created tool for this). The
> decision of which segment to which new index to go is taken by taking
> segment sizes and calculating so that to have almost equal indexes. If
> we have .cfx file this would be an obstacle for current logic of division.
> I saw the class MultiPassIndexSplitter. It offers splitting index by
> docs (not by segments). It has a big advantage - index could be split
> better (to more similar in size parts). It would be done even if index
> was just optimized and we have only one big segment. But it has also
> disadvantages. Index is read as many times as the number of new indexes
> is (it is bad for ~40Gb indexes). Also the original index remains all
> the time this means if we do the split in one and the same partition we
> need double disk space.
> May be we should offer both index split approaches to the user... this
> depends on higher levels :)

Hi,

I wrote the MultiPassIndexSplitter. Yes, multi-pass is problematic with
large indexes. I'm currently working on a single-pass TrueSplitter :)
which should be ready within a couple weeks.

However, even this new tool will make a copy of the original index, so
you will need twice as much space. But in this case perhaps you could
put the original index on a network FS, and split it into the target
partition - the data would be read just once.

-- 
Best regards,
Andrzej Bialecki     <><
 ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46095-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 12 14:16:15 2010
Return-Path: <java-user-return-46095-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95198 invoked from network); 12 May 2010 14:16:14 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 12 May 2010 14:16:14 -0000
Received: (qmail 5858 invoked by uid 500); 12 May 2010 14:16:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5797 invoked by uid 500); 12 May 2010 14:16:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5789 invoked by uid 99); 12 May 2010 14:16:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 May 2010 14:16:12 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [62.213.161.134] (HELO pmx.sirma.bg) (62.213.161.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 May 2010 14:16:04 +0000
X-Virus-Scanned: Sirma Antivirus System
Received: from [192.168.128.140] (ivasilev.sirma.int [192.168.128.140])
	by pmx.sirma.bg (Sirma mail system) with ESMTP id 81E8124023
	for <java-user@lucene.apache.org>; Wed, 12 May 2010 17:15:43 +0300 (EEST)
Message-ID: <4BEAB80F.5040402@sirma.bg>
Date: Wed, 12 May 2010 17:15:43 +0300
From: Ivan Vasilev <ivasilev@sirma.bg>
User-Agent: Thunderbird 2.0.0.24 (Windows/20100228)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: How to avoid sharing docStore files?
References: <4BEA75E2.1000204@sirma.bg> <AANLkTinK2JCXiVHOIoa9ArvTz9RRYGzECVJgEbbO52tP@mail.gmail.com> <4BEA9F35.30606@sirma.bg> <4BEAA9C1.3010303@getopt.org>
In-Reply-To: <4BEAA9C1.3010303@getopt.org>
Content-Type: multipart/alternative;
 boundary="------------060407050106040101030104"
X-Virus-Checked: Checked by ClamAV on apache.org

--------------060407050106040101030104
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit

That`s fine Andrzej :) doing split in just one pass really matters for 
big indexes.
Hope we will use it in our application.
Thanks,
Ivan


Andrzej Bialecki wrote:
> On 2010-05-12 14:29, Ivan Vasilev wrote:
>   
>> Hi Michael,
>> Thanks for your answer.
>> What we do now:
>> 1. Splitting indexes. We do it not by reading indexes and distributing
>> docs in separate indexes like in MultiPassIndexSplitter. We do it by
>> binary copping segments to different folders and then recreate segment
>> descriptor file for each one (we have created tool for this). The
>> decision of which segment to which new index to go is taken by taking
>> segment sizes and calculating so that to have almost equal indexes. If
>> we have .cfx file this would be an obstacle for current logic of division.
>> I saw the class MultiPassIndexSplitter. It offers splitting index by
>> docs (not by segments). It has a big advantage - index could be split
>> better (to more similar in size parts). It would be done even if index
>> was just optimized and we have only one big segment. But it has also
>> disadvantages. Index is read as many times as the number of new indexes
>> is (it is bad for ~40Gb indexes). Also the original index remains all
>> the time this means if we do the split in one and the same partition we
>> need double disk space.
>> May be we should offer both index split approaches to the user... this
>> depends on higher levels :)
>>     
>
> Hi,
>
> I wrote the MultiPassIndexSplitter. Yes, multi-pass is problematic with
> large indexes. I'm currently working on a single-pass TrueSplitter :)
> which should be ready within a couple weeks.
>
> However, even this new tool will make a copy of the original index, so
> you will need twice as much space. But in this case perhaps you could
> put the original index on a network FS, and split it into the target
> partition - the data would be read just once.
>
>   


--------------060407050106040101030104--

From java-user-return-46096-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 12 17:04:39 2010
Return-Path: <java-user-return-46096-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43742 invoked from network); 12 May 2010 17:04:38 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 12 May 2010 17:04:38 -0000
Received: (qmail 74518 invoked by uid 500); 12 May 2010 17:04:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74482 invoked by uid 500); 12 May 2010 17:04:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74474 invoked by uid 99); 12 May 2010 17:04:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 May 2010 17:04:36 +0000
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [207.126.144.131] (HELO eu1sys200aog111.obsmtp.com) (207.126.144.131)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 12 May 2010 17:04:27 +0000
Received: from source ([193.36.230.103]) by eu1sys200aob111.postini.com ([207.126.147.11]) with SMTP
	ID DSNKS+rfhmPZbQQHPIOTSjr6JCnMDWZXruoQ@postini.com; Wed, 12 May 2010 17:04:07 UTC
Received: from blackex05.detica.com ([10.1.1.10]) by proxy02.detica.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 12 May 2010 18:04:02 +0100
Received: from uksrpblkexb01.detica.com ([10.1.1.38]) by blackex05.detica.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Wed, 12 May 2010 18:04:05 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01CAF1F5.20E0F01B"
Subject: How to influence the score in lucene 2.9
Date: Wed, 12 May 2010 18:04:04 +0100
Message-ID: <614C529D389A5944B351F7DFB7594F24AD9EF7@uksrpblkexb01.detica.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: How to influence the score in lucene 2.9
Thread-Index: Acrx9SBoXp/Ael+RQs6qAlYVdUp62w==
From: "Gregory Tarr" <Gregory.tarr@detica.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 12 May 2010 17:04:05.0725 (UTC) FILETIME=[210CD0D0:01CAF1F5]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01CAF1F5.20E0F01B
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

How easy is it to influence the score of search results in lucene 2.9?

The situation is that we have a large number of dated documents that
match the term "john" but we want to return the latest documents when
"john" is the search term.

My solution to this would be to override the score such that the score
is the number of days since 01/01/1970, the latest documents therefore
scoring the highest.

How is this possible in the lucene API?

Thanks

Greg

This message should be regarded as confidential. If you have received thi=
s email in error please notify the sender and destroy it immediately.
Statements of intent shall only become binding when confirmed in hard cop=
y by an authorised signatory.  The contents of this email may relate to d=
ealings with other companies within the Detica Limited group of companies=
=2E

Detica Limited is registered in England under No: 1337451.

Registered offices: Surrey Research Park, Guildford, Surrey, GU2 7YP, Eng=
land.
=0D
------_=_NextPart_001_01CAF1F5.20E0F01B--

From java-user-return-46097-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 12 17:22:12 2010
Return-Path: <java-user-return-46097-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49331 invoked from network); 12 May 2010 17:22:11 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 12 May 2010 17:22:11 -0000
Received: (qmail 5580 invoked by uid 500); 12 May 2010 17:22:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5541 invoked by uid 500); 12 May 2010 17:22:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5533 invoked by uid 99); 12 May 2010 17:22:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 May 2010 17:22:09 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.160.176 as permitted sender)
Received: from [209.85.160.176] (HELO mail-gy0-f176.google.com) (209.85.160.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 May 2010 17:22:02 +0000
Received: by gyf1 with SMTP id 1so118086gyf.35
        for <java-user@lucene.apache.org>; Wed, 12 May 2010 10:21:41 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=Op1olujlpHaub4mJik5uaVg8dxn/QYUOqOPKeLY89yM=;
        b=D1SprLcSqiNw8gi/iFa+dU/RmHEE2VTnpbvT2xwb+X5dNjU6ubiT4ec6NHj2uGtPkd
         2g/GyOLft4FJfpUJluYkb5RXmUpgotLNDmwwu/xhcuQ9q8gYCNxh54XRcAvhxNRMIpcG
         9t155IUyHM/IAfW9bCrajJmA/B7u0npHgp+LE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=FLh1NzFzpmp+TSNNgNTSkIeyV85CZhged7v1F8vQ7Hx1xu0Z3qp1pLktMZbIZ+PFuL
         qZr9wSkXY0sv1wUrIfpsIh6ShxhWvqKLJe/c6uIBQMgwmRcO98KTovNgp3AdAgjPlyYS
         OCRLJlPv34Nj28Mmu7Iyiu3GPT9Muz4CSugtU=
MIME-Version: 1.0
Received: by 10.151.60.3 with SMTP id n3mr11322958ybk.231.1273684900115; Wed, 
	12 May 2010 10:21:40 -0700 (PDT)
Received: by 10.151.43.7 with HTTP; Wed, 12 May 2010 10:21:39 -0700 (PDT)
In-Reply-To: <614C529D389A5944B351F7DFB7594F24AD9EF7@uksrpblkexb01.detica.com>
References: <614C529D389A5944B351F7DFB7594F24AD9EF7@uksrpblkexb01.detica.com>
Date: Wed, 12 May 2010 13:21:39 -0400
Message-ID: <AANLkTikkg-j8-vB_7ZoH9siDh8l-LzRU5pmgZXghDEaV@mail.gmail.com>
Subject: Re: How to influence the score in lucene 2.9
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000325552dee07c15c048668e041
X-Virus-Checked: Checked by ClamAV on apache.org

--000325552dee07c15c048668e041
Content-Type: text/plain; charset=ISO-8859-1

Why wouldn't simply sorting by date descending work in this case? If
you can detect the situation ahead of time that might be simpler.

Do be aware that sorting by date has its own issues if you've stored
the dates with very fine resolutions (e.g. seconds), but there are
well-understood ways of dealing with this.

Best
Erick

On Wed, May 12, 2010 at 1:04 PM, Gregory Tarr <Gregory.tarr@detica.com>wrote:

> How easy is it to influence the score of search results in lucene 2.9?
>
> The situation is that we have a large number of dated documents that
> match the term "john" but we want to return the latest documents when
> "john" is the search term.
>
> My solution to this would be to override the score such that the score
> is the number of days since 01/01/1970, the latest documents therefore
> scoring the highest.
>
> How is this possible in the lucene API?
>
> Thanks
>
> Greg
>
> This message should be regarded as confidential. If you have received this
> email in error please notify the sender and destroy it immediately.
> Statements of intent shall only become binding when confirmed in hard copy
> by an authorised signatory.  The contents of this email may relate to
> dealings with other companies within the Detica Limited group of companies.
>
> Detica Limited is registered in England under No: 1337451.
>
> Registered offices: Surrey Research Park, Guildford, Surrey, GU2 7YP,
> England.
>
>

--000325552dee07c15c048668e041--

From java-user-return-46098-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 12 22:39:16 2010
Return-Path: <java-user-return-46098-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41727 invoked from network); 12 May 2010 22:39:16 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 12 May 2010 22:39:16 -0000
Received: (qmail 79080 invoked by uid 500); 12 May 2010 22:39:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79057 invoked by uid 500); 12 May 2010 22:39:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79049 invoked by uid 99); 12 May 2010 22:39:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 May 2010 22:39:13 +0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=MISSING_MID,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.18.197.228] (HELO web01-nyc.clicvu.com) (69.18.197.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 May 2010 22:39:07 +0000
Received: from [192.168.0.11] by web01-nyc.clicvu.com
          (Post.Office MTA v3.5.3 release 223 ID# 0-64039U1000L100S0V35)
          with SMTP id com for <java-user@lucene.apache.org>;
          Wed, 12 May 2010 19:43:02 -0400
Content-type: text/plain
Date: Wed, 12 May 2010 19:42:33 -0400
From: roy-lucene-user@xemaps.com
Subject: TermDocs
To: java-user@lucene.apache.org
Message-Id: <20100512223913.979D7478445@athena.apache.org>

Hi guys,

I've had this code for some time but am just now questioning if it works.

I have a custom filter that i've been using since Lucene 1.4 to Lucene 2.2.0 and it essentially builds up a BitSet like so:

for ( int x = 0; x < fields.length; x++ ) {
    for ( int y = 0; y < values.length; y++ ) {
    TermDocs termDocs = reader.termDocs( new Term( fields[x], values[y] ) );
    try {
        while ( termDocs.next() ) {
            int doc = termDocs.doc();
            bits.set( doc );
        }
    }
    finally {
        termDocs.close();
    }
    }
}

I notice that it grabs all the TermDocs for the first field and value but nothing after that.  But I do know that the other values exist but I don't get any TermDocs afterwards.

Do I need to reopen the IndexReader each time?

Regards,
Roy

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46099-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 13 09:47:29 2010
Return-Path: <java-user-return-46099-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56694 invoked from network); 13 May 2010 09:47:29 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 13 May 2010 09:47:29 -0000
Received: (qmail 77870 invoked by uid 500); 13 May 2010 09:47:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77721 invoked by uid 500); 13 May 2010 09:47:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77712 invoked by uid 99); 13 May 2010 09:47:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 May 2010 09:47:25 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 May 2010 09:47:16 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id B8442D36009
	for <java-user@lucene.apache.org>; Thu, 13 May 2010 11:46:56 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id beTEb0l2vaLs for <java-user@lucene.apache.org>;
	Thu, 13 May 2010 11:46:48 +0200 (CEST)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 9D669D36004
	for <java-user@lucene.apache.org>; Thu, 13 May 2010 11:46:47 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <614C529D389A5944B351F7DFB7594F24AD9E10@uksrpblkexb01.detica.com>
In-Reply-To: <614C529D389A5944B351F7DFB7594F24AD9E10@uksrpblkexb01.detica.com>
Subject: RE: Unsupported operation in DocIdSetIterator using lucene 2.9
Date: Thu, 13 May 2010 11:47:17 +0200
Message-ID: <006c01caf281$463ff4e0$d2bfdea0$@de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcrxtuXw+LPEnBXSS8GDuQvLqYxQgAAydS8A
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

> I am using lucene 2.9 and I can't understand why a succession of
> un-deprecated methods calls a deprecated method in this class.
> The series of calls is as follows:
>=20
> Searcher.search(Query, Collector)
> IndexSearcher.search(Weight, Filter, Collector)
> Scorer.score(Collector)
> DocIdSetIterator.nextDoc()
> DocIdSetIterator.next()
>=20
> The javadocs for next() say that you should call nextDoc() but yet the
> nextDoc() method calls next()!

This is he correct behavior for deprecating methods that are intended to =
be overridden by users (in this case abstract ones - abstract in 2.4). =
The reason behind is:

If you have legacy 2.4 code that is not yet updated to use nextDoc(), =
but only overrided the previously abstract next(), the backwards layer =
in the default implementation of DocIdSetIterator calls next() for you, =
so the old code still works. If you have code that is already on 3.0 or =
2.9 stage, you will override nextDoc() and next() is never used.

The nextDoc() -> next() is therefore only called, when you have an 2.4 =
legacy class.

Uwe


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46100-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 13 09:50:03 2010
Return-Path: <java-user-return-46100-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57122 invoked from network); 13 May 2010 09:50:03 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 13 May 2010 09:50:03 -0000
Received: (qmail 81028 invoked by uid 500); 13 May 2010 09:50:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80915 invoked by uid 500); 13 May 2010 09:50:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80904 invoked by uid 99); 13 May 2010 09:50:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 May 2010 09:50:00 +0000
X-ASF-Spam-Status: No, hits=4.4 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of manjula53@gmail.com designates 209.85.222.180 as permitted sender)
Received: from [209.85.222.180] (HELO mail-pz0-f180.google.com) (209.85.222.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 May 2010 09:49:53 +0000
Received: by pzk10 with SMTP id 10so602057pzk.20
        for <java-user@lucene.apache.org>; Thu, 13 May 2010 02:49:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=81FgZO1eL/dlRB1e4z4XnlN0BwifW+uQkcwVQA0wpd8=;
        b=N4FUVNry8TDj4zJs82GZQo0VZP3Odw6M/d6B1cLyV12IQtTqWs6v3Hj3GWAz2adOss
         X0+vr1rhb0ruRBUfVC+4Nd1LhMlmzNuXS++S7POqiysJ+DPD0WczFDdsZVSM+hrQVRLS
         wg8kHS0GvvoS6UjaSS7PPCQl8kGtV34mc4qio=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=XCR4WxkqCRnD+9S1maqBXjOIJ0woqO3bsvMeJCNDO8wOzDi+v9twv9DHdFqtYTHPxH
         hd2ZhVPHNisFAG+w2w8cKC9/FOD2WSk2BSdHwoI4vG3Ge+ARh6SBSliLUxKy7ecndIVQ
         T/rdbj4KzL7DhCEy3G996XJfAByAaOdHbtp7E=
MIME-Version: 1.0
Received: by 10.141.213.36 with SMTP id p36mr6100023rvq.5.1273744171957; Thu, 
	13 May 2010 02:49:31 -0700 (PDT)
Received: by 10.140.147.1 with HTTP; Thu, 13 May 2010 02:49:31 -0700 (PDT)
In-Reply-To: <2074142523-1273572081-cardhu_decombobulator_blackberry.rim.net-57823665-@bda152.bisx.produk.on.blackberry>
References: <n2rd1412c691005100510pdd55d7b7h71dd76c99d90a150@mail.gmail.com>
	 <AANLkTinE4FZyhWi14_ZK5PvPkY8lNy78dCZIGdOOFQlq@mail.gmail.com>
	 <AANLkTil59HXMgqV_O8EZQotstfJJ2BydsbPnS7SXxAqt@mail.gmail.com>
	 <2074142523-1273572081-cardhu_decombobulator_blackberry.rim.net-57823665-@bda152.bisx.produk.on.blackberry>
Date: Thu, 13 May 2010 15:19:31 +0530
Message-ID: <AANLkTinCWpYr_q1sVAdc9JzTsEzQWzIPtA25dZf-7mpZ@mail.gmail.com>
Subject: Re: Class_for_HighFrequencyTerms
From: manjula wijewickrema <manjula53@gmail.com>
To: java-user@lucene.apache.org, adam.saltiel@gmail.com
Content-Type: multipart/alternative; boundary=000e0cd1b72ae7d378048676acf1
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd1b72ae7d378048676acf1
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

thanks

On Tue, May 11, 2010 at 3:31 PM, <adam.saltiel@gmail.com> wrote:

> Sounds like your path is messed up and you're not using maven correctly.
> Start with the jar version that contains the class you require and use ma=
ven
> pom to correctly resolve dependencies
> Adam
> Sent using BlackBerry=AE from Orange
>
> -----Original Message-----
> From: manjula wijewickrema <manjula53@gmail.com>
> Date: Tue, 11 May 2010 15:13:12
> To: <java-user@lucene.apache.org>
> Subject: Re: Class_for_HighFrequencyTerms
>
> Dear Erick,
>
> I lokked for it and even added IndexReader.java and TermFreqVector.java
> from
>
> http://www.jarvana.com/jarvana/search?search_type=3Dclass&java_class=3Dor=
g.apache.lucene.index.IndexReader
> .
> But after adding the system indicated a lot of errors in the source code
> IndexReader.java (eg: DirectoryOwningReader cannot be resolved to a
> type, indexCommit
> cannot be resolved to a type, SegmentInfos cannot be resolved, TermEnum
> cannot be resolved to a type, etc.). I am using Lucene 2.9.1 and this
> particular website has listed this source code under 2.9.1 version of
> Lucene. What is the reason for this kind of scenario? Do I have to add
> another JAR file (in order to solve this even I added
> lucene-core-2.9.1-sources.jar, but nothing happened). Pls. be kind enough
> to
> make a reply.
>
> Tanks
> Manjula
>
> On Tue, May 11, 2010 at 1:26 AM, Erick Erickson <erickerickson@gmail.com
> >wrote:
>
> > Have you looked at TermFreqVector?
> >
> > Best
> > Erick
> >
> > On Mon, May 10, 2010 at 8:10 AM, manjula wijewickrema
> > <manjula53@gmail.com>wrote:
> >
> > > Hi,
> > >
> > > If I index a document (single document) in Lucene, then how can I get
> the
> > > term frequencies (even the first and second highest occuring terms) o=
f
> > that
> > > document? Is there any class/method to do taht? If anybody knows, pls=
.
> > help
> > > me.
> > >
> > > Thanks
> > > Manjula
> > >
> >
>
>

--000e0cd1b72ae7d378048676acf1--

From java-user-return-46101-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 13 10:07:54 2010
Return-Path: <java-user-return-46101-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60090 invoked from network); 13 May 2010 10:07:54 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 13 May 2010 10:07:54 -0000
Received: (qmail 92425 invoked by uid 500); 13 May 2010 10:07:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92201 invoked by uid 500); 13 May 2010 10:07:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92188 invoked by uid 99); 13 May 2010 10:07:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 May 2010 10:07:51 +0000
X-ASF-Spam-Status: No, hits=4.4 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of manjula53@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 May 2010 10:07:43 +0000
Received: by pwi6 with SMTP id 6so712841pwi.35
        for <java-user@lucene.apache.org>; Thu, 13 May 2010 03:07:21 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=idDtbdWiem6qcxyej+TpWmnAFqD9dRp9ZtvaRKQIBeg=;
        b=PRungP6XKSJcS7Hx2Yum/g4GxFUSdRnyjdagurJEuMRWPYh1xq1WE32ZvMCsj5nVOL
         6Sae2B7xWPq+DOhIWzlhaU0u2RCUVyFwTJ8vOz5o33ODyby3iW5007zu32QDFbzLfeL0
         dJLncndbpD+bvaqDy5NTai+nXyDefDMkLqfXs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=dxlmvxxOIf2No0u0wVizrtrJJXhpTXHs3MmmHOoG63Gr27K0iIprwSMYcD/XrjEhDL
         q45SNghNVP7B5/uIVd8hls8FxSX3RskQ/4HGWJoaMKC9xTOeFfoa1LXz8JR39wf9DprS
         CaP4jqU2jn+6h7whxWguzW2p0C0UN+wicPzc4=
MIME-Version: 1.0
Received: by 10.140.56.14 with SMTP id e14mr5960391rva.158.1273745241495; Thu, 
	13 May 2010 03:07:21 -0700 (PDT)
Received: by 10.140.147.1 with HTTP; Thu, 13 May 2010 03:07:21 -0700 (PDT)
Date: Thu, 13 May 2010 15:37:21 +0530
Message-ID: <AANLkTimP2J3t60VNxz5yCzQm1PCT9fxcWspT9rVNAiMK@mail.gmail.com>
Subject: Error of the code
From: manjula wijewickrema <manjula53@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636b2ac86a759ae048676ec5d
X-Virus-Checked: Checked by ClamAV on apache.org

--001636b2ac86a759ae048676ec5d
Content-Type: text/plain; charset=ISO-8859-1

Dear All,

I am trying to get the term frequencies (through TermFreqVector) of a
document (using Lucene 2.9.1). In order to do that I have used the following
code. But there is a compile time error in the code and I can't figure it
out. Could somebody can guide me what's wrong with it.
Compile time error I got:
Cannot make a static reference to the non-static method
getTermFreqVector(int, String) from the type IndexReader.

Code:

 *import* org.apache.lucene.analysis.standard.StandardAnalyzer;

*import* org.apache.lucene.document.Document;
*

import* org.apache.lucene.document.Field;
*

import* org.apache.lucene.index.IndexWriter;
*

import* org.apache.lucene.queryParser.ParseException;
*

import* org.apache.lucene.queryParser.QueryParser;
*

import* org.apache.lucene.search.*;
*

import* org.apache.lucene.store.Directory;
*

import* org.apache.lucene.store.RAMDirectory;
*

import* org.apache.lucene.util.Version;

*

import* org.apache.lucene.index.IndexReader;
*

import* org.apache.lucene.index.TermEnum;
*

import* org.apache.lucene.index.Term;
*

import* org.apache.lucene.index.TermFreqVector;

*

import* java.io.IOException;
*

public* *class* DemoTest {

*public* *static* *void* main(String[] args) {

StandardAnalyzer analyzer = *new* StandardAnalyzer(Version.*LUCENE_CURRENT*
);

*try* {

Directory directory = *new* RAMDirectory();

IndexWriter iwriter = *new* IndexWriter(directory, analyzer,
*true*,*new*IndexWriter.MaxFieldLength(25000));

Document doc = *new* Document();

String text = "This is the text to be indexed.";

doc.add(*new* Field("fieldname", text, Field.Store.*YES*,Field.Index.*
ANALYZED*,Field.TermVector.*WITH_POSITIONS_OFFSETS*));

iwriter.addDocument(doc);

TermFreqVector vector = IndexReader.getTermFreqVector(0, "fieldname" );
*

int* size = vector.size();

*for* ( String term : vector.getTerms() )

System.*out*.println( "size = " + size );

iwriter.close();

IndexSearcher isearcher = *new* IndexSearcher(directory, *true*);

QueryParser parser = *new* QueryParser(Version.*LUCENE_CURRENT*, "fieldname",
analyzer);

Query query = parser.parse("text");

ScoreDoc[] hits = isearcher.search(query, *null*, 1000).scoreDocs;

System.*out*.println("hits.length(1) = " + hits.length);

// Iterate through the results:

*for* (*int* i = 0; i < hits.length; i++) {

Document hitDoc = isearcher.doc(hits.doc);

System.*out*.println("hitDoc.get(\"fieldname\") (This is the text to be
indexed) = " +

hitDoc.get("fieldname"));

}

isearcher.close();

directory.close();

} *catch* (Exception ex) {

ex.printStackTrace();

}

}

}



Thanks in advance

Manjula

--001636b2ac86a759ae048676ec5d--

From java-user-return-46102-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 13 10:16:05 2010
Return-Path: <java-user-return-46102-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61624 invoked from network); 13 May 2010 10:16:05 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 13 May 2010 10:16:05 -0000
Received: (qmail 12636 invoked by uid 500); 13 May 2010 10:16:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12544 invoked by uid 500); 13 May 2010 10:16:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12536 invoked by uid 99); 13 May 2010 10:16:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 May 2010 10:16:02 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 72.14.220.157 as permitted sender)
Received: from [72.14.220.157] (HELO fg-out-1718.google.com) (72.14.220.157)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 May 2010 10:15:55 +0000
Received: by fg-out-1718.google.com with SMTP id e12so740426fga.5
        for <java-user@lucene.apache.org>; Thu, 13 May 2010 03:15:34 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=so47pEqcDZgG3RhinNwPIsKEAIbYXqLo0XjPx//pzvY=;
        b=adBFaimJCCELyamusxYzE31DudmeISUJH5QoYIgdIdCGv/fJTT4e3x1DUIru/yi69P
         PmHx9CZkn3m4yUUyaj4MyiEehnr4CFQ2reEU+vvvlJ+VhbB8nPZeybM+xWlqxOOvSPO/
         JH+wW3JQYxJIA1lYsl8SaCJy5c04togw9aTow=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=JlDJo1kgUEih71+GLAlRI4djUu5fTgFzlrDCMhKj/N2UEqYrTsTf7YV6iB3KbIev/0
         onI+C3VXGsoos5M3fo3owJ1Dz4EhLexKZDNMPDLQSOOxSewqW3m/vnO40NLxYgwSRt9D
         if+H6DnDSWSXunyZ/aTEAWzIqyePeYPi/hH5Q=
Received: by 10.204.5.65 with SMTP id 1mr91708bku.214.1273745734263; Thu, 13 
	May 2010 03:15:34 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.54.198 with HTTP; Thu, 13 May 2010 03:15:14 -0700 (PDT)
In-Reply-To: <AANLkTimP2J3t60VNxz5yCzQm1PCT9fxcWspT9rVNAiMK@mail.gmail.com>
References: <AANLkTimP2J3t60VNxz5yCzQm1PCT9fxcWspT9rVNAiMK@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Thu, 13 May 2010 11:15:14 +0100
Message-ID: <AANLkTim6C0pu7skODgogjVaa1pEpEarEg0LLjSehJ88Y@mail.gmail.com>
Subject: Re: Error of the code
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

You need to replace this:

TermFreqVector vector =3D IndexReader.getTermFreqVector(0, "fieldname" );

with

IndexReader ir =3D whatever(...);
TermFreqVector vector =3D ir.getTermFreqVector(0, "fieldname" );

And you'll need to move it to after the writer.close() call if you
want it to see the doc you've just added.



--
Ian.



On Thu, May 13, 2010 at 11:07 AM, manjula wijewickrema
<manjula53@gmail.com> wrote:
> Dear All,
>
> I am trying to get the term frequencies (through TermFreqVector) of a
> document (using Lucene 2.9.1). In order to do that I have used the follow=
ing
> code. But there is a compile time error in the code and I can't figure it
> out. Could somebody can guide me what's wrong with it.
> Compile time error I got:
> Cannot make a static reference to the non-static method
> getTermFreqVector(int, String) from the type IndexReader.
>
> Code:
>
> =A0*import* org.apache.lucene.analysis.standard.StandardAnalyzer;
>
> *import* org.apache.lucene.document.Document;
> *
>
> import* org.apache.lucene.document.Field;
> *
>
> import* org.apache.lucene.index.IndexWriter;
> *
>
> import* org.apache.lucene.queryParser.ParseException;
> *
>
> import* org.apache.lucene.queryParser.QueryParser;
> *
>
> import* org.apache.lucene.search.*;
> *
>
> import* org.apache.lucene.store.Directory;
> *
>
> import* org.apache.lucene.store.RAMDirectory;
> *
>
> import* org.apache.lucene.util.Version;
>
> *
>
> import* org.apache.lucene.index.IndexReader;
> *
>
> import* org.apache.lucene.index.TermEnum;
> *
>
> import* org.apache.lucene.index.Term;
> *
>
> import* org.apache.lucene.index.TermFreqVector;
>
> *
>
> import* java.io.IOException;
> *
>
> public* *class* DemoTest {
>
> *public* *static* *void* main(String[] args) {
>
> StandardAnalyzer analyzer =3D *new* StandardAnalyzer(Version.*LUCENE_CURR=
ENT*
> );
>
> *try* {
>
> Directory directory =3D *new* RAMDirectory();
>
> IndexWriter iwriter =3D *new* IndexWriter(directory, analyzer,
> *true*,*new*IndexWriter.MaxFieldLength(25000));
>
> Document doc =3D *new* Document();
>
> String text =3D "This is the text to be indexed.";
>
> doc.add(*new* Field("fieldname", text, Field.Store.*YES*,Field.Index.*
> ANALYZED*,Field.TermVector.*WITH_POSITIONS_OFFSETS*));
>
> iwriter.addDocument(doc);
>
> TermFreqVector vector =3D IndexReader.getTermFreqVector(0, "fieldname" );
> *
>
> int* size =3D vector.size();
>
> *for* ( String term : vector.getTerms() )
>
> System.*out*.println( "size =3D " + size );
>
> iwriter.close();
>
> IndexSearcher isearcher =3D *new* IndexSearcher(directory, *true*);
>
> QueryParser parser =3D *new* QueryParser(Version.*LUCENE_CURRENT*, "field=
name",
> analyzer);
>
> Query query =3D parser.parse("text");
>
> ScoreDoc[] hits =3D isearcher.search(query, *null*, 1000).scoreDocs;
>
> System.*out*.println("hits.length(1) =3D " + hits.length);
>
> // Iterate through the results:
>
> *for* (*int* i =3D 0; i < hits.length; i++) {
>
> Document hitDoc =3D isearcher.doc(hits.doc);
>
> System.*out*.println("hitDoc.get(\"fieldname\") (This is the text to be
> indexed) =3D " +
>
> hitDoc.get("fieldname"));
>
> }
>
> isearcher.close();
>
> directory.close();
>
> } *catch* (Exception ex) {
>
> ex.printStackTrace();
>
> }
>
> }
>
> }
>
>
>
> Thanks in advance
>
> Manjula
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46103-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 13 10:24:17 2010
Return-Path: <java-user-return-46103-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62735 invoked from network); 13 May 2010 10:24:17 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 13 May 2010 10:24:17 -0000
Received: (qmail 24667 invoked by uid 500); 13 May 2010 10:24:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24416 invoked by uid 500); 13 May 2010 10:24:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24407 invoked by uid 99); 13 May 2010 10:24:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 May 2010 10:24:10 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 May 2010 10:24:04 +0000
Received: by fxm10 with SMTP id 10so1078238fxm.35
        for <java-user@lucene.apache.org>; Thu, 13 May 2010 03:23:43 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=kVOvjAzV5s8xyApxEgORpzvGBKrutsNKrU0nwe+1zhM=;
        b=haMD52+bLipOe0WyD8k45MDdL/bZcDjLp8o9YhhyOQ+EsmNkIylhNC2hev5eQzQezO
         Is9aB4o/jZBk/L9DXACE4suFLVrqnxxGEsxcB5Bj3BBNAVrnm8xcvDcgvIP2J5NaJ4DX
         jMCLj7h4lZmyc2eeWll/sNlhAUfp2hQAZxtxo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=lLAbk1rinIbO0syzEZ0YpXVHOzCr/lkTyDWYmkxJVJ5LXVBf3RN/OgJ6G1eoAYyunu
         SMkR4VO6PqpnfrptizUQjbXont2mLqCkmkk71M7QhiiNcO+F2yMGyPajTz+eZ3it85y0
         M5poPlRIJC5LkHpoREUBx/vkV5G7bhg91aPy4=
Received: by 10.204.39.204 with SMTP id h12mr153484bke.196.1273746223671; Thu, 
	13 May 2010 03:23:43 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.54.198 with HTTP; Thu, 13 May 2010 03:23:23 -0700 (PDT)
In-Reply-To: <AANLkTikkg-j8-vB_7ZoH9siDh8l-LzRU5pmgZXghDEaV@mail.gmail.com>
References: <614C529D389A5944B351F7DFB7594F24AD9EF7@uksrpblkexb01.detica.com> 
	<AANLkTikkg-j8-vB_7ZoH9siDh8l-LzRU5pmgZXghDEaV@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Thu, 13 May 2010 11:23:23 +0100
Message-ID: <AANLkTikVkJ65XEa-_rJWVDzLOaJiuk1QKCdkUGnmP2Pi@mail.gmail.com>
Subject: Re: How to influence the score in lucene 2.9
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

An alternative, if you want the date to influence rather than
determine the score, is to use document boosting, with the boost value
set small for old docs and high for new docs.  You would probably need
to play to find suitable values.  One problem would be that a doc that
is recent today will be somewhat older tomorrow.

Another option, more complicated but very flexible, is to use CustomScoreQu=
ery.


--
Ian.


On Wed, May 12, 2010 at 6:21 PM, Erick Erickson <erickerickson@gmail.com> w=
rote:
> Why wouldn't simply sorting by date descending work in this case? If
> you can detect the situation ahead of time that might be simpler.
>
> Do be aware that sorting by date has its own issues if you've stored
> the dates with very fine resolutions (e.g. seconds), but there are
> well-understood ways of dealing with this.
>
> Best
> Erick
>
> On Wed, May 12, 2010 at 1:04 PM, Gregory Tarr <Gregory.tarr@detica.com>wr=
ote:
>
>> How easy is it to influence the score of search results in lucene 2.9?
>>
>> The situation is that we have a large number of dated documents that
>> match the term "john" but we want to return the latest documents when
>> "john" is the search term.
>>
>> My solution to this would be to override the score such that the score
>> is the number of days since 01/01/1970, the latest documents therefore
>> scoring the highest.
>>
>> How is this possible in the lucene API?
>>
>> Thanks
>>
>> Greg
>>
>> This message should be regarded as confidential. If you have received th=
is
>> email in error please notify the sender and destroy it immediately.
>> Statements of intent shall only become binding when confirmed in hard co=
py
>> by an authorised signatory. =A0The contents of this email may relate to
>> dealings with other companies within the Detica Limited group of compani=
es.
>>
>> Detica Limited is registered in England under No: 1337451.
>>
>> Registered offices: Surrey Research Park, Guildford, Surrey, GU2 7YP,
>> England.
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46104-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 13 12:17:06 2010
Return-Path: <java-user-return-46104-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88684 invoked from network); 13 May 2010 12:17:06 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 13 May 2010 12:17:06 -0000
Received: (qmail 19144 invoked by uid 500); 13 May 2010 12:17:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19088 invoked by uid 500); 13 May 2010 12:17:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19080 invoked by uid 99); 13 May 2010 12:17:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 May 2010 12:17:03 +0000
X-ASF-Spam-Status: No, hits=4.2 required=10.0
	tests=AWL,FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of manjula53@gmail.com designates 209.85.212.176 as permitted sender)
Received: from [209.85.212.176] (HELO mail-px0-f176.google.com) (209.85.212.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 May 2010 12:16:56 +0000
Received: by pxi10 with SMTP id 10so784441pxi.35
        for <java-user@lucene.apache.org>; Thu, 13 May 2010 05:16:36 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=ZE5s/QU2n4LszxD0RF7+Dh0Dtlg2oP5jul5AeaVV7sM=;
        b=jJSKhNEIPJXuDDPBDsKM/wUwuD+zDy7MGig82KB7KHL1EzztorCSAWc8G3+QEb39F0
         KZQGavWZCqMNDl6lfbO6Mtw+AlhBo0dpyrrK99aGcjpCa2+gnmC+/O1xAjS+R/gk4Icr
         dgfgkBc+sT5ySVPUVd0rnlVspmIXIvisxpPwc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=onOZiMTLx+t6pW0Oe0f06KDdYll3zMvdGY8csEc/c5nj/QfGUTD0YhqFI99wjNeZ4r
         ++jbMAK3ubNxE47pcZO5URRs6WFjTYM/HxHW82qo4nBFTn3sD9vQ+xjs8p4b5LHKMcYr
         CVX81DwMhoKKQk1KPXB9niWVgwB578A1LcfYc=
MIME-Version: 1.0
Received: by 10.141.213.36 with SMTP id p36mr6206542rvq.5.1273752996679; Thu, 
	13 May 2010 05:16:36 -0700 (PDT)
Received: by 10.140.147.1 with HTTP; Thu, 13 May 2010 05:16:36 -0700 (PDT)
In-Reply-To: <AANLkTim6C0pu7skODgogjVaa1pEpEarEg0LLjSehJ88Y@mail.gmail.com>
References: <AANLkTimP2J3t60VNxz5yCzQm1PCT9fxcWspT9rVNAiMK@mail.gmail.com>
	 <AANLkTim6C0pu7skODgogjVaa1pEpEarEg0LLjSehJ88Y@mail.gmail.com>
Date: Thu, 13 May 2010 17:46:36 +0530
Message-ID: <AANLkTilpGnFBMuobzxfomo3tXFZLA67PmeY406UzbuTi@mail.gmail.com>
Subject: Re: Error of the code
From: manjula wijewickrema <manjula53@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd1b72ae6104e048678ba2c

--000e0cd1b72ae6104e048678ba2c
Content-Type: text/plain; charset=ISO-8859-1

Dear Ian,

Thanks a lot for your immediate reply. As you have mentioned I replaced the
lines as follows.


IndexReader ir=IndexReader.open(directory);

TermFreqVector vector=ir.getTermFreqVector(0,"fieldname");

Now the error has been vanished and thanks for it. But I can't still see the
results although I have moved those lines after iwriter.close(). What's the
reason for this?

sample code after modifications:
.........................
........................

String text = "This is the text to be indexed.";

 doc.add(*new* Field("fieldname", text, Field.Store.*YES*,Field.Index.*
ANALYZED*,Field.TermVector.*WITH_POSITIONS_OFFSETS*));

iwriter.addDocument(doc);

iwriter.close();

IndexReader ir=IndexReader.open(directory);

TermFreqVector vector=ir.getTermFreqVector(0,"fieldname");
*

int* size = vector.size();

*for* ( String term : vector.getTerms() )

System.*out*.println( "size = " + size );

IndexSearcher isearcher = *new* IndexSearcher(directory, *true*);
..........
..........
I appreciate your kind coperation
Manjula
On Thu, May 13, 2010 at 3:45 PM, Ian Lea <ian.lea@gmail.com> wrote:

> You need to replace this:
>
> TermFreqVector vector = IndexReader.getTermFreqVector(0, "fieldname" );
>
> with
>
> IndexReader ir = whatever(...);
> TermFreqVector vector = ir.getTermFreqVector(0, "fieldname" );
>
> And you'll need to move it to after the writer.close() call if you
> want it to see the doc you've just added.
>
>
>
> --
> Ian.
>
>
>
> On Thu, May 13, 2010 at 11:07 AM, manjula wijewickrema
> <manjula53@gmail.com> wrote:
> > Dear All,
> >
> > I am trying to get the term frequencies (through TermFreqVector) of a
> > document (using Lucene 2.9.1). In order to do that I have used the
> following
> > code. But there is a compile time error in the code and I can't figure it
> > out. Could somebody can guide me what's wrong with it.
> > Compile time error I got:
> > Cannot make a static reference to the non-static method
> > getTermFreqVector(int, String) from the type IndexReader.
> >
> > Code:
> >
> >  *import* org.apache.lucene.analysis.standard.StandardAnalyzer;
> >
> > *import* org.apache.lucene.document.Document;
> > *
> >
> > import* org.apache.lucene.document.Field;
> > *
> >
> > import* org.apache.lucene.index.IndexWriter;
> > *
> >
> > import* org.apache.lucene.queryParser.ParseException;
> > *
> >
> > import* org.apache.lucene.queryParser.QueryParser;
> > *
> >
> > import* org.apache.lucene.search.*;
> > *
> >
> > import* org.apache.lucene.store.Directory;
> > *
> >
> > import* org.apache.lucene.store.RAMDirectory;
> > *
> >
> > import* org.apache.lucene.util.Version;
> >
> > *
> >
> > import* org.apache.lucene.index.IndexReader;
> > *
> >
> > import* org.apache.lucene.index.TermEnum;
> > *
> >
> > import* org.apache.lucene.index.Term;
> > *
> >
> > import* org.apache.lucene.index.TermFreqVector;
> >
> > *
> >
> > import* java.io.IOException;
> > *
> >
> > public* *class* DemoTest {
> >
> > *public* *static* *void* main(String[] args) {
> >
> > StandardAnalyzer analyzer = *new*
> StandardAnalyzer(Version.*LUCENE_CURRENT*
> > );
> >
> > *try* {
> >
> > Directory directory = *new* RAMDirectory();
> >
> > IndexWriter iwriter = *new* IndexWriter(directory, analyzer,
> > *true*,*new*IndexWriter.MaxFieldLength(25000));
> >
> > Document doc = *new* Document();
> >
> > String text = "This is the text to be indexed.";
> >
> > doc.add(*new* Field("fieldname", text, Field.Store.*YES*,Field.Index.*
> > ANALYZED*,Field.TermVector.*WITH_POSITIONS_OFFSETS*));
> >
> > iwriter.addDocument(doc);
> >
> > TermFreqVector vector = IndexReader.getTermFreqVector(0, "fieldname" );
> > *
> >
> > int* size = vector.size();
> >
> > *for* ( String term : vector.getTerms() )
> >
> > System.*out*.println( "size = " + size );
> >
> > iwriter.close();
> >
> > IndexSearcher isearcher = *new* IndexSearcher(directory, *true*);
> >
> > QueryParser parser = *new* QueryParser(Version.*LUCENE_CURRENT*,
> "fieldname",
> > analyzer);
> >
> > Query query = parser.parse("text");
> >
> > ScoreDoc[] hits = isearcher.search(query, *null*, 1000).scoreDocs;
> >
> > System.*out*.println("hits.length(1) = " + hits.length);
> >
> > // Iterate through the results:
> >
> > *for* (*int* i = 0; i < hits.length; i++) {
> >
> > Document hitDoc = isearcher.doc(hits.doc);
> >
> > System.*out*.println("hitDoc.get(\"fieldname\") (This is the text to be
> > indexed) = " +
> >
> > hitDoc.get("fieldname"));
> >
> > }
> >
> > isearcher.close();
> >
> > directory.close();
> >
> > } *catch* (Exception ex) {
> >
> > ex.printStackTrace();
> >
> > }
> >
> > }
> >
> > }
> >
> >
> >
> > Thanks in advance
> >
> > Manjula
> >
>
>  ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd1b72ae6104e048678ba2c--

From java-user-return-46105-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 13 13:23:51 2010
Return-Path: <java-user-return-46105-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6843 invoked from network); 13 May 2010 13:23:51 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 13 May 2010 13:23:51 -0000
Received: (qmail 81570 invoked by uid 500); 13 May 2010 13:23:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81349 invoked by uid 500); 13 May 2010 13:23:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81341 invoked by uid 99); 13 May 2010 13:23:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 May 2010 13:23:48 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 May 2010 13:23:37 +0000
Received: by fxm10 with SMTP id 10so1262332fxm.35
        for <java-user@lucene.apache.org>; Thu, 13 May 2010 06:23:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=4LDSaA/GvUY1rWwURA24aFr0G3iQHrmB4a8f4MEdts0=;
        b=lxg4VqYg0oEH0ReCbK0vOfW2hrSFZ0gcgkSDvZoGTG5FWGm00kNDuW+xlpuKdUVbAp
         bwX7xJHOrazxCemajxbQ+XSL/1CklNqxDka0zuNlOnumZNjNFtnMFiGspiALrVqCMkRP
         WPCdSQWZeQIgPSDgywXClNqqpASU83qXHQ1g8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=NwxJISmZngGTURBw5Ac6FzQkZMKqczXO/BkJvB/9ZCljYkSAslW5H4Js8ChXCU2jJH
         I24GFc22FiWfKffDssulgw9i/h4LkvTltE5el9BOG+nyWLDrqTxXPAkipI0ZaYv/3K5U
         beUse6Ax4MvaQft41sHL6onSrrTNsMo26T8b4=
Received: by 10.204.45.207 with SMTP id g15mr236404bkf.210.1273756997366; Thu, 
	13 May 2010 06:23:17 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.54.198 with HTTP; Thu, 13 May 2010 06:22:57 -0700 (PDT)
In-Reply-To: <AANLkTilpGnFBMuobzxfomo3tXFZLA67PmeY406UzbuTi@mail.gmail.com>
References: <AANLkTimP2J3t60VNxz5yCzQm1PCT9fxcWspT9rVNAiMK@mail.gmail.com> 
	<AANLkTim6C0pu7skODgogjVaa1pEpEarEg0LLjSehJ88Y@mail.gmail.com> 
	<AANLkTilpGnFBMuobzxfomo3tXFZLA67PmeY406UzbuTi@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Thu, 13 May 2010 14:22:57 +0100
Message-ID: <AANLkTikakC88wjLH8dWdmA66lJtxyTF9yYdYmu9rpgT6@mail.gmail.com>
Subject: Re: Error of the code
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

What does vector.size() return?  You don't appear to be doing anything
with the String term in "for ( String term : vector.getTerms() )" -
presumably you intend to.


--
Ian.

On Thu, May 13, 2010 at 1:16 PM, manjula wijewickrema
<manjula53@gmail.com> wrote:
> Dear Ian,
>
> Thanks a lot for your immediate reply. As you have mentioned I replaced t=
he
> lines as follows.
>
>
> IndexReader ir=3DIndexReader.open(directory);
>
> TermFreqVector vector=3Dir.getTermFreqVector(0,"fieldname");
>
> Now the error has been vanished and thanks for it. But I can't still see =
the
> results although I have moved those lines after iwriter.close(). What's t=
he
> reason for this?
>
> sample code after modifications:
> .........................
> ........................
>
> String text =3D "This is the text to be indexed.";
>
> =A0doc.add(*new* Field("fieldname", text, Field.Store.*YES*,Field.Index.*
> ANALYZED*,Field.TermVector.*WITH_POSITIONS_OFFSETS*));
>
> iwriter.addDocument(doc);
>
> iwriter.close();
>
> IndexReader ir=3DIndexReader.open(directory);
>
> TermFreqVector vector=3Dir.getTermFreqVector(0,"fieldname");
> *
>
> int* size =3D vector.size();
>
> *for* ( String term : vector.getTerms() )
>
> System.*out*.println( "size =3D " + size );
>
> IndexSearcher isearcher =3D *new* IndexSearcher(directory, *true*);
> ..........
> ..........
> I appreciate your kind coperation
> Manjula
> On Thu, May 13, 2010 at 3:45 PM, Ian Lea <ian.lea@gmail.com> wrote:
>
>> You need to replace this:
>>
>> TermFreqVector vector =3D IndexReader.getTermFreqVector(0, "fieldname" )=
;
>>
>> with
>>
>> IndexReader ir =3D whatever(...);
>> TermFreqVector vector =3D ir.getTermFreqVector(0, "fieldname" );
>>
>> And you'll need to move it to after the writer.close() call if you
>> want it to see the doc you've just added.
>>
>>
>>
>> --
>> Ian.
>>
>>
>>
>> On Thu, May 13, 2010 at 11:07 AM, manjula wijewickrema
>> <manjula53@gmail.com> wrote:
>> > Dear All,
>> >
>> > I am trying to get the term frequencies (through TermFreqVector) of a
>> > document (using Lucene 2.9.1). In order to do that I have used the
>> following
>> > code. But there is a compile time error in the code and I can't figure=
 it
>> > out. Could somebody can guide me what's wrong with it.
>> > Compile time error I got:
>> > Cannot make a static reference to the non-static method
>> > getTermFreqVector(int, String) from the type IndexReader.
>> >
>> > Code:
>> >
>> > =A0*import* org.apache.lucene.analysis.standard.StandardAnalyzer;
>> >
>> > *import* org.apache.lucene.document.Document;
>> > *
>> >
>> > import* org.apache.lucene.document.Field;
>> > *
>> >
>> > import* org.apache.lucene.index.IndexWriter;
>> > *
>> >
>> > import* org.apache.lucene.queryParser.ParseException;
>> > *
>> >
>> > import* org.apache.lucene.queryParser.QueryParser;
>> > *
>> >
>> > import* org.apache.lucene.search.*;
>> > *
>> >
>> > import* org.apache.lucene.store.Directory;
>> > *
>> >
>> > import* org.apache.lucene.store.RAMDirectory;
>> > *
>> >
>> > import* org.apache.lucene.util.Version;
>> >
>> > *
>> >
>> > import* org.apache.lucene.index.IndexReader;
>> > *
>> >
>> > import* org.apache.lucene.index.TermEnum;
>> > *
>> >
>> > import* org.apache.lucene.index.Term;
>> > *
>> >
>> > import* org.apache.lucene.index.TermFreqVector;
>> >
>> > *
>> >
>> > import* java.io.IOException;
>> > *
>> >
>> > public* *class* DemoTest {
>> >
>> > *public* *static* *void* main(String[] args) {
>> >
>> > StandardAnalyzer analyzer =3D *new*
>> StandardAnalyzer(Version.*LUCENE_CURRENT*
>> > );
>> >
>> > *try* {
>> >
>> > Directory directory =3D *new* RAMDirectory();
>> >
>> > IndexWriter iwriter =3D *new* IndexWriter(directory, analyzer,
>> > *true*,*new*IndexWriter.MaxFieldLength(25000));
>> >
>> > Document doc =3D *new* Document();
>> >
>> > String text =3D "This is the text to be indexed.";
>> >
>> > doc.add(*new* Field("fieldname", text, Field.Store.*YES*,Field.Index.*
>> > ANALYZED*,Field.TermVector.*WITH_POSITIONS_OFFSETS*));
>> >
>> > iwriter.addDocument(doc);
>> >
>> > TermFreqVector vector =3D IndexReader.getTermFreqVector(0, "fieldname"=
 );
>> > *
>> >
>> > int* size =3D vector.size();
>> >
>> > *for* ( String term : vector.getTerms() )
>> >
>> > System.*out*.println( "size =3D " + size );
>> >
>> > iwriter.close();
>> >
>> > IndexSearcher isearcher =3D *new* IndexSearcher(directory, *true*);
>> >
>> > QueryParser parser =3D *new* QueryParser(Version.*LUCENE_CURRENT*,
>> "fieldname",
>> > analyzer);
>> >
>> > Query query =3D parser.parse("text");
>> >
>> > ScoreDoc[] hits =3D isearcher.search(query, *null*, 1000).scoreDocs;
>> >
>> > System.*out*.println("hits.length(1) =3D " + hits.length);
>> >
>> > // Iterate through the results:
>> >
>> > *for* (*int* i =3D 0; i < hits.length; i++) {
>> >
>> > Document hitDoc =3D isearcher.doc(hits.doc);
>> >
>> > System.*out*.println("hitDoc.get(\"fieldname\") (This is the text to b=
e
>> > indexed) =3D " +
>> >
>> > hitDoc.get("fieldname"));
>> >
>> > }
>> >
>> > isearcher.close();
>> >
>> > directory.close();
>> >
>> > } *catch* (Exception ex) {
>> >
>> > ex.printStackTrace();
>> >
>> > }
>> >
>> > }
>> >
>> > }
>> >
>> >
>> >
>> > Thanks in advance
>> >
>> > Manjula
>> >
>>
>> =A0---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46106-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 13 19:45:01 2010
Return-Path: <java-user-return-46106-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8626 invoked from network); 13 May 2010 19:45:00 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 13 May 2010 19:45:00 -0000
Received: (qmail 13108 invoked by uid 500); 13 May 2010 19:44:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13078 invoked by uid 500); 13 May 2010 19:44:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13070 invoked by uid 99); 13 May 2010 19:44:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 May 2010 19:44:58 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of srbh.grwl@gmail.com designates 209.85.212.176 as permitted sender)
Received: from [209.85.212.176] (HELO mail-px0-f176.google.com) (209.85.212.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 May 2010 19:44:50 +0000
Received: by pxi10 with SMTP id 10so1123019pxi.35
        for <java-user@lucene.apache.org>; Thu, 13 May 2010 12:44:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=wB90sqZq37zYPVwzK1RpPBgiAJvN6T5l28vQlxSumZ4=;
        b=MLrAKIf8Ju7dsfo2AsFIgZ7ra8TdkTJPL9BdeNdtYuhrLkdN8Otmi5FH8O4ySFjWAJ
         pToGtPVBwfP5AD3a7L33jgcBx3kB/nyeorvm36qCFreYDPnYuFnC7mmVndA9jElns/i1
         TGA9ERJpBSx6OcYF5VEoVCXKAdT2VO3Z0xg50=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=b6LZEMhHSKM+BNMoGReagkb+rYk3xyhahykfMoiZRcI9f/I/koGed9/EL9NLShgtbo
         Ue4EZgSwqVBW3HWzMuBASXcZCdwuXk0VZLFvvjUn1+BX9geXHGKbmf5RuOInZ4qDo2El
         zmZqfVcXXE/C4rs98CbSg0CfRoTPtQc7Yl+Sc=
MIME-Version: 1.0
Received: by 10.142.196.19 with SMTP id t19mr1426735wff.306.1273779869528; 
	Thu, 13 May 2010 12:44:29 -0700 (PDT)
Received: by 10.143.163.6 with HTTP; Thu, 13 May 2010 12:44:29 -0700 (PDT)
Date: Fri, 14 May 2010 01:14:29 +0530
Message-ID: <AANLkTikB3gdJF0bSSBU_mReD-TTRP9JFKoqFovK7IYxK@mail.gmail.com>
Subject: Storing a field as byte[[]
From: Saurabh Agarwal <srbh.grwl@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd32ed8a533a704867efc70
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd32ed8a533a704867efc70
Content-Type: text/plain; charset=ISO-8859-1

Hi,
I am new to lucene. the constructors in Feild show that I can give the value
as byte[] I wanted to ask if I store a integer as a byte array the how it
will ve searched during search say file size!!!

because if I use text format the range search will be poor say fs of 10 12
20 30 50 100 101 102 will be organised as
10
100
101
102
12
20
30
50

so range search of size between 10 and 20 will be relatively poor if I store
values like the order given

Thanks and regards
Saurabh Agarwal

--000e0cd32ed8a533a704867efc70--

From java-user-return-46107-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 13 20:04:21 2010
Return-Path: <java-user-return-46107-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12970 invoked from network); 13 May 2010 20:04:21 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 13 May 2010 20:04:21 -0000
Received: (qmail 47140 invoked by uid 500); 13 May 2010 20:04:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47078 invoked by uid 500); 13 May 2010 20:04:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47070 invoked by uid 99); 13 May 2010 20:04:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 May 2010 20:04:19 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 May 2010 20:04:11 +0000
Received: by fxm3 with SMTP id 3so17132fxm.35
        for <java-user@lucene.apache.org>; Thu, 13 May 2010 13:03:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=5zn8Kd8jWgHP6Fc7+hAiiUFvKi94sCA0O9ii7jIBR7A=;
        b=NImvTAXhwOHM7Yo0myEFGliQCbuEM6KpABCslTKtz/B0nwJUkuqHf3oArCGCLmLvSD
         KUaSkVqpju8E8aBJpyO8ZVh1xbppTv99lLGMzHYPYFieF5iw+yahEmDRSTGUzJbg740X
         QgqZ7bjh06GBP1B2Hfgjk4/DoIiOcrQRLuzp4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=fHWfFD0tXqRVNfINxyqYuy7/zFysTBGFc9Fan/pyC4bpZ4mmwXxPAxkMy8EbRU8jAu
         Ugy7iytdynPOUVSAtYBXPX/bsieIFbFcs9Dw1BHwfoEDvMno2YQtyMY83bnOUFzlqjqn
         SNFJMACZgZEvTQUwT7xiwm1sF79ZUkIwAF3o8=
Received: by 10.204.45.193 with SMTP id g1mr22892bkf.12.1273781031159; Thu, 13 
	May 2010 13:03:51 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.54.198 with HTTP; Thu, 13 May 2010 13:03:31 -0700 (PDT)
In-Reply-To: <AANLkTikB3gdJF0bSSBU_mReD-TTRP9JFKoqFovK7IYxK@mail.gmail.com>
References: <AANLkTikB3gdJF0bSSBU_mReD-TTRP9JFKoqFovK7IYxK@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Thu, 13 May 2010 21:03:31 +0100
Message-ID: <AANLkTilR4oNnACZ49DRDw3QDerhH7VXV9PMsP6F8cDMN@mail.gmail.com>
Subject: Re: Storing a field as byte[[]
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

You can store byte arrays, but you can't search on them.  For integers
you can either pad them out with leading zeros or use NumericField. If
you use NumericField you'll need to use NumericRangeQuery as well.

--
Ian.


On Thu, May 13, 2010 at 8:44 PM, Saurabh Agarwal <srbh.grwl@gmail.com> wrote:
> Hi,
> I am new to lucene. the constructors in Feild show that I can give the value
> as byte[] I wanted to ask if I store a integer as a byte array the how it
> will ve searched during search say file size!!!
>
> because if I use text format the range search will be poor say fs of 10 12
> 20 30 50 100 101 102 will be organised as
> 10
> 100
> 101
> 102
> 12
> 20
> 30
> 50
>
> so range search of size between 10 and 20 will be relatively poor if I store
> values like the order given
>
> Thanks and regards
> Saurabh Agarwal
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46108-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 13 23:47:38 2010
Return-Path: <java-user-return-46108-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67757 invoked from network); 13 May 2010 23:47:37 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 13 May 2010 23:47:37 -0000
Received: (qmail 78213 invoked by uid 500); 13 May 2010 23:47:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78094 invoked by uid 500); 13 May 2010 23:47:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78069 invoked by uid 99); 13 May 2010 23:47:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 May 2010 23:47:29 +0000
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=AWL,FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of bradfordstephens@gmail.com designates 209.85.221.173 as permitted sender)
Received: from [209.85.221.173] (HELO mail-qy0-f173.google.com) (209.85.221.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 May 2010 23:47:25 +0000
Received: by qyk4 with SMTP id 4so2630369qyk.21
        for <multiple recipients>; Thu, 13 May 2010 16:47:04 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=MA/yyG+ji7gLDbenSMh3ubb8xgUKYydUNKNYYQ5+bq4=;
        b=LsbZI+9E5AqmxHDos5ouqHsSas+43E2RtQsg4vUpUy3UPo1w4GpbM4y4aNm6s3frXF
         Wx8ilNjJsd+vzWZqvEDJMpCcaDXvf9YlK+tsKfh6d2WvAXUAyDNGyBqx4NqIl8iZ2vUm
         9+hTKdQSBiOwzbOqxGMc6yKcdfT6WplBJN2jw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=HYU+51I18a65LA+GkrwJtTXP7p0VRrR957ThZKOJgZ/j7s/wqGur+cmS2FfWhXi/dY
         uZpDa8mRM9Yd2NqGoei7HUz9tn4/E2QPON8yT52rEZMQLmZPGJn8G2t4zgOzGggRam8c
         WZgJWrfOC2YLNkJKQYSvda5UXQXFIT1qr4Xfg=
MIME-Version: 1.0
Received: by 10.224.52.164 with SMTP id i36mr88986qag.147.1273794423880; Thu, 
	13 May 2010 16:47:03 -0700 (PDT)
Received: by 10.229.246.211 with HTTP; Thu, 13 May 2010 16:47:03 -0700 (PDT)
Date: Thu, 13 May 2010 16:47:03 -0700
Message-ID: <AANLkTinu6LbdDDoY5tsuuOAx15UjjbQHLLZUKWW_Aqpw@mail.gmail.com>
Subject: Seattle Hadoop/NoSQL: Facebook, more Discussion. Thurs May 27th
From: Bradford Stephens <bradfordstephens@gmail.com>
To: hive-user@hadoop.apache.org, pig-user@hadoop.apache.org, 
	core-user@hadoop.apache.org, solr-user@lucene.apache.org, 
	java-user@lucene.apache.org, organize <Organize@seattletechstartups.com>, 
	nosql-discussion@googlegroups.com, nutch-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

We've heard your feedback from the last meetup: we're having less
speakers and more discussion. Yay!
http://www.meetup.com/Seattle-Hadoop-HBase-NoSQL-Meetup/

We're expecting:

1. Facebook will talk about Hive (a SQL-like language for MapReduce)
2. OpsCode will talk about cluster management with Chef
3. Then we'll break up into groups and have casual Hadoop/NoSQL
related discussions and Q&A with several experts, so you can learn
more!

Also, stay tuned for news on a FREE Seattle Hadoop Community &
Training day in late July. We're going to get some fantastic people,
and you'll have hands-on experience with all the Hadoop ecosystem.

When: Thursday, May 27, 2010 6:45 PM

Where:
Amazon SLU, Von Vorst Building
426 Terry Ave N
Seattle, WA 98109
9044153009

-- 
Bradford Stephens,
Founder, Drawn to Scale
drawntoscalehq.com
727.697.7528

http://www.drawntoscalehq.com --  The intuitive, cloud-scale data
solution. Process, store, query, search, and serve all your data.

http://www.roadtofailure.com -- The Fringes of Scalability, Social
Media, and Computer Science

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46109-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 14 01:39:20 2010
Return-Path: <java-user-return-46109-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91533 invoked from network); 14 May 2010 01:39:19 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 May 2010 01:39:19 -0000
Received: (qmail 55197 invoked by uid 500); 14 May 2010 01:39:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55013 invoked by uid 500); 14 May 2010 01:39:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55005 invoked by uid 99); 14 May 2010 01:39:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 May 2010 01:39:17 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of nigelspleen@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 May 2010 01:39:09 +0000
Received: by vws6 with SMTP id 6so1716682vws.35
        for <java-user@lucene.apache.org>; Thu, 13 May 2010 18:38:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=avt6B2Ibq5CAsMCq60IgKat8hDDfhLuO0UwVKNwKK4k=;
        b=GvaORqJ0pMeaKm+eD48qPIXKoEh62jvObtHolBylnAUBb11g4cE+LfQIKZtvh5xee4
         sj9liV1AoIHyCMlVuD+MGbQjELUFxT3qjA8xKfFOc5Mw3voH3sNOlNPKsaL3RJw1ZBZT
         XA+/rpIQevwMLibbLi7KLpHYBp6NIEwqKWyDY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=jd9uDh7iSvzkZH8f6ny/zNauvI0MCTT63l/pJZ6fQjuwabZnmLvA2QT3qZEwyQpciK
         Lm1rwgO7Z6e9fwQyTqz15THm1cADjjffode4nUn+V1TrB8Xn2KAl17saMtVsSLFO6Jdt
         a/s2T32COliiD2q4s4IjuDFCmMXt5ED3VjGZc=
MIME-Version: 1.0
Received: by 10.220.108.41 with SMTP id d41mr163708vcp.200.1273801128629; Thu, 
	13 May 2010 18:38:48 -0700 (PDT)
Received: by 10.220.157.199 with HTTP; Thu, 13 May 2010 18:38:48 -0700 (PDT)
Date: Thu, 13 May 2010 21:38:48 -0400
Message-ID: <AANLkTikHCfOfkqFFJcZJz9e92tgzNYLlByiLztoXZd6j@mail.gmail.com>
Subject: Will doc ids ever change if nothing is deleted?
From: Nigel <nigelspleen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00c09f8c2524c958a2048683efa2
X-Virus-Checked: Checked by ClamAV on apache.org

--00c09f8c2524c958a2048683efa2
Content-Type: text/plain; charset=ISO-8859-1

The FAQ clearly states that document IDs will not be re-assigned unless
something was deleted.
http://wiki.apache.org/lucene-java/LuceneFAQ#When_is_it_possible_for_document_IDs_to_change.3F

However, a number of other emails and posts I've read mention that
renumbering occurs when segments are merged.  Maybe what people mean
is simply that when something is deleted, nothing is immediately renumbered,
and it's not until merge time that the renumbering happens.  (This is my
understanding of how it works.)

Just so I'm 100% clear, if I never delete anything, will the IDs ever
change?

Thanks,
Chris

--00c09f8c2524c958a2048683efa2--

From java-user-return-46110-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 14 01:52:13 2010
Return-Path: <java-user-return-46110-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96995 invoked from network); 14 May 2010 01:52:13 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 May 2010 01:52:13 -0000
Received: (qmail 76789 invoked by uid 500); 14 May 2010 01:52:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76600 invoked by uid 500); 14 May 2010 01:52:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76592 invoked by uid 99); 14 May 2010 01:52:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 May 2010 01:52:10 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.217.225 as permitted sender)
Received: from [209.85.217.225] (HELO mail-gx0-f225.google.com) (209.85.217.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 May 2010 01:52:03 +0000
Received: by gxk25 with SMTP id 25so1149363gxk.11
        for <java-user@lucene.apache.org>; Thu, 13 May 2010 18:51:42 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=9LRRF7Ju4AfYJdKFhd4dWMovcZ8pS3A5ZNNQCMBagZ4=;
        b=tZnILoc51ZkmHziRKmnZ4blR9W/mihtMFZrcDBpYaT9pkP+uhJzIdzQmRUfDjZqzGL
         qO7WSSakDAFio3QzEp2g9gBUaCNlEbHW69ci7owHVyEyivBoqmM7xbBy0fGRzWZpOqZn
         kVcJBSDA3vO9k4JXXAQ97DPTLRW9i4Lhb1Hug=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=r/SqwfGwzLuaPGE61GjRao+aj3aDW2uGbKEqIrasbufiD55ufmiDTd2aZVowIhA4ve
         TpwXDZVs+kQuU4qqs1wFUKo9BDk3j/7rjK2YIugbNoWdrmpZLjXQeqA1hEPp8GW5xBT0
         LFLoQi4jeFs8KjkZrbqyaDF4xtA3EvCmbXz2g=
MIME-Version: 1.0
Received: by 10.150.174.4 with SMTP id w4mr1473979ybe.146.1273801902326; Thu, 
	13 May 2010 18:51:42 -0700 (PDT)
Received: by 10.151.43.7 with HTTP; Thu, 13 May 2010 18:51:42 -0700 (PDT)
In-Reply-To: <AANLkTikHCfOfkqFFJcZJz9e92tgzNYLlByiLztoXZd6j@mail.gmail.com>
References: <AANLkTikHCfOfkqFFJcZJz9e92tgzNYLlByiLztoXZd6j@mail.gmail.com>
Date: Thu, 13 May 2010 21:51:42 -0400
Message-ID: <AANLkTilAx7GfwVpHD5QlnrQT6ddwdEB_FtkUYrt8kiuR@mail.gmail.com>
Subject: Re: Will doc ids ever change if nothing is deleted?
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd573a8e702aa0486841d09
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd573a8e702aa0486841d09
Content-Type: text/plain; charset=ISO-8859-1

Why do you care? That is, what do you want to accomplish
that makes document ID renumbering relevant?

In general, it is unwise to rely on Lucene-assigned document
IDs. If you need an invariant document ID, assign it yourself.

If this is off base, could you supply your use-case?

Best
Erick

On Thu, May 13, 2010 at 9:38 PM, Nigel <nigelspleen@gmail.com> wrote:

> The FAQ clearly states that document IDs will not be re-assigned unless
> something was deleted.
>
> http://wiki.apache.org/lucene-java/LuceneFAQ#When_is_it_possible_for_document_IDs_to_change.3F
>
> However, a number of other emails and posts I've read mention that
> renumbering occurs when segments are merged.  Maybe what people mean
> is simply that when something is deleted, nothing is immediately
> renumbered,
> and it's not until merge time that the renumbering happens.  (This is my
> understanding of how it works.)
>
> Just so I'm 100% clear, if I never delete anything, will the IDs ever
> change?
>
> Thanks,
> Chris
>

--000e0cd573a8e702aa0486841d09--

From java-user-return-46111-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 14 02:13:13 2010
Return-Path: <java-user-return-46111-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99814 invoked from network); 14 May 2010 02:13:12 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 May 2010 02:13:12 -0000
Received: (qmail 86880 invoked by uid 500); 14 May 2010 02:13:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86849 invoked by uid 500); 14 May 2010 02:13:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86841 invoked by uid 99); 14 May 2010 02:13:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 May 2010 02:13:10 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of nigelspleen@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 May 2010 02:13:03 +0000
Received: by vws6 with SMTP id 6so1733413vws.35
        for <java-user@lucene.apache.org>; Thu, 13 May 2010 19:12:41 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=uv2MMpTkgHgB91jn/J2//wLFv1gubolpdnuO7PauPXg=;
        b=pMJFHLhVsrkHsYOnfzc4X7HbMr775CCxjRmpFd6xvuGQEkddYFZbxwJYZfHoGbXR6B
         dWTu4fAf8RwFfIi9QWOgNCRru0+F1atASvvLWLJnCp4mxRNFJ27rK9yKVHnZmgRLntD2
         RtmSfnJ4grFZ3bLOXioU52mRZqUDtfh+v5jK4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=DXEa/AXMCB1zM56bMrwJ30n941xXLESfexkR0dGNOQ1HEfRDjUsdSC5/c0JmcxLs6w
         IgWMLIAkWsVfurldEszfGCDF2HvgJ8UsL/qP0mW+Y1yTTpolVU16bGfY6GJorGdkAmTq
         wCcRojO2FwjhovhYtyz+amCNkvZln+1HYTJw0=
MIME-Version: 1.0
Received: by 10.220.123.68 with SMTP id o4mr192710vcr.148.1273803155834; Thu, 
	13 May 2010 19:12:35 -0700 (PDT)
Received: by 10.220.157.199 with HTTP; Thu, 13 May 2010 19:12:35 -0700 (PDT)
In-Reply-To: <AANLkTilAx7GfwVpHD5QlnrQT6ddwdEB_FtkUYrt8kiuR@mail.gmail.com>
References: <AANLkTikHCfOfkqFFJcZJz9e92tgzNYLlByiLztoXZd6j@mail.gmail.com>
	 <AANLkTilAx7GfwVpHD5QlnrQT6ddwdEB_FtkUYrt8kiuR@mail.gmail.com>
Date: Thu, 13 May 2010 22:12:35 -0400
Message-ID: <AANLkTimjdqSw3CAM9YVYtQ1RkPChlOwzAShjfgGj7l_r@mail.gmail.com>
Subject: Re: Will doc ids ever change if nothing is deleted?
From: Nigel <nigelspleen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e68ba2089e093404868468e0
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e68ba2089e093404868468e0
Content-Type: text/plain; charset=ISO-8859-1

Yes, I realize that storing document IDs persistently (for example) is a Bad
Idea. Partly I'm asking just to make sure I understand what's going on.

There is a use case, though.  In some cases between when we do a search and
return some doc ids, and when we use those doc ids to load some documents,
the index could be reopened.  Normally the same IndexReader instance would
be used for both the searching and the loading and so you'd be assured that
the doc ids would be stable.  But sometimes when searches are distributed
across multiple remote indexes (and non-Lucene search systems) some
aggregation needs to occur before results are loaded, and references to the
IndexReaders can't be maintained across that process.  Currently we remember
the index version associated with a search result (i.e. a set of document
ids) so we can verify when loading the documents that the version is the
same, and therefore the IDs are still valid.  I'm wondering if this is
overly restrictive.  For example, if I knew that no documents had been
deleted, and if (per my original question) only deletions would trigger
renumbering, then the doc ids from a search result could be used on an index
with a newer version.

Thanks,
Chris

On Thu, May 13, 2010 at 9:51 PM, Erick Erickson <erickerickson@gmail.com>wrote:

> Why do you care? That is, what do you want to accomplish
> that makes document ID renumbering relevant?
>
> In general, it is unwise to rely on Lucene-assigned document
> IDs. If you need an invariant document ID, assign it yourself.
>
> If this is off base, could you supply your use-case?
>
> Best
> Erick
>
> On Thu, May 13, 2010 at 9:38 PM, Nigel <nigelspleen@gmail.com> wrote:
>
> > The FAQ clearly states that document IDs will not be re-assigned unless
> > something was deleted.
> >
> >
> http://wiki.apache.org/lucene-java/LuceneFAQ#When_is_it_possible_for_document_IDs_to_change.3F
> >
> > However, a number of other emails and posts I've read mention that
> > renumbering occurs when segments are merged.  Maybe what people mean
> > is simply that when something is deleted, nothing is immediately
> > renumbered,
> > and it's not until merge time that the renumbering happens.  (This is my
> > understanding of how it works.)
> >
> > Just so I'm 100% clear, if I never delete anything, will the IDs ever
> > change?
> >
> > Thanks,
> > Chris
> >
>

--0016e68ba2089e093404868468e0--

From java-user-return-46112-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 14 02:55:38 2010
Return-Path: <java-user-return-46112-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6254 invoked from network); 14 May 2010 02:55:38 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 May 2010 02:55:38 -0000
Received: (qmail 10108 invoked by uid 500); 14 May 2010 02:55:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9947 invoked by uid 500); 14 May 2010 02:55:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9939 invoked by uid 99); 14 May 2010 02:55:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 May 2010 02:55:35 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of srbh.grwl@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 May 2010 02:55:27 +0000
Received: by pwi6 with SMTP id 6so1309491pwi.35
        for <java-user@lucene.apache.org>; Thu, 13 May 2010 19:55:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=/TPN+ZwdcnNxVUnyfg87WhUVnO7KIQ4apC2gB2g0fBY=;
        b=t9QFSPl6HDyzRyUf9J4C7V+Ox3QPI+UcW/GE+nX1SuywcoH6zAjNdtt9JQPcQZwhM/
         hsnKowW6zXtNZfGcdNq9HATId7+oVW56OuvGxiLCPL5z587Pmjeo9xMARxzO4o7dlsfp
         L+j2u1gcy9c5YB0cICU0hAWIYcBvTfF6VUH60=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=ncIQeoxa1Jx1U4/OeHVPDVZo563FJLzU/J5Fz67KMLnIoN6y5VjQ0JhWJvevwIivaU
         20mDLZDuwLm5Eaff+cHRLmxRCjQLhUJckn0Rpk/aER/IyJEvLhms5XozqWYlQOYnxj1e
         X9O0slLRtr+qNRTJtA7gsD5J+W50b5utLugOU=
MIME-Version: 1.0
Received: by 10.142.3.35 with SMTP id 35mr255269wfc.74.1273805706335; Thu, 13 
	May 2010 19:55:06 -0700 (PDT)
Received: by 10.143.163.6 with HTTP; Thu, 13 May 2010 19:55:06 -0700 (PDT)
In-Reply-To: <AANLkTilR4oNnACZ49DRDw3QDerhH7VXV9PMsP6F8cDMN@mail.gmail.com>
References: <AANLkTikB3gdJF0bSSBU_mReD-TTRP9JFKoqFovK7IYxK@mail.gmail.com>
	 <AANLkTilR4oNnACZ49DRDw3QDerhH7VXV9PMsP6F8cDMN@mail.gmail.com>
Date: Fri, 14 May 2010 08:25:06 +0530
Message-ID: <AANLkTiljtHU43p2n2eELdGkWdjnP5Y2O0qzJZkJy3Tw4@mail.gmail.com>
Subject: Re: Storing a field as byte[[]
From: Saurabh Agarwal <srbh.grwl@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00504502c10da396b004868500c4
X-Virus-Checked: Checked by ClamAV on apache.org

--00504502c10da396b004868500c4
Content-Type: text/plain; charset=ISO-8859-1

hi  Ian

but when I see lucene-3.0.0/src/java/org/apache/lucene/document/Field.java
all the constructors either take a String ad value or a byte [] array as a
value. Can u guide me that how to use NumericField or am I missing
something?

Thanks
Saurabh Agarwal


On Fri, May 14, 2010 at 1:33 AM, Ian Lea <ian.lea@gmail.com> wrote:

> You can store byte arrays, but you can't search on them.  For integers
> you can either pad them out with leading zeros or use NumericField. If
> you use NumericField you'll need to use NumericRangeQuery as well.
>
> --
> Ian.
>
>
> On Thu, May 13, 2010 at 8:44 PM, Saurabh Agarwal <srbh.grwl@gmail.com>
> wrote:
> > Hi,
> > I am new to lucene. the constructors in Feild show that I can give the
> value
> > as byte[] I wanted to ask if I store a integer as a byte array the how it
> > will ve searched during search say file size!!!
> >
> > because if I use text format the range search will be poor say fs of 10
> 12
> > 20 30 50 100 101 102 will be organised as
> > 10
> > 100
> > 101
> > 102
> > 12
> > 20
> > 30
> > 50
> >
> > so range search of size between 10 and 20 will be relatively poor if I
> store
> > values like the order given
> >
> > Thanks and regards
> > Saurabh Agarwal
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00504502c10da396b004868500c4--

From java-user-return-46113-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 14 05:39:27 2010
Return-Path: <java-user-return-46113-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43725 invoked from network); 14 May 2010 05:39:27 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 May 2010 05:39:27 -0000
Received: (qmail 10489 invoked by uid 500); 14 May 2010 05:39:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10328 invoked by uid 500); 14 May 2010 05:39:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10320 invoked by uid 99); 14 May 2010 05:39:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 May 2010 05:39:25 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 May 2010 05:39:17 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id C5752D36009
	for <java-user@lucene.apache.org>; Fri, 14 May 2010 07:38:56 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id oF7M2Xee6hr8 for <java-user@lucene.apache.org>;
	Fri, 14 May 2010 07:38:45 +0200 (CEST)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 812A7D36004
	for <java-user@lucene.apache.org>; Fri, 14 May 2010 07:38:44 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <AANLkTikB3gdJF0bSSBU_mReD-TTRP9JFKoqFovK7IYxK@mail.gmail.com>	 <AANLkTilR4oNnACZ49DRDw3QDerhH7VXV9PMsP6F8cDMN@mail.gmail.com> <AANLkTiljtHU43p2n2eELdGkWdjnP5Y2O0qzJZkJy3Tw4@mail.gmail.com>
In-Reply-To: <AANLkTiljtHU43p2n2eELdGkWdjnP5Y2O0qzJZkJy3Tw4@mail.gmail.com>
Subject: RE: Storing a field as byte[[]
Date: Fri, 14 May 2010 07:39:16 +0200
Message-ID: <00ef01caf327$cad1c660$60755320$@de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcrzEPijthAVRaY/TTaes7O6HXIkxwAFsrFQ
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

There is a class NumericField in the same package.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Saurabh Agarwal [mailto:srbh.grwl@gmail.com]
> Sent: Friday, May 14, 2010 4:55 AM
> To: java-user@lucene.apache.org
> Subject: Re: Storing a field as byte[[]
> 
> hi  Ian
> 
> but when I see lucene-
> 3.0.0/src/java/org/apache/lucene/document/Field.java
> all the constructors either take a String ad value or a byte [] array
> as a
> value. Can u guide me that how to use NumericField or am I missing
> something?
> 
> Thanks
> Saurabh Agarwal
> 
> 
> On Fri, May 14, 2010 at 1:33 AM, Ian Lea <ian.lea@gmail.com> wrote:
> 
> > You can store byte arrays, but you can't search on them.  For
> integers
> > you can either pad them out with leading zeros or use NumericField.
> If
> > you use NumericField you'll need to use NumericRangeQuery as well.
> >
> > --
> > Ian.
> >
> >
> > On Thu, May 13, 2010 at 8:44 PM, Saurabh Agarwal
> <srbh.grwl@gmail.com>
> > wrote:
> > > Hi,
> > > I am new to lucene. the constructors in Feild show that I can give
> the
> > value
> > > as byte[] I wanted to ask if I store a integer as a byte array the
> how it
> > > will ve searched during search say file size!!!
> > >
> > > because if I use text format the range search will be poor say fs
> of 10
> > 12
> > > 20 30 50 100 101 102 will be organised as
> > > 10
> > > 100
> > > 101
> > > 102
> > > 12
> > > 20
> > > 30
> > > 50
> > >
> > > so range search of size between 10 and 20 will be relatively poor
> if I
> > store
> > > values like the order given
> > >
> > > Thanks and regards
> > > Saurabh Agarwal
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46114-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 14 07:07:54 2010
Return-Path: <java-user-return-46114-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72529 invoked from network); 14 May 2010 07:07:54 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 May 2010 07:07:54 -0000
Received: (qmail 13682 invoked by uid 500); 14 May 2010 07:07:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13597 invoked by uid 500); 14 May 2010 07:07:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13589 invoked by uid 99); 14 May 2010 07:07:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 May 2010 07:07:51 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of srbh.grwl@gmail.com designates 74.125.83.176 as permitted sender)
Received: from [74.125.83.176] (HELO mail-pv0-f176.google.com) (74.125.83.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 May 2010 07:07:44 +0000
Received: by pvg12 with SMTP id 12so665658pvg.35
        for <java-user@lucene.apache.org>; Fri, 14 May 2010 00:07:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=SQPeOvFXjZjUJRuyKD7OVJcNx+NKmvshiljIgdKn0Go=;
        b=SEWOoTMKFDFi2RQzW1YPHAOw4a9VdndLrRLTFrkZv8+MNx0+Pfw4Dik0AeAHKMI49B
         gjyoG/6YWm+rwxATJYGATIZLumAUfuteRu7iOsWBYs9adJKWkaBWzEkeGv5yys6S7ZCO
         rH9RGPwYr9/rhUX8CrH5Y29flJN1iCx13CIU0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=dP8Q6wxK77arpi6JfzkY/6YQvY/L5Z/9jiQOahm9ktmoAgdL9K1Ft5pOiTsyTNVpEs
         qs5zjRL+YijDZWmFa8inD74M9rNGFU1xtbmVhu20rgYs8S2gN1tJ7RCyHVJ4VpZCVkdI
         Yrbas/9lcjCp9922QS3K6e8/+XFWSzVbypMwg=
MIME-Version: 1.0
Received: by 10.143.27.8 with SMTP id e8mr420048wfj.332.1273820842862; Fri, 14 
	May 2010 00:07:22 -0700 (PDT)
Received: by 10.143.163.6 with HTTP; Fri, 14 May 2010 00:07:22 -0700 (PDT)
In-Reply-To: <00ef01caf327$cad1c660$60755320$@de>
References: <AANLkTikB3gdJF0bSSBU_mReD-TTRP9JFKoqFovK7IYxK@mail.gmail.com>
	 <AANLkTilR4oNnACZ49DRDw3QDerhH7VXV9PMsP6F8cDMN@mail.gmail.com>
	 <AANLkTiljtHU43p2n2eELdGkWdjnP5Y2O0qzJZkJy3Tw4@mail.gmail.com>
	 <00ef01caf327$cad1c660$60755320$@de>
Date: Fri, 14 May 2010 12:37:22 +0530
Message-ID: <AANLkTikgVVi1O6RUqSv2y_l1KVKScyqxxZAS1QGxiz5Y@mail.gmail.com>
Subject: Re: Storing a field as byte[[]
From: Saurabh Agarwal <srbh.grwl@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636e0aef5d8a96d0486888624
X-Virus-Checked: Checked by ClamAV on apache.org

--001636e0aef5d8a96d0486888624
Content-Type: text/plain; charset=ISO-8859-1

Thanks Uwe
Saurabh Agarwal


On Fri, May 14, 2010 at 11:09 AM, Uwe Schindler <uwe@thetaphi.de> wrote:

> There is a class NumericField in the same package.
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
>
> > -----Original Message-----
> > From: Saurabh Agarwal [mailto:srbh.grwl@gmail.com]
> > Sent: Friday, May 14, 2010 4:55 AM
> > To: java-user@lucene.apache.org
> > Subject: Re: Storing a field as byte[[]
> >
> > hi  Ian
> >
> > but when I see lucene-
> > 3.0.0/src/java/org/apache/lucene/document/Field.java
> > all the constructors either take a String ad value or a byte [] array
> > as a
> > value. Can u guide me that how to use NumericField or am I missing
> > something?
> >
> > Thanks
> > Saurabh Agarwal
> >
> >
> > On Fri, May 14, 2010 at 1:33 AM, Ian Lea <ian.lea@gmail.com> wrote:
> >
> > > You can store byte arrays, but you can't search on them.  For
> > integers
> > > you can either pad them out with leading zeros or use NumericField.
> > If
> > > you use NumericField you'll need to use NumericRangeQuery as well.
> > >
> > > --
> > > Ian.
> > >
> > >
> > > On Thu, May 13, 2010 at 8:44 PM, Saurabh Agarwal
> > <srbh.grwl@gmail.com>
> > > wrote:
> > > > Hi,
> > > > I am new to lucene. the constructors in Feild show that I can give
> > the
> > > value
> > > > as byte[] I wanted to ask if I store a integer as a byte array the
> > how it
> > > > will ve searched during search say file size!!!
> > > >
> > > > because if I use text format the range search will be poor say fs
> > of 10
> > > 12
> > > > 20 30 50 100 101 102 will be organised as
> > > > 10
> > > > 100
> > > > 101
> > > > 102
> > > > 12
> > > > 20
> > > > 30
> > > > 50
> > > >
> > > > so range search of size between 10 and 20 will be relatively poor
> > if I
> > > store
> > > > values like the order given
> > > >
> > > > Thanks and regards
> > > > Saurabh Agarwal
> > > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001636e0aef5d8a96d0486888624--

From java-user-return-46115-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 14 09:30:18 2010
Return-Path: <java-user-return-46115-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95719 invoked from network); 14 May 2010 09:30:17 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 May 2010 09:30:17 -0000
Received: (qmail 64149 invoked by uid 500); 14 May 2010 09:30:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63991 invoked by uid 500); 14 May 2010 09:30:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63983 invoked by uid 99); 14 May 2010 09:30:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 May 2010 09:30:12 +0000
X-ASF-Spam-Status: No, hits=4.4 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of manjula53@gmail.com designates 74.125.83.176 as permitted sender)
Received: from [74.125.83.176] (HELO mail-pv0-f176.google.com) (74.125.83.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 May 2010 09:30:05 +0000
Received: by pvg12 with SMTP id 12so735852pvg.35
        for <java-user@lucene.apache.org>; Fri, 14 May 2010 02:29:42 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=qUHELAt5laaeHW3JCPTHeJ6JT7oVwXLetKYdXTA1i0Q=;
        b=CexNIPx1R4eUIohf0P+KDhO3ns3HrzRMeT82qBhFRuXyNXA1LI6WwEH+mEORlI/bZw
         18PRfErvFfILx+9wi/CMmcaHZJeaEhjiJ284pDsqHZ27O0F1ZdPiYRWF0OdcY6hK9TAF
         LMNs8CPwdBV2rHAhsTH7Wu5KwTI+xMJjx6Y2U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=BAZzLSht7dkeUA94lejT6APEJqt253s+XcgIaRXNFGEGKOYMG6keBAZG0NgioAy4yY
         2s0vo5WkYiObbbw+BzF+KdrqVZxWa98o9g1+djNOo1jE0NwjyQT/6AAcQspTQAZJb6Op
         fPYjDFcbwQgZ3iMjH4RLCEEN87cDt0nar1voM=
MIME-Version: 1.0
Received: by 10.141.14.21 with SMTP id r21mr608435rvi.144.1273829382704; Fri, 
	14 May 2010 02:29:42 -0700 (PDT)
Received: by 10.140.147.1 with HTTP; Fri, 14 May 2010 02:29:42 -0700 (PDT)
In-Reply-To: <AANLkTikakC88wjLH8dWdmA66lJtxyTF9yYdYmu9rpgT6@mail.gmail.com>
References: <AANLkTimP2J3t60VNxz5yCzQm1PCT9fxcWspT9rVNAiMK@mail.gmail.com>
	 <AANLkTim6C0pu7skODgogjVaa1pEpEarEg0LLjSehJ88Y@mail.gmail.com>
	 <AANLkTilpGnFBMuobzxfomo3tXFZLA67PmeY406UzbuTi@mail.gmail.com>
	 <AANLkTikakC88wjLH8dWdmA66lJtxyTF9yYdYmu9rpgT6@mail.gmail.com>
Date: Fri, 14 May 2010 14:59:42 +0530
Message-ID: <AANLkTimhLbmqnbiWWD4TD1vBY-vWYI2hw6tsVgz8HL_w@mail.gmail.com>
Subject: Re: Error of the code
From: manjula wijewickrema <manjula53@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd1196edc500d04868a8384

--000e0cd1196edc500d04868a8384
Content-Type: text/plain; charset=ISO-8859-1

Hi Ian,

Thanx for your reply. vector.size() returns the total number of indexed
terms in the index. However I was able to run the program and get the
results finally with your help. Thanks a lot.

Manjula

On Thu, May 13, 2010 at 6:52 PM, Ian Lea <ian.lea@gmail.com> wrote:

> What does vector.size() return?  You don't appear to be doing anything
> with the String term in "for ( String term : vector.getTerms() )" -
> presumably you intend to.
>
>
> --
> Ian.
>
> On Thu, May 13, 2010 at 1:16 PM, manjula wijewickrema
>  <manjula53@gmail.com> wrote:
> > Dear Ian,
> >
> > Thanks a lot for your immediate reply. As you have mentioned I replaced
> the
> > lines as follows.
> >
> >
> > IndexReader ir=IndexReader.open(directory);
> >
> > TermFreqVector vector=ir.getTermFreqVector(0,"fieldname");
> >
> > Now the error has been vanished and thanks for it. But I can't still see
> the
> > results although I have moved those lines after iwriter.close(). What's
> the
> > reason for this?
> >
> > sample code after modifications:
> > .........................
> > ........................
> >
> > String text = "This is the text to be indexed.";
> >
> >  doc.add(*new* Field("fieldname", text, Field.Store.*YES*,Field.Index.*
> > ANALYZED*,Field.TermVector.*WITH_POSITIONS_OFFSETS*));
> >
> > iwriter.addDocument(doc);
> >
> > iwriter.close();
> >
> > IndexReader ir=IndexReader.open(directory);
> >
> > TermFreqVector vector=ir.getTermFreqVector(0,"fieldname");
> > *
> >
> > int* size = vector.size();
> >
> > *for* ( String term : vector.getTerms() )
> >
> > System.*out*.println( "size = " + size );
> >
> > IndexSearcher isearcher = *new* IndexSearcher(directory, *true*);
> > ..........
> > ..........
> > I appreciate your kind coperation
> > Manjula
> > On Thu, May 13, 2010 at 3:45 PM, Ian Lea <ian.lea@gmail.com> wrote:
> >
> >> You need to replace this:
> >>
> >> TermFreqVector vector = IndexReader.getTermFreqVector(0, "fieldname" );
> >>
> >> with
> >>
> >> IndexReader ir = whatever(...);
> >> TermFreqVector vector = ir.getTermFreqVector(0, "fieldname" );
> >>
> >> And you'll need to move it to after the writer.close() call if you
> >> want it to see the doc you've just added.
> >>
> >>
> >>
> >> --
> >> Ian.
> >>
> >>
> >>
> >> On Thu, May 13, 2010 at 11:07 AM, manjula wijewickrema
> >> <manjula53@gmail.com> wrote:
> >> > Dear All,
> >> >
> >> > I am trying to get the term frequencies (through TermFreqVector) of a
> >> > document (using Lucene 2.9.1). In order to do that I have used the
> >> following
> >> > code. But there is a compile time error in the code and I can't figure
> it
> >> > out. Could somebody can guide me what's wrong with it.
> >> > Compile time error I got:
> >> > Cannot make a static reference to the non-static method
> >> > getTermFreqVector(int, String) from the type IndexReader.
> >> >
> >> > Code:
> >> >
> >> >  *import* org.apache.lucene.analysis.standard.StandardAnalyzer;
> >> >
> >> > *import* org.apache.lucene.document.Document;
> >> > *
> >> >
> >> > import* org.apache.lucene.document.Field;
> >> > *
> >> >
> >> > import* org.apache.lucene.index.IndexWriter;
> >> > *
> >> >
> >> > import* org.apache.lucene.queryParser.ParseException;
> >> > *
> >> >
> >> > import* org.apache.lucene.queryParser.QueryParser;
> >> > *
> >> >
> >> > import* org.apache.lucene.search.*;
> >> > *
> >> >
> >> > import* org.apache.lucene.store.Directory;
> >> > *
> >> >
> >> > import* org.apache.lucene.store.RAMDirectory;
> >> > *
> >> >
> >> > import* org.apache.lucene.util.Version;
> >> >
> >> > *
> >> >
> >> > import* org.apache.lucene.index.IndexReader;
> >> > *
> >> >
> >> > import* org.apache.lucene.index.TermEnum;
> >> > *
> >> >
> >> > import* org.apache.lucene.index.Term;
> >> > *
> >> >
> >> > import* org.apache.lucene.index.TermFreqVector;
> >> >
> >> > *
> >> >
> >> > import* java.io.IOException;
> >> > *
> >> >
> >> > public* *class* DemoTest {
> >> >
> >> > *public* *static* *void* main(String[] args) {
> >> >
> >> > StandardAnalyzer analyzer = *new*
> >> StandardAnalyzer(Version.*LUCENE_CURRENT*
> >> > );
> >> >
> >> > *try* {
> >> >
> >> > Directory directory = *new* RAMDirectory();
> >> >
> >> > IndexWriter iwriter = *new* IndexWriter(directory, analyzer,
> >> > *true*,*new*IndexWriter.MaxFieldLength(25000));
> >> >
> >> > Document doc = *new* Document();
> >> >
> >> > String text = "This is the text to be indexed.";
> >> >
> >> > doc.add(*new* Field("fieldname", text, Field.Store.*YES*,Field.Index.*
> >> > ANALYZED*,Field.TermVector.*WITH_POSITIONS_OFFSETS*));
> >> >
> >> > iwriter.addDocument(doc);
> >> >
> >> > TermFreqVector vector = IndexReader.getTermFreqVector(0, "fieldname"
> );
> >> > *
> >> >
> >> > int* size = vector.size();
> >> >
> >> > *for* ( String term : vector.getTerms() )
> >> >
> >> > System.*out*.println( "size = " + size );
> >> >
> >> > iwriter.close();
> >> >
> >> > IndexSearcher isearcher = *new* IndexSearcher(directory, *true*);
> >> >
> >> > QueryParser parser = *new* QueryParser(Version.*LUCENE_CURRENT*,
> >> "fieldname",
> >> > analyzer);
> >> >
> >> > Query query = parser.parse("text");
> >> >
> >> > ScoreDoc[] hits = isearcher.search(query, *null*, 1000).scoreDocs;
> >> >
> >> > System.*out*.println("hits.length(1) = " + hits.length);
> >> >
> >> > // Iterate through the results:
> >> >
> >> > *for* (*int* i = 0; i < hits.length; i++) {
> >> >
> >> > Document hitDoc = isearcher.doc(hits.doc);
> >> >
> >> > System.*out*.println("hitDoc.get(\"fieldname\") (This is the text to
> be
> >> > indexed) = " +
> >> >
> >> > hitDoc.get("fieldname"));
> >> >
> >> > }
> >> >
> >> > isearcher.close();
> >> >
> >> > directory.close();
> >> >
> >> > } *catch* (Exception ex) {
> >> >
> >> > ex.printStackTrace();
> >> >
> >> > }
> >> >
> >> > }
> >> >
> >> > }
> >> >
> >> >
> >> >
> >> > Thanks in advance
> >> >
> >> > Manjula
> >> >
> >>
> >>  ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd1196edc500d04868a8384--

From java-user-return-46116-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 14 09:36:25 2010
Return-Path: <java-user-return-46116-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97504 invoked from network); 14 May 2010 09:36:25 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 May 2010 09:36:25 -0000
Received: (qmail 80597 invoked by uid 500); 14 May 2010 09:36:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80473 invoked by uid 500); 14 May 2010 09:36:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80465 invoked by uid 99); 14 May 2010 09:36:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 May 2010 09:36:18 +0000
X-ASF-Spam-Status: No, hits=4.4 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of manjula53@gmail.com designates 209.85.222.187 as permitted sender)
Received: from [209.85.222.187] (HELO mail-pz0-f187.google.com) (209.85.222.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 May 2010 09:36:11 +0000
Received: by pzk17 with SMTP id 17so1134172pzk.5
        for <java-user@lucene.apache.org>; Fri, 14 May 2010 02:35:50 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=VsFN9VEyLTsFo2aGLAbChmm0cY0YVL8onDD6p88sAh0=;
        b=qtqMoob8JhubaBhQq85VU85oy+eixHMv4qzDgvZBliSjXDvwvcMf+iiHKtM3GpxTyc
         JtLU+uqunywVgpgHe2cYvZNKvvTitKil0YCx68CqPNcAOwKOesncb/+zoGFrE5gIA0Tp
         zafHuGvmWAmgFfbeEK5Q74ztGHcvsR28t3qO0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=MjDJx0yTL9H3fIOsawYthunFDgut3L4ztH87ClSvIOHj3vpgNrjK+phqMch48Tyjb2
         0jZSqM5IqqH7qdsoLRRykfVWU4WiudJ11STYIU8rUDY19gaLYule+RvrXL7aR1sLJgbH
         3EWorFlgZZcSWa9V1FAwscZjeN4Ea/wlobcZA=
MIME-Version: 1.0
Received: by 10.141.100.21 with SMTP id c21mr618076rvm.101.1273829749957; Fri, 
	14 May 2010 02:35:49 -0700 (PDT)
Received: by 10.140.147.1 with HTTP; Fri, 14 May 2010 02:35:49 -0700 (PDT)
Date: Fri, 14 May 2010 15:05:49 +0530
Message-ID: <AANLkTinfx5Mcnjgo6OTw7SRt51vIEkQ15y4tt_HqEGcy@mail.gmail.com>
Subject: Access indexed terms
From: manjula wijewickrema <manjula53@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd13954c0277e04868a994b
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd13954c0277e04868a994b
Content-Type: text/plain; charset=ISO-8859-1

Hi,

Is it possible to put the indexed terms into an array in lucene. For
example, imagine I have indexed a single document in Lucene and now I want
to acces those terms in the index. Is it possible to retrieve (call) those
terms as array elements? If it is possible, then how?

Thanks,
Manjula

--000e0cd13954c0277e04868a994b--

From java-user-return-46117-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 14 10:30:45 2010
Return-Path: <java-user-return-46117-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6330 invoked from network); 14 May 2010 10:30:45 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 May 2010 10:30:45 -0000
Received: (qmail 39681 invoked by uid 500); 14 May 2010 10:30:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39408 invoked by uid 500); 14 May 2010 10:30:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39379 invoked by uid 99); 14 May 2010 10:30:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 May 2010 10:30:38 +0000
X-ASF-Spam-Status: No, hits=-0.1 required=10.0
	tests=AWL,RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.202.165.37] (HELO smtpauth13.prod.mesa1.secureserver.net) (64.202.165.37)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 14 May 2010 10:30:32 +0000
Received: (qmail 1940 invoked from network); 14 May 2010 10:30:11 -0000
Received: from unknown (81.219.54.251)
  by smtpauth13.prod.mesa1.secureserver.net (64.202.165.37) with ESMTP; 14 May 2010 10:30:11 -0000
Message-ID: <4BED262B.50906@getopt.org>
Date: Fri, 14 May 2010 12:30:03 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.1.9) Gecko/20100317 Thunderbird/3.0.4
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Access indexed terms
References: <AANLkTinfx5Mcnjgo6OTw7SRt51vIEkQ15y4tt_HqEGcy@mail.gmail.com>
In-Reply-To: <AANLkTinfx5Mcnjgo6OTw7SRt51vIEkQ15y4tt_HqEGcy@mail.gmail.com>
X-Enigmail-Version: 1.0.1
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

On 2010-05-14 11:35, manjula wijewickrema wrote:
> Hi,
> 
> Is it possible to put the indexed terms into an array in lucene. For
> example, imagine I have indexed a single document in Lucene and now I want
> to acces those terms in the index. Is it possible to retrieve (call) those
> terms as array elements? If it is possible, then how?

In short: unless you created TermFrequencyVector when adding the
document, the answer is "with great difficulty".

For a working code that does this see here:

http://code.google.com/p/luke/source/browse/trunk/src/org/getopt/luke/DocReconstructor.java

If you really need such kind of access in your application then add your
documents with term vectors with offsets and positions. Even then,
depending on the Analyzer you used, the process is lossy - some input
data that was discarded by Analyzer is simply no longer available.

-- 
Best regards,
Andrzej Bialecki     <><
 ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46118-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 14 12:25:26 2010
Return-Path: <java-user-return-46118-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29496 invoked from network); 14 May 2010 12:25:26 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 May 2010 12:25:26 -0000
Received: (qmail 919 invoked by uid 500); 14 May 2010 12:25:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 817 invoked by uid 500); 14 May 2010 12:25:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 809 invoked by uid 99); 14 May 2010 12:25:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 May 2010 12:25:23 +0000
X-ASF-Spam-Status: No, hits=4.4 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of manjula53@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 May 2010 12:25:17 +0000
Received: by pwi6 with SMTP id 6so1583411pwi.35
        for <java-user@lucene.apache.org>; Fri, 14 May 2010 05:24:55 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=fqDYO9kt+uzYu7jEGqF4chcGPXU6KV3t8AZGeeQqZOs=;
        b=DZXfFz2Ap4/JC5gBn77aD4FRnRGwv7lX2lmTQWAdJYowlbyRy77bsNbZsyJg+nJSz5
         X04WtlpZAfuzfSLVbss86TYRYPYUQEyFp+nN0oMeBtnKoGoRwIczZpkSO0laPndcdbZi
         w9aej5p/xDQesGNdkyWu1lbr1vytUC0i5Rf4k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=TuX98dvCppTibV9kkEDBIYZX1XM9+BYlIdWTq9JCMPwFXtKaAG37LOSQPDKSka+Zfc
         6CXKCPAi3WKIZ87GxNKYl/fpHOknY7iBWnDIG9GZry5+6vXeiQnY1zGOJ7gIachBDcrs
         psGaPqXA3BhWnr3mvGibCeOJbXSkiSaAZdhLU=
MIME-Version: 1.0
Received: by 10.141.139.21 with SMTP id r21mr760251rvn.2.1273839895701; Fri, 
	14 May 2010 05:24:55 -0700 (PDT)
Received: by 10.140.147.1 with HTTP; Fri, 14 May 2010 05:24:55 -0700 (PDT)
In-Reply-To: <4BED262B.50906@getopt.org>
References: <AANLkTinfx5Mcnjgo6OTw7SRt51vIEkQ15y4tt_HqEGcy@mail.gmail.com>
	 <4BED262B.50906@getopt.org>
Date: Fri, 14 May 2010 17:54:55 +0530
Message-ID: <AANLkTin7aXdCskqCN-n2S7ewUrGyFXBhT5gn6z0UTTW1@mail.gmail.com>
Subject: Re: Access indexed terms
From: manjula wijewickrema <manjula53@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000325560df27bed9504868cf645
X-Virus-Checked: Checked by ClamAV on apache.org

--000325560df27bed9504868cf645
Content-Type: text/plain; charset=ISO-8859-1

Hi Andrzej

Thanx for the reply. But as you have mentioned, creating arrays for indexed
terms seems to be little difficult. Here my intention is to find the term
frequencies (of terms) of an indexed document. I can find the term frequency
of a particular term (giving as a query) if I specify the term in the code.
But I really want is to get the term frequency (or even the number of times
it appears in the document) of the all indexed terms (or high frequency
terms) without named them in the code. Is there an alternative way to do
that?

Thanks
Manjula


On Fri, May 14, 2010 at 4:00 PM, Andrzej Bialecki <ab@getopt.org> wrote:

>  On 2010-05-14 11:35, manjula wijewickrema wrote:
> > Hi,
> >
> > Is it possible to put the indexed terms into an array in lucene. For
> > example, imagine I have indexed a single document in Lucene and now I
> want
> > to acces those terms in the index. Is it possible to retrieve (call)
> those
> > terms as array elements? If it is possible, then how?
>
> In short: unless you created TermFrequencyVector when adding the
> document, the answer is "with great difficulty".
>
> For a working code that does this see here:
>
>
> http://code.google.com/p/luke/source/browse/trunk/src/org/getopt/luke/DocReconstructor.java
>
> If you really need such kind of access in your application then add your
> documents with term vectors with offsets and positions. Even then,
> depending on the Analyzer you used, the process is lossy - some input
> data that was discarded by Analyzer is simply no longer available.
>
> --
> Best regards,
> Andrzej Bialecki     <><
>  ___. ___ ___ ___ _ _   __________________________________
> [__ || __|__/|__||\/|  Information Retrieval, Semantic Web
> ___|||__||  \|  ||  |  Embedded Unix, System Integration
> http://www.sigram.com  Contact: info at sigram dot com
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000325560df27bed9504868cf645--

From java-user-return-46119-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 14 12:47:28 2010
Return-Path: <java-user-return-46119-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40128 invoked from network); 14 May 2010 12:47:27 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 May 2010 12:47:27 -0000
Received: (qmail 24220 invoked by uid 500); 14 May 2010 12:47:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24086 invoked by uid 500); 14 May 2010 12:47:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24077 invoked by uid 99); 14 May 2010 12:47:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 May 2010 12:47:25 +0000
X-ASF-Spam-Status: No, hits=-0.1 required=10.0
	tests=AWL,RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.202.165.44] (HELO smtpauth22.prod.mesa1.secureserver.net) (64.202.165.44)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 14 May 2010 12:47:19 +0000
Received: (qmail 13162 invoked from network); 14 May 2010 12:46:57 -0000
Received: from unknown (81.219.54.251)
  by smtpauth22.prod.mesa1.secureserver.net (64.202.165.44) with ESMTP; 14 May 2010 12:46:56 -0000
Message-ID: <4BED4637.5070407@getopt.org>
Date: Fri, 14 May 2010 14:46:47 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.1.9) Gecko/20100317 Thunderbird/3.0.4
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Access indexed terms
References: <AANLkTinfx5Mcnjgo6OTw7SRt51vIEkQ15y4tt_HqEGcy@mail.gmail.com>	 <4BED262B.50906@getopt.org> <AANLkTin7aXdCskqCN-n2S7ewUrGyFXBhT5gn6z0UTTW1@mail.gmail.com>
In-Reply-To: <AANLkTin7aXdCskqCN-n2S7ewUrGyFXBhT5gn6z0UTTW1@mail.gmail.com>
X-Enigmail-Version: 1.0.1
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

On 2010-05-14 14:24, manjula wijewickrema wrote:
> Hi Andrzej
> 
> Thanx for the reply. But as you have mentioned, creating arrays for indexed
> terms seems to be little difficult. Here my intention is to find the term
> frequencies (of terms) of an indexed document. I can find the term frequency
> of a particular term (giving as a query) if I specify the term in the code.
> But I really want is to get the term frequency (or even the number of times
> it appears in the document) of the all indexed terms (or high frequency
> terms) without named them in the code. Is there an alternative way to do
> that?

Yes, see the discussion here:

https://issues.apache.org/jira/browse/LUCENE-2393


-- 
Best regards,
Andrzej Bialecki     <><
 ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46120-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 14 13:09:03 2010
Return-Path: <java-user-return-46120-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43788 invoked from network); 14 May 2010 13:09:03 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 May 2010 13:09:03 -0000
Received: (qmail 43782 invoked by uid 500); 14 May 2010 13:09:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43639 invoked by uid 500); 14 May 2010 13:09:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43631 invoked by uid 99); 14 May 2010 13:09:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 May 2010 13:09:00 +0000
X-ASF-Spam-Status: No, hits=-0.5 required=10.0
	tests=AWL,FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gsiasf@gmail.com designates 209.85.160.176 as permitted sender)
Received: from [209.85.160.176] (HELO mail-gy0-f176.google.com) (209.85.160.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 May 2010 13:08:55 +0000
Received: by gyf1 with SMTP id 1so1410010gyf.35
        for <java-user@lucene.apache.org>; Fri, 14 May 2010 06:08:34 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:sender:content-type
         :mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        bh=9RPLKVvBXhF7wJBlfSgbGmotWh3Y12zL9IS1l1kgS5o=;
        b=F6t5R0O4njlmzs0x29u3DKS3OURXhXFnGOsEBFdmED07UEGhaNm8oxUtdY9X48qMgp
         3ydW3sacaqOn/Z/M38esTAiK1jEAWgrR1pl8vSCU6ODUsYiVKnLpiJydKOxB7URq7ya2
         NizfHsSCvEJLHv758PGPY2E24DbAixy7iy9b4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=sender:content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        b=XtCYHa29PvbLU93KuzQyFeAozr1qhHKtq/1JMKcy4nQkzxZEDjgSoYscnWUi0f1/1P
         xxFUdFBVLxJoYT9htwBnv2iR0WspFXlwFVKsYGLeEvQfYy1PH6nfBTCA8SLeK+G6KGQz
         Kper5OKjYGBpc0xywAkrsu32kjlQHTQzqjNAs=
Received: by 10.100.236.5 with SMTP id j5mr1216872anh.202.1273842513633;
        Fri, 14 May 2010 06:08:33 -0700 (PDT)
Received: from [10.0.0.77] (adsl-065-013-152-164.sip.rdu.bellsouth.net [65.13.152.164])
        by mx.google.com with ESMTPS id t2sm2219339ani.8.2010.05.14.06.08.32
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 14 May 2010 06:08:33 -0700 (PDT)
Sender: Grant Ingersoll <gsiasf@gmail.com>
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1078)
Subject: Re: TermDocs
From: Grant Ingersoll <gsingers@apache.org>
In-Reply-To: <20100512223913.979D7478445@athena.apache.org>
Date: Fri, 14 May 2010 09:08:31 -0400
Content-Transfer-Encoding: quoted-printable
Message-Id: <6D8B25C5-D1DB-4E13-8D81-9023945E58DD@apache.org>
References: <20100512223913.979D7478445@athena.apache.org>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1078)


On May 12, 2010, at 7:42 PM, roy-lucene-user@xemaps.com wrote:

> Hi guys,
>=20
> I've had this code for some time but am just now questioning if it =
works.
>=20
> I have a custom filter that i've been using since Lucene 1.4 to Lucene =
2.2.0 and it essentially builds up a BitSet like so:
>=20
> for ( int x =3D 0; x < fields.length; x++ ) {
>    for ( int y =3D 0; y < values.length; y++ ) {
>    TermDocs termDocs =3D reader.termDocs( new Term( fields[x], =
values[y] ) );
>    try {
>        while ( termDocs.next() ) {
>            int doc =3D termDocs.doc();
>            bits.set( doc );
>        }
>    }
>    finally {
>        termDocs.close();
>    }
>    }
> }
>=20
> I notice that it grabs all the TermDocs for the first field and value =
but nothing after that.  But I do know that the other values exist but I =
don't get any TermDocs afterwards.
>=20

That code works for me against Lucene 3.0.1 (and I don't think much has =
changed there).  Are you sure the fields and values are lining up right? =
 Perhaps isolate this on a standalone index to convince yourself.  Have =
you looked at Luke to validate?

However, why not just create a Filter from a Query and get the =
bitset/docidset using the MultiFieldQueryParser?

//Here's a snippet I wrote, never mind the PayloadAnalyzer, just =
substitute in your analyzer
MultiFieldQueryParser mfqp =3D new =
MultiFieldQueryParser(Version.LUCENE_30, fields, new =
PayloadAnalyzer(encoder));
    Query query =3D mfqp.parse(Version.LUCENE_30, values, fields, new =
PayloadAnalyzer(encoder));
    Filter filter =3D new QueryWrapperFilter(query);
    DocIdSet docs =3D filter.getDocIdSet(reader);
    DocIdSetIterator docIdSetIterator =3D docs.iterator();
    while (docIdSetIterator.nextDoc() !=3D =
DocIdSetIterator.NO_MORE_DOCS){
      System.out.println("Doc: " + docIdSetIterator.docID());
    }



--------------------------
Grant Ingersoll
http://www.lucidimagination.com/

Search the Lucene ecosystem using Solr/Lucene: =
http://www.lucidimagination.com/search


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46121-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 14 17:09:43 2010
Return-Path: <java-user-return-46121-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2183 invoked from network); 14 May 2010 17:09:43 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 May 2010 17:09:43 -0000
Received: (qmail 78197 invoked by uid 500); 14 May 2010 17:09:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78171 invoked by uid 500); 14 May 2010 17:09:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78163 invoked by uid 99); 14 May 2010 17:09:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 May 2010 17:09:41 +0000
X-ASF-Spam-Status: No, hits=-0.4 required=10.0
	tests=AWL,FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ryguasu@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 May 2010 17:09:34 +0000
Received: by vws3 with SMTP id 3so341278vws.35
        for <java-user@lucene.apache.org>; Fri, 14 May 2010 10:09:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=rB8fTYDwag1KBtvB1V2uzK8WN5rAuJ4Ns66rb22sy4A=;
        b=JhY4RL0I0zAqOT6gqzPfQIx5ZzYbFlpVBs27J8ukbjyfMxI8pUfmG/knHIw8ZUMq7M
         QpeSTYwMnmCFoO6p4uM3g5YrpbolbmQ+R9Wu6UNf5ZCHOkpb6GGIvIPQJe30PGTe/gtM
         uo46aiDm2lT5CKVjNapKluQOfkOgmLPUsyNMM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=gtbbbadfLRmll0KGhdP752//f3A4XmbXyWQsxfTAd1SkQlQA7MxDKzMiXIhMQzC+y7
         BJMgew8hcTzC/iD+P5xdgeCgD5xh6CREAlIceKd9LXcy8/EdQoEP0BVBEh8o4M2uTVEO
         hWe/j6ecirBZAEzIAzf4RqtYphtaYmgBzdpFs=
Received: by 10.220.123.67 with SMTP id o3mr754621vcr.56.1273856953756; Fri, 
	14 May 2010 10:09:13 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.220.18.194 with HTTP; Fri, 14 May 2010 10:08:53 -0700 (PDT)
In-Reply-To: <AANLkTimjdqSw3CAM9YVYtQ1RkPChlOwzAShjfgGj7l_r@mail.gmail.com>
References: <AANLkTikHCfOfkqFFJcZJz9e92tgzNYLlByiLztoXZd6j@mail.gmail.com> 
	<AANLkTilAx7GfwVpHD5QlnrQT6ddwdEB_FtkUYrt8kiuR@mail.gmail.com> 
	<AANLkTimjdqSw3CAM9YVYtQ1RkPChlOwzAShjfgGj7l_r@mail.gmail.com>
From: Chris Harris <ryguasu@gmail.com>
Date: Fri, 14 May 2010 10:08:53 -0700
Message-ID: <AANLkTiku0ntSw4eqc7DHqHIKubVeKDzKKsvNz4jCP55q@mail.gmail.com>
Subject: Re: Will doc ids ever change if nothing is deleted?
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Could you address your needs by assigning each document a unique
identifier (maybe you have a natural key, or maybe you could generate
a new GUID or something for each doc), and using those identifiers,
rather than internal Lucene docids, to track documents between the
search stage and the loading stage?

On Thu, May 13, 2010 at 7:12 PM, Nigel <nigelspleen@gmail.com> wrote:
> Yes, I realize that storing document IDs persistently (for example) is a =
Bad
> Idea. Partly I'm asking just to make sure I understand what's going on.
>
> There is a use case, though. =A0In some cases between when we do a search=
 and
> return some doc ids, and when we use those doc ids to load some documents=
,
> the index could be reopened. =A0Normally the same IndexReader instance wo=
uld
> be used for both the searching and the loading and so you'd be assured th=
at
> the doc ids would be stable. =A0But sometimes when searches are distribut=
ed
> across multiple remote indexes (and non-Lucene search systems) some
> aggregation needs to occur before results are loaded, and references to t=
he
> IndexReaders can't be maintained across that process. =A0Currently we rem=
ember
> the index version associated with a search result (i.e. a set of document
> ids) so we can verify when loading the documents that the version is the
> same, and therefore the IDs are still valid. =A0I'm wondering if this is
> overly restrictive. =A0For example, if I knew that no documents had been
> deleted, and if (per my original question) only deletions would trigger
> renumbering, then the doc ids from a search result could be used on an in=
dex
> with a newer version.
>
> Thanks,
> Chris
>
> On Thu, May 13, 2010 at 9:51 PM, Erick Erickson <erickerickson@gmail.com>=
wrote:
>
>> Why do you care? That is, what do you want to accomplish
>> that makes document ID renumbering relevant?
>>
>> In general, it is unwise to rely on Lucene-assigned document
>> IDs. If you need an invariant document ID, assign it yourself.
>>
>> If this is off base, could you supply your use-case?
>>
>> Best
>> Erick
>>
>> On Thu, May 13, 2010 at 9:38 PM, Nigel <nigelspleen@gmail.com> wrote:
>>
>> > The FAQ clearly states that document IDs will not be re-assigned unles=
s
>> > something was deleted.
>> >
>> >
>> http://wiki.apache.org/lucene-java/LuceneFAQ#When_is_it_possible_for_doc=
ument_IDs_to_change.3F
>> >
>> > However, a number of other emails and posts I've read mention that
>> > renumbering occurs when segments are merged. =A0Maybe what people mean
>> > is simply that when something is deleted, nothing is immediately
>> > renumbered,
>> > and it's not until merge time that the renumbering happens. =A0(This i=
s my
>> > understanding of how it works.)
>> >
>> > Just so I'm 100% clear, if I never delete anything, will the IDs ever
>> > change?
>> >
>> > Thanks,
>> > Chris
>> >
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46122-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 14 17:23:23 2010
Return-Path: <java-user-return-46122-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4998 invoked from network); 14 May 2010 17:23:23 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 May 2010 17:23:23 -0000
Received: (qmail 4784 invoked by uid 500); 14 May 2010 17:23:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4754 invoked by uid 500); 14 May 2010 17:23:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4746 invoked by uid 99); 14 May 2010 17:23:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 May 2010 17:23:20 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL,URIBL_RED
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.160.176] (HELO mail-gy0-f176.google.com) (209.85.160.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 May 2010 17:23:14 +0000
Received: by gyf1 with SMTP id 1so1583026gyf.35
        for <java-user@lucene.apache.org>; Fri, 14 May 2010 10:22:53 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.150.113.12 with SMTP id l12mr2434629ybc.364.1273857773249; 
	Fri, 14 May 2010 10:22:53 -0700 (PDT)
Received: by 10.151.11.20 with HTTP; Fri, 14 May 2010 10:22:52 -0700 (PDT)
In-Reply-To: <492379B6AA909E4FAF672AACCA0EADC25CC134E53B@PHXCCRPRD02.adprod.bmc.com>
References: <492379B6AA909E4FAF672AACCA0EADC24A40EE9B10@PHXCCRPRD02.adprod.bmc.com>
	 <492379B6AA909E4FAF672AACCA0EADC25CBABBED4D@PHXCCRPRD02.adprod.bmc.com>
	 <n2w9ac0c6aa1004141352s5edb3082o2f1952626c551450@mail.gmail.com>
	 <492379B6AA909E4FAF672AACCA0EADC25CC066FD36@PHXCCRPRD02.adprod.bmc.com>
	 <i2i9ac0c6aa1004270340heec28687zc734ebfbbae10bd3@mail.gmail.com>
	 <492379B6AA909E4FAF672AACCA0EADC25CC09D6A1A@PHXCCRPRD02.adprod.bmc.com>
	 <v2k9ac0c6aa1004291307z9aa93222y7512e27808eeb9db@mail.gmail.com>
	 <492379B6AA909E4FAF672AACCA0EADC25CC106250D@PHXCCRPRD02.adprod.bmc.com>
	 <i2v9ac0c6aa1005100126od669496anaec10961d42a4b1f@mail.gmail.com>
	 <492379B6AA909E4FAF672AACCA0EADC25CC134E53B@PHXCCRPRD02.adprod.bmc.com>
Date: Fri, 14 May 2010 13:22:52 -0400
Message-ID: <AANLkTim8CX11A_RTUDPxrMjMrxjjdraDWRlPacoo5Uah@mail.gmail.com>
Subject: Re: IndexWriter and memory usage
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

The patch looks correct.

The 16 MB RAM buffer means the sum of the shared char[], byte[] and
PostingList/RawPostingList memory will be kept under 16 MB.  There are
definitely other things that require memory beyond this -- eg during a
segment merge, SegmentReaders are opened for each segment being
merged.  Also, if there are pending deletions, 4 bytes per doc is
allocated.

Applying deletions also opens SegmentReaders.

Also: a single very large document will cause IW to blow way past the
16 MB limit, using up as much as is required to index that one doc.
When that doc is finished, it will then flush and free objects until
it's back under the 16 MB limit.  If several threads happen to index
large docs at the same time, the problem is that much worse (they all
must finish before IW can flush).

Can you print the size of the documents you're indexing and see if
that correlates to when you see the memory growth?

Mike

On Tue, May 11, 2010 at 2:57 PM, Woolf, Ross <Ross_Woolf@bmc.com> wrote:
> Still working on some of the things you ask, namely searching without ind=
exing. =A0I need to modify our code and the general indexing process takes =
2 hours, so I won't have a quick turn around on that. =A0We also have a har=
d time answering the question about items that are normal but do they use m=
ore than the 16 MB. =A0The heap dump does not allow us to quickly identify =
specifics on objects like we show in images below, so we really don't know =
what the amount of memory is used up in objects of this sort. =A0We only kn=
ow that byte[] total for all is at 197891887.
>
> However, I have provided another image that breaks down the memory usage =
from the heap. =A0 A big question we have is that we talk about the 16 mb b=
uffer, but is there other memory used by Lucene beyond that that we should =
expect to see?
>
> http://i39.tinypic.com/o0o560.jpg
>
> we have 197891887 used in byte[] (anyone we look at is related in some wa=
y to the index writer)
> we have 169263904 used in char[] (these are related to the index writer t=
oo)
> we have 72658944 used in FreqProxTermsWriter$PostingList
> we have 37722668 used in RawPostingList[]
>
> All of these are well over the 16mb. =A0So we are a little lost as to wha=
t we should expect to see when we look at the memory usage
>
> I've attached the patch and the CheckIndex files. =A0Unfortunately on the=
 patch I guess my editor made some space line changes, so you get a lot of =
extra items in the patch that really are not any changes other than tab/spa=
ce.
>
> If you are open to a live share again, then maybe you could look at this =
data quicker than the screen shots I send.
>
> -----Original Message-----
> From: Michael McCandless [mailto:lucene@mikemccandless.com]
> Sent: Monday, May 10, 2010 2:27 AM
> To: java-user@lucene.apache.org
> Subject: Re: IndexWriter and memory usage
>
> Hmmmm...
>
> Your usage (searching for old doc & updating it, to add new fields) is fi=
ne.
>
> But: what memory usage do you see if you open a searcher, and search
> for all docs, but don't open an IndexWriter? =A0We need to tease apart
> the IndexReader vs IndexWriter memory usage you are seeing. =A0Also, can
> you post the output of CheckIndex (java
> org.apache.lucene.index.CheckIndex /path/to/index) of your fully built
> index? =A0That may give some hints about expected memory usage of IR (eg
> if # unique terms is large).
>
> More comments below:
>
> On Thu, May 6, 2010 at 1:03 PM, Woolf, Ross <Ross_Woolf@bmc.com> wrote:
>> Sorry to be so long in getting back on this. The patch you provided has =
improved the situation but we are still seeing some memory loss. =A0The fol=
lowing are some images from the heap dump. =A0I'll share with you what we a=
re seeing now.
>>
>> This first image shows the memory pattern. =A0Our fist commit takes plac=
e at about 3:54 when the steady trend up takes a drop and the new cycle beg=
ins. =A0 What we have found is the 2422 fix has made the memory in the firs=
t phase before the commit much better (and I'm sure throughout the entire r=
un). =A0But as you can see after the commit then we then again begin to los=
e memory. =A0One of the pieces of info to know about this is what you are s=
eeing, we have 5 threads that are pushing data to our Lucene plugin. =A0If =
we drop it down to 1 thread then we are much more successful and can actual=
ly index all of our data without running out of memory but at 5 threads it =
gets into trouble. =A0We still see a trend up in memory usage, but not as s=
evere as when we use the multiple threads.
>> http://tinypic.com/view.php?pic=3D2w6bf68&s=3D5
>
> Can you post the output of "svn diff" on the 2.9 code base you're
> using? =A0I just want to look & verify all issues we've discussed are
> included in your changes. =A0The fact that 1 thread is fine and 5
> threads are not still sounds like a symptom of LUCENE-2283.
>
> Also, does that heap usage graph exclude garbage? =A0Or, alternatively,
> can you provoke an OOME w/ 512 MB heap and then capture the heap dump
> at that point?
>
>> There is another piece of the picture that I think might be coming into =
play. =A0We have plugged Lucene into a legacy app and are subject to how we=
 can get it to deliver the data that we are indexing. =A0In some scenarios =
(like the one we are having this problem with) we are building our document=
s progressively (adding fields to the document through the process). =A0Wha=
t you see before the first commit is the legacy system handing us the first=
 field for many documents. Once we have gotten all of "field 1" for all doc=
uments then we commit that data into the index. =A0Then the system starts f=
eeding us "field 2." =A0So we perform a search to see if the document alrea=
dy exists (for the scenario you are seeing it does) and so it retrieves the=
 original document (we store a document ID) and it then adds the new field =
of data to the existing document and we "update" the document in the index.=
 =A0After the first commit, the rest of the process is one where a document=
 already exist and so the new field is added and and the document is update=
d. =A0It is in this process that we start rapidly losing memory. =A0The fol=
lowing images show some examples of common areas where memory is being held=
.
>>
>> http://tinypic.com/view.php?pic=3D11vkwnb&s=3D5
>
> This looks like "normal" memory usage of IndexWriter -- these are the
> recycled buffers used for holding stored fields. =A0However: the net RAM
> used by this allocation should not exceed your 16 MB IW ram buffer
> size -- does it?
>
>> http://tinypic.com/view.php?pic=3Dabq9fp&s=3D5
>
> This one is the byte[] buffer used by CompoundFileReader, opened by
> IndexReader. =A0It's odd that you have so many of these (if I'm reading
> this correctly) -- are you certain all opened readers are being
> closed? =A0How many segments do you have in your index? =A0Or... are ther=
e
> many unique threads doing the searching? =A0EG do you create a new
> thread for every search or update?
>
>> http://tinypic.com/view.php?pic=3D25pskyp&s=3D5
>
> This one is also normal memory used by IndexWriter, but as above, the
> net RAM used by this allocation (summed w/ the above one) should not
> exceed your 16 MB IW ram buffer size.
>
>> As mentioned, we are subject to how we can have the legacy app feed us t=
he data and so this is why we do it this way. =A0We treat this system as a =
real time system and at anytime the legacy system may send us a field that =
needs to be added or updated to a document. =A0So we search for the documen=
t and if found we either add or update a field if the field is already exis=
ting in the document. =A0So I started to wonder if a clue in this memory lo=
ss comes from the fact that we are retrieving an existing document and then=
 adding to it and updating.
>>
>> Now, if we eliminate the updating and simply add each item as a new docu=
ment (which we did just to test but won't be adequate for our running syste=
m), then we still see a slight trend upward in memory usage and the followi=
ng images show that now most of the =A0memory is consumed in char[] rather =
than the byte[] we saw before. =A0We don't know if this is normal and expec=
ted, or if it is something to be concerned about as well.
>>
>> http://tinypic.com/view.php?pic=3Dvfgkyt&s=3D5
>
> That memory usage is normal -- it's used by the in-RAM terms index of
> your opened IndexReader. =A0But I'd like to see the memory usage of
> simply opening your IndexReader and searching for documents to update,
> but not opening an IndexWriter at all.
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46123-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 14 17:46:32 2010
Return-Path: <java-user-return-46123-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12060 invoked from network); 14 May 2010 17:46:32 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 May 2010 17:46:32 -0000
Received: (qmail 37971 invoked by uid 500); 14 May 2010 17:46:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37936 invoked by uid 500); 14 May 2010 17:46:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37927 invoked by uid 99); 14 May 2010 17:46:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 May 2010 17:46:29 +0000
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=AWL,FREEMAIL_FROM,FREEMAIL_REPLY,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of nigelspleen@gmail.com designates 209.85.221.173 as permitted sender)
Received: from [209.85.221.173] (HELO mail-qy0-f173.google.com) (209.85.221.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 May 2010 17:46:23 +0000
Received: by qyk4 with SMTP id 4so3853539qyk.21
        for <java-user@lucene.apache.org>; Fri, 14 May 2010 10:46:02 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=GllvLYCVi1ERNH94PNMUa+9eXKE9g26N2lUBCui8cDA=;
        b=Qu5PEklVk17ODkxhy9QE5Rz08Nm+zHZ2COTSCyBLUowYwOZ7D6c2S4lTIE3BNZTWwO
         14cpIyW4XMUK9Hl/yFLfhSqEmpd6hxEgQy97ZQU48QeSDVhPJ0plx9dSnDqMWKZwawgM
         KGU1QGlzO+LrAr0ZXP1cF5uDzHLQ4X8h2pUrA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Y0rCb9S5Iu+liwhJR7qCXYX1OexRARfATdMFTPi0wfOcxiipGtouMq/lV5tZqfb7df
         IqhdzFYf+T19hKNvf5ylRNaTZv75rHcbXUU8za8+sqQxWzNw08DYHgkqIRNJdDGWq5B7
         HBU8UK3qEhUx8urWmlRVg2HmiW07hE4+M+Aas=
MIME-Version: 1.0
Received: by 10.224.43.197 with SMTP id x5mr818809qae.127.1273859153853; Fri, 
	14 May 2010 10:45:53 -0700 (PDT)
Received: by 10.220.157.199 with HTTP; Fri, 14 May 2010 10:45:52 -0700 (PDT)
In-Reply-To: <AANLkTiku0ntSw4eqc7DHqHIKubVeKDzKKsvNz4jCP55q@mail.gmail.com>
References: <AANLkTikHCfOfkqFFJcZJz9e92tgzNYLlByiLztoXZd6j@mail.gmail.com>
	 <AANLkTilAx7GfwVpHD5QlnrQT6ddwdEB_FtkUYrt8kiuR@mail.gmail.com>
	 <AANLkTimjdqSw3CAM9YVYtQ1RkPChlOwzAShjfgGj7l_r@mail.gmail.com>
	 <AANLkTiku0ntSw4eqc7DHqHIKubVeKDzKKsvNz4jCP55q@mail.gmail.com>
Date: Fri, 14 May 2010 13:45:52 -0400
Message-ID: <AANLkTinEWcI_3b-r2sr-1_p5zDVwRU7pJpZOhF-nWZA7@mail.gmail.com>
Subject: Re: Will doc ids ever change if nothing is deleted?
From: Nigel <nigelspleen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00c09f88d3c26043e604869172f2

--00c09f88d3c26043e604869172f2
Content-Type: text/plain; charset=ISO-8859-1

We do assign GUIDs to everything in the index for cases where longer-term
identity is necessary.  For this case, using GUIDs would be prohibitively
expensive as we'd need to load the GUIDs for all search results.  We might
have tens of thousands of results and only want to load a random 100, so
having to load GUIDs for 10,000 results and then doing 100 GUID searches is
vastly less efficient than just collecting 10,000 doc ids and doing 100
doc(id) lookups.

Almost irresepective of the use case, I'm still interested to know whether
doc ids can be changed as a result of merging, optimization, etc. if no
documents are deleted.

Thanks,
Chris

On Fri, May 14, 2010 at 1:08 PM, Chris Harris <ryguasu@gmail.com> wrote:

> Could you address your needs by assigning each document a unique
> identifier (maybe you have a natural key, or maybe you could generate
> a new GUID or something for each doc), and using those identifiers,
> rather than internal Lucene docids, to track documents between the
> search stage and the loading stage?
>
> On Thu, May 13, 2010 at 7:12 PM, Nigel <nigelspleen@gmail.com> wrote:
> > Yes, I realize that storing document IDs persistently (for example) is a
> Bad
> > Idea. Partly I'm asking just to make sure I understand what's going on.
> >
> > There is a use case, though.  In some cases between when we do a search
> and
> > return some doc ids, and when we use those doc ids to load some
> documents,
> > the index could be reopened.  Normally the same IndexReader instance
> would
> > be used for both the searching and the loading and so you'd be assured
> that
> > the doc ids would be stable.  But sometimes when searches are distributed
> > across multiple remote indexes (and non-Lucene search systems) some
> > aggregation needs to occur before results are loaded, and references to
> the
> > IndexReaders can't be maintained across that process.  Currently we
> remember
> > the index version associated with a search result (i.e. a set of document
> > ids) so we can verify when loading the documents that the version is the
> > same, and therefore the IDs are still valid.  I'm wondering if this is
> > overly restrictive.  For example, if I knew that no documents had been
> > deleted, and if (per my original question) only deletions would trigger
> > renumbering, then the doc ids from a search result could be used on an
> index
> > with a newer version.
> >
> > Thanks,
> > Chris
> >
> > On Thu, May 13, 2010 at 9:51 PM, Erick Erickson <erickerickson@gmail.com
> >wrote:
> >
> >> Why do you care? That is, what do you want to accomplish
> >> that makes document ID renumbering relevant?
> >>
> >> In general, it is unwise to rely on Lucene-assigned document
> >> IDs. If you need an invariant document ID, assign it yourself.
> >>
> >> If this is off base, could you supply your use-case?
> >>
> >> Best
> >> Erick
> >>
> >> On Thu, May 13, 2010 at 9:38 PM, Nigel <nigelspleen@gmail.com> wrote:
> >>
> >> > The FAQ clearly states that document IDs will not be re-assigned
> unless
> >> > something was deleted.
> >> >
> >> >
> >>
> http://wiki.apache.org/lucene-java/LuceneFAQ#When_is_it_possible_for_document_IDs_to_change.3F
> >> >
> >> > However, a number of other emails and posts I've read mention that
> >> > renumbering occurs when segments are merged.  Maybe what people mean
> >> > is simply that when something is deleted, nothing is immediately
> >> > renumbered,
> >> > and it's not until merge time that the renumbering happens.  (This is
> my
> >> > understanding of how it works.)
> >> >
> >> > Just so I'm 100% clear, if I never delete anything, will the IDs ever
> >> > change?
> >> >
> >> > Thanks,
> >> > Chris
> >> >
> >>
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00c09f88d3c26043e604869172f2--

From java-user-return-46124-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 14 18:05:12 2010
Return-Path: <java-user-return-46124-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17227 invoked from network); 14 May 2010 18:05:12 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 May 2010 18:05:12 -0000
Received: (qmail 85607 invoked by uid 500); 14 May 2010 18:05:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85553 invoked by uid 500); 14 May 2010 18:05:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85545 invoked by uid 99); 14 May 2010 18:05:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 May 2010 18:05:09 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_LOTS_OF_MONEY,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of chris.lu@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 May 2010 18:05:02 +0000
Received: by pwi6 with SMTP id 6so1787474pwi.35
        for <java-user@lucene.apache.org>; Fri, 14 May 2010 11:04:41 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=9SUTtln7ryskSEu/77rn/dMGujHZZ9283soAOPctSSU=;
        b=OYNtLn6aK8iZGHsPVdTfyxuYJqOkv+YjfbmhBgiVGPGsKh5XvaiFYhwlTiPhcxtXVQ
         LmlWamR/Ej9/KVDzAFW0Yz7F35qM7k7X4dhQb28wkY7POi+zFJgE3k8mThd1xt0UMDVa
         2kvyvrwDjslJXaPsxDXkjHCV9yKoQ+nMDRKIo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=G8JdPbNsE9qelI5gZq3MgqB3ZhC6agskkwcRoBGfgo1MxpBmm0p/3EbRAnGCfXmTK6
         H3oQcAcAKco0a8XAwtRmHmTW/JVmT88Docu2v3MFLJqqj2H5CGn2QWY+32b8RncVGuMF
         G860F+ZMZxIBNidTmSXrRFhmKvOa1/wTZh38M=
Received: by 10.114.186.40 with SMTP id j40mr1392042waf.93.1273860280884;
        Fri, 14 May 2010 11:04:40 -0700 (PDT)
Received: from clu-dt.composite.com (hq.compositesw.com [209.237.61.131])
        by mx.google.com with ESMTPS id r20sm21841596wam.17.2010.05.14.11.04.39
        (version=SSLv3 cipher=RC4-MD5);
        Fri, 14 May 2010 11:04:39 -0700 (PDT)
Message-ID: <4BED90B4.9040801@gmail.com>
Date: Fri, 14 May 2010 11:04:36 -0700
From: Chris Lu <chris.lu@gmail.com>
User-Agent: Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.1.9) Gecko/20100330 Fedora/3.0.4-1.fc12 Thunderbird/3.0.4
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Will doc ids ever change if nothing is deleted?
References: <AANLkTikHCfOfkqFFJcZJz9e92tgzNYLlByiLztoXZd6j@mail.gmail.com>
In-Reply-To: <AANLkTikHCfOfkqFFJcZJz9e92tgzNYLlByiLztoXZd6j@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

The doc id will get changed if the segments are merged. The doc id is 
more depending on the order of documents being added.

Just think about it. The doc ids are starting from 0 to N. And when some 
documents are deleted, they are marked deleted on .del file. So no 
change there. When some documents are added, the id is N+1.

Of course, if some documents from other segments are merged. The 
documents in one segment will "lose" its doc id.

--
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes: 
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request) 
got 2.6 Million Euro funding!

On 05/13/2010 06:38 PM, Nigel wrote:
> The FAQ clearly states that document IDs will not be re-assigned unless
> something was deleted.
> http://wiki.apache.org/lucene-java/LuceneFAQ#When_is_it_possible_for_document_IDs_to_change.3F
>
> However, a number of other emails and posts I've read mention that
> renumbering occurs when segments are merged.  Maybe what people mean
> is simply that when something is deleted, nothing is immediately renumbered,
> and it's not until merge time that the renumbering happens.  (This is my
> understanding of how it works.)
>
> Just so I'm 100% clear, if I never delete anything, will the IDs ever
> change?
>
> Thanks,
> Chris
>
>    


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46125-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 14 20:20:35 2010
Return-Path: <java-user-return-46125-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56611 invoked from network); 14 May 2010 20:20:35 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 May 2010 20:20:35 -0000
Received: (qmail 24278 invoked by uid 500); 14 May 2010 20:20:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24088 invoked by uid 500); 14 May 2010 20:20:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24080 invoked by uid 99); 14 May 2010 20:20:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 May 2010 20:20:32 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_LOTS_OF_MONEY,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of nigelspleen@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 May 2010 20:20:26 +0000
Received: by vws3 with SMTP id 3so551668vws.35
        for <java-user@lucene.apache.org>; Fri, 14 May 2010 13:20:05 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=DbJVMroLGX47AJhwID8JACwnYeMX6Knjarj6zEX/g3Y=;
        b=Z2eNlu+JHTMS5KsaKGK9caIqfg+Zwlwox2XdakKnONhrMlF18SR0fOLOw1UXOfEmoJ
         CNNmb2wBoMvfQRdnk6GOPCO7MlufuOQyq0wC1yL5JhcwzDshjrkfSO+5161K8miLBlPn
         YKzoyHeK0YHnqaQt5K8zO/Q+ZNbpvnxJnZcdk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=mJlB7GFiuyIy5Iz1kxBnzHiG4ibennoCA862bFxTo1qcjO9vFiiONG1tJpo+tpBXmU
         3Z2Tlt4Q1nH32E3dY7Dum/uvSPg4Bl9xwIeWywJiq38sc5cxxpTTXf6+Sa6C56xRIhiM
         IZ+v+101tquEhyVQVClNFYSpbG5kMDpD9FuOQ=
MIME-Version: 1.0
Received: by 10.220.128.202 with SMTP id l10mr834738vcs.197.1273868403572; 
	Fri, 14 May 2010 13:20:03 -0700 (PDT)
Received: by 10.220.157.199 with HTTP; Fri, 14 May 2010 13:20:03 -0700 (PDT)
In-Reply-To: <4BED90B4.9040801@gmail.com>
References: <AANLkTikHCfOfkqFFJcZJz9e92tgzNYLlByiLztoXZd6j@mail.gmail.com>
	 <4BED90B4.9040801@gmail.com>
Date: Fri, 14 May 2010 16:20:03 -0400
Message-ID: <AANLkTilWI_IcGwNh3ZR-fJ7Hmw7x2VdC0OJZBpcJCIIC@mail.gmail.com>
Subject: Re: Will doc ids ever change if nothing is deleted?
From: Nigel <nigelspleen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=e0cb4e887c4baf7f0e0486939967
X-Virus-Checked: Checked by ClamAV on apache.org

--e0cb4e887c4baf7f0e0486939967
Content-Type: text/plain; charset=ISO-8859-1

Right, but my question was whether merging segments will renumber docs *if
no documents are deleted*.  Empirically, the answer is no.  I've written
test code that indexes documents with a field equal to each document's
current id, and verified that the ids still match the field values even
after merges and optimizes are done, if no docs are deleted.  This seems to
indicate that merging always preserves the current id order, which
is perhaps the obvious way to implement merging.  (Though of course an
alternative reasonable implementation, for example. might have been to add
everything from one segment to the merged segment, then add everything from
the next segment, etc., thus renumbering everything.)

Given all the misinformation or ambiguous information on this topic that
I've found, I was hoping to clear this up definitively.  My test case
doesn't prove that there's not some way for ids to change in certain
circumstances (apart from deletions, which is documented clearly).  But
right now I don't see any reason not to believe the FAQ entry mentioned in
my original email.

Thanks,
Chris

On Fri, May 14, 2010 at 2:04 PM, Chris Lu <chris.lu@gmail.com> wrote:

> The doc id will get changed if the segments are merged. The doc id is more
> depending on the order of documents being added.
>
> Just think about it. The doc ids are starting from 0 to N. And when some
> documents are deleted, they are marked deleted on .del file. So no change
> there. When some documents are added, the id is N+1.
>
> Of course, if some documents from other segments are merged. The documents
> in one segment will "lose" its doc id.
>
> --
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
> Lucene Database Search in 3 minutes:
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
> DBSight customer, a shopping comparison site, (anonymous per request) got
> 2.6 Million Euro funding!
>
>
> On 05/13/2010 06:38 PM, Nigel wrote:
>
>> The FAQ clearly states that document IDs will not be re-assigned unless
>> something was deleted.
>>
>> http://wiki.apache.org/lucene-java/LuceneFAQ#When_is_it_possible_for_document_IDs_to_change.3F
>>
>> However, a number of other emails and posts I've read mention that
>> renumbering occurs when segments are merged.  Maybe what people mean
>> is simply that when something is deleted, nothing is immediately
>> renumbered,
>> and it's not until merge time that the renumbering happens.  (This is my
>> understanding of how it works.)
>>
>> Just so I'm 100% clear, if I never delete anything, will the IDs ever
>> change?
>>
>> Thanks,
>> Chris
>>
>>
>>
>
>
>  ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--e0cb4e887c4baf7f0e0486939967--

From java-user-return-46126-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat May 15 05:39:42 2010
Return-Path: <java-user-return-46126-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60785 invoked from network); 15 May 2010 05:39:42 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 May 2010 05:39:42 -0000
Received: (qmail 49727 invoked by uid 500); 15 May 2010 05:39:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49457 invoked by uid 500); 15 May 2010 05:39:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49449 invoked by uid 99); 15 May 2010 05:39:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 May 2010 05:39:36 +0000
X-ASF-Spam-Status: No, hits=4.4 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of manjula53@gmail.com designates 74.125.83.176 as permitted sender)
Received: from [74.125.83.176] (HELO mail-pv0-f176.google.com) (74.125.83.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 May 2010 05:39:31 +0000
Received: by pva4 with SMTP id 4so108726pva.35
        for <java-user@lucene.apache.org>; Fri, 14 May 2010 22:39:11 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=j6ny6ia6Vdki8E5JfhjlFy59Ipj0kK1LvMZzFnq8e3o=;
        b=Mew+C1qgwpd+V41w3tRqyNAWLgPMlbasUb9VdSlcWYiybK1ETrQG6rVOs12IXX1wAM
         OTjqYAhMhuG1fiTeHSlTqV7bYyKxjNIiJ5dmYssajqx/Cx7kBdIwXHr71mpoPmFM/8qV
         bSPsnTuHuVdUsw9aUShEAZTh+UFm+xUWza+kE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=McmwhirteM+jMdVJsVIgRJjCj5wlT9KSi8SmC+EKRZuSRXqPgw4Mz5bD/iwTxZgRO/
         h46WxQ9BN5gg8CLugBsfSTcYAqAQyzZQtPep7vMPXVXSCsV0OwT2CwHCpgiTBvc7gvig
         a6ezxIytk7hlwp7bmWVXlBYDf8JWKJO/D8voU=
MIME-Version: 1.0
Received: by 10.141.108.11 with SMTP id k11mr1472187rvm.132.1273901937613; 
	Fri, 14 May 2010 22:38:57 -0700 (PDT)
Received: by 10.140.147.1 with HTTP; Fri, 14 May 2010 22:38:57 -0700 (PDT)
In-Reply-To: <4BED4637.5070407@getopt.org>
References: <AANLkTinfx5Mcnjgo6OTw7SRt51vIEkQ15y4tt_HqEGcy@mail.gmail.com>
	 <4BED262B.50906@getopt.org>
	 <AANLkTin7aXdCskqCN-n2S7ewUrGyFXBhT5gn6z0UTTW1@mail.gmail.com>
	 <4BED4637.5070407@getopt.org>
Date: Sat, 15 May 2010 11:08:57 +0530
Message-ID: <AANLkTikm58Sby6-Uhh3vqTKL91JFROfvWPTAgSi3dqJ8@mail.gmail.com>
Subject: Re: Access indexed terms
From: manjula wijewickrema <manjula53@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd13b78785b0504869b68a8

--000e0cd13b78785b0504869b68a8
Content-Type: text/plain; charset=ISO-8859-1

Dear Andrzej,

Thanx for your valuable help. I also noticed this HighFreqTerms approach in
the Lucene email archive and try to use it. In order to do that I have
downloaded lucene-misc-2.9.1.jar and added org.apache.lucene.misc package
into my project. Now I think I have to call this HighFreqTerms class in my
code. But I was unable to find any guidence of how to do it? If you can pls.
be kind enough to tell me how can I use this class in my code.

Thanx
Manjula


On Fri, May 14, 2010 at 6:16 PM, Andrzej Bialecki <ab@getopt.org> wrote:

> On 2010-05-14 14:24, manjula wijewickrema wrote:
> > Hi Andrzej
> >
> > Thanx for the reply. But as you have mentioned, creating arrays for
> indexed
> > terms seems to be little difficult. Here my intention is to find the term
> > frequencies (of terms) of an indexed document. I can find the term
> frequency
> > of a particular term (giving as a query) if I specify the term in the
> code.
> > But I really want is to get the term frequency (or even the number of
> times
> > it appears in the document) of the all indexed terms (or high frequency
> > terms) without named them in the code. Is there an alternative way to do
> > that?
>
> Yes, see the discussion here:
>
> https://issues.apache.org/jira/browse/LUCENE-2393
>
>
> --
>  Best regards,
> Andrzej Bialecki     <><
>  ___. ___ ___ ___ _ _   __________________________________
> [__ || __|__/|__||\/|  Information Retrieval, Semantic Web
> ___|||__||  \|  ||  |  Embedded Unix, System Integration
> http://www.sigram.com  Contact: info at sigram dot com
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd13b78785b0504869b68a8--

From java-user-return-46127-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat May 15 05:50:17 2010
Return-Path: <java-user-return-46127-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61789 invoked from network); 15 May 2010 05:50:16 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 May 2010 05:50:16 -0000
Received: (qmail 53633 invoked by uid 500); 15 May 2010 05:50:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53483 invoked by uid 500); 15 May 2010 05:50:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53475 invoked by uid 99); 15 May 2010 05:50:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 May 2010 05:50:14 +0000
X-ASF-Spam-Status: No, hits=4.4 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of manjula53@gmail.com designates 74.125.83.176 as permitted sender)
Received: from [74.125.83.176] (HELO mail-pv0-f176.google.com) (74.125.83.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 May 2010 05:50:06 +0000
Received: by pva4 with SMTP id 4so112645pva.35
        for <java-user@lucene.apache.org>; Fri, 14 May 2010 22:49:45 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=WeYZQJUX1f3dijarlCZD8LOfkVwv2mUelxOCCl5H+rQ=;
        b=vDHg46AjkM039tFXGBWExxF1SvE3/Uwxcm/TZqKKdd7vtUcjhYfCHz38tGtMLSvDh1
         sn8yrJKbPqiAz2Hm0Nnc58Nm9TWpvSHhR32CM+eWCXwH4l0i+1UtqInufRbo5JfBvmBh
         kM8y6qjEdUkDSMSq87rofUdSQhkfRC/ov6+Po=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=R12KPpwlnhl+mIWV2rKPjAq4vflv4UoFzhg923UeZhyYan1GZkBLl9Ee7lhvLeYfE4
         7JQEtwvr6P1TIip+BTH4Hk8HxoG0FUgeRTrFM0jnw+z5mkAAvirutpRILhWMr39EEvcs
         ExFRU6djqkHv2AqaWT83Rvbi992h/5Shif6g0=
MIME-Version: 1.0
Received: by 10.141.106.8 with SMTP id i8mr1448646rvm.275.1273902584963; Fri, 
	14 May 2010 22:49:44 -0700 (PDT)
Received: by 10.140.147.1 with HTTP; Fri, 14 May 2010 22:49:44 -0700 (PDT)
Date: Sat, 15 May 2010 11:19:44 +0530
Message-ID: <AANLkTimrzqzgZJe7bUTtjKsgBOY627K_kY--uVYoVDv9@mail.gmail.com>
Subject: How to call high fre. terms using HighFreTerms class
From: manjula wijewickrema <manjula53@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd13bb20e243604869b8fc7
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd13bb20e243604869b8fc7
Content-Type: text/plain; charset=ISO-8859-1

Hi,

I am struggling with using HighFreTerms class for the purpose of find high
fre. terms in my index. My target is to get the high frequency terms in an
indexed document (single document). To do that I have added
org.apache.lucene.misc package into my project. I think upto that point I am
correct. But after that I have no an idea of how to call this in my
coding. Although I have looked in the lucene email archive, I was unable to
find a hint regarding to call of this class. If anybody can pls. give me a
sample code for using this class (and relevent methods) in the code which
suit to my purpose. I appreciate your kind help.

Thanks
Manjula

--000e0cd13bb20e243604869b8fc7--

From java-user-return-46128-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat May 15 12:08:23 2010
Return-Path: <java-user-return-46128-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27441 invoked from network); 15 May 2010 12:08:23 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 May 2010 12:08:23 -0000
Received: (qmail 20982 invoked by uid 500); 15 May 2010 12:08:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20922 invoked by uid 500); 15 May 2010 12:08:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20914 invoked by uid 99); 15 May 2010 12:08:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 May 2010 12:08:20 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.217.225 as permitted sender)
Received: from [209.85.217.225] (HELO mail-gx0-f225.google.com) (209.85.217.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 May 2010 12:08:12 +0000
Received: by gxk25 with SMTP id 25so1944803gxk.11
        for <java-user@lucene.apache.org>; Sat, 15 May 2010 05:07:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=w8Rvmr4uzmjAdH+efRVj0ILsAoQdtl/JAKABecA5qlE=;
        b=Tzn/EeuMgn/yQYPgMoY4b2zDj3+5OdhnA2A3NW9qCEo1AZZf7zV7NDHrS3WzFs6Cl9
         pYaO5drCvFzcab46sZoqVmytlKfTfT6fm6VuynFuRlhMk9TgxO5wKGXJwDgnvC5XxYyo
         vc6JyTH1GZzwyUGpd0lO+cdYyONOspep5G174=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=RAgjwpmpZWK7//A6tbtcgNNjo3MmUvmilYSuvQV8ROqhToZ28pc//BPqOpHoA33fzd
         XNpLkKx1YwYQlbwqwMQmB5sdv3iKa/LWiSsSVOOiHic/y8Ctc7Byq0MURnVndOhk101K
         X86OteQT5pvIL2W/LVosMSoLUySeuO5jh/Q6M=
MIME-Version: 1.0
Received: by 10.150.56.27 with SMTP id e27mr3908951yba.81.1273925271167; Sat, 
	15 May 2010 05:07:51 -0700 (PDT)
Received: by 10.151.43.7 with HTTP; Sat, 15 May 2010 05:07:51 -0700 (PDT)
In-Reply-To: <AANLkTimrzqzgZJe7bUTtjKsgBOY627K_kY--uVYoVDv9@mail.gmail.com>
References: <AANLkTimrzqzgZJe7bUTtjKsgBOY627K_kY--uVYoVDv9@mail.gmail.com>
Date: Sat, 15 May 2010 08:07:51 -0400
Message-ID: <AANLkTik2U4pF7mG5QwxRLKXzN5Dve79_L4n521n_WEea@mail.gmail.com>
Subject: Re: How to call high fre. terms using HighFreTerms class
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd5c8924221b00486a0d7f0
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd5c8924221b00486a0d7f0
Content-Type: text/plain; charset=ISO-8859-1

It looks like a stand-alone program, so you don't call it.
You probably want to get the source code and take a look at
how that program works to get an idea of how to do what you want.

See the instructions here for getting the source:
http://wiki.apache.org/lucene-java/HowToContribute

HTH
Erick

On Sat, May 15, 2010 at 1:49 AM, manjula wijewickrema
<manjula53@gmail.com>wrote:

> Hi,
>
> I am struggling with using HighFreTerms class for the purpose of find high
> fre. terms in my index. My target is to get the high frequency terms in an
> indexed document (single document). To do that I have added
> org.apache.lucene.misc package into my project. I think upto that point I
> am
> correct. But after that I have no an idea of how to call this in my
> coding. Although I have looked in the lucene email archive, I was unable to
> find a hint regarding to call of this class. If anybody can pls. give me a
> sample code for using this class (and relevent methods) in the code which
> suit to my purpose. I appreciate your kind help.
>
> Thanks
> Manjula
>

--000e0cd5c8924221b00486a0d7f0--

From java-user-return-46129-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat May 15 16:07:06 2010
Return-Path: <java-user-return-46129-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79637 invoked from network); 15 May 2010 16:07:06 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 May 2010 16:07:06 -0000
Received: (qmail 33736 invoked by uid 500); 15 May 2010 16:07:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33545 invoked by uid 500); 15 May 2010 16:07:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33537 invoked by uid 99); 15 May 2010 16:07:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 May 2010 16:07:03 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=10.0
	tests=AWL,SPF_PASS,T_FRT_ADULT2
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of koji@r.email.ne.jp designates 202.224.39.197 as permitted sender)
Received: from [202.224.39.197] (HELO mail1.asahi-net.or.jp) (202.224.39.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 May 2010 16:06:57 +0000
Received: from Koji-Sekiguchi-no-MacBook-Pro.local (w244069.ppp.asahi-net.or.jp [121.1.244.69])
	by mail1.asahi-net.or.jp (Postfix) with ESMTP id ECDC2A6686
	for <java-user@lucene.apache.org>; Sun, 16 May 2010 01:06:35 +0900 (JST)
Message-ID: <4BEEC68B.8070307@r.email.ne.jp>
Date: Sun, 16 May 2010 01:06:35 +0900
From: Koji Sekiguchi <koji@r.email.ne.jp>
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; ja-JP-mac; rv:1.9.1.9) Gecko/20100317 Thunderbird/3.0.4
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Return Entire field from GetBestFragment in FastVectorHighlighter
References: <AANLkTil-goCrhAg-ckJCcjf-2KjaV6fo5wpWd0aQ6aYl@mail.gmail.com>
In-Reply-To: <AANLkTil-goCrhAg-ckJCcjf-2KjaV6fo5wpWd0aQ6aYl@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

(10/05/12 20:32), Midhat Ali wrote:
> Is it possible to return entire field contents instead of a fixed size
> fragment. In Highlightrer, there is a Nullfragmenter. Whats's its
> counterpart in FastVectorhighlighter
>
>    
Currently, FVH doesn't have such function. I've opened a JIRA issue:

https://issues.apache.org/jira/browse/LUCENE-2464

Koji

-- 
http://www.rondhuit.com/en/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46130-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat May 15 18:32:57 2010
Return-Path: <java-user-return-46130-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13180 invoked from network); 15 May 2010 18:32:56 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 May 2010 18:32:56 -0000
Received: (qmail 89106 invoked by uid 500); 15 May 2010 18:32:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89055 invoked by uid 500); 15 May 2010 18:32:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89047 invoked by uid 99); 15 May 2010 18:32:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 May 2010 18:32:54 +0000
X-ASF-Spam-Status: No, hits=1.7 required=10.0
	tests=AWL,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yuanwu.mail@gmail.com designates 209.85.222.180 as permitted sender)
Received: from [209.85.222.180] (HELO mail-pz0-f180.google.com) (209.85.222.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 May 2010 18:32:46 +0000
Received: by pzk10 with SMTP id 10so1898069pzk.20
        for <java-user@lucene.apache.org>; Sat, 15 May 2010 11:32:26 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:date:from:to:subject
         :message-id:organization:x-mailer:mime-version:content-type;
        bh=1N6C9fIyD442bX2NE7LKlPrDVUC4zFGYR/QCPMPbgfs=;
        b=RvUUxEi8UyOhtMQXjZpB5V841EKbJh6HxrX28cdf+9d92mMTTUAWJYJYIwuNHY2QAF
         a0C3xlp4mhYGhVfFIFaE42ysArVQX8TQBnXsRit4leqIII8ZtLFPyT+AozF4i82ZHqiZ
         OV+valmZJGUGoyCgzao7nLPFC2p/SyJ3MCs2I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=date:from:to:subject:message-id:organization:x-mailer:mime-version
         :content-type;
        b=tUPf3nHfP3RBnJ2DYAlaS3c0CV98b/flcp6aoU6KHLHe5tuHQeb93/uZ7pd8GlHAb+
         HWKl/GGkuIjnT0CmXsII35B7b899qrD5Vj9YXX56ETvWDnGK2UZz1HoK6/LXLB5LR8Aj
         wlaT+2coykLDjApZdM01fDhtgxFQjNl+grj4c=
Received: by 10.141.2.4 with SMTP id e4mr1965938rvi.60.1273948345157;
        Sat, 15 May 2010 11:32:25 -0700 (PDT)
Received: from LENOVO-B0431FE2 ([114.250.154.175])
        by mx.google.com with ESMTPS id q10sm3045410rvp.20.2010.05.15.11.32.23
        (version=SSLv3 cipher=RC4-MD5);
        Sat, 15 May 2010 11:32:24 -0700 (PDT)
Date: Sun, 16 May 2010 02:32:24 +0800
From: "=?gb2312?B?1KzO5CBbR01haWxd?=" <yuanwu.mail@gmail.com>
To: "java-user" <java-user@lucene.apache.org>
Subject: How to access hit tokens/terms after executing IndexSearch.search? 
Message-ID: <201005160232226914767@gmail.com>
Organization: =?gb2312?B?sbG+qcDtuaS089GnvMbL47v6v8bRp7y8yvXRp9S6?=
X-mailer: Foxmail 6, 15, 201, 22 [cn]
Mime-Version: 1.0
Content-Type: multipart/alternative;
	boundary="=====003_Dragon083130474313_====="

--=====003_Dragon083130474313_=====
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: base64

SGkuIGV4cGVydHM6DQoNCkhvdyB0byBhY2Nlc3MgaGl0IHRva2Vucy90ZXJtcyBpbiBkb2N1bWVu
dHMgYWZ0ZXIgZXhlY3V0aW5nIEluZGV4U2VhcmNoLnNlYXJjaKOsZXNwZWNpYWxseSBmb3IgYSBS
YW5nZSBRdWVyeT8gDQoNCkhvdyBjYW4gSSB0byBkbyB0aGlzPw0KDQoNClRoYW5rcyBpbiBhZHZh
bmNlIQ0KICAgDQoNCjIwMTAtMDUtMTUgDQoNCg0KDQpZdWFuIFd1IFtCSVRdIA0K

--=====003_Dragon083130474313_=====--


From java-user-return-46131-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat May 15 21:18:27 2010
Return-Path: <java-user-return-46131-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53248 invoked from network); 15 May 2010 21:18:26 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 May 2010 21:18:26 -0000
Received: (qmail 55748 invoked by uid 500); 15 May 2010 21:18:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55566 invoked by uid 500); 15 May 2010 21:18:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55558 invoked by uid 99); 15 May 2010 21:18:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 May 2010 21:18:24 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [134.96.191.147] (HELO smtp.dfki.de) (134.96.191.147)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 May 2010 21:18:14 +0000
Received: from smtp.dfki.de (localhost [127.0.0.1])
	by imss.7 (Postfix) with ESMTP id 616E3316EA
	for <java-user@lucene.apache.org>; Sat, 15 May 2010 23:17:52 +0200 (CEST)
Received: from mail.dfki.de (lnv-104.sb.dfki.de [134.96.191.146])
	by smtp.dfki.de (Postfix) with ESMTP id 4C276313CB
	for <java-user@lucene.apache.org>; Sat, 15 May 2010 23:17:52 +0200 (CEST)
Received: from [IPv6:::1] (dave.dfki.uni-sb.de [134.96.184.220])
	by mail.dfki.de (Postfix) with ESMTP id 2C5E431161
	for <java-user@lucene.apache.org>; Sat, 15 May 2010 23:17:52 +0200 (CEST)
Message-Id: <E14EF9D8-8ECE-4001-B225-50E2BCEF3213@activemath.org>
From: Paul Libbrecht <paul@activemath.org>
To: java-user@lucene.apache.org
In-Reply-To: <469705.48901.qm@web29016.mail.ird.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v936)
Subject: Re: best way to interest two queries?
Date: Sat, 15 May 2010 23:17:51 +0200
References: <9D9D39B8-C2C7-4FA7-B567-D1B06DA46B69@activemath.org> <9A525C49-5E48-47F2-9FB1-60AF97883547@activemath.org> <55241.46827.qm@web29008.mail.ird.yahoo.com> <057D5149-84FE-4B5B-B44E-D6E2FCDAB08C@activemath.org> <469705.48901.qm@web29016.mail.ird.yahoo.com>
X-Mailer: Apple Mail (2.936)
X-Virus-Checked: Checked by ClamAV on apache.org


Le 12-mai-10 =E0 10:55, mark harwood a =E9crit :

>
>
>>> two terminology questions:
>
>>> - is multiplier in the mail mentioned there the same as boost?
>
> This factor controls how many decimal places precision is retained =20
> in the adjusted scores. Pick to low a multiplier and scores that are =20=

> only differentiated by a very small value will appear equal. Pick =20
> too high a multiplier and you start to lose the most significant =20
> parts of the score. This trade-off is summarised here for various =20
> settings of "multiplier":

sorry, had overseen. Yes, that seems realistic to me.

> - I intended to use prefix and fuzzyqueries. I believe this is =20
> contradictory to this or?
>
> You can wrap any queries with this class - the only limitation is it =20=

> hides all match info in a single byte encoded into the score which =20
> only allows for 8 bits or 8 match flags i.e. reports on max 8 =20
> clauses. You could try use > 8 bits encoded into the score but then =20=

> you lose more score precision again (see above).

I'm having an NPE with the query who's toString gives:

  QueryMatchMonitor (QueryMatchMonitor ((title-fr:segm~0.5 title-=20
phonetic-fr:SKM~0.5^0.8)) QueryMatchMonitor (((title-en:segm~0.5 title-=20=

phonetic-en:SKM~0.5^0.8))^0.95) QueryMatchMonitor (((title-de:segm~0.5 =20=

title-phonetic-de:SKM~0.5^0.8))^0.9025) QueryMatchMonitor (((title-=20
en:segm~0.5 title-phonetic-en:SKM~0.5^0.8))^0.85737497))

at

java.lang.NullPointerException
	at org.apache.lucene.search.FlagRecordingQuery=20
$FlagRecordingQueryWeight.scorer(FlagRecordingQuery.java:104)
	at org.apache.lucene.search.BooleanQuery=20
$BooleanWeight.scorer(BooleanQuery.java:297)
	at org.apache.lucene.search.FlagCombiningQuery=20
$FlagCombiningQueryWeight.scorer(FlagCombiningQuery.java:100)
	at =
org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:=20
246)
	at =
org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:=20
173)
	at org.apache.lucene.search.Searcher.search(Searcher.java:181)
	at org.apache.lucene.search.Searcher.search(Searcher.java:191)

(but note that I removed explain from my FlagCombiningQuery; what's =20
null is the delegateScorer).
Any clue?

paul=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46132-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 17 03:17:38 2010
Return-Path: <java-user-return-46132-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83631 invoked from network); 17 May 2010 03:17:38 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 May 2010 03:17:38 -0000
Received: (qmail 37360 invoked by uid 500); 17 May 2010 03:17:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37064 invoked by uid 500); 17 May 2010 03:17:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37056 invoked by uid 99); 17 May 2010 03:17:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 May 2010 03:17:32 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of bemaph@gmail.com designates 74.125.83.176 as permitted sender)
Received: from [74.125.83.176] (HELO mail-pv0-f176.google.com) (74.125.83.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 May 2010 03:17:24 +0000
Received: by pva4 with SMTP id 4so1057745pva.35
        for <java-user@lucene.apache.org>; Sun, 16 May 2010 20:17:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=UkWeYR3NpCKrR6iPO9jOFM/ej8Dx0RaRUcbZ1g1JVOY=;
        b=V+3w4AfoaFgHq720PEPS/yuQpofqFWjh3ZGId43N8cEV+UVboOj5wZjOZhMnpOSi/p
         UYjdynj4s81hMp1961sid/6U8w+tdS6m42uRq9S7TIK0E/Xw5aHmMyjgNknyFJCG5ItO
         mWhKORfsIJrMkWqTsVqsQDK5fe87RwMFxWTJc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        b=BhX5KRElUGxI8oinAqkNLnpmQqFKCe70ipRRaD8weG7W6lqH9k7s586xZLKqrNg8CC
         9tH63hWcHWDbYpjk4SvKAHwpytmuCk63qiPXAyBbHaKvVXTSN2eowU8xQKC6BoapPs8W
         9fWjAd/ECw/6gOsWfzdv+3FRY1OyPB0AFwCxc=
Received: by 10.141.23.15 with SMTP id a15mr3151952rvj.278.1274066223342; Sun, 
	16 May 2010 20:17:03 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.140.169.9 with HTTP; Sun, 16 May 2010 20:16:43 -0700 (PDT)
From: Ben Phelan <bemaph@gmail.com>
Date: Mon, 17 May 2010 13:16:43 +1000
Message-ID: <AANLkTilhfXCNdzRmYfrbavR_FcNBPhOyKuIDp6RnmBph@mail.gmail.com>
Subject: Matching term document character offsets (PyLucene 3.0.1)
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I apologise in advance if this information is clearly available
somewhere else; I've spent quite a bit of time on this so far and not
yet found it. =C2=A0I've also messed around with the API from Pylucene
(3.0.1) for many hours and not found an acceptable solution, but that
could mainly be due to chronic lack of sleep.

1)  For our open natural language corpora search project we need to be
able to get at the _character offsets_ of the matching terms in the
original documents. =C2=A0This information definitely seems to be stored
with the index but I've not yet been able to figure out how to get at
it effectively.  It would be extremely helpful if someone could please
point out how to access this from (Py)Lucene v3.0.1.

2)  If it's not possible to access the character offsets, token
positions would be a vaguely acceptable fallback but would limit the
final capabilities of our system somewhat. =C2=A0So, although token
positions are definitely not our first choice, I am a little curious
why, in the following code, the positions returned by
MultipleTermPositions don't match the term positions in the Analyzer's
token stream (if it helps, the input text documents are currently in
sgml or some derivative so there is a little bit of markup that seems
to be ignored in one tokenizer and not the other, and I can't see
where to tell the MultipleTermPositions or IndexSearcher which
Analyzer to use...).

searcher =3D IndexSearcher(indexdir, True)
analyzer =3D StandardAnalyzer(Version.LUCENE_CURRENT)
query =3D QueryParser(Version.LUCENE_CURRENT, field, analyzer).parse(querys=
tring)
terms =3D HashSet()
query.extractTerms(terms)
scoreDocs =3D searcher.search(query, 500).scoreDocs
for scoreDoc in scoreDocs:
  positions =3D MultipleTermPositions(searcher.getIndexReader(), list(terms=
))
  positions.skipTo(scoreDoc.doc)
  if positions.doc() =3D=3D scoreDoc.doc:
    doc =3D searcher.doc(scoreDoc.doc)
    fpath =3D path + doc.get('path')
    fhandle =3D open(fpath, 'r')
    text =3D fhandle.read()
    reader =3D StringReader(text)
    tokenStream =3D analyzer.tokenStream(field, reader)
#    offsetAttribute =3D tokenStream.getAttribute(OffsetAttribute.class_)
#    termAttribute =3D tokenStream.getAttribute(TermAttribute.class_)
    p =3D 0
    for i in range(positions.freq()):
      pos =3D positions.nextPosition()
      for j in range(pos - p):
        tokenStream.incrementToken()
      # do something here with the token (which should match the
search term but isn't even close...)
      p =3D pos
    positions.close()
searcher.close()

Any help with either of these problems would be greatly appreciated!

Cheers,
Ben

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46133-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 17 10:17:14 2010
Return-Path: <java-user-return-46133-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83609 invoked from network); 17 May 2010 10:17:14 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 May 2010 10:17:14 -0000
Received: (qmail 54678 invoked by uid 500); 17 May 2010 10:17:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54392 invoked by uid 500); 17 May 2010 10:17:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 33863 invoked by uid 99); 17 May 2010 10:02:50 -0000
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
From: Grant Ingersoll <gsingers@apache.org>
Content-Type: multipart/alternative; boundary=Apple-Mail-8--569400963
Subject: Fwd: [Travel Assistance] - Applications Open for ApacheCon NA 2010
Date: Mon, 17 May 2010 12:02:22 +0200
References: <032f01caf54e$c18edce0$44ac96a0$@com.au>
To: Lucene mailing list <general@lucene.apache.org>,
 solr-user@lucene.apache.org,
 java-user@lucene.apache.org,
 user@mahout.apache.org
Message-Id: <5844B5EE-39D8-400B-83E1-F54C61B8099B@apache.org>
Mime-Version: 1.0 (Apple Message framework v1078)
X-Mailer: Apple Mail (2.1078)
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-8--569400963
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=us-ascii



Begin forwarded message:

> he Travel Assistance Committee is now taking in applications for those
> wanting to attend ApacheCon North America (NA) 2010, which is taking =
place
> between the 1st and 5th November in Atlanta.
>=20
> The Travel Assistance Committee is looking for people who would like =
to be
> able to attend ApacheCon, but who need some financial support in order =
to be
> able to get there. There are limited places available, and all =
applications
> will be scored on their individual merit.
>=20
> Financial assistance is available to cover travel to the event, either =
in
> part or in full, depending on circumstances. However, the support =
available
> for those attending only the barcamp is smaller than that for people
> attending the whole event. The Travel Assistance Committee aims to =
support
> all ApacheCons, and cross-project events, and so it may be prudent for =
those
> in Asia and the EU to wait for an event closer to them.
>=20
> More information can be found on the main Apache website at
> http://www.apache.org/travel/index.html - where you will also find a =
link to
> the online application and details for submitting.
>=20
> Applications for applying for travel assistance are now being =
accepted, and
> will close on the 7th July 2010.
>=20
> Good luck to all those that will apply.
>=20
> You are welcome to tweet, blog this as appropriate.


--Apple-Mail-8--569400963--

From java-user-return-46134-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 17 11:13:25 2010
Return-Path: <java-user-return-46134-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95543 invoked from network); 17 May 2010 11:13:25 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 May 2010 11:13:25 -0000
Received: (qmail 26640 invoked by uid 500); 17 May 2010 11:13:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26022 invoked by uid 500); 17 May 2010 11:13:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26014 invoked by uid 99); 17 May 2010 11:13:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 May 2010 11:13:18 +0000
X-ASF-Spam-Status: No, hits=4.4 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of manjula53@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 May 2010 11:13:10 +0000
Received: by pwi6 with SMTP id 6so3288230pwi.35
        for <java-user@lucene.apache.org>; Mon, 17 May 2010 04:12:49 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=sdJlp7jfvXQPTDt84jtKtYHNxJmGur7lKBi05LH8DsY=;
        b=G4e/OOe1TAiLYXAqqJItnk/cta1oHUTveadnOGUz4J3bzxPz9JMtDBh6gxCuwcgjkc
         ZAmcYd0fSL/67Y7m5OxyXIFEE8LltBtJNznTtfcdHzULj1VmjfUgQozUricKakUzZuB2
         IOvZNdrfXA6y/k6mjSXixWASn4xE7nYUD1wUY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=KB8FmiNUmYHgWjcLQpD8HXRFKcEkphnqNZs5MDDLZ5g36WlCyKD/FgfVOe4vHwFxLK
         WMzXtBYKngcMyTpXyBaWv2SQTBRGZmL02KPYWust6366jePS+1sEaxE1Ak/6umvJm/up
         teg8u8AXn9W+EaYNExye1a+kjsjWqOx4OK+5E=
MIME-Version: 1.0
Received: by 10.141.105.16 with SMTP id h16mr3578502rvm.274.1274094769429; 
	Mon, 17 May 2010 04:12:49 -0700 (PDT)
Received: by 10.140.147.1 with HTTP; Mon, 17 May 2010 04:12:49 -0700 (PDT)
In-Reply-To: <AANLkTik2U4pF7mG5QwxRLKXzN5Dve79_L4n521n_WEea@mail.gmail.com>
References: <AANLkTimrzqzgZJe7bUTtjKsgBOY627K_kY--uVYoVDv9@mail.gmail.com>
	 <AANLkTik2U4pF7mG5QwxRLKXzN5Dve79_L4n521n_WEea@mail.gmail.com>
Date: Mon, 17 May 2010 16:42:49 +0530
Message-ID: <AANLkTikLCJ7r8wC3XQ2juBJAQbs7ZSDvf_DDiW7jLioP@mail.gmail.com>
Subject: Re: How to call high fre. terms using HighFreTerms class
From: manjula wijewickrema <manjula53@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd13bd2245f360486c84e41
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd13bd2245f360486c84e41
Content-Type: text/plain; charset=ISO-8859-1

hi Erick,
Thanx

On Sat, May 15, 2010 at 5:37 PM, Erick Erickson <erickerickson@gmail.com>wrote:

> It looks like a stand-alone program, so you don't call it.
> You probably want to get the source code and take a look at
> how that program works to get an idea of how to do what you want.
>
> See the instructions here for getting the source:
> http://wiki.apache.org/lucene-java/HowToContribute
>
> HTH
> Erick
>
> On Sat, May 15, 2010 at 1:49 AM, manjula wijewickrema
> <manjula53@gmail.com>wrote:
>
> > Hi,
> >
> > I am struggling with using HighFreTerms class for the purpose of find
> high
> > fre. terms in my index. My target is to get the high frequency terms in
> an
> > indexed document (single document). To do that I have added
> > org.apache.lucene.misc package into my project. I think upto that point I
> > am
> > correct. But after that I have no an idea of how to call this in my
> > coding. Although I have looked in the lucene email archive, I was unable
> to
> > find a hint regarding to call of this class. If anybody can pls. give me
> a
> > sample code for using this class (and relevent methods) in the code which
> > suit to my purpose. I appreciate your kind help.
> >
> > Thanks
> > Manjula
> >
>

--000e0cd13bd2245f360486c84e41--

From java-user-return-46135-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 17 11:23:59 2010
Return-Path: <java-user-return-46135-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98591 invoked from network); 17 May 2010 11:23:59 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 May 2010 11:23:59 -0000
Received: (qmail 40234 invoked by uid 500); 17 May 2010 11:23:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40048 invoked by uid 500); 17 May 2010 11:23:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40040 invoked by uid 99); 17 May 2010 11:23:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 May 2010 11:23:55 +0000
X-ASF-Spam-Status: No, hits=4.3 required=10.0
	tests=AWL,FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of manjula53@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 May 2010 11:23:49 +0000
Received: by pwi6 with SMTP id 6so3292948pwi.35
        for <java-user@lucene.apache.org>; Mon, 17 May 2010 04:23:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=McsjhCaQWD2zRe24My6sGk7nJxnBfJoKfrfLTIuKVB4=;
        b=L0Z8uDYM1HEn57oHC+w8893MSLKTThbsHwaglPBf5ZxudzfNOe8Bbad+PhMRkOaeHt
         upqZIkKc/EhLb6BCNdBmWzEKqAEWsuEveeRoY1CPgxxoiFxQFqdWP2iOiA4gjm8Mh+8x
         gAaEgo4+/YpvQXFtyC1LgWV5PKJ+g2r8DHw3Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=Kq6apmU4efTwOUpOc8monlonTCbrBdEUV4MW9dH6jwHZve+36P1BQFEijKl2xUO+ZB
         j78qmeGJ6fbFgc2KO6raRzqB3YTIdax2hIb76g3U38GQjv483n/31sgfApsa+cyMp3Xr
         SdVviRV3uzkAMjLHyLNTdpvUknZm+7xm4ZtGA=
MIME-Version: 1.0
Received: by 10.141.22.16 with SMTP id z16mr3589522rvi.20.1274095409015; Mon, 
	17 May 2010 04:23:29 -0700 (PDT)
Received: by 10.140.147.1 with HTTP; Mon, 17 May 2010 04:23:28 -0700 (PDT)
Date: Mon, 17 May 2010 16:53:28 +0530
Message-ID: <AANLkTinUbMIXeupct6ss6yHZliEw41h3_8eeeNVMWJ2e@mail.gmail.com>
Subject: Problem of getTermFrequencies()
From: manjula wijewickrema <manjula53@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd1855043ad5b0486c8741d

--000e0cd1855043ad5b0486c8741d
Content-Type: text/plain; charset=ISO-8859-1

Hi,

I wrote a code with a view to display the indexed terms and get their term
frequencies of a single document. Although it displys those terms in the
index, it does not give the term frequencies. Instead it displays ' frequencies
are:[I@80fa6f '. What's the reason for this. The code I have written and the
display, can be given as follows.

Code:

 *

import* org.apache.lucene.analysis.standard.StandardAnalyzer;
*

import* org.apache.lucene.document.Document;
*

import* org.apache.lucene.document.Field;
*

import* org.apache.lucene.index.IndexWriter;
*

import* org.apache.lucene.index.IndexReader;
*

import* org.apache.lucene.queryParser.ParseException;
*

import* org.apache.lucene.queryParser.QueryParser;
*

import* org.apache.lucene.search.*;
*

import* org.apache.lucene.store.Directory;
*

import* org.apache.lucene.store.RAMDirectory;
*

import* org.apache.lucene.util.Version;
*

import* org.apache.lucene.index.TermFreqVector;

*

import* java.io.BufferedReader;
*

import* java.io.FileReader;
*

import* java.io.IOException;
*

import* org.apache.lucene.analysis.StopAnalyzer;
*

import* org.apache.lucene.analysis.snowball.SnowballAnalyzer;


*

public* *class* Testing{

*

public* *static* *void* main(String[] args) *throws* IOException,
ParseException {

//StandardAnalyzer analyzer = new StandardAnalyzer(Version.LUCENE_CURRENT);

SnowballAnalyzer analyzer = *new* SnowballAnalyzer("English", StopAnalyzer.
ENGLISH_STOP_WORDS);

*try*{

Directory directory=*new* RAMDirectory();

IndexWriter w = *new* IndexWriter(directory, analyzer, *true*,

IndexWriter.MaxFieldLength.*UNLIMITED*);

Document doc = *new* Document();

String text="This is a sample codes code for testing lucene's capabilities
over lucene term frequencies";

doc.add(*new* Field("title", text, Field.Store.*YES*, Field.Index.*ANALYZED*
,Field.TermVector.*YES*));

w.addDocument(doc);

w.close();

IndexReader ir=IndexReader.open(directory);

TermFreqVector[] tfv=ir.getTermFreqVectors(0);

// for (int xy = 0; xy < tfv.length; xy++) {

String[] terms = tfv[0].getTerms();

*int*[] freqs=tfv[0].getTermFrequencies();

//System.out.println("terms are:"+tfv[xy]);

//System.out.println("length is:"+terms.length);

System.*out*.println("array terms are:"+tfv[0]);

System.*out*.println("terms are:"+terms);

System.*out*.println("frequencies are:"+freqs);

// }

 }*catch*(Exception ex){

ex.printStackTrace();

}

}

}



Display:

array terms are:{title: capabl/1, code/2, frequenc/1, lucen/2, over/1,
sampl/1, term/1, test/1}

terms are:[Ljava.lang.String;@1e13d52

frequencies are:[I@80fa6f



If some body can pls. help me to get the desired output.

Thanx,

Manjula.

--000e0cd1855043ad5b0486c8741d--

From java-user-return-46136-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 17 12:44:21 2010
Return-Path: <java-user-return-46136-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31955 invoked from network); 17 May 2010 12:44:21 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 May 2010 12:44:21 -0000
Received: (qmail 77594 invoked by uid 500); 17 May 2010 12:44:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77493 invoked by uid 500); 17 May 2010 12:44:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77166 invoked by uid 99); 17 May 2010 12:44:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 May 2010 12:44:11 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_FILL_THIS_FORM_SHORT
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of gsiasf@gmail.com designates 72.14.220.152 as permitted sender)
Received: from [72.14.220.152] (HELO fg-out-1718.google.com) (72.14.220.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 May 2010 12:44:02 +0000
Received: by fg-out-1718.google.com with SMTP id e12so234583fga.5
        for <multiple recipients>; Mon, 17 May 2010 05:43:42 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:sender:from:content-type
         :subject:date:message-id:to:mime-version:x-mailer;
        bh=TYkCR9thShLqLOOjJsrvE3fMjTW0Q/6xlJVJ7mwKzsg=;
        b=BxJp1TH+DmVqmGubh0R5lcLCk04YC44o23bAZ5jq9anrP2jebLQ27cPRjRHtnnmbBX
         b/JCY8AVWoY93TS7eZ5tl3XOJuoL7LJR3DE2m6MocTQix4TYNaEqFXs7/WyFswbPuwTw
         P21yfuPfc67tgNTCD1Z+OL/WtL7iEbIuWjbxo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=sender:from:content-type:subject:date:message-id:to:mime-version
         :x-mailer;
        b=e5VBKvep6qCBP3CAHC54QbZ8lmoJ3f0XlA1bU0DwW2IPeBbHLVMs90/5cL6aYPd0zd
         ngNmR/sKKdcBpXUFjv0STrRTNeu45bela/ScdbvgEf5ZEfsA1g0NLk54+JIamSStWgUo
         FYPzxiBAWxFBV7yPght6TlIiQZWgWG1w8jQ9c=
Received: by 10.87.63.21 with SMTP id q21mr8484289fgk.52.1274100222593;
        Mon, 17 May 2010 05:43:42 -0700 (PDT)
Received: from [11.11.11.101] ([194.213.52.155])
        by mx.google.com with ESMTPS id c28sm7510896fka.14.2010.05.17.05.43.40
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 17 May 2010 05:43:41 -0700 (PDT)
Sender: Grant Ingersoll <gsiasf@gmail.com>
From: Grant Ingersoll <gsingers@apache.org>
Content-Type: multipart/alternative; boundary=Apple-Mail-29--559723531
Subject: CFP for Lucene Revolution Conference, Boston, MA October 7 & 8 2010
Date: Mon, 17 May 2010 14:43:39 +0200
Message-Id: <6DBBBDE8-9762-405E-98AA-66873E1B8599@apache.org>
To: java-user@lucene.apache.org,
 solr-user@lucene.apache.org,
 Lucene mailing list <general@lucene.apache.org>,
 user@nutch.apache.org,
 user@tika.apache.org,
 user@mahout.apache.org,
 lucene-net-dev@lucene.apache.org
Mime-Version: 1.0 (Apple Message framework v1078)
X-Mailer: Apple Mail (2.1078)
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-29--559723531
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=utf-8

Lucene Revolution Call For Participation - Boston, Massachusetts October =
7 & 8, 2010
=20
The first US conference dedicated to Apache Lucene and Solr is coming to =
Boston, October 7 & 8, 2010. The conference is sponsored by Lucid =
Imagination with additional support from community and other commercial =
co=E2=80=90sponsors. The audience will include those experienced Solr =
and Lucene application development, along with those experienced in =
other enterprise search technologies interested becoming more familiar =
with Solr and Lucene technologies and the opportunities they present.=20

We are soliciting 45=E2=80=90minute presentations for the conference.

Key Dates:
May 12, 2010         Call For Participation Open
June 23, 2010        Call For Participation Closes
June 28, 2010        Speaker Acceptance/Rejection Notification
October 5=E2=80=906, 2010  Lucene and Solr Pre=E2=80=90conference =
Training Sessions
October 7=E2=80=908, 2010  Conference Sessions


Topics of interest include:
Lucene and Solr in the Enterprise (case studies, implementation, return =
on investment, etc.)
 =E2=80=9CHow We Did It=E2=80=9D Development Case Studies
Spatial/Geo search
 Lucene and Solr in the Cloud (Deployment cases as well as tutorials)
Scalability and Performance Tuning
Large Scale Search
Real Time Search
Data Integration/Data Management
Lucene & Solr for Mobile Applications

All accepted speakers will qualify for discounted conference admission. =
Financial assistance is available for speakers that qualify.

To submit a 45=E2=80=90minute presentation proposal, please send an =
email to cfp@lucenerevolution.org with Subject containing: <your name>, =
Topic <your session title> containing the following information in plain =
text.

If you have more than one topic proposed, send a separate email. Do not =
attach Word or other text file documents.

Return all fields completed as follows:
1.    Your full name, title, and organization=20
2.    Contact information, including your address, email, phone number=20=

3.    The name of your proposed session (keep your title simple, =
interesting, and relevant to the topic)=20
4.    A 75=E2=80=90200 word overview of your presentation; in addition =
to the topic, describe whether your
presentation is intended as a tutorial, description of an =
implementation, an theoretical/academic
discussion, etc.=20
5.    A 100=E2=80=90200=E2=80=90word speaker bio that includes prior =
conference speaking or related experience
To be considered, proposals must be received by 12 Midnight PDT =
Wednesday, June 23, 2010.

Please email any general questions regarding the conference to =
info@lucenerevolution.org. To be added to the conference mailing list, =
please email signup@lucenerevolution.org. If your organization is =
interested in sponsorship opportunities, email =
sponsor@lucenerevolution.org.

We look forward to seeing you in Boston!=

--Apple-Mail-29--559723531--

From java-user-return-46137-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 17 13:17:19 2010
Return-Path: <java-user-return-46137-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40686 invoked from network); 17 May 2010 13:17:19 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 May 2010 13:17:19 -0000
Received: (qmail 34491 invoked by uid 500); 17 May 2010 13:17:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34438 invoked by uid 500); 17 May 2010 13:17:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34430 invoked by uid 99); 17 May 2010 13:17:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 May 2010 13:17:17 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 72.14.220.159 as permitted sender)
Received: from [72.14.220.159] (HELO fg-out-1718.google.com) (72.14.220.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 May 2010 13:17:09 +0000
Received: by fg-out-1718.google.com with SMTP id e12so513954fga.5
        for <java-user@lucene.apache.org>; Mon, 17 May 2010 06:16:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=2VDsW13If7vqTPfRQIafYtvodzUFA23GWqC2OPg07xo=;
        b=GQBM2KKlqAXuRsLJ/DaIlz0oVJQoP2oDjgCU4fjTT6MK9yEmauRW59+ZxYHHNW4dt/
         y/aIugSTWAqk0GM/ZqCzE3g+LWIBVnPxlZiQXKEMs84s1l5u//RnQUT4RG8lBADG/ab8
         dvyDVj1yzEc78Z+vahucRnRUhFHr6YR7WUwRA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=VZ9orTCVFxfYZsTd2YHlPeVaCkJ2ICHJyu3JnrfeU2v5DbkIBWnBV5b0H3+Bad7KlB
         8nzq6kd1Xv8Q2x2IngjucqaQXK0sHPqH5V5L+mpEBkyNTp/KPpO7b+vWSg7YXL+4Yo6w
         6fbfCFirwIxhiIMtEyauTIQIOFBaibztPMtQg=
Received: by 10.204.8.205 with SMTP id i13mr2119bki.109.1274102208112; Mon, 17 
	May 2010 06:16:48 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.54.198 with HTTP; Mon, 17 May 2010 06:16:28 -0700 (PDT)
In-Reply-To: <AANLkTinUbMIXeupct6ss6yHZliEw41h3_8eeeNVMWJ2e@mail.gmail.com>
References: <AANLkTinUbMIXeupct6ss6yHZliEw41h3_8eeeNVMWJ2e@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Mon, 17 May 2010 14:16:28 +0100
Message-ID: <AANLkTimdaBW7WikTtLIB7noDGFrkjoMWRLpBHnR-YOnh@mail.gmail.com>
Subject: Re: Problem of getTermFrequencies()
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

terms and freqs are arrays.  Try terms[i] and freqs[i].


--
Ian.


On Mon, May 17, 2010 at 12:23 PM, manjula wijewickrema
<manjula53@gmail.com> wrote:
> Hi,
>
> I wrote a code with a view to display the indexed terms and get their ter=
m
> frequencies of a single document. Although it displys those terms in the
> index, it does not give the term frequencies. Instead it displays ' frequ=
encies
> are:[I@80fa6f '. What's the reason for this. The code I have written and =
the
> display, can be given as follows.
>
> Code:
>
> =A0*
>
> import* org.apache.lucene.analysis.standard.StandardAnalyzer;
> *
>
> import* org.apache.lucene.document.Document;
> *
>
> import* org.apache.lucene.document.Field;
> *
>
> import* org.apache.lucene.index.IndexWriter;
> *
>
> import* org.apache.lucene.index.IndexReader;
> *
>
> import* org.apache.lucene.queryParser.ParseException;
> *
>
> import* org.apache.lucene.queryParser.QueryParser;
> *
>
> import* org.apache.lucene.search.*;
> *
>
> import* org.apache.lucene.store.Directory;
> *
>
> import* org.apache.lucene.store.RAMDirectory;
> *
>
> import* org.apache.lucene.util.Version;
> *
>
> import* org.apache.lucene.index.TermFreqVector;
>
> *
>
> import* java.io.BufferedReader;
> *
>
> import* java.io.FileReader;
> *
>
> import* java.io.IOException;
> *
>
> import* org.apache.lucene.analysis.StopAnalyzer;
> *
>
> import* org.apache.lucene.analysis.snowball.SnowballAnalyzer;
>
>
> *
>
> public* *class* Testing{
>
> *
>
> public* *static* *void* main(String[] args) *throws* IOException,
> ParseException {
>
> //StandardAnalyzer analyzer =3D new StandardAnalyzer(Version.LUCENE_CURRE=
NT);
>
> SnowballAnalyzer analyzer =3D *new* SnowballAnalyzer("English", StopAnaly=
zer.
> ENGLISH_STOP_WORDS);
>
> *try*{
>
> Directory directory=3D*new* RAMDirectory();
>
> IndexWriter w =3D *new* IndexWriter(directory, analyzer, *true*,
>
> IndexWriter.MaxFieldLength.*UNLIMITED*);
>
> Document doc =3D *new* Document();
>
> String text=3D"This is a sample codes code for testing lucene's capabilit=
ies
> over lucene term frequencies";
>
> doc.add(*new* Field("title", text, Field.Store.*YES*, Field.Index.*ANALYZ=
ED*
> ,Field.TermVector.*YES*));
>
> w.addDocument(doc);
>
> w.close();
>
> IndexReader ir=3DIndexReader.open(directory);
>
> TermFreqVector[] tfv=3Dir.getTermFreqVectors(0);
>
> // for (int xy =3D 0; xy < tfv.length; xy++) {
>
> String[] terms =3D tfv[0].getTerms();
>
> *int*[] freqs=3Dtfv[0].getTermFrequencies();
>
> //System.out.println("terms are:"+tfv[xy]);
>
> //System.out.println("length is:"+terms.length);
>
> System.*out*.println("array terms are:"+tfv[0]);
>
> System.*out*.println("terms are:"+terms);
>
> System.*out*.println("frequencies are:"+freqs);
>
> // }
>
> =A0}*catch*(Exception ex){
>
> ex.printStackTrace();
>
> }
>
> }
>
> }
>
>
>
> Display:
>
> array terms are:{title: capabl/1, code/2, frequenc/1, lucen/2, over/1,
> sampl/1, term/1, test/1}
>
> terms are:[Ljava.lang.String;@1e13d52
>
> frequencies are:[I@80fa6f
>
>
>
> If some body can pls. help me to get the desired output.
>
> Thanx,
>
> Manjula.
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46138-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 17 13:29:31 2010
Return-Path: <java-user-return-46138-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45129 invoked from network); 17 May 2010 13:29:31 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 May 2010 13:29:31 -0000
Received: (qmail 55908 invoked by uid 500); 17 May 2010 13:29:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55827 invoked by uid 500); 17 May 2010 13:29:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55819 invoked by uid 99); 17 May 2010 13:29:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 May 2010 13:29:28 +0000
X-ASF-Spam-Status: No, hits=4.3 required=10.0
	tests=AWL,FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of manjula53@gmail.com designates 209.85.212.176 as permitted sender)
Received: from [209.85.212.176] (HELO mail-px0-f176.google.com) (209.85.212.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 May 2010 13:29:22 +0000
Received: by pxi10 with SMTP id 10so3349821pxi.35
        for <java-user@lucene.apache.org>; Mon, 17 May 2010 06:29:02 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=C+T+LEhtIwro3aMDOQqzQsDyiK4ajcmroxao22MePGk=;
        b=Vitep68ez49nDpwdWFvQnibTp5iBv40CfSUxtSbrnTqGZ+NttA/EGvj/fGmtI89Tlq
         /iknAWShKfI+6wNrn5lUoZiD8dfTOu3xBKsy7u90Iijp3Fqz0H6D2fv9nENfRYA9xLpH
         noIYE0tcXb6UHG1loCwlaLxmDmXa/DuOy+ioQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=iK4wz9cHUJloACdd2Ws/ypAk2/LkgAPzr6dVvB9Qm176INK3e9QrzV+zssJlVOB86s
         s9ckHXF/uNZwmsVV5P9ZHYYleVsFaRwE1QvlCfkB1Chl26KRIn/D4f2cKbo8QxPtzyET
         F9Hl1XrQElTqXRwW8GNTkXNNZUI2sriFE4F68=
MIME-Version: 1.0
Received: by 10.141.187.14 with SMTP id o14mr3695948rvp.244.1274102942117; 
	Mon, 17 May 2010 06:29:02 -0700 (PDT)
Received: by 10.140.147.1 with HTTP; Mon, 17 May 2010 06:29:02 -0700 (PDT)
In-Reply-To: <AANLkTimdaBW7WikTtLIB7noDGFrkjoMWRLpBHnR-YOnh@mail.gmail.com>
References: <AANLkTinUbMIXeupct6ss6yHZliEw41h3_8eeeNVMWJ2e@mail.gmail.com>
	 <AANLkTimdaBW7WikTtLIB7noDGFrkjoMWRLpBHnR-YOnh@mail.gmail.com>
Date: Mon, 17 May 2010 18:59:02 +0530
Message-ID: <AANLkTik4d8pabSb3JVBpMrZ51rMKkaQkfC5Ss88Sltfr@mail.gmail.com>
Subject: Re: Problem of getTermFrequencies()
From: manjula wijewickrema <manjula53@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd1ad1c45b05c0486ca350d

--000e0cd1ad1c45b05c0486ca350d
Content-Type: text/plain; charset=ISO-8859-1

Dear Ian,

I changed it as you said and now it is working nicely. Thanks a lot for your
kind help.

Manjula

On Mon, May 17, 2010 at 6:46 PM, Ian Lea <ian.lea@gmail.com> wrote:

> terms and freqs are arrays.  Try terms[i] and freqs[i].
>
>
> --
> Ian.
>
>
> On Mon, May 17, 2010 at 12:23 PM, manjula wijewickrema
> <manjula53@gmail.com> wrote:
> > Hi,
> >
> > I wrote a code with a view to display the indexed terms and get their
> term
> > frequencies of a single document. Although it displys those terms in the
> > index, it does not give the term frequencies. Instead it displays '
> frequencies
> > are:[I@80fa6f '. What's the reason for this. The code I have written and
> the
> > display, can be given as follows.
> >
> > Code:
> >
> >  *
> >
> > import* org.apache.lucene.analysis.standard.StandardAnalyzer;
> > *
> >
> > import* org.apache.lucene.document.Document;
> > *
> >
> > import* org.apache.lucene.document.Field;
> > *
> >
> > import* org.apache.lucene.index.IndexWriter;
> > *
> >
> > import* org.apache.lucene.index.IndexReader;
> > *
> >
> > import* org.apache.lucene.queryParser.ParseException;
> > *
> >
> > import* org.apache.lucene.queryParser.QueryParser;
> > *
> >
> > import* org.apache.lucene.search.*;
> > *
> >
> > import* org.apache.lucene.store.Directory;
> > *
> >
> > import* org.apache.lucene.store.RAMDirectory;
> > *
> >
> > import* org.apache.lucene.util.Version;
> > *
> >
> > import* org.apache.lucene.index.TermFreqVector;
> >
> > *
> >
> > import* java.io.BufferedReader;
> > *
> >
> > import* java.io.FileReader;
> > *
> >
> > import* java.io.IOException;
> > *
> >
> > import* org.apache.lucene.analysis.StopAnalyzer;
> > *
> >
> > import* org.apache.lucene.analysis.snowball.SnowballAnalyzer;
> >
> >
> > *
> >
> > public* *class* Testing{
> >
> > *
> >
> > public* *static* *void* main(String[] args) *throws* IOException,
> > ParseException {
> >
> > //StandardAnalyzer analyzer = new
> StandardAnalyzer(Version.LUCENE_CURRENT);
> >
> > SnowballAnalyzer analyzer = *new* SnowballAnalyzer("English",
> StopAnalyzer.
> > ENGLISH_STOP_WORDS);
> >
> > *try*{
> >
> > Directory directory=*new* RAMDirectory();
> >
> > IndexWriter w = *new* IndexWriter(directory, analyzer, *true*,
> >
> > IndexWriter.MaxFieldLength.*UNLIMITED*);
> >
> > Document doc = *new* Document();
> >
> > String text="This is a sample codes code for testing lucene's
> capabilities
> > over lucene term frequencies";
> >
> > doc.add(*new* Field("title", text, Field.Store.*YES*,
> Field.Index.*ANALYZED*
> > ,Field.TermVector.*YES*));
> >
> > w.addDocument(doc);
> >
> > w.close();
> >
> > IndexReader ir=IndexReader.open(directory);
> >
> > TermFreqVector[] tfv=ir.getTermFreqVectors(0);
> >
> > // for (int xy = 0; xy < tfv.length; xy++) {
> >
> > String[] terms = tfv[0].getTerms();
> >
> > *int*[] freqs=tfv[0].getTermFrequencies();
> >
> > //System.out.println("terms are:"+tfv[xy]);
> >
> > //System.out.println("length is:"+terms.length);
> >
> > System.*out*.println("array terms are:"+tfv[0]);
> >
> > System.*out*.println("terms are:"+terms);
> >
> > System.*out*.println("frequencies are:"+freqs);
> >
> > // }
> >
> >  }*catch*(Exception ex){
> >
> > ex.printStackTrace();
> >
> > }
> >
> > }
> >
> > }
> >
> >
> >
> > Display:
> >
> > array terms are:{title: capabl/1, code/2, frequenc/1, lucen/2, over/1,
> > sampl/1, term/1, test/1}
> >
> > terms are:[Ljava.lang.String;@1e13d52
> >
> > frequencies are:[I@80fa6f
> >
> >
> >
> > If some body can pls. help me to get the desired output.
> >
> > Thanx,
> >
> > Manjula.
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd1ad1c45b05c0486ca350d--

From java-user-return-46139-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 17 15:04:13 2010
Return-Path: <java-user-return-46139-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88245 invoked from network); 17 May 2010 15:04:13 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 May 2010 15:04:13 -0000
Received: (qmail 73299 invoked by uid 500); 17 May 2010 15:04:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73144 invoked by uid 500); 17 May 2010 15:04:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73136 invoked by uid 99); 17 May 2010 15:04:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 May 2010 15:04:10 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of srbh.grwl@gmail.com designates 209.85.212.176 as permitted sender)
Received: from [209.85.212.176] (HELO mail-px0-f176.google.com) (209.85.212.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 May 2010 15:04:03 +0000
Received: by pxi10 with SMTP id 10so3409231pxi.35
        for <java-user@lucene.apache.org>; Mon, 17 May 2010 08:03:38 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=QXAYyEZd+nH0A4KHZhMbhsMAFfDfv63mHsMVKBGjesk=;
        b=xnl2PxemqiiB8P+CtTJi3vy3D4w7gQ74DgIkH3GL1Hsnj7obojw9LSJCM3Eo3wbZJe
         6gLoN8YMe0tG3+Uf8AICJ4Vf1MNdt1GcBelMFXUnyxyhA+ZVS8dL/gUUSreb/XYCQWn2
         JP2+VLMObDRg6p/tc/13uUOfo8+6mJZYKWgzA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=wJBvf1xTY+V8mwEEfupZ9q0IXq8YxNsL3RErFLZ09wO7ik309f5Hy8k0NXOTMal2VB
         xcqiVtVZcvE2F/+IeVhvgRVUF8Z5+Xiw01uXP/ao9eDnPP7spXbHhUoG8tzib4jF4vAc
         u/tLcETH0uUr6QmtDoSIIKoar+o35CeuyjSkU=
MIME-Version: 1.0
Received: by 10.142.250.23 with SMTP id x23mr3778876wfh.214.1274106862994; 
	Mon, 17 May 2010 07:34:22 -0700 (PDT)
Received: by 10.143.163.6 with HTTP; Mon, 17 May 2010 07:34:22 -0700 (PDT)
Date: Mon, 17 May 2010 20:04:22 +0530
Message-ID: <AANLkTilyqQi5suYRsQfdneeRpizQc5OAdCww-erKv7N5@mail.gmail.com>
Subject: Storing The content
From: Saurabh Agarwal <srbh.grwl@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636ed6833f9859b0486cb1eea
X-Virus-Checked: Checked by ClamAV on apache.org

--001636ed6833f9859b0486cb1eea
Content-Type: text/plain; charset=ISO-8859-1

Hi,
if I want to store the Content field through the constructor
Field(string,Reader). Is there any possible way of doing it??


Regards
Saurabh Agarwal

--001636ed6833f9859b0486cb1eea--

From java-user-return-46140-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 17 15:08:49 2010
Return-Path: <java-user-return-46140-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90152 invoked from network); 17 May 2010 15:08:49 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 May 2010 15:08:49 -0000
Received: (qmail 79996 invoked by uid 500); 17 May 2010 15:08:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79969 invoked by uid 500); 17 May 2010 15:08:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79961 invoked by uid 99); 17 May 2010 15:08:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 May 2010 15:08:47 +0000
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=AWL,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 May 2010 15:08:41 +0000
Received: by vws16 with SMTP id 16so229643vws.35
        for <java-user@lucene.apache.org>; Mon, 17 May 2010 08:08:20 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=8sIRKCDsMrd2xHNSbI2lVszENNPEPXzKaBbR5M36fqI=;
        b=G8lhXsaN0Ac5/1Xn/wMq68ZR++6u355udZFwKvk08IhtjbSIQW1E/EkFskYoV403K8
         DvOwDCRGiRbQHEF5/Wv5ANSbbdiOpgyDZxnpxl1neFk/BmTzRvKhKMnj00am26q2kdsO
         Yt/phavnHKKwtN/dtMTkoBQLUBdIUdjf43XvQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=SYH3RZ/SAXgsf2bXSkWJL25Wtn0hnoTbyn8uEgo4DA9SwrxYlObOfAOYKg+IJk40BG
         5R+HYGiNwgjmZh7eAduV3upO1zWL6rOZVy+pi3kQUumEp6IldE5NMDe4BOYKkXsv7v24
         xRoSfRFa53hswkLx5M16QyeDPIJenAeyz+w9Y=
Received: by 10.220.123.95 with SMTP id o31mr2609829vcr.23.1274108900197; Mon, 
	17 May 2010 08:08:20 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.220.80.149 with HTTP; Mon, 17 May 2010 08:08:00 -0700 (PDT)
In-Reply-To: <AANLkTilyqQi5suYRsQfdneeRpizQc5OAdCww-erKv7N5@mail.gmail.com>
References: <AANLkTilyqQi5suYRsQfdneeRpizQc5OAdCww-erKv7N5@mail.gmail.com>
From: Anshum <anshumg@gmail.com>
Date: Mon, 17 May 2010 20:38:00 +0530
Message-ID: <AANLkTikogjDZGsyc6omwaWsA5uNqvgkQ8ccgjnNd8taR@mail.gmail.com>
Subject: Re: Storing The content
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636cd72e566c5900486cb983a

--001636cd72e566c5900486cb983a
Content-Type: text/plain; charset=ISO-8859-1

Hi Saurabh,
I don't think there's a way to do that? Why not use other constructs?

--
Anshum Gupta
http://ai-cafe.blogspot.com

The facts expressed here belong to everybody, the opinions to me. The
distinction is yours to draw............


On Mon, May 17, 2010 at 8:04 PM, Saurabh Agarwal <srbh.grwl@gmail.com>wrote:

> Hi,
> if I want to store the Content field through the constructor
> Field(string,Reader). Is there any possible way of doing it??
>
>
> Regards
> Saurabh Agarwal
>

--001636cd72e566c5900486cb983a--

From java-user-return-46141-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 17 15:28:02 2010
Return-Path: <java-user-return-46141-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94390 invoked from network); 17 May 2010 15:28:02 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 May 2010 15:28:02 -0000
Received: (qmail 15058 invoked by uid 500); 17 May 2010 15:28:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15014 invoked by uid 500); 17 May 2010 15:27:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15006 invoked by uid 99); 17 May 2010 15:27:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 May 2010 15:27:59 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 May 2010 15:27:52 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 8B143D36005
	for <java-user@lucene.apache.org>; Mon, 17 May 2010 17:27:31 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id uFcNy2xrX9sk for <java-user@lucene.apache.org>;
	Mon, 17 May 2010 17:27:20 +0200 (CEST)
Received: from VEGA (WDC-MARE.marum.de [134.102.249.74])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id E215CD36003
	for <java-user@lucene.apache.org>; Mon, 17 May 2010 17:27:19 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <AANLkTilyqQi5suYRsQfdneeRpizQc5OAdCww-erKv7N5@mail.gmail.com>
In-Reply-To: <AANLkTilyqQi5suYRsQfdneeRpizQc5OAdCww-erKv7N5@mail.gmail.com>
Subject: RE: Storing The content
Date: Mon, 17 May 2010 17:27:52 +0200
Message-ID: <00a001caf5d5$84ec7a90$8ec56fb0$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQJmTlFJipYMtUa140n+7ydW4Q1HopEfDjtQ
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

No ist not possible, as For storing+indexing the content must be read twice,
which is not possible with Reader.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Saurabh Agarwal [mailto:srbh.grwl@gmail.com]
> Sent: Monday, May 17, 2010 4:34 PM
> To: java-user@lucene.apache.org
> Subject: Storing The content
> 
> Hi,
> if I want to store the Content field through the constructor
> Field(string,Reader). Is there any possible way of doing it??
> 
> 
> Regards
> Saurabh Agarwal


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46142-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 17 16:36:08 2010
Return-Path: <java-user-return-46142-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12977 invoked from network); 17 May 2010 16:36:07 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 May 2010 16:36:07 -0000
Received: (qmail 71344 invoked by uid 500); 17 May 2010 16:36:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71309 invoked by uid 500); 17 May 2010 16:36:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71301 invoked by uid 99); 17 May 2010 16:36:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 May 2010 16:36:05 +0000
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=AWL,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of srbh.grwl@gmail.com designates 209.85.222.187 as permitted sender)
Received: from [209.85.222.187] (HELO mail-pz0-f187.google.com) (209.85.222.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 May 2010 16:36:00 +0000
Received: by pzk17 with SMTP id 17so2381423pzk.5
        for <java-user@lucene.apache.org>; Mon, 17 May 2010 09:35:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=ySTHIq2ABgivFNjtY8pb3kYIyfNtoFoj4pd0l73MBII=;
        b=SpEq2CuokeTXx2jPjcz5A09svToNFZAuVGrPmrG9NUhwqp1Ycdb9oxOZ0+LW5ByoBU
         j2OKRZY3E8MRLV5sqi3BLZ5/Fgf2n1170WpLujaOlylbS0ffU0wrv1Lbxa6pBrx2bJFO
         C2AEa7iLwBZ8mYq9udFSnTsOND2xP8I9dqUhI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=BoQkwiD7CMcj+BvIN6Tm26ctAyx6B6feXV9Ct1zGnM12w/0u0ZPj5augOx7HGc7qLE
         5uEiRO5t0upg88lzIjcW3VMLMuDmkWk2jGqaUpnXKM7DN/5CIA07wSpCbleTAtCOm7qf
         lQvfV1eti2OCfMBA36+l0cULWHnLeDCKf00eM=
MIME-Version: 1.0
Received: by 10.142.6.31 with SMTP id 31mr4117701wff.11.1274114139758; Mon, 17 
	May 2010 09:35:39 -0700 (PDT)
Received: by 10.143.163.6 with HTTP; Mon, 17 May 2010 09:35:39 -0700 (PDT)
In-Reply-To: <00a001caf5d5$84ec7a90$8ec56fb0$@thetaphi.de>
References: <AANLkTilyqQi5suYRsQfdneeRpizQc5OAdCww-erKv7N5@mail.gmail.com>
	 <00a001caf5d5$84ec7a90$8ec56fb0$@thetaphi.de>
Date: Mon, 17 May 2010 22:05:39 +0530
Message-ID: <AANLkTimKjLuU5JA5kheJiOnKDB2Vwmge60fdMPB3cnf-@mail.gmail.com>
Subject: Re: Storing The content
From: Saurabh Agarwal <srbh.grwl@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00504502bc64b422ff0486ccd0dd

--00504502bc64b422ff0486ccd0dd
Content-Type: text/plain; charset=ISO-8859-1

ok thanks :)

Saurabh Agarwal


On Mon, May 17, 2010 at 8:57 PM, Uwe Schindler <uwe@thetaphi.de> wrote:

> No ist not possible, as For storing+indexing the content must be read
> twice,
> which is not possible with Reader.
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
>
> > -----Original Message-----
> > From: Saurabh Agarwal [mailto:srbh.grwl@gmail.com]
> > Sent: Monday, May 17, 2010 4:34 PM
> > To: java-user@lucene.apache.org
> > Subject: Storing The content
> >
> > Hi,
> > if I want to store the Content field through the constructor
> > Field(string,Reader). Is there any possible way of doing it??
> >
> >
> > Regards
> > Saurabh Agarwal
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00504502bc64b422ff0486ccd0dd--

From java-user-return-46143-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 17 16:50:07 2010
Return-Path: <java-user-return-46143-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15837 invoked from network); 17 May 2010 16:50:07 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 May 2010 16:50:07 -0000
Received: (qmail 4029 invoked by uid 500); 17 May 2010 16:50:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3980 invoked by uid 500); 17 May 2010 16:50:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3971 invoked by uid 99); 17 May 2010 16:50:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 May 2010 16:50:05 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=AWL,FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gsiasf@gmail.com designates 72.14.220.156 as permitted sender)
Received: from [72.14.220.156] (HELO fg-out-1718.google.com) (72.14.220.156)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 May 2010 16:49:57 +0000
Received: by fg-out-1718.google.com with SMTP id e12so344909fga.5
        for <java-user@lucene.apache.org>; Mon, 17 May 2010 09:49:36 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:sender:content-type
         :mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        bh=p60jRIAmKOxeu1idcMRSgT+YRqHGgXq1pJe5zwCeLiY=;
        b=GRlWxHU1HV5xlBQZ+Xa1Dj/N6kZ6583jmRkz/fpp12WyfYYZjPZ06zfb3OGRWhP5Cf
         AaSMna0g5rDGeY+BnWMSJ53FFNL2mswIaRWwJaJFnRlGLSgQtPgfrH+C4yYMBS6pxEYC
         eI3TjTy4HFnEgYe1G3jlTb20Pj5wUitHz3enA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=sender:content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        b=UC0tP8jH8QOZ5/4PMGY13dQaqrBkkSrOIHrjdPtwqStKRRwDL3LXJuAY+rK9HZ5EP6
         acehzlnbIJ+lKw8z+K6liYiPeKDOPY/pwD6euCGBD+UXX1IFF+pds/F/kkDc7OWIR2IU
         xTmf09rKxWAy/QgmAPCVpvrF+hNr9U3FJgwbA=
Received: by 10.87.71.21 with SMTP id y21mr8874567fgk.69.1274114976016;
        Mon, 17 May 2010 09:49:36 -0700 (PDT)
Received: from [11.11.11.101] ([194.213.52.155])
        by mx.google.com with ESMTPS id 31sm7670553fkt.19.2010.05.17.09.49.34
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 17 May 2010 09:49:35 -0700 (PDT)
Sender: Grant Ingersoll <gsiasf@gmail.com>
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1078)
Subject: Re: Problem of getTermFrequencies()
From: Grant Ingersoll <gsingers@apache.org>
In-Reply-To: <AANLkTimdaBW7WikTtLIB7noDGFrkjoMWRLpBHnR-YOnh@mail.gmail.com>
Date: Mon, 17 May 2010 18:49:33 +0200
Content-Transfer-Encoding: quoted-printable
Message-Id: <C43520E5-AD80-45D2-8301-2958839829BC@apache.org>
References: <AANLkTinUbMIXeupct6ss6yHZliEw41h3_8eeeNVMWJ2e@mail.gmail.com> <AANLkTimdaBW7WikTtLIB7noDGFrkjoMWRLpBHnR-YOnh@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1078)

Note, depending on your downstream use, you may consider using a =
TermVectorMapper that allows you to construct your own data structures =
as needed.

-Grant

On May 17, 2010, at 3:16 PM, Ian Lea wrote:

> terms and freqs are arrays.  Try terms[i] and freqs[i].
>=20
>=20
> --
> Ian.
>=20
>=20
> On Mon, May 17, 2010 at 12:23 PM, manjula wijewickrema
> <manjula53@gmail.com> wrote:
>> Hi,
>>=20
>> I wrote a code with a view to display the indexed terms and get their =
term
>> frequencies of a single document. Although it displys those terms in =
the
>> index, it does not give the term frequencies. Instead it displays ' =
frequencies
>> are:[I@80fa6f '. What's the reason for this. The code I have written =
and the
>> display, can be given as follows.
>>=20
>> Code:
>>=20
>>  *
>>=20
>> import* org.apache.lucene.analysis.standard.StandardAnalyzer;
>> *
>>=20
>> import* org.apache.lucene.document.Document;
>> *
>>=20
>> import* org.apache.lucene.document.Field;
>> *
>>=20
>> import* org.apache.lucene.index.IndexWriter;
>> *
>>=20
>> import* org.apache.lucene.index.IndexReader;
>> *
>>=20
>> import* org.apache.lucene.queryParser.ParseException;
>> *
>>=20
>> import* org.apache.lucene.queryParser.QueryParser;
>> *
>>=20
>> import* org.apache.lucene.search.*;
>> *
>>=20
>> import* org.apache.lucene.store.Directory;
>> *
>>=20
>> import* org.apache.lucene.store.RAMDirectory;
>> *
>>=20
>> import* org.apache.lucene.util.Version;
>> *
>>=20
>> import* org.apache.lucene.index.TermFreqVector;
>>=20
>> *
>>=20
>> import* java.io.BufferedReader;
>> *
>>=20
>> import* java.io.FileReader;
>> *
>>=20
>> import* java.io.IOException;
>> *
>>=20
>> import* org.apache.lucene.analysis.StopAnalyzer;
>> *
>>=20
>> import* org.apache.lucene.analysis.snowball.SnowballAnalyzer;
>>=20
>>=20
>> *
>>=20
>> public* *class* Testing{
>>=20
>> *
>>=20
>> public* *static* *void* main(String[] args) *throws* IOException,
>> ParseException {
>>=20
>> //StandardAnalyzer analyzer =3D new =
StandardAnalyzer(Version.LUCENE_CURRENT);
>>=20
>> SnowballAnalyzer analyzer =3D *new* SnowballAnalyzer("English", =
StopAnalyzer.
>> ENGLISH_STOP_WORDS);
>>=20
>> *try*{
>>=20
>> Directory directory=3D*new* RAMDirectory();
>>=20
>> IndexWriter w =3D *new* IndexWriter(directory, analyzer, *true*,
>>=20
>> IndexWriter.MaxFieldLength.*UNLIMITED*);
>>=20
>> Document doc =3D *new* Document();
>>=20
>> String text=3D"This is a sample codes code for testing lucene's =
capabilities
>> over lucene term frequencies";
>>=20
>> doc.add(*new* Field("title", text, Field.Store.*YES*, =
Field.Index.*ANALYZED*
>> ,Field.TermVector.*YES*));
>>=20
>> w.addDocument(doc);
>>=20
>> w.close();
>>=20
>> IndexReader ir=3DIndexReader.open(directory);
>>=20
>> TermFreqVector[] tfv=3Dir.getTermFreqVectors(0);
>>=20
>> // for (int xy =3D 0; xy < tfv.length; xy++) {
>>=20
>> String[] terms =3D tfv[0].getTerms();
>>=20
>> *int*[] freqs=3Dtfv[0].getTermFrequencies();
>>=20
>> //System.out.println("terms are:"+tfv[xy]);
>>=20
>> //System.out.println("length is:"+terms.length);
>>=20
>> System.*out*.println("array terms are:"+tfv[0]);
>>=20
>> System.*out*.println("terms are:"+terms);
>>=20
>> System.*out*.println("frequencies are:"+freqs);
>>=20
>> // }
>>=20
>>  }*catch*(Exception ex){
>>=20
>> ex.printStackTrace();
>>=20
>> }
>>=20
>> }
>>=20
>> }
>>=20
>>=20
>>=20
>> Display:
>>=20
>> array terms are:{title: capabl/1, code/2, frequenc/1, lucen/2, =
over/1,
>> sampl/1, term/1, test/1}
>>=20
>> terms are:[Ljava.lang.String;@1e13d52
>>=20
>> frequencies are:[I@80fa6f
>>=20
>>=20
>>=20
>> If some body can pls. help me to get the desired output.
>>=20
>> Thanx,
>>=20
>> Manjula.
>>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46144-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 17 20:39:30 2010
Return-Path: <java-user-return-46144-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86352 invoked from network); 17 May 2010 20:39:29 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 May 2010 20:39:29 -0000
Received: (qmail 22418 invoked by uid 500); 17 May 2010 20:39:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22276 invoked by uid 500); 17 May 2010 20:39:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22268 invoked by uid 99); 17 May 2010 20:39:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 May 2010 20:39:26 +0000
X-ASF-Spam-Status: No, hits=-2.4 required=10.0
	tests=AWL,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of siraj@jobdiva.com designates 64.18.2.16 as permitted sender)
Received: from [64.18.2.16] (HELO exprod7og119.obsmtp.com) (64.18.2.16)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 17 May 2010 20:39:18 +0000
Received: from source ([64.147.106.2]) (using TLSv1) by exprod7ob119.postini.com ([64.18.6.12]) with SMTP
	ID DSNKS/GpX2DK0jDA63uNgnaR9GknGZ7jwWRv@postini.com; Mon, 17 May 2010 13:38:58 PDT
Received: from [10.10.1.80] (12.111.23.142) by mail.jobdiva.com (10.10.30.148)
 with Microsoft SMTP Server (TLS) id 8.1.436.0; Mon, 17 May 2010 16:40:44
 -0400
Message-ID: <4BF1A940.3070105@jobdiva.com>
Date: Mon, 17 May 2010 16:38:24 -0400
From: Siraj Haider <siraj@jobdiva.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.1.8) Gecko/20100227 Thunderbird/3.0.3
MIME-Version: 1.0
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: Reverse Searching
Content-Type: text/plain; charset="ISO-8859-1"; format=flowed
Content-Transfer-Encoding: 7bit

Hello there,
In oracle text search there is a feature to reverse search using 
ctxrule.  What it does is, you create an index (ctxrule) on a column 
having your search criteria(s) and then throw a document on it and it 
tells you which criteria(s) it satisfies.  Is there something in Lucene 
that does that or there are any plans to do that?

thanks
-siraj

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46145-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 17 21:01:27 2010
Return-Path: <java-user-return-46145-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93058 invoked from network); 17 May 2010 21:01:26 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 May 2010 21:01:26 -0000
Received: (qmail 54697 invoked by uid 500); 17 May 2010 21:01:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54659 invoked by uid 500); 17 May 2010 21:01:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54651 invoked by uid 99); 17 May 2010 21:01:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 May 2010 21:01:24 +0000
X-ASF-Spam-Status: No, hits=-0.3 required=10.0
	tests=AWL,FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of kimchy@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 May 2010 21:01:18 +0000
Received: by fxm9 with SMTP id 9so158395fxm.35
        for <java-user@lucene.apache.org>; Mon, 17 May 2010 14:00:57 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:from:date
         :message-id:subject:to:content-type;
        bh=UXXFFenvoMjRmryyzzjztE8soMv/lMqmA318xfSNNbI=;
        b=Gav9t6Pl5BzGXk2gBSWD73NTRk6eh1l8ZI5LW4nyGjc66X/SYo/Ct+II4lLDzn6U3E
         idnHp00egHLYJVHj+AkzzWmw/I+hevxWLBdvpCXPsb0slKHRznHhR6QI1GOx261gRVQo
         4Yab2B4riHQHDwk/Q7u/OOkyqm/W2oV4Fy4eI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=pwtu2CUyMCs1Ou7yFPgSimIQ4dbiG7w2+KZZxFS2ikFu8jZ9D9PdMp4FEsisTslH0Y
         P9GdMmaBlEzjrAJPOsV6CVZWLlvxz2JtroR+sRNPs6sIcFuNdj0xPg1t9ukr+LYWYvxE
         AAiMaMLO51JsyJUPjcsqEzGB+iqL7InzTFTkw=
Received: by 10.204.13.65 with SMTP id b1mr17433bka.188.1274130056849; Mon, 17 
	May 2010 14:00:56 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.58.131 with HTTP; Mon, 17 May 2010 14:00:36 -0700 (PDT)
From: Shay Banon <kimchy@gmail.com>
Date: Tue, 18 May 2010 00:00:36 +0300
Message-ID: <AANLkTiny514aZfpLLVHElNrO2uYo26_vawhHJJsakAqN@mail.gmail.com>
Subject: NRT and Caching based on IndexReader
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00151750ddbe6faa410486d0851a

--00151750ddbe6faa410486d0851a
Content-Type: text/plain; charset=ISO-8859-1

Hi,

   I wanted to verify if my understanding is correct. Assuming that I use
NRT, and refresh, say, every 1 second, caching based on IndexReader, such is
what is used in the CachingWrapperFilter is basically useless, since, even
if there is an open sub reader, it gets clones meaning there is a new
instance for it, meaning the cache will explode with readers (it will get
cleaned, but still, not as good as usual open reader, commit writer, reopen
reader).

cheers,
shay.banon

--00151750ddbe6faa410486d0851a--

From java-user-return-46146-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 17 21:22:22 2010
Return-Path: <java-user-return-46146-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 971 invoked from network); 17 May 2010 21:22:22 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 May 2010 21:22:22 -0000
Received: (qmail 83216 invoked by uid 500); 17 May 2010 21:22:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83129 invoked by uid 500); 17 May 2010 21:22:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83121 invoked by uid 99); 17 May 2010 21:22:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 May 2010 21:22:20 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.230.18.92] (HELO smtp2.syr.edu) (128.230.18.92)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 May 2010 21:22:10 +0000
Received: from suex07-hub-01.ad.syr.edu (suex07-hub-01.ad.syr.edu [128.230.108.195])
	by smtp2.syr.edu (8.14.3/8.14.3) with ESMTP id o4HLLmZO002750
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Mon, 17 May 2010 17:21:49 -0400
Received: from suex07-mbx-03.ad.syr.edu ([128.230.108.133]) by
 suex07-hub-01.ad.syr.edu ([2002:80e6:6cc3::80e6:6cc3]) with mapi; Mon, 17 May
 2010 17:21:49 -0400
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Mon, 17 May 2010 17:21:46 -0400
Subject: RE: Reverse Searching
Thread-Topic: Reverse Searching
Thread-Index: Acr2ARBDLu6CYJo8SoyUefqxH6C2vgABIAhg
Message-ID: <2D127F11DC79714E9B6A43AC9458147F3DCD98E4@suex07-mbx-03.ad.syr.edu>
References: <4BF1A940.3070105@jobdiva.com>
In-Reply-To: <4BF1A940.3070105@jobdiva.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=1.12.8161:2.4.5,1.2.40,4.0.166
 definitions=2010-05-17_04:2010-02-06,2010-05-17,2010-05-17 signatures=0
X-Proofpoint-Spam-Reason: safe
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Siraj,

Lucene's MemoryIndex can be used to serve this purpose.

>From <http://lucene.apache.org/java/3_0_1/api/contrib-memory/org/apache/luc=
ene/index/memory/MemoryIndex.html>:

	[T]his class targets fulltext search of huge numbers
	of queries over comparatively small transient realtime
	data (prospective search).=20

MemoryIndex can only hold one document at a time.

See also Lucene's InstantiatedIndex, which can hold more than one document =
at a time:

<http://lucene.apache.org/java/3_0_1/api/contrib-instantiated/org/apache/lu=
cene/store/instantiated/InstantiatedIndex.html>

Steve

On 05/17/2010 at 4:38 PM, Siraj Haider wrote:
> Hello there,
> In oracle text search there is a feature to reverse search using
> ctxrule.  What it does is, you create an index (ctxrule) on a column
> having your search criteria(s) and then throw a document on it and it
> tells you which criteria(s) it satisfies.  Is there something in Lucene
> that does that or there are any plans to do that?
>=20
> thanks
> -siraj

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46147-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 17 21:31:02 2010
Return-Path: <java-user-return-46147-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4094 invoked from network); 17 May 2010 21:31:02 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 May 2010 21:31:02 -0000
Received: (qmail 95210 invoked by uid 500); 17 May 2010 21:31:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95168 invoked by uid 500); 17 May 2010 21:31:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95160 invoked by uid 99); 17 May 2010 21:31:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 May 2010 21:30:59 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of yseeley@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 May 2010 21:30:53 +0000
Received: by wyb40 with SMTP id 40so82647wyb.35
        for <java-user@lucene.apache.org>; Mon, 17 May 2010 14:30:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:sender:reply-to:received
         :in-reply-to:references:date:x-google-sender-auth:message-id:subject
         :from:to:content-type:content-transfer-encoding;
        bh=7QOZvEjXsY6UUk1LNiC66YIiwG/Qp27/fzlzpRgznmk=;
        b=u5FFiPJmQ8QSIABFO8aom+mi5hNkEJf0hU8qxZU8Yj6nw9FooWzjlFVMD51P8NIubx
         Xj21NKNpk7fqoyyG9bmRJdQvTRoJspeYyhy1ksTbunYJ3Oa5SsTLMpt0S3oYiWQBH1E0
         ZwVPaEOk+t3avPBZwzulbhwo4ZI4cvwc5/owY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:reply-to:in-reply-to:references:date
         :x-google-sender-auth:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=oYZ1qCY1kVO+KfRrcAX8OKxqIiiSkIGKkJFEQlRIIA1WVMAceE+gIXjSODRdCtK3Vn
         LpvHSc4xdtJ5qJqAd6OtjpxbMVSGFsJo4TAI0J31rCQg64M7EVcZKOwh9YM9cyFzCtY+
         2FQMZaLgEF4xQK+rpXTIMHwPaSEbL60598z9s=
MIME-Version: 1.0
Received: by 10.216.169.199 with SMTP id n49mr3513381wel.42.1274131833089; 
	Mon, 17 May 2010 14:30:33 -0700 (PDT)
Sender: yseeley@gmail.com
Reply-To: yonik@lucidimagination.com
Received: by 10.216.22.140 with HTTP; Mon, 17 May 2010 14:30:33 -0700 (PDT)
In-Reply-To: <AANLkTiny514aZfpLLVHElNrO2uYo26_vawhHJJsakAqN@mail.gmail.com>
References: <AANLkTiny514aZfpLLVHElNrO2uYo26_vawhHJJsakAqN@mail.gmail.com>
Date: Mon, 17 May 2010 17:30:33 -0400
X-Google-Sender-Auth: 11jmFoOdxKO4pispeoK7Jp2_Fg0
Message-ID: <AANLkTim3vIPVhVVhxULxB_OBIT4p0LfHF-G99PsD-BGG@mail.gmail.com>
Subject: Re: NRT and Caching based on IndexReader
From: Yonik Seeley <yonik@lucidimagination.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On Mon, May 17, 2010 at 5:00 PM, Shay Banon <kimchy@gmail.com> wrote:
> =A0 I wanted to verify if my understanding is correct. Assuming that I us=
e
> NRT, and refresh, say, every 1 second, caching based on IndexReader, such=
 is
> what is used in the CachingWrapperFilter is basically useless

No, it's fine.  Searching in Lucene is now done per-segment, and so
the readers that are passed to Filter.getDocIdSet are the segment
readers, not the top-level readers.  Caching is now per-segment.

-Yonik
http://www.lucidimagination.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46148-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 17 21:47:50 2010
Return-Path: <java-user-return-46148-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10661 invoked from network); 17 May 2010 21:47:50 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 May 2010 21:47:50 -0000
Received: (qmail 21495 invoked by uid 500); 17 May 2010 21:47:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21433 invoked by uid 500); 17 May 2010 21:47:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21425 invoked by uid 99); 17 May 2010 21:47:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 May 2010 21:47:47 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of siraj@jobdiva.com designates 64.18.2.26 as permitted sender)
Received: from [64.18.2.26] (HELO exprod7og124.obsmtp.com) (64.18.2.26)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 17 May 2010 21:47:37 +0000
Received: from source ([64.147.106.2]) (using TLSv1) by exprod7ob124.postini.com ([64.18.6.12]) with SMTP
	ID DSNKS/G5XKyxXYu3aPyNydMNUIAB4U/tHhV4@postini.com; Mon, 17 May 2010 14:47:17 PDT
Received: from [10.10.1.80] (12.111.23.142) by mail.jobdiva.com (10.10.30.148)
 with Microsoft SMTP Server (TLS) id 8.1.436.0; Mon, 17 May 2010 17:49:07
 -0400
Message-ID: <4BF1B947.6000501@jobdiva.com>
Date: Mon, 17 May 2010 17:46:47 -0400
From: Siraj Haider <siraj@jobdiva.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.1.8) Gecko/20100227 Thunderbird/3.0.3
MIME-Version: 1.0
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
CC: Steven A Rowe <sarowe@syr.edu>
Subject: Re: Reverse Searching
References: <4BF1A940.3070105@jobdiva.com>  <2D127F11DC79714E9B6A43AC9458147F3DCD98E4@suex07-mbx-03.ad.syr.edu>
In-Reply-To: <2D127F11DC79714E9B6A43AC9458147F3DCD98E4@suex07-mbx-03.ad.syr.edu>
Content-Type: text/plain; charset="ISO-8859-1"; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Steven,
Thanks for the quick reply.  I checked the documentation of MemoryIndex 
and it seems like, you have to create an index in memory with one 
document and will have to run the queries against that single document.  
But my dilemma is, I might have upto 100,000 queries to run against it.  
Do you think this route will give me results in reasonable amount of 
time, i.e. in a few seconds?

thanks
-siraj

On 5/17/2010 5:21 PM, Steven A Rowe wrote:
> Hi Siraj,
>
> Lucene's MemoryIndex can be used to serve this purpose.
>
> From<http://lucene.apache.org/java/3_0_1/api/contrib-memory/org/apache/lucene/index/memory/MemoryIndex.html>:
>
> 	[T]his class targets fulltext search of huge numbers
> 	of queries over comparatively small transient realtime
> 	data (prospective search).
>
> MemoryIndex can only hold one document at a time.
>
> See also Lucene's InstantiatedIndex, which can hold more than one document at a time:
>
> <http://lucene.apache.org/java/3_0_1/api/contrib-instantiated/org/apache/lucene/store/instantiated/InstantiatedIndex.html>
>
> Steve
>
> On 05/17/2010 at 4:38 PM, Siraj Haider wrote:
>    
>> Hello there,
>> In oracle text search there is a feature to reverse search using
>> ctxrule.  What it does is, you create an index (ctxrule) on a column
>> having your search criteria(s) and then throw a document on it and it
>> tells you which criteria(s) it satisfies.  Is there something in Lucene
>> that does that or there are any plans to do that?
>>
>> thanks
>> -siraj
>>      
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>    


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46149-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 17 21:55:26 2010
Return-Path: <java-user-return-46149-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12217 invoked from network); 17 May 2010 21:55:25 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 May 2010 21:55:25 -0000
Received: (qmail 31466 invoked by uid 500); 17 May 2010 21:55:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31398 invoked by uid 500); 17 May 2010 21:55:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31390 invoked by uid 99); 17 May 2010 21:55:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 May 2010 21:55:23 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of kimchy@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 May 2010 21:55:16 +0000
Received: by fxm9 with SMTP id 9so211772fxm.35
        for <java-user@lucene.apache.org>; Mon, 17 May 2010 14:54:56 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=D4/mVWPyeLuUZ8mzXIH6XcotTPBusKJUGwaboxWxzik=;
        b=hz5lMs2oxvqElxxVqSGJ56xaFfegv4a/kcHyfqdsxv6Qzi5fXedTE0U1Z3V+YIR9Zm
         wc3bWttHEDh9rTZJLHjhCv4Q5tsJqNSJZwQ1Jk4OA0RQlCVIRYMKjVTrE2t7ThKjuPc0
         +7b2QszUTl5+g47C9dU5wExWPfL1g98RxDnWU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=eJxFe2yXRMA8rO72DRk80zQH5VMKYAY0LHW9EvDWl4raKMTVSSl64kTSq33GDTtZGv
         2NytHst9gDWNIuSPrSEqflWMp1HYyu7ggU90NX/Ea7yI3FvMZnXUwO7K+AV93ysUhl0J
         hIQ4z4MU9m35Kv1E/NYy1kj1unNDXZjyq7E2k=
Received: by 10.204.45.201 with SMTP id g9mr52039bkf.89.1274133296147; Mon, 17 
	May 2010 14:54:56 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.58.131 with HTTP; Mon, 17 May 2010 14:54:36 -0700 (PDT)
In-Reply-To: <AANLkTim3vIPVhVVhxULxB_OBIT4p0LfHF-G99PsD-BGG@mail.gmail.com>
References: <AANLkTiny514aZfpLLVHElNrO2uYo26_vawhHJJsakAqN@mail.gmail.com> 
	<AANLkTim3vIPVhVVhxULxB_OBIT4p0LfHF-G99PsD-BGG@mail.gmail.com>
From: Shay Banon <kimchy@gmail.com>
Date: Tue, 18 May 2010 00:54:36 +0300
Message-ID: <AANLkTikzjvur2oCcKuEJi4_C54v8MU8jQW-XTbmke3OS@mail.gmail.com>
Subject: Re: NRT and Caching based on IndexReader
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d97856836dd60486d146ff
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6d97856836dd60486d146ff
Content-Type: text/plain; charset=ISO-8859-1

Yea, I noticed that ;). Even so, I think that with NRT, even the lower level
readers are cloned, meaning that you always get a new instance... . Here is
a sample program that tests this behavior, am I doing something wrong? By
the way, if what I say is correct, it affects field cache as well....

public static void main(String[] args) throws Exception {
    Directory dir = new RAMDirectory();
    IndexWriter indexWriter = new IndexWriter(dir, new
StandardAnalyzer(Version.LUCENE_CURRENT), true,
IndexWriter.MaxFieldLength.UNLIMITED);
    IndexReader reader = indexWriter.getReader();

    Set<IndexReader> readers = new HashSet<IndexReader>(); // tracks all
readers
    for (int i = 0; i < 100; i++) {
        readers.add(reader);
        Document doc = new Document();
        doc.add(new Field("id", Integer.toString(i), Field.Store.YES,
Field.Index.NO));
        indexWriter.addDocument(doc);

        IndexReader newReader = reader.reopen(true);
        if (reader == newReader) {
            System.err.println("Should not get the same reader...");
        } else {
            reader.close();
            reader = newReader;
        }
    }

    reader.close();

    // now, go and check that all are ref == 0
    // and, that all readers, even sub readers, are unique instances
(sadly...)
    Set<IndexReader> allReaders = new HashSet<IndexReader>();
    for (IndexReader reader1 : readers) {
        if (reader1.getRefCount() != 0) {
            System.err.println("A reader is not closed");
        }
        if (allReaders.contains(reader1)) {
            System.err.println("Found an existing reader...");
        }
        allReaders.add(reader1);
        if (reader1.getSequentialSubReaders() != null) {
            for (IndexReader reader2 : reader1.getSequentialSubReaders()) {
                if (reader2.getRefCount() != 0) {
                    System.err.println("A reader is not closed...");
                }
                if (allReaders.contains(reader2)) {
                    System.err.println("Found an existing reader...");
                }
                allReaders.add(reader2);

                // there should not be additional readers...
                if (reader2.getSequentialSubReaders() != null) {
                    System.err.println("Should not be more readers...");
                }
            }
        }
    }

    indexWriter.close();
}




On Tue, May 18, 2010 at 12:30 AM, Yonik Seeley
<yonik@lucidimagination.com>wrote:

> On Mon, May 17, 2010 at 5:00 PM, Shay Banon <kimchy@gmail.com> wrote:
> >   I wanted to verify if my understanding is correct. Assuming that I use
> > NRT, and refresh, say, every 1 second, caching based on IndexReader, such
> is
> > what is used in the CachingWrapperFilter is basically useless
>
> No, it's fine.  Searching in Lucene is now done per-segment, and so
> the readers that are passed to Filter.getDocIdSet are the segment
> readers, not the top-level readers.  Caching is now per-segment.
>
> -Yonik
> http://www.lucidimagination.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e6d97856836dd60486d146ff--

From java-user-return-46150-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 17 22:00:22 2010
Return-Path: <java-user-return-46150-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14607 invoked from network); 17 May 2010 22:00:21 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 May 2010 22:00:21 -0000
Received: (qmail 41348 invoked by uid 500); 17 May 2010 22:00:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41320 invoked by uid 500); 17 May 2010 22:00:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41312 invoked by uid 99); 17 May 2010 22:00:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 May 2010 22:00:19 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.230.18.92] (HELO smtp2.syr.edu) (128.230.18.92)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 May 2010 22:00:10 +0000
Received: from suex07-hub-01.ad.syr.edu (suex07-hub-01.ad.syr.edu [128.230.108.195])
	by smtp2.syr.edu (8.14.3/8.14.3) with ESMTP id o4HLxnkd001467
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Mon, 17 May 2010 17:59:49 -0400
Received: from suex07-mbx-03.ad.syr.edu ([128.230.108.133]) by
 suex07-hub-01.ad.syr.edu ([2002:80e6:6cc3::80e6:6cc3]) with mapi; Mon, 17 May
 2010 17:59:49 -0400
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Mon, 17 May 2010 17:59:46 -0400
Subject: RE: Reverse Searching
Thread-Topic: Reverse Searching
Thread-Index: Acr2CoU3/1MvSq8HSkWIfg2E+ADQwwAADRGw
Message-ID: <2D127F11DC79714E9B6A43AC9458147F3DCD98E6@suex07-mbx-03.ad.syr.edu>
References: <4BF1A940.3070105@jobdiva.com>
  <2D127F11DC79714E9B6A43AC9458147F3DCD98E4@suex07-mbx-03.ad.syr.edu>
 <4BF1B947.6000501@jobdiva.com>
In-Reply-To: <4BF1B947.6000501@jobdiva.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=1.12.8161:2.4.5,1.2.40,4.0.166
 definitions=2010-05-17_04:2010-02-06,2010-05-17,2010-05-17 signatures=0
X-Proofpoint-Spam-Reason: safe
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Siraj,

The usual answer to questions like yours ("Will performance of Lucene compo=
nent X against my N records be good enough?") is "It depends": on the natur=
e of the queries, the nature of the documents, the hardware you run on, etc=
.  That said, if you construct your query objects once and reuse them, it'l=
l likely be extremely fast.

Here are some benchmarks (which I found by Googling "Lucene MemoryIndex") u=
sing PyLucene:

<http://www.sajalkayan.com/prospective-search-using-python.html>

Give it a try!  Lucene is pretty easy to get started with.  Ask questions i=
f you run into trouble.

Good luck,
Steve

On 05/17/2010 at 5:46 PM, Siraj Haider wrote:
> Hi Steven,
> Thanks for the quick reply.  I checked the documentation of MemoryIndex
> and it seems like, you have to create an index in memory with one
> document and will have to run the queries against that single document.
> But my dilemma is, I might have upto 100,000 queries to run against it.
> Do you think this route will give me results in reasonable amount of
> time, i.e. in a few seconds?
>=20
> thanks
> -siraj
>=20
> On 5/17/2010 5:21 PM, Steven A Rowe wrote:
> > Hi Siraj,
> >=20
> > Lucene's MemoryIndex can be used to serve this purpose.
> >=20
> > From<http://lucene.apache.org/java/3_0_1/api/contrib-
> > memory/org/apache/lucene/index/memory/MemoryIndex.html>:
> >=20
> > 	[T]his class targets fulltext search of huge numbers
> > 	of queries over comparatively small transient realtime
> > 	data (prospective search).
> >=20
> > MemoryIndex can only hold one document at a time.
> >=20
> > See also Lucene's InstantiatedIndex, which can hold more than one
> > document at a time:
> >=20
> > <http://lucene.apache.org/java/3_0_1/api/contrib-
> instantiated/org/apache/lucene/store/instantiated/InstantiatedIndex.htm
> l>
> >=20
> > Steve
> >=20
> > On 05/17/2010 at 4:38 PM, Siraj Haider wrote:
> >=20
> > > Hello there, In oracle text search there is a feature to reverse
> > > search using ctxrule.  What it does is, you create an index (ctxrule)
> > > on a column having your search criteria(s) and then throw a document
> > > on it and it tells you which criteria(s) it satisfies.  Is there
> > > something in Lucene that does that or there are any plans to do that?
> > >=20
> > > thanks
> > > -siraj


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46151-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 17 22:09:42 2010
Return-Path: <java-user-return-46151-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17409 invoked from network); 17 May 2010 22:09:42 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 May 2010 22:09:42 -0000
Received: (qmail 49530 invoked by uid 500); 17 May 2010 22:09:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49494 invoked by uid 500); 17 May 2010 22:09:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49486 invoked by uid 99); 17 May 2010 22:09:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 May 2010 22:09:40 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of siraj@jobdiva.com designates 64.18.2.217 as permitted sender)
Received: from [64.18.2.217] (HELO exprod7og115.obsmtp.com) (64.18.2.217)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 17 May 2010 22:09:31 +0000
Received: from source ([64.147.106.2]) (using TLSv1) by exprod7ob115.postini.com ([64.18.6.12]) with SMTP
	ID DSNKS/G+gA6rnksB1HSKcUx8WoJDcDMQ2Xvz@postini.com; Mon, 17 May 2010 15:09:10 PDT
Received: from [10.10.1.80] (12.111.23.142) by mail.jobdiva.com (10.10.30.148)
 with Microsoft SMTP Server (TLS) id 8.1.436.0; Mon, 17 May 2010 18:11:21
 -0400
Message-ID: <4BF1BE7E.2020809@jobdiva.com>
Date: Mon, 17 May 2010 18:09:02 -0400
From: Siraj Haider <siraj@jobdiva.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.1.8) Gecko/20100227 Thunderbird/3.0.3
MIME-Version: 1.0
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
CC: Steven A Rowe <sarowe@syr.edu>
Subject: Re: Reverse Searching
References: <4BF1A940.3070105@jobdiva.com>  <2D127F11DC79714E9B6A43AC9458147F3DCD98E4@suex07-mbx-03.ad.syr.edu> <4BF1B947.6000501@jobdiva.com>  <2D127F11DC79714E9B6A43AC9458147F3DCD98E6@suex07-mbx-03.ad.syr.edu>
In-Reply-To: <2D127F11DC79714E9B6A43AC9458147F3DCD98E6@suex07-mbx-03.ad.syr.edu>
Content-Type: text/plain; charset="ISO-8859-1"; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Steven,
Thanks for the information, its very useful.  I am definitely going to 
give it a try and will ask if I get into any problem.

thanks
-siraj

On 5/17/2010 5:59 PM, Steven A Rowe wrote:
> Hi Siraj,
>
> The usual answer to questions like yours ("Will performance of Lucene component X against my N records be good enough?") is "It depends": on the nature of the queries, the nature of the documents, the hardware you run on, etc.  That said, if you construct your query objects once and reuse them, it'll likely be extremely fast.
>
> Here are some benchmarks (which I found by Googling "Lucene MemoryIndex") using PyLucene:
>
> <http://www.sajalkayan.com/prospective-search-using-python.html>
>
> Give it a try!  Lucene is pretty easy to get started with.  Ask questions if you run into trouble.
>
> Good luck,
> Steve
>
> On 05/17/2010 at 5:46 PM, Siraj Haider wrote:
>    
>> Hi Steven,
>> Thanks for the quick reply.  I checked the documentation of MemoryIndex
>> and it seems like, you have to create an index in memory with one
>> document and will have to run the queries against that single document.
>> But my dilemma is, I might have upto 100,000 queries to run against it.
>> Do you think this route will give me results in reasonable amount of
>> time, i.e. in a few seconds?
>>
>> thanks
>> -siraj
>>
>> On 5/17/2010 5:21 PM, Steven A Rowe wrote:
>>      
>>> Hi Siraj,
>>>
>>> Lucene's MemoryIndex can be used to serve this purpose.
>>>
>>> From<http://lucene.apache.org/java/3_0_1/api/contrib-
>>> memory/org/apache/lucene/index/memory/MemoryIndex.html>:
>>>
>>> 	[T]his class targets fulltext search of huge numbers
>>> 	of queries over comparatively small transient realtime
>>> 	data (prospective search).
>>>
>>> MemoryIndex can only hold one document at a time.
>>>
>>> See also Lucene's InstantiatedIndex, which can hold more than one
>>> document at a time:
>>>
>>> <http://lucene.apache.org/java/3_0_1/api/contrib-
>>>        
>> instantiated/org/apache/lucene/store/instantiated/InstantiatedIndex.htm
>> l>
>>      
>>> Steve
>>>
>>> On 05/17/2010 at 4:38 PM, Siraj Haider wrote:
>>>
>>>        
>>>> Hello there, In oracle text search there is a feature to reverse
>>>> search using ctxrule.  What it does is, you create an index (ctxrule)
>>>> on a column having your search criteria(s) and then throw a document
>>>> on it and it tells you which criteria(s) it satisfies.  Is there
>>>> something in Lucene that does that or there are any plans to do that?
>>>>
>>>> thanks
>>>> -siraj
>>>>          
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>    


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46152-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 18 00:44:47 2010
Return-Path: <java-user-return-46152-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61247 invoked from network); 18 May 2010 00:44:46 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 18 May 2010 00:44:46 -0000
Received: (qmail 77542 invoked by uid 500); 18 May 2010 00:44:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77503 invoked by uid 500); 18 May 2010 00:44:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77495 invoked by uid 99); 18 May 2010 00:44:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 May 2010 00:44:44 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of yseeley@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 May 2010 00:44:37 +0000
Received: by wyb40 with SMTP id 40so183114wyb.35
        for <java-user@lucene.apache.org>; Mon, 17 May 2010 17:44:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:sender:reply-to:received
         :in-reply-to:references:date:x-google-sender-auth:message-id:subject
         :from:to:content-type:content-transfer-encoding;
        bh=oS677KPwNRvvjoE6soQiMGrfrUPGFXhmTEwfeFr4lo8=;
        b=dyw1jVODF1d+dT2vFK4cE0vjTp0RWyumcjpRlQC+L0DIRVYtzXNlXRwA8KOBERXBxc
         QzYpW7Hw/pAVSGppZOUXaFDZRJBvDa0WoIR6RaDIfUzKeuoD01kNtLrCEhtePWYw9M85
         Wktluj1vPdycOhcPSxIC/zEbZAv3Oiqw+/vBQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:reply-to:in-reply-to:references:date
         :x-google-sender-auth:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=VBjIR3SK4Tq/42yx3j3dTJav7uiHGhv0vAajs69OKfqxmQJ7ufjdRn1XNVoqOaAx55
         dEiSucdryU78DYtnR5Yajw+w6G0m/tnaFiyOeRVbQggl+4NiPIXqHodXaA8hufhTm2+Z
         3jDFS8sx+sbitfohMkbwPS8c4RmaFr4fughYI=
MIME-Version: 1.0
Received: by 10.216.168.69 with SMTP id j47mr3637600wel.14.1274143457448; Mon, 
	17 May 2010 17:44:17 -0700 (PDT)
Sender: yseeley@gmail.com
Reply-To: yonik@lucidimagination.com
Received: by 10.216.22.140 with HTTP; Mon, 17 May 2010 17:44:17 -0700 (PDT)
In-Reply-To: <AANLkTikzjvur2oCcKuEJi4_C54v8MU8jQW-XTbmke3OS@mail.gmail.com>
References: <AANLkTiny514aZfpLLVHElNrO2uYo26_vawhHJJsakAqN@mail.gmail.com>
	 <AANLkTim3vIPVhVVhxULxB_OBIT4p0LfHF-G99PsD-BGG@mail.gmail.com>
	 <AANLkTikzjvur2oCcKuEJi4_C54v8MU8jQW-XTbmke3OS@mail.gmail.com>
Date: Mon, 17 May 2010 20:44:17 -0400
X-Google-Sender-Auth: lbStB1OtAIEiGOQa9RqpOdPZatQ
Message-ID: <AANLkTikdpUxKgRyi4xABRNMSynbipGnoZGghktQ2pXL8@mail.gmail.com>
Subject: Re: NRT and Caching based on IndexReader
From: Yonik Seeley <yonik@lucidimagination.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Yep, confirmed what you are seeing.  I'll check into it and open an issue.

-Yonik
http://www.lucidimagination.com

On Mon, May 17, 2010 at 5:54 PM, Shay Banon <kimchy@gmail.com> wrote:
> Yea, I noticed that ;). Even so, I think that with NRT, even the lower le=
vel
> readers are cloned, meaning that you always get a new instance... . Here =
is
> a sample program that tests this behavior, am I doing something wrong? By
> the way, if what I say is correct, it affects field cache as well....
>
> public static void main(String[] args) throws Exception {
> =A0 =A0Directory dir =3D new RAMDirectory();
> =A0 =A0IndexWriter indexWriter =3D new IndexWriter(dir, new
> StandardAnalyzer(Version.LUCENE_CURRENT), true,
> IndexWriter.MaxFieldLength.UNLIMITED);
> =A0 =A0IndexReader reader =3D indexWriter.getReader();
>
> =A0 =A0Set<IndexReader> readers =3D new HashSet<IndexReader>(); // tracks=
 all
> readers
> =A0 =A0for (int i =3D 0; i < 100; i++) {
> =A0 =A0 =A0 =A0readers.add(reader);
> =A0 =A0 =A0 =A0Document doc =3D new Document();
> =A0 =A0 =A0 =A0doc.add(new Field("id", Integer.toString(i), Field.Store.Y=
ES,
> Field.Index.NO));
> =A0 =A0 =A0 =A0indexWriter.addDocument(doc);
>
> =A0 =A0 =A0 =A0IndexReader newReader =3D reader.reopen(true);
> =A0 =A0 =A0 =A0if (reader =3D=3D newReader) {
> =A0 =A0 =A0 =A0 =A0 =A0System.err.println("Should not get the same reader=
...");
> =A0 =A0 =A0 =A0} else {
> =A0 =A0 =A0 =A0 =A0 =A0reader.close();
> =A0 =A0 =A0 =A0 =A0 =A0reader =3D newReader;
> =A0 =A0 =A0 =A0}
> =A0 =A0}
>
> =A0 =A0reader.close();
>
> =A0 =A0// now, go and check that all are ref =3D=3D 0
> =A0 =A0// and, that all readers, even sub readers, are unique instances
> (sadly...)
> =A0 =A0Set<IndexReader> allReaders =3D new HashSet<IndexReader>();
> =A0 =A0for (IndexReader reader1 : readers) {
> =A0 =A0 =A0 =A0if (reader1.getRefCount() !=3D 0) {
> =A0 =A0 =A0 =A0 =A0 =A0System.err.println("A reader is not closed");
> =A0 =A0 =A0 =A0}
> =A0 =A0 =A0 =A0if (allReaders.contains(reader1)) {
> =A0 =A0 =A0 =A0 =A0 =A0System.err.println("Found an existing reader...");
> =A0 =A0 =A0 =A0}
> =A0 =A0 =A0 =A0allReaders.add(reader1);
> =A0 =A0 =A0 =A0if (reader1.getSequentialSubReaders() !=3D null) {
> =A0 =A0 =A0 =A0 =A0 =A0for (IndexReader reader2 : reader1.getSequentialSu=
bReaders()) {
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0if (reader2.getRefCount() !=3D 0) {
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0System.err.println("A reader is no=
t closed...");
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0if (allReaders.contains(reader2)) {
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0System.err.println("Found an exist=
ing reader...");
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0allReaders.add(reader2);
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0// there should not be additional readers.=
..
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0if (reader2.getSequentialSubReaders() !=3D=
 null) {
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0System.err.println("Should not be =
more readers...");
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}
> =A0 =A0 =A0 =A0 =A0 =A0}
> =A0 =A0 =A0 =A0}
> =A0 =A0}
>
> =A0 =A0indexWriter.close();
> }
>
>
>
>
> On Tue, May 18, 2010 at 12:30 AM, Yonik Seeley
> <yonik@lucidimagination.com>wrote:
>
>> On Mon, May 17, 2010 at 5:00 PM, Shay Banon <kimchy@gmail.com> wrote:
>> > =A0 I wanted to verify if my understanding is correct. Assuming that I=
 use
>> > NRT, and refresh, say, every 1 second, caching based on IndexReader, s=
uch
>> is
>> > what is used in the CachingWrapperFilter is basically useless
>>
>> No, it's fine. =A0Searching in Lucene is now done per-segment, and so
>> the readers that are passed to Filter.getDocIdSet are the segment
>> readers, not the top-level readers. =A0Caching is now per-segment.
>>
>> -Yonik
>> http://www.lucidimagination.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46153-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 18 01:01:14 2010
Return-Path: <java-user-return-46153-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64769 invoked from network); 18 May 2010 01:01:14 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 18 May 2010 01:01:14 -0000
Received: (qmail 89401 invoked by uid 500); 18 May 2010 01:01:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89353 invoked by uid 500); 18 May 2010 01:01:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89345 invoked by uid 99); 18 May 2010 01:01:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 May 2010 01:01:12 +0000
X-ASF-Spam-Status: No, hits=-0.1 required=10.0
	tests=AWL,FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of kimchy@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 May 2010 01:01:07 +0000
Received: by fxm9 with SMTP id 9so331971fxm.35
        for <java-user@lucene.apache.org>; Mon, 17 May 2010 18:00:45 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=Mw5PgLgLgMcfOnjW2yZed9F9bzA53KfrdHR/i4UV274=;
        b=oT1H5YFk/lLmZut75hVEbXeU88MLLnvcSCM5ApnKatBjY9TM9I2cj0BmLm+X9RSXeS
         6dyqxOVqWf+zxUKL8qCXJ7yLbnUuNb05D/1kY0+woFk8/w0mY490oVmGIhSr8Qs9Br9l
         DMxf3F6iSY0pK5gfLzv+J34satpomrW0PXZpg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=YCLsSYsbO9NwUdXjuq5N55SXj5iWLZ+JfhpOQi7hvlNtRr7APZLrIuwxeQL51Y3dUD
         d58t4+ybWoJZhGRIOoMOUe3byI9SIbKyro4xk8ndIfWGPdJrZQzgFqC/21doOWgcDLQ8
         oVvRvK1IOOxAmRsXfyrs61hV04EfwKJdW+W38=
Received: by 10.204.7.194 with SMTP id e2mr63720bke.103.1274144444128; Mon, 17 
	May 2010 18:00:44 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.58.131 with HTTP; Mon, 17 May 2010 18:00:24 -0700 (PDT)
In-Reply-To: <AANLkTikdpUxKgRyi4xABRNMSynbipGnoZGghktQ2pXL8@mail.gmail.com>
References: <AANLkTiny514aZfpLLVHElNrO2uYo26_vawhHJJsakAqN@mail.gmail.com> 
	<AANLkTim3vIPVhVVhxULxB_OBIT4p0LfHF-G99PsD-BGG@mail.gmail.com> 
	<AANLkTikzjvur2oCcKuEJi4_C54v8MU8jQW-XTbmke3OS@mail.gmail.com> 
	<AANLkTikdpUxKgRyi4xABRNMSynbipGnoZGghktQ2pXL8@mail.gmail.com>
From: Shay Banon <kimchy@gmail.com>
Date: Tue, 18 May 2010 04:00:24 +0300
Message-ID: <AANLkTim_nJjcybr19XCrROd2idfcPSByAnYtjGlONEs3@mail.gmail.com>
Subject: Re: NRT and Caching based on IndexReader
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015174c1b36fc1fb70486d3de97

--0015174c1b36fc1fb70486d3de97
Content-Type: text/plain; charset=ISO-8859-1

Great, so I am not imagining things this late into the night ... ;), not so
great, since using NRT with field cache (like sorting) or caching filters,
or anything that caches based on IndexReader not really an option. This
makes NRT very problematic to use in a real application.

-shay.banon

On Tue, May 18, 2010 at 3:44 AM, Yonik Seeley <yonik@lucidimagination.com>wrote:

> Yep, confirmed what you are seeing.  I'll check into it and open an issue.
>
> -Yonik
> http://www.lucidimagination.com
>
> On Mon, May 17, 2010 at 5:54 PM, Shay Banon <kimchy@gmail.com> wrote:
> > Yea, I noticed that ;). Even so, I think that with NRT, even the lower
> level
> > readers are cloned, meaning that you always get a new instance... . Here
> is
> > a sample program that tests this behavior, am I doing something wrong? By
> > the way, if what I say is correct, it affects field cache as well....
> >
> > public static void main(String[] args) throws Exception {
> >    Directory dir = new RAMDirectory();
> >    IndexWriter indexWriter = new IndexWriter(dir, new
> > StandardAnalyzer(Version.LUCENE_CURRENT), true,
> > IndexWriter.MaxFieldLength.UNLIMITED);
> >    IndexReader reader = indexWriter.getReader();
> >
> >    Set<IndexReader> readers = new HashSet<IndexReader>(); // tracks all
> > readers
> >    for (int i = 0; i < 100; i++) {
> >        readers.add(reader);
> >        Document doc = new Document();
> >        doc.add(new Field("id", Integer.toString(i), Field.Store.YES,
> > Field.Index.NO));
> >        indexWriter.addDocument(doc);
> >
> >        IndexReader newReader = reader.reopen(true);
> >        if (reader == newReader) {
> >            System.err.println("Should not get the same reader...");
> >        } else {
> >            reader.close();
> >            reader = newReader;
> >        }
> >    }
> >
> >    reader.close();
> >
> >    // now, go and check that all are ref == 0
> >    // and, that all readers, even sub readers, are unique instances
> > (sadly...)
> >    Set<IndexReader> allReaders = new HashSet<IndexReader>();
> >    for (IndexReader reader1 : readers) {
> >        if (reader1.getRefCount() != 0) {
> >            System.err.println("A reader is not closed");
> >        }
> >        if (allReaders.contains(reader1)) {
> >            System.err.println("Found an existing reader...");
> >        }
> >        allReaders.add(reader1);
> >        if (reader1.getSequentialSubReaders() != null) {
> >            for (IndexReader reader2 : reader1.getSequentialSubReaders())
> {
> >                if (reader2.getRefCount() != 0) {
> >                    System.err.println("A reader is not closed...");
> >                }
> >                if (allReaders.contains(reader2)) {
> >                    System.err.println("Found an existing reader...");
> >                }
> >                allReaders.add(reader2);
> >
> >                // there should not be additional readers...
> >                if (reader2.getSequentialSubReaders() != null) {
> >                    System.err.println("Should not be more readers...");
> >                }
> >            }
> >        }
> >    }
> >
> >    indexWriter.close();
> > }
> >
> >
> >
> >
> > On Tue, May 18, 2010 at 12:30 AM, Yonik Seeley
> > <yonik@lucidimagination.com>wrote:
> >
> >> On Mon, May 17, 2010 at 5:00 PM, Shay Banon <kimchy@gmail.com> wrote:
> >> >   I wanted to verify if my understanding is correct. Assuming that I
> use
> >> > NRT, and refresh, say, every 1 second, caching based on IndexReader,
> such
> >> is
> >> > what is used in the CachingWrapperFilter is basically useless
> >>
> >> No, it's fine.  Searching in Lucene is now done per-segment, and so
> >> the readers that are passed to Filter.getDocIdSet are the segment
> >> readers, not the top-level readers.  Caching is now per-segment.
> >>
> >> -Yonik
> >> http://www.lucidimagination.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0015174c1b36fc1fb70486d3de97--

From java-user-return-46154-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 18 01:05:09 2010
Return-Path: <java-user-return-46154-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65254 invoked from network); 18 May 2010 01:05:09 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 18 May 2010 01:05:09 -0000
Received: (qmail 93732 invoked by uid 500); 18 May 2010 01:05:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93688 invoked by uid 500); 18 May 2010 01:05:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93680 invoked by uid 99); 18 May 2010 01:05:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 May 2010 01:05:07 +0000
X-ASF-Spam-Status: No, hits=-0.5 required=10.0
	tests=AWL,FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 May 2010 01:05:02 +0000
Received: by wyb40 with SMTP id 40so191638wyb.35
        for <java-user@lucene.apache.org>; Mon, 17 May 2010 18:04:40 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:sender:reply-to:received
         :in-reply-to:references:date:x-google-sender-auth:message-id:subject
         :from:to:content-type;
        bh=JwaCCje8skQo7IeuydmB87Vnzs4+gHNXi3PLTpncFC0=;
        b=oejb64cvyo2uFW+RTIWgoBCJ/7ZATATascbdE0dtLL+7iSIehsf4kxQioto0tNvD21
         7HzbIKuiH2KXEqdrKqB2WauHZj3DWBFncSZ8ZFMvv2KRhDx3rbXGhjn0RBJZaGlghhsD
         ewA5BqYXggwcqO2TEdTANIza+7ltSxEX9CjyE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:reply-to:in-reply-to:references:date
         :x-google-sender-auth:message-id:subject:from:to:content-type;
        b=bj0Qcl0wy3PJwql1BXvq1Flfbn4ojmE6UEZXlQiMY29eqzNE06UXJ9js1qCLYE+9nx
         zp6Qz09iCEaEp4stWqbtfAd0dC1ld33cXJJ/9FqgSSQswLPV+O0YiShwWtFxfOmMhkp2
         PkrMI1Ed2UiKhOUmJWF7bDcrjppuX4MaPuIK4=
MIME-Version: 1.0
Received: by 10.216.161.14 with SMTP id v14mr3461232wek.179.1274144680473; 
	Mon, 17 May 2010 18:04:40 -0700 (PDT)
Sender: yseeley@gmail.com
Reply-To: yonik@lucidimagination.com
Received: by 10.216.22.140 with HTTP; Mon, 17 May 2010 18:04:40 -0700 (PDT)
In-Reply-To: <AANLkTim_nJjcybr19XCrROd2idfcPSByAnYtjGlONEs3@mail.gmail.com>
References: <AANLkTiny514aZfpLLVHElNrO2uYo26_vawhHJJsakAqN@mail.gmail.com>
	 <AANLkTim3vIPVhVVhxULxB_OBIT4p0LfHF-G99PsD-BGG@mail.gmail.com>
	 <AANLkTikzjvur2oCcKuEJi4_C54v8MU8jQW-XTbmke3OS@mail.gmail.com>
	 <AANLkTikdpUxKgRyi4xABRNMSynbipGnoZGghktQ2pXL8@mail.gmail.com>
	 <AANLkTim_nJjcybr19XCrROd2idfcPSByAnYtjGlONEs3@mail.gmail.com>
Date: Mon, 17 May 2010 21:04:40 -0400
X-Google-Sender-Auth: G48jRrCTXdLYoktaeQZqs79v1tE
Message-ID: <AANLkTiml6Wlb7udB5ZEPVlVv4g2Ueuh-22-ittZVUrPP@mail.gmail.com>
Subject: Re: NRT and Caching based on IndexReader
From: Yonik Seeley <yonik@lucidimagination.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

On Mon, May 17, 2010 at 9:00 PM, Shay Banon <kimchy@gmail.com> wrote:
> Great, so I am not imagining things this late into the night ... ;), not so
> great, since using NRT with field cache (like sorting) or caching filters,
> or anything that caches based on IndexReader not really an option. This
> makes NRT very problematic to use in a real application.

NRT is still pretty new :-)  And I do believe this is a bug, so we'll
get it fixed.
It's not actually a problem for FieldCache though - it no longer keys
on the reader directly (if deleted docs are the only things that have
changed, the FieldCache entry can still be shared).

-Yonik
http://www.lucidimagination.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46155-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 18 01:13:14 2010
Return-Path: <java-user-return-46155-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68616 invoked from network); 18 May 2010 01:13:14 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 18 May 2010 01:13:14 -0000
Received: (qmail 4379 invoked by uid 500); 18 May 2010 01:13:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4344 invoked by uid 500); 18 May 2010 01:13:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4336 invoked by uid 99); 18 May 2010 01:13:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 May 2010 01:13:12 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of kimchy@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 May 2010 01:13:05 +0000
Received: by fxm9 with SMTP id 9so338727fxm.35
        for <java-user@lucene.apache.org>; Mon, 17 May 2010 18:12:45 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=Oj/dsJdglf+80e+u72PSWrSFwQmcgYuHo2OEybh4jKQ=;
        b=KxgCY5CsfV/hvra1o29dWXVIPaFvXuvoBepQQMM6os708cwktmlvBeXEBCE9JEsDpY
         TWsk1Y7EmuFQk007WSA2YhIXj4zSOxanAxZq8L9v5XZnJRHwrvvRrHtVuDgwRejIupWj
         9CKsRcNszuZC/nkuW/RDpo5HyRJC+YhJWPh5U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=ZjuGQvKtLz6wV+zUyfmMveXhZ/moEJ8PvWdVpnRwLJlsKtIrDhCyY2Trw90GTpJKJw
         uMxdLd8F7PiBEkI/F4gneiCngZnkUdYToeX17AXq+n9gQV9hYtM5NLC9dQNIT41YoTdS
         EtgNlmuGxP4yBNpENWjj2TczqkmULTPZYpwIw=
Received: by 10.204.38.87 with SMTP id a23mr13285bke.37.1274145165116; Mon, 17 
	May 2010 18:12:45 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.58.131 with HTTP; Mon, 17 May 2010 18:12:25 -0700 (PDT)
In-Reply-To: <AANLkTiml6Wlb7udB5ZEPVlVv4g2Ueuh-22-ittZVUrPP@mail.gmail.com>
References: <AANLkTiny514aZfpLLVHElNrO2uYo26_vawhHJJsakAqN@mail.gmail.com> 
	<AANLkTim3vIPVhVVhxULxB_OBIT4p0LfHF-G99PsD-BGG@mail.gmail.com> 
	<AANLkTikzjvur2oCcKuEJi4_C54v8MU8jQW-XTbmke3OS@mail.gmail.com> 
	<AANLkTikdpUxKgRyi4xABRNMSynbipGnoZGghktQ2pXL8@mail.gmail.com> 
	<AANLkTim_nJjcybr19XCrROd2idfcPSByAnYtjGlONEs3@mail.gmail.com> 
	<AANLkTiml6Wlb7udB5ZEPVlVv4g2Ueuh-22-ittZVUrPP@mail.gmail.com>
From: Shay Banon <kimchy@gmail.com>
Date: Tue, 18 May 2010 04:12:25 +0300
Message-ID: <AANLkTinxwsGkupxeCv6yeovJsYeNxc6QidBdLrjLfkqI@mail.gmail.com>
Subject: Re: NRT and Caching based on IndexReader
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0050450243aaf584640486d40911
X-Virus-Checked: Checked by ClamAV on apache.org

--0050450243aaf584640486d40911
Content-Type: text/plain; charset=ISO-8859-1

Just saw that you opened a case for that. I think that its important in your
test case to also test for object identity, not just equals. This is because
the IndexReader (or the FieldCacheKey) are used as keys in weak hash maps,
which uses identity (==) equality for keys.

If FieldCacheKey is supposed to represent the key by which index readers
should be tested for "equality" (for example, it will be used in the
CachingWrapperFilter), and not the index reader itself, then I think it
should be renamed. What do you think? I am just looking now at what it does,
its new...

-shay.banon

On Tue, May 18, 2010 at 4:04 AM, Yonik Seeley <yonik@lucidimagination.com>wrote:

> On Mon, May 17, 2010 at 9:00 PM, Shay Banon <kimchy@gmail.com> wrote:
> > Great, so I am not imagining things this late into the night ... ;), not
> so
> > great, since using NRT with field cache (like sorting) or caching
> filters,
> > or anything that caches based on IndexReader not really an option. This
> > makes NRT very problematic to use in a real application.
>
> NRT is still pretty new :-)  And I do believe this is a bug, so we'll
> get it fixed.
> It's not actually a problem for FieldCache though - it no longer keys
> on the reader directly (if deleted docs are the only things that have
> changed, the FieldCache entry can still be shared).
>
> -Yonik
> http://www.lucidimagination.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0050450243aaf584640486d40911--

From java-user-return-46156-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 18 01:14:11 2010
Return-Path: <java-user-return-46156-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69539 invoked from network); 18 May 2010 01:14:10 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 18 May 2010 01:14:10 -0000
Received: (qmail 9052 invoked by uid 500); 18 May 2010 01:14:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8901 invoked by uid 500); 18 May 2010 01:14:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8893 invoked by uid 99); 18 May 2010 01:14:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 May 2010 01:14:08 +0000
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=AWL,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [203.58.95.125] (HELO mx01.infomedia.com.au) (203.58.95.125)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 May 2010 01:14:01 +0000
Received: from exchsydmbx1.syd.infomedia.com.au (203.58.95.254) by
 mx01.infomedia.com.au (203.58.95.125) with Microsoft SMTP Server id
 8.1.393.1; Tue, 18 May 2010 11:10:41 +1000
Received: from exchsydmbx1.syd.infomedia.com.au ([172.20.20.25]) by
 exchsydmbx1.syd.infomedia.com.au ([172.20.20.25]) with mapi; Tue, 18 May 2010
 11:13:39 +1000
From: Maduranga Kannangara <mkannangara@infomedia.com.au>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Tue, 18 May 2010 11:13:39 +1000
Subject: Deciding memory requirements for Lucene indexes proactively -- How
 to?
Thread-Topic: Deciding memory requirements for Lucene indexes proactively --
 How to?
Thread-Index: Acr2FrS4+wIE0y6DRBSMV5EaV0G/UAAEC7Mg
Message-ID: <5BFC50994978BD45AA5C557D45B4B860110C712874@exchsydmbx1.syd.infomedia.com.au>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
x-tm-as-product-ver: SMEX-8.0.0.1285-6.000.1038-17388.007
x-tm-as-result: No--49.721900-0.000000-31
x-tm-as-user-approved-sender: Yes
x-tm-as-user-blocked-sender: No
Content-Type: multipart/alternative;
	boundary="_000_5BFC50994978BD45AA5C557D45B4B860110C712874exchsydmbx1sy_"
MIME-Version: 1.0

--_000_5BFC50994978BD45AA5C557D45B4B860110C712874exchsydmbx1sy_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi guys

Is there a way (perhaps a formulae) to accurately
judge  the memory requirement for a Lucene index?
(May be based on number of documents or index
size etc?)

Reason I am asking is that we had two indexes
running on separate Tomcat instances and we decided
to move both these webapps (Solr) to a single Tomcat
for effective memory sharing. However our JVM
memory allocation was not accurate enough and the
Indexes started running OutOfMemory errors on
our production environment.

It would be much helpful if we can identify the
requirement for resources pro-actively.

Any help on the matter much appreciated.

We use: Solr 1.4, Java 1.6.0_20

Thanks in advance

Madu



--_000_5BFC50994978BD45AA5C557D45B4B860110C712874exchsydmbx1sy_--

From java-user-return-46157-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 18 01:15:18 2010
Return-Path: <java-user-return-46157-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69959 invoked from network); 18 May 2010 01:15:18 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 18 May 2010 01:15:18 -0000
Received: (qmail 11980 invoked by uid 500); 18 May 2010 01:15:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11949 invoked by uid 500); 18 May 2010 01:15:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11941 invoked by uid 99); 18 May 2010 01:15:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 May 2010 01:15:16 +0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=AWL,FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of kimchy@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 May 2010 01:15:10 +0000
Received: by fxm9 with SMTP id 9so339822fxm.35
        for <java-user@lucene.apache.org>; Mon, 17 May 2010 18:14:49 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=KQh5DTIs3sgJx09Y2JPbHxQBBHJWuLYKOcpm5paYhpw=;
        b=qiea7zHRF4Jh8nf33jIGDRT0FHINz6ueB3hFUh+iGXtjhvnyp/2nRvIkSyFHefgsaR
         ICbEWVY8mzMkZXWMS70sdNORCD+iFStCK2atUT2UKis3kdjsNokteHlm9zO6EOxbnY1t
         21XQ8yeoYRC7PqbUAdhjPtoA7NBQOVloP/UoE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=nprROS4pKimmbQPYwmiM7Dm+F4hGhUNPcISb5RW95QT0Sv75gzVd3nv3BPnYfOmzWN
         PTqGBzQfmb98vmfsoypj8jvIgiaTiaIhJsdQ7hEtqRaSpyWmmyjUZ/8yBvaOFJHFi2Mv
         lsVVPEjs6+lKXIU79uDVuRqFo8b4SY+ShcTI4=
Received: by 10.204.157.17 with SMTP id z17mr58841bkw.25.1274145289152; Mon, 
	17 May 2010 18:14:49 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.58.131 with HTTP; Mon, 17 May 2010 18:14:29 -0700 (PDT)
In-Reply-To: <AANLkTinxwsGkupxeCv6yeovJsYeNxc6QidBdLrjLfkqI@mail.gmail.com>
References: <AANLkTiny514aZfpLLVHElNrO2uYo26_vawhHJJsakAqN@mail.gmail.com> 
	<AANLkTim3vIPVhVVhxULxB_OBIT4p0LfHF-G99PsD-BGG@mail.gmail.com> 
	<AANLkTikzjvur2oCcKuEJi4_C54v8MU8jQW-XTbmke3OS@mail.gmail.com> 
	<AANLkTikdpUxKgRyi4xABRNMSynbipGnoZGghktQ2pXL8@mail.gmail.com> 
	<AANLkTim_nJjcybr19XCrROd2idfcPSByAnYtjGlONEs3@mail.gmail.com> 
	<AANLkTiml6Wlb7udB5ZEPVlVv4g2Ueuh-22-ittZVUrPP@mail.gmail.com> 
	<AANLkTinxwsGkupxeCv6yeovJsYeNxc6QidBdLrjLfkqI@mail.gmail.com>
From: Shay Banon <kimchy@gmail.com>
Date: Tue, 18 May 2010 04:14:29 +0300
Message-ID: <AANLkTiluCifXN7Vw9JK_l8B4o9iaKI82atZfIaUqavoI@mail.gmail.com>
Subject: Re: NRT and Caching based on IndexReader
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015175cb2c85a2a0f0486d411d8

--0015175cb2c85a2a0f0486d411d8
Content-Type: text/plain; charset=ISO-8859-1

Oh, and one more thing. Deleted docs is a sub case, with NRT, most people
will almost always add docs as well... . So it is still not really usable
for field cache, right?

On Tue, May 18, 2010 at 4:12 AM, Shay Banon <kimchy@gmail.com> wrote:

> Just saw that you opened a case for that. I think that its important in
> your test case to also test for object identity, not just equals. This is
> because the IndexReader (or the FieldCacheKey) are used as keys in weak hash
> maps, which uses identity (==) equality for keys.
>
> If FieldCacheKey is supposed to represent the key by which index readers
> should be tested for "equality" (for example, it will be used in the
> CachingWrapperFilter), and not the index reader itself, then I think it
> should be renamed. What do you think? I am just looking now at what it does,
> its new...
>
> -shay.banon
>
>
> On Tue, May 18, 2010 at 4:04 AM, Yonik Seeley <yonik@lucidimagination.com>wrote:
>
>> On Mon, May 17, 2010 at 9:00 PM, Shay Banon <kimchy@gmail.com> wrote:
>> > Great, so I am not imagining things this late into the night ... ;), not
>> so
>> > great, since using NRT with field cache (like sorting) or caching
>> filters,
>> > or anything that caches based on IndexReader not really an option. This
>> > makes NRT very problematic to use in a real application.
>>
>> NRT is still pretty new :-)  And I do believe this is a bug, so we'll
>> get it fixed.
>> It's not actually a problem for FieldCache though - it no longer keys
>> on the reader directly (if deleted docs are the only things that have
>> changed, the FieldCache entry can still be shared).
>>
>> -Yonik
>> http://www.lucidimagination.com
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

--0015175cb2c85a2a0f0486d411d8--

From java-user-return-46158-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 18 01:21:22 2010
Return-Path: <java-user-return-46158-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71319 invoked from network); 18 May 2010 01:21:21 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 18 May 2010 01:21:21 -0000
Received: (qmail 21108 invoked by uid 500); 18 May 2010 01:21:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21077 invoked by uid 500); 18 May 2010 01:21:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21069 invoked by uid 99); 18 May 2010 01:21:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 May 2010 01:21:19 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of yseeley@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 May 2010 01:21:12 +0000
Received: by wyb40 with SMTP id 40so198036wyb.35
        for <java-user@lucene.apache.org>; Mon, 17 May 2010 18:20:52 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:sender:reply-to:received
         :in-reply-to:references:date:x-google-sender-auth:message-id:subject
         :from:to:content-type;
        bh=Sy8Vx92Vo+dRLTS8jZ8jCAoomVtMs93hOkUAjlBS7fI=;
        b=a6cXKj4eVpp268uf5iZLf0FInsSEOxchuSDvYkEiY+EkzUuCdlHOEC6EkKn4Wszd7k
         Ss/XEESGIGjXkedDMcfia2qNZvv0iXlflWVVysgXVNg+y6RJONXLZcifUiN9P3pHwzV7
         jmqh6M4Tr2/19JCTVMEX/oOzLLgHR94bmekfs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:reply-to:in-reply-to:references:date
         :x-google-sender-auth:message-id:subject:from:to:content-type;
        b=oNJ79/D799X+lQCsGA04tbLOIo0LMRt6B+OlbLq8WCrYsyDXAcFqW6Yo4aOpvhIYFA
         jjecEydKjUAZ7AVog1+9OhkuQLQZa96naHOW5TcKWc/er2lv5RavmIoQsrN8fnT4ic7R
         KyU7tAWKpZf/WDkNL3aR0ohMxrzc7oEyImfh0=
MIME-Version: 1.0
Received: by 10.216.174.139 with SMTP id x11mr3644699wel.194.1274145652562; 
	Mon, 17 May 2010 18:20:52 -0700 (PDT)
Sender: yseeley@gmail.com
Reply-To: yonik@lucidimagination.com
Received: by 10.216.22.140 with HTTP; Mon, 17 May 2010 18:20:52 -0700 (PDT)
In-Reply-To: <AANLkTinxwsGkupxeCv6yeovJsYeNxc6QidBdLrjLfkqI@mail.gmail.com>
References: <AANLkTiny514aZfpLLVHElNrO2uYo26_vawhHJJsakAqN@mail.gmail.com>
	 <AANLkTim3vIPVhVVhxULxB_OBIT4p0LfHF-G99PsD-BGG@mail.gmail.com>
	 <AANLkTikzjvur2oCcKuEJi4_C54v8MU8jQW-XTbmke3OS@mail.gmail.com>
	 <AANLkTikdpUxKgRyi4xABRNMSynbipGnoZGghktQ2pXL8@mail.gmail.com>
	 <AANLkTim_nJjcybr19XCrROd2idfcPSByAnYtjGlONEs3@mail.gmail.com>
	 <AANLkTiml6Wlb7udB5ZEPVlVv4g2Ueuh-22-ittZVUrPP@mail.gmail.com>
	 <AANLkTinxwsGkupxeCv6yeovJsYeNxc6QidBdLrjLfkqI@mail.gmail.com>
Date: Mon, 17 May 2010 21:20:52 -0400
X-Google-Sender-Auth: vgTsa9qoWIQCrhBgTETJw7Z9Pcg
Message-ID: <AANLkTinn2thjZdoqC8afy8QvBbVH91ChDAlaqWQnSbfS@mail.gmail.com>
Subject: Re: NRT and Caching based on IndexReader
From: Yonik Seeley <yonik@lucidimagination.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

On Mon, May 17, 2010 at 9:12 PM, Shay Banon <kimchy@gmail.com> wrote:
> Just saw that you opened a case for that. I think that its important in your
> test case to also test for object identity, not just equals. This is because
> the IndexReader (or the FieldCacheKey) are used as keys in weak hash maps,
> which uses identity (==) equality for keys.

Yeah, just me being lazy... I just knew that those objects don't
implement equals and hence it ends up the same as ==.  But I agree an
explicit == would be better.

> If FieldCacheKey is supposed to represent the key by which index readers
> should be tested for "equality" (for example, it will be used in the
> CachingWrapperFilter), and not the index reader itself, then I think it
> should be renamed. What do you think? I am just looking now at what it does,
> its new...

I don't think it's general purpose, since it ignores things like a
change in deleted documents.  I think we should use the same reader
when the segment has not been changed.

-Yonik
http://www.lucidimagination.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46159-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 18 01:24:28 2010
Return-Path: <java-user-return-46159-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74741 invoked from network); 18 May 2010 01:24:28 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 18 May 2010 01:24:28 -0000
Received: (qmail 26817 invoked by uid 500); 18 May 2010 01:24:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26674 invoked by uid 500); 18 May 2010 01:24:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26666 invoked by uid 99); 18 May 2010 01:24:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 May 2010 01:24:26 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of yseeley@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 May 2010 01:24:19 +0000
Received: by wyb40 with SMTP id 40so199242wyb.35
        for <java-user@lucene.apache.org>; Mon, 17 May 2010 18:23:58 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:sender:reply-to:received
         :in-reply-to:references:date:x-google-sender-auth:message-id:subject
         :from:to:content-type:content-transfer-encoding;
        bh=OIEKJlF4J3ulNdEaNaBQ3dG+mZlnisMOZkr7KHhHysw=;
        b=SbLyLGZfa6sI1tTSa9GD/ZUUdp8J+k1TYhMVL0xx9reRinSD7k4/L68UT3tbdFgpIw
         zLvVBXVLkxK/j5so4h/jyRaWdG6clm4yJhnpqARoIhks2mY3pAtOnEyWfYH8x/yaH4xi
         /KWExzx4gVzhJ+hOw68zOBTHJJL7+6y/+rYZE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:reply-to:in-reply-to:references:date
         :x-google-sender-auth:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=jIR/JcmNYMoKYRh8keBFYQRJsp5WIL3495YizweeFDa0FeTnxWpiLlmLo9MXZ90NVp
         azgnYk+QPCP7m0QhYm4mdKwisO6FLKGY9foQakyE2m4OykBBBBoPPhKkgb1jcA1hMFVp
         wLMexvBG3z+1LPeJscoskYkKB3SvUBmiO7UA0=
MIME-Version: 1.0
Received: by 10.216.85.1 with SMTP id t1mr3630957wee.3.1274145838767; Mon, 17 
	May 2010 18:23:58 -0700 (PDT)
Sender: yseeley@gmail.com
Reply-To: yonik@lucidimagination.com
Received: by 10.216.22.140 with HTTP; Mon, 17 May 2010 18:23:58 -0700 (PDT)
In-Reply-To: <AANLkTiluCifXN7Vw9JK_l8B4o9iaKI82atZfIaUqavoI@mail.gmail.com>
References: <AANLkTiny514aZfpLLVHElNrO2uYo26_vawhHJJsakAqN@mail.gmail.com>
	 <AANLkTim3vIPVhVVhxULxB_OBIT4p0LfHF-G99PsD-BGG@mail.gmail.com>
	 <AANLkTikzjvur2oCcKuEJi4_C54v8MU8jQW-XTbmke3OS@mail.gmail.com>
	 <AANLkTikdpUxKgRyi4xABRNMSynbipGnoZGghktQ2pXL8@mail.gmail.com>
	 <AANLkTim_nJjcybr19XCrROd2idfcPSByAnYtjGlONEs3@mail.gmail.com>
	 <AANLkTiml6Wlb7udB5ZEPVlVv4g2Ueuh-22-ittZVUrPP@mail.gmail.com>
	 <AANLkTinxwsGkupxeCv6yeovJsYeNxc6QidBdLrjLfkqI@mail.gmail.com>
	 <AANLkTiluCifXN7Vw9JK_l8B4o9iaKI82atZfIaUqavoI@mail.gmail.com>
Date: Mon, 17 May 2010 21:23:58 -0400
X-Google-Sender-Auth: yubp2xlcfFM3IuHtqQP-BwYl-Ns
Message-ID: <AANLkTiljOkW1G_6SMg8KhAchOrn-9EYYzaY_8Y1IZi7y@mail.gmail.com>
Subject: Re: NRT and Caching based on IndexReader
From: Yonik Seeley <yonik@lucidimagination.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On Mon, May 17, 2010 at 9:14 PM, Shay Banon <kimchy@gmail.com> wrote:
> Oh, and one more thing. Deleted docs is a sub case, with NRT, most people
> will almost always add docs as well... . So it is still not really usable
> for field cache, right?

FieldCache should be fine for the general cases - the same entry will
be used if the segment hasn't changed at all, or if the segment has
only changed which documents are deleted.  Adding new documents adds
new segments and does affect (until merge) existing segments, so the
entries will be reused.

-Yonik
http://www.lucidimagination.com


> On Tue, May 18, 2010 at 4:12 AM, Shay Banon <kimchy@gmail.com> wrote:
>
>> Just saw that you opened a case for that. I think that its important in
>> your test case to also test for object identity, not just equals. This i=
s
>> because the IndexReader (or the FieldCacheKey) are used as keys in weak =
hash
>> maps, which uses identity (=3D=3D) equality for keys.
>>
>> If FieldCacheKey is supposed to represent the key by which index readers
>> should be tested for "equality" (for example, it will be used in the
>> CachingWrapperFilter), and not the index reader itself, then I think it
>> should be renamed. What do you think? I am just looking now at what it d=
oes,
>> its new...
>>
>> -shay.banon
>>
>>
>> On Tue, May 18, 2010 at 4:04 AM, Yonik Seeley <yonik@lucidimagination.co=
m>wrote:
>>
>>> On Mon, May 17, 2010 at 9:00 PM, Shay Banon <kimchy@gmail.com> wrote:
>>> > Great, so I am not imagining things this late into the night ... ;), =
not
>>> so
>>> > great, since using NRT with field cache (like sorting) or caching
>>> filters,
>>> > or anything that caches based on IndexReader not really an option. Th=
is
>>> > makes NRT very problematic to use in a real application.
>>>
>>> NRT is still pretty new :-) =A0And I do believe this is a bug, so we'll
>>> get it fixed.
>>> It's not actually a problem for FieldCache though - it no longer keys
>>> on the reader directly (if deleted docs are the only things that have
>>> changed, the FieldCache entry can still be shared).
>>>
>>> -Yonik
>>> http://www.lucidimagination.com
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46160-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 18 01:33:25 2010
Return-Path: <java-user-return-46160-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76827 invoked from network); 18 May 2010 01:33:25 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 18 May 2010 01:33:25 -0000
Received: (qmail 41117 invoked by uid 500); 18 May 2010 01:33:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41083 invoked by uid 500); 18 May 2010 01:33:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41075 invoked by uid 99); 18 May 2010 01:33:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 May 2010 01:33:23 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of kimchy@gmail.com designates 72.14.220.154 as permitted sender)
Received: from [72.14.220.154] (HELO fg-out-1718.google.com) (72.14.220.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 May 2010 01:33:17 +0000
Received: by fg-out-1718.google.com with SMTP id e12so526533fga.5
        for <java-user@lucene.apache.org>; Mon, 17 May 2010 18:32:56 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=07JbTGvn5oLCf+WjS67Yofsaj0cBAF4iplM/Evuw5FU=;
        b=VY33kTSGlITMa6IfwVtpSvIsIcvI4C5PYm2ft2/1vbUeMc7pINh9LcZo03H1XxD1d/
         S4UmCxvIWdMZ6i8f6jdayteKLaTZZrxmXNI90+HUlQqhMRj0OQ2c3fXvLcRNdf13RxNh
         Ukcpgh71/OlL4GYMWGnbVADj8AwbVFYZObGV0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=e2TdnwlLb3hJ3CB2su3VNPt+1qXWFnvy1Gk9ABJBusLvYoNefu5yWXftHWMJ81ndKI
         8SWRGck11zHeE+geoddLmfIxBObt4CmzvFTI0TNDnJerh4WzwIjWMjy+WyhsfrKekBbq
         5QX99WQxITQtIlm7l0FYB+F7bHK6bjXdNeFas=
Received: by 10.204.38.87 with SMTP id a23mr16277bke.37.1274146376100; Mon, 17 
	May 2010 18:32:56 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.58.131 with HTTP; Mon, 17 May 2010 18:32:36 -0700 (PDT)
In-Reply-To: <AANLkTiljOkW1G_6SMg8KhAchOrn-9EYYzaY_8Y1IZi7y@mail.gmail.com>
References: <AANLkTiny514aZfpLLVHElNrO2uYo26_vawhHJJsakAqN@mail.gmail.com> 
	<AANLkTim3vIPVhVVhxULxB_OBIT4p0LfHF-G99PsD-BGG@mail.gmail.com> 
	<AANLkTikzjvur2oCcKuEJi4_C54v8MU8jQW-XTbmke3OS@mail.gmail.com> 
	<AANLkTikdpUxKgRyi4xABRNMSynbipGnoZGghktQ2pXL8@mail.gmail.com> 
	<AANLkTim_nJjcybr19XCrROd2idfcPSByAnYtjGlONEs3@mail.gmail.com> 
	<AANLkTiml6Wlb7udB5ZEPVlVv4g2Ueuh-22-ittZVUrPP@mail.gmail.com> 
	<AANLkTinxwsGkupxeCv6yeovJsYeNxc6QidBdLrjLfkqI@mail.gmail.com> 
	<AANLkTiluCifXN7Vw9JK_l8B4o9iaKI82atZfIaUqavoI@mail.gmail.com> 
	<AANLkTiljOkW1G_6SMg8KhAchOrn-9EYYzaY_8Y1IZi7y@mail.gmail.com>
From: Shay Banon <kimchy@gmail.com>
Date: Tue, 18 May 2010 04:32:36 +0300
Message-ID: <AANLkTilp3zvFdSPF2bn9iLN63ZD70aSnhObcO0S12Zvb@mail.gmail.com>
Subject: Re: NRT and Caching based on IndexReader
To: java-user@lucene.apache.org, yonik@lucidimagination.com
Content-Type: multipart/alternative; boundary=0050450243aa23ad500486d4525d

--0050450243aa23ad500486d4525d
Content-Type: text/plain; charset=ISO-8859-1

Right, make sense.

On Tue, May 18, 2010 at 4:23 AM, Yonik Seeley <yonik@lucidimagination.com>wrote:

> On Mon, May 17, 2010 at 9:14 PM, Shay Banon <kimchy@gmail.com> wrote:
> > Oh, and one more thing. Deleted docs is a sub case, with NRT, most people
> > will almost always add docs as well... . So it is still not really usable
> > for field cache, right?
>
> FieldCache should be fine for the general cases - the same entry will
> be used if the segment hasn't changed at all, or if the segment has
> only changed which documents are deleted.  Adding new documents adds
> new segments and does affect (until merge) existing segments, so the
> entries will be reused.
>
> -Yonik
> http://www.lucidimagination.com
>
>
> > On Tue, May 18, 2010 at 4:12 AM, Shay Banon <kimchy@gmail.com> wrote:
> >
> >> Just saw that you opened a case for that. I think that its important in
> >> your test case to also test for object identity, not just equals. This
> is
> >> because the IndexReader (or the FieldCacheKey) are used as keys in weak
> hash
> >> maps, which uses identity (==) equality for keys.
> >>
> >> If FieldCacheKey is supposed to represent the key by which index readers
> >> should be tested for "equality" (for example, it will be used in the
> >> CachingWrapperFilter), and not the index reader itself, then I think it
> >> should be renamed. What do you think? I am just looking now at what it
> does,
> >> its new...
> >>
> >> -shay.banon
> >>
> >>
> >> On Tue, May 18, 2010 at 4:04 AM, Yonik Seeley <
> yonik@lucidimagination.com>wrote:
> >>
> >>> On Mon, May 17, 2010 at 9:00 PM, Shay Banon <kimchy@gmail.com> wrote:
> >>> > Great, so I am not imagining things this late into the night ... ;),
> not
> >>> so
> >>> > great, since using NRT with field cache (like sorting) or caching
> >>> filters,
> >>> > or anything that caches based on IndexReader not really an option.
> This
> >>> > makes NRT very problematic to use in a real application.
> >>>
> >>> NRT is still pretty new :-)  And I do believe this is a bug, so we'll
> >>> get it fixed.
> >>> It's not actually a problem for FieldCache though - it no longer keys
> >>> on the reader directly (if deleted docs are the only things that have
> >>> changed, the FieldCache entry can still be shared).
> >>>
> >>> -Yonik
> >>> http://www.lucidimagination.com
> >>>
> >>> ---------------------------------------------------------------------
> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>
> >>>
> >>
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0050450243aa23ad500486d4525d--

From java-user-return-46161-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 18 05:57:27 2010
Return-Path: <java-user-return-46161-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33140 invoked from network); 18 May 2010 05:57:27 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 18 May 2010 05:57:27 -0000
Received: (qmail 42024 invoked by uid 500); 18 May 2010 05:57:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41964 invoked by uid 500); 18 May 2010 05:57:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41955 invoked by uid 99); 18 May 2010 05:57:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 May 2010 05:57:21 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of srbh.grwl@gmail.com designates 74.125.83.176 as permitted sender)
Received: from [74.125.83.176] (HELO mail-pv0-f176.google.com) (74.125.83.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 May 2010 05:57:14 +0000
Received: by pva4 with SMTP id 4so1875473pva.35
        for <java-user@lucene.apache.org>; Mon, 17 May 2010 22:56:52 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=CcvopkzgHCZ/2HZ/vFIHV5kOpKI/YxEgLpYG2R83osM=;
        b=dMp1dw4aQAjVmP8280w3s7Q+LGqZelRSI94v2vWki2/3pbiYfzi8Coohsf/cC20EsX
         zPUcQHAiX6CwHpYyLBqyJb01b6MTjGvtcZK7PHu8elfuwo1O/R1cnjWe19pfASmldfXR
         kCVm7Gpn7mP/3BKv2iOIjT0QxTfnvRFdualJs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=iXdB4kn7WZ8uT3EY+OfozdIC0XkA2qjicemlHcsRteL2I8FFtDW0R2tgJ0AItIu2/T
         Of6NNs0XYH7abbWbSzOxEokeYa9bbCRkxEfDA5559MBwmdjRS2iTL4ajYSHg8K8Alc4w
         plN63j0lGb9yRgS5doSUe4yxNfUVq6Vmu9iNI=
MIME-Version: 1.0
Received: by 10.143.27.16 with SMTP id e16mr1345672wfj.24.1274162212091; Mon, 
	17 May 2010 22:56:52 -0700 (PDT)
Received: by 10.143.163.6 with HTTP; Mon, 17 May 2010 22:56:52 -0700 (PDT)
Date: Tue, 18 May 2010 11:26:52 +0530
Message-ID: <AANLkTilSS--ZRk3eQYSCq8c7krc4IdpugEhB_1ztn7Pj@mail.gmail.com>
Subject: Lock obtain timed out
From: Saurabh Agarwal <srbh.grwl@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00504502cbf709b6bb0486d8025c
X-Virus-Checked: Checked by ClamAV on apache.org

--00504502cbf709b6bb0486d8025c
Content-Type: text/plain; charset=ISO-8859-1

Hi,

I am using Lucene 3.0.0 to index (with the demo application IndexFiles) a 6
GB corpus which is on NFS, more over I am storing my index on NFS too. But
when I run the program
I get following exception



caught a class org.apache.lucene.store.LockObtainFailedException
 with message: Lock obtain timed out:
NativeFSLock@/usr/home/saurabh/index/write.lock:
java.io.IOException: Operation not supported

Please Help out


Regards
Saurabh Agarwal

--00504502cbf709b6bb0486d8025c--

From java-user-return-46162-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 18 06:57:54 2010
Return-Path: <java-user-return-46162-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51148 invoked from network); 18 May 2010 06:57:53 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 18 May 2010 06:57:53 -0000
Received: (qmail 95824 invoked by uid 500); 18 May 2010 06:57:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95618 invoked by uid 500); 18 May 2010 06:57:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95610 invoked by uid 99); 18 May 2010 06:57:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 May 2010 06:57:48 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vkreddy_in@hotmail.com designates 65.54.61.97 as permitted sender)
Received: from [65.54.61.97] (HELO snt0-omc2-s46.snt0.hotmail.com) (65.54.61.97)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 May 2010 06:57:40 +0000
Received: from SNT110-W14 ([65.55.90.73]) by snt0-omc2-s46.snt0.hotmail.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Mon, 17 May 2010 23:57:19 -0700
Message-ID: <SNT110-W149E78C61BBE8C79C1EDA8E4E10@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_31d6a192-69f3-49c1-81e2-74a3f3e99a56_"
X-Originating-IP: [155.35.46.13]
From: vijay reddy <vkreddy_in@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: Using Lucene to Query File properties in Windows
Date: Tue, 18 May 2010 06:57:19 +0000
Importance: Normal
MIME-Version: 1.0
X-OriginalArrivalTime: 18 May 2010 06:57:19.0238 (UTC) FILETIME=[5B924260:01CAF657]

--_31d6a192-69f3-49c1-81e2-74a3f3e99a56_
Content-Type: text/plain; charset="Windows-1252"
Content-Transfer-Encoding: quoted-printable




   =20
       =20



   =20
   =20
                 =20
           =20
                Hi =2C




I am planning to use Apache lucense in one of my projects=2C I want to=20
index files based on the file properties (I won=92t be indexing the data)=20
and I want lucense to query the index so that I can quickly find list of
 files to based on the properties .




E.g: give me all the files with access time greater than 10/10/2005=20
and access time less than 10/04/2010 and file created by james.




Can i use Lucene  for these kind of projects ?




does Lucense supprot queries like above ?



             		 	   		 =20
_________________________________________________________________
The amazing world in sharp snaps
http://news.in.msn.com/gallery/archive.aspx=

--_31d6a192-69f3-49c1-81e2-74a3f3e99a56_--

From java-user-return-46163-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 18 08:12:05 2010
Return-Path: <java-user-return-46163-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65292 invoked from network); 18 May 2010 08:12:04 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 18 May 2010 08:12:04 -0000
Received: (qmail 71344 invoked by uid 500); 18 May 2010 08:12:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70985 invoked by uid 500); 18 May 2010 08:12:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70969 invoked by uid 99); 18 May 2010 08:12:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 May 2010 08:12:01 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 May 2010 08:11:53 +0000
Received: by fxm9 with SMTP id 9so586790fxm.35
        for <java-user@lucene.apache.org>; Tue, 18 May 2010 01:11:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=5BEcQW01Vq9NhhfJqZq4Nkim/8wZ431kufnzmuYxZkI=;
        b=tP3RCc2Hy/xgWf94+lCWHJhdDOAcgBnsL1iMG4dDidGkTFulGLbHmPcrupGoo3WvzE
         fwsRG+t6KumHbXgoKteLENb6g8mIc0d2r3BI7x0ewR4h0BBHsXod/EtukTSgEWBGKyVR
         Uqog1mRGA/mnvmFk9z1ZA3pZCreV6ukUfamLk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=cfnt4EGrOwYnTUGSNyra0sAgY62BGr8NX8x2VwQ3qcl0FbBWxKgCUs1gT7RjEsz9qh
         d7US2GalRHgacN6X5cCA24AwQuZ0845+yU8MXw7R2Ar8Fc2CzCdnIuJ3aIYA82Ii0JUx
         dhHhM2YXd5yTfVuhalkU/RsAd0kTvX3GIdWNI=
Received: by 10.204.21.18 with SMTP id h18mr100854bkb.177.1274170293276; Tue, 
	18 May 2010 01:11:33 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.54.198 with HTTP; Tue, 18 May 2010 01:11:13 -0700 (PDT)
In-Reply-To: <AANLkTilSS--ZRk3eQYSCq8c7krc4IdpugEhB_1ztn7Pj@mail.gmail.com>
References: <AANLkTilSS--ZRk3eQYSCq8c7krc4IdpugEhB_1ztn7Pj@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Tue, 18 May 2010 09:11:13 +0100
Message-ID: <AANLkTinvvVOTJF4zLFDMX9SgPoLIDgPNL-gNUmvzWFCD@mail.gmail.com>
Subject: Re: Lock obtain timed out
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Use SimpleFSLockFactory.  The default, NativeFSLockFactory, doesn't
play well with NFS.

And a warning: lucene does work on NFS but you may run into problems
if your index has a lot of modifications and/or is accessed from
different servers.


--
Ian.



On Tue, May 18, 2010 at 6:56 AM, Saurabh Agarwal <srbh.grwl@gmail.com> wrot=
e:
> Hi,
>
> I am using Lucene 3.0.0 to index (with the demo application IndexFiles) a=
 6
> GB corpus which is on NFS, more over I am storing my index on NFS too. Bu=
t
> when I run the program
> I get following exception
>
>
>
> caught a class org.apache.lucene.store.LockObtainFailedException
> =A0with message: Lock obtain timed out:
> NativeFSLock@/usr/home/saurabh/index/write.lock:
> java.io.IOException: Operation not supported
>
> Please Help out
>
>
> Regards
> Saurabh Agarwal
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46164-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 18 08:13:35 2010
Return-Path: <java-user-return-46164-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65518 invoked from network); 18 May 2010 08:13:35 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 18 May 2010 08:13:35 -0000
Received: (qmail 74185 invoked by uid 500); 18 May 2010 08:13:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73915 invoked by uid 500); 18 May 2010 08:13:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73906 invoked by uid 99); 18 May 2010 08:13:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 May 2010 08:13:32 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of srbh.grwl@gmail.com designates 209.85.212.176 as permitted sender)
Received: from [209.85.212.176] (HELO mail-px0-f176.google.com) (209.85.212.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 May 2010 08:13:24 +0000
Received: by pxi10 with SMTP id 10so3941333pxi.35
        for <java-user@lucene.apache.org>; Tue, 18 May 2010 01:13:01 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=A2PiTX43sZz//uSBYpwlmKeW6jhIXkkLrn/LTM2OZ7o=;
        b=qPVppGoFhnmH/0gIKU2igi1hLtFmciZa7wlt4Fqcom6Ax9n6rEhQx0RYPcO6afIP3w
         s54DdwlgOVfsMz8m+7lyGoiYZPds89vwlHoWVedjSeOwiFbQh5Ql7WGxxILzd1MZ5vTL
         Q3POfwEb9LnvI6vOVl2ttGXuSlEzsVH9ZJmIM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=AqUpaG2N7U+AMNhgpWTssMHUU8aE8oWX8y4/ZplVkU9NdU0AqghVOiz1gEueX1Lnsv
         omsW+c0XPJ2CXPqUsMHzzk0JIZcbnSLIhPCqY5WOqcm2IjZ4goyqzTWkQ5dO63bb4nAS
         LPmESIHphjF9aIGP/kKAmfT7PU8L6JYhBGZ1g=
MIME-Version: 1.0
Received: by 10.142.201.17 with SMTP id y17mr630670wff.283.1274170381063; Tue, 
	18 May 2010 01:13:01 -0700 (PDT)
Received: by 10.143.163.6 with HTTP; Tue, 18 May 2010 01:13:01 -0700 (PDT)
In-Reply-To: <AANLkTinvvVOTJF4zLFDMX9SgPoLIDgPNL-gNUmvzWFCD@mail.gmail.com>
References: <AANLkTilSS--ZRk3eQYSCq8c7krc4IdpugEhB_1ztn7Pj@mail.gmail.com>
	 <AANLkTinvvVOTJF4zLFDMX9SgPoLIDgPNL-gNUmvzWFCD@mail.gmail.com>
Date: Tue, 18 May 2010 13:43:01 +0530
Message-ID: <AANLkTilo4fCeJzkMnV-O64DbRo3JeozJZvkUqr27l0AP@mail.gmail.com>
Subject: Re: Lock obtain timed out
From: Saurabh Agarwal <srbh.grwl@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd32e56f256bc0486d9e801
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd32e56f256bc0486d9e801
Content-Type: text/plain; charset=ISO-8859-1

Thanks :)

i am using only one server to create the index
Saurabh Agarwal


On Tue, May 18, 2010 at 1:41 PM, Ian Lea <ian.lea@gmail.com> wrote:

> Use SimpleFSLockFactory.  The default, NativeFSLockFactory, doesn't
> play well with NFS.
>
> And a warning: lucene does work on NFS but you may run into problems
> if your index has a lot of modifications and/or is accessed from
> different servers.
>
>
> --
> Ian.
>
>
>
> On Tue, May 18, 2010 at 6:56 AM, Saurabh Agarwal <srbh.grwl@gmail.com>
> wrote:
> > Hi,
> >
> > I am using Lucene 3.0.0 to index (with the demo application IndexFiles) a
> 6
> > GB corpus which is on NFS, more over I am storing my index on NFS too.
> But
> > when I run the program
> > I get following exception
> >
> >
> >
> > caught a class org.apache.lucene.store.LockObtainFailedException
> >  with message: Lock obtain timed out:
> > NativeFSLock@/usr/home/saurabh/index/write.lock:
> > java.io.IOException: Operation not supported
> >
> > Please Help out
> >
> >
> > Regards
> > Saurabh Agarwal
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd32e56f256bc0486d9e801--

From java-user-return-46165-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 18 08:16:28 2010
Return-Path: <java-user-return-46165-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66233 invoked from network); 18 May 2010 08:16:28 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 18 May 2010 08:16:28 -0000
Received: (qmail 77552 invoked by uid 500); 18 May 2010 08:16:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77398 invoked by uid 500); 18 May 2010 08:16:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77390 invoked by uid 99); 18 May 2010 08:16:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 May 2010 08:16:25 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 May 2010 08:16:17 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 8980ED36003
	for <java-user@lucene.apache.org>; Tue, 18 May 2010 10:15:57 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id MlD6XUyL5UAI for <java-user@lucene.apache.org>;
	Tue, 18 May 2010 10:15:40 +0200 (CEST)
Received: from VEGA (WDC-MARE.marum.de [134.102.249.78])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 3DE74D36002
	for <java-user@lucene.apache.org>; Tue, 18 May 2010 10:15:40 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <AANLkTilSS--ZRk3eQYSCq8c7krc4IdpugEhB_1ztn7Pj@mail.gmail.com>	 <AANLkTinvvVOTJF4zLFDMX9SgPoLIDgPNL-gNUmvzWFCD@mail.gmail.com> <AANLkTilo4fCeJzkMnV-O64DbRo3JeozJZvkUqr27l0AP@mail.gmail.com>
In-Reply-To: <AANLkTilo4fCeJzkMnV-O64DbRo3JeozJZvkUqr27l0AP@mail.gmail.com>
Subject: RE: Lock obtain timed out
Date: Tue, 18 May 2010 10:16:15 +0200
Message-ID: <001401caf662$62921850$27b648f0$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQI9I0M4RzEIQcF844hxm/scCt5t9QD7utY8AVsouc2RX8cXMA==
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

Then why use NFS?

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Saurabh Agarwal [mailto:srbh.grwl@gmail.com]
> Sent: Tuesday, May 18, 2010 10:13 AM
> To: java-user@lucene.apache.org
> Subject: Re: Lock obtain timed out
> 
> Thanks :)
> 
> i am using only one server to create the index Saurabh Agarwal
> 
> 
> On Tue, May 18, 2010 at 1:41 PM, Ian Lea <ian.lea@gmail.com> wrote:
> 
> > Use SimpleFSLockFactory.  The default, NativeFSLockFactory, doesn't
> > play well with NFS.
> >
> > And a warning: lucene does work on NFS but you may run into problems
> > if your index has a lot of modifications and/or is accessed from
> > different servers.
> >
> >
> > --
> > Ian.
> >
> >
> >
> > On Tue, May 18, 2010 at 6:56 AM, Saurabh Agarwal <srbh.grwl@gmail.com>
> > wrote:
> > > Hi,
> > >
> > > I am using Lucene 3.0.0 to index (with the demo application
> > > IndexFiles) a
> > 6
> > > GB corpus which is on NFS, more over I am storing my index on NFS too.
> > But
> > > when I run the program
> > > I get following exception
> > >
> > >
> > >
> > > caught a class org.apache.lucene.store.LockObtainFailedException
> > >  with message: Lock obtain timed out:
> > > NativeFSLock@/usr/home/saurabh/index/write.lock:
> > > java.io.IOException: Operation not supported
> > >
> > > Please Help out
> > >
> > >
> > > Regards
> > > Saurabh Agarwal
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46166-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 18 08:17:28 2010
Return-Path: <java-user-return-46166-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66335 invoked from network); 18 May 2010 08:17:27 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 18 May 2010 08:17:27 -0000
Received: (qmail 79406 invoked by uid 500); 18 May 2010 08:17:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79336 invoked by uid 500); 18 May 2010 08:17:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79328 invoked by uid 99); 18 May 2010 08:17:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 May 2010 08:17:25 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 May 2010 08:17:17 +0000
Received: by fxm9 with SMTP id 9so592320fxm.35
        for <java-user@lucene.apache.org>; Tue, 18 May 2010 01:16:57 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=/MT7uN8kXMRlsTSKj8Crfd95Uf6G9YrWcd+Tg6Fk5fc=;
        b=ONwDEv3v0oD65qsdJFwmodjeMdvT+KtIwXCbEb71fewMxWOj8XMaEY7uccM058NlQJ
         md1gtMsHshDf2Z4xtzgxUnMZOaWNZsHChHy8yxftbGfjdLfD3kw8Aetm/yVsUwYn1u5z
         SEnSsS2dP4ldugp1lDFsOtzMOFyZExmt1w5d8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=tSwxj3XYxVgQe1JisMsFwPfw3StDq/tc6DgjnLptgI6i1R44xInyqI3tqvV4kALTOs
         VqhIc0Te7qt7AKeHwviJqn6FLVjqdDLeEEvlojCWHJMyDH0fuTysYOWTtZv2BB4YOfEp
         LvjPPZjyYaxqaGJjvumMF7P0seMAgUMLLBU1c=
Received: by 10.204.34.130 with SMTP id l2mr145615bkd.145.1274170617100; Tue, 
	18 May 2010 01:16:57 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.54.198 with HTTP; Tue, 18 May 2010 01:16:37 -0700 (PDT)
In-Reply-To: <SNT110-W149E78C61BBE8C79C1EDA8E4E10@phx.gbl>
References: <SNT110-W149E78C61BBE8C79C1EDA8E4E10@phx.gbl>
From: Ian Lea <ian.lea@gmail.com>
Date: Tue, 18 May 2010 09:16:37 +0100
Message-ID: <AANLkTinLYA2XiTdlcMazX4BSnyrsH7gNMZFAqStwR9vh@mail.gmail.com>
Subject: Re: Using Lucene to Query File properties in Windows
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Sure. Create an index with fields like

name: somefile.whatever
creator: james
lastmod: 20100518
created: 20100518
...

Make sure that the fields that you want to search on are indexed,
create some queries and away you go.  You'll need range queries for
the before and since tests.


Good luck.

--
Ian.


On Tue, May 18, 2010 at 7:57 AM, vijay reddy <vkreddy_in@hotmail.com> wrote=
:
>
>
>
>
>
>
>
>
>
>
>
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0Hi ,
>
>
>
>
> I am planning to use Apache lucense in one of my projects, I want to
> index files based on the file properties (I won=92t be indexing the data)
> and I want lucense to query the index so that I can quickly find list of
> =A0files to based on the properties .
>
>
>
>
> E.g: give me all the files with access time greater than 10/10/2005
> and access time less than 10/04/2010 and file created by james.
>
>
>
>
> Can i use Lucene =A0for these kind of projects ?
>
>
>
>
> does Lucense supprot queries like above ?
>
>
>
>
> _________________________________________________________________
> The amazing world in sharp snaps
> http://news.in.msn.com/gallery/archive.aspx

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46167-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 18 08:30:30 2010
Return-Path: <java-user-return-46167-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69399 invoked from network); 18 May 2010 08:30:29 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 18 May 2010 08:30:29 -0000
Received: (qmail 956 invoked by uid 500); 18 May 2010 08:30:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 707 invoked by uid 500); 18 May 2010 08:30:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 698 invoked by uid 99); 18 May 2010 08:30:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 May 2010 08:30:27 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 May 2010 08:30:19 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 6DFB3D36003
	for <java-user@lucene.apache.org>; Tue, 18 May 2010 10:29:59 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 6QIWN4tgcmlK for <java-user@lucene.apache.org>;
	Tue, 18 May 2010 10:29:45 +0200 (CEST)
Received: from VEGA (WDC-MARE.marum.de [134.102.249.78])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 2C508D36002
	for <java-user@lucene.apache.org>; Tue, 18 May 2010 10:29:45 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <SNT110-W149E78C61BBE8C79C1EDA8E4E10@phx.gbl>
In-Reply-To: <SNT110-W149E78C61BBE8C79C1EDA8E4E10@phx.gbl>
Subject: RE: Using Lucene to Query File properties in Windows
Date: Tue, 18 May 2010 10:30:19 +0200
Message-ID: <001501caf664$5a277be0$0e7673a0$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQFKkmUrcoAWBOG9IgA+nOGKLNEvK5NXo47A
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

this works fine with Lucene.
Use NumericField and NumericRangeQuery to index the file date
(File.lastModified as NumericField.setLongValue()).

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: vijay reddy [mailto:vkreddy_in@hotmail.com]
> Sent: Tuesday, May 18, 2010 8:57 AM
> To: java-user@lucene.apache.org
> Subject: Using Lucene to Query File properties in Windows
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
>                 Hi ,
> 
> 
> 
> 
> I am planning to use Apache lucense in one of my projects, I want to index
> files based on the file properties (I won't be indexing the data) and I
want
> lucense to query the index so that I can quickly find list of  files to
based on
> the properties .
> 
> 
> 
> 
> E.g: give me all the files with access time greater than 10/10/2005 and
access
> time less than 10/04/2010 and file created by james.
> 
> 
> 
> 
> Can i use Lucene  for these kind of projects ?
> 
> 
> 
> 
> does Lucense supprot queries like above ?
> 
> 
> 
> 
> __________________________________________________________
> _______
> The amazing world in sharp snaps
> http://news.in.msn.com/gallery/archive.aspx


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46168-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 18 08:43:44 2010
Return-Path: <java-user-return-46168-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74809 invoked from network); 18 May 2010 08:43:44 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 18 May 2010 08:43:44 -0000
Received: (qmail 21092 invoked by uid 500); 18 May 2010 08:43:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21068 invoked by uid 500); 18 May 2010 08:43:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21060 invoked by uid 99); 18 May 2010 08:43:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 May 2010 08:43:41 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of srbh.grwl@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 May 2010 08:43:34 +0000
Received: by pwi4 with SMTP id 4so364259pwi.35
        for <java-user@lucene.apache.org>; Tue, 18 May 2010 01:43:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=7nVwezfmPsaKCtQwqZxMzNMETH2g+N9f217CEeqqLPs=;
        b=p14cDKMF5XNKXk7AFJvEpFknSb+OaBp1x4TrK4sF71X95in5MYbPJs8WGkASbKkW8Y
         tmMuTsyoMMXZrGtY0/6XLv9W2HmETNB8Fq2Cc8AwdezOzRM1OdSaH1Ktu/1/tboaYfXv
         3UzlJsEWPHyyS5+7a1rKFaCnlTNzh6ThGoGxI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=O8YmtNydJJg96/CBvdmmZzkGjuL2ne3z8ZwvaOKDO0zEvoaS5C1F7sbHaHbhJ0d7CO
         QAzC86eDXXYWLtevEkgFb0OCosw9BPGhZwOh6vj3Tx2tJZuHjxWjAR90NMTRqbMgrU67
         u/Wp+zrraH4MrUXluWHzsabUP/vcIYAfTJilY=
MIME-Version: 1.0
Received: by 10.142.196.5 with SMTP id t5mr918997wff.54.1274172192658; Tue, 18 
	May 2010 01:43:12 -0700 (PDT)
Received: by 10.143.163.6 with HTTP; Tue, 18 May 2010 01:43:12 -0700 (PDT)
In-Reply-To: <001401caf662$62921850$27b648f0$@thetaphi.de>
References: <AANLkTilSS--ZRk3eQYSCq8c7krc4IdpugEhB_1ztn7Pj@mail.gmail.com>
	 <AANLkTinvvVOTJF4zLFDMX9SgPoLIDgPNL-gNUmvzWFCD@mail.gmail.com>
	 <AANLkTilo4fCeJzkMnV-O64DbRo3JeozJZvkUqr27l0AP@mail.gmail.com>
	 <001401caf662$62921850$27b648f0$@thetaphi.de>
Date: Tue, 18 May 2010 14:13:12 +0530
Message-ID: <AANLkTinvsVrqhYdd5Fps6q9NBmsZHEn89YXXFYXb4qqB@mail.gmail.com>
Subject: Re: Lock obtain timed out
From: Saurabh Agarwal <srbh.grwl@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd28d9eed28800486da54ff
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd28d9eed28800486da54ff
Content-Type: text/plain; charset=ISO-8859-1

ummm i am just toying with Lucene and katta, so to have apples to apples
comparison I am using NFS mount for lucene and same FS as a filesystem for
Katta/HADOOP
Saurabh Agarwal


On Tue, May 18, 2010 at 1:46 PM, Uwe Schindler <uwe@thetaphi.de> wrote:

> Then why use NFS?
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
>
> > -----Original Message-----
> > From: Saurabh Agarwal [mailto:srbh.grwl@gmail.com]
> > Sent: Tuesday, May 18, 2010 10:13 AM
> > To: java-user@lucene.apache.org
> > Subject: Re: Lock obtain timed out
> >
> > Thanks :)
> >
> > i am using only one server to create the index Saurabh Agarwal
> >
> >
> > On Tue, May 18, 2010 at 1:41 PM, Ian Lea <ian.lea@gmail.com> wrote:
> >
> > > Use SimpleFSLockFactory.  The default, NativeFSLockFactory, doesn't
> > > play well with NFS.
> > >
> > > And a warning: lucene does work on NFS but you may run into problems
> > > if your index has a lot of modifications and/or is accessed from
> > > different servers.
> > >
> > >
> > > --
> > > Ian.
> > >
> > >
> > >
> > > On Tue, May 18, 2010 at 6:56 AM, Saurabh Agarwal <srbh.grwl@gmail.com>
> > > wrote:
> > > > Hi,
> > > >
> > > > I am using Lucene 3.0.0 to index (with the demo application
> > > > IndexFiles) a
> > > 6
> > > > GB corpus which is on NFS, more over I am storing my index on NFS
> too.
> > > But
> > > > when I run the program
> > > > I get following exception
> > > >
> > > >
> > > >
> > > > caught a class org.apache.lucene.store.LockObtainFailedException
> > > >  with message: Lock obtain timed out:
> > > > NativeFSLock@/usr/home/saurabh/index/write.lock:
> > > > java.io.IOException: Operation not supported
> > > >
> > > > Please Help out
> > > >
> > > >
> > > > Regards
> > > > Saurabh Agarwal
> > > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd28d9eed28800486da54ff--

From java-user-return-46169-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 18 09:16:32 2010
Return-Path: <java-user-return-46169-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80751 invoked from network); 18 May 2010 09:16:32 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 18 May 2010 09:16:32 -0000
Received: (qmail 44292 invoked by uid 500); 18 May 2010 09:16:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44265 invoked by uid 500); 18 May 2010 09:16:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44256 invoked by uid 99); 18 May 2010 09:16:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 May 2010 09:16:29 +0000
X-ASF-Spam-Status: No, hits=-0.8 required=10.0
	tests=AWL,FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 May 2010 09:16:22 +0000
Received: by fxm9 with SMTP id 9so653955fxm.35
        for <java-user@lucene.apache.org>; Tue, 18 May 2010 02:16:01 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=+9jJ+WoJ3j/351tvNeAHHQ/+GZiMbiwyidPkxMJOfVc=;
        b=twx5dulDHktvyTLXysfJeLLbgby17oF2LvvArM/AnXuNY4Cqh7J7iKFvD+yAYtIZg0
         ePc8Gg+XszuF+JAr+Vuzg6FcvbVUWqLAcUpYV2JHYNGtDHjjpmCVKSbbohnG4gV+Oofx
         ALA9kxhdN5hbGukkZjCreTmMo8I2wTz16vfE8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=XmP8pxjNDInqdQoY5ld4LxaEHOntL9Pxzk+zm+z+6NZMWjs2yr2WcHbpm1Nw+nLzOU
         2Xvny/upIhdr1JK+Ydyry234iPMZWSNM9YrNT9whkbrmCt87eVMie3+I3H+vSwPDQJvk
         NgNhmAA88Z55IqQLDFjjvWPZCQdYVS/1cONLM=
Received: by 10.204.5.130 with SMTP id 2mr125586bkv.189.1274174161119; Tue, 18 
	May 2010 02:16:01 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.54.198 with HTTP; Tue, 18 May 2010 02:15:41 -0700 (PDT)
In-Reply-To: <5BFC50994978BD45AA5C557D45B4B860110C712874@exchsydmbx1.syd.infomedia.com.au>
References: <5BFC50994978BD45AA5C557D45B4B860110C712874@exchsydmbx1.syd.infomedia.com.au>
From: Ian Lea <ian.lea@gmail.com>
Date: Tue, 18 May 2010 10:15:41 +0100
Message-ID: <AANLkTin2ZDELxwIsMZJsJvUUYplpGcc7ErnfmvGb1xba@mail.gmail.com>
Subject: Re: Deciding memory requirements for Lucene indexes proactively -- 
	How to?
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

> Is there a way (perhaps a formulae) to accurately
> judge =A0the memory requirement for a Lucene index?
> (May be based on number of documents or index
> size etc?)

The short answer is no, although there are some things you can
estimate based on the number of fields, terms etc.  Sorting will use
memory - maybe a lot.

> Reason I am asking is that we had two indexes
> running on separate Tomcat instances and we decided
> to move both these webapps (Solr) to a single Tomcat
> for effective memory sharing. However our JVM
> memory allocation was not accurate enough and the
> Indexes started running OutOfMemory errors on
> our production environment.
>
> It would be much helpful if we can identify the
> requirement for resources pro-actively.
>
> Any help on the matter much appreciated.
>
> We use: Solr 1.4, Java 1.6.0_20

You might get better answers on the Solr list.


--
Ian.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46170-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 18 09:41:44 2010
Return-Path: <java-user-return-46170-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84838 invoked from network); 18 May 2010 09:41:44 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 18 May 2010 09:41:44 -0000
Received: (qmail 66925 invoked by uid 500); 18 May 2010 09:41:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66891 invoked by uid 500); 18 May 2010 09:41:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66883 invoked by uid 99); 18 May 2010 09:41:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 May 2010 09:41:41 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL,T_LOTS_OF_MONEY
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.217.214] (HELO mail-gx0-f214.google.com) (209.85.217.214)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 May 2010 09:41:34 +0000
Received: by gxk6 with SMTP id 6so2148968gxk.5
        for <java-user@lucene.apache.org>; Tue, 18 May 2010 02:41:12 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.150.94.18 with SMTP id r18mr4254224ybb.320.1274175671880; Tue, 
	18 May 2010 02:41:11 -0700 (PDT)
Received: by 10.151.11.20 with HTTP; Tue, 18 May 2010 02:41:11 -0700 (PDT)
In-Reply-To: <AANLkTilWI_IcGwNh3ZR-fJ7Hmw7x2VdC0OJZBpcJCIIC@mail.gmail.com>
References: <AANLkTikHCfOfkqFFJcZJz9e92tgzNYLlByiLztoXZd6j@mail.gmail.com>
	 <4BED90B4.9040801@gmail.com>
	 <AANLkTilWI_IcGwNh3ZR-fJ7Hmw7x2VdC0OJZBpcJCIIC@mail.gmail.com>
Date: Tue, 18 May 2010 05:41:11 -0400
Message-ID: <AANLkTikyHKbezur1GwrgcXlBGoPjo6BPfKw9SD92qAvV@mail.gmail.com>
Subject: Re: Will doc ids ever change if nothing is deleted?
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

If you never delete docs, then w/ the default merge policy, the docIDs
should never change.

But... this should be considered an impl detail of Lucene.  In theory
someday this could change.  EG there's an issue open (LUCENE-1076) to
allow a merge policy to select out-of-order merges, which they cannot
do today.

Mike

On Fri, May 14, 2010 at 4:20 PM, Nigel <nigelspleen@gmail.com> wrote:
> Right, but my question was whether merging segments will renumber docs *i=
f
> no documents are deleted*. =A0Empirically, the answer is no. =A0I've writ=
ten
> test code that indexes documents with a field equal to each document's
> current id, and verified that the ids still match the field values even
> after merges and optimizes are done, if no docs are deleted. =A0This seem=
s to
> indicate that merging always preserves the current id order, which
> is perhaps the obvious way to implement merging. =A0(Though of course an
> alternative reasonable implementation, for example. might have been to ad=
d
> everything from one segment to the merged segment, then add everything fr=
om
> the next segment, etc., thus renumbering everything.)
>
> Given all the misinformation or ambiguous information on this topic that
> I've found, I was hoping to clear this up definitively. =A0My test case
> doesn't prove that there's not some way for ids to change in certain
> circumstances (apart from deletions, which is documented clearly). =A0But
> right now I don't see any reason not to believe the FAQ entry mentioned i=
n
> my original email.
>
> Thanks,
> Chris
>
> On Fri, May 14, 2010 at 2:04 PM, Chris Lu <chris.lu@gmail.com> wrote:
>
>> The doc id will get changed if the segments are merged. The doc id is mo=
re
>> depending on the order of documents being added.
>>
>> Just think about it. The doc ids are starting from 0 to N. And when some
>> documents are deleted, they are marked deleted on .del file. So no chang=
e
>> there. When some documents are added, the id is N+1.
>>
>> Of course, if some documents from other segments are merged. The documen=
ts
>> in one segment will "lose" its doc id.
>>
>> --
>> Chris Lu
>> -------------------------
>> Instant Scalable Full-Text Search On Any Database/Application
>> site: http://www.dbsight.net
>> demo: http://search.dbsight.com
>> Lucene Database Search in 3 minutes:
>> http://wiki.dbsight.com/index.php?title=3DCreate_Lucene_Database_Search_=
in_3_minutes
>> DBSight customer, a shopping comparison site, (anonymous per request) go=
t
>> 2.6 Million Euro funding!
>>
>>
>> On 05/13/2010 06:38 PM, Nigel wrote:
>>
>>> The FAQ clearly states that document IDs will not be re-assigned unless
>>> something was deleted.
>>>
>>> http://wiki.apache.org/lucene-java/LuceneFAQ#When_is_it_possible_for_do=
cument_IDs_to_change.3F
>>>
>>> However, a number of other emails and posts I've read mention that
>>> renumbering occurs when segments are merged. =A0Maybe what people mean
>>> is simply that when something is deleted, nothing is immediately
>>> renumbered,
>>> and it's not until merge time that the renumbering happens. =A0(This is=
 my
>>> understanding of how it works.)
>>>
>>> Just so I'm 100% clear, if I never delete anything, will the IDs ever
>>> change?
>>>
>>> Thanks,
>>> Chris
>>>
>>>
>>>
>>
>>
>> =A0---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46171-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 18 16:02:10 2010
Return-Path: <java-user-return-46171-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26395 invoked from network); 18 May 2010 16:02:10 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 18 May 2010 16:02:10 -0000
Received: (qmail 51764 invoked by uid 500); 18 May 2010 16:02:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51714 invoked by uid 500); 18 May 2010 16:02:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51706 invoked by uid 99); 18 May 2010 16:02:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 May 2010 16:02:07 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [213.52.246.188] (HELO mail.diosphere.com) (213.52.246.188)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 18 May 2010 16:01:58 +0000
Received: from [213.52.246.149] (213.52.246.149) by mail.diosphere.com
 (213.52.246.188) with Microsoft SMTP Server id 8.1.240.5; Tue, 18 May 2010
 16:54:32 +0100
Message-ID: <4BF2B9DE.2090108@diosphere.com>
Date: Tue, 18 May 2010 17:01:34 +0100
From: Dragan Jotanovic <dragan.jotanovic@diosphere.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.1.9) Gecko/20100317 Lightning/1.0b1 Thunderbird/3.0.4
MIME-Version: 1.0
To: <java-user@lucene.apache.org>
Subject: How to achive this kind of document ordering
Content-Type: multipart/alternative;
	boundary="------------060606080702080604000607"
X-Virus-Checked: Checked by ClamAV on apache.org

--------------060606080702080604000607
Content-Type: text/plain; charset="ISO-8859-1"; format=flowed
Content-Transfer-Encoding: 7bit

|Hi, I need to sort results by two fields. First one is numeric and sorting should be in ascending order.
Second one should be ordered in a "levels" structure.
Here is the example:

Unsorted:
DocId      SortFieldA          SortFieldB
   1        101A
   2        102        B
   3        102        A   |
|   4        101        C
||   5        102        B|
|   6        101        A   |
|   7        101        B|
|   8        101        C|
|   9        101        B|
|  10        101        A|



Sorted:
|DocId      SortFieldA          SortFieldB
   1        101A   |
|   7        101        B|
|   4        101        C|
|   6        101        A|
|   9        101        B|
|   8        101        C|
|  10        101        A|
|   ||3        102        A|||||
|   2        102        B||
||   5        102        B||||

First, all results are ordered by SortFieldA in ascending order. Than by SortFieldB so that all documents with the same SortFieldA value are ordered in "levels" structure. Each level consists of documents with distinct SortFieldB values.
So, the requirenment is to show documents from first level first, than second level, and so on.
It will not be possible to order documents while indexing, so I will need search time ordering.
Is this achievable with lucene? What would be the best approach to solve this without huge performance impact on multimillion documents index?
|


--------------060606080702080604000607--

From java-user-return-46172-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 18 16:19:03 2010
Return-Path: <java-user-return-46172-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33620 invoked from network); 18 May 2010 16:19:03 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 18 May 2010 16:19:03 -0000
Received: (qmail 79824 invoked by uid 500); 18 May 2010 16:19:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79741 invoked by uid 500); 18 May 2010 16:19:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79733 invoked by uid 99); 18 May 2010 16:19:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 May 2010 16:19:01 +0000
X-ASF-Spam-Status: No, hits=-1.6 required=10.0
	tests=AWL,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of roman.baeriswyl@comparis.ch designates 77.109.144.6 as permitted sender)
Received: from [77.109.144.6] (HELO mimas.comparis.ch) (77.109.144.6)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 May 2010 16:18:57 +0000
Received: from mimas.comparis.ch ([192.168.1.161]) by mimas.comparis.ch
 ([192.168.1.161]) with mapi; Tue, 18 May 2010 18:18:36 +0200
From: comparis.ch - Roman Baeriswyl <roman.baeriswyl@comparis.ch>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Date: Tue, 18 May 2010 18:18:34 +0200
Subject: Sorting and Empty (non-existing) Fields
Thread-Topic: Sorting and Empty (non-existing) Fields
Thread-Index: Acr2pcOxHWIi81RbRSqU31cfhThxew==
Message-ID: <F48EBC643BB1F344A84D2724AD7397C40F9AC9CB39@mimas.comparis.ch>
Accept-Language: de-DE, de-CH
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: de-DE, de-CH
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0

Hi All

I've got a problem I'm trying to solve the whole day:

Let's say I have an index with two fields, the first one is always filled a=
nd the second one only sometimes.
Now I want to search something on the first field and want the results sort=
ed by relevance, then by the first field, then by the second field.
My problem now is that, if I have a lot of Entries with the same value in t=
he first field and no value in the second field, these entries with no valu=
e on the 2nd field are coming first.

Is there any way to increase the score on those documents which have a valu=
e on the second field? Or is there any way to skip those Documents which do=
n't have the second field? I don't want to use a Filter, it should all be d=
one with the Queries Objects if possible.

I tried a lot of things with WildcardQuery or TermRangeQuery (with null val=
ues or empty strings) in Luke and directly in IndexSearcher, but I always g=
et either no results or all results, even those which have no value in the =
second field.

I found a lot of information where "-field2:[* TO *]" or similar stuff shou=
ld work but it doesn't.

Can anyone give me some hints?

Thanks
Roman

Holen Sie die besten Elektronik-Aktionen direkt auf Ihr Facebook-Profil: ht=
tp://www.facebook.com/pages/Preissturz/218831069608

Die besten Elektronik-Aktionen auf Twitter: http://twitter.com/preissturz1

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46173-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 18 18:05:46 2010
Return-Path: <java-user-return-46173-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8479 invoked from network); 18 May 2010 18:05:46 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 18 May 2010 18:05:46 -0000
Received: (qmail 64472 invoked by uid 500); 18 May 2010 18:05:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64441 invoked by uid 500); 18 May 2010 18:05:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64433 invoked by uid 99); 18 May 2010 18:05:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 May 2010 18:05:44 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lahendrix@wisc.edu designates 144.92.197.212 as permitted sender)
Received: from [144.92.197.212] (HELO argol.doit.wisc.edu) (144.92.197.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 May 2010 18:05:36 +0000
MIME-version: 1.0
Content-type: multipart/alternative;
 boundary="Boundary_(ID_7Io6aUffNtZ5kRUHlgjStA)"
Received: from avs-daemon.smtpauth3.wiscmail.wisc.edu by
 smtpauth3.wiscmail.wisc.edu
 (Sun Java(tm) System Messaging Server 7u2-7.05 32bit (built Jul 30 2009))
 id <0L2M00C0ANKR5800@smtpauth3.wiscmail.wisc.edu> for
 java-user@lucene.apache.org; Tue, 18 May 2010 13:05:15 -0500 (CDT)
Received: from [192.168.2.145] (dyn-144-92-202-103.wisc.edu [144.92.202.103])
 by smtpauth3.wiscmail.wisc.edu
 (Sun Java(tm) System Messaging Server 7u2-7.05 32bit (built Jul 30 2009))
 with ESMTPSA id <0L2M00ACFNKOJ910@smtpauth3.wiscmail.wisc.edu> for
 java-user@lucene.apache.org; Tue, 18 May 2010 13:05:12 -0500 (CDT)
Date: Tue, 18 May 2010 13:05:11 -0500
From: Larry Hendrix <lahendrix@wisc.edu>
Subject: Stemming Problem
To: java-user@lucene.apache.org
Message-id: <52F9A361-5B2D-4B2D-854E-8C32EE0675BD@wisc.edu>
X-Mailer: Apple Mail (2.1077)
X-Spam-Report: AuthenticatedSender=yes, SenderIP=144.92.202.103
X-Spam-PmxInfo: Server=avs-10, Version=5.5.9.395186,
 Antispam-Engine: 2.7.2.376379, Antispam-Data: 2010.5.18.174815,
 SenderIP=144.92.202.103
X-Virus-Checked: Checked by ClamAV on apache.org

--Boundary_(ID_7Io6aUffNtZ5kRUHlgjStA)
Content-type: text/plain; CHARSET=US-ASCII
Content-transfer-encoding: 7BIT

Hi,

Right now I'm using Lucene with a basic Whitespace Anayzer but I'm having problems with stemming. Does anyone have a recommendation for other text analyzers that handle stemming and also keep capitalization, stop words, and punctuation?

Thanks,
Larry


Larry A. Hendrix, Graduate Student 
Computer Science Department 
University of Wisconsin-Madison 
1300 University Ave Rm 6749 
Madison, WI 53711 
Office: (608) 263-7624 
lhendrix@cs.wisc.edu 
Grambling State University Alum 


--Boundary_(ID_7Io6aUffNtZ5kRUHlgjStA)--

From java-user-return-46174-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 18 23:03:30 2010
Return-Path: <java-user-return-46174-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2201 invoked from network); 18 May 2010 23:03:30 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 18 May 2010 23:03:30 -0000
Received: (qmail 82062 invoked by uid 500); 18 May 2010 23:03:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82024 invoked by uid 500); 18 May 2010 23:03:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82016 invoked by uid 99); 18 May 2010 23:03:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 May 2010 23:03:27 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of robin.bygrave@gmail.com designates 209.85.211.194 as permitted sender)
Received: from [209.85.211.194] (HELO mail-yw0-f194.google.com) (209.85.211.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 May 2010 23:03:23 +0000
Received: by ywh32 with SMTP id 32so3277225ywh.5
        for <java-user@lucene.apache.org>; Tue, 18 May 2010 16:03:02 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=4Sm0stlfEJOorhGcPvFwr2jh2tgQJscRoq2CpKJq/B0=;
        b=SthVmzT2Eg1eS5wYFRABA5AQ+v8Y7B4A3BUAN8C6C/k/J9neXseeCW+AFMEzukK1/Z
         efLtL5L2Gb1ubycsX1DEMYOU6rGyM+AGJOSEmeQstC7ZKIBDrBodgqOyeWE4hUr0xWPR
         haiiiNnoM1PscOtJubQira82UNASsL9mYjSF4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=MtjAQjIayT71gZqtP8Pj3ZzzBJjGO77S9pR2NTe+OvecvsaaAM3EpbWIAPWbnosRKg
         88GsGwS2T7QxMchSltrFIOel1wKzA+VMPHf+lpIASvJAL1tVfAaIHPAA4/VBaKko6631
         punjx2Xpwg5uzYeuM5wBSnuwtdfN3g9YK9dkU=
MIME-Version: 1.0
Received: by 10.100.245.27 with SMTP id s27mr9571945anh.53.1274223780218; Tue, 
	18 May 2010 16:03:00 -0700 (PDT)
Received: by 10.100.13.10 with HTTP; Tue, 18 May 2010 16:02:59 -0700 (PDT)
In-Reply-To: <F48EBC643BB1F344A84D2724AD7397C40F9AC9CB39@mimas.comparis.ch>
References: <F48EBC643BB1F344A84D2724AD7397C40F9AC9CB39@mimas.comparis.ch>
Date: Wed, 19 May 2010 11:02:59 +1200
Message-ID: <AANLkTikLg8RoN64gVSCiUESvWIZVkYWsWNbnTyIiVNGV@mail.gmail.com>
Subject: Re: Sorting and Empty (non-existing) Fields
From: Rob Bygrave <robin.bygrave@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e68dec16c8f1df0486e65738

--0016e68dec16c8f1df0486e65738
Content-Type: text/plain; charset=ISO-8859-1

I'm not a Lucene Guru so hopefully you get a more definitive response.

I believe this means you want a way to specify ... "Nulls High" / "Nulls
Low" for your field (in this case you want Nulls High I believe).

I haven't seen support for that (but it might exist). Looking at
StringValComparator I'd say support for it doesn't exist - it looks like
null is always treated as low. My thinking is that you'll have to create a
FieldComparatorSource/FieldComparator :

SortField(String field, FieldComparatorSource comparator);

There are a bunch of implementations (static classes) in FieldComparator
(DoubleComparator, FloatComparator etc).

I believe you might need to create one of those. For example, I'm looking at
StringValComparator and I don't see a Null's High/ Nulls Low option in the
compare method.

Maybe that helps. Hopefully someone else can be more helpful. Would be nice
to have a Nulls High/Nulls Low support built in.

... source code of StringValComparator from lucene version 3


  /** Sorts by field's natural String sort order.  All
   *  comparisons are done using String.compareTo, which is
   *  slow for medium to large result sets but possibly
   *  very fast for very small results sets. */
  public static final class StringValComparator extends FieldComparator {

    private String[] values;
    private String[] currentReaderValues;
    private final String field;
    private String bottom;

    StringValComparator(int numHits, String field) {
      values = new String[numHits];
      this.field = field;
    }

    @Override
    public int compare(int slot1, int slot2) {
      final String val1 = values[slot1];
      final String val2 = values[slot2];
      if (val1 == null) {
        if (val2 == null) {
          return 0;
        }
        return -1;
      } else if (val2 == null) {
        return 1;
      }

      return val1.compareTo(val2);
    }

    @Override
    public int compareBottom(int doc) {
      final String val2 = currentReaderValues[doc];
      if (bottom == null) {
        if (val2 == null) {
          return 0;
        }
        return -1;
      } else if (val2 == null) {
        return 1;
      }
      return bottom.compareTo(val2);
    }

    @Override
    public void copy(int slot, int doc) {
      values[slot] = currentReaderValues[doc];
    }

    @Override
    public void setNextReader(IndexReader reader, int docBase) throws
IOException {
      currentReaderValues = FieldCache.DEFAULT.getStrings(reader, field);
    }

    @Override
    public void setBottom(final int bottom) {
      this.bottom = values[bottom];
    }

    @Override
    public Comparable<?> value(int slot) {
      return values[slot];
    }
  }





On Wed, May 19, 2010 at 4:18 AM, comparis.ch - Roman Baeriswyl <
roman.baeriswyl@comparis.ch> wrote:

> Hi All
>
> I've got a problem I'm trying to solve the whole day:
>
> Let's say I have an index with two fields, the first one is always filled
> and the second one only sometimes.
> Now I want to search something on the first field and want the results
> sorted by relevance, then by the first field, then by the second field.
> My problem now is that, if I have a lot of Entries with the same value in
> the first field and no value in the second field, these entries with no
> value on the 2nd field are coming first.
>
> Is there any way to increase the score on those documents which have a
> value on the second field? Or is there any way to skip those Documents which
> don't have the second field? I don't want to use a Filter, it should all be
> done with the Queries Objects if possible.
>
> I tried a lot of things with WildcardQuery or TermRangeQuery (with null
> values or empty strings) in Luke and directly in IndexSearcher, but I always
> get either no results or all results, even those which have no value in the
> second field.
>
> I found a lot of information where "-field2:[* TO *]" or similar stuff
> should work but it doesn't.
>
> Can anyone give me some hints?
>
> Thanks
> Roman
>
> Holen Sie die besten Elektronik-Aktionen direkt auf Ihr Facebook-Profil:
> http://www.facebook.com/pages/Preissturz/218831069608
>
> Die besten Elektronik-Aktionen auf Twitter: http://twitter.com/preissturz1
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e68dec16c8f1df0486e65738--

From java-user-return-46175-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 19 00:07:47 2010
Return-Path: <java-user-return-46175-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17301 invoked from network); 19 May 2010 00:07:47 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 19 May 2010 00:07:47 -0000
Received: (qmail 34710 invoked by uid 500); 19 May 2010 00:07:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34675 invoked by uid 500); 19 May 2010 00:07:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34667 invoked by uid 99); 19 May 2010 00:07:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 May 2010 00:07:45 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of robin.bygrave@gmail.com designates 74.125.83.48 as permitted sender)
Received: from [74.125.83.48] (HELO mail-gw0-f48.google.com) (74.125.83.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 May 2010 00:07:41 +0000
Received: by gwj16 with SMTP id 16so999568gwj.35
        for <java-user@lucene.apache.org>; Tue, 18 May 2010 17:07:20 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=vauyVedWCGSBT5LWb+4d2dDI2rQ8x49mhZie4f0UQgM=;
        b=WK86Qq+7nb3XXEPiVB6gcv1UDVin92S5sOjcDLPAAWgSOvVpGCl8mu7subtNAfjj/o
         y5TmmlA2oub3pbmAKIbNQ9peiBIMPA/xTQIC6VLt6t+b9J01cxPdYk3FFWQXU3fsjRtH
         6fqhTf1rbfnJUrWfvw4nadneypecJJJeVm4MQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=gQKY74/aa3ss6zJhj8D8GeXHfQpdlX1rpTjki2v16yZ85GIvhyPPuu3V0EmR8TtAxL
         vb6ZUGGt9aDat922GtcAUIbegBg4PZfR2zz79k2VW9KnbRv38RCbOU1A/1I7/wzzj4uA
         51YTGYh9mfI7HFCZ15Xu5+KjGDlCgidZjg+k4=
MIME-Version: 1.0
Received: by 10.101.145.21 with SMTP id x21mr8679008ann.232.1274227639993; 
	Tue, 18 May 2010 17:07:19 -0700 (PDT)
Received: by 10.100.13.10 with HTTP; Tue, 18 May 2010 17:07:19 -0700 (PDT)
In-Reply-To: <F48EBC643BB1F344A84D2724AD7397C40F9AC9CB39@mimas.comparis.ch>
References: <F48EBC643BB1F344A84D2724AD7397C40F9AC9CB39@mimas.comparis.ch>
Date: Wed, 19 May 2010 12:07:19 +1200
Message-ID: <AANLkTim8mDo8SVvyfrIcw3gPpVr-x-MhhsbhWVRgUmDh@mail.gmail.com>
Subject: Re: Sorting and Empty (non-existing) Fields
From: Rob Bygrave <robin.bygrave@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d3cf18d846de0486e73d5e

--0016e6d3cf18d846de0486e73d5e
Content-Type: text/plain; charset=ISO-8859-1

BTW:  Saw this in the SOLR docs...

       - If sortMissingLast="false" and sortMissingFirst="false" (the
default),
*         then default lucene sorting will be used which places docs without
the
         field first in an ascending sort and last in a descending sort.*



On Wed, May 19, 2010 at 4:18 AM, comparis.ch - Roman Baeriswyl <
roman.baeriswyl@comparis.ch> wrote:

> Hi All
>
> I've got a problem I'm trying to solve the whole day:
>
> Let's say I have an index with two fields, the first one is always filled
> and the second one only sometimes.
> Now I want to search something on the first field and want the results
> sorted by relevance, then by the first field, then by the second field.
> My problem now is that, if I have a lot of Entries with the same value in
> the first field and no value in the second field, these entries with no
> value on the 2nd field are coming first.
>
> Is there any way to increase the score on those documents which have a
> value on the second field? Or is there any way to skip those Documents which
> don't have the second field? I don't want to use a Filter, it should all be
> done with the Queries Objects if possible.
>
> I tried a lot of things with WildcardQuery or TermRangeQuery (with null
> values or empty strings) in Luke and directly in IndexSearcher, but I always
> get either no results or all results, even those which have no value in the
> second field.
>
> I found a lot of information where "-field2:[* TO *]" or similar stuff
> should work but it doesn't.
>
> Can anyone give me some hints?
>
> Thanks
> Roman
>
> Holen Sie die besten Elektronik-Aktionen direkt auf Ihr Facebook-Profil:
> http://www.facebook.com/pages/Preissturz/218831069608
>
> Die besten Elektronik-Aktionen auf Twitter: http://twitter.com/preissturz1
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e6d3cf18d846de0486e73d5e--

From java-user-return-46176-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 19 00:13:20 2010
Return-Path: <java-user-return-46176-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18340 invoked from network); 19 May 2010 00:13:20 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 19 May 2010 00:13:20 -0000
Received: (qmail 41091 invoked by uid 500); 19 May 2010 00:13:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41037 invoked by uid 500); 19 May 2010 00:13:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41029 invoked by uid 99); 19 May 2010 00:13:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 May 2010 00:13:18 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 74.125.83.48 as permitted sender)
Received: from [74.125.83.48] (HELO mail-gw0-f48.google.com) (74.125.83.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 May 2010 00:13:11 +0000
Received: by gwj16 with SMTP id 16so1001898gwj.35
        for <java-user@lucene.apache.org>; Tue, 18 May 2010 17:12:50 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=H9A6lwcrPJiDzNtU3ukyq3f+/tmu6JTP25LzRQv6lsc=;
        b=P4Is3QNpJVj7QCWemaW0j/6jn3C0cXnyQD9Wo4ge2/d7v4ZQrvzJ9YEMQCDq3VPX7/
         4T10jE/tzvTkemAI2f701i+QuywWmJXXafebkp3nDyCGBD68Y3NsKKSuvCzqrqiFgUnh
         jZZA6kNcLf3sZPBG5dTd2BZkmGw4x6ZbCipJg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=QeUmaNECBqualQRnVtANluuOlpwqfaYcvssdRW+1mJrLabUqQXuTU/FPKOEsKRb+po
         M6jptruFXV36gyiFbz0XSpOHNwzUZSzbpROFAkp/JclZbNG9GOrUBxRtfC2vVM3O46aa
         SzCZCpMXInnA3W6+jU7x2MyeAHV2twPGH+ThQ=
MIME-Version: 1.0
Received: by 10.151.87.7 with SMTP id p7mr9124543ybl.340.1274227970736; Tue, 
	18 May 2010 17:12:50 -0700 (PDT)
Received: by 10.151.43.7 with HTTP; Tue, 18 May 2010 17:12:50 -0700 (PDT)
In-Reply-To: <4BF2B9DE.2090108@diosphere.com>
References: <4BF2B9DE.2090108@diosphere.com>
Date: Tue, 18 May 2010 20:12:50 -0400
Message-ID: <AANLkTimLPXZrJFWiIZB2aHTVcwn1ha3Wjaev1YceXvVy@mail.gmail.com>
Subject: Re: How to achive this kind of document ordering
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd246708f02b70486e751a5
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd246708f02b70486e751a5
Content-Type: text/plain; charset=ISO-8859-1

I just skimmed your message, but Lucene provides
for multiple sorts. You can construct a Sort object
from an arbitrary number of fields, and any documents
that all sort equally for fields 1..k will be resolved
by considering field k+1.

The performance impact when searching is mostly
upon the very first sort when the caches are filled.
If you have a HUGE number of unique values for
a sort field, that may have heavy memory demands.

As I said, I just skimmed your message, so if I'm off
base let me know...

HTH
Erick

On Tue, May 18, 2010 at 12:01 PM, Dragan Jotanovic <
dragan.jotanovic@diosphere.com> wrote:

> |Hi, I need to sort results by two fields. First one is numeric and sorting
> should be in ascending order.
> Second one should be ordered in a "levels" structure.
> Here is the example:
>
> Unsorted:
> DocId      SortFieldA          SortFieldB
>  1        101A
>  2        102        B
>  3        102        A   |
> |   4        101        C
> ||   5        102        B|
> |   6        101        A   |
> |   7        101        B|
> |   8        101        C|
> |   9        101        B|
> |  10        101        A|
>
>
>
> Sorted:
> |DocId      SortFieldA          SortFieldB
>  1        101A   |
> |   7        101        B|
> |   4        101        C|
> |   6        101        A|
> |   9        101        B|
> |   8        101        C|
> |  10        101        A|
> |   ||3        102        A|||||
> |   2        102        B||
> ||   5        102        B||||
>
> First, all results are ordered by SortFieldA in ascending order. Than by
> SortFieldB so that all documents with the same SortFieldA value are ordered
> in "levels" structure. Each level consists of documents with distinct
> SortFieldB values.
> So, the requirenment is to show documents from first level first, than
> second level, and so on.
> It will not be possible to order documents while indexing, so I will need
> search time ordering.
> Is this achievable with lucene? What would be the best approach to solve
> this without huge performance impact on multimillion documents index?
> |
>
>

--000e0cd246708f02b70486e751a5--

From java-user-return-46177-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 19 00:38:05 2010
Return-Path: <java-user-return-46177-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29169 invoked from network); 19 May 2010 00:38:04 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 19 May 2010 00:38:04 -0000
Received: (qmail 57268 invoked by uid 500); 19 May 2010 00:38:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57223 invoked by uid 500); 19 May 2010 00:38:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57215 invoked by uid 99); 19 May 2010 00:38:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 May 2010 00:38:02 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [132.249.20.114] (HELO postal.sdsc.edu) (132.249.20.114)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 May 2010 00:37:53 +0000
Received: from mta.ad.sdsc.edu (mta.ad.sdsc.edu [132.249.69.68])
	by postal.sdsc.edu (8.11.7/8.11.7/server/80) with ESMTP id o4J0bVc27141;
	Tue, 18 May 2010 17:37:31 -0700 (PDT)
Received: from MBX.ad.sdsc.edu ([fe80::85f9:e068:7dc0:4fe0]) by
 mta.ad.sdsc.edu ([132.249.69.68]) with mapi; Tue, 18 May 2010 17:37:27 -0700
From: Christopher Condit <condit@sdsc.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
CC: "lahendrix@wisc.edu" <lahendrix@wisc.edu>
Date: Tue, 18 May 2010 17:35:00 -0700
Subject: RE: Stemming Problem
Thread-Topic: Stemming Problem
Thread-Index: Acr2tMY43wFYUVqEQ7aooYM32TDddgANY69w
Message-ID: <BAFDED91EF7D5A43A30F897D6C94B1287295E882D2@MBX.ad.sdsc.edu>
References: <52F9A361-5B2D-4B2D-854E-8C32EE0675BD@wisc.edu>
In-Reply-To: <52F9A361-5B2D-4B2D-854E-8C32EE0675BD@wisc.edu>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Larry-
=20
> Right now I'm using Lucene with a basic Whitespace Anayzer but I'm having
> problems with stemming. Does anyone have a recommendation for other
> text analyzers that handle stemming and also keep capitalization, stop wo=
rds,
> and punctuation?

Have you tried the SnowballFilter? You could make your own analyzer combini=
ng a WhitespaceFilter and a SnowballFilter that should have the desired eff=
ect..
See: http://lucene.apache.org/java/3_0_1/api/contrib-snowball/org/apache/lu=
cene/analysis/snowball/SnowballFilter.html

Good luck,
-Chris

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46178-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 19 00:47:26 2010
Return-Path: <java-user-return-46178-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31403 invoked from network); 19 May 2010 00:47:25 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 19 May 2010 00:47:25 -0000
Received: (qmail 65712 invoked by uid 500); 19 May 2010 00:47:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65657 invoked by uid 500); 19 May 2010 00:47:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65649 invoked by uid 99); 19 May 2010 00:47:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 May 2010 00:47:23 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=AWL,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.217.214 as permitted sender)
Received: from [209.85.217.214] (HELO mail-gx0-f214.google.com) (209.85.217.214)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 May 2010 00:47:18 +0000
Received: by gxk6 with SMTP id 6so2703543gxk.5
        for <java-user@lucene.apache.org>; Tue, 18 May 2010 17:46:58 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=iXgOZOHKyPruJvOyHhOsG1eucUquw5JnJvWCgzIvVmA=;
        b=GsNPqtKu0U8K5UIgf5FUzTwidDalX8YpwLR+Ay4u+1P2aM505jkzLkgEGONnltkbnN
         ZKKSgz95Pf/YVmzpRaClYq7i+oAgtf0qep4ofmOkjTiK4o4t9bV6ByB/h8StNSRWIV1X
         EvQNNft01EbZHRXBGYYTlmuGpdjGqL7LnvZSU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=N/ZCOedKBEagU88j9IxCqxhoBT1iMFwXh/y5l/Ykc8mqIr91H14gg0MalqWyTNoe0w
         YdMBgQx0nA5BJy/e9ZXYcuyoptwVr5jDYRnHvPBVltk9hwjcUNpVXu5ESv4RR991psqD
         +Bqh3qd8oZBksUHQgAWyCX2vzaFodViOh3m5U=
MIME-Version: 1.0
Received: by 10.150.117.7 with SMTP id p7mr8427663ybc.317.1274230018020; Tue, 
	18 May 2010 17:46:58 -0700 (PDT)
Received: by 10.151.43.7 with HTTP; Tue, 18 May 2010 17:46:57 -0700 (PDT)
In-Reply-To: <52F9A361-5B2D-4B2D-854E-8C32EE0675BD@wisc.edu>
References: <52F9A361-5B2D-4B2D-854E-8C32EE0675BD@wisc.edu>
Date: Tue, 18 May 2010 20:46:57 -0400
Message-ID: <AANLkTilRIWYkSsNAO6P3L0roE2-OgfIuXtWDiv_TCXIP@mail.gmail.com>
Subject: Re: Stemming Problem
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd7080e9614b50486e7cb22

--000e0cd7080e9614b50486e7cb22
Content-Type: text/plain; charset=ISO-8859-1

You can construct your own analyzer by creating
it from a pre-existing Tokenizer
(e.g. WhiteSpaceTokenizer) and any number
of TokenfFilters (e.g. TokenFilter). You can
string any number of TokenFilters together
to get many different effects.

But I have to ask, why you want to keep capitalization?
and punctuation? Do you really want to fail to match
text indexed with "Erickson, Erick" with the query
"erick erickson"? That's often a source of frustration
instead of goodness.

HTH
Erick

On Tue, May 18, 2010 at 2:05 PM, Larry Hendrix <lahendrix@wisc.edu> wrote:

> Hi,
>
> Right now I'm using Lucene with a basic Whitespace Anayzer but I'm having
> problems with stemming. Does anyone have a recommendation for other text
> analyzers that handle stemming and also keep capitalization, stop words, and
> punctuation?
>
> Thanks,
> Larry
>
>
> Larry A. Hendrix, Graduate Student
> Computer Science Department
> University of Wisconsin-Madison
> 1300 University Ave Rm 6749
> Madison, WI 53711
> Office: (608) 263-7624
> lhendrix@cs.wisc.edu
> Grambling State University Alum
>
>

--000e0cd7080e9614b50486e7cb22--

From java-user-return-46179-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 19 04:59:26 2010
Return-Path: <java-user-return-46179-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65849 invoked from network); 19 May 2010 04:59:25 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 19 May 2010 04:59:25 -0000
Received: (qmail 22743 invoked by uid 500); 19 May 2010 04:59:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22483 invoked by uid 500); 19 May 2010 04:59:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22475 invoked by uid 99); 19 May 2010 04:59:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 May 2010 04:59:19 +0000
X-ASF-Spam-Status: No, hits=-0.5 required=10.0
	tests=AWL,FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of fancyerii@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 May 2010 04:59:13 +0000
Received: by pwi4 with SMTP id 4so982135pwi.35
        for <java-user@lucene.apache.org>; Tue, 18 May 2010 21:58:53 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=wbK5rL6rFT0jaI83dVmHWhbsaF/Zr0xEfX6H16662Lc=;
        b=sSFB902eSfjogbpRx7UMGRNsXdE0ZBlwFk04S7q+09nJLiUqirBJKReEkrultvS8Sb
         HFfa/yXQQRWKJPwfltraFZ6lElS3hOu0ufENMqc0uekjB2nslC5n3/SMsZi+TtHLIr9v
         lu4kF1gdHZRyDiIeliBsdq47FHx5cfYfwNJoM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=dKcZmPvXe/LaoMQi82yIz7kp9fRErB8FURA14A4j24Vex8FS7H8iBxmkJvr/Uu6oG2
         mZr5T3lslLeNikF69gtj786TYHjOcudxblJZFPOsy5DhNXz11BpnIz/ShebaVG41KIe/
         rncCmi1RQoNokpI9XZ4gQJVTJUJ1kU7opRzdM=
MIME-Version: 1.0
Received: by 10.142.195.20 with SMTP id s20mr5846477wff.248.1274245132987; 
	Tue, 18 May 2010 21:58:52 -0700 (PDT)
Received: by 10.142.51.11 with HTTP; Tue, 18 May 2010 21:58:52 -0700 (PDT)
Date: Wed, 19 May 2010 12:58:52 +0800
Message-ID: <AANLkTimpa-583pmwOGK2bJNtGnH4aWNcyoiUS0As5Zjs@mail.gmail.com>
Subject: phrase query highlighter spans matching
From: Li Li <fancyerii@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

hi all,
    I read lucene in action 2nd Ed. It says SimpleSpanFragmenter will
"make fragments that always include the spans matching each document".
And also a SpanScorer existed for this use. But I can't find any class
named SpanScorer in lucene 3.0.1. And the result of  HighlighterTest
class in contrib/highlighter's TestCase testQueryScorerHits seems
different

   when we search phrase  "very long" in " text "This piece of text
refers to Kennedy at the beginning then has a longer piece of text
that is very long in the middle and finally ends with another
reference to Kennedy". the result is :
This piece of text refers to Kennedy at the beginning then has a
longer piece of text that is <B>very</B>
long after very is divided into the second fragment because it assume
each fragment's length is 100 character.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46180-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 19 09:39:06 2010
Return-Path: <java-user-return-46180-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20732 invoked from network); 19 May 2010 09:39:06 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 19 May 2010 09:39:06 -0000
Received: (qmail 49357 invoked by uid 500); 19 May 2010 09:39:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49161 invoked by uid 500); 19 May 2010 09:39:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49153 invoked by uid 99); 19 May 2010 09:39:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 May 2010 09:39:03 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [213.52.246.188] (HELO mail.diosphere.com) (213.52.246.188)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 19 May 2010 09:38:55 +0000
Received: from [213.52.246.149] (213.52.246.149) by mail.diosphere.com
 (213.52.246.188) with Microsoft SMTP Server id 8.1.240.5; Wed, 19 May 2010
 10:31:26 +0100
Message-ID: <4BF3B196.9030204@diosphere.com>
Date: Wed, 19 May 2010 10:38:30 +0100
From: Dragan Jotanovic <dragan.jotanovic@diosphere.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.1.9) Gecko/20100317 Lightning/1.0b1 Thunderbird/3.0.4
MIME-Version: 1.0
To: <java-user@lucene.apache.org>
Subject: Re: How to achive this kind of document ordering
References: <4BF2B9DE.2090108@diosphere.com> <AANLkTimLPXZrJFWiIZB2aHTVcwn1ha3Wjaev1YceXvVy@mail.gmail.com>
In-Reply-To: <AANLkTimLPXZrJFWiIZB2aHTVcwn1ha3Wjaev1YceXvVy@mail.gmail.com>
Content-Type: text/plain; charset="ISO-8859-1"; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for trying to help, but that is not the answer I was looking for.
The requirenment is a bit more specific. When sorting by second field, I 
don't want to sort it as A,A,A,B,B,C,C but A,B,C,A,B,C,A.
I'm not sure even if this is possible using the Sort API. Maybe custom 
scoring or document boosting or some other approach would be more suitable?


On 5/19/2010 1:12 AM, Erick Erickson wrote:
> I just skimmed your message, but Lucene provides
> for multiple sorts. You can construct a Sort object
> from an arbitrary number of fields, and any documents
> that all sort equally for fields 1..k will be resolved
> by considering field k+1.
>
> The performance impact when searching is mostly
> upon the very first sort when the caches are filled.
> If you have a HUGE number of unique values for
> a sort field, that may have heavy memory demands.
>
> As I said, I just skimmed your message, so if I'm off
> base let me know...
>
> HTH
> Erick
>
> On Tue, May 18, 2010 at 12:01 PM, Dragan Jotanovic<
> dragan.jotanovic@diosphere.com>  wrote:
>
>    
>> |Hi, I need to sort results by two fields. First one is numeric and sorting
>> should be in ascending order.
>> Second one should be ordered in a "levels" structure.
>> Here is the example:
>>
>> Unsorted:
>> DocId      SortFieldA          SortFieldB
>>   1        101A
>>   2        102        B
>>   3        102        A   |
>> |   4        101        C
>> ||   5        102        B|
>> |   6        101        A   |
>> |   7        101        B|
>> |   8        101        C|
>> |   9        101        B|
>> |  10        101        A|
>>
>>
>>
>> Sorted:
>> |DocId      SortFieldA          SortFieldB
>>   1        101A   |
>> |   7        101        B|
>> |   4        101        C|
>> |   6        101        A|
>> |   9        101        B|
>> |   8        101        C|
>> |  10        101        A|
>> |   ||3        102        A|||||
>> |   2        102        B||
>> ||   5        102        B||||
>>
>> First, all results are ordered by SortFieldA in ascending order. Than by
>> SortFieldB so that all documents with the same SortFieldA value are ordered
>> in "levels" structure. Each level consists of documents with distinct
>> SortFieldB values.
>> So, the requirenment is to show documents from first level first, than
>> second level, and so on.
>> It will not be possible to order documents while indexing, so I will need
>> search time ordering.
>> Is this achievable with lucene? What would be the best approach to solve
>> this without huge performance impact on multimillion documents index?
>> |
>>
>>
>>      


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46181-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 19 16:51:17 2010
Return-Path: <java-user-return-46181-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42750 invoked from network); 19 May 2010 16:51:16 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 19 May 2010 16:51:16 -0000
Received: (qmail 69591 invoked by uid 500); 19 May 2010 16:51:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69535 invoked by uid 500); 19 May 2010 16:51:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69527 invoked by uid 99); 19 May 2010 16:51:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 May 2010 16:51:13 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=SPF_PASS,URIBL_RED
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [198.147.195.5] (HELO flicker.bmc.com) (198.147.195.5)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 19 May 2010 16:51:07 +0000
Received: by flicker.bmc.com (Postfix, from userid 13749)
	id 987C41E6903; Wed, 19 May 2010 09:50:45 -0700 (MST)
Received: from PHX-HTPRD-02.adprod.bmc.com (phx-htprd-02.adprod.bmc.com [172.24.32.8])
	by flicker.bmc.com (Postfix) with ESMTP id 8DCF21E68F4
	for <java-user@lucene.apache.org>; Wed, 19 May 2010 09:50:45 -0700 (MST)
Received: from PHXCCRPRD02.adprod.bmc.com ([172.24.32.181]) by
 PHX-HTPRD-02.adprod.bmc.com ([172.24.32.8]) with mapi; Wed, 19 May 2010
 11:50:46 -0500
From: "Woolf, Ross" <Ross_Woolf@BMC.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 19 May 2010 11:50:41 -0500
Subject: RE: IndexWriter and memory usage
Thread-Topic: IndexWriter and memory usage
Thread-Index: AcrziiuIRTtFtb8QSreQroMw82sGwgD5/tgw
Message-ID: <492379B6AA909E4FAF672AACCA0EADC25CC17F74B6@PHXCCRPRD02.adprod.bmc.com>
References: <492379B6AA909E4FAF672AACCA0EADC24A40EE9B10@PHXCCRPRD02.adprod.bmc.com>
	 <492379B6AA909E4FAF672AACCA0EADC25CBABBED4D@PHXCCRPRD02.adprod.bmc.com>
	 <n2w9ac0c6aa1004141352s5edb3082o2f1952626c551450@mail.gmail.com>
	 <492379B6AA909E4FAF672AACCA0EADC25CC066FD36@PHXCCRPRD02.adprod.bmc.com>
	 <i2i9ac0c6aa1004270340heec28687zc734ebfbbae10bd3@mail.gmail.com>
	 <492379B6AA909E4FAF672AACCA0EADC25CC09D6A1A@PHXCCRPRD02.adprod.bmc.com>
	 <v2k9ac0c6aa1004291307z9aa93222y7512e27808eeb9db@mail.gmail.com>
	 <492379B6AA909E4FAF672AACCA0EADC25CC106250D@PHXCCRPRD02.adprod.bmc.com>
	 <i2v9ac0c6aa1005100126od669496anaec10961d42a4b1f@mail.gmail.com>
	 <492379B6AA909E4FAF672AACCA0EADC25CC134E53B@PHXCCRPRD02.adprod.bmc.com>
 <AANLkTim8CX11A_RTUDPxrMjMrxjjdraDWRlPacoo5Uah@mail.gmail.com>
In-Reply-To: <AANLkTim8CX11A_RTUDPxrMjMrxjjdraDWRlPacoo5Uah@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
x-cr-hashedpuzzle: BjiZ CZpG Cd4Z DSk/ D2XD EFeE E24b FLRc FVvl GM26 GtCC
 HNbE J4Xk KKEU KT4w
 KiE7;1;agBhAHYAYQAtAHUAcwBlAHIAQABsAHUAYwBlAG4AZQAuAGEAcABhAGMAaABlAC4AbwByAGcA;Sosha1_v1;7;{18B5098F-BFC6-423F-97B2-7DB3F23B2717};cgBvAHMAcwBfAHcAbwBvAGwAZgBAAGIAbQBjAC4AYwBvAG0A;Wed,
 19 May 2010 16:50:41
 GMT;UgBFADoAIABJAG4AZABlAHgAVwByAGkAdABlAHIAIABhAG4AZAAgAG0AZQBtAG8AcgB5ACAAdQBzAGEAZwBlAA==
x-cr-puzzleid: {18B5098F-BFC6-423F-97B2-7DB3F23B2717}
acceptlanguage: en-US
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

Just wanted to report that Michael was able to find the issue that was plag=
uing us, He has checked fixes into the 2.9.x, 3.0.x, 3.1.x, 4.0.x branches.=
  Most of the issues were related to indexing documents larger than the ind=
exing buffer size (16mb by default).  Now we no longer run out of memory du=
ring our large document indexing runs.

Thanks for your help Michael in resolving this.

-----Original Message-----
From: Michael McCandless [mailto:lucene@mikemccandless.com]=20
Sent: Friday, May 14, 2010 11:23 AM
To: java-user@lucene.apache.org
Subject: Re: IndexWriter and memory usage

The patch looks correct.

The 16 MB RAM buffer means the sum of the shared char[], byte[] and
PostingList/RawPostingList memory will be kept under 16 MB.  There are
definitely other things that require memory beyond this -- eg during a
segment merge, SegmentReaders are opened for each segment being
merged.  Also, if there are pending deletions, 4 bytes per doc is
allocated.

Applying deletions also opens SegmentReaders.

Also: a single very large document will cause IW to blow way past the
16 MB limit, using up as much as is required to index that one doc.
When that doc is finished, it will then flush and free objects until
it's back under the 16 MB limit.  If several threads happen to index
large docs at the same time, the problem is that much worse (they all
must finish before IW can flush).

Can you print the size of the documents you're indexing and see if
that correlates to when you see the memory growth?

Mike

On Tue, May 11, 2010 at 2:57 PM, Woolf, Ross <Ross_Woolf@bmc.com> wrote:
> Still working on some of the things you ask, namely searching without ind=
exing. =A0I need to modify our code and the general indexing process takes =
2 hours, so I won't have a quick turn around on that. =A0We also have a har=
d time answering the question about items that are normal but do they use m=
ore than the 16 MB. =A0The heap dump does not allow us to quickly identify =
specifics on objects like we show in images below, so we really don't know =
what the amount of memory is used up in objects of this sort. =A0We only kn=
ow that byte[] total for all is at 197891887.
>
> However, I have provided another image that breaks down the memory usage =
from the heap. =A0 A big question we have is that we talk about the 16 mb b=
uffer, but is there other memory used by Lucene beyond that that we should =
expect to see?
>
> http://i39.tinypic.com/o0o560.jpg
>
> we have 197891887 used in byte[] (anyone we look at is related in some wa=
y to the index writer)
> we have 169263904 used in char[] (these are related to the index writer t=
oo)
> we have 72658944 used in FreqProxTermsWriter$PostingList
> we have 37722668 used in RawPostingList[]
>
> All of these are well over the 16mb. =A0So we are a little lost as to wha=
t we should expect to see when we look at the memory usage
>
> I've attached the patch and the CheckIndex files. =A0Unfortunately on the=
 patch I guess my editor made some space line changes, so you get a lot of =
extra items in the patch that really are not any changes other than tab/spa=
ce.
>
> If you are open to a live share again, then maybe you could look at this =
data quicker than the screen shots I send.
>
> -----Original Message-----
> From: Michael McCandless [mailto:lucene@mikemccandless.com]
> Sent: Monday, May 10, 2010 2:27 AM
> To: java-user@lucene.apache.org
> Subject: Re: IndexWriter and memory usage
>
> Hmmmm...
>
> Your usage (searching for old doc & updating it, to add new fields) is fi=
ne.
>
> But: what memory usage do you see if you open a searcher, and search
> for all docs, but don't open an IndexWriter? =A0We need to tease apart
> the IndexReader vs IndexWriter memory usage you are seeing. =A0Also, can
> you post the output of CheckIndex (java
> org.apache.lucene.index.CheckIndex /path/to/index) of your fully built
> index? =A0That may give some hints about expected memory usage of IR (eg
> if # unique terms is large).
>
> More comments below:
>
> On Thu, May 6, 2010 at 1:03 PM, Woolf, Ross <Ross_Woolf@bmc.com> wrote:
>> Sorry to be so long in getting back on this. The patch you provided has =
improved the situation but we are still seeing some memory loss. =A0The fol=
lowing are some images from the heap dump. =A0I'll share with you what we a=
re seeing now.
>>
>> This first image shows the memory pattern. =A0Our fist commit takes plac=
e at about 3:54 when the steady trend up takes a drop and the new cycle beg=
ins. =A0 What we have found is the 2422 fix has made the memory in the firs=
t phase before the commit much better (and I'm sure throughout the entire r=
un). =A0But as you can see after the commit then we then again begin to los=
e memory. =A0One of the pieces of info to know about this is what you are s=
eeing, we have 5 threads that are pushing data to our Lucene plugin. =A0If =
we drop it down to 1 thread then we are much more successful and can actual=
ly index all of our data without running out of memory but at 5 threads it =
gets into trouble. =A0We still see a trend up in memory usage, but not as s=
evere as when we use the multiple threads.
>> http://tinypic.com/view.php?pic=3D2w6bf68&s=3D5
>
> Can you post the output of "svn diff" on the 2.9 code base you're
> using? =A0I just want to look & verify all issues we've discussed are
> included in your changes. =A0The fact that 1 thread is fine and 5
> threads are not still sounds like a symptom of LUCENE-2283.
>
> Also, does that heap usage graph exclude garbage? =A0Or, alternatively,
> can you provoke an OOME w/ 512 MB heap and then capture the heap dump
> at that point?
>
>> There is another piece of the picture that I think might be coming into =
play. =A0We have plugged Lucene into a legacy app and are subject to how we=
 can get it to deliver the data that we are indexing. =A0In some scenarios =
(like the one we are having this problem with) we are building our document=
s progressively (adding fields to the document through the process). =A0Wha=
t you see before the first commit is the legacy system handing us the first=
 field for many documents. Once we have gotten all of "field 1" for all doc=
uments then we commit that data into the index. =A0Then the system starts f=
eeding us "field 2." =A0So we perform a search to see if the document alrea=
dy exists (for the scenario you are seeing it does) and so it retrieves the=
 original document (we store a document ID) and it then adds the new field =
of data to the existing document and we "update" the document in the index.=
 =A0After the first commit, the rest of the process is one where a document=
 already exist and so the new field is added and and the document is update=
d. =A0It is in this process that we start rapidly losing memory. =A0The fol=
lowing images show some examples of common areas where memory is being held=
.
>>
>> http://tinypic.com/view.php?pic=3D11vkwnb&s=3D5
>
> This looks like "normal" memory usage of IndexWriter -- these are the
> recycled buffers used for holding stored fields. =A0However: the net RAM
> used by this allocation should not exceed your 16 MB IW ram buffer
> size -- does it?
>
>> http://tinypic.com/view.php?pic=3Dabq9fp&s=3D5
>
> This one is the byte[] buffer used by CompoundFileReader, opened by
> IndexReader. =A0It's odd that you have so many of these (if I'm reading
> this correctly) -- are you certain all opened readers are being
> closed? =A0How many segments do you have in your index? =A0Or... are ther=
e
> many unique threads doing the searching? =A0EG do you create a new
> thread for every search or update?
>
>> http://tinypic.com/view.php?pic=3D25pskyp&s=3D5
>
> This one is also normal memory used by IndexWriter, but as above, the
> net RAM used by this allocation (summed w/ the above one) should not
> exceed your 16 MB IW ram buffer size.
>
>> As mentioned, we are subject to how we can have the legacy app feed us t=
he data and so this is why we do it this way. =A0We treat this system as a =
real time system and at anytime the legacy system may send us a field that =
needs to be added or updated to a document. =A0So we search for the documen=
t and if found we either add or update a field if the field is already exis=
ting in the document. =A0So I started to wonder if a clue in this memory lo=
ss comes from the fact that we are retrieving an existing document and then=
 adding to it and updating.
>>
>> Now, if we eliminate the updating and simply add each item as a new docu=
ment (which we did just to test but won't be adequate for our running syste=
m), then we still see a slight trend upward in memory usage and the followi=
ng images show that now most of the =A0memory is consumed in char[] rather =
than the byte[] we saw before. =A0We don't know if this is normal and expec=
ted, or if it is something to be concerned about as well.
>>
>> http://tinypic.com/view.php?pic=3Dvfgkyt&s=3D5
>
> That memory usage is normal -- it's used by the in-RAM terms index of
> your opened IndexReader. =A0But I'd like to see the memory usage of
> simply opening your IndexReader and searching for documents to update,
> but not opening an IndexWriter at all.
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46182-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 19 17:07:22 2010
Return-Path: <java-user-return-46182-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48385 invoked from network); 19 May 2010 17:07:21 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 19 May 2010 17:07:21 -0000
Received: (qmail 94875 invoked by uid 500); 19 May 2010 17:07:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94832 invoked by uid 500); 19 May 2010 17:07:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94824 invoked by uid 99); 19 May 2010 17:07:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 May 2010 17:07:19 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL,URIBL_RED
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.217.214] (HELO mail-gx0-f214.google.com) (209.85.217.214)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 May 2010 17:07:12 +0000
Received: by gxk6 with SMTP id 6so245676gxk.5
        for <java-user@lucene.apache.org>; Wed, 19 May 2010 10:06:47 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.150.47.15 with SMTP id u15mr68711ybu.220.1274288807044; Wed, 
	19 May 2010 10:06:47 -0700 (PDT)
Received: by 10.151.11.20 with HTTP; Wed, 19 May 2010 10:06:46 -0700 (PDT)
In-Reply-To: <492379B6AA909E4FAF672AACCA0EADC25CC17F74B6@PHXCCRPRD02.adprod.bmc.com>
References: <492379B6AA909E4FAF672AACCA0EADC24A40EE9B10@PHXCCRPRD02.adprod.bmc.com>
	 <492379B6AA909E4FAF672AACCA0EADC25CC066FD36@PHXCCRPRD02.adprod.bmc.com>
	 <i2i9ac0c6aa1004270340heec28687zc734ebfbbae10bd3@mail.gmail.com>
	 <492379B6AA909E4FAF672AACCA0EADC25CC09D6A1A@PHXCCRPRD02.adprod.bmc.com>
	 <v2k9ac0c6aa1004291307z9aa93222y7512e27808eeb9db@mail.gmail.com>
	 <492379B6AA909E4FAF672AACCA0EADC25CC106250D@PHXCCRPRD02.adprod.bmc.com>
	 <i2v9ac0c6aa1005100126od669496anaec10961d42a4b1f@mail.gmail.com>
	 <492379B6AA909E4FAF672AACCA0EADC25CC134E53B@PHXCCRPRD02.adprod.bmc.com>
	 <AANLkTim8CX11A_RTUDPxrMjMrxjjdraDWRlPacoo5Uah@mail.gmail.com>
	 <492379B6AA909E4FAF672AACCA0EADC25CC17F74B6@PHXCCRPRD02.adprod.bmc.com>
Date: Wed, 19 May 2010 13:06:46 -0400
Message-ID: <AANLkTinX6ernx6w2bJ1RmZ4YeNMpWJws302FoDNghXnE@mail.gmail.com>
Subject: Re: IndexWriter and memory usage
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Phew!  Thank for bringing closure Ross.  Happy indexing,

Mike

On Wed, May 19, 2010 at 12:50 PM, Woolf, Ross <Ross_Woolf@bmc.com> wrote:
> Just wanted to report that Michael was able to find the issue that was pl=
aguing us, He has checked fixes into the 2.9.x, 3.0.x, 3.1.x, 4.0.x branche=
s. =A0Most of the issues were related to indexing documents larger than the=
 indexing buffer size (16mb by default). =A0Now we no longer run out of mem=
ory during our large document indexing runs.
>
> Thanks for your help Michael in resolving this.
>
> -----Original Message-----
> From: Michael McCandless [mailto:lucene@mikemccandless.com]
> Sent: Friday, May 14, 2010 11:23 AM
> To: java-user@lucene.apache.org
> Subject: Re: IndexWriter and memory usage
>
> The patch looks correct.
>
> The 16 MB RAM buffer means the sum of the shared char[], byte[] and
> PostingList/RawPostingList memory will be kept under 16 MB. =A0There are
> definitely other things that require memory beyond this -- eg during a
> segment merge, SegmentReaders are opened for each segment being
> merged. =A0Also, if there are pending deletions, 4 bytes per doc is
> allocated.
>
> Applying deletions also opens SegmentReaders.
>
> Also: a single very large document will cause IW to blow way past the
> 16 MB limit, using up as much as is required to index that one doc.
> When that doc is finished, it will then flush and free objects until
> it's back under the 16 MB limit. =A0If several threads happen to index
> large docs at the same time, the problem is that much worse (they all
> must finish before IW can flush).
>
> Can you print the size of the documents you're indexing and see if
> that correlates to when you see the memory growth?
>
> Mike
>
> On Tue, May 11, 2010 at 2:57 PM, Woolf, Ross <Ross_Woolf@bmc.com> wrote:
>> Still working on some of the things you ask, namely searching without in=
dexing. =A0I need to modify our code and the general indexing process takes=
 2 hours, so I won't have a quick turn around on that. =A0We also have a ha=
rd time answering the question about items that are normal but do they use =
more than the 16 MB. =A0The heap dump does not allow us to quickly identify=
 specifics on objects like we show in images below, so we really don't know=
 what the amount of memory is used up in objects of this sort. =A0We only k=
now that byte[] total for all is at 197891887.
>>
>> However, I have provided another image that breaks down the memory usage=
 from the heap. =A0 A big question we have is that we talk about the 16 mb =
buffer, but is there other memory used by Lucene beyond that that we should=
 expect to see?
>>
>> http://i39.tinypic.com/o0o560.jpg
>>
>> we have 197891887 used in byte[] (anyone we look at is related in some w=
ay to the index writer)
>> we have 169263904 used in char[] (these are related to the index writer =
too)
>> we have 72658944 used in FreqProxTermsWriter$PostingList
>> we have 37722668 used in RawPostingList[]
>>
>> All of these are well over the 16mb. =A0So we are a little lost as to wh=
at we should expect to see when we look at the memory usage
>>
>> I've attached the patch and the CheckIndex files. =A0Unfortunately on th=
e patch I guess my editor made some space line changes, so you get a lot of=
 extra items in the patch that really are not any changes other than tab/sp=
ace.
>>
>> If you are open to a live share again, then maybe you could look at this=
 data quicker than the screen shots I send.
>>
>> -----Original Message-----
>> From: Michael McCandless [mailto:lucene@mikemccandless.com]
>> Sent: Monday, May 10, 2010 2:27 AM
>> To: java-user@lucene.apache.org
>> Subject: Re: IndexWriter and memory usage
>>
>> Hmmmm...
>>
>> Your usage (searching for old doc & updating it, to add new fields) is f=
ine.
>>
>> But: what memory usage do you see if you open a searcher, and search
>> for all docs, but don't open an IndexWriter? =A0We need to tease apart
>> the IndexReader vs IndexWriter memory usage you are seeing. =A0Also, can
>> you post the output of CheckIndex (java
>> org.apache.lucene.index.CheckIndex /path/to/index) of your fully built
>> index? =A0That may give some hints about expected memory usage of IR (eg
>> if # unique terms is large).
>>
>> More comments below:
>>
>> On Thu, May 6, 2010 at 1:03 PM, Woolf, Ross <Ross_Woolf@bmc.com> wrote:
>>> Sorry to be so long in getting back on this. The patch you provided has=
 improved the situation but we are still seeing some memory loss. =A0The fo=
llowing are some images from the heap dump. =A0I'll share with you what we =
are seeing now.
>>>
>>> This first image shows the memory pattern. =A0Our fist commit takes pla=
ce at about 3:54 when the steady trend up takes a drop and the new cycle be=
gins. =A0 What we have found is the 2422 fix has made the memory in the fir=
st phase before the commit much better (and I'm sure throughout the entire =
run). =A0But as you can see after the commit then we then again begin to lo=
se memory. =A0One of the pieces of info to know about this is what you are =
seeing, we have 5 threads that are pushing data to our Lucene plugin. =A0If=
 we drop it down to 1 thread then we are much more successful and can actua=
lly index all of our data without running out of memory but at 5 threads it=
 gets into trouble. =A0We still see a trend up in memory usage, but not as =
severe as when we use the multiple threads.
>>> http://tinypic.com/view.php?pic=3D2w6bf68&s=3D5
>>
>> Can you post the output of "svn diff" on the 2.9 code base you're
>> using? =A0I just want to look & verify all issues we've discussed are
>> included in your changes. =A0The fact that 1 thread is fine and 5
>> threads are not still sounds like a symptom of LUCENE-2283.
>>
>> Also, does that heap usage graph exclude garbage? =A0Or, alternatively,
>> can you provoke an OOME w/ 512 MB heap and then capture the heap dump
>> at that point?
>>
>>> There is another piece of the picture that I think might be coming into=
 play. =A0We have plugged Lucene into a legacy app and are subject to how w=
e can get it to deliver the data that we are indexing. =A0In some scenarios=
 (like the one we are having this problem with) we are building our documen=
ts progressively (adding fields to the document through the process). =A0Wh=
at you see before the first commit is the legacy system handing us the firs=
t field for many documents. Once we have gotten all of "field 1" for all do=
cuments then we commit that data into the index. =A0Then the system starts =
feeding us "field 2." =A0So we perform a search to see if the document alre=
ady exists (for the scenario you are seeing it does) and so it retrieves th=
e original document (we store a document ID) and it then adds the new field=
 of data to the existing document and we "update" the document in the index=
. =A0After the first commit, the rest of the process is one where a documen=
t already exist and so the new field is added and and the document is updat=
ed. =A0It is in this process that we start rapidly losing memory. =A0The fo=
llowing images show some examples of common areas where memory is being hel=
d.
>>>
>>> http://tinypic.com/view.php?pic=3D11vkwnb&s=3D5
>>
>> This looks like "normal" memory usage of IndexWriter -- these are the
>> recycled buffers used for holding stored fields. =A0However: the net RAM
>> used by this allocation should not exceed your 16 MB IW ram buffer
>> size -- does it?
>>
>>> http://tinypic.com/view.php?pic=3Dabq9fp&s=3D5
>>
>> This one is the byte[] buffer used by CompoundFileReader, opened by
>> IndexReader. =A0It's odd that you have so many of these (if I'm reading
>> this correctly) -- are you certain all opened readers are being
>> closed? =A0How many segments do you have in your index? =A0Or... are the=
re
>> many unique threads doing the searching? =A0EG do you create a new
>> thread for every search or update?
>>
>>> http://tinypic.com/view.php?pic=3D25pskyp&s=3D5
>>
>> This one is also normal memory used by IndexWriter, but as above, the
>> net RAM used by this allocation (summed w/ the above one) should not
>> exceed your 16 MB IW ram buffer size.
>>
>>> As mentioned, we are subject to how we can have the legacy app feed us =
the data and so this is why we do it this way. =A0We treat this system as a=
 real time system and at anytime the legacy system may send us a field that=
 needs to be added or updated to a document. =A0So we search for the docume=
nt and if found we either add or update a field if the field is already exi=
sting in the document. =A0So I started to wonder if a clue in this memory l=
oss comes from the fact that we are retrieving an existing document and the=
n adding to it and updating.
>>>
>>> Now, if we eliminate the updating and simply add each item as a new doc=
ument (which we did just to test but won't be adequate for our running syst=
em), then we still see a slight trend upward in memory usage and the follow=
ing images show that now most of the =A0memory is consumed in char[] rather=
 than the byte[] we saw before. =A0We don't know if this is normal and expe=
cted, or if it is something to be concerned about as well.
>>>
>>> http://tinypic.com/view.php?pic=3Dvfgkyt&s=3D5
>>
>> That memory usage is normal -- it's used by the in-RAM terms index of
>> your opened IndexReader. =A0But I'd like to see the memory usage of
>> simply opening your IndexReader and searching for documents to update,
>> but not opening an IndexWriter at all.
>>
>> Mike
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46183-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 19 20:54:18 2010
Return-Path: <java-user-return-46183-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29837 invoked from network); 19 May 2010 20:54:17 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 19 May 2010 20:54:17 -0000
Received: (qmail 49984 invoked by uid 500); 19 May 2010 20:54:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49944 invoked by uid 500); 19 May 2010 20:54:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49936 invoked by uid 99); 19 May 2010 20:54:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 May 2010 20:54:15 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of f.wesemann@fotofinder.net designates 212.87.63.22 as permitted sender)
Received: from [212.87.63.22] (HELO gemini.fotofinder.net) (212.87.63.22)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 May 2010 20:54:08 +0000
Received: from umbriel.fotofinder.net ([213.191.35.212])
	by gemini.fotofinder.net with esmtp (Exim 4.63)
	(envelope-from <f.wesemann@fotofinder.net>)
	id 1OEqGv-00040a-QE
	for java-user@lucene.apache.org; Wed, 19 May 2010 22:53:45 +0200
Received: from [213.191.35.210] (helo=dhcp84.cff)
	by umbriel.fotofinder.net with esmtp (Exim 4.69)
	(envelope-from <f.wesemann@fotofinder.net>)
	id 1OEqGv-0000hS-Gk
	for java-user@lucene.apache.org; Wed, 19 May 2010 22:53:45 +0200
Message-ID: <4BF44FD9.3050009@fotofinder.net>
Date: Wed, 19 May 2010 22:53:45 +0200
From: Frank Wesemann <f.wesemann@fotofinder.net>
User-Agent: Thunderbird 2.0.0.9 (X11/20071115)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: How to achive this kind of document ordering
References: <4BF2B9DE.2090108@diosphere.com>
In-Reply-To: <4BF2B9DE.2090108@diosphere.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Spam_score: -3.2
X-Spam_score_int: -31
X-Spam_bar: ---

Hi Dragan,
>
>
> First, all results are ordered by SortFieldA in ascending order. Than 
> by SortFieldB so that all documents with the same SortFieldA value are 
> ordered in "levels" structure. Each level consists of documents with 
> distinct SortFieldB values.
> So, the requirenment is to show documents from first level first, than 
> second level, and so on.
> It will not be possible to order documents while indexing, so I will 
> need search time ordering.
> Is this achievable with lucene? What would be the best approach to 
> solve this without huge performance impact on multimillion documents 
> index?
You might want to have a look at oal.search.TopFieldCollector and the 
accompanied Comparator Classes
For a similar approach ( I had to sort by the quantity on a certain 
Field ) I borrowed a lot of the idea of these classes.
 From the basic principles therein I derived DocumentComparators, which 
compare not only FieldValues but whole documents.
The outcome is not one sorted list, but a structure of lists which I 
combine in nested
while( list<SortFieldA>.hasNext() ) {
    overallResult.add ( listOfSortFieldA.get( listOfSortFieldB).next() )
}
loops.

Performance is ofcourse affected by numbers of documents you want to return.

-- 
mit freundlichem Gru,

Frank Wesemann
Fotofinder GmbH         USt-IdNr. DE812854514
Software Entwicklung    Web: http://www.fotofinder.com/
Potsdamer Str. 96       Tel: +49 30 25 79 28 90
10785 Berlin            Fax: +49 30 25 79 28 999

Sitz: Berlin
Amtsgericht Berlin Charlottenburg (HRB 73099)
Geschftsfhrer: Ali Paczensky




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46184-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 19 21:20:00 2010
Return-Path: <java-user-return-46184-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38642 invoked from network); 19 May 2010 21:20:00 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 19 May 2010 21:20:00 -0000
Received: (qmail 91190 invoked by uid 500); 19 May 2010 21:19:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91152 invoked by uid 500); 19 May 2010 21:19:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91144 invoked by uid 99); 19 May 2010 21:19:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 May 2010 21:19:57 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 May 2010 21:19:50 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 8915E71C0EB; Wed, 19 May 2010 14:19:29 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 8749C71C068
	for <java-user@lucene.apache.org>; Wed, 19 May 2010 14:19:29 -0700 (PDT)
Date: Wed, 19 May 2010 14:19:29 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Subject: Re: Sorting and Empty (non-existing) Fields
In-Reply-To: <F48EBC643BB1F344A84D2724AD7397C40F9AC9CB39@mimas.comparis.ch>
Message-ID: <alpine.DEB.1.10.1005191409380.16403@radix.cryptio.net>
References: <F48EBC643BB1F344A84D2724AD7397C40F9AC9CB39@mimas.comparis.ch>
User-Agent: Alpine 1.10 (DEB 962 2008-03-14)
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Now I want to search something on the first field and want the results 
: sorted by relevance, then by the first field, then by the second field.

first off: if your primary sort is on relevancy, there are going to be 
very few cases where your secondary sort comes into play -- the scoring 
formula generates a float, and those floats aren't likely to be identical 
unless the documents themselves are extremely similar.

: My problem now is that, if I have a lot of Entries with the same value 
: in the first field and no value in the second field, these entries with 
: no value on the 2nd field are coming first.
: 
: Is there any way to increase the score on those documents which have a 
: value on the second field? Or is there any way to skip those Documents 
: which don't have the second field? I don't want to use a Filter, it 

yes, add a prohibited clause to your query, which is a nested BooleanQuery 
containing a mandatory MatchAllDocsQuery and a prohibited full range query 
on field2 (ie:  "-(+*:* -field2:[* TO *]"  ) ... that will ensure those 
docs are exlcuded from your query.  alternately you could make them score 
lower by just adding an optional clause that boosts the score of any 
docs that do have a value in that field (ie:  "field2[* TO *]^1000"  )

Lastly: if you don't want to affect the scores in any way, and you don't 
wnat to exclude the docs from the result set, just make them sort after 
other docs that do have a value in that field, you can consider using 
something like this...

http://svn.apache.org/viewvc/lucene/dev/trunk/solr/src/java/org/apache/solr/search/MissingStringLastComparatorSource.java

...but note that it only works for sorting "Strings" because that's the 
only type of FieldCache that understands the idea of Documents that are 
"missing" a field.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46185-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 20 02:03:53 2010
Return-Path: <java-user-return-46185-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37526 invoked from network); 20 May 2010 02:03:53 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 20 May 2010 02:03:53 -0000
Received: (qmail 44799 invoked by uid 500); 20 May 2010 02:03:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44696 invoked by uid 500); 20 May 2010 02:03:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44688 invoked by uid 99); 20 May 2010 02:03:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 May 2010 02:03:51 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lahendrix@wisc.edu designates 144.92.197.212 as permitted sender)
Received: from [144.92.197.212] (HELO argol.doit.wisc.edu) (144.92.197.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 May 2010 02:03:45 +0000
MIME-version: 1.0
Content-type: multipart/alternative;
 boundary="Boundary_(ID_WzaVMjRKF4sm1ycIGpWGjQ)"
Received: from avs-daemon.smtpauth3.wiscmail.wisc.edu by
 smtpauth3.wiscmail.wisc.edu
 (Sun Java(tm) System Messaging Server 7u2-7.05 32bit (built Jul 30 2009))
 id <0L2P00C004DN7K00@smtpauth3.wiscmail.wisc.edu> for
 java-user@lucene.apache.org; Wed, 19 May 2010 21:03:23 -0500 (CDT)
Received: from [192.168.1.133]
 (71-90-91-136.dhcp.ftbg.wi.charter.com [71.90.91.136])
 by smtpauth3.wiscmail.wisc.edu
 (Sun Java(tm) System Messaging Server 7u2-7.05 32bit (built Jul 30 2009))
 with ESMTPSA id <0L2P006ZL4DFMC30@smtpauth3.wiscmail.wisc.edu> for
 java-user@lucene.apache.org; Wed, 19 May 2010 21:03:22 -0500 (CDT)
Date: Wed, 19 May 2010 21:03:14 -0500
From: Larry Hendrix <lahendrix@wisc.edu>
Subject: Re: Stemming Problem
In-reply-to: <AANLkTilRIWYkSsNAO6P3L0roE2-OgfIuXtWDiv_TCXIP@mail.gmail.com>
To: java-user@lucene.apache.org
Message-id: <5FE262D7-2A6C-4134-9FAF-8873D640CD3F@wisc.edu>
X-Mailer: Apple Mail (2.1077)
X-Spam-Report: AuthenticatedSender=yes, SenderIP=192.168.1.133
X-Spam-PmxInfo: Server=avs-13, Version=5.5.9.395186,
 Antispam-Engine: 2.7.2.376379, Antispam-Data: 2010.5.20.15416,
 SenderIP=192.168.1.133
References: <52F9A361-5B2D-4B2D-854E-8C32EE0675BD@wisc.edu>
 <AANLkTilRIWYkSsNAO6P3L0roE2-OgfIuXtWDiv_TCXIP@mail.gmail.com>

--Boundary_(ID_WzaVMjRKF4sm1ycIGpWGjQ)
Content-type: text/plain; CHARSET=US-ASCII
Content-transfer-encoding: 7BIT

Thanks for the advice. I want to keep the capitalization because in our application we are mining specific contact and company names from news articles. About 99% of the time if we match a contact or company and it's capitalized we avoid false matches.

--Larry

On May 18, 2010, at 7:46 PM, Erick Erickson wrote:

> You can construct your own analyzer by creating
> it from a pre-existing Tokenizer
> (e.g. WhiteSpaceTokenizer) and any number
> of TokenfFilters (e.g. TokenFilter). You can
> string any number of TokenFilters together
> to get many different effects.
> 
> But I have to ask, why you want to keep capitalization?
> and punctuation? Do you really want to fail to match
> text indexed with "Erickson, Erick" with the query
> "erick erickson"? That's often a source of frustration
> instead of goodness.
> 
> HTH
> Erick
> 
> On Tue, May 18, 2010 at 2:05 PM, Larry Hendrix <lahendrix@wisc.edu> wrote:
> 
>> Hi,
>> 
>> Right now I'm using Lucene with a basic Whitespace Anayzer but I'm having
>> problems with stemming. Does anyone have a recommendation for other text
>> analyzers that handle stemming and also keep capitalization, stop words, and
>> punctuation?
>> 
>> Thanks,
>> Larry
>> 
>> 
>> Larry A. Hendrix, Graduate Student
>> Computer Science Department
>> University of Wisconsin-Madison
>> 1300 University Ave Rm 6749
>> Madison, WI 53711
>> Office: (608) 263-7624
>> lhendrix@cs.wisc.edu
>> Grambling State University Alum
>> 
>> 

Larry A. Hendrix, Graduate Student 
Computer Science Department 
University of Wisconsin-Madison 
1300 University Ave Rm 6749 
Madison, WI 53711 
Office: (608) 263-7624 
lhendrix@cs.wisc.edu 
Grambling State University Alum 


--Boundary_(ID_WzaVMjRKF4sm1ycIGpWGjQ)--

From java-user-return-46186-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 20 03:14:53 2010
Return-Path: <java-user-return-46186-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54428 invoked from network); 20 May 2010 03:14:52 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 20 May 2010 03:14:52 -0000
Received: (qmail 88419 invoked by uid 500); 20 May 2010 03:14:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88170 invoked by uid 500); 20 May 2010 03:14:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88162 invoked by uid 99); 20 May 2010 03:14:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 May 2010 03:14:49 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of the.networker@sympatico.ca designates 65.55.34.79 as permitted sender)
Received: from [65.55.34.79] (HELO col0-omc2-s5.col0.hotmail.com) (65.55.34.79)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 May 2010 03:14:41 +0000
Received: from COL124-W64 ([65.55.34.73]) by col0-omc2-s5.col0.hotmail.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Wed, 19 May 2010 20:14:19 -0700
Message-ID: <COL124-W647729FFAD4013C5CE91028FE30@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_007b370d-8970-4d71-806a-8edb5d36b85c_"
X-Originating-IP: [174.95.141.28]
From: The N <the.networker@sympatico.ca>
To: <java-user@lucene.apache.org>
Subject: View Lucene JavaDoc and class hierarchy graphically
Date: Thu, 20 May 2010 03:14:19 +0000
Importance: Normal
MIME-Version: 1.0
X-OriginalArrivalTime: 20 May 2010 03:14:19.0472 (UTC) FILETIME=[896F7D00:01CAF7CA]
X-Virus-Checked: Checked by ClamAV on apache.org

--_007b370d-8970-4d71-806a-8edb5d36b85c_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


Here is an alternative way to view Lucene Java Doc. You may take a look at =
this site http://www.DataCivilization.com/L.html

When viewing the Lucene JavaDoc=2C you can see the class hierarchy similar =
to UML at the same time.



 		 	   		  =

--_007b370d-8970-4d71-806a-8edb5d36b85c_--

From java-user-return-46187-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 20 06:52:25 2010
Return-Path: <java-user-return-46187-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13968 invoked from network); 20 May 2010 06:52:25 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 20 May 2010 06:52:25 -0000
Received: (qmail 41707 invoked by uid 500); 20 May 2010 06:52:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41549 invoked by uid 500); 20 May 2010 06:52:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41541 invoked by uid 99); 20 May 2010 06:52:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 May 2010 06:52:22 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=AWL,FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of polattechnology@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 May 2010 06:52:16 +0000
Received: by fxm16 with SMTP id 16so2343166fxm.35
        for <java-user@lucene.apache.org>; Wed, 19 May 2010 23:51:55 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=07no1bFSeCrqUxfYch2LgKrrRm2khi+lzeW/ZNLtF80=;
        b=J3c0uuyqvAUAlZ+gZHJt0l9kx7c1uqlbQR1rtLe62yRxWb+eYRVTeB1M7ze3fwyQMP
         Zv8UC/9ohKrkMT930bCbltnYkYdbG5jSUQj7LgnRPD2jo9bcmDSFvuCet22ESCboRPDg
         LBOBzseogIscL8AwiV56MEIBF5T3EBLUeNaEU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=TBP0N1ML2qXfkoTUYl7NPGACrrN8O+NRMCUwMb+bVvGIp+J17S4ysQYOtkKXYq9lDG
         frb1WuL9qbpiVxChMpbfVbqTBexUIMEnmWTfUk53ez8Fr0lnXzsE3U0w50Lmyep4Sj8g
         4xJuttNPN5hzOb0FcfFq/2pdRVxajKL0+p/xA=
MIME-Version: 1.0
Received: by 10.204.9.21 with SMTP id j21mr27008bkj.180.1274338314952; Wed, 19 
	May 2010 23:51:54 -0700 (PDT)
Received: by 10.204.55.212 with HTTP; Wed, 19 May 2010 23:51:54 -0700 (PDT)
In-Reply-To: <alpine.DEB.1.10.1005191122530.16403@radix.cryptio.net>
References: <AANLkTikuKgt7hCbJE1r2UbIJ8lCOBAdccC6BAYdlEssC@mail.gmail.com>
	 <alpine.DEB.1.10.1005191122530.16403@radix.cryptio.net>
Date: Thu, 20 May 2010 09:51:54 +0300
Message-ID: <AANLkTik8y9kGxebYiGxgKQ1vlCL-z6xejep3VQ3VFKKf@mail.gmail.com>
Subject: Desing Question related with Lucene
From: ilkay polat <polattechnology@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001517588558961f480487010225

--001517588558961f480487010225
Content-Type: text/plain; charset=UTF-8

Hello;

  I have a desing question while developing my project. If you have time,
  lease read my problem and if you have a solution please make me informed.

  Project : Our system produce a txt file for every one hour(13 pm 14 pm
e.g.
). (These files contain logs from network e.g. TCP logs). I use FreeBSD and
  cron. For every hour, after five minutes later(13:05 pm , 14:05 pm e.g.),
  there is a process which indexes this txt file with lucene indexing.  Then
I
  have an web app which search some textual search with this produced
indexed
  file(lucene produce obviously).

  Problem: Our customers wants to know which client is using internet most,
  which site is used most and like this things which are done with sql like
  that as you know

  select site, count(site) from log_table
  group by site

  Mhy solution is: A second process which insert logs to table (temporary
  table ) and aftr inserting do some quesries on this temporarty table and
get
 results to main statistics tablse which has tables as which site is most
  visited table . This temporary table updates related statistics table .


  I have need a recommendation about the problem? Is there any solution on
  lucene(get most ranked kind query searching is exist or not and if yes is
it
 good for performance)
  If there is no a solution in lucene what will you use for this situation?
: Thanks for your help.


: ilkay POLAT
: Research &Development Software Engineer TURKEY

--001517588558961f480487010225--

From java-user-return-46188-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 20 07:57:51 2010
Return-Path: <java-user-return-46188-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24698 invoked from network); 20 May 2010 07:57:51 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 20 May 2010 07:57:51 -0000
Received: (qmail 89471 invoked by uid 500); 20 May 2010 07:57:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89349 invoked by uid 500); 20 May 2010 07:57:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89335 invoked by uid 99); 20 May 2010 07:57:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 May 2010 07:57:48 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of polattechnology@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 May 2010 07:57:41 +0000
Received: by fxm16 with SMTP id 16so2396577fxm.35
        for <java-user@lucene.apache.org>; Thu, 20 May 2010 00:57:20 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=5SJ779gcC+4e+YILjaMnCPqAh51pDdqexv2rjPy6uxE=;
        b=cQdwVEdRWuUHJxDpIJ791exYCSCACWTbMORJgmFPg3P06hprfHzgJbDAyTr1LaT5f0
         grW9gA6Vf2uBIo/gr4CH/UVKpmisgpjGVr0tA83oJZIxvPvZGx/Qun+mT+CseKWvc75T
         gNI2KtJFXqTofABWAaFPiLaczYKMElwl06iEo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=TwqzCz2Zdm4nyRBr+LfC3AHTRn/Xqq84fQkkpJleLjetanWenyFU7y4WHAj1p/g6Jy
         jxh7uiAdZLRszuksJieQ9VLhBkgj8HB+7ArAaV2ooeJZ3fc/HBOzVfpPz+UylGHFL6BP
         rX1KHkR1u9KKgpULJOBOF9iGB56rkJc6JOvtg=
MIME-Version: 1.0
Received: by 10.102.240.32 with SMTP id n32mr1141983muh.114.1274342240492; 
	Thu, 20 May 2010 00:57:20 -0700 (PDT)
Received: by 10.204.55.212 with HTTP; Thu, 20 May 2010 00:57:20 -0700 (PDT)
Date: Thu, 20 May 2010 10:57:20 +0300
Message-ID: <AANLkTinLtVwpXTBj9tpkyXgOGYUNn7S8aR5LUoetDP7j@mail.gmail.com>
Subject: Removing old datas from index file
From: ilkay polat <polattechnology@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00163641765f911f11048701ecde
X-Virus-Checked: Checked by ClamAV on apache.org

--00163641765f911f11048701ecde
Content-Type: text/plain; charset=UTF-8

Hello;

I need to learn whether there is a way to remove some records on indexed
files. And is it rapid for removing some indexed file records (For example
clean old records whose created date's are less than a definite day) .
Thanks

--00163641765f911f11048701ecde--

From java-user-return-46189-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 20 08:34:49 2010
Return-Path: <java-user-return-46189-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30450 invoked from network); 20 May 2010 08:34:49 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 20 May 2010 08:34:49 -0000
Received: (qmail 26861 invoked by uid 500); 20 May 2010 08:34:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26832 invoked by uid 500); 20 May 2010 08:34:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26824 invoked by uid 99); 20 May 2010 08:34:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 May 2010 08:34:46 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 72.14.220.155 as permitted sender)
Received: from [72.14.220.155] (HELO fg-out-1718.google.com) (72.14.220.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 May 2010 08:34:38 +0000
Received: by fg-out-1718.google.com with SMTP id 22so391608fge.5
        for <java-user@lucene.apache.org>; Thu, 20 May 2010 01:34:18 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=ReOIr0rnf5XPIjxAbZghmbWowczr2DFK2S4eUDh3T5s=;
        b=TXmuuilAXMlIqkMlKYNLip9wvkX6Bc6maZOej6ON0uog4Vug8KJxm5Hei1FGaQjzvi
         qoBzSCXA5xCGF8G24n49DanGwg0NgyYXpbpnPuMOY5VCmZsaIJaEDsjUORWmwCNoz6Qq
         ji2gUVRRAWG0sHGgzERUufitDu3SgdLPz6Y34=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=V+rtUiXAL0g7grkgzjtIq63JkLlgXVnA5rsMHj1VWYhX31XMtk7scCxvQ1xk+9JrNG
         Y1i1otRGiltZnRMar+O0R6pdcgfrL7P2xY6ZZNHdwu3BC/dKoQxVji3ZiotHmhU2mNw8
         yppGVAtUpRaEOUwTCU9tk0qQtCJp3L5KQp8aE=
Received: by 10.102.174.30 with SMTP id w30mr820211mue.57.1274344458235; Thu, 
	20 May 2010 01:34:18 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.54.198 with HTTP; Thu, 20 May 2010 01:33:58 -0700 (PDT)
In-Reply-To: <AANLkTinLtVwpXTBj9tpkyXgOGYUNn7S8aR5LUoetDP7j@mail.gmail.com>
References: <AANLkTinLtVwpXTBj9tpkyXgOGYUNn7S8aR5LUoetDP7j@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Thu, 20 May 2010 09:33:58 +0100
Message-ID: <AANLkTinJOsRkohFM9c0qKCV3uCevJuF7rNn4dJB1tgIb@mail.gmail.com>
Subject: Re: Removing old datas from index file
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

> I need to learn whether there is a way to remove some records on indexed
> files.

Of course.  See IndexReader and IndexWriter deleteXXX methods.

> And is it rapid for removing some indexed file records

Of course.

> (For example clean old records whose created date's are less than a definite day) .

If the created date is an indexed field you could do this with one of
the methods that takes a query - RangeQuery in your case from, say, 0
TO 20100101, dependent obviously on your data.  It the date field is
not indexed you could loop through all docs checking the date and
zapping the old ones by docNum



--
Ian.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46190-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 20 08:56:49 2010
Return-Path: <java-user-return-46190-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33771 invoked from network); 20 May 2010 08:56:49 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 20 May 2010 08:56:49 -0000
Received: (qmail 48401 invoked by uid 500); 20 May 2010 08:56:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48357 invoked by uid 500); 20 May 2010 08:56:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48349 invoked by uid 99); 20 May 2010 08:56:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 May 2010 08:56:46 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of polattechnology@gmail.com designates 72.14.220.158 as permitted sender)
Received: from [72.14.220.158] (HELO fg-out-1718.google.com) (72.14.220.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 May 2010 08:56:40 +0000
Received: by fg-out-1718.google.com with SMTP id 22so400197fge.5
        for <java-user@lucene.apache.org>; Thu, 20 May 2010 01:56:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=PCnrWS7L2hhsDPFXbb+49pxQhBGMfBd3w3ufh5sEpp0=;
        b=eMijRkemFG+znYvuewmnrZCbylVFZeWMT3A+rPeGIFBhtXZn5+LCdZy7Aj3u2dDD1F
         B7BzKrhoStzyecRWNH9YVOFMN5+jQMHcvTjyB9WbuqB4sTs/kg/ugxH1DinVRxv71oim
         Tt2cwX8tAB6MjcuO49f+sXs8F/uHOusCA8cfg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=RNkJ9ecXp6u9d2Fh6Xijth5P7xMs//ji51EVSiuM1i8N+uWlOndxc5W4L/TkNyNfQz
         wCu2mjMDvI0Qt03bfDiUyAW2vf8wZK/3y2E3XR+aiGJ/NNkz1WEQsEycldM4J+JP3qwB
         j6KcRuVmNZkqaCHV00u/FN7vNhm86l4y66mgE=
MIME-Version: 1.0
Received: by 10.103.37.12 with SMTP id p12mr1463778muj.94.1274345778954; Thu, 
	20 May 2010 01:56:18 -0700 (PDT)
Received: by 10.204.55.212 with HTTP; Thu, 20 May 2010 01:56:18 -0700 (PDT)
In-Reply-To: <AANLkTik8y9kGxebYiGxgKQ1vlCL-z6xejep3VQ3VFKKf@mail.gmail.com>
References: <AANLkTikuKgt7hCbJE1r2UbIJ8lCOBAdccC6BAYdlEssC@mail.gmail.com>
	 <alpine.DEB.1.10.1005191122530.16403@radix.cryptio.net>
	 <AANLkTik8y9kGxebYiGxgKQ1vlCL-z6xejep3VQ3VFKKf@mail.gmail.com>
Date: Thu, 20 May 2010 11:56:18 +0300
Message-ID: <AANLkTinWq-g5cjQpLhPu7p4f5H_S7_oI5bC6F0ur8KwL@mail.gmail.com>
Subject: Re: Desing Question related with Lucene
From: ilkay polat <polattechnology@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e659f44479c068048702bf2a

--0016e659f44479c068048702bf2a
Content-Type: text/plain; charset=UTF-8

Is it better to analyze logs with lucene ? Or other solutions are better for
performance....

On Thu, May 20, 2010 at 9:51 AM, ilkay polat <polattechnology@gmail.com>wrote:

> Hello;
>
>   I have a desing question while developing my project. If you have time,
>   lease read my problem and if you have a solution please make me informed.
>
>   Project : Our system produce a txt file for every one hour(13 pm 14 pm
> e.g.
> ). (These files contain logs from network e.g. TCP logs). I use FreeBSD and
>   cron. For every hour, after five minutes later(13:05 pm , 14:05 pm e.g.),
>   there is a process which indexes this txt file with lucene indexing.
>  Then I
>   have an web app which search some textual search with this produced
> indexed
>   file(lucene produce obviously).
>
>   Problem: Our customers wants to know which client is using internet most,
>   which site is used most and like this things which are done with sql like
>   that as you know
>
>   select site, count(site) from log_table
>   group by site
>
>   Mhy solution is: A second process which insert logs to table (temporary
>   table ) and aftr inserting do some quesries on this temporarty table and
> get
>  results to main statistics tablse which has tables as which site is most
>   visited table . This temporary table updates related statistics table .
>
>
>   I have need a recommendation about the problem? Is there any solution on
>   lucene(get most ranked kind query searching is exist or not and if yes is
> it
>  good for performance)
>   If there is no a solution in lucene what will you use for this situation?
> : Thanks for your help.
>
>
> : ilkay POLAT
>
> : Research &Development Software Engineer TURKEY
>



-- 
---
ilkay POLAT

Research &Development Software Engineer TURKEY

--0016e659f44479c068048702bf2a--

From java-user-return-46191-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 20 08:59:59 2010
Return-Path: <java-user-return-46191-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34183 invoked from network); 20 May 2010 08:59:58 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 20 May 2010 08:59:58 -0000
Received: (qmail 51448 invoked by uid 500); 20 May 2010 08:59:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51378 invoked by uid 500); 20 May 2010 08:59:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51370 invoked by uid 99); 20 May 2010 08:59:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 May 2010 08:59:56 +0000
X-ASF-Spam-Status: No, hits=4.3 required=10.0
	tests=AWL,FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of manjula53@gmail.com designates 209.85.222.187 as permitted sender)
Received: from [209.85.222.187] (HELO mail-pz0-f187.google.com) (209.85.222.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 May 2010 08:59:50 +0000
Received: by pzk17 with SMTP id 17so3961094pzk.5
        for <java-user@lucene.apache.org>; Thu, 20 May 2010 01:59:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=AIWYVVUdMi//yuzSt3f+kLjciFfGoKRcYRPGS/LJUPQ=;
        b=s50c4wHrBZLq5TgsZ4kgBDUkIdVEtdENz871vixyv88bpbmcoKOonr7U7mzVqLk8Df
         VgV/3rJcRS9Tb2v6peIygu4/78bMPtdiP55bnozRE7APafdwMS6jwTNnCJ0mvsC/TN/D
         DGXs3RUQsfH4xoeMeOEqcSOVweNSPB1kTgb9g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=szDsx0CYvey2aYu6XRrqqErc2jRXDR2oNi0kVey8/NJd9aNniW3mQlI0mfQaA+iihi
         A69jWnAWutQG+f5H1zFlxSNvg7stHSCPiZfadas2/5b1WbjJegj06rJidMEYZz1+MGhK
         +aEC3wr2WGdXKOPxDgM/4Anulm6bbTdY68lm0=
MIME-Version: 1.0
Received: by 10.140.55.17 with SMTP id d17mr7214547rva.209.1274345969790; Thu, 
	20 May 2010 01:59:29 -0700 (PDT)
Received: by 10.140.147.1 with HTTP; Thu, 20 May 2010 01:59:29 -0700 (PDT)
In-Reply-To: <C43520E5-AD80-45D2-8301-2958839829BC@apache.org>
References: <AANLkTinUbMIXeupct6ss6yHZliEw41h3_8eeeNVMWJ2e@mail.gmail.com>
	 <AANLkTimdaBW7WikTtLIB7noDGFrkjoMWRLpBHnR-YOnh@mail.gmail.com>
	 <C43520E5-AD80-45D2-8301-2958839829BC@apache.org>
Date: Thu, 20 May 2010 14:29:29 +0530
Message-ID: <AANLkTikfVQA5CIb6tauP-xIXwqI8Asw5Yk8TxZucKbZl@mail.gmail.com>
Subject: Re: Problem of getTermFrequencies()
From: manjula wijewickrema <manjula53@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016369206ffd9ae61048702ca75

--0016369206ffd9ae61048702ca75
Content-Type: text/plain; charset=ISO-8859-1

Thanx

On Mon, May 17, 2010 at 10:19 PM, Grant Ingersoll <gsingers@apache.org>wrote:

> Note, depending on your downstream use, you may consider using a
> TermVectorMapper that allows you to construct your own data structures as
> needed.
>
> -Grant
>
> On May 17, 2010, at 3:16 PM, Ian Lea wrote:
>
> > terms and freqs are arrays.  Try terms[i] and freqs[i].
> >
> >
> > --
> > Ian.
> >
> >
> > On Mon, May 17, 2010 at 12:23 PM, manjula wijewickrema
> > <manjula53@gmail.com> wrote:
> >> Hi,
> >>
> >> I wrote a code with a view to display the indexed terms and get their
> term
> >> frequencies of a single document. Although it displys those terms in the
> >> index, it does not give the term frequencies. Instead it displays '
> frequencies
> >> are:[I@80fa6f '. What's the reason for this. The code I have written
> and the
> >> display, can be given as follows.
> >>
> >> Code:
> >>
> >>  *
> >>
> >> import* org.apache.lucene.analysis.standard.StandardAnalyzer;
> >> *
> >>
> >> import* org.apache.lucene.document.Document;
> >> *
> >>
> >> import* org.apache.lucene.document.Field;
> >> *
> >>
> >> import* org.apache.lucene.index.IndexWriter;
> >> *
> >>
> >> import* org.apache.lucene.index.IndexReader;
> >> *
> >>
> >> import* org.apache.lucene.queryParser.ParseException;
> >> *
> >>
> >> import* org.apache.lucene.queryParser.QueryParser;
> >> *
> >>
> >> import* org.apache.lucene.search.*;
> >> *
> >>
> >> import* org.apache.lucene.store.Directory;
> >> *
> >>
> >> import* org.apache.lucene.store.RAMDirectory;
> >> *
> >>
> >> import* org.apache.lucene.util.Version;
> >> *
> >>
> >> import* org.apache.lucene.index.TermFreqVector;
> >>
> >> *
> >>
> >> import* java.io.BufferedReader;
> >> *
> >>
> >> import* java.io.FileReader;
> >> *
> >>
> >> import* java.io.IOException;
> >> *
> >>
> >> import* org.apache.lucene.analysis.StopAnalyzer;
> >> *
> >>
> >> import* org.apache.lucene.analysis.snowball.SnowballAnalyzer;
> >>
> >>
> >> *
> >>
> >> public* *class* Testing{
> >>
> >> *
> >>
> >> public* *static* *void* main(String[] args) *throws* IOException,
> >> ParseException {
> >>
> >> //StandardAnalyzer analyzer = new
> StandardAnalyzer(Version.LUCENE_CURRENT);
> >>
> >> SnowballAnalyzer analyzer = *new* SnowballAnalyzer("English",
> StopAnalyzer.
> >> ENGLISH_STOP_WORDS);
> >>
> >> *try*{
> >>
> >> Directory directory=*new* RAMDirectory();
> >>
> >> IndexWriter w = *new* IndexWriter(directory, analyzer, *true*,
> >>
> >> IndexWriter.MaxFieldLength.*UNLIMITED*);
> >>
> >> Document doc = *new* Document();
> >>
> >> String text="This is a sample codes code for testing lucene's
> capabilities
> >> over lucene term frequencies";
> >>
> >> doc.add(*new* Field("title", text, Field.Store.*YES*,
> Field.Index.*ANALYZED*
> >> ,Field.TermVector.*YES*));
> >>
> >> w.addDocument(doc);
> >>
> >> w.close();
> >>
> >> IndexReader ir=IndexReader.open(directory);
> >>
> >> TermFreqVector[] tfv=ir.getTermFreqVectors(0);
> >>
> >> // for (int xy = 0; xy < tfv.length; xy++) {
> >>
> >> String[] terms = tfv[0].getTerms();
> >>
> >> *int*[] freqs=tfv[0].getTermFrequencies();
> >>
> >> //System.out.println("terms are:"+tfv[xy]);
> >>
> >> //System.out.println("length is:"+terms.length);
> >>
> >> System.*out*.println("array terms are:"+tfv[0]);
> >>
> >> System.*out*.println("terms are:"+terms);
> >>
> >> System.*out*.println("frequencies are:"+freqs);
> >>
> >> // }
> >>
> >>  }*catch*(Exception ex){
> >>
> >> ex.printStackTrace();
> >>
> >> }
> >>
> >> }
> >>
> >> }
> >>
> >>
> >>
> >> Display:
> >>
> >> array terms are:{title: capabl/1, code/2, frequenc/1, lucen/2, over/1,
> >> sampl/1, term/1, test/1}
> >>
> >> terms are:[Ljava.lang.String;@1e13d52
> >>
> >> frequencies are:[I@80fa6f
> >>
> >>
> >>
> >> If some body can pls. help me to get the desired output.
> >>
> >> Thanx,
> >>
> >> Manjula.
> >>
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016369206ffd9ae61048702ca75--

From java-user-return-46192-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 20 09:15:55 2010
Return-Path: <java-user-return-46192-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38370 invoked from network); 20 May 2010 09:15:55 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 20 May 2010 09:15:55 -0000
Received: (qmail 69113 invoked by uid 500); 20 May 2010 09:15:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69025 invoked by uid 500); 20 May 2010 09:15:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69017 invoked by uid 99); 20 May 2010 09:15:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 May 2010 09:15:52 +0000
X-ASF-Spam-Status: No, hits=4.4 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of manjula53@gmail.com designates 74.125.83.176 as permitted sender)
Received: from [74.125.83.176] (HELO mail-pv0-f176.google.com) (74.125.83.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 May 2010 09:15:44 +0000
Received: by pvg7 with SMTP id 7so894320pvg.35
        for <java-user@lucene.apache.org>; Thu, 20 May 2010 02:15:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=v4bbZNRIVA7sPx7j+xSual5/C8yzEKkYpvdKmlYlO/I=;
        b=PgWMHSD9omd/kUfMjPrwzZcUo3d72zUy6YnxWL6dfm4eUxvzmxaq4yTxwfZ5sy2+M5
         SZ++pxXTNQqCcR5TKtzZyCwuowZDwMMKYoSL67e4pYYvDeWn1FZ0TzuutDCAfC6Ew4lH
         3XiUQBnF2qgzTN21eB3ugtwU97vRWnAx9KEeI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=Bb9cncz3sXWwzGOhmd8YQ1wKAUozPhtT4LkxKMbzGWadk3GnmorqQnCUku4ZuiD4l4
         94yytp6++HC+0TXxsiDz9rLropmpf8xZ1MsrlDU373n9Wklt8kWZRmn62jLEXNCt+6b/
         SbS0eqIBvGEckRvlfI6GcMo+5nxwT/Fegn3xg=
MIME-Version: 1.0
Received: by 10.141.105.19 with SMTP id h19mr7164642rvm.281.1274346923588; 
	Thu, 20 May 2010 02:15:23 -0700 (PDT)
Received: by 10.140.147.1 with HTTP; Thu, 20 May 2010 02:15:23 -0700 (PDT)
Date: Thu, 20 May 2010 14:45:23 +0530
Message-ID: <AANLkTil2JbQWZUw66CdELHF6AvxWuL2J_8NY0FIj1V-0@mail.gmail.com>
Subject: Arrange terms[i]
From: manjula wijewickrema <manjula53@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd13beeb37d7d0487030374
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd13beeb37d7d0487030374
Content-Type: text/plain; charset=ISO-8859-1

Hi,

I wrote aprogram to get the ferquencies and terms of an indexed document.
The output comes as follows;


If I print : +tfv[0]

Output:

array terms are:{title: capabl/1, code/2, frequenc/1, lucen/4, over/1,
sampl/1, term/4, test/1}

In the same way I can print terms[i] and freqs[i], but the problem is while
I am printing terms[i], output (array elements) comes according to the
English alphabetic order (as above) and freqs[i] also arrange according that
particular order. Is there a way to arrange terms[i] according to the
ascending/descending order of their frequencies?

Thanx in advance.

Manjula

--000e0cd13beeb37d7d0487030374--

From java-user-return-46193-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 20 09:31:25 2010
Return-Path: <java-user-return-46193-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42066 invoked from network); 20 May 2010 09:31:24 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 20 May 2010 09:31:24 -0000
Received: (qmail 86954 invoked by uid 500); 20 May 2010 09:31:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86924 invoked by uid 500); 20 May 2010 09:31:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86916 invoked by uid 99); 20 May 2010 09:31:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 May 2010 09:31:22 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [213.52.246.188] (HELO mail.diosphere.com) (213.52.246.188)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 20 May 2010 09:31:14 +0000
Received: from [213.52.246.150] (213.52.246.150) by mail.diosphere.com
 (213.52.246.188) with Microsoft SMTP Server id 8.1.240.5; Thu, 20 May 2010
 10:24:40 +0100
Message-ID: <4BF50147.9090100@diosphere.com>
Date: Thu, 20 May 2010 10:30:47 +0100
From: Dragan Jotanovic <dragan.jotanovic@diosphere.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.1.9) Gecko/20100317 Lightning/1.0b1 Thunderbird/3.0.4
MIME-Version: 1.0
To: <java-user@lucene.apache.org>
Subject: Re: How to achive this kind of document ordering
References: <4BF2B9DE.2090108@diosphere.com> <4BF44FD9.3050009@fotofinder.net>
In-Reply-To: <4BF44FD9.3050009@fotofinder.net>
Content-Type: text/plain; charset="ISO-8859-1"; format=flowed
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Frank,
the idea of preparing set of structured lists is what I initially=20
thought I will have to do, but I'm afraid there will be serious=20
performance penalty, because I would have to traverse the documents=20
until I find all distinct values of SortFieldB. But I guess there is no=20
other way.
Could you point me to the source code of oal.search.TopFieldCollector so=20
I could take a look?

Dragan


On 5/19/2010 9:53 PM, Frank Wesemann wrote:
> Hi Dragan,
>   =20
>>
>> First, all results are ordered by SortFieldA in ascending order. Than
>> by SortFieldB so that all documents with the same SortFieldA value are
>> ordered in "levels" structure. Each level consists of documents with
>> distinct SortFieldB values.
>> So, the requirenment is to show documents from first level first, than
>> second level, and so on.
>> It will not be possible to order documents while indexing, so I will
>> need search time ordering.
>> Is this achievable with lucene? What would be the best approach to
>> solve this without huge performance impact on multimillion documents
>> index?
>>     =20
> You might want to have a look at oal.search.TopFieldCollector and the
> accompanied Comparator Classes
> For a similar approach ( I had to sort by the quantity on a certain
> Field ) I borrowed a lot of the idea of these classes.
>   From the basic principles therein I derived DocumentComparators, which
> compare not only FieldValues but whole documents.
> The outcome is not one sorted list, but a structure of lists which I
> combine in nested
> while( list<SortFieldA>.hasNext() ) {
>      overallResult.add ( listOfSortFieldA.get( listOfSortFieldB).next() )
> }
> loops.
>
> Performance is ofcourse affected by numbers of documents you want to retu=
rn.
>
> --
> mit freundlichem Gru=DF,
>
> Frank Wesemann
> Fotofinder GmbH         USt-IdNr. DE812854514
> Software Entwicklung    Web: http://www.fotofinder.com/
> Potsdamer Str. 96       Tel: +49 30 25 79 28 90
> 10785 Berlin            Fax: +49 30 25 79 28 999
>
> Sitz: Berlin
> Amtsgericht Berlin Charlottenburg (HRB 73099)
> Gesch=E4ftsf=FChrer: Ali Paczensky
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   =20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46194-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 20 20:17:18 2010
Return-Path: <java-user-return-46194-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35077 invoked from network); 20 May 2010 20:17:18 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 20 May 2010 20:17:18 -0000
Received: (qmail 45828 invoked by uid 500); 20 May 2010 20:17:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45660 invoked by uid 500); 20 May 2010 20:17:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45652 invoked by uid 99); 20 May 2010 20:17:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 May 2010 20:17:15 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [98.136.167.4] (HELO web113304.mail.gq1.yahoo.com) (98.136.167.4)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 20 May 2010 20:17:06 +0000
Received: (qmail 47980 invoked by uid 60001); 20 May 2010 20:16:44 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1274386604; bh=7OJw4bI8p+P8HGm6LeeOgRk9zOZ6rhi8yvifLuifbmo=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=VbhDLA1SveH2t81ZpeMbwQ5dQ6PZ56rhNzhFYpEkG0XUMmEbAYyREjF24wNUs3OhgbiCmti2gtvPs4G+XL0wHGpZ8R1c7fbM6Pk62VvP0SNaIO/REoh+n8/zSYwMNICpnAv9mk69uejcXWzmaRqK2KTbkf8a+6DChJXtpEjXchM=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=jM9yWATqYc921MsyLVWZeUoPDR3aO3WU5KW31FmJPkX1HkCQaaX2F2R/1/fi6pSdzJmzLSAvZEpkUj37GgZ/Yw+GV/2UnbQ3G4xNLT+JsmD0ePPbyH3MypJdgRQdHdlQNL1Nc5xgy89uQSXThtKO6m4MEFUowJ43m8qHzageX04=;
Message-ID: <212353.47457.qm@web113304.mail.gq1.yahoo.com>
X-YMail-OSG: GpcVzioVM1nJPDSxeBGNM8wiVscNpkrT3TVw7rXqtkegYgK
 9NuBgaNaghUhMuzQXDqL0PMfgQKud.y6cjJDykPvoCKJuA9BTGXd88iEW4zU
 MoJ7TftpLgPSuuSdKyNP6xRyc7PwzrHvCjBg7HaNhcycLq_0394pSBmQ0oFZ
 0w8g3sjgnUpiBNVg.lkDxy7ZN9gtmUTgNFSm2IkLFwoNflvebUNRbz8a34aJ
 PjPgPQg8QQrz5OonfSm_EcZq2AVLmNOmGLXyrvilwt3EoQ3I2e2S3OYsouMs
 T6cj2PquaY.oJJxiCC3BVggYid4tAFjykj3JVoKw98gTCWfz0vB31Q4c-
Received: from [140.244.128.12] by web113304.mail.gq1.yahoo.com via HTTP; Thu, 20 May 2010 13:16:44 PDT
X-Mailer: YahooMailClassic/11.0.8 YahooMailWebService/0.8.103.269680
Date: Thu, 20 May 2010 13:16:44 -0700 (PDT)
From: Ivan Provalov <iprovalo@yahoo.com>
Subject: Stemming and Wildcard Queries
To: java-user@lucene.apache.org
In-Reply-To: <t2k698f0de11005050940l89b78a54jaf701fa7ae182f8f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org

Is there a good way to combine the wildcard queries and stemming?  

As is, the field which is stemmed at index time, won't work with some wildcard queries.

We were thinking to create two separate index fields - one stemmed, one non-stemmed, but we are having issues with our SpanNear queries (they require the same field).  

We thought to try combining the stemmed and non-stemmed terms in the same field, but we are concerned about the stats being skewed as a result of this (especially for the TermVector stats).  Can overloading the non-stemmed field with stemmed terms cause any issues with the TermVector?

Any suggestions?

Ivan Provalov


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46195-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 20 20:22:34 2010
Return-Path: <java-user-return-46195-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35930 invoked from network); 20 May 2010 20:22:33 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 20 May 2010 20:22:33 -0000
Received: (qmail 56765 invoked by uid 500); 20 May 2010 20:22:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56600 invoked by uid 500); 20 May 2010 20:22:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56591 invoked by uid 99); 20 May 2010 20:22:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 May 2010 20:22:31 +0000
X-ASF-Spam-Status: No, hits=-0.2 required=10.0
	tests=AWL,FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.49.13] (HELO web52903.mail.re2.yahoo.com) (206.190.49.13)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 20 May 2010 20:22:24 +0000
Received: (qmail 97198 invoked by uid 60001); 20 May 2010 20:22:02 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1274386922; bh=ZoLKoJ8rdk4Jf0UskWf6dG27gxmdggO4DArfYCE2Dyc=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=EoDofP2RLlXx41eiHDmxw/fsuojtKRrPUDjLgg+mp84w07bAwCg2+HUzO9mO6ZsRASfZ5lK3JUtzvrRkIBzetbP2zsEOB10Y+XKN/EzBgayLx/XBhWGRMg34h+cHg81zb2+z4E9mbWbVhLPGKPfFoQmzLgmCVNmZDCyhuUWem3I=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=uNF0Pva0+E6k4dPVC2UoWzDS5Nlc3jmUWurz8cndNg9y5s7tTDPCJPwJzV1oJvXzUzLF64+jjolmkE9DzRAP5y5iyQ5OSW01xGfafFGClkcva8QM1c/1533x1NDl6ve9TEnZcxI7j7jsBnFNkfpoNcL0lJ6aaT6kgw8rempu0Wc=;
Message-ID: <738736.96454.qm@web52903.mail.re2.yahoo.com>
X-YMail-OSG: LJFy2pkVM1mN7FTWikbyTNeNWCrmuWHFDZ2hX7DowFkLFuN
 DYGVNcRGrj_pSQSyaOQ3KTTYNs0wH6IMYAdUucsqY704nF0vAwgWYTs6cnzK
 S6pQh0L3hfBblX62dikwOfjY8yFSxG5zDU8by5J4KfICmx0g9Dyw95A8ioYp
 Ontw.uB2DGt5EiK.2ZazqxJ2IVY7CQOaKfWCiQy7YcoUoQl_I3aGdO9EyfUE
 6Gaea81UhErnF_QyHJQUaRZvS78Q9J8sEnXmNzGU2JjYowtsb6bzzMbHVfM3
 b5n63GvzDKywz4b441REA9f7IdSTT3Qdec6dduXdf3HC9Mufa14t5
Received: from [95.15.158.14] by web52903.mail.re2.yahoo.com via HTTP; Thu, 20 May 2010 13:22:02 PDT
X-Mailer: YahooMailClassic/11.0.8 YahooMailWebService/0.8.103.269680
Date: Thu, 20 May 2010 13:22:02 -0700 (PDT)
From: Ahmet Arslan <iorixxx@yahoo.com>
Subject: Re: Stemming and Wildcard Queries
To: java-user@lucene.apache.org
In-Reply-To: <212353.47457.qm@web113304.mail.gq1.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

=0A> Is there a good way to combine the=0A> wildcard queries and stemming?=
=A0 =0A> =0A> As is, the field which is stemmed at index time, won't work=
=0A> with some wildcard queries.=0A=0Aorg.apache.lucene.queryParser.analyzi=
ng.AnalyzingQueryParser may help?=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46196-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 20 20:48:33 2010
Return-Path: <java-user-return-46196-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43902 invoked from network); 20 May 2010 20:48:33 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 20 May 2010 20:48:33 -0000
Received: (qmail 85209 invoked by uid 500); 20 May 2010 20:48:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85173 invoked by uid 500); 20 May 2010 20:48:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85164 invoked by uid 99); 20 May 2010 20:48:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 May 2010 20:48:31 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_HELO_PASS,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.208.4.195] (HELO mout.perfora.net) (74.208.4.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 May 2010 20:48:22 +0000
Received: from Rissos (cpe-75-84-68-253.socal.res.rr.com [75.84.68.253])
	by mrelay.perfora.net (node=mrus4) with ESMTP (Nemesis)
	id 0MdKMF-1Nxwce15Xv-00IPz1; Thu, 20 May 2010 16:48:00 -0400
Message-ID: <DBB93B72D5294D6FA29E665F1DF3D8E4@Rissos>
From: "Herbert Roitblat" <herb@orcatec.com>
To: <java-user@lucene.apache.org>
References: <212353.47457.qm@web113304.mail.gq1.yahoo.com>
Subject: Re: Stemming and Wildcard Queries
Date: Thu, 20 May 2010 13:48:05 -0700
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.5931
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5931
X-Provags-ID: V01U2FsdGVkX1/EG6itKDnHXWQGDbph9pJvt92NlzZVBVYfsW6
 pjX/nwlyoGUaTvBMU7PGq1jojKcqM6cg8bnbKXcZDw4W0bvSon
 JNgHXEhKuyQZWzMBMbRlw==
X-Virus-Checked: Checked by ClamAV on apache.org

At a general level, we have found that stemming during indexing is not 
advisable.  Sometimes users want the exact form and if you have removed the 
exact form during indexing, obviously, you cannot provide that.  Rather, we 
have found that stemming during search is more useful, or maybe it should be 
called anti-stemming.  For any given input for which the user wants to stem, 
we could derive the variations during the query processing.  E.g., plan can 
be expanded to include plans, planning, planned, etc.

In our application we provide a feature that is sometimes called a word 
wheel.  When someone enters plan in this tool, we show all of the words in 
the index that start with plan. Here are some of the related words:
plan
plane
planes
planet
planificaci
planned
plannedoutages.xls
planner
planners

Just a thought.
Herb

----- Original Message ----- 
From: "Ivan Provalov" <iprovalo@yahoo.com>
To: <java-user@lucene.apache.org>
Sent: Thursday, May 20, 2010 1:16 PM
Subject: Stemming and Wildcard Queries


> Is there a good way to combine the wildcard queries and stemming?
>
> As is, the field which is stemmed at index time, won't work with some 
> wildcard queries.
>
> We were thinking to create two separate index fields - one stemmed, one 
> non-stemmed, but we are having issues with our SpanNear queries (they 
> require the same field).
>
> We thought to try combining the stemmed and non-stemmed terms in the same 
> field, but we are concerned about the stats being skewed as a result of 
> this (especially for the TermVector stats).  Can overloading the 
> non-stemmed field with stemmed terms cause any issues with the TermVector?
>
> Any suggestions?
>
> Ivan Provalov
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46197-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 21 11:31:14 2010
Return-Path: <java-user-return-46197-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9581 invoked from network); 21 May 2010 11:31:14 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 21 May 2010 11:31:14 -0000
Received: (qmail 32888 invoked by uid 500); 21 May 2010 11:31:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32638 invoked by uid 500); 21 May 2010 11:31:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32629 invoked by uid 99); 21 May 2010 11:31:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 May 2010 11:31:07 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dcampoy@salir.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 May 2010 11:31:00 +0000
Received: by wwb18 with SMTP id 18so413312wwb.35
        for <java-user@lucene.apache.org>; Fri, 21 May 2010 04:30:39 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.157.80 with SMTP id a16mr1214817wbx.185.1274441439596; 
	Fri, 21 May 2010 04:30:39 -0700 (PDT)
Received: by 10.216.2.149 with HTTP; Fri, 21 May 2010 04:30:39 -0700 (PDT)
Date: Fri, 21 May 2010 13:30:39 +0200
Message-ID: <AANLkTilhtwP5vUxuSYUCSnZZBKxTYY0TRYv1PGhm99pq@mail.gmail.com>
Subject: Highlighter in lucene doesn't return any fragment
From: Diego Campoy <dcampoy@salir.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e655023e4b574a0487190563
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e655023e4b574a0487190563
Content-Type: text/plain; charset=ISO-8859-1

I'm trying to implement highlighting in my lucene application and I can't
get any fragment. getBestFragment always returns null.

My code:

    QueryParser parser = new QueryParser(Version.LUCENE_30, "text",
myAnalyzer);
    Query realQuery = parser.parse(query);

    Highlighter highlighter = new Highlighter(new QueryScorer(realQuery,
"text"));
    for (ScoreDoc scoredoc : luceneTopDocs.scoreDocs ) {
        Document doc = null;
        doc = searcher.doc(scoredoc.doc);
        String bestFragment = highlighter.getBestFragment(myAnalyzer,
"text", doc.get("text"));
        if (bestFragment != null) doSomething();
    }

Thank you,
Diego

--0016e655023e4b574a0487190563--

From java-user-return-46198-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 21 13:04:54 2010
Return-Path: <java-user-return-46198-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38281 invoked from network); 21 May 2010 13:04:54 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 21 May 2010 13:04:54 -0000
Received: (qmail 62887 invoked by uid 500); 21 May 2010 13:04:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62834 invoked by uid 500); 21 May 2010 13:04:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62826 invoked by uid 99); 21 May 2010 13:04:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 May 2010 13:04:50 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [98.136.167.5] (HELO web113305.mail.gq1.yahoo.com) (98.136.167.5)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 21 May 2010 13:04:42 +0000
Received: (qmail 17048 invoked by uid 60001); 21 May 2010 13:04:20 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1274447059; bh=RncYJr6Xc4PJTvIFmZ6xbHRadDtGVPqfANFFGb86FC0=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=Pg4ISdpd4qAV5jXYRy/x2W9x8su0bjE+ZqMXnhEWw9E3W7+6Hz1GVrFUUfLYHeloBSuhuudhJeb3oVeRJ/swnUTiiZqbbNy7u2ygggH8j6TROfhSMvq+3mVy30pzDd0zVpep0hRshhSHLSplUv6H645LgDEXv6jEtVPhtCPN8hg=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=Rk231IeuVQzSncath+8mYklTxQNfaZH9gpWn5KIrM3LrTb76CEHaDFCYRnUQuZZGiAwmztWKb6lqDnPEvni6t5GDFKC0jV6RwVEaUPFdcw3YBLiUJQ5R6vFsjNBw6cZB/2Qyf2zItcsop4TvinrMtBi+lvTyorlp/RPVmdmgTVE=;
Message-ID: <924678.15937.qm@web113305.mail.gq1.yahoo.com>
X-YMail-OSG: q_v9NV4VM1m2nR2ua4O21ZbnF8xlQzO65ET5jKGUvsPp7eN
 Tx8enc9MeTmloMbZuO6jtEu2DnNbbgzcsFwJZHiBVV1Qoe8HkPJTmiVULKFX
 uo.74oj5u5qWgjO2Y1ucju362rTuYHsssa_qF7L8lfPMKlutf1Nyv36xy.vr
 KKT497ScgUuEYB6oGrw255GV5_892KMpAG0LYOePLVr8_XpgfJCx9DaytsA3
 FFVrm1VNJiKRD6vhVpkLgrPqNwoDWwb8gr80Yots.ljxsjlqnNxRugu46xmo
 SPIEcjza3IePpOSbPBckyduo644IFjEALnMW3IKeDCGg63JcZUQnoAZSVS1h
 FNm5NOMHmVjMFq.5PUTOFo8uCZsA-
Received: from [99.150.141.64] by web113305.mail.gq1.yahoo.com via HTTP; Fri, 21 May 2010 06:04:19 PDT
X-Mailer: YahooMailClassic/11.0.8 YahooMailWebService/0.8.103.269680
Date: Fri, 21 May 2010 06:04:19 -0700 (PDT)
From: Ivan Provalov <iprovalo@yahoo.com>
Subject: Re: Stemming and Wildcard Queries
To: java-user@lucene.apache.org
In-Reply-To: <DBB93B72D5294D6FA29E665F1DF3D8E4@Rissos>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks, everyone!=0A=0A--- On Thu, 5/20/10, Herbert Roitblat <herb@orcatec.=
com> wrote:=0A=0A> From: Herbert Roitblat <herb@orcatec.com>=0A> Subject: R=
e: Stemming and Wildcard Queries=0A> To: java-user@lucene.apache.org=0A> Da=
te: Thursday, May 20, 2010, 4:48 PM=0A> At a general level, we have found=
=0A> that stemming during indexing is not advisable.=A0=0A> Sometimes users=
 want the exact form and if you have removed=0A> the exact form during inde=
xing, obviously, you cannot=0A> provide that.=A0 Rather, we have found that=
 stemming=0A> during search is more useful, or maybe it should be called=0A=
> anti-stemming.=A0 For any given input for which the user=0A> wants to ste=
m, we could derive the variations during the=0A> query processing.=A0 E.g.,=
 plan can be expanded to=0A> include plans, planning, planned, etc.=0A> =0A=
> In our application we provide a feature that is sometimes=0A> called a wo=
rd wheel.=A0 When someone enters plan in this=0A> tool, we show all of the =
words in the index that start with=0A> plan. Here are some of the related w=
ords:=0A> plan=0A> plane=0A> planes=0A> planet=0A> planificaci=0A> planned=
=0A> plannedoutages.xls=0A> planner=0A> planners=0A> =0A> Just a thought.=
=0A> Herb=0A> =0A> ----- Original Message ----- From: "Ivan Provalov" <ipro=
valo@yahoo.com>=0A> To: <java-user@lucene.apache.org>=0A> Sent: Thursday, M=
ay 20, 2010 1:16 PM=0A> Subject: Stemming and Wildcard Queries=0A> =0A> =0A=
> > Is there a good way to combine the wildcard queries=0A> and stemming?=
=0A> > =0A> > As is, the field which is stemmed at index time, won't=0A> wo=
rk with some wildcard queries.=0A> > =0A> > We were thinking to create two =
separate index fields -=0A> one stemmed, one non-stemmed, but we are having=
 issues with=0A> our SpanNear queries (they require the same field).=0A> > =
=0A> > We thought to try combining the stemmed and=0A> non-stemmed terms in=
 the same field, but we are concerned=0A> about the stats being skewed as a=
 result of this (especially=0A> for the TermVector stats).=A0 Can overloadi=
ng the=0A> non-stemmed field with stemmed terms cause any issues with=0A> t=
he TermVector?=0A> > =0A> > Any suggestions?=0A> > =0A> > Ivan Provalov=0A>=
 > =0A> > =0A> > =0A> > =0A> >=0A> ----------------------------------------=
-----------------------------=0A> > To unsubscribe, e-mail: java-user-unsub=
scribe@lucene.apache.org=0A> > For additional commands, e-mail: java-user-h=
elp@lucene.apache.org=0A> > =0A> > =0A> =0A> =0A> -------------------------=
--------------------------------------------=0A> To unsubscribe, e-mail: ja=
va-user-unsubscribe@lucene.apache.org=0A> For additional commands, e-mail: =
java-user-help@lucene.apache.org=0A> =0A> =0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46199-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 21 13:19:23 2010
Return-Path: <java-user-return-46199-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45863 invoked from network); 21 May 2010 13:19:23 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 21 May 2010 13:19:23 -0000
Received: (qmail 77964 invoked by uid 500); 21 May 2010 13:19:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77915 invoked by uid 500); 21 May 2010 13:19:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77906 invoked by uid 99); 21 May 2010 13:19:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 May 2010 13:19:21 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=AWL,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.211.194 as permitted sender)
Received: from [209.85.211.194] (HELO mail-yw0-f194.google.com) (209.85.211.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 May 2010 13:19:15 +0000
Received: by ywh32 with SMTP id 32so617783ywh.5
        for <java-user@lucene.apache.org>; Fri, 21 May 2010 06:18:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=RhdTpoa4oYCrj/ZyqQmlm1FFjurmMsdbn/WNwjXfNlM=;
        b=bC5k4HlsDr2P9v4EyK47Mo0jqGfxvtjRvhkSR3ghiSesgcZmJqyVAeChsoHM6S84Ue
         T4mh90zyTfLN7O6fH0VQQ3gDWInBQIn2GT6w+rhahY1qA3Ys4lQfupsRUahXSYzFB8Ma
         LTytXzv5YrQmUhJ3rIssbj6QoiSH1Z9HYN9a4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=uu9f0ep05pcUlsKKtlaJugThLl0wTSNrXzkNJoN4YwTG5T0/e/9DifSIyjYkbMdP+Q
         UoB74qSCcgJlOOeyXs/egfnRnQ/GcOd2oLz7E9qtMrEXgSIvGuDACw3fcZhwBawHrXsl
         Jtnwtn51x6pfYAEEZ+nsW/mpmKaL/+PhHFCKo=
MIME-Version: 1.0
Received: by 10.150.246.8 with SMTP id t8mr2554504ybh.97.1274447934807; Fri, 
	21 May 2010 06:18:54 -0700 (PDT)
Received: by 10.151.43.7 with HTTP; Fri, 21 May 2010 06:18:54 -0700 (PDT)
In-Reply-To: <DBB93B72D5294D6FA29E665F1DF3D8E4@Rissos>
References: <212353.47457.qm@web113304.mail.gq1.yahoo.com>
	 <DBB93B72D5294D6FA29E665F1DF3D8E4@Rissos>
Date: Fri, 21 May 2010 09:18:54 -0400
Message-ID: <AANLkTimzdUvlLL_EENmhGTF-cCHmJhcKIgI47udN33CX@mail.gmail.com>
Subject: Re: Stemming and Wildcard Queries
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd6afdc70608c04871a8831

--000e0cd6afdc70608c04871a8831
Content-Type: text/plain; charset=ISO-8859-1

Another approach to stemming at index time but still providing exact matches
when requested is to index the stemmed version AND the original version at
the same position (think synonyms). But here's the trick, index the original
token with a special character. For instance, indexing "running" would look
like indexing "run" and "running$". Now, whenever you want the exact match,
just add the "$" to the end of the token.

With this approach, you have to watch that your analyzers don't strip the
'$'...

Of course, each approach has its trade-offs, and the characteristics of your
particular problem may determine which is preferable...

FWIW
Erick

On Thu, May 20, 2010 at 4:48 PM, Herbert Roitblat <herb@orcatec.com> wrote:

> At a general level, we have found that stemming during indexing is not
> advisable.  Sometimes users want the exact form and if you have removed the
> exact form during indexing, obviously, you cannot provide that.  Rather, we
> have found that stemming during search is more useful, or maybe it should be
> called anti-stemming.  For any given input for which the user wants to stem,
> we could derive the variations during the query processing.  E.g., plan can
> be expanded to include plans, planning, planned, etc.
>
> In our application we provide a feature that is sometimes called a word
> wheel.  When someone enters plan in this tool, we show all of the words in
> the index that start with plan. Here are some of the related words:
> plan
> plane
> planes
> planet
> planificaci
> planned
> plannedoutages.xls
> planner
> planners
>
> Just a thought.
> Herb
>
> ----- Original Message ----- From: "Ivan Provalov" <iprovalo@yahoo.com>
> To: <java-user@lucene.apache.org>
> Sent: Thursday, May 20, 2010 1:16 PM
> Subject: Stemming and Wildcard Queries
>
>
>
>  Is there a good way to combine the wildcard queries and stemming?
>>
>> As is, the field which is stemmed at index time, won't work with some
>> wildcard queries.
>>
>> We were thinking to create two separate index fields - one stemmed, one
>> non-stemmed, but we are having issues with our SpanNear queries (they
>> require the same field).
>>
>> We thought to try combining the stemmed and non-stemmed terms in the same
>> field, but we are concerned about the stats being skewed as a result of this
>> (especially for the TermVector stats).  Can overloading the non-stemmed
>> field with stemmed terms cause any issues with the TermVector?
>>
>> Any suggestions?
>>
>> Ivan Provalov
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd6afdc70608c04871a8831--

From java-user-return-46200-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat May 22 06:45:38 2010
Return-Path: <java-user-return-46200-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55936 invoked from network); 22 May 2010 06:45:38 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 22 May 2010 06:45:38 -0000
Received: (qmail 70342 invoked by uid 500); 22 May 2010 06:45:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69996 invoked by uid 500); 22 May 2010 06:45:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69984 invoked by uid 99); 22 May 2010 06:45:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 May 2010 06:45:32 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jpa458@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 May 2010 06:45:27 +0000
Received: by wwb18 with SMTP id 18so1088829wwb.35
        for <java-user@lucene.apache.org>; Fri, 21 May 2010 23:45:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=PWRf9xHS2+hwXAimzBCn7CjhCtYYUPsTqOXJE24XmsE=;
        b=bvd9vo3mqVmWO7uh+DnmmkwTEJCaRxpVXs+d2063jTidW77himUXHfPS0qAn/sy5tf
         qWhrNdOHmYUh2lDEGbhKnoLwpvlorZ6ff6A909LUAwvdxTmijzEFhNmywb8Lr/AX3KFl
         hY2R/lDsxpFfVRPj6/HV7eE9CLMo7cWbAbiS4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=U9N2Ae3jvtCU/3GCrkm5iXp1r9JdO6xnOjdSSvoH8U+5CvJB2bqICdRhQN9tzDbCeW
         dkXmiB9qK2UJIirUbxGDhavJ0sWsO66GuNk/v1OOHBO60ig95Yher7IOtdZAO0qbyYVw
         /jeS4iWOIuKZba+GbbIFYkJUI8SRFBuGYOOao=
MIME-Version: 1.0
Received: by 10.216.164.20 with SMTP id b20mr1491460wel.101.1274510706036; 
	Fri, 21 May 2010 23:45:06 -0700 (PDT)
Received: by 10.216.12.81 with HTTP; Fri, 21 May 2010 23:45:05 -0700 (PDT)
In-Reply-To: <4BE95917.6040007@knipp.de>
References: <4BE95917.6040007@knipp.de>
Date: Sat, 22 May 2010 08:45:05 +0200
Message-ID: <AANLkTilueHT2eafVmIOn7bDWNVS6LBF5pZuSsv4NILoj@mail.gmail.com>
Subject: Re: spatial searches
From: Julian Atkinson <jpa458@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

Hi Klaus,

I suggest you take a look at the code in TestCartesian.java for
working examples of the search and as a staring point to trace
through.

in more depth, if you look at DistanceQueryBuilder.java you'll see 2
filters are being setup.

The first pass filter is created by CartesianPolyFilterBuilder and
this makes sure you only consider documents near to the area you are
searching by looking in the right tier and pulling out the relevant
grid cells.

The second filter is dependent on which method you are using Lat/Lng
or Geohash - this is where the more precise filtering is done based on
the calculated distance.

The use of the second pass filter is optional and driven by a boolean.

If you want to custom score then there is an example in the
TestCartesian.class with CustomScoreQuery

Hope this helps,
Julian



On 11 May 2010 15:18, Klaus Malorny <Klaus.Malorny@knipp.de> wrote:
>
> Hi all,
>
> I hope someone can enlighten me. I am trying to figure out how spatial
> searches are to be implemented with Lucene. From walking through mailing
> lists and various web pages, looking at the JavaDoc and source code, I
> understand how the tiers work and how the search is limited by a special
> term query containing the ID(s) of the relevant grid cells.
>
> However, it still puzzles me how, where and when the final distance
> filtering takes place. I see three possibilities: the "Filter" class, the
> "ValueSourceQuery" or the use of a subclass of "Collector". With my limited
> understanding of the inner working of Lucene, it seems to me that the first
> two ways more or less operate on the whole document set, i.e. prior to the
> moment where the term query for the tiers comes into effect, rendering it
> useless. The "Collector" approach seems to be much more appropriate, but
> additionally to the decision whether the document meets the distance
> condition or not, I would like to have different scores depending on the
> distance (lower score for larger distances). Originally I thought that the
> solution would be some kind of subclass of "Query", but haven't seen any
> hints pointing in this direction and I don't know whether I am able to
> implement that on my own. I fear that I completely misunderstand something.
> Thanks in advance for any hints.
>
> Regards,
>
> Klaus
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46201-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun May 23 10:15:30 2010
Return-Path: <java-user-return-46201-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67659 invoked from network); 23 May 2010 10:15:30 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 May 2010 10:15:30 -0000
Received: (qmail 4393 invoked by uid 500); 23 May 2010 10:15:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3960 invoked by uid 500); 23 May 2010 10:15:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3342 invoked by uid 99); 23 May 2010 10:15:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 May 2010 10:15:22 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erik.hatcher@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 May 2010 10:15:15 +0000
Received: by vws10 with SMTP id 10so412794vws.35
        for <multiple recipients>; Sun, 23 May 2010 03:14:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :content-type:content-transfer-encoding:mime-version:subject:date
         :x-mailer;
        bh=uDpNxSZTDYCw30W8cq/zFrW5NtHrn1wDzzTjq5Mwv6w=;
        b=HkkpZBOKOKGvezl1RyLzBtejKzyMGeyUHZGQ2s3Uq1T+pJQ7yHSPrjGaiYCP/qeLD5
         LOaJw1H1wR/ZJDeRjWqBf9OeadeLGu/zexXvqHBhI53uFgZfHepPia/8WXCwPZ9MPH9d
         b5JgwNpJwy9IS310+7Op69VxQnSWeXn5TUBoc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:content-type:content-transfer-encoding
         :mime-version:subject:date:x-mailer;
        b=IHS7qAEkhTLxKq6+wa75AGxFa2N70TNv8eY60nDPKbWRDV2b+0E8RPRe4Tek2MdgXx
         CsfxPtK+M+TMSRvQMTDA2Mmty5xT+mUTyJ7BUDIespCW03tHazKMQmNQvhUUFYiPlJ42
         8pI/JtQXLhKACZBamVzkxAIOLo+ya1YfFSanY=
Received: by 10.220.123.7 with SMTP id n7mr2740778vcr.44.1274609693896;
        Sun, 23 May 2010 03:14:53 -0700 (PDT)
Received: from [10.0.1.69] (c-71-63-2-238.hsd1.va.comcast.net [71.63.2.238])
        by mx.google.com with ESMTPS id z22sm13546419vco.10.2010.05.23.03.14.52
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sun, 23 May 2010 03:14:52 -0700 (PDT)
Message-Id: <80346B0A-93B8-4468-9E3C-685BD03EBA32@gmail.com>
From: Erik Hatcher <erik.hatcher@gmail.com>
To: solr-user@lucene.apache.org,
 dev@lucene.apache.org,
 java-user@lucene.apache.org,
 general@lucene.apache.org
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v936)
Subject: Free Webinar: Implementing Solr open source search in a .NET and DBMS environment; Thurs 27 May 13:00 GMT (9a EDT) 
Date: Sun, 23 May 2010 06:14:50 -0400
X-Mailer: Apple Mail (2.936)
X-Virus-Checked: Checked by ClamAV on apache.org

I'd like to invite you to tune in to a great talk I saw at Apache  
Lucene Eurocon (www.lucene-eurocon.org) this past week in Prague by Bo  
Raun, of Nordjyske Medier. The talk was on how he discovered Solr and  
introduced it successfully in an IT environment whose strategy  
otherwise totally rests on Microsoft technologies (and other  
traditional commercial solutions, like Citrix, VMware, etc). Bo also  
discusses the contrast between a traditional relational database  
background and the different development outlook he needed, along with  
discoveries, surprises, and lessons learned, from which newcomers to  
Solr from commercial search and DBMS backgrounds might benefit.

Today Nordjyske Medier uses Solr for an editorial archive, and for an  
online yellow page directory, with new plans for Solr technologies in  
the near future to incorporate advanced search features like geosearch  
and Solr integration with an ontology engine.

If your timezone has to wake up too early in the day for this, you can  
always sign up now and view it at your convenience, as it'll be cached  
for playback

You can sign up here: http://bit.ly/bU0LKs
Implementing Solr open source search in a dot-net and DBMS environment;
Thurs 27 May 13:00 GMT (9a EDT)

Thanks, Erik
www.lucidimagination.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46202-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun May 23 14:04:04 2010
Return-Path: <java-user-return-46202-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12120 invoked from network); 23 May 2010 14:04:04 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 May 2010 14:04:04 -0000
Received: (qmail 89197 invoked by uid 500); 23 May 2010 14:04:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89145 invoked by uid 500); 23 May 2010 14:04:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89137 invoked by uid 99); 23 May 2010 14:04:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 May 2010 14:04:01 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of sreinst1@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 May 2010 14:03:53 +0000
Received: by wwb18 with SMTP id 18so1708137wwb.35
        for <java-user@lucene.apache.org>; Sun, 23 May 2010 07:03:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=8q8BuyXKqmBwAhsHf3VkZXkp+ygmFaStEivo0socONY=;
        b=Xi2CdPfdbysAMAr85C2lhpj0ypMclDDpKCUOjlTSELG7XmbIWIW890Zz7rynnvxiVL
         +S8ot6GijjckS09jkqaIS1QuZkDuSGUVVdVmaZ1oWBoJJLiPK0Ww9zVzcjmfc5HRR5tz
         NQRJ9bwqfL050EaM8G8VcuKpGs8tYOySOjMFc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=eM27zyrT7E2HXlIWLHWH54DKW7enOCzHrfjq35MzKNyYo2h2UtNDv/o6T8K8b6WI3G
         6unz2P+70uT/2HjGX9Oy0hwWKiYGXqW1e2rAsGbtyKbZfSfD4BhNcpu6IPD/Qo4mIAtO
         i7Dea39qHmsctuBMwlrV0hf7rAils+JGc3TF0=
MIME-Version: 1.0
Received: by 10.216.184.144 with SMTP id s16mr2501159wem.125.1274623412869; 
	Sun, 23 May 2010 07:03:32 -0700 (PDT)
Received: by 10.216.38.201 with HTTP; Sun, 23 May 2010 07:03:32 -0700 (PDT)
Date: Sun, 23 May 2010 17:03:32 +0300
Message-ID: <AANLkTiloi-B_8T-eVVo38bUWkd1NzfXR3YVfte39FI13@mail.gmail.com>
Subject: Searching for a strict prefix
From: Shlomy Reinstein <sreinst1@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I have a Lucene index that contains source code tags (a tag can be any
named source code element - function, class, variable). Each document
contains a field with the tag name and some additional information.
I'd like to be able to perform strict prefix queries. E.g. if I have a
tag named "updateChildren", I'd like to be able to write a query like
"updateC*" and get the list of tags that have this prefix
(updateChildren being one of them).

Is there a way to do this? Please suggest how I should store the field
for this purpose - which analyzer to use, whether to keep it stored,
etc.

Thanks,
Shlomy

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46203-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun May 23 16:11:18 2010
Return-Path: <java-user-return-46203-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44941 invoked from network); 23 May 2010 16:11:18 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 May 2010 16:11:18 -0000
Received: (qmail 50661 invoked by uid 500); 23 May 2010 16:11:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50581 invoked by uid 500); 23 May 2010 16:11:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50568 invoked by uid 99); 23 May 2010 16:11:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 May 2010 16:11:16 +0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=FREEMAIL_FROM,SPF_HELO_PASS,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 216.139.236.158 is neither permitted nor denied by domain of hota.aida@gmail.com)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 May 2010 16:11:11 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <hota.aida@gmail.com>)
	id 1OGDlK-0000Kp-VB
	for java-user@lucene.apache.org; Sun, 23 May 2010 09:10:50 -0700
Date: Sun, 23 May 2010 09:10:50 -0700 (PDT)
From: Xaida <hota.aida@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1274631050961-838028.post@n3.nabble.com>
Subject: Implementing Analyzer with Pling Stemmer
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


Hi guys!

for the purpose of my project professor has advised me I should use the
PlingStemmer to index the terms obtained from Lucene. 
http://www.mpi-inf.mpg.de/yago-naga/javatools/doc/javatools/parsers/PlingStemmer.html 

I see it is new approach and for sure I understand benefits of incorporating
it into my project, but building an Analyzer was bit far out of my view of
the project, (but what can we do now:)). So I am having problems wrapping my
head around how to incorporate the PlingStemmer to build a custom analyzer
:/  
If someone can help me with advices, links, or someone already had
experience with PlingStemmer, I would be very grateful, all help is very
very welcome!!!!!

Thanx!

-- 
View this message in context: http://lucene.472066.n3.nabble.com/Implementing-Analyzer-with-Pling-Stemmer-tp838028p838028.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46204-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun May 23 16:24:51 2010
Return-Path: <java-user-return-46204-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46285 invoked from network); 23 May 2010 16:24:51 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 May 2010 16:24:51 -0000
Received: (qmail 54049 invoked by uid 500); 23 May 2010 16:24:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54006 invoked by uid 500); 23 May 2010 16:24:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53998 invoked by uid 99); 23 May 2010 16:24:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 May 2010 16:24:49 +0000
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 May 2010 16:24:42 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id C418CD36004
	for <java-user@lucene.apache.org>; Sun, 23 May 2010 18:24:22 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id GvTUHxGq5BUB for <java-user@lucene.apache.org>;
	Sun, 23 May 2010 18:24:07 +0200 (CEST)
Received: from VEGA (unknown [82.113.121.143])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id CCCBFD36001
	for <java-user@lucene.apache.org>; Sun, 23 May 2010 18:24:03 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <1274631050961-838028.post@n3.nabble.com>
In-Reply-To: <1274631050961-838028.post@n3.nabble.com>
Subject: RE: Implementing Analyzer with Pling Stemmer
Date: Sun, 23 May 2010 18:24:39 +0200
Message-ID: <003c01cafa94$76106450$62312cf0$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQEe5IP2T2JILJHnSsUZefoJyjDCepO3XxFg
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

Just look at the source code of PorterStemFilter.java and its corresponding
Analyzer in Lucene Java. Simply copy the code and replace the calls to stem
a String by the ones from this class. Depending on if your code
takes/returns String or char[], you have to modify the code a little bit
according to TermAttribute's Javadocs.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Xaida [mailto:hota.aida@gmail.com]
> Sent: Sunday, May 23, 2010 6:11 PM
> To: java-user@lucene.apache.org
> Subject: Implementing Analyzer with Pling Stemmer
> 
> 
> Hi guys!
> 
> for the purpose of my project professor has advised me I should use the
> PlingStemmer to index the terms obtained from Lucene.
> http://www.mpi-inf.mpg.de/yago-
> naga/javatools/doc/javatools/parsers/PlingStemmer.html
> 
> I see it is new approach and for sure I understand benefits of
incorporating it
> into my project, but building an Analyzer was bit far out of my view of
the
> project, (but what can we do now:)). So I am having problems wrapping my
> head around how to incorporate the PlingStemmer to build a custom
> analyzer :/ If someone can help me with advices, links, or someone already
> had experience with PlingStemmer, I would be very grateful, all help is
very
> very welcome!!!!!
> 
> Thanx!
> 
> --
> View this message in context:
> http://lucene.472066.n3.nabble.com/Implementing-Analyzer-with-Pling-
> Stemmer-tp838028p838028.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46205-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 24 01:40:26 2010
Return-Path: <java-user-return-46205-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62210 invoked from network); 24 May 2010 01:40:26 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 24 May 2010 01:40:26 -0000
Received: (qmail 92947 invoked by uid 500); 24 May 2010 01:40:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92904 invoked by uid 500); 24 May 2010 01:40:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92896 invoked by uid 99); 24 May 2010 01:40:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 May 2010 01:40:24 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of luoleicn@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 May 2010 01:40:18 +0000
Received: by pwi9 with SMTP id 9so496247pwi.35
        for <java-user@lucene.apache.org>; Sun, 23 May 2010 18:39:58 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:from:date
         :message-id:subject:to:content-type;
        bh=izVzNVBPC8IHcvq7CpMgWxwI4p1194/hpVXFoMsDNfQ=;
        b=WnTtHIqBj0L+dwg1vgLtuwVYJGBy8iQkdmgL5VbN4HRjVwjlu9DvPe0d4EhAcj4TsO
         kHZP0x4zSGmdSi3IIvgs6D+dqGadY/k0SRfneRfrqsXnIIWFWST8JY2qzmmyHnLI5OvM
         hVTO2qiLlGyic+zOF0ODVghwkxR3Gkg6sc+Cg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=Aspachl3pvZ/kxXkX+a2/junS7/0AwHGZ0WHsndORjxxEIpAZ8El/jy3NK9taqVmci
         KWgRsMJpwl336Vi3Zx99JejsA5fe0EILLTVjdX7LE48tQFxli+7lQ56p3TJIS1RiaGAz
         ax7IEjgj/++0OABMBjQsanvxbi3slZx5sSX5k=
Received: by 10.142.201.15 with SMTP id y15mr3202682wff.247.1274665198124; 
	Sun, 23 May 2010 18:39:58 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.143.37.3 with HTTP; Sun, 23 May 2010 18:39:38 -0700 (PDT)
From: =?UTF-8?B?572X56OK?= <luoleicn@gmail.com>
Date: Mon, 24 May 2010 09:39:38 +0800
Message-ID: <AANLkTiky6kVj31gQN-btyePiz5Tdt-x_PucDF-ISXT24@mail.gmail.com>
Subject: About loading lazily
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd32f00577e0c04874d1e47

--000e0cd32f00577e0c04874d1e47
Content-Type: text/plain; charset=ISO-8859-1

Hi:

Can you give me some details about loading lazily? What happens when I load
fields lazily?

Thanks in advance


Luo Lei

--000e0cd32f00577e0c04874d1e47--

From java-user-return-46206-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 24 04:16:17 2010
Return-Path: <java-user-return-46206-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6460 invoked from network); 24 May 2010 04:16:17 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 24 May 2010 04:16:17 -0000
Received: (qmail 46657 invoked by uid 500); 24 May 2010 04:16:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46510 invoked by uid 500); 24 May 2010 04:16:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46502 invoked by uid 99); 24 May 2010 04:16:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 May 2010 04:16:14 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ssenecal.work@gmail.com designates 209.85.221.191 as permitted sender)
Received: from [209.85.221.191] (HELO mail-qy0-f191.google.com) (209.85.221.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 May 2010 04:16:06 +0000
Received: by qyk29 with SMTP id 29so4051902qyk.14
        for <java-user@lucene.apache.org>; Sun, 23 May 2010 21:15:46 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=dNAtEQlHh+8/1bQLsC9v4jIDq/Jb9Rimsx7J6kohe5w=;
        b=EOBuq0WE/+WYBk9uIZWM++inJR9Bb5AqJ17be9/pXHoaVEpVVkKwKzWfayofDNO6l4
         woBeNBcE2SxFDxUsk6H/5o89EINuT3tzvEYH5/FBjhP3x762Q0erZ+76GkePECEGfuOB
         KOP+t+p6zqBkpiDxfm9MJDn0NDL1OJbc3odnI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=JhzvmnTtD7YPZIQUO6swUl3cSsf/lc8bbgp5HisdZ3wO1XDRcjwJob7sK211Mx6vjE
         dRuQYJC+5fagcr/qEaAKrmLMZNIOoWW589O1A20rLkSBwKBS2piurhPJNHA6gf/FvxW4
         JLKCj1Cjga9nIjwep0cJd4fr+LNHO8mTYL1ts=
MIME-Version: 1.0
Received: by 10.224.63.31 with SMTP id z31mr2751233qah.89.1274674545265; Sun, 
	23 May 2010 21:15:45 -0700 (PDT)
Received: by 10.229.74.81 with HTTP; Sun, 23 May 2010 21:15:45 -0700 (PDT)
In-Reply-To: <AANLkTiky6kVj31gQN-btyePiz5Tdt-x_PucDF-ISXT24@mail.gmail.com>
References: <AANLkTiky6kVj31gQN-btyePiz5Tdt-x_PucDF-ISXT24@mail.gmail.com>
Date: Mon, 24 May 2010 13:15:45 +0900
Message-ID: <AANLkTimQpXDaUATcaEzx0wtldXOorLpFcJ-kbkScVp2i@mail.gmail.com>
Subject: Re: About loading lazily
From: Shaun Senecal <ssenecal.work@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

When a field is lazy loaded, the actual value is not retrieved from
the server until it is rendered by the UI.  This is the same behaviour
as the LiveView that ExtGWT currently supports.  The difference is
that once a value has been retrieved once, LazyLoad will not fetch
that value from the server again.  LiveView will request the same
values over and over again as the user scrolls up and down.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46207-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 24 08:33:25 2010
Return-Path: <java-user-return-46207-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68115 invoked from network); 24 May 2010 08:33:25 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 24 May 2010 08:33:25 -0000
Received: (qmail 67504 invoked by uid 500); 24 May 2010 08:33:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67291 invoked by uid 500); 24 May 2010 08:33:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67282 invoked by uid 99); 24 May 2010 08:33:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 May 2010 08:33:22 +0000
X-ASF-Spam-Status: No, hits=-0.8 required=10.0
	tests=AWL,FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 May 2010 08:33:16 +0000
Received: by bwz4 with SMTP id 4so938719bwz.35
        for <java-user@lucene.apache.org>; Mon, 24 May 2010 01:32:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=4L4PCImdShKy068i7/+ls7CZ2JrHW4lRlhF6bum/fDE=;
        b=x6v4d7HARo5vnKYGU6GwEZq7JjSEYzBlbmQBeB58QicapT7BgJ3rqeo8TGc0DyZNH8
         eaKF7PkgSpuSflFdWslpTDDJfv2nXcartWIJ/OfXmdE1uYOSIB75VnWvylJGZNWyOe6J
         +ASpx7e8qMKOAi/Bn6p79uoUDqVAnoClL6w2Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=H8+9WFibSuCdc80tX9DnWvOOlOMcX4y52kuneFGn9oMyxlqW+FcUyEotphYg4eL4FU
         1f4gHDCZ2ItOqQ3wBpU0pfxpEJhC1vBrDas6is0WLXFX5lQDbWwh5d2WmcoGO75nJrLy
         AwXwZN5PyrBKImVgBSvQESav8Yy5nqxNP8EIU=
Received: by 10.204.74.32 with SMTP id s32mr1908493bkj.148.1274689965188; Mon, 
	24 May 2010 01:32:45 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.54.198 with HTTP; Mon, 24 May 2010 01:32:25 -0700 (PDT)
In-Reply-To: <AANLkTiloi-B_8T-eVVo38bUWkd1NzfXR3YVfte39FI13@mail.gmail.com>
References: <AANLkTiloi-B_8T-eVVo38bUWkd1NzfXR3YVfte39FI13@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Mon, 24 May 2010 09:32:25 +0100
Message-ID: <AANLkTikDLvSleFSzvxYV4fvP00g_mpw11whA2GVJP5j2@mail.gmail.com>
Subject: Re: Searching for a strict prefix
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

StandardAnalyzer should work fine, mark the field as indexed, no need
to store it unless you want to retrieve it for display.

Query via QueryParser using "tagname: updateC*" or programatically via
PrefixQuery.


Although I'm not sure exactly what you mean by "strict prefix".  If
you mean that the prefix should match exactly on case, punctuation
etc. maybe use KeywordAnalyzer instead.



--
Ian.


On Sun, May 23, 2010 at 3:03 PM, Shlomy Reinstein <sreinst1@gmail.com> wrote:
> Hi,
>
> I have a Lucene index that contains source code tags (a tag can be any
> named source code element - function, class, variable). Each document
> contains a field with the tag name and some additional information.
> I'd like to be able to perform strict prefix queries. E.g. if I have a
> tag named "updateChildren", I'd like to be able to write a query like
> "updateC*" and get the list of tags that have this prefix
> (updateChildren being one of them).
>
> Is there a way to do this? Please suggest how I should store the field
> for this purpose - which analyzer to use, whether to keep it stored,
> etc.
>
> Thanks,
> Shlomy
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46208-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 24 11:06:45 2010
Return-Path: <java-user-return-46208-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9052 invoked from network); 24 May 2010 11:06:45 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 24 May 2010 11:06:45 -0000
Received: (qmail 89978 invoked by uid 500); 24 May 2010 11:06:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89542 invoked by uid 500); 24 May 2010 11:06:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89533 invoked by uid 99); 24 May 2010 11:06:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 May 2010 11:06:37 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of gsiasf@gmail.com designates 74.125.83.48 as permitted sender)
Received: from [74.125.83.48] (HELO mail-gw0-f48.google.com) (74.125.83.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 May 2010 11:06:28 +0000
Received: by gwj23 with SMTP id 23so813197gwj.35
        for <java-user@lucene.apache.org>; Mon, 24 May 2010 04:06:07 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:sender:content-type
         :mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        bh=KaEFrkATCDVc8SoYaRDVF30sFrw0sFZLkxrNyEe17as=;
        b=Gi94klIi8VeJ0zq2kJcflJDuRpFqPj5bcHVBaa4ggJe+XpmIVwLDqF+9tpkXafRGlb
         qpMUKQoAEDi1LLZkXmpjZvxBl0VTCWPh81N3K1Xom/HLAXVNnnXUEGKaRN+3WP46zh5J
         5Iic8ZJXv1I4C34KQpA9RbirVPQNPUgQTqoN4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=sender:content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        b=wMNd8MvMqcmZ84oM4JP9WZIf/OhcNgoMP3fapYQJ/iTExfiNzVMehhTKaNvrfkQF/i
         UJV0r3aq5chESCZc8ZLMojiPk+joHgM9F8kOGLQFa19fbaGwjAwxNNwyPfaOdizoceIH
         v1upBiVe1PZI8OuPWfzA85V8cAtT9Jq1aM0pg=
Received: by 10.151.118.18 with SMTP id v18mr6199082ybm.84.1274699167312;
        Mon, 24 May 2010 04:06:07 -0700 (PDT)
Received: from [10.0.0.17] (adsl-065-013-152-164.sip.rdu.bellsouth.net [65.13.152.164])
        by mx.google.com with ESMTPS id f1sm46975756ybh.2.2010.05.24.04.06.06
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 24 May 2010 04:06:06 -0700 (PDT)
Sender: Grant Ingersoll <gsiasf@gmail.com>
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1078)
Subject: Re: About loading lazily
From: Grant Ingersoll <gsingers@apache.org>
In-Reply-To: <AANLkTimQpXDaUATcaEzx0wtldXOorLpFcJ-kbkScVp2i@mail.gmail.com>
Date: Mon, 24 May 2010 07:06:05 -0400
Content-Transfer-Encoding: quoted-printable
Message-Id: <F4B73923-A5CB-47AF-8B0A-9C6069B6C812@apache.org>
References: <AANLkTiky6kVj31gQN-btyePiz5Tdt-x_PucDF-ISXT24@mail.gmail.com> <AANLkTimQpXDaUATcaEzx0wtldXOorLpFcJ-kbkScVp2i@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1078)
X-Virus-Checked: Checked by ClamAV on apache.org

I'd also add that the Document keeps a pointer to the spot in storage =
where that value can be loaded from.  It can result in a performance =
saving in the typical search use case where one is displaying just =
"metadata" fields on a page, but not the full content.  In this case, =
the full content page is loaded lazily while the smaller metadata fields =
are loaded as usual.

-Grant

On May 24, 2010, at 12:15 AM, Shaun Senecal wrote:

> When a field is lazy loaded, the actual value is not retrieved from
> the server until it is rendered by the UI.  This is the same behaviour
> as the LiveView that ExtGWT currently supports.  The difference is
> that once a value has been retrieved once, LazyLoad will not fetch
> that value from the server again.  LiveView will request the same
> values over and over again as the user scrolls up and down.
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46209-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 24 11:08:16 2010
Return-Path: <java-user-return-46209-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9325 invoked from network); 24 May 2010 11:08:16 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 24 May 2010 11:08:16 -0000
Received: (qmail 92898 invoked by uid 500); 24 May 2010 11:08:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92809 invoked by uid 500); 24 May 2010 11:08:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92801 invoked by uid 99); 24 May 2010 11:08:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 May 2010 11:08:10 +0000
X-ASF-Spam-Status: No, hits=-0.5 required=10.0
	tests=AWL,FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gsiasf@gmail.com designates 209.85.211.194 as permitted sender)
Received: from [209.85.211.194] (HELO mail-yw0-f194.google.com) (209.85.211.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 May 2010 11:08:02 +0000
Received: by ywh32 with SMTP id 32so2176590ywh.5
        for <java-user@lucene.apache.org>; Mon, 24 May 2010 04:07:42 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:sender:content-type
         :mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        bh=2O2vQlfYidfHmfFuOxFAUKRJuWbEZb7/fjvpqX/QaSI=;
        b=IKXV5Ip35vghoCHBxXSGzzWyeEAEqbp/SMDYFiv7hCFtzVCPHaN0ZEu5GWHiIQ/5Zm
         Ew5OHnyrUd//xQrrSZlqQk6/9lunuyzjgtb0TomNdzGedoo7gHrojIDfxk84wYkdX3Hr
         i8S3nXfPZAqDy95HVDFz+Q6rRO1KI4k2v7okM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=sender:content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        b=iV81kYzhidATsiGP6rpFz3vyO4w8jADU8PVL2tcQodFbzOuLZ4jdAESaQXC0jUo0y0
         3btk9OVK8llvFw/+gEuep4UV9CviFmFRAZXPO2iNLqX7R+8jrJM+hzXSEqq5TU92kg+t
         JaZb0Bh0zKAqHTyH4cQMXOVq7DTnDLfvZP1fc=
Received: by 10.151.89.33 with SMTP id r33mr6160875ybl.160.1274699262225;
        Mon, 24 May 2010 04:07:42 -0700 (PDT)
Received: from [10.0.0.17] (adsl-065-013-152-164.sip.rdu.bellsouth.net [65.13.152.164])
        by mx.google.com with ESMTPS id 14sm2094876gxk.15.2010.05.24.04.07.41
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 24 May 2010 04:07:41 -0700 (PDT)
Sender: Grant Ingersoll <gsiasf@gmail.com>
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1078)
Subject: Re: Arrange terms[i]
From: Grant Ingersoll <gsingers@apache.org>
In-Reply-To: <AANLkTil2JbQWZUw66CdELHF6AvxWuL2J_8NY0FIj1V-0@mail.gmail.com>
Date: Mon, 24 May 2010 07:07:40 -0400
Content-Transfer-Encoding: quoted-printable
Message-Id: <5FEFEC46-3AF5-44B1-A960-2208E8671A9A@apache.org>
References: <AANLkTil2JbQWZUw66CdELHF6AvxWuL2J_8NY0FIj1V-0@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1078)


On May 20, 2010, at 5:15 AM, manjula wijewickrema wrote:

> Hi,
>=20
> I wrote aprogram to get the ferquencies and terms of an indexed =
document.
> The output comes as follows;
>=20
>=20
> If I print : +tfv[0]
>=20
> Output:
>=20
> array terms are:{title: capabl/1, code/2, frequenc/1, lucen/4, over/1,
> sampl/1, term/4, test/1}
>=20
> In the same way I can print terms[i] and freqs[i], but the problem is =
while
> I am printing terms[i], output (array elements) comes according to the
> English alphabetic order (as above) and freqs[i] also arrange =
according that
> particular order. Is there a way to arrange terms[i] according to the
> ascending/descending order of their frequencies?

Yes, have a look at the TermVectorMapper.  You will need to implement a =
variation of this to build up the data structures you need.

-Grant=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46210-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 24 11:26:25 2010
Return-Path: <java-user-return-46210-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14154 invoked from network); 24 May 2010 11:26:22 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 24 May 2010 11:26:22 -0000
Received: (qmail 2590 invoked by uid 500); 24 May 2010 11:26:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2474 invoked by uid 500); 24 May 2010 11:26:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2466 invoked by uid 99); 24 May 2010 11:26:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 May 2010 11:26:16 +0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=FREEMAIL_FROM,SPF_HELO_PASS,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 216.139.236.158 is neither permitted nor denied by domain of hota.aida@gmail.com)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 May 2010 11:26:09 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <hota.aida@gmail.com>)
	id 1OGVn2-0005IP-Mc
	for java-user@lucene.apache.org; Mon, 24 May 2010 04:25:48 -0700
Date: Mon, 24 May 2010 04:25:48 -0700 (PDT)
From: Xaida <hota.aida@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1274700348693-839449.post@n3.nabble.com>
Subject: Applying term frequency thresholds on indexing time
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


Hi guys!

does there exist a way to define some threshold on the terms I wanna store
in the index(before they are indexed). I need to store the terms  with
higheest frequencies. I done it with term vectors and some cutoff ratio that
cuts off the least occuring terms, but all this is, ofcourse works during
retrieval time, reading from index. 

I know it make no sense to be able to calculate frequencies of the terms
before they are stored, but i guess there could be some way to work it
around???

All hellp appreciated!

Thank you!
-- 
View this message in context: http://lucene.472066.n3.nabble.com/Applying-term-frequency-thresholds-on-indexing-time-tp839449p839449.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46211-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 24 12:15:26 2010
Return-Path: <java-user-return-46211-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29537 invoked from network); 24 May 2010 12:15:25 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 24 May 2010 12:15:25 -0000
Received: (qmail 61461 invoked by uid 500); 24 May 2010 12:15:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61287 invoked by uid 500); 24 May 2010 12:15:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61279 invoked by uid 99); 24 May 2010 12:15:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 May 2010 12:15:22 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of sreinst1@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 May 2010 12:15:15 +0000
Received: by wyb32 with SMTP id 32so1825446wyb.35
        for <java-user@lucene.apache.org>; Mon, 24 May 2010 05:14:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=s8uHHIjVacA7RRW8OxcG97rDPdutr11vTlbxYypQkkE=;
        b=MYW5YWbxywI3zBCR7wUf/JhIprxiXqL/b6jpoVl20GF9tZt8MXo+tWMUvFSVJXQybb
         k3/BQfeZ1xJtJkTX53RjHRqxK69iW7i14Y4L2Kh6eX8/wfX6QstDzoRrSeQhcPFbADFZ
         kQUspvtcUKXAxcIR5Olnd+4DUtI5zJTLNXDFY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=iDD1jwbbVh8qMvir9r/Rp7fzfosJAZx5Y6bZf2VZlnNCuGKFcopwREjTVS7yZuF4j/
         +HaSTuYQo1bFkXO2cuUeN0y01GB4SJV9KiP/nVuOOrnvUqMYdLbjyKCfKJ0kXtJKBYkW
         EE29tN/3jqLZFXDNld3DEm5zMTInNtkyK5IQs=
MIME-Version: 1.0
Received: by 10.216.161.21 with SMTP id v21mr3468997wek.149.1274703294791; 
	Mon, 24 May 2010 05:14:54 -0700 (PDT)
Received: by 10.216.38.201 with HTTP; Mon, 24 May 2010 05:14:54 -0700 (PDT)
In-Reply-To: <AANLkTikDLvSleFSzvxYV4fvP00g_mpw11whA2GVJP5j2@mail.gmail.com>
References: <AANLkTiloi-B_8T-eVVo38bUWkd1NzfXR3YVfte39FI13@mail.gmail.com>
	 <AANLkTikDLvSleFSzvxYV4fvP00g_mpw11whA2GVJP5j2@mail.gmail.com>
Date: Mon, 24 May 2010 15:14:54 +0300
Message-ID: <AANLkTilvvkEEujNfxkJ0iasrTd1Met_CErzKf3FiXNvN@mail.gmail.com>
Subject: Re: Searching for a strict prefix
From: Shlomy Reinstein <sreinst1@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Thanks. By "strict prefix", I meant a prefix of the name
(case-insensitive). What you suggest ("tagname: updateC*") was the
first thing I tried, but it happens to work only partially. In my
case, I have a lot of names beginning with "m_sz<something>", e.g.
"m_szComment", "m_szName". Trying a query like "tagname: m_szC*" will
not find the "m_szComment" value. I just wrote the wrong example here.

Shlomy

On Mon, May 24, 2010 at 11:32 AM, Ian Lea <ian.lea@gmail.com> wrote:
> StandardAnalyzer should work fine, mark the field as indexed, no need
> to store it unless you want to retrieve it for display.
>
> Query via QueryParser using "tagname: updateC*" or programatically via
> PrefixQuery.
>
>
> Although I'm not sure exactly what you mean by "strict prefix". =A0If
> you mean that the prefix should match exactly on case, punctuation
> etc. maybe use KeywordAnalyzer instead.
>
>
>
> --
> Ian.
>
>
> On Sun, May 23, 2010 at 3:03 PM, Shlomy Reinstein <sreinst1@gmail.com> wr=
ote:
>> Hi,
>>
>> I have a Lucene index that contains source code tags (a tag can be any
>> named source code element - function, class, variable). Each document
>> contains a field with the tag name and some additional information.
>> I'd like to be able to perform strict prefix queries. E.g. if I have a
>> tag named "updateChildren", I'd like to be able to write a query like
>> "updateC*" and get the list of tags that have this prefix
>> (updateChildren being one of them).
>>
>> Is there a way to do this? Please suggest how I should store the field
>> for this purpose - which analyzer to use, whether to keep it stored,
>> etc.
>>
>> Thanks,
>> Shlomy
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46212-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 24 13:38:41 2010
Return-Path: <java-user-return-46212-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74445 invoked from network); 24 May 2010 13:38:41 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 24 May 2010 13:38:41 -0000
Received: (qmail 62496 invoked by uid 500); 24 May 2010 13:38:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62437 invoked by uid 500); 24 May 2010 13:38:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62429 invoked by uid 99); 24 May 2010 13:38:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 May 2010 13:38:39 +0000
X-ASF-Spam-Status: No, hits=-0.8 required=10.0
	tests=AWL,FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 May 2010 13:38:32 +0000
Received: by bwz4 with SMTP id 4so1094541bwz.35
        for <java-user@lucene.apache.org>; Mon, 24 May 2010 06:38:11 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=A50PRM2JbiRBqPNYsllyV1dVvEvsW8QIaGXs90r4eec=;
        b=HloN5K1UOhwNaQ43vEMnmSNERE3gEpw44OKnkwE7ijWXeutF/Rdlr7PmHiYppZcjF+
         Y5U68TlAO+imnma7njXLdEoDMBuTS1xkFmY94aDkJtE9Ig5NidcByZ+SGtn4riyPWAy+
         D0HbfO9ukuRzjlSqhiHWhcslflwCKE59km+ig=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=ioiyA/HxMqvvckn9ofIxg5AjPiFZGTsgu7SYmENep61FB9XQfUJhQ/ipixtSiaUiUy
         +aDkaA+4KTMGfX8pRXVuoaqnZ0aa5A0tshQAqJ5A4GarsK2380YiKpuhGzk8ttNew9cZ
         UeBuzoW2/LMuuEknymutrsIuleKryEZNB0YHY=
Received: by 10.204.13.68 with SMTP id b4mr2264868bka.133.1274708291220; Mon, 
	24 May 2010 06:38:11 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.54.198 with HTTP; Mon, 24 May 2010 06:37:51 -0700 (PDT)
In-Reply-To: <AANLkTilvvkEEujNfxkJ0iasrTd1Met_CErzKf3FiXNvN@mail.gmail.com>
References: <AANLkTiloi-B_8T-eVVo38bUWkd1NzfXR3YVfte39FI13@mail.gmail.com> 
	<AANLkTikDLvSleFSzvxYV4fvP00g_mpw11whA2GVJP5j2@mail.gmail.com> 
	<AANLkTilvvkEEujNfxkJ0iasrTd1Met_CErzKf3FiXNvN@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Mon, 24 May 2010 14:37:51 +0100
Message-ID: <AANLkTinhW1L2BZh1S-hyro-m9TTGZf7mWsaOgmO6PXz6@mail.gmail.com>
Subject: Re: Searching for a strict prefix
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

I bet it's that underscore in m_sz.  Different analyzers do different
things with different punctuation characters.  I can never remember
which does exactly what - it'll be in the javadocs or Lucene In Action
or somewhere on the web.

You can check what exactly has been indexed by using Luke - always a good i=
dea.

In this case you probably want an analyzer that just downcases the tag
names.  Easy enough to build your own if there isn't an existing one
that meets your needs.


--
Ian.


On Mon, May 24, 2010 at 1:14 PM, Shlomy Reinstein <sreinst1@gmail.com> wrot=
e:
> Hi,
>
> Thanks. By "strict prefix", I meant a prefix of the name
> (case-insensitive). What you suggest ("tagname: updateC*") was the
> first thing I tried, but it happens to work only partially. In my
> case, I have a lot of names beginning with "m_sz<something>", e.g.
> "m_szComment", "m_szName". Trying a query like "tagname: m_szC*" will
> not find the "m_szComment" value. I just wrote the wrong example here.
>
> Shlomy
>
> On Mon, May 24, 2010 at 11:32 AM, Ian Lea <ian.lea@gmail.com> wrote:
>> StandardAnalyzer should work fine, mark the field as indexed, no need
>> to store it unless you want to retrieve it for display.
>>
>> Query via QueryParser using "tagname: updateC*" or programatically via
>> PrefixQuery.
>>
>>
>> Although I'm not sure exactly what you mean by "strict prefix". =A0If
>> you mean that the prefix should match exactly on case, punctuation
>> etc. maybe use KeywordAnalyzer instead.
>>
>>
>>
>> --
>> Ian.
>>
>>
>> On Sun, May 23, 2010 at 3:03 PM, Shlomy Reinstein <sreinst1@gmail.com> w=
rote:
>>> Hi,
>>>
>>> I have a Lucene index that contains source code tags (a tag can be any
>>> named source code element - function, class, variable). Each document
>>> contains a field with the tag name and some additional information.
>>> I'd like to be able to perform strict prefix queries. E.g. if I have a
>>> tag named "updateChildren", I'd like to be able to write a query like
>>> "updateC*" and get the list of tags that have this prefix
>>> (updateChildren being one of them).
>>>
>>> Is there a way to do this? Please suggest how I should store the field
>>> for this purpose - which analyzer to use, whether to keep it stored,
>>> etc.
>>>
>>> Thanks,
>>> Shlomy
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46213-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 24 13:54:50 2010
Return-Path: <java-user-return-46213-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80154 invoked from network); 24 May 2010 13:54:50 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 24 May 2010 13:54:50 -0000
Received: (qmail 82672 invoked by uid 500); 24 May 2010 13:54:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82639 invoked by uid 500); 24 May 2010 13:54:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82631 invoked by uid 99); 24 May 2010 13:54:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 May 2010 13:54:47 +0000
X-ASF-Spam-Status: No, hits=1.7 required=10.0
	tests=AWL,FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sreinst1@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 May 2010 13:54:41 +0000
Received: by wyb32 with SMTP id 32so1916513wyb.35
        for <java-user@lucene.apache.org>; Mon, 24 May 2010 06:54:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=NfZYyg1A/5n6oQELpGLWnU0By82VosmwvNSly3tCr2U=;
        b=lP1WmD/9Ue2V5x87t7sEuGRyE4PwbpjsiXpmPseWgvRNpMuQlntYhIStTmBBJCmoek
         +I3MEA8NNYreEIJmuJ2YiAXsGU292FsJFb8Q3wnAJi3L5rIjxZU+MA3Av47gXjYYGJGh
         jPn2kTgU0cfEZ22Avc5Knq+oPjjLBJRjJRbAY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=XVv+B9o7eJpFvVoKpCymt8b1GVNB1t7tVvvmwIQXT3uZ1vVQd8EWrkKwf1VYtr7inz
         ZocNuinzSfEiuaQDrxLgOelPvxSRrDNLKBVXGLGHOgfWNH0aVXy3IIdkZeKkitNK95WJ
         +FW1gCwOp2ReLstsn39X01R5ZqaHgCaQLhgCY=
MIME-Version: 1.0
Received: by 10.216.93.76 with SMTP id k54mr3589172wef.224.1274709258630; Mon, 
	24 May 2010 06:54:18 -0700 (PDT)
Received: by 10.216.38.201 with HTTP; Mon, 24 May 2010 06:54:18 -0700 (PDT)
In-Reply-To: <AANLkTinhW1L2BZh1S-hyro-m9TTGZf7mWsaOgmO6PXz6@mail.gmail.com>
References: <AANLkTiloi-B_8T-eVVo38bUWkd1NzfXR3YVfte39FI13@mail.gmail.com>
	 <AANLkTikDLvSleFSzvxYV4fvP00g_mpw11whA2GVJP5j2@mail.gmail.com>
	 <AANLkTilvvkEEujNfxkJ0iasrTd1Met_CErzKf3FiXNvN@mail.gmail.com>
	 <AANLkTinhW1L2BZh1S-hyro-m9TTGZf7mWsaOgmO6PXz6@mail.gmail.com>
Date: Mon, 24 May 2010 16:54:18 +0300
Message-ID: <AANLkTik68d59yFqnzdy5rQLMxYxuuo1JZBIckgsawzNU@mail.gmail.com>
Subject: Re: Searching for a strict prefix
From: Shlomy Reinstein <sreinst1@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hi,

Thanks for the help.
BTW, if anyone is interested: I tried the same with KeywordAnalyzer -
added a field with value "m_szName", and tried to find it using
"FieldName:m_szN*" but failed. Someone in the Lucene IRC channel
showed me why - QueryParser, by default, lowercases all expanded terms
(e.g. those with '*' in them), so it actually looked for "m_szn*".

Thanks again,
Shlomy

On Mon, May 24, 2010 at 4:37 PM, Ian Lea <ian.lea@gmail.com> wrote:
> I bet it's that underscore in m_sz. =A0Different analyzers do different
> things with different punctuation characters. =A0I can never remember
> which does exactly what - it'll be in the javadocs or Lucene In Action
> or somewhere on the web.
>
> You can check what exactly has been indexed by using Luke - always a good=
 idea.
>
> In this case you probably want an analyzer that just downcases the tag
> names. =A0Easy enough to build your own if there isn't an existing one
> that meets your needs.
>
>
> --
> Ian.
>
>
> On Mon, May 24, 2010 at 1:14 PM, Shlomy Reinstein <sreinst1@gmail.com> wr=
ote:
>> Hi,
>>
>> Thanks. By "strict prefix", I meant a prefix of the name
>> (case-insensitive). What you suggest ("tagname: updateC*") was the
>> first thing I tried, but it happens to work only partially. In my
>> case, I have a lot of names beginning with "m_sz<something>", e.g.
>> "m_szComment", "m_szName". Trying a query like "tagname: m_szC*" will
>> not find the "m_szComment" value. I just wrote the wrong example here.
>>
>> Shlomy
>>
>> On Mon, May 24, 2010 at 11:32 AM, Ian Lea <ian.lea@gmail.com> wrote:
>>> StandardAnalyzer should work fine, mark the field as indexed, no need
>>> to store it unless you want to retrieve it for display.
>>>
>>> Query via QueryParser using "tagname: updateC*" or programatically via
>>> PrefixQuery.
>>>
>>>
>>> Although I'm not sure exactly what you mean by "strict prefix". =A0If
>>> you mean that the prefix should match exactly on case, punctuation
>>> etc. maybe use KeywordAnalyzer instead.
>>>
>>>
>>>
>>> --
>>> Ian.
>>>
>>>
>>> On Sun, May 23, 2010 at 3:03 PM, Shlomy Reinstein <sreinst1@gmail.com> =
wrote:
>>>> Hi,
>>>>
>>>> I have a Lucene index that contains source code tags (a tag can be any
>>>> named source code element - function, class, variable). Each document
>>>> contains a field with the tag name and some additional information.
>>>> I'd like to be able to perform strict prefix queries. E.g. if I have a
>>>> tag named "updateChildren", I'd like to be able to write a query like
>>>> "updateC*" and get the list of tags that have this prefix
>>>> (updateChildren being one of them).
>>>>
>>>> Is there a way to do this? Please suggest how I should store the field
>>>> for this purpose - which analyzer to use, whether to keep it stored,
>>>> etc.
>>>>
>>>> Thanks,
>>>> Shlomy
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46214-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 24 15:15:30 2010
Return-Path: <java-user-return-46214-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10446 invoked from network); 24 May 2010 15:15:29 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 24 May 2010 15:15:29 -0000
Received: (qmail 91501 invoked by uid 500); 24 May 2010 15:15:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91445 invoked by uid 500); 24 May 2010 15:15:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91426 invoked by uid 99); 24 May 2010 15:15:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 May 2010 15:15:24 +0000
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,MISSING_HEADERS,RCVD_IN_DNSWL_NONE,SPF_PASS,T_FILL_THIS_FORM_SHORT,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of gsiasf@gmail.com designates 74.125.83.48 as permitted sender)
Received: from [74.125.83.48] (HELO mail-gw0-f48.google.com) (74.125.83.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 May 2010 15:15:15 +0000
Received: by gwj23 with SMTP id 23so942932gwj.35
        for <multiple recipients>; Mon, 24 May 2010 08:14:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:sender:from:mime-version
         :content-type:subject:date:in-reply-to:cc:references:message-id
         :x-mailer;
        bh=p0sJ6OIGGuPu+wHTRJHUIiccS1/FEDh345xq2Sr5SKU=;
        b=xIwBuFUfpcvU0kHYpXIL03NywBxaSs6JiUaQcCh/45OWFgBtejMxm73R8JisdTmzMo
         78IxpztTVxhucgPY8kbuSWYMmMFS1QH4II/Tb8WBQV3OT2ZO6j3uvSOhzLvDk/j2Iyil
         f1e+isJiuAo5AIXrHvB3DCETfGWY/lkj5bVmc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=sender:from:mime-version:content-type:subject:date:in-reply-to:cc
         :references:message-id:x-mailer;
        b=hzGoHOYM0KtRiya4ELAxW+LRoaTHMmSIehnqFxf7A+0c8WnYrWlwQG8SAPXGy7EM3o
         QvXCPSji8oSDqXH8ElbqG9189WcL6DBQFRXXc8nEytSegZavzVgXzc5BCAk3fdO1bHkW
         50aWo7gk4vYHK2l9F4VwA9uedb78uaN/lEuf4=
Received: by 10.150.238.15 with SMTP id l15mr2561976ybh.301.1274714094237;
        Mon, 24 May 2010 08:14:54 -0700 (PDT)
Received: from [10.0.0.17] (adsl-065-013-152-164.sip.rdu.bellsouth.net [65.13.152.164])
        by mx.google.com with ESMTPS id p5sm48579844ybe.0.2010.05.24.08.14.50
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 24 May 2010 08:14:53 -0700 (PDT)
Sender: Grant Ingersoll <gsiasf@gmail.com>
From: Grant Ingersoll <gsingers@apache.org>
Mime-Version: 1.0 (Apple Message framework v1078)
Content-Type: multipart/alternative; boundary=Apple-Mail-30-54145895
Subject: Re: CFP for Lucene Revolution Conference, Boston, MA October 7 & 8 2010
Date: Mon, 24 May 2010 11:14:49 -0400
In-Reply-To: <6DBBBDE8-9762-405E-98AA-66873E1B8599@apache.org>
Cc: java-user@lucene.apache.org,
 solr-user@lucene.apache.org,
 Lucene mailing list <general@lucene.apache.org>,
 user@nutch.apache.org,
 user@tika.apache.org,
 user@mahout.apache.org,
 lucene-net-dev@lucene.apache.org
References: <6DBBBDE8-9762-405E-98AA-66873E1B8599@apache.org>
Message-Id: <5B8E4F93-861E-459B-AEF8-DDA33BC94817@apache.org>
X-Mailer: Apple Mail (2.1078)
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-30-54145895
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=utf-8

I should add that talks on Mahout, Tika, Nutch, etc. are also =
encouraged.

-Grant

On May 17, 2010, at 8:43 AM, Grant Ingersoll wrote:

> Lucene Revolution Call For Participation - Boston, Massachusetts =
October 7 & 8, 2010
> =20
> The first US conference dedicated to Apache Lucene and Solr is coming =
to Boston, October 7 & 8, 2010. The conference is sponsored by Lucid =
Imagination with additional support from community and other commercial =
co=E2=80=90sponsors. The audience will include those experienced Solr =
and Lucene application development, along with those experienced in =
other enterprise search technologies interested becoming more familiar =
with Solr and Lucene technologies and the opportunities they present.=20
>=20
> We are soliciting 45=E2=80=90minute presentations for the conference.
>=20
> Key Dates:
> May 12, 2010         Call For Participation Open
> June 23, 2010        Call For Participation Closes
> June 28, 2010        Speaker Acceptance/Rejection Notification
> October 5=E2=80=906, 2010  Lucene and Solr Pre=E2=80=90conference =
Training Sessions
> October 7=E2=80=908, 2010  Conference Sessions
>=20
>=20
> Topics of interest include:
> Lucene and Solr in the Enterprise (case studies, implementation, =
return on investment, etc.)
>  =E2=80=9CHow We Did It=E2=80=9D Development Case Studies
> Spatial/Geo search
>  Lucene and Solr in the Cloud (Deployment cases as well as tutorials)
> Scalability and Performance Tuning
> Large Scale Search
> Real Time Search
> Data Integration/Data Management
> Lucene & Solr for Mobile Applications
>=20
> All accepted speakers will qualify for discounted conference =
admission. Financial assistance is available for speakers that qualify.
>=20
> To submit a 45=E2=80=90minute presentation proposal, please send an =
email to cfp@lucenerevolution.org with Subject containing: <your name>, =
Topic <your session title> containing the following information in plain =
text.
>=20
> If you have more than one topic proposed, send a separate email. Do =
not attach Word or other text file documents.
>=20
> Return all fields completed as follows:
> 1.    Your full name, title, and organization=20
> 2.    Contact information, including your address, email, phone number=20=

> 3.    The name of your proposed session (keep your title simple, =
interesting, and relevant to the topic)=20
> 4.    A 75=E2=80=90200 word overview of your presentation; in addition =
to the topic, describe whether your
> presentation is intended as a tutorial, description of an =
implementation, an theoretical/academic
> discussion, etc.=20
> 5.    A 100=E2=80=90200=E2=80=90word speaker bio that includes prior =
conference speaking or related experience
> To be considered, proposals must be received by 12 Midnight PDT =
Wednesday, June 23, 2010.
>=20
> Please email any general questions regarding the conference to =
info@lucenerevolution.org. To be added to the conference mailing list, =
please email signup@lucenerevolution.org. If your organization is =
interested in sponsorship opportunities, email =
sponsor@lucenerevolution.org.
>=20
> We look forward to seeing you in Boston!


--Apple-Mail-30-54145895--

From java-user-return-46215-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 24 19:40:44 2010
Return-Path: <java-user-return-46215-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20876 invoked from network); 24 May 2010 19:40:43 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 24 May 2010 19:40:43 -0000
Received: (qmail 23290 invoked by uid 500); 24 May 2010 19:40:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23257 invoked by uid 500); 24 May 2010 19:40:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23249 invoked by uid 99); 24 May 2010 19:40:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 May 2010 19:40:41 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lahendrix@wisc.edu designates 144.92.197.211 as permitted sender)
Received: from [144.92.197.211] (HELO agogare.doit.wisc.edu) (144.92.197.211)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 May 2010 19:40:33 +0000
MIME-version: 1.0
Content-type: multipart/alternative;
 boundary="Boundary_(ID_eLF7R62ctMyCBWUxWI+uhQ)"
Received: from avs-daemon.smtpauth2.wiscmail.wisc.edu by
 smtpauth2.wiscmail.wisc.edu
 (Sun Java(tm) System Messaging Server 7u2-7.05 32bit (built Jul 30 2009))
 id <0L2X00100VZ0E500@smtpauth2.wiscmail.wisc.edu> for
 java-user@lucene.apache.org; Mon, 24 May 2010 14:40:13 -0500 (CDT)
Received: from dyn-72-33-51-128.uwnet.wisc.edu
 (dyn-72-33-51-128.uwnet.wisc.edu [72.33.51.128])
 by smtpauth2.wiscmail.wisc.edu
 (Sun Java(tm) System Messaging Server 7u2-7.05 32bit (built Jul 30 2009))
 with ESMTPSA id <0L2X00C0QVYU9Y30@smtpauth2.wiscmail.wisc.edu> for
 java-user@lucene.apache.org; Mon, 24 May 2010 14:40:06 -0500 (CDT)
Date: Mon, 24 May 2010 14:40:05 -0500
From: Larry Hendrix <lahendrix@wisc.edu>
Subject: Using synonyms with Lucene without WordPress
To: java-user@lucene.apache.org
Message-id: <431046B5-8216-4B35-AB1C-1613F85CE12C@wisc.edu>
X-Mailer: Apple Mail (2.1078)
X-Spam-Report: AuthenticatedSender=yes, SenderIP=72.33.51.128
X-Spam-PmxInfo: Server=avs-11, Version=5.5.9.395186,
 Antispam-Engine: 2.7.2.376379, Antispam-Data: 2010.5.24.193017,
 SenderIP=72.33.51.128
X-Virus-Checked: Checked by ClamAV on apache.org

--Boundary_(ID_eLF7R62ctMyCBWUxWI+uhQ)
Content-type: text/plain; CHARSET=US-ASCII
Content-transfer-encoding: 7BIT

Does anyone know of any classes available that allow you to define and use your own synonyms when searching with Lucene? I read some about WordPress but it seems those synonyms are predefined English words. The application I am working with searches for the names of contacts and companies. I would like for the user to be able to set "Dan" as a synonym for "Daniel" or "BOA" for "Bank of America" ...etc

--Larry




Larry A. Hendrix, Graduate Student 
Computer Science Department 
University of Wisconsin-Madison 
1300 University Ave Rm 6749 
Madison, WI 53711 
Office: (608) 263-7624 
lhendrix@cs.wisc.edu 
Grambling State University Alum 


--Boundary_(ID_eLF7R62ctMyCBWUxWI+uhQ)--

From java-user-return-46216-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 24 19:53:28 2010
Return-Path: <java-user-return-46216-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23484 invoked from network); 24 May 2010 19:53:28 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 24 May 2010 19:53:28 -0000
Received: (qmail 39004 invoked by uid 500); 24 May 2010 19:53:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38934 invoked by uid 500); 24 May 2010 19:53:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38926 invoked by uid 99); 24 May 2010 19:53:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 May 2010 19:53:25 +0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=AWL,FREEMAIL_FROM,FREEMAIL_REPLYTO,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 May 2010 19:53:21 +0000
Received: by fxm16 with SMTP id 16so3031958fxm.35
        for <java-user@lucene.apache.org>; Mon, 24 May 2010 12:52:59 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:reply-to
         :in-reply-to:references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=NOzUGdEpqS/38qU1dbsvhXv7uJHJ8ogGIQO398LSJRo=;
        b=UIMCLpJhsNh3jjR7nJAJlh4wRbp3sMJCCYLvJUNJq7ed6odn4SxYqY7Q+BnjvgUDUl
         JwaURI+++G5q2jrBxd4+6Fv4/0ghGYIWyCFRXN33VJnpqhi0GlnZC1pu+/BTlCZ2NVmA
         106cQWQYUyXa2GVSf8Hqum90oKyU/Rt/cXRDk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        b=wUFxn460AAM3XxBXRiwZIIlFEbyb7lcRTOASpechEZ7bJFGaHzBovEkFXZY958vRFN
         1ByQobCETNm2dEQglQV08EzUa43FX9gOWFwCmzAYfDYgWHWQZ2pOgv3dVMbmOCVrXsdC
         0fkUJy0H+jH5/bFhuNpaU5kmMvs9uMwCnDv2s=
MIME-Version: 1.0
Received: by 10.239.186.208 with SMTP id i16mr517512hbh.67.1274730779680; Mon, 
	24 May 2010 12:52:59 -0700 (PDT)
Received: by 10.239.135.209 with HTTP; Mon, 24 May 2010 12:52:59 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <431046B5-8216-4B35-AB1C-1613F85CE12C@wisc.edu>
References: <431046B5-8216-4B35-AB1C-1613F85CE12C@wisc.edu>
Date: Mon, 24 May 2010 21:52:59 +0200
Message-ID: <AANLkTilCYGIUQr93XvgS1xyY6D6q2GOkKcadj5djxiVz@mail.gmail.com>
Subject: Re: Using synonyms with Lucene without WordPress
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Larry, you should look at the SynonymFilter in Lucene Contrib Analysis.

simon

On Mon, May 24, 2010 at 9:40 PM, Larry Hendrix <lahendrix@wisc.edu> wrote:
> Does anyone know of any classes available that allow you to define and us=
e your own synonyms when searching with Lucene? I read some about WordPress=
 but it seems those synonyms are predefined English words. The application =
I am working with searches for the names of contacts and companies. I would=
 like for the user to be able to set "Dan" as a synonym for "Daniel" or "BO=
A" for "Bank of America" ...etc
>
> --Larry
>
>
>
>
> Larry A. Hendrix, Graduate Student
> Computer Science Department
> University of Wisconsin-Madison
> 1300 University Ave Rm 6749
> Madison, WI 53711
> Office: (608) 263-7624
> lhendrix@cs.wisc.edu
> Grambling State University Alum
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46217-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 25 00:05:33 2010
Return-Path: <java-user-return-46217-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19157 invoked from network); 25 May 2010 00:05:33 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 May 2010 00:05:33 -0000
Received: (qmail 45616 invoked by uid 500); 25 May 2010 00:05:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45388 invoked by uid 500); 25 May 2010 00:05:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45380 invoked by uid 99); 25 May 2010 00:05:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 May 2010 00:05:31 +0000
X-ASF-Spam-Status: No, hits=3.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.160.176 as permitted sender)
Received: from [209.85.160.176] (HELO mail-gy0-f176.google.com) (209.85.160.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 May 2010 00:05:24 +0000
Received: by gyf1 with SMTP id 1so2098905gyf.35
        for <java-user@lucene.apache.org>; Mon, 24 May 2010 17:05:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=gbJdHSG9ixEgWiS7EQwS+MFunxZi0F62SD5UPwUMVd0=;
        b=pUcs/BUweNT0K748nguz8F5zw98YxLHW+kwp+ZhuVbmPQSkw5MtJTcGMED68+uWUqs
         ufTCs57FouFN8++5NYcJJ9swfwUstYLd0lB+1p1E9wr2kh+4HmUkycoEnp6q7GfLyATp
         AkkWirHblU3n9UlAo9fRgtVbqP7TTonf7jHmM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=SC1+LgYFRJdlwwMcnb/qqCNZUsl75aokiBvEFIH46WDEU1nWCLGe2+UZdtZkfalrm1
         PHOcYRIzu0Juxs6we25RX5tx9SQDhYyNlhyRvBehw50cxpLXSmm3/smSTQx/T4CsAWkf
         ihb9rF14Cu6rHfF6rbeO9556CCn//YGi2Lmnc=
MIME-Version: 1.0
Received: by 10.150.159.7 with SMTP id h7mr7087168ybe.16.1274745595312; Mon, 
	24 May 2010 16:59:55 -0700 (PDT)
Received: by 10.151.43.7 with HTTP; Mon, 24 May 2010 16:59:54 -0700 (PDT)
In-Reply-To: <1274700348693-839449.post@n3.nabble.com>
References: <1274700348693-839449.post@n3.nabble.com>
Date: Mon, 24 May 2010 19:59:54 -0400
Message-ID: <AANLkTilkX4OutVe6wkg7wV0qWuZihYKDjj5G_IhlXoZP@mail.gmail.com>
Subject: Re: Applying term frequency thresholds on indexing time
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cdf1c16638d5204875fd681
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cdf1c16638d5204875fd681
Content-Type: text/plain; charset=ISO-8859-1

Why do you want to calculate this? This is done for
you by the indexing process and taken into account
when searching.

You're asking for a solution before defining the problem,
which makes it very hard to help.
See: http://people.apache.org/~hossman/#xyproblem

Best
Erick


On Mon, May 24, 2010 at 7:25 AM, Xaida <hota.aida@gmail.com> wrote:

>
> Hi guys!
>
> does there exist a way to define some threshold on the terms I wanna store
> in the index(before they are indexed). I need to store the terms  with
> higheest frequencies. I done it with term vectors and some cutoff ratio
> that
> cuts off the least occuring terms, but all this is, ofcourse works during
> retrieval time, reading from index.
>
> I know it make no sense to be able to calculate frequencies of the terms
> before they are stored, but i guess there could be some way to work it
> around???
>
> All hellp appreciated!
>
> Thank you!
> --
> View this message in context:
> http://lucene.472066.n3.nabble.com/Applying-term-frequency-thresholds-on-indexing-time-tp839449p839449.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cdf1c16638d5204875fd681--

From java-user-return-46218-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 25 08:49:49 2010
Return-Path: <java-user-return-46218-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88368 invoked from network); 25 May 2010 08:49:49 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 May 2010 08:49:49 -0000
Received: (qmail 25732 invoked by uid 500); 25 May 2010 08:49:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25594 invoked by uid 500); 25 May 2010 08:49:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25585 invoked by uid 99); 25 May 2010 08:49:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 May 2010 08:49:46 +0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=AWL,RCVD_IN_DNSWL_NONE,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.160.176] (HELO mail-gy0-f176.google.com) (209.85.160.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 May 2010 08:49:40 +0000
Received: by gyf1 with SMTP id 1so2275080gyf.35
        for <java-user@lucene.apache.org>; Tue, 25 May 2010 01:49:19 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.150.184.3 with SMTP id h3mr7619240ybf.265.1274777359454; Tue, 
	25 May 2010 01:49:19 -0700 (PDT)
Received: by 10.151.11.20 with HTTP; Tue, 25 May 2010 01:49:19 -0700 (PDT)
In-Reply-To: <1274700348693-839449.post@n3.nabble.com>
References: <1274700348693-839449.post@n3.nabble.com>
Date: Tue, 25 May 2010 04:49:19 -0400
Message-ID: <AANLkTilcrk-5keu6JWb05FeJFB9KGNEXAkHkQUZOPSe6@mail.gmail.com>
Subject: Re: Applying term frequency thresholds on indexing time
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Also have a look at the index pruning tool:

    https://issues.apache.org/jira/browse/LUCENE-1812

Mike

On Mon, May 24, 2010 at 7:25 AM, Xaida <hota.aida@gmail.com> wrote:
>
> Hi guys!
>
> does there exist a way to define some threshold on the terms I wanna stor=
e
> in the index(before they are indexed). I need to store the terms =A0with
> higheest frequencies. I done it with term vectors and some cutoff ratio t=
hat
> cuts off the least occuring terms, but all this is, ofcourse works during
> retrieval time, reading from index.
>
> I know it make no sense to be able to calculate frequencies of the terms
> before they are stored, but i guess there could be some way to work it
> around???
>
> All hellp appreciated!
>
> Thank you!
> --
> View this message in context: http://lucene.472066.n3.nabble.com/Applying=
-term-frequency-thresholds-on-indexing-time-tp839449p839449.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46219-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 25 09:42:43 2010
Return-Path: <java-user-return-46219-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8135 invoked from network); 25 May 2010 09:42:42 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 May 2010 09:42:42 -0000
Received: (qmail 81439 invoked by uid 500); 25 May 2010 09:42:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81253 invoked by uid 500); 25 May 2010 09:42:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81232 invoked by uid 99); 25 May 2010 09:42:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 May 2010 09:42:36 +0000
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=AWL,SPF_HELO_PASS,SPF_SOFTFAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: softfail (athena.apache.org: transitioning domain of regan.heath@bridgeheadsoftware.com does not designate 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 May 2010 09:42:31 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <regan.heath@BridgeHeadSoftware.com>)
	id 1OGqeH-0000PX-M3
	for java-user@lucene.apache.org; Tue, 25 May 2010 02:42:09 -0700
Date: Tue, 25 May 2010 02:42:09 -0700 (PDT)
From: Regan Heath <regan.heath@BridgeHeadSoftware.com>
To: java-user@lucene.apache.org
Message-ID: <1274780529673-841735.post@n3.nabble.com>
Subject: indexWriter.addIndexes, Disk space, and open files
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


Hi,

Appologies if this the wrong place to post this, or if it has been answered
somewhere (I have searched and failed to find anything matching my case
exactly).

We're using Lucene 2.3.2 (an old version, I know).

We have a system where we use a number of master indexes and a number of
temp indexes.  At some point we will decide to perform a merge, where we
select a single master index and all (or as many temp indexes as will fit -
based on a given max size) temp indexes, opening IndexReaders for each.

<code condensed for clarity>

for(String tempIndexPath: tempIndexPaths)
{
  reader = IndexReader.open(tempIndexPath);
  readers.add(reader);
}

IndexReader[] result = new IndexReader[readers.size()];        
return readers.toArray(result);

We then create a new index with IndexWriter and call addIndexes passing the
array of IndexReaders.

<code condensed for clarity>

  File mergeMasterIndex = ...
  ...
  indexWriter = new IndexWriter(mergeMasterIndex, new StandardAnalyzer(),
true);
  indexWriter.setMaxBufferedDocs(-1);
  indexWriter.setMaxMergeDocs(2147483647);
  indexWriter.setMergeFactor(10);
  indexWriter.setMaxFieldLength(10000);
  indexWriter.addIndexes(indexReaders);
  indexWriter.optimize();  

This throws an IOException, due to lack of disk space (testing with small
indexes and a virtual 10mb disk..
http://www.ltr-data.se/opencode.html#ImDisk)

At this point we close all the readers, and the writer and attempt to
cleanup/delete the 'failed' new index directory and files.  The problem is
that there are some files being held open, specifically; _0.prx, _0.tii,
_o.tis.

There are no other readers or searchers open to this 'new' index, as it has
just been created.  There are no readers/searchers open to the temp indexes
being merged (we never search temp indexes), there may be a searcher open to
the master index selected for the merge.

So.. I am hoping someone can give me a clue as to why there are files being
held open, whether this is a known bug and fixed in a specific version of
lucene or if there is something I can do to force these files closed.

I have tried the writer.close();  IndexReader.isLocked(directory);
IndexReader.unlock(directory); trick, isLocked returns false, even ignoring
that and calling unlock anyway made no difference (I think it threw an
AlreadyClosedException or similar).

The exception stack trace...

java.io.IOException: There is not enough space on the disk
	at java.io.RandomAccessFile.writeBytes(Native Method)
	at java.io.RandomAccessFile.write(Unknown Source)
	at
org.apache.lucene.store.FSDirectory$FSIndexOutput.flushBuffer(FSDirectory.java:599)
	at
org.apache.lucene.store.BufferedIndexOutput.flushBuffer(BufferedIndexOutput.java:96)
	at
org.apache.lucene.store.BufferedIndexOutput.flush(BufferedIndexOutput.java:85)
	at
org.apache.lucene.store.BufferedIndexOutput.close(BufferedIndexOutput.java:109)
	at
org.apache.lucene.store.FSDirectory$FSIndexOutput.close(FSDirectory.java:606)
	at org.apache.lucene.index.SegmentMerger.mergeTerms(SegmentMerger.java:398)
	at org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:134)
	at org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:110)
	at org.apache.lucene.index.IndexWriter.addIndexes(IndexWriter.java:2428)
	at com.bridgehead.index.ApplicationIndex.merge(ApplicationIndex.java:506)
	at
com.bridgehead.index.ServerThread.serviceMergeIndex(ServerThread.java:918)
	at com.bridgehead.index.ServerThread.run(ServerThread.java:266)

Info stream..

IFD [ServerThread:/10.193.221.75:3821]: setInfoStream
deletionPolicy=org.apache.lucene.index.KeepOnlyLastCommitDeletionPolicy@133796
IW 0 [ServerThread:/10.193.221.75:3821]: setInfoStream:
dir=org.apache.lucene.store.FSDirectory@F:\Master\14.merge autoCommit=true
mergePolicy=org.apache.lucene.index.LogByteSizeMergePolicy@1a679b7
mergeScheduler=org.apache.lucene.index.ConcurrentMergeScheduler@80f4cb
ramBufferSizeMB=16.0 maxBuffereDocs=-1 maxBuffereDeleteTerms=-1
maxFieldLength=10000 index=
IW 0 [ServerThread:/10.193.221.75:3821]: optimize: index now 
IW 0 [ServerThread:/10.193.221.75:3821]:   flush: segment=null
docStoreSegment=null docStoreOffset=0 flushDocs=false flushDeletes=false
flushDocStores=false numDocs=0 numBufDelTerms=0
IW 0 [ServerThread:/10.193.221.75:3821]:   index before flush 
IW 0 [ServerThread:/10.193.221.75:3821]: CMS: now merge
IW 0 [ServerThread:/10.193.221.75:3821]: CMS:   index: 
IW 0 [ServerThread:/10.193.221.75:3821]: CMS:   no more merges pending; now
return
IW 0 [ServerThread:/10.193.221.75:3821]: now start transaction
IW 0 [ServerThread:/10.193.221.75:3821]: flush at startTransaction
IW 0 [ServerThread:/10.193.221.75:3821]:   flush: segment=null
docStoreSegment=null docStoreOffset=0 flushDocs=false flushDeletes=false
flushDocStores=false numDocs=0 numBufDelTerms=0
IW 0 [ServerThread:/10.193.221.75:3821]:   index before flush 
IW 0 [ServerThread:/10.193.221.75:3821]: hit exception in addIndexes during
merge
IW 0 [ServerThread:/10.193.221.75:3821]: now rollback transaction
IFD [ServerThread:/10.193.221.75:3821]: now checkpoint "segments_1" [0
segments ; isCommit = false]
IFD [ServerThread:/10.193.221.75:3821]: refresh [prefix=null]: removing
newly created unreferenced file "_0.fdt"
IFD [ServerThread:/10.193.221.75:3821]: delete "_0.fdt"
IFD [ServerThread:/10.193.221.75:3821]: refresh [prefix=null]: removing
newly created unreferenced file "_0.fdx"
IFD [ServerThread:/10.193.221.75:3821]: delete "_0.fdx"
IFD [ServerThread:/10.193.221.75:3821]: refresh [prefix=null]: removing
newly created unreferenced file "_0.fnm"
IFD [ServerThread:/10.193.221.75:3821]: delete "_0.fnm"
IFD [ServerThread:/10.193.221.75:3821]: refresh [prefix=null]: removing
newly created unreferenced file "_0.frq"
IFD [ServerThread:/10.193.221.75:3821]: delete "_0.frq"
IFD [ServerThread:/10.193.221.75:3821]: refresh [prefix=null]: removing
newly created unreferenced file "_0.prx"
IFD [ServerThread:/10.193.221.75:3821]: delete "_0.prx"
IFD [ServerThread:/10.193.221.75:3821]: IndexFileDeleter: unable to remove
file "_0.prx": java.io.IOException: Cannot delete F:\Master\14.merge\_0.prx;
Will re-try later.
IFD [ServerThread:/10.193.221.75:3821]: refresh [prefix=null]: removing
newly created unreferenced file "_0.tii"
IFD [ServerThread:/10.193.221.75:3821]: delete "_0.tii"
IFD [ServerThread:/10.193.221.75:3821]: IndexFileDeleter: unable to remove
file "_0.tii": java.io.IOException: Cannot delete F:\Master\14.merge\_0.tii;
Will re-try later.
IFD [ServerThread:/10.193.221.75:3821]: refresh [prefix=null]: removing
newly created unreferenced file "_0.tis"
IFD [ServerThread:/10.193.221.75:3821]: delete "_0.tis"
IFD [ServerThread:/10.193.221.75:3821]: IndexFileDeleter: unable to remove
file "_0.tis": java.io.IOException: Cannot delete F:\Master\14.merge\_0.tis;
Will re-try later.
IW 0 [ServerThread:/10.193.221.75:3821]: all running merges have aborted
IW 0 [ServerThread:/10.193.221.75:3821]: now flush at close
IW 0 [ServerThread:/10.193.221.75:3821]:   flush: segment=null
docStoreSegment=null docStoreOffset=0 flushDocs=false flushDeletes=false
flushDocStores=false numDocs=0 numBufDelTerms=0
IW 0 [ServerThread:/10.193.221.75:3821]:   index before flush 
IW 0 [ServerThread:/10.193.221.75:3821]: CMS: now merge
IW 0 [ServerThread:/10.193.221.75:3821]: CMS:   index: 
IW 0 [ServerThread:/10.193.221.75:3821]: CMS:   no more merges pending; now
return
IW 0 [ServerThread:/10.193.221.75:3821]: close: wrote segments file
"segments_2"
IFD [ServerThread:/10.193.221.75:3821]: now checkpoint "segments_2" [0
segments ; isCommit = true]
IFD [ServerThread:/10.193.221.75:3821]: delete pending file _0.prx
IFD [ServerThread:/10.193.221.75:3821]: delete "_0.prx"
IFD [ServerThread:/10.193.221.75:3821]: IndexFileDeleter: unable to remove
file "_0.prx": java.io.IOException: Cannot delete F:\Master\14.merge\_0.prx;
Will re-try later.
IFD [ServerThread:/10.193.221.75:3821]: delete pending file _0.tii
IFD [ServerThread:/10.193.221.75:3821]: delete "_0.tii"
IFD [ServerThread:/10.193.221.75:3821]: IndexFileDeleter: unable to remove
file "_0.tii": java.io.IOException: Cannot delete F:\Master\14.merge\_0.tii;
Will re-try later.
IFD [ServerThread:/10.193.221.75:3821]: delete pending file _0.tis
IFD [ServerThread:/10.193.221.75:3821]: delete "_0.tis"
IFD [ServerThread:/10.193.221.75:3821]: IndexFileDeleter: unable to remove
file "_0.tis": java.io.IOException: Cannot delete F:\Master\14.merge\_0.tis;
Will re-try later.
IFD [ServerThread:/10.193.221.75:3821]: deleteCommits: now remove commit
"segments_1"
IFD [ServerThread:/10.193.221.75:3821]: delete "segments_1"
IW 0 [ServerThread:/10.193.221.75:3821]: at close: 
IFD [ServerThread:/10.193.221.75:3821]: delete pending file _0.prx
IFD [ServerThread:/10.193.221.75:3821]: delete "_0.prx"
IFD [ServerThread:/10.193.221.75:3821]: IndexFileDeleter: unable to remove
file "_0.prx": java.io.IOException: Cannot delete F:\Master\14.merge\_0.prx;
Will re-try later.
IFD [ServerThread:/10.193.221.75:3821]: delete pending file _0.tii
IFD [ServerThread:/10.193.221.75:3821]: delete "_0.tii"
IFD [ServerThread:/10.193.221.75:3821]: IndexFileDeleter: unable to remove
file "_0.tii": java.io.IOException: Cannot delete F:\Master\14.merge\_0.tii;
Will re-try later.
IFD [ServerThread:/10.193.221.75:3821]: delete pending file _0.tis
IFD [ServerThread:/10.193.221.75:3821]: delete "_0.tis"
IFD [ServerThread:/10.193.221.75:3821]: IndexFileDeleter: unable to remove
file "_0.tis": java.io.IOException: Cannot delete F:\Master\14.merge\_0.tis;
Will re-try later.



-- 
View this message in context: http://lucene.472066.n3.nabble.com/indexWriter-addIndexes-Disk-space-and-open-files-tp841735p841735.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46220-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 25 12:16:26 2010
Return-Path: <java-user-return-46220-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61538 invoked from network); 25 May 2010 12:16:26 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 May 2010 12:16:26 -0000
Received: (qmail 17180 invoked by uid 500); 25 May 2010 12:16:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17102 invoked by uid 500); 25 May 2010 12:16:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17094 invoked by uid 99); 25 May 2010 12:16:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 May 2010 12:16:23 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of oren.liat@gmail.com designates 72.14.220.157 as permitted sender)
Received: from [72.14.220.157] (HELO fg-out-1718.google.com) (72.14.220.157)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 May 2010 12:16:15 +0000
Received: by fg-out-1718.google.com with SMTP id l26so249902fgb.5
        for <java-user@lucene.apache.org>; Tue, 25 May 2010 05:15:55 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=xXr32cCXp79E85zqyrYocqpzVtz+dbJkJGfRuiEWmgs=;
        b=CxqsJwbA6sfrqzgq0V62dDhs1SjnfLHqytWF/eQjCd0L1IbmY9MU5YLB/wnu1H6Am2
         ahUo0vEqESN9FB2W5gGirTaOqMXZKtGjD3qYBhdtxmiXvNJnxEo1Z6m46Z6gp/qkZMFQ
         EDfpWzUhdFXGYgYM4Jh+heXHEZFwcZkoZyrNM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=NxMMQHr/hzfhw2h03WLAels1e1nem01Wk3xPo4f9nS4RUsbRc9G4XCDJG9L6OdN19a
         H6rCjSbNGQStoLDOjrLjsWsgM8oMbJV5Q1JB7U7BfEuPZcyVB3pAw8Sf4wJ4QI0a0+9R
         HUyoLQUQ3AZMjVA8pu9SuI1pfmegAB6nsF+hM=
MIME-Version: 1.0
Received: by 10.102.254.26 with SMTP id b26mr202767mui.118.1274789755508; Tue, 
	25 May 2010 05:15:55 -0700 (PDT)
Received: by 10.103.247.1 with HTTP; Tue, 25 May 2010 05:15:55 -0700 (PDT)
In-Reply-To: <AANLkTimIKHIZFqw0BfFhWULMxvS96luEypcNae0zPXP6@mail.gmail.com>
References: <AANLkTimIKHIZFqw0BfFhWULMxvS96luEypcNae0zPXP6@mail.gmail.com>
Date: Tue, 25 May 2010 15:15:55 +0300
Message-ID: <AANLkTikewSF_JbtQlcgzZd-CHWBRQrG941-u6wEUJhJx@mail.gmail.com>
Subject: Add more than 1 filter on a search
From: liat oren <oren.liat@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016364265758a564304876a1ec8
X-Virus-Checked: Checked by ClamAV on apache.org

--0016364265758a564304876a1ec8
Content-Type: text/plain; charset=ISO-8859-1

 Hi,

I would like to have more than 1 filter on a query - I have two range
filters, and some filters on other fields.
What is the best way to do it?

Many thanks,
liat

--0016364265758a564304876a1ec8--

From java-user-return-46221-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 25 12:40:09 2010
Return-Path: <java-user-return-46221-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73999 invoked from network); 25 May 2010 12:40:08 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 May 2010 12:40:08 -0000
Received: (qmail 77581 invoked by uid 500); 25 May 2010 12:40:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77530 invoked by uid 500); 25 May 2010 12:40:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77522 invoked by uid 99); 25 May 2010 12:40:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 May 2010 12:40:06 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 May 2010 12:39:58 +0000
Received: by fxm16 with SMTP id 16so3819722fxm.35
        for <java-user@lucene.apache.org>; Tue, 25 May 2010 05:39:38 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=xEdb28q0jvSjuWT/M6pc57aOVR/Z6HJ9YWcqUsZzfaU=;
        b=jr5ETUi95y6221BMiy7h7UtJvi+A2Bbyyk96bwNYlOjwY7L131uCOeCCKCxafPcu2+
         Ag1HKwyILzElVbmj+F4XlvYNrOV6MEG67mk/da3RgTgU9/cJ6oaeiNb3OufhkfDLWFn9
         dKSmVliDGTaSbVX7Y5nmcChGs55D7S62iKfhA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=rQYHVInE6DI+fj+WWpjoflHTQwryG5Upph8YhmuZGHxcfLcUPn9fvpu2//rSvTrRkA
         WZXtS0SeXaI2IyjatxvguLBmshdG+9+pLQBTLl8JSkW1pbpL3bwJscI5GMFWUS9zGcEo
         zL7sH6jCVowXDY85+jERqQ0SjO6SoGDLnj/r8=
Received: by 10.204.6.203 with SMTP id a11mr2708227bka.8.1274791178518; Tue, 
	25 May 2010 05:39:38 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.54.198 with HTTP; Tue, 25 May 2010 05:39:18 -0700 (PDT)
In-Reply-To: <AANLkTikewSF_JbtQlcgzZd-CHWBRQrG941-u6wEUJhJx@mail.gmail.com>
References: <AANLkTimIKHIZFqw0BfFhWULMxvS96luEypcNae0zPXP6@mail.gmail.com> 
	<AANLkTikewSF_JbtQlcgzZd-CHWBRQrG941-u6wEUJhJx@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Tue, 25 May 2010 13:39:18 +0100
Message-ID: <AANLkTikz40ZjYbrYiXm0jpjPVkEH2zVoSDD9oycqYzEy@mail.gmail.com>
Subject: Re: Add more than 1 filter on a search
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

org.apache.lucene.misc.ChainedFilter in contrib.


--
Ian.



On Tue, May 25, 2010 at 1:15 PM, liat oren <oren.liat@gmail.com> wrote:
> =A0Hi,
>
> I would like to have more than 1 filter on a query - I have two range
> filters, and some filters on other fields.
> What is the best way to do it?
>
> Many thanks,
> liat
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46222-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 25 12:47:11 2010
Return-Path: <java-user-return-46222-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75984 invoked from network); 25 May 2010 12:47:10 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 May 2010 12:47:10 -0000
Received: (qmail 92749 invoked by uid 500); 25 May 2010 12:47:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92682 invoked by uid 500); 25 May 2010 12:47:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92674 invoked by uid 99); 25 May 2010 12:47:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 May 2010 12:47:08 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of oren.liat@gmail.com designates 72.14.220.154 as permitted sender)
Received: from [72.14.220.154] (HELO fg-out-1718.google.com) (72.14.220.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 May 2010 12:47:01 +0000
Received: by fg-out-1718.google.com with SMTP id 16so1438585fgg.5
        for <java-user@lucene.apache.org>; Tue, 25 May 2010 05:46:40 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=F2sQobqgiI5L8P37UT7vJZUF/o9JU5HnGSmJJY83FBY=;
        b=GROmCB7TdR6UMY+2myrM+9McX6T+nBeSuFHSHUTZGfN/xoPHiEZ1vRNmlMM8MdRwYw
         PCwhzflKd+/7HJUdAsGqJRw2Ofsa1lhsyiWqeOEwQvZRDrO1y/6VcR7nFa7sU0EL8PAJ
         fE8CiJPmiWQBbngyY5Srw2yog55pC2C3iVM2o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=xG0dU8HJH41QMr7CUUSONtSQ9MWkZgfGGVFw7D25/tpVGqKu+mfF/oTVuPJhlFXdBp
         HTMoL0x/hZzpSTsy4gz2PyLsLX58Q9kqS1KxcBseeB36ofoP1jNOyPEXa3drWKIKCb3U
         CxAScCh014F0o4MCxbCVye3ZdhuhaFHWKnBYg=
MIME-Version: 1.0
Received: by 10.102.15.3 with SMTP id 3mr5397051muo.52.1274791600704; Tue, 25 
	May 2010 05:46:40 -0700 (PDT)
Received: by 10.103.247.1 with HTTP; Tue, 25 May 2010 05:46:40 -0700 (PDT)
In-Reply-To: <AANLkTikz40ZjYbrYiXm0jpjPVkEH2zVoSDD9oycqYzEy@mail.gmail.com>
References: <AANLkTimIKHIZFqw0BfFhWULMxvS96luEypcNae0zPXP6@mail.gmail.com>
	 <AANLkTikewSF_JbtQlcgzZd-CHWBRQrG941-u6wEUJhJx@mail.gmail.com>
	 <AANLkTikz40ZjYbrYiXm0jpjPVkEH2zVoSDD9oycqYzEy@mail.gmail.com>
Date: Tue, 25 May 2010 15:46:40 +0300
Message-ID: <AANLkTilkkwa1_0ZVqSky2KyaYwDHWUO0tlOi6WFkKOmB@mail.gmail.com>
Subject: Re: Add more than 1 filter on a search
From: liat oren <oren.liat@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636499f4f85cecc04876a8cc4
X-Virus-Checked: Checked by ClamAV on apache.org

--001636499f4f85cecc04876a8cc4
Content-Type: text/plain; charset=ISO-8859-1

Thanks a lot!

Have a nice day,
Liat

On 25 May 2010 15:39, Ian Lea <ian.lea@gmail.com> wrote:

> org.apache.lucene.misc.ChainedFilter in contrib.
>
>
> --
> Ian.
>
>
>
> On Tue, May 25, 2010 at 1:15 PM, liat oren <oren.liat@gmail.com> wrote:
> >  Hi,
> >
> > I would like to have more than 1 filter on a query - I have two range
> > filters, and some filters on other fields.
> > What is the best way to do it?
> >
> > Many thanks,
> > liat
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001636499f4f85cecc04876a8cc4--

From java-user-return-46223-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 25 13:17:08 2010
Return-Path: <java-user-return-46223-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92948 invoked from network); 25 May 2010 13:17:08 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 May 2010 13:17:08 -0000
Received: (qmail 74361 invoked by uid 500); 25 May 2010 13:17:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74292 invoked by uid 500); 25 May 2010 13:17:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74284 invoked by uid 99); 25 May 2010 13:17:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 May 2010 13:17:05 +0000
X-ASF-Spam-Status: No, hits=3.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,NORMAL_HTTP_TO_IP,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL,URI_HEX,WEIRD_PORT
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 74.125.83.48 as permitted sender)
Received: from [74.125.83.48] (HELO mail-gw0-f48.google.com) (74.125.83.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 May 2010 13:16:58 +0000
Received: by gwj23 with SMTP id 23so1505358gwj.35
        for <java-user@lucene.apache.org>; Tue, 25 May 2010 06:16:37 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=VDoCOciOjpaf5PITs43idpIx9jUCMhYP6vDcq4K9dAc=;
        b=kND0JFAYmx0qBxZVVfPsI15lFWMdj43mgv/p2DhRDSvyP0eG+p5OWwDCS3amFzicaB
         lmxrAE+osAVV+4kRQGr5lhyhhrSONddf3KJJ0eFDN7GHL4or9EoUFhiP/9r0pzpQxhXR
         IQtpdPN+ULRLc2pkJ/ubMz5cdpMBqyZDB0Dkg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=LCwYmTCckhYZjeu+x6VkhTK6R2PAL6heoAdNj3589X5MJTpXFaxAPEC/pd1ywKblE1
         77sQiE52UVnIcQhbW0RawuACoewXT/sMck/t+y8VZKPPNmWUznPX1vhWzNSfV2hKWq5G
         o2o8M1ORSISVlT3Y5kMDEofRa/LjsIn8m60+o=
MIME-Version: 1.0
Received: by 10.150.104.2 with SMTP id b2mr7888735ybc.162.1274793397100; Tue, 
	25 May 2010 06:16:37 -0700 (PDT)
Received: by 10.151.43.7 with HTTP; Tue, 25 May 2010 06:16:37 -0700 (PDT)
In-Reply-To: <1274780529673-841735.post@n3.nabble.com>
References: <1274780529673-841735.post@n3.nabble.com>
Date: Tue, 25 May 2010 09:16:37 -0400
Message-ID: <AANLkTikLbtYDza9PYACV3ioC-ia0Y1-COBchbCpNo-Fb@mail.gmail.com>
Subject: Re: indexWriter.addIndexes, Disk space, and open files
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd47f1098a30804876af79c
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd47f1098a30804876af79c
Content-Type: text/plain; charset=ISO-8859-1

What op system and what file system are you using? Is the file system local
or
networked?

What does it take to remove the files. That is, can you do it manually after
the
program shuts down?

Best
Erick

On Tue, May 25, 2010 at 5:42 AM, Regan Heath <
regan.heath@bridgeheadsoftware.com> wrote:

>
> Hi,
>
> Appologies if this the wrong place to post this, or if it has been answered
> somewhere (I have searched and failed to find anything matching my case
> exactly).
>
> We're using Lucene 2.3.2 (an old version, I know).
>
> We have a system where we use a number of master indexes and a number of
> temp indexes.  At some point we will decide to perform a merge, where we
> select a single master index and all (or as many temp indexes as will fit -
> based on a given max size) temp indexes, opening IndexReaders for each.
>
> <code condensed for clarity>
>
> for(String tempIndexPath: tempIndexPaths)
> {
>  reader = IndexReader.open(tempIndexPath);
>  readers.add(reader);
> }
>
> IndexReader[] result = new IndexReader[readers.size()];
> return readers.toArray(result);
>
> We then create a new index with IndexWriter and call addIndexes passing the
> array of IndexReaders.
>
> <code condensed for clarity>
>
>  File mergeMasterIndex = ...
>  ...
>  indexWriter = new IndexWriter(mergeMasterIndex, new StandardAnalyzer(),
> true);
>  indexWriter.setMaxBufferedDocs(-1);
>  indexWriter.setMaxMergeDocs(2147483647);
>  indexWriter.setMergeFactor(10);
>  indexWriter.setMaxFieldLength(10000);
>  indexWriter.addIndexes(indexReaders);
>  indexWriter.optimize();
>
> This throws an IOException, due to lack of disk space (testing with small
> indexes and a virtual 10mb disk..
> http://www.ltr-data.se/opencode.html#ImDisk)
>
> At this point we close all the readers, and the writer and attempt to
> cleanup/delete the 'failed' new index directory and files.  The problem is
> that there are some files being held open, specifically; _0.prx, _0.tii,
> _o.tis.
>
> There are no other readers or searchers open to this 'new' index, as it has
> just been created.  There are no readers/searchers open to the temp indexes
> being merged (we never search temp indexes), there may be a searcher open
> to
> the master index selected for the merge.
>
> So.. I am hoping someone can give me a clue as to why there are files being
> held open, whether this is a known bug and fixed in a specific version of
> lucene or if there is something I can do to force these files closed.
>
> I have tried the writer.close();  IndexReader.isLocked(directory);
> IndexReader.unlock(directory); trick, isLocked returns false, even ignoring
> that and calling unlock anyway made no difference (I think it threw an
> AlreadyClosedException or similar).
>
> The exception stack trace...
>
> java.io.IOException: There is not enough space on the disk
>        at java.io.RandomAccessFile.writeBytes(Native Method)
>        at java.io.RandomAccessFile.write(Unknown Source)
>        at
>
> org.apache.lucene.store.FSDirectory$FSIndexOutput.flushBuffer(FSDirectory.java:599)
>        at
>
> org.apache.lucene.store.BufferedIndexOutput.flushBuffer(BufferedIndexOutput.java:96)
>        at
>
> org.apache.lucene.store.BufferedIndexOutput.flush(BufferedIndexOutput.java:85)
>        at
>
> org.apache.lucene.store.BufferedIndexOutput.close(BufferedIndexOutput.java:109)
>        at
>
> org.apache.lucene.store.FSDirectory$FSIndexOutput.close(FSDirectory.java:606)
>        at
> org.apache.lucene.index.SegmentMerger.mergeTerms(SegmentMerger.java:398)
>        at
> org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:134)
>        at
> org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:110)
>        at
> org.apache.lucene.index.IndexWriter.addIndexes(IndexWriter.java:2428)
>        at
> com.bridgehead.index.ApplicationIndex.merge(ApplicationIndex.java:506)
>        at
> com.bridgehead.index.ServerThread.serviceMergeIndex(ServerThread.java:918)
>        at com.bridgehead.index.ServerThread.run(ServerThread.java:266)
>
> Info stream..
>
> IFD [ServerThread:/10.193.221.75:3821]: setInfoStream
>
> deletionPolicy=org.apache.lucene.index.KeepOnlyLastCommitDeletionPolicy@133796
> IW 0 [ServerThread:/10.193.221.75:3821]: setInfoStream:
> dir=org.apache.lucene.store.FSDirectory@F:\Master\14.merge autoCommit=true
> mergePolicy=org.apache.lucene.index.LogByteSizeMergePolicy@1a679b7
> mergeScheduler=org.apache.lucene.index.ConcurrentMergeScheduler@80f4cb
> ramBufferSizeMB=16.0 maxBuffereDocs=-1 maxBuffereDeleteTerms=-1
> maxFieldLength=10000 index=
> IW 0 [ServerThread:/10.193.221.75:3821]: optimize: index now
> IW 0 [ServerThread:/10.193.221.75:3821]:   flush: segment=null
> docStoreSegment=null docStoreOffset=0 flushDocs=false flushDeletes=false
> flushDocStores=false numDocs=0 numBufDelTerms=0
> IW 0 [ServerThread:/10.193.221.75:3821]:   index before flush
> IW 0 [ServerThread:/10.193.221.75:3821]: CMS: now merge
> IW 0 [ServerThread:/10.193.221.75:3821]: CMS:   index:
> IW 0 [ServerThread:/10.193.221.75:3821]: CMS:   no more merges pending;
> now
> return
> IW 0 [ServerThread:/10.193.221.75:3821]: now start transaction
> IW 0 [ServerThread:/10.193.221.75:3821]: flush at startTransaction
> IW 0 [ServerThread:/10.193.221.75:3821]:   flush: segment=null
> docStoreSegment=null docStoreOffset=0 flushDocs=false flushDeletes=false
> flushDocStores=false numDocs=0 numBufDelTerms=0
> IW 0 [ServerThread:/10.193.221.75:3821]:   index before flush
> IW 0 [ServerThread:/10.193.221.75:3821]: hit exception in addIndexes
> during
> merge
> IW 0 [ServerThread:/10.193.221.75:3821]: now rollback transaction
> IFD [ServerThread:/10.193.221.75:3821]: now checkpoint "segments_1" [0
> segments ; isCommit = false]
> IFD [ServerThread:/10.193.221.75:3821]: refresh [prefix=null]: removing
> newly created unreferenced file "_0.fdt"
> IFD [ServerThread:/10.193.221.75:3821]: delete "_0.fdt"
> IFD [ServerThread:/10.193.221.75:3821]: refresh [prefix=null]: removing
> newly created unreferenced file "_0.fdx"
> IFD [ServerThread:/10.193.221.75:3821]: delete "_0.fdx"
> IFD [ServerThread:/10.193.221.75:3821]: refresh [prefix=null]: removing
> newly created unreferenced file "_0.fnm"
> IFD [ServerThread:/10.193.221.75:3821]: delete "_0.fnm"
> IFD [ServerThread:/10.193.221.75:3821]: refresh [prefix=null]: removing
> newly created unreferenced file "_0.frq"
> IFD [ServerThread:/10.193.221.75:3821]: delete "_0.frq"
> IFD [ServerThread:/10.193.221.75:3821]: refresh [prefix=null]: removing
> newly created unreferenced file "_0.prx"
> IFD [ServerThread:/10.193.221.75:3821]: delete "_0.prx"
> IFD [ServerThread:/10.193.221.75:3821]: IndexFileDeleter: unable to remove
> file "_0.prx": java.io.IOException: Cannot delete
> F:\Master\14.merge\_0.prx;
> Will re-try later.
> IFD [ServerThread:/10.193.221.75:3821]: refresh [prefix=null]: removing
> newly created unreferenced file "_0.tii"
> IFD [ServerThread:/10.193.221.75:3821]: delete "_0.tii"
> IFD [ServerThread:/10.193.221.75:3821]: IndexFileDeleter: unable to remove
> file "_0.tii": java.io.IOException: Cannot delete
> F:\Master\14.merge\_0.tii;
> Will re-try later.
> IFD [ServerThread:/10.193.221.75:3821]: refresh [prefix=null]: removing
> newly created unreferenced file "_0.tis"
> IFD [ServerThread:/10.193.221.75:3821]: delete "_0.tis"
> IFD [ServerThread:/10.193.221.75:3821]: IndexFileDeleter: unable to remove
> file "_0.tis": java.io.IOException: Cannot delete
> F:\Master\14.merge\_0.tis;
> Will re-try later.
> IW 0 [ServerThread:/10.193.221.75:3821]: all running merges have aborted
> IW 0 [ServerThread:/10.193.221.75:3821]: now flush at close
> IW 0 [ServerThread:/10.193.221.75:3821]:   flush: segment=null
> docStoreSegment=null docStoreOffset=0 flushDocs=false flushDeletes=false
> flushDocStores=false numDocs=0 numBufDelTerms=0
> IW 0 [ServerThread:/10.193.221.75:3821]:   index before flush
> IW 0 [ServerThread:/10.193.221.75:3821]: CMS: now merge
> IW 0 [ServerThread:/10.193.221.75:3821]: CMS:   index:
> IW 0 [ServerThread:/10.193.221.75:3821]: CMS:   no more merges pending;
> now
> return
> IW 0 [ServerThread:/10.193.221.75:3821]: close: wrote segments file
> "segments_2"
> IFD [ServerThread:/10.193.221.75:3821]: now checkpoint "segments_2" [0
> segments ; isCommit = true]
> IFD [ServerThread:/10.193.221.75:3821]: delete pending file _0.prx
> IFD [ServerThread:/10.193.221.75:3821]: delete "_0.prx"
> IFD [ServerThread:/10.193.221.75:3821]: IndexFileDeleter: unable to remove
> file "_0.prx": java.io.IOException: Cannot delete
> F:\Master\14.merge\_0.prx;
> Will re-try later.
> IFD [ServerThread:/10.193.221.75:3821]: delete pending file _0.tii
> IFD [ServerThread:/10.193.221.75:3821]: delete "_0.tii"
> IFD [ServerThread:/10.193.221.75:3821]: IndexFileDeleter: unable to remove
> file "_0.tii": java.io.IOException: Cannot delete
> F:\Master\14.merge\_0.tii;
> Will re-try later.
> IFD [ServerThread:/10.193.221.75:3821]: delete pending file _0.tis
> IFD [ServerThread:/10.193.221.75:3821]: delete "_0.tis"
> IFD [ServerThread:/10.193.221.75:3821]: IndexFileDeleter: unable to remove
> file "_0.tis": java.io.IOException: Cannot delete
> F:\Master\14.merge\_0.tis;
> Will re-try later.
> IFD [ServerThread:/10.193.221.75:3821]: deleteCommits: now remove commit
> "segments_1"
> IFD [ServerThread:/10.193.221.75:3821]: delete "segments_1"
> IW 0 [ServerThread:/10.193.221.75:3821]: at close:
> IFD [ServerThread:/10.193.221.75:3821]: delete pending file _0.prx
> IFD [ServerThread:/10.193.221.75:3821]: delete "_0.prx"
> IFD [ServerThread:/10.193.221.75:3821]: IndexFileDeleter: unable to remove
> file "_0.prx": java.io.IOException: Cannot delete
> F:\Master\14.merge\_0.prx;
> Will re-try later.
> IFD [ServerThread:/10.193.221.75:3821]: delete pending file _0.tii
> IFD [ServerThread:/10.193.221.75:3821]: delete "_0.tii"
> IFD [ServerThread:/10.193.221.75:3821]: IndexFileDeleter: unable to remove
> file "_0.tii": java.io.IOException: Cannot delete
> F:\Master\14.merge\_0.tii;
> Will re-try later.
> IFD [ServerThread:/10.193.221.75:3821]: delete pending file _0.tis
> IFD [ServerThread:/10.193.221.75:3821]: delete "_0.tis"
> IFD [ServerThread:/10.193.221.75:3821]: IndexFileDeleter: unable to remove
> file "_0.tis": java.io.IOException: Cannot delete
> F:\Master\14.merge\_0.tis;
> Will re-try later.
>
>
>
> --
> View this message in context:
> http://lucene.472066.n3.nabble.com/indexWriter-addIndexes-Disk-space-and-open-files-tp841735p841735.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd47f1098a30804876af79c--

From java-user-return-46224-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 25 15:08:44 2010
Return-Path: <java-user-return-46224-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49604 invoked from network); 25 May 2010 15:08:44 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 May 2010 15:08:44 -0000
Received: (qmail 12910 invoked by uid 500); 25 May 2010 15:08:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12885 invoked by uid 500); 25 May 2010 15:08:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12877 invoked by uid 99); 25 May 2010 15:08:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 May 2010 15:08:42 +0000
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=SPF_HELO_PASS,SPF_SOFTFAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: softfail (nike.apache.org: transitioning domain of regan.heath@bridgeheadsoftware.com does not designate 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 May 2010 15:08:35 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <regan.heath@BridgeHeadSoftware.com>)
	id 1OGvjq-00085H-K7
	for java-user@lucene.apache.org; Tue, 25 May 2010 08:08:14 -0700
Date: Tue, 25 May 2010 08:08:14 -0700 (PDT)
From: Regan Heath <regan.heath@BridgeHeadSoftware.com>
To: java-user@lucene.apache.org
Message-ID: <1274800094618-842321.post@n3.nabble.com>
In-Reply-To: <AANLkTikLbtYDza9PYACV3ioC-ia0Y1-COBchbCpNo-Fb@mail.gmail.com>
References: <1274780529673-841735.post@n3.nabble.com> <AANLkTikLbtYDza9PYACV3ioC-ia0Y1-COBchbCpNo-Fb@mail.gmail.com>
Subject: Re: indexWriter.addIndexes, Disk space, and open files
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


Windows XP.  

The problem occurs on the local file system, but to replicate it more easily
I am using http://www.ltr-data.se/opencode.html#ImDisk to mount a virtual
10mb disk on F:\.  It is formatted as an NTFS file system.

The files can be removed normally (delete from explorer or command prompt)
after program shut down.  In fact, the program cleans them up itself on
restart (an interim solution).

Process Explorer shows the program has handles to these three files open.


Erick Erickson wrote:
> 
> What op system and what file system are you using? Is the file system
> local
> or
> networked?
> 
> What does it take to remove the files. That is, can you do it manually
> after
> the
> program shuts down?
> 
> Best
> Erick
> 
> On Tue, May 25, 2010 at 5:42 AM, Regan Heath <
> regan.heath@bridgeheadsoftware.com> wrote:
> 
>>
>> Hi,
>>
>> Appologies if this the wrong place to post this, or if it has been
>> answered
>> somewhere (I have searched and failed to find anything matching my case
>> exactly).
>>
>> We're using Lucene 2.3.2 (an old version, I know).
>>
>> We have a system where we use a number of master indexes and a number of
>> temp indexes.  At some point we will decide to perform a merge, where we
>> select a single master index and all (or as many temp indexes as will fit
>> -
>> based on a given max size) temp indexes, opening IndexReaders for each.
>>
>> <code condensed for clarity>
>>
>> for(String tempIndexPath: tempIndexPaths)
>> {
>>  reader = IndexReader.open(tempIndexPath);
>>  readers.add(reader);
>> }
>>
>> IndexReader[] result = new IndexReader[readers.size()];
>> return readers.toArray(result);
>>
>> We then create a new index with IndexWriter and call addIndexes passing
>> the
>> array of IndexReaders.
>>
>> <code condensed for clarity>
>>
>>  File mergeMasterIndex = ...
>>  ...
>>  indexWriter = new IndexWriter(mergeMasterIndex, new StandardAnalyzer(),
>> true);
>>  indexWriter.setMaxBufferedDocs(-1);
>>  indexWriter.setMaxMergeDocs(2147483647);
>>  indexWriter.setMergeFactor(10);
>>  indexWriter.setMaxFieldLength(10000);
>>  indexWriter.addIndexes(indexReaders);
>>  indexWriter.optimize();
>>
>> This throws an IOException, due to lack of disk space (testing with small
>> indexes and a virtual 10mb disk..
>> http://www.ltr-data.se/opencode.html#ImDisk)
>>
>> At this point we close all the readers, and the writer and attempt to
>> cleanup/delete the 'failed' new index directory and files.  The problem
>> is
>> that there are some files being held open, specifically; _0.prx, _0.tii,
>> _o.tis.
>>
>> There are no other readers or searchers open to this 'new' index, as it
>> has
>> just been created.  There are no readers/searchers open to the temp
>> indexes
>> being merged (we never search temp indexes), there may be a searcher open
>> to
>> the master index selected for the merge.
>>
>> So.. I am hoping someone can give me a clue as to why there are files
>> being
>> held open, whether this is a known bug and fixed in a specific version of
>> lucene or if there is something I can do to force these files closed.
>>
>> I have tried the writer.close();  IndexReader.isLocked(directory);
>> IndexReader.unlock(directory); trick, isLocked returns false, even
>> ignoring
>> that and calling unlock anyway made no difference (I think it threw an
>> AlreadyClosedException or similar).
>>
>> The exception stack trace...
>>
>> java.io.IOException: There is not enough space on the disk
>>        at java.io.RandomAccessFile.writeBytes(Native Method)
>>        at java.io.RandomAccessFile.write(Unknown Source)
>>        at
>>
>> org.apache.lucene.store.FSDirectory$FSIndexOutput.flushBuffer(FSDirectory.java:599)
>>        at
>>
>> org.apache.lucene.store.BufferedIndexOutput.flushBuffer(BufferedIndexOutput.java:96)
>>        at
>>
>> org.apache.lucene.store.BufferedIndexOutput.flush(BufferedIndexOutput.java:85)
>>        at
>>
>> org.apache.lucene.store.BufferedIndexOutput.close(BufferedIndexOutput.java:109)
>>        at
>>
>> org.apache.lucene.store.FSDirectory$FSIndexOutput.close(FSDirectory.java:606)
>>        at
>> org.apache.lucene.index.SegmentMerger.mergeTerms(SegmentMerger.java:398)
>>        at
>> org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:134)
>>        at
>> org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:110)
>>        at
>> org.apache.lucene.index.IndexWriter.addIndexes(IndexWriter.java:2428)
>>        at
>> com.bridgehead.index.ApplicationIndex.merge(ApplicationIndex.java:506)
>>        at
>> com.bridgehead.index.ServerThread.serviceMergeIndex(ServerThread.java:918)
>>        at com.bridgehead.index.ServerThread.run(ServerThread.java:266)
>>
>> Info stream..
>>
>> IFD [ServerThread:/10.193.221.75:3821]: setInfoStream
>>
>> deletionPolicy=org.apache.lucene.index.KeepOnlyLastCommitDeletionPolicy@133796
>> IW 0 [ServerThread:/10.193.221.75:3821]: setInfoStream:
>> dir=org.apache.lucene.store.FSDirectory@F:\Master\14.merge
>> autoCommit=true
>> mergePolicy=org.apache.lucene.index.LogByteSizeMergePolicy@1a679b7
>> mergeScheduler=org.apache.lucene.index.ConcurrentMergeScheduler@80f4cb
>> ramBufferSizeMB=16.0 maxBuffereDocs=-1 maxBuffereDeleteTerms=-1
>> maxFieldLength=10000 index=
>> IW 0 [ServerThread:/10.193.221.75:3821]: optimize: index now
>> IW 0 [ServerThread:/10.193.221.75:3821]:   flush: segment=null
>> docStoreSegment=null docStoreOffset=0 flushDocs=false flushDeletes=false
>> flushDocStores=false numDocs=0 numBufDelTerms=0
>> IW 0 [ServerThread:/10.193.221.75:3821]:   index before flush
>> IW 0 [ServerThread:/10.193.221.75:3821]: CMS: now merge
>> IW 0 [ServerThread:/10.193.221.75:3821]: CMS:   index:
>> IW 0 [ServerThread:/10.193.221.75:3821]: CMS:   no more merges pending;
>> now
>> return
>> IW 0 [ServerThread:/10.193.221.75:3821]: now start transaction
>> IW 0 [ServerThread:/10.193.221.75:3821]: flush at startTransaction
>> IW 0 [ServerThread:/10.193.221.75:3821]:   flush: segment=null
>> docStoreSegment=null docStoreOffset=0 flushDocs=false flushDeletes=false
>> flushDocStores=false numDocs=0 numBufDelTerms=0
>> IW 0 [ServerThread:/10.193.221.75:3821]:   index before flush
>> IW 0 [ServerThread:/10.193.221.75:3821]: hit exception in addIndexes
>> during
>> merge
>> IW 0 [ServerThread:/10.193.221.75:3821]: now rollback transaction
>> IFD [ServerThread:/10.193.221.75:3821]: now checkpoint "segments_1" [0
>> segments ; isCommit = false]
>> IFD [ServerThread:/10.193.221.75:3821]: refresh [prefix=null]: removing
>> newly created unreferenced file "_0.fdt"
>> IFD [ServerThread:/10.193.221.75:3821]: delete "_0.fdt"
>> IFD [ServerThread:/10.193.221.75:3821]: refresh [prefix=null]: removing
>> newly created unreferenced file "_0.fdx"
>> IFD [ServerThread:/10.193.221.75:3821]: delete "_0.fdx"
>> IFD [ServerThread:/10.193.221.75:3821]: refresh [prefix=null]: removing
>> newly created unreferenced file "_0.fnm"
>> IFD [ServerThread:/10.193.221.75:3821]: delete "_0.fnm"
>> IFD [ServerThread:/10.193.221.75:3821]: refresh [prefix=null]: removing
>> newly created unreferenced file "_0.frq"
>> IFD [ServerThread:/10.193.221.75:3821]: delete "_0.frq"
>> IFD [ServerThread:/10.193.221.75:3821]: refresh [prefix=null]: removing
>> newly created unreferenced file "_0.prx"
>> IFD [ServerThread:/10.193.221.75:3821]: delete "_0.prx"
>> IFD [ServerThread:/10.193.221.75:3821]: IndexFileDeleter: unable to
>> remove
>> file "_0.prx": java.io.IOException: Cannot delete
>> F:\Master\14.merge\_0.prx;
>> Will re-try later.
>> IFD [ServerThread:/10.193.221.75:3821]: refresh [prefix=null]: removing
>> newly created unreferenced file "_0.tii"
>> IFD [ServerThread:/10.193.221.75:3821]: delete "_0.tii"
>> IFD [ServerThread:/10.193.221.75:3821]: IndexFileDeleter: unable to
>> remove
>> file "_0.tii": java.io.IOException: Cannot delete
>> F:\Master\14.merge\_0.tii;
>> Will re-try later.
>> IFD [ServerThread:/10.193.221.75:3821]: refresh [prefix=null]: removing
>> newly created unreferenced file "_0.tis"
>> IFD [ServerThread:/10.193.221.75:3821]: delete "_0.tis"
>> IFD [ServerThread:/10.193.221.75:3821]: IndexFileDeleter: unable to
>> remove
>> file "_0.tis": java.io.IOException: Cannot delete
>> F:\Master\14.merge\_0.tis;
>> Will re-try later.
>> IW 0 [ServerThread:/10.193.221.75:3821]: all running merges have aborted
>> IW 0 [ServerThread:/10.193.221.75:3821]: now flush at close
>> IW 0 [ServerThread:/10.193.221.75:3821]:   flush: segment=null
>> docStoreSegment=null docStoreOffset=0 flushDocs=false flushDeletes=false
>> flushDocStores=false numDocs=0 numBufDelTerms=0
>> IW 0 [ServerThread:/10.193.221.75:3821]:   index before flush
>> IW 0 [ServerThread:/10.193.221.75:3821]: CMS: now merge
>> IW 0 [ServerThread:/10.193.221.75:3821]: CMS:   index:
>> IW 0 [ServerThread:/10.193.221.75:3821]: CMS:   no more merges pending;
>> now
>> return
>> IW 0 [ServerThread:/10.193.221.75:3821]: close: wrote segments file
>> "segments_2"
>> IFD [ServerThread:/10.193.221.75:3821]: now checkpoint "segments_2" [0
>> segments ; isCommit = true]
>> IFD [ServerThread:/10.193.221.75:3821]: delete pending file _0.prx
>> IFD [ServerThread:/10.193.221.75:3821]: delete "_0.prx"
>> IFD [ServerThread:/10.193.221.75:3821]: IndexFileDeleter: unable to
>> remove
>> file "_0.prx": java.io.IOException: Cannot delete
>> F:\Master\14.merge\_0.prx;
>> Will re-try later.
>> IFD [ServerThread:/10.193.221.75:3821]: delete pending file _0.tii
>> IFD [ServerThread:/10.193.221.75:3821]: delete "_0.tii"
>> IFD [ServerThread:/10.193.221.75:3821]: IndexFileDeleter: unable to
>> remove
>> file "_0.tii": java.io.IOException: Cannot delete
>> F:\Master\14.merge\_0.tii;
>> Will re-try later.
>> IFD [ServerThread:/10.193.221.75:3821]: delete pending file _0.tis
>> IFD [ServerThread:/10.193.221.75:3821]: delete "_0.tis"
>> IFD [ServerThread:/10.193.221.75:3821]: IndexFileDeleter: unable to
>> remove
>> file "_0.tis": java.io.IOException: Cannot delete
>> F:\Master\14.merge\_0.tis;
>> Will re-try later.
>> IFD [ServerThread:/10.193.221.75:3821]: deleteCommits: now remove commit
>> "segments_1"
>> IFD [ServerThread:/10.193.221.75:3821]: delete "segments_1"
>> IW 0 [ServerThread:/10.193.221.75:3821]: at close:
>> IFD [ServerThread:/10.193.221.75:3821]: delete pending file _0.prx
>> IFD [ServerThread:/10.193.221.75:3821]: delete "_0.prx"
>> IFD [ServerThread:/10.193.221.75:3821]: IndexFileDeleter: unable to
>> remove
>> file "_0.prx": java.io.IOException: Cannot delete
>> F:\Master\14.merge\_0.prx;
>> Will re-try later.
>> IFD [ServerThread:/10.193.221.75:3821]: delete pending file _0.tii
>> IFD [ServerThread:/10.193.221.75:3821]: delete "_0.tii"
>> IFD [ServerThread:/10.193.221.75:3821]: IndexFileDeleter: unable to
>> remove
>> file "_0.tii": java.io.IOException: Cannot delete
>> F:\Master\14.merge\_0.tii;
>> Will re-try later.
>> IFD [ServerThread:/10.193.221.75:3821]: delete pending file _0.tis
>> IFD [ServerThread:/10.193.221.75:3821]: delete "_0.tis"
>> IFD [ServerThread:/10.193.221.75:3821]: IndexFileDeleter: unable to
>> remove
>> file "_0.tis": java.io.IOException: Cannot delete
>> F:\Master\14.merge\_0.tis;
>> Will re-try later.
>>
>>
>>
>> --
>> View this message in context:
>> http://lucene.472066.n3.nabble.com/indexWriter-addIndexes-Disk-space-and-open-files-tp841735p841735.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 
-- 
View this message in context: http://lucene.472066.n3.nabble.com/indexWriter-addIndexes-Disk-space-and-open-files-tp841735p842321.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46225-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 25 22:43:57 2010
Return-Path: <java-user-return-46225-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83166 invoked from network); 25 May 2010 22:43:57 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 May 2010 22:43:57 -0000
Received: (qmail 54151 invoked by uid 500); 25 May 2010 22:43:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54119 invoked by uid 500); 25 May 2010 22:43:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54111 invoked by uid 99); 25 May 2010 22:43:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 May 2010 22:43:54 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spencertickner@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 May 2010 22:43:48 +0000
Received: by vws10 with SMTP id 10so2915978vws.35
        for <java-user@lucene.apache.org>; Tue, 25 May 2010 15:43:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=ZENTWIzoK5q4z7L7IgU7cAheBesydxinOPtfClnzrnc=;
        b=K42vOg/ZEeUAmFQvtUXFJvbn8aRgM6/+mPso68OB9XbOMqwmocAQsJ7u5wPMYX7Vg1
         OAy24OvTXd8+JdoI18xHrIBlxBxB90gMNv6AjmB5ni9ufX33ccDCdj8IzrlEOlXwaaxo
         aJjQbAfTaRxal3iDQr9rE849i35EYpLYWV4HA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=wb3O7ZJKnWxaFEqu8hgPYdhQJ34LUkHLN+V/tB5PbxYNQelz/U5GGhRBp3scGYfmi2
         GMx72fFl9hSoWkUrSfZNYQZ8RdD1z6IXszzh0bH06cmSR5we06e+uQB3swFQ06Igoe4j
         q0utMKtbv7ekCJlmn2kJvvEhdIIkCbabaeOew=
MIME-Version: 1.0
Received: by 10.220.63.4 with SMTP id z4mr5504294vch.239.1274827407757; Tue, 
	25 May 2010 15:43:27 -0700 (PDT)
Received: by 10.220.70.196 with HTTP; Tue, 25 May 2010 15:43:27 -0700 (PDT)
Date: Tue, 25 May 2010 15:43:27 -0700
Message-ID: <AANLkTim9O__nXZjegvsXt9kste3OngExqvy1LFIl8hOq@mail.gmail.com>
Subject: Test File locks
From: Spencer Tickner <spencertickner@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8

Hi Everyone,

Thanks in advance for any help.

I've been building lucene index to a MS Windows Server 2003 test
environment with no problem. When attempting to build the same index
onto a Windows Server 2008 machine I get the following error:

Cannot create directory: \\whatever\index
	at org.apache.lucene.store.NativeFSLockFactory.acquireTestLock(NativeFSLockFactory.java:75)
	at org.apache.lucene.store.NativeFSLockFactory.makeLock(NativeFSLockFactory.java:142)
	at org.apache.lucene.store.Directory.makeLock(Directory.java:146)
	at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:1108)
	at qp.builder.LibraryBuilder.buildNewLibrary(LibraryBuilder.java:167)

I found some info via google where people were having a similar issue
now and then, but this is always. Anyone had a similar issue?

Thanks,

Spencer

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46226-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 26 03:37:57 2010
Return-Path: <java-user-return-46226-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60272 invoked from network); 26 May 2010 03:37:57 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 May 2010 03:37:57 -0000
Received: (qmail 57367 invoked by uid 500); 26 May 2010 03:37:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57251 invoked by uid 500); 26 May 2010 03:37:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57243 invoked by uid 99); 26 May 2010 03:37:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 May 2010 03:37:51 +0000
X-ASF-Spam-Status: No, hits=4.3 required=10.0
	tests=AWL,FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of manjula53@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 May 2010 03:37:45 +0000
Received: by pwi9 with SMTP id 9so2124917pwi.35
        for <java-user@lucene.apache.org>; Tue, 25 May 2010 20:37:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=uJSp/huIgQjrT9ZXzbTIx7+Ke7a9wIve3rWAkletDxo=;
        b=N0M7neeEJB7xmTkvmb9gtudx8EIdLYKbKCTDpY1I9DzsWgZwnMNV1MQrBq2eCeptRU
         T3jS0akgwv83w0JzoC+kRk0quabFLi37Xj/Y9BhjWEVfmDfq//guCpU3P5b/GgiaJ9ta
         wK7uOQ098qh2Nf0GYPLOBDCI2E1Aemf+vtiPE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=LoyL1+RTjYpBTf0FZrzbhvYaP/uYM7gQ/b4EI7VMxUlTOhOigX09gfyGlnzehtZBPU
         QhQvir5k+Vdwjfsbm6XGNCpLNmtVvT4nCaFcjYr700jOYbXVU4BwQuxuwpShZn5pQKgs
         42tkR0RIfsyCXaVrH0MSnZTutv7fKbYHuIE9g=
MIME-Version: 1.0
Received: by 10.142.248.38 with SMTP id v38mr5382918wfh.246.1274845044829; 
	Tue, 25 May 2010 20:37:24 -0700 (PDT)
Received: by 10.140.147.1 with HTTP; Tue, 25 May 2010 20:37:24 -0700 (PDT)
In-Reply-To: <5FEFEC46-3AF5-44B1-A960-2208E8671A9A@apache.org>
References: <AANLkTil2JbQWZUw66CdELHF6AvxWuL2J_8NY0FIj1V-0@mail.gmail.com>
	 <5FEFEC46-3AF5-44B1-A960-2208E8671A9A@apache.org>
Date: Wed, 26 May 2010 09:07:24 +0530
Message-ID: <AANLkTikgyiqanHWIbr28aqW1fy2RSAmJYuxnENrucDB2@mail.gmail.com>
Subject: Re: Arrange terms[i]
From: manjula wijewickrema <manjula53@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00504502ce540a970a048776fe65

--00504502ce540a970a048776fe65
Content-Type: text/plain; charset=ISO-8859-1

Dear Grant,

Thanks for your reply.

Manjula

On Mon, May 24, 2010 at 4:37 PM, Grant Ingersoll <gsingers@apache.org>wrote:

>
> On May 20, 2010, at 5:15 AM, manjula wijewickrema wrote:
>
> > Hi,
> >
> > I wrote aprogram to get the ferquencies and terms of an indexed document.
> > The output comes as follows;
> >
> >
> > If I print : +tfv[0]
> >
> > Output:
> >
> > array terms are:{title: capabl/1, code/2, frequenc/1, lucen/4, over/1,
> > sampl/1, term/4, test/1}
> >
> > In the same way I can print terms[i] and freqs[i], but the problem is
> while
> > I am printing terms[i], output (array elements) comes according to the
> > English alphabetic order (as above) and freqs[i] also arrange according
> that
> > particular order. Is there a way to arrange terms[i] according to the
> > ascending/descending order of their frequencies?
>
> Yes, have a look at the TermVectorMapper.  You will need to implement a
> variation of this to build up the data structures you need.
>
> -Grant
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00504502ce540a970a048776fe65--

From java-user-return-46227-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 26 06:57:02 2010
Return-Path: <java-user-return-46227-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13257 invoked from network); 26 May 2010 06:57:02 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 May 2010 06:57:02 -0000
Received: (qmail 88115 invoked by uid 500); 26 May 2010 06:57:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87873 invoked by uid 500); 26 May 2010 06:57:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87865 invoked by uid 99); 26 May 2010 06:56:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 May 2010 06:56:59 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.83.176] (HELO mail-pv0-f176.google.com) (74.125.83.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 May 2010 06:56:54 +0000
Received: by pvc21 with SMTP id 21so467216pvc.35
        for <java-user@lucene.apache.org>; Tue, 25 May 2010 23:56:34 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.140.83.31 with SMTP id g31mr6282861rvb.3.1274856994091; Tue, 
	25 May 2010 23:56:34 -0700 (PDT)
Received: by 10.140.147.18 with HTTP; Tue, 25 May 2010 23:56:33 -0700 (PDT)
Date: Wed, 26 May 2010 16:56:33 +1000
Message-ID: <AANLkTinGIov-d1AsWNetiJyBjyko-QoJvjVAfmN9pOyp@mail.gmail.com>
Subject: Filter.getDocIdSet() returning null, and what this means for 
	CachingWrapperFilter
From: Daniel Noll <daniel@nuix.com>
To: Lucene Java Users Mailing List <java-user@lucene.apache.org>
Content-Type: text/plain; charset=UTF-8

Hi all.

We are seeing an exception like this:

java.lang.NullPointerException
    at org.apache.lucene.search.CachingWrapperFilter.docIdSetToCache(CachingWrapperFilter.java:84)
    at org.apache.lucene.search.CachingWrapperFilter.getDocIdSet(CachingWrapperFilter.java:112)
    at com.nuix.storage.search.LazyConstantScoreQuery$LazyFilterWrapper.getDocIdSet(SourceFile:91)
    at org.apache.lucene.search.ConstantScoreQuery$ConstantScorer.<init>(ConstantScoreQuery.java:116)
    at org.apache.lucene.search.ConstantScoreQuery$ConstantWeight.scorer(ConstantScoreQuery.java:81)
    at org.apache.lucene.search.BooleanQuery$BooleanWeight.scorer(BooleanQuery.java:297)
    at org.apache.lucene.search.BooleanQuery$BooleanWeight.scorer(BooleanQuery.java:297)
    at org.apache.lucene.search.QueryWrapperFilter$2.iterator(QueryWrapperFilter.java:75)

The class of our own is just an intermediary which delays creating the
Filter object...

        @Override
        public DocIdSet getDocIdSet(IndexReader reader) throws IOException {
            if (delegate == null) {
                delegate = factory.createFilter();
            }
            return delegate.getDocIdSet(reader);
        }

Tracing through the code in CachingWrapperFilter, I can see that this
NPE would occur if getDocIdSet() were to return null.

The Javadoc on Filter says that null will be returned if no documents
will be accepted by the filter, but it doesn't seem that Lucene itself
is handling null return values correctly, so which is correct?  The
code or the Javadoc?  Supposing that null really is OK, does this
cause any problems with how CachingWrapperFilter is implementing the
caching?  I notice it's calling get() and then comparing against null
so it wouldn't appear that it can distinguish "the entry isn't in the
cache" from "the entry is in the cache but it's null".

Daniel



-- 
Daniel Noll                            Forensic and eDiscovery Software
Senior Developer                              The world's most advanced
Nuix                                                email data analysis
http://nuix.com/                                and eDiscovery software

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46228-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 26 07:40:31 2010
Return-Path: <java-user-return-46228-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23312 invoked from network); 26 May 2010 07:40:30 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 May 2010 07:40:30 -0000
Received: (qmail 23812 invoked by uid 500); 26 May 2010 07:40:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23585 invoked by uid 500); 26 May 2010 07:40:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23577 invoked by uid 99); 26 May 2010 07:40:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 May 2010 07:40:27 +0000
X-ASF-Spam-Status: No, hits=-0.3 required=10.0
	tests=AWL,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 May 2010 07:40:22 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 4790DD36006
	for <java-user@lucene.apache.org>; Wed, 26 May 2010 09:40:00 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 4dD6TNRtSIT2 for <java-user@lucene.apache.org>;
	Wed, 26 May 2010 09:39:47 +0200 (CEST)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 5C944D36001
	for <java-user@lucene.apache.org>; Wed, 26 May 2010 09:39:47 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <AANLkTinGIov-d1AsWNetiJyBjyko-QoJvjVAfmN9pOyp@mail.gmail.com>
In-Reply-To: <AANLkTinGIov-d1AsWNetiJyBjyko-QoJvjVAfmN9pOyp@mail.gmail.com>
Subject: RE: Filter.getDocIdSet() returning null, and what this means for 	CachingWrapperFilter
Date: Wed, 26 May 2010 09:40:31 +0200
Message-ID: <001101cafca6$b87d23a0$29776ae0$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQFWX2IBdsQmQyVSyL1LjYcGIYlWEJNMje2g
Content-Language: de

Can you open an issue, null should be handled like an empty DocIdSet? =
This seems to be a bug in CachingWrapperFilter.

To go around this, don=E2=80=99t return null, and instead return the =
constant DocIdSet.EMPTY_DOCIDSET. This is the preferable solution and =
maybe we will change this in Lucene 4.0, to not allow null as return =
value.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Daniel Noll [mailto:daniel@nuix.com]
> Sent: Wednesday, May 26, 2010 8:57 AM
> To: Lucene Java Users Mailing List
> Subject: Filter.getDocIdSet() returning null, and what this means for
> CachingWrapperFilter
>=20
> Hi all.
>=20
> We are seeing an exception like this:
>=20
> java.lang.NullPointerException
>     at
> org.apache.lucene.search.CachingWrapperFilter.docIdSetToCache(CachingW
> rapperFilter.java:84)
>     at
> org.apache.lucene.search.CachingWrapperFilter.getDocIdSet(CachingWrapp
> erFilter.java:112)
>     at
> com.nuix.storage.search.LazyConstantScoreQuery$LazyFilterWrapper.getDo
> cIdSet(SourceFile:91)
>     at
> =
org.apache.lucene.search.ConstantScoreQuery$ConstantScorer.<init>(Const
> antScoreQuery.java:116)
>     at
> org.apache.lucene.search.ConstantScoreQuery$ConstantWeight.scorer(Con
> stantScoreQuery.java:81)
>     at
> org.apache.lucene.search.BooleanQuery$BooleanWeight.scorer(BooleanQu
> ery.java:297)
>     at
> org.apache.lucene.search.BooleanQuery$BooleanWeight.scorer(BooleanQu
> ery.java:297)
>     at
> =
org.apache.lucene.search.QueryWrapperFilter$2.iterator(QueryWrapperFilt
> er.java:75)
>=20
> The class of our own is just an intermediary which delays creating the =
Filter
> object...
>=20
>         @Override
>         public DocIdSet getDocIdSet(IndexReader reader) throws =
IOException {
>             if (delegate =3D=3D null) {
>                 delegate =3D factory.createFilter();
>             }
>             return delegate.getDocIdSet(reader);
>         }
>=20
> Tracing through the code in CachingWrapperFilter, I can see that this =
NPE
> would occur if getDocIdSet() were to return null.
>=20
> The Javadoc on Filter says that null will be returned if no documents =
will be
> accepted by the filter, but it doesn't seem that Lucene itself is =
handling null
> return values correctly, so which is correct?  The code or the =
Javadoc?
> Supposing that null really is OK, does this cause any problems with =
how
> CachingWrapperFilter is implementing the caching?  I notice it's =
calling get()
> and then comparing against null so it wouldn't appear that it can =
distinguish
> "the entry isn't in the cache" from "the entry is in the cache but =
it's null".
>=20
> Daniel
>=20
>=20
>=20
> --
> Daniel Noll                            Forensic and eDiscovery =
Software
> Senior Developer                              The world's most =
advanced
> Nuix                                                email data =
analysis
> http://nuix.com/                                and eDiscovery =
software
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46229-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 26 09:32:40 2010
Return-Path: <java-user-return-46229-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54518 invoked from network); 26 May 2010 09:32:40 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 May 2010 09:32:40 -0000
Received: (qmail 46889 invoked by uid 500); 26 May 2010 09:32:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46740 invoked by uid 500); 26 May 2010 09:32:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46731 invoked by uid 99); 26 May 2010 09:32:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 May 2010 09:32:37 +0000
X-ASF-Spam-Status: No, hits=3.3 required=10.0
	tests=AWL,FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,SPF_HELO_PASS,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 216.139.236.158 is neither permitted nor denied by domain of calin014@gmail.com)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 May 2010 09:32:32 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <calin014@gmail.com>)
	id 1OHCyB-0000ZV-Mr
	for java-user@lucene.apache.org; Wed, 26 May 2010 02:32:11 -0700
Date: Wed, 26 May 2010 02:32:11 -0700 (PDT)
From: calin014 <calin014@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1274866331700-844442.post@n3.nabble.com>
Subject: Precision-recall curve with /contrib/benchmark/quality
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


Hi,

I am testing some ranking methods with /contrib/benchmark/quality package,
and i was wondering if there is a simple way of building a precision-recall
graph with the info gathered(maybe QualityStats.RecallPoint).

Thanks
-- 
View this message in context: http://lucene.472066.n3.nabble.com/Precision-recall-curve-with-contrib-benchmark-quality-tp844442p844442.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46230-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 26 12:40:31 2010
Return-Path: <java-user-return-46230-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29070 invoked from network); 26 May 2010 12:40:31 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 May 2010 12:40:31 -0000
Received: (qmail 23452 invoked by uid 500); 26 May 2010 12:40:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23410 invoked by uid 500); 26 May 2010 12:40:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23401 invoked by uid 99); 26 May 2010 12:40:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 May 2010 12:40:28 +0000
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rcmuir@gmail.com designates 72.14.220.155 as permitted sender)
Received: from [72.14.220.155] (HELO fg-out-1718.google.com) (72.14.220.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 May 2010 12:40:21 +0000
Received: by fg-out-1718.google.com with SMTP id 16so1861825fgg.5
        for <java-user@lucene.apache.org>; Wed, 26 May 2010 05:40:01 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=cacr5/dTo+qt3JpPPHyIe5rk0mK9vcGE34C1QtvDOXw=;
        b=BOxI24p2Wwa39EQ6M0uGbM3uJjN0Q47q6baVoD9x03bxct6fukzLgQoUerGPxmuCnD
         sF7ZEJBqKHZzk04AuHXR1UovxX3EmNiPWh2q6APnK7nF9m6pcSHVoihvUoT+ar0VoJbb
         RBnfbjv39298iktzewT9yhuFdJ1fuuwJGdvAs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=mzSa0eAE6snI5GtW5gN7KKiakGo1tbxSiUx1DomLI3uE9rsa1bti2iMV49HrEU5ggP
         K2JiaWKBMATZa0wRSP85TAW2nDOlRvNhkQ8DfDCa5WTN1Y43iTiYpYG4ugU9jwbWUfY7
         11KpIONwCvbECU1Kpy47mRrcj3QNX3HvcyXPc=
Received: by 10.204.127.70 with SMTP id f6mr4124172bks.76.1274877601117; Wed, 
	26 May 2010 05:40:01 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.71.197 with HTTP; Wed, 26 May 2010 05:39:41 -0700 (PDT)
In-Reply-To: <1274866331700-844442.post@n3.nabble.com>
References: <1274866331700-844442.post@n3.nabble.com>
From: Robert Muir <rcmuir@gmail.com>
Date: Wed, 26 May 2010 08:39:41 -0400
Message-ID: <AANLkTim8k2PYGGitEiCk5LjKIq5ayl7GbsGhVH-7w1dT@mail.gmail.com>
Subject: Re: Precision-recall curve with /contrib/benchmark/quality
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

Personally I use the generated submission.txt, and run it thru
trec_eval to get all numbers.

by default, trec_eval will dump ircl_prn.xxxx values, and you could
plug them in openoffice.
I prefer to use trec_eval as the results from the benchmark summary
often differ with trec_eval.

it would be great if somehow this process could be improved by default.

Nicola Ferro mentioned on the list once that for the CLEF work, they
have written a JNI wrapper around trec_eval to access all its
computations, this might be one thing we could consider, then we could
access the correct calculations and produce fancy output.

On Wed, May 26, 2010 at 5:32 AM, calin014 <calin014@gmail.com> wrote:
>
> Hi,
>
> I am testing some ranking methods with /contrib/benchmark/quality package,
> and i was wondering if there is a simple way of building a precision-recall
> graph with the info gathered(maybe QualityStats.RecallPoint).
>
> Thanks
> --
> View this message in context: http://lucene.472066.n3.nabble.com/Precision-recall-curve-with-contrib-benchmark-quality-tp844442p844442.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 
Robert Muir
rcmuir@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46231-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 26 13:30:33 2010
Return-Path: <java-user-return-46231-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44298 invoked from network); 26 May 2010 13:30:33 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 May 2010 13:30:33 -0000
Received: (qmail 11252 invoked by uid 500); 26 May 2010 13:30:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11164 invoked by uid 500); 26 May 2010 13:30:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11156 invoked by uid 99); 26 May 2010 13:30:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 May 2010 13:30:30 +0000
X-ASF-Spam-Status: No, hits=-0.5 required=10.0
	tests=AWL,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 May 2010 13:30:25 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 72311D36006
	for <java-user@lucene.apache.org>; Wed, 26 May 2010 15:30:03 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id Usf5euSztnvB for <java-user@lucene.apache.org>;
	Wed, 26 May 2010 15:29:46 +0200 (CEST)
Received: from VEGA (WDC-MARE.marum.de [134.102.249.84])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id ADFC0D36001
	for <java-user@lucene.apache.org>; Wed, 26 May 2010 15:29:46 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <AANLkTinGIov-d1AsWNetiJyBjyko-QoJvjVAfmN9pOyp@mail.gmail.com> <001101cafca6$b87d23a0$29776ae0$@thetaphi.de>
In-Reply-To: <001101cafca6$b87d23a0$29776ae0$@thetaphi.de>
Subject: RE: Filter.getDocIdSet() returning null, and what this means for 	CachingWrapperFilter
Date: Wed, 26 May 2010 15:30:31 +0200
Message-ID: <000001cafcd7$9d39f5b0$d7ade110$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQFWX2IBdsQmQyVSyL1LjYcGIYlWEAKImQFlkzirn+A=
Content-Language: de

I opened https://issues.apache.org/jira/browse/LUCENE-2478 and will fix =
soon!

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Uwe Schindler [mailto:uwe@thetaphi.de]
> Sent: Wednesday, May 26, 2010 9:41 AM
> To: java-user@lucene.apache.org
> Subject: RE: Filter.getDocIdSet() returning null, and what this means =
for
> CachingWrapperFilter
>=20
> Can you open an issue, null should be handled like an empty DocIdSet? =
This
> seems to be a bug in CachingWrapperFilter.
>=20
> To go around this, don=E2=80=99t return null, and instead return the =
constant
> DocIdSet.EMPTY_DOCIDSET. This is the preferable solution and maybe we
> will change this in Lucene 4.0, to not allow null as return value.
>=20
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>=20
> > -----Original Message-----
> > From: Daniel Noll [mailto:daniel@nuix.com]
> > Sent: Wednesday, May 26, 2010 8:57 AM
> > To: Lucene Java Users Mailing List
> > Subject: Filter.getDocIdSet() returning null, and what this means =
for
> > CachingWrapperFilter
> >
> > Hi all.
> >
> > We are seeing an exception like this:
> >
> > java.lang.NullPointerException
> >     at
> >
> org.apache.lucene.search.CachingWrapperFilter.docIdSetToCache(CachingW
> > rapperFilter.java:84)
> >     at
> >
> org.apache.lucene.search.CachingWrapperFilter.getDocIdSet(CachingWrapp
> > erFilter.java:112)
> >     at
> >
> com.nuix.storage.search.LazyConstantScoreQuery$LazyFilterWrapper.getDo
> > cIdSet(SourceFile:91)
> >     at
> >
> org.apache.lucene.search.ConstantScoreQuery$ConstantScorer.<init>(Cons
> > t
> > antScoreQuery.java:116)
> >     at
> >
> org.apache.lucene.search.ConstantScoreQuery$ConstantWeight.scorer(Con
> > stantScoreQuery.java:81)
> >     at
> >
> org.apache.lucene.search.BooleanQuery$BooleanWeight.scorer(BooleanQu
> > ery.java:297)
> >     at
> >
> org.apache.lucene.search.BooleanQuery$BooleanWeight.scorer(BooleanQu
> > ery.java:297)
> >     at
> > =
org.apache.lucene.search.QueryWrapperFilter$2.iterator(QueryWrapperFil
> > t
> > er.java:75)
> >
> > The class of our own is just an intermediary which delays creating =
the
> > Filter object...
> >
> >         @Override
> >         public DocIdSet getDocIdSet(IndexReader reader) throws =
IOException
> {
> >             if (delegate =3D=3D null) {
> >                 delegate =3D factory.createFilter();
> >             }
> >             return delegate.getDocIdSet(reader);
> >         }
> >
> > Tracing through the code in CachingWrapperFilter, I can see that =
this
> > NPE would occur if getDocIdSet() were to return null.
> >
> > The Javadoc on Filter says that null will be returned if no =
documents
> > will be accepted by the filter, but it doesn't seem that Lucene =
itself
> > is handling null return values correctly, so which is correct?  The =
code or the
> Javadoc?
> > Supposing that null really is OK, does this cause any problems with
> > how CachingWrapperFilter is implementing the caching?  I notice it's
> > calling get() and then comparing against null so it wouldn't appear
> > that it can distinguish "the entry isn't in the cache" from "the =
entry is in the
> cache but it's null".
> >
> > Daniel
> >
> >
> >
> > --
> > Daniel Noll                            Forensic and eDiscovery =
Software
> > Senior Developer                              The world's most =
advanced
> > Nuix                                                email data =
analysis
> > http://nuix.com/                                and eDiscovery =
software
> >
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46232-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 26 13:45:16 2010
Return-Path: <java-user-return-46232-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47270 invoked from network); 26 May 2010 13:45:16 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 May 2010 13:45:16 -0000
Received: (qmail 35227 invoked by uid 500); 26 May 2010 13:45:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35173 invoked by uid 500); 26 May 2010 13:45:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35165 invoked by uid 99); 26 May 2010 13:45:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 May 2010 13:45:13 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of trewig@mufin.com designates 195.214.216.124 as permitted sender)
Received: from [195.214.216.124] (HELO mx4.de.magix.net) (195.214.216.124)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 May 2010 13:45:05 +0000
Received: from [192.168.1.18] (port=57135)
	by mx4.de.magix.net with esmtpa (Exim 4.69)
	(envelope-from <trewig@mufin.com>)
	id 1OHGua-0000ll-Pf
	for java-user@lucene.apache.org; Wed, 26 May 2010 15:44:44 +0200
Message-ID: <4BFD25CB.6090108@mufin.com>
Date: Wed, 26 May 2010 15:44:43 +0200
From: Thomas Rewig <trewig@mufin.com>
Organization: mufin
User-Agent: Thunderbird 2.0.0.24 (Windows/20100228)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: IndexSearcher - open file handles by deleted files
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit
X-SA-Exim-Connect-IP: 192.168.1.18
X-SA-Exim-Mail-From: trewig@mufin.com
X-SA-Exim-Scanned: No (on mx4.de.magix.net); SAEximRunCond expanded to false
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

I use Lucene 2.9.1 with two indices, which alternate each day. One is 
live, the other is erased and renewed with the latest data.
The problem is that the index files will be deleted, but the file 
handles are still available. If the program (JBOSS) is not restarted for 
some time, the disk space is scarce.

With lsof I see e.g:

java       6054        root   80r      REG                8,1 
5939406525      84663 /usr/_index/2/item3_index/_2fdtq2.cfs (deleted)
java       6054        root   82r      REG                8,1  
401785779      78344 /usr/_index/2/item2_index/_5exkf.cfs (deleted)
java       6054        root   84r      REG                8,1  
106496943      72217 /usr/_index/2/item1_index/_85bld.cfs (deleted)
java       6054        root  147r      REG                8,1 
5939406525      84663 /usr/_index/2/item3_index/_2fdtq2.cfs (deleted)
java       6054        root  150r      REG                8,1  
401785779      78344 /usr/_index/2/item2_index/_5exkf.cfs (deleted)

### open the a specific searcher: ###

    public static Searcher getSearcher(String indexName)
    throws IOException
    {
        Searcher searcher = searchersList.get(indexName);
        if(searcher == null) {
            String path = getPath(subDir, indexName);
            Directory directory = new NIOFSDirectory(new File(path));
            searcher = new IndexSearcher(directory, true);
            directoriesList.put(indexName, directory);
            searchersList.put(indexName, searcher);
        }
        return searcher;
    }

### switch the searchers: ###

    public static void determineIndexDirectories() {
        searchersListOld = searchersList;
        searchersList = new Hashtable<String, Searcher>();
        directoriesListOld = directoriesList;
        directoriesList = new Hashtable<String, Directory>();

        subDir = getLastIndexDir();

        closeOldSearchers();
    }

### close the searchers: ###

    private static void closeOldSearchers() {
        new Thread() {
            public void run() {
                try {
                    sleep(10*1000);
                } catch (InterruptedException e) {
                    logger.error("IndexManager.closeOldSearchers", e);
                }
               
                for(Searcher searcher : searchersListOld.values()) {
                    try {
                        searcher.close();
                    } catch (IOException e) {
                        logger.error("Error closing Searcher.", e);
                    }
                }
                searchersListOld.clear();
                searchersListOld = null;
               
                for(Directory directory : directoriesListOld.values()) {
                    try {
                        directory.close();
                    } catch (IOException e) {
                        logger.error("Error closing Directory.", e);
                    }
                }
                directoriesListOld.clear();
                directoriesListOld = null;
            }
        }.start();
    }

I search for this problem in the mailing list, and there are similar 
Problems with a not correctly closed IndexReader.

If I create a IndexSearcher with a directory could it be that there is a 
similar problem, e.g. the under lying IndexReader (if there is one) 
closes not automatically if i close searcher.close()?
Do I have to close something else, than all IndexSearchers and Directorys?
Or am I wrong with my assumption, and the problem is somewhere else?

Best
Thomas

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46233-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 26 14:16:00 2010
Return-Path: <java-user-return-46233-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59669 invoked from network); 26 May 2010 14:15:59 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 May 2010 14:15:59 -0000
Received: (qmail 84122 invoked by uid 500); 26 May 2010 14:15:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84048 invoked by uid 500); 26 May 2010 14:15:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84040 invoked by uid 99); 26 May 2010 14:15:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 May 2010 14:15:57 +0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=FREEMAIL_FROM,SPF_HELO_PASS,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 216.139.236.158 is neither permitted nor denied by domain of sethu.iit@gmail.com)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 May 2010 14:15:52 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <sethu.iit@gmail.com>)
	id 1OHHON-0006cM-Nf
	for java-user@lucene.apache.org; Wed, 26 May 2010 07:15:31 -0700
Date: Wed, 26 May 2010 07:15:31 -0700 (PDT)
From: Sethu_424 <sethu.iit@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1274883331727-844962.post@n3.nabble.com>
In-Reply-To: <SNT122-W31BD4A3A2A564100488581B1580@phx.gbl>
References: <SNT122-W31BD4A3A2A564100488581B1580@phx.gbl>
Subject: Re: Getting DF & IDF
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


Hi,
I am not sure if you are still searching the answer for your question. If
so, then please read on...

You can get the DF & IDF for each of the query terms in the query as below..

IndexReader reader = IndexReader.open(FSDirectory.open(new File(indexDir)),
true); 
	
//Create a FilterIndexReader to invoke the abstract methods
FilterIndexReader filterIndexReader = new FilterIndexReader(reader);
	
//Number of documents in the index
int numDocs = filterIndexReader.numDocs();
	
//Iterate over each of the query words
for(String queryWord : queryWords){
   Term term = new Term(searchField, queryWord.toLowerCase());
    
   int docFreq = 0;
	try {
              docFreq = filterIndexReader.docFreq(term);
	} catch (IOException e) {
               logger.log(Level.SEVERE, null, e);
	}
					   
	//Calculate IDF
	double idf = 0.0;
	if(docFreq > 0){
	      idf = Math.log10((double) numDocs / docFreq);
	}
	 
   System.out.println(queryWord + "\tDF -" + docFreq + "\tIDF -" + idf);
}

-- 
View this message in context: http://lucene.472066.n3.nabble.com/Getting-DF-IDF-tp547386p844962.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46234-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 26 15:54:03 2010
Return-Path: <java-user-return-46234-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3584 invoked from network); 26 May 2010 15:54:03 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 May 2010 15:54:03 -0000
Received: (qmail 80889 invoked by uid 500); 26 May 2010 15:54:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80843 invoked by uid 500); 26 May 2010 15:54:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80835 invoked by uid 99); 26 May 2010 15:54:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 May 2010 15:54:00 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 72.14.220.159 as permitted sender)
Received: from [72.14.220.159] (HELO fg-out-1718.google.com) (72.14.220.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 May 2010 15:53:53 +0000
Received: by fg-out-1718.google.com with SMTP id 16so1944527fgg.5
        for <java-user@lucene.apache.org>; Wed, 26 May 2010 08:53:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=V4x6tKVdpqM7qRpGjKBoPfDsm9l6E9pNKiGHMgUVGCY=;
        b=djd1sXUI6fXc9u14E7ZXqG/T7gUhoMMaxta0XslxsneYHTw9/uc6UCKCXqBQK0IKrP
         IVCUHXK52QkUUAUn6VsRY4/XcswiFiZa3GvmNhk4wk/T54TjKSbcYLsXAd6HI0T9Rifx
         w+4J5v8uBP6F39z/twtpFjTCDABI7KZlwjrB8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=tV7p3UI84qoTa0OX2MUEgtBf0Usz7hrmkjzWycK1IgFkeL2Puotce+D++vqj5a9wrV
         XSq7vuRK3cwNReDMeOjhaGHDWH916VyiKeen28D/xxf7OO6HObCuZ9fkyofPNUsLW/n9
         FZRuozoCun6PyvLsjIZpJtOObOTGCHWVUCaYs=
Received: by 10.204.84.220 with SMTP id k28mr3705641bkl.70.1274889212431; Wed, 
	26 May 2010 08:53:32 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.54.198 with HTTP; Wed, 26 May 2010 08:53:12 -0700 (PDT)
In-Reply-To: <AANLkTim9O__nXZjegvsXt9kste3OngExqvy1LFIl8hOq@mail.gmail.com>
References: <AANLkTim9O__nXZjegvsXt9kste3OngExqvy1LFIl8hOq@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Wed, 26 May 2010 16:53:12 +0100
Message-ID: <AANLkTikcGTky215CkcUVNDP80KeCR1rjuC9GbNaW0ccL@mail.gmail.com>
Subject: Re: Test File locks
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

No answers but some things you could try:

There have been some reports of problems with file paths being
specified in different ways - UNC versus something else perhaps.

Use SimpleFSLockFactory rather than the default native class.

Try a recent version of lucene unless you already are.


--
Ian.

On Tue, May 25, 2010 at 11:43 PM, Spencer Tickner
<spencertickner@gmail.com> wrote:
> Hi Everyone,
>
> Thanks in advance for any help.
>
> I've been building lucene index to a MS Windows Server 2003 test
> environment with no problem. When attempting to build the same index
> onto a Windows Server 2008 machine I get the following error:
>
> Cannot create directory: \\whatever\index
> =A0 =A0 =A0 =A0at org.apache.lucene.store.NativeFSLockFactory.acquireTest=
Lock(NativeFSLockFactory.java:75)
> =A0 =A0 =A0 =A0at org.apache.lucene.store.NativeFSLockFactory.makeLock(Na=
tiveFSLockFactory.java:142)
> =A0 =A0 =A0 =A0at org.apache.lucene.store.Directory.makeLock(Directory.ja=
va:146)
> =A0 =A0 =A0 =A0at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.=
java:1108)
> =A0 =A0 =A0 =A0at qp.builder.LibraryBuilder.buildNewLibrary(LibraryBuilde=
r.java:167)
>
> I found some info via google where people were having a similar issue
> now and then, but this is always. Anyone had a similar issue?
>
> Thanks,
>
> Spencer
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46235-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 26 17:30:12 2010
Return-Path: <java-user-return-46235-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56913 invoked from network); 26 May 2010 17:30:12 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 May 2010 17:30:12 -0000
Received: (qmail 73513 invoked by uid 500); 26 May 2010 17:30:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73387 invoked by uid 500); 26 May 2010 17:30:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73257 invoked by uid 99); 26 May 2010 17:30:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 May 2010 17:30:06 +0000
X-ASF-Spam-Status: No, hits=-0.5 required=10.0
	tests=AWL,FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gsiasf@gmail.com designates 74.125.83.48 as permitted sender)
Received: from [74.125.83.48] (HELO mail-gw0-f48.google.com) (74.125.83.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 May 2010 17:29:58 +0000
Received: by mail-gw0-f48.google.com with SMTP id 23so2917739gwj.35
        for <multiple recipients>; Wed, 26 May 2010 10:29:38 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:sender:from:content-type
         :content-transfer-encoding:subject:date:message-id:to:mime-version
         :x-mailer;
        bh=CnVQxBxZITJQYGgsO50+hYpeRT6pu6pKCHFFZX/9DDE=;
        b=E+ILQRA4HKJyq8mF58HMH9Xz/S+dgF9hzYwmdgKziPirq37xfUxoFucG0on0MHU8a5
         l0uf+8Eugy/rCKVfG5E0ZMDKPSwUvGpCRfuHyIZla4z2AGmVVSBmQsgu72ap4VA4XUxW
         fHDBPkd41VXDGQtRLMk2GNN4KvEwhSrOWwW1I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=sender:from:content-type:content-transfer-encoding:subject:date
         :message-id:to:mime-version:x-mailer;
        b=piefqsfbIwRXxxh12LhGzDpKdUU2+NH32Cl/1HlJQ5zaIoAtF3qFS8OYJ20z9yrQ89
         kw1MfWhF/3ksgJ3/6kOhFt15H+0z6QYxb21HIr7iw+zvmexi2GWLB7WuHbl+j6FC6Fpl
         At3k8AJs3tBFG9iXY45q6vf1g1JJoGzV0oS1M=
Received: by 10.101.180.38 with SMTP id h38mr2074804anp.253.1274894977965;
        Wed, 26 May 2010 10:29:37 -0700 (PDT)
Received: from [10.0.0.10] (adsl-065-013-152-164.sip.rdu.bellsouth.net [65.13.152.164])
        by mx.google.com with ESMTPS id b1sm1483507anb.0.2010.05.26.10.29.36
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 26 May 2010 10:29:36 -0700 (PDT)
Sender: Grant Ingersoll <gsiasf@gmail.com>
From: Grant Ingersoll <gsingers@apache.org>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable
Subject: ApacheCon CFP Closes on Friday
Date: Wed, 26 May 2010 13:29:35 -0400
Message-Id: <FA82C0C5-703E-4ADB-A9B6-11682D8988F3@apache.org>
To: Lucene mailing list <general@lucene.apache.org>,
 java-user@lucene.apache.org,
 solr-user@lucene.apache.org,
 user@mahout.apache.org,
 user@tika.apache.org,
 user@nutch.apache.org
Mime-Version: 1.0 (Apple Message framework v1078)
X-Mailer: Apple Mail (2.1078)

If you are planning on submitting for ApacheCon, you have until Friday =
to do so

See the CFP at http://blogs.apache.org/conferences/date/20100428=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46236-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 26 17:50:04 2010
Return-Path: <java-user-return-46236-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66013 invoked from network); 26 May 2010 17:50:04 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 May 2010 17:50:04 -0000
Received: (qmail 21820 invoked by uid 500); 26 May 2010 17:50:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21746 invoked by uid 500); 26 May 2010 17:50:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21738 invoked by uid 99); 26 May 2010 17:50:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 May 2010 17:50:02 +0000
X-ASF-Spam-Status: No, hits=3.5 required=10.0
	tests=AWL,FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,SPF_HELO_PASS,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 216.139.236.158 is neither permitted nor denied by domain of calin014@gmail.com)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 May 2010 17:49:56 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <calin014@gmail.com>)
	id 1OHKjY-0000C7-AP
	for java-user@lucene.apache.org; Wed, 26 May 2010 10:49:36 -0700
Date: Wed, 26 May 2010 10:49:36 -0700 (PDT)
From: calin014 <calin014@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1274896176315-845518.post@n3.nabble.com>
In-Reply-To: <AANLkTim8k2PYGGitEiCk5LjKIq5ayl7GbsGhVH-7w1dT@mail.gmail.com>
References: <1274866331700-844442.post@n3.nabble.com> <AANLkTim8k2PYGGitEiCk5LjKIq5ayl7GbsGhVH-7w1dT@mail.gmail.com>
Subject: Re: Precision-recall curve with /contrib/benchmark/quality
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


Thanks, that worked:)
-- 
View this message in context: http://lucene.472066.n3.nabble.com/Precision-recall-curve-with-contrib-benchmark-quality-tp844442p845518.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46237-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 26 22:29:42 2010
Return-Path: <java-user-return-46237-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94183 invoked from network); 26 May 2010 22:29:42 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 May 2010 22:29:42 -0000
Received: (qmail 42046 invoked by uid 500); 26 May 2010 22:29:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41977 invoked by uid 500); 26 May 2010 22:29:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41969 invoked by uid 99); 26 May 2010 22:29:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 May 2010 22:29:40 +0000
X-ASF-Spam-Status: No, hits=-0.5 required=10.0
	tests=AWL,FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of tsuraan@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 May 2010 22:29:33 +0000
Received: by vws10 with SMTP id 10so4208490vws.35
        for <java-user@lucene.apache.org>; Wed, 26 May 2010 15:29:12 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=PU6p7j+al3vPQeONet1Qh4MNjinarB/7/5darQxhNy0=;
        b=heH7z9RMqRZSc5JYEOmXX2yvRZWcQ/0t1WBl3QKZev9tP+jwRl5K6Cd0D6kK48QNWY
         QrJzguqZRacvbj133f5hzqTrDall7UrJfv8zGpVD+WpiwgOczWtG/SehcJNAPM07v3ob
         uS6R6U8XdsDNx5TJ1pzAZ2Pjd8OV7I9esUU+A=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=XoxIgtWf1ObDWAUaLo+O/wsJbAhOJDDslxrEUijmI/DYlq5dJ231u6PS4S3Rc9A/1x
         FpZ3YD8XNILdLoNd9HAK6rVg2dmgSluRjqknnsWlRwEVRWKw8kTK+GVgBbtqglYBXeU/
         FAGA9dq3mp97zbTntB/oW/LwPgC2Fe9/I1UJo=
MIME-Version: 1.0
Received: by 10.220.61.71 with SMTP id s7mr6847487vch.159.1274912952544; Wed, 
	26 May 2010 15:29:12 -0700 (PDT)
Received: by 10.220.93.74 with HTTP; Wed, 26 May 2010 15:29:12 -0700 (PDT)
Date: Wed, 26 May 2010 17:29:12 -0500
Message-ID: <AANLkTin2DcNr9JhINRIjV-CfTPrdRG5U8JSJVGPLdUiZ@mail.gmail.com>
Subject: Customer TokenFilter
From: tsuraan <tsuraan@gmail.com>
To: java-user <java-user@lucene.apache.org>
Content-Type: text/plain; charset=ISO-8859-1

I'd like to have all my queries and terms run through Unicode
Normalization prior to being executed/indexed.  I've been using the
StandardAnalyzer with pretty good luck for the past few years, so I
think I'd like to write an analyzer that wraps that, and tacks a
custom TokenFilter onto the chain provided by the StandardAnalyzer.
I'm really not clear, though, on how to write a TokenFilter.  My best
guess is that I want to write a class that overrides getAttribute, and
uses java.text.Normalizer to normalize any TermAttribute that is
returned from the upstream filter.  Is that correct, or should I put
my normalization somewhere else?  Are there any docs on making custom
filters/analyzers?  I didn't have much luck finding any.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46238-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 26 23:03:43 2010
Return-Path: <java-user-return-46238-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7625 invoked from network); 26 May 2010 23:03:43 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 May 2010 23:03:43 -0000
Received: (qmail 93733 invoked by uid 500); 26 May 2010 23:03:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93590 invoked by uid 500); 26 May 2010 23:03:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93582 invoked by uid 99); 26 May 2010 23:03:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 May 2010 23:03:41 +0000
X-ASF-Spam-Status: No, hits=-0.5 required=10.0
	tests=AWL,RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.222.187] (HELO mail-pz0-f187.google.com) (209.85.222.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 May 2010 23:03:37 +0000
Received: by pzk17 with SMTP id 17so3829764pzk.5
        for <java-user@lucene.apache.org>; Wed, 26 May 2010 16:03:16 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.141.106.8 with SMTP id i8mr7172253rvm.275.1274914996152; Wed, 
	26 May 2010 16:03:16 -0700 (PDT)
Received: by 10.140.147.18 with HTTP; Wed, 26 May 2010 16:03:16 -0700 (PDT)
In-Reply-To: <000001cafcd7$9d39f5b0$d7ade110$@thetaphi.de>
References: <AANLkTinGIov-d1AsWNetiJyBjyko-QoJvjVAfmN9pOyp@mail.gmail.com>
	<001101cafca6$b87d23a0$29776ae0$@thetaphi.de>
	<000001cafcd7$9d39f5b0$d7ade110$@thetaphi.de>
Date: Thu, 27 May 2010 09:03:16 +1000
Message-ID: <AANLkTinWJ5Lfe9OHZIpTRm0h_buugOPAkH-EnyKYkDa4@mail.gmail.com>
Subject: Re: Filter.getDocIdSet() returning null, and what this means for 
	CachingWrapperFilter
From: Daniel Noll <daniel@nuix.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8

On Wed, May 26, 2010 at 23:30, Uwe Schindler <uwe@thetaphi.de> wrote:
> I opened https://issues.apache.org/jira/browse/LUCENE-2478 and will fix soon!

It does sound like a good idea to not permit a null doc ID set, since
there is a convenient constant for the empty result anyway. :-)

And actually, it turns out that we were returning null due to a
legitimate problem, which makes it an even better idea to prohibit
returning null.  I already changed all the other places where we were
"conforming to the API" ( ;-) ) to return EMPTY_DOCIDSET anyway.

This leaves me with an even bigger mystery though, which will probably
result in another post sooner or later.

Daniel


-- 
Daniel Noll                            Forensic and eDiscovery Software
Senior Developer                              The world's most advanced
Nuix                                                email data analysis
http://nuix.com/                                and eDiscovery software

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46239-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 27 01:23:47 2010
Return-Path: <java-user-return-46239-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58684 invoked from network); 27 May 2010 01:23:46 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 May 2010 01:23:46 -0000
Received: (qmail 98301 invoked by uid 500); 27 May 2010 01:23:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98263 invoked by uid 500); 27 May 2010 01:23:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98253 invoked by uid 99); 27 May 2010 01:23:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 May 2010 01:23:44 +0000
X-ASF-Spam-Status: No, hits=-0.6 required=10.0
	tests=AWL,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 May 2010 01:23:38 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 4E5B171C07F; Wed, 26 May 2010 18:23:18 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 4CC6271C078
	for <java-user@lucene.apache.org>; Wed, 26 May 2010 18:23:18 -0700 (PDT)
Date: Wed, 26 May 2010 18:23:18 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Test File locks
In-Reply-To: <AANLkTim9O__nXZjegvsXt9kste3OngExqvy1LFIl8hOq@mail.gmail.com>
Message-ID: <alpine.DEB.1.10.1005261821130.30807@radix.cryptio.net>
References: <AANLkTim9O__nXZjegvsXt9kste3OngExqvy1LFIl8hOq@mail.gmail.com>
User-Agent: Alpine 1.10 (DEB 962 2008-03-14)
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII


It would be helpful to know:
1) what version of Lucene you are using
2) what exactly like 167 of LibraryBuilder looks like (ie: what options 
are you using when instantiating the IndexWRiter)
3) what filesystems are using on each of the two different machines you 
are using.
4) does it really say "\\whatever\index" ? ... that's the actual directory 
path you are using on both machines?  and that same path works on one 
machine but not the other?


: Date: Tue, 25 May 2010 15:43:27 -0700
: From: Spencer Tickner <spencertickner@gmail.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: Test File locks
: 
: Hi Everyone,
: 
: Thanks in advance for any help.
: 
: I've been building lucene index to a MS Windows Server 2003 test
: environment with no problem. When attempting to build the same index
: onto a Windows Server 2008 machine I get the following error:
: 
: Cannot create directory: \\whatever\index
: 	at org.apache.lucene.store.NativeFSLockFactory.acquireTestLock(NativeFSLockFactory.java:75)
: 	at org.apache.lucene.store.NativeFSLockFactory.makeLock(NativeFSLockFactory.java:142)
: 	at org.apache.lucene.store.Directory.makeLock(Directory.java:146)
: 	at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:1108)
: 	at qp.builder.LibraryBuilder.buildNewLibrary(LibraryBuilder.java:167)
: 
: I found some info via google where people were having a similar issue
: now and then, but this is always. Anyone had a similar issue?
: 
: Thanks,
: 
: Spencer
: 
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
: 



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46240-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 27 08:53:00 2010
Return-Path: <java-user-return-46240-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74218 invoked from network); 27 May 2010 08:53:00 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 May 2010 08:53:00 -0000
Received: (qmail 48542 invoked by uid 500); 27 May 2010 08:52:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48335 invoked by uid 500); 27 May 2010 08:52:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48327 invoked by uid 99); 27 May 2010 08:52:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 May 2010 08:52:54 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=10.0
	tests=AWL,FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ssenecal.work@gmail.com designates 209.85.221.191 as permitted sender)
Received: from [209.85.221.191] (HELO mail-qy0-f191.google.com) (209.85.221.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 May 2010 08:52:48 +0000
Received: by qyk29 with SMTP id 29so9711326qyk.14
        for <java-user@lucene.apache.org>; Thu, 27 May 2010 01:52:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=4Vo14G3GcnhCjeulWrgj+xj15vTlBqdSMmIbrl5jIUQ=;
        b=P9BRjq3aA5Ekvhk8BtJzcpERkWebVCpVOez9js/qtkdNj0j00q0+bQsTXRXW7xGHXK
         lsX8ZpW/iGySoq61xaWo8cqnqxJPNPTFX0AG5l+UkB5mc0xlnCJxyoI3VIdwJQqcvks+
         VmXTnRtCGq9/hVSp71sUaGyqy90oVGNy2fJE4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=eXm2tMVuW9ARLsnycCmsltQ9Cyd8SPQTRBWh0yFfjwZk0nX4BqE61qitAOiK7T3jra
         7sPoGSz4JuvnYCMwrVCbVIN2Bj3k+mCE4n5f+P2bZHPArExwq1Q3dZGK8Jcvw4RP61Ae
         /87l/cXazdFhI3lOWEKJXLrj3eWG8OLo81i9A=
MIME-Version: 1.0
Received: by 10.224.125.132 with SMTP id y4mr5671570qar.191.1274950347183; 
	Thu, 27 May 2010 01:52:27 -0700 (PDT)
Received: by 10.229.74.81 with HTTP; Thu, 27 May 2010 01:52:27 -0700 (PDT)
In-Reply-To: <F4B73923-A5CB-47AF-8B0A-9C6069B6C812@apache.org>
References: <AANLkTiky6kVj31gQN-btyePiz5Tdt-x_PucDF-ISXT24@mail.gmail.com>
	<AANLkTimQpXDaUATcaEzx0wtldXOorLpFcJ-kbkScVp2i@mail.gmail.com>
	<F4B73923-A5CB-47AF-8B0A-9C6069B6C812@apache.org>
Date: Thu, 27 May 2010 17:52:27 +0900
Message-ID: <AANLkTinC5p6Ob_TGa8TGroXgqEEiLFMY3TiFPaxxs5Pj@mail.gmail.com>
Subject: Re: About loading lazily
From: Shaun Senecal <ssenecal.work@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Haha, sorry, ignore my response completely.  I used the same term for
something completely different, and not related to Lucene at all :)


On Mon, May 24, 2010 at 8:06 PM, Grant Ingersoll <gsingers@apache.org> wrot=
e:
> I'd also add that the Document keeps a pointer to the spot in storage whe=
re that value can be loaded from. =A0It can result in a performance saving =
in the typical search use case where one is displaying just "metadata" fiel=
ds on a page, but not the full content. =A0In this case, the full content p=
age is loaded lazily while the smaller metadata fields are loaded as usual.
>
> -Grant
>
> On May 24, 2010, at 12:15 AM, Shaun Senecal wrote:
>
>> When a field is lazy loaded, the actual value is not retrieved from
>> the server until it is rendered by the UI. =A0This is the same behaviour
>> as the LiveView that ExtGWT currently supports. =A0The difference is
>> that once a value has been retrieved once, LazyLoad will not fetch
>> that value from the server again. =A0LiveView will request the same
>> values over and over again as the user scrolls up and down.
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46241-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 27 09:00:57 2010
Return-Path: <java-user-return-46241-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75809 invoked from network); 27 May 2010 09:00:57 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 May 2010 09:00:57 -0000
Received: (qmail 60243 invoked by uid 500); 27 May 2010 09:00:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59992 invoked by uid 500); 27 May 2010 09:00:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59983 invoked by uid 99); 27 May 2010 09:00:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 May 2010 09:00:51 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of nikolazius@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 May 2010 09:00:44 +0000
Received: by fxm19 with SMTP id 19so612109fxm.35
        for <java-user@lucene.apache.org>; Thu, 27 May 2010 02:00:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:sender:received
         :in-reply-to:references:date:x-google-sender-auth:message-id:subject
         :from:to:content-type;
        bh=vFTdtYD16mBc8Ejq0ziJkRJBsp3JjWHg3apltbmyWMw=;
        b=VlULtdXowx9OBoi9oDA/MUBnQQ8M+TssBujY4eL5PJQxjzoBQUVb0iVuMWjxXX7Kw5
         RbZxXjRIWHZdXCDGpGgrF59qIvA9ABAQ/P5cqjdCgqJ1Qcz5tqsP4IoEH4VFLvJ55pMA
         qLRsUF9x1gVa5vgRGx6nJKjvYj30bS/yDdb9M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:in-reply-to:references:date
         :x-google-sender-auth:message-id:subject:from:to:content-type;
        b=WPawRFNZRogTtoEIBjuihvdEJCRvVJeSSD63EAqtIZSQNQeGYdeU2R+vEqoyIEBPh9
         YL83+Xt/ErwWwB0F50mIvdgQhh91pD3tEM2uA2B939/DcW86T0gHBl5uYWfRjhaCOJBi
         i1mxyLkr5GDBaasakea7QTIpMhI23S7l8/5yc=
MIME-Version: 1.0
Received: by 10.102.226.1 with SMTP id y1mr6938814mug.0.1274950821676; Thu, 27 
	May 2010 02:00:21 -0700 (PDT)
Sender: nikolazius@gmail.com
Received: by 10.103.199.9 with HTTP; Thu, 27 May 2010 02:00:21 -0700 (PDT)
In-Reply-To: <AANLkTik8sJUJayIR8Z951jv0okBG2utkcFerxygaKO94@mail.gmail.com>
References: <AANLkTik8sJUJayIR8Z951jv0okBG2utkcFerxygaKO94@mail.gmail.com>
Date: Thu, 27 May 2010 12:00:21 +0300
X-Google-Sender-Auth: 8gz9I3fNhHl1Kg4gfKJb3OE_6WA
Message-ID: <AANLkTilyD1Z8meYvWpyMFUKs6oZTQZRMIWeBxUgWxdt0@mail.gmail.com>
Subject: IndexReader.getSequentialSubReaders() usage in Lucene 2.9+
From: Nikolay Zamosenchuk <nikolay.zamosenchuk@exoplatform.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Hi, Dear colleagues!
I have one question concerning IndexReader.getSequentialSubReaders()
and it's usage.

Imagine there is a class extending DirectoryReader or MultiReader.
Usually directory- or multi-reader consists of sub-readers (i.e.
segment-readers). Is it safe enough to return always null in
IndexReader.getSequentialSubReaders() ?

We have a special Query and Weight classes that relies on custom
extended IndexReader. If this method (getSequentialSubReaders) is not
overridden, then our Weight class receives ReadOnlySegmentReader
instance.
I found that IndexSearcher.search(...) method changed in lucene
2.4.1->2.9.2, so subReaders are passed instead of original reader.
I've also found, that returning null in
IndexReader.getSequentialSubReaders() will avoid usage of subReaders.
Seems returning the null helped and tests pessed.
But there is a question, is it safe enough to return null in
IndexReader.getSequentialSubReaders() ? Would it break some internal
logic?

Thanks much!
--
Best regards, Nikolay Zamosenchuk
eXo (UA)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46242-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 27 09:38:01 2010
Return-Path: <java-user-return-46242-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88000 invoked from network); 27 May 2010 09:38:00 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 May 2010 09:38:00 -0000
Received: (qmail 97770 invoked by uid 500); 27 May 2010 09:37:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97599 invoked by uid 500); 27 May 2010 09:37:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97591 invoked by uid 99); 27 May 2010 09:37:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 May 2010 09:37:55 +0000
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLYTO,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of simon.willnauer@googlemail.com designates 72.14.220.154 as permitted sender)
Received: from [72.14.220.154] (HELO fg-out-1718.google.com) (72.14.220.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 May 2010 09:37:49 +0000
Received: by fg-out-1718.google.com with SMTP id 22so363601fge.5
        for <java-user@lucene.apache.org>; Thu, 27 May 2010 02:37:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:reply-to
         :in-reply-to:references:date:message-id:subject:from:to:content-type;
        bh=0gqZ0BYDDbKxAqx5UVo8mlDYtJlx3G+G4i0loziXiQw=;
        b=f9UUaNakX1zYoeuo5lWkdeUH5oWZjfG+i8lN9b6LahUDJghkSHVqUo7Et3p/gTt0HQ
         BiO2nBqruxWqPz8xQNif8TmyA/78BKKghUVDHo0dbAFn6affZaNdzO2ZF2V/nw7//T21
         dZWLFKuVM0aY46hTJo/3GbprPyeG5A5cqfygA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type;
        b=c0bBcKSfuYn1u84heAeUiuhxevVEOdVOpgyBPpQf3jZNDBwJFoqCd+fND05o0K9AhZ
         O0h37K+bBhL4cBCpeoXDVacwkZUXqWyE4//F3cORFEaumU6/xPKdh5imaqNsc5MCJZpv
         +UmK0it4dxTcG449Q5AYgsKTRaXEcNnDWuL1A=
MIME-Version: 1.0
Received: by 10.239.189.139 with SMTP id t11mr866344hbh.17.1274953048919; Thu, 
	27 May 2010 02:37:28 -0700 (PDT)
Received: by 10.239.135.209 with HTTP; Thu, 27 May 2010 02:37:28 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <AANLkTilyD1Z8meYvWpyMFUKs6oZTQZRMIWeBxUgWxdt0@mail.gmail.com>
References: <AANLkTik8sJUJayIR8Z951jv0okBG2utkcFerxygaKO94@mail.gmail.com>
	<AANLkTilyD1Z8meYvWpyMFUKs6oZTQZRMIWeBxUgWxdt0@mail.gmail.com>
Date: Thu, 27 May 2010 11:37:28 +0200
Message-ID: <AANLkTimbCTZo-L_d40qeyAqs_yugS7X71YCgC4d5yEqN@mail.gmail.com>
Subject: Re: IndexReader.getSequentialSubReaders() usage in Lucene 2.9+
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

Hey Nikolay,

On Thu, May 27, 2010 at 11:00 AM, Nikolay Zamosenchuk
<nikolay.zamosenchuk@exoplatform.com> wrote:
> Hi, Dear colleagues!
> I have one question concerning IndexReader.getSequentialSubReaders()
> and it's usage.

getSequentialSubReaders() was introduced to support Per-Segment Search
in Lucene 2.9. It is used to access the readers a higher level reader
is composed of.
If you have a reader not being composed of a set of other readers this
method does nothing.
>
> Imagine there is a class extending DirectoryReader or MultiReader.
> Usually directory- or multi-reader consists of sub-readers (i.e.
> segment-readers). Is it safe enough to return always null in
> IndexReader.getSequentialSubReaders() ?

Yes it is safe to do so - actually the java doc says that you should
return null if you reader is not composed from child readers.

>
> We have a special Query and Weight classes that relies on custom
> extended IndexReader. If this method (getSequentialSubReaders) is not
> overridden, then our Weight class receives ReadOnlySegmentReader
> instance.

IndexSearcher tries to gather all subreaders from a Top-Level reader
when it is initialized. If you wanna use your top-level reader to be
the only reader used for searches just return null.
> I found that IndexSearcher.search(...) method changed in lucene
> 2.4.1->2.9.2, so subReaders are passed instead of original reader.
> I've also found, that returning null in
> IndexReader.getSequentialSubReaders() will avoid usage of subReaders.
> Seems returning the null helped and tests pessed.
> But there is a question, is it safe enough to return null in
> IndexReader.getSequentialSubReaders() ? Would it break some internal
> logic?

Afaik It would not break any logic though but if you work around per
segment readers you might not be able to benefit from the improvements
made by per segment search. In short: Per-Segment search uses
subreaders (SegementReaders) to reference for instance caches or
filters. If you use your top level reader for searches directly you
force lucene to invalidate all references where the reader is used if
the instance changes. While if you use segment readers you only need
to invalidate the caches of the segments which have changed.

simon


>
> Thanks much!
> --
> Best regards, Nikolay Zamosenchuk
> eXo (UA)
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46243-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 27 10:13:00 2010
Return-Path: <java-user-return-46243-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2147 invoked from network); 27 May 2010 10:13:00 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 May 2010 10:13:00 -0000
Received: (qmail 39761 invoked by uid 500); 27 May 2010 10:12:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39555 invoked by uid 500); 27 May 2010 10:12:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39541 invoked by uid 99); 27 May 2010 10:12:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 May 2010 10:12:54 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.83.48] (HELO mail-gw0-f48.google.com) (74.125.83.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 May 2010 10:12:47 +0000
Received: by gwj23 with SMTP id 23so3787131gwj.35
        for <java-user@lucene.apache.org>; Thu, 27 May 2010 03:12:22 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.150.180.16 with SMTP id c16mr10742079ybf.59.1274955139559; 
	Thu, 27 May 2010 03:12:19 -0700 (PDT)
Received: by 10.151.11.20 with HTTP; Thu, 27 May 2010 03:12:19 -0700 (PDT)
In-Reply-To: <4BFD25CB.6090108@mufin.com>
References: <4BFD25CB.6090108@mufin.com>
Date: Thu, 27 May 2010 06:12:19 -0400
Message-ID: <AANLkTimFy2uRpxyfog0rSCvdLSiWYh8QS5WbMzLaf6HD@mail.gmail.com>
Subject: Re: IndexSearcher - open file handles by deleted files
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Just closing IndexSearcher should be enough.

Are you really sure you're closing all IndexSearchers you've opened?

Hmm the code looks somewhat dangerous.  Why sleep for 10 seconds
before closing?  Is this to ensure any in-flight queries finish?  It's
better to explicitly track this (eg w/ IndexReader's incRef/decRef).

What if determineIndexDirectories is called again before 10 seconds have pa=
ssed?

Mike

On Wed, May 26, 2010 at 9:44 AM, Thomas Rewig <trewig@mufin.com> wrote:
> Hello,
>
> I use Lucene 2.9.1 with two indices, which alternate each day. One is liv=
e,
> the other is erased and renewed with the latest data.
> The problem is that the index files will be deleted, but the file handles
> are still available. If the program (JBOSS) is not restarted for some tim=
e,
> the disk space is scarce.
>
> With lsof I see e.g:
>
> java =A0 =A0 =A0 6054 =A0 =A0 =A0 =A0root =A0 80r =A0 =A0 =A0REG =A0 =A0 =
=A0 =A0 =A0 =A0 =A0 =A08,1 5939406525
> =A084663 /usr/_index/2/item3_index/_2fdtq2.cfs (deleted)
> java =A0 =A0 =A0 6054 =A0 =A0 =A0 =A0root =A0 82r =A0 =A0 =A0REG =A0 =A0 =
=A0 =A0 =A0 =A0 =A0 =A08,1 =A0401785779
> =A078344 /usr/_index/2/item2_index/_5exkf.cfs (deleted)
> java =A0 =A0 =A0 6054 =A0 =A0 =A0 =A0root =A0 84r =A0 =A0 =A0REG =A0 =A0 =
=A0 =A0 =A0 =A0 =A0 =A08,1 =A0106496943
> =A072217 /usr/_index/2/item1_index/_85bld.cfs (deleted)
> java =A0 =A0 =A0 6054 =A0 =A0 =A0 =A0root =A0147r =A0 =A0 =A0REG =A0 =A0 =
=A0 =A0 =A0 =A0 =A0 =A08,1 5939406525
> =A084663 /usr/_index/2/item3_index/_2fdtq2.cfs (deleted)
> java =A0 =A0 =A0 6054 =A0 =A0 =A0 =A0root =A0150r =A0 =A0 =A0REG =A0 =A0 =
=A0 =A0 =A0 =A0 =A0 =A08,1 =A0401785779
> =A078344 /usr/_index/2/item2_index/_5exkf.cfs (deleted)
>
> ### open the a specific searcher: ###
>
> =A0 public static Searcher getSearcher(String indexName)
> =A0 throws IOException
> =A0 {
> =A0 =A0 =A0 Searcher searcher =3D searchersList.get(indexName);
> =A0 =A0 =A0 if(searcher =3D=3D null) {
> =A0 =A0 =A0 =A0 =A0 String path =3D getPath(subDir, indexName);
> =A0 =A0 =A0 =A0 =A0 Directory directory =3D new NIOFSDirectory(new File(p=
ath));
> =A0 =A0 =A0 =A0 =A0 searcher =3D new IndexSearcher(directory, true);
> =A0 =A0 =A0 =A0 =A0 directoriesList.put(indexName, directory);
> =A0 =A0 =A0 =A0 =A0 searchersList.put(indexName, searcher);
> =A0 =A0 =A0 }
> =A0 =A0 =A0 return searcher;
> =A0 }
>
> ### switch the searchers: ###
>
> =A0 public static void determineIndexDirectories() {
> =A0 =A0 =A0 searchersListOld =3D searchersList;
> =A0 =A0 =A0 searchersList =3D new Hashtable<String, Searcher>();
> =A0 =A0 =A0 directoriesListOld =3D directoriesList;
> =A0 =A0 =A0 directoriesList =3D new Hashtable<String, Directory>();
>
> =A0 =A0 =A0 subDir =3D getLastIndexDir();
>
> =A0 =A0 =A0 closeOldSearchers();
> =A0 }
>
> ### close the searchers: ###
>
> =A0 private static void closeOldSearchers() {
> =A0 =A0 =A0 new Thread() {
> =A0 =A0 =A0 =A0 =A0 public void run() {
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 try {
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 sleep(10*1000);
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 } catch (InterruptedException e) {
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 logger.error("IndexManager.closeOldSe=
archers", e);
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 }
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 for(Searcher sear=
cher :
> searchersListOld.values()) {
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 try {
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 searcher.close();
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 } catch (IOException e) {
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 logger.error("Error closing S=
earcher.", e);
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 }
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 }
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 searchersListOld.clear();
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 searchersListOld =3D null;
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 for(Directory dir=
ectory :
> directoriesListOld.values()) {
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 try {
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 directory.close();
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 } catch (IOException e) {
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 logger.error("Error closing D=
irectory.", e);
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 }
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 }
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 directoriesListOld.clear();
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 directoriesListOld =3D null;
> =A0 =A0 =A0 =A0 =A0 }
> =A0 =A0 =A0 }.start();
> =A0 }
>
> I search for this problem in the mailing list, and there are similar
> Problems with a not correctly closed IndexReader.
>
> If I create a IndexSearcher with a directory could it be that there is a
> similar problem, e.g. the under lying IndexReader (if there is one) close=
s
> not automatically if i close searcher.close()?
> Do I have to close something else, than all IndexSearchers and Directorys=
?
> Or am I wrong with my assumption, and the problem is somewhere else?
>
> Best
> Thomas
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46244-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 27 15:53:02 2010
Return-Path: <java-user-return-46244-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19789 invoked from network); 27 May 2010 15:53:02 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 May 2010 15:53:02 -0000
Received: (qmail 50896 invoked by uid 500); 27 May 2010 15:53:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50836 invoked by uid 500); 27 May 2010 15:52:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50828 invoked by uid 99); 27 May 2010 15:52:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 May 2010 15:52:59 +0000
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=AWL,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of srbh.grwl@gmail.com designates 209.85.212.176 as permitted sender)
Received: from [209.85.212.176] (HELO mail-px0-f176.google.com) (209.85.212.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 May 2010 15:52:53 +0000
Received: by pxi10 with SMTP id 10so66652pxi.35
        for <java-user@lucene.apache.org>; Thu, 27 May 2010 08:52:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=Z48qRcGFZ6gX7HM8oXKKq2lpsPV034+HqfCLIDx1hbI=;
        b=mFbTXoCSYRftqYvUAt68wbsrB+NHppUXxzKZtRb5wRigrYQYfioD+pcSfFckmJRicQ
         0CgBFymuROgOy7XTiWPmNTzbCyC21NFNB2RwdBgDVHgDBv+ufRxfxQGpAlmGGF58eEZy
         ZpcS2o1rw6vPfk+v8tFi2l5kLTrvVjQdKoJxQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=JdCzzeeGOefMvzodxqz/5aSYLuQla7g8lKMIYGXNeL59iylNwoGHPl1j6PpvOTkrhN
         aEDxq0RDgCPOxYxRtX0CA9t7eqos/l/UCsQ764H0oCbcvAV91qeo/Vy6SLJxx20IqPtV
         eH8XblOiO2X0afT2zMyqXb4QMb3QdnWuAgDkI=
MIME-Version: 1.0
Received: by 10.142.7.11 with SMTP id 11mr7252758wfg.136.1274975552545; Thu, 
	27 May 2010 08:52:32 -0700 (PDT)
Received: by 10.143.163.6 with HTTP; Thu, 27 May 2010 08:52:32 -0700 (PDT)
Date: Thu, 27 May 2010 21:22:32 +0530
Message-ID: <AANLkTinf518tzyiyDTvOP9-IhAWifodI6I9dSc61_ruy@mail.gmail.com>
Subject: Core dumped
From: Saurabh Agarwal <srbh.grwl@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00504502bc34e8241c048795605b

--00504502bc34e8241c048795605b
Content-Type: text/plain; charset=ISO-8859-1

Hi,
when I am running Lucene on a 512 MB system.
I am getting the following error
Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
        at
org.apache.lucene.index.DocumentsWriter$ByteBlockAllocator.getByteBlock(DocumentsWriter.java:1206)
and sometimes
 An unexpected error has been detected by Java Runtime Environment:
# Problematic frame:
# J  java.nio.ByteBuffer.arrayOffset()I


if I decrease my corpus size it indexes it perfectly!!!

Can someone tell me how to index a larger corpus even if it takes more
time!!!

Thanks

Saurabh Agarwal

--00504502bc34e8241c048795605b--

From java-user-return-46245-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 27 16:09:06 2010
Return-Path: <java-user-return-46245-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29306 invoked from network); 27 May 2010 16:09:06 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 May 2010 16:09:06 -0000
Received: (qmail 88868 invoked by uid 500); 27 May 2010 16:09:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88813 invoked by uid 500); 27 May 2010 16:09:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88805 invoked by uid 99); 27 May 2010 16:09:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 May 2010 16:09:04 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of spencertickner@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 May 2010 16:08:57 +0000
Received: by vws3 with SMTP id 3so128971vws.35
        for <java-user@lucene.apache.org>; Thu, 27 May 2010 09:08:36 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=Pj9UmmYVMzMzt/Yqn326b5EQ7ovLB06DoVdbgOTJE1s=;
        b=qwbnneYCHtst87M5BbPXG4ENkgNNWlU3Bu5wpafch2MNaXnXvcynIQGw/D6sfhIkZM
         VdfR/hltVhj5sghqrbXAIUgoYt3GrFkH9xxhc5g/IGPd4TCEcmeM+zFZ8eyBuqIs5L0r
         TgcV3bZrVr3dnSEnx1kztkIq+n/CgRvQENf+4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=KHZcI70ObT+Hcl3GkvCXmO4V7oj/8kOPnY6Ih+3Bu6YtOSzAH3bIvT76WY7g5rAq2e
         mVHRhRWt/5kD/WkIZyCvCGb5bT+05WylenCM9aPyosoEsPNkJ7dMvkrlOXBSKbkik9HD
         0Y+TbmiL5Nx8ODMg4NYEcSytIlKbeg26C3k/c=
MIME-Version: 1.0
Received: by 10.220.59.133 with SMTP id l5mr245729vch.269.1274976516589; Thu, 
	27 May 2010 09:08:36 -0700 (PDT)
Received: by 10.220.70.196 with HTTP; Thu, 27 May 2010 09:08:36 -0700 (PDT)
In-Reply-To: <alpine.DEB.1.10.1005261821130.30807@radix.cryptio.net>
References: <AANLkTim9O__nXZjegvsXt9kste3OngExqvy1LFIl8hOq@mail.gmail.com>
	<alpine.DEB.1.10.1005261821130.30807@radix.cryptio.net>
Date: Thu, 27 May 2010 09:08:36 -0700
Message-ID: <AANLkTimYtbKDa2L4bsT5tKKVUJ4gcbtT6k52j8tk-_nc@mail.gmail.com>
Subject: Re: Test File locks
From: Spencer Tickner <spencertickner@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Ian and Chris,

Thanks for the responses.

I seem to have jarred the lock loose. Not exactly sure what step did
it as I tried tweeking the OS, using Ian's suggestion of the
SimpleFSLockFactory and tried various UNC paths to specify the
directory. I've tried to work backwards to re-create the problem but
alas, everything seems to be working fine.

I'll post the specific problem if I can find it.

Thanks,

Spencer



On Wed, May 26, 2010 at 6:23 PM, Chris Hostetter
<hossman_lucene@fucit.org> wrote:
>
> It would be helpful to know:
> 1) what version of Lucene you are using
> 2) what exactly like 167 of LibraryBuilder looks like (ie: what options
> are you using when instantiating the IndexWRiter)
> 3) what filesystems are using on each of the two different machines you
> are using.
> 4) does it really say "\\whatever\index" ? ... that's the actual director=
y
> path you are using on both machines? =C2=A0and that same path works on on=
e
> machine but not the other?
>
>
> : Date: Tue, 25 May 2010 15:43:27 -0700
> : From: Spencer Tickner <spencertickner@gmail.com>
> : Reply-To: java-user@lucene.apache.org
> : To: java-user@lucene.apache.org
> : Subject: Test File locks
> :
> : Hi Everyone,
> :
> : Thanks in advance for any help.
> :
> : I've been building lucene index to a MS Windows Server 2003 test
> : environment with no problem. When attempting to build the same index
> : onto a Windows Server 2008 machine I get the following error:
> :
> : Cannot create directory: \\whatever\index
> : =C2=A0 =C2=A0 =C2=A0 at org.apache.lucene.store.NativeFSLockFactory.acq=
uireTestLock(NativeFSLockFactory.java:75)
> : =C2=A0 =C2=A0 =C2=A0 at org.apache.lucene.store.NativeFSLockFactory.mak=
eLock(NativeFSLockFactory.java:142)
> : =C2=A0 =C2=A0 =C2=A0 at org.apache.lucene.store.Directory.makeLock(Dire=
ctory.java:146)
> : =C2=A0 =C2=A0 =C2=A0 at org.apache.lucene.index.IndexWriter.<init>(Inde=
xWriter.java:1108)
> : =C2=A0 =C2=A0 =C2=A0 at qp.builder.LibraryBuilder.buildNewLibrary(Libra=
ryBuilder.java:167)
> :
> : I found some info via google where people were having a similar issue
> : now and then, but this is always. Anyone had a similar issue?
> :
> : Thanks,
> :
> : Spencer
> :
> : ---------------------------------------------------------------------
> : To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> : For additional commands, e-mail: java-user-help@lucene.apache.org
> :
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46246-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 27 17:02:25 2010
Return-Path: <java-user-return-46246-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45631 invoked from network); 27 May 2010 17:02:25 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 May 2010 17:02:25 -0000
Received: (qmail 1991 invoked by uid 500); 27 May 2010 17:02:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1954 invoked by uid 500); 27 May 2010 17:02:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1946 invoked by uid 99); 27 May 2010 17:02:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 May 2010 17:02:22 +0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=AWL,FREEMAIL_FROM,HTML_FONT_FACE_BAD,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.160.176 as permitted sender)
Received: from [209.85.160.176] (HELO mail-gy0-f176.google.com) (209.85.160.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 May 2010 17:02:16 +0000
Received: by gyf1 with SMTP id 1so187934gyf.35
        for <java-user@lucene.apache.org>; Thu, 27 May 2010 10:01:55 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=5Mmma199ltS2mJqxO+Axy0m9nLyFy6TK9dqNBPCLQI4=;
        b=Fc+NeYfF72yk4vl1ZTUwxYee8PZbQLQby+mcOI6SxAocEUC1K6stfEfvQjUv1/2lnk
         I/5r5qMSeITmE/D+SIhA/n5XU3AeSRHZp613C20AO0My5wdLXoCei4EK3QZ4MImGcJFW
         M1MBs+qFKNd6kbZpNuaMtEECS9QSX1gPNCTNY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=YXmnBSNIyt+Afws//Df/R96GdVnQRMdo+mOsolHYxyRukNXC59TXQ+qSjmmknNj1sX
         AifxWbHS8Xs8vy8VN2B80v297mBJi7POLbntLHPpIeCa3lXolvigzONzF4mlc5RkvTHY
         Dso8S60pitcQPamASJM4NZvOnqy6gBafnzn8k=
MIME-Version: 1.0
Received: by 10.151.29.6 with SMTP id g6mr314204ybj.314.1274979715782; Thu, 27 
	May 2010 10:01:55 -0700 (PDT)
Received: by 10.151.43.7 with HTTP; Thu, 27 May 2010 10:01:55 -0700 (PDT)
In-Reply-To: <AANLkTinf518tzyiyDTvOP9-IhAWifodI6I9dSc61_ruy@mail.gmail.com>
References: <AANLkTinf518tzyiyDTvOP9-IhAWifodI6I9dSc61_ruy@mail.gmail.com>
Date: Thu, 27 May 2010 13:01:55 -0400
Message-ID: <AANLkTil1h3YRqCkJpnRMl0Q9fC3lRLX-auOD33g7frzL@mail.gmail.com>
Subject: Re: Core dumped
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd34c340e184804879659e4

--000e0cd34c340e184804879659e4
Content-Type: text/plain; charset=ISO-8859-1

What have you set various indexwriter properties to? Particularly
things like merge factor, max buffered docs and ram buffer size.

The first thing I'd look at is MergeFactor. From the JavaDocs:
Determines how often segment indices are merged by addDocument(). With
smaller values, less RAM is used while indexing, and searches on unoptimized
indices are faster, but indexing speed is slower. With larger values, more
RAM is used during indexing, and while searches on unoptimized indices are
slower, indexing is faster. Thus larger values (> 10) are best for batch
index creation, and smaller values (< 10) for indices that are interactively
maintained.


HTH
Erick

On Thu, May 27, 2010 at 11:52 AM, Saurabh Agarwal <srbh.grwl@gmail.com>wrote:

> Hi,
> when I am running Lucene on a 512 MB system.
> I am getting the following error
> Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
>        at
>
> org.apache.lucene.index.DocumentsWriter$ByteBlockAllocator.getByteBlock(DocumentsWriter.java:1206)
> and sometimes
>  An unexpected error has been detected by Java Runtime Environment:
> # Problematic frame:
> # J  java.nio.ByteBuffer.arrayOffset()I
>
>
> if I decrease my corpus size it indexes it perfectly!!!
>
> Can someone tell me how to index a larger corpus even if it takes more
> time!!!
>
> Thanks
>
> Saurabh Agarwal
>

--000e0cd34c340e184804879659e4--

From java-user-return-46247-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 27 17:28:43 2010
Return-Path: <java-user-return-46247-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54894 invoked from network); 27 May 2010 17:28:43 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 May 2010 17:28:43 -0000
Received: (qmail 30042 invoked by uid 500); 27 May 2010 17:28:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30005 invoked by uid 500); 27 May 2010 17:28:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29997 invoked by uid 99); 27 May 2010 17:28:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 May 2010 17:28:40 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of srbh.grwl@gmail.com designates 74.125.83.176 as permitted sender)
Received: from [74.125.83.176] (HELO mail-pv0-f176.google.com) (74.125.83.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 May 2010 17:28:32 +0000
Received: by pvf33 with SMTP id 33so134354pvf.35
        for <java-user@lucene.apache.org>; Thu, 27 May 2010 10:28:11 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=dcTRIfHKUQjnP02mKwUxf8SdgaQ5b7KI/RsrfCs34Xg=;
        b=HqAqNpZTmKT+Wkm2MzDtPD/LELzyaRcFVVbkbz7k+25ZqTeq5D0PfyptLzwnBiwWCH
         D92zgl1DbgxUFNPHF4vlOLxoMroCTOWQboTkvcXCfwkYdlrzcFEMHDPr/YiruljHTKl4
         UikEQ45fwRPc2Ez4O1aeSmalsqG/Pva3S9MFw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=x38wLYP0pUCiv87zKqEh9yvyJz4W9Uq/LXl150XHgq/uX45KYr2i4wSMcVFM4VbNMB
         jkD9Q8G380AjuqHhtYePk1Bnp01679RsrpSdPT39sumvGkVpGnl/tNiMRwvcr+Vma4Dw
         WAUe2hePMVsjXNKDnq99OdI6SpkNA6PLzp+8E=
MIME-Version: 1.0
Received: by 10.143.26.21 with SMTP id d21mr7325659wfj.225.1274981291414; Thu, 
	27 May 2010 10:28:11 -0700 (PDT)
Received: by 10.143.163.6 with HTTP; Thu, 27 May 2010 10:28:11 -0700 (PDT)
In-Reply-To: <AANLkTil1h3YRqCkJpnRMl0Q9fC3lRLX-auOD33g7frzL@mail.gmail.com>
References: <AANLkTinf518tzyiyDTvOP9-IhAWifodI6I9dSc61_ruy@mail.gmail.com>
	<AANLkTil1h3YRqCkJpnRMl0Q9fC3lRLX-auOD33g7frzL@mail.gmail.com>
Date: Thu, 27 May 2010 22:58:11 +0530
Message-ID: <AANLkTilnE4wmw-_l7cylifzlqqNsQAPBPkxFCNpbpI9x@mail.gmail.com>
Subject: Re: Core dumped
From: Saurabh Agarwal <srbh.grwl@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636e0aec5f8556a048796b63d
X-Virus-Checked: Checked by ClamAV on apache.org

--001636e0aec5f8556a048796b63d
Content-Type: text/plain; charset=ISO-8859-1

RAMBufferSize id 50 Mb, i tried with 200 too
the index is unoptimized
MergeFactor is Default 10 and I have not changed it

MaxBuffered Docs is also default
Saurabh Agarwal


On Thu, May 27, 2010 at 10:31 PM, Erick Erickson <erickerickson@gmail.com>wrote:

> What have you set various indexwriter properties to? Particularly
> things like merge factor, max buffered docs and ram buffer size.
>
> The first thing I'd look at is MergeFactor. From the JavaDocs:
> Determines how often segment indices are merged by addDocument(). With
> smaller values, less RAM is used while indexing, and searches on
> unoptimized
> indices are faster, but indexing speed is slower. With larger values, more
> RAM is used during indexing, and while searches on unoptimized indices are
> slower, indexing is faster. Thus larger values (> 10) are best for batch
> index creation, and smaller values (< 10) for indices that are
> interactively
> maintained.
>
>
> HTH
> Erick
>
> On Thu, May 27, 2010 at 11:52 AM, Saurabh Agarwal <srbh.grwl@gmail.com
> >wrote:
>
> > Hi,
> > when I am running Lucene on a 512 MB system.
> > I am getting the following error
> > Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
> >        at
> >
> >
> org.apache.lucene.index.DocumentsWriter$ByteBlockAllocator.getByteBlock(DocumentsWriter.java:1206)
> > and sometimes
> >  An unexpected error has been detected by Java Runtime Environment:
> > # Problematic frame:
> > # J  java.nio.ByteBuffer.arrayOffset()I
> >
> >
> > if I decrease my corpus size it indexes it perfectly!!!
> >
> > Can someone tell me how to index a larger corpus even if it takes more
> > time!!!
> >
> > Thanks
> >
> > Saurabh Agarwal
> >
>

--001636e0aec5f8556a048796b63d--

From java-user-return-46248-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 27 17:43:41 2010
Return-Path: <java-user-return-46248-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58516 invoked from network); 27 May 2010 17:43:41 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 May 2010 17:43:41 -0000
Received: (qmail 53986 invoked by uid 500); 27 May 2010 17:43:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53947 invoked by uid 500); 27 May 2010 17:43:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53939 invoked by uid 99); 27 May 2010 17:43:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 May 2010 17:43:39 +0000
X-ASF-Spam-Status: No, hits=4.7 required=10.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLY,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.160.176 as permitted sender)
Received: from [209.85.160.176] (HELO mail-gy0-f176.google.com) (209.85.160.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 May 2010 17:43:31 +0000
Received: by gyf1 with SMTP id 1so242540gyf.35
        for <java-user@lucene.apache.org>; Thu, 27 May 2010 10:43:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=O3IQzqySCNu1TMKTMRHnsDc4yYm47TdCygmmSiQjXgE=;
        b=Elv0UsRYuYYkYmkl1H5qgkHQer5sAiZgeUsG1N+AVE2FwauhYc5DtDMqROQbZ+m0Hb
         6DXlsUlNs+nQU/oUWu1c6+TzdARVlvpspsSLXIWhm/lO59E+9bJf/QPBk4gnHAAUz59b
         Ep3sqgeiFw1Fl+uURKaXzmvLtEP4gac+QFyhA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=MkwtfsurFhY6tKBzvrPDCZkRmdcRXl59ccxP0VuuQIOMwEOOMFKSIltuuMw2gjP+Q1
         82HFnyQ0cTbJwWXG1akOyJjqybM96gnzbBJW9eP3xQX0pI9QhENqoQII+pITQZMeh43M
         KKY7H9Xl9cmPPVicNj4D6v5iOSK0VT9djeU9I=
MIME-Version: 1.0
Received: by 10.151.25.6 with SMTP id c6mr506945ybj.163.1274982189830; Thu, 27 
	May 2010 10:43:09 -0700 (PDT)
Received: by 10.151.43.7 with HTTP; Thu, 27 May 2010 10:43:09 -0700 (PDT)
In-Reply-To: <AANLkTilnE4wmw-_l7cylifzlqqNsQAPBPkxFCNpbpI9x@mail.gmail.com>
References: <AANLkTinf518tzyiyDTvOP9-IhAWifodI6I9dSc61_ruy@mail.gmail.com>
	<AANLkTil1h3YRqCkJpnRMl0Q9fC3lRLX-auOD33g7frzL@mail.gmail.com>
	<AANLkTilnE4wmw-_l7cylifzlqqNsQAPBPkxFCNpbpI9x@mail.gmail.com>
Date: Thu, 27 May 2010 13:43:09 -0400
Message-ID: <AANLkTik6v5I9ej5EMH1je_qIEgCYDUBYU0miHttCIiEh@mail.gmail.com>
Subject: Re: Core dumped
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd2a05e851219048796ec66
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd2a05e851219048796ec66
Content-Type: text/plain; charset=ISO-8859-1

The larger your RAMbufferSize, the more memory you consume FWIW.

OK, then, does it always OOM on the same document? Are you trying to index
any particularly large documents?

Erick

On Thu, May 27, 2010 at 1:28 PM, Saurabh Agarwal <srbh.grwl@gmail.com>wrote:

> RAMBufferSize id 50 Mb, i tried with 200 too
> the index is unoptimized
> MergeFactor is Default 10 and I have not changed it
>
> MaxBuffered Docs is also default
> Saurabh Agarwal
>
>
> On Thu, May 27, 2010 at 10:31 PM, Erick Erickson <erickerickson@gmail.com
> >wrote:
>
> > What have you set various indexwriter properties to? Particularly
> > things like merge factor, max buffered docs and ram buffer size.
> >
> > The first thing I'd look at is MergeFactor. From the JavaDocs:
> > Determines how often segment indices are merged by addDocument(). With
> > smaller values, less RAM is used while indexing, and searches on
> > unoptimized
> > indices are faster, but indexing speed is slower. With larger values,
> more
> > RAM is used during indexing, and while searches on unoptimized indices
> are
> > slower, indexing is faster. Thus larger values (> 10) are best for batch
> > index creation, and smaller values (< 10) for indices that are
> > interactively
> > maintained.
> >
> >
> > HTH
> > Erick
> >
> > On Thu, May 27, 2010 at 11:52 AM, Saurabh Agarwal <srbh.grwl@gmail.com
> > >wrote:
> >
> > > Hi,
> > > when I am running Lucene on a 512 MB system.
> > > I am getting the following error
> > > Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
> > >        at
> > >
> > >
> >
> org.apache.lucene.index.DocumentsWriter$ByteBlockAllocator.getByteBlock(DocumentsWriter.java:1206)
> > > and sometimes
> > >  An unexpected error has been detected by Java Runtime Environment:
> > > # Problematic frame:
> > > # J  java.nio.ByteBuffer.arrayOffset()I
> > >
> > >
> > > if I decrease my corpus size it indexes it perfectly!!!
> > >
> > > Can someone tell me how to index a larger corpus even if it takes more
> > > time!!!
> > >
> > > Thanks
> > >
> > > Saurabh Agarwal
> > >
> >
>

--000e0cd2a05e851219048796ec66--

From java-user-return-46249-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 27 17:52:32 2010
Return-Path: <java-user-return-46249-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59965 invoked from network); 27 May 2010 17:52:32 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 May 2010 17:52:32 -0000
Received: (qmail 66137 invoked by uid 500); 27 May 2010 17:52:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66081 invoked by uid 500); 27 May 2010 17:52:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66067 invoked by uid 99); 27 May 2010 17:52:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 May 2010 17:52:30 +0000
X-ASF-Spam-Status: No, hits=4.7 required=10.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLY,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of srbh.grwl@gmail.com designates 209.85.212.176 as permitted sender)
Received: from [209.85.212.176] (HELO mail-px0-f176.google.com) (209.85.212.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 May 2010 17:52:22 +0000
Received: by pxi10 with SMTP id 10so155377pxi.35
        for <java-user@lucene.apache.org>; Thu, 27 May 2010 10:52:00 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=AFfVpwZS1HXTHm/T2ej9heUhYIPeRh2mDh4HAD6RZiA=;
        b=k5R6+eoOIqWbCqAFwPSRtclZA637hC5kAxZF+9OUHVwE6Lf729NwX5DP3SWxCuvHph
         C2B1NicGDlG4mkVcl7fUO17pP+o3asmGbNHKH2SUwyoCX+3X/Sq3EYuJMf7TFVUtHTrV
         gaDZfHDOdwm6/501hVUf4YvN/fN+1BDeOU5/s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=ZLrxjW1+KoGN8HPFL8EnKM3ycKppJMJaZ3s875fkFYaKn5gR0FwmQMXvJW3ij8rGhi
         W5GXAQghXHzRTz8W8kJV6IBlndM4+09kj3y0LiW/sIAxy8dFX+YdQlVFJlw3RH2ogH3y
         YZGbDPVuYGLA9D1uqrNSZ/CjALhsRiBpC0rDw=
MIME-Version: 1.0
Received: by 10.143.24.3 with SMTP id b3mr7298521wfj.218.1274982720219; Thu, 
	27 May 2010 10:52:00 -0700 (PDT)
Received: by 10.143.163.6 with HTTP; Thu, 27 May 2010 10:52:00 -0700 (PDT)
In-Reply-To: <AANLkTik6v5I9ej5EMH1je_qIEgCYDUBYU0miHttCIiEh@mail.gmail.com>
References: <AANLkTinf518tzyiyDTvOP9-IhAWifodI6I9dSc61_ruy@mail.gmail.com>
	<AANLkTil1h3YRqCkJpnRMl0Q9fC3lRLX-auOD33g7frzL@mail.gmail.com>
	<AANLkTilnE4wmw-_l7cylifzlqqNsQAPBPkxFCNpbpI9x@mail.gmail.com>
	<AANLkTik6v5I9ej5EMH1je_qIEgCYDUBYU0miHttCIiEh@mail.gmail.com>
Date: Thu, 27 May 2010 23:22:00 +0530
Message-ID: <AANLkTikfe-9LaHJXCdCUck64jlhtSsMv6AfmdGUoYS9c@mail.gmail.com>
Subject: Re: Core dumped
From: Saurabh Agarwal <srbh.grwl@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636e0b5fe222bce0487970ca1
X-Virus-Checked: Checked by ClamAV on apache.org

--001636e0b5fe222bce0487970ca1
Content-Type: text/plain; charset=ISO-8859-1

I will check it out!!
Saurabh Agarwal


On Thu, May 27, 2010 at 11:13 PM, Erick Erickson <erickerickson@gmail.com>wrote:

> The larger your RAMbufferSize, the more memory you consume FWIW.
>
> OK, then, does it always OOM on the same document? Are you trying to index
> any particularly large documents?
>
> Erick
>
> On Thu, May 27, 2010 at 1:28 PM, Saurabh Agarwal <srbh.grwl@gmail.com
> >wrote:
>
> > RAMBufferSize id 50 Mb, i tried with 200 too
> > the index is unoptimized
> > MergeFactor is Default 10 and I have not changed it
> >
> > MaxBuffered Docs is also default
> > Saurabh Agarwal
> >
> >
> > On Thu, May 27, 2010 at 10:31 PM, Erick Erickson <
> erickerickson@gmail.com
> > >wrote:
> >
> > > What have you set various indexwriter properties to? Particularly
> > > things like merge factor, max buffered docs and ram buffer size.
> > >
> > > The first thing I'd look at is MergeFactor. From the JavaDocs:
> > > Determines how often segment indices are merged by addDocument(). With
> > > smaller values, less RAM is used while indexing, and searches on
> > > unoptimized
> > > indices are faster, but indexing speed is slower. With larger values,
> > more
> > > RAM is used during indexing, and while searches on unoptimized indices
> > are
> > > slower, indexing is faster. Thus larger values (> 10) are best for
> batch
> > > index creation, and smaller values (< 10) for indices that are
> > > interactively
> > > maintained.
> > >
> > >
> > > HTH
> > > Erick
> > >
> > > On Thu, May 27, 2010 at 11:52 AM, Saurabh Agarwal <srbh.grwl@gmail.com
> > > >wrote:
> > >
> > > > Hi,
> > > > when I am running Lucene on a 512 MB system.
> > > > I am getting the following error
> > > > Exception in thread "main" java.lang.OutOfMemoryError: Java heap
> space
> > > >        at
> > > >
> > > >
> > >
> >
> org.apache.lucene.index.DocumentsWriter$ByteBlockAllocator.getByteBlock(DocumentsWriter.java:1206)
> > > > and sometimes
> > > >  An unexpected error has been detected by Java Runtime Environment:
> > > > # Problematic frame:
> > > > # J  java.nio.ByteBuffer.arrayOffset()I
> > > >
> > > >
> > > > if I decrease my corpus size it indexes it perfectly!!!
> > > >
> > > > Can someone tell me how to index a larger corpus even if it takes
> more
> > > > time!!!
> > > >
> > > > Thanks
> > > >
> > > > Saurabh Agarwal
> > > >
> > >
> >
>

--001636e0b5fe222bce0487970ca1--

From java-user-return-46250-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 27 18:32:41 2010
Return-Path: <java-user-return-46250-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78758 invoked from network); 27 May 2010 18:32:40 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 May 2010 18:32:40 -0000
Received: (qmail 13622 invoked by uid 500); 27 May 2010 18:32:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13583 invoked by uid 500); 27 May 2010 18:32:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13575 invoked by uid 99); 27 May 2010 18:32:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 May 2010 18:32:38 +0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=AWL,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.58.172] (HELO web55208.mail.re4.yahoo.com) (206.190.58.172)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 27 May 2010 18:32:30 +0000
Received: (qmail 17564 invoked by uid 60001); 27 May 2010 18:32:09 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1274985129; bh=N45D9CaHOPEMo9bTq6UpCXFJDOO7Ybz8tiPoSdM2/Dg=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type; b=nDm83LGIF6QWW0bq+u65Yu/CXFnxMBbz66XhZwA+UgUNoS8uqLO84SNl+uD4w4Qxn/DDo6lvZJ6nNkHHJkekgCWgVFgjTSbh4lkkddvribhgv7HFWwHKiuZIzOZ3I8YMiILDD2CooFxCOQOo6blU3agGuJsI33xGh6Qt/Lr2VUg=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=SnYj8/g38gIV8c3v/eLF7xZZYjxVCpA62nG+825R38WsJQbwdxcgtP4B2zXsE8OT0M2w9NgO12g7yc/0qSlNP+t/65Ejy6HBeMuHZT0vOZUeZltRltbdlqAFOg4HzjFSIlDDlUO+yRzCk+3vSVI9kDqJIpfOTND6VnGddQRl7Dk=;
Message-ID: <345502.16429.qm@web55208.mail.re4.yahoo.com>
X-YMail-OSG: 15zfRkwVM1l6LHcTpw24rL57w2_GZ436UL2JoiJ38II3un3
 bR3c3plq.cbR9.k.l73Zl6Z8BN4xMu52MUhKhQf.KWE0SdhTMtXhLgQxVnnc
 WVNJ1R68DoeJsckk9NS_golArkUkITXRntCkJRKD_VP22Ux6SolPJcmKIqjZ
 OudTsHo6.UPwH7QcpmXEvkxdJ1ghiv71QbD7qF_XbjCUcodFo3O8WN0BTbhH
 0XoQxHXcUd4pvSKrfoWL1667DJ5cFREGExHtoP_TIHQnjjDRTJ5_2CgcBR7r
 bqfRm9GiyiaGzOBqW0LI.04KoaUo-
Received: from [38.99.14.58] by web55208.mail.re4.yahoo.com via HTTP; Thu, 27 May 2010 11:32:09 PDT
X-Mailer: YahooMailRC/374.4 YahooMailWebService/0.8.103.269680
Date: Thu, 27 May 2010 11:32:09 -0700 (PDT)
From: kannan chandrasekaran <ckannanck@yahoo.com>
Subject: How to get the number of unique terms in the inverted index
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1596534815-1274985129=:16429"

--0-1596534815-1274985129=:16429
Content-Type: text/plain; charset=us-ascii

Hi All,

I was wondering  if there is a way to retrieve the number of unique terms in the lucene ( version 2.4.0) ... I am aware of the terms() && terms(Term) method that returns an enumeration (TermEnum) but that involves iterating through the terms and couting them.  I looking for something similar to numdocs() in the IndexReader class.  

Please help.

Thanks
Kannan



      
--0-1596534815-1274985129=:16429--

From java-user-return-46251-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 27 19:44:12 2010
Return-Path: <java-user-return-46251-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98251 invoked from network); 27 May 2010 19:44:12 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 May 2010 19:44:12 -0000
Received: (qmail 97189 invoked by uid 500); 27 May 2010 19:44:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97157 invoked by uid 500); 27 May 2010 19:44:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97149 invoked by uid 99); 27 May 2010 19:44:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 May 2010 19:44:10 +0000
X-ASF-Spam-Status: No, hits=-0.5 required=10.0
	tests=AWL,FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 May 2010 19:44:04 +0000
Received: by wwe15 with SMTP id 15so327389wwe.35
        for <java-user@lucene.apache.org>; Thu, 27 May 2010 12:43:43 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:sender:reply-to:received
         :in-reply-to:references:date:x-google-sender-auth:message-id:subject
         :from:to:content-type:content-transfer-encoding;
        bh=mGUCVK448nddUW/m/Y79yks/QxcOXC8cpjAyDWg+ZjM=;
        b=qLnI32Zjs7ydhFe1tR/cjmcHs/BXeDWUnRRUphtHUsCCGDOLVvoIYTZ31mi5Ph6Syg
         EY3+rPkooWcOLdgIaaPH8x5y5iN8+5MaYdeDcvdJ4trJ3a8Q9tOze2j8Tfe1IqAjeoVK
         UcnQ3iVZVETNG+VmDNnVQYY7fh3aHXgkNcs1E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:reply-to:in-reply-to:references:date
         :x-google-sender-auth:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=i89I2zuwctdfepyJW4Zbyj/qZZpbUY9Qc3iB77XKqJ3Az7wYu94eb3agswMJgGtMNz
         FetHUUkG98h5I+dOU8Ic39hYeqbPBh0p2MvQzONyvQjgx3iNyBnK7OkQWrbzRlMI9YVz
         tQANWgDGXumhvW/PALhRyyr9tPysii5KxKZkI=
MIME-Version: 1.0
Received: by 10.216.154.69 with SMTP id g47mr984029wek.82.1274989423291; Thu, 
	27 May 2010 12:43:43 -0700 (PDT)
Sender: yseeley@gmail.com
Reply-To: yonik@lucidimagination.com
Received: by 10.216.22.140 with HTTP; Thu, 27 May 2010 12:43:43 -0700 (PDT)
In-Reply-To: <345502.16429.qm@web55208.mail.re4.yahoo.com>
References: <345502.16429.qm@web55208.mail.re4.yahoo.com>
Date: Thu, 27 May 2010 15:43:43 -0400
X-Google-Sender-Auth: YLswgA4GDvG1e9XisuTD8vN8uJg
Message-ID: <AANLkTinuiX-YUFBy0ShQJJUaVczCC0d18uUBQ2ebAbz_@mail.gmail.com>
Subject: Re: How to get the number of unique terms in the inverted index
From: Yonik Seeley <yonik@lucidimagination.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

On Thu, May 27, 2010 at 2:32 PM, kannan chandrasekaran
<ckannanck@yahoo.com> wrote:
> I was wondering =A0if there is a way to retrieve the number of unique ter=
ms in the lucene ( version 2.4.0) ... I am aware of the terms() && terms(Te=
rm) method that returns an enumeration (TermEnum) but that involves iterati=
ng through the terms and couting them. =A0I looking for something similar t=
o numdocs() in the IndexReader class.

No there is not.
In 4.0-dev, with the new "flex" APIs, you can retrieve the number of
unique terms in a single segment (Terms.getUniqueTermCount()), but not
a whole index.

-Yonik
http://www.lucidimagination.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46252-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 27 20:34:30 2010
Return-Path: <java-user-return-46252-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9238 invoked from network); 27 May 2010 20:34:30 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 May 2010 20:34:30 -0000
Received: (qmail 39048 invoked by uid 500); 27 May 2010 20:34:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39020 invoked by uid 500); 27 May 2010 20:34:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39012 invoked by uid 99); 27 May 2010 20:34:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 May 2010 20:34:28 +0000
X-ASF-Spam-Status: No, hits=-0.3 required=10.0
	tests=AWL,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 May 2010 20:34:22 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 1EF95D36008;
	Thu, 27 May 2010 22:34:00 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id kYskQ+QrI8Rh; Thu, 27 May 2010 22:33:48 +0200 (CEST)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id BE2DCD36006;
	Thu, 27 May 2010 22:33:47 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>,
	<yonik@lucidimagination.com>
References: <345502.16429.qm@web55208.mail.re4.yahoo.com> <AANLkTinuiX-YUFBy0ShQJJUaVczCC0d18uUBQ2ebAbz_@mail.gmail.com>
In-Reply-To: <AANLkTinuiX-YUFBy0ShQJJUaVczCC0d18uUBQ2ebAbz_@mail.gmail.com>
Subject: RE: How to get the number of unique terms in the inverted index
Date: Thu, 27 May 2010 22:34:33 +0200
Message-ID: <005301cafddc$0430a610$0c91f230$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQKIZqfalQfMCAn0oPqfBB9WP81F/AIP8Wl8kNpqY8A=
Content-Language: de

Also in 2.9.2 and 3.0.1:
http://lucene.apache.org/java/2_9_2/api/all/org/apache/lucene/index/Index=
Rea
der.html#getUniqueTermCount()
http://lucene.apache.org/java/3_0_1/api/all/org/apache/lucene/index/Index=
Rea
der.html#getUniqueTermCount()

Please note, this works only with SegmentReaders, so you have to first =
get
the getSequentialSubReaders() and you *may* sum up the number on them. =
But
this would not give the correct number, as segments may have (or in most
cases they have lots of) overlapping terms. For an optimized index
getSequentialSubReaders() returns one index and its unique term count is
correct.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: yseeley@gmail.com [mailto:yseeley@gmail.com] On Behalf Of Yonik
> Seeley
> Sent: Thursday, May 27, 2010 9:44 PM
> To: java-user@lucene.apache.org
> Subject: Re: How to get the number of unique terms in the inverted =
index
>=20
> On Thu, May 27, 2010 at 2:32 PM, kannan chandrasekaran
> <ckannanck@yahoo.com> wrote:
> > I was wondering =A0if there is a way to retrieve the number of =
unique
terms
> in the lucene ( version 2.4.0) ... I am aware of the terms() &&
terms(Term)
> method that returns an enumeration (TermEnum) but that involves =
iterating
> through the terms and couting them. =A0I looking for something similar =
to
> numdocs() in the IndexReader class.
>=20
> No there is not.
> In 4.0-dev, with the new "flex" APIs, you can retrieve the number of
unique
> terms in a single segment (Terms.getUniqueTermCount()), but not a =
whole
> index.
>=20
> -Yonik
> http://www.lucidimagination.com
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46253-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 27 20:38:23 2010
Return-Path: <java-user-return-46253-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9821 invoked from network); 27 May 2010 20:38:23 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 May 2010 20:38:23 -0000
Received: (qmail 44404 invoked by uid 500); 27 May 2010 20:38:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44361 invoked by uid 500); 27 May 2010 20:38:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44353 invoked by uid 99); 27 May 2010 20:38:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 May 2010 20:38:21 +0000
X-ASF-Spam-Status: No, hits=-0.5 required=10.0
	tests=AWL,FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of tsuraan@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 May 2010 20:38:16 +0000
Received: by vws3 with SMTP id 3so501064vws.35
        for <java-user@lucene.apache.org>; Thu, 27 May 2010 13:37:55 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=3zbRjy/KHtJ80xOU625h7SZVFly4d6m5TjkRnb60UHA=;
        b=YHYPUyL4k01vkmQNA4oEvNHS4hn4tote+lwUgfxcb+dEu2P/QnPblZF5XnW9ewI64M
         t8cX4YlxNt0MvBdIx25j5tP2lfEjPIn0HD4O9GYshoh0y8KXpSPBQ3t0EiheXyE1YpLv
         P3gSHu16ngZc6+9FOlptglkSHzaREPKpZ6Gfw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=vbC5a2PLnUcVcXuopggHqp+wWSzVsdWUcXJoJcC+WtPROdnSm/4MK9UAoBCcRlaBnX
         jYdXghASHIkCZpQEXXNiZoJxjbBtKWN8yOYjOGimtBvF9I+EX0pLmMdOq72HG6goG+bV
         fkmyKjJAb6ZT2lsvaIK+FpkR9uDVH0bnic9ZU=
MIME-Version: 1.0
Received: by 10.220.107.158 with SMTP id b30mr7934943vcp.105.1274992674981; 
	Thu, 27 May 2010 13:37:54 -0700 (PDT)
Received: by 10.220.93.74 with HTTP; Thu, 27 May 2010 13:37:54 -0700 (PDT)
In-Reply-To: <AANLkTin2DcNr9JhINRIjV-CfTPrdRG5U8JSJVGPLdUiZ@mail.gmail.com>
References: <AANLkTin2DcNr9JhINRIjV-CfTPrdRG5U8JSJVGPLdUiZ@mail.gmail.com>
Date: Thu, 27 May 2010 15:37:54 -0500
Message-ID: <AANLkTilus_c88jizeqc-cv6B1qD94rHT5okxipiEbfv4@mail.gmail.com>
Subject: Re: Customer TokenFilter
From: tsuraan <tsuraan@gmail.com>
To: java-user <java-user@lucene.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

> I'd like to have all my queries and terms run through Unicode
> Normalization prior to being executed/indexed. =A0I've been using the
> StandardAnalyzer with pretty good luck for the past few years, so I
> think I'd like to write an analyzer that wraps that, and tacks a
> custom TokenFilter onto the chain provided by the StandardAnalyzer.
> I'm really not clear, though, on how to write a TokenFilter. =A0My best
> guess is that I want to write a class that overrides getAttribute, and
> uses java.text.Normalizer to normalize any TermAttribute that is
> returned from the upstream filter. =A0Is that correct, or should I put
> my normalization somewhere else? =A0Are there any docs on making custom
> filters/analyzers? =A0I didn't have much luck finding any.

Ok, I think that's probably the wrong approach, and I did something
different by imitating the LowerCaseFilter.  If somebody could take a
look at what I've put up at
http://github.com/tsuraan/StandardNormalizingAnalyzer, and tell me if
there's something horrible about what I've done, I'd really appreciate
it.  It passes the small unit tests I've made, but I'd really like to
know if there's something glaringly wrong about my approach.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46254-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 27 20:47:41 2010
Return-Path: <java-user-return-46254-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12009 invoked from network); 27 May 2010 20:47:40 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 May 2010 20:47:40 -0000
Received: (qmail 60608 invoked by uid 500); 27 May 2010 20:47:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60565 invoked by uid 500); 27 May 2010 20:47:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60557 invoked by uid 99); 27 May 2010 20:47:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 May 2010 20:47:38 +0000
X-ASF-Spam-Status: No, hits=-0.3 required=10.0
	tests=AWL,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 May 2010 20:47:33 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 763A1D36008
	for <java-user@lucene.apache.org>; Thu, 27 May 2010 22:47:12 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id B-XNURhFJbHh for <java-user@lucene.apache.org>;
	Thu, 27 May 2010 22:46:59 +0200 (CEST)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 68ACAD36006
	for <java-user@lucene.apache.org>; Thu, 27 May 2010 22:46:59 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <AANLkTin2DcNr9JhINRIjV-CfTPrdRG5U8JSJVGPLdUiZ@mail.gmail.com> <AANLkTilus_c88jizeqc-cv6B1qD94rHT5okxipiEbfv4@mail.gmail.com>
In-Reply-To: <AANLkTilus_c88jizeqc-cv6B1qD94rHT5okxipiEbfv4@mail.gmail.com>
Subject: RE: Customer TokenFilter
Date: Thu, 27 May 2010 22:47:44 +0200
Message-ID: <005401cafddd$dc00a530$9401ef90$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQFs8fq8BMMitz4vjFyewnSkONddNwLN19sskwtn6DA=
Content-Language: de

Looks correct! Wrapping by CharBuffer is very intelligent! In Lucene 3.1 =
the
new Term Attribute will implement CharSequence, then its even simplier. =
You
may also look at 3.1's ICU contrib that has support even for =
Normalizer2.

Overriding StandardAnalyzer is the wrong way, as in 3.1 its final (its =
only
accidentially non-final)! You should always extend Analyzer and build =
the
chain yourself. Or wrap another analyzer like in =
PerFieldAnalyzerWrapper.
The whole Tokenization API in Lucene is based on the delegator pattern, =
so
never extend any class not made for it!

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: tsuraan [mailto:tsuraan@gmail.com]
> Sent: Thursday, May 27, 2010 10:38 PM
> To: java-user
> Subject: Re: Customer TokenFilter
>=20
> > I'd like to have all my queries and terms run through Unicode
> > Normalization prior to being executed/indexed. =A0I've been using =
the
> > StandardAnalyzer with pretty good luck for the past few years, so I
> > think I'd like to write an analyzer that wraps that, and tacks a
> > custom TokenFilter onto the chain provided by the StandardAnalyzer.
> > I'm really not clear, though, on how to write a TokenFilter. =A0My =
best
> > guess is that I want to write a class that overrides getAttribute, =
and
> > uses java.text.Normalizer to normalize any TermAttribute that is
> > returned from the upstream filter. =A0Is that correct, or should I =
put
> > my normalization somewhere else? =A0Are there any docs on making =
custom
> > filters/analyzers? =A0I didn't have much luck finding any.
>=20
> Ok, I think that's probably the wrong approach, and I did something
different
> by imitating the LowerCaseFilter.  If somebody could take a look at =
what
I've
> put up at http://github.com/tsuraan/StandardNormalizingAnalyzer, and =
tell
> me if there's something horrible about what I've done, I'd really
appreciate it.
> It passes the small unit tests I've made, but I'd really like to know =
if
there's
> something glaringly wrong about my approach.
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46255-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 27 21:01:47 2010
Return-Path: <java-user-return-46255-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15176 invoked from network); 27 May 2010 21:01:47 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 May 2010 21:01:47 -0000
Received: (qmail 79881 invoked by uid 500); 27 May 2010 21:01:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79819 invoked by uid 500); 27 May 2010 21:01:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79811 invoked by uid 99); 27 May 2010 21:01:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 May 2010 21:01:44 +0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=AWL,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.58.169] (HELO web55205.mail.re4.yahoo.com) (206.190.58.169)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 27 May 2010 21:01:38 +0000
Received: (qmail 17371 invoked by uid 60001); 27 May 2010 21:01:16 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1274994076; bh=yeDvAosLan+SnOvjYcUThyNYMq5SeVbbuy0lhA0j6iE=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type; b=5F7J08timTfvNlyKwzbI66Jh42vQ4TpWndjJz/NYvXOKQ6UXawDgygVsjbZZvvENDXJlHxB8UAaucW3gn/iupVjiKWoXzj9fc91sGvSWHXXpQmdafR/r6GKnfrgtxURbd5XXIrDMeZmq8NVMP/eYv/w7NL2olBBhtcKDu93YvXk=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=YpvLJwMl55FImpiSMPAXRMu2d2nicae7zL59Rfn/Dv2e7OeyCzNRFUpFYv/h1+zHOv6lnKBBZerZIrlQP9KVtHPTGD6Wq8AzFX/iORS4vRbZk568Mi6sLjZLoTwL8zTDGgHja62C3qFu1oceKASgnJ7nru0ACsyg2PqU58limZ4=;
Message-ID: <782322.15575.qm@web55205.mail.re4.yahoo.com>
X-YMail-OSG: qMTT0mYVM1l48DlRvJN57a08AH.8X.NVdgUKcEaoujCVSYc
 0VRrVTrxZtWSPk8O6Kvvn4vZoSbOIL6UexW1CakTg7SPTAI99Yib4XmR4.bP
 C06BtkDwUd4a4TcNKeImyHVr1Wxq8xB19Q_Q9nLe50sT.PctodxAlddIUFwk
 9ZFkfTpENSs6kXnlitAsWhLK.gaWqWbpbCiWypF9fWcaF1XdUjstr2vSfrZ0
 TjNoG233Rnm_zxkECUSxoOIpE6bg1KvUqQ2lD6ZJF6WhnVy79v2qCPxKAY55
 37GTyxVMNceVRumYCaeXtaWLcQoS2Kodfbxjy4U7c_xEOdeDxplw9Wmc.QIF
 HbzYUKR8qkKktaA--
Received: from [38.99.14.58] by web55205.mail.re4.yahoo.com via HTTP; Thu, 27 May 2010 14:01:16 PDT
X-Mailer: YahooMailRC/374.4 YahooMailWebService/0.8.103.269680
Date: Thu, 27 May 2010 14:01:16 -0700 (PDT)
From: kannan chandrasekaran <ckannanck@yahoo.com>
Subject: Re: How to get the number of unique terms in the inverted index
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1710055807-1274994076=:15575"

--0-1710055807-1274994076=:15575
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable

Hi Yonik,=0A=0AThanks for the quick response. I am curious as to why this i=
s not supported whereas the numdocs() is supported ? Even in the upcoming v=
ersion its only supported per segment and not across the index,  why ? Is i=
t difficult to implement efficiently ?=0A=0APardon my ignorance if I am mis=
sing something thats very obvious...=0A=0AThanks=0AKannan=0A=0AOn Thu, May =
27, 2010 at 2:32 PM, kannan chandrasekaran=0A<ckannanck@yahoo.com> wrote:=
=0A> I was wondering =EF=BF=BDif there is a way to retrieve the number of u=
nique terms in the lucene=0A( version 2.4.0) ... I am aware of the terms() =
&& terms(Term) method that returns=0Aan enumeration (TermEnum) but that inv=
olves iterating through the terms and couting them.=0A=EF=BF=BDI looking fo=
r something similar to numdocs() in the IndexReader class.=0A=0ANo there is=
 not.=0AIn 4.0-dev, with the new "flex" APIs, you can retrieve the number o=
f=0Aunique terms in a single segment (Terms.getUniqueTermCount()), but not=
=0Aa whole index.=0A=0A-Yonik=0Ahttp://www.lucidimagination.com=0A=0A=0A=0A=
      
--0-1710055807-1274994076=:15575--

From java-user-return-46256-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 27 21:30:58 2010
Return-Path: <java-user-return-46256-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36335 invoked from network); 27 May 2010 21:30:58 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 May 2010 21:30:58 -0000
Received: (qmail 7395 invoked by uid 500); 27 May 2010 21:30:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7363 invoked by uid 500); 27 May 2010 21:30:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7355 invoked by uid 99); 27 May 2010 21:30:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 May 2010 21:30:56 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 May 2010 21:30:49 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 263EDD36008
	for <java-user@lucene.apache.org>; Thu, 27 May 2010 23:30:29 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id pb0YQW6nr+0W for <java-user@lucene.apache.org>;
	Thu, 27 May 2010 23:30:17 +0200 (CEST)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id B273ED36006
	for <java-user@lucene.apache.org>; Thu, 27 May 2010 23:30:16 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <782322.15575.qm@web55205.mail.re4.yahoo.com>
In-Reply-To: <782322.15575.qm@web55205.mail.re4.yahoo.com>
Subject: RE: How to get the number of unique terms in the inverted index
Date: Thu, 27 May 2010 23:31:02 +0200
Message-ID: <005801cafde3$e83ee540$b8bcafc0$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQDxtTOyE1D+jkMLR14WIeQbA9Ehe5QYXSaA
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

It's not efficient, because you cannot get it efficient as of =
overlapping terms (as noted before).

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: kannan chandrasekaran [mailto:ckannanck@yahoo.com]
> Sent: Thursday, May 27, 2010 11:01 PM
> To: java-user@lucene.apache.org
> Subject: Re: How to get the number of unique terms in the inverted =
index
>=20
> Hi Yonik,
>=20
> Thanks for the quick response. I am curious as to why this is not =
supported
> whereas the numdocs() is supported ? Even in the upcoming version its =
only
> supported per segment and not across the index,  why ? Is it difficult =
to
> implement efficiently ?
>=20
> Pardon my ignorance if I am missing something thats very obvious...
>=20
> Thanks
> Kannan
>=20
> On Thu, May 27, 2010 at 2:32 PM, kannan chandrasekaran
> <ckannanck@yahoo.com> wrote:
> > I was wondering  if there is a way to retrieve the number of unique
> > terms in the lucene
> ( version 2.4.0) ... I am aware of the terms() && terms(Term) method =
that
> returns an enumeration (TermEnum) but that involves iterating through =
the
> terms and couting them.
>  I looking for something similar to numdocs() in the IndexReader =
class.
>=20
> No there is not.
> In 4.0-dev, with the new "flex" APIs, you can retrieve the number of =
unique
> terms in a single segment (Terms.getUniqueTermCount()), but not a =
whole
> index.
>=20
> -Yonik
> http://www.lucidimagination.com
>=20
>=20
>=20
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46257-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 27 21:38:15 2010
Return-Path: <java-user-return-46257-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38166 invoked from network); 27 May 2010 21:38:14 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 May 2010 21:38:14 -0000
Received: (qmail 22551 invoked by uid 500); 27 May 2010 21:38:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22513 invoked by uid 500); 27 May 2010 21:38:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22505 invoked by uid 99); 27 May 2010 21:38:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 May 2010 21:38:12 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of tsuraan@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 May 2010 21:38:05 +0000
Received: by vws3 with SMTP id 3so576408vws.35
        for <java-user@lucene.apache.org>; Thu, 27 May 2010 14:37:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=KFy21FOYlk3vFPV9exo1NHJ11cjbfbizHzFw2UCBJ4Y=;
        b=txlp+cs5MZf8RBuivpNzYG+NzFefDQFuggWIaMM5r8GrcHL8OiL9vHejmnkGxrE2nO
         vr7mqEzt5Zw7lH+pqx544DqtFeI7I/5/NnXyVhk1a/dui7TGvujlZZTGjYQ60dYo/Ot0
         sSVLkh4QGRqyViMPwZwR8qPo2Se2W+aCfvECo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=JbgASeg3OjBPZSU5BotY6v7bTv7nmETSS18LyW5vf8QQcUSctiTW4vEC1I3sSkuyTj
         HY5ALylXtdc9IHnM6AR5LcnzZ4jejGawtakfVZIN3708z5Om5G26IF9mi8stOGXykQb5
         MtGP1Mm0Gx4VTOPU8MztiSj3tB8clT25Ka92I=
MIME-Version: 1.0
Received: by 10.220.59.5 with SMTP id j5mr7964963vch.246.1274996260937; Thu, 
	27 May 2010 14:37:40 -0700 (PDT)
Received: by 10.220.93.74 with HTTP; Thu, 27 May 2010 14:37:40 -0700 (PDT)
In-Reply-To: <005401cafddd$dc00a530$9401ef90$@thetaphi.de>
References: <AANLkTin2DcNr9JhINRIjV-CfTPrdRG5U8JSJVGPLdUiZ@mail.gmail.com>
	<AANLkTilus_c88jizeqc-cv6B1qD94rHT5okxipiEbfv4@mail.gmail.com>
	<005401cafddd$dc00a530$9401ef90$@thetaphi.de>
Date: Thu, 27 May 2010 16:37:40 -0500
Message-ID: <AANLkTikfcocxkyL4QjEA7B8YD3AxZGxV2rV9qIoLR2IQ@mail.gmail.com>
Subject: Re: Customer TokenFilter
From: tsuraan <tsuraan@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

> Looks correct! Wrapping by CharBuffer is very intelligent! In Lucene 3.1 the
> new Term Attribute will implement CharSequence, then its even simplier. You
> may also look at 3.1's ICU contrib that has support even for Normalizer2.

Ok, I've only been looking at 3.0.1 so far; I'll check out the 3.1
work and see what's there.

> Overriding StandardAnalyzer is the wrong way, as in 3.1 its final (its only
> accidentially non-final)! You should always extend Analyzer and build the
> chain yourself. Or wrap another analyzer like in PerFieldAnalyzerWrapper.
> The whole Tokenization API in Lucene is based on the delegator pattern, so
> never extend any class not made for it!

Ok, I've changed it to just borrowing the guts of the StandardAnalyzer
rather than inheriting.  I also think I got the reuasableTokenStream
method correct this way, so that's a bonus.  Care to have another look
at it?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46258-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 27 22:58:56 2010
Return-Path: <java-user-return-46258-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64162 invoked from network); 27 May 2010 22:58:55 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 May 2010 22:58:55 -0000
Received: (qmail 23965 invoked by uid 500); 27 May 2010 22:58:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23908 invoked by uid 500); 27 May 2010 22:58:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23900 invoked by uid 99); 27 May 2010 22:58:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 May 2010 22:58:53 +0000
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=AWL,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.160.176 as permitted sender)
Received: from [209.85.160.176] (HELO mail-gy0-f176.google.com) (209.85.160.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 May 2010 22:58:48 +0000
Received: by gyf1 with SMTP id 1so555298gyf.35
        for <java-user@lucene.apache.org>; Thu, 27 May 2010 15:58:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=o6GmmDHG0GGZ/pOd16YIOzhzBAL3WBD74nscRMCYo0c=;
        b=wVbAcvhRVDSMdCsJXoVOo+EaZNg6sN4gnVCS4GqzyhKPNJiYUjC2jN8A+J24IfAq55
         Qcxn3l1C5O390+BcRP2UDDP4/IFTWcPv6t4mXsWAoU70dzK2yq70pl1OqrAKbmaF/bUr
         6SGJwtiVu6ncl4e2XHGdDsxpDbcFXye4lN7uY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=GqAPh1nGfumK2/kAP4OBmGISuEun6U/C3WCm+xKeun4qDlG1FgaQ1i/cNCoGoymi/G
         1aW7FEOG9kRLltGTLHYxMM/8AA7ZNrmXV/7EOKtjc4MNI3kRvwbDwicDrCfCTURgD+CB
         dbV1ixb4agZBOdARxUhqPK25NUCazqoUVclxw=
MIME-Version: 1.0
Received: by 10.150.48.13 with SMTP id v13mr849887ybv.152.1275001107525; Thu, 
	27 May 2010 15:58:27 -0700 (PDT)
Received: by 10.151.43.7 with HTTP; Thu, 27 May 2010 15:58:27 -0700 (PDT)
In-Reply-To: <782322.15575.qm@web55205.mail.re4.yahoo.com>
References: <782322.15575.qm@web55205.mail.re4.yahoo.com>
Date: Thu, 27 May 2010 18:58:27 -0400
Message-ID: <AANLkTilFqLt-q6vBPwQoGfILwVyppvhCQo4x3fj-1zYj@mail.gmail.com>
Subject: Re: How to get the number of unique terms in the inverted index
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd7098c1a30b004879b5469

--000e0cd7098c1a30b004879b5469
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

I suspect it's not supported because it hasn't been seen
as valuable enough to put the effort into. You simply asked
if it was supported without any use-case, and I'm having a
hard time coming up with one on my own.....

If it's important to your particular situation, you could
have a special document in your index that contained these
values, with fields orthogonal to all fields in all other docs and
compute this at index time. Lookup would then be easy....

Best
Erick

On Thu, May 27, 2010 at 5:01 PM, kannan chandrasekaran
<ckannanck@yahoo.com>wrote:

> Hi Yonik,
>
> Thanks for the quick response. I am curious as to why this is not support=
ed
> whereas the numdocs() is supported ? Even in the upcoming version its onl=
y
> supported per segment and not across the index,  why ? Is it difficult to
> implement efficiently ?
>
> Pardon my ignorance if I am missing something thats very obvious...
>
> Thanks
> Kannan
>
> On Thu, May 27, 2010 at 2:32 PM, kannan chandrasekaran
> <ckannanck@yahoo.com> wrote:
> > I was wondering =EF=BF=BDif there is a way to retrieve the number of un=
ique terms
> in the lucene
> ( version 2.4.0) ... I am aware of the terms() && terms(Term) method that
> returns
> an enumeration (TermEnum) but that involves iterating through the terms a=
nd
> couting them.
> =EF=BF=BDI looking for something similar to numdocs() in the IndexReader =
class.
>
> No there is not.
> In 4.0-dev, with the new "flex" APIs, you can retrieve the number of
> unique terms in a single segment (Terms.getUniqueTermCount()), but not
> a whole index.
>
> -Yonik
> http://www.lucidimagination.com
>
>
>
>
>

--000e0cd7098c1a30b004879b5469--

From java-user-return-46259-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 27 23:49:43 2010
Return-Path: <java-user-return-46259-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82534 invoked from network); 27 May 2010 23:49:43 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 May 2010 23:49:43 -0000
Received: (qmail 33648 invoked by uid 500); 27 May 2010 23:49:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33599 invoked by uid 500); 27 May 2010 23:49:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33589 invoked by uid 99); 27 May 2010 23:49:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 May 2010 23:49:41 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.58.165] (HELO web55201.mail.re4.yahoo.com) (206.190.58.165)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 27 May 2010 23:49:32 +0000
Received: (qmail 605 invoked by uid 60001); 27 May 2010 23:49:10 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1275004150; bh=QYayo4MZzUaxdhV61fbpKnoJ8gQ45I41RpU1tLNphTw=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type; b=IUU30BKUyhG2Mn1w/zN18x/LnwyY3dSsPVYI71Bp0we+OlmXEMpB8DvhP8pmq4ytU9Rq2LeUjocSOZNPu/23DvesMSW03AAiH6hm8nTuxiWtnDagLrgdVbYS7DiKZgNCVAE79yPi2qb7CBlgqC/QQ72FIUG2hNImVTnrKirvaSo=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=NV93/fkyb0dnBGhlvRmoAienkhE6fT4J2IxieWvfaKYDSirz36lajqX1SRAtnd+ZRHN7qddNdcPeWkcKjfMvrfD8e93kD/eZemAfWiQnPFk3vmaOjFMVmAUNXpn3oSzFgP1iHBrQrBQ0OfYrZ/EO3012mZoNVpU0V5yCoXOu7+g=;
Message-ID: <589426.99261.qm@web55201.mail.re4.yahoo.com>
X-YMail-OSG: gXavW5QVM1msWIXYg2JWcxDeSy8PLyyCQ53YyKw6t.jU2Tg
 kPwRlM1klUNssifTDrRTDXoMN9C0P4l_ejrfPrkO07QkxZaBgyCTl919L8EJ
 GmjPLXpnPde7fKasSDp7GtzBHyMD2y.CbMUYdsICE1JxeI8OfF78gaNwEZxZ
 f0fc1kIbohaRzcvHON5Bos_vH8UbThnSSSw9SaRAIHcR7M3xMsU6c3SN7geY
 emlrdPtF9RdHLOFbrMuMjF_bnJDQ.C2ovYJQ4Q1VcgEoYrIUdWtd2cK2Cfi5
 iP5cQyQMVsBPsPowre7YmD85kxc3a7q27htu0RPp2GA.4z_lqhYzzcdc-
Received: from [38.99.14.58] by web55201.mail.re4.yahoo.com via HTTP; Thu, 27 May 2010 16:49:10 PDT
X-Mailer: YahooMailRC/374.4 YahooMailWebService/0.8.103.269680
Date: Thu, 27 May 2010 16:49:10 -0700 (PDT)
From: kannan chandrasekaran <ckannanck@yahoo.com>
Subject: Re: How to get the number of unique terms in the inverted index
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-993280474-1275004150=:99261"
X-Virus-Checked: Checked by ClamAV on apache.org

--0-993280474-1275004150=:99261
Content-Type: text/plain; charset=us-ascii

Uwe,

I now see the problem with overlapping terms across segments...Thanks...

Erik,

Good point...My usecase for this is ,

I am trying to build vectors for individual terms and documents and I need to know the size to handle memory constraints

Thanks
Kannan


      
--0-993280474-1275004150=:99261--

From java-user-return-46260-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 28 00:03:47 2010
Return-Path: <java-user-return-46260-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85836 invoked from network); 28 May 2010 00:03:47 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 28 May 2010 00:03:47 -0000
Received: (qmail 46141 invoked by uid 500); 28 May 2010 00:03:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46103 invoked by uid 500); 28 May 2010 00:03:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46093 invoked by uid 99); 28 May 2010 00:03:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 May 2010 00:03:45 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.211.189 as permitted sender)
Received: from [209.85.211.189] (HELO mail-yw0-f189.google.com) (209.85.211.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 May 2010 00:03:37 +0000
Received: by ywh27 with SMTP id 27so255202ywh.20
        for <java-user@lucene.apache.org>; Thu, 27 May 2010 17:03:16 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=iA1TbJmGuArJJakEZBmlWqM8JeFfmCP+tSkstn6pnGY=;
        b=KpfDwFO9LBlBHIgprbzJmvbIs1lgY5jAHzGjaBaK12cYR6Nvq4rFCuOP2cGyL0ZMzM
         In67va8tCYq9bDYcqpiKcHMdHfW8mr0YFvQs1wsZqkknPA7ZDRhdu+yF2NYKI9GDTPy6
         7FJootFZWSTRDyD6tsKCteaXt2xCSYRrUljss=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=O0IcgTUuw1wX9nf0zhQXfZavJGZv2FMyfwDSlmuba9g5LVxRhNLoDltLdWXGgXRMUZ
         vaZyMaZ1IAywqkEEF7LvWu9oaQDLlj8N/8Ts6loEpGm4GBg/ho5ga7vitmMyp2ud2XXQ
         WYAYeEDAXgm5r7McZkxweSkIRpt++hEUIfmTw=
MIME-Version: 1.0
Received: by 10.150.242.3 with SMTP id p3mr694292ybh.130.1275004996367; Thu, 
	27 May 2010 17:03:16 -0700 (PDT)
Received: by 10.151.43.7 with HTTP; Thu, 27 May 2010 17:03:16 -0700 (PDT)
In-Reply-To: <589426.99261.qm@web55201.mail.re4.yahoo.com>
References: <589426.99261.qm@web55201.mail.re4.yahoo.com>
Date: Thu, 27 May 2010 20:03:16 -0400
Message-ID: <AANLkTinYdTo1aZHyoPBAzEoY02WviOyIJGxQTSNcn93j@mail.gmail.com>
Subject: Re: How to get the number of unique terms in the inverted index
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd51866e5342204879c3b0d
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd51866e5342204879c3b0d
Content-Type: text/plain; charset=ISO-8859-1

OK, let's back up a level. WHY are you building these
vectors? Where I'm going with this is I wonder if this
is an XY problem, see:
http://people.apache.org/~hossman/#xyproblem

Best
Erick

On Thu, May 27, 2010 at 7:49 PM, kannan chandrasekaran
<ckannanck@yahoo.com>wrote:

> Uwe,
>
> I now see the problem with overlapping terms across segments...Thanks...
>
> Erik,
>
> Good point...My usecase for this is ,
>
> I am trying to build vectors for individual terms and documents and I need
> to know the size to handle memory constraints
>
> Thanks
> Kannan
>
>
>

--000e0cd51866e5342204879c3b0d--

From java-user-return-46261-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 28 01:17:35 2010
Return-Path: <java-user-return-46261-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12666 invoked from network); 28 May 2010 01:17:34 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 28 May 2010 01:17:34 -0000
Received: (qmail 2471 invoked by uid 500); 28 May 2010 01:17:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2412 invoked by uid 500); 28 May 2010 01:17:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2404 invoked by uid 99); 28 May 2010 01:17:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 May 2010 01:17:32 +0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=AWL,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.58.167] (HELO web55203.mail.re4.yahoo.com) (206.190.58.167)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 28 May 2010 01:17:25 +0000
Received: (qmail 61877 invoked by uid 60001); 28 May 2010 01:17:03 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1275009423; bh=DJlN69zGehIeQDn+u7tw1qp28H8ZI6FXNxIKoJt459M=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type; b=Yn45VXg+vza2wrMTRQRtKGRJZE1lFyaLsfnjErK/uh7/UXI5AZ1240TyZlRIIj7lycp/ighMWCUCemEX/oB/W5T/Zlfyql4503rkqkGdHlV+l4ZFAViSeWTf4mFWJ31aiI5T1VkCSXI05kr6o/wJCR/GZpV7Nt+X3k54QGw1TEY=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=ZQNi6q7WPLoGGSyv5suGaJLE3fPohxu5MnJwMfdq/6hfsc30W3wDMRbZTqclKF7oa9PXHmprYb7LElW4FdK1IhAXBPlS6c4dAii++3qV5yl8LnSpeFP9XOVskOie/SCQ8JWNShwmAQQMvTeBKxhNVdw34LiRGGfwil/W/dBabEs=;
Message-ID: <802151.58187.qm@web55203.mail.re4.yahoo.com>
X-YMail-OSG: tjt8eqkVM1nhwr7PA2MEr6oO88UaOZpgnLBIkeDu.3aPqgR
 WKc9wy1Qllqf1BWzEPx_Pbr2ZlzDWW2eo.Tv_NWcnKkbrtPVD5RN21CaYUqu
 RFJF2Fln1SIGwbN_1MfmBbuljJZglH1mxNFMCJ.IuqtOb6bH880u9fpJRS.X
 NdHwtSHf56JWUqkuX2IQWIfvkbo.duKchGcHRUVXqLBYYdU6jBb6RlUgFZiR
 1ceZfspYee6994PjvtP8E2DnXWPOu.iKXPJSSqAk3KlQuVYRfdKhatb.cL1l
 Adc3Es1QAwOE6pweRsHOHo.5tL4KJ5ylqYjowmd01MtGGw3DtYCQddxCOtOW
 hF8MJWgQwdYj8aCis8EKr6ZEWv9A-
Received: from [38.99.14.58] by web55203.mail.re4.yahoo.com via HTTP; Thu, 27 May 2010 18:17:03 PDT
X-Mailer: YahooMailRC/374.4 YahooMailWebService/0.8.103.269680
Date: Thu, 27 May 2010 18:17:03 -0700 (PDT)
From: kannan chandrasekaran <ckannanck@yahoo.com>
Subject: Re: How to get the number of unique terms in the inverted index
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-673063738-1275009423=:58187"

--0-673063738-1275009423=:58187
Content-Type: text/plain; charset=us-ascii

I am just trying out a few experiments to calculate similarity between terms based on their co-occurences in the dataset...  Basically I am trying to build contextual vectors  and calculate similarity using a similarity measure ( say cosine similarity)..... 

I dont think this is an XY problem . The vectors I am trying to build are not the same as the TermVectors option ((term,freq) pairs per document) in the lucene ( if thats what u meant) 

Thanks
Kannan




________________________________

OK, let's back up a level. WHY are you building these
vectors? Where I'm going with this is I wonder if this
is an XY problem, see:
http://people.apache.org/~hossman/#xyproblem

Best
Erick

On Thu, May 27, 2010 at 7:49 PM, kannan chandrasekaran
<ckannanck@yahoo.com>wrote:

> Uwe,
>
> I now see the problem with overlapping terms across segments...Thanks...
>
> Erik,
>
> Good point...My usecase for this is ,
>
> I am trying to build vectors for individual terms and documents and I need
> to know the size to handle memory constraints
>
> Thanks
> Kannan
>
>
>


      
--0-673063738-1275009423=:58187--

From java-user-return-46262-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 28 04:52:41 2010
Return-Path: <java-user-return-46262-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71061 invoked from network); 28 May 2010 04:52:41 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 28 May 2010 04:52:41 -0000
Received: (qmail 25698 invoked by uid 500); 28 May 2010 04:52:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25592 invoked by uid 500); 28 May 2010 04:52:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25584 invoked by uid 99); 28 May 2010 04:52:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 May 2010 04:52:35 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of fancyerii@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 May 2010 04:52:28 +0000
Received: by pwj10 with SMTP id 10so554000pwj.35
        for <java-user@lucene.apache.org>; Thu, 27 May 2010 21:52:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=u8ZXrROy5ef07AxJT+kw3WC4crZsr+1b3ib3dsLf7YA=;
        b=i6uTLH3NmLIegeMiL8267XtYGsNrDEmzVeWDVdsD86xlx9CaGr09bdQOPaALaWYsIi
         U+YxWCdxb5gVL/Kwp0/EX10ZWxMk7YLU9r7RrPN3FYFgjNmBP2MfzcVXbS32kwJ0bm33
         pH+TIIYdeSJAcguamDGrtRq0T0GhtK6r5woR4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=Drg/JuRZzyFVD8w3VUJk+i7htF/uhE0lqWrIzhiSUJUM1i9VjSPG2RWQJOaQoq5S71
         RM9nw3KTm8Ln0SAYjXrxQ+IeoOLMZnRKDbV2eX47bQXYPwHAc5PkIxGzdBYM8fC4IkCO
         +0ihLDQT6JifAYe6nQZnZX3pNg1+8aHxp1AaY=
MIME-Version: 1.0
Received: by 10.142.3.5 with SMTP id 5mr7444980wfc.169.1275022326746; Thu, 27 
	May 2010 21:52:06 -0700 (PDT)
Received: by 10.142.191.18 with HTTP; Thu, 27 May 2010 21:52:06 -0700 (PDT)
Date: Fri, 28 May 2010 12:52:06 +0800
Message-ID: <AANLkTikXEarGaNJJYwrR-QPPC-goQyRKNfW-5XE0SS8p@mail.gmail.com>
Subject: how to reuse a tokenStream?
From: Li Li <fancyerii@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

I want to analyzer a text twice so that I can get some statistic
information from this text
                                TokenStream tokenStream=null;
		Analyzer wa=new WhitespaceAnalyzer();
		try {
			tokenStream = wa.reusableTokenStream(fieldName, reader);
			while(tokenStream.incrementToken()){
				//do something
			}
		} catch (IOException e1) {
			e1.printStackTrace();
		}

		try {
                                                tokenStream.reset();
			//tokenStream = wa.reusableTokenStream(fieldName, reader);
			while(tokenStream.incrementToken()){
                                                                //not here
				System.out.println("resuable");

			}
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46263-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 28 12:20:12 2010
Return-Path: <java-user-return-46263-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82129 invoked from network); 28 May 2010 12:20:12 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 28 May 2010 12:20:12 -0000
Received: (qmail 44679 invoked by uid 500); 28 May 2010 12:20:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44576 invoked by uid 500); 28 May 2010 12:20:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44566 invoked by uid 99); 28 May 2010 12:20:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 May 2010 12:20:08 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of yseeley@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 May 2010 12:20:02 +0000
Received: by wwi18 with SMTP id 18so131924wwi.35
        for <java-user@lucene.apache.org>; Fri, 28 May 2010 05:19:41 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:sender:reply-to:received
         :in-reply-to:references:date:x-google-sender-auth:message-id:subject
         :from:to:content-type:content-transfer-encoding;
        bh=eegfEGgasKjG+XDHcPrNZmgtitJiGnMOwfUJ1vQGbN8=;
        b=LHTcVaMd2Ihp9sXAp1mfbAY6bjPmF7z8pghp+w5x+Gy4tCcwb+YtQN/TmaeAS2LZXR
         sxmAn2wZCNUhU0TgOZSHGA2NtbM72wvFsNMJF9G8Qu5GQEEVU7Preyn5h5nHpb6mCGbI
         fazb9R0Lp4kuBckMidoe9fS0cW1St9SJoDq6c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:reply-to:in-reply-to:references:date
         :x-google-sender-auth:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=rDydKRoqadeBQ4/O5Rj8uPFbpGrmw8a4IPXEvYcCOPLxCSvts/sTiZJTy0Oiuq+EBf
         f/Sa5tk/gAUVEoVBO4Ucb1zkI5hNvONxuKaohydLRY291thMdpyhZZ1o6XIqkuey5Pzg
         ZwaLkg3Max6njGyj54k6yKdZgmBEhFbFjRsrk=
MIME-Version: 1.0
Received: by 10.227.137.135 with SMTP id w7mr213434wbt.10.1275049181798; Fri, 
	28 May 2010 05:19:41 -0700 (PDT)
Sender: yseeley@gmail.com
Reply-To: yonik@lucidimagination.com
Received: by 10.216.22.140 with HTTP; Fri, 28 May 2010 05:19:41 -0700 (PDT)
In-Reply-To: <802151.58187.qm@web55203.mail.re4.yahoo.com>
References: <802151.58187.qm@web55203.mail.re4.yahoo.com>
Date: Fri, 28 May 2010 08:19:41 -0400
X-Google-Sender-Auth: XWvN59qTVBKyiDZwWluXhw-f690
Message-ID: <AANLkTinx6jsckjxP0HY9JumiRaFl2W4luAiS5QhLI0AP@mail.gmail.com>
Subject: Re: How to get the number of unique terms in the inverted index
From: Yonik Seeley <yonik@lucidimagination.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

It seems like there should be a formula for estimating the total
number of unique terms given that you know the unique term counts for
each segment, and make certain assumptions like random document
distribution across segments.

-Yonik
http://www.lucidimagination.com

On Thu, May 27, 2010 at 9:17 PM, kannan chandrasekaran
<ckannanck@yahoo.com> wrote:
> I am just trying out a few experiments to calculate similarity between te=
rms based on their co-occurences in the dataset... =A0Basically I am trying=
 to build contextual vectors =A0and calculate similarity using a similarity=
 measure ( say cosine similarity).....
>
> I dont think this is an XY problem . The vectors I am trying to build are=
 not the same as the TermVectors option ((term,freq) pairs per document) in=
 the lucene ( if thats what u meant)
>
> Thanks
> Kannan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46264-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 28 13:31:49 2010
Return-Path: <java-user-return-46264-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5243 invoked from network); 28 May 2010 13:31:48 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 28 May 2010 13:31:48 -0000
Received: (qmail 23123 invoked by uid 500); 28 May 2010 13:31:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23097 invoked by uid 500); 28 May 2010 13:31:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23089 invoked by uid 99); 28 May 2010 13:31:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 May 2010 13:31:46 +0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=FREEMAIL_FROM,SPF_HELO_PASS,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 216.139.236.158 is neither permitted nor denied by domain of zoryanafurda@gmail.com)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 May 2010 13:31:40 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <zoryanafurda@gmail.com>)
	id 1OHzeh-0006RJ-8X
	for java-user@lucene.apache.org; Fri, 28 May 2010 06:31:19 -0700
Date: Fri, 28 May 2010 06:31:19 -0700 (PDT)
From: flaiz <zoryanafurda@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1275053479260-851722.post@n3.nabble.com>
Subject: Surround QueryParser and PhraseQuery
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


Hello

I'm having problem with searching phrase and using Surround Query Parser, so
let look at input surround queries (test examples)
   1. "yellow orange"
   2. lemon 2n ("yellow orange") 4n banana
where 2n, 4n are within connectors.

You see I surrounded yellow orange into quotes to let the parser know this
is PhraseQuery, but unfortunately the parser does not support PhraseQuery at
all. Could you please advice some workaround for such situation? How I
should handle such queries to get results from an index? I believe this is
common problem and there already is some solution.....

I'm using Lucene version 2.9.1.

Thanks,
Flaiz 
-- 
View this message in context: http://lucene.472066.n3.nabble.com/Surround-QueryParser-and-PhraseQuery-tp851722p851722.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46265-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 28 13:57:35 2010
Return-Path: <java-user-return-46265-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10775 invoked from network); 28 May 2010 13:57:35 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 28 May 2010 13:57:35 -0000
Received: (qmail 69588 invoked by uid 500); 28 May 2010 13:57:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69457 invoked by uid 500); 28 May 2010 13:57:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69449 invoked by uid 99); 28 May 2010 13:57:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 May 2010 13:57:32 +0000
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=AWL,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.160.176 as permitted sender)
Received: from [209.85.160.176] (HELO mail-gy0-f176.google.com) (209.85.160.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 May 2010 13:57:26 +0000
Received: by gyf1 with SMTP id 1so1157523gyf.35
        for <java-user@lucene.apache.org>; Fri, 28 May 2010 06:57:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=xS8f64p/7I9MC27488+o1iYv0u6fFKESYIZ5eqeT8Lc=;
        b=Q0YGrwbAVOMjTsGIHkMlkktVojpdRQqS2q4x31TMjinireBgL4QnqKk7gdcuRaJsMw
         JwKpRyEr5mgzAcrQshu0+d5QJp5ZsV3bJuj6xGtc2YGX4fWVOGnBm1fgqBd8KqUy0iEl
         VLD845KHac1BYwurFROSQ+yy3DeZgFEMGsGgs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Vib4ajTlAphJ1pZ9qVUNfUWl2Z6K/aL/lc6FOPZZjbCQ3IBdkjBCPBdSCCjOMnI7iM
         7iuu/tJXruKpZC0udqolxn9VXvK6PdDLQDn3DhpqTX+E/B2CQlZDtwjCBxXMvn/a4oLG
         dj3oMZ9Qn+K8fCGDH9aFyLP1hIm3VBF2QOx38=
MIME-Version: 1.0
Received: by 10.150.250.5 with SMTP id x5mr1778764ybh.295.1275055025805; Fri, 
	28 May 2010 06:57:05 -0700 (PDT)
Received: by 10.151.43.7 with HTTP; Fri, 28 May 2010 06:57:05 -0700 (PDT)
In-Reply-To: <AANLkTikXEarGaNJJYwrR-QPPC-goQyRKNfW-5XE0SS8p@mail.gmail.com>
References: <AANLkTikXEarGaNJJYwrR-QPPC-goQyRKNfW-5XE0SS8p@mail.gmail.com>
Date: Fri, 28 May 2010 09:57:05 -0400
Message-ID: <AANLkTikAVuQB8xLuJfyUxYiIQmYPwZSRsrAo0wFYFwgZ@mail.gmail.com>
Subject: Re: how to reuse a tokenStream?
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd51680e1da5e0487a7e12d

--000e0cd51680e1da5e0487a7e12d
Content-Type: text/plain; charset=ISO-8859-1

What is the problem you're seeing? Maybe a stack trace?
You haven't told us what the incorrect behavior is.

Best
Erick

On Fri, May 28, 2010 at 12:52 AM, Li Li <fancyerii@gmail.com> wrote:

> I want to analyzer a text twice so that I can get some statistic
> information from this text
>                                TokenStream tokenStream=null;
>                Analyzer wa=new WhitespaceAnalyzer();
>                try {
>                        tokenStream = wa.reusableTokenStream(fieldName,
> reader);
>                        while(tokenStream.incrementToken()){
>                                //do something
>                        }
>                } catch (IOException e1) {
>                        e1.printStackTrace();
>                }
>
>                try {
>                                                tokenStream.reset();
>                        //tokenStream = wa.reusableTokenStream(fieldName,
> reader);
>                        while(tokenStream.incrementToken()){
>                                                                //not here
>                                System.out.println("resuable");
>
>                        }
>                } catch (IOException e) {
>                        // TODO Auto-generated catch block
>                        e.printStackTrace();
>                }
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd51680e1da5e0487a7e12d--

From java-user-return-46266-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 28 14:16:01 2010
Return-Path: <java-user-return-46266-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20631 invoked from network); 28 May 2010 14:16:00 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 28 May 2010 14:16:00 -0000
Received: (qmail 14429 invoked by uid 500); 28 May 2010 14:15:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14403 invoked by uid 500); 28 May 2010 14:15:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14395 invoked by uid 99); 28 May 2010 14:15:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 May 2010 14:15:58 +0000
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=AWL,RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [67.222.39.38] (HELO outbound-mail-158.bluehost.com) (67.222.39.38)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 28 May 2010 14:15:50 +0000
Received: (qmail 20787 invoked by uid 0); 28 May 2010 14:15:29 -0000
Received: from unknown (HELO box534.bluehost.com) (74.220.219.134)
  by cpoproxy2.bluehost.com with SMTP; 28 May 2010 14:15:29 -0000
Received: from nat-pool-cdg-u.redhat.com ([209.132.186.21] helo=[10.201.16.3])
	by box534.bluehost.com with esmtpsa (TLSv1:AES128-SHA:128)
	(Exim 4.69)
	(envelope-from <emmanuel@hibernate.org>)
	id 1OI0LQ-0000t3-Dd
	for java-user@lucene.apache.org; Fri, 28 May 2010 08:15:29 -0600
From: Emmanuel Bernard <emmanuel@hibernate.org>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable
Subject: PhraseQuery vs MultiPhraseQuery
Date: Fri, 28 May 2010 16:15:25 +0200
Message-Id: <B9D41EAA-862D-4D28-A2CC-D5413D03CBFE@hibernate.org>
To: java-user@lucene.apache.org
Mime-Version: 1.0 (Apple Message framework v1078)
X-Mailer: Apple Mail (2.1078)
X-Identified-User: {1307:box534.bluehost.com:emmanue2:emmanuelbernard.com} {sentby:smtp auth 209.132.186.21 authed with oss@emmanuelbernard.com}

Hello,
I am a bit confused by the two.

Is there a fundamental difference between

PhraseQuery query =3D new PhraseQuery();
query.add(term1, 0);
query.add(term2, 0);

and

MultiPhraseQuery query =3D new MultiPhraseQuery();
query.add( new Term[] { term1, term2 } );

The only different I could think of is that MPQ somehow does a OR =
between terms at the same position while PQ does a AND. Am I off base?

Thanks for you help.

Emmanuel


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46267-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 28 14:40:37 2010
Return-Path: <java-user-return-46267-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26563 invoked from network); 28 May 2010 14:40:36 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 28 May 2010 14:40:36 -0000
Received: (qmail 61227 invoked by uid 500); 28 May 2010 14:40:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61089 invoked by uid 500); 28 May 2010 14:40:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61079 invoked by uid 99); 28 May 2010 14:40:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 May 2010 14:40:34 +0000
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=AWL,RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.83.48] (HELO mail-gw0-f48.google.com) (74.125.83.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 May 2010 14:40:28 +0000
Received: by mail-gw0-f48.google.com with SMTP id 15so1174443gwj.35
        for <java-user@lucene.apache.org>; Fri, 28 May 2010 07:40:07 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.24.13 with SMTP id b13mr1479892ybj.431.1275057607053; Fri, 
	28 May 2010 07:40:07 -0700 (PDT)
Received: by 10.151.11.20 with HTTP; Fri, 28 May 2010 07:40:07 -0700 (PDT)
In-Reply-To: <AANLkTikfe-9LaHJXCdCUck64jlhtSsMv6AfmdGUoYS9c@mail.gmail.com>
References: <AANLkTinf518tzyiyDTvOP9-IhAWifodI6I9dSc61_ruy@mail.gmail.com>
	<AANLkTil1h3YRqCkJpnRMl0Q9fC3lRLX-auOD33g7frzL@mail.gmail.com>
	<AANLkTilnE4wmw-_l7cylifzlqqNsQAPBPkxFCNpbpI9x@mail.gmail.com>
	<AANLkTik6v5I9ej5EMH1je_qIEgCYDUBYU0miHttCIiEh@mail.gmail.com>
	<AANLkTikfe-9LaHJXCdCUck64jlhtSsMv6AfmdGUoYS9c@mail.gmail.com>
Date: Fri, 28 May 2010 10:40:07 -0400
Message-ID: <AANLkTinEnMqSFeCWINbkW4eoqZwJdjEF6ap5WdJkMqHl@mail.gmail.com>
Subject: Re: Core dumped
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Also, are you indexing largish documents?  Lucene must fully index the
doc, and then flush, so for such large docs it can easily use more
than the 50 MB buffer you allotted.

There were some recent memory leak fixes for such large documents, as
well, that you might be hitting.  Which Lucene version are you using?

Finally, a core dump means you've tickled a JRE bug.  Nothing Lucene
(or any java program) does can cause a core dump unless it's a JRE
bug.  That said, it looks quite likely that avoiding the OOME will
sidestep the bug :)

Mike

On Thu, May 27, 2010 at 1:52 PM, Saurabh Agarwal <srbh.grwl@gmail.com> wrot=
e:
> I will check it out!!
> Saurabh Agarwal
>
>
> On Thu, May 27, 2010 at 11:13 PM, Erick Erickson <erickerickson@gmail.com=
>wrote:
>
>> The larger your RAMbufferSize, the more memory you consume FWIW.
>>
>> OK, then, does it always OOM on the same document? Are you trying to ind=
ex
>> any particularly large documents?
>>
>> Erick
>>
>> On Thu, May 27, 2010 at 1:28 PM, Saurabh Agarwal <srbh.grwl@gmail.com
>> >wrote:
>>
>> > RAMBufferSize id 50 Mb, i tried with 200 too
>> > the index is unoptimized
>> > MergeFactor is Default 10 and I have not changed it
>> >
>> > MaxBuffered Docs is also default
>> > Saurabh Agarwal
>> >
>> >
>> > On Thu, May 27, 2010 at 10:31 PM, Erick Erickson <
>> erickerickson@gmail.com
>> > >wrote:
>> >
>> > > What have you set various indexwriter properties to? Particularly
>> > > things like merge factor, max buffered docs and ram buffer size.
>> > >
>> > > The first thing I'd look at is MergeFactor. From the JavaDocs:
>> > > Determines how often segment indices are merged by addDocument(). Wi=
th
>> > > smaller values, less RAM is used while indexing, and searches on
>> > > unoptimized
>> > > indices are faster, but indexing speed is slower. With larger values=
,
>> > more
>> > > RAM is used during indexing, and while searches on unoptimized indic=
es
>> > are
>> > > slower, indexing is faster. Thus larger values (> 10) are best for
>> batch
>> > > index creation, and smaller values (< 10) for indices that are
>> > > interactively
>> > > maintained.
>> > >
>> > >
>> > > HTH
>> > > Erick
>> > >
>> > > On Thu, May 27, 2010 at 11:52 AM, Saurabh Agarwal <srbh.grwl@gmail.c=
om
>> > > >wrote:
>> > >
>> > > > Hi,
>> > > > when I am running Lucene on a 512 MB system.
>> > > > I am getting the following error
>> > > > Exception in thread "main" java.lang.OutOfMemoryError: Java heap
>> space
>> > > > =A0 =A0 =A0 =A0at
>> > > >
>> > > >
>> > >
>> >
>> org.apache.lucene.index.DocumentsWriter$ByteBlockAllocator.getByteBlock(=
DocumentsWriter.java:1206)
>> > > > and sometimes
>> > > > =A0An unexpected error has been detected by Java Runtime Environme=
nt:
>> > > > # Problematic frame:
>> > > > # J =A0java.nio.ByteBuffer.arrayOffset()I
>> > > >
>> > > >
>> > > > if I decrease my corpus size it indexes it perfectly!!!
>> > > >
>> > > > Can someone tell me how to index a larger corpus even if it takes
>> more
>> > > > time!!!
>> > > >
>> > > > Thanks
>> > > >
>> > > > Saurabh Agarwal
>> > > >
>> > >
>> >
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46268-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 28 20:03:04 2010
Return-Path: <java-user-return-46268-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20638 invoked from network); 28 May 2010 20:03:03 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 28 May 2010 20:03:03 -0000
Received: (qmail 85093 invoked by uid 500); 28 May 2010 20:03:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85049 invoked by uid 500); 28 May 2010 20:03:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85041 invoked by uid 99); 28 May 2010 20:03:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 May 2010 20:03:01 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.49.18] (HELO web52908.mail.re2.yahoo.com) (206.190.49.18)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 28 May 2010 20:02:52 +0000
Received: (qmail 16284 invoked by uid 60001); 28 May 2010 20:02:31 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1275076951; bh=3Z4ud5QYqMZr+4Ia55tc01hT458lQtWx5wkiB1eM3hY=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=OiaK9iaOH2++ktTg8sYp7mOAXeB9873fr4ZeZ9cnDiWQaBsCLC2F0MGSMqeVa05vhWgtoVVz4ty7s/WBy1T/AY+lln5VSrjjX3wWM7nQy3auRIAy/tHV0gUjw6VnkoX/VBuXxgENQjZsjT/XAqbogyyZxE0QBgG10roHy1YwlPc=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=NJ7owp16lYDbARNQlkSajMb0eCI0ihAtjOxLg4ooV3z0tcYL0euHjtTZ0wk77a3oKIuxAwQoT2ZUr6VXRz2a7/2Nu+21xUNIe6rmOtJ1KEpIYdIECU2YUaWAeqIMiZWXqGa8CYPmuQDWNLE6RCNEXP/FupEo5DL83P6B4BaUk9M=;
Message-ID: <243865.16106.qm@web52908.mail.re2.yahoo.com>
X-YMail-OSG: 55PX5OcVM1kbCN8s7hoR2.VHT_4inSxaBAYdsAYgOchWFtb
 9mQiIDUJ5u9M562H4kDCjfggTNZz2JGkL5QjaaBtFTnzbPRsU0jsVw2Mz95e
 Lq763ou_evEQOZv4hKSGPEdgukDp87tIqW6gsGXq6W_da0AFteMYI2SmIc8N
 OcL8YAZY2tqGVhvIrZUR6Y4V9QgrqyR7vhbheuweWThybNVy4hJXTCRsVAzf
 fuJNqnn6z7hC73O0esPRr4bOJmgtA.52v8o6ZCu0N8_LHKIkOPXAllqTimuN
 1Tu4Zj6_ozySQ5OT0YZHYBsbdZQ--
Received: from [78.188.65.214] by web52908.mail.re2.yahoo.com via HTTP; Fri, 28 May 2010 13:02:31 PDT
X-Mailer: YahooMailClassic/11.0.8 YahooMailWebService/0.8.103.269680
Date: Fri, 28 May 2010 13:02:31 -0700 (PDT)
From: Ahmet Arslan <iorixxx@yahoo.com>
Subject: Re: Surround QueryParser and PhraseQuery
To: java-user@lucene.apache.org
In-Reply-To: <1275053479260-851722.post@n3.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

> I'm having problem with searching phrase and using Surround=0A> Query Par=
ser, so=0A> let look at input surround queries (test examples)=0A> =A0=A0=
=A01. "yellow orange"=0A> =A0=A0=A02. lemon 2n ("yellow orange") 4n banana=
=0A> where 2n, 4n are within connectors.=0A=0AYou don't need phrasequery wh=
en you already have spannearquery.=0A=0Asurround equivalent of "yellow oran=
ge" is yellow w orange=0A=0Alemon 2n ("yellow orange") 4n banana =3D> lemon=
 2n (yellow w orange) 4n banana=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46269-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 28 20:09:56 2010
Return-Path: <java-user-return-46269-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26848 invoked from network); 28 May 2010 20:09:56 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 28 May 2010 20:09:56 -0000
Received: (qmail 97913 invoked by uid 500); 28 May 2010 20:09:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97875 invoked by uid 500); 28 May 2010 20:09:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97867 invoked by uid 99); 28 May 2010 20:09:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 May 2010 20:09:54 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.49.14] (HELO web52904.mail.re2.yahoo.com) (206.190.49.14)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 28 May 2010 20:09:46 +0000
Received: (qmail 41543 invoked by uid 60001); 28 May 2010 20:09:24 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1275077364; bh=oMVfEaVh7yQqbj519ClXuJcNCTHNORZ9WT4+rnKILnI=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=HWlLRsybkL5WZ6RsSQV9TygJLfmIuVhEjM1SAKLxiuVpyMSyu0QPVKU9NoGe9oOIj2UCCaPWHdinGgnZLk/91Agi/rIA1qw8pRiNtvgiwGScKp/KPRYYk1jPPbdIqQhRKVHnqmY7UcXpPeKhYI3uYgwTMXKinPumkYOr5JLJT1g=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=ajqU9FhU1C5n/6tyM/V36ZFUsdn51aqEvrV32IRfcFL920JNoNp5ZeZG07pMiFpL9i8IF6ZnqMfQrK20rlHTWybwPtzWQK8vS9P0s8PI+vRuj5FEdZScZYs6khndUwdS1KM4pwYgYsEjRFMGmNxtylqGSh4y7WSsWzLkJONHgTo=;
Message-ID: <859329.41403.qm@web52904.mail.re2.yahoo.com>
X-YMail-OSG: VSmOnhIVM1lBKyaCCOB.5dQE9VASaYmFknKEINWT5YFPkxk
 Y_e5QSfTJgPuovMluZ5mJ81NfJf7CW0xf_lVvXn6ZnJxsiEytV5PRnF5tLL9
 05OAE.gV8R83Ym.5onun2i_cpFwt34YwLsvdkmzbCLb9g6fndr2ZdsrmU302
 C14pekMHvg2_WQ3qyufPjAdgNwPtKH0Prx7TMT9jQBVTktgF2gewOZLF8ZRo
 atyw.qXGZY_KuA_Qh9ch43Sso93RsAUd1YNkhHG1KRRVo3v6xdfbZ0sdbU6u
 9UdKLVlas2uay5EXqehVF6JM5YB93blfTTkk.GGHeiottiSVpQ9WArw--
Received: from [78.188.65.214] by web52904.mail.re2.yahoo.com via HTTP; Fri, 28 May 2010 13:09:24 PDT
X-Mailer: YahooMailClassic/11.0.8 YahooMailWebService/0.8.103.269680
Date: Fri, 28 May 2010 13:09:24 -0700 (PDT)
From: Ahmet Arslan <iorixxx@yahoo.com>
Subject: Re: PhraseQuery vs MultiPhraseQuery
To: java-user@lucene.apache.org
In-Reply-To: <B9D41EAA-862D-4D28-A2CC-D5413D03CBFE@hibernate.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii



> Is there a fundamental difference between
> 
> PhraseQuery query = new PhraseQuery();
> query.add(term1, 0);
> query.add(term2, 0);
> 
> and
> 
> MultiPhraseQuery query = new MultiPhraseQuery();
> query.add( new Term[] { term1, term2 } );
> 
> The only different I could think of is that MPQ somehow
> does a OR between terms at the same position while PQ does a
> AND. Am I off base?

MPQ can support "(quick OR fast) (cat OR mice OR dog)" type of queries so that these docs are retrieved:

quick rat
fast mice
fast dog

etc.

In your example term1=quick and term2=fast. You need to add another Term array. 
query.add( new Term[] { term1, term2 } );
query.add( new Term[] { term3, term4, term5 } );



      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46270-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat May 29 05:44:30 2010
Return-Path: <java-user-return-46270-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58082 invoked from network); 29 May 2010 05:44:29 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 29 May 2010 05:44:29 -0000
Received: (qmail 53511 invoked by uid 500); 29 May 2010 05:44:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53223 invoked by uid 500); 29 May 2010 05:44:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53215 invoked by uid 99); 29 May 2010 05:44:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 May 2010 05:44:26 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of fancyerii@gmail.com designates 209.85.212.176 as permitted sender)
Received: from [209.85.212.176] (HELO mail-px0-f176.google.com) (209.85.212.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 May 2010 05:44:18 +0000
Received: by pxi10 with SMTP id 10so1259367pxi.35
        for <java-user@lucene.apache.org>; Fri, 28 May 2010 22:43:57 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=YOW8vNAsL7L2dvOmo07iq6lAlmSDoGzwHakSs5xFo1E=;
        b=bxaYP+NOKkhCFUi2hhpQkUf/bUWD0BiIV/M/Hy5RmK/1q8L7sPamb7LyoAYL4qpoCA
         ZTTIepXpwswHjGdNs2LAJF0WCettb9JY8W4+jA/RbIsWUJvAhkADwX0RQR3n/mfMJWdj
         +n0WG/+oJZ1kN2S6TZsxTF1fu+S8Uxg6o6e0g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=tk9F0FCQGH34g+1MhAVcbVFhNM6tBjJ/la1KeL0JvSxljwo733SjcNN9TJZXoJENnL
         kpUdSssgRhjC4RXJqnkBheraWgklc2+pHvYqeUs3lIcu9e3SHITw1imF/jgjoRneXHDe
         iAmuRC9kPr2eqAjGKDH7AONZSa+hEzM4fLPwI=
MIME-Version: 1.0
Received: by 10.142.67.29 with SMTP id p29mr910495wfa.138.1275111837117; Fri, 
	28 May 2010 22:43:57 -0700 (PDT)
Received: by 10.142.191.18 with HTTP; Fri, 28 May 2010 22:43:57 -0700 (PDT)
In-Reply-To: <AANLkTikAVuQB8xLuJfyUxYiIQmYPwZSRsrAo0wFYFwgZ@mail.gmail.com>
References: <AANLkTikXEarGaNJJYwrR-QPPC-goQyRKNfW-5XE0SS8p@mail.gmail.com>
	<AANLkTikAVuQB8xLuJfyUxYiIQmYPwZSRsrAo0wFYFwgZ@mail.gmail.com>
Date: Sat, 29 May 2010 13:43:57 +0800
Message-ID: <AANLkTimfV4u09tLMWgmNq1gz0rOBYUjS2Vc0XvMmsW8a@mail.gmail.com>
Subject: Re: how to reuse a tokenStream?
From: Li Li <fancyerii@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

I want to implement an analyzer which use WhitespaceAnalyzer first
then my tokenFilter. But my filter need not global information of
token such as how many times a token occur. So in  tokenStream method.
I iterate the tokenStream to get all the things I need. Then
pass this information to my own TokenFilter. But my tokenfilter's
incrementToken method will always get nothing from the TokenStream
because it's already consumed.
public MyAnalyzer{
...
         Analyzer wa=3Dnew WhitespaceAnalyzer();
         public TokenStream tokenStream(String fieldName, Reader reader) {
               TokenStream tokenStream=3Dnull;

               try {
                       tokenStream =3D wa.reusableTokenStream(fieldName, re=
ader);
                       while(tokenStream.incrementToken()){
                               //do something
                       }
               } catch (IOException e1) {
                       e1.printStackTrace();
               }
/*
               try {
                       tokenStream.reset();
                       //tokenStream =3D
wa.reusableTokenStream(fieldName, reader);
                       while(tokenStream.incrementToken()){
                               //it don't come here, which means the
tokenStream is not resuable.
                               System.out.println("resuable");
                       }
               } catch (IOException e) {
                       e.printStackTrace();
               }
*/
              MyFilter stream =3D new MyFilter(tokenStream);
              return stream;
      }
}

2010/5/28 Erick Erickson <erickerickson@gmail.com>:
> What is the problem you're seeing? Maybe a stack trace?
> You haven't told us what the incorrect behavior is.
>
> Best
> Erick
>
> On Fri, May 28, 2010 at 12:52 AM, Li Li <fancyerii@gmail.com> wrote:
>
>> I want to analyzer a text twice so that I can get some statistic
>> information from this text
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0TokenStre=
am tokenStream=3Dnull;
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0Analyzer wa=3Dnew WhitespaceAnalyzer();
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0try {
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0tokenStream =3D wa.reusab=
leTokenStream(fieldName,
>> reader);
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0while(tokenStream.increme=
ntToken()){
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0//do some=
thing
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0} catch (IOException e1) {
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0e1.printStackTrace();
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}
>>
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0try {
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0 =A0 =A0 =A0tokenStream.reset();
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0//tokenStream =3D wa.reus=
ableTokenStream(fieldName,
>> reader);
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0while(tokenStream.increme=
ntToken()){
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0//not here
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0System.ou=
t.println("resuable");
>>
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0} catch (IOException e) {
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0// TODO Auto-generated ca=
tch block
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0e.printStackTrace();
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46271-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat May 29 07:41:57 2010
Return-Path: <java-user-return-46271-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83058 invoked from network); 29 May 2010 07:41:57 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 29 May 2010 07:41:57 -0000
Received: (qmail 96836 invoked by uid 500); 29 May 2010 07:41:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96646 invoked by uid 500); 29 May 2010 07:41:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96635 invoked by uid 99); 29 May 2010 07:41:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 May 2010 07:41:54 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of adrianocrestani@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 May 2010 07:41:46 +0000
Received: by iwn3 with SMTP id 3so206838iwn.35
        for <java-user@lucene.apache.org>; Sat, 29 May 2010 00:41:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=KHYbHx0Rq6L4sMEJc0ovQbKsB1I5zhZ9L4i02m1o5dY=;
        b=p9CBwCdtPMgewC+8a0Iepxnh5ggfOy3mbEJJy9Ct+/MRHvQbLxQwRz4I8CgEwQ1HFd
         V08L490opOsJt/aFE6iS/YZf9GZiNIOP6jC9opahVKk+a0nk5OwEOjizP0rldTM98d4r
         crYZAjCP73GQE734/3tM95ixnPD/ueCo6WfQA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=EiqJF8mPa8wYYqyy7DEimUAZUoqPh1ntE2/cvi2NNFT/hSb5NxahSTZgORa+Rj/ilT
         s91G9QPzLA1AJ08oMqBQXFrWMm9H+BsrwnedulVz/BSlySwL8XnUgphI5E+eXXxLrCKG
         1HZWS74XK4t9arszF6iGtihJrB7MpQaDhIims=
Received: by 10.231.195.16 with SMTP id ea16mr1780018ibb.64.1275118885137; 
	Sat, 29 May 2010 00:41:25 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.166.149 with HTTP; Sat, 29 May 2010 00:41:05 -0700 (PDT)
In-Reply-To: <AANLkTimfV4u09tLMWgmNq1gz0rOBYUjS2Vc0XvMmsW8a@mail.gmail.com>
References: <AANLkTikXEarGaNJJYwrR-QPPC-goQyRKNfW-5XE0SS8p@mail.gmail.com> 
	<AANLkTikAVuQB8xLuJfyUxYiIQmYPwZSRsrAo0wFYFwgZ@mail.gmail.com> 
	<AANLkTimfV4u09tLMWgmNq1gz0rOBYUjS2Vc0XvMmsW8a@mail.gmail.com>
From: Adriano Crestani <adrianocrestani@gmail.com>
Date: Sat, 29 May 2010 03:41:05 -0400
Message-ID: <AANLkTin6pgd1VEWJX3quwEWqz6wxNk98sqx4QU-9e3M1@mail.gmail.com>
Subject: Re: how to reuse a tokenStream?
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636b14d0231f0bf0487b6c030
X-Virus-Checked: Checked by ClamAV on apache.org

--001636b14d0231f0bf0487b6c030
Content-Type: text/plain; charset=ISO-8859-1

Hi,

If the reader supports reset, try to also reset it.

Anyway, if in your final code, you are really using WhitespaceAnalyzer, I
guess you should use WhitespaceTokenizer instead of WhitespaceAnalyzer:

WhitespaceTokenizer tokenizer = new WhitespaceTokenizer(reader);
// consume tokens
reader.reset();
tokenizer.reset(reader);
// consume it again

Best Regards,
Adriano Crestani

On Sat, May 29, 2010 at 1:43 AM, Li Li <fancyerii@gmail.com> wrote:

> I want to implement an analyzer which use WhitespaceAnalyzer first
> then my tokenFilter. But my filter need not global information of
> token such as how many times a token occur. So in  tokenStream method.
> I iterate the tokenStream to get all the things I need. Then
> pass this information to my own TokenFilter. But my tokenfilter's
> incrementToken method will always get nothing from the TokenStream
> because it's already consumed.
> public MyAnalyzer{
> ...
>         Analyzer wa=new WhitespaceAnalyzer();
>         public TokenStream tokenStream(String fieldName, Reader reader) {
>               TokenStream tokenStream=null;
>
>               try {
>                       tokenStream = wa.reusableTokenStream(fieldName,
> reader);
>                       while(tokenStream.incrementToken()){
>                               //do something
>                       }
>               } catch (IOException e1) {
>                       e1.printStackTrace();
>               }
> /*
>               try {
>                       tokenStream.reset();
>                       //tokenStream =
> wa.reusableTokenStream(fieldName, reader);
>                       while(tokenStream.incrementToken()){
>                                //it don't come here, which means the
> tokenStream is not resuable.
>                                System.out.println("resuable");
>                       }
>               } catch (IOException e) {
>                        e.printStackTrace();
>               }
> */
>              MyFilter stream = new MyFilter(tokenStream);
>              return stream;
>      }
> }
>
> 2010/5/28 Erick Erickson <erickerickson@gmail.com>:
> > What is the problem you're seeing? Maybe a stack trace?
> > You haven't told us what the incorrect behavior is.
> >
> > Best
> > Erick
> >
> > On Fri, May 28, 2010 at 12:52 AM, Li Li <fancyerii@gmail.com> wrote:
> >
> >> I want to analyzer a text twice so that I can get some statistic
> >> information from this text
> >>                                TokenStream tokenStream=null;
> >>                Analyzer wa=new WhitespaceAnalyzer();
> >>                try {
> >>                        tokenStream = wa.reusableTokenStream(fieldName,
> >> reader);
> >>                        while(tokenStream.incrementToken()){
> >>                                //do something
> >>                        }
> >>                } catch (IOException e1) {
> >>                        e1.printStackTrace();
> >>                }
> >>
> >>                try {
> >>                                                tokenStream.reset();
> >>                        //tokenStream = wa.reusableTokenStream(fieldName,
> >> reader);
> >>                        while(tokenStream.incrementToken()){
> >>                                                                //not
> here
> >>                                System.out.println("resuable");
> >>
> >>                        }
> >>                } catch (IOException e) {
> >>                        // TODO Auto-generated catch block
> >>                        e.printStackTrace();
> >>                }
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001636b14d0231f0bf0487b6c030--

From java-user-return-46272-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun May 30 17:35:47 2010
Return-Path: <java-user-return-46272-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82850 invoked from network); 30 May 2010 17:35:47 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 May 2010 17:35:47 -0000
Received: (qmail 34307 invoked by uid 500); 30 May 2010 17:35:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34248 invoked by uid 500); 30 May 2010 17:35:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34240 invoked by uid 99); 30 May 2010 17:35:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 May 2010 17:35:44 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of visual.logic@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 May 2010 17:35:35 +0000
Received: by vws1 with SMTP id 1so2970734vws.35
        for <java-user@lucene.apache.org>; Sun, 30 May 2010 10:35:14 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:from:content-type
         :content-transfer-encoding:subject:date:message-id:to:mime-version
         :x-mailer;
        bh=JikQ8496+5LXu4N+zKzjpS1hyIkCyqbmGoqJo5KMQ4o=;
        b=tacJjq20l1md2uVmS4b48P0t6g4Fl2rVltOEoxfLbBkd1K+LmZLjjpPAz57ejF/JUD
         EOz+vcr2Xv+XU2M+7+Qoge2dTjgwQWbtyC5jHZiCRWxOdQCXAJso0fxcE5ptnJfcvFx7
         Mj+fQCR4VxQFv8hkJ6wkhB6jKNe4GM+5cD2v0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:content-type:content-transfer-encoding:subject:date:message-id
         :to:mime-version:x-mailer;
        b=CeEbkG0LawplYeTrMqaeuOGS0Ld3/4bhO9IOVTZtw5U5l57Igp1esRBU7OPOm50RaR
         0o24eFieXxPzy7nw9mzJere+8hnUmsuAFCKMma9k4oduAig+8LuElbdgCt4L4uiCtjQH
         U9Gyemiq+3gDI3I59RypshrcRQRBiHtevwXsI=
Received: by 10.220.127.94 with SMTP id f30mr2623797vcs.18.1275240914183;
        Sun, 30 May 2010 10:35:14 -0700 (PDT)
Received: from [192.168.100.159] (205-200-14-92.static.mts.net [205.200.14.92])
        by mx.google.com with ESMTPS id g3sm20827144vcp.4.2010.05.30.10.35.12
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sun, 30 May 2010 10:35:13 -0700 (PDT)
From: Visual Logic <visual.logic@gmail.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable
Subject: Using JSON for index input and search output
Date: Sun, 30 May 2010 12:33:19 -0500
Message-Id: <CE9C01A4-45FA-437A-A083-9F4D049F586E@gmail.com>
To: java-user@lucene.apache.org
Mime-Version: 1.0 (Apple Message framework v1078)
X-Mailer: Apple Mail (2.1078)
X-Virus-Checked: Checked by ClamAV on apache.org

Lucene,

JSON is the format used for all the configuration and property files in =
the RIA application we are developing. Is Lucene able to create a =
document from a given JSON file and index it? Is Lucene able to provide =
a JSON output response from a query made to an index? Does the Tika =
package provide this?

Local indexing and searching is needed on the local client so Solr is =
not a solution even though it does provide a search response in JSON =
format.

VL=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46273-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun May 30 17:47:27 2010
Return-Path: <java-user-return-46273-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83619 invoked from network); 30 May 2010 17:47:27 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 May 2010 17:47:27 -0000
Received: (qmail 41415 invoked by uid 500); 30 May 2010 17:47:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41374 invoked by uid 500); 30 May 2010 17:47:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41366 invoked by uid 99); 30 May 2010 17:47:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 May 2010 17:47:25 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of yseeley@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 May 2010 17:47:18 +0000
Received: by wwi18 with SMTP id 18so1639680wwi.35
        for <java-user@lucene.apache.org>; Sun, 30 May 2010 10:46:58 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:sender:reply-to:received
         :in-reply-to:references:date:x-google-sender-auth:message-id:subject
         :from:to:content-type:content-transfer-encoding;
        bh=xmFPKY92hIIc9WhhZzbhi6c72uvbJWuRBV/bDK2SFfs=;
        b=jkE1foiezxucCmoi+qcFtqN3R4QKbVWBR9GcQYLje2x6+WNcbKD6gyvEp1WSSens6Y
         gq4VTzB4C8trDgtQRIJ8ajPwAYan4qpt2bHAFV91mkVCbyMSnM3uhF30GAgant8rCEbi
         /MBGZ14MLluAhcDRsbS4Yd4QdpiQCDQ1DxTIE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:reply-to:in-reply-to:references:date
         :x-google-sender-auth:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=og+wYqAtp3vvVO7LmGQdzTcdZ7ijfcGTLNad/fOoWP3KaZntOGvpPDqRrERy4l4DIO
         TYOlTi56DBrLIgNpgkyZBPuoVmdOBK2r6dCoXHmcfYFkUNIilgsltIqNqm5p1/tDdDZa
         ygxj6mqlpr3ocr+N1mzEUL/451S0MvfYnbCiQ=
MIME-Version: 1.0
Received: by 10.227.137.205 with SMTP id x13mr3122808wbt.6.1275241618558; Sun, 
	30 May 2010 10:46:58 -0700 (PDT)
Sender: yseeley@gmail.com
Reply-To: yonik@lucidimagination.com
Received: by 10.216.22.140 with HTTP; Sun, 30 May 2010 10:46:58 -0700 (PDT)
In-Reply-To: <CE9C01A4-45FA-437A-A083-9F4D049F586E@gmail.com>
References: <CE9C01A4-45FA-437A-A083-9F4D049F586E@gmail.com>
Date: Sun, 30 May 2010 13:46:58 -0400
X-Google-Sender-Auth: P7qkPq888Vn4kt5LMuv3DabQD8M
Message-ID: <AANLkTimQpWxIM7H2prKlxpLAfKng4XRaBoRbpMGEBFfW@mail.gmail.com>
Subject: Re: Using JSON for index input and search output
From: Yonik Seeley <yonik@lucidimagination.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On Sun, May 30, 2010 at 1:33 PM, Visual Logic <visual.logic@gmail.com> wrot=
e:
> JSON is the format used for all the configuration and property files in t=
he RIA application we are developing. Is Lucene able to create a document f=
rom a given JSON file and index it? Is Lucene able to provide a JSON output=
 response from a query made to an index? Does the Tika package provide this=
?

No, and no.
XML, JSON, etc, are out of scope for lucene, which is a core search library=
.
Tika extracts text from documents like Word and PDF.

> Local indexing and searching is needed on the local client so Solr is not=
 a solution even though it does provide a search response in JSON format.

Solr is embeddable as well, so you can directly index/search.  But why
can't you run a separate server?

-Yonik
http://www.lucidimagination.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46274-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun May 30 18:27:59 2010
Return-Path: <java-user-return-46274-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98766 invoked from network); 30 May 2010 18:27:59 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 May 2010 18:27:59 -0000
Received: (qmail 62929 invoked by uid 500); 30 May 2010 18:27:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62897 invoked by uid 500); 30 May 2010 18:27:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62889 invoked by uid 99); 30 May 2010 18:27:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 May 2010 18:27:57 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of visual.logic@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 May 2010 18:27:49 +0000
Received: by vws1 with SMTP id 1so3027670vws.35
        for <java-user@lucene.apache.org>; Sun, 30 May 2010 11:27:28 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:content-type:mime-version
         :subject:from:in-reply-to:date:content-transfer-encoding:message-id
         :references:to:x-mailer;
        bh=ZayqbDZyvjQMng8/TVh/LDlwqVTAUyv3Mqh8PtxHR+0=;
        b=yEe0XebS1l6PWH9P3z3gvLrwMrHvcwHHv8p0ZeBSJE0fyxWAu5pXvAOsD2P2v4cXyR
         i4vqoSylFyIg13RgsJrNKLhrL6O+RqQaW+YdJVicwv1fCiFPeyokyymNeA6Nuz4zNdYU
         i35zaL3fBlDMj/+aUmtfR/ydfGQt0GrbP2WHQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        b=PNBHYXCKNZir168LQ+i8PNkiUMfejvKk03eeDoaROLVI51SCb7f1PI0FpszfdCh2rQ
         LxOWpYe4U9PdITcOycNEssy/NwriauUJnb7K82zgI6iopMLw6KWUxjHZewVSPXCxd5dF
         srYM3jAvJPnK/oNLKTSlP9EXQj8Y93Z3k5CKg=
Received: by 10.220.61.143 with SMTP id t15mr2544767vch.279.1275244048097;
        Sun, 30 May 2010 11:27:28 -0700 (PDT)
Received: from [192.168.100.159] (205-200-14-92.static.mts.net [205.200.14.92])
        by mx.google.com with ESMTPS id m13sm21006158vcs.13.2010.05.30.11.27.25
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sun, 30 May 2010 11:27:27 -0700 (PDT)
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1078)
Subject: Re: Using JSON for index input and search output
From: Visual Logic <visual.logic@gmail.com>
In-Reply-To: <AANLkTimQpWxIM7H2prKlxpLAfKng4XRaBoRbpMGEBFfW@mail.gmail.com>
Date: Sun, 30 May 2010 13:27:22 -0500
Content-Transfer-Encoding: quoted-printable
Message-Id: <02C687A6-A1FB-4C82-B173-034133BFBE48@gmail.com>
References: <CE9C01A4-45FA-437A-A083-9F4D049F586E@gmail.com> <AANLkTimQpWxIM7H2prKlxpLAfKng4XRaBoRbpMGEBFfW@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1078)
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for this helpful information.

Solr is embeddable but does that not just mean that SolrJ only provides =
the ability to call Solr running on some server? As far as I know =
embedding Solr is not really embedding it at all, only using it remotely =
where a internet connection needs to be maintained in order to do so. If =
Solr were truly embeddable how large of a memory footprint would that =
add to my app?

For some of my use cases using Solr on a remote server would work fine. =
For other cases it will not be quick enough, plus I want the user and =
other tool aspects of the local client to be able to utilize Lucene =
search for a lot more than only accessing resources on a remote server.

Sorry to hear there is no out of the box support for JSON input/output =
in Lucene but that can be overcome with a bit of local code.

VL


On 2010-05-30, at 12:46 PM, Yonik Seeley wrote:

> On Sun, May 30, 2010 at 1:33 PM, Visual Logic <visual.logic@gmail.com> =
wrote:
>> JSON is the format used for all the configuration and property files =
in the RIA application we are developing. Is Lucene able to create a =
document from a given JSON file and index it? Is Lucene able to provide =
a JSON output response from a query made to an index? Does the Tika =
package provide this?
>=20
> No, and no.
> XML, JSON, etc, are out of scope for lucene, which is a core search =
library.
> Tika extracts text from documents like Word and PDF.
>=20
>> Local indexing and searching is needed on the local client so Solr is =
not a solution even though it does provide a search response in JSON =
format.
>=20
> Solr is embeddable as well, so you can directly index/search.  But why
> can't you run a separate server?
>=20
> -Yonik
> http://www.lucidimagination.com
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46275-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun May 30 18:39:02 2010
Return-Path: <java-user-return-46275-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 571 invoked from network); 30 May 2010 18:39:02 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 May 2010 18:39:02 -0000
Received: (qmail 69257 invoked by uid 500); 30 May 2010 18:39:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69204 invoked by uid 500); 30 May 2010 18:39:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69196 invoked by uid 99); 30 May 2010 18:39:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 May 2010 18:39:00 +0000
X-ASF-Spam-Status: No, hits=-0.4 required=10.0
	tests=AWL,FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 May 2010 18:38:55 +0000
Received: by wwi18 with SMTP id 18so1661686wwi.35
        for <java-user@lucene.apache.org>; Sun, 30 May 2010 11:38:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:sender:reply-to:received
         :in-reply-to:references:date:x-google-sender-auth:message-id:subject
         :from:to:content-type;
        bh=fVp7gBDPlMIjOA4e5YLC/3OG8IYkvzazJkYPJFAbRDw=;
        b=PxUZNqK+fmrovTV2/0lHl+Owndm+YidKUqZ2hz5sLrGcikLR58jjLK5DqQ9xP3TU+F
         zrnMK1zLOmFN22ZaxeEYWhbTYpWFeuKXIQIrYbWLZ1rJxv8TkSON3bbHRei+1ZYkRsjB
         B7msIfmUgOTbKSCGYPH5Cvl/Gt1ZwizpHDAB4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:reply-to:in-reply-to:references:date
         :x-google-sender-auth:message-id:subject:from:to:content-type;
        b=UIoIqpVxV4j7sbm3NX2wssNibHSOrja3mUFCpR+HzkRPEo1bTlo+W6guwf4yMxw2Rb
         LnehdHMqZtjJVrzt3FPv//YDsN2990np+6gGufQSxYM/bj0poFr7r3xHzDqy0pxtUqEx
         I5AtIe8JviSqacr3oMWkzZRGXwtiz2LtZl4UE=
MIME-Version: 1.0
Received: by 10.227.134.142 with SMTP id j14mr3229102wbt.18.1275244713143; 
	Sun, 30 May 2010 11:38:33 -0700 (PDT)
Sender: yseeley@gmail.com
Reply-To: yonik@lucidimagination.com
Received: by 10.216.22.140 with HTTP; Sun, 30 May 2010 11:38:33 -0700 (PDT)
In-Reply-To: <02C687A6-A1FB-4C82-B173-034133BFBE48@gmail.com>
References: <CE9C01A4-45FA-437A-A083-9F4D049F586E@gmail.com>
	<AANLkTimQpWxIM7H2prKlxpLAfKng4XRaBoRbpMGEBFfW@mail.gmail.com>
	<02C687A6-A1FB-4C82-B173-034133BFBE48@gmail.com>
Date: Sun, 30 May 2010 14:38:33 -0400
X-Google-Sender-Auth: vhh4GtEtmhHmNQYZl_fOs4kGr-o
Message-ID: <AANLkTinhPHPPBOIRj2H5CL6UctJz8WSDAeSorJfsJ38r@mail.gmail.com>
Subject: Re: Using JSON for index input and search output
From: Yonik Seeley <yonik@lucidimagination.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

On Sun, May 30, 2010 at 2:27 PM, Visual Logic <visual.logic@gmail.com> wrote:
> Solr is embeddable but does that not just mean that SolrJ only provides the ability to call Solr running on some server?

Nope - embeddable as in running in the same JVM as your application.

> For some of my use cases using Solr on a remote server would work fine. For other cases it will not be quick enough,

Running as a separate server can be on the same host and be very
quick.  Was it too slow when you tried it?
It's a common misconception that HTTP is slow... it's really just a
TCP socket (which can be reused with persistent connections) with some
standardized headers.  Solr also has a binary protocol that works just
fine over HTTP, so it's really not more overhead than doing something
like talking to a database.

But the right solution probably depends on the details of your
specific usecases - if you elaborate on them, people may be able to
provide more specific recommendations.

-Yonik
http://www.lucidimagination.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46276-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun May 30 20:11:55 2010
Return-Path: <java-user-return-46276-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18085 invoked from network); 30 May 2010 20:11:55 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 May 2010 20:11:55 -0000
Received: (qmail 1717 invoked by uid 500); 30 May 2010 20:11:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1666 invoked by uid 500); 30 May 2010 20:11:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1658 invoked by uid 99); 30 May 2010 20:11:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 May 2010 20:11:53 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of visual.logic@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 May 2010 20:11:46 +0000
Received: by vws1 with SMTP id 1so3135749vws.35
        for <java-user@lucene.apache.org>; Sun, 30 May 2010 13:11:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:content-type:mime-version
         :subject:from:in-reply-to:date:content-transfer-encoding:message-id
         :references:to:x-mailer;
        bh=bQFGU73rq2dlxHODYyq7hzVhmzZscdnSGrbzOieuXss=;
        b=iUY+f228deYgfU3elJEihmYbFygoYIf0vnUuqk6dxWHajYLOtzeNS/8clKi8qO64qv
         Cz7SgRjHbM+JQiMswTZJf3zsKy9ehscCuPPfuC7wVvJKrvH6jijrobRwDjeIS3WVRH6H
         criL2ev6kMAZL6ksKbx0+RRNeb2zPC9Neo5IQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        b=J/me32ZPuG15Xwww4gmnfuO4vJB7Cc+7ML9soUWQVK4oVWbWzEwhMbnpsrLZIGdzxe
         oay6ovlTogcuwzJ6wJKw7RxmEe5MFysqaKnyIe0Il7Bs1vjL8pe5atAP00cffJYotM+U
         oLDMoVTdWuiwU6whBvi5GRq1gFUBL9+4m7C/M=
Received: by 10.220.123.136 with SMTP id p8mr2592523vcr.244.1275250285399;
        Sun, 30 May 2010 13:11:25 -0700 (PDT)
Received: from [192.168.100.159] (205-200-14-92.static.mts.net [205.200.14.92])
        by mx.google.com with ESMTPS id s9sm21386343vcr.15.2010.05.30.13.11.23
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sun, 30 May 2010 13:11:24 -0700 (PDT)
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1078)
Subject: Re: Using JSON for index input and search output
From: Visual Logic <visual.logic@gmail.com>
In-Reply-To: <AANLkTinhPHPPBOIRj2H5CL6UctJz8WSDAeSorJfsJ38r@mail.gmail.com>
Date: Sun, 30 May 2010 15:11:17 -0500
Content-Transfer-Encoding: quoted-printable
Message-Id: <8815C552-9B8A-4963-AD59-8AB4553A17AB@gmail.com>
References: <CE9C01A4-45FA-437A-A083-9F4D049F586E@gmail.com> <AANLkTimQpWxIM7H2prKlxpLAfKng4XRaBoRbpMGEBFfW@mail.gmail.com> <02C687A6-A1FB-4C82-B173-034133BFBE48@gmail.com> <AANLkTinhPHPPBOIRj2H5CL6UctJz8WSDAeSorJfsJ38r@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1078)

This is interesting.

I'm coming into this with only the knowledge I gained from the 1st =
version of the Lucene in Action book, which I read a few years ago. So =
when I think of embedded I think that Solr would be integrated into my =
app like any API would be. Instead you say Solr is a separate process =
that could work adjunct to my app. In other words in my mind it would be =
a extension module or even plugin for my app. Would be possible to =
start/stop it from my app as well? Hope I'm seeing the picture clearly =
now?

What I find most useful in Lucene is its searching capability. Since I =
have pre-structured data which are the different configurations the =
different tools and tiers of my app use the analysis stage is not that =
involved. Once data is indexed, likely in several indexes/cores, I would =
like to search for specific documents and set them to be the current =
context for different tools. There are a number different contexts and =
index documents specific to each of them. I guess what I am after is a =
searchable configuration engine for a RIA.

Some of my use cases can tolerate a bit of latency but for others it =
would not work so well. Here are two of the more dynamic use cases =
(slightly simplified to make them clear) where searching has to be =
blazingly fast:

1 - I have a draw tool that places different shape types while dragging =
(each drag forms a string of shapes) across a canvas. I track the types =
of shapes the current drag has placed so far and then what to recommend =
other shape strings (prior drawn strings are indexed as they were made) =
that are similar in order to help the user complete the current draw =
string. The query would be created on the fly based on what shapes have =
been drawn so far and then used to search the index, the search would =
also need to be refreshed every time the user moves the mouse. This use =
case is similar to type-ahead phrase completion but completely mouse =
driven with fired searches in the background and immediate graphics on =
the canvas. Will Solr running as a separate local process be able to =
keep up with the user driven drawing?

2 - My app features a Painter with Renderers for different shapes. The =
many possible layout and style details for these shapes and their =
relation to each other are defined as configurations per Renderer. The =
index would contain multiple versions of a configuration for a given =
Renderer. A search would then be used to bring up a set of =
configurations, the set would have a configuration for each Renderer. =
This set would then be the active rules (context) for rendering each =
type of shape. Then as the user creates shapes by drawing different =
shape types they are rendered by their specific Renderer. The given =
Renderer in turn looks up all the rules for layout and styling it should =
have from the active set of configurations. The question is if the =
lookup can be on the fly searches to a index or if it is better to pull =
up the set of configurations from the index and transfer them to =
hashmaps that the Renderers would query instead of querying the index =
directly? Would Solr be able to keep up with all the real-time lookups =
the Renders would be making?

VL


On 2010-05-30, at 1:38 PM, Yonik Seeley wrote:

> On Sun, May 30, 2010 at 2:27 PM, Visual Logic <visual.logic@gmail.com> =
wrote:
>> Solr is embeddable but does that not just mean that SolrJ only =
provides the ability to call Solr running on some server?
>=20
> Nope - embeddable as in running in the same JVM as your application.
>=20
>> For some of my use cases using Solr on a remote server would work =
fine. For other cases it will not be quick enough,
>=20
> Running as a separate server can be on the same host and be very
> quick.  Was it too slow when you tried it?
> It's a common misconception that HTTP is slow... it's really just a
> TCP socket (which can be reused with persistent connections) with some
> standardized headers.  Solr also has a binary protocol that works just
> fine over HTTP, so it's really not more overhead than doing something
> like talking to a database.
>=20
> But the right solution probably depends on the details of your
> specific usecases - if you elaborate on them, people may be able to
> provide more specific recommendations.
>=20
> -Yonik
> http://www.lucidimagination.com
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46277-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 31 06:27:38 2010
Return-Path: <java-user-return-46277-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2388 invoked from network); 31 May 2010 06:27:37 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 31 May 2010 06:27:37 -0000
Received: (qmail 82702 invoked by uid 500); 31 May 2010 06:27:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82526 invoked by uid 500); 31 May 2010 06:27:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82518 invoked by uid 99); 31 May 2010 06:27:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 May 2010 06:27:32 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of chardex@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 May 2010 06:27:24 +0000
Received: by wyj26 with SMTP id 26so423913wyj.35
        for <java-user@lucene.apache.org>; Sun, 30 May 2010 23:27:04 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        bh=lI6/iAixhTS8V4WzNmYKH+5Cwe8cFg94AjbT94bJRwQ=;
        b=Sdl+RJfYtX6VsfEpy35hcjyZ8HKl6vrh/yxfErp3uTQdUPkpvp7ifgwIh2TRxO4c59
         +xu5gt5a4g1pbon1xclGPsCxwCTv2kwL3P3usb8TfT3wTWVXynlV5rBFAM/9RbhYhW+m
         Ra7GRg3hJ2DI7q9XqqXrY5+rCS2fQqSYxBQHE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=Q59dn6zd9Rct/IymHYPjT9JxPFFCg+lhjsQKSDsdBqeUETQLURicDYuXzgdKCuEUH0
         s6aIYGQ/NqJqJzz/rpRPIZ92YuQlJjrAazwtjjfOt3/QU/0bSbsxg26Pl11hYDNp/YnT
         z5s/aD1ftB/7rbtif/jlIBZ7jgCBpcD2LZnYQ=
MIME-Version: 1.0
Received: by 10.216.90.3 with SMTP id d3mr3954948wef.110.1275287224326; Sun, 
	30 May 2010 23:27:04 -0700 (PDT)
Received: by 10.216.23.66 with HTTP; Sun, 30 May 2010 23:27:04 -0700 (PDT)
Date: Mon, 31 May 2010 10:27:04 +0400
Message-ID: <AANLkTikqKjgPCWtFzqeYJnCZrxFLmLxlxHc96tc2MExv@mail.gmail.com>
Subject: DuplicateFilter question
From: =?KOI8-R?B?8MHbwSDtyc7exc7Lz9c=?= <chardex@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=KOI8-R
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Why DuplicateFilter doesn't work together with other filters? For
example, if a little remake of the test DuplicateFilterTest, then the
impression that the filter is not applied to other filters and first
trims results:

public void testKeepsLastFilter()
	throws Throwable {
	DuplicateFilter df =3D new DuplicateFilter(KEY_FIELD);
	df.setKeepMode(DuplicateFilter.KM_USE_LAST_OCCURRENCE);

	Query q =3D new ConstantScoreQuery(new ChainedFilter(new Filter[]{
	new QueryWrapperFilter(tq),
	// new QueryWrapperFilter(new TermQuery(new Term("text", "out"))), //
works right, it is the last document.
	new QueryWrapperFilter(new TermQuery(new Term("text", "now"))) // why
it doesn't work? It is the third document.

	}, ChainedFilter.AND));

	ScoreDoc[] hits =3D searcher.search(q, df, 1000).scoreDocs;
=09
	assertTrue("Filtered searching should have found some matches",
hits.length > 0);
	for (int i =3D 0; i < hits.length; i++) {
	Document d =3D searcher.doc(hits[i].doc);
	String url =3D d.get(KEY_FIELD);
	TermDocs td =3D reader.termDocs(new Term(KEY_FIELD, url));
	int lastDoc =3D 0;
	while (td.next()) {
	lastDoc =3D td.doc();
	}
	assertEquals("Duplicate urls should return last doc", lastDoc, hits[i].doc=
);
	}
}

--=20
=F3 =D5=D7=C1=D6=C5=CE=C9=C5=CD,
=ED=C9=CE=DE=C5=CE=CB=CF=D7 =F0=C1=D7=C5=CC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46278-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 31 06:40:01 2010
Return-Path: <java-user-return-46278-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30851 invoked from network); 31 May 2010 06:40:01 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 31 May 2010 06:40:01 -0000
Received: (qmail 95532 invoked by uid 500); 31 May 2010 06:39:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95302 invoked by uid 500); 31 May 2010 06:39:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95294 invoked by uid 99); 31 May 2010 06:39:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 May 2010 06:39:58 +0000
X-ASF-Spam-Status: No, hits=-0.2 required=10.0
	tests=AWL,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 May 2010 06:39:51 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 27F8FD3600A
	for <java-user@lucene.apache.org>; Mon, 31 May 2010 08:39:30 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id pq-GWYst8wxM for <java-user@lucene.apache.org>;
	Mon, 31 May 2010 08:39:14 +0200 (CEST)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 6B759D36003
	for <java-user@lucene.apache.org>; Mon, 31 May 2010 08:39:14 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <AANLkTikqKjgPCWtFzqeYJnCZrxFLmLxlxHc96tc2MExv@mail.gmail.com>
In-Reply-To: <AANLkTikqKjgPCWtFzqeYJnCZrxFLmLxlxHc96tc2MExv@mail.gmail.com>
Subject: RE: DuplicateFilter question
Date: Mon, 31 May 2010 08:40:03 +0200
Message-ID: <001201cb008c$19dfcd30$4d9f6790$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="KOI8-R"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQFuH3Fcre5cPUnwAcvr2aNxRPHBTJMk2SZQ
Content-Language: de

Where is df (the DuplicateFilter) used in your code?

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: =F0=C1=DB=C1 =ED=C9=CE=DE=C5=CE=CB=CF=D7 =
[mailto:chardex@gmail.com]
> Sent: Monday, May 31, 2010 8:27 AM
> To: java-user@lucene.apache.org
> Subject: DuplicateFilter question
>=20
> Hi,
>=20
> Why DuplicateFilter doesn't work together with other filters? For =
example,
if
> a little remake of the test DuplicateFilterTest, then the impression =
that
the
> filter is not applied to other filters and first trims results:
>=20
> public void testKeepsLastFilter()
> 	throws Throwable {
> 	DuplicateFilter df =3D new DuplicateFilter(KEY_FIELD);
> 	df.setKeepMode(DuplicateFilter.KM_USE_LAST_OCCURRENCE);
>=20
> 	Query q =3D new ConstantScoreQuery(new ChainedFilter(new Filter[]{
> 	new QueryWrapperFilter(tq),
> 	// new QueryWrapperFilter(new TermQuery(new Term("text",
> "out"))), // works right, it is the last document.
> 	new QueryWrapperFilter(new TermQuery(new Term("text",
> "now"))) // why it doesn't work? It is the third document.
>=20
> 	}, ChainedFilter.AND));
>=20
> 	ScoreDoc[] hits =3D searcher.search(q, df, 1000).scoreDocs;
>=20
> 	assertTrue("Filtered searching should have found some matches",
> hits.length > 0);
> 	for (int i =3D 0; i < hits.length; i++) {
> 	Document d =3D searcher.doc(hits[i].doc);
> 	String url =3D d.get(KEY_FIELD);
> 	TermDocs td =3D reader.termDocs(new Term(KEY_FIELD, url));
> 	int lastDoc =3D 0;
> 	while (td.next()) {
> 	lastDoc =3D td.doc();
> 	}
> 	assertEquals("Duplicate urls should return last doc", lastDoc,
> hits[i].doc);
> 	}
> }
>=20
> --
> =F3 =D5=D7=C1=D6=C5=CE=C9=C5=CD,
> =ED=C9=CE=DE=C5=CE=CB=CF=D7 =F0=C1=D7=C5=CC
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46279-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 31 07:16:26 2010
Return-Path: <java-user-return-46279-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73215 invoked from network); 31 May 2010 07:16:26 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 31 May 2010 07:16:26 -0000
Received: (qmail 22866 invoked by uid 500); 31 May 2010 07:16:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22629 invoked by uid 500); 31 May 2010 07:16:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22621 invoked by uid 99); 31 May 2010 07:16:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 May 2010 07:16:23 +0000
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=AWL,FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chardex@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 May 2010 07:16:17 +0000
Received: by wwi18 with SMTP id 18so1938094wwi.35
        for <java-user@lucene.apache.org>; Mon, 31 May 2010 00:15:56 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=KpOyFx30OJrevmjrXEb3oMv1ZjfQMAuM9/rkHVvvCbs=;
        b=I9UZcQCZPEtsp/KI31ccEWhC0Ra3zgTPnlq31Z30HBVwofxNnPmgruK3ZmcsMTi3ig
         2EoD9HOM+q0DvhgG8L7PqlZ2kIKsc84zvoLM0lNNMGteUyrm4kI54UbVdXMJYixiUiyh
         bF0zsw1UHugy0Ujxv1mqpCQY4RsCxArrpX5VI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=QIpwnyMvDP9zG32VVbubu7dDrHiwidM2GMwC5hS0JUhedOXn8PhFOFxwDUH9lILeV9
         XofPteTcNIG+aDJo5oIUkfmlG9AecoIGg/UbCNGjt98Q7iMKx9HTNlrzgRmQ0U15Txc+
         ungotz8BbRSl660BAgWXkQVQZa2eg4a2H1Skg=
MIME-Version: 1.0
Received: by 10.216.93.21 with SMTP id k21mr3995770wef.68.1275290155976; Mon, 
	31 May 2010 00:15:55 -0700 (PDT)
Received: by 10.216.23.66 with HTTP; Mon, 31 May 2010 00:15:55 -0700 (PDT)
In-Reply-To: <001201cb008c$19dfcd30$4d9f6790$@thetaphi.de>
References: <AANLkTikqKjgPCWtFzqeYJnCZrxFLmLxlxHc96tc2MExv@mail.gmail.com>
	<001201cb008c$19dfcd30$4d9f6790$@thetaphi.de>
Date: Mon, 31 May 2010 11:15:55 +0400
Message-ID: <AANLkTilMzfGHCVqk-K8D6bGHMAuffLfZnr81NPDkQDUx@mail.gmail.com>
Subject: Re: DuplicateFilter question
From: =?KOI8-R?B?8MHbwSDtyc7exc7Lz9c=?= <chardex@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=KOI8-R
Content-Transfer-Encoding: quoted-printable

df (DuplicateFilter) is the second parameter in the searcher.search metod.
>> ScoreDoc[] hits =3D searcher.search(q, df, 1000).scoreDocs;

This varians doesn't hit too:
ScoreDoc[] hits =3D searcher.search(new FilteredQuery(tq, df), new
QueryWrapperFilter(new TermQuery(new Term("text", "now"))),
1000).scoreDocs;
Or:
ScoreDoc[] hits =3D searcher.search(new FilteredQuery(tq, new
QueryWrapperFilter(new TermQuery(new Term("text", "now")))), df,
1000).scoreDocs;

2010/5/31, Uwe Schindler <uwe@thetaphi.de>:
> Where is df (the DuplicateFilter) used in your code?
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
>> -----Original Message-----
>> From: =F0=C1=DB=C1 =ED=C9=CE=DE=C5=CE=CB=CF=D7 [mailto:chardex@gmail.com=
]
>> Sent: Monday, May 31, 2010 8:27 AM
>> To: java-user@lucene.apache.org
>> Subject: DuplicateFilter question
>>
>> Hi,
>>
>> Why DuplicateFilter doesn't work together with other filters? For exampl=
e,
> if
>> a little remake of the test DuplicateFilterTest, then the impression tha=
t
> the
>> filter is not applied to other filters and first trims results:
>>
>> public void testKeepsLastFilter()
>> 	throws Throwable {
>> 	DuplicateFilter df =3D new DuplicateFilter(KEY_FIELD);
>> 	df.setKeepMode(DuplicateFilter.KM_USE_LAST_OCCURRENCE);
>>
>> 	Query q =3D new ConstantScoreQuery(new ChainedFilter(new Filter[]{
>> 	new QueryWrapperFilter(tq),
>> 	// new QueryWrapperFilter(new TermQuery(new Term("text",
>> "out"))), // works right, it is the last document.
>> 	new QueryWrapperFilter(new TermQuery(new Term("text",
>> "now"))) // why it doesn't work? It is the third document.
>>
>> 	}, ChainedFilter.AND));
>>
>> 	ScoreDoc[] hits =3D searcher.search(q, df, 1000).scoreDocs;
>>
>> 	assertTrue("Filtered searching should have found some matches",
>> hits.length > 0);
>> 	for (int i =3D 0; i < hits.length; i++) {
>> 	Document d =3D searcher.doc(hits[i].doc);
>> 	String url =3D d.get(KEY_FIELD);
>> 	TermDocs td =3D reader.termDocs(new Term(KEY_FIELD, url));
>> 	int lastDoc =3D 0;
>> 	while (td.next()) {
>> 	lastDoc =3D td.doc();
>> 	}
>> 	assertEquals("Duplicate urls should return last doc", lastDoc,
>> hits[i].doc);
>> 	}
>> }
>>
>> --
>> =F3 =D5=D7=C1=D6=C5=CE=C9=C5=CD,
>> =ED=C9=CE=DE=C5=CE=CB=CF=D7 =F0=C1=D7=C5=CC
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
=F3 =D5=D7=C1=D6=C5=CE=C9=C5=CD,
=ED=C9=CE=DE=C5=CE=CB=CF=D7 =F0=C1=D7=C5=CC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46280-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 31 07:31:15 2010
Return-Path: <java-user-return-46280-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75436 invoked from network); 31 May 2010 07:31:14 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 31 May 2010 07:31:14 -0000
Received: (qmail 36605 invoked by uid 500); 31 May 2010 07:31:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36325 invoked by uid 500); 31 May 2010 07:31:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36317 invoked by uid 99); 31 May 2010 07:31:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 May 2010 07:31:11 +0000
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [212.82.110.165] (HELO web29018.mail.ird.yahoo.com) (212.82.110.165)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 31 May 2010 07:31:03 +0000
Received: (qmail 28836 invoked by uid 60001); 31 May 2010 07:30:42 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1275291042; bh=i0yqDZCnV+SU9SHslmgG7ku7Q5GNNeRUzQKStRehf9Y=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type; b=BqqoEq7zK7p1Ui1lfMS9glb23bhkcM+J/JerrFKCAjnFHM59qcOPw4oZvuiSkU86sB4f8jaGkGRqPZFKnMpZIcsaYHXdviBNY+K0bbTz3zlCWpCQYAA7SH4r6Cp12fyaSa37SKBTlmF2MgC2oy3wU6Py7V5hSnDr+wb6xzzHL08=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=Ei+K6kGvyqKL1hxx6lelII/eGfcpOGUw6hKaQfYj4WHQLVteaPgKODhWhYGaRiZjfg91EmChzXCjUVVREQppFEM1XZXBchcdV0xWc8oqySm5gTBCWJ8EzzwRhWTdp2vV8HzbY+rbHcABgJ5JSuVZ3lrzqPZz973Etmi2yc2gQiQ=;
Message-ID: <113279.27968.qm@web29018.mail.ird.yahoo.com>
X-YMail-OSG: ZfTErJkVM1lnl.CgYq14MGgLIfObKS1Qd23TVyvs8ToThhc
 fyrRnocNLxLduK886Ilpek5XaXLjwsQNxnKodgYz.TeAScBhGH7DQ.sw3PU2
 8HLY6DjB9VteA5I0YfDxlTR26lf3shY8yl5ddELzqBSZwCp_23VbGAU.Tjku
 .qWHweF_jNffaDJTf5cOJOO8OUt4Rd49E07U8g5REyMrtmlX5gh5KLfh5TZl
 0NQKngmSsAMp.cynvEvuDA5yInCxmFsrBCycy3qNQXj.dN1p97W1DPmbXifl
 y.ox0A1qjwCUM94GUkRwgPgOnwx0Jt291qG4-
Received: from [194.106.34.5] by web29018.mail.ird.yahoo.com via HTTP; Mon, 31 May 2010 07:30:42 GMT
X-Mailer: YahooMailWebService/0.8.103.269680
Date: Mon, 31 May 2010 07:30:42 +0000 (GMT)
From: Mark Harwood <markharw00d@yahoo.co.uk>
Subject: Re: DuplicateFilter question
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-717140287-1275291042=:27968"
X-Virus-Checked: Checked by ClamAV on apache.org

--0-717140287-1275291042=:27968
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable

The DuplicateFilter passed to the searcher does not have visibility of the =
text query and is therefore evaluated independently from all other criteria=
.=0ASounds like the behaviour you want is to get the last duplicate that al=
so matches your criteria, which seems like something fairly common to need =
to do but unfortunately something DuplicateFilter will not help with. For t=
his requirement you would need to have a new de-duping query that wraps a c=
hild query and takes the latest match for a given field. Unfortunately if t=
he documents are not  sequenced in URL-order this will either involve using=
 a lot of expensive disk seeks or a lot of ram to evaluate efficiently.=0A=
=0AIf your documents are stored in URL order (ie the URL is just the host p=
art and all docs from a site are held together) you could look at the PerPa=
rentLimitingQuery I created as part of the NestedDocumentQuery package in L=
ucene 2454. It is designed to return the top N docs for a given parent (in =
this case, site). With some small modification it could return the last chi=
ld for a parent. Take a look at the junit example that gets the best n chap=
ters for each book.  =0ACheers,=0AMark=0A=0AOn 31 May 2010, at 08:15, =D0=
=9F=D0=B0=D1=88=D0=B0 =D0=9C=D0=B8=D0=BD=D1=87=D0=B5=D0=BD=D0=BA=D0=BE=D0=
=B2 <chardex@gmail.com> wrote:=0A=0Adf (DuplicateFilter) is the second para=
meter in the searcher.search metod.=0AScoreDoc[] hits =3D searcher.search(q=
, df, 1000).scoreDocs;=0A=0AThis varians doesn't hit too:=0AScoreDoc[] hits=
 =3D searcher.search(new FilteredQuery(tq, df), new=0AQueryWrapperFilter(ne=
w TermQuery(new Term("text", "now"))),=0A1000).scoreDocs;=0AOr:=0AScoreDoc[=
] hits =3D searcher.search(new FilteredQuery(tq, new=0AQueryWrapperFilter(n=
ew TermQuery(new Term("text", "now")))), df,=0A1000).scoreDocs;=0A=0A2010/5=
/31, Uwe Schindler <uwe@thetaphi.de>:=0AWhere is df (the DuplicateFilter) u=
sed in your code?=0A=0A-----=0AUwe Schindler=0AH.-H.-Meier-Allee 63, D-2821=
3 Bremen=0Ahttp://www.thetaphi.de=0AeMail: uwe@thetaphi.de=0A=0A-----Origin=
al Message-----=0AFrom: =D0=9F=D0=B0=D1=88=D0=B0 =D0=9C=D0=B8=D0=BD=D1=87=
=D0=B5=D0=BD=D0=BA=D0=BE=D0=B2 [mailto:chardex@gmail.com]=0ASent: Monday, M=
ay 31, 2010 8:27 AM=0ATo: java-user@lucene.apache.org=0ASubject: DuplicateF=
ilter question=0A=0AHi,=0A=0AWhy DuplicateFilter doesn't work together with=
 other filters? For example,=0Aif=0Aa little remake of the test DuplicateFi=
lterTest, then the impression that=0Athe=0Afilter is not applied to other f=
ilters and first trims results:=0A=0Apublic void testKeepsLastFilter()=0A=
=09throws Throwable {=0A=09DuplicateFilter df =3D new DuplicateFilter(KEY_F=
IELD);=0A=09df.setKeepMode(DuplicateFilter.KM_USE_LAST_OCCURRENCE);=0A=0A=
=09Query q =3D new ConstantScoreQuery(new ChainedFilter(new Filter[]{=0A=09=
new QueryWrapperFilter(tq),=0A=09// new QueryWrapperFilter(new TermQuery(ne=
w Term("text",=0A"out"))), // works right, it is the last document.=0A=09ne=
w QueryWrapperFilter(new TermQuery(new Term("text",=0A"now"))) // why it do=
esn't work? It is the third document.=0A=0A=09}, ChainedFilter.AND));=0A=0A=
=09ScoreDoc[] hits =3D searcher.search(q, df, 1000).scoreDocs;=0A=0A=09asse=
rtTrue("Filtered searching should have found some matches",=0Ahits.length >=
 0);=0A=09for (int i =3D 0; i < hits.length; i++) {=0A=09Document d =3D sea=
rcher.doc(hits[i].doc);=0A=09String url =3D d.get(KEY_FIELD);=0A=09TermDocs=
 td =3D reader.termDocs(new Term(KEY_FIELD, url));=0A=09int lastDoc =3D 0;=
=0A=09while (td.next()) {=0A=09lastDoc =3D td.doc();=0A=09}=0A=09assertEqua=
ls("Duplicate urls should return last doc", lastDoc,=0Ahits[i].doc);=0A=09}=
=0A}=0A=0A--=0A=D0=A1 =D1=83=D0=B2=D0=B0=D0=B6=D0=B5=D0=BD=D0=B8=D0=B5=D0=
=BC,=0A=D0=9C=D0=B8=D0=BD=D1=87=D0=B5=D0=BD=D0=BA=D0=BE=D0=B2 =D0=9F=D0=B0=
=D0=B2=D0=B5=D0=BB=0A=0A---------------------------------------------------=
------------------=0ATo unsubscribe, e-mail: java-user-unsubscribe@lucene.a=
pache.org=0AFor additional commands, e-mail: java-user-help@lucene.apache.o=
rg=0A=0A=0A=0A-------------------------------------------------------------=
--------=0ATo unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=
=0AFor additional commands, e-mail: java-user-help@lucene.apache.org=0A=0A=
=0A=0A=0A-- =0A=D0=A1 =D1=83=D0=B2=D0=B0=D0=B6=D0=B5=D0=BD=D0=B8=D0=B5=D0=
=BC,=0A=D0=9C=D0=B8=D0=BD=D1=87=D0=B5=D0=BD=D0=BA=D0=BE=D0=B2 =D0=9F=D0=B0=
=D0=B2=D0=B5=D0=BB=0A=0A---------------------------------------------------=
------------------=0ATo unsubscribe, e-mail: java-user-unsubscribe@lucene.a=
pache.org=0AFor additional commands, e-mail: java-user-help@lucene.apache.o=
rg=0A=0A=0A=0A=0A      
--0-717140287-1275291042=:27968--

From java-user-return-46281-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 31 08:01:23 2010
Return-Path: <java-user-return-46281-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80091 invoked from network); 31 May 2010 08:01:22 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 31 May 2010 08:01:22 -0000
Received: (qmail 62700 invoked by uid 500); 31 May 2010 08:01:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62521 invoked by uid 500); 31 May 2010 08:01:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62513 invoked by uid 99); 31 May 2010 08:01:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 May 2010 08:01:19 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of chardex@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 May 2010 08:01:12 +0000
Received: by wwi18 with SMTP id 18so1964415wwi.35
        for <java-user@lucene.apache.org>; Mon, 31 May 2010 01:00:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=VYuwnRZFA/LInTrJIrWSOVODcZ6pWYiffbUL6gDPsO4=;
        b=IxmbLaggDC01NWQTiWoZ6VkmymBZ7NKlLogNX6sQqkiFkAwvehVzWwZbLlLGhsZPR+
         wDM3X7rqzAGHamdQzPiyX9HQ+Z6rbj/R4a/VIKgR9yCS0xbFx8T6YOd04dix73HX97xr
         U4Qx81ta+IZjLzhaI1MdAd5EUKc4ETQyjS3zQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=BRM3HOMLbb0/q2seegtg87QSyQAe8rUU1Z6K9gq+K/EZl5cXI4LymAQW8n6cBolf7i
         QUNlZLTAULACLJjq0pxc9WmPO3z/sTIunsaIdsf3fn7TIhMaWPK2+n+cHYwhwbEps76+
         wv2DFkQFdjrI6lSKKX0lcIFw3KPS3F/qheJtw=
MIME-Version: 1.0
Received: by 10.216.90.15 with SMTP id d15mr118346wef.0.1275292851664; Mon, 31 
	May 2010 01:00:51 -0700 (PDT)
Received: by 10.216.23.66 with HTTP; Mon, 31 May 2010 01:00:51 -0700 (PDT)
In-Reply-To: <113279.27968.qm@web29018.mail.ird.yahoo.com>
References: <113279.27968.qm@web29018.mail.ird.yahoo.com>
Date: Mon, 31 May 2010 12:00:51 +0400
Message-ID: <AANLkTik2tDEUKwriLLYzncT4of42gOh46bT6PI4MFEG3@mail.gmail.com>
Subject: Re: DuplicateFilter question
From: =?KOI8-R?B?8MHbwSDtyc7exc7Lz9c=?= <chardex@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks. I do not mind the first or the last document. Most
importantly, that in filtered documents there were no duplicates for a
given field (in fact I need to group the filtered results to the
specified field). Trying to use PerParentLimitingQuery and
NestedDocumentQuery.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46282-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 31 08:48:57 2010
Return-Path: <java-user-return-46282-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95081 invoked from network); 31 May 2010 08:48:57 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 31 May 2010 08:48:57 -0000
Received: (qmail 7567 invoked by uid 500); 31 May 2010 08:48:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7393 invoked by uid 500); 31 May 2010 08:48:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7379 invoked by uid 99); 31 May 2010 08:48:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 May 2010 08:48:54 +0000
X-ASF-Spam-Status: No, hits=-0.4 required=10.0
	tests=AWL,FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of fancyerii@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 May 2010 08:48:47 +0000
Received: by pwj10 with SMTP id 10so2406876pwj.35
        for <java-user@lucene.apache.org>; Mon, 31 May 2010 01:48:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=n/EQxwBe4tFcUW5dJQT5KMe/feZyrLZPSEKIrgDp3hs=;
        b=NelO/C3zhFSICzj+xMPsQoBslOk8gRMKW+89KnFDQTreswxJ0cjATFOmNdHf7P9L+P
         QLv18nKVeaKMk5EMEwBhYmR2tUX8kCLrFZW4oRsru8nuAACU0B+rtMrgvavUD6lNIPIV
         CLGKNHILhgJ/lTTaBrE4EDGnHoHaufb/MtZ0w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=Cx3DNqRPwvg1NLARQl9npo65a1B87X62V6SYWRpbvlT6NmX23JfwreeJ38x7SU2/nL
         Bh7TNQQFRTQZDuzSmWbJ5rATc990NMFMrxh5KL4S/6hZLdYaz72hhQjnepWL3yTfcIe6
         3fmSZDs11hEur5TVeJxS8aDLRLYs6nAJGorXc=
MIME-Version: 1.0
Received: by 10.142.248.38 with SMTP id v38mr2747256wfh.246.1275295707251; 
	Mon, 31 May 2010 01:48:27 -0700 (PDT)
Received: by 10.142.191.18 with HTTP; Mon, 31 May 2010 01:48:27 -0700 (PDT)
Date: Mon, 31 May 2010 16:48:27 +0800
Message-ID: <AANLkTimVKa5D117pxq0UJw02QwiKM26GPkfcnrXCXSlM@mail.gmail.com>
Subject: Question about Field.setOmitTermFreqAndPositions(true)
From: Li Li <fancyerii@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

I read in 'lucene in action" that to save space, we can omit termfreq
and postion information. But as far as I know, lucene's default
scoring model is vsm, which need tf(term,doc) to calcuate score. If
there is no tf saved. Will the relevance score be correct?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46283-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 31 08:54:46 2010
Return-Path: <java-user-return-46283-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95887 invoked from network); 31 May 2010 08:54:46 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 31 May 2010 08:54:46 -0000
Received: (qmail 14628 invoked by uid 500); 31 May 2010 08:54:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14508 invoked by uid 500); 31 May 2010 08:54:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14500 invoked by uid 99); 31 May 2010 08:54:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 May 2010 08:54:43 +0000
X-ASF-Spam-Status: No, hits=-0.5 required=10.0
	tests=AWL,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 May 2010 08:54:37 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 5A836D3600A
	for <java-user@lucene.apache.org>; Mon, 31 May 2010 10:54:16 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id Pbx-dZ6DWH+0 for <java-user@lucene.apache.org>;
	Mon, 31 May 2010 10:54:05 +0200 (CEST)
Received: from VEGA (WDC-MARE.marum.de [134.102.249.78])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 2C8A2D36003
	for <java-user@lucene.apache.org>; Mon, 31 May 2010 10:54:05 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <AANLkTimVKa5D117pxq0UJw02QwiKM26GPkfcnrXCXSlM@mail.gmail.com>
In-Reply-To: <AANLkTimVKa5D117pxq0UJw02QwiKM26GPkfcnrXCXSlM@mail.gmail.com>
Subject: RE: Question about Field.setOmitTermFreqAndPositions(true)
Date: Mon, 31 May 2010 10:54:54 +0200
Message-ID: <002701cb009e$f0a0e4a0$d1e2ade0$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQKHEX3wV0nn6+ndrXgK9RWbHrc455DzGt5w
Content-Language: de

No.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Li Li [mailto:fancyerii@gmail.com]
> Sent: Monday, May 31, 2010 10:48 AM
> To: java-user@lucene.apache.org
> Subject: Question about Field.setOmitTermFreqAndPositions(true)
> 
> I read in 'lucene in action" that to save space, we can omit termfreq and
> postion information. But as far as I know, lucene's default scoring model
is
> vsm, which need tf(term,doc) to calcuate score. If there is no tf saved.
Will
> the relevance score be correct?
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46284-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 31 09:41:18 2010
Return-Path: <java-user-return-46284-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11412 invoked from network); 31 May 2010 09:41:18 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 31 May 2010 09:41:18 -0000
Received: (qmail 62540 invoked by uid 500); 31 May 2010 09:41:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62284 invoked by uid 500); 31 May 2010 09:41:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62276 invoked by uid 99); 31 May 2010 09:41:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 May 2010 09:41:15 +0000
X-ASF-Spam-Status: No, hits=-0.1 required=10.0
	tests=AWL,RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.202.165.47] (HELO smtpauth23.prod.mesa1.secureserver.net) (64.202.165.47)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 31 May 2010 09:41:09 +0000
Received: (qmail 29266 invoked from network); 31 May 2010 09:40:47 -0000
Received: from unknown (81.219.54.251)
  by smtpauth23.prod.mesa1.secureserver.net (64.202.165.47) with ESMTP; 31 May 2010 09:40:47 -0000
Message-ID: <4C038409.6070907@getopt.org>
Date: Mon, 31 May 2010 11:40:25 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.1.9) Gecko/20100317 Thunderbird/3.0.4
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Question about Field.setOmitTermFreqAndPositions(true)
References: <AANLkTimVKa5D117pxq0UJw02QwiKM26GPkfcnrXCXSlM@mail.gmail.com> <002701cb009e$f0a0e4a0$d1e2ade0$@thetaphi.de>
In-Reply-To: <002701cb009e$f0a0e4a0$d1e2ade0$@thetaphi.de>
X-Enigmail-Version: 1.0.1
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

On 2010-05-31 10:54, Uwe Schindler wrote:
> No.

See also LUCENE-2048 (nice round number ;) ).


-- 
Best regards,
Andrzej Bialecki     <><
 ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46285-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 31 10:26:31 2010
Return-Path: <java-user-return-46285-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25713 invoked from network); 31 May 2010 10:26:31 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 31 May 2010 10:26:31 -0000
Received: (qmail 35089 invoked by uid 500); 31 May 2010 10:26:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34766 invoked by uid 500); 31 May 2010 10:26:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34758 invoked by uid 99); 31 May 2010 10:26:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 May 2010 10:26:26 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of kumdio@gmail.com designates 209.85.222.187 as permitted sender)
Received: from [209.85.222.187] (HELO mail-pz0-f187.google.com) (209.85.222.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 May 2010 10:26:19 +0000
Received: by pzk17 with SMTP id 17so2086181pzk.5
        for <java-user@lucene.apache.org>; Mon, 31 May 2010 03:25:59 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=Fjro04HxPW3O3AXbi2om8tvMotkrbYuySN4RktLIB7o=;
        b=Bv+4SiE8yy5fbWuyVt/zdbXzr0QXP0kqWM2KelAuig6Bf/JESElOVzmYIfbk/1YQIV
         iUKV6yUjq+8+w35GahQyuu7L6cXaJeD2OTd5LQE5zo8oLeWJqIAetT37+j5XlKUFKEV1
         f1WNqOozVlThLY7OkpLOjLGmOiAQt6NhnWwLY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=IE739nhrlv3qhaVZGXuVr1lannuLlXxdjEbw/PIa2s5J+RL/dE5tCOWYwxLbKvvGwA
         FI9yR8zhzOJCJxF8O0e7KTP7LHEMx1TpcjUsVmqCFrCN2OUmNouEjjOYOVXqLSk9rPOm
         Oxs1Eg6B4DO7I+CJ4T0ZbfSDXjwNiR8wKmsX4=
MIME-Version: 1.0
Received: by 10.140.252.5 with SMTP id z5mr3088005rvh.260.1275301559454; Mon, 
	31 May 2010 03:25:59 -0700 (PDT)
Received: by 10.140.191.21 with HTTP; Mon, 31 May 2010 03:25:59 -0700 (PDT)
Date: Mon, 31 May 2010 13:25:59 +0300
Message-ID: <AANLkTim9Csb9u6BovzamAUnOxY1ZiF0iT_o496zdcf1M@mail.gmail.com>
Subject: vector model usage
From: Dionisis Koumouras <kumdio@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd119dc6ecdb90487e1483b

--000e0cd119dc6ecdb90487e1483b
Content-Type: text/plain; charset=ISO-8859-1

Hi all,
I'm new to lucene but have used it succesfully for a few simple tasks.

I am experimenting with the vector space representation of documents and
have managed to store and retrieve TermFreqVector objects.

The question is whether it is possible to directly add vector space
representations of documents to an index. I can't find any way to create a
document field from a TermFreqVector object.

This is the use case behind the question: retrieve some documents from the
index, cluster them, and store the vector space representations of the
clusters back to the index.

Dionisis

--000e0cd119dc6ecdb90487e1483b--

From java-user-return-46286-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 31 10:46:15 2010
Return-Path: <java-user-return-46286-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31881 invoked from network); 31 May 2010 10:46:15 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 31 May 2010 10:46:15 -0000
Received: (qmail 63866 invoked by uid 500); 31 May 2010 10:46:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63469 invoked by uid 500); 31 May 2010 10:46:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63461 invoked by uid 99); 31 May 2010 10:46:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 May 2010 10:46:09 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of fancyerii@gmail.com designates 209.85.212.176 as permitted sender)
Received: from [209.85.212.176] (HELO mail-px0-f176.google.com) (209.85.212.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 May 2010 10:46:02 +0000
Received: by pxi10 with SMTP id 10so2415957pxi.35
        for <java-user@lucene.apache.org>; Mon, 31 May 2010 03:45:40 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=3QislrMw5NnGNykVAAYwd8V78N2W4tmyeaNYoxwaqTM=;
        b=g9SF01uVsGtSN6O3dAFfCCFSDi8lSY5BrdBnsR/djyAdyUK4s4FFLnB1r+BJrA6wSC
         AHvDh8mSHygt6O5MwlWW7Wb2wucH+cABIJF4JP635P4ObjRrdVxuVv7076npJq+bJrY1
         mSR6CGgmTkAvkjbiyVQFTlGg19Fww0LJ3wT+0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=rH70zmpGBvhYS0ri0mTllj4qKX+MqeuS5FW7egC+ZQXG2aI+/HkO0aLdFaSN3U1PLZ
         W9DjzY/XDg4ftTIoJp6T/5l8lhD1mhbtTfkWHD/zEKZxb1PWyGZnIrv3EukRSBgv6npZ
         7gXRadBk/TqHPR6iA2GbGOp730Rj63fWQebYQ=
MIME-Version: 1.0
Received: by 10.142.208.14 with SMTP id f14mr2776102wfg.298.1275302740828; 
	Mon, 31 May 2010 03:45:40 -0700 (PDT)
Received: by 10.142.191.18 with HTTP; Mon, 31 May 2010 03:45:40 -0700 (PDT)
In-Reply-To: <4C038409.6070907@getopt.org>
References: <AANLkTimVKa5D117pxq0UJw02QwiKM26GPkfcnrXCXSlM@mail.gmail.com>
	<002701cb009e$f0a0e4a0$d1e2ade0$@thetaphi.de>
	<4C038409.6070907@getopt.org>
Date: Mon, 31 May 2010 18:45:40 +0800
Message-ID: <AANLkTimlqNtQRgV2FIoI0jpmFG-z2HsiT2e0KQ0rKBh-@mail.gmail.com>
Subject: Re: Question about Field.setOmitTermFreqAndPositions(true)
From: Li Li <fancyerii@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

What about TermVector? it says in "lucene in action":

Term vectors are something a mix of between an indexed field and
a stored field. They are similar to a stored field because you can
quickly retrieve all term vector fields for a
given document: term vectors are keyed first by document ID. But then,
they are keyed secondarily by
term, meaning they store a miniature inverted index for that one
document. Unlike a stored field, where
the original String content is stored verbatim, term vectors store the
actual separate terms that were
produced by the Analyzer.This allows you to retrieve all terms, and
the frequency of their occurrence
within the document and sorted in lexicographic order, for a
particular indexed Field of a particular
Document.
  TermVector.YES =96 record the unique terms that occurred, and their
counts, in each document,
                              but do not store any positions or
offsets information.
  TermVector.WITH_POSITIONS =96 record the unique terms and their
counts, and also the
                              positions of each occurrence of every
term, but no offsets.
 TermVector.WITH_OFFSETS =96 record the unique terms and their counts,
with the offsets (start &
                              end character position) of each
occurrence of every term, but no positions.
 TermVector.WITH_POSITIONS_OFFSETS =96 store unique terms and their
counts, along with
                              positions and offsets.
 TermVector.NO =96 do not store

I am confused. what's the difference between TermVector and Index?
in an index, we can save postion information and also we can save it
in TermVector.
If I want to support phrase query, I must save position in index. And
if I want to support fast highlighter and similar like this, I have to
save TermVector.
How these information stored?
e.g. there are 2 docs using WhitespaceAnalyzer
1,  it is a good day    good night
2,  you are a good man

The index's data structure seems like:   good -> doc1 2(tf)  3  5; doc2 1(t=
f) 3
what about termvector?    like?   "lucene in action" says it indexed
first by doc id then term. I can't image it
2010/5/31 Andrzej Bialecki <ab@getopt.org>:
> On 2010-05-31 10:54, Uwe Schindler wrote:
>> No.
>
> See also LUCENE-2048 (nice round number ;) ).
>
>
> --
> Best regards,
> Andrzej Bialecki =A0 =A0 <><
> =A0___. ___ ___ ___ _ _ =A0 __________________________________
> [__ || __|__/|__||\/| =A0Information Retrieval, Semantic Web
> ___|||__|| =A0\| =A0|| =A0| =A0Embedded Unix, System Integration
> http://www.sigram.com =A0Contact: info at sigram dot com
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46287-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 31 14:50:20 2010
Return-Path: <java-user-return-46287-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95607 invoked from network); 31 May 2010 14:50:20 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 31 May 2010 14:50:20 -0000
Received: (qmail 22052 invoked by uid 500); 31 May 2010 14:50:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22006 invoked by uid 500); 31 May 2010 14:50:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21998 invoked by uid 99); 31 May 2010 14:50:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 May 2010 14:50:17 +0000
X-ASF-Spam-Status: No, hits=-0.5 required=10.0
	tests=AWL,SPF_PASS,T_FRT_ADULT2
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of koji@r.email.ne.jp designates 202.224.39.197 as permitted sender)
Received: from [202.224.39.197] (HELO mail1.asahi-net.or.jp) (202.224.39.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 May 2010 14:50:10 +0000
Received: from Koji-Sekiguchi-no-MacBook-Pro.local (w244069.ppp.asahi-net.or.jp [121.1.244.69])
	by mail1.asahi-net.or.jp (Postfix) with ESMTP id 0AE799D136
	for <java-user@lucene.apache.org>; Mon, 31 May 2010 23:49:50 +0900 (JST)
Message-ID: <4C03CC8D.1060904@r.email.ne.jp>
Date: Mon, 31 May 2010 23:49:49 +0900
From: Koji Sekiguchi <koji@r.email.ne.jp>
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; ja-JP-mac; rv:1.9.1.9) Gecko/20100317 Thunderbird/3.0.4
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: phrase query highlighter spans matching
References: <AANLkTimpa-583pmwOGK2bJNtGnH4aWNcyoiUS0As5Zjs@mail.gmail.com>
In-Reply-To: <AANLkTimpa-583pmwOGK2bJNtGnH4aWNcyoiUS0As5Zjs@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

(10/05/19 13:58), Li Li wrote:
> hi all,
>      I read lucene in action 2nd Ed. It says SimpleSpanFragmenter will
> "make fragments that always include the spans matching each document".
> And also a SpanScorer existed for this use. But I can't find any class
> named SpanScorer in lucene 3.0.1. And the result of  HighlighterTest
> class in contrib/highlighter's TestCase testQueryScorerHits seems
> different
>    
SpanScorer implementation has replaced QueryScorer at LUCENE-1685.
 From contrib/CHANGES.txt:

  * LUCENE-1685: The position aware SpanScorer has become the default scorer
     for Highlighting. The SpanScorer implementation has replaced 
QueryScorer
     and the old term highlighting QueryScorer has been renamed to
     QueryTermScorer.

Koji

-- 
http://www.rondhuit.com/en/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46288-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 31 14:58:25 2010
Return-Path: <java-user-return-46288-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97199 invoked from network); 31 May 2010 14:58:25 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 31 May 2010 14:58:25 -0000
Received: (qmail 31095 invoked by uid 500); 31 May 2010 14:58:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31030 invoked by uid 500); 31 May 2010 14:58:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31022 invoked by uid 99); 31 May 2010 14:58:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 May 2010 14:58:22 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of chardex@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 May 2010 14:58:15 +0000
Received: by wyj26 with SMTP id 26so746275wyj.35
        for <java-user@lucene.apache.org>; Mon, 31 May 2010 07:57:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=xu/+d7Tg3NxVmWnLtUSQxm+V9aFwUxCaxxs4VX3q7Yo=;
        b=xbkLhO1hd5bBEbKkcM7woD0R/6vnYssRthRCrJJZD5o59q6AnCTZf7UTAhQni1gGOo
         imX9krQoT9C0SsnFYtRRirRpY8oeEVsS3nD//UPpA2tK4zskNzNgQ0jP2qyISprXdZtN
         PbQI7KZm3Gj+F4WKJ5eUt6WnUFYCddFweH+7E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=J12Ak9jcxeFHdsoLeHbouXOw/bF9+E5n3et8HJi768ZoWdVHsi58SN02HbfvlOzHkx
         LLbUOm9CCaWD193hJa3mnLl5px8NyvwQr+eG8WtXuUho0YVHZK5LPjX5YSjPhpY4xzoY
         9GpmxZ5ljFDEZcmZDZAIQELRIgJpuwO0NqcbA=
MIME-Version: 1.0
Received: by 10.227.138.72 with SMTP id z8mr4432374wbt.209.1275317874538; Mon, 
	31 May 2010 07:57:54 -0700 (PDT)
Received: by 10.216.23.66 with HTTP; Mon, 31 May 2010 07:57:54 -0700 (PDT)
Date: Mon, 31 May 2010 18:57:54 +0400
Message-ID: <AANLkTikyfH6ryKFtUNPuI-DEYn8ldvnrnZYD10WxNZw6@mail.gmail.com>
Subject: PerParentLimitedQuery and index updating
From: =?KOI8-R?B?8MHbwSDtyc7exc7Lz9c=?= <chardex@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
It seems that PerParentLimitedQuery analyzes the old data before
update. Here's an example. If remove documents updates - everything
works. Thanks.

public void testPerParent()
		throws IOException {

	dir = new RAMDirectory();
	Analyzer analyzer = new StandardAnalyzer(Version.LUCENE_29);
	IndexWriter writer = new IndexWriter(dir, analyzer, MaxFieldLength.UNLIMITED);

	addDocument(writer, "1", "A", "one", "parent");
	addDocument(writer, "2", "A", "two", "child");
	addDocument(writer, "3", "A", "three", "child");
	addDocument(writer, "4", "B", "four", "parent");
	addDocument(writer, "5", "B", "five", "child");
	addDocument(writer, "6", "B", "two", "child");
	addDocument(writer, "7", "B", "two", "child");
	addDocument(writer, "8", "B", "two", "child");


	writer.close();


	writer = new IndexWriter(dir, analyzer, MaxFieldLength.UNLIMITED);

	searcher = new IndexSearcher(dir);

	// if i comment update block (no data updates, it just updates index)
-- test is passed
	updateDocument(writer, "1", "A", "one", "parent");
	updateDocument(writer, "2", "A", "two", "child");
	updateDocument(writer, "3", "A", "three", "child");
	updateDocument(writer, "4", "B", "four", "parent");
	updateDocument(writer, "5", "B", "five", "child");
	updateDocument(writer, "6", "B", "two", "child");
	updateDocument(writer, "7", "B", "two", "child");
	updateDocument(writer, "8", "B", "two", "child");

	// if i dno't comment update block, i recive exception:
	// java.lang.IllegalArgumentException:
org.apache.lucene.search.PerParentLimitedQuery$PerParentLimitedScorer
	// Parent filter produced a bitset with no parent doc for child doc #1

	// It seems that PerParentLimitedQuery analyzes old data too.

	writer.commit();
	writer.close();

	searcher = new IndexSearcher(dir);
	TopDocs topResults = searcher.search(new TermQuery(new Term("filter",
"two")), 10);


	assertEquals("Filtered hits before grouping", 4, topResults.totalHits);

	PerParentLimitedQuery perParentLimitQuery = new
PerParentLimitedQuery(new TermQuery(new Term("filter", "two")),
			new QueryWrapperFilter(new TermQuery(new Term("type", "parent"))), 1);

	topResults = searcher.search(perParentLimitQuery, 10);

	assertEquals("Filtered hits after grouping", 2, topResults.totalHits);
}

private void addDocument(IndexWriter writer, String id, String group,
String filter, String type)
		throws IOException {


	Document doc = new Document();
	doc.add(new Field("id", id, Field.Store.YES,
Field.Index.NOT_ANALYZED_NO_NORMS));
	doc.add(new Field("group", group, Field.Store.YES,
Field.Index.NOT_ANALYZED_NO_NORMS));
	doc.add(new Field("filter", filter, Field.Store.YES,
Field.Index.NOT_ANALYZED_NO_NORMS));
	doc.add(new Field("type", type, Field.Store.YES,
Field.Index.NOT_ANALYZED_NO_NORMS));

	writer.addDocument(doc);
}

private void updateDocument(IndexWriter writer, String id, String
group, String filter, String type)
		throws IOException {

	Document doc = new Document();
	doc.add(new Field("id", id, Field.Store.YES,
Field.Index.NOT_ANALYZED_NO_NORMS));
	doc.add(new Field("group", group, Field.Store.YES,
Field.Index.NOT_ANALYZED_NO_NORMS));
	doc.add(new Field("filter", filter, Field.Store.YES,
Field.Index.NOT_ANALYZED_NO_NORMS));
	doc.add(new Field("type", type, Field.Store.YES,
Field.Index.NOT_ANALYZED_NO_NORMS));

	writer.updateDocument(new Term("id", id), doc);
}

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46289-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 31 16:21:28 2010
Return-Path: <java-user-return-46289-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19293 invoked from network); 31 May 2010 16:21:28 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 31 May 2010 16:21:28 -0000
Received: (qmail 20756 invoked by uid 500); 31 May 2010 16:21:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20729 invoked by uid 500); 31 May 2010 16:21:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20721 invoked by uid 99); 31 May 2010 16:21:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 May 2010 16:21:25 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of shashi.mit@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 May 2010 16:21:18 +0000
Received: by fxm12 with SMTP id 12so3429057fxm.35
        for <java-user@lucene.apache.org>; Mon, 31 May 2010 09:20:57 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:sender:received:from:date
         :x-google-sender-auth:message-id:subject:to:content-type;
        bh=8aqs5fcnZmDU/empwGbYRPRAjvHcq2K6Fh/BozVpUvc=;
        b=rVOn4H7iZx9IFLds8Yh1iE2Bhe6kWphsUXQg5psaw/Gf82AgkDFpOoXh/9AGQ2YiEf
         V3/2ZlYfwP4fQYWGRlOYdHZc8ywqJDoBU691Otnf2hUGFqPW+PtnyVXMfaqZbXjiDd29
         qHVFuO0DQ1zdEArKU5O/NKjckmNcTID1kYvxc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:from:date:x-google-sender-auth:message-id
         :subject:to:content-type;
        b=MQmjuZUioVGZ7iyTR2AJYz1A65g50qtH4U6Co/1KLT9LI+5j2yQuqqQjyLLB+h1hcz
         wTEyL0b0xGnn43RKYDHqsCwu2inMuF20kT/nqdEsjfcsxbT9PkKWTP11KLS6vhBSMEu7
         as8EjdCsNf/LjS3uS/SvxeiVzKaXgTt7YOQ2s=
Received: by 10.223.56.212 with SMTP id z20mr5764181fag.1.1275322856117; Mon, 
	31 May 2010 09:20:56 -0700 (PDT)
MIME-Version: 1.0
Sender: shashi.mit@gmail.com
Received: by 10.223.105.13 with HTTP; Mon, 31 May 2010 09:20:36 -0700 (PDT)
From: Shashi Kant <skant@sloan.mit.edu>
Date: Mon, 31 May 2010 12:20:36 -0400
X-Google-Sender-Auth: RsTaIWkW0kgpz88ngHHvk1RIQdE
Message-ID: <AANLkTimtapXM-eW4Cf3_bv-LxQPVqH12_xHuRqwtt09c@mail.gmail.com>
Subject: Is Lucene a "document oriented database"?
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

There seems to be considerable buzz on the internets about document
oriented dbs such as MongoDB, CouchDB etc. I am at a loss as to what
are the principal differences between Lucene and the "DODBs". I could
very use Lucene as any of the above (schema-free, Document oriented)
and perform similar queries, *with* the added benefit of text search.

I fail to see what benefits such DoDBs bring, or is it old wine in new bottles?

Thanks
Shashi

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46290-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 31 19:32:09 2010
Return-Path: <java-user-return-46290-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84735 invoked from network); 31 May 2010 19:32:09 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 31 May 2010 19:32:09 -0000
Received: (qmail 97065 invoked by uid 500); 31 May 2010 19:32:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97013 invoked by uid 500); 31 May 2010 19:32:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97005 invoked by uid 99); 31 May 2010 19:32:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 May 2010 19:32:07 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.160.176] (HELO mail-gy0-f176.google.com) (209.85.160.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 May 2010 19:32:00 +0000
Received: by gyf1 with SMTP id 1so3725347gyf.35
        for <java-user@lucene.apache.org>; Mon, 31 May 2010 12:31:39 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.4.1 with SMTP id g1mr5309777ybi.175.1275334299714; Mon, 31 
	May 2010 12:31:39 -0700 (PDT)
Received: by 10.151.11.20 with HTTP; Mon, 31 May 2010 12:31:39 -0700 (PDT)
In-Reply-To: <4C038409.6070907@getopt.org>
References: <AANLkTimVKa5D117pxq0UJw02QwiKM26GPkfcnrXCXSlM@mail.gmail.com>
	<002701cb009e$f0a0e4a0$d1e2ade0$@thetaphi.de>
	<4C038409.6070907@getopt.org>
Date: Mon, 31 May 2010 15:31:39 -0400
Message-ID: <AANLkTimS3RqaLZeopvf5sZoO0OpVN2wTJBdFTrA_QNaC@mail.gmail.com>
Subject: Re: Question about Field.setOmitTermFreqAndPositions(true)
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

TermVectors are not used for searching; they just store each doc, inverted.

They allow you to retrieve all terms (and optionally their
positions/offsets) for a given document.  But this entails a seek,
per-document, so it's fairly costly.

Highlighters use term vectors because they are a good way to map a
given term back to the start/end offset in the original text; without
them you usually have to re-analyze the text (though, you could also
do highlighting client-side, eg use JS to locate all surface forms for
a given term, and highlight them, for HTML; or ask Acrobat Reader to
similarly highlight terms).

Mike

On Mon, May 31, 2010 at 5:40 AM, Andrzej Bialecki <ab@getopt.org> wrote:
> On 2010-05-31 10:54, Uwe Schindler wrote:
>> No.
>
> See also LUCENE-2048 (nice round number ;) ).
>
>
> --
> Best regards,
> Andrzej Bialecki =A0 =A0 <><
> =A0___. ___ ___ ___ _ _ =A0 __________________________________
> [__ || __|__/|__||\/| =A0Information Retrieval, Semantic Web
> ___|||__|| =A0\| =A0|| =A0| =A0Embedded Unix, System Integration
> http://www.sigram.com =A0Contact: info at sigram dot com
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46291-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 31 20:16:10 2010
Return-Path: <java-user-return-46291-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95239 invoked from network); 31 May 2010 20:16:09 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 31 May 2010 20:16:09 -0000
Received: (qmail 29448 invoked by uid 500); 31 May 2010 20:16:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29407 invoked by uid 500); 31 May 2010 20:16:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29399 invoked by uid 99); 31 May 2010 20:16:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 May 2010 20:16:07 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=AWL,FREEMAIL_FROM,HTML_MESSAGE,HTML_OBFUSCATE_10_20,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chardex@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 May 2010 20:16:02 +0000
Received: by wyj26 with SMTP id 26so966297wyj.35
        for <java-user@lucene.apache.org>; Mon, 31 May 2010 13:15:41 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=q4Z8kLJAT8HAr9p57NiF7OTqfuSKXoa9HuPuDCT6iZI=;
        b=JHQ4H05QqLW+UTBpKEuscAoIPyZlg2WbPL5Ad+8dbFSgDGA4Nbz4z/O8EFjV73/u8u
         4Wyb5bIIHHlR0PEVPGbw4nBJt0k5hIDFq1UABxGqxOWP+3Ha87IG0qFxXhirtVeNvdoM
         knoODh+PkJbqSM53tkDpJtQm+9cPG1VoYeKdU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=rxJmB1DSrdT/zjWi2a6Azr2bOUtfs16a1+qvn3VQqJu7Uidj8zQxWEUI1vPG4aJwuq
         r3ITOy514azu1To9wzXCilal4LVBVT2hEgtKlejhxrmqd9Bw3jySUvuc5ZEJBTu+f4N0
         XoyyTmMxv/19+nsQqzXeOpti8aEgSZQ9OvJ7Q=
MIME-Version: 1.0
Received: by 10.216.87.130 with SMTP id y2mr4659567wee.13.1275336940471; Mon, 
	31 May 2010 13:15:40 -0700 (PDT)
Received: by 10.216.23.66 with HTTP; Mon, 31 May 2010 13:15:40 -0700 (PDT)
Date: Tue, 1 Jun 2010 00:15:40 +0400
Message-ID: <AANLkTikigeMFp8IBYaf_bvady2bjL1Ii-JtJN7qWM1OV@mail.gmail.com>
Subject: Grouping or de-duping
From: =?KOI8-R?B?8MHbwSDtyc7exc7Lz9c=?= <chardex@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6da2eb64e45690487e98533

--0016e6da2eb64e45690487e98533
Content-Type: text/plain; charset=ISO-8859-1

Sorry for my similar questions. I need to remove duplicates from search
results for a given field (or group by). Documents on this field are not
ordered. Which one will get duplicates in search results - I do not care. I
tried to use DuplicateFilter and PerParentLimitedQuery, but they didn't
help. In searching for an answer I found references to
SimpleFacetParameters, but I do not understand how this material can be
useful to me because it refers to the project Solr. Maybe someone has an
example of grouping searh result or something like DeDupinQuery.

On the link below, I found a solution, but there is no sample and I can't
make these modifications my self.
http://markmail.org/message/uvrh3y5ogjgu4gfx#query:group%20lucene%20results%20by%20field+page:1+mid:uvrh3y5ogjgu4gfx+state:results

Thanks.

--0016e6da2eb64e45690487e98533--

From java-user-return-46292-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 31 23:21:11 2010
Return-Path: <java-user-return-46292-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85794 invoked from network); 31 May 2010 23:21:11 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 31 May 2010 23:21:11 -0000
Received: (qmail 38974 invoked by uid 500); 31 May 2010 23:21:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38934 invoked by uid 500); 31 May 2010 23:21:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38926 invoked by uid 99); 31 May 2010 23:21:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 May 2010 23:21:09 +0000
X-ASF-Spam-Status: No, hits=4.4 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of fsa317@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 May 2010 23:21:03 +0000
Received: by vws1 with SMTP id 1so5286798vws.35
        for <java-user@lucene.apache.org>; Mon, 31 May 2010 16:20:42 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=012FzFf7NCDWI4jl2Z0ZxZY1ya+agsx5yxJUwVJu/XU=;
        b=fgCQB1+A8O2XkPl0AT8oXNjwN3EfFQUcLu02dA0O+w4wI0klzzH3+k5vD9j/J2YQr0
         SnhiAX5zwPktABnWvDxQKzqS/RRCfXl3bv5TysfBsA7gjjDW8ZDVJOJnUzZuu6DWaPRo
         egsd8kLfXcfw0NPvBWk17iJejTN96nIRlc57c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=g1G5EgBW9zIUj3xZ075fjlE+ulfJHGpoeWTs4JrV8DzJPS5kNqX7LM5FhAVDW5HJNn
         j/Rkawighw4jJILolKnHJN3WIxTVCC7dAfWyIq2UT0wsmxaK2sUkIa3I0GCXulIDFRED
         MQ4/InvWCJLnbvLPR3rEtpw3WzCZMpLMpQkZk=
MIME-Version: 1.0
Received: by 10.220.60.197 with SMTP id q5mr3873303vch.116.1275348041996; Mon, 
	31 May 2010 16:20:41 -0700 (PDT)
Received: by 10.220.106.213 with HTTP; Mon, 31 May 2010 16:20:41 -0700 (PDT)
Date: Mon, 31 May 2010 19:20:41 -0400
Message-ID: <AANLkTikJKmYtkkza5B8RRYds6cpuWN0DcYInNooudYF-@mail.gmail.com>
Subject: Lucene Newbie Questions
From: Frank A <fsa317@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=e0cb4e887837021a8b0487ec1bc3

--e0cb4e887837021a8b0487ec1bc3
Content-Type: text/plain; charset=ISO-8859-1

Hello all,
I'm considering Lucene for a specific application and am trying to ensure
that it is the right tool for what I'm trying to accomplish.

At a high level I have a list of restaurants in a database and a list of
tags related to the restaurant (e.g. Italian, Formal, Expensive, etc).  Each
restaurant also has a location (longitude/latitude).

My primary goal using Lucene is to conduct searches where the user can do
things like:

- Misspell the name of the restaurant (by a few chars)
- Type "Italian Food" instead of just Italian or perhaps "Great Italian"
- Or even use some synonyms (e.g. Deli and Delicatessen) - of course I'd
define these terms.

Are these types of use cases something that can be done with Lucene? Or is
there a more appropriate API that I haven't found?

Thanks.

--e0cb4e887837021a8b0487ec1bc3--

From java-user-return-46293-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 31 23:23:31 2010
Return-Path: <java-user-return-46293-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85960 invoked from network); 31 May 2010 23:23:30 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 31 May 2010 23:23:30 -0000
Received: (qmail 41072 invoked by uid 500); 31 May 2010 23:23:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41025 invoked by uid 500); 31 May 2010 23:23:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41017 invoked by uid 99); 31 May 2010 23:23:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 May 2010 23:23:28 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=10.0
	tests=AWL,FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of shashi.mit@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 May 2010 23:23:22 +0000
Received: by fxm12 with SMTP id 12so3727479fxm.35
        for <java-user@lucene.apache.org>; Mon, 31 May 2010 16:23:01 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:sender:received
         :in-reply-to:references:from:date:x-google-sender-auth:message-id
         :subject:to:content-type:content-transfer-encoding;
        bh=uIJl9g58C1MWnmwmsM+bDgaZmU3/5RCdMHbtr3ox0Pk=;
        b=jhgzZDZZbluaBjCMLvuD/W6t5n8o4k1tg9yfsupHEjzbvA0xiK85xtqU/J5+UA24uZ
         EKPDO8k/r9GdaRBgg3g5KlvN6Z7YhhSLgD/w2sWKuIhutmq2X0RRiDExBuZbuJbze9F3
         occCO0GHP9f645IPq/2KJIEHEL0sw1/RxKaJ8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:in-reply-to:references:from:date
         :x-google-sender-auth:message-id:subject:to:content-type
         :content-transfer-encoding;
        b=IFuAMIcZUKVkDkhzmYRbxgf/W9nm0V2Ecb7j4mPXCDTHq9d4k4SIayEKTk5RV4bn1K
         cJBHv2Y+DprYVQKaKswGuVG9wJ9xeQJ7wHGHsmhQdcbaNgqlUhjzkjh4cnw1w35qigyE
         tzhqT4FsQ0V9hn9zJqVqM3+KvhK5PsDs/Bx40=
Received: by 10.223.143.20 with SMTP id s20mr6234633fau.38.1275348181144; Mon, 
	31 May 2010 16:23:01 -0700 (PDT)
MIME-Version: 1.0
Sender: shashi.mit@gmail.com
Received: by 10.223.105.13 with HTTP; Mon, 31 May 2010 16:22:41 -0700 (PDT)
In-Reply-To: <AANLkTikJKmYtkkza5B8RRYds6cpuWN0DcYInNooudYF-@mail.gmail.com>
References: <AANLkTikJKmYtkkza5B8RRYds6cpuWN0DcYInNooudYF-@mail.gmail.com>
From: Shashi Kant <skant@sloan.mit.edu>
Date: Mon, 31 May 2010 19:22:41 -0400
X-Google-Sender-Auth: sQ1dTLuyjYA_fCZu8l_Rt3p4aHY
Message-ID: <AANLkTinnCGfGmnWIQ_15WH_IibTTX8XVb3igLhqgntkf@mail.gmail.com>
Subject: Re: Lucene Newbie Questions
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

You are certainly in the right place - Apache Solr (a search server
built using Lucene) provides what you are looking for out of the box.


On Mon, May 31, 2010 at 7:20 PM, Frank A <fsa317@gmail.com> wrote:
> Hello all,
> I'm considering Lucene for a specific application and am trying to ensure
> that it is the right tool for what I'm trying to accomplish.
>
> At a high level I have a list of restaurants in a database and a list of
> tags related to the restaurant (e.g. Italian, Formal, Expensive, etc). =
=A0Each
> restaurant also has a location (longitude/latitude).
>
> My primary goal using Lucene is to conduct searches where the user can do
> things like:
>
> - Misspell the name of the restaurant (by a few chars)
> - Type "Italian Food" instead of just Italian or perhaps "Great Italian"
> - Or even use some synonyms (e.g. Deli and Delicatessen) - of course I'd
> define these terms.
>
> Are these types of use cases something that can be done with Lucene? Or i=
s
> there a more appropriate API that I haven't found?
>
> Thanks.
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46294-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 31 23:34:30 2010
Return-Path: <java-user-return-46294-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87031 invoked from network); 31 May 2010 23:34:30 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 31 May 2010 23:34:30 -0000
Received: (qmail 49371 invoked by uid 500); 31 May 2010 23:34:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49330 invoked by uid 500); 31 May 2010 23:34:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49322 invoked by uid 99); 31 May 2010 23:34:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 May 2010 23:34:28 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [68.142.207.189] (HELO n23a.bullet.mail.mud.yahoo.com) (68.142.207.189)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 31 May 2010 23:34:18 +0000
Received: from [68.142.200.224] by n23.bullet.mail.mud.yahoo.com with NNFMP; 31 May 2010 23:33:56 -0000
Received: from [216.252.122.218] by t5.bullet.mud.yahoo.com with NNFMP; 31 May 2010 23:33:56 -0000
Received: from [98.136.44.167] by t3.bullet.sp1.yahoo.com with NNFMP; 31 May 2010 23:33:56 -0000
Received: from [127.0.0.1] by omp608.mail.sp1.yahoo.com with NNFMP; 31 May 2010 23:33:56 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 679222.84058.bm@omp608.mail.sp1.yahoo.com
Received: (qmail 87633 invoked by uid 60001); 31 May 2010 23:33:56 -0000
Message-ID: <569984.80995.qm@web1103.biz.mail.sk1.yahoo.com>
X-YMail-OSG: rPS6dtUVM1nIv5DHSpGiVjq3ccxRpneYeyNijR807fWVRfm
 pPUzah3OqKpJUjtVqCwjbdPU3Hf6OUpsxaq0Sz5ViPAaPWB7CyEDMpHhBfej
 7dMTHal6XoH5m7q_Yv.X9FDxp0cnfi7EpXFxAkk5RIj4Ob1X9opSKBsUQv7_
 D.9go7tjE0y7RFhTBIfklOmFpghbmOCGaXOauQ_ZEi4X10JkG7eYGJv6KK2Y
 PAL2yqeac7T6jKRY3NbEP7hU255CBaH41f0tj4lZNPDTruHDls0H60XsI2n6
 zUxr5jZpVY1.E7G_obrSyfG993lfy0UKEKcikb9kVYAexneuHHZ41AUOEKKB
 0ECjPVoPac_Q-
Received: from [97.116.0.43] by web1103.biz.mail.sk1.yahoo.com via HTTP; Mon, 31 May 2010 16:33:56 PDT
X-Mailer: YahooMailRC/374.4 YahooMailWebService/0.8.103.269680
References: <AANLkTikJKmYtkkza5B8RRYds6cpuWN0DcYInNooudYF-@mail.gmail.com>
Date: Mon, 31 May 2010 16:33:56 -0700 (PDT)
From: N Hira <nhira@cognocys.com>
Subject: Re: Lucene Newbie Questions
To: java-user@lucene.apache.org
In-Reply-To: <AANLkTikJKmYtkkza5B8RRYds6cpuWN0DcYInNooudYF-@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

Frank --

Lucene can definitely do this stuff.  This review of the Query Syntax might offer you some insight:
http://lucene.apache.org/java/2_4_0/queryparsersyntax.html

Specifically, you can look up "Fuzzy Searches" and "Synonyms".  There are a couple of key ways to handle synonyms, so you might want to prototype that before you settle on the approach you ultimately select.

Be aware that Lucene is more of a "search library".  If you're looking for a Web App. that can return XML or JSON, you might want to look into Solr, which uses Lucene, but offers a lot of the architecture you might need:
http://lucene.apache.org/solr/


Good luck!

-h




----- Original Message ----
From: Frank A <fsa317@gmail.com>
To: java-user@lucene.apache.org
Sent: Mon, May 31, 2010 6:20:41 PM
Subject: Lucene Newbie Questions

Hello all,
I'm considering Lucene for a specific application and am trying to ensure
that it is the right tool for what I'm trying to accomplish.

At a high level I have a list of restaurants in a database and a list of
tags related to the restaurant (e.g. Italian, Formal, Expensive, etc).  Each
restaurant also has a location (longitude/latitude).

My primary goal using Lucene is to conduct searches where the user can do
things like:

- Misspell the name of the restaurant (by a few chars)
- Type "Italian Food" instead of just Italian or perhaps "Great Italian"
- Or even use some synonyms (e.g. Deli and Delicatessen) - of course I'd
define these terms.

Are these types of use cases something that can be done with Lucene? Or is
there a more appropriate API that I haven't found?

Thanks.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46295-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 31 23:54:57 2010
Return-Path: <java-user-return-46295-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90133 invoked from network); 31 May 2010 23:54:57 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 31 May 2010 23:54:57 -0000
Received: (qmail 69081 invoked by uid 500); 31 May 2010 23:54:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69041 invoked by uid 500); 31 May 2010 23:54:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69033 invoked by uid 99); 31 May 2010 23:54:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 May 2010 23:54:55 +0000
X-ASF-Spam-Status: No, hits=4.4 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of fsa317@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 May 2010 23:54:48 +0000
Received: by vws1 with SMTP id 1so5331399vws.35
        for <java-user@lucene.apache.org>; Mon, 31 May 2010 16:54:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=rfqU48p5QAPlToulJ8yhlbKaGCMAiQOfI41Krcb/WJk=;
        b=fN5ND/vWM4lmPAYxieaJipPQSVkqtn/GbJ47+4ws1pQIY9bauU8T+mQXJ3Pv41P/rn
         jOrkIpCsulOiyRJsDSfa21mQN5Sv/KpTIG+tN92G0Ztr0Atc1pf8NK4053VHRbIg2XKC
         1I63QelRuYmOoyrbFG1iIbm+WfKl9I/xucxFg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=LaugaKm/b8VdbhcEJeD+rnAMhu+R9Cl+FvKtd22tuNFshexn2HZ5zSx+tBvj0vCxmr
         Pphdvyyw8uZzOVqKsjz9QFhZqPzv5LZyrDP9rGTH7ZB4/k3c5VkoK/rUj8EXCbpr6AqC
         1k3zbIvwzJurYpv3FYD5DNo3LTFHcOljfzPsI=
MIME-Version: 1.0
Received: by 10.220.121.168 with SMTP id h40mr3872715vcr.264.1275350067120; 
	Mon, 31 May 2010 16:54:27 -0700 (PDT)
Received: by 10.220.106.213 with HTTP; Mon, 31 May 2010 16:54:26 -0700 (PDT)
In-Reply-To: <569984.80995.qm@web1103.biz.mail.sk1.yahoo.com>
References: <AANLkTikJKmYtkkza5B8RRYds6cpuWN0DcYInNooudYF-@mail.gmail.com>
	<569984.80995.qm@web1103.biz.mail.sk1.yahoo.com>
Date: Mon, 31 May 2010 19:54:26 -0400
Message-ID: <AANLkTimHU8d6mVOAfGNs9v6dS6kaRWrvDdyCKGg17L4a@mail.gmail.com>
Subject: Re: Lucene Newbie Questions
From: Frank A <fsa317@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636d33d13b773910487ec93b8
X-Virus-Checked: Checked by ClamAV on apache.org

--001636d33d13b773910487ec93b8
Content-Type: text/plain; charset=ISO-8859-1

Thanks a bunch.

Since I'm already inside a java based web application it would seem like
both SOLR and Lucene would be plausible.  I'm curious what other factors I
should know about in determing if SOLR or Lucene is right for me.

Can SOLR be used within a web application (as a library) or is it only a
standalone app.

Frank


On Mon, May 31, 2010 at 7:33 PM, N Hira <nhira@cognocys.com> wrote:

> Frank --
>
> Lucene can definitely do this stuff.  This review of the Query Syntax might
> offer you some insight:
> http://lucene.apache.org/java/2_4_0/queryparsersyntax.html
>
> Specifically, you can look up "Fuzzy Searches" and "Synonyms".  There are a
> couple of key ways to handle synonyms, so you might want to prototype that
> before you settle on the approach you ultimately select.
>
> Be aware that Lucene is more of a "search library".  If you're looking for
> a Web App. that can return XML or JSON, you might want to look into Solr,
> which uses Lucene, but offers a lot of the architecture you might need:
> http://lucene.apache.org/solr/
>
>
> Good luck!
>
> -h
>
>
>
>
> ----- Original Message ----
> From: Frank A <fsa317@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Mon, May 31, 2010 6:20:41 PM
> Subject: Lucene Newbie Questions
>
> Hello all,
> I'm considering Lucene for a specific application and am trying to ensure
> that it is the right tool for what I'm trying to accomplish.
>
> At a high level I have a list of restaurants in a database and a list of
> tags related to the restaurant (e.g. Italian, Formal, Expensive, etc).
>  Each
> restaurant also has a location (longitude/latitude).
>
> My primary goal using Lucene is to conduct searches where the user can do
> things like:
>
> - Misspell the name of the restaurant (by a few chars)
> - Type "Italian Food" instead of just Italian or perhaps "Great Italian"
> - Or even use some synonyms (e.g. Deli and Delicatessen) - of course I'd
> define these terms.
>
> Are these types of use cases something that can be done with Lucene? Or is
> there a more appropriate API that I haven't found?
>
> Thanks.
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001636d33d13b773910487ec93b8--

