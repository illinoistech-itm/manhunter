From java-user-return-33405-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 01 01:26:34 2008
Return-Path: <java-user-return-33405-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62946 invoked from network); 1 Apr 2008 01:26:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Apr 2008 01:26:34 -0000
Received: (qmail 27785 invoked by uid 500); 1 Apr 2008 01:26:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27755 invoked by uid 500); 1 Apr 2008 01:26:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27744 invoked by uid 99); 1 Apr 2008 01:26:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Mar 2008 18:26:26 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of yseeley@gmail.com designates 64.233.170.188 as permitted sender)
Received: from [64.233.170.188] (HELO rn-out-0910.google.com) (64.233.170.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Apr 2008 01:25:36 +0000
Received: by rn-out-0910.google.com with SMTP id v46so843377rnb.5
        for <java-user@lucene.apache.org>; Mon, 31 Mar 2008 18:25:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        bh=Py+JtoPBmN5M+J/ZRAOKuWac8EmDaHIFM14+GUGtXeo=;
        b=IiB0PY+27oC3asKaQl82AtkPPvGTanXvqkhWTlm+AusAl5AuLtqHDFj5NFu/YnT51G7AFWjhZCXeLhMMCoK/tHy+Wp0VtWNPbEAMpz370KkH72SQudR7Acg/xsCIm/4m5hy3H1FZq/dzCE/fHtDhrmoGnbkY89YRt8HSX1hn+Q4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=SzFI5HMMbz9+vxnZYLjKuCtMb29xTBwjdnZA0xhKV1Cat8+9meVrwbGCMfsRAinQPulyp6lmr3FYi7yN+sLDv+PUV27+QB6w+YX6wqBe3MbvfNKaA0Pq37YYdMQ3ig8f+HocZUon4Lm267wTn+c9HfUd8dD05QMCPNG9NDZS+Po=
Received: by 10.150.190.9 with SMTP id n9mr3771524ybf.127.1207013139622;
        Mon, 31 Mar 2008 18:25:39 -0700 (PDT)
Received: by 10.150.156.2 with HTTP; Mon, 31 Mar 2008 18:25:39 -0700 (PDT)
Message-ID: <c68e39170803311825v658e0b43h10d651c556f2e610@mail.gmail.com>
Date: Mon, 31 Mar 2008 21:25:39 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: java.lang.IllegalArgumentException: Segment is too large
In-Reply-To: <736FEDAD-F66B-46E0-BC83-9F4A96F91377@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <a206fb7e0803301642j66ad9a32o296d00f107c5b61e@mail.gmail.com>
	 <736FEDAD-F66B-46E0-BC83-9F4A96F91377@mikemccandless.com>
X-Google-Sender-Auth: c68cf17481392aea
X-Virus-Checked: Checked by ClamAV on apache.org

On Mon, Mar 31, 2008 at 5:19 AM, Michael McCandless
<lucene@mikemccandless.com> wrote:
>  I think we should remove those checks and allow addIndexesNoOptimize
>  to import and index even if it has segments over this limit.  I'll
>  open an issue.

+1

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33406-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 01 01:27:17 2008
Return-Path: <java-user-return-33406-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63187 invoked from network); 1 Apr 2008 01:27:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Apr 2008 01:27:16 -0000
Received: (qmail 29743 invoked by uid 500); 1 Apr 2008 01:27:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29708 invoked by uid 500); 1 Apr 2008 01:27:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29697 invoked by uid 99); 1 Apr 2008 01:27:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Mar 2008 18:27:10 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of yseeley@gmail.com designates 64.233.170.188 as permitted sender)
Received: from [64.233.170.188] (HELO rn-out-0910.google.com) (64.233.170.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Apr 2008 01:26:21 +0000
Received: by rn-out-0910.google.com with SMTP id v46so843772rnb.5
        for <java-user@lucene.apache.org>; Mon, 31 Mar 2008 18:26:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        bh=Py+JtoPBmN5M+J/ZRAOKuWac8EmDaHIFM14+GUGtXeo=;
        b=IiB0PY+27oC3asKaQl82AtkPPvGTanXvqkhWTlm+AusAl5AuLtqHDFj5NFu/YnT51G7AFWjhZCXeLhMMCoK/tHy+Wp0VtWNPbEAMpz370KkH72SQudR7Acg/xsCIm/4m5hy3H1FZq/dzCE/fHtDhrmoGnbkY89YRt8HSX1hn+Q4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=SzFI5HMMbz9+vxnZYLjKuCtMb29xTBwjdnZA0xhKV1Cat8+9meVrwbGCMfsRAinQPulyp6lmr3FYi7yN+sLDv+PUV27+QB6w+YX6wqBe3MbvfNKaA0Pq37YYdMQ3ig8f+HocZUon4Lm267wTn+c9HfUd8dD05QMCPNG9NDZS+Po=
Received: by 10.150.190.9 with SMTP id n9mr3771524ybf.127.1207013139622;
        Mon, 31 Mar 2008 18:25:39 -0700 (PDT)
Received: by 10.150.156.2 with HTTP; Mon, 31 Mar 2008 18:25:39 -0700 (PDT)
Message-ID: <c68e39170803311825v658e0b43h10d651c556f2e610@mail.gmail.com>
Date: Mon, 31 Mar 2008 21:25:39 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: java.lang.IllegalArgumentException: Segment is too large
In-Reply-To: <736FEDAD-F66B-46E0-BC83-9F4A96F91377@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <a206fb7e0803301642j66ad9a32o296d00f107c5b61e@mail.gmail.com>
	 <736FEDAD-F66B-46E0-BC83-9F4A96F91377@mikemccandless.com>
X-Google-Sender-Auth: c68cf17481392aea
X-Virus-Checked: Checked by ClamAV on apache.org

On Mon, Mar 31, 2008 at 5:19 AM, Michael McCandless
<lucene@mikemccandless.com> wrote:
>  I think we should remove those checks and allow addIndexesNoOptimize
>  to import and index even if it has segments over this limit.  I'll
>  open an issue.

+1

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33407-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 01 01:43:32 2008
Return-Path: <java-user-return-33407-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69965 invoked from network); 1 Apr 2008 01:43:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Apr 2008 01:43:32 -0000
Received: (qmail 44037 invoked by uid 500); 1 Apr 2008 01:43:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44003 invoked by uid 500); 1 Apr 2008 01:43:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43991 invoked by uid 99); 1 Apr 2008 01:43:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Mar 2008 18:43:25 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Apr 2008 01:42:44 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 3C4A471C31A; Mon, 31 Mar 2008 18:42:56 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 38CD471C1C8
	for <java-user@lucene.apache.org>; Mon, 31 Mar 2008 18:42:56 -0700 (PDT)
Date: Mon, 31 Mar 2008 18:42:56 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: RE: setPositionIncrement questions
In-Reply-To: <20080331145413.9A525B08904@out4.bezeqint.net>
Message-ID: <Pine.LNX.4.62.0803311830001.24995@radix.cryptio.net>
References: <20080331145413.9A525B08904@out4.bezeqint.net>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: duplicated them to give the words they contain more weight. So I will not
: want to return higher PositionIncrement for each instance of a field, just
: those which I'm interested in (title/headers). Can this be done somehow
: without injecting a "magic string", as Chris called it?

there are multiple levels to the API for indexing that you can use ... you 
at the String/Reader+Analyzer level of the API, you could use a magic 
token in your Strings to tell your Analyzer when to set a high increment, 
or you can stich together multiple strings into a single "Field" and use 
the increment gap to get a high increment only after each one; or you can 
skip the String/Reader+Analyzer aspect completley and just add a 
TokenStream of your own ceation directly to a Field instance.

The point is there are lots of ways to get an arbitrary increment at an 
arbitrary point in your stream.  Some may seem kludgier then others, but 
the "right" way is subjective depending on what kind of data strucutres 
you already have to work with.


: getPositionIncrementGap is a member function of StandardAnalyzer, not
: StandardTokenizer. Since my use case is a bit different than what you

It's a method of the Analyzer API.  whatever Analyzer you tell IndexWriter 
to use needs to implement that method, if you are writing your own 
Analyzer that uses StandardTokenizer you can implement it however you 
want.

: You have pretty much understood my use case for position increment 0 - but I
: thought this is possible to do with customizing a Scorer? I haven't gotten

Who said anything about a custom Scorer?

: that deep into Lucene myself (yet)...
: I'm not entirely sure I understand the consequences of storing more than one
: Term in the same position. What I understood from your explanation is that

Position values only affect proximity.  There is nothing special about two 
terms at the same postion -- they only matter as relative distances from 
each other and other Terms when you do a PhraseQuery or a SpanNearQuery 
(etc...).  If the positions of A and B differ by 10, then they match with 
slop of 15 and not a slop of 5.

-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33408-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 01 06:49:04 2008
Return-Path: <java-user-return-33408-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10547 invoked from network); 1 Apr 2008 06:49:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Apr 2008 06:49:04 -0000
Received: (qmail 46049 invoked by uid 500); 1 Apr 2008 06:48:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46020 invoked by uid 500); 1 Apr 2008 06:48:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46009 invoked by uid 99); 1 Apr 2008 06:48:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Mar 2008 23:48:57 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of shrish.garg@gmail.com designates 74.125.46.30 as permitted sender)
Received: from [74.125.46.30] (HELO yw-out-2324.google.com) (74.125.46.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Apr 2008 06:48:16 +0000
Received: by yw-out-2324.google.com with SMTP id 5so195866ywh.5
        for <java-user@lucene.apache.org>; Mon, 31 Mar 2008 23:48:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=/FruxpFbaFuGSXAI03BaC4fa+gvfCLxZzJGi0WQpW1o=;
        b=DJg/I7TaVSS0U0SALgEsZ2ZURXq86McnGVc1LI6zRUGtnmDVDa8TJFHzdHqwQFgmWkMiooMMN3xpsZVEjfGEnVDBrxk0LIZCR/KOG610xu7Biq2nddm4aQQL1ck1iP6xbunSIHPJGAZjYh0UpwxylodJ3mAmyVick5ew3DBiaFY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=OBMVdNiCsSsx06IohccDRdM/enBicYMrQD+y+6OiCrCawrsYv+dj/pOXU1c6z2nRkafGSk3Rn0QBUAVphqhsvIypQPyrBOzkQbACZARqcStapTWqZiyz9TA/PbwXMU/9yhqXvgv0mZqW9WAwLGaFK8CAk9c1O0Tniq1nygXxZ6g=
Received: by 10.150.230.2 with SMTP id c2mr3900831ybh.161.1207032506969;
        Mon, 31 Mar 2008 23:48:26 -0700 (PDT)
Received: by 10.151.83.1 with HTTP; Mon, 31 Mar 2008 23:48:26 -0700 (PDT)
Message-ID: <4b606ead0803312348w53c064fevd0af792127692811@mail.gmail.com>
Date: Tue, 1 Apr 2008 12:18:26 +0530
From: "shrish garg" <shrish.garg@gmail.com>
To: java-user@lucene.apache.org
Subject: Lucene Search Engine Query
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1708_28757864.1207032506949"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1708_28757864.1207032506949
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
        I am using Lucene search engine in my website for document search .
though it is working fine and searching the keywords into the documents
properly, i am facing a problem during the search .
        When i am searching some keywords whose occurence are very low in
the document and only after the 50-60 pages from the start of the document,
the search engine is not able to serach those keywords.
       I am confuse whether their r any limitations for the search in lucene
search engine or it is a problem with my configuration, so i need a help
from you .
       if you have any idea about my problem, please send me the reason and
solution to correct the mistake if any.

-- 
Thanks and Regards
Shrish Kumar Garg
9999176464
Software Developer
V2Web Informatics,Delhi

------=_Part_1708_28757864.1207032506949--

From java-user-return-33409-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 01 06:52:36 2008
Return-Path: <java-user-return-33409-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11415 invoked from network); 1 Apr 2008 06:52:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Apr 2008 06:52:36 -0000
Received: (qmail 51366 invoked by uid 500); 1 Apr 2008 06:52:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51336 invoked by uid 500); 1 Apr 2008 06:52:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51325 invoked by uid 99); 1 Apr 2008 06:52:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Mar 2008 23:52:29 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.251] (HELO an-out-0708.google.com) (209.85.132.251)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Apr 2008 06:51:47 +0000
Received: by an-out-0708.google.com with SMTP id c5so508981anc.49
        for <java-user@lucene.apache.org>; Mon, 31 Mar 2008 23:51:46 -0700 (PDT)
Received: by 10.100.227.6 with SMTP id z6mr18425051ang.41.1207032706143;
        Mon, 31 Mar 2008 23:51:46 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id s40sm7535347hsb.13.2008.03.31.23.51.45
        (version=TLSv1/SSLv3 cipher=OTHER);
        Mon, 31 Mar 2008 23:51:45 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <4b606ead0803312348w53c064fevd0af792127692811@mail.gmail.com>
References: <4b606ead0803312348w53c064fevd0af792127692811@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <51D88A99-34D7-4ADF-B99C-27C260784388@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Lucene Search Engine Query
Date: Tue, 1 Apr 2008 02:51:56 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


This could be the maxFieldLength default in IndexWriter?  By default  
IndexWriter only indexes the first 10,000 tokens of a document.

Mike

shrish garg wrote:
> Hi,
>         I am using Lucene search engine in my website for document  
> search .
> though it is working fine and searching the keywords into the  
> documents
> properly, i am facing a problem during the search .
>         When i am searching some keywords whose occurence are very  
> low in
> the document and only after the 50-60 pages from the start of the  
> document,
> the search engine is not able to serach those keywords.
>        I am confuse whether their r any limitations for the search  
> in lucene
> search engine or it is a problem with my configuration, so i need a  
> help
> from you .
>        if you have any idea about my problem, please send me the  
> reason and
> solution to correct the mistake if any.
>
> -- 
> Thanks and Regards
> Shrish Kumar Garg
> 9999176464
> Software Developer
> V2Web Informatics,Delhi


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33410-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 01 06:52:54 2008
Return-Path: <java-user-return-33410-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11513 invoked from network); 1 Apr 2008 06:52:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Apr 2008 06:52:53 -0000
Received: (qmail 52936 invoked by uid 500); 1 Apr 2008 06:52:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52908 invoked by uid 500); 1 Apr 2008 06:52:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52897 invoked by uid 99); 1 Apr 2008 06:52:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Mar 2008 23:52:47 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of shrish.garg@gmail.com designates 66.249.82.229 as permitted sender)
Received: from [66.249.82.229] (HELO wx-out-0506.google.com) (66.249.82.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Apr 2008 06:52:06 +0000
Received: by wx-out-0506.google.com with SMTP id i28so2161273wxd.20
        for <java-user@lucene.apache.org>; Mon, 31 Mar 2008 23:52:15 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=L9nLvjXsTr+fh1q+kuczOxjYR2fcC0mqYMqXQJITU3c=;
        b=t6txv+BTz+eTHPVCMsqH4AzNz4VpNiZDOP2lX9lKVvJE6VbXxccGZ9I7GRr59dqM9EaMr2LEdQHk7it14mXk4eW3o42qya2pa4wkyQP+OU/L1I4M4SR6xsuGBhXcwDA1SoNpi0coVZbUBOg5TIs1pOU1sl9SVaYQNqlsFNxCbXo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=Npk8OgIr+NRaUl+6L0AJltqDwJpDB7N/Qxy3qp04F5/quYId9rUpgYB7tZ4rKrAvf5mQf8Zmp4yw33nn3W7wy4fqQu51TnIbqf0SFL93BT17C7fSWxYjTp4fV4vU3zzb+Y/BTImLSSozdCyYUzxOQFeR55a+tJSGJ4w9mbjQxpA=
Received: by 10.150.201.13 with SMTP id y13mr3934746ybf.31.1207032735915;
        Mon, 31 Mar 2008 23:52:15 -0700 (PDT)
Received: by 10.151.83.1 with HTTP; Mon, 31 Mar 2008 23:52:15 -0700 (PDT)
Message-ID: <4b606ead0803312352k2ef5289oa4dbb600a6659643@mail.gmail.com>
Date: Tue, 1 Apr 2008 12:22:15 +0530
From: "shrish garg" <shrish.garg@gmail.com>
To: java-user@lucene.apache.org
Subject: Lucene Search Engine Query
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1721_32285638.1207032735896"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1721_32285638.1207032735896
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
        I am using Lucene search engine in my website for document search .
though it is working fine and searching the keywords into the documents
properly, i am facing a problem during the search .
        When i am searching some keywords whose occurence are very low in
the document and only after the 50-60 pages from the starting of the
document, the search engine is not able to serach those keywords.
        I  am confuse whether their r any limitations for the search in
lucene search engine or it is a problem with my configuration, so i need a
help from you .
       if you have any idea about my problem, please send me the reason and
solution to correct the mistake

-- 
Thanks and Regards
Shrish Kumar Garg
9999176464
Software Developer
V2Web Informatics,Delhi

------=_Part_1721_32285638.1207032735896--

From java-user-return-33411-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 01 07:03:08 2008
Return-Path: <java-user-return-33411-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16392 invoked from network); 1 Apr 2008 07:03:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Apr 2008 07:03:08 -0000
Received: (qmail 67300 invoked by uid 500); 1 Apr 2008 07:03:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67263 invoked by uid 500); 1 Apr 2008 07:03:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67252 invoked by uid 99); 1 Apr 2008 07:03:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Apr 2008 00:03:01 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.249] (HELO an-out-0708.google.com) (209.85.132.249)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Apr 2008 07:02:19 +0000
Received: by an-out-0708.google.com with SMTP id c5so509867anc.49
        for <java-user@lucene.apache.org>; Tue, 01 Apr 2008 00:02:27 -0700 (PDT)
Received: by 10.100.105.15 with SMTP id d15mr18414728anc.32.1207033347422;
        Tue, 01 Apr 2008 00:02:27 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id m6sm11006149wrm.35.2008.04.01.00.02.26
        (version=TLSv1/SSLv3 cipher=OTHER);
        Tue, 01 Apr 2008 00:02:27 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <c68e39170803311825v658e0b43h10d651c556f2e610@mail.gmail.com>
References: <a206fb7e0803301642j66ad9a32o296d00f107c5b61e@mail.gmail.com> <736FEDAD-F66B-46E0-BC83-9F4A96F91377@mikemccandless.com> <c68e39170803311825v658e0b43h10d651c556f2e610@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <559CAC27-7D1C-4C02-99DE-A74D05E81099@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: java.lang.IllegalArgumentException: Segment is too large
Date: Tue, 1 Apr 2008 03:02:37 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


OK, I opened LUCENE-1254 and committed the fix to trunk & (upcoming)  
2.3.2.

Mike

Yonik Seeley wrote:
> On Mon, Mar 31, 2008 at 5:19 AM, Michael McCandless
> <lucene@mikemccandless.com> wrote:
>>  I think we should remove those checks and allow addIndexesNoOptimize
>>  to import and index even if it has segments over this limit.  I'll
>>  open an issue.
>
> +1
>
> -Yonik
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33412-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 01 07:54:14 2008
Return-Path: <java-user-return-33412-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31024 invoked from network); 1 Apr 2008 07:54:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Apr 2008 07:54:14 -0000
Received: (qmail 27012 invoked by uid 500); 1 Apr 2008 07:54:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26982 invoked by uid 500); 1 Apr 2008 07:54:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26971 invoked by uid 99); 1 Apr 2008 07:54:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Apr 2008 00:54:07 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [62.23.130.171] (HELO chico.albert-inc.com) (62.23.130.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Apr 2008 07:53:26 +0000
Received: from chico.albert-inc.com (unknown [127.0.0.1])
	by localhost (Postfix) with ESMTP id CF57786CE4
	for <java-user@lucene.apache.org>; Tue,  1 Apr 2008 09:53:04 +0200 (CEST)
Received: by chico.albert-inc.com (Postfix, from userid 0)
	id D444C86CD5; Tue,  1 Apr 2008 09:51:31 +0200 (CEST)
X-Spam-Checker-Version: SpamAssassin 3.1.4 (2006-07-25) on 
	chico.albert-inc.com
X-Spam-Level: *
Received: from sophia (gra94-5-82-227-146-101.fbx.proxad.net [82.227.146.101])
	by chico.albert-inc.com (Postfix) with ESMTP id 365CD86CD5
	for <java-user@lucene.apache.org>; Tue,  1 Apr 2008 09:51:27 +0200 (CEST)
From: =?iso-8859-1?Q?Dominique_B=E9jean?= <dominique.bejean@eolya.fr>
To: <java-user@lucene.apache.org>
Subject: RE: Problems about using Lucene to generate tag cloud..
Date: Tue, 1 Apr 2008 09:51:55 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <009101c892fd$d4fd4b50$7f00a8c0@wuqi>
Thread-Index: AciS/mhXmRrgnPePRt+OThgSFQCKSgAzRSpQ
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
Message-Id: <20080401075127.365CD86CD5@chico.albert-inc.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=1.5 required=8.0 tests=AWL,BAYES_50,
	MSGID_FROM_MTA_ID autolearn=no version=3.1.4

May be you can index the set of documents in a temporary index. This =
index
needs only one field (tag).

Then you can browse the terms collection of the index and get each =
couple
term/frequency=20

        IndexReader reader =3D IndexReader.open(temp_index);
        TermEnum terms =3D reader.terms();

        while (terms.next()) {
            String field =3D terms.term().field();

            if (!"tag".equals(field)) continue;

            String term =3D terms.term().text();
            int freq =3D terms.docFreq();
        }

        terms.close();
        reader.close();



-----Message d'origine-----
De=A0: wuqi [mailto:chee.wu@gmail.com]=20
Envoy=E9=A0: lundi 31 mars 2008 09:07
=C0=A0: java-user@lucene.apache.org
Objet=A0: Problems about using Lucene to generate tag cloud..

Hi,
I am trying to use Lucene index to implement a tag cloud  system. I add =
a
new field  named "tags" in index to  store all the tags,and we don't =
support
tags with more than one word, so different tags of the same document =
just
are separate by white space.  The "tags" filed in one document  may =
looks
like this :
doc1  tags : travel Beijing  news
doc2  tags:  beijing sports news
I can easily retrieve tags related with single document,and also get the
documents related with certain tag, but it's hard  find a "efficient" =
way to
get frequent tags  from a "set" of documents of this index.Tthe set of =
the
documents is always generated dynamically, may be a search result, a
dynamically generated category through clustering. The document set is =
very
large, maybe several ten thousands or several hundred thousands.So =
simply
iterate all  the documents in the set and find the frequent tags might =
not
be applicable.Do you have any better idea ?

Thanks
-Qi


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33413-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 01 09:59:33 2008
Return-Path: <java-user-return-33413-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73762 invoked from network); 1 Apr 2008 09:59:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Apr 2008 09:59:33 -0000
Received: (qmail 91477 invoked by uid 500); 1 Apr 2008 09:59:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91430 invoked by uid 500); 1 Apr 2008 09:59:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91419 invoked by uid 99); 1 Apr 2008 09:59:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Apr 2008 02:59:25 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of wojtekh2@gmail.com designates 209.85.132.250 as permitted sender)
Received: from [209.85.132.250] (HELO an-out-0708.google.com) (209.85.132.250)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Apr 2008 09:58:44 +0000
Received: by an-out-0708.google.com with SMTP id c5so524588anc.49
        for <java-user@lucene.apache.org>; Tue, 01 Apr 2008 02:58:56 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        bh=s6duHG+EVNf+9Whc8yitGfFfaKvmjntIayf4+cVTxRw=;
        b=CM2ufhwYN7J+TOj+bN8ayEg1FdCXmLFluCImXNZFx2ikmbjDKc+V/JooG5KPOL1xK+r8PqfbC1pUMp9NhOLff2SuhXGY81wvMpcKAjZTX1AcEsm5NamjZkh7+U3Id6SjOBOEF3tm0+ACNaKPCir9wJF9KfecLL7tpv41lIdGJT4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=DawsZ7Q8yS9SQWomQo1LXzvWjb5TVrG3NW49jt++DfnV9yH4h2FVe1IaScaphAJR/A4Bg1+ieVbiX7H36Zb8JQ8eEVg4vq9hparifS7yOmAzAgzb9sN4cq8dTxlRaCBPLt1xceDpu7k4jdBlxQMqkv63l1Q7YOLxYeBV9YQO1DY=
Received: by 10.100.3.4 with SMTP id 4mr3223268anc.81.1207043935934;
        Tue, 01 Apr 2008 02:58:55 -0700 (PDT)
Received: by 10.100.229.4 with HTTP; Tue, 1 Apr 2008 02:58:55 -0700 (PDT)
Message-ID: <329a6c830804010258jd8df420lcf0f777df9fc36f3@mail.gmail.com>
Date: Tue, 1 Apr 2008 11:58:55 +0200
From: "Wojtek H" <wojtekh2@gmail.com>
To: java-user@lucene.apache.org
Subject: stemming in Lucene
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

Snowball stemmers are part of Lucene, but for few languages only. We
have documents in various languages and so need stemmers for many
languages (in particular polish). One of the ideas is to use ispell
dictionaries. There are ispell dicts for many languages and so this
solution is good for multilingual environment. Maybe this is not
perfect place to ask, but does anyone know about java stemmer using
ispell dicts?
There is aspell-like java spell-checker (Jazzy) but I could not see
how to use it for stemming. We are considering porting part of
postgres tsearch module to java, because tsearch uses ispell dicts for
stemming.
But maybe there is a better way or there are people working on
something like that?

Thanks and regards,
wojtek

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33414-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 01 12:14:30 2008
Return-Path: <java-user-return-33414-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22123 invoked from network); 1 Apr 2008 12:14:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Apr 2008 12:14:30 -0000
Received: (qmail 63944 invoked by uid 500); 1 Apr 2008 12:14:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63918 invoked by uid 500); 1 Apr 2008 12:14:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63907 invoked by uid 99); 1 Apr 2008 12:14:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Apr 2008 05:14:23 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=MIME_BASE64_BLANKS,MIME_BASE64_TEXT,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chee.wu@gmail.com designates 64.233.170.184 as permitted sender)
Received: from [64.233.170.184] (HELO rn-out-0910.google.com) (64.233.170.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Apr 2008 12:13:42 +0000
Received: by rn-out-0910.google.com with SMTP id v46so893141rnb.5
        for <java-user@lucene.apache.org>; Tue, 01 Apr 2008 05:12:04 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:from:to:references:subject:date:mime-version:content-type:content-transfer-encoding:x-priority:x-msmail-priority:x-mailer:x-mimeole;
        bh=5CWQd0l1B+8PJ4lXO3jZihqk656ewlQ7DgXHYTJ2j58=;
        b=WQ/j7wyho8W9wgO8DlvvqqtS72QbAPdZgrfauLY+0T9DTuvfojPOJSsf8/91+/1ibe+/q6RZu79LU8/1VDTre9aGo377JyVaQ96ByGl6pvd9n6yRdzGakjAIMZHO6ibsJ7RUPMgYDORCAocwD936MhizZFbgMBzB5CqSQbVS6M4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:from:to:references:subject:date:mime-version:content-type:content-transfer-encoding:x-priority:x-msmail-priority:x-mailer:x-mimeole;
        b=HiUVIAn29XeXDj+lk877y73ByM36tTQkrXz09EJ6Z2fwEIBMHV/LtBkWo+9F0BDrYP5CYQ5xs3/NLaB+H7PF1acbqIMo8T7jRSEXDp6+upJqB5gS1jv2WsoqYECbsPhUf+TQi7GcEhG12bzgwSFhfxGivX5FRky5Yee/J6urA9g=
Received: by 10.142.216.9 with SMTP id o9mr4584367wfg.172.1207051924090;
        Tue, 01 Apr 2008 05:12:04 -0700 (PDT)
Received: from wuqi ( [125.34.7.246])
        by mx.google.com with ESMTPS id 9sm11286686wfc.16.2008.04.01.05.11.59
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 01 Apr 2008 05:12:02 -0700 (PDT)
Message-ID: <006301c893f1$5db985a0$7f00a8c0@wuqi>
From: "wuqi" <chee.wu@gmail.com>
To: <java-user@lucene.apache.org>
References: <20080401075127.365CD86CD5@chico.albert-inc.com>
Subject: Re: Problems about using Lucene to generate tag cloud..
Date: Tue, 1 Apr 2008 20:10:18 +0800
MIME-Version: 1.0
Content-Type: text/plain;
	charset="ISO-8859-1"
Content-Transfer-Encoding: base64
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
X-Virus-Checked: Checked by ClamAV on apache.org

c28gYnVpbGQgIGEgaW5kZXggZm9yIHRoZSBkeW5hbWljYWxseSBnZW5lcmF0ZWQgZG9jdWNlbWVu
dHMgc2V0ICxhbmQgdGhlbiAgdHJ5IHRvIGZpbmQgZnJlcXVlbmN5IGZvciBlYWNoIHRlcm1zIGlu
IHRoaXMgaW5kZXguLi4gbm90IHN1cmUgaXQncyBmYXN0IGVub3VnLmJ1dCBpdCdzIHdvcnRoIHRv
IGhhdmUgYSB0cnkuLi4NClRoYW5rIHlvdSAgRG9pbmlxdWUhDQotLS0tLSBPcmlnaW5hbCBNZXNz
YWdlIC0tLS0tIA0KRnJvbTogIkRvbWluaXF1ZSBC6WplYW4iIDxkb21pbmlxdWUuYmVqZWFuQGVv
bHlhLmZyPg0KVG86IDxqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmc+DQpTZW50OiBUdWVzZGF5
LCBBcHJpbCAwMSwgMjAwOCAzOjUxIFBNDQpTdWJqZWN0OiBSRTogUHJvYmxlbXMgYWJvdXQgdXNp
bmcgTHVjZW5lIHRvIGdlbmVyYXRlIHRhZyBjbG91ZC4uDQoNCg0KTWF5IGJlIHlvdSBjYW4gaW5k
ZXggdGhlIHNldCBvZiBkb2N1bWVudHMgaW4gYSB0ZW1wb3JhcnkgaW5kZXguIFRoaXMgaW5kZXgN
Cm5lZWRzIG9ubHkgb25lIGZpZWxkICh0YWcpLg0KDQpUaGVuIHlvdSBjYW4gYnJvd3NlIHRoZSB0
ZXJtcyBjb2xsZWN0aW9uIG9mIHRoZSBpbmRleCBhbmQgZ2V0IGVhY2ggY291cGxlDQp0ZXJtL2Zy
ZXF1ZW5jeSANCg0KICAgICAgICBJbmRleFJlYWRlciByZWFkZXIgPSBJbmRleFJlYWRlci5vcGVu
KHRlbXBfaW5kZXgpOw0KICAgICAgICBUZXJtRW51bSB0ZXJtcyA9IHJlYWRlci50ZXJtcygpOw0K
DQogICAgICAgIHdoaWxlICh0ZXJtcy5uZXh0KCkpIHsNCiAgICAgICAgICAgIFN0cmluZyBmaWVs
ZCA9IHRlcm1zLnRlcm0oKS5maWVsZCgpOw0KDQogICAgICAgICAgICBpZiAoISJ0YWciLmVxdWFs
cyhmaWVsZCkpIGNvbnRpbnVlOw0KDQogICAgICAgICAgICBTdHJpbmcgdGVybSA9IHRlcm1zLnRl
cm0oKS50ZXh0KCk7DQogICAgICAgICAgICBpbnQgZnJlcSA9IHRlcm1zLmRvY0ZyZXEoKTsNCiAg
ICAgICAgfQ0KDQogICAgICAgIHRlcm1zLmNsb3NlKCk7DQogICAgICAgIHJlYWRlci5jbG9zZSgp
Ow0KDQoNCg0KLS0tLS1NZXNzYWdlIGQnb3JpZ2luZS0tLS0tDQpEZSA6IHd1cWkgW21haWx0bzpj
aGVlLnd1QGdtYWlsLmNvbV0gDQpFbnZveekgOiBsdW5kaSAzMSBtYXJzIDIwMDggMDk6MDcNCsAg
OiBqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmcNCk9iamV0IDogUHJvYmxlbXMgYWJvdXQgdXNp
bmcgTHVjZW5lIHRvIGdlbmVyYXRlIHRhZyBjbG91ZC4uDQoNCkhpLA0KSSBhbSB0cnlpbmcgdG8g
dXNlIEx1Y2VuZSBpbmRleCB0byBpbXBsZW1lbnQgYSB0YWcgY2xvdWQgIHN5c3RlbS4gSSBhZGQg
YQ0KbmV3IGZpZWxkICBuYW1lZCAidGFncyIgaW4gaW5kZXggdG8gIHN0b3JlIGFsbCB0aGUgdGFn
cyxhbmQgd2UgZG9uJ3Qgc3VwcG9ydA0KdGFncyB3aXRoIG1vcmUgdGhhbiBvbmUgd29yZCwgc28g
ZGlmZmVyZW50IHRhZ3Mgb2YgdGhlIHNhbWUgZG9jdW1lbnQganVzdA0KYXJlIHNlcGFyYXRlIGJ5
IHdoaXRlIHNwYWNlLiAgVGhlICJ0YWdzIiBmaWxlZCBpbiBvbmUgZG9jdW1lbnQgIG1heSBsb29r
cw0KbGlrZSB0aGlzIDoNCmRvYzEgIHRhZ3MgOiB0cmF2ZWwgQmVpamluZyAgbmV3cw0KZG9jMiAg
dGFnczogIGJlaWppbmcgc3BvcnRzIG5ld3MNCkkgY2FuIGVhc2lseSByZXRyaWV2ZSB0YWdzIHJl
bGF0ZWQgd2l0aCBzaW5nbGUgZG9jdW1lbnQsYW5kIGFsc28gZ2V0IHRoZQ0KZG9jdW1lbnRzIHJl
bGF0ZWQgd2l0aCBjZXJ0YWluIHRhZywgYnV0IGl0J3MgaGFyZCAgZmluZCBhICJlZmZpY2llbnQi
IHdheSB0bw0KZ2V0IGZyZXF1ZW50IHRhZ3MgIGZyb20gYSAic2V0IiBvZiBkb2N1bWVudHMgb2Yg
dGhpcyBpbmRleC5UdGhlIHNldCBvZiB0aGUNCmRvY3VtZW50cyBpcyBhbHdheXMgZ2VuZXJhdGVk
IGR5bmFtaWNhbGx5LCBtYXkgYmUgYSBzZWFyY2ggcmVzdWx0LCBhDQpkeW5hbWljYWxseSBnZW5l
cmF0ZWQgY2F0ZWdvcnkgdGhyb3VnaCBjbHVzdGVyaW5nLiBUaGUgZG9jdW1lbnQgc2V0IGlzIHZl
cnkNCmxhcmdlLCBtYXliZSBzZXZlcmFsIHRlbiB0aG91c2FuZHMgb3Igc2V2ZXJhbCBodW5kcmVk
IHRob3VzYW5kcy5TbyBzaW1wbHkNCml0ZXJhdGUgYWxsICB0aGUgZG9jdW1lbnRzIGluIHRoZSBz
ZXQgYW5kIGZpbmQgdGhlIGZyZXF1ZW50IHRhZ3MgbWlnaHQgbm90DQpiZSBhcHBsaWNhYmxlLkRv
IHlvdSBoYXZlIGFueSBiZXR0ZXIgaWRlYSA/DQoNClRoYW5rcw0KLVFpDQoNCg0KLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tDQpUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5l
LmFwYWNoZS5vcmcNCkZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1o
ZWxwQGx1Y2VuZS5hcGFjaGUub3JnDQo=



From java-user-return-33415-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 01 12:32:07 2008
Return-Path: <java-user-return-33415-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34174 invoked from network); 1 Apr 2008 12:32:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Apr 2008 12:32:06 -0000
Received: (qmail 84435 invoked by uid 500); 1 Apr 2008 12:32:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84405 invoked by uid 500); 1 Apr 2008 12:32:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84394 invoked by uid 99); 1 Apr 2008 12:32:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Apr 2008 05:32:00 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [62.23.130.171] (HELO chico.albert-inc.com) (62.23.130.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Apr 2008 12:31:17 +0000
Received: from chico.albert-inc.com (unknown [127.0.0.1])
	by localhost (Postfix) with ESMTP id BDA558C574
	for <java-user@lucene.apache.org>; Tue,  1 Apr 2008 14:30:57 +0200 (CEST)
Received: by chico.albert-inc.com (Postfix, from userid 0)
	id 342338D10C; Tue,  1 Apr 2008 14:29:46 +0200 (CEST)
X-Spam-Checker-Version: SpamAssassin 3.1.4 (2006-07-25) on 
	chico.albert-inc.com
X-Spam-Level: 
Received: from sophia (gra94-5-82-227-146-101.fbx.proxad.net [82.227.146.101])
	by chico.albert-inc.com (Postfix) with ESMTP id 503CC8D31D
	for <java-user@lucene.apache.org>; Tue,  1 Apr 2008 14:29:43 +0200 (CEST)
From: =?iso-8859-1?Q?Dominique_B=E9jean?= <dominique.bejean@eolya.fr>
To: <java-user@lucene.apache.org>
Subject: RE: Problems about using Lucene to generate tag cloud..
Date: Tue, 1 Apr 2008 14:30:11 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <006301c893f1$5db985a0$7f00a8c0@wuqi>
Thread-Index: AciT8nJbO09+QjaYRRq2prkH6Sz9KQAATm1w
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
Message-Id: <20080401122943.503CC8D31D@chico.albert-inc.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=0.7 required=8.0 tests=AWL,BAYES_20,
	MSGID_FROM_MTA_ID autolearn=no version=3.1.4

On www.crossfeeds.com, I use this method in order to update hourly a tag
cloud based on the title of 20.000 RSS articles (RSS published during =
the
last 24 hours). It takes 1 minute.
=20

-----Message d'origine-----
De=A0: wuqi [mailto:chee.wu@gmail.com]=20
Envoy=E9=A0: mardi 1 avril 2008 14:10
=C0=A0: java-user@lucene.apache.org
Objet=A0: Re: Problems about using Lucene to generate tag cloud..

so build  a index for the dynamically generated docucements set ,and =
then
try to find frequency for each terms in this index... not sure it's fast
enoug.but it's worth to have a try...
Thank you  Doinique!
----- Original Message -----=20
From: "Dominique B=E9jean" <dominique.bejean@eolya.fr>
To: <java-user@lucene.apache.org>
Sent: Tuesday, April 01, 2008 3:51 PM
Subject: RE: Problems about using Lucene to generate tag cloud..


May be you can index the set of documents in a temporary index. This =
index
needs only one field (tag).

Then you can browse the terms collection of the index and get each =
couple
term/frequency=20

        IndexReader reader =3D IndexReader.open(temp_index);
        TermEnum terms =3D reader.terms();

        while (terms.next()) {
            String field =3D terms.term().field();

            if (!"tag".equals(field)) continue;

            String term =3D terms.term().text();
            int freq =3D terms.docFreq();
        }

        terms.close();
        reader.close();



-----Message d'origine-----
De : wuqi [mailto:chee.wu@gmail.com]=20
Envoy=E9 : lundi 31 mars 2008 09:07
=C0 : java-user@lucene.apache.org
Objet : Problems about using Lucene to generate tag cloud..

Hi,
I am trying to use Lucene index to implement a tag cloud  system. I add =
a
new field  named "tags" in index to  store all the tags,and we don't =
support
tags with more than one word, so different tags of the same document =
just
are separate by white space.  The "tags" filed in one document  may =
looks
like this :
doc1  tags : travel Beijing  news
doc2  tags:  beijing sports news
I can easily retrieve tags related with single document,and also get the
documents related with certain tag, but it's hard  find a "efficient" =
way to
get frequent tags  from a "set" of documents of this index.Tthe set of =
the
documents is always generated dynamically, may be a search result, a
dynamically generated category through clustering. The document set is =
very
large, maybe several ten thousands or several hundred thousands.So =
simply
iterate all  the documents in the set and find the frequent tags might =
not
be applicable.Do you have any better idea ?

Thanks
-Qi


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33416-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 01 13:20:09 2008
Return-Path: <java-user-return-33416-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53159 invoked from network); 1 Apr 2008 13:20:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Apr 2008 13:20:09 -0000
Received: (qmail 49150 invoked by uid 500); 1 Apr 2008 13:20:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49128 invoked by uid 500); 1 Apr 2008 13:20:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49117 invoked by uid 99); 1 Apr 2008 13:20:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Apr 2008 06:20:00 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.155 as permitted sender)
Received: from [72.14.220.155] (HELO fg-out-1718.google.com) (72.14.220.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Apr 2008 13:19:20 +0000
Received: by fg-out-1718.google.com with SMTP id d23so1975552fga.27
        for <java-user@lucene.apache.org>; Tue, 01 Apr 2008 06:19:30 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=OPQxnXFnQfTrfyH2llK3WZNAiwPMj5q5coN+5Iwi+9E=;
        b=e5FumAdm8e0khRzfwYwbHir7zsMELbFaLI+RffNXROy/qFPwhOr37Tlc/FB768tZTJfliu+L3MuvoJJPiBRYYO6azh7IQuzhnCbWK96oxtQBia1DLzuLLIIn1x2S6kz7mXBcrYZax+UllWcmU6ZifkHyccEMbcJzbGFtFQXDdy4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=f/4QQNoL8nm48MSDkihvY4bu2M+fMC0jto/DHM5tis8VZ3dnUo7xld2xZV5CLNiLir7q4yUnFXo6962Qv3iMCmULhhdexkyFFArTN94anMbbIbiaEy08cRLZDRw4ZI+F4TXjAMn4bz7eWP/QuuhIBP0uo9LN1inVXOFeRHh3RXQ=
Received: by 10.82.174.20 with SMTP id w20mr18793175bue.38.1207055970087;
        Tue, 01 Apr 2008 06:19:30 -0700 (PDT)
Received: by 10.82.191.6 with HTTP; Tue, 1 Apr 2008 06:19:29 -0700 (PDT)
Message-ID: <359a92830804010619x20cf6af8k47485789fab8cbf7@mail.gmail.com>
Date: Tue, 1 Apr 2008 09:19:29 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: setPositionIncrement questions
In-Reply-To: <20080331145413.9A525B08904@out4.bezeqint.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14658_14137298.1207055970059"
References: <359a92830803310624r5871080eufa795c4b3b8c7400@mail.gmail.com>
	 <20080331145413.9A525B08904@out4.bezeqint.net>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_14658_14137298.1207055970059
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

See Chris's reply, but for this <<<So I will not
want to return higher PositionIncrement for each instance of a field, just
those which I'm interested in (title/headers)>>>

I think you want PerFieldAnalyzerWrapper.

Erick

On Mon, Mar 31, 2008 at 10:56 AM, Itamar Syn-Hershko <itamar@divrei-tora.com>
wrote:

>
> Well, here is the thing - I don't necessarily want to get results per
> paragraphs - which your code will do just fine for. I want to have my
> article titles and sub-headers in the main text field, after I have
> duplicated them to give the words they contain more weight. So I will not
> want to return higher PositionIncrement for each instance of a field, just
> those which I'm interested in (title/headers). Can this be done somehow
> without injecting a "magic string", as Chris called it?
> Just so I couldn't be clearer, here is pseudo-code of my case:
>
> doc.add("field", "my title", blah, blah) /// I want to create proximity
> gap
> here
> doc.add("field", "word1 word2 word3", blah, blah)
> doc.add("field", "word4 word5 word6", blah, blah)
> doc.add("field", "my sub-header", blah, blah) /// here as well
> doc.add("field", "word7 word8 word9", blah, blah)
> IndexWriter.add(doc)
>
> >>> You can simply subclass whichever one you choose and override
> getPositionIncrementGap
>
> getPositionIncrementGap is a member function of StandardAnalyzer, not
> StandardTokenizer. Since my use case is a bit different than what you
> initially thought, I think I will wait for your thoughts on this. So far I
> have concluded that I will have to perform a check at
> StandardTokenizer::next for the "magic string", and if found set the
> current
> Token there to have PositionIncrement of about 500. Please let me know if
> there is a better way to do that (ideally without magic...).
>
> You have pretty much understood my use case for position increment 0 - but
> I
> thought this is possible to do with customizing a Scorer? I haven't gotten
> that deep into Lucene myself (yet)...
> I'm not entirely sure I understand the consequences of storing more than
> one
> Term in the same position. What I understood from your explanation is that
> if I store both "b" and "c" at the same position x, Lucene will get to x
> for
> both "b" and "c", meaning this could save me query inflation, or as I
> first
> suggested, auto-apply synonyms. The only question is, I guess, are there
> any
> drawbacks for using this?
>
> Thanks.
>
> Itamar.
>
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: Monday, March 31, 2008 4:25 PM
> To: java-user@lucene.apache.org
> Subject: Re: setPositionIncrement questions
>
> See below...
>
> On Mon, Mar 31, 2008 at 7:02 AM, Itamar Syn-Hershko <
> itamar@divrei-tora.com>
> wrote:
>
> >
> > Chris,
> >
> > Thanks for your input.
> >
> > Please let me make sure that I get this right: while iterating through
> > the words in a document, I can use my tokenizer to
> > setPositionIncrement(150) on a specific token, what would make it be
> > more distant from the previous token than it should have been. The
> > next token will already have position increment of 1 and therefore
> > will immediately follow that token, with no extra handling. If I get
> > this right, the best way to achieve that is by appending a predefined
> > string like $$$, such that will not occur accidently in my documents,
> > and have my tokenizer set the position increment as well instead of
> > just tokenizing upon it.
>
>
> Not really. Somewhere in the indexing code is something that behaves like
> this...
>
> say you have the following lines...
> doc.add("field", "word1 word2 word3", blah, blah) doc.add("field", "word4
> word5 word6", blah, blah) doc.add("field", "word7 word8 word9", blah,
> blah)
> IndexWriter.add(doc).
>
> Now say your analyzer returns 100 for getPositionIncrementGap. The words
> will have the following offsets
> word1 - 0
> word2 - 1
> word3 - 2
> word4 - 103 (perhaps 102, but you get the idea)
> word5 - 104
> word6 - 105
> word7 - 206
> word8 - 207
> word9 - 208
>
> There's no need to have any special tokens for this to occur.
>
>
> >
> >
> > >>>  Lucene will call the "getPositionIncrementGap" method on your
> > Analyzer
> > to determine how much positionIncreiment to put in between the last
> > token of the first Field and the first token of the second Field -- so
> > you could just pass each paragraph as a seperate Field instance
> >
> > This sounds good, but is risky, since I will have to concatenate my
> > paragraphs that I DO want to have proximity data in between, and if I
> > forget to, or accidently don't do that this will corrupt
> > proximity-based searches.
> > My documents can become very big as well. I guess what I was looking
> > for was a simpler way - say tell Lucene when I do doc.add(new Field)
> > to set the position increment for the last token. The "magic char
> > sequence" will do, but I was wondering if there is a way to do that
> > without ammending my Tokenizer?
> >
>
> No, you must deal with your tokenizer, but this is pretty trivial. You can
> simply subclass whichever one you choose and override
> getPositionIncrementGap.
>
> This seems no riskier that adding your special token since you have to
> deal
> with differentiating between paragraphs you *do* want to be adjacent and
> ones you *don't* in that case as well. Or am I missing something?
>
> As to size of documents, somewhere you do need to worry about exceeding a
> position of 2^31, but if that's really an issue you have other problems
> <G>.
> Although this somewhat depends upon how far you need the paragraphs to be
> apart. Are you going to allow proximity searches of 10,000,000? Or 10?
>
>
>
> >
> > >>> it means the words appear at the same position
> >
> > ... And what does this mean exactly? How can this affect standard
> > searches?
> > What I might do with this is store stems side-by-side with the
> > original word. From what I've heard so far this is NOT how you do this
> > for English texts - you rather store them in a different field, why is
> > that? I thought if you store them side-by-side you could write a
> > Scorer (or similar) that will return all relevant results for the stem
> > of a given word, boosting words with the same exact syntax more than
> others. Any ideas on that?
> >
>
> I don't really understand what you're trying to accomplish, a use case
> would
> help. So this may be totally off base....
>
> the words "in the same position" means that if you store, say, blivet and
> blort at the same position, and the next token is bonkers, then the
> following two matches will be found:
> "blivet bonkers" "blort bonkers" (these are as exact pharses). You can
> answer much of this by getting a copy of Luke and examining test indexes
> you
> build.
>
> To boost exact matches, you have to do some fancy dancing. For instance,
> you
> could store the original word with a special token (say $) at the end, and
> *also* the
> stemmed version at the same position. Then you have to mangle your queries
> to produce something like (word$^10 OR <stemmed version of word>) for each
> search term.
>
> Best
> Erick
>
>
>
> >
> > Itamar.
> >
> > -----Original Message-----
> > From: Chris Hostetter [mailto:hossman_lucene@fucit.org]
> > Sent: Sunday, March 30, 2008 8:56 AM
> > To: Lucene Users
> > Subject: Re: setPositionIncrement questions
> >
> >
> > : Breaking proximity data has been discussed several times before, and
> > : concluded that setPositionIncrement is the way to go. In regards of
> it:
> > :
> > : 1. Where should it be called exactly to create the gap properly?
> >
> > any part of your Analyzer can set the position increment on any token
> > to indicate how far after the previous token it should be.
> >
> > : 2. Is there a way to call it directly somehow while indexing (e.g.
> > after
> > : adding a new paragraph to an existing field) instead of appending
> > $$$
> > : for example after the new string I'm indexing, and having to update
> > my
> > : tokenizer and filters so they will retain the $$$ chars, indicating
> > the
> > : gap request?
> >
> > if you add multiple Fields with the same name, Lucene will call the
> > "getPositionIncrementGap" method on your Analyzer to determine how
> > much positionIncreiment to put in between the last token of the first
> > Field and the first token of the second Field -- so you could just
> > pass each paragraph as a seperate Field instance .. alternately you
> > can have a single Field instance, and your Analyzer can use whatever
> > mechanims it wants to decide to set the position incriment to
> > something high (a line break, a magic char sequence you put in the
> > string, ... whatever you want)
> >
> > : 3. What is the recommended value to pass setPositionIncrement to
> > create
> > : a reasonable gap, and not risk large documents being indexed
> > improperly
> > : (I mean, is there some sort of high-bound for the position value?).
> >
> > MAX_INT .. pick gaps based on your data and the queries you expect (if
> > you want gaps betwen paragraps, and your paragraphs tend to be under
> > 200 words long, make the gap 500 so "lucene java"~300 can find those
> > words in the same paragram, but can never span multiple paragraphs
> >
> > : 4. What are the consequences of setting PositionIncrement to 0? Does
> > : this mean I can index synonyms or stems aside of the "real" words
> > : without risking data corruption?
> >
> > it means the words appear at the same position - synonyms is a great
> > example of this use case.
> >
> >
> > -Hoss
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_14658_14137298.1207055970059--

From java-user-return-33417-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 01 13:34:22 2008
Return-Path: <java-user-return-33417-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64092 invoked from network); 1 Apr 2008 13:34:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Apr 2008 13:34:22 -0000
Received: (qmail 79740 invoked by uid 500); 1 Apr 2008 13:34:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79715 invoked by uid 500); 1 Apr 2008 13:34:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79704 invoked by uid 99); 1 Apr 2008 13:34:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Apr 2008 06:34:14 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=MIME_BASE64_BLANKS,MIME_BASE64_TEXT,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chee.wu@gmail.com designates 66.249.90.182 as permitted sender)
Received: from [66.249.90.182] (HELO ik-out-1112.google.com) (66.249.90.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Apr 2008 13:33:32 +0000
Received: by ik-out-1112.google.com with SMTP id c28so486702ika.5
        for <java-user@lucene.apache.org>; Tue, 01 Apr 2008 06:33:43 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:from:to:references:subject:date:mime-version:content-type:content-transfer-encoding:x-priority:x-msmail-priority:x-mailer:x-mimeole;
        bh=MlsW6JTeEc1pLJdFvRRSJ/Sbhy/+ehii2AJpP4OgaaI=;
        b=FKMHt2spC6e16CWRN+ffkGGRoS4t2BAW0w0vatpFxpisp1wByaXOXfRjK7Um6gTwMzpBZrndCuMeAH7eUFhefy5r8Ka/hLKszElZFDEP600VS0IdtjJCs9Mv1sL7ewRuYdNy8s4rYG/3rw4xYeO9gJC8NTaeQTWBK7Wgy+stdGA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:from:to:references:subject:date:mime-version:content-type:content-transfer-encoding:x-priority:x-msmail-priority:x-mailer:x-mimeole;
        b=Snoa2nsh+k1qRqHOXRosfvMUlSovXXJv0O5wizOqPQWLl815Z/NoDK8koAFnlSgoGFKY9S0n5Ln5tZA++oXwoGB/TurwsXFdMg+uJZPcrOpENgvFX1e1C2yPev8WI2fnS+tC0BDvC+2dKiG/hZHs4q4alxudLpJuXDsrTJADgyw=
Received: by 10.142.241.10 with SMTP id o10mr4689188wfh.155.1207056821845;
        Tue, 01 Apr 2008 06:33:41 -0700 (PDT)
Received: from wuqi ( [125.34.7.246])
        by mx.google.com with ESMTPS id 22sm11479150wfg.15.2008.04.01.06.33.37
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 01 Apr 2008 06:33:40 -0700 (PDT)
Message-ID: <008601c893fc$c35f3f20$7f00a8c0@wuqi>
From: "wuqi" <chee.wu@gmail.com>
To: <java-user@lucene.apache.org>
References: <20080401122943.503CC8D31D@chico.albert-inc.com>
Subject: Re: Problems about using Lucene to generate tag cloud..
Date: Tue, 1 Apr 2008 21:31:52 +0800
MIME-Version: 1.0
Content-Type: text/plain;
	charset="ISO-8859-1"
Content-Transfer-Encoding: base64
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
X-Virus-Checked: Checked by ClamAV on apache.org

SSByZWdpc3RlcmVkIG15c2VsZiBqdXN0IG5vdywgYW4gaW50ZXJlc3Rpbmcgd2Vic2l0ZS4gDQpJ
dCBzZWVtcyBjcm9zc2ZlZWRzIGdlbmVyYXRlIGEgdGFnIGNsb3VkIG9mZmxpbmUgaG91cmx5ID8g
QnV0IEkgaGF2ZSBhIG1vcmUgc3RyaWN0IHRpbWUgcmVxdWlyZW1lbnQuIHVzZXIgc3VibWl0IGEg
cXVlcnkgaW4gbXkgd2Vic2l0ZSwgYW5kIHRoZXkgbWF5IGdldCAgdGVucyBvZiB0aG91c2FuZHMg
b2YgIHNlYXJjaCByZXN1bHRzLiBJIG5lZWQgdG8gZ2VuZXJhdGUgYSB0YWcgY2xvdWQgZm9yIGFs
bCB0aGVzZSBkb2N1bWVudCByZXR1cm5lZCBqdXN0IGR1cmluZyBzZWNvbmRzIG9mIHRpbWUuDQpJ
IHRoaW5rIHlvdXIgc29sdXRpb24gbWlnaHQgIGNhbiBmdWxmaWxsIHRoaXMsaWYgIHRoZSBpbmRl
eGluZyBwcm9jZXNzIGFuZCB0ZXJtIG9yZGVyaW5nIHByb2Nlc3Mgd2VyZSAgdG90YWxseSBmaW5p
c2ggaW4gbWVtb3J5Li4NCg0KDQotLS0tLSBPcmlnaW5hbCBNZXNzYWdlIC0tLS0tIA0KRnJvbTog
IkRvbWluaXF1ZSBC6WplYW4iIDxkb21pbmlxdWUuYmVqZWFuQGVvbHlhLmZyPg0KVG86IDxqYXZh
LXVzZXJAbHVjZW5lLmFwYWNoZS5vcmc+DQpTZW50OiBUdWVzZGF5LCBBcHJpbCAwMSwgMjAwOCA4
OjMwIFBNDQpTdWJqZWN0OiBSRTogUHJvYmxlbXMgYWJvdXQgdXNpbmcgTHVjZW5lIHRvIGdlbmVy
YXRlIHRhZyBjbG91ZC4uDQoNCg0KT24gd3d3LmNyb3NzZmVlZHMuY29tLCBJIHVzZSB0aGlzIG1l
dGhvZCBpbiBvcmRlciB0byB1cGRhdGUgaG91cmx5IGEgdGFnDQpjbG91ZCBiYXNlZCBvbiB0aGUg
dGl0bGUgb2YgMjAuMDAwIFJTUyBhcnRpY2xlcyAoUlNTIHB1Ymxpc2hlZCBkdXJpbmcgdGhlDQps
YXN0IDI0IGhvdXJzKS4gSXQgdGFrZXMgMSBtaW51dGUuDQogDQoNCi0tLS0tTWVzc2FnZSBkJ29y
aWdpbmUtLS0tLQ0KRGUgOiB3dXFpIFttYWlsdG86Y2hlZS53dUBnbWFpbC5jb21dIA0KRW52b3np
IDogbWFyZGkgMSBhdnJpbCAyMDA4IDE0OjEwDQrAIDogamF2YS11c2VyQGx1Y2VuZS5hcGFjaGUu
b3JnDQpPYmpldCA6IFJlOiBQcm9ibGVtcyBhYm91dCB1c2luZyBMdWNlbmUgdG8gZ2VuZXJhdGUg
dGFnIGNsb3VkLi4NCg0Kc28gYnVpbGQgIGEgaW5kZXggZm9yIHRoZSBkeW5hbWljYWxseSBnZW5l
cmF0ZWQgZG9jdWNlbWVudHMgc2V0ICxhbmQgdGhlbg0KdHJ5IHRvIGZpbmQgZnJlcXVlbmN5IGZv
ciBlYWNoIHRlcm1zIGluIHRoaXMgaW5kZXguLi4gbm90IHN1cmUgaXQncyBmYXN0DQplbm91Zy5i
dXQgaXQncyB3b3J0aCB0byBoYXZlIGEgdHJ5Li4uDQpUaGFuayB5b3UgIERvaW5pcXVlIQ0KLS0t
LS0gT3JpZ2luYWwgTWVzc2FnZSAtLS0tLSANCkZyb206ICJEb21pbmlxdWUgQulqZWFuIiA8ZG9t
aW5pcXVlLmJlamVhbkBlb2x5YS5mcj4NClRvOiA8amF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3Jn
Pg0KU2VudDogVHVlc2RheSwgQXByaWwgMDEsIDIwMDggMzo1MSBQTQ0KU3ViamVjdDogUkU6IFBy
b2JsZW1zIGFib3V0IHVzaW5nIEx1Y2VuZSB0byBnZW5lcmF0ZSB0YWcgY2xvdWQuLg0KDQoNCk1h
eSBiZSB5b3UgY2FuIGluZGV4IHRoZSBzZXQgb2YgZG9jdW1lbnRzIGluIGEgdGVtcG9yYXJ5IGlu
ZGV4LiBUaGlzIGluZGV4DQpuZWVkcyBvbmx5IG9uZSBmaWVsZCAodGFnKS4NCg0KVGhlbiB5b3Ug
Y2FuIGJyb3dzZSB0aGUgdGVybXMgY29sbGVjdGlvbiBvZiB0aGUgaW5kZXggYW5kIGdldCBlYWNo
IGNvdXBsZQ0KdGVybS9mcmVxdWVuY3kgDQoNCiAgICAgICAgSW5kZXhSZWFkZXIgcmVhZGVyID0g
SW5kZXhSZWFkZXIub3Blbih0ZW1wX2luZGV4KTsNCiAgICAgICAgVGVybUVudW0gdGVybXMgPSBy
ZWFkZXIudGVybXMoKTsNCg0KICAgICAgICB3aGlsZSAodGVybXMubmV4dCgpKSB7DQogICAgICAg
ICAgICBTdHJpbmcgZmllbGQgPSB0ZXJtcy50ZXJtKCkuZmllbGQoKTsNCg0KICAgICAgICAgICAg
aWYgKCEidGFnIi5lcXVhbHMoZmllbGQpKSBjb250aW51ZTsNCg0KICAgICAgICAgICAgU3RyaW5n
IHRlcm0gPSB0ZXJtcy50ZXJtKCkudGV4dCgpOw0KICAgICAgICAgICAgaW50IGZyZXEgPSB0ZXJt
cy5kb2NGcmVxKCk7DQogICAgICAgIH0NCg0KICAgICAgICB0ZXJtcy5jbG9zZSgpOw0KICAgICAg
ICByZWFkZXIuY2xvc2UoKTsNCg0KDQoNCi0tLS0tTWVzc2FnZSBkJ29yaWdpbmUtLS0tLQ0KRGUg
OiB3dXFpIFttYWlsdG86Y2hlZS53dUBnbWFpbC5jb21dIA0KRW52b3npIDogbHVuZGkgMzEgbWFy
cyAyMDA4IDA5OjA3DQrAIDogamF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnDQpPYmpldCA6IFBy
b2JsZW1zIGFib3V0IHVzaW5nIEx1Y2VuZSB0byBnZW5lcmF0ZSB0YWcgY2xvdWQuLg0KDQpIaSwN
CkkgYW0gdHJ5aW5nIHRvIHVzZSBMdWNlbmUgaW5kZXggdG8gaW1wbGVtZW50IGEgdGFnIGNsb3Vk
ICBzeXN0ZW0uIEkgYWRkIGENCm5ldyBmaWVsZCAgbmFtZWQgInRhZ3MiIGluIGluZGV4IHRvICBz
dG9yZSBhbGwgdGhlIHRhZ3MsYW5kIHdlIGRvbid0IHN1cHBvcnQNCnRhZ3Mgd2l0aCBtb3JlIHRo
YW4gb25lIHdvcmQsIHNvIGRpZmZlcmVudCB0YWdzIG9mIHRoZSBzYW1lIGRvY3VtZW50IGp1c3QN
CmFyZSBzZXBhcmF0ZSBieSB3aGl0ZSBzcGFjZS4gIFRoZSAidGFncyIgZmlsZWQgaW4gb25lIGRv
Y3VtZW50ICBtYXkgbG9va3MNCmxpa2UgdGhpcyA6DQpkb2MxICB0YWdzIDogdHJhdmVsIEJlaWpp
bmcgIG5ld3MNCmRvYzIgIHRhZ3M6ICBiZWlqaW5nIHNwb3J0cyBuZXdzDQpJIGNhbiBlYXNpbHkg
cmV0cmlldmUgdGFncyByZWxhdGVkIHdpdGggc2luZ2xlIGRvY3VtZW50LGFuZCBhbHNvIGdldCB0
aGUNCmRvY3VtZW50cyByZWxhdGVkIHdpdGggY2VydGFpbiB0YWcsIGJ1dCBpdCdzIGhhcmQgIGZp
bmQgYSAiZWZmaWNpZW50IiB3YXkgdG8NCmdldCBmcmVxdWVudCB0YWdzICBmcm9tIGEgInNldCIg
b2YgZG9jdW1lbnRzIG9mIHRoaXMgaW5kZXguVHRoZSBzZXQgb2YgdGhlDQpkb2N1bWVudHMgaXMg
YWx3YXlzIGdlbmVyYXRlZCBkeW5hbWljYWxseSwgbWF5IGJlIGEgc2VhcmNoIHJlc3VsdCwgYQ0K
ZHluYW1pY2FsbHkgZ2VuZXJhdGVkIGNhdGVnb3J5IHRocm91Z2ggY2x1c3RlcmluZy4gVGhlIGRv
Y3VtZW50IHNldCBpcyB2ZXJ5DQpsYXJnZSwgbWF5YmUgc2V2ZXJhbCB0ZW4gdGhvdXNhbmRzIG9y
IHNldmVyYWwgaHVuZHJlZCB0aG91c2FuZHMuU28gc2ltcGx5DQppdGVyYXRlIGFsbCAgdGhlIGRv
Y3VtZW50cyBpbiB0aGUgc2V0IGFuZCBmaW5kIHRoZSBmcmVxdWVudCB0YWdzIG1pZ2h0IG5vdA0K
YmUgYXBwbGljYWJsZS5EbyB5b3UgaGF2ZSBhbnkgYmV0dGVyIGlkZWEgPw0KDQpUaGFua3MNCi1R
aQ0KDQoNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLQ0KVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVu
c3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnDQpGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1t
YWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZw0KDQoNCi0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0K
VG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFj
aGUub3JnDQpGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBs
dWNlbmUuYXBhY2hlLm9yZw0K



From java-user-return-33418-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 01 16:15:22 2008
Return-Path: <java-user-return-33418-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74280 invoked from network); 1 Apr 2008 16:15:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Apr 2008 16:15:22 -0000
Received: (qmail 72801 invoked by uid 500); 1 Apr 2008 16:15:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72775 invoked by uid 500); 1 Apr 2008 16:15:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72764 invoked by uid 99); 1 Apr 2008 16:15:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Apr 2008 09:15:14 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Apr 2008 16:14:33 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Jgj8G-0008Ma-L9
	for java-user@lucene.apache.org; Tue, 01 Apr 2008 09:14:44 -0700
Message-ID: <16418709.post@talk.nabble.com>
Date: Tue, 1 Apr 2008 09:14:44 -0700 (PDT)
From: 021336 <smith_brad@bah.com>
To: java-user@lucene.apache.org
Subject: Controlling index file name
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: smith_brad@bah.com
X-Virus-Checked: Checked by ClamAV on apache.org


We use Lucene to create simple data stores that we deploy with our
application.  Our application also supports auto-updating and we refresh
these data stores monthly.  Since Lucene computes the names for the index we
end up deploying new files each time while leaving the old files to continue
taking up space needlessly.

The options I see to resolve this are:
- After each update check all the data store locations and delete CFS files
that have a date earlier then the Segments files, or
- Create the index files with a consistent name so that we overwrite
existing files with new files during each auto-update.

I found one thread discussing this using "AddIndexes" but I could not follow
it through to implementation.  Also, we are using Java 1.4 not 1.5.

Any suggestions?


-- 
View this message in context: http://www.nabble.com/Controlling-index-file-name-tp16418709p16418709.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33419-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 01 16:58:55 2008
Return-Path: <java-user-return-33419-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95775 invoked from network); 1 Apr 2008 16:58:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Apr 2008 16:58:54 -0000
Received: (qmail 39697 invoked by uid 500); 1 Apr 2008 16:58:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39664 invoked by uid 500); 1 Apr 2008 16:58:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39653 invoked by uid 99); 1 Apr 2008 16:58:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Apr 2008 09:58:48 -0700
X-ASF-Spam-Status: No, hits=-2.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of gresh@us.ibm.com designates 32.97.182.145 as permitted sender)
Received: from [32.97.182.145] (HELO e5.ny.us.ibm.com) (32.97.182.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Apr 2008 16:57:56 +0000
Received: from d01relay04.pok.ibm.com (d01relay04.pok.ibm.com [9.56.227.236])
	by e5.ny.us.ibm.com (8.13.8/8.13.8) with ESMTP id m31GwG5T011007
	for <java-user@lucene.apache.org>; Tue, 1 Apr 2008 12:58:16 -0400
Received: from d01av01.pok.ibm.com (d01av01.pok.ibm.com [9.56.224.215])
	by d01relay04.pok.ibm.com (8.13.8/8.13.8/NCO v8.7) with ESMTP id m31GwGPm038254
	for <java-user@lucene.apache.org>; Tue, 1 Apr 2008 12:58:16 -0400
Received: from d01av01.pok.ibm.com (loopback [127.0.0.1])
	by d01av01.pok.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id m31GwGLx005989
	for <java-user@lucene.apache.org>; Tue, 1 Apr 2008 12:58:16 -0400
Received: from d01ml605.pok.ibm.com (d01ml605.pok.ibm.com [9.56.227.91])
	by d01av01.pok.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id m31GwG37005986
	for <java-user@lucene.apache.org>; Tue, 1 Apr 2008 12:58:16 -0400
To: java-user@lucene.apache.org
MIME-Version: 1.0
Subject: intuitive explanation for what seems like odd result?
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
From: Donna L Gresh <gresh@us.ibm.com>
Message-ID: <OFFE4F4488.985FBE89-ON8525741E.005C887F-8525741E.005D25EB@us.ibm.com>
Date: Tue, 1 Apr 2008 12:58:14 -0400
X-MIMETrack: Serialize by Router on D01ML605/01/M/IBM(Release 8.0|August 02, 2007) at 04/01/2008
 12:58:15,
	Serialize complete at 04/01/2008 12:58:15
Content-Type: multipart/alternative; boundary="=_alternative 005D23BD8525741E_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 005D23BD8525741E_=
Content-Type: text/plain; charset="US-ASCII"

I have two slightly different queries, and am filtering to return only a 
single unique document. The scores are very slightly different, but in the 
opposite way from what my (naive) reasoning would have expected.

In the first case the query is
text:"j2ee"^2.0, text:"soa"^2.0, text:webservic, text:db2

Note that there are two boosted terms and two unboosted terms. The 
document, in fact, contains only the terms "db2" and "soa", and note that 
db2 is an unboosted term.
The score is 0.069.

The second query is
text:"db2"^2.0, text:"j2ee"^2.0, text:"soa"^2.0, text:webservic

In this case there are three boosted terms and one unboosted term. Note 
that now both db2 and soa are "boosted".
The score is 0.065, which is slightly smaller, which is the opposite of 
what I would expect, since I have two boosted terms now instead of just 
one.

Looking at the explanation object, the difference is entirely due to the 
queryNorm factor (which explain doesn't really "go into"). 
My next step is to get the Lucene source and try to step through to 
determine why queryNorm is larger in the first case than the second, but I 
was wondering if anyone out there can give a simple explanation for why it 
would differ for these two queries. I use the DefaultSimilarity class.

Many thanks in advance--
Donna 


Donna L. Gresh
Services Research, Mathematical Sciences Department
IBM T.J. Watson Research Center
(914) 945-2472
http://www.research.ibm.com/people/g/donnagresh
gresh@us.ibm.com

--=_alternative 005D23BD8525741E_=--

From java-user-return-33420-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 01 18:08:25 2008
Return-Path: <java-user-return-33420-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35559 invoked from network); 1 Apr 2008 18:08:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Apr 2008 18:08:24 -0000
Received: (qmail 53804 invoked by uid 500); 1 Apr 2008 18:08:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53606 invoked by uid 500); 1 Apr 2008 18:08:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53594 invoked by uid 99); 1 Apr 2008 18:08:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Apr 2008 11:08:17 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 209.85.134.190 as permitted sender)
Received: from [209.85.134.190] (HELO mu-out-0910.google.com) (209.85.134.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Apr 2008 18:07:33 +0000
Received: by mu-out-0910.google.com with SMTP id g7so3648218muf.0
        for <java-user@lucene.apache.org>; Tue, 01 Apr 2008 11:07:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=Uh+tubXg1eTkRM7/MUOczb3vYgzaeneJTCEi7yhdJkM=;
        b=ANPmQ+V5KCElPdIVOjIEI9iFBY3nrcDkPYp6+gQ09eUpUGNSFFag3lvSfDOS52bmAKOLPNK75dK7TWDNZkgz/gDpMq73a/stoVOegH1F2hsjF15t579WvtMuHUUz3vS8g6APX8i5xRqlKQwm2cEMJb+SF6GiAAJDmfC6YE8peBI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=J8ME9nQtNHiieF4k0lMmW2ciw1Xi17d8klchw/1NAw0Y3O/bbNQbHR7q/fnv32Ah2WAASpYhyAciVzVjr95UIaen35UQC3XsFfLJW3YiAOi05Lacs5A7upTeq5cP5jdRZaUG9xmYTeWR68o1625nBZq2Rn9b22UJ2yl8qvcXSY8=
Received: by 10.78.204.1 with SMTP id b1mr23926529hug.42.1207073264213;
        Tue, 01 Apr 2008 11:07:44 -0700 (PDT)
Received: from kodapan.local ( [82.93.70.124])
        by mx.google.com with ESMTPS id j9sm1150961mue.6.2008.04.01.11.07.42
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 01 Apr 2008 11:07:43 -0700 (PDT)
Message-ID: <47F279EC.1090608@gmail.com>
Date: Tue, 01 Apr 2008 20:07:40 +0200
From: Karl Wettin <karl.wettin@gmail.com>
User-Agent: Thunderbird 2.0.0.12 (Macintosh/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: stemming in Lucene
References: <329a6c830804010258jd8df420lcf0f777df9fc36f3@mail.gmail.com>
In-Reply-To: <329a6c830804010258jd8df420lcf0f777df9fc36f3@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Wojtek H skrev:
> Snowball stemmers are part of Lucene, but for few languages only. We

org.apache.lucene.analysis contains a few more stemmers.

> have documents in various languages and so need stemmers for many
> languages (in particular polish).

Have you seen Stempel?

http://www.getopt.org/stempel/



       karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33421-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 01 18:34:26 2008
Return-Path: <java-user-return-33421-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53984 invoked from network); 1 Apr 2008 18:34:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Apr 2008 18:34:26 -0000
Received: (qmail 92687 invoked by uid 500); 1 Apr 2008 18:34:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92649 invoked by uid 500); 1 Apr 2008 18:34:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92638 invoked by uid 99); 1 Apr 2008 18:34:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Apr 2008 11:34:18 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Apr 2008 18:33:36 +0000
Received: by ug-out-1314.google.com with SMTP id u40so212300ugc.29
        for <java-user@lucene.apache.org>; Tue, 01 Apr 2008 11:33:46 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=uzn5xNYIrC5t2XwXJqMgcfNtISL+U5Dlr01fDMbNxdo=;
        b=CBtRos7NZqDmLX2n+iUJxshEQgDmZAP/PzMo1vmLxvFbtTV0iigXiSvDvcHUvqTvxh0SyPuW3FgFAl+qHPM72pGr9Of24dTXtf3Qp5ej+N+I4QTfgI94+hipp1YrXBamk9RVajGZkhhmcp5fjGrZIptrbGbZHqdLRr5TPrbTzXI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=CmoKSdl9PwvB8VUpw+69g9OKxP37Ka6H5EDrHgiMUCl1lYNUqOd1G1vOJtO/mm71klfA4vfC8qRdpanbj6p38dJfh9PO12QIPiJJy6lM0xkz20IpbMm2RvCCEkqefBpyVVfZh1PBwxTKh+dgCdMDblggSQfqebLCpIllp1ZRMb0=
Received: by 10.78.146.11 with SMTP id t11mr26449526hud.70.1207074826145;
        Tue, 01 Apr 2008 11:33:46 -0700 (PDT)
Received: from kodapan.local ( [82.93.70.124])
        by mx.google.com with ESMTPS id w5sm1285321mue.2.2008.04.01.11.33.44
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 01 Apr 2008 11:33:45 -0700 (PDT)
Message-ID: <47F28006.2060502@gmail.com>
Date: Tue, 01 Apr 2008 20:33:42 +0200
From: Karl Wettin <karl.wettin@gmail.com>
User-Agent: Thunderbird 2.0.0.12 (Macintosh/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: intuitive explanation for what seems like odd result?
References: <OFFE4F4488.985FBE89-ON8525741E.005C887F-8525741E.005D25EB@us.ibm.com>
In-Reply-To: <OFFE4F4488.985FBE89-ON8525741E.005C887F-8525741E.005D25EB@us.ibm.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Donna L Gresh skrev:
> I have two slightly different queries,

Hi Donna,

I can't help you, but perhaps I would understand everthing better if you 
also pasted in the explanations.



      karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33422-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 01 18:59:15 2008
Return-Path: <java-user-return-33422-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63444 invoked from network); 1 Apr 2008 18:59:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Apr 2008 18:59:15 -0000
Received: (qmail 34307 invoked by uid 500); 1 Apr 2008 18:59:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34276 invoked by uid 500); 1 Apr 2008 18:59:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34265 invoked by uid 99); 1 Apr 2008 18:59:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Apr 2008 11:59:08 -0700
X-ASF-Spam-Status: No, hits=-2.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of gresh@us.ibm.com designates 32.97.182.141 as permitted sender)
Received: from [32.97.182.141] (HELO e1.ny.us.ibm.com) (32.97.182.141)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Apr 2008 18:58:15 +0000
Received: from d01relay04.pok.ibm.com (d01relay04.pok.ibm.com [9.56.227.236])
	by e1.ny.us.ibm.com (8.13.8/8.13.8) with ESMTP id m31IwXml029053
	for <java-user@lucene.apache.org>; Tue, 1 Apr 2008 14:58:33 -0400
Received: from d01av05.pok.ibm.com (d01av05.pok.ibm.com [9.56.224.195])
	by d01relay04.pok.ibm.com (8.13.8/8.13.8/NCO v8.7) with ESMTP id m31IwXk7291330
	for <java-user@lucene.apache.org>; Tue, 1 Apr 2008 14:58:33 -0400
Received: from d01av05.pok.ibm.com (loopback [127.0.0.1])
	by d01av05.pok.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id m31IsxT9001757
	for <java-user@lucene.apache.org>; Tue, 1 Apr 2008 14:54:59 -0400
Received: from d01ml605.pok.ibm.com (d01ml605.pok.ibm.com [9.56.227.91])
	by d01av05.pok.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id m31IsxaH001753
	for <java-user@lucene.apache.org>; Tue, 1 Apr 2008 14:54:59 -0400
In-Reply-To: <47F28006.2060502@gmail.com>
To: java-user@lucene.apache.org
MIME-Version: 1.0
Subject: Re: intuitive explanation for what seems like odd result?
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
From: Donna L Gresh <gresh@us.ibm.com>
Message-ID: <OFD06D313D.090A1937-ON8525741E.00673A1D-8525741E.006828CA@us.ibm.com>
Date: Tue, 1 Apr 2008 14:58:30 -0400
X-MIMETrack: Serialize by Router on D01ML605/01/M/IBM(Release 8.0|August 02, 2007) at 04/01/2008
 14:58:32,
	Serialize complete at 04/01/2008 14:58:32
Content-Type: multipart/alternative; boundary="=_alternative 0068285D8525741E_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 0068285D8525741E_=
Content-Type: text/plain; charset="US-ASCII"

Sure; here are the two explanations (below). Your question made me go look 

at the explanation more carefully again and (no) surprise, I discovered 
that I 
misspoke (miswrote) earlier; the two "found" terms are j2ee and soa, 
which then makes my "concern" much less of one, since in both cases, the 
"found" terms *are*
being boosted. So the very slight difference in score is not much to be 
concerned about.

So I guess, "never mind". I did step through all the code and now have a 
much better 
understanding of the steps involved in calcuating the score---
Thanks


First the one for the query with db2 NOT boosted
clauses= [text:"j2ee"^2.0, text:"soa"^2.0, text:webservic, text:db2] 
"explanation.toString()"= "0.06920814 = (MATCH) product of:\n
  0.13841628 = (MATCH) sum of:\n
    0.04483024 = (MATCH) weight(text:j2ee^2.0 in 13588), product of:\n
      0.50752115 = queryWeight(text:j2ee^2.0), product of:\n
        2.0 = boost\n
        3.230419 = idf(docFreq=3719, numDocs=34610)\n
        0.07855346 = queryNorm\n
      0.08833177 = (MATCH) fieldWeight(text:j2ee in 13588), product of:\n
        1.0 = tf(termFreq(text:j2ee)=1)\n
        3.230419 = idf(docFreq=3719, numDocs=34610)\n
        0.02734375 = fieldNorm(field=text, doc=13588)\n
    0.093586035 = (MATCH) weight(text:soa^2.0 in 13588), product of:\n
      0.7332873 = queryWeight(text:soa^2.0), product of:\n
        2.0 = boost\n
        4.667441 = idf(docFreq=883, numDocs=34610)\n
        0.07855346 = queryNorm\n
      0.12762533 = (MATCH) fieldWeight(text:soa in 13588), product of:\n
        1.0 = tf(termFreq(text:soa)=1)\n
        4.667441 = idf(docFreq=883, numDocs=34610)\n
        0.02734375 = fieldNorm(field=text, doc=13588)\n
  0.5 = coord(2/4)\n" 

Here for the one with db2 boosted:
clauses= [text:"db2"^2.0, text:"j2ee"^2.0, text:"soa"^2.0, text:webservic] 

"explanation.toString()"= "0.06465748 = (MATCH) product of:\n
  0.12931496 = (MATCH) sum of:\n
    0.041882508 = (MATCH) weight(text:j2ee^2.0 in 13588), product of:\n
      0.47415 = queryWeight(text:j2ee^2.0), product of:\n
        2.0 = boost\n
        3.230419 = idf(docFreq=3719, numDocs=34610)\n
        0.073388316 = queryNorm\n
      0.08833177 = (MATCH) fieldWeight(text:j2ee in 13588), product of:\n
        1.0 = tf(termFreq(text:j2ee)=1)\n
        3.230419 = idf(docFreq=3719, numDocs=34610)\n
        0.02734375 = fieldNorm(field=text, doc=13588)\n
    0.087432444 = (MATCH) weight(text:soa^2.0 in 13588), product of:\n
      0.68507123 = queryWeight(text:soa^2.0), product of:\n
        2.0 = boost\n
        4.667441 = idf(docFreq=883, numDocs=34610)\n
        0.073388316 = queryNorm\n
      0.12762533 = (MATCH) fieldWeight(text:soa in 13588), product of:\n
        1.0 = tf(termFreq(text:soa)=1)\n
        4.667441 = idf(docFreq=883, numDocs=34610)\n
        0.02734375 = fieldNorm(field=text, doc=13588)\n
  0.5 = coord(2/4)\n" 

Donna L. Gresh
Services Research, Mathematical Sciences Department
IBM T.J. Watson Research Center
(914) 945-2472
http://www.research.ibm.com/people/g/donnagresh
gresh@us.ibm.com


Karl Wettin <karl.wettin@gmail.com> wrote on 04/01/2008 02:33:42 PM:

> Donna L Gresh skrev:
> > I have two slightly different queries,
> 
> Hi Donna,
> 
> I can't help you, but perhaps I would understand everthing better if you 

> also pasted in the explanations.
> 
> 
> 
>       karl
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

--=_alternative 0068285D8525741E_=--

From java-user-return-33423-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 01 21:59:02 2008
Return-Path: <java-user-return-33423-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57782 invoked from network); 1 Apr 2008 21:59:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Apr 2008 21:59:02 -0000
Received: (qmail 42892 invoked by uid 500); 1 Apr 2008 21:58:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42638 invoked by uid 500); 1 Apr 2008 21:58:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42627 invoked by uid 99); 1 Apr 2008 21:58:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Apr 2008 14:58:54 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Apr 2008 21:58:04 +0000
Received: from host68.syd.nuix.com.au (host68.syd.nuix.com.au [192.168.222.68])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id EC0AE4A888D
	for <java-user@lucene.apache.org>; Wed,  2 Apr 2008 08:58:37 +1100 (EST)
From: Daniel Noll <daniel@nuix.com>
Organization: Nuix Pty Ltd
To: java-user@lucene.apache.org
Subject: Re: Problems about using Lucene to generate tag cloud..
Date: Wed, 2 Apr 2008 08:57:52 +1100
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <20080401075127.365CD86CD5@chico.albert-inc.com>
In-Reply-To: <20080401075127.365CD86CD5@chico.albert-inc.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200804020857.53106.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Tuesday 01 April 2008 18:51:55 Dominique B=E9jean wrote:
>         IndexReader reader =3D IndexReader.open(temp_index);
>         TermEnum terms =3D reader.terms();
>
>         while (terms.next()) {
>             String field =3D terms.term().field();

Gotcha: after calling terms() it's already pointing at the first term.  So =
you=20
need to rewrite this as a do-while loop.

Possibly my least favourite feature of Lucene. :-(

Daniel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33424-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 02 04:52:23 2008
Return-Path: <java-user-return-33424-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12611 invoked from network); 2 Apr 2008 04:52:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Apr 2008 04:52:23 -0000
Received: (qmail 99569 invoked by uid 500); 2 Apr 2008 04:52:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99546 invoked by uid 500); 2 Apr 2008 04:52:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99535 invoked by uid 99); 2 Apr 2008 04:52:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Apr 2008 21:52:16 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Apr 2008 04:51:25 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Jguwp-00026A-Si
	for java-user@lucene.apache.org; Tue, 01 Apr 2008 21:51:44 -0700
Message-ID: <16442112.post@talk.nabble.com>
Date: Tue, 1 Apr 2008 21:51:43 -0700 (PDT)
From: Sebastin <sebasmtech@gmail.com>
To: java-user@lucene.apache.org
Subject: Lucene Compression
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sebasmtech@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi All,
       is there any possibility to create compression store for the
following types of string in lucene index store?


String str = "II0264.D05|00022745|ABCDE|03/01/2008 00:23:12|00035|
9840836588| 129382152520| 04F4243B600408|04F4243B600408|
|11919898456123|354943011025810L| "CPTBS2I"| "ABCD3E"|11|1234510003243219I|"


I try to store these fields as Field.Store.COMPRESSION  but it exceeds the
original size of the file?


-- 
View this message in context: http://www.nabble.com/Lucene-Compression-tp16442112p16442112.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33425-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 02 07:16:30 2008
Return-Path: <java-user-return-33425-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83768 invoked from network); 2 Apr 2008 07:16:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Apr 2008 07:16:30 -0000
Received: (qmail 50603 invoked by uid 500); 2 Apr 2008 07:16:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50563 invoked by uid 500); 2 Apr 2008 07:16:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50552 invoked by uid 99); 2 Apr 2008 07:16:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Apr 2008 00:16:22 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cedric.ho@gmail.com designates 209.85.146.178 as permitted sender)
Received: from [209.85.146.178] (HELO wa-out-1112.google.com) (209.85.146.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Apr 2008 07:15:41 +0000
Received: by wa-out-1112.google.com with SMTP id j40so3116096wah.11
        for <java-user@lucene.apache.org>; Wed, 02 Apr 2008 00:15:53 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        bh=TG5MYTxQkWgX4PbJG2tNXyikgxyK506SdYNrk2lbX/k=;
        b=FS6MNWKRt/8OG9Zx8uwkhBA3VGT8O3NkYUqvBbMSzns34hZrFR+reJQuCbH5qfOSnoabkLFMXcGCVJLydIjUWPzsgDkJvHLx6q6/WxVsCuQ6A09BuvysClMW8ByNeFe2IaybBQTszS7qdNNuIyJmsupbld1ElhpDOI8bJFKj1s8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=de5Q/t+19KS7EHbhZmRNOBP0PQl7irHvDpomQFe3r160H3qhmX7794ZAAcVjicmYTstrUrBREB4kNdYSbYuLvF8sF5iv9tsEM6Paf1KBFxHdJJjAyqZaIlTdKfFzWw5cfNjQwy5TDKmM5azkf8q6dUHtd0F3bCZAmNgck3GvngY=
Received: by 10.115.18.1 with SMTP id v1mr14174274wai.81.1207120553280;
        Wed, 02 Apr 2008 00:15:53 -0700 (PDT)
Received: by 10.114.156.18 with HTTP; Wed, 2 Apr 2008 00:15:53 -0700 (PDT)
Message-ID: <839ba01c0804020015h5d93d933i67839ad0b1e9e217@mail.gmail.com>
Date: Wed, 2 Apr 2008 15:15:53 +0800
From: "Cedric Ho" <cedric.ho@gmail.com>
To: java-user@lucene.apache.org
Subject: SpanQuery scoring seems different
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

It seems that SpanNearQuery doesn't consider the boosting of the nested terms:

  1.3333334 = (MATCH) weight(spanNear([content2MBM:morgan^4.0,
content2MBM:stanley^4.0], 2, true) in 11976), product of:
    2.0 = queryWeight(spanNear([content2MBM:morgan^4.0,
content2MBM:stanley^4.0], 2, true)), product of:
      2.0 = idf(content2MBM: morgan=13 stanley=4)
      1.0 = queryNorm
    0.6666667 = (MATCH) fieldWeight(content2MBM:spanNear([morgan^4.0,
stanley^4.0], 2, true) in 11976), product of:
      0.33333334 = tf(phraseFreq=0.33333334)
      2.0 = idf(content2MBM: morgan=13 stanley=4)
      1.0 = fieldNorm(field=content2MBM, doc=11976)


with a BooleanQuery the boosting is included in the score calculation

    ....
    4.0 = (MATCH) weight(content2MBM:stanley^4.0 in 11976), product of:
      4.0 = queryWeight(content2MBM:stanley^4.0), product of:
        4.0 = boost                 /* This Line is what I want */
        1.0 = idf(docFreq=4, numDocs=45619)
        1.0 = queryNorm
      1.0 = (MATCH) fieldWeight(content2MBM:stanley in 11976), product of:
        1.0 = tf(termFreq(content2MBM:stanley)=1)
        1.0 = idf(docFreq=4, numDocs=45619)
        1.0 = fieldNorm(field=content2MBM, doc=11976)

I previously assume boost is calculated in all queries.
I am using 2.3.0.

Cedric

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33426-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 02 07:30:24 2008
Return-Path: <java-user-return-33426-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87539 invoked from network); 2 Apr 2008 07:30:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Apr 2008 07:30:24 -0000
Received: (qmail 58741 invoked by uid 500); 2 Apr 2008 07:30:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58712 invoked by uid 500); 2 Apr 2008 07:30:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58701 invoked by uid 99); 2 Apr 2008 07:30:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Apr 2008 00:30:16 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cedric.ho@gmail.com designates 209.85.146.176 as permitted sender)
Received: from [209.85.146.176] (HELO wa-out-1112.google.com) (209.85.146.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Apr 2008 07:29:34 +0000
Received: by wa-out-1112.google.com with SMTP id j40so3121624wah.11
        for <java-user@lucene.apache.org>; Wed, 02 Apr 2008 00:29:46 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=Cpa1JCzr1DyTU7tylDtBqm3S+yaIxorvPVbfckqwg6E=;
        b=loyAjOGOOpSMBn12MUczAhWtrwzXyNzMNTy35uyjs/txgo1jmU4Qk6UykN6XqoBUGW8D7ZE17clM9tjNa4UbKBaemA0w/M0rSihdeZLzfT58DL8fFSCBnC7z35v3PJa0AarXHQfsM1gy0/1EVmmKUf6Dx4MddQ8q5KIHr6pYSKA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=ePnpLblVRpXKwdFnmYsaBPMrtXR6c2MTPvCytuH1WgH8E6jYLyozr4CXZV/X+XDie6+Mqlvx2VzdtWLdPS8lCFyGzcF5MZndp3YmO7R6ASfBtE3cy/QCLZN/WogS9YRIGY5LFbJiY6snc4iskn2G0wdcVuKwEmlkTuW/KnkmdeQ=
Received: by 10.114.25.3 with SMTP id 3mr14241624way.22.1207121386735;
        Wed, 02 Apr 2008 00:29:46 -0700 (PDT)
Received: by 10.114.156.18 with HTTP; Wed, 2 Apr 2008 00:29:46 -0700 (PDT)
Message-ID: <839ba01c0804020029h494d892tc8a3ccc9f3962f49@mail.gmail.com>
Date: Wed, 2 Apr 2008 15:29:46 +0800
From: "Cedric Ho" <cedric.ho@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: SpanQuery scoring seems different
In-Reply-To: <839ba01c0804020015h5d93d933i67839ad0b1e9e217@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <839ba01c0804020015h5d93d933i67839ad0b1e9e217@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

And I just found an old jira issue which might explain this behavior

LUCENE-533
http://www.archivum.info/java-dev@lucene.apache.org/2006-03/msg00265.html

Cedric


On Wed, Apr 2, 2008 at 3:15 PM, Cedric Ho <cedric.ho@gmail.com> wrote:
> Hi all,
>
>  It seems that SpanNearQuery doesn't consider the boosting of the nested terms:
>
>   1.3333334 = (MATCH) weight(spanNear([content2MBM:morgan^4.0,
>  content2MBM:stanley^4.0], 2, true) in 11976), product of:
>     2.0 = queryWeight(spanNear([content2MBM:morgan^4.0,
>  content2MBM:stanley^4.0], 2, true)), product of:
>       2.0 = idf(content2MBM: morgan=13 stanley=4)
>       1.0 = queryNorm
>     0.6666667 = (MATCH) fieldWeight(content2MBM:spanNear([morgan^4.0,
>  stanley^4.0], 2, true) in 11976), product of:
>       0.33333334 = tf(phraseFreq=0.33333334)
>       2.0 = idf(content2MBM: morgan=13 stanley=4)
>       1.0 = fieldNorm(field=content2MBM, doc=11976)
>
>
>  with a BooleanQuery the boosting is included in the score calculation
>
>     ....
>     4.0 = (MATCH) weight(content2MBM:stanley^4.0 in 11976), product of:
>       4.0 = queryWeight(content2MBM:stanley^4.0), product of:
>         4.0 = boost                 /* This Line is what I want */
>         1.0 = idf(docFreq=4, numDocs=45619)
>         1.0 = queryNorm
>       1.0 = (MATCH) fieldWeight(content2MBM:stanley in 11976), product of:
>         1.0 = tf(termFreq(content2MBM:stanley)=1)
>         1.0 = idf(docFreq=4, numDocs=45619)
>         1.0 = fieldNorm(field=content2MBM, doc=11976)
>
>  I previously assume boost is calculated in all queries.
>  I am using 2.3.0.
>
>  Cedric
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33427-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 02 07:30:42 2008
Return-Path: <java-user-return-33427-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87738 invoked from network); 2 Apr 2008 07:30:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Apr 2008 07:30:42 -0000
Received: (qmail 60375 invoked by uid 500); 2 Apr 2008 07:30:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60354 invoked by uid 500); 2 Apr 2008 07:30:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60343 invoked by uid 99); 2 Apr 2008 07:30:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Apr 2008 00:30:36 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of cedric.ho@gmail.com designates 209.85.146.176 as permitted sender)
Received: from [209.85.146.176] (HELO wa-out-1112.google.com) (209.85.146.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Apr 2008 07:29:45 +0000
Received: by wa-out-1112.google.com with SMTP id j40so3121714wah.11
        for <java-user@lucene.apache.org>; Wed, 02 Apr 2008 00:30:04 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=Cpa1JCzr1DyTU7tylDtBqm3S+yaIxorvPVbfckqwg6E=;
        b=loyAjOGOOpSMBn12MUczAhWtrwzXyNzMNTy35uyjs/txgo1jmU4Qk6UykN6XqoBUGW8D7ZE17clM9tjNa4UbKBaemA0w/M0rSihdeZLzfT58DL8fFSCBnC7z35v3PJa0AarXHQfsM1gy0/1EVmmKUf6Dx4MddQ8q5KIHr6pYSKA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=ePnpLblVRpXKwdFnmYsaBPMrtXR6c2MTPvCytuH1WgH8E6jYLyozr4CXZV/X+XDie6+Mqlvx2VzdtWLdPS8lCFyGzcF5MZndp3YmO7R6ASfBtE3cy/QCLZN/WogS9YRIGY5LFbJiY6snc4iskn2G0wdcVuKwEmlkTuW/KnkmdeQ=
Received: by 10.114.25.3 with SMTP id 3mr14241624way.22.1207121386735;
        Wed, 02 Apr 2008 00:29:46 -0700 (PDT)
Received: by 10.114.156.18 with HTTP; Wed, 2 Apr 2008 00:29:46 -0700 (PDT)
Message-ID: <839ba01c0804020029h494d892tc8a3ccc9f3962f49@mail.gmail.com>
Date: Wed, 2 Apr 2008 15:29:46 +0800
From: "Cedric Ho" <cedric.ho@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: SpanQuery scoring seems different
In-Reply-To: <839ba01c0804020015h5d93d933i67839ad0b1e9e217@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <839ba01c0804020015h5d93d933i67839ad0b1e9e217@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

And I just found an old jira issue which might explain this behavior

LUCENE-533
http://www.archivum.info/java-dev@lucene.apache.org/2006-03/msg00265.html

Cedric


On Wed, Apr 2, 2008 at 3:15 PM, Cedric Ho <cedric.ho@gmail.com> wrote:
> Hi all,
>
>  It seems that SpanNearQuery doesn't consider the boosting of the nested terms:
>
>   1.3333334 = (MATCH) weight(spanNear([content2MBM:morgan^4.0,
>  content2MBM:stanley^4.0], 2, true) in 11976), product of:
>     2.0 = queryWeight(spanNear([content2MBM:morgan^4.0,
>  content2MBM:stanley^4.0], 2, true)), product of:
>       2.0 = idf(content2MBM: morgan=13 stanley=4)
>       1.0 = queryNorm
>     0.6666667 = (MATCH) fieldWeight(content2MBM:spanNear([morgan^4.0,
>  stanley^4.0], 2, true) in 11976), product of:
>       0.33333334 = tf(phraseFreq=0.33333334)
>       2.0 = idf(content2MBM: morgan=13 stanley=4)
>       1.0 = fieldNorm(field=content2MBM, doc=11976)
>
>
>  with a BooleanQuery the boosting is included in the score calculation
>
>     ....
>     4.0 = (MATCH) weight(content2MBM:stanley^4.0 in 11976), product of:
>       4.0 = queryWeight(content2MBM:stanley^4.0), product of:
>         4.0 = boost                 /* This Line is what I want */
>         1.0 = idf(docFreq=4, numDocs=45619)
>         1.0 = queryNorm
>       1.0 = (MATCH) fieldWeight(content2MBM:stanley in 11976), product of:
>         1.0 = tf(termFreq(content2MBM:stanley)=1)
>         1.0 = idf(docFreq=4, numDocs=45619)
>         1.0 = fieldNorm(field=content2MBM, doc=11976)
>
>  I previously assume boost is calculated in all queries.
>  I am using 2.3.0.
>
>  Cedric
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33428-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 02 11:05:54 2008
Return-Path: <java-user-return-33428-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90517 invoked from network); 2 Apr 2008 11:05:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Apr 2008 11:05:54 -0000
Received: (qmail 85230 invoked by uid 500); 2 Apr 2008 11:05:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85205 invoked by uid 500); 2 Apr 2008 11:05:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85194 invoked by uid 99); 2 Apr 2008 11:05:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Apr 2008 04:05:47 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=MIME_BASE64_BLANKS,MIME_BASE64_TEXT,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chee.wu@gmail.com designates 209.85.200.172 as permitted sender)
Received: from [209.85.200.172] (HELO wf-out-1314.google.com) (209.85.200.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Apr 2008 11:05:05 +0000
Received: by wf-out-1314.google.com with SMTP id 28so2648925wff.20
        for <java-user@lucene.apache.org>; Wed, 02 Apr 2008 04:05:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:from:to:subject:date:mime-version:content-type:content-transfer-encoding:x-priority:x-msmail-priority:x-mailer:x-mimeole;
        bh=3j0k7rKwzqkWbXOw2k+Pmu9IcqXpIQWKBZcWQnBkPcI=;
        b=XVEGinnSIucmZNgY4vHIGgG93oFcnJF/YnMkFkKTQLikUv/BEuh9fiXN6+TUVwtfKtro+q2gqylTEVj7OCEQQPLXaCbdYox4OvZAXhT+/l+CLD7YLFouK8IbUmiMXj+8+dqW9RV+8gyGSacg4qq/X1QI5/SXoXCShknuELzWWHE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:from:to:subject:date:mime-version:content-type:content-transfer-encoding:x-priority:x-msmail-priority:x-mailer:x-mimeole;
        b=qYizPyDaqe58+oUVUOJwYD7hnWmJZdvLVTzChYHbOpX0quk7CgI0Z1O2gbC4r5vFBXF3C0HUYVOZyvXHHnl4BJrMx2loljiWwjJhyxgbN1EMbd5Ab0eJ2tedGiBUU+zdTEHddbS05rG5v0xmRumXlK1Dsn7IXy0LHR2nEPAp2X4=
Received: by 10.142.191.2 with SMTP id o2mr5755447wff.132.1207134317555;
        Wed, 02 Apr 2008 04:05:17 -0700 (PDT)
Received: from wuqi ( [125.34.3.105])
        by mx.google.com with ESMTPS id 30sm2812746wfd.19.2008.04.02.04.05.13
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 02 Apr 2008 04:05:15 -0700 (PDT)
Message-ID: <004801c894b1$358303c0$7f00a8c0@wuqi>
From: "wuqi" <chee.wu@gmail.com>
To: <java-user@lucene.apache.org>
Subject: How to reconstruct field value from index ?
Date: Wed, 2 Apr 2008 19:03:35 +0800
MIME-Version: 1.0
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: base64
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
X-Virus-Checked: Checked by ClamAV on apache.org

SGksDQoNCkkgd2FudCB0byByZWNvbnN0cnVjdCB0aGUgZmllbGQgdmFsdWUgZnJvbSBpbmRleCwg
anVzdCB0aGUgc2FtZSBhcyB0aGUgZnVuY3Rpb24gIlJlY29uc3RydWN0IGFuZCBFZGl0IiBpbiAg
dGhlIHRvb2wgIkx1a2UiIC4gSnVzdCBhbnkgaGludHMgaXMgT0suIFRoYW5rcyBpbiBhZHZhbmNl
Lg0KDQpUaGFua3MNCi1xaSA=



From java-user-return-33429-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 02 11:57:03 2008
Return-Path: <java-user-return-33429-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21632 invoked from network); 2 Apr 2008 11:57:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Apr 2008 11:57:03 -0000
Received: (qmail 84156 invoked by uid 500); 2 Apr 2008 11:56:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84128 invoked by uid 500); 2 Apr 2008 11:56:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84117 invoked by uid 99); 2 Apr 2008 11:56:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Apr 2008 04:56:57 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [213.162.48.15] (HELO soufre.accelance.net) (213.162.48.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Apr 2008 11:56:03 +0000
Received: from [192.168.3.106] (LSt-Amand-152-32-31-90.w82-127.abo.wanadoo.fr [82.127.74.90])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by soufre.accelance.net (Postfix) with ESMTP id D94AE45193
	for <java-user@lucene.apache.org>; Wed,  2 Apr 2008 13:56:22 +0200 (CEST)
Message-ID: <47F37465.70201@garambrogne.net>
Date: Wed, 02 Apr 2008 13:56:21 +0200
From: Mathieu Lecarme <mathieu@garambrogne.net>
User-Agent: Thunderbird 2.0.0.12 (X11/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: stemming in Lucene
References: <329a6c830804010258jd8df420lcf0f777df9fc36f3@mail.gmail.com>
In-Reply-To: <329a6c830804010258jd8df420lcf0f777df9fc36f3@mail.gmail.com>
X-Enigmail-Version: 0.95.6
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Wojtek H a crit :
> Hi all,
>
> Snowball stemmers are part of Lucene, but for few languages only. We
> have documents in various languages and so need stemmers for many
> languages (in particular polish). One of the ideas is to use ispell
> dictionaries. There are ispell dicts for many languages and so this
> solution is good for multilingual environment. Maybe this is not
> perfect place to ask, but does anyone know about java stemmer using
> ispell dicts?
> There is aspell-like java spell-checker (Jazzy) but I could not see
> how to use it for stemming. We are considering porting part of
> postgres tsearch module to java, because tsearch uses ispell dicts for
> stemming.
> But maybe there is a better way or there are people working on
> something like that?
>   
ispell data is nice for phonetic, and for enumerate a huge list of 
words. The ispell dictionnary is one way : pseudo root => word, it looks 
hard to build the inverse function, lemme is splitted in multiple affix. 
But it can be used to find rules, just like 
http://www.getopt.org/stempel/ do.

M.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33430-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 02 12:10:22 2008
Return-Path: <java-user-return-33430-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28118 invoked from network); 2 Apr 2008 12:10:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Apr 2008 12:10:22 -0000
Received: (qmail 14264 invoked by uid 500); 2 Apr 2008 12:10:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14232 invoked by uid 500); 2 Apr 2008 12:10:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14199 invoked by uid 99); 2 Apr 2008 12:10:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Apr 2008 05:10:13 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.207] (HELO spunkymail-a17.g.dreamhost.com) (208.97.132.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Apr 2008 12:09:19 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a17.g.dreamhost.com (Postfix) with ESMTP id 326A87515F
	for <java-user@lucene.apache.org>; Wed,  2 Apr 2008 05:09:38 -0700 (PDT)
Message-Id: <555ED0F9-BA3D-4D14-BEC8-CED9CC3C6DBB@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <16442112.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: Lucene Compression
Date: Wed, 2 Apr 2008 08:09:37 -0400
References: <16442112.post@talk.nabble.com>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org

It's generally considered best practice to compress things first in  
your app and then add them as a binary field.   That being said, I  
don't see why that would blow up on it's own.  Have you tried  
compressing it outside of Lucene to see what happens?  If you can  
reproduce it as a test case for Lucene, that would be great.

 From FieldsWriter, Lucene's compression code looks like:
private final byte[] compress (byte[] input) {

       // Create the compressor with highest level of compression
       Deflater compressor = new Deflater();
       compressor.setLevel(Deflater.BEST_COMPRESSION);

       // Give the compressor the data to compress
       compressor.setInput(input);
       compressor.finish();

       /*
        * Create an expandable byte array to hold the compressed data.
        * You cannot use an array that's the same size as the orginal  
because
        * there is no guarantee that the compressed data will be  
smaller than
        * the uncompressed data.
        */
       ByteArrayOutputStream bos = new  
ByteArrayOutputStream(input.length);

       // Compress the data
       byte[] buf = new byte[1024];
       while (!compressor.finished()) {
         int count = compressor.deflate(buf);
         bos.write(buf, 0, count);
       }

       compressor.end();

       // Get the compressed data
       return bos.toByteArray();
     }


There is an interesting comment in that code about how the compressed  
data won't necessarily be smaller, so maybe you have entered the  
compression twilight zone.

HTH
-Grant


On Apr 2, 2008, at 12:51 AM, Sebastin wrote:

>
> Hi All,
>       is there any possibility to create compression store for the
> following types of string in lucene index store?
>
>
> String str = "II0264.D05|00022745|ABCDE|03/01/2008 00:23:12|00035|
> 9840836588| 129382152520| 04F4243B600408|04F4243B600408|
> |11919898456123|354943011025810L| "CPTBS2I"| "ABCD3E"|11| 
> 1234510003243219I|"
>
>
> I try to store these fields as Field.Store.COMPRESSION  but it  
> exceeds the
> original size of the file?
>
>
> -- 
> View this message in context: http://www.nabble.com/Lucene-Compression-tp16442112p16442112.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://www.lucenebootcamp.com
Next Training: April 7, 2008 at ApacheCon Europe in Amsterdam

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33431-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 02 13:36:00 2008
Return-Path: <java-user-return-33431-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80732 invoked from network); 2 Apr 2008 13:36:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Apr 2008 13:36:00 -0000
Received: (qmail 74646 invoked by uid 500); 2 Apr 2008 13:35:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74623 invoked by uid 500); 2 Apr 2008 13:35:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74608 invoked by uid 99); 2 Apr 2008 13:35:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Apr 2008 06:35:51 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.189 as permitted sender)
Received: from [209.85.128.189] (HELO fk-out-0910.google.com) (209.85.128.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Apr 2008 13:35:10 +0000
Received: by fk-out-0910.google.com with SMTP id 19so3551674fkr.5
        for <java-user@lucene.apache.org>; Wed, 02 Apr 2008 06:35:21 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=sKQoUDRschtgCqXnOk6JdUi6uCmdlBwVUTaxgfCK5bw=;
        b=dhKNPjupV/6/JD955DPrZGk4Ou9q0HBmnzmyYTCnjNWDupRAl7IdrmkKI8NIpinPgeIqeCEHTLRX+z1+pJQ9zZ3NOKRicf1IAfHZl7FmdSJ4CSW827kwIQ7pMzZKUgIVCG8IneVfsf5KwN050xBidlQYDQtl8JEB36mnuh+K97M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=uk8Lm8JbO65KRwnd/YdXBpFCFdyHB97fVcvUruYnNUKZ5B5wIWYPOMyoAlvRbYSVl4J6aCQPXCaNoG1j4LMLJcVidJPhlC6049PuJtpDfGhX8w2UN2aWuKlh/u0yTX1NIHgV7Jh9jqZf/K+f39Y/ZGDazUbrU8SM0eKCRU3wsyA=
Received: by 10.82.139.20 with SMTP id m20mr22567908bud.16.1207143321335;
        Wed, 02 Apr 2008 06:35:21 -0700 (PDT)
Received: by 10.82.191.6 with HTTP; Wed, 2 Apr 2008 06:35:21 -0700 (PDT)
Message-ID: <359a92830804020635t51d7f210t7ca694afb8b94ce0@mail.gmail.com>
Date: Wed, 2 Apr 2008 09:35:21 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to reconstruct field value from index ?
In-Reply-To: <004801c894b1$358303c0$7f00a8c0@wuqi>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_487_2607805.1207143321318"
References: <004801c894b1$358303c0$7f00a8c0@wuqi>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_487_2607805.1207143321318
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

This has been discussed many times on the list. If you go to the searchable
version of the mailing list, you'll find a wealth of information on this
topic much
more quickly..

Best
Erick

On Wed, Apr 2, 2008 at 7:03 AM, wuqi <chee.wu@gmail.com> wrote:

> Hi,
>
> I want to reconstruct the field value from index, just the same as the
> function "Reconstruct and Edit" in  the tool "Luke" . Just any hints is OK.
> Thanks in advance.
>
> Thanks
> -qi

------=_Part_487_2607805.1207143321318--

From java-user-return-33432-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 02 14:10:53 2008
Return-Path: <java-user-return-33432-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97981 invoked from network); 2 Apr 2008 14:10:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Apr 2008 14:10:53 -0000
Received: (qmail 40652 invoked by uid 500); 2 Apr 2008 14:10:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40626 invoked by uid 500); 2 Apr 2008 14:10:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40615 invoked by uid 99); 2 Apr 2008 14:10:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Apr 2008 07:10:46 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=MIME_QP_LONG_LINE,SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [98.136.44.46] (HELO n58.bullet.mail.sp1.yahoo.com) (98.136.44.46)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 02 Apr 2008 14:09:52 +0000
Received: from [216.252.122.216] by n58.bullet.mail.sp1.yahoo.com with NNFMP; 02 Apr 2008 14:10:10 -0000
Received: from [68.142.237.87] by t1.bullet.sp1.yahoo.com with NNFMP; 02 Apr 2008 14:10:10 -0000
Received: from [66.196.97.144] by t3.bullet.re3.yahoo.com with NNFMP; 02 Apr 2008 14:10:10 -0000
Received: from [127.0.0.1] by omp202.mail.re3.yahoo.com with NNFMP; 02 Apr 2008 14:10:10 -0000
X-Yahoo-Newman-Property: ymail-5
X-Yahoo-Newman-Id: 8965.79030.bm@omp202.mail.re3.yahoo.com
Received: (qmail 31959 invoked by uid 60001); 2 Apr 2008 14:10:08 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=CLzicoa5ixpRqjVqJTuSgwHzLP44wEprQDe2zvIpMGXwA1hQQ7g0E+Pfgs77d8NxspaWSiDaHmBryAp8o9kEQlk4Ai2HLTUUP6vrTGlKZi4z7EoUhEf4NCG8iKm/N4nr9jOqAJzTTI8lHqUl6mGIjLLzYOy6/TOSWnM8PYuJZEU=;
X-YMail-OSG: 0l.jxwUVM1msgj38ppHpzWE4H96SLOeJYd7i6_kSAJVLf5OGUBq5gqTbbaWLgo2KvFKM_YJCkRniRIDJwTHefrIUPhOVOjlejaeZArsWf9KI5Z6ghIcvvNBDBRE-
Received: from [84.131.215.42] by web23005.mail.ird.yahoo.com via HTTP; Wed, 02 Apr 2008 14:10:08 GMT
X-Mailer: YahooMailRC/902.40 YahooMailWebService/0.7.185
Date: Wed, 2 Apr 2008 14:10:08 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Subject: Re: Lucene Compression
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <842528.30768.qm@web23005.mail.ird.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

the example you have sent is too small for the type of compression implemen=
ted in lucene. The problem is that you have to store decoding symbol table =
, header ...* for each* document you compress.  =0AThe best you can do for =
this would be to use some compressor with static decoding table (some entro=
py codec, huffman or so) and maybe some static dictionary compressor. As Gr=
ant said, the best way to do it would be to compress your field before stor=
ing it into lucene=0A=0A----- Original Message ----=0A> From: Grant Ingerso=
ll <gsingers@apache.org>=0A> To: java-user@lucene.apache.org=0A> Sent: Wedn=
esday, 2 April, 2008 2:09:37 PM=0A> Subject: Re: Lucene Compression=0A> =0A=
> It's generally considered best practice to compress things first in  =0A>=
 your app and then add them as a binary field.   That being said, I  =0A> d=
on't see why that would blow up on it's own.  Have you tried  =0A> compress=
ing it outside of Lucene to see what happens?  If you can  =0A> reproduce i=
t as a test case for Lucene, that would be great.=0A> =0A>  From FieldsWrit=
er, Lucene's compression code looks like:=0A> private final byte[] compress=
 (byte[] input) {=0A> =0A>        // Create the compressor with highest lev=
el of compression=0A>        Deflater compressor =3D new Deflater();=0A>   =
     compressor.setLevel(Deflater.BEST_COMPRESSION);=0A> =0A>        // Giv=
e the compressor the data to compress=0A>        compressor.setInput(input)=
;=0A>        compressor.finish();=0A> =0A>        /*=0A>         * Create a=
n expandable byte array to hold the compressed data.=0A>         * You cann=
ot use an array that's the same size as the orginal  =0A> because=0A>      =
   * there is no guarantee that the compressed data will be  =0A> smaller t=
han=0A>         * the uncompressed data.=0A>         */=0A>        ByteArra=
yOutputStream bos =3D new  =0A> ByteArrayOutputStream(input.length);=0A> =
=0A>        // Compress the data=0A>        byte[] buf =3D new byte[1024];=
=0A>        while (!compressor.finished()) {=0A>          int count =3D com=
pressor.deflate(buf);=0A>          bos.write(buf, 0, count);=0A>        }=
=0A> =0A>        compressor.end();=0A> =0A>        // Get the compressed da=
ta=0A>        return bos.toByteArray();=0A>      }=0A> =0A> =0A> There is a=
n interesting comment in that code about how the compressed  =0A> data won'=
t necessarily be smaller, so maybe you have entered the  =0A> compression t=
wilight zone.=0A> =0A> HTH=0A> -Grant=0A> =0A> =0A> On Apr 2, 2008, at 12:5=
1 AM, Sebastin wrote:=0A> =0A> >=0A> > Hi All,=0A> >       is there any pos=
sibility to create compression store for the=0A> > following types of strin=
g in lucene index store?=0A> >=0A> >=0A> > String str =3D "II0264.D05|00022=
745|ABCDE|03/01/2008 00:23:12|00035|=0A> > 9840836588| 129382152520| 04F424=
3B600408|04F4243B600408|=0A> > |11919898456123|354943011025810L| "CPTBS2I"|=
 "ABCD3E"|11| =0A> > 1234510003243219I|"=0A> >=0A> >=0A> > I try to store t=
hese fields as Field.Store.COMPRESSION  but it  =0A> > exceeds the=0A> > or=
iginal size of the file?=0A> >=0A> >=0A> > -- =0A> > View this message in c=
ontext: =0A> http://www.nabble.com/Lucene-Compression-tp16442112p16442112.h=
tml=0A> > Sent from the Lucene - Java Users mailing list archive at Nabble.=
com.=0A> >=0A> >=0A> > ----------------------------------------------------=
-----------------=0A> > To unsubscribe, e-mail: java-user-unsubscribe@lucen=
e.apache.org=0A> > For additional commands, e-mail: java-user-help@lucene.a=
pache.org=0A> >=0A> =0A> --------------------------=0A> Grant Ingersoll=0A>=
 http://www.lucenebootcamp.com=0A> Next Training: April 7, 2008 at ApacheCo=
n Europe in Amsterdam=0A> =0A> Lucene Helpful Hints:=0A> http://wiki.apache=
..org/lucene-java/BasicsOfPerformance=0A> http://wiki.apache.org/lucene-java=
/LuceneFAQ=0A> =0A> =0A> =0A> =0A> =0A> =0A> ------------------------------=
---------------------------------------=0A> To unsubscribe, e-mail: java-us=
er-unsubscribe@lucene.apache.org=0A> For additional commands, e-mail: java-=
user-help@lucene.apache.org=0A> =0A> =0A=0A=0A=0A=0A      _________________=
_________________________________________=0ASent from Yahoo! Mail.=0AA Smar=
ter Inbox http://uk.docs.yahoo.com/nowyoucan.html


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33433-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 02 14:14:54 2008
Return-Path: <java-user-return-33433-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 510 invoked from network); 2 Apr 2008 14:14:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Apr 2008 14:14:54 -0000
Received: (qmail 46363 invoked by uid 500); 2 Apr 2008 14:14:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46332 invoked by uid 500); 2 Apr 2008 14:14:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46320 invoked by uid 99); 2 Apr 2008 14:14:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Apr 2008 07:14:47 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 64.233.184.239 as permitted sender)
Received: from [64.233.184.239] (HELO wr-out-0506.google.com) (64.233.184.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Apr 2008 14:14:06 +0000
Received: by wr-out-0506.google.com with SMTP id c30so1802039wra.14
        for <java-user@lucene.apache.org>; Wed, 02 Apr 2008 07:14:18 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=WTOLTqk5ZRT75yzBYuyoEj1JK9g792DaceYU0taKwNU=;
        b=irIe0diwTvN0AI9ThX55MaBm1+OfZOIbC/cyDQABJlu3NcdcRhRDa8xMvxOp3GD0rwHaCd1G90B3WZ4gW9Y2ekImiWz1E8EkfuaX2BRnuMZ2yW84EwdWH+l83gUQrq3UDYNXXcW8KpxjU7uJohVDhfmEFI14P4E0tXZCbbH9jC4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=c0Q/UN8yPgPgwoamU+krIrKryXJVq6nW4Zwghy7Ezyjf1e5xQfpwBd8N7wxIZO7iD6Ua/gL16RwrVpPvgoaFkAULckBeIT3T+dzKFeNLJ6cYNPiQgriAeiRN1WetJOQbyYu48YOYynCufWUKnePvsOnSgAiupqWaHDZQguwk9os=
Received: by 10.141.107.13 with SMTP id j13mr4952975rvm.276.1207145657941;
        Wed, 02 Apr 2008 07:14:17 -0700 (PDT)
Received: from kodapan.lan ( [82.93.70.124])
        by mx.google.com with ESMTPS id i40sm1110744ugf.4.2008.04.02.07.14.16
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 02 Apr 2008 07:14:17 -0700 (PDT)
Message-ID: <47F394B7.5020904@gmail.com>
Date: Wed, 02 Apr 2008 16:14:15 +0200
From: Karl Wettin <karl.wettin@gmail.com>
User-Agent: Thunderbird 2.0.0.12 (Macintosh/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: How to reconstruct field value from index ?
References: <004801c894b1$358303c0$7f00a8c0@wuqi>
In-Reply-To: <004801c894b1$358303c0$7f00a8c0@wuqi>
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

wuqi skrev:
> Hi,
> 
> I want to reconstruct the field value from index, just the same as the function "Reconstruct and Edit" in  the tool "Luke" . Just any hints is OK. Thanks in advance.
> 
> Thanks
> -qi 

http://issues.apache.org/jira/browse/LUCENE-1016


    karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33434-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 02 14:47:33 2008
Return-Path: <java-user-return-33434-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23213 invoked from network); 2 Apr 2008 14:47:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Apr 2008 14:47:33 -0000
Received: (qmail 14189 invoked by uid 500); 2 Apr 2008 14:47:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14161 invoked by uid 500); 2 Apr 2008 14:47:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14150 invoked by uid 99); 2 Apr 2008 14:47:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Apr 2008 07:47:26 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=MIME_BASE64_BLANKS,MIME_BASE64_TEXT,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chee.wu@gmail.com designates 64.233.170.187 as permitted sender)
Received: from [64.233.170.187] (HELO rn-out-0910.google.com) (64.233.170.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Apr 2008 14:46:44 +0000
Received: by rn-out-0910.google.com with SMTP id v46so1499160rnb.5
        for <java-user@lucene.apache.org>; Wed, 02 Apr 2008 07:46:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:from:to:references:subject:date:mime-version:content-type:content-transfer-encoding:x-priority:x-msmail-priority:x-mailer:x-mimeole;
        bh=+5+BPOK/MxohY44Ddu/BHBImRDzAnsZKCwPy2lJp5ts=;
        b=M9zVaiq94Z0XDlP5LOds070KQQkAupG1aGQS8roY2ZghOnlARwA8TFVae35xv2+vArxNbPr5e099qbicb3h/XaMt8w7WU1FVmIjvZ3sdIm4XHNWKzd98Bvp0dMYbmd6G6ahou7xGc78/zbWRdP2HgtTwAi1ATmixfnZBK5Mv1bg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:from:to:references:subject:date:mime-version:content-type:content-transfer-encoding:x-priority:x-msmail-priority:x-mailer:x-mimeole;
        b=hSYI/7nrEk+8t0GfqIw1GlkrWcGa3eFGAwWivMrI8uwT8IyJywSF0HvOLld+V2LT2oTQ9/6bjZY4uh/BIdl+0V7HHxo9UQ3NvxO0981hhVHOgn/SCDC8HvIPkuV6ySKUbzWLToGxfTB8u2UOWUtP5jgSVWg8bbOIUypc3MPnMFo=
Received: by 10.115.60.1 with SMTP id n1mr14982475wak.37.1207147613638;
        Wed, 02 Apr 2008 07:46:53 -0700 (PDT)
Received: from wuqi ( [125.34.3.105])
        by mx.google.com with ESMTPS id y25sm2724874pod.5.2008.04.02.07.46.50
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 02 Apr 2008 07:46:53 -0700 (PDT)
Message-ID: <006e01c894d0$246d4b30$7f00a8c0@wuqi>
From: "wuqi" <chee.wu@gmail.com>
To: <java-user@lucene.apache.org>
References: <004801c894b1$358303c0$7f00a8c0@wuqi> <47F394B7.5020904@gmail.com>
Subject: Re: How to reconstruct field value from index ?
Date: Wed, 2 Apr 2008 22:45:00 +0800
MIME-Version: 1.0
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: base64
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
X-Virus-Checked: Checked by ClamAV on apache.org

VGhhbmsgeW91IEthcmwuDQpJIGFtIGp1c3QgaW50ZXJlc3RlZCBpbiBob3cgZG9lcyBMdWtlIHJl
Y29uc3RydWN0IHdpdGggZmllbGQgdGhhdCBpcyB1bnNvcnRlZCBhbmQgaGFzIG5vIFRlcm1WZWN0
b3IuIFNlZW1zIEx1a2UgaGF2ZSB0byAgaXRlcmF0ZSBhbGwgdGhlIHRlcm1zIGluIHRoZSBpbmRl
eCxhbmQgY2hlY2sgd2hldGhlciBjZXJ0YWluIHRlcm0gaXMgY29udGFpbmVkIGluIHRoZSBkb2N1
bWVudC4NCg0KDQotLS0tLSBPcmlnaW5hbCBNZXNzYWdlIC0tLS0tIA0KRnJvbTogIkthcmwgV2V0
dGluIiA8a2FybC53ZXR0aW5AZ21haWwuY29tPg0KVG86IDxqYXZhLXVzZXJAbHVjZW5lLmFwYWNo
ZS5vcmc+DQpTZW50OiBXZWRuZXNkYXksIEFwcmlsIDAyLCAyMDA4IDEwOjE0IFBNDQpTdWJqZWN0
OiBSZTogSG93IHRvIHJlY29uc3RydWN0IGZpZWxkIHZhbHVlIGZyb20gaW5kZXggPw0KDQoNCj4g
d3VxaSBza3JldjoNCj4+IEhpLA0KPj4gDQo+PiBJIHdhbnQgdG8gcmVjb25zdHJ1Y3QgdGhlIGZp
ZWxkIHZhbHVlIGZyb20gaW5kZXgsIGp1c3QgdGhlIHNhbWUgYXMgdGhlIGZ1bmN0aW9uICJSZWNv
bnN0cnVjdCBhbmQgRWRpdCIgaW4gIHRoZSB0b29sICJMdWtlIiAuIEp1c3QgYW55IGhpbnRzIGlz
IE9LLiBUaGFua3MgaW4gYWR2YW5jZS4NCj4+IA0KPj4gVGhhbmtzDQo+PiAtcWkgDQo+IA0KPiBo
dHRwOi8vaXNzdWVzLmFwYWNoZS5vcmcvamlyYS9icm93c2UvTFVDRU5FLTEwMTYNCj4gDQo+IA0K
PiAgICBrYXJsDQo+IA0KPiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDog
amF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnDQo+IEZvciBhZGRpdGlvbmFs
IGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnDQo+



From java-user-return-33435-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 02 15:57:58 2008
Return-Path: <java-user-return-33435-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79759 invoked from network); 2 Apr 2008 15:57:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Apr 2008 15:57:58 -0000
Received: (qmail 66616 invoked by uid 500); 2 Apr 2008 15:57:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66215 invoked by uid 500); 2 Apr 2008 15:57:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66204 invoked by uid 99); 2 Apr 2008 15:57:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Apr 2008 08:57:50 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of john@livemocha.com designates 64.233.170.189 as permitted sender)
Received: from [64.233.170.189] (HELO rn-out-0910.google.com) (64.233.170.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Apr 2008 15:57:08 +0000
Received: by rn-out-0910.google.com with SMTP id v46so1551360rnb.5
        for <java-user@lucene.apache.org>; Wed, 02 Apr 2008 08:57:17 -0700 (PDT)
Received: by 10.114.191.1 with SMTP id o1mr15056515waf.117.1207151836721;
        Wed, 02 Apr 2008 08:57:16 -0700 (PDT)
Received: from codesith ( [71.112.16.152])
        by mx.google.com with ESMTPS id m27sm2180444pof.1.2008.04.02.08.57.15
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 02 Apr 2008 08:57:15 -0700 (PDT)
From: "John Xiao" <john@livemocha.com>
To: <java-user@lucene.apache.org>
Subject: Sorting VS Scoring
Date: Wed, 2 Apr 2008 09:01:49 -0700
Message-ID: <000601c894da$dce7f6b0$96b7e410$@com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0007_01C894A0.30891EB0"
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AciU2tsGggVVG7asR32ozEixXyWAQw==
Content-Language: en-us
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0007_01C894A0.30891EB0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

I'm trying to figure out what the best practice is in term of using sorting
or customized scoring.

For example, if I have want to index some static pages and rank them by how
many times a page is viewed.  I can get the page view counters and store
them in the index document as a field COUNTER.  I want to be able to sort
query result in the order of most viewed pages.  I see three ways to do it:

1.       Search result sorting

Search.search(query, sort);

2.       Use the counter itself as the score

FieldScoreQuery("COUNTER", FieldScoreQuery.Type.INT);

3.       Customize scoring

Set boost on COUNTER field during index time

 

I haven't got the last one working yet.  Somehow, when I query, boost value
on the COUNTER field is ignored. 

 

Any inputs?

 

Thanks,

John X.


------=_NextPart_000_0007_01C894A0.30891EB0--


From java-user-return-33436-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 02 17:33:26 2008
Return-Path: <java-user-return-33436-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52057 invoked from network); 2 Apr 2008 17:33:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Apr 2008 17:33:26 -0000
Received: (qmail 32050 invoked by uid 500); 2 Apr 2008 17:33:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32020 invoked by uid 500); 2 Apr 2008 17:33:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31995 invoked by uid 99); 2 Apr 2008 17:33:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Apr 2008 10:33:09 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Apr 2008 17:32:25 +0000
Received: from [192.168.1.102] ([81.219.54.251])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id m32HWlQ31430
	for <java-user@lucene.apache.org>; Wed, 2 Apr 2008 12:32:47 -0500
Message-ID: <47F3C32A.8010105@getopt.org>
Date: Wed, 02 Apr 2008 19:32:26 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: How to reconstruct field value from index ?
References: <004801c894b1$358303c0$7f00a8c0@wuqi> <47F394B7.5020904@gmail.com> <006e01c894d0$246d4b30$7f00a8c0@wuqi>
In-Reply-To: <006e01c894d0$246d4b30$7f00a8c0@wuqi>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

wuqi wrote:
> Thank you Karl. I am just interested in how does Luke reconstruct
> with field that is unsorted and has no TermVector. Seems Luke have to
> iterate all the terms in the index,and check whether certain term is
> contained in the document.

Correct, that's exactly how this function works in Luke.

For each term it checks whether the term belongs to the document, 
retrieves all positions of this term and puts the term at correct 
positions in an array, which represents all terms of the document. 
Finally elements of this array are concatenated using spaces.

That's all there is to it :)

-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33437-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 02 18:12:38 2008
Return-Path: <java-user-return-33437-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71097 invoked from network); 2 Apr 2008 18:12:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Apr 2008 18:12:37 -0000
Received: (qmail 16606 invoked by uid 500); 2 Apr 2008 18:12:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16577 invoked by uid 500); 2 Apr 2008 18:12:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16566 invoked by uid 99); 2 Apr 2008 18:12:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Apr 2008 11:12:31 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.189 as permitted sender)
Received: from [209.85.128.189] (HELO fk-out-0910.google.com) (209.85.128.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Apr 2008 18:11:50 +0000
Received: by fk-out-0910.google.com with SMTP id 19so3686199fkr.5
        for <java-user@lucene.apache.org>; Wed, 02 Apr 2008 11:12:01 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=ctm/a3IiRxeQnei2NHenPy+2DrocXT/OOtittF1/rnw=;
        b=GudkSnAPttieKIvLg/5FZUa6ywossUDvcmsi+NuTY/Eczj7bBPNq6jRZiwEXP5M2lBTsD3SkvBOpCdoqJyqN4K99tW3BtmHY1tSm6jdnR5UVYKXVQCrg9kIZok0AztfHv+7x3YVvNyW0VyWTxivVFvYoMYAEeZGxaV0kjeCDXWM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=I4CGXCr6UA46ytgWp0INPGhRxEdkIDh4oXcNQSam7Ib8p+AeEYcG7z2ldBcXrcuTSPU1wL2WCeVbngYoFogmj1hwvmR9p4AMSfQ90gQN/+J4u9/dQ9xNt+/ThxqA3hkAY26U3M7euNqGaNOCB/LMmXHllLM2FLyXGmbxSyRhdcc=
Received: by 10.82.161.19 with SMTP id j19mr24467422bue.12.1207159920389;
        Wed, 02 Apr 2008 11:12:00 -0700 (PDT)
Received: by 10.82.191.6 with HTTP; Wed, 2 Apr 2008 11:12:00 -0700 (PDT)
Message-ID: <359a92830804021112g5e263d58icc63b460d279d06a@mail.gmail.com>
Date: Wed, 2 Apr 2008 14:12:00 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Sorting VS Scoring
In-Reply-To: <000601c894da$dce7f6b0$96b7e410$@com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1949_29448813.1207159920374"
References: <000601c894da$dce7f6b0$96b7e410$@com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1949_29448813.1207159920374
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

The problem here is that you'll have to keep deleting and
adding your documents in order to update the counter field for
all of these solutions, and I doubt that's what you really want
to do. There is much discussion of updating a document that's
already in the index, but I don't think it's there yet.

I know this has been discussed in the mailing list, so you might
want to search the searchable archive on this...

Best
Erick

On Wed, Apr 2, 2008 at 12:01 PM, John Xiao <john@livemocha.com> wrote:

> I'm trying to figure out what the best practice is in term of using
> sorting
> or customized scoring.
>
> For example, if I have want to index some static pages and rank them by
> how
> many times a page is viewed.  I can get the page view counters and store
> them in the index document as a field COUNTER.  I want to be able to sort
> query result in the order of most viewed pages.  I see three ways to do
> it:
>
> 1.       Search result sorting
>
> Search.search(query, sort);
>
> 2.       Use the counter itself as the score
>
> FieldScoreQuery("COUNTER", FieldScoreQuery.Type.INT);
>
> 3.       Customize scoring
>
> Set boost on COUNTER field during index time
>
>
>
> I haven't got the last one working yet.  Somehow, when I query, boost
> value
> on the COUNTER field is ignored.
>
>
>
> Any inputs?
>
>
>
> Thanks,
>
> John X.
>
>

------=_Part_1949_29448813.1207159920374--

From java-user-return-33438-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 02 18:26:24 2008
Return-Path: <java-user-return-33438-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83579 invoked from network); 2 Apr 2008 18:26:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Apr 2008 18:26:24 -0000
Received: (qmail 45517 invoked by uid 500); 2 Apr 2008 18:26:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45240 invoked by uid 500); 2 Apr 2008 18:26:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45229 invoked by uid 99); 2 Apr 2008 18:26:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Apr 2008 11:26:17 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=EXTRA_MPART_TYPE,HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS,TVD_FW_GRAPHIC_NAME_MID
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of niwalia@cisco.com designates 171.71.176.117 as permitted sender)
Received: from [171.71.176.117] (HELO sj-iport-6.cisco.com) (171.71.176.117)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Apr 2008 18:25:33 +0000
Received: from sj-dkim-2.cisco.com ([171.71.179.186])
  by sj-iport-6.cisco.com with ESMTP; 02 Apr 2008 11:25:44 -0700
Received: from sj-core-5.cisco.com (sj-core-5.cisco.com [171.71.177.238])
	by sj-dkim-2.cisco.com (8.12.11/8.12.11) with ESMTP id m32IPiTd001988
	for <java-user@lucene.apache.org>; Wed, 2 Apr 2008 11:25:44 -0700
Received: from xbh-sjc-221.amer.cisco.com (xbh-sjc-221.cisco.com [128.107.191.63])
	by sj-core-5.cisco.com (8.13.8/8.13.8) with ESMTP id m32IPieC021722
	for <java-user@lucene.apache.org>; Wed, 2 Apr 2008 18:25:44 GMT
Received: from xmb-sjc-21b.amer.cisco.com ([171.70.151.143]) by xbh-sjc-221.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 2 Apr 2008 11:25:44 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/related;
	type="multipart/alternative";
	boundary="----_=_NextPart_001_01C894EE.F6997491"
Subject: Adding attribute to index
Date: Wed, 2 Apr 2008 11:26:45 -0700
Message-ID: <2AE56FA3F71F09468C8EBDDEFE8EB5110573AEC4@xmb-sjc-21b.amer.cisco.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Adding attribute to index
thread-index: AciU7xtsj9BhzJvOTrOpK83pD8ZKxg==
From: "Nitasha Walia (niwalia)" <niwalia@cisco.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 02 Apr 2008 18:25:44.0278 (UTC) FILETIME=[F6BD2F60:01C894EE]
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=8950; t=1207160744; x=1208024744;
	c=relaxed/simple; s=sjdkim2002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=niwalia@cisco.com;
	z=From:=20=22Nitasha=20Walia=20(niwalia)=22=20<niwalia@cisco
	.com>
	|Subject:=20Adding=20attribute=20to=20index
	|Sender:=20;
	bh=mUhkrl4saNbi4EhkT9unwGEsiWmmtLEy8mfIeDJP/3k=;
	b=fC2o/p3EGr5XjVxRMGFOwAYsfQW7AjovcEAbZLXUlKil8BOjP864Eme3Xu
	gfaOWKjwYovDAvUT5mH+FfB/B7ouJ+sUc/uYXhToUzShWpVgUZoVrlIbMcaY
	rYr7YwN7c5;
Authentication-Results: sj-dkim-2; header.From=niwalia@cisco.com; dkim=pass (
	sig from cisco.com/sjdkim2002 verified; ); 
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C894EE.F6997491
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_002_01C894EE.F6997491"


------_=_NextPart_002_01C894EE.F6997491
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,=20
=20
I am a new user of Java Lucene and need to learn how to add a new
attribute, such that, given a database of emails, containing sender
information, searching for a keyword, results in=20
1. The sender of the email
2. The email.=20
=20
I am using Lucene-2.3.1, and don't know where to start in the huge code
base.=20
=20
Can someone please advise on the same?
=20
Thanks,
 =09
Nitasha Walia
Software Engineer
Product Development

niwalia@cisco.com
Mobile: 412-736 4507




United States
Cisco home page <http://www.cisco.com/>=20



 =09
 =09
  Think before you print.=09
This e-mail may contain confidential and privileged material for the
sole use of the intended recipient. Any review, use, distribution or
disclosure by others is strictly prohibited. If you are not the intended
recipient (or authorized to receive for the recipient), please contact
the sender by reply e-mail and delete all copies of this message.=09
=20


=20

------_=_NextPart_002_01C894EE.F6997491
Content-Type: text/html;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META http-equiv=3DContent-Type content=3D"text/html; =
charset=3Dus-ascii">
<META content=3D"MSHTML 6.00.6000.16608" name=3DGENERATOR></HEAD>
<BODY>
<DIV><SPAN class=3D359080817-02042008><FONT face=3DArial size=3D2>Hi,=20
</FONT></SPAN></DIV>
<DIV><SPAN class=3D359080817-02042008><FONT face=3DArial=20
size=3D2></FONT></SPAN>&nbsp;</DIV>
<DIV><SPAN class=3D359080817-02042008><FONT face=3DArial size=3D2>I am a =
new user of=20
Java Lucene and need to learn how to add a new attribute, such that,=20
given&nbsp;a&nbsp;<SPAN class=3D000082518-02042008>database</SPAN> of =
emails,=20
containing sender information, searching for a keyword<SPAN=20
class=3D000082518-02042008>,</SPAN> results in </FONT></SPAN></DIV>
<DIV><SPAN class=3D359080817-02042008><FONT><FONT face=3DArial><FONT =
size=3D2><SPAN=20
class=3D000082518-02042008>1.&nbsp;</SPAN><SPAN=20
class=3D000082518-02042008>T</SPAN>he sender of the=20
email</FONT></FONT></FONT></SPAN></DIV>
<DIV><SPAN class=3D359080817-02042008><FONT><FONT><FONT =
face=3DArial><FONT=20
size=3D2><SPAN class=3D000082518-02042008>2.&nbsp;</SPAN><SPAN=20
class=3D000082518-02042008>The</SPAN> email.=20
</FONT></FONT></FONT></FONT></SPAN></DIV>
<DIV><SPAN class=3D359080817-02042008><FONT face=3DArial=20
size=3D2></FONT></SPAN>&nbsp;</DIV>
<DIV><SPAN class=3D359080817-02042008><FONT face=3DArial size=3D2>I am =
using=20
Lucene-2.3.1, and don't know where to start in the huge code base.=20
</FONT></SPAN></DIV>
<DIV><SPAN class=3D359080817-02042008><FONT face=3DArial=20
size=3D2></FONT></SPAN>&nbsp;</DIV>
<DIV><SPAN class=3D359080817-02042008><FONT face=3DArial size=3D2><SPAN=20
class=3D000082518-02042008>Can someone please advise on the=20
same?</SPAN></FONT></SPAN></DIV>
<DIV><FONT face=3DArial size=3D2></FONT>&nbsp;</DIV>
<DIV><SPAN class=3D359080817-02042008><FONT face=3DArial><FONT =
size=3D2><SPAN=20
class=3D000082518-02042008>T</SPAN>hanks,</FONT></FONT></SPAN></DIV>
<DIV align=3Dleft>
<TABLE cellSpacing=3D0 cellPadding=3D0 width=3D543 align=3Dleft =
border=3D0>
  <TBODY>
  <TR>
    <TD>
      <TABLE=20
      style=3D"BACKGROUND: =
url(http://www.cisco.com/global/EMEA/brand/signature/corporate/bg7.jpg) =
no-repeat 50% top"=20
      cellSpacing=3D0 cellPadding=3D0 width=3D543 border=3D0>
        <TBODY>
        <TR>
          <TD colSpan=3D3><IMG height=3D68=20
            =
src=3D"http://www.cisco.com/global/EMEA/brand/signature/default/spacer.gi=
f"=20
            width=3D200></TD></TR>
        <TR>
          <TD style=3D"PADDING-LEFT: 24px; PADDING-BOTTOM: 15px" =
vAlign=3Dtop noWrap=20
          align=3Dleft>
            <P=20
            style=3D"FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: =
#666666; FONT-FAMILY: Arial, Helvetica, sans-serif"><STRONG>Nitasha=20
            Walia</STRONG><BR><STRONG>Software=20
            Engineer</STRONG><BR><STRONG><STRONG>Product=20
            Development</STRONG><BR></STRONG><BR><A style=3D"COLOR: =
#666666"=20
            =
href=3D"mailto:niwalia@cisco.com">niwalia@cisco.com</A><BR>Mobile:=20
            <STRONG>412-736 4507</STRONG><BR></P></TD>
          <TD style=3D"PADDING-LEFT: 20px; PADDING-BOTTOM: 10px" =
vAlign=3Dtop=20
noWrap>
            <P=20
            style=3D"FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: =
#666666; FONT-FAMILY: Arial, Helvetica, =
sans-serif"><STRONG></STRONG><BR><BR>United=20
            States<BR><A style=3D"COLOR: #666666"=20
            href=3D"http://www.cisco.com/">Cisco home =
page</A><BR><BR></P></TD>
          <TD width=3D200>&nbsp;</TD></TR></TBODY></TABLE>
      <TABLE cellSpacing=3D0 cellPadding=3D0 width=3D"100%" border=3D0>
        <TBODY>
        <TR>
          <TD><IMG height=3D1=20
            =
src=3D"http://www.cisco.com/global/EMEA/brand/signature/default/footerHea=
d.gif"=20
            width=3D543></TD></TR></TBODY></TABLE>
      <TABLE cellSpacing=3D0 cellPadding=3D0 width=3D"100%"=20
      =
background=3Dhttp://www.cisco.com/global/EMEA/brand/signature/default/foo=
terBG.gif=20
      border=3D0>
        <TBODY>
        <TR>
          <TD=20
          style=3D"PADDING-RIGHT: 24px; PADDING-LEFT: 24px; FONT-SIZE: =
10px; PADDING-BOTTOM: 0px; COLOR: #009900; PADDING-TOP: 3px; =
FONT-FAMILY: Arial, Helvetica, sans-serif"><IMG=20
            alt=3D"Think before you print."=20
            =
src=3D"http://www.cisco.com/global/EMEA/brand/signature/capital/green.gif=
">=20
            Think before you print.</TD></TR>
        <TR>
          <TD=20
          style=3D"PADDING-RIGHT: 24px; PADDING-LEFT: 24px; FONT-SIZE: =
10px; PADDING-BOTTOM: 6px; COLOR: #999999; PADDING-TOP: 7px; =
FONT-FAMILY: Arial, Helvetica, sans-serif">This=20
            e-mail may contain confidential and privileged material for =
the sole=20
            use of the intended recipient. Any review, use, distribution =
or=20
            disclosure by others is strictly prohibited. If you are not =
the=20
            intended recipient (or authorized to receive for the =
recipient),=20
            please contact the sender by reply e-mail and delete all =
copies of=20
            this message.</TD></TR></TBODY></TABLE>
      <TABLE cellSpacing=3D0 cellPadding=3D0 width=3D"100%" border=3D0>
        <TBODY>
        <TR>
          <TD>
            <P><IMG height=3D17=20
            =
src=3D"http://www.cisco.com/global/EMEA/brand/signature/default/footer.gi=
f"=20
            =
width=3D543></P></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></DIV=
><BR=20
clear=3Dall>
<DIV>&nbsp;</DIV></BODY></HTML>

------_=_NextPart_002_01C894EE.F6997491--

------_=_NextPart_001_01C894EE.F6997491--

From java-user-return-33439-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 02 18:32:25 2008
Return-Path: <java-user-return-33439-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85940 invoked from network); 2 Apr 2008 18:32:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Apr 2008 18:32:25 -0000
Received: (qmail 54842 invoked by uid 500); 2 Apr 2008 18:32:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54808 invoked by uid 500); 2 Apr 2008 18:32:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54797 invoked by uid 99); 2 Apr 2008 18:32:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Apr 2008 11:32:18 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of john@livemocha.com designates 209.85.162.178 as permitted sender)
Received: from [209.85.162.178] (HELO el-out-1112.google.com) (209.85.162.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Apr 2008 18:31:36 +0000
Received: by el-out-1112.google.com with SMTP id y26so1244474ele.4
        for <java-user@lucene.apache.org>; Wed, 02 Apr 2008 11:31:41 -0700 (PDT)
Received: by 10.114.14.1 with SMTP id 1mr15465904wan.9.1207161100791;
        Wed, 02 Apr 2008 11:31:40 -0700 (PDT)
Received: from codesith ( [71.112.16.152])
        by mx.google.com with ESMTPS id z15sm3277980pod.11.2008.04.02.11.31.39
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 02 Apr 2008 11:31:40 -0700 (PDT)
From: "John Xiao" <john@livemocha.com>
To: <java-user@lucene.apache.org>
References: <000601c894da$dce7f6b0$96b7e410$@com> <359a92830804021112g5e263d58icc63b460d279d06a@mail.gmail.com>
In-Reply-To: <359a92830804021112g5e263d58icc63b460d279d06a@mail.gmail.com>
Subject: RE: Sorting VS Scoring
Date: Wed, 2 Apr 2008 11:36:14 -0700
Message-ID: <001401c894f0$6fa008c0$4ee01a40$@com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AciU7SIUUP1hlA6vT76XyXaaQ52SogAAw0Kg
Content-Language: en-us
X-Virus-Checked: Checked by ClamAV on apache.org

Updating index is easy, I can have a background thread to do it.

Someone mentioned the "searchable archive" before, where do I find it?

Thanks,

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com] 
Sent: Wednesday, April 02, 2008 11:12 AM
To: java-user@lucene.apache.org
Subject: Re: Sorting VS Scoring

The problem here is that you'll have to keep deleting and
adding your documents in order to update the counter field for
all of these solutions, and I doubt that's what you really want
to do. There is much discussion of updating a document that's
already in the index, but I don't think it's there yet.

I know this has been discussed in the mailing list, so you might
want to search the searchable archive on this...

Best
Erick

On Wed, Apr 2, 2008 at 12:01 PM, John Xiao <john@livemocha.com> wrote:

> I'm trying to figure out what the best practice is in term of using
> sorting
> or customized scoring.
>
> For example, if I have want to index some static pages and rank them by
> how
> many times a page is viewed.  I can get the page view counters and store
> them in the index document as a field COUNTER.  I want to be able to sort
> query result in the order of most viewed pages.  I see three ways to do
> it:
>
> 1.       Search result sorting
>
> Search.search(query, sort);
>
> 2.       Use the counter itself as the score
>
> FieldScoreQuery("COUNTER", FieldScoreQuery.Type.INT);
>
> 3.       Customize scoring
>
> Set boost on COUNTER field during index time
>
>
>
> I haven't got the last one working yet.  Somehow, when I query, boost
> value
> on the COUNTER field is ignored.
>
>
>
> Any inputs?
>
>
>
> Thanks,
>
> John X.
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33440-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 02 18:53:07 2008
Return-Path: <java-user-return-33440-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92488 invoked from network); 2 Apr 2008 18:53:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Apr 2008 18:53:06 -0000
Received: (qmail 6075 invoked by uid 500); 2 Apr 2008 18:52:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6047 invoked by uid 500); 2 Apr 2008 18:52:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6036 invoked by uid 99); 2 Apr 2008 18:52:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Apr 2008 11:52:59 -0700
X-ASF-Spam-Status: No, hits=-2.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gresh@us.ibm.com designates 32.97.182.141 as permitted sender)
Received: from [32.97.182.141] (HELO e1.ny.us.ibm.com) (32.97.182.141)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Apr 2008 18:52:16 +0000
Received: from d01relay04.pok.ibm.com (d01relay04.pok.ibm.com [9.56.227.236])
	by e1.ny.us.ibm.com (8.13.8/8.13.8) with ESMTP id m32IqQnW016328
	for <java-user@lucene.apache.org>; Wed, 2 Apr 2008 14:52:26 -0400
Received: from d01av02.pok.ibm.com (d01av02.pok.ibm.com [9.56.224.216])
	by d01relay04.pok.ibm.com (8.13.8/8.13.8/NCO v8.7) with ESMTP id m32IqQlu283552
	for <java-user@lucene.apache.org>; Wed, 2 Apr 2008 14:52:26 -0400
Received: from d01av02.pok.ibm.com (loopback [127.0.0.1])
	by d01av02.pok.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id m32IqPIc026347
	for <java-user@lucene.apache.org>; Wed, 2 Apr 2008 14:52:25 -0400
Received: from d01ml605.pok.ibm.com (d01ml605.pok.ibm.com [9.56.227.91])
	by d01av02.pok.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id m32IqPHY026339
	for <java-user@lucene.apache.org>; Wed, 2 Apr 2008 14:52:25 -0400
In-Reply-To: <2AE56FA3F71F09468C8EBDDEFE8EB5110573AEC4@xmb-sjc-21b.amer.cisco.com>
To: java-user@lucene.apache.org
MIME-Version: 1.0
Subject: Re: Adding attribute to index
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
From: Donna L Gresh <gresh@us.ibm.com>
Message-ID: <OF87C806B7.54FD893D-ON8525741F.0065EB1C-8525741F.006799A4@us.ibm.com>
Date: Wed, 2 Apr 2008 14:52:23 -0400
X-MIMETrack: Serialize by Router on D01ML605/01/M/IBM(Release 8.0|August 02, 2007) at 04/02/2008
 14:52:25,
	Serialize complete at 04/02/2008 14:52:25
Content-Type: multipart/alternative; boundary="=_alternative 006799228525741F_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 006799228525741F_=
Content-Type: text/plain; charset="US-ASCII"

This is "fast and loose" code (from my head; check the syntax). I *highly* 
recommend you get a copy of the book Lucene in Action; it will really 
help.

To create the index, add a document with two fields; one for the sender 
and one for the email text.

IndexWriter indexWriter = new IndexWriter(...... 

Document emailDoc = new Document();
Field senderField = new Field("sender", senderEmailAddress, 
Field.Store.YES, Field.Index.UN_TOKENIZED);
emailDoc.add(senderField);
Field textField = new Field("emailText", textOfEmail, Field.Store.YES, 
Field.Index.TOKENIZED);
emailDoc.add(textField);
indexWriter.addDocument(emailDoc);


Then when you are searching, search in the email text field:

Query query = new TermQuery(new Term("emailText","searchTerm"));
Hits hits = searcher.search(query);
Document doc = hits.doc(0); //best fit document
String emailSender = doc.get("sender");
String emailText = doc.get("emailText");


Donna L. Gresh
Services Research, Mathematical Sciences Department
IBM T.J. Watson Research Center
(914) 945-2472
http://www.research.ibm.com/people/g/donnagresh
gresh@us.ibm.com


"Nitasha Walia (niwalia)" <niwalia@cisco.com> wrote on 04/02/2008 02:26:45 
PM:

> Hi, 
> 
> I am a new user of Java Lucene and need to learn how to add a new 
> attribute, such that, given a database of emails, containing sender 
> information, searching for a keyword, results in 
> 1. The sender of the email
> 2. The email. 
> 
> I am using Lucene-2.3.1, and don't know where to start in the huge code 
base. 
> 
> Can someone please advise on the same?
> 
> Thanks,
> 
> [image removed] 
> 
> Nitasha Walia
> Software Engineer
> Product Development
> 
> niwalia@cisco.com
> Mobile: 412-736 4507
> 
> 
> 
> United States
> Cisco home page

> 
> 
> 
> [image removed] 
> 
> [image removed] Think before you print.
> 
> This e-mail may contain confidential and privileged material for the
> sole use of the intended recipient. Any review, use, distribution or
> disclosure by others is strictly prohibited. If you are not the 
> intended recipient (or authorized to receive for the recipient), 
> please contact the sender by reply e-mail and delete all copies of 
> this message.
> 
> [image removed] 
> 
> 
--=_alternative 006799228525741F_=--

From java-user-return-33441-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 02 19:04:16 2008
Return-Path: <java-user-return-33441-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96922 invoked from network); 2 Apr 2008 19:04:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Apr 2008 19:04:16 -0000
Received: (qmail 23582 invoked by uid 500); 2 Apr 2008 19:04:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23557 invoked by uid 500); 2 Apr 2008 19:04:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23546 invoked by uid 99); 2 Apr 2008 19:04:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Apr 2008 12:04:09 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.153 as permitted sender)
Received: from [72.14.220.153] (HELO fg-out-1718.google.com) (72.14.220.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Apr 2008 19:03:28 +0000
Received: by fg-out-1718.google.com with SMTP id d23so2468568fga.27
        for <java-user@lucene.apache.org>; Wed, 02 Apr 2008 12:03:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=Q9UoorQ2qtc8hWLalj+aFgy7URltmQpWNGCSmnR+o6M=;
        b=MLvrMAF2Tv+XrKE20cN16Tnl5AkfpmE1O/inx2YPhVI/RPj30NtdIYaK7tLQc44EFF8prj/9MFNng4OeUSjD3SLOa9qW1tbUqrIsoEDn7IeY3cVP+gEArsNMlHrI9nh/U877rkgkNb6CDgIIf+sinPtlyv92r8UzydYlYQKkiCA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=UdRyGjAZzcZ5gsLLgTIaao/3ch4ouXpJrpg2wRABM3Otn/1E/+YM1PeVJKnZVN/IYPsLbGFQ0+m3puduGP3aHB0uE0SEYGAb838w8CWUA1jX0rlJdwIE7Y6u++cx6wzx3RhOsWRtx9J0tm01yGAiGdBKT2R4Nty7/C5ccNPCJ9g=
Received: by 10.82.170.3 with SMTP id s3mr23443653bue.18.1207163017874;
        Wed, 02 Apr 2008 12:03:37 -0700 (PDT)
Received: by 10.82.191.6 with HTTP; Wed, 2 Apr 2008 12:03:37 -0700 (PDT)
Message-ID: <359a92830804021203x180480cbt5c2db86ca70a3523@mail.gmail.com>
Date: Wed, 2 Apr 2008 15:03:37 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Sorting VS Scoring
In-Reply-To: <001401c894f0$6fa008c0$4ee01a40$@com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2171_20191250.1207163017852"
References: <000601c894da$dce7f6b0$96b7e410$@com>
	 <359a92830804021112g5e263d58icc63b460d279d06a@mail.gmail.com>
	 <001401c894f0$6fa008c0$4ee01a40$@com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2171_20191250.1207163017852
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Try

http://www.nabble.com/Lucene---Java-Users-f45.html

Updating may not be as easy as you think. You'll be
changing your index *every* time a user accesses it. And your
changes won't be seen until you close/reopen the searcher.

But maybe you've worked it out already....

Erick

On Wed, Apr 2, 2008 at 2:36 PM, John Xiao <john@livemocha.com> wrote:

> Updating index is easy, I can have a background thread to do it.
>
> Someone mentioned the "searchable archive" before, where do I find it?
>
> Thanks,
>
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: Wednesday, April 02, 2008 11:12 AM
> To: java-user@lucene.apache.org
> Subject: Re: Sorting VS Scoring
>
> The problem here is that you'll have to keep deleting and
> adding your documents in order to update the counter field for
> all of these solutions, and I doubt that's what you really want
> to do. There is much discussion of updating a document that's
> already in the index, but I don't think it's there yet.
>
> I know this has been discussed in the mailing list, so you might
> want to search the searchable archive on this...
>
> Best
> Erick
>
> On Wed, Apr 2, 2008 at 12:01 PM, John Xiao <john@livemocha.com> wrote:
>
> > I'm trying to figure out what the best practice is in term of using
> > sorting
> > or customized scoring.
> >
> > For example, if I have want to index some static pages and rank them by
> > how
> > many times a page is viewed.  I can get the page view counters and store
> > them in the index document as a field COUNTER.  I want to be able to
> sort
> > query result in the order of most viewed pages.  I see three ways to do
> > it:
> >
> > 1.       Search result sorting
> >
> > Search.search(query, sort);
> >
> > 2.       Use the counter itself as the score
> >
> > FieldScoreQuery("COUNTER", FieldScoreQuery.Type.INT);
> >
> > 3.       Customize scoring
> >
> > Set boost on COUNTER field during index time
> >
> >
> >
> > I haven't got the last one working yet.  Somehow, when I query, boost
> > value
> > on the COUNTER field is ignored.
> >
> >
> >
> > Any inputs?
> >
> >
> >
> > Thanks,
> >
> > John X.
> >
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_2171_20191250.1207163017852--

From java-user-return-33442-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 02 19:09:32 2008
Return-Path: <java-user-return-33442-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99573 invoked from network); 2 Apr 2008 19:09:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Apr 2008 19:09:31 -0000
Received: (qmail 33059 invoked by uid 500); 2 Apr 2008 19:09:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33037 invoked by uid 500); 2 Apr 2008 19:09:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33026 invoked by uid 99); 2 Apr 2008 19:09:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Apr 2008 12:09:24 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of michael.wechner@wyona.com designates 195.226.6.75 as permitted sender)
Received: from [195.226.6.75] (HELO server1.example.com) (195.226.6.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Apr 2008 19:08:40 +0000
Received: from [192.168.3.103] (106-134.0-85.cust.bluewin.ch [85.0.134.106])
	by server1.example.com (Postfix) with ESMTP id 1B76A10C944
	for <java-user@lucene.apache.org>; Wed,  2 Apr 2008 21:10:04 +0200 (CEST)
Message-ID: <47F3D9C9.4090709@wyona.com>
Date: Wed, 02 Apr 2008 21:08:57 +0200
From: Michael Wechner <michael.wechner@wyona.com>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7.12) Gecko/20050920
X-Accept-Language: en-us, fr-ch, it-ch, en, de
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Adding attribute to index
References: <2AE56FA3F71F09468C8EBDDEFE8EB5110573AEC4@xmb-sjc-21b.amer.cisco.com>
In-Reply-To: <2AE56FA3F71F09468C8EBDDEFE8EB5110573AEC4@xmb-sjc-21b.amer.cisco.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Nitasha Walia (niwalia) wrote:

> Hi,
>  
> I am a new user of Java Lucene and need to learn how to add a new 
> attribute, such that, given a database of emails, containing sender 
> information, searching for a keyword, results in


what kind of database do you use to store your emails?

I am asking because it might make sense to introduce some data 
abstraction layer (for example JCR or Yarep) which would access your 
database and has built-in Lucene and hence you would't have to worry 
about Lucene itself, but could rather search like

Node[] emails = getRepository("emails").search("sender", QUERY);
for (i < emails.length) System.out.print(emails[i].getProperty("body");

> 1. The sender of the email
> 2. The email.


Otherwise I would suggest to start at

http://lucene.apache.org/java/2_3_1/gettingstarted.html

HTH

Michael

>  
> I am using Lucene-2.3.1, and don't know where to start in the huge 
> code base.
>  
> Can someone please advise on the same?
>  
> Thanks,
>
> *Nitasha Walia*
> *Software Engineer*
> **Product Development*
> *
> niwalia@cisco.com <mailto:niwalia@cisco.com>
> Mobile: *412-736 4507*
>
> 	
>
> **
>
> United States
> Cisco home page <http://www.cisco.com/>
>
> 	 
>
> Think before you print. Think before you print.
> This e-mail may contain confidential and privileged material for the 
> sole use of the intended recipient. Any review, use, distribution or 
> disclosure by others is strictly prohibited. If you are not the 
> intended recipient (or authorized to receive for the recipient), 
> please contact the sender by reply e-mail and delete all copies of 
> this message.
>
>
>  



-- 
Michael Wechner
Wyona      -   Open Source Content Management - Yanel, Yulup
http://www.wyona.com
michael.wechner@wyona.com, michi@apache.org
+41 44 272 91 61


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33443-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 02 20:59:17 2008
Return-Path: <java-user-return-33443-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69794 invoked from network); 2 Apr 2008 20:59:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Apr 2008 20:59:17 -0000
Received: (qmail 33348 invoked by uid 500); 2 Apr 2008 20:59:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33321 invoked by uid 500); 2 Apr 2008 20:59:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33310 invoked by uid 99); 2 Apr 2008 20:59:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Apr 2008 13:59:10 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [204.90.187.18] (HELO smtp-gw4.us.gxs.com) (204.90.187.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Apr 2008 20:58:29 +0000
Received: from unknown (HELO ohiocas02.internal.gxs.com) ([10.160.68.74])
  by bro01smtpgxs.ohctr.gxs.com with ESMTP; 02 Apr 2008 16:58:40 -0400
Received: from AMERICASMAIL01.internal.gxs.com ([10.97.69.45]) by
 ohiocas02.internal.gxs.com ([10.160.68.74]) with mapi; Wed, 2 Apr 2008
 16:58:41 -0400
From: <Bruce.Nawrocki@gxs.com>
To: <java-user@lucene.apache.org>
Date: Wed, 2 Apr 2008 16:58:38 -0400
Subject: Unicode Tokenizer problem with Registered Trademark Search
Thread-Topic: Unicode Tokenizer problem with Registered Trademark Search
Thread-Index: AciVBFL1+jbIa8j0R/GVBr1uxQ2Kyw==
Message-ID: <F023B4AFE64FC7419B5F2B6341BEC716281EF0F1AC@AMERICASMAIL01.internal.gxs.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: multipart/alternative;
	boundary="_000_F023B4AFE64FC7419B5F2B6341BEC716281EF0F1ACAMERICASMAIL0_"
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_F023B4AFE64FC7419B5F2B6341BEC716281EF0F1ACAMERICASMAIL0_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


I am having a problem when searching for certain Unicode characters, such a=
s the Registered Trademark. That's the Unicode character 00AE. It's also a =
problem searching for a Japanese Yen symbol (Unicode character 00A5).

I'm using the Lucene 2.0.0 jar file, and we used to use Lucene 1.4.2 jar fi=
le, where this used to work OK. But Lucene 2.0.0 doesn't work the same way.

I see that the registered trademark is in the Lucene index file, so that's =
good. The problem comes when I try to search for these characters.

I see that my query starts off OK, as this:

( (Locale:en) AND ( productName:(Digital=A5^95) ) )    (if you cannot see t=
he Japanese Yen symbol, it comes directly after "Digital")

Note: the "^95" is just a boost factor, and is OK.

I'm using StandardAnalyzer and StandardTokenizer to create a new QueryParse=
r , and after I call the "parse" method of the QueryParser, my query become=
s this:

 +Locale:en +productName:digital^95.0

Notice that the Japanese Yen symbol is gone! I think it's because the Stand=
ardTokenizer.jj file doesn't handle this character, and so it throws it awa=
y.

Is there any way to use a different Analyzer and/or Tokenizer, rather than =
building my own?

And if I had created my Lucene indexes with the StandardAnalyzer, must I us=
e the StandardAnalyzer and StandardTokenizer to search the index?

Thanks.

--_000_F023B4AFE64FC7419B5F2B6341BEC716281EF0F1ACAMERICASMAIL0_--

From java-user-return-33444-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 02 21:10:55 2008
Return-Path: <java-user-return-33444-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76399 invoked from network); 2 Apr 2008 21:10:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Apr 2008 21:10:55 -0000
Received: (qmail 62643 invoked by uid 500); 2 Apr 2008 21:10:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62617 invoked by uid 500); 2 Apr 2008 21:10:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62601 invoked by uid 99); 2 Apr 2008 21:10:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Apr 2008 14:10:47 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [62.23.130.171] (HELO chico.albert-inc.com) (62.23.130.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Apr 2008 21:10:05 +0000
Received: from chico.albert-inc.com (unknown [127.0.0.1])
	by localhost (Postfix) with ESMTP id 510DC8C772
	for <java-user@lucene.apache.org>; Wed,  2 Apr 2008 23:09:41 +0200 (CEST)
Received: by chico.albert-inc.com (Postfix, from userid 0)
	id 3CA8A8D31D; Wed,  2 Apr 2008 23:07:54 +0200 (CEST)
X-Spam-Checker-Version: SpamAssassin 3.1.4 (2006-07-25) on 
	chico.albert-inc.com
X-Spam-Level: ****
Received: from sophia (ip-37.net-89-3-109.rev.numericable.fr [89.3.109.37])
	by chico.albert-inc.com (Postfix) with ESMTP id 9CB768C772
	for <java-user@lucene.apache.org>; Wed,  2 Apr 2008 23:07:41 +0200 (CEST)
From: =?iso-8859-1?Q?Dominique_B=E9jean?= <dominique.bejean@eolya.fr>
To: <java-user@lucene.apache.org>
Subject: RE: Problems about using Lucene to generate tag cloud..
Date: Wed, 2 Apr 2008 23:08:09 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
Thread-Index: AciURBWICNtgS2qnRq+ahcqvl90lVQAvtU/w
In-Reply-To: <200804020857.53106.daniel@nuix.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
Message-Id: <20080402210751.9CB768C772@chico.albert-inc.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=4.4 required=8.0 tests=BAYES_50,MSGID_FROM_MTA_ID,
	RCVD_IN_PBL autolearn=no version=3.1.4

Hum, it looks like it is not true.
Use a do-while loop make the first terms.term().field() generate a null
pointer exception.

-----Message d'origine-----
De=A0: Daniel Noll [mailto:daniel@nuix.com]=20
Envoy=E9=A0: mardi 1 avril 2008 23:58
=C0=A0: java-user@lucene.apache.org
Objet=A0: Re: Problems about using Lucene to generate tag cloud..

On Tuesday 01 April 2008 18:51:55 Dominique B=E9jean wrote:
>         IndexReader reader =3D IndexReader.open(temp_index);
>         TermEnum terms =3D reader.terms();
>
>         while (terms.next()) {
>             String field =3D terms.term().field();

Gotcha: after calling terms() it's already pointing at the first term.  =
So
you=20
need to rewrite this as a do-while loop.

Possibly my least favourite feature of Lucene. :-(

Daniel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33445-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 02 21:51:08 2008
Return-Path: <java-user-return-33445-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94009 invoked from network); 2 Apr 2008 21:51:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Apr 2008 21:51:08 -0000
Received: (qmail 41326 invoked by uid 500); 2 Apr 2008 21:51:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41300 invoked by uid 500); 2 Apr 2008 21:51:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41289 invoked by uid 99); 2 Apr 2008 21:51:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Apr 2008 14:51:00 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Apr 2008 21:50:19 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Unicode Tokenizer problem with Registered Trademark Search
Date: Wed, 2 Apr 2008 17:49:19 -0400
Message-ID: <9294E20AED46934EA459020706463F94A0425F@SUEXCL-02.ad.syr.edu>
In-Reply-To: <F023B4AFE64FC7419B5F2B6341BEC716281EF0F1AC@AMERICASMAIL01.internal.gxs.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Unicode Tokenizer problem with Registered Trademark Search
Thread-Index: AciVBFL1+jbIa8j0R/GVBr1uxQ2KywAAtK3w
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Bruce,

On 04/02/2008 at 4:58 PM, Bruce.Nawrocki@gxs.com wrote:
> I am having a problem when searching for certain Unicode
> characters, such as the Registered Trademark. That's the
> Unicode character 00AE. It's also a problem searching for a
> Japanese Yen symbol (Unicode character 00A5).
>=20
> I'm using the Lucene 2.0.0 jar file, and we used to use
> Lucene 1.4.2 jar file, where this used to work OK. But Lucene
> 2.0.0 doesn't work the same way.

I don't see anything that would have caused such a change - below is a =
colored side-by-side diff of StandardTokenizer.jj at revisions 150560 =
and 409716, corresponding to the lucene_1_4_2 and lucene_2_0_0 tags, =
respectively:

<http://svn.apache.org/viewvc/lucene/java/tags/lucene_2_0_0/src/java/org/=
apache/lucene/analysis/standard/StandardTokenizer.jj?r1=3D150560&r2=3D409=
716&diff_format=3Dh>

(Note that the JavaCC-targetted StandardAnalyzer.jj was replaced at =
release 2.3.0 by JFlex-targetted StandardTokenizerImpl.jflex for =
performance reasons - see =
<http://issues.apache.org/jira/browse/LUCENE-966>.)

> I see that the registered trademark is in the Lucene index
> file, so that's good. The problem comes when I try to search
> for these characters.
>
> I see that my query starts off OK, as this:
>=20
> ( (Locale:en) AND ( productName:(Digital=A5^95) ) )    (if you
> cannot see the Japanese Yen symbol, it comes directly after "Digital")
>=20
> Note: the "^95" is just a boost factor, and is OK.
>=20
> I'm using StandardAnalyzer and StandardTokenizer to create a
> new QueryParser , and after I call the "parse" method of the
> QueryParser, my query becomes this:
>=20
>  +Locale:en +productName:digital^95.0
>=20
> Notice that the Japanese Yen symbol is gone! I think it's
> because the StandardTokenizer.jj file doesn't handle this
> character, and so it throws it away.
>=20
> Is there any way to use a different Analyzer and/or
> Tokenizer, rather than building my own?
>=20
> And if I had created my Lucene indexes with the
> StandardAnalyzer, must I use the StandardAnalyzer and
> StandardTokenizer to search the index?

In order for the Yen and Registered Trademark symbols to appear in the =
index, you must have used a different analyzer for indexing than the one =
you're using for querying.  This can lead to problems, as you have =
discovered.

The short answer is: you should use the same analyzer.

The longer answer is that you should use "compatible" analyzers.  =
"Compatibility" means that the terms produced by the query-time analyzer =
have corresponding index terms.  Of course, this condition is satisfied =
by using the same analyzer at both index- and query-time.  An example of =
compatibile, but different, analyzers is index- or query-time synonym =
injection.

I don't know why you weren't seeing this problem with Lucene 1.4.2, but =
is it possible that the 1.4.2-created index did *not* have these two =
symbols?  If that were true, then you would get the hits you're looking =
for, though you might get some others that you don't want.

Steve

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33446-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 02 23:13:37 2008
Return-Path: <java-user-return-33446-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41053 invoked from network); 2 Apr 2008 23:13:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Apr 2008 23:13:37 -0000
Received: (qmail 68569 invoked by uid 500); 2 Apr 2008 23:13:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68545 invoked by uid 500); 2 Apr 2008 23:13:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68533 invoked by uid 99); 2 Apr 2008 23:13:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Apr 2008 16:13:27 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Apr 2008 23:12:46 +0000
Received: from host68.syd.nuix.com.au (host68.syd.nuix.com.au [192.168.222.68])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 4C4E54A814D
	for <java-user@lucene.apache.org>; Thu,  3 Apr 2008 10:13:14 +1100 (EST)
From: Daniel Noll <daniel@nuix.com>
Organization: Nuix Pty Ltd
To: java-user@lucene.apache.org
Subject: Re: Problems about using Lucene to generate tag cloud..
Date: Thu, 3 Apr 2008 10:12:24 +1100
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <20080402210751.9CB768C772@chico.albert-inc.com>
In-Reply-To: <20080402210751.9CB768C772@chico.albert-inc.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200804031012.24393.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Thursday 03 April 2008 08:08:09 Dominique B=E9jean wrote:
> Hum, it looks like it is not true.
> Use a do-while loop make the first terms.term().field() generate a null
> pointer exception.

Depends which terms method you use.

    TermEnum terms =3D reader.terms();
    System.out.println(terms.term());   =3D> null

    terms =3D reader.terms(new Term("id", ""));
    System.out.println(terms.term());   =3D> id:0

The first method makes a normal while loop work but it also makes the=20
assumption that there is only one field in the index, which may not be the=
=20
case forever even if it's the case initially.

Daniel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33447-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 03 10:04:33 2008
Return-Path: <java-user-return-33447-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73293 invoked from network); 3 Apr 2008 10:04:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Apr 2008 10:04:33 -0000
Received: (qmail 73823 invoked by uid 500); 3 Apr 2008 10:04:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73650 invoked by uid 500); 3 Apr 2008 10:04:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73038 invoked by uid 99); 3 Apr 2008 10:04:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Apr 2008 03:04:11 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [62.213.161.134] (HELO pmx.sirma.bg) (62.213.161.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Apr 2008 10:03:21 +0000
X-Virus-Scanned: Sirma Antivirus System
Received: from [192.168.128.140] (ivasilev.sirma.int [192.168.128.140])
	by pmx.sirma.bg (Sirma mail system) with ESMTP id 1EB8B24002
	for <java-user@lucene.apache.org>; Thu,  3 Apr 2008 13:03:41 +0300 (EEST)
Message-ID: <47F4AB7C.7090702@sirma.bg>
Date: Thu, 03 Apr 2008 13:03:40 +0300
From: Ivan Vasilev <ivasilev@sirma.bg>
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: LUCENE MAIL LIST <java-user@lucene.apache.org>
Subject: PhraseQuery little bug?
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Guys,

I make the following test  I create 2 files. File1.txt with content:
apple 2 3 4 pear
And File2.txt with content:
pear 2 3 4 apple

I made the following searching tests:
1. Using Luke Search tab.

1.1. When searching for:
content:"pear apple"~3
Then the File1.txt is returned.

1.2. When searching for:
content:"pear apple"~4
Result is the same  File1.txt

1.3. When searching for:
content:"pear apple"~5
Both File1.txt and File2.txt are returned.

2. Using simple app that uses the class PhraseQuery  the results are 
the same as in Test 1.
PhraseQuery pq = new PhraseQuery();
pq.add(new Term("content", "apple"));
pq.add(new Term("content", "pear"));

2.1. pq.setSlop(3);
Then the File1.txt is returned.

2.2. pq.setSlop(4);
Result is the same  File1.txt

2.3. pq.setSlop(5);
Both File1.txt and File2.txt are returned.

3. Using simple app that uses the class SpanNearQuery  the results are 
now different (on my opinion these are the correct results):
new SpanNearQuery(new SpanQuery[]{
new SpanTermQuery(new Term("content", "apple")),
new SpanTermQuery(new Term("content", "pear"))}, 3, false);

Both File1.txt and File2.txt are returned.
When changing the slop from 3 to 2 (in the constructor)  no results found.

When changing it to 4  again 2 results are returned.
When changing the inOrder boolean (in the constructor) from false to 
true  then of course File2.txt is not returned under any other conditions.

Although this is not very important but I think PhraseQuery has a bit 
buggy behavior. When searching with slop equal to the number of words 
that are between the two searched words than the files that contain them 
IN THE SAME ORDER are returned.
When slop is with 2 greater  ranging search words, as well as, in 
between words  then THE ORDER of the searched words does not matter.

Best Regards,
Ivan


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33448-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 03 10:18:47 2008
Return-Path: <java-user-return-33448-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80263 invoked from network); 3 Apr 2008 10:18:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Apr 2008 10:18:46 -0000
Received: (qmail 95076 invoked by uid 500); 3 Apr 2008 10:18:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95039 invoked by uid 500); 3 Apr 2008 10:18:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95026 invoked by uid 99); 3 Apr 2008 10:18:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Apr 2008 03:18:39 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [62.213.161.134] (HELO pmx.sirma.bg) (62.213.161.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Apr 2008 10:17:55 +0000
X-Virus-Scanned: Sirma Antivirus System
Received: from [192.168.128.140] (ivasilev.sirma.int [192.168.128.140])
	by pmx.sirma.bg (Sirma mail system) with ESMTP id 6272C24010
	for <java-user@lucene.apache.org>; Thu,  3 Apr 2008 13:18:04 +0300 (EEST)
Message-ID: <47F4AEDC.9060607@sirma.bg>
Date: Thu, 03 Apr 2008 13:18:04 +0300
From: Ivan Vasilev <ivasilev@sirma.bg>
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: PhraseQuery little bug?
References: <47F4AB7C.7090702@sirma.bg>
In-Reply-To: <47F4AB7C.7090702@sirma.bg>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Of cours in our system I can use SpanNearQuery instead of PhraseQuery.
My question is is there known performance differences between the two 
classes?



Ivan Vasilev wrote:
> Hi Guys,
>
> I make the following test  I create 2 files. File1.txt with content:
> apple 2 3 4 pear
> And File2.txt with content:
> pear 2 3 4 apple
>
> I made the following searching tests:
> 1. Using Luke Search tab.
>
> 1.1. When searching for:
> content:"pear apple"~3
> Then the File1.txt is returned.
>
> 1.2. When searching for:
> content:"pear apple"~4
> Result is the same  File1.txt
>
> 1.3. When searching for:
> content:"pear apple"~5
> Both File1.txt and File2.txt are returned.
>
> 2. Using simple app that uses the class PhraseQuery  the results are 
> the same as in Test 1.
> PhraseQuery pq = new PhraseQuery();
> pq.add(new Term("content", "apple"));
> pq.add(new Term("content", "pear"));
>
> 2.1. pq.setSlop(3);
> Then the File1.txt is returned.
>
> 2.2. pq.setSlop(4);
> Result is the same  File1.txt
>
> 2.3. pq.setSlop(5);
> Both File1.txt and File2.txt are returned.
>
> 3. Using simple app that uses the class SpanNearQuery  the results 
> are now different (on my opinion these are the correct results):
> new SpanNearQuery(new SpanQuery[]{
> new SpanTermQuery(new Term("content", "apple")),
> new SpanTermQuery(new Term("content", "pear"))}, 3, false);
>
> Both File1.txt and File2.txt are returned.
> When changing the slop from 3 to 2 (in the constructor)  no results 
> found.
>
> When changing it to 4  again 2 results are returned.
> When changing the inOrder boolean (in the constructor) from false to 
> true  then of course File2.txt is not returned under any other 
> conditions.
>
> Although this is not very important but I think PhraseQuery has a bit 
> buggy behavior. When searching with slop equal to the number of words 
> that are between the two searched words than the files that contain 
> them IN THE SAME ORDER are returned.
> When slop is with 2 greater  ranging search words, as well as, in 
> between words  then THE ORDER of the searched words does not matter.
>
> Best Regards,
> Ivan
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> __________ NOD32 2996 (20080403) Information __________
>
> This message was checked by NOD32 antivirus system.
> http://www.eset.com
>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33449-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 03 12:24:17 2008
Return-Path: <java-user-return-33449-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32485 invoked from network); 3 Apr 2008 12:24:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Apr 2008 12:24:17 -0000
Received: (qmail 50848 invoked by uid 500); 3 Apr 2008 12:24:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50812 invoked by uid 500); 3 Apr 2008 12:24:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50801 invoked by uid 99); 3 Apr 2008 12:24:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Apr 2008 05:24:10 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [217.147.24.8] (HELO devel.uw.ru) (217.147.24.8)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Apr 2008 12:23:19 +0000
Received: from [192.168.1.103] (router2.hsol.uw.ru [217.147.24.3])
	by devel.uw.ru (8.13.8/8.13.8) with ESMTP id m33COrAx018476
	for <java-user@lucene.apache.org>; Thu, 3 Apr 2008 16:24:53 +0400
From: =?utf-8?b?0JjQu9GM0Y8g0JrQsNC30L3QsNGH0LXQtdCy?= <ilyak@office.uw.ru>
Organization: UlterWest
To: java-user@lucene.apache.org
Subject: Implementing CMS search function using Lucene
Date: Thu, 3 Apr 2008 16:24:15 +0400
User-Agent: KMail/1.9.9
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200804031624.16155.ilyak@office.uw.ru>
X-Virus-Checked: Checked by ClamAV on apache.org

Hello.

We've designing a CMS in Java, and I've trying to implement site search 
function using lucene.

The basic conception is that:
- Site features numerous objects that we'd like to throw into index: pages, 
various text blocks on those pages, descriptions and keyword lists of those 
pages, static bits of html, goods sections with goods inside them, etc, etc.
- There would be a search form that would be occasionally used by site 
visitors.
- Visitors are highly unlikely to use advanced queries. I assume 95% queries 
would be either a few keywords or a phrase to search. We have to find the 
best matches for such queries.
- The thing I want to introduce is "phrase in quotes" to search for exact 
phrase. Also, most our sites are in Russian, so some, even if rudimentary, 
support for Russian morphology is a plus.

I've dug into examples and have a following set of questions:
- Our objects are fairly structured, so I would like to introduce a lot of 
fields, something like five different for each object type.
But, as far as I see, all Queries are going to search only one field.
This is certainly bad because users surely want to search *all* the fields at 
once. The aren't going to bother with queries.
Maybe I can add queries over every field joined by 'or' operation, but 
wouldn't that be too slow? I don't want it to work more than half second on 
reasonable sized index. Also, I don't want to hard-code exact list of fields, 
I might add them as I develop the system. Is this doable, would that work? Or 
I'll have to stuff all text content from object into one blob-field and query 
that? Which way is more reasonable?
- Our objects have their hierarchy, e.g., blocks belong to page. Is there a 
way to make Lucene govern parent-child relation, somehow summing hits in all 
childs to find the best-matching parent? I assume, no, then is there a way 
for me to go thru matching documents list, reducing it by 'adding' blocks' 
scores to find the best matching page?
- Is there a way to set weights for different fields? Let's say, content have 
a weight of 1, title have a weight of 5 and picture subscribe have a weight 
of 0.5. If no, can I do that by hand?
- Is there something to support Russian morphology (it's all like "the last n 
letters of a word might change, we should match all forms") for either 
indexer or searcher? Maybe "inexact match", QueryParser's ~ operator, would 
be enough? I heard Nutch project have something like that, but I wonder if I 
would be able to reuse parts of Nutch, and I surely can't use Nutch as a 
whole.

If there are another considerations, they're welcome.

Thanks for your probable replies.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33450-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 03 12:36:13 2008
Return-Path: <java-user-return-33450-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37540 invoked from network); 3 Apr 2008 12:36:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Apr 2008 12:36:13 -0000
Received: (qmail 72071 invoked by uid 500); 3 Apr 2008 12:36:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72043 invoked by uid 500); 3 Apr 2008 12:36:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72031 invoked by uid 99); 3 Apr 2008 12:36:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Apr 2008 05:36:06 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.68.5.9] (HELO relay00.pair.com) (209.68.5.9)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 03 Apr 2008 12:35:16 +0000
Received: (qmail 59163 invoked from network); 3 Apr 2008 12:35:33 -0000
Received: from unknown (HELO GEMINI) (unknown)
  by unknown with SMTP; 3 Apr 2008 12:35:33 -0000
X-pair-Authenticated: 68.84.138.127
Message-ID: <005201c89587$38d86b10$8a01a8c0@GEMINI>
From: "Darren Govoni" <darren@ontrenet.com>
To: <java-user@lucene.apache.org>
References: <47F4AB7C.7090702@sirma.bg>
Subject: Re: PhraseQuery little bug?
Date: Thu, 3 Apr 2008 08:35:38 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="Windows-1252";
	reply-type=response
Content-Transfer-Encoding: 8bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
X-Virus-Checked: Checked by ClamAV on apache.org

One interpretation of the query with ~5 is that your text has 5 words
and ~5 would imply a word in any position can match. Could it be this?

----- Original Message ----- 
From: "Ivan Vasilev" <ivasilev@sirma.bg>
To: "LUCENE MAIL LIST" <java-user@lucene.apache.org>
Sent: Thursday, April 03, 2008 6:03 AM
Subject: PhraseQuery little bug?


> Hi Guys,
>
> I make the following test  I create 2 files. File1.txt with content:
> apple 2 3 4 pear
> And File2.txt with content:
> pear 2 3 4 apple
>
> I made the following searching tests:
> 1. Using Luke Search tab.
>
> 1.1. When searching for:
> content:"pear apple"~3
> Then the File1.txt is returned.
>
> 1.2. When searching for:
> content:"pear apple"~4
> Result is the same  File1.txt
>
> 1.3. When searching for:
> content:"pear apple"~5
> Both File1.txt and File2.txt are returned.
>
> 2. Using simple app that uses the class PhraseQuery  the results are the 
> same as in Test 1.
> PhraseQuery pq = new PhraseQuery();
> pq.add(new Term("content", "apple"));
> pq.add(new Term("content", "pear"));
>
> 2.1. pq.setSlop(3);
> Then the File1.txt is returned.
>
> 2.2. pq.setSlop(4);
> Result is the same  File1.txt
>
> 2.3. pq.setSlop(5);
> Both File1.txt and File2.txt are returned.
>
> 3. Using simple app that uses the class SpanNearQuery  the results are 
> now different (on my opinion these are the correct results):
> new SpanNearQuery(new SpanQuery[]{
> new SpanTermQuery(new Term("content", "apple")),
> new SpanTermQuery(new Term("content", "pear"))}, 3, false);
>
> Both File1.txt and File2.txt are returned.
> When changing the slop from 3 to 2 (in the constructor)  no results 
> found.
>
> When changing it to 4  again 2 results are returned.
> When changing the inOrder boolean (in the constructor) from false to 
> true  then of course File2.txt is not returned under any other 
> conditions.
>
> Although this is not very important but I think PhraseQuery has a bit 
> buggy behavior. When searching with slop equal to the number of words that 
> are between the two searched words than the files that contain them IN THE 
> SAME ORDER are returned.
> When slop is with 2 greater  ranging search words, as well as, in between 
> words  then THE ORDER of the searched words does not matter.
>
> Best Regards,
> Ivan
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33451-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 03 12:48:25 2008
Return-Path: <java-user-return-33451-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42425 invoked from network); 3 Apr 2008 12:48:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Apr 2008 12:48:24 -0000
Received: (qmail 96031 invoked by uid 500); 3 Apr 2008 12:48:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95992 invoked by uid 500); 3 Apr 2008 12:48:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95981 invoked by uid 99); 3 Apr 2008 12:48:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Apr 2008 05:48:17 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [202.137.233.110] (HELO rediff.co.in) (202.137.233.110)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Apr 2008 12:47:25 +0000
Received: (qmail 2475 invoked from network); 3 Apr 2008 18:19:46 +0530
Received: from unknown (HELO bhavin) (192.168.30.9)
  by mailserver with SMTP; 3 Apr 2008 18:19:46 +0530
Message-ID: <010701c8958a$48fb18a0$e70310ac@bhavin>
Reply-To: "Bhavin Pandya" <bhavinp@rediff.co.in>
From: "Bhavin Pandya" <bhavinp@rediff.co.in>
To: <java-user@lucene.apache.org>
References: <16418709.post@talk.nabble.com>
Subject: Re: Controlling index file name
Date: Thu, 3 Apr 2008 18:27:33 +0530
Organization: rediff.com
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
X-Virus-Checked: Checked by ClamAV on apache.org

I also faced same problem in past.
But in my case the index size was not the issue so i maintained two folder 
"newindex" and "oldindex"... and swaping at every update.

-Bhavin pandya

----- Original Message ----- 
From: "021336" <smith_brad@bah.com>
To: <java-user@lucene.apache.org>
Sent: Tuesday, April 01, 2008 9:44 PM
Subject: Controlling index file name


>
> We use Lucene to create simple data stores that we deploy with our
> application.  Our application also supports auto-updating and we refresh
> these data stores monthly.  Since Lucene computes the names for the index 
> we
> end up deploying new files each time while leaving the old files to 
> continue
> taking up space needlessly.
>
> The options I see to resolve this are:
> - After each update check all the data store locations and delete CFS 
> files
> that have a date earlier then the Segments files, or
> - Create the index files with a consistent name so that we overwrite
> existing files with new files during each auto-update.
>
> I found one thread discussing this using "AddIndexes" but I could not 
> follow
> it through to implementation.  Also, we are using Java 1.4 not 1.5.
>
> Any suggestions?
>
>
> -- 
> View this message in context: 
> http://www.nabble.com/Controlling-index-file-name-tp16418709p16418709.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33452-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 03 13:12:35 2008
Return-Path: <java-user-return-33452-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55395 invoked from network); 3 Apr 2008 13:12:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Apr 2008 13:12:35 -0000
Received: (qmail 30848 invoked by uid 500); 3 Apr 2008 13:12:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30817 invoked by uid 500); 3 Apr 2008 13:12:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30806 invoked by uid 99); 3 Apr 2008 13:12:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Apr 2008 06:12:28 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of celikik@gmail.com designates 209.85.128.184 as permitted sender)
Received: from [209.85.128.184] (HELO fk-out-0910.google.com) (209.85.128.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Apr 2008 13:11:46 +0000
Received: by fk-out-0910.google.com with SMTP id 19so4263930fkr.5
        for <java-user@lucene.apache.org>; Thu, 03 Apr 2008 06:11:58 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:user-agent:mime-version:to:subject:content-type:content-transfer-encoding:from;
        bh=NjHOd5WSqaxys7FrUySe7xYiSO26zclhrXAjI49Rry4=;
        b=RzwhtlLZjqNdpaGUIQ56isTlMsh0kByiD0HZjGptLfTmFeBiSkal9cqujvS85RMDNxsvgxkXH6rV1lHNjGlZJGTbnWeoq8QD+L7phyylqZQb84EsngVYNBoBRMnkVtQGxolhv3uW7G5bBU6HN1+bfAPlDAeUbsVsNJtIcf7YRNs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:user-agent:mime-version:to:subject:content-type:content-transfer-encoding:from;
        b=o8c782tG0INXaPvxZU7oJen0lyQ5Vku1HWwfEuXop7qikIbtL/TgPVtLBNXah+OdwKpQ5ixdYhJ6wsqMsc+b+mjwlFf9x4z/0uA5XfYbOw5bAjXSQti+kEdhs9zU1ZG5R+doqCM6XFG0tIi+W6aqzFULtCQR0NFg471fyKIo/Y4=
Received: by 10.82.161.19 with SMTP id j19mr27135226bue.12.1207228317910;
        Thu, 03 Apr 2008 06:11:57 -0700 (PDT)
Received: from ?139.19.14.30? ( [139.19.14.30])
        by mx.google.com with ESMTPS id 12sm4563393fks.12.2008.04.03.06.11.56
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 03 Apr 2008 06:11:56 -0700 (PDT)
Message-ID: <47F4D79B.8070703@googlemail.com>
Date: Thu, 03 Apr 2008 15:11:55 +0200
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Error tolerant text search with Lucene?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
From: Marjan Celikik <celikik@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi everyone,

I know that there are packages that support the "Did you mean ... ?" 
search features with lucene which tries to find the most suited 
correct-word query.. however, so far I haven't encountered the opposite 
search feature: given a correct query, find all documents which contain 
misspellings of the query.. are you guys aware of anything like this 
with lucene?

Thanks!

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33453-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 03 14:27:44 2008
Return-Path: <java-user-return-33453-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95344 invoked from network); 3 Apr 2008 14:27:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Apr 2008 14:27:44 -0000
Received: (qmail 55487 invoked by uid 500); 3 Apr 2008 14:27:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55453 invoked by uid 500); 3 Apr 2008 14:27:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55442 invoked by uid 99); 3 Apr 2008 14:27:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Apr 2008 07:27:37 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of john.wang@gmail.com designates 72.14.220.154 as permitted sender)
Received: from [72.14.220.154] (HELO fg-out-1718.google.com) (72.14.220.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Apr 2008 14:26:56 +0000
Received: by fg-out-1718.google.com with SMTP id d23so2839389fga.27
        for <java-user@lucene.apache.org>; Thu, 03 Apr 2008 07:27:07 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=tyePL8xFtZGYJisi2r7XIr+xVCo+tYOuqJr7KEozjv4=;
        b=Kag1YeZqaAVTNGPDRei/w2lW7/5bk3CNWtVWy4qMKnmJpMokhfVlyFQPXwPHin/uR2dhoy8vfeT1Cn1WjnmoO2f7by5AGBJ/H+vePsqS3zVgKZaS3WGXevbMLdMtpaewu5WLe1WecuOioISWHVD4EMvnbAncy+R9MbhhccxSKT8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=doT/KUmZus1dFfkd4X7m0jDajDaZT4F0QlCxnPhD6MU8bqv97j2kpwG463iatuQJSuoHNRSdNoGHebBGeXrF/alJNtCdsHXe3S+9kzddsx1NYC6LINQNyv1Muv4jpDvW4RWK/Q+wwEalcORhrqeBuzxkeLeyPB+6mJF7iOmXhig=
Received: by 10.86.31.18 with SMTP id e18mr7174062fge.68.1207232827098;
        Thu, 03 Apr 2008 07:27:07 -0700 (PDT)
Received: by 10.86.82.10 with HTTP; Thu, 3 Apr 2008 07:27:07 -0700 (PDT)
Message-ID: <8837fb770804030727w474f9a7epb4131bfc29716fa6@mail.gmail.com>
Date: Thu, 3 Apr 2008 07:27:07 -0700
From: "John Wang" <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: payload performance wrt fieldcache
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1411_8326453.1207232827090"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1411_8326453.1207232827090
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi:

------=_Part_1411_8326453.1207232827090--

From java-user-return-33454-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 03 14:37:19 2008
Return-Path: <java-user-return-33454-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2427 invoked from network); 3 Apr 2008 14:37:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Apr 2008 14:37:19 -0000
Received: (qmail 74803 invoked by uid 500); 3 Apr 2008 14:37:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74764 invoked by uid 500); 3 Apr 2008 14:37:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74753 invoked by uid 99); 3 Apr 2008 14:37:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Apr 2008 07:37:12 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of john.wang@gmail.com designates 72.14.220.153 as permitted sender)
Received: from [72.14.220.153] (HELO fg-out-1718.google.com) (72.14.220.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Apr 2008 14:36:31 +0000
Received: by fg-out-1718.google.com with SMTP id d23so2842415fga.27
        for <java-user@lucene.apache.org>; Thu, 03 Apr 2008 07:36:42 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=1n0edRplN0YxwABnJF7NynhGhoyc5iRoT38J8MYvQk0=;
        b=XWMCoPp2hCOcVor9kNY/PEniAPQrYTBxX25oEdFKnFhRvuaOmnvg7RuWN4C+D1qRyXDveF71jk5Bm+P8beypJo/+Ssq7gN7bJpzHTY60QSwvGwYDS1J5Jf0FsLDXAfhaXcqrcE90BGsWY6caV+2f/oL1nyZxScjLJyBWFRznEpw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=NrC3xZOhoEBNzP29y4bxRpcmpR2Pjw2kvIFoD7g+OKtmEfRhHsMh3CswjM8WTSkdKlp/Nd8GDsYQyeNWL/vvGpOC8+tYpqug1pCaUOJk0+/YyCIYkHiNo9eg80TBO+/NvtOTNFmvWNMELd/rH3pahqrU1OtLfARPTGWg/7A1dkE=
Received: by 10.86.72.15 with SMTP id u15mr7187809fga.21.1207233402121;
        Thu, 03 Apr 2008 07:36:42 -0700 (PDT)
Received: by 10.86.82.10 with HTTP; Thu, 3 Apr 2008 07:36:42 -0700 (PDT)
Message-ID: <8837fb770804030736w235452fcwde3f684d5722d105@mail.gmail.com>
Date: Thu, 3 Apr 2008 07:36:42 -0700
From: "John Wang" <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: payload performance wrt fieldcache
In-Reply-To: <8837fb770804030727w474f9a7epb4131bfc29716fa6@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1490_31027156.1207233402134"
References: <8837fb770804030727w474f9a7epb4131bfc29716fa6@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1490_31027156.1207233402134
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Sorry, gmail was screwy and accidentally sent the msg.
Anyway,

I have a large index, about 30M docs.
I have a date field (by days) and there are about 1000 of them, every doc
has a date field filled in.

So out of curiosity I index the date field two ways:
1) using "date" as a field, and set the date value for each doc.
2) new term: "_payload:_val" and added the date (as a long or 8 byte array)
into the payload of each doc.

loading into an array long[] of length maxdoc of dates, the performance was
surprising:
using payload is 7 times slower than using fieldcache.

At first I thought it was because of the conversion between byte[8] to a
long for each doc, I changed it so it loads into byte[8*maxdoc] without
doing the conversion, and the result is the same.

I then did another experiment:
lower the number of dates down to a small number, e.g. 50, and timed field
cache load, and it took much longer than when it had 1000.

I did some profiling and the profiler is pointing to TermPositions.next
and TermPositions.nextPosition and TermPositions.getPayload as the culprit.

I would think payload would always be faster. Any ideas?

Thanks
-John

On Thu, Apr 3, 2008 at 7:27 AM, John Wang <john.wang@gmail.com> wrote:

> Hi:
>
>

------=_Part_1490_31027156.1207233402134--

From java-user-return-33455-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 03 14:47:43 2008
Return-Path: <java-user-return-33455-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11370 invoked from network); 3 Apr 2008 14:47:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Apr 2008 14:47:42 -0000
Received: (qmail 98231 invoked by uid 500); 3 Apr 2008 14:47:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98205 invoked by uid 500); 3 Apr 2008 14:47:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98190 invoked by uid 99); 3 Apr 2008 14:47:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Apr 2008 07:47:32 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [217.147.24.8] (HELO devel.uw.ru) (217.147.24.8)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Apr 2008 14:46:40 +0000
Received: from [192.168.1.103] (router2.hsol.uw.ru [217.147.24.3])
	by devel.uw.ru (8.13.8/8.13.8) with ESMTP id m33EnKTG019176
	for <java-user@lucene.apache.org>; Thu, 3 Apr 2008 18:49:20 +0400
From: =?utf-8?b?0JjQu9GM0Y8g0JrQsNC30L3QsNGH0LXQtdCy?= <ilyak@office.uw.ru>
Organization: UlterWest
To: java-user@lucene.apache.org
Subject: Re: Implementing CMS search function using Lucene
Date: Thu, 3 Apr 2008 18:47:37 +0400
User-Agent: KMail/1.9.9
References: <200804031624.16155.ilyak@office.uw.ru>
In-Reply-To: <200804031624.16155.ilyak@office.uw.ru>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200804031847.37651.ilyak@office.uw.ru>
X-Virus-Checked: Checked by ClamAV on apache.org

=D0=92 =D1=81=D0=BE=D0=BE=D0=B1=D1=89=D0=B5=D0=BD=D0=B8=D0=B8 =D0=BE=D1=82 =
Thursday 03 April 2008 16:24:15 =D0=98=D0=BB=D1=8C=D1=8F =D0=9A=D0=B0=D0=B7=
=D0=BD=D0=B0=D1=87=D0=B5=D0=B5=D0=B2 =D0=BD=D0=B0=D0=BF=D0=B8=D1=81=D0=B0=
=D0=BB(=D0=B0):

> - Is there a way to set weights for different fields? Let's say, content
> have a weight of 1, title have a weight of 5 and picture subscribe have a
> weight of 0.5. If no, can I do that by hand?
Already found field.setBoost().
Sorry for asking lame questions :(

By the way, if setBoost() returned this, it would be much easier to assembl=
e=20
document, one line instead of three. Chaining rules.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33456-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 03 14:55:10 2008
Return-Path: <java-user-return-33456-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17511 invoked from network); 3 Apr 2008 14:55:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Apr 2008 14:55:10 -0000
Received: (qmail 23509 invoked by uid 500); 3 Apr 2008 14:55:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23480 invoked by uid 500); 3 Apr 2008 14:55:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23468 invoked by uid 99); 3 Apr 2008 14:55:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Apr 2008 07:55:03 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.222.209.11] (HELO mirkwood.informatics.jax.org) (209.222.209.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Apr 2008 14:54:22 +0000
Received: from [127.0.0.1] (ckpvpnclient25.jax.org [10.150.1.25])
	by mirkwood.informatics.jax.org (8.13.8/8.13.8) with ESMTP id m33EsUo5017026
	for <java-user@lucene.apache.org>; Thu, 3 Apr 2008 10:54:32 -0400 (EDT)
	(envelope-from mhall@informatics.jax.org)
Message-ID: <47F4EF0A.5030408@informatics.jax.org>
Date: Thu, 03 Apr 2008 10:51:54 -0400
From: Matthew Hall <mhall@informatics.jax.org>
User-Agent: Thunderbird 1.5.0.14 (Windows/20071210)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Implementing CMS search function using Lucene
References: <200804031624.16155.ilyak@office.uw.ru> <200804031847.37651.ilyak@office.uw.ru>
In-Reply-To: <200804031847.37651.ilyak@office.uw.ru>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

You could try something like this, which use when I put my own documents 
together:

    public Document getDocument(){
       
        Document doc = new Document();
       
        doc.add(new Field("db_key", this.getDb_key(), Field.Store.YES, 
Field.Index.UN_TOKENIZED));
        doc.add(new Field("acc_ids", this.getAcc_ids(), Field.Store.YES, 
Field.Index.TOKENIZED));
        doc.add(setBoost(new Field("name", this.getName(), 
Field.Store.YES, Field.Index.TOKENIZED), 1.0f));
        doc.add(setBoost(new Field("symbol", this.getSymbol(), 
Field.Store.YES, Field.Index.TOKENIZED), 1.0f));
        doc.add(setBoost(new Field("synonyms", this.getSynonyms(), 
Field.Store.YES, Field.Index.TOKENIZED), .8f));
        doc.add(setBoost(new Field("allele_nomen", 
this.getAllele_nomen(), Field.Store.YES, Field.Index.TOKENIZED), .6f));
        doc.add(setBoost(new Field("old_nomen", this.getOld_nomen(), 
Field.Store.YES, Field.Index.TOKENIZED), .4f));
        doc.add(setBoost(new Field("orth_nomen", this.getOrth_nomen(), 
Field.Store.YES, Field.Index.TOKENIZED), .2f));
        return doc;
    }
   
    private static Field setBoost (Field workField, float boost)
    {
        workField.setBoost(boost);
        return workField;
    }

It works out pretty well for me anyhow.

  wrote:
>    Thursday 03 April 2008 16:24:15   ():
>
>   
>> - Is there a way to set weights for different fields? Let's say, content
>> have a weight of 1, title have a weight of 5 and picture subscribe have a
>> weight of 0.5. If no, can I do that by hand?
>>     
> Already found field.setBoost().
> Sorry for asking lame questions :(
>
> By the way, if setBoost() returned this, it would be much easier to assemble 
> document, one line instead of three. Chaining rules.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   

-- 
Matthew Hall
Software Engineer
Mouse Genome Informatics
mhall@informatics.jax.org
(207) 288-6012



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33457-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 03 15:17:17 2008
Return-Path: <java-user-return-33457-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57935 invoked from network); 3 Apr 2008 15:17:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Apr 2008 15:17:17 -0000
Received: (qmail 81102 invoked by uid 500); 3 Apr 2008 15:17:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81056 invoked by uid 500); 3 Apr 2008 15:17:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81037 invoked by uid 99); 3 Apr 2008 15:17:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Apr 2008 08:17:11 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 209.85.128.186 as permitted sender)
Received: from [209.85.128.186] (HELO fk-out-0910.google.com) (209.85.128.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Apr 2008 15:16:27 +0000
Received: by fk-out-0910.google.com with SMTP id 19so4322299fkr.5
        for <java-user@lucene.apache.org>; Thu, 03 Apr 2008 08:16:37 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=PZDYrIh4zJT4kfDjtE0GNJ0BMojwnqz0Pt+S5zGRNRc=;
        b=dzhuZtRUg1M8iGXnY6hKz4ZMOsF/FkKXGqVMsE8P0uAziFaJpA8a1pWVZptx0uXBlnnRXkfbx0SBG6c/Cy4jxvL9cnhOALuzKPBbi5coWG4U6DcmwEyWetuuDNTHlWnqePC4vHuwCOmB5GKJzmI6rJuppu7PLrXF4dt9ypPLfYQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=VG6k1LiG11tdbsIWpxIdxGsTvkQRuHmK1CH3vDGfnNMyDkeT6zjhgf7PAurmt9NoDWZgpyLo9IIkgb0+DTTM7Lbk50dF1EDp19ZIlEgn05jEtBSOySoOXdriVOT2tWQ6+tpbMepaJjuDPrcNPxDJHKRQDfkiOxH1lRUoKG1CEW4=
Received: by 10.78.122.2 with SMTP id u2mr4451391huc.38.1207235794372;
        Thu, 03 Apr 2008 08:16:34 -0700 (PDT)
Received: by 10.78.155.15 with HTTP; Thu, 3 Apr 2008 08:16:34 -0700 (PDT)
Message-ID: <6e3ae6310804030816l1f83b5c9pa231ec46abf9fa5b@mail.gmail.com>
Date: Thu, 3 Apr 2008 08:16:34 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: payload performance wrt fieldcache
In-Reply-To: <8837fb770804030736w235452fcwde3f684d5722d105@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <8837fb770804030727w474f9a7epb4131bfc29716fa6@mail.gmail.com>
	 <8837fb770804030736w235452fcwde3f684d5722d105@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

If your index size grows larger, payload method would be more slower.
It's because Payload are read from hard disk. Fieldcache is in the
memory, which is much faster.

Unless you are going with Solid State Disk, you'd better go with
Fieldcache for faster search.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request)
got 2.6 Million Euro funding!


On Thu, Apr 3, 2008 at 7:36 AM, John Wang <john.wang@gmail.com> wrote:
> Sorry, gmail was screwy and accidentally sent the msg.
>  Anyway,
>
>  I have a large index, about 30M docs.
>  I have a date field (by days) and there are about 1000 of them, every doc
>  has a date field filled in.
>
>  So out of curiosity I index the date field two ways:
>  1) using "date" as a field, and set the date value for each doc.
>  2) new term: "_payload:_val" and added the date (as a long or 8 byte array)
>  into the payload of each doc.
>
>  loading into an array long[] of length maxdoc of dates, the performance was
>  surprising:
>  using payload is 7 times slower than using fieldcache.
>
>  At first I thought it was because of the conversion between byte[8] to a
>  long for each doc, I changed it so it loads into byte[8*maxdoc] without
>  doing the conversion, and the result is the same.
>
>  I then did another experiment:
>  lower the number of dates down to a small number, e.g. 50, and timed field
>  cache load, and it took much longer than when it had 1000.
>
>  I did some profiling and the profiler is pointing to TermPositions.next
>  and TermPositions.nextPosition and TermPositions.getPayload as the culprit.
>
>  I would think payload would always be faster. Any ideas?
>
>  Thanks
>  -John
>
>  On Thu, Apr 3, 2008 at 7:27 AM, John Wang <john.wang@gmail.com> wrote:
>
>  > Hi:
>  >
>  >
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33458-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 03 15:20:12 2008
Return-Path: <java-user-return-33458-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62270 invoked from network); 3 Apr 2008 15:20:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Apr 2008 15:20:12 -0000
Received: (qmail 95952 invoked by uid 500); 3 Apr 2008 15:20:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95927 invoked by uid 500); 3 Apr 2008 15:20:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95916 invoked by uid 99); 3 Apr 2008 15:20:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Apr 2008 08:20:05 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of celikik@gmail.com designates 72.14.220.158 as permitted sender)
Received: from [72.14.220.158] (HELO fg-out-1718.google.com) (72.14.220.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Apr 2008 15:19:23 +0000
Received: by fg-out-1718.google.com with SMTP id d23so2857029fga.27
        for <java-user@lucene.apache.org>; Thu, 03 Apr 2008 08:19:34 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:user-agent:mime-version:to:subject:content-type:content-transfer-encoding:from;
        bh=NjHOd5WSqaxys7FrUySe7xYiSO26zclhrXAjI49Rry4=;
        b=ak7ggTFZJfb77Apan2AOd1ax6YaImZGVDiQSRWG6zt2rWag5FhJdWZtz0LelgcEIz2CfVGDQOBmc7f2dv4vnZbouSU908qdw1hkWe9QGr6iK3Q9bAYabMtpvguwmvgVfuA5gG3OFYp2yz0gaQ4lkq7iB65j0MluKy9ftXrU6xlE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:user-agent:mime-version:to:subject:content-type:content-transfer-encoding:from;
        b=G3IEYwkS9O0022Xff+zuWxGnmuQWb+oNj9NRDC0m/SdDqeVMhdyGRbGeh+koYD6mQPK/9pI69vRddzgsZ22Kle+11kqhY4macVFC5mVrKDVN2aQJ2liHZTHI1Z+0tqNtgRXUb86zra5z3cWb6IptQg59oURLeNkEn/fcvSQ2LPc=
Received: by 10.82.136.8 with SMTP id j8mr26182198bud.31.1207235974272;
        Thu, 03 Apr 2008 08:19:34 -0700 (PDT)
Received: from ?139.19.14.30? ( [139.19.14.30])
        by mx.google.com with ESMTPS id 12sm4821019fks.12.2008.04.03.08.19.32
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 03 Apr 2008 08:19:33 -0700 (PDT)
Message-ID: <47F4F583.2090206@googlemail.com>
Date: Thu, 03 Apr 2008 17:19:31 +0200
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Error tolerant text search with Lucene?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
From: Marjan Celikik <celikik@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi everyone,

I know that there are packages that support the "Did you mean ... ?"
search features with lucene which tries to find the most suited
correct-word query.. however, so far I haven't encountered the opposite
search feature: given a correct query, find all documents which contain
misspellings of the query.. are you guys aware of anything like this
with lucene?

Thanks!


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33459-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 03 15:21:20 2008
Return-Path: <java-user-return-33459-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62901 invoked from network); 3 Apr 2008 15:21:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Apr 2008 15:21:20 -0000
Received: (qmail 98756 invoked by uid 500); 3 Apr 2008 15:21:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98731 invoked by uid 500); 3 Apr 2008 15:21:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98713 invoked by uid 99); 3 Apr 2008 15:21:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Apr 2008 08:21:13 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of john.wang@gmail.com designates 72.14.220.159 as permitted sender)
Received: from [72.14.220.159] (HELO fg-out-1718.google.com) (72.14.220.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Apr 2008 15:20:19 +0000
Received: by fg-out-1718.google.com with SMTP id d23so2857471fga.27
        for <java-user@lucene.apache.org>; Thu, 03 Apr 2008 08:20:40 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=q/DQkB4iSXNUxexDLXmImUmyZr2Wev7xl/pIpQOMZLk=;
        b=kXyo+OxkFzlerlUKBqZFUzbHNN9WLxxpbGEP4XsTx9k9qKlbrL3YqHDV0u0KhTcI4+KfFBpSTSBcLFpBGmM3ksW39b1iR0s5oYqyZweKzQbNONwDScafIK900lcWQ54WmvQPSIVPG2aYjLYL0KOm3IEzQTGD5TCOrIrQf70AwJ8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=hSwL11hxnsURPD7DXS+02wshIpA8uhlNYNDhav7L6hG9oxBtgfqROa9Re6KNXFj6di8Z2c6HAyD6bKs/SbL/E8MLZ9NDZZfRoef4RzCHTNi/2mKa9rfjQ3gn4XN4fp9lgx+bbZCX+QbinNwEXWhNBxLwRk4pT8suo2bThgegplw=
Received: by 10.86.51.2 with SMTP id y2mr7206363fgy.50.1207236039094;
        Thu, 03 Apr 2008 08:20:39 -0700 (PDT)
Received: by 10.86.82.10 with HTTP; Thu, 3 Apr 2008 08:20:39 -0700 (PDT)
Message-ID: <8837fb770804030820o7f56fa0cq9b2114d60a75e5c6@mail.gmail.com>
Date: Thu, 3 Apr 2008 08:20:39 -0700
From: "John Wang" <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: payload performance wrt fieldcache
In-Reply-To: <6e3ae6310804030816l1f83b5c9pa231ec46abf9fa5b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1640_8691189.1207236039103"
References: <8837fb770804030727w474f9a7epb4131bfc29716fa6@mail.gmail.com>
	 <8837fb770804030736w235452fcwde3f684d5722d105@mail.gmail.com>
	 <6e3ae6310804030816l1f83b5c9pa231ec46abf9fa5b@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1640_8691189.1207236039103
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I am loading both from disk.
But I found the culprit:

My code:

while (tp.next())

          {

          //assert tp.doc() < maxDoc;

          tp.nextPosition();          <-- this call is the problem

          tp.getPayload(payloadBuffer, 0);

          byter.load(_array, tp.doc(), payloadBuffer);

      }

The way I stored it, there is one position per doc. Removed call to
tp.nextPosition, performance improved by a factor of multiple digits.

I would think this call should be free.



Thanks

-John

On Thu, Apr 3, 2008 at 8:16 AM, Chris Lu <chris.lu@gmail.com> wrote:

> If your index size grows larger, payload method would be more slower.
> It's because Payload are read from hard disk. Fieldcache is in the
> memory, which is much faster.
>
> Unless you are going with Solid State Disk, you'd better go with
> Fieldcache for faster search.
>
> --
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
> Lucene Database Search in 3 minutes:
>
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
> DBSight customer, a shopping comparison site, (anonymous per request)
> got 2.6 Million Euro funding!
>
>
> On Thu, Apr 3, 2008 at 7:36 AM, John Wang <john.wang@gmail.com> wrote:
> > Sorry, gmail was screwy and accidentally sent the msg.
> >  Anyway,
> >
> >  I have a large index, about 30M docs.
> >  I have a date field (by days) and there are about 1000 of them, every
> doc
> >  has a date field filled in.
> >
> >  So out of curiosity I index the date field two ways:
> >  1) using "date" as a field, and set the date value for each doc.
> >  2) new term: "_payload:_val" and added the date (as a long or 8 byte
> array)
> >  into the payload of each doc.
> >
> >  loading into an array long[] of length maxdoc of dates, the performance
> was
> >  surprising:
> >  using payload is 7 times slower than using fieldcache.
> >
> >  At first I thought it was because of the conversion between byte[8] to
> a
> >  long for each doc, I changed it so it loads into byte[8*maxdoc] without
> >  doing the conversion, and the result is the same.
> >
> >  I then did another experiment:
> >  lower the number of dates down to a small number, e.g. 50, and timed
> field
> >  cache load, and it took much longer than when it had 1000.
> >
> >  I did some profiling and the profiler is pointing to TermPositions.next
> >  and TermPositions.nextPosition and TermPositions.getPayload as the
> culprit.
> >
> >  I would think payload would always be faster. Any ideas?
> >
> >  Thanks
> >  -John
> >
> >  On Thu, Apr 3, 2008 at 7:27 AM, John Wang <john.wang@gmail.com> wrote:
> >
> >  > Hi:
> >  >
> >  >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_1640_8691189.1207236039103--

From java-user-return-33460-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 03 16:13:18 2008
Return-Path: <java-user-return-33460-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22337 invoked from network); 3 Apr 2008 16:13:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Apr 2008 16:13:18 -0000
Received: (qmail 30504 invoked by uid 500); 3 Apr 2008 16:13:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30470 invoked by uid 500); 3 Apr 2008 16:13:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30458 invoked by uid 99); 3 Apr 2008 16:13:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Apr 2008 09:13:11 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anafreireveiga@gmail.com designates 64.233.170.185 as permitted sender)
Received: from [64.233.170.185] (HELO rn-out-0910.google.com) (64.233.170.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Apr 2008 16:12:30 +0000
Received: by rn-out-0910.google.com with SMTP id v46so2054903rnb.5
        for <java-user@lucene.apache.org>; Thu, 03 Apr 2008 09:12:21 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=dWUT7SvAELOgo4rbi6/pM0HRMONw3hTOClQOaIJMegk=;
        b=gSYu3ZLWJYP1nA6t4LHRSOUsN/oHoUv7RwAapBkdMdYbSm6Sxm7msHwAp3gopSGKPuFwP61mSh27IQCZBFKYMVgz06CtpahAAazCmnOmbFXOid8AaLeu2mOAjhqDezoZzmjD1KGkZdiiE0WgauYGt2jvZkqZR5bN6uHtBzDyY9k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=S6NOTqiBaLSnEc5c0fch02Z+kVZDsrDRW38IaAJxCcv2Gwp0hr5xrgwcFzNC3pMj8xWZuqJyVz2J4HFz2YJR/MXDXeQ81MX8uPkvr+fU0HTc8KBMgS+1vt9rcIpcP5eDXO9rkqoPTyG1btPsBpv6HcNnUKAsgMcvx86EIT+CeXU=
Received: by 10.114.175.16 with SMTP id x16mr17700787wae.116.1207239140922;
        Thu, 03 Apr 2008 09:12:20 -0700 (PDT)
Received: by 10.115.108.16 with HTTP; Thu, 3 Apr 2008 09:12:20 -0700 (PDT)
Message-ID: <c78ed28e0804030912g389b88b7n3daa833ad3654751@mail.gmail.com>
Date: Thu, 3 Apr 2008 18:12:20 +0200
From: "=?ISO-8859-1?Q?Ana_R=E1bade?=" <anafreireveiga@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Proximity Searches
In-Reply-To: <c78ed28e0804030903n1f712c97t7dc115c97f24be5b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3376_21070965.1207239140923"
References: <c78ed28e0803311054v21fd3a8cgdb15778525f5895@mail.gmail.com>
	 <c78ed28e0804030903n1f712c97t7dc115c97f24be5b@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3376_21070965.1207239140923
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi!

I'm using Lucene Proximity Searches, but I've seen Lucene only scores
documents which contain all the terms in the phrase. I also need to score
documents although they don't contain all those terms.  Is it possible with
Lucene PhraseQueries or SpanNearQuery? If not, could you tell me a way to
find my solution?

Thank you very much.

    - Ana M. Freire -

------=_Part_3376_21070965.1207239140923--

From java-user-return-33461-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 03 16:18:33 2008
Return-Path: <java-user-return-33461-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25242 invoked from network); 3 Apr 2008 16:18:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Apr 2008 16:18:33 -0000
Received: (qmail 40716 invoked by uid 500); 3 Apr 2008 16:18:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40444 invoked by uid 500); 3 Apr 2008 16:18:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40433 invoked by uid 99); 3 Apr 2008 16:18:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Apr 2008 09:18:26 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of anafreireveiga@gmail.com designates 64.233.170.189 as permitted sender)
Received: from [64.233.170.189] (HELO rn-out-0910.google.com) (64.233.170.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Apr 2008 16:17:36 +0000
Received: by rn-out-0910.google.com with SMTP id v46so2059349rnb.5
        for <java-user@lucene.apache.org>; Thu, 03 Apr 2008 09:17:56 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=k+2zCfOFngMiN5S1MYci3cyC0JVMNkoCF4tNsnvvaDk=;
        b=EFzK5m188qGzl3pwJa7LuVVp78ZTFWxDAMOvkFpxVPCaoL5lysd1ou4gFeAB5QedoZw5CypWlmx84OxEVCkIH+yBBWVEw6bXuQjUXddWr1dNr1LZ9eDXEO6OANGJ438AvBMZgFWnhWc/blnCrhJAkcl3W8/8ReTVKL3bB4RZZ2k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=B2EOuHIeEYF3HBccdPwREAtz9SwZPr7bXpyCtoT1suD2eIUJ884SOd9npoiMQcvu11uj8m1VZqKVgrKU4rwnDvhFoiAlOhK26a6htdaXSwLB73BfmMzyKNAuY5aRCjeQ/MZuKgJ9uCHIkqPxpSdRvxZesIPp2tJmQuXX6HMDV+M=
Received: by 10.114.150.1 with SMTP id x1mr17686028wad.144.1207239475730;
        Thu, 03 Apr 2008 09:17:55 -0700 (PDT)
Received: by 10.115.108.16 with HTTP; Thu, 3 Apr 2008 09:17:55 -0700 (PDT)
Message-ID: <c78ed28e0804030917j24bdf546t82034a7989f8a3d0@mail.gmail.com>
Date: Thu, 3 Apr 2008 18:17:55 +0200
From: "=?ISO-8859-1?Q?Ana_R=E1bade?=" <anafreireveiga@gmail.com>
To: java-user@lucene.apache.org
Subject: Lucene Proximity Searches
In-Reply-To: <c78ed28e0803311054v21fd3a8cgdb15778525f5895@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3448_9178588.1207239475732"
References: <c78ed28e0803311054v21fd3a8cgdb15778525f5895@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3448_9178588.1207239475732
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi!

I'm using Lucene Proximity Searches, but I've seen Lucene only scores
documents which contain all the terms in the phrase. I also need to score
documents although they don't contain all those terms.  Is it possible with
Lucene PhraseQueries or SpanNearQuery? If not, could you tell me a way to
find my solution?

Thank you very much.

    - Ana M. Freire -

------=_Part_3448_9178588.1207239475732--

From java-user-return-33462-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 03 16:52:28 2008
Return-Path: <java-user-return-33462-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48441 invoked from network); 3 Apr 2008 16:52:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Apr 2008 16:52:28 -0000
Received: (qmail 30216 invoked by uid 500); 3 Apr 2008 16:52:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30177 invoked by uid 500); 3 Apr 2008 16:52:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30166 invoked by uid 99); 3 Apr 2008 16:52:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Apr 2008 09:52:21 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of john.wang@gmail.com designates 72.14.220.152 as permitted sender)
Received: from [72.14.220.152] (HELO fg-out-1718.google.com) (72.14.220.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Apr 2008 16:51:37 +0000
Received: by fg-out-1718.google.com with SMTP id d23so2889851fga.27
        for <java-user@lucene.apache.org>; Thu, 03 Apr 2008 09:51:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=9+/vDLaZP5SWQ00FiJsXMx8MO/eGRjFnsuS6e4YvwDw=;
        b=XGyaC2+hTk1kE54uskESmzEjpnn9a7KLxM8Q7Ie8zTLl+VemDfEIzKuPBuIVLNn4E6vr4vp3rTmttk4M4brzxO7Fs/clUasAYvpoQre4YkYME4fSWtseg1f45IW8T+uFZpPNNbEUZo8GLzvunbv9J0PBiM+wQT/b1DICSwXQT+c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=uCuQIIJf8mQmRKr19lsbh1NBu0pAP+m8htz9IEjpqS+3hM48ywSdiJlt46Qei6OE8GZq5vuczbg1H4fSUNtlxOpdyN19ht1V1EZ0LpnnOHpILHvHg/XIPDvucPEmg2yK6+JiFCnA64BPnnu7Q6xzySu95AIhv1PE1NkyCF4PNsA=
Received: by 10.86.90.2 with SMTP id n2mr12049fgb.66.1207241507921;
        Thu, 03 Apr 2008 09:51:47 -0700 (PDT)
Received: by 10.86.82.10 with HTTP; Thu, 3 Apr 2008 09:51:47 -0700 (PDT)
Message-ID: <8837fb770804030951j2f3bda39x4998a49590d4a864@mail.gmail.com>
Date: Thu, 3 Apr 2008 09:51:47 -0700
From: "John Wang" <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: payload performance wrt fieldcache
In-Reply-To: <8837fb770804030820o7f56fa0cq9b2114d60a75e5c6@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1986_18723299.1207241507928"
References: <8837fb770804030727w474f9a7epb4131bfc29716fa6@mail.gmail.com>
	 <8837fb770804030736w235452fcwde3f684d5722d105@mail.gmail.com>
	 <6e3ae6310804030816l1f83b5c9pa231ec46abf9fa5b@mail.gmail.com>
	 <8837fb770804030820o7f56fa0cq9b2114d60a75e5c6@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1986_18723299.1207241507928
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Apparently tp.nextPosition() is needed :(
Any ideas?

-John

On Thu, Apr 3, 2008 at 8:20 AM, John Wang <john.wang@gmail.com> wrote:

> I am loading both from disk.
> But I found the culprit:
>
> My code:
>
> while (tp.next())
>
>           {
>
>           //assert tp.doc() < maxDoc;
>
>           tp.nextPosition();          <-- this call is the problem
>
>           tp.getPayload(payloadBuffer, 0);
>
>           byter.load(_array, tp.doc(), payloadBuffer);
>
>       }
>
> The way I stored it, there is one position per doc. Removed call to
> tp.nextPosition, performance improved by a factor of multiple digits.
>
> I would think this call should be free.
>
>
>
> Thanks
>
> -John
>
> On Thu, Apr 3, 2008 at 8:16 AM, Chris Lu <chris.lu@gmail.com> wrote:
>
> > If your index size grows larger, payload method would be more slower.
> > It's because Payload are read from hard disk. Fieldcache is in the
> > memory, which is much faster.
> >
> > Unless you are going with Solid State Disk, you'd better go with
> > Fieldcache for faster search.
> >
> > --
> > Chris Lu
> > -------------------------
> > Instant Scalable Full-Text Search On Any Database/Application
> > site: http://www.dbsight.net
> > demo: http://search.dbsight.com
> > Lucene Database Search in 3 minutes:
> >
> > http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
> > DBSight customer, a shopping comparison site, (anonymous per request)
> > got 2.6 Million Euro funding!
> >
> >
> > On Thu, Apr 3, 2008 at 7:36 AM, John Wang <john.wang@gmail.com> wrote:
> > > Sorry, gmail was screwy and accidentally sent the msg.
> > >  Anyway,
> > >
> > >  I have a large index, about 30M docs.
> > >  I have a date field (by days) and there are about 1000 of them, every
> > doc
> > >  has a date field filled in.
> > >
> > >  So out of curiosity I index the date field two ways:
> > >  1) using "date" as a field, and set the date value for each doc.
> > >  2) new term: "_payload:_val" and added the date (as a long or 8 byte
> > array)
> > >  into the payload of each doc.
> > >
> > >  loading into an array long[] of length maxdoc of dates, the
> > performance was
> > >  surprising:
> > >  using payload is 7 times slower than using fieldcache.
> > >
> > >  At first I thought it was because of the conversion between byte[8]
> > to a
> > >  long for each doc, I changed it so it loads into byte[8*maxdoc]
> > without
> > >  doing the conversion, and the result is the same.
> > >
> > >  I then did another experiment:
> > >  lower the number of dates down to a small number, e.g. 50, and timed
> > field
> > >  cache load, and it took much longer than when it had 1000.
> > >
> > >  I did some profiling and the profiler is pointing to
> > TermPositions.next
> > >  and TermPositions.nextPosition and TermPositions.getPayload as the
> > culprit.
> > >
> > >  I would think payload would always be faster. Any ideas?
> > >
> > >  Thanks
> > >  -John
> > >
> > >  On Thu, Apr 3, 2008 at 7:27 AM, John Wang <john.wang@gmail.com>
> > wrote:
> > >
> > >  > Hi:
> > >  >
> > >  >
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_1986_18723299.1207241507928--

From java-user-return-33463-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 03 17:57:30 2008
Return-Path: <java-user-return-33463-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88284 invoked from network); 3 Apr 2008 17:57:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Apr 2008 17:57:30 -0000
Received: (qmail 68618 invoked by uid 500); 3 Apr 2008 17:57:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68349 invoked by uid 500); 3 Apr 2008 17:57:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68338 invoked by uid 99); 3 Apr 2008 17:57:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Apr 2008 10:57:22 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.191 as permitted sender)
Received: from [209.85.128.191] (HELO fk-out-0910.google.com) (209.85.128.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Apr 2008 17:56:42 +0000
Received: by fk-out-0910.google.com with SMTP id 19so4412810fkr.5
        for <java-user@lucene.apache.org>; Thu, 03 Apr 2008 10:56:53 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=c7dLY5UqqCNBRaqrOyYD/fBfJqcsAiMU4B6Rx8Lap+w=;
        b=GP1jFmY3fbHBFWqIRFSeZXppjoD5RMces9p8OEwUNK7IzlQB4pY7g0w98sKdMD/dP9WW0TfqgzjhP85yiPf/t5LqOEdKj3dAqkZ0W+Zb81OWgNYAAKQjEKrP1evhvzKbXV66X2rz7J6r0yoMI+dxlUq96qchEebpRKXIOFS+5XU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=h2O6P7fYOCrE9SxHdzdmTxGm2hYyjaaMHmif/wJyTajidWPas7u9MjRFO/qD7dtxF3fmDUImbBeX3pXvduv57z6vGjBmvTzg7Xx/WHLTACwR7t/++dfI1wvI18KRRiZcyVI5PsXNVkJMg5Wj9gdhJAEPJhEoLMfjymHOM8/qSrI=
Received: by 10.82.175.17 with SMTP id x17mr267114bue.19.1207245413710;
        Thu, 03 Apr 2008 10:56:53 -0700 (PDT)
Received: by 10.82.191.6 with HTTP; Thu, 3 Apr 2008 10:56:53 -0700 (PDT)
Message-ID: <359a92830804031056x7309dcadu856b8abc87059a9e@mail.gmail.com>
Date: Thu, 3 Apr 2008 13:56:53 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Proximity Searches
In-Reply-To: <c78ed28e0804030917j24bdf546t82034a7989f8a3d0@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2063_14729632.1207245413702"
References: <c78ed28e0803311054v21fd3a8cgdb15778525f5895@mail.gmail.com>
	 <c78ed28e0804030917j24bdf546t82034a7989f8a3d0@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2063_14729632.1207245413702
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Could you explain your use case? Because to say that you want to
score documents that don't have all the terms with a *phrase query*
is contradictory. The point of a phrase query is exactly that all
the terms are there and within some some proximity.....


Best
Erick

On Thu, Apr 3, 2008 at 12:17 PM, Ana R=E1bade <anafreireveiga@gmail.com>
wrote:

> Hi!
>
> I'm using Lucene Proximity Searches, but I've seen Lucene only scores
> documents which contain all the terms in the phrase. I also need to score
> documents although they don't contain all those terms.  Is it possible
> with
> Lucene PhraseQueries or SpanNearQuery? If not, could you tell me a way to
> find my solution?
>
> Thank you very much.
>
>    - Ana M. Freire -
>

------=_Part_2063_14729632.1207245413702--

From java-user-return-33464-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 03 19:00:57 2008
Return-Path: <java-user-return-33464-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35650 invoked from network); 3 Apr 2008 19:00:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Apr 2008 19:00:57 -0000
Received: (qmail 83549 invoked by uid 500); 3 Apr 2008 19:00:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83281 invoked by uid 500); 3 Apr 2008 19:00:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83270 invoked by uid 99); 3 Apr 2008 19:00:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Apr 2008 12:00:50 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.14.252.157] (HELO po-out-1718.google.com) (72.14.252.157)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Apr 2008 19:00:09 +0000
Received: by po-out-1718.google.com with SMTP id b23so3034583poe.0
        for <java-user@lucene.apache.org>; Thu, 03 Apr 2008 12:00:21 -0700 (PDT)
Received: by 10.141.71.8 with SMTP id y8mr184180rvk.32.1207249219689;
        Thu, 03 Apr 2008 12:00:19 -0700 (PDT)
Received: by 10.141.114.18 with HTTP; Thu, 3 Apr 2008 12:00:19 -0700 (PDT)
Message-ID: <5cbf280a0804031200x82036afs57646383be55fadc@mail.gmail.com>
Date: Thu, 3 Apr 2008 15:00:19 -0400
From: "Subodh Damle" <2008@damle.name>
To: java-user@lucene.apache.org
Subject: Search emails - parsing mailbox (mbox) files
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2429_1651923.1207249219708"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2429_1651923.1207249219708
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Is there any reliable implementation for parsing email mailbox files (mbox
format), especially large (>50MB) archives ? Even after searching lucene
mailing list archives, googling around, I couldn't find one. I took a look
at Apache James project which seems to offer some support , but couldn't
find much documentation about it.

------=_Part_2429_1651923.1207249219708--

From java-user-return-33465-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 03 19:04:48 2008
Return-Path: <java-user-return-33465-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40657 invoked from network); 3 Apr 2008 19:04:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Apr 2008 19:04:48 -0000
Received: (qmail 87565 invoked by uid 500); 3 Apr 2008 19:04:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87529 invoked by uid 500); 3 Apr 2008 19:04:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87518 invoked by uid 99); 3 Apr 2008 19:04:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Apr 2008 12:04:41 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.14.252.155] (HELO po-out-1718.google.com) (72.14.252.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Apr 2008 19:03:59 +0000
Received: by po-out-1718.google.com with SMTP id b23so3039163poe.0
        for <java-user@lucene.apache.org>; Thu, 03 Apr 2008 12:04:11 -0700 (PDT)
Received: by 10.140.180.11 with SMTP id c11mr163955rvf.137.1207249441647;
        Thu, 03 Apr 2008 12:04:01 -0700 (PDT)
Received: by 10.141.114.18 with HTTP; Thu, 3 Apr 2008 12:04:01 -0700 (PDT)
Message-ID: <5cbf280a0804031204o1a8349d9vc6a927d491700bf3@mail.gmail.com>
Date: Thu, 3 Apr 2008 15:04:01 -0400
From: "Subodh Damle" <2008@damle.name>
To: java-user@lucene.apache.org
Subject: Search emails - parsing mailbox (mbox) files
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2443_16776978.1207249441645"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2443_16776978.1207249441645
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Is there any reliable implementation for parsing email mailbox files (mbox
format), especially large (>50MB) archives ? Even after searching lucene
mailing list archives, googling around, I couldn't find one. I took a look
at Apache James project which seems to offer some support , but couldn't
find much documentation about it.

------=_Part_2443_16776978.1207249441645--

From java-user-return-33466-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 03 20:01:14 2008
Return-Path: <java-user-return-33466-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76401 invoked from network); 3 Apr 2008 20:01:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Apr 2008 20:01:14 -0000
Received: (qmail 97618 invoked by uid 500); 3 Apr 2008 20:01:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97591 invoked by uid 500); 3 Apr 2008 20:01:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97580 invoked by uid 99); 3 Apr 2008 20:01:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Apr 2008 13:01:06 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [62.23.130.171] (HELO chico.albert-inc.com) (62.23.130.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Apr 2008 20:00:14 +0000
Received: from chico.albert-inc.com (unknown [127.0.0.1])
	by localhost (Postfix) with ESMTP id 51A4B8DF7D
	for <java-user@lucene.apache.org>; Thu,  3 Apr 2008 22:00:04 +0200 (CEST)
Received: by chico.albert-inc.com (Postfix, from userid 0)
	id 8E46D8C774; Thu,  3 Apr 2008 21:58:26 +0200 (CEST)
X-Spam-Checker-Version: SpamAssassin 3.1.4 (2006-07-25) on 
	chico.albert-inc.com
X-Spam-Level: **
Received: from sophia (ip-37.net-89-3-109.rev.numericable.fr [89.3.109.37])
	by chico.albert-inc.com (Postfix) with ESMTP id C9EE38C774
	for <java-user@lucene.apache.org>; Thu,  3 Apr 2008 21:58:19 +0200 (CEST)
From: =?iso-8859-1?Q?Dominique_B=E9jean?= <dominique.bejean@eolya.fr>
To: <java-user@lucene.apache.org>
Subject: RE: Error tolerant text search with Lucene?
Date: Thu, 3 Apr 2008 21:58:46 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <47F4D79B.8070703@googlemail.com>
Thread-Index: AciVjM0odmQ84uXpRqSOwg4yK8mFcAAN/Mzg
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
Message-Id: <20080403195819.C9EE38C774@chico.albert-inc.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=2.2 required=8.0 tests=AWL,BAYES_50,
	MSGID_FROM_MTA_ID autolearn=no version=3.1.4

http://today.java.net/pub/a/today/2005/08/09/didyoumean.html



-----Message d'origine-----
De=A0: Marjan Celikik [mailto:celikik@gmail.com]=20
Envoy=E9=A0: jeudi 3 avril 2008 15:12
=C0=A0: java-user@lucene.apache.org
Objet=A0: Error tolerant text search with Lucene?

Hi everyone,

I know that there are packages that support the "Did you mean ... ?"=20
search features with lucene which tries to find the most suited=20
correct-word query.. however, so far I haven't encountered the opposite=20
search feature: given a correct query, find all documents which contain=20
misspellings of the query.. are you guys aware of anything like this=20
with lucene?

Thanks!

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33467-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 03 20:09:24 2008
Return-Path: <java-user-return-33467-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79274 invoked from network); 3 Apr 2008 20:09:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Apr 2008 20:09:24 -0000
Received: (qmail 6074 invoked by uid 500); 3 Apr 2008 20:09:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6036 invoked by uid 500); 3 Apr 2008 20:09:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6025 invoked by uid 99); 3 Apr 2008 20:09:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Apr 2008 13:09:18 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of celikik@gmail.com designates 209.85.128.187 as permitted sender)
Received: from [209.85.128.187] (HELO fk-out-0910.google.com) (209.85.128.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Apr 2008 20:08:34 +0000
Received: by fk-out-0910.google.com with SMTP id 19so4469481fkr.5
        for <java-user@lucene.apache.org>; Thu, 03 Apr 2008 13:08:45 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding:from;
        bh=EScDxs5QO2DiX3bwE1Frq1K3eoPVTUqwr9nNkPwa3L4=;
        b=F+C3H98toOMxVuBlhWjUCtx5tgZ1kfNehgpJmFFro8jNSx75y/J61Qc+S0ndonJ5PvqT1KuXBW8lzCOARXLO0SDeqntCmKMK30z6Ii2ByTki5F0kS219oF2E+8V9ZUho793lEhMpGM0i1zQofKm9KW77en7iz3hVY/XZ2gzwhTI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding:from;
        b=RdRC1ttk79wCa9d6iRIUz3wtD6YLYGRtluTk469OvMLP63SUhkf3dkU1XxaRRY+cVa0JRErecarYtVoyrkQWX/YDV6z4gPoqQnGCBYWiiN9+dhQ//1BbugLTswhfKNyshWzFU8TWiU5BdkZweLXXbkyWzl4sgyoa50KU+OfX5cA=
Received: by 10.82.153.5 with SMTP id a5mr621979bue.5.1207253325010;
        Thu, 03 Apr 2008 13:08:45 -0700 (PDT)
Received: from ?139.19.14.30? ( [139.19.14.30])
        by mx.google.com with ESMTPS id d13sm5400130fka.7.2008.04.03.13.08.41
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 03 Apr 2008 13:08:42 -0700 (PDT)
Message-ID: <47F53948.9010006@googlemail.com>
Date: Thu, 03 Apr 2008 22:08:40 +0200
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Error tolerant text search with Lucene?
References: <20080403195819.C9EE38C774@chico.albert-inc.com>
In-Reply-To: <20080403195819.C9EE38C774@chico.albert-inc.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
From: Marjan Celikik <celikik@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Dominique Bjean wrote:
> http://today.java.net/pub/a/today/2005/08/09/didyoumean.html
>
>
>
> -----Message d'origine-----
> De : Marjan Celikik [mailto:celikik@gmail.com] 
> Envoy : jeudi 3 avril 2008 15:12
>  : java-user@lucene.apache.org
> Objet : Error tolerant text search with Lucene?
>
> Hi everyone,
>
> I know that there are packages that support the "Did you mean ... ?" 
> search features with lucene which tries to find the most suited 
> correct-word query.. however, so far I haven't encountered the opposite 
> search feature: given a correct query, find all documents which contain 
> misspellings of the query.. are you guys aware of anything like this 
> with lucene?
>
> Thanks!
>   

Read my e-mail agian ^

Marjan.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33468-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 03 21:48:27 2008
Return-Path: <java-user-return-33468-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27870 invoked from network); 3 Apr 2008 21:48:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Apr 2008 21:48:27 -0000
Received: (qmail 89221 invoked by uid 500); 3 Apr 2008 21:48:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89186 invoked by uid 500); 3 Apr 2008 21:48:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89175 invoked by uid 99); 3 Apr 2008 21:48:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Apr 2008 14:48:19 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of niwalia@cisco.com designates 171.71.176.72 as permitted sender)
Received: from [171.71.176.72] (HELO sj-iport-3.cisco.com) (171.71.176.72)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Apr 2008 21:47:27 +0000
Received: from sj-dkim-1.cisco.com ([171.71.179.21])
  by sj-iport-3.cisco.com with ESMTP; 03 Apr 2008 14:47:46 -0700
Received: from sj-core-5.cisco.com (sj-core-5.cisco.com [171.71.177.238])
	by sj-dkim-1.cisco.com (8.12.11/8.12.11) with ESMTP id m33LlkMg017655
	for <java-user@lucene.apache.org>; Thu, 3 Apr 2008 14:47:46 -0700
Received: from xbh-sjc-231.amer.cisco.com (xbh-sjc-231.cisco.com [128.107.191.100])
	by sj-core-5.cisco.com (8.13.8/8.13.8) with ESMTP id m33LlkaJ027179
	for <java-user@lucene.apache.org>; Thu, 3 Apr 2008 21:47:46 GMT
Received: from xmb-sjc-21b.amer.cisco.com ([171.70.151.143]) by xbh-sjc-231.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 3 Apr 2008 14:47:45 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Adding attribute to index
Date: Thu, 3 Apr 2008 14:48:48 -0700
Message-ID: <2AE56FA3F71F09468C8EBDDEFE8EB511057ADEDB@xmb-sjc-21b.amer.cisco.com>
In-Reply-To: <OF87C806B7.54FD893D-ON8525741F.0065EB1C-8525741F.006799A4@us.ibm.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Adding attribute to index
thread-index: AciU8s0Gt2o0rWwER6WxgjVPUdF96AA4a+NQ
References: <2AE56FA3F71F09468C8EBDDEFE8EB5110573AEC4@xmb-sjc-21b.amer.cisco.com> <OF87C806B7.54FD893D-ON8525741F.0065EB1C-8525741F.006799A4@us.ibm.com>
From: "Nitasha Walia (niwalia)" <niwalia@cisco.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 03 Apr 2008 21:47:45.0364 (UTC) FILETIME=[59E1E140:01C895D4]
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=2583; t=1207259266; x=1208123266;
	c=relaxed/simple; s=sjdkim1004;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=niwalia@cisco.com;
	z=From:=20=22Nitasha=20Walia=20(niwalia)=22=20<niwalia@cisco
	.com>
	|Subject:=20RE=3A=20Adding=20attribute=20to=20index
	|Sender:=20;
	bh=k/S2//INlYB+ctbiW5CCJ688oywfmzj6hHSx0UMuMYs=;
	b=C8zmmoS/TyxKEXLwyP0nlAK0NPrMrIM30s9bEatKZ45Z19hcUcN+B2+3I2
	92JWjIu1zDJl89UWeSNB/4nDebfnmDIqTtpXfKUIJ9KHw49lIrLyKNTaTx03
	aCjlNyX7Nx4A2dG42CsQWRDnsrz8Z7L+x/kqJASnxxC9xu8vbxkss=;
Authentication-Results: sj-dkim-1; header.From=niwalia@cisco.com; dkim=pass (
	sig from cisco.com/sjdkim1004 verified; ); 
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks !!=20

-----Original Message-----
From: Donna L Gresh [mailto:gresh@us.ibm.com]=20
Sent: Wednesday, April 02, 2008 11:52 AM
To: java-user@lucene.apache.org
Subject: Re: Adding attribute to index

This is "fast and loose" code (from my head; check the syntax). I
*highly* recommend you get a copy of the book Lucene in Action; it will
really help.

To create the index, add a document with two fields; one for the sender
and one for the email text.

IndexWriter indexWriter =3D new IndexWriter(......=20

Document emailDoc =3D new Document();
Field senderField =3D new Field("sender", senderEmailAddress,
Field.Store.YES, Field.Index.UN_TOKENIZED); emailDoc.add(senderField);
Field textField =3D new Field("emailText", textOfEmail, Field.Store.YES,
Field.Index.TOKENIZED); emailDoc.add(textField);
indexWriter.addDocument(emailDoc);


Then when you are searching, search in the email text field:

Query query =3D new TermQuery(new Term("emailText","searchTerm")); Hits
hits =3D searcher.search(query); Document doc =3D hits.doc(0); //best =
fit
document String emailSender =3D doc.get("sender"); String emailText =3D
doc.get("emailText");


Donna L. Gresh
Services Research, Mathematical Sciences Department IBM T.J. Watson
Research Center
(914) 945-2472
http://www.research.ibm.com/people/g/donnagresh
gresh@us.ibm.com


"Nitasha Walia (niwalia)" <niwalia@cisco.com> wrote on 04/02/2008
02:26:45
PM:

> Hi,
>=20
> I am a new user of Java Lucene and need to learn how to add a new=20
> attribute, such that, given a database of emails, containing sender=20
> information, searching for a keyword, results in 1. The sender of the=20
> email 2. The email.
>=20
> I am using Lucene-2.3.1, and don't know where to start in the huge=20
> code
base.=20
>=20
> Can someone please advise on the same?
>=20
> Thanks,
>=20
> [image removed]
>=20
> Nitasha Walia
> Software Engineer
> Product Development
>=20
> niwalia@cisco.com
> Mobile: 412-736 4507
>=20
>=20
>=20
> United States
> Cisco home page

>=20
>=20
>=20
> [image removed]
>=20
> [image removed] Think before you print.
>=20
> This e-mail may contain confidential and privileged material for the=20
> sole use of the intended recipient. Any review, use, distribution or=20
> disclosure by others is strictly prohibited. If you are not the=20
> intended recipient (or authorized to receive for the recipient),=20
> please contact the sender by reply e-mail and delete all copies of=20
> this message.
>=20
> [image removed]
>=20
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33469-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 04 00:20:30 2008
Return-Path: <java-user-return-33469-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94528 invoked from network); 4 Apr 2008 00:20:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Apr 2008 00:20:29 -0000
Received: (qmail 82337 invoked by uid 500); 4 Apr 2008 00:20:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82287 invoked by uid 500); 4 Apr 2008 00:20:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82276 invoked by uid 99); 4 Apr 2008 00:20:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Apr 2008 17:20:22 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.49.250] (HELO web52003.mail.re2.yahoo.com) (206.190.49.250)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 04 Apr 2008 00:19:30 +0000
Received: (qmail 64148 invoked by uid 60001); 4 Apr 2008 00:19:50 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=taREmYNQI3v04JussEiV7oEfmmMuTmf9lvtfmTjbQSNeExVqRBKvpKdH7lUgVdnNbYDJJpgyacTCV1SudSr/RneKeRHi7DZNDAyi5wq3x218kui6LMU8f/mLjVJuRkJE60jGK7XBR2vU2OYGBQ+CvjK+//sIStNajO659qf7fUs=;
X-YMail-OSG: IqGGxs4VM1mIlMNnwfI01VbZ9PhLUOslYx.aryHA1CCi_sFaDXa1jFihgYYC8DymE1iyenV01y2OlDxFrHX.AFbmz694l9fePLJThi3lbPQzEIjg.lXq8XntKSOKRz0sBfR1bAjBn1MD.yHTlXIm9CfCRA--
Received: from [12.162.3.126] by web52003.mail.re2.yahoo.com via HTTP; Thu, 03 Apr 2008 17:19:50 PDT
Date: Thu, 3 Apr 2008 17:19:50 -0700 (PDT)
From: Rajesh parab <rajesh_parab_1@yahoo.com>
Subject: Lucene 2.3.0 and NFS
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
Message-ID: <403309.58434.qm@web52003.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

We are currently using Lucene 2.0 for full-text
searches within our enterprise application, which can
be deployed in clustered environment. We generate
Lucene index for data stored inside relational
database.

As Lucene 2.0 did not have solid NFS support and as we
wanted Lucene based searches to work properly in
Clustered environment, we had decided on following
approach:
1. The index generation happens on a machine (could be
one of the cluster nodes or a separate machine) and
once the Lucene index is generated, we copy all the
index files to the database.
2. The index search request on each cluster node
retrieves the index files from database (during first
search or after index update), copies to the file
system and use it for searches.
3. Thus, each cluster node has its own copy of the
index and it keeps on picking up latest version if it
is available inside database.

This has worked fine for us till now, though we will
not be able continue with this model in future as we
want to support Lucene based searches across our
application and also want to index large components
inside our application like Wiki, forums, etc. As the
index will grow, storing and retrieving index files
from database will not be an efficient operation.

My questions are:
- Will we be able to use NFS if we move to Lucene
2.3.0?
- Will there be any significant performance impact on
index generation and searches if we move to NFS?
- Is Lucene + NFS combination supported for all
operating systems? (We support Windows, Solaris, AIX,
HP-UX, Red Hat Linux)
- Is there any other alternative available other than
NFS?

I will really appreciate your comments/thoughts on
this topic.

Regards,
Rajesh


      ____________________________________________________________________________________
You rock. That's why Blockbuster's offering you one month of Blockbuster Total Access, No Cost.  
http://tc.deals.yahoo.com/tc/blockbuster/text5.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33470-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 04 02:18:12 2008
Return-Path: <java-user-return-33470-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51819 invoked from network); 4 Apr 2008 02:18:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Apr 2008 02:18:12 -0000
Received: (qmail 70168 invoked by uid 500); 4 Apr 2008 02:18:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70131 invoked by uid 500); 4 Apr 2008 02:18:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70113 invoked by uid 99); 4 Apr 2008 02:18:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Apr 2008 19:18:05 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [67.98.155.4] (HELO mail.mcdonaldbradley.com) (67.98.155.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Apr 2008 02:17:24 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Lucene 2.3.0 and NFS
Date: Thu, 3 Apr 2008 22:18:55 -0400
Message-ID: <CE9FC3E386FC2F4ABACDBB9E389C2BA20252E09E@hqmsg01.mcdonaldbradley.local>
In-Reply-To: <403309.58434.qm@web52003.mail.re2.yahoo.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene 2.3.0 and NFS
Thread-Index: AciV6eLcuO58BTHZTP6gqiAmDi4v/AADw1Ag
References: <403309.58434.qm@web52003.mail.re2.yahoo.com>
From: "Duan, Nick" <NDuan@mcdonaldbradley.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Have you looked at Nutch or Hadoop?  They are subprojects of Lucene,
developed specifically to support large-scale, distributed indexing.
Nutch is probably more mature whereas Hadoop supports clustering out of
the box...

ND

-----Original Message-----
From: Rajesh parab [mailto:rajesh_parab_1@yahoo.com]=20
Sent: Thursday, April 03, 2008 8:20 PM
To: java-user@lucene.apache.org
Subject: Lucene 2.3.0 and NFS

Hi,

We are currently using Lucene 2.0 for full-text
searches within our enterprise application, which can
be deployed in clustered environment. We generate
Lucene index for data stored inside relational
database.

As Lucene 2.0 did not have solid NFS support and as we
wanted Lucene based searches to work properly in
Clustered environment, we had decided on following
approach:
1. The index generation happens on a machine (could be
one of the cluster nodes or a separate machine) and
once the Lucene index is generated, we copy all the
index files to the database.
2. The index search request on each cluster node
retrieves the index files from database (during first
search or after index update), copies to the file
system and use it for searches.
3. Thus, each cluster node has its own copy of the
index and it keeps on picking up latest version if it
is available inside database.

This has worked fine for us till now, though we will
not be able continue with this model in future as we
want to support Lucene based searches across our
application and also want to index large components
inside our application like Wiki, forums, etc. As the
index will grow, storing and retrieving index files
from database will not be an efficient operation.

My questions are:
- Will we be able to use NFS if we move to Lucene
2.3.0?
- Will there be any significant performance impact on
index generation and searches if we move to NFS?
- Is Lucene + NFS combination supported for all
operating systems? (We support Windows, Solaris, AIX,
HP-UX, Red Hat Linux)
- Is there any other alternative available other than
NFS?

I will really appreciate your comments/thoughts on
this topic.

Regards,
Rajesh


=20
________________________________________________________________________
____________
You rock. That's why Blockbuster's offering you one month of Blockbuster
Total Access, No Cost. =20
http://tc.deals.yahoo.com/tc/blockbuster/text5.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33471-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 04 04:56:25 2008
Return-Path: <java-user-return-33471-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25311 invoked from network); 4 Apr 2008 04:56:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Apr 2008 04:56:25 -0000
Received: (qmail 66621 invoked by uid 500); 4 Apr 2008 04:56:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66585 invoked by uid 500); 4 Apr 2008 04:56:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66574 invoked by uid 99); 4 Apr 2008 04:56:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Apr 2008 21:56:19 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [121.243.22.156] (HELO delhtca02.Infoedge.com) (121.243.22.156)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Apr 2008 04:55:35 +0000
Received: from DELHTCA01.Infoedge.com (172.16.3.234) by delhtca02.infoedge.com
 (172.16.3.245) with Microsoft SMTP Server (TLS) id 8.0.751.0; Fri, 4 Apr 2008
 10:20:08 +0530
Received: from [172.16.1.67] (220.225.240.5) by DELHTCA01.Infoedge.com
 (172.16.3.234) with Microsoft SMTP Server id 8.0.744.0; Fri, 4 Apr 2008
 10:20:08 +0530
Subject: Re: Controlling index file name
From: Anshum <anshum.gupta@naukri.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>, Bhavin Pandya
	<bhavinp@rediff.co.in>
In-Reply-To: <010701c8958a$48fb18a0$e70310ac@bhavin>
References: <16418709.post@talk.nabble.com>
	 <010701c8958a$48fb18a0$e70310ac@bhavin>
Content-Type: text/plain
Date: Fri, 4 Apr 2008 10:25:45 +0530
Message-ID: <1207284945.5939.11.camel@localhost>
MIME-Version: 1.0
X-Mailer: Evolution 2.10.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I guess (but 'm not quite sure) you are looking for a way to
incrementally index(+update existing index), there would be a lot info
available on the same. 
What I would suggest would be deleting the indexes from the current
index using deleteDocuments
(http://lucene.apache.org/java/2_3_1/api/org/apache/lucene/index/IndexWriter.html#deleteDocuments(org.apache.lucene.index.Term)) and follow it up by adding the same (but updated) docs into the index. You could periodically merge the indexes (using lucene merger) to avoid the incremental index to grow to a huge size. 
To search the indexes you could use a multi searcher for the incremental
index and base index until merged.
Important to mention, for this you would need to design someway to
lookup and compile a list of modified docs(to be newly indexed or
reindexed) and pass it to lucene while indexing.

--
Anshum


On Thu, 2008-04-03 at 18:27 +0530, Bhavin Pandya wrote:
> I also faced same problem in past.
> But in my case the index size was not the issue so i maintained two folder
> "newindex" and "oldindex"... and swaping at every update.
> 
> -Bhavin pandya
> 
> ----- Original Message -----
> From: "021336" <smith_brad@bah.com>
> To: <java-user@lucene.apache.org>
> Sent: Tuesday, April 01, 2008 9:44 PM
> Subject: Controlling index file name
> 
> 
> >
> > We use Lucene to create simple data stores that we deploy with our
> > application.  Our application also supports auto-updating and we refresh
> > these data stores monthly.  Since Lucene computes the names for the index
> > we
> > end up deploying new files each time while leaving the old files to
> > continue
> > taking up space needlessly.
> >
> > The options I see to resolve this are:
> > - After each update check all the data store locations and delete CFS
> > files
> > that have a date earlier then the Segments files, or
> > - Create the index files with a consistent name so that we overwrite
> > existing files with new files during each auto-update.
> >
> > I found one thread discussing this using "AddIndexes" but I could not
> > follow
> > it through to implementation.  Also, we are using Java 1.4 not 1.5.
> >
> > Any suggestions?
> >
> >
> > --
> > View this message in context:
> > http://www.nabble.com/Controlling-index-file-name-tp16418709p16418709.html
> > Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33472-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 04 07:43:20 2008
Return-Path: <java-user-return-33472-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98195 invoked from network); 4 Apr 2008 07:43:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Apr 2008 07:43:20 -0000
Received: (qmail 23833 invoked by uid 500); 4 Apr 2008 07:43:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23802 invoked by uid 500); 4 Apr 2008 07:43:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23791 invoked by uid 99); 4 Apr 2008 07:43:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Apr 2008 00:43:12 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [62.213.161.134] (HELO pmx.sirma.bg) (62.213.161.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Apr 2008 07:42:27 +0000
X-Virus-Scanned: Sirma Antivirus System
Received: from [192.168.128.140] (ivasilev.sirma.int [192.168.128.140])
	by pmx.sirma.bg (Sirma mail system) with ESMTP id 658C824002
	for <java-user@lucene.apache.org>; Fri,  4 Apr 2008 10:42:36 +0300 (EEST)
Message-ID: <47F5DBEC.1010801@sirma.bg>
Date: Fri, 04 Apr 2008 10:42:36 +0300
From: Ivan Vasilev <ivasilev@sirma.bg>
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: PhraseQuery little bug?
References: <47F4AB7C.7090702@sirma.bg> <005201c89587$38d86b10$8a01a8c0@GEMINI>
In-Reply-To: <005201c89587$38d86b10$8a01a8c0@GEMINI>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

In Lucene sytax in htis case ~5 means slop=5 - this is for Span queries.
I think the problem is that in the class PhraseQuery the slop that we 
set some times is interpreted as inclusive other times exclusive. When 
it is considered inclusive then the distance between "apple" and "pear" 
is 5, because the words "apple 2 3 4 pear" are 5. But when this slop is 
considered exclusive then we exclude "apple" and "pear" and the distance 
is 3.
I think htis is the problem - the class PhraseQuery considers the given 
slop inclusive when counting words forward and consithers it exclusive 
when counting backwards.


Darren Govoni wrote:
> One interpretation of the query with ~5 is that your text has 5 words
> and ~5 would imply a word in any position can match. Could it be this?
>
> ----- Original Message ----- From: "Ivan Vasilev" <ivasilev@sirma.bg>
> To: "LUCENE MAIL LIST" <java-user@lucene.apache.org>
> Sent: Thursday, April 03, 2008 6:03 AM
> Subject: PhraseQuery little bug?
>
>
>> Hi Guys,
>>
>> I make the following test  I create 2 files. File1.txt with content:
>> apple 2 3 4 pear
>> And File2.txt with content:
>> pear 2 3 4 apple
>>
>> I made the following searching tests:
>> 1. Using Luke Search tab.
>>
>> 1.1. When searching for:
>> content:"pear apple"~3
>> Then the File1.txt is returned.
>>
>> 1.2. When searching for:
>> content:"pear apple"~4
>> Result is the same  File1.txt
>>
>> 1.3. When searching for:
>> content:"pear apple"~5
>> Both File1.txt and File2.txt are returned.
>>
>> 2. Using simple app that uses the class PhraseQuery  the results are 
>> the same as in Test 1.
>> PhraseQuery pq = new PhraseQuery();
>> pq.add(new Term("content", "apple"));
>> pq.add(new Term("content", "pear"));
>>
>> 2.1. pq.setSlop(3);
>> Then the File1.txt is returned.
>>
>> 2.2. pq.setSlop(4);
>> Result is the same  File1.txt
>>
>> 2.3. pq.setSlop(5);
>> Both File1.txt and File2.txt are returned.
>>
>> 3. Using simple app that uses the class SpanNearQuery  the results 
>> are now different (on my opinion these are the correct results):
>> new SpanNearQuery(new SpanQuery[]{
>> new SpanTermQuery(new Term("content", "apple")),
>> new SpanTermQuery(new Term("content", "pear"))}, 3, false);
>>
>> Both File1.txt and File2.txt are returned.
>> When changing the slop from 3 to 2 (in the constructor)  no results 
>> found.
>>
>> When changing it to 4  again 2 results are returned.
>> When changing the inOrder boolean (in the constructor) from false to 
>> true  then of course File2.txt is not returned under any other 
>> conditions.
>>
>> Although this is not very important but I think PhraseQuery has a bit 
>> buggy behavior. When searching with slop equal to the number of words 
>> that are between the two searched words than the files that contain 
>> them IN THE SAME ORDER are returned.
>> When slop is with 2 greater  ranging search words, as well as, in 
>> between words  then THE ORDER of the searched words does not matter.
>>
>> Best Regards,
>> Ivan
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> __________ NOD32 2998 (20080403) Information __________
>
> This message was checked by NOD32 antivirus system.
> http://www.eset.com
>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33473-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 04 09:16:57 2008
Return-Path: <java-user-return-33473-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30050 invoked from network); 4 Apr 2008 09:16:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Apr 2008 09:16:57 -0000
Received: (qmail 63956 invoked by uid 500); 4 Apr 2008 09:16:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63934 invoked by uid 500); 4 Apr 2008 09:16:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63923 invoked by uid 99); 4 Apr 2008 09:16:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Apr 2008 02:16:49 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.246] (HELO an-out-0708.google.com) (209.85.132.246)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Apr 2008 09:16:05 +0000
Received: by an-out-0708.google.com with SMTP id c5so887278anc.49
        for <java-user@lucene.apache.org>; Fri, 04 Apr 2008 02:16:08 -0700 (PDT)
Received: by 10.100.33.13 with SMTP id g13mr2298310ang.96.1207300561974;
        Fri, 04 Apr 2008 02:16:01 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 17sm4376223hsq.16.2008.04.04.02.16.01
        (version=TLSv1/SSLv3 cipher=OTHER);
        Fri, 04 Apr 2008 02:16:01 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <403309.58434.qm@web52003.mail.re2.yahoo.com>
References: <403309.58434.qm@web52003.mail.re2.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <04C586A0-B3F9-439D-A094-CBA3B8E0B29B@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Lucene 2.3.0 and NFS
Date: Fri, 4 Apr 2008 05:16:14 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


Rajesh parab wrote:
> Hi,
>
> We are currently using Lucene 2.0 for full-text
> searches within our enterprise application, which can
> be deployed in clustered environment. We generate
> Lucene index for data stored inside relational
> database.
>
> As Lucene 2.0 did not have solid NFS support and as we
> wanted Lucene based searches to work properly in
> Clustered environment, we had decided on following
> approach:
> 1. The index generation happens on a machine (could be
> one of the cluster nodes or a separate machine) and
> once the Lucene index is generated, we copy all the
> index files to the database.

Note that you can do also incremental replication: often, the Lucene  
index changes in minor ways (eg a single new segment is flushed and a  
new segments_N and segments.gen is written) so you should only sync  
the files that are new (and remove the ones that are now gone).   
Lucene's write-once approach makes this very simple (you just have to  
compare file names, not the contents of each file).

It's also possible to replicate without using a DB.  EG rsync does a  
great job.

> 2. The index search request on each cluster node
> retrieves the index files from database (during first
> search or after index update), copies to the file
> system and use it for searches.
> 3. Thus, each cluster node has its own copy of the
> index and it keeps on picking up latest version if it
> is available inside database.
>
> This has worked fine for us till now, though we will
> not be able continue with this model in future as we
> want to support Lucene based searches across our
> application and also want to index large components
> inside our application like Wiki, forums, etc. As the
> index will grow, storing and retrieving index files
> from database will not be an efficient operation.
>
> My questions are:
> - Will we be able to use NFS if we move to Lucene
> 2.3.0?

Make sure you update to 2.3.1, not 2.3.0.

> - Will there be any significant performance impact on
> index generation and searches if we move to NFS?
> - Is Lucene + NFS combination supported for all
> operating systems? (We support Windows, Solaris, AIX,
> HP-UX, Red Hat Linux)

NFS *should* work, however:

   * It's not widely used, so, test thoroughly in your particular setup.

   * Most likely to work is if you use a single machine writing to  
the index, and many readers.

   * Performance is likely not great, especially on searching, but  
you should test in your specific situation.

> - Is there any other alternative available other than
> NFS?
>

It's also possible to replicate without using a DB.  EG rsync does  
agreat job.

You should look at Solr, since it already has all the infrastructure  
toaccept updates, replicate index changes to remote machines, etc.

> I will really appreciate your comments/thoughts on
> this topic.
>
> Regards,
> Rajesh
>
>
>        
> ______________________________________________________________________ 
> ______________
> You rock. That's why Blockbuster's offering you one month of  
> Blockbuster Total Access, No Cost.
> http://tc.deals.yahoo.com/tc/blockbuster/text5.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33474-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 04 10:39:31 2008
Return-Path: <java-user-return-33474-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58902 invoked from network); 4 Apr 2008 10:39:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Apr 2008 10:39:31 -0000
Received: (qmail 81145 invoked by uid 500); 4 Apr 2008 10:39:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81119 invoked by uid 500); 4 Apr 2008 10:39:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81107 invoked by uid 99); 4 Apr 2008 10:39:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Apr 2008 03:39:24 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anafreireveiga@gmail.com designates 209.85.162.183 as permitted sender)
Received: from [209.85.162.183] (HELO el-out-1112.google.com) (209.85.162.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Apr 2008 10:38:43 +0000
Received: by el-out-1112.google.com with SMTP id y26so1812481ele.4
        for <java-user@lucene.apache.org>; Fri, 04 Apr 2008 03:38:55 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=s8G6J1P18cAqYcfXMssm8xK01730DN+kb7ENB3gui6I=;
        b=CYTlofv4SvLQthxLpK6jcKUqZ5CAq1KfaltWUs6OgC3MsvrQcFkxO9asmt+K+H2/KySWG5F7RcO90yNaoe/SP+ZjJF1GOaBoqojaUfk4jhwRb/7ORC/gXbTC3kgN3Ky+L57PQvmGGmpUF5abjTzwe4k6nXGjrDHOGvLaBUqVm00=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=bfiBzYhJzM27H2p1qDkAmWWHXKF66K6ylO6TxOmh0mJE7Y8MKjrfVsw4AA0RAuDQZEvtncxkYOfAojVg9tjuQ48cMrzQT6N9/PFq7U5/qcU8MchjEw4yfsGN7ZU5D3Pvcz47ufUJPKyBsAYiNC2OGwDjAwyuZf8cSe2aSMimD94=
Received: by 10.114.12.9 with SMTP id 9mr1623938wal.23.1207305534451;
        Fri, 04 Apr 2008 03:38:54 -0700 (PDT)
Received: by 10.115.108.16 with HTTP; Fri, 4 Apr 2008 03:38:54 -0700 (PDT)
Message-ID: <c78ed28e0804040338y2dacc7dcn703ff1bc0d730572@mail.gmail.com>
Date: Fri, 4 Apr 2008 12:38:54 +0200
From: "Ana Rabade" <anafreireveiga@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Proximity Searches
In-Reply-To: <359a92830804031056x7309dcadu856b8abc87059a9e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6741_25277214.1207305534443"
References: <c78ed28e0803311054v21fd3a8cgdb15778525f5895@mail.gmail.com>
	 <c78ed28e0804030917j24bdf546t82034a7989f8a3d0@mail.gmail.com>
	 <359a92830804031056x7309dcadu856b8abc87059a9e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_6741_25277214.1207305534443
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

I am using ngrams and I need to force that a group of them are together, bu=
t
if any of them fails, I need that the document is also scored. Perhaps you
could help me to find the solution or give me a reference of which changes =
I
must do. I am using SpanNearQuery, because the ngrams must be in order.
Thanks for your answer.
   - Ana Maria Freire Veiga -

On Thu, Apr 3, 2008 at 7:56 PM, Erick Erickson <erickerickson@gmail.com>
wrote:

> Could you explain your use case? Because to say that you want to
> score documents that don't have all the terms with a *phrase query*
> is contradictory. The point of a phrase query is exactly that all
> the terms are there and within some some proximity.....
>
>
> Best
> Erick
>
> On Thu, Apr 3, 2008 at 12:17 PM, Ana R=E1bade <anafreireveiga@gmail.com>
> wrote:
>
> > Hi!
> >
> > I'm using Lucene Proximity Searches, but I've seen Lucene only scores
> > documents which contain all the terms in the phrase. I also need to
> score
> > documents although they don't contain all those terms.  Is it possible
> > with
> > Lucene PhraseQueries or SpanNearQuery? If not, could you tell me a way
> to
> > find my solution?
> >
> > Thank you very much.
> >
> >    - Ana M. Freire -
> >
>

------=_Part_6741_25277214.1207305534443--

From java-user-return-33475-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 04 11:50:39 2008
Return-Path: <java-user-return-33475-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78124 invoked from network); 4 Apr 2008 11:50:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Apr 2008 11:50:39 -0000
Received: (qmail 63310 invoked by uid 500); 4 Apr 2008 11:50:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62894 invoked by uid 500); 4 Apr 2008 11:50:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62883 invoked by uid 99); 4 Apr 2008 11:50:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Apr 2008 04:50:33 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [213.162.48.15] (HELO soufre.accelance.net) (213.162.48.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Apr 2008 11:49:50 +0000
Received: from [192.168.3.106] (LSt-Amand-152-32-31-90.w82-127.abo.wanadoo.fr [82.127.74.90])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by soufre.accelance.net (Postfix) with ESMTP id D172A4519A
	for <java-user@lucene.apache.org>; Fri,  4 Apr 2008 13:49:53 +0200 (CEST)
Message-ID: <47F615DB.6050608@garambrogne.net>
Date: Fri, 04 Apr 2008 13:49:47 +0200
From: Mathieu Lecarme <mathieu@garambrogne.net>
User-Agent: Thunderbird 2.0.0.12 (X11/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Error tolerant text search with Lucene?
References: <47F4F583.2090206@googlemail.com>
In-Reply-To: <47F4F583.2090206@googlemail.com>
X-Enigmail-Version: 0.95.6
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Marjan Celikik a crit :
> Hi everyone,
>
> I know that there are packages that support the "Did you mean ... ?"
> search features with lucene which tries to find the most suited
> correct-word query.. however, so far I haven't encountered the opposite
> search feature: given a correct query, find all documents which contain
> misspellings of the query.. are you guys aware of anything like this
> with lucene? 
You have to iterate over your query, if it's a BooleanQuery, keep it, if 
it's a TermQuery, replace it with a BooleanQuery with all variants of 
the Term with Occur.SHOULD

M.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33476-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 04 11:53:31 2008
Return-Path: <java-user-return-33476-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78867 invoked from network); 4 Apr 2008 11:53:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Apr 2008 11:53:31 -0000
Received: (qmail 68315 invoked by uid 500); 4 Apr 2008 11:53:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68291 invoked by uid 500); 4 Apr 2008 11:53:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68280 invoked by uid 99); 4 Apr 2008 11:53:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Apr 2008 04:53:25 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of adb@teamware.com designates 212.226.92.15 as permitted sender)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Apr 2008 11:52:35 +0000
Received: from intrepid.teamw.com (intrepid.teamw.com [10.142.128.11])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id m34BqmEY019617
	for <java-user@lucene.apache.org>; Fri, 4 Apr 2008 14:52:48 +0300
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz.teamw.com with ESMTP
	 id m44egqj_; 4 Apr 2008 14:52:00 +0300
Message-ID: <47F61678.4000203@teamware.com>
Date: Fri, 04 Apr 2008 22:52:24 +1100
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Search emails - parsing mailbox (mbox) files
References: <5cbf280a0804031204o1a8349d9vc6a927d491700bf3@mail.gmail.com>
In-Reply-To: <5cbf280a0804031204o1a8349d9vc6a927d491700bf3@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Fri, 04 Apr 2008 14:52:48 +0300 (EEST)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=-0.185,
	required 5, autolearn=not spam, BAYES_40 -0.18)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Subodh Damle wrote:
> Is there any reliable implementation for parsing email mailbox files (mbox
> format), especially large (>50MB) archives ? Even after searching lucene
> mailing list archives, googling around, I couldn't find one. I took a look
> at Apache James project which seems to offer some support , but couldn't
> find much documentation about it.

Apache James' MIME4J is one parser and Javamail also can parse mail.  I found 
Javamail more intuitive, but have not tested either against a large mail set for 
reliability and performance.

Antony



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33477-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 04 12:16:19 2008
Return-Path: <java-user-return-33477-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86954 invoked from network); 4 Apr 2008 12:16:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Apr 2008 12:16:19 -0000
Received: (qmail 719 invoked by uid 500); 4 Apr 2008 12:16:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 682 invoked by uid 500); 4 Apr 2008 12:16:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 671 invoked by uid 99); 4 Apr 2008 12:16:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Apr 2008 05:16:11 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of celikik@gmail.com designates 72.14.220.157 as permitted sender)
Received: from [72.14.220.157] (HELO fg-out-1718.google.com) (72.14.220.157)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Apr 2008 12:15:29 +0000
Received: by fg-out-1718.google.com with SMTP id d23so15254fga.27
        for <java-user@lucene.apache.org>; Fri, 04 Apr 2008 05:15:40 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding:from;
        bh=LnM9U5LV54MzvMqVhtAbbVk8KGcyPz2xQF+2SsG2C5k=;
        b=GmdAzyNnGtMAfizklvjokMMqn/3VGY82hXw3yuuOOUkYq/kIab/zEG5HlBaSyzl3A1IMgoyxIhdGFYZqT7xEzuMDAgzxVcpyupmW0Ru2ycbVwSirB1rZO0UNqXeCDVSx9ARIgvI7X8bCHf+TfzPJdhGxlfFZmiQrQbDQARRNZrg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding:from;
        b=I+RCz4Mb0Wxt4ozbID0ohx56Vg8nPhKpp0v45TtrlNbZLLjpYEFl0FlEHqbmqVjE07d/SJJoB7V84sR75BGwWypBh6qW+YLAyU6r6S0y5pzrNUJ7il1yjAePdFNzk/XCGH2Gk/90gsOXfXaevLTaOrFCpupa9gUZhOH2glMM5Sc=
Received: by 10.82.182.1 with SMTP id e1mr2829709buf.21.1207311340194;
        Fri, 04 Apr 2008 05:15:40 -0700 (PDT)
Received: from ?139.19.14.30? ( [139.19.14.30])
        by mx.google.com with ESMTPS id j12sm6668534fkf.6.2008.04.04.05.15.37
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 04 Apr 2008 05:15:39 -0700 (PDT)
Message-ID: <47F61BE8.2090404@googlemail.com>
Date: Fri, 04 Apr 2008 14:15:36 +0200
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Error tolerant text search with Lucene?
References: <47F4F583.2090206@googlemail.com> <47F615DB.6050608@garambrogne.net>
In-Reply-To: <47F615DB.6050608@garambrogne.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
From: Marjan Celikik <celikik@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Mathieu Lecarme wrote:
> You have to iterate over your query, if it's a BooleanQuery, keep it, 
> if it's a TermQuery, replace it with a BooleanQuery with all variants 
> of the Term with Occur.SHOULD
>
> M.
>

Thanks.. however I don't fully understand what do you mean by "iterate 
over your query". I would like a conceptual answer how is this done with 
Lucene, not a technical one..

Thanks again.

Marjan.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33478-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 04 12:44:20 2008
Return-Path: <java-user-return-33478-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4381 invoked from network); 4 Apr 2008 12:44:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Apr 2008 12:44:20 -0000
Received: (qmail 45695 invoked by uid 500); 4 Apr 2008 12:44:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45663 invoked by uid 500); 4 Apr 2008 12:44:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45652 invoked by uid 99); 4 Apr 2008 12:44:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Apr 2008 05:44:13 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [213.162.48.15] (HELO soufre.accelance.net) (213.162.48.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Apr 2008 12:43:31 +0000
Received: from [192.168.3.106] (LSt-Amand-152-32-31-90.w82-127.abo.wanadoo.fr [82.127.74.90])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by soufre.accelance.net (Postfix) with ESMTP id C886B4515C
	for <java-user@lucene.apache.org>; Fri,  4 Apr 2008 14:43:40 +0200 (CEST)
Message-ID: <47F6227A.4000807@garambrogne.net>
Date: Fri, 04 Apr 2008 14:43:38 +0200
From: Mathieu Lecarme <mathieu@garambrogne.net>
User-Agent: Thunderbird 2.0.0.12 (X11/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Error tolerant text search with Lucene?
References: <47F4F583.2090206@googlemail.com> <47F615DB.6050608@garambrogne.net> <47F61BE8.2090404@googlemail.com>
In-Reply-To: <47F61BE8.2090404@googlemail.com>
X-Enigmail-Version: 0.95.6
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Marjan Celikik a crit :
> Mathieu Lecarme wrote:
>> You have to iterate over your query, if it's a BooleanQuery, keep it, 
>> if it's a TermQuery, replace it with a BooleanQuery with all variants 
>> of the Term with Occur.SHOULD
>>
>> M.
>>
>
> Thanks.. however I don't fully understand what do you mean by "iterate 
> over your query". I would like a conceptual answer how is this done 
> with Lucene, not a technical one..
Your query is a tree, with BooleanQuery as branch and other query as 
leaf. If you wont to transforma query in "tolerant query", you have to 
change Term query (the leaf), with a "OR"  branch with variant term as leaf.

To find variant of a term, you have to used a list of your Term and 
apply a filter to its to group them. Common filter for that are 
stemming, ngram+levenstein distance, phonetic ...

M.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33479-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 04 12:50:37 2008
Return-Path: <java-user-return-33479-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5996 invoked from network); 4 Apr 2008 12:50:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Apr 2008 12:50:37 -0000
Received: (qmail 56249 invoked by uid 500); 4 Apr 2008 12:50:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56212 invoked by uid 500); 4 Apr 2008 12:50:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56196 invoked by uid 99); 4 Apr 2008 12:50:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Apr 2008 05:50:30 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of celikik@gmail.com designates 209.85.128.188 as permitted sender)
Received: from [209.85.128.188] (HELO fk-out-0910.google.com) (209.85.128.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Apr 2008 12:49:48 +0000
Received: by fk-out-0910.google.com with SMTP id 19so42484fkr.5
        for <java-user@lucene.apache.org>; Fri, 04 Apr 2008 05:49:59 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding:from;
        bh=nS0j7sT6nMZsmxNJoi8dfNGMbCu5AHjN841b2ohruk0=;
        b=wviBgFPaDiF9DkeGxAT5XImazHHJSfKA08OFkmphB+w9QGfOobwaRJiZoixM4EaTuwUMZGKt4usUE1+W/o2AcMI0RdKNWbLv0A9Rv8fsPZy4BRE4b2nccSyaQGe4ICMHN/0xWWXLehEyB80YHB7TcYAsqv124IlDkLR4Anh+du8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding:from;
        b=J05gBfbAuX/42XrYl2Q0kFojPwTQcr+DxsVTpKcmf/wUPdzmt/Dr6/lZYTSbjx8dvnR4cewtNLjsvb/zku+bVOhnZRDHWY9oNOLHaspzr4XhqbMDFtKpGvc9MZk+sxZ7ebdjLI8hqmGxqn4XbGNEz/rPlB5lECzq3n39dJ383Rw=
Received: by 10.82.188.14 with SMTP id l14mr2875436buf.37.1207313399254;
        Fri, 04 Apr 2008 05:49:59 -0700 (PDT)
Received: from ?139.19.14.30? ( [139.19.14.30])
        by mx.google.com with ESMTPS id g28sm6750073fkg.2.2008.04.04.05.49.57
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 04 Apr 2008 05:49:57 -0700 (PDT)
Message-ID: <47F623F3.3070200@googlemail.com>
Date: Fri, 04 Apr 2008 14:49:55 +0200
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Error tolerant text search with Lucene?
References: <47F4F583.2090206@googlemail.com> <47F615DB.6050608@garambrogne.net> <47F61BE8.2090404@googlemail.com> <47F6227A.4000807@garambrogne.net>
In-Reply-To: <47F6227A.4000807@garambrogne.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
From: Marjan Celikik <celikik@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Mathieu Lecarme wrote:
>
>> wever I don't fully understand what do you mean by "iterate over your 
>> query". I would like a conceptual answer how is this done with 
>> Lucene, not a technical one..
> Your query is a tree, with BooleanQuery as branch and other query as 
> leaf. If you wont to transforma query in "tolerant query", you have to 
> change Term query (the leaf), with a "OR"  branch with variant term as 
> leaf.
>
> To find variant of a term, you have to used a list of your Term and 
> apply a filter to its to group them. Common filter for that are 
> stemming, ngram+levenstein distance, phonetic ...
>
> M.
>
OK, now it's more clear.. my final question is when is this filter 
information incorporated.. at index time or at search time? i.e. I want 
to know whether the levenshtein distance is computed at query time or 
this information is precomputed in the index?

Marjan.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33480-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 04 13:38:18 2008
Return-Path: <java-user-return-33480-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20833 invoked from network); 4 Apr 2008 13:38:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Apr 2008 13:38:17 -0000
Received: (qmail 25969 invoked by uid 500); 4 Apr 2008 13:38:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25944 invoked by uid 500); 4 Apr 2008 13:38:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25933 invoked by uid 99); 4 Apr 2008 13:38:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Apr 2008 06:38:10 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [216.75.55.147] (HELO stimulussoft.com) (216.75.55.147)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Apr 2008 13:37:28 +0000
Received: (qmail 25686 invoked by uid 511); 4 Apr 2008 06:37:39 -0700
Received: from 41.243.232.1 by live.stimulussoft.com (envelope-from <jamie@stimulussoft.com>, uid 509) with qmail-scanner-1.25-st-qms 
 (spamassassin: 3.2.3. perlscan: 1.25-st-qms.  
 Clear:RC:0(41.243.232.1):SA:0(-2.3/5.0):. 
 Processed in 1.036259 secs); 04 Apr 2008 13:37:39 -0000
X-Antivirus-MYDOMAIN-Mail-From: jamie@stimulussoft.com via live.stimulussoft.com
X-Antivirus-MYDOMAIN: 1.25-st-qms (Clear:RC:0(41.243.232.1):SA:0(-2.3/5.0):. Processed in 1.036259 secs Process 25676)
Received: from dsl-243-232-01.telkomadsl.co.za (HELO ?192.168.0.50?) (jamie@stimulussoft.com@41.243.232.1)
  by stimulussoft.com with SMTP; 4 Apr 2008 06:37:38 -0700
Message-ID: <47F62FF3.4060009@stimulussoft.com>
Date: Fri, 04 Apr 2008 15:41:07 +0200
From: Jamie <jamie@stimulussoft.com>
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: unexpected query results (AND and OR)
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, hits=-2.3 required=5.0

Hi there

I need some help in understanding Lucene's query mechanism. I am 
receiving unexpected query results when combining terms with AND and OR 
operators. We are using Lucene to index emails. Our problem is that when 
we execute a search such as '(from:"john@sun.com") and 
(to:"tim@aol.com")' we are receiving results that do not contain both 
john@sun.com and tim@aol.com. i.e. There are some results containing 
only john@sun.com or tim@aol.com. The AND operator does not appear to 
work as expected by requiring both terms to appear in the document. We 
thought about using the lucene score value to filter exact matches out 
but we cannot do this as documents with even scores around 70% are 
applicable. Are we using Lucene in the wrong way? Is there something 
that we are missing?

Thanks in advance
Jamie




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33481-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 04 13:41:49 2008
Return-Path: <java-user-return-33481-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21773 invoked from network); 4 Apr 2008 13:41:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Apr 2008 13:41:49 -0000
Received: (qmail 38682 invoked by uid 500); 4 Apr 2008 13:41:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38659 invoked by uid 500); 4 Apr 2008 13:41:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38596 invoked by uid 99); 4 Apr 2008 13:41:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Apr 2008 06:41:39 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [216.75.55.147] (HELO stimulussoft.com) (216.75.55.147)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Apr 2008 13:40:55 +0000
Received: (qmail 25738 invoked by uid 511); 4 Apr 2008 06:41:07 -0700
Received: from 41.243.232.1 by live.stimulussoft.com (envelope-from <jamie@stimulussoft.com>, uid 509) with qmail-scanner-1.25-st-qms 
 (spamassassin: 3.2.3. perlscan: 1.25-st-qms.  
 Clear:RC:0(41.243.232.1):SA:0(-2.3/5.0):. 
 Processed in 1.433353 secs); 04 Apr 2008 13:41:07 -0000
X-Antivirus-MYDOMAIN-Mail-From: jamie@stimulussoft.com via live.stimulussoft.com
X-Antivirus-MYDOMAIN: 1.25-st-qms (Clear:RC:0(41.243.232.1):SA:0(-2.3/5.0):. Processed in 1.433353 secs Process 25728)
Received: from dsl-243-232-01.telkomadsl.co.za (HELO ?192.168.0.50?) (jamie@stimulussoft.com@41.243.232.1)
  by stimulussoft.com with SMTP; 4 Apr 2008 06:41:06 -0700
Message-ID: <47F630C2.4060207@stimulussoft.com>
Date: Fri, 04 Apr 2008 15:44:34 +0200
From: Jamie <jamie@stimulussoft.com>
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: unexpected query results (AND and OR)
References: <47F62FF3.4060009@stimulussoft.com>
In-Reply-To: <47F62FF3.4060009@stimulussoft.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, hits=-2.3 required=5.0

I would also like to point out that we also thought about using a filter 
but it is being used for other things.

Jamie wrote:
> Hi there
>
> I need some help in understanding Lucene's query mechanism. I am 
> receiving unexpected query results when combining terms with AND and 
> OR operators. We are using Lucene to index emails. Our problem is that 
> when we execute a search such as '(from:"john@sun.com") and 
> (to:"tim@aol.com")' we are receiving results that do not contain both 
> john@sun.com and tim@aol.com. i.e. There are some results containing 
> only john@sun.com or tim@aol.com. The AND operator does not appear to 
> work as expected by requiring both terms to appear in the document. We 
> thought about using the lucene score value to filter exact matches out 
> but we cannot do this as documents with even scores around 70% are 
> applicable. Are we using Lucene in the wrong way? Is there something 
> that we are missing?
>
> Thanks in advance
> Jamie
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


-- 
Stimulus Software - MailArchiva
Email Archiving And Compliance
USA Tel: +1-713-366-8072 ext 3
UK Tel: +44-20-80991035 ext 3
Email: jamie@stimulussoft.com
Web: http://www.mailarchiva.com

To receive MailArchiva Enterprise Edition product announcements, send a message to: <mailarchiva-enterprise-edition-subscribe@stimulussoft.com> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33482-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 04 13:47:47 2008
Return-Path: <java-user-return-33482-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23468 invoked from network); 4 Apr 2008 13:47:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Apr 2008 13:47:47 -0000
Received: (qmail 49066 invoked by uid 500); 4 Apr 2008 13:47:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49023 invoked by uid 500); 4 Apr 2008 13:47:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49012 invoked by uid 99); 4 Apr 2008 13:47:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Apr 2008 06:47:40 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.186 as permitted sender)
Received: from [209.85.128.186] (HELO fk-out-0910.google.com) (209.85.128.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Apr 2008 13:46:58 +0000
Received: by fk-out-0910.google.com with SMTP id 19so67477fkr.5
        for <java-user@lucene.apache.org>; Fri, 04 Apr 2008 06:47:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=NsrRYb7oih+LxiO3pQuFvhYl4WTTx7XdLktihHzk6vU=;
        b=aHI3pDV00DzqJa6PMSje7Ic2IPB8ctHEJCece1XHCEZ0W91PznZI76IGTi1pUn6zeSdiuPgxo8Sn0I0qyfvUpdF92zDTX1vchkr4yP2oWVXqd7EaA3DuyAaawXAU0/07hmtL0fzDOKVX2bjvCkwRyLOK0DkmcCvFSQeM6p5av2s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=lEJu4AkwsYZZe5AYxibK83gx0xHii/6V3yJS2mlBBg8gf+RarAogiPlFDfxAv+a4rBGW9GwEwdaFgPfTBnmEzbA6E0LBFDQ10dwE0pbrHrNOuSwekWXHNSdHcxRsXW7crFM3Yn9Hue769dOeXHQtnHShfMone/VY+P8lF4by9lo=
Received: by 10.82.180.10 with SMTP id c10mr3085617buf.9.1207316829108;
        Fri, 04 Apr 2008 06:47:09 -0700 (PDT)
Received: by 10.82.191.6 with HTTP; Fri, 4 Apr 2008 06:47:09 -0700 (PDT)
Message-ID: <359a92830804040647u116105ctd05664276ec44f3e@mail.gmail.com>
Date: Fri, 4 Apr 2008 09:47:09 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: unexpected query results (AND and OR)
In-Reply-To: <47F62FF3.4060009@stimulussoft.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4893_3832698.1207316829066"
References: <47F62FF3.4060009@stimulussoft.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4893_3832698.1207316829066
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I believe you must capitalize the AND. lower-case 'and' is ignored.

you could also construct your own BoolenQuery if you wanted.

I recommend  copy of Luke to interactively examine how queries
are parsed. Also, toString is your friend....

Best
Erick



On Fri, Apr 4, 2008 at 9:41 AM, Jamie <jamie@stimulussoft.com> wrote:

> Hi there
>
> I need some help in understanding Lucene's query mechanism. I am receiving
> unexpected query results when combining terms with AND and OR operators. We
> are using Lucene to index emails. Our problem is that when we execute a
> search such as '(from:"john@sun.com") and (to:"tim@aol.com")' we are
> receiving results that do not contain both john@sun.com and tim@aol.com.
> i.e. There are some results containing only john@sun.com or tim@aol.com.
> The AND operator does not appear to work as expected by requiring both terms
> to appear in the document. We thought about using the lucene score value to
> filter exact matches out but we cannot do this as documents with even scores
> around 70% are applicable. Are we using Lucene in the wrong way? Is there
> something that we are missing?
>
> Thanks in advance
> Jamie
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_4893_3832698.1207316829066--

From java-user-return-33483-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 04 14:00:19 2008
Return-Path: <java-user-return-33483-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28421 invoked from network); 4 Apr 2008 14:00:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Apr 2008 14:00:18 -0000
Received: (qmail 64578 invoked by uid 500); 4 Apr 2008 14:00:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64555 invoked by uid 500); 4 Apr 2008 14:00:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64544 invoked by uid 99); 4 Apr 2008 14:00:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Apr 2008 07:00:12 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [213.162.48.15] (HELO soufre.accelance.net) (213.162.48.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Apr 2008 13:59:30 +0000
Received: from [192.168.3.106] (LSt-Amand-152-32-31-90.w82-127.abo.wanadoo.fr [82.127.74.90])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by soufre.accelance.net (Postfix) with ESMTP id B4F5945313
	for <java-user@lucene.apache.org>; Fri,  4 Apr 2008 15:59:40 +0200 (CEST)
Message-ID: <47F6344A.9020104@garambrogne.net>
Date: Fri, 04 Apr 2008 15:59:38 +0200
From: Mathieu Lecarme <mathieu@garambrogne.net>
User-Agent: Thunderbird 2.0.0.12 (X11/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Error tolerant text search with Lucene?
References: <47F4F583.2090206@googlemail.com> <47F615DB.6050608@garambrogne.net> <47F61BE8.2090404@googlemail.com> <47F6227A.4000807@garambrogne.net> <47F623F3.3070200@googlemail.com>
In-Reply-To: <47F623F3.3070200@googlemail.com>
X-Enigmail-Version: 0.95.6
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Marjan Celikik a crit :
> Mathieu Lecarme wrote:
>>
>>> wever I don't fully understand what do you mean by "iterate over 
>>> your query". I would like a conceptual answer how is this done with 
>>> Lucene, not a technical one..
>> Your query is a tree, with BooleanQuery as branch and other query as 
>> leaf. If you wont to transforma query in "tolerant query", you have 
>> to change Term query (the leaf), with a "OR"  branch with variant 
>> term as leaf.
>>
>> To find variant of a term, you have to used a list of your Term and 
>> apply a filter to its to group them. Common filter for that are 
>> stemming, ngram+levenstein distance, phonetic ...
>>
>> M.
>>
> OK, now it's more clear.. my final question is when is this filter 
> information incorporated.. at index time or at search time?
both. You've got two index, one for your data, one for your Term. The 
second (dictionnary, lexicon ...) uses one Document per Term, and n 
Field for informations like ngram or phonetic. When you search a near 
word, you build data from the word, build a request with this data, and 
sort result with levenstein distance. You've got an ordered list of 
suggestion.
> i.e. I want to know whether the levenshtein distance is computed at 
> query time or this information is precomputed in the index?
First lucene select candidate, after you pick the best from this list. 
Levenstein distance is only apply is only apply on few words.

M.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33484-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 04 14:13:30 2008
Return-Path: <java-user-return-33484-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35762 invoked from network); 4 Apr 2008 14:13:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Apr 2008 14:13:30 -0000
Received: (qmail 87737 invoked by uid 500); 4 Apr 2008 14:13:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86975 invoked by uid 500); 4 Apr 2008 14:13:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86964 invoked by uid 99); 4 Apr 2008 14:13:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Apr 2008 07:13:23 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.202] (HELO spunkymail-a17.g.dreamhost.com) (208.97.132.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Apr 2008 14:12:32 +0000
Received: from [192.168.1.35] (82-170-145-52-static.dsl.ip.tiscali.nl [82.170.145.52])
	by spunkymail-a17.g.dreamhost.com (Postfix) with ESMTP id 6463075121
	for <java-user@lucene.apache.org>; Fri,  4 Apr 2008 07:12:50 -0700 (PDT)
Message-Id: <B7A68BFF-997B-4DE8-8D1A-55FAD2888973@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <47F61678.4000203@teamware.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: Search emails - parsing mailbox (mbox) files
Date: Fri, 4 Apr 2008 16:12:48 +0200
References: <5cbf280a0804031204o1a8349d9vc6a927d491700bf3@mail.gmail.com> <47F61678.4000203@teamware.com>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org

You might have a look at Aperture (http://aperture.sourceforge.net).   
It supports a fair number of mail sources including mbox and imap, I  
think.

-Grant

On Apr 4, 2008, at 1:52 PM, Antony Bowesman wrote:

> Subodh Damle wrote:
>> Is there any reliable implementation for parsing email mailbox  
>> files (mbox
>> format), especially large (>50MB) archives ? Even after searching  
>> lucene
>> mailing list archives, googling around, I couldn't find one. I took  
>> a look
>> at Apache James project which seems to offer some support , but  
>> couldn't
>> find much documentation about it.
>
> Apache James' MIME4J is one parser and Javamail also can parse  
> mail.  I found Javamail more intuitive, but have not tested either  
> against a large mail set for reliability and performance.
>
> Antony
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33485-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 04 16:50:10 2008
Return-Path: <java-user-return-33485-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45513 invoked from network); 4 Apr 2008 16:50:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Apr 2008 16:50:10 -0000
Received: (qmail 34478 invoked by uid 500); 4 Apr 2008 16:50:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34453 invoked by uid 500); 4 Apr 2008 16:50:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34442 invoked by uid 99); 4 Apr 2008 16:50:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Apr 2008 09:50:03 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 76.13.13.65 is neither permitted nor denied by domain of flemingshi@gmail.com)
Received: from [76.13.13.65] (HELO n2a.bullet.mail.ac4.yahoo.com) (76.13.13.65)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 04 Apr 2008 16:49:11 +0000
Received: from [76.13.13.26] by n2.bullet.mail.ac4.yahoo.com with NNFMP; 04 Apr 2008 08:45:53 -0000
Received: from [68.142.194.243] by t3.bullet.mail.ac4.yahoo.com with NNFMP; 04 Apr 2008 16:49:28 -0000
Received: from [68.142.201.248] by t1.bullet.mud.yahoo.com with NNFMP; 04 Apr 2008 16:49:28 -0000
Received: from [127.0.0.1] by omp409.mail.mud.yahoo.com with NNFMP; 04 Apr 2008 16:49:28 -0000
X-Yahoo-Newman-Id: 271316.33722.bm@omp409.mail.mud.yahoo.com
Received: (qmail 79888 invoked from network); 4 Apr 2008 16:49:27 -0000
Received: from unknown (HELO ?10.1.1.152?) (flemingshi@69.36.252.151 with plain)
  by smtp113.plus.mail.sp1.yahoo.com with SMTP; 4 Apr 2008 16:49:27 -0000
X-YMail-OSG: UxFgyiMVM1kf9CVQqK07KTFnzUvtc1iMI2G1TmXcakamE35qku5CYzW5e6FjZ5B00ZWEHTsL.p2TINOzkarzsGjSKaGm
X-Yahoo-Newman-Property: ymail-3
Message-Id: <1A62FFCF-90D8-419F-B8A4-BCB5523D6C19@gmail.com>
From: Fleming Shi <flemingshi@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Ability to sort integer fields on large index
Date: Fri, 4 Apr 2008 09:49:26 -0700
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Here is the problem:

- Single Large index with upto 200 million documents
- Each document contains field using epoch timestamp format (padding  
is required when creating range requests)
- One of the frequently used search query,  a range request on the  
timestamp field (10 digits)
- Other searches are fine, but the search using range request  
(1207190000 to 1207190258), even small result set, still slow when  
"sort" is requested

My questions:
- Is Lucene sorting then search or is it doing search then sort the  
results?
- Is there a way to get this type of searches to return faster with  
heavier weight on the timestamp not on relevancy?

Any insight would be greatly appreciated

/Regards



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33486-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 04 17:07:42 2008
Return-Path: <java-user-return-33486-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58056 invoked from network); 4 Apr 2008 17:07:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Apr 2008 17:07:42 -0000
Received: (qmail 63625 invoked by uid 500); 4 Apr 2008 17:07:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63572 invoked by uid 500); 4 Apr 2008 17:07:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63535 invoked by uid 99); 4 Apr 2008 17:07:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Apr 2008 10:07:32 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.166.182 as permitted sender)
Received: from [64.233.166.182] (HELO py-out-1112.google.com) (64.233.166.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Apr 2008 17:06:48 +0000
Received: by py-out-1112.google.com with SMTP id z74so147800pyg.9
        for <java-user@lucene.apache.org>; Fri, 04 Apr 2008 10:07:00 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:subject:from:to:in-reply-to:references:content-type:date:message-id:mime-version:x-mailer:content-transfer-encoding;
        bh=K9p1gMJtfmbDewiLs1CWz1kcxaCBooZEHV3VM4wcOzk=;
        b=rNFizeEwrB2JsKFRSGYDAG+cD7AX6sfPe0jrLcS0xDHGwNBRKQ+mRbq5CVezNk+0E1e1G2iUiSMmGNB4CefMx6oFSiRYRqsZ5hCJHZeZBHKFsVreDXte6gMDlAMDLOM0VeVj643JZE5ZRQdZBKQx2rX7n2i9i1Cp6B2DtcAaWjU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=subject:from:to:in-reply-to:references:content-type:date:message-id:mime-version:x-mailer:content-transfer-encoding;
        b=VtvyyeEaSq4jL5JulWOF+DiDzxtEJdj2dj7aLSpgLemODfJOeJYY/nibFnvx6phf98C07Ik0XineVE9+91cp0NsZFR73LhYlpbm+GIfnioPPWnhZiOMsihu5ZA51JNSaYnvlzaYEYYAXQXqnsTPhMYXQW/XRFa9NCewI3ZbdJjY=
Received: by 10.65.244.15 with SMTP id w15mr2109483qbr.82.1207328820355;
        Fri, 04 Apr 2008 10:07:00 -0700 (PDT)
Received: from ?192.168.1.100? ( [69.124.234.149])
        by mx.google.com with ESMTPS id d2sm4455275qbc.36.2008.04.04.10.06.57
        (version=SSLv3 cipher=RC4-MD5);
        Fri, 04 Apr 2008 10:06:59 -0700 (PDT)
Subject: Re: Ability to sort integer fields on large index
From: Mark Miller <markrmiller@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <1A62FFCF-90D8-419F-B8A4-BCB5523D6C19@gmail.com>
References: <1A62FFCF-90D8-419F-B8A4-BCB5523D6C19@gmail.com>
Content-Type: text/plain; charset=utf-8
Date: Fri, 04 Apr 2008 13:07:00 -0400
Message-Id: <1207328820.6454.5.camel@m-laptop>
Mime-Version: 1.0
X-Mailer: Evolution 2.22.0 
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

You should use DateTools to break up your time stamp into multiple
fields. This can work a lot faster than using a field with so many
different terms.

Are you using a RangeQuery? If you are, ditch it and use a
ConstantScoreRangeQuery. The former will expand the query to a boolean
that contains each matching unique term while the latter will just score
1 for each matching doc.


> My questions:
> - Is Lucene sorting then search or is it doing search then sort the  
> results?
> - Is there a way to get this type of searches to return faster with  
> heavier weight on the timestamp not on relevancy?

I believe that Lucene is scoring docs, and as it scores them, dropping
them into a priority queue that sorts...normally by the score, but
optionally by fields as well.



- Mark

On Fri, 2008-04-04 at 09:49 -0700, Fleming Shi wrote:
> Here is the problem:
> 
> - Single Large index with upto 200 million documents
> - Each document contains field using epoch timestamp format (padding  
> is required when creating range requests)
> - One of the frequently used search query,  a range request on the  
> timestamp field (10 digits)
> - Other searches are fine, but the search using range request  
> (1207190000 to 1207190258), even small result set, still slow when  
> "sort" is requested
> 
> My questions:
> - Is Lucene sorting then search or is it doing search then sort the  
> results?
> - Is there a way to get this type of searches to return faster with  
> heavier weight on the timestamp not on relevancy?
> 
> Any insight would be greatly appreciated
> 
> /Regards
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33487-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 04 20:09:23 2008
Return-Path: <java-user-return-33487-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44272 invoked from network); 4 Apr 2008 20:09:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Apr 2008 20:09:23 -0000
Received: (qmail 73812 invoked by uid 500); 4 Apr 2008 20:09:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73780 invoked by uid 500); 4 Apr 2008 20:09:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73769 invoked by uid 99); 4 Apr 2008 20:09:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Apr 2008 13:09:16 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.222.209.11] (HELO mirkwood.informatics.jax.org) (209.222.209.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Apr 2008 20:08:25 +0000
Received: from [127.0.0.1] (corona [209.222.209.245])
	by mirkwood.informatics.jax.org (8.13.8/8.13.8) with ESMTP id m34K8gwJ001537
	for <java-user@lucene.apache.org>; Fri, 4 Apr 2008 16:08:43 -0400 (EDT)
	(envelope-from mhall@informatics.jax.org)
Message-ID: <47F68A32.7090902@informatics.jax.org>
Date: Fri, 04 Apr 2008 16:06:10 -0400
From: Matthew Hall <mhall@informatics.jax.org>
User-Agent: Thunderbird 1.5.0.14 (Windows/20071210)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Question About Hits
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-PMX-Version: 5.4.1.325704, Antispam-Engine: 2.6.0.325393, Antispam-Data: 2008.4.4.125343
X-PerlMx-Spam: Gauge=IIIIIII, Probability=7%, Report='BODY_SIZE_1800_1899 0, __CP_MEDIA_2_BODY 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0, __USER_AGENT 0'
X-Virus-Checked: Checked by ClamAV on apache.org

This is more of a trying to understand the design sort of question, but 
its still something I need to able to succinctly express to my project 
manager.

I know that lucene is by design not allowing us to see which fields were 
hit for a given document in an easy manner.  Instead it presents us with 
a collection of hits, with each hit having the total score for the 
document, given all of the fields that you have searched on, with that 
total score being the score for the matches for each field combined via 
the scoring algorithm.

The question I'm being asked is why is the information about how each 
field matched not easily accessable in lucene?

I know I can go ahead and do a searcher.explain on my hit object, and 
then ... parse out the individual fields with their scores, but couldn't 
this be much more easily accessable from the hits object itself?

The hits object already has a get method that allows you to pass a 
String value for a string name to the object, couldn't another method be 
added such as getScoreByField(String s) that had access to the 
information that was used to build the total score of the document?

I'm sure part of the reason that this wasn't included were performance 
based, I mean it would be a fair amount of extra information for the 
average search to have to carry around, but for my application, and many 
others I'm sure, its a very important thing to be able to find out WHY a 
document was returned.  If for nothing less than for display purposes.

Anyhow, any insight as to why things are the way they are would be most 
appreciated, or if someone else has faced the same problems as I, and 
have went ahead and modified the hits object to include such things (and 
this is no small task) I'd love to hear about it.

-Matt


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33488-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 05 00:34:08 2008
Return-Path: <java-user-return-33488-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5591 invoked from network); 5 Apr 2008 00:34:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Apr 2008 00:34:07 -0000
Received: (qmail 64148 invoked by uid 500); 5 Apr 2008 00:34:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64113 invoked by uid 500); 5 Apr 2008 00:34:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64102 invoked by uid 99); 5 Apr 2008 00:34:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Apr 2008 17:34:00 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 05 Apr 2008 00:33:18 +0000
Received: by ug-out-1314.google.com with SMTP id u40so65098ugc.29
        for <java-user@lucene.apache.org>; Fri, 04 Apr 2008 17:33:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:content-type:content-transfer-encoding;
        bh=MryaF2ab6hQuxQ9KAji/aVSv/KtT1Uwws53LoJNGQhs=;
        b=cHUphRedl8gTqBuEmaQ93QxUwF9KFpZn/GlaRPRmj3mx/o8nKRghIabEX0j7R2zmhzCQa/0beSxbMgKbPjX67KyYQdosSypewGu0y3OTsSdwDiuYBARiuGbtrDCEIX2CySkswB5/UwK8PbadwyAon1tHdTt/EnalQbcvE9OLldY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:content-type:content-transfer-encoding;
        b=lfBit4WRhRw6jvfuGYoILo1X62LEhssBFWjq0WRJEK7U8fdmOa/g23X3OT26yHkRgRWZKqlyoq8UdLFIAlO0JQFrCyIOSeuABx3LoSRnQ21FjdTmbSo9NjLwdii35dmiHGROgi4liXXHBnWiJ6WmFBdQdWOAueEcuy5AGEESq8Q=
Received: by 10.67.97.15 with SMTP id z15mr82658ugl.84.1207355607142;
        Fri, 04 Apr 2008 17:33:27 -0700 (PDT)
Received: from kodapan.lan ( [82.93.70.124])
        by mx.google.com with ESMTPS id 13sm177114ugb.0.2008.04.04.17.33.21
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 04 Apr 2008 17:33:22 -0700 (PDT)
Message-ID: <47F6C8D1.6080005@gmail.com>
Date: Sat, 05 Apr 2008 02:33:21 +0200
From: Karl Wettin <karl.wettin@gmail.com>
User-Agent: Thunderbird 2.0.0.12 (Macintosh/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: document boost and omitted norms
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Is it so that document and field boosts are omitted together with 
Field#setOmitNorms? By setting lengthNorm to 1f in the Similarity for 
these fields and not omitting norms would fix it?


     karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33489-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 05 00:35:57 2008
Return-Path: <java-user-return-33489-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6264 invoked from network); 5 Apr 2008 00:35:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Apr 2008 00:35:56 -0000
Received: (qmail 66594 invoked by uid 500); 5 Apr 2008 00:35:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66565 invoked by uid 500); 5 Apr 2008 00:35:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66554 invoked by uid 99); 5 Apr 2008 00:35:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Apr 2008 17:35:50 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of john.wang@gmail.com designates 72.14.220.155 as permitted sender)
Received: from [72.14.220.155] (HELO fg-out-1718.google.com) (72.14.220.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 05 Apr 2008 00:35:08 +0000
Received: by fg-out-1718.google.com with SMTP id d23so240718fga.27
        for <java-user@lucene.apache.org>; Fri, 04 Apr 2008 17:35:18 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=WYjxnDKd2O4GUA90drHmIcP41zIPUoMhAQLgFqpgHDM=;
        b=ZSoSiSQjgrFttatNlOPzN5sYTm9B+iuyiQBcsGdO6NAIZp7Yrw8xyHD9qUdA8SDZgiD7cbsDv5WJg9M6CXXVgyFaK4PP6N5gfBeC1KRy6DTZ4n5ZvtdE6ELV0vBVIJbIOvkY4mfKCmuRxEBCIk7TebJiILElqB9ra552Zi1qVDo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Aj+iKHx0pnfFIuCNNcfAc+Zw7ksc6M67BcMcGRuX/pXUzm2NaWJfT8EnxLtgGzieFnQiZZdXYTWksZ3/hXSAlvsojmZloCN6P0+xxigpLpFmLFCorl+SznpD8dx7CsxPxZtQIZ1XI7T6bVu6BQ6Z/weIcihjcgrESUYVdyoftk0=
Received: by 10.86.50.8 with SMTP id x8mr1201364fgx.61.1207355717894;
        Fri, 04 Apr 2008 17:35:17 -0700 (PDT)
Received: by 10.86.82.10 with HTTP; Fri, 4 Apr 2008 17:35:17 -0700 (PDT)
Message-ID: <8837fb770804041735i3c1fab6em59eb87a6cd26682f@mail.gmail.com>
Date: Fri, 4 Apr 2008 17:35:17 -0700
From: "John Wang" <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Problems about using Lucene to generate tag cloud..
In-Reply-To: <200804031012.24393.daniel@nuix.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7459_29286450.1207355717895"
References: <20080402210751.9CB768C772@chico.albert-inc.com>
	 <200804031012.24393.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_7459_29286450.1207355717895
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

check out http://www.browseengine.com
tag cloud impl on lucene is avail.

-John

On Wed, Apr 2, 2008 at 4:12 PM, Daniel Noll <daniel@nuix.com> wrote:

> On Thursday 03 April 2008 08:08:09 Dominique B=E9jean wrote:
> > Hum, it looks like it is not true.
> > Use a do-while loop make the first terms.term().field() generate a null
> > pointer exception.
>
> Depends which terms method you use.
>
>    TermEnum terms =3D reader.terms();
>    System.out.println(terms.term());   =3D> null
>
>    terms =3D reader.terms(new Term("id", ""));
>    System.out.println(terms.term());   =3D> id:0
>
> The first method makes a normal while loop work but it also makes the
> assumption that there is only one field in the index, which may not be th=
e
> case forever even if it's the case initially.
>
> Daniel
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_7459_29286450.1207355717895--

From java-user-return-33490-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 05 09:14:51 2008
Return-Path: <java-user-return-33490-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20788 invoked from network); 5 Apr 2008 09:14:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Apr 2008 09:14:51 -0000
Received: (qmail 38809 invoked by uid 500); 5 Apr 2008 09:14:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38779 invoked by uid 500); 5 Apr 2008 09:14:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38766 invoked by uid 99); 5 Apr 2008 09:14:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 05 Apr 2008 02:14:45 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.250] (HELO an-out-0708.google.com) (209.85.132.250)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 05 Apr 2008 09:14:02 +0000
Received: by an-out-0708.google.com with SMTP id c5so116691anc.49
        for <java-user@lucene.apache.org>; Sat, 05 Apr 2008 02:13:52 -0700 (PDT)
Received: by 10.100.58.19 with SMTP id g19mr5228074ana.44.1207386832479;
        Sat, 05 Apr 2008 02:13:52 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 31sm9259725wri.14.2008.04.05.02.13.51
        (version=TLSv1/SSLv3 cipher=OTHER);
        Sat, 05 Apr 2008 02:13:52 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <47F6C8D1.6080005@gmail.com>
References: <47F6C8D1.6080005@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <D3975866-EC6D-40D4-B4C0-A531E8492795@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: document boost and omitted norms
Date: Sat, 5 Apr 2008 05:14:07 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


Yes and yes.

Mike

Karl Wettin wrote:
> Is it so that document and field boosts are omitted together with  
> Field#setOmitNorms? By setting lengthNorm to 1f in the Similarity  
> for these fields and not omitting norms would fix it?
>
>
>     karl
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33491-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 05 17:27:57 2008
Return-Path: <java-user-return-33491-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85279 invoked from network); 5 Apr 2008 17:27:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Apr 2008 17:27:57 -0000
Received: (qmail 76752 invoked by uid 500); 5 Apr 2008 17:27:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76716 invoked by uid 500); 5 Apr 2008 17:27:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76698 invoked by uid 99); 5 Apr 2008 17:27:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 05 Apr 2008 10:27:51 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 05 Apr 2008 17:27:08 +0000
Received: by nf-out-0910.google.com with SMTP id d3so267626nfc.15
        for <java-user@lucene.apache.org>; Sat, 05 Apr 2008 10:27:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=FDNgo7W67s5c5O4clF26wnX3j2Qa70x35sGnH0PJu5U=;
        b=qqa4x4dcEVX4HaQfw75sAEZZgs5vEm8CY1Yc0y0TR9tjTwyJGXV5phf11dwWU1B/RFI6m8jcbFFEewCZbnWKoGQcEdRCf9gOTkhu2T0XimVN2QYn9kbvjvDfo3S2BiS/g+1zZnP+htW/I1jt7rYc2it7lnkHRNiJV2wbpeF4DdM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=R8uDVGAcwphatt4bEsZokk9liTdkfgJTPgJKq53yyRyWILWRCHQS7p/ECqdcdky9MHs/8EatHgn41mTevDqAbisbpzVAkUcjqFP/w1UpKccniVNXPgZEPjNHfufmErUAJd9y9nuBzkgS77c0oQSnSkmCoPvrU+xutJya3KkxF/s=
Received: by 10.151.43.19 with SMTP id v19mr1434746ybj.195.1207416438645;
        Sat, 05 Apr 2008 10:27:18 -0700 (PDT)
Received: from kodapan.lan ( [82.93.70.124])
        by mx.google.com with ESMTPS id 31sm2387074ugg.47.2008.04.05.10.27.16
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sat, 05 Apr 2008 10:27:17 -0700 (PDT)
Message-ID: <47F7B672.1080803@gmail.com>
Date: Sat, 05 Apr 2008 19:27:14 +0200
From: Karl Wettin <karl.wettin@gmail.com>
User-Agent: Thunderbird 2.0.0.12 (Macintosh/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: document boost and omitted norms
References: <47F6C8D1.6080005@gmail.com> <D3975866-EC6D-40D4-B4C0-A531E8492795@mikemccandless.com>
In-Reply-To: <D3975866-EC6D-40D4-B4C0-A531E8492795@mikemccandless.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Michael McCandless skrev:
> Karl Wettin wrote:
>> Is it so that document and field boosts are omitted together with 
>> Field#setOmitNorms? By setting lengthNorm to 1f in the Similarity for 
>> these fields and not omitting norms would fix it?
> >
> Yes and yes.

I'm not sure if I do these things backwards or what, but in this case 
the resolution of the 8 bit float of norms is not enough for me.

So I patched the norms float table in Similarity to handle the boost 
values I assign my documents. Discretized 100f-250f in 60 bags and 
cought up with the default table in 16 more bags.

But to me it seem as this only works if I also turn off length 
normalization for all the other fields in my index, as they will affect 
the value of the norm?

I could store it in the payloads of my tokens too, but I really don't 
want payloads on all of them.

Now I'm thinking it would be nice to store a full float in an optional 
document boost file. Perhaps with variable bytesize. But that would take 
a lot of effort to update all related code.

Is there an easier way out here? Perhaps variable byte size per norms 
and field? Document payloads? I don't know. Help much appreciated.



     karl


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33492-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 05 17:48:34 2008
Return-Path: <java-user-return-33492-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91236 invoked from network); 5 Apr 2008 17:48:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Apr 2008 17:48:34 -0000
Received: (qmail 91140 invoked by uid 500); 5 Apr 2008 17:48:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91113 invoked by uid 500); 5 Apr 2008 17:48:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91102 invoked by uid 99); 5 Apr 2008 17:48:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 05 Apr 2008 10:48:27 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 05 Apr 2008 17:47:45 +0000
Received: by ug-out-1314.google.com with SMTP id u40so193124ugc.29
        for <java-user@lucene.apache.org>; Sat, 05 Apr 2008 10:47:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=1gwWT1+4i9hD1cL0rkqorMoQ4b8tdIL4pscmcuy0Ppc=;
        b=qz9M7AR5MGmVm/l8rgoGXRTJDwKzv2Zxch6qVxYH2swdKXDlVAd8a/4bSNMZMNJzaxK2EuUVA6HCjluv1t7QkZjOyNtfuPVyOtN36ftteUIidMLhlWW2h1PlXuViDnK014VrR/W0iFdMlKctgbFlMo/xSutH3LN5u0JHCsCPByg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=Wn562ulGwxTabZ3goIoCBmPC4RU5gU8in6uyBmMeJtmQ/7H4cBVBUWXrU0fAMeGivt9v8xj6oFrCg5xTMvigEmQwJAbLwzUEfPur76WHr6V7Nm7b9fe//KKC+JlEIwPsN+QOwf/jakFAunp8TfeyUlKtU7DDdas7JecTyVIQjQQ=
Received: by 10.66.236.13 with SMTP id j13mr712361ugh.30.1207417674279;
        Sat, 05 Apr 2008 10:47:54 -0700 (PDT)
Received: from kodapan.lan ( [82.93.70.124])
        by mx.google.com with ESMTPS id i40sm723413ugf.4.2008.04.05.10.47.51
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sat, 05 Apr 2008 10:47:52 -0700 (PDT)
Message-ID: <47F7BB46.7060903@gmail.com>
Date: Sat, 05 Apr 2008 19:47:50 +0200
From: Karl Wettin <karl.wettin@gmail.com>
User-Agent: Thunderbird 2.0.0.12 (Macintosh/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: document boost and omitted norms
References: <47F6C8D1.6080005@gmail.com> <D3975866-EC6D-40D4-B4C0-A531E8492795@mikemccandless.com> <47F7B672.1080803@gmail.com>
In-Reply-To: <47F7B672.1080803@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Karl Wettin skrev:
> Michael McCandless skrev:
>> Karl Wettin wrote:
>>> Is it so that document and field boosts are omitted together with 
>>> Field#setOmitNorms? By setting lengthNorm to 1f in the Similarity for 
>>> these fields and not omitting norms would fix it?
>> >
>> Yes and yes.
> 
> I'm not sure if I do these things backwards or what, but in this case 
> the resolution of the 8 bit float of norms is not enough for me.
> 
> So I patched the norms float table in Similarity to handle the boost 
> values I assign my documents. Discretized 100f-250f in 60 bags and 
> cought up with the default table in 16 more bags.
> 
> But to me it seem as this only works if I also turn off length 
> normalization for all the other fields in my index, as they will affect 
> the value of the norm?
> 
> I could store it in the payloads of my tokens too, but I really don't 
> want payloads on all of them.
> 
> Now I'm thinking it would be nice to store a full float in an optional 
> document boost file. Perhaps with variable bytesize. But that would take 
> a lot of effort to update all related code.
> 
> Is there an easier way out here? Perhaps variable byte size per norms 
> and field? Document payloads? I don't know. Help much appreciated.
> 

PS

What I really try to do is to add a weight to each document based on a 
number of values in the domain object it represents. As I only want to 
add this weight to the documents that match the query I don't can't add 
a query with boosts on these values as that would match all documents.


     karl



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33493-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 05 18:16:38 2008
Return-Path: <java-user-return-33493-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3574 invoked from network); 5 Apr 2008 18:16:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Apr 2008 18:16:38 -0000
Received: (qmail 30065 invoked by uid 500); 5 Apr 2008 18:16:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30032 invoked by uid 500); 5 Apr 2008 18:16:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30021 invoked by uid 99); 5 Apr 2008 18:16:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 05 Apr 2008 11:16:31 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.49.250] (HELO web52003.mail.re2.yahoo.com) (206.190.49.250)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 05 Apr 2008 18:15:37 +0000
Received: (qmail 24423 invoked by uid 60001); 5 Apr 2008 18:15:57 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=Y3mCYXhW2uIcQ2C9cIZiTHDgVjWYy2MUs7R32iFiMGuu1XktoEVB4m9SdYRB99/z5waffdbVT5A3IJ7E7isbo4fOfF53EO7B6M0U8Cqej/3ciKF0daa+AlDvQjeyK285iRUA+bnkfrsbqJiCbGl/wtgZfLM0ezhaqO351vF88Cg=;
X-YMail-OSG: DkSQ4fYVM1neyCICP5bf9REEaA31HhFWZPDV9.kT
Received: from [12.162.3.126] by web52003.mail.re2.yahoo.com via HTTP; Sat, 05 Apr 2008 11:15:57 PDT
Date: Sat, 5 Apr 2008 11:15:57 -0700 (PDT)
From: Rajesh parab <rajesh_parab_1@yahoo.com>
Subject: Re: Lucene 2.3.0 and NFS
To: java-user@lucene.apache.org
In-Reply-To: <04C586A0-B3F9-439D-A094-CBA3B8E0B29B@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
Message-ID: <233725.22487.qm@web52003.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Michael,

Thanks a lot for your suggestions.

I was looking at rsync; as per this link
(http://samba.anu.edu.au/rsync/features.html), rsync
is a file transfer program for UNIX. Is there rsync
support for Windows as well? I found few rsync
programs that works for Windows, but I am not sure if
they will server the purpose. Has anyone using rsync
on Windows?

Regards,
Rajesh

--- Michael McCandless <lucene@mikemccandless.com>
wrote:

> 
> Rajesh parab wrote:
> > Hi,
> >
> > We are currently using Lucene 2.0 for full-text
> > searches within our enterprise application, which
> can
> > be deployed in clustered environment. We generate
> > Lucene index for data stored inside relational
> > database.
> >
> > As Lucene 2.0 did not have solid NFS support and
> as we
> > wanted Lucene based searches to work properly in
> > Clustered environment, we had decided on following
> > approach:
> > 1. The index generation happens on a machine
> (could be
> > one of the cluster nodes or a separate machine)
> and
> > once the Lucene index is generated, we copy all
> the
> > index files to the database.
> 
> Note that you can do also incremental replication:
> often, the Lucene  
> index changes in minor ways (eg a single new segment
> is flushed and a  
> new segments_N and segments.gen is written) so you
> should only sync  
> the files that are new (and remove the ones that are
> now gone).   
> Lucene's write-once approach makes this very simple
> (you just have to  
> compare file names, not the contents of each file).
> 
> It's also possible to replicate without using a DB. 
> EG rsync does a  
> great job.
> 
> > 2. The index search request on each cluster node
> > retrieves the index files from database (during
> first
> > search or after index update), copies to the file
> > system and use it for searches.
> > 3. Thus, each cluster node has its own copy of the
> > index and it keeps on picking up latest version if
> it
> > is available inside database.
> >
> > This has worked fine for us till now, though we
> will
> > not be able continue with this model in future as
> we
> > want to support Lucene based searches across our
> > application and also want to index large
> components
> > inside our application like Wiki, forums, etc. As
> the
> > index will grow, storing and retrieving index
> files
> > from database will not be an efficient operation.
> >
> > My questions are:
> > - Will we be able to use NFS if we move to Lucene
> > 2.3.0?
> 
> Make sure you update to 2.3.1, not 2.3.0.
> 
> > - Will there be any significant performance impact
> on
> > index generation and searches if we move to NFS?
> > - Is Lucene + NFS combination supported for all
> > operating systems? (We support Windows, Solaris,
> AIX,
> > HP-UX, Red Hat Linux)
> 
> NFS *should* work, however:
> 
>    * It's not widely used, so, test thoroughly in
> your particular setup.
> 
>    * Most likely to work is if you use a single
> machine writing to  
> the index, and many readers.
> 
>    * Performance is likely not great, especially on
> searching, but  
> you should test in your specific situation.
> 
> > - Is there any other alternative available other
> than
> > NFS?
> >
> 
> It's also possible to replicate without using a DB. 
> EG rsync does  
> agreat job.
> 
> You should look at Solr, since it already has all
> the infrastructure  
> toaccept updates, replicate index changes to remote
> machines, etc.
> 
> > I will really appreciate your comments/thoughts on
> > this topic.
> >
> > Regards,
> > Rajesh
> >
> >
> >        
> >
>
______________________________________________________________________
> 
> > ______________
> > You rock. That's why Blockbuster's offering you
> one month of  
> > Blockbuster Total Access, No Cost.
> > http://tc.deals.yahoo.com/tc/blockbuster/text5.com
> >
> >
>
---------------------------------------------------------------------
> > To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail:
> java-user-help@lucene.apache.org
> >
> 
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 



      ____________________________________________________________________________________
You rock. That's why Blockbuster's offering you one month of Blockbuster Total Access, No Cost.  
http://tc.deals.yahoo.com/tc/blockbuster/text5.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33494-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 06 14:09:10 2008
Return-Path: <java-user-return-33494-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91309 invoked from network); 6 Apr 2008 14:09:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Apr 2008 14:09:08 -0000
Received: (qmail 88896 invoked by uid 500); 6 Apr 2008 14:09:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88874 invoked by uid 500); 6 Apr 2008 14:09:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88863 invoked by uid 99); 6 Apr 2008 14:09:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Apr 2008 07:09:00 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=MIME_BASE64_BLANKS,MIME_BASE64_TEXT,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chee.wu@gmail.com designates 209.85.200.173 as permitted sender)
Received: from [209.85.200.173] (HELO wf-out-1314.google.com) (209.85.200.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Apr 2008 14:08:17 +0000
Received: by wf-out-1314.google.com with SMTP id 28so1072201wff.20
        for <java-user@lucene.apache.org>; Sun, 06 Apr 2008 07:08:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to:references:subject:date:mime-version:content-type:content-transfer-encoding:x-priority:x-msmail-priority:x-mailer:x-mimeole;
        bh=ci/D+peHkv5tMfuQzHSjk7ruWRy6eubc9/saQuRwchI=;
        b=vXqEFi16eJWTDbLTO2Z8JRaNy9lAhVHwXm/3Vz3c/5jorST5FT6M6vaCqoiTBnVGP4j7aGgSrwolZuugLDv8fEEkrNI2H5afiEigBVX+fBHjzIiivf3Gl0FFAZD/9PFNRl0jqzG7Ivf8ta+wRZ3FY2jnjvoAa3RlUf396YDiD48=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:references:subject:date:mime-version:content-type:content-transfer-encoding:x-priority:x-msmail-priority:x-mailer:x-mimeole;
        b=s0BHc2xT/EHzD+jUgoSzmEb/Ca9suAGdAQbeHQkNm4zNxbxBIlWMJblJpveuF0Hwzi6lbYIuemezWCZu2dreIG0wrWAUO3YqVukOWJjJaaDwi+6tM98Vf8E6xoxUuEx2wvzuGdcXG/DV5a+2oCoioCiFnkkWGZbLQ7G00FjKXhs=
Received: by 10.142.133.15 with SMTP id g15mr566505wfd.347.1207490908755;
        Sun, 06 Apr 2008 07:08:28 -0700 (PDT)
Received: from wuqi ( [125.34.1.38])
        by mx.google.com with ESMTPS id 27sm15125121wfa.0.2008.04.06.07.08.24
        (version=SSLv3 cipher=RC4-MD5);
        Sun, 06 Apr 2008 07:08:27 -0700 (PDT)
Message-ID: <002801c897ef$770e4160$6600a8c0@wuqi>
From: "wuqi" <chee.wu@gmail.com>
To: <java-user@lucene.apache.org>
References: <20080402210751.9CB768C772@chico.albert-inc.com> <200804031012.24393.daniel@nuix.com> <8837fb770804041735i3c1fab6em59eb87a6cd26682f@mail.gmail.com>
Subject: Re: Problems about using Lucene to generate tag cloud..
Date: Sun, 6 Apr 2008 22:06:46 +0800
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: base64
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
X-Virus-Checked: Checked by ClamAV on apache.org

VmVyeSB1c2VmdWwuLiBUaGFuayB5b3UhDQoNCi0tLS0tIE9yaWdpbmFsIE1lc3NhZ2UgLS0tLS0g
DQpGcm9tOiAiSm9obiBXYW5nIiA8am9obi53YW5nQGdtYWlsLmNvbT4NClRvOiA8amF2YS11c2Vy
QGx1Y2VuZS5hcGFjaGUub3JnPg0KU2VudDogU2F0dXJkYXksIEFwcmlsIDA1LCAyMDA4IDg6MzUg
QU0NClN1YmplY3Q6IFJlOiBQcm9ibGVtcyBhYm91dCB1c2luZyBMdWNlbmUgdG8gZ2VuZXJhdGUg
dGFnIGNsb3VkLi4NCg0KDQpjaGVjayBvdXQgaHR0cDovL3d3dy5icm93c2VlbmdpbmUuY29tDQp0
YWcgY2xvdWQgaW1wbCBvbiBsdWNlbmUgaXMgYXZhaWwuDQoNCi1Kb2huDQoNCk9uIFdlZCwgQXBy
IDIsIDIwMDggYXQgNDoxMiBQTSwgRGFuaWVsIE5vbGwgPGRhbmllbEBudWl4LmNvbT4gd3JvdGU6
DQoNCj4gT24gVGh1cnNkYXkgMDMgQXByaWwgMjAwOCAwODowODowOSBEb21pbmlxdWUgQulqZWFu
IHdyb3RlOg0KPiA+IEh1bSwgaXQgbG9va3MgbGlrZSBpdCBpcyBub3QgdHJ1ZS4NCj4gPiBVc2Ug
YSBkby13aGlsZSBsb29wIG1ha2UgdGhlIGZpcnN0IHRlcm1zLnRlcm0oKS5maWVsZCgpIGdlbmVy
YXRlIGEgbnVsbA0KPiA+IHBvaW50ZXIgZXhjZXB0aW9uLg0KPg0KPiBEZXBlbmRzIHdoaWNoIHRl
cm1zIG1ldGhvZCB5b3UgdXNlLg0KPg0KPiAgICBUZXJtRW51bSB0ZXJtcyA9IHJlYWRlci50ZXJt
cygpOw0KPiAgICBTeXN0ZW0ub3V0LnByaW50bG4odGVybXMudGVybSgpKTsgICA9PiBudWxsDQo+
DQo+ICAgIHRlcm1zID0gcmVhZGVyLnRlcm1zKG5ldyBUZXJtKCJpZCIsICIiKSk7DQo+ICAgIFN5
c3RlbS5vdXQucHJpbnRsbih0ZXJtcy50ZXJtKCkpOyAgID0+IGlkOjANCj4NCj4gVGhlIGZpcnN0
IG1ldGhvZCBtYWtlcyBhIG5vcm1hbCB3aGlsZSBsb29wIHdvcmsgYnV0IGl0IGFsc28gbWFrZXMg
dGhlDQo+IGFzc3VtcHRpb24gdGhhdCB0aGVyZSBpcyBvbmx5IG9uZSBmaWVsZCBpbiB0aGUgaW5k
ZXgsIHdoaWNoIG1heSBub3QgYmUgdGhlDQo+IGNhc2UgZm9yZXZlciBldmVuIGlmIGl0J3MgdGhl
IGNhc2UgaW5pdGlhbGx5Lg0KPg0KPiBEYW5pZWwNCj4NCj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQo+IFRvIHVu
c3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9y
Zw0KPiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNl
bmUuYXBhY2hlLm9yZw0KPg0KPg0K



From java-user-return-33495-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 07 05:56:00 2008
Return-Path: <java-user-return-33495-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7245 invoked from network); 7 Apr 2008 05:56:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Apr 2008 05:56:00 -0000
Received: (qmail 88814 invoked by uid 500); 7 Apr 2008 05:55:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88461 invoked by uid 500); 7 Apr 2008 05:55:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88450 invoked by uid 99); 7 Apr 2008 05:55:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Apr 2008 22:55:53 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [68.116.38.223] (HELO rectangular.com) (68.116.38.223)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Apr 2008 05:55:10 +0000
Received: from c-76-115-21-31.hsd1.or.comcast.net ([76.115.21.31] helo=[192.168.11.50])
	by rectangular.com with esmtpa (Exim 4.44)
	id 1JikLc-00050d-1f
	for java-user@lucene.apache.org; Sun, 06 Apr 2008 22:56:52 -0700
Message-Id: <046EBB6F-B824-4F7B-8824-B2AFBC073C43@rectangular.com>
From: Marvin Humphrey <marvin@rectangular.com>
To: java-user@lucene.apache.org
In-Reply-To: <200804020857.53106.daniel@nuix.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: Problems about using Lucene to generate tag cloud..
Date: Sun, 6 Apr 2008 22:55:19 -0700
References: <20080401075127.365CD86CD5@chico.albert-inc.com> <200804020857.53106.daniel@nuix.com>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On Apr 1, 2008, at 2:57 PM, Daniel Noll wrote:
> On Tuesday 01 April 2008 18:51:55 Dominique B=E9jean wrote:
>>        IndexReader reader =3D IndexReader.open(temp_index);
>>        TermEnum terms =3D reader.terms();
>>
>>        while (terms.next()) {
>>            String field =3D terms.term().field();
>
> Gotcha: after calling terms() it's already pointing at the first =20
> term.  So you
> need to rewrite this as a do-while loop.
>
> Possibly my least favourite feature of Lucene. :-(

What would a better API look like?

Marvin Humphrey
Rectangular Research
http://www.rectangular.com/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33496-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 07 10:29:24 2008
Return-Path: <java-user-return-33496-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58237 invoked from network); 7 Apr 2008 10:29:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Apr 2008 10:29:24 -0000
Received: (qmail 63733 invoked by uid 500); 7 Apr 2008 10:29:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63703 invoked by uid 500); 7 Apr 2008 10:29:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63692 invoked by uid 99); 7 Apr 2008 10:29:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Apr 2008 03:29:17 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Apr 2008 10:28:35 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Jioal-0003pm-BL
	for java-user@lucene.apache.org; Mon, 07 Apr 2008 03:28:47 -0700
Message-ID: <16537223.post@talk.nabble.com>
Date: Mon, 7 Apr 2008 03:28:47 -0700 (PDT)
From: Oliver Flege <o.flege@market-maker.de>
To: java-user@lucene.apache.org
Subject: FieldCacheImpl caveat
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: o.flege@market-maker.de
X-Virus-Checked: Checked by ClamAV on apache.org


An undocumented feature of FieldCacheImpl led to an OutOfMemoryError 
in our application and to know about that might be of general interest:

We are using lucene 2.3.1 and our index (3m documents)
is updated 3 times per day. On every update, we create a new 
instance of a Searcher class, which is defined like this: 

class Searcher {
   private final IndexReader indexReader;
   private final int[] ids;

   Searcher(IndexReader indexReader) {
         this.indexReader = indexReader;

         this.ids = FieldCache.DEFAULT.getInts(this.indexReader, "ids",
                new FieldCache.IntParser() {
                    public int parseInt(String s) {
                        return Integer.parseInt(s, Character.MAX_RADIX);
                    }
                });


The ids[] field is used to improve search speed and had been added recently.
At first, everything looked fine, but after a couple of days
our application crashed with an OutOfMemoryError.

The FieldCacheImpl (implementation behind FieldCache.DEFAULT) stores entries
in a WeakHashMap and uses IndexReader objects as keys, so when a particular 
IndexReader is only weakly reachable its values can be removed from the
cache.

Since we only have a single reference to the most recent Searcher instance
in a 
Controller class, it seemed obvious that stale values in FieldCache's
WeakHashMap 
could be gc'ed as soon as a new Searcher object replaced the old one.

BUT FieldCacheImpl stores a reference to the IntParser (or any other parser)
in the cache. Since we used an anonymous inner class, it contained a
reference
to the enclosing Searcher instance which in turn referenced the IndexReader,
so 
that was never only weakly reachable and never got removed from the
FieldCache.
After replacing the anonymous inner IntParser with a static inner class, 
the FieldCache worked as expected.

It would be a good idea to document the fact that the FieldCacheImpl stores
references to Parsers.


 Oliver 

-- 
View this message in context: http://www.nabble.com/FieldCacheImpl-caveat-tp16537223p16537223.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33497-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 07 13:02:29 2008
Return-Path: <java-user-return-33497-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18656 invoked from network); 7 Apr 2008 13:02:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Apr 2008 13:02:29 -0000
Received: (qmail 31030 invoked by uid 500); 7 Apr 2008 13:02:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30087 invoked by uid 500); 7 Apr 2008 13:02:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30076 invoked by uid 99); 7 Apr 2008 13:02:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Apr 2008 06:02:22 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,URIBL_GREY
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of marcelo.ochoa@gmail.com designates 216.239.58.189 as permitted sender)
Received: from [216.239.58.189] (HELO gv-out-0910.google.com) (216.239.58.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Apr 2008 13:01:37 +0000
Received: by gv-out-0910.google.com with SMTP id n8so208488gve.23
        for <java-user@lucene.apache.org>; Mon, 07 Apr 2008 06:01:49 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        bh=GLzo4Jp387yctIRU1Nwn94Sog8WxsvEe+kVfN4/LVLQ=;
        b=IJZq04cC5hnKTrVtmK5xKesldykcJ0h2aLPwGxyKkFSHQb1/KbJAjD92oKGunxQtI03Llre3W9zr2jwLSLOv9ZkySe4NxOlsFbDV8owDpEQPqv6H1zwhtOw3fB9LTi9Yr/2h+cFMKM1Ou/bNcOUJSDiQa1NeqOyIvzcv839qBCg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=LEMb3L3WdJFGeuo9oGnl87YX5LLagmZfEZxo8GSUsTK7tHWos3mjieVNH3y/ifvDnPihkNacWVUHRH4RAbPVz/IxxfrAoebeN4yM1PSzC/s8zXUo8v0/LqNOMXeSIGctMXh0nft6Nyb673V+YhhfQ3uc2q2fa2/FxAHdaN8KpYc=
Received: by 10.150.230.2 with SMTP id c2mr2697561ybh.178.1207573307619;
        Mon, 07 Apr 2008 06:01:47 -0700 (PDT)
Received: by 10.150.181.12 with HTTP; Mon, 7 Apr 2008 06:01:47 -0700 (PDT)
Message-ID: <126142c0804070601j5f486120wd3c1987f05515d5e@mail.gmail.com>
Date: Mon, 7 Apr 2008 10:01:47 -0300
From: "Marcelo Ochoa" <marcelo.ochoa@gmail.com>
To: java-user@lucene.apache.org
Subject: New binary distribution of Oracle-Lucene integration
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all:
  I just released a new version of Oracle-Lucene integration
implemented as a Domain Index.
  Binary distribution have a very straightforward installation and
testing step, downloads are at SF.net web site:
http://sourceforge.net/project/showfiles.php?group_id=56183&package_id=255524&release_id=589900
  Updated documentation is available as Google Document at:
http://docs.google.com/Doc?id=ddgw7sjp_54fgj9kg
  Source is available with public CVS access at:
http://dbprism.cvs.sourceforge.net/dbprism/ojvm/
  As consequence of reading many mails with feedback and development
tips from this list this new version have a lot performance
improvement by using a rowid<->lucene doc id cache, usage of
LoadFirstFieldSelector class to prevent Lucene from loading a complete
doc if only we need the rowid.
  Many thanks to all for sharing the experience.
  A complete list of changes is at:
http://dbprism.cvs.sourceforge.net/dbprism/ojvm/ChangeLog.txt?revision=1.3&view=markup
  Best regards, Marcelo.

PD: I have a plan to a make a new version of Oracle-Lucene integration
synchronized with Lucene 2.3.1 ASAP.
-- 
Marcelo F. Ochoa
http://marceloochoa.blogspot.com/
http://marcelo.ochoa.googlepages.com/home
______________
Do you Know DBPrism? Look @ DB Prism's Web Site
http://www.dbprism.com.ar/index.html
More info?
Chapter 17 of the book "Programming the Oracle Database using Java &
Web Services"
http://www.amazon.com/gp/product/1555583296/
Chapter 21 of the book "Professional XML Databases" - Wrox Press
http://www.amazon.com/gp/product/1861003587/
Chapter 8 of the book "Oracle & Open Source" - O'Reilly
http://www.oreilly.com/catalog/oracleopen/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33498-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 07 17:13:41 2008
Return-Path: <java-user-return-33498-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89507 invoked from network); 7 Apr 2008 17:13:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Apr 2008 17:13:39 -0000
Received: (qmail 98023 invoked by uid 500); 7 Apr 2008 17:13:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97993 invoked by uid 500); 7 Apr 2008 17:13:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97982 invoked by uid 99); 7 Apr 2008 17:13:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Apr 2008 10:13:32 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Apr 2008 17:12:41 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Jiutw-0008D4-Hq
	for java-user@lucene.apache.org; Mon, 07 Apr 2008 10:13:00 -0700
Message-ID: <16537558.post@talk.nabble.com>
Date: Mon, 7 Apr 2008 10:13:00 -0700 (PDT)
From: syedfa <fayyazuddin@gmail.com>
To: java-user@lucene.apache.org
Subject: Indexing and Searching from within a single Document
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: fayyazuddin@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Dear Fellow Java/Lucene developers:

I am writing an application where a user is able to search for keywords from
within a single book.  When the user conducts a search, he/she should
receive a set of results that show the sentence/phrase within the book where
the keyword is found.  Unfortunately, all of the examples that I have for
searching using Lucene discuss the concept of searching multiple documents,
instead of within a single document.  I have written an application that
creates an index of this book, but I now want to search it.  In the result
set, I would like the keyword(s) to be highlighted using Lucene's
HighLighter feature.  Once the user clicks on the hit from the result set
list that they are looking for, the application should take them directly
within to that section of the book where that keyword is found.  The book
that I have indexed is in xml format.

My question is, how would I write an application that allows me to search a
single document, and present a set of results to the user that list portions
of text from the book that contains the user's keyword, instead of
presenting a list of document titles where that keyword is found?

Any help would be greatly appreciated.  Thanks to all who reply.

Sincerely;
Fayyaz
-- 
View this message in context: http://www.nabble.com/Indexing-and-Searching-from-within-a-single-Document-tp16537558p16537558.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33499-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 07 17:21:18 2008
Return-Path: <java-user-return-33499-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91598 invoked from network); 7 Apr 2008 17:21:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Apr 2008 17:21:18 -0000
Received: (qmail 6800 invoked by uid 500); 7 Apr 2008 17:21:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6763 invoked by uid 500); 7 Apr 2008 17:21:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6752 invoked by uid 99); 7 Apr 2008 17:21:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Apr 2008 10:21:12 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [192.25.218.38] (HELO aglcosbs04.cos.agilent.com) (192.25.218.38)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Apr 2008 17:20:19 +0000
Received: from mppd (localhost.localdomain [127.0.0.1])
	by aglcosbs04.cos.agilent.com (Postfix) with ESMTP id 7E94F68115
	for <java-user@lucene.apache.org>; Mon,  7 Apr 2008 17:20:38 +0000 (GMT)
Received: from cos-us-bh01.cos.agilent.com (cos-us-bh01.cos.agilent.com [130.29.152.243])
	by aglcosbs04.cos.agilent.com (Postfix) with ESMTP id 7B65D68090
	for <java-user@lucene.apache.org>; Mon,  7 Apr 2008 17:20:38 +0000 (GMT)
Received: from cos-us-mb02.cos.agilent.com ([130.29.152.186]) by cos-us-bh01.cos.agilent.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 7 Apr 2008 11:20:05 -0600
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Indexing and Searching from within a single Document
Date: Mon, 7 Apr 2008 11:19:11 -0600
Message-ID: <04BDEEFF9982DC4E91527119C0C572C8014D6DD7@cos-us-mb02.cos.agilent.com>
In-Reply-To: <16537558.post@talk.nabble.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Indexing and Searching from within a single Document
Thread-Index: AciY0rpzjKWrsyHdQzSAtERKMtjsSwAAJnfw
References: <16537558.post@talk.nabble.com>
From: <jing_gao@agilent.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 07 Apr 2008 17:20:05.0119 (UTC) FILETIME=[9EE1F8F0:01C898D3]
X-Scanned-By: MPP/Clamd http://www.messagepartners.com
X-Scanned-By: MPP invoked on aglcosbs04
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I have a similar question. Not heard back from anyone yet.


Dear Lucene experts,

I'm currently evaluating options for our search tool.

The need is:
I have millions of entries in database, each entry is in such format =
(more or less)

ID	Name	Description	start (number)	stop(number)


Currently my application uses the database to do search, queries are in =
the following format:

Select * from table where Name like "%mymymy%"

Select * from table where start >5 and stop <50000



I would like very much to use Lucene for such search, for the reason:
1. database performance is not ideal;
2. data is growing to be too big, I want to move to file system,
3. Currently everything is on server, user access through a web =
application. I want to provide rich client tool, in which case I would =
rather not to bother with database installations on client machine. =
Database is my last option;
4. Lucene sounds very cool, I want to use a different technology than =
database, which we are very familiar with already.



I read the book, played with the demo. My question is:
As you see, I'm not indexing or querying out documents, I'm interested =
in one row of data. If I want to use Lucene, how should I do it? Do I =
have to store my data as documents? Since I have millions and millions =
of rows in database, if I store each row as a document, it'd be millions =
of documents.


What do you suggest?

Thank you!
Jing

-----Original Message-----
From: syedfa [mailto:fayyazuddin@gmail.com]=20
Sent: Monday, April 07, 2008 10:13 AM
To: java-user@lucene.apache.org
Subject: Indexing and Searching from within a single Document


Dear Fellow Java/Lucene developers:

I am writing an application where a user is able to search for keywords =
from
within a single book.  When the user conducts a search, he/she should
receive a set of results that show the sentence/phrase within the book =
where
the keyword is found.  Unfortunately, all of the examples that I have =
for
searching using Lucene discuss the concept of searching multiple =
documents,
instead of within a single document.  I have written an application that
creates an index of this book, but I now want to search it.  In the =
result
set, I would like the keyword(s) to be highlighted using Lucene's
HighLighter feature.  Once the user clicks on the hit from the result =
set
list that they are looking for, the application should take them =
directly
within to that section of the book where that keyword is found.  The =
book
that I have indexed is in xml format.

My question is, how would I write an application that allows me to =
search a
single document, and present a set of results to the user that list =
portions
of text from the book that contains the user's keyword, instead of
presenting a list of document titles where that keyword is found?

Any help would be greatly appreciated.  Thanks to all who reply.

Sincerely;
Fayyaz
--=20
View this message in context: =
http://www.nabble.com/Indexing-and-Searching-from-within-a-single-Documen=
t-tp16537558p16537558.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33500-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 07 17:57:48 2008
Return-Path: <java-user-return-33500-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8495 invoked from network); 7 Apr 2008 17:57:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Apr 2008 17:57:46 -0000
Received: (qmail 58101 invoked by uid 500); 7 Apr 2008 17:57:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58071 invoked by uid 500); 7 Apr 2008 17:57:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58053 invoked by uid 99); 7 Apr 2008 17:57:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Apr 2008 10:57:34 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Apr 2008 17:56:51 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JivaZ-0001RH-Ra
	for java-user@lucene.apache.org; Mon, 07 Apr 2008 10:57:03 -0700
Message-ID: <16538139.post@talk.nabble.com>
Date: Mon, 7 Apr 2008 10:57:03 -0700 (PDT)
From: sumittyagi <ping.sumit@gmail.com>
To: java-user@lucene.apache.org
Subject: Dataset to test lucene
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ping.sumit@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


hi,
i need a dataset having html pages to test my lucene programs...
from where can i download it..
-- 
View this message in context: http://www.nabble.com/Dataset-to-test-lucene-tp16538139p16538139.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33501-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 07 18:24:52 2008
Return-Path: <java-user-return-33501-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26430 invoked from network); 7 Apr 2008 18:24:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Apr 2008 18:24:52 -0000
Received: (qmail 87683 invoked by uid 500); 7 Apr 2008 18:24:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87651 invoked by uid 500); 7 Apr 2008 18:24:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87634 invoked by uid 99); 7 Apr 2008 18:24:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Apr 2008 11:24:45 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [192.25.218.35] (HELO aglcosbs01.cos.agilent.com) (192.25.218.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Apr 2008 18:24:01 +0000
Received: from mppd (localhost.localdomain [127.0.0.1])
	by aglcosbs01.cos.agilent.com (Postfix) with ESMTP id 27F2A29AC1
	for <java-user@lucene.apache.org>; Mon,  7 Apr 2008 18:24:12 +0000 (GMT)
Received: from cos-us-bh01.cos.agilent.com (cos-us-bh01.cos.agilent.com [130.29.152.243])
	by aglcosbs01.cos.agilent.com (Postfix) with ESMTP id 1D84129ABF
	for <java-user@lucene.apache.org>; Mon,  7 Apr 2008 18:24:12 +0000 (GMT)
Received: from cos-us-mb02.cos.agilent.com ([130.29.152.186]) by cos-us-bh01.cos.agilent.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 7 Apr 2008 12:24:11 -0600
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Indexing and Searching from within a single Document
Date: Mon, 7 Apr 2008 12:23:43 -0600
Message-ID: <04BDEEFF9982DC4E91527119C0C572C8014D6EC3@cos-us-mb02.cos.agilent.com>
In-Reply-To: <16537558.post@talk.nabble.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Indexing and Searching from within a single Document
Thread-Index: AciY0rpzjKWrsyHdQzSAtERKMtjsSwACZr/g
References: <16537558.post@talk.nabble.com>
From: <jing_gao@agilent.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 07 Apr 2008 18:24:11.0294 (UTC) FILETIME=[9361B3E0:01C898DC]
X-Scanned-By: MPP/Clamd http://www.messagepartners.com
X-Scanned-By: MPP invoked on aglcosbs01
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Some indexing tools give configurable options, you can use separators in =
a single documents (such as "//", "%%%"), and indexing engine would =
treat each block as a separate document.
Does Lucene have this type of functionalities?

Thanks!
Jing

-----Original Message-----
From: syedfa [mailto:fayyazuddin@gmail.com]=20
Sent: Monday, April 07, 2008 10:13 AM
To: java-user@lucene.apache.org
Subject: Indexing and Searching from within a single Document


Dear Fellow Java/Lucene developers:

I am writing an application where a user is able to search for keywords =
from
within a single book.  When the user conducts a search, he/she should
receive a set of results that show the sentence/phrase within the book =
where
the keyword is found.  Unfortunately, all of the examples that I have =
for
searching using Lucene discuss the concept of searching multiple =
documents,
instead of within a single document.  I have written an application that
creates an index of this book, but I now want to search it.  In the =
result
set, I would like the keyword(s) to be highlighted using Lucene's
HighLighter feature.  Once the user clicks on the hit from the result =
set
list that they are looking for, the application should take them =
directly
within to that section of the book where that keyword is found.  The =
book
that I have indexed is in xml format.

My question is, how would I write an application that allows me to =
search a
single document, and present a set of results to the user that list =
portions
of text from the book that contains the user's keyword, instead of
presenting a list of document titles where that keyword is found?

Any help would be greatly appreciated.  Thanks to all who reply.

Sincerely;
Fayyaz
--=20
View this message in context: =
http://www.nabble.com/Indexing-and-Searching-from-within-a-single-Documen=
t-tp16537558p16537558.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33502-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 07 19:20:47 2008
Return-Path: <java-user-return-33502-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49984 invoked from network); 7 Apr 2008 19:20:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Apr 2008 19:20:47 -0000
Received: (qmail 49461 invoked by uid 500); 7 Apr 2008 19:20:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49427 invoked by uid 500); 7 Apr 2008 19:20:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49416 invoked by uid 99); 7 Apr 2008 19:20:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Apr 2008 12:20:39 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Apr 2008 19:19:57 +0000
Received: by nf-out-0910.google.com with SMTP id d3so685702nfc.15
        for <java-user@lucene.apache.org>; Mon, 07 Apr 2008 12:20:07 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=zQyjTNvWO/8RHTHyLT9NO3yCyZi5Z/iMWHIOGkn5qzQ=;
        b=h2EejYI3yWMVUOabFpvgZ3SiUpgQJOyX4AaAbJymX/DIjV9rIM+XL/VvNakAvmglDjWXZzzfYZEjL+jia5qBbpO/1aZWSK3v6Vk4BY9Qrk63ifS0J3FJXYz0w6IBPXo89nUHUutua8IA4fgLfrYXWN+6PkSm6vwimI/G4fdaDKM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=AyBFe+rBuyP55BDC6qdziTdwq/gX990+3aBwgZQdAqeiSvmPIekcQdRFMHAjEUAFlt8UhmWtqNIjdV+nujjEJrHSGJBXop5MJiWsRZ7/BqJnPLZLgkZPWdy/Oa9radtJz4/GO9KadCOW3D7o/WqCWnX9kHPB9X3dOluBIPqyjr0=
Received: by 10.78.200.20 with SMTP id x20mr12931894huf.55.1207596007121;
        Mon, 07 Apr 2008 12:20:07 -0700 (PDT)
Received: from kodapan.lan ( [82.93.70.124])
        by mx.google.com with ESMTPS id y2sm33563052mug.9.2008.04.07.12.19.53
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 07 Apr 2008 12:19:54 -0700 (PDT)
Message-ID: <47FA73D7.4060303@gmail.com>
Date: Mon, 07 Apr 2008 21:19:51 +0200
From: Karl Wettin <karl.wettin@gmail.com>
User-Agent: Thunderbird 2.0.0.12 (Macintosh/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Indexing and Searching from within a single Document
References: <16537558.post@talk.nabble.com>
In-Reply-To: <16537558.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

You want to break down your book in mutiple documents, perhaps one per 
paragraph or so?

I hope this helps.

     karl



syedfa skrev:
> Dear Fellow Java/Lucene developers:
> 
> I am writing an application where a user is able to search for keywords from
> within a single book.  When the user conducts a search, he/she should
> receive a set of results that show the sentence/phrase within the book where
> the keyword is found.  Unfortunately, all of the examples that I have for
> searching using Lucene discuss the concept of searching multiple documents,
> instead of within a single document.  I have written an application that
> creates an index of this book, but I now want to search it.  In the result
> set, I would like the keyword(s) to be highlighted using Lucene's
> HighLighter feature.  Once the user clicks on the hit from the result set
> list that they are looking for, the application should take them directly
> within to that section of the book where that keyword is found.  The book
> that I have indexed is in xml format.
> 
> My question is, how would I write an application that allows me to search a
> single document, and present a set of results to the user that list portions
> of text from the book that contains the user's keyword, instead of
> presenting a list of document titles where that keyword is found?
> 
> Any help would be greatly appreciated.  Thanks to all who reply.
> 
> Sincerely;
> Fayyaz


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33503-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 07 19:21:45 2008
Return-Path: <java-user-return-33503-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50362 invoked from network); 7 Apr 2008 19:21:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Apr 2008 19:21:44 -0000
Received: (qmail 52605 invoked by uid 500); 7 Apr 2008 19:21:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51711 invoked by uid 500); 7 Apr 2008 19:21:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51700 invoked by uid 99); 7 Apr 2008 19:21:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Apr 2008 12:21:38 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 209.85.134.186 as permitted sender)
Received: from [209.85.134.186] (HELO mu-out-0910.google.com) (209.85.134.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Apr 2008 19:20:55 +0000
Received: by mu-out-0910.google.com with SMTP id g7so2504151muf.0
        for <java-user@lucene.apache.org>; Mon, 07 Apr 2008 12:21:00 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=PnUbe+uxbkFp9SqQeXVuEz9JJcKraF82xv7q+KQlH6E=;
        b=niyf89QjxzhOZkGfFYfjuNLJbO/05H/OqCoSgvSc9rFyyDSfuD51Xe5nBoOOMwnOrcf+VG9JiAnqLeNxqb9MyEEzKcLwRSdyZXP2jFtOZZlucASRpgbucsCoLBp3AlIafB9ScMmfTJS1yVxNbJK/q9Z2eawvcf9q/P2IcBV0EnA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=S/Ygmb5rbPRXXjcSARKhEbAzX1A9sChCqpd7pF0AkTOHMJPRORP0ipCU1wiHCrkigRiCEOQlMs1D+7vL2iOUppM3kbTK8QgyKbKxggqYdcc5Rve3uGRIcZkpR25ofjPcrMiBoMQpebg3hDEZzIhUxpfkE4nWZwMB/T1bQ661+RI=
Received: by 10.78.173.20 with SMTP id v20mr11903187hue.22.1207596059908;
        Mon, 07 Apr 2008 12:20:59 -0700 (PDT)
Received: from kodapan.lan ( [82.93.70.124])
        by mx.google.com with ESMTPS id i5sm33625651mue.7.2008.04.07.12.20.57
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 07 Apr 2008 12:20:57 -0700 (PDT)
Message-ID: <47FA7418.5000305@gmail.com>
Date: Mon, 07 Apr 2008 21:20:56 +0200
From: Karl Wettin <karl.wettin@gmail.com>
User-Agent: Thunderbird 2.0.0.12 (Macintosh/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Dataset to test lucene
References: <16538139.post@talk.nabble.com>
In-Reply-To: <16538139.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

sumittyagi skrev:
> hi,
> i need a dataset having html pages to test my lucene programs...
> from where can i download it..

Is there a specific data set you are looking for or would any do? How 
about you download Wikipedia?


     karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33504-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 07 19:45:54 2008
Return-Path: <java-user-return-33504-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58311 invoked from network); 7 Apr 2008 19:45:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Apr 2008 19:45:54 -0000
Received: (qmail 78630 invoked by uid 500); 7 Apr 2008 19:45:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78590 invoked by uid 500); 7 Apr 2008 19:45:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78579 invoked by uid 99); 7 Apr 2008 19:45:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Apr 2008 12:45:48 -0700
X-ASF-Spam-Status: No, hits=-2.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of niwalia@cisco.com designates 171.71.176.71 as permitted sender)
Received: from [171.71.176.71] (HELO sj-iport-2.cisco.com) (171.71.176.71)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Apr 2008 19:45:04 +0000
Received: from sj-dkim-4.cisco.com ([171.71.179.196])
  by sj-iport-2.cisco.com with ESMTP; 07 Apr 2008 12:45:09 -0700
Received: from sj-core-5.cisco.com (sj-core-5.cisco.com [171.71.177.238])
	by sj-dkim-4.cisco.com (8.12.11/8.12.11) with ESMTP id m37Jj9M3020151
	for <java-user@lucene.apache.org>; Mon, 7 Apr 2008 12:45:09 -0700
Received: from xbh-sjc-231.amer.cisco.com (xbh-sjc-231.cisco.com [128.107.191.100])
	by sj-core-5.cisco.com (8.13.8/8.13.8) with ESMTP id m37Jj9vA020884
	for <java-user@lucene.apache.org>; Mon, 7 Apr 2008 19:45:09 GMT
Received: from xmb-sjc-21b.amer.cisco.com ([171.70.151.143]) by xbh-sjc-231.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 7 Apr 2008 12:45:09 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C898E7.E2D420E3"
Subject: Appending to index
Date: Mon, 7 Apr 2008 12:46:14 -0700
Message-ID: <2AE56FA3F71F09468C8EBDDEFE8EB511057AE72F@xmb-sjc-21b.amer.cisco.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Appending to index
thread-index: AciU7xtsj9BhzJvOTrOpK83pD8ZKxgD+Fp0g
From: "Nitasha Walia (niwalia)" <niwalia@cisco.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 07 Apr 2008 19:45:09.0167 (UTC) FILETIME=[E2E64BF0:01C898E7]
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=2575; t=1207597509; x=1208461509;
	c=relaxed/simple; s=sjdkim4002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=niwalia@cisco.com;
	z=From:=20=22Nitasha=20Walia=20(niwalia)=22=20<niwalia@cisco
	.com>
	|Subject:=20Appending=20to=20index
	|Sender:=20;
	bh=rl3ir4nqfGDHnGBGNFqW0MAb8IUh48D6QtdZsp8wbgM=;
	b=J+xJfxvPPJOvgo7kIXy34OlUl4Av0VWLFt7ZlgQREGwy1/2v0Q1HuLQssn
	gWdAjyabCjrFBkYZuw0Ypl9NI6IcOtoOgfj6iy/+6Q5AwoEGjUnG4XDMf9B7
	/dr4/zQkzi;
Authentication-Results: sj-dkim-4; header.From=niwalia@cisco.com; dkim=pass (
	sig from cisco.com/sjdkim4002 verified; ); 
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C898E7.E2D420E3
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,
=20
I am a new user of Java Lucene. The default index is such that a new
files is created every time, which requires me to delete the existing
index folder.=20
=20
I want to append to the existing index. Can someone please guide me on
how to do the same?
=20
Thanks,
Nitasha Walia
Software Engineer, Cisco Systems

------_=_NextPart_001_01C898E7.E2D420E3--

From java-user-return-33505-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 07 20:11:02 2008
Return-Path: <java-user-return-33505-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65548 invoked from network); 7 Apr 2008 20:11:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Apr 2008 20:11:02 -0000
Received: (qmail 3149 invoked by uid 500); 7 Apr 2008 20:10:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3112 invoked by uid 500); 7 Apr 2008 20:10:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3101 invoked by uid 99); 7 Apr 2008 20:10:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Apr 2008 13:10:55 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of michael.wechner@wyona.com designates 195.226.6.75 as permitted sender)
Received: from [195.226.6.75] (HELO server1.example.com) (195.226.6.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Apr 2008 20:10:02 +0000
Received: from [192.168.3.103] (194-95.76-83.cust.bluewin.ch [83.76.95.194])
	by server1.example.com (Postfix) with ESMTP id 34A5010C954
	for <java-user@lucene.apache.org>; Mon,  7 Apr 2008 22:11:52 +0200 (CEST)
Message-ID: <47FA7FBA.7050102@wyona.com>
Date: Mon, 07 Apr 2008 22:10:34 +0200
From: Michael Wechner <michael.wechner@wyona.com>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7.12) Gecko/20050920
X-Accept-Language: en-us, fr-ch, it-ch, en, de
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Appending to index
References: <2AE56FA3F71F09468C8EBDDEFE8EB511057AE72F@xmb-sjc-21b.amer.cisco.com>
In-Reply-To: <2AE56FA3F71F09468C8EBDDEFE8EB511057AE72F@xmb-sjc-21b.amer.cisco.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Nitasha Walia (niwalia) wrote:

>Hi,
> 
>I am a new user of Java Lucene. The default index is such that a new
>files is created every time, which requires me to delete the existing
>index folder. 
> 
>I want to append to the existing index. Can someone please guide me on
>how to do the same?
>  
>

IndexWriter.updateDocument(...)

HTH

Michael

> 
>Thanks,
>Nitasha Walia
>Software Engineer, Cisco Systems
>
>  
>


-- 
Michael Wechner
Wyona      -   Open Source Content Management - Yanel, Yulup
http://www.wyona.com
michael.wechner@wyona.com, michi@apache.org
+41 44 272 91 61


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33506-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 07 21:17:38 2008
Return-Path: <java-user-return-33506-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90928 invoked from network); 7 Apr 2008 21:17:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Apr 2008 21:17:38 -0000
Received: (qmail 98977 invoked by uid 500); 7 Apr 2008 21:17:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98686 invoked by uid 500); 7 Apr 2008 21:17:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98675 invoked by uid 99); 7 Apr 2008 21:17:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Apr 2008 14:17:31 -0700
X-ASF-Spam-Status: No, hits=3.8 required=10.0
	tests=MIME_QP_LONG_LINE,RCVD_IN_BL_SPAMCOP_NET,SPF_PASS,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [62.219.78.209] (HELO smtpin.livedns.co.il) (62.219.78.209)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Apr 2008 21:16:40 +0000
Received: from ([127.0.0.1]) with MailEnable ESMTP; Tue, 08 Apr 2008 00:16:39 +0200
Received: from ([80.250.149.60]) by mail.livedns.co.il with MailEnable WebMail; Tue, 8 Apr 2008 00:13:09 +0300
To: <java-user@lucene.apache.org>
From: "Itamar Syn-Hershko" <itamar@divrei-tora.com>
Subject: Why Lucene has to rewrite queries prior to actual searching?
Date: Tue, 8 Apr 2008 00:13:09 +0300
Message-ID: <4DD28DFBE83445D39F0177E2FC3C4C68.MAI@mail.livedns.co.il>
MIME-Version: 1.0
X-Mailer: MailEnable WebMail.NET
X-MimeOLE: Produced By MailEnable WebMail.NET V3.14.0.0
X-Read: 0
Content-Type: multipart/mixed;
	boundary="--=_Part_83B3577A0CAC48F4A77D3DFB7F7766CD"
X-Priority: 3
X-MSMail-Priority: Medium
X-Virus-Checked: Checked by ClamAV on apache.org

----=_Part_83B3577A0CAC48F4A77D3DFB7F7766CD
Content-Type: text/plain; charset="windows-1255"
Content-Transfer-Encoding: quoted-printable

Hi all,
 
Can someone from the experts here explain why Lucene has to get a "rewritten" query for the Searcher - so Phrase or Wildcards queries have to rewrite themselves into a "primitive" query, that is then passed to Lucene to look for=3F
I'm probably not familiar too much with the internals of Lucene, but I'd imagine that if you can inflate a query using wildcards via xxxxQuery sub classing, you could as easily (=3F) have some sort of Filter mechanism during the search, so that Lucene retrieves the Position vectors for all the terms that pass that filter, instead of retrieving only the position data for deterministic terms (with no wildcards etc.). If that was possible to do somehow, it could greatly increase the searchability of Lucene indices by using RegEx (without re-writing and getting the dreaded MaxClauseCount error) and similar.
 
Would love to hear some insights on this one.
 
Itamar.



----=_Part_83B3577A0CAC48F4A77D3DFB7F7766CD
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
----=_Part_83B3577A0CAC48F4A77D3DFB7F7766CD--



From java-user-return-33507-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 07 21:57:07 2008
Return-Path: <java-user-return-33507-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9138 invoked from network); 7 Apr 2008 21:57:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Apr 2008 21:57:07 -0000
Received: (qmail 48533 invoked by uid 500); 7 Apr 2008 21:57:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48501 invoked by uid 500); 7 Apr 2008 21:57:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48490 invoked by uid 99); 7 Apr 2008 21:57:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Apr 2008 14:57:01 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [194.109.24.35] (HELO smtp-vbr15.xs4all.nl) (194.109.24.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Apr 2008 21:56:09 +0000
Received: from k8u.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr15.xs4all.nl (8.13.8/8.13.8) with ESMTP id m37LuUrw044593
	for <java-user@lucene.apache.org>; Mon, 7 Apr 2008 23:56:30 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Why Lucene has to rewrite queries prior to actual searching?
Date: Mon, 7 Apr 2008 23:56:35 +0200
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <4DD28DFBE83445D39F0177E2FC3C4C68.MAI@mail.livedns.co.il>
In-Reply-To: <4DD28DFBE83445D39F0177E2FC3C4C68.MAI@mail.livedns.co.il>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200804072356.35515.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Itamar,

Query rewrite replaces wildcards with terms available from
the index. Usually that involves replacing a wildcard with a 
BooleanQuery that is an effective OR over the available
terms while using a flat coordination factor, i.e. it does not
matter how many of the available terms actually match
a document, as long as at least one matches.

For the required query parts (AND like), Scorer.skipTo()
is used, and that could well be the filter mechanism you
are referring to; have a look at the javadocs of Scorer,
and, if necessary, at the actual code of ConjunctionScorer.

Regards,
Paul Elschot





Op Monday 07 April 2008 23:13:09 schreef Itamar Syn-Hershko:
> Hi all,
>
> Can someone from the experts here explain why Lucene has to get a
> "rewritten" query for the Searcher - so Phrase or Wildcards queries
> have to rewrite themselves into a "primitive" query, that is then
> passed to Lucene to look for? I'm probably not familiar too much with
> the internals of Lucene, but I'd imagine that if you can inflate a
> query using wildcards via xxxxQuery sub classing, you could as easily
> (?) have some sort of Filter mechanism during the search, so that
> Lucene retrieves the Position vectors for all the terms that pass
> that filter, instead of retrieving only the position data for
> deterministic terms (with no wildcards etc.). If that was possible to
> do somehow, it could greatly increase the searchability of Lucene
> indices by using RegEx (without re-writing and getting the dreaded
> MaxClauseCount error) and similar.
>
> Would love to hear some insights on this one.
>
> Itamar.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33508-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 07 22:08:59 2008
Return-Path: <java-user-return-33508-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16549 invoked from network); 7 Apr 2008 22:08:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Apr 2008 22:08:59 -0000
Received: (qmail 59841 invoked by uid 500); 7 Apr 2008 22:08:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59808 invoked by uid 500); 7 Apr 2008 22:08:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59797 invoked by uid 99); 7 Apr 2008 22:08:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Apr 2008 15:08:52 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of john.wang@gmail.com designates 72.14.220.155 as permitted sender)
Received: from [72.14.220.155] (HELO fg-out-1718.google.com) (72.14.220.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Apr 2008 22:08:11 +0000
Received: by fg-out-1718.google.com with SMTP id d23so1428054fga.27
        for <java-user@lucene.apache.org>; Mon, 07 Apr 2008 15:08:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=ZE0UufO0pXPzviVPqUJiq7CGziNA3C6/gSzev4K8IEw=;
        b=oBlZT+GpB627Rt6vJ0QkuLTjmq9Pkht2hGG8UHRvzYUZC2zAVUHJ440qcm2nt5vif97IZ/M/o+MmxrWvgj52XUlAUEjx46Fa+b0XADM+fbV5pQLFLDdWOmhDbcQnBvYPeMlxeOKPMoyNfMSJaelcOE42N8DLMkppbjwNibC2cDg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=dQu2L91hmHP9+k+mqaTzeZzf3+zwv/VRRzIoQlhWgZDgv5Sj5+OMvQ+rET2Ts3GSBF5ysdJM+JMarUWSHCpnmXMfxv0Z4LeiuX5uhQ2WdtTA/bbtfwN9G6wR9JGnKlgtF1nYrYt46ue8BVC3TJv1oPgnRZkOpJjlCC6oxHb2I7g=
Received: by 10.86.79.19 with SMTP id c19mr3828466fgb.31.1207606102861;
        Mon, 07 Apr 2008 15:08:22 -0700 (PDT)
Received: by 10.86.82.10 with HTTP; Mon, 7 Apr 2008 15:08:22 -0700 (PDT)
Message-ID: <8837fb770804071508j33bccb85oa78bb93f1b1f9f7b@mail.gmail.com>
Date: Mon, 7 Apr 2008 15:08:22 -0700
From: "John Wang" <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Why Lucene has to rewrite queries prior to actual searching?
In-Reply-To: <200804072356.35515.paul.elschot@xs4all.nl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4136_21046265.1207606102836"
References: <4DD28DFBE83445D39F0177E2FC3C4C68.MAI@mail.livedns.co.il>
	 <200804072356.35515.paul.elschot@xs4all.nl>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4136_21046265.1207606102836
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Other use is for custom Query objects to reboost or expand the user query
from information gathered from the indexreader at search time.
-John

On Mon, Apr 7, 2008 at 2:56 PM, Paul Elschot <paul.elschot@xs4all.nl> wrote:

> Itamar,
>
> Query rewrite replaces wildcards with terms available from
> the index. Usually that involves replacing a wildcard with a
> BooleanQuery that is an effective OR over the available
> terms while using a flat coordination factor, i.e. it does not
> matter how many of the available terms actually match
> a document, as long as at least one matches.
>
> For the required query parts (AND like), Scorer.skipTo()
> is used, and that could well be the filter mechanism you
> are referring to; have a look at the javadocs of Scorer,
> and, if necessary, at the actual code of ConjunctionScorer.
>
> Regards,
> Paul Elschot
>
>
>
>
>
> Op Monday 07 April 2008 23:13:09 schreef Itamar Syn-Hershko:
> > Hi all,
> >
> > Can someone from the experts here explain why Lucene has to get a
> > "rewritten" query for the Searcher - so Phrase or Wildcards queries
> > have to rewrite themselves into a "primitive" query, that is then
> > passed to Lucene to look for? I'm probably not familiar too much with
> > the internals of Lucene, but I'd imagine that if you can inflate a
> > query using wildcards via xxxxQuery sub classing, you could as easily
> > (?) have some sort of Filter mechanism during the search, so that
> > Lucene retrieves the Position vectors for all the terms that pass
> > that filter, instead of retrieving only the position data for
> > deterministic terms (with no wildcards etc.). If that was possible to
> > do somehow, it could greatly increase the searchability of Lucene
> > indices by using RegEx (without re-writing and getting the dreaded
> > MaxClauseCount error) and similar.
> >
> > Would love to hear some insights on this one.
> >
> > Itamar.
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_4136_21046265.1207606102836--

From java-user-return-33509-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 07 22:35:34 2008
Return-Path: <java-user-return-33509-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34841 invoked from network); 7 Apr 2008 22:35:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Apr 2008 22:35:34 -0000
Received: (qmail 94816 invoked by uid 500); 7 Apr 2008 22:35:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94416 invoked by uid 500); 7 Apr 2008 22:35:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94405 invoked by uid 99); 7 Apr 2008 22:35:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Apr 2008 15:35:28 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [192.115.188.199] (HELO out4.bezeqint.net) (192.115.188.199)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Apr 2008 22:34:35 +0000
Received: from your0548c161e1 (unknown [80.250.149.60])
	by out4.bezeqint.net (Postfix) with ESMTPA id B66EDB08413
	for <java-user@lucene.apache.org>; Tue,  8 Apr 2008 01:31:45 +0300 (IDT)
From: "Itamar Syn-Hershko" <itamar@divrei-tora.com>
To: <java-user@lucene.apache.org>
Subject: RE: Why Lucene has to rewrite queries prior to actual searching?
Date: Tue, 8 Apr 2008 01:34:48 +0300
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
In-Reply-To: <200804072356.35515.paul.elschot@xs4all.nl>
Thread-Index: AciY+c1gXqeMrlJ3T4+gGJSdrTV6JAABMolg
Message-Id: <20080407223145.B66EDB08413@out4.bezeqint.net>
X-Virus-Checked: Checked by ClamAV on apache.org

Paul and John,

Thanks for your quick reply.

The problem with query rewriting is the beforementioned MaxClauseException.
Instead of inflating the query and passing a deterministic list of terms to
the actual search routine, Lucene could have accessed the vectors in the
index using some sort of filter. So, for example, if it knows to access
"Foobar" by its name in the index, why can't it take "Foo*" and just get all
the vectors until "Fop" is met (for example). Why does it have to get
deterministic list of terms?

I will take a look at the Scorer - can you describe in short what exactly it
does and where and when it is being called?

I don't get John's comment though - Query::rewrite is being called prior to
the actual searching (through QueryParser), how come it can use "information
gathered from IndexReader at search time"?

Itamar.

-----Original Message-----
From: Paul Elschot [mailto:paul.elschot@xs4all.nl] 
Sent: Tuesday, April 08, 2008 12:57 AM
To: java-user@lucene.apache.org
Subject: Re: Why Lucene has to rewrite queries prior to actual searching?

Itamar,

Query rewrite replaces wildcards with terms available from the index.
Usually that involves replacing a wildcard with a BooleanQuery that is an
effective OR over the available terms while using a flat coordination
factor, i.e. it does not matter how many of the available terms actually
match a document, as long as at least one matches.

For the required query parts (AND like), Scorer.skipTo() is used, and that
could well be the filter mechanism you are referring to; have a look at the
javadocs of Scorer, and, if necessary, at the actual code of
ConjunctionScorer.

Regards,
Paul Elschot





Op Monday 07 April 2008 23:13:09 schreef Itamar Syn-Hershko:
> Hi all,
>
> Can someone from the experts here explain why Lucene has to get a 
> "rewritten" query for the Searcher - so Phrase or Wildcards queries 
> have to rewrite themselves into a "primitive" query, that is then 
> passed to Lucene to look for? I'm probably not familiar too much with 
> the internals of Lucene, but I'd imagine that if you can inflate a 
> query using wildcards via xxxxQuery sub classing, you could as easily
> (?) have some sort of Filter mechanism during the search, so that 
> Lucene retrieves the Position vectors for all the terms that pass that 
> filter, instead of retrieving only the position data for deterministic 
> terms (with no wildcards etc.). If that was possible to do somehow, it 
> could greatly increase the searchability of Lucene indices by using 
> RegEx (without re-writing and getting the dreaded MaxClauseCount 
> error) and similar.
>
> Would love to hear some insights on this one.
>
> Itamar.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33510-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 07 22:36:39 2008
Return-Path: <java-user-return-33510-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35134 invoked from network); 7 Apr 2008 22:36:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Apr 2008 22:36:39 -0000
Received: (qmail 96536 invoked by uid 500); 7 Apr 2008 22:36:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96268 invoked by uid 500); 7 Apr 2008 22:36:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96257 invoked by uid 99); 7 Apr 2008 22:36:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Apr 2008 15:36:32 -0700
X-ASF-Spam-Status: No, hits=-2.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of niwalia@cisco.com designates 171.71.176.117 as permitted sender)
Received: from [171.71.176.117] (HELO sj-iport-6.cisco.com) (171.71.176.117)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Apr 2008 22:35:47 +0000
Received: from sj-dkim-1.cisco.com ([171.71.179.21])
  by sj-iport-6.cisco.com with ESMTP; 07 Apr 2008 15:35:59 -0700
Received: from sj-core-1.cisco.com (sj-core-1.cisco.com [171.71.177.237])
	by sj-dkim-1.cisco.com (8.12.11/8.12.11) with ESMTP id m37MZx4L005019
	for <java-user@lucene.apache.org>; Mon, 7 Apr 2008 15:35:59 -0700
Received: from xbh-sjc-231.amer.cisco.com (xbh-sjc-231.cisco.com [128.107.191.100])
	by sj-core-1.cisco.com (8.13.8/8.13.8) with ESMTP id m37MZx2E005553
	for <java-user@lucene.apache.org>; Mon, 7 Apr 2008 22:35:59 GMT
Received: from xmb-sjc-21b.amer.cisco.com ([171.70.151.143]) by xbh-sjc-231.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 7 Apr 2008 15:35:59 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C898FF.C071C529"
Subject: RE: Appending to index
Date: Mon, 7 Apr 2008 15:37:05 -0700
Message-ID: <2AE56FA3F71F09468C8EBDDEFE8EB511057AE83A@xmb-sjc-21b.amer.cisco.com>
In-Reply-To: <47FA7FBA.7050102@wyona.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Appending to index
thread-index: AciY64rCkEKHROhLQVya3R8//ts5vwAElwaw
References: <2AE56FA3F71F09468C8EBDDEFE8EB511057AE72F@xmb-sjc-21b.amer.cisco.com> <47FA7FBA.7050102@wyona.com>
From: "Nitasha Walia (niwalia)" <niwalia@cisco.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 07 Apr 2008 22:35:59.0326 (UTC) FILETIME=[C0786FE0:01C898FF]
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=9028; t=1207607759; x=1208471759;
	c=relaxed/simple; s=sjdkim1004;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=niwalia@cisco.com;
	z=From:=20=22Nitasha=20Walia=20(niwalia)=22=20<niwalia@cisco
	.com>
	|Subject:=20RE=3A=20Appending=20to=20index
	|Sender:=20;
	bh=x1Mccy2fSgrW7LONuHio+gPfz1IYMEsAEriNeRxMmQQ=;
	b=D0h+TDkrQSKJ0dN9oQWUPMMBAeRBGCMnA36tKCdg9olJFriealy8+w50mK
	nl6sgSI7Dh9K0zlt1eULClJJPkgnYLb0PA27AjnsranSPkR/0+DNi2IxN6yk
	uU5Ps4hLysvPnWItxeooUkCt6l+yjguTHdOLYGVFhbFsjsPRa61o8=;
Authentication-Results: sj-dkim-1; header.From=niwalia@cisco.com; dkim=pass (
	sig from cisco.com/sjdkim1004 verified; ); 
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C898FF.C071C529
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,=20

I am sorry, I don't quite understand what you meant by..=20

IndexWriter.updateDocument(...)

HTH

Let me re-phrase my question:

I need to append to an existing index. Presently, the code is structured
to check for the existing file, and exit if the file exists:

if(INDEX_FILE.exists())
{
System.out.println("Index File exists, remove existing index and
retry");
System.exit(1);
}

IndexWriter write =3D new IndexWriter(INDEX_FILE, new =
StandardAnalyser(),
true);
indexDocs(writer, FILE_TO_BE_INDEXED);
writer.optimize()
writer.close();

What files do I need to modify ? And what functions? Can you please
advise.=20

Thanks,
Nitasha


-----Original Message-----
From: Michael Wechner [mailto:michael.wechner@wyona.com]=20
Sent: Monday, April 07, 2008 1:11 PM
To: java-user@lucene.apache.org
Subject: Re: Appending to index

Nitasha Walia (niwalia) wrote:

>Hi,
>=20
>I am a new user of Java Lucene. The default index is such that a new=20
>files is created every time, which requires me to delete the existing=20
>index folder.
>=20
>I want to append to the existing index. Can someone please guide me on=20
>how to do the same?
> =20
>

IndexWriter.updateDocument(...)

HTH

Michael

>=20
>Thanks,
>Nitasha Walia
>Software Engineer, Cisco Systems
>
> =20
>


--
Michael Wechner
Wyona      -   Open Source Content Management - Yanel, Yulup
http://www.wyona.com
michael.wechner@wyona.com, michi@apache.org
+41 44 272 91 61


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


------_=_NextPart_001_01C898FF.C071C529--

From java-user-return-33511-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 07 22:56:15 2008
Return-Path: <java-user-return-33511-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41737 invoked from network); 7 Apr 2008 22:56:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Apr 2008 22:56:15 -0000
Received: (qmail 22172 invoked by uid 500); 7 Apr 2008 22:56:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22144 invoked by uid 500); 7 Apr 2008 22:56:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22133 invoked by uid 99); 7 Apr 2008 22:56:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Apr 2008 15:56:06 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.109.24.22] (HELO smtp-vbr2.xs4all.nl) (194.109.24.22)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Apr 2008 22:55:24 +0000
Received: from k8u.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr2.xs4all.nl (8.13.8/8.13.8) with ESMTP id m37MtZJQ075178
	for <java-user@lucene.apache.org>; Tue, 8 Apr 2008 00:55:35 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Why Lucene has to rewrite queries prior to actual searching?
Date: Tue, 8 Apr 2008 00:55:40 +0200
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <20080407223145.B66EDB08413@out4.bezeqint.net>
In-Reply-To: <20080407223145.B66EDB08413@out4.bezeqint.net>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200804080055.40648.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Itamar,

Have a look here:
http://lucene.apache.org/java/2_3_1/scoring.html

Regards,
Paul Elschot

Op Tuesday 08 April 2008 00:34:48 schreef Itamar Syn-Hershko:
> Paul and John,
>
> Thanks for your quick reply.
>
> The problem with query rewriting is the beforementioned
> MaxClauseException. Instead of inflating the query and passing a
> deterministic list of terms to the actual search routine, Lucene
> could have accessed the vectors in the index using some sort of
> filter. So, for example, if it knows to access "Foobar" by its name
> in the index, why can't it take "Foo*" and just get all the vectors
> until "Fop" is met (for example). Why does it have to get
> deterministic list of terms?
>
> I will take a look at the Scorer - can you describe in short what
> exactly it does and where and when it is being called?
>
> I don't get John's comment though - Query::rewrite is being called
> prior to the actual searching (through QueryParser), how come it can
> use "information gathered from IndexReader at search time"?
>
> Itamar.
>
> -----Original Message-----
> From: Paul Elschot [mailto:paul.elschot@xs4all.nl]
> Sent: Tuesday, April 08, 2008 12:57 AM
> To: java-user@lucene.apache.org
> Subject: Re: Why Lucene has to rewrite queries prior to actual
> searching?
>
> Itamar,
>
> Query rewrite replaces wildcards with terms available from the index.
> Usually that involves replacing a wildcard with a BooleanQuery that
> is an effective OR over the available terms while using a flat
> coordination factor, i.e. it does not matter how many of the
> available terms actually match a document, as long as at least one
> matches.
>
> For the required query parts (AND like), Scorer.skipTo() is used, and
> that could well be the filter mechanism you are referring to; have a
> look at the javadocs of Scorer, and, if necessary, at the actual code
> of ConjunctionScorer.
>
> Regards,
> Paul Elschot
>
> Op Monday 07 April 2008 23:13:09 schreef Itamar Syn-Hershko:
> > Hi all,
> >
> > Can someone from the experts here explain why Lucene has to get a
> > "rewritten" query for the Searcher - so Phrase or Wildcards queries
> > have to rewrite themselves into a "primitive" query, that is then
> > passed to Lucene to look for? I'm probably not familiar too much
> > with the internals of Lucene, but I'd imagine that if you can
> > inflate a query using wildcards via xxxxQuery sub classing, you
> > could as easily (?) have some sort of Filter mechanism during the
> > search, so that Lucene retrieves the Position vectors for all the
> > terms that pass that filter, instead of retrieving only the
> > position data for deterministic terms (with no wildcards etc.). If
> > that was possible to do somehow, it could greatly increase the
> > searchability of Lucene indices by using RegEx (without re-writing
> > and getting the dreaded MaxClauseCount error) and similar.
> >
> > Would love to hear some insights on this one.
> >
> > Itamar.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33512-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 08 01:16:14 2008
Return-Path: <java-user-return-33512-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10002 invoked from network); 8 Apr 2008 01:16:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Apr 2008 01:16:13 -0000
Received: (qmail 32801 invoked by uid 500); 8 Apr 2008 01:16:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32762 invoked by uid 500); 8 Apr 2008 01:16:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32750 invoked by uid 99); 8 Apr 2008 01:16:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Apr 2008 18:16:08 -0700
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [121.243.22.156] (HELO delhtca02.Infoedge.com) (121.243.22.156)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Apr 2008 01:15:15 +0000
Received: from DELHTCA01.Infoedge.com (172.16.3.234) by delhtca02.infoedge.com
 (172.16.3.245) with Microsoft SMTP Server (TLS) id 8.0.751.0; Tue, 8 Apr 2008
 06:40:12 +0530
Received: from NOIDAMB.Infoedge.com ([172.16.3.237]) by DELHTCA01.Infoedge.com
 ([172.16.3.234]) with mapi; Tue, 8 Apr 2008 06:40:12 +0530
From: Anshum Gupta <anshum.gupta@naukri.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Tue, 8 Apr 2008 06:37:26 +0530
Subject: RE: Appending to index
Thread-Topic: Appending to index
Thread-Index: AciY64rCkEKHROhLQVya3R8//ts5vwAElwawAAXAruA=
Message-ID: <565100694397DE4D90781DF24BEAC6744593FBE76A@NOIDAMB.Infoedge.com>
References: <2AE56FA3F71F09468C8EBDDEFE8EB511057AE72F@xmb-sjc-21b.amer.cisco.com>
 <47FA7FBA.7050102@wyona.com>,<2AE56FA3F71F09468C8EBDDEFE8EB511057AE83A@xmb-sjc-21b.amer.cisco.com>
In-Reply-To: <2AE56FA3F71F09468C8EBDDEFE8EB511057AE83A@xmb-sjc-21b.amer.cisco.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

You could try opening the indexWriter with the 3rd arguement as false. The =
3rd arg[] specifies whether a 'new' index has to be created or not. Somethi=
ng like

IndexWriter write =3D new IndexWriter(INDEX_FILE, new StandardAnalyser(),
false); //Notice the 3rd arguement here

I guess this should solve your problem (In case I did comprehend it correct=
ly).

--
Anshum


________________________________________
From: Nitasha Walia (niwalia) [niwalia@cisco.com]
Sent: Tuesday, April 08, 2008 4:07 AM
To: java-user@lucene.apache.org
Subject: RE: Appending to index

Hi,

I am sorry, I don't quite understand what you meant by..

IndexWriter.updateDocument(...)

HTH

Let me re-phrase my question:

I need to append to an existing index. Presently, the code is structured
to check for the existing file, and exit if the file exists:

if(INDEX_FILE.exists())
{
System.out.println("Index File exists, remove existing index and
retry");
System.exit(1);
}

IndexWriter write =3D new IndexWriter(INDEX_FILE, new StandardAnalyser(),
true);
indexDocs(writer, FILE_TO_BE_INDEXED);
writer.optimize()
writer.close();

What files do I need to modify ? And what functions? Can you please
advise.

Thanks,
Nitasha


-----Original Message-----
From: Michael Wechner [mailto:michael.wechner@wyona.com]
Sent: Monday, April 07, 2008 1:11 PM
To: java-user@lucene.apache.org
Subject: Re: Appending to index

Nitasha Walia (niwalia) wrote:

>Hi,
>
>I am a new user of Java Lucene. The default index is such that a new
>files is created every time, which requires me to delete the existing
>index folder.
>
>I want to append to the existing index. Can someone please guide me on
>how to do the same?
>
>

IndexWriter.updateDocument(...)

HTH

Michael

>
>Thanks,
>Nitasha Walia
>Software Engineer, Cisco Systems
>
>
>


--
Michael Wechner
Wyona      -   Open Source Content Management - Yanel, Yulup
http://www.wyona.com
michael.wechner@wyona.com, michi@apache.org
+41 44 272 91 61


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33513-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 08 08:00:38 2008
Return-Path: <java-user-return-33513-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78032 invoked from network); 8 Apr 2008 08:00:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Apr 2008 08:00:37 -0000
Received: (qmail 60286 invoked by uid 500); 8 Apr 2008 08:00:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60263 invoked by uid 500); 8 Apr 2008 08:00:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60252 invoked by uid 99); 8 Apr 2008 08:00:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Apr 2008 01:00:30 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [213.162.48.15] (HELO soufre.accelance.net) (213.162.48.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Apr 2008 07:59:39 +0000
Received: from [192.168.3.106] (LSt-Amand-152-32-31-90.w82-127.abo.wanadoo.fr [82.127.74.90])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by soufre.accelance.net (Postfix) with ESMTP id 004C4453A4
	for <java-user@lucene.apache.org>; Tue,  8 Apr 2008 09:59:57 +0200 (CEST)
Message-ID: <47FB25FC.9000905@garambrogne.net>
Date: Tue, 08 Apr 2008 09:59:56 +0200
From: Mathieu Lecarme <mathieu@garambrogne.net>
User-Agent: Thunderbird 2.0.0.12 (X11/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Indexing and Searching from within a single Document
References: <16537558.post@talk.nabble.com> <04BDEEFF9982DC4E91527119C0C572C8014D6DD7@cos-us-mb02.cos.agilent.com>
In-Reply-To: <04BDEEFF9982DC4E91527119C0C572C8014D6DD7@cos-us-mb02.cos.agilent.com>
X-Enigmail-Version: 0.95.6
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

jing_gao@agilent.com a crit :
> The need is:
> I have millions of entries in database, each entry is in such format (more or less)
>
> ID	Name	Description	start (number)	stop(number)
>
>
> Currently my application uses the database to do search, queries are in the following format:
>
> Select * from table where Name like "%mymymy%"
>
> Select * from table where start >5 and stop <50000
>
>
>
> I would like very much to use Lucene for such search, for the reason:
> 1. database performance is not ideal;
> 2. data is growing to be too big, I want to move to file system,
> 3. Currently everything is on server, user access through a web application. I want to provide rich client tool, in which case I would rather not to bother with database installations on client machine. Database is my last option;
> 4. Lucene sounds very cool, I want to use a different technology than database, which we are very familiar with already.
>
>
>
> I read the book, played with the demo. My question is:
> As you see, I'm not indexing or querying out documents, I'm interested in one row of data. If I want to use Lucene, how should I do it? Do I have to store my data as documents? Since I have millions and millions of rows in database, if I store each row as a document, it'd be millions of documents.
>   
Each line is a Document, and row are Field. Field like Description will 
be stored (and even compress).

M.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33514-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 08 13:19:28 2008
Return-Path: <java-user-return-33514-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11556 invoked from network); 8 Apr 2008 13:19:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Apr 2008 13:19:28 -0000
Received: (qmail 33742 invoked by uid 500); 8 Apr 2008 13:19:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33542 invoked by uid 500); 8 Apr 2008 13:19:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33530 invoked by uid 99); 8 Apr 2008 13:19:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Apr 2008 06:19:21 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [192.115.188.197] (HELO out2.bezeqint.net) (192.115.188.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Apr 2008 13:18:38 +0000
Received: from your0548c161e1 (unknown [80.250.149.60])
	by out2.bezeqint.net (Postfix) with ESMTPA id 95C9A2102EF
	for <java-user@lucene.apache.org>; Tue,  8 Apr 2008 16:17:26 +0300 (IDT)
From: "Itamar Syn-Hershko" <itamar@divrei-tora.com>
To: <java-user@lucene.apache.org>
Subject: RE: Why Lucene has to rewrite queries prior to actual searching?
Date: Tue, 8 Apr 2008 16:18:34 +0300
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
In-Reply-To: <200804080055.40648.paul.elschot@xs4all.nl>
Thread-Index: AciZAhFXv+bN0lXYQKC1JVlvn/iFqAAd/qlA
Message-Id: <20080408131726.95C9A2102EF@out2.bezeqint.net>
X-Virus-Checked: Checked by ClamAV on apache.org

Paul,

I don't see how this answers the question. I was asking why Lucene has to
access the index with exact terms, and not use RegEx or simpler wildcards
support internally? If Lucene will be able to look for "w?rd" or "wor*" and
treat the wildcards as wildcards, this will greatly improve speed of
searches and will eliminate the need for Query rewriting.

Since some people may want to index chars like those used in wildcards, they
could be escaped (or, those people will use the standard search classes
available today instead). I'm not entirely sure what part of Lucene does the
actual access to the terms and position vectors, but if it could be
sub-classed or cloned, and then modified to honor wildcards or even RegEx,
that would bring Lucene to new heights. Unless, again, there is a specific
reason why this can't be done.

Itamar. 

-----Original Message-----
From: Paul Elschot [mailto:paul.elschot@xs4all.nl] 
Sent: Tuesday, April 08, 2008 1:56 AM
To: java-user@lucene.apache.org
Subject: Re: Why Lucene has to rewrite queries prior to actual searching?

Itamar,

Have a look here:
http://lucene.apache.org/java/2_3_1/scoring.html

Regards,
Paul Elschot

Op Tuesday 08 April 2008 00:34:48 schreef Itamar Syn-Hershko:
> Paul and John,
>
> Thanks for your quick reply.
>
> The problem with query rewriting is the beforementioned 
> MaxClauseException. Instead of inflating the query and passing a 
> deterministic list of terms to the actual search routine, Lucene could 
> have accessed the vectors in the index using some sort of filter. So, 
> for example, if it knows to access "Foobar" by its name in the index, 
> why can't it take "Foo*" and just get all the vectors until "Fop" is 
> met (for example). Why does it have to get deterministic list of 
> terms?
>
> I will take a look at the Scorer - can you describe in short what 
> exactly it does and where and when it is being called?
>
> I don't get John's comment though - Query::rewrite is being called 
> prior to the actual searching (through QueryParser), how come it can 
> use "information gathered from IndexReader at search time"?
>
> Itamar.
>
> -----Original Message-----
> From: Paul Elschot [mailto:paul.elschot@xs4all.nl]
> Sent: Tuesday, April 08, 2008 12:57 AM
> To: java-user@lucene.apache.org
> Subject: Re: Why Lucene has to rewrite queries prior to actual 
> searching?
>
> Itamar,
>
> Query rewrite replaces wildcards with terms available from the index.
> Usually that involves replacing a wildcard with a BooleanQuery that is 
> an effective OR over the available terms while using a flat 
> coordination factor, i.e. it does not matter how many of the available 
> terms actually match a document, as long as at least one matches.
>
> For the required query parts (AND like), Scorer.skipTo() is used, and 
> that could well be the filter mechanism you are referring to; have a 
> look at the javadocs of Scorer, and, if necessary, at the actual code 
> of ConjunctionScorer.
>
> Regards,
> Paul Elschot
>
> Op Monday 07 April 2008 23:13:09 schreef Itamar Syn-Hershko:
> > Hi all,
> >
> > Can someone from the experts here explain why Lucene has to get a 
> > "rewritten" query for the Searcher - so Phrase or Wildcards queries 
> > have to rewrite themselves into a "primitive" query, that is then 
> > passed to Lucene to look for? I'm probably not familiar too much 
> > with the internals of Lucene, but I'd imagine that if you can 
> > inflate a query using wildcards via xxxxQuery sub classing, you 
> > could as easily (?) have some sort of Filter mechanism during the 
> > search, so that Lucene retrieves the Position vectors for all the 
> > terms that pass that filter, instead of retrieving only the position 
> > data for deterministic terms (with no wildcards etc.). If that was 
> > possible to do somehow, it could greatly increase the searchability 
> > of Lucene indices by using RegEx (without re-writing and getting the 
> > dreaded MaxClauseCount error) and similar.
> >
> > Would love to hear some insights on this one.
> >
> > Itamar.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33515-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 08 13:48:44 2008
Return-Path: <java-user-return-33515-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23602 invoked from network); 8 Apr 2008 13:48:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Apr 2008 13:48:44 -0000
Received: (qmail 91697 invoked by uid 500); 8 Apr 2008 13:48:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91489 invoked by uid 500); 8 Apr 2008 13:48:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91478 invoked by uid 99); 8 Apr 2008 13:48:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Apr 2008 06:48:37 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dckorah@gmail.com designates 66.249.90.177 as permitted sender)
Received: from [66.249.90.177] (HELO ik-out-1112.google.com) (66.249.90.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Apr 2008 13:47:55 +0000
Received: by ik-out-1112.google.com with SMTP id c28so569640ika.5
        for <java-user@lucene.apache.org>; Tue, 08 Apr 2008 06:48:02 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:from:to:subject:date:mime-version:content-type:content-transfer-encoding:x-mailer:x-mimeole:in-reply-to:thread-index:message-id;
        bh=XvLOXFZeshPnx8Rhw/vIQcPGfhXuzo9QyOv5q38oeGA=;
        b=Y/krt0WcjOcZor3imiy90JTNdZpNECFsMc/1v4LR8qENKuW7sEVAQmaSMNy7vXOCNob1r+k7y8TaWucmKwybxu+ku1FHwoSP7MnTy+PJxH1Z7EY4V1Gw2oH9iTL/AUcBCAELTWjNE9i4qQwtlK/vbJJ6ju4IiDyUoU+iD4/PNSg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:subject:date:mime-version:content-type:content-transfer-encoding:x-mailer:x-mimeole:in-reply-to:thread-index:message-id;
        b=PPPgvEXwQEaXfk0OfnHm7VwREcNkJy6GUS4MoFcIwpUuwbEsbWB7EeBnDwbOZB9xI7x8fyKU1UXQr42C5JXWspARMswH+QjUKBodpwF0AykCnLVJqJXIxCOIRvnw2FYhjXH89rLKge1twOYbxD5HeUEemrU3S7Zol0cjdDVc/us=
Received: by 10.78.124.7 with SMTP id w7mr14723668huc.60.1207662481743;
        Tue, 08 Apr 2008 06:48:01 -0700 (PDT)
Received: from SCWDEVDINOKVM ( [195.2.245.68])
        by mx.google.com with ESMTPS id 32sm15900917nfu.7.2008.04.08.06.47.59
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 08 Apr 2008 06:48:00 -0700 (PDT)
From: "Dino Korah" <dckorah@gmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: Indexing and Searching from within a single Document
Date: Tue, 8 Apr 2008 14:47:15 +0100
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
In-Reply-To: <47FB25FC.9000905@garambrogne.net>
thread-index: AciZTp4oFThyhJjKSjSYgRYiiWeEvgAMBcGA
Message-ID: <47fb7790.2015300a.3719.ffffe097@mx.google.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Lucene is a library to index data.
Its up to you to drive it the way you want.
Think about the search result, how would your user like to see the
information that the search page has brought up. Do they want to know =
page
numbers, or is it section number, or it could be even sentence number.
Depending on that breakup and stick the positional information like =
chapter,
paragraph, section number, sentence number etc along with the fragment =
of
the book and make a document.

Hope that helped.!=20

-----Original Message-----
From: Mathieu Lecarme [mailto:mathieu@garambrogne.net]=20
Sent: 08 April 2008 09:00
To: java-user@lucene.apache.org
Subject: Re: Indexing and Searching from within a single Document

jing_gao@agilent.com a =E9crit :
> The need is:
> I have millions of entries in database, each entry is in such format=20
> (more or less)
>
> ID	Name	Description	start (number)	stop(number)
>
>
> Currently my application uses the database to do search, queries are =
in
the following format:
>
> Select * from table where Name like "%mymymy%"
>
> Select * from table where start >5 and stop <50000
>
>
>
> I would like very much to use Lucene for such search, for the reason:
> 1. database performance is not ideal;
> 2. data is growing to be too big, I want to move to file system, 3.=20
> Currently everything is on server, user access through a web=20
> application. I want to provide rich client tool, in which case I would
rather not to bother with database installations on client machine. =
Database
is my last option; 4. Lucene sounds very cool, I want to use a different
technology than database, which we are very familiar with already.
>
>
>
> I read the book, played with the demo. My question is:
> As you see, I'm not indexing or querying out documents, I'm interested =
in
one row of data. If I want to use Lucene, how should I do it? Do I have =
to
store my data as documents? Since I have millions and millions of rows =
in
database, if I store each row as a document, it'd be millions of =
documents.
>  =20
Each line is a Document, and row are Field. Field like Description will =
be
stored (and even compress).

M.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33516-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 08 13:54:55 2008
Return-Path: <java-user-return-33516-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26649 invoked from network); 8 Apr 2008 13:54:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Apr 2008 13:54:54 -0000
Received: (qmail 9796 invoked by uid 500); 8 Apr 2008 13:54:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9622 invoked by uid 500); 8 Apr 2008 13:54:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9611 invoked by uid 99); 8 Apr 2008 13:54:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Apr 2008 06:54:48 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Apr 2008 13:53:57 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JjEHB-0003Za-Bf
	for java-user@lucene.apache.org; Tue, 08 Apr 2008 06:54:17 -0700
Message-ID: <16558732.post@talk.nabble.com>
Date: Tue, 8 Apr 2008 06:54:17 -0700 (PDT)
From: DKorah <dckorah@gmail.com>
To: java-user@lucene.apache.org
Subject: RE: Indexing and Searching from within a single Document
In-Reply-To: <04BDEEFF9982DC4E91527119C0C572C8014D6EC3@cos-us-mb02.cos.agilent.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: dckorah@gmail.com
References: <16537558.post@talk.nabble.com> <04BDEEFF9982DC4E91527119C0C572C8014D6EC3@cos-us-mb02.cos.agilent.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Lucene is a library to index data.
Its up to you to drive it the way you want.
Think about the search result, how would your user like to see the
information that the search page has brought up. Do they want to know page
numbers, or is it section number, or it could be even sentence number.
Depending on that breakup and stick the positional information like chapter,
paragraph, section number, sentence number etc along with the fragment of
the book and make a document. Dont forget to add a metadata to identify the
book.

Hope that helped.


jing_gao wrote:
> 
> Hi,
> 
> Some indexing tools give configurable options, you can use separators in a
> single documents (such as "//", "%%%"), and indexing engine would treat
> each block as a separate document.
> Does Lucene have this type of functionalities?
> 
> Thanks!
> Jing
> 
> -----Original Message-----
> From: syedfa [mailto:fayyazuddin@gmail.com] 
> Sent: Monday, April 07, 2008 10:13 AM
> To: java-user@lucene.apache.org
> Subject: Indexing and Searching from within a single Document
> 
> 
> Dear Fellow Java/Lucene developers:
> 
> I am writing an application where a user is able to search for keywords
> from
> within a single book.  When the user conducts a search, he/she should
> receive a set of results that show the sentence/phrase within the book
> where
> the keyword is found.  Unfortunately, all of the examples that I have for
> searching using Lucene discuss the concept of searching multiple
> documents,
> instead of within a single document.  I have written an application that
> creates an index of this book, but I now want to search it.  In the result
> set, I would like the keyword(s) to be highlighted using Lucene's
> HighLighter feature.  Once the user clicks on the hit from the result set
> list that they are looking for, the application should take them directly
> within to that section of the book where that keyword is found.  The book
> that I have indexed is in xml format.
> 
> My question is, how would I write an application that allows me to search
> a
> single document, and present a set of results to the user that list
> portions
> of text from the book that contains the user's keyword, instead of
> presenting a list of document titles where that keyword is found?
> 
> Any help would be greatly appreciated.  Thanks to all who reply.
> 
> Sincerely;
> Fayyaz
> -- 
> View this message in context:
> http://www.nabble.com/Indexing-and-Searching-from-within-a-single-Document-tp16537558p16537558.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Indexing-and-Searching-from-within-a-single-Document-tp16537558p16558732.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33517-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 08 13:55:50 2008
Return-Path: <java-user-return-33517-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27139 invoked from network); 8 Apr 2008 13:55:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Apr 2008 13:55:50 -0000
Received: (qmail 11769 invoked by uid 500); 8 Apr 2008 13:55:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11651 invoked by uid 500); 8 Apr 2008 13:55:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11640 invoked by uid 99); 8 Apr 2008 13:55:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Apr 2008 06:55:43 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [67.98.155.4] (HELO mail.mcdonaldbradley.com) (67.98.155.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Apr 2008 13:55:00 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: Lucene vs. Database indexing (RE: Indexing and Searching from within a single Document)
Date: Tue, 8 Apr 2008 09:56:35 -0400
Message-ID: <CE9FC3E386FC2F4ABACDBB9E389C2BA20252E5BD@hqmsg01.mcdonaldbradley.local>
In-Reply-To: <04BDEEFF9982DC4E91527119C0C572C8014D6DD7@cos-us-mb02.cos.agilent.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene vs. Database indexing (RE: Indexing and Searching from within a single Document)
Thread-Index: AciY0rpzjKWrsyHdQzSAtERKMtjsSwAAJnfwACq9EoA=
References: <16537558.post@talk.nabble.com> <04BDEEFF9982DC4E91527119C0C572C8014D6DD7@cos-us-mb02.cos.agilent.com>
From: "Duan, Nick" <NDuan@mcdonaldbradley.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

I think this should be a new thread since it's a different problem.

Based on your description, I don't see any compelling reasons for you to
use Lucene just for indexing purposes, since you are not indexing text
docs as you indicated.  Claiming database of lacking performance is not
accurate and objective.  Your search queries have only the name field
and the two number fields in the where clause.  So you can perform
indexing on those two fields using database's own indexing mechanism,
i.e. the "create index ..." statement, if these fields are not already
declared as primary keys.  You will see dramatic performance improvement
of your search queries.

ND=20

-----Original Message-----
From: jing_gao@agilent.com [mailto:jing_gao@agilent.com]=20
Sent: Monday, April 07, 2008 1:19 PM
To: java-user@lucene.apache.org
Subject: RE: Indexing and Searching from within a single Document

Hi,

I have a similar question. Not heard back from anyone yet.


Dear Lucene experts,

I'm currently evaluating options for our search tool.

The need is:
I have millions of entries in database, each entry is in such format
(more or less)

ID	Name	Description	start (number)	stop(number)


Currently my application uses the database to do search, queries are in
the following format:

Select * from table where Name like "%mymymy%"

Select * from table where start >5 and stop <50000



I would like very much to use Lucene for such search, for the reason:
1. database performance is not ideal;
2. data is growing to be too big, I want to move to file system,
3. Currently everything is on server, user access through a web
application. I want to provide rich client tool, in which case I would
rather not to bother with database installations on client machine.
Database is my last option;
4. Lucene sounds very cool, I want to use a different technology than
database, which we are very familiar with already.



I read the book, played with the demo. My question is:
As you see, I'm not indexing or querying out documents, I'm interested
in one row of data. If I want to use Lucene, how should I do it? Do I
have to store my data as documents? Since I have millions and millions
of rows in database, if I store each row as a document, it'd be millions
of documents.


What do you suggest?

Thank you!
Jing

-----Original Message-----
From: syedfa [mailto:fayyazuddin@gmail.com]=20
Sent: Monday, April 07, 2008 10:13 AM
To: java-user@lucene.apache.org
Subject: Indexing and Searching from within a single Document


Dear Fellow Java/Lucene developers:

I am writing an application where a user is able to search for keywords
from
within a single book.  When the user conducts a search, he/she should
receive a set of results that show the sentence/phrase within the book
where
the keyword is found.  Unfortunately, all of the examples that I have
for
searching using Lucene discuss the concept of searching multiple
documents,
instead of within a single document.  I have written an application that
creates an index of this book, but I now want to search it.  In the
result
set, I would like the keyword(s) to be highlighted using Lucene's
HighLighter feature.  Once the user clicks on the hit from the result
set
list that they are looking for, the application should take them
directly
within to that section of the book where that keyword is found.  The
book
that I have indexed is in xml format.

My question is, how would I write an application that allows me to
search a
single document, and present a set of results to the user that list
portions
of text from the book that contains the user's keyword, instead of
presenting a list of document titles where that keyword is found?

Any help would be greatly appreciated.  Thanks to all who reply.

Sincerely;
Fayyaz
--=20
View this message in context:
http://www.nabble.com/Indexing-and-Searching-from-within-a-single-Docume
nt-tp16537558p16537558.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33518-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 08 14:28:18 2008
Return-Path: <java-user-return-33518-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39401 invoked from network); 8 Apr 2008 14:28:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Apr 2008 14:28:18 -0000
Received: (qmail 84019 invoked by uid 500); 8 Apr 2008 14:28:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83991 invoked by uid 500); 8 Apr 2008 14:28:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83979 invoked by uid 99); 8 Apr 2008 14:28:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Apr 2008 07:28:11 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Apr 2008 14:27:27 +0000
Received: by nf-out-0910.google.com with SMTP id d3so868614nfc.15
        for <java-user@lucene.apache.org>; Tue, 08 Apr 2008 07:27:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=PwRc2jcAuq40FStoTamSoeKvRWfMGUkLt3d22TXMDE0=;
        b=v5o5DCNCb6qC/LyVy/c9/cAyn35G+pu11UcMGjmuUNHYyJnovxZzujGMM2YZW5K+fmUStzvpT5raNEHbVK39HIP580mujS5hQOtmtJg74rZwVqtbr3kBqevGYFGvsUP6Yv1UINBKTrPql2sPXFfJ/7qdVqPaXzESZbHKU8shc3E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Y0GEC+W5swUj49/m4d4F+VBpnESFy39wjB1bgmiXYtZewkOSzKmcp3fZ2Cna91vZ1o8vejdQ363M2MFHLwIT3ADwUl1l+5jzLTABiYQ/3KfD6o8oJVUKWMMdTBWOR+o8dpta89WGL1uvZwIEdq/+xnyJNfVEeZTs0Et1ElcimlA=
Received: by 10.78.188.10 with SMTP id l10mr14405197huf.33.1207664848524;
        Tue, 08 Apr 2008 07:27:28 -0700 (PDT)
Received: by 10.78.155.15 with HTTP; Tue, 8 Apr 2008 07:27:28 -0700 (PDT)
Message-ID: <6e3ae6310804080727m20bd1ac3udec9d5057be73fd6@mail.gmail.com>
Date: Tue, 8 Apr 2008 07:27:28 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene vs. Database indexing (RE: Indexing and Searching from within a single Document)
In-Reply-To: <CE9FC3E386FC2F4ABACDBB9E389C2BA20252E5BD@hqmsg01.mcdonaldbradley.local>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <16537558.post@talk.nabble.com>
	 <04BDEEFF9982DC4E91527119C0C572C8014D6DD7@cos-us-mb02.cos.agilent.com>
	 <CE9FC3E386FC2F4ABACDBB9E389C2BA20252E5BD@hqmsg01.mcdonaldbradley.local>
X-Virus-Checked: Checked by ClamAV on apache.org

Agree with Nick that Jing's task doesn't really need Lucene if mostly
range search is needed. Database is good for range search.

But for his search on 'Select * from table where Name like
"%mymymy%"'. It's not a scalable solution for database. And using
Lucene makes a lot of sense.

The easiest way is to create a Lucene index, and apply range search on
the index.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request)
got 2.6 Million Euro funding!


On Tue, Apr 8, 2008 at 6:56 AM, Duan, Nick <NDuan@mcdonaldbradley.com> wrote:
> I think this should be a new thread since it's a different problem.
>
>  Based on your description, I don't see any compelling reasons for you to
>  use Lucene just for indexing purposes, since you are not indexing text
>  docs as you indicated.  Claiming database of lacking performance is not
>  accurate and objective.  Your search queries have only the name field
>  and the two number fields in the where clause.  So you can perform
>  indexing on those two fields using database's own indexing mechanism,
>  i.e. the "create index ..." statement, if these fields are not already
>  declared as primary keys.  You will see dramatic performance improvement
>  of your search queries.
>
>  ND
>
>  -----Original Message-----
>  From: jing_gao@agilent.com [mailto:jing_gao@agilent.com]
>  Sent: Monday, April 07, 2008 1:19 PM
>  To: java-user@lucene.apache.org
>  Subject: RE: Indexing and Searching from within a single Document
>
>  Hi,
>
>  I have a similar question. Not heard back from anyone yet.
>
>
>  Dear Lucene experts,
>
>  I'm currently evaluating options for our search tool.
>
>  The need is:
>  I have millions of entries in database, each entry is in such format
>  (more or less)
>
>  ID      Name    Description     start (number)  stop(number)
>
>
>  Currently my application uses the database to do search, queries are in
>  the following format:
>
>  Select * from table where Name like "%mymymy%"
>
>  Select * from table where start >5 and stop <50000
>
>
>
>  I would like very much to use Lucene for such search, for the reason:
>  1. database performance is not ideal;
>  2. data is growing to be too big, I want to move to file system,
>  3. Currently everything is on server, user access through a web
>  application. I want to provide rich client tool, in which case I would
>  rather not to bother with database installations on client machine.
>  Database is my last option;
>  4. Lucene sounds very cool, I want to use a different technology than
>  database, which we are very familiar with already.
>
>
>
>  I read the book, played with the demo. My question is:
>  As you see, I'm not indexing or querying out documents, I'm interested
>  in one row of data. If I want to use Lucene, how should I do it? Do I
>  have to store my data as documents? Since I have millions and millions
>  of rows in database, if I store each row as a document, it'd be millions
>  of documents.
>
>
>  What do you suggest?
>
>  Thank you!
>  Jing
>
>  -----Original Message-----
>  From: syedfa [mailto:fayyazuddin@gmail.com]
>  Sent: Monday, April 07, 2008 10:13 AM
>  To: java-user@lucene.apache.org
>  Subject: Indexing and Searching from within a single Document
>
>
>  Dear Fellow Java/Lucene developers:
>
>  I am writing an application where a user is able to search for keywords
>  from
>  within a single book.  When the user conducts a search, he/she should
>  receive a set of results that show the sentence/phrase within the book
>  where
>  the keyword is found.  Unfortunately, all of the examples that I have
>  for
>  searching using Lucene discuss the concept of searching multiple
>  documents,
>  instead of within a single document.  I have written an application that
>  creates an index of this book, but I now want to search it.  In the
>  result
>  set, I would like the keyword(s) to be highlighted using Lucene's
>  HighLighter feature.  Once the user clicks on the hit from the result
>  set
>  list that they are looking for, the application should take them
>  directly
>  within to that section of the book where that keyword is found.  The
>  book
>  that I have indexed is in xml format.
>
>  My question is, how would I write an application that allows me to
>  search a
>  single document, and present a set of results to the user that list
>  portions
>  of text from the book that contains the user's keyword, instead of
>  presenting a list of document titles where that keyword is found?
>
>  Any help would be greatly appreciated.  Thanks to all who reply.
>
>  Sincerely;
>  Fayyaz
>  --
>  View this message in context:
>  http://www.nabble.com/Indexing-and-Searching-from-within-a-single-Docume
>  nt-tp16537558p16537558.html
>  Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
>  ---------------------------------------------------------------------
>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>  ---------------------------------------------------------------------
>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>  ---------------------------------------------------------------------
>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33519-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 08 14:57:18 2008
Return-Path: <java-user-return-33519-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54010 invoked from network); 8 Apr 2008 14:57:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Apr 2008 14:57:18 -0000
Received: (qmail 51429 invoked by uid 500); 8 Apr 2008 14:57:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51399 invoked by uid 500); 8 Apr 2008 14:57:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51388 invoked by uid 99); 8 Apr 2008 14:57:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Apr 2008 07:57:10 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.109.24.37] (HELO smtp-vbr17.xs4all.nl) (194.109.24.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Apr 2008 14:56:28 +0000
Received: from k8u.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr17.xs4all.nl (8.13.8/8.13.8) with ESMTP id m38Eudci031376
	for <java-user@lucene.apache.org>; Tue, 8 Apr 2008 16:56:39 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Why Lucene has to rewrite queries prior to actual searching?
Date: Tue, 8 Apr 2008 16:56:35 +0200
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <20080408131726.95C9A2102EF@out2.bezeqint.net>
In-Reply-To: <20080408131726.95C9A2102EF@out2.bezeqint.net>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200804081656.35643.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Op Tuesday 08 April 2008 15:18:34 schreef Itamar Syn-Hershko:
> Paul,
>
> I don't see how this answers the question. 

Towards the end, the page describes when a Scorer is called and
roughly what it does.

> I was asking why Lucene 
> has to access the index with exact terms, and not use RegEx or
> simpler wildcards support internally? If Lucene will be able to look
> for "w?rd" or "wor*" and treat the wildcards as wildcards, this will
> greatly improve speed of searches and will eliminate the need for
> Query rewriting.

When it is known in advance that "w?rd" and "wor*" will be used
in queries a lot, one can write a tokenizer that indexes them so
that they can be searched directly.
The problem is to know that in advance, that is at indexing time.

> Since some people may want to index chars like those used in
> wildcards, they could be escaped (or, those people will use the
> standard search classes available today instead). I'm not entirely
> sure what part of Lucene does the actual access to the terms and
> position vectors, but if it could be sub-classed or cloned, and then
> modified to honor wildcards or even RegEx, that would bring Lucene to
> new heights.

There are regular expression queries in the regex contrib module,
however these work by rewriting to actually indexed terms.

> Unless, again, there is a specific reason why this can't 
> be done.

There is no specific reason why it cannot be done, one only needs
to provide the corresponding tokenizer to be used at indexing time.

Kind regards,
Paul Elschot


>
> Itamar.
>
> -----Original Message-----
> From: Paul Elschot [mailto:paul.elschot@xs4all.nl]
> Sent: Tuesday, April 08, 2008 1:56 AM
> To: java-user@lucene.apache.org
> Subject: Re: Why Lucene has to rewrite queries prior to actual
> searching?
>
> Itamar,
>
> Have a look here:
> http://lucene.apache.org/java/2_3_1/scoring.html
>
> Regards,
> Paul Elschot
>
> Op Tuesday 08 April 2008 00:34:48 schreef Itamar Syn-Hershko:
> > Paul and John,
> >
> > Thanks for your quick reply.
> >
> > The problem with query rewriting is the beforementioned
> > MaxClauseException. Instead of inflating the query and passing a
> > deterministic list of terms to the actual search routine, Lucene
> > could have accessed the vectors in the index using some sort of
> > filter. So, for example, if it knows to access "Foobar" by its name
> > in the index, why can't it take "Foo*" and just get all the vectors
> > until "Fop" is met (for example). Why does it have to get
> > deterministic list of terms?
> >
> > I will take a look at the Scorer - can you describe in short what
> > exactly it does and where and when it is being called?
> >
> > I don't get John's comment though - Query::rewrite is being called
> > prior to the actual searching (through QueryParser), how come it
> > can use "information gathered from IndexReader at search time"?
> >
> > Itamar.
> >
> > -----Original Message-----
> > From: Paul Elschot [mailto:paul.elschot@xs4all.nl]
> > Sent: Tuesday, April 08, 2008 12:57 AM
> > To: java-user@lucene.apache.org
> > Subject: Re: Why Lucene has to rewrite queries prior to actual
> > searching?
> >
> > Itamar,
> >
> > Query rewrite replaces wildcards with terms available from the
> > index. Usually that involves replacing a wildcard with a
> > BooleanQuery that is an effective OR over the available terms while
> > using a flat coordination factor, i.e. it does not matter how many
> > of the available terms actually match a document, as long as at
> > least one matches.
> >
> > For the required query parts (AND like), Scorer.skipTo() is used,
> > and that could well be the filter mechanism you are referring to;
> > have a look at the javadocs of Scorer, and, if necessary, at the
> > actual code of ConjunctionScorer.
> >
> > Regards,
> > Paul Elschot
> >
> > Op Monday 07 April 2008 23:13:09 schreef Itamar Syn-Hershko:
> > > Hi all,
> > >
> > > Can someone from the experts here explain why Lucene has to get a
> > > "rewritten" query for the Searcher - so Phrase or Wildcards
> > > queries have to rewrite themselves into a "primitive" query, that
> > > is then passed to Lucene to look for? I'm probably not familiar
> > > too much with the internals of Lucene, but I'd imagine that if
> > > you can inflate a query using wildcards via xxxxQuery sub
> > > classing, you could as easily (?) have some sort of Filter
> > > mechanism during the search, so that Lucene retrieves the
> > > Position vectors for all the terms that pass that filter, instead
> > > of retrieving only the position data for deterministic terms
> > > (with no wildcards etc.). If that was possible to do somehow, it
> > > could greatly increase the searchability of Lucene indices by
> > > using RegEx (without re-writing and getting the dreaded
> > > MaxClauseCount error) and similar.
> > >
> > > Would love to hear some insights on this one.
> > >
> > > Itamar.
> >
> > -------------------------------------------------------------------
> >-- To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> >
> >
> > -------------------------------------------------------------------
> >-- To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33520-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 08 15:11:58 2008
Return-Path: <java-user-return-33520-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80823 invoked from network); 8 Apr 2008 15:11:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Apr 2008 15:11:58 -0000
Received: (qmail 85025 invoked by uid 500); 8 Apr 2008 15:11:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85000 invoked by uid 500); 8 Apr 2008 15:11:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84989 invoked by uid 99); 8 Apr 2008 15:11:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Apr 2008 08:11:51 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Apr 2008 15:11:09 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JjFTl-0006f7-2R
	for java-user@lucene.apache.org; Tue, 08 Apr 2008 08:11:21 -0700
Message-ID: <16559731.post@talk.nabble.com>
Date: Tue, 8 Apr 2008 08:11:21 -0700 (PDT)
From: dreampeppers99 <leandro.rhcp99@gmail.com>
To: java-user@lucene.apache.org
Subject: Questions about use of SpellChecker: Constructor and Simillarity...
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: leandro.rhcp99@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

I have two question about this GREAT tool.. (framework, library...
"whatever")
Well I decide put spell checker on my applications and I start to read some
papers and "found out" the Lucene project...

Anyway, I make it works, but I just want to know...

1=C2=BA Why need I pass a Directory objecto (obligatory) on constructor of
SpellChecker?
2=C2=BA Suposse that in my dictonary I had these words:

"The Lord of the Rings: The Two Towers"
"The Lord of the Rings: The Fellowship of the Ring"
"The Lord of the Rings: The Return of the King"

I just want to know how can I code something to "suggest" when user query
"The Lord of the Rings: The Two Towers" the application suggest:=20

"The Lord of the Rings: The Fellowship of the Ring"
"The Lord of the Rings: The Return of the King"

It is possible just using the Lucene?

################ My Test Class ######################
SpellChecker spell;
spell=3D new SpellChecker(FSDirectory.getDirectory(".")); //why this... ?!!
spell.indexDictionary(new Dicionario());=09

String[] l =3D spell.suggestSimilar(args[0],5);=09

for (String vl : l ){
   System.out.println("Suggested : " + vl);
}
###############################################



############### My Dictionary######################
public class Dicionario implements
org.apache.lucene.search.spell.Dictionary{

public Iterator getWordsIterator(){
=09List<String> lista =3D new ArrayList<String>();
=09lista.add("peter");
=09lista.add("spider man 3");
=09lista.add("johnny depp");
=09lista.add("the edge");
=09lista.add("monk");
=09lista.add("arnold schwarzenegger");
=09return lista.iterator();
    }
}
###############################################

Thanks in advance... :D
--=20
View this message in context: http://www.nabble.com/Questions-about-use-of-=
SpellChecker%3A-Constructor-and-Simillarity...-tp16559731p16559731.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33521-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 08 15:22:52 2008
Return-Path: <java-user-return-33521-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86391 invoked from network); 8 Apr 2008 15:22:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Apr 2008 15:22:52 -0000
Received: (qmail 8232 invoked by uid 500); 8 Apr 2008 15:22:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7626 invoked by uid 500); 8 Apr 2008 15:22:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7615 invoked by uid 99); 8 Apr 2008 15:22:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Apr 2008 08:22:44 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [213.162.48.15] (HELO soufre.accelance.net) (213.162.48.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Apr 2008 15:21:58 +0000
Received: from [192.168.3.106] (LSt-Amand-152-32-31-90.w82-127.abo.wanadoo.fr [82.127.74.90])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by soufre.accelance.net (Postfix) with ESMTP id E81084504A
	for <java-user@lucene.apache.org>; Tue,  8 Apr 2008 17:22:08 +0200 (CEST)
Message-ID: <47FB8D9F.50302@garambrogne.net>
Date: Tue, 08 Apr 2008 17:22:07 +0200
From: Mathieu Lecarme <mathieu@garambrogne.net>
User-Agent: Thunderbird 2.0.0.12 (X11/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Questions about use of SpellChecker: Constructor and Simillarity...
References: <16559731.post@talk.nabble.com>
In-Reply-To: <16559731.post@talk.nabble.com>
X-Enigmail-Version: 0.95.6
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Use shingleFilter.

I'm working on a wider SpellChecker, I'll post a third patch soon.
https://admin.garambrogne.net/projets/revuedepresse/browser/trunk/src/java

M.

dreampeppers99 a crit :
> Hi,
>
> I have two question about this GREAT tool.. (framework, library...
> "whatever")
> Well I decide put spell checker on my applications and I start to read some
> papers and "found out" the Lucene project...
>
> Anyway, I make it works, but I just want to know...
>
> 1 Why need I pass a Directory objecto (obligatory) on constructor of
> SpellChecker?
> 2 Suposse that in my dictonary I had these words:
>
> "The Lord of the Rings: The Two Towers"
> "The Lord of the Rings: The Fellowship of the Ring"
> "The Lord of the Rings: The Return of the King"
>
> I just want to know how can I code something to "suggest" when user query
> "The Lord of the Rings: The Two Towers" the application suggest: 
>
> "The Lord of the Rings: The Fellowship of the Ring"
> "The Lord of the Rings: The Return of the King"
>
> It is possible just using the Lucene?
>
> ################ My Test Class ######################
> SpellChecker spell;
> spell= new SpellChecker(FSDirectory.getDirectory(".")); //why this... ?!!
> spell.indexDictionary(new Dicionario());	
>
> String[] l = spell.suggestSimilar(args[0],5);	
>
> for (String vl : l ){
>    System.out.println("Suggested : " + vl);
> }
> ###############################################
>
>
>
> ############### My Dictionary######################
> public class Dicionario implements
> org.apache.lucene.search.spell.Dictionary{
>
> public Iterator getWordsIterator(){
> 	List<String> lista = new ArrayList<String>();
> 	lista.add("peter");
> 	lista.add("spider man 3");
> 	lista.add("johnny depp");
> 	lista.add("the edge");
> 	lista.add("monk");
> 	lista.add("arnold schwarzenegger");
> 	return lista.iterator();
>     }
> }
> ###############################################
>
> Thanks in advance... :D
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33522-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 08 15:58:16 2008
Return-Path: <java-user-return-33522-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10436 invoked from network); 8 Apr 2008 15:58:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Apr 2008 15:58:16 -0000
Received: (qmail 90965 invoked by uid 500); 8 Apr 2008 15:58:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90938 invoked by uid 500); 8 Apr 2008 15:58:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90927 invoked by uid 99); 8 Apr 2008 15:58:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Apr 2008 08:58:08 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of leandro.rhcp99@gmail.com designates 216.239.58.189 as permitted sender)
Received: from [216.239.58.189] (HELO gv-out-0910.google.com) (216.239.58.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Apr 2008 15:57:27 +0000
Received: by gv-out-0910.google.com with SMTP id n8so492045gve.23
        for <java-user@lucene.apache.org>; Tue, 08 Apr 2008 08:57:38 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=7ceDjvgcWLKSFXWau9VB5rIxQOSYKy49FjmYQTtK7V4=;
        b=iE0ofcGQYc4Nj6TX/jyumiat3i2TtpKJW7UR9mGSQlMmCzuTqnJs3HJFfSqKJJMZEsuk1RQ0PP2elqmDfMQOEwD7aTQcoCiXRXucTq4JJFYPqeMJ1+djQiDRavgd0a/VlRBmYe5gxKUwvncVOJAsd+kZPzxXA4pBySkACdaTbGY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=uCm0O3kwShyRruG8RP+0RrPkakCDgHcjKWY/AGZ6TbQNnPqQ2GSsd7NVXEXhzWgMFeVxcDec4ltsSO7WEcGizL7T8+Zuhsba6OL2zNllidmhLwrgQMElzq/yzagIdAB0VLjdbRt62BGoqa71mNvGvEWYnQ2kDgV2cEyFiwjsSUU=
Received: by 10.150.226.15 with SMTP id y15mr3767339ybg.145.1207670257681;
        Tue, 08 Apr 2008 08:57:37 -0700 (PDT)
Received: by 10.150.143.20 with HTTP; Tue, 8 Apr 2008 08:57:37 -0700 (PDT)
Message-ID: <5d3ac70804080857q3fa88365nab9930dc02e99914@mail.gmail.com>
Date: Tue, 8 Apr 2008 12:57:37 -0300
From: Leandro <leandro.rhcp99@gmail.com>
To: java-user@lucene.apache.org
Subject: Questions about use of SpellChecker: Constructor and Simillarity...
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_20458_471333.1207670257640"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_20458_471333.1207670257640
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi,

I have two question about this GREAT tool.. (framework, library...
"whatever")
Well I decide put spell checker on my applications and I start to read some
papers and "found out" the Lucene project...

Anyway, I make it works, but I just want to know...

1=BA Why need I pass a Directory objecto (obligatory) on constructor of
SpellChecker?
2=BA Suposse that in my dictonary I had these words:

"The Lord of the Rings: The Two Towers"
"The Lord of the Rings: The Fellowship of the Ring"
"The Lord of the Rings: The Return of the King"

I just want to know how can I code something to "suggest" when user query
"The Lord of the Rings: The Two Towers" the application suggest:

"The Lord of the Rings: The Fellowship of the Ring"
"The Lord of the Rings: The Return of the King"

It is possible just using the Lucene?

################ My Test Class ######################
SpellChecker spell;
spell=3D new SpellChecker(FSDirectory.getDirectory(".")); //why this... ?!!
spell.indexDictionary(new Dicionario());

String[] l =3D spell.suggestSimilar(args[0],5);

for (String vl : l ){
   System.out.println("Suggested : " + vl);
}
###############################################



############### My Dictionary######################
public class Dicionario implements
org.apache.lucene.search.spell.Dictionary{

public Iterator getWordsIterator(){
        List<String> lista =3D new ArrayList<String>();
        lista.add("peter");
        lista.add("spider man 3");
        lista.add("johnny depp");
        lista.add("the edge");
        lista.add("monk");
        lista.add("arnold schwarzenegger");
        return lista.iterator();
    }
}
###############################################

Thanks in advance... :D

------=_Part_20458_471333.1207670257640--

From java-user-return-33523-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 08 16:35:03 2008
Return-Path: <java-user-return-33523-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25461 invoked from network); 8 Apr 2008 16:35:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Apr 2008 16:35:03 -0000
Received: (qmail 48693 invoked by uid 500); 8 Apr 2008 16:34:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48514 invoked by uid 500); 8 Apr 2008 16:34:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48503 invoked by uid 99); 8 Apr 2008 16:34:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Apr 2008 09:34:57 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 209.85.134.185 as permitted sender)
Received: from [209.85.134.185] (HELO mu-out-0910.google.com) (209.85.134.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Apr 2008 16:34:14 +0000
Received: by mu-out-0910.google.com with SMTP id g7so3201909muf.0
        for <java-user@lucene.apache.org>; Tue, 08 Apr 2008 09:34:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=gh4iPW950x5+xZLFYjY9rZ4dp0QezCHIlCdfjDjxEDc=;
        b=FIMWJz2QjgZOtW20NLp0ZM2j50hXWHI4DnBwcx0vD/0joHf2ggLnOW4Iooao+LcWyTm4/B/aTeI3V1P0LTkLl5ppBvWw1tv1st7htqDUbtI1bAt2R5MDr6Vt/qzwZqOF4t3y5dh8QmxPD8w7zPawnZ16eGvL+CiQ9LYihcg+wE0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=c6xdj9ajFzsI4zgmRxK0TxpjqWqiNz7iJ6RUS1bqG2g/RCK10ayTeohgTHRdAUq1l9DcxNNCAliHz9BHmZqEm7/vVQ4wWQpAfNVeVMy9cxxNgUUWpSp4otVsfoWd63z6j0EnY4q9uDzAAbTTM0ZYeSn5tkYXF/oq35t5gNrXMhc=
Received: by 10.78.121.2 with SMTP id t2mr722138huc.112.1207672464307;
        Tue, 08 Apr 2008 09:34:24 -0700 (PDT)
Received: from kodapan.lan ( [82.93.70.124])
        by mx.google.com with ESMTPS id j2sm38485834mue.3.2008.04.08.09.34.22
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 08 Apr 2008 09:34:23 -0700 (PDT)
Message-ID: <47FB9E8C.2000702@gmail.com>
Date: Tue, 08 Apr 2008 18:34:20 +0200
From: Karl Wettin <karl.wettin@gmail.com>
User-Agent: Thunderbird 2.0.0.12 (Macintosh/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Questions about use of SpellChecker: Constructor and Simillarity...
References: <16559731.post@talk.nabble.com>
In-Reply-To: <16559731.post@talk.nabble.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

dreampeppers99 skrev:
> 1 Why need I pass a Directory objecto (obligatory) on constructor of
> SpellChecker?

Mainly because it is a nasty peice of code. But it does a good job.

> 2 Suposse that in my dictonary I had these words:
> 
> "The Lord of the Rings: The Two Towers"
> "The Lord of the Rings: The Fellowship of the Ring"
> "The Lord of the Rings: The Return of the King"
> 
> I just want to know how can I code something to "suggest" when user query
> "The Lord of the Rings: The Two Towers" the application suggest: 
> 
> "The Lord of the Rings: The Fellowship of the Ring"
> "The Lord of the Rings: The Return of the King"
> 
> It is possible just using the Lucene?

There are no typos in your example so you really don't even need a spell 
checker for that. Using OR clauses in your query would be enough. 
Perhaps you want to combine one variant with MUST clauses that has a bit 
more boost than the OR clauses.



      karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33524-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 08 16:50:47 2008
Return-Path: <java-user-return-33524-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31487 invoked from network); 8 Apr 2008 16:50:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Apr 2008 16:50:47 -0000
Received: (qmail 72039 invoked by uid 500); 8 Apr 2008 16:50:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71834 invoked by uid 500); 8 Apr 2008 16:50:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71823 invoked by uid 99); 8 Apr 2008 16:50:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Apr 2008 09:50:41 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of leandro.rhcp99@gmail.com designates 209.85.142.186 as permitted sender)
Received: from [209.85.142.186] (HELO ti-out-0910.google.com) (209.85.142.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Apr 2008 16:49:59 +0000
Received: by ti-out-0910.google.com with SMTP id 28so938255tif.11
        for <java-user@lucene.apache.org>; Tue, 08 Apr 2008 09:50:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=wLN4gcR4hq/UipzhXp1KWphTi749QWUuMuuRPUK8GZU=;
        b=NXHrG5bNJxfYqLk+pg1P1886xpV8MOEbF3GjkOkI+Nxx62Ubll9OqRrtAqxbj9FrKprzjD6ltcZIW5lW93kDK8IGxUEZP8VvTlq+oixp75ZUoLfKAUYVy+bAt6+G+RckNU/cOtRRPblWbQKk3fpz9kyFTQzcubY5zBMDlV1ntLw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=DYISBbYZUxTT8acehMkVCdbGRelv88LA2gBbO9MJk2M/tZq+jFaTRpeIXzTpTkiZIAr6AmsrziwGxMADeSi9pdZqhG1fgJnnyvem6yT2HNrm2NXIAspWROyU4Uj8jYrCs13ZEtCFXMhyR9GeXVPoLQz71rktjZqv2cHc1rL5tJc=
Received: by 10.151.147.16 with SMTP id z16mr3836986ybn.196.1207673408557;
        Tue, 08 Apr 2008 09:50:08 -0700 (PDT)
Received: by 10.150.143.20 with HTTP; Tue, 8 Apr 2008 09:50:08 -0700 (PDT)
Message-ID: <5d3ac70804080950y33c34146ldec554f54ee2aec8@mail.gmail.com>
Date: Tue, 8 Apr 2008 13:50:08 -0300
From: Leandro <leandro.rhcp99@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Questions about use of SpellChecker: Constructor and Simillarity...
In-Reply-To: <47FB9E8C.2000702@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_20681_9361635.1207673408565"
References: <16559731.post@talk.nabble.com> <47FB9E8C.2000702@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_20681_9361635.1207673408565
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

>
>
>  1=BA Why need I pass a Directory objecto (obligatory) on constructor of
> > SpellChecker?
> >
>
> Mainly because it is a nasty peice of code. But it does a good job.
>

Thanks.
How can we suggest it (create an normal constructor without param) to the
team?

>
>
>  2=BA Suposse that in my dictonary I had these words:
> >
> > "The Lord of the Rings: The Two Towers"
> > "The Lord of the Rings: The Fellowship of the Ring"
> > "The Lord of the Rings: The Return of the King"
> >
> > I just want to know how can I code something to "suggest" when user
> > query
> > "The Lord of the Rings: The Two Towers" the application suggest:
> > "The Lord of the Rings: The Fellowship of the Ring"
> > "The Lord of the Rings: The Return of the King"
> >
> > It is possible just using the Lucene?
> >
>
> There are no typos in your example so you really don't even need a spell
> checker for that. Using OR clauses in your query would be enough.


I guess no, because user will enter : "The Lord of the Rings: The Return of
the King" ... and the system should response with:


Similar:
The Lord of the Rings: The Two Towers
The Lord of the Rings: The Fellowship of the Ring

I can't see how can I do that?  (just using the OR statement)
For example:

name like '%the%'
or
name like '%Lord%'
or
name like '%of%'
or
name like '%the%'
or
name like '%Rings%'

will produce so much results besides to be non-performatic...

Perhaps you want to combine one variant with MUST clauses that has a bit
> more boost than the OR clauses.
>
>     karl


Thanks so much Karl!!!

------=_Part_20681_9361635.1207673408565--

From java-user-return-33525-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 08 16:56:40 2008
Return-Path: <java-user-return-33525-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32636 invoked from network); 8 Apr 2008 16:56:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Apr 2008 16:56:39 -0000
Received: (qmail 75922 invoked by uid 500); 8 Apr 2008 16:56:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75883 invoked by uid 500); 8 Apr 2008 16:56:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75872 invoked by uid 99); 8 Apr 2008 16:56:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Apr 2008 09:56:34 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [140.203.201.100] (HELO mx1.nuigalway.ie) (140.203.201.100)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Apr 2008 16:55:42 +0000
X-IronPort-AV: E=Sophos;i="4.25,624,1199664000"; 
   d="scan'208";a="210737797"
Received: from exbe2.ac.nuigalway.ie (HELO EVS1.ac.nuigalway.ie) ([10.132.157.13])
  by mx1.nuigalway.ie with ESMTP; 08 Apr 2008 19:26:35 +0100
Received: from EVS1.ac.nuigalway.ie ([10.132.157.14]) by EVS1.ac.nuigalway.ie with Microsoft SMTPSVC(6.0.3790.3959);
	 Tue, 8 Apr 2008 17:56:00 +0100
Received: from [10.2.18.102] ([140.203.154.11]) by EVS1.ac.nuigalway.ie over TLS secured channel with Microsoft SMTPSVC(6.0.3790.3959);
	 Tue, 8 Apr 2008 17:56:00 +0100
Message-ID: <47FBA3A0.7080101@deri.org>
Date: Tue, 08 Apr 2008 17:56:00 +0100
From: Renaud Delbru <renaud.delbru@deri.org>
User-Agent: Thunderbird 2.0.0.12 (X11/20080227)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Update of stored and non-indexed binary fields
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 08 Apr 2008 16:56:00.0104 (UTC) FILETIME=[6BFFEE80:01C89999]
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I am aware that there is already lots of discussions about field updates 
in Lucene. I post my question anyway because I don't find any 
information about my problem, which is to update a stored but 
non-indexed field.
For example, I have for each document a stored and non-indexed binary 
field 'pagerank', which is a float and which is used for computing the 
score of a document. As the document collection evolves, the pagerank 
for each document evolves also.
Since the pagerank value is stored as a float (BinaryValue), I guess 
that the value size (in byte) is fixed in the field data (.fdt) file. 
Then, could it be possible to overwrite the old float value by a new 
float value ?

Thanks,
-- 
Renaud delbru

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33526-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 08 17:02:32 2008
Return-Path: <java-user-return-33526-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34457 invoked from network); 8 Apr 2008 17:02:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Apr 2008 17:02:32 -0000
Received: (qmail 86271 invoked by uid 500); 8 Apr 2008 17:02:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85910 invoked by uid 500); 8 Apr 2008 17:02:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85899 invoked by uid 99); 8 Apr 2008 17:02:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Apr 2008 10:02:26 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [212.27.42.28] (HELO smtp2-g19.free.fr) (212.27.42.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Apr 2008 17:01:43 +0000
Received: from smtp2-g19.free.fr (localhost.localdomain [127.0.0.1])
	by smtp2-g19.free.fr (Postfix) with ESMTP id 7FE6012BC45
	for <java-user@lucene.apache.org>; Tue,  8 Apr 2008 19:01:51 +0200 (CEST)
Received: from [192.168.1.100] (ze.garambrogne.net [82.227.122.98])
	by smtp2-g19.free.fr (Postfix) with ESMTP id 1A5DF12BBF5
	for <java-user@lucene.apache.org>; Tue,  8 Apr 2008 19:01:46 +0200 (CEST)
Message-Id: <664B95C5-BFAF-4493-9715-D8360FFC01E3@garambrogne.net>
From: Mathieu Lecarme <mathieu@garambrogne.net>
To: java-user@lucene.apache.org
In-Reply-To: <47FB9E8C.2000702@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: Questions about use of SpellChecker: Constructor and Simillarity...
Date: Tue, 8 Apr 2008 19:01:45 +0200
References: <16559731.post@talk.nabble.com> <47FB9E8C.2000702@gmail.com>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Le 8 avr. 08 =E0 18:34, Karl Wettin a =E9crit :
> dreampeppers99 skrev:
>> 1=BA Why need I pass a Directory objecto (obligatory) on constructor =
of
>> SpellChecker?
>
> Mainly because it is a nasty peice of code. But it does a good job.
Because spellChecker use a directory to store data. It can be =20
FSDirectory, RAMDirectory ....

>
>
>> 2=BA Suposse that in my dictonary I had these words:
>> "The Lord of the Rings: The Two Towers"
>> "The Lord of the Rings: The Fellowship of the Ring"
>> "The Lord of the Rings: The Return of the King"
>> I just want to know how can I code something to "suggest" when user =20=

>> query
>> "The Lord of the Rings: The Two Towers" the application suggest: =20
>> "The Lord of the Rings: The Fellowship of the Ring"
>> "The Lord of the Rings: The Return of the King"
>> It is possible just using the Lucene?
>
> There are no typos in your example so you really don't even need a =20
> spell checker for that. Using OR clauses in your query would be =20
> enough. Perhaps you want to combine one variant with MUST clauses =20
> that has a bit more boost than the OR clauses.
A classical OR query will match shuffled data : "The king of lord got =20=

a ring" should match.
With shingle, you will match title in the right order.

M.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33527-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 08 17:18:36 2008
Return-Path: <java-user-return-33527-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40655 invoked from network); 8 Apr 2008 17:18:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Apr 2008 17:18:36 -0000
Received: (qmail 22614 invoked by uid 500); 8 Apr 2008 17:18:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22589 invoked by uid 500); 8 Apr 2008 17:18:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22577 invoked by uid 99); 8 Apr 2008 17:18:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Apr 2008 10:18:30 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of leandro.rhcp99@gmail.com designates 216.239.58.188 as permitted sender)
Received: from [216.239.58.188] (HELO gv-out-0910.google.com) (216.239.58.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Apr 2008 17:17:48 +0000
Received: by gv-out-0910.google.com with SMTP id n8so522176gve.23
        for <java-user@lucene.apache.org>; Tue, 08 Apr 2008 10:17:58 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=5JDXtMQmYsE6UfqmStgu9eeooSfhwqDvXqmRBmDCULk=;
        b=lazsgAoPBWLU3qti74aUlce/Qj/2/l8XW2v3M0u5kPf8UKBwZKyqrftdSbgIua9OVbzMZ1G1d/uhnXlxNMsXMOtW4wOHnB/TeQPEUgxA/eOBIitOIUpFiAWC3AA16SgXN3j18M6aX2xRpdIAV9/WGDQd7bpcfa18d7YpGtzyRQU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=krolUoSHgfVXSKFrtWe/9CEn/B2qtKgBFDt69cQhllBkHiHFng/xSqP4AqjLfUfJIHdU5mSyIJwIDyoOhay3lORPnhkPvwquWZf4yOXpyaZA7VXYt1mYZAorX68phqkcKLddxttFFYTZGleJ/xkb6V7x1DiWNYXlsu6l6ogezKI=
Received: by 10.151.102.16 with SMTP id e16mr3882503ybm.183.1207675077206;
        Tue, 08 Apr 2008 10:17:57 -0700 (PDT)
Received: by 10.150.143.20 with HTTP; Tue, 8 Apr 2008 10:17:57 -0700 (PDT)
Message-ID: <5d3ac70804081017y10a8816cmad84bd65e5ad5088@mail.gmail.com>
Date: Tue, 8 Apr 2008 14:17:57 -0300
From: Leandro <leandro.rhcp99@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Questions about use of SpellChecker: Constructor and Simillarity...
In-Reply-To: <664B95C5-BFAF-4493-9715-D8360FFC01E3@garambrogne.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_20822_33039550.1207675077233"
References: <16559731.post@talk.nabble.com> <47FB9E8C.2000702@gmail.com>
	 <664B95C5-BFAF-4493-9715-D8360FFC01E3@garambrogne.net>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_20822_33039550.1207675077233
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

>
> Mainly because it is a nasty peice of code. But it does a good job.
> >
> Because spellChecker use a directory to store data. It can be FSDirectory,
> RAMDirectory ....


Perfect explanation... !!!
So use the RAMDirectory is better (perfomatically)

spell= new SpellChecker(FSDirectory.getDirectory("."));
spell= new SpellChecker(RAMDirectory.getDirectory("."));

The second is better (fast) to little amount of data...
Thanks so much, now I can understand ... It may be on real documentation...



> A classical OR query will match shuffled data : "The king of lord got a
> ring" should match.
> With shingle, you will match title in the right order.


Shingle will divide it on "couple" of words... so I can use it with OR ...
(The good one.... I'll try this)


Thanks so much!!!

------=_Part_20822_33039550.1207675077233--

From java-user-return-33528-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 08 17:21:03 2008
Return-Path: <java-user-return-33528-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41379 invoked from network); 8 Apr 2008 17:21:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Apr 2008 17:21:03 -0000
Received: (qmail 26980 invoked by uid 500); 8 Apr 2008 17:20:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26942 invoked by uid 500); 8 Apr 2008 17:20:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26931 invoked by uid 99); 8 Apr 2008 17:20:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Apr 2008 10:20:57 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 72.14.220.157 as permitted sender)
Received: from [72.14.220.157] (HELO fg-out-1718.google.com) (72.14.220.157)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Apr 2008 17:20:14 +0000
Received: by fg-out-1718.google.com with SMTP id d23so1797952fga.27
        for <java-user@lucene.apache.org>; Tue, 08 Apr 2008 10:20:20 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=mUX/r3JZDWGd434iTT3u15a2TO1w8O5xrRwBbg82WQY=;
        b=gI//dwq5fb+ZHADLxKMkPfHful+CaCOOiKjsfwtNRRFQwoplzo33H6a8tZ++UNrtgPfOAOH3Q4nA+/78M3rUHceLIqojd2XthoWh+JP/mjy4ehM+X8UT6LJSVEe2gzUqwArm1WO+378+Id+UU+dPmDELAyM1ftlJBnqxlttmZ24=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=v9FVggMnIdq1+t7T6hYypblBIZyu/Q6Vww7R296jk4x8oW+yiWb6xp589KGsS/1AT/4Yz8+K2LSHbBEnqdOlIQPolW2ExD46PVpGs3TmIittRzwE8FEWB2b2jGZiSf5PTQ8NwTZuynos8K+Ty/buK9cPTshy6r948MPTgtpggCk=
Received: by 10.86.27.9 with SMTP id a9mr5019710fga.62.1207675220622;
        Tue, 08 Apr 2008 10:20:20 -0700 (PDT)
Received: from kodapan.lan ( [82.93.70.124])
        by mx.google.com with ESMTPS id d4sm8717979fga.2.2008.04.08.10.20.17
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 08 Apr 2008 10:20:18 -0700 (PDT)
Message-ID: <47FBA950.10008@gmail.com>
Date: Tue, 08 Apr 2008 19:20:16 +0200
From: Karl Wettin <karl.wettin@gmail.com>
User-Agent: Thunderbird 2.0.0.12 (Macintosh/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Questions about use of SpellChecker: Constructor and Simillarity...
References: <16559731.post@talk.nabble.com> <47FB9E8C.2000702@gmail.com> <664B95C5-BFAF-4493-9715-D8360FFC01E3@garambrogne.net>
In-Reply-To: <664B95C5-BFAF-4493-9715-D8360FFC01E3@garambrogne.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Mathieu Lecarme skrev:
> Le 8 avr. 08  18:34, Karl Wettin a crit :
>> dreampeppers99 skrev:

>>> 2 Suposse that in my dictonary I had these words:
>>> "The Lord of the Rings: The Two Towers"
>>> "The Lord of the Rings: The Fellowship of the Ring"
>>> "The Lord of the Rings: The Return of the King"
>>> I just want to know how can I code something to "suggest" when user 
>>> query
>>> "The Lord of the Rings: The Two Towers" the application suggest: "The 
>>> Lord of the Rings: The Fellowship of the Ring"
>>> "The Lord of the Rings: The Return of the King"
>>> It is possible just using the Lucene?
>>
>> There are no typos in your example so you really don't even need a 
>> spell checker for that. Using OR clauses in your query would be 
>> enough. Perhaps you want to combine one variant with MUST clauses that 
>> has a bit more boost than the OR clauses.
> A classical OR query will match shuffled data : "The king of lord got a 
> ring" should match.
> With shingle, you will match title in the right order.

Appending a SHOULD clause containing a phrase or span query with a bit 
of boost also works.



    karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33529-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 08 17:24:18 2008
Return-Path: <java-user-return-33529-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42226 invoked from network); 8 Apr 2008 17:24:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Apr 2008 17:24:18 -0000
Received: (qmail 34286 invoked by uid 500); 8 Apr 2008 17:24:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33988 invoked by uid 500); 8 Apr 2008 17:24:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33977 invoked by uid 99); 8 Apr 2008 17:24:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Apr 2008 10:24:11 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 72.14.220.156 as permitted sender)
Received: from [72.14.220.156] (HELO fg-out-1718.google.com) (72.14.220.156)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Apr 2008 17:23:28 +0000
Received: by fg-out-1718.google.com with SMTP id d23so1798930fga.27
        for <java-user@lucene.apache.org>; Tue, 08 Apr 2008 10:23:38 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=z/b22XmHA7MBOpdhfeShdXVmGcQBmr8cEmtFcmqSZqQ=;
        b=lcEwG6adgg2i03zrq0LPAmxsveqsm+flE/8EuVnV3PkEGowOAO5jNeFTb6CVDaARhuLyVCv5erQkqGPmMRuecdTEUL7aW11+D1lrH6K3g8yve/f/ca7KLXyLGiobRanaPMHrpSdby4UrDHzrtzj+2X0TfTTLhN9arOW0lWRTzco=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=aCk9qgAhwpxqAdra2XyUtJKe4wSeWMhC13BVZBmqy83vIL5zW4kALipypeiwUtmtktyn+k5esPlPJoO84WNuXbi6xSaVGtx2NwP8kG5MjddAHNnysQr0sxbAdwVyo+3oSlAVEK+8bHGFX2yi9nB+zVzXtHYANZ0Qd5vNwfq0eng=
Received: by 10.86.100.7 with SMTP id x7mr5035569fgb.41.1207675417971;
        Tue, 08 Apr 2008 10:23:37 -0700 (PDT)
Received: from kodapan.lan ( [82.93.70.124])
        by mx.google.com with ESMTPS id 4sm8763305fge.3.2008.04.08.10.23.35
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 08 Apr 2008 10:23:36 -0700 (PDT)
Message-ID: <47FBAA16.3040203@gmail.com>
Date: Tue, 08 Apr 2008 19:23:34 +0200
From: Karl Wettin <karl.wettin@gmail.com>
User-Agent: Thunderbird 2.0.0.12 (Macintosh/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Questions about use of SpellChecker: Constructor and Simillarity...
References: <16559731.post@talk.nabble.com> <47FB9E8C.2000702@gmail.com> <5d3ac70804080950y33c34146ldec554f54ee2aec8@mail.gmail.com>
In-Reply-To: <5d3ac70804080950y33c34146ldec554f54ee2aec8@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Leandro skrev:
>>
>>  1 Why need I pass a Directory objecto (obligatory) on constructor of
>>> SpellChecker?
>>>
>> Mainly because it is a nasty peice of code. But it does a good job.
>>
> 
> How can we suggest it (create an normal constructor without param) to the
> team?

Sorry, I missunderstood your question. See other reply.

>> There are no typos in your example so you really don't even need a spell
>> checker for that. Using OR clauses in your query would be enough.
> 
> I guess no, because user will enter : "The Lord of the Rings: The Return of
> the King" ... and the system should response with:
> 
> 
> Similar:
> The Lord of the Rings: The Two Towers
> The Lord of the Rings: The Fellowship of the Ring
> 
> I can't see how can I do that?  (just using the OR statement)
> For example:
> 
> name like '%the%'
> or
> name like '%Lord%'
> or
> name like '%of%'
> or
> name like '%the%'
> or
> name like '%Rings%'
> 
> will produce so much results besides to be non-performatic...

Are you sure about that? Did you benchmark? Can we see the results?




     karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33530-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 08 17:29:08 2008
Return-Path: <java-user-return-33530-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43738 invoked from network); 8 Apr 2008 17:29:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Apr 2008 17:29:08 -0000
Received: (qmail 43066 invoked by uid 500); 8 Apr 2008 17:29:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42831 invoked by uid 500); 8 Apr 2008 17:29:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42820 invoked by uid 99); 8 Apr 2008 17:29:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Apr 2008 10:29:02 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of leandro.rhcp99@gmail.com designates 209.85.142.185 as permitted sender)
Received: from [209.85.142.185] (HELO ti-out-0910.google.com) (209.85.142.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Apr 2008 17:28:12 +0000
Received: by ti-out-0910.google.com with SMTP id 28so959078tif.11
        for <java-user@lucene.apache.org>; Tue, 08 Apr 2008 10:28:30 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=xQDxp6U4bYPfL+yYuXGrJyMxKj2NscZRDtipzL0dR7M=;
        b=Jk05fqybT0s8gLrAQ8DnqHsTJtuN4wLgxggN0jMl8T+60eAnKx3chkUEPshPXZ77hsnsZETPqtEqpXzVJz4YzfGmw9Uj+AvfejiHlsr/vc20Mzw3RFHYxo5UFrQiC69Edeub586V7vGXtu79bIaYTqIey1gC5Yx0JB6UPxWOxu4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=r5qU+4xdnVyU5KE/lS1XgkhtiOIDrctWkissTj8LE+5vt6ZhMzRIz+ojSG4HDa8yrXTMQfs08mKWAGkKbxwyjMV0BPVDRWR1EjMMWCDAiKXXMXfWE8EoyYc0vnaPjla1Nwr0RqPglM1NrE3/fstQwyhYXA+q8z6mkRj58dlYKSc=
Received: by 10.150.98.18 with SMTP id v18mr918645ybb.10.1207675709601;
        Tue, 08 Apr 2008 10:28:29 -0700 (PDT)
Received: by 10.150.143.20 with HTTP; Tue, 8 Apr 2008 10:28:29 -0700 (PDT)
Message-ID: <5d3ac70804081028x42bfd8f4m41418243beba5f3c@mail.gmail.com>
Date: Tue, 8 Apr 2008 14:28:29 -0300
From: Leandro <leandro.rhcp99@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Questions about use of SpellChecker: Constructor and Simillarity...
In-Reply-To: <47FBAA16.3040203@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_20846_9368404.1207675709639"
References: <16559731.post@talk.nabble.com> <47FB9E8C.2000702@gmail.com>
	 <5d3ac70804080950y33c34146ldec554f54ee2aec8@mail.gmail.com>
	 <47FBAA16.3040203@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_20846_9368404.1207675709639
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

> Sorry, I missunderstood your question. See other reply.
>

Yes I got it. thanks

> Are you sure about that? Did you benchmark? Can we see the results?


Hey man take it easy, I just imagine. But I guess use the ShingleFilter will
help.

------=_Part_20846_9368404.1207675709639--

From java-user-return-33531-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 08 17:33:09 2008
Return-Path: <java-user-return-33531-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44773 invoked from network); 8 Apr 2008 17:33:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Apr 2008 17:33:09 -0000
Received: (qmail 47613 invoked by uid 500); 8 Apr 2008 17:33:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47584 invoked by uid 500); 8 Apr 2008 17:33:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47573 invoked by uid 99); 8 Apr 2008 17:33:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Apr 2008 10:33:00 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 209.85.134.185 as permitted sender)
Received: from [209.85.134.185] (HELO mu-out-0910.google.com) (209.85.134.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Apr 2008 17:32:17 +0000
Received: by mu-out-0910.google.com with SMTP id g7so3238009muf.0
        for <java-user@lucene.apache.org>; Tue, 08 Apr 2008 10:32:28 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=ZAG6q6scb9pXF+uwJeFoMKqyEw3j7eIRLB0ehMsNY9U=;
        b=Fb/ku8jTD299QrmnKD+/cOwrgHYusenjgLyHUYCOlFCF5xROHJBbNSiGuj8ETu/26Z2xFXlKj1G++seOH6E2WOev/YiHsZ9BD1WsMv8aFzgnqw8D/LgOHqFvm/sO60Je7zSaZL8qCXIWQqYxqNldGmI8xFTRtQlvHLW9jom38Ps=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=khQBvJRqSsbRrn4e83dQbp/NRtl6Pi6oOEI5BJGBiZC3lY8rp1owwkXcT5SZhElgbzc0pMZ1b7DNSG6Wl5Fhhz0yUEVsShpf5Qljlcf+q3Qycd+tW3L/Yms8Qx/ICa514A1k1qXKUn9LtBfHiWWSocE/Lip4yeE6F69maWYzrNE=
Received: by 10.82.121.20 with SMTP id t20mr10369320buc.20.1207675947728;
        Tue, 08 Apr 2008 10:32:27 -0700 (PDT)
Received: from kodapan.lan ( [82.93.70.124])
        by mx.google.com with ESMTPS id n10sm13332649mue.18.2008.04.08.10.32.25
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 08 Apr 2008 10:32:26 -0700 (PDT)
Message-ID: <47FBAC28.4000500@gmail.com>
Date: Tue, 08 Apr 2008 19:32:24 +0200
From: Karl Wettin <karl.wettin@gmail.com>
User-Agent: Thunderbird 2.0.0.12 (Macintosh/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Questions about use of SpellChecker: Constructor and Simillarity...
References: <16559731.post@talk.nabble.com> <47FB9E8C.2000702@gmail.com>	 <5d3ac70804080950y33c34146ldec554f54ee2aec8@mail.gmail.com>	 <47FBAA16.3040203@gmail.com> <5d3ac70804081028x42bfd8f4m41418243beba5f3c@mail.gmail.com>
In-Reply-To: <5d3ac70804081028x42bfd8f4m41418243beba5f3c@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Leandro skrev:
>> Sorry, I missunderstood your question. See other reply.
>>
> 
> Yes I got it. thanks
> 
>> Are you sure about that? Did you benchmark? Can we see the results?
> 
> 
> Hey man take it easy, I just imagine. But I guess use the ShingleFilter will
> help.


I'm cool :) I just think you are overcomplicating things.


    karl


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33532-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 08 17:47:32 2008
Return-Path: <java-user-return-33532-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48840 invoked from network); 8 Apr 2008 17:47:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Apr 2008 17:47:32 -0000
Received: (qmail 77416 invoked by uid 500); 8 Apr 2008 17:47:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77369 invoked by uid 500); 8 Apr 2008 17:47:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77354 invoked by uid 99); 8 Apr 2008 17:47:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Apr 2008 10:47:25 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of leandro.rhcp99@gmail.com designates 216.239.58.184 as permitted sender)
Received: from [216.239.58.184] (HELO gv-out-0910.google.com) (216.239.58.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Apr 2008 17:46:43 +0000
Received: by gv-out-0910.google.com with SMTP id n8so532953gve.23
        for <java-user@lucene.apache.org>; Tue, 08 Apr 2008 10:46:55 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=R8JjuSwVuSyoFgewPjzdrwEtvLIOqioRc1kATsuOdBA=;
        b=L1jWnk6aU6V213oC1raAskQzQKR+rAUJDLMBg9MQ4/RjqLxLC6/pdU0BWy2CHP5s9Cgv2okCcSLgVIMOIMZ62OwP1+uGuWXvltJUUwKz0x9wC7aTHdEVepxd8tI6uunmGj9sThEW5oIPBCZl763G36x6dOF65/lZZdKOvHfhKqY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=hUmsbmnVKwsIphfzcHNnuZtQN6fJPveyxNJWRXXQCgnzjVgujmVmsK+k8Zr1fjGjIrcVlpe5ODA8G6B3obxDebs86cfGDMuyyZVjTN6CtAkUuA+U7iOaTqWdbn0AT7bgH3R/IbUQJuMvt2cIfYvcaZYJiC9hmZHtIaeI3uCcc0o=
Received: by 10.150.52.2 with SMTP id z2mr3947140ybz.47.1207676814069;
        Tue, 08 Apr 2008 10:46:54 -0700 (PDT)
Received: by 10.150.143.20 with HTTP; Tue, 8 Apr 2008 10:46:54 -0700 (PDT)
Message-ID: <5d3ac70804081046o2110a24ag84106acd5d8dddd8@mail.gmail.com>
Date: Tue, 8 Apr 2008 14:46:54 -0300
From: Leandro <leandro.rhcp99@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Questions about use of SpellChecker: Constructor and Simillarity...
In-Reply-To: <47FBAC28.4000500@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_20949_24522010.1207676814185"
References: <16559731.post@talk.nabble.com> <47FB9E8C.2000702@gmail.com>
	 <5d3ac70804080950y33c34146ldec554f54ee2aec8@mail.gmail.com>
	 <47FBAA16.3040203@gmail.com>
	 <5d3ac70804081028x42bfd8f4m41418243beba5f3c@mail.gmail.com>
	 <47FBAC28.4000500@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_20949_24522010.1207676814185
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

>
>
>
> I'm cool :) I just think you are overcomplicating things.
>
>
Yes... I can use two words and OR
Suposse I query on this

The Lord of Rings: Return of King
The Lord of Rings: Fellowship
The Lord of Rings: The Two towers
The Lord of Weapons
The Lord of War

Suposse an user search: "The Lord of Rings Return of King"
WHERE
name like '%the lord%' or
name like '%lord of%' or
name like '%of rings%' or
name like '%rings return%' or
name like '%return of%' or
name like '%of king%'


So will show all lines... the question now is which is best 'ranking' ...
However you all help me so much , THANKS SO MUCH!!!
(now I won't say bad about the constructor of SpellChecker)

------=_Part_20949_24522010.1207676814185--

From java-user-return-33533-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 08 18:04:12 2008
Return-Path: <java-user-return-33533-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53851 invoked from network); 8 Apr 2008 18:04:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Apr 2008 18:04:11 -0000
Received: (qmail 299 invoked by uid 500); 8 Apr 2008 18:04:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 271 invoked by uid 500); 8 Apr 2008 18:04:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 256 invoked by uid 99); 8 Apr 2008 18:04:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Apr 2008 11:04:03 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [212.27.42.28] (HELO smtp2-g19.free.fr) (212.27.42.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Apr 2008 18:03:20 +0000
Received: from smtp2-g19.free.fr (localhost.localdomain [127.0.0.1])
	by smtp2-g19.free.fr (Postfix) with ESMTP id B618612BF88
	for <java-user@lucene.apache.org>; Tue,  8 Apr 2008 20:03:29 +0200 (CEST)
Received: from [192.168.1.100] (ze.garambrogne.net [82.227.122.98])
	by smtp2-g19.free.fr (Postfix) with ESMTP id EB41912BAE8
	for <java-user@lucene.apache.org>; Tue,  8 Apr 2008 20:03:28 +0200 (CEST)
Message-Id: <5B6BDBCC-C840-41C2-9BEE-34B4A6A44124@garambrogne.net>
From: Mathieu Lecarme <mathieu@garambrogne.net>
To: java-user@lucene.apache.org
In-Reply-To: <5d3ac70804081046o2110a24ag84106acd5d8dddd8@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: Questions about use of SpellChecker: Constructor and Simillarity...
Date: Tue, 8 Apr 2008 20:03:27 +0200
References: <16559731.post@talk.nabble.com> <47FB9E8C.2000702@gmail.com> <5d3ac70804080950y33c34146ldec554f54ee2aec8@mail.gmail.com> <47FBAA16.3040203@gmail.com> <5d3ac70804081028x42bfd8f4m41418243beba5f3c@mail.gmail.com> <47FBAC28.4000500@gmail.com> <5d3ac70804081046o2110a24ag84106acd5d8dddd8@mail.gmail.com>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org

>> I'm cool :) I just think you are overcomplicating things.
>>
>>
> Yes... I can use two words and OR
> Suposse I query on this
>
> The Lord of Rings: Return of King
> The Lord of Rings: Fellowship
> The Lord of Rings: The Two towers
> The Lord of Weapons
> The Lord of War
>
> Suposse an user search: "The Lord of Rings Return of King"
> WHERE
> name like '%the lord%' or
> name like '%lord of%' or
> name like '%of rings%' or
> name like '%rings return%' or
> name like '%return of%' or
> name like '%of king%'
Lucen syntax is more pretty.
With movie title indexed as "title", with LowerCaseFilter.


BooleanQuery bq = new BooleanQuery();
bd.add(new TermQuery(new Term("title", "the lord")), Occur.SHOULD);
bd.add(new TermQuery(new Term("title", "lord of")), Occur.SHOULD);
bd.add(new TermQuery(new Term("title", "of rings")), Occur.SHOULD);
bd.add(new TermQuery(new Term("title", "rings return")), Occur.SHOULD);
bd.add(new TermQuery(new Term("title", "return of")), Occur.SHOULD);
bd.add(new TermQuery(new Term("title", "of king")), Occur.SHOULD);

> So will show all lines... the question now is which is best  
> 'ranking' ...
> However you all help me so much , THANKS SO MUCH!!!
> (now I won't say bad about the constructor of SpellChecker)
most word matched, the better score you have.
You should use a thresold (number of common words/word size) or  
something like that to exclude to far title.

M.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33534-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 08 18:15:49 2008
Return-Path: <java-user-return-33534-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57538 invoked from network); 8 Apr 2008 18:15:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Apr 2008 18:15:49 -0000
Received: (qmail 18906 invoked by uid 500); 8 Apr 2008 18:15:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17993 invoked by uid 500); 8 Apr 2008 18:15:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17982 invoked by uid 99); 8 Apr 2008 18:15:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Apr 2008 11:15:42 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of angel@vlex.com designates 64.233.170.184 as permitted sender)
Received: from [64.233.170.184] (HELO rn-out-0910.google.com) (64.233.170.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Apr 2008 18:15:00 +0000
Received: by rn-out-0910.google.com with SMTP id a46so2599754rne.9
        for <java-user@lucene.apache.org>; Tue, 08 Apr 2008 11:15:12 -0700 (PDT)
Received: by 10.114.148.1 with SMTP id v1mr1816038wad.214.1207678511529;
        Tue, 08 Apr 2008 11:15:11 -0700 (PDT)
Received: by 10.114.167.17 with HTTP; Tue, 8 Apr 2008 11:15:11 -0700 (PDT)
Message-ID: <ee184d5b0804081115s18640028r15065708f9bc1cbb@mail.gmail.com>
Date: Tue, 8 Apr 2008 20:15:11 +0200
From: "Angel Faus" <angel@vlex.com>
To: java-user@lucene.apache.org
Subject: FieldCache performance
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I have a puzzling question about FieldCache; we use FieldCache to
speed up faceted search [just like solr does] and also to avoid
creating Document instances when listing results. It works great, but
for one field where performance is awful: on the order of 15-30
seconds for one index, and can grow to hundreds of seconds when using
MultiReader.

There are two things that surprise me:

  1. -  calling FieldCache.DEFAULT.getInts takes a lot longer on a
certain field ("vid") than on all the others.
 2. - when querying different indexes, the time is not proportional to
the number of documents, or to the number of distinct values of this
field

The code involved is quite simple:

        cache_fuente =
org.apache.lucene.search.FieldCache.DEFAULT.getInts(reader, "fuente");
        cache_vid =
org.apache.lucene.search.FieldCache.DEFAULT.getInts(reader, "vid");

So, for example, when querying our index INDEX-2 (1,634,330 documents)
computing cache_fuente takes 0.10 seconds, computing cache_vid takes
6.60 sec. The difference is a 67x factor.

Both fields are integers, "vid" is larger but not that much [on
average 7.9 digits vs 3.5 digits for "fuente"] and both are stored as
non-tokenized fields [Keywords].

It turns out that INDEX-2 is the best case: when querying INDEX-6
[963,863 documents] the time it takes to compute cache_vid jumps to
16.85 seconds. Other indices take 30,49 seconds, 7,32 seconds, 45.12
seconds, etc.

This variation between indices is not related to the number of
documents nor to the number of distinct values ["vid" is always a
unique field]. I can provide detalied data if it's useful.

And now to the second puzzling point, when querying a MultiReader of
INDEX-2 & INDEX-6 together, the time to compute "cache_vid" jumps to
61.9 seconds. So, it is not additive (remember that separately this
indices take 16.86 + 6.60 = 23.45 seconds)

I've read the source code searching for a clue but with no success. I
would really appreciate if anyone could help me understand what drives
FieldCache performance.

"top" shows that all this time it takes to build cache_vid is spent
using CPU cycles, so I thought it could be parsing-related, but
switching to FieldCache.DEFAULT.getStrings does not help at all.

Finally: we are using lucene-core-2.1.0 for querying, and the search
is served through a servlet in a tomcat process. The index is created
using lucene-1.4.3; i don't know if the difference in versions can
matter.

Thanks in advance for any help,


Angel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33535-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 08 22:00:04 2008
Return-Path: <java-user-return-33535-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72139 invoked from network); 8 Apr 2008 22:00:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Apr 2008 22:00:04 -0000
Received: (qmail 34240 invoked by uid 500); 8 Apr 2008 21:59:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34205 invoked by uid 500); 8 Apr 2008 21:59:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34189 invoked by uid 99); 8 Apr 2008 21:59:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Apr 2008 14:59:58 -0700
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=MSGID_FROM_MTA_HEADER,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of atamer@sympatico.ca designates 65.54.246.239 as permitted sender)
Received: from [65.54.246.239] (HELO bay0-omc3-s39.bay0.hotmail.com) (65.54.246.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Apr 2008 21:59:14 +0000
Received: from BAYC1-PASMTP07 ([65.54.191.167]) by bay0-omc3-s39.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Tue, 8 Apr 2008 14:59:26 -0700
X-Originating-IP: [209.167.138.140]
X-Originating-Email: [atamer@sympatico.ca]
Message-ID: <BAYC1-PASMTP0766AC7F31E8BC9EA6C548BFF20@CEZ.ICE>
Received: from ATAMER ([209.167.138.140]) by BAYC1-PASMTP07.CEZ.ICE over TLS secured channel with Microsoft SMTPSVC(6.0.3790.2668);
	 Tue, 8 Apr 2008 14:59:26 -0700
From: "Allen Atamer" <atamer@sympatico.ca>
To: <java-user@lucene.apache.org>
References: <1207691476.26917.ezmlm@lucene.apache.org>
Subject: designing a dictionary filter with multiple word entries
Date: Tue, 8 Apr 2008 17:59:24 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="windows-1250"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <1207691476.26917.ezmlm@lucene.apache.org>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
Thread-Index: AciZwq56lMw3qXVwQpCq7zbVm6u/HAAAEKTA
X-OriginalArrivalTime: 08 Apr 2008 21:59:26.0182 (UTC) FILETIME=[CFAAF860:01C899C3]
X-Virus-Checked: Checked by ClamAV on apache.org

My dictionary filter currently implements next() and everything works well
when dictionary entries are replaced one-to-one. For example:   Can =>
Canada. 

A problem arises when I try to replace it with more than one word. Going
through next() I encounter "shutdown".  But the dictionary entry takes
Shutdown => shut down (two words). I construct a replacement term according
the to the instructions in the Javadoc, but the search does not match any
substrings "shut" or "down" in my database. I debugged it and found
QueryParser is converting my replaced text into PhraseQuery objects instead
of BooleanQuery objects.

My code to replace the string is below:

		Token teachToken = new Token();
		teachToken.resizeTermBuffer(replacementTerm.length());
		
		char [] termBuffer = teachToken.termBuffer();
		for (int i = 0; i < replacementTerm.length(); i++) {
			termBuffer[i] = replacementTerm.charAt(i);
		}
		teachToken.setTermLength(replacementTerm.length());
		this.tokenQueue.push(teachToken);
		return teachToken;

Instead of [field1]:shut down, it is searching with [field1]:"shut down".

How can I construct the replacement terms so that queries are formed
properly, and I don't violate the next() contract?

Thanks a bunch!
Allen

No virus found in this outgoing message.
Checked by AVG. 
Version: 7.5.519 / Virus Database: 269.22.9/1365 - Release Date: 4/8/2008
7:30 AM
 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33536-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 09 06:27:39 2008
Return-Path: <java-user-return-33536-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22198 invoked from network); 9 Apr 2008 06:27:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Apr 2008 06:27:38 -0000
Received: (qmail 53052 invoked by uid 500); 9 Apr 2008 06:27:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53023 invoked by uid 500); 9 Apr 2008 06:27:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53007 invoked by uid 99); 9 Apr 2008 06:27:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Apr 2008 23:27:33 -0700
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Apr 2008 06:26:50 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JjTlu-0002SD-Jf
	for java-user@lucene.apache.org; Tue, 08 Apr 2008 23:27:02 -0700
Message-ID: <16580375.post@talk.nabble.com>
Date: Tue, 8 Apr 2008 23:27:02 -0700 (PDT)
From: savageboy <eingmarra@hotmail.com>
To: java-user@lucene.apache.org
Subject: Fetches the hits very slow (when the date sorting) !
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: eingmarra@hotmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hello everyone,
I have made a search project by use of Lucene2.0
But when I use date sorting, the server is running very slow for the result
getting(about 3 sec but I dont sort the results the time of it is about
0.019 sec, there are 110000 results to be hit).

document.add(new Field(docFieldName, StringUtils.defaultIfEmpty(contentStr,
""), storeFlag , tokenizeFlag));

storeFlag is true
tokenizeFlag is false

so it means the Field dateTime should be stored and be not tokenized!

If you have some idea about this issue I met, plz let me know!
Thanks a lot and best Regards!


-- 
View this message in context: http://www.nabble.com/Fetches-the-hits-very-slow-%28when-the-date-sorting%29-%21-tp16580375p16580375.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33537-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 09 07:43:07 2008
Return-Path: <java-user-return-33537-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57333 invoked from network); 9 Apr 2008 07:43:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Apr 2008 07:43:06 -0000
Received: (qmail 47989 invoked by uid 500); 9 Apr 2008 07:43:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47943 invoked by uid 500); 9 Apr 2008 07:43:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47905 invoked by uid 99); 9 Apr 2008 07:43:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Apr 2008 00:43:03 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [213.162.48.15] (HELO soufre.accelance.net) (213.162.48.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Apr 2008 07:42:17 +0000
Received: from [192.168.3.105] (LSt-Amand-152-32-31-90.w82-127.abo.wanadoo.fr [82.127.74.90])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by soufre.accelance.net (Postfix) with ESMTP id 3BB7E451C5
	for <java-user@lucene.apache.org>; Wed,  9 Apr 2008 09:42:27 +0200 (CEST)
Message-ID: <47FC7361.5070601@garambrogne.net>
Date: Wed, 09 Apr 2008 09:42:25 +0200
From: Mathieu Lecarme <mathieu@garambrogne.net>
User-Agent: Thunderbird 2.0.0.12 (X11/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: designing a dictionary filter with multiple word entries
References: <1207691476.26917.ezmlm@lucene.apache.org> <BAYC1-PASMTP0766AC7F31E8BC9EA6C548BFF20@CEZ.ICE>
In-Reply-To: <BAYC1-PASMTP0766AC7F31E8BC9EA6C548BFF20@CEZ.ICE>
X-Enigmail-Version: 0.95.6
Content-Type: text/plain; charset=windows-1250; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Allen Atamer a crit :
> My dictionary filter currently implements next() and everything works well
> when dictionary entries are replaced one-to-one. For example:   Can =>
> Canada. 
>
> A problem arises when I try to replace it with more than one word. Going
> through next() I encounter "shutdown".  But the dictionary entry takes
> Shutdown => shut down (two words). I construct a replacement term according
> the to the instructions in the Javadoc, but the search does not match any
> substrings "shut" or "down" in my database. I debugged it and found
> QueryParser is converting my replaced text into PhraseQuery objects instead
> of BooleanQuery objects.
>
> My code to replace the string is below:
>
> 		Token teachToken = new Token();
> 		teachToken.resizeTermBuffer(replacementTerm.length());
> 		
> 		char [] termBuffer = teachToken.termBuffer();
> 		for (int i = 0; i < replacementTerm.length(); i++) {
> 			termBuffer[i] = replacementTerm.charAt(i);
> 		}
> 		teachToken.setTermLength(replacementTerm.length());
> 		this.tokenQueue.push(teachToken);
> 		return teachToken;
>
> Instead of [field1]:shut down, it is searching with [field1]:"shut down".
>
> How can I construct the replacement terms so that queries are formed
> properly, and I don't violate the next() contract?
>   
use a private stack. When you replace a word, fill it, and the next() 
will pop your stack. When the stack is empty, feed it again. So first 
time next() will get "shut", and second time "down".

M.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33538-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 09 13:39:37 2008
Return-Path: <java-user-return-33538-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85279 invoked from network); 9 Apr 2008 13:39:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Apr 2008 13:39:37 -0000
Received: (qmail 72566 invoked by uid 500); 9 Apr 2008 13:39:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72525 invoked by uid 500); 9 Apr 2008 13:39:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72496 invoked by uid 99); 9 Apr 2008 13:39:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Apr 2008 06:39:28 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.134.189 as permitted sender)
Received: from [209.85.134.189] (HELO mu-out-0910.google.com) (209.85.134.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Apr 2008 13:38:42 +0000
Received: by mu-out-0910.google.com with SMTP id g7so3882467muf.0
        for <java-user@lucene.apache.org>; Wed, 09 Apr 2008 06:38:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=+W4u2+1Wvb1MfI98uqHzw4qZsRvuFqaKwJgnDG4z/YU=;
        b=diG9h7btv/3is9KHvlU0oIT027O6UYHYL18DdTwnnffzU/rXk0g/n17LhyOd17vdZPacdEfTRS+UoJESxj6ON6DhZ2gm14xYOZC3u65LwrAAJmYDFV/QKhP61YSIIcT4/QTKMtk5uM6I7FWaBT7Ubul8/oXIO34PsPAhI1fWq8Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=adUfeMmdl9KL1RdYozd3zzTg9Hvz4m53jjHOgj0Ank9yYotVi9wiNPNMOa3cLJDViZVI+aH+EkuhyAHM1vNmBDpmySYhqv0cNj2glfZbpVIXtE5ugQuIzphErdmb6BKfnCpk8I8YQjrsHhPADvJXF+zgckwTkIycoWWYxejlksY=
Received: by 10.82.139.20 with SMTP id m20mr235535bud.16.1207747917161;
        Wed, 09 Apr 2008 06:31:57 -0700 (PDT)
Received: by 10.82.191.6 with HTTP; Wed, 9 Apr 2008 06:31:57 -0700 (PDT)
Message-ID: <359a92830804090631x312631e1y74e202b2a4173155@mail.gmail.com>
Date: Wed, 9 Apr 2008 09:31:57 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Fetches the hits very slow (when the date sorting) !
In-Reply-To: <16580375.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9452_21548099.1207747917187"
References: <16580375.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9452_21548099.1207747917187
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

This has been discussed many times on the list, you'd find a wealth
of information if you searched the mail archive.

The problem usually is that you've stored your dates with fine
resolution. Sorting is dependent on the number of terms, and
if you store millisecond resolution you'll obviously have waaaaaay
more terms than if you store second resolution. Day resolution is
even better.

Also your first sort takes much longer than subsequent sorts since
various caches aren't filled until needed. So be sure you're measuring
response times after a few sorted queries have happened.

Best
Erick

On Wed, Apr 9, 2008 at 2:27 AM, savageboy <eingmarra@hotmail.com> wrote:

>
> Hello everyone,
> I have made a search project by use of Lucene2.0
> But when I use date sorting, the server is running very slow for the
> result
> getting(about 3 sec but I dont sort the results the time of it is about
> 0.019 sec, there are 110000 results to be hit).
>
> document.add(new Field(docFieldName,
> StringUtils.defaultIfEmpty(contentStr,
> ""), storeFlag , tokenizeFlag));
>
> storeFlag is true
> tokenizeFlag is false
>
> so it means the Field dateTime should be stored and be not tokenized!
>
> If you have some idea about this issue I met, plz let me know!
> Thanks a lot and best Regards!
>
>
> --
> View this message in context:
> http://www.nabble.com/Fetches-the-hits-very-slow-%28when-the-date-sorting%29-%21-tp16580375p16580375.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_9452_21548099.1207747917187--

From java-user-return-33539-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 09 16:49:27 2008
Return-Path: <java-user-return-33539-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16202 invoked from network); 9 Apr 2008 16:49:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Apr 2008 16:49:27 -0000
Received: (qmail 11875 invoked by uid 500); 9 Apr 2008 16:49:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11842 invoked by uid 500); 9 Apr 2008 16:49:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11831 invoked by uid 99); 9 Apr 2008 16:49:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Apr 2008 09:49:20 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of wojtekh2@gmail.com designates 209.85.132.251 as permitted sender)
Received: from [209.85.132.251] (HELO an-out-0708.google.com) (209.85.132.251)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Apr 2008 16:48:39 +0000
Received: by an-out-0708.google.com with SMTP id c5so654452anc.49
        for <java-user@lucene.apache.org>; Wed, 09 Apr 2008 09:48:52 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        bh=QF/xYKh0gAe+3bOdZEV46ApeaCbg0wkaZ4HJ72UHgR8=;
        b=XNwKg86V2yKc8ygCu0UCgUTHG3XaZ/XVPVXSRr0PtjaeifEQkNh5hb9tB9NNvgTefZC+tlHacScBm437EVSBP50kb2g1Aizt0ZbA0D7yhzCp+ogUuuCRYSdDuJAxZGuPip8WP9rbdIErr9aNGR6xFf5nsVTxprPmyCNApCeVwsY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=tWGGNro/Z1HenKVGKHSHTBk+QN05iH5zR6k5/okA7AG7xpiEdN/xhl2alSv1p7dqp9b5Ngjk5UhumPJBlvc6ccEUYET9VJQ1dxbRnu3AgCdD26CjcC3sLDXXgRN10CQo/WJrfR435TkVm71YJ/4MkWOLECq+eF0HW0q40nCjGjo=
Received: by 10.100.132.2 with SMTP id f2mr538783and.129.1207759730711;
        Wed, 09 Apr 2008 09:48:50 -0700 (PDT)
Received: by 10.100.229.4 with HTTP; Wed, 9 Apr 2008 09:48:50 -0700 (PDT)
Message-ID: <329a6c830804090948p75e5a954ka17b4debdd9d148f@mail.gmail.com>
Date: Wed, 9 Apr 2008 18:48:50 +0200
From: "Wojtek H" <wojtekh2@gmail.com>
To: java-user@lucene.apache.org
Subject: Document ids in Lucene index
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,
I am wondering if there are possible "holes" in set of index documents
ids. Being more specific - is it possible that there exist integer i
between 0 and IndexReader.maxDoc() such that
reader.document(i) == null
and
reader.isDeleted(i)==false
???

Regards,
wojtek

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33540-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 09 21:32:38 2008
Return-Path: <java-user-return-33540-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67990 invoked from network); 9 Apr 2008 21:32:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Apr 2008 21:32:38 -0000
Received: (qmail 93613 invoked by uid 500); 9 Apr 2008 21:32:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93577 invoked by uid 500); 9 Apr 2008 21:32:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93534 invoked by uid 99); 9 Apr 2008 21:32:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Apr 2008 14:32:28 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [192.115.188.199] (HELO out4.bezeqint.net) (192.115.188.199)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Apr 2008 21:31:44 +0000
Received: from your0548c161e1 (unknown [80.250.149.60])
	by out4.bezeqint.net (Postfix) with ESMTPA id 0A9A9B083F5
	for <java-user@lucene.apache.org>; Thu, 10 Apr 2008 00:28:20 +0300 (IDT)
From: "Itamar Syn-Hershko" <itamar@divrei-tora.com>
To: <java-user@lucene.apache.org>
Subject: RE: Why Lucene has to rewrite queries prior to actual searching?
Date: Thu, 10 Apr 2008 00:31:38 +0300
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
Thread-Index: AciZiNsR5w7ElZZHStqqFQTGcD9wHwA+60KQ
In-Reply-To: <200804081656.35643.paul.elschot@xs4all.nl>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
Message-Id: <20080409212821.0A9A9B083F5@out4.bezeqint.net>
X-Virus-Checked: Checked by ClamAV on apache.org


>> When it is known in advance that "w?rd" and "wor*" will be used in
queries a lot, one can write a tokenizer that indexes them so that they can
be searched directly.

No, that was not at all what I tried to suggest. I will try to explain
better, please try to be open-minded :)

Lucene accesses the index files in some way upon searching to get the data
for the requested term(s) - documents and fields it appears in, along with
position and frequency data. This is called TermInfo -- according to
http://lucene.apache.org/java/docs/fileformats.html#Term%20Dictionary. I'm
not sure how that part of Lucene is named, but what I'm proposing is related
to it and it only.

Instead of receiving "word", "foo" and "bar" from a query, and looking for
the TermInfo for each of those terms by just comparing TermInfo.Term to the
term from the query, this part of Lucene should be smarter to know how to
handle wildcards or even regex, so if "foo*" is received from the query, it
will start with retieving the TermInfo for just "foo", and then will
continue and add up more and more TermInfo structure to its cache (or
whatever else it does with them) until the pattern will no longer match. The
idea is to consider each word that matches the pattern relevant, instead of
doing a simple character comparison on the terms, and all this directly
against the index files and terms list/info.
I'm aware that this would be a bit tougher to write for mid-word wildcards
(or RegEx) unlike "prefixes", but it is possible and still better than
rewriting a query.

Obviously, queries sent to this searcher will have to pass a lighter
QueryParser, so they keep their wildcards.

This has obvious speed, accuracy, and simplicity gain. As I mentioned
before, it should be offered as another tool for searches - the original
searcher may still be required by other search methods.

Please let me know if this makes more sense now (or not...)

Itamar. 

-----Original Message-----
From: Paul Elschot [mailto:paul.elschot@xs4all.nl] 
Sent: Tuesday, April 08, 2008 5:57 PM
To: java-user@lucene.apache.org
Subject: Re: Why Lucene has to rewrite queries prior to actual searching?

Op Tuesday 08 April 2008 15:18:34 schreef Itamar Syn-Hershko:
> Paul,
>
> I don't see how this answers the question. 

Towards the end, the page describes when a Scorer is called and roughly what
it does.

> I was asking why Lucene
> has to access the index with exact terms, and not use RegEx or simpler 
> wildcards support internally? If Lucene will be able to look for 
> "w?rd" or "wor*" and treat the wildcards as wildcards, this will 
> greatly improve speed of searches and will eliminate the need for 
> Query rewriting.

When it is known in advance that "w?rd" and "wor*" will be used in queries a
lot, one can write a tokenizer that indexes them so that they can be
searched directly.
The problem is to know that in advance, that is at indexing time.

> Since some people may want to index chars like those used in 
> wildcards, they could be escaped (or, those people will use the 
> standard search classes available today instead). I'm not entirely 
> sure what part of Lucene does the actual access to the terms and 
> position vectors, but if it could be sub-classed or cloned, and then 
> modified to honor wildcards or even RegEx, that would bring Lucene to 
> new heights.

There are regular expression queries in the regex contrib module, however
these work by rewriting to actually indexed terms.

> Unless, again, there is a specific reason why this can't be done.

There is no specific reason why it cannot be done, one only needs to provide
the corresponding tokenizer to be used at indexing time.

Kind regards,
Paul Elschot


>
> Itamar.
>
> -----Original Message-----
> From: Paul Elschot [mailto:paul.elschot@xs4all.nl]
> Sent: Tuesday, April 08, 2008 1:56 AM
> To: java-user@lucene.apache.org
> Subject: Re: Why Lucene has to rewrite queries prior to actual 
> searching?
>
> Itamar,
>
> Have a look here:
> http://lucene.apache.org/java/2_3_1/scoring.html
>
> Regards,
> Paul Elschot
>
> Op Tuesday 08 April 2008 00:34:48 schreef Itamar Syn-Hershko:
> > Paul and John,
> >
> > Thanks for your quick reply.
> >
> > The problem with query rewriting is the beforementioned 
> > MaxClauseException. Instead of inflating the query and passing a 
> > deterministic list of terms to the actual search routine, Lucene 
> > could have accessed the vectors in the index using some sort of 
> > filter. So, for example, if it knows to access "Foobar" by its name 
> > in the index, why can't it take "Foo*" and just get all the vectors 
> > until "Fop" is met (for example). Why does it have to get 
> > deterministic list of terms?
> >
> > I will take a look at the Scorer - can you describe in short what 
> > exactly it does and where and when it is being called?
> >
> > I don't get John's comment though - Query::rewrite is being called 
> > prior to the actual searching (through QueryParser), how come it can 
> > use "information gathered from IndexReader at search time"?
> >
> > Itamar.
> >
> > -----Original Message-----
> > From: Paul Elschot [mailto:paul.elschot@xs4all.nl]
> > Sent: Tuesday, April 08, 2008 12:57 AM
> > To: java-user@lucene.apache.org
> > Subject: Re: Why Lucene has to rewrite queries prior to actual 
> > searching?
> >
> > Itamar,
> >
> > Query rewrite replaces wildcards with terms available from the 
> > index. Usually that involves replacing a wildcard with a 
> > BooleanQuery that is an effective OR over the available terms while 
> > using a flat coordination factor, i.e. it does not matter how many 
> > of the available terms actually match a document, as long as at 
> > least one matches.
> >
> > For the required query parts (AND like), Scorer.skipTo() is used, 
> > and that could well be the filter mechanism you are referring to; 
> > have a look at the javadocs of Scorer, and, if necessary, at the 
> > actual code of ConjunctionScorer.
> >
> > Regards,
> > Paul Elschot
> >
> > Op Monday 07 April 2008 23:13:09 schreef Itamar Syn-Hershko:
> > > Hi all,
> > >
> > > Can someone from the experts here explain why Lucene has to get a 
> > > "rewritten" query for the Searcher - so Phrase or Wildcards 
> > > queries have to rewrite themselves into a "primitive" query, that 
> > > is then passed to Lucene to look for? I'm probably not familiar 
> > > too much with the internals of Lucene, but I'd imagine that if you 
> > > can inflate a query using wildcards via xxxxQuery sub classing, 
> > > you could as easily (?) have some sort of Filter mechanism during 
> > > the search, so that Lucene retrieves the Position vectors for all 
> > > the terms that pass that filter, instead of retrieving only the 
> > > position data for deterministic terms (with no wildcards etc.). If 
> > > that was possible to do somehow, it could greatly increase the 
> > > searchability of Lucene indices by using RegEx (without re-writing 
> > > and getting the dreaded MaxClauseCount error) and similar.
> > >
> > > Would love to hear some insights on this one.
> > >
> > > Itamar.
> >
> > -------------------------------------------------------------------
> >-- To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> >
> >
> > -------------------------------------------------------------------
> >-- To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33541-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 10 01:05:49 2008
Return-Path: <java-user-return-33541-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75817 invoked from network); 10 Apr 2008 01:05:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Apr 2008 01:05:49 -0000
Received: (qmail 19630 invoked by uid 500); 10 Apr 2008 01:05:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19604 invoked by uid 500); 10 Apr 2008 01:05:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19593 invoked by uid 99); 10 Apr 2008 01:05:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Apr 2008 18:05:42 -0700
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Apr 2008 01:04:51 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JjlDz-00053r-A6
	for java-user@lucene.apache.org; Wed, 09 Apr 2008 18:05:11 -0700
Message-ID: <16599703.post@talk.nabble.com>
Date: Wed, 9 Apr 2008 18:05:11 -0700 (PDT)
From: savageboy <eingmarra@hotmail.com>
To: java-user@lucene.apache.org
Subject: Re: Fetches the hits very slow (when the date sorting) !
In-Reply-To: <359a92830804090631x312631e1y74e202b2a4173155@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: eingmarra@hotmail.com
References: <16580375.post@talk.nabble.com> <359a92830804090631x312631e1y74e202b2a4173155@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Yes, I found it is because the index-files are bad, it is not because of the
time-resolution( my resolution is yyyy-MM-ddHH:mm:ss, as I work for a
newspaper group-company, so the time of news pulishing must be more accurate
than normal use!)
But now the time sorting is alright! 
I can sorting the 110000 results by time in 0.02 secends!
Thank you for your response!




Erick Erickson wrote:
> 
> This has been discussed many times on the list, you'd find a wealth
> of information if you searched the mail archive.
> 
> The problem usually is that you've stored your dates with fine
> resolution. Sorting is dependent on the number of terms, and
> if you store millisecond resolution you'll obviously have waaaaaay
> more terms than if you store second resolution. Day resolution is
> even better.
> 
> Also your first sort takes much longer than subsequent sorts since
> various caches aren't filled until needed. So be sure you're measuring
> response times after a few sorted queries have happened.
> 
> Best
> Erick
> 
> On Wed, Apr 9, 2008 at 2:27 AM, savageboy <eingmarra@hotmail.com> wrote:
> 
>>
>> Hello everyone,
>> I have made a search project by use of Lucene2.0
>> But when I use date sorting, the server is running very slow for the
>> result
>> getting(about 3 sec but I dont sort the results the time of it is about
>> 0.019 sec, there are 110000 results to be hit).
>>
>> document.add(new Field(docFieldName,
>> StringUtils.defaultIfEmpty(contentStr,
>> ""), storeFlag , tokenizeFlag));
>>
>> storeFlag is true
>> tokenizeFlag is false
>>
>> so it means the Field dateTime should be stored and be not tokenized!
>>
>> If you have some idea about this issue I met, plz let me know!
>> Thanks a lot and best Regards!
>>
>>
>> --
>> View this message in context:
>> http://www.nabble.com/Fetches-the-hits-very-slow-%28when-the-date-sorting%29-%21-tp16580375p16580375.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/Fetches-the-hits-very-slow-%28when-the-date-sorting%29-%21-tp16580375p16599703.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33542-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 10 01:10:59 2008
Return-Path: <java-user-return-33542-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78696 invoked from network); 10 Apr 2008 01:10:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Apr 2008 01:10:58 -0000
Received: (qmail 26161 invoked by uid 500); 10 Apr 2008 01:10:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26126 invoked by uid 500); 10 Apr 2008 01:10:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26111 invoked by uid 99); 10 Apr 2008 01:10:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Apr 2008 18:10:52 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.49.248] (HELO web52001.mail.re2.yahoo.com) (206.190.49.248)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 10 Apr 2008 01:10:08 +0000
Received: (qmail 43563 invoked by uid 60001); 10 Apr 2008 01:10:19 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=17zmZl9+E6nNwSKLKWb5fViU4vtkYmouRFTX8bCzEM+xiQDP3Xw613pvPd738R+bECpO+ymKuM+IEo4LNyU1VeHMUMQI9r/64EgFKKbpUN3LcODozXmmpynCWnSqKsZCWUDUKZE/k8ioJLC1/YzfHl0pNPsYOMM1z3etd6ZtEO8=;
X-YMail-OSG: qIQa.UgVM1ldlrWXsa1dlvxsUUnxPh9v5ssZv5rl2eLS.zZ.BgSP2rS09px5dI5n72UbJukYprCRQ6nbE4maxNS6ewwtdiPhHN3yQFfU8IYFoDx5zM7hpqzCDrhXqhXJl8MpNMsTHskWZ5X_96mojY1n
Received: from [12.162.3.126] by web52001.mail.re2.yahoo.com via HTTP; Wed, 09 Apr 2008 18:10:19 PDT
Date: Wed, 9 Apr 2008 18:10:19 -0700 (PDT)
From: Rajesh parab <rajesh_parab_1@yahoo.com>
Subject: Re: Lucene 2.3.0 and NFS
To: java-user@lucene.apache.org
In-Reply-To: <233725.22487.qm@web52003.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
Message-ID: <243333.43199.qm@web52001.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi All,

Has anyone used rsync or similar utilities on Windows
OS to replicate Lucene index across multiple machines?

Any pointers on it will be very useful?

Regards,
Rajesh

--- Rajesh parab <rajesh_parab_1@yahoo.com> wrote:

> Hi Michael,
> 
> Thanks a lot for your suggestions.
> 
> I was looking at rsync; as per this link
> (http://samba.anu.edu.au/rsync/features.html), rsync
> is a file transfer program for UNIX. Is there rsync
> support for Windows as well? I found few rsync
> programs that works for Windows, but I am not sure
> if
> they will server the purpose. Has anyone using rsync
> on Windows?
> 
> Regards,
> Rajesh
> 
> --- Michael McCandless <lucene@mikemccandless.com>
> wrote:
> 
> > 
> > Rajesh parab wrote:
> > > Hi,
> > >
> > > We are currently using Lucene 2.0 for full-text
> > > searches within our enterprise application,
> which
> > can
> > > be deployed in clustered environment. We
> generate
> > > Lucene index for data stored inside relational
> > > database.
> > >
> > > As Lucene 2.0 did not have solid NFS support and
> > as we
> > > wanted Lucene based searches to work properly in
> > > Clustered environment, we had decided on
> following
> > > approach:
> > > 1. The index generation happens on a machine
> > (could be
> > > one of the cluster nodes or a separate machine)
> > and
> > > once the Lucene index is generated, we copy all
> > the
> > > index files to the database.
> > 
> > Note that you can do also incremental replication:
> > often, the Lucene  
> > index changes in minor ways (eg a single new
> segment
> > is flushed and a  
> > new segments_N and segments.gen is written) so you
> > should only sync  
> > the files that are new (and remove the ones that
> are
> > now gone).   
> > Lucene's write-once approach makes this very
> simple
> > (you just have to  
> > compare file names, not the contents of each
> file).
> > 
> > It's also possible to replicate without using a
> DB. 
> > EG rsync does a  
> > great job.
> > 
> > > 2. The index search request on each cluster node
> > > retrieves the index files from database (during
> > first
> > > search or after index update), copies to the
> file
> > > system and use it for searches.
> > > 3. Thus, each cluster node has its own copy of
> the
> > > index and it keeps on picking up latest version
> if
> > it
> > > is available inside database.
> > >
> > > This has worked fine for us till now, though we
> > will
> > > not be able continue with this model in future
> as
> > we
> > > want to support Lucene based searches across our
> > > application and also want to index large
> > components
> > > inside our application like Wiki, forums, etc.
> As
> > the
> > > index will grow, storing and retrieving index
> > files
> > > from database will not be an efficient
> operation.
> > >
> > > My questions are:
> > > - Will we be able to use NFS if we move to
> Lucene
> > > 2.3.0?
> > 
> > Make sure you update to 2.3.1, not 2.3.0.
> > 
> > > - Will there be any significant performance
> impact
> > on
> > > index generation and searches if we move to NFS?
> > > - Is Lucene + NFS combination supported for all
> > > operating systems? (We support Windows, Solaris,
> > AIX,
> > > HP-UX, Red Hat Linux)
> > 
> > NFS *should* work, however:
> > 
> >    * It's not widely used, so, test thoroughly in
> > your particular setup.
> > 
> >    * Most likely to work is if you use a single
> > machine writing to  
> > the index, and many readers.
> > 
> >    * Performance is likely not great, especially
> on
> > searching, but  
> > you should test in your specific situation.
> > 
> > > - Is there any other alternative available other
> > than
> > > NFS?
> > >
> > 
> > It's also possible to replicate without using a
> DB. 
> > EG rsync does  
> > agreat job.
> > 
> > You should look at Solr, since it already has all
> > the infrastructure  
> > toaccept updates, replicate index changes to
> remote
> > machines, etc.
> > 
> > > I will really appreciate your comments/thoughts
> on
> > > this topic.
> > >
> > > Regards,
> > > Rajesh
> > >
> > >
> > >        
> > >
> >
>
______________________________________________________________________
> > 
> > > ______________
> > > You rock. That's why Blockbuster's offering you
> > one month of  
> > > Blockbuster Total Access, No Cost.
> > >
> http://tc.deals.yahoo.com/tc/blockbuster/text5.com
> > >
> > >
> >
>
---------------------------------------------------------------------
> > > To unsubscribe, e-mail:
> > java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail:
> > java-user-help@lucene.apache.org
> > >
> > 
> > 
> >
>
---------------------------------------------------------------------
> > To unsubscribe, e-mail:
> > java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail:
> > java-user-help@lucene.apache.org
> > 
> > 
> 
> 
> 
>      
>
____________________________________________________________________________________
> You rock. That's why Blockbuster's offering you one
> month of Blockbuster Total Access, No Cost.  
> http://tc.deals.yahoo.com/tc/blockbuster/text5.com
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33543-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 10 01:41:59 2008
Return-Path: <java-user-return-33543-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97540 invoked from network); 10 Apr 2008 01:41:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Apr 2008 01:41:59 -0000
Received: (qmail 56975 invoked by uid 500); 10 Apr 2008 01:41:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56942 invoked by uid 500); 10 Apr 2008 01:41:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56931 invoked by uid 99); 10 Apr 2008 01:41:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Apr 2008 18:41:52 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cedric.ho@gmail.com designates 209.85.162.178 as permitted sender)
Received: from [209.85.162.178] (HELO el-out-1112.google.com) (209.85.162.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Apr 2008 01:41:08 +0000
Received: by el-out-1112.google.com with SMTP id y26so2025493ele.4
        for <java-user@lucene.apache.org>; Wed, 09 Apr 2008 18:41:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=sRdVRHtIHXlLJ/mA7+5arp5cdND1jd8nS1+p/YJnm9U=;
        b=MxQ77WPNMf+j4jTQpUBXH7uXj4LyPwmfH9uBeZQQtVmaC3GhD+MRhRtBSS+WhRMJFf1FI9FNulVA58ehRuUaSuAQlOCmNScYGnF6EkAXiwXS4vPEXsxQCBNrJS4zls4jPRWG7OtAGBS8ncqtoneQR3j7fvgN81gHGIHeAnb64VQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=qtsC/cgGack5ENXQX2QIjbFduB70Hr5K1sSAzDgsHIKlq/9poh/xv+KpIHUWkHPL0NoQ7rBWox/nAeAyYmeWdiWxX3P9UtG9ngf4tMT8SIGjsm96B/5gPgpbb5OXngabighyVVdy4uhbtcy7bet/m2lKmM8VgK1eO4F7+VzPBck=
Received: by 10.114.200.2 with SMTP id x2mr1108110waf.143.1207791678655;
        Wed, 09 Apr 2008 18:41:18 -0700 (PDT)
Received: by 10.114.156.18 with HTTP; Wed, 9 Apr 2008 18:41:18 -0700 (PDT)
Message-ID: <839ba01c0804091841u77cf7682t24b7735094920eba@mail.gmail.com>
Date: Thu, 10 Apr 2008 09:41:18 +0800
From: "Cedric Ho" <cedric.ho@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene 2.3.0 and NFS
In-Reply-To: <243333.43199.qm@web52001.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <233725.22487.qm@web52003.mail.re2.yahoo.com>
	 <243333.43199.qm@web52001.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I think cygwin will do the trick.

On Thu, Apr 10, 2008 at 9:10 AM, Rajesh parab <rajesh_parab_1@yahoo.com> wrote:
> Hi All,
>
>  Has anyone used rsync or similar utilities on Windows
>  OS to replicate Lucene index across multiple machines?
>
>  Any pointers on it will be very useful?
>
>  Regards,
>  Rajesh
>
>
>
>  --- Rajesh parab <rajesh_parab_1@yahoo.com> wrote:
>
>  > Hi Michael,
>  >
>  > Thanks a lot for your suggestions.
>  >
>  > I was looking at rsync; as per this link
>  > (http://samba.anu.edu.au/rsync/features.html), rsync
>  > is a file transfer program for UNIX. Is there rsync
>  > support for Windows as well? I found few rsync
>  > programs that works for Windows, but I am not sure
>  > if
>  > they will server the purpose. Has anyone using rsync
>  > on Windows?
>  >
>  > Regards,
>  > Rajesh
>  >
>  > --- Michael McCandless <lucene@mikemccandless.com>
>  > wrote:
>  >
>  > >
>  > > Rajesh parab wrote:
>  > > > Hi,
>  > > >
>  > > > We are currently using Lucene 2.0 for full-text
>  > > > searches within our enterprise application,
>  > which
>  > > can
>  > > > be deployed in clustered environment. We
>  > generate
>  > > > Lucene index for data stored inside relational
>  > > > database.
>  > > >
>  > > > As Lucene 2.0 did not have solid NFS support and
>  > > as we
>  > > > wanted Lucene based searches to work properly in
>  > > > Clustered environment, we had decided on
>  > following
>  > > > approach:
>  > > > 1. The index generation happens on a machine
>  > > (could be
>  > > > one of the cluster nodes or a separate machine)
>  > > and
>  > > > once the Lucene index is generated, we copy all
>  > > the
>  > > > index files to the database.
>  > >
>  > > Note that you can do also incremental replication:
>  > > often, the Lucene
>  > > index changes in minor ways (eg a single new
>  > segment
>  > > is flushed and a
>  > > new segments_N and segments.gen is written) so you
>  > > should only sync
>  > > the files that are new (and remove the ones that
>  > are
>  > > now gone).
>  > > Lucene's write-once approach makes this very
>  > simple
>  > > (you just have to
>  > > compare file names, not the contents of each
>  > file).
>  > >
>  > > It's also possible to replicate without using a
>  > DB.
>  > > EG rsync does a
>  > > great job.
>  > >
>  > > > 2. The index search request on each cluster node
>  > > > retrieves the index files from database (during
>  > > first
>  > > > search or after index update), copies to the
>  > file
>  > > > system and use it for searches.
>  > > > 3. Thus, each cluster node has its own copy of
>  > the
>  > > > index and it keeps on picking up latest version
>  > if
>  > > it
>  > > > is available inside database.
>  > > >
>  > > > This has worked fine for us till now, though we
>  > > will
>  > > > not be able continue with this model in future
>  > as
>  > > we
>  > > > want to support Lucene based searches across our
>  > > > application and also want to index large
>  > > components
>  > > > inside our application like Wiki, forums, etc.
>  > As
>  > > the
>  > > > index will grow, storing and retrieving index
>  > > files
>  > > > from database will not be an efficient
>  > operation.
>  > > >
>  > > > My questions are:
>  > > > - Will we be able to use NFS if we move to
>  > Lucene
>  > > > 2.3.0?
>  > >
>  > > Make sure you update to 2.3.1, not 2.3.0.
>  > >
>  > > > - Will there be any significant performance
>  > impact
>  > > on
>  > > > index generation and searches if we move to NFS?
>  > > > - Is Lucene + NFS combination supported for all
>  > > > operating systems? (We support Windows, Solaris,
>  > > AIX,
>  > > > HP-UX, Red Hat Linux)
>  > >
>  > > NFS *should* work, however:
>  > >
>  > >    * It's not widely used, so, test thoroughly in
>  > > your particular setup.
>  > >
>  > >    * Most likely to work is if you use a single
>  > > machine writing to
>  > > the index, and many readers.
>  > >
>  > >    * Performance is likely not great, especially
>  > on
>  > > searching, but
>  > > you should test in your specific situation.
>  > >
>  > > > - Is there any other alternative available other
>  > > than
>  > > > NFS?
>  > > >
>  > >
>  > > It's also possible to replicate without using a
>  > DB.
>  > > EG rsync does
>  > > agreat job.
>  > >
>  > > You should look at Solr, since it already has all
>  > > the infrastructure
>  > > toaccept updates, replicate index changes to
>  > remote
>  > > machines, etc.
>  > >
>  > > > I will really appreciate your comments/thoughts
>  > on
>  > > > this topic.
>  > > >
>  > > > Regards,
>  > > > Rajesh
>  > > >
>  > > >
>  > > >
>  > > >
>  > >
>  >
>  ______________________________________________________________________
>  > >
>  > > > ______________
>  > > > You rock. That's why Blockbuster's offering you
>  > > one month of
>  > > > Blockbuster Total Access, No Cost.
>  > > >
>  > http://tc.deals.yahoo.com/tc/blockbuster/text5.com
>  > > >
>  > > >
>  > >
>  >
>  ---------------------------------------------------------------------
>  > > > To unsubscribe, e-mail:
>  > > java-user-unsubscribe@lucene.apache.org
>  > > > For additional commands, e-mail:
>  > > java-user-help@lucene.apache.org
>  > > >
>  > >
>  > >
>  > >
>  >
>  ---------------------------------------------------------------------
>  > > To unsubscribe, e-mail:
>  > > java-user-unsubscribe@lucene.apache.org
>  > > For additional commands, e-mail:
>  > > java-user-help@lucene.apache.org
>  > >
>  > >
>  >
>  >
>  >
>  >
>  >
>  ____________________________________________________________________________________
>  > You rock. That's why Blockbuster's offering you one
>  > month of Blockbuster Total Access, No Cost.
>  > http://tc.deals.yahoo.com/tc/blockbuster/text5.com
>  >
>  >
>  ---------------------------------------------------------------------
>  > To unsubscribe, e-mail:
>  > java-user-unsubscribe@lucene.apache.org
>  > For additional commands, e-mail:
>  > java-user-help@lucene.apache.org
>  >
>  >
>
>
>
> __________________________________________________
>  Do You Yahoo!?
>  Tired of spam?  Yahoo! Mail has the best spam protection around
>  http://mail.yahoo.com
>
>
>
>  ---------------------------------------------------------------------
>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33544-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 10 03:18:49 2008
Return-Path: <java-user-return-33544-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30701 invoked from network); 10 Apr 2008 03:18:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Apr 2008 03:18:48 -0000
Received: (qmail 33416 invoked by uid 500); 10 Apr 2008 03:18:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33386 invoked by uid 500); 10 Apr 2008 03:18:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33375 invoked by uid 99); 10 Apr 2008 03:18:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Apr 2008 20:18:42 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of allenchue@gmail.com designates 66.249.82.235 as permitted sender)
Received: from [66.249.82.235] (HELO wx-out-0506.google.com) (66.249.82.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Apr 2008 03:17:57 +0000
Received: by wx-out-0506.google.com with SMTP id i28so3288304wxd.20
        for <java-user@lucene.apache.org>; Wed, 09 Apr 2008 20:18:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        bh=LUObFvdqKuA/eUMVV6MVjlqd6rlGi88prZBe/XKhnD0=;
        b=S8j7K/EGiw75t62zokqiPqLe25Xjt4F2kDJMe4j/ITUbHJ6gQsdn9eNxrIWi1uSccA7MBG28/5r6rysdfPMAuZhvcxsuBDJvRcX+KEsqHFldkpaiKDrSkDGQ/27CiPDtEwq15MgC+J6bFJszj8HTCwqeD0UNlWSyKHdzP9i81m4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        b=uDhXfaN6e1zu2nGmxfstbEx/rsRWzJjTg4jNmGdziPk/LW/sS7rFfMFtKfVZtAjzkx85Ym7d7qojCAW30RqL46NFvoLh0DpN5GT5CAeLQxrdu6btx2Nik5ic3YQYRNcx7k9UGmnGBwjBAjkTOlX+Ubt0OBLtbgxaNdEOBrDexio=
Received: by 10.70.14.20 with SMTP id 20mr1078838wxn.25.1207797489655;
        Wed, 09 Apr 2008 20:18:09 -0700 (PDT)
Received: by 10.70.65.6 with HTTP; Wed, 9 Apr 2008 20:18:09 -0700 (PDT)
Message-ID: <b739adf00804092018tbe18ffcyd3f535515d5f2d1f@mail.gmail.com>
Date: Thu, 10 Apr 2008 11:18:09 +0800
From: "=?UTF-8?B?5LuH5a+F?=" <qiuyin04@software.nju.edu.cn>
Sender: allenchue@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Lucene 2.3.0 and NFS
In-Reply-To: <243333.43199.qm@web52001.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5420_7131529.1207797489622"
References: <233725.22487.qm@web52003.mail.re2.yahoo.com>
	 <243333.43199.qm@web52001.mail.re2.yahoo.com>
X-Google-Sender-Auth: e6d726a3bc6c741f
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5420_7131529.1207797489622
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

I know there are several options, though none of which I have tried myself.

Rsync win32 port: http://sourceforge.net/projects/rsyncwin32/
rsync python script (should be platform-independent):
http://www.vdesmedt.com/~vds2212/rsync.html
Jarsync (in java): http://jarsync.sourceforge.net/, which is a Java
implementation for rsync
And finally cygwin of course.

Hope that helps.

On Thu, Apr 10, 2008 at 9:10 AM, Rajesh parab <rajesh_parab_1@yahoo.com>
wrote:

> Hi All,
>
> Has anyone used rsync or similar utilities on Windows
> OS to replicate Lucene index across multiple machines?
>
> Any pointers on it will be very useful?
>
> Regards,
> Rajesh
>
> --- Rajesh parab <rajesh_parab_1@yahoo.com> wrote:
>
> > Hi Michael,
> >
> > Thanks a lot for your suggestions.
> >
> > I was looking at rsync; as per this link
> > (http://samba.anu.edu.au/rsync/features.html), rsync
> > is a file transfer program for UNIX. Is there rsync
> > support for Windows as well? I found few rsync
> > programs that works for Windows, but I am not sure
> > if
> > they will server the purpose. Has anyone using rsync
> > on Windows?
> >
> > Regards,
> > Rajesh
> >
> > --- Michael McCandless <lucene@mikemccandless.com>
> > wrote:
> >
> > >
> > > Rajesh parab wrote:
> > > > Hi,
> > > >
> > > > We are currently using Lucene 2.0 for full-text
> > > > searches within our enterprise application,
> > which
> > > can
> > > > be deployed in clustered environment. We
> > generate
> > > > Lucene index for data stored inside relational
> > > > database.
> > > >
> > > > As Lucene 2.0 did not have solid NFS support and
> > > as we
> > > > wanted Lucene based searches to work properly in
> > > > Clustered environment, we had decided on
> > following
> > > > approach:
> > > > 1. The index generation happens on a machine
> > > (could be
> > > > one of the cluster nodes or a separate machine)
> > > and
> > > > once the Lucene index is generated, we copy all
> > > the
> > > > index files to the database.
> > >
> > > Note that you can do also incremental replication:
> > > often, the Lucene
> > > index changes in minor ways (eg a single new
> > segment
> > > is flushed and a
> > > new segments_N and segments.gen is written) so you
> > > should only sync
> > > the files that are new (and remove the ones that
> > are
> > > now gone).
> > > Lucene's write-once approach makes this very
> > simple
> > > (you just have to
> > > compare file names, not the contents of each
> > file).
> > >
> > > It's also possible to replicate without using a
> > DB.
> > > EG rsync does a
> > > great job.
> > >
> > > > 2. The index search request on each cluster node
> > > > retrieves the index files from database (during
> > > first
> > > > search or after index update), copies to the
> > file
> > > > system and use it for searches.
> > > > 3. Thus, each cluster node has its own copy of
> > the
> > > > index and it keeps on picking up latest version
> > if
> > > it
> > > > is available inside database.
> > > >
> > > > This has worked fine for us till now, though we
> > > will
> > > > not be able continue with this model in future
> > as
> > > we
> > > > want to support Lucene based searches across our
> > > > application and also want to index large
> > > components
> > > > inside our application like Wiki, forums, etc.
> > As
> > > the
> > > > index will grow, storing and retrieving index
> > > files
> > > > from database will not be an efficient
> > operation.
> > > >
> > > > My questions are:
> > > > - Will we be able to use NFS if we move to
> > Lucene
> > > > 2.3.0?
> > >
> > > Make sure you update to 2.3.1, not 2.3.0.
> > >
> > > > - Will there be any significant performance
> > impact
> > > on
> > > > index generation and searches if we move to NFS?
> > > > - Is Lucene + NFS combination supported for all
> > > > operating systems? (We support Windows, Solaris,
> > > AIX,
> > > > HP-UX, Red Hat Linux)
> > >
> > > NFS *should* work, however:
> > >
> > >    * It's not widely used, so, test thoroughly in
> > > your particular setup.
> > >
> > >    * Most likely to work is if you use a single
> > > machine writing to
> > > the index, and many readers.
> > >
> > >    * Performance is likely not great, especially
> > on
> > > searching, but
> > > you should test in your specific situation.
> > >
> > > > - Is there any other alternative available other
> > > than
> > > > NFS?
> > > >
> > >
> > > It's also possible to replicate without using a
> > DB.
> > > EG rsync does
> > > agreat job.
> > >
> > > You should look at Solr, since it already has all
> > > the infrastructure
> > > toaccept updates, replicate index changes to
> > remote
> > > machines, etc.
> > >
> > > > I will really appreciate your comments/thoughts
> > on
> > > > this topic.
> > > >
> > > > Regards,
> > > > Rajesh
> > > >
> > > >
> > > >
> > > >
> > >
> >
> ______________________________________________________________________
> > >
> > > > ______________
> > > > You rock. That's why Blockbuster's offering you
> > > one month of
> > > > Blockbuster Total Access, No Cost.
> > > >
> > http://tc.deals.yahoo.com/tc/blockbuster/text5.com
> > > >
> > > >
> > >
> >
> ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail:
> > > java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail:
> > > java-user-help@lucene.apache.org
> > > >
> > >
> > >
> > >
> >
> ---------------------------------------------------------------------
> > > To unsubscribe, e-mail:
> > > java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail:
> > > java-user-help@lucene.apache.org
> > >
> > >
> >
> >
> >
> >
> >
>
> ____________________________________________________________________________________
> > You rock. That's why Blockbuster's offering you one
> > month of Blockbuster Total Access, No Cost.
> > http://tc.deals.yahoo.com/tc/blockbuster/text5.com
> >
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail:
> > java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail:
> > java-user-help@lucene.apache.org
> >
> >
>
>
> __________________________________________________
> Do You Yahoo!?
> Tired of spam?  Yahoo! Mail has the best spam protection around
> http://mail.yahoo.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Yin Qiu
Nanjing University, China
-------------------------------------------

------=_Part_5420_7131529.1207797489622--

From java-user-return-33545-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 10 12:53:44 2008
Return-Path: <java-user-return-33545-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39850 invoked from network); 10 Apr 2008 12:53:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Apr 2008 12:53:43 -0000
Received: (qmail 51479 invoked by uid 500); 10 Apr 2008 12:53:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51460 invoked by uid 500); 10 Apr 2008 12:53:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51449 invoked by uid 99); 10 Apr 2008 12:53:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Apr 2008 05:53:37 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chose77@gmail.com designates 64.233.178.246 as permitted sender)
Received: from [64.233.178.246] (HELO hs-out-0708.google.com) (64.233.178.246)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Apr 2008 12:52:55 +0000
Received: by hs-out-0708.google.com with SMTP id 4so2281519hsl.5
        for <java-user@lucene.apache.org>; Thu, 10 Apr 2008 05:53:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=neRGQcdknctzLn2hv1OVl/YFu7m5kI64H/zz1lBcCVU=;
        b=gh0uuKij4PQP0jKr3PJqBHXabU1ndak29FXbgHyz2EpoeofVSMO1D+TcBaBa7W7LePiUOP2XDiLtG6jiPiUNP5n6aKg/MvQN7/mTYfi0yGPeAOkT6nF+qCOvwnyLIJE7aoiryDeC07fSQY6kwuB0YJmW77m00vpjW+4rdFQHGMg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=MiBmyH3xzqw0w0y/Jb9txUNUU5/aAiEJZOglnj1k1Ndw0V+RPvP8nfs4kgdVbCag4jLEJnIZIicOdh8o+uHJhaDwBlDJWMM6KJTL5DSRHCgctUB5bOeQcaaijblFbsS5ii2jRKxFOzI+EvL2g/iFhhQvwQXzBYSD1vQEigqRI+E=
Received: by 10.100.201.16 with SMTP id y16mr2766435anf.26.1207831986719;
        Thu, 10 Apr 2008 05:53:06 -0700 (PDT)
Received: by 10.100.42.11 with HTTP; Thu, 10 Apr 2008 05:53:06 -0700 (PDT)
Message-ID: <b8eccf4d0804100553v4c0d8809nd961028ea0d21a79@mail.gmail.com>
Date: Thu, 10 Apr 2008 14:53:06 +0200
From: "Joe K" <chose77@gmail.com>
To: java-user@lucene.apache.org
Subject: WildCardQuery and TooManyClauses
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1452_18584387.1207831986716"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1452_18584387.1207831986716
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello everybody,
I know there was written a tons of words about this issue, but I'm just not
clear enough about it.

I have these facts:

1. my query is always 1 letter and *, eg. M*
2. i always want to get max 200 results, no more!
3. i don't want to fix this issue by setting maxClauseCount

I just don't see the easy way how to get my results, did i missed something?

>From what I've read here I know that probably i should play with filters or
with WildCardEnum, but why?
I just want to get simple this:
SELECT FROM XXX WHERE XXX.name LIKE 'M%' LIMIT 200;

(there is no filtering in this query except the wildcard itself)

Please, what is the easiest solution to achieve this?

Thanks in advance,
Chose

------=_Part_1452_18584387.1207831986716--

From java-user-return-33546-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 10 13:03:21 2008
Return-Path: <java-user-return-33546-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48305 invoked from network); 10 Apr 2008 13:03:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Apr 2008 13:03:21 -0000
Received: (qmail 79902 invoked by uid 500); 10 Apr 2008 13:03:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79697 invoked by uid 500); 10 Apr 2008 13:03:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79686 invoked by uid 99); 10 Apr 2008 13:03:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Apr 2008 06:03:14 -0700
X-ASF-Spam-Status: No, hits=-2.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gresh@us.ibm.com designates 32.97.182.146 as permitted sender)
Received: from [32.97.182.146] (HELO e6.ny.us.ibm.com) (32.97.182.146)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Apr 2008 13:02:31 +0000
Received: from d01relay04.pok.ibm.com (d01relay04.pok.ibm.com [9.56.227.236])
	by e6.ny.us.ibm.com (8.13.8/8.13.8) with ESMTP id m3AD4mq2017556
	for <java-user@lucene.apache.org>; Thu, 10 Apr 2008 09:04:48 -0400
Received: from d01av01.pok.ibm.com (d01av01.pok.ibm.com [9.56.224.215])
	by d01relay04.pok.ibm.com (8.13.8/8.13.8/NCO v8.7) with ESMTP id m3AD2hVZ245996
	for <java-user@lucene.apache.org>; Thu, 10 Apr 2008 09:02:43 -0400
Received: from d01av01.pok.ibm.com (loopback [127.0.0.1])
	by d01av01.pok.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id m3AD2hEX001319
	for <java-user@lucene.apache.org>; Thu, 10 Apr 2008 09:02:43 -0400
Received: from d01ml605.pok.ibm.com (d01ml605.pok.ibm.com [9.56.227.91])
	by d01av01.pok.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id m3AD2hhV001306
	for <java-user@lucene.apache.org>; Thu, 10 Apr 2008 09:02:43 -0400
In-Reply-To: <b8eccf4d0804100553v4c0d8809nd961028ea0d21a79@mail.gmail.com>
To: java-user@lucene.apache.org
MIME-Version: 1.0
Subject: Re: WildCardQuery and TooManyClauses
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
From: Donna L Gresh <gresh@us.ibm.com>
Message-ID: <OF6E48399F.2D38EE9A-ON85257427.00477138-85257427.00479483@us.ibm.com>
Date: Thu, 10 Apr 2008 09:02:42 -0400
X-MIMETrack: Serialize by Router on D01ML605/01/M/IBM(Release 8.0|August 02, 2007) at 04/10/2008
 09:02:42,
	Serialize complete at 04/10/2008 09:02:42
Content-Type: multipart/alternative; boundary="=_alternative 0047942085257427_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 0047942085257427_=
Content-Type: text/plain; charset="US-ASCII"

Doesn't the following do what you want with maxnumhits =200?
                TopDocs td;
                td = indexSearcher.search(query, filter, maxnumhits);
where filter can be null



Donna L. Gresh
Services Research, Mathematical Sciences Department
IBM T.J. Watson Research Center
(914) 945-2472
http://www.research.ibm.com/people/g/donnagresh
gresh@us.ibm.com


"Joe K" <chose77@gmail.com> wrote on 04/10/2008 08:53:06 AM:

> Hello everybody,
> I know there was written a tons of words about this issue, but I'm just 
not
> clear enough about it.
> 
> I have these facts:
> 
> 1. my query is always 1 letter and *, eg. M*
> 2. i always want to get max 200 results, no more!
> 3. i don't want to fix this issue by setting maxClauseCount
> 
> I just don't see the easy way how to get my results, did i missed 
something?
> 
> From what I've read here I know that probably i should play with filters 
or
> with WildCardEnum, but why?
> I just want to get simple this:
> SELECT FROM XXX WHERE XXX.name LIKE 'M%' LIMIT 200;
> 
> (there is no filtering in this query except the wildcard itself)
> 
> Please, what is the easiest solution to achieve this?
> 
> Thanks in advance,
> Chose

--=_alternative 0047942085257427_=--

From java-user-return-33547-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 10 13:25:00 2008
Return-Path: <java-user-return-33547-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59590 invoked from network); 10 Apr 2008 13:24:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Apr 2008 13:24:59 -0000
Received: (qmail 23227 invoked by uid 500); 10 Apr 2008 13:24:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23201 invoked by uid 500); 10 Apr 2008 13:24:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23189 invoked by uid 99); 10 Apr 2008 13:24:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Apr 2008 06:24:52 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of chose77@gmail.com designates 209.85.132.247 as permitted sender)
Received: from [209.85.132.247] (HELO an-out-0708.google.com) (209.85.132.247)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Apr 2008 13:24:01 +0000
Received: by an-out-0708.google.com with SMTP id c5so822962anc.49
        for <java-user@lucene.apache.org>; Thu, 10 Apr 2008 06:24:21 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=TYsiuXoLDmWxgiKUlE5LA0Qlxwm2sANnEhgiHTF+Bgk=;
        b=wk6kjvn4FXM3ErrnmaDbrqjk+AkSBWw/CfTW/B+/Mpwiy8feCVbpgDH6qdN0gQgCxNTOXa6839BB7b4DdZCFrQQfFwmj1r4aNQC8/0ub93bL4dbslpiUBdBrmtA8StNSi/OPWVgsi1fyAkBf+oE+SsBzIZ1KOQIvPNnTKyzrfok=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=XFfo7eZle7eu2Zg4mZy8/te3m4MgtSfZKJPydVGX1d9t7Za4lIdGuJn7z9uHyYqmvBpjZNWt7cx4ElOyX/Ly/jeEAi6qoPdLtV7FqNRYE0AyMlFFjFw+z5e5xfu5Vhyqo+g09HDq4N7J7eAbHDDl7Xid64/QXZqty9ChE6RgmDI=
Received: by 10.100.166.9 with SMTP id o9mr2778341ane.91.1207833861479;
        Thu, 10 Apr 2008 06:24:21 -0700 (PDT)
Received: by 10.100.42.11 with HTTP; Thu, 10 Apr 2008 06:24:21 -0700 (PDT)
Message-ID: <b8eccf4d0804100624m5c5e8616p654981bf8aeff41f@mail.gmail.com>
Date: Thu, 10 Apr 2008 15:24:21 +0200
From: "Joe K" <chose77@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: WildCardQuery and TooManyClauses
In-Reply-To: <OF6E48399F.2D38EE9A-ON85257427.00477138-85257427.00479483@us.ibm.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1594_31266106.1207833861478"
References: <b8eccf4d0804100553v4c0d8809nd961028ea0d21a79@mail.gmail.com>
	 <OF6E48399F.2D38EE9A-ON85257427.00477138-85257427.00479483@us.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1594_31266106.1207833861478
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Donna,
thanks for the reply!

I didn't try yet, but you are probably right that this should work for me.
The filter parameter and the fact that TopDocs doesn't have the
getter to the scoreDocs were confusing to me.

Thanks a lot,
Chose


On Thu, Apr 10, 2008 at 3:02 PM, Donna L Gresh <gresh@us.ibm.com> wrote:

> Doesn't the following do what you want with maxnumhits =200?
>                TopDocs td;
>                td = indexSearcher.search(query, filter, maxnumhits);
> where filter can be null
>
>
>
> Donna L. Gresh
> Services Research, Mathematical Sciences Department
> IBM T.J. Watson Research Center
> (914) 945-2472
> http://www.research.ibm.com/people/g/donnagresh
> gresh@us.ibm.com
>
>
> "Joe K" <chose77@gmail.com> wrote on 04/10/2008 08:53:06 AM:
>
> > Hello everybody,
> > I know there was written a tons of words about this issue, but I'm just
> not
> > clear enough about it.
> >
> > I have these facts:
> >
> > 1. my query is always 1 letter and *, eg. M*
> > 2. i always want to get max 200 results, no more!
> > 3. i don't want to fix this issue by setting maxClauseCount
> >
> > I just don't see the easy way how to get my results, did i missed
> something?
> >
> > From what I've read here I know that probably i should play with filters
> or
> > with WildCardEnum, but why?
> > I just want to get simple this:
> > SELECT FROM XXX WHERE XXX.name LIKE 'M%' LIMIT 200;
> >
> > (there is no filtering in this query except the wildcard itself)
> >
> > Please, what is the easiest solution to achieve this?
> >
> > Thanks in advance,
> > Chose
>

------=_Part_1594_31266106.1207833861478--

From java-user-return-33548-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 10 13:58:02 2008
Return-Path: <java-user-return-33548-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72607 invoked from network); 10 Apr 2008 13:58:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Apr 2008 13:58:02 -0000
Received: (qmail 99175 invoked by uid 500); 10 Apr 2008 13:57:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99143 invoked by uid 500); 10 Apr 2008 13:57:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99121 invoked by uid 99); 10 Apr 2008 13:57:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Apr 2008 06:57:50 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [65.217.211.134] (HELO mal002ex.ccrn.com) (65.217.211.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Apr 2008 13:57:07 +0000
Received: from boc002ex.ccrn.com ([172.31.10.29]) by mal002ex.ccrn.com with Microsoft SMTPSVC(6.0.3790.211);
	 Thu, 10 Apr 2008 09:57:18 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C89B12.CA12AD3E"
Subject: Use of Lucene  for DB Search
Date: Thu, 10 Apr 2008 09:57:01 -0400
Message-ID: <FD98FC13DC8A8A40BBA504AE516F96AE1232CE5B@boc002ex.ccrn.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Use of Lucene  for DB Search
Thread-Index: AcibEsA4Ihvi1u9bQwmsauj8M9cA9g==
From: "Prashant Saraf" <psaraf@cctc.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 10 Apr 2008 13:57:18.0454 (UTC) FILETIME=[CA397960:01C89B12]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C89B12.CA12AD3E
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_002_01C89B12.CA12AD3E"


------_=_NextPart_002_01C89B12.CA12AD3E
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: base64

SGksDQoNCiAgICAgICAgICAgICBXZSBhcmUgcGxhbm5pbmcgdG8gcHJvdmlkZSBzZWFyY2ggZnVu
Y3Rpb25hbGl0eSBpbiB0aGUgYSB3ZWIgYmFzZSBhcHBsaWNhdGlvbi4gQ2FuIHdlIHVzZSBMdWNl
bmUgZm9yIGl0IHRvIHNlYXJjaCBkYXRhIGZyb20gZGF0YWJhc2UgbGlrZSBvcmFjbGUgYW5kIE1T
LVNxbD8NCg0KIA0KDQogDQoNClRoYW5rcyBhbmQgUmVnYXJkcw0KICAgICAgIOCkquCljeCksOCk
tuCkvuCkguCkpCDgpLjgpLDgpL7gpKsNCihQcmFzaGFudCBTYXJhZikNClNFLUlJDQpDcm9zcyBD
b3VudHJ5IEluZm90ZWNoDQpFeHQgOiA3MjU0Mw0Kd3d3LmNyb3NzY291bnRyeS5pbg0KDQo=

------_=_NextPart_002_01C89B12.CA12AD3E
Content-Type: text/html;
	charset="UTF-8"
Content-Transfer-Encoding: base64

PE1FVEEgSFRUUC1FUVVJVj0iQ29udGVudC1UeXBlIiBDT05URU5UPSJ0ZXh0L2h0bWw7IGNoYXJz
ZXQ9dXRmLTgiPg0KPGh0bWwgeG1sbnM6dj0idXJuOnNjaGVtYXMtbWljcm9zb2Z0LWNvbTp2bWwi
IHhtbG5zOm89InVybjpzY2hlbWFzLW1pY3Jvc29mdC1jb206b2ZmaWNlOm9mZmljZSIgeG1sbnM6
dz0idXJuOnNjaGVtYXMtbWljcm9zb2Z0LWNvbTpvZmZpY2U6d29yZCIgeG1sbnM6bT0iaHR0cDov
L3NjaGVtYXMubWljcm9zb2Z0LmNvbS9vZmZpY2UvMjAwNC8xMi9vbW1sIiB4bWxucz0iaHR0cDov
L3d3dy53My5vcmcvVFIvUkVDLWh0bWw0MCI+DQoNCjxoZWFkPg0KDQo8bWV0YSBuYW1lPUdlbmVy
YXRvciBjb250ZW50PSJNaWNyb3NvZnQgV29yZCAxMiAoZmlsdGVyZWQgbWVkaXVtKSI+DQo8c3R5
bGU+DQo8IS0tDQogLyogRm9udCBEZWZpbml0aW9ucyAqLw0KIEBmb250LWZhY2UNCgl7Zm9udC1m
YW1pbHk6TWFuZ2FsOw0KCXBhbm9zZS0xOjAgMCA0IDAgMCAwIDAgMCAwIDA7fQ0KQGZvbnQtZmFj
ZQ0KCXtmb250LWZhbWlseTpNYW5nYWw7DQoJcGFub3NlLTE6MCAwIDQgMCAwIDAgMCAwIDAgMDt9
DQpAZm9udC1mYWNlDQoJe2ZvbnQtZmFtaWx5OkNhbGlicmk7DQoJcGFub3NlLTE6MiAxNSA1IDIg
MiAyIDQgMyAyIDQ7fQ0KIC8qIFN0eWxlIERlZmluaXRpb25zICovDQogcC5Nc29Ob3JtYWwsIGxp
Lk1zb05vcm1hbCwgZGl2Lk1zb05vcm1hbA0KCXttYXJnaW46MGluOw0KCW1hcmdpbi1ib3R0b206
LjAwMDFwdDsNCglmb250LXNpemU6MTEuMHB0Ow0KCWZvbnQtZmFtaWx5OiJDYWxpYnJpIiwic2Fu
cy1zZXJpZiI7fQ0KYTpsaW5rLCBzcGFuLk1zb0h5cGVybGluaw0KCXttc28tc3R5bGUtcHJpb3Jp
dHk6OTk7DQoJY29sb3I6Ymx1ZTsNCgl0ZXh0LWRlY29yYXRpb246dW5kZXJsaW5lO30NCmE6dmlz
aXRlZCwgc3Bhbi5Nc29IeXBlcmxpbmtGb2xsb3dlZA0KCXttc28tc3R5bGUtcHJpb3JpdHk6OTk7
DQoJY29sb3I6cHVycGxlOw0KCXRleHQtZGVjb3JhdGlvbjp1bmRlcmxpbmU7fQ0Kc3Bhbi5FbWFp
bFN0eWxlMTcNCgl7bXNvLXN0eWxlLXR5cGU6cGVyc29uYWwtY29tcG9zZTsNCglmb250LWZhbWls
eToiQ2FsaWJyaSIsInNhbnMtc2VyaWYiOw0KCWNvbG9yOndpbmRvd3RleHQ7fQ0KLk1zb0NocERl
ZmF1bHQNCgl7bXNvLXN0eWxlLXR5cGU6ZXhwb3J0LW9ubHk7fQ0KQHBhZ2UgU2VjdGlvbjENCgl7
c2l6ZTo4LjVpbiAxMS4waW47DQoJbWFyZ2luOjEuMGluIDEuMGluIDEuMGluIDEuMGluO30NCmRp
di5TZWN0aW9uMQ0KCXtwYWdlOlNlY3Rpb24xO30NCi0tPg0KPC9zdHlsZT4NCjwhLS1baWYgZ3Rl
IG1zbyA5XT48eG1sPg0KIDxvOnNoYXBlZGVmYXVsdHMgdjpleHQ9ImVkaXQiIHNwaWRtYXg9IjEw
MjYiIC8+DQo8L3htbD48IVtlbmRpZl0tLT48IS0tW2lmIGd0ZSBtc28gOV0+PHhtbD4NCiA8bzpz
aGFwZWxheW91dCB2OmV4dD0iZWRpdCI+DQogIDxvOmlkbWFwIHY6ZXh0PSJlZGl0IiBkYXRhPSIx
IiAvPg0KIDwvbzpzaGFwZWxheW91dD48L3htbD48IVtlbmRpZl0tLT4NCjwvaGVhZD4NCg0KPGJv
ZHkgbGFuZz1FTi1VUyBsaW5rPWJsdWUgdmxpbms9cHVycGxlPg0KDQo8ZGl2IGNsYXNzPVNlY3Rp
b24xPg0KDQo8cCBjbGFzcz1Nc29Ob3JtYWw+SGksPG86cD48L286cD48L3A+DQoNCjxwIGNsYXNz
PU1zb05vcm1hbD4mbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJz
cDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsNCldlIGFyZSBwbGFubmluZyB0byBwcm92aWRlIHNl
YXJjaCBmdW5jdGlvbmFsaXR5IGluIHRoZSBhIHdlYiBiYXNlIGFwcGxpY2F0aW9uLg0KQ2FuIHdl
IHVzZSBMdWNlbmUgZm9yIGl0IHRvIHNlYXJjaCBkYXRhIGZyb20gZGF0YWJhc2UgbGlrZSBvcmFj
bGUgYW5kIE1TLVNxbD88bzpwPjwvbzpwPjwvcD4NCg0KPHAgY2xhc3M9TXNvTm9ybWFsPjxvOnA+
Jm5ic3A7PC9vOnA+PC9wPg0KDQo8cCBjbGFzcz1Nc29Ob3JtYWw+PG86cD4mbmJzcDs8L286cD48
L3A+DQoNCjxwIGNsYXNzPU1zb05vcm1hbD48c3BhbiBzdHlsZT0nZm9udC1zaXplOjEyLjBwdDtm
b250LWZhbWlseToiQ291cmllciBOZXciOw0KY29sb3I6Ymx1ZSc+VGhhbmtzIGFuZCBSZWdhcmRz
PC9zcGFuPjxzcGFuIHN0eWxlPSdmb250LXNpemU6MTAuMHB0O2ZvbnQtZmFtaWx5Og0KIkNvdXJp
ZXIgTmV3Ijtjb2xvcjpibHVlJz48YnI+DQo8L3NwYW4+PHNwYW4gc3R5bGU9J2ZvbnQtc2l6ZTox
Mi4wcHQ7Zm9udC1mYW1pbHk6TWFuZ2FsO2NvbG9yOmJsdWUnPiZuYnNwOyZuYnNwOyZuYnNwOyZu
YnNwOyZuYnNwOyZuYnNwOw0K4KSq4KWN4KSw4KS24KS+4KSC4KSkPC9zcGFuPjxzcGFuIHN0eWxl
PSdmb250LXNpemU6DQoxMi4wcHQ7Zm9udC1mYW1pbHk6IkNvdXJpZXIgTmV3Ijtjb2xvcjpibHVl
Jz4gPC9zcGFuPjxzcGFuIHN0eWxlPSdmb250LXNpemU6DQoxMi4wcHQ7Zm9udC1mYW1pbHk6TWFu
Z2FsO2NvbG9yOmJsdWUnPuCkuOCksOCkvuCkqzxicj4NCig8L3NwYW4+PHNwYW4gc3R5bGU9J2Zv
bnQtc2l6ZToxMi4wcHQ7Zm9udC1mYW1pbHk6IkNvdXJpZXIgTmV3Ijtjb2xvcjpibHVlJz5QcmFz
aGFudA0KU2FyYWYpPGJyPg0KU0UtSUk8YnI+DQpDcm9zcyBDb3VudHJ5IEluZm90ZWNoPGJyPg0K
RXh0IDogNzI1NDM8L3NwYW4+PHNwYW4gc3R5bGU9J2ZvbnQtc2l6ZToxMC4wcHQ7Zm9udC1mYW1p
bHk6IkNvdXJpZXIgTmV3IjsNCmNvbG9yOmJsdWUnPjxicj4NCjwvc3Bhbj48c3BhbiBzdHlsZT0n
Zm9udC1zaXplOjEyLjBwdDtmb250LWZhbWlseToiQ291cmllciBOZXciO2NvbG9yOmJsdWUnPnd3
dy5jcm9zc2NvdW50cnkuaW48L3NwYW4+PG86cD48L286cD48L3A+DQoNCjwvZGl2Pg0KDQo8L2Jv
ZHk+DQoNCjwvaHRtbD4NCg==

------_=_NextPart_002_01C89B12.CA12AD3E--


------_=_NextPart_001_01C89B12.CA12AD3E
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C89B12.CA12AD3E--

From java-user-return-33549-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 10 14:05:25 2008
Return-Path: <java-user-return-33549-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77728 invoked from network); 10 Apr 2008 14:05:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Apr 2008 14:05:25 -0000
Received: (qmail 21597 invoked by uid 500); 10 Apr 2008 14:05:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21563 invoked by uid 500); 10 Apr 2008 14:05:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21552 invoked by uid 99); 10 Apr 2008 14:05:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Apr 2008 07:05:19 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [213.162.48.15] (HELO soufre.accelance.net) (213.162.48.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Apr 2008 14:04:34 +0000
Received: from [192.168.3.105] (LSt-Amand-152-32-31-90.w82-127.abo.wanadoo.fr [82.127.74.90])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by soufre.accelance.net (Postfix) with ESMTP id 895C04517F
	for <java-user@lucene.apache.org>; Thu, 10 Apr 2008 16:04:42 +0200 (CEST)
Message-ID: <47FE1E78.4080502@garambrogne.net>
Date: Thu, 10 Apr 2008 16:04:40 +0200
From: Mathieu Lecarme <mathieu@garambrogne.net>
User-Agent: Thunderbird 2.0.0.12 (X11/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Use of Lucene  for DB Search
References: <FD98FC13DC8A8A40BBA504AE516F96AE1232CE5B@boc002ex.ccrn.com>
In-Reply-To: <FD98FC13DC8A8A40BBA504AE516F96AE1232CE5B@boc002ex.ccrn.com>
X-Enigmail-Version: 0.95.6
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

have a look at Compass.

M.
Prashant Saraf a crit :
>
> Hi,
>
>              We are planning to provide search functionality in the a 
> web base application. Can we use Lucene for it to search data from 
> database like oracle and MS-Sql?
>
>  
>
>  
>
> Thanks and Regards
>         
> (Prashant Saraf)
> SE-II
> Cross Country Infotech
> Ext : 72543
> www.crosscountry.in
>
> ------------------------------------------------------------------------
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33550-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 10 14:05:32 2008
Return-Path: <java-user-return-33550-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77797 invoked from network); 10 Apr 2008 14:05:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Apr 2008 14:05:32 -0000
Received: (qmail 22082 invoked by uid 500); 10 Apr 2008 14:05:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22046 invoked by uid 500); 10 Apr 2008 14:05:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22007 invoked by uid 99); 10 Apr 2008 14:05:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Apr 2008 07:05:20 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.134.186 as permitted sender)
Received: from [209.85.134.186] (HELO mu-out-0910.google.com) (209.85.134.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Apr 2008 14:04:28 +0000
Received: by mu-out-0910.google.com with SMTP id g7so11489muf.0
        for <java-user@lucene.apache.org>; Thu, 10 Apr 2008 07:04:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=O8rf+1ceI/MddRMN2c+wKt24bsyHnm+oxqsYGH/Sc60=;
        b=qjZQWEb3WJizxroJJnZN9YLu8EM/dqyfnvqngCgfiw5lB5LSb7esqR2URCZ2w02FOnURUwWQpYHke9jYJdgfhHkZ5v1cJWNlq75HUZ/KNBTp+/yH19znvyF/kJwD6HpdYg0/VKue1nH640rzbgBxWu970PmJQ3fTDsZIfs+KTqI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=T9i6npdBe4N9Rs4aimDZTPpWCOj3K2A6iScL80LF2MTdmQj1IXC6ky9Cy3rmuX7JgB0ALgOVz18WeS7ZjqZ/A4rcT5AxarO2HlKb+D3K6CXvnmN8j2LbDva6AALLrjPIhgWxauWbod8cB+G4kitbLidjlFU3XSBwGXfcjwU3KDo=
Received: by 10.82.156.10 with SMTP id d10mr2317940bue.31.1207836270987;
        Thu, 10 Apr 2008 07:04:30 -0700 (PDT)
Received: by 10.82.191.6 with HTTP; Thu, 10 Apr 2008 07:04:30 -0700 (PDT)
Message-ID: <359a92830804100704o7eb78ea7vca00ef01ad95496e@mail.gmail.com>
Date: Thu, 10 Apr 2008 10:04:30 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Use of Lucene for DB Search
In-Reply-To: <FD98FC13DC8A8A40BBA504AE516F96AE1232CE5B@boc002ex.ccrn.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14340_33008737.1207836270971"
References: <FD98FC13DC8A8A40BBA504AE516F96AE1232CE5B@boc002ex.ccrn.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_14340_33008737.1207836270971
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

QXMgYWx3YXlzLCAiSXQgZGVwZW5kcyIuIFdoYXQgaXMgaXQgeW91IHJlYWxseSB3YW50IHRvIGRv
PyBMdWNlbmUgZXhjZWxzIGF0CnNlYXJjaGluZyB0ZXh0LCBOT1QgYXQgZG9pbmcgUkRCTSBzb3J0
cyBvZiBvcGVyYXRpb25zLiBTbyBpZiB5b3UgaGF2ZSBsYXJnZQphbW91bnRzIG9mIHRleHQgaW4g
Y29sdW1ucyBpbiB5b3VyIERCLCB5b3UgY2FuIGNlcnRhaW5seSBwdXQgdGhlbSBpbiBhCkx1Y2Vu
ZSBpbmRleCBhbmQgc2VhcmNoLiBCdXQgYXMgc29vbiBhcyB5b3UgZmluZCB5b3Vyc2VsZiB0cnlp
bmcgdG8gbWFrZQpMdWNlbmUgdG8gYSBqb2luLCB5b3Ugc2hvdWxkIHJlLXRoaW5rIHlvdXIgYXBw
cm9hY2gsIHBvc3NpYmx5IGZsYXR0ZW5pbmcKeW91ciBkYXRhLgoKVGhhdCBzYWlkLCBzZWFyY2gg
dGhlIGFyY2hpdmUgZm9yIGFueXRoaW5nIHdyaXR0ZW4gYnkgTWFyY2VsbyBPY2hvYS4gSGUncwp3
cml0dGVuIHF1aXRlIGEgYml0IGFib3V0IGVtYmVkZGluZyBMdWNlbmUgaW4gT3JhY2xlIChhcyBJ
IHJlbWVtYmVyKS4gSQpjb25mZXNzIHRoYXQgSSBkb24ndCByZWFsbHkgdW5kZXJzdGFuZCB3aGF0
IGhlJ3MgZG9pbmcgYXMgaXQgZG9lc24ndCBhcHBseQp0byBwcm9ibGVtcyBJIGZhY2UsIGJ1dCBp
dCBzdXJlIGxvb2tlZCBpbnRlcmVzdGluZyBhbmQgbWF5IGFwcGx5IHRvIHlvdXIKcHJvYmxlbS4K
CkhlcmUncyBhIGNvcHkgb2YgaGlzIGxhdGVzdCBlLW1haWwgdGhhdCB3YXMgcXVpdGUgcmVjZW50
IHRoYXQgc2hvdWxkIGdldAp5b3Ugc3RhcnRlZC4uLgoKSGkgYWxsOgogSSBqdXN0IHJlbGVhc2Vk
IGEgbmV3IHZlcnNpb24gb2YgT3JhY2xlLUx1Y2VuZSBpbnRlZ3JhdGlvbgppbXBsZW1lbnRlZCBh
cyBhIERvbWFpbiBJbmRleC4KIEJpbmFyeSBkaXN0cmlidXRpb24gaGF2ZSBhIHZlcnkgc3RyYWln
aHRmb3J3YXJkIGluc3RhbGxhdGlvbiBhbmQKdGVzdGluZyBzdGVwLCBkb3dubG9hZHMgYXJlIGF0
IFNGLm5ldCB3ZWIgc2l0ZToKaHR0cDovL3NvdXJjZWZvcmdlLm5ldC9wcm9qZWN0L3Nob3dmaWxl
cy5waHA/Z3JvdXBfaWQ9NTYxODMmcGFja2FnZV9pZD0yNTU1MjQmcmVsZWFzZV9pZD01ODk5MDAK
IFVwZGF0ZWQgZG9jdW1lbnRhdGlvbiBpcyBhdmFpbGFibGUgYXMgR29vZ2xlIERvY3VtZW50IGF0
OgpodHRwOi8vZG9jcy5nb29nbGUuY29tL0RvYz9pZD1kZGd3N3NqcF81NGZnajlrZwogU291cmNl
IGlzIGF2YWlsYWJsZSB3aXRoIHB1YmxpYyBDVlMgYWNjZXNzIGF0OgpodHRwOi8vZGJwcmlzbS5j
dnMuc291cmNlZm9yZ2UubmV0L2RicHJpc20vb2p2bS8KIEFzIGNvbnNlcXVlbmNlIG9mIHJlYWRp
bmcgbWFueSBtYWlscyB3aXRoIGZlZWRiYWNrIGFuZCBkZXZlbG9wbWVudAp0aXBzIGZyb20gdGhp
cyBsaXN0IHRoaXMgbmV3IHZlcnNpb24gaGF2ZSBhIGxvdCBwZXJmb3JtYW5jZQppbXByb3ZlbWVu
dCBieSB1c2luZyBhIHJvd2lkPC0+bHVjZW5lIGRvYyBpZCBjYWNoZSwgdXNhZ2Ugb2YKTG9hZEZp
cnN0RmllbGRTZWxlY3RvciBjbGFzcyB0byBwcmV2ZW50IEx1Y2VuZSBmcm9tIGxvYWRpbmcgYSBj
b21wbGV0ZQpkb2MgaWYgb25seSB3ZSBuZWVkIHRoZSByb3dpZC4KIE1hbnkgdGhhbmtzIHRvIGFs
bCBmb3Igc2hhcmluZyB0aGUgZXhwZXJpZW5jZS4KIEEgY29tcGxldGUgbGlzdCBvZiBjaGFuZ2Vz
IGlzIGF0OgpodHRwOi8vZGJwcmlzbS5jdnMuc291cmNlZm9yZ2UubmV0L2RicHJpc20vb2p2bS9D
aGFuZ2VMb2cudHh0P3JldmlzaW9uPTEuMyZ2aWV3PW1hcmt1cAogQmVzdCByZWdhcmRzLCBNYXJj
ZWxvLgoKUEQ6IEkgaGF2ZSBhIHBsYW4gdG8gYSBtYWtlIGEgbmV3IHZlcnNpb24gb2YgT3JhY2xl
LUx1Y2VuZSBpbnRlZ3JhdGlvbgpzeW5jaHJvbml6ZWQgd2l0aCBMdWNlbmUgMi4zLjEgQVNBUC4K
CgpPbiBUaHUsIEFwciAxMCwgMjAwOCBhdCA5OjU3IEFNLCBQcmFzaGFudCBTYXJhZiA8cHNhcmFm
QGNjdGMuY29tPiB3cm90ZToKCj4gIEhpLAo+Cj4gICAgICAgICAgICAgIFdlIGFyZSBwbGFubmlu
ZyB0byBwcm92aWRlIHNlYXJjaCBmdW5jdGlvbmFsaXR5IGluIHRoZSBhIHdlYgo+IGJhc2UgYXBw
bGljYXRpb24uIENhbiB3ZSB1c2UgTHVjZW5lIGZvciBpdCB0byBzZWFyY2ggZGF0YSBmcm9tIGRh
dGFiYXNlIGxpa2UKPiBvcmFjbGUgYW5kIE1TLVNxbD8KPgo+Cj4KPgo+Cj4gVGhhbmtzIGFuZCBS
ZWdhcmRzCj4gICAgICAgIOCkquCljeCksOCktuCkvuCkguCkpCDgpLjgpLDgpL7gpKsKPiAoUHJh
c2hhbnQgU2FyYWYpCj4gU0UtSUkKPiBDcm9zcyBDb3VudHJ5IEluZm90ZWNoCj4gRXh0IDogNzI1
NDMKPiB3d3cuY3Jvc3Njb3VudHJ5LmluCj4KPiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KPiBUbyB1bnN1YnNjcmli
ZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcKPiBGb3Ig
YWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hl
Lm9yZwo+Cg==
------=_Part_14340_33008737.1207836270971--

From java-user-return-33551-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 10 14:08:54 2008
Return-Path: <java-user-return-33551-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79020 invoked from network); 10 Apr 2008 14:08:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Apr 2008 14:08:54 -0000
Received: (qmail 33858 invoked by uid 500); 10 Apr 2008 14:08:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33575 invoked by uid 500); 10 Apr 2008 14:08:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33564 invoked by uid 99); 10 Apr 2008 14:08:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Apr 2008 07:08:48 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of leandro.rhcp99@gmail.com designates 216.239.58.187 as permitted sender)
Received: from [216.239.58.187] (HELO gv-out-0910.google.com) (216.239.58.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Apr 2008 14:08:05 +0000
Received: by gv-out-0910.google.com with SMTP id n8so5127gve.23
        for <java-user@lucene.apache.org>; Thu, 10 Apr 2008 07:08:16 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=sa3AaEiihe+7C71EFP7L42QU2zmOITrEuuIR8QwRseM=;
        b=Q6618V5NBw78n2dGBmgZkDnCCyiZX95Pii/uToVfi3eW+qT7J8nmcsvyLPoCe7PEa/4o8jEcF40QCA+D3G5rgJWWP7HAGU6nl5GcSie3HD7N44WNJwEj7xzWxWzrF7O2SSYrmUFKfKoisfES65H6UeuQHyceS6EB6y66PQKddD8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=FgnSbXKUTFX4GtBaW7Q1Izl0Do9hygG2uFHMkbAA6kMu0g6xr0A1K8QnBWCczuMZNvJV6kQzGyzH89st0R6eUzfOrAa4p3EQlkDS2MLfpSXs6TlRC6kLYb3HE31HWu3JIsVqURKeeDgqms7aRcJdsAzACQPMqbgALdJxK/3W794=
Received: by 10.150.199.21 with SMTP id w21mr1732878ybf.60.1207836118290;
        Thu, 10 Apr 2008 07:01:58 -0700 (PDT)
Received: by 10.150.143.20 with HTTP; Thu, 10 Apr 2008 07:01:58 -0700 (PDT)
Message-ID: <5d3ac70804100701h542a519fn24b10f74394205f4@mail.gmail.com>
Date: Thu, 10 Apr 2008 11:01:58 -0300
From: Leandro <leandro.rhcp99@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Use of Lucene for DB Search
In-Reply-To: <FD98FC13DC8A8A40BBA504AE516F96AE1232CE5B@boc002ex.ccrn.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_28965_4286144.1207836118281"
References: <FD98FC13DC8A8A40BBA504AE516F96AE1232CE5B@boc002ex.ccrn.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_28965_4286144.1207836118281
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

PiAgSGksCj4KPiAgICAgICAgICAgICAgV2UgYXJlIHBsYW5uaW5nIHRvIHByb3ZpZGUgc2VhcmNo
IGZ1bmN0aW9uYWxpdHkgaW4gdGhlIGEgd2ViCj4gYmFzZSBhcHBsaWNhdGlvbi4gQ2FuIHdlIHVz
ZSBMdWNlbmUgZm9yIGl0IHRvIHNlYXJjaCBkYXRhIGZyb20gZGF0YWJhc2UgbGlrZQo+IG9yYWNs
ZSBhbmQgTVMtU3FsPwo+ClllcywgeW91IGNhbi4KCj4KPgo+Cj4KPiBUaGFua3MgYW5kIFJlZ2Fy
ZHMKPiAgICAgICAg4KSq4KWN4KSw4KS24KS+4KSC4KSkIOCkuOCksOCkvuCkqwo+IChQcmFzaGFu
dCBTYXJhZikKPiBTRS1JSQo+IENyb3NzIENvdW50cnkgSW5mb3RlY2gKPiBFeHQgOiA3MjU0Mwo+
IHd3dy5jcm9zc2NvdW50cnkuaW4KPgo+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQo+IFRvIHVuc3Vic2NyaWJlLCBl
LW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZwo+IEZvciBhZGRp
dGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3Jn
Cj4K
------=_Part_28965_4286144.1207836118281--

From java-user-return-33552-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 10 14:29:05 2008
Return-Path: <java-user-return-33552-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87690 invoked from network); 10 Apr 2008 14:29:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Apr 2008 14:29:05 -0000
Received: (qmail 77089 invoked by uid 500); 10 Apr 2008 14:28:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77059 invoked by uid 500); 10 Apr 2008 14:28:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77038 invoked by uid 99); 10 Apr 2008 14:28:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Apr 2008 07:28:57 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [65.217.211.134] (HELO mal002ex.ccrn.com) (65.217.211.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Apr 2008 14:28:05 +0000
Received: from boc002ex.ccrn.com ([172.31.10.29]) by mal002ex.ccrn.com with Microsoft SMTPSVC(6.0.3790.211);
	 Thu, 10 Apr 2008 10:28:24 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C89B17.21F29BAA"
Subject: RE: Use of Lucene for DB Search
Date: Thu, 10 Apr 2008 10:28:06 -0400
Message-ID: <FD98FC13DC8A8A40BBA504AE516F96AE1232CFDE@boc002ex.ccrn.com>
In-Reply-To: <359a92830804100704o7eb78ea7vca00ef01ad95496e@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Use of Lucene for DB Search
Thread-Index: AcibFANqRCR1FimNQlS+fNzEKuv9WwAAwx0Q
References: <FD98FC13DC8A8A40BBA504AE516F96AE1232CE5B@boc002ex.ccrn.com> <359a92830804100704o7eb78ea7vca00ef01ad95496e@mail.gmail.com>
From: "Prashant Saraf" <psaraf@cctc.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 10 Apr 2008 14:28:24.0015 (UTC) FILETIME=[222F7DF0:01C89B17]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C89B17.21F29BAA
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: base64

VGhhbmtzIEkgd2lsbCBjaGVjayB0aGlzIG91dA0KDQpUaGFua3MgYW5kIFJlZ2FyZHMNCiAgICAg
ICDgpKrgpY3gpLDgpLbgpL7gpILgpKQg4KS44KSw4KS+4KSrDQooUHJhc2hhbnQgU2FyYWYpDQpT
RS1JSQ0KQ3Jvc3MgQ291bnRyeSBJbmZvdGVjaA0KRXh0IDogNzI1NDMNCnd3dy5jcm9zc2NvdW50
cnkuaW4NCg0KLS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0tLS0NCkZyb206IEVyaWNrIEVyaWNrc29u
IFttYWlsdG86ZXJpY2tlcmlja3NvbkBnbWFpbC5jb21dIA0KU2VudDogVGh1cnNkYXksIEFwcmls
IDEwLCAyMDA4IDc6MzUgUE0NClRvOiBqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmcNClN1Ympl
Y3Q6IFJlOiBVc2Ugb2YgTHVjZW5lIGZvciBEQiBTZWFyY2gNCg0KQXMgYWx3YXlzLCAiSXQgZGVw
ZW5kcyIuIFdoYXQgaXMgaXQgeW91IHJlYWxseSB3YW50IHRvIGRvPyBMdWNlbmUgZXhjZWxzIGF0
DQpzZWFyY2hpbmcgdGV4dCwgTk9UIGF0IGRvaW5nIFJEQk0gc29ydHMgb2Ygb3BlcmF0aW9ucy4g
U28gaWYgeW91IGhhdmUgbGFyZ2UNCmFtb3VudHMgb2YgdGV4dCBpbiBjb2x1bW5zIGluIHlvdXIg
REIsIHlvdSBjYW4gY2VydGFpbmx5IHB1dCB0aGVtIGluIGENCkx1Y2VuZSBpbmRleCBhbmQgc2Vh
cmNoLiBCdXQgYXMgc29vbiBhcyB5b3UgZmluZCB5b3Vyc2VsZiB0cnlpbmcgdG8gbWFrZQ0KTHVj
ZW5lIHRvIGEgam9pbiwgeW91IHNob3VsZCByZS10aGluayB5b3VyIGFwcHJvYWNoLCBwb3NzaWJs
eSBmbGF0dGVuaW5nDQp5b3VyIGRhdGEuDQoNClRoYXQgc2FpZCwgc2VhcmNoIHRoZSBhcmNoaXZl
IGZvciBhbnl0aGluZyB3cml0dGVuIGJ5IE1hcmNlbG8gT2Nob2EuIEhlJ3MNCndyaXR0ZW4gcXVp
dGUgYSBiaXQgYWJvdXQgZW1iZWRkaW5nIEx1Y2VuZSBpbiBPcmFjbGUgKGFzIEkgcmVtZW1iZXIp
LiBJDQpjb25mZXNzIHRoYXQgSSBkb24ndCByZWFsbHkgdW5kZXJzdGFuZCB3aGF0IGhlJ3MgZG9p
bmcgYXMgaXQgZG9lc24ndCBhcHBseQ0KdG8gcHJvYmxlbXMgSSBmYWNlLCBidXQgaXQgc3VyZSBs
b29rZWQgaW50ZXJlc3RpbmcgYW5kIG1heSBhcHBseSB0byB5b3VyDQpwcm9ibGVtLg0KDQpIZXJl
J3MgYSBjb3B5IG9mIGhpcyBsYXRlc3QgZS1tYWlsIHRoYXQgd2FzIHF1aXRlIHJlY2VudCB0aGF0
IHNob3VsZCBnZXQNCnlvdSBzdGFydGVkLi4uDQoNCkhpIGFsbDoNCiBJIGp1c3QgcmVsZWFzZWQg
YSBuZXcgdmVyc2lvbiBvZiBPcmFjbGUtTHVjZW5lIGludGVncmF0aW9uDQppbXBsZW1lbnRlZCBh
cyBhIERvbWFpbiBJbmRleC4NCiBCaW5hcnkgZGlzdHJpYnV0aW9uIGhhdmUgYSB2ZXJ5IHN0cmFp
Z2h0Zm9yd2FyZCBpbnN0YWxsYXRpb24gYW5kDQp0ZXN0aW5nIHN0ZXAsIGRvd25sb2FkcyBhcmUg
YXQgU0YubmV0IHdlYiBzaXRlOg0KaHR0cDovL3NvdXJjZWZvcmdlLm5ldC9wcm9qZWN0L3Nob3dm
aWxlcy5waHA/Z3JvdXBfaWQ9NTYxODMmcGFja2FnZV9pZD0yNTU1MjQmcmVsZWFzZV9pZD01ODk5
MDANCiBVcGRhdGVkIGRvY3VtZW50YXRpb24gaXMgYXZhaWxhYmxlIGFzIEdvb2dsZSBEb2N1bWVu
dCBhdDoNCmh0dHA6Ly9kb2NzLmdvb2dsZS5jb20vRG9jP2lkPWRkZ3c3c2pwXzU0ZmdqOWtnDQog
U291cmNlIGlzIGF2YWlsYWJsZSB3aXRoIHB1YmxpYyBDVlMgYWNjZXNzIGF0Og0KaHR0cDovL2Ri
cHJpc20uY3ZzLnNvdXJjZWZvcmdlLm5ldC9kYnByaXNtL29qdm0vDQogQXMgY29uc2VxdWVuY2Ug
b2YgcmVhZGluZyBtYW55IG1haWxzIHdpdGggZmVlZGJhY2sgYW5kIGRldmVsb3BtZW50DQp0aXBz
IGZyb20gdGhpcyBsaXN0IHRoaXMgbmV3IHZlcnNpb24gaGF2ZSBhIGxvdCBwZXJmb3JtYW5jZQ0K
aW1wcm92ZW1lbnQgYnkgdXNpbmcgYSByb3dpZDwtPmx1Y2VuZSBkb2MgaWQgY2FjaGUsIHVzYWdl
IG9mDQpMb2FkRmlyc3RGaWVsZFNlbGVjdG9yIGNsYXNzIHRvIHByZXZlbnQgTHVjZW5lIGZyb20g
bG9hZGluZyBhIGNvbXBsZXRlDQpkb2MgaWYgb25seSB3ZSBuZWVkIHRoZSByb3dpZC4NCiBNYW55
IHRoYW5rcyB0byBhbGwgZm9yIHNoYXJpbmcgdGhlIGV4cGVyaWVuY2UuDQogQSBjb21wbGV0ZSBs
aXN0IG9mIGNoYW5nZXMgaXMgYXQ6DQpodHRwOi8vZGJwcmlzbS5jdnMuc291cmNlZm9yZ2UubmV0
L2RicHJpc20vb2p2bS9DaGFuZ2VMb2cudHh0P3JldmlzaW9uPTEuMyZ2aWV3PW1hcmt1cA0KIEJl
c3QgcmVnYXJkcywgTWFyY2Vsby4NCg0KUEQ6IEkgaGF2ZSBhIHBsYW4gdG8gYSBtYWtlIGEgbmV3
IHZlcnNpb24gb2YgT3JhY2xlLUx1Y2VuZSBpbnRlZ3JhdGlvbg0Kc3luY2hyb25pemVkIHdpdGgg
THVjZW5lIDIuMy4xIEFTQVAuDQoNCg0KT24gVGh1LCBBcHIgMTAsIDIwMDggYXQgOTo1NyBBTSwg
UHJhc2hhbnQgU2FyYWYgPHBzYXJhZkBjY3RjLmNvbT4gd3JvdGU6DQoNCj4gIEhpLA0KPg0KPiAg
ICAgICAgICAgICAgV2UgYXJlIHBsYW5uaW5nIHRvIHByb3ZpZGUgc2VhcmNoIGZ1bmN0aW9uYWxp
dHkgaW4gdGhlIGEgd2ViDQo+IGJhc2UgYXBwbGljYXRpb24uIENhbiB3ZSB1c2UgTHVjZW5lIGZv
ciBpdCB0byBzZWFyY2ggZGF0YSBmcm9tIGRhdGFiYXNlIGxpa2UNCj4gb3JhY2xlIGFuZCBNUy1T
cWw/DQo+DQo+DQo+DQo+DQo+DQo+IFRoYW5rcyBhbmQgUmVnYXJkcw0KPiAgICAgICAg4KSq4KWN
4KSw4KS24KS+4KSC4KSkIOCkuOCksOCkvuCkqw0KPiAoUHJhc2hhbnQgU2FyYWYpDQo+IFNFLUlJ
DQo+IENyb3NzIENvdW50cnkgSW5mb3RlY2gNCj4gRXh0IDogNzI1NDMNCj4gd3d3LmNyb3NzY291
bnRyeS5pbg0KPg0KPiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2
YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnDQo+IEZvciBhZGRpdGlvbmFsIGNv
bW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnDQo+DQo=


------_=_NextPart_001_01C89B17.21F29BAA
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C89B17.21F29BAA--

From java-user-return-33553-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 10 15:31:20 2008
Return-Path: <java-user-return-33553-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44010 invoked from network); 10 Apr 2008 15:31:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Apr 2008 15:31:20 -0000
Received: (qmail 18222 invoked by uid 500); 10 Apr 2008 15:31:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18196 invoked by uid 500); 10 Apr 2008 15:31:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18185 invoked by uid 99); 10 Apr 2008 15:31:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Apr 2008 08:31:13 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Apr 2008 15:30:29 +0000
Received: by nf-out-0910.google.com with SMTP id d3so28977nfc.15
        for <java-user@lucene.apache.org>; Thu, 10 Apr 2008 08:30:40 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=8fiaNfTnPeh7LuZn7E6UwsGwyPbjslH1MZJKMhwLTac=;
        b=ett+SNP3WH3EvP7JFRoygsOnHLr6AdKE5rsqCW7NiAK2E8I5rFjbuqz+HjzrVq8U/RD0L9jCnkWbSy2sKNpxCu7rZpwYBs+CqyW/lJJrPfU5RP/E5crDcXF5LdETmHq6je3DbWpCCni1qg5UsyMXiyGxKYSwKgIT4dbTNgYXrWY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=dU8GOA8m6zzwopOPiNXpzad16xD3c2TWbC4sZflqld49K9SvlFm1pXHRCjs2rmu2MBdy5kasKnp6cjUUHdEyxBArDmxhkce3SDHemav9PyYAMLjeXPcZOF1kDz1kZOXi6uIiECD78fU7sEwMYfwNI6dKp75dDYwH9wZN6bR02bk=
Received: by 10.78.206.6 with SMTP id d6mr252181hug.117.1207841439685;
        Thu, 10 Apr 2008 08:30:39 -0700 (PDT)
Received: by 10.78.155.15 with HTTP; Thu, 10 Apr 2008 08:30:39 -0700 (PDT)
Message-ID: <6e3ae6310804100830g2a3023bdhd1da3634c4b46887@mail.gmail.com>
Date: Thu, 10 Apr 2008 08:30:39 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Use of Lucene for DB Search
In-Reply-To: <FD98FC13DC8A8A40BBA504AE516F96AE1232CE5B@boc002ex.ccrn.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline
References: <FD98FC13DC8A8A40BBA504AE516F96AE1232CE5B@boc002ex.ccrn.com>
X-Virus-Checked: Checked by ClamAV on apache.org

V2l0aG91dCBjaGFuZ2luZyB5b3VyIGV4aXN0aW5nIGNvZGUsIHlvdSBjYW4gdXNlIERCU2lnaHQg
ZnJlZSB2ZXJzaW9uCnRvIGNyZWF0ZSBhIEx1Y2VuZSBpbmRleCBvbiB5b3VyIGRhdGFiYXNlIGRh
dGEsIGFuZCBwcm92aWRlIHNlYXJjaCBvbgppdC4KCkl0J2xsIHRha2UgeW91IGxlc3MgdGltZSB0
byBnZXQgaXQgZ29pbmcgdGhhbiByZWFkaW5nIGFsbCB0aGUgbWFudWFsCm9yIG1hcmtldGluZyBt
YXRlcmlhbHMuCgotLSAKQ2hyaXMgTHUKLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpJbnN0YW50
IFNjYWxhYmxlIEZ1bGwtVGV4dCBTZWFyY2ggT24gQW55IERhdGFiYXNlL0FwcGxpY2F0aW9uCnNp
dGU6IGh0dHA6Ly93d3cuZGJzaWdodC5uZXQKZGVtbzogaHR0cDovL3NlYXJjaC5kYnNpZ2h0LmNv
bQpMdWNlbmUgRGF0YWJhc2UgU2VhcmNoIGluIDMgbWludXRlczoKaHR0cDovL3dpa2kuZGJzaWdo
dC5jb20vaW5kZXgucGhwP3RpdGxlPUNyZWF0ZV9MdWNlbmVfRGF0YWJhc2VfU2VhcmNoX2luXzNf
bWludXRlcwpEQlNpZ2h0IGN1c3RvbWVyLCBhIHNob3BwaW5nIGNvbXBhcmlzb24gc2l0ZSwgKGFu
b255bW91cyBwZXIgcmVxdWVzdCkKZ290IDIuNiBNaWxsaW9uIEV1cm8gZnVuZGluZyEKCgpPbiBU
aHUsIEFwciAxMCwgMjAwOCBhdCA2OjU3IEFNLCBQcmFzaGFudCBTYXJhZiA8cHNhcmFmQGNjdGMu
Y29tPiB3cm90ZToKPgo+Cj4KPgo+IEhpLAo+Cj4gICAgICAgICAgICAgIFdlIGFyZSBwbGFubmlu
ZyB0byBwcm92aWRlIHNlYXJjaCBmdW5jdGlvbmFsaXR5IGluIHRoZSBhIHdlYgo+IGJhc2UgYXBw
bGljYXRpb24uIENhbiB3ZSB1c2UgTHVjZW5lIGZvciBpdCB0byBzZWFyY2ggZGF0YSBmcm9tIGRh
dGFiYXNlIGxpa2UKPiBvcmFjbGUgYW5kIE1TLVNxbD8KPgo+Cj4KPgo+Cj4gVGhhbmtzIGFuZCBS
ZWdhcmRzCj4gICAgICAgICDgpKrgpY3gpLDgpLbgpL7gpILgpKQg4KS44KSw4KS+4KSrCj4gIChQ
cmFzaGFudCBTYXJhZikKPiAgU0UtSUkKPiAgQ3Jvc3MgQ291bnRyeSBJbmZvdGVjaAo+ICBFeHQg
OiA3MjU0Mwo+ICB3d3cuY3Jvc3Njb3VudHJ5LmluCj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4gIFRvIHVuc3Vi
c2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZwo+
ICBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUu
YXBhY2hlLm9yZwo+Cg==


From java-user-return-33554-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 10 15:46:25 2008
Return-Path: <java-user-return-33554-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56058 invoked from network); 10 Apr 2008 15:46:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Apr 2008 15:46:24 -0000
Received: (qmail 55764 invoked by uid 500); 10 Apr 2008 15:46:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55735 invoked by uid 500); 10 Apr 2008 15:46:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55724 invoked by uid 99); 10 Apr 2008 15:46:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Apr 2008 08:46:18 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chose77@gmail.com designates 209.85.132.242 as permitted sender)
Received: from [209.85.132.242] (HELO an-out-0708.google.com) (209.85.132.242)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Apr 2008 15:45:36 +0000
Received: by an-out-0708.google.com with SMTP id c5so11886anc.49
        for <java-user@lucene.apache.org>; Thu, 10 Apr 2008 08:45:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=lc8+lSjyHrOXpUSl8BLWp18A7KbrX8CSoD93vRXLHkI=;
        b=aTqD5m8fWvW2lObdoysUDhwVXrjdwxSd3l63gRpoRcjVSWIJW/VqbANwnEn3T+k7j4nle1hkMlbeoks7ChwvTRK2dwvk6tyP9dcDbjRA+WQ5GKFtRsDZZkdH8KzwvVOAVJ5YqFesGuR+z6RONlRdSfkl/ryXevuZGoYk7ssFqwQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=dR8VhGiqmm/mvnP2vnmjlMKC1KRcAc+t8ykgw2euDlWNCV1240Ye7kOZFlqJ59AVD1XwlO7cg8BrC8cxmpWEMMmUYk3Nd/zqauaz2+bozHVbnlKgWsxugPh1IEZsWs0YeH6A7EOZQefEzwmKZgizhHjhiBid8DfJcM6My0IRmKs=
Received: by 10.100.138.16 with SMTP id l16mr3006527and.119.1207842348074;
        Thu, 10 Apr 2008 08:45:48 -0700 (PDT)
Received: by 10.100.42.11 with HTTP; Thu, 10 Apr 2008 08:45:48 -0700 (PDT)
Message-ID: <b8eccf4d0804100845t2bda0baayf169cbb7eb600fb1@mail.gmail.com>
Date: Thu, 10 Apr 2008 17:45:48 +0200
From: "Joe K" <chose77@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: WildCardQuery and TooManyClauses
In-Reply-To: <OF6E48399F.2D38EE9A-ON85257427.00477138-85257427.00479483@us.ibm.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2228_5164272.1207842348037"
References: <b8eccf4d0804100553v4c0d8809nd961028ea0d21a79@mail.gmail.com>
	 <OF6E48399F.2D38EE9A-ON85257427.00477138-85257427.00479483@us.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2228_5164272.1207842348037
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Donna,
so this doesn't work because search calls internaly MultiTermQuery.rewrite
which causes TooManyClauses exception anyway even if the maxnumhits
is set to 200 !!

So I am lost again...

Chose


On Thu, Apr 10, 2008 at 3:02 PM, Donna L Gresh <gresh@us.ibm.com> wrote:

> Doesn't the following do what you want with maxnumhits =200?
>                TopDocs td;
>                td = indexSearcher.search(query, filter, maxnumhits);
> where filter can be null
>
>
>
> Donna L. Gresh
> Services Research, Mathematical Sciences Department
> IBM T.J. Watson Research Center
> (914) 945-2472
> http://www.research.ibm.com/people/g/donnagresh
> gresh@us.ibm.com
>
>
> "Joe K" <chose77@gmail.com> wrote on 04/10/2008 08:53:06 AM:
>
> > Hello everybody,
> > I know there was written a tons of words about this issue, but I'm just
> not
> > clear enough about it.
> >
> > I have these facts:
> >
> > 1. my query is always 1 letter and *, eg. M*
> > 2. i always want to get max 200 results, no more!
> > 3. i don't want to fix this issue by setting maxClauseCount
> >
> > I just don't see the easy way how to get my results, did i missed
> something?
> >
> > From what I've read here I know that probably i should play with filters
> or
> > with WildCardEnum, but why?
> > I just want to get simple this:
> > SELECT FROM XXX WHERE XXX.name LIKE 'M%' LIMIT 200;
> >
> > (there is no filtering in this query except the wildcard itself)
> >
> > Please, what is the easiest solution to achieve this?
> >
> > Thanks in advance,
> > Chose
>

------=_Part_2228_5164272.1207842348037--

From java-user-return-33555-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 10 17:33:14 2008
Return-Path: <java-user-return-33555-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49304 invoked from network); 10 Apr 2008 17:33:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Apr 2008 17:33:14 -0000
Received: (qmail 31269 invoked by uid 500); 10 Apr 2008 17:33:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31244 invoked by uid 500); 10 Apr 2008 17:33:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31233 invoked by uid 99); 10 Apr 2008 17:33:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Apr 2008 10:33:07 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Apr 2008 17:32:25 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 0BF4771C350; Thu, 10 Apr 2008 10:32:38 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 0681371C337
	for <java-user@lucene.apache.org>; Thu, 10 Apr 2008 10:32:38 -0700 (PDT)
Date: Thu, 10 Apr 2008 10:32:38 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: RE: Why Lucene has to rewrite queries prior to actual searching?
In-Reply-To: <20080409212821.0A9A9B083F5@out4.bezeqint.net>
Message-ID: <Pine.LNX.4.62.0804101020340.25140@radix.cryptio.net>
References: <20080409212821.0A9A9B083F5@out4.bezeqint.net>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: term from the query, this part of Lucene should be smarter to know how to
: handle wildcards or even regex, so if "foo*" is received from the query, it
: will start with retieving the TermInfo for just "foo", and then will
: continue and add up more and more TermInfo structure to its cache (or
: whatever else it does with them) until the pattern will no longer match. The

This is what rewriting does.

The crux of this thread basicly seems to by "why are two passes made" why 
do things like WildCardQuery and PrefixQuery have a rewrite method that 
does one pass to build up a list of terms, and then have Scorers that do a 
second pass of all documents that match those rewriten queries.

The answer is scoring: The vby rewriting things like WildCardQueries into 
TermQueries, the resulting queries can take into account the tf and idf of 
the individual terms.

An alternative like what you describe is in fact posisble with 
ConstantScoreQuery, and is exactly how ConstantScoreRangeQuery works - The 
Terms in the range are iterated exactly once and the docs are recorded, 
but those documents are all scored equally.  You can do the samething with 
any Filter -- Solr uses the PrefixFilter to do this instead of using 
PrefixQueries, it would also be fairly easy to write a generic Filter that 
could take in any TermEnum (so you could pass it a FilteredTermEnum like     
FuzzyTermEnum, RegexTermEnum, WildcardTermEnum, etc...)

: Obviously, queries sent to this searcher will have to pass a lighter
: QueryParser, so they keep their wildcards.

no, the QueryParser would just need to return instances of queries that 
are (or rewrite to) ConstantScoreQuery.

: This has obvious speed, accuracy, and simplicity gain. As I mentioned

Your "accuracy" claim is highly questionable - it would be as accurate 
from a "matching" standpoint, but most of hte useful scoring information 
would be completley lost.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33556-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 10 18:35:38 2008
Return-Path: <java-user-return-33556-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93635 invoked from network); 10 Apr 2008 18:35:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Apr 2008 18:35:38 -0000
Received: (qmail 67870 invoked by uid 500); 10 Apr 2008 18:35:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67591 invoked by uid 500); 10 Apr 2008 18:35:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67580 invoked by uid 99); 10 Apr 2008 18:35:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Apr 2008 11:35:31 -0700
X-ASF-Spam-Status: No, hits=-2.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cbmcgee@ca.ibm.com designates 32.97.182.145 as permitted sender)
Received: from [32.97.182.145] (HELO e5.ny.us.ibm.com) (32.97.182.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Apr 2008 18:34:48 +0000
Received: from d01relay04.pok.ibm.com (d01relay04.pok.ibm.com [9.56.227.236])
	by e5.ny.us.ibm.com (8.13.8/8.13.8) with ESMTP id m3AIYtEj025896
	for <java-user@lucene.apache.org>; Thu, 10 Apr 2008 14:34:55 -0400
Received: from d01av04.pok.ibm.com (d01av04.pok.ibm.com [9.56.224.64])
	by d01relay04.pok.ibm.com (8.13.8/8.13.8/NCO v8.7) with ESMTP id m3AIYtF6311710
	for <java-user@lucene.apache.org>; Thu, 10 Apr 2008 14:34:55 -0400
Received: from d01av04.pok.ibm.com (loopback [127.0.0.1])
	by d01av04.pok.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id m3AIYtot008638
	for <java-user@lucene.apache.org>; Thu, 10 Apr 2008 14:34:55 -0400
Received: from d25ml04.torolab.ibm.com (d25ml04.torolab.ibm.com [9.26.6.105])
	by d01av04.pok.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id m3AIYtJM008627
	for <java-user@lucene.apache.org>; Thu, 10 Apr 2008 14:34:55 -0400
To: java-user@lucene.apache.org
MIME-Version: 1.0
Subject: How to improve performance of large numbers of successive searches?
X-Mailer: Lotus Notes Release 7.0 HF242 April 21, 2006
From: Chris McGee <cbmcgee@ca.ibm.com>
X-MIMETrack: S/MIME Sign by Notes Client on Chris McGee/Ottawa/IBM(Release 7.0 HF242|April
 21, 2006) at 10/04/2008 02:33:01 PM,
	Serialize by Notes Client on Chris McGee/Ottawa/IBM(Release 7.0 HF242|April
 21, 2006) at 10/04/2008 02:33:01 PM,
	Serialize complete at 10/04/2008 02:33:01 PM,
	S/MIME Sign failed at 10/04/2008 02:33:01 PM: The cryptographic key was not
 found,
	Serialize by Router on D25ML04/25/M/IBM(Release 7.0.2HF446 | March 16, 2007) at
 04/10/2008 14:34:55,
	Serialize complete at 04/10/2008 14:34:55
Message-ID: <OF8D9A7DEC.A614F16F-ON85257427.0063340A-85257427.0065E73D@ca.ibm.com>
Date: Thu, 10 Apr 2008 14:34:32 -0400
Content-Type: multipart/alternative; boundary="=_alternative 0065E69185257427_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 0065E69185257427_=
Content-Type: text/plain; charset="US-ASCII"

Hello,

I am building fairly large directories (200-500 MB of disk space) using 
lucene-java. Sometimes it can take upwards of 10-15 mins to create the 
documents and write them to disk using my current configuration. I have 
upgraded to the latest 2.3.1 version and followed many of the 
recommendations offered on the wiki: 

http://wiki.apache.org/lucene-java/ImproveIndexingSpeed

These tips have significantly improved the time to build the directory and 
search it. However, I have noticed that when I perform term queries using 
a searcher many times in rapid succession and iterate over all of the hits 
it can take a significant time. To perform 1000 term query searches each 
with around 2000 hits it takes well over a minute. The time seems to vary 
linearly based on the number of searches (ie. 10 times more searches take 
10 times longer). I tried combining the searches into a BooleanQuery but 
it only shaves off a small percentage (5-10%) of the total time.

I was wondering if there is a faster way to retrieve all of the results 
for my large collections of terms without using more memory and without 
taking more time to build the directory? I already looked at bypassing the 
searcher and using the IndexReader.termDocs() method directly to retrieve 
the documents but there did not seem to be much performance improvement. 
In the majority of my cases I am simplying looking for a large number of 
values to the same field. Also, I'm not interested in scoring results 
based on frequency or weights I need to retrieve all of the results 
anyway.

Any help with this would be great.

Thanks,
Chris McGee
--=_alternative 0065E69185257427_=--

From java-user-return-33557-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 10 18:43:20 2008
Return-Path: <java-user-return-33557-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99522 invoked from network); 10 Apr 2008 18:43:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Apr 2008 18:43:20 -0000
Received: (qmail 75248 invoked by uid 500); 10 Apr 2008 18:43:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74264 invoked by uid 500); 10 Apr 2008 18:43:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74252 invoked by uid 99); 10 Apr 2008 18:43:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Apr 2008 11:43:13 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of leandro.rhcp99@gmail.com designates 216.239.58.188 as permitted sender)
Received: from [216.239.58.188] (HELO gv-out-0910.google.com) (216.239.58.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Apr 2008 18:42:31 +0000
Received: by gv-out-0910.google.com with SMTP id n8so102408gve.23
        for <java-user@lucene.apache.org>; Thu, 10 Apr 2008 11:42:41 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=Ou4fLDDBiHTMbgeqixtdVl4c0f10wq1DBRBuDDBB8cM=;
        b=Yv4MwQuSH1ZWTwEknbRzVdeFwQ++xl1NwgjlMkNUpifdVHz+QbMd4lV5SprWAqpt7VB0qNaB00ZfPcfx+pz3lAS3LvEAlkiRLqzyjpa94SM6XjxWlaiz57s1eUR7Vy33Ut0TQknXgbYnHxXgJJAnCNDUdmH9h2Pc3QR6wx7oiBI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=vIATltv2tP/ZsI0ii4jWcm/8oZHsJMh3ned131tmCWWadalNxbfYOvQ6rrUoh49z9EtCkZ3UBzrQSV1kCMb0mF/Dvf+l8Q9o+M7FLTSKqTqbvo3waZnMliYiz739GIW444vVFtgA3cMknwQvTgini1PyRTRT4CoazqRi0H1kKx4=
Received: by 10.151.103.11 with SMTP id f11mr2119799ybm.194.1207852960541;
        Thu, 10 Apr 2008 11:42:40 -0700 (PDT)
Received: by 10.150.143.20 with HTTP; Thu, 10 Apr 2008 11:42:40 -0700 (PDT)
Message-ID: <5d3ac70804101142y1d09d6bcpa5c007419cb2bf4c@mail.gmail.com>
Date: Thu, 10 Apr 2008 15:42:40 -0300
From: Leandro <leandro.rhcp99@gmail.com>
To: java-user@lucene.apache.org
Subject: Problem when try to make a bench of indexing (a dictionary with 120.000 words)
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_144_29343242.1207852960547"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_144_29343242.1207852960547
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello,

*Sample code:*
SpellChecker spell;
RAMDirectory dram = new RAMDirectory();
Dicionario dic = new Dicionario(); //one implementation of spell.Dictionary
spell= new SpellChecker(dram);
spell.indexDictionary(dic); //indexing...

*Then I got the:*
machine1: Windows XP SP2, Celerom 2.66GHz e 256MB
word: 60.000 (40~53 caracteres cada)
memory alloc: 16 (MB)
time to index: 55108 (ms)

So* I tried with 120.000 words* ... when I run the program ...

*Exception in thread "Thread-1"
org.apache.lucene.index.MergePolicy$MergeExceptio
n: java.lang.OutOfMemoryError: Java heap space
        at
org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(Conc
urrentMergeScheduler.java:271)
Caused by: java.lang.OutOfMemoryError: Java heap space
        at org.apache.lucene.store.RAMFile.newBuffer(RAMFile.java:88)
        at org.apache.lucene.store.RAMFile.addBuffer(RAMFile.java:61)
        at
org.apache.lucene.store.RAMOutputStream.switchCurrentBuffer(RAMOutput
Stream.java:128)
        at
org.apache.lucene.store.RAMOutputStream.writeByte(RAMOutputStream.jav
a:105)
...

*Why this occors?*
*

------=_Part_144_29343242.1207852960547--

From java-user-return-33558-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 10 20:18:44 2008
Return-Path: <java-user-return-33558-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37244 invoked from network); 10 Apr 2008 20:18:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Apr 2008 20:18:44 -0000
Received: (qmail 12805 invoked by uid 500); 10 Apr 2008 20:18:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12529 invoked by uid 500); 10 Apr 2008 20:18:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12518 invoked by uid 99); 10 Apr 2008 20:18:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Apr 2008 13:18:38 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.134.185 as permitted sender)
Received: from [209.85.134.185] (HELO mu-out-0910.google.com) (209.85.134.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Apr 2008 20:17:56 +0000
Received: by mu-out-0910.google.com with SMTP id g7so235609muf.0
        for <java-user@lucene.apache.org>; Thu, 10 Apr 2008 13:18:00 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=uvWg3YcDMQbubFCjg0evYBZ2aDTGgvDTLyq5wDo7UJY=;
        b=R4EzpIXb9Ajv+a+sdHTnBMZh3IvKFObuxvDRdAF16F4OM/NUNkc75jM/6uvGP0k52BpiQqiysDVZP1iGPh7Pmal/Gycqctzh3d2oYoT5lgzMZ40sh7yP4ADun9VHlrnOIhSBj3vaYLF9qwmI+kWviPECrMT1l5mbnbRSOXhRZIE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=WD4TEWOgpvYxQfLS3OSTnCJxlNDh2d2N6Vfaco+1DIIXH+wNRm4DLGE1Ev6HmVo/GbpZnmeglYw2LlhyseMh5gcqA12k6w0SLh3dy4iONT/pDj+M8Y6T3eoL/RhD43smyJrPfbgHaPKWlQ/uTpl8Ke8z3QCYQol4ej3kZ6S00NA=
Received: by 10.82.170.3 with SMTP id s3mr2972768bue.18.1207858680796;
        Thu, 10 Apr 2008 13:18:00 -0700 (PDT)
Received: by 10.82.191.6 with HTTP; Thu, 10 Apr 2008 13:18:00 -0700 (PDT)
Message-ID: <359a92830804101318l46a4a327j2552311db6126698@mail.gmail.com>
Date: Thu, 10 Apr 2008 16:18:00 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to improve performance of large numbers of successive searches?
In-Reply-To: <OF8D9A7DEC.A614F16F-ON85257427.0063340A-85257427.0065E73D@ca.ibm.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_15702_638368.1207858680777"
References: <OF8D9A7DEC.A614F16F-ON85257427.0063340A-85257427.0065E73D@ca.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_15702_638368.1207858680777
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

>From this <<< iterate over all of the hits>>> I infer that you're
using a Hits object. This is a no-no when getting more than 100
or so objects. In a nutshell, the query gets re-executed every 100
fetches. So your 2,000 hits are executing the query 20 times.

The Hits object is optimized for returning the top few scoring
documents rather than get the entire result set.

See HitCollector/TopDocs/TopDocCollector etc. for better ways
of doing this.

Also, if you're calling IndexReader.document(i) for each document
you'll inevitably take a lot of time as you're loading all of each document.
Think about lazy field loading (see FieldSelector).

Best
Erick

P.S. If this is totally off base, perhaps you could post some of the
code you think is slow....

On Thu, Apr 10, 2008 at 2:34 PM, Chris McGee <cbmcgee@ca.ibm.com> wrote:

> Hello,
>
> I am building fairly large directories (200-500 MB of disk space) using
> lucene-java. Sometimes it can take upwards of 10-15 mins to create the
> documents and write them to disk using my current configuration. I have
> upgraded to the latest 2.3.1 version and followed many of the
> recommendations offered on the wiki:
>
> http://wiki.apache.org/lucene-java/ImproveIndexingSpeed
>
> These tips have significantly improved the time to build the directory and
> search it. However, I have noticed that when I perform term queries using
> a searcher many times in rapid succession and iterate over all of the hits
> it can take a significant time. To perform 1000 term query searches each
> with around 2000 hits it takes well over a minute. The time seems to vary
> linearly based on the number of searches (ie. 10 times more searches take
> 10 times longer). I tried combining the searches into a BooleanQuery but
> it only shaves off a small percentage (5-10%) of the total time.
>
> I was wondering if there is a faster way to retrieve all of the results
> for my large collections of terms without using more memory and without
> taking more time to build the directory? I already looked at bypassing the
> searcher and using the IndexReader.termDocs() method directly to retrieve
> the documents but there did not seem to be much performance improvement.
> In the majority of my cases I am simplying looking for a large number of
> values to the same field. Also, I'm not interested in scoring results
> based on frequency or weights I need to retrieve all of the results
> anyway.
>
> Any help with this would be great.
>
> Thanks,
> Chris McGee

------=_Part_15702_638368.1207858680777--

From java-user-return-33559-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 10 20:22:14 2008
Return-Path: <java-user-return-33559-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38064 invoked from network); 10 Apr 2008 20:22:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Apr 2008 20:22:14 -0000
Received: (qmail 19420 invoked by uid 500); 10 Apr 2008 20:22:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19074 invoked by uid 500); 10 Apr 2008 20:22:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19063 invoked by uid 99); 10 Apr 2008 20:22:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Apr 2008 13:22:07 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.186 as permitted sender)
Received: from [209.85.128.186] (HELO fk-out-0910.google.com) (209.85.128.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Apr 2008 20:21:25 +0000
Received: by fk-out-0910.google.com with SMTP id 19so173346fkr.5
        for <java-user@lucene.apache.org>; Thu, 10 Apr 2008 13:21:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=8bzjtnkVeOOm8eaiGG3YtN/RhqMjhpDYQ0JAxV0befE=;
        b=bcnDUaR8T3RvY6ZAF+FFFi3l87pnTAKiPMkMMaZ8famW+HwHq3RjubOwLsuicbW3C3M6f26cUPUbzpDREUOjzIUxDOp+CWgoZpRr0itP4zc+cgdKpy2gF9hRcGUKS8k2Bqt+YiSAW65JIWj839JR3ioGO56G0ZGTTO1dyF8SHps=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=tlTlWkjbgsNcTARLjjsyoS0M5DrFvqkVQJ1qNIezSjvya/SNHp/orzdYmGCZ3VILaH266OEKAEWf/KJ0+pOymJJxio4en8R75cBvIC8OLQjmmqpORpBqkbqTzvMVfTlacxYWppyiDiMBiw6qEtSX3qDjH1o6i8eIoG3A7AqsceE=
Received: by 10.82.185.12 with SMTP id i12mr1885392buf.55.1207858893423;
        Thu, 10 Apr 2008 13:21:33 -0700 (PDT)
Received: by 10.82.191.6 with HTTP; Thu, 10 Apr 2008 13:21:33 -0700 (PDT)
Message-ID: <359a92830804101321ha2f945as189fc34c083a47cc@mail.gmail.com>
Date: Thu, 10 Apr 2008 16:21:33 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Problem when try to make a bench of indexing (a dictionary with 120.000 words)
In-Reply-To: <5d3ac70804101142y1d09d6bcpa5c007419cb2bf4c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_15713_814417.1207858893415"
References: <5d3ac70804101142y1d09d6bcpa5c007419cb2bf4c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_15713_814417.1207858893415
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

If tye 16M means you're only giving the process that much memory, it
surprises
me that it runs at all. Especially since you're putting it all in a RAMdir.

Or is that 16M referring to something else?

Best
Erick

On Thu, Apr 10, 2008 at 2:42 PM, Leandro <leandro.rhcp99@gmail.com> wrote:

> Hello,
>
> *Sample code:*
> SpellChecker spell;
> RAMDirectory dram = new RAMDirectory();
> Dicionario dic = new Dicionario(); //one implementation of
> spell.Dictionary
> spell= new SpellChecker(dram);
> spell.indexDictionary(dic); //indexing...
>
> *Then I got the:*
> machine1: Windows XP SP2, Celerom 2.66GHz e 256MB
> word: 60.000 (40~53 caracteres cada)
> memory alloc: 16 (MB)
> time to index: 55108 (ms)
>
> So* I tried with 120.000 words* ... when I run the program ...
>
> *Exception in thread "Thread-1"
> org.apache.lucene.index.MergePolicy$MergeExceptio
> n: java.lang.OutOfMemoryError: Java heap space
>        at
> org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(Conc
> urrentMergeScheduler.java:271)
> Caused by: java.lang.OutOfMemoryError: Java heap space
>        at org.apache.lucene.store.RAMFile.newBuffer(RAMFile.java:88)
>        at org.apache.lucene.store.RAMFile.addBuffer(RAMFile.java:61)
>        at
> org.apache.lucene.store.RAMOutputStream.switchCurrentBuffer(RAMOutput
> Stream.java:128)
>        at
> org.apache.lucene.store.RAMOutputStream.writeByte(RAMOutputStream.jav
> a:105)
> ...
>
> *Why this occors?*
> *
>

------=_Part_15713_814417.1207858893415--

From java-user-return-33560-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 10 20:36:07 2008
Return-Path: <java-user-return-33560-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43967 invoked from network); 10 Apr 2008 20:36:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Apr 2008 20:36:07 -0000
Received: (qmail 41782 invoked by uid 500); 10 Apr 2008 20:36:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41747 invoked by uid 500); 10 Apr 2008 20:36:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41736 invoked by uid 99); 10 Apr 2008 20:36:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Apr 2008 13:36:00 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of leandro.rhcp99@gmail.com designates 216.239.58.186 as permitted sender)
Received: from [216.239.58.186] (HELO gv-out-0910.google.com) (216.239.58.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Apr 2008 20:35:19 +0000
Received: by gv-out-0910.google.com with SMTP id n8so139037gve.23
        for <java-user@lucene.apache.org>; Thu, 10 Apr 2008 13:35:31 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=wLo9TwKNSJvovlD+g5yu9PjqPEybodIghSd4TmLeUDs=;
        b=gIjwzOiISN35rVvQpPaq9EjoYuTZsOC8D/ZFAZJoFvYgO/42TXy51Ebeha096j8URPEQJfBWE7C97skzP/qMzl+GYRbmzghLunJaS39wBp88S5dysia4xGSoxdwyHaXC/eLDJRpdFRtJzW3A1GMxohq2lFnCTuNe/9HTm0NKQ0c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=QMhRI/sFvtMktANrQR5z7caO1XX4qzv+j8QO0LMP8nDtUJfBqwmh9psc8z+7wn+9Owj9p78qMCRXL/t2ubUaYYbXxRGjLzyjDqbKR3sd0QZx6hG2GE2UIwOQLU6IdO33qT2pBXKmO15HDTnl6BKJbgSDHUYNbtm3OyYOj5nREkw=
Received: by 10.151.144.4 with SMTP id w4mr2285217ybn.199.1207859730185;
        Thu, 10 Apr 2008 13:35:30 -0700 (PDT)
Received: by 10.150.143.20 with HTTP; Thu, 10 Apr 2008 13:35:30 -0700 (PDT)
Message-ID: <5d3ac70804101335g21a7bfc7v1df32b5c6e0dfb81@mail.gmail.com>
Date: Thu, 10 Apr 2008 17:35:30 -0300
From: Leandro <leandro.rhcp99@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Problem when try to make a bench of indexing (a dictionary with 120.000 words)
In-Reply-To: <359a92830804101321ha2f945as189fc34c083a47cc@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_636_17659873.1207859730210"
References: <5d3ac70804101142y1d09d6bcpa5c007419cb2bf4c@mail.gmail.com>
	 <359a92830804101321ha2f945as189fc34c083a47cc@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_636_17659873.1207859730210
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

>
> If tye 16M means you're only giving the process that much memory, it
> surprises
> me that it runs at all. Especially since you're putting it all in a
> RAMdir.
>

Sorry that 16M is dictonarySizeInBytes() I would imagine that it is the same
size of index...

Well when I start to use a Dictonary with more than 60.000 need I to use
FSDirectory?



>
> Or is that 16M referring to something else?


Just Dictonary size...
:(


>
> Best
> Erick
>

------=_Part_636_17659873.1207859730210--

From java-user-return-33561-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 10 21:27:50 2008
Return-Path: <java-user-return-33561-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4089 invoked from network); 10 Apr 2008 21:27:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Apr 2008 21:27:49 -0000
Received: (qmail 60868 invoked by uid 500); 10 Apr 2008 21:27:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60823 invoked by uid 500); 10 Apr 2008 21:27:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60811 invoked by uid 99); 10 Apr 2008 21:27:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Apr 2008 14:27:43 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of adb@teamware.com designates 212.226.92.15 as permitted sender)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Apr 2008 21:27:02 +0000
Received: from intrepid.teamw.com (intrepid.teamw.com [10.142.128.11])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id m3ALQxcW007614
	for <java-user@lucene.apache.org>; Fri, 11 Apr 2008 00:26:59 +0300
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz.teamw.com with ESMTP
	 id m4b0qit0; 11 Apr 2008 00:26:00 +0300
Message-ID: <47FE8622.8010001@teamware.com>
Date: Fri, 11 Apr 2008 07:26:58 +1000
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: How to improve performance of large numbers of successive searches?
References: <OF8D9A7DEC.A614F16F-ON85257427.0063340A-85257427.0065E73D@ca.ibm.com>
In-Reply-To: <OF8D9A7DEC.A614F16F-ON85257427.0063340A-85257427.0065E73D@ca.ibm.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Fri, 11 Apr 2008 00:26:59 +0300 (EEST)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0.001, required 5,
	autolearn=not spam, BAYES_50 0.00)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Chris McGee wrote:
> 
> These tips have significantly improved the time to build the directory and 
> search it. However, I have noticed that when I perform term queries using 
> a searcher many times in rapid succession and iterate over all of the hits 
> it can take a significant time. To perform 1000 term query searches each 
> with around 2000 hits it takes well over a minute. The time seems to vary 

If you are searching using Hits = searcher.search() then you should use a 
HitCollector, or the TopDocs method instead.  Iterating over Hits will cause the 
search to be remade every 100 hits.

Antony



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33562-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 10 22:17:02 2008
Return-Path: <java-user-return-33562-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70689 invoked from network); 10 Apr 2008 22:17:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Apr 2008 22:17:01 -0000
Received: (qmail 38385 invoked by uid 500); 10 Apr 2008 22:16:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38348 invoked by uid 500); 10 Apr 2008 22:16:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38336 invoked by uid 99); 10 Apr 2008 22:16:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Apr 2008 15:16:55 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.49.249] (HELO web52002.mail.re2.yahoo.com) (206.190.49.249)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 10 Apr 2008 22:16:04 +0000
Received: (qmail 4164 invoked by uid 60001); 10 Apr 2008 22:16:23 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=a+UCY84MF8rgEzcVTPJcCe4yJYwhowuAEEmr6z0n3qjWzuTywBXEIGNXr1xAfI6dcfrZwT7IvvWjkZESyQsD2QDSpZmi1aDuNl7QC5YvSUtNG38+UhmuXO2LZ6uT4VkV0Skc6iJn4d9l4XPN5G6QWy7ug/Gl1fpcw5XhLl4WfL4=;
X-YMail-OSG: 7VNJQJ0VM1lOD1griJMYTpYyT.HTAHLq1EEcS5SJ
Received: from [12.162.3.126] by web52002.mail.re2.yahoo.com via HTTP; Thu, 10 Apr 2008 15:16:23 PDT
Date: Thu, 10 Apr 2008 15:16:23 -0700 (PDT)
From: Rajesh parab <rajesh_parab_1@yahoo.com>
Subject: Lucene index on relational data
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
Message-ID: <430045.4136.qm@web52002.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

We are using Lucene 2.0 to index data stored inside
relational database. Like any relational database, our
database has quite a few one-to-one and one-to-many
relationships. For example, lets say an Object A has
one-to-many relationship with Object X and Object Y.
As we need to de-normalize relational data as
key-value pairs before storing it inside Lucene index,
we have de-normalized these relationships (Object X
and Object Y) while building an index on Object A.

We have large no of such object relationships and most
of the times, the related objects are modified more
frequently than the base objects. For example, in our
above case, objects X and Y are updated in the system
very frequently, whereas Object A is not updated that
often. Still, we will need to update Object A entries
inside the index, every time its related objects X
and/or Y are modified.

To avoid the above situation, we were thinking of
having 2 separate indexes  first index will only
index data of base objects (Object A in above example)
and second index will contain data about its
relationship objects (Object X and Y above), which are
updated more frequently. This way, the more frequent
updates to Object X and Y will only impact second
index that stores relationship information and reduce
the cost to re-index object A. However, I dont think,
MultiSearcher will be helpful if we want to search for
data which spans across both indexes (e.g. some fields
of Object A in first index and some fields of Object X
or Y in second index).

Do we have any option in Lucene to handle such
scenario? Can we search across multiple indexes which
have some relationships between them and search for
fields that span across these indexes?

Regards,
Rajesh

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33563-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 11 02:16:18 2008
Return-Path: <java-user-return-33563-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4671 invoked from network); 11 Apr 2008 02:16:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Apr 2008 02:16:17 -0000
Received: (qmail 59832 invoked by uid 500); 11 Apr 2008 02:16:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59008 invoked by uid 500); 11 Apr 2008 02:16:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58997 invoked by uid 99); 11 Apr 2008 02:16:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Apr 2008 19:16:11 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [65.89.232.7] (HELO thebluezone.net) (65.89.232.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Apr 2008 02:15:26 +0000
Received: from localhost (localhost [127.0.0.1])
	by thebluezone.net (Postfix) with ESMTP id B6F8A286C78
	for <java-user@lucene.apache.org>; Thu, 10 Apr 2008 20:15:36 -0600 (MDT)
Received: from thebluezone.net ([127.0.0.1])
	by localhost (mail1 [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
	id 25349-07 for <java-user@lucene.apache.org>;
	Thu, 10 Apr 2008 20:15:31 -0600 (MDT)
Received: from desktop (unknown [65.89.233.61])
	by thebluezone.net (Postfix) with ESMTP id 43516286C7D
	for <java-user@lucene.apache.org>; Thu, 10 Apr 2008 20:15:31 -0600 (MDT)
From: "John Griffin" <jgriffin@thebluezone.net>
To: <java-user@lucene.apache.org>
References: <FD98FC13DC8A8A40BBA504AE516F96AE1232CE5B@boc002ex.ccrn.com>
Subject: RE: Use of Lucene  for DB Search
Date: Thu, 10 Apr 2008 20:15:22 -0600
Message-ID: <004301c89b79$e6323fa0$f93c10ac@desktop>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0044_01C89B47.9B97CFA0"
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <FD98FC13DC8A8A40BBA504AE516F96AE1232CE5B@boc002ex.ccrn.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
Thread-Index: AcibEsA4Ihvi1u9bQwmsauj8M9cA9gAZq5wA
X-Virus-Scanned: by thebluezone.net
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0044_01C89B47.9B97CFA0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable

Prashant,

=20

In addition to the other suggestions, take a look at Hibernate Search at =
http://www.hibernate.org/410.html.

It is specifically designed for full text search in DBs.

=20

John G

=20

  _____ =20

From: Prashant Saraf [mailto:psaraf@cctc.com]=20
Sent: Thursday, April 10, 2008 7:57 AM
To: java-user@lucene.apache.org
Subject: Use of Lucene for DB Search

=20

Hi,

             We are planning to provide search functionality in the a =
web base application. Can we use Lucene for it to search data from =
database like oracle and MS-Sql?

=20

=20

Thanks and Regards
       =E0=A4=AA=E0=A5=8D=E0=A4=B0=E0=A4=B6=E0=A4=BE=E0=A4=82=E0=A4=A4 =
=E0=A4=B8=E0=A4=B0=E0=A4=BE=E0=A4=AB
(Prashant Saraf)
SE-II
Cross Country Infotech
Ext : 72543
www.crosscountry.in


------=_NextPart_000_0044_01C89B47.9B97CFA0--


From java-user-return-33564-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 11 02:46:22 2008
Return-Path: <java-user-return-33564-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21078 invoked from network); 11 Apr 2008 02:46:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Apr 2008 02:46:22 -0000
Received: (qmail 80453 invoked by uid 500); 11 Apr 2008 02:46:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80413 invoked by uid 500); 11 Apr 2008 02:46:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80402 invoked by uid 99); 11 Apr 2008 02:46:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Apr 2008 19:46:17 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of liccohu@hotmail.com designates 65.54.246.236 as permitted sender)
Received: from [65.54.246.236] (HELO bay0-omc3-s36.bay0.hotmail.com) (65.54.246.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Apr 2008 02:45:33 +0000
Received: from BAY113-DS3 ([65.54.168.90]) by bay0-omc3-s36.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Thu, 10 Apr 2008 19:45:45 -0700
X-Originating-IP: [222.66.106.34]
X-Originating-Email: [liccohu@hotmail.com]
Message-ID: <BAY113-DS34214AE53205CA99F2600B8EF0@phx.gbl>
From: "kai.hu" <liccohu@hotmail.com>
In-Reply-To: <b8eccf4d0804100553v4c0d8809nd961028ea0d21a79@mail.gmail.com>
To: <java-user@lucene.apache.org>
References: <b8eccf4d0804100553v4c0d8809nd961028ea0d21a79@mail.gmail.com>
Subject: about NullPointerException in DocumentsWriter$ThreadState.init(DocumentsWriter.java:751)
Date: Fri, 11 Apr 2008 10:45:47 +0800
MIME-Version: 1.0
X-Unsent: 1
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
Importance: Normal
X-Mailer: Microsoft Windows Live Mail 12.0.1606
X-MimeOLE: Produced By Microsoft MimeOLE V12.0.1606
X-OriginalArrivalTime: 11 Apr 2008 02:45:45.0448 (UTC) FILETIME=[24226E80:01C89B7E]
X-Virus-Checked: Checked by ClamAV on apache.org


 i got a problem yesterday,
 java.lang.NullPointerException
 at 
org.apache.lucene.index.DocumentsWriter$ThreadState.init(DocumentsWriter.java:751)
 at 
org.apache.lucene.index.DocumentsWriter.getThreadState(DocumentsWriter.java:2391)
 at 
org.apache.lucene.index.DocumentsWriter.updateDocument(DocumentsWriter.java:2434)
 at 
org.apache.lucene.index.DocumentsWriter.addDocument(DocumentsWriter.java:2422)
 at org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:1445)
 at org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:1424)

 so i debug the code ,found if the document add a null Field,it will throw 
this Exception. 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33565-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 11 05:26:55 2008
Return-Path: <java-user-return-33565-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89900 invoked from network); 11 Apr 2008 05:26:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Apr 2008 05:26:55 -0000
Received: (qmail 88644 invoked by uid 500); 11 Apr 2008 05:26:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88608 invoked by uid 500); 11 Apr 2008 05:26:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88597 invoked by uid 99); 11 Apr 2008 05:26:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Apr 2008 22:26:48 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of shalinmangar@gmail.com designates 209.85.198.249 as permitted sender)
Received: from [209.85.198.249] (HELO rv-out-0506.google.com) (209.85.198.249)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Apr 2008 05:26:04 +0000
Received: by rv-out-0506.google.com with SMTP id k29so26308rvb.5
        for <java-user@lucene.apache.org>; Thu, 10 Apr 2008 22:26:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=SrX276ZnCKJhUFZ5nmUsbYL5L/ofDItS7xu3IlO5wGY=;
        b=D7v4WBPLb+6GeHDaf3f/W7NfYz8d3AZSJTTRiFN1BUZObNjzPWV2WxpNbBj8mTT1Gan/Yke8PkG5NuFfqHTcJptA4JM00Z6KsCd8sVqGx7C6CaPJBnsY9MZXHbUjpmrTCTogUXoHBl4Zz4NGx0sKFxDvDuvMLQPyG98zMqC2Flw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=GeWZ5WFK2r5+5x0/mLnPjnH4E1NBd4g/8YAd6fUYavG2GWsj37/rxvG95dml8DQohWoTVDkTVSR7pkZKNLqdQoNi6z3RDZboSSUEqLSSgS5zrKf1zfJN8LUZKEF+R3DjoFKGzC3y3WNeFe5bR1qe0WjPSNw3UaQ6n54J/w64m1k=
Received: by 10.140.136.6 with SMTP id j6mr1257604rvd.199.1207891577109;
        Thu, 10 Apr 2008 22:26:17 -0700 (PDT)
Received: by 10.141.15.16 with HTTP; Thu, 10 Apr 2008 22:26:17 -0700 (PDT)
Message-ID: <69de18140804102226q6045ba1sab6107bce24dc392@mail.gmail.com>
Date: Fri, 11 Apr 2008 10:56:17 +0530
From: "Shalin Shekhar Mangar" <shalinmangar@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Use of Lucene for DB Search
In-Reply-To: <FD98FC13DC8A8A40BBA504AE516F96AE1232CE5B@boc002ex.ccrn.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_41120_14595139.1207891577078"
References: <FD98FC13DC8A8A40BBA504AE516F96AE1232CE5B@boc002ex.ccrn.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_41120_14595139.1207891577078
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

SGkgUHJhc2hhbnQsCgpJdCB3b3VsZCBoZWxwIHRvIHRha2UgYSBsb29rIGF0IERhdGFJbXBvcnRI
YW5kbGVyIChpbiBkZXZlbG9wbWVudCkgaW4gU29sci4KU29sciBpcyBidWlsdCB0byBiZSB1c2Vk
IGluIGEgd2ViIGFwcGxpY2F0aW9ucyBhbmQgRGF0YUltcG9ydEhhbmRsZXIgaXMKYnVpbHQgdG8g
YmUgdXNlZCB0byBpbXBvcnQgZGF0YSBmcm9tIGRhdGFiYXNlcy4KCmh0dHA6Ly9sdWNlbmUuYXBh
Y2hlLm9yZy9zb2xyLwpodHRwOi8vd2lraS5hcGFjaGUub3JnL3NvbHIvRGF0YUltcG9ydEhhbmRs
ZXIKCk9uIFRodSwgQXByIDEwLCAyMDA4IGF0IDc6MjcgUE0sIFByYXNoYW50IFNhcmFmIDxwc2Fy
YWZAY2N0Yy5jb20+IHdyb3RlOgoKPiAgSGksCj4KPiAgICAgICAgICAgICAgV2UgYXJlIHBsYW5u
aW5nIHRvIHByb3ZpZGUgc2VhcmNoIGZ1bmN0aW9uYWxpdHkgaW4gdGhlIGEgd2ViCj4gYmFzZSBh
cHBsaWNhdGlvbi4gQ2FuIHdlIHVzZSBMdWNlbmUgZm9yIGl0IHRvIHNlYXJjaCBkYXRhIGZyb20g
ZGF0YWJhc2UgbGlrZQo+IG9yYWNsZSBhbmQgTVMtU3FsPwo+Cj4KPgo+Cj4KPiBUaGFua3MgYW5k
IFJlZ2FyZHMKPiAgICAgICAg4KSq4KWN4KSw4KS24KS+4KSC4KSkIOCkuOCksOCkvuCkqwo+IChQ
cmFzaGFudCBTYXJhZikKPiBTRS1JSQo+IENyb3NzIENvdW50cnkgSW5mb3RlY2gKPiBFeHQgOiA3
MjU0Mwo+IHd3dy5jcm9zc2NvdW50cnkuaW4KPgo+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQo+IFRvIHVuc3Vic2Ny
aWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZwo+IEZv
ciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFj
aGUub3JnCj4KCgoKLS0gClJlZ2FyZHMsClNoYWxpbiBTaGVraGFyIE1hbmdhci4K
------=_Part_41120_14595139.1207891577078--

From java-user-return-33566-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 11 06:33:10 2008
Return-Path: <java-user-return-33566-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48446 invoked from network); 11 Apr 2008 06:33:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Apr 2008 06:33:10 -0000
Received: (qmail 50004 invoked by uid 500); 11 Apr 2008 06:33:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49968 invoked by uid 500); 11 Apr 2008 06:33:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49957 invoked by uid 99); 11 Apr 2008 06:33:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Apr 2008 23:33:03 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [130.225.24.87] (HELO luna.statsbiblioteket.dk) (130.225.24.87)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Apr 2008 06:32:13 +0000
Received: from [172.18.249.244] (PC990.sb.statsbiblioteket.dk [172.18.249.244])
 by luna.statsbiblioteket.dk
 (iPlanet Messaging Server 5.2 HotFix 1.16 (built May 14 2003))
 with ESMTP id <0JZ500LN1E69X7@luna.statsbiblioteket.dk> for
 java-user@lucene.apache.org; Fri, 11 Apr 2008 08:32:34 +0200 (MEST)
Date: Fri, 11 Apr 2008 08:32:33 +0200
From: Toke Eskildsen <te@statsbiblioteket.dk>
Subject: Re: Problem when try to make a bench of indexing (a dictionary	with
 120.000 words)
In-reply-to: <5d3ac70804101142y1d09d6bcpa5c007419cb2bf4c@mail.gmail.com>
To: java-user@lucene.apache.org
Reply-to: te@statsbiblioteket.dk
Message-id: <1207895553.9126.564.camel@PC990.sb.statsbiblioteket.dk>
Organization: Statsbiblioteket
MIME-version: 1.0
X-Mailer: Evolution 2.8.3 (2.8.3-2.fc6)
Content-type: text/plain
Content-transfer-encoding: 7BIT
References: <5d3ac70804101142y1d09d6bcpa5c007419cb2bf4c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, 2008-04-10 at 15:42 -0300, Leandro wrote:
> machine1: Windows XP SP2, Celerom 2.66GHz e 256MB

If that is a physical machine (as opposed to virtual), then the amount
of RAM if not at all well balanced against the processor speed.

> [...] java.lang.OutOfMemoryError: Java heap space

How much memory do you allocate for the whole JVM? If you're not sure,
then you're probably using the default, which is probably 64MB for your
machine. If so, you can try allocating more memory for the JVM:
java -Xmx=128m -jar LeandroApplication.jar


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33567-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 11 08:09:40 2008
Return-Path: <java-user-return-33567-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89881 invoked from network); 11 Apr 2008 08:09:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Apr 2008 08:09:40 -0000
Received: (qmail 62130 invoked by uid 500); 11 Apr 2008 08:09:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62100 invoked by uid 500); 11 Apr 2008 08:09:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62089 invoked by uid 99); 11 Apr 2008 08:09:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Apr 2008 01:09:34 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [213.162.48.15] (HELO soufre.accelance.net) (213.162.48.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Apr 2008 08:08:50 +0000
Received: from [192.168.3.105] (LSt-Amand-152-32-31-90.w82-127.abo.wanadoo.fr [82.127.74.90])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by soufre.accelance.net (Postfix) with ESMTP id 6936C45033
	for <java-user@lucene.apache.org>; Fri, 11 Apr 2008 10:08:55 +0200 (CEST)
Message-ID: <47FF1C96.3040604@garambrogne.net>
Date: Fri, 11 Apr 2008 10:08:54 +0200
From: Mathieu Lecarme <mathieu@garambrogne.net>
User-Agent: Thunderbird 2.0.0.12 (X11/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene index on relational data
References: <430045.4136.qm@web52002.mail.re2.yahoo.com>
In-Reply-To: <430045.4136.qm@web52002.mail.re2.yahoo.com>
X-Enigmail-Version: 0.95.6
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Have a look at Compass 2.0M3
http://www.kimchy.org/searchable-cascading-mapping/

Your multiple index will be nice for massive write. In a classical 
read/write ratio, Compass will be much easier.

M.

Rajesh parab a crit :
> Hi,
>
> We are using Lucene 2.0 to index data stored inside
> relational database. Like any relational database, our
> database has quite a few one-to-one and one-to-many
> relationships. For example, lets say an Object A has
> one-to-many relationship with Object X and Object Y.
> As we need to de-normalize relational data as
> key-value pairs before storing it inside Lucene index,
> we have de-normalized these relationships (Object X
> and Object Y) while building an index on Object A.
>
> We have large no of such object relationships and most
> of the times, the related objects are modified more
> frequently than the base objects. For example, in our
> above case, objects X and Y are updated in the system
> very frequently, whereas Object A is not updated that
> often. Still, we will need to update Object A entries
> inside the index, every time its related objects X
> and/or Y are modified.
>
> To avoid the above situation, we were thinking of
> having 2 separate indexes  first index will only
> index data of base objects (Object A in above example)
> and second index will contain data about its
> relationship objects (Object X and Y above), which are
> updated more frequently. This way, the more frequent
> updates to Object X and Y will only impact second
> index that stores relationship information and reduce
> the cost to re-index object A. However, I dont think,
> MultiSearcher will be helpful if we want to search for
> data which spans across both indexes (e.g. some fields
> of Object A in first index and some fields of Object X
> or Y in second index).
>
> Do we have any option in Lucene to handle such
> scenario? Can we search across multiple indexes which
> have some relationships between them and search for
> fields that span across these indexes?
>
> Regards,
> Rajesh
>
> __________________________________________________
> Do You Yahoo!?
> Tired of spam?  Yahoo! Mail has the best spam protection around 
> http://mail.yahoo.com 
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33568-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 11 10:20:58 2008
Return-Path: <java-user-return-33568-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80885 invoked from network); 11 Apr 2008 10:20:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Apr 2008 10:20:58 -0000
Received: (qmail 21105 invoked by uid 500); 11 Apr 2008 10:20:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20709 invoked by uid 500); 11 Apr 2008 10:20:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20698 invoked by uid 99); 11 Apr 2008 10:20:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Apr 2008 03:20:50 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of adb@teamware.com designates 212.226.92.15 as permitted sender)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Apr 2008 10:20:00 +0000
Received: from intrepid.teamw.com (intrepid.teamw.com [10.142.128.11])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id m3BAK22q001134
	for <java-user@lucene.apache.org>; Fri, 11 Apr 2008 13:20:02 +0300
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz.teamw.com with ESMTP
	 id m4bdj_aa; 11 Apr 2008 13:19:00 +0300
Message-ID: <47FF3B35.4000705@teamware.com>
Date: Fri, 11 Apr 2008 20:19:33 +1000
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Using Lucene partly as DB and 'joining' search results.
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Fri, 11 Apr 2008 13:20:02 +0300 (EEST)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0.001, required 5,
	autolearn=not spam, BAYES_50 0.00)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

We're planning to archive email over many years and have been looking at using 
DB to store mail meta data and Lucene for the indexed mail data, or just Lucene 
on its own with email data and structure stored as XML and the raw message 
stored in the file system.

For some customers, the volumes are likely to be well over 1 billion mails over
10 years, so some  partitioning of data is needed.  At the moment the thoughts
are moving away from using a DB + Lucene to just Lucene along with a file system
representation of the complete message.  All searches will be against the index 
then the XML mail meta data is loaded from the file system.

The archive is read only apart from bulk deletes, but one of the requirements is 
for users to be able to label their own mail.  Given that a Lucene Document 
cannot be updated, I have thought about having a separate Lucene index that has 
just the 3 terms (or some combination of) userId + mailId + label.

That of course would mean joining searches from the main mail data index and the 
label index.

Does anyone have any experience of using Lucene this way and is it a realistic 
option of avoiding the DB at all?  I'd rather the headache of scaling just 
Lucene, which is a simple beast, than the whole bundle of 'stuff' that comes 
with the database as well.

Antony




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33569-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 11 11:44:09 2008
Return-Path: <java-user-return-33569-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35171 invoked from network); 11 Apr 2008 11:44:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Apr 2008 11:44:09 -0000
Received: (qmail 97997 invoked by uid 500); 11 Apr 2008 11:44:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97966 invoked by uid 500); 11 Apr 2008 11:44:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97955 invoked by uid 99); 11 Apr 2008 11:44:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Apr 2008 04:44:02 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [66.249.82.224] (HELO wx-out-0506.google.com) (66.249.82.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Apr 2008 11:43:16 +0000
Received: by wx-out-0506.google.com with SMTP id i28so514448wxd.20
        for <java-user@lucene.apache.org>; Fri, 11 Apr 2008 04:43:26 -0700 (PDT)
Received: by 10.70.32.2 with SMTP id f2mr3227567wxf.63.1207914206069;
        Fri, 11 Apr 2008 04:43:26 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id i19sm10390158wxd.33.2008.04.11.04.43.24
        (version=TLSv1/SSLv3 cipher=OTHER);
        Fri, 11 Apr 2008 04:43:25 -0700 (PDT)
In-Reply-To: <BAY113-DS34214AE53205CA99F2600B8EF0@phx.gbl>
References: <b8eccf4d0804100553v4c0d8809nd961028ea0d21a79@mail.gmail.com> <BAY113-DS34214AE53205CA99F2600B8EF0@phx.gbl>
Mime-Version: 1.0 (Apple Message framework v753)
X-Priority: 3
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <7DF7A11D-F492-42DC-9E17-3EDFEDE7435A@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: about NullPointerException in DocumentsWriter$ThreadState.init(DocumentsWriter.java:751)
Date: Fri, 11 Apr 2008 07:43:46 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


I think this is something you just shouldn't do?

Ie, if you call Document.addField(null), it is silently accepted and  
then causes that exception when added the document, but my feeling is  
you shouldn't do that.

Mike

kai.hu wrote:
>
> i got a problem yesterday,
> java.lang.NullPointerException
> at org.apache.lucene.index.DocumentsWriter$ThreadState.init 
> (DocumentsWriter.java:751)
> at org.apache.lucene.index.DocumentsWriter.getThreadState 
> (DocumentsWriter.java:2391)
> at org.apache.lucene.index.DocumentsWriter.updateDocument 
> (DocumentsWriter.java:2434)
> at org.apache.lucene.index.DocumentsWriter.addDocument 
> (DocumentsWriter.java:2422)
> at org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java: 
> 1445)
> at org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java: 
> 1424)
>
> so i debug the code ,found if the document add a null Field,it will  
> throw this Exception.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33570-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 11 11:50:38 2008
Return-Path: <java-user-return-33570-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76141 invoked from network); 11 Apr 2008 11:50:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Apr 2008 11:50:38 -0000
Received: (qmail 9998 invoked by uid 500); 11 Apr 2008 11:50:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9972 invoked by uid 500); 11 Apr 2008 11:50:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9961 invoked by uid 99); 11 Apr 2008 11:50:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Apr 2008 04:50:32 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [213.162.48.15] (HELO soufre.accelance.net) (213.162.48.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Apr 2008 11:49:50 +0000
Received: from [192.168.3.105] (LSt-Amand-152-32-31-90.w82-127.abo.wanadoo.fr [82.127.74.90])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by soufre.accelance.net (Postfix) with ESMTP id D89B74533C
	for <java-user@lucene.apache.org>; Fri, 11 Apr 2008 13:50:00 +0200 (CEST)
Message-ID: <47FF5067.8010902@garambrogne.net>
Date: Fri, 11 Apr 2008 13:49:59 +0200
From: Mathieu Lecarme <mathieu@garambrogne.net>
User-Agent: Thunderbird 2.0.0.12 (X11/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Using Lucene partly as DB and 'joining' search results.
References: <47FF3B35.4000705@teamware.com>
In-Reply-To: <47FF3B35.4000705@teamware.com>
X-Enigmail-Version: 0.95.6
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Antony Bowesman a crit :
> We're planning to archive email over many years and have been looking 
> at using DB to store mail meta data and Lucene for the indexed mail 
> data, or just Lucene on its own with email data and structure stored 
> as XML and the raw message stored in the file system.
>
> For some customers, the volumes are likely to be well over 1 billion 
> mails over
> 10 years, so some  partitioning of data is needed.  At the moment the 
> thoughts
> are moving away from using a DB + Lucene to just Lucene along with a 
> file system
> representation of the complete message.  All searches will be against 
> the index then the XML mail meta data is loaded from the file system.
>
> The archive is read only apart from bulk deletes, but one of the 
> requirements is for users to be able to label their own mail.  Given 
> that a Lucene Document cannot be updated, I have thought about having 
> a separate Lucene index that has just the 3 terms (or some combination 
> of) userId + mailId + label.
>
> That of course would mean joining searches from the main mail data 
> index and the label index.
>
> Does anyone have any experience of using Lucene this way and is it a 
> realistic option of avoiding the DB at all?  I'd rather the headache 
> of scaling just Lucene, which is a simple beast, than the whole bundle 
> of 'stuff' that comes with the database as well.
Use Filter and BitSet.
 From the personnal data, you build a Filter 
(http://lucene.apache.org/java/2_3_1/api/org/apache/lucene/search/Filter.html) 
wich is used in the main index.

M.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33571-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 11 16:06:36 2008
Return-Path: <java-user-return-33571-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34880 invoked from network); 11 Apr 2008 16:06:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Apr 2008 16:06:36 -0000
Received: (qmail 87362 invoked by uid 500); 11 Apr 2008 16:06:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87186 invoked by uid 500); 11 Apr 2008 16:06:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87175 invoked by uid 99); 11 Apr 2008 16:06:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Apr 2008 09:06:29 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.109.24.30] (HELO smtp-vbr10.xs4all.nl) (194.109.24.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Apr 2008 16:05:46 +0000
Received: from k8u.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr10.xs4all.nl (8.13.8/8.13.8) with ESMTP id m3BG5v8p014562
	for <java-user@lucene.apache.org>; Fri, 11 Apr 2008 18:05:58 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Using Lucene partly as DB and 'joining' search results.
Date: Fri, 11 Apr 2008 18:05:57 +0200
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <47FF3B35.4000705@teamware.com> <47FF5067.8010902@garambrogne.net>
In-Reply-To: <47FF5067.8010902@garambrogne.net>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200804111805.57393.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Op Friday 11 April 2008 13:49:59 schreef Mathieu Lecarme:
> Antony Bowesman a =E9crit :
> > We're planning to archive email over many years and have been
> > looking at using DB to store mail meta data and Lucene for the
> > indexed mail data, or just Lucene on its own with email data and
> > structure stored as XML and the raw message stored in the file
> > system.
> >
> > For some customers, the volumes are likely to be well over 1
> > billion mails over
> > 10 years, so some  partitioning of data is needed.  At the moment
> > the thoughts
> > are moving away from using a DB + Lucene to just Lucene along with
> > a file system
> > representation of the complete message.  All searches will be
> > against the index then the XML mail meta data is loaded from the
> > file system.
> >
> > The archive is read only apart from bulk deletes, but one of the
> > requirements is for users to be able to label their own mail.=20
> > Given that a Lucene Document cannot be updated, I have thought
> > about having a separate Lucene index that has just the 3 terms (or
> > some combination of) userId + mailId + label.
> >
> > That of course would mean joining searches from the main mail data
> > index and the label index.
> >
> > Does anyone have any experience of using Lucene this way and is it
> > a realistic option of avoiding the DB at all?  I'd rather the
> > headache of scaling just Lucene, which is a simple beast, than the
> > whole bundle of 'stuff' that comes with the database as well.
>
> Use Filter and BitSet.
>  From the personnal data, you build a Filter
> (http://lucene.apache.org/java/2_3_1/api/org/apache/lucene/search/Fil
>ter.html) wich is used in the main index.

With 1 billion mails, and possibly a Filter per user, you may want to
use more compact filters than BitSets, which is currently possible
in the development trunk of lucene.

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33572-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 11 16:40:59 2008
Return-Path: <java-user-return-33572-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51978 invoked from network); 11 Apr 2008 16:40:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Apr 2008 16:40:59 -0000
Received: (qmail 39102 invoked by uid 500); 11 Apr 2008 16:40:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39070 invoked by uid 500); 11 Apr 2008 16:40:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39059 invoked by uid 99); 11 Apr 2008 16:40:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Apr 2008 09:40:52 -0700
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=MSGID_FROM_MTA_HEADER,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of atamer@sympatico.ca designates 65.54.246.233 as permitted sender)
Received: from [65.54.246.233] (HELO bay0-omc3-s33.bay0.hotmail.com) (65.54.246.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Apr 2008 16:39:59 +0000
Received: from BAYC1-PASMTP07 ([65.54.191.167]) by bay0-omc3-s33.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 11 Apr 2008 09:40:19 -0700
X-Originating-IP: [209.167.138.140]
X-Originating-Email: [atamer@sympatico.ca]
Message-ID: <BAYC1-PASMTP07955A21329DED286C32D1BFEF0@CEZ.ICE>
Received: from ATAMER ([209.167.138.140]) by BAYC1-PASMTP07.CEZ.ICE over TLS secured channel with Microsoft SMTPSVC(6.0.3790.2668);
	 Fri, 11 Apr 2008 09:40:19 -0700
From: "Allen Atamer" <atamer@sympatico.ca>
To: <java-user@lucene.apache.org>
References: <1207691476.26917.ezmlm@lucene.apache.org> <BAYC1-PASMTP0766AC7F31E8BC9EA6C548BFF20@CEZ.ICE> <47FC7361.5070601@garambrogne.net>
Subject: RE: designing a dictionary filter with multiple word entries
Date: Fri, 11 Apr 2008 12:40:17 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 11
thread-index: AciaFV54zny79j+3QP2ucE9+TUahagB3NLjg
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
In-Reply-To: <47FC7361.5070601@garambrogne.net>
X-OriginalArrivalTime: 11 Apr 2008 16:40:19.0230 (UTC) FILETIME=[BA6F33E0:01C89BF2]
X-Virus-Checked: Checked by ClamAV on apache.org

Mathieu,
Your suggestion pointed me in the right direction. I was using a private
queue instead of using the inherited TokenStream from the superclass.
Thanks.

However that still didn't stop the PhraseQuery problem from happening. I
instead needed to add one more item into the code below

                newToken.setPositionIncrement(0);

by setting more than one term to the zero position increment, it forces =
a
BooleanQuery to be constructed within the MultiFieldQueryParser class,
instead of the PhraseQuery object.

Allen

-----Original Message-----
From: Mathieu Lecarme [mailto:mathieu@garambrogne.net]=20
Sent: Wednesday, April 09, 2008 3:42 AM
To: java-user@lucene.apache.org
Subject: Re: designing a dictionary filter with multiple word entries

Allen Atamer a =E9crit :
> My dictionary filter currently implements next() and everything works =
well
> when dictionary entries are replaced one-to-one. For example:   Can =
=3D>
> Canada.=20
>
> A problem arises when I try to replace it with more than one word. =
Going
> through next() I encounter "shutdown".  But the dictionary entry takes
> Shutdown =3D> shut down (two words). I construct a replacement term
according
> the to the instructions in the Javadoc, but the search does not match =
any
> substrings "shut" or "down" in my database. I debugged it and found
> QueryParser is converting my replaced text into PhraseQuery objects
instead
> of BooleanQuery objects.
>
> My code to replace the string is below:
>
> 		Token teachToken =3D new Token();
> 		teachToken.resizeTermBuffer(replacementTerm.length());
> 	=09
> 		char [] termBuffer =3D teachToken.termBuffer();
> 		for (int i =3D 0; i < replacementTerm.length(); i++) {
> 			termBuffer[i] =3D replacementTerm.charAt(i);
> 		}
> 		teachToken.setTermLength(replacementTerm.length());
> 		this.tokenQueue.push(teachToken);
> 		return teachToken;
>
> Instead of [field1]:shut down, it is searching with [field1]:"shut =
down".
>
> How can I construct the replacement terms so that queries are formed
> properly, and I don't violate the next() contract?
>  =20
use a private stack. When you replace a word, fill it, and the next()=20
will pop your stack. When the stack is empty, feed it again. So first=20
time next() will get "shut", and second time "down".

M.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

No virus found in this incoming message.
Checked by AVG.=20
Version: 7.5.519 / Virus Database: 269.22.10/1367 - Release Date: =
4/9/2008
7:10 AM
=20

No virus found in this outgoing message.
Checked by AVG.=20
Version: 7.5.519 / Virus Database: 269.22.12/1373 - Release Date: =
4/11/2008
9:17 AM
=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33573-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 11 17:30:36 2008
Return-Path: <java-user-return-33573-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68532 invoked from network); 11 Apr 2008 17:30:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Apr 2008 17:30:36 -0000
Received: (qmail 25884 invoked by uid 500); 11 Apr 2008 17:30:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25848 invoked by uid 500); 11 Apr 2008 17:30:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25832 invoked by uid 99); 11 Apr 2008 17:30:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Apr 2008 10:30:29 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.49.253] (HELO web52006.mail.re2.yahoo.com) (206.190.49.253)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 11 Apr 2008 17:29:35 +0000
Received: (qmail 60190 invoked by uid 60001); 11 Apr 2008 17:29:54 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=3MjxyZPM4kXYKPUxRDJfWxNcU1EDipAE9hNdK/sOAfcMCxx+9bGxaJA1EDCXh+zXyUBRtj5GvtbTkN2fTUx47t+CygvZfeyH25bT40RxQ/m4EiVE/GJNaRsR47AaCik3NvjbbFgFcjC+RRni6/st5NNvlHMu7Cm5wcvSrTQRNG0=;
X-YMail-OSG: 1mb8KYMVM1nWbo0X9nrKhwxgoOaDVqc6NavLaxEf
Received: from [12.162.3.126] by web52006.mail.re2.yahoo.com via HTTP; Fri, 11 Apr 2008 10:29:54 PDT
Date: Fri, 11 Apr 2008 10:29:54 -0700 (PDT)
From: Rajesh parab <rajesh_parab_1@yahoo.com>
Subject: Re: Lucene index on relational data
To: java-user@lucene.apache.org
In-Reply-To: <47FF1C96.3040604@garambrogne.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
Message-ID: <563358.35242.qm@web52006.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for these pointers Mathieu.

We have earlier looked at Compass, but the main issue
with database index is DB vendor support for BLOB
locator. I understand that Oracle provides has this
support to get the partial data from BLOB, but I guess
the simiar support is not available in SQL Server and
DB2. Our application currently supports all these 3
databases.

Secondly I am reading that search performance degrades
drastically with database index.

Will it be possible to partition data like main index
and relationship index using File System Lucne index
and search across these indexes?

Regards,
Rajesh

--- Mathieu Lecarme <mathieu@garambrogne.net> wrote:

> Have a look at Compass 2.0M3
> http://www.kimchy.org/searchable-cascading-mapping/
> 
> Your multiple index will be nice for massive write.
> In a classical 
> read/write ratio, Compass will be much easier.
> 
> M.
> 
> Rajesh parab a crit :
> > Hi,
> >
> > We are using Lucene 2.0 to index data stored
> inside
> > relational database. Like any relational database,
> our
> > database has quite a few one-to-one and
> one-to-many
> > relationships. For example, lets say an Object
> A has
> > one-to-many relationship with Object X and Object
> Y.
> > As we need to de-normalize relational data as
> > key-value pairs before storing it inside Lucene
> index,
> > we have de-normalized these relationships (Object
> X
> > and Object Y) while building an index on Object A.
> >
> > We have large no of such object relationships and
> most
> > of the times, the related objects are modified
> more
> > frequently than the base objects. For example, in
> our
> > above case, objects X and Y are updated in the
> system
> > very frequently, whereas Object A is not updated
> that
> > often. Still, we will need to update Object A
> entries
> > inside the index, every time its related objects X
> > and/or Y are modified.
> >
> > To avoid the above situation, we were thinking of
> > having 2 separate indexes  first index will
> only
> > index data of base objects (Object A in above
> example)
> > and second index will contain data about its
> > relationship objects (Object X and Y above), which
> are
> > updated more frequently. This way, the more
> frequent
> > updates to Object X and Y will only impact second
> > index that stores relationship information and
> reduce
> > the cost to re-index object A. However, I dont
> think,
> > MultiSearcher will be helpful if we want to search
> for
> > data which spans across both indexes (e.g. some
> fields
> > of Object A in first index and some fields of
> Object X
> > or Y in second index).
> >
> > Do we have any option in Lucene to handle such
> > scenario? Can we search across multiple indexes
> which
> > have some relationships between them and search
> for
> > fields that span across these indexes?
> >
> > Regards,
> > Rajesh
> >
> > __________________________________________________
> > Do You Yahoo!?
> > Tired of spam?  Yahoo! Mail has the best spam
> protection around 
> > http://mail.yahoo.com 
> >
> >
>
---------------------------------------------------------------------
> > To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail:
> java-user-help@lucene.apache.org
> >
> >
> >   
> 
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33574-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 11 18:14:22 2008
Return-Path: <java-user-return-33574-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91990 invoked from network); 11 Apr 2008 18:14:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Apr 2008 18:14:21 -0000
Received: (qmail 11622 invoked by uid 500); 11 Apr 2008 18:14:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11588 invoked by uid 500); 11 Apr 2008 18:14:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11577 invoked by uid 99); 11 Apr 2008 18:14:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Apr 2008 11:14:14 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 72.14.220.158 as permitted sender)
Received: from [72.14.220.158] (HELO fg-out-1718.google.com) (72.14.220.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Apr 2008 18:13:31 +0000
Received: by fg-out-1718.google.com with SMTP id d23so498723fga.27
        for <java-user@lucene.apache.org>; Fri, 11 Apr 2008 11:13:42 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=ngxzlhf4qgaCt4VlPwwPIO0UXTvLwy4Y6U4eqzr2/9M=;
        b=OApUdAfOLAFoMZeB31sPlg26u2RvjiSvfzozOS+lqyrxUpTyXkwjKekAgY34h99ktsW0FLWiq1DFsA2J1axUFQRwl91e//gnYWxRWgTDcGHYqhrnsffFsWZZ8bJ9TFQcq55zMZzLquJa+GP+wgwCbcUp6F4vAGYXJBpP/psti1E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=H1WGAlO/Kd+1k65i60AEl6+3dBx0MajkcRzPfBYccYSG93sm9Cz7O/MI7mRPMcsOU+QMjSKo3UHYpCXxPMfGazMkIdC6fHvt5PXrZ+rnIWM9ZPVd36YF6gMLp1BF0LNALaLtY/t2WwZz96VdRT4glulIyhzKlScYQZz/yidZ+YQ=
Received: by 10.86.90.2 with SMTP id n2mr6248388fgb.8.1207937622295;
        Fri, 11 Apr 2008 11:13:42 -0700 (PDT)
Received: from kodapan.lan ( [82.93.70.124])
        by mx.google.com with ESMTPS id c28sm4955760fka.0.2008.04.11.11.13.35
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 11 Apr 2008 11:13:35 -0700 (PDT)
Message-ID: <47FFAA4E.2080402@gmail.com>
Date: Fri, 11 Apr 2008 20:13:34 +0200
From: Karl Wettin <karl.wettin@gmail.com>
User-Agent: Thunderbird 2.0.0.12 (Macintosh/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene index on relational data
References: <430045.4136.qm@web52002.mail.re2.yahoo.com>
In-Reply-To: <430045.4136.qm@web52002.mail.re2.yahoo.com>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Rajesh,

I think you are looking for ParallelReader.

<http://lucene.apache.org/java/2_0_0/api/org/apache/lucene/index/ParallelReader.html>

public class ParallelReader
extends IndexReader

An IndexReader which reads multiple, parallel indexes. Each index added 
must have the same number of documents, but typically each contains 
different fields. Each document contains the union of the fields of all 
documents with the same document number. When searching, matches for a 
query term are from the first index added that has the field.

This is useful, e.g., with collections that have large fields which 
change rarely and small fields that change more frequently. The smaller 
fields may be re-indexed in a new index and both indexes may be searched 
together.

Warning: It is up to you to make sure all indexes are created and 
modified the same way. For example, if you add documents to one index, 
you need to add the same documents in the same order to the other 
indexes. Failure to do so will result in undefined behavior.



     karl

Rajesh parab skrev:
> Hi,
> 
> We are using Lucene 2.0 to index data stored inside
> relational database. Like any relational database, our
> database has quite a few one-to-one and one-to-many
> relationships. For example, lets say an Object A has
> one-to-many relationship with Object X and Object Y.
> As we need to de-normalize relational data as
> key-value pairs before storing it inside Lucene index,
> we have de-normalized these relationships (Object X
> and Object Y) while building an index on Object A.
> 
> We have large no of such object relationships and most
> of the times, the related objects are modified more
> frequently than the base objects. For example, in our
> above case, objects X and Y are updated in the system
> very frequently, whereas Object A is not updated that
> often. Still, we will need to update Object A entries
> inside the index, every time its related objects X
> and/or Y are modified.
> 
> To avoid the above situation, we were thinking of
> having 2 separate indexes  first index will only
> index data of base objects (Object A in above example)
> and second index will contain data about its
> relationship objects (Object X and Y above), which are
> updated more frequently. This way, the more frequent
> updates to Object X and Y will only impact second
> index that stores relationship information and reduce
> the cost to re-index object A. However, I dont think,
> MultiSearcher will be helpful if we want to search for
> data which spans across both indexes (e.g. some fields
> of Object A in first index and some fields of Object X
> or Y in second index).
> 
> Do we have any option in Lucene to handle such
> scenario? Can we search across multiple indexes which
> have some relationships between them and search for
> fields that span across these indexes?
> 
> Regards,
> Rajesh
> 
> __________________________________________________
> Do You Yahoo!?
> Tired of spam?  Yahoo! Mail has the best spam protection around 
> http://mail.yahoo.com 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33575-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 11 21:41:22 2008
Return-Path: <java-user-return-33575-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11442 invoked from network); 11 Apr 2008 21:41:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Apr 2008 21:41:22 -0000
Received: (qmail 77283 invoked by uid 500); 11 Apr 2008 21:41:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77256 invoked by uid 500); 11 Apr 2008 21:41:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77245 invoked by uid 99); 11 Apr 2008 21:41:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Apr 2008 14:41:15 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [212.27.42.28] (HELO smtp2-g19.free.fr) (212.27.42.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Apr 2008 21:40:30 +0000
Received: from smtp2-g19.free.fr (localhost.localdomain [127.0.0.1])
	by smtp2-g19.free.fr (Postfix) with ESMTP id 8FDC612B6CE
	for <java-user@lucene.apache.org>; Fri, 11 Apr 2008 23:40:39 +0200 (CEST)
Received: from [192.168.1.100] (ze.garambrogne.net [82.227.122.98])
	by smtp2-g19.free.fr (Postfix) with ESMTP id 4768612B6AA
	for <java-user@lucene.apache.org>; Fri, 11 Apr 2008 23:40:39 +0200 (CEST)
Message-Id: <1C113016-168D-41E0-8045-5EE58CF686B8@garambrogne.net>
From: Mathieu Lecarme <mathieu@garambrogne.net>
To: java-user@lucene.apache.org
In-Reply-To: <563358.35242.qm@web52006.mail.re2.yahoo.com>
Content-Type: text/plain; charset=WINDOWS-1252; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: Lucene index on relational data
Date: Fri, 11 Apr 2008 23:40:38 +0200
References: <563358.35242.qm@web52006.mail.re2.yahoo.com>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Le 11 avr. 08 =E0 19:29, Rajesh parab a =E9crit :
> Thanks for these pointers Mathieu.
>
> We have earlier looked at Compass, but the main issue
> with database index is DB vendor support for BLOB
> locator. I understand that Oracle provides has this
> support to get the partial data from BLOB, but I guess
> the simiar support is not available in SQL Server and
> DB2. Our application currently supports all these 3
> databases.
You misanderstood something. Compass can use JDBC Index, but it's only =20=

an option, classical file index is available too. Other specific index =20=

is GigaSpace and Terracotta, for cluster environment.

> Secondly I am reading that search performance degrades
> drastically with database index.
You can build a Filter from JDBC query to mix it with Lucene search. =20
If your JDBC query use too much join, it will be slow, so, your Lucene =20=

search, wich wait its Filter, will be slow two. Building a Filter =20
froma Set of id is not slow.

> Will it be possible to partition data like main index
> and relationship index using File System Lucne index
> and search across these indexes?
Yes. You can index unfolded data, wich take lot of space, or use two =20
query in two index. The first build a Filter for the second, just like =20=

with the previous JDBC example.
You can even cache the filter, like Solr does with its faceted search.

M.

>
>
> Regards,
> Rajesh
>
> --- Mathieu Lecarme <mathieu@garambrogne.net> wrote:
>
>> Have a look at Compass 2.0M3
>> http://www.kimchy.org/searchable-cascading-mapping/
>>
>> Your multiple index will be nice for massive write.
>> In a classical
>> read/write ratio, Compass will be much easier.
>>
>> M.
>>
>> Rajesh parab a =C3=A9crit :
>>> Hi,
>>>
>>> We are using Lucene 2.0 to index data stored
>> inside
>>> relational database. Like any relational database,
>> our
>>> database has quite a few one-to-one and
>> one-to-many
>>> relationships. For example, let=E2=80=99s say an Object
>> A has
>>> one-to-many relationship with Object X and Object
>> Y.
>>> As we need to de-normalize relational data as
>>> key-value pairs before storing it inside Lucene
>> index,
>>> we have de-normalized these relationships (Object
>> X
>>> and Object Y) while building an index on Object A.
>>>
>>> We have large no of such object relationships and
>> most
>>> of the times, the related objects are modified
>> more
>>> frequently than the base objects. For example, in
>> our
>>> above case, objects X and Y are updated in the
>> system
>>> very frequently, whereas Object A is not updated
>> that
>>> often. Still, we will need to update Object A
>> entries
>>> inside the index, every time its related objects X
>>> and/or Y are modified.
>>>
>>> To avoid the above situation, we were thinking of
>>> having 2 separate indexes =E2=80=93 first index will
>> only
>>> index data of base objects (Object A in above
>> example)
>>> and second index will contain data about its
>>> relationship objects (Object X and Y above), which
>> are
>>> updated more frequently. This way, the more
>> frequent
>>> updates to Object X and Y will only impact second
>>> index that stores relationship information and
>> reduce
>>> the cost to re-index object A. However, I don=E2=80=99t
>> think,
>>> MultiSearcher will be helpful if we want to search
>> for
>>> data which spans across both indexes (e.g. some
>> fields
>>> of Object A in first index and some fields of
>> Object X
>>> or Y in second index).
>>>
>>> Do we have any option in Lucene to handle such
>>> scenario? Can we search across multiple indexes
>> which
>>> have some relationships between them and search
>> for
>>> fields that span across these indexes?
>>>
>>> Regards,
>>> Rajesh
>>>
>>> __________________________________________________
>>> Do You Yahoo!?
>>> Tired of spam?  Yahoo! Mail has the best spam
>> protection around
>>> http://mail.yahoo.com
>>>
>>>
>>
> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail:
>> java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail:
>> java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>>
>>
> ---------------------------------------------------------------------
>> To unsubscribe, e-mail:
>> java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail:
>> java-user-help@lucene.apache.org
>>
>>
>
>
> __________________________________________________
> Do You Yahoo!?
> Tired of spam?  Yahoo! Mail has the best spam protection around
> http://mail.yahoo.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33576-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 11 22:04:09 2008
Return-Path: <java-user-return-33576-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21491 invoked from network); 11 Apr 2008 22:04:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Apr 2008 22:04:09 -0000
Received: (qmail 16640 invoked by uid 500); 11 Apr 2008 22:04:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16614 invoked by uid 500); 11 Apr 2008 22:04:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16603 invoked by uid 99); 11 Apr 2008 22:04:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Apr 2008 15:04:03 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of adb@teamware.com designates 212.226.92.15 as permitted sender)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Apr 2008 22:03:21 +0000
Received: from intrepid.teamw.com (intrepid.teamw.com [10.142.128.11])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id m3BM3I4g021104
	for <java-user@lucene.apache.org>; Sat, 12 Apr 2008 01:03:18 +0300
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz.teamw.com with ESMTP
	 id m4c13fn1; 12 Apr 2008 01:03:00 +0300
Message-ID: <47FFE021.7060502@teamware.com>
Date: Sat, 12 Apr 2008 08:03:13 +1000
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Using Lucene partly as DB and 'joining' search results.
References: <47FF3B35.4000705@teamware.com> <47FF5067.8010902@garambrogne.net> <200804111805.57393.paul.elschot@xs4all.nl>
In-Reply-To: <200804111805.57393.paul.elschot@xs4all.nl>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Sat, 12 Apr 2008 01:03:18 +0300 (EEST)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0.001, required 5,
	autolearn=not spam, BAYES_50 0.00)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Paul Elschot wrote:
> Op Friday 11 April 2008 13:49:59 schreef Mathieu Lecarme:

>> Use Filter and BitSet.
>>  From the personnal data, you build a Filter
>> (http://lucene.apache.org/java/2_3_1/api/org/apache/lucene/search/Fil
>> ter.html) wich is used in the main index.
> 
> With 1 billion mails, and possibly a Filter per user, you may want to
> use more compact filters than BitSets, which is currently possible
> in the development trunk of lucene.

Thanks for the pointers.  I've already used Solr's DocSet interface in my 
implementation, which I think is where the ideas for the current Lucene 
enhancements came from.  They work well to reduce the filter's footprint.  I'm 
also caching filters.

The intention is that there is a user data index and the mail index(es).  The 
search against user data index will return a set of mail Ids, which is the 
common key between the two.  Doc Ids are no good between the indexes, so that 
means a potentially large boolean OR query to create the filter of labelled 
mails in the mail indexes.  I know it's a theoretical question, but will this 
perform?

The read only data and modifiable user data need to be kept separate because the 
RO data can easily be re-created, which means I can't just create the filter as 
part of the base search.

Regards
Antony





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33577-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 11 22:28:13 2008
Return-Path: <java-user-return-33577-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28456 invoked from network); 11 Apr 2008 22:28:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Apr 2008 22:28:12 -0000
Received: (qmail 35520 invoked by uid 500); 11 Apr 2008 22:28:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35488 invoked by uid 500); 11 Apr 2008 22:28:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35477 invoked by uid 99); 11 Apr 2008 22:28:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Apr 2008 15:28:05 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.48.56] (HELO web52007.mail.re2.yahoo.com) (206.190.48.56)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 11 Apr 2008 22:27:22 +0000
Received: (qmail 54757 invoked by uid 60001); 11 Apr 2008 22:27:33 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=H3rLiMtcLLN+BxXLHeRhsedeOkV/K2ELFK0Itx/Du2gBkJFxf/6EHlgAsWci/DJkBW2F3B59JXyXmYp7CIhfli4pjTKDjZKhwn2heVlnvGJ9JZLbL94fYcNBS0ZLEhCVQOwkUwY2Q2tY9VH//Ape5QQF6PBJXsN0n91uoqNBwcw=;
X-YMail-OSG: BRD2EgAVM1lg2dBWzMyzWJIjmnGRTRl86UlOSEIAcHJs02z5jyohIqxNxGhX_MPcOA--
Received: from [12.162.3.126] by web52007.mail.re2.yahoo.com via HTTP; Fri, 11 Apr 2008 15:27:33 PDT
Date: Fri, 11 Apr 2008 15:27:33 -0700 (PDT)
From: Rajesh parab <rajesh_parab_1@yahoo.com>
Subject: Re: Lucene index on relational data
To: java-user@lucene.apache.org
In-Reply-To: <47FFAA4E.2080402@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
Message-ID: <665397.54440.qm@web52007.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for details Karl.

I was looking for something like it. However, I have a
question around the warning mentioned in javadoc of
parallelReader. 

It says -
It is up to you to make sure all indexes are created
and modified the same way. For example, if you add
documents to one index, you need to add the same
documents in the same order to the other indexes.
Failure to do so will result in undefined behavior.


So now, if I want to update one of the index document
from my dynamic index, I will have to delete the
document and insert it again as Lucene does not allow
updating the document. Correct? If this is the case,
re-insert of document in dynamic index will change the
order of the index with static index, which is not
modified. How should we take care of this situation?
Am I missing something here?

Regards,
Rajesh

--- Karl Wettin <karl.wettin@gmail.com> wrote:

> Hi Rajesh,
> 
> I think you are looking for ParallelReader.
> 
>
<http://lucene.apache.org/java/2_0_0/api/org/apache/lucene/index/ParallelReader.html>
> 
> public class ParallelReader
> extends IndexReader
> 
> An IndexReader which reads multiple, parallel
> indexes. Each index added 
> must have the same number of documents, but
> typically each contains 
> different fields. Each document contains the union
> of the fields of all 
> documents with the same document number. When
> searching, matches for a 
> query term are from the first index added that has
> the field.
> 
> This is useful, e.g., with collections that have
> large fields which 
> change rarely and small fields that change more
> frequently. The smaller 
> fields may be re-indexed in a new index and both
> indexes may be searched 
> together.
> 
> Warning: It is up to you to make sure all indexes
> are created and 
> modified the same way. For example, if you add
> documents to one index, 
> you need to add the same documents in the same order
> to the other 
> indexes. Failure to do so will result in undefined
> behavior.
> 
> 
> 
>      karl
> 
> Rajesh parab skrev:
> > Hi,
> > 
> > We are using Lucene 2.0 to index data stored
> inside
> > relational database. Like any relational database,
> our
> > database has quite a few one-to-one and
> one-to-many
> > relationships. For example, lets say an Object A
> has
> > one-to-many relationship with Object X and Object
> Y.
> > As we need to de-normalize relational data as
> > key-value pairs before storing it inside Lucene
> index,
> > we have de-normalized these relationships (Object
> X
> > and Object Y) while building an index on Object A.
> > 
> > We have large no of such object relationships and
> most
> > of the times, the related objects are modified
> more
> > frequently than the base objects. For example, in
> our
> > above case, objects X and Y are updated in the
> system
> > very frequently, whereas Object A is not updated
> that
> > often. Still, we will need to update Object A
> entries
> > inside the index, every time its related objects X
> > and/or Y are modified.
> > 
> > To avoid the above situation, we were thinking of
> > having 2 separate indexes  first index will only
> > index data of base objects (Object A in above
> example)
> > and second index will contain data about its
> > relationship objects (Object X and Y above), which
> are
> > updated more frequently. This way, the more
> frequent
> > updates to Object X and Y will only impact second
> > index that stores relationship information and
> reduce
> > the cost to re-index object A. However, I dont
> think,
> > MultiSearcher will be helpful if we want to search
> for
> > data which spans across both indexes (e.g. some
> fields
> > of Object A in first index and some fields of
> Object X
> > or Y in second index).
> > 
> > Do we have any option in Lucene to handle such
> > scenario? Can we search across multiple indexes
> which
> > have some relationships between them and search
> for
> > fields that span across these indexes?
> > 
> > Regards,
> > Rajesh
> > 
> > __________________________________________________
> > Do You Yahoo!?
> > Tired of spam?  Yahoo! Mail has the best spam
> protection around 
> > http://mail.yahoo.com 
> > 
> >
>
---------------------------------------------------------------------
> > To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail:
> java-user-help@lucene.apache.org
> > 
> 
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33578-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 11 22:31:44 2008
Return-Path: <java-user-return-33578-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29070 invoked from network); 11 Apr 2008 22:31:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Apr 2008 22:31:43 -0000
Received: (qmail 38641 invoked by uid 500); 11 Apr 2008 22:31:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38605 invoked by uid 500); 11 Apr 2008 22:31:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38593 invoked by uid 99); 11 Apr 2008 22:31:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Apr 2008 15:31:36 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.49.250] (HELO web52003.mail.re2.yahoo.com) (206.190.49.250)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 11 Apr 2008 22:30:51 +0000
Received: (qmail 4862 invoked by uid 60001); 11 Apr 2008 22:31:01 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=uHburzFj+X6E/lEpUbtYFa2blOBQFkMqChCcG9lh5Jp9KYfNVXn/QywEk2ZGCXApwYCT/0StL9J99gdIzZcgby3B+hwcEkGoU7qBuNeORuR5NpM2gFBO4fERyOuJme7gdGLYgp94SW0AfWnwWXNt+2KcyU2D4PsxjPx1bjaPcdg=;
X-YMail-OSG: zEsOQTIVM1mdJk5jKG7_Zquz7SubA2f6NS428LYfgQeMynj8k2jmG6FU.3.plWdVEw--
Received: from [12.162.3.126] by web52003.mail.re2.yahoo.com via HTTP; Fri, 11 Apr 2008 15:31:01 PDT
Date: Fri, 11 Apr 2008 15:31:01 -0700 (PDT)
From: Rajesh parab <rajesh_parab_1@yahoo.com>
Subject: Re: Lucene index on relational data
To: java-user@lucene.apache.org
In-Reply-To: <1C113016-168D-41E0-8045-5EE58CF686B8@garambrogne.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
Message-ID: <814761.3057.qm@web52003.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Mathieu,

On your comments on partitioning of data -

<<Mathieu>>
Yes. You can index unfolded data, wich take lot of
space, or use two query in two index. The first build
a Filter for the second, just like with the previous
JDBC example. You can even cache the filter, like Solr
does with its faceted search.

<<Rajesh>>
I am looking for a way to use single query to run
across two indexes (static and dynamic index) and the
search query will have fields from both these indexes.

Rajesh

--- Mathieu Lecarme <mathieu@garambrogne.net> wrote:

> 
> Le 11 avr. 08  19:29, Rajesh parab a crit :
> > Thanks for these pointers Mathieu.
> >
> > We have earlier looked at Compass, but the main
> issue
> > with database index is DB vendor support for BLOB
> > locator. I understand that Oracle provides has
> this
> > support to get the partial data from BLOB, but I
> guess
> > the simiar support is not available in SQL Server
> and
> > DB2. Our application currently supports all these
> 3
> > databases.
> You misanderstood something. Compass can use JDBC
> Index, but it's only  
> an option, classical file index is available too.
> Other specific index  
> is GigaSpace and Terracotta, for cluster
> environment.
> 
> > Secondly I am reading that search performance
> degrades
> > drastically with database index.
> You can build a Filter from JDBC query to mix it
> with Lucene search.  
> If your JDBC query use too much join, it will be
> slow, so, your Lucene  
> search, wich wait its Filter, will be slow two.
> Building a Filter  
> froma Set of id is not slow.
> 
> > Will it be possible to partition data like main
> index
> > and relationship index using File System Lucne
> index
> > and search across these indexes?
> Yes. You can index unfolded data, wich take lot of
> space, or use two  
> query in two index. The first build a Filter for the
> second, just like  
> with the previous JDBC example.
> You can even cache the filter, like Solr does with
> its faceted search.
> 
> M.
> 
> >
> >
> > Regards,
> > Rajesh
> >
> > --- Mathieu Lecarme <mathieu@garambrogne.net>
> wrote:
> >
> >> Have a look at Compass 2.0M3
> >>
> http://www.kimchy.org/searchable-cascading-mapping/
> >>
> >> Your multiple index will be nice for massive
> write.
> >> In a classical
> >> read/write ratio, Compass will be much easier.
> >>
> >> M.
> >>
> >> Rajesh parab a crit :
> >>> Hi,
> >>>
> >>> We are using Lucene 2.0 to index data stored
> >> inside
> >>> relational database. Like any relational
> database,
> >> our
> >>> database has quite a few one-to-one and
> >> one-to-many
> >>> relationships. For example, lets say an
> Object
> >> A has
> >>> one-to-many relationship with Object X and
> Object
> >> Y.
> >>> As we need to de-normalize relational data as
> >>> key-value pairs before storing it inside Lucene
> >> index,
> >>> we have de-normalized these relationships
> (Object
> >> X
> >>> and Object Y) while building an index on Object
> A.
> >>>
> >>> We have large no of such object relationships
> and
> >> most
> >>> of the times, the related objects are modified
> >> more
> >>> frequently than the base objects. For example,
> in
> >> our
> >>> above case, objects X and Y are updated in the
> >> system
> >>> very frequently, whereas Object A is not updated
> >> that
> >>> often. Still, we will need to update Object A
> >> entries
> >>> inside the index, every time its related objects
> X
> >>> and/or Y are modified.
> >>>
> >>> To avoid the above situation, we were thinking
> of
> >>> having 2 separate indexes  first index will
> >> only
> >>> index data of base objects (Object A in above
> >> example)
> >>> and second index will contain data about its
> >>> relationship objects (Object X and Y above),
> which
> >> are
> >>> updated more frequently. This way, the more
> >> frequent
> >>> updates to Object X and Y will only impact
> second
> >>> index that stores relationship information and
> >> reduce
> >>> the cost to re-index object A. However, I
> dont
> >> think,
> >>> MultiSearcher will be helpful if we want to
> search
> >> for
> >>> data which spans across both indexes (e.g. some
> >> fields
> >>> of Object A in first index and some fields of
> >> Object X
> >>> or Y in second index).
> >>>
> >>> Do we have any option in Lucene to handle such
> >>> scenario? Can we search across multiple indexes
> >> which
> >>> have some relationships between them and search
> >> for
> >>> fields that span across these indexes?
> >>>
> >>> Regards,
> >>> Rajesh
> >>>
> >>>
> __________________________________________________
> >>> Do You Yahoo!?
> >>> Tired of spam?  Yahoo! Mail has the best spam
> >> protection around
> >>> http://mail.yahoo.com
> >>>
> >>>
> >>
> >
>
---------------------------------------------------------------------
> >>> To unsubscribe, e-mail:
> >> java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail:
> >> java-user-help@lucene.apache.org
> >>>
> >>>
> >>>
> >>
> >>
> >>
> >
>
---------------------------------------------------------------------
> >> To unsubscribe, e-mail:
> >> java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail:
> >> java-user-help@lucene.apache.org
> >>
> >>
> >
> >
> > __________________________________________________
> > Do You Yahoo!?
> > Tired of spam?  Yahoo! Mail has the best spam
> protection around
> > http://mail.yahoo.com
> >
> >
>
---------------------------------------------------------------------
> > To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail:
> java-user-help@lucene.apache.org
> >
> >
> 
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
=== message truncated ===


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33579-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 11 23:04:13 2008
Return-Path: <java-user-return-33579-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48635 invoked from network); 11 Apr 2008 23:04:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Apr 2008 23:04:13 -0000
Received: (qmail 68442 invoked by uid 500); 11 Apr 2008 23:04:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68408 invoked by uid 500); 11 Apr 2008 23:04:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68397 invoked by uid 99); 11 Apr 2008 23:04:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Apr 2008 16:04:06 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Apr 2008 23:03:23 +0000
Received: by ug-out-1314.google.com with SMTP id u40so1649397ugc.29
        for <java-user@lucene.apache.org>; Fri, 11 Apr 2008 16:03:34 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=5+aiBwRvbrNQ/tboRrfOwbkOEXv8z2esrHo/P7kTiYs=;
        b=C2CnxFpcB2VDWardSDhPX13x5c8rdbscTRzvc6yv8PMiSIPfRA39SaEIxGLYenwWOR1ScfsgXm9k+6rp8oDcd4UbrKhvrwhhrqS0HmRDbOCDVa0pdXz1Eq2RNbc1VC7mUBkXqFbp80rqZOnVbhrFsN7FvFcsRLy5yFH0OS9TNrc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=Nrvm96wexn37cCY2+eXpqd2f4+uAzBFpDgtiH/jwfA1i2O9lhxTY/D1egybY/rhNmH7ByTe+JCJQ0naY6tOrgyWaU13UbtC307ikbK5zX27IWqioWx7Zm0HEbDOLKAgOZ1dNvq1b29ryOEdZ0XjsIEfOalYGNMrYYhA/CYcUx64=
Received: by 10.66.242.5 with SMTP id p5mr8196508ugh.87.1207955014149;
        Fri, 11 Apr 2008 16:03:34 -0700 (PDT)
Received: from kodapan.lan ( [82.93.70.124])
        by mx.google.com with ESMTPS id 32sm17706415ugf.9.2008.04.11.16.03.32
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 11 Apr 2008 16:03:33 -0700 (PDT)
Message-ID: <47FFEE43.10709@gmail.com>
Date: Sat, 12 Apr 2008 01:03:31 +0200
From: Karl Wettin <karl.wettin@gmail.com>
User-Agent: Thunderbird 2.0.0.12 (Macintosh/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene index on relational data
References: <665397.54440.qm@web52007.mail.re2.yahoo.com>
In-Reply-To: <665397.54440.qm@web52007.mail.re2.yahoo.com>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

How much data do you have? I have a hard time to understand the 
relationship between your objects and what sort of normalized data you 
add to the documents.

If you are lucky it is just a single or few fields that needs to be 
updated and you can manage to keep it in RAM and rebuild the whole thing 
everytime something happends or on some schedule.

There are some hacks in the JIRA that allows you to replace a document 
at a certain position at index optimization time. You might want to 
update a number of document every time you do that.

https://issues.apache.org/jira/browse/LUCENE-879

Rajesh parab skrev:
> Thanks for details Karl.
> 
> I was looking for something like it. However, I have a
> question around the warning mentioned in javadoc of
> parallelReader. 
> 
> It says -
> It is up to you to make sure all indexes are created
> and modified the same way. For example, if you add
> documents to one index, you need to add the same
> documents in the same order to the other indexes.
> Failure to do so will result in undefined behavior.
> 
> 
> So now, if I want to update one of the index document
> from my dynamic index, I will have to delete the
> document and insert it again as Lucene does not allow
> updating the document. Correct? If this is the case,
> re-insert of document in dynamic index will change the
> order of the index with static index, which is not
> modified. How should we take care of this situation?
> Am I missing something here?
> 
> Regards,
> Rajesh
> 
> --- Karl Wettin <karl.wettin@gmail.com> wrote:
> 
>> Hi Rajesh,
>>
>> I think you are looking for ParallelReader.
>>
>>
> <http://lucene.apache.org/java/2_0_0/api/org/apache/lucene/index/ParallelReader.html>
>> public class ParallelReader
>> extends IndexReader
>>
>> An IndexReader which reads multiple, parallel
>> indexes. Each index added 
>> must have the same number of documents, but
>> typically each contains 
>> different fields. Each document contains the union
>> of the fields of all 
>> documents with the same document number. When
>> searching, matches for a 
>> query term are from the first index added that has
>> the field.
>>
>> This is useful, e.g., with collections that have
>> large fields which 
>> change rarely and small fields that change more
>> frequently. The smaller 
>> fields may be re-indexed in a new index and both
>> indexes may be searched 
>> together.
>>
>> Warning: It is up to you to make sure all indexes
>> are created and 
>> modified the same way. For example, if you add
>> documents to one index, 
>> you need to add the same documents in the same order
>> to the other 
>> indexes. Failure to do so will result in undefined
>> behavior.
>>
>>
>>
>>      karl
>>
>> Rajesh parab skrev:
>>> Hi,
>>>
>>> We are using Lucene 2.0 to index data stored
>> inside
>>> relational database. Like any relational database,
>> our
>>> database has quite a few one-to-one and
>> one-to-many
>>> relationships. For example, lets say an Object A
>> has
>>> one-to-many relationship with Object X and Object
>> Y.
>>> As we need to de-normalize relational data as
>>> key-value pairs before storing it inside Lucene
>> index,
>>> we have de-normalized these relationships (Object
>> X
>>> and Object Y) while building an index on Object A.
>>>
>>> We have large no of such object relationships and
>> most
>>> of the times, the related objects are modified
>> more
>>> frequently than the base objects. For example, in
>> our
>>> above case, objects X and Y are updated in the
>> system
>>> very frequently, whereas Object A is not updated
>> that
>>> often. Still, we will need to update Object A
>> entries
>>> inside the index, every time its related objects X
>>> and/or Y are modified.
>>>
>>> To avoid the above situation, we were thinking of
>>> having 2 separate indexes  first index will only
>>> index data of base objects (Object A in above
>> example)
>>> and second index will contain data about its
>>> relationship objects (Object X and Y above), which
>> are
>>> updated more frequently. This way, the more
>> frequent
>>> updates to Object X and Y will only impact second
>>> index that stores relationship information and
>> reduce
>>> the cost to re-index object A. However, I dont
>> think,
>>> MultiSearcher will be helpful if we want to search
>> for
>>> data which spans across both indexes (e.g. some
>> fields
>>> of Object A in first index and some fields of
>> Object X
>>> or Y in second index).
>>>
>>> Do we have any option in Lucene to handle such
>>> scenario? Can we search across multiple indexes
>> which
>>> have some relationships between them and search
>> for
>>> fields that span across these indexes?
>>>
>>> Regards,
>>> Rajesh
>>>
>>> __________________________________________________
>>> Do You Yahoo!?
>>> Tired of spam?  Yahoo! Mail has the best spam
>> protection around 
>>> http://mail.yahoo.com 
>>>
>>>
> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail:
>> java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail:
>> java-user-help@lucene.apache.org
>>
>>
> ---------------------------------------------------------------------
>> To unsubscribe, e-mail:
>> java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail:
>> java-user-help@lucene.apache.org
>>
>>
> 
> 
> __________________________________________________
> Do You Yahoo!?
> Tired of spam?  Yahoo! Mail has the best spam protection around 
> http://mail.yahoo.com 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33580-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 11 23:05:37 2008
Return-Path: <java-user-return-33580-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49797 invoked from network); 11 Apr 2008 23:05:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Apr 2008 23:05:37 -0000
Received: (qmail 71978 invoked by uid 500); 11 Apr 2008 23:05:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71953 invoked by uid 500); 11 Apr 2008 23:05:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71942 invoked by uid 99); 11 Apr 2008 23:05:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Apr 2008 16:05:31 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.48.27] (HELO web52011.mail.re2.yahoo.com) (206.190.48.27)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 11 Apr 2008 23:04:37 +0000
Received: (qmail 20555 invoked by uid 60001); 11 Apr 2008 23:04:56 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=zkS7MKS5E1XJMTb/YdLPFdtuUQPTsaHxlqxc0dRVXUeRRoMstlLJp7T41VNgJ0dmHbeo+cYvN9mQ8aip1bwiUgzusB7h4TgflTVAhUTB8WGZjkrZzk2k0h07CWJJpiRMDyKegAvIrKlPVfi1cvo1nTlL33nEFja6SBkShZ/7wbg=;
X-YMail-OSG: hoNwOe4VM1n1ni2B9fLFTaoHasDpvKUiYIovHkuNV29IjGdhP3MnAA9XaionZ7XBT9MNp4jz0HGJQSSWKBXpZbN8J4ApIYUySFh7R8cNdDs_wryXRhHBwYjXaRpThruKcnqaYG5mFtNqnha9A5k1gEuuiw--
Received: from [12.162.3.126] by web52011.mail.re2.yahoo.com via HTTP; Fri, 11 Apr 2008 16:04:56 PDT
Date: Fri, 11 Apr 2008 16:04:56 -0700 (PDT)
From: Rajesh parab <rajesh_parab_1@yahoo.com>
Subject: Re: Lucene index on relational data
To: java-user@lucene.apache.org
In-Reply-To: <665397.54440.qm@web52007.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
Message-ID: <249833.20344.qm@web52011.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

While going over the forum, I found one more thread
where Otis has asked similar question around the
syncronization of doc ids between 2 indexes.

http://www.gossamer-threads.com/lists/lucene/java-user/50227?search_string=parallelreader;#50227

Otis,
Have you found the answer to your question?

Regards,
Rajesh

--- Rajesh parab <rajesh_parab_1@yahoo.com> wrote:

> Thanks for details Karl.
> 
> I was looking for something like it. However, I have
> a
> question around the warning mentioned in javadoc of
> parallelReader. 
> 
> It says -
> It is up to you to make sure all indexes are created
> and modified the same way. For example, if you add
> documents to one index, you need to add the same
> documents in the same order to the other indexes.
> Failure to do so will result in undefined behavior.
> 
> 
> So now, if I want to update one of the index
> document
> from my dynamic index, I will have to delete the
> document and insert it again as Lucene does not
> allow
> updating the document. Correct? If this is the case,
> re-insert of document in dynamic index will change
> the
> order of the index with static index, which is not
> modified. How should we take care of this situation?
> Am I missing something here?
> 
> Regards,
> Rajesh
> 
> --- Karl Wettin <karl.wettin@gmail.com> wrote:
> 
> > Hi Rajesh,
> > 
> > I think you are looking for ParallelReader.
> > 
> >
>
<http://lucene.apache.org/java/2_0_0/api/org/apache/lucene/index/ParallelReader.html>
> > 
> > public class ParallelReader
> > extends IndexReader
> > 
> > An IndexReader which reads multiple, parallel
> > indexes. Each index added 
> > must have the same number of documents, but
> > typically each contains 
> > different fields. Each document contains the union
> > of the fields of all 
> > documents with the same document number. When
> > searching, matches for a 
> > query term are from the first index added that has
> > the field.
> > 
> > This is useful, e.g., with collections that have
> > large fields which 
> > change rarely and small fields that change more
> > frequently. The smaller 
> > fields may be re-indexed in a new index and both
> > indexes may be searched 
> > together.
> > 
> > Warning: It is up to you to make sure all indexes
> > are created and 
> > modified the same way. For example, if you add
> > documents to one index, 
> > you need to add the same documents in the same
> order
> > to the other 
> > indexes. Failure to do so will result in undefined
> > behavior.
> > 
> > 
> > 
> >      karl
> > 
> > Rajesh parab skrev:
> > > Hi,
> > > 
> > > We are using Lucene 2.0 to index data stored
> > inside
> > > relational database. Like any relational
> database,
> > our
> > > database has quite a few one-to-one and
> > one-to-many
> > > relationships. For example, lets say an Object
> A
> > has
> > > one-to-many relationship with Object X and
> Object
> > Y.
> > > As we need to de-normalize relational data as
> > > key-value pairs before storing it inside Lucene
> > index,
> > > we have de-normalized these relationships
> (Object
> > X
> > > and Object Y) while building an index on Object
> A.
> > > 
> > > We have large no of such object relationships
> and
> > most
> > > of the times, the related objects are modified
> > more
> > > frequently than the base objects. For example,
> in
> > our
> > > above case, objects X and Y are updated in the
> > system
> > > very frequently, whereas Object A is not updated
> > that
> > > often. Still, we will need to update Object A
> > entries
> > > inside the index, every time its related objects
> X
> > > and/or Y are modified.
> > > 
> > > To avoid the above situation, we were thinking
> of
> > > having 2 separate indexes  first index will
> only
> > > index data of base objects (Object A in above
> > example)
> > > and second index will contain data about its
> > > relationship objects (Object X and Y above),
> which
> > are
> > > updated more frequently. This way, the more
> > frequent
> > > updates to Object X and Y will only impact
> second
> > > index that stores relationship information and
> > reduce
> > > the cost to re-index object A. However, I dont
> > think,
> > > MultiSearcher will be helpful if we want to
> search
> > for
> > > data which spans across both indexes (e.g. some
> > fields
> > > of Object A in first index and some fields of
> > Object X
> > > or Y in second index).
> > > 
> > > Do we have any option in Lucene to handle such
> > > scenario? Can we search across multiple indexes
> > which
> > > have some relationships between them and search
> > for
> > > fields that span across these indexes?
> > > 
> > > Regards,
> > > Rajesh
> > > 
> > >
> __________________________________________________
> > > Do You Yahoo!?
> > > Tired of spam?  Yahoo! Mail has the best spam
> > protection around 
> > > http://mail.yahoo.com 
> > > 
> > >
> >
>
---------------------------------------------------------------------
> > > To unsubscribe, e-mail:
> > java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail:
> > java-user-help@lucene.apache.org
> > > 
> > 
> > 
> >
>
---------------------------------------------------------------------
> > To unsubscribe, e-mail:
> > java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail:
> > java-user-help@lucene.apache.org
> > 
> > 
> 
> 
> __________________________________________________
> Do You Yahoo!?
> Tired of spam?  Yahoo! Mail has the best spam
> protection around 
> http://mail.yahoo.com 
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33581-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 11 23:37:33 2008
Return-Path: <java-user-return-33581-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62268 invoked from network); 11 Apr 2008 23:37:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Apr 2008 23:37:33 -0000
Received: (qmail 864 invoked by uid 500); 11 Apr 2008 23:37:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 823 invoked by uid 500); 11 Apr 2008 23:37:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 812 invoked by uid 99); 11 Apr 2008 23:37:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Apr 2008 16:37:27 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.49.253] (HELO web52006.mail.re2.yahoo.com) (206.190.49.253)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 11 Apr 2008 23:36:36 +0000
Received: (qmail 34396 invoked by uid 60001); 11 Apr 2008 23:36:55 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=kjVz9CWmMZbI5dfIup1YE75/umvzeJonEd1EraEsygnqPbu6wxCd7GekoYddec6qiqH3EuxZ/vOUyQhvNY8g0xV1HPndD7jXmY1U+3noV3mOEUm/S36TarvqtGj8OM9x2Tp6ipQn3U5qFwypIIG1I3VX+YjnH3RC0/AaeTtulnU=;
X-YMail-OSG: Nw9u7pwVM1mw7DzpsA8CaIepmOEWDBsk7KGhIMcXC2v6L7ew__KWwkRiWwGuLAKpmQ--
Received: from [12.162.3.126] by web52006.mail.re2.yahoo.com via HTTP; Fri, 11 Apr 2008 16:36:55 PDT
Date: Fri, 11 Apr 2008 16:36:55 -0700 (PDT)
From: Rajesh parab <rajesh_parab_1@yahoo.com>
Subject: Re: Lucene index on relational data
To: java-user@lucene.apache.org
In-Reply-To: <47FFEE43.10709@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
Message-ID: <660900.34212.qm@web52006.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

<<Karl>>
How much data do you have? I have a hard time to
understand the relationship between your objects and
what sort of normalized data you add to the documents.
If you are lucky it is just a single or few fields
that needs to be updated and you can manage to keep it
in RAM and rebuild the whole thing everytime something
happends or on some schedule.
<<Rajesh>>
Regarding data and its relationships - the use case I
am trying to solve is to partition my data into 2
indexes, a primary index that will contains majority
of the data and it is fairly static. The secondary
index will have related information for the same data
set in primary index and this related information
inside secondary index will change very frequently.

The no of documents in each index will go in millions
and hence, re-building index in memory will not work
:-(


<<Karl>>
There are some hacks in the JIRA that allows you to
replace a document at a certain position at index
optimization time. You might want to update a number
of document every time you do that.
 https://issues.apache.org/jira/browse/LUCENE-879
<<Rajesh>>
As per the hack you mentioned inside JIRA, if some of
the documents are deleted and re-inserted into
secondary index, the other documents inside the index
do not change their doc id. However, the newly added
documents will have different doc ids and hence, we
will have to sync them with primary index doc ids. Is
my understanind correct? If this is the case, then we
will have to update both the indexes every time
something inside secondary index changes.


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33582-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 11 23:47:52 2008
Return-Path: <java-user-return-33582-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64802 invoked from network); 11 Apr 2008 23:47:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Apr 2008 23:47:52 -0000
Received: (qmail 9601 invoked by uid 500); 11 Apr 2008 23:47:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9580 invoked by uid 500); 11 Apr 2008 23:47:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9569 invoked by uid 99); 11 Apr 2008 23:47:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Apr 2008 16:47:45 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Apr 2008 23:47:02 +0000
Received: by ug-out-1314.google.com with SMTP id u40so4132ugc.29
        for <java-user@lucene.apache.org>; Fri, 11 Apr 2008 16:47:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=kVaGsFqSmv82zHS9Dmbhm+mkq7xsqpQn+z8jr6/nRCU=;
        b=GHmZqe9azxgygg08v5txaDwt3LJCnNWOZUMCnqEZidWqcMU/+zr0yU0N0ycKsZax0AiuufWHH0PMNYDt/5EfvhHcD+hEJLWAm4qpmMoO2ZSqgawAPbRvBeGGhK+FWDCcP3oRLFq432/LhRmcCCCGm3VvIr16J2X/AteG4hLIpkM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=ED/iKEiQPNKtLyjPYcWNZDkcbKMZiyjY18fghhJO6q0X4fLkBLLKkM0GMFr71SDPk43Yzj7/L7ZjKIlidbEZUu9qt6sdKoqMmNqRh8k3RG3evk2KFZo6qAs6XUVNuEk0u4WEAjEMbnJUK0ahG0XgoKrs1+l6y+Avg2ztLLOvZPU=
Received: by 10.66.255.7 with SMTP id c7mr14207ugi.43.1207957633503;
        Fri, 11 Apr 2008 16:47:13 -0700 (PDT)
Received: from kodapan.lan ( [82.93.70.124])
        by mx.google.com with ESMTPS id a1sm27259ugf.78.2008.04.11.16.47.11
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 11 Apr 2008 16:47:12 -0700 (PDT)
Message-ID: <47FFF87E.9040803@gmail.com>
Date: Sat, 12 Apr 2008 01:47:10 +0200
From: Karl Wettin <karl.wettin@gmail.com>
User-Agent: Thunderbird 2.0.0.12 (Macintosh/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene index on relational data
References: <660900.34212.qm@web52006.mail.re2.yahoo.com>
In-Reply-To: <660900.34212.qm@web52006.mail.re2.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Rajesh parab skrev:

>  https://issues.apache.org/jira/browse/LUCENE-879
> <<Rajesh>>
> As per the hack you mentioned inside JIRA, if some of
> the documents are deleted and re-inserted into
> secondary index, the other documents inside the index
> do not change their doc id. However, the newly added
> documents will have different doc ids and hence, we
> will have to sync them with primary index doc ids. Is
> my understanind correct? If this is the case, then we
> will have to update both the indexes every time
> something inside secondary index changes.

 From the JIRA comments to the second patch in there:

This new patch allows consumer to, based on a primary key, delete a 
document and add a new document with the same document number as the 
deleted. The events will occur on merging.


     karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33583-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 12 00:05:12 2008
Return-Path: <java-user-return-33583-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73702 invoked from network); 12 Apr 2008 00:05:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Apr 2008 00:05:12 -0000
Received: (qmail 28390 invoked by uid 500); 12 Apr 2008 00:05:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28349 invoked by uid 500); 12 Apr 2008 00:05:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28338 invoked by uid 99); 12 Apr 2008 00:05:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Apr 2008 17:05:05 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.49.252] (HELO web52005.mail.re2.yahoo.com) (206.190.49.252)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 12 Apr 2008 00:04:14 +0000
Received: (qmail 43642 invoked by uid 60001); 12 Apr 2008 00:04:34 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=hk7F8AKv+lSirpDXN8tvdvf23gGeh7aVOnjp3zCyYas2HOkJDxnOVGjlOoq+P1ESvusBYuc2Fulq4+znD1OAIeTxa5izASFFNjnmZNXiONTfU8edIOnBuE/Whnxj4EiIyx3Q7ig0NxQK8X6cyVKKDLQ7oITYO3xcosAZp7EN/J0=;
X-YMail-OSG: ueRLk_QVM1l_HCmwe0htUPi3qsSBlEz8AjkfFAhs4aqPDqDebC9Dow1JdsyX6zkINQeKouFv.Yaln6Jjv0uFqJVoStazpWFGr21lImHGrY3qI_lHDwz2twb9PcvUrw--
Received: from [12.162.3.126] by web52005.mail.re2.yahoo.com via HTTP; Fri, 11 Apr 2008 17:04:33 PDT
Date: Fri, 11 Apr 2008 17:04:33 -0700 (PDT)
From: Rajesh parab <rajesh_parab_1@yahoo.com>
Subject: Re: Lucene index on relational data
To: java-user@lucene.apache.org
In-Reply-To: <47FFF87E.9040803@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
Message-ID: <215996.43631.qm@web52005.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Karl.

How do we specify the primary key or doc id so that
newly added document will use the same doc id. Do you
have any sample code that makes use of this patch?

Secondly, there was a comment saying it is a proof of
concept and not a real project. Is anyone using this
patch on their production environments? Will this fix
get rolled into latest Lucene release?

Regards,
Rajesh

--- Karl Wettin <karl.wettin@gmail.com> wrote:

> Rajesh parab skrev:
> 
> >  https://issues.apache.org/jira/browse/LUCENE-879
> > <<Rajesh>>
> > As per the hack you mentioned inside JIRA, if some
> of
> > the documents are deleted and re-inserted into
> > secondary index, the other documents inside the
> index
> > do not change their doc id. However, the newly
> added
> > documents will have different doc ids and hence,
> we
> > will have to sync them with primary index doc ids.
> Is
> > my understanind correct? If this is the case, then
> we
> > will have to update both the indexes every time
> > something inside secondary index changes.
> 
>  From the JIRA comments to the second patch in
> there:
> 
> This new patch allows consumer to, based on a
> primary key, delete a 
> document and add a new document with the same
> document number as the 
> deleted. The events will occur on merging.
> 
> 
>      karl
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33584-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 12 00:14:51 2008
Return-Path: <java-user-return-33584-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77178 invoked from network); 12 Apr 2008 00:14:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Apr 2008 00:14:51 -0000
Received: (qmail 35158 invoked by uid 500); 12 Apr 2008 00:14:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35124 invoked by uid 500); 12 Apr 2008 00:14:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35113 invoked by uid 99); 12 Apr 2008 00:14:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Apr 2008 17:14:44 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Apr 2008 00:13:53 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 1C2D671C36A; Fri, 11 Apr 2008 17:14:14 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 1582471C369
	for <java-user@lucene.apache.org>; Fri, 11 Apr 2008 17:14:14 -0700 (PDT)
Date: Fri, 11 Apr 2008 17:14:14 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Document ids in Lucene index
In-Reply-To: <329a6c830804090948p75e5a954ka17b4debdd9d148f@mail.gmail.com>
Message-ID: <Pine.LNX.4.62.0804111710180.26462@radix.cryptio.net>
References: <329a6c830804090948p75e5a954ka17b4debdd9d148f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I am wondering if there are possible "holes" in set of index documents
: ids. Being more specific - is it possible that there exist integer i
: between 0 and IndexReader.maxDoc() such that
: reader.document(i) == null
: and
: reader.isDeleted(i)==false
: ???

That should not ever happen ... if it does, I would consider it a bug 
until someone smarter then me explained why it isn't.

(minor nit: document(i) won't ever return null, if you call it on a 
deleted docId you'll get an IllegalArgumentException)


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33585-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 12 08:39:39 2008
Return-Path: <java-user-return-33585-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5509 invoked from network); 12 Apr 2008 08:39:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Apr 2008 08:39:38 -0000
Received: (qmail 42360 invoked by uid 500); 12 Apr 2008 08:39:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42319 invoked by uid 500); 12 Apr 2008 08:39:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42308 invoked by uid 99); 12 Apr 2008 08:39:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Apr 2008 01:39:32 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [212.27.42.28] (HELO smtp2-g19.free.fr) (212.27.42.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Apr 2008 08:38:49 +0000
Received: from smtp2-g19.free.fr (localhost.localdomain [127.0.0.1])
	by smtp2-g19.free.fr (Postfix) with ESMTP id 8C93812B6B5
	for <java-user@lucene.apache.org>; Sat, 12 Apr 2008 10:39:00 +0200 (CEST)
Received: from [192.168.1.100] (ze.garambrogne.net [82.227.122.98])
	by smtp2-g19.free.fr (Postfix) with ESMTP id 4C06212B6D7
	for <java-user@lucene.apache.org>; Sat, 12 Apr 2008 10:39:00 +0200 (CEST)
Message-Id: <8EA4BE71-10B0-4BA0-BAA2-F27A90B0EF8F@garambrogne.net>
From: Mathieu Lecarme <mathieu@garambrogne.net>
To: java-user@lucene.apache.org
In-Reply-To: <660900.34212.qm@web52006.mail.re2.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: Lucene index on relational data
Date: Sat, 12 Apr 2008 10:38:58 +0200
References: <660900.34212.qm@web52006.mail.re2.yahoo.com>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org

> Regarding data and its relationships - the use case I
> am trying to solve is to partition my data into 2
> indexes, a primary index that will contains majority
> of the data and it is fairly static. The secondary
> index will have related information for the same data
> set in primary index and this related information
> inside secondary index will change very frequently.
>
> The no of documents in each index will go in millions
> and hence, re-building index in memory will not work
> :-(

When you've got too many document, you can shard it.
If you're lucky enough, you can split your data in autonomous split,  
but you always can ask multiple index in one search.
You can even split with a modulo or something like that.

With your two index pattern, why don't you use a foreign stored key in  
your dynamic index?

M.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33586-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 12 08:52:30 2008
Return-Path: <java-user-return-33586-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10017 invoked from network); 12 Apr 2008 08:52:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Apr 2008 08:52:30 -0000
Received: (qmail 51111 invoked by uid 500); 12 Apr 2008 08:52:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51076 invoked by uid 500); 12 Apr 2008 08:52:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51065 invoked by uid 99); 12 Apr 2008 08:52:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Apr 2008 01:52:24 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [194.109.24.32] (HELO smtp-vbr12.xs4all.nl) (194.109.24.32)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Apr 2008 08:51:33 +0000
Received: from k8u.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr12.xs4all.nl (8.13.8/8.13.8) with ESMTP id m3C8psUk043274
	for <java-user@lucene.apache.org>; Sat, 12 Apr 2008 10:51:54 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Using Lucene partly as DB and 'joining' search results.
Date: Sat, 12 Apr 2008 10:51:54 +0200
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <47FF3B35.4000705@teamware.com> <200804111805.57393.paul.elschot@xs4all.nl> <47FFE021.7060502@teamware.com>
In-Reply-To: <47FFE021.7060502@teamware.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200804121051.54279.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Op Saturday 12 April 2008 00:03:13 schreef Antony Bowesman:
> Paul Elschot wrote:
> > Op Friday 11 April 2008 13:49:59 schreef Mathieu Lecarme:
> >> Use Filter and BitSet.
> >>  From the personnal data, you build a Filter
> >> (http://lucene.apache.org/java/2_3_1/api/org/apache/lucene/search/
> >>Fil ter.html) wich is used in the main index.
> >
> > With 1 billion mails, and possibly a Filter per user, you may want
> > to use more compact filters than BitSets, which is currently
> > possible in the development trunk of lucene.
>
> Thanks for the pointers.  I've already used Solr's DocSet interface
> in my implementation, which I think is where the ideas for the
> current Lucene enhancements came from.

The ideas came from quite a few sources. They can be traced
starting from changes.txt in the sources.

> They work well to reduce the 
> filter's footprint.  I'm also caching filters.
>
> The intention is that there is a user data index and the mail
> index(es).  The search against user data index will return a set of
> mail Ids, which is the common key between the two. Doc Ids are no 
> good between the indexes, so that means a potentially large boolean
> OR query to create the filter of labelled mails in the mail indexes. 
> I know it's a theoretical question, but will this perform?

The normal way to collect doc ids for a filter is into a bitset
iterating over the indexed ids (mail ids in your case). A bitset
has random access, so there is no need to do this in doc id order.
An OR query has to work in doc id order so it can compute a score
per doc id, and the ordering loses some performance.

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33587-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 12 13:19:55 2008
Return-Path: <java-user-return-33587-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95544 invoked from network); 12 Apr 2008 13:19:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Apr 2008 13:19:54 -0000
Received: (qmail 25449 invoked by uid 500); 12 Apr 2008 13:19:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25416 invoked by uid 500); 12 Apr 2008 13:19:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25405 invoked by uid 99); 12 Apr 2008 13:19:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Apr 2008 06:19:48 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of raghuram.nadiminti@gmail.com designates 209.85.128.186 as permitted sender)
Received: from [209.85.128.186] (HELO fk-out-0910.google.com) (209.85.128.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Apr 2008 13:19:04 +0000
Received: by fk-out-0910.google.com with SMTP id 19so945245fkr.5
        for <java-user@lucene.apache.org>; Sat, 12 Apr 2008 06:19:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=SVjaQydISf2+KGqBH5CJPCITPGsbAfVh4COHmtc5CcU=;
        b=sNNUo3S+ZAhsulHRDbmzplJOnInLZQIHNZ21OotrKRD0IrKtmE+4zi9Df1Cby9rkQL8bX/R1u8ryxef+PExSyTDm9JwtUeLDL8N4G3pbwiaYdfDuBPvf7d4KmWgJe5dQOHr+1FlJ+3BC8y3KNGdo0H3NClhWzwH6QO8ha3XxHY8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=o7iw+zVxgHQjHIlrnA9AZjkCcrT6j5Zzz7d4UqMBfSKENhLH2I94tP6Er+HizVPPwAdJSbws1yOHV4QUQEMnCvaIOkX0CxFKlVXFthSA7Q8Cksc40pkNhtWYlyvZqthoce+/SouDn/JkiZqkqunrQzg1FJz8vCv0UHAaZmPiU1Y=
Received: by 10.78.206.6 with SMTP id d6mr1801712hug.117.1208006352533;
        Sat, 12 Apr 2008 06:19:12 -0700 (PDT)
Received: by 10.78.167.7 with HTTP; Sat, 12 Apr 2008 06:19:12 -0700 (PDT)
Message-ID: <1e68ba6b0804120619s4c55210dj6660af8ac94bbfc4@mail.gmail.com>
Date: Sat, 12 Apr 2008 18:49:12 +0530
From: "Raghu Ram" <raghuram.nadiminti@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Call Lucene default command line Search from PHP script
In-Reply-To: <47E8BCB2.4090809@garambrogne.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_44993_11343796.1208006352547"
References: <16207418.post@talk.nabble.com> <47E8BCB2.4090809@garambrogne.net>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_44993_11343796.1208006352547
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

try using php java bridge
http://php-java-bridge.sourceforge.net/
Its a way for using java objects directly in php.

2008/3/25 Mathieu Lecarme <mathieu@garambrogne.net>:

> milu07 a =E9crit :
>
>  Hello,
> >
> > My machine is Ubuntu 7.10. I am working with Apache Lucene. I have done
> > with
> > indexer and tried with command line Searcher (the default command line
> > included in Lucene package:
> > http://lucene.apache.org/java/2_3_1/demo2.html).
> > When I use this at command line:
> >
> > java Searcher -query algorithm
> >
> > it works and returns a list of results to me. Here 'algorithm' is the
> > keyword to search.
> >
> > However, I want to have a web search interface written in PHP, I use PH=
P
> > exec() to call this Searcher from my PHP script:
> >
> > exec("java Searcher -query algorithm ", $arr, $retVal);
> > [I also tried: exec("java Searcher -query 'algorithm' ", $arr, $retVal)=
]
> >
> > It does not work. I print the value of $retVal, it is 1.
> >
> > I come back and try: exec("java Searcher -query algorithm 2>&1 ", $arr,
> > $retVal);
> > I receive: Exception in thread "main" java.lang.NoClassDefFoundError:
> > org/apache/lucene/analysis/Analyzer  and $retVal is 1
> >
> > In the command line Searcher.java of Lucene, it imports many libraries,
> > is
> > this the problem?
> > import org.apache.lucene.analysis.Analyzer;
> > import org.apache.lucene.analysis.standard.StandardAnalyz er;
> > ....
> >
> > I guess this is the problem of path. However, I do not know how to fix
> > it
> > because it works in command line ($CLASSPATH points to the .jar file of
> > Lucene library). May be PHP does not know $CLASSPATH. So, I add Lucene
> > lib
> > to $PATH:
> >
> > export PATH=3D$PATH:/usr/lib/lucene-core-2.3.1.jar:/usr/lib
> >
> > However, I get the same error message when I try: exec("java Searcher
> > -query
> > algorithm 2>&1 ", $arr, $retVal);
> > Exception in thread "main" java.lang.NoClassDefFoundError:
> > org/apache/lucene/analysis/Analyzer
> >
> > Could you please help?
> >
> > Thank you,
> >
> >
> using command line from PHP is a bad idea.
> socket is a better way :
> https://admin.garambrogne.net/projets/passerelle/browser/trunk/goniometre
>
>
> M.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_44993_11343796.1208006352547--

From java-user-return-33588-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 12 18:05:54 2008
Return-Path: <java-user-return-33588-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11972 invoked from network); 12 Apr 2008 18:05:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Apr 2008 18:05:54 -0000
Received: (qmail 29177 invoked by uid 500); 12 Apr 2008 18:05:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29151 invoked by uid 500); 12 Apr 2008 18:05:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29140 invoked by uid 99); 12 Apr 2008 18:05:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Apr 2008 11:05:46 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 72.14.220.155 as permitted sender)
Received: from [72.14.220.155] (HELO fg-out-1718.google.com) (72.14.220.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Apr 2008 18:05:04 +0000
Received: by fg-out-1718.google.com with SMTP id d23so910234fga.27
        for <java-user@lucene.apache.org>; Sat, 12 Apr 2008 11:05:14 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=Yb/+NigCPVfsUcLhCg2fXTP7jYgx9u4I1xQrxwDa+ak=;
        b=FTCv9CZFP51IUUA+nqG1dQNWex/GFU/CE3FNPZC4uM9mfU/02tiFpOpqKWejrK2qhiDg8sUvNifm+Xi3ANW18Nyib4RWnU3e1UkvvOWTGqRsYk2zXFmiiss+uCryhcXcCfig47PbjwMB9J6EaXfxUmeM/0p+NHhUywRaPhQvPUA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=rdf7GTL+uXKVJrQV5qxwkassuxkWDKXqOkJiOaHDSCYqFh9RVealFNhR8lojtg2DxCnwtyO3iK0a5466v+IIUoS6ucx0KPwHAu1CQ0CdzMT3i0sDDcaRk1l8xxryJi5uqwvIu7CkZv1C12DA8YEUhJ5Bd2Hab0YNO74Kc2KuzNs=
Received: by 10.82.174.20 with SMTP id w20mr6427275bue.38.1208023513506;
        Sat, 12 Apr 2008 11:05:13 -0700 (PDT)
Received: from kodapan.local ( [82.93.70.124])
        by mx.google.com with ESMTPS id i8sm6129790nfh.1.2008.04.12.11.05.11
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sat, 12 Apr 2008 11:05:12 -0700 (PDT)
Message-ID: <4800F9D6.1090107@gmail.com>
Date: Sat, 12 Apr 2008 20:05:10 +0200
From: Karl Wettin <karl.wettin@gmail.com>
User-Agent: Thunderbird 2.0.0.12 (Macintosh/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene index on relational data
References: <215996.43631.qm@web52005.mail.re2.yahoo.com>
In-Reply-To: <215996.43631.qm@web52005.mail.re2.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Rajesh parab skrev:
> How do we specify the primary key or doc id so that
> newly added document will use the same doc id. Do you
> have any sample code that makes use of this patch?

Sorry, there is only the test case in the patch.

> 
> Secondly, there was a comment saying it is a proof of
> concept and not a real project. Is anyone using this
> patch on their production environments? Will this fix
> get rolled into latest Lucene release?

I very much doubt this patch would ever be rolled in. It is just 
something I did do see if it was possible to solve some way without 
doing major changes to the core architecture.

It works though. Feel free to report back in the issue with any results 
you get in case you try it out.


     karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33589-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 13 10:20:43 2008
Return-Path: <java-user-return-33589-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6815 invoked from network); 13 Apr 2008 10:20:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Apr 2008 10:20:43 -0000
Received: (qmail 26903 invoked by uid 500); 13 Apr 2008 10:20:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26859 invoked by uid 500); 13 Apr 2008 10:20:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26848 invoked by uid 99); 13 Apr 2008 10:20:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Apr 2008 03:20:34 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.83] (HELO spunkymail-a20.g.dreamhost.com) (208.97.132.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Apr 2008 10:19:51 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a20.g.dreamhost.com (Postfix) with ESMTP id 01863E2520
	for <java-user@lucene.apache.org>; Sun, 13 Apr 2008 03:20:02 -0700 (PDT)
Message-Id: <1E9948FD-FB52-4BE5-AFB8-D56D01EE9E85@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <200804031624.16155.ilyak@office.uw.ru>
Content-Type: text/plain; charset=UTF-8; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: Implementing CMS search function using Lucene
Date: Sun, 13 Apr 2008 06:20:01 -0400
References: <200804031624.16155.ilyak@office.uw.ru>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org

For starters, you might have a look at Jackrabbit (Content Repo. built =20=

on Lucene) as I know it powers several CMS systems.

More below.

On Apr 3, 2008, at 8:24 AM, =D0=98=D0=BB=D1=8C=D1=8F =D0=9A=D0=B0=D0=B7=D0=
=BD=D0=B0=D1=87=D0=B5=D0=B5=D0=B2 wrote:

> Hello.
>
> We've designing a CMS in Java, and I've trying to implement site =20
> search
> function using lucene.
>
> The basic conception is that:
> - Site features numerous objects that we'd like to throw into index: =20=

> pages,
> various text blocks on those pages, descriptions and keyword lists =20
> of those
> pages, static bits of html, goods sections with goods inside them, =20
> etc, etc.
> - There would be a search form that would be occasionally used by site
> visitors.
> - Visitors are highly unlikely to use advanced queries. I assume 95% =20=

> queries
> would be either a few keywords or a phrase to search. We have to =20
> find the
> best matches for such queries.
> - The thing I want to introduce is "phrase in quotes" to search for =20=

> exact
> phrase. Also, most our sites are in Russian, so some, even if =20
> rudimentary,
> support for Russian morphology is a plus.
>
> I've dug into examples and have a following set of questions:
> - Our objects are fairly structured, so I would like to introduce a =20=

> lot of
> fields, something like five different for each object type.
> But, as far as I see, all Queries are going to search only one field.
> This is certainly bad because users surely want to search *all* the =20=

> fields at
> once. The aren't going to bother with queries.

You can search whatever fields you want.  It's all a question of how =20
you generate your queries.  Typically, one has an "all" field as well.

>
> Maybe I can add queries over every field joined by 'or' operation, but
> wouldn't that be too slow?

Probably not.  I suppose if you are talking hundreds of fields

> I don't want it to work more than half second on
> reasonable sized index. Also, I don't want to hard-code exact list =20
> of fields,
> I might add them as I develop the system. Is this doable, would that =20=

> work? Or
> I'll have to stuff all text content from object into one blob-field =20=

> and query
> that? Which way is more reasonable?

I'd probably do both, then you can handle generic queries as well as =20
field specific ones.

>
> - Our objects have their hierarchy, e.g., blocks belong to page. Is =20=

> there a
> way to make Lucene govern parent-child relation, somehow summing =20
> hits in all
> childs to find the best-matching parent? I assume, no, then is there =20=

> a way
> for me to go thru matching documents list, reducing it by 'adding' =20
> blocks'
> scores to find the best matching page?

You have to manage parent-child yourself.  I am pretty sure Jackrabbit =20=

does this.

>
> - Is there a way to set weights for different fields? Let's say, =20
> content have
> a weight of 1, title have a weight of 5 and picture subscribe have a =20=

> weight
> of 0.5. If no, can I do that by hand?

Field.setBoost()

>
> - Is there something to support Russian morphology (it's all like =20
> "the last n
> letters of a word might change, we should match all forms") for either
> indexer or searcher?

Check contrib/analyzers, I see some Russian analyzers in there, but I =20=

can't speak to the quality.

> Maybe "inexact match", QueryParser's ~ operator, would
> be enough? I heard Nutch project have something like that, but I =20
> wonder if I
> would be able to reuse parts of Nutch, and I surely can't use Nutch =20=

> as a
> whole.

Not sure.

>
>
> If there are another considerations, they're welcome.
>
> Thanks for your probable replies.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33590-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 13 10:23:40 2008
Return-Path: <java-user-return-33590-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7519 invoked from network); 13 Apr 2008 10:23:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Apr 2008 10:23:38 -0000
Received: (qmail 29549 invoked by uid 500); 13 Apr 2008 10:23:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29515 invoked by uid 500); 13 Apr 2008 10:23:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29503 invoked by uid 99); 13 Apr 2008 10:23:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Apr 2008 03:23:32 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.81] (HELO spunkymail-a12.g.dreamhost.com) (208.97.132.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Apr 2008 10:22:41 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a12.g.dreamhost.com (Postfix) with ESMTP id 930167FBC
	for <java-user@lucene.apache.org>; Sun, 13 Apr 2008 03:22:58 -0700 (PDT)
Message-Id: <FA1558A2-4648-42DF-B234-E94C496C38EE@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <47F4D79B.8070703@googlemail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: Error tolerant text search with Lucene?
Date: Sun, 13 Apr 2008 06:22:59 -0400
References: <47F4D79B.8070703@googlemail.com>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Given the way people misspell these days, I think you could treat  
"correct" terms as being incorrect and use your spellchecker to give  
you the alternates based on your index?  You might also look into the  
FuzzyQuery.


On Apr 3, 2008, at 9:11 AM, Marjan Celikik wrote:

> Hi everyone,
>
> I know that there are packages that support the "Did you mean ... ?"  
> search features with lucene which tries to find the most suited  
> correct-word query.. however, so far I haven't encountered the  
> opposite search feature: given a correct query, find all documents  
> which contain misspellings of the query.. are you guys aware of  
> anything like this with lucene?
>
> Thanks!
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ







---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33591-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 13 11:39:12 2008
Return-Path: <java-user-return-33591-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27255 invoked from network); 13 Apr 2008 11:39:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Apr 2008 11:39:12 -0000
Received: (qmail 56084 invoked by uid 500); 13 Apr 2008 11:39:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56048 invoked by uid 500); 13 Apr 2008 11:39:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56037 invoked by uid 99); 13 Apr 2008 11:39:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Apr 2008 04:39:05 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of wojtekh2@gmail.com designates 209.85.132.242 as permitted sender)
Received: from [209.85.132.242] (HELO an-out-0708.google.com) (209.85.132.242)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Apr 2008 11:38:24 +0000
Received: by an-out-0708.google.com with SMTP id c5so377444anc.49
        for <java-user@lucene.apache.org>; Sun, 13 Apr 2008 04:38:35 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=wScu97Ca8DSLFaTAGSEDOTDkU6ihhi3ug/zr05F8ahw=;
        b=SE1Xx+hcDDaXQHeZMtfaROghqknYgNogQfFw+SF4RR99Yf1f3hRaPFxP3nyGQV9c5m8fLOiKAKIy2zLXzB1u6KLS79DwzTq0PDrETC2IDzENN7isyIAddp6tTVwRKT+WZ2H4SMY6xg3zO9NUU9M6GVOLRz13vW0C/GYcyz8vZug=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=RH65WYPbDzdZWFuvJuvBcagyp5q6G8O2jnNlKgi515w1leYrHcUsPOjJjewIUt6ahwx/kGs5pFfPgn2OOsoPNXRXcHKllSPmkUyDlkImQUK8Of6XPDHhYoxe5e3hjm8F0oCRaznaNJtJqnALgd1cfpKZbxMVvBM8MxO9zji2UKU=
Received: by 10.100.110.16 with SMTP id i16mr9736186anc.40.1208086715501;
        Sun, 13 Apr 2008 04:38:35 -0700 (PDT)
Received: by 10.100.229.4 with HTTP; Sun, 13 Apr 2008 04:38:35 -0700 (PDT)
Message-ID: <329a6c830804130438v7bb9df07mc212fdd17d693f6b@mail.gmail.com>
Date: Sun, 13 Apr 2008 13:38:35 +0200
From: "Wojtek H" <wojtekh2@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Document ids in Lucene index
In-Reply-To: <Pine.LNX.4.62.0804111710180.26462@radix.cryptio.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <329a6c830804090948p75e5a954ka17b4debdd9d148f@mail.gmail.com>
	 <Pine.LNX.4.62.0804111710180.26462@radix.cryptio.net>
X-Virus-Checked: Checked by ClamAV on apache.org

Thank you for the answer. So it means that I can without any problems
iterate over index documents using this algoritm (I don't want to use
MatchAllQuery):

- check maxDoc()
- iterate from 0 to maxDoc() and process doc if it is not deleted

Am I right?
Best,
wojtek

2008/4/12, Chris Hostetter <hossman_lucene@fucit.org>:
>
>  : I am wondering if there are possible "holes" in set of index documents
>
> : ids. Being more specific - is it possible that there exist integer i
>  : between 0 and IndexReader.maxDoc() such that
>  : reader.document(i) == null
>  : and
>  : reader.isDeleted(i)==false
>
> : ???
>
>  That should not ever happen ... if it does, I would consider it a bug
>  until someone smarter then me explained why it isn't.
>
>  (minor nit: document(i) won't ever return null, if you call it on a
>  deleted docId you'll get an IllegalArgumentException)
>
>
>  -Hoss
>
>
>  ---------------------------------------------------------------------
>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33592-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 13 14:46:11 2008
Return-Path: <java-user-return-33592-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68672 invoked from network); 13 Apr 2008 14:46:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Apr 2008 14:46:11 -0000
Received: (qmail 57279 invoked by uid 500); 13 Apr 2008 14:46:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57242 invoked by uid 500); 13 Apr 2008 14:46:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57231 invoked by uid 99); 13 Apr 2008 14:46:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Apr 2008 07:46:05 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lucene@nitwit.de designates 80.67.18.14 as permitted sender)
Received: from [80.67.18.14] (HELO smtprelay02.ispgateway.de) (80.67.18.14)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Apr 2008 14:45:14 +0000
Received: from [85.178.251.28] (helo=server.localdomain)
	by smtprelay02.ispgateway.de with esmtps (TLSv1:AES256-SHA:256)
	(Exim 4.68)
	(envelope-from <lucene@nitwit.de>)
	id 1Jl3SY-0003aZ-Qu
	for java-user@lucene.apache.org; Sun, 13 Apr 2008 16:45:34 +0200
Received: from localhost (localhost [127.0.0.1])
	by server.localdomain (Postfix) with ESMTP id 62F1357BE55
	for <java-user@lucene.apache.org>; Sun, 13 Apr 2008 16:45:38 +0200 (CEST)
From: Timo Nentwig <lucene@nitwit.de>
To: java-user@lucene.apache.org
Subject: Sorting consumes hundreds of MBytes RAM
Date: Sun, 13 Apr 2008 16:45:37 +0200
User-Agent: KMail/1.9.7
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200804131645.37576.lucene@nitwit.de>
X-Df-Sender: [pbs]153383
X-Virus-Checked: Checked by ClamAV on apache.org

Hi!

I found that when sorting the search result -depending on the amount of data 
in the field to sort by - this can easily lead to FieldCacheImpl to allocate 
hundreds of MByte RAM.

How does this work internally? It seems as if all data for this field found in 
the entire index is read into memory (?).

And question #2: what am I going to do against it? Index  sharding?

Thanks,
Timo

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33593-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 13 18:24:24 2008
Return-Path: <java-user-return-33593-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42080 invoked from network); 13 Apr 2008 18:24:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Apr 2008 18:24:24 -0000
Received: (qmail 87999 invoked by uid 500); 13 Apr 2008 18:24:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87969 invoked by uid 500); 13 Apr 2008 18:24:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87958 invoked by uid 99); 13 Apr 2008 18:24:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Apr 2008 11:24:17 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.48.58] (HELO web52009.mail.re2.yahoo.com) (206.190.48.58)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 13 Apr 2008 18:23:34 +0000
Received: (qmail 15832 invoked by uid 60001); 13 Apr 2008 18:23:46 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=jlRxE7mqt1M/8xhj964lEXTZ1zs52MoNApQ06swOcuOCx2wuVdqBxmVHLh3ilqID/22srqLkQ20JnWUJ4gp0D1SjxMgHLNlJUSIabkPLr1Q9sO8Lp7HvAkv9ZdumGHn32hxGz55yTnPjOVZ6qhQPmquDxy1eHJrsZbKZP1U4Qag=;
X-YMail-OSG: rBY70MYVM1mrZgMijc5rRUkeOOyntEgVb_OTL4C8Yi_YPcbxxeO_I9Xea7SRhu6Mn9S9BjU8xFMYoPBQtD6UTPBf7X6Unc7HQN7sVqlmvGt55QcEHknlb9nRhC0tcg--
Received: from [12.162.3.126] by web52009.mail.re2.yahoo.com via HTTP; Sun, 13 Apr 2008 11:23:46 PDT
Date: Sun, 13 Apr 2008 11:23:46 -0700 (PDT)
From: Rajesh parab <rajesh_parab_1@yahoo.com>
Subject: Re: Lucene index on relational data
To: java-user@lucene.apache.org
In-Reply-To: <8EA4BE71-10B0-4BA0-BAA2-F27A90B0EF8F@garambrogne.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
Message-ID: <299865.15043.qm@web52009.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Mathieu,

I can definitely store the foreign key inside the
dynamic index. However if I understand correctly, for
ParallelReader to work properly, doc ids for all
documents in both primary and secondary (dynamic)
index should be in same order.

How can we achieve it if there are frequest changes to
the dynamic index? The doc ids will keep on changing
as we delete and re-insert records in dynamic index.
As Karl pointed out, there is a hack available in JIRA
that can take care of this doc id update issue, but it
is not an official patch and not tested for
performance.

How are people updating their indexes when used in
conjuction with ParallelReader. I think ParallelReader
will work well for data partitioned between 2 indexes
(static and dynamic). However, I am not finding any
better approach to just update the dynamic index.

Regards,
Rajesh

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33594-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 13 18:29:23 2008
Return-Path: <java-user-return-33594-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42698 invoked from network); 13 Apr 2008 18:29:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Apr 2008 18:29:23 -0000
Received: (qmail 91170 invoked by uid 500); 13 Apr 2008 18:29:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91143 invoked by uid 500); 13 Apr 2008 18:29:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91132 invoked by uid 99); 13 Apr 2008 18:29:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Apr 2008 11:29:17 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.49.252] (HELO web52005.mail.re2.yahoo.com) (206.190.49.252)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 13 Apr 2008 18:28:34 +0000
Received: (qmail 8394 invoked by uid 60001); 13 Apr 2008 18:28:45 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=MvStg9oAwZi/lgFHrd59Toq3zHfFT9aO9pLyKkKwTSLsX5+sYChhVdc7FauNbuTtUvtmgeGPa/IAgzzR6Q5KpYOMbpx2N13IKUaTM7jGDEF3J/KuwdiX6L32XSVIyxT9D/YY7Qb+DrvD8n7B5Iezb/TKwzy3aconRKVMdTPhfKE=;
X-YMail-OSG: PjYohRYVM1m9KkiqzB6vRJ8AzzUEumwHxMCo4NkbKbOrtHuld77lRd9dIMv.lzGjocCzv0GVdHrvwuQXBIr77z0hlJ9hu008xZfQWvF9Tf5nedOfrXLbNI5KMtwj
Received: from [12.162.3.126] by web52005.mail.re2.yahoo.com via HTTP; Sun, 13 Apr 2008 11:28:45 PDT
Date: Sun, 13 Apr 2008 11:28:45 -0700 (PDT)
From: Rajesh parab <rajesh_parab_1@yahoo.com>
Subject: Re: Lucene index on relational data
To: java-user@lucene.apache.org
In-Reply-To: <4800F9D6.1090107@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
Message-ID: <847019.4497.qm@web52005.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Karl. I think your solution would be useful in
case we would like to partition the index into two
indexes and use ParallelReader to query both indexes
simultaneously. 

If this solution is not getting including inside
future Lucene releases, what other options we have to
update just one of the two indexes and keep doc ids in
sync so that we can use ParallelReader?

Regards,
Rajesh

--- Karl Wettin <karl.wettin@gmail.com> wrote:

> Rajesh parab skrev:
> > How do we specify the primary key or doc id so
> that
> > newly added document will use the same doc id. Do
> you
> > have any sample code that makes use of this patch?
> 
> Sorry, there is only the test case in the patch.
> 
> > 
> > Secondly, there was a comment saying it is a proof
> of
> > concept and not a real project. Is anyone using
> this
> > patch on their production environments? Will this
> fix
> > get rolled into latest Lucene release?
> 
> I very much doubt this patch would ever be rolled
> in. It is just 
> something I did do see if it was possible to solve
> some way without 
> doing major changes to the core architecture.
> 
> It works though. Feel free to report back in the
> issue with any results 
> you get in case you try it out.
> 
> 
>      karl
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33595-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 14 03:25:50 2008
Return-Path: <java-user-return-33595-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39990 invoked from network); 14 Apr 2008 03:25:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Apr 2008 03:25:50 -0000
Received: (qmail 42731 invoked by uid 500); 14 Apr 2008 03:25:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42702 invoked by uid 500); 14 Apr 2008 03:25:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42686 invoked by uid 99); 14 Apr 2008 03:25:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Apr 2008 20:25:44 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.38.61] (HELO web50307.mail.re2.yahoo.com) (206.190.38.61)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 14 Apr 2008 03:24:50 +0000
Received: (qmail 35975 invoked by uid 60001); 14 Apr 2008 03:25:09 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=4jnUBLQ2oU2fP7W8C68dJ0ZxcIax0DBASCt8RRTft934J/yG/yY1K6uOMnLF5yjjt+hZH88TQ0gg+Rpfs9ZInQxFi1d6TdhPLuWfXXaYo2A5sbeBoPwtw+Tpysm6I77ehQayrm6lea2vh/VZY5sh8MlKRW6oPHJEV9cHDpKbwWs=;
X-YMail-OSG: 5h2eGXMVM1l26tujcMGnWXpneQrz.v_6TKegK6Osca4pyBb0pmY3YZXh1MRKEM_w0mBLacsmMwh6jx1YPR1FyKF3T7g21V4XN.qp_Na_LD2hTUa0hE15OpjciO3WiEAq.i6NE6ilbJdWSQ--
Received: from [72.231.9.236] by web50307.mail.re2.yahoo.com via HTTP; Sun, 13 Apr 2008 20:25:09 PDT
X-Mailer: YahooMailRC/902.40 YahooMailWebService/0.7.185
Date: Sun, 13 Apr 2008 20:25:09 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Sorting consumes hundreds of MBytes RAM
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <262665.34316.qm@web50307.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Timo,
That is true.  The only think I can recommend at the moment is to make sure you specify the correct data type.  If your sort field is a numeric field, make that explicit.

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch

----- Original Message ----
From: Timo Nentwig <lucene@nitwit.de>
To: java-user@lucene.apache.org
Sent: Sunday, April 13, 2008 4:45:37 PM
Subject: Sorting consumes hundreds of MBytes RAM

Hi!

I found that when sorting the search result -depending on the amount of data 
in the field to sort by - this can easily lead to FieldCacheImpl to allocate 
hundreds of MByte RAM.

How does this work internally? It seems as if all data for this field found in 
the entire index is read into memory (?).

And question #2: what am I going to do against it? Index  sharding?

Thanks,
Timo

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33596-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 14 03:26:56 2008
Return-Path: <java-user-return-33596-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40296 invoked from network); 14 Apr 2008 03:26:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Apr 2008 03:26:56 -0000
Received: (qmail 44361 invoked by uid 500); 14 Apr 2008 03:26:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44320 invoked by uid 500); 14 Apr 2008 03:26:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44309 invoked by uid 99); 14 Apr 2008 03:26:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Apr 2008 20:26:50 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.39.214] (HELO web50312.mail.re2.yahoo.com) (206.190.39.214)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 14 Apr 2008 03:25:57 +0000
Received: (qmail 74411 invoked by uid 60001); 14 Apr 2008 03:26:17 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=Ztuz3jj4Rnlbm6hqGfnBdttkIx9ql9JynJHwldUPV6GHdnq8rvtQlDiVtDewMURnbL4p78PZ8+o1tiD51UxlTdKv2Ze1Ygca711EJIjizqdXNRSnMQHWa1H0aDHqxH2/x0mzslPEZNUQ0A9gbxd4zzW1d+Cp7ue57xhKD5nN7jo=;
X-YMail-OSG: ulptnNYVM1nF_AJ4BDOgYy1owm9xuy8i6x2MV6DbbO1WnktyghsuEnPuvU6LkXQgFbDqxuglOepicB8BE8Yh59ToVY5xYN85xVmW6H5xevpfo62AHOBoP6FpIM89wLhVLlEIGPXu4cbFgxfFhwVTPmaog6eGaHaTEiD5yesr9A--
Received: from [72.231.9.236] by web50312.mail.re2.yahoo.com via HTTP; Sun, 13 Apr 2008 20:26:17 PDT
X-Mailer: YahooMailRC/902.40 YahooMailWebService/0.7.185
Date: Sun, 13 Apr 2008 20:26:17 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Document ids in Lucene index
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <889772.74361.qm@web50312.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Wojtek, yes, that's how you can loop through all docs in the index.

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch

----- Original Message ----
From: Wojtek H <wojtekh2@gmail.com>
To: java-user@lucene.apache.org
Sent: Sunday, April 13, 2008 1:38:35 PM
Subject: Re: Document ids in Lucene index

Thank you for the answer. So it means that I can without any problems
iterate over index documents using this algoritm (I don't want to use
MatchAllQuery):

- check maxDoc()
- iterate from 0 to maxDoc() and process doc if it is not deleted

Am I right?
Best,
wojtek

2008/4/12, Chris Hostetter <hossman_lucene@fucit.org>:
>
>  : I am wondering if there are possible "holes" in set of index documents
>
> : ids. Being more specific - is it possible that there exist integer i
>  : between 0 and IndexReader.maxDoc() such that
>  : reader.document(i) == null
>  : and
>  : reader.isDeleted(i)==false
>
> : ???
>
>  That should not ever happen ... if it does, I would consider it a bug
>  until someone smarter then me explained why it isn't.
>
>  (minor nit: document(i) won't ever return null, if you call it on a
>  deleted docId you'll get an IllegalArgumentException)
>
>
>  -Hoss
>
>
>  ---------------------------------------------------------------------
>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33597-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 14 03:37:49 2008
Return-Path: <java-user-return-33597-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44713 invoked from network); 14 Apr 2008 03:37:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Apr 2008 03:37:49 -0000
Received: (qmail 47981 invoked by uid 500); 14 Apr 2008 03:37:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47947 invoked by uid 500); 14 Apr 2008 03:37:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47936 invoked by uid 99); 14 Apr 2008 03:37:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Apr 2008 20:37:43 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.39.214] (HELO web50312.mail.re2.yahoo.com) (206.190.39.214)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 14 Apr 2008 03:36:58 +0000
Received: (qmail 81934 invoked by uid 60001); 14 Apr 2008 03:37:09 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=oRTCxuHxZaTXpoHQ2eqRyK+6SGQlh5465DRmM540dMv2Huq68gnwTBj2AFOf1fNRVFe+5WdfsWt+WHgu9PvdRlSyUTp2EqOtsYp6zN8m9f789v2iRYYDlqdQ3iww2bjVhcAZQ/iRBvDm3B1tBLgbl46B37kvEyl51iFRQiysKvI=;
X-YMail-OSG: fWbgiRkVM1mlaRDXX8QzA7xk6c2gHZiK5CMHSK0.npEln7TAwgZZs1kyJx3HoZsYfjuiP9JrRcf59WnpwyRma2GeTxthJiPOLp_H.Nkl5tV5_fmjcJc5jOh02SphyVCnWlogBjBJu29.dDLNqhKjcIeKHHtL069EDTKFeNcqAg--
Received: from [72.231.9.236] by web50312.mail.re2.yahoo.com via HTTP; Sun, 13 Apr 2008 20:37:09 PDT
X-Mailer: YahooMailRC/902.40 YahooMailWebService/0.7.185
Date: Sun, 13 Apr 2008 20:37:09 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: FieldCache performance
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <258900.81701.qm@web50312.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Angel,
Have you stepped through this with a debugger?  That might reveal something.
Have you tried doing kill -QUIT <PID> while waiting for those slow calls you mention to return?  Perhaps this will show that the slow calls spend their time somewhere where the faster calls never go.

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch

----- Original Message ----
From: Angel Faus <angel@vlex.com>
To: java-user@lucene.apache.org
Sent: Tuesday, April 8, 2008 8:15:11 PM
Subject: FieldCache performance

Hi,

I have a puzzling question about FieldCache; we use FieldCache to
speed up faceted search [just like solr does] and also to avoid
creating Document instances when listing results. It works great, but
for one field where performance is awful: on the order of 15-30
seconds for one index, and can grow to hundreds of seconds when using
MultiReader.

There are two things that surprise me:

  1. -  calling FieldCache.DEFAULT.getInts takes a lot longer on a
certain field ("vid") than on all the others.
 2. - when querying different indexes, the time is not proportional to
the number of documents, or to the number of distinct values of this
field

The code involved is quite simple:

        cache_fuente =
org.apache.lucene.search.FieldCache.DEFAULT.getInts(reader, "fuente");
        cache_vid =
org.apache.lucene.search.FieldCache.DEFAULT.getInts(reader, "vid");

So, for example, when querying our index INDEX-2 (1,634,330 documents)
computing cache_fuente takes 0.10 seconds, computing cache_vid takes
6.60 sec. The difference is a 67x factor.

Both fields are integers, "vid" is larger but not that much [on
average 7.9 digits vs 3.5 digits for "fuente"] and both are stored as
non-tokenized fields [Keywords].

It turns out that INDEX-2 is the best case: when querying INDEX-6
[963,863 documents] the time it takes to compute cache_vid jumps to
16.85 seconds. Other indices take 30,49 seconds, 7,32 seconds, 45.12
seconds, etc.

This variation between indices is not related to the number of
documents nor to the number of distinct values ["vid" is always a
unique field]. I can provide detalied data if it's useful.

And now to the second puzzling point, when querying a MultiReader of
INDEX-2 & INDEX-6 together, the time to compute "cache_vid" jumps to
61.9 seconds. So, it is not additive (remember that separately this
indices take 16.86 + 6.60 = 23.45 seconds)

I've read the source code searching for a clue but with no success. I
would really appreciate if anyone could help me understand what drives
FieldCache performance.

"top" shows that all this time it takes to build cache_vid is spent
using CPU cycles, so I thought it could be parsing-related, but
switching to FieldCache.DEFAULT.getStrings does not help at all.

Finally: we are using lucene-core-2.1.0 for querying, and the search
is served through a servlet in a tomcat process. The index is created
using lucene-1.4.3; i don't know if the difference in versions can
matter.

Thanks in advance for any help,


Angel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33598-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 14 03:40:11 2008
Return-Path: <java-user-return-33598-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46078 invoked from network); 14 Apr 2008 03:40:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Apr 2008 03:40:08 -0000
Received: (qmail 50007 invoked by uid 500); 14 Apr 2008 03:40:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49976 invoked by uid 500); 14 Apr 2008 03:40:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49965 invoked by uid 99); 14 Apr 2008 03:40:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Apr 2008 20:40:02 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.59] (HELO web50305.mail.re2.yahoo.com) (206.190.38.59)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 14 Apr 2008 03:39:17 +0000
Received: (qmail 84637 invoked by uid 60001); 14 Apr 2008 03:39:29 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=U/NNck1l3uk41Asxv4WyHpfom6C3rtgRaG0E2Bs2ogrDGsiraI/2X5uUf+5CcLuOQVi5RDmpepOmnZwmDvs1tPwxY1IFGG1D/jKCYt/WG6MA1V90BHbgIaj/33ExUfwm0yb/psUq1u+nLIA6M5+IOT6/9ovnmHceGZZxvIxqChQ=;
X-YMail-OSG: NvkhppwVM1n_P3zhHL_wBiaEcXcfkK.VLXV_yeNSjw2wGP6sfymbDxfiGrpFeQF3JQ--
Received: from [72.231.9.236] by web50305.mail.re2.yahoo.com via HTTP; Sun, 13 Apr 2008 20:39:28 PDT
X-Mailer: YahooMailRC/902.40 YahooMailWebService/0.7.185
Date: Sun, 13 Apr 2008 20:39:28 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Update of stored and non-indexed binary fields
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <931063.84546.qm@web50305.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Renaud,
You'll have to "update" the whole Document in order to change the value of one of its fields.  The only way around that is to store all your fields, which would let you pull the Document from the index, update one of its fields, and add it back to the index.

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch

----- Original Message ----
From: Renaud Delbru <renaud.delbru@deri.org>
To: java-user@lucene.apache.org
Sent: Tuesday, April 8, 2008 6:56:00 PM
Subject: Update of stored and non-indexed binary fields

Hi,

I am aware that there is already lots of discussions about field updates 
in Lucene. I post my question anyway because I don't find any 
information about my problem, which is to update a stored but 
non-indexed field.
For example, I have for each document a stored and non-indexed binary 
field 'pagerank', which is a float and which is used for computing the 
score of a document. As the document collection evolves, the pagerank 
for each document evolves also.
Since the pagerank value is stored as a float (BinaryValue), I guess 
that the value size (in byte) is fixed in the field data (.fdt) file. 
Then, could it be possible to overwrite the old float value by a new 
float value ?

Thanks,
-- 
Renaud delbru

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33599-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 14 14:18:38 2008
Return-Path: <java-user-return-33599-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50164 invoked from network); 14 Apr 2008 14:18:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Apr 2008 14:18:38 -0000
Received: (qmail 84977 invoked by uid 500); 14 Apr 2008 14:18:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84952 invoked by uid 500); 14 Apr 2008 14:18:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84941 invoked by uid 99); 14 Apr 2008 14:18:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Apr 2008 07:18:30 -0700
X-ASF-Spam-Status: No, hits=-2.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of cbmcgee@ca.ibm.com designates 32.97.182.144 as permitted sender)
Received: from [32.97.182.144] (HELO e4.ny.us.ibm.com) (32.97.182.144)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Apr 2008 14:17:38 +0000
Received: from d01relay04.pok.ibm.com (d01relay04.pok.ibm.com [9.56.227.236])
	by e4.ny.us.ibm.com (8.13.8/8.13.8) with ESMTP id m3EEHwGq019668
	for <java-user@lucene.apache.org>; Mon, 14 Apr 2008 10:17:58 -0400
Received: from d01av05.pok.ibm.com (d01av05.pok.ibm.com [9.56.224.195])
	by d01relay04.pok.ibm.com (8.13.8/8.13.8/NCO v8.7) with ESMTP id m3EEHwJP368944
	for <java-user@lucene.apache.org>; Mon, 14 Apr 2008 10:17:58 -0400
Received: from d01av05.pok.ibm.com (loopback [127.0.0.1])
	by d01av05.pok.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id m3EEDW2o012097
	for <java-user@lucene.apache.org>; Mon, 14 Apr 2008 10:13:32 -0400
Received: from d25ml04.torolab.ibm.com (d25ml04.torolab.ibm.com [9.26.6.105])
	by d01av05.pok.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id m3EEDWvY012078
	for <java-user@lucene.apache.org>; Mon, 14 Apr 2008 10:13:32 -0400
In-Reply-To: <359a92830804101318l46a4a327j2552311db6126698@mail.gmail.com>
To: java-user@lucene.apache.org
MIME-Version: 1.0
Subject: Re: How to improve performance of large numbers of successive searches?
X-Mailer: Lotus Notes Release 7.0 HF242 April 21, 2006
From: Chris McGee <cbmcgee@ca.ibm.com>
X-MIMETrack: S/MIME Sign by Notes Client on Chris McGee/Ottawa/IBM(Release 7.0 HF242|April
 21, 2006) at 14/04/2008 10:15:59 AM,
	Serialize by Notes Client on Chris McGee/Ottawa/IBM(Release 7.0 HF242|April
 21, 2006) at 14/04/2008 10:15:59 AM,
	Serialize complete at 14/04/2008 10:15:59 AM,
	S/MIME Sign failed at 14/04/2008 10:15:59 AM: The cryptographic key was not
 found,
	Serialize by Router on D25ML04/25/M/IBM(Release 7.0.2HF446 | March 16, 2007) at
 04/14/2008 10:17:57,
	Serialize complete at 04/14/2008 10:17:57
Message-ID: <OFC7128742.35A91982-ON85257428.006A04E3-8525742B.004E5F10@ca.ibm.com>
Date: Mon, 14 Apr 2008 10:17:30 -0400
Content-Type: multipart/alternative; boundary="=_alternative 004E5E528525742B_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 004E5E528525742B_=
Content-Type: text/plain; charset="US-ASCII"

Hi Erick,

Thanks for the information. I tried using a HitCollector and a 
FieldSelector. I'm getting some dramatic improvements gathering large 
result sets using the FieldSelector. As it turned out I was able to assume 
in many cases that I could break out after a specific field in each 
document.

Assuming that I need to gather all result documents each time, what are 
the advantages of using a HitCollector over Hits?

Is there some way that I can load the index portion of the lucene data 
storage into RAM without loading everything into a RAMDirectory?

Thanks,
Chris McGee




"Erick Erickson" <erickerickson@gmail.com> 
10/04/2008 04:18 PM
Please respond to
java-user@lucene.apache.org


To
java-user@lucene.apache.org
cc

Subject
Re: How to improve performance of large numbers of successive searches?






>From this <<< iterate over all of the hits>>> I infer that you're
using a Hits object. This is a no-no when getting more than 100
or so objects. In a nutshell, the query gets re-executed every 100
fetches. So your 2,000 hits are executing the query 20 times.

The Hits object is optimized for returning the top few scoring
documents rather than get the entire result set.

See HitCollector/TopDocs/TopDocCollector etc. for better ways
of doing this.

Also, if you're calling IndexReader.document(i) for each document
you'll inevitably take a lot of time as you're loading all of each 
document.
Think about lazy field loading (see FieldSelector).

Best
Erick

P.S. If this is totally off base, perhaps you could post some of the
code you think is slow....

On Thu, Apr 10, 2008 at 2:34 PM, Chris McGee <cbmcgee@ca.ibm.com> wrote:

> Hello,
>
> I am building fairly large directories (200-500 MB of disk space) using
> lucene-java. Sometimes it can take upwards of 10-15 mins to create the
> documents and write them to disk using my current configuration. I have
> upgraded to the latest 2.3.1 version and followed many of the
> recommendations offered on the wiki:
>
> http://wiki.apache.org/lucene-java/ImproveIndexingSpeed
>
> These tips have significantly improved the time to build the directory 
and
> search it. However, I have noticed that when I perform term queries 
using
> a searcher many times in rapid succession and iterate over all of the 
hits
> it can take a significant time. To perform 1000 term query searches each
> with around 2000 hits it takes well over a minute. The time seems to 
vary
> linearly based on the number of searches (ie. 10 times more searches 
take
> 10 times longer). I tried combining the searches into a BooleanQuery but
> it only shaves off a small percentage (5-10%) of the total time.
>
> I was wondering if there is a faster way to retrieve all of the results
> for my large collections of terms without using more memory and without
> taking more time to build the directory? I already looked at bypassing 
the
> searcher and using the IndexReader.termDocs() method directly to 
retrieve
> the documents but there did not seem to be much performance improvement.
> In the majority of my cases I am simplying looking for a large number of
> values to the same field. Also, I'm not interested in scoring results
> based on frequency or weights I need to retrieve all of the results
> anyway.
>
> Any help with this would be great.
>
> Thanks,
> Chris McGee


--=_alternative 004E5E528525742B_=--

From java-user-return-33600-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 14 14:37:32 2008
Return-Path: <java-user-return-33600-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58463 invoked from network); 14 Apr 2008 14:37:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Apr 2008 14:37:32 -0000
Received: (qmail 4862 invoked by uid 500); 14 Apr 2008 14:37:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4828 invoked by uid 500); 14 Apr 2008 14:37:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4817 invoked by uid 99); 14 Apr 2008 14:37:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Apr 2008 07:37:26 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Apr 2008 14:36:43 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JlPnj-0000A9-NU
	for java-user@lucene.apache.org; Mon, 14 Apr 2008 07:36:55 -0700
Message-ID: <16678104.post@talk.nabble.com>
Date: Mon, 14 Apr 2008 07:36:55 -0700 (PDT)
From: palexv <palexv@gmail.com>
To: java-user@lucene.apache.org
Subject: Search for phrases
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: palexv@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi all.
I have an index with a set of phrases(one or several words).
I need to make search for these phrases.

I am confused as I can not find a good way to search for phrases. 
For example I need to search for "java de*" and recieve "java developers",
"java development", "developed by java" etc.

Can I do this using lucene? What Query/Analyzer should I use? Should I
tokenize field in index?

-- 
View this message in context: http://www.nabble.com/Search-for-phrases-tp16678104p16678104.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33601-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 14 14:44:57 2008
Return-Path: <java-user-return-33601-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61007 invoked from network); 14 Apr 2008 14:44:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Apr 2008 14:44:57 -0000
Received: (qmail 12656 invoked by uid 500); 14 Apr 2008 14:44:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12626 invoked by uid 500); 14 Apr 2008 14:44:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12615 invoked by uid 99); 14 Apr 2008 14:44:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Apr 2008 07:44:51 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.128.187 as permitted sender)
Received: from [209.85.128.187] (HELO fk-out-0910.google.com) (209.85.128.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Apr 2008 14:44:00 +0000
Received: by fk-out-0910.google.com with SMTP id 19so1702409fkr.5
        for <java-user@lucene.apache.org>; Mon, 14 Apr 2008 07:44:11 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=atljO/msq8HNLCYyvyyRs+Xbya+Tm/4Tc9gTv9MAXE0=;
        b=hL3qYGiJ8pkjSyRmGNeCo1Shjbh9idc7aNi4Eqa+hHNGuLEgaFJ/OrrqyTf7IfW5e/cTDApilSr+AacRkvohTeRQ+s11Pp3HKcdSZ6YlKfC8WxIep4rivuAdilJaq1lTVbFtmC7MOhrCmB0f0DanmCc+fjVIkPOBxKWgPG/44uo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ILqi7iIiN8R0mST6v1UqMGDIZD5AKFpAdiDZQEIbGSIBPIeZOTD363jM9nTebFOlyN5pZIU9uew5Ae9jUkozrmQkgoGs/5CufIFXDgvkFxbnJbiyCoqh5lMwxgRaMmy+X1BBfRfG/YcYK24mB9t8TPfArlRHbWHD7c57DR895bk=
Received: by 10.82.159.2 with SMTP id h2mr9374336bue.33.1208183815930;
        Mon, 14 Apr 2008 07:36:55 -0700 (PDT)
Received: by 10.82.191.6 with HTTP; Mon, 14 Apr 2008 07:36:55 -0700 (PDT)
Message-ID: <359a92830804140736j6d99f5d8i77241944c3a0f245@mail.gmail.com>
Date: Mon, 14 Apr 2008 10:36:55 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to improve performance of large numbers of successive searches?
In-Reply-To: <OFC7128742.35A91982-ON85257428.006A04E3-8525742B.004E5F10@ca.ibm.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_25195_1459489.1208183815917"
References: <359a92830804101318l46a4a327j2552311db6126698@mail.gmail.com>
	 <OFC7128742.35A91982-ON85257428.006A04E3-8525742B.004E5F10@ca.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_25195_1459489.1208183815917
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

As I stated in my original reply, a Hits object re-executes the
search every 100 or so objects you examine. So some loop like
Hits hits = search....
for (int idx = 0; idx < hits.length; ++idx ) {
    Document doc = hits.get(idx);
}

really does something like

for (int idx = 0; idx < hits.length; ++idx ) {
    if (idx > 99 && (idx % 100) == 0) {
        re-execute the search and throw away entries 0-idx);
    }
    Document doc = hits.get(idx);
}

So the farther you get into the process, the more you throw away.

About collecting all the documents.... I wouldn't bother putting your
index in RAM until you've fully explored the alternatives. The first
of which is to determine what you really mean by "gather all result
documents"
If you have to return the entire contents of each document, you may have
to rethink your problem. If you're returning some subset of the data (say
some summary information), then you may get significant improvements
by indexing (perhaps UN_TOKENIZED) the data you need. That way, using
FieldSelector will grab things from the index rather than the stored data.
And, assuming your returned data is a small portion of your total document,
that should fix you up.

But a higher-level statement of the problem you're trying to resolve would
sure be helpful in terms of making reasonable suggestions. You haven't
characterized the problem you're trying to solve at all. As in *why* you
need
to return all the documents, the characteristics of the docs you're trying
to fetch. How big your data set is (as in # of docs). etc. etc. Unless and
until you
provide some of those details, all the advice in the world is just a shot
in the dark.

Shy do you think that " To perform 1000 term query searches each
with around 2000 hits" taking "well over a minute" is unacceptable?
After all, that's 2,000,000 documents you're analyzing. A minute
seems reasonable. What problem are you *really* trying to solve? or
is this just a load test?

Best
Erick


On Mon, Apr 14, 2008 at 10:17 AM, Chris McGee <cbmcgee@ca.ibm.com> wrote:

> Hi Erick,
>
> Thanks for the information. I tried using a HitCollector and a
> FieldSelector. I'm getting some dramatic improvements gathering large
> result sets using the FieldSelector. As it turned out I was able to assume
> in many cases that I could break out after a specific field in each
> document.
>
> Assuming that I need to gather all result documents each time, what are
> the advantages of using a HitCollector over Hits?
>
> Is there some way that I can load the index portion of the lucene data
> storage into RAM without loading everything into a RAMDirectory?
>
> Thanks,
> Chris McGee
>
>
>
>
> "Erick Erickson" <erickerickson@gmail.com>
> 10/04/2008 04:18 PM
> Please respond to
> java-user@lucene.apache.org
>
>
> To
> java-user@lucene.apache.org
> cc
>
> Subject
> Re: How to improve performance of large numbers of successive searches?
>
>
>
>
>
>
> From this <<< iterate over all of the hits>>> I infer that you're
> using a Hits object. This is a no-no when getting more than 100
> or so objects. In a nutshell, the query gets re-executed every 100
> fetches. So your 2,000 hits are executing the query 20 times.
>
> The Hits object is optimized for returning the top few scoring
> documents rather than get the entire result set.
>
> See HitCollector/TopDocs/TopDocCollector etc. for better ways
> of doing this.
>
> Also, if you're calling IndexReader.document(i) for each document
> you'll inevitably take a lot of time as you're loading all of each
> document.
> Think about lazy field loading (see FieldSelector).
>
> Best
> Erick
>
> P.S. If this is totally off base, perhaps you could post some of the
> code you think is slow....
>
> On Thu, Apr 10, 2008 at 2:34 PM, Chris McGee <cbmcgee@ca.ibm.com> wrote:
>
> > Hello,
> >
> > I am building fairly large directories (200-500 MB of disk space) using
> > lucene-java. Sometimes it can take upwards of 10-15 mins to create the
> > documents and write them to disk using my current configuration. I have
> > upgraded to the latest 2.3.1 version and followed many of the
> > recommendations offered on the wiki:
> >
> > http://wiki.apache.org/lucene-java/ImproveIndexingSpeed
> >
> > These tips have significantly improved the time to build the directory
> and
> > search it. However, I have noticed that when I perform term queries
> using
> > a searcher many times in rapid succession and iterate over all of the
> hits
> > it can take a significant time. To perform 1000 term query searches each
> > with around 2000 hits it takes well over a minute. The time seems to
> vary
> > linearly based on the number of searches (ie. 10 times more searches
> take
> > 10 times longer). I tried combining the searches into a BooleanQuery but
> > it only shaves off a small percentage (5-10%) of the total time.
> >
> > I was wondering if there is a faster way to retrieve all of the results
> > for my large collections of terms without using more memory and without
> > taking more time to build the directory? I already looked at bypassing
> the
> > searcher and using the IndexReader.termDocs() method directly to
> retrieve
> > the documents but there did not seem to be much performance improvement.
> > In the majority of my cases I am simplying looking for a large number of
> > values to the same field. Also, I'm not interested in scoring results
> > based on frequency or weights I need to retrieve all of the results
> > anyway.
> >
> > Any help with this would be great.
> >
> > Thanks,
> > Chris McGee
>
>

------=_Part_25195_1459489.1208183815917--

From java-user-return-33602-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 14 17:47:59 2008
Return-Path: <java-user-return-33602-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89258 invoked from network); 14 Apr 2008 17:47:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Apr 2008 17:47:59 -0000
Received: (qmail 90290 invoked by uid 500); 14 Apr 2008 17:47:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90103 invoked by uid 500); 14 Apr 2008 17:47:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90092 invoked by uid 99); 14 Apr 2008 17:47:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Apr 2008 10:47:51 -0700
X-ASF-Spam-Status: No, hits=-2.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cbmcgee@ca.ibm.com designates 32.97.182.146 as permitted sender)
Received: from [32.97.182.146] (HELO e6.ny.us.ibm.com) (32.97.182.146)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Apr 2008 17:47:07 +0000
Received: from d01relay02.pok.ibm.com (d01relay02.pok.ibm.com [9.56.227.234])
	by e6.ny.us.ibm.com (8.13.8/8.13.8) with ESMTP id m3EHnOR6000537
	for <java-user@lucene.apache.org>; Mon, 14 Apr 2008 13:49:24 -0400
Received: from d01av05.pok.ibm.com (d01av05.pok.ibm.com [9.56.224.195])
	by d01relay02.pok.ibm.com (8.13.8/8.13.8/NCO v8.7) with ESMTP id m3EHlJjM251016
	for <java-user@lucene.apache.org>; Mon, 14 Apr 2008 13:47:19 -0400
Received: from d01av05.pok.ibm.com (loopback [127.0.0.1])
	by d01av05.pok.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id m3EHgrai014684
	for <java-user@lucene.apache.org>; Mon, 14 Apr 2008 13:42:53 -0400
Received: from d25ml04.torolab.ibm.com (d25ml04.torolab.ibm.com [9.26.6.105])
	by d01av05.pok.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id m3EHgrrP014679
	for <java-user@lucene.apache.org>; Mon, 14 Apr 2008 13:42:53 -0400
In-Reply-To: <359a92830804140736j6d99f5d8i77241944c3a0f245@mail.gmail.com>
To: java-user@lucene.apache.org
MIME-Version: 1.0
Subject: Re: How to improve performance of large numbers of successive searches?
X-Mailer: Lotus Notes Release 7.0 HF242 April 21, 2006
From: Chris McGee <cbmcgee@ca.ibm.com>
X-MIMETrack: S/MIME Sign by Notes Client on Chris McGee/Ottawa/IBM(Release 7.0 HF242|April
 21, 2006) at 14/04/2008 01:45:20 PM,
	Serialize by Notes Client on Chris McGee/Ottawa/IBM(Release 7.0 HF242|April
 21, 2006) at 14/04/2008 01:45:21 PM,
	Serialize complete at 14/04/2008 01:45:21 PM,
	S/MIME Sign failed at 14/04/2008 01:45:21 PM: The cryptographic key was not
 found,
	Serialize by Router on D25ML04/25/M/IBM(Release 7.0.2HF446 | March 16, 2007) at
 04/14/2008 13:47:19,
	Serialize complete at 04/14/2008 13:47:19
Message-ID: <OFE9BE1C25.313F8C0C-ON8525742B.005F2EC6-8525742B.006189F9@ca.ibm.com>
Date: Mon, 14 Apr 2008 13:46:52 -0400
Content-Type: multipart/alternative; boundary="=_alternative 006189108525742B_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 006189108525742B_=
Content-Type: text/plain; charset="US-ASCII"

Hi Erick,

Here is a quick overview of what I hope to accomplish with lucene. I am 
using a lucene database to store condensed information about a collection 
of data that I have. The data has to be constantly updated for correctness 
so that when one part changes certain other parts can be changed. Also, 
various queries will be performed on this data but in all cases the total 
result set must be retrieved and not just a select few hits. The results 
are used to manage the overall correctness of my data store and not to 
present to the user in some filtered way (by rank and only the top 100 
hits for example). Also, there could be cases where there will be a large 
set of terms to search for. To load all of this data into RAM is not 
feasible in most cases because there is too much data even if it was 
compressed.

So, I hope to be able to minimize the time to update the lucene database 
from my data store. I have already upgraded to Lucene 2.3.1 and performed 
a number of the suggestions on the lucene wiki with some success. As well, 
I want to help speed up the time it takes to query for a large number of 
terms (in most cases the terms have the same field name but different 
values).

In all cases I want to retrieve all matching documents at once. Because 
all matching documents must be retrieved I have no need for scoring, 
weights, boosts or any ranking of the results. Is there a way to strip 
away any of these pieces for better querying and directory building 
performance?

Thanks for your help,
Chris




"Erick Erickson" <erickerickson@gmail.com> 
14/04/2008 10:36 AM
Please respond to
java-user@lucene.apache.org


To
java-user@lucene.apache.org
cc

Subject
Re: How to improve performance of large numbers of successive searches?






As I stated in my original reply, a Hits object re-executes the
search every 100 or so objects you examine. So some loop like
Hits hits = search....
for (int idx = 0; idx < hits.length; ++idx ) {
    Document doc = hits.get(idx);
}

really does something like

for (int idx = 0; idx < hits.length; ++idx ) {
    if (idx > 99 && (idx % 100) == 0) {
        re-execute the search and throw away entries 0-idx);
    }
    Document doc = hits.get(idx);
}

So the farther you get into the process, the more you throw away.

About collecting all the documents.... I wouldn't bother putting your
index in RAM until you've fully explored the alternatives. The first
of which is to determine what you really mean by "gather all result
documents"
If you have to return the entire contents of each document, you may have
to rethink your problem. If you're returning some subset of the data (say
some summary information), then you may get significant improvements
by indexing (perhaps UN_TOKENIZED) the data you need. That way, using
FieldSelector will grab things from the index rather than the stored data.
And, assuming your returned data is a small portion of your total 
document,
that should fix you up.

But a higher-level statement of the problem you're trying to resolve would
sure be helpful in terms of making reasonable suggestions. You haven't
characterized the problem you're trying to solve at all. As in *why* you
need
to return all the documents, the characteristics of the docs you're trying
to fetch. How big your data set is (as in # of docs). etc. etc. Unless and
until you
provide some of those details, all the advice in the world is just a shot
in the dark.

Shy do you think that " To perform 1000 term query searches each
with around 2000 hits" taking "well over a minute" is unacceptable?
After all, that's 2,000,000 documents you're analyzing. A minute
seems reasonable. What problem are you *really* trying to solve? or
is this just a load test?

Best
Erick


On Mon, Apr 14, 2008 at 10:17 AM, Chris McGee <cbmcgee@ca.ibm.com> wrote:

> Hi Erick,
>
> Thanks for the information. I tried using a HitCollector and a
> FieldSelector. I'm getting some dramatic improvements gathering large
> result sets using the FieldSelector. As it turned out I was able to 
assume
> in many cases that I could break out after a specific field in each
> document.
>
> Assuming that I need to gather all result documents each time, what are
> the advantages of using a HitCollector over Hits?
>
> Is there some way that I can load the index portion of the lucene data
> storage into RAM without loading everything into a RAMDirectory?
>
> Thanks,
> Chris McGee
>
>
>
>
> "Erick Erickson" <erickerickson@gmail.com>
> 10/04/2008 04:18 PM
> Please respond to
> java-user@lucene.apache.org
>
>
> To
> java-user@lucene.apache.org
> cc
>
> Subject
> Re: How to improve performance of large numbers of successive searches?
>
>
>
>
>
>
> From this <<< iterate over all of the hits>>> I infer that you're
> using a Hits object. This is a no-no when getting more than 100
> or so objects. In a nutshell, the query gets re-executed every 100
> fetches. So your 2,000 hits are executing the query 20 times.
>
> The Hits object is optimized for returning the top few scoring
> documents rather than get the entire result set.
>
> See HitCollector/TopDocs/TopDocCollector etc. for better ways
> of doing this.
>
> Also, if you're calling IndexReader.document(i) for each document
> you'll inevitably take a lot of time as you're loading all of each
> document.
> Think about lazy field loading (see FieldSelector).
>
> Best
> Erick
>
> P.S. If this is totally off base, perhaps you could post some of the
> code you think is slow....
>
> On Thu, Apr 10, 2008 at 2:34 PM, Chris McGee <cbmcgee@ca.ibm.com> wrote:
>
> > Hello,
> >
> > I am building fairly large directories (200-500 MB of disk space) 
using
> > lucene-java. Sometimes it can take upwards of 10-15 mins to create the
> > documents and write them to disk using my current configuration. I 
have
> > upgraded to the latest 2.3.1 version and followed many of the
> > recommendations offered on the wiki:
> >
> > http://wiki.apache.org/lucene-java/ImproveIndexingSpeed
> >
> > These tips have significantly improved the time to build the directory
> and
> > search it. However, I have noticed that when I perform term queries
> using
> > a searcher many times in rapid succession and iterate over all of the
> hits
> > it can take a significant time. To perform 1000 term query searches 
each
> > with around 2000 hits it takes well over a minute. The time seems to
> vary
> > linearly based on the number of searches (ie. 10 times more searches
> take
> > 10 times longer). I tried combining the searches into a BooleanQuery 
but
> > it only shaves off a small percentage (5-10%) of the total time.
> >
> > I was wondering if there is a faster way to retrieve all of the 
results
> > for my large collections of terms without using more memory and 
without
> > taking more time to build the directory? I already looked at bypassing
> the
> > searcher and using the IndexReader.termDocs() method directly to
> retrieve
> > the documents but there did not seem to be much performance 
improvement.
> > In the majority of my cases I am simplying looking for a large number 
of
> > values to the same field. Also, I'm not interested in scoring results
> > based on frequency or weights I need to retrieve all of the results
> > anyway.
> >
> > Any help with this would be great.
> >
> > Thanks,
> > Chris McGee
>
>


--=_alternative 006189108525742B_=--

From java-user-return-33603-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 14 18:06:21 2008
Return-Path: <java-user-return-33603-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98685 invoked from network); 14 Apr 2008 18:06:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Apr 2008 18:06:21 -0000
Received: (qmail 32032 invoked by uid 500); 14 Apr 2008 18:06:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32009 invoked by uid 500); 14 Apr 2008 18:06:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31998 invoked by uid 99); 14 Apr 2008 18:06:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Apr 2008 11:06:13 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.49.253] (HELO web52006.mail.re2.yahoo.com) (206.190.49.253)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 14 Apr 2008 18:05:30 +0000
Received: (qmail 38116 invoked by uid 60001); 14 Apr 2008 18:05:42 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=YU55HFNYW59QKv8kvNT9YBMlmnnzvXH+LrjdF9enh56MhsE5jCagBdAsOb+aO0F50lJT2JVbb5osuEwjhN3E+pR/WtlkwZ0CP5LPiZ8AjcPwQDPHbYHzsJ42dWRzKCsX18WHLWn6HfxsmxPcBOzf2SclurEUBn/sOhRAo2z/FmA=;
X-YMail-OSG: 2uwbzH0VM1kShhgClxZfcLJvCC2VLEsuwoe5tgGTd1wcRbILwoEhNImq3ayRkTA8kw--
Received: from [12.162.3.126] by web52006.mail.re2.yahoo.com via HTTP; Mon, 14 Apr 2008 11:05:42 PDT
Date: Mon, 14 Apr 2008 11:05:42 -0700 (PDT)
From: Rajesh parab <rajesh_parab_1@yahoo.com>
Subject: Re: Lucene index on relational data
To: java-user@lucene.apache.org
In-Reply-To: <299865.15043.qm@web52009.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
Message-ID: <146910.32795.qm@web52006.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Everyone,

Any help around this topic will be very useful. Is
anyone partitioning the data into 2 or more indexes
and using parallelReader to search these indexes? If
yes, how do you handle updates to the indexes and make
sure the doc ids for all indexes are in same order?

Regards,
Rajesh

--- Rajesh parab <rajesh_parab_1@yahoo.com> wrote:

> Hi Mathieu,
> 
> I can definitely store the foreign key inside the
> dynamic index. However if I understand correctly,
> for
> ParallelReader to work properly, doc ids for all
> documents in both primary and secondary (dynamic)
> index should be in same order.
> 
> How can we achieve it if there are frequest changes
> to
> the dynamic index? The doc ids will keep on changing
> as we delete and re-insert records in dynamic index.
> As Karl pointed out, there is a hack available in
> JIRA
> that can take care of this doc id update issue, but
> it
> is not an official patch and not tested for
> performance.
> 
> How are people updating their indexes when used in
> conjuction with ParallelReader. I think
> ParallelReader
> will work well for data partitioned between 2
> indexes
> (static and dynamic). However, I am not finding any
> better approach to just update the dynamic index.
> 
> Regards,
> Rajesh
> 
> __________________________________________________
> Do You Yahoo!?
> Tired of spam?  Yahoo! Mail has the best spam
> protection around 
> http://mail.yahoo.com 
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 



      ____________________________________________________________________________________
Be a better friend, newshound, and 
know-it-all with Yahoo! Mobile.  Try it now.  http://mobile.yahoo.com/;_ylt=Ahu06i62sR8HDtDypao8Wcj9tAcJ

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33604-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 14 18:59:18 2008
Return-Path: <java-user-return-33604-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30137 invoked from network); 14 Apr 2008 18:59:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Apr 2008 18:59:18 -0000
Received: (qmail 29618 invoked by uid 500); 14 Apr 2008 18:59:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29220 invoked by uid 500); 14 Apr 2008 18:59:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29209 invoked by uid 99); 14 Apr 2008 18:59:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Apr 2008 11:59:10 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [63.65.184.134] (HELO birexchange.BIRPLAZA.local) (63.65.184.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Apr 2008 18:58:28 +0000
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: WildCardQuery and TooManyClauses
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Date: Mon, 14 Apr 2008 14:58:34 -0400
Message-ID: <CC2671C08F06704ABFD37ED1EA09AA564A2A6F@birexchange.BIRPLAZA.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: WildCardQuery and TooManyClauses
Thread-Index: AcibIgd8MIjEMZroTX6gnhhTcHHlnQDPhMuA
From: "Beard, Brian" <Brian.Beard@mybir.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

You can use your approach w/ or w/o the filter.
>                td =3D indexSearcher.search(query, filter, maxnumhits);

You need to use a filter for the wildcards which is built in to the
query.

1) Extend QueryParser to override the getWildcardQuery method.
(Or even if you don't use QueryParser, just use the query api and
combine the ConstantScoreQuery in #2 with your own query).
2) Inside of getWildcardQuery you need to return a =20
   ConstantScoreQuery(new WildcardFilter(new Term(field, termStr)))
3) The first execution will take longer to initialize, but subsequent
searches are fairly fast.
4) Someone posted a WildcardFilter a while back which is below.
5) Now you can plug in to topDocs.

public class WildcardFilter extends Filter {

...

    public BitSet bits(IndexReader reader) throws IOException {
        BitSet bits =3D new BitSet(reader.maxDoc());
        WildcardTermEnum enumerator =3D new WildcardTermEnum(reader,
term);
        TermDocs termDocs =3D reader.termDocs();

        try {
            do {
                Term term =3D enumerator.term();

                if (term !=3D null) {
                    termDocs.seek(term);

                    while (termDocs.next()) {
                        bits.set(termDocs.doc());
                    }
                } else {
                    break;
                }
            } while (enumerator.next());
        } finally {
            termDocs.close();
            enumerator.close();
        }

        return bits;
    }
-----Original Message-----
From: Joe K [mailto:chose77@gmail.com]=20
Sent: Thursday, April 10, 2008 11:46 AM
To: java-user@lucene.apache.org
Subject: Re: WildCardQuery and TooManyClauses

Donna,
so this doesn't work because search calls internaly
MultiTermQuery.rewrite
which causes TooManyClauses exception anyway even if the maxnumhits
is set to 200 !!

So I am lost again...

Chose


On Thu, Apr 10, 2008 at 3:02 PM, Donna L Gresh <gresh@us.ibm.com> wrote:

> Doesn't the following do what you want with maxnumhits =3D200?
>                TopDocs td;
>                td =3D indexSearcher.search(query, filter, maxnumhits);
> where filter can be null
>
>
>
> Donna L. Gresh
> Services Research, Mathematical Sciences Department
> IBM T.J. Watson Research Center
> (914) 945-2472
> http://www.research.ibm.com/people/g/donnagresh
> gresh@us.ibm.com
>
>
> "Joe K" <chose77@gmail.com> wrote on 04/10/2008 08:53:06 AM:
>
> > Hello everybody,
> > I know there was written a tons of words about this issue, but I'm
just
> not
> > clear enough about it.
> >
> > I have these facts:
> >
> > 1. my query is always 1 letter and *, eg. M*
> > 2. i always want to get max 200 results, no more!
> > 3. i don't want to fix this issue by setting maxClauseCount
> >
> > I just don't see the easy way how to get my results, did i missed
> something?
> >
> > From what I've read here I know that probably i should play with
filters
> or
> > with WildCardEnum, but why?
> > I just want to get simple this:
> > SELECT FROM XXX WHERE XXX.name LIKE 'M%' LIMIT 200;
> >
> > (there is no filtering in this query except the wildcard itself)
> >
> > Please, what is the easiest solution to achieve this?
> >
> > Thanks in advance,
> > Chose
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33605-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 14 19:13:29 2008
Return-Path: <java-user-return-33605-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39228 invoked from network); 14 Apr 2008 19:13:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Apr 2008 19:13:29 -0000
Received: (qmail 54120 invoked by uid 500); 14 Apr 2008 19:13:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54078 invoked by uid 500); 14 Apr 2008 19:13:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54067 invoked by uid 99); 14 Apr 2008 19:13:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Apr 2008 12:13:22 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lucenelist2007@danielnaber.de designates 80.67.18.13 as permitted sender)
Received: from [80.67.18.13] (HELO smtprelay01.ispgateway.de) (80.67.18.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Apr 2008 19:12:29 +0000
Received: from [91.37.249.134] (helo=p5b25f986.dip.t-dialin.net)
	by smtprelay01.ispgateway.de with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.68)
	(envelope-from <lucenelist2007@danielnaber.de>)
	id 1JlU6k-0002wJ-7w
	for java-user@lucene.apache.org; Mon, 14 Apr 2008 21:12:50 +0200
From: Daniel Naber <lucenelist2007@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Search for phrases
Date: Mon, 14 Apr 2008 21:13:50 +0200
User-Agent: KMail/1.9.6 (enterprise 20070904.708012)
References: <16678104.post@talk.nabble.com>
In-Reply-To: <16678104.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200804142113.50331@danielnaber.de>
X-Df-Sender: 695637
X-Virus-Checked: Checked by ClamAV on apache.org

On Montag, 14. April 2008, palexv wrote:

> For example I need to search for "java de*" and recieve "java
> developers", "java development", "developed by java" etc.

If your text is tokenized, this is not supported by QueryParser but you can 
create such queries using MultiPhraseQuery. If you don't tokenize a text 
like "java development" at whitespace characters, it's just like a single 
term for Lucene. A query like "java de*" should work then, just make sure 
you don't tokenize the search query either.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33606-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 14 20:25:51 2008
Return-Path: <java-user-return-33606-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93788 invoked from network); 14 Apr 2008 20:25:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Apr 2008 20:25:51 -0000
Received: (qmail 96101 invoked by uid 500); 14 Apr 2008 20:25:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96068 invoked by uid 500); 14 Apr 2008 20:25:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96057 invoked by uid 99); 14 Apr 2008 20:25:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Apr 2008 13:25:43 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.185 as permitted sender)
Received: from [209.85.128.185] (HELO fk-out-0910.google.com) (209.85.128.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Apr 2008 20:25:01 +0000
Received: by fk-out-0910.google.com with SMTP id 19so1847966fkr.5
        for <java-user@lucene.apache.org>; Mon, 14 Apr 2008 13:25:12 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=qAgsinC9qFXW38ZyUBUF+wXJjHF4fQ30ZyyuKJ3x1i8=;
        b=r7KZ5Rv0GuQxVDAaSXN+y7kkjNSgo1BeBPxJCbpF7E7lDj0G9NaJM4JI0L8cylmIxRkt1wOweoo4USMTdHqFi97jtG3YQR+7uIZshXqOf9/wgH6HGNOHrGvA0hpsj+9A4JymO7RgQm5A2BB8mKajOrHuN9gZgs+/xhhFNAhcBtg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ENWtI8eCKNRwgXrV8Kw8L4XlTO4DF51ye+nIZ16sGfENQp7MSSgULtsc8NkqQqG5UsUiqEj9Ao7/sovFeOcksZ2WxzdxtWSetItXcbbpQcPrN6OoWmpJHalpvdYPk1RwN7evP7HR9BiAlURCRN8a/RFNczpu8QA+rE50+zvKb78=
Received: by 10.82.181.8 with SMTP id d8mr10005554buf.17.1208204712042;
        Mon, 14 Apr 2008 13:25:12 -0700 (PDT)
Received: by 10.82.191.6 with HTTP; Mon, 14 Apr 2008 13:25:11 -0700 (PDT)
Message-ID: <359a92830804141325gf00bcfen3c2f4566b1697b9d@mail.gmail.com>
Date: Mon, 14 Apr 2008 16:25:11 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to improve performance of large numbers of successive searches?
In-Reply-To: <OFE9BE1C25.313F8C0C-ON8525742B.005F2EC6-8525742B.006189F9@ca.ibm.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_26634_15712255.1208204712039"
References: <359a92830804140736j6d99f5d8i77241944c3a0f245@mail.gmail.com>
	 <OFE9BE1C25.313F8C0C-ON8525742B.005F2EC6-8525742B.006189F9@ca.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_26634_15712255.1208204712039
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

OK, if you're going after simple terms without any logic (or with
very simple logic), why search at all? Why not just use TermDocs and/or
TermEnum to flip through the index noticing documents that match?

I'd only recommend this if you are NOT trying to parse complex
queries. That is, say, you are searching ONLY on individual
terms or all simple terms are joined by AND (or OR).

You can use Filters to store intermediate results (they're really
bitsets). That way, you bypass all the search logic.

But a simpler way might be ConstantScoreQuery.

But first I'd just try a HitCollector, possibly with a
ConstantScoreQuery and then.

But, again, what leads you to believe that performance is
not adequate yet? What is your target?

Best
Erick

On Mon, Apr 14, 2008 at 1:46 PM, Chris McGee <cbmcgee@ca.ibm.com> wrote:

> Hi Erick,
>
> Here is a quick overview of what I hope to accomplish with lucene. I am
> using a lucene database to store condensed information about a collection
> of data that I have. The data has to be constantly updated for correctness
> so that when one part changes certain other parts can be changed. Also,
> various queries will be performed on this data but in all cases the total
> result set must be retrieved and not just a select few hits. The results
> are used to manage the overall correctness of my data store and not to
> present to the user in some filtered way (by rank and only the top 100
> hits for example). Also, there could be cases where there will be a large
> set of terms to search for. To load all of this data into RAM is not
> feasible in most cases because there is too much data even if it was
> compressed.
>
> So, I hope to be able to minimize the time to update the lucene database
> from my data store. I have already upgraded to Lucene 2.3.1 and performed
> a number of the suggestions on the lucene wiki with some success. As well,
> I want to help speed up the time it takes to query for a large number of
> terms (in most cases the terms have the same field name but different
> values).
>
> In all cases I want to retrieve all matching documents at once. Because
> all matching documents must be retrieved I have no need for scoring,
> weights, boosts or any ranking of the results. Is there a way to strip
> away any of these pieces for better querying and directory building
> performance?
>
> Thanks for your help,
> Chris
>
>
>
>
> "Erick Erickson" <erickerickson@gmail.com>
> 14/04/2008 10:36 AM
> Please respond to
> java-user@lucene.apache.org
>
>
> To
> java-user@lucene.apache.org
> cc
>
> Subject
> Re: How to improve performance of large numbers of successive searches?
>
>
>
>
>
>
> As I stated in my original reply, a Hits object re-executes the
> search every 100 or so objects you examine. So some loop like
> Hits hits = search....
> for (int idx = 0; idx < hits.length; ++idx ) {
>    Document doc = hits.get(idx);
> }
>
> really does something like
>
> for (int idx = 0; idx < hits.length; ++idx ) {
>    if (idx > 99 && (idx % 100) == 0) {
>        re-execute the search and throw away entries 0-idx);
>    }
>    Document doc = hits.get(idx);
> }
>
> So the farther you get into the process, the more you throw away.
>
> About collecting all the documents.... I wouldn't bother putting your
> index in RAM until you've fully explored the alternatives. The first
> of which is to determine what you really mean by "gather all result
> documents"
> If you have to return the entire contents of each document, you may have
> to rethink your problem. If you're returning some subset of the data (say
> some summary information), then you may get significant improvements
> by indexing (perhaps UN_TOKENIZED) the data you need. That way, using
> FieldSelector will grab things from the index rather than the stored data.
> And, assuming your returned data is a small portion of your total
> document,
> that should fix you up.
>
> But a higher-level statement of the problem you're trying to resolve would
> sure be helpful in terms of making reasonable suggestions. You haven't
> characterized the problem you're trying to solve at all. As in *why* you
> need
> to return all the documents, the characteristics of the docs you're trying
> to fetch. How big your data set is (as in # of docs). etc. etc. Unless and
> until you
> provide some of those details, all the advice in the world is just a shot
> in the dark.
>
> Shy do you think that " To perform 1000 term query searches each
> with around 2000 hits" taking "well over a minute" is unacceptable?
> After all, that's 2,000,000 documents you're analyzing. A minute
> seems reasonable. What problem are you *really* trying to solve? or
> is this just a load test?
>
> Best
> Erick
>
>
> On Mon, Apr 14, 2008 at 10:17 AM, Chris McGee <cbmcgee@ca.ibm.com> wrote:
>
> > Hi Erick,
> >
> > Thanks for the information. I tried using a HitCollector and a
> > FieldSelector. I'm getting some dramatic improvements gathering large
> > result sets using the FieldSelector. As it turned out I was able to
> assume
> > in many cases that I could break out after a specific field in each
> > document.
> >
> > Assuming that I need to gather all result documents each time, what are
> > the advantages of using a HitCollector over Hits?
> >
> > Is there some way that I can load the index portion of the lucene data
> > storage into RAM without loading everything into a RAMDirectory?
> >
> > Thanks,
> > Chris McGee
> >
> >
> >
> >
> > "Erick Erickson" <erickerickson@gmail.com>
> > 10/04/2008 04:18 PM
> > Please respond to
> > java-user@lucene.apache.org
> >
> >
> > To
> > java-user@lucene.apache.org
> > cc
> >
> > Subject
> > Re: How to improve performance of large numbers of successive searches?
> >
> >
> >
> >
> >
> >
> > From this <<< iterate over all of the hits>>> I infer that you're
> > using a Hits object. This is a no-no when getting more than 100
> > or so objects. In a nutshell, the query gets re-executed every 100
> > fetches. So your 2,000 hits are executing the query 20 times.
> >
> > The Hits object is optimized for returning the top few scoring
> > documents rather than get the entire result set.
> >
> > See HitCollector/TopDocs/TopDocCollector etc. for better ways
> > of doing this.
> >
> > Also, if you're calling IndexReader.document(i) for each document
> > you'll inevitably take a lot of time as you're loading all of each
> > document.
> > Think about lazy field loading (see FieldSelector).
> >
> > Best
> > Erick
> >
> > P.S. If this is totally off base, perhaps you could post some of the
> > code you think is slow....
> >
> > On Thu, Apr 10, 2008 at 2:34 PM, Chris McGee <cbmcgee@ca.ibm.com> wrote:
> >
> > > Hello,
> > >
> > > I am building fairly large directories (200-500 MB of disk space)
> using
> > > lucene-java. Sometimes it can take upwards of 10-15 mins to create the
> > > documents and write them to disk using my current configuration. I
> have
> > > upgraded to the latest 2.3.1 version and followed many of the
> > > recommendations offered on the wiki:
> > >
> > > http://wiki.apache.org/lucene-java/ImproveIndexingSpeed
> > >
> > > These tips have significantly improved the time to build the directory
> > and
> > > search it. However, I have noticed that when I perform term queries
> > using
> > > a searcher many times in rapid succession and iterate over all of the
> > hits
> > > it can take a significant time. To perform 1000 term query searches
> each
> > > with around 2000 hits it takes well over a minute. The time seems to
> > vary
> > > linearly based on the number of searches (ie. 10 times more searches
> > take
> > > 10 times longer). I tried combining the searches into a BooleanQuery
> but
> > > it only shaves off a small percentage (5-10%) of the total time.
> > >
> > > I was wondering if there is a faster way to retrieve all of the
> results
> > > for my large collections of terms without using more memory and
> without
> > > taking more time to build the directory? I already looked at bypassing
> > the
> > > searcher and using the IndexReader.termDocs() method directly to
> > retrieve
> > > the documents but there did not seem to be much performance
> improvement.
> > > In the majority of my cases I am simplying looking for a large number
> of
> > > values to the same field. Also, I'm not interested in scoring results
> > > based on frequency or weights I need to retrieve all of the results
> > > anyway.
> > >
> > > Any help with this would be great.
> > >
> > > Thanks,
> > > Chris McGee
> >
> >
>
>

------=_Part_26634_15712255.1208204712039--

From java-user-return-33607-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 14 22:12:53 2008
Return-Path: <java-user-return-33607-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37362 invoked from network); 14 Apr 2008 22:12:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Apr 2008 22:12:52 -0000
Received: (qmail 61456 invoked by uid 500); 14 Apr 2008 22:12:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61427 invoked by uid 500); 14 Apr 2008 22:12:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61416 invoked by uid 99); 14 Apr 2008 22:12:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Apr 2008 15:12:46 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Apr 2008 22:12:04 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 8E54571C38A; Mon, 14 Apr 2008 15:12:16 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id A8A7371C382
	for <java-user@lucene.apache.org>; Mon, 14 Apr 2008 15:12:16 -0700 (PDT)
Date: Mon, 14 Apr 2008 15:12:16 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Document ids in Lucene index
In-Reply-To: <329a6c830804130438v7bb9df07mc212fdd17d693f6b@mail.gmail.com>
Message-ID: <Pine.LNX.4.62.0804141502360.31375@radix.cryptio.net>
References: <329a6c830804090948p75e5a954ka17b4debdd9d148f@mail.gmail.com> 
 <Pine.LNX.4.62.0804111710180.26462@radix.cryptio.net>
 <329a6c830804130438v7bb9df07mc212fdd17d693f6b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: - check maxDoc()
: - iterate from 0 to maxDoc() and process doc if it is not deleted

For the record: that is exactly what MatchAllDocsQuery does ... except 
that you have an off by one error (maxDoc returns 1 more then the 
largest possible document number).

Even if you don't want the Query API, just use MatchAllDocs to handle the 
details for you and save yourself some code...

  Scorer allDocs = (new MatchAllDocs()).weight(searcher).scorer(reader);
  while (allDocs.next()) {
    int doc = allDocs.doc()
       ...do stuff..
  }



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33608-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 14 22:28:34 2008
Return-Path: <java-user-return-33608-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40823 invoked from network); 14 Apr 2008 22:28:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Apr 2008 22:28:34 -0000
Received: (qmail 76992 invoked by uid 500); 14 Apr 2008 22:28:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76949 invoked by uid 500); 14 Apr 2008 22:28:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76919 invoked by uid 99); 14 Apr 2008 22:28:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Apr 2008 15:28:26 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Apr 2008 22:27:44 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id A054D71C225; Mon, 14 Apr 2008 15:27:57 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 9747471C14C
	for <java-user@lucene.apache.org>; Mon, 14 Apr 2008 15:27:57 -0700 (PDT)
Date: Mon, 14 Apr 2008 15:27:57 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Sorting consumes hundreds of MBytes RAM
In-Reply-To: <200804131645.37576.lucene@nitwit.de>
Message-ID: <Pine.LNX.4.62.0804141517220.31375@radix.cryptio.net>
References: <200804131645.37576.lucene@nitwit.de>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: How does this work internally? It seems as if all data for this field found in 
: the entire index is read into memory (?).

You can think of it as an "inverted-inverted index"  Lucene needs a data 
structure it can usefor fast lookups where the key is the docId and the 
value is something "comparable" for sorting the documents.

: And question #2: what am I going to do against it? Index  sharding?

The only suggestion i can offer is to take a look at LUCENE-769 ... it 
takes a completley differnet appraoch of using a FieldSelector to access 
the *stored* field and sort on it ... the memory usage of FieldCache is 
eliminatedand the expense of longer search times ... in cases where you 
expect queries to match on a very small subset of the total index, it 
could be worth using.

If people try out the patch and like it and report back success with it, 
it's more likely to get commited at some point.  (allthough at this point, 
i'm starting to suspect "column stride fields" is the wave of the future 
for stuff like this ... see LUCENE-1231 for more details, butat this 
point it's totally theoretical)



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33609-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 14 23:34:46 2008
Return-Path: <java-user-return-33609-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66612 invoked from network); 14 Apr 2008 23:34:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Apr 2008 23:34:45 -0000
Received: (qmail 45901 invoked by uid 500); 14 Apr 2008 23:34:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45859 invoked by uid 500); 14 Apr 2008 23:34:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45848 invoked by uid 99); 14 Apr 2008 23:34:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Apr 2008 16:34:39 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Apr 2008 23:33:57 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 61F9371C36A; Mon, 14 Apr 2008 16:34:10 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 5D8F471C33C
	for <java-user@lucene.apache.org>; Mon, 14 Apr 2008 16:34:10 -0700 (PDT)
Date: Mon, 14 Apr 2008 16:34:10 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Using Lucene partly as DB and 'joining' search results.
In-Reply-To: <47FF3B35.4000705@teamware.com>
Message-ID: <Pine.LNX.4.62.0804141625570.24515@radix.cryptio.net>
References: <47FF3B35.4000705@teamware.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: The archive is read only apart from bulk deletes, but one of the requirements
: is for users to be able to label their own mail.  Given that a Lucene Document
: cannot be updated, I have thought about having a separate Lucene index that
: has just the 3 terms (or some combination of) userId + mailId + label.
: 
: That of course would mean joining searches from the main mail data index and
: the label index.

tangential to the existing follwups about ways to use Filters efficiently 
to get some of the behavior, take a look at ParallelReader ... your use 
case sounds like it might be perfect for it: one really large main dataset 
that changes fairly infrequently, and what changes do occur are mainly 
about adding new records; plus a small "parallel" set of fields about 
each record in the main set which do change fairly frequently.

you build up an index for the main data, and then you periodicly build up 
a second index with the docs in the exact same order as the main index.

additions to the main index do't need to block on rebuilding the secondary 
index.  deletes do (since you need to delete from both indexes in parallel 
to keep the ids in sync) ... but that's ok since you said you only need 
occasional bulk deletes (you could process them as an initial step of your 
recuring rebuild of the smaller index).



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33610-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 15 04:00:16 2008
Return-Path: <java-user-return-33610-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5655 invoked from network); 15 Apr 2008 04:00:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Apr 2008 04:00:16 -0000
Received: (qmail 16861 invoked by uid 500); 15 Apr 2008 04:00:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16828 invoked by uid 500); 15 Apr 2008 04:00:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16817 invoked by uid 99); 15 Apr 2008 04:00:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Apr 2008 21:00:09 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of adb@teamware.com designates 212.226.92.15 as permitted sender)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Apr 2008 03:59:18 +0000
Received: from intrepid.teamw.com (intrepid.teamw.com [10.142.128.11])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id m3F3xWeL025259
	for <java-user@lucene.apache.org>; Tue, 15 Apr 2008 06:59:33 +0300
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz.teamw.com with ESMTP
	 id m4f6n3cf; 15 Apr 2008 06:59:00 +0300
Message-ID: <48042808.1010600@teamware.com>
Date: Tue, 15 Apr 2008 13:59:04 +1000
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Using Lucene partly as DB and 'joining' search results.
References: <47FF3B35.4000705@teamware.com> <Pine.LNX.4.62.0804141625570.24515@radix.cryptio.net>
In-Reply-To: <Pine.LNX.4.62.0804141625570.24515@radix.cryptio.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Tue, 15 Apr 2008 06:59:33 +0300 (EEST)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0.001, required 5,
	autolearn=not spam, BAYES_50 0.00)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks all for the suggestions - there was also another thread "Lucene index on 
relational data" which had crossover here.

That's an interesting idea about using ParallelReader for the changable index. 
I had thought to just have a triplet indexed 'owner:mailId:label' in each Doc 
and have multiple Documents for the same mailId, e.g. if each recipient adds 
labels for the same mail, or if multiple labels are added by one recipient.  I 
would then have to make a join using mailId against the core.  However, if I 
want to use PR, I could have a single Document with multiple field, and using 
stored fields can 'modify' that Document.  However, what happens to the DocId 
when the delete+add occurs and how do I ensure it stays the same.

I'm on 2.3.1.  I seem to recall a discussion on this in another thread, but 
cannot find it.

Antony



Chris Hostetter wrote:
> : The archive is read only apart from bulk deletes, but one of the requirements
> : is for users to be able to label their own mail.  Given that a Lucene Document
> : cannot be updated, I have thought about having a separate Lucene index that
> : has just the 3 terms (or some combination of) userId + mailId + label.
> : 
> : That of course would mean joining searches from the main mail data index and
> : the label index.
> 
> tangential to the existing follwups about ways to use Filters efficiently 
> to get some of the behavior, take a look at ParallelReader ... your use 
> case sounds like it might be perfect for it: one really large main dataset 
> that changes fairly infrequently, and what changes do occur are mainly 
> about adding new records; plus a small "parallel" set of fields about 
> each record in the main set which do change fairly frequently.
> 
> you build up an index for the main data, and then you periodicly build up 
> a second index with the docs in the exact same order as the main index.
> 
> additions to the main index do't need to block on rebuilding the secondary 
> index.  deletes do (since you need to delete from both indexes in parallel 
> to keep the ids in sync) ... but that's ok since you said you only need 
> occasional bulk deletes (you could process them as an initial step of your 
> recuring rebuild of the smaller index).
> 
> 
> 
> -Hoss
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33611-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 15 04:27:01 2008
Return-Path: <java-user-return-33611-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11876 invoked from network); 15 Apr 2008 04:27:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Apr 2008 04:27:01 -0000
Received: (qmail 36686 invoked by uid 500); 15 Apr 2008 04:26:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36652 invoked by uid 500); 15 Apr 2008 04:26:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36641 invoked by uid 99); 15 Apr 2008 04:26:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Apr 2008 21:26:55 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.38.62] (HELO web50308.mail.re2.yahoo.com) (206.190.38.62)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 15 Apr 2008 04:26:01 +0000
Received: (qmail 41516 invoked by uid 60001); 15 Apr 2008 04:26:21 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=ITxsjehDCMqYKCIAk9HQmFYXxr9WMKKOfgSaLhtAg9Ugd9xZZxQ0wYihIuAA3TJdF0bcycMiydnZSqZWyVeXzabjhdtCS+CFm/oTrpGD65Ql3JgT7K2TlB4cwQlL5vuvxAwY6aINIzIUiFElddFr5E/IJQmvaPnpLbL+uXgroS4=;
X-YMail-OSG: if7jwDQVM1mv1TG7aPPuxOXf_jo9x3FgqaWxzG.b38TiI0__KaWuGyOXFCIPyAMtRg--
Received: from [72.231.9.236] by web50308.mail.re2.yahoo.com via HTTP; Mon, 14 Apr 2008 21:26:21 PDT
X-Mailer: YahooMailRC/902.40 YahooMailWebService/0.7.185
Date: Mon, 14 Apr 2008 21:26:21 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Solid State Drives vs. RAMDirectory
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <173968.40141.qm@web50308.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Toke, this is *super* juicy information, very useful and educational.  Please do put this on the Wiki.
There doesn't seem to be a benchmarking page on the Wiki yet, so I suggest you go to http://wiki.apache.org/lucene-java/LuceneBenchmarks, create that page, and put everything you want and can share there.

Thanks!
Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch

----- Original Message ----
From: Toke Eskildsen <te@statsbiblioteket.dk>
To: java-user@lucene.apache.org
Sent: Thursday, March 13, 2008 7:03:44 AM
Subject: Solid State Drives vs. RAMDirectory

Time for another dose of inspiration for investigating Solid State
Drives. And no, I don't get percentages from the chip manufacturers :-)

This time I'll argue that there's little gain in using a RAMDirectory
over SSDs, when performing searches. At least for our setting.


We've taken our production index of about 10 million documents / 37GB
and reduced it to 14GB by removing documents uniformly across the index.
A test with fairly simple searches were performed, using logged queries
from our production system (see the thread "Multiple Searchers" on this
mail list for details) and extracting the content of a stored field for
the first 20 hits for each search.

On a dual-core Xeon machine with 24GB of RAM, the full index can be
loaded into RAM with a RAMDirectory. The following is the average speed
over 340.000 queries. In the log names, t2 signifies 2 threads with a
shared searcher, t2u signifies 2 threads with separate searchers.

metis_RAM_24GB_i14_v23_t1_l23.log       530.0 q/sec
metis_RAM_24GB_i14_v23_t2_l23.log       888.2 q/sec
metis_RAM_24GB_i14_v23_t2u_l23.log      983.9 q/sec
metis_RAM_24GB_i14_v23_t3_l23.log       843.1 q/sec
metis_RAM_24GB_i14_v23_t3u_l23.log      996.1 q/sec
metis_RAM_24GB_i14_v23_t4_l23.log       869.8 q/sec
metis_RAM_24GB_i14_v23_t4u_l23.log      943.4 q/sec

As can be seen, the best performing configuration was 3 threads with
separate searchers. The time for loading the index into RAM was ignored.


Now for the interesting part: Reducing the amount of available RAM to
3GB and using SSDs instead.

metis_MTRONSSD_RAID0_3GB_i14_v23_t1_l23.log     433.7 q/sec
metis_MTRONSSD_RAID0_3GB_i14_v23_t2_l23.log     573.4 q/sec
metis_MTRONSSD_RAID0_3GB_i14_v23_t2u_l23.log    783.4 q/sec
metis_MTRONSSD_RAID0_3GB_i14_v23_t3_l23.log     459.7 q/sec
metis_MTRONSSD_RAID0_3GB_i14_v23_t3u_l23.log    808.5 q/sec
metis_MTRONSSD_RAID0_3GB_i14_v23_t4_l23.log     455.3 q/sec
metis_MTRONSSD_RAID0_3GB_i14_v23_t4u_l23.log    809.0 q/sec
metis_MTRONSSD_RAID0_3GB_i14_v23_t5_l23.log     454.4 q/sec

In comparison, the same test with 3GB of RAM on 15.000 RPM harddisks in
RAID 1 gave these numbers:

metis_15000RPM_RAID1_3GB_i14_v23_t1_l23.log     176.6 q/sec
metis_15000RPM_RAID1_3GB_i14_v23_t2_l23.log     188.6 q/sec
metis_15000RPM_RAID1_3GB_i14_v23_t2u_l23.log    247.1 q/sec
metis_15000RPM_RAID1_3GB_i14_v23_t3_l23.log     178.4 q/sec
metis_15000RPM_RAID1_3GB_i14_v23_t3u_l23.log    276.1 q/sec
metis_15000RPM_RAID1_3GB_i14_v23_t4_l23.log     177.8 q/sec
metis_15000RPM_RAID1_3GB_i14_v23_t4u_l23.log    259.3 q/sec
metis_15000RPM_RAID1_3GB_i14_v23_t5_l23.log     178.5 q/sec

SSDs does not equal RAMDirectory in speed for this setup, but 81% is not
bad, especially not when compared to the 28% for conventional harddisks.


Performing the same tests with 8GB of available RAM on the machine gave
the following results:

metis_MTRONSSD_RAID0_8GB_i14_v23_t1_l23.log     431.9 q/sec
metis_MTRONSSD_RAID0_8GB_i14_v23_t2_l23.log     594.3 q/sec
metis_MTRONSSD_RAID0_8GB_i14_v23_t2u_l23.log    807.7 q/sec
metis_MTRONSSD_RAID0_8GB_i14_v23_t3_l23.log     472.3 q/sec
metis_MTRONSSD_RAID0_8GB_i14_v23_t3u_l23.log    817.6 q/sec
metis_MTRONSSD_RAID0_8GB_i14_v23_t4_l23.log     464.4 q/sec
metis_MTRONSSD_RAID0_8GB_i14_v23_t4u_l23.log    828.8 q/sec
metis_MTRONSSD_RAID0_8GB_i14_v23_t5_l23.log     471.2 q/sec

metis_15000RPM_RAID1_8GB_i14_v23_t1_l23.log     199.4 q/sec
metis_15000RPM_RAID1_8GB_i14_v23_t2_l23.log     220.4 q/sec
metis_15000RPM_RAID1_8GB_i14_v23_t2u_l23.log    312.4 q/sec
metis_15000RPM_RAID1_8GB_i14_v23_t3_l23.log     203.8 q/sec
metis_15000RPM_RAID1_8GB_i14_v23_t3u_l23.log    370.9 q/sec
metis_15000RPM_RAID1_8GB_i14_v23_t4_l23.log     203.1 q/sec
metis_15000RPM_RAID1_8GB_i14_v23_t4u_l23.log    408.1 q/sec
metis_15000RPM_RAID1_8GB_i14_v23_t5_l23.log     202.5 q/sec

Switching to 12GB...

metis_MTRONSSD_RAID0_12GB_i14_v23_t1_l23.log    438.8 q/sec
metis_MTRONSSD_RAID0_12GB_i14_v23_t2_l23.log    587.8 q/sec
metis_MTRONSSD_RAID0_12GB_i14_v23_t2u_l23.log   819.9 q/sec
metis_MTRONSSD_RAID0_12GB_i14_v23_t3_l23.log    476.4 q/sec
metis_MTRONSSD_RAID0_12GB_i14_v23_t3u_l23.log   833.7 q/sec
metis_MTRONSSD_RAID0_12GB_i14_v23_t4_l23.log    465.4 q/sec
metis_MTRONSSD_RAID0_12GB_i14_v23_t4u_l23.log   835.2 q/sec
metis_MTRONSSD_RAID0_12GB_i14_v23_t5_l23.log    467.1 q/sec

metis_15000RPM_RAID1_12GB_i14_v23_t1_l23.log    198.6 q/sec
metis_15000RPM_RAID1_12GB_i14_v23_t2_l23.log    219.1 q/sec
metis_15000RPM_RAID1_12GB_i14_v23_t2u_l23.log   309.4 q/sec
metis_15000RPM_RAID1_12GB_i14_v23_t3_l23.log    204.1 q/sec
metis_15000RPM_RAID1_12GB_i14_v23_t3u_l23.log   362.4 q/sec
metis_15000RPM_RAID1_12GB_i14_v23_t4_l23.log    202.3 q/sec
metis_15000RPM_RAID1_12GB_i14_v23_t4u_l23.log   406.6 q/sec
metis_15000RPM_RAID1_12GB_i14_v23_t5_l23.log    201.2 q/sec


Extracting the fastest configurations for the different RAM amounts:

metis_RAM_24GB_i14_v23_t3u_l23.log      996.1 q/sec

3GB of RAM:
metis_MTRONSSD_RAID0_3GB_i14_v23_t4u_l23.log    809.0 q/sec
metis_15000RPM_RAID1_3GB_i14_v23_t3u_l23.log    276.1 q/sec

8GB of RAM:
metis_MTRONSSD_RAID0_8GB_i14_v23_t4u_l23.log    828.8 q/sec
metis_15000RPM_RAID1_8GB_i14_v23_t4u_l23.log    408.1 q/sec

12GB of RAM:
metis_MTRONSSD_RAID0_12GB_i14_v23_t4u_l23.log   835.2 q/sec
metis_15000RPM_RAID1_12GB_i14_v23_t4u_l23.log   406.6 q/sec

As can be seen, the SSDs benefit somewhat from running at 8GB, while the
harddrives benefit a lot. Plotting a graph with queries/second over time
shows clearly that the performance of the harddrives relative to the RAM
speed is steadily climbing, while the SSD speed is not (or at least very
little). This tells me that the speed of SSD-stored indexes is fairly
independent of the amount of RAM available for cache.

Upping the amount to 12GB doesn't change much. Clearly 8GB is "enough"
for our 14GB index with our queries.


With the fear of making all this unclear, let's try and ignore the first
5000 queries and cut off the statistics after 50,000 queries. This
mimics a setting with warm-up and a not-so-stale index that gets
replaced once in a while. Extracting the fastest configurations for the
different RAM amounts gives us:

RAMDirectory (24GB of RAM):
metis_RAM_24GB_i14_v23_t2u_l23.log 867.3 q/sec

3GB of RAM:
metis_MTRONSSD_RAID0_3GB_i14_v23_t3u_l23.log 663.2 q/sec
metis_15000RPM_RAID1_3GB_i14_v23_t4u_l23.log 163.4 q/sec

8GB of RAM:
metis_MTRONSSD_RAID0_8GB_i14_v23_t4u_l23.log 653.6 q/sec
metis_15000RPM_RAID1_8GB_i14_v23_t4u_l23.log 163.4 q/sec

12GB of RAM:
metis_MTRONSSD_RAID0_12GB_i14_v23_t3u_l23.log 653.6 q/sec
metis_15000RPM_RAID1_12GB_i14_v23_t4u_l23.log 163.4 q/sec

Yes, the 3*163.4 is a funny coincidence, I double-checked and looked at
the graphs: Up till about 60,000 queries, the graphs are virtually
identical for the 15000RPM, then the one for 3GB RAM stabilizes and the
ones for 8 and 12GB continue being virtually identical and climbing.
For SSDs, the graph for 3GB is a bit higher than the other ones until
about 50-60.000 queries, then a bit lower for the rest.

For this scenario, the speed of SSDs compared to RAMDirectory drops to
75-76% while the speed of harddisks drops to 19%, fairly independent of
RAM. In other words: Upping the amount of RAM does not help us when the
index is replaced before we pass the 50.000 queries.

Another observation: The faster we change our index, the better SSD
looks compared to harddisks. On the flip side - for long run-times with
unchanged index, harddisks seems the better choice, at least from an
economically point of view.


Grand conclusion? Getting 3/4 of the performance of RAMDirectory by
using SSDs on a machine with much less RAM seems like a good deal if
high performance / machine is needed.


Remember, this is all searches with an optimized index. This is on the
corpus from the Danish State and University Library and should be seen
as nothing else than inspiration.

Still pending is experiments with updating large indexes on SSDs. My
guess is that there won't be anywhere near the same speed-increase as
for the pure searches. It'll have to wait a bit though, as it requires
Real Work, as opposed to just starting a script.


NB: I'd like to post my findings on the Lucene wiki, but I have been
unable to locate the appropriate page. Could someone please point me in
the right direction?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33612-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 15 04:44:32 2008
Return-Path: <java-user-return-33612-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16555 invoked from network); 15 Apr 2008 04:44:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Apr 2008 04:44:32 -0000
Received: (qmail 45436 invoked by uid 500); 15 Apr 2008 04:44:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45406 invoked by uid 500); 15 Apr 2008 04:44:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45395 invoked by uid 99); 15 Apr 2008 04:44:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Apr 2008 21:44:27 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Apr 2008 04:43:36 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 6259B71C2B7; Mon, 14 Apr 2008 21:43:56 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 5C28B71C0D3
	for <java-user@lucene.apache.org>; Mon, 14 Apr 2008 21:43:56 -0700 (PDT)
Date: Mon, 14 Apr 2008 21:43:56 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Using Lucene partly as DB and 'joining' search results.
In-Reply-To: <48042808.1010600@teamware.com>
Message-ID: <Pine.LNX.4.62.0804142136280.1081@radix.cryptio.net>
References: <47FF3B35.4000705@teamware.com> <Pine.LNX.4.62.0804141625570.24515@radix.cryptio.net>
 <48042808.1010600@teamware.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: would then have to make a join using mailId against the core.  However, if I
: want to use PR, I could have a single Document with multiple field, and using
: stored fields can 'modify' that Document.  However, what happens to the DocId
: when the delete+add occurs and how do I ensure it stays the same.

you can't ... that's why i said you'd need to rebuild the smaller index 
completley on a periodic basis (going in the same order as the docs in the 
big index) ... it might not be feasible if the rate at which you need to 
surface annotations has to be "near instanteneous" but assuming most 
emails won't ever get annotations, they'll just be "empty" docs that 
should index lighting fast.

i can also imagine a situation where you break both indexes up into lots 
of pieces (shards) and use a MultiReader over lots of ParallelReaders ... 
that way you have much smaller "small" indexes to rebuild when someone 
annotates an email -- and if hte shards are organized by date, you're less 
likely to ever need to rebuild many of them since people will tend to 
focus on annotating more recent mail, and if queries focus on a specific 
date range (which i'm guessing most email searches will) you can use 
MultiReaders over a subset of all the ParallelReaders to save time on 
scanning through older docs you know won't match.

Disclaimer: all of this is purely brainstorming, i've never actually tried 
anything like this, it may be more trouble then it's worth.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33613-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 15 05:24:50 2008
Return-Path: <java-user-return-33613-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24737 invoked from network); 15 Apr 2008 05:24:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Apr 2008 05:24:50 -0000
Received: (qmail 64182 invoked by uid 500); 15 Apr 2008 05:24:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64152 invoked by uid 500); 15 Apr 2008 05:24:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64141 invoked by uid 99); 15 Apr 2008 05:24:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Apr 2008 22:24:44 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of adb@teamware.com designates 212.226.92.15 as permitted sender)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Apr 2008 05:24:02 +0000
Received: from intrepid.teamw.com (intrepid.teamw.com [10.142.128.11])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id m3F5O5IU028521
	for <java-user@lucene.apache.org>; Tue, 15 Apr 2008 08:24:05 +0300
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz.teamw.com with ESMTP
	 id m4f8n1mp; 15 Apr 2008 08:23:00 +0300
Message-ID: <48043BD9.3080009@teamware.com>
Date: Tue, 15 Apr 2008 15:23:37 +1000
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Using Lucene partly as DB and 'joining' search results.
References: <47FF3B35.4000705@teamware.com> <Pine.LNX.4.62.0804141625570.24515@radix.cryptio.net> <48042808.1010600@teamware.com> <Pine.LNX.4.62.0804142136280.1081@radix.cryptio.net>
In-Reply-To: <Pine.LNX.4.62.0804142136280.1081@radix.cryptio.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Tue, 15 Apr 2008 08:24:05 +0300 (EEST)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0.001, required 5,
	autolearn=not spam, BAYES_50 0.00)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Chris Hostetter wrote:
> you can't ... that's why i said you'd need to rebuild the smaller index 
> completley on a periodic basis (going in the same order as the docs in the 

Mmm, the annotations would only be stored in the index.  It would be possible to 
store them elsewhere, so I can investigate that, in which case the rebuild would 
be possible.

> i can also imagine a situation where you break both indexes up into lots 
> of pieces (shards) and use a MultiReader over lots of ParallelReaders ... 
> that way you have much smaller "small" indexes to rebuild when someone 
> annotates an email -- and if hte shards are organized by date, you're less 
> likely to ever need to rebuild many of them since people will tend to 

Data will be 'sharded' anyway, by date of some granularity.  Looking at the 
source for MultiReader/MultiSearcher, they are single threaded.  Is there a 
performance trade off between single-thread/many small indexes and 
single-thread/some large indexes.  Can a MultiReader work with one..n reader per 
thread, something like a thread pool of IndexReaders.  I expect it would be 
faster to run the searches in parallel?

> Disclaimer: all of this is purely brainstorming, i've never actually tried 
> anything like this, it may be more trouble then it's worth.

:) Thanks for the sounding board - it's always useful to get new ideas!
Antony



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33614-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 15 06:25:49 2008
Return-Path: <java-user-return-33614-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74659 invoked from network); 15 Apr 2008 06:25:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Apr 2008 06:25:49 -0000
Received: (qmail 21929 invoked by uid 500); 15 Apr 2008 06:25:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21889 invoked by uid 500); 15 Apr 2008 06:25:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21878 invoked by uid 99); 15 Apr 2008 06:25:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Apr 2008 23:25:43 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Apr 2008 06:24:57 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JlebN-0002Ds-Mi
	for java-user@lucene.apache.org; Mon, 14 Apr 2008 23:25:10 -0700
Message-ID: <16695864.post@talk.nabble.com>
Date: Mon, 14 Apr 2008 23:25:09 -0700 (PDT)
From: palexv <palexv@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Search for phrases
In-Reply-To: <200804142113.50331@danielnaber.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: palexv@gmail.com
References: <16678104.post@talk.nabble.com> <200804142113.50331@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org


I have not tokenized phrases in index.
What query should I use?
Simple TermQuery does not work.
If I try to use QueryParser , what analyzer should I use?



Daniel Naber-10 wrote:
> 
> On Montag, 14. April 2008, palexv wrote:
> 
>> For example I need to search for "java de*" and recieve "java
>> developers", "java development", "developed by java" etc.
> 
> If your text is tokenized, this is not supported by QueryParser but you
> can 
> create such queries using MultiPhraseQuery. If you don't tokenize a text 
> like "java development" at whitespace characters, it's just like a single 
> term for Lucene. A query like "java de*" should work then, just make sure 
> you don't tokenize the search query either.
> 
> Regards
>  Daniel
> 
> -- 
> http://www.danielnaber.de
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Search-for-phrases-tp16678104p16695864.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33615-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 15 06:31:02 2008
Return-Path: <java-user-return-33615-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77376 invoked from network); 15 Apr 2008 06:31:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Apr 2008 06:31:02 -0000
Received: (qmail 28974 invoked by uid 500); 15 Apr 2008 06:30:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28780 invoked by uid 500); 15 Apr 2008 06:30:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28769 invoked by uid 99); 15 Apr 2008 06:30:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Apr 2008 23:30:56 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.225.24.87] (HELO luna.statsbiblioteket.dk) (130.225.24.87)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Apr 2008 06:30:13 +0000
Received: from [172.18.249.244] (PC990.sb.statsbiblioteket.dk [172.18.249.244])
 by luna.statsbiblioteket.dk
 (iPlanet Messaging Server 5.2 HotFix 1.16 (built May 14 2003))
 with ESMTP id <0JZC00HMJSQPTA@luna.statsbiblioteket.dk> for
 java-user@lucene.apache.org; Tue, 15 Apr 2008 08:30:25 +0200 (MEST)
Date: Tue, 15 Apr 2008 08:30:24 +0200
From: Toke Eskildsen <te@statsbiblioteket.dk>
Subject: Re: Solid State Drives vs. RAMDirectory
In-reply-to: <173968.40141.qm@web50308.mail.re2.yahoo.com>
To: java-user@lucene.apache.org
Reply-to: te@statsbiblioteket.dk
Message-id: <1208241024.9126.578.camel@PC990.sb.statsbiblioteket.dk>
Organization: Statsbiblioteket
MIME-version: 1.0
X-Mailer: Evolution 2.8.3 (2.8.3-2.fc6)
Content-type: text/plain
Content-transfer-encoding: 7BIT
References: <173968.40141.qm@web50308.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Mon, 2008-04-14 at 21:26 -0700, Otis Gospodnetic wrote:
> Toke, this is *super* juicy information, very useful and educational.
> Please do put this on the Wiki. There doesn't seem to be a benchmarking
>  page on the Wiki yet, so I suggest you go to
>  http://wiki.apache.org/lucene-java/LuceneBenchmarks, create that page,
>  and put everything you want and can share there.

Noted. I'd love to do so, but things are heating up at work. Writing
articles and similar has low priority until fall 2008. I really hope I
can find the time before that though - our fridays are theoretically
free for this kind of work.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33616-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 15 07:22:43 2008
Return-Path: <java-user-return-33616-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4832 invoked from network); 15 Apr 2008 07:22:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Apr 2008 07:22:43 -0000
Received: (qmail 96789 invoked by uid 500); 15 Apr 2008 07:22:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96748 invoked by uid 500); 15 Apr 2008 07:22:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96737 invoked by uid 99); 15 Apr 2008 07:22:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Apr 2008 00:22:36 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lucene@nitwit.de designates 80.67.18.44 as permitted sender)
Received: from [80.67.18.44] (HELO smtprelay06.ispgateway.de) (80.67.18.44)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Apr 2008 07:21:42 +0000
Received: from [85.178.220.54] (helo=server.localdomain)
	by smtprelay06.ispgateway.de with esmtps (TLSv1:AES256-SHA:256)
	(Exim 4.68)
	(envelope-from <lucene@nitwit.de>)
	id 1JlfUR-0006zK-JF
	for java-user@lucene.apache.org; Tue, 15 Apr 2008 09:22:03 +0200
Received: from localhost (localhost [127.0.0.1])
	by server.localdomain (Postfix) with ESMTP id DDC5868B
	for <java-user@lucene.apache.org>; Tue, 15 Apr 2008 09:22:15 +0200 (CEST)
Date: Tue, 15 Apr 2008 09:22:15 +0200 (CEST)
From: Timo Nentwig <lucene@nitwit.de>
X-X-Sender: tcn@server.localdomain
To: java-user@lucene.apache.org
Subject: Re: Sorting consumes hundreds of MBytes RAM
In-Reply-To: <262665.34316.qm@web50307.mail.re2.yahoo.com>
Message-ID: <Pine.LNX.4.64.0804150919520.21390@server.localdomain>
References: <262665.34316.qm@web50307.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII; format=flowed
X-Df-Sender: [pbs]153383
X-Virus-Checked: Checked by ClamAV on apache.org

What do you mean by "that's true"? That lucene does read all data 
available in the index for this field into memory? In this case index
sharding should help, right?

On Sun, 13 Apr 2008, Otis Gospodnetic wrote:

> Date: Sun, 13 Apr 2008 20:25:09 -0700 (PDT)
> From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
> Reply-To: java-user@lucene.apache.org
> To: java-user@lucene.apache.org
> Subject: Re: Sorting consumes hundreds of MBytes RAM
> 
> Timo,
> That is true.  The only think I can recommend at the moment is to make sure you specify the correct data type.  If your sort field is a numeric field, make that explicit.
>
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>
> ----- Original Message ----
> From: Timo Nentwig <lucene@nitwit.de>
> To: java-user@lucene.apache.org
> Sent: Sunday, April 13, 2008 4:45:37 PM
> Subject: Sorting consumes hundreds of MBytes RAM
>
> Hi!
>
> I found that when sorting the search result -depending on the amount of data
> in the field to sort by - this can easily lead to FieldCacheImpl to allocate
> hundreds of MByte RAM.
>
> How does this work internally? It seems as if all data for this field found in
> the entire index is read into memory (?).
>
> And question #2: what am I going to do against it? Index  sharding?
>
> Thanks,
> Timo
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33617-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 15 09:51:35 2008
Return-Path: <java-user-return-33617-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89242 invoked from network); 15 Apr 2008 09:51:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Apr 2008 09:51:34 -0000
Received: (qmail 99526 invoked by uid 500); 15 Apr 2008 09:51:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99334 invoked by uid 500); 15 Apr 2008 09:51:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99323 invoked by uid 99); 15 Apr 2008 09:51:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Apr 2008 02:51:28 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FAKE_REPLY_C,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [193.167.41.152] (HELO joyds1.joensuu.fi) (193.167.41.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Apr 2008 09:50:41 +0000
Received: from joyds1.joensuu.fi (localhost.localdomain [127.0.0.1])
	by joyds1.joensuu.fi (8.14.2/8.13.1) with ESMTP id m3F9opPv018309
	for <java-user@lucene.apache.org>; Tue, 15 Apr 2008 12:50:51 +0300
Received: (from hvaisane@localhost)
	by joyds1.joensuu.fi (8.14.2/8.14.2/Submit) id m3F9optc018308
	for java-user@lucene.apache.org; Tue, 15 Apr 2008 12:50:51 +0300
Date: Tue, 15 Apr 2008 12:50:51 +0300
From: Hannu =?utf-8?B?VsOkaXPDpG5lbg==?= <hvaisane@joyx.joensuu.fi>
To: Lucene Java <java-user@lucene.apache.org>
Subject: Re: stemming in Lucene
Message-ID: <20080415095051.GA18290@joyds1.joensuu.fi>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Disposition: inline
User-Agent: Mutt/1.5.17 (2007-11-01)
X-Virus-Checked: Checked by ClamAV on apache.org

Wojtek H wrote:
>Snowball stemmers are part of Lucene, but for few languages only
>But maybe there is a better way or there are people working on
>something like that?

I use Malaga (http://home.arcor.de/bjoern-beutel/malaga/)
for lemmatization and index the result.

http://joyds1.joensuu.fi/programs/index.html

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33618-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 15 10:32:06 2008
Return-Path: <java-user-return-33618-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17942 invoked from network); 15 Apr 2008 10:32:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Apr 2008 10:32:06 -0000
Received: (qmail 62808 invoked by uid 500); 15 Apr 2008 10:32:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62739 invoked by uid 500); 15 Apr 2008 10:31:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62687 invoked by uid 99); 15 Apr 2008 10:31:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Apr 2008 03:31:59 -0700
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=EXTRA_MPART_TYPE,HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [136.173.62.228] (HELO SMTP15.europarl.europa.eu) (136.173.62.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Apr 2008 10:31:16 +0000
Received: from EMAILLUXSV33.ep.parl.union.eu (unverified) by SMTP15.europarl.europa.eu
 (European Parliament) with ESMTP id <T865e7a314a88ad3ee416a4@SMTP15.europarl.europa.eu> for <java-user@lucene.apache.org>;
 Tue, 15 Apr 2008 12:31:23 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/related;
	type="multipart/alternative";
	boundary="----_=_NextPart_001_01C89EE3.DA95DB24"
Subject: Max length
Date: Tue, 15 Apr 2008 12:31:24 +0200
Message-ID: <E2BB1A5AB9C4BD409420F3C9E9A6914416E003@EMAILLUXSV33.ep.parl.union.eu>
X-MS-Has-Attach: yes
X-MS-TNEF-Correlator: 
Thread-Topic: Max length
Thread-Index: Acie49qHo1efTdggTJ29RNacnEWq+Q==
From: "WATHELET Thomas" <thomas.wathelet@europarl.europa.eu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C89EE3.DA95DB24
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_002_01C89EE3.DA95DB24"


------_=_NextPart_002_01C89EE3.DA95DB24
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi my question is very simple,
Is there a size limitation for the text to index
Becaus I try to index a long document and the content of this one is
stored correctly into the index but it seems that the indexation stopp
at the middle of the document.I can't find any word located after the
middle.
Any body can help me thank's
=20
=20

Thomas WATHELET
Development Team
Tel.: (+352) 4300 24752   =20
E-mail: thomas.wathelet@europarl.europa.eu
<mailto:thomas.wathelet@europarl.europa.eu>=20

=20

=20

------_=_NextPart_002_01C89EE3.DA95DB24
Content-Type: text/html;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META http-equiv=3DContent-Type content=3D"text/html; =
charset=3Dus-ascii">
<META content=3D"MSHTML 6.00.2900.3059" name=3DGENERATOR></HEAD>
<BODY>
<DIV><FONT face=3DArial size=3D2><SPAN class=3D288182510-15042008>Hi my =
question is=20
very simple,</SPAN></FONT></DIV>
<DIV><FONT face=3DArial size=3D2><SPAN class=3D288182510-15042008>Is =
there a size=20
limitation for the text to index</SPAN></FONT></DIV>
<DIV><FONT face=3DArial size=3D2><SPAN class=3D288182510-15042008>Becaus =
I try to=20
index a long document and the content of this one is stored correctly =
into the=20
index but it seems that the indexation stopp at the middle of the =
document.I=20
can't find any word located after the middle.</SPAN></FONT></DIV>
<DIV><FONT face=3DArial size=3D2><SPAN class=3D288182510-15042008>Any =
body can help me=20
thank's</SPAN></FONT></DIV>
<DIV><FONT face=3DArial size=3D2></FONT>&nbsp;</DIV>
<DIV class=3DSection1>
<DIV align=3Dleft>
<TABLE class=3DMsoNormalTable=20
style=3D"BORDER-RIGHT: medium none; BORDER-TOP: medium none; =
BORDER-LEFT: medium none; BORDER-BOTTOM: medium none; BORDER-COLLAPSE: =
collapse; mso-border-alt: solid silver .5pt; mso-border-top-alt: solid =
windowtext .5pt; mso-yfti-tbllook: 480; mso-table-lspace: 2.25pt; =
mso-table-rspace: 2.25pt; mso-table-anchor-vertical: paragraph; =
mso-table-anchor-horizontal: column; mso-table-left: left; =
mso-padding-alt: 0cm 5.4pt 0cm 5.4pt"=20
cellSpacing=3D0 cellPadding=3D0 align=3Dleft border=3D1>
  <TBODY>
  <TR=20
  style=3D"HEIGHT: 47.95pt; mso-yfti-irow: 0; mso-yfti-firstrow: yes; =
mso-yfti-lastrow: yes">
    <TD=20
    style=3D"BORDER-RIGHT: gray 1pt solid; PADDING-RIGHT: 5.4pt; =
BORDER-TOP: medium none; PADDING-LEFT: 5.4pt; PADDING-BOTTOM: 0cm; =
BORDER-LEFT: medium none; WIDTH: 77.4pt; PADDING-TOP: 0cm; =
BORDER-BOTTOM: medium none; HEIGHT: 47.95pt; mso-border-right-alt: solid =
gray .5pt"=20
    width=3D103><SPAN lang=3DFR style=3D"mso-ansi-language: FR"></SPAN>
      <P class=3DMsoNormal=20
      style=3D"TEXT-ALIGN: right; mso-margin-top-alt: auto; =
mso-margin-bottom-alt: auto; mso-element: frame; =
mso-element-frame-hspace: 2.25pt; mso-element-wrap: around; =
mso-element-anchor-vertical: paragraph; mso-element-anchor-horizontal: =
column; mso-height-rule: exactly"=20
      align=3Dright><SPAN lang=3DFR=20
      style=3D"FONT-SIZE: 4pt; mso-ansi-language: FR"><IMG alt=3D"" =
hspace=3D0=20
      src=3D"cid:288182510@15042008-1064" align=3Dbaseline =
border=3D0></SPAN></P></TD>
    <TD=20
    style=3D"BORDER-RIGHT: medium none; PADDING-RIGHT: 5.4pt; =
BORDER-TOP: medium none; PADDING-LEFT: 5.4pt; PADDING-BOTTOM: 0cm; =
BORDER-LEFT: medium none; WIDTH: 240.7pt; PADDING-TOP: 0cm; =
BORDER-BOTTOM: medium none; HEIGHT: 47.95pt; mso-border-left-alt: solid =
gray .5pt"=20
    vAlign=3Dtop width=3D321>
      <P class=3DMsoNormal=20
      style=3D"mso-margin-top-alt: auto; mso-margin-bottom-alt: auto; =
mso-element: frame; mso-element-frame-hspace: 2.25pt; mso-element-wrap: =
around; mso-element-anchor-vertical: paragraph; =
mso-element-anchor-horizontal: column; mso-height-rule: =
exactly"><B><SPAN=20
      style=3D"FONT-SIZE: 10pt; FONT-FAMILY: Arial; mso-bidi-font-size: =
12.0pt">Thomas=20
      WATHELET</SPAN></B><SPAN=20
      style=3D"FONT-SIZE: 10pt; FONT-FAMILY: Arial"><BR></SPAN><SPAN=20
      style=3D"FONT-SIZE: 10pt; FONT-FAMILY: Arial; mso-bidi-font-size: =
12.0pt; mso-bidi-font-style: italic">Development=20
      Team</SPAN><SPAN lang=3DBG=20
      style=3D"FONT-SIZE: 10pt; FONT-FAMILY: Arial; mso-ansi-language: =
BG; mso-bidi-font-size: 12.0pt; mso-bidi-font-style: =
italic"><BR></SPAN><SPAN=20
      style=3D"FONT-SIZE: 10pt; FONT-FAMILY: Arial; mso-bidi-font-size: =
12.0pt; mso-bidi-font-style: italic">Tel.:=20
      (+352) 4300 24752&nbsp;&nbsp;&nbsp; <BR></SPAN><SPAN=20
      style=3D"FONT-SIZE: 10pt; FONT-FAMILY: Arial; mso-bidi-font-size: =
12.0pt; mso-bidi-font-weight: bold">E-mail:=20
      </SPAN><SPAN lang=3DFR=20
      style=3D"FONT-SIZE: 10pt; COLOR: green; FONT-FAMILY: Arial; =
mso-ansi-language: FR; mso-bidi-font-size: 12.0pt; mso-bidi-font-weight: =
bold"><A=20
      title=3Dmailto:petri.lavander@europarl.europa.eu=20
      href=3D"mailto:thomas.wathelet@europarl.europa.eu"><SPAN =
lang=3DEN-GB=20
      style=3D"mso-ansi-language: =
EN-GB">thomas.wathelet@europarl.europa.eu</SPAN></A></SPAN><SPAN=20
      style=3D"FONT-SIZE: 10pt; FONT-FAMILY: Arial; mso-bidi-font-size: =
12.0pt; mso-bidi-font-style: italic"><?xml:namespace=20
      prefix =3D o ns =3D "urn:schemas-microsoft-com:office:office"=20
      /><o:p></o:p></SPAN></P></TD></TR></TBODY></TABLE></DIV>
<P class=3DMsoNormal><o:p>&nbsp;</o:p></P></DIV>
<DIV>&nbsp;</DIV></BODY></HTML>

------_=_NextPart_002_01C89EE3.DA95DB24--

------_=_NextPart_001_01C89EE3.DA95DB24
Content-Type: image/bmp;
	name="ittrad.bmp"
Content-Transfer-Encoding: base64
Content-ID: <288182510@15042008-1064>
Content-Description: ittrad.bmp
Content-Location: ittrad.bmp

Qk32IQAAAAAAADYAAAAoAAAAKAAAAEgAAAABABgAAAAAAMAhAADEDgAAxA4AAAAAAAAAAAAA////
////////mZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZ
mZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZ////////
////////mZmZmZmZaKSKI7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1
I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1aKSK
mZmZmZmZ////////mZmZI7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1
I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1
I7R1I7R1I7R1mZmZ////mZmZaKSKI7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1
I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1
I7R1I7R1I7R1I7R1I7R1aKSKmZmZmZmZI7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1
I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1
I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1mZmZmZmZTMKPyOzcyOzcyOzckdm6P72GI7R1I7R1hNWy
yOzcyOzcyOzcdtCpI7R1I7R1I7R1nt7Cnt7CI7R1I7R1nt7Cnt7CI7R1aMygyOzcaMygyOzcMbl+
I7R1aMygyOzcMbl+yOzcyOzcyOzcnt7CWseYI7R1mZmZmZmZWseY////hNWyWseYyOzc8fr2Mbl+
nt7C8fr2dtCpWseY1vHlyOzcI7R1I7R1I7R1yOzcyOzcI7R1I7R1yOzcyOzcI7R1yOzcuufUMbl+
////rOPLkdm61vHl1vHlI7R1////rOPLWseYnt7C////WseYmZmZmZmZWseY////WseYI7R1Mbl+
////hNWy////kdm6I7R1nt7C8fr2yOzcI7R1I7R1I7R1yOzcyOzcI7R1I7R1yOzc8fr21vHl////
WseYI7R1uufU4/bukdm6////hNWyI7R1////kdm6I7R1I7R11vHluufUmZmZmZmZWseY////WseY
I7R1Mbl+////hNWy4/bunt7CI7R1TMKPWseYTMKPI7R1I7R1I7R1yOzcyOzcI7R1I7R1yOzc1vHl
WseYuufUyOzcI7R1dtCp8fr2aMyg////P72GI7R1////kdm6I7R1I7R11vHluufUmZmZmZmZWseY
////hNWyWseYuufU8fr2P72GdtCp////kdm6WseYWseYP72GI7R1P72GWseY1vHl1vHlWseYP72G
yOzc1vHlWseYuufU4/buI7R1Mbl+8fr2yOzcuufUI7R1I7R1////rOPLWseYkdm6////aMygmZmZ
mZmZTMKPyOzcyOzcyOzcrOPLP72GI7R1I7R1WseYrOPLyOzcyOzcWseYI7R1dtCpyOzcyOzcyOzc
yOzcdtCpnt7CyOzcyOzcrOPLTMKPI7R1I7R1kdm6yOzcaMygI7R1I7R1yOzcyOzcyOzcuufUWseY
I7R1mZmZmZmZI7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1
I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1
I7R1I7R1I7R1mZmZmZmZI7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1
I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1
I7R1I7R1I7R1I7R1I7R1mZmZmZmZI7R1I7R1P72GWseYWseYWseYTMKPI7R1I7R1I7R1I7R1I7R1
I7R1I7R1TMKPWseYWseYWseYP72GI7R1I7R1I7R1I7R1I7R1I7R1I7R1HL6WF8WvFce3Fce3Fce3
Fce3F8WvHruOI7R1I7R1I7R1I7R1mZmZmZmZI7R1I7R1kdm6////////////yOzcI7R1I7R1I7R1
I7R1I7R1I7R1I7R1yOzc////////////kdm6I7R1I7R1I7R1I7R1I7R1I7R1CdnyB9v6B9v6B9v6
B9v6B9v6B9v6B9v6B9v6C9bpHL6WI7R1I7R1mZmZmZmZI7R1I7R1kdm6////////////yOzcI7R1
I7R1I7R1I7R1I7R1I7R1I7R1yOzc////////////kdm6I7R1I7R1I7R1I7R1I7R1I7R1DNThB9v6
B9v6B9v6B9v6B9v6B9v6B9v6B9v6B9v6B9v6GsCfI7R1mZmZmZmZI7R1I7R1kdm6////////////
yOzcI7R1I7R1I7R1I7R1I7R1I7R1I7R1yOzc////////////kdm6I7R1I7R1I7R1I7R1I7R1I7R1
F8WvDNThFce3HL6WHL6WHL6WGsCfDNThB9v6B9v6B9v6C9bpI7R1mZmZmZmZI7R1I7R1kdm6////
////////yOzcI7R1I7R1I7R1I7R1I7R1I7R1I7R1yOzc////////////kdm6I7R1I7R1I7R1I7R1
I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1HL6WB9v6B9v6B9v6B9v6I7R1mZmZmZmZI7R1I7R1
kdm6////////////yOzcI7R1I7R1I7R1I7R1I7R1I7R1I7R1yOzc////////////kdm6I7R1I7R1
I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1HL6WDNThB9v6B9v6B9v6B9v6I7R1mZmZmZmZ
I7R1I7R1kdm6////////////yOzcI7R1I7R1I7R1I7R1I7R1I7R1I7R1yOzc////////////kdm6
I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1HL6WEszIC9bpB9v6B9v6B9v6B9v6B9v6E8rAI7R1
mZmZmZmZI7R1I7R1kdm6////////////yOzcI7R1I7R1I7R1I7R1I7R1I7R1I7R1yOzc////////
////kdm6I7R1I7R1I7R1I7R1I7R1I7R1I7R1HruODNThB9v6B9v6B9v6B9v6B9v6B9v6B9v6EszI
IbZ9I7R1mZmZmZmZI7R1I7R1kdm6////////////yOzcI7R1I7R1I7R1I7R1I7R1I7R1I7R1yOzc
////////////kdm6I7R1I7R1I7R1I7R1I7R1I7R1HruOB9v6B9v6B9v6B9v6B9v6B9v6CdnyEszI
HL6WI7R1I7R1I7R1mZmZmZmZI7R1I7R1kdm6////////////yOzcI7R1I7R1I7R1I7R1I7R1I7R1
I7R1yOzc////////////kdm6I7R1I7R1I7R1I7R1I7R1I7R1EM/QB9v6B9v6B9v6B9v6EszIGsCf
I7R1I7R1I7R1I7R1I7R1I7R1mZmZmZmZI7R1I7R1kdm6////////////yOzcI7R1I7R1I7R1I7R1
I7R1I7R1I7R1yOzc////////////kdm6I7R1I7R1I7R1I7R1I7R1I7R1DtHZB9v6B9v6B9v6Fce3
I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1mZmZmZmZI7R1I7R1kdm6////////////yOzcI7R1I7R1
WseYWseYWseYWseYWseY1vHl////////////rOPLWseYWseYWseYWseYTMKPI7R1EM/QB9v6B9v6
B9v6DNThGsCfIbZ9H7mGHL6WFce3Fce3I7R1I7R1mZmZmZmZI7R1I7R1kdm6////////////yOzc
I7R1I7R1////////////////////////////////////////////////////////yOzcI7R1HruO
CdnyB9v6B9v6B9v6B9v6B9v6B9v6B9v6B9v6CdnyIbZ9I7R1mZmZmZmZI7R1I7R1kdm6////////
////yOzcI7R1I7R1////////////////////////////////////////////////////////yOzc
I7R1I7R1HruODtHZB9v6B9v6B9v6B9v6B9v6B9v6B9v6B9v6GMOnI7R1mZmZmZmZI7R1I7R1P72G
WseYWseYWseYTMKPI7R1I7R1WseYWseYWseYWseYWseYWseYWseYWseYWseYWseYWseYWseYWseY
WseYTMKPI7R1I7R1I7R1I7R1HruOF8WvFce3Fce3Fce3Fce3F8WvHruOI7R1I7R1mZmZmZmZI7R1
I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1
I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1mZmZ
mZmZI7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1
I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1
I7R1mZmZmZmZI7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1
I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1
I7R1I7R1I7R1mZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZ
mZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZ
mZmZmZmZmZmZmZmZmZmZmZmZmZmZ////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////mZmZmZmZ////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////mZmZmZmZ////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////mZmZmZmZ////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////mZmZmZmZ////////////////
/////////////////////////////////////f39////////////////////////////////////
////////////////////////////////////////////////////////////mZmZmZmZ////////
////////////////////////////////////2dnZtbW17+/v+vr6////////////////////////
////////////////////////////////////////////////////////////////////mZmZmZmZ
////////////////////////////////////////zs7OPT09ERERbGxs+vr6+Pj4////////////
////9fv5ite1WseYyu3e////////////////////////////////////////////////////////
mZmZmZmZ////////////////////////////////////qqqqDAwMAAAAAAAAAAAAaWlp+fn59vb2
////////9fv5ite1JrV3I7R1SMGMyu3e////////////////////////////////////////////
////////mZmZmZmZ////////////////////////////////qKioDQ0NAAAAAAAAAAAAAAAAAAAA
a2tr6+vr+vr68Pr2ide1I7R1I7R1I7R1I7R1SMGMyu3e/P79////////////////////////////
////////////////mZmZmZmZ////////////////////////////39/fHh4eAAAAAAAAAAAAAAAA
AAAAAAAACQkJxsbG/f7+mt3AI7R1I7R1I7R1I7R1I7R1I7R1TsOQ5/fw////////////////////
////////////////////////mZmZmZmZ////////////////////////////ysrKERERAAAAAAAA
AAAAAAAAAAAAAAAAKCgo6urq////nt7CI7R1I7R1I7R1I7R1I7R1I7R1ScGN6ffx+/78////////
////////////////////////////////mZmZmZmZ////////////////////2dnZtbW16enpl5eX
CQkJAAAAAAAAAAAAAAAAGRkZwsnGot/EuOfT9/z6f9OvI7R1I7R1I7R1I7R1Q7+Jz+/hxOvaide1
zu7g////////////////////////////////////mZmZmZmZ////////////////zs7OPT09ERER
bGxs+fn5m5ubBwcHAAAAAAAAGBgYxcnHite1JrV3NbqAtOXQ////gtSxI7R1I7R1RL+K0/Djz+/h
Rb+KI7R1S8KOze7g////////////////////////////////mZmZmZmZ////////////0NDQNzc3
AAAAAAAAAAAAa2tr+Pj4k5OTGhoaLS0tusO/i9i2J7V4I7R1I7R1M7l/s+XP9/z6jdi4Zsufyezd
zO7fRsCLI7R1I7R1I7R1TMKOzu7g////////////////////////////mZmZmZmZ////////z8/P
Ojo6AAAAAAAAAAAAAAAAAAAAbm5u5+fn0NDQ5OTkftOuKrZ5I7R1I7R1I7R1I7R1Mrl+ruPM+f37
6/jzzO7fScGNI7R1I7R1I7R1I7R1I7R1UMOR0/Dj////////////////////////mZmZmZmZ////
////enp6AAAAAAAAAAAAAAAAAAAAAAAADQ0NxsbG////////OLuCI7R1I7R1I7R1I7R1I7R1I7R1
acyh/P79////ruPMKLZ4I7R1I7R1I7R1I7R1I7R1K7d6werY////////////////////////mZmZ
mZmZ////////ra2tDw8PAAAAAAAAAAAAAAAAAAAAVlZW39/f1tbW8vLyl9y+Lbh7I7R1I7R1I7R1
I7R1Pr2GvunWrK2tioqK3ufjedCqJbV2I7R1I7R1I7R1JrV3j9m54fXsoN/D0e/i////////////
////mZmZmZmZ////////+fn5oaGhERERAAAAAAAAAAAAWlpa5OTkfX19GBgYXl5e4OXjot/FLbh7
I7R1I7R1PL2FvenWjI2NCAgIAQEBQUFB6/Pvds6oJrV3I7R1JrV3j9m54/XtY8qdJ7V3Lbh7o9/G
////////////mZmZmZmZ////////////+/v7pKSkFhYWAwMDVlZW3d3dfX19BQUFAAAAAgICWlpa
5Oblot/FNLqARb+KvejVi4uLBgYGAAAAAAAAAAAAPz8/7fXye8+rP72Gj9m54PTsYsmcI7R1I7R1
I7R1KrZ5ot/F////////mZmZmZmZ////////////////+vr6tLS0lZWV19fXd3d3AQEBAAAAAAAA
AAAAAAAAWlpa5ejnzO7f1vDkj4+PBwcHAAAAAAAAAAAAAAAAAAAAbm5u4unm3fHo4/XtYMmbI7R1
I7R1I7R1I7R1I7R1KrZ5yu3e/P79mZmZmZmZ////////////////////////////qqqqBwcHAAAA
AAAAAAAAAAAAAAAAAAAApaWl////8fHxKCgoAAAAAAAAAAAAAAAAAAAAAAAADQ0NxsbG////0fDi
JrV3I7R1I7R1I7R1I7R1I7R1I7R1TsOQ5/fwmZmZmZmZ////////////////////////////u7u7
Hh4eAAAAAAAAAAAAAAAAAAAAJiYmy8vL6enp8PDwa2trAQEBAAAAAAAAAAAAAAAAAAAAVlZW1OTd
1fHk9fv5WMaWI7R1I7R1I7R1I7R1I7R1I7R1ScGN6/jzmZmZmZmZ////////////////////////
////////n5+fFhYWAAAAAAAAAAAAIiIixsbGu7u7S0tLdXV16+vrYmJiAQEBAAAAAAAAAAAAKSkp
zuXbYsmcQ7+JruPM8vv3SsGNI7R1I7R1I7R1I7R1Pb2F1/Hm+v38mZmZmZmZ////////////////
////////////////////oqKiGRkZAAAAIyMjxMTExcXFICAgAAAAAAAAampq9vb2YmJiAQEBAAAA
KCgoxtzTWceXI7R1I7R1L7h9rOLL+v38TcKPI7R1I7R1Pr2G2/Lo/P79////mZmZmZmZ////////
////////////////////////////////qqqqampqwcHBwsLCIyMjAAAAAAAAAAAAAAAAa2tr5+fn
d3d3WFhYwNfNXsiaI7R1I7R1I7R1I7R1L7h9q+LL8Pr2bs6kXsia1/Hm/f7+////////mZmZmZmZ
////////////////////////////////////////////////5+fnKSkpAAAAAAAAAAAAAAAAAAAA
AAAAg4OD////////f9OvI7R1I7R1I7R1I7R1I7R1I7R1ObuD2fLn+/788vv3/v/+////////////
mZmZmZmZ////////////////////////////////////////////////19fXFxcXAAAAAAAAAAAA
AAAAAAAAAQEBi4uL////////q+LLLrh8I7R1I7R1I7R1I7R1I7R1W8eY5vbv////////////////
////////mZmZmZmZ////////////////////////////////////////////////+vr6oqKiExMT
AAAAAAAAAAAAAgICd3d37u7u////////+v38o+DFLrh8I7R1I7R1I7R1VcWU2fLn////////////
////////////////mZmZmZmZ////////////////////////////////////////////////////
/f39oaGhFhYWAAAAAgICd3d38/Pz////////////////+/78o+DFLrh8I7R1VcWU2/Lo////////
////////////////////////mZmZmZmZ////////////////////////////////////////////
////////////+/v7n5+fMjIyd3d39PT0////////////////////////+/78rePMide12/Lo////
////////////////////////////////mZmZmZmZ////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////mZmZmZmZ////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////mZmZmZmZ////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////mZmZmZmZ////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////mZmZmZmZ////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////mZmZ
mZmZ////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////mZmZmZmZw8PD////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////w8PDmZmZ////mZmZ////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////mZmZ////////mZmZmZmZw8PD////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////w8PDmZmZmZmZ////////////////mZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZ
mZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZ
mZmZmZmZmZmZmZmZmZmZmZmZmZmZ////////////

------_=_NextPart_001_01C89EE3.DA95DB24--

From java-user-return-33619-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 15 12:00:42 2008
Return-Path: <java-user-return-33619-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59670 invoked from network); 15 Apr 2008 12:00:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Apr 2008 12:00:41 -0000
Received: (qmail 1872 invoked by uid 500); 15 Apr 2008 12:00:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1837 invoked by uid 500); 15 Apr 2008 12:00:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1826 invoked by uid 99); 15 Apr 2008 12:00:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Apr 2008 05:00:36 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.177] (HELO spunkymail-a6.g.dreamhost.com) (208.97.132.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Apr 2008 11:59:52 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a6.g.dreamhost.com (Postfix) with ESMTP id 04732109F33
	for <java-user@lucene.apache.org>; Tue, 15 Apr 2008 05:00:01 -0700 (PDT)
Message-Id: <CA0F853E-9025-4A25-B2F7-FFC075C15D13@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <E2BB1A5AB9C4BD409420F3C9E9A6914416E003@EMAILLUXSV33.ep.parl.union.eu>
Content-Type: multipart/alternative; boundary=Apple-Mail-665-172851950
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: Max length
Date: Tue, 15 Apr 2008 08:00:02 -0400
References: <E2BB1A5AB9C4BD409420F3C9E9A6914416E003@EMAILLUXSV33.ep.parl.union.eu>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-665-172851950
Content-Type: text/plain;
	charset=US-ASCII;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: 7bit

On IndexWriter, have a look at the setMaxFieldLength() method.


On Apr 15, 2008, at 6:31 AM, WATHELET Thomas wrote:

> Hi my question is very simple,
> Is there a size limitation for the text to index
> Becaus I try to index a long document and the content of this one is  
> stored correctly into the index but it seems that the indexation  
> stopp at the middle of the document.I can't find any word located  
> after the middle.
> Any body can help me thank's
>
> <ittrad.bmp>
>
> Thomas WATHELET
> Development Team
> Tel.: (+352) 4300 24752
> E-mail: thomas.wathelet@europarl.europa.eu
>
>
>
>

--------------------------
Grant Ingersoll

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ







--Apple-Mail-665-172851950--

From java-user-return-33620-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 15 13:43:39 2008
Return-Path: <java-user-return-33620-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26095 invoked from network); 15 Apr 2008 13:43:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Apr 2008 13:43:39 -0000
Received: (qmail 96921 invoked by uid 500); 15 Apr 2008 13:43:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96892 invoked by uid 500); 15 Apr 2008 13:43:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96881 invoked by uid 99); 15 Apr 2008 13:43:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Apr 2008 06:43:32 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.134.188 as permitted sender)
Received: from [209.85.134.188] (HELO mu-out-0910.google.com) (209.85.134.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Apr 2008 13:42:47 +0000
Received: by mu-out-0910.google.com with SMTP id w9so546599mue.5
        for <java-user@lucene.apache.org>; Tue, 15 Apr 2008 06:42:58 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=BoTV7XNAe0FKEnuGM0sRVcS4s0NUGbc2on1UCQkYQaA=;
        b=W21DpsAy62Juny9Q+07RPGb1HY03FMbULVSNAx1YAPiRRD9JbRxGUr/PeTfxeouwGngEzL6RDYnR5mtKldMOW8CDw5NSmNCDvuJDeQsKEK831FuRVZnGBIlmp83D1E7TS2e1gMACRZLuJ9OygYtgGMD4OPQvbsQKeSp4WaGLJjM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=t5VHAGHZKjPqwiQSTET/WxGtHUSVKz1wLOrmXwJONj9BJaHu7i/SZbCsRLfPcqG6Nlh8bvluiTTEIUFiNrl6fuzV5DeH5sL3rEKP0GaNXNJdEMgqt3cyqlKcSFE827BcfjFKgNXIWm+qMdzyKx0dK8UBrdoj2M6XytyDH83FPFA=
Received: by 10.82.112.3 with SMTP id k3mr4844540buc.89.1208266978638;
        Tue, 15 Apr 2008 06:42:58 -0700 (PDT)
Received: by 10.82.191.6 with HTTP; Tue, 15 Apr 2008 06:42:58 -0700 (PDT)
Message-ID: <359a92830804150642l59984fd7j8612ddc26be8673d@mail.gmail.com>
Date: Tue, 15 Apr 2008 09:42:58 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Search for phrases
In-Reply-To: <16695864.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_29277_17042802.1208266978633"
References: <16678104.post@talk.nabble.com> <200804142113.50331@danielnaber.de>
	 <16695864.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_29277_17042802.1208266978633
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

It would help a lot if you provided a couple of examples of inputs into your
index and expected outputs for queries.

For instance, you say:
<<<For example I need to search for "java de*" and recieve "java
developers",
"java development", "developed by java" et>>>

But then in your follow-up you say
<<<I have not tokenized phrases in index.>>>

Well, if you haven't tokenized your input streams at index time and
query time, you can't get what your first statement asks for.

StandardAnalyzer, for instance tokenizes the input stream. If you use
that at index time, you do, indeed, tokenize the phrases. That is, the
analyzer does it for you.

So, in order for us to help you, please provide:
1> the analyzers you use at index time (code snippets)
2> the analyzers you use at query time (code snippets)
3> example queries with  expected responses
4> example input that corresponds to <3>.

Or, a small, self-contained program (or unit test) that illustrates
what you are trying to accomplish.

Best
Erick

On Tue, Apr 15, 2008 at 2:25 AM, palexv <palexv@gmail.com> wrote:

>
> I have not tokenized phrases in index.
> What query should I use?
> Simple TermQuery does not work.
> If I try to use QueryParser , what analyzer should I use?
>
>
>
> Daniel Naber-10 wrote:
> >
> > On Montag, 14. April 2008, palexv wrote:
> >
> >> For example I need to search for "java de*" and recieve "java
> >> developers", "java development", "developed by java" etc.
> >
> > If your text is tokenized, this is not supported by QueryParser but you
> > can
> > create such queries using MultiPhraseQuery. If you don't tokenize a text
> > like "java development" at whitespace characters, it's just like a
> single
> > term for Lucene. A query like "java de*" should work then, just make
> sure
> > you don't tokenize the search query either.
> >
> > Regards
> >  Daniel
> >
> > --
> > http://www.danielnaber.de
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/Search-for-phrases-tp16678104p16695864.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_29277_17042802.1208266978633--

From java-user-return-33621-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 15 13:45:36 2008
Return-Path: <java-user-return-33621-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27165 invoked from network); 15 Apr 2008 13:45:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Apr 2008 13:45:36 -0000
Received: (qmail 3005 invoked by uid 500); 15 Apr 2008 13:45:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2980 invoked by uid 500); 15 Apr 2008 13:45:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2969 invoked by uid 99); 15 Apr 2008 13:45:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Apr 2008 06:45:28 -0700
X-ASF-Spam-Status: No, hits=3.5 required=10.0
	tests=HTML_IMAGE_ONLY_28,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.191 as permitted sender)
Received: from [209.85.128.191] (HELO fk-out-0910.google.com) (209.85.128.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Apr 2008 13:44:46 +0000
Received: by fk-out-0910.google.com with SMTP id 19so2214528fkr.5
        for <java-user@lucene.apache.org>; Tue, 15 Apr 2008 06:44:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=xNE+nFRUBdKH0leiD3l//ZGwncdeeO9Zer19gGHze6o=;
        b=wXoCevA7y9LZUuiaYhpt1g/cKiUq2QBqwKkldrzfmdEmtK6ZSXP8xvC3zzOoAh7M/XmIgJxhIRbXCkac5Id1fDWTLisGJwv2PtO4Fz4UbWO3HXnfGS7HzQAcQKfTcqIqeVIuASSWJgAXxk+E8E26QkDr9ETrNiKEh4gXZ/jsm8I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=hFEHApdPJFLY6SBKhsQeU4hzk4CbjVE7aN2maG946m8gI8hR+ureAD5kNhr0XDXO9CMLlilYfzRznLVTRQWDmFaEnHv2b6kxJ2xk+vFvq9wNdB+Z9vQAXv1Mzne/trGNnv5FjWNbwM5nTP78eoAwxfXT+sBmT+PfkHxhk7XBr/M=
Received: by 10.82.175.17 with SMTP id x17mr4782273bue.40.1208267094272;
        Tue, 15 Apr 2008 06:44:54 -0700 (PDT)
Received: by 10.82.191.6 with HTTP; Tue, 15 Apr 2008 06:44:54 -0700 (PDT)
Message-ID: <359a92830804150644l46b2a0a1k4a11225ac7958dd9@mail.gmail.com>
Date: Tue, 15 Apr 2008 09:44:54 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Max length
In-Reply-To: <E2BB1A5AB9C4BD409420F3C9E9A6914416E003@EMAILLUXSV33.ep.parl.union.eu>
MIME-Version: 1.0
Content-Type: multipart/related; 
	boundary="----=_Part_29290_27367710.1208267094262"
References: <E2BB1A5AB9C4BD409420F3C9E9A6914416E003@EMAILLUXSV33.ep.parl.union.eu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_29290_27367710.1208267094262
Content-Type: multipart/alternative; 
	boundary="----=_Part_29291_19462755.1208267094262"

------=_Part_29291_19462755.1208267094262
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

The default is 10,000 characters, but, as Grant says, you can change it with
IndexWriter.setMaxFieldLength().

Erick

On Tue, Apr 15, 2008 at 6:31 AM, WATHELET Thomas
<thomas.wathelet@europarl.europa.eu> wrote:

>  Hi my question is very simple,
> Is there a size limitation for the text to index
> Becaus I try to index a long document and the content of this one is
> stored correctly into the index but it seems that the indexation stopp at
> the middle of the document.I can't find any word located after the middle.
> Any body can help me thank's
>
>
>  *Thomas WATHELET*
> Development Team
> Tel.: (+352) 4300 24752
> E-mail: thomas.wathelet@europarl.europa.eu
>
>
>
>

------=_Part_29291_19462755.1208267094262
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

The default is 10,000 characters, but, as Grant says, you can change it with<br>IndexWriter.setMaxFieldLength().<br><br>Erick<br><br><div class="gmail_quote">On Tue, Apr 15, 2008 at 6:31 AM, WATHELET Thomas &lt;thomas.wathelet@europarl.europa.eu&gt; wrote:<br>
<blockquote class="gmail_quote" style="border-left: 1px solid rgb(204, 204, 204); margin: 0pt 0pt 0pt 0.8ex; padding-left: 1ex;">



<div>
<div><font size="2" face="Arial"><span>Hi my question is 
very simple,</span></font></div>
<div><font size="2" face="Arial"><span>Is there a size 
limitation for the text to index</span></font></div>
<div><font size="2" face="Arial"><span>Becaus I try to 
index a long document and the content of this one is stored correctly into the 
index but it seems that the indexation stopp at the middle of the document.I 
can&#39;t find any word located after the middle.</span></font></div>
<div><font size="2" face="Arial"><span>Any body can help me 
thank&#39;s</span></font></div>
<div><font size="2" face="Arial"></font>&nbsp;</div>
<div>
<div align="left">
<table style="border: medium none ; border-collapse: collapse;" align="left" border="1" cellpadding="0" cellspacing="0">
  <tbody>
  <tr style="height: 47.95pt;">
    <td style="border-style: none solid none none; border-color: -moz-use-text-color gray -moz-use-text-color -moz-use-text-color; border-width: medium 1pt medium medium; padding: 0cm 5.4pt; width: 77.4pt; height: 47.95pt;" width="103">
<span lang="FR"></span>
      <p style="text-align: right;" align="right"><span style="font-size: 4pt;" lang="FR"><img alt="" src="cid:288182510@15042008-1064" align="baseline" border="0" hspace="0"></span></p></td>
    <td style="border: medium none ; padding: 0cm 5.4pt; width: 240.7pt; height: 47.95pt;" valign="top" width="321">
      <p><b><span style="font-size: 10pt; font-family: Arial;">Thomas 
      WATHELET</span></b><span style="font-size: 10pt; font-family: Arial;"><br></span><span style="font-size: 10pt; font-family: Arial;">Development 
      Team</span><span style="font-size: 10pt; font-family: Arial;" lang="BG"><br></span><span style="font-size: 10pt; font-family: Arial;">Tel.: 
      (+352) 4300 24752&nbsp;&nbsp;&nbsp; <br></span><span style="font-size: 10pt; font-family: Arial;">E-mail: 
      </span><span style="font-size: 10pt; color: green; font-family: Arial;" lang="FR"><a title="mailto:petri.lavander@europarl.europa.eu" href="mailto:thomas.wathelet@europarl.europa.eu" target="_blank"><span lang="EN-GB">thomas.wathelet@europarl.europa.eu</span></a></span><span style="font-size: 10pt; font-family: Arial;"></span></p>
</td></tr></tbody></table></div>
<p>&nbsp;</p></div>
<div>&nbsp;</div></div>
</blockquote></div><br>

------=_Part_29291_19462755.1208267094262--

------=_Part_29290_27367710.1208267094262
Content-Type: image/bmp; name=ittrad.bmp
Content-Transfer-Encoding: base64
Content-ID: <288182510@15042008-1064>
X-Attachment-Id: 0.1

Qk32IQAAAAAAADYAAAAoAAAAKAAAAEgAAAABABgAAAAAAMAhAADEDgAAxA4AAAAAAAAAAAAA////
////////mZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZ
mZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZ////////
////////mZmZmZmZaKSKI7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1
I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1aKSK
mZmZmZmZ////////mZmZI7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1
I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1
I7R1I7R1I7R1mZmZ////mZmZaKSKI7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1
I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1
I7R1I7R1I7R1I7R1I7R1aKSKmZmZmZmZI7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1
I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1
I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1mZmZmZmZTMKPyOzcyOzcyOzckdm6P72GI7R1I7R1hNWy
yOzcyOzcyOzcdtCpI7R1I7R1I7R1nt7Cnt7CI7R1I7R1nt7Cnt7CI7R1aMygyOzcaMygyOzcMbl+
I7R1aMygyOzcMbl+yOzcyOzcyOzcnt7CWseYI7R1mZmZmZmZWseY////hNWyWseYyOzc8fr2Mbl+
nt7C8fr2dtCpWseY1vHlyOzcI7R1I7R1I7R1yOzcyOzcI7R1I7R1yOzcyOzcI7R1yOzcuufUMbl+
////rOPLkdm61vHl1vHlI7R1////rOPLWseYnt7C////WseYmZmZmZmZWseY////WseYI7R1Mbl+
////hNWy////kdm6I7R1nt7C8fr2yOzcI7R1I7R1I7R1yOzcyOzcI7R1I7R1yOzc8fr21vHl////
WseYI7R1uufU4/bukdm6////hNWyI7R1////kdm6I7R1I7R11vHluufUmZmZmZmZWseY////WseY
I7R1Mbl+////hNWy4/bunt7CI7R1TMKPWseYTMKPI7R1I7R1I7R1yOzcyOzcI7R1I7R1yOzc1vHl
WseYuufUyOzcI7R1dtCp8fr2aMyg////P72GI7R1////kdm6I7R1I7R11vHluufUmZmZmZmZWseY
////hNWyWseYuufU8fr2P72GdtCp////kdm6WseYWseYP72GI7R1P72GWseY1vHl1vHlWseYP72G
yOzc1vHlWseYuufU4/buI7R1Mbl+8fr2yOzcuufUI7R1I7R1////rOPLWseYkdm6////aMygmZmZ
mZmZTMKPyOzcyOzcyOzcrOPLP72GI7R1I7R1WseYrOPLyOzcyOzcWseYI7R1dtCpyOzcyOzcyOzc
yOzcdtCpnt7CyOzcyOzcrOPLTMKPI7R1I7R1kdm6yOzcaMygI7R1I7R1yOzcyOzcyOzcuufUWseY
I7R1mZmZmZmZI7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1
I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1
I7R1I7R1I7R1mZmZmZmZI7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1
I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1
I7R1I7R1I7R1I7R1I7R1mZmZmZmZI7R1I7R1P72GWseYWseYWseYTMKPI7R1I7R1I7R1I7R1I7R1
I7R1I7R1TMKPWseYWseYWseYP72GI7R1I7R1I7R1I7R1I7R1I7R1I7R1HL6WF8WvFce3Fce3Fce3
Fce3F8WvHruOI7R1I7R1I7R1I7R1mZmZmZmZI7R1I7R1kdm6////////////yOzcI7R1I7R1I7R1
I7R1I7R1I7R1I7R1yOzc////////////kdm6I7R1I7R1I7R1I7R1I7R1I7R1CdnyB9v6B9v6B9v6
B9v6B9v6B9v6B9v6B9v6C9bpHL6WI7R1I7R1mZmZmZmZI7R1I7R1kdm6////////////yOzcI7R1
I7R1I7R1I7R1I7R1I7R1I7R1yOzc////////////kdm6I7R1I7R1I7R1I7R1I7R1I7R1DNThB9v6
B9v6B9v6B9v6B9v6B9v6B9v6B9v6B9v6B9v6GsCfI7R1mZmZmZmZI7R1I7R1kdm6////////////
yOzcI7R1I7R1I7R1I7R1I7R1I7R1I7R1yOzc////////////kdm6I7R1I7R1I7R1I7R1I7R1I7R1
F8WvDNThFce3HL6WHL6WHL6WGsCfDNThB9v6B9v6B9v6C9bpI7R1mZmZmZmZI7R1I7R1kdm6////
////////yOzcI7R1I7R1I7R1I7R1I7R1I7R1I7R1yOzc////////////kdm6I7R1I7R1I7R1I7R1
I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1HL6WB9v6B9v6B9v6B9v6I7R1mZmZmZmZI7R1I7R1
kdm6////////////yOzcI7R1I7R1I7R1I7R1I7R1I7R1I7R1yOzc////////////kdm6I7R1I7R1
I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1HL6WDNThB9v6B9v6B9v6B9v6I7R1mZmZmZmZ
I7R1I7R1kdm6////////////yOzcI7R1I7R1I7R1I7R1I7R1I7R1I7R1yOzc////////////kdm6
I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1HL6WEszIC9bpB9v6B9v6B9v6B9v6B9v6E8rAI7R1
mZmZmZmZI7R1I7R1kdm6////////////yOzcI7R1I7R1I7R1I7R1I7R1I7R1I7R1yOzc////////
////kdm6I7R1I7R1I7R1I7R1I7R1I7R1I7R1HruODNThB9v6B9v6B9v6B9v6B9v6B9v6B9v6EszI
IbZ9I7R1mZmZmZmZI7R1I7R1kdm6////////////yOzcI7R1I7R1I7R1I7R1I7R1I7R1I7R1yOzc
////////////kdm6I7R1I7R1I7R1I7R1I7R1I7R1HruOB9v6B9v6B9v6B9v6B9v6B9v6CdnyEszI
HL6WI7R1I7R1I7R1mZmZmZmZI7R1I7R1kdm6////////////yOzcI7R1I7R1I7R1I7R1I7R1I7R1
I7R1yOzc////////////kdm6I7R1I7R1I7R1I7R1I7R1I7R1EM/QB9v6B9v6B9v6B9v6EszIGsCf
I7R1I7R1I7R1I7R1I7R1I7R1mZmZmZmZI7R1I7R1kdm6////////////yOzcI7R1I7R1I7R1I7R1
I7R1I7R1I7R1yOzc////////////kdm6I7R1I7R1I7R1I7R1I7R1I7R1DtHZB9v6B9v6B9v6Fce3
I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1mZmZmZmZI7R1I7R1kdm6////////////yOzcI7R1I7R1
WseYWseYWseYWseYWseY1vHl////////////rOPLWseYWseYWseYWseYTMKPI7R1EM/QB9v6B9v6
B9v6DNThGsCfIbZ9H7mGHL6WFce3Fce3I7R1I7R1mZmZmZmZI7R1I7R1kdm6////////////yOzc
I7R1I7R1////////////////////////////////////////////////////////yOzcI7R1HruO
CdnyB9v6B9v6B9v6B9v6B9v6B9v6B9v6B9v6CdnyIbZ9I7R1mZmZmZmZI7R1I7R1kdm6////////
////yOzcI7R1I7R1////////////////////////////////////////////////////////yOzc
I7R1I7R1HruODtHZB9v6B9v6B9v6B9v6B9v6B9v6B9v6B9v6GMOnI7R1mZmZmZmZI7R1I7R1P72G
WseYWseYWseYTMKPI7R1I7R1WseYWseYWseYWseYWseYWseYWseYWseYWseYWseYWseYWseYWseY
WseYTMKPI7R1I7R1I7R1I7R1HruOF8WvFce3Fce3Fce3Fce3F8WvHruOI7R1I7R1mZmZmZmZI7R1
I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1
I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1mZmZ
mZmZI7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1
I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1
I7R1mZmZmZmZI7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1
I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1
I7R1I7R1I7R1mZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZ
mZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZ
mZmZmZmZmZmZmZmZmZmZmZmZmZmZ////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////mZmZmZmZ////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////mZmZmZmZ////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////mZmZmZmZ////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////mZmZmZmZ////////////////
/////////////////////////////////////f39////////////////////////////////////
////////////////////////////////////////////////////////////mZmZmZmZ////////
////////////////////////////////////2dnZtbW17+/v+vr6////////////////////////
////////////////////////////////////////////////////////////////////mZmZmZmZ
////////////////////////////////////////zs7OPT09ERERbGxs+vr6+Pj4////////////
////9fv5ite1WseYyu3e////////////////////////////////////////////////////////
mZmZmZmZ////////////////////////////////////qqqqDAwMAAAAAAAAAAAAaWlp+fn59vb2
////////9fv5ite1JrV3I7R1SMGMyu3e////////////////////////////////////////////
////////mZmZmZmZ////////////////////////////////qKioDQ0NAAAAAAAAAAAAAAAAAAAA
a2tr6+vr+vr68Pr2ide1I7R1I7R1I7R1I7R1SMGMyu3e/P79////////////////////////////
////////////////mZmZmZmZ////////////////////////////39/fHh4eAAAAAAAAAAAAAAAA
AAAAAAAACQkJxsbG/f7+mt3AI7R1I7R1I7R1I7R1I7R1I7R1TsOQ5/fw////////////////////
////////////////////////mZmZmZmZ////////////////////////////ysrKERERAAAAAAAA
AAAAAAAAAAAAAAAAKCgo6urq////nt7CI7R1I7R1I7R1I7R1I7R1I7R1ScGN6ffx+/78////////
////////////////////////////////mZmZmZmZ////////////////////2dnZtbW16enpl5eX
CQkJAAAAAAAAAAAAAAAAGRkZwsnGot/EuOfT9/z6f9OvI7R1I7R1I7R1I7R1Q7+Jz+/hxOvaide1
zu7g////////////////////////////////////mZmZmZmZ////////////////zs7OPT09ERER
bGxs+fn5m5ubBwcHAAAAAAAAGBgYxcnHite1JrV3NbqAtOXQ////gtSxI7R1I7R1RL+K0/Djz+/h
Rb+KI7R1S8KOze7g////////////////////////////////mZmZmZmZ////////////0NDQNzc3
AAAAAAAAAAAAa2tr+Pj4k5OTGhoaLS0tusO/i9i2J7V4I7R1I7R1M7l/s+XP9/z6jdi4Zsufyezd
zO7fRsCLI7R1I7R1I7R1TMKOzu7g////////////////////////////mZmZmZmZ////////z8/P
Ojo6AAAAAAAAAAAAAAAAAAAAbm5u5+fn0NDQ5OTkftOuKrZ5I7R1I7R1I7R1I7R1Mrl+ruPM+f37
6/jzzO7fScGNI7R1I7R1I7R1I7R1I7R1UMOR0/Dj////////////////////////mZmZmZmZ////
////enp6AAAAAAAAAAAAAAAAAAAAAAAADQ0NxsbG////////OLuCI7R1I7R1I7R1I7R1I7R1I7R1
acyh/P79////ruPMKLZ4I7R1I7R1I7R1I7R1I7R1K7d6werY////////////////////////mZmZ
mZmZ////////ra2tDw8PAAAAAAAAAAAAAAAAAAAAVlZW39/f1tbW8vLyl9y+Lbh7I7R1I7R1I7R1
I7R1Pr2GvunWrK2tioqK3ufjedCqJbV2I7R1I7R1I7R1JrV3j9m54fXsoN/D0e/i////////////
////mZmZmZmZ////////+fn5oaGhERERAAAAAAAAAAAAWlpa5OTkfX19GBgYXl5e4OXjot/FLbh7
I7R1I7R1PL2FvenWjI2NCAgIAQEBQUFB6/Pvds6oJrV3I7R1JrV3j9m54/XtY8qdJ7V3Lbh7o9/G
////////////mZmZmZmZ////////////+/v7pKSkFhYWAwMDVlZW3d3dfX19BQUFAAAAAgICWlpa
5Oblot/FNLqARb+KvejVi4uLBgYGAAAAAAAAAAAAPz8/7fXye8+rP72Gj9m54PTsYsmcI7R1I7R1
I7R1KrZ5ot/F////////mZmZmZmZ////////////////+vr6tLS0lZWV19fXd3d3AQEBAAAAAAAA
AAAAAAAAWlpa5ejnzO7f1vDkj4+PBwcHAAAAAAAAAAAAAAAAAAAAbm5u4unm3fHo4/XtYMmbI7R1
I7R1I7R1I7R1I7R1KrZ5yu3e/P79mZmZmZmZ////////////////////////////qqqqBwcHAAAA
AAAAAAAAAAAAAAAAAAAApaWl////8fHxKCgoAAAAAAAAAAAAAAAAAAAAAAAADQ0NxsbG////0fDi
JrV3I7R1I7R1I7R1I7R1I7R1I7R1TsOQ5/fwmZmZmZmZ////////////////////////////u7u7
Hh4eAAAAAAAAAAAAAAAAAAAAJiYmy8vL6enp8PDwa2trAQEBAAAAAAAAAAAAAAAAAAAAVlZW1OTd
1fHk9fv5WMaWI7R1I7R1I7R1I7R1I7R1I7R1ScGN6/jzmZmZmZmZ////////////////////////
////////n5+fFhYWAAAAAAAAAAAAIiIixsbGu7u7S0tLdXV16+vrYmJiAQEBAAAAAAAAAAAAKSkp
zuXbYsmcQ7+JruPM8vv3SsGNI7R1I7R1I7R1I7R1Pb2F1/Hm+v38mZmZmZmZ////////////////
////////////////////oqKiGRkZAAAAIyMjxMTExcXFICAgAAAAAAAAampq9vb2YmJiAQEBAAAA
KCgoxtzTWceXI7R1I7R1L7h9rOLL+v38TcKPI7R1I7R1Pr2G2/Lo/P79////mZmZmZmZ////////
////////////////////////////////qqqqampqwcHBwsLCIyMjAAAAAAAAAAAAAAAAa2tr5+fn
d3d3WFhYwNfNXsiaI7R1I7R1I7R1I7R1L7h9q+LL8Pr2bs6kXsia1/Hm/f7+////////mZmZmZmZ
////////////////////////////////////////////////5+fnKSkpAAAAAAAAAAAAAAAAAAAA
AAAAg4OD////////f9OvI7R1I7R1I7R1I7R1I7R1I7R1ObuD2fLn+/788vv3/v/+////////////
mZmZmZmZ////////////////////////////////////////////////19fXFxcXAAAAAAAAAAAA
AAAAAAAAAQEBi4uL////////q+LLLrh8I7R1I7R1I7R1I7R1I7R1W8eY5vbv////////////////
////////mZmZmZmZ////////////////////////////////////////////////+vr6oqKiExMT
AAAAAAAAAAAAAgICd3d37u7u////////+v38o+DFLrh8I7R1I7R1I7R1VcWU2fLn////////////
////////////////mZmZmZmZ////////////////////////////////////////////////////
/f39oaGhFhYWAAAAAgICd3d38/Pz////////////////+/78o+DFLrh8I7R1VcWU2/Lo////////
////////////////////////mZmZmZmZ////////////////////////////////////////////
////////////+/v7n5+fMjIyd3d39PT0////////////////////////+/78rePMide12/Lo////
////////////////////////////////mZmZmZmZ////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////mZmZmZmZ////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////mZmZmZmZ////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////mZmZmZmZ////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////mZmZmZmZ////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////mZmZ
mZmZ////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////mZmZmZmZw8PD////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////w8PDmZmZ////mZmZ////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////mZmZ////////mZmZmZmZw8PD////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////w8PDmZmZmZmZ////////////////mZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZ
mZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZ
mZmZmZmZmZmZmZmZmZmZmZmZmZmZ////////////
------=_Part_29290_27367710.1208267094262--

From java-user-return-33622-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 15 14:28:02 2008
Return-Path: <java-user-return-33622-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55855 invoked from network); 15 Apr 2008 14:28:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Apr 2008 14:28:02 -0000
Received: (qmail 84397 invoked by uid 500); 15 Apr 2008 14:27:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84369 invoked by uid 500); 15 Apr 2008 14:27:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84358 invoked by uid 99); 15 Apr 2008 14:27:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Apr 2008 07:27:55 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of aweber@comcast.net designates 76.96.62.40 as permitted sender)
Received: from [76.96.62.40] (HELO QMTA04.westchester.pa.mail.comcast.net) (76.96.62.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Apr 2008 14:27:01 +0000
Received: from OMTA08.westchester.pa.mail.comcast.net ([76.96.62.12])
	by QMTA04.westchester.pa.mail.comcast.net with comcast
	id DqKj1Z0070Fqzac5400p00; Tue, 15 Apr 2008 14:25:34 +0000
Received: from silvercreek ([71.187.44.111])
	by OMTA08.westchester.pa.mail.comcast.net with comcast
	id DqSW1Z00F2PvBoP3U00000; Tue, 15 Apr 2008 14:26:39 +0000
X-Authority-Analysis: v=1.0 c=1 a=rITDv7nW5hcA:10 a=203iLApksY5bvB_sI7oA:9
 a=0SNEcAcPgYUTjgtX3jMMFrExPa0A:4 a=CWfAmLVWKswA:10 a=htYFyk3oy6vqXysUaSsA:9
 a=7guX_S9BYvT-O4L0y3IA:7 a=cDo1LugF2hklrjMYvjU87pzncPQA:4 a=AfD3MYMu9mQA:10
Message-ID: <019001c89f04$b7edce00$d101a8c0@documentum.com>
Reply-To: "AJ Weber" <aweber@comcast.net>
From: "AJ Weber" <aweber@comcast.net>
To: <java-user@lucene.apache.org>
Subject: replace field in doc?
Date: Tue, 15 Apr 2008 10:26:30 -0400
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_018D_01C89EE3.2BAEA610"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_018D_01C89EE3.2BAEA610
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

I'm curious how people are building the "all" Field (for searching "all =
of the terms at once").

I understand using store=3DNO, Index=3DTokenized is generally the way to =
add the field, but what if I need to basically use multiple classes to =
build my Document before adding it to the index (keeping things modular =
and reusable)?

If one class adds the Field (i.e. doc.add("all", sCurrentString, =
Field.Store.NO, Field.Index.TOKENIZED) ), then I pass the document =
("doc" in this example) to another class, how do I basically concat any =
additional field-values/strings to the existing text-Field?  This is all =
before the Document is added to the index in the first-place.

I'm concerned that doing a doc.get("all") and then adding it back to the =
doc with the additional string will result in two fields of the name =
"all" (I seem to have read this is the functionality somewhere)???

Thanks in advance!
-AJ
------=_NextPart_000_018D_01C89EE3.2BAEA610--


From java-user-return-33623-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 15 14:51:01 2008
Return-Path: <java-user-return-33623-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74575 invoked from network); 15 Apr 2008 14:51:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Apr 2008 14:51:00 -0000
Received: (qmail 26330 invoked by uid 500); 15 Apr 2008 14:50:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26302 invoked by uid 500); 15 Apr 2008 14:50:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26291 invoked by uid 99); 15 Apr 2008 14:50:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Apr 2008 07:50:54 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [217.147.24.8] (HELO devel.uw.ru) (217.147.24.8)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Apr 2008 14:50:02 +0000
Received: from [192.168.1.103] (router2.hsol.uw.ru [217.147.24.3])
	by devel.uw.ru (8.13.8/8.13.8) with ESMTP id m3FEoV3M001029
	for <java-user@lucene.apache.org>; Tue, 15 Apr 2008 18:50:31 +0400
From: =?utf-8?b?0JjQu9GM0Y8g0JrQsNC30L3QsNGH0LXQtdCy?= <ilyak@office.uw.ru>
Organization: UlterWest
To: java-user@lucene.apache.org
Subject: Re: Implementing CMS search function using Lucene
Date: Tue, 15 Apr 2008 18:52:20 +0400
User-Agent: KMail/1.9.9
References: <200804031624.16155.ilyak@office.uw.ru> <1E9948FD-FB52-4BE5-AFB8-D56D01EE9E85@apache.org>
In-Reply-To: <1E9948FD-FB52-4BE5-AFB8-D56D01EE9E85@apache.org>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200804151852.20820.ilyak@office.uw.ru>
X-Virus-Checked: Checked by ClamAV on apache.org

=D0=92 =D1=81=D0=BE=D0=BE=D0=B1=D1=89=D0=B5=D0=BD=D0=B8=D0=B8 =D0=BE=D1=82 =
Sunday 13 April 2008 14:20:01 Grant Ingersoll =D0=BD=D0=B0=D0=BF=D0=B8=D1=
=81=D0=B0=D0=BB(=D0=B0):

Thanks for your reply!

> > I don't want it to work more than half second on
> > reasonable sized index. Also, I don't want to hard-code exact list
> > of fields,
> > I might add them as I develop the system. Is this doable, would that
> > work? Or
> > I'll have to stuff all text content from object into one blob-field
> > and query
> > that? Which way is more reasonable?
> I'd probably do both, then you can handle generic queries as well as
> field specific ones.
There wouldn't be field specific queries, but I plan to have different boos=
ts.

> > - Is there something to support Russian morphology (it's all like
> > "the last n
> > letters of a word might change, we should match all forms") for either
> > indexer or searcher?
>
> Check contrib/analyzers, I see some Russian analyzers in there, but I
> can't speak to the quality.
Thank you, I'll look there.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33624-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 15 14:54:16 2008
Return-Path: <java-user-return-33624-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76614 invoked from network); 15 Apr 2008 14:54:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Apr 2008 14:54:16 -0000
Received: (qmail 30787 invoked by uid 500); 15 Apr 2008 14:54:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30749 invoked by uid 500); 15 Apr 2008 14:54:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30738 invoked by uid 99); 15 Apr 2008 14:54:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Apr 2008 07:54:10 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.68.5.15] (HELO relay01.pair.com) (209.68.5.15)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 15 Apr 2008 14:53:19 +0000
Received: (qmail 19587 invoked from network); 15 Apr 2008 14:53:37 -0000
Received: from unknown (HELO ?192.168.15.101?) (unknown)
  by unknown with SMTP; 15 Apr 2008 14:53:37 -0000
X-pair-Authenticated: 68.84.138.127
Subject: Which will be faster?
From: darren <darren@ontrenet.com>
To: java-user@lucene.apache.org
Content-Type: text/plain
Date: Tue, 15 Apr 2008 10:51:45 -0400
Message-Id: <1208271105.7159.8.camel@tetsiaga>
Mime-Version: 1.0
X-Mailer: Evolution 2.12.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
  Pardon the noob question. But which approach is going to be faster
over extremely large document sets. A or B?

A) Multiple field values, Stored.NO,TOKENIZED.
word: one
word: two
word: three

B) Single field value, Stored.NO,TOKENIZED
word: one two three

Thanks for the tip.
Darren


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33625-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 15 16:10:45 2008
Return-Path: <java-user-return-33625-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62655 invoked from network); 15 Apr 2008 16:10:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Apr 2008 16:10:45 -0000
Received: (qmail 68541 invoked by uid 500); 15 Apr 2008 16:10:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68514 invoked by uid 500); 15 Apr 2008 16:10:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68495 invoked by uid 99); 15 Apr 2008 16:10:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Apr 2008 09:10:35 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [216.239.58.188] (HELO gv-out-0910.google.com) (216.239.58.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Apr 2008 16:09:51 +0000
Received: by gv-out-0910.google.com with SMTP id n8so55257gve.23
        for <java-user@lucene.apache.org>; Tue, 15 Apr 2008 09:09:57 -0700 (PDT)
Received: by 10.151.154.20 with SMTP id g20mr8019470ybo.62.1208275797035;
        Tue, 15 Apr 2008 09:09:57 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 52sm7434067hsf.7.2008.04.15.09.09.55
        (version=TLSv1/SSLv3 cipher=OTHER);
        Tue, 15 Apr 2008 09:09:56 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <1208271105.7159.8.camel@tetsiaga>
References: <1208271105.7159.8.camel@tetsiaga>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <D1FBEA79-347B-40E0-93C6-5D27326D06EE@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Which will be faster?
Date: Tue, 15 Apr 2008 12:10:21 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


Most likely B will be somewhat faster.

There is some small overhead to each field instance.

Mike

darren wrote:
> Hi,
>   Pardon the noob question. But which approach is going to be faster
> over extremely large document sets. A or B?
>
> A) Multiple field values, Stored.NO,TOKENIZED.
> word: one
> word: two
> word: three
>
> B) Single field value, Stored.NO,TOKENIZED
> word: one two three
>
> Thanks for the tip.
> Darren
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33626-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 15 16:26:02 2008
Return-Path: <java-user-return-33626-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81297 invoked from network); 15 Apr 2008 16:26:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Apr 2008 16:26:02 -0000
Received: (qmail 4751 invoked by uid 500); 15 Apr 2008 16:25:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4568 invoked by uid 500); 15 Apr 2008 16:25:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4557 invoked by uid 99); 15 Apr 2008 16:25:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Apr 2008 09:25:55 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of glen.newton@gmail.com designates 64.233.184.234 as permitted sender)
Received: from [64.233.184.234] (HELO wr-out-0506.google.com) (64.233.184.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Apr 2008 16:25:13 +0000
Received: by wr-out-0506.google.com with SMTP id c30so1172570wra.14
        for <java-user@lucene.apache.org>; Tue, 15 Apr 2008 09:25:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        bh=ttAxtUwxJB1EwjM1cSDurAKquLibCB0UU2EVDgQOWlQ=;
        b=btZZAD7SgjZdbE5PcgQVsh07QflvNM4xS0w8li/E49j0XkpQRkz01ofHp1PCybD+kv1VCR9/VXP9dXCZMQw0N1ns8D6c1s5HstVwrzugGV5Wd6YdNSwcoZV8eYO3YOvEej4fGs57+E4bt53jFLVVwwoqnoiYa8dBmwN63pL2KRY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=tIJaRQpmw8WoIhjnaQkUsPWNFBG+5Rxdk+fxfiTooXBlSlgMokENQf0GUQ/0dkwbQ4S7543wEIN43eug1VKuJRybAc0lmR4EpY6Ds/1IIWoNuPPwVHJNFljVYqknnggdi0ASAXoh957J/x7gWXq/qkAiuC2VnKqvYHwKN+MpkWA=
Received: by 10.140.144.4 with SMTP id r4mr4428375rvd.15.1208276723481;
        Tue, 15 Apr 2008 09:25:23 -0700 (PDT)
Received: by 10.140.148.19 with HTTP; Tue, 15 Apr 2008 09:25:23 -0700 (PDT)
Message-ID: <5e76f3840804150925l7594115s7c4c25047d4a9514@mail.gmail.com>
Date: Tue, 15 Apr 2008 12:25:23 -0400
From: "Glen Newton" <glen.newton@gmail.com>
To: java-user@lucene.apache.org
Subject: Lucene performance: benchmarktemplate.xml
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

<benchmark>
  <ul>
  <p>
  <b>Hardware Environment</b><br/>
  <li><i>Dedicated machine for indexing</i>: yes</li>
  <li><i>CPU</i>: Dual processor dual core Xeon CPU 3.00GHz;
hyperthreading ON for 8 virtual cores</li>
  <li><i>RAM</i>: 8GB</li>
  <li><i>Drive configuration</i>: Dell EMC AX150 storage array fibre
channel</li>
  </p>
  <p>
  <b>Software environment</b><br/>
  <li><i>Lucene Version</i>: 2.3.1</li>
  <li><i>Java Version</i>:  Java(TM) SE Runtime Environment (build
1.6.0_02-b05)</li>
  <li><i>Java VM</i>: Java HotSpot(TM) 64-Bit Server VM (build
1.6.0_02-b05, mixed mode)</li>
  <li><i>OS Version</i>: Linux OpenSUSE 10.2 (64-bit X86-64)</li>
  <li><i>Location of index</i>: Filesystem, on attached storage</li>
  </p>
  <p>
  <b>Lucene indexing variables</b><br/>
  <li><i>Number of source documents</i>: 6,404,464</li>
  <li><i>Total filesize of source documents</i>: 141GB; Note that this
is only the full-text: the metadata (title, author(s), abstract,
keywords, journal name) are in addition to this</li>
  <li><i>Average filesize of source documents</i>:
22KB + metadata (see above)</li>
  <li><i>Source documents storage location</i>: Where are the documents
being indexed located?
    Filesystem</li>
  <li><i>File type of source documents</i>: text (PDFs converted to
text then gzipped)</li>
  <li><i>Parser(s) used, if any</i>: None, but files GZIPed & had to
be un-gziped by Java application which also did indexing</li>
  <li><i>Analyzer(s) used</i>: StandardAnalyzer</li>
  <li><i>Number of fields per document</i>: 24</li>
  <li><i>Type of fields</i>: all text; 20 stored; 3 of indexed
tokenized with term vector (full-text [not stored], title, abstract);
10 stored with no parsing; </li>
  <li><i>Index persistence</i>: FSDirectory</li>
  <li><i>Index size</i>: 83GB</li>
  <li><i>Number of terms</i>: 143,298,010</li>
  </p>
  <p>
  <b>Figures</b><br/>
  <li><i>Time taken (in ms/s as an average of at least 3 indexing
runs)</i>: 20.5 hours</li>
  <li><i>Time taken / 1000 docs indexed</i>: 11.5 seconds </li>
  <li><i>Memory consumption</i>:  -Xms4000m  -Xmx6000m</li>
  <li><i>Query speed</i>: average time a query takes, type
    of queries (e.g. simple one-term query, phrase query),
    not measuring any overhead outside Lucene</li>
  </p>
  <p>
  <b>Notes</b><br/>
  <li><i>Notes</i>:
        <ul>
	  <li>
	    These are journal articles, so the additional fields besides the
full-text are bibliographic metadata, such as title, authors,
abstract, keywords, journal name, volume, issue, start page, year.
	  </li>
	  <li>Java command line directives: -XX:+AggressiveOpts
-XX:+ScavengeBeforeFullGC -XX:-UseParallelGC   -server  -Xms4000m
-Xmx6000m
	  </li>
	  <li>Highly multithreaded & pipelined architecture using
java.util.concurrent.ThreadPoolExecutor
	  </li>
	  <li>File system file reading and Un-gzip performed multithreaded
	  </li>
	  <li>Eight separate parallel IndexWriters are fed by the pipeline
(creation of Document objects occurs in parallel with 64 threads),
merged at end into single index. Each parallel index had slightly
different RAM_BUFFER_SIZE_MB (64, 67, 70, 73, 76, 79, 83, 85 MB
respectively), so that flushing wouldn't all happen at the same time.
	  </li>
	  <li>
	    Contact: glen DOT newton AT nrc-cnrc DOT gc DOT ca
	  </li>
	
	</ul>
</li>
  </p>
  </ul>
</benchmark>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33627-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 15 16:52:07 2008
Return-Path: <java-user-return-33627-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2253 invoked from network); 15 Apr 2008 16:52:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Apr 2008 16:52:07 -0000
Received: (qmail 50261 invoked by uid 500); 15 Apr 2008 16:52:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49500 invoked by uid 500); 15 Apr 2008 16:52:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49489 invoked by uid 99); 15 Apr 2008 16:52:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Apr 2008 09:52:00 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of glen.newton@gmail.com designates 209.85.198.248 as permitted sender)
Received: from [209.85.198.248] (HELO rv-out-0506.google.com) (209.85.198.248)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Apr 2008 16:51:18 +0000
Received: by rv-out-0506.google.com with SMTP id k29so1005912rvb.5
        for <java-user@lucene.apache.org>; Tue, 15 Apr 2008 09:51:30 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        bh=oZ2C5kJH2LXqEokpJDHUtmhtid7cJOxlOJohFVd4Xbk=;
        b=QLPhWwneeUin2PQAxWqSiOizTjnvPQMTPHNcfNLxbnUmZXykM3gQd4M10CGivhwm4xGXf8+tGDbzy2OrRI11xjdGlLisAiILmmPmvs7L05nnADtYmZi6YBscv/T8CdLtVuYosB2JaJv0UrugZIxfjvsUnMaX7xiNj0LR+fJlOBM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=EhpVrO5QSU0401Fm+ZWE9wwIyi+aqIiWL/Gu2VFguIWfZ2dbKBKy2Abm2e/wjPLJgZxyLU+2pox7GD2SaoH2rhbrZS8bEOVXX3knSS8sWi3FChypmthLcRKPAWY24rz83OgJsiax5YFMtJQU3+1+phPHDrb33v9CJNSzoDsCRqk=
Received: by 10.141.89.13 with SMTP id r13mr4432975rvl.177.1208278290945;
        Tue, 15 Apr 2008 09:51:30 -0700 (PDT)
Received: by 10.140.148.19 with HTTP; Tue, 15 Apr 2008 09:51:30 -0700 (PDT)
Message-ID: <5e76f3840804150951n4df5782dke95fab45e7473a3f@mail.gmail.com>
Date: Tue, 15 Apr 2008 12:51:30 -0400
From: "Glen Newton" <glen.newton@gmail.com>
To: java-user@lucene.apache.org
Subject: Lucene performance: benchmarktemplate.xml
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

<benchmark>
 <ul>
 <p>
 <b>Hardware Environment</b><br/>
 <li><i>Dedicated machine for indexing</i>: yes</li>
 <li><i>CPU</i>: Dual processor dual core Xeon CPU 3.00GHz;
hyperthreading ON for 8 virtual cores</li>
 <li><i>RAM</i>: 8GB</li>
 <li><i>Drive configuration</i>: Dell EMC AX150 storage array fibre
channel</li>
 </p>
 <p>
 <b>Software environment</b><br/>
 <li><i>Lucene Version</i>: 2.3.1</li>
 <li><i>Java Version</i>:  Java(TM) SE Runtime Environment (build
1.6.0_02-b05)</li>
 <li><i>Java VM</i>: Java HotSpot(TM) 64-Bit Server VM (build
1.6.0_02-b05, mixed mode)</li>
 <li><i>OS Version</i>: Linux OpenSUSE 10.2 (64-bit X86-64)</li>
 <li><i>Location of index</i>: Filesystem, on attached storage</li>
 </p>
 <p>
 <b>Lucene indexing variables</b><br/>
 <li><i>Number of source documents</i>: 6,404,464</li>
 <li><i>Total filesize of source documents</i>: 141GB; Note that this
is only the full-text: the metadata (title, author(s), abstract,
keywords, journal name) are in addition to this</li>
 <li><i>Average filesize of source documents</i>:
22KB + metadata (see above)</li>
 <li><i>Source documents storage location</i>: Where are the documents
being indexed located?
   Filesystem</li>
 <li><i>File type of source documents</i>: text (PDFs converted to
text then gzipped)</li>
 <li><i>Parser(s) used, if any</i>: None, but files GZIPed & had to
be un-gziped by Java application which also did indexing</li>
 <li><i>Analyzer(s) used</i>: StandardAnalyzer</li>
 <li><i>Number of fields per document</i>: 24</li>
 <li><i>Type of fields</i>: all text; 20 stored; 3 of indexed
tokenized with term vector (full-text [not stored], title, abstract);
10 stored with no parsing; </li>
 <li><i>Index persistence</i>: FSDirectory</li>
 <li><i>Index size</i>: 83GB</li>
 <li><i>Number of terms</i>: 143,298,010</li>
 </p>
 <p>
 <b>Figures</b><br/>
 <li><i>Time taken (in ms/s as an average of at least 3 indexing
runs)</i>: 20.5 hours</li>
 <li><i>Time taken / 1000 docs indexed</i>: 11.5 seconds </li>
 <li><i>Memory consumption</i>:  -Xms4000m  -Xmx6000m</li>
 <li><i>Query speed</i>: average time a query takes, type
   of queries (e.g. simple one-term query, phrase query),
   not measuring any overhead outside Lucene</li>
 </p>
 <p>
 <b>Notes</b><br/>
 <li><i>Notes</i>:
       <ul>
         <li>
           These are journal articles, so the additional fields besides the
full-text are bibliographic metadata, such as title, authors,
abstract, keywords, journal name, volume, issue, start page, year.
         </li>
         <li>Java command line directives: -XX:+AggressiveOpts
-XX:+ScavengeBeforeFullGC -XX:-UseParallelGC   -server  -Xms4000m
-Xmx6000m
         </li>
         <li>Highly multithreaded & pipelined architecture using
java.util.concurrent.ThreadPoolExecutor
         </li>
         <li>File system file reading and Un-gzip performed multithreaded
         </li>
         <li>Eight separate parallel IndexWriters are fed by the pipeline
(creation of Document objects occurs in parallel with 64 threads),
merged at end into single index. Each parallel index had slightly
different RAM_BUFFER_SIZE_MB (64, 67, 70, 73, 76, 79, 83, 85 MB
respectively), so that flushing wouldn't all happen at the same time.
         </li>
         <li>
           Contact: glen DOT newton AT nrc-cnrc DOT gc DOT ca
         </li>

       </ul>
</li>
 </p>
 </ul>
</benchmark>


-- 

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33628-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 15 17:12:54 2008
Return-Path: <java-user-return-33628-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38420 invoked from network); 15 Apr 2008 17:12:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Apr 2008 17:12:54 -0000
Received: (qmail 89796 invoked by uid 500); 15 Apr 2008 17:12:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89770 invoked by uid 500); 15 Apr 2008 17:12:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89759 invoked by uid 99); 15 Apr 2008 17:12:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Apr 2008 10:12:48 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.134.191 as permitted sender)
Received: from [209.85.134.191] (HELO mu-out-0910.google.com) (209.85.134.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Apr 2008 17:12:04 +0000
Received: by mu-out-0910.google.com with SMTP id w9so621841mue.5
        for <java-user@lucene.apache.org>; Tue, 15 Apr 2008 10:12:15 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=SmzinQ1fUMhbp0FNHLIvcZppnXIbb0cBJBamjdZVKug=;
        b=T/CNzIinpgZJBwdN/i9yjYgjBOb2Q/eoabNKn38Th1RB49P0+qggqc2xuao57KXwHrDKEYbv4BzIwGhumQIV0WdERYoLGD109f3O7p8SlpuFrcth7jUhxwkHwngsVPfa1Ppp+l/HJhZdvrFe43qBrpCEC8Fz5t7aLuYwmm4hxHY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=acvwsYK0g5twzv6zpB7OSfzpN5fgJ2jcfxm9VP5nimUVnNbJ5x68e3hJtC0zQxhi4RBCjdALdp4MgCpLUdYg9r7kwuqHfRM+FLIekulkuz+aEq6NJJxCoz/FX1J3/wPb4NSFkw4dO2mSrlQHX+EDztRDAJ4MymQR16lzFe6iCYw=
Received: by 10.82.181.8 with SMTP id d8mr11958858buf.17.1208279534279;
        Tue, 15 Apr 2008 10:12:14 -0700 (PDT)
Received: by 10.82.191.6 with HTTP; Tue, 15 Apr 2008 10:12:14 -0700 (PDT)
Message-ID: <359a92830804151012p7396c2ddl3e619f2914b760f2@mail.gmail.com>
Date: Tue, 15 Apr 2008 13:12:14 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org, "AJ Weber" <aweber@comcast.net>
Subject: Re: replace field in doc?
In-Reply-To: <019001c89f04$b7edce00$d101a8c0@documentum.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_30284_7093861.1208279534260"
References: <019001c89f04$b7edce00$d101a8c0@documentum.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_30284_7093861.1208279534260
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You can freely add the same field (with different text) to a doc. For
instance
Document doc = new Document();
doc.add("field", "this is the first");
doc.add("field", "starting the second ");
IndexWriter.addDocument(doc)

is functionally the same as


Document doc = new Document();
doc.add("field", "this is the first starting the second");
IndexWriter.addDocument(doc)


with one subtle difference. The first version will add
whatever is returned from Analyzer.getPositionIncrementGap
to the term position of the first token in adds 2-n. That is,
say getPositionIncrementGap returned 100. Then
the token "first" would have position 3 and "starting"
would have position 103 (I may be off by one on both these,
but you get the idea).

The default return is 1, so if you do nothing special, the two
calls will be identical.

Why would you return something other than 1 from
getPositionIncrementGap? Well, if you want to dance
fancy and, say, NOT span across the two lines above
for, say, SpanNear clauses, you could return a large
number that was bigger than the max allowable span.

Best
Erick

On Tue, Apr 15, 2008 at 10:26 AM, AJ Weber <aweber@comcast.net> wrote:

> I'm curious how people are building the "all" Field (for searching "all of
> the terms at once").
>
> I understand using store=NO, Index=Tokenized is generally the way to add
> the field, but what if I need to basically use multiple classes to build my
> Document before adding it to the index (keeping things modular and
> reusable)?
>
> If one class adds the Field (i.e. doc.add("all", sCurrentString,
> Field.Store.NO, Field.Index.TOKENIZED) ), then I pass the document ("doc"
> in this example) to another class, how do I basically concat any additional
> field-values/strings to the existing text-Field?  This is all before the
> Document is added to the index in the first-place.
>
> I'm concerned that doing a doc.get("all") and then adding it back to the
> doc with the additional string will result in two fields of the name "all"
> (I seem to have read this is the functionality somewhere)???
>
> Thanks in advance!
> -AJ

------=_Part_30284_7093861.1208279534260--

From java-user-return-33629-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 15 17:15:55 2008
Return-Path: <java-user-return-33629-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46215 invoked from network); 15 Apr 2008 17:15:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Apr 2008 17:15:55 -0000
Received: (qmail 96454 invoked by uid 500); 15 Apr 2008 17:15:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96427 invoked by uid 500); 15 Apr 2008 17:15:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96416 invoked by uid 99); 15 Apr 2008 17:15:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Apr 2008 10:15:49 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Apr 2008 17:15:06 +0000
Received: by nf-out-0910.google.com with SMTP id d3so554486nfc.15
        for <java-user@lucene.apache.org>; Tue, 15 Apr 2008 10:15:18 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=VaYOQUSoQNHlkAWLO5qMsVs0JrqpFs0K4BMk+j1egds=;
        b=sql/TTpGRZep6a7zIIBomuB3Qa15auqPB3f319viiZGYCmuRBnFbI7LxxRts+nwFBT5Y1M1UbXkzwV432dCFQbcCucNAMErJ418A2H3yKSFfoODJjLFTP7RzWnNke3vkL9dGNNRnGly2XvW76CSNxWBAQTKRerOC8dqrxW0UoyU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=n3hyvo7IJEgQZfGteswv4/8YhmemPf2MVopDgcnuzBhEbJQJers5kY87MMJVDD2iRJJ2lmcQ37YFxZrs0DP0lkZWoeTQcuw9XRd8lwfT80VVWqsM+J6QEABGvbRGH5e00n68mH1Om38Gz4l8PAZo02zw2N/pakb5DwmPzz3cP/o=
Received: by 10.82.146.10 with SMTP id t10mr5160098bud.87.1208279717997;
        Tue, 15 Apr 2008 10:15:17 -0700 (PDT)
Received: by 10.82.191.6 with HTTP; Tue, 15 Apr 2008 10:15:17 -0700 (PDT)
Message-ID: <359a92830804151015h7414304cn12447016e53189b0@mail.gmail.com>
Date: Tue, 15 Apr 2008 13:15:17 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Which will be faster?
In-Reply-To: <1208271105.7159.8.camel@tetsiaga>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_30296_33543213.1208279717998"
References: <1208271105.7159.8.camel@tetsiaga>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_30296_33543213.1208279717998
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I wouldn't worry about it too much, since there'll be overhead for you
building up the string in the first place as well. I suspect that the
time difference will be dwarfed by the indexing process. So I'd do what's
easiest first.......

Erick

On Tue, Apr 15, 2008 at 10:51 AM, darren <darren@ontrenet.com> wrote:

> Hi,
>  Pardon the noob question. But which approach is going to be faster
> over extremely large document sets. A or B?
>
> A) Multiple field values, Stored.NO,TOKENIZED.
> word: one
> word: two
> word: three
>
> B) Single field value, Stored.NO,TOKENIZED
> word: one two three
>
> Thanks for the tip.
> Darren
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_30296_33543213.1208279717998--

From java-user-return-33630-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 15 17:20:52 2008
Return-Path: <java-user-return-33630-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70173 invoked from network); 15 Apr 2008 17:20:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Apr 2008 17:20:51 -0000
Received: (qmail 6571 invoked by uid 500); 15 Apr 2008 17:20:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6545 invoked by uid 500); 15 Apr 2008 17:20:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6534 invoked by uid 99); 15 Apr 2008 17:20:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Apr 2008 10:20:46 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of glen.newton@gmail.com designates 209.85.198.242 as permitted sender)
Received: from [209.85.198.242] (HELO rv-out-0506.google.com) (209.85.198.242)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Apr 2008 17:20:04 +0000
Received: by rv-out-0506.google.com with SMTP id k29so1011692rvb.5
        for <java-user@lucene.apache.org>; Tue, 15 Apr 2008 10:20:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        bh=jwSFdnjKw27LSlFk3vdJT57dMMN3raM0errnNU3ERVQ=;
        b=FVqigxEbapU5NIcGW7eI3+8XFTKIXHTWXgQW23ISrRYbdf2ofoxQM+1UaLNjnrgMKrvfok45B6PBwpW0Hy0qusAMLuFXyFl7ElvSei429VSQFpjuzAD8OiNvNmssbO3iZo4myldpcWxw8FVnuKTD/wa6H3Bx0DAiuMY/rMNFGuY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=D0xCib5hF6YA286bxHWbKgncvm/0kTnsKQV5E6m7ejHJ0cL6/QwxfPw8MTy4OTGUgyVuD5mhcXRplcTM/ZK9baUQolKz0IdUIMaLJ7Rj1nO5CA5r0J9iMv+Wq+IbPf/T4tIK3ouxNDl7/aIm3dJTNf581bx6Cxr1M3vde8XG7x4=
Received: by 10.141.83.15 with SMTP id k15mr4468581rvl.120.1208280017478;
        Tue, 15 Apr 2008 10:20:17 -0700 (PDT)
Received: by 10.140.148.19 with HTTP; Tue, 15 Apr 2008 10:20:17 -0700 (PDT)
Message-ID: <5e76f3840804151020s55180019t301285c7f37fd17a@mail.gmail.com>
Date: Tue, 15 Apr 2008 13:20:17 -0400
From: "Glen Newton" <glen.newton@gmail.com>
To: java-user@lucene.apache.org
Subject: Test
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Test

-- 

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33631-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 15 17:28:34 2008
Return-Path: <java-user-return-33631-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74831 invoked from network); 15 Apr 2008 17:28:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Apr 2008 17:28:34 -0000
Received: (qmail 25045 invoked by uid 500); 15 Apr 2008 17:28:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25009 invoked by uid 500); 15 Apr 2008 17:28:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24998 invoked by uid 99); 15 Apr 2008 17:28:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Apr 2008 10:28:28 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.68.5.9] (HELO relay00.pair.com) (209.68.5.9)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 15 Apr 2008 17:27:46 +0000
Received: (qmail 34528 invoked from network); 15 Apr 2008 17:27:56 -0000
Received: from unknown (HELO GEMINI) (unknown)
  by unknown with SMTP; 15 Apr 2008 17:27:56 -0000
X-pair-Authenticated: 68.84.138.127
Message-ID: <001b01c89f1e$0aef4f70$8a01a8c0@GEMINI>
From: "Darren Govoni" <darren@ontrenet.com>
To: <java-user@lucene.apache.org>
References: <1208271105.7159.8.camel@tetsiaga> <359a92830804151015h7414304cn12447016e53189b0@mail.gmail.com>
Subject: Re: Which will be faster?
Date: Tue, 15 Apr 2008 13:27:55 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
X-Virus-Checked: Checked by ClamAV on apache.org

I guess I meant searching the index, size of index etc.

So they would search essentially the same?

Sorry that wasn't clear from my original email.

Darren

----- Original Message ----- 
From: "Erick Erickson" <erickerickson@gmail.com>
To: <java-user@lucene.apache.org>
Sent: Tuesday, April 15, 2008 1:15 PM
Subject: Re: Which will be faster?


>I wouldn't worry about it too much, since there'll be overhead for you
> building up the string in the first place as well. I suspect that the
> time difference will be dwarfed by the indexing process. So I'd do what's
> easiest first.......
> 
> Erick
> 
> On Tue, Apr 15, 2008 at 10:51 AM, darren <darren@ontrenet.com> wrote:
> 
>> Hi,
>>  Pardon the noob question. But which approach is going to be faster
>> over extremely large document sets. A or B?
>>
>> A) Multiple field values, Stored.NO,TOKENIZED.
>> word: one
>> word: two
>> word: three
>>
>> B) Single field value, Stored.NO,TOKENIZED
>> word: one two three
>>
>> Thanks for the tip.
>> Darren
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33632-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 15 17:40:43 2008
Return-Path: <java-user-return-33632-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81421 invoked from network); 15 Apr 2008 17:40:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Apr 2008 17:40:42 -0000
Received: (qmail 53041 invoked by uid 500); 15 Apr 2008 17:40:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53015 invoked by uid 500); 15 Apr 2008 17:40:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53004 invoked by uid 99); 15 Apr 2008 17:40:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Apr 2008 10:40:36 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aweber@comcast.net designates 76.96.62.17 as permitted sender)
Received: from [76.96.62.17] (HELO QMTA10.westchester.pa.mail.comcast.net) (76.96.62.17)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Apr 2008 17:39:51 +0000
Received: from OMTA09.westchester.pa.mail.comcast.net ([76.96.62.20])
	by QMTA10.westchester.pa.mail.comcast.net with comcast
	id Dr6a1Z0080SCNGk5A0M900; Tue, 15 Apr 2008 17:38:55 +0000
Received: from silvercreek ([71.187.44.111])
	by OMTA09.westchester.pa.mail.comcast.net with comcast
	id Dtfn1Z0082PvBoP3V00000; Tue, 15 Apr 2008 17:39:57 +0000
X-Authority-Analysis: v=1.0 c=1 a=rITDv7nW5hcA:10 a=7TTNY3neoissXGt01F8A:9
 a=YvZlBroJ9pCMBwAMfAEGjnr-50UA:4 a=si9q_4b84H0A:10 a=gi0PWCVxevcA:10
 a=r5C0CuJec_VwppTX7pEA:9 a=3lY-K1xWJYQxsvKbl5AA:7
 a=2zJFCp4LGzb84ypnX32ecg8vAVUA:4 a=MSl-tDqOz04A:10 a=AfD3MYMu9mQA:10
Message-ID: <01b601c89f1f$b9198880$d101a8c0@documentum.com>
Reply-To: "AJ Weber" <aweber@comcast.net>
From: "AJ Weber" <aweber@comcast.net>
To: <java-user@lucene.apache.org>
References: <019001c89f04$b7edce00$d101a8c0@documentum.com> <359a92830804151012p7396c2ddl3e619f2914b760f2@mail.gmail.com>
Subject: Re: replace field in doc?
Date: Tue, 15 Apr 2008 13:39:47 -0400
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_01B3_01C89EFE.2C05F990"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_01B3_01C89EFE.2C05F990
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

I ended up doing this:

                            String docText =3D doc.get("body");
                            Field fCurAll =3D doc.getField("all");
                            if ((fCurAll !=3D null) && (docText !=3D =
null)) {
                                String newAll =3D fCurAll.stringValue() =
+ " " + docText;
                                logCat.debug("Updating 'all' field with =
props + bodyText");
                                fCurAll.setValue(newAll);
                            }
                            else if ((fCurAll =3D=3D null) && (docText =
!=3D null))
                                doc.add(new Field("all", docText, =
Field.Store.NO, Field.Index.TOKENIZED));

But I suppose if what you say is true, it would be more efficient to do =
it "your way", because I don't need to chew-up memory and CPU by =
extracting the existing info, concat it, then put it back, right?

(Since this is the "all" field, for 'global searching', and I'm not =
storing it anyway, I'm not concerned about the positions too much.)

Thanks a bunch for the quick reply!
-AJ
  ----- Original Message -----=20
  From: Erick Erickson=20
  To: java-user@lucene.apache.org ; AJ Weber=20
  Sent: Tuesday, April 15, 2008 1:12 PM
  Subject: Re: replace field in doc?


  You can freely add the same field (with different text) to a doc. For
  instance
  Document doc =3D new Document();
  doc.add("field", "this is the first");
  doc.add("field", "starting the second ");
  IndexWriter.addDocument(doc)

  is functionally the same as


  Document doc =3D new Document();
  doc.add("field", "this is the first starting the second");
  IndexWriter.addDocument(doc)


  with one subtle difference. The first version will add
  whatever is returned from Analyzer.getPositionIncrementGap
  to the term position of the first token in adds 2-n. That is,
  say getPositionIncrementGap returned 100. Then
  the token "first" would have position 3 and "starting"
  would have position 103 (I may be off by one on both these,
  but you get the idea).

  The default return is 1, so if you do nothing special, the two
  calls will be identical.

  Why would you return something other than 1 from
  getPositionIncrementGap? Well, if you want to dance
  fancy and, say, NOT span across the two lines above
  for, say, SpanNear clauses, you could return a large
  number that was bigger than the max allowable span.

  Best
  Erick

  On Tue, Apr 15, 2008 at 10:26 AM, AJ Weber <aweber@comcast.net> wrote:

  > I'm curious how people are building the "all" Field (for searching =
"all of
  > the terms at once").
  >
  > I understand using store=3DNO, Index=3DTokenized is generally the =
way to add
  > the field, but what if I need to basically use multiple classes to =
build my
  > Document before adding it to the index (keeping things modular and
  > reusable)?
  >
  > If one class adds the Field (i.e. doc.add("all", sCurrentString,
  > Field.Store.NO, Field.Index.TOKENIZED) ), then I pass the document =
("doc"
  > in this example) to another class, how do I basically concat any =
additional
  > field-values/strings to the existing text-Field?  This is all before =
the
  > Document is added to the index in the first-place.
  >
  > I'm concerned that doing a doc.get("all") and then adding it back to =
the
  > doc with the additional string will result in two fields of the name =
"all"
  > (I seem to have read this is the functionality somewhere)???
  >
  > Thanks in advance!
  > -AJ

------=_NextPart_000_01B3_01C89EFE.2C05F990--


From java-user-return-33633-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 15 18:08:39 2008
Return-Path: <java-user-return-33633-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92585 invoked from network); 15 Apr 2008 18:08:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Apr 2008 18:08:38 -0000
Received: (qmail 3540 invoked by uid 500); 15 Apr 2008 18:08:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3509 invoked by uid 500); 15 Apr 2008 18:08:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3494 invoked by uid 99); 15 Apr 2008 18:08:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Apr 2008 11:08:31 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lucenelist2007@danielnaber.de designates 80.67.29.8 as permitted sender)
Received: from [80.67.29.8] (HELO smtprelay08.ispgateway.de) (80.67.29.8)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Apr 2008 18:07:46 +0000
Received: from [91.37.238.31] (helo=p5b25ee1f.dip.t-dialin.net)
	by smtprelay08.ispgateway.de with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.68)
	(envelope-from <lucenelist2007@danielnaber.de>)
	id 1JlpZU-0000Dz-UF
	for java-user@lucene.apache.org; Tue, 15 Apr 2008 20:07:57 +0200
From: Daniel Naber <lucenelist2007@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Search for phrases
Date: Tue, 15 Apr 2008 20:09:03 +0200
User-Agent: KMail/1.9.6 (enterprise 20070904.708012)
References: <16678104.post@talk.nabble.com> <200804142113.50331@danielnaber.de> <16695864.post@talk.nabble.com>
In-Reply-To: <16695864.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200804152009.03794@danielnaber.de>
X-Df-Sender: 695637
X-Virus-Checked: Checked by ClamAV on apache.org

On Dienstag, 15. April 2008, palexv wrote:

> I have not tokenized phrases in index.
> What query should I use?
> Simple TermQuery does not work.

Probably PhraseQuery with an argument like "java dev" (no asterisk).

> If I try to use QueryParser , what analyzer should I use?

Probably KeywordAnalyzer. Please see the instructions in the FAQ that 
describe how to debug search problems if it doesn't work.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33634-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 15 18:12:27 2008
Return-Path: <java-user-return-33634-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93950 invoked from network); 15 Apr 2008 18:12:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Apr 2008 18:12:27 -0000
Received: (qmail 14402 invoked by uid 500); 15 Apr 2008 18:12:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14376 invoked by uid 500); 15 Apr 2008 18:12:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14365 invoked by uid 99); 15 Apr 2008 18:12:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Apr 2008 11:12:21 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.46.28] (HELO yw-out-2324.google.com) (74.125.46.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Apr 2008 18:11:37 +0000
Received: by yw-out-2324.google.com with SMTP id 5so1142844ywh.5
        for <java-user@lucene.apache.org>; Tue, 15 Apr 2008 11:11:38 -0700 (PDT)
Received: by 10.150.186.21 with SMTP id j21mr8163829ybf.230.1208283098347;
        Tue, 15 Apr 2008 11:11:38 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id a38sm230377rnc.4.2008.04.15.11.11.27
        (version=TLSv1/SSLv3 cipher=OTHER);
        Tue, 15 Apr 2008 11:11:34 -0700 (PDT)
In-Reply-To: <001b01c89f1e$0aef4f70$8a01a8c0@GEMINI>
References: <1208271105.7159.8.camel@tetsiaga> <359a92830804151015h7414304cn12447016e53189b0@mail.gmail.com> <001b01c89f1e$0aef4f70$8a01a8c0@GEMINI>
Mime-Version: 1.0 (Apple Message framework v753)
X-Priority: 3
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <FAD3790B-6D2C-4233-B79E-A64779DFC8C9@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Which will be faster?
Date: Tue, 15 Apr 2008 14:11:37 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


The index should be identical in these two cases as long as the  
single string yields the same tokens during analysis as the  
concatenation of the tokens from the separate strings.

So index size & search speed would be the same.

Mike

Darren Govoni wrote:
> I guess I meant searching the index, size of index etc.
>
> So they would search essentially the same?
>
> Sorry that wasn't clear from my original email.
>
> Darren
>
> ----- Original Message ----- From: "Erick Erickson"  
> <erickerickson@gmail.com>
> To: <java-user@lucene.apache.org>
> Sent: Tuesday, April 15, 2008 1:15 PM
> Subject: Re: Which will be faster?
>
>
>> I wouldn't worry about it too much, since there'll be overhead for  
>> you
>> building up the string in the first place as well. I suspect that the
>> time difference will be dwarfed by the indexing process. So I'd do  
>> what's
>> easiest first.......
>> Erick
>> On Tue, Apr 15, 2008 at 10:51 AM, darren <darren@ontrenet.com> wrote:
>>> Hi,
>>>  Pardon the noob question. But which approach is going to be faster
>>> over extremely large document sets. A or B?
>>>
>>> A) Multiple field values, Stored.NO,TOKENIZED.
>>> word: one
>>> word: two
>>> word: three
>>>
>>> B) Single field value, Stored.NO,TOKENIZED
>>> word: one two three
>>>
>>> Thanks for the tip.
>>> Darren
>>>
>>>
>>> -------------------------------------------------------------------- 
>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33635-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 15 18:50:53 2008
Return-Path: <java-user-return-33635-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20433 invoked from network); 15 Apr 2008 18:50:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Apr 2008 18:50:53 -0000
Received: (qmail 89276 invoked by uid 500); 15 Apr 2008 18:50:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89243 invoked by uid 500); 15 Apr 2008 18:50:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89221 invoked by uid 99); 15 Apr 2008 18:50:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Apr 2008 11:50:45 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.134.186 as permitted sender)
Received: from [209.85.134.186] (HELO mu-out-0910.google.com) (209.85.134.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Apr 2008 18:50:01 +0000
Received: by mu-out-0910.google.com with SMTP id w9so656016mue.5
        for <java-user@lucene.apache.org>; Tue, 15 Apr 2008 11:50:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=McXJRZfs909ATASo16XfTBeTeyfqzVdekhkqJHx5z5Q=;
        b=jkocWCSsBgn6L2phj0m9v9K03Mi45iNC2dgb/sQ7EioZV4CfUUeq5NgT0UYHnRk+FwC0/fmYfShhY66oOTgv8tTnrOSwe7pBKjXWS+LVi7YzT+j4K2cogpqll3ewo1kcitut2t5acrs+73+HSLZi8Bxq7ZyWbeBJSZP1XBp/SqA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=AXasqjx4mYUr1TxKc7DMez8h7//0rAKwPj2iR2/1EDdQXJNd3Rfijtji7yzhML1JLse3clD+Pv6rco73oiuEULfy/wKj7VgPpHqf3kumq6YxFfCBTcjsqHhi//ziKDps36ao4HBb4aO7F02iG071PEuQ+4jqN3SiddJRjCMwNsc=
Received: by 10.82.127.15 with SMTP id z15mr12129775buc.14.1208285412475;
        Tue, 15 Apr 2008 11:50:12 -0700 (PDT)
Received: by 10.82.191.6 with HTTP; Tue, 15 Apr 2008 11:50:12 -0700 (PDT)
Message-ID: <359a92830804151150i683511cfm734b3a7570d7af0b@mail.gmail.com>
Date: Tue, 15 Apr 2008 14:50:12 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org, "AJ Weber" <aweber@comcast.net>
Subject: Re: replace field in doc?
In-Reply-To: <01b601c89f1f$b9198880$d101a8c0@documentum.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_30838_32020902.1208285412350"
References: <019001c89f04$b7edce00$d101a8c0@documentum.com>
	 <359a92830804151012p7396c2ddl3e619f2914b760f2@mail.gmail.com>
	 <01b601c89f1f$b9198880$d101a8c0@documentum.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_30838_32020902.1208285412350
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Well, "my way" would certainly be simpler to read six months from
now when you look at this code again <G>........

And I'm quite sure you can add the same field multiple times, so
whatever you want.

Do note, though, that Lucene defaults to 10,000 characters in any
single field no matter which way you build it up, so you might need to
be aware of IndexWriter.setMaxFieldLength().

Good Luck!
Erick


On Tue, Apr 15, 2008 at 1:39 PM, AJ Weber <aweber@comcast.net> wrote:

> I ended up doing this:
>
>                            String docText = doc.get("body");
>                            Field fCurAll = doc.getField("all");
>                            if ((fCurAll != null) && (docText != null)) {
>                                String newAll = fCurAll.stringValue() + " "
> + docText;
>                                logCat.debug("Updating 'all' field with
> props + bodyText");
>                                fCurAll.setValue(newAll);
>                            }
>                            else if ((fCurAll == null) && (docText !=
> null))
>                                doc.add(new Field("all", docText,
> Field.Store.NO, Field.Index.TOKENIZED));
>
> But I suppose if what you say is true, it would be more efficient to do it
> "your way", because I don't need to chew-up memory and CPU by extracting the
> existing info, concat it, then put it back, right?
>
> (Since this is the "all" field, for 'global searching', and I'm not
> storing it anyway, I'm not concerned about the positions too much.)
>
> Thanks a bunch for the quick reply!
> -AJ
>   ----- Original Message -----
>  From: Erick Erickson
>  To: java-user@lucene.apache.org ; AJ Weber
>  Sent: Tuesday, April 15, 2008 1:12 PM
>  Subject: Re: replace field in doc?
>
>
>  You can freely add the same field (with different text) to a doc. For
>  instance
>  Document doc = new Document();
>  doc.add("field", "this is the first");
>  doc.add("field", "starting the second ");
>  IndexWriter.addDocument(doc)
>
>  is functionally the same as
>
>
>  Document doc = new Document();
>  doc.add("field", "this is the first starting the second");
>  IndexWriter.addDocument(doc)
>
>
>  with one subtle difference. The first version will add
>  whatever is returned from Analyzer.getPositionIncrementGap
>  to the term position of the first token in adds 2-n. That is,
>  say getPositionIncrementGap returned 100. Then
>  the token "first" would have position 3 and "starting"
>  would have position 103 (I may be off by one on both these,
>  but you get the idea).
>
>  The default return is 1, so if you do nothing special, the two
>  calls will be identical.
>
>  Why would you return something other than 1 from
>  getPositionIncrementGap? Well, if you want to dance
>  fancy and, say, NOT span across the two lines above
>  for, say, SpanNear clauses, you could return a large
>  number that was bigger than the max allowable span.
>
>  Best
>  Erick
>
>  On Tue, Apr 15, 2008 at 10:26 AM, AJ Weber <aweber@comcast.net> wrote:
>
>  > I'm curious how people are building the "all" Field (for searching "all
> of
>  > the terms at once").
>  >
>  > I understand using store=NO, Index=Tokenized is generally the way to
> add
>  > the field, but what if I need to basically use multiple classes to
> build my
>  > Document before adding it to the index (keeping things modular and
>  > reusable)?
>  >
>  > If one class adds the Field (i.e. doc.add("all", sCurrentString,
>  > Field.Store.NO, Field.Index.TOKENIZED) ), then I pass the document
> ("doc"
>  > in this example) to another class, how do I basically concat any
> additional
>  > field-values/strings to the existing text-Field?  This is all before
> the
>  > Document is added to the index in the first-place.
>  >
>  > I'm concerned that doing a doc.get("all") and then adding it back to
> the
>  > doc with the additional string will result in two fields of the name
> "all"
>  > (I seem to have read this is the functionality somewhere)???
>  >
>  > Thanks in advance!
>  > -AJ
>

------=_Part_30838_32020902.1208285412350--

From java-user-return-33636-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 15 19:05:33 2008
Return-Path: <java-user-return-33636-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28937 invoked from network); 15 Apr 2008 19:05:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Apr 2008 19:05:33 -0000
Received: (qmail 20056 invoked by uid 500); 15 Apr 2008 19:05:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19914 invoked by uid 500); 15 Apr 2008 19:05:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19903 invoked by uid 99); 15 Apr 2008 19:05:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Apr 2008 12:05:27 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of aweber@comcast.net designates 76.96.62.56 as permitted sender)
Received: from [76.96.62.56] (HELO QMTA06.westchester.pa.mail.comcast.net) (76.96.62.56)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Apr 2008 19:04:33 +0000
Received: from OMTA10.westchester.pa.mail.comcast.net ([76.96.62.28])
	by QMTA06.westchester.pa.mail.comcast.net with comcast
	id Dqid1Z0020cZkys560Ni00; Tue, 15 Apr 2008 19:03:26 +0000
Received: from silvercreek ([71.187.44.111])
	by OMTA10.westchester.pa.mail.comcast.net with comcast
	id Dv4e1Z0042PvBoP3W00000; Tue, 15 Apr 2008 19:04:51 +0000
X-Authority-Analysis: v=1.0 c=1 a=rITDv7nW5hcA:10 a=gb5lHWVVO9YM9s0Cs58A:9
 a=Fpvz1o_01Z7jHFHnfvwA:7 a=HyEL6zeR68-TY5Gq56Uz-3E9NU4A:4 a=si9q_4b84H0A:10
 a=C35D7iIojSgA:10 a=uVT0oRjtAAAA:8 a=UiOLEYNFO9pqqYesEvYA:9
 a=CfvYlVg-N_5OHt0lVfcA:7 a=xZL5tzHpmsIlXHM1CAXMrPqEI4MA:4 a=MSl-tDqOz04A:10
 a=AfD3MYMu9mQA:10
Message-ID: <01d201c89f2b$95194310$d101a8c0@documentum.com>
Reply-To: "AJ Weber" <aweber@comcast.net>
From: "AJ Weber" <aweber@comcast.net>
To: "Erick Erickson" <erickerickson@gmail.com>,
	<java-user@lucene.apache.org>
References: <019001c89f04$b7edce00$d101a8c0@documentum.com> <359a92830804151012p7396c2ddl3e619f2914b760f2@mail.gmail.com> <01b601c89f1f$b9198880$d101a8c0@documentum.com> <359a92830804151150i683511cfm734b3a7570d7af0b@mail.gmail.com>
Subject: Re: replace field in doc?
Date: Tue, 15 Apr 2008 15:04:38 -0400
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_01CF_01C89F0A.0677C120"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_01CF_01C89F0A.0677C120
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Characters or "terms"?  (And btw: what's the difference?)  The javadoc =
says 10,000 "terms", which I assume generally equates to "words" (and =
given that the analyzer might use stemming, stop words, etc.).

Great info.  Thanks again!

-AJ
  ----- Original Message -----=20
  From: Erick Erickson=20
  To: java-user@lucene.apache.org ; AJ Weber=20
  Sent: Tuesday, April 15, 2008 2:50 PM
  Subject: Re: replace field in doc?


  Well, "my way" would certainly be simpler to read six months from
  now when you look at this code again <G>........

  And I'm quite sure you can add the same field multiple times, so=20
  whatever you want.

  Do note, though, that Lucene defaults to 10,000 characters in any
  single field no matter which way you build it up, so you might need to
  be aware of IndexWriter.setMaxFieldLength().

  Good Luck!
  Erick



  On Tue, Apr 15, 2008 at 1:39 PM, AJ Weber <aweber@comcast.net> wrote:

    I ended up doing this:

                               String docText =3D doc.get("body");
                               Field fCurAll =3D doc.getField("all");
                               if ((fCurAll !=3D null) && (docText !=3D =
null)) {
                                   String newAll =3D =
fCurAll.stringValue() + " " + docText;
                                   logCat.debug("Updating 'all' field =
with props + bodyText");
                                   fCurAll.setValue(newAll);
                               }
                               else if ((fCurAll =3D=3D null) && =
(docText !=3D null))
                                   doc.add(new Field("all", docText, =
Field.Store.NO, Field.Index.TOKENIZED));

    But I suppose if what you say is true, it would be more efficient to =
do it "your way", because I don't need to chew-up memory and CPU by =
extracting the existing info, concat it, then put it back, right?

    (Since this is the "all" field, for 'global searching', and I'm not =
storing it anyway, I'm not concerned about the positions too much.)

    Thanks a bunch for the quick reply!
    -AJ

     ----- Original Message -----
     From: Erick Erickson
     To: java-user@lucene.apache.org ; AJ Weber
     Sent: Tuesday, April 15, 2008 1:12 PM
     Subject: Re: replace field in doc?


     You can freely add the same field (with different text) to a doc. =
For
     instance
     Document doc =3D new Document();
     doc.add("field", "this is the first");
     doc.add("field", "starting the second ");
     IndexWriter.addDocument(doc)

     is functionally the same as


     Document doc =3D new Document();
     doc.add("field", "this is the first starting the second");
     IndexWriter.addDocument(doc)


     with one subtle difference. The first version will add
     whatever is returned from Analyzer.getPositionIncrementGap
     to the term position of the first token in adds 2-n. That is,
     say getPositionIncrementGap returned 100. Then
     the token "first" would have position 3 and "starting"
     would have position 103 (I may be off by one on both these,
     but you get the idea).

     The default return is 1, so if you do nothing special, the two
     calls will be identical.

     Why would you return something other than 1 from
     getPositionIncrementGap? Well, if you want to dance
     fancy and, say, NOT span across the two lines above
     for, say, SpanNear clauses, you could return a large
     number that was bigger than the max allowable span.

     Best
     Erick

     On Tue, Apr 15, 2008 at 10:26 AM, AJ Weber <aweber@comcast.net> =
wrote:

     > I'm curious how people are building the "all" Field (for =
searching "all of
     > the terms at once").
     >
     > I understand using store=3DNO, Index=3DTokenized is generally the =
way to add
     > the field, but what if I need to basically use multiple classes =
to build my
     > Document before adding it to the index (keeping things modular =
and
     > reusable)?
     >
     > If one class adds the Field (i.e. doc.add("all", sCurrentString,
     > Field.Store.NO, Field.Index.TOKENIZED) ), then I pass the =
document ("doc"
     > in this example) to another class, how do I basically concat any =
additional
     > field-values/strings to the existing text-Field?  This is all =
before the
     > Document is added to the index in the first-place.
     >
     > I'm concerned that doing a doc.get("all") and then adding it back =
to the
     > doc with the additional string will result in two fields of the =
name "all"
     > (I seem to have read this is the functionality somewhere)???
     >
     > Thanks in advance!
     > -AJ



------=_NextPart_000_01CF_01C89F0A.0677C120--


From java-user-return-33637-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 16 00:19:02 2008
Return-Path: <java-user-return-33637-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 748 invoked from network); 16 Apr 2008 00:19:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Apr 2008 00:19:01 -0000
Received: (qmail 22328 invoked by uid 500); 16 Apr 2008 00:18:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22293 invoked by uid 500); 16 Apr 2008 00:18:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22278 invoked by uid 99); 16 Apr 2008 00:18:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Apr 2008 17:18:55 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.178.248] (HELO hs-out-0708.google.com) (64.233.178.248)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Apr 2008 00:18:11 +0000
Received: by hs-out-0708.google.com with SMTP id 4so902445hsl.5
        for <java-user@lucene.apache.org>; Tue, 15 Apr 2008 17:18:18 -0700 (PDT)
Received: by 10.100.194.17 with SMTP id r17mr9333375anf.127.1208305096908;
        Tue, 15 Apr 2008 17:18:16 -0700 (PDT)
Received: from C0A80104.tipt.aol.com ( [64.236.139.249])
        by mx.google.com with ESMTPS id 10sm17439857wrl.11.2008.04.15.17.18.14
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 15 Apr 2008 17:18:16 -0700 (PDT)
Message-ID: <480545C2.3070504@holsman.net>
Date: Wed, 16 Apr 2008 10:18:10 +1000
From: Ian Holsman <lists@holsman.net>
User-Agent: Thunderbird 2.0.0.12 (Macintosh/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene performance: benchmarktemplate.xml
References: <5e76f3840804150951n4df5782dke95fab45e7473a3f@mail.gmail.com>
In-Reply-To: <5e76f3840804150951n4df5782dke95fab45e7473a3f@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Glen.
can you resend this in plain text?
or put the HTML up on a server somewhere and point to it with a brief 
summary in the post?
I'd love to look and read it, all those tags are making me go blind.

Glen Newton wrote:
> <benchmark>
>  <ul>
>  <p>
>  <b>Hardware Environment</b><br/>
>  <li><i>Dedicated machine for indexing</i>: yes</li>
>  <li><i>CPU</i>: Dual processor dual core Xeon CPU 3.00GHz;
> hyperthreading ON for 8 virtual cores</li>
>  <li><i>RAM</i>: 8GB</li>
>  <li><i>Drive configuration</i>: Dell EMC AX150 storage array fibre
> channel</li>
>  </p>
>  <p>
>  <b>Software environment</b><br/>
>  <li><i>Lucene Version</i>: 2.3.1</li>
>  <li><i>Java Version</i>:  Java(TM) SE Runtime Environment (build
> 1.6.0_02-b05)</li>
>  <li><i>Java VM</i>: Java HotSpot(TM) 64-Bit Server VM (build
> 1.6.0_02-b05, mixed mode)</li>
>  <li><i>OS Version</i>: Linux OpenSUSE 10.2 (64-bit X86-64)</li>
>  <li><i>Location of index</i>: Filesystem, on attached storage</li>
>  </p>
>  <p>
>  <b>Lucene indexing variables</b><br/>
>  <li><i>Number of source documents</i>: 6,404,464</li>
>  <li><i>Total filesize of source documents</i>: 141GB; Note that this
> is only the full-text: the metadata (title, author(s), abstract,
> keywords, journal name) are in addition to this</li>
>  <li><i>Average filesize of source documents</i>:
> 22KB + metadata (see above)</li>
>  <li><i>Source documents storage location</i>: Where are the documents
> being indexed located?
>    Filesystem</li>
>  <li><i>File type of source documents</i>: text (PDFs converted to
> text then gzipped)</li>
>  <li><i>Parser(s) used, if any</i>: None, but files GZIPed & had to
> be un-gziped by Java application which also did indexing</li>
>  <li><i>Analyzer(s) used</i>: StandardAnalyzer</li>
>  <li><i>Number of fields per document</i>: 24</li>
>  <li><i>Type of fields</i>: all text; 20 stored; 3 of indexed
> tokenized with term vector (full-text [not stored], title, abstract);
> 10 stored with no parsing; </li>
>  <li><i>Index persistence</i>: FSDirectory</li>
>  <li><i>Index size</i>: 83GB</li>
>  <li><i>Number of terms</i>: 143,298,010</li>
>  </p>
>  <p>
>  <b>Figures</b><br/>
>  <li><i>Time taken (in ms/s as an average of at least 3 indexing
> runs)</i>: 20.5 hours</li>
>  <li><i>Time taken / 1000 docs indexed</i>: 11.5 seconds </li>
>  <li><i>Memory consumption</i>:  -Xms4000m  -Xmx6000m</li>
>  <li><i>Query speed</i>: average time a query takes, type
>    of queries (e.g. simple one-term query, phrase query),
>    not measuring any overhead outside Lucene</li>
>  </p>
>  <p>
>  <b>Notes</b><br/>
>  <li><i>Notes</i>:
>        <ul>
>          <li>
>            These are journal articles, so the additional fields besides the
> full-text are bibliographic metadata, such as title, authors,
> abstract, keywords, journal name, volume, issue, start page, year.
>          </li>
>          <li>Java command line directives: -XX:+AggressiveOpts
> -XX:+ScavengeBeforeFullGC -XX:-UseParallelGC   -server  -Xms4000m
> -Xmx6000m
>          </li>
>          <li>Highly multithreaded & pipelined architecture using
> java.util.concurrent.ThreadPoolExecutor
>          </li>
>          <li>File system file reading and Un-gzip performed multithreaded
>          </li>
>          <li>Eight separate parallel IndexWriters are fed by the pipeline
> (creation of Document objects occurs in parallel with 64 threads),
> merged at end into single index. Each parallel index had slightly
> different RAM_BUFFER_SIZE_MB (64, 67, 70, 73, 76, 79, 83, 85 MB
> respectively), so that flushing wouldn't all happen at the same time.
>          </li>
>          <li>
>            Contact: glen DOT newton AT nrc-cnrc DOT gc DOT ca
>          </li>
>
>        </ul>
> </li>
>  </p>
>  </ul>
> </benchmark>
>
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33638-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 16 02:40:44 2008
Return-Path: <java-user-return-33638-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66211 invoked from network); 16 Apr 2008 02:40:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Apr 2008 02:40:44 -0000
Received: (qmail 19520 invoked by uid 500); 16 Apr 2008 02:40:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19479 invoked by uid 500); 16 Apr 2008 02:40:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19468 invoked by uid 99); 16 Apr 2008 02:40:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Apr 2008 19:40:36 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of casspc@gmail.com designates 74.125.46.28 as permitted sender)
Received: from [74.125.46.28] (HELO yw-out-2324.google.com) (74.125.46.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Apr 2008 02:39:51 +0000
Received: by yw-out-2324.google.com with SMTP id 5so1255707ywh.5
        for <java-user@lucene.apache.org>; Tue, 15 Apr 2008 19:40:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=BN1CumJ4r0whKMqemYUbdL6CQk+EPRSQmwMXBSFqnY4=;
        b=f+t+Jt77QDfdyKXUlp7Ur9UKOokxIkIfL5UhoOzYBpeLvXrfZD9/pn0zlnOu9+0u3lxr/wQj8N3SDKjqN3aW+Hbjy/et6eoQ5HxtnofKXHgUkzxo7wLaVkI9ubKJM8kqeTSO1eA2B4z11UOchqVSoXzxtceVh2eKAgNa2mP9ZjE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=gDXJsEMtRloVJEN19NegDgKeEfJSYV0hhfiwSNwy2obk+oWAUYlX135WrGx9FTuyorkNi5dPdi/PXIkV7ueCQ28/vIIP9GrxK9xFKqpmfeyHfmH8j4J5jX6o3BYBd/5QNh1isEWCjeOXd84311SEtcBIb/RG5YpudFmp38/TUH4=
Received: by 10.150.123.16 with SMTP id v16mr8681794ybc.76.1208313602612;
        Tue, 15 Apr 2008 19:40:02 -0700 (PDT)
Received: by 10.150.206.20 with HTTP; Tue, 15 Apr 2008 19:40:02 -0700 (PDT)
Message-ID: <8e69b6620804151940i5899e119l82628d15f131f45a@mail.gmail.com>
Date: Tue, 15 Apr 2008 19:40:02 -0700
From: "Cass Costello" <casspc@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene performance: benchmarktemplate.xml
In-Reply-To: <480545C2.3070504@holsman.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4666_21629752.1208313602657"
References: <5e76f3840804150951n4df5782dke95fab45e7473a3f@mail.gmail.com>
	 <480545C2.3070504@holsman.net>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4666_21629752.1208313602657
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I just did that so I could read it. :)  I'll leave it up until Glen resends
or posts it somewhere...
http://www.casscostello.com/?page_id=28



On Tue, Apr 15, 2008 at 5:18 PM, Ian Holsman <lists@holsman.net> wrote:

> Hi Glen.
> can you resend this in plain text?
> or put the HTML up on a server somewhere and point to it with a brief
> summary in the post?
> I'd love to look and read it, all those tags are making me go blind.
>
>
> Glen Newton wrote:
>
> > <benchmark>
> >  <ul>
> >  <p>
> >  <b>Hardware Environment</b><br/>
> >  <li><i>Dedicated machine for indexing</i>: yes</li>
> >  <li><i>CPU</i>: Dual processor dual core Xeon CPU 3.00GHz;
> > hyperthreading ON for 8 virtual cores</li>
> >  <li><i>RAM</i>: 8GB</li>
> >  <li><i>Drive configuration</i>: Dell EMC AX150 storage array fibre
> > channel</li>
> >  </p>
> >  <p>
> >  <b>Software environment</b><br/>
> >  <li><i>Lucene Version</i>: 2.3.1</li>
> >  <li><i>Java Version</i>:  Java(TM) SE Runtime Environment (build
> > 1.6.0_02-b05)</li>
> >  <li><i>Java VM</i>: Java HotSpot(TM) 64-Bit Server VM (build
> > 1.6.0_02-b05, mixed mode)</li>
> >  <li><i>OS Version</i>: Linux OpenSUSE 10.2 (64-bit X86-64)</li>
> >  <li><i>Location of index</i>: Filesystem, on attached storage</li>
> >  </p>
> >  <p>
> >  <b>Lucene indexing variables</b><br/>
> >  <li><i>Number of source documents</i>: 6,404,464</li>
> >  <li><i>Total filesize of source documents</i>: 141GB; Note that this
> > is only the full-text: the metadata (title, author(s), abstract,
> > keywords, journal name) are in addition to this</li>
> >  <li><i>Average filesize of source documents</i>:
> > 22KB + metadata (see above)</li>
> >  <li><i>Source documents storage location</i>: Where are the documents
> > being indexed located?
> >   Filesystem</li>
> >  <li><i>File type of source documents</i>: text (PDFs converted to
> > text then gzipped)</li>
> >  <li><i>Parser(s) used, if any</i>: None, but files GZIPed & had to
> > be un-gziped by Java application which also did indexing</li>
> >  <li><i>Analyzer(s) used</i>: StandardAnalyzer</li>
> >  <li><i>Number of fields per document</i>: 24</li>
> >  <li><i>Type of fields</i>: all text; 20 stored; 3 of indexed
> > tokenized with term vector (full-text [not stored], title, abstract);
> > 10 stored with no parsing; </li>
> >  <li><i>Index persistence</i>: FSDirectory</li>
> >  <li><i>Index size</i>: 83GB</li>
> >  <li><i>Number of terms</i>: 143,298,010</li>
> >  </p>
> >  <p>
> >  <b>Figures</b><br/>
> >  <li><i>Time taken (in ms/s as an average of at least 3 indexing
> > runs)</i>: 20.5 hours</li>
> >  <li><i>Time taken / 1000 docs indexed</i>: 11.5 seconds </li>
> >  <li><i>Memory consumption</i>:  -Xms4000m  -Xmx6000m</li>
> >  <li><i>Query speed</i>: average time a query takes, type
> >   of queries (e.g. simple one-term query, phrase query),
> >   not measuring any overhead outside Lucene</li>
> >  </p>
> >  <p>
> >  <b>Notes</b><br/>
> >  <li><i>Notes</i>:
> >       <ul>
> >         <li>
> >           These are journal articles, so the additional fields besides
> > the
> > full-text are bibliographic metadata, such as title, authors,
> > abstract, keywords, journal name, volume, issue, start page, year.
> >         </li>
> >         <li>Java command line directives: -XX:+AggressiveOpts
> > -XX:+ScavengeBeforeFullGC -XX:-UseParallelGC   -server  -Xms4000m
> > -Xmx6000m
> >         </li>
> >         <li>Highly multithreaded & pipelined architecture using
> > java.util.concurrent.ThreadPoolExecutor
> >         </li>
> >         <li>File system file reading and Un-gzip performed multithreaded
> >         </li>
> >         <li>Eight separate parallel IndexWriters are fed by the pipeline
> > (creation of Document objects occurs in parallel with 64 threads),
> > merged at end into single index. Each parallel index had slightly
> > different RAM_BUFFER_SIZE_MB (64, 67, 70, 73, 76, 79, 83, 85 MB
> > respectively), so that flushing wouldn't all happen at the same time.
> >         </li>
> >         <li>
> >           Contact: glen DOT newton AT nrc-cnrc DOT gc DOT ca
> >         </li>
> >
> >       </ul>
> > </li>
> >  </p>
> >  </ul>
> > </benchmark>
> >
> >
> >
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Lego timeline:
http://cache.gizmodo.com/assets/resources/2008/01/lego-brick4-timeline.jpg

------=_Part_4666_21629752.1208313602657--

From java-user-return-33639-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 16 13:40:53 2008
Return-Path: <java-user-return-33639-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3824 invoked from network); 16 Apr 2008 13:40:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Apr 2008 13:40:52 -0000
Received: (qmail 57125 invoked by uid 500); 16 Apr 2008 13:40:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57094 invoked by uid 500); 16 Apr 2008 13:40:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57083 invoked by uid 99); 16 Apr 2008 13:40:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Apr 2008 06:40:45 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of glen.newton@gmail.com designates 209.85.198.251 as permitted sender)
Received: from [209.85.198.251] (HELO rv-out-0506.google.com) (209.85.198.251)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Apr 2008 13:39:59 +0000
Received: by rv-out-0506.google.com with SMTP id k29so1245551rvb.5
        for <java-user@lucene.apache.org>; Wed, 16 Apr 2008 06:40:12 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=G8zkcjX3A6IJw04ObKNhKB/BJ5A+LQjzBYftWK8Z2UU=;
        b=d7VZU5lkvOcUZcpARfJjy+aDu7MdLozxaWEWKCAspaoLFDPslj2E86nCx+1Nt9MXO9IGR82Ebe1y7+yS2QWt0lNvTOjKqiKn+0rlXDUAt/nkiw6MZB/xJkppT8oe9rB81edIxQPBVn8gOTXX7aryyt/9emzriyNIS4lBK+lFnoI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=GVKe6vSRiVn1bxpA8dW9hteSqZPvH0+zJceS7G88DjBJYyn2XqFHHosFDzr4ce3D7yn55QxENenjKOsNZSAQZ3j9r8ZiaHcQ+UoEjgHoE50wI9B7hw6SuERJeIuyXy2nl0YhJbFvq0wdipmou9Ir2+Oe71UkboIzo96gy26YDIo=
Received: by 10.140.164.6 with SMTP id m6mr4218001rve.208.1208353211811;
        Wed, 16 Apr 2008 06:40:11 -0700 (PDT)
Received: by 10.140.148.19 with HTTP; Wed, 16 Apr 2008 06:40:11 -0700 (PDT)
Message-ID: <5e76f3840804160640idf6571et866a96e1db9c8832@mail.gmail.com>
Date: Wed, 16 Apr 2008 09:40:11 -0400
From: "Glen Newton" <glen.newton@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene performance: benchmarktemplate.xml
In-Reply-To: <8e69b6620804151940i5899e119l82628d15f131f45a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <5e76f3840804150951n4df5782dke95fab45e7473a3f@mail.gmail.com>
	 <480545C2.3070504@holsman.net>
	 <8e69b6620804151940i5899e119l82628d15f131f45a@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Cass,
Thanks for converting it. I've posted it to my blog:
http://zzzoot.blogspot.com/2008/04/lucene-indexing-performance-benchmarks.html

Sorry for the XML tags: I guess I followed the instructions on the
Lucene performance benchmarks page to literally ("Post these figures
to the lucene-user mailing list using this template.").

Sorry if it hurt your eyes!  :-)

-Glen

On 15/04/2008, Cass Costello <casspc@gmail.com> wrote:
> I just did that so I could read it. :)  I'll leave it up until Glen resends
>  or posts it somewhere...
>  http://www.casscostello.com/?page_id=28
>
>
>
>
>  On Tue, Apr 15, 2008 at 5:18 PM, Ian Holsman <lists@holsman.net> wrote:
>
>  > Hi Glen.
>  > can you resend this in plain text?
>  > or put the HTML up on a server somewhere and point to it with a brief
>  > summary in the post?
>  > I'd love to look and read it, all those tags are making me go blind.
>  >
>  >
>  > Glen Newton wrote:
>  >
>  > > <benchmark>
>  > >  <ul>
>  > >  <p>
>  > >  <b>Hardware Environment</b><br/>
>  > >  <li><i>Dedicated machine for indexing</i>: yes</li>
>  > >  <li><i>CPU</i>: Dual processor dual core Xeon CPU 3.00GHz;
>  > > hyperthreading ON for 8 virtual cores</li>
>  > >  <li><i>RAM</i>: 8GB</li>
>  > >  <li><i>Drive configuration</i>: Dell EMC AX150 storage array fibre
>  > > channel</li>
>  > >  </p>
>  > >  <p>
>  > >  <b>Software environment</b><br/>
>  > >  <li><i>Lucene Version</i>: 2.3.1</li>
>  > >  <li><i>Java Version</i>:  Java(TM) SE Runtime Environment (build
>  > > 1.6.0_02-b05)</li>
>  > >  <li><i>Java VM</i>: Java HotSpot(TM) 64-Bit Server VM (build
>  > > 1.6.0_02-b05, mixed mode)</li>
>  > >  <li><i>OS Version</i>: Linux OpenSUSE 10.2 (64-bit X86-64)</li>
>  > >  <li><i>Location of index</i>: Filesystem, on attached storage</li>
>  > >  </p>
>  > >  <p>
>  > >  <b>Lucene indexing variables</b><br/>
>  > >  <li><i>Number of source documents</i>: 6,404,464</li>
>  > >  <li><i>Total filesize of source documents</i>: 141GB; Note that this
>  > > is only the full-text: the metadata (title, author(s), abstract,
>  > > keywords, journal name) are in addition to this</li>
>  > >  <li><i>Average filesize of source documents</i>:
>  > > 22KB + metadata (see above)</li>
>  > >  <li><i>Source documents storage location</i>: Where are the documents
>  > > being indexed located?
>  > >   Filesystem</li>
>  > >  <li><i>File type of source documents</i>: text (PDFs converted to
>  > > text then gzipped)</li>
>  > >  <li><i>Parser(s) used, if any</i>: None, but files GZIPed & had to
>  > > be un-gziped by Java application which also did indexing</li>
>  > >  <li><i>Analyzer(s) used</i>: StandardAnalyzer</li>
>  > >  <li><i>Number of fields per document</i>: 24</li>
>  > >  <li><i>Type of fields</i>: all text; 20 stored; 3 of indexed
>  > > tokenized with term vector (full-text [not stored], title, abstract);
>  > > 10 stored with no parsing; </li>
>  > >  <li><i>Index persistence</i>: FSDirectory</li>
>  > >  <li><i>Index size</i>: 83GB</li>
>  > >  <li><i>Number of terms</i>: 143,298,010</li>
>  > >  </p>
>  > >  <p>
>  > >  <b>Figures</b><br/>
>  > >  <li><i>Time taken (in ms/s as an average of at least 3 indexing
>  > > runs)</i>: 20.5 hours</li>
>  > >  <li><i>Time taken / 1000 docs indexed</i>: 11.5 seconds </li>
>  > >  <li><i>Memory consumption</i>:  -Xms4000m  -Xmx6000m</li>
>  > >  <li><i>Query speed</i>: average time a query takes, type
>  > >   of queries (e.g. simple one-term query, phrase query),
>  > >   not measuring any overhead outside Lucene</li>
>  > >  </p>
>  > >  <p>
>  > >  <b>Notes</b><br/>
>  > >  <li><i>Notes</i>:
>  > >       <ul>
>  > >         <li>
>  > >           These are journal articles, so the additional fields besides
>  > > the
>  > > full-text are bibliographic metadata, such as title, authors,
>  > > abstract, keywords, journal name, volume, issue, start page, year.
>  > >         </li>
>  > >         <li>Java command line directives: -XX:+AggressiveOpts
>  > > -XX:+ScavengeBeforeFullGC -XX:-UseParallelGC   -server  -Xms4000m
>  > > -Xmx6000m
>  > >         </li>
>  > >         <li>Highly multithreaded & pipelined architecture using
>  > > java.util.concurrent.ThreadPoolExecutor
>  > >         </li>
>  > >         <li>File system file reading and Un-gzip performed multithreaded
>  > >         </li>
>  > >         <li>Eight separate parallel IndexWriters are fed by the pipeline
>  > > (creation of Document objects occurs in parallel with 64 threads),
>  > > merged at end into single index. Each parallel index had slightly
>  > > different RAM_BUFFER_SIZE_MB (64, 67, 70, 73, 76, 79, 83, 85 MB
>  > > respectively), so that flushing wouldn't all happen at the same time.
>  > >         </li>
>  > >         <li>
>  > >           Contact: glen DOT newton AT nrc-cnrc DOT gc DOT ca
>  > >         </li>
>  > >
>  > >       </ul>
>  > > </li>
>  > >  </p>
>  > >  </ul>
>  > > </benchmark>
>  > >
>  > >
>  > >
>  > >
>  >
>  >
>  > ---------------------------------------------------------------------
>  > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  > For additional commands, e-mail: java-user-help@lucene.apache.org
>  >
>  >
>
>
>
> --
>  Lego timeline:
>  http://cache.gizmodo.com/assets/resources/2008/01/lego-brick4-timeline.jpg
>


-- 

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33640-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 16 14:29:10 2008
Return-Path: <java-user-return-33640-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35860 invoked from network); 16 Apr 2008 14:29:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Apr 2008 14:29:10 -0000
Received: (qmail 73383 invoked by uid 500); 16 Apr 2008 14:29:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73357 invoked by uid 500); 16 Apr 2008 14:29:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73346 invoked by uid 99); 16 Apr 2008 14:29:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Apr 2008 07:29:03 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [66.249.82.227] (HELO wx-out-0506.google.com) (66.249.82.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Apr 2008 14:28:15 +0000
Received: by wx-out-0506.google.com with SMTP id i28so2018250wxd.20
        for <java-user@lucene.apache.org>; Wed, 16 Apr 2008 07:28:26 -0700 (PDT)
Received: by 10.70.9.8 with SMTP id 8mr60459wxi.27.1208356105439;
        Wed, 16 Apr 2008 07:28:25 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id h7sm17052855wxd.7.2008.04.16.07.28.24
        (version=TLSv1/SSLv3 cipher=OTHER);
        Wed, 16 Apr 2008 07:28:24 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <5e76f3840804160640idf6571et866a96e1db9c8832@mail.gmail.com>
References: <5e76f3840804150951n4df5782dke95fab45e7473a3f@mail.gmail.com> <480545C2.3070504@holsman.net> <8e69b6620804151940i5899e119l82628d15f131f45a@mail.gmail.com> <5e76f3840804160640idf6571et866a96e1db9c8832@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <F582256E-50CF-4168-B293-2B7EDFDC9BCB@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Lucene performance: benchmarktemplate.xml
Date: Wed, 16 Apr 2008 10:28:47 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org

These are great results!  Thanks for posting.

I'd be curious if you'd get better indexing throughput by using a  
single IndexWriter, fed by all 8 indexing threads, with an 8X bigger  
RAM buffer, instead of 8 IndexWriters that merge in the end.

How long does that final merge take now?

Also, 64 threads doing document construction seems too high?  You may  
be losing some performance to the cost of thread context switching.

Did you use autoCommit=false?  I think it should help since you have  
so many stored fields and some term vectors.

Mike

Glen Newton wrote:
> Cass,
> Thanks for converting it. I've posted it to my blog:
> http://zzzoot.blogspot.com/2008/04/lucene-indexing-performance- 
> benchmarks.html
>
> Sorry for the XML tags: I guess I followed the instructions on the
> Lucene performance benchmarks page to literally ("Post these figures
> to the lucene-user mailing list using this template.").
>
> Sorry if it hurt your eyes!  :-)
>
> -Glen
>
> On 15/04/2008, Cass Costello <casspc@gmail.com> wrote:
>> I just did that so I could read it. :)  I'll leave it up until  
>> Glen resends
>>  or posts it somewhere...
>>  http://www.casscostello.com/?page_id=28
>>
>>
>>
>>
>>  On Tue, Apr 15, 2008 at 5:18 PM, Ian Holsman <lists@holsman.net>  
>> wrote:
>>
>>> Hi Glen.
>>> can you resend this in plain text?
>>> or put the HTML up on a server somewhere and point to it with a  
>>> brief
>>> summary in the post?
>>> I'd love to look and read it, all those tags are making me go blind.
>>>
>>>
>>> Glen Newton wrote:
>>>
>>>> <benchmark>
>>>>  <ul>
>>>>  <p>
>>>>  <b>Hardware Environment</b><br/>
>>>>  <li><i>Dedicated machine for indexing</i>: yes</li>
>>>>  <li><i>CPU</i>: Dual processor dual core Xeon CPU 3.00GHz;
>>>> hyperthreading ON for 8 virtual cores</li>
>>>>  <li><i>RAM</i>: 8GB</li>
>>>>  <li><i>Drive configuration</i>: Dell EMC AX150 storage array fibre
>>>> channel</li>
>>>>  </p>
>>>>  <p>
>>>>  <b>Software environment</b><br/>
>>>>  <li><i>Lucene Version</i>: 2.3.1</li>
>>>>  <li><i>Java Version</i>:  Java(TM) SE Runtime Environment (build
>>>> 1.6.0_02-b05)</li>
>>>>  <li><i>Java VM</i>: Java HotSpot(TM) 64-Bit Server VM (build
>>>> 1.6.0_02-b05, mixed mode)</li>
>>>>  <li><i>OS Version</i>: Linux OpenSUSE 10.2 (64-bit X86-64)</li>
>>>>  <li><i>Location of index</i>: Filesystem, on attached storage</li>
>>>>  </p>
>>>>  <p>
>>>>  <b>Lucene indexing variables</b><br/>
>>>>  <li><i>Number of source documents</i>: 6,404,464</li>
>>>>  <li><i>Total filesize of source documents</i>: 141GB; Note that  
>>>> this
>>>> is only the full-text: the metadata (title, author(s), abstract,
>>>> keywords, journal name) are in addition to this</li>
>>>>  <li><i>Average filesize of source documents</i>:
>>>> 22KB + metadata (see above)</li>
>>>>  <li><i>Source documents storage location</i>: Where are the  
>>>> documents
>>>> being indexed located?
>>>>   Filesystem</li>
>>>>  <li><i>File type of source documents</i>: text (PDFs converted to
>>>> text then gzipped)</li>
>>>>  <li><i>Parser(s) used, if any</i>: None, but files GZIPed & had to
>>>> be un-gziped by Java application which also did indexing</li>
>>>>  <li><i>Analyzer(s) used</i>: StandardAnalyzer</li>
>>>>  <li><i>Number of fields per document</i>: 24</li>
>>>>  <li><i>Type of fields</i>: all text; 20 stored; 3 of indexed
>>>> tokenized with term vector (full-text [not stored], title,  
>>>> abstract);
>>>> 10 stored with no parsing; </li>
>>>>  <li><i>Index persistence</i>: FSDirectory</li>
>>>>  <li><i>Index size</i>: 83GB</li>
>>>>  <li><i>Number of terms</i>: 143,298,010</li>
>>>>  </p>
>>>>  <p>
>>>>  <b>Figures</b><br/>
>>>>  <li><i>Time taken (in ms/s as an average of at least 3 indexing
>>>> runs)</i>: 20.5 hours</li>
>>>>  <li><i>Time taken / 1000 docs indexed</i>: 11.5 seconds </li>
>>>>  <li><i>Memory consumption</i>:  -Xms4000m  -Xmx6000m</li>
>>>>  <li><i>Query speed</i>: average time a query takes, type
>>>>   of queries (e.g. simple one-term query, phrase query),
>>>>   not measuring any overhead outside Lucene</li>
>>>>  </p>
>>>>  <p>
>>>>  <b>Notes</b><br/>
>>>>  <li><i>Notes</i>:
>>>>       <ul>
>>>>         <li>
>>>>           These are journal articles, so the additional fields  
>>>> besides
>>>> the
>>>> full-text are bibliographic metadata, such as title, authors,
>>>> abstract, keywords, journal name, volume, issue, start page, year.
>>>>         </li>
>>>>         <li>Java command line directives: -XX:+AggressiveOpts
>>>> -XX:+ScavengeBeforeFullGC -XX:-UseParallelGC   -server  -Xms4000m
>>>> -Xmx6000m
>>>>         </li>
>>>>         <li>Highly multithreaded & pipelined architecture using
>>>> java.util.concurrent.ThreadPoolExecutor
>>>>         </li>
>>>>         <li>File system file reading and Un-gzip performed  
>>>> multithreaded
>>>>         </li>
>>>>         <li>Eight separate parallel IndexWriters are fed by the  
>>>> pipeline
>>>> (creation of Document objects occurs in parallel with 64 threads),
>>>> merged at end into single index. Each parallel index had slightly
>>>> different RAM_BUFFER_SIZE_MB (64, 67, 70, 73, 76, 79, 83, 85 MB
>>>> respectively), so that flushing wouldn't all happen at the same  
>>>> time.
>>>>         </li>
>>>>         <li>
>>>>           Contact: glen DOT newton AT nrc-cnrc DOT gc DOT ca
>>>>         </li>
>>>>
>>>>       </ul>
>>>> </li>
>>>>  </p>
>>>>  </ul>
>>>> </benchmark>
>>>>
>>>>
>>>>
>>>>
>>>
>>>
>>> -------------------------------------------------------------------- 
>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>>
>>
>> --
>>  Lego timeline:
>>  http://cache.gizmodo.com/assets/resources/2008/01/lego-brick4- 
>> timeline.jpg
>>
>
>
> -- 
>
> -
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33641-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 16 16:08:22 2008
Return-Path: <java-user-return-33641-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20083 invoked from network); 16 Apr 2008 16:08:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Apr 2008 16:08:22 -0000
Received: (qmail 29706 invoked by uid 500); 16 Apr 2008 16:08:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29671 invoked by uid 500); 16 Apr 2008 16:08:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29660 invoked by uid 99); 16 Apr 2008 16:08:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Apr 2008 09:08:14 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [66.13.73.146] (HELO fire.marathon-man.com) (66.13.73.146)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Apr 2008 16:07:24 +0000
Received: from localhost (fire.marathon-man.com [127.0.0.1])
	by fire.marathon-man.com (Postfix) with ESMTP id 148CF17826F
	for <java-user@lucene.apache.org>; Wed, 16 Apr 2008 09:07:45 -0700 (PDT)
Received: from fire.marathon-man.com ([127.0.0.1])
 by localhost (fire.marathon-man.com [127.0.0.1]) (amavisd-new, port 10025)
 with ESMTP id 23904-08 for <java-user@lucene.apache.org>;
 Wed, 16 Apr 2008 09:07:44 -0700 (PDT)
Received: from [10.0.1.18] (adev2.marathon-man.com [10.0.1.18])
	by fire.marathon-man.com (Postfix) with ESMTP id 9B02C178241
	for <java-user@lucene.apache.org>; Wed, 16 Apr 2008 09:07:44 -0700 (PDT)
Message-ID: <48062B4E.1010503@marathon-man.com>
Date: Wed, 16 Apr 2008 09:37:34 -0700
From: Andy DePue <andy@marathon-man.com>
User-Agent: Thunderbird 2.0.0.12 (X11/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Using Lucene to find duplicate/similar names
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: by amavisd-new at marathon-man.com
X-Virus-Checked: Checked by ClamAV on apache.org

I'm new to Lucene, and would like to use it to find duplicate (or 
similar) names in a contact list.  Is Lucene a good fit?
We have a form where a user enters a company or person's name, and we 
want the system to warn them if there is already a company or person 
entered with the same or similar name.
Based on the little I know of Lucene, I'm thinking an NGram algorithm 
(based on characters, not words) would work best... but, I'm not sure if 
Lucene takes proximity or edit distances into account?  For example, say 
you have these two names:
  Andrew John
  John Andrew

If a user enters Andy John, without proximity or edit distance, these 
two names will match about the same, while, obviously, the first name 
should be ranked higher.
Thanks in advance for any help or advice.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33642-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 16 16:11:49 2008
Return-Path: <java-user-return-33642-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21342 invoked from network); 16 Apr 2008 16:11:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Apr 2008 16:11:49 -0000
Received: (qmail 39962 invoked by uid 500); 16 Apr 2008 16:11:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39929 invoked by uid 500); 16 Apr 2008 16:11:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39918 invoked by uid 99); 16 Apr 2008 16:11:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Apr 2008 09:11:42 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.74] (HELO spunkymail-a11.g.dreamhost.com) (208.97.132.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Apr 2008 16:10:50 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a11.g.dreamhost.com (Postfix) with ESMTP id 09907B82C8
	for <java-user@lucene.apache.org>; Wed, 16 Apr 2008 09:11:09 -0700 (PDT)
Message-Id: <E43951BC-A09B-4641-8724-B2FBDC109A6E@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <48062B4E.1010503@marathon-man.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: Using Lucene to find duplicate/similar names
Date: Wed, 16 Apr 2008 12:11:08 -0400
References: <48062B4E.1010503@marathon-man.com>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org

I believe there were some posts on this about a year ago.  Try  
searching in the archives for duplicate names, as well as "record  
linkage" or any other various synonyms that you can think of.  The  
short answer is Lucene is reasonable to attempt this with, but you may  
need some help.  The long answer is to dig into those archives and see  
the other recommendations.

-Grant

On Apr 16, 2008, at 12:37 PM, Andy DePue wrote:

> I'm new to Lucene, and would like to use it to find duplicate (or  
> similar) names in a contact list.  Is Lucene a good fit?
> We have a form where a user enters a company or person's name, and  
> we want the system to warn them if there is already a company or  
> person entered with the same or similar name.
> Based on the little I know of Lucene, I'm thinking an NGram  
> algorithm (based on characters, not words) would work best... but,  
> I'm not sure if Lucene takes proximity or edit distances into  
> account?  For example, say you have these two names:
> Andrew John
> John Andrew
>
> If a user enters Andy John, without proximity or edit distance,  
> these two names will match about the same, while, obviously, the  
> first name should be ranked higher.
> Thanks in advance for any help or advice.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ







---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33643-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 16 16:41:36 2008
Return-Path: <java-user-return-33643-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39024 invoked from network); 16 Apr 2008 16:41:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Apr 2008 16:41:36 -0000
Received: (qmail 4744 invoked by uid 500); 16 Apr 2008 16:41:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4717 invoked by uid 500); 16 Apr 2008 16:41:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4700 invoked by uid 99); 16 Apr 2008 16:41:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Apr 2008 09:41:29 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [66.13.73.146] (HELO fire.marathon-man.com) (66.13.73.146)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Apr 2008 16:40:38 +0000
Received: from localhost (fire.marathon-man.com [127.0.0.1])
	by fire.marathon-man.com (Postfix) with ESMTP id 37EA4178372
	for <java-user@lucene.apache.org>; Wed, 16 Apr 2008 09:40:56 -0700 (PDT)
Received: from fire.marathon-man.com ([127.0.0.1])
 by localhost (fire.marathon-man.com [127.0.0.1]) (amavisd-new, port 10025)
 with ESMTP id 24565-06 for <java-user@lucene.apache.org>;
 Wed, 16 Apr 2008 09:40:52 -0700 (PDT)
Received: from [10.0.1.18] (adev2.marathon-man.com [10.0.1.18])
	by fire.marathon-man.com (Postfix) with ESMTP id 884B117826F
	for <java-user@lucene.apache.org>; Wed, 16 Apr 2008 09:40:52 -0700 (PDT)
Message-ID: <48063312.8000205@marathon-man.com>
Date: Wed, 16 Apr 2008 10:10:42 -0700
From: Andy DePue <andy@marathon-man.com>
User-Agent: Thunderbird 2.0.0.12 (X11/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Using Lucene to find duplicate/similar names
References: <48062B4E.1010503@marathon-man.com> <E43951BC-A09B-4641-8724-B2FBDC109A6E@apache.org>
In-Reply-To: <E43951BC-A09B-4641-8724-B2FBDC109A6E@apache.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: by amavisd-new at marathon-man.com
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for the pointer.  I found the thread, and there is certainly some 
interesting information there.  I'd like to stick to what Lucene has 
available today, mainly because I lack the time to implement anything 
more than that.  I originally thought Levenshtein, but then realized 
that Lucene would probably have to do a whole index scan for that?  I 
don't need anything too fancy, so I'm still wondering if NGram with some 
sort of proximity ranking would do the trick.  By proximity, I mean, how 
closely the NGrams in the document field match in proximity and order to 
each other as the same NGrams in the search string.  I'm hoping NGrams 
would avoid the need for a whole index scan.  Does Lucene already factor 
this into its hit score, or would I need to do some custom work?

  - Andy

Grant Ingersoll wrote:
> I believe there were some posts on this about a year ago.  Try 
> searching in the archives for duplicate names, as well as "record 
> linkage" or any other various synonyms that you can think of.  The 
> short answer is Lucene is reasonable to attempt this with, but you may 
> need some help.  The long answer is to dig into those archives and see 
> the other recommendations.
>
> -Grant
>
> On Apr 16, 2008, at 12:37 PM, Andy DePue wrote:
>
>> I'm new to Lucene, and would like to use it to find duplicate (or 
>> similar) names in a contact list.  Is Lucene a good fit?
>> We have a form where a user enters a company or person's name, and we 
>> want the system to warn them if there is already a company or person 
>> entered with the same or similar name.
>> Based on the little I know of Lucene, I'm thinking an NGram algorithm 
>> (based on characters, not words) would work best... but, I'm not sure 
>> if Lucene takes proximity or edit distances into account?  For 
>> example, say you have these two names:
>> Andrew John
>> John Andrew
>>
>> If a user enters Andy John, without proximity or edit distance, these 
>> two names will match about the same, while, obviously, the first name 
>> should be ranked higher.
>> Thanks in advance for any help or advice.
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> --------------------------
> Grant Ingersoll
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33644-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 16 16:44:43 2008
Return-Path: <java-user-return-33644-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41330 invoked from network); 16 Apr 2008 16:44:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Apr 2008 16:44:41 -0000
Received: (qmail 13001 invoked by uid 500); 16 Apr 2008 16:44:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12977 invoked by uid 500); 16 Apr 2008 16:44:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12927 invoked by uid 99); 16 Apr 2008 16:44:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Apr 2008 09:44:24 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of etterd@gmail.com designates 209.85.200.172 as permitted sender)
Received: from [209.85.200.172] (HELO wf-out-1314.google.com) (209.85.200.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Apr 2008 16:43:41 +0000
Received: by wf-out-1314.google.com with SMTP id 28so2634028wff.20
        for <java-user@lucene.apache.org>; Wed, 16 Apr 2008 09:43:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        bh=slNLBXGHxb/aeZHCpLZkkS38aTEjk7SaED2azXvRrYg=;
        b=Bn7L7YW+t9NOT1Pj9eP91kU4c2D8aYeyUoQtPr0nk1DocBAEOcJ2Uy9HHeirPheSmwbhWRh5NtGdCAJ7nGVhUWnU0Ev8nCDbPdvsmcwErcfRaXKw3JpelX9k+oe40FeeAL+MsxMRwyF8wVMncZ26zaTHDylOGl/u7043Hn54E4Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=uQ+xAdFODihctujEIIa+heo/p0oB/IvgzUX4KNu7jgIre4p/cNlI5s9jjHWnZNjgRLqSMzYWgo/wv5gpMHtqNfaq+gt0gT110QI2FGUoOPL7n4T9aSdTEE9Ui1dkk7ytrh27Q5DTL97JufKB1VGUqYh5b/HFImWmvQEfwkb7+vw=
Received: by 10.142.155.4 with SMTP id c4mr56080wfe.208.1208364234129;
        Wed, 16 Apr 2008 09:43:54 -0700 (PDT)
Received: by 10.142.12.10 with HTTP; Wed, 16 Apr 2008 09:43:54 -0700 (PDT)
Message-ID: <77d1c1030804160943l12d4865aq6a49f5c6fb491ab0@mail.gmail.com>
Date: Wed, 16 Apr 2008 12:43:54 -0400
From: "David Etter" <etterd@gmail.com>
To: java-user@lucene.apache.org
Subject: Analyzer for WikipediaTokenizer
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Is there an Analyzer for the WikipediaTokenizer?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33645-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 16 17:29:42 2008
Return-Path: <java-user-return-33645-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73899 invoked from network); 16 Apr 2008 17:29:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Apr 2008 17:29:41 -0000
Received: (qmail 29674 invoked by uid 500); 16 Apr 2008 17:29:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29374 invoked by uid 500); 16 Apr 2008 17:29:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29363 invoked by uid 99); 16 Apr 2008 17:29:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Apr 2008 10:29:35 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Apr 2008 17:28:43 +0000
Received: by ug-out-1314.google.com with SMTP id u40so967832ugc.29
        for <java-user@lucene.apache.org>; Wed, 16 Apr 2008 10:28:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=ICL2MwRtVaCa7R1At+crz038DL9yntuT7bh8MMf+9CA=;
        b=uqtFjlfUW22PAl59Kju4gcrNFP0gPQePTemct99O51DssrfSvT3wscKTxAwhTMTLTG5WFmHXjuKGP0ZNdZZc5fhiDFx0MKqYE23mJxMNWDwI7BFvoJSvqeU6GHcqmQI5kMeYIyGpNomricFnIBDKvbwkAikqW1H4OtbPs5/S6cU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=srzAEGAn3QxMKbWkNiBR21UTfsDzvaoZv9loNucYfJMpneEfql32mg5OmqE8inCx1yrIuqBmi3y9nG3aDDifcDXmXemWJA90jI2MGGS0Xa8GjSwaSDjgIMWcnL+YBEbjpTQSt4f7w9rWdOiHV6AqN0m2SdtqGyry3qfgvmme3ys=
Received: by 10.67.195.14 with SMTP id x14mr7209930ugp.40.1208366927104;
        Wed, 16 Apr 2008 10:28:47 -0700 (PDT)
Received: from kodapan.lan ( [82.93.70.124])
        by mx.google.com with ESMTPS id e23sm12610132ugd.56.2008.04.16.10.28.45
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 16 Apr 2008 10:28:46 -0700 (PDT)
Message-ID: <4806374C.1010701@gmail.com>
Date: Wed, 16 Apr 2008 19:28:44 +0200
From: Karl Wettin <karl.wettin@gmail.com>
User-Agent: Thunderbird 2.0.0.12 (Macintosh/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Pooled searcher (was: Solid State Drives vs. RAMDirectory)
References: <1205406224.9126.359.camel@PC990.sb.statsbiblioteket.dk>
In-Reply-To: <1205406224.9126.359.camel@PC990.sb.statsbiblioteket.dk>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Toke Eskildsen skrev:
> In the log names, t2 signifies 2 threads with a shared 
> searcher, t2u signifies 2 threads with separate searchers.
> 
> metis_RAM_24GB_i14_v23_t1_l23.log       530.0 q/sec
> metis_RAM_24GB_i14_v23_t2_l23.log       888.2 q/sec

Did someone end up investigating this thing with pooled searchers and 
why it is a performance boost?


         karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33646-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 16 17:52:35 2008
Return-Path: <java-user-return-33646-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86518 invoked from network); 16 Apr 2008 17:52:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Apr 2008 17:52:35 -0000
Received: (qmail 68151 invoked by uid 500); 16 Apr 2008 17:52:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68063 invoked by uid 500); 16 Apr 2008 17:52:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68052 invoked by uid 99); 16 Apr 2008 17:52:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Apr 2008 10:52:27 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of glen.newton@gmail.com designates 209.85.198.243 as permitted sender)
Received: from [209.85.198.243] (HELO rv-out-0506.google.com) (209.85.198.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Apr 2008 17:51:41 +0000
Received: by rv-out-0506.google.com with SMTP id k29so1295684rvb.5
        for <java-user@lucene.apache.org>; Wed, 16 Apr 2008 10:51:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=HHUxy2Ikt8QKd0Qo1kgb7hnKoycAkwHrAfuNttVyAYw=;
        b=l/ThJohYHfAnB6XXEYdgdbDwN0b3guF3ZrU+UHiAyNDHK2q4Rci0eAirsnln0AX98j0LaBf0GcEEkAG1tolTVQT5mIOD76dkdSDBJSt2LirNQHrB/y1ew4GeB/PDOsoq95B46vebwb8XbxYtEPcnriyaKWeIcVFzV/0bP2AzdqU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=adKvOYD6ZAP3Q/RKzUAt9Cma7irDoj1vi/0ygYulnVN0BUrqr6o5oQdWMJe6cgGLua5BHt6VAdPS+y+wn6hx51g+HLzRCtdye7BRdHPvflhDCDC7lmWEIz0uzllt7RHzhMmslGgnQrGss/LstnZznq5CwM3zil3/JIkBLXcEbVg=
Received: by 10.141.63.20 with SMTP id q20mr160087rvk.258.1208368313855;
        Wed, 16 Apr 2008 10:51:53 -0700 (PDT)
Received: by 10.140.148.19 with HTTP; Wed, 16 Apr 2008 10:51:53 -0700 (PDT)
Message-ID: <5e76f3840804161051h2fc64030xc1ad4a37d26d0353@mail.gmail.com>
Date: Wed, 16 Apr 2008 13:51:53 -0400
From: "Glen Newton" <glen.newton@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene performance: benchmarktemplate.xml
In-Reply-To: <F582256E-50CF-4168-B293-2B7EDFDC9BCB@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <5e76f3840804150951n4df5782dke95fab45e7473a3f@mail.gmail.com>
	 <480545C2.3070504@holsman.net>
	 <8e69b6620804151940i5899e119l82628d15f131f45a@mail.gmail.com>
	 <5e76f3840804160640idf6571et866a96e1db9c8832@mail.gmail.com>
	 <F582256E-50CF-4168-B293-2B7EDFDC9BCB@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On 16/04/2008, Michael McCandless <lucene@mikemccandless.com> wrote:
> These are great results!  Thanks for posting.

Thanks!

>
>  I'd be curious if you'd get better indexing throughput by using a single
> IndexWriter, fed by all 8 indexing threads, with an 8X bigger RAM buffer,
> instead of 8 IndexWriters that merge in the end.

While I am new to this list, I have been trying different
combinations/configurations for this over the last 18 months. To
answer your questions: no, not on our multi-core machine. But I
haven't  tried your suggested scenario with >= v2.2, so it is possible
that it might be better.

>  How long does that final merge take now?

I don't have that timed. I will alter the app to record this.

>  Also, 64 threads doing document construction seems too high?  You may be
> losing some performance to the cost of thread context switching.

I did performance tests on 8,16,24,32,48,64,72,96,128 threads. 64 was
the sweet spot, for this particular configuration.

>  Did you use autoCommit=false?  I think it should help since you have so
> many stored fields and some term vectors.

Damn, I am using the defaults (autoCommit=true). I will re-run and
post the results!

Thanks,  :-)

-glen

>  Mike
>
>
>  Glen Newton wrote:
>
> > Cass,
> > Thanks for converting it. I've posted it to my blog:
> >
> http://zzzoot.blogspot.com/2008/04/lucene-indexing-performance-benchmarks.html
> >
> > Sorry for the XML tags: I guess I followed the instructions on the
> > Lucene performance benchmarks page to literally ("Post these figures
> > to the lucene-user mailing list using this template.").
> >
> > Sorry if it hurt your eyes!  :-)
> >
> > -Glen
> >
> > On 15/04/2008, Cass Costello <casspc@gmail.com> wrote:
> >
> > > I just did that so I could read it. :)  I'll leave it up until Glen
> resends
> > >  or posts it somewhere...
> > >  http://www.casscostello.com/?page_id=28
> > >
> > >
> > >
> > >
> > >  On Tue, Apr 15, 2008 at 5:18 PM, Ian Holsman <lists@holsman.net> wrote:
> > >
> > >
> > > > Hi Glen.
> > > > can you resend this in plain text?
> > > > or put the HTML up on a server somewhere and point to it with a brief
> > > > summary in the post?
> > > > I'd love to look and read it, all those tags are making me go blind.
> > > >
> > > >
> > > > Glen Newton wrote:
> > > >
> > > >
> > > > > <benchmark>
> > > > >  <ul>
> > > > >  <p>
> > > > >  <b>Hardware Environment</b><br/>
> > > > >  <li><i>Dedicated machine for indexing</i>: yes</li>
> > > > >  <li><i>CPU</i>: Dual processor dual core Xeon CPU 3.00GHz;
> > > > > hyperthreading ON for 8 virtual cores</li>
> > > > >  <li><i>RAM</i>: 8GB</li>
> > > > >  <li><i>Drive configuration</i>: Dell EMC AX150 storage array fibre
> > > > > channel</li>
> > > > >  </p>
> > > > >  <p>
> > > > >  <b>Software environment</b><br/>
> > > > >  <li><i>Lucene Version</i>: 2.3.1</li>
> > > > >  <li><i>Java Version</i>:  Java(TM) SE Runtime Environment (build
> > > > > 1.6.0_02-b05)</li>
> > > > >  <li><i>Java VM</i>: Java HotSpot(TM) 64-Bit Server VM (build
> > > > > 1.6.0_02-b05, mixed mode)</li>
> > > > >  <li><i>OS Version</i>: Linux OpenSUSE 10.2 (64-bit X86-64)</li>
> > > > >  <li><i>Location of index</i>: Filesystem, on attached storage</li>
> > > > >  </p>
> > > > >  <p>
> > > > >  <b>Lucene indexing variables</b><br/>
> > > > >  <li><i>Number of source documents</i>: 6,404,464</li>
> > > > >  <li><i>Total filesize of source documents</i>: 141GB; Note that
> this
> > > > > is only the full-text: the metadata (title, author(s), abstract,
> > > > > keywords, journal name) are in addition to this</li>
> > > > >  <li><i>Average filesize of source documents</i>:
> > > > > 22KB + metadata (see above)</li>
> > > > >  <li><i>Source documents storage location</i>: Where are the
> documents
> > > > > being indexed located?
> > > > >  Filesystem</li>
> > > > >  <li><i>File type of source documents</i>: text (PDFs converted to
> > > > > text then gzipped)</li>
> > > > >  <li><i>Parser(s) used, if any</i>: None, but files GZIPed & had to
> > > > > be un-gziped by Java application which also did indexing</li>
> > > > >  <li><i>Analyzer(s) used</i>: StandardAnalyzer</li>
> > > > >  <li><i>Number of fields per document</i>: 24</li>
> > > > >  <li><i>Type of fields</i>: all text; 20 stored; 3 of indexed
> > > > > tokenized with term vector (full-text [not stored], title,
> abstract);
> > > > > 10 stored with no parsing; </li>
> > > > >  <li><i>Index persistence</i>: FSDirectory</li>
> > > > >  <li><i>Index size</i>: 83GB</li>
> > > > >  <li><i>Number of terms</i>: 143,298,010</li>
> > > > >  </p>
> > > > >  <p>
> > > > >  <b>Figures</b><br/>
> > > > >  <li><i>Time taken (in ms/s as an average of at least 3 indexing
> > > > > runs)</i>: 20.5 hours</li>
> > > > >  <li><i>Time taken / 1000 docs indexed</i>: 11.5 seconds </li>
> > > > >  <li><i>Memory consumption</i>:  -Xms4000m  -Xmx6000m</li>
> > > > >  <li><i>Query speed</i>: average time a query takes, type
> > > > >  of queries (e.g. simple one-term query, phrase query),
> > > > >  not measuring any overhead outside Lucene</li>
> > > > >  </p>
> > > > >  <p>
> > > > >  <b>Notes</b><br/>
> > > > >  <li><i>Notes</i>:
> > > > >      <ul>
> > > > >        <li>
> > > > >          These are journal articles, so the additional fields
> besides
> > > > > the
> > > > > full-text are bibliographic metadata, such as title, authors,
> > > > > abstract, keywords, journal name, volume, issue, start page, year.
> > > > >        </li>
> > > > >        <li>Java command line directives: -XX:+AggressiveOpts
> > > > > -XX:+ScavengeBeforeFullGC -XX:-UseParallelGC   -server  -Xms4000m
> > > > > -Xmx6000m
> > > > >        </li>
> > > > >        <li>Highly multithreaded & pipelined architecture using
> > > > > java.util.concurrent.ThreadPoolExecutor
> > > > >        </li>
> > > > >        <li>File system file reading and Un-gzip performed
> multithreaded
> > > > >        </li>
> > > > >        <li>Eight separate parallel IndexWriters are fed by the
> pipeline
> > > > > (creation of Document objects occurs in parallel with 64 threads),
> > > > > merged at end into single index. Each parallel index had slightly
> > > > > different RAM_BUFFER_SIZE_MB (64, 67, 70, 73, 76, 79, 83, 85 MB
> > > > > respectively), so that flushing wouldn't all happen at the same
> time.
> > > > >        </li>
> > > > >        <li>
> > > > >          Contact: glen DOT newton AT nrc-cnrc DOT gc DOT ca
> > > > >        </li>
> > > > >
> > > > >      </ul>
> > > > > </li>
> > > > >  </p>
> > > > >  </ul>
> > > > > </benchmark>
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > >
> > > >
> > > >
> ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail:
> java-user-help@lucene.apache.org
> > > >
> > > >
> > > >
> > >
> > >
> > >
> > > --
> > >  Lego timeline:
> > >
> http://cache.gizmodo.com/assets/resources/2008/01/lego-brick4-timeline.jpg
> > >
> > >
> >
> >
> > --
> >
> > -
> >
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail:
> java-user-help@lucene.apache.org
> >
> >
>
>
> ---------------------------------------------------------------------
>  To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
>  For additional commands, e-mail:
> java-user-help@lucene.apache.org
>
>


-- 

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33647-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 16 18:05:37 2008
Return-Path: <java-user-return-33647-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2146 invoked from network); 16 Apr 2008 18:05:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Apr 2008 18:05:37 -0000
Received: (qmail 13381 invoked by uid 500); 16 Apr 2008 18:05:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13353 invoked by uid 500); 16 Apr 2008 18:05:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13342 invoked by uid 99); 16 Apr 2008 18:05:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Apr 2008 11:05:30 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of stopman@gmail.com designates 209.85.134.187 as permitted sender)
Received: from [209.85.134.187] (HELO mu-out-0910.google.com) (209.85.134.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Apr 2008 18:04:47 +0000
Received: by mu-out-0910.google.com with SMTP id w9so1008627mue.5
        for <java-user@lucene.apache.org>; Wed, 16 Apr 2008 11:04:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=Xu3+CwDoMRWz9dJukDRWY4Q5i93DB+9zXvGggfSNCfw=;
        b=Zcc+iR8oPbncULdwrpvx9dqHF3odrMaPfwtIL8fS7gv1sNhAerCq39EMYQG6W7L7ojrCv3v9Th8/HWko57gSnYbVEVjkSq60uTIzmaL+FJVp0Tinlh7WO1xFq4mVB/jFG1E6M9D2c/1+Z1uwVwm7kAmg+GilQfdu6KKWT1yoZ9w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=bPtI57DJrTY+MYqxTZRtHyP2LSjUNXRq9o7yQamtKt0fiuC1T+GDDnP6ZMukJ2ADM3yckmHsehdAfhbekeSVG2wMlbtrsmcXlsrG05YJacERCTvJaTnZuXwU6uNaumBbS12sNthWbM9dR5899S+/hXHuw7Lo8EwyH4MJ8oxa+tg=
Received: by 10.82.184.2 with SMTP id h2mr493645buf.1.1208369093930;
        Wed, 16 Apr 2008 11:04:53 -0700 (PDT)
Received: by 10.82.139.19 with HTTP; Wed, 16 Apr 2008 11:04:53 -0700 (PDT)
Message-ID: <652776090804161104m5909f735pa80fe44414faf1d4@mail.gmail.com>
Date: Wed, 16 Apr 2008 11:04:53 -0700
From: "Michael Stoppelman" <stopman@gmail.com>
To: java-user@lucene.apache.org
Subject: QueryWrapperFilter question...
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_18819_9427767.1208369093926"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_18819_9427767.1208369093926
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all,
I've been doing some performance testing and found that using
QueryWrapperFilter for a location field
restriction I have to do allows my search results to approach 5-10ms. This
was surprising.
Before the performance was between 50ms-100ms.

The queries from before the optimization look like the following:
+(+(text:cats) +(loc:1 loc:2 loc:3 ...))

The QueryWrapperFilter does do a search itself. Why would performance be so
drastically different when the
QueryWrapperFilter needs to do a search? Does lucene just not have the
statistics to optimize this query so it
can decide which terms to filter by first?

M

------=_Part_18819_9427767.1208369093926--

From java-user-return-33648-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 16 18:22:18 2008
Return-Path: <java-user-return-33648-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25751 invoked from network); 16 Apr 2008 18:22:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Apr 2008 18:22:18 -0000
Received: (qmail 64166 invoked by uid 500); 16 Apr 2008 18:22:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64135 invoked by uid 500); 16 Apr 2008 18:22:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64120 invoked by uid 99); 16 Apr 2008 18:22:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Apr 2008 11:22:10 -0700
X-ASF-Spam-Status: No, hits=-2.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of cbmcgee@ca.ibm.com designates 32.97.182.144 as permitted sender)
Received: from [32.97.182.144] (HELO e4.ny.us.ibm.com) (32.97.182.144)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Apr 2008 18:21:17 +0000
Received: from d01relay04.pok.ibm.com (d01relay04.pok.ibm.com [9.56.227.236])
	by e4.ny.us.ibm.com (8.13.8/8.13.8) with ESMTP id m3GILZeR015526
	for <java-user@lucene.apache.org>; Wed, 16 Apr 2008 14:21:35 -0400
Received: from d01av03.pok.ibm.com (d01av03.pok.ibm.com [9.56.224.217])
	by d01relay04.pok.ibm.com (8.13.8/8.13.8/NCO v8.7) with ESMTP id m3GILZkP219414
	for <java-user@lucene.apache.org>; Wed, 16 Apr 2008 14:21:35 -0400
Received: from d01av03.pok.ibm.com (loopback [127.0.0.1])
	by d01av03.pok.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id m3GILZJV006956
	for <java-user@lucene.apache.org>; Wed, 16 Apr 2008 14:21:35 -0400
Received: from d25ml04.torolab.ibm.com (d25ml04.torolab.ibm.com [9.26.6.105])
	by d01av03.pok.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id m3GILYtK006895
	for <java-user@lucene.apache.org>; Wed, 16 Apr 2008 14:21:35 -0400
In-Reply-To: <359a92830804141325gf00bcfen3c2f4566b1697b9d@mail.gmail.com>
To: java-user@lucene.apache.org
MIME-Version: 1.0
Subject: Re: How to improve performance of large numbers of successive searches?
X-Mailer: Lotus Notes Release 7.0 HF242 April 21, 2006
From: Chris McGee <cbmcgee@ca.ibm.com>
X-MIMETrack: S/MIME Sign by Notes Client on Chris McGee/Ottawa/IBM(Release 7.0 HF242|April
 21, 2006) at 16/04/2008 02:19:25 PM,
	Serialize by Notes Client on Chris McGee/Ottawa/IBM(Release 7.0 HF242|April
 21, 2006) at 16/04/2008 02:19:25 PM,
	Serialize complete at 16/04/2008 02:19:25 PM,
	S/MIME Sign failed at 16/04/2008 02:19:25 PM: The cryptographic key was not
 found,
	Serialize by Router on D25ML04/25/M/IBM(Release 7.0.2HF446 | March 16, 2007) at
 04/16/2008 14:21:35,
	Serialize complete at 04/16/2008 14:21:35
Message-ID: <OF65328518.F384108B-ON8525742D.004E9D87-8525742D.0064AC2C@ca.ibm.com>
Date: Wed, 16 Apr 2008 14:21:06 -0400
Content-Type: multipart/alternative; boundary="=_alternative 0064A7C18525742D_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 0064A7C18525742D_=
Content-Type: text/plain; charset="US-ASCII"

Hi Erick,

Thanks for the information. I changed over my code to use a reader and get 
a term enumeration. Once I find a value that matches an element in my set, 
I use a TermDocs object to seek to that term and open all of the matching 
documents. This has sped up my searches by a large amount. Some cases went 
from around one minute and are now down around 700ms.

Here is the motivation for my trying to optimize the performance. I had 
found at one point that it was actually quicker to manually parse my data 
set looking for a set of values (100-1000) with a specialized parser than 
it was to search lucene. Sometimes the difference was very large 
(especially when the data set was large and the number of values to search 
for were in the thousands). Because we are taking the cost to build up the 
lucene directory in the first place it was hoped that we would be able to 
save enough on each search to justify that up front cost. If this was not 
the case then it would be difficult to justify the use of Lucene in some 
cases.

Thanks again for your help,
Chris




"Erick Erickson" <erickerickson@gmail.com> 
14/04/2008 04:25 PM
Please respond to
java-user@lucene.apache.org


To
java-user@lucene.apache.org
cc

Subject
Re: How to improve performance of large numbers of successive searches?






OK, if you're going after simple terms without any logic (or with
very simple logic), why search at all? Why not just use TermDocs and/or
TermEnum to flip through the index noticing documents that match?

I'd only recommend this if you are NOT trying to parse complex
queries. That is, say, you are searching ONLY on individual
terms or all simple terms are joined by AND (or OR).

You can use Filters to store intermediate results (they're really
bitsets). That way, you bypass all the search logic.

But a simpler way might be ConstantScoreQuery.

But first I'd just try a HitCollector, possibly with a
ConstantScoreQuery and then.

But, again, what leads you to believe that performance is
not adequate yet? What is your target?

Best
Erick

On Mon, Apr 14, 2008 at 1:46 PM, Chris McGee <cbmcgee@ca.ibm.com> wrote:

> Hi Erick,
>
> Here is a quick overview of what I hope to accomplish with lucene. I am
> using a lucene database to store condensed information about a 
collection
> of data that I have. The data has to be constantly updated for 
correctness
> so that when one part changes certain other parts can be changed. Also,
> various queries will be performed on this data but in all cases the 
total
> result set must be retrieved and not just a select few hits. The results
> are used to manage the overall correctness of my data store and not to
> present to the user in some filtered way (by rank and only the top 100
> hits for example). Also, there could be cases where there will be a 
large
> set of terms to search for. To load all of this data into RAM is not
> feasible in most cases because there is too much data even if it was
> compressed.
>
> So, I hope to be able to minimize the time to update the lucene database
> from my data store. I have already upgraded to Lucene 2.3.1 and 
performed
> a number of the suggestions on the lucene wiki with some success. As 
well,
> I want to help speed up the time it takes to query for a large number of
> terms (in most cases the terms have the same field name but different
> values).
>
> In all cases I want to retrieve all matching documents at once. Because
> all matching documents must be retrieved I have no need for scoring,
> weights, boosts or any ranking of the results. Is there a way to strip
> away any of these pieces for better querying and directory building
> performance?
>
> Thanks for your help,
> Chris
>
>
>
>
> "Erick Erickson" <erickerickson@gmail.com>
> 14/04/2008 10:36 AM
> Please respond to
> java-user@lucene.apache.org
>
>
> To
> java-user@lucene.apache.org
> cc
>
> Subject
> Re: How to improve performance of large numbers of successive searches?
>
>
>
>
>
>
> As I stated in my original reply, a Hits object re-executes the
> search every 100 or so objects you examine. So some loop like
> Hits hits = search....
> for (int idx = 0; idx < hits.length; ++idx ) {
>    Document doc = hits.get(idx);
> }
>
> really does something like
>
> for (int idx = 0; idx < hits.length; ++idx ) {
>    if (idx > 99 && (idx % 100) == 0) {
>        re-execute the search and throw away entries 0-idx);
>    }
>    Document doc = hits.get(idx);
> }
>
> So the farther you get into the process, the more you throw away.
>
> About collecting all the documents.... I wouldn't bother putting your
> index in RAM until you've fully explored the alternatives. The first
> of which is to determine what you really mean by "gather all result
> documents"
> If you have to return the entire contents of each document, you may have
> to rethink your problem. If you're returning some subset of the data 
(say
> some summary information), then you may get significant improvements
> by indexing (perhaps UN_TOKENIZED) the data you need. That way, using
> FieldSelector will grab things from the index rather than the stored 
data.
> And, assuming your returned data is a small portion of your total
> document,
> that should fix you up.
>
> But a higher-level statement of the problem you're trying to resolve 
would
> sure be helpful in terms of making reasonable suggestions. You haven't
> characterized the problem you're trying to solve at all. As in *why* you
> need
> to return all the documents, the characteristics of the docs you're 
trying
> to fetch. How big your data set is (as in # of docs). etc. etc. Unless 
and
> until you
> provide some of those details, all the advice in the world is just a 
shot
> in the dark.
>
> Shy do you think that " To perform 1000 term query searches each
> with around 2000 hits" taking "well over a minute" is unacceptable?
> After all, that's 2,000,000 documents you're analyzing. A minute
> seems reasonable. What problem are you *really* trying to solve? or
> is this just a load test?
>
> Best
> Erick
>
>
> On Mon, Apr 14, 2008 at 10:17 AM, Chris McGee <cbmcgee@ca.ibm.com> 
wrote:
>
> > Hi Erick,
> >
> > Thanks for the information. I tried using a HitCollector and a
> > FieldSelector. I'm getting some dramatic improvements gathering large
> > result sets using the FieldSelector. As it turned out I was able to
> assume
> > in many cases that I could break out after a specific field in each
> > document.
> >
> > Assuming that I need to gather all result documents each time, what 
are
> > the advantages of using a HitCollector over Hits?
> >
> > Is there some way that I can load the index portion of the lucene data
> > storage into RAM without loading everything into a RAMDirectory?
> >
> > Thanks,
> > Chris McGee
> >
> >
> >
> >
> > "Erick Erickson" <erickerickson@gmail.com>
> > 10/04/2008 04:18 PM
> > Please respond to
> > java-user@lucene.apache.org
> >
> >
> > To
> > java-user@lucene.apache.org
> > cc
> >
> > Subject
> > Re: How to improve performance of large numbers of successive 
searches?
> >
> >
> >
> >
> >
> >
> > From this <<< iterate over all of the hits>>> I infer that you're
> > using a Hits object. This is a no-no when getting more than 100
> > or so objects. In a nutshell, the query gets re-executed every 100
> > fetches. So your 2,000 hits are executing the query 20 times.
> >
> > The Hits object is optimized for returning the top few scoring
> > documents rather than get the entire result set.
> >
> > See HitCollector/TopDocs/TopDocCollector etc. for better ways
> > of doing this.
> >
> > Also, if you're calling IndexReader.document(i) for each document
> > you'll inevitably take a lot of time as you're loading all of each
> > document.
> > Think about lazy field loading (see FieldSelector).
> >
> > Best
> > Erick
> >
> > P.S. If this is totally off base, perhaps you could post some of the
> > code you think is slow....
> >
> > On Thu, Apr 10, 2008 at 2:34 PM, Chris McGee <cbmcgee@ca.ibm.com> 
wrote:
> >
> > > Hello,
> > >
> > > I am building fairly large directories (200-500 MB of disk space)
> using
> > > lucene-java. Sometimes it can take upwards of 10-15 mins to create 
the
> > > documents and write them to disk using my current configuration. I
> have
> > > upgraded to the latest 2.3.1 version and followed many of the
> > > recommendations offered on the wiki:
> > >
> > > http://wiki.apache.org/lucene-java/ImproveIndexingSpeed
> > >
> > > These tips have significantly improved the time to build the 
directory
> > and
> > > search it. However, I have noticed that when I perform term queries
> > using
> > > a searcher many times in rapid succession and iterate over all of 
the
> > hits
> > > it can take a significant time. To perform 1000 term query searches
> each
> > > with around 2000 hits it takes well over a minute. The time seems to
> > vary
> > > linearly based on the number of searches (ie. 10 times more searches
> > take
> > > 10 times longer). I tried combining the searches into a BooleanQuery
> but
> > > it only shaves off a small percentage (5-10%) of the total time.
> > >
> > > I was wondering if there is a faster way to retrieve all of the
> results
> > > for my large collections of terms without using more memory and
> without
> > > taking more time to build the directory? I already looked at 
bypassing
> > the
> > > searcher and using the IndexReader.termDocs() method directly to
> > retrieve
> > > the documents but there did not seem to be much performance
> improvement.
> > > In the majority of my cases I am simplying looking for a large 
number
> of
> > > values to the same field. Also, I'm not interested in scoring 
results
> > > based on frequency or weights I need to retrieve all of the results
> > > anyway.
> > >
> > > Any help with this would be great.
> > >
> > > Thanks,
> > > Chris McGee
> >
> >
>
>


--=_alternative 0064A7C18525742D_=--

From java-user-return-33649-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 16 19:14:34 2008
Return-Path: <java-user-return-33649-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72249 invoked from network); 16 Apr 2008 19:14:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Apr 2008 19:14:33 -0000
Received: (qmail 77657 invoked by uid 500); 16 Apr 2008 19:14:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77630 invoked by uid 500); 16 Apr 2008 19:14:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77618 invoked by uid 99); 16 Apr 2008 19:14:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Apr 2008 12:14:26 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.5] (HELO spunkymail-a6.g.dreamhost.com) (208.97.132.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Apr 2008 19:13:35 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a6.g.dreamhost.com (Postfix) with ESMTP id 3E8B3109F30
	for <java-user@lucene.apache.org>; Wed, 16 Apr 2008 12:13:53 -0700 (PDT)
Message-Id: <B7026C6D-62D4-44E5-89BA-589DFCE93693@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <77d1c1030804160943l12d4865aq6a49f5c6fb491ab0@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: Analyzer for WikipediaTokenizer
Date: Wed, 16 Apr 2008 15:13:54 -0400
References: <77d1c1030804160943l12d4865aq6a49f5c6fb491ab0@mail.gmail.com>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org

LOL.  That would probably be useful, eh?  :-).  Not sure why it  
completely slipped my mind other than I use it in Solr.  I suppose it  
would make sense to create a variation of the StandardAnalyzer that  
uses the WikipediaTokenizer instead.  Care to crank out a patch?

-Grant

On Apr 16, 2008, at 12:43 PM, David Etter wrote:

> Is there an Analyzer for the WikipediaTokenizer?
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33650-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 16 20:05:42 2008
Return-Path: <java-user-return-33650-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11752 invoked from network); 16 Apr 2008 20:05:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Apr 2008 20:05:41 -0000
Received: (qmail 45442 invoked by uid 500); 16 Apr 2008 20:05:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45376 invoked by uid 500); 16 Apr 2008 20:05:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45365 invoked by uid 99); 16 Apr 2008 20:05:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Apr 2008 13:05:34 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 74.125.46.30 as permitted sender)
Received: from [74.125.46.30] (HELO yw-out-2324.google.com) (74.125.46.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Apr 2008 20:04:52 +0000
Received: by yw-out-2324.google.com with SMTP id 5so1471870ywh.5
        for <java-user@lucene.apache.org>; Wed, 16 Apr 2008 13:04:56 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        bh=ph6X6mkZS/3y5119JHCxL9Yjd5VsmbmH7XHQDlfRUug=;
        b=by83Hbf4wmExpM4ecsW/gazgMPe5/JZPVzcD/DHObSKgD1r0RXREGYrkSQcdfGyP/JC1Y/Zqovrz+IVJIBwwbs5/MbDPHaBZa2u+8DlzoXoNSCWQNSBFTJoDJu9Pgtry63BfLPvylUoGF8bJAOBLBenuZ9ni3S99XMAYgtgcdEs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=Qi0PsGmtW7M7Ey9DHxa1vA4U1LCnLwGX3/Q72U6iE4WIjKdpJ5G/YXFU6t9k2DUnqApQ2cueq7jMlam6vj46sefZdB6iRtWAxp7a1Ubtkv+lhptm1r+DwDiQDhzf/JMuj57KmUepqIzFiWlsZjxHbk5G3o7ChKy34kK9KkrPC88=
Received: by 10.150.121.3 with SMTP id t3mr634079ybc.227.1208376296069;
        Wed, 16 Apr 2008 13:04:56 -0700 (PDT)
Received: by 10.150.226.9 with HTTP; Wed, 16 Apr 2008 13:04:56 -0700 (PDT)
Message-ID: <c68e39170804161304mbc7ac7cx5ba5c8277863dc3c@mail.gmail.com>
Date: Wed, 16 Apr 2008 16:04:56 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Analyzer for WikipediaTokenizer
In-Reply-To: <B7026C6D-62D4-44E5-89BA-589DFCE93693@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <77d1c1030804160943l12d4865aq6a49f5c6fb491ab0@mail.gmail.com>
	 <B7026C6D-62D4-44E5-89BA-589DFCE93693@apache.org>
X-Google-Sender-Auth: f8b10e01c4b61fe3
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, Apr 16, 2008 at 3:13 PM, Grant Ingersoll <gsingers@apache.org> wrote:
> LOL.  That would probably be useful, eh?  :-).  Not sure why it completely
> slipped my mind other than I use it in Solr.  I suppose it would make sense
> to create a variation of the StandardAnalyzer that uses the
> WikipediaTokenizer instead.  Care to crank out a patch?

Unless there is some trickiness involved, I don't think we should
commit new Analyzers to Lucene... just Tokenizers and TokenFilters,
which are infinitely more reusable, and trivial for people to put
together into their own Analyzers.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33651-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 16 20:45:44 2008
Return-Path: <java-user-return-33651-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43334 invoked from network); 16 Apr 2008 20:45:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Apr 2008 20:45:44 -0000
Received: (qmail 7583 invoked by uid 500); 16 Apr 2008 20:45:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7556 invoked by uid 500); 16 Apr 2008 20:45:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7545 invoked by uid 99); 16 Apr 2008 20:45:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Apr 2008 13:45:33 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jake.mannix@gmail.com designates 64.233.178.241 as permitted sender)
Received: from [64.233.178.241] (HELO hs-out-0708.google.com) (64.233.178.241)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Apr 2008 20:44:51 +0000
Received: by hs-out-0708.google.com with SMTP id 4so1139162hsl.5
        for <java-user@lucene.apache.org>; Wed, 16 Apr 2008 13:45:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=/Pwa/Rkw2QvyKgwwh0BYbTYwHzkRrgh8/mZ7uJv8dmo=;
        b=vr+DpE1oRSZdHXf5pqSeV1+sHgw4OqrcEdHMFulCf2ta6YrVuVt1l4BWI27htmQxZKFXB/GfdKiYx6Q+rrMzpbX4lJjNtLTb/OFAoInQW+b1R7s3bRLEKx9e0yn+4rI9VedR38qKqB4D1GJe10GxFsR5FLEZ0WePm7hiQ0ikiDE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=McMEXGj3tQC6dnXeI1oc/bmZ6y5X8OFkUyPbZH5crm5Zmdd+yCueNLJgp8imFUIVY/sAjGFNpMzs/PoUrtMGgsGm4W+NYbME5p5Lw3UXasZKyVGSfDtudTbgY8PeDRoCcj9U70Eh+3ciEyW2udOPpt31BwMdkBlDWq5JJhTHiLo=
Received: by 10.100.251.8 with SMTP id y8mr756200anh.76.1208378702855;
        Wed, 16 Apr 2008 13:45:02 -0700 (PDT)
Received: by 10.100.42.8 with HTTP; Wed, 16 Apr 2008 13:45:02 -0700 (PDT)
Message-ID: <4b124c310804161345m6c9d16f6s9e791c8bbc966ec8@mail.gmail.com>
Date: Wed, 16 Apr 2008 13:45:02 -0700
From: "Jake Mannix" <jake.mannix@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Pooled searcher (was: Solid State Drives vs. RAMDirectory)
In-Reply-To: <4806374C.1010701@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <1205406224.9126.359.camel@PC990.sb.statsbiblioteket.dk>
	 <4806374C.1010701@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

We started doing the same thing (pooling 1 searcher per core) at my
work when profiling showed a lot of time hitting synchonized blocks
deep inside the SegmentTermReader (? Might be messing the class up)
under high load, due to file read()'s using instance variables for
seeking.  I could dig up the details if you'd like.

-jake



On 4/16/08, Karl Wettin <karl.wettin@gmail.com> wrote:
> Toke Eskildsen skrev:
> > In the log names, t2 signifies 2 threads with a shared
> > searcher, t2u signifies 2 threads with separate searchers.
> >
> > metis_RAM_24GB_i14_v23_t1_l23.log       530.0 q/sec
> > metis_RAM_24GB_i14_v23_t2_l23.log       888.2 q/sec
>
> Did someone end up investigating this thing with pooled searchers and
> why it is a performance boost?
>
>
>          karl
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

-- 
Sent from Gmail for mobile | mobile.google.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33652-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 16 21:56:49 2008
Return-Path: <java-user-return-33652-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74637 invoked from network); 16 Apr 2008 21:56:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Apr 2008 21:56:47 -0000
Received: (qmail 15769 invoked by uid 500); 16 Apr 2008 21:56:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15735 invoked by uid 500); 16 Apr 2008 21:56:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15724 invoked by uid 99); 16 Apr 2008 21:56:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Apr 2008 14:56:40 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [98.136.44.39] (HELO n79.bullet.mail.sp1.yahoo.com) (98.136.44.39)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 16 Apr 2008 21:55:47 +0000
Received: from [216.252.122.216] by n79.bullet.mail.sp1.yahoo.com with NNFMP; 16 Apr 2008 21:56:05 -0000
Received: from [68.142.237.90] by t1.bullet.sp1.yahoo.com with NNFMP; 16 Apr 2008 21:56:05 -0000
Received: from [216.252.111.166] by t6.bullet.re3.yahoo.com with NNFMP; 16 Apr 2008 21:56:05 -0000
Received: from [127.0.0.1] by omp101.mail.re3.yahoo.com with NNFMP; 16 Apr 2008 21:56:05 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 395993.38685.bm@omp101.mail.re3.yahoo.com
Received: (qmail 65899 invoked by uid 60001); 16 Apr 2008 21:56:04 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=UANgqfUGmVj18Kl7LLhZqvjOrHNbtScoM51bHw0klP5hSCQzT0j1aWXm5v2i43HCnTSLkWDZiBr/FT2bnzmsuE5ojWPB9GfzxyAmOr35xfL1ACDHTLdxEBeEctFeR6QbUmPtwOEXqCG8OIZ5qcdc7NpzzpxbTuC+/X6xiex9+ME=;
Received: from [79.201.122.159] by web23014.mail.ird.yahoo.com via HTTP; Wed, 16 Apr 2008 21:56:04 GMT
X-Mailer: YahooMailRC/975.21 YahooMailWebService/0.7.185
Date: Wed, 16 Apr 2008 21:56:04 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Subject: Re: Using Lucene to find duplicate/similar names
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <552019.64731.qm@web23014.mail.ird.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

NGrams will do ok, =0Adepends a lot on what you are up to, if there is a pe=
rson looking at result lists making decision, it will work fine as default =
TF/IDF similarity will give you ok order of hits, but if you need to set so=
me cutoff value to decide automatically if this is a match or not, then you=
 should start digging deeper into record linkage theory.=0A=0Aalso, if you =
need to do deduplication and you have a lot of records then this is going t=
o be slow, e.g you have 20Mio documents means you need to make 20 Mio searc=
hes .... there you need to pull some  tricks =0A=0Aand finally, make your a=
nalyzers smart, normalize data, remove noise like "Mr. Dr, senior...", lowe=
rcase, punctuation, spec characters... standard =0A=0Ahave fun, this is nic=
e problem, looks simple at first sight, but is not!  I've spent last 6 year=
s doing this like this at 500Mio+ documets scale   and is fun, Lucene helps=
 a lot ther, this is nice inverted index lib :)=0A=0A=0A=0A=0A=0A----- Orig=
inal Message ----=0A> From: Andy DePue <andy@marathon-man.com>=0A> To: java=
-user@lucene.apache.org=0A> Sent: Wednesday, 16 April, 2008 7:10:42 PM=0A> =
Subject: Re: Using Lucene to find duplicate/similar names=0A> =0A> Thanks f=
or the pointer.  I found the thread, and there is certainly some =0A> inter=
esting information there.  I'd like to stick to what Lucene has =0A> availa=
ble today, mainly because I lack the time to implement anything =0A> more t=
han that.  I originally thought Levenshtein, but then realized =0A> that Lu=
cene would probably have to do a whole index scan for that?  I =0A> don't n=
eed anything too fancy, so I'm still wondering if NGram with some =0A> sort=
 of proximity ranking would do the trick.  By proximity, I mean, how =0A> c=
losely the NGrams in the document field match in proximity and order to =0A=
> each other as the same NGrams in the search string.  I'm hoping NGrams =
=0A> would avoid the need for a whole index scan.  Does Lucene already fact=
or =0A> this into its hit score, or would I need to do some custom work?=0A=
> =0A>   - Andy=0A> =0A> Grant Ingersoll wrote:=0A> > I believe there were =
some posts on this about a year ago.  Try =0A> > searching in the archives =
for duplicate names, as well as "record =0A> > linkage" or any other variou=
s synonyms that you can think of.  The =0A> > short answer is Lucene is rea=
sonable to attempt this with, but you may =0A> > need some help.  The long =
answer is to dig into those archives and see =0A> > the other recommendatio=
ns.=0A> >=0A> > -Grant=0A> >=0A> > On Apr 16, 2008, at 12:37 PM, Andy DePue=
 wrote:=0A> >=0A> >> I'm new to Lucene, and would like to use it to find du=
plicate (or =0A> >> similar) names in a contact list.  Is Lucene a good fit=
?=0A> >> We have a form where a user enters a company or person's name, and=
 we =0A> >> want the system to warn them if there is already a company or p=
erson =0A> >> entered with the same or similar name.=0A> >> Based on the li=
ttle I know of Lucene, I'm thinking an NGram algorithm =0A> >> (based on ch=
aracters, not words) would work best... but, I'm not sure =0A> >> if Lucene=
 takes proximity or edit distances into account?  For =0A> >> example, say =
you have these two names:=0A> >> Andrew John=0A> >> John Andrew=0A> >>=0A> =
>> If a user enters Andy John, without proximity or edit distance, these =
=0A> >> two names will match about the same, while, obviously, the first na=
me =0A> >> should be ranked higher.=0A> >> Thanks in advance for any help o=
r advice.=0A> >>=0A> >> ---------------------------------------------------=
------------------=0A> >> To unsubscribe, e-mail: java-user-unsubscribe@luc=
ene.apache.org=0A> >> For additional commands, e-mail: java-user-help@lucen=
e.apache.org=0A> >>=0A> >=0A> > --------------------------=0A> > Grant Inge=
rsoll=0A> >=0A> > Lucene Helpful Hints:=0A> > http://wiki.apache.org/lucene=
-java/BasicsOfPerformance=0A> > http://wiki.apache.org/lucene-java/LuceneFA=
Q=0A> >=0A> >=0A> >=0A> >=0A> >=0A> >=0A> >=0A> > -------------------------=
--------------------------------------------=0A> > To unsubscribe, e-mail: =
java-user-unsubscribe@lucene.apache.org=0A> > For additional commands, e-ma=
il: java-user-help@lucene.apache.org=0A> >=0A> >=0A> >=0A> =0A> -----------=
----------------------------------------------------------=0A> To unsubscri=
be, e-mail: java-user-unsubscribe@lucene.apache.org=0A> For additional comm=
ands, e-mail: java-user-help@lucene.apache.org=0A=0A=0A=0A      ___________=
________________________________________________ =0AYahoo! For Good helps y=
ou make a difference  =0A=0Ahttp://uk.promotions.yahoo.com/forgood/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33653-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 17 01:44:05 2008
Return-Path: <java-user-return-33653-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86684 invoked from network); 17 Apr 2008 01:44:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Apr 2008 01:44:04 -0000
Received: (qmail 75898 invoked by uid 500); 17 Apr 2008 01:43:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75872 invoked by uid 500); 17 Apr 2008 01:43:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75861 invoked by uid 99); 17 Apr 2008 01:43:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Apr 2008 18:43:57 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 209.85.128.187 as permitted sender)
Received: from [209.85.128.187] (HELO fk-out-0910.google.com) (209.85.128.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Apr 2008 01:43:14 +0000
Received: by fk-out-0910.google.com with SMTP id 19so3088735fkr.5
        for <java-user@lucene.apache.org>; Wed, 16 Apr 2008 18:43:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=fyD678nDDS6jqtBfJi8h4HRL0GlCpJHFq9nmN1zpuCg=;
        b=DYr2nrFFFByUO0Myy9wnT0Iv/qUFtaRnnrv4GKveMAzhdDOW9eUvRhVpf2+MKJmvyX3uGRsHUwz9iRP3VFeIK41RsopImyZcLMyUtvqf+CdS5IFlg8hoN450gk1oVN7yV3sQOzrutwxc7TuSFL8Y52ZEp/5DQy6x2l45emNUMws=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=Ot+7vCh6iteUWbPvF+gKft5dbQYAEf+NsaltFzjqkiCndDGY2d+AclLEY9rVMwc/JvITsJk1biQOb69SUsyK5T6tefdl+2nAHyO8pWylssuFD3mQtqTq4FYgyfaC9aAzE0gbfDLTbzPeSJ5dYWeNQVdAVk2S8hjPY+Iwq1AJUfc=
Received: by 10.82.158.12 with SMTP id g12mr1146471bue.50.1208396605040;
        Wed, 16 Apr 2008 18:43:25 -0700 (PDT)
Received: from kodapan.local ( [82.93.70.124])
        by mx.google.com with ESMTPS id i7sm6882707nfh.14.2008.04.16.18.43.23
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 16 Apr 2008 18:43:24 -0700 (PDT)
Message-ID: <4806AB3A.7000106@gmail.com>
Date: Thu, 17 Apr 2008 03:43:22 +0200
From: Karl Wettin <karl.wettin@gmail.com>
User-Agent: Thunderbird 2.0.0.12 (Macintosh/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: QueryWrapperFilter question...
References: <652776090804161104m5909f735pa80fe44414faf1d4@mail.gmail.com>
In-Reply-To: <652776090804161104m5909f735pa80fe44414faf1d4@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Michael Stoppelman skrev:
> Hi all,
> I've been doing some performance testing and found that using
> QueryWrapperFilter for a location field
> restriction I have to do allows my search results to approach 5-10ms. This
> was surprising.
> Before the performance was between 50ms-100ms.
> 
> The queries from before the optimization look like the following:
> +(+(text:cats) +(loc:1 loc:2 loc:3 ...))
> 
> The QueryWrapperFilter does do a search itself. Why would performance be so
> drastically different when the
> QueryWrapperFilter needs to do a search? Does lucene just not have the
> statistics to optimize this query so it
> can decide which terms to filter by first?

Do you wonder why a QueryWrapperFilter is faster than a Query? Then the 
answer is that the filter uses a bitset to know if a document matches a 
document or not. For each document that match text:cats it checks the 
flag in the bitset for that document number instead of seeking in the 
index to find out if also match loc:1, loc:2 or loc:3.


      karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33654-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 17 04:37:58 2008
Return-Path: <java-user-return-33654-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56464 invoked from network); 17 Apr 2008 04:37:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Apr 2008 04:37:56 -0000
Received: (qmail 5118 invoked by uid 500); 17 Apr 2008 04:37:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5088 invoked by uid 500); 17 Apr 2008 04:37:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5064 invoked by uid 99); 17 Apr 2008 04:37:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Apr 2008 21:37:50 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of stopman@gmail.com designates 72.14.220.158 as permitted sender)
Received: from [72.14.220.158] (HELO fg-out-1718.google.com) (72.14.220.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Apr 2008 04:37:07 +0000
Received: by fg-out-1718.google.com with SMTP id d23so2838361fga.27
        for <java-user@lucene.apache.org>; Wed, 16 Apr 2008 21:37:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=zGM6eaNbS3WeqqYb8xu+UWEAAx4n2M4uRw+h3R/zJFQ=;
        b=Srj9GRy8GLQu9zPKeTYJiiYbm08lxWccFGmUHznA2NtpxXLo+fjlPMVEwjAtNZmw3Pt8O4j4hqTP1BoJGHS67KiqHRBokHzXQEeLuIZt2hd2bmXMhJytP2YcetD63wZgBEO9mCIlSa5MdEelW955LTZBp7CsLenWS4vMdY3v+Uc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=giNAP3KVdGnBMB01/4pMdJGD8nyVzzeVaSf5QlcmsfH3i014WempoG6nIjuyJ6K1oAcPuW7NI+fgQbtlfzdKp0O4ktBPb6/E6SxfFW24/yP8UhuHwrgVUcun7wMaPzC3aoLLVVmkwfkR62XubDPWM/Pz0AjigbN1enoQLfoepUM=
Received: by 10.82.127.15 with SMTP id z15mr1445602buc.14.1208407038784;
        Wed, 16 Apr 2008 21:37:18 -0700 (PDT)
Received: by 10.82.139.19 with HTTP; Wed, 16 Apr 2008 21:37:18 -0700 (PDT)
Message-ID: <652776090804162137u1dd46b2et8ac02ae8d4872a13@mail.gmail.com>
Date: Wed, 16 Apr 2008 21:37:18 -0700
From: "Michael Stoppelman" <stopman@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: QueryWrapperFilter question...
In-Reply-To: <4806AB3A.7000106@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_510_8221206.1208407038798"
References: <652776090804161104m5909f735pa80fe44414faf1d4@mail.gmail.com>
	 <4806AB3A.7000106@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_510_8221206.1208407038798
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Actually, I screwed up the timing info. I wasn't including the time for the
QueryWrapperFilter#bits(IndexReader) call. Sadly,
it actually takes longer than the original query that had both terms
included. Bummer. I had really convinced myself till the
thought came to me at lunch :).

-M


On Wed, Apr 16, 2008 at 6:43 PM, Karl Wettin <karl.wettin@gmail.com> wrote:

> Michael Stoppelman skrev:
>
>  Hi all,
> > I've been doing some performance testing and found that using
> > QueryWrapperFilter for a location field
> > restriction I have to do allows my search results to approach 5-10ms.
> > This
> > was surprising.
> > Before the performance was between 50ms-100ms.
> >
> > The queries from before the optimization look like the following:
> > +(+(text:cats) +(loc:1 loc:2 loc:3 ...))
> >
> > The QueryWrapperFilter does do a search itself. Why would performance be
> > so
> > drastically different when the
> > QueryWrapperFilter needs to do a search? Does lucene just not have the
> > statistics to optimize this query so it
> > can decide which terms to filter by first?
> >
>
> Do you wonder why a QueryWrapperFilter is faster than a Query? Then the
> answer is that the filter uses a bitset to know if a document matches a
> document or not. For each document that match text:cats it checks the flag
> in the bitset for that document number instead of seeking in the index to
> find out if also match loc:1, loc:2 or loc:3.
>
>
>     karl
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_510_8221206.1208407038798--

From java-user-return-33655-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 17 06:30:40 2008
Return-Path: <java-user-return-33655-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28394 invoked from network); 17 Apr 2008 06:30:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Apr 2008 06:30:40 -0000
Received: (qmail 11632 invoked by uid 500); 17 Apr 2008 06:30:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11542 invoked by uid 500); 17 Apr 2008 06:30:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11485 invoked by uid 99); 17 Apr 2008 06:30:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Apr 2008 23:30:33 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [202.137.233.110] (HELO rediff.co.in) (202.137.233.110)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Apr 2008 06:29:50 +0000
Received: (qmail 11060 invoked from network); 17 Apr 2008 12:01:52 +0530
Received: from unknown (HELO bhavin) (192.168.30.9)
  by mailserver with SMTP; 17 Apr 2008 12:01:52 +0530
Message-ID: <001401c8a055$da10af50$7f0310ac@bhavin>
Reply-To: "Bhavin Pandya" <bhavinp@rediff.co.in>
From: "Bhavin Pandya" <bhavinp@rediff.co.in>
To: <java-user@lucene.apache.org>
Subject: Any idea ?
Date: Thu, 17 Apr 2008 12:09:56 +0530
Organization: rediff.com
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0011_01C8A083.F3A2C5B0"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0011_01C8A083.F3A2C5B0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi,

I am getting this exception sometimes while searching.. .Any idea what =
could be problem ?

java.lang.NullPointerException
        at =
org.apache.lucene.search.MultiSearcherThread.hits(ParallelMultiSearcher.j=
ava:286)
        at =
org.apache.lucene.search.ParallelMultiSearcher.search(ParallelMultiSearch=
er.java:87)
        at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:65)
        at org.apache.lucene.search.Hits.<init>(Hits.java:44)
        at org.apache.lucene.search.Searcher.search(Searcher.java:44)
        at org.apache.lucene.search.Searcher.search(Searcher.java:36)
        at _searcher__jsp._jspService(_searcher__jsp.java:185)
        at com.caucho.jsp.JavaPage.service(JavaPage.java:75)
        at com.caucho.jsp.Page.subservice(Page.java:506)
        at =
com.caucho.server.http.FilterChainPage.doFilter(FilterChainPage.java:182)=

        at =
com.caucho.server.http.Invocation.service(Invocation.java:315)
        at =
com.caucho.server.http.CacheInvocation.service(CacheInvocation.java:135)
        at =
com.caucho.server.http.RunnerRequest.handleRequest(RunnerRequest.java:346=
)
        at =
com.caucho.server.http.RunnerRequest.handleConnection(RunnerRequest.java:=
274)
        at com.caucho.server.TcpConnection.run(TcpConnection.java:139)
        at java.lang.Thread.run(Thread.java:534)

I am using lucene 1.9 and j2sdk1.4.2_05.

Thanks.
Bhavin pandya

------=_NextPart_000_0011_01C8A083.F3A2C5B0--


From java-user-return-33656-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 17 06:55:10 2008
Return-Path: <java-user-return-33656-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51744 invoked from network); 17 Apr 2008 06:55:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Apr 2008 06:55:07 -0000
Received: (qmail 49950 invoked by uid 500); 17 Apr 2008 06:55:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49923 invoked by uid 500); 17 Apr 2008 06:55:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49912 invoked by uid 99); 17 Apr 2008 06:55:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Apr 2008 23:55:00 -0700
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,URIBL_BLACK
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mudgal.shailendra@gmail.com designates 209.85.200.170 as permitted sender)
Received: from [209.85.200.170] (HELO wf-out-1314.google.com) (209.85.200.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Apr 2008 06:54:16 +0000
Received: by wf-out-1314.google.com with SMTP id 28so2857906wff.20
        for <java-user@lucene.apache.org>; Wed, 16 Apr 2008 23:54:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=A+EfknvSOVSZbyowV9sBPcGxSFTzUZCJ7UyQF7ZfBps=;
        b=HLz9mMJnSWqDLlDI1QNpQNEBPz+DbUyzjGJ++tfVoY77FqbvRSHAKl2NNQuCmxaSpGqg8+NXp6ckjpP8sK2wtP73X9Dc6q3PD2EyifRPaYHgBnyWTN83eSPz/VTXC0XIBqLwpzyQoVHyoT42hY4W/W3gsr9VFfs+v5136PvxBNA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=ndnR0AxcUSNLQkooGXYLx4IteDXYqUEjNh3gm7cMPpXWiGaDKxN5x26Kenx7LFfmuOALYgXq8hukiYYiLkCamuYgQcphj3Aig+EQ8SMvAjqZs8qDWzg2/+W/IFY6fjsActQAdtEvoeTG23CRATX837XyF1WHI5H74dCKiCrNQXI=
Received: by 10.142.143.7 with SMTP id q7mr322098wfd.3.1208415269534;
        Wed, 16 Apr 2008 23:54:29 -0700 (PDT)
Received: by 10.142.172.16 with HTTP; Wed, 16 Apr 2008 23:54:29 -0700 (PDT)
Message-ID: <fa7518640804162354u5c991d74u6d1f17eb4dc97342@mail.gmail.com>
Date: Thu, 17 Apr 2008 12:24:29 +0530
From: "Shailendra Mudgal" <mudgal.shailendra@gmail.com>
To: java-user@lucene.apache.org
Subject: need a better way of caching the value of a field ???
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7670_1805194.1208415269542"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_7670_1805194.1208415269542
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi folks,

I am using a MultiSearcher object which uses 4 months indexes. I have a
requirement for which i need to cache one field for documents which are less
then one month old. So for that i am first creating a date query(for last
one month) and using HitCollector.collect() for collecting Document ids for
all those documents who matched the criteria and save those ids in a
Bitset.  And then i created an array of size equal to the number of
documents collected as a result. Now i iterate through the Bitset, and read
that particular field from each document and storing it the position which
matches with its document ids.
Here is the code snippet for that :


   private ArrayList[] compIdCache = null;

    public void warmUpFieldCache(MultiSearcher searcher, Query query) {
        ArrayList list = null;
        Document document = null;
        String[] mappedCompanies = null;

        try {
            final BitSet bitSet = new BitSet(searcher.maxDoc());
            searcher.search(query, new HitCollector() {
                public void collect(int id, float score) {
                    bitSet.set(id);
                }
            });

            compIdCache = new ArrayList [bitSet.cardinality()];
            MapFieldSelector selector = new MapFieldSelector(new String[]
{COMPANY_ID});

            for(int i=bitSet.nextSetBit(0); i>=0 && i < compIdCache.length;
i=bitSet.nextSetBit(i+1)) {
                document = searcher.doc(i, selector);
                mappedCompanies = document.getValues(COMPANY_ID);
                compIdCache  [i] = mappedCompanies ;
            }
        } catch (IOException e) {
            logger.info("searcher.maxDoc() throws exception :"
+e.getMessage());
        }
    }


I have another method which queries for last month documents and uses their
document ids(collected using hitCollector.collect()) to extract field value
from the compIdCache.
So here i have a confusion : Is this way of solving the problem is fine ? or
are their some other ways to solve this problem.

------=_Part_7670_1805194.1208415269542--

From java-user-return-33657-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 17 07:07:46 2008
Return-Path: <java-user-return-33657-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60818 invoked from network); 17 Apr 2008 07:07:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Apr 2008 07:07:46 -0000
Received: (qmail 72238 invoked by uid 500); 17 Apr 2008 07:07:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72195 invoked by uid 500); 17 Apr 2008 07:07:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72184 invoked by uid 99); 17 Apr 2008 07:07:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Apr 2008 00:07:38 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [194.109.24.36] (HELO smtp-vbr16.xs4all.nl) (194.109.24.36)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Apr 2008 07:06:46 +0000
Received: from k8u.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr16.xs4all.nl (8.13.8/8.13.8) with ESMTP id m3H777Bu007485
	for <java-user@lucene.apache.org>; Thu, 17 Apr 2008 09:07:07 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: QueryWrapperFilter question...
Date: Thu, 17 Apr 2008 09:07:06 +0200
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <652776090804161104m5909f735pa80fe44414faf1d4@mail.gmail.com> <4806AB3A.7000106@gmail.com> <652776090804162137u1dd46b2et8ac02ae8d4872a13@mail.gmail.com>
In-Reply-To: <652776090804162137u1dd46b2et8ac02ae8d4872a13@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200804170907.07129.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Op Thursday 17 April 2008 06:37:18 schreef Michael Stoppelman:
> Actually, I screwed up the timing info. I wasn't including the time
> for the QueryWrapperFilter#bits(IndexReader) call. Sadly,
> it actually takes longer than the original query that had both terms
> included. Bummer. I had really convinced myself till the
> thought came to me at lunch :).

For a single query, adding a filter off course has a cost.
But when the location part can be reused in later queries,
give CachingWrapperFilter a try.

Regards,
Paul Elschot


>
> -M
>
> On Wed, Apr 16, 2008 at 6:43 PM, Karl Wettin <karl.wettin@gmail.com> 
wrote:
> > Michael Stoppelman skrev:
> >
> >  Hi all,
> >
> > > I've been doing some performance testing and found that using
> > > QueryWrapperFilter for a location field
> > > restriction I have to do allows my search results to approach
> > > 5-10ms. This
> > > was surprising.
> > > Before the performance was between 50ms-100ms.
> > >
> > > The queries from before the optimization look like the following:
> > > +(+(text:cats) +(loc:1 loc:2 loc:3 ...))
> > >
> > > The QueryWrapperFilter does do a search itself. Why would
> > > performance be so
> > > drastically different when the
> > > QueryWrapperFilter needs to do a search? Does lucene just not
> > > have the statistics to optimize this query so it
> > > can decide which terms to filter by first?
> >
> > Do you wonder why a QueryWrapperFilter is faster than a Query? Then
> > the answer is that the filter uses a bitset to know if a document
> > matches a document or not. For each document that match text:cats
> > it checks the flag in the bitset for that document number instead
> > of seeking in the index to find out if also match loc:1, loc:2 or
> > loc:3.
> >
> >
> >     karl
> >
> > -------------------------------------------------------------------
> >-- To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33658-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 17 12:15:14 2008
Return-Path: <java-user-return-33658-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16114 invoked from network); 17 Apr 2008 12:15:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Apr 2008 12:15:14 -0000
Received: (qmail 1319 invoked by uid 500); 17 Apr 2008 12:15:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1295 invoked by uid 500); 17 Apr 2008 12:15:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1284 invoked by uid 99); 17 Apr 2008 12:15:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Apr 2008 05:15:07 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Apr 2008 12:14:23 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JmT0e-0007AI-94
	for java-user@lucene.apache.org; Thu, 17 Apr 2008 05:14:36 -0700
Message-ID: <16743559.post@talk.nabble.com>
Date: Thu, 17 Apr 2008 05:14:36 -0700 (PDT)
From: Britske <gbrits@gmail.com>
To: java-user@lucene.apache.org
Subject: Does LUCENE-831) "Complete overhaul of FieldCache API" provide
 fieldcache offloading to disk?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: gbrits@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


I've seen some recent activity on LUCENE-831 "Complete overhaul of FieldCache
API" and read that it must be able to cleanly patch to trunk (haven't tried
yet). 

What I'd like to know from people involved is if this patch incorporates
offloading of fieldcache to disk, or if this hasn't yet been taken into
account. As far as I can follow it, this was one of the initial intentions. 

Thanks,
Britske
-- 
View this message in context: http://www.nabble.com/Does-LUCENE-831%29-%22Complete-overhaul-of-FieldCache-API%22-provide-fieldcache-offloading-to-disk--tp16743559p16743559.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33659-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 17 13:23:43 2008
Return-Path: <java-user-return-33659-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51857 invoked from network); 17 Apr 2008 13:23:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Apr 2008 13:23:41 -0000
Received: (qmail 26228 invoked by uid 500); 17 Apr 2008 13:23:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26192 invoked by uid 500); 17 Apr 2008 13:23:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26181 invoked by uid 99); 17 Apr 2008 13:23:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Apr 2008 06:23:34 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [194.138.12.133] (HELO mxs2.siemens.at) (194.138.12.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Apr 2008 13:22:40 +0000
Received: from vies1kbx.sie.siemens.at ([158.226.129.82])
	by mxs2.siemens.at  with ESMTP id m3HDMwTI006234
	for <java-user@lucene.apache.org>; Thu, 17 Apr 2008 15:22:58 +0200
Received: from nets139a.ww300.siemens.net ([192.168.217.3])
	by vies1kbx.sie.siemens.at (8.12.11.20060308/8.12.1) with ESMTP id m3HDMx69010249
	for <java-user@lucene.apache.org>; Thu, 17 Apr 2008 15:22:59 +0200
Received: from nets13ja.ww300.siemens.net ([158.226.250.79]) by nets139a.ww300.siemens.net with Microsoft SMTPSVC(6.0.3790.3959);
	 Thu, 17 Apr 2008 15:22:58 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C8A08E.274E0722"
Subject: lucene can't find segments file
Date: Thu, 17 Apr 2008 15:22:58 +0200
Message-ID: <30DB6ACF50A0A3439F39EFEB1C52E16606E729B0@nets13ja.ww300.siemens.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: lucene can't find segments file
Thread-Index: AcigjidA/lnB5wwrRFuHMsl3byZVjA==
From: "Hoelzl, Thomas" <thomas.hoelzl@siemens.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 17 Apr 2008 13:22:58.0739 (UTC) FILETIME=[276E2830:01C8A08E]
X-purgate:  clean
X-purgate:  This mail is considered clean
X-purgate-type:  clean
X-purgate-Ad:  Checked for Spam by eleven - eXpurgate www.eXpurgate.net
X-purgate-ID:  149917::080417152258-0BAC4BA0-55EA0A73/0-0/0-15
X-purgate-size:  11541/999999
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C8A08E.274E0722
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi all!
=20
I have some problems running my lucene application on linux (suse).
=20
lucene can't find segments file. is the errormessage I get in the
browser.
=20
I don't understand why it is trying to find a "segments" file. My
index-dir doesn't contain that particular file.=20
=20
It contains the following files.
=20
master:/home/thomas/keywordsearch/etc # ls
/usr/local/jboss-3.2.7/server/default/conf/index/

  ..  _2.cfs  segments.gen  segments_9

=20
I have checked the index using luke and it is good. In addition it works
on Windows.
=20
Can anybody tell me why it is searching for a file called "segments"?
Where is my mistake?
=20
=20
The indexName points to /usr/local/jboss-3.2.7/server/default/conf/index
=20
code where the exception is thrown:
=20
=20
...
=20
 try {
          searcher =3D new IndexSearcher(indexName);      //create an
indexSearcher for our page
                                                        //NOTE: this
operation is slow for large
                                                        //indices (much
slower than the search itself)
                                                        //so you might
want to keep an IndexSearcher
                                                        //open
=20
        } catch (Exception e) {                         //any error that
happens is probably due
                                                        //to a
permission problem or non-existant
                                                        //or otherwise
corrupt index
        StackTraceElement[] es =3D e.getStackTrace();
                String s =3D "";
                for (int i =3D 0; i<es.length; i++)
=20
s+=3D((StackTraceElement)es[i]).getClassName()+"+++"+((StackTraceElement)=
e
s[i]).getMethodName()+"\r\n";
=20
%>
                <p>ERROR opening the Index - contact sysadmin!</p>
                <p><%=3DescapeHTML(indexLocation)%></p>
                <p>Error message: <%=3DescapeHTML(e.getMessage())%></p>
                <p>Error message: <%=3DescapeHTML(s)%></p>
<%                error =3D true;                                  =
//don't
do anything up to the footer
        }

Thanks for all help
=20
Thomas
=20

------_=_NextPart_001_01C8A08E.274E0722--

From java-user-return-33660-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 17 13:50:12 2008
Return-Path: <java-user-return-33660-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66493 invoked from network); 17 Apr 2008 13:50:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Apr 2008 13:50:11 -0000
Received: (qmail 85039 invoked by uid 500); 17 Apr 2008 13:50:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84998 invoked by uid 500); 17 Apr 2008 13:50:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84987 invoked by uid 99); 17 Apr 2008 13:50:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Apr 2008 06:50:04 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 209.85.132.246 as permitted sender)
Received: from [209.85.132.246] (HELO an-out-0708.google.com) (209.85.132.246)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Apr 2008 13:49:20 +0000
Received: by an-out-0708.google.com with SMTP id c5so18165anc.49
        for <java-user@lucene.apache.org>; Thu, 17 Apr 2008 06:49:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:subject:from:to:in-reply-to:references:content-type:date:message-id:mime-version:x-mailer:content-transfer-encoding;
        bh=nusTwoOz0g9mVxUaPoJz/N2dstazt1ttn1/ooe6IkUE=;
        b=fhYLvyYkDZ7pt3RaWa7oq11oh+bw7KEyhdlx605+u8WeLzWtDDu8sFcgFodXAktEVcb/0zGjjkapQvhUQjllJIF5R/t/m9S/Bl/Zhst2xGwyYD1+mwW2ikUV2kxT+eMnvOSf4fbYf+g2KeIgFBiNFJr45GJ9zhyfOMEIx4VdMyo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=subject:from:to:in-reply-to:references:content-type:date:message-id:mime-version:x-mailer:content-transfer-encoding;
        b=D0NW50SVU6CRJ38xifp0/ONFe7VEtIY5CAEkzpVdxKWvJp0xGU4R812oqpFnn+EB8lLOLDfiOO0uqLOxaJffwQOlnuhJroYl/hHPT+r0uJcwj16jMeUzi2uE9enC/Ao2Iacb8mlG/Z+Tkn0mib5o2tCQ5N2ivyhA2YLcZPjYQ0E=
Received: by 10.100.225.19 with SMTP id x19mr2658949ang.16.1208440165303;
        Thu, 17 Apr 2008 06:49:25 -0700 (PDT)
Received: from ?192.168.1.104? ( [216.66.119.110])
        by mx.google.com with ESMTPS id c16sm17164365anc.10.2008.04.17.06.49.18
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 17 Apr 2008 06:49:23 -0700 (PDT)
Subject: Re: Does LUCENE-831) "Complete overhaul of FieldCache API" provide
	fieldcache offloading to disk?
From: Mark Miller <markrmiller@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <16743559.post@talk.nabble.com>
References: <16743559.post@talk.nabble.com>
Content-Type: text/plain
Date: Thu, 17 Apr 2008 09:49:10 -0400
Message-Id: <1208440150.6498.10.camel@m-laptop>
Mime-Version: 1.0
X-Mailer: Evolution 2.22.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

It does not specifically incorporate caching to disk, but what it does
do is easily allow you to provide a new Cache implementation. The
default implementation is just a simple in memory Map, but its trivial
to provide a new implementation using something like EHCache to back the
Cache implementation.

I don't know if caching to disk will really be that much of a benefit,
so if you play around I would love to hear your results.

The big benefit is
if you are reopening Readers with field caches, it can be waaay faster.


- Mark

On Thu, 2008-04-17 at 05:14 -0700, Britske wrote:
> I've seen some recent activity on LUCENE-831 "Complete overhaul of FieldCache
> API" and read that it must be able to cleanly patch to trunk (haven't tried
> yet). 
> 
> What I'd like to know from people involved is if this patch incorporates
> offloading of fieldcache to disk, or if this hasn't yet been taken into
> account. As far as I can follow it, this was one of the initial intentions. 
> 
> Thanks,
> Britske


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33661-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 17 14:05:35 2008
Return-Path: <java-user-return-33661-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76475 invoked from network); 17 Apr 2008 14:05:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Apr 2008 14:05:35 -0000
Received: (qmail 27720 invoked by uid 500); 17 Apr 2008 14:05:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27692 invoked by uid 500); 17 Apr 2008 14:05:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27681 invoked by uid 99); 17 Apr 2008 14:05:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Apr 2008 07:05:28 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.146.183] (HELO wa-out-1112.google.com) (209.85.146.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Apr 2008 14:04:44 +0000
Received: by wa-out-1112.google.com with SMTP id j40so132978wah.11
        for <java-user@lucene.apache.org>; Thu, 17 Apr 2008 07:04:35 -0700 (PDT)
Received: by 10.115.95.1 with SMTP id x1mr1444864wal.122.1208441075819;
        Thu, 17 Apr 2008 07:04:35 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 61sm1709759wry.13.2008.04.17.07.04.33
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 17 Apr 2008 07:04:34 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <30DB6ACF50A0A3439F39EFEB1C52E16606E729B0@nets13ja.ww300.siemens.net>
References: <30DB6ACF50A0A3439F39EFEB1C52E16606E729B0@nets13ja.ww300.siemens.net>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <475799FC-70C5-4349-A22E-34EA0387B6D9@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: lucene can't find segments file
Date: Thu, 17 Apr 2008 10:05:02 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


It seems likely you are using an older version of Lucene to access an  
index created by a newer version of Lucene?

Mike

Hoelzl, Thomas wrote:
> Hi all!
>
> I have some problems running my lucene application on linux (suse).
>
> lucene can't find segments file. is the errormessage I get in the
> browser.
>
> I don't understand why it is trying to find a "segments" file. My
> index-dir doesn't contain that particular file.
>
> It contains the following files.
>
> master:/home/thomas/keywordsearch/etc # ls
> /usr/local/jboss-3.2.7/server/default/conf/index/
>
>   ..  _2.cfs  segments.gen  segments_9
>
>
> I have checked the index using luke and it is good. In addition it  
> works
> on Windows.
>
> Can anybody tell me why it is searching for a file called "segments"?
> Where is my mistake?
>
>
> The indexName points to /usr/local/jboss-3.2.7/server/default/conf/ 
> index
>
> code where the exception is thrown:
>
>
> ...
>
>  try {
>           searcher = new IndexSearcher(indexName);      //create an
> indexSearcher for our page
>                                                         //NOTE: this
> operation is slow for large
>                                                         //indices  
> (much
> slower than the search itself)
>                                                         //so you might
> want to keep an IndexSearcher
>                                                         //open
>
>         } catch (Exception e) {                         //any error  
> that
> happens is probably due
>                                                         //to a
> permission problem or non-existant
>                                                         //or otherwise
> corrupt index
>         StackTraceElement[] es = e.getStackTrace();
>                 String s = "";
>                 for (int i = 0; i<es.length; i++)
>
> s+=((StackTraceElement)es[i]).getClassName()+"+++"+ 
> ((StackTraceElement)e
> s[i]).getMethodName()+"\r\n";
>
> %>
>                 <p>ERROR opening the Index - contact sysadmin!</p>
>                 <p><%=escapeHTML(indexLocation)%></p>
>                 <p>Error message: <%=escapeHTML(e.getMessage())%></p>
>                 <p>Error message: <%=escapeHTML(s)%></p>
> <%                error = true;                                  // 
> don't
> do anything up to the footer
>         }
>
> Thanks for all help
>
> Thomas
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33662-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 17 14:07:51 2008
Return-Path: <java-user-return-33662-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77739 invoked from network); 17 Apr 2008 14:07:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Apr 2008 14:07:51 -0000
Received: (qmail 32781 invoked by uid 500); 17 Apr 2008 14:07:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32640 invoked by uid 500); 17 Apr 2008 14:07:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32625 invoked by uid 99); 17 Apr 2008 14:07:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Apr 2008 07:07:45 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [193.173.159.35] (HELO mailsweeper.otra-int.com) (193.173.159.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Apr 2008 14:06:54 +0000
Received: from nlnotes001.otra-int.com (unverified) by 
    mailsweeper.otra-int.com (Clearswift SMTPRS 5.2.9) with ESMTP id 
    <T866989a25f0a030302f18@mailsweeper.otra-int.com> for 
    <java-user@lucene.apache.org>; Thu, 17 Apr 2008 16:04:05 +0200
In-Reply-To: <E43951BC-A09B-4641-8724-B2FBDC109A6E@apache.org>
Subject: LinkedIn Lucene Interest Group
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 6.5.2 June 01, 2004
Message-ID: <OF8724351F.49BA5C96-ONC125742E.004D84FA-C125742E.004DC31C@otra-int.com>
From: Wilfred Beijer <wilfred.beijer@sonepar.nl>
Date: Thu, 17 Apr 2008 16:09:38 +0200
X-MIMETrack: Serialize by Router on 
    NLASVHUB01/SRV/SONEPAR(Release 7.0.3|September 26, 2007) at 
    17-04-2008 16:09:23
MIME-Version: 1.0
Content-type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hello all,

De email adress for the group owner of the LinkedIn Lucene Interest Group
doesn't seem to work. Is this group still alive ?

Kind regards,

Wilfred Beijer



=======================================================
The information contained in this email is confidential and privileged. It
may be read, copied and used only by the intended recipient. If you have
received it in error, please contact the sender immediately by return
email; please delete in this case the email and do not disclose its
contents to any person. We don't accept liability for any errors,
omissions, delays of receipt or viruses in the contents of this message
which arise as a result of email transmission.
=======================================================


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33663-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 17 14:23:23 2008
Return-Path: <java-user-return-33663-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85623 invoked from network); 17 Apr 2008 14:23:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Apr 2008 14:23:23 -0000
Received: (qmail 69885 invoked by uid 500); 17 Apr 2008 14:23:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69851 invoked by uid 500); 17 Apr 2008 14:23:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69838 invoked by uid 99); 17 Apr 2008 14:23:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Apr 2008 07:23:16 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [194.138.12.131] (HELO mxs1.siemens.at) (194.138.12.131)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Apr 2008 14:22:23 +0000
Received: from vies1k7x.sie.siemens.at ([158.226.129.83])
	by mxs1.siemens.at  with ESMTP id m3HEMiFQ001377
	for <java-user@lucene.apache.org>; Thu, 17 Apr 2008 16:22:44 +0200
Received: from nets138a.ww300.siemens.net ([192.168.217.3])
	by vies1k7x.sie.siemens.at (8.12.11.20060308/8.12.1) with ESMTP id m3HEMiQd002255
	for <java-user@lucene.apache.org>; Thu, 17 Apr 2008 16:22:44 +0200
Received: from nets13ja.ww300.siemens.net ([158.226.250.79]) by nets138a.ww300.siemens.net with Microsoft SMTPSVC(6.0.3790.3959);
	 Thu, 17 Apr 2008 16:22:43 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: AW: lucene can't find segments file
Date: Thu, 17 Apr 2008 16:22:43 +0200
Message-ID: <30DB6ACF50A0A3439F39EFEB1C52E16606E729F9@nets13ja.ww300.siemens.net>
In-Reply-To: <475799FC-70C5-4349-A22E-34EA0387B6D9@mikemccandless.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: lucene can't find segments file
Thread-Index: AciglFMwTSUDGrEuSOmUKco/9LkDvgAAe42Q
References: <30DB6ACF50A0A3439F39EFEB1C52E16606E729B0@nets13ja.ww300.siemens.net> <475799FC-70C5-4349-A22E-34EA0387B6D9@mikemccandless.com>
From: "Hoelzl, Thomas" <thomas.hoelzl@siemens.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 17 Apr 2008 14:22:43.0404 (UTC) FILETIME=[800EA0C0:01C8A096]
X-purgate:  clean
X-purgate:  This mail is considered clean
X-purgate-type:  clean
X-purgate-Ad:  Checked for Spam by eleven - eXpurgate www.eXpurgate.net
X-purgate-ID:  149917::080417162244-265B9BB0-6329A87A/0-0/0-15
X-purgate-size:  3103/0
X-Virus-Checked: Checked by ClamAV on apache.org

Great Mike!!!=20

I found a old version of it in the lib dir of tomcat (not the of the =
actual webapp)

No it's working!

Thanks!!!!


-----Urspr=FCngliche Nachricht-----
Von: Michael McCandless [mailto:lucene@mikemccandless.com]=20
Gesendet: Donnerstag, 17. April 2008 16:05
An: java-user@lucene.apache.org
Betreff: Re: lucene can't find segments file


It seems likely you are using an older version of Lucene to access an =
index created by a newer version of Lucene?

Mike

Hoelzl, Thomas wrote:
> Hi all!
>
> I have some problems running my lucene application on linux (suse).
>
> lucene can't find segments file. is the errormessage I get in the=20
> browser.
>
> I don't understand why it is trying to find a "segments" file. My=20
> index-dir doesn't contain that particular file.
>
> It contains the following files.
>
> master:/home/thomas/keywordsearch/etc # ls=20
> /usr/local/jboss-3.2.7/server/default/conf/index/
>
>   ..  _2.cfs  segments.gen  segments_9
>
>
> I have checked the index using luke and it is good. In addition it=20
> works on Windows.
>
> Can anybody tell me why it is searching for a file called "segments"?
> Where is my mistake?
>
>
> The indexName points to /usr/local/jboss-3.2.7/server/default/conf/
> index
>
> code where the exception is thrown:
>
>
> ...
>
>  try {
>           searcher =3D new IndexSearcher(indexName);      //create an
> indexSearcher for our page
>                                                         //NOTE: this=20
> operation is slow for large
>                                                         //indices=20
> (much slower than the search itself)
>                                                         //so you might =

> want to keep an IndexSearcher
>                                                         //open
>
>         } catch (Exception e) {                         //any error =20
> that
> happens is probably due
>                                                         //to a=20
> permission problem or non-existant
>                                                         //or otherwise =

> corrupt index
>         StackTraceElement[] es =3D e.getStackTrace();
>                 String s =3D "";
>                 for (int i =3D 0; i<es.length; i++)
>
> s+=3D((StackTraceElement)es[i]).getClassName()+"+++"+
> ((StackTraceElement)e
> s[i]).getMethodName()+"\r\n";
>
> %>
>                 <p>ERROR opening the Index - contact sysadmin!</p>
>                 <p><%=3DescapeHTML(indexLocation)%></p>
>                 <p>Error message: =
<%=3DescapeHTML(e.getMessage())%></p>
>                 <p>Error message: <%=3DescapeHTML(s)%></p>
> <%                error =3D true;                                  //=20
> don't
> do anything up to the footer
>         }
>
> Thanks for all help
>
> Thomas
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33664-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 17 16:17:37 2008
Return-Path: <java-user-return-33664-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90071 invoked from network); 17 Apr 2008 16:17:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Apr 2008 16:17:37 -0000
Received: (qmail 57386 invoked by uid 500); 17 Apr 2008 16:17:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57358 invoked by uid 500); 17 Apr 2008 16:17:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57335 invoked by uid 99); 17 Apr 2008 16:17:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Apr 2008 09:17:16 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 209.85.134.190 as permitted sender)
Received: from [209.85.134.190] (HELO mu-out-0910.google.com) (209.85.134.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Apr 2008 16:16:32 +0000
Received: by mu-out-0910.google.com with SMTP id w9so144036mue.5
        for <java-user@lucene.apache.org>; Thu, 17 Apr 2008 09:16:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=4XkBSu11mQxWasTjnXgHnfstAtG9sPVfRv0kHGy57/0=;
        b=lLcEXhMjngn1/9dzGwm+Y1TK1iSbZXzU9OgcImXOE2aTTqUdnWLpzpMiMJt3JWFfYLhM1FPwJPFYeMfF+dGXIZw4Wsi6BdDE71047QQZEycZyuGi2xTGKdwVJHh2PXgYZqMaCplGeY13jMn0X6j3AuF9mhE7Fe2ltMqz78VYvXA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=IxwHCzIGfBL/rGUNtTTJimcmDUi6pUdO/JUA4vUnpwQRmlwqm7Z+NRjcwjP8vfq9SJoWWq3BdNPIIm/RdtJ2Dq7sa6fkOPF+qj0Jk5P5tZW+U6AFEkQN9jkaZzEfRBERfzzxIbEGU2PbcUlJUUUUkHkqt6Se/F0y2u9sjH5kDSI=
Received: by 10.82.188.14 with SMTP id l14mr2556545buf.66.1208449004039;
        Thu, 17 Apr 2008 09:16:44 -0700 (PDT)
Received: from kodapan.lan ( [82.93.70.124])
        by mx.google.com with ESMTPS id n10sm15515193mue.18.2008.04.17.09.16.42
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 17 Apr 2008 09:16:42 -0700 (PDT)
Message-ID: <480777E9.905@gmail.com>
Date: Thu, 17 Apr 2008 18:16:41 +0200
From: Karl Wettin <karl.wettin@gmail.com>
User-Agent: Thunderbird 2.0.0.12 (Macintosh/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Pooled searcher
References: <1205406224.9126.359.camel@PC990.sb.statsbiblioteket.dk>	 <4806374C.1010701@gmail.com> <4b124c310804161345m6c9d16f6s9e791c8bbc966ec8@mail.gmail.com>
In-Reply-To: <4b124c310804161345m6c9d16f6s9e791c8bbc966ec8@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

It would be great if you did. Please reply in LUCENE-1265.


Jake Mannix skrev:
> We started doing the same thing (pooling 1 searcher per core) at my
> work when profiling showed a lot of time hitting synchonized blocks
> deep inside the SegmentTermReader (? Might be messing the class up)
> under high load, due to file read()'s using instance variables for
> seeking.  I could dig up the details if you'd like.
> 
> -jake
> 
> 
> 
> On 4/16/08, Karl Wettin <karl.wettin@gmail.com> wrote:
>> Toke Eskildsen skrev:
>>> In the log names, t2 signifies 2 threads with a shared
>>> searcher, t2u signifies 2 threads with separate searchers.
>>>
>>> metis_RAM_24GB_i14_v23_t1_l23.log       530.0 q/sec
>>> metis_RAM_24GB_i14_v23_t2_l23.log       888.2 q/sec
>> Did someone end up investigating this thing with pooled searchers and
>> why it is a performance boost?
>>
>>
>>          karl
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33665-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 17 17:26:03 2008
Return-Path: <java-user-return-33665-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36685 invoked from network); 17 Apr 2008 17:26:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Apr 2008 17:26:03 -0000
Received: (qmail 42520 invoked by uid 500); 17 Apr 2008 17:25:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42491 invoked by uid 500); 17 Apr 2008 17:25:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42480 invoked by uid 99); 17 Apr 2008 17:25:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Apr 2008 10:25:56 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Apr 2008 17:25:05 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JmXrR-00018o-Sz
	for java-user@lucene.apache.org; Thu, 17 Apr 2008 10:25:25 -0700
Message-ID: <16747733.post@talk.nabble.com>
Date: Thu, 17 Apr 2008 10:25:25 -0700 (PDT)
From: Britske <gbrits@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Does LUCENE-831) "Complete overhaul of FieldCache API" provide
 fieldcache offloading to disk?
In-Reply-To: <1208440150.6498.10.camel@m-laptop>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: gbrits@gmail.com
References: <16743559.post@talk.nabble.com> <1208440150.6498.10.camel@m-laptop>
X-Virus-Checked: Checked by ClamAV on apache.org


The obstacle I'm seeing is that I have a lot of fields which use sorting.
Sooner or later this will give an OutOfMem-error since the field-cache grows
too large. Am i correct in assuming that implementing for instance a EHCache
with flush-to-disk would solve this issue?  (With a tradeoff for performance
of course)

Moreover, when warming readers with the patch, thus having 2 reader open at
the same time (I am using solr searchers btw, but I guess these use the same
underlying lucene-code, I'll have to check) can these 2 readers shares the
same fieldcache and thus eliminate the required double memory  while
warming? 

Thanks.


markrmiller wrote:
> 
> It does not specifically incorporate caching to disk, but what it does
> do is easily allow you to provide a new Cache implementation. The
> default implementation is just a simple in memory Map, but its trivial
> to provide a new implementation using something like EHCache to back the
> Cache implementation.
> 
> I don't know if caching to disk will really be that much of a benefit,
> so if you play around I would love to hear your results.
> 
> The big benefit is
> if you are reopening Readers with field caches, it can be waaay faster.
> 
> 
> - Mark
> 
> On Thu, 2008-04-17 at 05:14 -0700, Britske wrote:
>> I've seen some recent activity on LUCENE-831 "Complete overhaul of
>> FieldCache
>> API" and read that it must be able to cleanly patch to trunk (haven't
>> tried
>> yet). 
>> 
>> What I'd like to know from people involved is if this patch incorporates
>> offloading of fieldcache to disk, or if this hasn't yet been taken into
>> account. As far as I can follow it, this was one of the initial
>> intentions. 
>> 
>> Thanks,
>> Britske
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Does-LUCENE-831%29-%22Complete-overhaul-of-FieldCache-API%22-provide-fieldcache-offloading-to-disk--tp16743559p16747733.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33666-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 17 17:46:21 2008
Return-Path: <java-user-return-33666-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51816 invoked from network); 17 Apr 2008 17:46:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Apr 2008 17:46:21 -0000
Received: (qmail 94879 invoked by uid 500); 17 Apr 2008 17:46:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94848 invoked by uid 500); 17 Apr 2008 17:46:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94837 invoked by uid 99); 17 Apr 2008 17:46:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Apr 2008 10:46:14 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mudgal.shailendra@gmail.com designates 64.233.184.228 as permitted sender)
Received: from [64.233.184.228] (HELO wr-out-0506.google.com) (64.233.184.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Apr 2008 17:45:32 +0000
Received: by wr-out-0506.google.com with SMTP id c30so165341wra.14
        for <java-user@lucene.apache.org>; Thu, 17 Apr 2008 10:45:45 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=DKRl3thvvAEgcz1fIRA3T/0z12l/dpa/t5djtuQUPbU=;
        b=Afif/GJGonDHAfXBu9GOvYMmtwXqkU7bpUC6V3og3XEKIQffx0v3eBliU8Bs5q0lOvgVJqzEQ0ueo0GhaQYQY5sRq9sCmJiC9peqkJNmmNmZ56ovQ+CtlZ5koGZUWSbIp7Bz7HuuK42JsU3h+Z+s0VyVR024lL69Lk4QZfws34o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=WB6LMWF3QcJh4Eo6g7IHE+vhpe8InYW10NnugaRHBgsbXWJMk/yanlb/Cf6NBUxgswKZToVolKjDeAIkCtwpVxiS8B7W4NdYfvg4budDIkP5EUVSZya8ot6uEQaH9dacQQZu3xaX/MBrNiSCsJUaxSsL6q4IdYL6hInCGwmIORc=
Received: by 10.141.161.6 with SMTP id n6mr980741rvo.41.1208454344721;
        Thu, 17 Apr 2008 10:45:44 -0700 (PDT)
Received: by 10.141.163.15 with HTTP; Thu, 17 Apr 2008 10:45:44 -0700 (PDT)
Message-ID: <fa7518640804171045y36bc3e24k40dd95a19c32e508@mail.gmail.com>
Date: Thu, 17 Apr 2008 23:15:44 +0530
From: "Shailendra Mudgal" <mudgal.shailendra@gmail.com>
To: java-user@lucene.apache.org
Subject: Document ids collected from HitCollector.collect and used in FieldCache..
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_384_23117881.1208454344713"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_384_23117881.1208454344713
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi All,

I have a small confusion regarding the document ids which we collect using
HitCollector.collect() method. Here is the description of the confusion :

First i created a FieldCache of type <docID, <list of companyIDs>> using a
query which collects all the articles which are only a month old. I am
storing them into a map.

So now my cache has same document id 's associated with their field value
ready in the memory.

Now suppose for a search which has duration less then a month, i get a list
of docIds using hit collector. Can i map these document ids to the map,
which i created earlier. And use those field values???


Any help will be appreciated ....

Regards,
Shailendra

------=_Part_384_23117881.1208454344713--

From java-user-return-33667-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 17 18:09:12 2008
Return-Path: <java-user-return-33667-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64479 invoked from network); 17 Apr 2008 18:09:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Apr 2008 18:09:11 -0000
Received: (qmail 40728 invoked by uid 500); 17 Apr 2008 18:09:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40672 invoked by uid 500); 17 Apr 2008 18:09:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40661 invoked by uid 99); 17 Apr 2008 18:09:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Apr 2008 11:09:04 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of max@artsalliancelabs.com designates 66.92.91.130 as permitted sender)
Received: from [66.92.91.130] (HELO artsalliancelabs.com) (66.92.91.130)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Apr 2008 18:08:18 +0000
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C8A0B6.0955A7D8"
Subject: Word split problems
X-MimeOLE: Produced By Microsoft Exchange V6.5
Date: Thu, 17 Apr 2008 14:08:26 -0400
Message-ID: <E9DD5BE59E84CA4E87AE0E5E6F1B8B12381E90@sbsrv.AALabs.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Word split problems
Thread-Index: Acigtgf4zDmiWp1MQDenjVQwtvSyoA==
From: "Max Metral" <max@artsalliancelabs.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C8A0B6.0955A7D8
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

In our app, we search for businesses.  So here's an example:

=20

Lululemon Athletica

=20

I'd like any of these search terms to work for this:

=20

Lulu lemon

Lu Lu Lemon

Lululemon

=20

What strategy would be optimal for this kind of thing (of course keeping
in mind negative matches are also bad)?  Right now we're using Snowball
Analyzer.  It's a wiki, so one answer so far has been "let the user
deal," and we have a way of specifying "also known as", but for this
case I feel like that shouldn't be required.

=20

Thanks!

--Max

http://boston.povo.com

=20


------_=_NextPart_001_01C8A0B6.0955A7D8--

From java-user-return-33668-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 17 18:38:22 2008
Return-Path: <java-user-return-33668-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82306 invoked from network); 17 Apr 2008 18:38:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Apr 2008 18:38:22 -0000
Received: (qmail 72366 invoked by uid 500); 17 Apr 2008 18:38:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72337 invoked by uid 500); 17 Apr 2008 18:38:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72326 invoked by uid 99); 17 Apr 2008 18:38:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Apr 2008 11:38:14 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 209.85.162.176 as permitted sender)
Received: from [209.85.162.176] (HELO el-out-1112.google.com) (209.85.162.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Apr 2008 18:37:30 +0000
Received: by el-out-1112.google.com with SMTP id z25so163883ele.15
        for <java-user@lucene.apache.org>; Thu, 17 Apr 2008 11:37:43 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:subject:from:to:in-reply-to:references:content-type:date:message-id:mime-version:x-mailer:content-transfer-encoding;
        bh=Bae80h7C62EpfjECmDpiu2WaREqkpcKegTX/eINROQU=;
        b=Ca4m0StvpKudL2ALAhE2VGzD769PCOcQw8/amLvpAwGAMpnMz9WyqoisetC6Noxj3Wo3NBI2SRXnQbSvP5lqhdQ+f0prKWwWF6FpjZ080CJjS5vVRpMEeKZk/DndyvFaJte8WNuMdqTYsAhjQ2wwcerpdCkwgvoBsCIqw8YYU8E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=subject:from:to:in-reply-to:references:content-type:date:message-id:mime-version:x-mailer:content-transfer-encoding;
        b=bJMcJI+q7QmdhNX3La8g1ZnP+ldaZDaD3S8g7eCWnv4tgeVt37nzR/+bSAu1Jl2z7SOeD73WijCDPnhwiUJuN3/ev9nxO8yxGE/aeKA09AsXEon0ld48LA8WGFvW7MuVBeMTIAEZwgnsc39S7lo8dG5cdKmye7cl3SxXMAp00O0=
Received: by 10.115.73.20 with SMTP id a20mr1964414wal.32.1208457461826;
        Thu, 17 Apr 2008 11:37:41 -0700 (PDT)
Received: from ?192.168.1.104? ( [216.66.119.110])
        by mx.google.com with ESMTPS id 12sm2395639wrl.20.2008.04.17.11.37.39
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 17 Apr 2008 11:37:40 -0700 (PDT)
Subject: Re: Does LUCENE-831) "Complete overhaul of FieldCache API" provide
	fieldcache offloading to disk?
From: Mark Miller <markrmiller@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <16747733.post@talk.nabble.com>
References: <16743559.post@talk.nabble.com>
	 <1208440150.6498.10.camel@m-laptop>  <16747733.post@talk.nabble.com>
Content-Type: text/plain
Date: Thu, 17 Apr 2008 14:37:39 -0400
Message-Id: <1208457459.25541.17.camel@m-laptop>
Mime-Version: 1.0
X-Mailer: Evolution 2.22.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Yeah, yeah, you are def right...if you have field caches larger than
your RAM, you can def spill off to HD. I just wonder if your going to
get performance that is acceptable if you are actually using all of
those fieldcaches and have to go to disk a lot. It would be awesome to
know how that works though...I was very interested in it, but have not
had the time to get together enough data and what not for some good
testing. Kind of fell off my priorities...

I think your 2 readers question is interesting and I will certainly
think about it. Right now though, each IndexReader instance holds it own
cache. I'll have to dig back into the code and see about possibly keying
on the directory or something?

Then again, Karl's latest issue may help make 2 readers lose some if its
advantage: https://issues.apache.org/jira/browse/LUCENE-1265 so it may
not be wise to go out of the way to support that use case.

Also, keep in mind that this code may not end up in the results of this
issue at all. I basically just put it out there to demonstrate the kind
of advantage you can get in reopen speed with a large field cache. Hoss
did a great job on the API though, so whoever actually hammers this out
may stick with a lot of it.

Who knows...if you report back with some numbers, maybe youll influence
how things go <g>.

- Mark

On Thu, 2008-04-17 at 10:25 -0700, Britske wrote:
> The obstacle I'm seeing is that I have a lot of fields which use sorting.
> Sooner or later this will give an OutOfMem-error since the field-cache grows
> too large. Am i correct in assuming that implementing for instance a EHCache
> with flush-to-disk would solve this issue?  (With a tradeoff for performance
> of course)
> 
> Moreover, when warming readers with the patch, thus having 2 reader open at
> the same time (I am using solr searchers btw, but I guess these use the same
> underlying lucene-code, I'll have to check) can these 2 readers shares the
> same fieldcache and thus eliminate the required double memory  while
> warming? 
> 
> Thanks.
> 
> 
> markrmiller wrote:
> > 
> > It does not specifically incorporate caching to disk, but what it does
> > do is easily allow you to provide a new Cache implementation. The
> > default implementation is just a simple in memory Map, but its trivial
> > to provide a new implementation using something like EHCache to back the
> > Cache implementation.
> > 
> > I don't know if caching to disk will really be that much of a benefit,
> > so if you play around I would love to hear your results.
> > 
> > The big benefit is
> > if you are reopening Readers with field caches, it can be waaay faster.
> > 
> > 
> > - Mark
> > 
> > On Thu, 2008-04-17 at 05:14 -0700, Britske wrote:
> >> I've seen some recent activity on LUCENE-831 "Complete overhaul of
> >> FieldCache
> >> API" and read that it must be able to cleanly patch to trunk (haven't
> >> tried
> >> yet). 
> >> 
> >> What I'd like to know from people involved is if this patch incorporates
> >> offloading of fieldcache to disk, or if this hasn't yet been taken into
> >> account. As far as I can follow it, this was one of the initial
> >> intentions. 
> >> 
> >> Thanks,
> >> Britske
> > 
> > 
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> > 
> > 
> > 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33669-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 17 18:54:32 2008
Return-Path: <java-user-return-33669-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92490 invoked from network); 17 Apr 2008 18:54:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Apr 2008 18:54:30 -0000
Received: (qmail 7341 invoked by uid 500); 17 Apr 2008 18:54:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7314 invoked by uid 500); 17 Apr 2008 18:54:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7296 invoked by uid 99); 17 Apr 2008 18:54:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Apr 2008 11:54:23 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [66.249.82.239] (HELO wx-out-0506.google.com) (66.249.82.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Apr 2008 18:53:29 +0000
Received: by wx-out-0506.google.com with SMTP id i28so201385wxd.20
        for <java-user@lucene.apache.org>; Thu, 17 Apr 2008 11:53:39 -0700 (PDT)
Received: by 10.70.108.18 with SMTP id g18mr1973672wxc.26.1208458419207;
        Thu, 17 Apr 2008 11:53:39 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id h39sm41865997wxd.6.2008.04.17.11.53.38
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 17 Apr 2008 11:53:38 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <1208457459.25541.17.camel@m-laptop>
References: <16743559.post@talk.nabble.com> <1208440150.6498.10.camel@m-laptop>  <16747733.post@talk.nabble.com> <1208457459.25541.17.camel@m-laptop>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <6BDB1005-1818-419D-9BAE-F8A671EB2274@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Does LUCENE-831) "Complete overhaul of FieldCache API" provide fieldcache offloading to disk?
Date: Thu, 17 Apr 2008 14:54:06 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


Mark Miller wrote:

> I think your 2 readers question is interesting and I will certainly
> think about it. Right now though, each IndexReader instance holds  
> it own
> cache. I'll have to dig back into the code and see about possibly  
> keying
> on the directory or something?

I think, with how IndexReader.reopen() now works, we should switch to
somehow having the FieldCache "attached" to each SegmentReader instead
of stored globally keyed by the top MultiSegmentReader.

This way if we do a reopen and say the only change to the index was 10
added docs then the only new FieldCache that gets created is that
length 10 array (because only that SegmentReader will be new).

But then the FieldCache is just starting to feel alot like column- 
stride fields
(LUCENE-1231).

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33670-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 17 19:04:03 2008
Return-Path: <java-user-return-33670-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97300 invoked from network); 17 Apr 2008 19:04:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Apr 2008 19:04:03 -0000
Received: (qmail 23840 invoked by uid 500); 17 Apr 2008 19:03:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23809 invoked by uid 500); 17 Apr 2008 19:03:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23798 invoked by uid 99); 17 Apr 2008 19:03:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Apr 2008 12:03:56 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 72.14.220.157 as permitted sender)
Received: from [72.14.220.157] (HELO fg-out-1718.google.com) (72.14.220.157)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Apr 2008 19:03:12 +0000
Received: by fg-out-1718.google.com with SMTP id d23so147171fga.27
        for <java-user@lucene.apache.org>; Thu, 17 Apr 2008 12:03:20 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:subject:from:to:in-reply-to:references:content-type:date:message-id:mime-version:x-mailer:content-transfer-encoding;
        bh=ErsLxkd6J56kK2jkKl6yhzKWicShzw+ky6Xgf5n15Q0=;
        b=avSTpkimbYjvUHAI8cMdLuKrLUvlc+6OcBY+4KVDtfyg3M0cGQfGSRkzTS1f50DO0YSw5BYL7ZWdrpuMYBezT36NqOBsmjKunPSE4TGSGqIdhiYwyOpzTv3FjTYVJXZjy1Q4MH+eonkAiqVFmKRmfmoJBV0DafCdLlntFPXzP4g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=subject:from:to:in-reply-to:references:content-type:date:message-id:mime-version:x-mailer:content-transfer-encoding;
        b=E2TrDWfG9xlxDTxM8sUrkqSwKu3Qc/3sA5FgsNKJXKKYTs4eoX78YCLEvCNmZ4rr8JL7FjBFnKhr6LEhgn35p3xpkQXXojz2VhYRgb8EfG9lUn8SdRtAKG4v4JSYJDS0ZnMlcNqQX5jZVaWMGTEomRnbzI0N3orAGSK9RRE1heo=
Received: by 10.86.30.9 with SMTP id d9mr3268401fgd.77.1208459000240;
        Thu, 17 Apr 2008 12:03:20 -0700 (PDT)
Received: from ?192.168.1.104? ( [216.66.119.110])
        by mx.google.com with ESMTPS id l19sm9365254fgb.0.2008.04.17.12.03.17
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 17 Apr 2008 12:03:18 -0700 (PDT)
Subject: Re: Does LUCENE-831) "Complete overhaul of FieldCache API" provide
	fieldcache offloading to disk?
From: Mark Miller <markrmiller@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <6BDB1005-1818-419D-9BAE-F8A671EB2274@mikemccandless.com>
References: <16743559.post@talk.nabble.com>
	 <1208440150.6498.10.camel@m-laptop>  <16747733.post@talk.nabble.com>
	 <1208457459.25541.17.camel@m-laptop>
	 <6BDB1005-1818-419D-9BAE-F8A671EB2274@mikemccandless.com>
Content-Type: text/plain
Date: Thu, 17 Apr 2008 15:03:15 -0400
Message-Id: <1208458996.25541.25.camel@m-laptop>
Mime-Version: 1.0
X-Mailer: Evolution 2.22.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Right...that is what the latest patch I put up does (Hoss basically
stubbed it all out to be ready for this).

Each SegmentReader has its own cache. Each MultiReader can have its own
cache as well (in the case that you want a primitive array), but if you
can take an ObjectArray object instead, the MultiReader returns an
ObjectArray that distributes doc i requests to the appropriate
ObjectArray owned by a SegmentReader (the ObjectArray returned from the
SegmentReaders cache). This was done by your suggestion :) And man is it
fast in some cases.

It works amazing well if you reopen a lot and have a lax merge
factor...just as you say, often you only have to load a tiny new segment
when reloading the field cache...on average its tons faster to reopen.

- Mark

On Thu, 2008-04-17 at 14:54 -0400, Michael McCandless wrote:
> Mark Miller wrote:
> 
> > I think your 2 readers question is interesting and I will certainly
> > think about it. Right now though, each IndexReader instance holds  
> > it own
> > cache. I'll have to dig back into the code and see about possibly  
> > keying
> > on the directory or something?
> 
> I think, with how IndexReader.reopen() now works, we should switch to
> somehow having the FieldCache "attached" to each SegmentReader instead
> of stored globally keyed by the top MultiSegmentReader.
> 
> This way if we do a reopen and say the only change to the index was 10
> added docs then the only new FieldCache that gets created is that
> length 10 array (because only that SegmentReader will be new).
> 
> But then the FieldCache is just starting to feel alot like column- 
> stride fields
> (LUCENE-1231).
> 
> Mike
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33671-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 17 19:07:51 2008
Return-Path: <java-user-return-33671-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99851 invoked from network); 17 Apr 2008 19:07:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Apr 2008 19:07:51 -0000
Received: (qmail 30764 invoked by uid 500); 17 Apr 2008 19:07:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30734 invoked by uid 500); 17 Apr 2008 19:07:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30723 invoked by uid 99); 17 Apr 2008 19:07:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Apr 2008 12:07:44 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [66.249.82.233] (HELO wx-out-0506.google.com) (66.249.82.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Apr 2008 19:07:01 +0000
Received: by wx-out-0506.google.com with SMTP id i28so206529wxd.20
        for <java-user@lucene.apache.org>; Thu, 17 Apr 2008 12:06:59 -0700 (PDT)
Received: by 10.70.108.18 with SMTP id g18mr1988638wxc.26.1208459218847;
        Thu, 17 Apr 2008 12:06:58 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id i16sm20366080wxd.30.2008.04.17.12.06.57
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 17 Apr 2008 12:06:58 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <1208458996.25541.25.camel@m-laptop>
References: <16743559.post@talk.nabble.com> <1208440150.6498.10.camel@m-laptop>  <16747733.post@talk.nabble.com> <1208457459.25541.17.camel@m-laptop> <6BDB1005-1818-419D-9BAE-F8A671EB2274@mikemccandless.com> <1208458996.25541.25.camel@m-laptop>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <1F7DDC08-9122-45B6-9E66-A6E59D0AB1A3@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Does LUCENE-831) "Complete overhaul of FieldCache API" provide fieldcache offloading to disk?
Date: Thu, 17 Apr 2008 15:07:25 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


Ahh woops sorry I didn't look at the latest patch on LUCENE-831 just  
yet.  Thanks!  That's great.

Mike

Mark Miller wrote:
> Right...that is what the latest patch I put up does (Hoss basically
> stubbed it all out to be ready for this).
>
> Each SegmentReader has its own cache. Each MultiReader can have its  
> own
> cache as well (in the case that you want a primitive array), but if  
> you
> can take an ObjectArray object instead, the MultiReader returns an
> ObjectArray that distributes doc i requests to the appropriate
> ObjectArray owned by a SegmentReader (the ObjectArray returned from  
> the
> SegmentReaders cache). This was done by your suggestion :) And man  
> is it
> fast in some cases.
>
> It works amazing well if you reopen a lot and have a lax merge
> factor...just as you say, often you only have to load a tiny new  
> segment
> when reloading the field cache...on average its tons faster to reopen.
>
> - Mark
>
> On Thu, 2008-04-17 at 14:54 -0400, Michael McCandless wrote:
>> Mark Miller wrote:
>>
>>> I think your 2 readers question is interesting and I will certainly
>>> think about it. Right now though, each IndexReader instance holds
>>> it own
>>> cache. I'll have to dig back into the code and see about possibly
>>> keying
>>> on the directory or something?
>>
>> I think, with how IndexReader.reopen() now works, we should switch to
>> somehow having the FieldCache "attached" to each SegmentReader  
>> instead
>> of stored globally keyed by the top MultiSegmentReader.
>>
>> This way if we do a reopen and say the only change to the index  
>> was 10
>> added docs then the only new FieldCache that gets created is that
>> length 10 array (because only that SegmentReader will be new).
>>
>> But then the FieldCache is just starting to feel alot like column-
>> stride fields
>> (LUCENE-1231).
>>
>> Mike
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33672-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 17 19:18:10 2008
Return-Path: <java-user-return-33672-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6644 invoked from network); 17 Apr 2008 19:18:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Apr 2008 19:18:09 -0000
Received: (qmail 47384 invoked by uid 500); 17 Apr 2008 19:18:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47347 invoked by uid 500); 17 Apr 2008 19:18:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47336 invoked by uid 99); 17 Apr 2008 19:18:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Apr 2008 12:18:02 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Apr 2008 19:17:10 +0000
Received: by ug-out-1314.google.com with SMTP id u40so1231013ugc.29
        for <java-user@lucene.apache.org>; Thu, 17 Apr 2008 12:17:14 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=kgz/iOLVpdlAldos7Z0W3twCe44vMF2LEPdgrQCTTD0=;
        b=TsOV20IzHzZiIQQq/SCh8GdlAzb9pZ1FFXG7sNQKVEt9TrHFspAdRhHt3HgVo5HQPdlg1fdZfEAb6erVv+Yynbri+qhPDku+WeTUZmkgiVKw+EcSiXpLGkKbc5ctdz9zePrjQuRMPMq1ULIXu/8mMtkYgX+y5CKrya+q2msK00U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=SnK/x5gPlB2KKQgdHT0MD8kLNvRy2FhqcMczzMx9BRdEsiRovQSPDwKAR1cyQssdCWFDwEtsL7AZZ9RVfS8RqZjMQ6UV5N9pLU0NcbmWlsBQ2D1E4A6D25Ie/SNqiJQF1gahuIgkB8uGx7inVAx/POZOxMQBTfwVaGB4gVHda4g=
Received: by 10.78.138.14 with SMTP id l14mr2208874hud.8.1208459833778;
        Thu, 17 Apr 2008 12:17:13 -0700 (PDT)
Received: from kodapan.lan ( [82.93.70.124])
        by mx.google.com with ESMTPS id v29sm4291242hub.39.2008.04.17.12.17.12
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 17 Apr 2008 12:17:12 -0700 (PDT)
Message-ID: <4807A236.7050705@gmail.com>
Date: Thu, 17 Apr 2008 21:17:10 +0200
From: Karl Wettin <karl.wettin@gmail.com>
User-Agent: Thunderbird 2.0.0.12 (Macintosh/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Word split problems
References: <E9DD5BE59E84CA4E87AE0E5E6F1B8B12381E90@sbsrv.AALabs.local>
In-Reply-To: <E9DD5BE59E84CA4E87AE0E5E6F1B8B12381E90@sbsrv.AALabs.local>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Max Metral skrev:
 >
> Lululemon Athletica
> 
> I'd like any of these search terms to work for this:
> 
> Lulu lemon
> Lu Lu Lemon
> Lululemon
> 
> What strategy would be optimal for this kind of thing (of course keeping

How large is your corpus? I suggest you look at NGramTokenizer.


    karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33673-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 17 21:00:38 2008
Return-Path: <java-user-return-33673-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74892 invoked from network); 17 Apr 2008 21:00:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Apr 2008 21:00:37 -0000
Received: (qmail 5284 invoked by uid 500); 17 Apr 2008 21:00:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5249 invoked by uid 500); 17 Apr 2008 21:00:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5238 invoked by uid 99); 17 Apr 2008 21:00:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Apr 2008 14:00:30 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.134.190 as permitted sender)
Received: from [209.85.134.190] (HELO mu-out-0910.google.com) (209.85.134.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Apr 2008 20:59:47 +0000
Received: by mu-out-0910.google.com with SMTP id w9so252174mue.5
        for <java-user@lucene.apache.org>; Thu, 17 Apr 2008 13:58:57 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=+HdxF0zSdH++UY+lUBaUVCvY7IBeUY5WUkoTkeBimAs=;
        b=ZipBJJfS1ZdCVgyC0OgClFAsp/Up637jyxkfqL/skYaP7yDoBn2BqC/+ciuPRPNGSeiMmfHrwDzgTOeykEg56D9ODB9+9vwAy+0UEpWhos/u0hwGS1Lbw/05tOUqFy5P4iKSgYAioKN5ie+q32hWyve4bmCf1TWniUDC5bPHc0k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=iRebQlXHWu0VAVQeoQdP6zfHycQ1kHKn/FM3nl1ovADHlME6gr5D7kw8/MGpgU/w/l3kkm8Oi15iXX0wmjyfjddGGjnGrXT1Jk4uo5T+zEtrO1pUeNTzzrdDayXuMVBYi8FI55Pp9R//HLCv07fPb1rG5xAiCRDRgvoHkAV6/Bk=
Received: by 10.82.127.15 with SMTP id z15mr3064976buc.14.1208464341342;
        Thu, 17 Apr 2008 13:32:21 -0700 (PDT)
Received: by 10.82.191.6 with HTTP; Thu, 17 Apr 2008 13:32:21 -0700 (PDT)
Message-ID: <359a92830804171332q7d22de6dyb7a262b3984328b6@mail.gmail.com>
Date: Thu, 17 Apr 2008 16:32:21 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Document ids collected from HitCollector.collect and used in FieldCache..
In-Reply-To: <fa7518640804171045y36bc3e24k40dd95a19c32e508@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_927_10830105.1208464341335"
References: <fa7518640804171045y36bc3e24k40dd95a19c32e508@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_927_10830105.1208464341335
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Doc IDs are NOT permanent. If you don't change your index at all
(delete especially, but sometimes adding/optimizing can chage IDs)
then you can re-use them. Otherwise not.


On Thu, Apr 17, 2008 at 1:45 PM, Shailendra Mudgal <
mudgal.shailendra@gmail.com> wrote:

> Hi All,
>
> I have a small confusion regarding the document ids which we collect using
> HitCollector.collect() method. Here is the description of the confusion :
>
> First i created a FieldCache of type <docID, <list of companyIDs>> using a
> query which collects all the articles which are only a month old. I am
> storing them into a map.
>
> So now my cache has same document id 's associated with their field value
> ready in the memory.
>
> Now suppose for a search which has duration less then a month, i get a
> list
> of docIds using hit collector. Can i map these document ids to the map,
> which i created earlier. And use those field values???
>
>
> Any help will be appreciated ....
>
> Regards,
> Shailendra
>

------=_Part_927_10830105.1208464341335--

From java-user-return-33674-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 18 02:14:09 2008
Return-Path: <java-user-return-33674-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10109 invoked from network); 18 Apr 2008 02:14:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Apr 2008 02:14:09 -0000
Received: (qmail 82523 invoked by uid 500); 18 Apr 2008 02:14:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82485 invoked by uid 500); 18 Apr 2008 02:14:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82474 invoked by uid 99); 18 Apr 2008 02:14:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Apr 2008 19:14:02 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Apr 2008 02:13:20 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 7ABC171C32F; Thu, 17 Apr 2008 19:13:33 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 7771D71C257
	for <java-user@lucene.apache.org>; Thu, 17 Apr 2008 19:13:33 -0700 (PDT)
Date: Thu, 17 Apr 2008 19:13:33 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Does LUCENE-831) "Complete overhaul of FieldCache API" provide
 fieldcache offloading to disk?
In-Reply-To: <6BDB1005-1818-419D-9BAE-F8A671EB2274@mikemccandless.com>
Message-ID: <Pine.LNX.4.62.0804171907501.1738@radix.cryptio.net>
References: <16743559.post@talk.nabble.com> <1208440150.6498.10.camel@m-laptop>
  <16747733.post@talk.nabble.com> <1208457459.25541.17.camel@m-laptop>
 <6BDB1005-1818-419D-9BAE-F8A671EB2274@mikemccandless.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: But then the FieldCache is just starting to feel alot like column-stride
: fields
: (LUCENE-1231).

that's what i've been thinking ... my goal with LUCENE-831 was to make it 
easier to manage FieldCache and hopefully the norms[] as well particularly 
in the case of reopen ... but with column-stride fields the need for both 
of those might go away completely)

that doesn't mean LUCENE-1231 won't still be usefull .. it could probably 
still be leveraged by things like CachingWrapperFilter, and some of the 
Solr caches to reduce the amount of work on reload -- i just don't know 
that FieldCache will really need to exist in the future.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33675-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 18 04:01:59 2008
Return-Path: <java-user-return-33675-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75993 invoked from network); 18 Apr 2008 04:01:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Apr 2008 04:01:59 -0000
Received: (qmail 50337 invoked by uid 500); 18 Apr 2008 04:01:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50304 invoked by uid 500); 18 Apr 2008 04:01:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50293 invoked by uid 99); 18 Apr 2008 04:01:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Apr 2008 21:01:52 -0700
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [121.243.22.156] (HELO delhtca02.Infoedge.com) (121.243.22.156)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Apr 2008 04:00:56 +0000
Received: from DELHTCA01.Infoedge.com (172.16.3.234) by delhtca02.infoedge.com
 (172.16.3.245) with Microsoft SMTP Server (TLS) id 8.0.751.0; Fri, 18 Apr
 2008 09:25:39 +0530
Received: from [172.16.1.229] (220.225.240.5) by DELHTCA01.Infoedge.com
 (172.16.3.234) with Microsoft SMTP Server id 8.0.744.0; Fri, 18 Apr 2008
 09:25:39 +0530
Subject: Re: Lucene performance: benchmarktemplate.xml
From: Anshum <anshum.gupta@naukri.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <5e76f3840804161051h2fc64030xc1ad4a37d26d0353@mail.gmail.com>
References: <5e76f3840804150951n4df5782dke95fab45e7473a3f@mail.gmail.com>
	 <480545C2.3070504@holsman.net>
	 <8e69b6620804151940i5899e119l82628d15f131f45a@mail.gmail.com>
	 <5e76f3840804160640idf6571et866a96e1db9c8832@mail.gmail.com>
	 <F582256E-50CF-4168-B293-2B7EDFDC9BCB@mikemccandless.com>
	 <5e76f3840804161051h2fc64030xc1ad4a37d26d0353@mail.gmail.com>
Content-Type: text/plain
Date: Fri, 18 Apr 2008 09:31:13 +0530
Message-ID: <1208491273.5496.1.camel@localhost>
MIME-Version: 1.0
X-Mailer: Evolution 2.10.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Glenn,

I am not too clear about it, but isn't there a limit to the memory
consumption specified for the JVM? The limit being 1.3Gigs of resident
and 2 Gigs of memory in all? You just mentioned the Memory consumption:
-Xms4000m -Xmx6000m.
Could someone please help me with the same.

--
Anshum

On Wed, 2008-04-16 at 23:21 +0530, Glen Newton wrote:
> On 16/04/2008, Michael McCandless <lucene@mikemccandless.com> wrote:
> > These are great results!  Thanks for posting.
> 
> Thanks!
> 
> >
> >  I'd be curious if you'd get better indexing throughput by using a single
> > IndexWriter, fed by all 8 indexing threads, with an 8X bigger RAM buffer,
> > instead of 8 IndexWriters that merge in the end.
> 
> While I am new to this list, I have been trying different
> combinations/configurations for this over the last 18 months. To
> answer your questions: no, not on our multi-core machine. But I
> haven't  tried your suggested scenario with >= v2.2, so it is possible
> that it might be better.
> 
> >  How long does that final merge take now?
> 
> I don't have that timed. I will alter the app to record this.
> 
> >  Also, 64 threads doing document construction seems too high?  You may be
> > losing some performance to the cost of thread context switching.
> 
> I did performance tests on 8,16,24,32,48,64,72,96,128 threads. 64 was
> the sweet spot, for this particular configuration.
> 
> >  Did you use autoCommit=false?  I think it should help since you have so
> > many stored fields and some term vectors.
> 
> Damn, I am using the defaults (autoCommit=true). I will re-run and
> post the results!
> 
> Thanks,  :-)
> 
> -glen
> 
> >  Mike
> >
> >
> >  Glen Newton wrote:
> >
> > > Cass,
> > > Thanks for converting it. I've posted it to my blog:
> > >
> > http://zzzoot.blogspot.com/2008/04/lucene-indexing-performance-benchmarks.html
> > >
> > > Sorry for the XML tags: I guess I followed the instructions on the
> > > Lucene performance benchmarks page to literally ("Post these figures
> > > to the lucene-user mailing list using this template.").
> > >
> > > Sorry if it hurt your eyes!  :-)
> > >
> > > -Glen
> > >
> > > On 15/04/2008, Cass Costello <casspc@gmail.com> wrote:
> > >
> > > > I just did that so I could read it. :)  I'll leave it up until Glen
> > resends
> > > >  or posts it somewhere...
> > > >  http://www.casscostello.com/?page_id=28
> > > >
> > > >
> > > >
> > > >
> > > >  On Tue, Apr 15, 2008 at 5:18 PM, Ian Holsman <lists@holsman.net> wrote:
> > > >
> > > >
> > > > > Hi Glen.
> > > > > can you resend this in plain text?
> > > > > or put the HTML up on a server somewhere and point to it with a brief
> > > > > summary in the post?
> > > > > I'd love to look and read it, all those tags are making me go blind.
> > > > >
> > > > >
> > > > > Glen Newton wrote:
> > > > >
> > > > >
> > > > > > <benchmark>
> > > > > >  <ul>
> > > > > >  <p>
> > > > > >  <b>Hardware Environment</b><br/>
> > > > > >  <li><i>Dedicated machine for indexing</i>: yes</li>
> > > > > >  <li><i>CPU</i>: Dual processor dual core Xeon CPU 3.00GHz;
> > > > > > hyperthreading ON for 8 virtual cores</li>
> > > > > >  <li><i>RAM</i>: 8GB</li>
> > > > > >  <li><i>Drive configuration</i>: Dell EMC AX150 storage array fibre
> > > > > > channel</li>
> > > > > >  </p>
> > > > > >  <p>
> > > > > >  <b>Software environment</b><br/>
> > > > > >  <li><i>Lucene Version</i>: 2.3.1</li>
> > > > > >  <li><i>Java Version</i>:  Java(TM) SE Runtime Environment (build
> > > > > > 1.6.0_02-b05)</li>
> > > > > >  <li><i>Java VM</i>: Java HotSpot(TM) 64-Bit Server VM (build
> > > > > > 1.6.0_02-b05, mixed mode)</li>
> > > > > >  <li><i>OS Version</i>: Linux OpenSUSE 10.2 (64-bit X86-64)</li>
> > > > > >  <li><i>Location of index</i>: Filesystem, on attached storage</li>
> > > > > >  </p>
> > > > > >  <p>
> > > > > >  <b>Lucene indexing variables</b><br/>
> > > > > >  <li><i>Number of source documents</i>: 6,404,464</li>
> > > > > >  <li><i>Total filesize of source documents</i>: 141GB; Note that
> > this
> > > > > > is only the full-text: the metadata (title, author(s), abstract,
> > > > > > keywords, journal name) are in addition to this</li>
> > > > > >  <li><i>Average filesize of source documents</i>:
> > > > > > 22KB + metadata (see above)</li>
> > > > > >  <li><i>Source documents storage location</i>: Where are the
> > documents
> > > > > > being indexed located?
> > > > > >  Filesystem</li>
> > > > > >  <li><i>File type of source documents</i>: text (PDFs converted to
> > > > > > text then gzipped)</li>
> > > > > >  <li><i>Parser(s) used, if any</i>: None, but files GZIPed & had to
> > > > > > be un-gziped by Java application which also did indexing</li>
> > > > > >  <li><i>Analyzer(s) used</i>: StandardAnalyzer</li>
> > > > > >  <li><i>Number of fields per document</i>: 24</li>
> > > > > >  <li><i>Type of fields</i>: all text; 20 stored; 3 of indexed
> > > > > > tokenized with term vector (full-text [not stored], title,
> > abstract);
> > > > > > 10 stored with no parsing; </li>
> > > > > >  <li><i>Index persistence</i>: FSDirectory</li>
> > > > > >  <li><i>Index size</i>: 83GB</li>
> > > > > >  <li><i>Number of terms</i>: 143,298,010</li>
> > > > > >  </p>
> > > > > >  <p>
> > > > > >  <b>Figures</b><br/>
> > > > > >  <li><i>Time taken (in ms/s as an average of at least 3 indexing
> > > > > > runs)</i>: 20.5 hours</li>
> > > > > >  <li><i>Time taken / 1000 docs indexed</i>: 11.5 seconds </li>
> > > > > >  <li><i>Memory consumption</i>:  -Xms4000m  -Xmx6000m</li>
> > > > > >  <li><i>Query speed</i>: average time a query takes, type
> > > > > >  of queries (e.g. simple one-term query, phrase query),
> > > > > >  not measuring any overhead outside Lucene</li>
> > > > > >  </p>
> > > > > >  <p>
> > > > > >  <b>Notes</b><br/>
> > > > > >  <li><i>Notes</i>:
> > > > > >      <ul>
> > > > > >        <li>
> > > > > >          These are journal articles, so the additional fields
> > besides
> > > > > > the
> > > > > > full-text are bibliographic metadata, such as title, authors,
> > > > > > abstract, keywords, journal name, volume, issue, start page, year.
> > > > > >        </li>
> > > > > >        <li>Java command line directives: -XX:+AggressiveOpts
> > > > > > -XX:+ScavengeBeforeFullGC -XX:-UseParallelGC   -server  -Xms4000m
> > > > > > -Xmx6000m
> > > > > >        </li>
> > > > > >        <li>Highly multithreaded & pipelined architecture using
> > > > > > java.util.concurrent.ThreadPoolExecutor
> > > > > >        </li>
> > > > > >        <li>File system file reading and Un-gzip performed
> > multithreaded
> > > > > >        </li>
> > > > > >        <li>Eight separate parallel IndexWriters are fed by the
> > pipeline
> > > > > > (creation of Document objects occurs in parallel with 64 threads),
> > > > > > merged at end into single index. Each parallel index had slightly
> > > > > > different RAM_BUFFER_SIZE_MB (64, 67, 70, 73, 76, 79, 83, 85 MB
> > > > > > respectively), so that flushing wouldn't all happen at the same
> > time.
> > > > > >        </li>
> > > > > >        <li>
> > > > > >          Contact: glen DOT newton AT nrc-cnrc DOT gc DOT ca
> > > > > >        </li>
> > > > > >
> > > > > >      </ul>
> > > > > > </li>
> > > > > >  </p>
> > > > > >  </ul>
> > > > > > </benchmark>
> > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > > >
> > > > >
> > > > >
> > ---------------------------------------------------------------------
> > > > > To unsubscribe, e-mail:
> > java-user-unsubscribe@lucene.apache.org
> > > > > For additional commands, e-mail:
> > java-user-help@lucene.apache.org
> > > > >
> > > > >
> > > > >
> > > >
> > > >
> > > >
> > > > --
> > > >  Lego timeline:
> > > >
> > http://cache.gizmodo.com/assets/resources/2008/01/lego-brick4-timeline.jpg
> > > >
> > > >
> > >
> > >
> > > --
> > >
> > > -
> > >
> > >
> > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail:
> > java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail:
> > java-user-help@lucene.apache.org
> > >
> > >
> >
> >
> > ---------------------------------------------------------------------
> >  To unsubscribe, e-mail:
> > java-user-unsubscribe@lucene.apache.org
> >  For additional commands, e-mail:
> > java-user-help@lucene.apache.org
> >
> >
> 
> 
> --
> 
> -
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33676-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 18 05:48:48 2008
Return-Path: <java-user-return-33676-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9372 invoked from network); 18 Apr 2008 05:48:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Apr 2008 05:48:47 -0000
Received: (qmail 13875 invoked by uid 500); 18 Apr 2008 05:48:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13254 invoked by uid 500); 18 Apr 2008 05:48:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13243 invoked by uid 99); 18 Apr 2008 05:48:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Apr 2008 22:48:40 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.38.55] (HELO web50301.mail.re2.yahoo.com) (206.190.38.55)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 18 Apr 2008 05:47:46 +0000
Received: (qmail 71782 invoked by uid 60001); 18 Apr 2008 05:48:06 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=OQ20aK6rdZ7SmMniAXHph64sQOWtVIl61UqeUcY8SmcgX0bejP+5MSU32QSKODtIrEfECv/VN54/W2y0alEtyQ09CB9C/oJXCj8ij3SN6gFvQ5tu9496tgBQ/x/g/Vo61RCtIddYvt39cwPbPvCaR6felAleo0Gu38eHkkWYmys=;
X-YMail-OSG: 7D6APZgVM1ljur2nJGe15eS87k_RZvdCXC4.TtIXvYTS2RMID9IpEe9_LZGHXz4BJ2Yy0u3Y8oSEz4pnJdSBhkXYhvjTIwt6BD7zeUz1F91SFd0JjLfwouBNpQ--
Received: from [72.231.9.236] by web50301.mail.re2.yahoo.com via HTTP; Thu, 17 Apr 2008 22:48:06 PDT
X-Mailer: YahooMailRC/902.40 YahooMailWebService/0.7.185
Date: Thu, 17 Apr 2008 22:48:06 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Sorting consumes hundreds of MBytes RAM
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <350618.71762.qm@web50301.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Timo - correct and correct.

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch

----- Original Message ----
From: Timo Nentwig <lucene@nitwit.de>
To: java-user@lucene.apache.org
Sent: Tuesday, April 15, 2008 3:22:15 AM
Subject: Re: Sorting consumes hundreds of MBytes RAM

What do you mean by "that's true"? That lucene does read all data 
available in the index for this field into memory? In this case index
sharding should help, right?

On Sun, 13 Apr 2008, Otis Gospodnetic wrote:

> Date: Sun, 13 Apr 2008 20:25:09 -0700 (PDT)
> From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
> Reply-To: java-user@lucene.apache.org
> To: java-user@lucene.apache.org
> Subject: Re: Sorting consumes hundreds of MBytes RAM
> 
> Timo,
> That is true.  The only think I can recommend at the moment is to make sure you specify the correct data type.  If your sort field is a numeric field, make that explicit.
>
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>
> ----- Original Message ----
> From: Timo Nentwig <lucene@nitwit.de>
> To: java-user@lucene.apache.org
> Sent: Sunday, April 13, 2008 4:45:37 PM
> Subject: Sorting consumes hundreds of MBytes RAM
>
> Hi!
>
> I found that when sorting the search result -depending on the amount of data
> in the field to sort by - this can easily lead to FieldCacheImpl to allocate
> hundreds of MByte RAM.
>
> How does this work internally? It seems as if all data for this field found in
> the entire index is read into memory (?).
>
> And question #2: what am I going to do against it? Index  sharding?
>
> Thanks,
> Timo
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33677-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 18 06:15:20 2008
Return-Path: <java-user-return-33677-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40488 invoked from network); 18 Apr 2008 06:15:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Apr 2008 06:15:20 -0000
Received: (qmail 32977 invoked by uid 500); 18 Apr 2008 06:15:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32946 invoked by uid 500); 18 Apr 2008 06:15:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32935 invoked by uid 99); 18 Apr 2008 06:15:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Apr 2008 23:15:13 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mudgal.shailendra@gmail.com designates 209.85.198.251 as permitted sender)
Received: from [209.85.198.251] (HELO rv-out-0506.google.com) (209.85.198.251)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Apr 2008 06:14:31 +0000
Received: by rv-out-0506.google.com with SMTP id k29so226671rvb.5
        for <java-user@lucene.apache.org>; Thu, 17 Apr 2008 23:14:45 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=1jYpjj5eZYYrW/8jy60eHBLXN8mfN0t6jIEGX9eFHjE=;
        b=m9IlT+CmXNNzBpWP8l+vY2jsHCzJOo0toyxI2r9Og+xTWAfIgUnT9kh9EW7hn7Tl+v+/ubsfYMdCkZHfRxXATUYI+RODk9ABTWKCXhjyeIFrAfZkfyqTIlYuCIdJyEqvnc3iwI0sVGPK0KiNNmOzKqRlkyrMVxPKPpFSI85MLMM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=fuobxCiGgXNEM6b4+/9+p2ci8l+l5pGnLVK3XF9FUns98GOdqtkuTqIy12kE+4LXkPl0o1Tr/szWRPGXfqehIwKFtuXE4HUMEgs24fzx7CZhJ+BfKN4cRry3xo++rTJ9l54UhJbTznsPAZxHHsHpkOPUEz4Bd0ecSPM/5KDHO9U=
Received: by 10.141.152.8 with SMTP id e8mr1315939rvo.19.1208499284949;
        Thu, 17 Apr 2008 23:14:44 -0700 (PDT)
Received: by 10.141.163.15 with HTTP; Thu, 17 Apr 2008 23:14:44 -0700 (PDT)
Message-ID: <fa7518640804172314s3cea31b3k7277b7b4fd0a806b@mail.gmail.com>
Date: Fri, 18 Apr 2008 11:44:44 +0530
From: "Shailendra Mudgal" <mudgal.shailendra@gmail.com>
To: java-user@lucene.apache.org
Subject: how to cache multivalued field using fieldcache.
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2651_31602553.1208499284925"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2651_31602553.1208499284925
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi All,

I have a multivalued field in the index. Can i use FieldCache for caching
that field.

Thanks,

Vipin

------=_Part_2651_31602553.1208499284925--

From java-user-return-33678-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 18 09:34:59 2008
Return-Path: <java-user-return-33678-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75223 invoked from network); 18 Apr 2008 09:34:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Apr 2008 09:34:58 -0000
Received: (qmail 41868 invoked by uid 500); 18 Apr 2008 09:34:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41655 invoked by uid 500); 18 Apr 2008 09:34:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41644 invoked by uid 99); 18 Apr 2008 09:34:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Apr 2008 02:34:52 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of buschmic@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Apr 2008 09:33:59 +0000
Received: by ug-out-1314.google.com with SMTP id u40so49152ugc.29
        for <java-user@lucene.apache.org>; Fri, 18 Apr 2008 02:34:20 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:cc:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=7aYo4EXKJx0YZswRTs+9ZTY1mQwIEOH22/WmUScPCiA=;
        b=addLxBZq3U3qOSveOGYmp+A+D2IvzL2ytPrrHI+rnbKKdh+g/e/C+GZts3vhYEicEpeQrKkIvB8ylEZKz4pIUkED3yroH95FQz2bAyrx8lIuT+kwvBX8Kx2+HvKkYioYrIxYfqQjCzvTPih7gHlUecH3iiUyvN42pGDGi+STaiE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:cc:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=lyPr9Z/5nv2GTaW0wkB+JbjN4MfxP9ZNMpnp9QG8kM7qj9wxt8ZEffRSHUE5Ix1+WOeoFUflLiWfBF2H1R6fmLFR5jteA8XR5Dm31qqyqRj24JAFkgIuu5ATA5XL6iQzh2D1hViOQVsWrN1rRMLBeZVravWQlKoyhZEZbRSKMxI=
Received: by 10.67.105.12 with SMTP id h12mr528971ugm.12.1208511260540;
        Fri, 18 Apr 2008 02:34:20 -0700 (PDT)
Received: from ?9.152.96.150? ( [195.212.29.163])
        by mx.google.com with ESMTPS id e1sm912377ugf.34.2008.04.18.02.34.18
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 18 Apr 2008 02:34:18 -0700 (PDT)
Message-ID: <48086AA6.6030607@gmail.com>
Date: Fri, 18 Apr 2008 11:32:22 +0200
From: Michael Busch <buschmic@gmail.com>
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-dev@lucene.apache.org
CC: java-user@lucene.apache.org
Subject: Re: Does LUCENE-831) "Complete overhaul of FieldCache API" provide
 fieldcache offloading to disk?
References: <16743559.post@talk.nabble.com> <1208440150.6498.10.camel@m-laptop>  <16747733.post@talk.nabble.com> <1208457459.25541.17.camel@m-laptop> <6BDB1005-1818-419D-9BAE-F8A671EB2274@mikemccandless.com> <Pine.LNX.4.62.0804171907501.1738@radix.cryptio.net>
In-Reply-To: <Pine.LNX.4.62.0804171907501.1738@radix.cryptio.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Chris Hostetter wrote:
> : But then the FieldCache is just starting to feel alot like column-stride
> : fields
> : (LUCENE-1231).
> 
> that's what i've been thinking ... my goal with LUCENE-831 was to make it 
> easier to manage FieldCache and hopefully the norms[] as well particularly 
> in the case of reopen ... but with column-stride fields the need for both 
> of those might go away completely)
>

(moved to java-dev, java-user cc'd)

My goal is it not to get rid of the FieldCache by adding column-stride 
fields (CSF), but instead to make them the default source for the 
FieldCache.

We should introduce an interface, named maybe FieldValueSource, that the 
new FieldCache implements, and also the CSF API. That has some advantages:
- Norms can be stored as CSF, and can be accessed using the 
FieldValueSource API. Then we can easily add an option to IndexReader 
whether to cache norms in memory (i. e. the new FieldCache) or not. When 
users have huge indexes on 32bit machines, where the norms would consume 
too much memory, they can disable caching them, of course search 
performance will suffer (but that's better than OutOfMemoryErrors)
- The function queries can use the FieldValueSource interface to 
retrieve the values (allowing us to get rid of function/ValueSource).
- Any consumer of the FieldValueSource does not have to care about 
whether or not values are cached and how. If performance is too slow and 
memory permits, caching can be enabled very easily.
- We will still support loading the fieldcache from the dictionary for 
backwards compatibility, but we should think about deprecating this and 
eventually get rid of it. We probably shouldn't add an implementation of 
FieldValueSource that reads from the dictionary, because performance 
would be terrible in the non-cached mode.

-Michael

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33679-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 18 10:42:16 2008
Return-Path: <java-user-return-33679-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64686 invoked from network); 18 Apr 2008 10:42:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Apr 2008 10:42:16 -0000
Received: (qmail 17674 invoked by uid 500); 18 Apr 2008 10:42:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17647 invoked by uid 500); 18 Apr 2008 10:42:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17636 invoked by uid 99); 18 Apr 2008 10:42:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Apr 2008 03:42:08 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anafreireveiga@gmail.com designates 209.85.146.181 as permitted sender)
Received: from [209.85.146.181] (HELO wa-out-1112.google.com) (209.85.146.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Apr 2008 10:41:25 +0000
Received: by wa-out-1112.google.com with SMTP id j40so807339wah.11
        for <java-user@lucene.apache.org>; Fri, 18 Apr 2008 03:41:38 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=uVZSlGsGLjP1qUgpMEvYWiH8gU8a8a+qkD6c2A3bjVg=;
        b=kU3iIaqxKGTRFmSp+cF8MZ8kOU+X9LbND5VEL18H1/hY49+P+duWoODYoMhEs1ASjUsf917zWlyD2WguMfr9/Qx6L759Nre+P25E1IhMaUO33IXpkhg6faCb30oSkzGlGXZMDm9n3ODyBsB7+nMzDIeDI8u6zKgT9vEdtd8iLkE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=G6+VwDgB23RBcy+OIQTHZOfPwDio269PEPgdgjpSSaDGJp2UsEHJZQC+KclzDXiJHJXdujFmN2kz/wxy4WCoqd/rMmN4gZn4PyjtJ1eHwwpwBbfm0KJeviR7yH93DuXG1rBsw7eteHO/GBbKE+gwVuZ5sCmrIFS0SVw6sVO2KUE=
Received: by 10.114.191.12 with SMTP id o12mr2261453waf.224.1208515298644;
        Fri, 18 Apr 2008 03:41:38 -0700 (PDT)
Received: by 10.115.108.16 with HTTP; Fri, 18 Apr 2008 03:41:38 -0700 (PDT)
Message-ID: <c78ed28e0804180341k1a6e4265me42685ca7fdf7f46@mail.gmail.com>
Date: Fri, 18 Apr 2008 12:41:38 +0200
From: "Ana Rabade" <anafreireveiga@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Proximity Searches
In-Reply-To: <c78ed28e0804040338y2dacc7dcn703ff1bc0d730572@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5639_8279039.1208515298609"
References: <c78ed28e0803311054v21fd3a8cgdb15778525f5895@mail.gmail.com>
	 <c78ed28e0804030917j24bdf546t82034a7989f8a3d0@mail.gmail.com>
	 <359a92830804031056x7309dcadu856b8abc87059a9e@mail.gmail.com>
	 <c78ed28e0804040338y2dacc7dcn703ff1bc0d730572@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5639_8279039.1208515298609
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

I am using ngrams and I need to force that a group of them are together, bu=
t
if any of them fails, I need that the document is also scored. Perhaps you
could help me to find the solution or give me a reference of which changes =
I
must do. I am using SpanNearQuery, because the ngrams must be in order.
Thanks for your answer.
   - Ana Maria Freire Veiga -

On Fri, Apr 4, 2008 at 12:38 PM, Ana Rabade <anafreireveiga@gmail.com>
wrote:

> I am using ngrams and I need to force that a group of them are together,
> but if any of them fails, I need that the document is also scored. Perhap=
s
> you could help me to find the solution or give me a reference of which
> changes I must do. I am using SpanNearQuery, because the ngrams must be i=
n
> order.
> Thanks for your answer.
>    - Ana Maria Freire Veiga -
>
> On Thu, Apr 3, 2008 at 7:56 PM, Erick Erickson <erickerickson@gmail.com>
> wrote:
>
> > Could you explain your use case? Because to say that you want to
> > score documents that don't have all the terms with a *phrase query*
> > is contradictory. The point of a phrase query is exactly that all
> > the terms are there and within some some proximity.....
> >
> >
> > Best
> > Erick
> >
> > On Thu, Apr 3, 2008 at 12:17 PM, Ana R=E1bade <anafreireveiga@gmail.com=
>
> > wrote:
> >
> > > Hi!
> > >
> > > I'm using Lucene Proximity Searches, but I've seen Lucene only scores
> > > documents which contain all the terms in the phrase. I also need to
> > score
> > > documents although they don't contain all those terms.  Is it possibl=
e
> > > with
> > > Lucene PhraseQueries or SpanNearQuery? If not, could you tell me a wa=
y
> > to
> > > find my solution?
> > >
> > > Thank you very much.
> > >
> > >    - Ana M. Freire -
> > >
> >
>
>

------=_Part_5639_8279039.1208515298609--

From java-user-return-33680-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 18 11:02:28 2008
Return-Path: <java-user-return-33680-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71688 invoked from network); 18 Apr 2008 11:02:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Apr 2008 11:02:28 -0000
Received: (qmail 47199 invoked by uid 500); 18 Apr 2008 11:02:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46848 invoked by uid 500); 18 Apr 2008 11:02:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46837 invoked by uid 99); 18 Apr 2008 11:02:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Apr 2008 04:02:22 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [76.13.9.31] (HELO web65411.mail.ac4.yahoo.com) (76.13.9.31)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 18 Apr 2008 11:01:28 +0000
Received: (qmail 11636 invoked by uid 60001); 18 Apr 2008 11:01:48 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=LqXMCa0PsFOKreDFzgvxacGn26qnzn3VhFqwLFsxDPe4UehvY55UEwgTj2Av/oUCu+lJIlQ+iJvodtqAuTszENVoqW29sZAObZtACjzfTu8Q4eKAYochrHiyAGXmmQjBAZPjAo2TpSSdNUYJGUdIgpCQmIzLPyfsqYnInD977Cs=;
X-YMail-OSG: L4_IoyoVM1kGH8nBO61VwovDCwDhwRQEf_69AtAR
Received: from [85.178.134.77] by web65411.mail.ac4.yahoo.com via HTTP; Fri, 18 Apr 2008 04:01:48 PDT
Date: Fri, 18 Apr 2008 04:01:48 -0700 (PDT)
From: Ulf Dittmer <udittmer@yahoo.com>
Subject: differences in deleting docs using IndexWriter and IndexModifier?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
Message-ID: <405706.11550.qm@web65411.mail.ac4.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hello all-

While adapting some code to use IndexWriter instead of
IndexModifier (as indicated by the deprecation
warnings), I stumbled upon an issue that I at first
thought was a bug, but I'm sure it's only because I
don't fully understand how Lucene works.

Basically, I'm using the deleteDocuments(Term) method,
which works as expected in IndexModifier, but which
-for the very same Term- doesn't find and delete a
document in IndexWriter.

I've looked at the source of
IndexWriter.deleteDocuments and
IndexModifier.deleteDocuments, but they seem to go
about deleting documents in very different ways, so it
wasn't obvious to me what's going on.

The source of a short program that exhibits this
behavior is at
http://www.ulfdittmer.com/LuceneTest.java

I'd be grateful if someone could give me hint of
whether I'm using the API incorrectly, or what's going
on.

Thanks in advance,
Ulf



      ____________________________________________________________________________________
Be a better friend, newshound, and 
know-it-all with Yahoo! Mobile.  Try it now.  http://mobile.yahoo.com/;_ylt=Ahu06i62sR8HDtDypao8Wcj9tAcJ

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33681-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 18 11:18:31 2008
Return-Path: <java-user-return-33681-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77793 invoked from network); 18 Apr 2008 11:18:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Apr 2008 11:18:31 -0000
Received: (qmail 67013 invoked by uid 500); 18 Apr 2008 11:18:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66970 invoked by uid 500); 18 Apr 2008 11:18:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66959 invoked by uid 99); 18 Apr 2008 11:18:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Apr 2008 04:18:24 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of benjams@il.ibm.com designates 195.212.29.154 as permitted sender)
Received: from [195.212.29.154] (HELO mtagate5.de.ibm.com) (195.212.29.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Apr 2008 11:17:31 +0000
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate5.de.ibm.com (8.13.8/8.13.8) with ESMTP id m3IBHojr132920
	for <java-user@lucene.apache.org>; Fri, 18 Apr 2008 11:17:50 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.7) with ESMTP id m3IBHodd4345860
	for <java-user@lucene.apache.org>; Fri, 18 Apr 2008 13:17:50 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id m3IBHoYs028233
	for <java-user@lucene.apache.org>; Fri, 18 Apr 2008 13:17:50 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id m3IBHoqK028228
	for <java-user@lucene.apache.org>; Fri, 18 Apr 2008 13:17:50 +0200
Subject: Benjamin Sznajder/Haifa/Contr/IBM is out of the office.
Auto-Submitted: auto-generated
From: Benjamin Sznajder <benjams@il.ibm.com>
To: java-user@lucene.apache.org
Message-ID: <OFC8BE82CB.10BD4711-ONC225742F.003E0E7C-C225742F.003E0E7C@il.ibm.com>
Date: Fri, 18 Apr 2008 14:17:49 +0300
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 8.0.1|February 07, 2008) at
 18/04/2008 14:17:50
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


I will be out of the office starting  10/04/2008 and will not return until
04/05/2008.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33682-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 18 11:18:44 2008
Return-Path: <java-user-return-33682-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77895 invoked from network); 18 Apr 2008 11:18:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Apr 2008 11:18:44 -0000
Received: (qmail 68656 invoked by uid 500); 18 Apr 2008 11:18:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68629 invoked by uid 500); 18 Apr 2008 11:18:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68618 invoked by uid 99); 18 Apr 2008 11:18:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Apr 2008 04:18:38 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [202.51.64.130] (HELO idlewild.ccnep.com.np) (202.51.64.130)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Apr 2008 11:17:54 +0000
Received: from chandantamrakar ([202.51.64.159])
	by idlewild.ccnep.com.np (8.13.3/8.13.3) with ESMTP id m3IBYvj0004327
	for <java-user@lucene.apache.org>; Fri, 18 Apr 2008 17:20:01 +0545
Message-Id: <200804181135.m3IBYvj0004327@idlewild.ccnep.com.np>
Reply-To: <chandan.tamrakar@nepasoft.com>
From: "Chandan Tamrakar" <chandan@ccnep.com.np>
To: <java-user@lucene.apache.org>
Subject: indexing multiple pages and proximity search
Date: Fri, 18 Apr 2008 17:02:59 +0545
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0289_01C8A176.0E1C2EC0"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
Thread-Index: AcihRdvWI8UqAOtuTma3HxcsiRB4Xw==
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0289_01C8A176.0E1C2EC0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi,

 

I have a document and each page of this document is extracted into single
text files 

 

For ex, document abc.doc have abc_page1.txt , abc_page2.txt ...
abc_pageN.txt  , is it possible to index them and still retain the 

Lucene proximity search because technically it is a single document

 

 

Thanks

chandan

 


------=_NextPart_000_0289_01C8A176.0E1C2EC0--



From java-user-return-33683-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 18 13:14:38 2008
Return-Path: <java-user-return-33683-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39594 invoked from network); 18 Apr 2008 13:14:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Apr 2008 13:14:38 -0000
Received: (qmail 79040 invoked by uid 500); 18 Apr 2008 13:14:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79008 invoked by uid 500); 18 Apr 2008 13:14:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78992 invoked by uid 99); 18 Apr 2008 13:14:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Apr 2008 06:14:31 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mudgal.shailendra@gmail.com designates 66.249.82.229 as permitted sender)
Received: from [66.249.82.229] (HELO wx-out-0506.google.com) (66.249.82.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Apr 2008 13:13:49 +0000
Received: by wx-out-0506.google.com with SMTP id i28so458029wxd.20
        for <java-user@lucene.apache.org>; Fri, 18 Apr 2008 06:14:02 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=ufQSfr4AzV9+ETKM+CXdAC+DfoRzsZQxESwf6O27Etw=;
        b=lI1X35txNz6l/8+/Njav7+H4uGNuHCTZt47pDrs9aosOut1rujPEssOAyC7eXbtyeYM9YgRhGBzqTqB6XYkbuVcNssaxfSht5lND+j6Hu0a3sMA4pf1bMK8S65DCaLggvOFaxxz3iST0KBPIM/hbo5gryuhC5BP8rAjmO6SPNIQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=LW/LNSfoC4qDrewAMqCAOLVlIbwuQoivsGQhDqAOr5LXaDq8R55Ayq7Mm9QLjT6pkrPw8VDaXu8xB5JJ/MxWFTUlVj1eT/InGkAI9SUhBS3lRDkR43StZu75gnhTy1ezZUD2m+Pgw58POlm+fQezmC+tm/bK7bIK4HKAgRZ5MqI=
Received: by 10.141.203.14 with SMTP id f14mr1479885rvq.33.1208524441264;
        Fri, 18 Apr 2008 06:14:01 -0700 (PDT)
Received: by 10.141.163.15 with HTTP; Fri, 18 Apr 2008 06:14:01 -0700 (PDT)
Message-ID: <fa7518640804180614m784c58a7u19e04a66a05afe51@mail.gmail.com>
Date: Fri, 18 Apr 2008 18:44:01 +0530
From: "Shailendra Mudgal" <mudgal.shailendra@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Document ids collected from HitCollector.collect and used in FieldCache..
In-Reply-To: <359a92830804171332q7d22de6dyb7a262b3984328b6@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3574_33517227.1208524441269"
References: <fa7518640804171045y36bc3e24k40dd95a19c32e508@mail.gmail.com>
	 <359a92830804171332q7d22de6dyb7a262b3984328b6@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3574_33517227.1208524441269
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Erik Thanks for you prompt reply.

So if i refresh the searcher in every one hour and that time itself if i
refresh this cache also, is this going to work? I mean will the document ids
will be in sync for that one hour.


On Fri, Apr 18, 2008 at 2:02 AM, Erick Erickson <erickerickson@gmail.com>
wrote:

> Doc IDs are NOT permanent. If you don't change your index at all
> (delete especially, but sometimes adding/optimizing can chage IDs)
> then you can re-use them. Otherwise not.
>
>
> On Thu, Apr 17, 2008 at 1:45 PM, Shailendra Mudgal <
> mudgal.shailendra@gmail.com> wrote:
>
> > Hi All,
> >
> > I have a small confusion regarding the document ids which we collect
> using
> > HitCollector.collect() method. Here is the description of the confusion
> :
> >
> > First i created a FieldCache of type <docID, <list of companyIDs>> using
> a
> > query which collects all the articles which are only a month old. I am
> > storing them into a map.
> >
> > So now my cache has same document id 's associated with their field
> value
> > ready in the memory.
> >
> > Now suppose for a search which has duration less then a month, i get a
> > list
> > of docIds using hit collector. Can i map these document ids to the map,
> > which i created earlier. And use those field values???
> >
> >
> > Any help will be appreciated ....
> >
> > Regards,
> > Shailendra
> >
>

------=_Part_3574_33517227.1208524441269--

From java-user-return-33684-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 18 13:55:46 2008
Return-Path: <java-user-return-33684-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61940 invoked from network); 18 Apr 2008 13:55:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Apr 2008 13:55:46 -0000
Received: (qmail 59121 invoked by uid 500); 18 Apr 2008 13:55:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58566 invoked by uid 500); 18 Apr 2008 13:55:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58555 invoked by uid 99); 18 Apr 2008 13:55:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Apr 2008 06:55:39 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [66.249.82.224] (HELO wx-out-0506.google.com) (66.249.82.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Apr 2008 13:54:52 +0000
Received: by wx-out-0506.google.com with SMTP id i28so473576wxd.20
        for <java-user@lucene.apache.org>; Fri, 18 Apr 2008 06:54:54 -0700 (PDT)
Received: by 10.70.44.20 with SMTP id r20mr3271000wxr.5.1208526892700;
        Fri, 18 Apr 2008 06:54:52 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id h17sm21282858wxd.24.2008.04.18.06.54.45
        (version=TLSv1/SSLv3 cipher=OTHER);
        Fri, 18 Apr 2008 06:54:47 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <405706.11550.qm@web65411.mail.ac4.yahoo.com>
References: <405706.11550.qm@web65411.mail.ac4.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <9B9F8775-F6A5-4298-B6D6-313FE502085D@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: differences in deleting docs using IndexWriter and IndexModifier?
Date: Fri, 18 Apr 2008 09:55:09 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org

I believe your docs are being deleted.  It's just that
IndexWriter.docCount() does not count deleted docs.  That method
matches IndexReader.maxDoc(), not IndexReader.numDocs().

If you open an IndexReader and call numDocs() does it reflect the
deletion?

Really I think we should add "maxDoc()" and "numDocs()" to
IndexWriter, and deprecate docCount() in favor of maxDoc().  I'll
open an issue.

The two indeed take very different routes for deletion.  IndexModifier
closes its writer, opens a reader, and does the deletions with the
reader.  These deletions are "immediate" in that the reader can tell
you how many docs just got deleted, but not committed until the
modifier closes its reader.

Whereas IndexWriter.deleteDocuments simply buffers up all terms and
periodically these are flushed in bulk to the index.  Only closing the
IndexWriter ensures that the deletions are visible to a reader.

We are trying over time to move towards a read-only IndexReader, and
absorbing all write operations into IndexWriter.

Mike

Ulf Dittmer wrote:
> Hello all-
>
> While adapting some code to use IndexWriter instead of
> IndexModifier (as indicated by the deprecation
> warnings), I stumbled upon an issue that I at first
> thought was a bug, but I'm sure it's only because I
> don't fully understand how Lucene works.
>
> Basically, I'm using the deleteDocuments(Term) method,
> which works as expected in IndexModifier, but which
> -for the very same Term- doesn't find and delete a
> document in IndexWriter.
>
> I've looked at the source of
> IndexWriter.deleteDocuments and
> IndexModifier.deleteDocuments, but they seem to go
> about deleting documents in very different ways, so it
> wasn't obvious to me what's going on.
>
> The source of a short program that exhibits this
> behavior is at
> http://www.ulfdittmer.com/LuceneTest.java
>
> I'd be grateful if someone could give me hint of
> whether I'm using the API incorrectly, or what's going
> on.
>
> Thanks in advance,
> Ulf
>
>
>
>        
> ______________________________________________________________________ 
> ______________
> Be a better friend, newshound, and
> know-it-all with Yahoo! Mobile.  Try it now.  http:// 
> mobile.yahoo.com/;_ylt=Ahu06i62sR8HDtDypao8Wcj9tAcJ
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33685-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 18 14:01:48 2008
Return-Path: <java-user-return-33685-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66857 invoked from network); 18 Apr 2008 14:01:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Apr 2008 14:01:47 -0000
Received: (qmail 73386 invoked by uid 500); 18 Apr 2008 14:01:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73356 invoked by uid 500); 18 Apr 2008 14:01:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73345 invoked by uid 99); 18 Apr 2008 14:01:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Apr 2008 07:01:41 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.188 as permitted sender)
Received: from [209.85.128.188] (HELO fk-out-0910.google.com) (209.85.128.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Apr 2008 14:00:58 +0000
Received: by fk-out-0910.google.com with SMTP id 19so714393fkr.5
        for <java-user@lucene.apache.org>; Fri, 18 Apr 2008 07:01:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=i8VEUA6ecM6ajCjxflhydXZG3XeHus7app793Ao22TA=;
        b=GRXoW7oKSqSI6+A4Lr+/PPLFC4WaPFOgv+27QTMjh/zLKtv9FAZ0A47S/K3kV13MgOKDCwmn8PWYWN//k9uovglNTLw+7ZuuQD3KRty29UbUv70wlI4yw604drb9fZ8LvnH0vqJkbib8IY9bNxkdLqPCsywmfg/jL9IDsJXgcl8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=RR9pG6oVnC+KrRxk1vfb6w86ZpQ7KCN0R61x1UpDrDe963pNuYc8+iaSVO6uu92UT/Gb3/GmCAHcaWn45SfNrfmVtRhpy168dd2nTG+pmtKpIYvBxnqsACLYY/8km7Btwcz4+gYZs1hSw6lXfgAH4b1pAvxIVaXFZ3Kwwza0bEI=
Received: by 10.82.120.18 with SMTP id s18mr4805362buc.3.1208527269643;
        Fri, 18 Apr 2008 07:01:09 -0700 (PDT)
Received: by 10.82.191.6 with HTTP; Fri, 18 Apr 2008 07:01:09 -0700 (PDT)
Message-ID: <359a92830804180701s24b89650p68d0a6e3dc590181@mail.gmail.com>
Date: Fri, 18 Apr 2008 10:01:09 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org, chandan.tamrakar@nepasoft.com
Subject: Re: indexing multiple pages and proximity search
In-Reply-To: <200804181135.m3IBYvj0004327@idlewild.ccnep.com.np>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3107_1107151.1208527269622"
References: <200804181135.m3IBYvj0004327@idlewild.ccnep.com.np>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3107_1107151.1208527269622
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I think they'd have to be in the same document. So you could
read all the pages and add it to, say, a field named "text"
and add the doc and all the pages at once in a single document.

Be aware that by default Lucene only index the first 10,000
terms, but that can be changed with IndexWriter.setMaxFieldLength (?)

Best
Erick

On Fri, Apr 18, 2008 at 7:17 AM, Chandan Tamrakar <chandan@ccnep.com.np>
wrote:

> Hi,
>
>
>
> I have a document and each page of this document is extracted into single
> text files
>
>
>
> For ex, document abc.doc have abc_page1.txt , abc_page2.txt ...
> abc_pageN.txt  , is it possible to index them and still retain the
>
> Lucene proximity search because technically it is a single document
>
>
>
>
>
> Thanks
>
> chandan
>
>
>
>

------=_Part_3107_1107151.1208527269622--

From java-user-return-33686-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 18 14:05:28 2008
Return-Path: <java-user-return-33686-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69693 invoked from network); 18 Apr 2008 14:05:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Apr 2008 14:05:27 -0000
Received: (qmail 79181 invoked by uid 500); 18 Apr 2008 14:05:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78874 invoked by uid 500); 18 Apr 2008 14:05:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78863 invoked by uid 99); 18 Apr 2008 14:05:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Apr 2008 07:05:21 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.134.187 as permitted sender)
Received: from [209.85.134.187] (HELO mu-out-0910.google.com) (209.85.134.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Apr 2008 14:04:38 +0000
Received: by mu-out-0910.google.com with SMTP id w9so531199mue.5
        for <java-user@lucene.apache.org>; Fri, 18 Apr 2008 07:04:50 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=KWfRVWUL0JxiyHSSUDCge6mE4nAGkGzT+I7k+yVHfWQ=;
        b=E65Ogyr5i1Tc31khUdpYgkqU4OTuZEC7Z3GjH/gkIKwXrvC9u5joQalQ4ynEe9yXipuaFBMEJzX0KQ1O7Vo3lh6PAKuYjoxD7QZZLkIr1PWvmOdpRmS+XqeAIaXSyNCSpQfX/1Ua9V21ct+qTDn57eBadlPsxSmPsWXkorWao6Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=DKskquLZsT9bMuEgen2DgbAI/ajCAmpnWbR+DIs1KdL7sSsxk4uxpiJ1F1JmWQvJ7T6gv+gIOGQBUtZqsdEcFinV8+bjfeAUJGJyj600U1W9T/Kf/Wodl/tiCBK+EV1D95Wbp2I+8pjjM4eSmFAHKIAeymVBqfXJyPDCzyEfbyw=
Received: by 10.82.180.10 with SMTP id c10mr4820078buf.9.1208527489878;
        Fri, 18 Apr 2008 07:04:49 -0700 (PDT)
Received: by 10.82.191.6 with HTTP; Fri, 18 Apr 2008 07:04:49 -0700 (PDT)
Message-ID: <359a92830804180704y125b4b9bsf6382bb52f7dff17@mail.gmail.com>
Date: Fri, 18 Apr 2008 10:04:49 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Document ids collected from HitCollector.collect and used in FieldCache..
In-Reply-To: <fa7518640804180614m784c58a7u19e04a66a05afe51@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3127_26647042.1208527489627"
References: <fa7518640804171045y36bc3e24k40dd95a19c32e508@mail.gmail.com>
	 <359a92830804171332q7d22de6dyb7a262b3984328b6@mail.gmail.com>
	 <fa7518640804180614m784c58a7u19e04a66a05afe51@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3127_26647042.1208527489627
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

They'll be in synch forever unless and until you *change* the index. Once
you do anything with an IndexWriter, you have to be very careful about
relying on doc IDs.

But remember that opening a searcher takes a snapshot of the index and
that reader/searcher will NOT see changes. So you could think about
building your cache and using it *as long as you haven't closed/reopened
your index reader*. The cache and search will be in synch for that interval.

Best
Erick

On Fri, Apr 18, 2008 at 9:14 AM, Shailendra Mudgal <
mudgal.shailendra@gmail.com> wrote:

> Hi Erik Thanks for you prompt reply.
>
> So if i refresh the searcher in every one hour and that time itself if i
> refresh this cache also, is this going to work? I mean will the document
> ids
> will be in sync for that one hour.
>
>
> On Fri, Apr 18, 2008 at 2:02 AM, Erick Erickson <erickerickson@gmail.com>
> wrote:
>
> > Doc IDs are NOT permanent. If you don't change your index at all
> > (delete especially, but sometimes adding/optimizing can chage IDs)
> > then you can re-use them. Otherwise not.
> >
> >
> > On Thu, Apr 17, 2008 at 1:45 PM, Shailendra Mudgal <
> > mudgal.shailendra@gmail.com> wrote:
> >
> > > Hi All,
> > >
> > > I have a small confusion regarding the document ids which we collect
> > using
> > > HitCollector.collect() method. Here is the description of the
> confusion
> > :
> > >
> > > First i created a FieldCache of type <docID, <list of companyIDs>>
> using
> > a
> > > query which collects all the articles which are only a month old. I am
> > > storing them into a map.
> > >
> > > So now my cache has same document id 's associated with their field
> > value
> > > ready in the memory.
> > >
> > > Now suppose for a search which has duration less then a month, i get a
> > > list
> > > of docIds using hit collector. Can i map these document ids to the
> map,
> > > which i created earlier. And use those field values???
> > >
> > >
> > > Any help will be appreciated ....
> > >
> > > Regards,
> > > Shailendra
> > >
> >
>

------=_Part_3127_26647042.1208527489627--

From java-user-return-33687-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 18 14:15:56 2008
Return-Path: <java-user-return-33687-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74855 invoked from network); 18 Apr 2008 14:15:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Apr 2008 14:15:56 -0000
Received: (qmail 98080 invoked by uid 500); 18 Apr 2008 14:15:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98046 invoked by uid 500); 18 Apr 2008 14:15:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98035 invoked by uid 99); 18 Apr 2008 14:15:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Apr 2008 07:15:49 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mudgal.shailendra@gmail.com designates 66.249.82.238 as permitted sender)
Received: from [66.249.82.238] (HELO wx-out-0506.google.com) (66.249.82.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Apr 2008 14:15:06 +0000
Received: by wx-out-0506.google.com with SMTP id i28so481987wxd.20
        for <java-user@lucene.apache.org>; Fri, 18 Apr 2008 07:15:18 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=b1Wa8HXkIhR4gni4Jy1vvZX7/67cNW2s0Tt3RuRKwQ0=;
        b=fvgKMNpiJukGW+6b0DHrXEqNhdyTAPTzOd+dUnOypwKUpAQ0M85Kmbd0MUyJrGIaiAMll8IMOp9NTrxgWAEM0oLHVgU7tAiasWgf1o3VXffrSYi0bXem0z2FPd+v9D9nwcVUzlCxJfyuD46UJAu/hPF3f6hzNkg4LbwrSnbiHKs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=K3l1nd5OvrcpALmtycCROQ+6mL54fKxMbDtyH6GTACo0BwpGrlU+JnVOUbjKFlg25mfwQCBgTOeqTBxc0m+8Aek9i1PGQTqWO29SWuryP/bcE77DT1qfo5szvMNJIV91A+TKgFwRAGxpeOqLRQCDPkbnEVE7+Ywgs7L1Nv2mXeI=
Received: by 10.141.19.16 with SMTP id w16mr1540673rvi.8.1208528118098;
        Fri, 18 Apr 2008 07:15:18 -0700 (PDT)
Received: by 10.141.163.15 with HTTP; Fri, 18 Apr 2008 07:15:18 -0700 (PDT)
Message-ID: <fa7518640804180715u485e638evf8b44bc165c2183d@mail.gmail.com>
Date: Fri, 18 Apr 2008 19:45:18 +0530
From: "Shailendra Mudgal" <mudgal.shailendra@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Document ids collected from HitCollector.collect and used in FieldCache..
In-Reply-To: <359a92830804180704y125b4b9bsf6382bb52f7dff17@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3758_19062501.1208528118096"
References: <fa7518640804171045y36bc3e24k40dd95a19c32e508@mail.gmail.com>
	 <359a92830804171332q7d22de6dyb7a262b3984328b6@mail.gmail.com>
	 <fa7518640804180614m784c58a7u19e04a66a05afe51@mail.gmail.com>
	 <359a92830804180704y125b4b9bsf6382bb52f7dff17@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3758_19062501.1208528118096
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks a lot Erik. I just wanted to confirm this.

Regards,


On Fri, Apr 18, 2008 at 7:34 PM, Erick Erickson <erickerickson@gmail.com>
wrote:

> They'll be in synch forever unless and until you *change* the index. Once
> you do anything with an IndexWriter, you have to be very careful about
> relying on doc IDs.
>
> But remember that opening a searcher takes a snapshot of the index and
> that reader/searcher will NOT see changes. So you could think about
> building your cache and using it *as long as you haven't closed/reopened
> your index reader*. The cache and search will be in synch for that
> interval.
>
> Best
> Erick
>
> On Fri, Apr 18, 2008 at 9:14 AM, Shailendra Mudgal <
> mudgal.shailendra@gmail.com> wrote:
>
> > Hi Erik Thanks for you prompt reply.
> >
> > So if i refresh the searcher in every one hour and that time itself if i
> > refresh this cache also, is this going to work? I mean will the document
> > ids
> > will be in sync for that one hour.
> >
> >
> > On Fri, Apr 18, 2008 at 2:02 AM, Erick Erickson <erickerickson@gmail.com
> >
> > wrote:
> >
> > > Doc IDs are NOT permanent. If you don't change your index at all
> > > (delete especially, but sometimes adding/optimizing can chage IDs)
> > > then you can re-use them. Otherwise not.
> > >
> > >
> > > On Thu, Apr 17, 2008 at 1:45 PM, Shailendra Mudgal <
> > > mudgal.shailendra@gmail.com> wrote:
> > >
> > > > Hi All,
> > > >
> > > > I have a small confusion regarding the document ids which we collect
> > > using
> > > > HitCollector.collect() method. Here is the description of the
> > confusion
> > > :
> > > >
> > > > First i created a FieldCache of type <docID, <list of companyIDs>>
> > using
> > > a
> > > > query which collects all the articles which are only a month old. I
> am
> > > > storing them into a map.
> > > >
> > > > So now my cache has same document id 's associated with their field
> > > value
> > > > ready in the memory.
> > > >
> > > > Now suppose for a search which has duration less then a month, i get
> a
> > > > list
> > > > of docIds using hit collector. Can i map these document ids to the
> > map,
> > > > which i created earlier. And use those field values???
> > > >
> > > >
> > > > Any help will be appreciated ....
> > > >
> > > > Regards,
> > > > Shailendra
> > > >
> > >
> >
>

------=_Part_3758_19062501.1208528118096--

From java-user-return-33688-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 18 15:06:32 2008
Return-Path: <java-user-return-33688-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12081 invoked from network); 18 Apr 2008 15:06:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Apr 2008 15:06:30 -0000
Received: (qmail 14970 invoked by uid 500); 18 Apr 2008 15:06:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14944 invoked by uid 500); 18 Apr 2008 15:06:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14933 invoked by uid 99); 18 Apr 2008 15:06:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Apr 2008 08:06:23 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of glen.newton@gmail.com designates 64.233.184.228 as permitted sender)
Received: from [64.233.184.228] (HELO wr-out-0506.google.com) (64.233.184.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Apr 2008 15:05:36 +0000
Received: by wr-out-0506.google.com with SMTP id c30so390588wra.14
        for <java-user@lucene.apache.org>; Fri, 18 Apr 2008 08:05:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=hKasdiUtaXJDIldy4ZgTRX6f0rL3D/5F1FWpBIVpS6A=;
        b=TewGXNzUCACq9Y/GA5WnTcWhBrCSSZOqaVLApvsuOZxe7/fjAZzrl3CleIZezaB3M+1p7CcrCKorCd7ntitG0MVj0OBlBGcOvzRXDxh53qRR6IzAmq5UxPJUhzNSuMw2QeSKG6zd2pgHIru1uymGWS+7oDnSA+ZKRcsyN6gScHg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=TJF8MP1JzXoExiljWl9XkGU3LhfFXyMZalZGTeFYvMngLwl0djLtR3ch6kyLQdaQKmxonpfItZsrUNw2+xuiYy10DYkLS7I45lfRgYPOPydZ8IFbSeEj09X3Y4VG9uPMQT7PKHtsoUT7r2qTdD4fPHDHKf5enLrWnt054eirqGg=
Received: by 10.141.170.10 with SMTP id x10mr1574151rvo.92.1208531146543;
        Fri, 18 Apr 2008 08:05:46 -0700 (PDT)
Received: by 10.140.148.19 with HTTP; Fri, 18 Apr 2008 08:05:46 -0700 (PDT)
Message-ID: <5e76f3840804180805u38e4b6a5w9fa2fde59deb17ac@mail.gmail.com>
Date: Fri, 18 Apr 2008 11:05:46 -0400
From: "Glen Newton" <glen.newton@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene performance: benchmarktemplate.xml
In-Reply-To: <1208491273.5496.1.camel@localhost>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <5e76f3840804150951n4df5782dke95fab45e7473a3f@mail.gmail.com>
	 <480545C2.3070504@holsman.net>
	 <8e69b6620804151940i5899e119l82628d15f131f45a@mail.gmail.com>
	 <5e76f3840804160640idf6571et866a96e1db9c8832@mail.gmail.com>
	 <F582256E-50CF-4168-B293-2B7EDFDC9BCB@mikemccandless.com>
	 <5e76f3840804161051h2fc64030xc1ad4a37d26d0353@mail.gmail.com>
	 <1208491273.5496.1.camel@localhost>
X-Virus-Checked: Checked by ClamAV on apache.org

HI Anshum,

A reasonable question. Answer: 64 bit architecture running 64 bit Java
VM. It is great!  :-)

> Java HotSpot(TM) 64-Bit Server VM (build 1.6.0_02-b05, mixed mode)
> OS Version: Linux OpenSUSE 10.2 (64-bit X86-64)

If you have any other questions, please let me know.  :-)

-Glen

On 18/04/2008, Anshum <anshum.gupta@naukri.com> wrote:
> Hi Glenn,
>
>  I am not too clear about it, but isn't there a limit to the memory
>  consumption specified for the JVM? The limit being 1.3Gigs of resident
>  and 2 Gigs of memory in all? You just mentioned the Memory consumption:
>  -Xms4000m -Xmx6000m.
>  Could someone please help me with the same.
>
>  --
>
> Anshum
>
>
>  On Wed, 2008-04-16 at 23:21 +0530, Glen Newton wrote:
>  > On 16/04/2008, Michael McCandless <lucene@mikemccandless.com> wrote:
>  > > These are great results!  Thanks for posting.
>  >
>  > Thanks!
>  >
>  > >
>  > >  I'd be curious if you'd get better indexing throughput by using a single
>  > > IndexWriter, fed by all 8 indexing threads, with an 8X bigger RAM buffer,
>  > > instead of 8 IndexWriters that merge in the end.
>  >
>  > While I am new to this list, I have been trying different
>  > combinations/configurations for this over the last 18 months. To
>  > answer your questions: no, not on our multi-core machine. But I
>  > haven't  tried your suggested scenario with >= v2.2, so it is possible
>  > that it might be better.
>  >
>  > >  How long does that final merge take now?
>  >
>  > I don't have that timed. I will alter the app to record this.
>  >
>  > >  Also, 64 threads doing document construction seems too high?  You may be
>  > > losing some performance to the cost of thread context switching.
>  >
>  > I did performance tests on 8,16,24,32,48,64,72,96,128 threads. 64 was
>  > the sweet spot, for this particular configuration.
>  >
>  > >  Did you use autoCommit=false?  I think it should help since you have so
>  > > many stored fields and some term vectors.
>  >
>  > Damn, I am using the defaults (autoCommit=true). I will re-run and
>  > post the results!
>  >
>  > Thanks,  :-)
>  >
>  > -glen
>  >
>  > >  Mike
>  > >
>  > >
>  > >  Glen Newton wrote:
>  > >
>  > > > Cass,
>  > > > Thanks for converting it. I've posted it to my blog:
>  > > >
>  > > http://zzzoot.blogspot.com/2008/04/lucene-indexing-performance-benchmarks.html
>  > > >
>  > > > Sorry for the XML tags: I guess I followed the instructions on the
>  > > > Lucene performance benchmarks page to literally ("Post these figures
>  > > > to the lucene-user mailing list using this template.").
>  > > >
>  > > > Sorry if it hurt your eyes!  :-)
>  > > >
>  > > > -Glen
>  > > >
>  > > > On 15/04/2008, Cass Costello <casspc@gmail.com> wrote:
>  > > >
>  > > > > I just did that so I could read it. :)  I'll leave it up until Glen
>  > > resends
>  > > > >  or posts it somewhere...
>  > > > >  http://www.casscostello.com/?page_id=28
>  > > > >
>  > > > >
>  > > > >
>  > > > >
>  > > > >  On Tue, Apr 15, 2008 at 5:18 PM, Ian Holsman <lists@holsman.net> wrote:
>  > > > >
>  > > > >
>  > > > > > Hi Glen.
>  > > > > > can you resend this in plain text?
>  > > > > > or put the HTML up on a server somewhere and point to it with a brief
>  > > > > > summary in the post?
>  > > > > > I'd love to look and read it, all those tags are making me go blind.
>  > > > > >
>  > > > > >
>  > > > > > Glen Newton wrote:
>  > > > > >
>  > > > > >
>  > > > > > > <benchmark>
>  > > > > > >  <ul>
>  > > > > > >  <p>
>  > > > > > >  <b>Hardware Environment</b><br/>
>  > > > > > >  <li><i>Dedicated machine for indexing</i>: yes</li>
>  > > > > > >  <li><i>CPU</i>: Dual processor dual core Xeon CPU 3.00GHz;
>  > > > > > > hyperthreading ON for 8 virtual cores</li>
>  > > > > > >  <li><i>RAM</i>: 8GB</li>
>  > > > > > >  <li><i>Drive configuration</i>: Dell EMC AX150 storage array fibre
>  > > > > > > channel</li>
>  > > > > > >  </p>
>  > > > > > >  <p>
>  > > > > > >  <b>Software environment</b><br/>
>  > > > > > >  <li><i>Lucene Version</i>: 2.3.1</li>
>  > > > > > >  <li><i>Java Version</i>:  Java(TM) SE Runtime Environment (build
>  > > > > > > 1.6.0_02-b05)</li>
>  > > > > > >  <li><i>Java VM</i>: Java HotSpot(TM) 64-Bit Server VM (build
>  > > > > > > 1.6.0_02-b05, mixed mode)</li>
>  > > > > > >  <li><i>OS Version</i>: Linux OpenSUSE 10.2 (64-bit X86-64)</li>
>  > > > > > >  <li><i>Location of index</i>: Filesystem, on attached storage</li>
>  > > > > > >  </p>
>  > > > > > >  <p>
>  > > > > > >  <b>Lucene indexing variables</b><br/>
>  > > > > > >  <li><i>Number of source documents</i>: 6,404,464</li>
>  > > > > > >  <li><i>Total filesize of source documents</i>: 141GB; Note that
>  > > this
>  > > > > > > is only the full-text: the metadata (title, author(s), abstract,
>  > > > > > > keywords, journal name) are in addition to this</li>
>  > > > > > >  <li><i>Average filesize of source documents</i>:
>  > > > > > > 22KB + metadata (see above)</li>
>  > > > > > >  <li><i>Source documents storage location</i>: Where are the
>  > > documents
>  > > > > > > being indexed located?
>  > > > > > >  Filesystem</li>
>  > > > > > >  <li><i>File type of source documents</i>: text (PDFs converted to
>  > > > > > > text then gzipped)</li>
>  > > > > > >  <li><i>Parser(s) used, if any</i>: None, but files GZIPed & had to
>  > > > > > > be un-gziped by Java application which also did indexing</li>
>  > > > > > >  <li><i>Analyzer(s) used</i>: StandardAnalyzer</li>
>  > > > > > >  <li><i>Number of fields per document</i>: 24</li>
>  > > > > > >  <li><i>Type of fields</i>: all text; 20 stored; 3 of indexed
>  > > > > > > tokenized with term vector (full-text [not stored], title,
>  > > abstract);
>  > > > > > > 10 stored with no parsing; </li>
>  > > > > > >  <li><i>Index persistence</i>: FSDirectory</li>
>  > > > > > >  <li><i>Index size</i>: 83GB</li>
>  > > > > > >  <li><i>Number of terms</i>: 143,298,010</li>
>  > > > > > >  </p>
>  > > > > > >  <p>
>  > > > > > >  <b>Figures</b><br/>
>  > > > > > >  <li><i>Time taken (in ms/s as an average of at least 3 indexing
>  > > > > > > runs)</i>: 20.5 hours</li>
>  > > > > > >  <li><i>Time taken / 1000 docs indexed</i>: 11.5 seconds </li>
>  > > > > > >  <li><i>Memory consumption</i>:  -Xms4000m  -Xmx6000m</li>
>  > > > > > >  <li><i>Query speed</i>: average time a query takes, type
>  > > > > > >  of queries (e.g. simple one-term query, phrase query),
>  > > > > > >  not measuring any overhead outside Lucene</li>
>  > > > > > >  </p>
>  > > > > > >  <p>
>  > > > > > >  <b>Notes</b><br/>
>  > > > > > >  <li><i>Notes</i>:
>  > > > > > >      <ul>
>  > > > > > >        <li>
>  > > > > > >          These are journal articles, so the additional fields
>  > > besides
>  > > > > > > the
>  > > > > > > full-text are bibliographic metadata, such as title, authors,
>  > > > > > > abstract, keywords, journal name, volume, issue, start page, year.
>  > > > > > >        </li>
>  > > > > > >        <li>Java command line directives: -XX:+AggressiveOpts
>  > > > > > > -XX:+ScavengeBeforeFullGC -XX:-UseParallelGC   -server  -Xms4000m
>  > > > > > > -Xmx6000m
>  > > > > > >        </li>
>  > > > > > >        <li>Highly multithreaded & pipelined architecture using
>  > > > > > > java.util.concurrent.ThreadPoolExecutor
>  > > > > > >        </li>
>  > > > > > >        <li>File system file reading and Un-gzip performed
>  > > multithreaded
>  > > > > > >        </li>
>  > > > > > >        <li>Eight separate parallel IndexWriters are fed by the
>  > > pipeline
>  > > > > > > (creation of Document objects occurs in parallel with 64 threads),
>  > > > > > > merged at end into single index. Each parallel index had slightly
>  > > > > > > different RAM_BUFFER_SIZE_MB (64, 67, 70, 73, 76, 79, 83, 85 MB
>  > > > > > > respectively), so that flushing wouldn't all happen at the same
>  > > time.
>  > > > > > >        </li>
>  > > > > > >        <li>
>  > > > > > >          Contact: glen DOT newton AT nrc-cnrc DOT gc DOT ca
>  > > > > > >        </li>
>  > > > > > >
>  > > > > > >      </ul>
>  > > > > > > </li>
>  > > > > > >  </p>
>  > > > > > >  </ul>
>  > > > > > > </benchmark>
>  > > > > > >
>  > > > > > >
>  > > > > > >
>  > > > > > >
>  > > > > > >
>  > > > > >
>  > > > > >
>  > > > > >
>  > > ---------------------------------------------------------------------
>  > > > > > To unsubscribe, e-mail:
>  > > java-user-unsubscribe@lucene.apache.org
>  > > > > > For additional commands, e-mail:
>  > > java-user-help@lucene.apache.org
>  > > > > >
>  > > > > >
>  > > > > >
>  > > > >
>  > > > >
>  > > > >
>  > > > > --
>  > > > >  Lego timeline:
>  > > > >
>  > > http://cache.gizmodo.com/assets/resources/2008/01/lego-brick4-timeline.jpg
>  > > > >
>  > > > >
>  > > >
>  > > >
>  > > > --
>  > > >
>  > > > -
>  > > >
>  > > >
>  > > ---------------------------------------------------------------------
>  > > > To unsubscribe, e-mail:
>  > > java-user-unsubscribe@lucene.apache.org
>  > > > For additional commands, e-mail:
>  > > java-user-help@lucene.apache.org
>  > > >
>  > > >
>  > >
>  > >
>  > > ---------------------------------------------------------------------
>  > >  To unsubscribe, e-mail:
>  > > java-user-unsubscribe@lucene.apache.org
>  > >  For additional commands, e-mail:
>  > > java-user-help@lucene.apache.org
>  > >
>  > >
>  >
>  >
>  > --
>  >
>  > -
>  >
>  > ---------------------------------------------------------------------
>  > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  > For additional commands, e-mail: java-user-help@lucene.apache.org
>  >
>
>
>  ---------------------------------------------------------------------
>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33689-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 18 15:24:20 2008
Return-Path: <java-user-return-33689-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25497 invoked from network); 18 Apr 2008 15:24:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Apr 2008 15:24:18 -0000
Received: (qmail 54691 invoked by uid 500); 18 Apr 2008 15:24:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54662 invoked by uid 500); 18 Apr 2008 15:24:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54651 invoked by uid 99); 18 Apr 2008 15:24:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Apr 2008 08:24:11 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [194.109.24.22] (HELO smtp-vbr2.xs4all.nl) (194.109.24.22)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Apr 2008 15:23:19 +0000
Received: from k8u.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr2.xs4all.nl (8.13.8/8.13.8) with ESMTP id m3IFNegg038994
	for <java-user@lucene.apache.org>; Fri, 18 Apr 2008 17:23:40 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Lucene Proximity Searches
Date: Fri, 18 Apr 2008 17:23:39 +0200
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <c78ed28e0803311054v21fd3a8cgdb15778525f5895@mail.gmail.com> <c78ed28e0804040338y2dacc7dcn703ff1bc0d730572@mail.gmail.com> <c78ed28e0804180341k1a6e4265me42685ca7fdf7f46@mail.gmail.com>
In-Reply-To: <c78ed28e0804180341k1a6e4265me42685ca7fdf7f46@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200804181723.39499.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Ana,

Op Friday 18 April 2008 12:41:38 schreef Ana Rabade:
> I am using ngrams and I need to force that a group of them are
> together, but if any of them fails, I need that the document is also
> scored. Perhaps you could help me to find the solution or give me a
> reference of which changes I must do. I am using SpanNearQuery,
> because the ngrams must be in order. Thanks for your answer.
>    - Ana Maria Freire Veiga -

Assuming that K terms are involved and K-1 of them need to match
in order as ngrams, there are the following options:

=2D create K SpanNearQuery's on K-1 ordered terms with appropriate
slop, add these to a BooleanQuery using Occur.SHOULD, and
search this BooleanQuery.

=2D starting from the same K SpanNearQuery's on K-1 terms,
search each of these separately and use your own HitCollector to
combine the scores.

=46or these two options, one could also use the K terms SpanNearQuery
to influence the scoring somewhat. The problem with these
options is that the number of terms in the query is quadratic
in K, possibly giving performance problems for higher values of K.
In that case, try the third option:

=2D modify the code of the NearSpansOrdered class in=20
the org.apache.lucene.search.spans package to allow
a match for less than all subqueries. This is not going to
be straightforward, but it is possible. In case you choose
this last option, please continue on the java-dev list.

Regards,
Paul Elschot

>
> On Fri, Apr 4, 2008 at 12:38 PM, Ana Rabade
> <anafreireveiga@gmail.com>
>
> wrote:
> > I am using ngrams and I need to force that a group of them are
> > together, but if any of them fails, I need that the document is
> > also scored. Perhaps you could help me to find the solution or give
> > me a reference of which changes I must do. I am using
> > SpanNearQuery, because the ngrams must be in order.
> > Thanks for your answer.
> >    - Ana Maria Freire Veiga -
> >
> > On Thu, Apr 3, 2008 at 7:56 PM, Erick Erickson
> > <erickerickson@gmail.com>
> >
> > wrote:
> > > Could you explain your use case? Because to say that you want to
> > > score documents that don't have all the terms with a *phrase
> > > query* is contradictory. The point of a phrase query is exactly
> > > that all the terms are there and within some some proximity.....
> > >
> > >
> > > Best
> > > Erick
> > >
> > > On Thu, Apr 3, 2008 at 12:17 PM, Ana R=C3=A1bade
> > > <anafreireveiga@gmail.com>
> > >
> > > wrote:
> > > > Hi!
> > > >
> > > > I'm using Lucene Proximity Searches, but I've seen Lucene only
> > > > scores documents which contain all the terms in the phrase. I
> > > > also need to
> > >
> > > score
> > >
> > > > documents although they don't contain all those terms.  Is it
> > > > possible with
> > > > Lucene PhraseQueries or SpanNearQuery? If not, could you tell
> > > > me a way
> > >
> > > to
> > >
> > > > find my solution?
> > > >
> > > > Thank you very much.
> > > >
> > > >    - Ana M. Freire -



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33690-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 18 15:43:16 2008
Return-Path: <java-user-return-33690-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32792 invoked from network); 18 Apr 2008 15:43:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Apr 2008 15:43:16 -0000
Received: (qmail 89093 invoked by uid 500); 18 Apr 2008 15:43:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89064 invoked by uid 500); 18 Apr 2008 15:43:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89050 invoked by uid 99); 18 Apr 2008 15:43:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Apr 2008 08:43:00 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [76.13.9.36] (HELO web65416.mail.ac4.yahoo.com) (76.13.9.36)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 18 Apr 2008 15:42:14 +0000
Received: (qmail 81384 invoked by uid 60001); 18 Apr 2008 15:42:27 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=hIF2PpcxfR/U/vmc6+EDTop/SREfXuoLY8ANFgjT6P756ytTYMtD8yI35bdAONvi5v7D3ulVAbBER9mSxkggm3YEGMa9G6nMoeawyzMScuJJYbTeKrnWR4iij2vqAsIEIaV4Vq7jszYTmU91nbWWdmzI7+ZRYMRazEhWOc3F6Ek=;
X-YMail-OSG: avnQ9fkVM1kFQUQu___X88dJ86aKe3yv8JoGzxpxgoIqsrhyvv6vFnqtd0X56kxKGHblaNnu4dla5cyotev_qOI9.54aTLPVH9egJgNfD4wXOUd6zqeFQ9lbCA--
Received: from [85.178.187.173] by web65416.mail.ac4.yahoo.com via HTTP; Fri, 18 Apr 2008 08:42:26 PDT
Date: Fri, 18 Apr 2008 08:42:26 -0700 (PDT)
From: Ulf Dittmer <udittmer@yahoo.com>
Subject: Re: differences in deleting docs using IndexWriter and IndexModifier?
To: java-user@lucene.apache.org
In-Reply-To: <9B9F8775-F6A5-4298-B6D6-313FE502085D@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
Message-ID: <975024.81350.qm@web65416.mail.ac4.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for the explanation.

You're right, IndexReader reports the correct number
of documents.

That might be a worthwhile addition to the
IndexModifier javadocs -
that the IndexWriter method of the same name is not a
drop-in replacement.

Of course, that's moot if docCount gets deprecated
anyway.

Ulf

--- Michael McCandless <lucene@mikemccandless.com>
wrote:

> I believe your docs are being deleted.  It's just
that
> IndexWriter.docCount() does not count deleted docs. 
> That method matches IndexReader.maxDoc(), not
IndexReader.numDocs().
> 
> If you open an IndexReader and call numDocs() does
> it reflect the deletion?
> 
> Really I think we should add "maxDoc()" and
"numDocs()" to IndexWriter,
> and deprecate docCount() in favor of maxDoc().  I'll
open an issue.



      ____________________________________________________________________________________
Be a better friend, newshound, and 
know-it-all with Yahoo! Mobile.  Try it now.  http://mobile.yahoo.com/;_ylt=Ahu06i62sR8HDtDypao8Wcj9tAcJ

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33691-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 18 16:00:10 2008
Return-Path: <java-user-return-33691-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46134 invoked from network); 18 Apr 2008 16:00:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Apr 2008 16:00:07 -0000
Received: (qmail 23506 invoked by uid 500); 18 Apr 2008 16:00:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22893 invoked by uid 500); 18 Apr 2008 16:00:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22882 invoked by uid 99); 18 Apr 2008 16:00:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Apr 2008 09:00:00 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.38.59] (HELO web50305.mail.re2.yahoo.com) (206.190.38.59)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 18 Apr 2008 15:59:07 +0000
Received: (qmail 37626 invoked by uid 60001); 18 Apr 2008 15:59:27 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=aCGeqt0a7uTEvWvHI88jruqUGvkZCCfDKxGlT6EOA06wFCU3k8Q8FsF0DN8llfZdOyRwbKkrs3BDYRVLgbmtB+knw3SjuEk4MIR8u9/cY4Rp9XTnYP5a71YhMTTr/G8XAz4gC/bkbUgzhwktCeiMo3WwQ8XwHLPUEm7JUn0qouk=;
X-YMail-OSG: d55mu0IVM1k6_FDMW4Ij_bIxy2ruvS7eKjH8B9.AHlKegAsdJstWEdxFlUh4Yh5VQuvf2yLGK50UC3E7XrbycsZQ89LFS_O0TE.JpOcf0v_GIJQwQQJg1rWTHQ--
Received: from [72.231.9.236] by web50305.mail.re2.yahoo.com via HTTP; Fri, 18 Apr 2008 08:59:26 PDT
X-Mailer: YahooMailRC/902.40 YahooMailWebService/0.7.185
Date: Fri, 18 Apr 2008 08:59:26 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Lucene Proximity Searches
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <127427.37034.qm@web50305.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Couldn't you construct a phrase query with ngrams a la "fo oo ob ba ar", au=
gmented with individual ngrams that are required, a la:=0A"fo oo ob ba ar" =
fo oo ob ba ar=0A=0AIf there are ORs between terms, missing ngrams won't pr=
event a match. =0A=0AOtis=0A=0A--=0ASematext -- http://sematext.com/ -- Luc=
ene - Solr - Nutch=0A=0A----- Original Message ----=0AFrom: Ana Rabade <ana=
freireveiga@gmail.com>=0ATo: java-user@lucene.apache.org=0ASent: Friday, Ap=
ril 18, 2008 6:41:38 AM=0ASubject: Re: Lucene Proximity Searches=0A=0AI am =
using ngrams and I need to force that a group of them are together, but=0Ai=
f any of them fails, I need that the document is also scored. Perhaps you=
=0Acould help me to find the solution or give me a reference of which chang=
es I=0Amust do. I am using SpanNearQuery, because the ngrams must be in ord=
er.=0AThanks for your answer.=0A   - Ana Maria Freire Veiga -=0A=0AOn Fri, =
Apr 4, 2008 at 12:38 PM, Ana Rabade <anafreireveiga@gmail.com>=0Awrote:=0A=
=0A> I am using ngrams and I need to force that a group of them are togethe=
r,=0A> but if any of them fails, I need that the document is also scored. P=
erhaps=0A> you could help me to find the solution or give me a reference of=
 which=0A> changes I must do. I am using SpanNearQuery, because the ngrams =
must be in=0A> order.=0A> Thanks for your answer.=0A>    - Ana Maria Freire=
 Veiga -=0A>=0A> On Thu, Apr 3, 2008 at 7:56 PM, Erick Erickson <erickerick=
son@gmail.com>=0A> wrote:=0A>=0A> > Could you explain your use case? Becaus=
e to say that you want to=0A> > score documents that don't have all the ter=
ms with a *phrase query*=0A> > is contradictory. The point of a phrase quer=
y is exactly that all=0A> > the terms are there and within some some proxim=
ity.....=0A> >=0A> >=0A> > Best=0A> > Erick=0A> >=0A> > On Thu, Apr 3, 2008=
 at 12:17 PM, Ana R=E1bade <anafreireveiga@gmail.com>=0A> > wrote:=0A> >=0A=
> > > Hi!=0A> > >=0A> > > I'm using Lucene Proximity Searches, but I've see=
n Lucene only scores=0A> > > documents which contain all the terms in the p=
hrase. I also need to=0A> > score=0A> > > documents although they don't con=
tain all those terms.  Is it possible=0A> > > with=0A> > > Lucene PhraseQue=
ries or SpanNearQuery? If not, could you tell me a way=0A> > to=0A> > > fin=
d my solution?=0A> > >=0A> > > Thank you very much.=0A> > >=0A> > >    - An=
a M. Freire -=0A> > >=0A> >=0A>=0A>=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33692-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 18 16:16:29 2008
Return-Path: <java-user-return-33692-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57474 invoked from network); 18 Apr 2008 16:16:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Apr 2008 16:16:29 -0000
Received: (qmail 51686 invoked by uid 500); 18 Apr 2008 16:16:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51663 invoked by uid 500); 18 Apr 2008 16:16:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51652 invoked by uid 99); 18 Apr 2008 16:16:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Apr 2008 09:16:22 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.55] (HELO web50301.mail.re2.yahoo.com) (206.190.38.55)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 18 Apr 2008 16:15:37 +0000
Received: (qmail 37899 invoked by uid 60001); 18 Apr 2008 16:15:48 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=bH8iRAmRZs3tokeJzJywbBw093hhdt2jrEofdnsobDj3CbXuQg/Ng9V7dVFSvI5Jv9SwWXGtfNqbhk3QGwE5b/XMx9W6mIMfQ90NAGk2KP0ASRsobm/2SHHJ7VFv1/2x7COvLIEAGxYtOpncaShMdPx5rXGkhYvtTRkvi3IDfa0=;
X-YMail-OSG: 75yFb9QVM1m81atQdmZpzx_U2nbUdlUwpk2lFqvnU1V6PJgmZDtYzcR.UQ0Wz51Wnj6jcqSzKX3J9khZ_3fb945wKAi41gTtAvDkhwLoCfa2rAr7TtHyEwTLu6JjwURkhD7Z
Received: from [72.231.9.236] by web50301.mail.re2.yahoo.com via HTTP; Fri, 18 Apr 2008 09:15:48 PDT
X-Mailer: YahooMailRC/902.40 YahooMailWebService/0.7.185
Date: Fri, 18 Apr 2008 09:15:48 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Pooled searcher (was: Solid State Drives vs. RAMDirectory)
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <175232.36914.qm@web50301.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Not sure if this email got answered.  That's most likely due to the synchronized isDeleted call:

./org/apache/lucene/index/SegmentReader.java:  public synchronized boolean isDeleted(int n) {

Otis 

--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch

----- Original Message ----
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
Sent: Wednesday, April 16, 2008 1:28:44 PM
Subject: Pooled searcher (was: Solid State Drives vs. RAMDirectory)

Toke Eskildsen skrev:
> In the log names, t2 signifies 2 threads with a shared 
> searcher, t2u signifies 2 threads with separate searchers.
> 
> metis_RAM_24GB_i14_v23_t1_l23.log       530.0 q/sec
> metis_RAM_24GB_i14_v23_t2_l23.log       888.2 q/sec

Did someone end up investigating this thing with pooled searchers and 
why it is a performance boost?


         karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33693-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 18 16:21:09 2008
Return-Path: <java-user-return-33693-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60858 invoked from network); 18 Apr 2008 16:21:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Apr 2008 16:21:09 -0000
Received: (qmail 59841 invoked by uid 500); 18 Apr 2008 16:21:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59816 invoked by uid 500); 18 Apr 2008 16:21:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59805 invoked by uid 99); 18 Apr 2008 16:21:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Apr 2008 09:21:02 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of max@artsalliancelabs.com designates 66.92.91.130 as permitted sender)
Received: from [66.92.91.130] (HELO artsalliancelabs.com) (66.92.91.130)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Apr 2008 16:20:19 +0000
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Word split problems
X-MimeOLE: Produced By Microsoft Exchange V6.5
Date: Fri, 18 Apr 2008 12:20:31 -0400
Message-ID: <E9DD5BE59E84CA4E87AE0E5E6F1B8B12381EA0@sbsrv.AALabs.local>
In-Reply-To: <4807A236.7050705@gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Word split problems
Thread-Index: Acigv8TTu19kbGz9Q4CjQB93HcvbeAAsEmXw
References: <E9DD5BE59E84CA4E87AE0E5E6F1B8B12381E90@sbsrv.AALabs.local> <4807A236.7050705@gmail.com>
From: "Max Metral" <max@artsalliancelabs.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

It's probably about 100,000 entries per "thing that it would care about
at once".

-----Original Message-----
From: Karl Wettin [mailto:karl.wettin@gmail.com]=20
Sent: Thursday, April 17, 2008 3:17 PM
To: java-user@lucene.apache.org
Subject: Re: Word split problems

Max Metral skrev:
 >
> Lululemon Athletica
>=20
> I'd like any of these search terms to work for this:
>=20
> Lulu lemon
> Lu Lu Lemon
> Lululemon
>=20
> What strategy would be optimal for this kind of thing (of course
keeping

How large is your corpus? I suggest you look at NGramTokenizer.


    karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33694-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 18 16:25:51 2008
Return-Path: <java-user-return-33694-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64859 invoked from network); 18 Apr 2008 16:25:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Apr 2008 16:25:51 -0000
Received: (qmail 68294 invoked by uid 500); 18 Apr 2008 16:25:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68265 invoked by uid 500); 18 Apr 2008 16:25:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68254 invoked by uid 99); 18 Apr 2008 16:25:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Apr 2008 09:25:44 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chose77@gmail.com designates 64.233.178.240 as permitted sender)
Received: from [64.233.178.240] (HELO hs-out-0708.google.com) (64.233.178.240)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Apr 2008 16:25:01 +0000
Received: by hs-out-0708.google.com with SMTP id 4so409479hsl.5
        for <java-user@lucene.apache.org>; Fri, 18 Apr 2008 09:25:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=CXY9RDB5NDsT1xa4YkiyaJh94cBGdlN/uvLoAt2hYdA=;
        b=hHqteOOAlYCJjZtNftUlhpixarePL2TwvxhgzrJEGa33f2BuV2g8SLasrXXsOFYmDXDK5xuDdo2t5e6HbnX4m8QmapDG4AaOcqYcOWQmc7G4PhAqKSN206yOPvsYIpFbzLYd2eWNuhPL1Pf6P1deeTTnSGDDNBXbMf619i5C47k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=UX6F+4g/3WiYDeRPwxCba435nEQM8DWpJ8n0H6YuUq+kqWDkeag6Q1QgSe1dLwHwqooMBdUopbn/iP9h9WXbE3TeBHbagEmnC0FiWBUdllfSM59jCypb3ACP8KMAJAPlwrDdiyT8N7hFaeYuwTMxjH19VEQiDGwhZOZMXKCNBD4=
Received: by 10.100.133.1 with SMTP id g1mr5484295and.88.1208535913411;
        Fri, 18 Apr 2008 09:25:13 -0700 (PDT)
Received: by 10.100.198.11 with HTTP; Fri, 18 Apr 2008 09:25:13 -0700 (PDT)
Message-ID: <b8eccf4d0804180925m27c28704i167432381bff8729@mail.gmail.com>
Date: Fri, 18 Apr 2008 18:25:13 +0200
From: "Joe K" <chose77@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: WildCardQuery and TooManyClauses
In-Reply-To: <CC2671C08F06704ABFD37ED1EA09AA564A2A6F@birexchange.BIRPLAZA.local>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5842_14971616.1208535913393"
References: <CC2671C08F06704ABFD37ED1EA09AA564A2A6F@birexchange.BIRPLAZA.local>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5842_14971616.1208535913393
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thank you very much Brian,
this works for me!

Chose


On Mon, Apr 14, 2008 at 8:58 PM, Beard, Brian <Brian.Beard@mybir.com> wrote:

> You can use your approach w/ or w/o the filter.
> >                td = indexSearcher.search(query, filter, maxnumhits);
>
> You need to use a filter for the wildcards which is built in to the
> query.
>
> 1) Extend QueryParser to override the getWildcardQuery method.
> (Or even if you don't use QueryParser, just use the query api and
> combine the ConstantScoreQuery in #2 with your own query).
> 2) Inside of getWildcardQuery you need to return a
>   ConstantScoreQuery(new WildcardFilter(new Term(field, termStr)))
> 3) The first execution will take longer to initialize, but subsequent
> searches are fairly fast.
> 4) Someone posted a WildcardFilter a while back which is below.
> 5) Now you can plug in to topDocs.
>
> public class WildcardFilter extends Filter {
>
> ...
>
>    public BitSet bits(IndexReader reader) throws IOException {
>        BitSet bits = new BitSet(reader.maxDoc());
>        WildcardTermEnum enumerator = new WildcardTermEnum(reader,
> term);
>        TermDocs termDocs = reader.termDocs();
>
>        try {
>            do {
>                Term term = enumerator.term();
>
>                if (term != null) {
>                    termDocs.seek(term);
>
>                    while (termDocs.next()) {
>                        bits.set(termDocs.doc());
>                    }
>                } else {
>                    break;
>                }
>            } while (enumerator.next());
>        } finally {
>            termDocs.close();
>            enumerator.close();
>        }
>
>        return bits;
>     }
> -----Original Message-----
> From: Joe K [mailto:chose77@gmail.com]
> Sent: Thursday, April 10, 2008 11:46 AM
> To: java-user@lucene.apache.org
> Subject: Re: WildCardQuery and TooManyClauses
>
> Donna,
> so this doesn't work because search calls internaly
> MultiTermQuery.rewrite
> which causes TooManyClauses exception anyway even if the maxnumhits
> is set to 200 !!
>
> So I am lost again...
>
> Chose
>
>
> On Thu, Apr 10, 2008 at 3:02 PM, Donna L Gresh <gresh@us.ibm.com> wrote:
>
> > Doesn't the following do what you want with maxnumhits =200?
> >                TopDocs td;
> >                td = indexSearcher.search(query, filter, maxnumhits);
> > where filter can be null
> >
> >
> >
> > Donna L. Gresh
> > Services Research, Mathematical Sciences Department
> > IBM T.J. Watson Research Center
> > (914) 945-2472
> > http://www.research.ibm.com/people/g/donnagresh
> > gresh@us.ibm.com
> >
> >
> > "Joe K" <chose77@gmail.com> wrote on 04/10/2008 08:53:06 AM:
> >
> > > Hello everybody,
> > > I know there was written a tons of words about this issue, but I'm
> just
> > not
> > > clear enough about it.
> > >
> > > I have these facts:
> > >
> > > 1. my query is always 1 letter and *, eg. M*
> > > 2. i always want to get max 200 results, no more!
> > > 3. i don't want to fix this issue by setting maxClauseCount
> > >
> > > I just don't see the easy way how to get my results, did i missed
> > something?
> > >
> > > From what I've read here I know that probably i should play with
> filters
> > or
> > > with WildCardEnum, but why?
> > > I just want to get simple this:
> > > SELECT FROM XXX WHERE XXX.name LIKE 'M%' LIMIT 200;
> > >
> > > (there is no filtering in this query except the wildcard itself)
> > >
> > > Please, what is the easiest solution to achieve this?
> > >
> > > Thanks in advance,
> > > Chose
> >
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_5842_14971616.1208535913393--

From java-user-return-33695-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 18 16:33:10 2008
Return-Path: <java-user-return-33695-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70648 invoked from network); 18 Apr 2008 16:33:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Apr 2008 16:33:10 -0000
Received: (qmail 80241 invoked by uid 500); 18 Apr 2008 16:33:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80214 invoked by uid 500); 18 Apr 2008 16:33:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80203 invoked by uid 99); 18 Apr 2008 16:33:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Apr 2008 09:33:04 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.14.246.243] (HELO ag-out-0708.google.com) (72.14.246.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Apr 2008 16:32:20 +0000
Received: by ag-out-0708.google.com with SMTP id 35so753848aga.11
        for <java-user@lucene.apache.org>; Fri, 18 Apr 2008 09:32:29 -0700 (PDT)
Received: by 10.100.241.17 with SMTP id o17mr5522309anh.30.1208536344629;
        Fri, 18 Apr 2008 09:32:24 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 32sm132293aga.20.2008.04.18.09.32.20
        (version=TLSv1/SSLv3 cipher=OTHER);
        Fri, 18 Apr 2008 09:32:24 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <975024.81350.qm@web65416.mail.ac4.yahoo.com>
References: <975024.81350.qm@web65416.mail.ac4.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <E1F03B99-EBAC-457A-9DF4-8D84603454FF@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: differences in deleting docs using IndexWriter and IndexModifier?
Date: Fri, 18 Apr 2008 12:32:49 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


I'll add that warning to the javadocs.

And, to make matters worse, IndexModifier.docCount() will internally  
call IndexWriter.docCount() if it has a writer open, else,  
IndexReader.numDocs().  So IndexModifier itself can be inconsistent.

Mike

Ulf Dittmer wrote:
> Thanks for the explanation.
>
> You're right, IndexReader reports the correct number
> of documents.
>
> That might be a worthwhile addition to the
> IndexModifier javadocs -
> that the IndexWriter method of the same name is not a
> drop-in replacement.
>
> Of course, that's moot if docCount gets deprecated
> anyway.
>
> Ulf
>
> --- Michael McCandless <lucene@mikemccandless.com>
> wrote:
>
>> I believe your docs are being deleted.  It's just
> that
>> IndexWriter.docCount() does not count deleted docs.
>> That method matches IndexReader.maxDoc(), not
> IndexReader.numDocs().
>>
>> If you open an IndexReader and call numDocs() does
>> it reflect the deletion?
>>
>> Really I think we should add "maxDoc()" and
> "numDocs()" to IndexWriter,
>> and deprecate docCount() in favor of maxDoc().  I'll
> open an issue.
>
>
>
>        
> ______________________________________________________________________ 
> ______________
> Be a better friend, newshound, and
> know-it-all with Yahoo! Mobile.  Try it now.  http:// 
> mobile.yahoo.com/;_ylt=Ahu06i62sR8HDtDypao8Wcj9tAcJ
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33696-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 18 16:49:13 2008
Return-Path: <java-user-return-33696-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84911 invoked from network); 18 Apr 2008 16:49:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Apr 2008 16:49:13 -0000
Received: (qmail 8034 invoked by uid 500); 18 Apr 2008 16:49:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7995 invoked by uid 500); 18 Apr 2008 16:49:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7966 invoked by uid 99); 18 Apr 2008 16:49:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Apr 2008 09:49:06 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Apr 2008 16:48:21 +0000
Received: by nf-out-0910.google.com with SMTP id d3so290252nfc.15
        for <java-user@lucene.apache.org>; Fri, 18 Apr 2008 09:48:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=0uR1js2DiGVqJQ2D5lWJzkWxS7LcTl1ytSJiN3wEqkE=;
        b=wg3pZir0yaQgVjIDSvz+fXsaTm61aa6zgvHREjhnItVRNtGExJUIoBtpunApdFPMPM1FXKgSuS7um2ndm7OapzrCMqGjJgMhO1wJQ5qhm+xa11NPl7jehEFstYmT51smeV12sZMv8GXqJWhpL6wVA1SIXkC09oePgdRDIR0v4lc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=K0opPMcPfoK7ldzzurDY0av+BY2hpfEFT21+LBZl1A+PrVTHrRSUhlUmQbXeZ4rhiEDMYkzUWE60Pe75jfqNquIfRnUdA4ynzuxfeSxSpg/VQbOwitJHVqqgNHZMrenihqeru+ZCvxvoPWU2auju3Rz2Uo+s1l05RS9DpmiWK9A=
Received: by 10.78.182.9 with SMTP id e9mr3694591huf.91.1208537311676;
        Fri, 18 Apr 2008 09:48:31 -0700 (PDT)
Received: by 10.78.155.15 with HTTP; Fri, 18 Apr 2008 09:48:31 -0700 (PDT)
Message-ID: <6e3ae6310804180948u5f188e46iccd3e325f10034b6@mail.gmail.com>
Date: Fri, 18 Apr 2008 09:48:31 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: how to cache multivalued field using fieldcache.
In-Reply-To: <fa7518640804172314s3cea31b3k7277b7b4fd0a806b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3698_18191976.1208537311655"
References: <fa7518640804172314s3cea31b3k7277b7b4fd0a806b@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3698_18191976.1208537311655
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

No. FieldCache is only for single-valued field.
You would need to use your own data structure to cache multi-valued field.

Or leave the index on disk and use Solid State Disk to read for faster
access.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request) got
2.6 Million Euro funding!

On Thu, Apr 17, 2008 at 11:14 PM, Shailendra Mudgal <
mudgal.shailendra@gmail.com> wrote:

> Hi All,
>
> I have a multivalued field in the index. Can i use FieldCache for caching
> that field.
>
> Thanks,
>
> Vipin
>

------=_Part_3698_18191976.1208537311655--

From java-user-return-33697-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 18 23:14:00 2008
Return-Path: <java-user-return-33697-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82392 invoked from network); 18 Apr 2008 23:14:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Apr 2008 23:14:00 -0000
Received: (qmail 90885 invoked by uid 500); 18 Apr 2008 23:13:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90862 invoked by uid 500); 18 Apr 2008 23:13:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90851 invoked by uid 99); 18 Apr 2008 23:13:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Apr 2008 16:13:53 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of peirans@cs.uoregon.edu designates 128.223.4.19 as permitted sender)
Received: from [128.223.4.19] (HELO vitalstatistix.cs.uoregon.edu) (128.223.4.19)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Apr 2008 23:13:01 +0000
Received: from [128.223.56.81] (d56-81.uoregon.edu [128.223.56.81])
	(authenticated bits=0)
	by vitalstatistix.cs.uoregon.edu (8.14.2/8.14.2) with ESMTP id m3INDLtk028632
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Fri, 18 Apr 2008 16:13:21 -0700 (PDT)
Message-ID: <48092A93.5070007@cs.uoregon.edu>
Date: Fri, 18 Apr 2008 16:11:15 -0700
From: Peiran Song <peirans@cs.uoregon.edu>
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: lucene 2.3.1 QueryTermExtractor error
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: ClamAV 0.92.1/6834/Fri Apr 18 14:09:50 2008 on vitalstatistix
X-Virus-Status: Clean
X-Greylist: Sender succeeded SMTP AUTH, not delayed by milter-greylist-4.0 (vitalstatistix.cs.uoregon.edu [128.223.4.19]); Fri, 18 Apr 2008 16:13:21 -0700 (PDT)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi All,

I recently upgraded Lucene to 1.9.1 and then to 2.3.1. The application 
program compiled successfully but throws run time error:

java.lang.NoSuchFieldError: prohibited
	org.apache.lucene.search.highlight.QueryTermExtractor.getTermsFromBooleanQuery(QueryTermExtractor.java:91)
	org.apache.lucene.search.highlight.QueryTermExtractor.getTerms(QueryTermExtractor.java:66)
	org.apache.lucene.search.highlight.QueryTermExtractor.getTerms(QueryTermExtractor.java:59)
	org.apache.lucene.search.highlight.QueryTermExtractor.getTerms(QueryTermExtractor.java:45)
	org.apache.lucene.search.highlight.QueryScorer.<init>(QueryScorer.java:48)

I was not able to google a solution and I hope to get some help here. 
Thanks a lot!

Peiran


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33698-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 18 23:30:46 2008
Return-Path: <java-user-return-33698-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93598 invoked from network); 18 Apr 2008 23:30:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Apr 2008 23:30:46 -0000
Received: (qmail 9849 invoked by uid 500); 18 Apr 2008 23:30:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9810 invoked by uid 500); 18 Apr 2008 23:30:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9798 invoked by uid 99); 18 Apr 2008 23:30:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Apr 2008 16:30:39 -0700
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of stuhood@mailtrust.com designates 207.97.245.161 as permitted sender)
Received: from [207.97.245.161] (HELO smtp161.iad.emailsrvr.com) (207.97.245.161)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Apr 2008 23:29:56 +0000
Received: from relay6.relay.iad.emailsrvr.com (localhost [127.0.0.1])
	by relay6.relay.iad.emailsrvr.com (SMTP Server) with ESMTP id A957B73863A
	for <java-user@lucene.apache.org>; Fri, 18 Apr 2008 19:30:09 -0400 (EDT)
Received: from webmail10.webmail.iad.mlsrvr.com (webmail10.webmail.iad.mlsrvr.com [192.168.1.107])
	by relay6.relay.iad.emailsrvr.com (SMTP Server) with ESMTP id A45C373861C
	for <java-user@lucene.apache.org>; Fri, 18 Apr 2008 19:30:09 -0400 (EDT)
Received: from mailtrust.com (localhost [127.0.0.1])
	by webmail10.webmail.iad.mlsrvr.com (Postfix) with ESMTP id 90AE696C051
	for <java-user@lucene.apache.org>; Fri, 18 Apr 2008 19:30:09 -0400 (EDT)
Received: by beta.mailtrust.com
    (Authenticated sender: stuhood@mailtrust.com, from: stuhood@mailtrust.com) 
    with HTTP; Fri, 18 Apr 2008 19:30:09 -0400 (EDT)
Date: Fri, 18 Apr 2008 19:30:09 -0400 (EDT)
Subject: =?UTF-8?Q?Occasional=20Hang=20in=20IndexWriter.close()?=
From: "Stu Hood" <stuhood@mailtrust.com>
To: java-user@lucene.apache.org
Reply-To: stuhood@mailtrust.com
MIME-Version: 1.0
Content-Type: text/plain;charset=UTF-8
Content-Transfer-Encoding: quoted-printable
Importance: Normal
X-Priority: 3 (Normal)
X-Type: plain
Message-ID: <43128.192.168.1.71.1208561409.webmail@192.168.1.71>
X-Mailer: webmail6.6.1
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,=0A=0AI'm having an issue with the IndexWriter in Lucene 2.3.1. Speci=
fically, the IndexWriter.close() method is non-deterministically hanging wi=
th the following stack:=0A=0A"""=0AThread 23044: (state =3D BLOCKED)=0A - j=
ava.lang.Object.wait(long) @bci=3D0 (Compiled frame; information may be imp=
recise)=0A - java.lang.Object.wait() @bci=3D2, line=3D485 (Interpreted fram=
e)=0A - org.apache.lucene.index.IndexWriter.finishMerges(boolean) @bci=3D30=
6, line=3D2063 (Interpreted frame)=0A - org.apache.lucene.index.IndexWriter=
.closeInternal(boolean) @bci=3D35, line=3D1208 (Interpreted frame)=0A - org=
.apache.lucene.index.IndexWriter.close(boolean) @bci=3D41, line=3D1178 (Int=
erpreted frame)=0A - org.apache.lucene.index.IndexWriter.close() @bci=3D2, =
line=3D1153 (Interpreted frame)=0A - us.webmail.solr.merge.MergeTask.execut=
e() @bci=3D234, line=3D237 (Interpreted frame)=0A - us.webmail.solr.merge.M=
ergeAgent.run(java.lang.String[]) @bci=3D455, line=3D521 (Interpreted frame=
)=0A - org.apache.hadoop.util.ToolRunner.run(org.apache.hadoop.conf.Configu=
ration, org.apache.hadoop.util.Tool, java.lang.String[]) @bci=3D38, line=3D=
65 (Interpreted frame)=0A - org.apache.hadoop.util.ToolBase.doMain(org.apac=
he.hadoop.conf.Configuration, java.lang.String[]) @bci=3D3, line=3D54 (Inte=
rpreted frame)=0A - us.webmail.solr.merge.MergeAgent.main(java.lang.String[=
]) @bci=3D17, line=3D572 (Interpreted frame)=0A - sun.reflect.NativeMethodA=
ccessorImpl.invoke0(java.lang.reflect.Method, java.lang.Object, java.lang.O=
bject[]) @bci=3D0 (Interpreted frame)=0A - sun.reflect.NativeMethodAccessor=
Impl.invoke(java.lang.Object, java.lang.Object[]) @bci=3D87, line=3D39 (Int=
erpreted frame)=0A - sun.reflect.DelegatingMethodAccessorImpl.invoke(java.l=
ang.Object, java.lang.Object[]) @bci=3D6, line=3D25 (Interpreted frame)=0A =
- java.lang.reflect.Method.invoke(java.lang.Object, java.lang.Object[]) @bc=
i=3D161, line=3D597 (Interpreted frame)=0A - org.apache.hadoop.util.RunJar.=
main(java.lang.String[]) @bci=3D538, line=3D155 (Interpreted frame)=0A"""=
=0A=0A=0AMy IndexWriter opening code looks like this:=0A"""=0A// open the d=
estination index=0Athis.targetDirectory =3D null;=0Atry{=0A    this.targetD=
irectory =3D FSDirectory.getDirectory(getDD(this.targetInstance),=0A       =
 new NativeFSLockFactory(getDD(this.targetInstance)));=0A    this.targetInd=
ex =3D new IndexWriter(this.targetDirectory, null, false);=0A    this.targe=
tIndex.setMergeFactor(MERGE_FACTOR);=0A    this.targetIndex.setUseCompoundF=
ile(false);=0A    // this.targetIndex.setInfoStream(System.out);=0A    =0A =
   this.targetIndex.setMergeScheduler(new SerialMergeScheduler());=0A    =
=0A=0A} catch (Exception e){=0A    if(this.targetDirectory !=3D null){=0A  =
      this.targetDirectory.close();=0A    }=0A    throw new IOException("Co=
uld not open target instance: " + e.toString());=0A}=0A"""=0A=0AAfter addin=
g a bunch of indexes with IndexWriter.addIndexes(Directory[]), I run=0A"""=
=0ASystem.out.println("Closing the target index...");=0Athis.targetIndex.cl=
ose();=0ASystem.out.println("...done.\nClosing the target directory...");=
=0Athis.targetDirectory.close();=0ASystem.out.println("...done.");=0A"""=0A=
... and the output clearly shows that we get stuck in close.=0A=0A---------=
----------------------------------------------------=0A=0AIs this a known b=
ug? Does anyone know of a workaround?=0A=0AStu Hood=0AArchitecture Software=
 Developer=0AMailtrust, a Division of Rackspace


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33699-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 19 08:41:08 2008
Return-Path: <java-user-return-33699-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88907 invoked from network); 19 Apr 2008 08:41:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Apr 2008 08:41:06 -0000
Received: (qmail 57534 invoked by uid 500); 19 Apr 2008 08:41:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57506 invoked by uid 500); 19 Apr 2008 08:41:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57495 invoked by uid 99); 19 Apr 2008 08:41:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Apr 2008 01:41:00 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.247] (HELO an-out-0708.google.com) (209.85.132.247)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Apr 2008 08:40:16 +0000
Received: by an-out-0708.google.com with SMTP id c5so253974anc.49
        for <java-user@lucene.apache.org>; Sat, 19 Apr 2008 01:40:28 -0700 (PDT)
Received: by 10.100.4.1 with SMTP id 1mr7115058and.77.1208594428077;
        Sat, 19 Apr 2008 01:40:28 -0700 (PDT)
Received: by 10.100.154.5 with HTTP; Sat, 19 Apr 2008 01:40:28 -0700 (PDT)
Message-ID: <9ac0c6aa0804190140u357d9f53m429b63da3036cad1@mail.gmail.com>
Date: Sat, 19 Apr 2008 04:40:28 -0400
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org, stuhood@mailtrust.com
Subject: Re: Occasional Hang in IndexWriter.close()
In-Reply-To: <43128.192.168.1.71.1208561409.webmail@192.168.1.71>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <43128.192.168.1.71.1208561409.webmail@192.168.1.71>
X-Virus-Checked: Checked by ClamAV on apache.org

Hmm, that is odd.

This is actually expected, if you are using ConcurrentMergeScheduler,
because close() by default waits for all running merges to complete.
But you seem to be using SerialMergeScheduler.

Were there any exceptions hit before you call close()?

Mike

Stu Hood <stuhood@mailtrust.com> wrote:
> Hello,
>
>  I'm having an issue with the IndexWriter in Lucene 2.3.1. Specifically, the IndexWriter.close() method is non-deterministically hanging with the following stack:
>
>  """
>  Thread 23044: (state = BLOCKED)
>   - java.lang.Object.wait(long) @bci=0 (Compiled frame; information may be imprecise)
>   - java.lang.Object.wait() @bci=2, line=485 (Interpreted frame)
>   - org.apache.lucene.index.IndexWriter.finishMerges(boolean) @bci=306, line=2063 (Interpreted frame)
>   - org.apache.lucene.index.IndexWriter.closeInternal(boolean) @bci=35, line=1208 (Interpreted frame)
>   - org.apache.lucene.index.IndexWriter.close(boolean) @bci=41, line=1178 (Interpreted frame)
>   - org.apache.lucene.index.IndexWriter.close() @bci=2, line=1153 (Interpreted frame)
>   - us.webmail.solr.merge.MergeTask.execute() @bci=234, line=237 (Interpreted frame)
>   - us.webmail.solr.merge.MergeAgent.run(java.lang.String[]) @bci=455, line=521 (Interpreted frame)
>   - org.apache.hadoop.util.ToolRunner.run(org.apache.hadoop.conf.Configuration, org.apache.hadoop.util.Tool, java.lang.String[]) @bci=38, line=65 (Interpreted frame)
>   - org.apache.hadoop.util.ToolBase.doMain(org.apache.hadoop.conf.Configuration, java.lang.String[]) @bci=3, line=54 (Interpreted frame)
>   - us.webmail.solr.merge.MergeAgent.main(java.lang.String[]) @bci=17, line=572 (Interpreted frame)
>   - sun.reflect.NativeMethodAccessorImpl.invoke0(java.lang.reflect.Method, java.lang.Object, java.lang.Object[]) @bci=0 (Interpreted frame)
>   - sun.reflect.NativeMethodAccessorImpl.invoke(java.lang.Object, java.lang.Object[]) @bci=87, line=39 (Interpreted frame)
>   - sun.reflect.DelegatingMethodAccessorImpl.invoke(java.lang.Object, java.lang.Object[]) @bci=6, line=25 (Interpreted frame)
>   - java.lang.reflect.Method.invoke(java.lang.Object, java.lang.Object[]) @bci=161, line=597 (Interpreted frame)
>   - org.apache.hadoop.util.RunJar.main(java.lang.String[]) @bci=538, line=155 (Interpreted frame)
>  """
>
>
>  My IndexWriter opening code looks like this:
>  """
>  // open the destination index
>  this.targetDirectory = null;
>  try{
>     this.targetDirectory = FSDirectory.getDirectory(getDD(this.targetInstance),
>         new NativeFSLockFactory(getDD(this.targetInstance)));
>     this.targetIndex = new IndexWriter(this.targetDirectory, null, false);
>     this.targetIndex.setMergeFactor(MERGE_FACTOR);
>     this.targetIndex.setUseCompoundFile(false);
>     // this.targetIndex.setInfoStream(System.out);
>
>     this.targetIndex.setMergeScheduler(new SerialMergeScheduler());
>
>
>  } catch (Exception e){
>     if(this.targetDirectory != null){
>         this.targetDirectory.close();
>     }
>     throw new IOException("Could not open target instance: " + e.toString());
>  }
>  """
>
>  After adding a bunch of indexes with IndexWriter.addIndexes(Directory[]), I run
>  """
>  System.out.println("Closing the target index...");
>  this.targetIndex.close();
>  System.out.println("...done.\nClosing the target directory...");
>  this.targetDirectory.close();
>  System.out.println("...done.");
>  """
>  ... and the output clearly shows that we get stuck in close.
>
>  -------------------------------------------------------------
>
>  Is this a known bug? Does anyone know of a workaround?
>
>  Stu Hood
>  Architecture Software Developer
>  Mailtrust, a Division of Rackspace
>
>
>  ---------------------------------------------------------------------
>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33700-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 19 08:43:22 2008
Return-Path: <java-user-return-33700-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89269 invoked from network); 19 Apr 2008 08:43:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Apr 2008 08:43:22 -0000
Received: (qmail 60557 invoked by uid 500); 19 Apr 2008 08:43:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60530 invoked by uid 500); 19 Apr 2008 08:43:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60519 invoked by uid 99); 19 Apr 2008 08:43:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Apr 2008 01:43:15 -0700
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=SPF_PASS,URIBL_OB_SURBL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of edwin11_79@hotmail.com designates 65.55.175.165 as permitted sender)
Received: from [65.55.175.165] (HELO blu139-omc1-s25.blu139.hotmail.com) (65.55.175.165)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Apr 2008 08:42:20 +0000
Received: from BLU141-W28 ([65.55.162.183]) by blu139-omc1-s25.blu139.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Sat, 19 Apr 2008 01:42:40 -0700
Message-ID: <BLU141-W28F8F371F9A8BAC9838715EFE70@phx.gbl>
X-Originating-IP: [220.255.7.248]
From: Edwin Lee <edwin11_79@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: How to Retrieve Found Term?
Date: Sat, 19 Apr 2008 16:42:40 +0800
Importance: Normal
Content-Type: text/plain; charset="gb2312"
Content-Transfer-Encoding: 8bit
MIME-Version: 1.0
X-OriginalArrivalTime: 19 Apr 2008 08:42:40.0584 (UTC) FILETIME=[53DADC80:01C8A1F9]
X-Virus-Checked: Checked by ClamAV on apache.org


Hi all,

i'm using Lucene 2.3.1. What i'm trying to do seems straightforward enough (to me), but i just can't find the method to do so.

Let's say i'm doing a PhraseQuery of the phrase "apples and oranges" with a non-zero slop value, and it returns, e.g., 20 Hits. Because i'm using non-zero slop value, the phrase that actually gets found could be something like "oranges and apples" instead. i would like to find out, for each of the Hit returned, what is the actual term from the document that was found. How can i do that?



Thanks in advance,
Edwin

_________________________________________________________________
Help Splitzo Sally Before Its Too Late! 
http://www.thegirlwhosplitinto5.com/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33701-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 19 09:06:12 2008
Return-Path: <java-user-return-33701-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96056 invoked from network); 19 Apr 2008 09:06:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Apr 2008 09:06:11 -0000
Received: (qmail 73615 invoked by uid 500); 19 Apr 2008 09:06:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73578 invoked by uid 500); 19 Apr 2008 09:06:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73567 invoked by uid 99); 19 Apr 2008 09:06:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Apr 2008 02:06:06 -0700
X-ASF-Spam-Status: No, hits=4.8 required=10.0
	tests=HTML_MESSAGE,MIME_BASE64_TEXT,SPF_PASS,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [218.106.248.108] (HELO mxdxt8.hichina.com) (218.106.248.108)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Apr 2008 09:05:14 +0000
Received: from 203.86.44.2 (HELO WangJianxin) (envelope-from jianxin.wang@nufrontsoft.com)
	by mxdxt8.hichina.com (quarkmail-1.2.1) with ESMTP id S1248461AbYDSJF3
	for java-user@lucene.apache.org; Sat, 19 Apr 2008 17:05:29 +0800
Message-ID: <007001c8a1fc$8b218740$b208a8c0@WangJianxin>
From: =?gb2312?B?zfW9qNDC?= <jianxin.wang@nufrontsoft.com>
To: <java-user@lucene.apache.org>
Subject: A question about ParalellMultiSearcher and RMI
Date: Sat, 19 Apr 2008 17:05:39 +0800
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_006D_01C8A23F.97A39A60"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_006D_01C8A23F.97A39A60
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: base64

SSB3YW50IHRvIHVzZSBSQU1EaXJlY3RvcnkgdG8gcmFpc2UgdGhlIHBlZm9ybWFuY2Ugb2YgbHVj
ZW5lLg0KU28gSSBjdXQgdGhlIGluZGV4IGRpciB0byAzIHNtYWxsZXIgaW5kZXggZGlycygxRyBv
bmUgaW5kZXggZGlyKS4NClRoZW4gSSB1c2UgUkFNRGlyZWN0b3J5IHRvIGxvYWQgdGhlIDMgZGly
cywgYW5kIHJlYmluZCB0aGUgMyBzZWFyY2hlciBieSBSTUkuKE15IHNlcnZlciBoYXMgOEcgbWVt
KQ0KQXQgbGFzdCwgSSBsb29rdXAgdGhlIDMgcmVtb3RlIHNlYXJjaGVyIHRvIG5ldyBhIFBhcmFs
ZWxsTXVsdGlTZWFyY2hlci4gDQpJdCB3b3JrcyBjb3JyZWN0b3JseSwgYnV0IHNvbWV0aW1lcyBv
Y2N1ciBlcnJvcnMgbGlrZSA6DQoNCmphdmEucm1pLlNlcnZlckVycm9yOiBFcnJvciBvY2N1cnJl
ZCBpbiBzZXJ2ZXIgdGhyZWFkOyBuZXN0ZWQgZXhjZXB0aW9uIGlzOiANCiBqYXZhLmxhbmcuT3V0
T2ZNZW1vcnlFcnJvcjogSmF2YSBoZWFwIHNwYWNlDQogYXQgc3VuLnJtaS5zZXJ2ZXIuVW5pY2Fz
dFNlcnZlclJlZi5kaXNwYXRjaChVbmljYXN0U2VydmVyUmVmLmphdmE6MzMzKQ0KIGF0IHN1bi5y
bWkudHJhbnNwb3J0LlRyYW5zcG9ydCQxLnJ1bihUcmFuc3BvcnQuamF2YToxNTkpDQogYXQgamF2
YS5zZWN1cml0eS5BY2Nlc3NDb250cm9sbGVyLmRvUHJpdmlsZWdlZChOYXRpdmUgTWV0aG9kKQ0K
IGF0IHN1bi5ybWkudHJhbnNwb3J0LlRyYW5zcG9ydC5zZXJ2aWNlQ2FsbChUcmFuc3BvcnQuamF2
YToxNTUpDQogYXQgc3VuLnJtaS50cmFuc3BvcnQudGNwLlRDUFRyYW5zcG9ydC5oYW5kbGVNZXNz
YWdlcyhUQ1BUcmFuc3BvcnQuamF2YTo1MzUpDQogYXQgc3VuLnJtaS50cmFuc3BvcnQudGNwLlRD
UFRyYW5zcG9ydCRDb25uZWN0aW9uSGFuZGxlci5ydW4wKFRDUFRyYW5zcG9ydC5qYXZhOjc5MCkN
CiBhdCBzdW4ucm1pLnRyYW5zcG9ydC50Y3AuVENQVHJhbnNwb3J0JENvbm5lY3Rpb25IYW5kbGVy
LnJ1bihUQ1BUcmFuc3BvcnQuamF2YTo2NDkpDQogYXQgamF2YS51dGlsLmNvbmN1cnJlbnQuVGhy
ZWFkUG9vbEV4ZWN1dG9yJFdvcmtlci5ydW5UYXNrKFRocmVhZFBvb2xFeGVjdXRvci5qYXZhOjg4
NSkNCiBhdCBqYXZhLnV0aWwuY29uY3VycmVudC5UaHJlYWRQb29sRXhlY3V0b3IkV29ya2VyLnJ1
bihUaHJlYWRQb29sRXhlY3V0b3IuamF2YTo5MDcpDQogYXQgamF2YS5sYW5nLlRocmVhZC5ydW4o
VGhyZWFkLmphdmE6NjE5KQ0KIGF0IHN1bi5ybWkudHJhbnNwb3J0LlN0cmVhbVJlbW90ZUNhbGwu
ZXhjZXB0aW9uUmVjZWl2ZWRGcm9tU2VydmVyKFVua25vd24gU291cmNlKQ0KIGF0IHN1bi5ybWku
dHJhbnNwb3J0LlN0cmVhbVJlbW90ZUNhbGwuZXhlY3V0ZUNhbGwoVW5rbm93biBTb3VyY2UpDQog
YXQgc3VuLnJtaS5zZXJ2ZXIuVW5pY2FzdFJlZi5pbnZva2UoVW5rbm93biBTb3VyY2UpDQogYXQg
amF2YS5ybWkuc2VydmVyLlJlbW90ZU9iamVjdEludm9jYXRpb25IYW5kbGVyLmludm9rZVJlbW90
ZU1ldGhvZChVbmtub3duIFNvdXJjZSkNCiBhdCBqYXZhLnJtaS5zZXJ2ZXIuUmVtb3RlT2JqZWN0
SW52b2NhdGlvbkhhbmRsZXIuaW52b2tlKFVua25vd24gU291cmNlKQ0KIGF0ICRQcm94eTAuc2Vh
cmNoKFVua25vd24gU291cmNlKQ0KIGF0IG9yZy5hcGFjaGUubHVjZW5lLnNlYXJjaC5NdWx0aVNl
YXJjaGVyVGhyZWFkLnJ1bihQYXJhbGxlbE11bHRpU2VhcmNoZXIuamF2YToyNTEpDQpDYXVzZWQg
Ynk6IGphdmEubGFuZy5PdXRPZk1lbW9yeUVycm9yOiBKYXZhIGhlYXAgc3BhY2UNCiANClRoYW5r
cy4=

------=_NextPart_000_006D_01C8A23F.97A39A60--


From java-user-return-33702-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 19 12:50:59 2008
Return-Path: <java-user-return-33702-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27588 invoked from network); 19 Apr 2008 12:50:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Apr 2008 12:50:59 -0000
Received: (qmail 82757 invoked by uid 500); 19 Apr 2008 12:50:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82719 invoked by uid 500); 19 Apr 2008 12:50:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82708 invoked by uid 99); 19 Apr 2008 12:50:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Apr 2008 05:50:52 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 72.14.220.156 as permitted sender)
Received: from [72.14.220.156] (HELO fg-out-1718.google.com) (72.14.220.156)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Apr 2008 12:50:00 +0000
Received: by fg-out-1718.google.com with SMTP id d23so936488fga.27
        for <java-user@lucene.apache.org>; Sat, 19 Apr 2008 05:40:20 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=q0D1tyG4ZpalZPDPHzVqkNjqtFhy5EOjOgPuZrbpUt4=;
        b=MG77/xQXVj6i/Q4oXJ0yTIumj23OhEsbzKekFAHCEG+Rsk6is8PcbMI6TT+ruNZ+PXbvauYzcn8H1N6QM2u4myYOhfYdbS60je0tNjlCjLpAfKXgW/6yzqQYlFPhVzbnfK7EJ8xCI7dy/wANzUV/iGmFitlXjCnGdGw3l+ynDcg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=FvKRCA28FXLUhzjTaVK1xbskhKrXrO8ojTs3LSRoyWxubgZLSPQoVrM7ky2U2KjFQvsEwB2Wud4HMr+LjSNk9NH0zE3yDf4wWVFlNO+ll+M7PhyMtTvMGTnZzZdGFOSIVMcrOSrbyX1qOHy/VpGHhNGehbmVnh1mjDiDy2TATp0=
Received: by 10.82.123.8 with SMTP id v8mr6693542buc.83.1208608219876;
        Sat, 19 Apr 2008 05:30:19 -0700 (PDT)
Received: by 10.82.191.6 with HTTP; Sat, 19 Apr 2008 05:30:19 -0700 (PDT)
Message-ID: <359a92830804190530ldf2b2dajb99b486b5b095d4a@mail.gmail.com>
Date: Sat, 19 Apr 2008 08:30:19 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene 2.3.1 QueryTermExtractor error
In-Reply-To: <48092A93.5070007@cs.uoregon.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1506_9043587.1208608219858"
References: <48092A93.5070007@cs.uoregon.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1506_9043587.1208608219858
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Are you absolutely sure that you don't have some older jars hanging
around in your environment? Especially when using Eclipse, the jar you
compile with isn't necessarily the jar you run with, you have to find the
magic runtime settings....

And if you're not using eclipse, it could still be something similar...

Best
Erick

On Fri, Apr 18, 2008 at 7:11 PM, Peiran Song <peirans@cs.uoregon.edu> wrote:

> Hi All,
>
> I recently upgraded Lucene to 1.9.1 and then to 2.3.1. The application
> program compiled successfully but throws run time error:
>
> java.lang.NoSuchFieldError: prohibited
>
>  org.apache.lucene.search.highlight.QueryTermExtractor.getTermsFromBooleanQuery(QueryTermExtractor.java:91)
>
>  org.apache.lucene.search.highlight.QueryTermExtractor.getTerms(QueryTermExtractor.java:66)
>
>  org.apache.lucene.search.highlight.QueryTermExtractor.getTerms(QueryTermExtractor.java:59)
>
>  org.apache.lucene.search.highlight.QueryTermExtractor.getTerms(QueryTermExtractor.java:45)
>
>  org.apache.lucene.search.highlight.QueryScorer.<init>(QueryScorer.java:48)
>
> I was not able to google a solution and I hope to get some help here.
> Thanks a lot!
>
> Peiran
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_1506_9043587.1208608219858--

From java-user-return-33703-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 19 20:02:01 2008
Return-Path: <java-user-return-33703-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51849 invoked from network); 19 Apr 2008 20:02:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Apr 2008 20:02:01 -0000
Received: (qmail 36082 invoked by uid 500); 19 Apr 2008 20:01:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36042 invoked by uid 500); 19 Apr 2008 20:01:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36031 invoked by uid 99); 19 Apr 2008 20:01:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Apr 2008 13:01:54 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 72.14.220.157 as permitted sender)
Received: from [72.14.220.157] (HELO fg-out-1718.google.com) (72.14.220.157)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Apr 2008 20:01:10 +0000
Received: by fg-out-1718.google.com with SMTP id d23so1074570fga.27
        for <java-user@lucene.apache.org>; Sat, 19 Apr 2008 13:01:21 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=QRZ3D69n+oLPi/qHfxHVyFVD4k4xs2eJHwUHqnBy6zs=;
        b=lSK7atKYSmFNpdegYGI5EDTo9USr1lE77nCCVz2R38FU3nUAjVDTxfcgC1dY/cIBDLVkbYdnL53ceF0SVglrEZ6KqaJj2trFFmEAD71OjuK7sdLzfsoJAcWdNDsLN9dsA0CgsfjW5izp8WE1ViOnCBL3e9a/8LlEq8OMhPYnVIM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=I3fb5G4Z6yIAQzgZ7rZyN26VcNybBZEcBVIL0sZ3b/w6YJCf1b4t9P/refgpl0+T0WBrY4BLLSOwBgpuXWdOiUkhOhj34vRsitvyOQ20FyxvUtA94I3Hbrh1VgVSGthFvjF3//QC9PA9Q0mXY7k6dYxYO/SEMKnxrLDh2F3BYyw=
Received: by 10.82.175.17 with SMTP id x17mr7472331bue.23.1208635280809;
        Sat, 19 Apr 2008 13:01:20 -0700 (PDT)
Received: from kodapan.lan ( [82.93.70.124])
        by mx.google.com with ESMTPS id c5sm15887843nfi.31.2008.04.19.13.01.18
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sat, 19 Apr 2008 13:01:19 -0700 (PDT)
Message-ID: <480A4F8D.80003@gmail.com>
Date: Sat, 19 Apr 2008 22:01:17 +0200
From: Karl Wettin <karl.wettin@gmail.com>
User-Agent: Thunderbird 2.0.0.12 (Macintosh/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: How to Retrieve Found Term?
References: <BLU141-W28F8F371F9A8BAC9838715EFE70@phx.gbl>
In-Reply-To: <BLU141-W28F8F371F9A8BAC9838715EFE70@phx.gbl>
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Edwin Lee skrev:
> Hi all,
> 
> i'm using Lucene 2.3.1. What i'm trying to do seems straightforward enough (to me), but i just can't find the method to do so.
> 
> Let's say i'm doing a PhraseQuery of the phrase "apples and oranges" with a non-zero slop value, and it returns, e.g., 20 Hits. Because i'm using non-zero slop value, the phrase that actually gets found could be something like "oranges and apples" instead. i would like to find out, for each of the Hit returned, what is the actual term from the document that was found. How can i do that?
There is no built in support in Lucene for that. You can take a look at
what Searcher.explain and the Highlighter does.

If you tell us why you want to do this perhaps we can come up with an
alternative solution.

            karl














---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33704-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 19 20:14:04 2008
Return-Path: <java-user-return-33704-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53299 invoked from network); 19 Apr 2008 20:14:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Apr 2008 20:14:04 -0000
Received: (qmail 39819 invoked by uid 500); 19 Apr 2008 20:13:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39778 invoked by uid 500); 19 Apr 2008 20:13:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39767 invoked by uid 99); 19 Apr 2008 20:13:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Apr 2008 13:13:58 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of peirans@cs.uoregon.edu designates 128.223.4.19 as permitted sender)
Received: from [128.223.4.19] (HELO vitalstatistix.cs.uoregon.edu) (128.223.4.19)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Apr 2008 20:13:06 +0000
Received: from [128.223.56.81] (d56-81.uoregon.edu [128.223.56.81])
	(authenticated bits=0)
	by vitalstatistix.cs.uoregon.edu (8.14.2/8.14.2) with ESMTP id m3JKDL22015635
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Sat, 19 Apr 2008 13:13:25 -0700 (PDT)
Message-ID: <480A51E6.9060205@cs.uoregon.edu>
Date: Sat, 19 Apr 2008 13:11:18 -0700
From: Peiran Song <peirans@cs.uoregon.edu>
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: lucene 2.3.1 QueryTermExtractor error
References: <48092A93.5070007@cs.uoregon.edu> <359a92830804190530ldf2b2dajb99b486b5b095d4a@mail.gmail.com>
In-Reply-To: <359a92830804190530ldf2b2dajb99b486b5b095d4a@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: ClamAV 0.92.1/6835/Sat Apr 19 12:28:34 2008 on vitalstatistix
X-Virus-Status: Clean
X-Greylist: Sender succeeded SMTP AUTH, not delayed by milter-greylist-4.0 (vitalstatistix.cs.uoregon.edu [128.223.4.19]); Sat, 19 Apr 2008 13:13:25 -0700 (PDT)
X-Virus-Checked: Checked by ClamAV on apache.org

That is the problem! -- an old highlight.jar
Thank you, Erick!

Erick Erickson wrote:
> Are you absolutely sure that you don't have some older jars hanging
> around in your environment? Especially when using Eclipse, the jar you
> compile with isn't necessarily the jar you run with, you have to find the
> magic runtime settings....
>
> And if you're not using eclipse, it could still be something similar...
>
> Best
> Erick
>
> On Fri, Apr 18, 2008 at 7:11 PM, Peiran Song <peirans@cs.uoregon.edu> wrote:
>
>   
>> Hi All,
>>
>> I recently upgraded Lucene to 1.9.1 and then to 2.3.1. The application
>> program compiled successfully but throws run time error:
>>
>> java.lang.NoSuchFieldError: prohibited
>>
>>  org.apache.lucene.search.highlight.QueryTermExtractor.getTermsFromBooleanQuery(QueryTermExtractor.java:91)
>>
>>  org.apache.lucene.search.highlight.QueryTermExtractor.getTerms(QueryTermExtractor.java:66)
>>
>>  org.apache.lucene.search.highlight.QueryTermExtractor.getTerms(QueryTermExtractor.java:59)
>>
>>  org.apache.lucene.search.highlight.QueryTermExtractor.getTerms(QueryTermExtractor.java:45)
>>
>>  org.apache.lucene.search.highlight.QueryScorer.<init>(QueryScorer.java:48)
>>
>> I was not able to google a solution and I hope to get some help here.
>> Thanks a lot!
>>
>> Peiran
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33705-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 20 05:18:32 2008
Return-Path: <java-user-return-33705-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86372 invoked from network); 20 Apr 2008 05:18:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Apr 2008 05:18:32 -0000
Received: (qmail 30018 invoked by uid 500); 20 Apr 2008 05:18:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29992 invoked by uid 500); 20 Apr 2008 05:18:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29981 invoked by uid 99); 20 Apr 2008 05:18:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Apr 2008 22:18:25 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chrislin0426@gmail.com designates 209.85.146.183 as permitted sender)
Received: from [209.85.146.183] (HELO wa-out-1112.google.com) (209.85.146.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Apr 2008 05:17:42 +0000
Received: by wa-out-1112.google.com with SMTP id j40so2054923wah.11
        for <java-user@lucene.apache.org>; Sat, 19 Apr 2008 22:17:55 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=v3DeO/usgUHIBXTI25zHjxevjLbwhTLozwT9+Wt8ucI=;
        b=qThr8ul7oSMaN1SryPjC8iwV6QovCN95ywHWBhNO5SrOjJE2Qg5tuKMSsrhhDLCcLA0+bJzIfxXKm5pZBNKxQIAzJlgHmQtzSz87WqeHqlTjugq9En56Y6bacRrK65FBk/D6yBnHcbkH2GTPFJvIWMN7bWNiFaAZ/9p+ZMgRpGQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=JnLyiBoT0pYgqe0y8T57fq+ECTobzmYr740oubqrG0+GQBiJEKVkPYtfswT3U9Pq4zdZO5w6YGfJX+8oo4qMt3YKwd7P9rou0M8r4mb+iG/q/gXes8BGYjj3gFFvahIrwo6cM/Vr5U4cOp/7YdzSQvWlNks9TZzkmDI+BKf/eu0=
Received: by 10.114.15.1 with SMTP id 1mr4472945wao.27.1208668674638;
        Sat, 19 Apr 2008 22:17:54 -0700 (PDT)
Received: by 10.114.126.16 with HTTP; Sat, 19 Apr 2008 22:17:49 -0700 (PDT)
Message-ID: <89762a530804192217p591222edoa97cab10230bcea3@mail.gmail.com>
Date: Sun, 20 Apr 2008 13:17:49 +0800
From: Chris <chrislin0426@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: A question about ParalellMultiSearcher and RMI
In-Reply-To: <007001c8a1fc$8b218740$b208a8c0@WangJianxin>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1940_32944044.1208668669624"
References: <007001c8a1fc$8b218740$b208a8c0@WangJianxin>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1940_32944044.1208668669624
Content-Type: text/plain; charset=BIG5
Content-Transfer-Encoding: base64
Content-Disposition: inline

WW91IG1heSB0cnkgdG8gdXNlIHRoZSBqYXZhIHBhcmFtZXRlciB3aXRoIC14bXggdG8gc2V0IHVw
IHlvdXIgbWVtb3J5LgpJZiB5b3UgaGF2ZSA4RyBSYW0gaW4gc3lzdGVtICwgYnV0IGphdmEgVk0g
b25seSBjYWx1c2UgdGhlIHNtYWxsZXIgdXNhZ2UuCgpBbmQgSSB0cnkgdG8gbWVyYWdlIHRoZSBp
bmRleCBmcm9tIGRpc2sgdG8gUkFNIC4gV2hlbiBJbmRleCBpcyBvbmx5IGFib3V0IDFHCnNpemUg
LCBidXQgaW50byB0aGUgUkFNIC4KSSB0cnkgdG8gdHJhY2UgdGhlIG1lbW9yeSB1c2FnZSAsIG92
ZXIgMUcgKGFib3V0IDEuNX4yRyApLi4uCkJ1dCBpZiB5b3Ugb25seSBoYXZlIDNHICAsIEkgdGhp
bmsgdGhlIDhHIG1lbW9yeSB0aGF0IGlzIGdvb2QgZW5vdWdoLgoKYWJvdmUKICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENocmlzLgoKUENIT01FICxTZWFyY2gg
VGVhbSBAIFRhaXdhbgoKCjIwMDgvNC8xOSwgpP2r2LdzIDxqaWFueGluLndhbmdAbnVmcm9udHNv
ZnQuY29tPjoKPgo+IEkgd2FudCB0byB1c2UgUkFNRGlyZWN0b3J5IHRvIHJhaXNlIHRoZSBwZWZv
cm1hbmNlIG9mIGx1Y2VuZS4KPiBTbyBJIGN1dCB0aGUgaW5kZXggZGlyIHRvIDMgc21hbGxlciBp
bmRleCBkaXJzKDFHIG9uZSBpbmRleCBkaXIpLgo+IFRoZW4gSSB1c2UgUkFNRGlyZWN0b3J5IHRv
IGxvYWQgdGhlIDMgZGlycywgYW5kIHJlYmluZCB0aGUgMyBzZWFyY2hlciBieQo+IFJNSS4oTXkg
c2VydmVyIGhhcyA4RyBtZW0pCj4gQXQgbGFzdCwgSSBsb29rdXAgdGhlIDMgcmVtb3RlIHNlYXJj
aGVyIHRvIG5ldyBhIFBhcmFsZWxsTXVsdGlTZWFyY2hlci4KPiBJdCB3b3JrcyBjb3JyZWN0b3Js
eSwgYnV0IHNvbWV0aW1lcyBvY2N1ciBlcnJvcnMgbGlrZSA6Cj4KPiBqYXZhLnJtaS5TZXJ2ZXJF
cnJvcjogRXJyb3Igb2NjdXJyZWQgaW4gc2VydmVyIHRocmVhZDsgbmVzdGVkIGV4Y2VwdGlvbgo+
IGlzOgo+IGphdmEubGFuZy5PdXRPZk1lbW9yeUVycm9yOiBKYXZhIGhlYXAgc3BhY2UKPiBhdCBz
dW4ucm1pLnNlcnZlci5VbmljYXN0U2VydmVyUmVmLmRpc3BhdGNoKFVuaWNhc3RTZXJ2ZXJSZWYu
amF2YTozMzMpCj4gYXQgc3VuLnJtaS50cmFuc3BvcnQuVHJhbnNwb3J0JDEucnVuKFRyYW5zcG9y
dC5qYXZhOjE1OSkKPiBhdCBqYXZhLnNlY3VyaXR5LkFjY2Vzc0NvbnRyb2xsZXIuZG9Qcml2aWxl
Z2VkKE5hdGl2ZSBNZXRob2QpCj4gYXQgc3VuLnJtaS50cmFuc3BvcnQuVHJhbnNwb3J0LnNlcnZp
Y2VDYWxsKFRyYW5zcG9ydC5qYXZhOjE1NSkKPiBhdAo+IHN1bi5ybWkudHJhbnNwb3J0LnRjcC5U
Q1BUcmFuc3BvcnQuaGFuZGxlTWVzc2FnZXMoVENQVHJhbnNwb3J0LmphdmE6NTM1KQo+IGF0Cj4g
c3VuLnJtaS50cmFuc3BvcnQudGNwLlRDUFRyYW5zcG9ydCRDb25uZWN0aW9uSGFuZGxlci5ydW4w
KFRDUFRyYW5zcG9ydC5qYXZhOjc5MCkKPiBhdAo+IHN1bi5ybWkudHJhbnNwb3J0LnRjcC5UQ1BU
cmFuc3BvcnQkQ29ubmVjdGlvbkhhbmRsZXIucnVuKFRDUFRyYW5zcG9ydC5qYXZhOjY0OSkKPiBh
dAo+IGphdmEudXRpbC5jb25jdXJyZW50LlRocmVhZFBvb2xFeGVjdXRvciRXb3JrZXIucnVuVGFz
ayhUaHJlYWRQb29sRXhlY3V0b3IuamF2YTo4ODUpCj4gYXQKPiBqYXZhLnV0aWwuY29uY3VycmVu
dC5UaHJlYWRQb29sRXhlY3V0b3IkV29ya2VyLnJ1bihUaHJlYWRQb29sRXhlY3V0b3IuamF2YTo5
MDcpCj4gYXQgamF2YS5sYW5nLlRocmVhZC5ydW4oVGhyZWFkLmphdmE6NjE5KQo+IGF0IHN1bi5y
bWkudHJhbnNwb3J0LlN0cmVhbVJlbW90ZUNhbGwuZXhjZXB0aW9uUmVjZWl2ZWRGcm9tU2VydmVy
KFVua25vd24KPiBTb3VyY2UpCj4gYXQgc3VuLnJtaS50cmFuc3BvcnQuU3RyZWFtUmVtb3RlQ2Fs
bC5leGVjdXRlQ2FsbChVbmtub3duIFNvdXJjZSkKPiBhdCBzdW4ucm1pLnNlcnZlci5VbmljYXN0
UmVmLmludm9rZShVbmtub3duIFNvdXJjZSkKPiBhdAo+IGphdmEucm1pLnNlcnZlci5SZW1vdGVP
YmplY3RJbnZvY2F0aW9uSGFuZGxlci5pbnZva2VSZW1vdGVNZXRob2QoVW5rbm93bgo+IFNvdXJj
ZSkKPiBhdCBqYXZhLnJtaS5zZXJ2ZXIuUmVtb3RlT2JqZWN0SW52b2NhdGlvbkhhbmRsZXIuaW52
b2tlKFVua25vd24gU291cmNlKQo+IGF0ICRQcm94eTAuc2VhcmNoKFVua25vd24gU291cmNlKQo+
IGF0Cj4gb3JnLmFwYWNoZS5sdWNlbmUuc2VhcmNoLk11bHRpU2VhcmNoZXJUaHJlYWQucnVuKFBh
cmFsbGVsTXVsdGlTZWFyY2hlci5qYXZhOjI1MSkKPiBDYXVzZWQgYnk6IGphdmEubGFuZy5PdXRP
Zk1lbW9yeUVycm9yOiBKYXZhIGhlYXAgc3BhY2UKPgo+IFRoYW5rcy4KCgoKCi0tIApDaHJpcyBM
aW4KY2hyaXNsaW4wNDI2QGdtYWlsLmNvbQpUYWlwZWkgLCBUYWl3YW4uCi0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCg==
------=_Part_1940_32944044.1208668669624--

From java-user-return-33706-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 20 09:36:57 2008
Return-Path: <java-user-return-33706-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81209 invoked from network); 20 Apr 2008 09:36:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Apr 2008 09:36:57 -0000
Received: (qmail 11784 invoked by uid 500); 20 Apr 2008 09:36:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11753 invoked by uid 500); 20 Apr 2008 09:36:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11742 invoked by uid 99); 20 Apr 2008 09:36:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Apr 2008 02:36:51 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lucene@nitwit.de designates 80.67.29.28 as permitted sender)
Received: from [80.67.29.28] (HELO smtprelay11.ispgateway.de) (80.67.29.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Apr 2008 09:35:57 +0000
Received: from [85.178.254.123] (helo=server.localdomain)
	by smtprelay11.ispgateway.de with esmtps (TLSv1:AES256-SHA:256)
	(Exim 4.68)
	(envelope-from <lucene@nitwit.de>)
	id 1JnVy5-0007i6-O1
	for java-user@lucene.apache.org; Sun, 20 Apr 2008 11:36:17 +0200
Received: from localhost (localhost [127.0.0.1])
	by server.localdomain (Postfix) with ESMTP id 20C8E494987
	for <java-user@lucene.apache.org>; Sun, 20 Apr 2008 11:36:20 +0200 (CEST)
From: Timo Nentwig <lucene@nitwit.de>
To: java-user@lucene.apache.org
Subject: IndexSearcher.close() doesn't close Directory
Date: Sun, 20 Apr 2008 11:36:19 +0200
User-Agent: KMail/1.9.7
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200804201136.19929.lucene@nitwit.de>
X-Df-Sender: [pbs]153383
X-Virus-Checked: Checked by ClamAV on apache.org

Hi!

I advised Directory.close() (AspectJ) and noticed that it's not called at all 
for the following code:

final FSDirectory d = FSDirectory.getDirectory( path );
final IndexReader r = IndexReader.open( d );
final IndexSearcher s = new IndexSearcher( r );
...
s.close();
r.close();
d.close(); // Directory isn't closed by IndexSearcher nor by IndexReader

I think that should be mentioned in javadoc.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33707-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 20 12:16:28 2008
Return-Path: <java-user-return-33707-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7293 invoked from network); 20 Apr 2008 12:16:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Apr 2008 12:16:27 -0000
Received: (qmail 69168 invoked by uid 500); 20 Apr 2008 12:16:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69133 invoked by uid 500); 20 Apr 2008 12:16:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69120 invoked by uid 99); 20 Apr 2008 12:16:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Apr 2008 05:16:21 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of supercooc@gmail.com designates 209.85.142.189 as permitted sender)
Received: from [209.85.142.189] (HELO ti-out-0910.google.com) (209.85.142.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Apr 2008 12:15:38 +0000
Received: by ti-out-0910.google.com with SMTP id 28so262702tif.11
        for <java-user@lucene.apache.org>; Sun, 20 Apr 2008 05:13:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=0ozfr6eamGQoGOC+BFFyxFQ0ba39zY/DFwF8psQ44YA=;
        b=dhai1AIF5MeB8HZp8FJfqQdB7a6o7tvOQB+BcQfLilZrNYeK+/4QJgzuDCORpX1YmDgm3fpNvJPTXpz7r6owh9Ug8OHbuGurKrfw+DDsG+nu8gAIB6CRTySXCQ+6MJI5xYPaM1gVF/6vRhgSYvZIRUQDFpC2ceUWXltPrvTOYWI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=nAowWK7WaUCuD5SJDYSGfTIB9J5piw/b17JWr/BE/xWk14d40yj4TArh0n4qKLJoNtt9XXbszGZCpZXyBxNFmSDgu0a4l/PSE71ao5cpE8WAEY8k19YVBCzE/2iIQgJrJP9RHZkRx28jDEBVtegFqwnr4MPGxITxcUJJDszcQvU=
Received: by 10.110.68.10 with SMTP id q10mr485460tia.28.1208693626971;
        Sun, 20 Apr 2008 05:13:46 -0700 (PDT)
Received: by 10.110.11.19 with HTTP; Sun, 20 Apr 2008 05:13:46 -0700 (PDT)
Message-ID: <ee0c896c0804200513s3f5b4446haff87a60cb1cface@mail.gmail.com>
Date: Sun, 20 Apr 2008 20:13:46 +0800
From: "=?GB2312?B?087TvrPYtcTT4w==?=" <supercooc@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: A question about ParalellMultiSearcher and RMI
In-Reply-To: <89762a530804192217p591222edoa97cab10230bcea3@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_11865_26416461.1208693626962"
References: <007001c8a1fc$8b218740$b208a8c0@WangJianxin>
	 <89762a530804192217p591222edoa97cab10230bcea3@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_11865_26416461.1208693626962
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: base64
Content-Disposition: inline

SW4gMzJiaXQgb3BlcmF0ZSBzeXN0ZW0gIEpWTSBub3Qgc3VwcG9ydCBtZW1vcnkgYmlnZXIgdGhh
biAyZwoKMjAwOC80LzIwLCBDaHJpcyA8Y2hyaXNsaW4wNDI2QGdtYWlsLmNvbT46Cj4KPiBZb3Ug
bWF5IHRyeSB0byB1c2UgdGhlIGphdmEgcGFyYW1ldGVyIHdpdGggLXhteCB0byBzZXQgdXAgeW91
ciBtZW1vcnkuCj4gSWYgeW91IGhhdmUgOEcgUmFtIGluIHN5c3RlbSAsIGJ1dCBqYXZhIFZNIG9u
bHkgY2FsdXNlIHRoZSBzbWFsbGVyIHVzYWdlLgo+Cj4gQW5kIEkgdHJ5IHRvIG1lcmFnZSB0aGUg
aW5kZXggZnJvbSBkaXNrIHRvIFJBTSAuIFdoZW4gSW5kZXggaXMgb25seSBhYm91dAo+IDFHCj4g
c2l6ZSAsIGJ1dCBpbnRvIHRoZSBSQU0gLgo+IEkgdHJ5IHRvIHRyYWNlIHRoZSBtZW1vcnkgdXNh
Z2UgLCBvdmVyIDFHIChhYm91dCAxLjV+MkcgKS4uLgo+IEJ1dCBpZiB5b3Ugb25seSBoYXZlIDNH
ICAsIEkgdGhpbmsgdGhlIDhHIG1lbW9yeSB0aGF0IGlzIGdvb2QgZW5vdWdoLgo+Cj4gYWJvdmUK
PiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDaHJpcy4KPgo+
IFBDSE9NRSAsU2VhcmNoIFRlYW0gQCBUYWl3YW4KPgo+Cj4gMjAwOC80LzE5LCDN9b2o0MIgPGpp
YW54aW4ud2FuZ0BudWZyb250c29mdC5jb20+Ogo+ID4KPiA+IEkgd2FudCB0byB1c2UgUkFNRGly
ZWN0b3J5IHRvIHJhaXNlIHRoZSBwZWZvcm1hbmNlIG9mIGx1Y2VuZS4KPiA+IFNvIEkgY3V0IHRo
ZSBpbmRleCBkaXIgdG8gMyBzbWFsbGVyIGluZGV4IGRpcnMoMUcgb25lIGluZGV4IGRpcikuCj4g
PiBUaGVuIEkgdXNlIFJBTURpcmVjdG9yeSB0byBsb2FkIHRoZSAzIGRpcnMsIGFuZCByZWJpbmQg
dGhlIDMgc2VhcmNoZXIgYnkKPiA+IFJNSS4oTXkgc2VydmVyIGhhcyA4RyBtZW0pCj4gPiBBdCBs
YXN0LCBJIGxvb2t1cCB0aGUgMyByZW1vdGUgc2VhcmNoZXIgdG8gbmV3IGEgUGFyYWxlbGxNdWx0
aVNlYXJjaGVyLgo+ID4gSXQgd29ya3MgY29ycmVjdG9ybHksIGJ1dCBzb21ldGltZXMgb2NjdXIg
ZXJyb3JzIGxpa2UgOgo+ID4KPiA+IGphdmEucm1pLlNlcnZlckVycm9yOiBFcnJvciBvY2N1cnJl
ZCBpbiBzZXJ2ZXIgdGhyZWFkOyBuZXN0ZWQgZXhjZXB0aW9uCj4gPiBpczoKPiA+IGphdmEubGFu
Zy5PdXRPZk1lbW9yeUVycm9yOiBKYXZhIGhlYXAgc3BhY2UKPiA+IGF0IHN1bi5ybWkuc2VydmVy
LlVuaWNhc3RTZXJ2ZXJSZWYuZGlzcGF0Y2goVW5pY2FzdFNlcnZlclJlZi5qYXZhOjMzMykKPiA+
IGF0IHN1bi5ybWkudHJhbnNwb3J0LlRyYW5zcG9ydCQxLnJ1bihUcmFuc3BvcnQuamF2YToxNTkp
Cj4gPiBhdCBqYXZhLnNlY3VyaXR5LkFjY2Vzc0NvbnRyb2xsZXIuZG9Qcml2aWxlZ2VkKE5hdGl2
ZSBNZXRob2QpCj4gPiBhdCBzdW4ucm1pLnRyYW5zcG9ydC5UcmFuc3BvcnQuc2VydmljZUNhbGwo
VHJhbnNwb3J0LmphdmE6MTU1KQo+ID4gYXQKPiA+IHN1bi5ybWkudHJhbnNwb3J0LnRjcC5UQ1BU
cmFuc3BvcnQuaGFuZGxlTWVzc2FnZXMoVENQVHJhbnNwb3J0LmphdmE6NTM1KQo+ID4gYXQKPiA+
Cj4gc3VuLnJtaS50cmFuc3BvcnQudGNwLlRDUFRyYW5zcG9ydCRDb25uZWN0aW9uSGFuZGxlci5y
dW4wKFRDUFRyYW5zcG9ydC5qYXZhOjc5MCkKPiA+IGF0Cj4gPgo+IHN1bi5ybWkudHJhbnNwb3J0
LnRjcC5UQ1BUcmFuc3BvcnQkQ29ubmVjdGlvbkhhbmRsZXIucnVuKFRDUFRyYW5zcG9ydC5qYXZh
OjY0OSkKPiA+IGF0Cj4gPgo+IGphdmEudXRpbC5jb25jdXJyZW50LlRocmVhZFBvb2xFeGVjdXRv
ciRXb3JrZXIucnVuVGFzayhUaHJlYWRQb29sRXhlY3V0b3IuamF2YTo4ODUpCj4gPiBhdAo+ID4K
PiBqYXZhLnV0aWwuY29uY3VycmVudC5UaHJlYWRQb29sRXhlY3V0b3IkV29ya2VyLnJ1bihUaHJl
YWRQb29sRXhlY3V0b3IuamF2YTo5MDcpCj4gPiBhdCBqYXZhLmxhbmcuVGhyZWFkLnJ1bihUaHJl
YWQuamF2YTo2MTkpCj4gPiBhdAo+IHN1bi5ybWkudHJhbnNwb3J0LlN0cmVhbVJlbW90ZUNhbGwu
ZXhjZXB0aW9uUmVjZWl2ZWRGcm9tU2VydmVyKFVua25vd24KPiA+IFNvdXJjZSkKPiA+IGF0IHN1
bi5ybWkudHJhbnNwb3J0LlN0cmVhbVJlbW90ZUNhbGwuZXhlY3V0ZUNhbGwoVW5rbm93biBTb3Vy
Y2UpCj4gPiBhdCBzdW4ucm1pLnNlcnZlci5VbmljYXN0UmVmLmludm9rZShVbmtub3duIFNvdXJj
ZSkKPiA+IGF0Cj4gPiBqYXZhLnJtaS5zZXJ2ZXIuUmVtb3RlT2JqZWN0SW52b2NhdGlvbkhhbmRs
ZXIuaW52b2tlUmVtb3RlTWV0aG9kKFVua25vd24KPiA+IFNvdXJjZSkKPiA+IGF0IGphdmEucm1p
LnNlcnZlci5SZW1vdGVPYmplY3RJbnZvY2F0aW9uSGFuZGxlci5pbnZva2UoVW5rbm93biBTb3Vy
Y2UpCj4gPiBhdCAkUHJveHkwLnNlYXJjaChVbmtub3duIFNvdXJjZSkKPiA+IGF0Cj4gPgo+IG9y
Zy5hcGFjaGUubHVjZW5lLnNlYXJjaC5NdWx0aVNlYXJjaGVyVGhyZWFkLnJ1bihQYXJhbGxlbE11
bHRpU2VhcmNoZXIuamF2YToyNTEpCj4gPiBDYXVzZWQgYnk6IGphdmEubGFuZy5PdXRPZk1lbW9y
eUVycm9yOiBKYXZhIGhlYXAgc3BhY2UKPiA+Cj4gPiBUaGFua3MuCj4KPgo+Cj4KPiAtLQo+IENo
cmlzIExpbgo+IGNocmlzbGluMDQyNkBnbWFpbC5jb20KPiBUYWlwZWkgLCBUYWl3YW4uCj4gLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0K
Pgo=
------=_Part_11865_26416461.1208693626962--

From java-user-return-33708-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 20 14:57:07 2008
Return-Path: <java-user-return-33708-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60957 invoked from network); 20 Apr 2008 14:57:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Apr 2008 14:57:07 -0000
Received: (qmail 41686 invoked by uid 500); 20 Apr 2008 14:57:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41661 invoked by uid 500); 20 Apr 2008 14:57:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41650 invoked by uid 99); 20 Apr 2008 14:57:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Apr 2008 07:57:01 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of edwin11_79@hotmail.com designates 65.55.175.158 as permitted sender)
Received: from [65.55.175.158] (HELO blu139-omc1-s18.blu139.hotmail.com) (65.55.175.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Apr 2008 14:56:15 +0000
Received: from BLU141-W21 ([65.55.162.183]) by blu139-omc1-s18.blu139.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Sun, 20 Apr 2008 07:56:27 -0700
Message-ID: <BLU141-W219D94522080CD4BFC18F3EFE60@phx.gbl>
X-Originating-IP: [165.21.154.128]
From: Edwin Lee <edwin11_79@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: How to Retrieve Found Term?
Date: Sun, 20 Apr 2008 22:56:27 +0800
Importance: Normal
In-Reply-To: <480A4F8D.80003@gmail.com>
References: <BLU141-W28F8F371F9A8BAC9838715EFE70@phx.gbl>
 <480A4F8D.80003@gmail.com>
Content-Type: text/plain; charset="gb2312"
Content-Transfer-Encoding: 8bit
MIME-Version: 1.0
X-OriginalArrivalTime: 20 Apr 2008 14:56:27.0782 (UTC) FILETIME=[B5EB7260:01C8A2F6]
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Karl,

Thanks for the response. i have looked at the Highlighter. Unfortunately, when i feed it with a PhraseQuery, it seems to break up the query into it's individual terms first, so does not yield the result that i would like. i have not looked at Searcher.explain yert though.

It's like this. Two types of searches are required: single term with wildcard, and phrase query with non-zero slop. But either could return large number of results, some of which are not what is wanted. So there needs to be an intermediate filter screen like this:
apples and oranges 25 hits found
oranges and apples 70 hits found
and apples oranges 5 hits found
...

so that we can choose to not to display results which correspond to the found phrases that we are not interested in, and when we get to the display screen, it's just the results we want.



Thanks,
Edwin



----------------------------------------
> Date: Sat, 19 Apr 2008 22:01:17 +0200
> From: karl.wettin@gmail.com
> To: java-user@lucene.apache.org
> Subject: Re: How to Retrieve Found Term?
> 
> Edwin Lee skrev:
>> Hi all,
>> 
>> i'm using Lucene 2.3.1. What i'm trying to do seems straightforward enough (to me), but i just can't find the method to do so.
>> 
>> Let's say i'm doing a PhraseQuery of the phrase "apples and oranges" with a non-zero slop value, and it returns, e.g., 20 Hits. Because i'm using non-zero slop value, the phrase that actually gets found could be something like "oranges and apples" instead. i would like to find out, for each of the Hit returned, what is the actual term from the document that was found. How can i do that?

> There is no built in support in Lucene for that. You can take a look at
> what Searcher.explain and the Highlighter does.
> 
> If you tell us why you want to do this perhaps we can come up with an
> alternative solution.
> 
>             karl
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

_________________________________________________________________
Publish your photos to your Space easily with Photo Gallery.
http://www.get.live.com/wl/all

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33709-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 20 19:41:40 2008
Return-Path: <java-user-return-33709-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55653 invoked from network); 20 Apr 2008 19:41:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Apr 2008 19:41:40 -0000
Received: (qmail 46296 invoked by uid 500); 20 Apr 2008 19:41:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46259 invoked by uid 500); 20 Apr 2008 19:41:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46248 invoked by uid 99); 20 Apr 2008 19:41:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Apr 2008 12:41:34 -0700
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of stuhood@mailtrust.com designates 207.97.245.201 as permitted sender)
Received: from [207.97.245.201] (HELO smtp201.iad.emailsrvr.com) (207.97.245.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Apr 2008 19:40:43 +0000
Received: from relay10.relay.iad.mlsrvr.com (localhost [127.0.0.1])
	by relay10.relay.iad.mlsrvr.com (SMTP Server) with ESMTP id 9693D1B4038
	for <java-user@lucene.apache.org>; Sun, 20 Apr 2008 15:41:03 -0400 (EDT)
Received: from webmail17.webmail.iad.mlsrvr.com (webmail17.webmail.iad.mlsrvr.com [192.168.1.16])
	by relay10.relay.iad.mlsrvr.com (SMTP Server) with ESMTP id 93FB11B4002
	for <java-user@lucene.apache.org>; Sun, 20 Apr 2008 15:41:03 -0400 (EDT)
Received: from mailtrust.com (localhost [127.0.0.1])
	by webmail17.webmail.iad.mlsrvr.com (Postfix) with ESMTP id 855BE4C804B
	for <java-user@lucene.apache.org>; Sun, 20 Apr 2008 15:41:03 -0400 (EDT)
Received: by beta.mailtrust.com
    (Authenticated sender: stuhood@mailtrust.com, from: stuhood@mailtrust.com) 
    with HTTP; Sun, 20 Apr 2008 15:41:03 -0400 (EDT)
Date: Sun, 20 Apr 2008 15:41:03 -0400 (EDT)
Subject: =?UTF-8?Q?Re:=20Occasional=20Hang=20in=20IndexWriter.close()?=
From: "Stu Hood" <stuhood@mailtrust.com>
To: java-user@lucene.apache.org
Reply-To: stuhood@mailtrust.com
MIME-Version: 1.0
Content-Type: text/plain;charset=UTF-8
Content-Transfer-Encoding: quoted-printable
Importance: Normal
X-Priority: 3 (Normal)
X-Type: plain
Message-ID: <40196.192.168.1.70.1208720463.webmail@192.168.1.70>
X-Mailer: webmail6.6.1
X-Virus-Checked: Checked by ClamAV on apache.org

Hey Mike,=0A=0AThanks for your input... the 'IndexWriter.close' call was ac=
tually in a 'finally' block around the merge code, without a 'catch', which=
 I realized may have been hiding the exception (I didn't realize close woul=
d block if an exception had occurred).=0A=0AI've moved the close out of the=
 finally block, so hopefully if an exception was being hidden, I'll see it =
and report back.=0A=0AThanks,=0AStu=0A=0A=0A=0A-----Original Message-----=
=0AFrom: Michael McCandless <lucene@mikemccandless.com>=0ASent: Saturday, A=
pril 19, 2008 4:40am=0ATo: java-user@lucene.apache.org, stuhood@mailtrust.c=
om=0ASubject: Re: Occasional Hang in IndexWriter.close()=0A=0A


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33710-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 20 22:24:48 2008
Return-Path: <java-user-return-33710-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96456 invoked from network); 20 Apr 2008 22:24:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Apr 2008 22:24:48 -0000
Received: (qmail 50161 invoked by uid 500); 20 Apr 2008 22:24:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50129 invoked by uid 500); 20 Apr 2008 22:24:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50118 invoked by uid 99); 20 Apr 2008 22:24:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Apr 2008 15:24:40 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Apr 2008 22:23:47 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Jnhx9-00062i-8Q
	for java-user@lucene.apache.org; Sun, 20 Apr 2008 15:24:07 -0700
Message-ID: <16799601.post@talk.nabble.com>
Date: Sun, 20 Apr 2008 15:24:07 -0700 (PDT)
From: syedfa <fayyazuddin@gmail.com>
To: java-user@lucene.apache.org
Subject: Searching through a single XML document
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: fayyazuddin@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Dear Fellow Java/Lucene developers:

I am trying to write a search engine application for shakespeare's "Hamlet"
which I have in xml format.  For demonstration purposes, I am using an xml
file of some quotes from the play only, which is listed below:

<PLAY>
<TITLE>The Tragedy of Hamlet, Prince of Denmark</TITLE>
<SPEECH>
<SPEAKER>LORD POLONIUS</SPEAKER>
<LINES>Yet here, Laertes! aboard, aboard, for shame!
The wind sits in the shoulder of your sail,
And you are stay'd for. There; my blessing with thee!
And these few precepts in thy memory
See thou character. Give thy thoughts no tongue,
Nor any unproportioned thought his act.
Be thou familiar, but by no means vulgar.
Those friends thou hast, and their adoption tried,
Grapple them to thy soul with hoops of steel;
But do not dull thy palm with entertainment
Of each new-hatch'd, unfledged comrade. Beware
Of entrance to a quarrel, but being in,
Bear't that the opposed may beware of thee.
Give every man thy ear, but few thy voice;
Take each man's censure, but reserve thy judgment.
Costly thy habit as thy purse can buy,
But not express'd in fancy; rich, not gaudy;
For the apparel oft proclaims the man,
And they in France of the best rank and station
Are of a most select and generous chief in that.
Neither a borrower nor a lender be;
For loan oft loses both itself and friend,
And borrowing dulls the edge of husbandry.
This above all: to thine ownself be true,
And it must follow, as the night the day,
Thou canst not then be false to any man.
Farewell: my blessing season this in thee!</LINES>
</SPEECH>
<SPEECH>
<SPEAKER>HAMLET</SPEAKER>
<LINES>To be, or not to be: that is the question:
Whether 'tis nobler in the mind to suffer
The slings and arrows of outrageous fortune,
Or to take arms against a sea of troubles,
And by opposing end them? To die: to sleep;
No more; and by a sleep to say we end
The heart-ache and the thousand natural shocks
That flesh is heir to, 'tis a consummation
Devoutly to be wish'd. To die, to sleep;
To sleep: perchance to dream: ay, there's the rub;
For in that sleep of death what dreams may come
When we have shuffled off this mortal coil,
Must give us pause: there's the respect
That makes calamity of so long life;
For who would bear the whips and scorns of time,
The oppressor's wrong, the proud man's contumely,
The pangs of despised love, the law's delay,
The insolence of office and the spurns
That patient merit of the unworthy takes,
When he himself might his quietus make
With a bare bodkin? who would fardels bear,
To grunt and sweat under a weary life,
But that the dread of something after death,
The undiscover'd country from whose bourn
No traveller returns, puzzles the will
And makes us rather bear those ills we have
Than fly to others that we know not of?
Thus conscience does make cowards of us all;
And thus the native hue of resolution
Is sicklied o'er with the pale cast of thought,
And enterprises of great pith and moment
With this regard their currents turn awry,
And lose the name of action.--Soft you now!
The fair Ophelia! Nymph, in thy orisons
Be all my sins remember'd.</LINES>
</SPEECH>
<SPEECH>
<SPEAKER>HAMLET</SPEAKER>
<LINES>To be, or not to be: that is the question:
Whether 'tis nobler in the mind to suffer
The slings and arrows of outrageous fortune,
Or to take arms against a sea of troubles,
And by opposing end them? To die: to sleep;
No more; and by a sleep to say we end
The heart-ache and the thousand natural shocks
That flesh is heir to, 'tis a consummation
Devoutly to be wish'd. To die, to sleep;
To sleep: perchance to dream: ay, there's the rub;
For in that sleep of death what dreams may come
When we have shuffled off this mortal coil,
Must give us pause: there's the respect
That makes calamity of so long life;
For who would bear the whips and scorns of time,
The oppressor's wrong, the proud man's contumely,
The pangs of despised love, the law's delay,
The insolence of office and the spurns
That patient merit of the unworthy takes,
When he himself might his quietus make
With a bare bodkin? who would fardels bear,
To grunt and sweat under a weary life,
But that the dread of something after death,
The undiscover'd country from whose bourn
No traveller returns, puzzles the will
And makes us rather bear those ills we have
Than fly to others that we know not of?
Thus conscience does make cowards of us all;
And thus the native hue of resolution
Is sicklied o'er with the pale cast of thought,
And enterprises of great pith and moment
With this regard their currents turn awry,
And lose the name of action.--Soft you now!
The fair Ophelia! Nymph, in thy orisons
Be all my sins remember'd.</LINES>
</SPEECH>
<SPEECH>
<SPEAKER>HAMLET</SPEAKER>
<LINES>To be, or not to be: that is the question:
Whether 'tis nobler in the mind to suffer
The slings and arrows of outrageous fortune,
Or to take arms against a sea of troubles,
And by opposing end them? To die: to sleep;
No more; and by a sleep to say we end
The heart-ache and the thousand natural shocks
That flesh is heir to, 'tis a consummation
Devoutly to be wish'd. To die, to sleep;
To sleep: perchance to dream: ay, there's the rub;
For in that sleep of death what dreams may come
When we have shuffled off this mortal coil,
Must give us pause: there's the respect
That makes calamity of so long life;
For who would bear the whips and scorns of time,
The oppressor's wrong, the proud man's contumely,
The pangs of despised love, the law's delay,
The insolence of office and the spurns
That patient merit of the unworthy takes,
When he himself might his quietus make
With a bare bodkin? who would fardels bear,
To grunt and sweat under a weary life,
But that the dread of something after death,
The undiscover'd country from whose bourn
No traveller returns, puzzles the will
And makes us rather bear those ills we have
Than fly to others that we know not of?
Thus conscience does make cowards of us all;
And thus the native hue of resolution
Is sicklied o'er with the pale cast of thought,
And enterprises of great pith and moment
With this regard their currents turn awry,
And lose the name of action.--Soft you now!
The fair Ophelia! Nymph, in thy orisons
Be all my sins remember'd.</LINES>
</SPEECH>
</PLAY>

I have created an application to create an index from the above xml file
which I am listing here:

import java.io.InputStream;
import java.io.IOException;
import java.io.File;
import java.io.FileInputStream;
import java.util.Iterator;
import java.util.HashMap;
 
import org.apache.lucene.analysis.Analyzer;
import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.store.Directory;
import org.apache.lucene.store.FSDirectory;
 
import org.xml.sax.helpers.DefaultHandler;
import org.xml.sax.SAXException;
import org.xml.sax.Attributes;
 
import javax.xml.parsers.SAXParser;
import javax.xml.parsers.SAXParserFactory;
import javax.xml.parsers.ParserConfigurationException;
 
public class HamletHandler extends DefaultHandler implements DocumentHandler
{
 
    
	private StringBuffer elementBuffer=new StringBuffer();
	private HashMap attributeMap;
	private Document doc;
	
	
	
	public Document getDocument(InputStream is) throws DocumentHandlerException
{
		// TODO Auto-generated method stub
		SAXParserFactory spf=SAXParserFactory.newInstance();
		
		try{
			SAXParser parser=spf.newSAXParser();
			parser.parse(is, this);
		}
		catch(IOException e){
			throw new DocumentHandlerException("Cannot parse XML document", e);
		}
		
		catch(ParserConfigurationException e){
			throw new DocumentHandlerException("Cannot parse XML document", e);
		}
		
		catch(SAXException e){
			throw new DocumentHandlerException("Cannot parse XML document", e);
		}
		
		return doc;
	}
 
	public void startDocument(){
		doc=new Document();
	}
	
	public void startElement(String uri, String localName, String qName,
Attributes atts) throws SAXException{
		
		elementBuffer.setLength(0);
		if(atts.getLength()>0){
			attributeMap=new HashMap();
			for(int i=0; i<atts.getLength(); i++){
				attributeMap.put(atts.getQName(i), atts.getValue(i));
			}
		}
	}
	public void characters(char[] text, int start, int length){
		elementBuffer.append(text, start, length);
		
	}
	
	public void endElement(String uri, String localName, String qName) throws
SAXException{
		
		if(qName.equals("SPEAKER")){
			Field speaker = new Field(qName, elementBuffer.toString(),
Field.Store.YES, Field.Index.TOKENIZED, Field.TermVector.YES);
	    	speaker.setBoost(2.0f);
			doc.add(speaker);
		}
		else if(qName.equals("LINES")){
			Field lines = new Field(qName, elementBuffer.toString(), Field.Store.YES,
Field.Index.TOKENIZED, Field.TermVector.YES);
	    	lines.setBoost(1.0f);
			doc.add(lines);
		}
		
		else{
			return;
		}
	}
	/**
	 * @param args
	 */
	public static void main(String[] args) throws Exception{
		File index=new File("c:\\index");
		Directory fsDirectory = FSDirectory.getDirectory(index);
    	Analyzer  analyzer    = new StandardAnalyzer();
    	IndexWriter indexWriter = new IndexWriter(fsDirectory, analyzer, true);
		HamletHandler handler=new HamletHandler();
		Document doc=handler.getDocument(new FileInputStream(new File(args[0])));
		System.out.println("test" + doc);
		indexWriter.addDocument(doc);
		int numIndexed=indexWriter.docCount();
		System.out.println(numIndexed);
		indexWriter.optimize();
    	indexWriter.close();
 
	}
 
}

The elements that I am interested in searching against are <SPEAKER> and
<LINES>.  If I do a search for HAMLET, I expect to get the number of
occurances of the element in the xml file (in this case 3).  However,
instead of 3, I get a value of 1.  My other concern is that I am unable to
search through the text contained within any of the <LINES> elements.  So if
I search for the word "the", I am unable to get a single hit.  Why is that? 
My code that I am using to search is listed here:

import java.io.File;
import java.io.FileReader;
import java.io.Reader;
import java.util.Date;
import java.io.IOException;
 
import org.apache.lucene.analysis.Analyzer;
import org.apache.lucene.analysis.standard.StandardAnalyzer ;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.search.Query ;
import org.apache.lucene.search.Hits;
import org.apache.lucene.index.Term;
import org.apache.lucene.search.TermQuery;
import org.apache.lucene.store.FSDirectory;
import org.apache.lucene.store.Directory;
import org.apache.lucene.queryParser.QueryParser;
/**
 *
 * 
 */
public class Searcher {
    
    /** Creates a new instance of Searcher */
    
    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) throws Exception{ 
        
        File indexDir=new File("c:\\index");
        String q="HAMLET";
        
        if(!indexDir.exists() || !indexDir.isDirectory()){
            throw new Exception(indexDir + "does not exist of is not a
directory."); 
        }
        
        search(indexDir, q);
        
        // TODO code application logic here
    }
    
    public static void search(File indexDir, String q) throws Exception {
         
        Directory fsDir=FSDirectory.getDirectory(indexDir);
        IndexSearcher is=new IndexSearcher(fsDir);
        
        Query parser=new QueryParser("SPEAKER", new
StandardAnalyzer()).parse(q); 
        long start=new Date().getTime();
        Hits hits=is.search(parser);
        long end=new Date().getTime();
        
        System.err.println("Found " + hits.length() + " document(s)(in" +
(end-start) + " milliseconds) that matched query '" + q + "':"); 
        
        for(int i=0; i<hits.length(); i++){
            Document doc=hits.doc(i);
            System.out.println(doc.get("filename"));
        }
        
    }
    
}

What am I doing wrong?  Any help would be greatly appreciated.  

Thanks to all who reply.
Sincerely;
Fayyaz
-- 
View this message in context: http://www.nabble.com/Searching-through-a-single-XML-document-tp16799601p16799601.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33711-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 20 23:13:39 2008
Return-Path: <java-user-return-33711-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6227 invoked from network); 20 Apr 2008 23:13:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Apr 2008 23:13:39 -0000
Received: (qmail 80215 invoked by uid 500); 20 Apr 2008 23:13:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80179 invoked by uid 500); 20 Apr 2008 23:13:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80168 invoked by uid 99); 20 Apr 2008 23:13:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Apr 2008 16:13:32 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ssmith@mainstreamdata.com designates 209.63.42.201 as permitted sender)
Received: from [209.63.42.201] (HELO nexus1.mainstreamdata.com) (209.63.42.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Apr 2008 23:12:41 +0000
Received: from localhost (localhost [127.0.0.1])
	by nexus1.mainstreamdata.com (Postfix) with ESMTP id 8F3F26F01F
	for <java-user@lucene.apache.org>; Sun, 20 Apr 2008 17:13:00 -0600 (MDT)
X-Virus-Scanned: Debian amavisd-new at nexus1.mainstreamdata.com
Received: from nexus1.mainstreamdata.com ([127.0.0.1])
	by localhost (nexus1.mainstreamdata.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id ugsGQvO0e8Yn for <java-user@lucene.apache.org>;
	Sun, 20 Apr 2008 17:12:54 -0600 (MDT)
Received: from exchange.slc.mainstreamdata.com (exchange.slc.mainstreamdata.com [10.2.1.132])
	by nexus1.mainstreamdata.com (Postfix) with ESMTP id 4D37E6E01B
	for <java-user@lucene.apache.org>; Sun, 20 Apr 2008 17:12:54 -0600 (MDT)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: Highlighting phrases
Date: Sun, 20 Apr 2008 17:12:54 -0600
Message-ID: <55F9EF953014514EB6BEE1F5198CEEB402BBD281@exchange.slc.mainstreamdata.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Highlighting phrases
Thread-Index: AcijPA+MHNInfTpkSxKfhcM6bEyxHA==
From: "Scott Smith" <ssmith@mainstreamdata.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

I've written some code to highlight items from a search using the =
standard Highlighter class, QueryScorer, and NullFragmenter.  Everything =
works fine except when we do phrases.  If I search for "fred smith" =
(with the quotes), it highlights any instances of "fred smith" just as =
expected.  However, it also highlights the word "fred" and the word =
"smith" any place they appear.  Is this the expected behavior?   Can =
someone point me to where I can change this behavior since it's a big =
deal to my customer (he only wants entire phrases highlighted)?
=20
thanks
=20
Scott
=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33712-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 21 01:50:23 2008
Return-Path: <java-user-return-33712-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93840 invoked from network); 21 Apr 2008 01:50:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Apr 2008 01:50:23 -0000
Received: (qmail 63267 invoked by uid 500); 21 Apr 2008 01:50:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63228 invoked by uid 500); 21 Apr 2008 01:50:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63217 invoked by uid 99); 21 Apr 2008 01:50:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Apr 2008 18:50:16 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO py-out-1112.google.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Apr 2008 01:49:32 +0000
Received: by py-out-1112.google.com with SMTP id z74so1656135pyg.9
        for <java-user@lucene.apache.org>; Sun, 20 Apr 2008 18:49:45 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:subject:from:to:in-reply-to:references:content-type:date:message-id:mime-version:x-mailer:content-transfer-encoding;
        bh=PzzzOii3poV01jK4T1Hut/HRotnjX6hSvrSqGVdDhtA=;
        b=IdwVzw6Kj4Cc57xHq4noSHFypXxzQkRgpOJZcIEy0OGcYvPJCOPzPd3p3u03+b0t/RQo9Xlor2kkMNm5pjbd/qXA/tVxicLw9pdHiS+zJ0rgJmv5oXkOlg36E0cVSH3WjEHUGM437IJxfIe8NuDdD/6nkdTf8rdfX7apZ+otw5s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=subject:from:to:in-reply-to:references:content-type:date:message-id:mime-version:x-mailer:content-transfer-encoding;
        b=PLhbkqlxyUPt9xG49rnzY8lrJUgTgpfTwTeU6JNnu1YGtIGPFmv05tQheuPJerkgAE90CWOztnzEw1p3FAmCHH0myG1oJ2wse8X4/pfDy58aVUOjH4RCcxSu8fG05tZoBkXrNvksx600m9G3lU++AxveIjyZaKiFYksUN9yCKfk=
Received: by 10.65.252.13 with SMTP id e13mr9737649qbs.51.1208742585039;
        Sun, 20 Apr 2008 18:49:45 -0700 (PDT)
Received: from ?192.168.1.104? ( [69.124.234.149])
        by mx.google.com with ESMTPS id e19sm2093297qba.13.2008.04.20.18.49.44
        (version=SSLv3 cipher=RC4-MD5);
        Sun, 20 Apr 2008 18:49:44 -0700 (PDT)
Subject: Re: Highlighting phrases
From: Mark Miller <markrmiller@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <55F9EF953014514EB6BEE1F5198CEEB402BBD281@exchange.slc.mainstreamdata.com>
References:
	 <55F9EF953014514EB6BEE1F5198CEEB402BBD281@exchange.slc.mainstreamdata.com>
Content-Type: text/plain
Date: Sun, 20 Apr 2008 21:49:43 -0400
Message-Id: <1208742583.6348.15.camel@m-laptop>
Mime-Version: 1.0
X-Mailer: Evolution 2.22.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

https://issues.apache.org/jira/browse/LUCENE-794

Because its for a customer, that will be 1 beer...

On Sun, 2008-04-20 at 17:12 -0600, Scott Smith wrote:
> I've written some code to highlight items from a search using the standard Highlighter class, QueryScorer, and NullFragmenter.  Everything works fine except when we do phrases.  If I search for "fred smith" (with the quotes), it highlights any instances of "fred smith" just as expected.  However, it also highlights the word "fred" and the word "smith" any place they appear.  Is this the expected behavior?   Can someone point me to where I can change this behavior since it's a big deal to my customer (he only wants entire phrases highlighted)?
>  
> thanks
>  
> Scott
>  
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33713-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 21 05:38:55 2008
Return-Path: <java-user-return-33713-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72145 invoked from network); 21 Apr 2008 05:38:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Apr 2008 05:38:55 -0000
Received: (qmail 2966 invoked by uid 500); 21 Apr 2008 05:38:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2935 invoked by uid 500); 21 Apr 2008 05:38:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2924 invoked by uid 99); 21 Apr 2008 05:38:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Apr 2008 22:38:50 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [76.13.9.26] (HELO web65406.mail.ac4.yahoo.com) (76.13.9.26)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 21 Apr 2008 05:37:56 +0000
Received: (qmail 34615 invoked by uid 60001); 21 Apr 2008 05:38:16 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=uVp7oppwBRPavudbE9BD6zyou/YDmJrJN1sIZUKz36KYgzbgVKofM+0/MIMHVtPlDYjtBxsm+Hp/e+ujmmUUp/kKMEcuojmSDY/6QM12OCf0qh0EGantP3uLojYEpDGoWY+rLlzc0ogbbv5oHhbPqq8b9IBtzyySqTtmmFG0cyQ=;
X-YMail-OSG: 35VNiqoVM1mxqKELSm_4sLUDLpz7ZZYoV99cmVag01n7gwMomRiSHSkK0Q3_mVdI7dO7L9Mo3mFRM4cnlhmTFD4WT0dkuInYjZPajc1GWVZax5b1s.g2zx1z8w--
Received: from [85.178.146.75] by web65406.mail.ac4.yahoo.com via HTTP; Sun, 20 Apr 2008 22:38:16 PDT
Date: Sun, 20 Apr 2008 22:38:16 -0700 (PDT)
From: Ulf Dittmer <udittmer@yahoo.com>
Subject: Re: Searching through a single XML document
To: java-user@lucene.apache.org
In-Reply-To: <16799601.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
Message-ID: <313087.19390.qm@web65406.mail.ac4.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

The search can't return more than one document,
because only a single document is ever added to the
index. You might want to think about structuring the
index differently, e.g. by creating one Document for
each SPEECH element.

The search for "the" in particular won't find
anything, because that's a stopword that will be
removed if you use a StandardAnalyzer. (See the
comments about StopFilter in the StandardAnalyzer
javadocs).

You'll probably want to set the size of elementBuffer
to 0 after you created a Field that contains the
current text. Otherwise you'll be adding the same text
over and over again.

Also, think about using Field.Store.NO instead of
Field.Store.YES for the LINES. Unless you need to
retrieve the full text of each speech from the index,
this just makes the index very large for no good
reason.

Ulf



      ____________________________________________________________________________________
Be a better friend, newshound, and 
know-it-all with Yahoo! Mobile.  Try it now.  http://mobile.yahoo.com/;_ylt=Ahu06i62sR8HDtDypao8Wcj9tAcJ

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33714-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 21 07:02:42 2008
Return-Path: <java-user-return-33714-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24647 invoked from network); 21 Apr 2008 07:02:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Apr 2008 07:02:41 -0000
Received: (qmail 73753 invoked by uid 500); 21 Apr 2008 07:02:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73271 invoked by uid 500); 21 Apr 2008 07:02:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73260 invoked by uid 99); 21 Apr 2008 07:02:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Apr 2008 00:02:35 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 209.85.146.182 as permitted sender)
Received: from [209.85.146.182] (HELO wa-out-1112.google.com) (209.85.146.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Apr 2008 07:01:52 +0000
Received: by wa-out-1112.google.com with SMTP id j40so2857769wah.11
        for <java-user@lucene.apache.org>; Mon, 21 Apr 2008 00:02:05 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=SYG0AMZKEc/ai8zTKg9d0D83GId6rtyt9hH8quTr1xg=;
        b=fCRuqIgvprJ5gZP/o0LYfzCUeMtgsHgMRSShkiYlUbDK7/R2HVsr1CPEYAtlKOA2LIfkAxjCBYwWinT19OlijKPkJtXj+9pHZePHe9wDf/lONsLh7iYp6IpBcMi3MOYLCfJImbEbALaogakp+eTUqiCdFn0RwpwHietLl74OJxk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=MBesbQPwRsp4XaA0pZs/QLIuyUQyFLcVXctfA3bH7V1GeKrX2cxMC9E7SMRDb4xbuRTl25b2KziH9vQhs35SbxSl/DuorLoLbioK/+24/2opix5HKY2riZKRJgpNv9jsW4atZFDhJuSG1Suhn5d8TewJYyKFuOej89s24+tuv54=
Received: by 10.114.124.12 with SMTP id w12mr5426986wac.210.1208761325489;
        Mon, 21 Apr 2008 00:02:05 -0700 (PDT)
Received: by 10.114.134.19 with HTTP; Mon, 21 Apr 2008 00:02:05 -0700 (PDT)
Message-ID: <867513fe0804210002y7c0c3e02j368f77ca684ffcbc@mail.gmail.com>
Date: Mon, 21 Apr 2008 12:32:05 +0530
From: Anshum <anshumg@gmail.com>
To: java-user@lucene.apache.org
Subject: Binding lucene instance/threads to a particular processor(or core)
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14214_33227400.1208761325492"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_14214_33227400.1208761325492
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

I have been trying to bind my lucene instance (JVM - Sun Hotspot*) to a
particular core so as to improve the performance. Is there a way to do so or
is there support in lucene to explicitly control the thread - processor
linkup?

-- 
--
The facts expressed here belong to everybody, the opinions to me.
The distinction is yours to draw............

------=_Part_14214_33227400.1208761325492--

From java-user-return-33715-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 21 07:35:02 2008
Return-Path: <java-user-return-33715-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40290 invoked from network); 21 Apr 2008 07:35:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Apr 2008 07:35:02 -0000
Received: (qmail 99776 invoked by uid 500); 21 Apr 2008 07:34:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99727 invoked by uid 500); 21 Apr 2008 07:34:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99704 invoked by uid 99); 21 Apr 2008 07:34:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Apr 2008 00:34:54 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [76.13.9.33] (HELO web65413.mail.ac4.yahoo.com) (76.13.9.33)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 21 Apr 2008 07:34:02 +0000
Received: (qmail 64114 invoked by uid 60001); 21 Apr 2008 07:34:22 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=nEK5fRcFfOPWjJBdOJ+5Am5lq98O2Bt23njijtx3F/swuLp3Xy0St760owlvntfh1/CcHUJoCHLNIYsuqEpaNmdShWC++/L+EOTRsjmUehQXWkk/qMvCKYlFyGN2HpZ5PGucf0t/+8wJHZtfBMPFbFB9NLwejL8RXBgt3PGziY0=;
X-YMail-OSG: oGZOv8gVM1lodhcHjoSyhAiICD_6kiCbUXhW9kv5K36.Ll2BQG1k_9AlAu4C.re3oBLq9sVIxW22DYMT.OzQik3uC0junmdgoJMskoszE9BKXTfDxeNFxtmIfA--
Received: from [85.178.156.157] by web65413.mail.ac4.yahoo.com via HTTP; Mon, 21 Apr 2008 00:34:22 PDT
Date: Mon, 21 Apr 2008 00:34:22 -0700 (PDT)
From: Ulf Dittmer <udittmer@yahoo.com>
Subject: Re: Binding lucene instance/threads to a particular processor(or core)
To: java-user@lucene.apache.org
In-Reply-To: <867513fe0804210002y7c0c3e02j368f77ca684ffcbc@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
Message-ID: <441650.63543.qm@web65413.mail.ac4.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

This sounds odd. Why would restricting it to a single
core improve performance? The point of using multiple
cores (and multiple threads) is to improve performance
isn't it? I'd leave thread scheduling decisions to the
JVM. Plus, I don't think there is anything in Java to
facilitate this (short of using JNI).

Are you talking about indexing or searching? You may
be able to use multiple parallel threads to improve
indexing performance. I don't think Lucene uses
multi-threading for searching; not unless you have
multiple indices, anyway.

Ulf


--- Anshum <anshumg@gmail.com> wrote:

> Hi,
> 
> I have been trying to bind my lucene instance (JVM -
> Sun Hotspot*) to a
> particular core so as to improve the performance. Is
> there a way to do so or
> is there support in lucene to explicitly control the
> thread - processor
> linkup?
> 
> -- 
> --
> The facts expressed here belong to everybody, the
> opinions to me.
> The distinction is yours to draw............
> 



      ____________________________________________________________________________________
Be a better friend, newshound, and 
know-it-all with Yahoo! Mobile.  Try it now.  http://mobile.yahoo.com/;_ylt=Ahu06i62sR8HDtDypao8Wcj9tAcJ

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33716-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 21 08:15:36 2008
Return-Path: <java-user-return-33716-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51860 invoked from network); 21 Apr 2008 08:15:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Apr 2008 08:15:36 -0000
Received: (qmail 44111 invoked by uid 500); 21 Apr 2008 08:15:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44079 invoked by uid 500); 21 Apr 2008 08:15:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44068 invoked by uid 99); 21 Apr 2008 08:15:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Apr 2008 01:15:30 -0700
X-ASF-Spam-Status: No, hits=4.8 required=10.0
	tests=HTML_MESSAGE,MIME_BASE64_TEXT,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lieutroy@gmail.com designates 64.233.184.224 as permitted sender)
Received: from [64.233.184.224] (HELO wr-out-0506.google.com) (64.233.184.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Apr 2008 08:14:45 +0000
Received: by wr-out-0506.google.com with SMTP id c30so706130wra.14
        for <java-user@lucene.apache.org>; Mon, 21 Apr 2008 01:14:58 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to:subject:date:mime-version:content-type:x-priority:x-msmail-priority:x-mailer:x-mimeole;
        bh=LUJfcbjwFhuN7e1pdQ5d0jEY2QBxWF+fbf89rLbILd4=;
        b=RtART/qpMFsfTo6XpIr+t14U50ZJEcyNpgfAmPqE/a86JpNmfhtv08sMeuk1pvXe16/WVOtoahytDFgU4/WJyJP6zOoeYW6Xs2PzcNwaFkKQEZPUvL6DJaaaV6hZRtydDjhiz3NMc1V+noJ68u9uPbw1OG9CfK1tGzNSeV6W5FY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:subject:date:mime-version:content-type:x-priority:x-msmail-priority:x-mailer:x-mimeole;
        b=qXjdgD/UlR3N8Ci/6UnFaFTm1jRTib//nryVJrEvXrHY1v42zW6lFssxfwAOS5w3LTjO4G7atzzi7424kLvpVZsqivnb2QXFNh77kvZMt6RLVEGgAz4qL8T4WLdt6Us3I95hLsnFQcMWjYIPuuDgzACsHQ5gufQXMCHdenTuLts=
Received: by 10.142.162.5 with SMTP id k5mr1602605wfe.53.1208765697771;
        Mon, 21 Apr 2008 01:14:57 -0700 (PDT)
Received: from WangJianxin ( [203.86.44.2])
        by mx.google.com with ESMTPS id 32sm6182742wfc.3.2008.04.21.01.14.55
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 21 Apr 2008 01:14:57 -0700 (PDT)
Message-ID: <014901c8a387$cffd5e20$b208a8c0@WangJianxin>
From: =?gb2312?B?zfW9qNDC?= <lieutroy@gmail.com>
To: "java-user" <java-user@lucene.apache.org>
Subject: Need addtional info for Field
Date: Mon, 21 Apr 2008 16:15:02 +0800
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0144_01C8A3CA.DA96B410"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0144_01C8A3CA.DA96B410
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: base64

SSB3YW50IHRvIHVzZSBsdWNlbmUgd2l0aCBzb21lIGFkZGl0aW9uYWwgaW5mbyxsaWtlOg0KDQox
LmluZGV4DQogICAgRG9jdW1lbnQgYWRkaXRpb25hbERvYz1ldyBEb2N1bWVudCgpDQoNCiAgICBh
ZGRpdGlvbmFsRG9jLmFkZChuZXcgRmllbGQoImZpZWxkIiwiQUEgQkIiLCJBZGR0aW9uYWwgaW5m
byAuLi4uLi4uLi4uLi4uLi4iKSk7DQogICAgYWRkaXRpb25hbERvYy5hZGQobmV3IEZpZWxkKCJm
aWVsZCIsIkJCIENDIiwiQWRkdGlvbmFsIGluZm8gMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyLi4u
Li4uLi4uLi4uLi4uIikpOw0KDQogICAgd3JpdGVyLmFkZERvY3VtZW50KGFkZGl0aW9uYWxEb2Mp
DQoNCiAgICAuLi4uLi4uLg0KDQoNCjIuIHNlYXJjaA0KDQogICAgU2VhcmNoZXIgc2VhcmNoZXI7
DQogICAgLi4uLg0KDQogICAgc2VhcmNoZXIuc2VhcmNoKHRlcm1RdWVyeSgiZmllbGQiLCJCQiIp
KTsNCg0KDQoNCg0KICAgIGluIHRoaXMgY29uZGl0aW9uLCBJIHdhbnQgbHVjZW5lIHJldHVybnMg
dGhlIGFkZGl0aW9uYWxEb2MgLCBhbHNvIGtub3cgd2hpY2ggZmlsZWRzIHdlcmUgbWF0Y2hlZCwg
dGhlbiBJIHdpbGwgZ2V0IHRoZSBhZGRpdGlvbmFsIGluZm8gZnJvbSB0aGUgbWF0Y2hlZCBmaWVs
ZHMuDQoNCkNhbiBsdWNlbmUgbWFrZSBpdCBpbiB2ZXJzaW9uIDIuMy4xPw0KaWYgY2Fubm90LCBD
YW4geW91IGdpdmUgbWUgc29tZSBhZHZpY2U/DQoNClRoYW5rcy4NCg==

------=_NextPart_000_0144_01C8A3CA.DA96B410--


From java-user-return-33717-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 21 09:35:06 2008
Return-Path: <java-user-return-33717-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83711 invoked from network); 21 Apr 2008 09:35:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Apr 2008 09:35:06 -0000
Received: (qmail 31426 invoked by uid 500); 21 Apr 2008 09:34:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31397 invoked by uid 500); 21 Apr 2008 09:34:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31077 invoked by uid 99); 21 Apr 2008 09:34:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Apr 2008 02:34:52 -0700
X-ASF-Spam-Status: No, hits=-2.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.222.32.20] (HELO mexforward.lss.emc.com) (128.222.32.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Apr 2008 09:33:58 +0000
Received: from hop04-l1d11-si01.isus.emc.com (HOP04-L1D11-SI01.isus.emc.com [10.254.111.54])
	by mexforward.lss.emc.com (Switch-3.2.5/Switch-3.1.7) with ESMTP id m3L9YHfu012069
	for <java-user@lucene.apache.org>; Mon, 21 Apr 2008 05:34:18 -0400 (EDT)
Received: from mailhub.lss.emc.com (nirah.lss.emc.com [10.254.144.13]) by hop04-l1d11-si01.isus.emc.com (Tablus Interceptor) for <java-user@lucene.apache.org>; Mon, 21 Apr 2008 05:34:17 -0400
Received: from corpussmtp1.corp.emc.com (corpussmtp1.corp.emc.com [128.221.10.43])
	by mailhub.lss.emc.com (Switch-3.2.5/Switch-3.1.7) with ESMTP id m3L9YFSJ009119
	for <java-user@lucene.apache.org>; Mon, 21 Apr 2008 05:34:15 -0400 (EDT)
From: Fang_Li@emc.com
Received: from CORPUSMX70A.corp.emc.com ([128.221.32.148]) by corpussmtp1.corp.emc.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 21 Apr 2008 05:33:52 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C8A392.CF93A960"
Subject: how to query against payload
Date: Mon, 21 Apr 2008 05:34:03 -0400
Message-ID: <0C5F3D1247CCF341B9B8DD7B447FA4925017DB@CORPUSMX70A.corp.emc.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: how to query against payload
Thread-Index: AcijktX0MaqVPVWnTZmXPuYl1mB00g==
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 21 Apr 2008 09:33:52.0411 (UTC) FILETIME=[CFA1F6B0:01C8A392]
X-PMX-Version: 4.7.1.128075, Antispam-Engine: 2.5.1.298604, Antispam-Data: 2007.8.30.51425
X-PerlMx-Spam: Gauge=, SPAM=1%, Reason='EMC_FROM_0+ -3, HTML_70_90 0.1, NO_REAL_NAME 0, __CT 0, __CTYPE_HAS_BOUNDARY 0, __CTYPE_MULTIPART 0, __CTYPE_MULTIPART_ALT 0, __HAS_MSGID 0, __HTML_FONT_BLUE 0, __HTML_MSWORD 0, __IMS_MSGID 0, __MIME_HTML 0, __MIME_VERSION 0, __SANE_MSGID 0, __TAG_EXISTS_HTML 0'
X-Tablus-Inspected: yes
X-Tablus-Classifications: public
X-Tablus-Action: allow
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C8A392.CF93A960
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,

                I want to use payload to store some kind of object id
which is an arbitrary byte array for better performance. But I do need
some kind of function like searching against payload value.=20

=20

Also when the hits are available, how to get the payload of a specific
term from a document without set the field as stored? Currently I found
the only available interface is IndexReader.termPosition(new Term()).
Looks we need to search again.=20

I've seen there will be per document payload. When will it be ready?

=20

Thanks,

Fang, Li

=20


------_=_NextPart_001_01C8A392.CF93A960--

From java-user-return-33718-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 21 13:55:51 2008
Return-Path: <java-user-return-33718-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84861 invoked from network); 21 Apr 2008 13:55:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Apr 2008 13:55:51 -0000
Received: (qmail 812 invoked by uid 500); 21 Apr 2008 13:55:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 732 invoked by uid 500); 21 Apr 2008 13:55:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 715 invoked by uid 99); 21 Apr 2008 13:55:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Apr 2008 06:55:41 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of glen.newton@gmail.com designates 64.233.184.226 as permitted sender)
Received: from [64.233.184.226] (HELO wr-out-0506.google.com) (64.233.184.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Apr 2008 13:54:55 +0000
Received: by wr-out-0506.google.com with SMTP id c30so797913wra.14
        for <java-user@lucene.apache.org>; Mon, 21 Apr 2008 06:55:08 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=3iA0ZQq4i7k/IJff1Dz/wCi8NON8z2pC8+LEjLxHYww=;
        b=XmBkqBd2PfGNMPRIFqkE20iQAbX+UyQCgf9TvL9KNSgwn3UkuxSDLETqU9Z9QOMo8FnSBdne0viZy3XIgdVOU3R/0gaNPPxGwC0waFnnBicqYlj7hMaxf5sQ9LE7ddH5/Vcyyq5n2+NpTSXvyzerfRfxXRUFAPwv53BIhp43iAU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=OROAMprfcjrUcwXvK/KrcLBrL0dx3FQatIUnec1Fe0BFmHf+9k1kjxUy5vhcYI9I6ozxHRyIOoCgRVKRLP3+MWvXDOfcYngtgwerpbTxNUxVxuc8GwgHLN+As//A6QiEv/J+U+PueP0/cEMJQCCzLjKpe8DOTIQN2PKzEGAlTpc=
Received: by 10.141.161.6 with SMTP id n6mr3225722rvo.201.1208786107195;
        Mon, 21 Apr 2008 06:55:07 -0700 (PDT)
Received: by 10.140.148.19 with HTTP; Mon, 21 Apr 2008 06:55:07 -0700 (PDT)
Message-ID: <5e76f3840804210655v4e42d1a4ocfdb36f9785063c5@mail.gmail.com>
Date: Mon, 21 Apr 2008 09:55:07 -0400
From: "Glen Newton" <glen.newton@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Binding lucene instance/threads to a particular processor(or core)
In-Reply-To: <441650.63543.qm@web65413.mail.ac4.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <867513fe0804210002y7c0c3e02j368f77ca684ffcbc@mail.gmail.com>
	 <441650.63543.qm@web65413.mail.ac4.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

BInding threads to processors - in many situations - improves
throughput by reducing memory overhead. When a thread is running on a
core, its state is local; if it is timeshared-out and either 1)
swapped back in on the same core, it is likely that there will be  the
core's L1 cache; or 2) onto another core, there will not be a cache
hit and the state will have to be fetched from L2 or main memory,
incurring a performance hit, esp in the latter. See Lundberg, L. 1997.
Evaluating the Performance Implications of Binding Threads to
Processors. 393.http://ieeexplore.ieee.org/iel3/5020/13768/00634520.pdf
for more info.

If you are using JVM on Solaris on SPARC, you should take a look at
the following links for tuning (the Sun JVM on Solaris SPARC has many
more performance tuning parameters available), including threading:
- http://java.sun.com/docs/hotspot/threads/threads.html
- http://java.sun.com/j2se/1.5.0/docs/guide/vm/thread-priorities.html
- http://www-1.ibm.com/support/docview.wss?rs=180&context=SSEQTP&uid=swg21107291
- http://java.sun.com/javase/technologies/performance.jsp

-Glen






On 21/04/2008, Ulf Dittmer <udittmer@yahoo.com> wrote:
> This sounds odd. Why would restricting it to a single
>  core improve performance? The point of using multiple
>  cores (and multiple threads) is to improve performance
>  isn't it? I'd leave thread scheduling decisions to the
>  JVM. Plus, I don't think there is anything in Java to
>  facilitate this (short of using JNI).
>
>  Are you talking about indexing or searching? You may
>  be able to use multiple parallel threads to improve
>  indexing performance. I don't think Lucene uses
>  multi-threading for searching; not unless you have
>  multiple indices, anyway.
>
>  Ulf
>
>
>
>  --- Anshum <anshumg@gmail.com> wrote:
>
>  > Hi,
>  >
>  > I have been trying to bind my lucene instance (JVM -
>  > Sun Hotspot*) to a
>  > particular core so as to improve the performance. Is
>  > there a way to do so or
>  > is there support in lucene to explicitly control the
>  > thread - processor
>  > linkup?
>  >
>  > --
>  > --
>  > The facts expressed here belong to everybody, the
>  > opinions to me.
>  > The distinction is yours to draw............
>  >
>
>
>
>
>       ____________________________________________________________________________________
>  Be a better friend, newshound, and
>  know-it-all with Yahoo! Mobile.  Try it now.  http://mobile.yahoo.com/;_ylt=Ahu06i62sR8HDtDypao8Wcj9tAcJ
>
>  ---------------------------------------------------------------------
>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33719-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 21 13:57:54 2008
Return-Path: <java-user-return-33719-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85983 invoked from network); 21 Apr 2008 13:57:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Apr 2008 13:57:53 -0000
Received: (qmail 5754 invoked by uid 500); 21 Apr 2008 13:57:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5716 invoked by uid 500); 21 Apr 2008 13:57:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5705 invoked by uid 99); 21 Apr 2008 13:57:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Apr 2008 06:57:48 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.207] (HELO spunkymail-a6.g.dreamhost.com) (208.97.132.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Apr 2008 13:57:03 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a6.g.dreamhost.com (Postfix) with ESMTP id 10938109F33
	for <java-user@lucene.apache.org>; Mon, 21 Apr 2008 06:57:15 -0700 (PDT)
Message-Id: <127FC7CD-BFD4-421C-A65B-2B3D3EAA78BC@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <0C5F3D1247CCF341B9B8DD7B447FA4925017DB@CORPUSMX70A.corp.emc.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: how to query against payload
Date: Mon, 21 Apr 2008 09:57:14 -0400
References: <0C5F3D1247CCF341B9B8DD7B447FA4925017DB@CORPUSMX70A.corp.emc.com>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On Apr 21, 2008, at 5:34 AM, Fang_Li@emc.com wrote:

> Hi,
>
>                I want to use payload to store some kind of object id
> which is an arbitrary byte array for better performance. But I do need
> some kind of function like searching against payload value.
>

Have a look at the BoostingTermQuery.  If you need more than that, you  
could create some new queries using that as a model.

>
>
> Also when the hits are available, how to get the payload of a specific
> term from a document without set the field as stored? Currently I  
> found
> the only available interface is IndexReader.termPosition(new Term()).
> Looks we need to search again.

https://issues.apache.org/jira/browse/LUCENE-1001.  Note, however,  
that the patch there is not going to work.  If you can help out on it,  
that would be great.


>
>
> I've seen there will be per document payload. When will it be ready?
>
>
>
> Thanks,
>
> Fang, Li
>
>
>

--------------------------
Grant Ingersoll

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ







---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33720-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 21 13:59:14 2008
Return-Path: <java-user-return-33720-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86475 invoked from network); 21 Apr 2008 13:59:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Apr 2008 13:59:13 -0000
Received: (qmail 8401 invoked by uid 500); 21 Apr 2008 13:59:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8091 invoked by uid 500); 21 Apr 2008 13:59:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8080 invoked by uid 99); 21 Apr 2008 13:59:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Apr 2008 06:59:08 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of glen.newton@gmail.com designates 209.85.198.242 as permitted sender)
Received: from [209.85.198.242] (HELO rv-out-0506.google.com) (209.85.198.242)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Apr 2008 13:58:21 +0000
Received: by rv-out-0506.google.com with SMTP id k29so1018472rvb.5
        for <java-user@lucene.apache.org>; Mon, 21 Apr 2008 06:58:35 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=k15ebe6nv+9bEI64ylP0mvNoPCv0yxlxSvVIG0dWHoo=;
        b=htSfhVuY09Vn/y9j0dwCLIeBCzhmlGtUeKPZJ4Fg76FL/Gr3xdXfQ/urMP7cskDjBmQI51BHwLhEnxUg8U8H+dnQ5mcaHzc+ajv50ixgMyG3kIt1aqtvrdhCSWsFaEBxCA4DvxrX3uL21/94UocNCn5081CNa9F8qOaCiQOyl9U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=POaKc3zJvDy4Ey++lt8m/DO6f5d21bGyczkP+BBpTugRqd4BNDwaNKs8kV5YVNJcf2oaMfUkvLPc6DAY8NzcV8WIw/2kEIFTsmOnrF1cCllgoFeDHR1HVhCvQff0mYNB5Yx0hmJxxKEqh/+RMBk1fXE8n3oKtk9QfcGsFxphlZY=
Received: by 10.140.136.1 with SMTP id j1mr3220866rvd.233.1208786315057;
        Mon, 21 Apr 2008 06:58:35 -0700 (PDT)
Received: by 10.140.148.19 with HTTP; Mon, 21 Apr 2008 06:58:35 -0700 (PDT)
Message-ID: <5e76f3840804210658u33009046wb2f3ded19214d08f@mail.gmail.com>
Date: Mon, 21 Apr 2008 09:58:35 -0400
From: "Glen Newton" <glen.newton@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Binding lucene instance/threads to a particular processor(or core)
In-Reply-To: <5e76f3840804210655v4e42d1a4ocfdb36f9785063c5@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <867513fe0804210002y7c0c3e02j368f77ca684ffcbc@mail.gmail.com>
	 <441650.63543.qm@web65413.mail.ac4.yahoo.com>
	 <5e76f3840804210655v4e42d1a4ocfdb36f9785063c5@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

And this discussion on bound threads may also shed light on things:
http://coding.derkeiler.com/Archive/Java/comp.lang.java.programmer/2007-11/msg02801.html

-Glen

On 21/04/2008, Glen Newton <glen.newton@gmail.com> wrote:
> BInding threads to processors - in many situations - improves
>  throughput by reducing memory overhead. When a thread is running on a
>  core, its state is local; if it is timeshared-out and either 1)
>  swapped back in on the same core, it is likely that there will be  the
>  core's L1 cache; or 2) onto another core, there will not be a cache
>  hit and the state will have to be fetched from L2 or main memory,
>  incurring a performance hit, esp in the latter. See Lundberg, L. 1997.
>  Evaluating the Performance Implications of Binding Threads to
>  Processors. 393.http://ieeexplore.ieee.org/iel3/5020/13768/00634520.pdf
>  for more info.
>
>  If you are using JVM on Solaris on SPARC, you should take a look at
>  the following links for tuning (the Sun JVM on Solaris SPARC has many
>  more performance tuning parameters available), including threading:
>  - http://java.sun.com/docs/hotspot/threads/threads.html
>  - http://java.sun.com/j2se/1.5.0/docs/guide/vm/thread-priorities.html
>  - http://www-1.ibm.com/support/docview.wss?rs=180&context=SSEQTP&uid=swg21107291
>  - http://java.sun.com/javase/technologies/performance.jsp
>
>
>  -Glen
>
>
>
>
>
>
>
>  On 21/04/2008, Ulf Dittmer <udittmer@yahoo.com> wrote:
>  > This sounds odd. Why would restricting it to a single
>  >  core improve performance? The point of using multiple
>  >  cores (and multiple threads) is to improve performance
>  >  isn't it? I'd leave thread scheduling decisions to the
>  >  JVM. Plus, I don't think there is anything in Java to
>  >  facilitate this (short of using JNI).
>  >
>  >  Are you talking about indexing or searching? You may
>  >  be able to use multiple parallel threads to improve
>  >  indexing performance. I don't think Lucene uses
>  >  multi-threading for searching; not unless you have
>  >  multiple indices, anyway.
>  >
>  >  Ulf
>  >
>  >
>  >
>  >  --- Anshum <anshumg@gmail.com> wrote:
>  >
>  >  > Hi,
>  >  >
>  >  > I have been trying to bind my lucene instance (JVM -
>  >  > Sun Hotspot*) to a
>  >  > particular core so as to improve the performance. Is
>  >  > there a way to do so or
>  >  > is there support in lucene to explicitly control the
>  >  > thread - processor
>  >  > linkup?
>  >  >
>  >  > --
>  >  > --
>  >  > The facts expressed here belong to everybody, the
>  >  > opinions to me.
>  >  > The distinction is yours to draw............
>  >  >
>  >
>  >
>  >
>  >
>  >       ____________________________________________________________________________________
>  >  Be a better friend, newshound, and
>  >  know-it-all with Yahoo! Mobile.  Try it now.  http://mobile.yahoo.com/;_ylt=Ahu06i62sR8HDtDypao8Wcj9tAcJ
>  >
>  >  ---------------------------------------------------------------------
>  >  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  >  For additional commands, e-mail: java-user-help@lucene.apache.org
>  >
>  >
>
>
>
> --
>
>  -
>


-- 

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33721-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 21 14:22:12 2008
Return-Path: <java-user-return-33721-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97147 invoked from network); 21 Apr 2008 14:22:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Apr 2008 14:22:12 -0000
Received: (qmail 42692 invoked by uid 500); 21 Apr 2008 14:22:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42659 invoked by uid 500); 21 Apr 2008 14:22:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42644 invoked by uid 99); 21 Apr 2008 14:22:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Apr 2008 07:22:05 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of glen.newton@gmail.com designates 209.85.162.178 as permitted sender)
Received: from [209.85.162.178] (HELO el-out-1112.google.com) (209.85.162.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Apr 2008 14:21:18 +0000
Received: by el-out-1112.google.com with SMTP id z25so489888ele.15
        for <java-user@lucene.apache.org>; Mon, 21 Apr 2008 07:21:30 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=cuLKak44l9RVrZq2+uHUJVbckqGZvSwFYj9UkDOYWXo=;
        b=YXS7dpr4Q4RkaOpu9Bmi2ejDkfyweXhSxRXWceat2tSwUGwtA1HjbxAwQnAjpYdHnCL0QMPRZGG4u9NClvnfZ8BzI2Gf6evUwURBMjyt4wExvF0t9x1t/nLnDV0/kjbUoIgNwRToB1dIIufTJ+LSG8ndm1Azgl6VprAl+YWwgfc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=asM61JCPMWQmHCcOXgh/z+HXYUaFKOfcGJXnxknKnowOO6OYcMy/+TBQ613sBtyXwvGBdGT/AeyPUP7DpTwV2KlocGwJynFHWTnjFODuyoIWA6RX3bmfR0KTZTi0L+Hzvi4MHqfiVBZyrkALp20HywUWdwyfxAw3DEliUH1c/h0=
Received: by 10.141.87.13 with SMTP id p13mr3252474rvl.163.1208787689926;
        Mon, 21 Apr 2008 07:21:29 -0700 (PDT)
Received: by 10.140.148.19 with HTTP; Mon, 21 Apr 2008 07:21:29 -0700 (PDT)
Message-ID: <5e76f3840804210721t655cfa80h679c63e42d4b773f@mail.gmail.com>
Date: Mon, 21 Apr 2008 10:21:29 -0400
From: "Glen Newton" <glen.newton@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Binding lucene instance/threads to a particular processor(or core)
In-Reply-To: <5e76f3840804210658u33009046wb2f3ded19214d08f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline
References: <867513fe0804210002y7c0c3e02j368f77ca684ffcbc@mail.gmail.com>
	 <441650.63543.qm@web65413.mail.ac4.yahoo.com>
	 <5e76f3840804210655v4e42d1a4ocfdb36f9785063c5@mail.gmail.com>
	 <5e76f3840804210658u33009046wb2f3ded19214d08f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

SSByZWFsaXNlZCB0aGF0IG5vdCBldmVyeW9uZSBvbiB0aGlzIGxpc3QgbWlnaHQgYmUgYWJsZSB0
byBhY2Nlc3MgdGhlCklFRUUgcGFwZXIgSSBwb2ludGVkLW91dCwgc28gSSB3aWxsIGluY2x1ZGUg
dGhlIGFic3RyYWN0IGFuZCBzb21lCnBhcmFncmFwaHMgZnJvbSB0aGUgcGFwZXIgd2hpY2ggSSBo
YXZlIGluY2x1ZGVkIGJlbG93LgoKQWxzbyBvZiBpbnRlcmVzdCAoYW5kIHNob3VsZCBiZSBhdmFp
bGFibGUgdG8gYWxsKTogRmVkb3JvdmEgZXQgYWwuCjIwMDUuIFBlcmZvcm1hbmNlIG9mIE11bHRp
dGhyZWFkZWQgQ2hpcCBNdWx0aXByb2Nlc3NvcnMgQW5kCkltcGxpY2F0aW9ucyBGb3IgT3BlcmF0
aW5nIFN5c3RlbSBEZXNpZ24uIFVzZW5peCAyMDA1LgpodHRwOi8vd3d3LmVlY3MuaGFydmFyZC5l
ZHUvbWFyZ28vcGFwZXJzL3VzZW5peDA1L3BhcGVyLnBkZgoiQWJzdHJhY3Q6IFdlIGludmVzdGln
YXRlZCBob3cgb3BlcmF0aW5nIHN5c3RlbSBkZXNpZ24gc2hvdWxkIGJlCmFkYXB0ZWQgZm9yIG11
bHRpdGhyZWFkZWQgY2hpcCBtdWx0aXByb2Nlc3NvcnMgKENNVCkg4oCTIGEgbmV3CmdlbmVyYXRp
b24gb2YgcHJvY2Vzc29ycyB0aGF0IGV4cGxvaXQgdGhyZWFkLWxldmVsIHBhcmFsbGVsaXNtIHRv
IG1hc2sKdGhlIG1lbW9yeSBsYXRlbmN5IGluIG1vZGVybiB3b3JrbG9hZHMuIFdlCmRldGVybWlu
ZWQgdGhhdCB0aGUgTDIgY2FjaGUgaXMgYSBjcml0aWNhbCBzaGFyZWQgcmVzb3VyY2Ugb24gQ01U
IGFuZAp0aGF0IGFuIGluc3VmZmljaWVudCBhbW91bnQgb2YgTDIgY2FjaGUgY2FuIHVuZGVybWlu
ZSB0aGUgYWJpbGl0eSB0bwpoaWRlIG1lbW9yeSBsYXRlbmN5IG9uIHRoZXNlIHByb2Nlc3NvcnMu
IFRvIHVzZSB0aGUgTDIgY2FjaGUgYXMKZWZmaWNpZW50bHkgYXMgcG9zc2libGUsIHdlIHByb3Bv
c2UgYW4gTDItY29uc2Npb3VzIHNjaGVkdWxpbmcKYWxnb3JpdGhtIGFuZCBxdWFudGlmeSBpdHMg
cGVyZm9ybWFuY2UgcG90ZW50aWFsLiBVc2luZyB0aGlzIGFsZ29yaXRobQppdCBpcyBwb3NzaWJs
ZSB0byByZWR1Y2UgbWlzcyByYXRpb3MgaW4gdGhlIEwyIGNhY2hlIGJ5IDI1LTM3JSBhbmQKaW1w
cm92ZSBwcm9jZXNzb3IgdGhyb3VnaHB1dCBieSAyNy00NSUuIgoKCkZyb20gTHVuZGJlcmcsIEwu
IDE5OTc6CkFic3RyYWN0OiAiVGhlIGRlZmF1bHQgc2NoZWR1bGluZyBhbGdvcml0aG0gaW4gU29s
YXJpcyBhbmQgb3RoZXIKb3BlcmF0aW5nIHN5c3RlbXMgbWF5IHJlc3VsdCBpbiBmcmVxdWVudCBy
ZWxvY2F0aW9uIG9mIHRocmVhZHMgYXQKcnVuLXRpbWUuIEV4Y2Vzc2l2ZSB0aHJlYWQgcmVsb2Nh
dGlvbiBjYXVzZQpwb29yIG1lbW9yeSBwZXJmb3JtYW5jZS4gVGhpcyBjYW4gYmUgYXZvaWRlZCBi
eSBiaW5kaW5nIHRocmVhZHMgdG8KcHJvY2Vzc29ycy4gSG93ZXZlciwgYmluZGluZyB0aHJlYWRz
IHRvIHByb2Nlc3NvcnMgbWF5IHJlc3VsdCBpbiBhbgp1bmJhbGFuY2VkIGxvYWQuIEJ5IGNvbnNp
ZGVyaW5nIGEgcHJldmlvdXNseSBvYnRhaW5lZCB0aGVvcmV0aWNhbApyZXN1bHQgYW5kIGJ5IGV2
YWx1YXRpbmcgYSBzZXQgb2YgbXVsdGl0aHJlYWRlZCBTb2xhcmlzCnByb2dyYW1zIHVzaW5nIGEg
bXVsdGlwcm9jZXNzb3Igd2l0aCA4IHByb2Nlc3NvcnMsIHdlIGFyZSBhYmxlIHRvCmJvdW5kIHRo
ZSBtYXhpbXVtIHBlcmZvcm1hbmNlIGxvc3MgZHVlIHRvIGJpbmRpbmcgdGhyZWFkcywgVGhlCnRo
ZW9yZXRpY2FsIHJlc3VsdCBpcyBhbHNvIHJlY2FwaXR1bGF0ZWQuIEJ5IGV2YWx1YXRpbmcgYW5v
dGhlciBzZXQgb2YKbXVsdGl0aHJlYWRlZCBwcm9ncmFtcywgd2Ugc2hvdyB0aGF0IHRoZSBnYWlu
IG9mIGJpbmRpbmcgdGhyZWFkcyB0bwpwcm9jZXNzb3JzIG1heSBiZSBzdWJzdGFudGlhbCwgcGFy
dGljdWxhcmx5IGZvciBwcm9ncmFtcyB3aXRoIGZpbmUKZ3JhaW5lZCBwYXJhbGxlbGlzbS4iCgpG
aXJzdCBwYXJhZ3JhcGg6ICJUaGUgdGhyZWFkIGNvbmNlcHQgaW4gU29sYXJpcyBbM11bNV0gYW5k
IG90aGVyCm9wZXJhdGluZyBzeXN0ZW1zIG1ha2VzIGl0IHBvc3NpYmxlIHRvIHdyaXRlIG11bHRp
dGhyZWFkZWQgcHJvZ3JhbXMsCndoaWNoIGNhbiBiZSBleGVjdXRlZCBpbiBwYXJhbGxlbCBvbiBh
IG11bHRpcHJvY2Vzc29yLiBQcmV2aW91cwpleHBlcmllbmNlIGZyb20gcmVhbCB3b3JsZCBwcm9n
cmFtcyBbNF0gc2hvdyB0aGF0LCB1c2luZyB0aGUgZGVmYXVsdApzY2hlZHVsaW5nIGFsZ29yaXRo
bSBpbiBTb2xhcmlzLCB0aHJlYWRzIGFyZSBmcmVxdWVudGx5IHJlbG9jYXRlZCBmcm9tCm9uZSBw
cm9jZXNzb3IKdG8gYW5vdGhlciBhdCBydW4tdGltZS4gQWZ0ZXIgZWFjaCBzdWNoIHJlbG9jYXRp
b24sIHRoZSBjb2RlIGFuZCBkYXRhCmFzc29jaWF0ZWQgd2l0aCB0aGUgcmVsb2NhdGVkIHRocmVh
ZCBpcyBtb3ZlZCBmcm9tIHRoZSBjYWNoZSBtZW1vcnkgb2YKdGhlIDAxMTMgcHJvY2Vzc29yIHRv
IHRoZSBjYWNoZSBvZiB0aGUgbmV3IHByb2Nlc3Nvci4gVGhpcyByZWR1Y2VzIHRoZQpwZXJmb3Jt
YW5jZS4gUnVuLXRpbWUgcmVsb2NhdGlvbiBvZiB0aHJlYWRzIHRvIHByb2Nlc3NvcnMgY2FuIGFs
c28KcmVzdWx0IGluIHVucHJlZGljdGFibGUgcmVzcG9uc2UgdGltZXMuIFRoaXMgaXMgYSBwcm9i
bGVtIGluIHN5c3RlbXMKd2hpY2ggb3BlcmF0ZSBpbiBhIHJlYWwtdGltZSBlbnZpcm9ubWVudC4g
SW4gb3JkZXIgdG8gYXZvaWQgcG9vcgptZW1vcnkgcGVyZm9ybWFuY2UgYW5kIHVucHJlZGljdGFi
bGUgcmVhbC10aW1lIGJlaGF2aW91ciBkdWUgdG8KZnJlcXVlbnQgdGhyZWFkIHJlbG9jYXRpb24s
IHRocmVhZHMgY2FuIGJlIGJvdW5kIHRvIHByb2Nlc3NvcnMgdXNpbmcKdGhlIHByb2Nlc3Nvci1i
aW5kIGRpcmVjdGl2ZSBbM10gWzVdLiBUaGUgbWFqb3IgcHJvYmxlbSB3aXRoIGJpbmRpbmcKdGhy
ZWFkcyBpcyB0aGF0IG9uZSBjYW4gZW5kIHVwIHdpdGggYW4gdW5iYWxhbmNlZCBsb2FkLCBpLmUu
IHNvbWUKcHJvY2Vzc29ycyBtYXkgYmUgZXh0cmVtZWx5IGJ1c3kgZHVyaW5nIHNvbWUgdGltZSBw
ZXJpb2RzIHdoaWxlIG90aGVyCnByb2Nlc3NvcnMgYXJlIGlkbGUuIgoKLUdsZW4KCk9uIDIxLzA0
LzIwMDgsIEdsZW4gTmV3dG9uIDxnbGVuLm5ld3RvbkBnbWFpbC5jb20+IHdyb3RlOgo+IEFuZCB0
aGlzIGRpc2N1c3Npb24gb24gYm91bmQgdGhyZWFkcyBtYXkgYWxzbyBzaGVkIGxpZ2h0IG9uIHRo
aW5nczoKPiAgaHR0cDovL2NvZGluZy5kZXJrZWlsZXIuY29tL0FyY2hpdmUvSmF2YS9jb21wLmxh
bmcuamF2YS5wcm9ncmFtbWVyLzIwMDctMTEvbXNnMDI4MDEuaHRtbAo+Cj4KPiAgLUdsZW4KPgo+
Cj4gIE9uIDIxLzA0LzIwMDgsIEdsZW4gTmV3dG9uIDxnbGVuLm5ld3RvbkBnbWFpbC5jb20+IHdy
b3RlOgo+ICA+IEJJbmRpbmcgdGhyZWFkcyB0byBwcm9jZXNzb3JzIC0gaW4gbWFueSBzaXR1YXRp
b25zIC0gaW1wcm92ZXMKPiAgPiAgdGhyb3VnaHB1dCBieSByZWR1Y2luZyBtZW1vcnkgb3Zlcmhl
YWQuIFdoZW4gYSB0aHJlYWQgaXMgcnVubmluZyBvbiBhCj4gID4gIGNvcmUsIGl0cyBzdGF0ZSBp
cyBsb2NhbDsgaWYgaXQgaXMgdGltZXNoYXJlZC1vdXQgYW5kIGVpdGhlciAxKQo+ICA+ICBzd2Fw
cGVkIGJhY2sgaW4gb24gdGhlIHNhbWUgY29yZSwgaXQgaXMgbGlrZWx5IHRoYXQgdGhlcmUgd2ls
bCBiZSAgdGhlCj4gID4gIGNvcmUncyBMMSBjYWNoZTsgb3IgMikgb250byBhbm90aGVyIGNvcmUs
IHRoZXJlIHdpbGwgbm90IGJlIGEgY2FjaGUKPiAgPiAgaGl0IGFuZCB0aGUgc3RhdGUgd2lsbCBo
YXZlIHRvIGJlIGZldGNoZWQgZnJvbSBMMiBvciBtYWluIG1lbW9yeSwKPiAgPiAgaW5jdXJyaW5n
IGEgcGVyZm9ybWFuY2UgaGl0LCBlc3AgaW4gdGhlIGxhdHRlci4gU2VlIEx1bmRiZXJnLCBMLiAx
OTk3Lgo+ICA+ICBFdmFsdWF0aW5nIHRoZSBQZXJmb3JtYW5jZSBJbXBsaWNhdGlvbnMgb2YgQmlu
ZGluZyBUaHJlYWRzIHRvCj4gID4gIFByb2Nlc3NvcnMuIDM5My5odHRwOi8vaWVlZXhwbG9yZS5p
ZWVlLm9yZy9pZWwzLzUwMjAvMTM3NjgvMDA2MzQ1MjAucGRmCj4gID4gIGZvciBtb3JlIGluZm8u
Cj4gID4KPiAgPiAgSWYgeW91IGFyZSB1c2luZyBKVk0gb24gU29sYXJpcyBvbiBTUEFSQywgeW91
IHNob3VsZCB0YWtlIGEgbG9vayBhdAo+ICA+ICB0aGUgZm9sbG93aW5nIGxpbmtzIGZvciB0dW5p
bmcgKHRoZSBTdW4gSlZNIG9uIFNvbGFyaXMgU1BBUkMgaGFzIG1hbnkKPiAgPiAgbW9yZSBwZXJm
b3JtYW5jZSB0dW5pbmcgcGFyYW1ldGVycyBhdmFpbGFibGUpLCBpbmNsdWRpbmcgdGhyZWFkaW5n
Ogo+ICA+ICAtIGh0dHA6Ly9qYXZhLnN1bi5jb20vZG9jcy9ob3RzcG90L3RocmVhZHMvdGhyZWFk
cy5odG1sCj4gID4gIC0gaHR0cDovL2phdmEuc3VuLmNvbS9qMnNlLzEuNS4wL2RvY3MvZ3VpZGUv
dm0vdGhyZWFkLXByaW9yaXRpZXMuaHRtbAo+ICA+ICAtIGh0dHA6Ly93d3ctMS5pYm0uY29tL3N1
cHBvcnQvZG9jdmlldy53c3M/cnM9MTgwJmNvbnRleHQ9U1NFUVRQJnVpZD1zd2cyMTEwNzI5MQo+
ICA+ICAtIGh0dHA6Ly9qYXZhLnN1bi5jb20vamF2YXNlL3RlY2hub2xvZ2llcy9wZXJmb3JtYW5j
ZS5qc3AKPiAgPgo+ICA+Cj4gID4gIC1HbGVuCj4gID4KPiAgPgo+ICA+Cj4gID4KPiAgPgo+ICA+
Cj4gID4KPiAgPiAgT24gMjEvMDQvMjAwOCwgVWxmIERpdHRtZXIgPHVkaXR0bWVyQHlhaG9vLmNv
bT4gd3JvdGU6Cj4gID4gID4gVGhpcyBzb3VuZHMgb2RkLiBXaHkgd291bGQgcmVzdHJpY3Rpbmcg
aXQgdG8gYSBzaW5nbGUKPiAgPiAgPiAgY29yZSBpbXByb3ZlIHBlcmZvcm1hbmNlPyBUaGUgcG9p
bnQgb2YgdXNpbmcgbXVsdGlwbGUKPiAgPiAgPiAgY29yZXMgKGFuZCBtdWx0aXBsZSB0aHJlYWRz
KSBpcyB0byBpbXByb3ZlIHBlcmZvcm1hbmNlCj4gID4gID4gIGlzbid0IGl0PyBJJ2QgbGVhdmUg
dGhyZWFkIHNjaGVkdWxpbmcgZGVjaXNpb25zIHRvIHRoZQo+ICA+ICA+ICBKVk0uIFBsdXMsIEkg
ZG9uJ3QgdGhpbmsgdGhlcmUgaXMgYW55dGhpbmcgaW4gSmF2YSB0bwo+ICA+ICA+ICBmYWNpbGl0
YXRlIHRoaXMgKHNob3J0IG9mIHVzaW5nIEpOSSkuCj4gID4gID4KPiAgPiAgPiAgQXJlIHlvdSB0
YWxraW5nIGFib3V0IGluZGV4aW5nIG9yIHNlYXJjaGluZz8gWW91IG1heQo+ICA+ICA+ICBiZSBh
YmxlIHRvIHVzZSBtdWx0aXBsZSBwYXJhbGxlbCB0aHJlYWRzIHRvIGltcHJvdmUKPiAgPiAgPiAg
aW5kZXhpbmcgcGVyZm9ybWFuY2UuIEkgZG9uJ3QgdGhpbmsgTHVjZW5lIHVzZXMKPiAgPiAgPiAg
bXVsdGktdGhyZWFkaW5nIGZvciBzZWFyY2hpbmc7IG5vdCB1bmxlc3MgeW91IGhhdmUKPiAgPiAg
PiAgbXVsdGlwbGUgaW5kaWNlcywgYW55d2F5Lgo+ICA+ICA+Cj4gID4gID4gIFVsZgo+ICA+ICA+
Cj4gID4gID4KPiAgPiAgPgo+ICA+ICA+ICAtLS0gQW5zaHVtIDxhbnNodW1nQGdtYWlsLmNvbT4g
d3JvdGU6Cj4gID4gID4KPiAgPiAgPiAgPiBIaSwKPiAgPiAgPiAgPgo+ICA+ICA+ICA+IEkgaGF2
ZSBiZWVuIHRyeWluZyB0byBiaW5kIG15IGx1Y2VuZSBpbnN0YW5jZSAoSlZNIC0KPiAgPiAgPiAg
PiBTdW4gSG90c3BvdCopIHRvIGEKPiAgPiAgPiAgPiBwYXJ0aWN1bGFyIGNvcmUgc28gYXMgdG8g
aW1wcm92ZSB0aGUgcGVyZm9ybWFuY2UuIElzCj4gID4gID4gID4gdGhlcmUgYSB3YXkgdG8gZG8g
c28gb3IKPiAgPiAgPiAgPiBpcyB0aGVyZSBzdXBwb3J0IGluIGx1Y2VuZSB0byBleHBsaWNpdGx5
IGNvbnRyb2wgdGhlCj4gID4gID4gID4gdGhyZWFkIC0gcHJvY2Vzc29yCj4gID4gID4gID4gbGlu
a3VwPwo+ICA+ICA+ICA+Cj4gID4gID4gID4gLS0KPiAgPiAgPiAgPiAtLQo+ICA+ICA+ICA+IFRo
ZSBmYWN0cyBleHByZXNzZWQgaGVyZSBiZWxvbmcgdG8gZXZlcnlib2R5LCB0aGUKPiAgPiAgPiAg
PiBvcGluaW9ucyB0byBtZS4KPiAgPiAgPiAgPiBUaGUgZGlzdGluY3Rpb24gaXMgeW91cnMgdG8g
ZHJhdy4uLi4uLi4uLi4uLgo+ICA+ICA+ICA+Cj4gID4gID4KPiAgPiAgPgo+ICA+ICA+Cj4gID4g
ID4KPiAgPiAgPiAgICAgICBfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KPiAgPiAgPiAgQmUg
YSBiZXR0ZXIgZnJpZW5kLCBuZXdzaG91bmQsIGFuZAo+ICA+ICA+ICBrbm93LWl0LWFsbCB3aXRo
IFlhaG9vISBNb2JpbGUuICBUcnkgaXQgbm93LiAgaHR0cDovL21vYmlsZS55YWhvby5jb20vO195
bHQ9QWh1MDZpNjJzUjhIRHREeXBhbzhXY2o5dEFjSgo+ICA+ICA+Cj4gID4gID4gIC0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLQo+ICA+ICA+ICBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3Jp
YmVAbHVjZW5lLmFwYWNoZS5vcmcKPiAgPiAgPiAgRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUt
bWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcKPiAgPiAgPgo+ICA+ICA+Cj4g
ID4KPiAgPgo+ICA+Cj4gID4gLS0KPiAgPgo+ICA+ICAtCj4gID4KPgo+Cj4KPiAtLQo+Cj4gIC0K
PgoKCi0tIAoKLQo=


From java-user-return-33722-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 21 20:08:19 2008
Return-Path: <java-user-return-33722-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90718 invoked from network); 21 Apr 2008 20:08:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Apr 2008 20:08:19 -0000
Received: (qmail 49736 invoked by uid 500); 21 Apr 2008 20:08:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49715 invoked by uid 500); 21 Apr 2008 20:08:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49704 invoked by uid 99); 21 Apr 2008 20:08:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Apr 2008 13:08:12 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ssmith@mainstreamdata.com designates 209.63.42.201 as permitted sender)
Received: from [209.63.42.201] (HELO nexus1.mainstreamdata.com) (209.63.42.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Apr 2008 20:07:29 +0000
Received: from localhost (localhost [127.0.0.1])
	by nexus1.mainstreamdata.com (Postfix) with ESMTP id 85A1E45009
	for <java-user@lucene.apache.org>; Mon, 21 Apr 2008 14:07:42 -0600 (MDT)
X-Virus-Scanned: Debian amavisd-new at nexus1.mainstreamdata.com
Received: from nexus1.mainstreamdata.com ([127.0.0.1])
	by localhost (nexus1.mainstreamdata.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id IGB-A+Iaf+i9 for <java-user@lucene.apache.org>;
	Mon, 21 Apr 2008 14:07:36 -0600 (MDT)
Received: from exchange.slc.mainstreamdata.com (exchange.slc.mainstreamdata.com [10.2.1.132])
	by nexus1.mainstreamdata.com (Postfix) with ESMTP id 6880C4500A
	for <java-user@lucene.apache.org>; Mon, 21 Apr 2008 14:07:36 -0600 (MDT)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Highlighting phrases
Date: Mon, 21 Apr 2008 14:07:35 -0600
Message-ID: <55F9EF953014514EB6BEE1F5198CEEB402B87ECB@exchange.slc.mainstreamdata.com>
In-Reply-To: <1208742583.6348.15.camel@m-laptop>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Highlighting phrases
Thread-Index: AcijUhZBdx1z3tQ0TTWnM8qR+R4LdgAmCgQw
References: <55F9EF953014514EB6BEE1F5198CEEB402BBD281@exchange.slc.mainstreamdata.com> <1208742583.6348.15.camel@m-laptop>
From: "Scott Smith" <ssmith@mainstreamdata.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

And a well deserved beer it would be...

Thanks

Scott

-----Original Message-----
From: Mark Miller [mailto:markrmiller@gmail.com]=20
Sent: Sunday, April 20, 2008 7:50 PM
To: java-user@lucene.apache.org
Subject: Re: Highlighting phrases

https://issues.apache.org/jira/browse/LUCENE-794

Because its for a customer, that will be 1 beer...

On Sun, 2008-04-20 at 17:12 -0600, Scott Smith wrote:
> I've written some code to highlight items from a search using the
standard Highlighter class, QueryScorer, and NullFragmenter.  Everything
works fine except when we do phrases.  If I search for "fred smith"
(with the quotes), it highlights any instances of "fred smith" just as
expected.  However, it also highlights the word "fred" and the word
"smith" any place they appear.  Is this the expected behavior?   Can
someone point me to where I can change this behavior since it's a big
deal to my customer (he only wants entire phrases highlighted)?
> =20
> thanks
> =20
> Scott
> =20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33723-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 21 21:25:26 2008
Return-Path: <java-user-return-33723-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35314 invoked from network); 21 Apr 2008 21:25:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Apr 2008 21:25:26 -0000
Received: (qmail 83775 invoked by uid 500); 21 Apr 2008 21:25:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83745 invoked by uid 500); 21 Apr 2008 21:25:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83734 invoked by uid 99); 21 Apr 2008 21:25:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Apr 2008 14:25:19 -0700
X-ASF-Spam-Status: No, hits=3.9 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_PASS,WEIRD_PORT
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of stuhood@mailtrust.com designates 207.97.245.111 as permitted sender)
Received: from [207.97.245.111] (HELO smtp111.iad.emailsrvr.com) (207.97.245.111)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Apr 2008 21:24:23 +0000
Received: from relay1.r1.iad.emailsrvr.com (localhost [127.0.0.1])
	by relay1.r1.iad.emailsrvr.com (SMTP Server) with ESMTP id 5EA9D44C1BC
	for <java-user@lucene.apache.org>; Mon, 21 Apr 2008 17:24:43 -0400 (EDT)
Received: from webmail10.webmail.iad.mlsrvr.com (webmail10.webmail.iad.mlsrvr.com [192.168.1.107])
	by relay1.r1.iad.emailsrvr.com (SMTP Server) with ESMTP id 5A5C144C1B9
	for <java-user@lucene.apache.org>; Mon, 21 Apr 2008 17:24:43 -0400 (EDT)
Received: from mailtrust.com (localhost [127.0.0.1])
	by webmail10.webmail.iad.mlsrvr.com (Postfix) with ESMTP id 489A396C0CB
	for <java-user@lucene.apache.org>; Mon, 21 Apr 2008 17:24:43 -0400 (EDT)
Received: by beta.mailtrust.com
    (Authenticated sender: stuhood@mailtrust.com, from: stuhood@mailtrust.com) 
    with HTTP; Mon, 21 Apr 2008 17:24:43 -0400 (EDT)
Date: Mon, 21 Apr 2008 17:24:43 -0400 (EDT)
Subject: =?UTF-8?Q?FW:=20Re:=20Occasional=20Hang=20in=20IndexWriter.close()?=
From: "Stu Hood" <stuhood@mailtrust.com>
To: java-user@lucene.apache.org
Reply-To: stuhood@mailtrust.com
MIME-Version: 1.0
Content-Type: text/plain;charset=UTF-8
Content-Transfer-Encoding: quoted-printable
Importance: Normal
X-Priority: 3 (Normal)
X-Type: plain
Message-ID: <42657.192.168.1.71.1208813083.webmail@192.168.1.71>
X-Mailer: webmail6.6.1
X-Virus-Checked: Checked by ClamAV on apache.org

Hey gang,=0A=0AThe finally block was not hiding any exceptions: I'm still s=
eeing the hangs in IndexWriter.close(). I'm appending the relevant output f=
rom 'setInfoStream(System.out)'. It looks like after I order the close, the=
 IndexWriter begins a flush, and then hangs.=0A=0AAny ideas?=0A=0AThanks,=
=0AStu=0A=0A=0A>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>=
>>>>>>>>>>>>>>>>=0A=0A=0AIFD [main]: setInfoStream deletionPolicy=3Dorg.apa=
che.lucene.index.KeepOnlyLastCommitDeletionPolicy@18bbc5a=0AIW 0 [main]: se=
tInfoStream: dir=3Dorg.apache.lucene.store.FSDirectory@/data1/solr/solr_dov=
ecot1208772000-1208808000_f0cad01b1cb2966a/index autoCommit=3Dtrue mergePol=
icy=3Dorg.apache.lucene.index.LogByteSizeMergePolicy@facf0b mergeScheduler=
=3Dorg.apache.lucene.index.ConcurrentMergeScheduler@2f0df1 ramBufferSizeMB=
=3D16.0 maxBuffereDocs=3D-1 maxBuffereDeleteTerms=3D-1 maxFieldLength=3D100=
00 index=3D_dn:C1349678 _j6:C1149270 _j5:C249194 _m4:C242243 _mf:C224430 _m=
k:C70616 _ml:C88 _mp:C50000 _mo:C9905=0AIW 0 [main]: setMergeScheduler org.=
apache.lucene.index.SerialMergeScheduler@13c6a22=0A>> Fetching hdfs://hadoo=
p.sat.mlsrvr.com:54310/user/hadoopuser/indexed/dovecot/1208807515-120880814=
5-1208808184/part-00004 into a RAMDirectory:=0A>> .. done. Size: 22053888=
=0A>> Merging directories to solr_dovecot1208772000-1208808000_f0cad01b1cb2=
966a (factor: 4):=0AIW 0 [main]: flush at addIndexesNoOptimize=0AIW 0 [main=
]:   flush: segment=3Dnull docStoreSegment=3Dnull docStoreOffset=3D0 flushD=
ocs=3Dfalse flushDeletes=3Dfalse flushDocStores=3Dfalse numDocs=3D0 numBufD=
elTerms=3D0=0AIW 0 [main]:   index before flush _dn:C1349678 _j6:C1149270 _=
j5:C249194 _m4:C242243 _mf:C224430 _mk:C70616 _ml:C88 _mp:C50000 _mo:C9905=
=0AIW 0 [main]: now start transaction=0AIW 0 [main]: flush at startTransact=
ion=0AIW 0 [main]:   flush: segment=3Dnull docStoreSegment=3Dnull docStoreO=
ffset=3D0 flushDocs=3Dfalse flushDeletes=3Dfalse flushDocStores=3Dfalse num=
Docs=3D0 numBufDelTerms=3D0=0AIW 0 [main]:   index before flush _dn:C134967=
8 _j6:C1149270 _j5:C249194 _m4:C242243 _mf:C224430 _mk:C70616 _ml:C88 _mp:C=
50000 _mo:C9905=0AIW 0 [main]: LMP: findMerges: 20 segments=0AIW 0 [main]: =
LMP:   level 13.601146 to 14.351146: 2 segments=0AIW 0 [main]: LMP:   level=
 12.390487 to 13.140487: 3 segments=0AIW 0 [main]: LMP:   level 11.542906 t=
o 12.292906: 3 segments=0AIW 0 [main]: LMP:   level 10.656786 to 11.406786:=
 2 segments=0AIW 0 [main]: LMP:   level -1.0 to 8.768208: 10 segments=0AIW =
0 [main]: LMP:     10 to 14: add this merge=0AIW 0 [main]: LMP:     14 to 1=
8: add this merge=0AIW 0 [main]: add merge to pendingMerges: _1f:Cx1000->_0=
 _1g:Cx1000->_0 _1h:Cx1000->_0 _1i:Cx1000->_0 [total 1 pending]=0AIW 0 [mai=
n]: add merge to pendingMerges: _1j:Cx1000->_0 _1k:Cx1000->_0 _1l:Cx1000->_=
0 _1m:Cx1000->_0 [total 2 pending]=0AIW 0 [main]: now merge=0A merge=3D_1f:=
Cx1000->_0 _1g:Cx1000->_0 _1h:Cx1000->_0 _1i:Cx1000->_0 into _mq=0A index=
=3D_dn:C1349678 _j6:C1149270 _j5:C249194 _m4:C242243 _mf:C224430 _mk:C70616=
 _ml:C88 _mp:C50000 _mo:C9905 _1e:Cx50000->_0 _1f:Cx1000->_0 _1g:Cx1000->_0=
 _1h:Cx1000->_0 _1i:Cx1000->_0 _1j:Cx1000->_0 _1k:Cx1000->_0 _1l:Cx1000->_0=
 _1m:Cx1000->_0 _1n:Cx1000->_0 _1o:Cx857->_0=0AIW 0 [main]: merging _1f:Cx1=
000->_0 _1g:Cx1000->_0 _1h:Cx1000->_0 _1i:Cx1000->_0 into _mq=0AIW 0 [main]=
: merge: total 4000 docs=0AIW 0 [main]: commitMerge _1f:Cx1000->_0 _1g:Cx10=
00->_0 _1h:Cx1000->_0 _1i:Cx1000->_0 into _mq=0AIFD [main]: now checkpoint =
"segments_m" [17 segments ; isCommit =3D false]=0AIW 0 [main]: LMP: findMer=
ges: 17 segments=0AIW 0 [main]: LMP:   level 13.601146 to 14.351146: 2 segm=
ents=0AIW 0 [main]: LMP:   level 12.390487 to 13.140487: 3 segments=0AIW 0 =
[main]: LMP:   level 11.542906 to 12.292906: 3 segments=0AIW 0 [main]: LMP:=
   level 10.656786 to 11.406786: 2 segments=0AIW 0 [main]: LMP:   level -1.=
0 to 10.283832: 7 segments=0AIW 0 [main]: LMP:     10 to 14: add this merge=
=0AIW 0 [main]: now merge=0A merge=3D_1j:Cx1000->_0 _1k:Cx1000->_0 _1l:Cx10=
00->_0 _1m:Cx1000->_0 into _mr=0A index=3D_dn:C1349678 _j6:C1149270 _j5:C24=
9194 _m4:C242243 _mf:C224430 _mk:C70616 _ml:C88 _mp:C50000 _mo:C9905 _1e:Cx=
50000->_0 _mq:C4000 _1j:Cx1000->_0 _1k:Cx1000->_0 _1l:Cx1000->_0 _1m:Cx1000=
->_0 _1n:Cx1000->_0 _1o:Cx857->_0=0AIW 0 [main]: merging _1j:Cx1000->_0 _1k=
:Cx1000->_0 _1l:Cx1000->_0 _1m:Cx1000->_0 into _mr=0AIW 0 [main]: merge: to=
tal 4000 docs=0AIW 0 [main]: commitMerge _1j:Cx1000->_0 _1k:Cx1000->_0 _1l:=
Cx1000->_0 _1m:Cx1000->_0 into _mr=0AIFD [main]: now checkpoint "segments_m=
" [14 segments ; isCommit =3D false]=0AIW 0 [main]: LMP: findMerges: 14 seg=
ments=0AIW 0 [main]: LMP:   level 13.601146 to 14.351146: 2 segments=0AIW 0=
 [main]: LMP:   level 12.390487 to 13.140487: 3 segments=0AIW 0 [main]: LMP=
:   level 11.542906 to 12.292906: 3 segments=0AIW 0 [main]: LMP:   level 10=
.656786 to 11.406786: 2 segments=0AIW 0 [main]: LMP:   level -1.0 to 10.284=
627: 4 segments=0AIW 0 [main]: LMP:     10 to 14: add this merge=0AIW 0 [ma=
in]: add merge to pendingMerges: _mq:C4000 _mr:C4000 _1n:Cx1000->_0 _1o:Cx8=
57->_0 [total 1 pending]=0AIW 0 [main]: now merge=0A merge=3D_mq:C4000 _mr:=
C4000 _1n:Cx1000->_0 _1o:Cx857->_0 into _ms=0A index=3D_dn:C1349678 _j6:C11=
49270 _j5:C249194 _m4:C242243 _mf:C224430 _mk:C70616 _ml:C88 _mp:C50000 _mo=
:C9905 _1e:Cx50000->_0 _mq:C4000 _mr:C4000 _1n:Cx1000->_0 _1o:Cx857->_0=0AI=
W 0 [main]: merging _mq:C4000 _mr:C4000 _1n:Cx1000->_0 _1o:Cx857->_0 into _=
ms=0AIW 0 [main]: merge: total 9857 docs=0AIW 0 [main]: commitMerge _mq:C40=
00 _mr:C4000 _1n:Cx1000->_0 _1o:Cx857->_0 into _ms=0AIFD [main]: now checkp=
oint "segments_m" [11 segments ; isCommit =3D false]=0AIFD [main]: delete "=
_mq.fnm"=0AIFD [main]: delete "_mq.frq"=0AIFD [main]: delete "_mq.prx"=0AIF=
D [main]: delete "_mq.tis"=0AIFD [main]: delete "_mq.tii"=0AIFD [main]: del=
ete "_mq.nrm"=0AIFD [main]: delete "_mq.fdx"=0AIFD [main]: delete "_mq.fdt"=
=0AIFD [main]: delete "_mr.fnm"=0AIFD [main]: delete "_mr.frq"=0AIFD [main]=
: delete "_mr.prx"=0AIFD [main]: delete "_mr.tis"=0AIFD [main]: delete "_mr=
.tii"=0AIFD [main]: delete "_mr.nrm"=0AIFD [main]: delete "_mr.fdx"=0AIFD [=
main]: delete "_mr.fdt"=0AIW 0 [main]: LMP: findMerges: 11 segments=0AIW 0 =
[main]: LMP:   level 13.601146 to 14.351146: 2 segments=0AIW 0 [main]: LMP:=
   level 12.390487 to 13.140487: 3 segments=0AIW 0 [main]: LMP:   level 11.=
542906 to 12.292906: 3 segments=0AIW 0 [main]: LMP:   level 10.656786 to 11=
.406786: 3 segments=0AIW 0 [main]: add merge to pendingMerges: _1e:Cx50000-=
>_0 [total 1 pending]=0AIW 0 [main]: now merge=0A merge=3D_1e:Cx50000->_0 i=
nto _mt=0A index=3D_dn:C1349678 _j6:C1149270 _j5:C249194 _m4:C242243 _mf:C2=
24430 _mk:C70616 _ml:C88 _mp:C50000 _mo:C9905 _1e:Cx50000->_0 _ms:C9857=0AI=
W 0 [main]: merging _1e:Cx50000->_0 into _mt=0AIW 0 [main]: merge: total 50=
000 docs=0AIW 0 [main]: commitMerge _1e:Cx50000->_0 into _mt=0AIFD [main]: =
now checkpoint "segments_m" [11 segments ; isCommit =3D false]=0AIW 0 [main=
]: LMP: findMerges: 11 segments=0AIW 0 [main]: LMP:   level 13.601146 to 14=
.351146: 2 segments=0AIW 0 [main]: LMP:   level 12.390487 to 13.140487: 3 s=
egments=0AIW 0 [main]: LMP:   level 11.542906 to 12.292906: 5 segments=0AIW=
 0 [main]: LMP:     5 to 9: add this merge=0AIW 0 [main]: LMP:   level 10.3=
39036 to 10.916957: 1 segments=0AIW 0 [main]: add merge to pendingMerges: _=
mk:C70616 _ml:C88 _mp:C50000 _mo:C9905 [total 1 pending]=0AIW 0 [main]: now=
 commit transaction=0AIW 0 [main]: checkpoint: wrote segments file "segment=
s_n"=0AIFD [main]: now checkpoint "segments_n" [11 segments ; isCommit =3D =
true]=0AIFD [main]: deleteCommits: now remove commit "segments_m"=0AIFD [ma=
in]: delete "segments_m"=0A>> ... done.=0A>> Closing the target index...=0A=
IW 0 [main]: now flush at close=0AIW 0 [main]:   flush: segment=3Dnull docS=
toreSegment=3Dnull docStoreOffset=3D0 flushDocs=3Dfalse flushDeletes=3Dfals=
e flushDocStores=3Dfalse numDocs=3D0 numBufDelTerms=3D0=0AIW 0 [main]:   in=
dex before flush _dn:C1349678 _j6:C1149270 _j5:C249194 _m4:C242243 _mf:C224=
430 _mk:C70616 _ml:C88 _mp:C50000 _mo:C9905 _mt:C50000 _ms:C9857=0A=0A=0A=
=0A>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>=
>>>>=0A=0A=0A-----Original Message-----=0AFrom: Stu Hood <stuhood@mailtrust=
.com>=0ASent: Sunday, April 20, 2008 3:41pm=0ATo: java-user@lucene.apache.o=
rg=0ASubject: Re: Occasional Hang in IndexWriter.close()=0A=0AHey Mike,=0A=
=0AThanks for your input... the 'IndexWriter.close' call was actually in a =
'finally' block around the merge code, without a 'catch', which I realized =
may have been hiding the exception (I didn't realize close would block if a=
n exception had occurred).=0A=0AI've moved the close out of the finally blo=
ck, so hopefully if an exception was being hidden, I'll see it and report b=
ack.=0A=0AThanks,=0AStu=0A=0A=0A=0A-----Original Message-----=0AFrom: Micha=
el McCandless <lucene@mikemccandless.com>=0ASent: Saturday, April 19, 2008 =
4:40am=0ATo: java-user@lucene.apache.org, stuhood@mailtrust.com=0ASubject: =
Re: Occasional Hang in IndexWriter.close()=0A=0A=0A=0A=0A------------------=
---------------------------------------------------=0ATo unsubscribe, e-mai=
l: java-user-unsubscribe@lucene.apache.org=0AFor additional commands, e-mai=
l: java-user-help@lucene.apache.org=0A=0A


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33724-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 21 22:26:38 2008
Return-Path: <java-user-return-33724-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55270 invoked from network); 21 Apr 2008 22:26:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Apr 2008 22:26:38 -0000
Received: (qmail 59963 invoked by uid 500); 21 Apr 2008 22:26:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59933 invoked by uid 500); 21 Apr 2008 22:26:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59922 invoked by uid 99); 21 Apr 2008 22:26:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Apr 2008 15:26:30 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of adb@teamware.com designates 212.226.92.15 as permitted sender)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Apr 2008 22:25:34 +0000
Received: from intrepid.teamw.com (intrepid.teamw.com [10.142.128.11])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id m3LMPm8k020804
	for <java-user@lucene.apache.org>; Tue, 22 Apr 2008 01:25:48 +0300
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz.teamw.com with ESMTP
	 id m4m1prku; 22 Apr 2008 01:25:00 +0300
Message-ID: <480D1459.50908@teamware.com>
Date: Tue, 22 Apr 2008 08:25:29 +1000
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Binding lucene instance/threads to a particular processor(or
 core)
References: <867513fe0804210002y7c0c3e02j368f77ca684ffcbc@mail.gmail.com>	 <441650.63543.qm@web65413.mail.ac4.yahoo.com>	 <5e76f3840804210655v4e42d1a4ocfdb36f9785063c5@mail.gmail.com>	 <5e76f3840804210658u33009046wb2f3ded19214d08f@mail.gmail.com> <5e76f3840804210721t655cfa80h679c63e42d4b773f@mail.gmail.com>
In-Reply-To: <5e76f3840804210721t655cfa80h679c63e42d4b773f@mail.gmail.com>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 8bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Tue, 22 Apr 2008 01:25:48 +0300 (EEST)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0.001, required 5,
	autolearn=not spam, BAYES_50 0.00)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

That paper from 1997 is pretty old, but mirrors our experiences in those days. 
Then, we used Solaris processor sets to really improve performance by binding 
one of our processes to a particular CPU while leaving the other CPUs to manage 
the thread intensive work.

You can bind processes/LWPs to a CPU on Solaris with psrset.

The Solaris thread model in the late '90s was also a significant factor in 
performance of multi-threaded programs.  The default thread library in Solaris 8 
implemented a MxN unbound thread model (threads/LWPS).  In those days we found 
that it did not perform well, so used the bound thread model (i.e. 1:1) where a 
Solaris thread was bound permanently to an LWP.  That improved performance a 
lot.  In Solaris 8, Sun had what they called the 'alternate' thread library (T2) 
around 2000, which became the default library in Solaris 9, and implemented a 
1:1 model of Solaris threads to LWPs.  That new library had dramatic performance 
improvements over the old.

Some background info for Java and threading

http://java.sun.com/j2se/1.5.0/docs/guide/vm/thread-priorities.html

Antony


Glen Newton wrote:
> I realised that not everyone on this list might be able to access the
> IEEE paper I pointed-out, so I will include the abstract and some
> paragraphs from the paper which I have included below.
> 
> Also of interest (and should be available to all): Fedorova et al.
> 2005. Performance of Multithreaded Chip Multiprocessors And
> Implications For Operating System Design. Usenix 2005.
> http://www.eecs.harvard.edu/margo/papers/usenix05/paper.pdf
> "Abstract: We investigated how operating system design should be
> adapted for multithreaded chip multiprocessors (CMT)  a new
> generation of processors that exploit thread-level parallelism to mask
> the memory latency in modern workloads. We
> determined that the L2 cache is a critical shared resource on CMT and
> that an insufficient amount of L2 cache can undermine the ability to
> hide memory latency on these processors. To use the L2 cache as
> efficiently as possible, we propose an L2-conscious scheduling
> algorithm and quantify its performance potential. Using this algorithm
> it is possible to reduce miss ratios in the L2 cache by 25-37% and
> improve processor throughput by 27-45%."
> 
> 
> From Lundberg, L. 1997:
> Abstract: "The default scheduling algorithm in Solaris and other
> operating systems may result in frequent relocation of threads at
> run-time. Excessive thread relocation cause
> poor memory performance. This can be avoided by binding threads to
> processors. However, binding threads to processors may result in an
> unbalanced load. By considering a previously obtained theoretical
> result and by evaluating a set of multithreaded Solaris
> programs using a multiprocessor with 8 processors, we are able to
> bound the maximum performance loss due to binding threads, The
> theoretical result is also recapitulated. By evaluating another set of
> multithreaded programs, we show that the gain of binding threads to
> processors may be substantial, particularly for programs with fine
> grained parallelism."
> 
> First paragraph: "The thread concept in Solaris [3][5] and other
> operating systems makes it possible to write multithreaded programs,
> which can be executed in parallel on a multiprocessor. Previous
> experience from real world programs [4] show that, using the default
> scheduling algorithm in Solaris, threads are frequently relocated from
> one processor
> to another at run-time. After each such relocation, the code and data
> associated with the relocated thread is moved from the cache memory of
> the 0113 processor to the cache of the new processor. This reduces the
> performance. Run-time relocation of threads to processors can also
> result in unpredictable response times. This is a problem in systems
> which operate in a real-time environment. In order to avoid poor
> memory performance and unpredictable real-time behaviour due to
> frequent thread relocation, threads can be bound to processors using
> the processor-bind directive [3] [5]. The major problem with binding
> threads is that one can end up with an unbalanced load, i.e. some
> processors may be extremely busy during some time periods while other
> processors are idle."
> 
> -Glen
> 
> On 21/04/2008, Glen Newton <glen.newton@gmail.com> wrote:
>> And this discussion on bound threads may also shed light on things:
>>  http://coding.derkeiler.com/Archive/Java/comp.lang.java.programmer/2007-11/msg02801.html
>>
>>
>>  -Glen
>>
>>
>>  On 21/04/2008, Glen Newton <glen.newton@gmail.com> wrote:
>>  > BInding threads to processors - in many situations - improves
>>  >  throughput by reducing memory overhead. When a thread is running on a
>>  >  core, its state is local; if it is timeshared-out and either 1)
>>  >  swapped back in on the same core, it is likely that there will be  the
>>  >  core's L1 cache; or 2) onto another core, there will not be a cache
>>  >  hit and the state will have to be fetched from L2 or main memory,
>>  >  incurring a performance hit, esp in the latter. See Lundberg, L. 1997.
>>  >  Evaluating the Performance Implications of Binding Threads to
>>  >  Processors. 393.http://ieeexplore.ieee.org/iel3/5020/13768/00634520.pdf
>>  >  for more info.
>>  >
>>  >  If you are using JVM on Solaris on SPARC, you should take a look at
>>  >  the following links for tuning (the Sun JVM on Solaris SPARC has many
>>  >  more performance tuning parameters available), including threading:
>>  >  - http://java.sun.com/docs/hotspot/threads/threads.html
>>  >  - http://java.sun.com/j2se/1.5.0/docs/guide/vm/thread-priorities.html
>>  >  - http://www-1.ibm.com/support/docview.wss?rs=180&context=SSEQTP&uid=swg21107291
>>  >  - http://java.sun.com/javase/technologies/performance.jsp
>>  >
>>  >
>>  >  -Glen
>>  >
>>  >
>>  >
>>  >
>>  >
>>  >
>>  >
>>  >  On 21/04/2008, Ulf Dittmer <udittmer@yahoo.com> wrote:
>>  >  > This sounds odd. Why would restricting it to a single
>>  >  >  core improve performance? The point of using multiple
>>  >  >  cores (and multiple threads) is to improve performance
>>  >  >  isn't it? I'd leave thread scheduling decisions to the
>>  >  >  JVM. Plus, I don't think there is anything in Java to
>>  >  >  facilitate this (short of using JNI).
>>  >  >
>>  >  >  Are you talking about indexing or searching? You may
>>  >  >  be able to use multiple parallel threads to improve
>>  >  >  indexing performance. I don't think Lucene uses
>>  >  >  multi-threading for searching; not unless you have
>>  >  >  multiple indices, anyway.
>>  >  >
>>  >  >  Ulf
>>  >  >
>>  >  >
>>  >  >
>>  >  >  --- Anshum <anshumg@gmail.com> wrote:
>>  >  >
>>  >  >  > Hi,
>>  >  >  >
>>  >  >  > I have been trying to bind my lucene instance (JVM -
>>  >  >  > Sun Hotspot*) to a
>>  >  >  > particular core so as to improve the performance. Is
>>  >  >  > there a way to do so or
>>  >  >  > is there support in lucene to explicitly control the
>>  >  >  > thread - processor
>>  >  >  > linkup?
>>  >  >  >
>>  >  >  > --
>>  >  >  > --
>>  >  >  > The facts expressed here belong to everybody, the
>>  >  >  > opinions to me.
>>  >  >  > The distinction is yours to draw............
>>  >  >  >
>>  >  >
>>  >  >
>>  >  >
>>  >  >
>>  >  >       ____________________________________________________________________________________
>>  >  >  Be a better friend, newshound, and
>>  >  >  know-it-all with Yahoo! Mobile.  Try it now.  http://mobile.yahoo.com/;_ylt=Ahu06i62sR8HDtDypao8Wcj9tAcJ
>>  >  >
>>  >  >  ---------------------------------------------------------------------
>>  >  >  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>  >  >  For additional commands, e-mail: java-user-help@lucene.apache.org
>>  >  >
>>  >  >
>>  >
>>  >
>>  >
>>  > --
>>  >
>>  >  -
>>  >
>>
>>
>>
>> --
>>
>>  -
>>
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33725-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 22 04:11:03 2008
Return-Path: <java-user-return-33725-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27292 invoked from network); 22 Apr 2008 04:11:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Apr 2008 04:11:03 -0000
Received: (qmail 46741 invoked by uid 500); 22 Apr 2008 04:10:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46711 invoked by uid 500); 22 Apr 2008 04:10:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46700 invoked by uid 99); 22 Apr 2008 04:10:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Apr 2008 21:10:55 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of anshumg@gmail.com designates 209.85.146.180 as permitted sender)
Received: from [209.85.146.180] (HELO wa-out-1112.google.com) (209.85.146.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Apr 2008 04:09:59 +0000
Received: by wa-out-1112.google.com with SMTP id j40so3579647wah.11
        for <java-user@lucene.apache.org>; Mon, 21 Apr 2008 21:10:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=OutggFs03t1HnQkj6FPmT9Rtuq5fXslVbRb7eDBYC9g=;
        b=CdjMskkI5VABsoYbQ00Wgv8ZRwx7xvLkyJOrNthqZGJjGZjiw8eOym86c5s4zcGT5EWtqBu4Z6hZ94bkjFagSYMS7CxHQsWI72wJm9rmNfL5s6niLO97Fkvg7gKcU/0bSb4cSCVzm2OjjEh3hO+NciU1o9IXtPzDSpDsZUKjxp4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Dsqb6v9S2hHMDKaMaLV9daX2hip34KPtqhzG6VMfjqU8++0kOWjvEvAuBPgTlGCuYdEG2LamVSI5JX+7b7K0MPFCbt+fEBOYU53UN4bo9JbQIUlGo605+wVLztYvyudKiDfB4MN6XMAjIDoIA+IbGLMNLU6nl46DM6QgbyYUg3w=
Received: by 10.114.113.1 with SMTP id l1mr6902809wac.226.1208837417470;
        Mon, 21 Apr 2008 21:10:17 -0700 (PDT)
Received: by 10.114.134.19 with HTTP; Mon, 21 Apr 2008 21:10:17 -0700 (PDT)
Message-ID: <867513fe0804212110o6e879e83y9bc05a14d5608287@mail.gmail.com>
Date: Tue, 22 Apr 2008 09:40:17 +0530
From: Anshum <anshumg@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Binding lucene instance/threads to a particular processor(or core)
In-Reply-To: <480D1459.50908@teamware.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_19053_313132.1208837417451"
References: <867513fe0804210002y7c0c3e02j368f77ca684ffcbc@mail.gmail.com>
	 <441650.63543.qm@web65413.mail.ac4.yahoo.com>
	 <5e76f3840804210655v4e42d1a4ocfdb36f9785063c5@mail.gmail.com>
	 <5e76f3840804210658u33009046wb2f3ded19214d08f@mail.gmail.com>
	 <5e76f3840804210721t655cfa80h679c63e42d4b773f@mail.gmail.com>
	 <480D1459.50908@teamware.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_19053_313132.1208837417451
Content-Type: text/plain; charset=WINDOWS-1252
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

The paper seems pretty good but I am still wondering if there was a way to
achieve this through the command line parameters. I'm just trying this to
optimize the code, if this works, would let all know else would keep
everyone informed :)
Any other suggestions for handling a concurrency of over 7 search requests
per second for an index size of over 15Gigs containing over 13 million
records?
Also, could someone help me with obtaining a 'index size' - 'concurrency' -
'processor power' - 'memory' relationship formula (or something similar)?

--
Anshum


On Tue, Apr 22, 2008 at 3:55 AM, Antony Bowesman <adb@teamware.com> wrote:

> That paper from 1997 is pretty old, but mirrors our experiences in those
> days. Then, we used Solaris processor sets to really improve performance =
by
> binding one of our processes to a particular CPU while leaving the other
> CPUs to manage the thread intensive work.
>
> You can bind processes/LWPs to a CPU on Solaris with psrset.
>
> The Solaris thread model in the late '90s was also a significant factor i=
n
> performance of multi-threaded programs.  The default thread library in
> Solaris 8 implemented a MxN unbound thread model (threads/LWPS).  In thos=
e
> days we found that it did not perform well, so used the bound thread mode=
l
> (i.e. 1:1) where a Solaris thread was bound permanently to an LWP.  That
> improved performance a lot.  In Solaris 8, Sun had what they called the
> 'alternate' thread library (T2) around 2000, which became the default
> library in Solaris 9, and implemented a 1:1 model of Solaris threads to
> LWPs.  That new library had dramatic performance improvements over the ol=
d.
>
> Some background info for Java and threading
>
> http://java.sun.com/j2se/1.5.0/docs/guide/vm/thread-priorities.html
>
> Antony
>
>
>
> Glen Newton wrote:
>
> > I realised that not everyone on this list might be able to access the
> > IEEE paper I pointed-out, so I will include the abstract and some
> > paragraphs from the paper which I have included below.
> >
> > Also of interest (and should be available to all): Fedorova et al.
> > 2005. Performance of Multithreaded Chip Multiprocessors And
> > Implications For Operating System Design. Usenix 2005.
> > http://www.eecs.harvard.edu/margo/papers/usenix05/paper.pdf
> > "Abstract: We investigated how operating system design should be
> > adapted for multithreaded chip multiprocessors (CMT) =96 a new
> > generation of processors that exploit thread-level parallelism to mask
> > the memory latency in modern workloads. We
> > determined that the L2 cache is a critical shared resource on CMT and
> > that an insufficient amount of L2 cache can undermine the ability to
> > hide memory latency on these processors. To use the L2 cache as
> > efficiently as possible, we propose an L2-conscious scheduling
> > algorithm and quantify its performance potential. Using this algorithm
> > it is possible to reduce miss ratios in the L2 cache by 25-37% and
> > improve processor throughput by 27-45%."
> >
> >
> > From Lundberg, L. 1997:
> > Abstract: "The default scheduling algorithm in Solaris and other
> > operating systems may result in frequent relocation of threads at
> > run-time. Excessive thread relocation cause
> > poor memory performance. This can be avoided by binding threads to
> > processors. However, binding threads to processors may result in an
> > unbalanced load. By considering a previously obtained theoretical
> > result and by evaluating a set of multithreaded Solaris
> > programs using a multiprocessor with 8 processors, we are able to
> > bound the maximum performance loss due to binding threads, The
> > theoretical result is also recapitulated. By evaluating another set of
> > multithreaded programs, we show that the gain of binding threads to
> > processors may be substantial, particularly for programs with fine
> > grained parallelism."
> >
> > First paragraph: "The thread concept in Solaris [3][5] and other
> > operating systems makes it possible to write multithreaded programs,
> > which can be executed in parallel on a multiprocessor. Previous
> > experience from real world programs [4] show that, using the default
> > scheduling algorithm in Solaris, threads are frequently relocated from
> > one processor
> > to another at run-time. After each such relocation, the code and data
> > associated with the relocated thread is moved from the cache memory of
> > the 0113 processor to the cache of the new processor. This reduces the
> > performance. Run-time relocation of threads to processors can also
> > result in unpredictable response times. This is a problem in systems
> > which operate in a real-time environment. In order to avoid poor
> > memory performance and unpredictable real-time behaviour due to
> > frequent thread relocation, threads can be bound to processors using
> > the processor-bind directive [3] [5]. The major problem with binding
> > threads is that one can end up with an unbalanced load, i.e. some
> > processors may be extremely busy during some time periods while other
> > processors are idle."
> >
> > -Glen
> >
> > On 21/04/2008, Glen Newton <glen.newton@gmail.com> wrote:
> >
> > > And this discussion on bound threads may also shed light on things:
> > >
> > > http://coding.derkeiler.com/Archive/Java/comp.lang.java.programmer/20=
07-11/msg02801.html
> > >
> > >
> > >  -Glen
> > >
> > >
> > >  On 21/04/2008, Glen Newton <glen.newton@gmail.com> wrote:
> > >  > BInding threads to processors - in many situations - improves
> > >  >  throughput by reducing memory overhead. When a thread is running
> > > on a
> > >  >  core, its state is local; if it is timeshared-out and either 1)
> > >  >  swapped back in on the same core, it is likely that there will be
> > >  the
> > >  >  core's L1 cache; or 2) onto another core, there will not be a
> > > cache
> > >  >  hit and the state will have to be fetched from L2 or main memory,
> > >  >  incurring a performance hit, esp in the latter. See Lundberg, L.
> > > 1997.
> > >  >  Evaluating the Performance Implications of Binding Threads to
> > >  >  Processors. 393.
> > > http://ieeexplore.ieee.org/iel3/5020/13768/00634520.pdf
> > >  >  for more info.
> > >  >
> > >  >  If you are using JVM on Solaris on SPARC, you should take a look
> > > at
> > >  >  the following links for tuning (the Sun JVM on Solaris SPARC has
> > > many
> > >  >  more performance tuning parameters available), including
> > > threading:
> > >  >  - http://java.sun.com/docs/hotspot/threads/threads.html
> > >  >  -
> > > http://java.sun.com/j2se/1.5.0/docs/guide/vm/thread-priorities.html
> > >  >  -
> > > http://www-1.ibm.com/support/docview.wss?rs=3D180&context=3DSSEQTP&ui=
d=3Dswg21107291
> > >  >  - http://java.sun.com/javase/technologies/performance.jsp
> > >  >
> > >  >
> > >  >  -Glen
> > >  >
> > >  >
> > >  >
> > >  >
> > >  >
> > >  >
> > >  >
> > >  >  On 21/04/2008, Ulf Dittmer <udittmer@yahoo.com> wrote:
> > >  >  > This sounds odd. Why would restricting it to a single
> > >  >  >  core improve performance? The point of using multiple
> > >  >  >  cores (and multiple threads) is to improve performance
> > >  >  >  isn't it? I'd leave thread scheduling decisions to the
> > >  >  >  JVM. Plus, I don't think there is anything in Java to
> > >  >  >  facilitate this (short of using JNI).
> > >  >  >
> > >  >  >  Are you talking about indexing or searching? You may
> > >  >  >  be able to use multiple parallel threads to improve
> > >  >  >  indexing performance. I don't think Lucene uses
> > >  >  >  multi-threading for searching; not unless you have
> > >  >  >  multiple indices, anyway.
> > >  >  >
> > >  >  >  Ulf
> > >  >  >
> > >  >  >
> > >  >  >
> > >  >  >  --- Anshum <anshumg@gmail.com> wrote:
> > >  >  >
> > >  >  >  > Hi,
> > >  >  >  >
> > >  >  >  > I have been trying to bind my lucene instance (JVM -
> > >  >  >  > Sun Hotspot*) to a
> > >  >  >  > particular core so as to improve the performance. Is
> > >  >  >  > there a way to do so or
> > >  >  >  > is there support in lucene to explicitly control the
> > >  >  >  > thread - processor
> > >  >  >  > linkup?
> > >  >  >  >
> > >  >  >  > --
> > >  >  >  > --
> > >  >  >  > The facts expressed here belong to everybody, the
> > >  >  >  > opinions to me.
> > >  >  >  > The distinction is yours to draw............
> > >  >  >  >
> > >  >  >
> > >  >  >
> > >  >  >
> > >  >  >
> > >  >  >
> > > _____________________________________________________________________=
_______________
> > >  >  >  Be a better friend, newshound, and
> > >  >  >  know-it-all with Yahoo! Mobile.  Try it now.
> > > http://mobile.yahoo.com/;_ylt=3DAhu06i62sR8HDtDypao8Wcj9tAcJ
> > >  >  >
> > >  >  >
> > >  --------------------------------------------------------------------=
-
> > >  >  >  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.or=
g
> > >  >  >  For additional commands, e-mail:
> > > java-user-help@lucene.apache.org
> > >  >  >
> > >  >  >
> > >  >
> > >  >
> > >  >
> > >  > --
> > >  >
> > >  >  -
> > >  >
> > >
> > >
> > >
> > > --
> > >
> > >  -
> > >
> > >
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
--
The facts expressed here belong to everybody, the opinions to me.
The distinction is yours to draw............

------=_Part_19053_313132.1208837417451--

From java-user-return-33726-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 22 05:06:19 2008
Return-Path: <java-user-return-33726-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43802 invoked from network); 22 Apr 2008 05:06:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Apr 2008 05:06:19 -0000
Received: (qmail 4654 invoked by uid 500); 22 Apr 2008 05:06:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4474 invoked by uid 500); 22 Apr 2008 05:06:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4463 invoked by uid 99); 22 Apr 2008 05:06:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Apr 2008 22:06:11 -0700
X-ASF-Spam-Status: No, hits=4.8 required=10.0
	tests=HTML_MESSAGE,MIME_BASE64_TEXT,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lieutroy@gmail.com designates 209.85.162.179 as permitted sender)
Received: from [209.85.162.179] (HELO el-out-1112.google.com) (209.85.162.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Apr 2008 05:05:26 +0000
Received: by el-out-1112.google.com with SMTP id z25so756803ele.15
        for <java-user@lucene.apache.org>; Mon, 21 Apr 2008 22:05:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to:subject:date:mime-version:content-type:x-priority:x-msmail-priority:x-mailer:x-mimeole;
        bh=SC62/Kb3JzI7KQdOkl3oEL0KV3i3YfPCqsQ3NymBrzU=;
        b=gDqker4YdGsAAeW20hWrxfsJgOf88R3TrNHOcRrMn6UsvZri8B7UmUQya9OMnZ5L9jl6s2jb3MHI0O7R6osYFLKYXdIOlx/1LYQIyy+2icaEkwkXr3RXZgjqhReM2nUTROlZcVUdKvvrOYXM+IV852SD1FpkbGbpYzzEv48CANU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:subject:date:mime-version:content-type:x-priority:x-msmail-priority:x-mailer:x-mimeole;
        b=XHvyhC+JnpmG1BIphuc+EgXazjur1XGN0S8uEAISHoWKMX0qDggX0gP2T9PqXN/gxxSuSqwwOAmgH5ib1psBhyF29DMhH4EboS8SDupZW7CctIClxaCC1RI7G39/LGEVNR8jG00OB3/QVhBhNRPXwyebiFWCFAkZ+h2Nl2nsQ+A=
Received: by 10.142.141.21 with SMTP id o21mr2053723wfd.56.1208840738997;
        Mon, 21 Apr 2008 22:05:38 -0700 (PDT)
Received: from WangJianxin ( [203.86.44.2])
        by mx.google.com with ESMTPS id 24sm9311727wff.10.2008.04.21.22.05.35
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 21 Apr 2008 22:05:38 -0700 (PDT)
Message-ID: <011601c8a436$87adc240$b208a8c0@WangJianxin>
From: =?gb2312?B?zfW9qNDC?= <lieutroy@gmail.com>
To: "java-user" <java-user@lucene.apache.org>
Subject: =?gb2312?B?TmVlZCBhZGR0aW9uYWwgaW5mbyBmb3IgRmllbGSjqM+jzfu/tLXDtq7W0A==?=
	=?gb2312?B?zsS1xMXz09Gw787Ss/az9tb30uKjqQ==?=
Date: Tue, 22 Apr 2008 13:05:42 +0800
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0113_01C8A479.9191D1F0"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0113_01C8A479.9191D1F0
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: base64

08PTos7Ev8nE3MPoyva1w7K7yse63Mfls/6jrLK7usPS4su8o7qjqQ0KDQoNCi0tLS0tIE9yaWdp
bmFsIE1lc3NhZ2UgLS0tLS0gDQpGcm9tOiDN9b2o0MIgDQpUbzogQ2hyaXMgDQpTZW50OiBUdWVz
ZGF5LCBBcHJpbCAyMiwgMjAwOCA5OjUyIEFNDQpTdWJqZWN0OiBSZTogTmVlZCBhZGR0aW9uYWwg
aW5mbyBmb3IgRmllbGQNCg0KDQrQu9C7oaMNCs7StcTOysziysfV4tH5tcSjutKqttTSu8X6ytPG
tc7EvP4odmlkZW8pvajBosv30v0oaW5kZXgpo6zU2r2owaLL99L91q7HsKOsztLS0b6tt9bO9rP2
wcvU2srTxrW1xMqyw7TKsbzks/bP1sHLyrLDtNH5tcTX1sS7xNrI3aGjDQrU2tXi1tbH6b/2z8Kj
rNK7uPbK08a1vdrEv77Nz+C1sdPa0ru49kRvY3VtZW50LMTHw7TQ6NKqKM+jzfspttTX1sS7vajB
osv30v2jrMjnz8Kjug0KICAgIEZpZWxkKCJTdWIiLCLPws7nyKW/qrvhIqOsIjAxOjAyOjAyIik7
DQogICAgRmllbGQoIlN1YiIsIrrzzOzIpb+qu+Eio6wiMDE6MDM6MDUiKTsNCiAgICBb16KjuiIw
MTowMjowMiLKx7i9yvS1xMqxvOSjrGx1Y2VuZcO709DM4bmp1eLW1tPDt6iho10NCg0K1eLBvbj2
RmllbGSx7cq+1Nq1scewtcTK08a1vdrEv9bQo6zU2jAxOjAyOjAyyrG85LP2z9bBy9fWxLuhsM/C
zufIpb+qu+GhsaOs1NowMTowMzowNcqxvOSz9s/WwcuhsLrzzOzIpb+qu+GhsaOsyOe5+9PDu6co
VXNlcinL0cv3obDPws7nobGjrLWxx7DK08a1vdrEv8rHv8nS1MalxeS1xKOstavKx9a7xqXF5LW9
wcu12tK7uPZGaWVsZKOs1rvQ6NKq1qq1wMqxvOShsDAxOjAyOjAyobGho8jnufvTw7uny9HL96Gw
v6q74aGxo6zU8sG9uPZGaWVsZLa8v8nS1MalxeS1vaGj0vK0y9Do0qrWqrXAyrG85KGwMDE6MDI6
MDKhsbrNobAwMTowMzowNaGxoaMNCrK71qq1wM7S09DDu9PQy7XH5bP+oaMNCg0KztLP69aqtcBs
dWNlbmXKx7K7yse/ydLUzai5/cSz1ta3vcq9veK+9tXiuPbOyszio6zI57n7srvQ0LXEu7CjrNDo
0qrU9dH50N64xGx1Y2VuZcTYo78NCg0KzfW9qNDCDQogIC0tLS0tIE9yaWdpbmFsIE1lc3NhZ2Ug
LS0tLS0gDQogIEZyb206IENocmlzIA0KICBUbzogzfW9qNDCIA0KICBTZW50OiBNb25kYXksIEFw
cmlsIDIxLCAyMDA4IDc6MzQgUE0NCiAgU3ViamVjdDogUmU6IE5lZWQgYWRkdGlvbmFsIGluZm8g
Zm9yIEZpZWxkDQoNCg0KICDE+rXEuabE3L/J0tTU2cfls/7Su/xjhuGjrNLynunG5IyN30CY08yO
wO2jrLrDz/HSqpTg1H4uLi4uDQoNCiAgtau/tLW9xPqbXZTgo6y2+MfSmdrOu8P7t1HSu5jTyscg
bXVsdGktcGFpciDWtbXE1JKjrLK7ysfTwyBTdHJpbmcgtObFtg0KDQogINLUyc8NCiAgICAgICAg
ICAgICAgICAgICAgIENocmlzLg0KDQogICANCiAgMjAwOC80LzIxLCDN9b2o0MIgPGxpZXV0cm95
QGdtYWlsLmNvbT46IA0KICAgIMTjv7S1w7au1tDOxMLwo78NCg0KICAgIM7SsrvKx7rcw/ew18Tj
tcTS4su8oaMNCiAgICDE48rHy7W/ydLU08NsdWNlbmXP1tPQtcS5psTcwLS94r721eK49s7KzOLC
8KO/DQoNCiAgICAgIC0tLS0tIE9yaWdpbmFsIE1lc3NhZ2UgLS0tLS0gDQogICAgICBGcm9tOiBD
aHJpcyANCiAgICAgIFRvOiDN9b2o0MIgDQogICAgICBTZW50OiBNb25kYXksIEFwcmlsIDIxLCAy
MDA4IDU6MTQgUE0NCiAgICAgIFN1YmplY3Q6IFJlOiBOZWVkIGFkZHRpb25hbCBpbmZvIGZvciBG
aWVsZA0KDQogICAgICAgDQogICAgICBUaGlzIHByb2JsZW0gaXMgbm90IHNvbHZlIHdpdGggbHVj
ZW5lIGJ1dCBvciBtZXRob2Qgd2lsbCBzb2x2ZSBpdC4NCg0KICAgICAgVGhlIHN0cnVjdHVyZSBp
cyBub3QgZGVmaW5lIGFzIHRoaXMgYXMgd2VsbCAuLi4uLi4NCg0KICAgICAgWW91IG1heSBjaGVj
ayBpdCBjbGVhci4uLi4NCg0KICAgICAgYWJvdmUNCiAgICAgICAgICAgICAgICAgICAgIENocmlz
Lg0KDQogICAgICAgDQogICAgICAyMDA4LzQvMjEsIM31vajQwiA8bGlldXRyb3lAZ21haWwuY29t
PjogDQogICAgICAgIGhpIENocmlzLCBpdCBpcyBtZSAizfW9qNDCIg0KDQogICAgICAgIEkgaGF2
ZSBhIG5ldyBwcm9ibGVtLCBDb3VsZCB5b3UgZ2l2ZSBtZSBhbnkgYWR2aWNlPyBUaGFuayB5b3Uu
DQoNCg0KICAgICAgICBJIHdhbnQgdG8gdXNlIGx1Y2VuZSB3aXRoIHNvbWUgYWRkaXRpb25hbCBp
bmZvLGxpa2U6DQoNCiAgICAgICAgMS5pbmRleA0KICAgICAgICAgICAgRG9jdW1lbnQgYWRkaXRp
b25hbERvYz1ldyBEb2N1bWVudCgpDQoNCiAgICAgICAgICAgIGFkZGl0aW9uYWxEb2MuYWRkKG5l
dyBGaWVsZCgiZmllbGQiLCJBQSBCQiIsIkFkZHRpb25hbCBpbmZvIC4uLi4uLi4uLi4uLi4uLiIp
KTsNCiAgICAgICAgICAgIGFkZGl0aW9uYWxEb2MuYWRkKG5ldyBGaWVsZCgiZmllbGQiLCJCQiBD
QyIsIkFkZHRpb25hbCBpbmZvIDIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMi4uLi4uLi4uLi4uLi4u
LiIpKTsNCg0KICAgICAgICAgICAgd3JpdGVyLmFkZERvY3VtZW50KGFkZGl0aW9uYWxEb2MpDQoN
CiAgICAgICAgICAgIC4uLi4uLi4uDQoNCg0KICAgICAgICAyLiBzZWFyY2gNCg0KICAgICAgICAg
ICAgU2VhcmNoZXIgc2VhcmNoZXI7DQogICAgICAgICAgICAuLi4uDQoNCiAgICAgICAgICAgIHNl
YXJjaGVyLnNlYXJjaCh0ZXJtUXVlcnkoImZpZWxkIiwiQkIiKSk7DQoNCg0KDQoNCiAgICAgICAg
ICAgIGluIHRoaXMgY29uZGl0aW9uLCBJIHdhbnQgbHVjZW5lIHJldHVybnMgdGhlIGFkZGl0aW9u
YWxEb2MgLCBhbHNvIGtub3cgd2hpY2ggZmlsZWRzIHdlcmUgbWF0Y2hlZCwgdGhlbiBJIHdpbGwg
Z2V0IHRoZSBhZGRpdGlvbmFsIGluZm8gZnJvbSB0aGUgbWF0Y2hlZCBmaWVsZHMuDQoNCiAgICAg
ICAgQ2FuIGx1Y2VuZSBtYWtlIGl0IGluIHZlcnNpb24gMi4zLjE/DQoNCg0KDQogICAgICAtLSAN
CiAgICAgIENocmlzIExpbiANCiAgICAgIGNocmlzbGluMDQyNkBnbWFpbC5jb20NCiAgICAgIFRh
aXBlaSAsIFRhaXdhbi4NCiAgICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIA0KDQoNCg0KICAtLSANCiAgQ2hyaXMgTGluIA0KICBj
aHJpc2xpbjA0MjZAZ21haWwuY29tDQogIFRhaXBlaSAsIFRhaXdhbi4NCiAgLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0g

------=_NextPart_000_0113_01C8A479.9191D1F0--


From java-user-return-33727-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 22 05:56:04 2008
Return-Path: <java-user-return-33727-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57632 invoked from network); 22 Apr 2008 05:56:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Apr 2008 05:56:03 -0000
Received: (qmail 46079 invoked by uid 500); 22 Apr 2008 05:55:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46045 invoked by uid 500); 22 Apr 2008 05:55:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46034 invoked by uid 99); 22 Apr 2008 05:55:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Apr 2008 22:55:54 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.222.32.20] (HELO mexforward.lss.emc.com) (128.222.32.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Apr 2008 05:55:00 +0000
Received: from hop04-l1d11-si01.isus.emc.com (HOP04-L1D11-SI01.isus.emc.com [10.254.111.54])
	by mexforward.lss.emc.com (Switch-3.2.5/Switch-3.1.7) with ESMTP id m3M5tKVi012698
	for <java-user@lucene.apache.org>; Tue, 22 Apr 2008 01:55:20 -0400 (EDT)
Received: from mailhub.lss.emc.com (uraeus.lss.emc.com [10.254.144.14]) by hop04-l1d11-si01.isus.emc.com (Tablus Interceptor) for <java-user@lucene.apache.org>; Tue, 22 Apr 2008 01:55:20 -0400
Received: from corpussmtp1.corp.emc.com (corpussmtp1.corp.emc.com [128.221.10.43])
	by mailhub.lss.emc.com (Switch-3.2.5/Switch-3.1.7) with ESMTP id m3M5tA87016052
	for <java-user@lucene.apache.org>; Tue, 22 Apr 2008 01:55:18 -0400 (EDT)
From: Fang_Li@emc.com
Received: from CORPUSMX70A.corp.emc.com ([128.221.32.148]) by corpussmtp1.corp.emc.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 22 Apr 2008 01:55:11 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: quoted-printable
Subject: =?gb2312?B?UkU6IE5lZWQgYWRkdGlvbmFsIGluZm8gZm9yIEZpZWxko6jPo837v7S1ww==?=
	=?gb2312?B?tq7W0M7EtcTF89PRsO/O0rP2s/bW99Lio6k=?=
Date: Tue, 22 Apr 2008 01:55:15 -0400
Message-ID: <0C5F3D1247CCF341B9B8DD7B447FA492501A9A@CORPUSMX70A.corp.emc.com>
In-Reply-To: <011601c8a436$87adc240$b208a8c0@WangJianxin>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: =?gb2312?B?TmVlZCBhZGR0aW9uYWwgaW5mbyBmb3IgRmllbGSjqM+jzfu/tLXDtq7W0A==?=
	=?gb2312?B?zsS1xMXz09Gw787Ss/az9tb30uKjqQ==?=
Thread-Index: AcikNpgdJCC2fjUHRlSfa9jPLOtQnQABlUbA
References: <011601c8a436$87adc240$b208a8c0@WangJianxin>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 22 Apr 2008 05:55:11.0201 (UTC) FILETIME=[6D31F510:01C8A43D]
X-PMX-Version: 4.7.1.128075, Antispam-Engine: 2.5.1.298604, Antispam-Data: 2007.8.30.51425
X-PerlMx-Spam: Gauge=, SPAM=3%, Reason='EMC_FROM_0+ -3, CHARSET_FARAWAY_HEADERS 1.154, MIME_CHARSET_FARAWAY 0.409, SUPERLONG_LINE 0.05, LOCALE_CHINESE 0, NO_REAL_NAME 0, __CHAR_CHINESE_CT 0, __CHAR_CHINESE_SUBJ 0, __CP_MEDIA_BODY 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __HIGHBITS 0, __IMS_MSGID 0, __MIME_CHARSET_FARAWAY 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0, __SUBJ_HIGHBIT 0'
X-Tablus-Inspected: yes
X-Tablus-Classifications: public
X-Tablus-Action: allow
X-Virus-Checked: Checked by ClamAV on apache.org

Try to use payload which is stored as additional information. Currently =
lucene only support per token payload, but you can add an arbitrary =
token for the time information.

I am not sure what are the query information? Only the subtitle or both =
subtitle and time?

Regards,

-----Original Message-----
From: =CD=F5=BD=A8=D0=C2 [mailto:lieutroy@gmail.com]=20
Sent: Tuesday, April 22, 2008 1:06 PM
To: java-user
Subject: Need addtional info for =
Field=A3=A8=CF=A3=CD=FB=BF=B4=B5=C3=B6=AE=D6=D0=CE=C4=B5=C4=C5=F3=D3=D1=B0=
=EF=CE=D2=B3=F6=B3=F6=D6=F7=D2=E2=A3=A9

=D3=C3=D3=A2=CE=C4=BF=C9=C4=DC=C3=E8=CA=F6=B5=C3=B2=BB=CA=C7=BA=DC=C7=E5=B3=
=FE=A3=AC=B2=BB=BA=C3=D2=E2=CB=BC=A3=BA=A3=A9


----- Original Message -----=20
From: =CD=F5=BD=A8=D0=C2=20
To: Chris=20
Sent: Tuesday, April 22, 2008 9:52 AM
Subject: Re: Need addtional info for Field


=D0=BB=D0=BB=A1=A3
=CE=D2=B5=C4=CE=CA=CC=E2=CA=C7=D5=E2=D1=F9=B5=C4=A3=BA=D2=AA=B6=D4=D2=BB=C5=
=FA=CA=D3=C6=B5=CE=C4=BC=FE(video)=BD=A8=C1=A2=CB=F7=D2=FD(index)=A3=AC=D4=
=DA=BD=A8=C1=A2=CB=F7=D2=FD=D6=AE=C7=B0=A3=AC=CE=D2=D2=D1=BE=AD=B7=D6=CE=F6=
=B3=F6=C1=CB=D4=DA=CA=D3=C6=B5=B5=C4=CA=B2=C3=B4=CA=B1=BC=E4=B3=F6=CF=D6=C1=
=CB=CA=B2=C3=B4=D1=F9=B5=C4=D7=D6=C4=BB=C4=DA=C8=DD=A1=A3
=D4=DA=D5=E2=D6=D6=C7=E9=BF=F6=CF=C2=A3=AC=D2=BB=B8=F6=CA=D3=C6=B5=BD=DA=C4=
=BF=BE=CD=CF=E0=B5=B1=D3=DA=D2=BB=B8=F6Document,=C4=C7=C3=B4=D0=E8=D2=AA(=
=CF=A3=CD=FB)=B6=D4=D7=D6=C4=BB=BD=A8=C1=A2=CB=F7=D2=FD=A3=AC=C8=E7=CF=C2=
=A3=BA
    Field("Sub","=CF=C2=CE=E7=C8=A5=BF=AA=BB=E1"=A3=AC"01:02:02");
    Field("Sub","=BA=F3=CC=EC=C8=A5=BF=AA=BB=E1"=A3=AC"01:03:05");
    =
[=D7=A2=A3=BA"01:02:02"=CA=C7=B8=BD=CA=F4=B5=C4=CA=B1=BC=E4=A3=AClucene=C3=
=BB=D3=D0=CC=E1=B9=A9=D5=E2=D6=D6=D3=C3=B7=A8=A1=A3]

=D5=E2=C1=BD=B8=F6Field=B1=ED=CA=BE=D4=DA=B5=B1=C7=B0=B5=C4=CA=D3=C6=B5=BD=
=DA=C4=BF=D6=D0=A3=AC=D4=DA01:02:02=CA=B1=BC=E4=B3=F6=CF=D6=C1=CB=D7=D6=C4=
=BB=A1=B0=CF=C2=CE=E7=C8=A5=BF=AA=BB=E1=A1=B1=A3=AC=D4=DA01:03:05=CA=B1=BC=
=E4=B3=F6=CF=D6=C1=CB=A1=B0=BA=F3=CC=EC=C8=A5=BF=AA=BB=E1=A1=B1=A3=AC=C8=E7=
=B9=FB=D3=C3=BB=A7(User)=CB=D1=CB=F7=A1=B0=CF=C2=CE=E7=A1=B1=A3=AC=B5=B1=C7=
=B0=CA=D3=C6=B5=BD=DA=C4=BF=CA=C7=BF=C9=D2=D4=C6=A5=C5=E4=B5=C4=A3=AC=B5=AB=
=CA=C7=D6=BB=C6=A5=C5=E4=B5=BD=C1=CB=B5=DA=D2=BB=B8=F6Field=A3=AC=D6=BB=D0=
=E8=D2=AA=D6=AA=B5=C0=CA=B1=BC=E4=A1=B001:02:02=A1=B1=A1=A3=C8=E7=B9=FB=D3=
=C3=BB=A7=CB=D1=CB=F7=A1=B0=BF=AA=BB=E1=A1=B1=A3=AC=D4=F2=C1=BD=B8=F6Fiel=
d=B6=BC=BF=C9=D2=D4=C6=A5=C5=E4=B5=BD=A1=A3=D2=F2=B4=CB=D0=E8=D2=AA=D6=AA=
=B5=C0=CA=B1=BC=E4=A1=B001:02:02=A1=B1=BA=CD=A1=B001:03:05=A1=B1=A1=A3
=B2=BB=D6=AA=B5=C0=CE=D2=D3=D0=C3=BB=D3=D0=CB=B5=C7=E5=B3=FE=A1=A3

=CE=D2=CF=EB=D6=AA=B5=C0lucene=CA=C7=B2=BB=CA=C7=BF=C9=D2=D4=CD=A8=B9=FD=C4=
=B3=D6=D6=B7=BD=CA=BD=BD=E2=BE=F6=D5=E2=B8=F6=CE=CA=CC=E2=A3=AC=C8=E7=B9=FB=
=B2=BB=D0=D0=B5=C4=BB=B0=A3=AC=D0=E8=D2=AA=D4=F5=D1=F9=D0=DE=B8=C4lucene=C4=
=D8=A3=BF

=CD=F5=BD=A8=D0=C2
  ----- Original Message -----=20
  From: Chris=20
  To: =CD=F5=BD=A8=D0=C2=20
  Sent: Monday, April 21, 2008 7:34 PM
  Subject: Re: Need addtional info for Field


  =
=C4=FA=B5=C4=B9=A6=C4=DC=BF=C9=D2=D4=D4=D9=C7=E5=B3=FE=D2=BB=FCc=86=E1=A3=
=AC=D2=F2=9E=E9=C6=E4=8C=8D=DF@=98=D3=CC=8E=C0=ED=A3=AC=BA=C3=CF=F1=D2=AA=
=94=E0=D4~....

  =
=B5=AB=BF=B4=B5=BD=C4=FA=9B]=94=E0=A3=AC=B6=F8=C7=D2=99=DA=CE=BB=C3=FB=B7=
Q=D2=BB=98=D3=CA=C7 multi-pair =
=D6=B5=B5=C4=D4=92=A3=AC=B2=BB=CA=C7=D3=C3 String =B4=E6=C5=B6

  =D2=D4=C9=CF
                     Chris.

  =20
  2008/4/21, =CD=F5=BD=A8=D0=C2 <lieutroy@gmail.com>:=20
    =C4=E3=BF=B4=B5=C3=B6=AE=D6=D0=CE=C4=C2=F0=A3=BF

    =CE=D2=B2=BB=CA=C7=BA=DC=C3=F7=B0=D7=C4=E3=B5=C4=D2=E2=CB=BC=A1=A3
    =
=C4=E3=CA=C7=CB=B5=BF=C9=D2=D4=D3=C3lucene=CF=D6=D3=D0=B5=C4=B9=A6=C4=DC=C0=
=B4=BD=E2=BE=F6=D5=E2=B8=F6=CE=CA=CC=E2=C2=F0=A3=BF

      ----- Original Message -----=20
      From: Chris=20
      To: =CD=F5=BD=A8=D0=C2=20
      Sent: Monday, April 21, 2008 5:14 PM
      Subject: Re: Need addtional info for Field

      =20
      This problem is not solve with lucene but or method will solve it.

      The structure is not define as this as well ......

      You may check it clear....

      above
                     Chris.

      =20
      2008/4/21, =CD=F5=BD=A8=D0=C2 <lieutroy@gmail.com>:=20
        hi Chris, it is me "=CD=F5=BD=A8=D0=C2"

        I have a new problem, Could you give me any advice? Thank you.


        I want to use lucene with some additional info,like:

        1.index
            Document additionalDoc=3Dew Document()

            additionalDoc.add(new Field("field","AA BB","Addtional info =
..............."));
            additionalDoc.add(new Field("field","BB CC","Addtional info =
222222222222222222222222..............."));

            writer.addDocument(additionalDoc)

            ........


        2. search

            Searcher searcher;
            ....

            searcher.search(termQuery("field","BB"));




            in this condition, I want lucene returns the additionalDoc , =
also know which fileds were matched, then I will get the additional info =
from the matched fields.

        Can lucene make it in version 2.3.1?



      --=20
      Chris Lin=20
      chrislin0426@gmail.com
      Taipei , Taiwan.
      -----------------------------------------------------------=20



  --=20
  Chris Lin=20
  chrislin0426@gmail.com
  Taipei , Taiwan.
  -----------------------------------------------------------=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33728-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 22 06:08:58 2008
Return-Path: <java-user-return-33728-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83528 invoked from network); 22 Apr 2008 06:08:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Apr 2008 06:08:58 -0000
Received: (qmail 60666 invoked by uid 500); 22 Apr 2008 06:08:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60641 invoked by uid 500); 22 Apr 2008 06:08:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60630 invoked by uid 99); 22 Apr 2008 06:08:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Apr 2008 23:08:49 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=MIME_BASE64_BLANKS,MIME_BASE64_TEXT,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lieutroy@gmail.com designates 66.249.82.236 as permitted sender)
Received: from [66.249.82.236] (HELO wx-out-0506.google.com) (66.249.82.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Apr 2008 06:08:04 +0000
Received: by wx-out-0506.google.com with SMTP id i28so1750127wxd.20
        for <java-user@lucene.apache.org>; Mon, 21 Apr 2008 23:08:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to:references:subject:date:mime-version:content-type:content-transfer-encoding:x-priority:x-msmail-priority:x-mailer:x-mimeole;
        bh=rwy3C2n/v070pNig3FcTTWjr1CcflvKg2JnL8AMbWNU=;
        b=lo24HwlaXQxNkM2Szc4plRHKssx48QmVQMGz/jPl0B2mfUrzP6emUU018VJ7S4kmuRP5BQ/o2diNl8h149YXxY9O/4eM/jH4+SLUq9cIcfoyhw/1JuWtAuu9VlOdWB2ME3v+LzsG0gi1AGM38P6bm2An18FhqRsNc1MCCOXkiZg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:references:subject:date:mime-version:content-type:content-transfer-encoding:x-priority:x-msmail-priority:x-mailer:x-mimeole;
        b=ay2k3foaE7fAVA9Ura1YpnQoqsEOxcG/GToVXxdunb4kd3+RIK14bKezqg3zYhT3w8ZjrXRwkhasIuv+B3wNkPO60Er47p5TQWc7/Qo49VN7IwKz/wTKQRnkGppfyZw3FnQNjxNvpMX2OgtKMb87pziZQrfqxc/Xu9yZ2XLAT4g=
Received: by 10.142.58.14 with SMTP id g14mr2057145wfa.313.1208844496991;
        Mon, 21 Apr 2008 23:08:16 -0700 (PDT)
Received: from WangJianxin ( [203.86.44.2])
        by mx.google.com with ESMTPS id 22sm9383850wfi.12.2008.04.21.23.08.13
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 21 Apr 2008 23:08:16 -0700 (PDT)
Message-ID: <016901c8a43f$47c9edd0$b208a8c0@WangJianxin>
From: =?gb2312?B?zfW9qNDC?= <lieutroy@gmail.com>
To: <java-user@lucene.apache.org>
References: <011601c8a436$87adc240$b208a8c0@WangJianxin> <0C5F3D1247CCF341B9B8DD7B447FA492501A9A@CORPUSMX70A.corp.emc.com>
Subject: =?gb2312?B?UmU6IE5lZWQgYWRkdGlvbmFsIGluZm8gZm9yIEZpZWxko6jPo837v7S1ww==?=
	=?gb2312?B?tq7W0M7EtcTF89PRsO/O0rP2s/bW99Lio6k=?=
Date: Tue, 22 Apr 2008 14:08:21 +0800
MIME-Version: 1.0
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: base64
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
X-Virus-Checked: Checked by ClamAV on apache.org

DQrQu9C7o6zO0ta7yse87Mv3c3Vio6yyu7zsy/fKsbzko6zU2rzsy/dzdWLKsaOs1rvP67XDtb3G
pcXkRmllbGS21NOmtcTKsbzkoaMNCtPDcGF5bG9hZMvGuvWyu7/J0tSjvw0KDQotLS0tLSBPcmln
aW5hbCBNZXNzYWdlIC0tLS0tIA0KRnJvbTogPEZhbmdfTGlAZW1jLmNvbT4NClRvOiA8amF2YS11
c2VyQGx1Y2VuZS5hcGFjaGUub3JnPg0KU2VudDogVHVlc2RheSwgQXByaWwgMjIsIDIwMDggMTo1
NSBQTQ0KU3ViamVjdDogUkU6IE5lZWQgYWRkdGlvbmFsIGluZm8gZm9yIEZpZWxko6jPo837v7S1
w7au1tDOxLXExfPT0bDvztKz9rP21vfS4qOpDQoNCg0KVHJ5IHRvIHVzZSBwYXlsb2FkIHdoaWNo
IGlzIHN0b3JlZCBhcyBhZGRpdGlvbmFsIGluZm9ybWF0aW9uLiBDdXJyZW50bHkgbHVjZW5lIG9u
bHkgc3VwcG9ydCBwZXIgdG9rZW4gcGF5bG9hZCwgYnV0IHlvdSBjYW4gYWRkIGFuIGFyYml0cmFy
eSB0b2tlbiBmb3IgdGhlIHRpbWUgaW5mb3JtYXRpb24uDQoNCkkgYW0gbm90IHN1cmUgd2hhdCBh
cmUgdGhlIHF1ZXJ5IGluZm9ybWF0aW9uPyBPbmx5IHRoZSBzdWJ0aXRsZSBvciBib3RoIHN1YnRp
dGxlIGFuZCB0aW1lPw0KDQpSZWdhcmRzLA0KDQotLS0tLU9yaWdpbmFsIE1lc3NhZ2UtLS0tLQ0K
RnJvbTogzfW9qNDCIFttYWlsdG86bGlldXRyb3lAZ21haWwuY29tXSANClNlbnQ6IFR1ZXNkYXks
IEFwcmlsIDIyLCAyMDA4IDE6MDYgUE0NClRvOiBqYXZhLXVzZXINClN1YmplY3Q6IE5lZWQgYWRk
dGlvbmFsIGluZm8gZm9yIEZpZWxko6jPo837v7S1w7au1tDOxLXExfPT0bDvztKz9rP21vfS4qOp
DQoNCtPD06LOxL/JxNzD6Mr2tcOyu8rHutzH5bP+o6yyu7rD0uLLvKO6o6kNCg0KDQotLS0tLSBP
cmlnaW5hbCBNZXNzYWdlIC0tLS0tIA0KRnJvbTogzfW9qNDCIA0KVG86IENocmlzIA0KU2VudDog
VHVlc2RheSwgQXByaWwgMjIsIDIwMDggOTo1MiBBTQ0KU3ViamVjdDogUmU6IE5lZWQgYWRkdGlv
bmFsIGluZm8gZm9yIEZpZWxkDQoNCg0K0LvQu6GjDQrO0rXEzsrM4srH1eLR+bXEo7rSqrbU0rvF
+srTxrXOxLz+KHZpZGVvKb2owaLL99L9KGluZGV4KaOs1Nq9qMGiy/fS/daux7CjrM7S0tG+rbfW
zvaz9sHL1NrK08a1tcTKssO0yrG85LP2z9bBy8qyw7TR+bXE19bEu8TayN2how0K1NrV4tbWx+m/
9s/Co6zSu7j2ytPGtb3axL++zc/gtbHT2tK7uPZEb2N1bWVudCzEx8O00OjSqijPo837KbbU19bE
u72owaLL99L9o6zI58/Co7oNCiAgICBGaWVsZCgiU3ViIiwiz8LO58ilv6q74SKjrCIwMTowMjow
MiIpOw0KICAgIEZpZWxkKCJTdWIiLCK688zsyKW/qrvhIqOsIjAxOjAzOjA1Iik7DQogICAgW9ei
o7oiMDE6MDI6MDIiyse4vcr0tcTKsbzko6xsdWNlbmXDu9PQzOG5qdXi1tbTw7eooaNdDQoNCtXi
wb249kZpZWxkse3KvtTatbHHsLXEytPGtb3axL/W0KOs1NowMTowMjowMsqxvOSz9s/WwcvX1sS7
obDPws7nyKW/qrvhobGjrNTaMDE6MDM6MDXKsbzks/bP1sHLobC688zsyKW/qrvhobGjrMjnufvT
w7unKFVzZXIpy9HL96Gwz8LO56Gxo6y1scewytPGtb3axL/Kx7/J0tTGpcXktcSjrLWrysfWu8al
xeS1vcHLtdrSu7j2RmllbGSjrNa70OjSqtaqtcDKsbzkobAwMTowMjowMqGxoaPI57n708O7p8vR
y/ehsL+qu+GhsaOs1PLBvbj2RmllbGS2vL/J0tTGpcXktb2ho9LytMvQ6NKq1qq1wMqxvOShsDAx
OjAyOjAyobG6zaGwMDE6MDM6MDWhsaGjDQqyu9aqtcDO0tPQw7vT0Mu1x+Wz/qGjDQoNCs7Sz+vW
qrXAbHVjZW5lyseyu8rHv8nS1M2ouf3Es9bWt73Kvb3ivvbV4rj2zsrM4qOsyOe5+7K70NC1xLuw
o6zQ6NKq1PXR+dDeuMRsdWNlbmXE2KO/DQoNCs31vajQwg0KICAtLS0tLSBPcmlnaW5hbCBNZXNz
YWdlIC0tLS0tIA0KICBGcm9tOiBDaHJpcyANCiAgVG86IM31vajQwiANCiAgU2VudDogTW9uZGF5
LCBBcHJpbCAyMSwgMjAwOCA3OjM0IFBNDQogIFN1YmplY3Q6IFJlOiBOZWVkIGFkZHRpb25hbCBp
bmZvIGZvciBGaWVsZA0KDQoNCiAgxPq1xLmmxNy/ydLU1NnH5bP+0rv8Y4bho6zS8p7pxuSMjd9A
mNPMjsDto6y6w8/x0qqU4NR+Li4uLg0KDQogILWrv7S1vcT6m12U4KOstvjH0pnazrvD+7dR0ruY
08rHIG11bHRpLXBhaXIg1rW1xNSSo6yyu8rH08MgU3RyaW5nILTmxbYNCg0KICDS1MnPDQogICAg
ICAgICAgICAgICAgICAgICBDaHJpcy4NCg0KICAgDQogIDIwMDgvNC8yMSwgzfW9qNDCIDxsaWV1
dHJveUBnbWFpbC5jb20+OiANCiAgICDE47+0tcO2rtbQzsTC8KO/DQoNCiAgICDO0rK7yse63MP3
sNfE47XE0uLLvKGjDQogICAgxOPKx8u1v8nS1NPDbHVjZW5lz9bT0LXEuabE3MC0veK+9tXiuPbO
ysziwvCjvw0KDQogICAgICAtLS0tLSBPcmlnaW5hbCBNZXNzYWdlIC0tLS0tIA0KICAgICAgRnJv
bTogQ2hyaXMgDQogICAgICBUbzogzfW9qNDCIA0KICAgICAgU2VudDogTW9uZGF5LCBBcHJpbCAy
MSwgMjAwOCA1OjE0IFBNDQogICAgICBTdWJqZWN0OiBSZTogTmVlZCBhZGR0aW9uYWwgaW5mbyBm
b3IgRmllbGQNCg0KICAgICAgIA0KICAgICAgVGhpcyBwcm9ibGVtIGlzIG5vdCBzb2x2ZSB3aXRo
IGx1Y2VuZSBidXQgb3IgbWV0aG9kIHdpbGwgc29sdmUgaXQuDQoNCiAgICAgIFRoZSBzdHJ1Y3R1
cmUgaXMgbm90IGRlZmluZSBhcyB0aGlzIGFzIHdlbGwgLi4uLi4uDQoNCiAgICAgIFlvdSBtYXkg
Y2hlY2sgaXQgY2xlYXIuLi4uDQoNCiAgICAgIGFib3ZlDQogICAgICAgICAgICAgICAgICAgICBD
aHJpcy4NCg0KICAgICAgIA0KICAgICAgMjAwOC80LzIxLCDN9b2o0MIgPGxpZXV0cm95QGdtYWls
LmNvbT46IA0KICAgICAgICBoaSBDaHJpcywgaXQgaXMgbWUgIs31vajQwiINCg0KICAgICAgICBJ
IGhhdmUgYSBuZXcgcHJvYmxlbSwgQ291bGQgeW91IGdpdmUgbWUgYW55IGFkdmljZT8gVGhhbmsg
eW91Lg0KDQoNCiAgICAgICAgSSB3YW50IHRvIHVzZSBsdWNlbmUgd2l0aCBzb21lIGFkZGl0aW9u
YWwgaW5mbyxsaWtlOg0KDQogICAgICAgIDEuaW5kZXgNCiAgICAgICAgICAgIERvY3VtZW50IGFk
ZGl0aW9uYWxEb2M9ZXcgRG9jdW1lbnQoKQ0KDQogICAgICAgICAgICBhZGRpdGlvbmFsRG9jLmFk
ZChuZXcgRmllbGQoImZpZWxkIiwiQUEgQkIiLCJBZGR0aW9uYWwgaW5mbyAuLi4uLi4uLi4uLi4u
Li4iKSk7DQogICAgICAgICAgICBhZGRpdGlvbmFsRG9jLmFkZChuZXcgRmllbGQoImZpZWxkIiwi
QkIgQ0MiLCJBZGR0aW9uYWwgaW5mbyAyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIuLi4uLi4uLi4u
Li4uLi4iKSk7DQoNCiAgICAgICAgICAgIHdyaXRlci5hZGREb2N1bWVudChhZGRpdGlvbmFsRG9j
KQ0KDQogICAgICAgICAgICAuLi4uLi4uLg0KDQoNCiAgICAgICAgMi4gc2VhcmNoDQoNCiAgICAg
ICAgICAgIFNlYXJjaGVyIHNlYXJjaGVyOw0KICAgICAgICAgICAgLi4uLg0KDQogICAgICAgICAg
ICBzZWFyY2hlci5zZWFyY2godGVybVF1ZXJ5KCJmaWVsZCIsIkJCIikpOw0KDQoNCg0KDQogICAg
ICAgICAgICBpbiB0aGlzIGNvbmRpdGlvbiwgSSB3YW50IGx1Y2VuZSByZXR1cm5zIHRoZSBhZGRp
dGlvbmFsRG9jICwgYWxzbyBrbm93IHdoaWNoIGZpbGVkcyB3ZXJlIG1hdGNoZWQsIHRoZW4gSSB3
aWxsIGdldCB0aGUgYWRkaXRpb25hbCBpbmZvIGZyb20gdGhlIG1hdGNoZWQgZmllbGRzLg0KDQog
ICAgICAgIENhbiBsdWNlbmUgbWFrZSBpdCBpbiB2ZXJzaW9uIDIuMy4xPw0KDQoNCg0KICAgICAg
LS0gDQogICAgICBDaHJpcyBMaW4gDQogICAgICBjaHJpc2xpbjA0MjZAZ21haWwuY29tDQogICAg
ICBUYWlwZWkgLCBUYWl3YW4uDQogICAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSANCg0KDQoNCiAgLS0gDQogIENocmlzIExpbiAN
CiAgY2hyaXNsaW4wNDI2QGdtYWlsLmNvbQ0KICBUYWlwZWkgLCBUYWl3YW4uDQogIC0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIA0KDQot
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0NClRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmli
ZUBsdWNlbmUuYXBhY2hlLm9yZw0KRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2
YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcNCg==



From java-user-return-33729-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 22 06:52:09 2008
Return-Path: <java-user-return-33729-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 994 invoked from network); 22 Apr 2008 06:52:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Apr 2008 06:52:08 -0000
Received: (qmail 99739 invoked by uid 500); 22 Apr 2008 06:52:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99704 invoked by uid 500); 22 Apr 2008 06:52:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99692 invoked by uid 99); 22 Apr 2008 06:52:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Apr 2008 23:52:01 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.222.32.20] (HELO mexforward.lss.emc.com) (128.222.32.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Apr 2008 06:51:07 +0000
Received: from hop04-l1d11-si01.isus.emc.com (HOP04-L1D11-SI01.isus.emc.com [10.254.111.54])
	by mexforward.lss.emc.com (Switch-3.2.5/Switch-3.1.7) with ESMTP id m3M6pQcD028879
	for <java-user@lucene.apache.org>; Tue, 22 Apr 2008 02:51:26 -0400 (EDT)
Received: from mailhub.lss.emc.com (nirah.lss.emc.com [10.254.144.13]) by hop04-l1d11-si01.isus.emc.com (Tablus Interceptor) for <java-user@lucene.apache.org>; Tue, 22 Apr 2008 02:51:26 -0400
Received: from corpussmtp1.corp.emc.com (corpussmtp1.corp.emc.com [128.221.10.43])
	by mailhub.lss.emc.com (Switch-3.2.5/Switch-3.1.7) with ESMTP id m3M6pHPQ000542
	for <java-user@lucene.apache.org>; Tue, 22 Apr 2008 02:51:24 -0400 (EDT)
From: Fang_Li@emc.com
Received: from CORPUSMX70A.corp.emc.com ([128.221.32.148]) by corpussmtp1.corp.emc.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 22 Apr 2008 02:51:18 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: how to query against payload
Date: Tue, 22 Apr 2008 02:51:22 -0400
Message-ID: <0C5F3D1247CCF341B9B8DD7B447FA492501AF4@CORPUSMX70A.corp.emc.com>
In-Reply-To: <127FC7CD-BFD4-421C-A65B-2B3D3EAA78BC@apache.org>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: how to query against payload
Thread-Index: Acijt7EKyzBhHn7WSB631tkYN7NVegAiBYsw
References: <0C5F3D1247CCF341B9B8DD7B447FA4925017DB@CORPUSMX70A.corp.emc.com> <127FC7CD-BFD4-421C-A65B-2B3D3EAA78BC@apache.org>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 22 Apr 2008 06:51:18.0377 (UTC) FILETIME=[44303D90:01C8A445]
X-PMX-Version: 4.7.1.128075, Antispam-Engine: 2.5.1.298604, Antispam-Data: 2007.8.30.51425
X-PerlMx-Spam: Gauge=, SPAM=1%, Reason='EMC_FROM_0+ -3, NO_REAL_NAME 0, __CP_URI_IN_BODY 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __IMS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0'
X-Tablus-Inspected: yes
X-Tablus-Classifications: public
X-Tablus-Action: allow
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Grant,
	Thanks for your help.

BoostingTermQuery uses reader.termPositions(term) to get the term
position. In the Term, we cannot put any payload value to find the
result documents. What I want is

Find out all documents which have a specific payload value in a specific
term. We does not care about the value of the term.=20

The reason is we don't want to store the binary information as a value
so that we probably can accelerate the query performance by using
payload. I am not sure this is a good reason to do in this way.

Thanks,

Li


-----Original Message-----
From: Grant Ingersoll [mailto:gsingers@apache.org]=20
Sent: Monday, April 21, 2008 9:57 PM
To: java-user@lucene.apache.org
Subject: Re: how to query against payload


On Apr 21, 2008, at 5:34 AM, Fang_Li@emc.com wrote:

> Hi,
>
>                I want to use payload to store some kind of object id
> which is an arbitrary byte array for better performance. But I do need
> some kind of function like searching against payload value.
>

Have a look at the BoostingTermQuery.  If you need more than that, you =20
could create some new queries using that as a model.

>
>
> Also when the hits are available, how to get the payload of a specific
> term from a document without set the field as stored? Currently I =20
> found
> the only available interface is IndexReader.termPosition(new Term()).
> Looks we need to search again.

https://issues.apache.org/jira/browse/LUCENE-1001.  Note, however, =20
that the patch there is not going to work.  If you can help out on it, =20
that would be great.


>
>
> I've seen there will be per document payload. When will it be ready?
>
>
>
> Thanks,
>
> Fang, Li
>
>
>

--------------------------
Grant Ingersoll

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ







---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33730-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 22 07:37:41 2008
Return-Path: <java-user-return-33730-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16546 invoked from network); 22 Apr 2008 07:37:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Apr 2008 07:37:40 -0000
Received: (qmail 53012 invoked by uid 500); 22 Apr 2008 07:37:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52979 invoked by uid 500); 22 Apr 2008 07:37:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52968 invoked by uid 99); 22 Apr 2008 07:37:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Apr 2008 00:37:29 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cedric.ho@gmail.com designates 209.85.146.183 as permitted sender)
Received: from [209.85.146.183] (HELO wa-out-1112.google.com) (209.85.146.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Apr 2008 07:36:45 +0000
Received: by wa-out-1112.google.com with SMTP id j40so3690923wah.11
        for <java-user@lucene.apache.org>; Tue, 22 Apr 2008 00:36:58 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=poMYPyHGvctYvZwt/nLYjBjO1vF7JYG/xEmQN03tdo8=;
        b=uLSlGsfRcsqsD6JV5pl7mHsp+Grd/Rvm0SceEArx6q7Dap8j9tB/nvwGKRPa/DCxy1nOGiep+pcVMVY0hj5oZXmeasd1FyfNKrFmiXh+PIKxXAEtWMyKzI4lqIKS0zGPuQy3t/38j4u0VGRfczqK+MSnFdsynqg0F1IEQxtaUcw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=R8OL3VgLJyyZqJCP7UyR+uM/z8GDhui0ueQoKEfuz5Xtl9Q7xc9ggjIiVZloORgZtpJzEXoK6SVYwOd8VkancnMfiutCCO5VHg32ernAlIkO/CTJOq7FjTvuxxAoNxJx7+dfZEkr3DONclOlpaEvyEzSgQ3eL42VmhJ3cWjRuxY=
Received: by 10.114.191.1 with SMTP id o1mr4159664waf.66.1208849818492;
        Tue, 22 Apr 2008 00:36:58 -0700 (PDT)
Received: by 10.114.156.18 with HTTP; Tue, 22 Apr 2008 00:36:58 -0700 (PDT)
Message-ID: <839ba01c0804220036h51992647yaecedad17597f0dc@mail.gmail.com>
Date: Tue, 22 Apr 2008 15:36:58 +0800
From: "Cedric Ho" <cedric.ho@gmail.com>
To: java-user@lucene.apache.org
Subject: =?UTF-8?Q?Re:_Need_addtional_info_f?= =?UTF-8?Q?or_Field=EF=BC=88=E5=B8=8C=E6=9C=9B=E7=9C=8B=E5=BE=97?= =?UTF-8?Q?=E6=87=82=E4=B8=AD=E6=96=87=E7=9A=84=E6=9C=8B=E5=8F=8B?= =?UTF-8?Q?=E5=B8=AE=E6=88=91=E5=87=BA=E5=87=BA=E4=B8=BB=E6=84=8F=EF=BC=89?=
In-Reply-To: <016901c8a43f$47c9edd0$b208a8c0@WangJianxin>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline
References: <011601c8a436$87adc240$b208a8c0@WangJianxin>
	 <0C5F3D1247CCF341B9B8DD7B447FA492501A9A@CORPUSMX70A.corp.emc.com>
	 <016901c8a43f$47c9edd0$b208a8c0@WangJianxin>
X-Virus-Checked: Checked by ClamAV on apache.org

SW4gdGhhdCBjYXNlIHlvdSBtYXkgd2FudCB0byBpbmRleCBlYWNoOgoKRmllbGQoIlN1YiIsIuS4
i+WNiOWOu+W8gOS8miLvvIwiMDE6MDI6MDIiKTsKCmFzIGEgc2VwYXJhdGUgZG9jdW1lbnQuIFNv
IHlvdXIgZG9jdW1lbnQgY29udGFpbnMgMyBmaWVsZHMKMS4gdGl0bGUKMi4gdGltZQozLiBzdWIK
CnRoZW4geW91IGNhbiBnZXQgYm90aCB0aXRsZSBhbmQgdGltZSBieSBzZWFyY2hpbmcgdGhlICJz
dWIiIGZpZWxkLgoKQ2VkcmljCgoKMjAwOC80LzIyIOeOi+W7uuaWsCA8bGlldXRyb3lAZ21haWwu
Y29tPjoKPgo+ICDosKLosKLvvIzmiJHlj6rmmK/mo4DntKJzdWLvvIzkuI3mo4DntKLml7bpl7Tv
vIzlnKjmo4DntKJzdWLml7bvvIzlj6rmg7PlvpfliLDljLnphY1GaWVsZOWvueW6lOeahOaXtumX
tOOAggo+ICDnlKhwYXlsb2Fk5Ly85LmO5LiN5Y+v5Lul77yfCj4KPgo+Cj4gIC0tLS0tIE9yaWdp
bmFsIE1lc3NhZ2UgLS0tLS0KPiAgRnJvbTogPEZhbmdfTGlAZW1jLmNvbT4KPiAgVG86IDxqYXZh
LXVzZXJAbHVjZW5lLmFwYWNoZS5vcmc+Cj4gIFNlbnQ6IFR1ZXNkYXksIEFwcmlsIDIyLCAyMDA4
IDE6NTUgUE0KPiAgU3ViamVjdDogUkU6IE5lZWQgYWRkdGlvbmFsIGluZm8gZm9yIEZpZWxk77yI
5biM5pyb55yL5b6X5oeC5Lit5paH55qE5pyL5Y+L5biu5oiR5Ye65Ye65Li75oSP77yJCj4KPgo+
ICBUcnkgdG8gdXNlIHBheWxvYWQgd2hpY2ggaXMgc3RvcmVkIGFzIGFkZGl0aW9uYWwgaW5mb3Jt
YXRpb24uIEN1cnJlbnRseSBsdWNlbmUgb25seSBzdXBwb3J0IHBlciB0b2tlbiBwYXlsb2FkLCBi
dXQgeW91IGNhbiBhZGQgYW4gYXJiaXRyYXJ5IHRva2VuIGZvciB0aGUgdGltZSBpbmZvcm1hdGlv
bi4KPgo+ICBJIGFtIG5vdCBzdXJlIHdoYXQgYXJlIHRoZSBxdWVyeSBpbmZvcm1hdGlvbj8gT25s
eSB0aGUgc3VidGl0bGUgb3IgYm90aCBzdWJ0aXRsZSBhbmQgdGltZT8KPgo+ICBSZWdhcmRzLAo+
Cj4gIC0tLS0tT3JpZ2luYWwgTWVzc2FnZS0tLS0tCj4gIEZyb206IOeOi+W7uuaWsCBbbWFpbHRv
OmxpZXV0cm95QGdtYWlsLmNvbV0KPiAgU2VudDogVHVlc2RheSwgQXByaWwgMjIsIDIwMDggMTow
NiBQTQo+ICBUbzogamF2YS11c2VyCj4gIFN1YmplY3Q6IE5lZWQgYWRkdGlvbmFsIGluZm8gZm9y
IEZpZWxk77yI5biM5pyb55yL5b6X5oeC5Lit5paH55qE5pyL5Y+L5biu5oiR5Ye65Ye65Li75oSP
77yJCj4KPiAg55So6Iux5paH5Y+v6IO95o+P6L+w5b6X5LiN5piv5b6I5riF5qWa77yM5LiN5aW9
5oSP5oCd77ya77yJCj4KPgo+ICAtLS0tLSBPcmlnaW5hbCBNZXNzYWdlIC0tLS0tCj4gIEZyb206
IOeOi+W7uuaWsAo+ICBUbzogQ2hyaXMKPiAgU2VudDogVHVlc2RheSwgQXByaWwgMjIsIDIwMDgg
OTo1MiBBTQo+ICBTdWJqZWN0OiBSZTogTmVlZCBhZGR0aW9uYWwgaW5mbyBmb3IgRmllbGQKPgo+
Cj4gIOiwouiwouOAggo+ICDmiJHnmoTpl67popjmmK/ov5nmoLfnmoTvvJropoHlr7nkuIDmibno
p4bpopHmlofku7YodmlkZW8p5bu656uL57Si5byVKGluZGV4Ke+8jOWcqOW7uueri+e0ouW8leS5
i+WJje+8jOaIkeW3sue7j+WIhuaekOWHuuS6huWcqOinhumikeeahOS7gOS5iOaXtumXtOWHuueO
sOS6huS7gOS5iOagt+eahOWtl+W5leWGheWuueOAggo+ICDlnKjov5nnp43mg4XlhrXkuIvvvIzk
uIDkuKrop4bpopHoioLnm67lsLHnm7jlvZPkuo7kuIDkuKpEb2N1bWVudCzpgqPkuYjpnIDopoEo
5biM5pybKeWvueWtl+W5leW7uueri+e0ouW8le+8jOWmguS4i++8mgo+ICAgICBGaWVsZCgiU3Vi
Iiwi5LiL5Y2I5Y675byA5LyaIu+8jCIwMTowMjowMiIpOwo+ICAgICBGaWVsZCgiU3ViIiwi5ZCO
5aSp5Y675byA5LyaIu+8jCIwMTowMzowNSIpOwo+ICAgICBb5rOo77yaIjAxOjAyOjAyIuaYr+mZ
hOWxnueahOaXtumXtO+8jGx1Y2VuZeayoeacieaPkOS+m+i/meenjeeUqOazleOAgl0KPgo+ICDo
v5nkuKTkuKpGaWVsZOihqOekuuWcqOW9k+WJjeeahOinhumikeiKguebruS4re+8jOWcqDAxOjAy
OjAy5pe26Ze05Ye6546w5LqG5a2X5bmVIuS4i+WNiOWOu+W8gOS8miLvvIzlnKgwMTowMzowNeaX
tumXtOWHuueOsOS6hiLlkI7lpKnljrvlvIDkvJoi77yM5aaC5p6c55So5oi3KFVzZXIp5pCc57Si
IuS4i+WNiCLvvIzlvZPliY3op4bpopHoioLnm67mmK/lj6/ku6XljLnphY3nmoTvvIzkvYbmmK/l
j6rljLnphY3liLDkuobnrKzkuIDkuKpGaWVsZO+8jOWPqumcgOimgeefpemBk+aXtumXtCIwMTow
MjowMiLjgILlpoLmnpznlKjmiLfmkJzntKIi5byA5LyaIu+8jOWImeS4pOS4qkZpZWxk6YO95Y+v
5Lul5Yy56YWN5Yiw44CC5Zug5q2k6ZyA6KaB55+l6YGT5pe26Ze0IjAxOjAyOjAyIuWSjCIwMTow
MzowNSLjgIIKPiAg5LiN55+l6YGT5oiR5pyJ5rKh5pyJ6K+05riF5qWa44CCCj4KPiAg5oiR5oOz
55+l6YGTbHVjZW5l5piv5LiN5piv5Y+v5Lul6YCa6L+H5p+Q56eN5pa55byP6Kej5Yaz6L+Z5Liq
6Zeu6aKY77yM5aaC5p6c5LiN6KGM55qE6K+d77yM6ZyA6KaB5oCO5qC35L+u5pS5bHVjZW5l5ZGi
77yfCj4KPiAg546L5bu65pawCj4gICAtLS0tLSBPcmlnaW5hbCBNZXNzYWdlIC0tLS0tCj4gICBG
cm9tOiBDaHJpcwo+ICAgVG86IOeOi+W7uuaWsAo+ICAgU2VudDogTW9uZGF5LCBBcHJpbCAyMSwg
MjAwOCA3OjM0IFBNCj4gICBTdWJqZWN0OiBSZTogTmVlZCBhZGR0aW9uYWwgaW5mbyBmb3IgRmll
bGQKPgo+Cj4gICDmgqjnmoTlip/og73lj6/ku6Xlho3muIXmpZrkuIDpu57ll47vvIzlm6Dngrrl
hbblr6bpgJnmqKPomZXnkIbvvIzlpb3lg4/opoHmlrfoqZ4uLi4uCj4KPiAgIOS9hueci+WIsOaC
qOaykuaWt++8jOiAjOS4lOashOS9jeWQjeeoseS4gOaoo+aYryBtdWx0aS1wYWlyIOWAvOeahOip
se+8jOS4jeaYr+eUqCBTdHJpbmcg5a2Y5ZOmCj4KPiAgIOS7peS4igo+ICAgICAgICAgICAgICAg
ICAgICAgIENocmlzLgo+Cj4KPiAgIDIwMDgvNC8yMSwg546L5bu65pawIDxsaWV1dHJveUBnbWFp
bC5jb20+Ogo+ICAgICDkvaDnnIvlvpfmh4LkuK3mloflkJfvvJ8KPgo+ICAgICDmiJHkuI3mmK/l
vojmmI7nmb3kvaDnmoTmhI/mgJ3jgIIKPiAgICAg5L2g5piv6K+05Y+v5Lul55SobHVjZW5l546w
5pyJ55qE5Yqf6IO95p2l6Kej5Yaz6L+Z5Liq6Zeu6aKY5ZCX77yfCj4KPiAgICAgICAtLS0tLSBP
cmlnaW5hbCBNZXNzYWdlIC0tLS0tCj4gICAgICAgRnJvbTogQ2hyaXMKPiAgICAgICBUbzog546L
5bu65pawCj4gICAgICAgU2VudDogTW9uZGF5LCBBcHJpbCAyMSwgMjAwOCA1OjE0IFBNCj4gICAg
ICAgU3ViamVjdDogUmU6IE5lZWQgYWRkdGlvbmFsIGluZm8gZm9yIEZpZWxkCj4KPgo+ICAgICAg
IFRoaXMgcHJvYmxlbSBpcyBub3Qgc29sdmUgd2l0aCBsdWNlbmUgYnV0IG9yIG1ldGhvZCB3aWxs
IHNvbHZlIGl0Lgo+Cj4gICAgICAgVGhlIHN0cnVjdHVyZSBpcyBub3QgZGVmaW5lIGFzIHRoaXMg
YXMgd2VsbCAuLi4uLi4KPgo+ICAgICAgIFlvdSBtYXkgY2hlY2sgaXQgY2xlYXIuLi4uCj4KPiAg
ICAgICBhYm92ZQo+ICAgICAgICAgICAgICAgICAgICAgIENocmlzLgo+Cj4KPiAgICAgICAyMDA4
LzQvMjEsIOeOi+W7uuaWsCA8bGlldXRyb3lAZ21haWwuY29tPjoKPiAgICAgICAgIGhpIENocmlz
LCBpdCBpcyBtZSAi546L5bu65pawIgo+Cj4gICAgICAgICBJIGhhdmUgYSBuZXcgcHJvYmxlbSwg
Q291bGQgeW91IGdpdmUgbWUgYW55IGFkdmljZT8gVGhhbmsgeW91Lgo+Cj4KPiAgICAgICAgIEkg
d2FudCB0byB1c2UgbHVjZW5lIHdpdGggc29tZSBhZGRpdGlvbmFsIGluZm8sbGlrZToKPgo+ICAg
ICAgICAgMS5pbmRleAo+ICAgICAgICAgICAgIERvY3VtZW50IGFkZGl0aW9uYWxEb2M9ZXcgRG9j
dW1lbnQoKQo+Cj4gICAgICAgICAgICAgYWRkaXRpb25hbERvYy5hZGQobmV3IEZpZWxkKCJmaWVs
ZCIsIkFBIEJCIiwiQWRkdGlvbmFsIGluZm8gLi4uLi4uLi4uLi4uLi4uIikpOwo+ICAgICAgICAg
ICAgIGFkZGl0aW9uYWxEb2MuYWRkKG5ldyBGaWVsZCgiZmllbGQiLCJCQiBDQyIsIkFkZHRpb25h
bCBpbmZvIDIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMi4uLi4uLi4uLi4uLi4uLiIpKTsKPgo+ICAg
ICAgICAgICAgIHdyaXRlci5hZGREb2N1bWVudChhZGRpdGlvbmFsRG9jKQo+Cj4gICAgICAgICAg
ICAgLi4uLi4uLi4KPgo+Cj4gICAgICAgICAyLiBzZWFyY2gKPgo+ICAgICAgICAgICAgIFNlYXJj
aGVyIHNlYXJjaGVyOwo+ICAgICAgICAgICAgIC4uLi4KPgo+ICAgICAgICAgICAgIHNlYXJjaGVy
LnNlYXJjaCh0ZXJtUXVlcnkoImZpZWxkIiwiQkIiKSk7Cj4KPgo+Cj4KPiAgICAgICAgICAgICBp
biB0aGlzIGNvbmRpdGlvbiwgSSB3YW50IGx1Y2VuZSByZXR1cm5zIHRoZSBhZGRpdGlvbmFsRG9j
ICwgYWxzbyBrbm93IHdoaWNoIGZpbGVkcyB3ZXJlIG1hdGNoZWQsIHRoZW4gSSB3aWxsIGdldCB0
aGUgYWRkaXRpb25hbCBpbmZvIGZyb20gdGhlIG1hdGNoZWQgZmllbGRzLgo+Cj4gICAgICAgICBD
YW4gbHVjZW5lIG1ha2UgaXQgaW4gdmVyc2lvbiAyLjMuMT8KPgo+Cj4KPiAgICAgICAtLQo+ICAg
ICAgIENocmlzIExpbgo+ICAgICAgIGNocmlzbGluMDQyNkBnbWFpbC5jb20KPiAgICAgICBUYWlw
ZWkgLCBUYWl3YW4uCj4gICAgICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KPgo+Cj4KPiAgIC0tCj4gICBDaHJpcyBMaW4KPiAgIGNo
cmlzbGluMDQyNkBnbWFpbC5jb20KPiAgIFRhaXBlaSAsIFRhaXdhbi4KPiAgIC0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4KPiAgLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tCj4gIFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmli
ZUBsdWNlbmUuYXBhY2hlLm9yZwo+ICBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBq
YXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZwo+Cg==


From java-user-return-33731-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 22 09:57:48 2008
Return-Path: <java-user-return-33731-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80401 invoked from network); 22 Apr 2008 09:57:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Apr 2008 09:57:48 -0000
Received: (qmail 25843 invoked by uid 500); 22 Apr 2008 09:57:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25420 invoked by uid 500); 22 Apr 2008 09:57:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25409 invoked by uid 99); 22 Apr 2008 09:57:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Apr 2008 02:57:41 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Apr 2008 09:56:54 +0000
Received: by ug-out-1314.google.com with SMTP id u40so79855ugc.29
        for <java-user@lucene.apache.org>; Tue, 22 Apr 2008 02:57:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=jaIOez8MZ52D8+5ekXbxz1zKWbFokqO3D16DvLNgzCA=;
        b=Mx5s11kHZAvyjDQCgtVhxBiLV2VDbo+NI4wg6UvAjEv3JJiQorn8ytRW/eQB7FsM33HeQr0k3LoYrKk8Ugh40d9Z2vAdnhT9+qwnJRTmoS4EbCnXzQAJVycujsipIouJi96Ir0jMp4q7qXFCK8ajxj05nb2ibKfQeRni2DJfpes=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=ZbXuEOC6IWVfxaOXgkHvWnaDp3cRt5yMIUECWg36metVxhQXW793xGkhn8x+yuv/oKhZO9E3APNyHEq4aGGyQaznIy8t/B4+oBpn5/KdnjOERSYiyNr0LiVMxRIkbrjDesymue6vAOKvxRS1BoG3GucirG+iDgmOfuUh3QKa1Es=
Received: by 10.66.237.14 with SMTP id k14mr6659498ugh.72.1208858226729;
        Tue, 22 Apr 2008 02:57:06 -0700 (PDT)
Received: from kodapan.lan ( [82.93.70.124])
        by mx.google.com with ESMTPS id u1sm10446324uge.14.2008.04.22.02.57.05
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 22 Apr 2008 02:57:05 -0700 (PDT)
Message-ID: <480DB66F.40201@gmail.com>
Date: Tue, 22 Apr 2008 11:57:03 +0200
From: Karl Wettin <karl.wettin@gmail.com>
User-Agent: Thunderbird 2.0.0.12 (Macintosh/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: How to Retrieve Found Term?
References: <BLU141-W28F8F371F9A8BAC9838715EFE70@phx.gbl> <480A4F8D.80003@gmail.com> <BLU141-W219D94522080CD4BFC18F3EFE60@phx.gbl>
In-Reply-To: <BLU141-W219D94522080CD4BFC18F3EFE60@phx.gbl>
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I can think of  two ways to get your hands on this information, simplest
one beeing you creating a filter with the documents that mached your
original query and then place new queries on the index with slop, non
slop, et c to find out whats what. This will of couse be very expensive
and is thus only an interesting solution for you if the response time is
good enough.

The second and cleaner solution is to create your custom Query(ies) or
hack the Weight of the queries you are currently using and have them
store this information when matching. A good implementation of this
would probably be a welcomed contribution to the project.

     karl



Edwin Lee skrev:
> Hi Karl,
> 
> Thanks for the response. i have looked at the Highlighter. Unfortunately, when i feed it with a PhraseQuery, it seems to break up the query into it's individual terms first, so does not yield the result that i would like. i have not looked at Searcher.explain yert though.
> 
> It's like this. Two types of searches are required: single term with wildcard, and phrase query with non-zero slop. But either could return large number of results, some of which are not what is wanted. So there needs to be an intermediate filter screen like this:
> apples and oranges 25 hits found
> oranges and apples 70 hits found
> and apples oranges 5 hits found
> ...
> 
> so that we can choose to not to display results which correspond to the found phrases that we are not interested in, and when we get to the display screen, it's just the results we want.
> 
> 
> 
> Thanks,
> Edwin
> 
> 
> 
> ----------------------------------------
>> Date: Sat, 19 Apr 2008 22:01:17 +0200
>> From: karl.wettin@gmail.com
>> To: java-user@lucene.apache.org
>> Subject: Re: How to Retrieve Found Term?
>>
>> Edwin Lee skrev:
>>> Hi all,
>>>
>>> i'm using Lucene 2.3.1. What i'm trying to do seems straightforward enough (to me), but i just can't find the method to do so.
>>>
>>> Let's say i'm doing a PhraseQuery of the phrase "apples and oranges" with a non-zero slop value, and it returns, e.g., 20 Hits. Because i'm using non-zero slop value, the phrase that actually gets found could be something like "oranges and apples" instead. i would like to find out, for each of the Hit returned, what is the actual term from the document that was found. How can i do that?
> 
>> There is no built in support in Lucene for that. You can take a look at
>> what Searcher.explain and the Highlighter does.
>>
>> If you tell us why you want to do this perhaps we can come up with an
>> alternative solution.
>>
>>             karl
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> 
> _________________________________________________________________
> Publish your photos to your Space easily with Photo Gallery.
> http://www.get.live.com/wl/all
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33732-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 22 10:29:14 2008
Return-Path: <java-user-return-33732-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91864 invoked from network); 22 Apr 2008 10:29:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Apr 2008 10:29:14 -0000
Received: (qmail 69611 invoked by uid 500); 22 Apr 2008 10:29:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69579 invoked by uid 500); 22 Apr 2008 10:29:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69568 invoked by uid 99); 22 Apr 2008 10:29:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Apr 2008 03:29:07 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of edwin11_79@hotmail.com designates 65.55.175.157 as permitted sender)
Received: from [65.55.175.157] (HELO blu139-omc1-s17.blu139.hotmail.com) (65.55.175.157)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Apr 2008 10:28:11 +0000
Received: from BLU141-W41 ([65.55.162.181]) by blu139-omc1-s17.blu139.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Tue, 22 Apr 2008 03:28:31 -0700
Message-ID: <BLU141-W413A8DB89F258F74D442ECEFE00@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_d31bcb90-eb96-487f-8415-e051f3bba3fd_"
X-Originating-IP: [203.126.130.140]
From: Edwin Lee <edwin11_79@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: How to Retrieve Found Term?
Date: Tue, 22 Apr 2008 18:28:31 +0800
Importance: Normal
In-Reply-To: <480DB66F.40201@gmail.com>
References: <BLU141-W28F8F371F9A8BAC9838715EFE70@phx.gbl>
 <480A4F8D.80003@gmail.com> <BLU141-W219D94522080CD4BFC18F3EFE60@phx.gbl>
 <480DB66F.40201@gmail.com>
MIME-Version: 1.0
X-OriginalArrivalTime: 22 Apr 2008 10:28:31.0572 (UTC) FILETIME=[9C93F940:01C8A463]
X-Virus-Checked: Checked by ClamAV on apache.org

--_d31bcb90-eb96-487f-8415-e051f3bba3fd_
Content-Type: text/plain; charset="gb2312"
Content-Transfer-Encoding: 8bit


Hi Karl,

Thanks for the suggestions, i would be glad to contribute back to the project.

i'm not too familiar with the inner workings of Lucene though; how does such a functionality feature in a Query implementation?

My naive interpretation, when i first got hold of Lucene, is that Query is what you want to search, then the Searcher would do the work, against the Directory which contains the indexed materials, producing Hits which contains search results. So my initial (also naive) thought was that Hit would contain what i wanted (the found term).



Regards,
Edwin



> Date: Tue, 22 Apr 2008 11:57:03 +0200
> From: karl.wettin@gmail.com
> To: java-user@lucene.apache.org
> Subject: Re: How to Retrieve Found Term?
> 
> I can think of  two ways to get your hands on this information, simplest
> one beeing you creating a filter with the documents that mached your
> original query and then place new queries on the index with slop, non
> slop, et c to find out whats what. This will of couse be very expensive
> and is thus only an interesting solution for you if the response time is
> good enough.
> 
> The second and cleaner solution is to create your custom Query(ies) or
> hack the Weight of the queries you are currently using and have them
> store this information when matching. A good implementation of this
> would probably be a welcomed contribution to the project.


_________________________________________________________________
Get your free suite of Windows Live services today!
http://www.get.live.com/wl/all
--_d31bcb90-eb96-487f-8415-e051f3bba3fd_--

From java-user-return-33733-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 22 10:48:36 2008
Return-Path: <java-user-return-33733-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3445 invoked from network); 22 Apr 2008 10:48:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Apr 2008 10:48:36 -0000
Received: (qmail 3682 invoked by uid 500); 22 Apr 2008 10:48:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3465 invoked by uid 500); 22 Apr 2008 10:48:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3454 invoked by uid 99); 22 Apr 2008 10:48:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Apr 2008 03:48:29 -0700
X-ASF-Spam-Status: No, hits=2.7 required=10.0
	tests=SPF_NEUTRAL,WEIRD_PORT
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.242] (HELO an-out-0708.google.com) (209.85.132.242)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Apr 2008 10:47:41 +0000
Received: by an-out-0708.google.com with SMTP id c5so581492anc.49
        for <java-user@lucene.apache.org>; Tue, 22 Apr 2008 03:47:50 -0700 (PDT)
Received: by 10.100.10.15 with SMTP id 15mr15292anj.152.1208861269600;
        Tue, 22 Apr 2008 03:47:49 -0700 (PDT)
Received: by 10.100.154.5 with HTTP; Tue, 22 Apr 2008 03:47:49 -0700 (PDT)
Message-ID: <9ac0c6aa0804220347hd028acbv319623ab9874a0a8@mail.gmail.com>
Date: Tue, 22 Apr 2008 06:47:49 -0400
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org, stuhood@mailtrust.com
Subject: Re: FW: Re: Occasional Hang in IndexWriter.close()
In-Reply-To: <42657.192.168.1.71.1208813083.webmail@192.168.1.71>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <42657.192.168.1.71.1208813083.webmail@192.168.1.71>
X-Virus-Checked: Checked by ClamAV on apache.org

OK this output was very helpful, thanks!  I think I see what's
happening here.

Basically a merge can sneak in when Lucene doesn't expect it to (on
copying a single external segment over), and as a result it never gets
scheduled.  This happens only with addIndexesNoOptimize, when the
index you adding was created with autoCommit=false, and when the size
of the indices being added is such that some segments need to just be
copied over.

I'll open an issue & fix it, and port to 2.3.2.

Mike


Stu Hood <stuhood@mailtrust.com> wrote:
> Hey gang,
>
>  The finally block was not hiding any exceptions: I'm still seeing the hangs in IndexWriter.close(). I'm appending the relevant output from 'setInfoStream(System.out)'. It looks like after I order the close, the IndexWriter begins a flush, and then hangs.
>
>  Any ideas?
>
>  Thanks,
>  Stu
>
>
>  >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
>
>
>  IFD [main]: setInfoStream deletionPolicy=org.apache.lucene.index.KeepOnlyLastCommitDeletionPolicy@18bbc5a
>  IW 0 [main]: setInfoStream: dir=org.apache.lucene.store.FSDirectory@/data1/solr/solr_dovecot1208772000-1208808000_f0cad01b1cb2966a/index autoCommit=true mergePolicy=org.apache.lucene.index.LogByteSizeMergePolicy@facf0b mergeScheduler=org.apache.lucene.index.ConcurrentMergeScheduler@2f0df1 ramBufferSizeMB=16.0 maxBuffereDocs=-1 maxBuffereDeleteTerms=-1 maxFieldLength=10000 index=_dn:C1349678 _j6:C1149270 _j5:C249194 _m4:C242243 _mf:C224430 _mk:C70616 _ml:C88 _mp:C50000 _mo:C9905
>  IW 0 [main]: setMergeScheduler org.apache.lucene.index.SerialMergeScheduler@13c6a22
>  >> Fetching hdfs://hadoop.sat.mlsrvr.com:54310/user/hadoopuser/indexed/dovecot/1208807515-1208808145-1208808184/part-00004 into a RAMDirectory:
>  >> .. done. Size: 22053888
>  >> Merging directories to solr_dovecot1208772000-1208808000_f0cad01b1cb2966a (factor: 4):
>  IW 0 [main]: flush at addIndexesNoOptimize
>  IW 0 [main]:   flush: segment=null docStoreSegment=null docStoreOffset=0 flushDocs=false flushDeletes=false flushDocStores=false numDocs=0 numBufDelTerms=0
>  IW 0 [main]:   index before flush _dn:C1349678 _j6:C1149270 _j5:C249194 _m4:C242243 _mf:C224430 _mk:C70616 _ml:C88 _mp:C50000 _mo:C9905
>  IW 0 [main]: now start transaction
>  IW 0 [main]: flush at startTransaction
>  IW 0 [main]:   flush: segment=null docStoreSegment=null docStoreOffset=0 flushDocs=false flushDeletes=false flushDocStores=false numDocs=0 numBufDelTerms=0
>  IW 0 [main]:   index before flush _dn:C1349678 _j6:C1149270 _j5:C249194 _m4:C242243 _mf:C224430 _mk:C70616 _ml:C88 _mp:C50000 _mo:C9905
>  IW 0 [main]: LMP: findMerges: 20 segments
>  IW 0 [main]: LMP:   level 13.601146 to 14.351146: 2 segments
>  IW 0 [main]: LMP:   level 12.390487 to 13.140487: 3 segments
>  IW 0 [main]: LMP:   level 11.542906 to 12.292906: 3 segments
>  IW 0 [main]: LMP:   level 10.656786 to 11.406786: 2 segments
>  IW 0 [main]: LMP:   level -1.0 to 8.768208: 10 segments
>  IW 0 [main]: LMP:     10 to 14: add this merge
>  IW 0 [main]: LMP:     14 to 18: add this merge
>  IW 0 [main]: add merge to pendingMerges: _1f:Cx1000->_0 _1g:Cx1000->_0 _1h:Cx1000->_0 _1i:Cx1000->_0 [total 1 pending]
>  IW 0 [main]: add merge to pendingMerges: _1j:Cx1000->_0 _1k:Cx1000->_0 _1l:Cx1000->_0 _1m:Cx1000->_0 [total 2 pending]
>  IW 0 [main]: now merge
>   merge=_1f:Cx1000->_0 _1g:Cx1000->_0 _1h:Cx1000->_0 _1i:Cx1000->_0 into _mq
>   index=_dn:C1349678 _j6:C1149270 _j5:C249194 _m4:C242243 _mf:C224430 _mk:C70616 _ml:C88 _mp:C50000 _mo:C9905 _1e:Cx50000->_0 _1f:Cx1000->_0 _1g:Cx1000->_0 _1h:Cx1000->_0 _1i:Cx1000->_0 _1j:Cx1000->_0 _1k:Cx1000->_0 _1l:Cx1000->_0 _1m:Cx1000->_0 _1n:Cx1000->_0 _1o:Cx857->_0
>  IW 0 [main]: merging _1f:Cx1000->_0 _1g:Cx1000->_0 _1h:Cx1000->_0 _1i:Cx1000->_0 into _mq
>  IW 0 [main]: merge: total 4000 docs
>  IW 0 [main]: commitMerge _1f:Cx1000->_0 _1g:Cx1000->_0 _1h:Cx1000->_0 _1i:Cx1000->_0 into _mq
>  IFD [main]: now checkpoint "segments_m" [17 segments ; isCommit = false]
>  IW 0 [main]: LMP: findMerges: 17 segments
>  IW 0 [main]: LMP:   level 13.601146 to 14.351146: 2 segments
>  IW 0 [main]: LMP:   level 12.390487 to 13.140487: 3 segments
>  IW 0 [main]: LMP:   level 11.542906 to 12.292906: 3 segments
>  IW 0 [main]: LMP:   level 10.656786 to 11.406786: 2 segments
>  IW 0 [main]: LMP:   level -1.0 to 10.283832: 7 segments
>  IW 0 [main]: LMP:     10 to 14: add this merge
>  IW 0 [main]: now merge
>   merge=_1j:Cx1000->_0 _1k:Cx1000->_0 _1l:Cx1000->_0 _1m:Cx1000->_0 into _mr
>   index=_dn:C1349678 _j6:C1149270 _j5:C249194 _m4:C242243 _mf:C224430 _mk:C70616 _ml:C88 _mp:C50000 _mo:C9905 _1e:Cx50000->_0 _mq:C4000 _1j:Cx1000->_0 _1k:Cx1000->_0 _1l:Cx1000->_0 _1m:Cx1000->_0 _1n:Cx1000->_0 _1o:Cx857->_0
>  IW 0 [main]: merging _1j:Cx1000->_0 _1k:Cx1000->_0 _1l:Cx1000->_0 _1m:Cx1000->_0 into _mr
>  IW 0 [main]: merge: total 4000 docs
>  IW 0 [main]: commitMerge _1j:Cx1000->_0 _1k:Cx1000->_0 _1l:Cx1000->_0 _1m:Cx1000->_0 into _mr
>  IFD [main]: now checkpoint "segments_m" [14 segments ; isCommit = false]
>  IW 0 [main]: LMP: findMerges: 14 segments
>  IW 0 [main]: LMP:   level 13.601146 to 14.351146: 2 segments
>  IW 0 [main]: LMP:   level 12.390487 to 13.140487: 3 segments
>  IW 0 [main]: LMP:   level 11.542906 to 12.292906: 3 segments
>  IW 0 [main]: LMP:   level 10.656786 to 11.406786: 2 segments
>  IW 0 [main]: LMP:   level -1.0 to 10.284627: 4 segments
>  IW 0 [main]: LMP:     10 to 14: add this merge
>  IW 0 [main]: add merge to pendingMerges: _mq:C4000 _mr:C4000 _1n:Cx1000->_0 _1o:Cx857->_0 [total 1 pending]
>  IW 0 [main]: now merge
>   merge=_mq:C4000 _mr:C4000 _1n:Cx1000->_0 _1o:Cx857->_0 into _ms
>   index=_dn:C1349678 _j6:C1149270 _j5:C249194 _m4:C242243 _mf:C224430 _mk:C70616 _ml:C88 _mp:C50000 _mo:C9905 _1e:Cx50000->_0 _mq:C4000 _mr:C4000 _1n:Cx1000->_0 _1o:Cx857->_0
>  IW 0 [main]: merging _mq:C4000 _mr:C4000 _1n:Cx1000->_0 _1o:Cx857->_0 into _ms
>  IW 0 [main]: merge: total 9857 docs
>  IW 0 [main]: commitMerge _mq:C4000 _mr:C4000 _1n:Cx1000->_0 _1o:Cx857->_0 into _ms
>  IFD [main]: now checkpoint "segments_m" [11 segments ; isCommit = false]
>  IFD [main]: delete "_mq.fnm"
>  IFD [main]: delete "_mq.frq"
>  IFD [main]: delete "_mq.prx"
>  IFD [main]: delete "_mq.tis"
>  IFD [main]: delete "_mq.tii"
>  IFD [main]: delete "_mq.nrm"
>  IFD [main]: delete "_mq.fdx"
>  IFD [main]: delete "_mq.fdt"
>  IFD [main]: delete "_mr.fnm"
>  IFD [main]: delete "_mr.frq"
>  IFD [main]: delete "_mr.prx"
>  IFD [main]: delete "_mr.tis"
>  IFD [main]: delete "_mr.tii"
>  IFD [main]: delete "_mr.nrm"
>  IFD [main]: delete "_mr.fdx"
>  IFD [main]: delete "_mr.fdt"
>  IW 0 [main]: LMP: findMerges: 11 segments
>  IW 0 [main]: LMP:   level 13.601146 to 14.351146: 2 segments
>  IW 0 [main]: LMP:   level 12.390487 to 13.140487: 3 segments
>  IW 0 [main]: LMP:   level 11.542906 to 12.292906: 3 segments
>  IW 0 [main]: LMP:   level 10.656786 to 11.406786: 3 segments
>  IW 0 [main]: add merge to pendingMerges: _1e:Cx50000->_0 [total 1 pending]
>  IW 0 [main]: now merge
>   merge=_1e:Cx50000->_0 into _mt
>   index=_dn:C1349678 _j6:C1149270 _j5:C249194 _m4:C242243 _mf:C224430 _mk:C70616 _ml:C88 _mp:C50000 _mo:C9905 _1e:Cx50000->_0 _ms:C9857
>  IW 0 [main]: merging _1e:Cx50000->_0 into _mt
>  IW 0 [main]: merge: total 50000 docs
>  IW 0 [main]: commitMerge _1e:Cx50000->_0 into _mt
>  IFD [main]: now checkpoint "segments_m" [11 segments ; isCommit = false]
>  IW 0 [main]: LMP: findMerges: 11 segments
>  IW 0 [main]: LMP:   level 13.601146 to 14.351146: 2 segments
>  IW 0 [main]: LMP:   level 12.390487 to 13.140487: 3 segments
>  IW 0 [main]: LMP:   level 11.542906 to 12.292906: 5 segments
>  IW 0 [main]: LMP:     5 to 9: add this merge
>  IW 0 [main]: LMP:   level 10.339036 to 10.916957: 1 segments
>  IW 0 [main]: add merge to pendingMerges: _mk:C70616 _ml:C88 _mp:C50000 _mo:C9905 [total 1 pending]
>  IW 0 [main]: now commit transaction
>  IW 0 [main]: checkpoint: wrote segments file "segments_n"
>  IFD [main]: now checkpoint "segments_n" [11 segments ; isCommit = true]
>  IFD [main]: deleteCommits: now remove commit "segments_m"
>  IFD [main]: delete "segments_m"
>  >> ... done.
>  >> Closing the target index...
>  IW 0 [main]: now flush at close
>  IW 0 [main]:   flush: segment=null docStoreSegment=null docStoreOffset=0 flushDocs=false flushDeletes=false flushDocStores=false numDocs=0 numBufDelTerms=0
>  IW 0 [main]:   index before flush _dn:C1349678 _j6:C1149270 _j5:C249194 _m4:C242243 _mf:C224430 _mk:C70616 _ml:C88 _mp:C50000 _mo:C9905 _mt:C50000 _ms:C9857
>
>
>
>
>  >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
>
>
>  -----Original Message-----
>  From: Stu Hood <stuhood@mailtrust.com>
>  Sent: Sunday, April 20, 2008 3:41pm
>  To: java-user@lucene.apache.org
>
>
> Subject: Re: Occasional Hang in IndexWriter.close()
>
>  Hey Mike,
>
>  Thanks for your input... the 'IndexWriter.close' call was actually in a 'finally' block around the merge code, without a 'catch', which I realized may have been hiding the exception (I didn't realize close would block if an exception had occurred).
>
>  I've moved the close out of the finally block, so hopefully if an exception was being hidden, I'll see it and report back.
>
>  Thanks,
>  Stu
>
>
>
>  -----Original Message-----
>  From: Michael McCandless <lucene@mikemccandless.com>
>  Sent: Saturday, April 19, 2008 4:40am
>  To: java-user@lucene.apache.org, stuhood@mailtrust.com
>  Subject: Re: Occasional Hang in IndexWriter.close()
>
>
>
>
>  ---------------------------------------------------------------------
>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>  ---------------------------------------------------------------------
>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33734-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 22 10:49:34 2008
Return-Path: <java-user-return-33734-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3835 invoked from network); 22 Apr 2008 10:49:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Apr 2008 10:49:34 -0000
Received: (qmail 6222 invoked by uid 500); 22 Apr 2008 10:49:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6194 invoked by uid 500); 22 Apr 2008 10:49:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6183 invoked by uid 99); 22 Apr 2008 10:49:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Apr 2008 03:49:27 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.81] (HELO spunkymail-a2.g.dreamhost.com) (208.97.132.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Apr 2008 10:48:42 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a2.g.dreamhost.com (Postfix) with ESMTP id 4306D880D8
	for <java-user@lucene.apache.org>; Tue, 22 Apr 2008 03:48:54 -0700 (PDT)
Message-Id: <266B2EA3-E71A-4165-B6D9-5EBDF5137D31@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <0C5F3D1247CCF341B9B8DD7B447FA492501AF4@CORPUSMX70A.corp.emc.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: how to query against payload
Date: Tue, 22 Apr 2008 06:48:53 -0400
References: <0C5F3D1247CCF341B9B8DD7B447FA4925017DB@CORPUSMX70A.corp.emc.com> <127FC7CD-BFD4-421C-A65B-2B3D3EAA78BC@apache.org> <0C5F3D1247CCF341B9B8DD7B447FA492501AF4@CORPUSMX70A.corp.emc.com>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Hmmm, sounds like you need a new Query.   I _think_ it could be  
something as simple as MutliplicativeTermQuery or something like that  
whereby instead of adding the score of the payload callback, you would  
multiple.  That way, if the document with the term does not have the  
payload of interest, then multiply by 0, or wait until you have seen  
all payloads for that document and if any are the right one, then  
return a score of 1, otherwise return 0.  I think this would be  
relatively easy to do using the BoostingTermQuery as a template.

Other thought:  Could you put the "payload" as a regular term at the  
same position and do a no-slop phrase query?  Or a slightly modified  
phrase query that requires both terms to be at the same position?

Just thinking out loud,
Grant

On Apr 22, 2008, at 2:51 AM, Fang_Li@emc.com wrote:

> Hi Grant,
> 	Thanks for your help.
>
> BoostingTermQuery uses reader.termPositions(term) to get the term
> position. In the Term, we cannot put any payload value to find the
> result documents. What I want is
>
> Find out all documents which have a specific payload value in a  
> specific
> term. We does not care about the value of the term.
>
> The reason is we don't want to store the binary information as a value
> so that we probably can accelerate the query performance by using
> payload. I am not sure this is a good reason to do in this way.
>
> Thanks,
>
> Li
>
>
> -----Original Message-----
> From: Grant Ingersoll [mailto:gsingers@apache.org]
> Sent: Monday, April 21, 2008 9:57 PM
> To: java-user@lucene.apache.org
> Subject: Re: how to query against payload
>
>
> On Apr 21, 2008, at 5:34 AM, Fang_Li@emc.com wrote:
>
>> Hi,
>>
>>               I want to use payload to store some kind of object id
>> which is an arbitrary byte array for better performance. But I do  
>> need
>> some kind of function like searching against payload value.
>>
>
> Have a look at the BoostingTermQuery.  If you need more than that, you
> could create some new queries using that as a model.
>
>>
>>
>> Also when the hits are available, how to get the payload of a  
>> specific
>> term from a document without set the field as stored? Currently I
>> found
>> the only available interface is IndexReader.termPosition(new Term()).
>> Looks we need to search again.
>
> https://issues.apache.org/jira/browse/LUCENE-1001.  Note, however,
> that the patch there is not going to work.  If you can help out on it,
> that would be great.
>
>
>>
>>
>> I've seen there will be per document payload. When will it be ready?
>>
>>
>>
>> Thanks,
>>
>> Fang, Li
>>
>>
>>
>
> --------------------------
> Grant Ingersoll
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ







---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33735-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 22 11:32:54 2008
Return-Path: <java-user-return-33735-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17314 invoked from network); 22 Apr 2008 11:32:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Apr 2008 11:32:54 -0000
Received: (qmail 62015 invoked by uid 500); 22 Apr 2008 11:32:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61980 invoked by uid 500); 22 Apr 2008 11:32:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61969 invoked by uid 99); 22 Apr 2008 11:32:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Apr 2008 04:32:47 -0700
X-ASF-Spam-Status: No, hits=2.7 required=10.0
	tests=SPF_NEUTRAL,WEIRD_PORT
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.132.248] (HELO an-out-0708.google.com) (209.85.132.248)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Apr 2008 11:31:51 +0000
Received: by an-out-0708.google.com with SMTP id c5so584776anc.49
        for <java-user@lucene.apache.org>; Tue, 22 Apr 2008 04:32:10 -0700 (PDT)
Received: by 10.100.166.9 with SMTP id o9mr139187ane.91.1208863930144;
        Tue, 22 Apr 2008 04:32:10 -0700 (PDT)
Received: by 10.100.154.5 with HTTP; Tue, 22 Apr 2008 04:32:10 -0700 (PDT)
Message-ID: <9ac0c6aa0804220432v1169994fh53da82d7f396feb8@mail.gmail.com>
Date: Tue, 22 Apr 2008 07:32:10 -0400
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org, stuhood@mailtrust.com
Subject: Re: FW: Re: Occasional Hang in IndexWriter.close()
In-Reply-To: <42657.192.168.1.71.1208813083.webmail@192.168.1.71>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <42657.192.168.1.71.1208813083.webmail@192.168.1.71>
X-Virus-Checked: Checked by ClamAV on apache.org

The hang also only happens if you are using SerialMergeScheduler.

Stu, one question: was there an interesting reason why you switched
back to SerialMergeScheduler?  Did you hit an issue with
ConcurrentMergeScheduler?

Mike

Stu Hood <stuhood@mailtrust.com> wrote:
> Hey gang,
>
>  The finally block was not hiding any exceptions: I'm still seeing the hangs in IndexWriter.close(). I'm appending the relevant output from 'setInfoStream(System.out)'. It looks like after I order the close, the IndexWriter begins a flush, and then hangs.
>
>  Any ideas?
>
>  Thanks,
>  Stu
>
>
>  >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
>
>
>  IFD [main]: setInfoStream deletionPolicy=org.apache.lucene.index.KeepOnlyLastCommitDeletionPolicy@18bbc5a
>  IW 0 [main]: setInfoStream: dir=org.apache.lucene.store.FSDirectory@/data1/solr/solr_dovecot1208772000-1208808000_f0cad01b1cb2966a/index autoCommit=true mergePolicy=org.apache.lucene.index.LogByteSizeMergePolicy@facf0b mergeScheduler=org.apache.lucene.index.ConcurrentMergeScheduler@2f0df1 ramBufferSizeMB=16.0 maxBuffereDocs=-1 maxBuffereDeleteTerms=-1 maxFieldLength=10000 index=_dn:C1349678 _j6:C1149270 _j5:C249194 _m4:C242243 _mf:C224430 _mk:C70616 _ml:C88 _mp:C50000 _mo:C9905
>  IW 0 [main]: setMergeScheduler org.apache.lucene.index.SerialMergeScheduler@13c6a22
>  >> Fetching hdfs://hadoop.sat.mlsrvr.com:54310/user/hadoopuser/indexed/dovecot/1208807515-1208808145-1208808184/part-00004 into a RAMDirectory:
>  >> .. done. Size: 22053888
>  >> Merging directories to solr_dovecot1208772000-1208808000_f0cad01b1cb2966a (factor: 4):
>  IW 0 [main]: flush at addIndexesNoOptimize
>  IW 0 [main]:   flush: segment=null docStoreSegment=null docStoreOffset=0 flushDocs=false flushDeletes=false flushDocStores=false numDocs=0 numBufDelTerms=0
>  IW 0 [main]:   index before flush _dn:C1349678 _j6:C1149270 _j5:C249194 _m4:C242243 _mf:C224430 _mk:C70616 _ml:C88 _mp:C50000 _mo:C9905
>  IW 0 [main]: now start transaction
>  IW 0 [main]: flush at startTransaction
>  IW 0 [main]:   flush: segment=null docStoreSegment=null docStoreOffset=0 flushDocs=false flushDeletes=false flushDocStores=false numDocs=0 numBufDelTerms=0
>  IW 0 [main]:   index before flush _dn:C1349678 _j6:C1149270 _j5:C249194 _m4:C242243 _mf:C224430 _mk:C70616 _ml:C88 _mp:C50000 _mo:C9905
>  IW 0 [main]: LMP: findMerges: 20 segments
>  IW 0 [main]: LMP:   level 13.601146 to 14.351146: 2 segments
>  IW 0 [main]: LMP:   level 12.390487 to 13.140487: 3 segments
>  IW 0 [main]: LMP:   level 11.542906 to 12.292906: 3 segments
>  IW 0 [main]: LMP:   level 10.656786 to 11.406786: 2 segments
>  IW 0 [main]: LMP:   level -1.0 to 8.768208: 10 segments
>  IW 0 [main]: LMP:     10 to 14: add this merge
>  IW 0 [main]: LMP:     14 to 18: add this merge
>  IW 0 [main]: add merge to pendingMerges: _1f:Cx1000->_0 _1g:Cx1000->_0 _1h:Cx1000->_0 _1i:Cx1000->_0 [total 1 pending]
>  IW 0 [main]: add merge to pendingMerges: _1j:Cx1000->_0 _1k:Cx1000->_0 _1l:Cx1000->_0 _1m:Cx1000->_0 [total 2 pending]
>  IW 0 [main]: now merge
>   merge=_1f:Cx1000->_0 _1g:Cx1000->_0 _1h:Cx1000->_0 _1i:Cx1000->_0 into _mq
>   index=_dn:C1349678 _j6:C1149270 _j5:C249194 _m4:C242243 _mf:C224430 _mk:C70616 _ml:C88 _mp:C50000 _mo:C9905 _1e:Cx50000->_0 _1f:Cx1000->_0 _1g:Cx1000->_0 _1h:Cx1000->_0 _1i:Cx1000->_0 _1j:Cx1000->_0 _1k:Cx1000->_0 _1l:Cx1000->_0 _1m:Cx1000->_0 _1n:Cx1000->_0 _1o:Cx857->_0
>  IW 0 [main]: merging _1f:Cx1000->_0 _1g:Cx1000->_0 _1h:Cx1000->_0 _1i:Cx1000->_0 into _mq
>  IW 0 [main]: merge: total 4000 docs
>  IW 0 [main]: commitMerge _1f:Cx1000->_0 _1g:Cx1000->_0 _1h:Cx1000->_0 _1i:Cx1000->_0 into _mq
>  IFD [main]: now checkpoint "segments_m" [17 segments ; isCommit = false]
>  IW 0 [main]: LMP: findMerges: 17 segments
>  IW 0 [main]: LMP:   level 13.601146 to 14.351146: 2 segments
>  IW 0 [main]: LMP:   level 12.390487 to 13.140487: 3 segments
>  IW 0 [main]: LMP:   level 11.542906 to 12.292906: 3 segments
>  IW 0 [main]: LMP:   level 10.656786 to 11.406786: 2 segments
>  IW 0 [main]: LMP:   level -1.0 to 10.283832: 7 segments
>  IW 0 [main]: LMP:     10 to 14: add this merge
>  IW 0 [main]: now merge
>   merge=_1j:Cx1000->_0 _1k:Cx1000->_0 _1l:Cx1000->_0 _1m:Cx1000->_0 into _mr
>   index=_dn:C1349678 _j6:C1149270 _j5:C249194 _m4:C242243 _mf:C224430 _mk:C70616 _ml:C88 _mp:C50000 _mo:C9905 _1e:Cx50000->_0 _mq:C4000 _1j:Cx1000->_0 _1k:Cx1000->_0 _1l:Cx1000->_0 _1m:Cx1000->_0 _1n:Cx1000->_0 _1o:Cx857->_0
>  IW 0 [main]: merging _1j:Cx1000->_0 _1k:Cx1000->_0 _1l:Cx1000->_0 _1m:Cx1000->_0 into _mr
>  IW 0 [main]: merge: total 4000 docs
>  IW 0 [main]: commitMerge _1j:Cx1000->_0 _1k:Cx1000->_0 _1l:Cx1000->_0 _1m:Cx1000->_0 into _mr
>  IFD [main]: now checkpoint "segments_m" [14 segments ; isCommit = false]
>  IW 0 [main]: LMP: findMerges: 14 segments
>  IW 0 [main]: LMP:   level 13.601146 to 14.351146: 2 segments
>  IW 0 [main]: LMP:   level 12.390487 to 13.140487: 3 segments
>  IW 0 [main]: LMP:   level 11.542906 to 12.292906: 3 segments
>  IW 0 [main]: LMP:   level 10.656786 to 11.406786: 2 segments
>  IW 0 [main]: LMP:   level -1.0 to 10.284627: 4 segments
>  IW 0 [main]: LMP:     10 to 14: add this merge
>  IW 0 [main]: add merge to pendingMerges: _mq:C4000 _mr:C4000 _1n:Cx1000->_0 _1o:Cx857->_0 [total 1 pending]
>  IW 0 [main]: now merge
>   merge=_mq:C4000 _mr:C4000 _1n:Cx1000->_0 _1o:Cx857->_0 into _ms
>   index=_dn:C1349678 _j6:C1149270 _j5:C249194 _m4:C242243 _mf:C224430 _mk:C70616 _ml:C88 _mp:C50000 _mo:C9905 _1e:Cx50000->_0 _mq:C4000 _mr:C4000 _1n:Cx1000->_0 _1o:Cx857->_0
>  IW 0 [main]: merging _mq:C4000 _mr:C4000 _1n:Cx1000->_0 _1o:Cx857->_0 into _ms
>  IW 0 [main]: merge: total 9857 docs
>  IW 0 [main]: commitMerge _mq:C4000 _mr:C4000 _1n:Cx1000->_0 _1o:Cx857->_0 into _ms
>  IFD [main]: now checkpoint "segments_m" [11 segments ; isCommit = false]
>  IFD [main]: delete "_mq.fnm"
>  IFD [main]: delete "_mq.frq"
>  IFD [main]: delete "_mq.prx"
>  IFD [main]: delete "_mq.tis"
>  IFD [main]: delete "_mq.tii"
>  IFD [main]: delete "_mq.nrm"
>  IFD [main]: delete "_mq.fdx"
>  IFD [main]: delete "_mq.fdt"
>  IFD [main]: delete "_mr.fnm"
>  IFD [main]: delete "_mr.frq"
>  IFD [main]: delete "_mr.prx"
>  IFD [main]: delete "_mr.tis"
>  IFD [main]: delete "_mr.tii"
>  IFD [main]: delete "_mr.nrm"
>  IFD [main]: delete "_mr.fdx"
>  IFD [main]: delete "_mr.fdt"
>  IW 0 [main]: LMP: findMerges: 11 segments
>  IW 0 [main]: LMP:   level 13.601146 to 14.351146: 2 segments
>  IW 0 [main]: LMP:   level 12.390487 to 13.140487: 3 segments
>  IW 0 [main]: LMP:   level 11.542906 to 12.292906: 3 segments
>  IW 0 [main]: LMP:   level 10.656786 to 11.406786: 3 segments
>  IW 0 [main]: add merge to pendingMerges: _1e:Cx50000->_0 [total 1 pending]
>  IW 0 [main]: now merge
>   merge=_1e:Cx50000->_0 into _mt
>   index=_dn:C1349678 _j6:C1149270 _j5:C249194 _m4:C242243 _mf:C224430 _mk:C70616 _ml:C88 _mp:C50000 _mo:C9905 _1e:Cx50000->_0 _ms:C9857
>  IW 0 [main]: merging _1e:Cx50000->_0 into _mt
>  IW 0 [main]: merge: total 50000 docs
>  IW 0 [main]: commitMerge _1e:Cx50000->_0 into _mt
>  IFD [main]: now checkpoint "segments_m" [11 segments ; isCommit = false]
>  IW 0 [main]: LMP: findMerges: 11 segments
>  IW 0 [main]: LMP:   level 13.601146 to 14.351146: 2 segments
>  IW 0 [main]: LMP:   level 12.390487 to 13.140487: 3 segments
>  IW 0 [main]: LMP:   level 11.542906 to 12.292906: 5 segments
>  IW 0 [main]: LMP:     5 to 9: add this merge
>  IW 0 [main]: LMP:   level 10.339036 to 10.916957: 1 segments
>  IW 0 [main]: add merge to pendingMerges: _mk:C70616 _ml:C88 _mp:C50000 _mo:C9905 [total 1 pending]
>  IW 0 [main]: now commit transaction
>  IW 0 [main]: checkpoint: wrote segments file "segments_n"
>  IFD [main]: now checkpoint "segments_n" [11 segments ; isCommit = true]
>  IFD [main]: deleteCommits: now remove commit "segments_m"
>  IFD [main]: delete "segments_m"
>  >> ... done.
>  >> Closing the target index...
>  IW 0 [main]: now flush at close
>  IW 0 [main]:   flush: segment=null docStoreSegment=null docStoreOffset=0 flushDocs=false flushDeletes=false flushDocStores=false numDocs=0 numBufDelTerms=0
>  IW 0 [main]:   index before flush _dn:C1349678 _j6:C1149270 _j5:C249194 _m4:C242243 _mf:C224430 _mk:C70616 _ml:C88 _mp:C50000 _mo:C9905 _mt:C50000 _ms:C9857
>
>
>
>
>  >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
>
>
>  -----Original Message-----
>  From: Stu Hood <stuhood@mailtrust.com>
>  Sent: Sunday, April 20, 2008 3:41pm
>  To: java-user@lucene.apache.org
>
>
> Subject: Re: Occasional Hang in IndexWriter.close()
>
>  Hey Mike,
>
>  Thanks for your input... the 'IndexWriter.close' call was actually in a 'finally' block around the merge code, without a 'catch', which I realized may have been hiding the exception (I didn't realize close would block if an exception had occurred).
>
>  I've moved the close out of the finally block, so hopefully if an exception was being hidden, I'll see it and report back.
>
>  Thanks,
>  Stu
>
>
>
>  -----Original Message-----
>  From: Michael McCandless <lucene@mikemccandless.com>
>  Sent: Saturday, April 19, 2008 4:40am
>  To: java-user@lucene.apache.org, stuhood@mailtrust.com
>  Subject: Re: Occasional Hang in IndexWriter.close()
>
>
>
>
>  ---------------------------------------------------------------------
>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>  ---------------------------------------------------------------------
>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33736-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 22 12:40:16 2008
Return-Path: <java-user-return-33736-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43029 invoked from network); 22 Apr 2008 12:40:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Apr 2008 12:40:16 -0000
Received: (qmail 39188 invoked by uid 500); 22 Apr 2008 12:40:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39158 invoked by uid 500); 22 Apr 2008 12:40:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39147 invoked by uid 99); 22 Apr 2008 12:40:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Apr 2008 05:40:08 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of glen.newton@gmail.com designates 74.125.46.28 as permitted sender)
Received: from [74.125.46.28] (HELO yw-out-2324.google.com) (74.125.46.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Apr 2008 12:39:21 +0000
Received: by yw-out-2324.google.com with SMTP id 5so1309571ywh.5
        for <java-user@lucene.apache.org>; Tue, 22 Apr 2008 05:39:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=TB1lF10JdAYWLl3ADdxOGyBSBrRE4ODuclJNP7GFcP4=;
        b=ko3k5Yd5X9mdzIRnlYoeadrwbA+wW87HF6poGJETiPBmOf6LL/zJI1DmurAm/m6jtjSJ8PmY2+CyIY4p7tjbrW1BYRvIh6z7vB3cD34oAH3WXb78Wjyx/DNYNzUV5jGPqtAdTGXttu0lR7MdxlehWSafZ4W3HYz1csG5xN/GY7Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=SfrZiaSpQpnPkSPdR8HYL0wQIsjI6143aI1tC2+HlCfRjUTGTRMUSNO9Efr7bCypckXEQOdzLaw1SX6RTUO5aughtahBX+5VpwHvKj3car4uGMNxngcxY+W7U/EtJpq0EU7WGsavaHtTJn/QrvHxFFNpFH7/elWAGgR39jf3h9k=
Received: by 10.142.101.17 with SMTP id y17mr52951wfb.20.1208867970743;
        Tue, 22 Apr 2008 05:39:30 -0700 (PDT)
Received: by 10.142.251.5 with HTTP; Tue, 22 Apr 2008 05:39:30 -0700 (PDT)
Message-ID: <5e76f3840804220539h5b19af2avb3972d3234f8847b@mail.gmail.com>
Date: Tue, 22 Apr 2008 08:39:30 -0400
From: "Glen Newton" <glen.newton@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Binding lucene instance/threads to a particular processor(or core)
In-Reply-To: <867513fe0804212110o6e879e83y9bc05a14d5608287@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline
References: <867513fe0804210002y7c0c3e02j368f77ca684ffcbc@mail.gmail.com>
	 <441650.63543.qm@web65413.mail.ac4.yahoo.com>
	 <5e76f3840804210655v4e42d1a4ocfdb36f9785063c5@mail.gmail.com>
	 <5e76f3840804210658u33009046wb2f3ded19214d08f@mail.gmail.com>
	 <5e76f3840804210721t655cfa80h679c63e42d4b773f@mail.gmail.com>
	 <480D1459.50908@teamware.com>
	 <867513fe0804212110o6e879e83y9bc05a14d5608287@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

QW5zaHVuLAoKSSB0aGluayBJIGFtIGRlYWxpbmcgd2l0aCBhbiBpbmRleCBvZiBzaW1pbGFyIHNj
YWxlOiA2LjQgbWlsbGlvbgpyZWNvcmRzLCA4MyBHQiBpbmRleCAoc2VlIFsxXSBmb3IgbW9yZSBp
bmZvKQoKSSBtaXN0YWtlbmx5IHRob3VnaHQgZnJvbSB5b3VyIG9yaWdpbmFsIHBvc3RpbmcgdGhh
dCB5b3Ugd2VyZQppbnRlcmVzdGVkIGluIGJpbmRpbmcgdGhyZWFkcyB0byBwcm9jZXNzb3JzIGZv
ciBpbmRleGluZywgYnV0IGl0IGlzCnNvdW5kaW5nIGxpa2UgeW91IHdhbnQgdG8gZG8gdGhpcyBm
b3Igc2VhcmNoaW5nLiBJIGFtIG5vdCBzdXJlIGlmIHRoaXMKd291bGQgd29yayB3ZWxsIGZvciBz
ZWFyY2hpbmcsIGFzIHRoZXJlIGlzIGEgZ3JlYXQgZGVhbCBtb3JlIGVwaGVtZXJhbApzdGF0ZS4g
QnV0IEkgYW0gbm90IHN1cmUuCgpXaXRoIHJlc3BlY3QgdG8gaGFuZGxpbmcgY29uY3VycmVuY3kg
Zm9yIHNlYXJjaCwgY291bGQgeW91IGRlc2NyaWJlCnlvdXIgZW52aXJvbm1lbnQgYmV0dGVyPwot
IElzIGl0IGFuIHdlYi1iYXNlIGFwcGxpY2F0aW9uPwotIFdoYXQgc29ydCBvZiBwcm9ibGVtcyBk
byB5b3UgaGF2ZSBub3c/Ci0gV2hhdCBhcmUgeW91ciBqYXZhIGNvbW1hbmQgbGluZSBwYXJhbWV0
ZXJzIChoZWFwLCBldGMuKQotIFdoYXQgYXJlIHRoZSBwZXJmb3JtYW5jZSBleHBlY3RhdGlvbnMs
IGkuZS4gYXZlcmFnZSBzZWFyY2ggPCBOMQpzZWNvbmRzOyBtZWRpYW4gc2VhcmNoIHRpbWUgPCBO
MiBzZWNvbmRzCi0gQXJlIHlvdSBzdG9yaW5nIGFueSBmaWVsZHMgYW5kIGlmIHNvLCBkbyB5b3Ug
bmVlZCB0byBzdG9yZSBzbyBtYW55PwotIERvIHlvdSBoYXZlIHRoZSBjaG9pY2Ugb2Ygc2Vydmlu
ZyBzZWFyY2hlcyBmcm9tIG11bHRpcGxlIG1hY2hpbmVzPwppLmUuIGxvYWQgYmFsYW5jZSBhY3Jv
c3MgPjEgbWFjaGluZTsgV2UndmUgZm91bmQgdGhpcyB0byBiZSBvbmUgb2YgdGhlCmJlc3Qgc29s
dXRpb25zIGZvciBzY2FsaW5nOwotIE9uZSB0aGluZyB0aGF0IEkgZG8gZm9yIGJvdGggaW5kZXhp
bmcgYW5kIHNlYXJjaGluZyBpcyB0aGF0IHRoZQp0aHJlYWRzIHRoYXQgYXJlIGRvaW5nIHRoZXNl
IHRhc2tzIEkgYWx3YXlzIHNoaWZ0IHRoZWlyIHByaW9yaXR5IHRvCk1BWCwgc28gdGhhdCB0aGV5
IGFyZSBydW4gaW4gcHJlZmVyZW5jZSB0byB0aHJlYWRzIGRvaW5nIG90aGVyIHRoaW5ncywKbGlr
ZSBwcmVwYXJpbmcgRG9jdW1lbnRzLCBldGMuCgpJZiBpdCBpcyBhIHdlYi10eXBlIGVudmlyb25t
ZW50LCBvbmUgc29sdXRpb24gaXMgdG8gc2V0LXVwIGEKVGhyZWFkUG9vbEV4ZWN1dG9yWzJdIHdp
dGggYSBmaXhlZCBudW1iZXIgb2YgdGhyZWFkcyBhbmQgYSBsaW1pdGVkCnF1ZXVlIHNpemUgKHVz
ZSBhIGJvdW5kIEJsb2NraW5nUXVldWVbM10pIC4gWW91IHdvdWxkIGhhdmUgdG8KZXhwZXJpbWVu
dCB3aXRoIHRoZSBudW1iZXJzIHRvIGdldCB0aGUgc3dlZXQtc3BvdCBmb3IgeW91ciBzaXR1YXRp
b24uCkkgd291bGQgc3VnZ2VzdCBzdGFydGluZyB3aXRoIDIgdGltZXMgdGhlIG51bWJlciBwcm9j
ZXNzb3JzIChjb3JlcykKYW5kIGEgcXVldWUgb2Ygc2F5IDIwLiBSZXF1ZXN0cyBhcmUgcXVldWVk
LCBidXQgaWYgdGhlIHJlcXVlc3QgY2Fubm90CmJlIHF1ZXVlZCwgYXQgbGVhc3QgdGhlIGFwcGxp
Y2F0aW9uIHRoZW4ga25vd3MgdGhhdCBpdCBpcyB0b28gYnVzeSBhbmQKeW91IGNhbiBnaXZlIHRo
ZSB1c2VyIGEgbWVzc2FnZSAiVGhlIHN5c3RlbSBpcyB0b28gYnVzeSBhdCB0aGlzCm1vbWVudCwg
cGxlYXNlIHRyeSBhZ2FpbiBpbiBhIGZldyBzZWNvbmRzLi4uIiBraW5kIG9mIHRoaW5nLiBUaGUK
YWR2YW50YWdlIGlzIGFsc28gdGhhdCB3aGVuIHRoaW5ncyBhcmUgdmVyeSBidXN5LCB5b3UgaGF2
ZSB0aGUKYWNjZXB0ZWQgcmVxdWVzdHMgaGFuZGxlZCBpbiBhIHJlYXNvbmFibGUgYW1vdW50IG9m
IHRpbWUsIGFuZCBzb21lCnVzZXJzIGJlaW5nIHRvbGQgdGhpbmdzIGFyZSB0b28gYnVzeSwgYXMg
b3Bwb3NlZCB0byBhbGwgdGhlIHJlcXVlc3RzCmdvaW5nIGluIGFuZCB0aGUgc3lzdGVtIHRocmFz
aGluZyAoYW5kIHBlcmhhcHMgcnVubmluZy1vdXQgb2YgbWVtb3J5CmF0IHRoZSBzYW1lIHRpbWUp
IGFuZCBldmVyeW9uZSdzIHF1ZXJpZXMgYmVpbmcgdmVyeSBzbG93LgoKQnV0IEkgd291bGQgc3Vn
Z2VzdCBzZXR0aW5nLXVwIGEgdGVzdCBoYXJuZXNzIHRvIGVtdWxhdGUgeW91cgpwcm9kdWN0aW9u
IGNvbmRpdGlvbnMgdG8gdHJ5IHRoZXNlIHRoaW5ncyBvdXQuLi4KCi1HbGVuCgpbMV1odHRwOi8v
enp6b290LmJsb2dzcG90LmNvbS8yMDA4LzA0L2x1Y2VuZS1pbmRleGluZy1wZXJmb3JtYW5jZS1i
ZW5jaG1hcmtzLmh0bWwKWzJdaHR0cDovL2phdmEuc3VuLmNvbS9qMnNlLzEuNS4wL2RvY3MvYXBp
L2phdmEvdXRpbC9jb25jdXJyZW50L1RocmVhZFBvb2xFeGVjdXRvci5odG1sClszXWh0dHA6Ly9q
YXZhLnN1bi5jb20vajJzZS8xLjUuMC9kb2NzL2FwaS9qYXZhL3V0aWwvY29uY3VycmVudC9CbG9j
a2luZ1F1ZXVlLmh0bWwKCgoyMDA4LzQvMjIgQW5zaHVtIDxhbnNodW1nQGdtYWlsLmNvbT46Cj4g
VGhlIHBhcGVyIHNlZW1zIHByZXR0eSBnb29kIGJ1dCBJIGFtIHN0aWxsIHdvbmRlcmluZyBpZiB0
aGVyZSB3YXMgYSB3YXkgdG8KPiAgYWNoaWV2ZSB0aGlzIHRocm91Z2ggdGhlIGNvbW1hbmQgbGlu
ZSBwYXJhbWV0ZXJzLiBJJ20ganVzdCB0cnlpbmcgdGhpcyB0bwo+ICBvcHRpbWl6ZSB0aGUgY29k
ZSwgaWYgdGhpcyB3b3Jrcywgd291bGQgbGV0IGFsbCBrbm93IGVsc2Ugd291bGQga2VlcAo+ICBl
dmVyeW9uZSBpbmZvcm1lZCA6KQo+ICBBbnkgb3RoZXIgc3VnZ2VzdGlvbnMgZm9yIGhhbmRsaW5n
IGEgY29uY3VycmVuY3kgb2Ygb3ZlciA3IHNlYXJjaCByZXF1ZXN0cwo+ICBwZXIgc2Vjb25kIGZv
ciBhbiBpbmRleCBzaXplIG9mIG92ZXIgMTVHaWdzIGNvbnRhaW5pbmcgb3ZlciAxMyBtaWxsaW9u
Cj4gIHJlY29yZHM/Cj4gIEFsc28sIGNvdWxkIHNvbWVvbmUgaGVscCBtZSB3aXRoIG9idGFpbmlu
ZyBhICdpbmRleCBzaXplJyAtICdjb25jdXJyZW5jeScgLQo+ICAncHJvY2Vzc29yIHBvd2VyJyAt
ICdtZW1vcnknIHJlbGF0aW9uc2hpcCBmb3JtdWxhIChvciBzb21ldGhpbmcgc2ltaWxhcik/Cj4K
PiAgLS0KPiAgQW5zaHVtCj4KPgo+Cj4KPiAgT24gVHVlLCBBcHIgMjIsIDIwMDggYXQgMzo1NSBB
TSwgQW50b255IEJvd2VzbWFuIDxhZGJAdGVhbXdhcmUuY29tPiB3cm90ZToKPgo+ICA+IFRoYXQg
cGFwZXIgZnJvbSAxOTk3IGlzIHByZXR0eSBvbGQsIGJ1dCBtaXJyb3JzIG91ciBleHBlcmllbmNl
cyBpbiB0aG9zZQo+ICA+IGRheXMuIFRoZW4sIHdlIHVzZWQgU29sYXJpcyBwcm9jZXNzb3Igc2V0
cyB0byByZWFsbHkgaW1wcm92ZSBwZXJmb3JtYW5jZSBieQo+ICA+IGJpbmRpbmcgb25lIG9mIG91
ciBwcm9jZXNzZXMgdG8gYSBwYXJ0aWN1bGFyIENQVSB3aGlsZSBsZWF2aW5nIHRoZSBvdGhlcgo+
ICA+IENQVXMgdG8gbWFuYWdlIHRoZSB0aHJlYWQgaW50ZW5zaXZlIHdvcmsuCj4gID4KPiAgPiBZ
b3UgY2FuIGJpbmQgcHJvY2Vzc2VzL0xXUHMgdG8gYSBDUFUgb24gU29sYXJpcyB3aXRoIHBzcnNl
dC4KPiAgPgo+ICA+IFRoZSBTb2xhcmlzIHRocmVhZCBtb2RlbCBpbiB0aGUgbGF0ZSAnOTBzIHdh
cyBhbHNvIGEgc2lnbmlmaWNhbnQgZmFjdG9yIGluCj4gID4gcGVyZm9ybWFuY2Ugb2YgbXVsdGkt
dGhyZWFkZWQgcHJvZ3JhbXMuICBUaGUgZGVmYXVsdCB0aHJlYWQgbGlicmFyeSBpbgo+ICA+IFNv
bGFyaXMgOCBpbXBsZW1lbnRlZCBhIE14TiB1bmJvdW5kIHRocmVhZCBtb2RlbCAodGhyZWFkcy9M
V1BTKS4gIEluIHRob3NlCj4gID4gZGF5cyB3ZSBmb3VuZCB0aGF0IGl0IGRpZCBub3QgcGVyZm9y
bSB3ZWxsLCBzbyB1c2VkIHRoZSBib3VuZCB0aHJlYWQgbW9kZWwKPiAgPiAoaS5lLiAxOjEpIHdo
ZXJlIGEgU29sYXJpcyB0aHJlYWQgd2FzIGJvdW5kIHBlcm1hbmVudGx5IHRvIGFuIExXUC4gIFRo
YXQKPiAgPiBpbXByb3ZlZCBwZXJmb3JtYW5jZSBhIGxvdC4gIEluIFNvbGFyaXMgOCwgU3VuIGhh
ZCB3aGF0IHRoZXkgY2FsbGVkIHRoZQo+ICA+ICdhbHRlcm5hdGUnIHRocmVhZCBsaWJyYXJ5IChU
MikgYXJvdW5kIDIwMDAsIHdoaWNoIGJlY2FtZSB0aGUgZGVmYXVsdAo+ICA+IGxpYnJhcnkgaW4g
U29sYXJpcyA5LCBhbmQgaW1wbGVtZW50ZWQgYSAxOjEgbW9kZWwgb2YgU29sYXJpcyB0aHJlYWRz
IHRvCj4gID4gTFdQcy4gIFRoYXQgbmV3IGxpYnJhcnkgaGFkIGRyYW1hdGljIHBlcmZvcm1hbmNl
IGltcHJvdmVtZW50cyBvdmVyIHRoZSBvbGQuCj4gID4KPiAgPiBTb21lIGJhY2tncm91bmQgaW5m
byBmb3IgSmF2YSBhbmQgdGhyZWFkaW5nCj4gID4KPiAgPiBodHRwOi8vamF2YS5zdW4uY29tL2oy
c2UvMS41LjAvZG9jcy9ndWlkZS92bS90aHJlYWQtcHJpb3JpdGllcy5odG1sCj4gID4KPiAgPiBB
bnRvbnkKPiAgPgo+ICA+Cj4gID4KPiAgPiBHbGVuIE5ld3RvbiB3cm90ZToKPiAgPgo+ICA+ID4g
SSByZWFsaXNlZCB0aGF0IG5vdCBldmVyeW9uZSBvbiB0aGlzIGxpc3QgbWlnaHQgYmUgYWJsZSB0
byBhY2Nlc3MgdGhlCj4gID4gPiBJRUVFIHBhcGVyIEkgcG9pbnRlZC1vdXQsIHNvIEkgd2lsbCBp
bmNsdWRlIHRoZSBhYnN0cmFjdCBhbmQgc29tZQo+ICA+ID4gcGFyYWdyYXBocyBmcm9tIHRoZSBw
YXBlciB3aGljaCBJIGhhdmUgaW5jbHVkZWQgYmVsb3cuCj4gID4gPgo+ICA+ID4gQWxzbyBvZiBp
bnRlcmVzdCAoYW5kIHNob3VsZCBiZSBhdmFpbGFibGUgdG8gYWxsKTogRmVkb3JvdmEgZXQgYWwu
Cj4gID4gPiAyMDA1LiBQZXJmb3JtYW5jZSBvZiBNdWx0aXRocmVhZGVkIENoaXAgTXVsdGlwcm9j
ZXNzb3JzIEFuZAo+ICA+ID4gSW1wbGljYXRpb25zIEZvciBPcGVyYXRpbmcgU3lzdGVtIERlc2ln
bi4gVXNlbml4IDIwMDUuCj4gID4gPiBodHRwOi8vd3d3LmVlY3MuaGFydmFyZC5lZHUvbWFyZ28v
cGFwZXJzL3VzZW5peDA1L3BhcGVyLnBkZgo+ICA+ID4gIkFic3RyYWN0OiBXZSBpbnZlc3RpZ2F0
ZWQgaG93IG9wZXJhdGluZyBzeXN0ZW0gZGVzaWduIHNob3VsZCBiZQo+ICA+ID4gYWRhcHRlZCBm
b3IgbXVsdGl0aHJlYWRlZCBjaGlwIG11bHRpcHJvY2Vzc29ycyAoQ01UKSDigJMgYSBuZXcKPiAg
PiA+IGdlbmVyYXRpb24gb2YgcHJvY2Vzc29ycyB0aGF0IGV4cGxvaXQgdGhyZWFkLWxldmVsIHBh
cmFsbGVsaXNtIHRvIG1hc2sKPiAgPiA+IHRoZSBtZW1vcnkgbGF0ZW5jeSBpbiBtb2Rlcm4gd29y
a2xvYWRzLiBXZQo+ICA+ID4gZGV0ZXJtaW5lZCB0aGF0IHRoZSBMMiBjYWNoZSBpcyBhIGNyaXRp
Y2FsIHNoYXJlZCByZXNvdXJjZSBvbiBDTVQgYW5kCj4gID4gPiB0aGF0IGFuIGluc3VmZmljaWVu
dCBhbW91bnQgb2YgTDIgY2FjaGUgY2FuIHVuZGVybWluZSB0aGUgYWJpbGl0eSB0bwo+ICA+ID4g
aGlkZSBtZW1vcnkgbGF0ZW5jeSBvbiB0aGVzZSBwcm9jZXNzb3JzLiBUbyB1c2UgdGhlIEwyIGNh
Y2hlIGFzCj4gID4gPiBlZmZpY2llbnRseSBhcyBwb3NzaWJsZSwgd2UgcHJvcG9zZSBhbiBMMi1j
b25zY2lvdXMgc2NoZWR1bGluZwo+ICA+ID4gYWxnb3JpdGhtIGFuZCBxdWFudGlmeSBpdHMgcGVy
Zm9ybWFuY2UgcG90ZW50aWFsLiBVc2luZyB0aGlzIGFsZ29yaXRobQo+ICA+ID4gaXQgaXMgcG9z
c2libGUgdG8gcmVkdWNlIG1pc3MgcmF0aW9zIGluIHRoZSBMMiBjYWNoZSBieSAyNS0zNyUgYW5k
Cj4gID4gPiBpbXByb3ZlIHByb2Nlc3NvciB0aHJvdWdocHV0IGJ5IDI3LTQ1JS4iCj4gID4gPgo+
ICA+ID4KPiAgPiA+IEZyb20gTHVuZGJlcmcsIEwuIDE5OTc6Cj4gID4gPiBBYnN0cmFjdDogIlRo
ZSBkZWZhdWx0IHNjaGVkdWxpbmcgYWxnb3JpdGhtIGluIFNvbGFyaXMgYW5kIG90aGVyCj4gID4g
PiBvcGVyYXRpbmcgc3lzdGVtcyBtYXkgcmVzdWx0IGluIGZyZXF1ZW50IHJlbG9jYXRpb24gb2Yg
dGhyZWFkcyBhdAo+ICA+ID4gcnVuLXRpbWUuIEV4Y2Vzc2l2ZSB0aHJlYWQgcmVsb2NhdGlvbiBj
YXVzZQo+ICA+ID4gcG9vciBtZW1vcnkgcGVyZm9ybWFuY2UuIFRoaXMgY2FuIGJlIGF2b2lkZWQg
YnkgYmluZGluZyB0aHJlYWRzIHRvCj4gID4gPiBwcm9jZXNzb3JzLiBIb3dldmVyLCBiaW5kaW5n
IHRocmVhZHMgdG8gcHJvY2Vzc29ycyBtYXkgcmVzdWx0IGluIGFuCj4gID4gPiB1bmJhbGFuY2Vk
IGxvYWQuIEJ5IGNvbnNpZGVyaW5nIGEgcHJldmlvdXNseSBvYnRhaW5lZCB0aGVvcmV0aWNhbAo+
ICA+ID4gcmVzdWx0IGFuZCBieSBldmFsdWF0aW5nIGEgc2V0IG9mIG11bHRpdGhyZWFkZWQgU29s
YXJpcwo+ICA+ID4gcHJvZ3JhbXMgdXNpbmcgYSBtdWx0aXByb2Nlc3NvciB3aXRoIDggcHJvY2Vz
c29ycywgd2UgYXJlIGFibGUgdG8KPiAgPiA+IGJvdW5kIHRoZSBtYXhpbXVtIHBlcmZvcm1hbmNl
IGxvc3MgZHVlIHRvIGJpbmRpbmcgdGhyZWFkcywgVGhlCj4gID4gPiB0aGVvcmV0aWNhbCByZXN1
bHQgaXMgYWxzbyByZWNhcGl0dWxhdGVkLiBCeSBldmFsdWF0aW5nIGFub3RoZXIgc2V0IG9mCj4g
ID4gPiBtdWx0aXRocmVhZGVkIHByb2dyYW1zLCB3ZSBzaG93IHRoYXQgdGhlIGdhaW4gb2YgYmlu
ZGluZyB0aHJlYWRzIHRvCj4gID4gPiBwcm9jZXNzb3JzIG1heSBiZSBzdWJzdGFudGlhbCwgcGFy
dGljdWxhcmx5IGZvciBwcm9ncmFtcyB3aXRoIGZpbmUKPiAgPiA+IGdyYWluZWQgcGFyYWxsZWxp
c20uIgo+ICA+ID4KPiAgPiA+IEZpcnN0IHBhcmFncmFwaDogIlRoZSB0aHJlYWQgY29uY2VwdCBp
biBTb2xhcmlzIFszXVs1XSBhbmQgb3RoZXIKPiAgPiA+IG9wZXJhdGluZyBzeXN0ZW1zIG1ha2Vz
IGl0IHBvc3NpYmxlIHRvIHdyaXRlIG11bHRpdGhyZWFkZWQgcHJvZ3JhbXMsCj4gID4gPiB3aGlj
aCBjYW4gYmUgZXhlY3V0ZWQgaW4gcGFyYWxsZWwgb24gYSBtdWx0aXByb2Nlc3Nvci4gUHJldmlv
dXMKPiAgPiA+IGV4cGVyaWVuY2UgZnJvbSByZWFsIHdvcmxkIHByb2dyYW1zIFs0XSBzaG93IHRo
YXQsIHVzaW5nIHRoZSBkZWZhdWx0Cj4gID4gPiBzY2hlZHVsaW5nIGFsZ29yaXRobSBpbiBTb2xh
cmlzLCB0aHJlYWRzIGFyZSBmcmVxdWVudGx5IHJlbG9jYXRlZCBmcm9tCj4gID4gPiBvbmUgcHJv
Y2Vzc29yCj4gID4gPiB0byBhbm90aGVyIGF0IHJ1bi10aW1lLiBBZnRlciBlYWNoIHN1Y2ggcmVs
b2NhdGlvbiwgdGhlIGNvZGUgYW5kIGRhdGEKPiAgPiA+IGFzc29jaWF0ZWQgd2l0aCB0aGUgcmVs
b2NhdGVkIHRocmVhZCBpcyBtb3ZlZCBmcm9tIHRoZSBjYWNoZSBtZW1vcnkgb2YKPiAgPiA+IHRo
ZSAwMTEzIHByb2Nlc3NvciB0byB0aGUgY2FjaGUgb2YgdGhlIG5ldyBwcm9jZXNzb3IuIFRoaXMg
cmVkdWNlcyB0aGUKPiAgPiA+IHBlcmZvcm1hbmNlLiBSdW4tdGltZSByZWxvY2F0aW9uIG9mIHRo
cmVhZHMgdG8gcHJvY2Vzc29ycyBjYW4gYWxzbwo+ICA+ID4gcmVzdWx0IGluIHVucHJlZGljdGFi
bGUgcmVzcG9uc2UgdGltZXMuIFRoaXMgaXMgYSBwcm9ibGVtIGluIHN5c3RlbXMKPiAgPiA+IHdo
aWNoIG9wZXJhdGUgaW4gYSByZWFsLXRpbWUgZW52aXJvbm1lbnQuIEluIG9yZGVyIHRvIGF2b2lk
IHBvb3IKPiAgPiA+IG1lbW9yeSBwZXJmb3JtYW5jZSBhbmQgdW5wcmVkaWN0YWJsZSByZWFsLXRp
bWUgYmVoYXZpb3VyIGR1ZSB0bwo+ICA+ID4gZnJlcXVlbnQgdGhyZWFkIHJlbG9jYXRpb24sIHRo
cmVhZHMgY2FuIGJlIGJvdW5kIHRvIHByb2Nlc3NvcnMgdXNpbmcKPiAgPiA+IHRoZSBwcm9jZXNz
b3ItYmluZCBkaXJlY3RpdmUgWzNdIFs1XS4gVGhlIG1ham9yIHByb2JsZW0gd2l0aCBiaW5kaW5n
Cj4gID4gPiB0aHJlYWRzIGlzIHRoYXQgb25lIGNhbiBlbmQgdXAgd2l0aCBhbiB1bmJhbGFuY2Vk
IGxvYWQsIGkuZS4gc29tZQo+ICA+ID4gcHJvY2Vzc29ycyBtYXkgYmUgZXh0cmVtZWx5IGJ1c3kg
ZHVyaW5nIHNvbWUgdGltZSBwZXJpb2RzIHdoaWxlIG90aGVyCj4gID4gPiBwcm9jZXNzb3JzIGFy
ZSBpZGxlLiIKPiAgPiA+Cj4gID4gPiAtR2xlbgo+ICA+ID4KPiAgPiA+IE9uIDIxLzA0LzIwMDgs
IEdsZW4gTmV3dG9uIDxnbGVuLm5ld3RvbkBnbWFpbC5jb20+IHdyb3RlOgo+ICA+ID4KPiAgPiA+
ID4gQW5kIHRoaXMgZGlzY3Vzc2lvbiBvbiBib3VuZCB0aHJlYWRzIG1heSBhbHNvIHNoZWQgbGln
aHQgb24gdGhpbmdzOgo+ICA+ID4gPgo+ICA+ID4gPiBodHRwOi8vY29kaW5nLmRlcmtlaWxlci5j
b20vQXJjaGl2ZS9KYXZhL2NvbXAubGFuZy5qYXZhLnByb2dyYW1tZXIvMjAwNy0xMS9tc2cwMjgw
MS5odG1sCj4gID4gPiA+Cj4gID4gPiA+Cj4gID4gPiA+ICAtR2xlbgo+ICA+ID4gPgo+ICA+ID4g
Pgo+ICA+ID4gPiAgT24gMjEvMDQvMjAwOCwgR2xlbiBOZXd0b24gPGdsZW4ubmV3dG9uQGdtYWls
LmNvbT4gd3JvdGU6Cj4gID4gPiA+ICA+IEJJbmRpbmcgdGhyZWFkcyB0byBwcm9jZXNzb3JzIC0g
aW4gbWFueSBzaXR1YXRpb25zIC0gaW1wcm92ZXMKPiAgPiA+ID4gID4gIHRocm91Z2hwdXQgYnkg
cmVkdWNpbmcgbWVtb3J5IG92ZXJoZWFkLiBXaGVuIGEgdGhyZWFkIGlzIHJ1bm5pbmcKPiAgPiA+
ID4gb24gYQo+ICA+ID4gPiAgPiAgY29yZSwgaXRzIHN0YXRlIGlzIGxvY2FsOyBpZiBpdCBpcyB0
aW1lc2hhcmVkLW91dCBhbmQgZWl0aGVyIDEpCj4gID4gPiA+ICA+ICBzd2FwcGVkIGJhY2sgaW4g
b24gdGhlIHNhbWUgY29yZSwgaXQgaXMgbGlrZWx5IHRoYXQgdGhlcmUgd2lsbCBiZQo+ICA+ID4g
PiAgdGhlCj4gID4gPiA+ICA+ICBjb3JlJ3MgTDEgY2FjaGU7IG9yIDIpIG9udG8gYW5vdGhlciBj
b3JlLCB0aGVyZSB3aWxsIG5vdCBiZSBhCj4gID4gPiA+IGNhY2hlCj4gID4gPiA+ICA+ICBoaXQg
YW5kIHRoZSBzdGF0ZSB3aWxsIGhhdmUgdG8gYmUgZmV0Y2hlZCBmcm9tIEwyIG9yIG1haW4gbWVt
b3J5LAo+ICA+ID4gPiAgPiAgaW5jdXJyaW5nIGEgcGVyZm9ybWFuY2UgaGl0LCBlc3AgaW4gdGhl
IGxhdHRlci4gU2VlIEx1bmRiZXJnLCBMLgo+ICA+ID4gPiAxOTk3Lgo+ICA+ID4gPiAgPiAgRXZh
bHVhdGluZyB0aGUgUGVyZm9ybWFuY2UgSW1wbGljYXRpb25zIG9mIEJpbmRpbmcgVGhyZWFkcyB0
bwo+ICA+ID4gPiAgPiAgUHJvY2Vzc29ycy4gMzkzLgo+ICA+ID4gPiBodHRwOi8vaWVlZXhwbG9y
ZS5pZWVlLm9yZy9pZWwzLzUwMjAvMTM3NjgvMDA2MzQ1MjAucGRmCj4gID4gPiA+ICA+ICBmb3Ig
bW9yZSBpbmZvLgo+ICA+ID4gPiAgPgo+ICA+ID4gPiAgPiAgSWYgeW91IGFyZSB1c2luZyBKVk0g
b24gU29sYXJpcyBvbiBTUEFSQywgeW91IHNob3VsZCB0YWtlIGEgbG9vawo+ICA+ID4gPiBhdAo+
ICA+ID4gPiAgPiAgdGhlIGZvbGxvd2luZyBsaW5rcyBmb3IgdHVuaW5nICh0aGUgU3VuIEpWTSBv
biBTb2xhcmlzIFNQQVJDIGhhcwo+ICA+ID4gPiBtYW55Cj4gID4gPiA+ICA+ICBtb3JlIHBlcmZv
cm1hbmNlIHR1bmluZyBwYXJhbWV0ZXJzIGF2YWlsYWJsZSksIGluY2x1ZGluZwo+ICA+ID4gPiB0
aHJlYWRpbmc6Cj4gID4gPiA+ICA+ICAtIGh0dHA6Ly9qYXZhLnN1bi5jb20vZG9jcy9ob3RzcG90
L3RocmVhZHMvdGhyZWFkcy5odG1sCj4gID4gPiA+ICA+ICAtCj4gID4gPiA+IGh0dHA6Ly9qYXZh
LnN1bi5jb20vajJzZS8xLjUuMC9kb2NzL2d1aWRlL3ZtL3RocmVhZC1wcmlvcml0aWVzLmh0bWwK
PiAgPiA+ID4gID4gIC0KPiAgPiA+ID4gaHR0cDovL3d3dy0xLmlibS5jb20vc3VwcG9ydC9kb2N2
aWV3Lndzcz9ycz0xODAmY29udGV4dD1TU0VRVFAmdWlkPXN3ZzIxMTA3MjkxCj4gID4gPiA+ICA+
ICAtIGh0dHA6Ly9qYXZhLnN1bi5jb20vamF2YXNlL3RlY2hub2xvZ2llcy9wZXJmb3JtYW5jZS5q
c3AKPiAgPiA+ID4gID4KPiAgPiA+ID4gID4KPiAgPiA+ID4gID4gIC1HbGVuCj4gID4gPiA+ICA+
Cj4gID4gPiA+ICA+Cj4gID4gPiA+ICA+Cj4gID4gPiA+ICA+Cj4gID4gPiA+ICA+Cj4gID4gPiA+
ICA+Cj4gID4gPiA+ICA+Cj4gID4gPiA+ICA+ICBPbiAyMS8wNC8yMDA4LCBVbGYgRGl0dG1lciA8
dWRpdHRtZXJAeWFob28uY29tPiB3cm90ZToKPiAgPiA+ID4gID4gID4gVGhpcyBzb3VuZHMgb2Rk
LiBXaHkgd291bGQgcmVzdHJpY3RpbmcgaXQgdG8gYSBzaW5nbGUKPiAgPiA+ID4gID4gID4gIGNv
cmUgaW1wcm92ZSBwZXJmb3JtYW5jZT8gVGhlIHBvaW50IG9mIHVzaW5nIG11bHRpcGxlCj4gID4g
PiA+ICA+ICA+ICBjb3JlcyAoYW5kIG11bHRpcGxlIHRocmVhZHMpIGlzIHRvIGltcHJvdmUgcGVy
Zm9ybWFuY2UKPiAgPiA+ID4gID4gID4gIGlzbid0IGl0PyBJJ2QgbGVhdmUgdGhyZWFkIHNjaGVk
dWxpbmcgZGVjaXNpb25zIHRvIHRoZQo+ICA+ID4gPiAgPiAgPiAgSlZNLiBQbHVzLCBJIGRvbid0
IHRoaW5rIHRoZXJlIGlzIGFueXRoaW5nIGluIEphdmEgdG8KPiAgPiA+ID4gID4gID4gIGZhY2ls
aXRhdGUgdGhpcyAoc2hvcnQgb2YgdXNpbmcgSk5JKS4KPiAgPiA+ID4gID4gID4KPiAgPiA+ID4g
ID4gID4gIEFyZSB5b3UgdGFsa2luZyBhYm91dCBpbmRleGluZyBvciBzZWFyY2hpbmc/IFlvdSBt
YXkKPiAgPiA+ID4gID4gID4gIGJlIGFibGUgdG8gdXNlIG11bHRpcGxlIHBhcmFsbGVsIHRocmVh
ZHMgdG8gaW1wcm92ZQo+ICA+ID4gPiAgPiAgPiAgaW5kZXhpbmcgcGVyZm9ybWFuY2UuIEkgZG9u
J3QgdGhpbmsgTHVjZW5lIHVzZXMKPiAgPiA+ID4gID4gID4gIG11bHRpLXRocmVhZGluZyBmb3Ig
c2VhcmNoaW5nOyBub3QgdW5sZXNzIHlvdSBoYXZlCj4gID4gPiA+ICA+ICA+ICBtdWx0aXBsZSBp
bmRpY2VzLCBhbnl3YXkuCj4gID4gPiA+ICA+ICA+Cj4gID4gPiA+ICA+ICA+ICBVbGYKPiAgPiA+
ID4gID4gID4KPiAgPiA+ID4gID4gID4KPiAgPiA+ID4gID4gID4KPiAgPiA+ID4gID4gID4gIC0t
LSBBbnNodW0gPGFuc2h1bWdAZ21haWwuY29tPiB3cm90ZToKPiAgPiA+ID4gID4gID4KPiAgPiA+
ID4gID4gID4gID4gSGksCj4gID4gPiA+ICA+ICA+ICA+Cj4gID4gPiA+ICA+ICA+ICA+IEkgaGF2
ZSBiZWVuIHRyeWluZyB0byBiaW5kIG15IGx1Y2VuZSBpbnN0YW5jZSAoSlZNIC0KPiAgPiA+ID4g
ID4gID4gID4gU3VuIEhvdHNwb3QqKSB0byBhCj4gID4gPiA+ICA+ICA+ICA+IHBhcnRpY3VsYXIg
Y29yZSBzbyBhcyB0byBpbXByb3ZlIHRoZSBwZXJmb3JtYW5jZS4gSXMKPiAgPiA+ID4gID4gID4g
ID4gdGhlcmUgYSB3YXkgdG8gZG8gc28gb3IKPiAgPiA+ID4gID4gID4gID4gaXMgdGhlcmUgc3Vw
cG9ydCBpbiBsdWNlbmUgdG8gZXhwbGljaXRseSBjb250cm9sIHRoZQo+ICA+ID4gPiAgPiAgPiAg
PiB0aHJlYWQgLSBwcm9jZXNzb3IKPiAgPiA+ID4gID4gID4gID4gbGlua3VwPwo+ICA+ID4gPiAg
PiAgPiAgPgo+ICA+ID4gPiAgPiAgPiAgPiAtLQo+ICA+ID4gPiAgPiAgPiAgPiAtLQo+ICA+ID4g
PiAgPiAgPiAgPiBUaGUgZmFjdHMgZXhwcmVzc2VkIGhlcmUgYmVsb25nIHRvIGV2ZXJ5Ym9keSwg
dGhlCj4gID4gPiA+ICA+ICA+ICA+IG9waW5pb25zIHRvIG1lLgo+ICA+ID4gPiAgPiAgPiAgPiBU
aGUgZGlzdGluY3Rpb24gaXMgeW91cnMgdG8gZHJhdy4uLi4uLi4uLi4uLgo+ICA+ID4gPiAgPiAg
PiAgPgo+ICA+ID4gPiAgPiAgPgo+ICA+ID4gPiAgPiAgPgo+ICA+ID4gPiAgPiAgPgo+ICA+ID4g
PiAgPiAgPgo+ICA+ID4gPiAgPiAgPgo+ICA+ID4gPiBfX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X18KPiAgPiA+ID4gID4gID4gIEJlIGEgYmV0dGVyIGZyaWVuZCwgbmV3c2hvdW5kLCBhbmQKPiAg
PiA+ID4gID4gID4gIGtub3ctaXQtYWxsIHdpdGggWWFob28hIE1vYmlsZS4gIFRyeSBpdCBub3cu
Cj4gID4gPiA+IGh0dHA6Ly9tb2JpbGUueWFob28uY29tLztfeWx0PUFodTA2aTYyc1I4SER0RHlw
YW84V2NqOXRBY0oKPiAgPiA+ID4gID4gID4KPiAgPiA+ID4gID4gID4KPiAgPiA+ID4gIC0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLQo+ICA+ID4gPiAgPiAgPiAgVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2Vy
LXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnCj4gID4gPiA+ICA+ICA+ICBGb3IgYWRkaXRp
b25hbCBjb21tYW5kcywgZS1tYWlsOgo+ICA+ID4gPiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBh
Y2hlLm9yZwo+ICA+ID4gPiAgPiAgPgo+ICA+ID4gPiAgPiAgPgo+ICA+ID4gPiAgPgo+ICA+ID4g
PiAgPgo+ICA+ID4gPiAgPgo+ICA+ID4gPiAgPiAtLQo+ICA+ID4gPiAgPgo+ICA+ID4gPiAgPiAg
LQo+ICA+ID4gPiAgPgo+ICA+ID4gPgo+ICA+ID4gPgo+ICA+ID4gPgo+ICA+ID4gPiAtLQo+ICA+
ID4gPgo+ICA+ID4gPiAgLQo+ICA+ID4gPgo+ICA+ID4gPgo+ICA+ID4KPiAgPiA+Cj4gID4KPiAg
PiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0KPiAgPiBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5z
dWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcKPiAgPiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywg
ZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZwo+ICA+Cj4gID4KPgo+Cj4g
IC0tCj4KPgo+IC0tCj4gIFRoZSBmYWN0cyBleHByZXNzZWQgaGVyZSBiZWxvbmcgdG8gZXZlcnli
b2R5LCB0aGUgb3BpbmlvbnMgdG8gbWUuCj4gIFRoZSBkaXN0aW5jdGlvbiBpcyB5b3VycyB0byBk
cmF3Li4uLi4uLi4uLi4uCj4KCgoKLS0gCgotCg==


From java-user-return-33737-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 22 16:42:47 2008
Return-Path: <java-user-return-33737-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5284 invoked from network); 22 Apr 2008 16:42:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Apr 2008 16:42:47 -0000
Received: (qmail 49977 invoked by uid 500); 22 Apr 2008 16:42:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49949 invoked by uid 500); 22 Apr 2008 16:42:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49938 invoked by uid 99); 22 Apr 2008 16:42:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Apr 2008 09:42:39 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [128.218.33.11] (HELO gossamer.ckm.ucsf.edu) (128.218.33.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Apr 2008 16:41:43 +0000
Received: from CKMPC08 (tikal.library.ucsf.edu [128.218.15.151])
	by gossamer.ckm.ucsf.edu (8.13.8/8.13.8) with ESMTP id m3MGfwtZ003173
	for <java-user@lucene.apache.org>; Tue, 22 Apr 2008 09:42:01 -0700 (PDT)
From: "Renaud Waldura" <renaud.waldura@library.ucsf.edu>
To: <java-user@lucene.apache.org>
Subject: RE: Binding lucene instance/threads to a particular processor(or core)
Date: Tue, 22 Apr 2008 09:41:58 -0700
Message-ID: <000c01c8a497$c7f57b70$970fda80@campus.net.ucsf.edu>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <867513fe0804212110o6e879e83y9bc05a14d5608287@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
Thread-Index: AcikLuD6tbeZ38ZnTYaWf8pVHh38aAAaLFsg
X-Filter-Version: 1.15 (gossamer)
X-Virus-Checked: Checked by ClamAV on apache.org

Anshum:

Have you looked into the ConcurrentMultiSearcher? It would have you split
your index into N sub-indices, and search each with a dedicated thread.

--Renaud
 

-----Original Message-----
From: Anshum [mailto:anshumg@gmail.com] 
Sent: Monday, April 21, 2008 9:10 PM
To: java-user@lucene.apache.org
Subject: Re: Binding lucene instance/threads to a particular processor(or
core)

The paper seems pretty good but I am still wondering if there was a way to
achieve this through the command line parameters. I'm just trying this to
optimize the code, if this works, would let all know else would keep
everyone informed :) Any other suggestions for handling a concurrency of
over 7 search requests per second for an index size of over 15Gigs
containing over 13 million records?
Also, could someone help me with obtaining a 'index size' - 'concurrency' -
'processor power' - 'memory' relationship formula (or something similar)?

--
Anshum


On Tue, Apr 22, 2008 at 3:55 AM, Antony Bowesman <adb@teamware.com> wrote:

> That paper from 1997 is pretty old, but mirrors our experiences in 
> those days. Then, we used Solaris processor sets to really improve 
> performance by binding one of our processes to a particular CPU while 
> leaving the other CPUs to manage the thread intensive work.
>
> You can bind processes/LWPs to a CPU on Solaris with psrset.
>
> The Solaris thread model in the late '90s was also a significant 
> factor in performance of multi-threaded programs.  The default thread 
> library in Solaris 8 implemented a MxN unbound thread model 
> (threads/LWPS).  In those days we found that it did not perform well, 
> so used the bound thread model (i.e. 1:1) where a Solaris thread was 
> bound permanently to an LWP.  That improved performance a lot.  In 
> Solaris 8, Sun had what they called the 'alternate' thread library 
> (T2) around 2000, which became the default library in Solaris 9, and 
> implemented a 1:1 model of Solaris threads to LWPs.  That new library had
dramatic performance improvements over the old.
>
> Some background info for Java and threading
>
> http://java.sun.com/j2se/1.5.0/docs/guide/vm/thread-priorities.html
>
> Antony
>
>
>
> Glen Newton wrote:
>
> > I realised that not everyone on this list might be able to access 
> > the IEEE paper I pointed-out, so I will include the abstract and 
> > some paragraphs from the paper which I have included below.
> >
> > Also of interest (and should be available to all): Fedorova et al.
> > 2005. Performance of Multithreaded Chip Multiprocessors And 
> > Implications For Operating System Design. Usenix 2005.
> > http://www.eecs.harvard.edu/margo/papers/usenix05/paper.pdf
> > "Abstract: We investigated how operating system design should be 
> > adapted for multithreaded chip multiprocessors (CMT) - a new 
> > generation of processors that exploit thread-level parallelism to 
> > mask the memory latency in modern workloads. We determined that the 
> > L2 cache is a critical shared resource on CMT and that an 
> > insufficient amount of L2 cache can undermine the ability to hide 
> > memory latency on these processors. To use the L2 cache as 
> > efficiently as possible, we propose an L2-conscious scheduling 
> > algorithm and quantify its performance potential. Using this 
> > algorithm it is possible to reduce miss ratios in the L2 cache by 
> > 25-37% and improve processor throughput by 27-45%."
> >
> >
> > From Lundberg, L. 1997:
> > Abstract: "The default scheduling algorithm in Solaris and other 
> > operating systems may result in frequent relocation of threads at 
> > run-time. Excessive thread relocation cause poor memory performance. 
> > This can be avoided by binding threads to processors. However, 
> > binding threads to processors may result in an unbalanced load. By 
> > considering a previously obtained theoretical result and by 
> > evaluating a set of multithreaded Solaris programs using a 
> > multiprocessor with 8 processors, we are able to bound the maximum 
> > performance loss due to binding threads, The theoretical result is 
> > also recapitulated. By evaluating another set of multithreaded 
> > programs, we show that the gain of binding threads to processors may 
> > be substantial, particularly for programs with fine grained 
> > parallelism."
> >
> > First paragraph: "The thread concept in Solaris [3][5] and other 
> > operating systems makes it possible to write multithreaded programs, 
> > which can be executed in parallel on a multiprocessor. Previous 
> > experience from real world programs [4] show that, using the default 
> > scheduling algorithm in Solaris, threads are frequently relocated 
> > from one processor to another at run-time. After each such 
> > relocation, the code and data associated with the relocated thread 
> > is moved from the cache memory of the 0113 processor to the cache of 
> > the new processor. This reduces the performance. Run-time relocation 
> > of threads to processors can also result in unpredictable response 
> > times. This is a problem in systems which operate in a real-time 
> > environment. In order to avoid poor memory performance and 
> > unpredictable real-time behaviour due to frequent thread relocation, 
> > threads can be bound to processors using the processor-bind 
> > directive [3] [5]. The major problem with binding threads is that 
> > one can end up with an unbalanced load, i.e. some processors may be 
> > extremely busy during some time periods while other processors are 
> > idle."
> >
> > -Glen
> >
> > On 21/04/2008, Glen Newton <glen.newton@gmail.com> wrote:
> >
> > > And this discussion on bound threads may also shed light on things:
> > >
> > > http://coding.derkeiler.com/Archive/Java/comp.lang.java.programmer
> > > /2007-11/msg02801.html
> > >
> > >
> > >  -Glen
> > >
> > >
> > >  On 21/04/2008, Glen Newton <glen.newton@gmail.com> wrote:
> > >  > BInding threads to processors - in many situations - improves  
> > > >  throughput by reducing memory overhead. When a thread is 
> > > running on a  >  core, its state is local; if it is timeshared-out 
> > > and either 1)  >  swapped back in on the same core, it is likely 
> > > that there will be  the  >  core's L1 cache; or 2) onto another 
> > > core, there will not be a cache  >  hit and the state will have to 
> > > be fetched from L2 or main memory,  >  incurring a performance 
> > > hit, esp in the latter. See Lundberg, L.
> > > 1997.
> > >  >  Evaluating the Performance Implications of Binding Threads to  
> > > >  Processors. 393.
> > > http://ieeexplore.ieee.org/iel3/5020/13768/00634520.pdf
> > >  >  for more info.
> > >  >
> > >  >  If you are using JVM on Solaris on SPARC, you should take a 
> > > look at  >  the following links for tuning (the Sun JVM on Solaris 
> > > SPARC has many  >  more performance tuning parameters available), 
> > > including
> > > threading:
> > >  >  - http://java.sun.com/docs/hotspot/threads/threads.html
> > >  >  -
> > > http://java.sun.com/j2se/1.5.0/docs/guide/vm/thread-priorities.htm
> > > l
> > >  >  -
> > > http://www-1.ibm.com/support/docview.wss?rs=180&context=SSEQTP&uid
> > > =swg21107291  >  - 
> > > http://java.sun.com/javase/technologies/performance.jsp
> > >  >
> > >  >
> > >  >  -Glen
> > >  >
> > >  >
> > >  >
> > >  >
> > >  >
> > >  >
> > >  >
> > >  >  On 21/04/2008, Ulf Dittmer <udittmer@yahoo.com> wrote:
> > >  >  > This sounds odd. Why would restricting it to a single  >  >  
> > > core improve performance? The point of using multiple  >  >  cores 
> > > (and multiple threads) is to improve performance  >  >  isn't it? 
> > > I'd leave thread scheduling decisions to the  >  >  JVM. Plus, I 
> > > don't think there is anything in Java to  >  >  facilitate this 
> > > (short of using JNI).
> > >  >  >
> > >  >  >  Are you talking about indexing or searching? You may  >  >  
> > > be able to use multiple parallel threads to improve  >  >  
> > > indexing performance. I don't think Lucene uses  >  >  
> > > multi-threading for searching; not unless you have  >  >  multiple 
> > > indices, anyway.
> > >  >  >
> > >  >  >  Ulf
> > >  >  >
> > >  >  >
> > >  >  >
> > >  >  >  --- Anshum <anshumg@gmail.com> wrote:
> > >  >  >
> > >  >  >  > Hi,
> > >  >  >  >
> > >  >  >  > I have been trying to bind my lucene instance (JVM -  >  
> > > >  > Sun Hotspot*) to a  >  >  > particular core so as to improve 
> > > the performance. Is  >  >  > there a way to do so or  >  >  > is 
> > > there support in lucene to explicitly control the  >  >  > thread 
> > > - processor  >  >  > linkup?
> > >  >  >  >
> > >  >  >  > --
> > >  >  >  > --
> > >  >  >  > The facts expressed here belong to everybody, the  >  >  
> > > > opinions to me.
> > >  >  >  > The distinction is yours to draw............
> > >  >  >  >
> > >  >  >
> > >  >  >
> > >  >  >
> > >  >  >
> > >  >  >
> > > __________________________________________________________________
> > > __________________  >  >  Be a better friend, newshound, and  >  >  
> > > know-it-all with Yahoo! Mobile.  Try it now.
> > > http://mobile.yahoo.com/;_ylt=Ahu06i62sR8HDtDypao8Wcj9tAcJ
> > >  >  >
> > >  >  >
> > >  
> > > ------------------------------------------------------------------
> > > ---  >  >  To unsubscribe, e-mail: 
> > > java-user-unsubscribe@lucene.apache.org
> > >  >  >  For additional commands, e-mail:
> > > java-user-help@lucene.apache.org
> > >  >  >
> > >  >  >
> > >  >
> > >  >
> > >  >
> > >  > --
> > >  >
> > >  >  -
> > >  >
> > >
> > >
> > >
> > > --
> > >
> > >  -
> > >
> > >
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--
--
The facts expressed here belong to everybody, the opinions to me.
The distinction is yours to draw............



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33738-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 22 17:04:55 2008
Return-Path: <java-user-return-33738-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14985 invoked from network); 22 Apr 2008 17:04:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Apr 2008 17:04:55 -0000
Received: (qmail 81310 invoked by uid 500); 22 Apr 2008 17:04:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81280 invoked by uid 500); 22 Apr 2008 17:04:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81269 invoked by uid 99); 22 Apr 2008 17:04:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Apr 2008 10:04:45 -0700
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of stuhood@mailtrust.com designates 207.97.245.161 as permitted sender)
Received: from [207.97.245.161] (HELO smtp161.iad.emailsrvr.com) (207.97.245.161)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Apr 2008 17:03:51 +0000
Received: from relay6.relay.iad.emailsrvr.com (localhost [127.0.0.1])
	by relay6.relay.iad.emailsrvr.com (SMTP Server) with ESMTP id 95044739E0B
	for <java-user@lucene.apache.org>; Tue, 22 Apr 2008 13:04:12 -0400 (EDT)
Received: from webmail20.webmail.iad.mlsrvr.com (webmail20.webmail.iad.mlsrvr.com [192.168.1.41])
	by relay6.relay.iad.emailsrvr.com (SMTP Server) with ESMTP id 8BBCA739DF4
	for <java-user@lucene.apache.org>; Tue, 22 Apr 2008 13:04:12 -0400 (EDT)
Received: from mailtrust.com (localhost [127.0.0.1])
	by webmail20.webmail.iad.mlsrvr.com (Postfix) with ESMTP id 7AB36530026
	for <java-user@lucene.apache.org>; Tue, 22 Apr 2008 13:04:12 -0400 (EDT)
Received: by beta.mailtrust.com
    (Authenticated sender: stuhood@mailtrust.com, from: stuhood@mailtrust.com) 
    with HTTP; Tue, 22 Apr 2008 13:04:12 -0400 (EDT)
Date: Tue, 22 Apr 2008 13:04:12 -0400 (EDT)
Subject: =?UTF-8?Q?Re:=20FW:=20Re:=20Occasional=20Hang=20in=20IndexWriter.close()?=
From: "Stu Hood" <stuhood@mailtrust.com>
To: java-user@lucene.apache.org
Reply-To: stuhood@mailtrust.com
MIME-Version: 1.0
Content-Type: text/plain;charset=UTF-8
Content-Transfer-Encoding: quoted-printable
Importance: Normal
X-Priority: 3 (Normal)
X-Type: plain
Message-ID: <56440.192.168.1.35.1208883852.webmail@192.168.1.35>
X-Mailer: webmail6.6.1
X-Virus-Checked: Checked by ClamAV on apache.org

Hey Mike,=0A=0AThank you very much for looking into this issue!=0A=0AI orig=
inally switched to the SerialMergeScheduler to try and work around this bug=
: http://lucene.markmail.org/message/awkkunr7j24nh4qj . I switched back to =
the ConcurrentMergeScheduler yesterday (since I would rather fail quickly d=
ue to the linked issue, rather than hang due to the bug we discovered).=0A=
=0ANonetheless, Lucene is great, and I really appreciate your hard work! Wo=
uld you mind sending out a link to the issue you created?=0A=0AThanks,=0ASt=
u=0A=0A=0A-----Original Message-----=0AFrom: Michael McCandless <lucene@mik=
emccandless.com>=0ASent: Tuesday, April 22, 2008 7:32am=0ATo: java-user@luc=
ene.apache.org, stuhood@mailtrust.com=0ASubject: Re: FW: Re: Occasional Han=
g in IndexWriter.close()=0A=0A


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33739-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 22 17:13:19 2008
Return-Path: <java-user-return-33739-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18686 invoked from network); 22 Apr 2008 17:13:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Apr 2008 17:13:19 -0000
Received: (qmail 97751 invoked by uid 500); 22 Apr 2008 17:13:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97718 invoked by uid 500); 22 Apr 2008 17:13:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97707 invoked by uid 99); 22 Apr 2008 17:13:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Apr 2008 10:13:11 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [128.218.33.11] (HELO gossamer.ckm.ucsf.edu) (128.218.33.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Apr 2008 17:12:25 +0000
Received: from CKMPC08 (tikal.library.ucsf.edu [128.218.15.151])
	by gossamer.ckm.ucsf.edu (8.13.8/8.13.8) with ESMTP id m3MHCX5D018818
	for <java-user@lucene.apache.org>; Tue, 22 Apr 2008 10:12:37 -0700 (PDT)
From: "Renaud Waldura" <renaud.waldura@library.ucsf.edu>
To: <java-user@lucene.apache.org>
Subject: RE: Binding lucene instance/threads to a particular processor(or core)
Date: Tue, 22 Apr 2008 10:12:33 -0700
Message-ID: <002301c8a49c$0e215ca0$970fda80@campus.net.ucsf.edu>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <5e76f3840804220539h5b19af2avb3972d3234f8847b@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
Thread-Index: AcikdgP7Q6f9CN91Sp+M5kfITijTXAAJcHqw
X-Filter-Version: 1.15 (gossamer)
X-Virus-Checked: Checked by ClamAV on apache.org

> one solution is to set-up a ThreadPoolExecutor[2] with a fixed 
> number of threads and a limited queue size (use a bound BlockingQueue[3]) 

Yes, this is precisely how the ConcurrentMultiSearcher works.
https://issues.apache.org/jira/browse/LUCENE-423



-----Original Message-----
From: Glen Newton [mailto:glen.newton@gmail.com] 
Sent: Tuesday, April 22, 2008 5:40 AM
To: java-user@lucene.apache.org
Subject: Re: Binding lucene instance/threads to a particular processor(or
core)

Anshun,

I think I am dealing with an index of similar scale: 6.4 million records, 83
GB index (see [1] for more info)

I mistakenly thought from your original posting that you were interested in
binding threads to processors for indexing, but it is sounding like you want
to do this for searching. I am not sure if this would work well for
searching, as there is a great deal more ephemeral state. But I am not sure.

With respect to handling concurrency for search, could you describe your
environment better?
- Is it an web-base application?
- What sort of problems do you have now?
- What are your java command line parameters (heap, etc.)
- What are the performance expectations, i.e. average search < N1 seconds;
median search time < N2 seconds
- Are you storing any fields and if so, do you need to store so many?
- Do you have the choice of serving searches from multiple machines?
i.e. load balance across >1 machine; We've found this to be one of the best
solutions for scaling;
- One thing that I do for both indexing and searching is that the threads
that are doing these tasks I always shift their priority to MAX, so that
they are run in preference to threads doing other things, like preparing
Documents, etc.

If it is a web-type environment, one solution is to set-up a
ThreadPoolExecutor[2] with a fixed number of threads and a limited queue
size (use a bound BlockingQueue[3]) . You would have to experiment with the
numbers to get the sweet-spot for your situation.
I would suggest starting with 2 times the number processors (cores) and a
queue of say 20. Requests are queued, but if the request cannot be queued,
at least the application then knows that it is too busy and you can give the
user a message "The system is too busy at this moment, please try again in a
few seconds..." kind of thing. The advantage is also that when things are
very busy, you have the accepted requests handled in a reasonable amount of
time, and some users being told things are too busy, as opposed to all the
requests going in and the system thrashing (and perhaps running-out of
memory at the same time) and everyone's queries being very slow.

But I would suggest setting-up a test harness to emulate your production
conditions to try these things out...

-Glen

[1]http://zzzoot.blogspot.com/2008/04/lucene-indexing-performance-benchmarks
.html
[2]http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/ThreadPoolEx
ecutor.html
[3]http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/BlockingQueu
e.html


2008/4/22 Anshum <anshumg@gmail.com>:
> The paper seems pretty good but I am still wondering if there was a 
> way to  achieve this through the command line parameters. I'm just 
> trying this to  optimize the code, if this works, would let all know 
> else would keep  everyone informed :)  Any other suggestions for 
> handling a concurrency of over 7 search requests  per second for an 
> index size of over 15Gigs containing over 13 million  records?
>  Also, could someone help me with obtaining a 'index size' - 
> 'concurrency' -  'processor power' - 'memory' relationship formula (or
something similar)?
>
>  --
>  Anshum
>
>
>
>
>  On Tue, Apr 22, 2008 at 3:55 AM, Antony Bowesman <adb@teamware.com>
wrote:
>
>  > That paper from 1997 is pretty old, but mirrors our experiences in 
> those  > days. Then, we used Solaris processor sets to really improve 
> performance by  > binding one of our processes to a particular CPU 
> while leaving the other  > CPUs to manage the thread intensive work.
>  >
>  > You can bind processes/LWPs to a CPU on Solaris with psrset.
>  >
>  > The Solaris thread model in the late '90s was also a significant 
> factor in  > performance of multi-threaded programs.  The default 
> thread library in  > Solaris 8 implemented a MxN unbound thread model 
> (threads/LWPS).  In those  > days we found that it did not perform 
> well, so used the bound thread model  > (i.e. 1:1) where a Solaris 
> thread was bound permanently to an LWP.  That  > improved performance 
> a lot.  In Solaris 8, Sun had what they called the  > 'alternate' 
> thread library (T2) around 2000, which became the default  > library 
> in Solaris 9, and implemented a 1:1 model of Solaris threads to  > LWPs.
That new library had dramatic performance improvements over the old.
>  >
>  > Some background info for Java and threading  >  > 
> http://java.sun.com/j2se/1.5.0/docs/guide/vm/thread-priorities.html
>  >
>  > Antony
>  >
>  >
>  >
>  > Glen Newton wrote:
>  >
>  > > I realised that not everyone on this list might be able to access 
> the  > > IEEE paper I pointed-out, so I will include the abstract and 
> some  > > paragraphs from the paper which I have included below.
>  > >
>  > > Also of interest (and should be available to all): Fedorova et al.
>  > > 2005. Performance of Multithreaded Chip Multiprocessors And  > > 
> Implications For Operating System Design. Usenix 2005.
>  > > http://www.eecs.harvard.edu/margo/papers/usenix05/paper.pdf
>  > > "Abstract: We investigated how operating system design should be  
> > > adapted for multithreaded chip multiprocessors (CMT) - a new  > > 
> generation of processors that exploit thread-level parallelism to mask  
> > > the memory latency in modern workloads. We  > > determined that 
> the L2 cache is a critical shared resource on CMT and  > > that an 
> insufficient amount of L2 cache can undermine the ability to  > > hide 
> memory latency on these processors. To use the L2 cache as  > > 
> efficiently as possible, we propose an L2-conscious scheduling  > > 
> algorithm and quantify its performance potential. Using this algorithm  
> > > it is possible to reduce miss ratios in the L2 cache by 25-37% and  
> > > improve processor throughput by 27-45%."
>  > >
>  > >
>  > > From Lundberg, L. 1997:
>  > > Abstract: "The default scheduling algorithm in Solaris and other  
> > > operating systems may result in frequent relocation of threads at  
> > > run-time. Excessive thread relocation cause  > > poor memory 
> performance. This can be avoided by binding threads to  > > 
> processors. However, binding threads to processors may result in an  > 
> > unbalanced load. By considering a previously obtained theoretical  > 
> > result and by evaluating a set of multithreaded Solaris  > > 
> programs using a multiprocessor with 8 processors, we are able to  > > 
> bound the maximum performance loss due to binding threads, The  > > 
> theoretical result is also recapitulated. By evaluating another set of  
> > > multithreaded programs, we show that the gain of binding threads 
> to  > > processors may be substantial, particularly for programs with 
> fine  > > grained parallelism."
>  > >
>  > > First paragraph: "The thread concept in Solaris [3][5] and other  
> > > operating systems makes it possible to write multithreaded 
> programs,  > > which can be executed in parallel on a multiprocessor. 
> Previous  > > experience from real world programs [4] show that, using 
> the default  > > scheduling algorithm in Solaris, threads are 
> frequently relocated from  > > one processor  > > to another at 
> run-time. After each such relocation, the code and data  > > 
> associated with the relocated thread is moved from the cache memory of  
> > > the 0113 processor to the cache of the new processor. This reduces 
> the  > > performance. Run-time relocation of threads to processors can 
> also  > > result in unpredictable response times. This is a problem in 
> systems  > > which operate in a real-time environment. In order to 
> avoid poor  > > memory performance and unpredictable real-time 
> behaviour due to  > > frequent thread relocation, threads can be bound 
> to processors using  > > the processor-bind directive [3] [5]. The 
> major problem with binding  > > threads is that one can end up with an 
> unbalanced load, i.e. some  > > processors may be extremely busy 
> during some time periods while other  > > processors are idle."
>  > >
>  > > -Glen
>  > >
>  > > On 21/04/2008, Glen Newton <glen.newton@gmail.com> wrote:
>  > >
>  > > > And this discussion on bound threads may also shed light on things:
>  > > >
>  > > > 
> http://coding.derkeiler.com/Archive/Java/comp.lang.java.programmer/200
> 7-11/msg02801.html
>  > > >
>  > > >
>  > > >  -Glen
>  > > >
>  > > >
>  > > >  On 21/04/2008, Glen Newton <glen.newton@gmail.com> wrote:
>  > > >  > BInding threads to processors - in many situations - 
> improves  > > >  >  throughput by reducing memory overhead. When a 
> thread is running  > > > on a  > > >  >  core, its state is local; if 
> it is timeshared-out and either 1)  > > >  >  swapped back in on the 
> same core, it is likely that there will be  > > >  the  > > >  >  
> core's L1 cache; or 2) onto another core, there will not be a  > > > 
> cache  > > >  >  hit and the state will have to be fetched from L2 or 
> main memory,  > > >  >  incurring a performance hit, esp in the 
> latter. See Lundberg, L.
>  > > > 1997.
>  > > >  >  Evaluating the Performance Implications of Binding Threads 
> to  > > >  >  Processors. 393.
>  > > > http://ieeexplore.ieee.org/iel3/5020/13768/00634520.pdf
>  > > >  >  for more info.
>  > > >  >
>  > > >  >  If you are using JVM on Solaris on SPARC, you should take a 
> look  > > > at  > > >  >  the following links for tuning (the Sun JVM 
> on Solaris SPARC has  > > > many  > > >  >  more performance tuning 
> parameters available), including  > > > threading:
>  > > >  >  - http://java.sun.com/docs/hotspot/threads/threads.html
>  > > >  >  -
>  > > > 
> http://java.sun.com/j2se/1.5.0/docs/guide/vm/thread-priorities.html
>  > > >  >  -
>  > > > 
> http://www-1.ibm.com/support/docview.wss?rs=180&context=SSEQTP&uid=swg
> 21107291  > > >  >  - 
> http://java.sun.com/javase/technologies/performance.jsp
>  > > >  >
>  > > >  >
>  > > >  >  -Glen
>  > > >  >
>  > > >  >
>  > > >  >
>  > > >  >
>  > > >  >
>  > > >  >
>  > > >  >
>  > > >  >  On 21/04/2008, Ulf Dittmer <udittmer@yahoo.com> wrote:
>  > > >  >  > This sounds odd. Why would restricting it to a single  > 
> > >  >  >  core improve performance? The point of using multiple  > > 
> >  >  >  cores (and multiple threads) is to improve performance  > > >  
> >  >  isn't it? I'd leave thread scheduling decisions to the  > > >  >  
> >  JVM. Plus, I don't think there is anything in Java to  > > >  >  >  
> facilitate this (short of using JNI).
>  > > >  >  >
>  > > >  >  >  Are you talking about indexing or searching? You may  > 
> > >  >  >  be able to use multiple parallel threads to improve  > > >  
> >  >  indexing performance. I don't think Lucene uses  > > >  >  >  
> multi-threading for searching; not unless you have  > > >  >  >  
> multiple indices, anyway.
>  > > >  >  >
>  > > >  >  >  Ulf
>  > > >  >  >
>  > > >  >  >
>  > > >  >  >
>  > > >  >  >  --- Anshum <anshumg@gmail.com> wrote:
>  > > >  >  >
>  > > >  >  >  > Hi,
>  > > >  >  >  >
>  > > >  >  >  > I have been trying to bind my lucene instance (JVM -  
> > > >  >  >  > Sun Hotspot*) to a  > > >  >  >  > particular core so 
> as to improve the performance. Is  > > >  >  >  > there a way to do so 
> or  > > >  >  >  > is there support in lucene to explicitly control 
> the  > > >  >  >  > thread - processor  > > >  >  >  > linkup?
>  > > >  >  >  >
>  > > >  >  >  > --
>  > > >  >  >  > --
>  > > >  >  >  > The facts expressed here belong to everybody, the  > > 
> >  >  >  > opinions to me.
>  > > >  >  >  > The distinction is yours to draw............
>  > > >  >  >  >
>  > > >  >  >
>  > > >  >  >
>  > > >  >  >
>  > > >  >  >
>  > > >  >  >
>  > > > 
> ______________________________________________________________________
> ______________  > > >  >  >  Be a better friend, newshound, and  > > >  
> >  >  know-it-all with Yahoo! Mobile.  Try it now.
>  > > > http://mobile.yahoo.com/;_ylt=Ahu06i62sR8HDtDypao8Wcj9tAcJ
>  > > >  >  >
>  > > >  >  >
>  > > >  
> ---------------------------------------------------------------------
>  > > >  >  >  To unsubscribe, e-mail: 
> java-user-unsubscribe@lucene.apache.org
>  > > >  >  >  For additional commands, e-mail:
>  > > > java-user-help@lucene.apache.org  > > >  >  >  > > >  >  >  > > 
> >  >  > > >  >  > > >  >  > > >  > --  > > >  >  > > >  >  -  > > >  >  
> > > >  > > >  > > >  > > > --  > > >  > > >  -  > > >  > > >  > >  > >  
> >  > 
> ---------------------------------------------------------------------
>  > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  > For additional commands, e-mail: java-user-help@lucene.apache.org  
> >  >
>
>
>  --
>
>
> --
>  The facts expressed here belong to everybody, the opinions to me.
>  The distinction is yours to draw............
>



-- 

-



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33740-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 22 17:50:28 2008
Return-Path: <java-user-return-33740-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33650 invoked from network); 22 Apr 2008 17:50:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Apr 2008 17:50:28 -0000
Received: (qmail 76835 invoked by uid 500); 22 Apr 2008 17:50:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76804 invoked by uid 500); 22 Apr 2008 17:50:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76781 invoked by uid 99); 22 Apr 2008 17:50:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Apr 2008 10:50:19 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of glen.newton@gmail.com designates 64.233.184.227 as permitted sender)
Received: from [64.233.184.227] (HELO wr-out-0506.google.com) (64.233.184.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Apr 2008 17:49:31 +0000
Received: by wr-out-0506.google.com with SMTP id c30so1351069wra.14
        for <java-user@lucene.apache.org>; Tue, 22 Apr 2008 10:49:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=Tg6dUQyTzCgbSFsTWz3e1+xfGbK+Rv0+jXPm5nuLEgE=;
        b=Yzm43WQJgDyAtJ2z9FsMrFFGZCd3QZuxZxWvSKltCtJUK/l7qLNMdPheVsHhHNdQJtNMBUl34uVz55j2VgxPiEnSvlT7HtY/Y0qXY3u2i4E2W/6qQ4cp94hQJSuhiz2CMSMMWrqHS7Ms9zoVvbn9QfR7euir1tD8WnvOWbittD4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=fTeMSWQiGvmFozlRNQd6e1IFDqqdUz+FiPdTQeGfQlcBC3zjCCupkZDywm+jCsjoMHBMGVFOkJKo+v2w/63tCvvav2DjA4woclJHwjPjNMC41iV9fhVyyQj7f6JhITG/Ajz6D/UaRhRAB4WpCFJgpy+y4GzWdLzQ7CGAwk3EAdg=
Received: by 10.140.140.3 with SMTP id n3mr11266rvd.299.1208886583225;
        Tue, 22 Apr 2008 10:49:43 -0700 (PDT)
Received: by 10.140.148.19 with HTTP; Tue, 22 Apr 2008 10:49:43 -0700 (PDT)
Message-ID: <5e76f3840804221049y240b44ceo23ac961e92777d74@mail.gmail.com>
Date: Tue, 22 Apr 2008 13:49:43 -0400
From: "Glen Newton" <glen.newton@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Binding lucene instance/threads to a particular processor(or core)
In-Reply-To: <002301c8a49c$0e215ca0$970fda80@campus.net.ucsf.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <5e76f3840804220539h5b19af2avb3972d3234f8847b@mail.gmail.com>
	 <002301c8a49c$0e215ca0$970fda80@campus.net.ucsf.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

So even if you only have one index, this is the way to go to manage
this kind of problem.

Looking at the implementation and having used ThreadPoolExecutor (TPE)
a lot, I would make the following suggestions for this class so as to
better support this particular use case:
Better access to the configuration of the TPE is needed: the ability
to choose the number of threads (pools size and max pool size), the
type and nature of the queue, etc. Also, the default behaviour of TPE
is to throw an exception when a job is submitted and the queue is
full: throwing an exception is expensive, especially when dozens or
hundreds of searches are being rejected and many exceptions are
occurring in a high load situation. Instead, being able to set the
RejectedExecutionHandler on the TPE would allow for a graceful
handling of rejected queries (feedback to user application, etc).
Also, TPE allows for a custom ThreadFactory, which I use to produce
threads with the highest priority to do the searching.

Right now the implementation sets the #threads and queue size as a
function of the number of Searchables, which is reasonable for this
use case. But it would generalize better if these were a function of
the number of cores on the machine, or some combination.

That said, I would suggest having adding the ability to set the
ThreadPoolExecutor completely, with a getter/setter. This would allow
this class to be useful beyond the use case of multiple indexes,
becoming more generalizable to a number of use cases including
allowing it to support the use case of one (or more indexes) and a
high work load of queries that need to be managed. It could use the
same defaults if the TPE is not set externally (is null).

-Glen

2008/4/22 Renaud Waldura <renaud.waldura@library.ucsf.edu>:
> > one solution is to set-up a ThreadPoolExecutor[2] with a fixed
>  > number of threads and a limited queue size (use a bound BlockingQueue[3])
>
>  Yes, this is precisely how the ConcurrentMultiSearcher works.
>  https://issues.apache.org/jira/browse/LUCENE-423
>
>
>
>
>  -----Original Message-----
>  From: Glen Newton [mailto:glen.newton@gmail.com]
>  Sent: Tuesday, April 22, 2008 5:40 AM
>  To: java-user@lucene.apache.org
>  Subject: Re: Binding lucene instance/threads to a particular processor(or
>  core)
>
>
>
> Anshun,
>
>  I think I am dealing with an index of similar scale: 6.4 million records, 83
>  GB index (see [1] for more info)
>
>  I mistakenly thought from your original posting that you were interested in
>  binding threads to processors for indexing, but it is sounding like you want
>  to do this for searching. I am not sure if this would work well for
>  searching, as there is a great deal more ephemeral state. But I am not sure.
>
>  With respect to handling concurrency for search, could you describe your
>  environment better?
>  - Is it an web-base application?
>  - What sort of problems do you have now?
>  - What are your java command line parameters (heap, etc.)
>  - What are the performance expectations, i.e. average search < N1 seconds;
>  median search time < N2 seconds
>  - Are you storing any fields and if so, do you need to store so many?
>  - Do you have the choice of serving searches from multiple machines?
>  i.e. load balance across >1 machine; We've found this to be one of the best
>  solutions for scaling;
>  - One thing that I do for both indexing and searching is that the threads
>  that are doing these tasks I always shift their priority to MAX, so that
>  they are run in preference to threads doing other things, like preparing
>  Documents, etc.
>
>  If it is a web-type environment, one solution is to set-up a
>  ThreadPoolExecutor[2] with a fixed number of threads and a limited queue
>  size (use a bound BlockingQueue[3]) . You would have to experiment with the
>  numbers to get the sweet-spot for your situation.
>  I would suggest starting with 2 times the number processors (cores) and a
>  queue of say 20. Requests are queued, but if the request cannot be queued,
>  at least the application then knows that it is too busy and you can give the
>  user a message "The system is too busy at this moment, please try again in a
>  few seconds..." kind of thing. The advantage is also that when things are
>  very busy, you have the accepted requests handled in a reasonable amount of
>  time, and some users being told things are too busy, as opposed to all the
>  requests going in and the system thrashing (and perhaps running-out of
>  memory at the same time) and everyone's queries being very slow.
>
>  But I would suggest setting-up a test harness to emulate your production
>  conditions to try these things out...
>
>  -Glen
>
>  [1]http://zzzoot.blogspot.com/2008/04/lucene-indexing-performance-benchmarks
>  .html
>  [2]http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/ThreadPoolEx
>  ecutor.html
>  [3]http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/BlockingQueu
>  e.html
>
>
>  2008/4/22 Anshum <anshumg@gmail.com>:
>  > The paper seems pretty good but I am still wondering if there was a
>  > way to  achieve this through the command line parameters. I'm just
>  > trying this to  optimize the code, if this works, would let all know
>  > else would keep  everyone informed :)  Any other suggestions for
>  > handling a concurrency of over 7 search requests  per second for an
>  > index size of over 15Gigs containing over 13 million  records?
>  >  Also, could someone help me with obtaining a 'index size' -
>  > 'concurrency' -  'processor power' - 'memory' relationship formula (or
>  something similar)?
>  >
>  >  --
>  >  Anshum
>  >
>  >
>  >
>  >
>  >  On Tue, Apr 22, 2008 at 3:55 AM, Antony Bowesman <adb@teamware.com>
>  wrote:
>  >
>  >  > That paper from 1997 is pretty old, but mirrors our experiences in
>  > those  > days. Then, we used Solaris processor sets to really improve
>  > performance by  > binding one of our processes to a particular CPU
>  > while leaving the other  > CPUs to manage the thread intensive work.
>  >  >
>  >  > You can bind processes/LWPs to a CPU on Solaris with psrset.
>  >  >
>  >  > The Solaris thread model in the late '90s was also a significant
>  > factor in  > performance of multi-threaded programs.  The default
>  > thread library in  > Solaris 8 implemented a MxN unbound thread model
>  > (threads/LWPS).  In those  > days we found that it did not perform
>  > well, so used the bound thread model  > (i.e. 1:1) where a Solaris
>  > thread was bound permanently to an LWP.  That  > improved performance
>  > a lot.  In Solaris 8, Sun had what they called the  > 'alternate'
>  > thread library (T2) around 2000, which became the default  > library
>  > in Solaris 9, and implemented a 1:1 model of Solaris threads to  > LWPs.
>  That new library had dramatic performance improvements over the old.
>  >  >
>  >  > Some background info for Java and threading  >  >
>  > http://java.sun.com/j2se/1.5.0/docs/guide/vm/thread-priorities.html
>  >  >
>  >  > Antony
>  >  >
>  >  >
>  >  >
>  >  > Glen Newton wrote:
>  >  >
>  >  > > I realised that not everyone on this list might be able to access
>  > the  > > IEEE paper I pointed-out, so I will include the abstract and
>  > some  > > paragraphs from the paper which I have included below.
>  >  > >
>  >  > > Also of interest (and should be available to all): Fedorova et al.
>  >  > > 2005. Performance of Multithreaded Chip Multiprocessors And  > >
>  > Implications For Operating System Design. Usenix 2005.
>  >  > > http://www.eecs.harvard.edu/margo/papers/usenix05/paper.pdf
>  >  > > "Abstract: We investigated how operating system design should be
>  > > > adapted for multithreaded chip multiprocessors (CMT) - a new  > >
>  > generation of processors that exploit thread-level parallelism to mask
>  > > > the memory latency in modern workloads. We  > > determined that
>  > the L2 cache is a critical shared resource on CMT and  > > that an
>  > insufficient amount of L2 cache can undermine the ability to  > > hide
>  > memory latency on these processors. To use the L2 cache as  > >
>  > efficiently as possible, we propose an L2-conscious scheduling  > >
>  > algorithm and quantify its performance potential. Using this algorithm
>  > > > it is possible to reduce miss ratios in the L2 cache by 25-37% and
>  > > > improve processor throughput by 27-45%."
>  >  > >
>  >  > >
>  >  > > From Lundberg, L. 1997:
>  >  > > Abstract: "The default scheduling algorithm in Solaris and other
>  > > > operating systems may result in frequent relocation of threads at
>  > > > run-time. Excessive thread relocation cause  > > poor memory
>  > performance. This can be avoided by binding threads to  > >
>  > processors. However, binding threads to processors may result in an  >
>  > > unbalanced load. By considering a previously obtained theoretical  >
>  > > result and by evaluating a set of multithreaded Solaris  > >
>  > programs using a multiprocessor with 8 processors, we are able to  > >
>  > bound the maximum performance loss due to binding threads, The  > >
>  > theoretical result is also recapitulated. By evaluating another set of
>  > > > multithreaded programs, we show that the gain of binding threads
>  > to  > > processors may be substantial, particularly for programs with
>  > fine  > > grained parallelism."
>  >  > >
>  >  > > First paragraph: "The thread concept in Solaris [3][5] and other
>  > > > operating systems makes it possible to write multithreaded
>  > programs,  > > which can be executed in parallel on a multiprocessor.
>  > Previous  > > experience from real world programs [4] show that, using
>  > the default  > > scheduling algorithm in Solaris, threads are
>  > frequently relocated from  > > one processor  > > to another at
>  > run-time. After each such relocation, the code and data  > >
>  > associated with the relocated thread is moved from the cache memory of
>  > > > the 0113 processor to the cache of the new processor. This reduces
>  > the  > > performance. Run-time relocation of threads to processors can
>  > also  > > result in unpredictable response times. This is a problem in
>  > systems  > > which operate in a real-time environment. In order to
>  > avoid poor  > > memory performance and unpredictable real-time
>  > behaviour due to  > > frequent thread relocation, threads can be bound
>  > to processors using  > > the processor-bind directive [3] [5]. The
>  > major problem with binding  > > threads is that one can end up with an
>  > unbalanced load, i.e. some  > > processors may be extremely busy
>  > during some time periods while other  > > processors are idle."
>  >  > >
>  >  > > -Glen
>  >  > >
>  >  > > On 21/04/2008, Glen Newton <glen.newton@gmail.com> wrote:
>  >  > >
>  >  > > > And this discussion on bound threads may also shed light on things:
>  >  > > >
>  >  > > >
>  > http://coding.derkeiler.com/Archive/Java/comp.lang.java.programmer/200
>  > 7-11/msg02801.html
>  >  > > >
>  >  > > >
>  >  > > >  -Glen
>  >  > > >
>  >  > > >
>  >  > > >  On 21/04/2008, Glen Newton <glen.newton@gmail.com> wrote:
>  >  > > >  > BInding threads to processors - in many situations -
>  > improves  > > >  >  throughput by reducing memory overhead. When a
>  > thread is running  > > > on a  > > >  >  core, its state is local; if
>  > it is timeshared-out and either 1)  > > >  >  swapped back in on the
>  > same core, it is likely that there will be  > > >  the  > > >  >
>  > core's L1 cache; or 2) onto another core, there will not be a  > > >
>  > cache  > > >  >  hit and the state will have to be fetched from L2 or
>  > main memory,  > > >  >  incurring a performance hit, esp in the
>  > latter. See Lundberg, L.
>  >  > > > 1997.
>  >  > > >  >  Evaluating the Performance Implications of Binding Threads
>  > to  > > >  >  Processors. 393.
>  >  > > > http://ieeexplore.ieee.org/iel3/5020/13768/00634520.pdf
>  >  > > >  >  for more info.
>  >  > > >  >
>  >  > > >  >  If you are using JVM on Solaris on SPARC, you should take a
>  > look  > > > at  > > >  >  the following links for tuning (the Sun JVM
>  > on Solaris SPARC has  > > > many  > > >  >  more performance tuning
>  > parameters available), including  > > > threading:
>  >  > > >  >  - http://java.sun.com/docs/hotspot/threads/threads.html
>  >  > > >  >  -
>  >  > > >
>  > http://java.sun.com/j2se/1.5.0/docs/guide/vm/thread-priorities.html
>  >  > > >  >  -
>  >  > > >
>  > http://www-1.ibm.com/support/docview.wss?rs=180&context=SSEQTP&uid=swg
>  > 21107291  > > >  >  -
>  > http://java.sun.com/javase/technologies/performance.jsp
>  >  > > >  >
>  >  > > >  >
>  >  > > >  >  -Glen
>  >  > > >  >
>  >  > > >  >
>  >  > > >  >
>  >  > > >  >
>  >  > > >  >
>  >  > > >  >
>  >  > > >  >
>  >  > > >  >  On 21/04/2008, Ulf Dittmer <udittmer@yahoo.com> wrote:
>  >  > > >  >  > This sounds odd. Why would restricting it to a single  >
>  > > >  >  >  core improve performance? The point of using multiple  > >
>  > >  >  >  cores (and multiple threads) is to improve performance  > > >
>  > >  >  isn't it? I'd leave thread scheduling decisions to the  > > >  >
>  > >  JVM. Plus, I don't think there is anything in Java to  > > >  >  >
>  > facilitate this (short of using JNI).
>  >  > > >  >  >
>  >  > > >  >  >  Are you talking about indexing or searching? You may  >
>  > > >  >  >  be able to use multiple parallel threads to improve  > > >
>  > >  >  indexing performance. I don't think Lucene uses  > > >  >  >
>  > multi-threading for searching; not unless you have  > > >  >  >
>  > multiple indices, anyway.
>  >  > > >  >  >
>  >  > > >  >  >  Ulf
>  >  > > >  >  >
>  >  > > >  >  >
>  >  > > >  >  >
>  >  > > >  >  >  --- Anshum <anshumg@gmail.com> wrote:
>  >  > > >  >  >
>  >  > > >  >  >  > Hi,
>  >  > > >  >  >  >
>  >  > > >  >  >  > I have been trying to bind my lucene instance (JVM -
>  > > > >  >  >  > Sun Hotspot*) to a  > > >  >  >  > particular core so
>  > as to improve the performance. Is  > > >  >  >  > there a way to do so
>  > or  > > >  >  >  > is there support in lucene to explicitly control
>  > the  > > >  >  >  > thread - processor  > > >  >  >  > linkup?
>  >  > > >  >  >  >
>  >  > > >  >  >  > --
>  >  > > >  >  >  > --
>  >  > > >  >  >  > The facts expressed here belong to everybody, the  > >
>  > >  >  >  > opinions to me.
>  >  > > >  >  >  > The distinction is yours to draw............
>  >  > > >  >  >  >
>  >  > > >  >  >
>  >  > > >  >  >
>  >  > > >  >  >
>  >  > > >  >  >
>  >  > > >  >  >
>  >  > > >
>  > ______________________________________________________________________
>  > ______________  > > >  >  >  Be a better friend, newshound, and  > > >
>  > >  >  know-it-all with Yahoo! Mobile.  Try it now.
>  >  > > > http://mobile.yahoo.com/;_ylt=Ahu06i62sR8HDtDypao8Wcj9tAcJ
>  >  > > >  >  >
>  >  > > >  >  >
>  >  > > >
>  > ---------------------------------------------------------------------
>  >  > > >  >  >  To unsubscribe, e-mail:
>  > java-user-unsubscribe@lucene.apache.org
>  >  > > >  >  >  For additional commands, e-mail:
>  >  > > > java-user-help@lucene.apache.org  > > >  >  >  > > >  >  >  > >
>  > >  >  > > >  >  > > >  >  > > >  > --  > > >  >  > > >  >  -  > > >  >
>  > > > >  > > >  > > >  > > > --  > > >  > > >  -  > > >  > > >  > >  > >
>  > >  >
>  > ---------------------------------------------------------------------
>  >  > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  >  > For additional commands, e-mail: java-user-help@lucene.apache.org
>  > >  >
>  >
>  >
>  >  --
>  >
>  >
>  > --
>  >  The facts expressed here belong to everybody, the opinions to me.
>  >  The distinction is yours to draw............
>  >
>
>
>
>  --
>
>  -
>
>
>
>  ---------------------------------------------------------------------
>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33741-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 22 18:45:23 2008
Return-Path: <java-user-return-33741-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74492 invoked from network); 22 Apr 2008 18:45:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Apr 2008 18:45:23 -0000
Received: (qmail 71876 invoked by uid 500); 22 Apr 2008 18:45:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71849 invoked by uid 500); 22 Apr 2008 18:45:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71838 invoked by uid 99); 22 Apr 2008 18:45:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Apr 2008 11:45:17 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of pmalik@gmail.com designates 209.85.146.180 as permitted sender)
Received: from [209.85.146.180] (HELO wa-out-1112.google.com) (209.85.146.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Apr 2008 18:44:34 +0000
Received: by wa-out-1112.google.com with SMTP id j40so4070415wah.11
        for <java-user@lucene.apache.org>; Tue, 22 Apr 2008 11:44:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=qZbkXMrhwGXZWvjRUVPvB+yrP/IJVafX7SW5zwWZxy0=;
        b=J9ruZVGDLHmkHMz4Msslic5k0a6dr+bwrhpW62qIp+lHvufqKcG+qXjKZypsR7qVLt6JKJw6Rb+O2YlljGlGF8hFXrWuqEp5ynG4m/xOnuAd0gJvkIUBvJjSFf6+USTugvblltpaqIaNkDUFZBeBdFjoGMBPqHDQd3+afoag9TY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=JAA/cY+MfrGJz0nu1dwQ7frPBwDb4TuDBVhYNXYETF7P1jLtWwc8kjVTKY/lnkNb19lifnEQ45/UZ4T02c4uxJAXWwil40Kk/7QeQcReYfPUwmxL+Lyhgq8N6wvU9AU7hngqReKTsbwjkzcIvf/XS7xuwuSfWTiYvZyhnhXdulI=
Received: by 10.114.200.2 with SMTP id x2mr113700waf.19.1208888620218;
        Tue, 22 Apr 2008 11:23:40 -0700 (PDT)
Received: by 10.114.148.6 with HTTP; Tue, 22 Apr 2008 11:23:40 -0700 (PDT)
Message-ID: <4337ab7b0804221123r73440b1cp74619621db9c6c3e@mail.gmail.com>
Date: Tue, 22 Apr 2008 11:23:40 -0700
From: "Prashant Malik" <pmalik@gmail.com>
To: java-user@lucene.apache.org
Subject: Lucene standard analyzer internationalization
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_25761_3340679.1208888620209"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_25761_3340679.1208888620209
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

HI ,

    We have been observing the following problem while tokenizing using
lucene's StandardAnalyzer. Tokens that we get is different on different
machines. I am suspecting it has something to do with the Locale settings o=
n
individual machines?

For example
the word 'C=C3(c)sar'   is split as  'C=C3(c)sar'   on machine 1

while it is split into [c=E3, sar]  on machine 2 .

Could someone please tell me what might be going on?

Thx
PM

------=_Part_25761_3340679.1208888620209--

From java-user-return-33742-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 22 19:04:00 2008
Return-Path: <java-user-return-33742-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87071 invoked from network); 22 Apr 2008 19:03:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Apr 2008 19:03:59 -0000
Received: (qmail 11975 invoked by uid 500); 22 Apr 2008 19:03:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11949 invoked by uid 500); 22 Apr 2008 19:03:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11938 invoked by uid 99); 22 Apr 2008 19:03:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Apr 2008 12:03:53 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Apr 2008 19:03:10 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Lucene standard analyzer internationalization
Date: Tue, 22 Apr 2008 15:01:57 -0400
Message-ID: <9294E20AED46934EA459020706463F94A047C3@SUEXCL-02.ad.syr.edu>
In-Reply-To: <4337ab7b0804221123r73440b1cp74619621db9c6c3e@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene standard analyzer internationalization
Thread-Index: AcikqQl6BPgYt/jLSiCruAYLvkx77AAAESKw
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Prashant,

On 04/22/2008 at 2:23 PM, Prashant Malik wrote:
>     We have been observing the following problem while
> tokenizing using lucene's StandardAnalyzer. Tokens that we get is
> different on different machines. I am suspecting it has something to =
do
> with the Locale settings on individual machines?
>=20
> For example
> the word 'C=C3(c)sar'   is split as  'C=C3(c)sar'   on machine 1
>=20
> while it is split into [c=E3, sar]  on machine 2 .
>=20
> Could someone please tell me what might be going on?

Which version of Lucene are you using?  Is it the same on both machines?

I ask because Lucene recently switched StandardTokenizer lexer =
generation from JavaCC to JFlex, for performance reasons (increased =
throughput).

Also, my email viewer displays the word in question as the following =
sequence of characters:

 1. Capital "C"
 2. Capital "A" with a tilda ("~") above it
 3. Left parenthesis
 4. Lowercase "c"
 5. Right parenthesis
 6. Lowercase "s"
 7. Lowercase "a"
 8. Lowercase "r"

Is this the correct character sequence? (Sometimes UTF-8 can look =
similar to this when it's interpreted as Latin-1.)

Steve


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33743-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 22 20:45:41 2008
Return-Path: <java-user-return-33743-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48247 invoked from network); 22 Apr 2008 20:45:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Apr 2008 20:45:41 -0000
Received: (qmail 66917 invoked by uid 500); 22 Apr 2008 20:45:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66894 invoked by uid 500); 22 Apr 2008 20:45:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66883 invoked by uid 99); 22 Apr 2008 20:45:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Apr 2008 13:45:35 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of pmalik@gmail.com designates 209.85.162.180 as permitted sender)
Received: from [209.85.162.180] (HELO el-out-1112.google.com) (209.85.162.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Apr 2008 20:44:52 +0000
Received: by el-out-1112.google.com with SMTP id z25so1008140ele.15
        for <java-user@lucene.apache.org>; Tue, 22 Apr 2008 13:45:05 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=yT+MLNLE9Uts9d5GtrgvWOAoso2drEPWgfFjWAKjBbU=;
        b=JXo/D3EkEaXwmFYaX3nFb0DuDgTKL9QrPW/JVpTdGuXO7zdgXlsd7e8zPIgBGF3YhY+ANYNmC1sne2BOxEQizlUk0jTHERymVd7e45ZkTSm+hHuEOySHHu3lXqksSniif29XkjfPmngpGP/+yJCfCJdc3mOBsbSNbM65flQm+p4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=SEsXiRNa9ORM1J1S7ltRBsJIDNYIwPHS8zy/Bv3M81Gzks1SnrEv9RsHyMsTg45B7xXdww33LzOESqAJm0MBZgh6+vS+uw6chhhEjVN49V3vjJShmVfkcyxlgRgc3xqrzmp8YRGl9cjikzso7+ywTJYce7wKlhvnC49xKxKiaVY=
Received: by 10.114.13.1 with SMTP id 1mr46442wam.60.1208897104404;
        Tue, 22 Apr 2008 13:45:04 -0700 (PDT)
Received: by 10.114.148.6 with HTTP; Tue, 22 Apr 2008 13:45:04 -0700 (PDT)
Message-ID: <4337ab7b0804221345p7198c240i1a39b51ccdea4760@mail.gmail.com>
Date: Tue, 22 Apr 2008 13:45:04 -0700
From: "Prashant Malik" <pmalik@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene standard analyzer internationalization
In-Reply-To: <9294E20AED46934EA459020706463F94A047C3@SUEXCL-02.ad.syr.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_26676_28477252.1208897104411"
References: <4337ab7b0804221123r73440b1cp74619621db9c6c3e@mail.gmail.com>
	 <9294E20AED46934EA459020706463F94A047C3@SUEXCL-02.ad.syr.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_26676_28477252.1208897104411
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Yes the version of lucene and java are exactly the same on the different
machines.
Infact we unjared lucene and jared it with our jar and are running from the
same nfs mounts on both the machines

Also we have tried with lucene2.2.0 and 2.3.1. with the same result .

also about the actual string u have it right till 2 .

        3,4,5 are a single character

Thx
PM

On Tue, Apr 22, 2008 at 12:01 PM, Steven A Rowe <sarowe@syr.edu> wrote:

> Hi Prashant,
>
> On 04/22/2008 at 2:23 PM, Prashant Malik wrote:
> >     We have been observing the following problem while
> > tokenizing using lucene's StandardAnalyzer. Tokens that we get is
> > different on different machines. I am suspecting it has something to do
> > with the Locale settings on individual machines?
> >
> > For example
> > the word 'C=C3(c)sar'   is split as  'C=C3(c)sar'   on machine 1
> >
> > while it is split into [c=E3, sar]  on machine 2 .
> >
> > Could someone please tell me what might be going on?
>
> Which version of Lucene are you using?  Is it the same on both machines?
>
> I ask because Lucene recently switched StandardTokenizer lexer generation
> from JavaCC to JFlex, for performance reasons (increased throughput).
>
> Also, my email viewer displays the word in question as the following
> sequence of characters:
>
>  1. Capital "C"
>  2. Capital "A" with a tilda ("~") above it
>  3. Left parenthesis
>  4. Lowercase "c"
>  5. Right parenthesis
>  6. Lowercase "s"
>  7. Lowercase "a"
>  8. Lowercase "r"
>
> Is this the correct character sequence? (Sometimes UTF-8 can look similar
> to this when it's interpreted as Latin-1.)
>
> Steve
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_26676_28477252.1208897104411--

From java-user-return-33744-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 22 20:51:04 2008
Return-Path: <java-user-return-33744-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50588 invoked from network); 22 Apr 2008 20:51:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Apr 2008 20:51:04 -0000
Received: (qmail 78545 invoked by uid 500); 22 Apr 2008 20:50:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78519 invoked by uid 500); 22 Apr 2008 20:50:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78508 invoked by uid 99); 22 Apr 2008 20:50:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Apr 2008 13:50:58 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Apr 2008 20:50:14 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Lucene standard analyzer internationalization
Date: Tue, 22 Apr 2008 16:49:01 -0400
Message-ID: <9294E20AED46934EA459020706463F94A047D8@SUEXCL-02.ad.syr.edu>
In-Reply-To: <4337ab7b0804221345p7198c240i1a39b51ccdea4760@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene standard analyzer internationalization
Thread-Index: AcikudkwGze6OToTTJO5ad9Mg/EipgAAC2Iw
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Prashant,

What is the Unicode code point associated with the 3,4,5 character?

Steve

On 04/22/2008 at 4:45 PM, Prashant Malik wrote:
> Yes the version of lucene and java are exactly the same on
> the different
> machines.
> Infact we unjared lucene and jared it with our jar and are
> running from the
> same nfs mounts on both the machines
>=20
> Also we have tried with lucene2.2.0 and 2.3.1. with the same result .
>=20
> also about the actual string u have it right till 2 .
>=20
>         3,4,5 are a single character
>=20
> Thx
> PM
>=20
> On Tue, Apr 22, 2008 at 12:01 PM, Steven A Rowe
> <sarowe@syr.edu> wrote:
>=20
> > Hi Prashant,
> >=20
> > On 04/22/2008 at 2:23 PM, Prashant Malik wrote:
> > >     We have been observing the following problem while
> > > tokenizing using lucene's StandardAnalyzer. Tokens that we get is
> > > different on different machines. I am suspecting it has something =
to
> > > do with the Locale settings on individual machines?
> > >=20
> > > For example
> > > the word 'C=C3(c)sar'   is split as  'C=C3(c)sar'   on machine 1
> > >=20
> > > while it is split into [c=E3, sar]  on machine 2 .
> > >=20
> > > Could someone please tell me what might be going on?
> >=20
> > Which version of Lucene are you using?  Is it the same on both =
machines?
> >=20
> > I ask because Lucene recently switched StandardTokenizer lexer
> > generation from JavaCC to JFlex, for performance reasons (increased
> > throughput).
> >=20
> > Also, my email viewer displays the word in question as the following
> > sequence of characters:
> >=20
> >  1. Capital "C"
> >  2. Capital "A" with a tilda ("~") above it
> >  3. Left parenthesis
> >  4. Lowercase "c"
> >  5. Right parenthesis
> >  6. Lowercase "s"
> >  7. Lowercase "a"
> >  8. Lowercase "r"
> >=20
> > Is this the correct character sequence? (Sometimes UTF-8 can look
> > similar to this when it's interpreted as Latin-1.)
> >=20
> > Steve
> >=20
> >=20
> >=20
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org For
> > additional commands, e-mail: java-user-help@lucene.apache.org
> >=20
> >=20
>

=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33745-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 22 21:04:25 2008
Return-Path: <java-user-return-33745-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56228 invoked from network); 22 Apr 2008 21:04:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Apr 2008 21:04:25 -0000
Received: (qmail 96081 invoked by uid 500); 22 Apr 2008 21:04:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96052 invoked by uid 500); 22 Apr 2008 21:04:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96041 invoked by uid 99); 22 Apr 2008 21:04:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Apr 2008 14:04:19 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Apr 2008 21:03:35 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id BA4E371C399; Tue, 22 Apr 2008 14:03:48 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id B6EA071C398
	for <java-user@lucene.apache.org>; Tue, 22 Apr 2008 14:03:48 -0700 (PDT)
Date: Tue, 22 Apr 2008 14:03:48 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Lucene standard analyzer internationalization
In-Reply-To: <4337ab7b0804221345p7198c240i1a39b51ccdea4760@mail.gmail.com>
Message-ID: <Pine.LNX.4.62.0804221351150.6611@radix.cryptio.net>
References: <4337ab7b0804221123r73440b1cp74619621db9c6c3e@mail.gmail.com> 
 <9294E20AED46934EA459020706463F94A047C3@SUEXCL-02.ad.syr.edu>
 <4337ab7b0804221345p7198c240i1a39b51ccdea4760@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; CHARSET=US-ASCII
Content-ID: <Pine.LNX.4.62.0804221353251.6611@radix.cryptio.net>
X-Virus-Checked: Checked by ClamAV on apache.org


: Yes the version of lucene and java are exactly the same on the different
: machines.
: Infact we unjared lucene and jared it with our jar and are running from the
: same nfs mounts on both the machines

i didn't do an indepth code read, but a quick skim of 
StandardTokenizerImpl didn't turn up any questionale uses of APIs that 
might have differnet behavior depending on the default locale/charset of 
the JVM running it ... everthing is simple char or String based access.

Are you *certain* that you are providing Lucene with the Strings you think 
you are?  Is it possible that you are using a FileReader or 
InputStreamReader that rely on the default character encoding of the JVM 
(which may not be correct for the data you are reading in) ?

Can you write a simple junit test that fails on one machine and passes on 
the other?  If so i'd love to see that test along with the output of this 
code...

  java.util.Enumeration e = System.getProperties().propertyNames();
  while(e.hasMoreElements()) {
    String prop = (String)e.nextElement();
    System.out.println(prop + " = " + java.net.URLEncoder.encode(System.getProperty(prop), "US-ASCII"));
  }


-Hoss

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33746-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 22 21:29:15 2008
Return-Path: <java-user-return-33746-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70669 invoked from network); 22 Apr 2008 21:29:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Apr 2008 21:29:14 -0000
Received: (qmail 26591 invoked by uid 500); 22 Apr 2008 21:29:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26567 invoked by uid 500); 22 Apr 2008 21:29:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26556 invoked by uid 99); 22 Apr 2008 21:29:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Apr 2008 14:29:08 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ionathan@gmail.com designates 209.85.162.182 as permitted sender)
Received: from [209.85.162.182] (HELO el-out-1112.google.com) (209.85.162.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Apr 2008 21:28:16 +0000
Received: by el-out-1112.google.com with SMTP id z25so1025395ele.15
        for <java-user@lucene.apache.org>; Tue, 22 Apr 2008 14:28:37 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=zrnv4h760JWQN1Y6gNNuw+/2XyqouSx24SvpgpDzJI0=;
        b=aXa7beF7WxImzWXnRLHc1F04KyeUVju14RCL3bxft24ISulezqCYKqoNKK5e80r3ZcPvyLxAKBFP/ny2/C/E5s/sCSanRO5XW3TDf6wjCThXVm1x5f7CoMxWoZ1lYow6iywtKvDIu0sfhVPo3nXBlm9+XkZrrkfn5YLht1ZjJvM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=FU/F66cS/dUtqVE6oQlzEmza097/TzbKPXX1xP5eTDSE872u/AdITHauvf9b7ktgDQzWZudQJMk77g8uy+nqIJS3AxPlmACoC16kE8ZS79mVE+Psxjn4UigqmALli2ulS+OQrbptE54bCWNjF0tJvYqeB3+STzquCwuHr3NoWAo=
Received: by 10.115.109.1 with SMTP id l1mr5513wam.90.1208899715990;
        Tue, 22 Apr 2008 14:28:35 -0700 (PDT)
Received: by 10.115.91.4 with HTTP; Tue, 22 Apr 2008 14:28:35 -0700 (PDT)
Message-ID: <6dd2bfeb0804221428t4473a36ay9b9e505358dbe2d4@mail.gmail.com>
Date: Tue, 22 Apr 2008 18:28:35 -0300
From: "Jonathan Ariel" <ionathan@gmail.com>
To: java-user@lucene.apache.org
Subject: MoreLikeThis over a subset of documents
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2563_2429523.1208899715978"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2563_2429523.1208899715978
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Is there any way to execute a MoreLikeThis over a subset of documents? I
need to retrieve a set of interesting keywords from a subset of documents
and not the entire index (imagine that my index has documents categorized as
A, B and C and I just want to work with those categorized as A). Right now
it is using docFreq from the IndexReader. So I looked into the
FilterIndexReader to see if I can override the docFreq behavior, but I'm not
sure if it's possible.

What do you think?

Jonathan

------=_Part_2563_2429523.1208899715978--

From java-user-return-33747-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 22 21:46:41 2008
Return-Path: <java-user-return-33747-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78813 invoked from network); 22 Apr 2008 21:46:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Apr 2008 21:46:41 -0000
Received: (qmail 51108 invoked by uid 500); 22 Apr 2008 21:46:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51075 invoked by uid 500); 22 Apr 2008 21:46:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51059 invoked by uid 99); 22 Apr 2008 21:46:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Apr 2008 14:46:33 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of glen.newton@gmail.com designates 64.233.184.233 as permitted sender)
Received: from [64.233.184.233] (HELO wr-out-0506.google.com) (64.233.184.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Apr 2008 21:45:50 +0000
Received: by wr-out-0506.google.com with SMTP id c30so1447931wra.14
        for <java-user@lucene.apache.org>; Tue, 22 Apr 2008 14:46:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=7ZTVrxjhpPHt9pvKH3HmCVeMUnvK6vpNRd+8j9cmvQY=;
        b=Twhr3t55r4TEdshHM9kgD682QTm6tUMPR8e91UhkKn4m6+YJYHVwzIU8zX0NdI4Gai8gbqlcxj3JEzURbdeSwpVg0YzNaePqtWmnaaessksw8nUgzL9vxS4zjG7GkEDyDQbBcaQAgyOOxhHOa88Bqu9EAUJI5zFFB9uyX5DAOYI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=x2LCkTsHujOrfriJUddqrj1ha4ihnAe9oXrvUrnir87H/C+ck917yxfhwJ+vAxIznuYyBs4yKqkZobdcW3kWzCgoV4hg4SXpnPdqws/GgB68O9i4yg5noKAJnRa/cW4dCT0qD511C8HbB8wt3pv0WHYxDkqalV9afDo0AhzlDxY=
Received: by 10.141.153.17 with SMTP id f17mr16933rvo.267.1208900762481;
        Tue, 22 Apr 2008 14:46:02 -0700 (PDT)
Received: by 10.140.148.19 with HTTP; Tue, 22 Apr 2008 14:46:02 -0700 (PDT)
Message-ID: <5e76f3840804221446k6e58e778y647133cd3179e8ff@mail.gmail.com>
Date: Tue, 22 Apr 2008 17:46:02 -0400
From: "Glen Newton" <glen.newton@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: MoreLikeThis over a subset of documents
In-Reply-To: <6dd2bfeb0804221428t4473a36ay9b9e505358dbe2d4@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <6dd2bfeb0804221428t4473a36ay9b9e505358dbe2d4@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Instead of this:

MoreLikeThis mlt = new MoreLikeThis(ir);
Reader target = ... // orig source of doc you want to find similarities to
Query query = mlt.like( target);
Hits hits = is.search(query);

do this:

MoreLikeThis mlt = new MoreLikeThis(ir);
Reader target = ... // orig source of doc you want to find similarities to
Query moreQuery = mlt.like( target);
BooleanQuery bq = new BooleanQuery();
bq.add(moreQuery, BooleanClause.Occur.MUST);
Query restrictQuery = new TermQuery(new Term("Category", "A"));
bq.add(restrictQuery, BooleanClause.Occur.MUST);
Hits hits = is.search(bq);

-glen

2008/4/22 Jonathan Ariel <ionathan@gmail.com>:
> Is there any way to execute a MoreLikeThis over a subset of documents? I
>  need to retrieve a set of interesting keywords from a subset of documents
>  and not the entire index (imagine that my index has documents categorized as
>  A, B and C and I just want to work with those categorized as A). Right now
>  it is using docFreq from the IndexReader. So I looked into the
>  FilterIndexReader to see if I can override the docFreq behavior, but I'm not
>  sure if it's possible.
>
>  What do you think?
>
>  Jonathan
>



-- 

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33748-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 22 22:00:04 2008
Return-Path: <java-user-return-33748-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84231 invoked from network); 22 Apr 2008 22:00:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Apr 2008 22:00:04 -0000
Received: (qmail 71409 invoked by uid 500); 22 Apr 2008 21:59:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71379 invoked by uid 500); 22 Apr 2008 21:59:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71368 invoked by uid 99); 22 Apr 2008 21:59:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Apr 2008 14:59:57 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [128.218.33.11] (HELO gossamer.ckm.ucsf.edu) (128.218.33.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Apr 2008 21:59:10 +0000
Received: from CKMPC08 (tikal.library.ucsf.edu [128.218.15.151])
	by gossamer.ckm.ucsf.edu (8.13.8/8.13.8) with ESMTP id m3MLxKVM001614
	for <java-user@lucene.apache.org>; Tue, 22 Apr 2008 14:59:23 -0700 (PDT)
From: "Renaud Waldura" <renaud.waldura@library.ucsf.edu>
To: <java-user@lucene.apache.org>
Subject: RE: Binding lucene instance/threads to a particular processor(or core)
Date: Tue, 22 Apr 2008 14:59:19 -0700
Message-ID: <004201c8a4c4$1dc84ab0$970fda80@campus.net.ucsf.edu>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <5e76f3840804221049y240b44ceo23ac961e92777d74@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
Thread-Index: AcikoVmZg7VP728uQaO6uEm3IbCuUwAIqHmg
X-Filter-Version: 1.15 (gossamer)
X-Virus-Checked: Checked by ClamAV on apache.org

That's an excellent idea. I would certainely use such an improved
MultiSearcher.
You should submit a patch.
 

-----Original Message-----
From: Glen Newton [mailto:glen.newton@gmail.com] 
Sent: Tuesday, April 22, 2008 10:50 AM
To: java-user@lucene.apache.org
Subject: Re: Binding lucene instance/threads to a particular processor(or
core)

So even if you only have one index, this is the way to go to manage this
kind of problem.

Looking at the implementation and having used ThreadPoolExecutor (TPE) a
lot, I would make the following suggestions for this class so as to better
support this particular use case:
Better access to the configuration of the TPE is needed: the ability to
choose the number of threads (pools size and max pool size), the type and
nature of the queue, etc. Also, the default behaviour of TPE is to throw an
exception when a job is submitted and the queue is
full: throwing an exception is expensive, especially when dozens or hundreds
of searches are being rejected and many exceptions are occurring in a high
load situation. Instead, being able to set the RejectedExecutionHandler on
the TPE would allow for a graceful handling of rejected queries (feedback to
user application, etc).
Also, TPE allows for a custom ThreadFactory, which I use to produce threads
with the highest priority to do the searching.

Right now the implementation sets the #threads and queue size as a function
of the number of Searchables, which is reasonable for this use case. But it
would generalize better if these were a function of the number of cores on
the machine, or some combination.

That said, I would suggest having adding the ability to set the
ThreadPoolExecutor completely, with a getter/setter. This would allow this
class to be useful beyond the use case of multiple indexes, becoming more
generalizable to a number of use cases including allowing it to support the
use case of one (or more indexes) and a high work load of queries that need
to be managed. It could use the same defaults if the TPE is not set
externally (is null).

-Glen

2008/4/22 Renaud Waldura <renaud.waldura@library.ucsf.edu>:
> > one solution is to set-up a ThreadPoolExecutor[2] with a fixed
>  > number of threads and a limited queue size (use a bound 
> BlockingQueue[3])
>
>  Yes, this is precisely how the ConcurrentMultiSearcher works.
>  https://issues.apache.org/jira/browse/LUCENE-423
>
>
>
>
>  -----Original Message-----
>  From: Glen Newton [mailto:glen.newton@gmail.com]
>  Sent: Tuesday, April 22, 2008 5:40 AM
>  To: java-user@lucene.apache.org
>  Subject: Re: Binding lucene instance/threads to a particular 
> processor(or
>  core)
>
>
>
> Anshun,
>
>  I think I am dealing with an index of similar scale: 6.4 million 
> records, 83  GB index (see [1] for more info)
>
>  I mistakenly thought from your original posting that you were 
> interested in  binding threads to processors for indexing, but it is 
> sounding like you want  to do this for searching. I am not sure if 
> this would work well for  searching, as there is a great deal more
ephemeral state. But I am not sure.
>
>  With respect to handling concurrency for search, could you describe 
> your  environment better?
>  - Is it an web-base application?
>  - What sort of problems do you have now?
>  - What are your java command line parameters (heap, etc.)
>  - What are the performance expectations, i.e. average search < N1 
> seconds;  median search time < N2 seconds
>  - Are you storing any fields and if so, do you need to store so many?
>  - Do you have the choice of serving searches from multiple machines?
>  i.e. load balance across >1 machine; We've found this to be one of 
> the best  solutions for scaling;
>  - One thing that I do for both indexing and searching is that the 
> threads  that are doing these tasks I always shift their priority to 
> MAX, so that  they are run in preference to threads doing other 
> things, like preparing  Documents, etc.
>
>  If it is a web-type environment, one solution is to set-up a  
> ThreadPoolExecutor[2] with a fixed number of threads and a limited 
> queue  size (use a bound BlockingQueue[3]) . You would have to 
> experiment with the  numbers to get the sweet-spot for your situation.
>  I would suggest starting with 2 times the number processors (cores) 
> and a  queue of say 20. Requests are queued, but if the request cannot 
> be queued,  at least the application then knows that it is too busy 
> and you can give the  user a message "The system is too busy at this 
> moment, please try again in a  few seconds..." kind of thing. The 
> advantage is also that when things are  very busy, you have the 
> accepted requests handled in a reasonable amount of  time, and some 
> users being told things are too busy, as opposed to all the  requests 
> going in and the system thrashing (and perhaps running-out of  memory at
the same time) and everyone's queries being very slow.
>
>  But I would suggest setting-up a test harness to emulate your 
> production  conditions to try these things out...
>
>  -Glen
>
>  
> [1]http://zzzoot.blogspot.com/2008/04/lucene-indexing-performance-benc
> hmarks
>  .html
>  
> [2]http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/Thread
> PoolEx
>  ecutor.html
>  
> [3]http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/Blocki
> ngQueu
>  e.html
>
>
>  2008/4/22 Anshum <anshumg@gmail.com>:
>  > The paper seems pretty good but I am still wondering if there was a  
> > way to  achieve this through the command line parameters. I'm just  
> > trying this to  optimize the code, if this works, would let all know  
> > else would keep  everyone informed :)  Any other suggestions for  > 
> handling a concurrency of over 7 search requests  per second for an  > 
> index size of over 15Gigs containing over 13 million  records?
>  >  Also, could someone help me with obtaining a 'index size' -  > 
> 'concurrency' -  'processor power' - 'memory' relationship formula (or  
> something similar)?
>  >
>  >  --
>  >  Anshum
>  >
>  >
>  >
>  >
>  >  On Tue, Apr 22, 2008 at 3:55 AM, Antony Bowesman 
> <adb@teamware.com>
>  wrote:
>  >
>  >  > That paper from 1997 is pretty old, but mirrors our experiences 
> in  > those  > days. Then, we used Solaris processor sets to really 
> improve  > performance by  > binding one of our processes to a 
> particular CPU  > while leaving the other  > CPUs to manage the thread
intensive work.
>  >  >
>  >  > You can bind processes/LWPs to a CPU on Solaris with psrset.
>  >  >
>  >  > The Solaris thread model in the late '90s was also a significant  
> > factor in  > performance of multi-threaded programs.  The default  > 
> thread library in  > Solaris 8 implemented a MxN unbound thread model  
> > (threads/LWPS).  In those  > days we found that it did not perform  
> > well, so used the bound thread model  > (i.e. 1:1) where a Solaris  
> > thread was bound permanently to an LWP.  That  > improved 
> performance  > a lot.  In Solaris 8, Sun had what they called the  >
'alternate'
>  > thread library (T2) around 2000, which became the default  > 
> library  > in Solaris 9, and implemented a 1:1 model of Solaris threads to
> LWPs.
>  That new library had dramatic performance improvements over the old.
>  >  >
>  >  > Some background info for Java and threading  >  >  > 
> http://java.sun.com/j2se/1.5.0/docs/guide/vm/thread-priorities.html
>  >  >
>  >  > Antony
>  >  >
>  >  >
>  >  >
>  >  > Glen Newton wrote:
>  >  >
>  >  > > I realised that not everyone on this list might be able to 
> access  > the  > > IEEE paper I pointed-out, so I will include the 
> abstract and  > some  > > paragraphs from the paper which I have included
below.
>  >  > >
>  >  > > Also of interest (and should be available to all): Fedorova et al.
>  >  > > 2005. Performance of Multithreaded Chip Multiprocessors And  > 
> >  > Implications For Operating System Design. Usenix 2005.
>  >  > > http://www.eecs.harvard.edu/margo/papers/usenix05/paper.pdf
>  >  > > "Abstract: We investigated how operating system design should 
> be  > > > adapted for multithreaded chip multiprocessors (CMT) - a new  
> > >  > generation of processors that exploit thread-level parallelism 
> to mask  > > > the memory latency in modern workloads. We  > > 
> determined that  > the L2 cache is a critical shared resource on CMT 
> and  > > that an  > insufficient amount of L2 cache can undermine the 
> ability to  > > hide  > memory latency on these processors. To use the 
> L2 cache as  > >  > efficiently as possible, we propose an 
> L2-conscious scheduling  > >  > algorithm and quantify its performance 
> potential. Using this algorithm  > > > it is possible to reduce miss 
> ratios in the L2 cache by 25-37% and  > > > improve processor throughput
by 27-45%."
>  >  > >
>  >  > >
>  >  > > From Lundberg, L. 1997:
>  >  > > Abstract: "The default scheduling algorithm in Solaris and 
> other  > > > operating systems may result in frequent relocation of 
> threads at  > > > run-time. Excessive thread relocation cause  > > 
> poor memory  > performance. This can be avoided by binding threads to  
> > >  > processors. However, binding threads to processors may result 
> in an  >  > > unbalanced load. By considering a previously obtained 
> theoretical  >  > > result and by evaluating a set of multithreaded 
> Solaris  > >  > programs using a multiprocessor with 8 processors, we 
> are able to  > >  > bound the maximum performance loss due to binding 
> threads, The  > >  > theoretical result is also recapitulated. By 
> evaluating another set of  > > > multithreaded programs, we show that 
> the gain of binding threads  > to  > > processors may be substantial, 
> particularly for programs with  > fine  > > grained parallelism."
>  >  > >
>  >  > > First paragraph: "The thread concept in Solaris [3][5] and 
> other  > > > operating systems makes it possible to write 
> multithreaded  > programs,  > > which can be executed in parallel on a
multiprocessor.
>  > Previous  > > experience from real world programs [4] show that, 
> using  > the default  > > scheduling algorithm in Solaris, threads are  
> > frequently relocated from  > > one processor  > > to another at  > 
> run-time. After each such relocation, the code and data  > >  > 
> associated with the relocated thread is moved from the cache memory of  
> > > > the 0113 processor to the cache of the new processor. This 
> reduces  > the  > > performance. Run-time relocation of threads to 
> processors can  > also  > > result in unpredictable response times. 
> This is a problem in  > systems  > > which operate in a real-time 
> environment. In order to  > avoid poor  > > memory performance and 
> unpredictable real-time  > behaviour due to  > > frequent thread 
> relocation, threads can be bound  > to processors using  > > the 
> processor-bind directive [3] [5]. The  > major problem with binding  > 
> > threads is that one can end up with an  > unbalanced load, i.e. some  
> > > processors may be extremely busy  > during some time periods while
other  > > processors are idle."
>  >  > >
>  >  > > -Glen
>  >  > >
>  >  > > On 21/04/2008, Glen Newton <glen.newton@gmail.com> wrote:
>  >  > >
>  >  > > > And this discussion on bound threads may also shed light on
things:
>  >  > > >
>  >  > > >
>  > 
> http://coding.derkeiler.com/Archive/Java/comp.lang.java.programmer/200
>  > 7-11/msg02801.html
>  >  > > >
>  >  > > >
>  >  > > >  -Glen
>  >  > > >
>  >  > > >
>  >  > > >  On 21/04/2008, Glen Newton <glen.newton@gmail.com> wrote:
>  >  > > >  > BInding threads to processors - in many situations -  > 
> improves  > > >  >  throughput by reducing memory overhead. When a  > 
> thread is running  > > > on a  > > >  >  core, its state is local; if  
> > it is timeshared-out and either 1)  > > >  >  swapped back in on the  
> > same core, it is likely that there will be  > > >  the  > > >  >  > 
> core's L1 cache; or 2) onto another core, there will not be a  > > >  
> > cache  > > >  >  hit and the state will have to be fetched from L2 
> or  > main memory,  > > >  >  incurring a performance hit, esp in the  
> > latter. See Lundberg, L.
>  >  > > > 1997.
>  >  > > >  >  Evaluating the Performance Implications of Binding 
> Threads  > to  > > >  >  Processors. 393.
>  >  > > > http://ieeexplore.ieee.org/iel3/5020/13768/00634520.pdf
>  >  > > >  >  for more info.
>  >  > > >  >
>  >  > > >  >  If you are using JVM on Solaris on SPARC, you should 
> take a  > look  > > > at  > > >  >  the following links for tuning 
> (the Sun JVM  > on Solaris SPARC has  > > > many  > > >  >  more 
> performance tuning  > parameters available), including  > > > threading:
>  >  > > >  >  - http://java.sun.com/docs/hotspot/threads/threads.html
>  >  > > >  >  -
>  >  > > >
>  > http://java.sun.com/j2se/1.5.0/docs/guide/vm/thread-priorities.html
>  >  > > >  >  -
>  >  > > >
>  > 
> http://www-1.ibm.com/support/docview.wss?rs=180&context=SSEQTP&uid=swg
>  > 21107291  > > >  >  -
>  > http://java.sun.com/javase/technologies/performance.jsp
>  >  > > >  >
>  >  > > >  >
>  >  > > >  >  -Glen
>  >  > > >  >
>  >  > > >  >
>  >  > > >  >
>  >  > > >  >
>  >  > > >  >
>  >  > > >  >
>  >  > > >  >
>  >  > > >  >  On 21/04/2008, Ulf Dittmer <udittmer@yahoo.com> wrote:
>  >  > > >  >  > This sounds odd. Why would restricting it to a single  
> >  > > >  >  >  core improve performance? The point of using multiple  
> > >  > >  >  >  cores (and multiple threads) is to improve performance  
> > > >  > >  >  isn't it? I'd leave thread scheduling decisions to the  
> > > >  >  > >  JVM. Plus, I don't think there is anything in Java to  
> > > >  >  >  > facilitate this (short of using JNI).
>  >  > > >  >  >
>  >  > > >  >  >  Are you talking about indexing or searching? You may  
> >  > > >  >  >  be able to use multiple parallel threads to improve  > 
> > >  > >  >  indexing performance. I don't think Lucene uses  > > >  >  
> >  > multi-threading for searching; not unless you have  > > >  >  >  
> > multiple indices, anyway.
>  >  > > >  >  >
>  >  > > >  >  >  Ulf
>  >  > > >  >  >
>  >  > > >  >  >
>  >  > > >  >  >
>  >  > > >  >  >  --- Anshum <anshumg@gmail.com> wrote:
>  >  > > >  >  >
>  >  > > >  >  >  > Hi,
>  >  > > >  >  >  >
>  >  > > >  >  >  > I have been trying to bind my lucene instance (JVM 
> -  > > > >  >  >  > Sun Hotspot*) to a  > > >  >  >  > particular core 
> so  > as to improve the performance. Is  > > >  >  >  > there a way to 
> do so  > or  > > >  >  >  > is there support in lucene to explicitly 
> control  > the  > > >  >  >  > thread - processor  > > >  >  >  > linkup?
>  >  > > >  >  >  >
>  >  > > >  >  >  > --
>  >  > > >  >  >  > --
>  >  > > >  >  >  > The facts expressed here belong to everybody, the  
> > >  > >  >  >  > opinions to me.
>  >  > > >  >  >  > The distinction is yours to draw............
>  >  > > >  >  >  >
>  >  > > >  >  >
>  >  > > >  >  >
>  >  > > >  >  >
>  >  > > >  >  >
>  >  > > >  >  >
>  >  > > >
>  > 
> ______________________________________________________________________
>  > ______________  > > >  >  >  Be a better friend, newshound, and  > 
> > >  > >  >  know-it-all with Yahoo! Mobile.  Try it now.
>  >  > > > http://mobile.yahoo.com/;_ylt=Ahu06i62sR8HDtDypao8Wcj9tAcJ
>  >  > > >  >  >
>  >  > > >  >  >
>  >  > > >
>  > 
> ---------------------------------------------------------------------
>  >  > > >  >  >  To unsubscribe, e-mail:
>  > java-user-unsubscribe@lucene.apache.org
>  >  > > >  >  >  For additional commands, e-mail:
>  >  > > > java-user-help@lucene.apache.org  > > >  >  >  > > >  >  >  
> > >  > >  >  > > >  >  > > >  >  > > >  > --  > > >  >  > > >  >  -  > 
> > >  >  > > > >  > > >  > > >  > > > --  > > >  > > >  -  > > >  > > >  
> > >  > >  > >  >  > 
> ---------------------------------------------------------------------
>  >  > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  >  > For additional commands, e-mail: 
> java-user-help@lucene.apache.org  > >  >  >  >  >  --  >  >  > --  >  
> The facts expressed here belong to everybody, the opinions to me.
>  >  The distinction is yours to draw............
>  >
>
>
>
>  --
>
>  -
>
>
>
>  ---------------------------------------------------------------------
>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33749-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 22 22:22:07 2008
Return-Path: <java-user-return-33749-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98054 invoked from network); 22 Apr 2008 22:22:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Apr 2008 22:22:07 -0000
Received: (qmail 442 invoked by uid 500); 22 Apr 2008 22:22:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 407 invoked by uid 500); 22 Apr 2008 22:22:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 396 invoked by uid 99); 22 Apr 2008 22:22:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Apr 2008 15:22:01 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ionathan@gmail.com designates 209.85.146.182 as permitted sender)
Received: from [209.85.146.182] (HELO wa-out-1112.google.com) (209.85.146.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Apr 2008 22:21:17 +0000
Received: by wa-out-1112.google.com with SMTP id j40so4182397wah.11
        for <java-user@lucene.apache.org>; Tue, 22 Apr 2008 15:21:30 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=oNVsOrjf+9EjbJRviZaqDatAeU2JtrjMMfB4e07xCiQ=;
        b=uDSB4mXGr9TksisJBaHQOxpr4eMUaE7XFvW2wWN6OxifSt5uFQaERYUJZzi2SXs5Frl07d/Bm8WXkegotizVEMttfGq/jWPZLz9ZBEST1M7coBbkt1BED9QkULI6xIJAbYqPP8aSNMsBo3FhNi8Z3ea9oMEbqTb+kqZMNUJXgzY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=sjhXlLtTrTFkAzoeHoePYwFBdPPpeJwCbLPXTXpUsIYb5uT2K75a9km2MURqRhHK55Bqv0wyZpqasW2jbSRagv/HOxgEpPnsYFrhQZbGrGW2H+4S5tn7KuveNK4HKymdsOXXXR1j5XAit4KKi+WGsURllycRXVYuwppk89IPBqc=
Received: by 10.114.14.1 with SMTP id 1mr8092wan.183.1208902890573;
        Tue, 22 Apr 2008 15:21:30 -0700 (PDT)
Received: by 10.115.91.4 with HTTP; Tue, 22 Apr 2008 15:21:30 -0700 (PDT)
Message-ID: <6dd2bfeb0804221521q78df5e6bg8d571776cdb2b59a@mail.gmail.com>
Date: Tue, 22 Apr 2008 19:21:30 -0300
From: "Jonathan Ariel" <ionathan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: MoreLikeThis over a subset of documents
In-Reply-To: <5e76f3840804221446k6e58e778y647133cd3179e8ff@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2785_29855190.1208902890551"
References: <6dd2bfeb0804221428t4473a36ay9b9e505358dbe2d4@mail.gmail.com>
	 <5e76f3840804221446k6e58e778y647133cd3179e8ff@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2785_29855190.1208902890551
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

But that doesn't help me with my problem, because the interesting terms are
taken from the entire index and not a subset as I need.
On Tue, Apr 22, 2008 at 6:46 PM, Glen Newton <glen.newton@gmail.com> wrote:

> Instead of this:
>
> MoreLikeThis mlt = new MoreLikeThis(ir);
> Reader target = ... // orig source of doc you want to find similarities to
> Query query = mlt.like( target);
> Hits hits = is.search(query);
>
> do this:
>
> MoreLikeThis mlt = new MoreLikeThis(ir);
> Reader target = ... // orig source of doc you want to find similarities to
> Query moreQuery = mlt.like( target);
> BooleanQuery bq = new BooleanQuery();
> bq.add(moreQuery, BooleanClause.Occur.MUST);
> Query restrictQuery = new TermQuery(new Term("Category", "A"));
> bq.add(restrictQuery, BooleanClause.Occur.MUST);
> Hits hits = is.search(bq);
>
> -glen
>
> 2008/4/22 Jonathan Ariel <ionathan@gmail.com>:
> > Is there any way to execute a MoreLikeThis over a subset of documents? I
> >  need to retrieve a set of interesting keywords from a subset of
> documents
> >  and not the entire index (imagine that my index has documents
> categorized as
> >  A, B and C and I just want to work with those categorized as A). Right
> now
> >  it is using docFreq from the IndexReader. So I looked into the
> >  FilterIndexReader to see if I can override the docFreq behavior, but
> I'm not
> >  sure if it's possible.
> >
> >  What do you think?
> >
> >  Jonathan
> >
>
>
>
> --
>
> -
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_2785_29855190.1208902890551--

From java-user-return-33750-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 22 22:30:07 2008
Return-Path: <java-user-return-33750-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 842 invoked from network); 22 Apr 2008 22:30:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Apr 2008 22:30:06 -0000
Received: (qmail 5984 invoked by uid 500); 22 Apr 2008 22:29:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5949 invoked by uid 500); 22 Apr 2008 22:29:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5938 invoked by uid 99); 22 Apr 2008 22:29:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Apr 2008 15:29:59 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 72.14.220.159 as permitted sender)
Received: from [72.14.220.159] (HELO fg-out-1718.google.com) (72.14.220.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Apr 2008 22:29:15 +0000
Received: by fg-out-1718.google.com with SMTP id d23so2340979fga.27
        for <java-user@lucene.apache.org>; Tue, 22 Apr 2008 15:29:28 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=+XfCCcSQv5gZ3kcFncCRbrqMIGIe1Q0xqrL7ZtkZ3bM=;
        b=RlzuBsmd+rat8uQtyr2Z5kOx5KZMftc1r9RtMVl07fHGQUywoBmxwMqgVmf5ZTpOwB3ZI1Ms+7PRAq8i37D9gFykahlVw9V9RxKXuVz83v6JLmnkuZXStQF7eR/CpHT3Za64YLLOs+q4e2NBBwQRKMQWNKeWu5RBOkM6qf7jE04=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=IJQzly6xRYnyY9tGk8EdizlEN8uVKTzLtOG7CKyusa2so1BA89PrWOgpDSIih7EwkeaavJtK9bYuLLhSEhqSoju8xssdySXzfSxAIUv4EuAdpHgNRaehClSA8aPuOmUOaXIbvPucQyxZRbMbTnd0g70nn+a0fl9Eqgg8W08YryE=
Received: by 10.86.59.18 with SMTP id h18mr1585777fga.9.1208903368235;
        Tue, 22 Apr 2008 15:29:28 -0700 (PDT)
Received: from kodapan.lan ( [82.93.70.124])
        by mx.google.com with ESMTPS id k29sm9959692fkk.5.2008.04.22.15.29.26
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 22 Apr 2008 15:29:27 -0700 (PDT)
Message-ID: <480E66C5.2030401@gmail.com>
Date: Wed, 23 Apr 2008 00:29:25 +0200
From: Karl Wettin <karl.wettin@gmail.com>
User-Agent: Thunderbird 2.0.0.12 (Macintosh/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: MoreLikeThis over a subset of documents
References: <6dd2bfeb0804221428t4473a36ay9b9e505358dbe2d4@mail.gmail.com>
In-Reply-To: <6dd2bfeb0804221428t4473a36ay9b9e505358dbe2d4@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Jonathan Ariel skrev:
> Is there any way to execute a MoreLikeThis over a subset of documents? I
> need to retrieve a set of interesting keywords from a subset of documents
> and not the entire index (imagine that my index has documents categorized as
> A, B and C and I just want to work with those categorized as A). Right now
> it is using docFreq from the IndexReader. So I looked into the
> FilterIndexReader to see if I can override the docFreq behavior, but I'm not
> sure if it's possible.
> 
> What do you think?

It might be tricky.

How many documents do you have in the subset? Could you measure the 
distance between the term vectors and cluster them in real time?


      karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33751-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 22 22:34:35 2008
Return-Path: <java-user-return-33751-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2069 invoked from network); 22 Apr 2008 22:34:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Apr 2008 22:34:35 -0000
Received: (qmail 13574 invoked by uid 500); 22 Apr 2008 22:34:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13535 invoked by uid 500); 22 Apr 2008 22:34:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13524 invoked by uid 99); 22 Apr 2008 22:34:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Apr 2008 15:34:28 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ionathan@gmail.com designates 74.125.46.31 as permitted sender)
Received: from [74.125.46.31] (HELO yw-out-2324.google.com) (74.125.46.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Apr 2008 22:33:44 +0000
Received: by yw-out-2324.google.com with SMTP id 5so1413848ywh.5
        for <java-user@lucene.apache.org>; Tue, 22 Apr 2008 15:33:40 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=c9CSoPTLsbQQazp0LnSSGGkio/NChJYzYzgWD6+2qs4=;
        b=v7g/xgMmmAy6qlW6SzMzs+MKO1HfI4e0323IVtpZ5vujeo1MczA4e3WY2r8LS9zQVxetjQbuyQrVQ1AsjA9i3z28lc0Nz9rPk37g+vGF/snaF8y1yNOhpyERu8j8eOHaiLvKMGFxGnJLA3gB8fDETF/s7wew37RwTex9CcMREws=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=t2sDEqD478LWXgy8mX68ZwLYpnRqnoWU9Cq+Sa8SXAe0Y2cD8iz9aC+6jPAEHxUclPU3rqCQgO9uf9Fm59WTdW7lQJhHX7KyMscu3HwkFB2jyutUkHE7rGljhHgCSu7fIooMrEOs+sxEEqhbpbjlkM8LSy21DLxVBIAeraKfR9U=
Received: by 10.115.110.6 with SMTP id n6mr12383wam.92.1208903607670;
        Tue, 22 Apr 2008 15:33:27 -0700 (PDT)
Received: by 10.115.91.4 with HTTP; Tue, 22 Apr 2008 15:33:27 -0700 (PDT)
Message-ID: <6dd2bfeb0804221533j3c937d9p629118e514ee59dd@mail.gmail.com>
Date: Tue, 22 Apr 2008 19:33:27 -0300
From: "Jonathan Ariel" <ionathan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: MoreLikeThis over a subset of documents
In-Reply-To: <480E66C5.2030401@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2812_26439134.1208903607665"
References: <6dd2bfeb0804221428t4473a36ay9b9e505358dbe2d4@mail.gmail.com>
	 <480E66C5.2030401@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2812_26439134.1208903607665
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I could have up to 2 million documents and growing.

On Tue, Apr 22, 2008 at 7:29 PM, Karl Wettin <karl.wettin@gmail.com> wrote:

> Jonathan Ariel skrev:
>
>  Is there any way to execute a MoreLikeThis over a subset of documents? I
> > need to retrieve a set of interesting keywords from a subset of
> > documents
> > and not the entire index (imagine that my index has documents
> > categorized as
> > A, B and C and I just want to work with those categorized as A). Right
> > now
> > it is using docFreq from the IndexReader. So I looked into the
> > FilterIndexReader to see if I can override the docFreq behavior, but I'm
> > not
> > sure if it's possible.
> >
> > What do you think?
> >
>
> It might be tricky.
>
> How many documents do you have in the subset? Could you measure the
> distance between the term vectors and cluster them in real time?
>
>
>     karl
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_2812_26439134.1208903607665--

From java-user-return-33752-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 22 22:40:09 2008
Return-Path: <java-user-return-33752-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3705 invoked from network); 22 Apr 2008 22:40:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Apr 2008 22:40:09 -0000
Received: (qmail 26094 invoked by uid 500); 22 Apr 2008 22:40:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25926 invoked by uid 500); 22 Apr 2008 22:40:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25915 invoked by uid 99); 22 Apr 2008 22:40:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Apr 2008 15:40:03 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of glen.newton@gmail.com designates 209.85.198.242 as permitted sender)
Received: from [209.85.198.242] (HELO rv-out-0506.google.com) (209.85.198.242)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Apr 2008 22:39:20 +0000
Received: by rv-out-0506.google.com with SMTP id k29so1328147rvb.5
        for <java-user@lucene.apache.org>; Tue, 22 Apr 2008 15:39:34 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=VXSj0kTuhRVt6OYx0ppzre1Nxqn3sf2hsJ3TNcoQJkQ=;
        b=uuGPXdjGIGw9BsG2jEMG83Mh5TTZpbXCs7ZRtq7Z1GoRt6n2TFvsljq9wvIlIcOOBybl/2SI+QBixfAGpUifjT+Gb75x+J3TYv4rnMwxwRc/UDFXLeP909ve1U5DEyCc23YrBn+xTbgbmT/rlhRZYPhFhzyCrcvMbb/TNTSCBX4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=wQ6gqgE2xqFFcNCjCz0ppEMnraRACxTak2Ups9Wx9Zdr3oZbDPRuMaWS+d6amZP/dfJ3lXhKPJ2z6PmuKzVXqbDPzzcLJ0/5YEif1bkEtGYnxB++JDapDReMy7sPJQ6QApyFgmNYsyspNRK5z2LuLSEWb5t0eDtbkLSaKahlAKE=
Received: by 10.141.123.4 with SMTP id a4mr186367rvn.294.1208903974172;
        Tue, 22 Apr 2008 15:39:34 -0700 (PDT)
Received: by 10.140.148.19 with HTTP; Tue, 22 Apr 2008 15:39:34 -0700 (PDT)
Message-ID: <5e76f3840804221539i735edbd0yf58c482983e713f3@mail.gmail.com>
Date: Tue, 22 Apr 2008 18:39:34 -0400
From: "Glen Newton" <glen.newton@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: MoreLikeThis over a subset of documents
In-Reply-To: <6dd2bfeb0804221428t4473a36ay9b9e505358dbe2d4@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <6dd2bfeb0804221428t4473a36ay9b9e505358dbe2d4@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Sorry, I misunderstood the problem. My mistake.

While not optimal and rather expensive space-wise, you could have - in
addition to existing keyword field - a field for each category.  If
the document being indexed is in category A, only add the text to the
catA field. Now do MoreLikeThis on catA. This assumes you know the
categories at index time, of course.
Redundant but workable.

-Glen

2008/4/22 Jonathan Ariel <ionathan@gmail.com>:
> Is there any way to execute a MoreLikeThis over a subset of documents? I
>  need to retrieve a set of interesting keywords from a subset of documents
>  and not the entire index (imagine that my index has documents categorized as
>  A, B and C and I just want to work with those categorized as A). Right now
>  it is using docFreq from the IndexReader. So I looked into the
>  FilterIndexReader to see if I can override the docFreq behavior, but I'm not
>  sure if it's possible.
>
>  What do you think?
>
>  Jonathan
>



-- 

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33753-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 22 22:53:03 2008
Return-Path: <java-user-return-33753-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6838 invoked from network); 22 Apr 2008 22:53:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Apr 2008 22:53:03 -0000
Received: (qmail 35004 invoked by uid 500); 22 Apr 2008 22:52:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34966 invoked by uid 500); 22 Apr 2008 22:52:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34955 invoked by uid 99); 22 Apr 2008 22:52:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Apr 2008 15:52:56 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ionathan@gmail.com designates 209.85.146.181 as permitted sender)
Received: from [209.85.146.181] (HELO wa-out-1112.google.com) (209.85.146.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Apr 2008 22:52:13 +0000
Received: by wa-out-1112.google.com with SMTP id j40so4198207wah.11
        for <java-user@lucene.apache.org>; Tue, 22 Apr 2008 15:52:26 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=kTyioGqxodFCR2kwkvfAKUQ6lSKU0QFn3YDDwE1ZOhQ=;
        b=aNQNYVJ8zYXSN6LVjao1BtE9PBqQUPXX8QJZykS28RKBlv3/z0Tg3ZUGbSzEs4+Q1yUc5WzFOmwgkT1u/mfaNtAMnKW57pgXRqMgr+43X/7VO84Q2UNLzaPJkxvtUSVaLwndJFjAMJum1Oa50x/HnZ4zrox8FQZ9cT+RHPLWQyg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=JDlqTp79rR+qRLWTh+OWztT+uw/r9Q5WYM/48ZTjYx1+xuoGRJA22yzQ24gm/DK8H6HgswjzM5xAhbGkncaRMHW2nQgN+0eTcH8V0qxYGtc5eYC1TCrgc+VdTih/GXCgeJRhRQXLHGSCBxzscOhX62PvHlmsbHujCrbWX4gqO48=
Received: by 10.114.66.8 with SMTP id o8mr7868waa.169.1208904746026;
        Tue, 22 Apr 2008 15:52:26 -0700 (PDT)
Received: by 10.115.91.4 with HTTP; Tue, 22 Apr 2008 15:52:25 -0700 (PDT)
Message-ID: <6dd2bfeb0804221552h272c3691xfb733e2668890daf@mail.gmail.com>
Date: Tue, 22 Apr 2008 19:52:25 -0300
From: "Jonathan Ariel" <ionathan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: MoreLikeThis over a subset of documents
In-Reply-To: <5e76f3840804221539i735edbd0yf58c482983e713f3@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2857_1455228.1208904746015"
References: <6dd2bfeb0804221428t4473a36ay9b9e505358dbe2d4@mail.gmail.com>
	 <5e76f3840804221539i735edbd0yf58c482983e713f3@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2857_1455228.1208904746015
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Smart idea, but it won't help me. I have almost 50 categories and eventually
I would like to "filter" not just on category but maybe also on language,
etc.
Karl: what do you mean by measure the distance between the term vectors and
cluster them in real time?

On Tue, Apr 22, 2008 at 7:39 PM, Glen Newton <glen.newton@gmail.com> wrote:

> Sorry, I misunderstood the problem. My mistake.
>
> While not optimal and rather expensive space-wise, you could have - in
> addition to existing keyword field - a field for each category.  If
> the document being indexed is in category A, only add the text to the
> catA field. Now do MoreLikeThis on catA. This assumes you know the
> categories at index time, of course.
> Redundant but workable.
>
> -Glen
>
> 2008/4/22 Jonathan Ariel <ionathan@gmail.com>:
> > Is there any way to execute a MoreLikeThis over a subset of documents? I
> >  need to retrieve a set of interesting keywords from a subset of
> documents
> >  and not the entire index (imagine that my index has documents
> categorized as
> >  A, B and C and I just want to work with those categorized as A). Right
> now
> >  it is using docFreq from the IndexReader. So I looked into the
> >  FilterIndexReader to see if I can override the docFreq behavior, but
> I'm not
> >  sure if it's possible.
> >
> >  What do you think?
> >
> >  Jonathan
> >
>
>
>
> --
>
> -
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_2857_1455228.1208904746015--

From java-user-return-33754-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 23 04:33:54 2008
Return-Path: <java-user-return-33754-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57346 invoked from network); 23 Apr 2008 04:33:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Apr 2008 04:33:54 -0000
Received: (qmail 74009 invoked by uid 500); 23 Apr 2008 04:33:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73973 invoked by uid 500); 23 Apr 2008 04:33:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73955 invoked by uid 99); 23 Apr 2008 04:33:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Apr 2008 21:33:46 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 209.85.146.183 as permitted sender)
Received: from [209.85.146.183] (HELO wa-out-1112.google.com) (209.85.146.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Apr 2008 04:32:58 +0000
Received: by wa-out-1112.google.com with SMTP id j40so4372808wah.11
        for <java-user@lucene.apache.org>; Tue, 22 Apr 2008 21:33:12 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=I40u2+dOhlGrC3Mt/NqB/Uro/0W+VxkucLY2YKsyRTw=;
        b=uyCGd8BOh5m+ne3+qVsTD+vvyVONTuNcmUOs1Rtx15ulCBsrDT0/vbidFp/SVMMujN97XQRAmJ4VQAbz4ti9oTzSEuMSObloJPkV7PflZaCyx+s8FhV8s7Sv5RJwJ1+crwYWgAVan5Fo5Tgok33XJuiiDJ00Zr+3ZqCtjfKAKbk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=l6kxWwHRPXFTRZ/QWGWqdNNv+wHpkMQFUzH2C/OHVSL/VKEd3q9rcmsPOx1gNL02/by7bzCwc9bA2moyciAXf4yHKC1JJbMs4f/fOp8F30Ju9rWr/jec/ExaGkuxPh9SdHzk7WwJvtkSG/VzaXvnPH5KoR4tbxF9GlKE2ECawLI=
Received: by 10.114.12.9 with SMTP id 9mr106065wal.23.1208925190041;
        Tue, 22 Apr 2008 21:33:10 -0700 (PDT)
Received: by 10.114.134.19 with HTTP; Tue, 22 Apr 2008 21:33:09 -0700 (PDT)
Message-ID: <867513fe0804222133t74a4e410l3e0482859e3c9ab7@mail.gmail.com>
Date: Wed, 23 Apr 2008 10:03:09 +0530
From: Anshum <anshumg@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Binding lucene instance/threads to a particular processor(or core)
In-Reply-To: <5e76f3840804221049y240b44ceo23ac961e92777d74@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_899_18312616.1208925190032"
References: <5e76f3840804220539h5b19af2avb3972d3234f8847b@mail.gmail.com>
	 <002301c8a49c$0e215ca0$970fda80@campus.net.ucsf.edu>
	 <5e76f3840804221049y240b44ceo23ac961e92777d74@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_899_18312616.1208925190032
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Glen,

As far as stats for index/search are concerned, here they are:
* Yes, it is a web based application
* I am currently facing issues when the number of concurrent searches goes
high. The search is not able to handle over 2.5 searches per second.
* JVM command line parameters: -server mode; Max heap size 2GB (As it is a
32 bit machine/OS and that is the limit in the case)
* Performance expectations :
  * Mean search time :1-2 seconds (though that is a lot considering that I
have tried other engines, though with smaller indexes and they seem to have
sub 0.01s searching time)
* No, I do not store any fields.
* Yes, I am using multiple machines ( more than a couple ).serving the same
index; a little more than just a vanilla load balancing mechanism; sending
similar requests to the same server to better OS level caching.
* We do not index and search on the same machine, so in that case, I would
not think that changing the priority of these threads would matter. In other
words, there is nothing but search that happens on the search server. If
that is what you meant when you wrote about increasing the thead priority.

I had already started trying the TPE and  guess it would provide a lot of
improvement but 'm looking for other ways as well ! :)

--
Anshum

On Tue, Apr 22, 2008 at 11:19 PM, Glen Newton <glen.newton@gmail.com> wrote:

> So even if you only have one index, this is the way to go to manage
> this kind of problem.
>
> Looking at the implementation and having used ThreadPoolExecutor (TPE)
> a lot, I would make the following suggestions for this class so as to
> better support this particular use case:
> Better access to the configuration of the TPE is needed: the ability
> to choose the number of threads (pools size and max pool size), the
> type and nature of the queue, etc. Also, the default behaviour of TPE
> is to throw an exception when a job is submitted and the queue is
> full: throwing an exception is expensive, especially when dozens or
> hundreds of searches are being rejected and many exceptions are
> occurring in a high load situation. Instead, being able to set the
> RejectedExecutionHandler on the TPE would allow for a graceful
> handling of rejected queries (feedback to user application, etc).
> Also, TPE allows for a custom ThreadFactory, which I use to produce
> threads with the highest priority to do the searching.
>
> Right now the implementation sets the #threads and queue size as a
> function of the number of Searchables, which is reasonable for this
> use case. But it would generalize better if these were a function of
> the number of cores on the machine, or some combination.
>
> That said, I would suggest having adding the ability to set the
> ThreadPoolExecutor completely, with a getter/setter. This would allow
> this class to be useful beyond the use case of multiple indexes,
> becoming more generalizable to a number of use cases including
> allowing it to support the use case of one (or more indexes) and a
> high work load of queries that need to be managed. It could use the
> same defaults if the TPE is not set externally (is null).
>
> -Glen
>
> 2008/4/22 Renaud Waldura <renaud.waldura@library.ucsf.edu>:
> > > one solution is to set-up a ThreadPoolExecutor[2] with a fixed
> >  > number of threads and a limited queue size (use a bound
> BlockingQueue[3])
> >
> >  Yes, this is precisely how the ConcurrentMultiSearcher works.
> >  https://issues.apache.org/jira/browse/LUCENE-423
> >
> >
> >
> >
> >  -----Original Message-----
> >  From: Glen Newton [mailto:glen.newton@gmail.com]
> >  Sent: Tuesday, April 22, 2008 5:40 AM
> >  To: java-user@lucene.apache.org
> >  Subject: Re: Binding lucene instance/threads to a particular
> processor(or
> >  core)
> >
> >
> >
> > Anshun,
> >
> >  I think I am dealing with an index of similar scale: 6.4 million
> records, 83
> >  GB index (see [1] for more info)
> >
> >  I mistakenly thought from your original posting that you were
> interested in
> >  binding threads to processors for indexing, but it is sounding like you
> want
> >  to do this for searching. I am not sure if this would work well for
> >  searching, as there is a great deal more ephemeral state. But I am not
> sure.
> >
> >  With respect to handling concurrency for search, could you describe
> your
> >  environment better?
> >  - Is it an web-base application?
> >  - What sort of problems do you have now?
> >  - What are your java command line parameters (heap, etc.)
> >  - What are the performance expectations, i.e. average search < N1
> seconds;
> >  median search time < N2 seconds
> >  - Are you storing any fields and if so, do you need to store so many?
> >  - Do you have the choice of serving searches from multiple machines?
> >  i.e. load balance across >1 machine; We've found this to be one of the
> best
> >  solutions for scaling;
> >  - One thing that I do for both indexing and searching is that the
> threads
> >  that are doing these tasks I always shift their priority to MAX, so
> that
> >  they are run in preference to threads doing other things, like
> preparing
> >  Documents, etc.
> >
> >  If it is a web-type environment, one solution is to set-up a
> >  ThreadPoolExecutor[2] with a fixed number of threads and a limited
> queue
> >  size (use a bound BlockingQueue[3]) . You would have to experiment with
> the
> >  numbers to get the sweet-spot for your situation.
> >  I would suggest starting with 2 times the number processors (cores) and
> a
> >  queue of say 20. Requests are queued, but if the request cannot be
> queued,
> >  at least the application then knows that it is too busy and you can
> give the
> >  user a message "The system is too busy at this moment, please try again
> in a
> >  few seconds..." kind of thing. The advantage is also that when things
> are
> >  very busy, you have the accepted requests handled in a reasonable
> amount of
> >  time, and some users being told things are too busy, as opposed to all
> the
> >  requests going in and the system thrashing (and perhaps running-out of
> >  memory at the same time) and everyone's queries being very slow.
> >
> >  But I would suggest setting-up a test harness to emulate your
> production
> >  conditions to try these things out...
> >
> >  -Glen
> >
> >  [1]
> http://zzzoot.blogspot.com/2008/04/lucene-indexing-performance-benchmarks
> >  .html
> >  [2]
> http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/ThreadPoolEx
> >  ecutor.html
> >  [3]
> http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/BlockingQueu
> >  e.html
> >
> >
> >  2008/4/22 Anshum <anshumg@gmail.com>:
> >  > The paper seems pretty good but I am still wondering if there was a
> >  > way to  achieve this through the command line parameters. I'm just
> >  > trying this to  optimize the code, if this works, would let all know
> >  > else would keep  everyone informed :)  Any other suggestions for
> >  > handling a concurrency of over 7 search requests  per second for an
> >  > index size of over 15Gigs containing over 13 million  records?
> >  >  Also, could someone help me with obtaining a 'index size' -
> >  > 'concurrency' -  'processor power' - 'memory' relationship formula
> (or
> >  something similar)?
> >  >
> >  >  --
> >  >  Anshum
> >  >
> >  >
> >  >
> >  >
> >  >  On Tue, Apr 22, 2008 at 3:55 AM, Antony Bowesman <adb@teamware.com>
> >  wrote:
> >  >
> >  >  > That paper from 1997 is pretty old, but mirrors our experiences in
> >  > those  > days. Then, we used Solaris processor sets to really improve
> >  > performance by  > binding one of our processes to a particular CPU
> >  > while leaving the other  > CPUs to manage the thread intensive work.
> >  >  >
> >  >  > You can bind processes/LWPs to a CPU on Solaris with psrset.
> >  >  >
> >  >  > The Solaris thread model in the late '90s was also a significant
> >  > factor in  > performance of multi-threaded programs.  The default
> >  > thread library in  > Solaris 8 implemented a MxN unbound thread model
> >  > (threads/LWPS).  In those  > days we found that it did not perform
> >  > well, so used the bound thread model  > (i.e. 1:1) where a Solaris
> >  > thread was bound permanently to an LWP.  That  > improved performance
> >  > a lot.  In Solaris 8, Sun had what they called the  > 'alternate'
> >  > thread library (T2) around 2000, which became the default  > library
> >  > in Solaris 9, and implemented a 1:1 model of Solaris threads to  >
> LWPs.
> >  That new library had dramatic performance improvements over the old.
> >  >  >
> >  >  > Some background info for Java and threading  >  >
> >  > http://java.sun.com/j2se/1.5.0/docs/guide/vm/thread-priorities.html
> >  >  >
> >  >  > Antony
> >  >  >
> >  >  >
> >  >  >
> >  >  > Glen Newton wrote:
> >  >  >
> >  >  > > I realised that not everyone on this list might be able to
> access
> >  > the  > > IEEE paper I pointed-out, so I will include the abstract and
> >  > some  > > paragraphs from the paper which I have included below.
> >  >  > >
> >  >  > > Also of interest (and should be available to all): Fedorova et
> al.
> >  >  > > 2005. Performance of Multithreaded Chip Multiprocessors And  > >
> >  > Implications For Operating System Design. Usenix 2005.
> >  >  > > http://www.eecs.harvard.edu/margo/papers/usenix05/paper.pdf
> >  >  > > "Abstract: We investigated how operating system design should be
> >  > > > adapted for multithreaded chip multiprocessors (CMT) - a new  > >
> >  > generation of processors that exploit thread-level parallelism to
> mask
> >  > > > the memory latency in modern workloads. We  > > determined that
> >  > the L2 cache is a critical shared resource on CMT and  > > that an
> >  > insufficient amount of L2 cache can undermine the ability to  > >
> hide
> >  > memory latency on these processors. To use the L2 cache as  > >
> >  > efficiently as possible, we propose an L2-conscious scheduling  > >
> >  > algorithm and quantify its performance potential. Using this
> algorithm
> >  > > > it is possible to reduce miss ratios in the L2 cache by 25-37%
> and
> >  > > > improve processor throughput by 27-45%."
> >  >  > >
> >  >  > >
> >  >  > > From Lundberg, L. 1997:
> >  >  > > Abstract: "The default scheduling algorithm in Solaris and other
> >  > > > operating systems may result in frequent relocation of threads at
> >  > > > run-time. Excessive thread relocation cause  > > poor memory
> >  > performance. This can be avoided by binding threads to  > >
> >  > processors. However, binding threads to processors may result in an
>  >
> >  > > unbalanced load. By considering a previously obtained theoretical
>  >
> >  > > result and by evaluating a set of multithreaded Solaris  > >
> >  > programs using a multiprocessor with 8 processors, we are able to  >
> >
> >  > bound the maximum performance loss due to binding threads, The  > >
> >  > theoretical result is also recapitulated. By evaluating another set
> of
> >  > > > multithreaded programs, we show that the gain of binding threads
> >  > to  > > processors may be substantial, particularly for programs with
> >  > fine  > > grained parallelism."
> >  >  > >
> >  >  > > First paragraph: "The thread concept in Solaris [3][5] and other
> >  > > > operating systems makes it possible to write multithreaded
> >  > programs,  > > which can be executed in parallel on a multiprocessor.
> >  > Previous  > > experience from real world programs [4] show that,
> using
> >  > the default  > > scheduling algorithm in Solaris, threads are
> >  > frequently relocated from  > > one processor  > > to another at
> >  > run-time. After each such relocation, the code and data  > >
> >  > associated with the relocated thread is moved from the cache memory
> of
> >  > > > the 0113 processor to the cache of the new processor. This
> reduces
> >  > the  > > performance. Run-time relocation of threads to processors
> can
> >  > also  > > result in unpredictable response times. This is a problem
> in
> >  > systems  > > which operate in a real-time environment. In order to
> >  > avoid poor  > > memory performance and unpredictable real-time
> >  > behaviour due to  > > frequent thread relocation, threads can be
> bound
> >  > to processors using  > > the processor-bind directive [3] [5]. The
> >  > major problem with binding  > > threads is that one can end up with
> an
> >  > unbalanced load, i.e. some  > > processors may be extremely busy
> >  > during some time periods while other  > > processors are idle."
> >  >  > >
> >  >  > > -Glen
> >  >  > >
> >  >  > > On 21/04/2008, Glen Newton <glen.newton@gmail.com> wrote:
> >  >  > >
> >  >  > > > And this discussion on bound threads may also shed light on
> things:
> >  >  > > >
> >  >  > > >
> >  >
> http://coding.derkeiler.com/Archive/Java/comp.lang.java.programmer/200
> >  > 7-11/msg02801.html
> >  >  > > >
> >  >  > > >
> >  >  > > >  -Glen
> >  >  > > >
> >  >  > > >
> >  >  > > >  On 21/04/2008, Glen Newton <glen.newton@gmail.com> wrote:
> >  >  > > >  > BInding threads to processors - in many situations -
> >  > improves  > > >  >  throughput by reducing memory overhead. When a
> >  > thread is running  > > > on a  > > >  >  core, its state is local; if
> >  > it is timeshared-out and either 1)  > > >  >  swapped back in on the
> >  > same core, it is likely that there will be  > > >  the  > > >  >
> >  > core's L1 cache; or 2) onto another core, there will not be a  > > >
> >  > cache  > > >  >  hit and the state will have to be fetched from L2 or
> >  > main memory,  > > >  >  incurring a performance hit, esp in the
> >  > latter. See Lundberg, L.
> >  >  > > > 1997.
> >  >  > > >  >  Evaluating the Performance Implications of Binding Threads
> >  > to  > > >  >  Processors. 393.
> >  >  > > > http://ieeexplore.ieee.org/iel3/5020/13768/00634520.pdf
> >  >  > > >  >  for more info.
> >  >  > > >  >
> >  >  > > >  >  If you are using JVM on Solaris on SPARC, you should take
> a
> >  > look  > > > at  > > >  >  the following links for tuning (the Sun JVM
> >  > on Solaris SPARC has  > > > many  > > >  >  more performance tuning
> >  > parameters available), including  > > > threading:
> >  >  > > >  >  - http://java.sun.com/docs/hotspot/threads/threads.html
> >  >  > > >  >  -
> >  >  > > >
> >  > http://java.sun.com/j2se/1.5.0/docs/guide/vm/thread-priorities.html
> >  >  > > >  >  -
> >  >  > > >
> >  >
> http://www-1.ibm.com/support/docview.wss?rs=180&context=SSEQTP&uid=swg
> >  > 21107291  > > >  >  -
> >  > http://java.sun.com/javase/technologies/performance.jsp
> >  >  > > >  >
> >  >  > > >  >
> >  >  > > >  >  -Glen
> >  >  > > >  >
> >  >  > > >  >
> >  >  > > >  >
> >  >  > > >  >
> >  >  > > >  >
> >  >  > > >  >
> >  >  > > >  >
> >  >  > > >  >  On 21/04/2008, Ulf Dittmer <udittmer@yahoo.com> wrote:
> >  >  > > >  >  > This sounds odd. Why would restricting it to a single  >
> >  > > >  >  >  core improve performance? The point of using multiple  > >
> >  > >  >  >  cores (and multiple threads) is to improve performance  > >
> >
> >  > >  >  isn't it? I'd leave thread scheduling decisions to the  > > >
>  >
> >  > >  JVM. Plus, I don't think there is anything in Java to  > > >  >  >
> >  > facilitate this (short of using JNI).
> >  >  > > >  >  >
> >  >  > > >  >  >  Are you talking about indexing or searching? You may  >
> >  > > >  >  >  be able to use multiple parallel threads to improve  > > >
> >  > >  >  indexing performance. I don't think Lucene uses  > > >  >  >
> >  > multi-threading for searching; not unless you have  > > >  >  >
> >  > multiple indices, anyway.
> >  >  > > >  >  >
> >  >  > > >  >  >  Ulf
> >  >  > > >  >  >
> >  >  > > >  >  >
> >  >  > > >  >  >
> >  >  > > >  >  >  --- Anshum <anshumg@gmail.com> wrote:
> >  >  > > >  >  >
> >  >  > > >  >  >  > Hi,
> >  >  > > >  >  >  >
> >  >  > > >  >  >  > I have been trying to bind my lucene instance (JVM -
> >  > > > >  >  >  > Sun Hotspot*) to a  > > >  >  >  > particular core so
> >  > as to improve the performance. Is  > > >  >  >  > there a way to do
> so
> >  > or  > > >  >  >  > is there support in lucene to explicitly control
> >  > the  > > >  >  >  > thread - processor  > > >  >  >  > linkup?
> >  >  > > >  >  >  >
> >  >  > > >  >  >  > --
> >  >  > > >  >  >  > --
> >  >  > > >  >  >  > The facts expressed here belong to everybody, the  >
> >
> >  > >  >  >  > opinions to me.
> >  >  > > >  >  >  > The distinction is yours to draw............
> >  >  > > >  >  >  >
> >  >  > > >  >  >
> >  >  > > >  >  >
> >  >  > > >  >  >
> >  >  > > >  >  >
> >  >  > > >  >  >
> >  >  > > >
> >  >
> ______________________________________________________________________
> >  > ______________  > > >  >  >  Be a better friend, newshound, and  > >
> >
> >  > >  >  know-it-all with Yahoo! Mobile.  Try it now.
> >  >  > > > http://mobile.yahoo.com/;_ylt=Ahu06i62sR8HDtDypao8Wcj9tAcJ
> >  >  > > >  >  >
> >  >  > > >  >  >
> >  >  > > >
> >  > ---------------------------------------------------------------------
> >  >  > > >  >  >  To unsubscribe, e-mail:
> >  > java-user-unsubscribe@lucene.apache.org
> >  >  > > >  >  >  For additional commands, e-mail:
> >  >  > > > java-user-help@lucene.apache.org  > > >  >  >  > > >  >  >  >
> >
> >  > >  >  > > >  >  > > >  >  > > >  > --  > > >  >  > > >  >  -  > > >
>  >
> >  > > > >  > > >  > > >  > > > --  > > >  > > >  -  > > >  > > >  > >  >
> >
> >  > >  >
> >  > ---------------------------------------------------------------------
> >  >  > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >  >  > For additional commands, e-mail: java-user-help@lucene.apache.org
> >  > >  >
> >  >
> >  >
> >  >  --
> >  >
> >  >
> >  > --
> >  >  The facts expressed here belong to everybody, the opinions to me.
> >  >  The distinction is yours to draw............
> >  >
> >
> >
> >
> >  --
> >
> >  -
> >
> >
> >
> >  ---------------------------------------------------------------------
> >  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >  For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
>
> --
>
> -
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
--
The facts expressed here belong to everybody, the opinions to me.
The distinction is yours to draw............

------=_Part_899_18312616.1208925190032--

From java-user-return-33755-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 23 07:38:02 2008
Return-Path: <java-user-return-33755-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50908 invoked from network); 23 Apr 2008 07:38:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Apr 2008 07:38:02 -0000
Received: (qmail 36755 invoked by uid 500); 23 Apr 2008 07:37:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36715 invoked by uid 500); 23 Apr 2008 07:37:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36704 invoked by uid 99); 23 Apr 2008 07:37:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Apr 2008 00:37:55 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [130.225.24.87] (HELO luna.statsbiblioteket.dk) (130.225.24.87)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Apr 2008 07:37:04 +0000
Received: from [172.18.249.244] (PC990.sb.statsbiblioteket.dk [172.18.249.244])
 by luna.statsbiblioteket.dk
 (iPlanet Messaging Server 5.2 HotFix 1.16 (built May 14 2003))
 with ESMTP id <0JZR00MT6P6DFI@luna.statsbiblioteket.dk> for
 java-user@lucene.apache.org; Wed, 23 Apr 2008 09:37:25 +0200 (MEST)
Date: Wed, 23 Apr 2008 09:37:25 +0200
From: Toke Eskildsen <te@statsbiblioteket.dk>
Subject: Re: Binding lucene instance/threads to a particular processor(or	core)
In-reply-to: <867513fe0804212110o6e879e83y9bc05a14d5608287@mail.gmail.com>
To: java-user@lucene.apache.org
Reply-to: te@statsbiblioteket.dk
Message-id: <1208936245.3552.26.camel@PC990.sb.statsbiblioteket.dk>
Organization: Statsbiblioteket
MIME-version: 1.0
X-Mailer: Evolution 2.8.3 (2.8.3-2.fc6)
Content-type: text/plain
Content-transfer-encoding: 7BIT
References: <867513fe0804210002y7c0c3e02j368f77ca684ffcbc@mail.gmail.com>
 <441650.63543.qm@web65413.mail.ac4.yahoo.com>
 <5e76f3840804210655v4e42d1a4ocfdb36f9785063c5@mail.gmail.com>
 <5e76f3840804210658u33009046wb2f3ded19214d08f@mail.gmail.com>
 <5e76f3840804210721t655cfa80h679c63e42d4b773f@mail.gmail.com>
 <480D1459.50908@teamware.com>
 <867513fe0804212110o6e879e83y9bc05a14d5608287@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Tue, 2008-04-22 at 09:40 +0530, Anshum wrote:
> Any other suggestions for handling a concurrency of over 7 search requests
> per second for an index size of over 15Gigs containing over 13 million
> records?

Our index is 30GB+ with 9 million records and a machine handles an
average search in about 250 ms. This is without proper warm-up and using
conventional harddisks, simple queries and simple processing of hits
(extraction of a field from the first 20 hits).

How often do you change your index and do you perform any kind of
warm-up? What is a typical query, how many hits does it return and what
do you do with the hits?

> Also, could someone help me with obtaining a 'index size' - 'concurrency' -
> 'processor power' - 'memory' relationship formula (or something similar)?

I doubt that you'll find a formula as such, as there are so many
variables influencing performance.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33756-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 23 10:47:19 2008
Return-Path: <java-user-return-33756-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43621 invoked from network); 23 Apr 2008 10:47:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Apr 2008 10:47:19 -0000
Received: (qmail 28983 invoked by uid 500); 23 Apr 2008 10:47:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28355 invoked by uid 500); 23 Apr 2008 10:47:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28344 invoked by uid 99); 23 Apr 2008 10:47:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Apr 2008 03:47:12 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 72.14.220.154 as permitted sender)
Received: from [72.14.220.154] (HELO fg-out-1718.google.com) (72.14.220.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Apr 2008 10:46:27 +0000
Received: by fg-out-1718.google.com with SMTP id d23so2544237fga.27
        for <java-user@lucene.apache.org>; Wed, 23 Apr 2008 03:46:36 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=xf04erYFQbiFqg/NY6XR0vpXOzmQfqL9rtsqf+I/dbg=;
        b=HCzCpWBrm/3w7V1DV5tSEklPgTQdP6/p8ETFAUA5DRKMqkij9PXd7v3eSRFjTRPNWjOisUSOl59fhV+XZ0Z0iqrLzzXd9MdP7zQNS8eZIuzVmKLX45ahwrDa1W7HJvfWA+IPYvcDl/L3TdmOWbFRy3fcre77pJu7QfJ9TLB7xCg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=O5ukQFnAjW6YB9BTINIEFP/TqZmbUDE+C4qs1RjuOk4goF4EFGlW+dXykPmecWdCA3II72YvltTFC9od3DDuRZ2yUjIvDK7Ybi3sHEHHIwANqu9daoTebchbg2S6KeP6qaJYsuDcEJ0Fxefew0DgNwOc7Iaqd5d5JTMBImVeIOc=
Received: by 10.86.60.15 with SMTP id i15mr2904307fga.36.1208947596736;
        Wed, 23 Apr 2008 03:46:36 -0700 (PDT)
Received: from kodapan.lan ( [82.93.70.124])
        by mx.google.com with ESMTPS id f19sm11480774fka.19.2008.04.23.03.46.35
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 23 Apr 2008 03:46:35 -0700 (PDT)
Message-ID: <480F138A.3020505@gmail.com>
Date: Wed, 23 Apr 2008 12:46:34 +0200
From: Karl Wettin <karl.wettin@gmail.com>
User-Agent: Thunderbird 2.0.0.12 (Macintosh/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: MoreLikeThis over a subset of documents
References: <6dd2bfeb0804221428t4473a36ay9b9e505358dbe2d4@mail.gmail.com>	 <5e76f3840804221539i735edbd0yf58c482983e713f3@mail.gmail.com> <6dd2bfeb0804221552h272c3691xfb733e2668890daf@mail.gmail.com>
In-Reply-To: <6dd2bfeb0804221552h272c3691xfb733e2668890daf@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Jonathan Ariel skrev:
> Smart idea, but it won't help me. I have almost 50 categories and eventually
> I would like to "filter" not just on category but maybe also on language,
> etc.
> Karl: what do you mean by measure the distance between the term vectors and
> cluster them in real time?

I mean exactly what I say, that if your subsets are small enough you 
could evalute the cosine coefficient and group documents accordingly.

2 million documents is however way to much data to do that in real time.

I would probably create one index for each "filter" you want to use.


         karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33757-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 23 11:26:29 2008
Return-Path: <java-user-return-33757-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57502 invoked from network); 23 Apr 2008 11:26:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Apr 2008 11:26:29 -0000
Received: (qmail 80520 invoked by uid 500); 23 Apr 2008 11:26:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80323 invoked by uid 500); 23 Apr 2008 11:26:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80310 invoked by uid 99); 23 Apr 2008 11:26:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Apr 2008 04:26:23 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rafael.turk@gmail.com designates 66.249.82.232 as permitted sender)
Received: from [66.249.82.232] (HELO wx-out-0506.google.com) (66.249.82.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Apr 2008 11:25:36 +0000
Received: by wx-out-0506.google.com with SMTP id i28so2317647wxd.20
        for <java-user@lucene.apache.org>; Wed, 23 Apr 2008 04:25:49 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=m49s0xybWNbmsUr3c0pi0qbyuUZkQ7g5iwJtk9GtFac=;
        b=Yz19CFwQAs9AqBMc+EZznVkXoyNhwIS3XwcLW2H+DY2KZ/GqNobtw/QW/DduaEQxWF7sBwrWF8k1xzFu10U0NbNZG5MYmXE7JlJ4ETNYLzWLp3glYvryS1BQ1zv3Am47TXwFiVoOtVtxOasLYy0esQlR9ljVfjN7RWm+D6fSAe8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=uUoMbJ+NQJ3NjPKIllR61ungReRQ8pNNVfiY6WNvKZx0Y2XpnhBxqOApdpRBFlXeFFDgaLPGqPaNUhv3Y87+93tIU30DWkHdwwypX0n/woZCCLkLKc3t5ZHWX/y6JQYUsmTmMk7Goh8LxcKdtWByNp6GlPPkWP5VeMAfrE4MOBo=
Received: by 10.141.141.3 with SMTP id t3mr486973rvn.52.1208949949175;
        Wed, 23 Apr 2008 04:25:49 -0700 (PDT)
Received: by 10.141.175.6 with HTTP; Wed, 23 Apr 2008 04:25:49 -0700 (PDT)
Message-ID: <abded4280804230425t2f379e6br7dda1fb2f2bb5009@mail.gmail.com>
Date: Wed, 23 Apr 2008 08:25:49 -0300
From: "Rafael Turk" <rafael.turk@gmail.com>
To: java-user@lucene.apache.org
Subject: Lucene and Google Web 1T 5 Gram
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_24695_27355959.1208949949175"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_24695_27355959.1208949949175
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi Folks,

   I=B4m trying to load Google Web 1T 5 Gram to Lucene. (This corpus contai=
ns
English word n-grams and their observed frequency counts. The length of the
n-grams ranges from unigrams(single words) to five-grams)

   I=B4m loading each ngram (each row is a ngram) as an individual Document=
.
This way I=B4ll be able to search for each ngram separated, but I=B4m endin=
g
with huge indexes witch makes them very hard to load and read the index.

  Is there a better way to load and read ngrams to a Lucene index? Maybe
using lower level api?


More Info about Google Web 1T 5 Gram corpus at:
<http://www.ldc.upenn.edu/Catalog/docs/LDC2006T13/readme.txt>

Thanks,

Rafael

------=_Part_24695_27355959.1208949949175--

From java-user-return-33758-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 23 11:29:59 2008
Return-Path: <java-user-return-33758-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58115 invoked from network); 23 Apr 2008 11:29:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Apr 2008 11:29:59 -0000
Received: (qmail 85996 invoked by uid 500); 23 Apr 2008 11:29:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85842 invoked by uid 500); 23 Apr 2008 11:29:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85831 invoked by uid 99); 23 Apr 2008 11:29:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Apr 2008 04:29:51 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=MIME_BASE64_BLANKS,MIME_BASE64_TEXT,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lieutroy@gmail.com designates 209.85.198.246 as permitted sender)
Received: from [209.85.198.246] (HELO rv-out-0506.google.com) (209.85.198.246)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Apr 2008 11:29:07 +0000
Received: by rv-out-0506.google.com with SMTP id k29so1481468rvb.5
        for <java-user@lucene.apache.org>; Wed, 23 Apr 2008 04:29:20 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to:subject:date:mime-version:content-type:content-transfer-encoding:x-priority:x-msmail-priority:x-mailer:x-mimeole;
        bh=AftX6WMTJrcg/8oLWSlnr6X3HExu1RVwfEDjgBsWErw=;
        b=d1LcC6pqi9HPlQgYSr0QeAYUKDYtmvQFQ1KIHEN8eKWXX4+JLGNS0C7+EQ6fwHIaNHQxA0+3rspooBcOIdjblDWKujD5spzQSJCCS+jIBUHbo2UMGiH30J9CfjKJlpdsj0DZiyiTBdezWZMFgJnM/7l9T99gYNsPoHFPzXxZUkU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:subject:date:mime-version:content-type:content-transfer-encoding:x-priority:x-msmail-priority:x-mailer:x-mimeole;
        b=sy9/C+SgyjCop+s49V2NkwLo/WOTQi4QUSHTnRQfpRMil4QzXRUXvnOhXUAfeTBPw8bvfpIb2PLaJHqg3anqLUpF5Ikvi+PP3+EbsZi1qeKiPuJlHqUwpyAuinMrT41tIBqWaePE5GdZEOU3zPAEY21lTQ7JcZkHQMOIbqRnEWo=
Received: by 10.140.54.6 with SMTP id c6mr342025rva.37.1208950160558;
        Wed, 23 Apr 2008 04:29:20 -0700 (PDT)
Received: from WangJianxin ( [203.86.44.2])
        by mx.google.com with ESMTPS id b39sm13202191rvf.8.2008.04.23.04.29.18
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 23 Apr 2008 04:29:20 -0700 (PDT)
Message-ID: <001101c8a535$4d93a2f0$b208a8c0@WangJianxin>
From: =?gb2312?B?zfW9qNDC?= <lieutroy@gmail.com>
To: "general" <general@lucene.apache.org>,
	"java-user" <java-user@lucene.apache.org>
Subject: A problem about additonal info(after some modification for lucene)
Date: Wed, 23 Apr 2008 19:29:26 +0800
MIME-Version: 1.0
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: base64
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
X-Virus-Checked: Checked by ClamAV on apache.org

SSBtb2RpZmllZCBzb21lIGx1Y2VuZSdzIGNvZGUgdG8gbWFrZSBsdWNlbmUgaGF2ZSB0aGUgbmV3
IHVzZSBsaWtlOg0KDQogICAgZG9jPW5ldyBEb2N1bWVudCgpOw0KICAgIGJ5dGVbXSBhZGRpdGlv
bmFsSW5mbz1uZXcgYnl0ZVtdeyd4JywneCcsJ3gnfTsNCiAgICBkb2MuYWRkKG5ldyBGaWVsZCgi
ZmllbGQxIiwiYWEgYWEiLEZpZWxkLlN0b3JlLllFUyxGaWVsZC5JbmRleC5UT0tFTklaRUQsRmll
bGQuVGVybVZlY3Rvci5OTyxhZGRpdGlvbmFsSW5mbykpOw0KDQpJIGNoYW5nZSB0aGUgKi5mcnAg
ZmlsZSBhczoNCiAgICAgICAgaWYgKDEgPT0gdGVybURvY0ZyZXEpIHsNCiAgICAgICAgICBmcmVx
T3V0LndyaXRlVkludChuZXdEb2NDb2RlfDEpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAg
IGZyZXFPdXQud3JpdGVWSW50KG5ld0RvY0NvZGUpOw0KICAgICAgICAgIGZyZXFPdXQud3JpdGVW
SW50KHRlcm1Eb2NGcmVxKTsNCiAgICAgICAgfQ0KICAgICAgICBJdGVyYXRvcjxJbnRlZ2VyPiBp
dD1taW5TdGF0ZS5maWVsZG5vcy5pdGVyYXRvcigpOy8vZmllbGRub3MgaXMgYSBzZXQgY29udGFp
bmluZyBhbGwgZmlsZWQgbm8gYWJvdXQgdGhlIHRlcm0gaW4gYSBzcGVjaWZpZWQgZmllbGQuDQog
ICAgICAgIHdoaWxlKGl0Lmhhc05leHQoKSkgDQogICAgICAgIHsNCiAgICAgICAgIGludCBmaWVs
ZG5vPWl0Lm5leHQoKTsNCiAgICAgICAgIGZyZXFPdXQud3JpdGVWSW50KGZpZWxkbm8pOy8vIyMN
CiAgICAgICAgfQ0KICAgICAgICBmcmVxT3V0LndyaXRlVkludCgwKTsNCkkgdXNlIDAgdG8gbWFy
ayB0aGUgZW5kIG9mIGZpbGVkbm9zLmZvciBleGFtcGxlOg0KDQpkb2MuYWRkKG5ldyBGaWVsZCgi
ZmllbGQxIiwiYWEgYWEiLEZpZWxkLlN0b3JlLllFUyxGaWVsZC5JbmRleC5UT0tFTklaRUQsRmll
bGQuVGVybVZlY3Rvci5OTyxhZGRpdGlvbmFsSW5mbykpOw0KZG9jLmFkZChuZXcgRmllbGQoImZp
ZWxkMSIsImFhIGFhIixGaWVsZC5TdG9yZS5ZRVMsRmllbGQuSW5kZXguVE9LRU5JWkVELEZpZWxk
LlRlcm1WZWN0b3IuTk8sYWRkaXRpb25hbEluZm8pKTsNCg0KdGhlICouZnJxIGZpbGUgaXMob25l
IHJlY29yZCk6DQogICAgIGRvY2lkKD8pICAgIDQoZnJlcSkgICAgMSwyDQoNCjEsMiA6IHRoZSBm
aXJzdCgxKSBhbmQgc2Vjb25kKDIpIGZpZWxkcyBoYXMgIHRlcm0gImFhIi4NCg0KSXQgd29ya3Mg
Y29ycmVjdGx5LCBpZiBjb3VudDw0ODAwMDAgYXMgdGhlIGZvbGxvd2luZyBjb2RlLiBidXQgaWYg
Y291bnQ+PTQ4MDAwLCBlcnJvciBvY2N1cnMuDQppbnQgY291bnQ9NDgwMDAwOw0KZm9yKGludCBp
PTA7aTxjb3VudDtpKyspDQogIHsNCiAgZG9jPW5ldyBEb2N1bWVudCgpOw0KICBieXRlW10gYWRk
aXRpb25hbEluZm89bmV3IGJ5dGVbXXsneCcsJ3gnLCd4J307DQogIGRvYy5hZGQobmV3IEZpZWxk
KCJmaWVsZDEiLCJhYSBhYSIsRmllbGQuU3RvcmUuWUVTLEZpZWxkLkluZGV4LlRPS0VOSVpFRCxG
aWVsZC5UZXJtVmVjdG9yLk5PLGFkZGl0aW9uYWxJbmZvKSk7DQogIGFkZGl0aW9uYWxJbmZvPW5l
dyBieXRlW117J3knLCd5JywneSd9Ow0KICBkb2MuYWRkKG5ldyBGaWVsZCgiZmllbGQxIiwiYWEg
IGFhIixGaWVsZC5TdG9yZS5ZRVMsRmllbGQuSW5kZXguVE9LRU5JWkVELEZpZWxkLlRlcm1WZWN0
b3IuTk8sYWRkaXRpb25hbEluZm8pKTsNCiAgZG9jLmFkZChuZXcgRmllbGQoImZpZWxkMiIsImJi
IGNjIixGaWVsZC5TdG9yZS5ZRVMsRmllbGQuSW5kZXguVE9LRU5JWkVELEZpZWxkLlRlcm1WZWN0
b3IuTk8sYWRkaXRpb25hbEluZm8pKTsNCiAgd3JpdGVyLmFkZERvY3VtZW50KGRvYyk7DQogIA0K
ICBkb2M9bmV3IERvY3VtZW50KCk7DQogIGFkZGl0aW9uYWxJbmZvPW5ldyBieXRlW117J2MnLCdj
JywnYycsJ2MnfTsNCiAgZG9jLmFkZChuZXcgRmllbGQoImZpZWxkMSIsImFhIGJiIixGaWVsZC5T
dG9yZS5ZRVMsRmllbGQuSW5kZXguVE9LRU5JWkVELEZpZWxkLlRlcm1WZWN0b3IuTk8sYWRkaXRp
b25hbEluZm8pKTsNCiAgYWRkaXRpb25hbEluZm89bmV3IGJ5dGVbXXsnYicsJ2InLCdiJywnYid9
Ow0KICBkb2MuYWRkKG5ldyBGaWVsZCgiZmllbGQxIiwiYmIiLEZpZWxkLlN0b3JlLllFUyxGaWVs
ZC5JbmRleC5UT0tFTklaRUQsRmllbGQuVGVybVZlY3Rvci5OTyxhZGRpdGlvbmFsSW5mbykpOw0K
ICBkb2MuYWRkKG5ldyBGaWVsZCgiZmllbGQxIiwiY2MgYmIiLEZpZWxkLlN0b3JlLllFUyxGaWVs
ZC5JbmRleC5UT0tFTklaRUQsRmllbGQuVGVybVZlY3Rvci5OTyxhZGRpdGlvbmFsSW5mbykpOw0K
ICB3cml0ZXIuYWRkRG9jdW1lbnQoZG9jKTsNCn0NCg0KSSB0aGluayBpdCB3aWxsIG1lcmdlIGlu
ZGV4IGlmIGNvdW50Pj00ODAwMDAuIHRoZSBlcnJvciBtYXkgYmUgaW4gIGNsYXNzIFNlZ21lbnRN
ZXJnZXIuDQpwcml2YXRlIGZpbmFsIGludCBtZXJnZVRlcm1JbmZvKFNlZ21lbnRNZXJnZUluZm9b
XSBzbWlzLCBpbnQgbikNCiAgICAgICAgICB0aHJvd3MgQ29ycnVwdEluZGV4RXhjZXB0aW9uLCBJ
T0V4Y2VwdGlvbiB7DQogICAgbG9uZyBmcmVxUG9pbnRlciA9IGZyZXFPdXRwdXQuZ2V0RmlsZVBv
aW50ZXIoKTsNCiAgICBsb25nIHByb3hQb2ludGVyID0gcHJveE91dHB1dC5nZXRGaWxlUG9pbnRl
cigpOw0KDQogICAgaW50IGRmID0gYXBwZW5kUG9zdGluZ3Moc21pcywgbik7ICAgIC8vIGFwcGVu
ZCBwb3N0aW5nIGRhdGENCg0KICAgIGxvbmcgc2tpcFBvaW50ZXIgPSBza2lwTGlzdFdyaXRlci53
cml0ZVNraXAoZnJlcU91dHB1dCk7DQogICAgU3lzdGVtLmVyci5wcmludGxuKCJsb25nIHNraXBQ
b2ludGVyID0gc2tpcExpc3RXcml0ZXIud3JpdGVTa2lwKGZyZXFPdXRwdXQpOyIpOw0KDQogICAg
aWYgKGRmID4gMCkgew0KICAgICAgLy8gYWRkIGFuIGVudHJ5IHRvIHRoZSBkaWN0aW9uYXJ5IHdp
dGggcG9pbnRlcnMgdG8gcHJveCBhbmQgZnJlcSBmaWxlcw0KICAgICAgdGVybUluZm8uc2V0KGRm
LCBmcmVxUG9pbnRlciwgcHJveFBvaW50ZXIsIChpbnQpIChza2lwUG9pbnRlciAtIGZyZXFQb2lu
dGVyKSk7DQogICAgICB0ZXJtSW5mb3NXcml0ZXIuYWRkKHNtaXNbMF0udGVybSwgdGVybUluZm8p
Ow0KICAgIH0NCg0KICAgIHJldHVybiBkZjsNCiAgfQ0KDQpJIGNhbm5vdCB1bmRlcnN0YW5kIHRo
ZSBwcm9jZXNzIG9mIGhlcmUuDQpDb3VsZCB5b3UgZ2l2ZSBtZSBhbnkgaGVscD8NClRoYW5rcy4=



From java-user-return-33759-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 23 11:39:14 2008
Return-Path: <java-user-return-33759-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60808 invoked from network); 23 Apr 2008 11:39:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Apr 2008 11:39:14 -0000
Received: (qmail 93211 invoked by uid 500); 23 Apr 2008 11:39:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93175 invoked by uid 500); 23 Apr 2008 11:39:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93164 invoked by uid 99); 23 Apr 2008 11:39:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Apr 2008 04:39:08 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists.digitalpebble@gmail.com designates 74.125.46.28 as permitted sender)
Received: from [74.125.46.28] (HELO yw-out-2324.google.com) (74.125.46.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Apr 2008 11:38:22 +0000
Received: by yw-out-2324.google.com with SMTP id 9so147877ywe.5
        for <java-user@lucene.apache.org>; Wed, 23 Apr 2008 04:38:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=r+s+pOkO7VfwIlXA5KitZe6Hgwvz2vS9M+wAEfO3osQ=;
        b=pXo9HY7SisAh5f7GZZbhLX3jm9tNyI3eV5m8REnUx1WXG9iGrUUCZn9hw9t1b8SknN3fWbkGpJObFaaFqBEuB7BeLW6VoPoWNB+Ogj/BJ9o4gCwnnxtaFKGuVlY/QZHMhqvWnKuq946ed1C9hPoTNFkkAnoOg8TIj+1Jw+9ymrw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=bhvrOgeVDOr4v9QH5mzeJc/2yYKaj1Muih9ENW2TJ1RCbS4eHCMLJdJzao5TfBdFgp5qQSHASH4kyihQ09F3Fx2U5AvUgSu9geBcwUACMwtybBJLtpmFDapJZdw+DwBBtVUmfUMJtcQ81a9TirVtty+HzlfGmhIx8Z/nFpbHtJI=
Received: by 10.151.42.16 with SMTP id u16mr307718ybj.223.1208950709227;
        Wed, 23 Apr 2008 04:38:29 -0700 (PDT)
Received: by 10.150.146.13 with HTTP; Wed, 23 Apr 2008 04:38:29 -0700 (PDT)
Message-ID: <16d405e0804230438l42d5086fgf4374b8497bf54cd@mail.gmail.com>
Date: Wed, 23 Apr 2008 12:38:29 +0100
From: "Julien Nioche" <lists.digitalpebble@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene and Google Web 1T 5 Gram
In-Reply-To: <abded4280804230425t2f379e6br7dda1fb2f2bb5009@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_19875_29997533.1208950709219"
References: <abded4280804230425t2f379e6br7dda1fb2f2bb5009@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_19875_29997533.1208950709219
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi Raphael,

We initially tried to do the same but ended up developing our own API for
querying the Web 1T. You can find more details on
http://digitalpebble.com/resources.html
There could be a way to reuse elements from Lucene e.g. the Term index only
but I could not find an obvious way to achieve that.

Best,

Julien

--=20
DigitalPebble Ltd
http://www.digitalpebble.com


On 23/04/2008, Rafael Turk <rafael.turk@gmail.com> wrote:
>
> Hi Folks,
>
>    I=B4m trying to load Google Web 1T 5 Gram to Lucene. (This corpus
> contains
> English word n-grams and their observed frequency counts. The length of
> the
> n-grams ranges from unigrams(single words) to five-grams)
>
>    I=B4m loading each ngram (each row is a ngram) as an individual Docume=
nt.
> This way I=B4ll be able to search for each ngram separated, but I=B4m end=
ing
> with huge indexes witch makes them very hard to load and read the index.
>
>   Is there a better way to load and read ngrams to a Lucene index? Maybe
> using lower level api?
>
>
> More Info about Google Web 1T 5 Gram corpus at:
> <http://www.ldc.upenn.edu/Catalog/docs/LDC2006T13/readme.txt>
>
> Thanks,
>
>
> Rafael
>

------=_Part_19875_29997533.1208950709219--

From java-user-return-33760-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 23 13:11:05 2008
Return-Path: <java-user-return-33760-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3810 invoked from network); 23 Apr 2008 13:11:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Apr 2008 13:11:05 -0000
Received: (qmail 39737 invoked by uid 500); 23 Apr 2008 13:10:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39715 invoked by uid 500); 23 Apr 2008 13:10:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39704 invoked by uid 99); 23 Apr 2008 13:10:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Apr 2008 06:10:59 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ionathan@gmail.com designates 64.233.184.234 as permitted sender)
Received: from [64.233.184.234] (HELO wr-out-0506.google.com) (64.233.184.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Apr 2008 13:10:15 +0000
Received: by wr-out-0506.google.com with SMTP id c30so1590087wra.14
        for <java-user@lucene.apache.org>; Wed, 23 Apr 2008 06:10:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=xEfzoAK56+glJgyTG6pHmq3qWZyLUoihl9DpZ/kX10I=;
        b=pnbs9DwkjLTbxog32WIDuqOREyodOTH2eKzEI6Gi/j+s/PM31dc46GsAKSrl66m4yYOp4mk9MguZCV3m/DxEDZt/DmkEqT2fmKHgs7DiWSLHLsF3ievU2eYJSdriz+D2q5aqzHxw6wv5xsSkGNvnZxPT9wjILVC8/4BRjk+h0dg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=rDM2qSQdDZgN6VULPxYThFPTKRqF6VlLYxnbQ0GAGuh33UeTbEdX7myEqEiCi5Cbr+zVnjCE/AJktxiXEpwchRL8KydtNZ46RNGYyxGcjsYWuLgfNs6dNeE9vQuH86Mkc0vn0+x9hQWBnzfFDB2Ljfd4KaYiXypmMlaPojvH+F4=
Received: by 10.114.151.13 with SMTP id y13mr192815wad.134.1208956226781;
        Wed, 23 Apr 2008 06:10:26 -0700 (PDT)
Received: by 10.115.91.4 with HTTP; Wed, 23 Apr 2008 06:10:26 -0700 (PDT)
Message-ID: <6dd2bfeb0804230610h60eca7b7hc9243aff3a032d76@mail.gmail.com>
Date: Wed, 23 Apr 2008 10:10:26 -0300
From: "Jonathan Ariel" <ionathan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: MoreLikeThis over a subset of documents
In-Reply-To: <480F138A.3020505@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5148_32649843.1208956226754"
References: <6dd2bfeb0804221428t4473a36ay9b9e505358dbe2d4@mail.gmail.com>
	 <5e76f3840804221539i735edbd0yf58c482983e713f3@mail.gmail.com>
	 <6dd2bfeb0804221552h272c3691xfb733e2668890daf@mail.gmail.com>
	 <480F138A.3020505@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5148_32649843.1208956226754
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Yes, it will be too much to do in real time, but it is a good idea tough.

I don't know if a vector of term frequencies is stored with the document.
Because I could search on the index to get the subset of documents and then
take the term frequencies from there.
In that case I could change MoreLikeThis to receive a set of term
frequencies, instead of an IndexReader, and use that to do all the process.

Anyone knows if a document contains for his fields the term frequencies?

On Wed, Apr 23, 2008 at 7:46 AM, Karl Wettin <karl.wettin@gmail.com> wrote:

> Jonathan Ariel skrev:
>
> > Smart idea, but it won't help me. I have almost 50 categories and
> > eventually
> > I would like to "filter" not just on category but maybe also on
> > language,
> > etc.
> > Karl: what do you mean by measure the distance between the term vectors
> > and
> > cluster them in real time?
> >
>
> I mean exactly what I say, that if your subsets are small enough you could
> evalute the cosine coefficient and group documents accordingly.
>
> 2 million documents is however way to much data to do that in real time.
>
> I would probably create one index for each "filter" you want to use.
>
>
>        karl
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_5148_32649843.1208956226754--

From java-user-return-33761-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 23 13:17:33 2008
Return-Path: <java-user-return-33761-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6463 invoked from network); 23 Apr 2008 13:17:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Apr 2008 13:17:33 -0000
Received: (qmail 53145 invoked by uid 500); 23 Apr 2008 13:17:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53110 invoked by uid 500); 23 Apr 2008 13:17:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53099 invoked by uid 99); 23 Apr 2008 13:17:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Apr 2008 06:17:27 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [213.162.48.15] (HELO soufre.accelance.net) (213.162.48.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Apr 2008 13:16:33 +0000
Received: from [192.168.3.105] (LSt-Amand-152-32-31-90.w82-127.abo.wanadoo.fr [82.127.74.90])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by soufre.accelance.net (Postfix) with ESMTP id 0F912452D4
	for <java-user@lucene.apache.org>; Wed, 23 Apr 2008 15:16:52 +0200 (CEST)
Message-ID: <480F36C3.2050601@garambrogne.net>
Date: Wed, 23 Apr 2008 15:16:51 +0200
From: Mathieu Lecarme <mathieu@garambrogne.net>
User-Agent: Thunderbird 2.0.0.12 (X11/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene and Google Web 1T 5 Gram
References: <abded4280804230425t2f379e6br7dda1fb2f2bb5009@mail.gmail.com>
In-Reply-To: <abded4280804230425t2f379e6br7dda1fb2f2bb5009@mail.gmail.com>
X-Enigmail-Version: 0.95.6
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Rafael Turk a crit :
> Hi Folks,
>
>    Im trying to load Google Web 1T 5 Gram to Lucene. (This corpus contains
> English word n-grams and their observed frequency counts. The length of the
> n-grams ranges from unigrams(single words) to five-grams)
>
>    Im loading each ngram (each row is a ngram) as an individual Document.
> This way Ill be able to search for each ngram separated, but Im ending
> with huge indexes witch makes them very hard to load and read the index.
>
>   Is there a better way to load and read ngrams to a Lucene index? Maybe
> using lower level api?
>
>
> More Info about Google Web 1T 5 Gram corpus at:
> <http://www.ldc.upenn.edu/Catalog/docs/LDC2006T13/readme.txt>
>
> Thanks,
>
> Rafael
>
>   

What do you wont to do?
If you wont an ngram => popularity map, just use a berkley DB, and use 
this information in your Lucene application. Lucene is a reversed index, 
Berkeley DB an index.

M.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33762-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 23 13:34:55 2008
Return-Path: <java-user-return-33762-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13499 invoked from network); 23 Apr 2008 13:34:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Apr 2008 13:34:55 -0000
Received: (qmail 88402 invoked by uid 500); 23 Apr 2008 13:34:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88375 invoked by uid 500); 23 Apr 2008 13:34:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88364 invoked by uid 99); 23 Apr 2008 13:34:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Apr 2008 06:34:49 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.241] (HELO an-out-0708.google.com) (209.85.132.241)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Apr 2008 13:34:04 +0000
Received: by an-out-0708.google.com with SMTP id c5so705094anc.49
        for <java-user@lucene.apache.org>; Wed, 23 Apr 2008 06:34:15 -0700 (PDT)
Received: by 10.100.33.4 with SMTP id g4mr2822507ang.111.1208957654909;
        Wed, 23 Apr 2008 06:34:14 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 23sm75485hsd.10.2008.04.23.06.34.14
        (version=TLSv1/SSLv3 cipher=OTHER);
        Wed, 23 Apr 2008 06:34:14 -0700 (PDT)
In-Reply-To: <56440.192.168.1.35.1208883852.webmail@192.168.1.35>
References: <56440.192.168.1.35.1208883852.webmail@192.168.1.35>
Mime-Version: 1.0 (Apple Message framework v753)
X-Priority: 3 (Normal)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <E0EB4C6C-64C8-4CD9-ACB7-04C3BB41805B@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Occasional Hang in IndexWriter.close()
Date: Wed, 23 Apr 2008 09:34:49 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


Stu Hood wrote:

> Thank you very much for looking into this issue!

You're welcome!  Thank you for catching it & reporting it.

> I originally switched to the SerialMergeScheduler to try and work  
> around this bug: http://lucene.markmail.org/message/ 
> awkkunr7j24nh4qj . I switched back to the ConcurrentMergeScheduler  
> yesterday (since I would rather fail quickly due to the linked  
> issue, rather than hang due to the bug we discovered).

OK, but that issue is apparently a JVM bug, though I guess it's  
possible using ConcurrentMergeScheduler causes the bug to be tickled;  
I'm not sure.

> Nonetheless, Lucene is great, and I really appreciate your hard  
> work! Would you mind sending out a link to the issue you created?

Sure, here's the issue & attached patch that fixes it:

     https://issues.apache.org/jira/browse/LUCENE-1270

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33763-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 23 13:57:36 2008
Return-Path: <java-user-return-33763-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23625 invoked from network); 23 Apr 2008 13:57:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Apr 2008 13:57:36 -0000
Received: (qmail 26510 invoked by uid 500); 23 Apr 2008 13:57:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26481 invoked by uid 500); 23 Apr 2008 13:57:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26466 invoked by uid 99); 23 Apr 2008 13:57:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Apr 2008 06:57:30 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 209.85.128.188 as permitted sender)
Received: from [209.85.128.188] (HELO fk-out-0910.google.com) (209.85.128.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Apr 2008 13:56:45 +0000
Received: by fk-out-0910.google.com with SMTP id 19so3803740fkr.5
        for <java-user@lucene.apache.org>; Wed, 23 Apr 2008 06:56:38 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=hPn0/+tbf+19+DompItPVg0lmr5lZVunNz3YuIojyOw=;
        b=PeI9x+W0CAdCRD6PI4QW+aJoOyyFB0IXF6mC3eVs4Hpw1wDRsaAAazqZ/EbSutVtss33Pb0o+AWQLeac1ZwplDgnSg4x4Y1ruD3StbUkODvB+cFN1pacUY0+7h8FAKgmNVz+z5qUmowM6X608bLTjfYIwosOPJegHhCSyD4GIQs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=lNyAV3Y5lru7hkfoKtreSyhMV3pkqykxVTZuzeUFw6I+tNd+IMgTizw/F146h+1WIVGjiOTNWdeoedUUcV3ZxUoby+jYU4roF60xhhElzKsN/I947BMs0jIVgFJsfBHfZS0d/i26aqU/XFU3QKYtf5jWAJPkrUk7LtawcVPBPk0=
Received: by 10.82.151.9 with SMTP id y9mr1002891bud.8.1208958997908;
        Wed, 23 Apr 2008 06:56:37 -0700 (PDT)
Received: from kodapan.lan ( [82.93.70.124])
        by mx.google.com with ESMTPS id b30sm105575ika.8.2008.04.23.06.56.36
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 23 Apr 2008 06:56:36 -0700 (PDT)
Message-ID: <480F4012.6090306@gmail.com>
Date: Wed, 23 Apr 2008 15:56:34 +0200
From: Karl Wettin <karl.wettin@gmail.com>
User-Agent: Thunderbird 2.0.0.12 (Macintosh/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: MoreLikeThis over a subset of documents
References: <6dd2bfeb0804221428t4473a36ay9b9e505358dbe2d4@mail.gmail.com>	 <5e76f3840804221539i735edbd0yf58c482983e713f3@mail.gmail.com>	 <6dd2bfeb0804221552h272c3691xfb733e2668890daf@mail.gmail.com>	 <480F138A.3020505@gmail.com> <6dd2bfeb0804230610h60eca7b7hc9243aff3a032d76@mail.gmail.com>
In-Reply-To: <6dd2bfeb0804230610h60eca7b7hc9243aff3a032d76@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Jonathan Ariel skrev:
> Yes, it will be too much to do in real time, but it is a good idea tough.
> 
> I don't know if a vector of term frequencies is stored with the document.
> Because I could search on the index to get the subset of documents and then
> take the term frequencies from there.
> In that case I could change MoreLikeThis to receive a set of term
> frequencies, instead of an IndexReader, and use that to do all the process.

That would probably not be too speedy.

> 
> Anyone knows if a document contains for his fields the term frequencies?

When adding a field to a document you can specify if and how detailed 
term vector you want to store for easy retrieval.

http://lucene.apache.org/java/2_3_1/api/org/apache/lucene/document/Field.html


I really think you should consider one index per more-like-this filter.


        karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33764-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 23 14:07:42 2008
Return-Path: <java-user-return-33764-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28939 invoked from network); 23 Apr 2008 14:07:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Apr 2008 14:07:41 -0000
Received: (qmail 49965 invoked by uid 500); 23 Apr 2008 14:07:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49926 invoked by uid 500); 23 Apr 2008 14:07:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49915 invoked by uid 99); 23 Apr 2008 14:07:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Apr 2008 07:07:34 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 209.85.128.184 as permitted sender)
Received: from [209.85.128.184] (HELO fk-out-0910.google.com) (209.85.128.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Apr 2008 14:06:49 +0000
Received: by fk-out-0910.google.com with SMTP id 19so3808288fkr.5
        for <java-user@lucene.apache.org>; Wed, 23 Apr 2008 07:06:38 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=hPn0/+tbf+19+DompItPVg0lmr5lZVunNz3YuIojyOw=;
        b=PeI9x+W0CAdCRD6PI4QW+aJoOyyFB0IXF6mC3eVs4Hpw1wDRsaAAazqZ/EbSutVtss33Pb0o+AWQLeac1ZwplDgnSg4x4Y1ruD3StbUkODvB+cFN1pacUY0+7h8FAKgmNVz+z5qUmowM6X608bLTjfYIwosOPJegHhCSyD4GIQs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=lNyAV3Y5lru7hkfoKtreSyhMV3pkqykxVTZuzeUFw6I+tNd+IMgTizw/F146h+1WIVGjiOTNWdeoedUUcV3ZxUoby+jYU4roF60xhhElzKsN/I947BMs0jIVgFJsfBHfZS0d/i26aqU/XFU3QKYtf5jWAJPkrUk7LtawcVPBPk0=
Received: by 10.82.151.9 with SMTP id y9mr1002891bud.8.1208958997908;
        Wed, 23 Apr 2008 06:56:37 -0700 (PDT)
Received: from kodapan.lan ( [82.93.70.124])
        by mx.google.com with ESMTPS id b30sm105575ika.8.2008.04.23.06.56.36
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 23 Apr 2008 06:56:36 -0700 (PDT)
Message-ID: <480F4012.6090306@gmail.com>
Date: Wed, 23 Apr 2008 15:56:34 +0200
From: Karl Wettin <karl.wettin@gmail.com>
User-Agent: Thunderbird 2.0.0.12 (Macintosh/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: MoreLikeThis over a subset of documents
References: <6dd2bfeb0804221428t4473a36ay9b9e505358dbe2d4@mail.gmail.com>	 <5e76f3840804221539i735edbd0yf58c482983e713f3@mail.gmail.com>	 <6dd2bfeb0804221552h272c3691xfb733e2668890daf@mail.gmail.com>	 <480F138A.3020505@gmail.com> <6dd2bfeb0804230610h60eca7b7hc9243aff3a032d76@mail.gmail.com>
In-Reply-To: <6dd2bfeb0804230610h60eca7b7hc9243aff3a032d76@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Jonathan Ariel skrev:
> Yes, it will be too much to do in real time, but it is a good idea tough.
> 
> I don't know if a vector of term frequencies is stored with the document.
> Because I could search on the index to get the subset of documents and then
> take the term frequencies from there.
> In that case I could change MoreLikeThis to receive a set of term
> frequencies, instead of an IndexReader, and use that to do all the process.

That would probably not be too speedy.

> 
> Anyone knows if a document contains for his fields the term frequencies?

When adding a field to a document you can specify if and how detailed 
term vector you want to store for easy retrieval.

http://lucene.apache.org/java/2_3_1/api/org/apache/lucene/document/Field.html


I really think you should consider one index per more-like-this filter.


        karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33765-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 23 19:18:32 2008
Return-Path: <java-user-return-33765-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14786 invoked from network); 23 Apr 2008 19:18:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Apr 2008 19:18:32 -0000
Received: (qmail 53967 invoked by uid 500); 23 Apr 2008 19:18:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53937 invoked by uid 500); 23 Apr 2008 19:18:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53926 invoked by uid 99); 23 Apr 2008 19:18:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Apr 2008 12:18:24 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of glen.newton@gmail.com designates 64.233.184.233 as permitted sender)
Received: from [64.233.184.233] (HELO wr-out-0506.google.com) (64.233.184.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Apr 2008 19:17:37 +0000
Received: by wr-out-0506.google.com with SMTP id c30so1793664wra.14
        for <java-user@lucene.apache.org>; Wed, 23 Apr 2008 12:17:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=lwQ1bf5A0oxhvas+mzHlB7iEinbYrPBGan5n1D71j24=;
        b=p57GBZDCcw7D+nrtOt34KlGejgZca5bOjEfFc7zaw75WT6koMbsY5OFBFYI6HM1cQZNmSjpVHEqciD9EQmuuBPJ0Oj5ebh6IHghq5m1Bsp99b2WY6XO40WsI4w1Zbs2qc7aJSwn5V7wEQ2LH2nrZJQu0eto0jTpTV3aaEobu3CM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=gvPg/qXOCydHjdlSBmK2lMTnG6+Lq4yPVUUHtuPeMP+emBlkZfhPlU+aCWmgw55LisqKXhbS0bXuny0WYuM3PWBlDAuCiZ4dCyWhZesmXyQWe1Pc4SEaHsOHWNF/87zRWAAlA6ZPUayfXCIhxtm1LHVDlNllEgLYQKOdlpBY4Ts=
Received: by 10.141.122.20 with SMTP id z20mr659352rvm.293.1208978243055;
        Wed, 23 Apr 2008 12:17:23 -0700 (PDT)
Received: by 10.140.148.19 with HTTP; Wed, 23 Apr 2008 12:17:22 -0700 (PDT)
Message-ID: <5e76f3840804231217l225d7ecbof7940a8088fee130@mail.gmail.com>
Date: Wed, 23 Apr 2008 15:17:22 -0400
From: "Glen Newton" <glen.newton@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Binding lucene instance/threads to a particular processor(or core)
In-Reply-To: <867513fe0804222133t74a4e410l3e0482859e3c9ab7@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <5e76f3840804220539h5b19af2avb3972d3234f8847b@mail.gmail.com>
	 <002301c8a49c$0e215ca0$970fda80@campus.net.ucsf.edu>
	 <5e76f3840804221049y240b44ceo23ac961e92777d74@mail.gmail.com>
	 <867513fe0804222133t74a4e410l3e0482859e3c9ab7@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Anshum,

2008/4/23 Anshum <anshumg@gmail.com>:
> Hi Glen,
>
>  As far as stats for index/search are concerned, here they are:
>  * Yes, it is a web based application
>  * I am currently facing issues when the number of concurrent searches goes
>  high. The search is not able to handle over 2.5 searches per second.
What is the OS, hardware etc you are using?

I am assuming you are only opening one instance of IndexSearcher for
all of your threads/queries (I would do it in the servlet init()
method) to use, as indicated in
http://lucene.apache.org/java/2_3_1/api/org/apache/lucene/search/IndexSearcher.html

>  * JVM command line parameters: -server mode; Max heap size 2GB (As it is a
>  32 bit machine/OS and that is the limit in the case)
What JVM/version?

Have you tried running a profiler to see what is happening or even
jconsole (add  -Dcom.sun.management.jmxremote to your command line
parameters and (in Linux at least) run jconsole after the JVM has
started.

A general suggestion:
 -XX:+AggressiveOpts -XX:+ScavengeBeforeFullGC   -Xms2000m
-XX:+UseConcMarkSweepGC

Although the garbage collection depends on your configuration.

>  * Performance expectations :
>   * Mean search time :1-2 seconds (though that is a lot considering that I
>  have tried other engines, though with smaller indexes and they seem to have
>  sub 0.01s searching time)

Yes, I am also surprised by this poor performance.

>  * No, I do not store any fields.
>  * Yes, I am using multiple machines ( more than a couple ).serving the same
>  index; a little more than just a vanilla load balancing mechanism; sending
>  similar requests to the same server to better OS level caching
>  * We do not index and search on the same machine, so in that case, I would
>  not think that changing the priority of these threads would matter. In other
>  words, there is nothing but search that happens on the search server. If
>  that is what you meant when you wrote about increasing the thead priority.

Your servlet environment has many threads that have to do a lot of
things before they get around to the part of your code that does the
searching. Once they get to the search part, you want them to have
higher priority than the threads that are handling requests much
further back in the servlet pipeline. So set the thread priority
higher when it gets to your code. Of course you would need to test to
see the impact on performance in your particular case.

>
>  I had already started trying the TPE and  guess it would provide a lot of
>  improvement but 'm looking for other ways as well ! :)

-glen


>  --
>  Anshum
>
>
>
>  On Tue, Apr 22, 2008 at 11:19 PM, Glen Newton <glen.newton@gmail.com> wrote:
>
>  > So even if you only have one index, this is the way to go to manage
>  > this kind of problem.
>  >
>  > Looking at the implementation and having used ThreadPoolExecutor (TPE)
>  > a lot, I would make the following suggestions for this class so as to
>  > better support this particular use case:
>  > Better access to the configuration of the TPE is needed: the ability
>  > to choose the number of threads (pools size and max pool size), the
>  > type and nature of the queue, etc. Also, the default behaviour of TPE
>  > is to throw an exception when a job is submitted and the queue is
>  > full: throwing an exception is expensive, especially when dozens or
>  > hundreds of searches are being rejected and many exceptions are
>  > occurring in a high load situation. Instead, being able to set the
>  > RejectedExecutionHandler on the TPE would allow for a graceful
>  > handling of rejected queries (feedback to user application, etc).
>  > Also, TPE allows for a custom ThreadFactory, which I use to produce
>  > threads with the highest priority to do the searching.
>  >
>  > Right now the implementation sets the #threads and queue size as a
>  > function of the number of Searchables, which is reasonable for this
>  > use case. But it would generalize better if these were a function of
>  > the number of cores on the machine, or some combination.
>  >
>  > That said, I would suggest having adding the ability to set the
>  > ThreadPoolExecutor completely, with a getter/setter. This would allow
>  > this class to be useful beyond the use case of multiple indexes,
>  > becoming more generalizable to a number of use cases including
>  > allowing it to support the use case of one (or more indexes) and a
>  > high work load of queries that need to be managed. It could use the
>  > same defaults if the TPE is not set externally (is null).
>  >
>  > -Glen
>  >
>  > 2008/4/22 Renaud Waldura <renaud.waldura@library.ucsf.edu>:
>  > > > one solution is to set-up a ThreadPoolExecutor[2] with a fixed
>  > >  > number of threads and a limited queue size (use a bound
>  > BlockingQueue[3])
>  > >
>  > >  Yes, this is precisely how the ConcurrentMultiSearcher works.
>  > >  https://issues.apache.org/jira/browse/LUCENE-423
>  > >
>  > >
>  > >
>  > >
>  > >  -----Original Message-----
>  > >  From: Glen Newton [mailto:glen.newton@gmail.com]
>  > >  Sent: Tuesday, April 22, 2008 5:40 AM
>  > >  To: java-user@lucene.apache.org
>  > >  Subject: Re: Binding lucene instance/threads to a particular
>  > processor(or
>  > >  core)
>  > >
>  > >
>  > >
>  > > Anshun,
>  > >
>  > >  I think I am dealing with an index of similar scale: 6.4 million
>  > records, 83
>  > >  GB index (see [1] for more info)
>  > >
>  > >  I mistakenly thought from your original posting that you were
>  > interested in
>  > >  binding threads to processors for indexing, but it is sounding like you
>  > want
>  > >  to do this for searching. I am not sure if this would work well for
>  > >  searching, as there is a great deal more ephemeral state. But I am not
>  > sure.
>  > >
>  > >  With respect to handling concurrency for search, could you describe
>  > your
>  > >  environment better?
>  > >  - Is it an web-base application?
>  > >  - What sort of problems do you have now?
>  > >  - What are your java command line parameters (heap, etc.)
>  > >  - What are the performance expectations, i.e. average search < N1
>  > seconds;
>  > >  median search time < N2 seconds
>  > >  - Are you storing any fields and if so, do you need to store so many?
>  > >  - Do you have the choice of serving searches from multiple machines?
>  > >  i.e. load balance across >1 machine; We've found this to be one of the
>  > best
>  > >  solutions for scaling;
>  > >  - One thing that I do for both indexing and searching is that the
>  > threads
>  > >  that are doing these tasks I always shift their priority to MAX, so
>  > that
>  > >  they are run in preference to threads doing other things, like
>  > preparing
>  > >  Documents, etc.
>  > >
>  > >  If it is a web-type environment, one solution is to set-up a
>  > >  ThreadPoolExecutor[2] with a fixed number of threads and a limited
>  > queue
>  > >  size (use a bound BlockingQueue[3]) . You would have to experiment with
>  > the
>  > >  numbers to get the sweet-spot for your situation.
>  > >  I would suggest starting with 2 times the number processors (cores) and
>  > a
>  > >  queue of say 20. Requests are queued, but if the request cannot be
>  > queued,
>  > >  at least the application then knows that it is too busy and you can
>  > give the
>  > >  user a message "The system is too busy at this moment, please try again
>  > in a
>  > >  few seconds..." kind of thing. The advantage is also that when things
>  > are
>  > >  very busy, you have the accepted requests handled in a reasonable
>  > amount of
>  > >  time, and some users being told things are too busy, as opposed to all
>  > the
>  > >  requests going in and the system thrashing (and perhaps running-out of
>  > >  memory at the same time) and everyone's queries being very slow.
>  > >
>  > >  But I would suggest setting-up a test harness to emulate your
>  > production
>  > >  conditions to try these things out...
>  > >
>  > >  -Glen
>  > >
>  > >  [1]
>  > http://zzzoot.blogspot.com/2008/04/lucene-indexing-performance-benchmarks
>  > >  .html
>  > >  [2]
>  > http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/ThreadPoolEx
>  > >  ecutor.html
>  > >  [3]
>  > http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/BlockingQueu
>  > >  e.html
>  > >
>  > >
>  > >  2008/4/22 Anshum <anshumg@gmail.com>:
>  > >  > The paper seems pretty good but I am still wondering if there was a
>  > >  > way to  achieve this through the command line parameters. I'm just
>  > >  > trying this to  optimize the code, if this works, would let all know
>  > >  > else would keep  everyone informed :)  Any other suggestions for
>  > >  > handling a concurrency of over 7 search requests  per second for an
>  > >  > index size of over 15Gigs containing over 13 million  records?
>  > >  >  Also, could someone help me with obtaining a 'index size' -
>  > >  > 'concurrency' -  'processor power' - 'memory' relationship formula
>  > (or
>  > >  something similar)?
>  > >  >
>  > >  >  --
>  > >  >  Anshum
>  > >  >
>  > >  >
>  > >  >
>  > >  >
>  > >  >  On Tue, Apr 22, 2008 at 3:55 AM, Antony Bowesman <adb@teamware.com>
>  > >  wrote:
>  > >  >
>  > >  >  > That paper from 1997 is pretty old, but mirrors our experiences in
>  > >  > those  > days. Then, we used Solaris processor sets to really improve
>  > >  > performance by  > binding one of our processes to a particular CPU
>  > >  > while leaving the other  > CPUs to manage the thread intensive work.
>  > >  >  >
>  > >  >  > You can bind processes/LWPs to a CPU on Solaris with psrset.
>  > >  >  >
>  > >  >  > The Solaris thread model in the late '90s was also a significant
>  > >  > factor in  > performance of multi-threaded programs.  The default
>  > >  > thread library in  > Solaris 8 implemented a MxN unbound thread model
>  > >  > (threads/LWPS).  In those  > days we found that it did not perform
>  > >  > well, so used the bound thread model  > (i.e. 1:1) where a Solaris
>  > >  > thread was bound permanently to an LWP.  That  > improved performance
>  > >  > a lot.  In Solaris 8, Sun had what they called the  > 'alternate'
>  > >  > thread library (T2) around 2000, which became the default  > library
>  > >  > in Solaris 9, and implemented a 1:1 model of Solaris threads to  >
>  > LWPs.
>  > >  That new library had dramatic performance improvements over the old.
>  > >  >  >
>  > >  >  > Some background info for Java and threading  >  >
>  > >  > http://java.sun.com/j2se/1.5.0/docs/guide/vm/thread-priorities.html
>  > >  >  >
>  > >  >  > Antony
>  > >  >  >
>  > >  >  >
>  > >  >  >
>  > >  >  > Glen Newton wrote:
>  > >  >  >
>  > >  >  > > I realised that not everyone on this list might be able to
>  > access
>  > >  > the  > > IEEE paper I pointed-out, so I will include the abstract and
>  > >  > some  > > paragraphs from the paper which I have included below.
>  > >  >  > >
>  > >  >  > > Also of interest (and should be available to all): Fedorova et
>  > al.
>  > >  >  > > 2005. Performance of Multithreaded Chip Multiprocessors And  > >
>  > >  > Implications For Operating System Design. Usenix 2005.
>  > >  >  > > http://www.eecs.harvard.edu/margo/papers/usenix05/paper.pdf
>  > >  >  > > "Abstract: We investigated how operating system design should be
>  > >  > > > adapted for multithreaded chip multiprocessors (CMT) - a new  > >
>  > >  > generation of processors that exploit thread-level parallelism to
>  > mask
>  > >  > > > the memory latency in modern workloads. We  > > determined that
>  > >  > the L2 cache is a critical shared resource on CMT and  > > that an
>  > >  > insufficient amount of L2 cache can undermine the ability to  > >
>  > hide
>  > >  > memory latency on these processors. To use the L2 cache as  > >
>  > >  > efficiently as possible, we propose an L2-conscious scheduling  > >
>  > >  > algorithm and quantify its performance potential. Using this
>  > algorithm
>  > >  > > > it is possible to reduce miss ratios in the L2 cache by 25-37%
>  > and
>  > >  > > > improve processor throughput by 27-45%."
>  > >  >  > >
>  > >  >  > >
>  > >  >  > > From Lundberg, L. 1997:
>  > >  >  > > Abstract: "The default scheduling algorithm in Solaris and other
>  > >  > > > operating systems may result in frequent relocation of threads at
>  > >  > > > run-time. Excessive thread relocation cause  > > poor memory
>  > >  > performance. This can be avoided by binding threads to  > >
>  > >  > processors. However, binding threads to processors may result in an
>  >  >
>  > >  > > unbalanced load. By considering a previously obtained theoretical
>  >  >
>  > >  > > result and by evaluating a set of multithreaded Solaris  > >
>  > >  > programs using a multiprocessor with 8 processors, we are able to  >
>  > >
>  > >  > bound the maximum performance loss due to binding threads, The  > >
>  > >  > theoretical result is also recapitulated. By evaluating another set
>  > of
>  > >  > > > multithreaded programs, we show that the gain of binding threads
>  > >  > to  > > processors may be substantial, particularly for programs with
>  > >  > fine  > > grained parallelism."
>  > >  >  > >
>  > >  >  > > First paragraph: "The thread concept in Solaris [3][5] and other
>  > >  > > > operating systems makes it possible to write multithreaded
>  > >  > programs,  > > which can be executed in parallel on a multiprocessor.
>  > >  > Previous  > > experience from real world programs [4] show that,
>  > using
>  > >  > the default  > > scheduling algorithm in Solaris, threads are
>  > >  > frequently relocated from  > > one processor  > > to another at
>  > >  > run-time. After each such relocation, the code and data  > >
>  > >  > associated with the relocated thread is moved from the cache memory
>  > of
>  > >  > > > the 0113 processor to the cache of the new processor. This
>  > reduces
>  > >  > the  > > performance. Run-time relocation of threads to processors
>  > can
>  > >  > also  > > result in unpredictable response times. This is a problem
>  > in
>  > >  > systems  > > which operate in a real-time environment. In order to
>  > >  > avoid poor  > > memory performance and unpredictable real-time
>  > >  > behaviour due to  > > frequent thread relocation, threads can be
>  > bound
>  > >  > to processors using  > > the processor-bind directive [3] [5]. The
>  > >  > major problem with binding  > > threads is that one can end up with
>  > an
>  > >  > unbalanced load, i.e. some  > > processors may be extremely busy
>  > >  > during some time periods while other  > > processors are idle."
>  > >  >  > >
>  > >  >  > > -Glen
>  > >  >  > >
>  > >  >  > > On 21/04/2008, Glen Newton <glen.newton@gmail.com> wrote:
>  > >  >  > >
>  > >  >  > > > And this discussion on bound threads may also shed light on
>  > things:
>  > >  >  > > >
>  > >  >  > > >
>  > >  >
>  > http://coding.derkeiler.com/Archive/Java/comp.lang.java.programmer/200
>  > >  > 7-11/msg02801.html
>  > >  >  > > >
>  > >  >  > > >
>  > >  >  > > >  -Glen
>  > >  >  > > >
>  > >  >  > > >
>  > >  >  > > >  On 21/04/2008, Glen Newton <glen.newton@gmail.com> wrote:
>  > >  >  > > >  > BInding threads to processors - in many situations -
>  > >  > improves  > > >  >  throughput by reducing memory overhead. When a
>  > >  > thread is running  > > > on a  > > >  >  core, its state is local; if
>  > >  > it is timeshared-out and either 1)  > > >  >  swapped back in on the
>  > >  > same core, it is likely that there will be  > > >  the  > > >  >
>  > >  > core's L1 cache; or 2) onto another core, there will not be a  > > >
>  > >  > cache  > > >  >  hit and the state will have to be fetched from L2 or
>  > >  > main memory,  > > >  >  incurring a performance hit, esp in the
>  > >  > latter. See Lundberg, L.
>  > >  >  > > > 1997.
>  > >  >  > > >  >  Evaluating the Performance Implications of Binding Threads
>  > >  > to  > > >  >  Processors. 393.
>  > >  >  > > > http://ieeexplore.ieee.org/iel3/5020/13768/00634520.pdf
>  > >  >  > > >  >  for more info.
>  > >  >  > > >  >
>  > >  >  > > >  >  If you are using JVM on Solaris on SPARC, you should take
>  > a
>  > >  > look  > > > at  > > >  >  the following links for tuning (the Sun JVM
>  > >  > on Solaris SPARC has  > > > many  > > >  >  more performance tuning
>  > >  > parameters available), including  > > > threading:
>  > >  >  > > >  >  - http://java.sun.com/docs/hotspot/threads/threads.html
>  > >  >  > > >  >  -
>  > >  >  > > >
>  > >  > http://java.sun.com/j2se/1.5.0/docs/guide/vm/thread-priorities.html
>  > >  >  > > >  >  -
>  > >  >  > > >
>  > >  >
>  > http://www-1.ibm.com/support/docview.wss?rs=180&context=SSEQTP&uid=swg
>  > >  > 21107291  > > >  >  -
>  > >  > http://java.sun.com/javase/technologies/performance.jsp
>  > >  >  > > >  >
>  > >  >  > > >  >
>  > >  >  > > >  >  -Glen
>  > >  >  > > >  >
>  > >  >  > > >  >
>  > >  >  > > >  >
>  > >  >  > > >  >
>  > >  >  > > >  >
>  > >  >  > > >  >
>  > >  >  > > >  >
>  > >  >  > > >  >  On 21/04/2008, Ulf Dittmer <udittmer@yahoo.com> wrote:
>  > >  >  > > >  >  > This sounds odd. Why would restricting it to a single  >
>  > >  > > >  >  >  core improve performance? The point of using multiple  > >
>  > >  > >  >  >  cores (and multiple threads) is to improve performance  > >
>  > >
>  > >  > >  >  isn't it? I'd leave thread scheduling decisions to the  > > >
>  >  >
>  > >  > >  JVM. Plus, I don't think there is anything in Java to  > > >  >  >
>  > >  > facilitate this (short of using JNI).
>  > >  >  > > >  >  >
>  > >  >  > > >  >  >  Are you talking about indexing or searching? You may  >
>  > >  > > >  >  >  be able to use multiple parallel threads to improve  > > >
>  > >  > >  >  indexing performance. I don't think Lucene uses  > > >  >  >
>  > >  > multi-threading for searching; not unless you have  > > >  >  >
>  > >  > multiple indices, anyway.
>  > >  >  > > >  >  >
>  > >  >  > > >  >  >  Ulf
>  > >  >  > > >  >  >
>  > >  >  > > >  >  >
>  > >  >  > > >  >  >
>  > >  >  > > >  >  >  --- Anshum <anshumg@gmail.com> wrote:
>  > >  >  > > >  >  >
>  > >  >  > > >  >  >  > Hi,
>  > >  >  > > >  >  >  >
>  > >  >  > > >  >  >  > I have been trying to bind my lucene instance (JVM -
>  > >  > > > >  >  >  > Sun Hotspot*) to a  > > >  >  >  > particular core so
>  > >  > as to improve the performance. Is  > > >  >  >  > there a way to do
>  > so
>  > >  > or  > > >  >  >  > is there support in lucene to explicitly control
>  > >  > the  > > >  >  >  > thread - processor  > > >  >  >  > linkup?
>  > >  >  > > >  >  >  >
>  > >  >  > > >  >  >  > --
>  > >  >  > > >  >  >  > --
>  > >  >  > > >  >  >  > The facts expressed here belong to everybody, the  >
>  > >
>  > >  > >  >  >  > opinions to me.
>  > >  >  > > >  >  >  > The distinction is yours to draw............
>  > >  >  > > >  >  >  >
>  > >  >  > > >  >  >
>  > >  >  > > >  >  >
>  > >  >  > > >  >  >
>  > >  >  > > >  >  >
>  > >  >  > > >  >  >
>  > >  >  > > >
>  > >  >
>  > ______________________________________________________________________
>  > >  > ______________  > > >  >  >  Be a better friend, newshound, and  > >
>  > >
>  > >  > >  >  know-it-all with Yahoo! Mobile.  Try it now.
>  > >  >  > > > http://mobile.yahoo.com/;_ylt=Ahu06i62sR8HDtDypao8Wcj9tAcJ
>  > >  >  > > >  >  >
>  > >  >  > > >  >  >
>  > >  >  > > >
>  > >  > ---------------------------------------------------------------------
>  > >  >  > > >  >  >  To unsubscribe, e-mail:
>  > >  > java-user-unsubscribe@lucene.apache.org
>  > >  >  > > >  >  >  For additional commands, e-mail:
>  > >  >  > > > java-user-help@lucene.apache.org  > > >  >  >  > > >  >  >  >
>  > >
>  > >  > >  >  > > >  >  > > >  >  > > >  > --  > > >  >  > > >  >  -  > > >
>  >  >
>  > >  > > > >  > > >  > > >  > > > --  > > >  > > >  -  > > >  > > >  > >  >
>  > >
>  > >  > >  >
>  > >  > ---------------------------------------------------------------------
>  > >  >  > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  > >  >  > For additional commands, e-mail: java-user-help@lucene.apache.org
>  > >  > >  >
>  > >  >
>  > >  >
>  > >  >  --
>  > >  >
>  > >  >
>  > >  > --
>  > >  >  The facts expressed here belong to everybody, the opinions to me.
>  > >  >  The distinction is yours to draw............
>  > >  >
>  > >
>  > >
>  > >
>  > >  --
>  > >
>  > >  -
>  > >
>  > >
>  > >
>  > >  ---------------------------------------------------------------------
>  > >  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  > >  For additional commands, e-mail: java-user-help@lucene.apache.org
>  > >
>  > >
>  >
>  >
>  >
>  > --
>  >
>  > -
>  >
>  > ---------------------------------------------------------------------
>  > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  > For additional commands, e-mail: java-user-help@lucene.apache.org
>  >
>  >
>
>
>  --
>  --
>  The facts expressed here belong to everybody, the opinions to me.
>  The distinction is yours to draw............
>



-- 

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33766-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 23 19:53:45 2008
Return-Path: <java-user-return-33766-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33286 invoked from network); 23 Apr 2008 19:53:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Apr 2008 19:53:44 -0000
Received: (qmail 18528 invoked by uid 500); 23 Apr 2008 19:53:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18494 invoked by uid 500); 23 Apr 2008 19:53:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18483 invoked by uid 99); 23 Apr 2008 19:53:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Apr 2008 12:53:38 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [66.249.82.238] (HELO wx-out-0506.google.com) (66.249.82.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Apr 2008 19:52:52 +0000
Received: by wx-out-0506.google.com with SMTP id i28so2526680wxd.20
        for <java-user@lucene.apache.org>; Wed, 23 Apr 2008 12:53:00 -0700 (PDT)
Received: by 10.90.103.13 with SMTP id a13mr2485740agc.111.1208980380420;
        Wed, 23 Apr 2008 12:53:00 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id z26sm1135237ele.15.2008.04.23.12.52.59
        (version=TLSv1/SSLv3 cipher=OTHER);
        Wed, 23 Apr 2008 12:53:00 -0700 (PDT)
In-Reply-To: <56440.192.168.1.35.1208883852.webmail@192.168.1.35>
References: <56440.192.168.1.35.1208883852.webmail@192.168.1.35>
Mime-Version: 1.0 (Apple Message framework v753)
X-Priority: 3 (Normal)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <CFF88180-C644-4923-8B45-BF6C4FE399DB@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Occasional Hang in IndexWriter.close()
Date: Wed, 23 Apr 2008 15:53:34 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Stu,

I just committed the fix for this, on 2.4 & 2.3.2.  If you're able to  
test that this fixes your hang that'd be great.  If not that's fine  
(I got a unit test to reproduce the issue).

It's quite easy:

   svn checkout https://svn.apache.org/repos/asf/lucene/java/branches/ 
lucene_2_3 lucene.23x
   cd lucene.23x
   ant jar-core

(you need svn & ant)

then copy build/lucene-core-2.3.jar to your application.

Mike

Stu Hood wrote:
> Hey Mike,
>
> Thank you very much for looking into this issue!
>
> I originally switched to the SerialMergeScheduler to try and work  
> around this bug: http://lucene.markmail.org/message/ 
> awkkunr7j24nh4qj . I switched back to the ConcurrentMergeScheduler  
> yesterday (since I would rather fail quickly due to the linked  
> issue, rather than hang due to the bug we discovered).
>
> Nonetheless, Lucene is great, and I really appreciate your hard  
> work! Would you mind sending out a link to the issue you created?
>
> Thanks,
> Stu
>
>
> -----Original Message-----
> From: Michael McCandless <lucene@mikemccandless.com>
> Sent: Tuesday, April 22, 2008 7:32am
> To: java-user@lucene.apache.org, stuhood@mailtrust.com
> Subject: Re: FW: Re: Occasional Hang in IndexWriter.close()
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33767-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 23 20:54:46 2008
Return-Path: <java-user-return-33767-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75232 invoked from network); 23 Apr 2008 20:54:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Apr 2008 20:54:46 -0000
Received: (qmail 29852 invoked by uid 500); 23 Apr 2008 20:54:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29483 invoked by uid 500); 23 Apr 2008 20:54:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29472 invoked by uid 99); 23 Apr 2008 20:54:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Apr 2008 13:54:38 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ionathan@gmail.com designates 209.85.146.180 as permitted sender)
Received: from [209.85.146.180] (HELO wa-out-1112.google.com) (209.85.146.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Apr 2008 20:53:55 +0000
Received: by wa-out-1112.google.com with SMTP id j40so4932645wah.11
        for <java-user@lucene.apache.org>; Wed, 23 Apr 2008 13:54:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=lThqsbQkxr3ZqC65ZmTqNTrJ0Ul/0rNTXRgwlKu9jvU=;
        b=UpiZ1SpZWg+5aVL2aTVCyfAErem9nNiIpBwDbZB3h10sApx2m3bYgTJnZUy6gGs6duL3CrHXtyjasoKPSevO4smLLnqdNRgibU5RMcu3IR/A2HBk7bJdq34qSnIlNkEtsCd8cCK2BXclwbXOqeTcCN1+mn3NDEEEBNYWpgb8/HU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Ug8EX2EA51G25pijXfbvJkc3o9/vMAVNnVWfa1kG7dnKce330HXquhjwwAW1bgAnyZrrI89YtEfHNIe2UZOmENAXCUyC2S2FPrO/GyY/CpFkNcWi5vc+s4tVEfJyTUmxlLsMCute2RcQDGNofpbMv52xBAMJ1s2d21f5Ff2vEoo=
Received: by 10.114.195.19 with SMTP id s19mr995064waf.57.1208984048976;
        Wed, 23 Apr 2008 13:54:08 -0700 (PDT)
Received: by 10.115.91.4 with HTTP; Wed, 23 Apr 2008 13:54:08 -0700 (PDT)
Message-ID: <6dd2bfeb0804231354p50ebf7f2qde1315eebc4f2522@mail.gmail.com>
Date: Wed, 23 Apr 2008 17:54:08 -0300
From: "Jonathan Ariel" <ionathan@gmail.com>
To: java-user@lucene.apache.org
Subject: MoreLikeThis patch to support boost factor
In-Reply-To: <6dd2bfeb0804231351p3af8db57j6ac216deadaf42b9@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/mixed; 
	boundary="----=_Part_8583_16732249.1208984048966"
References: <6dd2bfeb0804231351p3af8db57j6ac216deadaf42b9@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_8583_16732249.1208984048966
Content-Type: multipart/alternative; 
	boundary="----=_Part_8584_15132067.1208984048967"

------=_Part_8584_15132067.1208984048967
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

This is a patch I made to be able to boost the terms with a specific factor
beside the relevancy returned by MoreLikeThis. This is helpful when having
more then 1 MoreLikeThis in the query, so words in the field A (i.e. Title)
can be boosted more than words in the field B (i.e. Description).

Any feedback?

Jonathan

------=_Part_8584_15132067.1208984048967
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

<div class="gmail_quote">This is a patch I made to be able to boost the terms with a specific factor beside the relevancy returned by MoreLikeThis. This is helpful when having more then 1 MoreLikeThis in the query, so words in the field A (i.e. Title) can be boosted more than words in the field B (i.e. Description).<br>

<br>Any feedback?<br><font color="#888888"><br>Jonathan<br>
</font></div><br>

------=_Part_8584_15132067.1208984048967--

------=_Part_8583_16732249.1208984048966
Content-Type: text/plain; name=morelikethis_boostfactor.txt
Content-Transfer-Encoding: base64
X-Attachment-Id: f_ffedpvwq0
Content-Disposition: attachment; filename=morelikethis_boostfactor.txt

SW5kZXg6IC9ob21lL2RldmVsb3Blci93b3Jrc3BhY2UvbHVjZW5lL2NvbnRyaWIvcXVlcmllcy9z
cmMvamF2YS9vcmcvYXBhY2hlL2x1Y2VuZS9zZWFyY2gvc2ltaWxhci9Nb3JlTGlrZVRoaXMuamF2
YQo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09Ci0tLSAvaG9tZS9kZXZlbG9wZXIvd29ya3NwYWNlL2x1Y2VuZS9jb250cmli
L3F1ZXJpZXMvc3JjL2phdmEvb3JnL2FwYWNoZS9sdWNlbmUvc2VhcmNoL3NpbWlsYXIvTW9yZUxp
a2VUaGlzLmphdmEJKHJldmlzaW9uIDY1MTA0OCkKKysrIC9ob21lL2RldmVsb3Blci93b3Jrc3Bh
Y2UvbHVjZW5lL2NvbnRyaWIvcXVlcmllcy9zcmMvamF2YS9vcmcvYXBhY2hlL2x1Y2VuZS9zZWFy
Y2gvc2ltaWxhci9Nb3JlTGlrZVRoaXMuamF2YQkod29ya2luZyBjb3B5KQpAQCAtMjg0LDYgKzI4
NCwxMSBAQAogICAgIHByaXZhdGUgZmluYWwgSW5kZXhSZWFkZXIgaXI7DQogDQogICAgIC8qKg0K
KyAgICAgKiBCb29zdCBmYWN0b3IgdG8gdXNlIHdoZW4gYm9vc3RpbmcgdGhlIHRlcm1zDQorICAg
ICAqLw0KKyAgICBwcml2YXRlIGludCBib29zdEZhY3RvciA9IDE7DQorICAgIA0KKyAgICAvKioN
CiAgICAgICogQ29uc3RydWN0b3IgcmVxdWlyaW5nIGFuIEluZGV4UmVhZGVyLg0KICAgICAgKi8N
CiAgICAgcHVibGljIE1vcmVMaWtlVGhpcyhJbmRleFJlYWRlciBpcikgew0KQEAgLTU3NCw3ICs1
NzksNyBAQAogICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgZmxvYXQgbXlTY29y
ZSA9ICgoRmxvYXQpIGFyWzJdKS5mbG9hdFZhbHVlKCk7DQogDQotICAgICAgICAgICAgICAgIHRx
LnNldEJvb3N0KG15U2NvcmUgLyBiZXN0U2NvcmUpOw0KKyAgICAgICAgICAgICAgICB0cS5zZXRC
b29zdChib29zdEZhY3RvciAqIG15U2NvcmUgLyBiZXN0U2NvcmUpOw0KICAgICAgICAgICAgIH0N
CiANCiAgICAgICAgICAgICB0cnkgew0KQEAgLTkyMSw2ICs5MjYsMjIgQEAKICAgICAgICAgICAg
IHggPSAxOw0KICAgICAgICAgfQ0KICAgICB9DQorDQorICAgIC8qKg0KKyAgICAgKiBSZXR1cm5z
IHRoZSBib29zdCBmYWN0b3IgdXNlZCB3aGVuIGJvb3N0aW5nIHRlcm1zDQorICAgICAqIEByZXR1
cm4gdGhlIGJvb3N0IGZhY3RvciB1c2VkIHdoZW4gYm9vc3RpbmcgdGVybXMNCisgICAgICovDQor
CXB1YmxpYyBpbnQgZ2V0Qm9vc3RGYWN0b3IoKSB7DQorCQlyZXR1cm4gYm9vc3RGYWN0b3I7DQor
CX0NCisNCisJLyoqDQorCSAqIFNldHMgdGhlIGJvb3N0IGZhY3RvciB0byB1c2Ugd2hlbiBib29z
dGluZyB0ZXJtcw0KKwkgKiBAcGFyYW0gYm9vc3RGYWN0b3INCisJICovDQorCXB1YmxpYyB2b2lk
IHNldEJvb3N0RmFjdG9yKGludCBib29zdEZhY3Rvcikgew0KKwkJdGhpcy5ib29zdEZhY3RvciA9
IGJvb3N0RmFjdG9yOw0KKwl9DQogICAgIA0KICAgICANCiB9DQo=

------=_Part_8583_16732249.1208984048966
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------=_Part_8583_16732249.1208984048966--

From java-user-return-33768-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 24 01:13:56 2008
Return-Path: <java-user-return-33768-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15716 invoked from network); 24 Apr 2008 01:13:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Apr 2008 01:13:56 -0000
Received: (qmail 59335 invoked by uid 500); 24 Apr 2008 01:13:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59309 invoked by uid 500); 24 Apr 2008 01:13:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59298 invoked by uid 99); 24 Apr 2008 01:13:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Apr 2008 18:13:48 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rafael.turk@gmail.com designates 66.249.82.233 as permitted sender)
Received: from [66.249.82.233] (HELO wx-out-0506.google.com) (66.249.82.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Apr 2008 01:13:02 +0000
Received: by wx-out-0506.google.com with SMTP id i28so2652475wxd.20
        for <java-user@lucene.apache.org>; Wed, 23 Apr 2008 18:13:15 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=e0g3/fG3LmG7S/YK8RBoPa6OFH79/HD64lJdcwV9dYc=;
        b=Df9P6B4DYe3buDxNwy+NwauyphSx2KGf5M76soKz2EgkQydgK6ONc3l5+BytyqQJpprhJjdIzgXM0xb2C7W3USSAK2yPDyvUAYe24tQOzgsAT+LgLAzBfwp1/d8SL/5JLcy9eZ1kEGZ8FgLZjJmX9CscogyuWh7a1OROw6LZkk4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=n1KtNC6RVBQ44IxCqefqEw92ZEkp2Xc8MBCbsDc38ExlFcacLZpTHnrM71DsvhAep9VqQd9J3HdRpMrvIUubjhrh+XBb0B3M9k9Ep0e6PHZfiZmmmH36CHr4wuAkQRwS/wvJ4A9TMqYHr2rEMoxyCfUh6UXZRD6/AWnwXKZmMi8=
Received: by 10.140.132.8 with SMTP id f8mr917986rvd.206.1208999593269;
        Wed, 23 Apr 2008 18:13:13 -0700 (PDT)
Received: by 10.141.175.6 with HTTP; Wed, 23 Apr 2008 18:13:13 -0700 (PDT)
Message-ID: <abded4280804231813l787616brae452b419f8f9911@mail.gmail.com>
Date: Wed, 23 Apr 2008 22:13:13 -0300
From: "Rafael Turk" <rafael.turk@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene and Google Web 1T 5 Gram
In-Reply-To: <16d405e0804230438l42d5086fgf4374b8497bf54cd@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_29026_7101362.1208999593264"
References: <abded4280804230425t2f379e6br7dda1fb2f2bb5009@mail.gmail.com>
	 <16d405e0804230438l42d5086fgf4374b8497bf54cd@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_29026_7101362.1208999593264
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Thanks Julien,

 I=B4ll definitely give it a try!!!

[]s

Rafael

On Wed, Apr 23, 2008 at 8:38 AM, Julien Nioche <
lists.digitalpebble@gmail.com> wrote:

> Hi Raphael,
>
> We initially tried to do the same but ended up developing our own API for
> querying the Web 1T. You can find more details on
> http://digitalpebble.com/resources.html
> There could be a way to reuse elements from Lucene e.g. the Term index
> only
> but I could not find an obvious way to achieve that.
>
> Best,
>
> Julien
>
> --
> DigitalPebble Ltd
> http://www.digitalpebble.com
>
>
> On 23/04/2008, Rafael Turk <rafael.turk@gmail.com> wrote:
> >
> > Hi Folks,
> >
> >    I=B4m trying to load Google Web 1T 5 Gram to Lucene. (This corpus
> > contains
> > English word n-grams and their observed frequency counts. The length of
> > the
> > n-grams ranges from unigrams(single words) to five-grams)
> >
> >    I=B4m loading each ngram (each row is a ngram) as an individual
> Document.
> > This way I=B4ll be able to search for each ngram separated, but I=B4m e=
nding
> > with huge indexes witch makes them very hard to load and read the index=
.
> >
> >   Is there a better way to load and read ngrams to a Lucene index? Mayb=
e
> > using lower level api?
> >
> >
> > More Info about Google Web 1T 5 Gram corpus at:
> > <http://www.ldc.upenn.edu/Catalog/docs/LDC2006T13/readme.txt>
> >
> > Thanks,
> >
> >
> > Rafael
> >
>

------=_Part_29026_7101362.1208999593264--

From java-user-return-33769-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 24 01:21:30 2008
Return-Path: <java-user-return-33769-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25862 invoked from network); 24 Apr 2008 01:21:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Apr 2008 01:21:30 -0000
Received: (qmail 65354 invoked by uid 500); 24 Apr 2008 01:21:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65316 invoked by uid 500); 24 Apr 2008 01:21:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65305 invoked by uid 99); 24 Apr 2008 01:21:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Apr 2008 18:21:24 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rafael.turk@gmail.com designates 64.233.184.228 as permitted sender)
Received: from [64.233.184.228] (HELO wr-out-0506.google.com) (64.233.184.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Apr 2008 01:20:37 +0000
Received: by wr-out-0506.google.com with SMTP id c30so1951238wra.14
        for <java-user@lucene.apache.org>; Wed, 23 Apr 2008 18:20:50 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=Kprftif46geyYgohjdDOusdOAVhc71iYbVqrxFhJEnc=;
        b=ltbVAzjNSmnAG11QUhfQIHwZU3S3V97Lk4q6n6qrxeDUJoEnhUTTP8A3oH6m9HL052I6r1dzlAv4B5xKeveYNuvXo1BU4WjcxfwdhZkJ/8lZg4urO2eixT3GjFjzel3s/O/vNTrZOkFrAr82oDwUpvenDmTiWT3wj6jqK79LZwk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=GgxnH2CnOZU7X7pG7+R0rBJkztOWCeYw2QfPMnPJMW1bje+LIm7JdpFrYg6qme/FEYDuaOnC47ejFMC/0gUjrq9L8HyudG6RC3LBU79/JnHUOAreRWX6lVdNSxHfTYeEkerh93pz1dFTygZlcQg6nvCNRCJSnfHwXEtvcHRf0d8=
Received: by 10.141.79.12 with SMTP id g12mr944453rvl.182.1209000049176;
        Wed, 23 Apr 2008 18:20:49 -0700 (PDT)
Received: by 10.141.175.6 with HTTP; Wed, 23 Apr 2008 18:20:49 -0700 (PDT)
Message-ID: <abded4280804231820v1784bcefn9f3a7b7e7de09039@mail.gmail.com>
Date: Wed, 23 Apr 2008 22:20:49 -0300
From: "Rafael Turk" <rafael.turk@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene and Google Web 1T 5 Gram
In-Reply-To: <480F36C3.2050601@garambrogne.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_29047_21494556.1209000049168"
References: <abded4280804230425t2f379e6br7dda1fb2f2bb5009@mail.gmail.com>
	 <480F36C3.2050601@garambrogne.net>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_29047_21494556.1209000049168
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi Mathieu,

*What do you wont to do?*

An spell checker and related keyword suggestion

If you wont an ngram =3D> popularity map, just use a berkley DB, and use th=
is
information in your Lucene application. Lucene is a reversed index, Berkele=
y
DB an index.

*Great ideia! Berkeley DB is definitely a try, simple and effective, but
I'll have to work the data previously. I was hopping to take advantage of
Lucene's built in features*
**
*[]s*
**
On Wed, Apr 23, 2008 at 10:16 AM, Mathieu Lecarme <mathieu@garambrogne.net>
wrote:

> Rafael Turk a =E9crit :
>
> Hi Folks,
> >
> >   I=B4m trying to load Google Web 1T 5 Gram to Lucene. (This corpus
> > contains
> > English word n-grams and their observed frequency counts. The length of
> > the
> > n-grams ranges from unigrams(single words) to five-grams)
> >
> >   I=B4m loading each ngram (each row is a ngram) as an individual
> > Document.
> > This way I=B4ll be able to search for each ngram separated, but I=B4m e=
nding
> > with huge indexes witch makes them very hard to load and read the index=
.
> >
> >  Is there a better way to load and read ngrams to a Lucene index? Maybe
> > using lower level api?
> >
> >
> > More Info about Google Web 1T 5 Gram corpus at:
> > <http://www.ldc.upenn.edu/Catalog/docs/LDC2006T13/readme.txt>
> >
> > Thanks,
> >
> > Rafael
> >
> >
> >
>
> What do you wont to do?
> If you wont an ngram =3D> popularity map, just use a berkley DB, and use
> this information in your Lucene application. Lucene is a reversed index,
> Berkeley DB an index.
>
> M.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_29047_21494556.1209000049168--

From java-user-return-33770-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 24 02:44:33 2008
Return-Path: <java-user-return-33770-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69343 invoked from network); 24 Apr 2008 02:44:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Apr 2008 02:44:33 -0000
Received: (qmail 24144 invoked by uid 500); 24 Apr 2008 02:44:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23170 invoked by uid 500); 24 Apr 2008 02:44:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23158 invoked by uid 99); 24 Apr 2008 02:44:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Apr 2008 19:44:26 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of hasan.diwan@gmail.com designates 209.85.146.180 as permitted sender)
Received: from [209.85.146.180] (HELO wa-out-1112.google.com) (209.85.146.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Apr 2008 02:43:43 +0000
Received: by wa-out-1112.google.com with SMTP id j40so5123285wah.11
        for <java-user@lucene.apache.org>; Wed, 23 Apr 2008 19:43:57 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=x4BNdebkpK6tUiwxsN8L6EU9pZApfaUUPZDmbONhVTQ=;
        b=rEx9mn4cpA97+0ZXVyZBkc78mOAqmGalo82XqK6xR0W3bb0+HHGpSOHqHXocHLwNgEFhkMzmmGWgqOipl2ZC8WHau/Vsid/cJRk6w8a7+eIBsIiWFlMzqQphBMOxY7qzFC9paqnoPl+/PpY+K47IQkWUorgN8MpZObDQR2Tcpts=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=C3vQNO03w9qplLi7+5y+cdDeK2gohRg7nfDoe0l9rorC/snzGM1MmmTHY3x1rixRrNOG7Q8jVLlUCpsjQ5nkU6Y1cbMADAQ486lRTQVNW6/+ljLA6IsyfHiEA+fSavpT9pVkX2Amp4iiP7wPKHO9k1b8p1yFG83CwtLGDgVDszE=
Received: by 10.115.77.1 with SMTP id e1mr1212559wal.208.1209005036336;
        Wed, 23 Apr 2008 19:43:56 -0700 (PDT)
Received: by 10.115.58.6 with HTTP; Wed, 23 Apr 2008 19:43:56 -0700 (PDT)
Message-ID: <2cda2fc90804231943i25309400o658448683beb4f86@mail.gmail.com>
Date: Wed, 23 Apr 2008 19:43:56 -0700
From: "Hasan Diwan" <hasan.diwan@gmail.com>
To: java-user@lucene.apache.org
Subject: Unable to add more than 1 document to Index
In-Reply-To: <2cda2fc90804231942m7e014c20i3a4641148d09f3ec@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <2cda2fc90804231942m7e014c20i3a4641148d09f3ec@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

                writer = new IndexWriter(indexLocation, new
StandardAnalyzer(), true);
                String string = request.getParameter("text");
                this.log("Text is "+string);
                Date date = new Date();
                String dateString = DateTools.dateToString(date,
DateTools.Resolution.MINUTE);
                this.log("Date is "+dateString);
                Field allField = new Field("all", string, Field.Store.YES,
 Field.Index.TOKENIZED);
                Field dateField = new Field("date", dateString, Field.Store.YES,
 Field.Index.UN_TOKENIZED);
                doc.add(allField);
                doc.add(dateField);
                writer.addDocument(doc);
                writer.optimize();
                writer.close();

 This code is supposed to get information from a JSP (and does) and put
 it into a lucene index (and does) in a new document (and does not).
 This is apparent when I query it using luke and the default lucene web
 application. Any suggestions or pointers to what to do about this
 would be eternally helpful? Thanks in advance!
-- 
Cheers,
Hasan Diwan <hasan.diwan@gmail.com>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33771-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 24 03:56:33 2008
Return-Path: <java-user-return-33771-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7547 invoked from network); 24 Apr 2008 03:56:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Apr 2008 03:56:33 -0000
Received: (qmail 73139 invoked by uid 500); 24 Apr 2008 03:56:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73115 invoked by uid 500); 24 Apr 2008 03:56:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73104 invoked by uid 99); 24 Apr 2008 03:56:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Apr 2008 20:56:25 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 209.85.146.182 as permitted sender)
Received: from [209.85.146.182] (HELO wa-out-1112.google.com) (209.85.146.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Apr 2008 03:55:37 +0000
Received: by wa-out-1112.google.com with SMTP id j40so5160524wah.11
        for <java-user@lucene.apache.org>; Wed, 23 Apr 2008 20:55:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=XXzPA1ZGBT03aJXAJKlqT9t1JUrHM28kgqUv9vx3+g0=;
        b=SYyDaXVRNxZll2O3D7u2JGcPbTTY9nrKsaDjI+XCpkjk4R0LVo9IczUhOo0MQLDp6FtZpIxK/Zp86X7sKJsYtKZFQxcB1cPKwQi5dxL16jCIgVZYyM5mKIa3QOcIoJtDR+8e28eBd/ryF0PQhoimZk9KeQeW1LcS6K59rpZSv2c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=dyV1CnmIfs02g21CtGQvcaPy3dka+nMXdvcyI2uRma8vGRbHFEQy4M3RKQlsCKM5CqdeG71O9nr44DNhQA72UszoFDITrwOqPkEQTbmigkHXiJiV4Jq2fC5oIJzD9++PtJcHfc8iSptQ7+bq93RYuQEqjl63TyL2yaJZLtAMtYY=
Received: by 10.115.14.1 with SMTP id r1mr1233198wai.97.1209009350934;
        Wed, 23 Apr 2008 20:55:50 -0700 (PDT)
Received: by 10.114.134.19 with HTTP; Wed, 23 Apr 2008 20:55:50 -0700 (PDT)
Message-ID: <867513fe0804232055y3c1efad9hf1a9a55cbaa7640c@mail.gmail.com>
Date: Thu, 24 Apr 2008 09:25:50 +0530
From: Anshum <anshumg@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Binding lucene instance/threads to a particular processor(or core)
In-Reply-To: <5e76f3840804231217l225d7ecbof7940a8088fee130@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6795_33050557.1209009350897"
References: <5e76f3840804220539h5b19af2avb3972d3234f8847b@mail.gmail.com>
	 <002301c8a49c$0e215ca0$970fda80@campus.net.ucsf.edu>
	 <5e76f3840804221049y240b44ceo23ac961e92777d74@mail.gmail.com>
	 <867513fe0804222133t74a4e410l3e0482859e3c9ab7@mail.gmail.com>
	 <5e76f3840804231217l225d7ecbof7940a8088fee130@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_6795_33050557.1209009350897
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Glen,

I am using Red Hat Enterprise Linux ES release 4, kernel : 2.6.9-55.ELsmp.
Its a 32 bit Dual processor, HT enabled machine with 12G of RAM.
The JVM would be : Java HotSpot(TM) Client VM (build 1.6.0_02-ea-b02, mixed
mode)

and Yes, I am using a single searcher instance for all searches.'
As far as increasing the thread priority is concerned, would certainly give
it a shot as well :)

I understand that there would be an improvement if I move from the Dual
Processor Single Core HT enabled machine to a Single Processor Quad Core or
a Dual Processor Dual Core machine but I still don't have any stats for
translating the upgrade to a quantitative performance improvement value.
Also, let me run the profiler and analyze the bottleneck. I have already
done it at a macro level, let me dig down a little deeper.

--
Anshum

On Thu, Apr 24, 2008 at 12:47 AM, Glen Newton <glen.newton@gmail.com> wrote:

> Hi Anshum,
>
> 2008/4/23 Anshum <anshumg@gmail.com>:
> > Hi Glen,
> >
> >  As far as stats for index/search are concerned, here they are:
> >  * Yes, it is a web based application
> >  * I am currently facing issues when the number of concurrent searches
> goes
> >  high. The search is not able to handle over 2.5 searches per second.
> What is the OS, hardware etc you are using?
>
> I am assuming you are only opening one instance of IndexSearcher for
> all of your threads/queries (I would do it in the servlet init()
> method) to use, as indicated in
>
> http://lucene.apache.org/java/2_3_1/api/org/apache/lucene/search/IndexSearcher.html
>
> >  * JVM command line parameters: -server mode; Max heap size 2GB (As it
> is a
> >  32 bit machine/OS and that is the limit in the case)
> What JVM/version?
>
> Have you tried running a profiler to see what is happening or even
> jconsole (add  -Dcom.sun.management.jmxremote to your command line
> parameters and (in Linux at least) run jconsole after the JVM has
> started.
>
> A general suggestion:
>  -XX:+AggressiveOpts -XX:+ScavengeBeforeFullGC   -Xms2000m
> -XX:+UseConcMarkSweepGC
>
> Although the garbage collection depends on your configuration.
>
> >  * Performance expectations :
> >   * Mean search time :1-2 seconds (though that is a lot considering that
> I
> >  have tried other engines, though with smaller indexes and they seem to
> have
> >  sub 0.01s searching time)
>
> Yes, I am also surprised by this poor performance.
>
> >  * No, I do not store any fields.
> >  * Yes, I am using multiple machines ( more than a couple ).serving the
> same
> >  index; a little more than just a vanilla load balancing mechanism;
> sending
> >  similar requests to the same server to better OS level caching
> >  * We do not index and search on the same machine, so in that case, I
> would
> >  not think that changing the priority of these threads would matter. In
> other
> >  words, there is nothing but search that happens on the search server.
> If
> >  that is what you meant when you wrote about increasing the thead
> priority.
>
> Your servlet environment has many threads that have to do a lot of
> things before they get around to the part of your code that does the
> searching. Once they get to the search part, you want them to have
> higher priority than the threads that are handling requests much
> further back in the servlet pipeline. So set the thread priority
> higher when it gets to your code. Of course you would need to test to
> see the impact on performance in your particular case.
>
> >
> >  I had already started trying the TPE and  guess it would provide a lot
> of
> >  improvement but 'm looking for other ways as well ! :)
>
> -glen
>
>
> >  --
> >  Anshum
> >
> >
> >
> >  On Tue, Apr 22, 2008 at 11:19 PM, Glen Newton <glen.newton@gmail.com>
> wrote:
> >
> >  > So even if you only have one index, this is the way to go to manage
> >  > this kind of problem.
> >  >
> >  > Looking at the implementation and having used ThreadPoolExecutor
> (TPE)
> >  > a lot, I would make the following suggestions for this class so as to
> >  > better support this particular use case:
> >  > Better access to the configuration of the TPE is needed: the ability
> >  > to choose the number of threads (pools size and max pool size), the
> >  > type and nature of the queue, etc. Also, the default behaviour of TPE
> >  > is to throw an exception when a job is submitted and the queue is
> >  > full: throwing an exception is expensive, especially when dozens or
> >  > hundreds of searches are being rejected and many exceptions are
> >  > occurring in a high load situation. Instead, being able to set the
> >  > RejectedExecutionHandler on the TPE would allow for a graceful
> >  > handling of rejected queries (feedback to user application, etc).
> >  > Also, TPE allows for a custom ThreadFactory, which I use to produce
> >  > threads with the highest priority to do the searching.
> >  >
> >  > Right now the implementation sets the #threads and queue size as a
> >  > function of the number of Searchables, which is reasonable for this
> >  > use case. But it would generalize better if these were a function of
> >  > the number of cores on the machine, or some combination.
> >  >
> >  > That said, I would suggest having adding the ability to set the
> >  > ThreadPoolExecutor completely, with a getter/setter. This would allow
> >  > this class to be useful beyond the use case of multiple indexes,
> >  > becoming more generalizable to a number of use cases including
> >  > allowing it to support the use case of one (or more indexes) and a
> >  > high work load of queries that need to be managed. It could use the
> >  > same defaults if the TPE is not set externally (is null).
> >  >
> >  > -Glen
> >  >
> >  > 2008/4/22 Renaud Waldura <renaud.waldura@library.ucsf.edu>:
> >  > > > one solution is to set-up a ThreadPoolExecutor[2] with a fixed
> >  > >  > number of threads and a limited queue size (use a bound
> >  > BlockingQueue[3])
> >  > >
> >  > >  Yes, this is precisely how the ConcurrentMultiSearcher works.
> >  > >  https://issues.apache.org/jira/browse/LUCENE-423
> >  > >
> >  > >
> >  > >
> >  > >
> >  > >  -----Original Message-----
> >  > >  From: Glen Newton [mailto:glen.newton@gmail.com]
> >  > >  Sent: Tuesday, April 22, 2008 5:40 AM
> >  > >  To: java-user@lucene.apache.org
> >  > >  Subject: Re: Binding lucene instance/threads to a particular
> >  > processor(or
> >  > >  core)
> >  > >
> >  > >
> >  > >
> >  > > Anshun,
> >  > >
> >  > >  I think I am dealing with an index of similar scale: 6.4 million
> >  > records, 83
> >  > >  GB index (see [1] for more info)
> >  > >
> >  > >  I mistakenly thought from your original posting that you were
> >  > interested in
> >  > >  binding threads to processors for indexing, but it is sounding
> like you
> >  > want
> >  > >  to do this for searching. I am not sure if this would work well
> for
> >  > >  searching, as there is a great deal more ephemeral state. But I am
> not
> >  > sure.
> >  > >
> >  > >  With respect to handling concurrency for search, could you
> describe
> >  > your
> >  > >  environment better?
> >  > >  - Is it an web-base application?
> >  > >  - What sort of problems do you have now?
> >  > >  - What are your java command line parameters (heap, etc.)
> >  > >  - What are the performance expectations, i.e. average search < N1
> >  > seconds;
> >  > >  median search time < N2 seconds
> >  > >  - Are you storing any fields and if so, do you need to store so
> many?
> >  > >  - Do you have the choice of serving searches from multiple
> machines?
> >  > >  i.e. load balance across >1 machine; We've found this to be one of
> the
> >  > best
> >  > >  solutions for scaling;
> >  > >  - One thing that I do for both indexing and searching is that the
> >  > threads
> >  > >  that are doing these tasks I always shift their priority to MAX,
> so
> >  > that
> >  > >  they are run in preference to threads doing other things, like
> >  > preparing
> >  > >  Documents, etc.
> >  > >
> >  > >  If it is a web-type environment, one solution is to set-up a
> >  > >  ThreadPoolExecutor[2] with a fixed number of threads and a limited
> >  > queue
> >  > >  size (use a bound BlockingQueue[3]) . You would have to experiment
> with
> >  > the
> >  > >  numbers to get the sweet-spot for your situation.
> >  > >  I would suggest starting with 2 times the number processors
> (cores) and
> >  > a
> >  > >  queue of say 20. Requests are queued, but if the request cannot be
> >  > queued,
> >  > >  at least the application then knows that it is too busy and you
> can
> >  > give the
> >  > >  user a message "The system is too busy at this moment, please try
> again
> >  > in a
> >  > >  few seconds..." kind of thing. The advantage is also that when
> things
> >  > are
> >  > >  very busy, you have the accepted requests handled in a reasonable
> >  > amount of
> >  > >  time, and some users being told things are too busy, as opposed to
> all
> >  > the
> >  > >  requests going in and the system thrashing (and perhaps
> running-out of
> >  > >  memory at the same time) and everyone's queries being very slow.
> >  > >
> >  > >  But I would suggest setting-up a test harness to emulate your
> >  > production
> >  > >  conditions to try these things out...
> >  > >
> >  > >  -Glen
> >  > >
> >  > >  [1]
> >  >
> http://zzzoot.blogspot.com/2008/04/lucene-indexing-performance-benchmarks
> >  > >  .html
> >  > >  [2]
> >  >
> http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/ThreadPoolEx
> >  > >  ecutor.html
> >  > >  [3]
> >  >
> http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/BlockingQueu
> >  > >  e.html
> >  > >
> >  > >
> >  > >  2008/4/22 Anshum <anshumg@gmail.com>:
> >  > >  > The paper seems pretty good but I am still wondering if there
> was a
> >  > >  > way to  achieve this through the command line parameters. I'm
> just
> >  > >  > trying this to  optimize the code, if this works, would let all
> know
> >  > >  > else would keep  everyone informed :)  Any other suggestions for
> >  > >  > handling a concurrency of over 7 search requests  per second for
> an
> >  > >  > index size of over 15Gigs containing over 13 million  records?
> >  > >  >  Also, could someone help me with obtaining a 'index size' -
> >  > >  > 'concurrency' -  'processor power' - 'memory' relationship
> formula
> >  > (or
> >  > >  something similar)?
> >  > >  >
> >  > >  >  --
> >  > >  >  Anshum
> >  > >  >
> >  > >  >
> >  > >  >
> >  > >  >
> >  > >  >  On Tue, Apr 22, 2008 at 3:55 AM, Antony Bowesman <
> adb@teamware.com>
> >  > >  wrote:
> >  > >  >
> >  > >  >  > That paper from 1997 is pretty old, but mirrors our
> experiences in
> >  > >  > those  > days. Then, we used Solaris processor sets to really
> improve
> >  > >  > performance by  > binding one of our processes to a particular
> CPU
> >  > >  > while leaving the other  > CPUs to manage the thread intensive
> work.
> >  > >  >  >
> >  > >  >  > You can bind processes/LWPs to a CPU on Solaris with psrset.
> >  > >  >  >
> >  > >  >  > The Solaris thread model in the late '90s was also a
> significant
> >  > >  > factor in  > performance of multi-threaded programs.  The
> default
> >  > >  > thread library in  > Solaris 8 implemented a MxN unbound thread
> model
> >  > >  > (threads/LWPS).  In those  > days we found that it did not
> perform
> >  > >  > well, so used the bound thread model  > (i.e. 1:1) where a
> Solaris
> >  > >  > thread was bound permanently to an LWP.  That  > improved
> performance
> >  > >  > a lot.  In Solaris 8, Sun had what they called the  >
> 'alternate'
> >  > >  > thread library (T2) around 2000, which became the default  >
> library
> >  > >  > in Solaris 9, and implemented a 1:1 model of Solaris threads to
>  >
> >  > LWPs.
> >  > >  That new library had dramatic performance improvements over the
> old.
> >  > >  >  >
> >  > >  >  > Some background info for Java and threading  >  >
> >  > >  >
> http://java.sun.com/j2se/1.5.0/docs/guide/vm/thread-priorities.html
> >  > >  >  >
> >  > >  >  > Antony
> >  > >  >  >
> >  > >  >  >
> >  > >  >  >
> >  > >  >  > Glen Newton wrote:
> >  > >  >  >
> >  > >  >  > > I realised that not everyone on this list might be able to
> >  > access
> >  > >  > the  > > IEEE paper I pointed-out, so I will include the
> abstract and
> >  > >  > some  > > paragraphs from the paper which I have included below.
> >  > >  >  > >
> >  > >  >  > > Also of interest (and should be available to all): Fedorova
> et
> >  > al.
> >  > >  >  > > 2005. Performance of Multithreaded Chip Multiprocessors And
>  > >
> >  > >  > Implications For Operating System Design. Usenix 2005.
> >  > >  >  > > http://www.eecs.harvard.edu/margo/papers/usenix05/paper.pdf
> >  > >  >  > > "Abstract: We investigated how operating system design
> should be
> >  > >  > > > adapted for multithreaded chip multiprocessors (CMT) - a new
>  > >
> >  > >  > generation of processors that exploit thread-level parallelism
> to
> >  > mask
> >  > >  > > > the memory latency in modern workloads. We  > > determined
> that
> >  > >  > the L2 cache is a critical shared resource on CMT and  > > that
> an
> >  > >  > insufficient amount of L2 cache can undermine the ability to  >
> >
> >  > hide
> >  > >  > memory latency on these processors. To use the L2 cache as  > >
> >  > >  > efficiently as possible, we propose an L2-conscious scheduling
>  > >
> >  > >  > algorithm and quantify its performance potential. Using this
> >  > algorithm
> >  > >  > > > it is possible to reduce miss ratios in the L2 cache by
> 25-37%
> >  > and
> >  > >  > > > improve processor throughput by 27-45%."
> >  > >  >  > >
> >  > >  >  > >
> >  > >  >  > > From Lundberg, L. 1997:
> >  > >  >  > > Abstract: "The default scheduling algorithm in Solaris and
> other
> >  > >  > > > operating systems may result in frequent relocation of
> threads at
> >  > >  > > > run-time. Excessive thread relocation cause  > > poor memory
> >  > >  > performance. This can be avoided by binding threads to  > >
> >  > >  > processors. However, binding threads to processors may result in
> an
> >  >  >
> >  > >  > > unbalanced load. By considering a previously obtained
> theoretical
> >  >  >
> >  > >  > > result and by evaluating a set of multithreaded Solaris  > >
> >  > >  > programs using a multiprocessor with 8 processors, we are able
> to  >
> >  > >
> >  > >  > bound the maximum performance loss due to binding threads, The
>  > >
> >  > >  > theoretical result is also recapitulated. By evaluating another
> set
> >  > of
> >  > >  > > > multithreaded programs, we show that the gain of binding
> threads
> >  > >  > to  > > processors may be substantial, particularly for programs
> with
> >  > >  > fine  > > grained parallelism."
> >  > >  >  > >
> >  > >  >  > > First paragraph: "The thread concept in Solaris [3][5] and
> other
> >  > >  > > > operating systems makes it possible to write multithreaded
> >  > >  > programs,  > > which can be executed in parallel on a
> multiprocessor.
> >  > >  > Previous  > > experience from real world programs [4] show that,
> >  > using
> >  > >  > the default  > > scheduling algorithm in Solaris, threads are
> >  > >  > frequently relocated from  > > one processor  > > to another at
> >  > >  > run-time. After each such relocation, the code and data  > >
> >  > >  > associated with the relocated thread is moved from the cache
> memory
> >  > of
> >  > >  > > > the 0113 processor to the cache of the new processor. This
> >  > reduces
> >  > >  > the  > > performance. Run-time relocation of threads to
> processors
> >  > can
> >  > >  > also  > > result in unpredictable response times. This is a
> problem
> >  > in
> >  > >  > systems  > > which operate in a real-time environment. In order
> to
> >  > >  > avoid poor  > > memory performance and unpredictable real-time
> >  > >  > behaviour due to  > > frequent thread relocation, threads can be
> >  > bound
> >  > >  > to processors using  > > the processor-bind directive [3] [5].
> The
> >  > >  > major problem with binding  > > threads is that one can end up
> with
> >  > an
> >  > >  > unbalanced load, i.e. some  > > processors may be extremely busy
> >  > >  > during some time periods while other  > > processors are idle."
> >  > >  >  > >
> >  > >  >  > > -Glen
> >  > >  >  > >
> >  > >  >  > > On 21/04/2008, Glen Newton <glen.newton@gmail.com> wrote:
> >  > >  >  > >
> >  > >  >  > > > And this discussion on bound threads may also shed light
> on
> >  > things:
> >  > >  >  > > >
> >  > >  >  > > >
> >  > >  >
> >  >
> http://coding.derkeiler.com/Archive/Java/comp.lang.java.programmer/200
> >  > >  > 7-11/msg02801.html
> >  > >  >  > > >
> >  > >  >  > > >
> >  > >  >  > > >  -Glen
> >  > >  >  > > >
> >  > >  >  > > >
> >  > >  >  > > >  On 21/04/2008, Glen Newton <glen.newton@gmail.com>
> wrote:
> >  > >  >  > > >  > BInding threads to processors - in many situations -
> >  > >  > improves  > > >  >  throughput by reducing memory overhead. When
> a
> >  > >  > thread is running  > > > on a  > > >  >  core, its state is
> local; if
> >  > >  > it is timeshared-out and either 1)  > > >  >  swapped back in on
> the
> >  > >  > same core, it is likely that there will be  > > >  the  > > >  >
> >  > >  > core's L1 cache; or 2) onto another core, there will not be a  >
> > >
> >  > >  > cache  > > >  >  hit and the state will have to be fetched from
> L2 or
> >  > >  > main memory,  > > >  >  incurring a performance hit, esp in the
> >  > >  > latter. See Lundberg, L.
> >  > >  >  > > > 1997.
> >  > >  >  > > >  >  Evaluating the Performance Implications of Binding
> Threads
> >  > >  > to  > > >  >  Processors. 393.
> >  > >  >  > > > http://ieeexplore.ieee.org/iel3/5020/13768/00634520.pdf
> >  > >  >  > > >  >  for more info.
> >  > >  >  > > >  >
> >  > >  >  > > >  >  If you are using JVM on Solaris on SPARC, you should
> take
> >  > a
> >  > >  > look  > > > at  > > >  >  the following links for tuning (the
> Sun JVM
> >  > >  > on Solaris SPARC has  > > > many  > > >  >  more performance
> tuning
> >  > >  > parameters available), including  > > > threading:
> >  > >  >  > > >  >  -
> http://java.sun.com/docs/hotspot/threads/threads.html
> >  > >  >  > > >  >  -
> >  > >  >  > > >
> >  > >  >
> http://java.sun.com/j2se/1.5.0/docs/guide/vm/thread-priorities.html
> >  > >  >  > > >  >  -
> >  > >  >  > > >
> >  > >  >
> >  >
> http://www-1.ibm.com/support/docview.wss?rs=180&context=SSEQTP&uid=swg
> >  > >  > 21107291  > > >  >  -
> >  > >  > http://java.sun.com/javase/technologies/performance.jsp
> >  > >  >  > > >  >
> >  > >  >  > > >  >
> >  > >  >  > > >  >  -Glen
> >  > >  >  > > >  >
> >  > >  >  > > >  >
> >  > >  >  > > >  >
> >  > >  >  > > >  >
> >  > >  >  > > >  >
> >  > >  >  > > >  >
> >  > >  >  > > >  >
> >  > >  >  > > >  >  On 21/04/2008, Ulf Dittmer <udittmer@yahoo.com>
> wrote:
> >  > >  >  > > >  >  > This sounds odd. Why would restricting it to a
> single  >
> >  > >  > > >  >  >  core improve performance? The point of using multiple
>  > >
> >  > >  > >  >  >  cores (and multiple threads) is to improve performance
>  > >
> >  > >
> >  > >  > >  >  isn't it? I'd leave thread scheduling decisions to the  >
> > >
> >  >  >
> >  > >  > >  JVM. Plus, I don't think there is anything in Java to  > > >
>  >  >
> >  > >  > facilitate this (short of using JNI).
> >  > >  >  > > >  >  >
> >  > >  >  > > >  >  >  Are you talking about indexing or searching? You
> may  >
> >  > >  > > >  >  >  be able to use multiple parallel threads to improve
>  > > >
> >  > >  > >  >  indexing performance. I don't think Lucene uses  > > >  >
>  >
> >  > >  > multi-threading for searching; not unless you have  > > >  >  >
> >  > >  > multiple indices, anyway.
> >  > >  >  > > >  >  >
> >  > >  >  > > >  >  >  Ulf
> >  > >  >  > > >  >  >
> >  > >  >  > > >  >  >
> >  > >  >  > > >  >  >
> >  > >  >  > > >  >  >  --- Anshum <anshumg@gmail.com> wrote:
> >  > >  >  > > >  >  >
> >  > >  >  > > >  >  >  > Hi,
> >  > >  >  > > >  >  >  >
> >  > >  >  > > >  >  >  > I have been trying to bind my lucene instance
> (JVM -
> >  > >  > > > >  >  >  > Sun Hotspot*) to a  > > >  >  >  > particular
> core so
> >  > >  > as to improve the performance. Is  > > >  >  >  > there a way to
> do
> >  > so
> >  > >  > or  > > >  >  >  > is there support in lucene to explicitly
> control
> >  > >  > the  > > >  >  >  > thread - processor  > > >  >  >  > linkup?
> >  > >  >  > > >  >  >  >
> >  > >  >  > > >  >  >  > --
> >  > >  >  > > >  >  >  > --
> >  > >  >  > > >  >  >  > The facts expressed here belong to everybody,
> the  >
> >  > >
> >  > >  > >  >  >  > opinions to me.
> >  > >  >  > > >  >  >  > The distinction is yours to draw............
> >  > >  >  > > >  >  >  >
> >  > >  >  > > >  >  >
> >  > >  >  > > >  >  >
> >  > >  >  > > >  >  >
> >  > >  >  > > >  >  >
> >  > >  >  > > >  >  >
> >  > >  >  > > >
> >  > >  >
> >  >
> ______________________________________________________________________
> >  > >  > ______________  > > >  >  >  Be a better friend, newshound, and
>  > >
> >  > >
> >  > >  > >  >  know-it-all with Yahoo! Mobile.  Try it now.
> >  > >  >  > > >
> http://mobile.yahoo.com/;_ylt=Ahu06i62sR8HDtDypao8Wcj9tAcJ
> >  > >  >  > > >  >  >
> >  > >  >  > > >  >  >
> >  > >  >  > > >
> >  > >  >
> ---------------------------------------------------------------------
> >  > >  >  > > >  >  >  To unsubscribe, e-mail:
> >  > >  > java-user-unsubscribe@lucene.apache.org
> >  > >  >  > > >  >  >  For additional commands, e-mail:
> >  > >  >  > > > java-user-help@lucene.apache.org  > > >  >  >  > > >  >
>  >  >
> >  > >
> >  > >  > >  >  > > >  >  > > >  >  > > >  > --  > > >  >  > > >  >  -  >
> > >
> >  >  >
> >  > >  > > > >  > > >  > > >  > > > --  > > >  > > >  -  > > >  > > >  >
> >  >
> >  > >
> >  > >  > >  >
> >  > >  >
> ---------------------------------------------------------------------
> >  > >  >  > To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> >  > >  >  > For additional commands, e-mail:
> java-user-help@lucene.apache.org
> >  > >  > >  >
> >  > >  >
> >  > >  >
> >  > >  >  --
> >  > >  >
> >  > >  >
> >  > >  > --
> >  > >  >  The facts expressed here belong to everybody, the opinions to
> me.
> >  > >  >  The distinction is yours to draw............
> >  > >  >
> >  > >
> >  > >
> >  > >
> >  > >  --
> >  > >
> >  > >  -
> >  > >
> >  > >
> >  > >
> >  > >
>  ---------------------------------------------------------------------
> >  > >  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >  > >  For additional commands, e-mail: java-user-help@lucene.apache.org
> >  > >
> >  > >
> >  >
> >  >
> >  >
> >  > --
> >  >
> >  > -
> >  >
> >  > ---------------------------------------------------------------------
> >  > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >  > For additional commands, e-mail: java-user-help@lucene.apache.org
> >  >
> >  >
> >
> >
> >  --
> >  --
> >  The facts expressed here belong to everybody, the opinions to me.
> >  The distinction is yours to draw............
> >
>
>
>
> --
>
> -
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
--
The facts expressed here belong to everybody, the opinions to me.
The distinction is yours to draw............

------=_Part_6795_33050557.1209009350897--

From java-user-return-33772-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 24 04:01:38 2008
Return-Path: <java-user-return-33772-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10042 invoked from network); 24 Apr 2008 04:01:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Apr 2008 04:01:37 -0000
Received: (qmail 80226 invoked by uid 500); 24 Apr 2008 04:01:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80199 invoked by uid 500); 24 Apr 2008 04:01:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80187 invoked by uid 99); 24 Apr 2008 04:01:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Apr 2008 21:01:31 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 74.125.46.30 as permitted sender)
Received: from [74.125.46.30] (HELO yw-out-2324.google.com) (74.125.46.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Apr 2008 04:00:47 +0000
Received: by yw-out-2324.google.com with SMTP id 9so301131ywe.5
        for <java-user@lucene.apache.org>; Wed, 23 Apr 2008 21:00:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=QSkZqCGCfecLlV1TkrsoZeA7poS73VwaVfH2PHbAyOA=;
        b=ON3o5NbIKZ2fgq+ayMcTXXR1+f0GQ43r9X8Csqvj6OGY1u8ABeqBWxipL8yIX3JWmZa3sQSQ5HZG7wulaxCXUyl44dtGN2lafh63BrULt10q4/qLNSbaCtyxZU76jakix7DOFBYR+41Mbt1CuDO0hmSnAHBZgxwzRJg/RUVzD5o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=KvoPOlnnVwE40sIU0L4OPO0NLpH09pjrCSIixvRxtC4kMY4HQhRukddgeg+vkOQGxbg5EIOyIxjMrl+Sqq4WEO19oeEbYjVjEh1V5kacLJy7dSuqzgQA6sXNiUY7pgKCOlZ9CPusuS2mL/3Jlq8TUd/AEo68EFoeKQWmaj7r4K8=
Received: by 10.114.120.1 with SMTP id s1mr1243493wac.137.1209009647384;
        Wed, 23 Apr 2008 21:00:47 -0700 (PDT)
Received: by 10.114.134.19 with HTTP; Wed, 23 Apr 2008 21:00:47 -0700 (PDT)
Message-ID: <867513fe0804232100s31e89b4dlaa19328e0f2aef35@mail.gmail.com>
Date: Thu, 24 Apr 2008 09:30:47 +0530
From: Anshum <anshumg@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Unable to add more than 1 document to Index
In-Reply-To: <2cda2fc90804231943i25309400o658448683beb4f86@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6825_28417670.1209009647376"
References: <2cda2fc90804231942m7e014c20i3a4641148d09f3ec@mail.gmail.com>
	 <2cda2fc90804231943i25309400o658448683beb4f86@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_6825_28417670.1209009647376
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Hasan,

The issue seems to be with the initialization of the index writer, try
initializing it with a the last parameter as false i.e.
*writer = new IndexWriter(indexLocation, new StandardAnalyzer(), false);
*If you initialize it with the last argument as true, it creates a new
index  each time @ the index location.
With the last argument as 'false' you would be able to append data to the
existing index.

Hope that solves the issue.

--
Anshum


On Thu, Apr 24, 2008 at 8:13 AM, Hasan Diwan <hasan.diwan@gmail.com> wrote:

>                writer = new IndexWriter(indexLocation, new
> StandardAnalyzer(), true);
>                String string = request.getParameter("text");
>                this.log("Text is "+string);
>                Date date = new Date();
>                String dateString = DateTools.dateToString(date,
> DateTools.Resolution.MINUTE);
>                this.log("Date is "+dateString);
>                Field allField = new Field("all", string, Field.Store.YES,
>  Field.Index.TOKENIZED);
>                Field dateField = new Field("date", dateString,
> Field.Store.YES,
>  Field.Index.UN_TOKENIZED);
>                doc.add(allField);
>                doc.add(dateField);
>                writer.addDocument(doc);
>                writer.optimize();
>                writer.close();
>
>  This code is supposed to get information from a JSP (and does) and put
>  it into a lucene index (and does) in a new document (and does not).
>  This is apparent when I query it using luke and the default lucene web
>  application. Any suggestions or pointers to what to do about this
>  would be eternally helpful? Thanks in advance!
> --
> Cheers,
> Hasan Diwan <hasan.diwan@gmail.com>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
--
The facts expressed here belong to everybody, the opinions to me.
The distinction is yours to draw............

------=_Part_6825_28417670.1209009647376--

From java-user-return-33773-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 24 05:50:53 2008
Return-Path: <java-user-return-33773-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57872 invoked from network); 24 Apr 2008 05:50:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Apr 2008 05:50:52 -0000
Received: (qmail 44277 invoked by uid 500); 24 Apr 2008 05:50:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44242 invoked by uid 500); 24 Apr 2008 05:50:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44231 invoked by uid 99); 24 Apr 2008 05:50:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Apr 2008 22:50:45 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [216.75.55.147] (HELO stimulussoft.com) (216.75.55.147)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Apr 2008 05:49:53 +0000
Received: (qmail 32767 invoked by uid 511); 23 Apr 2008 22:50:11 -0700
Received: from 41.243.218.193 by live.stimulussoft.com (envelope-from <jamie@stimulussoft.com>, uid 509) with qmail-scanner-1.25-st-qms 
 (spamassassin: 3.2.3. perlscan: 1.25-st-qms.  
 Clear:RC:0(41.243.218.193):SA:0(-2.3/5.0):. 
 Processed in 1.284056 secs); 24 Apr 2008 05:50:11 -0000
X-Antivirus-MYDOMAIN-Mail-From: jamie@stimulussoft.com via live.stimulussoft.com
X-Antivirus-MYDOMAIN: 1.25-st-qms (Clear:RC:0(41.243.218.193):SA:0(-2.3/5.0):. Processed in 1.284056 secs Process 32757)
Received: from dsl-243-218-193.telkomadsl.co.za (HELO ?192.168.0.50?) (jamie@stimulussoft.com@41.243.218.193)
  by stimulussoft.com with SMTP; 23 Apr 2008 22:50:10 -0700
Message-ID: <4810206F.9070707@stimulussoft.com>
Date: Thu, 24 Apr 2008 07:53:51 +0200
From: Jamie <jamie@stimulussoft.com>
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: MergePolicy Exception
References: <2cda2fc90804231942m7e014c20i3a4641148d09f3ec@mail.gmail.com>	 <2cda2fc90804231943i25309400o658448683beb4f86@mail.gmail.com> <867513fe0804232100s31e89b4dlaa19328e0f2aef35@mail.gmail.com>
In-Reply-To: <867513fe0804232100s31e89b4dlaa19328e0f2aef35@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, hits=-2.3 required=5.0

Hi there

I am using the latest version of Lucene and have ten threads indexing 
documents. I am getting the following errors appearing on a continual 
basis during the indexing process:

Exception in thread "Thread-569" 
org.apache.lucene.index.MergePolicy$MergeException: 
java.io.FileNotFoundException: /index/index1/_48.cfs (No such file or 
directory)
        at 
org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(ConcurrentMergeScheduler.java:271)
Caused by: java.io.FileNotFoundException: /index/index1/_48.cfs (No such 
file or directory)
        at java.io.RandomAccessFile.open(Native Method)
        at java.io.RandomAccessFile.<init>(Unknown Source)
        at 
org.apache.lucene.store.FSDirectory$FSIndexInput$Descriptor.<init>(FSDirectory.java:506)
        at 
org.apache.lucene.store.FSDirectory$FSIndexInput.<init>(FSDirectory.java:536)
        at 
org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java:445)
        at 
org.apache.lucene.index.CompoundFileReader.<init>(CompoundFileReader.java:70)
        at 
org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java:277)
        at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:262)
        at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:221)
        at 
org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java:3099)
        at org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:2834)
        at 
org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(ConcurrentMergeScheduler.java:240)

Any idea on what this might be?

Jamie



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33774-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 24 06:37:26 2008
Return-Path: <java-user-return-33774-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5153 invoked from network); 24 Apr 2008 06:37:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Apr 2008 06:37:26 -0000
Received: (qmail 78772 invoked by uid 500); 24 Apr 2008 06:37:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78734 invoked by uid 500); 24 Apr 2008 06:37:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78723 invoked by uid 99); 24 Apr 2008 06:37:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Apr 2008 23:37:20 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of hasan.diwan@gmail.com designates 209.85.146.183 as permitted sender)
Received: from [209.85.146.183] (HELO wa-out-1112.google.com) (209.85.146.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Apr 2008 06:36:36 +0000
Received: by wa-out-1112.google.com with SMTP id j40so5242385wah.11
        for <java-user@lucene.apache.org>; Wed, 23 Apr 2008 23:36:49 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=NqkLXxoCgLjj/Rz5sdOGOH2QrDpwYVuimhWf6r0of94=;
        b=nrTp+x46fRYajLFDT2GfPsNnGrUNAleUlIN43l1KjaHMc3ajwYMTmgtNDCKMxZVFWIU1TDoQ2nVrYv24xjFfbESG7a0CZQww1q4epr2pTF/TLRq7FaAcZCJzbSDCVWT4iKz/Noj0DCY7ahKeaXZAuLNqHj951jpp65rZECayLOc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=w73X4nvXCfIRMQa3XllSqctLCRqE6xPYqgBY7/TAJinJQhRKDL2kZtgy8XiWe6oe/R8LdOPKa4j+E8XvXJZFGUaETwoFbC6Fl7zkMeokm6QgdUENQBC8gHe23YlYSDcD2X6z/ZgpgGWp4aEk4O/GWTmT0lfEZoglUU/mHMpHBOg=
Received: by 10.114.27.20 with SMTP id a20mr1316770waa.101.1209019009475;
        Wed, 23 Apr 2008 23:36:49 -0700 (PDT)
Received: by 10.115.58.6 with HTTP; Wed, 23 Apr 2008 23:36:49 -0700 (PDT)
Message-ID: <2cda2fc90804232336y51996f9akdccc621ba27909b5@mail.gmail.com>
Date: Wed, 23 Apr 2008 23:36:49 -0700
From: "Hasan Diwan" <hasan.diwan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Unable to add more than 1 document to Index
In-Reply-To: <867513fe0804232100s31e89b4dlaa19328e0f2aef35@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <2cda2fc90804231942m7e014c20i3a4641148d09f3ec@mail.gmail.com>
	 <2cda2fc90804231943i25309400o658448683beb4f86@mail.gmail.com>
	 <867513fe0804232100s31e89b4dlaa19328e0f2aef35@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Anshum:

On 23/04/2008, Anshum <anshumg@gmail.com> wrote:
>  The issue seems to be with the initialization of the index writer, try
>  initializing it with a the last parameter as false i.e.
>  *writer = new IndexWriter(indexLocation, new StandardAnalyzer(), false);

writer = new IndexWriter(indexLocation, new StandardAnalyzer());

>  *If you initialize it with the last argument as true, it creates a new
>  index  each time @ the index location.
>  With the last argument as 'false' you would be able to append data to the
>  existing index.

if you don't provide the last argument, it does what it logically
should (create new index unless one exists).
-- 
Cheers,
Hasan Diwan <hasan.diwan@gmail.com>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33775-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 24 07:01:19 2008
Return-Path: <java-user-return-33775-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22186 invoked from network); 24 Apr 2008 07:01:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Apr 2008 07:01:19 -0000
Received: (qmail 11099 invoked by uid 500); 24 Apr 2008 07:01:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11072 invoked by uid 500); 24 Apr 2008 07:01:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11061 invoked by uid 99); 24 Apr 2008 07:01:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Apr 2008 00:01:13 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 209.85.146.179 as permitted sender)
Received: from [209.85.146.179] (HELO wa-out-1112.google.com) (209.85.146.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Apr 2008 07:00:30 +0000
Received: by wa-out-1112.google.com with SMTP id j40so5254676wah.11
        for <java-user@lucene.apache.org>; Thu, 24 Apr 2008 00:00:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=GxXSxcnd4JRNO4Q+kUpRCmNEgxfa/td1TE9WsCOgGmo=;
        b=PMJ+GvVRxd2MnPauemrObzL7MZnfr7FOZTjHmzz+CTZupQbUxpMD3PvgqiQd3PkbTKvNVMz254EW4heiZRxIH6W0SBG9YAB6ZWDm7lUD6rlbXSZRjhyldY7+Qa+ZpHPW9Nbz1iUl+HCbS8vnoTbACgLVp3F0hKJ8BGj1LL05HgY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=fnTB2+TyG6O0ezJvqxeaSNc5YOvIXIqMq2022lZzcpfksIPZu+05ZJw07K4edGktnxkj/FlEh6VGXVoTtXNcbWL4mn5IPtu0tdNFC2EWGBYtkX3pnJK/INGBQD0GXnka04qStdDxG2tvy1ZL36ftRd6aiWoiCgjnnu4gUMEgGpQ=
Received: by 10.115.79.1 with SMTP id g1mr1318347wal.43.1209020444149;
        Thu, 24 Apr 2008 00:00:44 -0700 (PDT)
Received: by 10.114.134.19 with HTTP; Thu, 24 Apr 2008 00:00:44 -0700 (PDT)
Message-ID: <867513fe0804240000sb6e6512y7f6988bd18ff133e@mail.gmail.com>
Date: Thu, 24 Apr 2008 12:30:44 +0530
From: Anshum <anshumg@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Unable to add more than 1 document to Index
In-Reply-To: <2cda2fc90804232336y51996f9akdccc621ba27909b5@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7425_5571839.1209020444145"
References: <2cda2fc90804231942m7e014c20i3a4641148d09f3ec@mail.gmail.com>
	 <2cda2fc90804231943i25309400o658448683beb4f86@mail.gmail.com>
	 <867513fe0804232100s31e89b4dlaa19328e0f2aef35@mail.gmail.com>
	 <2cda2fc90804232336y51996f9akdccc621ba27909b5@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_7425_5571839.1209020444145
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Hasan,

You had mentioned that you initialized the writer with 'true' as a parameter
so I just thought you went wrong there. Is the problem resolved?
Are you catching any exceptions during the process?

--
Anshum

On Thu, Apr 24, 2008 at 12:06 PM, Hasan Diwan <hasan.diwan@gmail.com> wrote:

> Anshum:
>
> On 23/04/2008, Anshum <anshumg@gmail.com> wrote:
> >  The issue seems to be with the initialization of the index writer, try
> >  initializing it with a the last parameter as false i.e.
> >  *writer = new IndexWriter(indexLocation, new StandardAnalyzer(),
> false);
>
> writer = new IndexWriter(indexLocation, new StandardAnalyzer());
>
> >  *If you initialize it with the last argument as true, it creates a new
> >  index  each time @ the index location.
> >  With the last argument as 'false' you would be able to append data to
> the
> >  existing index.
>
> if you don't provide the last argument, it does what it logically
> should (create new index unless one exists).
> --
> Cheers,
> Hasan Diwan <hasan.diwan@gmail.com>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
--
The facts expressed here belong to everybody, the opinions to me.
The distinction is yours to draw............

------=_Part_7425_5571839.1209020444145--

From java-user-return-33776-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 24 07:59:23 2008
Return-Path: <java-user-return-33776-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49167 invoked from network); 24 Apr 2008 07:59:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Apr 2008 07:59:23 -0000
Received: (qmail 71672 invoked by uid 500); 24 Apr 2008 07:59:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71637 invoked by uid 500); 24 Apr 2008 07:59:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71626 invoked by uid 99); 24 Apr 2008 07:59:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Apr 2008 00:59:16 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [213.162.48.15] (HELO soufre.accelance.net) (213.162.48.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Apr 2008 07:58:22 +0000
Received: from [192.168.3.111] (LSt-Amand-152-32-31-90.w82-127.abo.wanadoo.fr [82.127.74.90])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by soufre.accelance.net (Postfix) with ESMTP id 0BC4D4518F
	for <java-user@lucene.apache.org>; Thu, 24 Apr 2008 09:58:40 +0200 (CEST)
Message-ID: <48103DA6.6050805@garambrogne.net>
Date: Thu, 24 Apr 2008 09:58:30 +0200
From: Mathieu Lecarme <mathieu@garambrogne.net>
User-Agent: Thunderbird 2.0.0.12 (X11/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene and Google Web 1T 5 Gram
References: <abded4280804230425t2f379e6br7dda1fb2f2bb5009@mail.gmail.com>	 <480F36C3.2050601@garambrogne.net> <abded4280804231820v1784bcefn9f3a7b7e7de09039@mail.gmail.com>
In-Reply-To: <abded4280804231820v1784bcefn9f3a7b7e7de09039@mail.gmail.com>
X-Enigmail-Version: 0.95.6
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Rafael Turk a crit :
> Hi Mathieu,
>
> *What do you wont to do?*
>
> An spell checker and related keyword suggestion
>
>   
Here is a spell checker wich I try to finalize :
https://admin.garambrogne.net/projets/revuedepresse/browser/trunk/src/java

> If you wont an ngram => popularity map, just use a berkley DB, and use this
> information in your Lucene application. Lucene is a reversed index, Berkeley
> DB an index.
>
> *Great ideia! Berkeley DB is definitely a try, simple and effective, but
> I'll have to work the data previously. I was hopping to take advantage of
> Lucene's built in features*
>   
Lucene provides nice tools without the need to index. Analyzer and 
TokenFilter can help you, i guess.

M.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33777-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 24 10:07:43 2008
Return-Path: <java-user-return-33777-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94983 invoked from network); 24 Apr 2008 10:07:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Apr 2008 10:07:42 -0000
Received: (qmail 8597 invoked by uid 500); 24 Apr 2008 10:07:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8497 invoked by uid 500); 24 Apr 2008 10:07:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8471 invoked by uid 99); 24 Apr 2008 10:07:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Apr 2008 03:07:40 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.178.242] (HELO hs-out-0708.google.com) (64.233.178.242)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Apr 2008 10:06:55 +0000
Received: by hs-out-0708.google.com with SMTP id 4so1966672hsl.5
        for <java-user@lucene.apache.org>; Thu, 24 Apr 2008 03:07:07 -0700 (PDT)
Received: by 10.90.32.14 with SMTP id f14mr3572740agf.102.1209031626800;
        Thu, 24 Apr 2008 03:07:06 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id b45sm134819hsa.6.2008.04.24.03.07.06
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 24 Apr 2008 03:07:06 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <4810206F.9070707@stimulussoft.com>
References: <2cda2fc90804231942m7e014c20i3a4641148d09f3ec@mail.gmail.com>	 <2cda2fc90804231943i25309400o658448683beb4f86@mail.gmail.com> <867513fe0804232100s31e89b4dlaa19328e0f2aef35@mail.gmail.com> <4810206F.9070707@stimulussoft.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <30449443-3B24-4E4C-AD6A-ADABEEA1120F@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: MergePolicy Exception
Date: Thu, 24 Apr 2008 06:07:42 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


This is some sort of index corruption.  The merge policy wants to  
merge that segment (_48) but it has apparently been deleted from your  
index.  Likely if you try to run CheckIndex, optimize, or open a  
reader, you'd get a similar exception.

Is this repeatable?  Can you describe your application in more  
detail, or post the source fragments that open, add docs, and close  
the index?  Were there any prior exceptions before this one?

Was this a single indexing run, or did you close/open the IndexWriter  
multiple times?

Mike

Jamie wrote:
> Hi there
>
> I am using the latest version of Lucene and have ten threads  
> indexing documents. I am getting the following errors appearing on  
> a continual basis during the indexing process:
>
> Exception in thread "Thread-569" org.apache.lucene.index.MergePolicy 
> $MergeException: java.io.FileNotFoundException: /index/index1/ 
> _48.cfs (No such file or directory)
>        at org.apache.lucene.index.ConcurrentMergeScheduler 
> $MergeThread.run(ConcurrentMergeScheduler.java:271)
> Caused by: java.io.FileNotFoundException: /index/index1/_48.cfs (No  
> such file or directory)
>        at java.io.RandomAccessFile.open(Native Method)
>        at java.io.RandomAccessFile.<init>(Unknown Source)
>        at org.apache.lucene.store.FSDirectory$FSIndexInput 
> $Descriptor.<init>(FSDirectory.java:506)
>        at org.apache.lucene.store.FSDirectory$FSIndexInput.<init> 
> (FSDirectory.java:536)
>        at org.apache.lucene.store.FSDirectory.openInput 
> (FSDirectory.java:445)
>        at org.apache.lucene.index.CompoundFileReader.<init> 
> (CompoundFileReader.java:70)
>        at org.apache.lucene.index.SegmentReader.initialize 
> (SegmentReader.java:277)
>        at org.apache.lucene.index.SegmentReader.get 
> (SegmentReader.java:262)
>        at org.apache.lucene.index.SegmentReader.get 
> (SegmentReader.java:221)
>        at org.apache.lucene.index.IndexWriter.mergeMiddle 
> (IndexWriter.java:3099)
>        at org.apache.lucene.index.IndexWriter.merge 
> (IndexWriter.java:2834)
>        at org.apache.lucene.index.ConcurrentMergeScheduler 
> $MergeThread.run(ConcurrentMergeScheduler.java:240)
>
> Any idea on what this might be?
>
> Jamie
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33778-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 24 11:02:55 2008
Return-Path: <java-user-return-33778-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17918 invoked from network); 24 Apr 2008 11:02:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Apr 2008 11:02:55 -0000
Received: (qmail 80896 invoked by uid 500); 24 Apr 2008 11:02:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80860 invoked by uid 500); 24 Apr 2008 11:02:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80849 invoked by uid 99); 24 Apr 2008 11:02:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Apr 2008 04:02:50 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Apr 2008 11:02:05 +0000
Received: by nf-out-0910.google.com with SMTP id d3so1134890nfc.15
        for <java-user@lucene.apache.org>; Thu, 24 Apr 2008 04:02:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=nHKrxx2MxIaTslMwz20vL5RrMwNdUUVwOcEQ+uuFgdg=;
        b=EOm8Eosx6qsXw28Ebe5X/iqgi9vDxBq+LwGFMOEhF2YpPMUCDQFt7RTFJw2Y6IGGIkDnMmTYU53+5TNBeNfV3ufa+yTqmTvNnNn/bbr3gVyKE6vJ2AwPRHZgcJOlQV/4xi1aPg0sMUqbsG19XYRMFFjPTgK8kP47xamAdbUUUlo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=t6S9tiLmK7b/qtkwZg2UMq9l67ykRnEkc52s9OTiuzdvqaO7AWZwjGY61ONgNJ7B7PZNn0VPF3FjIq4TtCptNhCJPSKvS9iRECYjhxQLoIsPabwKEtbiujGtwqBCo+J5FJrPQlY9VyMSv6JXReOr9DX+RoRKBIbOx5LZlWjLBG8=
Received: by 10.210.52.15 with SMTP id z15mr641293ebz.103.1209034937826;
        Thu, 24 Apr 2008 04:02:17 -0700 (PDT)
Received: from kodapan.lan ( [82.93.70.124])
        by mx.google.com with ESMTPS id d25sm328454nfh.33.2008.04.24.04.02.16
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 24 Apr 2008 04:02:16 -0700 (PDT)
Message-ID: <481068B7.1070208@gmail.com>
Date: Thu, 24 Apr 2008 13:02:15 +0200
From: Karl Wettin <karl.wettin@gmail.com>
User-Agent: Thunderbird 2.0.0.12 (Macintosh/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene and Google Web 1T 5 Gram
References: <abded4280804230425t2f379e6br7dda1fb2f2bb5009@mail.gmail.com>	 <480F36C3.2050601@garambrogne.net> <abded4280804231820v1784bcefn9f3a7b7e7de09039@mail.gmail.com>
In-Reply-To: <abded4280804231820v1784bcefn9f3a7b7e7de09039@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Rafael Turk skrev:
> 
> *Great ideia! Berkeley DB is definitely a try, simple and effective, but
> I'll have to work the data previously. 

JDBM has a more appealing license if you ask ASF.


            karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33779-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 24 13:16:06 2008
Return-Path: <java-user-return-33779-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88021 invoked from network); 24 Apr 2008 13:16:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Apr 2008 13:16:06 -0000
Received: (qmail 67553 invoked by uid 500); 24 Apr 2008 13:16:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67530 invoked by uid 500); 24 Apr 2008 13:16:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67519 invoked by uid 99); 24 Apr 2008 13:16:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Apr 2008 06:16:00 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.187 as permitted sender)
Received: from [209.85.128.187] (HELO fk-out-0910.google.com) (209.85.128.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Apr 2008 13:15:16 +0000
Received: by fk-out-0910.google.com with SMTP id 19so4390332fkr.5
        for <java-user@lucene.apache.org>; Thu, 24 Apr 2008 06:15:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=pZdtVODGMQtIUFCQ1/3ILqESEpK6wXKthtrzcKWJNkU=;
        b=ZoernjoIzXZl9shJ/llbHZBppfHg/Un58X1Cg4uXy3d4Po5mGLQjo3wcOCzmCZe6hqRfaCXO9Vc8hnPBwdjW4aIYKUI91yUqYRw3nTMKaVJ/6S9IjOYdVCgRdOYf7qD/pM23qUipouI1afoc29P/TlUDBv/Ih9iVwQZLlE5OEWw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=fFH7C0L/wjTyAZdweQgMAjh8VT6553lQ23JF4nNNQeKsvXd7TcD3QlXEhEPN4coLrX4aTBKaqf1ePk/HQ+9nwF/eyJ+J9VfZWbHAWCu8WC6TJyIPeviO2RD7/emPHBN2UbGy1Ve6qYcijFqUWVXdo4kgdtnHlN1USrow3Zvuxpk=
Received: by 10.82.112.6 with SMTP id k6mr2424151buc.77.1209042927324;
        Thu, 24 Apr 2008 06:15:27 -0700 (PDT)
Received: by 10.82.191.6 with HTTP; Thu, 24 Apr 2008 06:15:27 -0700 (PDT)
Message-ID: <359a92830804240615g7e03a42bo3ecd2d711946e73b@mail.gmail.com>
Date: Thu, 24 Apr 2008 09:15:27 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Unable to add more than 1 document to Index
In-Reply-To: <2cda2fc90804231943i25309400o658448683beb4f86@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6551_1121103.1209042927331"
References: <2cda2fc90804231942m7e014c20i3a4641148d09f3ec@mail.gmail.com>
	 <2cda2fc90804231943i25309400o658448683beb4f86@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_6551_1121103.1209042927331
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Where are you getting your doc from? I see no

Document doc = new Document()

line in your code. So it's re-using an old one?

Best
Erick

On Wed, Apr 23, 2008 at 10:43 PM, Hasan Diwan <hasan.diwan@gmail.com> wrote:

>                writer = new IndexWriter(indexLocation, new
> StandardAnalyzer(), true);
>                String string = request.getParameter("text");
>                this.log("Text is "+string);
>                Date date = new Date();
>                String dateString = DateTools.dateToString(date,
> DateTools.Resolution.MINUTE);
>                this.log("Date is "+dateString);
>                Field allField = new Field("all", string, Field.Store.YES,
>  Field.Index.TOKENIZED);
>                Field dateField = new Field("date", dateString,
> Field.Store.YES,
>  Field.Index.UN_TOKENIZED);
>                doc.add(allField);
>                doc.add(dateField);
>                writer.addDocument(doc);
>                writer.optimize();
>                writer.close();
>
>  This code is supposed to get information from a JSP (and does) and put
>  it into a lucene index (and does) in a new document (and does not).
>  This is apparent when I query it using luke and the default lucene web
>  application. Any suggestions or pointers to what to do about this
>  would be eternally helpful? Thanks in advance!
> --
> Cheers,
> Hasan Diwan <hasan.diwan@gmail.com>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_6551_1121103.1209042927331--

From java-user-return-33780-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 24 17:00:24 2008
Return-Path: <java-user-return-33780-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16820 invoked from network); 24 Apr 2008 17:00:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Apr 2008 17:00:24 -0000
Received: (qmail 51106 invoked by uid 500); 24 Apr 2008 17:00:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51077 invoked by uid 500); 24 Apr 2008 17:00:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51066 invoked by uid 99); 24 Apr 2008 17:00:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Apr 2008 10:00:18 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of hasan.diwan@gmail.com designates 64.233.170.189 as permitted sender)
Received: from [64.233.170.189] (HELO rn-out-0910.google.com) (64.233.170.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Apr 2008 16:59:35 +0000
Received: by rn-out-0910.google.com with SMTP id j40so1429122rnf.4
        for <java-user@lucene.apache.org>; Thu, 24 Apr 2008 09:59:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=1UKavBpQTxiRE6gkJKp5mkvJgqLiCONB+0alzQvU/v8=;
        b=H6Qwm4TblGBfoCCup/VO6wWYLq7eMhGrbNgb334/Sj67Wnn11smSdeFSrXMWHR7Y1Qjhu41qwC873UtD/d2O41s9c+VJDYYlcZKsCd+jxOTSukbOvi0LxEsoXG7t/v/rozIYqGHcnjinwgfZmYntZyb8RjdHjHEm9rGVw19v4eg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=G+z9OmEgRhLJboWieorYQ8bgJN/g8wdiGWTQhFelZVbEhN6HvZFtJIE/RvxfsXXXJTRn45+0bAjmsV9XbB5RQypjyDXgxpS95KfPDSFps5Hj5osvN3oD0ccBCfX4YBKXsbavIaBSc0XSZo5wDP4TTEJghjR/YDYNr8ZEI8CktGw=
Received: by 10.114.181.1 with SMTP id d1mr2085134waf.171.1209056388236;
        Thu, 24 Apr 2008 09:59:48 -0700 (PDT)
Received: by 10.115.58.6 with HTTP; Thu, 24 Apr 2008 09:59:47 -0700 (PDT)
Message-ID: <2cda2fc90804240959p6044b652jc4f8d1ea8a74052d@mail.gmail.com>
Date: Thu, 24 Apr 2008 09:59:47 -0700
From: "Hasan Diwan" <hasan.diwan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Unable to add more than 1 document to Index
In-Reply-To: <359a92830804240615g7e03a42bo3ecd2d711946e73b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <2cda2fc90804231942m7e014c20i3a4641148d09f3ec@mail.gmail.com>
	 <2cda2fc90804231943i25309400o658448683beb4f86@mail.gmail.com>
	 <359a92830804240615g7e03a42bo3ecd2d711946e73b@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

The problem was that I was using the 3-parameter constructor for
IndexWriter when I should have been using the 2-parameter one. It
works fine now, many thanks for your kind assistance.
-- 
Cheers,
Hasan Diwan <hasan.diwan@gmail.com>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33781-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 25 04:36:38 2008
Return-Path: <java-user-return-33781-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15670 invoked from network); 25 Apr 2008 04:36:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Apr 2008 04:36:35 -0000
Received: (qmail 26927 invoked by uid 500); 25 Apr 2008 04:36:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26892 invoked by uid 500); 25 Apr 2008 04:36:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26881 invoked by uid 99); 25 Apr 2008 04:36:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Apr 2008 21:36:23 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of anshumg@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Apr 2008 04:35:27 +0000
Received: by py-out-1112.google.com with SMTP id z74so4021818pyg.9
        for <java-user@lucene.apache.org>; Thu, 24 Apr 2008 21:35:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=SmV8gduDTAnblQgIu5JgDHmwD7r+rgeLYfVfyaXnxZo=;
        b=FvQCPY+o/Jib1aSGMcFsksCJng2yUOKv5Kqioo7Y2sexp/f0tcSMqjc4OrGuQI0ODGaKHDqnDhe/SOnMs+m7nhuJEeJdROyOCxXHTqZQh9wCdeyd8jDGyGy6SbIe/Esp4ru4hQQt6EvmnosXFWtenTvHZzyyPnr+LQdXDu5YUb4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=alOJfRxrMjiaN49gEuv0TM+x64zDmnNc85M4uMIdEOkL/wpDrWchWyhO0V90BzG5QcHkY6kqKr5UTXW2k/IJIcN5pP6L4uVz4ktP+FzKAOIPgAYG8+xKXYTAZCisfd6u6swputQAiMMr3ritU4ukhmwRJhRqg7dJrdy3xExLmrc=
Received: by 10.114.178.13 with SMTP id a13mr450176waf.182.1209098145294;
        Thu, 24 Apr 2008 21:35:45 -0700 (PDT)
Received: by 10.114.134.19 with HTTP; Thu, 24 Apr 2008 21:35:44 -0700 (PDT)
Message-ID: <867513fe0804242135t56ac3470tbb9abb305957971d@mail.gmail.com>
Date: Fri, 25 Apr 2008 10:05:44 +0530
From: Anshum <anshumg@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Binding lucene instance/threads to a particular processor(or core)
In-Reply-To: <5e76f3840804231217l225d7ecbof7940a8088fee130@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/mixed; 
	boundary="----=_Part_2690_15639102.1209098145278"
References: <5e76f3840804220539h5b19af2avb3972d3234f8847b@mail.gmail.com>
	 <002301c8a49c$0e215ca0$970fda80@campus.net.ucsf.edu>
	 <5e76f3840804221049y240b44ceo23ac961e92777d74@mail.gmail.com>
	 <867513fe0804222133t74a4e410l3e0482859e3c9ab7@mail.gmail.com>
	 <5e76f3840804231217l225d7ecbof7940a8088fee130@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2690_15639102.1209098145278
Content-Type: multipart/alternative; 
	boundary="----=_Part_2691_26943019.1209098145278"

------=_Part_2691_26943019.1209098145278
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Glen,

After starting the JVM as you suggested, the daemon (actually the JVM)
crashed unexpectedly.
I didn't really understand the reason behind it from the log (attached),
could you just have a look and help me deciphering the same.

Thanks,
Anshum



On Thu, Apr 24, 2008 at 12:47 AM, Glen Newton <glen.newton@gmail.com> wrote:

> Hi Anshum,
>
> 2008/4/23 Anshum <anshumg@gmail.com>:
> > Hi Glen,
> >
> >  As far as stats for index/search are concerned, here they are:
> >  * Yes, it is a web based application
> >  * I am currently facing issues when the number of concurrent searches
> goes
> >  high. The search is not able to handle over 2.5 searches per second.
> What is the OS, hardware etc you are using?
>
> I am assuming you are only opening one instance of IndexSearcher for
> all of your threads/queries (I would do it in the servlet init()
> method) to use, as indicated in
>
> http://lucene.apache.org/java/2_3_1/api/org/apache/lucene/search/IndexSearcher.html
>
> >  * JVM command line parameters: -server mode; Max heap size 2GB (As it is
> a
> >  32 bit machine/OS and that is the limit in the case)
> What JVM/version?
>
> Have you tried running a profiler to see what is happening or even
> jconsole (add  -Dcom.sun.management.jmxremote to your command line
> parameters and (in Linux at least) run jconsole after the JVM has
> started.
>
> A general suggestion:
>  -XX:+AggressiveOpts -XX:+ScavengeBeforeFullGC   -Xms2000m
> -XX:+UseConcMarkSweepGC
>
> Although the garbage collection depends on your configuration.
>
> >  * Performance expectations :
> >   * Mean search time :1-2 seconds (though that is a lot considering that
> I
> >  have tried other engines, though with smaller indexes and they seem to
> have
> >  sub 0.01s searching time)
>
> Yes, I am also surprised by this poor performance.
>
> >  * No, I do not store any fields.
> >  * Yes, I am using multiple machines ( more than a couple ).serving the
> same
> >  index; a little more than just a vanilla load balancing mechanism;
> sending
> >  similar requests to the same server to better OS level caching
> >  * We do not index and search on the same machine, so in that case, I
> would
> >  not think that changing the priority of these threads would matter. In
> other
> >  words, there is nothing but search that happens on the search server. If
> >  that is what you meant when you wrote about increasing the thead
> priority.
>
> Your servlet environment has many threads that have to do a lot of
> things before they get around to the part of your code that does the
> searching. Once they get to the search part, you want them to have
> higher priority than the threads that are handling requests much
> further back in the servlet pipeline. So set the thread priority
> higher when it gets to your code. Of course you would need to test to
> see the impact on performance in your particular case.
>
> >
> >  I had already started trying the TPE and  guess it would provide a lot
> of
> >  improvement but 'm looking for other ways as well ! :)
>
> -glen
>
>
> >  --
> >  Anshum
> >
> >
> >
> >  On Tue, Apr 22, 2008 at 11:19 PM, Glen Newton <glen.newton@gmail.com>
> wrote:
> >
> >  > So even if you only have one index, this is the way to go to manage
> >  > this kind of problem.
> >  >
> >  > Looking at the implementation and having used ThreadPoolExecutor (TPE)
> >  > a lot, I would make the following suggestions for this class so as to
> >  > better support this particular use case:
> >  > Better access to the configuration of the TPE is needed: the ability
> >  > to choose the number of threads (pools size and max pool size), the
> >  > type and nature of the queue, etc. Also, the default behaviour of TPE
> >  > is to throw an exception when a job is submitted and the queue is
> >  > full: throwing an exception is expensive, especially when dozens or
> >  > hundreds of searches are being rejected and many exceptions are
> >  > occurring in a high load situation. Instead, being able to set the
> >  > RejectedExecutionHandler on the TPE would allow for a graceful
> >  > handling of rejected queries (feedback to user application, etc).
> >  > Also, TPE allows for a custom ThreadFactory, which I use to produce
> >  > threads with the highest priority to do the searching.
> >  >
> >  > Right now the implementation sets the #threads and queue size as a
> >  > function of the number of Searchables, which is reasonable for this
> >  > use case. But it would generalize better if these were a function of
> >  > the number of cores on the machine, or some combination.
> >  >
> >  > That said, I would suggest having adding the ability to set the
> >  > ThreadPoolExecutor completely, with a getter/setter. This would allow
> >  > this class to be useful beyond the use case of multiple indexes,
> >  > becoming more generalizable to a number of use cases including
> >  > allowing it to support the use case of one (or more indexes) and a
> >  > high work load of queries that need to be managed. It could use the
> >  > same defaults if the TPE is not set externally (is null).
> >  >
> >  > -Glen
> >  >
> >  > 2008/4/22 Renaud Waldura <renaud.waldura@library.ucsf.edu>:
> >  > > > one solution is to set-up a ThreadPoolExecutor[2] with a fixed
> >  > >  > number of threads and a limited queue size (use a bound
> >  > BlockingQueue[3])
> >  > >
> >  > >  Yes, this is precisely how the ConcurrentMultiSearcher works.
> >  > >  https://issues.apache.org/jira/browse/LUCENE-423
> >  > >
> >  > >
> >  > >
> >  > >
> >  > >  -----Original Message-----
> >  > >  From: Glen Newton [mailto:glen.newton@gmail.com]
> >  > >  Sent: Tuesday, April 22, 2008 5:40 AM
> >  > >  To: java-user@lucene.apache.org
> >  > >  Subject: Re: Binding lucene instance/threads to a particular
> >  > processor(or
> >  > >  core)
> >  > >
> >  > >
> >  > >
> >  > > Anshun,
> >  > >
> >  > >  I think I am dealing with an index of similar scale: 6.4 million
> >  > records, 83
> >  > >  GB index (see [1] for more info)
> >  > >
> >  > >  I mistakenly thought from your original posting that you were
> >  > interested in
> >  > >  binding threads to processors for indexing, but it is sounding like
> you
> >  > want
> >  > >  to do this for searching. I am not sure if this would work well for
> >  > >  searching, as there is a great deal more ephemeral state. But I am
> not
> >  > sure.
> >  > >
> >  > >  With respect to handling concurrency for search, could you describe
> >  > your
> >  > >  environment better?
> >  > >  - Is it an web-base application?
> >  > >  - What sort of problems do you have now?
> >  > >  - What are your java command line parameters (heap, etc.)
> >  > >  - What are the performance expectations, i.e. average search < N1
> >  > seconds;
> >  > >  median search time < N2 seconds
> >  > >  - Are you storing any fields and if so, do you need to store so
> many?
> >  > >  - Do you have the choice of serving searches from multiple
> machines?
> >  > >  i.e. load balance across >1 machine; We've found this to be one of
> the
> >  > best
> >  > >  solutions for scaling;
> >  > >  - One thing that I do for both indexing and searching is that the
> >  > threads
> >  > >  that are doing these tasks I always shift their priority to MAX, so
> >  > that
> >  > >  they are run in preference to threads doing other things, like
> >  > preparing
> >  > >  Documents, etc.
> >  > >
> >  > >  If it is a web-type environment, one solution is to set-up a
> >  > >  ThreadPoolExecutor[2] with a fixed number of threads and a limited
> >  > queue
> >  > >  size (use a bound BlockingQueue[3]) . You would have to experiment
> with
> >  > the
> >  > >  numbers to get the sweet-spot for your situation.
> >  > >  I would suggest starting with 2 times the number processors (cores)
> and
> >  > a
> >  > >  queue of say 20. Requests are queued, but if the request cannot be
> >  > queued,
> >  > >  at least the application then knows that it is too busy and you can
> >  > give the
> >  > >  user a message "The system is too busy at this moment, please try
> again
> >  > in a
> >  > >  few seconds..." kind of thing. The advantage is also that when
> things
> >  > are
> >  > >  very busy, you have the accepted requests handled in a reasonable
> >  > amount of
> >  > >  time, and some users being told things are too busy, as opposed to
> all
> >  > the
> >  > >  requests going in and the system thrashing (and perhaps running-out
> of
> >  > >  memory at the same time) and everyone's queries being very slow.
> >  > >
> >  > >  But I would suggest setting-up a test harness to emulate your
> >  > production
> >  > >  conditions to try these things out...
> >  > >
> >  > >  -Glen
> >  > >
> >  > >  [1]
> >  >
> http://zzzoot.blogspot.com/2008/04/lucene-indexing-performance-benchmarks
> >  > >  .html
> >  > >  [2]
> >  >
> http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/ThreadPoolEx
> >  > >  ecutor.html
> >  > >  [3]
> >  >
> http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/BlockingQueu
> >  > >  e.html
> >  > >
> >  > >
> >  > >  2008/4/22 Anshum <anshumg@gmail.com>:
> >  > >  > The paper seems pretty good but I am still wondering if there was
> a
> >  > >  > way to  achieve this through the command line parameters. I'm
> just
> >  > >  > trying this to  optimize the code, if this works, would let all
> know
> >  > >  > else would keep  everyone informed :)  Any other suggestions for
> >  > >  > handling a concurrency of over 7 search requests  per second for
> an
> >  > >  > index size of over 15Gigs containing over 13 million  records?
> >  > >  >  Also, could someone help me with obtaining a 'index size' -
> >  > >  > 'concurrency' -  'processor power' - 'memory' relationship
> formula
> >  > (or
> >  > >  something similar)?
> >  > >  >
> >  > >  >  --
> >  > >  >  Anshum
> >  > >  >
> >  > >  >
> >  > >  >
> >  > >  >
> >  > >  >  On Tue, Apr 22, 2008 at 3:55 AM, Antony Bowesman <
> adb@teamware.com>
> >  > >  wrote:
> >  > >  >
> >  > >  >  > That paper from 1997 is pretty old, but mirrors our
> experiences in
> >  > >  > those  > days. Then, we used Solaris processor sets to really
> improve
> >  > >  > performance by  > binding one of our processes to a particular
> CPU
> >  > >  > while leaving the other  > CPUs to manage the thread intensive
> work.
> >  > >  >  >
> >  > >  >  > You can bind processes/LWPs to a CPU on Solaris with psrset.
> >  > >  >  >
> >  > >  >  > The Solaris thread model in the late '90s was also a
> significant
> >  > >  > factor in  > performance of multi-threaded programs.  The default
> >  > >  > thread library in  > Solaris 8 implemented a MxN unbound thread
> model
> >  > >  > (threads/LWPS).  In those  > days we found that it did not
> perform
> >  > >  > well, so used the bound thread model  > (i.e. 1:1) where a
> Solaris
> >  > >  > thread was bound permanently to an LWP.  That  > improved
> performance
> >  > >  > a lot.  In Solaris 8, Sun had what they called the  > 'alternate'
> >  > >  > thread library (T2) around 2000, which became the default  >
> library
> >  > >  > in Solaris 9, and implemented a 1:1 model of Solaris threads to
>  >
> >  > LWPs.
> >  > >  That new library had dramatic performance improvements over the
> old.
> >  > >  >  >
> >  > >  >  > Some background info for Java and threading  >  >
> >  > >  >
> http://java.sun.com/j2se/1.5.0/docs/guide/vm/thread-priorities.html
> >  > >  >  >
> >  > >  >  > Antony
> >  > >  >  >
> >  > >  >  >
> >  > >  >  >
> >  > >  >  > Glen Newton wrote:
> >  > >  >  >
> >  > >  >  > > I realised that not everyone on this list might be able to
> >  > access
> >  > >  > the  > > IEEE paper I pointed-out, so I will include the abstract
> and
> >  > >  > some  > > paragraphs from the paper which I have included below.
> >  > >  >  > >
> >  > >  >  > > Also of interest (and should be available to all): Fedorova
> et
> >  > al.
> >  > >  >  > > 2005. Performance of Multithreaded Chip Multiprocessors And
>  > >
> >  > >  > Implications For Operating System Design. Usenix 2005.
> >  > >  >  > > http://www.eecs.harvard.edu/margo/papers/usenix05/paper.pdf
> >  > >  >  > > "Abstract: We investigated how operating system design
> should be
> >  > >  > > > adapted for multithreaded chip multiprocessors (CMT) - a new
>  > >
> >  > >  > generation of processors that exploit thread-level parallelism to
> >  > mask
> >  > >  > > > the memory latency in modern workloads. We  > > determined
> that
> >  > >  > the L2 cache is a critical shared resource on CMT and  > > that
> an
> >  > >  > insufficient amount of L2 cache can undermine the ability to  > >
> >  > hide
> >  > >  > memory latency on these processors. To use the L2 cache as  > >
> >  > >  > efficiently as possible, we propose an L2-conscious scheduling  >
> >
> >  > >  > algorithm and quantify its performance potential. Using this
> >  > algorithm
> >  > >  > > > it is possible to reduce miss ratios in the L2 cache by
> 25-37%
> >  > and
> >  > >  > > > improve processor throughput by 27-45%."
> >  > >  >  > >
> >  > >  >  > >
> >  > >  >  > > From Lundberg, L. 1997:
> >  > >  >  > > Abstract: "The default scheduling algorithm in Solaris and
> other
> >  > >  > > > operating systems may result in frequent relocation of
> threads at
> >  > >  > > > run-time. Excessive thread relocation cause  > > poor memory
> >  > >  > performance. This can be avoided by binding threads to  > >
> >  > >  > processors. However, binding threads to processors may result in
> an
> >  >  >
> >  > >  > > unbalanced load. By considering a previously obtained
> theoretical
> >  >  >
> >  > >  > > result and by evaluating a set of multithreaded Solaris  > >
> >  > >  > programs using a multiprocessor with 8 processors, we are able to
>  >
> >  > >
> >  > >  > bound the maximum performance loss due to binding threads, The  >
> >
> >  > >  > theoretical result is also recapitulated. By evaluating another
> set
> >  > of
> >  > >  > > > multithreaded programs, we show that the gain of binding
> threads
> >  > >  > to  > > processors may be substantial, particularly for programs
> with
> >  > >  > fine  > > grained parallelism."
> >  > >  >  > >
> >  > >  >  > > First paragraph: "The thread concept in Solaris [3][5] and
> other
> >  > >  > > > operating systems makes it possible to write multithreaded
> >  > >  > programs,  > > which can be executed in parallel on a
> multiprocessor.
> >  > >  > Previous  > > experience from real world programs [4] show that,
> >  > using
> >  > >  > the default  > > scheduling algorithm in Solaris, threads are
> >  > >  > frequently relocated from  > > one processor  > > to another at
> >  > >  > run-time. After each such relocation, the code and data  > >
> >  > >  > associated with the relocated thread is moved from the cache
> memory
> >  > of
> >  > >  > > > the 0113 processor to the cache of the new processor. This
> >  > reduces
> >  > >  > the  > > performance. Run-time relocation of threads to
> processors
> >  > can
> >  > >  > also  > > result in unpredictable response times. This is a
> problem
> >  > in
> >  > >  > systems  > > which operate in a real-time environment. In order
> to
> >  > >  > avoid poor  > > memory performance and unpredictable real-time
> >  > >  > behaviour due to  > > frequent thread relocation, threads can be
> >  > bound
> >  > >  > to processors using  > > the processor-bind directive [3] [5].
> The
> >  > >  > major problem with binding  > > threads is that one can end up
> with
> >  > an
> >  > >  > unbalanced load, i.e. some  > > processors may be extremely busy
> >  > >  > during some time periods while other  > > processors are idle."
> >  > >  >  > >
> >  > >  >  > > -Glen
> >  > >  >  > >
> >  > >  >  > > On 21/04/2008, Glen Newton <glen.newton@gmail.com> wrote:
> >  > >  >  > >
> >  > >  >  > > > And this discussion on bound threads may also shed light
> on
> >  > things:
> >  > >  >  > > >
> >  > >  >  > > >
> >  > >  >
> >  >
> http://coding.derkeiler.com/Archive/Java/comp.lang.java.programmer/200
> >  > >  > 7-11/msg02801.html
> >  > >  >  > > >
> >  > >  >  > > >
> >  > >  >  > > >  -Glen
> >  > >  >  > > >
> >  > >  >  > > >
> >  > >  >  > > >  On 21/04/2008, Glen Newton <glen.newton@gmail.com>
> wrote:
> >  > >  >  > > >  > BInding threads to processors - in many situations -
> >  > >  > improves  > > >  >  throughput by reducing memory overhead. When
> a
> >  > >  > thread is running  > > > on a  > > >  >  core, its state is
> local; if
> >  > >  > it is timeshared-out and either 1)  > > >  >  swapped back in on
> the
> >  > >  > same core, it is likely that there will be  > > >  the  > > >  >
> >  > >  > core's L1 cache; or 2) onto another core, there will not be a  >
> > >
> >  > >  > cache  > > >  >  hit and the state will have to be fetched from
> L2 or
> >  > >  > main memory,  > > >  >  incurring a performance hit, esp in the
> >  > >  > latter. See Lundberg, L.
> >  > >  >  > > > 1997.
> >  > >  >  > > >  >  Evaluating the Performance Implications of Binding
> Threads
> >  > >  > to  > > >  >  Processors. 393.
> >  > >  >  > > > http://ieeexplore.ieee.org/iel3/5020/13768/00634520.pdf
> >  > >  >  > > >  >  for more info.
> >  > >  >  > > >  >
> >  > >  >  > > >  >  If you are using JVM on Solaris on SPARC, you should
> take
> >  > a
> >  > >  > look  > > > at  > > >  >  the following links for tuning (the Sun
> JVM
> >  > >  > on Solaris SPARC has  > > > many  > > >  >  more performance
> tuning
> >  > >  > parameters available), including  > > > threading:
> >  > >  >  > > >  >  -
> http://java.sun.com/docs/hotspot/threads/threads.html
> >  > >  >  > > >  >  -
> >  > >  >  > > >
> >  > >  >
> http://java.sun.com/j2se/1.5.0/docs/guide/vm/thread-priorities.html
> >  > >  >  > > >  >  -
> >  > >  >  > > >
> >  > >  >
> >  >
> http://www-1.ibm.com/support/docview.wss?rs=180&context=SSEQTP&uid=swg
> >  > >  > 21107291  > > >  >  -
> >  > >  > http://java.sun.com/javase/technologies/performance.jsp
> >  > >  >  > > >  >
> >  > >  >  > > >  >
> >  > >  >  > > >  >  -Glen
> >  > >  >  > > >  >
> >  > >  >  > > >  >
> >  > >  >  > > >  >
> >  > >  >  > > >  >
> >  > >  >  > > >  >
> >  > >  >  > > >  >
> >  > >  >  > > >  >
> >  > >  >  > > >  >  On 21/04/2008, Ulf Dittmer <udittmer@yahoo.com>
> wrote:
> >  > >  >  > > >  >  > This sounds odd. Why would restricting it to a
> single  >
> >  > >  > > >  >  >  core improve performance? The point of using multiple
>  > >
> >  > >  > >  >  >  cores (and multiple threads) is to improve performance
>  > >
> >  > >
> >  > >  > >  >  isn't it? I'd leave thread scheduling decisions to the  > >
> >
> >  >  >
> >  > >  > >  JVM. Plus, I don't think there is anything in Java to  > > >
>  >  >
> >  > >  > facilitate this (short of using JNI).
> >  > >  >  > > >  >  >
> >  > >  >  > > >  >  >  Are you talking about indexing or searching? You
> may  >
> >  > >  > > >  >  >  be able to use multiple parallel threads to improve  >
> > >
> >  > >  > >  >  indexing performance. I don't think Lucene uses  > > >  >
>  >
> >  > >  > multi-threading for searching; not unless you have  > > >  >  >
> >  > >  > multiple indices, anyway.
> >  > >  >  > > >  >  >
> >  > >  >  > > >  >  >  Ulf
> >  > >  >  > > >  >  >
> >  > >  >  > > >  >  >
> >  > >  >  > > >  >  >
> >  > >  >  > > >  >  >  --- Anshum <anshumg@gmail.com> wrote:
> >  > >  >  > > >  >  >
> >  > >  >  > > >  >  >  > Hi,
> >  > >  >  > > >  >  >  >
> >  > >  >  > > >  >  >  > I have been trying to bind my lucene instance
> (JVM -
> >  > >  > > > >  >  >  > Sun Hotspot*) to a  > > >  >  >  > particular core
> so
> >  > >  > as to improve the performance. Is  > > >  >  >  > there a way to
> do
> >  > so
> >  > >  > or  > > >  >  >  > is there support in lucene to explicitly
> control
> >  > >  > the  > > >  >  >  > thread - processor  > > >  >  >  > linkup?
> >  > >  >  > > >  >  >  >
> >  > >  >  > > >  >  >  > --
> >  > >  >  > > >  >  >  > --
> >  > >  >  > > >  >  >  > The facts expressed here belong to everybody, the
>  >
> >  > >
> >  > >  > >  >  >  > opinions to me.
> >  > >  >  > > >  >  >  > The distinction is yours to draw............
> >  > >  >  > > >  >  >  >
> >  > >  >  > > >  >  >
> >  > >  >  > > >  >  >
> >  > >  >  > > >  >  >
> >  > >  >  > > >  >  >
> >  > >  >  > > >  >  >
> >  > >  >  > > >
> >  > >  >
> >  > ______________________________________________________________________
> >  > >  > ______________  > > >  >  >  Be a better friend, newshound, and
>  > >
> >  > >
> >  > >  > >  >  know-it-all with Yahoo! Mobile.  Try it now.
> >  > >  >  > > >
> http://mobile.yahoo.com/;_ylt=Ahu06i62sR8HDtDypao8Wcj9tAcJ
> >  > >  >  > > >  >  >
> >  > >  >  > > >  >  >
> >  > >  >  > > >
> >  > >  >
> ---------------------------------------------------------------------
> >  > >  >  > > >  >  >  To unsubscribe, e-mail:
> >  > >  > java-user-unsubscribe@lucene.apache.org
> >  > >  >  > > >  >  >  For additional commands, e-mail:
> >  > >  >  > > > java-user-help@lucene.apache.org  > > >  >  >  > > >  >
>  >  >
> >  > >
> >  > >  > >  >  > > >  >  > > >  >  > > >  > --  > > >  >  > > >  >  -  > >
> >
> >  >  >
> >  > >  > > > >  > > >  > > >  > > > --  > > >  > > >  -  > > >  > > >  > >
>  >
> >  > >
> >  > >  > >  >
> >  > >  >
> ---------------------------------------------------------------------
> >  > >  >  > To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> >  > >  >  > For additional commands, e-mail:
> java-user-help@lucene.apache.org
> >  > >  > >  >
> >  > >  >
> >  > >  >
> >  > >  >  --
> >  > >  >
> >  > >  >
> >  > >  > --
> >  > >  >  The facts expressed here belong to everybody, the opinions to
> me.
> >  > >  >  The distinction is yours to draw............
> >  > >  >
> >  > >
> >  > >
> >  > >
> >  > >  --
> >  > >
> >  > >  -
> >  > >
> >  > >
> >  > >
> >  > >
>  ---------------------------------------------------------------------
> >  > >  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >  > >  For additional commands, e-mail: java-user-help@lucene.apache.org
> >  > >
> >  > >
> >  >
> >  >
> >  >
> >  > --
> >  >
> >  > -
> >  >
> >  > ---------------------------------------------------------------------
> >  > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >  > For additional commands, e-mail: java-user-help@lucene.apache.org
> >  >
> >  >
> >
> >
> >  --
> >  --
> >  The facts expressed here belong to everybody, the opinions to me.
> >  The distinction is yours to draw............
> >
>
>
>
> --
>
> -
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
--
The facts expressed here belong to everybody, the opinions to me.
The distinction is yours to draw............

------=_Part_2691_26943019.1209098145278
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Glen,<br><br>After starting the JVM as you suggested, the daemon (actually the JVM) crashed unexpectedly.<br>I
didn&#39;t really understand the reason behind it from the log (attached),
could you just have a look and help me deciphering the same.<br>
<br>
Thanks,<br>
Anshum<br clear="all">
<br><br><br><div class="gmail_quote">On Thu, Apr 24, 2008 at 12:47 AM, Glen Newton &lt;<a href="mailto:glen.newton@gmail.com">glen.newton@gmail.com</a>&gt; wrote:<br><blockquote class="gmail_quote" style="border-left: 1px solid rgb(204, 204, 204); margin: 0pt 0pt 0pt 0.8ex; padding-left: 1ex;">
Hi Anshum,<br>
<br>
2008/4/23 Anshum &lt;<a href="mailto:anshumg@gmail.com">anshumg@gmail.com</a>&gt;:<br>
<div class="Ih2E3d">&gt; Hi Glen,<br>
&gt;<br>
&gt; &nbsp;As far as stats for index/search are concerned, here they are:<br>
&gt; &nbsp;* Yes, it is a web based application<br>
&gt; &nbsp;* I am currently facing issues when the number of concurrent searches goes<br>
&gt; &nbsp;high. The search is not able to handle over 2.5 searches per second.<br>
</div>What is the OS, hardware etc you are using?<br>
<br>
I am assuming you are only opening one instance of IndexSearcher for<br>
all of your threads/queries (I would do it in the servlet init()<br>
method) to use, as indicated in<br>
<a href="http://lucene.apache.org/java/2_3_1/api/org/apache/lucene/search/IndexSearcher.html" target="_blank">http://lucene.apache.org/java/2_3_1/api/org/apache/lucene/search/IndexSearcher.html</a><br>
<div class="Ih2E3d"><br>
&gt; &nbsp;* JVM command line parameters: -server mode; Max heap size 2GB (As it is a<br>
&gt; &nbsp;32 bit machine/OS and that is the limit in the case)<br>
</div>What JVM/version?<br>
<br>
Have you tried running a profiler to see what is happening or even<br>
jconsole (add &nbsp;-Dcom.sun.management.jmxremote to your command line<br>
parameters and (in Linux at least) run jconsole after the JVM has<br>
started.<br>
<br>
A general suggestion:<br>
&nbsp;-XX:+AggressiveOpts -XX:+ScavengeBeforeFullGC &nbsp; -Xms2000m<br>
-XX:+UseConcMarkSweepGC<br>
<br>
Although the garbage collection depends on your configuration.<br>
<div class="Ih2E3d"><br>
&gt; &nbsp;* Performance expectations :<br>
&gt; &nbsp; * Mean search time :1-2 seconds (though that is a lot considering that I<br>
&gt; &nbsp;have tried other engines, though with smaller indexes and they seem to have<br>
&gt; &nbsp;sub 0.01s searching time)<br>
<br>
</div>Yes, I am also surprised by this poor performance.<br>
<div class="Ih2E3d"><br>
&gt; &nbsp;* No, I do not store any fields.<br>
&gt; &nbsp;* Yes, I am using multiple machines ( more than a couple ).serving the same<br>
&gt; &nbsp;index; a little more than just a vanilla load balancing mechanism; sending<br>
&gt; &nbsp;similar requests to the same server to better OS level caching<br>
&gt; &nbsp;* We do not index and search on the same machine, so in that case, I would<br>
&gt; &nbsp;not think that changing the priority of these threads would matter. In other<br>
&gt; &nbsp;words, there is nothing but search that happens on the search server. If<br>
&gt; &nbsp;that is what you meant when you wrote about increasing the thead priority.<br>
<br>
</div>Your servlet environment has many threads that have to do a lot of<br>
things before they get around to the part of your code that does the<br>
searching. Once they get to the search part, you want them to have<br>
higher priority than the threads that are handling requests much<br>
further back in the servlet pipeline. So set the thread priority<br>
higher when it gets to your code. Of course you would need to test to<br>
see the impact on performance in your particular case.<br>
<div class="Ih2E3d"><br>
&gt;<br>
&gt; &nbsp;I had already started trying the TPE and &nbsp;guess it would provide a lot of<br>
&gt; &nbsp;improvement but &#39;m looking for other ways as well ! :)<br>
<br>
</div><font color="#888888">-glen<br>
</font><div><div></div><div class="Wj3C7c"><br>
<br>
&gt; &nbsp;--<br>
&gt; &nbsp;Anshum<br>
&gt;<br>
&gt;<br>
&gt;<br>
&gt; &nbsp;On Tue, Apr 22, 2008 at 11:19 PM, Glen Newton &lt;<a href="mailto:glen.newton@gmail.com">glen.newton@gmail.com</a>&gt; wrote:<br>
&gt;<br>
&gt; &nbsp;&gt; So even if you only have one index, this is the way to go to manage<br>
&gt; &nbsp;&gt; this kind of problem.<br>
&gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; Looking at the implementation and having used ThreadPoolExecutor (TPE)<br>
&gt; &nbsp;&gt; a lot, I would make the following suggestions for this class so as to<br>
&gt; &nbsp;&gt; better support this particular use case:<br>
&gt; &nbsp;&gt; Better access to the configuration of the TPE is needed: the ability<br>
&gt; &nbsp;&gt; to choose the number of threads (pools size and max pool size), the<br>
&gt; &nbsp;&gt; type and nature of the queue, etc. Also, the default behaviour of TPE<br>
&gt; &nbsp;&gt; is to throw an exception when a job is submitted and the queue is<br>
&gt; &nbsp;&gt; full: throwing an exception is expensive, especially when dozens or<br>
&gt; &nbsp;&gt; hundreds of searches are being rejected and many exceptions are<br>
&gt; &nbsp;&gt; occurring in a high load situation. Instead, being able to set the<br>
&gt; &nbsp;&gt; RejectedExecutionHandler on the TPE would allow for a graceful<br>
&gt; &nbsp;&gt; handling of rejected queries (feedback to user application, etc).<br>
&gt; &nbsp;&gt; Also, TPE allows for a custom ThreadFactory, which I use to produce<br>
&gt; &nbsp;&gt; threads with the highest priority to do the searching.<br>
&gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; Right now the implementation sets the #threads and queue size as a<br>
&gt; &nbsp;&gt; function of the number of Searchables, which is reasonable for this<br>
&gt; &nbsp;&gt; use case. But it would generalize better if these were a function of<br>
&gt; &nbsp;&gt; the number of cores on the machine, or some combination.<br>
&gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; That said, I would suggest having adding the ability to set the<br>
&gt; &nbsp;&gt; ThreadPoolExecutor completely, with a getter/setter. This would allow<br>
&gt; &nbsp;&gt; this class to be useful beyond the use case of multiple indexes,<br>
&gt; &nbsp;&gt; becoming more generalizable to a number of use cases including<br>
&gt; &nbsp;&gt; allowing it to support the use case of one (or more indexes) and a<br>
&gt; &nbsp;&gt; high work load of queries that need to be managed. It could use the<br>
&gt; &nbsp;&gt; same defaults if the TPE is not set externally (is null).<br>
&gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; -Glen<br>
&gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; 2008/4/22 Renaud Waldura &lt;<a href="mailto:renaud.waldura@library.ucsf.edu">renaud.waldura@library.ucsf.edu</a>&gt;:<br>
&gt; &nbsp;&gt; &gt; &gt; one solution is to set-up a ThreadPoolExecutor[2] with a fixed<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; number of threads and a limited queue size (use a bound<br>
&gt; &nbsp;&gt; BlockingQueue[3])<br>
&gt; &nbsp;&gt; &gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;Yes, this is precisely how the ConcurrentMultiSearcher works.<br>
&gt; &nbsp;&gt; &gt; &nbsp;<a href="https://issues.apache.org/jira/browse/LUCENE-423" target="_blank">https://issues.apache.org/jira/browse/LUCENE-423</a><br>
&gt; &nbsp;&gt; &gt;<br>
&gt; &nbsp;&gt; &gt;<br>
&gt; &nbsp;&gt; &gt;<br>
&gt; &nbsp;&gt; &gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;-----Original Message-----<br>
&gt; &nbsp;&gt; &gt; &nbsp;From: Glen Newton [mailto:<a href="mailto:glen.newton@gmail.com">glen.newton@gmail.com</a>]<br>
&gt; &nbsp;&gt; &gt; &nbsp;Sent: Tuesday, April 22, 2008 5:40 AM<br>
&gt; &nbsp;&gt; &gt; &nbsp;To: <a href="mailto:java-user@lucene.apache.org">java-user@lucene.apache.org</a><br>
&gt; &nbsp;&gt; &gt; &nbsp;Subject: Re: Binding lucene instance/threads to a particular<br>
&gt; &nbsp;&gt; processor(or<br>
&gt; &nbsp;&gt; &gt; &nbsp;core)<br>
&gt; &nbsp;&gt; &gt;<br>
&gt; &nbsp;&gt; &gt;<br>
&gt; &nbsp;&gt; &gt;<br>
&gt; &nbsp;&gt; &gt; Anshun,<br>
&gt; &nbsp;&gt; &gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;I think I am dealing with an index of similar scale: 6.4 million<br>
&gt; &nbsp;&gt; records, 83<br>
&gt; &nbsp;&gt; &gt; &nbsp;GB index (see [1] for more info)<br>
&gt; &nbsp;&gt; &gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;I mistakenly thought from your original posting that you were<br>
&gt; &nbsp;&gt; interested in<br>
&gt; &nbsp;&gt; &gt; &nbsp;binding threads to processors for indexing, but it is sounding like you<br>
&gt; &nbsp;&gt; want<br>
&gt; &nbsp;&gt; &gt; &nbsp;to do this for searching. I am not sure if this would work well for<br>
&gt; &nbsp;&gt; &gt; &nbsp;searching, as there is a great deal more ephemeral state. But I am not<br>
&gt; &nbsp;&gt; sure.<br>
&gt; &nbsp;&gt; &gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;With respect to handling concurrency for search, could you describe<br>
&gt; &nbsp;&gt; your<br>
&gt; &nbsp;&gt; &gt; &nbsp;environment better?<br>
&gt; &nbsp;&gt; &gt; &nbsp;- Is it an web-base application?<br>
&gt; &nbsp;&gt; &gt; &nbsp;- What sort of problems do you have now?<br>
&gt; &nbsp;&gt; &gt; &nbsp;- What are your java command line parameters (heap, etc.)<br>
&gt; &nbsp;&gt; &gt; &nbsp;- What are the performance expectations, i.e. average search &lt; N1<br>
&gt; &nbsp;&gt; seconds;<br>
&gt; &nbsp;&gt; &gt; &nbsp;median search time &lt; N2 seconds<br>
&gt; &nbsp;&gt; &gt; &nbsp;- Are you storing any fields and if so, do you need to store so many?<br>
&gt; &nbsp;&gt; &gt; &nbsp;- Do you have the choice of serving searches from multiple machines?<br>
&gt; &nbsp;&gt; &gt; &nbsp;i.e. load balance across &gt;1 machine; We&#39;ve found this to be one of the<br>
&gt; &nbsp;&gt; best<br>
&gt; &nbsp;&gt; &gt; &nbsp;solutions for scaling;<br>
&gt; &nbsp;&gt; &gt; &nbsp;- One thing that I do for both indexing and searching is that the<br>
&gt; &nbsp;&gt; threads<br>
&gt; &nbsp;&gt; &gt; &nbsp;that are doing these tasks I always shift their priority to MAX, so<br>
&gt; &nbsp;&gt; that<br>
&gt; &nbsp;&gt; &gt; &nbsp;they are run in preference to threads doing other things, like<br>
&gt; &nbsp;&gt; preparing<br>
&gt; &nbsp;&gt; &gt; &nbsp;Documents, etc.<br>
&gt; &nbsp;&gt; &gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;If it is a web-type environment, one solution is to set-up a<br>
&gt; &nbsp;&gt; &gt; &nbsp;ThreadPoolExecutor[2] with a fixed number of threads and a limited<br>
&gt; &nbsp;&gt; queue<br>
&gt; &nbsp;&gt; &gt; &nbsp;size (use a bound BlockingQueue[3]) . You would have to experiment with<br>
&gt; &nbsp;&gt; the<br>
&gt; &nbsp;&gt; &gt; &nbsp;numbers to get the sweet-spot for your situation.<br>
&gt; &nbsp;&gt; &gt; &nbsp;I would suggest starting with 2 times the number processors (cores) and<br>
&gt; &nbsp;&gt; a<br>
&gt; &nbsp;&gt; &gt; &nbsp;queue of say 20. Requests are queued, but if the request cannot be<br>
&gt; &nbsp;&gt; queued,<br>
&gt; &nbsp;&gt; &gt; &nbsp;at least the application then knows that it is too busy and you can<br>
&gt; &nbsp;&gt; give the<br>
&gt; &nbsp;&gt; &gt; &nbsp;user a message &quot;The system is too busy at this moment, please try again<br>
&gt; &nbsp;&gt; in a<br>
&gt; &nbsp;&gt; &gt; &nbsp;few seconds...&quot; kind of thing. The advantage is also that when things<br>
&gt; &nbsp;&gt; are<br>
&gt; &nbsp;&gt; &gt; &nbsp;very busy, you have the accepted requests handled in a reasonable<br>
&gt; &nbsp;&gt; amount of<br>
&gt; &nbsp;&gt; &gt; &nbsp;time, and some users being told things are too busy, as opposed to all<br>
&gt; &nbsp;&gt; the<br>
&gt; &nbsp;&gt; &gt; &nbsp;requests going in and the system thrashing (and perhaps running-out of<br>
&gt; &nbsp;&gt; &gt; &nbsp;memory at the same time) and everyone&#39;s queries being very slow.<br>
&gt; &nbsp;&gt; &gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;But I would suggest setting-up a test harness to emulate your<br>
&gt; &nbsp;&gt; production<br>
&gt; &nbsp;&gt; &gt; &nbsp;conditions to try these things out...<br>
&gt; &nbsp;&gt; &gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;-Glen<br>
&gt; &nbsp;&gt; &gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;[1]<br>
&gt; &nbsp;&gt; <a href="http://zzzoot.blogspot.com/2008/04/lucene-indexing-performance-benchmarks" target="_blank">http://zzzoot.blogspot.com/2008/04/lucene-indexing-performance-benchmarks</a><br>
&gt; &nbsp;&gt; &gt; &nbsp;.html<br>
&gt; &nbsp;&gt; &gt; &nbsp;[2]<br>
&gt; &nbsp;&gt; <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/ThreadPoolEx" target="_blank">http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/ThreadPoolEx</a><br>
&gt; &nbsp;&gt; &gt; &nbsp;ecutor.html<br>
&gt; &nbsp;&gt; &gt; &nbsp;[3]<br>
&gt; &nbsp;&gt; <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/BlockingQueu" target="_blank">http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/BlockingQueu</a><br>
&gt; &nbsp;&gt; &gt; &nbsp;e.html<br>
&gt; &nbsp;&gt; &gt;<br>
&gt; &nbsp;&gt; &gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;2008/4/22 Anshum &lt;<a href="mailto:anshumg@gmail.com">anshumg@gmail.com</a>&gt;:<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; The paper seems pretty good but I am still wondering if there was a<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; way to &nbsp;achieve this through the command line parameters. I&#39;m just<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; trying this to &nbsp;optimize the code, if this works, would let all know<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; else would keep &nbsp;everyone informed :) &nbsp;Any other suggestions for<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; handling a concurrency of over 7 search requests &nbsp;per second for an<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; index size of over 15Gigs containing over 13 million &nbsp;records?<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;Also, could someone help me with obtaining a &#39;index size&#39; -<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &#39;concurrency&#39; - &nbsp;&#39;processor power&#39; - &#39;memory&#39; relationship formula<br>
&gt; &nbsp;&gt; (or<br>
&gt; &nbsp;&gt; &gt; &nbsp;something similar)?<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;--<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;Anshum<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;On Tue, Apr 22, 2008 at 3:55 AM, Antony Bowesman &lt;<a href="mailto:adb@teamware.com">adb@teamware.com</a>&gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;wrote:<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; That paper from 1997 is pretty old, but mirrors our experiences in<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; those &nbsp;&gt; days. Then, we used Solaris processor sets to really improve<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; performance by &nbsp;&gt; binding one of our processes to a particular CPU<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; while leaving the other &nbsp;&gt; CPUs to manage the thread intensive work.<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; You can bind processes/LWPs to a CPU on Solaris with psrset.<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; The Solaris thread model in the late &#39;90s was also a significant<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; factor in &nbsp;&gt; performance of multi-threaded programs. &nbsp;The default<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; thread library in &nbsp;&gt; Solaris 8 implemented a MxN unbound thread model<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; (threads/LWPS). &nbsp;In those &nbsp;&gt; days we found that it did not perform<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; well, so used the bound thread model &nbsp;&gt; (i.e. 1:1) where a Solaris<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; thread was bound permanently to an LWP. &nbsp;That &nbsp;&gt; improved performance<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; a lot. &nbsp;In Solaris 8, Sun had what they called the &nbsp;&gt; &#39;alternate&#39;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; thread library (T2) around 2000, which became the default &nbsp;&gt; library<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; in Solaris 9, and implemented a 1:1 model of Solaris threads to &nbsp;&gt;<br>
&gt; &nbsp;&gt; LWPs.<br>
&gt; &nbsp;&gt; &gt; &nbsp;That new library had dramatic performance improvements over the old.<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; Some background info for Java and threading &nbsp;&gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; <a href="http://java.sun.com/j2se/1.5.0/docs/guide/vm/thread-priorities.html" target="_blank">http://java.sun.com/j2se/1.5.0/docs/guide/vm/thread-priorities.html</a><br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; Antony<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; Glen Newton wrote:<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; I realised that not everyone on this list might be able to<br>
&gt; &nbsp;&gt; access<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; the &nbsp;&gt; &gt; IEEE paper I pointed-out, so I will include the abstract and<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; some &nbsp;&gt; &gt; paragraphs from the paper which I have included below.<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; Also of interest (and should be available to all): Fedorova et<br>
&gt; &nbsp;&gt; al.<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; 2005. Performance of Multithreaded Chip Multiprocessors And &nbsp;&gt; &gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; Implications For Operating System Design. Usenix 2005.<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; <a href="http://www.eecs.harvard.edu/margo/papers/usenix05/paper.pdf" target="_blank">http://www.eecs.harvard.edu/margo/papers/usenix05/paper.pdf</a><br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &quot;Abstract: We investigated how operating system design should be<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &gt; &gt; adapted for multithreaded chip multiprocessors (CMT) - a new &nbsp;&gt; &gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; generation of processors that exploit thread-level parallelism to<br>
&gt; &nbsp;&gt; mask<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &gt; &gt; the memory latency in modern workloads. We &nbsp;&gt; &gt; determined that<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; the L2 cache is a critical shared resource on CMT and &nbsp;&gt; &gt; that an<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; insufficient amount of L2 cache can undermine the ability to &nbsp;&gt; &gt;<br>
&gt; &nbsp;&gt; hide<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; memory latency on these processors. To use the L2 cache as &nbsp;&gt; &gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; efficiently as possible, we propose an L2-conscious scheduling &nbsp;&gt; &gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; algorithm and quantify its performance potential. Using this<br>
&gt; &nbsp;&gt; algorithm<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &gt; &gt; it is possible to reduce miss ratios in the L2 cache by 25-37%<br>
&gt; &nbsp;&gt; and<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &gt; &gt; improve processor throughput by 27-45%.&quot;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; From Lundberg, L. 1997:<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; Abstract: &quot;The default scheduling algorithm in Solaris and other<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &gt; &gt; operating systems may result in frequent relocation of threads at<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &gt; &gt; run-time. Excessive thread relocation cause &nbsp;&gt; &gt; poor memory<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; performance. This can be avoided by binding threads to &nbsp;&gt; &gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; processors. However, binding threads to processors may result in an<br>
&gt; &nbsp;&gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &gt; unbalanced load. By considering a previously obtained theoretical<br>
&gt; &nbsp;&gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &gt; result and by evaluating a set of multithreaded Solaris &nbsp;&gt; &gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; programs using a multiprocessor with 8 processors, we are able to &nbsp;&gt;<br>
&gt; &nbsp;&gt; &gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; bound the maximum performance loss due to binding threads, The &nbsp;&gt; &gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; theoretical result is also recapitulated. By evaluating another set<br>
&gt; &nbsp;&gt; of<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &gt; &gt; multithreaded programs, we show that the gain of binding threads<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; to &nbsp;&gt; &gt; processors may be substantial, particularly for programs with<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; fine &nbsp;&gt; &gt; grained parallelism.&quot;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; First paragraph: &quot;The thread concept in Solaris [3][5] and other<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &gt; &gt; operating systems makes it possible to write multithreaded<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; programs, &nbsp;&gt; &gt; which can be executed in parallel on a multiprocessor.<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; Previous &nbsp;&gt; &gt; experience from real world programs [4] show that,<br>
&gt; &nbsp;&gt; using<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; the default &nbsp;&gt; &gt; scheduling algorithm in Solaris, threads are<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; frequently relocated from &nbsp;&gt; &gt; one processor &nbsp;&gt; &gt; to another at<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; run-time. After each such relocation, the code and data &nbsp;&gt; &gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; associated with the relocated thread is moved from the cache memory<br>
&gt; &nbsp;&gt; of<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &gt; &gt; the 0113 processor to the cache of the new processor. This<br>
&gt; &nbsp;&gt; reduces<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; the &nbsp;&gt; &gt; performance. Run-time relocation of threads to processors<br>
&gt; &nbsp;&gt; can<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; also &nbsp;&gt; &gt; result in unpredictable response times. This is a problem<br>
&gt; &nbsp;&gt; in<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; systems &nbsp;&gt; &gt; which operate in a real-time environment. In order to<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; avoid poor &nbsp;&gt; &gt; memory performance and unpredictable real-time<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; behaviour due to &nbsp;&gt; &gt; frequent thread relocation, threads can be<br>
&gt; &nbsp;&gt; bound<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; to processors using &nbsp;&gt; &gt; the processor-bind directive [3] [5]. The<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; major problem with binding &nbsp;&gt; &gt; threads is that one can end up with<br>
&gt; &nbsp;&gt; an<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; unbalanced load, i.e. some &nbsp;&gt; &gt; processors may be extremely busy<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; during some time periods while other &nbsp;&gt; &gt; processors are idle.&quot;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; -Glen<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; On 21/04/2008, Glen Newton &lt;<a href="mailto:glen.newton@gmail.com">glen.newton@gmail.com</a>&gt; wrote:<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt; And this discussion on bound threads may also shed light on<br>
&gt; &nbsp;&gt; things:<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; <a href="http://coding.derkeiler.com/Archive/Java/comp.lang.java.programmer/200" target="_blank">http://coding.derkeiler.com/Archive/Java/comp.lang.java.programmer/200</a><br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; 7-11/msg02801.html<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt; &nbsp;-Glen<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt; &nbsp;On 21/04/2008, Glen Newton &lt;<a href="mailto:glen.newton@gmail.com">glen.newton@gmail.com</a>&gt; wrote:<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt; &nbsp;&gt; BInding threads to processors - in many situations -<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; improves &nbsp;&gt; &gt; &gt; &nbsp;&gt; &nbsp;throughput by reducing memory overhead. When a<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; thread is running &nbsp;&gt; &gt; &gt; on a &nbsp;&gt; &gt; &gt; &nbsp;&gt; &nbsp;core, its state is local; if<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; it is timeshared-out and either 1) &nbsp;&gt; &gt; &gt; &nbsp;&gt; &nbsp;swapped back in on the<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; same core, it is likely that there will be &nbsp;&gt; &gt; &gt; &nbsp;the &nbsp;&gt; &gt; &gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; core&#39;s L1 cache; or 2) onto another core, there will not be a &nbsp;&gt; &gt; &gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; cache &nbsp;&gt; &gt; &gt; &nbsp;&gt; &nbsp;hit and the state will have to be fetched from L2 or<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; main memory, &nbsp;&gt; &gt; &gt; &nbsp;&gt; &nbsp;incurring a performance hit, esp in the<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; latter. See Lundberg, L.<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt; 1997.<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt; &nbsp;&gt; &nbsp;Evaluating the Performance Implications of Binding Threads<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; to &nbsp;&gt; &gt; &gt; &nbsp;&gt; &nbsp;Processors. 393.<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt; <a href="http://ieeexplore.ieee.org/iel3/5020/13768/00634520.pdf" target="_blank">http://ieeexplore.ieee.org/iel3/5020/13768/00634520.pdf</a><br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt; &nbsp;&gt; &nbsp;for more info.<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt; &nbsp;&gt; &nbsp;If you are using JVM on Solaris on SPARC, you should take<br>
&gt; &nbsp;&gt; a<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; look &nbsp;&gt; &gt; &gt; at &nbsp;&gt; &gt; &gt; &nbsp;&gt; &nbsp;the following links for tuning (the Sun JVM<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; on Solaris SPARC has &nbsp;&gt; &gt; &gt; many &nbsp;&gt; &gt; &gt; &nbsp;&gt; &nbsp;more performance tuning<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; parameters available), including &nbsp;&gt; &gt; &gt; threading:<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt; &nbsp;&gt; &nbsp;- <a href="http://java.sun.com/docs/hotspot/threads/threads.html" target="_blank">http://java.sun.com/docs/hotspot/threads/threads.html</a><br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt; &nbsp;&gt; &nbsp;-<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; <a href="http://java.sun.com/j2se/1.5.0/docs/guide/vm/thread-priorities.html" target="_blank">http://java.sun.com/j2se/1.5.0/docs/guide/vm/thread-priorities.html</a><br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt; &nbsp;&gt; &nbsp;-<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; <a href="http://www-1.ibm.com/support/docview.wss?rs=180&amp;context=SSEQTP&amp;uid=swg" target="_blank">http://www-1.ibm.com/support/docview.wss?rs=180&amp;context=SSEQTP&amp;uid=swg</a><br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; 21107291 &nbsp;&gt; &gt; &gt; &nbsp;&gt; &nbsp;-<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; <a href="http://java.sun.com/javase/technologies/performance.jsp" target="_blank">http://java.sun.com/javase/technologies/performance.jsp</a><br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt; &nbsp;&gt; &nbsp;-Glen<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt; &nbsp;&gt; &nbsp;On 21/04/2008, Ulf Dittmer &lt;<a href="mailto:udittmer@yahoo.com">udittmer@yahoo.com</a>&gt; wrote:<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt; &nbsp;&gt; &nbsp;&gt; This sounds odd. Why would restricting it to a single &nbsp;&gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &gt; &gt; &nbsp;&gt; &nbsp;&gt; &nbsp;core improve performance? The point of using multiple &nbsp;&gt; &gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &nbsp;cores (and multiple threads) is to improve performance &nbsp;&gt; &gt;<br>
&gt; &nbsp;&gt; &gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;isn&#39;t it? I&#39;d leave thread scheduling decisions to the &nbsp;&gt; &gt; &gt;<br>
&gt; &nbsp;&gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &gt; &nbsp;JVM. Plus, I don&#39;t think there is anything in Java to &nbsp;&gt; &gt; &gt; &nbsp;&gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; facilitate this (short of using JNI).<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt; &nbsp;&gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt; &nbsp;&gt; &nbsp;&gt; &nbsp;Are you talking about indexing or searching? You may &nbsp;&gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &gt; &gt; &nbsp;&gt; &nbsp;&gt; &nbsp;be able to use multiple parallel threads to improve &nbsp;&gt; &gt; &gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;indexing performance. I don&#39;t think Lucene uses &nbsp;&gt; &gt; &gt; &nbsp;&gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; multi-threading for searching; not unless you have &nbsp;&gt; &gt; &gt; &nbsp;&gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; multiple indices, anyway.<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt; &nbsp;&gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt; &nbsp;&gt; &nbsp;&gt; &nbsp;Ulf<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt; &nbsp;&gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt; &nbsp;&gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt; &nbsp;&gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt; &nbsp;&gt; &nbsp;&gt; &nbsp;--- Anshum &lt;<a href="mailto:anshumg@gmail.com">anshumg@gmail.com</a>&gt; wrote:<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt; &nbsp;&gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt; &nbsp;&gt; &nbsp;&gt; &nbsp;&gt; Hi,<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt; &nbsp;&gt; &nbsp;&gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt; &nbsp;&gt; &nbsp;&gt; &nbsp;&gt; I have been trying to bind my lucene instance (JVM -<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &gt; &gt; &gt; &nbsp;&gt; &nbsp;&gt; &nbsp;&gt; Sun Hotspot*) to a &nbsp;&gt; &gt; &gt; &nbsp;&gt; &nbsp;&gt; &nbsp;&gt; particular core so<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; as to improve the performance. Is &nbsp;&gt; &gt; &gt; &nbsp;&gt; &nbsp;&gt; &nbsp;&gt; there a way to do<br>
&gt; &nbsp;&gt; so<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; or &nbsp;&gt; &gt; &gt; &nbsp;&gt; &nbsp;&gt; &nbsp;&gt; is there support in lucene to explicitly control<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; the &nbsp;&gt; &gt; &gt; &nbsp;&gt; &nbsp;&gt; &nbsp;&gt; thread - processor &nbsp;&gt; &gt; &gt; &nbsp;&gt; &nbsp;&gt; &nbsp;&gt; linkup?<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt; &nbsp;&gt; &nbsp;&gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt; &nbsp;&gt; &nbsp;&gt; &nbsp;&gt; --<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt; &nbsp;&gt; &nbsp;&gt; &nbsp;&gt; --<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt; &nbsp;&gt; &nbsp;&gt; &nbsp;&gt; The facts expressed here belong to everybody, the &nbsp;&gt;<br>
&gt; &nbsp;&gt; &gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &nbsp;&gt; opinions to me.<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt; &nbsp;&gt; &nbsp;&gt; &nbsp;&gt; The distinction is yours to draw............<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt; &nbsp;&gt; &nbsp;&gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt; &nbsp;&gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt; &nbsp;&gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt; &nbsp;&gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt; &nbsp;&gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt; &nbsp;&gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; ______________________________________________________________________<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; ______________ &nbsp;&gt; &gt; &gt; &nbsp;&gt; &nbsp;&gt; &nbsp;Be a better friend, newshound, and &nbsp;&gt; &gt;<br>
&gt; &nbsp;&gt; &gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;know-it-all with Yahoo! Mobile. &nbsp;Try it now.<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt; <a href="http://mobile.yahoo.com/;_ylt=Ahu06i62sR8HDtDypao8Wcj9tAcJ" target="_blank">http://mobile.yahoo.com/;_ylt=Ahu06i62sR8HDtDypao8Wcj9tAcJ</a><br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt; &nbsp;&gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt; &nbsp;&gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; ---------------------------------------------------------------------<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt; &nbsp;&gt; &nbsp;&gt; &nbsp;To unsubscribe, e-mail:<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; <a href="mailto:java-user-unsubscribe@lucene.apache.org">java-user-unsubscribe@lucene.apache.org</a><br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt; &nbsp;&gt; &nbsp;&gt; &nbsp;For additional commands, e-mail:<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt; <a href="mailto:java-user-help@lucene.apache.org">java-user-help@lucene.apache.org</a> &nbsp;&gt; &gt; &gt; &nbsp;&gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt; &nbsp;&gt; &nbsp;&gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; &gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt; &nbsp;&gt; -- &nbsp;&gt; &gt; &gt; &nbsp;&gt; &nbsp;&gt; &gt; &gt; &nbsp;&gt; &nbsp;- &nbsp;&gt; &gt; &gt;<br>
&gt; &nbsp;&gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &gt; &gt; &gt; &nbsp;&gt; &gt; &gt; &nbsp;&gt; &gt; &gt; &nbsp;&gt; &gt; &gt; -- &nbsp;&gt; &gt; &gt; &nbsp;&gt; &gt; &gt; &nbsp;- &nbsp;&gt; &gt; &gt; &nbsp;&gt; &gt; &gt; &nbsp;&gt; &gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; &gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; ---------------------------------------------------------------------<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; To unsubscribe, e-mail: <a href="mailto:java-user-unsubscribe@lucene.apache.org">java-user-unsubscribe@lucene.apache.org</a><br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;&gt; For additional commands, e-mail: <a href="mailto:java-user-help@lucene.apache.org">java-user-help@lucene.apache.org</a><br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;--<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; --<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;The facts expressed here belong to everybody, the opinions to me.<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt; &nbsp;The distinction is yours to draw............<br>
&gt; &nbsp;&gt; &gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; &gt;<br>
&gt; &nbsp;&gt; &gt;<br>
&gt; &nbsp;&gt; &gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;--<br>
&gt; &nbsp;&gt; &gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;-<br>
&gt; &nbsp;&gt; &gt;<br>
&gt; &nbsp;&gt; &gt;<br>
&gt; &nbsp;&gt; &gt;<br>
&gt; &nbsp;&gt; &gt; &nbsp;---------------------------------------------------------------------<br>
&gt; &nbsp;&gt; &gt; &nbsp;To unsubscribe, e-mail: <a href="mailto:java-user-unsubscribe@lucene.apache.org">java-user-unsubscribe@lucene.apache.org</a><br>
&gt; &nbsp;&gt; &gt; &nbsp;For additional commands, e-mail: <a href="mailto:java-user-help@lucene.apache.org">java-user-help@lucene.apache.org</a><br>
&gt; &nbsp;&gt; &gt;<br>
&gt; &nbsp;&gt; &gt;<br>
&gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; --<br>
&gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; -<br>
&gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt; ---------------------------------------------------------------------<br>
&gt; &nbsp;&gt; To unsubscribe, e-mail: <a href="mailto:java-user-unsubscribe@lucene.apache.org">java-user-unsubscribe@lucene.apache.org</a><br>
&gt; &nbsp;&gt; For additional commands, e-mail: <a href="mailto:java-user-help@lucene.apache.org">java-user-help@lucene.apache.org</a><br>
&gt; &nbsp;&gt;<br>
&gt; &nbsp;&gt;<br>
&gt;<br>
&gt;<br>
&gt; &nbsp;--<br>
&gt; &nbsp;--<br>
&gt; &nbsp;The facts expressed here belong to everybody, the opinions to me.<br>
&gt; &nbsp;The distinction is yours to draw............<br>
&gt;<br>
<br>
<br>
<br>
</div></div>--<br>
<div><div></div><div class="Wj3C7c"><br>
-<br>
<br>
---------------------------------------------------------------------<br>
To unsubscribe, e-mail: <a href="mailto:java-user-unsubscribe@lucene.apache.org">java-user-unsubscribe@lucene.apache.org</a><br>
For additional commands, e-mail: <a href="mailto:java-user-help@lucene.apache.org">java-user-help@lucene.apache.org</a><br>
<br>
</div></div></blockquote></div><br><br clear="all"><br>-- <br>--<br>The facts expressed here belong to everybody, the opinions to me. <br>The distinction is yours to draw............

------=_Part_2691_26943019.1209098145278--

------=_Part_2690_15639102.1209098145278
Content-Type: text/x-log; name=jvm_Crash_error.log
Content-Transfer-Encoding: base64
X-Attachment-Id: f_ffg9subl0
Content-Disposition: attachment; filename=jvm_Crash_error.log

LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1FcnJvciBMb2ctLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKCiMKIyBBbiB1bmV4
cGVjdGVkIGVycm9yIGhhcyBiZWVuIGRldGVjdGVkIGJ5IEphdmEgUnVudGltZSBFbnZpcm9ubWVu
dDoKIwojICBTSUdTRUdWICgweGIpIGF0IHBjPTB4MDAwMDAwMDAsIHBpZD0zOTUzLCB0aWQ9NzI5
NTE2OTc2CiMKIyBKYXZhIFZNOiBKYXZhIEhvdFNwb3QoVE0pIFNlcnZlciBWTSAoMS42LjBfMDIt
ZWEtYjAyIG1peGVkIG1vZGUpCiMgUHJvYmxlbWF0aWMgZnJhbWU6CiMgQyAgMHgwMDAwMDAwMAoj
CiMgSWYgeW91IHdvdWxkIGxpa2UgdG8gc3VibWl0IGEgYnVnIHJlcG9ydCwgcGxlYXNlIHZpc2l0
OgojICAgaHR0cDovL2phdmEuc3VuLmNvbS93ZWJhcHBzL2J1Z3JlcG9ydC9jcmFzaC5qc3AKIwoK
LS0tLS0tLS0tLS0tLS0tICBUIEggUiBFIEEgRCAgLS0tLS0tLS0tLS0tLS0tCgpDdXJyZW50IHRo
cmVhZCAoMHhiNGMwNjAwMCk6ICBKYXZhVGhyZWFkICJDb21waWxlclRocmVhZDEiIGRhZW1vbiBb
X3RocmVhZF9pbl9uYXRpdmUsIGlkPTM5NjhdCgpzaWdpbmZvOnNpX3NpZ25vPTExLCBzaV9lcnJu
bz0wLCBzaV9jb2RlPTEsIHNpX2FkZHI9MHgwMDAwMDAwMAoKUmVnaXN0ZXJzOgpFQVg9MHhiNGNj
YzgzOCwgRUJYPTB4MDgxODFjZDAsIEVDWD0weGI0Yzg3NDM4LCBFRFg9MHhiNGM4NzQyYwpFU1A9
MHgyYjdiNzE0YywgRUJQPTB4MmI3YjcxNzgsIEVTST0weGI0Yzg3NDA0LCBFREk9MHgyYjVmMzk5
YwpFSVA9MHgwMDAwMDAwMCwgQ1IyPTB4MDAwMDAwMDAsIEVGTEFHUz0weDAwMDEwMjEyCgpUb3Ag
b2YgU3RhY2s6IChzcD0weDJiN2I3MTRjKQoweDJiN2I3MTRjOiAgIDA2NTI5MTY0IGI0Yzg3NDA0
IDAwMDAwMDAyIDA2NWM1OWM4CjB4MmI3YjcxNWM6ICAgMDY1YzU5YzggMmI1ZjM5OWMgMmI1ZjNi
NDQgMmI3YjcxODgKMHgyYjdiNzE2YzogICAyYjVmMzk5YyAyYjdiNzI3MCAyYjVmMmU1MCAyYjdi
NzFmOAoweDJiN2I3MTdjOiAgIDA2NGQ4NWRhIDJiN2I3YzcwIDAwMDAwMDZjIDJiNWYyZTUwCjB4
MmI3YjcxOGM6ICAgMmI1ZjNiNDQgMmI1ZjM5OWMgMDgxODI4MjggMDAwMDAwMDIKMHgyYjdiNzE5
YzogICAwMDAwMDAwMiAyYjdiNzI3MCAyYjU0NWMxOCAwMDAwMDAwNgoweDJiN2I3MWFjOiAgIDAw
MDAwMDAyIDJiN2I3MjljIDAwMDAwMDAyIDAwNWYzOTM0CjB4MmI3YjcxYmM6ICAgMmI3YjcyNzAg
MDAwMDAwNmMgMmI1ZjM5NjggMmI1ZjM5NjgKCkluc3RydWN0aW9uczogKHBjPTB4MDAwMDAwMDAp
CjB4ZmZmZmZmZjA6ICAKClN0YWNrOiBbMHgyYjczODAwMCwweDJiN2I5MDAwKSwgIHNwPTB4MmI3
YjcxNGMsICBmcmVlIHNwYWNlPTUwOGsKCkN1cnJlbnQgQ29tcGlsZVRhc2s6CkMyOjUzNyAgICAg
IGphdmEudXRpbC5yZWdleC5QYXR0ZXJuLm5ld1NsaWNlKFtJSVopTGphdmEvdXRpbC9yZWdleC9Q
YXR0ZXJuJE5vZGU7ICgxODEgYnl0ZXMpCgoKLS0tLS0tLS0tLS0tLS0tICBQIFIgTyBDIEUgUyBT
ICAtLS0tLS0tLS0tLS0tLS0KCkphdmEgVGhyZWFkczogKCA9PiBjdXJyZW50IHRocmVhZCApCiAg
MHgwODE5MGMwMCBKYXZhVGhyZWFkICJUaHJlYWQtNjQ3IiBbX3RocmVhZF9pbl9uYXRpdmUsIGlk
PTYyNDhdCiAgMHgwODQ1N2MwMCBKYXZhVGhyZWFkICJUaHJlYWQtNjQ2IiBbX3RocmVhZF9pbl9K
YXZhLCBpZD02MjQ1XQogIDB4MDg0NTM0MDAgSmF2YVRocmVhZCAiTXVsdGlTZWFyY2hlciB0aHJl
YWQgIzIiIFtfdGhyZWFkX2luX0phdmEsIGlkPTYyMDJdCiAgMHgwODQxZDgwMCBKYXZhVGhyZWFk
ICJUaHJlYWQtNjI4IiBbX3RocmVhZF9ibG9ja2VkLCBpZD02MTg2XQogIDB4MDgwNTgwMDAgSmF2
YVRocmVhZCAiRGVzdHJveUphdmFWTSIgW190aHJlYWRfYmxvY2tlZCwgaWQ9Mzk1Nl0KICAweDA4
MjBiMDAwIEphdmFUaHJlYWQgIlRocmVhZC0xIiBbX3RocmVhZF9pbl9uYXRpdmUsIGlkPTM5Nzdd
CiAgMHhiNGMwNzgwMCBKYXZhVGhyZWFkICJMb3cgTWVtb3J5IERldGVjdG9yIiBkYWVtb24gW190
aHJlYWRfYmxvY2tlZCwgaWQ9Mzk2OV0KPT4weGI0YzA2MDAwIEphdmFUaHJlYWQgIkNvbXBpbGVy
VGhyZWFkMSIgZGFlbW9uIFtfdGhyZWFkX2luX25hdGl2ZSwgaWQ9Mzk2OF0KICAweGI0YzA0YzAw
IEphdmFUaHJlYWQgIkNvbXBpbGVyVGhyZWFkMCIgZGFlbW9uIFtfdGhyZWFkX2Jsb2NrZWQsIGlk
PTM5NjddCiAgMHhiNGMwMzgwMCBKYXZhVGhyZWFkICJTaWduYWwgRGlzcGF0Y2hlciIgZGFlbW9u
IFtfdGhyZWFkX2Jsb2NrZWQsIGlkPTM5NjZdCiAgMHgwODFkODAwMCBKYXZhVGhyZWFkICJTdXJy
b2dhdGUgTG9ja2VyIFRocmVhZCAoQ01TKSIgZGFlbW9uIFtfdGhyZWFkX2Jsb2NrZWQsIGlkPTM5
NjVdCiAgMHgwODFjODgwMCBKYXZhVGhyZWFkICJGaW5hbGl6ZXIiIGRhZW1vbiBbX3RocmVhZF9i
bG9ja2VkLCBpZD0zOTY0XQogIDB4MDgxYzdjMDAgSmF2YVRocmVhZCAiUmVmZXJlbmNlIEhhbmRs
ZXIiIGRhZW1vbiBbX3RocmVhZF9ibG9ja2VkLCBpZD0zOTYzXQoKT3RoZXIgVGhyZWFkczoKICAw
eDA4MWM1NDAwIFZNVGhyZWFkIFtpZD0zOTYyXQogIDB4YjRjMDk0MDAgV2F0Y2hlclRocmVhZCBb
aWQ9Mzk3MF0KClZNIHN0YXRlOm5vdCBhdCBzYWZlcG9pbnQgKG5vcm1hbCBleGVjdXRpb24pCgpW
TSBNdXRleC9Nb25pdG9yIGN1cnJlbnRseSBvd25lZCBieSBhIHRocmVhZDogTm9uZQoKSGVhcAog
cGFyIG5ldyBnZW5lcmF0aW9uICAgdG90YWwgNTkwMDhLLCB1c2VkIDE2OTY2SyBbMHgzMGFmMDAw
MCwgMHgzNGFmMDAwMCwgMHgzNGFmMDAwMCkKICBlZGVuIHNwYWNlIDUyNDgwSywgIDE5JSB1c2Vk
IFsweDMwYWYwMDAwLCAweDMxNTIxOTIwLCAweDMzZTMwMDAwKQogIGZyb20gc3BhY2UgNjUyOEss
IDEwMCUgdXNlZCBbMHgzNDQ5MDAwMCwgMHgzNGFmMDAwMCwgMHgzNGFmMDAwMCkKICB0byAgIHNw
YWNlIDY1MjhLLCAgIDAlIHVzZWQgWzB4MzNlMzAwMDAsIDB4MzNlMzAwMDAsIDB4MzQ0OTAwMDAp
CiBjb25jdXJyZW50IG1hcmstc3dlZXAgZ2VuZXJhdGlvbiB0b3RhbCAxOTgyNDY0SywgdXNlZCA4
MzcyOTBLIFsweDM0YWYwMDAwLCAweGFkYWYwMDAwLCAweGIwYWYwMDAwKQogY29uY3VycmVudC1t
YXJrLXN3ZWVwIHBlcm0gZ2VuIHRvdGFsIDE2Mzg0SywgdXNlZCA1ODg1SyBbMHhiMGFmMDAwMCwg
MHhiMWFmMDAwMCwgMHhiNGFmMDAwMCkKCkR5bmFtaWMgbGlicmFyaWVzOgowMDVkNzAwMC0wMDVk
OTAwMCByLXhwIDAwMDAwMDAwIDY4OjAxIDIwNjQzODYgICAgL2xpYi9saWJkbC0yLjMuNC5zbwow
MDVkOTAwMC0wMDVkYjAwMCByd3hwIDAwMDAxMDAwIDY4OjAxIDIwNjQzODYgICAgL2xpYi9saWJk
bC0yLjMuNC5zbwowMDY4OTAwMC0wMDY5ZTAwMCByLXhwIDAwMDAwMDAwIDY4OjAxIDIwNjQ1MDQg
ICAgL2xpYi9sZC0yLjMuNC5zbwowMDY5ZTAwMC0wMDY5ZjAwMCByLXhwIDAwMDE1MDAwIDY4OjAx
IDIwNjQ1MDQgICAgL2xpYi9sZC0yLjMuNC5zbwowMDY5ZjAwMC0wMDZhMDAwMCByd3hwIDAwMDE2
MDAwIDY4OjAxIDIwNjQ1MDQgICAgL2xpYi9sZC0yLjMuNC5zbwowMDZhMjAwMC0wMDdjNjAwMCBy
LXhwIDAwMDAwMDAwIDY4OjAxIDIwNjQ1MDUgICAgL2xpYi90bHMvbGliYy0yLjMuNC5zbwowMDdj
NjAwMC0wMDdjNzAwMCByLXhwIDAwMTI0MDAwIDY4OjAxIDIwNjQ1MDUgICAgL2xpYi90bHMvbGli
Yy0yLjMuNC5zbwowMDdjNzAwMC0wMDdjYTAwMCByd3hwIDAwMTI1MDAwIDY4OjAxIDIwNjQ1MDUg
ICAgL2xpYi90bHMvbGliYy0yLjMuNC5zbwowMDdjYTAwMC0wMDdjYzAwMCByd3hwIDAwN2NhMDAw
IDAwOjAwIDAKMDA3ZDQwMDAtMDA3ZjUwMDAgci14cCAwMDAwMDAwMCA2ODowMSAyMDY0NTA5ICAg
IC9saWIvdGxzL2xpYm0tMi4zLjQuc28KMDA3ZjUwMDAtMDA3ZjcwMDAgcnd4cCAwMDAyMDAwMCA2
ODowMSAyMDY0NTA5ICAgIC9saWIvdGxzL2xpYm0tMi4zLjQuc28KMDA4MGIwMDAtMDA4MTkwMDAg
ci14cCAwMDAwMDAwMCA2ODowMSAyMDY0NTE1ICAgIC9saWIvdGxzL2xpYnB0aHJlYWQtMi4zLjQu
c28KMDA4MTkwMDAtMDA4MWIwMDAgcnd4cCAwMDAwZDAwMCA2ODowMSAyMDY0NTE1ICAgIC9saWIv
dGxzL2xpYnB0aHJlYWQtMi4zLjQuc28KMDA4MWIwMDAtMDA4MWQwMDAgcnd4cCAwMDgxYjAwMCAw
MDowMCAwCjAwYjBkMDAwLTAwYjE1MDAwIHIteHAgMDAwMDAwMDAgNjg6MDEgMjA2NDU0NCAgICAv
bGliL3Rscy9saWJydC0yLjMuNC5zbwowMGIxNTAwMC0wMGIxNzAwMCByd3hwIDAwMDA3MDAwIDY4
OjAxIDIwNjQ1NDQgICAgL2xpYi90bHMvbGlicnQtMi4zLjQuc28KMDBiMTcwMDAtMDBiMjEwMDAg
cnd4cCAwMGIxNzAwMCAwMDowMCAwCjAwYmFmMDAwLTAwYmMxMDAwIHIteHAgMDAwMDAwMDAgNjg6
MDEgMjA2NDU0MSAgICAvbGliL2xpYm5zbC0yLjMuNC5zbwowMGJjMTAwMC0wMGJjMzAwMCByd3hw
IDAwMDExMDAwIDY4OjAxIDIwNjQ1NDEgICAgL2xpYi9saWJuc2wtMi4zLjQuc28KMDBiYzMwMDAt
MDBiYzUwMDAgcnd4cCAwMGJjMzAwMCAwMDowMCAwCjA2MDAwMDAwLTA2NWEwMDAwIHIteHAgMDAw
MDAwMDAgNjg6MDEgMTkyNTMzOTEgICAvaG9tZS91c2VyL2pkazEuNi4wXzAyL2pyZS9saWIvaTM4
Ni9zZXJ2ZXIvbGlianZtLnNvCjA2NWEwMDAwLTA2NWRiMDAwIHJ3eHAgMDA1OWYwMDAgNjg6MDEg
MTkyNTMzOTEgICAvaG9tZS91c2VyL2pkazEuNi4wXzAyL2pyZS9saWIvaTM4Ni9zZXJ2ZXIvbGli
anZtLnNvCjA2NWRiMDAwLTA2OWZjMDAwIHJ3eHAgMDY1ZGIwMDAgMDA6MDAgMAowODA0ODAwMC0w
ODA1MjAwMCByLXhwIDAwMDAwMDAwIDY4OjAxIDE5MzE3MzgxICAgL2hvbWUvdXNlci9qZGsxLjYu
MF8wMi9iaW4vamF2YQowODA1MjAwMC0wODA1MzAwMCByd3hwIDAwMDA5MDAwIDY4OjAxIDE5MzE3
MzgxICAgL2hvbWUvdXNlci9qZGsxLjYuMF8wMi9iaW4vamF2YQowODA1MzAwMC0wOTMxNjAwMCBy
d3hwIDA4MDUzMDAwIDAwOjAwIDAKMmEwMDAwMDAtMmEwZjUwMDAgcnd4cCAyYTAwMDAwMCAwMDow
MCAwCjJhMGY1MDAwLTJhMTAwMDAwIC0tLXAgMmEwZjUwMDAgMDA6MDAgMAoyYTEwMDAwMC0yYTIw
MDAwMCByd3hwIDJhMTAwMDAwIDAwOjAwIDAKMmEyMDAwMDAtMmEzMDAwMDAgcnd4cCAyYTIwMDAw
MCAwMDowMCAwCjJhNDAwMDAwLTJhNTAwMDAwIHJ3eHAgMmE0MDAwMDAgMDA6MDAgMAoyYTYwMDAw
MC0yYTYyMTAwMCByd3hwIDJhNjAwMDAwIDAwOjAwIDAKMmE2MjEwMDAtMmE3MDAwMDAgLS0tcCAy
YTYyMTAwMCAwMDowMCAwCjJhNzAwMDAwLTJhNzIxMDAwIHJ3eHAgMmE3MDAwMDAgMDA6MDAgMAoy
YTcyMTAwMC0yYTgwMDAwMCAtLS1wIDJhNzIxMDAwIDAwOjAwIDAKMmE4MDAwMDAtMmE5MDAwMDAg
cnd4cCAyYTgwMDAwMCAwMDowMCAwCjJhYTAwMDAwLTJhYjAwMDAwIHJ3eHAgMmFhMDAwMDAgMDA6
MDAgMAoyYWU1ZTAwMC0yYWU2MTAwMCAtLS1wIDJhZTVlMDAwIDAwOjAwIDAKMmFlNjEwMDAtMmFl
YWYwMDAgcnd4cCAyYWU2MTAwMCAwMDowMCAwCjJhZWFmMDAwLTJhZWIyMDAwIHJ3eHAgMmFlYWYw
MDAgMDA6MDAgMAoyYWViMjAwMC0yYWZmZDAwMCByd3hwIDJhZWIyMDAwIDAwOjAwIDAKMmFmZmQw
MDAtMmIwMDAwMDAgLS0tcCAyYWZmZDAwMCAwMDowMCAwCjJiMDM5MDAwLTJiMDNjMDAwIC0tLXAg
MmIwMzkwMDAgMDA6MDAgMAoyYjAzYzAwMC0yYjA4YTAwMCByd3hwIDJiMDNjMDAwIDAwOjAwIDAK
MmIwYzkwMDAtMmIwY2MwMDAgcnd4cCAyYjBjOTAwMCAwMDowMCAwCjJiMGNjMDAwLTJiMTFhMDAw
IHJ3eHAgMmIwY2MwMDAgMDA6MDAgMAoyYjExYTAwMC0yYjExZDAwMCByd3hwIDJiMTFhMDAwIDAw
OjAwIDAKMmIxMWQwMDAtMmIxNmIwMDAgcnd4cCAyYjExZDAwMCAwMDowMCAwCjJiMTZiMDAwLTJi
MTZlMDAwIHJ3eHAgMmIxNmIwMDAgMDA6MDAgMAoyYjE2ZTAwMC0yYjFiYzAwMCByd3hwIDJiMTZl
MDAwIDAwOjAwIDAKMmIxYmMwMDAtMmIxYmYwMDAgcnd4cCAyYjFiYzAwMCAwMDowMCAwCjJiMWJm
MDAwLTJiMjBkMDAwIHJ3eHAgMmIxYmYwMDAgMDA6MDAgMAoyYjIwZDAwMC0yYjIxMDAwMCByd3hw
IDJiMjBkMDAwIDAwOjAwIDAKMmIyMTAwMDAtMmIyNWUwMDAgcnd4cCAyYjIxMDAwMCAwMDowMCAw
CjJiMjVlMDAwLTJiMjYxMDAwIC0tLXAgMmIyNWUwMDAgMDA6MDAgMAoyYjI2MTAwMC0yYjJhZjAw
MCByd3hwIDJiMjYxMDAwIDAwOjAwIDAKMmIyYWYwMDAtMmIyYjIwMDAgLS0tcCAyYjJhZjAwMCAw
MDowMCAwCjJiMmIyMDAwLTJiM2U2MDAwIHJ3eHAgMmIyYjIwMDAgMDA6MDAgMAoyYjNlNjAwMC0y
YjQwMDAwMCAtLS1wIDJiM2U2MDAwIDAwOjAwIDAKMmI0MDAwMDAtMmI0ZWQwMDAgcnd4cCAyYjQw
MDAwMCAwMDowMCAwCjJiNGVkMDAwLTJiNTAwMDAwIC0tLXAgMmI0ZWQwMDAgMDA6MDAgMAoyYjUw
MDAwMC0yYjVmYzAwMCByd3hwIDJiNTAwMDAwIDAwOjAwIDAKMmI1ZmMwMDAtMmI2MDAwMDAgLS0t
cCAyYjVmYzAwMCAwMDowMCAwCjJiNjNiMDAwLTJiNjRlMDAwIHIteHAgMDAwMDAwMDAgNjg6MDEg
MTkyNTM0NDAgICAvaG9tZS91c2VyL2pkazEuNi4wXzAyL2pyZS9saWIvaTM4Ni9saWJuZXQuc28K
MmI2NGUwMDAtMmI2NGYwMDAgcnd4cCAwMDAxMzAwMCA2ODowMSAxOTI1MzQ0MCAgIC9ob21lL3Vz
ZXIvamRrMS42LjBfMDIvanJlL2xpYi9pMzg2L2xpYm5ldC5zbwoyYjY0ZjAwMC0yYjY1NjAwMCBy
LXhzIDAwMTA2MDAwIDY4OjAxIDE5MjUzMzMzICAgL2hvbWUvdXNlci9qZGsxLjYuMF8wMi9qcmUv
bGliL3Jlc291cmNlcy5qYXIKMmI2NTYwMDAtMmI2NjAwMDAgci14cyAwMDA3YjAwMCA2ODowMSAx
OTMxNzM0MyAgIC9ob21lL3VzZXIvamRrMS42LjBfMDIvanJlL2xpYi9leHQvbHVjZW5lLWNvcmUt
Mi4yLjAuamFyCjJiNjYwMDAwLTJiNjYyMDAwIHIteHMgMDAwMDYwMDAgNjg6MDEgMTkzMTczMzcg
ICAvaG9tZS91c2VyL2pkazEuNi4wXzAyL2pyZS9saWIvZXh0L2NvbW1vbnMtY29kZWMtMS4yLmph
cgoyYjY2MjAwMC0yYjY2NjAwMCByLXhzIDAwMDZjMDAwIDY4OjAxIDE5MzE3NDA3ICAgL2hvbWUv
dXNlci9qZGsxLjYuMF8wMi9qcmUvbGliL2V4dC9teXNxbC1jb25uZWN0b3ItamF2YS0zLjEtbmln
aHRseS0yMDA2MDgyMy1iaW4uamFyCjJiNjY2MDAwLTJiNjY3MDAwIC0tLXAgMmI2NjYwMDAgMDA6
MDAgMAoyYjY2NzAwMC0yYjZlNzAwMCByd3hwIDJiNjY3MDAwIDAwOjAwIDAKMmI2ZTcwMDAtMmI2
ZWEwMDAgLS0tcCAyYjZlNzAwMCAwMDowMCAwCjJiNmVhMDAwLTJiNzM4MDAwIHJ3eHAgMmI2ZWEw
MDAgMDA6MDAgMAoyYjczODAwMC0yYjczYjAwMCAtLS1wIDJiNzM4MDAwIDAwOjAwIDAKMmI3M2Iw
MDAtMmI3YjkwMDAgcnd4cCAyYjczYjAwMCAwMDowMCAwCjJiN2I5MDAwLTJiN2JjMDAwIC0tLXAg
MmI3YjkwMDAgMDA6MDAgMAoyYjdiYzAwMC0yYjgzYTAwMCByd3hwIDJiN2JjMDAwIDAwOjAwIDAK
MmI4M2EwMDAtMmI4M2QwMDAgLS0tcCAyYjgzYTAwMCAwMDowMCAwCjJiODNkMDAwLTJiODhiMDAw
IHJ3eHAgMmI4M2QwMDAgMDA6MDAgMAoyYjg4YjAwMC0yYjg4ZTAwMCAtLS1wIDJiODhiMDAwIDAw
OjAwIDAKMmI4OGUwMDAtMmI4ZGMwMDAgcnd4cCAyYjg4ZTAwMCAwMDowMCAwCjJiOGRjMDAwLTJi
YWRjMDAwIHIteHAgMDAwMDAwMDAgNjg6MDEgODI5MzU4NCAgICAvdXNyL2xpYi9sb2NhbGUvbG9j
YWxlLWFyY2hpdmUKMmJhZGMwMDAtMmJhZGYwMDAgLS0tcCAyYmFkYzAwMCAwMDowMCAwCjJiYWRm
MDAwLTJiYjJkMDAwIHJ3eHAgMmJhZGYwMDAgMDA6MDAgMAoyYmIyZDAwMC0yYmIzMDAwMCAtLS1w
IDJiYjJkMDAwIDAwOjAwIDAKMmJiMzAwMDAtMmJiN2UwMDAgcnd4cCAyYmIzMDAwMCAwMDowMCAw
CjJiYjdlMDAwLTJiYjdmMDAwIC0tLXAgMmJiN2UwMDAgMDA6MDAgMAoyYmI3ZjAwMC0yYmMyZjAw
MCByd3hwIDJiYjdmMDAwIDAwOjAwIDAKMmJjMmYwMDAtMmJkYWEwMDAgci14cyAwMmM3ZjAwMCA2
ODowMSAxOTI1MzQ0NyAgIC9ob21lL3VzZXIvamRrMS42LjBfMDIvanJlL2xpYi9ydC5qYXIKMmJk
YWEwMDAtMmJkYWIwMDAgLS0tcCAyYmRhYTAwMCAwMDowMCAwCjJiZGFiMDAwLTMwMmQ2MDAwIHJ3
eHAgMmJkYWIwMDAgMDA6MDAgMAozMDJkNjAwMC0zMDJlZTAwMCByd3hwIDMwMmQ2MDAwIDAwOjAw
IDAKMzAyZWUwMDAtMzA2YjcwMDAgcnd4cCAzMDJlZTAwMCAwMDowMCAwCjMwNmI3MDAwLTMwNmNm
MDAwIHJ3eHAgMzA2YjcwMDAgMDA6MDAgMAozMDZjZjAwMC0zMGFiNzAwMCByd3hwIDMwNmNmMDAw
IDAwOjAwIDAKMzBhYjcwMDAtMzBhY2YwMDAgcnd4cCAzMGFiNzAwMCAwMDowMCAwCjMwYWNmMDAw
LTMwYWQ3MDAwIHJ3eHAgMzBhY2YwMDAgMDA6MDAgMAozMGFkNzAwMC0zMGFlZjAwMCByd3hwIDMw
YWQ3MDAwIDAwOjAwIDAKMzBhZWYwMDAtYWRhZjAwMDAgcnd4cCAzMGFlZjAwMCAwMDowMCAwCmFk
YWYwMDAwLWIwYWYwMDAwIHJ3eHAgYWRhZjAwMDAgMDA6MDAgMApiMGFmMDAwMC1iMWFmMDAwMCBy
d3hwIGIwYWYwMDAwIDAwOjAwIDAKYjFhZjAwMDAtYjRhZjAwMDAgcnd4cCBiMWFmMDAwMCAwMDow
MCAwCmI0YWZlMDAwLWI0YWZmMDAwIC0tLXAgYjRhZmUwMDAgMDA6MDAgMApiNGFmZjAwMC1iNGI3
ZjAwMCByd3hwIGI0YWZmMDAwIDAwOjAwIDAKYjRiN2YwMDAtYjRiODAwMDAgLS0tcCBiNGI3ZjAw
MCAwMDowMCAwCmI0YjgwMDAwLWI0Y2ZlMDAwIHJ3eHAgYjRiODAwMDAgMDA6MDAgMApiNGNmZTAw
MC1iNGQwMDAwMCAtLS1wIGI0Y2ZlMDAwIDAwOjAwIDAKYjRkMTUwMDAtYjRkMTgwMDAgLS0tcCBi
NGQxNTAwMCAwMDowMCAwCmI0ZDE4MDAwLWI0ZDY2MDAwIHJ3eHAgYjRkMTgwMDAgMDA6MDAgMApi
NGQ2NjAwMC1iNGQ2NzAwMCAtLS1wIGI0ZDY2MDAwIDAwOjAwIDAKYjRkNjcwMDAtYjRkZTcwMDAg
cnd4cCBiNGQ2NzAwMCAwMDowMCAwCmI0ZGU3MDAwLWI0ZGU4MDAwIC0tLXAgYjRkZTcwMDAgMDA6
MDAgMApiNGRlODAwMC1iNGU3MjAwMCByd3hwIGI0ZGU4MDAwIDAwOjAwIDAKYjRlNzIwMDAtYjRm
MjgwMDAgcnd4cCBiNGU3MjAwMCAwMDowMCAwCmI0ZjI4MDAwLWI1MTk4MDAwIHJ3eHAgYjRmMjgw
MDAgMDA6MDAgMApiNTE5ODAwMC1iN2YyODAwMCByd3hwIGI1MTk4MDAwIDAwOjAwIDAKYjdmMjgw
MDAtYjdmMzcwMDAgci14cCAwMDAwMDAwMCA2ODowMSAxOTI1MzQxMCAgIC9ob21lL3VzZXIvamRr
MS42LjBfMDIvanJlL2xpYi9pMzg2L2xpYnppcC5zbwpiN2YzNzAwMC1iN2YzOTAwMCByd3hwIDAw
MDBlMDAwIDY4OjAxIDE5MjUzNDEwICAgL2hvbWUvdXNlci9qZGsxLjYuMF8wMi9qcmUvbGliL2kz
ODYvbGliemlwLnNvCmI3ZjM5MDAwLWI3ZjVjMDAwIHIteHAgMDAwMDAwMDAgNjg6MDEgMTkyNTMz
ODYgICAvaG9tZS91c2VyL2pkazEuNi4wXzAyL2pyZS9saWIvaTM4Ni9saWJqYXZhLnNvCmI3ZjVj
MDAwLWI3ZjVlMDAwIHJ3eHAgMDAwMjMwMDAgNjg6MDEgMTkyNTMzODYgICAvaG9tZS91c2VyL2pk
azEuNi4wXzAyL2pyZS9saWIvaTM4Ni9saWJqYXZhLnNvCmI3ZjVlMDAwLWI3ZjY5MDAwIHIteHAg
MDAwMDAwMDAgNjg6MDEgMTkyNTM0NDMgICAvaG9tZS91c2VyL2pkazEuNi4wXzAyL2pyZS9saWIv
aTM4Ni9saWJ2ZXJpZnkuc28KYjdmNjkwMDAtYjdmNmEwMDAgcnd4cCAwMDAwYjAwMCA2ODowMSAx
OTI1MzQ0MyAgIC9ob21lL3VzZXIvamRrMS42LjBfMDIvanJlL2xpYi9pMzg2L2xpYnZlcmlmeS5z
bwpiN2Y2YTAwMC1iN2Y3MzAwMCByLXhwIDAwMDAwMDAwIDY4OjAxIDIwNjQ0MzQgICAgL2xpYi9s
aWJuc3NfZmlsZXMtMi4zLjQuc28KYjdmNzMwMDAtYjdmNzUwMDAgcnd4cCAwMDAwODAwMCA2ODow
MSAyMDY0NDM0ICAgIC9saWIvbGlibnNzX2ZpbGVzLTIuMy40LnNvCmI3ZjgwMDAwLWI3Zjg4MDAw
IHJ3eHMgMDAwMDAwMDAgNjg6MDEgNzgzMTU1MyAgICAvdG1wL2hzcGVyZmRhdGFfdXNlci8zOTUz
CmI3Zjg4MDAwLWI3ZjhlMDAwIHIteHAgMDAwMDAwMDAgNjg6MDEgMTkyNTM0MjIgICAvaG9tZS91
c2VyL2pkazEuNi4wXzAyL2pyZS9saWIvaTM4Ni9uYXRpdmVfdGhyZWFkcy9saWJocGkuc28KYjdm
OGUwMDAtYjdmOGYwMDAgcnd4cCAwMDAwNjAwMCA2ODowMSAxOTI1MzQyMiAgIC9ob21lL3VzZXIv
amRrMS42LjBfMDIvanJlL2xpYi9pMzg2L25hdGl2ZV90aHJlYWRzL2xpYmhwaS5zbwpiN2Y4ZjAw
MC1iN2Y5MDAwMCByd3hwIGI3ZjhmMDAwIDAwOjAwIDAKYjdmOTAwMDAtYjdmOTEwMDAgci14cCBi
N2Y5MDAwMCAwMDowMCAwCmI3ZjkxMDAwLWI3Zjk0MDAwIC0tLXAgYjdmOTEwMDAgMDA6MDAgMApi
N2Y5NDAwMC1iN2ZlMzAwMCByd3hwIGI3Zjk0MDAwIDAwOjAwIDAKYjdmZTMwMDAtYjdmZWEwMDAg
ci14cCAwMDAwMDAwMCA2ODowMSAxOTI1MzQyNiAgIC9ob21lL3VzZXIvamRrMS42LjBfMDIvanJl
L2xpYi9pMzg2L2psaS9saWJqbGkuc28KYjdmZWEwMDAtYjdmZWMwMDAgcnd4cCAwMDAwNjAwMCA2
ODowMSAxOTI1MzQyNiAgIC9ob21lL3VzZXIvamRrMS42LjBfMDIvanJlL2xpYi9pMzg2L2psaS9s
aWJqbGkuc28KYjdmZWMwMDAtYjdmZWQwMDAgcnd4cCBiN2ZlYzAwMCAwMDowMCAwCmJmZmY5MDAw
LWMwMDAwMDAwIHJ3eHAgYmZmZjkwMDAgMDA6MDAgMApmZmZmZTAwMC1mZmZmZjAwMCAtLS1wIDAw
MDAwMDAwIDAwOjAwIDAKClZNIEFyZ3VtZW50czoKanZtX2FyZ3M6IC1YWDorQWdncmVzc2l2ZU9w
dHMgLVhYOitTY2F2ZW5nZUJlZm9yZUZ1bGxHQyAtWG1zMjAwMG0gLVhteDIwNDhtIC1YWDorVXNl
Q29uY01hcmtTd2VlcEdDCmphdmFfY29tbWFuZDogY29tLnRyaWFsLnJlc2RleC5kYWVtb24uU2Vh
cmNoZCA1MDAwCkxhdW5jaGVyIFR5cGU6IFNVTl9TVEFOREFSRAoKRW52aXJvbm1lbnQgVmFyaWFi
bGVzOgpKQVZBX0hPTUU9L2hvbWUvdXNlci9qZGsxLjYuMF8wMgpDTEFTU1BBVEg9L2hvbWUvdXNl
ci9qYXZhClBBVEg9L2hvbWUvdXNlci9qZGsxLjYuMF8wMi9iaW46L3Vzci9rZXJiZXJvcy9iaW46
L3Vzci9iaW46L2JpbjovdXNyL3NiaW46L3NiaW46L3Vzci9sb2NhbC9vcGVuc3NoL2JpbjovdXNy
L1gxMVI2L2JpbjovaG9tZS91c2VyL2JpbgpMRF9MSUJSQVJZX1BBVEg9L2hvbWUvdXNlci9qZGsx
LjYuMF8wMi9qcmUvbGliL2kzODYvc2VydmVyOi9ob21lL3VzZXIvamRrMS42LjBfMDIvanJlL2xp
Yi9pMzg2Oi9ob21lL3VzZXIvamRrMS42LjBfMDIvanJlLy4uL2xpYi9pMzg2ClNIRUxMPS9iaW4v
YmFzaAoKU2lnbmFsIEhhbmRsZXJzOgpTSUdTRUdWOiBbbGlianZtLnNvKzB4NTNjMDAwXSwgc2Ff
bWFza1swXT0weDdmZmJmZWZmLCBzYV9mbGFncz0weDEwMDAwMDA0ClNJR0JVUzogW2xpYmp2bS5z
bysweDUzYzAwMF0sIHNhX21hc2tbMF09MHg3ZmZiZmVmZiwgc2FfZmxhZ3M9MHgxMDAwMDAwNApT
SUdGUEU6IFtsaWJqdm0uc28rMHg0NTE4ZDBdLCBzYV9tYXNrWzBdPTB4N2ZmYmZlZmYsIHNhX2Zs
YWdzPTB4MTAwMDAwMDQKU0lHUElQRTogW2xpYmp2bS5zbysweDQ1MThkMF0sIHNhX21hc2tbMF09
MHg3ZmZiZmVmZiwgc2FfZmxhZ3M9MHgxMDAwMDAwNApTSUdJTEw6IFtsaWJqdm0uc28rMHg0NTE4
ZDBdLCBzYV9tYXNrWzBdPTB4N2ZmYmZlZmYsIHNhX2ZsYWdzPTB4MTAwMDAwMDQKU0lHVVNSMTog
U0lHX0RGTCwgc2FfbWFza1swXT0weDAwMDAwMDAwLCBzYV9mbGFncz0weDAwMDAwMDAwClNJR1VT
UjI6IFtsaWJqdm0uc28rMHg0NTM5MDBdLCBzYV9tYXNrWzBdPTB4MDAwMDAwMDAsIHNhX2ZsYWdz
PTB4MTAwMDAwMDQKU0lHSFVQOiBbbGlianZtLnNvKzB4NDUzMzIwXSwgc2FfbWFza1swXT0weDdm
ZmJmZWZmLCBzYV9mbGFncz0weDEwMDAwMDA0ClNJR0lOVDogW2xpYmp2bS5zbysweDQ1MzMyMF0s
IHNhX21hc2tbMF09MHg3ZmZiZmVmZiwgc2FfZmxhZ3M9MHgxMDAwMDAwNApTSUdRVUlUOiBbbGli
anZtLnNvKzB4NDUzMzIwXSwgc2FfbWFza1swXT0weDdmZmJmZWZmLCBzYV9mbGFncz0weDEwMDAw
MDA0ClNJR1RFUk06IFtsaWJqdm0uc28rMHg0NTMzMjBdLCBzYV9tYXNrWzBdPTB4N2ZmYmZlZmYs
IHNhX2ZsYWdzPTB4MTAwMDAwMDQKU0lHVVNSMjogW2xpYmp2bS5zbysweDQ1MzkwMF0sIHNhX21h
c2tbMF09MHgwMDAwMDAwMCwgc2FfZmxhZ3M9MHgxMDAwMDAwNAoKCi0tLS0tLS0tLS0tLS0tLSAg
UyBZIFMgVCBFIE0gIC0tLS0tLS0tLS0tLS0tLQoKT1M6UmVkIEhhdCBFbnRlcnByaXNlIExpbnV4
IEVTIHJlbGVhc2UgNCAoTmFoYW50IFVwZGF0ZSAyKQoKdW5hbWU6TGludXggMi42LjktMjIuRUxz
bXAgIzEgU01QIE1vbiBTZXAgMTkgMTg6MzI6MTQgRURUIDIwMDUgaTY4NgpsaWJjOmdsaWJjIDIu
My40IE5QVEwgMi4zLjQKcmxpbWl0OiBTVEFDSyAxMDI0MGssIENPUkUgMGssIE5QUk9DIDEwNTQ3
MSwgTk9GSUxFIDEwMjQsIEFTIGluZmluaXR5CmxvYWQgYXZlcmFnZToxLjIxIDAuNzkgMC41NgoK
Q1BVOnRvdGFsIDQgKDEgY29yZXMgcGVyIGNwdSwgMiB0aHJlYWRzIHBlciBjb3JlKSBmYW1pbHkg
MTUgbW9kZWwgNCBzdGVwcGluZyAxLCBjbW92LCBjeDgsIGZ4c3IsIG1teCwgc3NlLCBzc2UyLCBz
c2UzLCBodAoKTWVtb3J5OiA0ayBwYWdlLCBwaHlzaWNhbCA2MTY3MjAwaygxMDI3NTgwayBmcmVl
KSwgc3dhcCAyMDQwMjQ0aygyMDMyNDg4ayBmcmVlKQoKdm1faW5mbzogSmF2YSBIb3RTcG90KFRN
KSBTZXJ2ZXIgVk0gKDEuNi4wXzAyLWVhLWIwMikgZm9yIGxpbnV4LXg4NiwgYnVpbHQgb24gQXBy
IDEyIDIwMDcgMDI6MzI6NTEgYnkgImphdmFfcmUiIHdpdGggZ2NjIDMuMi4xLTdhIChKMlNFIHJl
bGVhc2UpCgotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0=

------=_Part_2690_15639102.1209098145278
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------=_Part_2690_15639102.1209098145278--

From java-user-return-33782-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 25 09:39:50 2008
Return-Path: <java-user-return-33782-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60132 invoked from network); 25 Apr 2008 09:39:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Apr 2008 09:39:50 -0000
Received: (qmail 11332 invoked by uid 500); 25 Apr 2008 09:39:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11304 invoked by uid 500); 25 Apr 2008 09:39:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11293 invoked by uid 99); 25 Apr 2008 09:39:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Apr 2008 02:39:44 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chew.alex@gmail.com designates 209.85.146.179 as permitted sender)
Received: from [209.85.146.179] (HELO wa-out-1112.google.com) (209.85.146.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Apr 2008 09:39:00 +0000
Received: by wa-out-1112.google.com with SMTP id j40so5921320wah.11
        for <java-user@lucene.apache.org>; Fri, 25 Apr 2008 02:39:14 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=MgxNZayispvj9qTu+/dqnEIbYAXarWWvt88UvaDkvLo=;
        b=xg4TqYihgpkZnV2ULBEDfDg03WLeuJewB8K3FWMBP3mcsdDhmnks94CTlzDVukO1zGXWjFBNt3+3xJf9PMwk6qyy9bbJjMRam+Y8SS09Wbe7w8vjOV8sVp8TPBevfWMiG0FAcY8liQ1IK6J3UdH5NNWoBtRtQ3oAdlFd8L91dWk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=doEIBWWVdVeudDSF7JehcLaYuF8P95YCO+ItTCVJWfV3LLCet8RMTC7SspPzlhdCaSlPBuzua5goJlBYdxvFs4paAeXUH/49d0l1sVb3KSDjaKog3JYgHniuzWFF5hSSlqlwR7//AlvIUNfvFIa3Suzd+3tX3I7XWg0nuIB7YDc=
Received: by 10.114.196.13 with SMTP id t13mr705563waf.219.1209116354392;
        Fri, 25 Apr 2008 02:39:14 -0700 (PDT)
Received: by 10.115.15.18 with HTTP; Fri, 25 Apr 2008 02:39:14 -0700 (PDT)
Message-ID: <f93855860804250239l915a489wd19e443af036bfa1@mail.gmail.com>
Date: Fri, 25 Apr 2008 17:39:14 +0800
From: "Alex Chew" <chew.alex@gmail.com>
To: java-user@lucene.apache.org
Subject: Can I using HFS in lucene 2.3.1?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_163_25917615.1209116354390"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_163_25917615.1209116354390
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
Does somebody have practice building a distributed application with lucene
and Hadoop/HFS?
Lucene 2.3.1 looks not explose HFSDirectory.

Any advice will be appreciated.
Regards,
Alex

------=_Part_163_25917615.1209116354390--

From java-user-return-33783-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 25 09:45:38 2008
Return-Path: <java-user-return-33783-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62179 invoked from network); 25 Apr 2008 09:45:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Apr 2008 09:45:38 -0000
Received: (qmail 18760 invoked by uid 500); 25 Apr 2008 09:45:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18736 invoked by uid 500); 25 Apr 2008 09:45:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18725 invoked by uid 99); 25 Apr 2008 09:45:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Apr 2008 02:45:32 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chew.alex@gmail.com designates 209.85.146.183 as permitted sender)
Received: from [209.85.146.183] (HELO wa-out-1112.google.com) (209.85.146.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Apr 2008 09:44:49 +0000
Received: by wa-out-1112.google.com with SMTP id j40so5923457wah.11
        for <java-user@lucene.apache.org>; Fri, 25 Apr 2008 02:45:02 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=Xm3xjNhtsfaEM516T4CRPJ4GsVrxEKwRH+yn6HnuYKw=;
        b=a3OeO81TLpAxxBOrG5ys42KKJbUkQS/hOQGkSreuYIXBd9cFfAHSeTO7Mj1eoV1BVLh1rtvnpJfgO2PDQxcab8eHlMjLwzo1z0diwqS6Uk0A7Lp2ekceQoAbKM9+Pkc1XgayxRn4eBqjpZagjP7ejalztgS0a5X94dsI9XoUT/s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=hylKwMDvDeCRtJz1VIzoA0HhXFv8V07SXAuni2IQ1UeK0UNerTy4LAX66pY+qddxHKBMyaaiDI2eNzjiYozUjI32kSClHxzRGTfLEEVlG/QFoHl4HQ6QKRUjqqzfRZ85hDEF+vuGWj4rK4g6p9aWCX9te6vh+RjOVejZUFLgdoU=
Received: by 10.114.144.1 with SMTP id r1mr2980641wad.53.1209116702663;
        Fri, 25 Apr 2008 02:45:02 -0700 (PDT)
Received: by 10.115.15.18 with HTTP; Fri, 25 Apr 2008 02:45:02 -0700 (PDT)
Message-ID: <f93855860804250245s11276191p8fe3fc786294faf4@mail.gmail.com>
Date: Fri, 25 Apr 2008 17:45:02 +0800
From: "Alex Chew" <chew.alex@gmail.com>
To: java-user@lucene.apache.org
Subject: Can I using HFS in lucene 2.3.1?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_179_5313832.1209116702654"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_179_5313832.1209116702654
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
Does somebody have practice building a distributed application with lucene
and Hadoop/HFS?
Lucene 2.3.1 looks not explose HFSDirectory.

Any advice will be appreciated.
Regards,
Alex

------=_Part_179_5313832.1209116702654--

From java-user-return-33784-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 25 09:53:01 2008
Return-Path: <java-user-return-33784-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64249 invoked from network); 25 Apr 2008 09:53:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Apr 2008 09:53:01 -0000
Received: (qmail 24016 invoked by uid 500); 25 Apr 2008 09:52:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23980 invoked by uid 500); 25 Apr 2008 09:52:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23968 invoked by uid 99); 25 Apr 2008 09:52:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Apr 2008 02:52:56 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [213.162.48.15] (HELO soufre.accelance.net) (213.162.48.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Apr 2008 09:52:11 +0000
Received: from [192.168.3.111] (LSt-Amand-152-32-31-90.w82-127.abo.wanadoo.fr [82.127.74.90])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by soufre.accelance.net (Postfix) with ESMTP id 5E242450C0
	for <java-user@lucene.apache.org>; Fri, 25 Apr 2008 11:52:19 +0200 (CEST)
Message-ID: <4811A9BD.1090003@garambrogne.net>
Date: Fri, 25 Apr 2008 11:51:57 +0200
From: Mathieu Lecarme <mathieu@garambrogne.net>
User-Agent: Thunderbird 2.0.0.12 (X11/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Can I using HFS in lucene 2.3.1?
References: <f93855860804250245s11276191p8fe3fc786294faf4@mail.gmail.com>
In-Reply-To: <f93855860804250245s11276191p8fe3fc786294faf4@mail.gmail.com>
X-Enigmail-Version: 0.95.6
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Alex Chew a crit :
> Hi,
> Does somebody have practice building a distributed application with lucene
> and Hadoop/HFS?
> Lucene 2.3.1 looks not explose HFSDirectory.
>
> Any advice will be appreciated.
> Regards,
> Alex
>
>   
have a look to Nutch.

M.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33785-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 25 14:43:28 2008
Return-Path: <java-user-return-33785-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97480 invoked from network); 25 Apr 2008 14:43:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Apr 2008 14:43:28 -0000
Received: (qmail 61457 invoked by uid 500); 25 Apr 2008 14:43:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61415 invoked by uid 500); 25 Apr 2008 14:43:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61404 invoked by uid 99); 25 Apr 2008 14:43:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Apr 2008 07:43:21 -0700
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=DNS_FROM_RFC_BOGUSMX,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [132.68.225.10] (HELO mailgw10.technion.ac.il) (132.68.225.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Apr 2008 14:42:26 +0000
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: ApoEAEuLEUiERHMG/2dsb2JhbACsTQ
X-IronPort-AV: E=Sophos;i="4.25,707,1199656800"; 
   d="scan'208";a="97834063"
Received: from fermat.math.technion.ac.il ([132.68.115.6])
  by mailgw10.technion.ac.il with ESMTP; 25 Apr 2008 17:42:26 +0300
Received: from fermat.math.technion.ac.il (localhost [127.0.0.1])
	by fermat.math.technion.ac.il (8.12.10/8.12.10) with ESMTP id m3PEgPUD023918
	for <java-user@lucene.apache.org>; Fri, 25 Apr 2008 17:42:26 +0300 (IDT)
Received: (from nyh@localhost)
	by fermat.math.technion.ac.il (8.12.10/8.12.10/Submit) id m3PEgPHO023917
	for java-user@lucene.apache.org; Fri, 25 Apr 2008 17:42:25 +0300 (IDT)
X-Authentication-Warning: fermat.math.technion.ac.il: nyh set sender to nyh@math.technion.ac.il using -f
Date: Fri, 25 Apr 2008 17:42:25 +0300
From: "Nadav Har'El" <nyh@math.technion.ac.il>
To: java-user@lucene.apache.org
Subject: Re: Sorting consumes hundreds of MBytes RAM
Message-ID: <20080425144225.GA23623@fermat.math.technion.ac.il>
References: <200804131645.37576.lucene@nitwit.de> <Pine.LNX.4.62.0804141517220.31375@radix.cryptio.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <Pine.LNX.4.62.0804141517220.31375@radix.cryptio.net>
User-Agent: Mutt/1.4.2.2i
Hebrew-Date: 20 Nisan 5768
X-Virus-Checked: Checked by ClamAV on apache.org

On Mon, Apr 14, 2008, Chris Hostetter wrote about "Re: Sorting consumes hundreds of MBytes RAM":
> : And question #2: what am I going to do against it? Index  sharding?
> 
> The only suggestion i can offer is to take a look at LUCENE-769 ... it 
> takes a completley differnet appraoch of using a FieldSelector to access 
> the *stored* field and sort on it ... the memory usage of FieldCache is 
> eliminatedand the expense of longer search times ... in cases where you 
> expect queries to match on a very small subset of the total index, it 
> could be worth using.

Instead of using a stored field, I would recommend using *payloads*.
If you store the field's valye as payload on a custom term, you basically
get a posting-list of the field value, which can be (theoretically, at least)
efficiently skipped on one hand - and read in sequence on the other hand.

-- 
Nadav Har'El                        |       Friday, Apr 25 2008, 20 Nisan 5768
IBM Haifa Research Lab              |-----------------------------------------
                                    |Business jargon is the art of saying
http://nadav.harel.org.il           |nothing while appearing to say a lot.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33786-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 25 14:51:23 2008
Return-Path: <java-user-return-33786-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3565 invoked from network); 25 Apr 2008 14:51:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Apr 2008 14:51:23 -0000
Received: (qmail 79798 invoked by uid 500); 25 Apr 2008 14:51:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79768 invoked by uid 500); 25 Apr 2008 14:51:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79756 invoked by uid 99); 25 Apr 2008 14:51:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Apr 2008 07:51:15 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of glen.newton@gmail.com designates 209.85.162.183 as permitted sender)
Received: from [209.85.162.183] (HELO el-out-1112.google.com) (209.85.162.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Apr 2008 14:50:28 +0000
Received: by el-out-1112.google.com with SMTP id z25so1738588ele.15
        for <java-user@lucene.apache.org>; Fri, 25 Apr 2008 07:50:41 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=3H0QQt+orkpcyJdJ/ETmK9d30d2nyqWkoZHjFpC1Tw4=;
        b=s95KllZ7m7XJVkb3d2/toPg8hSt7oiMsV0ZV3PliOV7yYCKqni9tEjd+e5JgU/SIxLrsH+szKG0R8IOo2+ZVrVW6r3oq50Xq6gbL1bNW7hR8K7v02nibFj5fsmv3oXC4pP1wRvecY3NsEX4oJEawtcKOx8TmYnLtk8+ZoayF4wY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=lJBAQTzaGEPvPQUOFuqOjUxjZHUAXy+Fn4qVY+K94qcODNamWAri900hPuVoWKUKk/knQn5An2fvSvI0hi7fAvEmVXYRDlqNN+baeoKwGufGXS17lEl8uCaSerbgqAPZ9uZq6kB3yjP1knm8zeWrrIueyitAXW4g6KvVXwKobBM=
Received: by 10.141.63.20 with SMTP id q20mr1885041rvk.258.1209135039502;
        Fri, 25 Apr 2008 07:50:39 -0700 (PDT)
Received: by 10.140.148.19 with HTTP; Fri, 25 Apr 2008 07:50:39 -0700 (PDT)
Message-ID: <5e76f3840804250750j7e635df1ga55bf34aab1e4291@mail.gmail.com>
Date: Fri, 25 Apr 2008 10:50:39 -0400
From: "Glen Newton" <glen.newton@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Binding lucene instance/threads to a particular processor(or core)
In-Reply-To: <867513fe0804242135t56ac3470tbb9abb305957971d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <5e76f3840804220539h5b19af2avb3972d3234f8847b@mail.gmail.com>
	 <002301c8a49c$0e215ca0$970fda80@campus.net.ucsf.edu>
	 <5e76f3840804221049y240b44ceo23ac961e92777d74@mail.gmail.com>
	 <867513fe0804222133t74a4e410l3e0482859e3c9ab7@mail.gmail.com>
	 <5e76f3840804231217l225d7ecbof7940a8088fee130@mail.gmail.com>
	 <867513fe0804242135t56ac3470tbb9abb305957971d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Anshum,

I looked at the log and couldn't make too much sense of it.

But I have an update to my original suggestion: try the following
command line parameters:
   -Xms1024m -XX:-UseParallelGC -XX:+ScavengeBeforeFullGC

I got rid of the "-XX:+AggressiveOpts" because perhaps these are not
always stable.
I changed the "-XX:+UseConcMarkSweepGC" to "-XX:-UseParallelGC" as
I've found it to be ~10% faster in both indexing and searching, in the
multithreaded multi-core configuration that I have (YMMV).

Let me know if the above parameters work OK.

Other possibilities:
1 - -XX:+UseBiasedLocking   See
http://java.sun.com/performance/reference/whitepapers/tuning.html#section4.2.5

2 - -XX:+UseFastAccessorMethods

3 - -XX:CompileThreshold=2

But I would suggest doing some profiling to see where the bottlenexk
is in your system, using either a commercial profiler or some the
tools included in the JDK:
http://java.sun.com/javase/6/webnotes/trouble/TSG-VM/html/tooldescr.html

thanks,

Glen

2008/4/25 Anshum <anshumg@gmail.com>:
> Hi Glen,
>
> After starting the JVM as you suggested, the daemon (actually the JVM)
> crashed unexpectedly.
> I didn't really understand the reason behind it from the log (attached),
> could you just have a look and help me deciphering the same.
>
>  Thanks,
>  Anshum
>
>
>
>
>
> On Thu, Apr 24, 2008 at 12:47 AM, Glen Newton <glen.newton@gmail.com> wrote:
> > Hi Anshum,
> >
> > 2008/4/23 Anshum <anshumg@gmail.com>:
> >
> > > Hi Glen,
> > >
> > >  As far as stats for index/search are concerned, here they are:
> > >  * Yes, it is a web based application
> > >  * I am currently facing issues when the number of concurrent searches
> goes
> > >  high. The search is not able to handle over 2.5 searches per second.
> > What is the OS, hardware etc you are using?
> >
> > I am assuming you are only opening one instance of IndexSearcher for
> > all of your threads/queries (I would do it in the servlet init()
> > method) to use, as indicated in
> >
> http://lucene.apache.org/java/2_3_1/api/org/apache/lucene/search/IndexSearcher.html
> >
> >
> > >  * JVM command line parameters: -server mode; Max heap size 2GB (As it
> is a
> > >  32 bit machine/OS and that is the limit in the case)
> > What JVM/version?
> >
> > Have you tried running a profiler to see what is happening or even
> > jconsole (add  -Dcom.sun.management.jmxremote to your command line
> > parameters and (in Linux at least) run jconsole after the JVM has
> > started.
> >
> > A general suggestion:
> >  -XX:+AggressiveOpts -XX:+ScavengeBeforeFullGC   -Xms2000m
> > -XX:+UseConcMarkSweepGC
> >
> > Although the garbage collection depends on your configuration.
> >
> >
> > >  * Performance expectations :
> > >   * Mean search time :1-2 seconds (though that is a lot considering that
> I
> > >  have tried other engines, though with smaller indexes and they seem to
> have
> > >  sub 0.01s searching time)
> >
> > Yes, I am also surprised by this poor performance.
> >
> >
> > >  * No, I do not store any fields.
> > >  * Yes, I am using multiple machines ( more than a couple ).serving the
> same
> > >  index; a little more than just a vanilla load balancing mechanism;
> sending
> > >  similar requests to the same server to better OS level caching
> > >  * We do not index and search on the same machine, so in that case, I
> would
> > >  not think that changing the priority of these threads would matter. In
> other
> > >  words, there is nothing but search that happens on the search server.
> If
> > >  that is what you meant when you wrote about increasing the thead
> priority.
> >
> > Your servlet environment has many threads that have to do a lot of
> > things before they get around to the part of your code that does the
> > searching. Once they get to the search part, you want them to have
> > higher priority than the threads that are handling requests much
> > further back in the servlet pipeline. So set the thread priority
> > higher when it gets to your code. Of course you would need to test to
> > see the impact on performance in your particular case.
> >
> >
> > >
> > >  I had already started trying the TPE and  guess it would provide a lot
> of
> > >  improvement but 'm looking for other ways as well ! :)
> >
> > -glen
> >
> >
> >
> >
> >
> > >  --
> > >  Anshum
> > >
> > >
> > >
> > >  On Tue, Apr 22, 2008 at 11:19 PM, Glen Newton <glen.newton@gmail.com>
> wrote:
> > >
> > >  > So even if you only have one index, this is the way to go to manage
> > >  > this kind of problem.
> > >  >
> > >  > Looking at the implementation and having used ThreadPoolExecutor
> (TPE)
> > >  > a lot, I would make the following suggestions for this class so as to
> > >  > better support this particular use case:
> > >  > Better access to the configuration of the TPE is needed: the ability
> > >  > to choose the number of threads (pools size and max pool size), the
> > >  > type and nature of the queue, etc. Also, the default behaviour of TPE
> > >  > is to throw an exception when a job is submitted and the queue is
> > >  > full: throwing an exception is expensive, especially when dozens or
> > >  > hundreds of searches are being rejected and many exceptions are
> > >  > occurring in a high load situation. Instead, being able to set the
> > >  > RejectedExecutionHandler on the TPE would allow for a graceful
> > >  > handling of rejected queries (feedback to user application, etc).
> > >  > Also, TPE allows for a custom ThreadFactory, which I use to produce
> > >  > threads with the highest priority to do the searching.
> > >  >
> > >  > Right now the implementation sets the #threads and queue size as a
> > >  > function of the number of Searchables, which is reasonable for this
> > >  > use case. But it would generalize better if these were a function of
> > >  > the number of cores on the machine, or some combination.
> > >  >
> > >  > That said, I would suggest having adding the ability to set the
> > >  > ThreadPoolExecutor completely, with a getter/setter. This would allow
> > >  > this class to be useful beyond the use case of multiple indexes,
> > >  > becoming more generalizable to a number of use cases including
> > >  > allowing it to support the use case of one (or more indexes) and a
> > >  > high work load of queries that need to be managed. It could use the
> > >  > same defaults if the TPE is not set externally (is null).
> > >  >
> > >  > -Glen
> > >  >
> > >  > 2008/4/22 Renaud Waldura <renaud.waldura@library.ucsf.edu>:
> > >  > > > one solution is to set-up a ThreadPoolExecutor[2] with a fixed
> > >  > >  > number of threads and a limited queue size (use a bound
> > >  > BlockingQueue[3])
> > >  > >
> > >  > >  Yes, this is precisely how the ConcurrentMultiSearcher works.
> > >  > >  https://issues.apache.org/jira/browse/LUCENE-423
> > >  > >
> > >  > >
> > >  > >
> > >  > >
> > >  > >  -----Original Message-----
> > >  > >  From: Glen Newton [mailto:glen.newton@gmail.com]
> > >  > >  Sent: Tuesday, April 22, 2008 5:40 AM
> > >  > >  To: java-user@lucene.apache.org
> > >  > >  Subject: Re: Binding lucene instance/threads to a particular
> > >  > processor(or
> > >  > >  core)
> > >  > >
> > >  > >
> > >  > >
> > >  > > Anshun,
> > >  > >
> > >  > >  I think I am dealing with an index of similar scale: 6.4 million
> > >  > records, 83
> > >  > >  GB index (see [1] for more info)
> > >  > >
> > >  > >  I mistakenly thought from your original posting that you were
> > >  > interested in
> > >  > >  binding threads to processors for indexing, but it is sounding
> like you
> > >  > want
> > >  > >  to do this for searching. I am not sure if this would work well
> for
> > >  > >  searching, as there is a great deal more ephemeral state. But I am
> not
> > >  > sure.
> > >  > >
> > >  > >  With respect to handling concurrency for search, could you
> describe
> > >  > your
> > >  > >  environment better?
> > >  > >  - Is it an web-base application?
> > >  > >  - What sort of problems do you have now?
> > >  > >  - What are your java command line parameters (heap, etc.)
> > >  > >  - What are the performance expectations, i.e. average search < N1
> > >  > seconds;
> > >  > >  median search time < N2 seconds
> > >  > >  - Are you storing any fields and if so, do you need to store so
> many?
> > >  > >  - Do you have the choice of serving searches from multiple
> machines?
> > >  > >  i.e. load balance across >1 machine; We've found this to be one of
> the
> > >  > best
> > >  > >  solutions for scaling;
> > >  > >  - One thing that I do for both indexing and searching is that the
> > >  > threads
> > >  > >  that are doing these tasks I always shift their priority to MAX,
> so
> > >  > that
> > >  > >  they are run in preference to threads doing other things, like
> > >  > preparing
> > >  > >  Documents, etc.
> > >  > >
> > >  > >  If it is a web-type environment, one solution is to set-up a
> > >  > >  ThreadPoolExecutor[2] with a fixed number of threads and a limited
> > >  > queue
> > >  > >  size (use a bound BlockingQueue[3]) . You would have to experiment
> with
> > >  > the
> > >  > >  numbers to get the sweet-spot for your situation.
> > >  > >  I would suggest starting with 2 times the number processors
> (cores) and
> > >  > a
> > >  > >  queue of say 20. Requests are queued, but if the request cannot be
> > >  > queued,
> > >  > >  at least the application then knows that it is too busy and you
> can
> > >  > give the
> > >  > >  user a message "The system is too busy at this moment, please try
> again
> > >  > in a
> > >  > >  few seconds..." kind of thing. The advantage is also that when
> things
> > >  > are
> > >  > >  very busy, you have the accepted requests handled in a reasonable
> > >  > amount of
> > >  > >  time, and some users being told things are too busy, as opposed to
> all
> > >  > the
> > >  > >  requests going in and the system thrashing (and perhaps
> running-out of
> > >  > >  memory at the same time) and everyone's queries being very slow.
> > >  > >
> > >  > >  But I would suggest setting-up a test harness to emulate your
> > >  > production
> > >  > >  conditions to try these things out...
> > >  > >
> > >  > >  -Glen
> > >  > >
> > >  > >  [1]
> > >  >
> http://zzzoot.blogspot.com/2008/04/lucene-indexing-performance-benchmarks
> > >  > >  .html
> > >  > >  [2]
> > >  >
> http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/ThreadPoolEx
> > >  > >  ecutor.html
> > >  > >  [3]
> > >  >
> http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/BlockingQueu
> > >  > >  e.html
> > >  > >
> > >  > >
> > >  > >  2008/4/22 Anshum <anshumg@gmail.com>:
> > >  > >  > The paper seems pretty good but I am still wondering if there
> was a
> > >  > >  > way to  achieve this through the command line parameters. I'm
> just
> > >  > >  > trying this to  optimize the code, if this works, would let all
> know
> > >  > >  > else would keep  everyone informed :)  Any other suggestions for
> > >  > >  > handling a concurrency of over 7 search requests  per second for
> an
> > >  > >  > index size of over 15Gigs containing over 13 million  records?
> > >  > >  >  Also, could someone help me with obtaining a 'index size' -
> > >  > >  > 'concurrency' -  'processor power' - 'memory' relationship
> formula
> > >  > (or
> > >  > >  something similar)?
> > >  > >  >
> > >  > >  >  --
> > >  > >  >  Anshum
> > >  > >  >
> > >  > >  >
> > >  > >  >
> > >  > >  >
> > >  > >  >  On Tue, Apr 22, 2008 at 3:55 AM, Antony Bowesman
> <adb@teamware.com>
> > >  > >  wrote:
> > >  > >  >
> > >  > >  >  > That paper from 1997 is pretty old, but mirrors our
> experiences in
> > >  > >  > those  > days. Then, we used Solaris processor sets to really
> improve
> > >  > >  > performance by  > binding one of our processes to a particular
> CPU
> > >  > >  > while leaving the other  > CPUs to manage the thread intensive
> work.
> > >  > >  >  >
> > >  > >  >  > You can bind processes/LWPs to a CPU on Solaris with psrset.
> > >  > >  >  >
> > >  > >  >  > The Solaris thread model in the late '90s was also a
> significant
> > >  > >  > factor in  > performance of multi-threaded programs.  The
> default
> > >  > >  > thread library in  > Solaris 8 implemented a MxN unbound thread
> model
> > >  > >  > (threads/LWPS).  In those  > days we found that it did not
> perform
> > >  > >  > well, so used the bound thread model  > (i.e. 1:1) where a
> Solaris
> > >  > >  > thread was bound permanently to an LWP.  That  > improved
> performance
> > >  > >  > a lot.  In Solaris 8, Sun had what they called the  >
> 'alternate'
> > >  > >  > thread library (T2) around 2000, which became the default  >
> library
> > >  > >  > in Solaris 9, and implemented a 1:1 model of Solaris threads to
> >
> > >  > LWPs.
> > >  > >  That new library had dramatic performance improvements over the
> old.
> > >  > >  >  >
> > >  > >  >  > Some background info for Java and threading  >  >
> > >  > >  >
> http://java.sun.com/j2se/1.5.0/docs/guide/vm/thread-priorities.html
> > >  > >  >  >
> > >  > >  >  > Antony
> > >  > >  >  >
> > >  > >  >  >
> > >  > >  >  >
> > >  > >  >  > Glen Newton wrote:
> > >  > >  >  >
> > >  > >  >  > > I realised that not everyone on this list might be able to
> > >  > access
> > >  > >  > the  > > IEEE paper I pointed-out, so I will include the
> abstract and
> > >  > >  > some  > > paragraphs from the paper which I have included below.
> > >  > >  >  > >
> > >  > >  >  > > Also of interest (and should be available to all): Fedorova
> et
> > >  > al.
> > >  > >  >  > > 2005. Performance of Multithreaded Chip Multiprocessors And
> > >
> > >  > >  > Implications For Operating System Design. Usenix 2005.
> > >  > >  >  > > http://www.eecs.harvard.edu/margo/papers/usenix05/paper.pdf
> > >  > >  >  > > "Abstract: We investigated how operating system design
> should be
> > >  > >  > > > adapted for multithreaded chip multiprocessors (CMT) - a new
> > >
> > >  > >  > generation of processors that exploit thread-level parallelism
> to
> > >  > mask
> > >  > >  > > > the memory latency in modern workloads. We  > > determined
> that
> > >  > >  > the L2 cache is a critical shared resource on CMT and  > > that
> an
> > >  > >  > insufficient amount of L2 cache can undermine the ability to  >
> >
> > >  > hide
> > >  > >  > memory latency on these processors. To use the L2 cache as  > >
> > >  > >  > efficiently as possible, we propose an L2-conscious scheduling
> > >
> > >  > >  > algorithm and quantify its performance potential. Using this
> > >  > algorithm
> > >  > >  > > > it is possible to reduce miss ratios in the L2 cache by
> 25-37%
> > >  > and
> > >  > >  > > > improve processor throughput by 27-45%."
> > >  > >  >  > >
> > >  > >  >  > >
> > >  > >  >  > > From Lundberg, L. 1997:
> > >  > >  >  > > Abstract: "The default scheduling algorithm in Solaris and
> other
> > >  > >  > > > operating systems may result in frequent relocation of
> threads at
> > >  > >  > > > run-time. Excessive thread relocation cause  > > poor memory
> > >  > >  > performance. This can be avoided by binding threads to  > >
> > >  > >  > processors. However, binding threads to processors may result in
> an
> > >  >  >
> > >  > >  > > unbalanced load. By considering a previously obtained
> theoretical
> > >  >  >
> > >  > >  > > result and by evaluating a set of multithreaded Solaris  > >
> > >  > >  > programs using a multiprocessor with 8 processors, we are able
> to  >
> > >  > >
> > >  > >  > bound the maximum performance loss due to binding threads, The
> > >
> > >  > >  > theoretical result is also recapitulated. By evaluating another
> set
> > >  > of
> > >  > >  > > > multithreaded programs, we show that the gain of binding
> threads
> > >  > >  > to  > > processors may be substantial, particularly for programs
> with
> > >  > >  > fine  > > grained parallelism."
> > >  > >  >  > >
> > >  > >  >  > > First paragraph: "The thread concept in Solaris [3][5] and
> other
> > >  > >  > > > operating systems makes it possible to write multithreaded
> > >  > >  > programs,  > > which can be executed in parallel on a
> multiprocessor.
> > >  > >  > Previous  > > experience from real world programs [4] show that,
> > >  > using
> > >  > >  > the default  > > scheduling algorithm in Solaris, threads are
> > >  > >  > frequently relocated from  > > one processor  > > to another at
> > >  > >  > run-time. After each such relocation, the code and data  > >
> > >  > >  > associated with the relocated thread is moved from the cache
> memory
> > >  > of
> > >  > >  > > > the 0113 processor to the cache of the new processor. This
> > >  > reduces
> > >  > >  > the  > > performance. Run-time relocation of threads to
> processors
> > >  > can
> > >  > >  > also  > > result in unpredictable response times. This is a
> problem
> > >  > in
> > >  > >  > systems  > > which operate in a real-time environment. In order
> to
> > >  > >  > avoid poor  > > memory performance and unpredictable real-time
> > >  > >  > behaviour due to  > > frequent thread relocation, threads can be
> > >  > bound
> > >  > >  > to processors using  > > the processor-bind directive [3] [5].
> The
> > >  > >  > major problem with binding  > > threads is that one can end up
> with
> > >  > an
> > >  > >  > unbalanced load, i.e. some  > > processors may be extremely busy
> > >  > >  > during some time periods while other  > > processors are idle."
> > >  > >  >  > >
> > >  > >  >  > > -Glen
> > >  > >  >  > >
> > >  > >  >  > > On 21/04/2008, Glen Newton <glen.newton@gmail.com> wrote:
> > >  > >  >  > >
> > >  > >  >  > > > And this discussion on bound threads may also shed light
> on
> > >  > things:
> > >  > >  >  > > >
> > >  > >  >  > > >
> > >  > >  >
> > >  >
> http://coding.derkeiler.com/Archive/Java/comp.lang.java.programmer/200
> > >  > >  > 7-11/msg02801.html
> > >  > >  >  > > >
> > >  > >  >  > > >
> > >  > >  >  > > >  -Glen
> > >  > >  >  > > >
> > >  > >  >  > > >
> > >  > >  >  > > >  On 21/04/2008, Glen Newton <glen.newton@gmail.com>
> wrote:
> > >  > >  >  > > >  > BInding threads to processors - in many situations -
> > >  > >  > improves  > > >  >  throughput by reducing memory overhead. When
> a
> > >  > >  > thread is running  > > > on a  > > >  >  core, its state is
> local; if
> > >  > >  > it is timeshared-out and either 1)  > > >  >  swapped back in on
> the
> > >  > >  > same core, it is likely that there will be  > > >  the  > > >  >
> > >  > >  > core's L1 cache; or 2) onto another core, there will not be a  >
> > >
> > >  > >  > cache  > > >  >  hit and the state will have to be fetched from
> L2 or
> > >  > >  > main memory,  > > >  >  incurring a performance hit, esp in the
> > >  > >  > latter. See Lundberg, L.
> > >  > >  >  > > > 1997.
> > >  > >  >  > > >  >  Evaluating the Performance Implications of Binding
> Threads
> > >  > >  > to  > > >  >  Processors. 393.
> > >  > >  >  > > > http://ieeexplore.ieee.org/iel3/5020/13768/00634520.pdf
> > >  > >  >  > > >  >  for more info.
> > >  > >  >  > > >  >
> > >  > >  >  > > >  >  If you are using JVM on Solaris on SPARC, you should
> take
> > >  > a
> > >  > >  > look  > > > at  > > >  >  the following links for tuning (the
> Sun JVM
> > >  > >  > on Solaris SPARC has  > > > many  > > >  >  more performance
> tuning
> > >  > >  > parameters available), including  > > > threading:
> > >  > >  >  > > >  >  -
> http://java.sun.com/docs/hotspot/threads/threads.html
> > >  > >  >  > > >  >  -
> > >  > >  >  > > >
> > >  > >  >
> http://java.sun.com/j2se/1.5.0/docs/guide/vm/thread-priorities.html
> > >  > >  >  > > >  >  -
> > >  > >  >  > > >
> > >  > >  >
> > >  >
> http://www-1.ibm.com/support/docview.wss?rs=180&context=SSEQTP&uid=swg
> > >  > >  > 21107291  > > >  >  -
> > >  > >  > http://java.sun.com/javase/technologies/performance.jsp
> > >  > >  >  > > >  >
> > >  > >  >  > > >  >
> > >  > >  >  > > >  >  -Glen
> > >  > >  >  > > >  >
> > >  > >  >  > > >  >
> > >  > >  >  > > >  >
> > >  > >  >  > > >  >
> > >  > >  >  > > >  >
> > >  > >  >  > > >  >
> > >  > >  >  > > >  >
> > >  > >  >  > > >  >  On 21/04/2008, Ulf Dittmer <udittmer@yahoo.com>
> wrote:
> > >  > >  >  > > >  >  > This sounds odd. Why would restricting it to a
> single  >
> > >  > >  > > >  >  >  core improve performance? The point of using multiple
> > >
> > >  > >  > >  >  >  cores (and multiple threads) is to improve performance
> > >
> > >  > >
> > >  > >  > >  >  isn't it? I'd leave thread scheduling decisions to the  >
> > >
> > >  >  >
> > >  > >  > >  JVM. Plus, I don't think there is anything in Java to  > > >
> >  >
> > >  > >  > facilitate this (short of using JNI).
> > >  > >  >  > > >  >  >
> > >  > >  >  > > >  >  >  Are you talking about indexing or searching? You
> may  >
> > >  > >  > > >  >  >  be able to use multiple parallel threads to improve
> > > >
> > >  > >  > >  >  indexing performance. I don't think Lucene uses  > > >  >
> >
> > >  > >  > multi-threading for searching; not unless you have  > > >  >  >
> > >  > >  > multiple indices, anyway.
> > >  > >  >  > > >  >  >
> > >  > >  >  > > >  >  >  Ulf
> > >  > >  >  > > >  >  >
> > >  > >  >  > > >  >  >
> > >  > >  >  > > >  >  >
> > >  > >  >  > > >  >  >  --- Anshum <anshumg@gmail.com> wrote:
> > >  > >  >  > > >  >  >
> > >  > >  >  > > >  >  >  > Hi,
> > >  > >  >  > > >  >  >  >
> > >  > >  >  > > >  >  >  > I have been trying to bind my lucene instance
> (JVM -
> > >  > >  > > > >  >  >  > Sun Hotspot*) to a  > > >  >  >  > particular
> core so
> > >  > >  > as to improve the performance. Is  > > >  >  >  > there a way to
> do
> > >  > so
> > >  > >  > or  > > >  >  >  > is there support in lucene to explicitly
> control
> > >  > >  > the  > > >  >  >  > thread - processor  > > >  >  >  > linkup?
> > >  > >  >  > > >  >  >  >
> > >  > >  >  > > >  >  >  > --
> > >  > >  >  > > >  >  >  > --
> > >  > >  >  > > >  >  >  > The facts expressed here belong to everybody,
> the  >
> > >  > >
> > >  > >  > >  >  >  > opinions to me.
> > >  > >  >  > > >  >  >  > The distinction is yours to draw............
> > >  > >  >  > > >  >  >  >
> > >  > >  >  > > >  >  >
> > >  > >  >  > > >  >  >
> > >  > >  >  > > >  >  >
> > >  > >  >  > > >  >  >
> > >  > >  >  > > >  >  >
> > >  > >  >  > > >
> > >  > >  >
> > >  >
> ______________________________________________________________________
> > >  > >  > ______________  > > >  >  >  Be a better friend, newshound, and
> > >
> > >  > >
> > >  > >  > >  >  know-it-all with Yahoo! Mobile.  Try it now.
> > >  > >  >  > > >
> http://mobile.yahoo.com/;_ylt=Ahu06i62sR8HDtDypao8Wcj9tAcJ
> > >  > >  >  > > >  >  >
> > >  > >  >  > > >  >  >
> > >  > >  >  > > >
> > >  > >  >
> ---------------------------------------------------------------------
> > >  > >  >  > > >  >  >  To unsubscribe, e-mail:
> > >  > >  > java-user-unsubscribe@lucene.apache.org
> > >  > >  >  > > >  >  >  For additional commands, e-mail:
> > >  > >  >  > > > java-user-help@lucene.apache.org  > > >  >  >  > > >  >
> >  >
> > >  > >
> > >  > >  > >  >  > > >  >  > > >  >  > > >  > --  > > >  >  > > >  >  -  >
> > >
> > >  >  >
> > >  > >  > > > >  > > >  > > >  > > > --  > > >  > > >  -  > > >  > > >  >
> >  >
> > >  > >
> > >  > >  > >  >
> > >  > >  >
> ---------------------------------------------------------------------
> > >  > >  >  > To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> > >  > >  >  > For additional commands, e-mail:
> java-user-help@lucene.apache.org
> > >  > >  > >  >
> > >  > >  >
> > >  > >  >
> > >  > >  >  --
> > >  > >  >
> > >  > >  >
> > >  > >  > --
> > >  > >  >  The facts expressed here belong to everybody, the opinions to
> me.
> > >  > >  >  The distinction is yours to draw............
> > >  > >  >
> > >  > >
> > >  > >
> > >  > >
> > >  > >  --
> > >  > >
> > >  > >  -
> > >  > >
> > >  > >
> > >  > >
> > >  > >
> ---------------------------------------------------------------------
> > >  > >  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >  > >  For additional commands, e-mail: java-user-help@lucene.apache.org
> > >  > >
> > >  > >
> > >  >
> > >  >
> > >  >
> > >  > --
> > >  >
> > >  > -
> > >  >
> > >  > ---------------------------------------------------------------------
> > >  > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >  > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >  >
> > >  >
> > >
> > >
> > >  --
> > >  --
> > >  The facts expressed here belong to everybody, the opinions to me.
> > >  The distinction is yours to draw............
> > >
> >
> >
> >
> > --
> >
> >
> >
> >
> > -
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
>
> --
> --
> The facts expressed here belong to everybody, the opinions to me.
> The distinction is yours to draw............
> ---------------------------------------------------------------------
>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  For additional commands, e-mail: java-user-help@lucene.apache.org
>



-- 

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33787-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 25 15:02:36 2008
Return-Path: <java-user-return-33787-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14715 invoked from network); 25 Apr 2008 15:02:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Apr 2008 15:02:35 -0000
Received: (qmail 96969 invoked by uid 500); 25 Apr 2008 15:02:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96943 invoked by uid 500); 25 Apr 2008 15:02:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96932 invoked by uid 99); 25 Apr 2008 15:02:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Apr 2008 08:02:29 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.14.220.159] (HELO fg-out-1718.google.com) (72.14.220.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Apr 2008 15:01:45 +0000
Received: by fg-out-1718.google.com with SMTP id d23so3535879fga.27
        for <java-user@lucene.apache.org>; Fri, 25 Apr 2008 08:01:57 -0700 (PDT)
Received: by 10.86.93.17 with SMTP id q17mr1374929fgb.18.1209135717165;
        Fri, 25 Apr 2008 08:01:57 -0700 (PDT)
Received: by 10.86.58.14 with HTTP; Fri, 25 Apr 2008 08:01:57 -0700 (PDT)
Message-ID: <11e852b50804250801j16be8dbfhade264540469d487@mail.gmail.com>
Date: Fri, 25 Apr 2008 16:01:57 +0100
From: "Chris Mannion" <chris.mannion@nonstopgov.com>
To: java-user@lucene.apache.org
Subject: Really dumb search problem
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1826_26120009.1209135717153"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1826_26120009.1209135717153
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi All

I'm going to start this with an apology because, as you'll see below, I've
probably missed out something quite fundamental about how Lucene works.

However, I'll explain the problem, we have a system setup which indexes and
searches records about business properties.  One of the fields we index on
is the postcode (zip code).  When putting the records into the idex, the
postcode field is processed as follows -

inspectionDoc.add(new Field("postcode", postcode, Field.Store.YES,
Field.Index.UN_TOKENIZED));

When we search, we build a very simple query.  For example, if the user
enters M11 1LQ in the search box, then we'll build a query in the form of
"(postcode:(M11 1LQ) )"

However, the postcode search never returns any results.  Other fields we
search on, using more complex query strings seem to work well, but postcode
never finds anything.  I've tried outputting the contents of Documents found
by other searches to make sure the postcode values are going in correctly
and they're definitely being at least stored correctly if not indexed.

Has anyone got an ideas why such a simple search, which should pick up
several exact matches, doesn't pick up anything?  Any help, however
insultingly simple it might seem, will be gratefully received at this
point.  Thanks.

Chris Mannion

------=_Part_1826_26120009.1209135717153--

From java-user-return-33788-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 25 15:15:30 2008
Return-Path: <java-user-return-33788-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39393 invoked from network); 25 Apr 2008 15:15:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Apr 2008 15:15:30 -0000
Received: (qmail 31621 invoked by uid 500); 25 Apr 2008 15:15:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31587 invoked by uid 500); 25 Apr 2008 15:15:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31576 invoked by uid 99); 25 Apr 2008 15:15:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Apr 2008 08:15:24 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [76.13.9.28] (HELO web65408.mail.ac4.yahoo.com) (76.13.9.28)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 25 Apr 2008 15:14:31 +0000
Received: (qmail 84895 invoked by uid 60001); 25 Apr 2008 15:14:49 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=ObaarHS+bU3LbMs+QW4mNPpUXYHkf7OOy8l0UiYuZvM6JjT+5hYkcwXYQh0Ny/t6a4L/r92HdjWeGvYrwe8ByhvLJ57znKUV/Hpb1ARwuAcGZD5xNc+R342XB478y5xzsJxGL9GgzreeKP9z4cWeFs9NllNLJYsWNfjzxVMkfXc=;
X-YMail-OSG: 4ywm7TsVM1n2hT1SiXhIh4hAnelBcTFysyicjcmyveDwI6EEY7FmRltyj40tvsiTfA95y0k2isUyZQo2mJuy0BLzZ0sbBn2TZS5ndkBngEWwNulDCuFvla0Rng--
Received: from [85.178.186.153] by web65408.mail.ac4.yahoo.com via HTTP; Fri, 25 Apr 2008 08:14:49 PDT
Date: Fri, 25 Apr 2008 08:14:49 -0700 (PDT)
From: Ulf Dittmer <udittmer@yahoo.com>
Subject: Re: Really dumb search problem
To: java-user@lucene.apache.org
In-Reply-To: <11e852b50804250801j16be8dbfhade264540469d487@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
Message-ID: <734267.84606.qm@web65408.mail.ac4.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Have you tried double-quoting the postcode instead of
using parentheses:

postcode:"M11 1LQ"

Ulf

--- Chris Mannion <chris.mannion@nonstopgov.com>
wrote:

> "(postcode:(M11 1LQ) )"
> 
> However, the postcode search never returns any results.


      ____________________________________________________________________________________
Be a better friend, newshound, and 
know-it-all with Yahoo! Mobile.  Try it now.  http://mobile.yahoo.com/;_ylt=Ahu06i62sR8HDtDypao8Wcj9tAcJ

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33789-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 25 15:47:06 2008
Return-Path: <java-user-return-33789-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56338 invoked from network); 25 Apr 2008 15:47:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Apr 2008 15:47:06 -0000
Received: (qmail 82241 invoked by uid 500); 25 Apr 2008 15:46:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82206 invoked by uid 500); 25 Apr 2008 15:46:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82195 invoked by uid 99); 25 Apr 2008 15:46:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Apr 2008 08:46:59 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 209.85.132.251 as permitted sender)
Received: from [209.85.132.251] (HELO an-out-0708.google.com) (209.85.132.251)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Apr 2008 15:46:14 +0000
Received: by an-out-0708.google.com with SMTP id c5so997000anc.49
        for <java-user@lucene.apache.org>; Fri, 25 Apr 2008 08:46:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:subject:from:to:in-reply-to:references:content-type:date:message-id:mime-version:x-mailer:content-transfer-encoding;
        bh=mS0gR6w5DPnKBy87JuowAQoVJ7nF4xtPSb/PItpTLDs=;
        b=QHK2nMcb93k86cNBpCAv0T7F2Kn6AXROiUhmgJgGqZ4ynYpViorm60ovts4Hli0Vrgo/7rUnfTL3lCwAB2pL143PWvPUzF3A283G/znpqLp8t2fB9rTm6NJYZioDCYPyz13vTUes46okNv9zn78XKsUOMA+2PUJPnZphWUm2o5U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=subject:from:to:in-reply-to:references:content-type:date:message-id:mime-version:x-mailer:content-transfer-encoding;
        b=bEDU9o5EgvBrBMiToqxsObk03g7TcbVKuN1vJDgZi2LVu9OanS5xJkXl7u7J6rIaQkH7OI9PrTRqUfRxhjwVnJ/o+H1fBh9rRJLbnATGPkdXPub98BMf2DRZC2lSGDRG/8lkwOsnSpu6rbVcC9FWFiWa1ajGd+XUuA9N9TDhWE8=
Received: by 10.100.4.1 with SMTP id 1mr7828877and.77.1209138385962;
        Fri, 25 Apr 2008 08:46:25 -0700 (PDT)
Received: from ?192.168.1.104? ( [69.124.234.149])
        by mx.google.com with ESMTPS id e10sm2025568qbe.12.2008.04.25.08.46.24
        (version=SSLv3 cipher=RC4-MD5);
        Fri, 25 Apr 2008 08:46:24 -0700 (PDT)
Subject: Re: Really dumb search problem
From: Mark Miller <markrmiller@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <11e852b50804250801j16be8dbfhade264540469d487@mail.gmail.com>
References: <11e852b50804250801j16be8dbfhade264540469d487@mail.gmail.com>
Content-Type: text/plain
Date: Fri, 25 Apr 2008 11:46:23 -0400
Message-Id: <1209138383.22447.2.camel@m-laptop>
Mime-Version: 1.0
X-Mailer: Evolution 2.22.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

You can't tokenize the the search query if its on that field...using
maybe a per field analyzer and the keyword analyzer? Check em out if you
havn't.

On Fri, 2008-04-25 at 16:01 +0100, Chris Mannion wrote:
> Hi All
> 
> I'm going to start this with an apology because, as you'll see below, I've
> probably missed out something quite fundamental about how Lucene works.
> 
> However, I'll explain the problem, we have a system setup which indexes and
> searches records about business properties.  One of the fields we index on
> is the postcode (zip code).  When putting the records into the idex, the
> postcode field is processed as follows -
> 
> inspectionDoc.add(new Field("postcode", postcode, Field.Store.YES,
> Field.Index.UN_TOKENIZED));
> 
> When we search, we build a very simple query.  For example, if the user
> enters M11 1LQ in the search box, then we'll build a query in the form of
> "(postcode:(M11 1LQ) )"
> 
> However, the postcode search never returns any results.  Other fields we
> search on, using more complex query strings seem to work well, but postcode
> never finds anything.  I've tried outputting the contents of Documents found
> by other searches to make sure the postcode values are going in correctly
> and they're definitely being at least stored correctly if not indexed.
> 
> Has anyone got an ideas why such a simple search, which should pick up
> several exact matches, doesn't pick up anything?  Any help, however
> insultingly simple it might seem, will be gratefully received at this
> point.  Thanks.
> 
> Chris Mannion


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33790-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 25 15:52:11 2008
Return-Path: <java-user-return-33790-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58948 invoked from network); 25 Apr 2008 15:52:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Apr 2008 15:52:11 -0000
Received: (qmail 93003 invoked by uid 500); 25 Apr 2008 15:52:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92974 invoked by uid 500); 25 Apr 2008 15:52:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92949 invoked by uid 99); 25 Apr 2008 15:52:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Apr 2008 08:52:05 -0700
X-ASF-Spam-Status: No, hits=4.4 required=10.0
	tests=HTML_MESSAGE,MSGID_MULTIPLE_AT,SPF_HELO_PASS,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [212.227.126.177] (HELO moutng.kundenserver.de) (212.227.126.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Apr 2008 15:51:12 +0000
Received: from DanielPC (p4FC77D8F.dip.t-dialin.net [79.199.125.143])
	by mrelayeu.kundenserver.de (node=mrelayeu3) with ESMTP (Nemesis)
	id 0MKxQS-1JpQCy2ZMY-0007eM; Fri, 25 Apr 2008 17:51:32 +0200
From: "Daniel Freudenberger" <d.freudenberger@trade-a-game.de>
To: <java-user@lucene.apache.org>
Subject: boosting relevance of certain documents
Date: Fri, 25 Apr 2008 17:49:24 +0200
Message-ID: <000601c8a6eb$efb1ee40$cf15cac0$@freudenberger@trade-a-game.de>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0007_01C8A6FC.B33ABE40"
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: Acim6+9Rwqc2E0ZcQ+a7HXeCrRaEuw==
Content-Language: de
X-Provags-ID: V01U2FsdGVkX182z59ZZyX3mlhJwhJjGy09bL/tUEw+BkhD7g2
 Y4m4Ku56A3zE7cXXog8adoVivha6c/e/8nw1OokOPd6oahvkW8
 pXmBkcfGSEJG2CV5Qf05x/szJN5Nr9DXMbjNexX0S8P6cCe81A
 OFw==
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0007_01C8A6FC.B33ABE40
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hello,

 

I'm using lucene within a new project and I'm not sure about how to solve
the following problem: My index consists of the two attributes "id" and
"searchable". "id" is the id of a product and "searchable" is a combination
of the product name and its category name.

 

 example:

 id     searchable 

 1     fifa 08 - playstation 3 

 2     fifa 2003 fifa 03 - playstation 3 

 3     playstation 60gb hdd - playstation 3 

 4     playstation i like you - playstation 3 

 

When searching for "fifa", lucene returns the product with id 2 at first,
whereas id 1 ("fifa 08") would be the much more relevant result (from the
user side of view). the same problem arises when searching for "playstation"
- the customer expects products having "playstation" in their names at
first, ideally the console itself. in reality however, he gets all possible
products which are in the "playstation" category as well.

 

my idea was to introduce another attribute relevance, which may increase the
relevance of an entry. the actual relevance shouldn't be suppressed
completely though, but should only be taken into account with products that
are similarly relevant for a specific search term.

 

Does anybody have an idea on how to solve this problem?

 

Thank you in advance,

Daniel


------=_NextPart_000_0007_01C8A6FC.B33ABE40--


From java-user-return-33791-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 25 16:59:43 2008
Return-Path: <java-user-return-33791-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89479 invoked from network); 25 Apr 2008 16:59:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Apr 2008 16:59:43 -0000
Received: (qmail 93926 invoked by uid 500); 25 Apr 2008 16:59:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93883 invoked by uid 500); 25 Apr 2008 16:59:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93872 invoked by uid 99); 25 Apr 2008 16:59:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Apr 2008 09:59:36 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ionathan@gmail.com designates 209.85.146.180 as permitted sender)
Received: from [209.85.146.180] (HELO wa-out-1112.google.com) (209.85.146.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Apr 2008 16:58:52 +0000
Received: by wa-out-1112.google.com with SMTP id j40so6125616wah.11
        for <java-user@lucene.apache.org>; Fri, 25 Apr 2008 09:59:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=o8RPJeWJ+dzvFU80xw9DmLgK/b9UKg+MeOmpvfyq5IQ=;
        b=GJ1LaCCH6wB5/Aun8Y1YCOPA0Xj7gZEVbuz9AQJZCvpAdh+6cCeKV4kn/ftdOs30foFg22v8aVvYrAY/lCkn7O3J4bTfXBI7NTijhZI//yDLhHAuN/aWSHQ6HtrDwS+DmAhGhga0uF5DIsRX/KIOKaKcmCUWsw5uSxmLnf9pmno=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=f4LlpfhZVrRNehTVgOYiDTVbFIWOk4WSHg8BBYePuRKcYpwbCENaooYILF7yOpfQyOUcZofyJ7cA3UMFpNYnducFUoJx5HOvZ77lH4KmejlOX+dd3QQ3YAlUjaGui9DWpTXY6kMcaYyKuAZfX/IZ5reskfgXJHTowIwedQvStIQ=
Received: by 10.114.159.5 with SMTP id h5mr3445631wae.222.1209142745944;
        Fri, 25 Apr 2008 09:59:05 -0700 (PDT)
Received: by 10.115.91.4 with HTTP; Fri, 25 Apr 2008 09:59:05 -0700 (PDT)
Message-ID: <6dd2bfeb0804250959k51d0286cj9b954be42c06c7d2@mail.gmail.com>
Date: Fri, 25 Apr 2008 13:59:05 -0300
From: "Jonathan Ariel" <ionathan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: boosting relevance of certain documents
In-Reply-To: <-1858080938835305288@unknownmsgid>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1830_10457134.1209142745932"
References: <-1858080938835305288@unknownmsgid>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1830_10457134.1209142745932
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

How are you analyzing the searchable field?

On Fri, Apr 25, 2008 at 12:49 PM, Daniel Freudenberger <
d.freudenberger@trade-a-game.de> wrote:

> Hello,
>
>
>
> I'm using lucene within a new project and I'm not sure about how to solve
> the following problem: My index consists of the two attributes "id" and
> "searchable". "id" is the id of a product and "searchable" is a
> combination
> of the product name and its category name.
>
>
>
>  example:
>
>  id     searchable
>
>  1     fifa 08 - playstation 3
>
>  2     fifa 2003 fifa 03 - playstation 3
>
>  3     playstation 60gb hdd - playstation 3
>
>  4     playstation i like you - playstation 3
>
>
>
> When searching for "fifa", lucene returns the product with id 2 at first,
> whereas id 1 ("fifa 08") would be the much more relevant result (from the
> user side of view). the same problem arises when searching for
> "playstation"
> - the customer expects products having "playstation" in their names at
> first, ideally the console itself. in reality however, he gets all
> possible
> products which are in the "playstation" category as well.
>
>
>
> my idea was to introduce another attribute relevance, which may increase
> the
> relevance of an entry. the actual relevance shouldn't be suppressed
> completely though, but should only be taken into account with products
> that
> are similarly relevant for a specific search term.
>
>
>
> Does anybody have an idea on how to solve this problem?
>
>
>
> Thank you in advance,
>
> Daniel
>
>

------=_Part_1830_10457134.1209142745932--

From java-user-return-33792-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 25 17:33:22 2008
Return-Path: <java-user-return-33792-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2754 invoked from network); 25 Apr 2008 17:33:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Apr 2008 17:33:22 -0000
Received: (qmail 43013 invoked by uid 500); 25 Apr 2008 17:33:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42983 invoked by uid 500); 25 Apr 2008 17:33:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42972 invoked by uid 99); 25 Apr 2008 17:33:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Apr 2008 10:33:16 -0700
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=MSGID_MULTIPLE_AT,SPF_HELO_PASS,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [212.227.126.174] (HELO moutng.kundenserver.de) (212.227.126.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Apr 2008 17:32:23 +0000
Received: from DanielPC (p4FC77D8F.dip.t-dialin.net [79.199.125.143])
	by mrelayeu.kundenserver.de (node=mrelayeu6) with ESMTP (Nemesis)
	id 0ML29c-1JpRmu0ieW-0008K3; Fri, 25 Apr 2008 19:32:44 +0200
From: "Daniel Freudenberger" <d.freudenberger@trade-a-game.de>
To: <java-user@lucene.apache.org>
References: <-1858080938835305288@unknownmsgid> <6dd2bfeb0804250959k51d0286cj9b954be42c06c7d2@mail.gmail.com>
In-Reply-To: <6dd2bfeb0804250959k51d0286cj9b954be42c06c7d2@mail.gmail.com>
Subject: RE: boosting relevance of certain documents
Date: Fri, 25 Apr 2008 19:30:35 +0200
Message-ID: <000301c8a6fa$123be890$36b3b9b0$@freudenberger@trade-a-game.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: Acim9b7laUeZIhgpTNCWm9YaggGfgwAA/nrA
Content-Language: de
X-Provags-ID: V01U2FsdGVkX18tyUxB376KkEP+MeICtxXw0HLn9vwZoz62yVm
 7KRwHJUZFYDSGpjSB4WHkYmn0+tirPXGgOASJtP2j5GbwykazP
 cwcDi5gvT4AJVxlSPiK674RQi9/evMpEEyL/kq2LlNZDc4LyQS
 PGA==
X-Virus-Checked: Checked by ClamAV on apache.org

I'm using the StandardAnalyzer - hope this answers your question (I'm quite
new to the lucene thing) 

-----Original Message-----
From: Jonathan Ariel [mailto:ionathan@gmail.com] 
Sent: Friday, April 25, 2008 6:59 PM
To: java-user@lucene.apache.org
Subject: Re: boosting relevance of certain documents

How are you analyzing the searchable field?

On Fri, Apr 25, 2008 at 12:49 PM, Daniel Freudenberger <
d.freudenberger@trade-a-game.de> wrote:

> Hello,
>
>
>
> I'm using lucene within a new project and I'm not sure about how to solve
> the following problem: My index consists of the two attributes "id" and
> "searchable". "id" is the id of a product and "searchable" is a
> combination
> of the product name and its category name.
>
>
>
>  example:
>
>  id     searchable
>
>  1     fifa 08 - playstation 3
>
>  2     fifa 2003 fifa 03 - playstation 3
>
>  3     playstation 60gb hdd - playstation 3
>
>  4     playstation i like you - playstation 3
>
>
>
> When searching for "fifa", lucene returns the product with id 2 at first,
> whereas id 1 ("fifa 08") would be the much more relevant result (from the
> user side of view). the same problem arises when searching for
> "playstation"
> - the customer expects products having "playstation" in their names at
> first, ideally the console itself. in reality however, he gets all
> possible
> products which are in the "playstation" category as well.
>
>
>
> my idea was to introduce another attribute relevance, which may increase
> the
> relevance of an entry. the actual relevance shouldn't be suppressed
> completely though, but should only be taken into account with products
> that
> are similarly relevant for a specific search term.
>
>
>
> Does anybody have an idea on how to solve this problem?
>
>
>
> Thank you in advance,
>
> Daniel
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33793-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 25 18:11:27 2008
Return-Path: <java-user-return-33793-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19111 invoked from network); 25 Apr 2008 18:11:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Apr 2008 18:11:27 -0000
Received: (qmail 5278 invoked by uid 500); 25 Apr 2008 18:11:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5255 invoked by uid 500); 25 Apr 2008 18:11:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5244 invoked by uid 99); 25 Apr 2008 18:11:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Apr 2008 11:11:21 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ionathan@gmail.com designates 209.85.146.177 as permitted sender)
Received: from [209.85.146.177] (HELO wa-out-1112.google.com) (209.85.146.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Apr 2008 18:10:37 +0000
Received: by wa-out-1112.google.com with SMTP id j40so6161004wah.11
        for <java-user@lucene.apache.org>; Fri, 25 Apr 2008 11:10:50 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=D9bGcsz4JwDeSK2Beate6k7FFafN7xtcuZPpE0Ys8dU=;
        b=dyBhgxUVSe55c8jrLYK173oGMqBBAF/lMOfIOaufVjWty8kTkjGXi+4gGtHcPJxoV4CTVd8jVhrpt1lmSGebu679DmvlRDBTwHjd3gQrOTrq9yEyYOvdpBgcj92fr7w18IOYi0xeOEkVk39YeF6v3YndzX0TyGY6ftpR/aBHUM8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ZU+jg6PwK74hi1dqYR40O55i+jM8FNb1DHm5GFOzFQfDQ6WeY5b3qVAwcnipQYESfsW35zu2SBu/4UqNt8Puax1LElvS12yxCvEavAri+WpPIhaPK8tRVNxIa+h0CvVUkIcvBmWK8G44OMyePedLhj6kHftbtlj2P5CWFJ8cLc4=
Received: by 10.114.158.1 with SMTP id g1mr3522875wae.203.1209147050468;
        Fri, 25 Apr 2008 11:10:50 -0700 (PDT)
Received: by 10.115.91.4 with HTTP; Fri, 25 Apr 2008 11:10:50 -0700 (PDT)
Message-ID: <6dd2bfeb0804251110ybab00cakbd2661cd2362ea4c@mail.gmail.com>
Date: Fri, 25 Apr 2008 15:10:50 -0300
From: "Jonathan Ariel" <ionathan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: boosting relevance of certain documents
In-Reply-To: <3760940526082580826@unknownmsgid>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2112_11329052.1209147050448"
References: <-1858080938835305288@unknownmsgid>
	 <6dd2bfeb0804250959k51d0286cj9b954be42c06c7d2@mail.gmail.com>
	 <3760940526082580826@unknownmsgid>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2112_11329052.1209147050448
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Ok. So I'm not an expert of the scoring algorithm, but based on tf*idf you
can tell that the returned document is more relevant because it has more
term frequency.

Using the explain you can see the following:

Doc 1
0.643841 = (MATCH) fieldWeight(searchable:fifa in 0), product of:
  1.0 = tf(termFreq(searchable:fifa)=1)
  1.287682 = idf(docFreq=2)
  0.5 = fieldNorm(field=searchable, doc=0)

Doc2
0.68289655 = (MATCH) fieldWeight(searchable:fifa in 1), product of:
  1.4142135 = tf(termFreq(searchable:fifa)=2)
  1.287682 = idf(docFreq=2)
  0.375 = fieldNorm(field=searchable, doc=1)

On Fri, Apr 25, 2008 at 2:30 PM, Daniel Freudenberger <
d.freudenberger@trade-a-game.de> wrote:

> I'm using the StandardAnalyzer - hope this answers your question (I'm
> quite
> new to the lucene thing)
>
> -----Original Message-----
> From: Jonathan Ariel [mailto:ionathan@gmail.com]
> Sent: Friday, April 25, 2008 6:59 PM
> To: java-user@lucene.apache.org
> Subject: Re: boosting relevance of certain documents
>
> How are you analyzing the searchable field?
>
> On Fri, Apr 25, 2008 at 12:49 PM, Daniel Freudenberger <
> d.freudenberger@trade-a-game.de> wrote:
>
> > Hello,
> >
> >
> >
> > I'm using lucene within a new project and I'm not sure about how to
> solve
> > the following problem: My index consists of the two attributes "id" and
> > "searchable". "id" is the id of a product and "searchable" is a
> > combination
> > of the product name and its category name.
> >
> >
> >
> >  example:
> >
> >  id     searchable
> >
> >  1     fifa 08 - playstation 3
> >
> >  2     fifa 2003 fifa 03 - playstation 3
> >
> >  3     playstation 60gb hdd - playstation 3
> >
> >  4     playstation i like you - playstation 3
> >
> >
> >
> > When searching for "fifa", lucene returns the product with id 2 at
> first,
> > whereas id 1 ("fifa 08") would be the much more relevant result (from
> the
> > user side of view). the same problem arises when searching for
> > "playstation"
> > - the customer expects products having "playstation" in their names at
> > first, ideally the console itself. in reality however, he gets all
> > possible
> > products which are in the "playstation" category as well.
> >
> >
> >
> > my idea was to introduce another attribute relevance, which may increase
> > the
> > relevance of an entry. the actual relevance shouldn't be suppressed
> > completely though, but should only be taken into account with products
> > that
> > are similarly relevant for a specific search term.
> >
> >
> >
> > Does anybody have an idea on how to solve this problem?
> >
> >
> >
> > Thank you in advance,
> >
> > Daniel
> >
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_2112_11329052.1209147050448--

From java-user-return-33794-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 25 18:53:38 2008
Return-Path: <java-user-return-33794-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38115 invoked from network); 25 Apr 2008 18:53:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Apr 2008 18:53:38 -0000
Received: (qmail 57894 invoked by uid 500); 25 Apr 2008 18:53:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57868 invoked by uid 500); 25 Apr 2008 18:53:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57850 invoked by uid 99); 25 Apr 2008 18:53:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Apr 2008 11:53:31 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.222.209.11] (HELO mirkwood.informatics.jax.org) (209.222.209.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Apr 2008 18:52:47 +0000
Received: from [127.0.0.1] (corona [209.222.209.245])
	by mirkwood.informatics.jax.org (8.13.8/8.13.8) with ESMTP id m3PIqv0e004618
	for <java-user@lucene.apache.org>; Fri, 25 Apr 2008 14:52:58 -0400 (EDT)
	(envelope-from mhall@informatics.jax.org)
Message-ID: <48122875.4020808@informatics.jax.org>
Date: Fri, 25 Apr 2008 14:52:37 -0400
From: Matthew Hall <mhall@informatics.jax.org>
User-Agent: Thunderbird 1.5.0.14 (Windows/20071210)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Quickie Luke Question
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-PMX-Version: 5.4.1.325704, Antispam-Engine: 2.6.0.325393, Antispam-Data: 2008.4.25.113450
X-PerlMx-Spam: Gauge=IIIIIII, Probability=7%, Report='BODY_SIZE_1000_LESS 0, BODY_SIZE_300_399 0, BODY_SIZE_5000_LESS 0, __C230066_P5 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0, __USER_AGENT 0'
X-Virus-Checked: Checked by ClamAV on apache.org

Does anyone know how to set the MaxClauseCount in luke?

I'm in a situation where I've had to override it when searching against 
my indexes, but now I can't use luke to examine what's going on with my 
queries anymore.

Any help would be appreciated.

Matt

-- 
Matthew Hall
Software Engineer
Mouse Genome Informatics
mhall@informatics.jax.org
(207) 288-6012



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33795-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 25 19:53:47 2008
Return-Path: <java-user-return-33795-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65723 invoked from network); 25 Apr 2008 19:53:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Apr 2008 19:53:47 -0000
Received: (qmail 55601 invoked by uid 500); 25 Apr 2008 19:53:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55571 invoked by uid 500); 25 Apr 2008 19:53:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55479 invoked by uid 99); 25 Apr 2008 19:53:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Apr 2008 12:53:36 -0700
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=MSGID_MULTIPLE_AT,SPF_HELO_PASS,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [212.227.126.186] (HELO moutng.kundenserver.de) (212.227.126.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Apr 2008 19:52:51 +0000
Received: from DanielPC (p4FC778E7.dip.t-dialin.net [79.199.120.231])
	by mrelayeu.kundenserver.de (node=mrelayeu2) with ESMTP (Nemesis)
	id 0MKwtQ-1JpTye1qoI-00022c; Fri, 25 Apr 2008 21:53:03 +0200
From: "Daniel Freudenberger" <d.freudenberger@trade-a-game.de>
To: <java-user@lucene.apache.org>
References: <-1858080938835305288@unknownmsgid>	 <6dd2bfeb0804250959k51d0286cj9b954be42c06c7d2@mail.gmail.com>	 <3760940526082580826@unknownmsgid> <6dd2bfeb0804251110ybab00cakbd2661cd2362ea4c@mail.gmail.com>
In-Reply-To: <6dd2bfeb0804251110ybab00cakbd2661cd2362ea4c@mail.gmail.com>
Subject: RE: boosting relevance of certain documents
Date: Fri, 25 Apr 2008 21:50:46 +0200
Message-ID: <000301c8a70d$a9717e60$fc547b20$@freudenberger@trade-a-game.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: Acim/8OvDjOKHfU6R8+pIHKvpy6NEgADXZ+A
Content-Language: de
X-Provags-ID: V01U2FsdGVkX19Nx8juz2PBDbc9uVrDOWf5hSSzKd/I0nIlW4A
 HY3CdofoWaowA2Ov1/SjZQW0aQ1qbGYLgVAvsA1MiPe2ha7t/j
 Cf17NJSnTldNDk/Ii+fz7BdV8nuy4l1t2wGMOpxuI69LplxjK7
 UIA==
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for your response. I already knew that the relevance is based on the
term frequency but in some cases it's just not what the user expects. 
As I already mentioned, "fifa 2003 fifa 03" vs. "fifa 08" is such a case -
searching for "fifa" would return the "fifa 2003 fifa 03" document first but
the "fifa 08" document is more important (from the user's point of view).

Any suggestions?

Best regards,
Daniel
-----Original Message-----
From: Jonathan Ariel [mailto:ionathan@gmail.com] 
Sent: Friday, April 25, 2008 8:11 PM
To: java-user@lucene.apache.org
Subject: Re: boosting relevance of certain documents

Ok. So I'm not an expert of the scoring algorithm, but based on tf*idf you
can tell that the returned document is more relevant because it has more
term frequency.

Using the explain you can see the following:

Doc 1
0.643841 = (MATCH) fieldWeight(searchable:fifa in 0), product of:
  1.0 = tf(termFreq(searchable:fifa)=1)
  1.287682 = idf(docFreq=2)
  0.5 = fieldNorm(field=searchable, doc=0)

Doc2
0.68289655 = (MATCH) fieldWeight(searchable:fifa in 1), product of:
  1.4142135 = tf(termFreq(searchable:fifa)=2)
  1.287682 = idf(docFreq=2)
  0.375 = fieldNorm(field=searchable, doc=1)

On Fri, Apr 25, 2008 at 2:30 PM, Daniel Freudenberger <
d.freudenberger@trade-a-game.de> wrote:

> I'm using the StandardAnalyzer - hope this answers your question (I'm
> quite
> new to the lucene thing)
>
> -----Original Message-----
> From: Jonathan Ariel [mailto:ionathan@gmail.com]
> Sent: Friday, April 25, 2008 6:59 PM
> To: java-user@lucene.apache.org
> Subject: Re: boosting relevance of certain documents
>
> How are you analyzing the searchable field?
>
> On Fri, Apr 25, 2008 at 12:49 PM, Daniel Freudenberger <
> d.freudenberger@trade-a-game.de> wrote:
>
> > Hello,
> >
> >
> >
> > I'm using lucene within a new project and I'm not sure about how to
> solve
> > the following problem: My index consists of the two attributes "id" and
> > "searchable". "id" is the id of a product and "searchable" is a
> > combination
> > of the product name and its category name.
> >
> >
> >
> >  example:
> >
> >  id     searchable
> >
> >  1     fifa 08 - playstation 3
> >
> >  2     fifa 2003 fifa 03 - playstation 3
> >
> >  3     playstation 60gb hdd - playstation 3
> >
> >  4     playstation i like you - playstation 3
> >
> >
> >
> > When searching for "fifa", lucene returns the product with id 2 at
> first,
> > whereas id 1 ("fifa 08") would be the much more relevant result (from
> the
> > user side of view). the same problem arises when searching for
> > "playstation"
> > - the customer expects products having "playstation" in their names at
> > first, ideally the console itself. in reality however, he gets all
> > possible
> > products which are in the "playstation" category as well.
> >
> >
> >
> > my idea was to introduce another attribute relevance, which may increase
> > the
> > relevance of an entry. the actual relevance shouldn't be suppressed
> > completely though, but should only be taken into account with products
> > that
> > are similarly relevant for a specific search term.
> >
> >
> >
> > Does anybody have an idea on how to solve this problem?
> >
> >
> >
> > Thank you in advance,
> >
> > Daniel
> >
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33796-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 25 22:42:42 2008
Return-Path: <java-user-return-33796-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12574 invoked from network); 25 Apr 2008 22:42:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Apr 2008 22:42:42 -0000
Received: (qmail 42171 invoked by uid 500); 25 Apr 2008 22:42:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42140 invoked by uid 500); 25 Apr 2008 22:42:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42129 invoked by uid 99); 25 Apr 2008 22:42:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Apr 2008 15:42:35 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.207] (HELO spunkymail-a20.g.dreamhost.com) (208.97.132.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Apr 2008 22:41:50 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a20.g.dreamhost.com (Postfix) with ESMTP id A0084E2500
	for <java-user@lucene.apache.org>; Fri, 25 Apr 2008 15:42:02 -0700 (PDT)
Message-Id: <E1F79F77-7624-4CAC-9A83-AFBEC5C2BC49@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <000301c8a70d$a9717e60$fc547b20$@freudenberger@trade-a-game.de>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: boosting relevance of certain documents
Date: Fri, 25 Apr 2008 18:42:00 -0400
References: <-1858080938835305288@unknownmsgid>	 <6dd2bfeb0804250959k51d0286cj9b954be42c06c7d2@mail.gmail.com>	 <3760940526082580826@unknownmsgid> <6dd2bfeb0804251110ybab00cakbd2661cd2362ea4c@mail.gmail.com> <000301c8a70d$a9717e60$fc547b20$@freudenberger@trade-a-game.de>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org

It really depends.  Hand tuning scoring algs for a specific query is  
very prone to local maxima problems.  In other words, you fix one  
query and break 50 others.  Sometimes, a good old "configurable" hard  
code is the way to go.  If you want a specific doc to be #1, make it  
number one.  You will pull your hair out otherwise.  In Solr, this is  
handled via the Query Elevation Component, but isn't all that  
difficult to implement.

Likewise, if you have a priori knowledge that a particular document is  
more important, then give it a relatively large boost during indexing,  
being aware that Lucene does not offer much granularity in terms of  
boosts.  In other words, boost it something like 5 or 10 times,  
instead of 1.1 vs. 1.2.

On the other hand, if you are truly seeing broad problems, then you  
need to build up a set of queries and judgments (ala TREC) or the  
contrib/benchmark Quality packages.  You might also look at Lucene's  
Similarity class.  Lucene's length normalization is often less than  
optimal for certain types of documents (see the IBM Haifa's assessment  
for the "Million Query" track of TREC on the Lucene Wiki).

Cheers,
Grant


On Apr 25, 2008, at 3:50 PM, Daniel Freudenberger wrote:

> Thanks for your response. I already knew that the relevance is based  
> on the
> term frequency but in some cases it's just not what the user expects.
> As I already mentioned, "fifa 2003 fifa 03" vs. "fifa 08" is such a  
> case -
> searching for "fifa" would return the "fifa 2003 fifa 03" document  
> first but
> the "fifa 08" document is more important (from the user's point of  
> view).
>
> Any suggestions?
>
> Best regards,
> Daniel
> -----Original Message-----
> From: Jonathan Ariel [mailto:ionathan@gmail.com]
> Sent: Friday, April 25, 2008 8:11 PM
> To: java-user@lucene.apache.org
> Subject: Re: boosting relevance of certain documents
>
> Ok. So I'm not an expert of the scoring algorithm, but based on  
> tf*idf you
> can tell that the returned document is more relevant because it has  
> more
> term frequency.
>
> Using the explain you can see the following:
>
> Doc 1
> 0.643841 = (MATCH) fieldWeight(searchable:fifa in 0), product of:
>  1.0 = tf(termFreq(searchable:fifa)=1)
>  1.287682 = idf(docFreq=2)
>  0.5 = fieldNorm(field=searchable, doc=0)
>
> Doc2
> 0.68289655 = (MATCH) fieldWeight(searchable:fifa in 1), product of:
>  1.4142135 = tf(termFreq(searchable:fifa)=2)
>  1.287682 = idf(docFreq=2)
>  0.375 = fieldNorm(field=searchable, doc=1)
>
> On Fri, Apr 25, 2008 at 2:30 PM, Daniel Freudenberger <
> d.freudenberger@trade-a-game.de> wrote:
>
>> I'm using the StandardAnalyzer - hope this answers your question (I'm
>> quite
>> new to the lucene thing)
>>
>> -----Original Message-----
>> From: Jonathan Ariel [mailto:ionathan@gmail.com]
>> Sent: Friday, April 25, 2008 6:59 PM
>> To: java-user@lucene.apache.org
>> Subject: Re: boosting relevance of certain documents
>>
>> How are you analyzing the searchable field?
>>
>> On Fri, Apr 25, 2008 at 12:49 PM, Daniel Freudenberger <
>> d.freudenberger@trade-a-game.de> wrote:
>>
>>> Hello,
>>>
>>>
>>>
>>> I'm using lucene within a new project and I'm not sure about how to
>> solve
>>> the following problem: My index consists of the two attributes  
>>> "id" and
>>> "searchable". "id" is the id of a product and "searchable" is a
>>> combination
>>> of the product name and its category name.
>>>
>>>
>>>
>>> example:
>>>
>>> id     searchable
>>>
>>> 1     fifa 08 - playstation 3
>>>
>>> 2     fifa 2003 fifa 03 - playstation 3
>>>
>>> 3     playstation 60gb hdd - playstation 3
>>>
>>> 4     playstation i like you - playstation 3
>>>
>>>
>>>
>>> When searching for "fifa", lucene returns the product with id 2 at
>> first,
>>> whereas id 1 ("fifa 08") would be the much more relevant result  
>>> (from
>> the
>>> user side of view). the same problem arises when searching for
>>> "playstation"
>>> - the customer expects products having "playstation" in their  
>>> names at
>>> first, ideally the console itself. in reality however, he gets all
>>> possible
>>> products which are in the "playstation" category as well.
>>>
>>>
>>>
>>> my idea was to introduce another attribute relevance, which may  
>>> increase
>>> the
>>> relevance of an entry. the actual relevance shouldn't be suppressed
>>> completely though, but should only be taken into account with  
>>> products
>>> that
>>> are similarly relevant for a specific search term.
>>>
>>>
>>>
>>> Does anybody have an idea on how to solve this problem?
>>>
>>>
>>>
>>> Thank you in advance,
>>>
>>> Daniel
>>>
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ







---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33797-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 26 04:33:36 2008
Return-Path: <java-user-return-33797-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31101 invoked from network); 26 Apr 2008 04:33:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Apr 2008 04:33:34 -0000
Received: (qmail 43161 invoked by uid 500); 26 Apr 2008 04:33:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43119 invoked by uid 500); 26 Apr 2008 04:33:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43108 invoked by uid 99); 26 Apr 2008 04:33:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Apr 2008 21:33:27 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 209.85.146.181 as permitted sender)
Received: from [209.85.146.181] (HELO wa-out-1112.google.com) (209.85.146.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Apr 2008 04:32:42 +0000
Received: by wa-out-1112.google.com with SMTP id j40so6421945wah.11
        for <java-user@lucene.apache.org>; Fri, 25 Apr 2008 21:32:56 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=z0XrOeufsS4qYNap8TrnZu18YLEUqj0oKo/i/CnW6aQ=;
        b=KFugp0skpOerQ1mEl786GXC9IwicDJHzB0dSu6r6ZNNmv5fx71aB+KrnND66mkDWbNXhibiObXW4SNMrxUdBUhltjOufblGu5QtyPn6yuynlWXYwiYA0AwyjoSj4QMdQIq2gB7cPgkRIejZvRaSqcbVXIb5QlSTUHnsRpiCIejs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=X2sxoGMZL/feWkW9PwP5kdF0i/cm+ka+q5hudQepuxQZyNP2DEiL50TeqNNeRE9HZQZPpzxSMAfKxpyNqfy0AITRTDFvnxa/f3l7PkkNF9C17HUgMsJYzH5poORkoT7DTzU8jafNrWYWAtnpu7GN6hucwxNEAaXZFnvsYs18YTo=
Received: by 10.114.168.1 with SMTP id q1mr4036971wae.74.1209184376345;
        Fri, 25 Apr 2008 21:32:56 -0700 (PDT)
Received: by 10.114.134.19 with HTTP; Fri, 25 Apr 2008 21:32:56 -0700 (PDT)
Message-ID: <867513fe0804252132r7cfc88f7l11728c2e28608084@mail.gmail.com>
Date: Sat, 26 Apr 2008 10:02:56 +0530
From: Anshum <anshumg@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: boosting relevance of certain documents
In-Reply-To: <E1F79F77-7624-4CAC-9A83-AFBEC5C2BC49@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3716_163741.1209184376338"
References: <-1858080938835305288@unknownmsgid>
	 <6dd2bfeb0804250959k51d0286cj9b954be42c06c7d2@mail.gmail.com>
	 <3760940526082580826@unknownmsgid>
	 <6dd2bfeb0804251110ybab00cakbd2661cd2362ea4c@mail.gmail.com>
	 <E1F79F77-7624-4CAC-9A83-AFBEC5C2BC49@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3716_163741.1209184376338
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Daniel,

Just a suggestion, how bout storing an extra field while indexing that has
the "length" of the document. You could just divide the score of the
document (change the lucene code) with the length of the document (or
something on the same lines) while calculating the score. In this manner,
among 2 docs, the smaller doc with the same score would get preference.
Do you think that would somehow solve your problem?
Though again, it involves changing the algo but this would be useful in case
you have documents that keep on getting updated and you can not afford to
hard-code the doc preference.

--
Anshum Gupta


On Sat, Apr 26, 2008 at 4:12 AM, Grant Ingersoll <gsingers@apache.org>
wrote:

> It really depends.  Hand tuning scoring algs for a specific query is very
> prone to local maxima problems.  In other words, you fix one query and break
> 50 others.  Sometimes, a good old "configurable" hard code is the way to go.
>  If you want a specific doc to be #1, make it number one.  You will pull
> your hair out otherwise.  In Solr, this is handled via the Query Elevation
> Component, but isn't all that difficult to implement.
>
> Likewise, if you have a priori knowledge that a particular document is
> more important, then give it a relatively large boost during indexing, being
> aware that Lucene does not offer much granularity in terms of boosts.  In
> other words, boost it something like 5 or 10 times, instead of 1.1 vs. 1.2.
>
> On the other hand, if you are truly seeing broad problems, then you need
> to build up a set of queries and judgments (ala TREC) or the
> contrib/benchmark Quality packages.  You might also look at Lucene's
> Similarity class.  Lucene's length normalization is often less than optimal
> for certain types of documents (see the IBM Haifa's assessment for the
> "Million Query" track of TREC on the Lucene Wiki).
>
> Cheers,
> Grant
>
>
> On Apr 25, 2008, at 3:50 PM, Daniel Freudenberger wrote:
>
>  Thanks for your response. I already knew that the relevance is based on
> > the
> > term frequency but in some cases it's just not what the user expects.
> > As I already mentioned, "fifa 2003 fifa 03" vs. "fifa 08" is such a case
> > -
> > searching for "fifa" would return the "fifa 2003 fifa 03" document first
> > but
> > the "fifa 08" document is more important (from the user's point of
> > view).
> >
> > Any suggestions?
> >
> > Best regards,
> > Daniel
> > -----Original Message-----
> > From: Jonathan Ariel [mailto:ionathan@gmail.com]
> > Sent: Friday, April 25, 2008 8:11 PM
> > To: java-user@lucene.apache.org
> > Subject: Re: boosting relevance of certain documents
> >
> > Ok. So I'm not an expert of the scoring algorithm, but based on tf*idf
> > you
> > can tell that the returned document is more relevant because it has more
> > term frequency.
> >
> > Using the explain you can see the following:
> >
> > Doc 1
> > 0.643841 = (MATCH) fieldWeight(searchable:fifa in 0), product of:
> >  1.0 = tf(termFreq(searchable:fifa)=1)
> >  1.287682 = idf(docFreq=2)
> >  0.5 = fieldNorm(field=searchable, doc=0)
> >
> > Doc2
> > 0.68289655 = (MATCH) fieldWeight(searchable:fifa in 1), product of:
> >  1.4142135 = tf(termFreq(searchable:fifa)=2)
> >  1.287682 = idf(docFreq=2)
> >  0.375 = fieldNorm(field=searchable, doc=1)
> >
> > On Fri, Apr 25, 2008 at 2:30 PM, Daniel Freudenberger <
> > d.freudenberger@trade-a-game.de> wrote:
> >
> >  I'm using the StandardAnalyzer - hope this answers your question (I'm
> > > quite
> > > new to the lucene thing)
> > >
> > > -----Original Message-----
> > > From: Jonathan Ariel [mailto:ionathan@gmail.com]
> > > Sent: Friday, April 25, 2008 6:59 PM
> > > To: java-user@lucene.apache.org
> > > Subject: Re: boosting relevance of certain documents
> > >
> > > How are you analyzing the searchable field?
> > >
> > > On Fri, Apr 25, 2008 at 12:49 PM, Daniel Freudenberger <
> > > d.freudenberger@trade-a-game.de> wrote:
> > >
> > >  Hello,
> > > >
> > > >
> > > >
> > > > I'm using lucene within a new project and I'm not sure about how to
> > > >
> > > solve
> > >
> > > > the following problem: My index consists of the two attributes "id"
> > > > and
> > > > "searchable". "id" is the id of a product and "searchable" is a
> > > > combination
> > > > of the product name and its category name.
> > > >
> > > >
> > > >
> > > > example:
> > > >
> > > > id     searchable
> > > >
> > > > 1     fifa 08 - playstation 3
> > > >
> > > > 2     fifa 2003 fifa 03 - playstation 3
> > > >
> > > > 3     playstation 60gb hdd - playstation 3
> > > >
> > > > 4     playstation i like you - playstation 3
> > > >
> > > >
> > > >
> > > > When searching for "fifa", lucene returns the product with id 2 at
> > > >
> > > first,
> > >
> > > > whereas id 1 ("fifa 08") would be the much more relevant result
> > > > (from
> > > >
> > > the
> > >
> > > > user side of view). the same problem arises when searching for
> > > > "playstation"
> > > > - the customer expects products having "playstation" in their names
> > > > at
> > > > first, ideally the console itself. in reality however, he gets all
> > > > possible
> > > > products which are in the "playstation" category as well.
> > > >
> > > >
> > > >
> > > > my idea was to introduce another attribute relevance, which may
> > > > increase
> > > > the
> > > > relevance of an entry. the actual relevance shouldn't be suppressed
> > > > completely though, but should only be taken into account with
> > > > products
> > > > that
> > > > are similarly relevant for a specific search term.
> > > >
> > > >
> > > >
> > > > Does anybody have an idea on how to solve this problem?
> > > >
> > > >
> > > >
> > > > Thank you in advance,
> > > >
> > > > Daniel
> > > >
> > > >
> > > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> --------------------------
> Grant Ingersoll
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
--
The facts expressed here belong to everybody, the opinions to me.
The distinction is yours to draw............

------=_Part_3716_163741.1209184376338--

From java-user-return-33798-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 26 05:03:14 2008
Return-Path: <java-user-return-33798-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36578 invoked from network); 26 Apr 2008 05:03:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Apr 2008 05:03:14 -0000
Received: (qmail 56756 invoked by uid 500); 26 Apr 2008 05:03:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56728 invoked by uid 500); 26 Apr 2008 05:03:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56717 invoked by uid 99); 26 Apr 2008 05:03:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Apr 2008 22:03:08 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.38.57] (HELO web50303.mail.re2.yahoo.com) (206.190.38.57)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 26 Apr 2008 05:02:13 +0000
Received: (qmail 90663 invoked by uid 60001); 26 Apr 2008 05:02:33 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=LbdSp5Cwjgp8nfOp0aGVXvejUyGzdNiYbMgort0oEolCLkgaJOk/N6/pmaj/VF0t8N2DrOlIYQVadS+t977Wra31XnF862nZA7k+0mvuMJx1e2n/auh92c4n/bUDZnZpYt0w0q2ulGpTnIjvas2v8GdVXKNrPkbO1lsHZlMnr74=;
X-YMail-OSG: GTnkpJIVM1kDjPxl5SIoG5XDyiqOgm_AKRO_n2DU86ATA__m8OBWuj7xg9P4JYDJpGO9QEtXN4Rurr5gNWiRVZzJ4qFR9pZggZJoRiC.SWn44DktjsT0z.aZbw--
Received: from [72.231.9.236] by web50303.mail.re2.yahoo.com via HTTP; Fri, 25 Apr 2008 22:02:33 PDT
X-Mailer: YahooMailRC/902.40 YahooMailWebService/0.7.185
Date: Fri, 25 Apr 2008 22:02:33 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: boosting relevance of certain documents
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <381465.90106.qm@web50303.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

If this is really about adjusting score based on field length (didn't follow the thread closely), then this sounds like a job for a custom Similarity with a custom implementation of lengthNorm method.

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch

----- Original Message ----
> From: Anshum <anshumg@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Saturday, April 26, 2008 12:32:56 AM
> Subject: Re: boosting relevance of certain documents
> 
> Hi Daniel,
> 
> Just a suggestion, how bout storing an extra field while indexing that has
> the "length" of the document. You could just divide the score of the
> document (change the lucene code) with the length of the document (or
> something on the same lines) while calculating the score. In this manner,
> among 2 docs, the smaller doc with the same score would get preference.
> Do you think that would somehow solve your problem?
> Though again, it involves changing the algo but this would be useful in case
> you have documents that keep on getting updated and you can not afford to
> hard-code the doc preference.
> 
> --
> Anshum Gupta
> 
> 
> On Sat, Apr 26, 2008 at 4:12 AM, Grant Ingersoll 
> wrote:
> 
> > It really depends.  Hand tuning scoring algs for a specific query is very
> > prone to local maxima problems.  In other words, you fix one query and break
> > 50 others.  Sometimes, a good old "configurable" hard code is the way to go.
> >  If you want a specific doc to be #1, make it number one.  You will pull
> > your hair out otherwise.  In Solr, this is handled via the Query Elevation
> > Component, but isn't all that difficult to implement.
> >
> > Likewise, if you have a priori knowledge that a particular document is
> > more important, then give it a relatively large boost during indexing, being
> > aware that Lucene does not offer much granularity in terms of boosts.  In
> > other words, boost it something like 5 or 10 times, instead of 1.1 vs. 1.2.
> >
> > On the other hand, if you are truly seeing broad problems, then you need
> > to build up a set of queries and judgments (ala TREC) or the
> > contrib/benchmark Quality packages.  You might also look at Lucene's
> > Similarity class.  Lucene's length normalization is often less than optimal
> > for certain types of documents (see the IBM Haifa's assessment for the
> > "Million Query" track of TREC on the Lucene Wiki).
> >
> > Cheers,
> > Grant
> >
> >
> > On Apr 25, 2008, at 3:50 PM, Daniel Freudenberger wrote:
> >
> >  Thanks for your response. I already knew that the relevance is based on
> > > the
> > > term frequency but in some cases it's just not what the user expects.
> > > As I already mentioned, "fifa 2003 fifa 03" vs. "fifa 08" is such a case
> > > -
> > > searching for "fifa" would return the "fifa 2003 fifa 03" document first
> > > but
> > > the "fifa 08" document is more important (from the user's point of
> > > view).
> > >
> > > Any suggestions?
> > >
> > > Best regards,
> > > Daniel
> > > -----Original Message-----
> > > From: Jonathan Ariel [mailto:ionathan@gmail.com]
> > > Sent: Friday, April 25, 2008 8:11 PM
> > > To: java-user@lucene.apache.org
> > > Subject: Re: boosting relevance of certain documents
> > >
> > > Ok. So I'm not an expert of the scoring algorithm, but based on tf*idf
> > > you
> > > can tell that the returned document is more relevant because it has more
> > > term frequency.
> > >
> > > Using the explain you can see the following:
> > >
> > > Doc 1
> > > 0.643841 = (MATCH) fieldWeight(searchable:fifa in 0), product of:
> > >  1.0 = tf(termFreq(searchable:fifa)=1)
> > >  1.287682 = idf(docFreq=2)
> > >  0.5 = fieldNorm(field=searchable, doc=0)
> > >
> > > Doc2
> > > 0.68289655 = (MATCH) fieldWeight(searchable:fifa in 1), product of:
> > >  1.4142135 = tf(termFreq(searchable:fifa)=2)
> > >  1.287682 = idf(docFreq=2)
> > >  0.375 = fieldNorm(field=searchable, doc=1)
> > >
> > > On Fri, Apr 25, 2008 at 2:30 PM, Daniel Freudenberger <
> > > d.freudenberger@trade-a-game.de> wrote:
> > >
> > >  I'm using the StandardAnalyzer - hope this answers your question (I'm
> > > > quite
> > > > new to the lucene thing)
> > > >
> > > > -----Original Message-----
> > > > From: Jonathan Ariel [mailto:ionathan@gmail.com]
> > > > Sent: Friday, April 25, 2008 6:59 PM
> > > > To: java-user@lucene.apache.org
> > > > Subject: Re: boosting relevance of certain documents
> > > >
> > > > How are you analyzing the searchable field?
> > > >
> > > > On Fri, Apr 25, 2008 at 12:49 PM, Daniel Freudenberger <
> > > > d.freudenberger@trade-a-game.de> wrote:
> > > >
> > > >  Hello,
> > > > >
> > > > >
> > > > >
> > > > > I'm using lucene within a new project and I'm not sure about how to
> > > > >
> > > > solve
> > > >
> > > > > the following problem: My index consists of the two attributes "id"
> > > > > and
> > > > > "searchable". "id" is the id of a product and "searchable" is a
> > > > > combination
> > > > > of the product name and its category name.
> > > > >
> > > > >
> > > > >
> > > > > example:
> > > > >
> > > > > id     searchable
> > > > >
> > > > > 1     fifa 08 - playstation 3
> > > > >
> > > > > 2     fifa 2003 fifa 03 - playstation 3
> > > > >
> > > > > 3     playstation 60gb hdd - playstation 3
> > > > >
> > > > > 4     playstation i like you - playstation 3
> > > > >
> > > > >
> > > > >
> > > > > When searching for "fifa", lucene returns the product with id 2 at
> > > > >
> > > > first,
> > > >
> > > > > whereas id 1 ("fifa 08") would be the much more relevant result
> > > > > (from
> > > > >
> > > > the
> > > >
> > > > > user side of view). the same problem arises when searching for
> > > > > "playstation"
> > > > > - the customer expects products having "playstation" in their names
> > > > > at
> > > > > first, ideally the console itself. in reality however, he gets all
> > > > > possible
> > > > > products which are in the "playstation" category as well.
> > > > >
> > > > >
> > > > >
> > > > > my idea was to introduce another attribute relevance, which may
> > > > > increase
> > > > > the
> > > > > relevance of an entry. the actual relevance shouldn't be suppressed
> > > > > completely though, but should only be taken into account with
> > > > > products
> > > > > that
> > > > > are similarly relevant for a specific search term.
> > > > >
> > > > >
> > > > >
> > > > > Does anybody have an idea on how to solve this problem?
> > > > >
> > > > >
> > > > >
> > > > > Thank you in advance,
> > > > >
> > > > > Daniel
> > > > >
> > > > >
> > > > >
> >



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33799-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 26 06:04:28 2008
Return-Path: <java-user-return-33799-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62070 invoked from network); 26 Apr 2008 06:04:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Apr 2008 06:04:27 -0000
Received: (qmail 81917 invoked by uid 500); 26 Apr 2008 06:04:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81883 invoked by uid 500); 26 Apr 2008 06:04:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81872 invoked by uid 99); 26 Apr 2008 06:04:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Apr 2008 23:04:21 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mzhasan@gmail.com designates 209.85.146.180 as permitted sender)
Received: from [209.85.146.180] (HELO wa-out-1112.google.com) (209.85.146.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Apr 2008 06:03:37 +0000
Received: by wa-out-1112.google.com with SMTP id j40so6454634wah.11
        for <java-user@lucene.apache.org>; Fri, 25 Apr 2008 23:03:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=kIh/np87F0pbu3zU+iZsBjNJjlCjrPLvv5aYZs6ly2c=;
        b=FBcImY3uttWdwo/431AJqIozFa7n8nrGJ/M46/ixtzH2Vhs9l9QcmuTOJuQ4n5MmpwXSys/tysEY18BYIaEvq+35cyB52VPTmFhiMW3eI/HCDGJLzogfzlzvO6U/PZlOuhXgcCZR4PzjYxWNs8YKkTGYdpWaBOPcNbLxNDLeM+Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=bcDx+ccmlCgYMC4XoLVDcknaWu4uqxiFuUEjsPNRQqQbPMYorqi87vuDVzX1Tn7yuo4dEb/UsdGNvY/OU6USgwKFGXCHtFdQ6fPo0F4LrEjRWuO23jUxjvcHDfIUbX+5mNaYnTHmZ/mWmrGwknShZROeWrrnAK9SXyi2aX98qKM=
Received: by 10.114.106.1 with SMTP id e1mr4098167wac.71.1209189830980;
        Fri, 25 Apr 2008 23:03:50 -0700 (PDT)
Received: by 10.114.135.8 with HTTP; Fri, 25 Apr 2008 23:03:50 -0700 (PDT)
Message-ID: <b0aae42b0804252303r213b5df3l1905cbab9028e415@mail.gmail.com>
Date: Sat, 26 Apr 2008 12:03:50 +0600
From: "Mohammad Hasan" <mzhasan@gmail.com>
To: java-user@lucene.apache.org
Subject: Please help with Gradient Formatter of Highlighter
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3722_2459364.1209189830967"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3722_2459364.1209189830967
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Dear all,



I need a working example of Gradient Formatter. I want to highlight a
searched word after it is found in the database. I am using NHibernate
Search & Lucene. But I am an entrly level programmer, so I do not know how
to use Gradient Formatter. There are plenty of examples of HTML Formatter
but no example for Gradient Formatter. Gradient Formatter asks for 5
arguments, that is where I run into troubles. I do not understand these 5
arguments. Instead of giving explanation, please post a working example of
Gradient Formatter of Highlighter which will highlight a searched word
after it is found in a database. Thanks.



Hasan

------=_Part_3722_2459364.1209189830967--

From java-user-return-33800-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 26 06:33:55 2008
Return-Path: <java-user-return-33800-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86665 invoked from network); 26 Apr 2008 06:33:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Apr 2008 06:33:55 -0000
Received: (qmail 96127 invoked by uid 500); 26 Apr 2008 06:33:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96095 invoked by uid 500); 26 Apr 2008 06:33:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96084 invoked by uid 99); 26 Apr 2008 06:33:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Apr 2008 23:33:48 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of guosijie@gmail.com designates 209.85.200.172 as permitted sender)
Received: from [209.85.200.172] (HELO wf-out-1314.google.com) (209.85.200.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Apr 2008 06:32:55 +0000
Received: by wf-out-1314.google.com with SMTP id 28so3200793wff.20
        for <java-user@lucene.apache.org>; Fri, 25 Apr 2008 23:33:15 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=kUvQMqe7YoFNSWvP58xtXhYyFugN6A8ps74/ZgHNBoo=;
        b=m3qQ/ONZaKYNMq/u/HshA0nE6pPfhZ1HLwN52gmojVtY9ZxkevXjqBcdtZgG9ZEQHorJFWKNOEGlKu3OJgGT+Ohy8/wAQjT9GwNVk/Rpc2rkOiMu8EZlVN7isP5hn10YXztUJJ1z2nkKk9mNwKOJYMjHXYP40By22xSEe0xONfY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=PvbIg4QuXC3xA7oNa/CqMwOucRQA/DvjKC28qIb/lgpqWHmTTCB/p4AzTWX/XSfTmXeZzoskfcKDmy4zO7XmhzQZD3sil2BhcctZE+vZM+rYKmNoYSyay3ed/K8cwbQqJk45kDWQVlSZYZE4KsKDyy10x62d0a6lLMkUaE2xWYc=
Received: by 10.142.81.7 with SMTP id e7mr1058968wfb.320.1209191595337;
        Fri, 25 Apr 2008 23:33:15 -0700 (PDT)
Received: by 10.142.222.18 with HTTP; Fri, 25 Apr 2008 23:33:15 -0700 (PDT)
Message-ID: <25aacb800804252333if6b22f1j930238fb415ce1b7@mail.gmail.com>
Date: Sat, 26 Apr 2008 14:33:15 +0800
From: "Samuel Guo" <guosijie@gmail.com>
To: java-dev@lucene.apache.org, java-user@lucene.apache.org
Subject: Does lucene support distributed indexing?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_351_17653596.1209191595365"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_351_17653596.1209191595365
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: base64
Content-Disposition: inline

SGkgYWxso6wKCkkgYW0gYSBsdWNlbmUgbmV3YmllOikKCkl0IHNlZW1zIHRoYXQgbHVjZW5lIGRv
ZXNuJ3Qgc3VwcG9ydCBkaXN0cmlidXRlZCBpbmRleGluZzooCkFzIHNvbWUgSVIgcmVzZWFyY2gg
cGFwZXJzIG1lbnRpb25lZCwgd2hlbiB0aGUgZG9jdW1lbnRzIGNvbGxlY3Rpb24gYmVjb21lCmxh
cmdlLCB0aGUgaW5kZXggd2lsbCBiZSBsYXJnZSBhbHNvLiBXaGVuIG9uZSBzaW5nbGUgbWFjaGlu
ZSBjYW4ndCBob2xkIGFsbAp0aGUgaW5kZXgsIHNvbWUgc3RyYXRlZ2llcyBhcmUgdXNlZCB0byBz
b2x2ZSBpdC4gc3VjaCBhcyB0aGF0IHdlIGNhbiBwYXJ0CnRoZSB3aG9sZSBjb2xsZWN0aW9uIGlu
dG8gc2V2ZXJhbCBzbWFsbCBzdWItY29sbGVjdGlvbnMuIEFjY29yZGluZyB0bwpkaWZmZXJlbnQg
cGFydGl0aW9ucywgd2UgY2FuIGdvdCBkaWZmZXJlbnQgc3RyYXRlZ2llcyA6IGRvY3VtZW50LXBh
cnRpdHRpb24KYW5kIHRlcm0tcGFydGl0aW9uLiBidXQgSSBkb24ndCBrbm93IHdoeSBub3QgbHVj
ZW5lIHN1cHBvcnQgdGhlc2Ugd2F5czooCmNhbid0IGFueW9uZSBleHBsYWluIGl0ID8gb3IgbWF5
YmUgbHVjZW5lIHVzZSBvdGhlciB3YXlzIHRvIHNvbHZlIHRoaXMKcHJvYmxlbT8KCkhvcGUgZm9y
IHlvdXIgcmVwbGllcyA6KQpCZXN0IFdpc2hlcwoKU2FtdWVsIEd1bwo=
------=_Part_351_17653596.1209191595365--

From java-user-return-33801-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 26 07:51:53 2008
Return-Path: <java-user-return-33801-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6809 invoked from network); 26 Apr 2008 07:51:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Apr 2008 07:51:53 -0000
Received: (qmail 25566 invoked by uid 500); 26 Apr 2008 07:51:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25529 invoked by uid 500); 26 Apr 2008 07:51:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25518 invoked by uid 99); 26 Apr 2008 07:51:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Apr 2008 00:51:47 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mzhasan@gmail.com designates 209.85.146.182 as permitted sender)
Received: from [209.85.146.182] (HELO wa-out-1112.google.com) (209.85.146.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Apr 2008 07:51:03 +0000
Received: by wa-out-1112.google.com with SMTP id j40so6492046wah.11
        for <java-user@lucene.apache.org>; Sat, 26 Apr 2008 00:51:15 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=pvFq7CNX7Zw/tsxEVxJIoqiUYD6va8mcyzTNI8vOm14=;
        b=lYrLtxoYAIoHAbiboCfDS+um63rfZoGRqW4KusCr+6VdWy7v/Im4RRvZDT41paB58RU0ey5JIXS8ACxIsGbQIUFrBr+Oyzh2cBwY2vhRYmFFiMPQgvgNIpaXyl8xbrR8N3r/csSu9SQFLeQJdyWFEgaqMhmd6YDFwEXxvAESJiA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=sm5MX/VWbcLa2RXH4frxwgd/jMkNVLiLUtBLUhR4vpri1sbbWamFLDP26xbfGW0PQk2ZuWNBJsdrXzxiXAzQKH+8nRnQx62qWer64uY8/27mYTj/sRccAiurPVa5qQNyR6ujxEcVLEQvlVSJArbWX81LUOREmfzzoDIgqxIX5rw=
Received: by 10.114.193.1 with SMTP id q1mr4171008waf.75.1209196275085;
        Sat, 26 Apr 2008 00:51:15 -0700 (PDT)
Received: by 10.114.135.8 with HTTP; Sat, 26 Apr 2008 00:51:15 -0700 (PDT)
Message-ID: <b0aae42b0804260051y1014966by740b5e8ffcbddace@mail.gmail.com>
Date: Sat, 26 Apr 2008 13:51:15 +0600
From: "Mohammad Hasan" <mzhasan@gmail.com>
To: java-user@lucene.apache.org
Subject: Please help with Gradient Formatter of Highlighter
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3889_23709497.1209196275073"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3889_23709497.1209196275073
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Dear all,



I need a working example of Gradient Formatter. I want to highlight a
searched word after it is found in the database. I am using NHibernate
Search & Lucene. But I am an entrly level programmer, so I do not know how
to use Gradient Formatter. There are plenty of examples of HTML Formatter
but no example for Gradient Formatter. Gradient Formatter asks for 5
arguments, that is where I run into troubles. I do not understand these 5
arguments. Instead of giving explanation, please post a working example of
Gradient Formatter of Highlighter which will highlight a searched word
after it is found in a database. Thanks.



Hasan

------=_Part_3889_23709497.1209196275073--

From java-user-return-33802-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 26 09:02:53 2008
Return-Path: <java-user-return-33802-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19843 invoked from network); 26 Apr 2008 09:02:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Apr 2008 09:02:53 -0000
Received: (qmail 47938 invoked by uid 500); 26 Apr 2008 09:02:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47909 invoked by uid 500); 26 Apr 2008 09:02:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47893 invoked by uid 99); 26 Apr 2008 09:02:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Apr 2008 02:02:47 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of Vaijanathrao@aol.com designates 64.12.137.2 as permitted sender)
Received: from [64.12.137.2] (HELO imo-m21.mx.aol.com) (64.12.137.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Apr 2008 09:01:56 +0000
Received: from Vaijanathrao@aol.com
	by imo-m21.mx.aol.com (mail_out_v38_r9.3.) id h.c3b.32b1ce47 (37578);
	Sat, 26 Apr 2008 05:02:11 -0400 (EDT)
Received: from localhost.localdomain ([10.146.165.103]) by cia-mb05.mx.aol.com (v121.4) with ESMTP id MAILCIAMB053-92ca4812ef7d12c; Sat, 26 Apr 2008 05:02:08 -0400
Message-ID: <4812EF79.4050906@aol.com>
Date: Sat, 26 Apr 2008 14:31:45 +0530
From: "Vaijanath N. Rao" <vaijanathrao@aol.com>
User-Agent: Thunderbird 2.0.0.12 (X11/20080418)
MIME-Version: 1.0
To: java-user@lucene.apache.org
CC: java-dev@lucene.apache.org, vaijanathrao@aol.com
Subject: Lucene Indexing structure
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-AOL-IP: 10.146.165.103
X-Mailer: Unknown (No Version)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Flag: NO

Hi Lucene-user and Lucene-dev,

I want to use lucene as an backend for the Image search (Content based 
Image retrieval).

Indexing Mechanism:
a) Get the Image properties such as Texture Tamura (TT), Texture Edge 
Histogram (TE), Color Coherence Vector (CCV) and Color Histogram (CH) 
and Color Correlogram  (CC) .
b) Convert each of these vector into String and index into lucene as 
fields, thush each Image (document in terms of lucene) consist of 6 
fields Image name, TT field, TE field, CCV field, CH field and CC field.

Searching Mechanism:
a) For the search Image convert the Image into the above 5 properties.
b) for every field and for every value within the field construct the 
query, For example let's say the user wants to search only Color 
histogram based similarity and the query Image has 3 1 4 5 as the CH 
value the query will look like.
    query = "CH:3 CH:1CH:4 CH:5"
c) for the results returned convert all the field values back into float 
and do the distance computation and re-rank the document with lower the 
distance on the top and larger distance at the bottom.
for example:
    For above query assume that output has two documents
    with one having CH as "1 3 5 4" and other one having CH as " 3 1 5 
4", so the distance computation will rank the second document higher 
than the first.

Obviously there is something wrong with the above approach (as to get 
the correct document we need to get all the documents and than do the 
required distance calculation), but that' due to lack of my knowledge of 
Luce and lucene's Index storage.

What I want to know how to improve upon the exsisting architecture other 
than making number of fields in the lucene equalling to total number of 
feature*size of each feature.

Any other pointer will be welcomed. Is there is any Range tree 
implementation within lucene which I can use for this operation.

--Thanks and Regards
Vaijanath N. Rao

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33803-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 26 14:21:00 2008
Return-Path: <java-user-return-33803-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20465 invoked from network); 26 Apr 2008 14:21:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Apr 2008 14:21:00 -0000
Received: (qmail 92942 invoked by uid 500); 26 Apr 2008 14:20:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92918 invoked by uid 500); 26 Apr 2008 14:20:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92901 invoked by uid 99); 26 Apr 2008 14:20:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Apr 2008 07:20:54 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.119] (HELO spunkymail-a2.g.dreamhost.com) (208.97.132.119)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Apr 2008 14:20:01 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a2.g.dreamhost.com (Postfix) with ESMTP id CB74388149
	for <java-user@lucene.apache.org>; Sat, 26 Apr 2008 07:20:20 -0700 (PDT)
Message-Id: <EC3A5B1D-3EAC-42B6-9539-0D6E76CD2E24@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <25aacb800804252333if6b22f1j930238fb415ce1b7@mail.gmail.com>
Content-Type: text/plain; charset=GB2312; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: Does lucene support distributed indexing?
Date: Sat, 26 Apr 2008 10:20:19 -0400
References: <25aacb800804252333if6b22f1j930238fb415ce1b7@mail.gmail.com>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On Apr 26, 2008, at 2:33 AM, Samuel Guo wrote:

> Hi all=A3=AC
>
> I am a lucene newbie:)
>
> It seems that lucene doesn't support distributed indexing:(
> As some IR research papers mentioned, when the documents collection =20=

> become
> large, the index will be large also. When one single machine can't =20
> hold all
> the index, some strategies are used to solve it. such as that we can =20=

> part
> the whole collection into several small sub-collections. According to
> different partitions, we can got different strategies : document-=20
> partittion
> and term-partition. but I don't know why not lucene support these =20
> ways:(
> can't anyone explain it ?

Because no one has donated the code to do it.  You can do distributed =20=

indexing via Nutch and some (albeit non fault tolerant) distributed =20
Search in Lucene.  Solr also now has distributed search.

-Grant=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33804-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 26 15:31:27 2008
Return-Path: <java-user-return-33804-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63909 invoked from network); 26 Apr 2008 15:31:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Apr 2008 15:31:27 -0000
Received: (qmail 41460 invoked by uid 500); 26 Apr 2008 15:31:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41427 invoked by uid 500); 26 Apr 2008 15:31:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41416 invoked by uid 99); 26 Apr 2008 15:31:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Apr 2008 08:31:21 -0700
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=MSGID_MULTIPLE_AT,SPF_HELO_PASS,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [212.227.126.188] (HELO moutng.kundenserver.de) (212.227.126.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Apr 2008 15:30:36 +0000
Received: from DanielPC (p4FC760CD.dip.t-dialin.net [79.199.96.205])
	by mrelayeu.kundenserver.de (node=mrelayeu0) with ESMTP (Nemesis)
	id 0MKwh2-1JpmMR2aQa-0007OC; Sat, 26 Apr 2008 17:30:47 +0200
From: "Daniel Freudenberger" <d.freudenberger@trade-a-game.de>
To: <java-user@lucene.apache.org>
References: <-1858080938835305288@unknownmsgid>	 <6dd2bfeb0804250959k51d0286cj9b954be42c06c7d2@mail.gmail.com>	 <3760940526082580826@unknownmsgid> <6dd2bfeb0804251110ybab00cakbd2661cd2362ea4c@mail.gmail.com> <000301c8a70d$a9717e60$fc547b20$@freudenberger@trade-a-game.de> <E1F79F77-7624-4CAC-9A83-AFBEC5C2BC49@apache.org>
In-Reply-To: <E1F79F77-7624-4CAC-9A83-AFBEC5C2BC49@apache.org>
Subject: RE: boosting relevance of certain documents
Date: Sat, 26 Apr 2008 17:28:28 +0200
Message-ID: <000e01c8a7b2$2d3c1a30$87b44e90$@freudenberger@trade-a-game.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcinJahXt47nZvbDSjmtJ4hxf3iipQAi+nNQ
Content-Language: de
X-Provags-ID: V01U2FsdGVkX1/Tn56s+RDPDOGBcxJUDeao/Y3bF7iVjoNjGu2
 5xUKEpjXUMjT8G6M2vrB1L73D/XG3O6zwoy2Izq8wSLRDWcNcw
 KsFNc8uHB5c7iBh5wgxg2lUKdIoMIwmCmjfl1yT13ja2fbf3wX
 FaQ==
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

thanks for your detailed response. I didn't know there was a method called
setBoost for adjusting the relevance of a certain document. 
Now I simply calculate the boosting factor for the document, based on its
newness, the sales rank and some other values.

Thank you very much.

Best regards,
Daniel

-----Original Message-----
From: Grant Ingersoll [mailto:gsingers@apache.org] 
Sent: Saturday, April 26, 2008 12:42 AM
To: java-user@lucene.apache.org
Subject: Re: boosting relevance of certain documents

It really depends.  Hand tuning scoring algs for a specific query is  
very prone to local maxima problems.  In other words, you fix one  
query and break 50 others.  Sometimes, a good old "configurable" hard  
code is the way to go.  If you want a specific doc to be #1, make it  
number one.  You will pull your hair out otherwise.  In Solr, this is  
handled via the Query Elevation Component, but isn't all that  
difficult to implement.

Likewise, if you have a priori knowledge that a particular document is  
more important, then give it a relatively large boost during indexing,  
being aware that Lucene does not offer much granularity in terms of  
boosts.  In other words, boost it something like 5 or 10 times,  
instead of 1.1 vs. 1.2.

On the other hand, if you are truly seeing broad problems, then you  
need to build up a set of queries and judgments (ala TREC) or the  
contrib/benchmark Quality packages.  You might also look at Lucene's  
Similarity class.  Lucene's length normalization is often less than  
optimal for certain types of documents (see the IBM Haifa's assessment  
for the "Million Query" track of TREC on the Lucene Wiki).

Cheers,
Grant


On Apr 25, 2008, at 3:50 PM, Daniel Freudenberger wrote:

> Thanks for your response. I already knew that the relevance is based  
> on the
> term frequency but in some cases it's just not what the user expects.
> As I already mentioned, "fifa 2003 fifa 03" vs. "fifa 08" is such a  
> case -
> searching for "fifa" would return the "fifa 2003 fifa 03" document  
> first but
> the "fifa 08" document is more important (from the user's point of  
> view).
>
> Any suggestions?
>
> Best regards,
> Daniel
> -----Original Message-----
> From: Jonathan Ariel [mailto:ionathan@gmail.com]
> Sent: Friday, April 25, 2008 8:11 PM
> To: java-user@lucene.apache.org
> Subject: Re: boosting relevance of certain documents
>
> Ok. So I'm not an expert of the scoring algorithm, but based on  
> tf*idf you
> can tell that the returned document is more relevant because it has  
> more
> term frequency.
>
> Using the explain you can see the following:
>
> Doc 1
> 0.643841 = (MATCH) fieldWeight(searchable:fifa in 0), product of:
>  1.0 = tf(termFreq(searchable:fifa)=1)
>  1.287682 = idf(docFreq=2)
>  0.5 = fieldNorm(field=searchable, doc=0)
>
> Doc2
> 0.68289655 = (MATCH) fieldWeight(searchable:fifa in 1), product of:
>  1.4142135 = tf(termFreq(searchable:fifa)=2)
>  1.287682 = idf(docFreq=2)
>  0.375 = fieldNorm(field=searchable, doc=1)
>
> On Fri, Apr 25, 2008 at 2:30 PM, Daniel Freudenberger <
> d.freudenberger@trade-a-game.de> wrote:
>
>> I'm using the StandardAnalyzer - hope this answers your question (I'm
>> quite
>> new to the lucene thing)
>>
>> -----Original Message-----
>> From: Jonathan Ariel [mailto:ionathan@gmail.com]
>> Sent: Friday, April 25, 2008 6:59 PM
>> To: java-user@lucene.apache.org
>> Subject: Re: boosting relevance of certain documents
>>
>> How are you analyzing the searchable field?
>>
>> On Fri, Apr 25, 2008 at 12:49 PM, Daniel Freudenberger <
>> d.freudenberger@trade-a-game.de> wrote:
>>
>>> Hello,
>>>
>>>
>>>
>>> I'm using lucene within a new project and I'm not sure about how to
>> solve
>>> the following problem: My index consists of the two attributes  
>>> "id" and
>>> "searchable". "id" is the id of a product and "searchable" is a
>>> combination
>>> of the product name and its category name.
>>>
>>>
>>>
>>> example:
>>>
>>> id     searchable
>>>
>>> 1     fifa 08 - playstation 3
>>>
>>> 2     fifa 2003 fifa 03 - playstation 3
>>>
>>> 3     playstation 60gb hdd - playstation 3
>>>
>>> 4     playstation i like you - playstation 3
>>>
>>>
>>>
>>> When searching for "fifa", lucene returns the product with id 2 at
>> first,
>>> whereas id 1 ("fifa 08") would be the much more relevant result  
>>> (from
>> the
>>> user side of view). the same problem arises when searching for
>>> "playstation"
>>> - the customer expects products having "playstation" in their  
>>> names at
>>> first, ideally the console itself. in reality however, he gets all
>>> possible
>>> products which are in the "playstation" category as well.
>>>
>>>
>>>
>>> my idea was to introduce another attribute relevance, which may  
>>> increase
>>> the
>>> relevance of an entry. the actual relevance shouldn't be suppressed
>>> completely though, but should only be taken into account with  
>>> products
>>> that
>>> are similarly relevant for a specific search term.
>>>
>>>
>>>
>>> Does anybody have an idea on how to solve this problem?
>>>
>>>
>>>
>>> Thank you in advance,
>>>
>>> Daniel
>>>
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ







---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33805-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 27 06:58:23 2008
Return-Path: <java-user-return-33805-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52974 invoked from network); 27 Apr 2008 06:58:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Apr 2008 06:58:23 -0000
Received: (qmail 44268 invoked by uid 500); 27 Apr 2008 06:58:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44236 invoked by uid 500); 27 Apr 2008 06:58:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44225 invoked by uid 99); 27 Apr 2008 06:58:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Apr 2008 23:58:17 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of eransevi@gmail.com designates 209.85.200.173 as permitted sender)
Received: from [209.85.200.173] (HELO wf-out-1314.google.com) (209.85.200.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Apr 2008 06:57:28 +0000
Received: by wf-out-1314.google.com with SMTP id 28so3543809wff.20
        for <java-user@lucene.apache.org>; Sat, 26 Apr 2008 23:57:41 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=K9FBup3StlmwjAJuISQz35/dnX17X7BdtTEWq2cgiuM=;
        b=UAHHALlkVIKTbTn1tKr7CoJimxZl/c9TjfMQDV6UaD0o2Qb2E5zqYcmGQx13Uoq+C7lk3tVKyuTbM6P4Z752HbdcE/6Lh9QWFvQ9FT1JF5kirWmLDSBnbGHho7C/2Nm45xKQY/QOECwZbaSVYDuFd6m+jz7CWT2/Ga1fBS/D4no=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=TK0BknGSWy50yuq0MMlmZd9ffONmcbg0SZ3Yk91ZD+3SNF8kLO5YWU/ViWSM9r4VjNvXn5IyZJUghlbe16aYHMrrRaQJupUe5zwh3mSgZm9/fWNjNr24kg3mNJ+n5jFM/hTJCwmgtjHsDoQaKCIZRkupodBalgAvipMdIV7vOtw=
Received: by 10.142.226.2 with SMTP id y2mr1714299wfg.137.1209279459442;
        Sat, 26 Apr 2008 23:57:39 -0700 (PDT)
Received: by 10.142.245.20 with HTTP; Sat, 26 Apr 2008 23:57:39 -0700 (PDT)
Message-ID: <74f928500804262357i174c0f3ckcf626dcc151988cb@mail.gmail.com>
Date: Sun, 27 Apr 2008 09:57:39 +0300
From: "Eran Sevi" <eransevi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Sorting consumes hundreds of MBytes RAM
In-Reply-To: <20080425144225.GA23623@fermat.math.technion.ac.il>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2598_21852138.1209279459410"
References: <200804131645.37576.lucene@nitwit.de>
	 <Pine.LNX.4.62.0804141517220.31375@radix.cryptio.net>
	 <20080425144225.GA23623@fermat.math.technion.ac.il>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2598_21852138.1209279459410
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

If you read the payloads in sequence they're not arranged by their original
position whereas when you use a stored field you get the terms in the
correct order.
If you need to sort the values it doesn't matter of course.
On Fri, Apr 25, 2008 at 5:42 PM, Nadav Har'El <nyh@math.technion.ac.il>
wrote:

> On Mon, Apr 14, 2008, Chris Hostetter wrote about "Re: Sorting consumes
> hundreds of MBytes RAM":
> > : And question #2: what am I going to do against it? Index  sharding?
> >
> > The only suggestion i can offer is to take a look at LUCENE-769 ... it
> > takes a completley differnet appraoch of using a FieldSelector to access
> > the *stored* field and sort on it ... the memory usage of FieldCache is
> > eliminatedand the expense of longer search times ... in cases where you
> > expect queries to match on a very small subset of the total index, it
> > could be worth using.
>
> Instead of using a stored field, I would recommend using *payloads*.
> If you store the field's valye as payload on a custom term, you basically
> get a posting-list of the field value, which can be (theoretically, at
> least)
> efficiently skipped on one hand - and read in sequence on the other hand.
>
> --
> Nadav Har'El                        |       Friday, Apr 25 2008, 20 Nisan
> 5768
> IBM Haifa Research Lab
>  |-----------------------------------------
>                                    |Business jargon is the art of saying
> http://nadav.harel.org.il           |nothing while appearing to say a lot.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_2598_21852138.1209279459410--

From java-user-return-33806-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 27 08:22:23 2008
Return-Path: <java-user-return-33806-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76822 invoked from network); 27 Apr 2008 08:22:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Apr 2008 08:22:23 -0000
Received: (qmail 75479 invoked by uid 500); 27 Apr 2008 08:22:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75436 invoked by uid 500); 27 Apr 2008 08:22:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75425 invoked by uid 99); 27 Apr 2008 08:22:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Apr 2008 01:22:16 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of guosijie@gmail.com designates 209.85.200.169 as permitted sender)
Received: from [209.85.200.169] (HELO wf-out-1314.google.com) (209.85.200.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Apr 2008 08:21:32 +0000
Received: by wf-out-1314.google.com with SMTP id 28so3563297wff.20
        for <java-user@lucene.apache.org>; Sun, 27 Apr 2008 01:21:46 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=aH9IZ7vimJ5uiAPNYKPq0EltO6zMMrK2YKMGjYSV4KQ=;
        b=PU0qhBSLdI41EKuSisO6AlGbjJYe74B9yZyvlF/T8da5GwGGXlE35gayULatFju5GWPOllNX5AWmuf/e4Tqj8KTji46uBRcb3vqqDHGHDpOq44k2yjvpMI/KPo80XcDnL7k/HdIiv1iAG9ueC3G9LVrPItOxF1FERvc3gdaTLg4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=VbfSklte1pIS69weIhFmmxa5Rt3VOJZC2/lWupb6mc7JZrZltmdEFzqWVPCdGc/wCpFsm5p21e0QNnhdJK3+Qf9oPjMxAWblXA9t6YRC/N6rlxt9VxDy29Ts0OEjsXDgMFdExzCBORyjqG+CdFfkjtuvBtHFdTIVRpZfNdDAq4M=
Received: by 10.142.232.20 with SMTP id e20mr187095wfh.187.1209284506417;
        Sun, 27 Apr 2008 01:21:46 -0700 (PDT)
Received: by 10.142.222.18 with HTTP; Sun, 27 Apr 2008 01:21:46 -0700 (PDT)
Message-ID: <25aacb800804270121ja7ff76nf430bfca629f4333@mail.gmail.com>
Date: Sun, 27 Apr 2008 16:21:46 +0800
From: "Samuel Guo" <guosijie@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Does lucene support distributed indexing?
In-Reply-To: <EC3A5B1D-3EAC-42B6-9539-0D6E76CD2E24@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1875_23459339.1209284506425"
References: <25aacb800804252333if6b22f1j930238fb415ce1b7@mail.gmail.com>
	 <EC3A5B1D-3EAC-42B6-9539-0D6E76CD2E24@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1875_23459339.1209284506425
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: base64
Content-Disposition: inline

VGhhbmtzIGEgbG90IDopCgoyMDA4LzQvMjYgR3JhbnQgSW5nZXJzb2xsIDxnc2luZ2Vyc0BhcGFj
aGUub3JnPjoKCj4KPiBPbiBBcHIgMjYsIDIwMDgsIGF0IDI6MzMgQU0sIFNhbXVlbCBHdW8gd3Jv
dGU6Cj4KPiAgSGkgYWxso6wKPiA+Cj4gPiBJIGFtIGEgbHVjZW5lIG5ld2JpZTopCj4gPgo+ID4g
SXQgc2VlbXMgdGhhdCBsdWNlbmUgZG9lc24ndCBzdXBwb3J0IGRpc3RyaWJ1dGVkIGluZGV4aW5n
OigKPiA+IEFzIHNvbWUgSVIgcmVzZWFyY2ggcGFwZXJzIG1lbnRpb25lZCwgd2hlbiB0aGUgZG9j
dW1lbnRzIGNvbGxlY3Rpb24KPiA+IGJlY29tZQo+ID4gbGFyZ2UsIHRoZSBpbmRleCB3aWxsIGJl
IGxhcmdlIGFsc28uIFdoZW4gb25lIHNpbmdsZSBtYWNoaW5lIGNhbid0IGhvbGQKPiA+IGFsbAo+
ID4gdGhlIGluZGV4LCBzb21lIHN0cmF0ZWdpZXMgYXJlIHVzZWQgdG8gc29sdmUgaXQuIHN1Y2gg
YXMgdGhhdCB3ZSBjYW4KPiA+IHBhcnQKPiA+IHRoZSB3aG9sZSBjb2xsZWN0aW9uIGludG8gc2V2
ZXJhbCBzbWFsbCBzdWItY29sbGVjdGlvbnMuIEFjY29yZGluZyB0bwo+ID4gZGlmZmVyZW50IHBh
cnRpdGlvbnMsIHdlIGNhbiBnb3QgZGlmZmVyZW50IHN0cmF0ZWdpZXMgOgo+ID4gZG9jdW1lbnQt
cGFydGl0dGlvbgo+ID4gYW5kIHRlcm0tcGFydGl0aW9uLiBidXQgSSBkb24ndCBrbm93IHdoeSBu
b3QgbHVjZW5lIHN1cHBvcnQgdGhlc2Ugd2F5czooCj4gPiBjYW4ndCBhbnlvbmUgZXhwbGFpbiBp
dCA/Cj4gPgo+Cj4gQmVjYXVzZSBubyBvbmUgaGFzIGRvbmF0ZWQgdGhlIGNvZGUgdG8gZG8gaXQu
ICBZb3UgY2FuIGRvIGRpc3RyaWJ1dGVkCj4gaW5kZXhpbmcgdmlhIE51dGNoIGFuZCBzb21lIChh
bGJlaXQgbm9uIGZhdWx0IHRvbGVyYW50KSBkaXN0cmlidXRlZCBTZWFyY2gKPiBpbiBMdWNlbmUu
ICBTb2xyIGFsc28gbm93IGhhcyBkaXN0cmlidXRlZCBzZWFyY2guCj4KPiAtR3JhbnQKPiAtLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0KPiBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVA
bHVjZW5lLmFwYWNoZS5vcmcKPiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZh
LXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZwo+Cj4K
------=_Part_1875_23459339.1209284506425--

From java-user-return-33807-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 27 16:26:34 2008
Return-Path: <java-user-return-33807-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79237 invoked from network); 27 Apr 2008 16:26:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Apr 2008 16:26:33 -0000
Received: (qmail 56759 invoked by uid 500); 27 Apr 2008 16:26:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56721 invoked by uid 500); 27 Apr 2008 16:26:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56710 invoked by uid 99); 27 Apr 2008 16:26:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Apr 2008 09:26:28 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.38.242] (HELO web50309.mail.re2.yahoo.com) (206.190.38.242)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 27 Apr 2008 16:25:34 +0000
Received: (qmail 26943 invoked by uid 60001); 27 Apr 2008 16:25:54 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=wZiK34Koin/mCyCTh1G8JCIx/B3Zg+iGR9X4imGcioEv1qmJrRhRWbniClmkH1RjTu4zaNRviOoj3035CE6qtjb0KIdoKjtswwgqVW3RPpR7wIWEd63Ij8FogJFSPegjV7EGxUa3U1XNNv0gZr3Fm1FLFmQM0/ZWgXp51yIoKk8=;
X-YMail-OSG: eSY1ygkVM1mC.jgjuUhEreXPlSC2fd5YlfhUxe7.n0.s1jjTenskYKd.xyQYRnt4wO2XkrhmEjDTgXSyWYqifEXTuEe27Typ4piOAtGI4ChC9rKClKgYp75s0w--
Received: from [72.231.9.236] by web50309.mail.re2.yahoo.com via HTTP; Sun, 27 Apr 2008 09:25:54 PDT
X-Mailer: YahooMailRC/902.40 YahooMailWebService/0.7.185
Date: Sun, 27 Apr 2008 09:25:54 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Does lucene support distributed indexing?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <237280.26430.qm@web50309.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

There are actually several distributed indexing or searching projects in Lu=
cene (the top-level ASF Lucene project, not Lucene Java), and it's time to =
start thinking about the possibility of bringing them together, finding com=
monalities, etc.=0A=0AHere is the summary:=0A- Lucene - distributed search =
via ParallelMultiSearcher.  How you split indices/shards is up to you.=0A- =
Solr - distributed indexing via SOLR-303 (see DistributedSearch on its Wiki=
).  How you split indices/shards is up to you.=0A- Nutch - see its org.apac=
he.nutch.ipc (I think).  How you split indices/segments is up to you.=0A- N=
utch - see the bottom of http://wiki.apache.org/nutch/Nutch2Architecture=0A=
=0AThere is also Hadoop:=0A- Using MapReduce + HDFS to build a single Lucen=
e index in a distributed fashion (see contrib/ in Hadoop)=0A=0AThere is als=
o GridLucene project somewhere on the web...=0A=0AOtis=0A--=0ASematext -- h=
ttp://sematext.com/ -- Lucene - Solr - Nutch=0A=0A----- Original Message --=
--=0A> From: Grant Ingersoll <gsingers@apache.org>=0A> To: java-user@lucene=
.apache.org=0A> Sent: Saturday, April 26, 2008 4:20:19 PM=0A> Subject: Re: =
Does lucene support distributed indexing?=0A> =0A> =0A> On Apr 26, 2008, at=
 2:33 AM, Samuel Guo wrote:=0A> =0A> > Hi all=EF=BC=8C=0A> >=0A> > I am a l=
ucene newbie:)=0A> >=0A> > It seems that lucene doesn't support distributed=
 indexing:(=0A> > As some IR research papers mentioned, when the documents =
collection  =0A> > become=0A> > large, the index will be large also. When o=
ne single machine can't  =0A> > hold all=0A> > the index, some strategies a=
re used to solve it. such as that we can  =0A> > part=0A> > the whole colle=
ction into several small sub-collections. According to=0A> > different part=
itions, we can got different strategies : document- =0A> > partittion=0A> >=
 and term-partition. but I don't know why not lucene support these  =0A> > =
ways:(=0A> > can't anyone explain it ?=0A> =0A> Because no one has donated =
the code to do it.  You can do distributed  =0A> indexing via Nutch and som=
e (albeit non fault tolerant) distributed  =0A> Search in Lucene.  Solr als=
o now has distributed search.=0A> =0A> -Grant=0A> -------------------------=
--------------------------------------------=0A> To unsubscribe, e-mail: ja=
va-user-unsubscribe@lucene.apache.org=0A> For additional commands, e-mail: =
java-user-help@lucene.apache.org=0A> =0A> =0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33808-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 27 18:28:23 2008
Return-Path: <java-user-return-33808-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18045 invoked from network); 27 Apr 2008 18:28:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Apr 2008 18:28:23 -0000
Received: (qmail 28887 invoked by uid 500); 27 Apr 2008 18:28:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28854 invoked by uid 500); 27 Apr 2008 18:28:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28843 invoked by uid 99); 27 Apr 2008 18:28:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Apr 2008 11:28:16 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of legolas.w@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO py-out-1112.google.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Apr 2008 18:27:31 +0000
Received: by py-out-1112.google.com with SMTP id z74so5184847pyg.9
        for <java-user@lucene.apache.org>; Sun, 27 Apr 2008 11:27:45 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:content-type:content-transfer-encoding;
        bh=L2bSrqkiNr7uMHAOLTiaC3yYyJowJpjkoSbySgFBFa8=;
        b=uvy6jfTnPp63r0ouSx+til3qT7vyJUHFVsAUMoqZ7vWrB39N3QqkQc39vNrey/n3wIyfofx/x0GvLNsiOlAaZSr3oJfVIKu9EUH6jGZf51SNtyIl2sHlOakhoC60Gw2jDMQjxLQdp3HWKuNJVzZTY817jq7CH8K2lBTI4WddFlM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:content-type:content-transfer-encoding;
        b=Hmcfmi9qORR6w0yMg+NegnGoXsWA0zEIDF9PAvpRd8mYXHRgbza38wGUneX0KorbVdUxAo2Z5O+VsLA/TNCiUXkmtewz1kufOghZ23pSiMZOwnklKTmvnKUlqhph5EhZc1E4gdQ5NkNBq5rsSjJwGOrKTJ2o/alzH7SRAxCMXpE=
Received: by 10.65.155.19 with SMTP id h19mr12913899qbo.12.1209320864802;
        Sun, 27 Apr 2008 11:27:44 -0700 (PDT)
Received: from ?192.168.1.100? ( [81.12.107.33])
        by mx.google.com with ESMTPS id f18sm6134329qba.14.2008.04.27.11.27.36
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sun, 27 Apr 2008 11:27:44 -0700 (PDT)
Message-ID: <4814C56B.2010709@gmail.com>
Date: Sun, 27 Apr 2008 22:56:51 +0430
From: Legolas wood <legolas.w@gmail.com>
User-Agent: Thunderbird 2.0.0.12 (X11/20080227)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Does Lucene save an offline version of web pages?
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi
Thank you for reading my post.
I have to design a system with the following requirements, I think
Lucene or one of the projects which are based on Lucene can help me as a
base to continue on.
Here is the requirements:

- Fetch and index some pages (containing word and pdf documents) on
daily basis.
- Extract all pages that contain some provided keywords after fetching
the pages.
- Create some bulletin from fetched pages, bulletin will be in pdf
format and are categorized based on keywords.
- provide offline search capability (on pages that it indexed and also
it should allows the users to browse the pages  offline)

Can you let me know whether any of Lucene based projects can help me
with this requirements?
Specially with offline browsing feature?


Thanks.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33809-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 27 18:32:35 2008
Return-Path: <java-user-return-33809-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19492 invoked from network); 27 Apr 2008 18:32:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Apr 2008 18:32:35 -0000
Received: (qmail 31394 invoked by uid 500); 27 Apr 2008 18:32:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31354 invoked by uid 500); 27 Apr 2008 18:32:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31343 invoked by uid 99); 27 Apr 2008 18:32:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Apr 2008 11:32:31 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Apr 2008 18:31:38 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JqBfK-0007Jg-CE
	for java-user@lucene.apache.org; Sun, 27 Apr 2008 11:31:58 -0700
Message-ID: <16926877.post@talk.nabble.com>
Date: Sun, 27 Apr 2008 11:31:58 -0700 (PDT)
From: DanaWhite <philrymek@comcast.net>
To: java-user@lucene.apache.org
Subject: TrecDocMaker
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: philrymek@comcast.net
X-Virus-Checked: Checked by ClamAV on apache.org


Greetings,

I am trying to use TrecDocMaker so I can successfully index and evaluate
lucene on a TReC collection.

It seems like I would just repeatedly call makeDocument() until all the
Documents have been created, but makeDocument appears to just read forever. 
In general TrecDocMaker seems like an odd class and I just cant figure out
how to use it right.  I have been changing the class so it works with an
uncompressed collection and trying to modify it so makeDocument doesnt
endlessly read, but no matter what I have done it is just causing a
different error.  Clearly I am trying too hard.

In short what I want know is how am I supposed to use TrecDocMaker to parse
my collection...cause the current Lucene implementation doesnt seem to work
right, or I am using it wrong.

Thanks
Dana
-- 
View this message in context: http://www.nabble.com/TrecDocMaker-tp16926877p16926877.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33810-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 27 18:55:26 2008
Return-Path: <java-user-return-33810-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23167 invoked from network); 27 Apr 2008 18:55:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Apr 2008 18:55:26 -0000
Received: (qmail 40975 invoked by uid 500); 27 Apr 2008 18:55:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40941 invoked by uid 500); 27 Apr 2008 18:55:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40930 invoked by uid 99); 27 Apr 2008 18:55:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Apr 2008 11:55:20 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lukas.vlcek@gmail.com designates 209.85.198.242 as permitted sender)
Received: from [209.85.198.242] (HELO rv-out-0506.google.com) (209.85.198.242)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Apr 2008 18:54:34 +0000
Received: by rv-out-0506.google.com with SMTP id k29so2622798rvb.5
        for <java-user@lucene.apache.org>; Sun, 27 Apr 2008 11:54:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=90yJaT//vyuFaEtCfq5ocvdYle62pu8zdAj/bbtgZF4=;
        b=cwFNMBUHHkg7EusEJ2fOQb/U9nWB9AiGG14EdQpe/7A1FkhLI//YSITKhY4uVjbdjKTuk5D0XcgUy6zqxTgLR3ywbb4BjXzsquz+OlDrG7/qP+6ogQjVRCclMuZl7s72PwEOLmEo7bgB+oDks/ahQv1USm5knbMVmx29ylkHqXU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=V7KrBDsa+CrlAjQgYAtQ4RebeYrT7KMgBkEhjLfeUTo0VKGccJsuwp8rwOb7LiS/aamaGd8YIoSUKEx59vpnWioSquZRUeKhDKXprlOGIDG9IXqLmcG5rIkmVINkDl78FN4mHgX/9ujQrXRwVYY7S65S42eVT0flSo/zNrsqkIU=
Received: by 10.141.29.18 with SMTP id g18mr2854696rvj.298.1209322488550;
        Sun, 27 Apr 2008 11:54:48 -0700 (PDT)
Received: by 10.140.203.3 with HTTP; Sun, 27 Apr 2008 11:54:48 -0700 (PDT)
Message-ID: <52c3ddca0804271154t6cf7a485j21f5d7894e59013c@mail.gmail.com>
Date: Sun, 27 Apr 2008 20:54:48 +0200
From: "Lukas Vlcek" <lukas.vlcek@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Does Lucene save an offline version of web pages?
In-Reply-To: <4814C56B.2010709@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3098_7917352.1209322488537"
References: <4814C56B.2010709@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3098_7917352.1209322488537
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

this sounds like job for Nutch (one of Lucene family projects).

On Sun, Apr 27, 2008 at 8:26 PM, Legolas wood <legolas.w@gmail.com> wrote:

> Hi
> Thank you for reading my post.
> I have to design a system with the following requirements, I think
> Lucene or one of the projects which are based on Lucene can help me as a
> base to continue on.
> Here is the requirements:
>
> - Fetch and index some pages (containing word and pdf documents) on
> daily basis.


Nutch ca do this for you. It uses plug-ins for parsing various content. PDF
should be no problem. As for MS falimy documents it uses POI I think. THis
means that it is not 100% reliable but I guess you can write your own
plug-in and utilize commercial third-party utility for Word processing.


>
> - Extract all pages that contain some provided keywords after fetching
> the pages.


I think you will need to look closer at Nutch tools. As far as I know Nutch
can drop all pages containing specific words. I am not sure if there is any
tool to do the opposite.


>
> - Create some bulletin from fetched pages, bulletin will be in pdf
> format and are categorized based on keywords.


Can you be more specific? I think you need to implement this yourself. (May
be carrot could be helpful)


>
> - provide offline search capability (on pages that it indexed and also
> it should allows the users to browse the pages  offline)
>

If I am not mistaken then Nutch can cache documents for you but they are
converted into plain text. But I am really not sure in this point.


>
> Can you let me know whether any of Lucene based projects can help me
> with this requirements?
> Specially with offline browsing feature?
>
>
> Thanks.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
http://blog.lukas-vlcek.com/

------=_Part_3098_7917352.1209322488537--

From java-user-return-33811-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 27 19:25:02 2008
Return-Path: <java-user-return-33811-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29179 invoked from network); 27 Apr 2008 19:25:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Apr 2008 19:25:01 -0000
Received: (qmail 51674 invoked by uid 500); 27 Apr 2008 19:24:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51629 invoked by uid 500); 27 Apr 2008 19:24:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51618 invoked by uid 99); 27 Apr 2008 19:24:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Apr 2008 12:24:57 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of janssen@parc.com designates 13.1.64.93 as permitted sender)
Received: from [13.1.64.93] (HELO alpha.xerox.com) (13.1.64.93)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Apr 2008 19:24:10 +0000
Received: from synergy1.parc.xerox.com ([13.1.101.60]) by alpha.xerox.com with SMTP id <224776(2)>; Sun, 27 Apr 2008 12:24:08 PDT
Received: from parc.com ([127.0.0.1]) by synergy1.parc.xerox.com with SMTP id <58696>; Sun, 27 Apr 2008 12:24:00 PDT
To: java-user@lucene.apache.org
Subject: Re: Does Lucene save an offline version of web pages? 
In-reply-to: <4814C56B.2010709@gmail.com> 
References: <4814C56B.2010709@gmail.com>
Comments: In-reply-to Legolas wood <legolas.w@gmail.com>
    message dated "Sun, 27 Apr 2008 11:26:51 -0700."
Date: Sun, 27 Apr 2008 12:23:55 PDT
From: Bill Janssen <janssen@parc.com>
Message-Id: <08Apr27.122400pdt."58696"@synergy1.parc.xerox.com>
X-Virus-Checked: Checked by ClamAV on apache.org

> - Fetch and index some pages (containing word and pdf documents) on
> daily basis.
> - Extract all pages that contain some provided keywords after fetching
> the pages.
> - Create some bulletin from fetched pages, bulletin will be in pdf
> format and are categorized based on keywords.
> - provide offline search capability (on pages that it indexed and also
> it should allows the users to browse the pages  offline)
> 
> Can you let me know whether any of Lucene based projects can help me
> with this requirements?
> Specially with offline browsing feature?

Yes, the UpLib system from PARC does this.  It supports Word,
Powerpoint, PDF, Web pages, email, images, etc., as input documents.
It caches all documents given to it, in their original format, but
also allows access to them as HTML or PDF.  It Lucene-indexes both the
full content text of each document, along with metadata for each
document, and contains a number of document analysis engines for
calculating "indirect" metadata from the document.  It includes
several off-line browsers, including a Web-browser tool and a Java
client (I tend to use the Java rich client), for searching, reading,
and annotating the gathered pages.  Screenshots are at
<http://uplib.parc.com/uplib/screenshots.html>.

We're currently in beta test of our first public release (it's been
used internally at PARC for over four years now); to be added to the
beta-test list, just create an account on the blog at
<http://uplib.parc.com/blog/>.

Bill

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33812-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 28 04:41:15 2008
Return-Path: <java-user-return-33812-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82773 invoked from network); 28 Apr 2008 04:41:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Apr 2008 04:41:15 -0000
Received: (qmail 89974 invoked by uid 500); 28 Apr 2008 04:41:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89929 invoked by uid 500); 28 Apr 2008 04:41:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89918 invoked by uid 99); 28 Apr 2008 04:41:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Apr 2008 21:41:10 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of hasan.diwan@gmail.com designates 209.85.146.179 as permitted sender)
Received: from [209.85.146.179] (HELO wa-out-1112.google.com) (209.85.146.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Apr 2008 04:40:26 +0000
Received: by wa-out-1112.google.com with SMTP id j40so7616650wah.11
        for <java-user@lucene.apache.org>; Sun, 27 Apr 2008 21:40:40 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=U3aKwMYnJ5H1MMHo37/8ExRrUuBKbX2bDJZBtiQJjAY=;
        b=VhFr4dKxdDb8HYlG0sH13nQGAcyQ/FG4D5xag0NghlF0RJNBW1YuwSTFDHOIFA0oQj9R6+81NuQ5WNiRx4NHeDEUaXEO/8/KzX+h2wO52/cCvi3GaGydZqJrPljuvDDsYjQ5jC/jXMNBONvjnuwJfwccx2g6NQsP4fDePA5TYrY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=KMl4cdN2lM5WO9LQCknW2u9pqs2HK5rK3ZRbKpHJ0cwGe9MDY07jZ3pZlvVfpOqZvOKJs/SnxrxkE+XPLcVs6rBFfhA3jGKVAQOCwWHu99qOoqhVfqxEDGxiui09Z9zsgqTXj47S3FF3q2rz3Nq7bHvNpV5NNrxioIpf085HhNE=
Received: by 10.115.92.2 with SMTP id u2mr3647944wal.206.1209357640282;
        Sun, 27 Apr 2008 21:40:40 -0700 (PDT)
Received: by 10.115.58.6 with HTTP; Sun, 27 Apr 2008 21:40:40 -0700 (PDT)
Message-ID: <2cda2fc90804272140u5e179ac5va8ac8f0672a7c6eb@mail.gmail.com>
Date: Sun, 27 Apr 2008 21:40:40 -0700
From: "Hasan Diwan" <hasan.diwan@gmail.com>
To: java-user@lucene.apache.org
Subject: How to Uniquely Identify Documents in a Lucene Index
In-Reply-To: <2cda2fc90804272137h73589cb1k5da0f8da4e201656@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <2cda2fc90804272137h73589cb1k5da0f8da4e201656@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I'm working on a JSP-based, free-form text storage & retrieval system
based on lucene. Part of my desired feature set includes the ability
to retrieve, edit, and update text comprising the document. The user
flow involves:
A search for a document, whose "all" field is then retrieved, then it
can be edited and put back in using the updateDocument method. I'm not
quite sure how to decorate the data in the document within textarea
tags on a click of a button for edit. Many thanks for any help you can
provide.
-- 
Cheers,
Hasan Diwan <hasan.diwan@gmail.com>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33813-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 28 09:05:38 2008
Return-Path: <java-user-return-33813-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26340 invoked from network); 28 Apr 2008 09:05:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Apr 2008 09:05:38 -0000
Received: (qmail 43447 invoked by uid 500); 28 Apr 2008 09:05:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43418 invoked by uid 500); 28 Apr 2008 09:05:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43407 invoked by uid 99); 28 Apr 2008 09:05:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Apr 2008 02:05:32 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.222.32.20] (HELO mexforward.lss.emc.com) (128.222.32.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Apr 2008 09:04:46 +0000
Received: from hop04-l1d11-si01.isus.emc.com (HOP04-L1D11-SI01.isus.emc.com [10.254.111.54])
	by mexforward.lss.emc.com (Switch-3.2.5/Switch-3.1.7) with ESMTP id m3S94uUY010900
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Mon, 28 Apr 2008 05:04:57 -0400 (EDT)
Received: from mailhub.lss.emc.com (nagas.lss.emc.com [10.254.144.11]) by hop04-l1d11-si01.isus.emc.com (Tablus Interceptor) for <java-user@lucene.apache.org>; Mon, 28 Apr 2008 05:04:56 -0400
Received: from corpussmtp1.corp.emc.com (corpussmtp1.corp.emc.com [128.221.10.43])
	by mailhub.lss.emc.com (Switch-3.2.5/Switch-3.1.7) with ESMTP id m3S94s1C029718
	for <java-user@lucene.apache.org>; Mon, 28 Apr 2008 05:04:55 -0400 (EDT)
From: Fang_Li@emc.com
Received: from CORPUSMX70A.corp.emc.com ([128.221.32.148]) by corpussmtp1.corp.emc.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 28 Apr 2008 05:04:05 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: base64
Subject: RE: Does lucene support distributed indexing?
Date: Mon, 28 Apr 2008 05:04:07 -0400
Message-ID: <0C5F3D1247CCF341B9B8DD7B447FA49254FAAC@CORPUSMX70A.corp.emc.com>
In-Reply-To: <25aacb800804270121ja7ff76nf430bfca629f4333@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Does lucene support distributed indexing?
Thread-Index: AcioQL2tfaqEf32yQtKqP8+SGZ7bMgAzZcXw
References: <25aacb800804252333if6b22f1j930238fb415ce1b7@mail.gmail.com> <EC3A5B1D-3EAC-42B6-9539-0D6E76CD2E24@apache.org> <25aacb800804270121ja7ff76nf430bfca629f4333@mail.gmail.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 28 Apr 2008 09:04:05.0590 (UTC) FILETIME=[CF7EF760:01C8A90E]
X-PMX-Version: 4.7.1.128075, Antispam-Engine: 2.5.1.298604, Antispam-Data: 2007.8.30.53115
X-PerlMx-Spam: Gauge=, SPAM=1%, Reason='EMC_FROM_0+ -3, NO_REAL_NAME 0, __CP_MEDIA_2_BODY 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __IMS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0'
X-Tablus-Inspected: yes
X-Tablus-Classifications: public
X-Tablus-Action: allow
X-Virus-Checked: Checked by ClamAV on apache.org

U29sciBkb2VzIG5vdCBkbyBkaXN0cmlidXRlZCBpbmRleGluZywgYnV0IGluZGV4IHJlcGxpY2F0
aW9uLiBBbGwgY29waWVzIGFyZSBpZGVudGljYWwuDQpMdWNlbmUgaGFzIHNvbWUgYnVpbGQgaW4g
c3VwcG9ydCBmb3IgZGlzdHJpYnV0ZWQgc2VhcmNoLCBwbGVhc2UgdGFrZSBhIGxvb2sgYXQgUmVt
b3RlU2VhcmNoYWJsZS4gRm9yIGluZGV4aW5nLCB5b3UgY2FuIGFkZCBhIGZyb250IGxvYWQgYmFs
YW5jZXIgaW4gYSBuYcOvdmUgd2F5Lg0KDQpSZWdhcmRzLA0KDQotLS0tLU9yaWdpbmFsIE1lc3Nh
Z2UtLS0tLQ0KRnJvbTogU2FtdWVsIEd1byBbbWFpbHRvOmd1b3NpamllQGdtYWlsLmNvbV0gDQpT
ZW50OiBTdW5kYXksIEFwcmlsIDI3LCAyMDA4IDQ6MjIgUE0NClRvOiBqYXZhLXVzZXJAbHVjZW5l
LmFwYWNoZS5vcmcNClN1YmplY3Q6IFJlOiBEb2VzIGx1Y2VuZSBzdXBwb3J0IGRpc3RyaWJ1dGVk
IGluZGV4aW5nPw0KDQpUaGFua3MgYSBsb3QgOikNCg0KMjAwOC80LzI2IEdyYW50IEluZ2Vyc29s
bCA8Z3NpbmdlcnNAYXBhY2hlLm9yZz46DQoNCj4NCj4gT24gQXByIDI2LCAyMDA4LCBhdCAyOjMz
IEFNLCBTYW11ZWwgR3VvIHdyb3RlOg0KPg0KPiAgSGkgYWxs77yMDQo+ID4NCj4gPiBJIGFtIGEg
bHVjZW5lIG5ld2JpZTopDQo+ID4NCj4gPiBJdCBzZWVtcyB0aGF0IGx1Y2VuZSBkb2Vzbid0IHN1
cHBvcnQgZGlzdHJpYnV0ZWQgaW5kZXhpbmc6KA0KPiA+IEFzIHNvbWUgSVIgcmVzZWFyY2ggcGFw
ZXJzIG1lbnRpb25lZCwgd2hlbiB0aGUgZG9jdW1lbnRzIGNvbGxlY3Rpb24NCj4gPiBiZWNvbWUN
Cj4gPiBsYXJnZSwgdGhlIGluZGV4IHdpbGwgYmUgbGFyZ2UgYWxzby4gV2hlbiBvbmUgc2luZ2xl
IG1hY2hpbmUgY2FuJ3QgaG9sZA0KPiA+IGFsbA0KPiA+IHRoZSBpbmRleCwgc29tZSBzdHJhdGVn
aWVzIGFyZSB1c2VkIHRvIHNvbHZlIGl0LiBzdWNoIGFzIHRoYXQgd2UgY2FuDQo+ID4gcGFydA0K
PiA+IHRoZSB3aG9sZSBjb2xsZWN0aW9uIGludG8gc2V2ZXJhbCBzbWFsbCBzdWItY29sbGVjdGlv
bnMuIEFjY29yZGluZyB0bw0KPiA+IGRpZmZlcmVudCBwYXJ0aXRpb25zLCB3ZSBjYW4gZ290IGRp
ZmZlcmVudCBzdHJhdGVnaWVzIDoNCj4gPiBkb2N1bWVudC1wYXJ0aXR0aW9uDQo+ID4gYW5kIHRl
cm0tcGFydGl0aW9uLiBidXQgSSBkb24ndCBrbm93IHdoeSBub3QgbHVjZW5lIHN1cHBvcnQgdGhl
c2Ugd2F5czooDQo+ID4gY2FuJ3QgYW55b25lIGV4cGxhaW4gaXQgPw0KPiA+DQo+DQo+IEJlY2F1
c2Ugbm8gb25lIGhhcyBkb25hdGVkIHRoZSBjb2RlIHRvIGRvIGl0LiAgWW91IGNhbiBkbyBkaXN0
cmlidXRlZA0KPiBpbmRleGluZyB2aWEgTnV0Y2ggYW5kIHNvbWUgKGFsYmVpdCBub24gZmF1bHQg
dG9sZXJhbnQpIGRpc3RyaWJ1dGVkIFNlYXJjaA0KPiBpbiBMdWNlbmUuICBTb2xyIGFsc28gbm93
IGhhcyBkaXN0cmlidXRlZCBzZWFyY2guDQo+DQo+IC1HcmFudA0KPiAtLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCj4g
VG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFj
aGUub3JnDQo+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxw
QGx1Y2VuZS5hcGFjaGUub3JnDQo+DQo+DQo=


From java-user-return-33814-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 28 13:11:55 2008
Return-Path: <java-user-return-33814-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35116 invoked from network); 28 Apr 2008 13:11:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Apr 2008 13:11:55 -0000
Received: (qmail 552 invoked by uid 500); 28 Apr 2008 13:11:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 303 invoked by uid 500); 28 Apr 2008 13:11:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 290 invoked by uid 99); 28 Apr 2008 13:11:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Apr 2008 06:11:48 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.74] (HELO spunkymail-a9.g.dreamhost.com) (208.97.132.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Apr 2008 13:11:02 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a9.g.dreamhost.com (Postfix) with ESMTP id 23D2D2133A
	for <java-user@lucene.apache.org>; Mon, 28 Apr 2008 06:11:14 -0700 (PDT)
Message-Id: <7E8108AD-1480-4276-A772-57901F683801@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <16926877.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: TrecDocMaker
Date: Mon, 28 Apr 2008 09:11:14 -0400
References: <16926877.post@talk.nabble.com>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Yeah, these classes are a bit weird in that they are configured via  
properties, and not setters.  They really are designed to run inside  
the benchmaker and not much attention was paid to using them elsewhere.

However, one can co-opt them for the purposes you are doing:

Something like:
TrecDocMaker docMaker = new TrecDocMaker();
     Properties properties = new Properties();
....
     properties.setProperty("doc.maker.forever", "false");
...
     docMaker.setConfig(new Config(properties));

(not I was using the EnWikiDocMaker in the above example, but it  
should work for Trec, too.

I often also do something like:

while ((doc = docMaker.makeDocument()) != null && i < numDocs) {
...

where numDocs is the max. docs I want.


HTH,
Grant

On Apr 27, 2008, at 2:31 PM, DanaWhite wrote:

>
> Greetings,
>
> I am trying to use TrecDocMaker so I can successfully index and  
> evaluate
> lucene on a TReC collection.
>
> It seems like I would just repeatedly call makeDocument() until all  
> the
> Documents have been created, but makeDocument appears to just read  
> forever.
> In general TrecDocMaker seems like an odd class and I just cant  
> figure out
> how to use it right.  I have been changing the class so it works  
> with an
> uncompressed collection and trying to modify it so makeDocument doesnt
> endlessly read, but no matter what I have done it is just causing a
> different error.  Clearly I am trying too hard.
>
> In short what I want know is how am I supposed to use TrecDocMaker  
> to parse
> my collection...cause the current Lucene implementation doesnt seem  
> to work
> right, or I am using it wrong.
>
> Thanks
> Dana
> -- 
> View this message in context: http://www.nabble.com/TrecDocMaker-tp16926877p16926877.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ







---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33815-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 28 18:39:44 2008
Return-Path: <java-user-return-33815-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43869 invoked from network); 28 Apr 2008 18:39:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Apr 2008 18:39:43 -0000
Received: (qmail 49732 invoked by uid 500); 28 Apr 2008 18:39:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49601 invoked by uid 500); 28 Apr 2008 18:39:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49590 invoked by uid 99); 28 Apr 2008 18:39:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Apr 2008 11:39:37 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [63.65.184.134] (HELO birexchange.BIRPLAZA.local) (63.65.184.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Apr 2008 18:38:52 +0000
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: search performance & caching
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Date: Mon, 28 Apr 2008 14:38:56 -0400
Message-ID: <CC2671C08F06704ABFD37ED1EA09AA564EA502@birexchange.BIRPLAZA.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: search performance & caching
Thread-Index: AcipMW3UxBnJpr43ShCpEs1cV8TccQAKQWrA
From: "Beard, Brian" <Brian.Beard@mybir.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org


I'm using lucene 2.2.0 & have two questions:

1) Should search times be linear wrt number of queries hitting a  single
searcher? I've run multiple search threads against a single searcher,
and the search times are very linear - 10x slower for 10 threads vs 1
thread, etc. I'm using a paralle multi-searcher with a custom hit
collector.

2) I'm performing some field caching during search warmup. For an index
of 3.4 million doc's and 7GB, it's taking up to 30 minutes to execute
the code snippet below. Most of this time is involved with the
multireader.document call (where it says "THIS TAKES THE MOST TIME").

I want to know if anyone has any ideas for speeding this up. There are
multiple documents containing the same recordId. I want to figure out
which two documents with the same recordId also have a documentName of
CORE or WL.
Then for each document in the index I store three pieces of information:
- it's associated recordId
- the CORE doc number for this recordId.
- the WL doc number for this recordId

Ideally, since the multiReader.document call is taking the most time,
I'd like to not have to perform this. Although I can't figure out how to
get around needing to read in the recordId.

What I really need is something like a two dimensional termEnum I could
iterate over - for the recordId and documentName fields.

Any ideas are appreciated.

// Now loop through all documents in the indexes and set the cache
values.
TermDocs termDocs =3D multiReader.termDocs();
TermEnum termEnum =3D multiReader.terms (new Term ("RECORD_ID", ""));
try {
    FieldSelector fieldSelector =3D getFieldSelector();
    List<Integer> docList =3D new ArrayList<Integer>();
    int regularCoreDocId =3D -1;
    int wlCoreDocId =3D -1;
    int docId =3D -1;
    Document document =3D null;
    String documentName =3D null;
	               =20
    // Loop through each RECORD_ID with termEnums
    do {
        docList.clear();
	  regularCoreDocId =3D -1;
	  wlCoreDocId =3D -1;
		            =09
	 Term term =3D termEnum.term();
	 if (term =3D=3D null || term.field() !=3D field) {
	   break;
	  }
	  String recordId =3D term.text();
		               =20
	  // Now loop through all documents with the same recordId
	  // using the termDocs.
	  termDocs.seek(termEnum);
	  while (termDocs.next()) {
		docId =3D termDocs.doc();
		docList.add(Integer.valueOf(docId));
            // THIS TAKES THE MOST TIME
		document =3D multiReader.document(docId, fieldSelector);
		documentName =3D document.get("DOCUMENT_NAME");
		if ("CORE".equals(documentName)) {
		    regularCoreDocId =3D docId;
		} else if ("WL".equals(documentName)) {
		    wlCoreDocId =3D docId;
		}
	    }
		               =20
	  // Map all docId's associated with this recordId
	  for (Integer i : docList) {
          doc2RecordId [i] =3D recordId;
	  }
		               =20
	  // Map from the docId to the coreData docId for =20
	  // regular core and wl core documents.
        for (Integer i : docList) {
           doc2RegularCoreDoc[i] =3D regularCoreDocId;
	     wlCoreDocId [i] =3D wlCoreDocId;
        }
   } while (termEnum.next());
} finally {
    termDocs.close();
    termEnum.close();
}


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33816-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 28 21:03:37 2008
Return-Path: <java-user-return-33816-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95745 invoked from network); 28 Apr 2008 21:03:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Apr 2008 21:03:37 -0000
Received: (qmail 43224 invoked by uid 500); 28 Apr 2008 21:03:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43195 invoked by uid 500); 28 Apr 2008 21:03:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43184 invoked by uid 99); 28 Apr 2008 21:03:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Apr 2008 14:03:31 -0700
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of stuhood@mailtrust.com designates 207.97.245.151 as permitted sender)
Received: from [207.97.245.151] (HELO smtp151.iad.emailsrvr.com) (207.97.245.151)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Apr 2008 21:02:46 +0000
Received: from relay5.relay.iad.emailsrvr.com (localhost [127.0.0.1])
	by relay5.relay.iad.emailsrvr.com (SMTP Server) with ESMTP id 4EBCE6B43D4
	for <java-user@lucene.apache.org>; Mon, 28 Apr 2008 16:58:28 -0400 (EDT)
Received: from webmail10.webmail.iad.mlsrvr.com (webmail10.webmail.iad.mlsrvr.com [192.168.1.107])
	by relay5.relay.iad.emailsrvr.com (SMTP Server) with ESMTP id 05EBE6B7757
	for <java-user@lucene.apache.org>; Mon, 28 Apr 2008 14:53:02 -0400 (EDT)
Received: from mailtrust.com (localhost [127.0.0.1])
	by webmail10.webmail.iad.mlsrvr.com (Postfix) with ESMTP id C8F1696C056
	for <java-user@lucene.apache.org>; Mon, 28 Apr 2008 14:53:02 -0400 (EDT)
Received: by beta.mailtrust.com
    (Authenticated sender: stuhood@mailtrust.com, from: stuhood@mailtrust.com) 
    with HTTP; Mon, 28 Apr 2008 14:53:02 -0400 (EDT)
Date: Mon, 28 Apr 2008 14:53:02 -0400 (EDT)
Subject: =?UTF-8?Q?RE:=20Does=20lucene=20support=20distributed=20indexing=3F?=
From: "Stu Hood" <stuhood@mailtrust.com>
To: java-user@lucene.apache.org
Reply-To: stuhood@mailtrust.com
MIME-Version: 1.0
Content-Type: text/plain;charset=UTF-8
Content-Transfer-Encoding: quoted-printable
Importance: Normal
X-Priority: 3 (Normal)
X-Type: plain
Message-ID: <45201.192.168.1.71.1209408782.webmail@192.168.1.71>
X-Mailer: webmail6.6.1
X-Virus-Checked: Checked by ClamAV on apache.org

Solr does not do distributed indexing, but the development version _does_ d=
o distributed search, in addition to replication. Currently, you can manual=
ly shard up your data to a set of Solr instances, and then query them by ad=
ding a 'shard=3Dlocalhost:8080/solr_1,localhost:8080/solr_2' parameter.=0A=
=0ASee https://issues.apache.org/jira/browse/SOLR-303=0A=0AThanks,=0AStu=0A=
=0A=0A-----Original Message-----=0AFrom: Fang_Li@emc.com=0ASent: Monday, Ap=
ril 28, 2008 5:04am=0ATo: java-user@lucene.apache.org=0ASubject: RE: Does l=
ucene support distributed indexing?=0A=0ASolr does not do distributed index=
ing, but index replication. All copies are identical.=0ALucene has some bui=
ld in support for distributed search, please take a look at RemoteSearchabl=
e. For indexing, you can add a front load balancer in a na=C3=AFve way.=0A=
=0ARegards,=0A=0A-----Original Message-----=0AFrom: Samuel Guo [mailto:guos=
ijie@gmail.com] =0ASent: Sunday, April 27, 2008 4:22 PM=0ATo: java-user@luc=
ene.apache.org=0ASubject: Re: Does lucene support distributed indexing?=0A=
=0AThanks a lot :)=0A=0A2008/4/26 Grant Ingersoll <gsingers@apache.org>:=0A=
=0A>=0A> On Apr 26, 2008, at 2:33 AM, Samuel Guo wrote:=0A>=0A>  Hi all=EF=
=BC=8C=0A> >=0A> > I am a lucene newbie:)=0A> >=0A> > It seems that lucene =
doesn't support distributed indexing:(=0A> > As some IR research papers men=
tioned, when the documents collection=0A> > become=0A> > large, the index w=
ill be large also. When one single machine can't hold=0A> > all=0A> > the i=
ndex, some strategies are used to solve it. such as that we can=0A> > part=
=0A> > the whole collection into several small sub-collections. According t=
o=0A> > different partitions, we can got different strategies :=0A> > docum=
ent-partittion=0A> > and term-partition. but I don't know why not lucene su=
pport these ways:(=0A> > can't anyone explain it ?=0A> >=0A>=0A> Because no=
 one has donated the code to do it.  You can do distributed=0A> indexing vi=
a Nutch and some (albeit non fault tolerant) distributed Search=0A> in Luce=
ne.  Solr also now has distributed search.=0A>=0A> -Grant=0A> -------------=
--------------------------------------------------------=0A> To unsubscribe=
, e-mail: java-user-unsubscribe@lucene.apache.org=0A> For additional comman=
ds, e-mail: java-user-help@lucene.apache.org=0A>=0A>=0A=0A


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33817-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 28 23:54:21 2008
Return-Path: <java-user-return-33817-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53419 invoked from network); 28 Apr 2008 23:54:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Apr 2008 23:54:21 -0000
Received: (qmail 18639 invoked by uid 500); 28 Apr 2008 23:54:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18128 invoked by uid 500); 28 Apr 2008 23:54:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18117 invoked by uid 99); 28 Apr 2008 23:54:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Apr 2008 16:54:15 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Apr 2008 23:53:23 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id C1AB671C1DA; Mon, 28 Apr 2008 16:53:43 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id BDD3671C0DA
	for <java-user@lucene.apache.org>; Mon, 28 Apr 2008 16:53:43 -0700 (PDT)
Date: Mon, 28 Apr 2008 16:53:43 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Does lucene support distributed indexing?
In-Reply-To: <237280.26430.qm@web50309.mail.re2.yahoo.com>
Message-ID: <Pine.LNX.4.62.0804281649460.15610@radix.cryptio.net>
References: <237280.26430.qm@web50309.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: There are actually several distributed indexing or searching projects in 
: Lucene (the top-level ASF Lucene project, not Lucene Java), and it's 
: time to start thinking about the possibility of bringing them together, 
: finding commonalities, etc.

I would actually argue that almost all of the examples you listed describe 
"distributed searching" to query multiple shards.

As far as i know, none of them address the "distributed indexing" aspect: 
throw some raw data at the system and trust that it it will be indexed by 
one (or more) shard(s) in a way that "evenly" distributes the indexing 
"load"



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33818-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 29 04:17:55 2008
Return-Path: <java-user-return-33818-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96448 invoked from network); 29 Apr 2008 04:17:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Apr 2008 04:17:54 -0000
Received: (qmail 87025 invoked by uid 500); 29 Apr 2008 04:17:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86991 invoked by uid 500); 29 Apr 2008 04:17:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86980 invoked by uid 99); 29 Apr 2008 04:17:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Apr 2008 21:17:50 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.242] (HELO web50309.mail.re2.yahoo.com) (206.190.38.242)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 29 Apr 2008 04:17:02 +0000
Received: (qmail 50957 invoked by uid 60001); 29 Apr 2008 04:17:15 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=mb/ef7AZGHSe0G9DBNDTagWH26qkY1cmrwO3EhQ+fJWV/vRx3UNdipSKX8erQfD+zvaVZEsnEkfrUUuDp7gwfonDjebAoB0RmnGu3hllYuwAwx/EHEBqsT2KxunxB1Wa06saC1lgGn+nVN+89CHhKWbpnLdrMxhY9jmsFKX7oKE=;
X-YMail-OSG: lUYHfI8VM1lByDKz7w4hOcUvJt7NnEuz6S5fvtENXbHaAPIr.8V240ppxWQdOS8iquBcdRi1B.yc4UEXUM3t2mNcNav8OxUDF2xy4S8jQMQFwj5JJPxZKxPASw--
Received: from [72.231.9.236] by web50309.mail.re2.yahoo.com via HTTP; Mon, 28 Apr 2008 21:17:15 PDT
X-Mailer: YahooMailRC/902.40 YahooMailWebService/0.7.185
Date: Mon, 28 Apr 2008 21:17:15 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Does lucene support distributed indexing?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <460498.50392.qm@web50309.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

That's right - most of them are about distributed searching (hence my notes about sharding being up to the app).  Hadoop's contrib/index is about dist indexing:

"This contrib package provides a utility to build or update an index
using Map/Reduce.

A distributed "index" is partitioned into "shards". Each shard corresponds
to a Lucene instance."

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch

----- Original Message ----
> From: Chris Hostetter <hossman_lucene@fucit.org>
> To: java-user@lucene.apache.org
> Sent: Monday, April 28, 2008 7:53:43 PM
> Subject: Re: Does lucene support distributed indexing?
> 
> 
> : There are actually several distributed indexing or searching projects in 
> : Lucene (the top-level ASF Lucene project, not Lucene Java), and it's 
> : time to start thinking about the possibility of bringing them together, 
> : finding commonalities, etc.
> 
> I would actually argue that almost all of the examples you listed describe 
> "distributed searching" to query multiple shards.
> 
> As far as i know, none of them address the "distributed indexing" aspect: 
> throw some raw data at the system and trust that it it will be indexed by 
> one (or more) shard(s) in a way that "evenly" distributes the indexing 
> "load"
> 
> 
> 
> -Hoss
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33819-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 29 04:22:34 2008
Return-Path: <java-user-return-33819-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97466 invoked from network); 29 Apr 2008 04:22:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Apr 2008 04:22:34 -0000
Received: (qmail 90626 invoked by uid 500); 29 Apr 2008 04:22:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90600 invoked by uid 500); 29 Apr 2008 04:22:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90587 invoked by uid 99); 29 Apr 2008 04:22:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Apr 2008 21:22:30 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of Vaijanathrao@aol.com designates 205.188.139.137 as permitted sender)
Received: from [205.188.139.137] (HELO imo-d23.mx.aol.com) (205.188.139.137)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Apr 2008 04:21:35 +0000
Received: from Vaijanathrao@aol.com
	by imo-d23.mx.aol.com (mail_out_v38_r9.3.) id h.d28.25ba7c14 (37257);
	Tue, 29 Apr 2008 00:21:52 -0400 (EDT)
Received: from localhost.localdomain ([10.146.165.92]) by cia-ma07.mx.aol.com (v121.5) with ESMTP id MAILCIAMA077-91894816a24f371; Tue, 29 Apr 2008 00:21:49 -0400
Message-ID: <4816A24E.4050401@aol.com>
Date: Tue, 29 Apr 2008 09:51:34 +0530
From: "Vaijanath N. Rao" <vaijanathrao@aol.com>
User-Agent: Thunderbird 2.0.0.12 (X11/20080418)
MIME-Version: 1.0
To: java-user@lucene.apache.org
CC: vaijanathrao@aol.com
Subject: Re: Does lucene support distributed indexing?
References: <460498.50392.qm@web50309.mail.re2.yahoo.com>
In-Reply-To: <460498.50392.qm@web50309.mail.re2.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-AOL-IP: 10.146.165.92
X-Mailer: Unknown (No Version)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Flag: NO

Hi all,

How about adding hadoop support for distributed indexing. If required I 
can start working on this. If Hadoop is the fesiable option.

Also what other technique one can think for doing distributed Indexing. 
Currently I am planning on extending the SolrJ to keep a map of where 
the document has gone and trying to get a distibuted Indexing.

--Thanks and Regards
Vaijanath


Otis Gospodnetic wrote:
> That's right - most of them are about distributed searching (hence my notes about sharding being up to the app).  Hadoop's contrib/index is about dist indexing:
>
> "This contrib package provides a utility to build or update an index
> using Map/Reduce.
>
> A distributed "index" is partitioned into "shards". Each shard corresponds
> to a Lucene instance."
>
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>
> ----- Original Message ----
>   
>> From: Chris Hostetter <hossman_lucene@fucit.org>
>> To: java-user@lucene.apache.org
>> Sent: Monday, April 28, 2008 7:53:43 PM
>> Subject: Re: Does lucene support distributed indexing?
>>
>>
>> : There are actually several distributed indexing or searching projects in 
>> : Lucene (the top-level ASF Lucene project, not Lucene Java), and it's 
>> : time to start thinking about the possibility of bringing them together, 
>> : finding commonalities, etc.
>>
>> I would actually argue that almost all of the examples you listed describe 
>> "distributed searching" to query multiple shards.
>>
>> As far as i know, none of them address the "distributed indexing" aspect: 
>> throw some raw data at the system and trust that it it will be indexed by 
>> one (or more) shard(s) in a way that "evenly" distributes the indexing 
>> "load"
>>
>>
>>
>> -Hoss
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33820-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 29 11:45:23 2008
Return-Path: <java-user-return-33820-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45295 invoked from network); 29 Apr 2008 11:45:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Apr 2008 11:45:23 -0000
Received: (qmail 36344 invoked by uid 500); 29 Apr 2008 11:45:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36306 invoked by uid 500); 29 Apr 2008 11:45:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36295 invoked by uid 99); 29 Apr 2008 11:45:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Apr 2008 04:45:17 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Apr 2008 11:44:22 +0000
Received: from [192.168.0.219] ([81.219.54.251])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id m3TBilt08815
	for <java-user@lucene.apache.org>; Tue, 29 Apr 2008 06:44:47 -0500
Message-ID: <48170A12.8030807@getopt.org>
Date: Tue, 29 Apr 2008 13:44:18 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Does lucene support distributed indexing?
References: <460498.50392.qm@web50309.mail.re2.yahoo.com> <4816A24E.4050401@aol.com>
In-Reply-To: <4816A24E.4050401@aol.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Vaijanath N. Rao wrote:
> Hi all,
> 
> How about adding hadoop support for distributed indexing. If required I 
> can start working on this. If Hadoop is the fesiable option.
> 
> Also what other technique one can think for doing distributed Indexing. 
> Currently I am planning on extending the SolrJ to keep a map of where 
> the document has gone and trying to get a distibuted Indexing.

DistributedFileSystem performance for random seeks is several times 
worse than that of LocalFileSystem. This directly impacts Lucene 
response time.

One solution would be to implement the searching as an application that 
executes in a distributed fashion (not sure if map-reduce is the best 
model here), but first copies the indexes to LocalFileSystem.

-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33821-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 29 13:40:02 2008
Return-Path: <java-user-return-33821-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89331 invoked from network); 29 Apr 2008 13:40:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Apr 2008 13:40:02 -0000
Received: (qmail 13844 invoked by uid 500); 29 Apr 2008 13:39:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13817 invoked by uid 500); 29 Apr 2008 13:39:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13806 invoked by uid 99); 29 Apr 2008 13:39:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Apr 2008 06:39:56 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.83] (HELO spunkymail-a17.g.dreamhost.com) (208.97.132.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Apr 2008 13:39:11 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a17.g.dreamhost.com (Postfix) with ESMTP id AE9F475194
	for <java-user@lucene.apache.org>; Tue, 29 Apr 2008 06:39:20 -0700 (PDT)
Message-Id: <EC181FA5-887B-4BFA-8C0D-E321C43770D5@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <2cda2fc90804272140u5e179ac5va8ac8f0672a7c6eb@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: How to Uniquely Identify Documents in a Lucene Index
Date: Tue, 29 Apr 2008 09:39:12 -0400
References: <2cda2fc90804272137h73589cb1k5da0f8da4e201656@mail.gmail.com> <2cda2fc90804272140u5e179ac5va8ac8f0672a7c6eb@mail.gmail.com>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org



On Apr 28, 2008, at 12:40 AM, Hasan Diwan wrote:

> I'm working on a JSP-based, free-form text storage & retrieval system
> based on lucene. Part of my desired feature set includes the ability
> to retrieve, edit, and update text comprising the document. The user
> flow involves:
> A search for a document, whose "all" field is then retrieved, then it
> can be edited and put back in using the updateDocument method. I'm not
> quite sure how to decorate the data in the document within textarea
> tags on a click of a button for edit. Many thanks for any help you can
> provide.

Can you clarify what you mean by "decorate"?  You might have a look at  
Luke, which has an "edit" functionality.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33822-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 29 14:20:23 2008
Return-Path: <java-user-return-33822-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 250 invoked from network); 29 Apr 2008 14:20:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Apr 2008 14:20:23 -0000
Received: (qmail 83889 invoked by uid 500); 29 Apr 2008 14:20:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83874 invoked by uid 500); 29 Apr 2008 14:20:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83036 invoked by uid 99); 29 Apr 2008 14:20:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Apr 2008 07:20:12 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of bernd.mueller@scai.fhg.de designates 153.96.87.18 as permitted sender)
Received: from [153.96.87.18] (HELO mailgwb1.fraunhofer.de) (153.96.87.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Apr 2008 14:19:25 +0000
Received: from mailgwb1.fraunhofer.de (localhost [127.0.0.1])
	by mailgwb1.fraunhofer.de[host mailgwb1] (8.14.2+/8.14.2) with ESMTP id m3TEJcxO019771
	for <java-user@lucene.apache.org>; Tue, 29 Apr 2008 16:19:38 +0200 (CEST)
Received: from kso.scai.fraunhofer.de (kso.scai.fraunhofer.de [193.175.167.130])
	by mailgwb1.fraunhofer.de (8.14.2+/8.14.2) with ESMTP id m3TEJb0r019759
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=OK)
	for <java-user@lucene.apache.org>; Tue, 29 Apr 2008 16:19:37 +0200 (CEST)
Received: from [129.26.132.5] (neyman.scai.fraunhofer.de [129.26.132.5])
	by kso.scai.fraunhofer.de (8.13.5+/8.13.5) with ESMTP id m3TELB3J021881
	for <java-user@lucene.apache.org>; Tue, 29 Apr 2008 16:21:11 +0200 (CEST)
X-Authentication-Warning: kso.scai.fraunhofer.de: Host neyman.scai.fraunhofer.de [129.26.132.5] claimed to be [129.26.132.5]
Message-ID: <48172E07.80302@scai.fhg.de>
Date: Tue, 29 Apr 2008 16:17:43 +0200
From: Bernd Mueller <bernd.mueller@scai.fhg.de>
User-Agent: Mozilla Thunderbird 1.0.2-1.3.2 (X11/20050324)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: several indices
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Fraunhofer-Email-Policy: accepted
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,


I want to provide in the same web-interface the possibility to chose 
between different corpora. Is it possible to load several indices and to 
have somehow a "multi-index"?

Maybe one of you guys could send me some information about the issue here.


Thanks and regards,

Bernd

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33823-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 29 15:06:55 2008
Return-Path: <java-user-return-33823-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38047 invoked from network); 29 Apr 2008 15:06:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Apr 2008 15:06:53 -0000
Received: (qmail 97628 invoked by uid 500); 29 Apr 2008 15:06:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97594 invoked by uid 500); 29 Apr 2008 15:06:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97583 invoked by uid 99); 29 Apr 2008 15:06:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Apr 2008 08:06:47 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of williams.tricia@gmail.com designates 64.233.170.185 as permitted sender)
Received: from [64.233.170.185] (HELO rn-out-0910.google.com) (64.233.170.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Apr 2008 15:06:00 +0000
Received: by rn-out-0910.google.com with SMTP id j40so52773rnf.4
        for <java-user@lucene.apache.org>; Tue, 29 Apr 2008 08:06:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=2tguJgBszivx0SpAk/hgyf06YPB0xMtYAs0j0Z8bkSE=;
        b=IjQRT26VtFsHWOCsVXV55rGGLxq5nSozFXJn8HeXGKxHbuS86OG7pmrPiWWDLft3dco16gs+7Ay1eNmEQoieFPaSIPOxC1+2iGmadxEhxKQFZtsIp6n8v07OJ3/BoIjAfYC1JJWJbAUdjWnRHzWn67HVRBZC4wrNB0T3ciplh4w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=qvj8dJchvsjtpOheconS17ieNXSroR1OoOtjYuIlWqqV9F/pX8M6P6Saa8Ilf07+owudGl9M3TGUvU2XAD47Sqlk9wXE/Ql1Diq5lQD+fS1K/u036UC4b5xsgebkFX40tA64fnXF5zKuVlk4uxSTV89hCJ1MtZg0cKPc/4aa3PU=
Received: by 10.114.184.7 with SMTP id h7mr8005263waf.28.1209481572863;
        Tue, 29 Apr 2008 08:06:12 -0700 (PDT)
Received: from ?192.168.1.72? ( [204.191.52.10])
        by mx.google.com with ESMTPS id j34sm14119057waf.29.2008.04.29.08.06.10
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 29 Apr 2008 08:06:11 -0700 (PDT)
Message-ID: <48173960.6070201@gmail.com>
Date: Tue, 29 Apr 2008 09:06:08 -0600
From: Tricia Williams <williams.tricia@gmail.com>
User-Agent: Thunderbird 2.0.0.12 (X11/20080227)
MIME-Version: 1.0
To: java-user@lucene.apache.org, maurizio316@interfree.it
Subject: Re: applying patches (was [jira] Commented: (LUCENE-794) Extend contrib
 Highlighter to properly support PhraseQuery, SpanQuery,  ConstantScoreRangeQuery)
References: <1327513741.1209480236944.JavaMail.jira@brutus>
In-Reply-To: <1327513741.1209480236944.JavaMail.jira@brutus>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Maurizio,

    I'm replying in java-user because I believe this is the appropriate 
place for a question like this.

    All the patches that I have encountered (including this one) are 
usually applied at the root.  One should download the source code from 
http://svn.apache.org/repos/asf/lucene/java/trunk/.  From the trunk 
directory all you should need to apply is the most recent patch: 
SpanHighlighter-02-10-2008.patch.  The syntax for applying patches is 
typically:
patch -p 0 -i <path to patch> [--dry-run]
where the dry-run flag allows you to see if the patch applies cleanly 
without gumming up your source.

Hope that helps,
Tricia

Maurizio (JIRA) wrote:
>     [ https://issues.apache.org/jira/browse/LUCENE-794?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&focusedCommentId=12593030#action_12593030 ] 
>
> Maurizio commented on LUCENE-794:
> ---------------------------------
>
> Hi,
> probably I'm missing something, I'm not sure this is the right place to ask my question, but I can't understand how patch mechanism works.
> First, I downloaded source code from http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/highlighter/, then I tried to apply every patches listed above.
> I wrote a trivial bash script for apply patches (I'm assuming that these one are not cumulative patch), but unsuccessfully.
>  
> thanks in advance...
>
> Maurizio
>
>
> patch.sh
> /*-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
> #!/bin/sh
> patch -p2 < spanhighlighter.patch
> patch -p2 < spanhighlighter2.patch
> patch -p2 < spanhighlighter3.patch
> patch -p2 < spanhighlighter4.patch
> unzip spanhighlighter_patch_4.zip
> mv index src/java/org/apache/lucene/
> patch -p2 < spanhighlighter5.patch
> patch -p2 < spanhighlighter6.patch
> patch -p2 < spanhighlighter7.patch
> patch -p2 < spanhighlighter8.patch
> patch -p2 < spanhighlighter9.patch
> patch -p2 < spanhighlighter10.patch
> patch -p2 < spanhighlighter11.patch
> patch -p2 < spanhighlighter12.patch
> patch -p2 < spanhighlighter_24_January_2008.patch
> patch -p2 < SpanHighlighter-01-26-2008.patch
> patch -p2 < SpanHighlighter-01-28-2008.patch
> patch -p2 < MultiPhraseQueryExtraction.patch
> patch -p2 < SpanHighlighter-02-10-2008.patch
> patch -p2 < MultiPhraseQueryExtraction.patch
>
> output
> /*-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
> (Stripping trailing CRs from patch.)
> patching file build.xml
> Hunk #1 succeeded at 18 with fuzz 1 (offset 17 lines).
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/CachedTokenStream.java
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/Highlighter.java
> Hunk #1 FAILED at 222.
> Hunk #2 succeeded at 257 (offset 2 lines).
> 1 out of 2 hunks FAILED -- saving rejects to file src/java/org/apache/lucene/search/highlight/Highlighter.java.rej
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/QueryScorer.java
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/QuerySpansExtractor.java
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/Scorer.java
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/spanscorer.html
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/SpanScorer.java
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/WeightedSpanTerm.java
> (Stripping trailing CRs from patch.)
> patching file src/test/org/apache/lucene/search/highlight/HighlighterTest.java
> Hunk #1 succeeded at 460 (offset 7 lines).
> (Stripping trailing CRs from patch.)
> patching file src/test/org/apache/lucene/search/highlight/SpanHighlighterTest.java
> (Stripping trailing CRs from patch.)
> patching file build.xml
> Hunk #1 FAILED at 1.
> 1 out of 1 hunk FAILED -- saving rejects to file build.xml.rej
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/CachedTokenStream.java
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/Highlighter.java
> Hunk #1 FAILED at 222.
> Hunk #2 FAILED at 255.
> 2 out of 2 hunks FAILED -- saving rejects to file src/java/org/apache/lucene/search/highlight/Highlighter.java.rej
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/QueryScorer.java
> Reversed (or previously applied) patch detected! Assume -R? [n]
> Apply anyway? [n] y
> Hunk #1 FAILED at 104.
> 1 out of 1 hunk FAILED -- saving rejects to file src/java/org/apache/lucene/search/highlight/QueryScorer.java.rej
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/QuerySpansExtractor.java
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/Scorer.java
> Reversed (or previously applied) patch detected! Assume -R? [n]
> Apply anyway? [n] y
> Hunk #1 FAILED at 36.
> 1 out of 1 hunk FAILED -- saving rejects to file src/java/org/apache/lucene/search/highlight/Scorer.java.rej
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/spanscorer.html
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/SpanScorer.java
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/WeightedSpanTerm.java
> (Stripping trailing CRs from patch.)
> patching file src/test/org/apache/lucene/search/highlight/HighlighterTest.java
> Reversed (or previously applied) patch detected! Assume -R? [n]
> Apply anyway? [n] y
> Hunk #1 FAILED at 460.
> 1 out of 1 hunk FAILED -- saving rejects to file src/test/org/apache/lucene/search/highlight/HighlighterTest.java.rej
> (Stripping trailing CRs from patch.)
> patching file src/test/org/apache/lucene/search/highlight/SpanHighlighterTest.java
> (Stripping trailing CRs from patch.)
> patching file build.xml
> Hunk #1 FAILED at 1.
> 1 out of 1 hunk FAILED -- saving rejects to file build.xml.rej
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/CachedTokenStream.java
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/QuerySpansExtractor.java
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/SimpleSpanFragmenter.java
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/spanscorer.html
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/SpanScorer.java
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/WeightedSpanTerm.java
> (Stripping trailing CRs from patch.)
> patching file src/test/org/apache/lucene/search/highlight/SpanHighlighterTest.java
> (Stripping trailing CRs from patch.)
> patching file build.xml
> Hunk #1 FAILED at 1.
> 1 out of 1 hunk FAILED -- saving rejects to file build.xml.rej
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/CachedTokenStream.java
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/QuerySpansExtractor.java
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/SimpleSpanFragmenter.java
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/spanscorer.html
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/SpanScorer.java
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/WeightedSpanTerm.java
> (Stripping trailing CRs from patch.)
> patching file src/test/org/apache/lucene/search/highlight/SpanHighlighterTest.java
> Archive: spanhighlighter_patch_4.zip
>    creating: index/
>   inflating: index/TermFieldModifier.java
> replace spanhighlighter4.patch? [y]es, [n]o, [A]ll, [N]one, [r]ename: y
>   inflating: spanhighlighter4.patch
> (Stripping trailing CRs from patch.)
> patching file build.xml
> Hunk #1 FAILED at 1.
> 1 out of 1 hunk FAILED -- saving rejects to file build.xml.rej
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/CachedTokenStream.java
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/QuerySpansExtractor.java
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/SimpleSpanFragmenter.java
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/spanscorer.html
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/SpanScorer.java
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/WeightedSpanTerm.java
> (Stripping trailing CRs from patch.)
> patching file src/test/org/apache/lucene/search/highlight/SpanHighlighterTest.java
> (Stripping trailing CRs from patch.)
> patching file build.xml
> Hunk #1 FAILED at 1.
> 1 out of 1 hunk FAILED -- saving rejects to file build.xml.rej
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/CachedTokenStream.java
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/QuerySpansExtractor.java
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/SimpleSpanFragmenter.java
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/spanscorer.html
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/SpanScorer.java
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/WeightedSpanTerm.java
> (Stripping trailing CRs from patch.)
> patching file src/test/org/apache/lucene/search/highlight/SpanHighlighterTest.java
> (Stripping trailing CRs from patch.)
> patching file build.xml
> Hunk #1 FAILED at 1.
> 1 out of 1 hunk FAILED -- saving rejects to file build.xml.rej
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/SimpleSpanFragmenter.java
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/spanscorer.html
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/SpanScorer.java
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/WeightedSpanTerm.java
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/WeightedSpanTermExtractor.java
> (Stripping trailing CRs from patch.)
> patching file src/test/org/apache/lucene/search/highlight/SpanHighlighterTest.java
> (Stripping trailing CRs from patch.)
> patching file build.xml
> Hunk #1 FAILED at 1.
> 1 out of 1 hunk FAILED -- saving rejects to file build.xml.rej
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/SimpleSpanFragmenter.java
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/spanscorer.html
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/SpanScorer.java
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/WeightedSpanTerm.java
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/WeightedSpanTermExtractor.java
> (Stripping trailing CRs from patch.)
> patching file src/test/org/apache/lucene/search/highlight/SpanHighlighterTest.java
> (Stripping trailing CRs from patch.)
> patching file build.xml
> Hunk #1 FAILED at 1.
> 1 out of 1 hunk FAILED -- saving rejects to file build.xml.rej
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/SimpleSpanFragmenter.java
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/spanscorer.html
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/SpanScorer.java
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/WeightedSpanTerm.java
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/WeightedSpanTermExtractor.java
> (Stripping trailing CRs from patch.)
> patching file src/test/org/apache/lucene/search/highlight/SpanHighlighterTest.java
> (Stripping trailing CRs from patch.)
> patching file build.xml
> Hunk #1 FAILED at 1.
> 1 out of 1 hunk FAILED -- saving rejects to file build.xml.rej
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/SimpleSpanFragmenter.java
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/spanscorer.html
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/SpanScorer.java
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/WeightedSpanTerm.java
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/WeightedSpanTermExtractor.java
> (Stripping trailing CRs from patch.)
> patching file src/test/org/apache/lucene/search/highlight/SpanHighlighterTest.java
> (Stripping trailing CRs from patch.)
> patching file build.xml
> Hunk #1 FAILED at 1.
> 1 out of 1 hunk FAILED -- saving rejects to file build.xml.rej
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/SimpleSpanFragmenter.java
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/spanscorer.html
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/SpanScorer.java
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/WeightedSpanTerm.java
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/WeightedSpanTermExtractor.java
> (Stripping trailing CRs from patch.)
> patching file src/test/org/apache/lucene/search/highlight/SpanHighlighterTest.java
> (Stripping trailing CRs from patch.)
> patching file build.xml
> Hunk #1 FAILED at 1.
> 1 out of 1 hunk FAILED -- saving rejects to file build.xml.rej
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/SimpleSpanFragmenter.java
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/spanscorer.html
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/SpanScorer.java
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/WeightedSpanTerm.java
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/WeightedSpanTermExtractor.java
> (Stripping trailing CRs from patch.)
> patching file src/test/org/apache/lucene/search/highlight/SpanHighlighterTest.java
> patching file src/test/org/apache/lucene/search/highlight/SpanHighlighterTest.java
> patching file src/java/org/apache/lucene/search/highlight/spanscorer.html
> patching file src/java/org/apache/lucene/search/highlight/WeightedSpanTermExtractor.java
> patching file src/java/org/apache/lucene/search/highlight/WeightedSpanTerm.java
> patching file src/java/org/apache/lucene/search/highlight/SpanScorer.java
> patching file src/java/org/apache/lucene/search/highlight/SimpleSpanFragmenter.java
> patching file build.xml
> Hunk #1 FAILED at 1.
> 1 out of 1 hunk FAILED -- saving rejects to file build.xml.rej
> (Stripping trailing CRs from patch.)
> patching file build.xml
> Hunk #1 FAILED at 1.
> 1 out of 1 hunk FAILED -- saving rejects to file build.xml.rej
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/SimpleSpanFragmenter.java
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/spanscorer.html
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/SpanScorer.java
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/WeightedSpanTerm.java
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/WeightedSpanTermExtractor.java
> (Stripping trailing CRs from patch.)
> patching file src/test/org/apache/lucene/search/highlight/HighlighterTest.java
> Hunk #3 FAILED at 68.
> 1 out of 3 hunks FAILED -- saving rejects to file src/test/org/apache/lucene/search/highlight/HighlighterTest.java.rej
> (Stripping trailing CRs from patch.)
> patching file build.xml
> Hunk #1 FAILED at 1.
> 1 out of 1 hunk FAILED -- saving rejects to file build.xml.rej
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/SimpleSpanFragmenter.java
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/spanscorer.html
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/SpanScorer.java
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/WeightedSpanTerm.java
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/WeightedSpanTermExtractor.java
> (Stripping trailing CRs from patch.)
> patching file src/test/org/apache/lucene/search/highlight/HighlighterTest.java
> Reversed (or previously applied) patch detected! Assume -R? [n]
> Apply anyway? [n] y
> Hunk #1 FAILED at 21.
> Hunk #2 FAILED at 56.
> Hunk #3 FAILED at 68.
> 3 out of 3 hunks FAILED -- saving rejects to file src/test/org/apache/lucene/search/highlight/HighlighterTest.java.rej
> can't find file to patch at input line 5
> Perhaps you used the wrong -p or --strip option?
> The text leading up to this was:
> --------------------------
> |diff --git a/contrib/highlighter/src/java/org/apache/lucene/search/highlight/WeightedSpanTermExtractor.java b/contrib/highlighter/src/java/org/apache/lucene/search/highlight/WeightedSpanTermExtractor.java
> |index d46f5c2..d456f59 100644
> |--- a/contrib/highlighter/src/java/org/apache/lucene/search/highlight/WeightedSpanTermExtractor.java
> |+++ b/contrib/highlighter/src/java/org/apache/lucene/search/highlight/WeightedSpanTermExtractor.java
> --------------------------
> File to patch:
> Skip this patch? [y] y
> Skipping patch.
> 2 out of 2 hunks ignored
> can't find file to patch at input line 76
> Perhaps you used the wrong -p or --strip option?
> The text leading up to this was:
> --------------------------
> |diff --git a/contrib/highlighter/src/test/org/apache/lucene/search/highlight/HighlighterTest.java b/contrib/highlighter/src/test/org/apache/lucene/search/highlight/HighlighterTest.java
> |index 59179d4..a0f9a7b 100644
> |--- a/contrib/highlighter/src/test/org/apache/lucene/search/highlight/HighlighterTest.java
> |+++ b/contrib/highlighter/src/test/org/apache/lucene/search/highlight/HighlighterTest.java
> --------------------------
> File to patch:
> Skip this patch? [y] y
> Skipping patch.
> 3 out of 3 hunks ignored
> (Stripping trailing CRs from patch.)
> patching file build.xml
> Hunk #1 FAILED at 1.
> 1 out of 1 hunk FAILED -- saving rejects to file build.xml.rej
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/SimpleSpanFragmenter.java
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/spanscorer.html
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/SpanScorer.java
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/WeightedSpanTerm.java
> (Stripping trailing CRs from patch.)
> patching file src/java/org/apache/lucene/search/highlight/WeightedSpanTermExtractor.java
> (Stripping trailing CRs from patch.)
> patching file src/test/org/apache/lucene/search/highlight/HighlighterTest.java
> Hunk #1 FAILED at 21.
> Hunk #2 FAILED at 69.
> 2 out of 2 hunks FAILED -- saving rejects to file src/test/org/apache/lucene/search/highlight/HighlighterTest.java.rej
> can't find file to patch at input line 5
> Perhaps you used the wrong -p or --strip option?
> The text leading up to this was:
> --------------------------
> |diff --git a/contrib/highlighter/src/java/org/apache/lucene/search/highlight/WeightedSpanTermExtractor.java b/contrib/highlighter/src/java/org/apache/lucene/search/highlight/WeightedSpanTermExtractor.java
> |index d46f5c2..d456f59 100644
> |--- a/contrib/highlighter/src/java/org/apache/lucene/search/highlight/WeightedSpanTermExtractor.java
> |+++ b/contrib/highlighter/src/java/org/apache/lucene/search/highlight/WeightedSpanTermExtractor.java
> --------------------------
> File to patch:
> Skip this patch? [y] y
> Skipping patch.
> 2 out of 2 hunks ignored
> can't find file to patch at input line 76
> Perhaps you used the wrong -p or --strip option?
> The text leading up to this was:
> --------------------------
> |diff --git a/contrib/highlighter/src/test/org/apache/lucene/search/highlight/HighlighterTest.java b/contrib/highlighter/src/test/org/apache/lucene/search/highlight/HighlighterTest.java
> |index 59179d4..a0f9a7b 100644
> |--- a/contrib/highlighter/src/test/org/apache/lucene/search/highlight/HighlighterTest.java
> |+++ b/contrib/highlighter/src/test/org/apache/lucene/search/highlight/HighlighterTest.java
> --------------------------
> File to patch:
> Skip this patch? [y] y
> Skipping patch.
> 3 out of 3 hunks ignored
> /*-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
>
>
>
>   
>> Extend contrib Highlighter to properly support PhraseQuery, SpanQuery,  ConstantScoreRangeQuery
>> -----------------------------------------------------------------------------------------------
>>
>>                 Key: LUCENE-794
>>                 URL: https://issues.apache.org/jira/browse/LUCENE-794
>>             Project: Lucene - Java
>>          Issue Type: Improvement
>>          Components: Other
>>            Reporter: Mark Miller
>>            Priority: Minor
>>         Attachments: MultiPhraseQueryExtraction.patch, SpanHighlighter-01-26-2008.patch, SpanHighlighter-01-28-2008.patch, SpanHighlighter-02-10-2008.patch, spanhighlighter.patch, spanhighlighter10.patch, spanhighlighter11.patch, spanhighlighter12.patch, spanhighlighter2.patch, spanhighlighter3.patch, spanhighlighter5.patch, spanhighlighter6.patch, spanhighlighter7.patch, spanhighlighter8.patch, spanhighlighter9.patch, spanhighlighter_24_January_2008.patch, spanhighlighter_patch_4.zip
>>
>>
>> This patch adds a new Scorer class (SpanQueryScorer) to the Highlighter package that scores just like QueryScorer, but scores a 0 for Terms that did not cause the Query hit. This gives 'actual' hit highlighting for the range of SpanQuerys, PhraseQuery, and  ConstantScoreRangeQuery. New Query types are easy to add. There is also a new Fragmenter that attempts to fragment without breaking up Spans.
>> See http://issues.apache.org/jira/browse/LUCENE-403 for some background.
>> There is a dependency on MemoryIndex.
>>     
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33824-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 29 17:06:19 2008
Return-Path: <java-user-return-33824-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91478 invoked from network); 29 Apr 2008 17:06:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Apr 2008 17:06:19 -0000
Received: (qmail 50981 invoked by uid 500); 29 Apr 2008 17:06:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50952 invoked by uid 500); 29 Apr 2008 17:06:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50933 invoked by uid 99); 29 Apr 2008 17:06:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Apr 2008 10:06:05 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.48.58] (HELO web52009.mail.re2.yahoo.com) (206.190.48.58)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 29 Apr 2008 17:05:11 +0000
Received: (qmail 7757 invoked by uid 60001); 29 Apr 2008 17:05:32 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=pLnJvAqflT5iDXRfeMQJ0KVFhXIz+B9P2s5UZuqcURew31V9aQymzVoh1J3rs5oZPtUazlsUnN+bVcbbIJiGU+XbUNCJMsK2lLowrafOWeFP+s4MJ9KhrjTPZtyYz7NteshzzvK0ZfiCuT9NgwPQVay9FWUtdSsLcjJfOphm7wM=;
X-YMail-OSG: qEnlz_AVM1nRvhtLHZiACYKoeGouOS3zh2J7pedsXntrNrh8S_BvpiOHTV9KSx5e4QWndpYQku3cglmEecNoQwePmdDESoQlh.t47lCozuNkQm5rZbQd5Iqp13I-
Received: from [12.162.3.126] by web52009.mail.re2.yahoo.com via HTTP; Tue, 29 Apr 2008 10:05:31 PDT
Date: Tue, 29 Apr 2008 10:05:31 -0700 (PDT)
From: Rajesh parab <rajesh_parab_1@yahoo.com>
Subject: ParalleReader and synchronization between indexes
To: Lucene <java-user@lucene.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
Message-ID: <195356.96600.qm@web52009.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

This is from javadoc of ParallelReader:

======================================================

An IndexReader which reads multiple, parallel indexes.
Each index added must have the same number of
documents, but typically each contains different
fields. Each document contains the union of the fields
of all documents with the same document number. When
searching, matches for a query term are from the first
index added that has the field. 

This is useful, e.g., with collections that have large
fields which change rarely and small fields that
change more frequently. The smaller fields may be
re-indexed in a new index and both indexes may be
searched together.

======================================================

I have a similar use case as mentioned above and hence
would like to use ParallelReader to search across
multiple indexes.

I have an object that has 50 fields. Out of these 50
fields, 45 are relatively static and other 5 are
modified very often. So, I am planning to partition
this objects data into 2 indexes such that 45 static
fields will be part of one index and remaining 5
dynamic fields will constitute second index. While
generating the index for the first time, I can make
sure that the document order for documents inside both
these indexes is same and hence ParallelReader will
work properly with it.

The question is -
What if the data inside second (smaller) index
changes? In order to update index document, I will
have to delete it and re-insert it again as Lucene
does not support document update. This action (of
delete and re-insert) will change internal document id
for updated document inside second index and in order
to sync it with first index, I will have to also
modify first (relatively big and static) index. If we
will have to update both the indexes, how it is
different from having a single index with all the
fields? What is the use case in which ParallelReader
will get used? As per documentation, I was thinking
that it will apply for my use case, but synchronizing
the indexes seems to be a problem.

Please help.

Regards,
Rajesh



      ____________________________________________________________________________________
Be a better friend, newshound, and 
know-it-all with Yahoo! Mobile.  Try it now.  http://mobile.yahoo.com/;_ylt=Ahu06i62sR8HDtDypao8Wcj9tAcJ

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33825-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 29 17:18:01 2008
Return-Path: <java-user-return-33825-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96038 invoked from network); 29 Apr 2008 17:18:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Apr 2008 17:18:01 -0000
Received: (qmail 74384 invoked by uid 500); 29 Apr 2008 17:17:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74345 invoked by uid 500); 29 Apr 2008 17:17:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74334 invoked by uid 99); 29 Apr 2008 17:17:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Apr 2008 10:17:55 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.38.60] (HELO web50306.mail.re2.yahoo.com) (206.190.38.60)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 29 Apr 2008 17:17:00 +0000
Received: (qmail 48073 invoked by uid 60001); 29 Apr 2008 17:17:19 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=MZ61m7vpmOtSXGHF0Hf+B2Qo61y02bWjd7R/+/9ay+g27ZXnbuDoU3czf8j99nZ/3GwvPX45Crqklcicb5LGqXjteI2NrCYRYuA3GJJayf3axhL5HCArMeTLIZy1QGcq8OGmSRdpy/eRdXwxmJRp/W9wrlvNVCMhGozE/UbTGHo=;
X-YMail-OSG: UTMVMyAVM1mzzjnRhLT.KwLKx7DPBZMpedXiTbMQpRQ_1cA_.OPH6EmAWa5_VbQBcR_KTL7X9lgk0N7ufcvsXyiOGz.KtF.o4rKiWyKgEsRzZvGgZs0XyeUrmw--
Received: from [208.125.28.244] by web50306.mail.re2.yahoo.com via HTTP; Tue, 29 Apr 2008 10:17:18 PDT
X-Mailer: YahooMailRC/902.40 YahooMailWebService/0.7.185
Date: Tue, 29 Apr 2008 10:17:18 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: several indices
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <942011.47850.qm@web50306.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Are you looking for....

[otis@localhost src]$ ff \*Multi\*java | grep -v Test | grep Search
./java/org/apache/lucene/search/MultiSearcher.java
./java/org/apache/lucene/search/ParallelMultiSearcher.java

[otis@localhost src]$ ff \*Remote\*java | grep -v Test | grep Search
./java/org/apache/lucene/search/RemoteSearchable.java

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch

----- Original Message ----
> From: Bernd Mueller <bernd.mueller@scai.fhg.de>
> To: java-user@lucene.apache.org
> Sent: Tuesday, April 29, 2008 10:17:43 AM
> Subject: several indices
> 
> Hello,
> 
> 
> I want to provide in the same web-interface the possibility to chose 
> between different corpora. Is it possible to load several indices and to 
> have somehow a "multi-index"?
> 
> Maybe one of you guys could send me some information about the issue here.
> 
> 
> Thanks and regards,
> 
> Bernd
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33826-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 29 17:36:08 2008
Return-Path: <java-user-return-33826-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4480 invoked from network); 29 Apr 2008 17:36:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Apr 2008 17:36:08 -0000
Received: (qmail 23544 invoked by uid 500); 29 Apr 2008 17:36:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23517 invoked by uid 500); 29 Apr 2008 17:36:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23506 invoked by uid 99); 29 Apr 2008 17:36:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Apr 2008 10:36:02 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of hasan.diwan@gmail.com designates 64.233.170.188 as permitted sender)
Received: from [64.233.170.188] (HELO rn-out-0910.google.com) (64.233.170.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Apr 2008 17:35:18 +0000
Received: by rn-out-0910.google.com with SMTP id j40so129434rnf.4
        for <java-user@lucene.apache.org>; Tue, 29 Apr 2008 10:35:31 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=yJAFHfnyjJXzLwxmDVJqj4divYHeBmCbMulEOsskX00=;
        b=iKEuwVy1q7YeRMYfxaunkmtL+2X6pWbX6gtHC0yNLW/e2WJG5OsKRPJrE+rqS8Q/D93gt/wSeizGupuat1daIpchxOdXXPKgRTDET+UmDf5D92lyXxFrWrgkXuoBJ+rtYRDygCSskfIw3BCQrdkafnILqHOAvfuH2Txa8au3ADk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=fG5yNBPDJlbCtCo2X2zUjOuHtZ7BbpENpM2X3dBFJifyg4uuRdzNJTXOQXJNLP5wzGSM5+sCsR4rrdt1ZBzdc/ZFuw0Q0+frh2CwtKMyQnRUNZWSlUG+xiewaI+hfXm26e1PnT1la4PFACmr0qscHC6mqTMabln0FSTWhFODDVU=
Received: by 10.114.149.2 with SMTP id w2mr8255294wad.158.1209490530599;
        Tue, 29 Apr 2008 10:35:30 -0700 (PDT)
Received: by 10.115.58.6 with HTTP; Tue, 29 Apr 2008 10:35:30 -0700 (PDT)
Message-ID: <2cda2fc90804291035u576bad32we64401242276e40e@mail.gmail.com>
Date: Tue, 29 Apr 2008 10:35:30 -0700
From: "Hasan Diwan" <hasan.diwan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to Uniquely Identify Documents in a Lucene Index
In-Reply-To: <EC181FA5-887B-4BFA-8C0D-E321C43770D5@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <2cda2fc90804272137h73589cb1k5da0f8da4e201656@mail.gmail.com>
	 <2cda2fc90804272140u5e179ac5va8ac8f0672a7c6eb@mail.gmail.com>
	 <EC181FA5-887B-4BFA-8C0D-E321C43770D5@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

On 29/04/2008, Grant Ingersoll <gsingers@apache.org> wrote:
>  Can you clarify what you mean by "decorate"?

<textarea><%= document.get("all"); %></textarea>
<input type="submit" value="update"/>
<%= try {
      writer.updateDocument(document);
      writer.optimize();
      writer.close();
    }
%>

I'm trying to figure out if there's a builtin way to retrieve a unique
document from the index.
-- 
Cheers,
Hasan Diwan <hasan.diwan@gmail.com>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33827-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 29 17:49:24 2008
Return-Path: <java-user-return-33827-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8723 invoked from network); 29 Apr 2008 17:49:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Apr 2008 17:49:24 -0000
Received: (qmail 57421 invoked by uid 500); 29 Apr 2008 17:49:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57382 invoked by uid 500); 29 Apr 2008 17:49:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57371 invoked by uid 99); 29 Apr 2008 17:49:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Apr 2008 10:49:18 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anaryin@gmail.com designates 216.239.58.189 as permitted sender)
Received: from [216.239.58.189] (HELO gv-out-0910.google.com) (216.239.58.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Apr 2008 17:48:34 +0000
Received: by gv-out-0910.google.com with SMTP id n8so49271gve.23
        for <java-user@lucene.apache.org>; Tue, 29 Apr 2008 10:48:46 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=ZR0wi4vLK05azkWBpv5FZGtAF3723fEI85B2UoKBd+g=;
        b=o6XrT5g/vNr8EPkcK88bDVIwt0LB1txlp2/7bqGPvHTzNyS//HXoANNo58haCTxE3gSxNqvhUzGVmU9vKd+A4ZcIl9ZSEngyESEqz2hvtpli2fZXhjIAFximR+giV0Zr91nHtXoFUw3GWGVfn0rFZIQdcyq7wFG2tmiqcokm+LQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=flqEoFgf8ibXy4bjV8ZdzWR/MQk5OHEa1zdn9mAIDUlbcAibYn9IlcjuR2ZJ0RFThE+3apohk9ikziYn/UZzURVZQviWNPGE7rsx0sSbvcd1fyOdV2WR4PSHkI5A6gB9SJDBKaKv/5wO4Mz11owQ+KZ46RXd1WyXYxA/6oAC0QE=
Received: by 10.150.92.12 with SMTP id p12mr5389120ybb.237.1209491325746;
        Tue, 29 Apr 2008 10:48:45 -0700 (PDT)
Received: by 10.150.149.17 with HTTP; Tue, 29 Apr 2008 10:48:45 -0700 (PDT)
Message-ID: <b537e3710804291048p6aa9151t144f48c324374cf1@mail.gmail.com>
Date: Tue, 29 Apr 2008 18:48:45 +0100
From: "=?UTF-8?Q?Jo=C3=A3o_Rodrigues?=" <anaryin@gmail.com>
To: java-user@lucene.apache.org
Subject: Removing duplicate entries
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4094_29869770.1209491325720"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4094_29869770.1209491325720
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

SGVsbG8gYWxsLiBCZWZvcmUgSSBhc2sgbXkgcXVlc3Rpb24sIEknZCBsaWtlIHRvIGNsYXJpZnkg
SSd2ZSByZWFkIHRoZQptYW51YWwgYW5kIHNlYXJjaGVkIHRoZSBhcmNoaXZlcywgYW5kIGlmIEkn
bSBoZXJlLCBpdCBpcyBiZWNhdXNlIEkndmUKbmVpdGhlciBmb3VuZCBhIHN1aXRhYmxlIGFuc3dl
ciwgb3IgKG1vc3QgbGlrZWx5KSBJIGRpZG4ndCB1bmRlcnN0YW5kIHRob3NlCndoaWNoIEkgZGlk
IGZpbmQgOikKCkkgaGF2ZSBhbiBpbmRleCBidWlsdCwgd2hpY2ggSSB1cGRhdGUgcmVndWxhcmx5
LiBIb3dldmVyLCB0aGVyZSBtYXkgYmUgc29tZQplbnRyaWVzLCBhdCB0aGUgdGltZSBvZiB0aGUg
dXBkYXRlLCB3aGljaCBhcmUgYWxyZWFkeSBpbiB0aGUgaW5kZXguIEFzIHN1Y2gsCkknZCBsaWtl
IHRvIHJlbW92ZSBzdWNoIGVudHJpZXMuIEkndmUgcmVhZCBhYm91dCBzb21lIEluZGV4UmVhZGVy
LnRlcm1FbnVtCnN0dWZmLCBidXQgSSBjYW4ndCBtYWtlIGFueXRoaW5nIG9mIGl0ID1cIEkgY2Fu
IChhbmQgd2lsbCkgcmVidWlsZCBteSBpbmRleCwKc28gSSdtIGxvb2tpbmcgYXQgYSAicnVudGlt
ZSIgYXBwcm9hY2guCgpIZXJlJ3Mgd2hhdCBJJ2QgbGlrZSB0byBkbzogSSdtIGluZGV4aW5nIHRo
ZSBuZXcgZG9jdW1lbnRzIHRvIGEgUkFNIEluZGV4LgpUaGVuLCBJIG1lcmdlIGl0IHdpdGggdGhl
IEZTIG9uZSwgYWxyZWFkeSBvbiB0aGUgaGFyZCBkcml2ZSBhbmQgY29udGFpbmluZwphbGwgdGhl
IG9sZCBkb2N1bWVudHMuIElzIHRoZXJlIGEgd2F5IHRvIGNoZWNrIGlmIGEgZ2l2ZW4gZG9jdW1l
bnQgaXMgaW4gdGhlCmluZGV4LCBhbmQgaWYgaXQgaXMsIHJlcGxhY2UgaXQgd2l0aCB0aGlzIG5l
dyBvbmU/IEkga25vdyAob3IgYXQgbGVhc3QgdGhpbmsKSSBrbm93KSBob3cgdG8gZG8gdGhpcyAi
cmVwbGFjZW1lbnQiLCBidXQgaXQncyB0aGUgY29tcGFyaXNvbiBJJ20gZmFpbGluZyB0bwpncmFz
cC4KCgpUaGFua3MgZm9yIGFueSBhbnN3ZXJzIDopCgotLSAKSm/Do28gUm9kcmlndWVzCg==
------=_Part_4094_29869770.1209491325720--

From java-user-return-33828-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 29 17:58:18 2008
Return-Path: <java-user-return-33828-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11820 invoked from network); 29 Apr 2008 17:58:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Apr 2008 17:58:17 -0000
Received: (qmail 83170 invoked by uid 500); 29 Apr 2008 17:58:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83134 invoked by uid 500); 29 Apr 2008 17:58:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83123 invoked by uid 99); 29 Apr 2008 17:58:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Apr 2008 10:58:12 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anaryin@gmail.com designates 74.125.46.31 as permitted sender)
Received: from [74.125.46.31] (HELO yw-out-2324.google.com) (74.125.46.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Apr 2008 17:57:27 +0000
Received: by yw-out-2324.google.com with SMTP id 9so66409ywe.5
        for <java-user@lucene.apache.org>; Tue, 29 Apr 2008 10:57:37 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=t5tncgOzHQZahwKf6M+QQkOXQ8Nq/qqP0AAq6NuqjBk=;
        b=Mw3+NUt7csNWPbh+c4sm36l8iG6i7W8OfmZTaTVMD9yxFanUIVeHsgohqbzQJsHH2TvZ078shPLg5ZyTgLcOlGlR5q3qbEttPoknt9+9ioDQesSOCgLn5LoVYHMtr5PCOG/R981n0E2rCYIpI5wri2uCDAx7RRLvhRPt9HqDM9M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ieV8LBvsuy5ZheySg4xwke+HMWU/fctBZKQ3Yv/TBWxb9kETh4LPqlGysC8Eg6pMyx46mHdBxmIUZ9jUQTe1J9Lxi9T0FDLfLMfiJXSrMKYxO9IaPDDqaFae6KgQMfzrPaij+9TtF2An01Ap9i/sfMW0BkRCx+PLPFBFszUcbPk=
Received: by 10.150.49.1 with SMTP id w1mr33425ybw.23.1209491857656;
        Tue, 29 Apr 2008 10:57:37 -0700 (PDT)
Received: by 10.150.149.17 with HTTP; Tue, 29 Apr 2008 10:57:37 -0700 (PDT)
Message-ID: <b537e3710804291057n3d882497l4a25e2ad6172a127@mail.gmail.com>
Date: Tue, 29 Apr 2008 18:57:37 +0100
From: "=?UTF-8?Q?Jo=C3=A3o_Rodrigues?=" <anaryin@gmail.com>
To: java-user@lucene.apache.org
Subject: Fwd: Removing duplicate entries
In-Reply-To: <b537e3710804291048p6aa9151t144f48c324374cf1@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4120_28463557.1209491857628"
References: <b537e3710804291048p6aa9151t144f48c324374cf1@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4120_28463557.1209491857628
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

SGVsbG8gYWxsLiBCZWZvcmUgSSBhc2sgbXkgcXVlc3Rpb24sIEknZCBsaWtlIHRvIGNsYXJpZnkg
SSd2ZSByZWFkIHRoZQptYW51YWwgYW5kIHNlYXJjaGVkIHRoZSBhcmNoaXZlcywgYW5kIGlmIEkn
bSBoZXJlLCBpdCBpcyBiZWNhdXNlIEkndmUKbmVpdGhlciBmb3VuZCBhIHN1aXRhYmxlIGFuc3dl
ciwgb3IgKG1vc3QgbGlrZWx5KSBJIGRpZG4ndCB1bmRlcnN0YW5kIHRob3NlCndoaWNoIEkgZGlk
IGZpbmQgOikKCkkgaGF2ZSBhbiBpbmRleCBidWlsdCwgd2hpY2ggSSB1cGRhdGUgcmVndWxhcmx5
LiBIb3dldmVyLCB0aGVyZSBtYXkgYmUgc29tZQplbnRyaWVzLCBhdCB0aGUgdGltZSBvZiB0aGUg
dXBkYXRlLCB3aGljaCBhcmUgYWxyZWFkeSBpbiB0aGUgaW5kZXguIEFzIHN1Y2gsCkknZCBsaWtl
IHRvIHJlbW92ZSBzdWNoIGVudHJpZXMuIEkndmUgcmVhZCBhYm91dCBzb21lIEluZGV4UmVhZGVy
LnRlcm1FbnVtCnN0dWZmLCBidXQgSSBjYW4ndCBtYWtlIGFueXRoaW5nIG9mIGl0ID1cIEkgY2Fu
IChhbmQgd2lsbCkgcmVidWlsZCBteSBpbmRleCwKc28gSSdtIGxvb2tpbmcgYXQgYSAicnVudGlt
ZSIgYXBwcm9hY2guCgpIZXJlJ3Mgd2hhdCBJJ2QgbGlrZSB0byBkbzogSSdtIGluZGV4aW5nIHRo
ZSBuZXcgZG9jdW1lbnRzIHRvIGEgUkFNIEluZGV4LgpUaGVuLCBJIG1lcmdlIGl0IHdpdGggdGhl
IEZTIG9uZSwgYWxyZWFkeSBvbiB0aGUgaGFyZCBkcml2ZSBhbmQgY29udGFpbmluZwphbGwgdGhl
IG9sZCBkb2N1bWVudHMuIElzIHRoZXJlIGEgd2F5IHRvIGNoZWNrIGlmIGEgZ2l2ZW4gZG9jdW1l
bnQgaXMgaW4gdGhlCmluZGV4LCBhbmQgaWYgaXQgaXMsIHJlcGxhY2UgaXQgd2l0aCB0aGlzIG5l
dyBvbmU/IEkga25vdyAob3IgYXQgbGVhc3QgdGhpbmsKSSBrbm93KSBob3cgdG8gZG8gdGhpcyAi
cmVwbGFjZW1lbnQiLCBidXQgaXQncyB0aGUgY29tcGFyaXNvbiBJJ20gZmFpbGluZyB0bwpncmFz
cC4KCgpUaGFua3MgZm9yIGFueSBhbnN3ZXJzIDopCgotLSAKSm/Do28gUm9kcmlndWVzCg==
------=_Part_4120_28463557.1209491857628--

From java-user-return-33829-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 29 20:15:44 2008
Return-Path: <java-user-return-33829-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8514 invoked from network); 29 Apr 2008 20:15:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Apr 2008 20:15:44 -0000
Received: (qmail 73989 invoked by uid 500); 29 Apr 2008 20:15:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73958 invoked by uid 500); 29 Apr 2008 20:15:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73946 invoked by uid 99); 29 Apr 2008 20:15:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Apr 2008 13:15:38 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.185 as permitted sender)
Received: from [209.85.128.185] (HELO fk-out-0910.google.com) (209.85.128.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Apr 2008 20:14:53 +0000
Received: by fk-out-0910.google.com with SMTP id 19so168174fkr.5
        for <java-user@lucene.apache.org>; Tue, 29 Apr 2008 13:15:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=GHDXUS+OGZHK5k7vkZifBf7TCrzjc7bAVFcYfeLDF+A=;
        b=b7ZzycnFq+d1lnfoRcdDgzNk0axF4+GQ+05zTY8YlKNaVW8ww7pVp8wO+vGCwPDKREyuRNXt2DWGRN+nUAhDwShbVm/xcXIzQqn+2Yd4bsEOID3dZ+tntGr4mWSHlu6K/EFGELyM+Glk/ASm9gARLGXDGaBntq2cUno+9KN3Tfo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ZA1aI4gUevBPXnxl8lK99bMACjE/W0M3z67rcUoNtqFeBYXe9WDizieuA2ooOUVx1G5+xQpY2HMp802Ni4pB5WNzX0miB+7DldQnWHZ+3R2B1OQpLZhBrhExsCjSMkoNN9Z5pytk36MI3gdi+Ff7f6aK5HJM9Svb1LDcCve5b2U=
Received: by 10.82.175.7 with SMTP id x7mr4289842bue.35.1209500106572;
        Tue, 29 Apr 2008 13:15:06 -0700 (PDT)
Received: by 10.82.151.7 with HTTP; Tue, 29 Apr 2008 13:15:06 -0700 (PDT)
Message-ID: <359a92830804291315l43428102y98e1b979f02539e@mail.gmail.com>
Date: Tue, 29 Apr 2008 16:15:06 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Removing duplicate entries
In-Reply-To: <b537e3710804291057n3d882497l4a25e2ad6172a127@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10103_26999999.1209500106569"
References: <b537e3710804291048p6aa9151t144f48c324374cf1@mail.gmail.com>
	 <b537e3710804291057n3d882497l4a25e2ad6172a127@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_10103_26999999.1209500106569
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

The first question is what do you mean the document
is already in the index? Lucene doc IDs are useless
here since the ones in your FSDir and the ones in your
RAMdir are unrelated. In fact, I suspect that the
lucene docIDs will start at the same number in both.

Lucene doc IDs are just monotonically incremented integers.

So, how do you identify identical documents? Is there some
field in your document that's guaranteed to be unique to each
document? If so, *that's* the field you can use for termEnum
to get the Lucene docid to remove, assuming you've indexed
it UN_TOKENIZED or you are very, very, very confident that
your tokenizers won't break it up.

But you can make this easier by using IndexReader.deleteDocument(term)
where the term is your unique field.

Additionally, I question why you bother with a RAMdir for your changes.
An index reader essentially takes a snapshot of your index, and
subsequent changes are not seen by your searchers until you
close and reopen the underlying reader. What advantage do you
see in using a RAMdir?

Best
Erick

On Tue, Apr 29, 2008 at 1:57 PM, Jo=E3o Rodrigues <anaryin@gmail.com> wrote=
:

> Hello all. Before I ask my question, I'd like to clarify I've read the
> manual and searched the archives, and if I'm here, it is because I've
> neither found a suitable answer, or (most likely) I didn't understand
> those
> which I did find :)
>
> I have an index built, which I update regularly. However, there may be
> some
> entries, at the time of the update, which are already in the index. As
> such,
> I'd like to remove such entries. I've read about some IndexReader.termEnu=
m
> stuff, but I can't make anything of it =3D\ I can (and will) rebuild my
> index,
> so I'm looking at a "runtime" approach.
>
> Here's what I'd like to do: I'm indexing the new documents to a RAM Index=
.
> Then, I merge it with the FS one, already on the hard drive and containin=
g
> all the old documents. Is there a way to check if a given document is in
> the
> index, and if it is, replace it with this new one? I know (or at least
> think
> I know) how to do this "replacement", but it's the comparison I'm failing
> to
> grasp.
>
>
> Thanks for any answers :)
>
> --
> Jo=E3o Rodrigues
>

------=_Part_10103_26999999.1209500106569--

From java-user-return-33830-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 30 01:51:58 2008
Return-Path: <java-user-return-33830-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8003 invoked from network); 30 Apr 2008 01:51:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Apr 2008 01:51:58 -0000
Received: (qmail 96167 invoked by uid 500); 30 Apr 2008 01:51:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96131 invoked by uid 500); 30 Apr 2008 01:51:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96120 invoked by uid 99); 30 Apr 2008 01:51:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Apr 2008 18:51:51 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anaryin@gmail.com designates 74.125.46.29 as permitted sender)
Received: from [74.125.46.29] (HELO yw-out-2324.google.com) (74.125.46.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Apr 2008 01:51:06 +0000
Received: by yw-out-2324.google.com with SMTP id 9so225142ywe.5
        for <java-user@lucene.apache.org>; Tue, 29 Apr 2008 18:51:20 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=sQU2XO7DlxeWSfyEMr8kRUoJZbEZI7XKcjBQ5QaLJ2o=;
        b=kxdgkO8L+rwDAb8mU3a9QNko3Mwabx3nEhUpJ7gscUJvjMF3CSmk5EikWOYEyHWJZ+/cQa9SBDdP4myI5JF+RDWbHbM625dEKOW4yXa9NX1sPyhzdSfpA0aT//092TSWzT43/Cb9UJdjuaYksWrxDcYQDwS2juJLh4ILQFRRWm0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Ms9DpkhbaUQD6blhnnZJu7kTjxEei984dGnsAt2TvUv3mrNgHQWy1iSabpVXzlUvTz4Vq3Ado01kl3pYe959QWYQC3UJkgML+uyjoIyYjo4rlS5cQLDHHgUKCTENqaxVLGv+J/yhKNdM8iYSVu4F3UATJ6KOtTdR7dRTlva4WAY=
Received: by 10.150.12.3 with SMTP id 3mr548517ybl.16.1209520280014;
        Tue, 29 Apr 2008 18:51:20 -0700 (PDT)
Received: by 10.150.149.17 with HTTP; Tue, 29 Apr 2008 18:51:19 -0700 (PDT)
Message-ID: <b537e3710804291851q2c781959iaf96e14c67944b73@mail.gmail.com>
Date: Wed, 30 Apr 2008 02:51:19 +0100
From: "=?UTF-8?Q?Jo=C3=A3o_Rodrigues?=" <anaryin@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Removing duplicate entries
In-Reply-To: <359a92830804291315l43428102y98e1b979f02539e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5397_3360848.1209520280028"
References: <b537e3710804291048p6aa9151t144f48c324374cf1@mail.gmail.com>
	 <b537e3710804291057n3d882497l4a25e2ad6172a127@mail.gmail.com>
	 <359a92830804291315l43428102y98e1b979f02539e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5397_3360848.1209520280028
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

Rmlyc3Qgb2YgYWxsLCBsZXQgbWUgYXBvbG9naXplIGZvciB0aGUgZG91YmxlIHBvc3QgYnV0IEkg
Z290IHNvbWUgc3RyYW5nZQplcnJvciBtZXNzYWdlID1cCgo+VGhlIGZpcnN0IHF1ZXN0aW9uIGlz
IHdoYXQgZG8geW91IG1lYW4gdGhlIGRvY3VtZW50Cj5pcyBhbHJlYWR5IGluIHRoZSBpbmRleD8g
THVjZW5lIGRvYyBJRHMgYXJlIHVzZWxlc3MKPmhlcmUgc2luY2UgdGhlIG9uZXMgaW4geW91ciBG
U0RpciBhbmQgdGhlIG9uZXMgaW4geW91cgo+UkFNZGlyIGFyZSB1bnJlbGF0ZWQuIEluIGZhY3Qs
IEkgc3VzcGVjdCB0aGF0IHRoZQo+bHVjZW5lIGRvY0lEcyB3aWxsIHN0YXJ0IGF0IHRoZSBzYW1l
IG51bWJlciBpbiBib3RoLgoKVGhlIGRvY3VtZW50cyBoYXZlIDIgZmllbGRzLCBvbmUgb2YgdGhl
bSBiZWluZyB0aGVpciBpZGVudGlmaWVyLCB3aGljaCBpcwpJbmRleGVkIGFuZCBOb3QgVG9rZW5p
emVkIChhbmQgc3RvcmVkKS4KCj5MdWNlbmUgZG9jIElEcyBhcmUganVzdCBtb25vdG9uaWNhbGx5
IGluY3JlbWVudGVkIGludGVnZXJzLgo+U28sIGhvdyBkbyB5b3UgaWRlbnRpZnkgaWRlbnRpY2Fs
IGRvY3VtZW50cz8gSXMgdGhlcmUgc29tZQo+ZmllbGQgaW4geW91ciBkb2N1bWVudCB0aGF0J3Mg
Z3VhcmFudGVlZCB0byBiZSB1bmlxdWUgdG8gZWFjaAo+ZG9jdW1lbnQ/IElmIHNvLCAqdGhhdCdz
KiB0aGUgZmllbGQgeW91IGNhbiB1c2UgZm9yIHRlcm1FbnUKPnRvIGdldCB0aGUgTHVjZW5lIGRv
Y2lkIHRvIHJlbW92ZSwgYXNzdW1pbmcgeW91J3ZlIGluZGV4ZWQKPml0IFVOX1RPS0VOSVpFRCBv
ciB5b3UgYXJlIHZlcnksIHZlcnksIHZlcnkgY29uZmlkZW50IHRoYXQKPnlvdXIgdG9rZW5pemVy
cyB3b24ndCBicmVhayBpdCB1cC4KPkJ1dCB5b3UgY2FuIG1ha2UgdGhpcyBlYXNpZXIgYnkgdXNp
bmcgSW5kZXhSZWFkZXIuZGVsZXRlRG9jdW1lbnQodGVybSkKPndoZXJlIHRoZSB0ZXJtIGlzIHlv
dXIgdW5pcXVlIGZpZWxkLgoKU2luY2UgSSBoYXZlIGFuIHVuaXF1ZSBmaWVsZCBmb3IgZWFjaCBk
b2N1bWVudCwgSSdsbCB1c2UgdGhhdCB0aGVuLiBIb3dldmVyLAp3aGF0J3MgdGhlIHRoaW5raW5n
IGJlaGluZCB0aGUgZW51bS9kZWxldGU/IFRoZSB0ZXJtRW51bSBsaXN0cyBtZSB0aGUgdGVybXMK
d2hpY2ggaGF2ZSBhIHBhcnRpY3VsYXIgZmllbGQgdmFsdWUgYW5kIGdpdmVzIG1lIHRoZWlyICJs
dWNlbmUgSUQiIHNvIHRoYXQKdGhlIFJlYWRlciBjYW4gdGhlbiBkZWxldGUgaXQ/Cgo+QWRkaXRp
b25hbGx5LCBJIHF1ZXN0aW9uIHdoeSB5b3UgYm90aGVyIHdpdGggYSBSQU1kaXIgZm9yIHlvdXIg
Y2hhbmdlcy4KPkFuIGluZGV4IHJlYWRlciBlc3NlbnRpYWxseSB0YWtlcyBhIHNuYXBzaG90IG9m
IHlvdXIgaW5kZXgsIGFuZAo+c3Vic2VxdWVudCBjaGFuZ2VzIGFyZSBub3Qgc2VlbiBieSB5b3Vy
IHNlYXJjaGVycyB1bnRpbCB5b3UKPmNsb3NlIGFuZCByZW9wZW4gdGhlIHVuZGVybHlpbmcgcmVh
ZGVyLiBXaGF0IGFkdmFudGFnZSBkbyB5b3UKPnNlZSBpbiB1c2luZyBhIFJBTWRpcj8KCkkgdXNl
IGEgUkFNZGlyIGJlY2F1c2UgaXQgaXMgc29tZWhvdyBmYXN0ZXIuIEknbSBkb3dubG9hZGluZyBh
IGZldyB0aG91c2FuZApkb2N1bWVudHMgYXQgYSB0aW1lIGZyb20gdGhlIGludGVybmV0IGFuZCB0
aGVuIGluZGV4aW5nIHRoZW0gaW4gYSBSQU0gaW5kZXgKYW5kIHRoZW4gbWVyZ2luZyB0aGVtIHRv
IHRoZSBGUyBkaXIuIEFsc28sIGluIGNhc2UgYW55dGhpbmcgZmFpbHMsIG15IEZTCmRpcmVjdG9y
eSwgYW5kIHRodXMgbXkgInN0YWJsZSIgaW5kZXgsIGlzIHNhZmUgZnJvbSBoYXJtIDopIEJ1dCB3
aHkgZGlkIHlvdQphc2s/IEFkdmljZSBpcyB3ZWxjb21lIDopCgpUaGFua3MsCgpKb8OjbyBSb2Ry
aWd1ZXMK
------=_Part_5397_3360848.1209520280028--

From java-user-return-33831-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 30 03:54:47 2008
Return-Path: <java-user-return-33831-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47965 invoked from network); 30 Apr 2008 03:54:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Apr 2008 03:54:47 -0000
Received: (qmail 78261 invoked by uid 500); 30 Apr 2008 03:54:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78230 invoked by uid 500); 30 Apr 2008 03:54:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78219 invoked by uid 99); 30 Apr 2008 03:54:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Apr 2008 20:54:41 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Apr 2008 03:53:46 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Jr3OR-0000pr-DE
	for java-user@lucene.apache.org; Tue, 29 Apr 2008 20:54:07 -0700
Message-ID: <16974808.post@talk.nabble.com>
Date: Tue, 29 Apr 2008 20:54:07 -0700 (PDT)
From: Sebastin <sebasmtech@gmail.com>
To: java-user@lucene.apache.org
Subject: Does Lucene Supports Billions of data
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sebasmtech@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi All,
Does Lucene supports Billions of data in a single index store of size 14 GB
for every search.I have 3 Index Store of size 14 GB per index i need to
search these index store and retreive the result.it throws out of memory
problem while searching this index stores.
-- 
View this message in context: http://www.nabble.com/Does-Lucene-Supports-Billions-of-data-tp16974808p16974808.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33832-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 30 04:42:07 2008
Return-Path: <java-user-return-33832-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62631 invoked from network); 30 Apr 2008 04:42:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Apr 2008 04:42:07 -0000
Received: (qmail 6260 invoked by uid 500); 30 Apr 2008 04:42:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6226 invoked by uid 500); 30 Apr 2008 04:42:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6214 invoked by uid 99); 30 Apr 2008 04:42:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Apr 2008 21:42:01 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mzhasan@gmail.com designates 209.85.146.182 as permitted sender)
Received: from [209.85.146.182] (HELO wa-out-1112.google.com) (209.85.146.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Apr 2008 04:41:17 +0000
Received: by wa-out-1112.google.com with SMTP id l24so359057waf.11
        for <java-user@lucene.apache.org>; Tue, 29 Apr 2008 21:41:31 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=kr+yOg2cnISDHmPYUq+eIF9KlB54FThKTNMalrOWKrc=;
        b=CbSluFuVe6s8djRBB00QGjJQ1Nr9Su8OsAob8ZpC/1IGryUklcNYrMiqmGlbNCpud/f2PhPCQTyDGqNXulPRZTSk3QM9CVrvD9HQwAWGBcWiNMAkDrZzmb3GBAwPOvn/L08jtKvu2ZorsKRICq59zsBXuTreom4Vnw3O5bOzSP0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=PvvbMutWo8lHsVkXAoN9OjkGkPnYq0F06ktZtlwCm4O08A9qmRXx7n/+Bzmn2mGxquADrCVCgZkVrUk82FREoXJhd5me55UkU37WZt58TOK1NmsHKDny8IbZjEoSnkSF34E/TNNJVs6x7FhACDmxPCEtD00wVuTvzyv3Y4H7hIQ=
Received: by 10.115.73.20 with SMTP id a20mr240591wal.142.1209530491056;
        Tue, 29 Apr 2008 21:41:31 -0700 (PDT)
Received: by 10.114.135.8 with HTTP; Tue, 29 Apr 2008 21:41:31 -0700 (PDT)
Message-ID: <b0aae42b0804292141i421db14y2f790b7117c70a3d@mail.gmail.com>
Date: Wed, 30 Apr 2008 10:41:31 +0600
From: "Mohammad Hasan" <mzhasan@gmail.com>
To: java-user@lucene.apache.org
Subject: Please help with Gradient Formatter
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5557_2399743.1209530491051"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5557_2399743.1209530491051
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Dear all,



I need a working example of Gradient Formatter. I want to highlight a
searched word after it is found in the database. I am using NHibernate
Search & Lucene. But I am an entrly level programmer, so I do not know how
to use Gradient Formatter. There are plenty of examples of HTML Formatter
but no example for Gradient Formatter. Gradient Formatter asks for 5
arguments, that is where I run into troubles. I do not understand these 5
arguments. Instead of giving explanation, please post a working example of
Gradient Formatter of Highlighter which will highlight a searched word after
it is found in a database. Thanks.

Hasan

------=_Part_5557_2399743.1209530491051--

From java-user-return-33833-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 30 04:43:14 2008
Return-Path: <java-user-return-33833-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63049 invoked from network); 30 Apr 2008 04:43:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Apr 2008 04:43:14 -0000
Received: (qmail 8704 invoked by uid 500); 30 Apr 2008 04:43:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8629 invoked by uid 500); 30 Apr 2008 04:43:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8597 invoked by uid 99); 30 Apr 2008 04:43:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Apr 2008 21:43:03 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.49.248] (HELO web52001.mail.re2.yahoo.com) (206.190.49.248)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 30 Apr 2008 04:42:09 +0000
Received: (qmail 16188 invoked by uid 60001); 30 Apr 2008 04:42:29 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=QPL2om5rMHprYvZxuG5LPs5Psn4/U6QevzlL1AInEA2ZNXTfx9tNGoXwxalK6HdmpPXLTdx74y3jAlSASeniCcYJUZv6ueVdD3i/a0CUV1sZb+i3A2+yLzLxuQUaHbqpMtsf2v9gUR77ZBhPF/UIQlexgnpNergm8i2FlyLWMhI=;
X-YMail-OSG: EEZgJmAVM1mAxijxNsv19PqZh4iiEhkXYJ0nabYoj0HS79zCr4lkQZyLecSBqBy63pgqYsDP76le6vnbeGZCv3l6dn0d52KP26ogNKQVn39atFLT5nRmyfX8gSM-
Received: from [12.162.3.126] by web52001.mail.re2.yahoo.com via HTTP; Tue, 29 Apr 2008 21:42:29 PDT
Date: Tue, 29 Apr 2008 21:42:29 -0700 (PDT)
From: Rajesh parab <rajesh_parab_1@yahoo.com>
Subject: Re: ParalleReader and synchronization between indexes
To: java-user@lucene.apache.org
In-Reply-To: <195356.96600.qm@web52009.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
Message-ID: <892313.15685.qm@web52001.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi All,

Any suggestions/comments on my questions in this
thread will be really helpful.

We are planning to use Lucene indexes throughout the
application and exploring possibilites of partitioning
data between multiple indexes.

Regards,
Rajesh

--- Rajesh parab <rajesh_parab_1@yahoo.com> wrote:

> Hi,
> 
> This is from javadoc of ParallelReader:
> 
>
======================================================
> 
> An IndexReader which reads multiple, parallel
> indexes.
> Each index added must have the same number of
> documents, but typically each contains different
> fields. Each document contains the union of the
> fields
> of all documents with the same document number. When
> searching, matches for a query term are from the
> first
> index added that has the field. 
> 
> This is useful, e.g., with collections that have
> large
> fields which change rarely and small fields that
> change more frequently. The smaller fields may be
> re-indexed in a new index and both indexes may be
> searched together.
> 
>
======================================================
> 
> I have a similar use case as mentioned above and
> hence
> would like to use ParallelReader to search across
> multiple indexes.
> 
> I have an object that has 50 fields. Out of these 50
> fields, 45 are relatively static and other 5 are
> modified very often. So, I am planning to partition
> this objects data into 2 indexes such that 45 static
> fields will be part of one index and remaining 5
> dynamic fields will constitute second index. While
> generating the index for the first time, I can make
> sure that the document order for documents inside
> both
> these indexes is same and hence ParallelReader will
> work properly with it.
> 
> The question is -
> What if the data inside second (smaller) index
> changes? In order to update index document, I will
> have to delete it and re-insert it again as Lucene
> does not support document update. This action (of
> delete and re-insert) will change internal document
> id
> for updated document inside second index and in
> order
> to sync it with first index, I will have to also
> modify first (relatively big and static) index. If
> we
> will have to update both the indexes, how it is
> different from having a single index with all the
> fields? What is the use case in which ParallelReader
> will get used? As per documentation, I was thinking
> that it will apply for my use case, but
> synchronizing
> the indexes seems to be a problem.
> 
> Please help.
> 
> Regards,
> Rajesh
> 
> 
> 
>      
>
____________________________________________________________________________________
> Be a better friend, newshound, and 
> know-it-all with Yahoo! Mobile.  Try it now. 
>
http://mobile.yahoo.com/;_ylt=Ahu06i62sR8HDtDypao8Wcj9tAcJ
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 



      ____________________________________________________________________________________
Be a better friend, newshound, and 
know-it-all with Yahoo! Mobile.  Try it now.  http://mobile.yahoo.com/;_ylt=Ahu06i62sR8HDtDypao8Wcj9tAcJ

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33834-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 30 07:22:32 2008
Return-Path: <java-user-return-33834-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43841 invoked from network); 30 Apr 2008 07:22:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Apr 2008 07:22:31 -0000
Received: (qmail 56464 invoked by uid 500); 30 Apr 2008 07:22:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56430 invoked by uid 500); 30 Apr 2008 07:22:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56419 invoked by uid 99); 30 Apr 2008 07:22:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Apr 2008 00:22:24 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Apr 2008 07:21:31 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Jr6dU-0005tc-9C
	for java-user@lucene.apache.org; Wed, 30 Apr 2008 00:21:52 -0700
Message-ID: <16977096.post@talk.nabble.com>
Date: Wed, 30 Apr 2008 00:21:52 -0700 (PDT)
From: esra <esraersan@gmail.com>
To: java-user@lucene.apache.org
Subject: lucene farsi problem
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: esraersan@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


hi,

i am using lucene's "IndexSearcher" to search the given xml by keyword whic=
h
contains farsi information.
while searching i use ranges like=20

=D8=A2-=D8=AB  |  =D8=AC-=D8=AE  |  =D8=AF-=DA=98  |  =D8=B3-=D8=B8  |  =D8=
=B9-=D9=82  |  =DA=A9-=D9=84  |  =D9=85-=DB=8C

when i do search for  "=D8=AF-=DA=98"  range the results are wrong , they a=
re the
results of  " =D8=B3-=D8=B8 "range.

for example when i do search for "=D8=AF-=DA=98"  one of the the results is=
 "=D8=B3=D8=A7=D8=A8 =D9=88=D9=88=D9=81=D8=B1"
, this result also shown on the " =D8=B3-=D8=B8 " range's result list which=
 is the
corret range.=20

As IndexSearcher use "compareTo" method and this method uses unicodes for
comparing, i found the unicodes of the characters.

=D8=AF=3DU+62F=20
=DA=98 =3D U+698=20
and the first letter of "=D8=B3=D8=A7=D8=A8 =D9=88=D9=88=D9=81=D8=B1 " is  =
=D8=B3 =3D U+633

Do you have any idea how to solve this problem, there are analyzers for
different languages ,
will this be usefull if so do you know where to find a farsi analyzer?

I would bu glad if you help.

thanks ,

Esra

--=20
View this message in context: http://www.nabble.com/lucene-farsi-problem-tp=
16977096p16977096.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33835-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 30 07:42:19 2008
Return-Path: <java-user-return-33835-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87695 invoked from network); 30 Apr 2008 07:42:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Apr 2008 07:42:19 -0000
Received: (qmail 76887 invoked by uid 500); 30 Apr 2008 07:42:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76859 invoked by uid 500); 30 Apr 2008 07:42:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76848 invoked by uid 99); 30 Apr 2008 07:42:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Apr 2008 00:42:14 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of john.wang@gmail.com designates 72.14.220.153 as permitted sender)
Received: from [72.14.220.153] (HELO fg-out-1718.google.com) (72.14.220.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Apr 2008 07:41:26 +0000
Received: by fg-out-1718.google.com with SMTP id 13so140108fge.27
        for <java-user@lucene.apache.org>; Wed, 30 Apr 2008 00:41:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=f24jZFp+c857OTxSsXCqRxL5YCjaQOAcmZcFaWFTFQM=;
        b=Dujiz7IfUNGSUC01bObGNDiojfUt6qyfD6AE474fdF9hm1YIwSUldPTi+LTuNQlaevAKg23Bd6TZOTwmY4zMF80xp/pafjjZxqVCJ6P15yGorLJbM32pkMtlYvVbU4ehAT8B49cHNKRR/O4CCs0m40b10jLVMGwmJxSu6AbvIHU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=vNjHfT3Hr3nNhehWLkT8JqTO8c4JnZhlLebBL2QxdG+frMPnu1r3rTyEz6cquMx+bLHAL9QWEkkAAoX7kwlpRwtEZ8zkbc9FF2LmFz2fTMupq+JUDT+gaU6kniea6c5AlAtn66l9yZzhSlDFvoYQC+JnRDxh71z+KJrZWkHfM9w=
Received: by 10.82.189.6 with SMTP id m6mr31572buf.4.1209541298759;
        Wed, 30 Apr 2008 00:41:38 -0700 (PDT)
Received: by 10.82.134.7 with HTTP; Wed, 30 Apr 2008 00:41:38 -0700 (PDT)
Message-ID: <8837fb770804300041v29e180ffq93d39af0f672a348@mail.gmail.com>
Date: Wed, 30 Apr 2008 15:41:38 +0800
From: "John Wang" <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Does Lucene Supports Billions of data
In-Reply-To: <16974808.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_737_18847987.1209541298752"
References: <16974808.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_737_18847987.1209541298752
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

lucene docids are represented in a java int, so max signed int would be the
limit, a little over 2 billion.

-John

On Wed, Apr 30, 2008 at 11:54 AM, Sebastin <sebasmtech@gmail.com> wrote:

>
> Hi All,
> Does Lucene supports Billions of data in a single index store of size 14
> GB
> for every search.I have 3 Index Store of size 14 GB per index i need to
> search these index store and retreive the result.it throws out of memory
> problem while searching this index stores.
> --
> View this message in context:
> http://www.nabble.com/Does-Lucene-Supports-Billions-of-data-tp16974808p16974808.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_737_18847987.1209541298752--

From java-user-return-33836-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 30 10:04:07 2008
Return-Path: <java-user-return-33836-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86323 invoked from network); 30 Apr 2008 10:04:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Apr 2008 10:04:07 -0000
Received: (qmail 34556 invoked by uid 500); 30 Apr 2008 10:03:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34413 invoked by uid 500); 30 Apr 2008 10:03:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34233 invoked by uid 99); 30 Apr 2008 10:03:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Apr 2008 03:03:27 -0700
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=EXTRA_MPART_TYPE,HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [136.173.62.228] (HELO SMTP15.europarl.europa.eu) (136.173.62.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Apr 2008 10:02:42 +0000
Received: from EMAILLUXSV33.ep.parl.union.eu (unverified) by SMTP15.europarl.europa.eu
 (European Parliament) with ESMTP id <T86ab9f69d088ad3ee41558@SMTP15.europarl.europa.eu> for <java-user@lucene.apache.org>;
 Wed, 30 Apr 2008 12:02:48 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/related;
	type="multipart/alternative";
	boundary="----_=_NextPart_001_01C8AAA9.59FD774F"
Subject: Exact string
Date: Wed, 30 Apr 2008 12:02:51 +0200
Message-ID: <E2BB1A5AB9C4BD409420F3C9E9A6914416E013@EMAILLUXSV33.ep.parl.union.eu>
X-MS-Has-Attach: yes
X-MS-TNEF-Correlator: 
Thread-Topic: Exact string
Thread-Index: AciqqVnBuchH1AWAS+ihutakgfhK4Q==
From: "WATHELET Thomas" <thomas.wathelet@europarl.europa.eu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C8AAA9.59FD774F
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_002_01C8AAA9.59FD774F"


------_=_NextPart_002_01C8AAA9.59FD774F
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hello,
How can I procced to to find an exact string match in lucene with somes
articles in my search query.
For exemple: if I search for "a ball" I just want results with a ball
and not "the ball" incled in the result?
Is it possible to have a blank stop word list?
I have to set something special to my search query?
I need help...
Thanks in advence.
=20
=20

Thomas WATHELET
Development Team
Tel.: (+352) 4300 24752   =20
E-mail: thomas.wathelet@europarl.europa.eu
<mailto:thomas.wathelet@europarl.europa.eu>=20

=20

=20

------_=_NextPart_002_01C8AAA9.59FD774F
Content-Type: text/html;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META http-equiv=3DContent-Type content=3D"text/html; =
charset=3Dus-ascii">
<META content=3D"MSHTML 6.00.2900.3059" name=3DGENERATOR></HEAD>
<BODY>
<DIV><FONT face=3DArial size=3D2><SPAN=20
class=3D306375709-30042008>Hello,</SPAN></FONT></DIV>
<DIV><FONT face=3DArial size=3D2><SPAN class=3D306375709-30042008>How =
can I procced to=20
to find an exact string match in lucene with somes articles in my search =

query.</SPAN></FONT></DIV>
<DIV><FONT face=3DArial size=3D2><SPAN class=3D306375709-30042008>For =
exemple: if I=20
search for "a ball" I just want results with a ball and not "the ball" =
incled in=20
the result?</SPAN></FONT></DIV>
<DIV><FONT face=3DArial size=3D2><SPAN class=3D306375709-30042008>Is it =
possible to=20
have a blank stop word list?</SPAN></FONT></DIV>
<DIV><FONT face=3DArial size=3D2><SPAN class=3D306375709-30042008>I have =
to set=20
something special to my search query?</SPAN></FONT></DIV>
<DIV><FONT face=3DArial size=3D2><SPAN class=3D306375709-30042008>I need =

help...<BR>Thanks in advence.</SPAN></FONT></DIV>
<DIV>&nbsp;</DIV>
<DIV class=3DSection1>
<DIV align=3Dleft>
<TABLE class=3DMsoNormalTable=20
style=3D"BORDER-RIGHT: medium none; BORDER-TOP: medium none; =
BORDER-LEFT: medium none; BORDER-BOTTOM: medium none; BORDER-COLLAPSE: =
collapse; mso-border-alt: solid silver .5pt; mso-border-top-alt: solid =
windowtext .5pt; mso-yfti-tbllook: 480; mso-table-lspace: 2.25pt; =
mso-table-rspace: 2.25pt; mso-table-anchor-vertical: paragraph; =
mso-table-anchor-horizontal: column; mso-table-left: left; =
mso-padding-alt: 0cm 5.4pt 0cm 5.4pt"=20
cellSpacing=3D0 cellPadding=3D0 align=3Dleft border=3D1>
  <TBODY>
  <TR=20
  style=3D"HEIGHT: 47.95pt; mso-yfti-irow: 0; mso-yfti-firstrow: yes; =
mso-yfti-lastrow: yes">
    <TD=20
    style=3D"BORDER-RIGHT: gray 1pt solid; PADDING-RIGHT: 5.4pt; =
BORDER-TOP: medium none; PADDING-LEFT: 5.4pt; PADDING-BOTTOM: 0cm; =
BORDER-LEFT: medium none; WIDTH: 77.4pt; PADDING-TOP: 0cm; =
BORDER-BOTTOM: medium none; HEIGHT: 47.95pt; mso-border-right-alt: solid =
gray .5pt"=20
    width=3D103><SPAN lang=3DFR style=3D"mso-ansi-language: FR"></SPAN>
      <P class=3DMsoNormal=20
      style=3D"TEXT-ALIGN: right; mso-margin-top-alt: auto; =
mso-margin-bottom-alt: auto; mso-element: frame; =
mso-element-frame-hspace: 2.25pt; mso-element-wrap: around; =
mso-element-anchor-vertical: paragraph; mso-element-anchor-horizontal: =
column; mso-height-rule: exactly"=20
      align=3Dright><SPAN lang=3DFR=20
      style=3D"FONT-SIZE: 4pt; mso-ansi-language: FR"><IMG alt=3D"" =
hspace=3D0=20
      src=3D"cid:306375709@30042008-117E" align=3Dbaseline =
border=3D0></SPAN></P></TD>
    <TD=20
    style=3D"BORDER-RIGHT: medium none; PADDING-RIGHT: 5.4pt; =
BORDER-TOP: medium none; PADDING-LEFT: 5.4pt; PADDING-BOTTOM: 0cm; =
BORDER-LEFT: medium none; WIDTH: 240.7pt; PADDING-TOP: 0cm; =
BORDER-BOTTOM: medium none; HEIGHT: 47.95pt; mso-border-left-alt: solid =
gray .5pt"=20
    vAlign=3Dtop width=3D321>
      <P class=3DMsoNormal=20
      style=3D"mso-margin-top-alt: auto; mso-margin-bottom-alt: auto; =
mso-element: frame; mso-element-frame-hspace: 2.25pt; mso-element-wrap: =
around; mso-element-anchor-vertical: paragraph; =
mso-element-anchor-horizontal: column; mso-height-rule: =
exactly"><B><SPAN=20
      style=3D"FONT-SIZE: 10pt; FONT-FAMILY: Arial; mso-bidi-font-size: =
12.0pt">Thomas=20
      WATHELET</SPAN></B><SPAN=20
      style=3D"FONT-SIZE: 10pt; FONT-FAMILY: Arial"><BR></SPAN><SPAN=20
      style=3D"FONT-SIZE: 10pt; FONT-FAMILY: Arial; mso-bidi-font-size: =
12.0pt; mso-bidi-font-style: italic">Development=20
      Team</SPAN><SPAN lang=3DBG=20
      style=3D"FONT-SIZE: 10pt; FONT-FAMILY: Arial; mso-ansi-language: =
BG; mso-bidi-font-size: 12.0pt; mso-bidi-font-style: =
italic"><BR></SPAN><SPAN=20
      style=3D"FONT-SIZE: 10pt; FONT-FAMILY: Arial; mso-bidi-font-size: =
12.0pt; mso-bidi-font-style: italic">Tel.:=20
      (+352) 4300 24752&nbsp;&nbsp;&nbsp; <BR></SPAN><SPAN=20
      style=3D"FONT-SIZE: 10pt; FONT-FAMILY: Arial; mso-bidi-font-size: =
12.0pt; mso-bidi-font-weight: bold">E-mail:=20
      </SPAN><SPAN lang=3DFR=20
      style=3D"FONT-SIZE: 10pt; COLOR: green; FONT-FAMILY: Arial; =
mso-ansi-language: FR; mso-bidi-font-size: 12.0pt; mso-bidi-font-weight: =
bold"><A=20
      title=3Dmailto:petri.lavander@europarl.europa.eu=20
      href=3D"mailto:thomas.wathelet@europarl.europa.eu"><SPAN =
lang=3DEN-GB=20
      style=3D"mso-ansi-language: =
EN-GB">thomas.wathelet@europarl.europa.eu</SPAN></A></SPAN><SPAN=20
      style=3D"FONT-SIZE: 10pt; FONT-FAMILY: Arial; mso-bidi-font-size: =
12.0pt; mso-bidi-font-style: italic"><?xml:namespace=20
      prefix =3D o ns =3D "urn:schemas-microsoft-com:office:office"=20
      /><o:p></o:p></SPAN></P></TD></TR></TBODY></TABLE></DIV>
<P class=3DMsoNormal><o:p>&nbsp;</o:p></P></DIV>
<DIV>&nbsp;</DIV></BODY></HTML>

------_=_NextPart_002_01C8AAA9.59FD774F--

------_=_NextPart_001_01C8AAA9.59FD774F
Content-Type: image/bmp;
	name="ittrad.bmp"
Content-Transfer-Encoding: base64
Content-ID: <306375709@30042008-117E>
Content-Description: ittrad.bmp
Content-Location: ittrad.bmp

Qk32IQAAAAAAADYAAAAoAAAAKAAAAEgAAAABABgAAAAAAMAhAADEDgAAxA4AAAAAAAAAAAAA////
////////mZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZ
mZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZ////////
////////mZmZmZmZaKSKI7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1
I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1aKSK
mZmZmZmZ////////mZmZI7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1
I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1
I7R1I7R1I7R1mZmZ////mZmZaKSKI7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1
I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1
I7R1I7R1I7R1I7R1I7R1aKSKmZmZmZmZI7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1
I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1
I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1mZmZmZmZTMKPyOzcyOzcyOzckdm6P72GI7R1I7R1hNWy
yOzcyOzcyOzcdtCpI7R1I7R1I7R1nt7Cnt7CI7R1I7R1nt7Cnt7CI7R1aMygyOzcaMygyOzcMbl+
I7R1aMygyOzcMbl+yOzcyOzcyOzcnt7CWseYI7R1mZmZmZmZWseY////hNWyWseYyOzc8fr2Mbl+
nt7C8fr2dtCpWseY1vHlyOzcI7R1I7R1I7R1yOzcyOzcI7R1I7R1yOzcyOzcI7R1yOzcuufUMbl+
////rOPLkdm61vHl1vHlI7R1////rOPLWseYnt7C////WseYmZmZmZmZWseY////WseYI7R1Mbl+
////hNWy////kdm6I7R1nt7C8fr2yOzcI7R1I7R1I7R1yOzcyOzcI7R1I7R1yOzc8fr21vHl////
WseYI7R1uufU4/bukdm6////hNWyI7R1////kdm6I7R1I7R11vHluufUmZmZmZmZWseY////WseY
I7R1Mbl+////hNWy4/bunt7CI7R1TMKPWseYTMKPI7R1I7R1I7R1yOzcyOzcI7R1I7R1yOzc1vHl
WseYuufUyOzcI7R1dtCp8fr2aMyg////P72GI7R1////kdm6I7R1I7R11vHluufUmZmZmZmZWseY
////hNWyWseYuufU8fr2P72GdtCp////kdm6WseYWseYP72GI7R1P72GWseY1vHl1vHlWseYP72G
yOzc1vHlWseYuufU4/buI7R1Mbl+8fr2yOzcuufUI7R1I7R1////rOPLWseYkdm6////aMygmZmZ
mZmZTMKPyOzcyOzcyOzcrOPLP72GI7R1I7R1WseYrOPLyOzcyOzcWseYI7R1dtCpyOzcyOzcyOzc
yOzcdtCpnt7CyOzcyOzcrOPLTMKPI7R1I7R1kdm6yOzcaMygI7R1I7R1yOzcyOzcyOzcuufUWseY
I7R1mZmZmZmZI7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1
I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1
I7R1I7R1I7R1mZmZmZmZI7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1
I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1
I7R1I7R1I7R1I7R1I7R1mZmZmZmZI7R1I7R1P72GWseYWseYWseYTMKPI7R1I7R1I7R1I7R1I7R1
I7R1I7R1TMKPWseYWseYWseYP72GI7R1I7R1I7R1I7R1I7R1I7R1I7R1HL6WF8WvFce3Fce3Fce3
Fce3F8WvHruOI7R1I7R1I7R1I7R1mZmZmZmZI7R1I7R1kdm6////////////yOzcI7R1I7R1I7R1
I7R1I7R1I7R1I7R1yOzc////////////kdm6I7R1I7R1I7R1I7R1I7R1I7R1CdnyB9v6B9v6B9v6
B9v6B9v6B9v6B9v6B9v6C9bpHL6WI7R1I7R1mZmZmZmZI7R1I7R1kdm6////////////yOzcI7R1
I7R1I7R1I7R1I7R1I7R1I7R1yOzc////////////kdm6I7R1I7R1I7R1I7R1I7R1I7R1DNThB9v6
B9v6B9v6B9v6B9v6B9v6B9v6B9v6B9v6B9v6GsCfI7R1mZmZmZmZI7R1I7R1kdm6////////////
yOzcI7R1I7R1I7R1I7R1I7R1I7R1I7R1yOzc////////////kdm6I7R1I7R1I7R1I7R1I7R1I7R1
F8WvDNThFce3HL6WHL6WHL6WGsCfDNThB9v6B9v6B9v6C9bpI7R1mZmZmZmZI7R1I7R1kdm6////
////////yOzcI7R1I7R1I7R1I7R1I7R1I7R1I7R1yOzc////////////kdm6I7R1I7R1I7R1I7R1
I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1HL6WB9v6B9v6B9v6B9v6I7R1mZmZmZmZI7R1I7R1
kdm6////////////yOzcI7R1I7R1I7R1I7R1I7R1I7R1I7R1yOzc////////////kdm6I7R1I7R1
I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1HL6WDNThB9v6B9v6B9v6B9v6I7R1mZmZmZmZ
I7R1I7R1kdm6////////////yOzcI7R1I7R1I7R1I7R1I7R1I7R1I7R1yOzc////////////kdm6
I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1HL6WEszIC9bpB9v6B9v6B9v6B9v6B9v6E8rAI7R1
mZmZmZmZI7R1I7R1kdm6////////////yOzcI7R1I7R1I7R1I7R1I7R1I7R1I7R1yOzc////////
////kdm6I7R1I7R1I7R1I7R1I7R1I7R1I7R1HruODNThB9v6B9v6B9v6B9v6B9v6B9v6B9v6EszI
IbZ9I7R1mZmZmZmZI7R1I7R1kdm6////////////yOzcI7R1I7R1I7R1I7R1I7R1I7R1I7R1yOzc
////////////kdm6I7R1I7R1I7R1I7R1I7R1I7R1HruOB9v6B9v6B9v6B9v6B9v6B9v6CdnyEszI
HL6WI7R1I7R1I7R1mZmZmZmZI7R1I7R1kdm6////////////yOzcI7R1I7R1I7R1I7R1I7R1I7R1
I7R1yOzc////////////kdm6I7R1I7R1I7R1I7R1I7R1I7R1EM/QB9v6B9v6B9v6B9v6EszIGsCf
I7R1I7R1I7R1I7R1I7R1I7R1mZmZmZmZI7R1I7R1kdm6////////////yOzcI7R1I7R1I7R1I7R1
I7R1I7R1I7R1yOzc////////////kdm6I7R1I7R1I7R1I7R1I7R1I7R1DtHZB9v6B9v6B9v6Fce3
I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1mZmZmZmZI7R1I7R1kdm6////////////yOzcI7R1I7R1
WseYWseYWseYWseYWseY1vHl////////////rOPLWseYWseYWseYWseYTMKPI7R1EM/QB9v6B9v6
B9v6DNThGsCfIbZ9H7mGHL6WFce3Fce3I7R1I7R1mZmZmZmZI7R1I7R1kdm6////////////yOzc
I7R1I7R1////////////////////////////////////////////////////////yOzcI7R1HruO
CdnyB9v6B9v6B9v6B9v6B9v6B9v6B9v6B9v6CdnyIbZ9I7R1mZmZmZmZI7R1I7R1kdm6////////
////yOzcI7R1I7R1////////////////////////////////////////////////////////yOzc
I7R1I7R1HruODtHZB9v6B9v6B9v6B9v6B9v6B9v6B9v6B9v6GMOnI7R1mZmZmZmZI7R1I7R1P72G
WseYWseYWseYTMKPI7R1I7R1WseYWseYWseYWseYWseYWseYWseYWseYWseYWseYWseYWseYWseY
WseYTMKPI7R1I7R1I7R1I7R1HruOF8WvFce3Fce3Fce3Fce3F8WvHruOI7R1I7R1mZmZmZmZI7R1
I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1
I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1mZmZ
mZmZI7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1
I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1
I7R1mZmZmZmZI7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1
I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1I7R1
I7R1I7R1I7R1mZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZ
mZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZ
mZmZmZmZmZmZmZmZmZmZmZmZmZmZ////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////mZmZmZmZ////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////mZmZmZmZ////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////mZmZmZmZ////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////mZmZmZmZ////////////////
/////////////////////////////////////f39////////////////////////////////////
////////////////////////////////////////////////////////////mZmZmZmZ////////
////////////////////////////////////2dnZtbW17+/v+vr6////////////////////////
////////////////////////////////////////////////////////////////////mZmZmZmZ
////////////////////////////////////////zs7OPT09ERERbGxs+vr6+Pj4////////////
////9fv5ite1WseYyu3e////////////////////////////////////////////////////////
mZmZmZmZ////////////////////////////////////qqqqDAwMAAAAAAAAAAAAaWlp+fn59vb2
////////9fv5ite1JrV3I7R1SMGMyu3e////////////////////////////////////////////
////////mZmZmZmZ////////////////////////////////qKioDQ0NAAAAAAAAAAAAAAAAAAAA
a2tr6+vr+vr68Pr2ide1I7R1I7R1I7R1I7R1SMGMyu3e/P79////////////////////////////
////////////////mZmZmZmZ////////////////////////////39/fHh4eAAAAAAAAAAAAAAAA
AAAAAAAACQkJxsbG/f7+mt3AI7R1I7R1I7R1I7R1I7R1I7R1TsOQ5/fw////////////////////
////////////////////////mZmZmZmZ////////////////////////////ysrKERERAAAAAAAA
AAAAAAAAAAAAAAAAKCgo6urq////nt7CI7R1I7R1I7R1I7R1I7R1I7R1ScGN6ffx+/78////////
////////////////////////////////mZmZmZmZ////////////////////2dnZtbW16enpl5eX
CQkJAAAAAAAAAAAAAAAAGRkZwsnGot/EuOfT9/z6f9OvI7R1I7R1I7R1I7R1Q7+Jz+/hxOvaide1
zu7g////////////////////////////////////mZmZmZmZ////////////////zs7OPT09ERER
bGxs+fn5m5ubBwcHAAAAAAAAGBgYxcnHite1JrV3NbqAtOXQ////gtSxI7R1I7R1RL+K0/Djz+/h
Rb+KI7R1S8KOze7g////////////////////////////////mZmZmZmZ////////////0NDQNzc3
AAAAAAAAAAAAa2tr+Pj4k5OTGhoaLS0tusO/i9i2J7V4I7R1I7R1M7l/s+XP9/z6jdi4Zsufyezd
zO7fRsCLI7R1I7R1I7R1TMKOzu7g////////////////////////////mZmZmZmZ////////z8/P
Ojo6AAAAAAAAAAAAAAAAAAAAbm5u5+fn0NDQ5OTkftOuKrZ5I7R1I7R1I7R1I7R1Mrl+ruPM+f37
6/jzzO7fScGNI7R1I7R1I7R1I7R1I7R1UMOR0/Dj////////////////////////mZmZmZmZ////
////enp6AAAAAAAAAAAAAAAAAAAAAAAADQ0NxsbG////////OLuCI7R1I7R1I7R1I7R1I7R1I7R1
acyh/P79////ruPMKLZ4I7R1I7R1I7R1I7R1I7R1K7d6werY////////////////////////mZmZ
mZmZ////////ra2tDw8PAAAAAAAAAAAAAAAAAAAAVlZW39/f1tbW8vLyl9y+Lbh7I7R1I7R1I7R1
I7R1Pr2GvunWrK2tioqK3ufjedCqJbV2I7R1I7R1I7R1JrV3j9m54fXsoN/D0e/i////////////
////mZmZmZmZ////////+fn5oaGhERERAAAAAAAAAAAAWlpa5OTkfX19GBgYXl5e4OXjot/FLbh7
I7R1I7R1PL2FvenWjI2NCAgIAQEBQUFB6/Pvds6oJrV3I7R1JrV3j9m54/XtY8qdJ7V3Lbh7o9/G
////////////mZmZmZmZ////////////+/v7pKSkFhYWAwMDVlZW3d3dfX19BQUFAAAAAgICWlpa
5Oblot/FNLqARb+KvejVi4uLBgYGAAAAAAAAAAAAPz8/7fXye8+rP72Gj9m54PTsYsmcI7R1I7R1
I7R1KrZ5ot/F////////mZmZmZmZ////////////////+vr6tLS0lZWV19fXd3d3AQEBAAAAAAAA
AAAAAAAAWlpa5ejnzO7f1vDkj4+PBwcHAAAAAAAAAAAAAAAAAAAAbm5u4unm3fHo4/XtYMmbI7R1
I7R1I7R1I7R1I7R1KrZ5yu3e/P79mZmZmZmZ////////////////////////////qqqqBwcHAAAA
AAAAAAAAAAAAAAAAAAAApaWl////8fHxKCgoAAAAAAAAAAAAAAAAAAAAAAAADQ0NxsbG////0fDi
JrV3I7R1I7R1I7R1I7R1I7R1I7R1TsOQ5/fwmZmZmZmZ////////////////////////////u7u7
Hh4eAAAAAAAAAAAAAAAAAAAAJiYmy8vL6enp8PDwa2trAQEBAAAAAAAAAAAAAAAAAAAAVlZW1OTd
1fHk9fv5WMaWI7R1I7R1I7R1I7R1I7R1I7R1ScGN6/jzmZmZmZmZ////////////////////////
////////n5+fFhYWAAAAAAAAAAAAIiIixsbGu7u7S0tLdXV16+vrYmJiAQEBAAAAAAAAAAAAKSkp
zuXbYsmcQ7+JruPM8vv3SsGNI7R1I7R1I7R1I7R1Pb2F1/Hm+v38mZmZmZmZ////////////////
////////////////////oqKiGRkZAAAAIyMjxMTExcXFICAgAAAAAAAAampq9vb2YmJiAQEBAAAA
KCgoxtzTWceXI7R1I7R1L7h9rOLL+v38TcKPI7R1I7R1Pr2G2/Lo/P79////mZmZmZmZ////////
////////////////////////////////qqqqampqwcHBwsLCIyMjAAAAAAAAAAAAAAAAa2tr5+fn
d3d3WFhYwNfNXsiaI7R1I7R1I7R1I7R1L7h9q+LL8Pr2bs6kXsia1/Hm/f7+////////mZmZmZmZ
////////////////////////////////////////////////5+fnKSkpAAAAAAAAAAAAAAAAAAAA
AAAAg4OD////////f9OvI7R1I7R1I7R1I7R1I7R1I7R1ObuD2fLn+/788vv3/v/+////////////
mZmZmZmZ////////////////////////////////////////////////19fXFxcXAAAAAAAAAAAA
AAAAAAAAAQEBi4uL////////q+LLLrh8I7R1I7R1I7R1I7R1I7R1W8eY5vbv////////////////
////////mZmZmZmZ////////////////////////////////////////////////+vr6oqKiExMT
AAAAAAAAAAAAAgICd3d37u7u////////+v38o+DFLrh8I7R1I7R1I7R1VcWU2fLn////////////
////////////////mZmZmZmZ////////////////////////////////////////////////////
/f39oaGhFhYWAAAAAgICd3d38/Pz////////////////+/78o+DFLrh8I7R1VcWU2/Lo////////
////////////////////////mZmZmZmZ////////////////////////////////////////////
////////////+/v7n5+fMjIyd3d39PT0////////////////////////+/78rePMide12/Lo////
////////////////////////////////mZmZmZmZ////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////mZmZmZmZ////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////mZmZmZmZ////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////mZmZmZmZ////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////mZmZmZmZ////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////mZmZ
mZmZ////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////mZmZmZmZw8PD////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////w8PDmZmZ////mZmZ////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////mZmZ////////mZmZmZmZw8PD////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////w8PDmZmZmZmZ////////////////mZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZ
mZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZ
mZmZmZmZmZmZmZmZmZmZmZmZmZmZ////////////

------_=_NextPart_001_01C8AAA9.59FD774F--

From java-user-return-33837-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 30 12:00:20 2008
Return-Path: <java-user-return-33837-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56234 invoked from network); 30 Apr 2008 12:00:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Apr 2008 12:00:19 -0000
Received: (qmail 58783 invoked by uid 500); 30 Apr 2008 12:00:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58751 invoked by uid 500); 30 Apr 2008 12:00:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58737 invoked by uid 99); 30 Apr 2008 12:00:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Apr 2008 05:00:12 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.5] (HELO spunkymail-a6.g.dreamhost.com) (208.97.132.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Apr 2008 11:59:18 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a6.g.dreamhost.com (Postfix) with ESMTP id 09EAF109F38
	for <java-user@lucene.apache.org>; Wed, 30 Apr 2008 04:59:14 -0700 (PDT)
Message-Id: <08DF1421-37F0-4124-BCE3-DCD68EEC189A@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <16977096.post@talk.nabble.com>
Content-Type: text/plain; charset=UTF-8; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: lucene farsi problem
Date: Wed, 30 Apr 2008 07:59:11 -0400
References: <16977096.post@talk.nabble.com>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org

What Analyzer are you using?  You might try looking in Luke to see =20
what is in your index, etc.  It also isn't clear to me what your =20
documents look like.

As for a Farsi analyzer, I would Google "Farsi analyzer Lucene" and =20
see if you can find anything.  Otherwise, you will have to write your =20=

own (and donate it????)

-Grant

On Apr 30, 2008, at 3:21 AM, esra wrote:

>
> hi,
>
> i am using lucene's "IndexSearcher" to search the given xml by =20
> keyword which
> contains farsi information.
> while searching i use ranges like
>
> =D8=A2-=D8=AB  |  =D8=AC-=D8=AE  |  =D8=AF-=DA=98  |  =D8=B3-=D8=B8  | =
 =D8=B9-=D9=82  |  =DA=A9-=D9=84  |  =D9=85-=DB=8C
>
> when i do search for  "=D8=AF-=DA=98"  range the results are wrong , =
they are =20
> the
> results of  " =D8=B3-=D8=B8 "range.
>
> for example when i do search for "=D8=AF-=DA=98"  one of the the =
results is =20
> "=D8=B3=D8=A7=D8=A8 =D9=88=D9=88=D9=81=D8=B1"
> , this result also shown on the " =D8=B3-=D8=B8 " range's result list =
which =20
> is the
> corret range.
>
> As IndexSearcher use "compareTo" method and this method uses =20
> unicodes for
> comparing, i found the unicodes of the characters.
>
> =D8=AF=3DU+62F
> =DA=98 =3D U+698
> and the first letter of "=D8=B3=D8=A7=D8=A8 =D9=88=D9=88=D9=81=D8=B1 " =
is  =D8=B3 =3D U+633
>
> Do you have any idea how to solve this problem, there are analyzers =20=

> for
> different languages ,
> will this be usefull if so do you know where to find a farsi analyzer?
>
> I would bu glad if you help.
>
> thanks ,
>
> Esra
>
> --=20
> View this message in context: =
http://www.nabble.com/lucene-farsi-problem-tp16977096p16977096.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ







---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33838-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 30 12:03:51 2008
Return-Path: <java-user-return-33838-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57436 invoked from network); 30 Apr 2008 12:03:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Apr 2008 12:03:51 -0000
Received: (qmail 63891 invoked by uid 500); 30 Apr 2008 12:03:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63864 invoked by uid 500); 30 Apr 2008 12:03:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63853 invoked by uid 99); 30 Apr 2008 12:03:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Apr 2008 05:03:46 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.83] (HELO spunkymail-a19.g.dreamhost.com) (208.97.132.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Apr 2008 12:02:52 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a19.g.dreamhost.com (Postfix) with ESMTP id 6F18B11FF7
	for <java-user@lucene.apache.org>; Wed, 30 Apr 2008 05:03:11 -0700 (PDT)
Message-Id: <2A1D58DF-F081-4157-A60D-CC7F17A967B3@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <E2BB1A5AB9C4BD409420F3C9E9A6914416E013@EMAILLUXSV33.ep.parl.union.eu>
Content-Type: multipart/alternative; boundary=Apple-Mail-419--678444840
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: Exact string
Date: Wed, 30 Apr 2008 08:03:09 -0400
References: <E2BB1A5AB9C4BD409420F3C9E9A6914416E013@EMAILLUXSV33.ep.parl.union.eu>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-419--678444840
Content-Type: text/plain;
	charset=US-ASCII;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: 7bit


On Apr 30, 2008, at 6:02 AM, WATHELET Thomas wrote:

> Hello,
> How can I procced to to find an exact string match in lucene with  
> somes articles in my search query.
> For exemple: if I search for "a ball" I just want results with a  
> ball and not "the ball" incled in the result?
> Is it possible to have a blank stop word list?

Yes.  Basically, you should index/query w/o stopwords and then you can  
issue a phrase query for "a ball" without any slop.  You could also  
try ngraming the words, such that you produce tokens like "a_ball",  
"the_ball" etc.  Just make sure your index time analysis matches up w/  
your query time analysis.  There are ngram Analyzers in the Lucene  
contrib/analyzer package.



> I have to set something special to my search query?
> I need help...
> Thanks in advence.
>
> <ittrad.bmp>
>
> Thomas WATHELET
> Development Team
> Tel.: (+352) 4300 24752
> E-mail: thomas.wathelet@europarl.europa.eu
>
>
>
>

--------------------------
Grant Ingersoll

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ







--Apple-Mail-419--678444840--

From java-user-return-33839-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 30 12:07:32 2008
Return-Path: <java-user-return-33839-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58770 invoked from network); 30 Apr 2008 12:07:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Apr 2008 12:07:31 -0000
Received: (qmail 70558 invoked by uid 500); 30 Apr 2008 12:07:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70531 invoked by uid 500); 30 Apr 2008 12:07:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70520 invoked by uid 99); 30 Apr 2008 12:07:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Apr 2008 05:07:25 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Apr 2008 12:06:40 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JrB5J-0006SP-7Y
	for java-user@lucene.apache.org; Wed, 30 Apr 2008 05:06:53 -0700
Message-ID: <16980977.post@talk.nabble.com>
Date: Wed, 30 Apr 2008 05:06:53 -0700 (PDT)
From: esra <esraersan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene farsi problem
In-Reply-To: <08DF1421-37F0-4124-BCE3-DCD68EEC189A@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: esraersan@gmail.com
References: <16977096.post@talk.nabble.com> <08DF1421-37F0-4124-BCE3-DCD68EEC189A@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,
thanks for your reply.
I am using StandartAnalyzer now and my xml document is like below:

<keyword><![CDATA[=D8=B3=D8=A7=D8=A8 =D9=88=D9=88=D9=81=D8=B1]]></keyword>
      <description><![CDATA[=DB=8C=DA=A9 =D9=88=D9=88=D9=81=D8=B1 =DA=A9=D9=
=87 =D8=AF=D8=B1 =D9=85=D8=AD=D9=81=D8=B8=D9=87 =D8=A7=DB=8C =D8=AC=D8=AF=
=D8=A7 =D8=A7=D8=B2 =D8=B3=D8=A7=DB=8C=D8=B1 =D8=AF=D8=B1=D8=A7=DB=8C=D9=88=
=D8=B1 =D9=87=D8=A7
=D9=82=D8=B1=D8=A7=D8=B1 =D8=AF=D8=A7=D8=B1=D8=AF =D8=AA=D8=A7 =D8=B5=D8=AF=
=D8=A7=DB=8C=DB=8C =D8=A8=D8=A7 =D8=A8=D8=A7=D8=B3 =D9=81=D9=88=D9=82 =D8=
=A7=D9=84=D8=B9=D8=A7=D8=AF=D9=87 =D9=BE=D8=A7=DB=8C=DB=8C=D9=86 =D8=AA=D9=
=88=D9=84=DB=8C=D8=AF =DA=A9=D9=86=D8=AF. ]]></description>
   =20
i googled for farsi analyzer and found nothing also i am not sure it if
would solve my problem or not.

Thanks,

Esra


Grant Ingersoll-6 wrote:
>=20
> What Analyzer are you using?  You might try looking in Luke to see =20
> what is in your index, etc.  It also isn't clear to me what your =20
> documents look like.
>=20
> As for a Farsi analyzer, I would Google "Farsi analyzer Lucene" and =20
> see if you can find anything.  Otherwise, you will have to write your =20
> own (and donate it????)
>=20
> -Grant
>=20
> On Apr 30, 2008, at 3:21 AM, esra wrote:
>=20
>>
>> hi,
>>
>> i am using lucene's "IndexSearcher" to search the given xml by =20
>> keyword which
>> contains farsi information.
>> while searching i use ranges like
>>
>> =D8=A2-=D8=AB  |  =D8=AC-=D8=AE  |  =D8=AF-=DA=98  |  =D8=B3-=D8=B8  |  =
=D8=B9-=D9=82  |  =DA=A9-=D9=84  |  =D9=85-=DB=8C
>>
>> when i do search for  "=D8=AF-=DA=98"  range the results are wrong , the=
y are =20
>> the
>> results of  " =D8=B3-=D8=B8 "range.
>>
>> for example when i do search for "=D8=AF-=DA=98"  one of the the results=
 is =20
>> "=D8=B3=D8=A7=D8=A8 =D9=88=D9=88=D9=81=D8=B1"
>> , this result also shown on the " =D8=B3-=D8=B8 " range's result list wh=
ich =20
>> is the
>> corret range.
>>
>> As IndexSearcher use "compareTo" method and this method uses =20
>> unicodes for
>> comparing, i found the unicodes of the characters.
>>
>> =D8=AF=3DU+62F
>> =DA=98 =3D U+698
>> and the first letter of "=D8=B3=D8=A7=D8=A8 =D9=88=D9=88=D9=81=D8=B1 " i=
s  =D8=B3 =3D U+633
>>
>> Do you have any idea how to solve this problem, there are analyzers =20
>> for
>> different languages ,
>> will this be usefull if so do you know where to find a farsi analyzer?
>>
>> I would bu glad if you help.
>>
>> thanks ,
>>
>> Esra
>>
>> --=20
>> View this message in context:
>> http://www.nabble.com/lucene-farsi-problem-tp16977096p16977096.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>=20
> --------------------------
> Grant Ingersoll
>=20
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>=20
>=20
>=20
>=20
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20

--=20
View this message in context: http://www.nabble.com/lucene-farsi-problem-tp=
16977096p16980977.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33840-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 30 12:43:15 2008
Return-Path: <java-user-return-33840-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79073 invoked from network); 30 Apr 2008 12:43:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Apr 2008 12:43:15 -0000
Received: (qmail 17563 invoked by uid 500); 30 Apr 2008 12:43:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17536 invoked by uid 500); 30 Apr 2008 12:43:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17525 invoked by uid 99); 30 Apr 2008 12:43:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Apr 2008 05:43:09 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=MIME_QP_LONG_LINE,SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.74] (HELO spunkymail-a20.g.dreamhost.com) (208.97.132.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Apr 2008 12:42:15 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a20.g.dreamhost.com (Postfix) with ESMTP id 8B329E24EE
	for <java-user@lucene.apache.org>; Wed, 30 Apr 2008 05:42:33 -0700 (PDT)
Message-Id: <1B1FC94C-66E4-4A8D-8C92-38CCCEFDF3E8@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <16980977.post@talk.nabble.com>
Content-Type: text/plain; charset=UTF-8; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: lucene farsi problem
Date: Wed, 30 Apr 2008 08:42:33 -0400
References: <16977096.post@talk.nabble.com> <08DF1421-37F0-4124-BCE3-DCD68EEC189A@apache.org> <16980977.post@talk.nabble.com>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org

I am not sure how Standard Analyzer will perform on Farsi.  The thing =20=

to do now would be to get Luke and have a look at the actual document =20=

that matches and see what it's tokens look like.  You might also try =20
using the explain() method to see why that document matches.

Also, are you sure you are loading the file w/ the proper encodings, =20
etc?

-Grant

On Apr 30, 2008, at 8:06 AM, esra wrote:

>
> Hi,
> thanks for your reply.
> I am using StandartAnalyzer now and my xml document is like below:
>
> <keyword><![CDATA[=D8=B3=D8=A7=D8=A8 =D9=88=D9=88=D9=81=D8=B1]]></keywor=
d>
>      <description><![CDATA[=DB=8C=DA=A9 =D9=88=D9=88=D9=81=D8=B1 =DA=A9=D9=
=87 =D8=AF=D8=B1 =D9=85=D8=AD=D9=81=D8=B8=D9=87 =D8=A7=DB=8C =20
> =D8=AC=D8=AF=D8=A7 =D8=A7=D8=B2 =D8=B3=D8=A7=DB=8C=D8=B1 =D8=AF=D8=B1=D8=
=A7=DB=8C=D9=88=D8=B1 =D9=87=D8=A7
> =D9=82=D8=B1=D8=A7=D8=B1 =D8=AF=D8=A7=D8=B1=D8=AF =D8=AA=D8=A7 =
=D8=B5=D8=AF=D8=A7=DB=8C=DB=8C =D8=A8=D8=A7 =D8=A8=D8=A7=D8=B3 =D9=81=D9=88=
=D9=82 =D8=A7=D9=84=D8=B9=D8=A7=D8=AF=D9=87 =20
> =D9=BE=D8=A7=DB=8C=DB=8C=D9=86 =D8=AA=D9=88=D9=84=DB=8C=D8=AF =DA=A9=D9=86=
=D8=AF. ]]></description>
>
> i googled for farsi analyzer and found nothing also i am not sure it =20=

> if
> would solve my problem or not.
>
> Thanks,
>
> Esra
>
>
> Grant Ingersoll-6 wrote:
>>
>> What Analyzer are you using?  You might try looking in Luke to see
>> what is in your index, etc.  It also isn't clear to me what your
>> documents look like.
>>
>> As for a Farsi analyzer, I would Google "Farsi analyzer Lucene" and
>> see if you can find anything.  Otherwise, you will have to write your
>> own (and donate it????)
>>
>> -Grant
>>
>> On Apr 30, 2008, at 3:21 AM, esra wrote:
>>
>>>
>>> hi,
>>>
>>> i am using lucene's "IndexSearcher" to search the given xml by
>>> keyword which
>>> contains farsi information.
>>> while searching i use ranges like
>>>
>>> =D8=A2-=D8=AB  |  =D8=AC-=D8=AE  |  =D8=AF-=DA=98  |  =D8=B3-=D8=B8  =
|  =D8=B9-=D9=82  |  =DA=A9-=D9=84  |  =D9=85-=DB=8C
>>>
>>> when i do search for  "=D8=AF-=DA=98"  range the results are wrong , =
they =20
>>> are
>>> the
>>> results of  " =D8=B3-=D8=B8 "range.
>>>
>>> for example when i do search for "=D8=AF-=DA=98"  one of the the =
results is
>>> "=D8=B3=D8=A7=D8=A8 =D9=88=D9=88=D9=81=D8=B1"
>>> , this result also shown on the " =D8=B3-=D8=B8 " range's result =
list which
>>> is the
>>> corret range.
>>>
>>> As IndexSearcher use "compareTo" method and this method uses
>>> unicodes for
>>> comparing, i found the unicodes of the characters.
>>>
>>> =D8=AF=3DU+62F
>>> =DA=98 =3D U+698
>>> and the first letter of "=D8=B3=D8=A7=D8=A8 =D9=88=D9=88=D9=81=D8=B1 =
" is  =D8=B3 =3D U+633
>>>
>>> Do you have any idea how to solve this problem, there are analyzers
>>> for
>>> different languages ,
>>> will this be usefull if so do you know where to find a farsi =20
>>> analyzer?
>>>
>>> I would bu glad if you help.
>>>
>>> thanks ,
>>>
>>> Esra
>>>
>>> --=20
>>> View this message in context:
>>> http://www.nabble.com/lucene-farsi-problem-tp16977096p16977096.html
>>> Sent from the Lucene - Java Users mailing list archive at =20
>>> Nabble.com.
>>>
>>>
>>> =
---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>> --------------------------
>> Grant Ingersoll
>>
>> Lucene Helpful Hints:
>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>
>>
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> --=20
> View this message in context: =
http://www.nabble.com/lucene-farsi-problem-tp16977096p16980977.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ







---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33841-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 30 13:47:19 2008
Return-Path: <java-user-return-33841-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5325 invoked from network); 30 Apr 2008 13:47:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Apr 2008 13:47:18 -0000
Received: (qmail 31371 invoked by uid 500); 30 Apr 2008 13:47:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30808 invoked by uid 500); 30 Apr 2008 13:47:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30797 invoked by uid 99); 30 Apr 2008 13:47:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Apr 2008 06:47:13 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of glen.newton@gmail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO py-out-1112.google.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Apr 2008 13:46:25 +0000
Received: by py-out-1112.google.com with SMTP id z74so713342pyg.9
        for <java-user@lucene.apache.org>; Wed, 30 Apr 2008 06:46:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=3gBV0hjWo+va8wDYxsslFUgb4nRq3uZHsJYCva8614g=;
        b=TH8vrDWj2YVVUJ81LkdIVXMMjqgs78ITM0wRTThIg0HjddizAUa2Hfprg5bsymtaSNJZFA1VytXjfgANcll73rtorXNEARd14SjepEQwekqooGWacqw4BFS0XPdLxsumBp+Nn0iNQVn1zkteaJpeLv2HotjlF/nRxHfsHw9TxMw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Dw1C8hFCnNujA8GkMS0w/cB+gPQOXF5YvrOxiX7Juf1f5U2fBiEK1JqlZCOpgqMWajAyhKPVTmwJnFnfGKyvnQy6wyjjUrv+1qW+ALWLd/2WEH8HYyKjLDf4/kjUbqUqzUURntqtNJFKVXhuOdAbyZQ+tCgYeIpo6xmEytxMO5U=
Received: by 10.140.165.21 with SMTP id n21mr294371rve.289.1209563199191;
        Wed, 30 Apr 2008 06:46:39 -0700 (PDT)
Received: by 10.140.148.19 with HTTP; Wed, 30 Apr 2008 06:46:39 -0700 (PDT)
Message-ID: <5e76f3840804300646y7d230aa3xb7827193fe441b4d@mail.gmail.com>
Date: Wed, 30 Apr 2008 09:46:39 -0400
From: "Glen Newton" <glen.newton@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Does Lucene Supports Billions of data
In-Reply-To: <8837fb770804300041v29e180ffq93d39af0f672a348@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <16974808.post@talk.nabble.com>
	 <8837fb770804300041v29e180ffq93d39af0f672a348@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I have created Indexes with 1.5 billion documents.

It was experimental: I took an index with 25 million documents, and
merged it with itself many times. While not definitive as there were
only 25m unique documents that were duplicated, it did prove that
Lucene should be able to handle this number of (unique) documents.

That said, Lucene needs to support >2B, so docids (and all associated
internals) need to become 'long' fairly soon....

-Glen

2008/4/30 John Wang <john.wang@gmail.com>:
> lucene docids are represented in a java int, so max signed int would be the
>  limit, a little over 2 billion.
>
>  -John
>
>
>
>  On Wed, Apr 30, 2008 at 11:54 AM, Sebastin <sebasmtech@gmail.com> wrote:
>
>  >
>  > Hi All,
>  > Does Lucene supports Billions of data in a single index store of size 14
>  > GB
>  > for every search.I have 3 Index Store of size 14 GB per index i need to
>  > search these index store and retreive the result.it throws out of memory
>  > problem while searching this index stores.
>  > --
>  > View this message in context:
>  > http://www.nabble.com/Does-Lucene-Supports-Billions-of-data-tp16974808p16974808.html
>  > Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>  >
>  >
>  > ---------------------------------------------------------------------
>  > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  > For additional commands, e-mail: java-user-help@lucene.apache.org
>  >
>  >
>



-- 

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33842-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 30 14:02:29 2008
Return-Path: <java-user-return-33842-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12832 invoked from network); 30 Apr 2008 14:02:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Apr 2008 14:02:28 -0000
Received: (qmail 62508 invoked by uid 500); 30 Apr 2008 14:02:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62480 invoked by uid 500); 30 Apr 2008 14:02:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62469 invoked by uid 99); 30 Apr 2008 14:02:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Apr 2008 07:02:23 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of john.wang@gmail.com designates 209.85.128.191 as permitted sender)
Received: from [209.85.128.191] (HELO fk-out-0910.google.com) (209.85.128.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Apr 2008 14:01:36 +0000
Received: by fk-out-0910.google.com with SMTP id 18so294183fkq.5
        for <java-user@lucene.apache.org>; Wed, 30 Apr 2008 07:01:49 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=Ge6FozT7+LQLDYW5iplRxs0smNlWuK2HO2mwPV0n7us=;
        b=vjJK3BE5iV6EY5XxgHLZrYS2ICCT6aZQZUfWinZPEriRtG4MVthTdku74LHFNBee6lGf7Ytk8qRcroHeMlK4FnFnKVC1hSXU1+vN6OpUMs2mRSgkbUA4d4nGeR5KhTjF9C8NKuw7dcIA31T2FuoElHaJ1hDV6VqhRmQzECVKCrs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=W+/0GbYjglXzhDHu4Dme3ehvWCGgZU6IIXX+LbXm7h5RkleWjUNtiHXGZbpEnkJ6NXeGDew0OOd5R42AB0b1Re+EG8d0xuE71PKqpWbB1qfrynFxBB0J0BBTUWRvD4bfPO4ed/PzTAJSJpeMFlQYxuD4ew7/0voOSOCVFFVS66Q=
Received: by 10.82.125.8 with SMTP id x8mr110886buc.33.1209564108769;
        Wed, 30 Apr 2008 07:01:48 -0700 (PDT)
Received: by 10.82.134.7 with HTTP; Wed, 30 Apr 2008 07:01:48 -0700 (PDT)
Message-ID: <8837fb770804300701v74791ce0h6c1bf359b801e473@mail.gmail.com>
Date: Wed, 30 Apr 2008 22:01:48 +0800
From: "John Wang" <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Does Lucene Supports Billions of data
In-Reply-To: <5e76f3840804300646y7d230aa3xb7827193fe441b4d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1870_277369.1209564108761"
References: <16974808.post@talk.nabble.com>
	 <8837fb770804300041v29e180ffq93d39af0f672a348@mail.gmail.com>
	 <5e76f3840804300646y7d230aa3xb7827193fe441b4d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1870_277369.1209564108761
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I am not sure how well lucene would perform with > 2 Billion docs in a
single index anyway.
I have posted a while ago about considering different ways of building
distributed search. A master-slave hierarchical model has been the norm, I
was hoping to see more of a system built on top of a Hadoop like
infrastructure where it is seamless to scale. Ning at IBM has written some
cool stuff into HBase for building index shards from an HBase table.

-John

On Wed, Apr 30, 2008 at 9:46 PM, Glen Newton <glen.newton@gmail.com> wrote:

> I have created Indexes with 1.5 billion documents.
>
> It was experimental: I took an index with 25 million documents, and
> merged it with itself many times. While not definitive as there were
> only 25m unique documents that were duplicated, it did prove that
> Lucene should be able to handle this number of (unique) documents.
>
> That said, Lucene needs to support >2B, so docids (and all associated
> internals) need to become 'long' fairly soon....
>
> -Glen
>
> 2008/4/30 John Wang <john.wang@gmail.com>:
> > lucene docids are represented in a java int, so max signed int would be
> the
> >  limit, a little over 2 billion.
> >
> >  -John
> >
> >
> >
> >  On Wed, Apr 30, 2008 at 11:54 AM, Sebastin <sebasmtech@gmail.com>
> wrote:
> >
> >  >
> >  > Hi All,
> >  > Does Lucene supports Billions of data in a single index store of size
> 14
> >  > GB
> >  > for every search.I have 3 Index Store of size 14 GB per index i need
> to
> >  > search these index store and retreive the result.it throws out of
> memory
> >  > problem while searching this index stores.
> >  > --
> >  > View this message in context:
> >  >
> http://www.nabble.com/Does-Lucene-Supports-Billions-of-data-tp16974808p16974808.html
> >  > Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >  >
> >  >
> >  > ---------------------------------------------------------------------
> >  > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >  > For additional commands, e-mail: java-user-help@lucene.apache.org
> >  >
> >  >
> >
>
>
>
> --
>
> -
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_1870_277369.1209564108761--

From java-user-return-33843-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 30 14:37:48 2008
Return-Path: <java-user-return-33843-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45742 invoked from network); 30 Apr 2008 14:37:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Apr 2008 14:37:48 -0000
Received: (qmail 85889 invoked by uid 500); 30 Apr 2008 14:37:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85846 invoked by uid 500); 30 Apr 2008 14:37:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85834 invoked by uid 99); 30 Apr 2008 14:37:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Apr 2008 07:37:42 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of glen.newton@gmail.com designates 64.233.184.224 as permitted sender)
Received: from [64.233.184.224] (HELO wr-out-0506.google.com) (64.233.184.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Apr 2008 14:36:54 +0000
Received: by wr-out-0506.google.com with SMTP id c30so374682wra.14
        for <java-user@lucene.apache.org>; Wed, 30 Apr 2008 07:37:08 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=PR1+PnCN9aRMts7sGDUq1p27O2c8itz4G5HzxSX3u6g=;
        b=nXrCNHEJklxXcxNYv/55lIQPCUZ5ExF5gmQ7Rzn/5ammt+voc7zDgIwHC6/wVICnB4EAaXy9dn9d9O52vtULve5EIR/L8eMzb7GdeqD5ic2fNuOHxqKjp5XL+22pJ1VZf0R0kF5JP65cM/O+aT0AMZdeJYrPPcdMYMBTTWMtS+Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=OjZ+wkjiamPKEE20IuJpYD+GMHMHLjjreJnWdjoTpWGw/wBQaJuKbw3dcLS4uQHQmr0cUE339tJokDk8t8xNnr/dP2DCFB9UvDxW8nuEx8pKrb9QOdyUA1kjoyD1SirQgxUtFeUK6E3Z7+yPCjFiGnrDp+lyg5F0anrzLCSpC/o=
Received: by 10.141.141.3 with SMTP id t3mr338422rvn.72.1209566227532;
        Wed, 30 Apr 2008 07:37:07 -0700 (PDT)
Received: by 10.140.148.19 with HTTP; Wed, 30 Apr 2008 07:37:07 -0700 (PDT)
Message-ID: <5e76f3840804300737l3ba8a227r87f86087903f3a3f@mail.gmail.com>
Date: Wed, 30 Apr 2008 10:37:07 -0400
From: "Glen Newton" <glen.newton@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Does Lucene Supports Billions of data
In-Reply-To: <8837fb770804300701v74791ce0h6c1bf359b801e473@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <16974808.post@talk.nabble.com>
	 <8837fb770804300041v29e180ffq93d39af0f672a348@mail.gmail.com>
	 <5e76f3840804300646y7d230aa3xb7827193fe441b4d@mail.gmail.com>
	 <8837fb770804300701v74791ce0h6c1bf359b801e473@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I understand. But it depends on implementation: if there are things in
Lucene that are O(n^2) or worse, then Moore's Law will not help with
large numbers. But if they are mostly O(n) or O(nlogn) on the large
numbers, then we can wait for bigger, faster, more cores to allow us
to use Lucene for billions of documents. You can go out now and buy a
64 dual core Sun SPARC box: which would likely scale better than any
network solution.

But of course as you point out, if we are going commodity hardware,
the Google distributed back-ends solution is the way to go......

-glen

2008/4/30 John Wang <john.wang@gmail.com>:
> I am not sure how well lucene would perform with > 2 Billion docs in a
>  single index anyway.
>  I have posted a while ago about considering different ways of building
>  distributed search. A master-slave hierarchical model has been the norm, I
>  was hoping to see more of a system built on top of a Hadoop like
>  infrastructure where it is seamless to scale. Ning at IBM has written some
>  cool stuff into HBase for building index shards from an HBase table.
>
>  -John
>
>
>
>  On Wed, Apr 30, 2008 at 9:46 PM, Glen Newton <glen.newton@gmail.com> wrote:
>
>  > I have created Indexes with 1.5 billion documents.
>  >
>  > It was experimental: I took an index with 25 million documents, and
>  > merged it with itself many times. While not definitive as there were
>  > only 25m unique documents that were duplicated, it did prove that
>  > Lucene should be able to handle this number of (unique) documents.
>  >
>  > That said, Lucene needs to support >2B, so docids (and all associated
>  > internals) need to become 'long' fairly soon....
>  >
>  > -Glen
>  >
>  > 2008/4/30 John Wang <john.wang@gmail.com>:
>  > > lucene docids are represented in a java int, so max signed int would be
>  > the
>  > >  limit, a little over 2 billion.
>  > >
>  > >  -John
>  > >
>  > >
>  > >
>  > >  On Wed, Apr 30, 2008 at 11:54 AM, Sebastin <sebasmtech@gmail.com>
>  > wrote:
>  > >
>  > >  >
>  > >  > Hi All,
>  > >  > Does Lucene supports Billions of data in a single index store of size
>  > 14
>  > >  > GB
>  > >  > for every search.I have 3 Index Store of size 14 GB per index i need
>  > to
>  > >  > search these index store and retreive the result.it throws out of
>  > memory
>  > >  > problem while searching this index stores.
>  > >  > --
>  > >  > View this message in context:
>  > >  >
>  > http://www.nabble.com/Does-Lucene-Supports-Billions-of-data-tp16974808p16974808.html
>  > >  > Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>  > >  >
>  > >  >
>  > >  > ---------------------------------------------------------------------
>  > >  > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  > >  > For additional commands, e-mail: java-user-help@lucene.apache.org
>  > >  >
>  > >  >
>  > >
>  >
>  >
>  >
>  > --
>  >
>  > -
>  >
>  > ---------------------------------------------------------------------
>  > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  > For additional commands, e-mail: java-user-help@lucene.apache.org
>  >
>  >
>



-- 

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33844-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 30 14:40:28 2008
Return-Path: <java-user-return-33844-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46492 invoked from network); 30 Apr 2008 14:40:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Apr 2008 14:40:28 -0000
Received: (qmail 95334 invoked by uid 500); 30 Apr 2008 14:40:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95308 invoked by uid 500); 30 Apr 2008 14:40:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95297 invoked by uid 99); 30 Apr 2008 14:40:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Apr 2008 07:40:22 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [66.173.27.67] (HELO mail.nasi.com) (66.173.27.67)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Apr 2008 14:39:37 +0000
To: java-user@lucene.apache.org
Subject: bug in MultiPhraseQuery toString() method, ArrayIndexOutOfBoundsException
MIME-Version: 1.0
X-Mailer: Lotus Notes Release 6.5.4 March 27, 2005
Message-ID: <OF2355E3D0.902287EA-ON8625743B.004FC133-8625743B.00508A7D@nasi.com>
From: Robert.Hastings@ancept.com
Date: Wed, 30 Apr 2008 09:39:34 -0500
X-MIMETrack: Serialize by Router on notes1/NASI(Release 6.5.5FP1|April 11, 2006) at 04/30/2008
 09:39:58,
	Serialize complete at 04/30/2008 09:39:58
Content-Type: multipart/alternative; boundary="=_alternative 00508A7A8625743B_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 00508A7A8625743B_=
Content-Type: text/plain; charset="US-ASCII"

Using Lucene 2.3.0 I'm seeing an ArrayIndexOutOfBoundsException: 0  at 
line 291 of MultiPhraseQuery.
A test should be added for (terms.length == 0). 

I'm checking to see why the terms array is 0.

Bob Hastings


--=_alternative 00508A7A8625743B_=--

From java-user-return-33845-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 30 15:11:36 2008
Return-Path: <java-user-return-33845-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95287 invoked from network); 30 Apr 2008 15:11:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Apr 2008 15:11:36 -0000
Received: (qmail 69968 invoked by uid 500); 30 Apr 2008 15:11:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69942 invoked by uid 500); 30 Apr 2008 15:11:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69931 invoked by uid 99); 30 Apr 2008 15:11:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Apr 2008 08:11:30 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.153 as permitted sender)
Received: from [72.14.220.153] (HELO fg-out-1718.google.com) (72.14.220.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Apr 2008 15:10:45 +0000
Received: by fg-out-1718.google.com with SMTP id 13so290129fge.27
        for <java-user@lucene.apache.org>; Wed, 30 Apr 2008 08:10:58 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=ytACOqSEDIyB4fu62od5z/EfND2ZwiJGQ6941cDLw60=;
        b=PUWv17G2R8RMlrpANFy2zBzaQ9ewmECa647Klq2Bj6vFQ7BJydqaw8diiAMDcDDMCWlwe2kBsTlj5nyHeWvkLGbpyNgfqqeCY9KWoKcl28m2qmv3RBpy6fBn2ALIYc6Dw3eeyDIDwCso31MU6Ew661HPCwkb8V1V8dWXsm7J76I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=yFJ6+U6CO1/hZY+CTstbQ7rb6ptn20A8au83mh/9DqQWq7A3ubutWwJcnd0e0woRNbLc4c2xMZ7XcRVS2tyX3pE2mdx5LQraE4+2iLL4d340sgWIRwqJGS+0zR63bo7vOAOaw34UAjS/AKOFnWIerCf80d1Ut/biLbJW+WNUHUI=
Received: by 10.82.151.9 with SMTP id y9mr136557bud.8.1209568257656;
        Wed, 30 Apr 2008 08:10:57 -0700 (PDT)
Received: by 10.82.151.7 with HTTP; Wed, 30 Apr 2008 08:10:57 -0700 (PDT)
Message-ID: <359a92830804300810x6fe291c6v9ae424374374ed87@mail.gmail.com>
Date: Wed, 30 Apr 2008 11:10:57 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Removing duplicate entries
In-Reply-To: <b537e3710804291851q2c781959iaf96e14c67944b73@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1660_4939516.1209568257646"
References: <b537e3710804291048p6aa9151t144f48c324374cf1@mail.gmail.com>
	 <b537e3710804291057n3d882497l4a25e2ad6172a127@mail.gmail.com>
	 <359a92830804291315l43428102y98e1b979f02539e@mail.gmail.com>
	 <b537e3710804291851q2c781959iaf96e14c67944b73@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1660_4939516.1209568257646
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

See below:

On Tue, Apr 29, 2008 at 9:51 PM, Jo=E3o Rodrigues <anaryin@gmail.com> wrote=
:

> First of all, let me apologize for the double post but I got some strange
> error message =3D\
>
> >The first question is what do you mean the document
> >is already in the index? Lucene doc IDs are useless
> >here since the ones in your FSDir and the ones in your
> >RAMdir are unrelated. In fact, I suspect that the
> >lucene docIDs will start at the same number in both.
>
> The documents have 2 fields, one of them being their identifier, which is
> Indexed and Not Tokenized (and stored).
>

Cool, this will work just fine for you. You can forget everything
I said about Lucene doc IDs.

>
> >Lucene doc IDs are just monotonically incremented integers.
> >So, how do you identify identical documents? Is there some
> >field in your document that's guaranteed to be unique to each
> >document? If so, *that's* the field you can use for termEnu
> >to get the Lucene docid to remove, assuming you've indexed
> >it UN_TOKENIZED or you are very, very, very confident that
> >your tokenizers won't break it up.
> >But you can make this easier by using IndexReader.deleteDocument(term)
> >where the term is your unique field.
>
> Since I have an unique field for each document, I'll use that then.
> However,
> what's the thinking behind the enum/delete? The termEnum lists me the
> terms
> which have a particular field value and gives me their "lucene ID" so tha=
t
> the Reader can then delete it?
>

Probably something very like that, although you see none of that. Just
doing a deleteDocument(term) does it all for you. And I learned long ago
that the folks who write this kind of stuff can probably do it more
efficiently
than I can <G>.


>
> >Additionally, I question why you bother with a RAMdir for your changes.
> >An index reader essentially takes a snapshot of your index, and
> >subsequent changes are not seen by your searchers until you
> >close and reopen the underlying reader. What advantage do you
> >see in using a RAMdir?
>
> I use a RAMdir because it is somehow faster. I'm downloading a few
> thousand
> documents at a time from the internet and then indexing them in a RAM
> index
> and then merging them to the FS dir. Also, in case anything fails, my FS
> directory, and thus my "stable" index, is safe from harm :) But why did
> you
> ask? Advice is welcome :)
>

I ask because a lot of people are mistakenly suppose that RAMdirs are faste=
r
because they have RAM in front <G>. The indexing process uses RAM implicitl=
y
and periodically flushes to FS. You can control this by various parameters
on
IndexWriter like setMaxMergeDocs, setMergeFactor etc. and I personally
prefer letting that do the work and avoiding having to code merging the two=
.

But your point about failure is valid, although you might want to search th=
e
mail archive for discussions on this as there's been work done to make this
less of a concern....

Best
Erick


>
> Thanks,
>
> Jo=E3o Rodrigues
>

------=_Part_1660_4939516.1209568257646--

From java-user-return-33846-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 30 16:04:05 2008
Return-Path: <java-user-return-33846-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22977 invoked from network); 30 Apr 2008 16:04:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Apr 2008 16:04:05 -0000
Received: (qmail 94557 invoked by uid 500); 30 Apr 2008 16:03:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94531 invoked by uid 500); 30 Apr 2008 16:03:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94520 invoked by uid 99); 30 Apr 2008 16:03:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Apr 2008 09:03:59 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of anaryin@gmail.com designates 209.85.146.179 as permitted sender)
Received: from [209.85.146.179] (HELO wa-out-1112.google.com) (209.85.146.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Apr 2008 16:03:07 +0000
Received: by wa-out-1112.google.com with SMTP id l24so670784waf.11
        for <java-user@lucene.apache.org>; Wed, 30 Apr 2008 09:03:28 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=Z4D4V9pSQsZ6QOSq1/xjyvC5BdEn7ywBt87JdUfxs7c=;
        b=TWGo4zBIwLIbMTlLw7+TuAKU3a0XFhrDgf7cs22HQTFXuOXNuIOsZJA1KMqzplhEw16nOVPFQxctddjVv/EQWnfVGBq3it9V24BFdduSe/yT4jR50SDkisNJG8I0hGQeRhEOcF/ti4RqA0Z3jBCnBMTEkLubA83XbbdqC0Zjydo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=eL+Wuo0Gkaz9V9RPqbj3CkXzIxlYL4Etrrv8MoCsdBBaJMbNRSLdyL8535xZH9DzA67NhjnVuChxQw0IaDWuQIlIL89MfW3t6DvZSq6DH7JFIGJT2unifLYhR7Y3AHxI9m+dlMsusg+uy2TS7SZPrp9aC4ywTOi9JGPZ7sNeI24=
Received: by 10.115.61.1 with SMTP id o1mr934819wak.94.1209571407066;
        Wed, 30 Apr 2008 09:03:27 -0700 (PDT)
Received: by 10.115.19.14 with HTTP; Wed, 30 Apr 2008 09:03:26 -0700 (PDT)
Message-ID: <b537e3710804300903l2098f075wcbd8f48c9c401767@mail.gmail.com>
Date: Wed, 30 Apr 2008 17:03:26 +0100
From: "=?UTF-8?Q?Jo=C3=A3o_Rodrigues?=" <anaryin@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Removing duplicate entries
In-Reply-To: <359a92830804300810x6fe291c6v9ae424374374ed87@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6896_33387545.1209571407058"
References: <b537e3710804291048p6aa9151t144f48c324374cf1@mail.gmail.com>
	 <b537e3710804291057n3d882497l4a25e2ad6172a127@mail.gmail.com>
	 <359a92830804291315l43428102y98e1b979f02539e@mail.gmail.com>
	 <b537e3710804291851q2c781959iaf96e14c67944b73@mail.gmail.com>
	 <359a92830804300810x6fe291c6v9ae424374374ed87@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_6896_33387545.1209571407058
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

PlByb2JhYmx5IHNvbWV0aGluZyB2ZXJ5IGxpa2UgdGhhdCwgYWx0aG91Z2ggeW91IHNlZSBub25l
IG9mIHRoYXQuIEp1c3QKPmRvaW5nIGEgZGVsZXRlRG9jdW1lbnQodGVybSkgZG9lcyBpdCBhbGwg
Zm9yIHlvdS4gQW5kIEkgbGVhcm5lZCBsb25nIGFnbwo+dGhhdCB0aGUgZm9sa3Mgd2hvIHdyaXRl
IHRoaXMga2luZCBvZiBzdHVmZiBjYW4gcHJvYmFibHkgZG8gaXQgbW9yZQo+ZWZmaWNpZW50bHkK
PnRoYW4gSSBjYW4gPEc+LgoKQW5kIHByb2JhYmx5IG1vcmUgZWZmaWNpZW50bHkgdGhhdCBJIGNh
biBhcyB3ZWxsIDopIFRoYW5rcyBmb3IgdGhlIHRpcC4KCj5JIGFzayBiZWNhdXNlIGEgbG90IG9m
IHBlb3BsZSBhcmUgbWlzdGFrZW5seSBzdXBwb3NlIHRoYXQgUkFNZGlycyBhcmUKZmFzdGVyCj5i
ZWNhdXNlIHRoZXkgaGF2ZSBSQU0gaW4gZnJvbnQgPEc+LiBUaGUgaW5kZXhpbmcgcHJvY2VzcyB1
c2VzIFJBTQppbXBsaWNpdGx5Cj5hbmQgcGVyaW9kaWNhbGx5IGZsdXNoZXMgdG8gRlMuIFlvdSBj
YW4gY29udHJvbCB0aGlzIGJ5IHZhcmlvdXMgcGFyYW1ldGVycwo+b24KPkluZGV4V3JpdGVyIGxp
a2Ugc2V0TWF4TWVyZ2VEb2NzLCBzZXRNZXJnZUZhY3RvciBldGMuIGFuZCBJIHBlcnNvbmFsbHkK
PnByZWZlciBsZXR0aW5nIHRoYXQgZG8gdGhlIHdvcmsgYW5kIGF2b2lkaW5nIGhhdmluZyB0byBj
b2RlIG1lcmdpbmcgdGhlCnR3by4KCj5CdXQgeW91ciBwb2ludCBhYm91dCBmYWlsdXJlIGlzIHZh
bGlkLCBhbHRob3VnaCB5b3UgbWlnaHQgd2FudCB0byBzZWFyY2gKdGhlCj5tYWlsIGFyY2hpdmUg
Zm9yIGRpc2N1c3Npb25zIG9uIHRoaXMgYXMgdGhlcmUncyBiZWVuIHdvcmsgZG9uZSB0byBtYWtl
IHRoaXMKPmxlc3Mgb2YgYSBjb25jZXJuLi4uLgoKWWVwLCBJJ20gKHdhcywgdGhhbmtzIHRvIHlv
dSA6UCkgb25lIG9mIHRob3NlIHBlcnNvbnMuIEknZCBhbHJlYWR5IHJlYWQKdGhhdCwgYnV0IHNp
bmNlIEkgaGFkIHRoZSBjb2RlIHdyaXR0ZW4sIEkgd2FzIHRoaW5raW5nIG9mIGxldHRpbmcgZ28g
OikgQnV0CnRoZW4gYWdhaW4sIHNpbmNlIEknbSBnZXR0aW5nIGEgbWFqb3IgbWVtb3J5IGxlYWss
IEkgYmVsaWV2ZSBJJ2xsIHRyeSB0aGF0Cm9wdGlvbiEKClRoYW5rcyBmb3IgdGhlIGhlbHAhCkJl
c3QgUmVnYXJkcywKCi0tIApKb8OjbyBSb2RyaWd1ZXMK
------=_Part_6896_33387545.1209571407058--

From java-user-return-33847-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 30 16:52:47 2008
Return-Path: <java-user-return-33847-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56910 invoked from network); 30 Apr 2008 16:52:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Apr 2008 16:52:46 -0000
Received: (qmail 92870 invoked by uid 500); 30 Apr 2008 16:52:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92842 invoked by uid 500); 30 Apr 2008 16:52:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92831 invoked by uid 99); 30 Apr 2008 16:52:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Apr 2008 09:52:40 -0700
X-ASF-Spam-Status: No, hits=-3.8 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Apr 2008 16:51:46 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: base64
Subject: RE: lucene farsi problem
Date: Wed, 30 Apr 2008 12:50:34 -0400
Message-ID: <9294E20AED46934EA459020706463F94A049F6@SUEXCL-02.ad.syr.edu>
In-Reply-To: <16977096.post@talk.nabble.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: lucene farsi problem
Thread-Index: Aciqkvb7YGBH+QJaQte6A0nHOtTAFwASSRFg
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

SGkgRXNyYSwNCg0KQ2F2ZWF0OiBJIGRvbid0IHNwZWFrLCByZWFkLCB3cml0ZSwgb3IgZHJlYW0g
aW4gRmFyc2kgLSBJIGp1c3Qga25vdyB0aGF0IGl0IG1vc3RseSBzaGFyZXMgaXRzIG9ydGhvZ3Jh
cGh5IHdpdGggQXJhYmljLCBhbmQgdGhhdCB0aGV5IGFyZSBib3RoIHdyaXR0ZW4gYW5kIHJlYWQg
cmlnaHQtdG8tbGVmdC4NCg0KSG93IGFyZSB5b3UgY29uc3RydWN0aW5nIHRoZSBxdWVyaWVzPyAg
VXNpbmcgUXVlcnlQYXJzZXI/ICBJZiBzbywgdGhlbiBJIHN1c3BlY3QgdGhlIHByb2JsZW0gaXMg
dGhhdCB5b3UgaW50ZW5kIHRoZSByYW5nZSB5b3Ugc3VwcGx5IHRvIGJlIHJlYWQgZW50aXJlbHkg
cmlnaHQtdG8tbGVmdCwgYnV0IEx1Y2VuZSBpbnN0ZWFkIHJlYWRzIGl0IGxlZnQtdG8tcmlnaHQu
ICBIYXZlIHlvdSB0cmllZCB1c2luZyBlLmcuICLYry3amCIgaW5zdGVhZCBvZiAi2K8t2pgiPyAg
KFRoYXQgaXMsIHBsYWNpbmcgdGhlIGxvd2VyIHZhbHVlZCB0ZXJtIG9uIHRoZSBsZWZ0IGluc3Rl
YWQgb2YgdGhlIHJpZ2h0LikNCg0KQUZBSUNULCBSYW5nZUZpbHRlciAoY2FsbGVkIGZyb20gQ29u
c3RhbnRTY29yZVJhbmdlUXVlcnksIHdoaWNoIGlzIGNhbGxlZCBmcm9tIFF1ZXJ5UGFyc2VyKSBk
b2VzIG5vdCB0ZXN0IHdoZXRoZXIgbG93ZXJUZXJtIGlzIGluIGZhY3QgbG93ZXIgdGhhbiB1cHBl
clRlcm0uICBJZiBpdCB0dXJucyBvdXQgdGhhdCB0aGUgcHJvYmxlbSBpcyBzaW1wbHkgb25lIG9m
IG9yZGVyLCBpdCBtaWdodCBtYWtlIHNlbnNlIHRvIG1vZGlmeSBSYW5nZUZpbHRlciBzbyB0aGF0
IGl0IGZsaXAgdGhlbSB3aGVuIGxvd2VyVGVybSA+IHVwcGVyVGVybS4NCg0KU3RldmUNCg0KT24g
MDQvMzAvMjAwOCBhdCAzOjIxIEFNLCBlc3JhIHdyb3RlOg0KPiANCj4gaGksDQo+IA0KPiBpIGFt
IHVzaW5nIGx1Y2VuZSdzICJJbmRleFNlYXJjaGVyIiB0byBzZWFyY2ggdGhlIGdpdmVuIHhtbA0K
PiBieSBrZXl3b3JkIHdoaWNoDQo+IGNvbnRhaW5zIGZhcnNpIGluZm9ybWF0aW9uLg0KPiB3aGls
ZSBzZWFyY2hpbmcgaSB1c2UgcmFuZ2VzIGxpa2UNCj4gDQo+INiiLdirICB8ICDYrC3YriAgfCAg
2K8t2pggIHwgINizLdi4ICB8ICDYuS3ZgiAgfCAg2qkt2YQgIHwgINmFLduMDQo+IA0KPiB3aGVu
IGkgZG8gc2VhcmNoIGZvciAgItivLdqYIiAgcmFuZ2UgdGhlIHJlc3VsdHMgYXJlIHdyb25nICwN
Cj4gdGhleSBhcmUgdGhlDQo+IHJlc3VsdHMgb2YgICIg2LMt2LggInJhbmdlLg0KPiANCj4gZm9y
IGV4YW1wbGUgd2hlbiBpIGRvIHNlYXJjaCBmb3IgItivLdqYIiAgb25lIG9mIHRoZSB0aGUNCj4g
cmVzdWx0cyBpcyAi2LPYp9ioINmI2YjZgdixIg0KPiAsIHRoaXMgcmVzdWx0IGFsc28gc2hvd24g
b24gdGhlICIg2LMt2LggIiByYW5nZSdzIHJlc3VsdCBsaXN0DQo+IHdoaWNoIGlzIHRoZQ0KPiBj
b3JyZXQgcmFuZ2UuDQo+IA0KPiBBcyBJbmRleFNlYXJjaGVyIHVzZSAiY29tcGFyZVRvIiBtZXRo
b2QgYW5kIHRoaXMgbWV0aG9kIHVzZXMNCj4gdW5pY29kZXMgZm9yDQo+IGNvbXBhcmluZywgaSBm
b3VuZCB0aGUgdW5pY29kZXMgb2YgdGhlIGNoYXJhY3RlcnMuDQo+IA0KPiDYrz1VKzYyRg0KPiDa
mCA9IFUrNjk4DQo+IGFuZCB0aGUgZmlyc3QgbGV0dGVyIG9mICLYs9in2Kgg2YjZiNmB2LEgIiBp
cyAg2LMgPSBVKzYzMw0KPiANCj4gRG8geW91IGhhdmUgYW55IGlkZWEgaG93IHRvIHNvbHZlIHRo
aXMgcHJvYmxlbSwgdGhlcmUgYXJlDQo+IGFuYWx5emVycyBmb3INCj4gZGlmZmVyZW50IGxhbmd1
YWdlcyAsDQo+IHdpbGwgdGhpcyBiZSB1c2VmdWxsIGlmIHNvIGRvIHlvdSBrbm93IHdoZXJlIHRv
IGZpbmQgYSBmYXJzaSBhbmFseXplcj8NCj4gDQo+IEkgd291bGQgYnUgZ2xhZCBpZiB5b3UgaGVs
cC4NCj4gDQo+IHRoYW5rcyAsDQo+IA0KPiBFc3JhDQo+IA0KPiAtLSBWaWV3IHRoaXMgbWVzc2Fn
ZSBpbiBjb250ZXh0Og0KPiBodHRwOi8vd3d3Lm5hYmJsZS5jb20vbHVjZW5lLWZhcnNpLXByb2Js
ZW0tdHAxNjk3NzA5NnAxNjk3NzA5Ni5odG1sIFNlbnQNCj4gZnJvbSB0aGUgTHVjZW5lIC0gSmF2
YSBVc2VycyBtYWlsaW5nIGxpc3QgYXJjaGl2ZSBhdCBOYWJibGUuY29tLg0KPiANCj4gDQo+IC0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLSBUbw0KPiB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3Jp
YmVAbHVjZW5lLmFwYWNoZS5vcmcgRm9yDQo+IGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDog
amF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcNCj4gDQo+DQoNCiANCg0K


From java-user-return-33848-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 30 17:19:23 2008
Return-Path: <java-user-return-33848-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70043 invoked from network); 30 Apr 2008 17:19:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Apr 2008 17:19:23 -0000
Received: (qmail 34760 invoked by uid 500); 30 Apr 2008 17:19:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34729 invoked by uid 500); 30 Apr 2008 17:19:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34718 invoked by uid 99); 30 Apr 2008 17:19:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Apr 2008 10:19:17 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Apr 2008 17:18:25 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: base64
Subject: RE: lucene farsi problem
Date: Wed, 30 Apr 2008 13:17:14 -0400
Message-ID: <9294E20AED46934EA459020706463F94A049FD@SUEXCL-02.ad.syr.edu>
In-Reply-To: <9294E20AED46934EA459020706463F94A049F6@SUEXCL-02.ad.syr.edu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: lucene farsi problem
Thread-Index: Aciqkvb7YGBH+QJaQte6A0nHOtTAFwASSRFgAAJluhA=
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

T24gMDQvMzAvMjAwOCBhdCAxMjo1MCBQTSwgU3RldmVuIEEgUm93ZSB3cm90ZToNCj4gQ2F2ZWF0
OiBJIGRvbid0IHNwZWFrLCByZWFkLCB3cml0ZSwgb3IgZHJlYW0gaW4gRmFyc2kgLSBJDQo+IGp1
c3Qga25vdyB0aGF0IGl0IG1vc3RseSBzaGFyZXMgaXRzIG9ydGhvZ3JhcGh5IHdpdGggQXJhYmlj
LA0KPiBhbmQgdGhhdCB0aGV5IGFyZSBib3RoIHdyaXR0ZW4gYW5kIHJlYWQgcmlnaHQtdG8tbGVm
dC4NCj4gDQo+IEhvdyBhcmUgeW91IGNvbnN0cnVjdGluZyB0aGUgcXVlcmllcz8gIFVzaW5nIFF1
ZXJ5UGFyc2VyPyAgSWYNCj4gc28sIHRoZW4gSSBzdXNwZWN0IHRoZSBwcm9ibGVtIGlzIHRoYXQg
eW91IGludGVuZCB0aGUgcmFuZ2UNCj4geW91IHN1cHBseSB0byBiZSByZWFkIGVudGlyZWx5IHJp
Z2h0LXRvLWxlZnQsIGJ1dCBMdWNlbmUNCj4gaW5zdGVhZCByZWFkcyBpdCBsZWZ0LXRvLXJpZ2h0
LiAgSGF2ZSB5b3UgdHJpZWQgdXNpbmcgZS5nLg0KPiAi2K8t2pgiIGluc3RlYWQgb2YgItivLdqY
Ij8gIChUaGF0IGlzLCBwbGFjaW5nIHRoZSBsb3dlciB2YWx1ZWQNCj4gdGVybSBvbiB0aGUgbGVm
dCBpbnN0ZWFkIG9mIHRoZSByaWdodC4pDQoNClNpZ2ggLSBjYW4ndCBlZGl0IFJUTCB0ZXh0IC0g
dGhlIGV4YW1wbGUgc2hvdWxkIGJlIChob3BpbmcgaXQgZG9lc24ndCBnZXQgcmV2ZXJzZWQgYWdh
aW4pOg0KDQoi2pgt2K8iIGluc3RlYWQgb2YgItivLdqYIiAocmV2ZXJzaW5nIHRoZSBvcmRlciBv
ZiB0aGUgbG93ZXIgYW5kIHVwcGVyIHRlcm1zKQ0KDQo+IEFGQUlDVCwgUmFuZ2VGaWx0ZXIgKGNh
bGxlZCBmcm9tIENvbnN0YW50U2NvcmVSYW5nZVF1ZXJ5LA0KPiB3aGljaCBpcyBjYWxsZWQgZnJv
bSBRdWVyeVBhcnNlcikgZG9lcyBub3QgdGVzdCB3aGV0aGVyDQo+IGxvd2VyVGVybSBpcyBpbiBm
YWN0IGxvd2VyIHRoYW4gdXBwZXJUZXJtLiAgSWYgaXQgdHVybnMgb3V0DQo+IHRoYXQgdGhlIHBy
b2JsZW0gaXMgc2ltcGx5IG9uZSBvZiBvcmRlciwgaXQgbWlnaHQgbWFrZSBzZW5zZQ0KPiB0byBt
b2RpZnkgUmFuZ2VGaWx0ZXIgc28gdGhhdCBpdCBmbGlwIHRoZW0gd2hlbiBsb3dlclRlcm0gPiB1
cHBlclRlcm0uDQo+IA0KPiBTdGV2ZQ0KPiANCj4gT24gMDQvMzAvMjAwOCBhdCAzOjIxIEFNLCBl
c3JhIHdyb3RlOg0KPiA+IA0KPiA+IGhpLA0KPiA+IA0KPiA+IGkgYW0gdXNpbmcgbHVjZW5lJ3Mg
IkluZGV4U2VhcmNoZXIiIHRvIHNlYXJjaCB0aGUgZ2l2ZW4geG1sDQo+ID4gYnkga2V5d29yZCB3
aGljaA0KPiA+IGNvbnRhaW5zIGZhcnNpIGluZm9ybWF0aW9uLg0KPiA+IHdoaWxlIHNlYXJjaGlu
ZyBpIHVzZSByYW5nZXMgbGlrZQ0KPiA+IA0KPiA+INiiLdirICB8ICDYrC3YriAgfCAg2K8t2pgg
IHwgINizLdi4ICB8ICDYuS3ZgiAgfCAg2qkt2YQgIHwgINmFLduMDQo+ID4gDQo+ID4gd2hlbiBp
IGRvIHNlYXJjaCBmb3IgICLYry3amCIgIHJhbmdlIHRoZSByZXN1bHRzIGFyZSB3cm9uZyAsDQo+
ID4gdGhleSBhcmUgdGhlDQo+ID4gcmVzdWx0cyBvZiAgIiDYsy3YuCAicmFuZ2UuDQo+ID4gDQo+
ID4gZm9yIGV4YW1wbGUgd2hlbiBpIGRvIHNlYXJjaCBmb3IgItivLdqYIiAgb25lIG9mIHRoZSB0
aGUNCj4gPiByZXN1bHRzIGlzICLYs9in2Kgg2YjZiNmB2LEiDQo+ID4gLCB0aGlzIHJlc3VsdCBh
bHNvIHNob3duIG9uIHRoZSAiINizLdi4ICIgcmFuZ2UncyByZXN1bHQgbGlzdA0KPiA+IHdoaWNo
IGlzIHRoZQ0KPiA+IGNvcnJldCByYW5nZS4NCj4gPiANCj4gPiBBcyBJbmRleFNlYXJjaGVyIHVz
ZSAiY29tcGFyZVRvIiBtZXRob2QgYW5kIHRoaXMgbWV0aG9kIHVzZXMNCj4gPiB1bmljb2RlcyBm
b3INCj4gPiBjb21wYXJpbmcsIGkgZm91bmQgdGhlIHVuaWNvZGVzIG9mIHRoZSBjaGFyYWN0ZXJz
Lg0KPiA+IA0KPiA+INivPVUrNjJGDQo+ID4g2pggPSBVKzY5OA0KPiA+IGFuZCB0aGUgZmlyc3Qg
bGV0dGVyIG9mICLYs9in2Kgg2YjZiNmB2LEgIiBpcyAg2LMgPSBVKzYzMw0KPiA+IA0KPiA+IERv
IHlvdSBoYXZlIGFueSBpZGVhIGhvdyB0byBzb2x2ZSB0aGlzIHByb2JsZW0sIHRoZXJlIGFyZSBh
bmFseXplcnMgZm9yDQo+ID4gZGlmZmVyZW50IGxhbmd1YWdlcyAsIHdpbGwgdGhpcyBiZSB1c2Vm
dWxsIGlmIHNvIGRvIHlvdSBrbm93IHdoZXJlIHRvDQo+ID4gZmluZCBhIGZhcnNpIGFuYWx5emVy
Pw0KPiA+IA0KPiA+IEkgd291bGQgYnUgZ2xhZCBpZiB5b3UgaGVscC4NCj4gPiANCj4gPiB0aGFu
a3MgLA0KPiA+IA0KPiA+IEVzcmENCg0KDQo=


From java-user-return-33849-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 30 21:01:24 2008
Return-Path: <java-user-return-33849-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87091 invoked from network); 30 Apr 2008 21:01:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Apr 2008 21:01:24 -0000
Received: (qmail 36014 invoked by uid 500); 30 Apr 2008 21:01:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35560 invoked by uid 500); 30 Apr 2008 21:01:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35546 invoked by uid 99); 30 Apr 2008 21:01:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Apr 2008 14:01:17 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.49.252] (HELO web52005.mail.re2.yahoo.com) (206.190.49.252)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 30 Apr 2008 21:00:29 +0000
Received: (qmail 61347 invoked by uid 60001); 30 Apr 2008 21:00:42 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=YfOL4lHpCQ+1gpd+UkxH9SbDtRbGEIEH6GbBAR7uci8vPxPyTeNNTNWHzLy+LAWoXAJAySDk5+2CfvvWAODQV7hXwn0wJWHVnflmyPHVKrrVI8OTZnppCmc+x79JJSIfE7c8sdbhWrySb2fM6Nonr+11rTjz6Os1VEJO5OJOH4E=;
X-YMail-OSG: v5PpGDEVM1kF.qGIaHAXaTq62wX9hEtf.95YyJpLhuljowRBYfo9yeM5utpwJsvRwRTbEHvz4zx7Oox5V8nnR2NqIXGgPQ9fQgL28S...12pOHjwW.66Z23gxtE-
Received: from [12.162.3.126] by web52005.mail.re2.yahoo.com via HTTP; Wed, 30 Apr 2008 14:00:42 PDT
Date: Wed, 30 Apr 2008 14:00:42 -0700 (PDT)
From: Rajesh parab <rajesh_parab_1@yahoo.com>
Subject: Re: ParalleReader and synchronization between indexes
To: java-user@lucene.apache.org
In-Reply-To: <892313.15685.qm@web52001.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
Message-ID: <433761.59450.qm@web52005.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Guys,

Any comments on this?

I was looking into Lucene archive and came across this
thread what asks the same question.

http://www.gossamer-threads.com/lists/lucene/java-user/50477?search_string=parallelreader;#50477

Any pointers will be helpful.

Regards,
Rajesh

--- Rajesh parab <rajesh_parab_1@yahoo.com> wrote:

> Hi All,
> 
> Any suggestions/comments on my questions in this
> thread will be really helpful.
> 
> We are planning to use Lucene indexes throughout the
> application and exploring possibilites of
> partitioning
> data between multiple indexes.
> 
> Regards,
> Rajesh
> 
> --- Rajesh parab <rajesh_parab_1@yahoo.com> wrote:
> 
> > Hi,
> > 
> > This is from javadoc of ParallelReader:
> > 
> >
>
======================================================
> > 
> > An IndexReader which reads multiple, parallel
> > indexes.
> > Each index added must have the same number of
> > documents, but typically each contains different
> > fields. Each document contains the union of the
> > fields
> > of all documents with the same document number.
> When
> > searching, matches for a query term are from the
> > first
> > index added that has the field. 
> > 
> > This is useful, e.g., with collections that have
> > large
> > fields which change rarely and small fields that
> > change more frequently. The smaller fields may be
> > re-indexed in a new index and both indexes may be
> > searched together.
> > 
> >
>
======================================================
> > 
> > I have a similar use case as mentioned above and
> > hence
> > would like to use ParallelReader to search across
> > multiple indexes.
> > 
> > I have an object that has 50 fields. Out of these
> 50
> > fields, 45 are relatively static and other 5 are
> > modified very often. So, I am planning to
> partition
> > this objects data into 2 indexes such that 45
> static
> > fields will be part of one index and remaining 5
> > dynamic fields will constitute second index. While
> > generating the index for the first time, I can
> make
> > sure that the document order for documents inside
> > both
> > these indexes is same and hence ParallelReader
> will
> > work properly with it.
> > 
> > The question is -
> > What if the data inside second (smaller) index
> > changes? In order to update index document, I will
> > have to delete it and re-insert it again as Lucene
> > does not support document update. This action (of
> > delete and re-insert) will change internal
> document
> > id
> > for updated document inside second index and in
> > order
> > to sync it with first index, I will have to also
> > modify first (relatively big and static) index. If
> > we
> > will have to update both the indexes, how it is
> > different from having a single index with all the
> > fields? What is the use case in which
> ParallelReader
> > will get used? As per documentation, I was
> thinking
> > that it will apply for my use case, but
> > synchronizing
> > the indexes seems to be a problem.
> > 
> > Please help.
> > 
> > Regards,
> > Rajesh
> > 
> > 
> > 
> >      
> >
>
____________________________________________________________________________________
> > Be a better friend, newshound, and 
> > know-it-all with Yahoo! Mobile.  Try it now. 
> >
>
http://mobile.yahoo.com/;_ylt=Ahu06i62sR8HDtDypao8Wcj9tAcJ
> > 
> >
>
---------------------------------------------------------------------
> > To unsubscribe, e-mail:
> > java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail:
> > java-user-help@lucene.apache.org
> > 
> > 
> 
> 
> 
>      
>
____________________________________________________________________________________
> Be a better friend, newshound, and 
> know-it-all with Yahoo! Mobile.  Try it now. 
>
http://mobile.yahoo.com/;_ylt=Ahu06i62sR8HDtDypao8Wcj9tAcJ
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 



      ____________________________________________________________________________________
Be a better friend, newshound, and 
know-it-all with Yahoo! Mobile.  Try it now.  http://mobile.yahoo.com/;_ylt=Ahu06i62sR8HDtDypao8Wcj9tAcJ

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33850-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 30 21:49:19 2008
Return-Path: <java-user-return-33850-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5992 invoked from network); 30 Apr 2008 21:49:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Apr 2008 21:49:19 -0000
Received: (qmail 93156 invoked by uid 500); 30 Apr 2008 21:49:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93108 invoked by uid 500); 30 Apr 2008 21:49:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93097 invoked by uid 99); 30 Apr 2008 21:49:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Apr 2008 14:49:12 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.81] (HELO spunkymail-a20.g.dreamhost.com) (208.97.132.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Apr 2008 21:48:16 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a20.g.dreamhost.com (Postfix) with ESMTP id 31394E24FB
	for <java-user@lucene.apache.org>; Wed, 30 Apr 2008 14:48:35 -0700 (PDT)
Message-Id: <B0119116-E2D1-41B7-BA57-C1757F726AAB@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <433761.59450.qm@web52005.mail.re2.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: ParalleReader and synchronization between indexes
Date: Wed, 30 Apr 2008 17:48:33 -0400
References: <433761.59450.qm@web52005.mail.re2.yahoo.com>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Rajesh,

You are asking a fairly complicated question on a seldom used piece of  
functionality.  Constantly pinging the list is just making it less  
likely that someone will respond with an answer.  The likelihood that  
the 1 person who understand that code (and trust me, it really is  
likely very few people who know how to practically employ it) enough  
to give practical advice have read it in the time period you have  
alloted us to respond is next to nil.   We are all volunteers with day  
jobs.

Have you bothered to search the dev and user mailing list for  
information on the class in question?  I would look for threads from  
Doug or Chuck Williams.

-Grant


On Apr 30, 2008, at 5:00 PM, Rajesh parab wrote:

> Hi Guys,
>
> Any comments on this?
>
> I was looking into Lucene archive and came across this
> thread what asks the same question.
>
> http://www.gossamer-threads.com/lists/lucene/java-user/50477?search_string=parallelreader;#50477
>
> Any pointers will be helpful.
>
> Regards,
> Rajesh
>
> --- Rajesh parab <rajesh_parab_1@yahoo.com> wrote:
>
>> Hi All,
>>
>> Any suggestions/comments on my questions in this
>> thread will be really helpful.
>>
>> We are planning to use Lucene indexes throughout the
>> application and exploring possibilites of
>> partitioning
>> data between multiple indexes.
>>
>> Regards,
>> Rajesh
>>
>> --- Rajesh parab <rajesh_parab_1@yahoo.com> wrote:
>>
>>> Hi,
>>>
>>> This is from javadoc of ParallelReader:
>>>
>>>
>>
> ======================================================
>>>
>>> An IndexReader which reads multiple, parallel
>>> indexes.
>>> Each index added must have the same number of
>>> documents, but typically each contains different
>>> fields. Each document contains the union of the
>>> fields
>>> of all documents with the same document number.
>> When
>>> searching, matches for a query term are from the
>>> first
>>> index added that has the field.
>>>
>>> This is useful, e.g., with collections that have
>>> large
>>> fields which change rarely and small fields that
>>> change more frequently. The smaller fields may be
>>> re-indexed in a new index and both indexes may be
>>> searched together.
>>>
>>>
>>
> ======================================================
>>>
>>> I have a similar use case as mentioned above and
>>> hence
>>> would like to use ParallelReader to search across
>>> multiple indexes.
>>>
>>> I have an object that has 50 fields. Out of these
>> 50
>>> fields, 45 are relatively static and other 5 are
>>> modified very often. So, I am planning to
>> partition
>>> this objects data into 2 indexes such that 45
>> static
>>> fields will be part of one index and remaining 5
>>> dynamic fields will constitute second index. While
>>> generating the index for the first time, I can
>> make
>>> sure that the document order for documents inside
>>> both
>>> these indexes is same and hence ParallelReader
>> will
>>> work properly with it.
>>>
>>> The question is -
>>> What if the data inside second (smaller) index
>>> changes? In order to update index document, I will
>>> have to delete it and re-insert it again as Lucene
>>> does not support document update. This action (of
>>> delete and re-insert) will change internal
>> document
>>> id
>>> for updated document inside second index and in
>>> order
>>> to sync it with first index, I will have to also
>>> modify first (relatively big and static) index. If
>>> we
>>> will have to update both the indexes, how it is
>>> different from having a single index with all the
>>> fields? What is the use case in which
>> ParallelReader
>>> will get used? As per documentation, I was
>> thinking
>>> that it will apply for my use case, but
>>> synchronizing
>>> the indexes seems to be a problem.
>>>
>>> Please help.
>>>
>>> Regards,
>>> Rajesh
>>>
>>>
>>>
>>>
>>>
>>
> ____________________________________________________________________________________
>>> Be a better friend, newshound, and
>>> know-it-all with Yahoo! Mobile.  Try it now.
>>>
>>
> http://mobile.yahoo.com/;_ylt=Ahu06i62sR8HDtDypao8Wcj9tAcJ
>>>
>>>
>>
> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail:
>>> java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail:
>>> java-user-help@lucene.apache.org
>>>
>>>
>>
>>
>>
>>
>>
> ____________________________________________________________________________________
>> Be a better friend, newshound, and
>> know-it-all with Yahoo! Mobile.  Try it now.
>>
> http://mobile.yahoo.com/;_ylt=Ahu06i62sR8HDtDypao8Wcj9tAcJ
>>
>>
> ---------------------------------------------------------------------
>> To unsubscribe, e-mail:
>> java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail:
>> java-user-help@lucene.apache.org
>>
>>
>
>
>
>       
> ____________________________________________________________________________________
> Be a better friend, newshound, and
> know-it-all with Yahoo! Mobile.  Try it now.  http://mobile.yahoo.com/;_ylt=Ahu06i62sR8HDtDypao8Wcj9tAcJ
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ







---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33851-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 30 22:26:37 2008
Return-Path: <java-user-return-33851-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19046 invoked from network); 30 Apr 2008 22:26:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Apr 2008 22:26:37 -0000
Received: (qmail 38261 invoked by uid 500); 30 Apr 2008 22:26:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38196 invoked by uid 500); 30 Apr 2008 22:26:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38174 invoked by uid 99); 30 Apr 2008 22:26:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Apr 2008 15:26:27 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of price@strands.com designates 217.116.18.226 as permitted sender)
Received: from [217.116.18.226] (HELO mail.strands.com) (217.116.18.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Apr 2008 22:25:42 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail.strands.com (Postfix) with ESMTP id 2AAE03047A6
	for <java-user@lucene.apache.org>; Thu,  1 May 2008 00:25:55 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.mystrands.com
X-Spam-Score: -3.93
X-Spam-Level: 
Received: from mail.strands.com ([127.0.0.1])
	by localhost (mail.mystrands.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id ETknQyGZwZEZ for <java-user@lucene.apache.org>;
	Thu,  1 May 2008 00:25:52 +0200 (CEST)
Received: from [10.1.0.224] (unknown [70.99.209.10])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(Client did not present a certificate)
	(Authenticated sender: price)
	by mail.strands.com (Postfix) with ESMTP id DE1EE28B72F
	for <java-user@lucene.apache.org>; Thu,  1 May 2008 00:25:51 +0200 (CEST)
Message-Id: <E51DD1AB-00FC-4ED6-9AA0-51D50F4A8897@strands.com>
From: Preston Price <price@strands.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=Apple-Mail-1--641084620
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Simple query API question
Date: Wed, 30 Apr 2008 16:25:49 -0600
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Flag: NO
X-Old-Spam-Status: No, score=-3.93 required=3 tests=[ALL_TRUSTED=-1.8, AWL=0.370,
	BAYES_00=-3.5, HTML_MESSAGE=1]

--Apple-Mail-1--641084620
Content-Type: text/plain;
	charset=US-ASCII;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: 7bit

This should be a pretty easy question to answer but I haven't been  
able to figure out how to do this with the API.

I want to search two fields in my index; field 1 is and ID, field 2 is  
a date of the form yyyymmdd.
Now I can write a query string by hand to do a search like this on  
both fields: "field1:(x or y or z) AND field2:[20080400 TO 20080500]"
But I don't see how to generate an equivalent query using the API.

Thanks in advance!

Preston Price
price@strands.com


--Apple-Mail-1--641084620--

From java-user-return-33852-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 30 23:06:51 2008
Return-Path: <java-user-return-33852-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32321 invoked from network); 30 Apr 2008 23:06:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Apr 2008 23:06:51 -0000
Received: (qmail 76870 invoked by uid 500); 30 Apr 2008 23:06:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76839 invoked by uid 500); 30 Apr 2008 23:06:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76828 invoked by uid 99); 30 Apr 2008 23:06:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Apr 2008 16:06:45 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 66.249.82.225 as permitted sender)
Received: from [66.249.82.225] (HELO wx-out-0506.google.com) (66.249.82.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Apr 2008 23:05:59 +0000
Received: by wx-out-0506.google.com with SMTP id i28so771789wxd.20
        for <java-user@lucene.apache.org>; Wed, 30 Apr 2008 16:06:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:subject:from:to:in-reply-to:references:content-type:date:message-id:mime-version:x-mailer:content-transfer-encoding;
        bh=74vpERhWU3IPzihJWjcnMDIGdmelY7TtT4LoYjHhO4c=;
        b=a/AQ/tyaLjZmF0Ds41NYqM/OOCjsWj73LK1GmiLuipGa9EZ270qZOHhlqO/1ULWxnL41qVGdQrpqAndoyf7gEK2CxxQmz2OSdiodwfRW8dPGHeEOZW9TzvJrqZoXRs/584WTaO1w6pjTCF7MuSu9whGu/eOL9fzZWLiCoAfZ050=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=subject:from:to:in-reply-to:references:content-type:date:message-id:mime-version:x-mailer:content-transfer-encoding;
        b=kOoq6LDAgdJLgQx24ZfQPf2jLZBdGKggvFeqjuVH8VgQVuRi7QHsYNKW23aO+6dgY7JsjIAZFrt9Cn/kDDM+xQhkD36YrfeaRacMkB3wRIwO1rg5qArXPZi83tfV1Jxaan1ORF91aFI9ostj4ZuAccDOiP1hcdXLL/iSjsxyR2Y=
Received: by 10.90.119.20 with SMTP id r20mr1837630agc.60.1209596773305;
        Wed, 30 Apr 2008 16:06:13 -0700 (PDT)
Received: from ?192.168.1.104? ( [209.134.38.5])
        by mx.google.com with ESMTPS id 8sm2227185agd.21.2008.04.30.16.06.11
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 30 Apr 2008 16:06:11 -0700 (PDT)
Subject: Re: Simple query API question
From: Mark Miller <markrmiller@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <E51DD1AB-00FC-4ED6-9AA0-51D50F4A8897@strands.com>
References: <E51DD1AB-00FC-4ED6-9AA0-51D50F4A8897@strands.com>
Content-Type: text/plain
Date: Wed, 30 Apr 2008 19:06:10 -0400
Message-Id: <1209596770.6402.18.camel@m-laptop>
Mime-Version: 1.0
X-Mailer: Evolution 2.22.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

When using the API you will create a Term object that specifies the
field for each term...so visually its more like field1:x or field1:y or
field1:z
and then a rangequery set to field2, all joined using the BooleanQuery
object setting Occur.must Occur.should Occur.mustnot.

Take a look at the range of classes that extend Query. Start with
TermQuery and BooleanQuery.

- mark

On Wed, 2008-04-30 at 16:25 -0600, Preston Price wrote:
> This should be a pretty easy question to answer but I haven't been  
> able to figure out how to do this with the API.
> 
> I want to search two fields in my index; field 1 is and ID, field 2 is  
> a date of the form yyyymmdd.
> Now I can write a query string by hand to do a search like this on  
> both fields: "field1:(x or y or z) AND field2:[20080400 TO 20080500]"
> But I don't see how to generate an equivalent query using the API.
> 
> Thanks in advance!
> 
> Preston Price
> price@strands.com
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33853-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 30 23:12:54 2008
Return-Path: <java-user-return-33853-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33722 invoked from network); 30 Apr 2008 23:12:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Apr 2008 23:12:53 -0000
Received: (qmail 80475 invoked by uid 500); 30 Apr 2008 23:12:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80434 invoked by uid 500); 30 Apr 2008 23:12:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80423 invoked by uid 99); 30 Apr 2008 23:12:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Apr 2008 16:12:47 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Apr 2008 23:11:55 +0000
Received: from host68.syd.nuix.com.au (host68.syd.nuix.com.au [192.168.222.68])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id B870E4A826C
	for <java-user@lucene.apache.org>; Thu,  1 May 2008 09:13:07 +1000 (EST)
From: Daniel Noll <daniel@nuix.com>
Organization: Nuix Pty Ltd
To: java-user@lucene.apache.org
Subject: Re: Does Lucene Supports Billions of data
Date: Thu, 1 May 2008 09:10:04 +1000
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <16974808.post@talk.nabble.com> <5e76f3840804300646y7d230aa3xb7827193fe441b4d@mail.gmail.com> <8837fb770804300701v74791ce0h6c1bf359b801e473@mail.gmail.com>
In-Reply-To: <8837fb770804300701v74791ce0h6c1bf359b801e473@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200805010910.04480.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Thursday 01 May 2008 00:01:48 John Wang wrote:
> I am not sure how well lucene would perform with > 2 Billion docs in a
> single index anyway.

Even if they're in multiple indexes, the doc IDs being ints will still prevent 
it going past 2Gi unless you wrap your own framework around it.

Daniel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


