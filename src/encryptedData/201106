From java-user-return-49861-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun  1 12:27:55 2011
Return-Path: <java-user-return-49861-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C8C226D21
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  1 Jun 2011 12:27:55 +0000 (UTC)
Received: (qmail 27420 invoked by uid 500); 1 Jun 2011 12:27:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27369 invoked by uid 500); 1 Jun 2011 12:27:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27361 invoked by uid 99); 1 Jun 2011 12:27:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Jun 2011 12:27:52 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of richard.marr@gmail.com designates 209.85.213.48 as permitted sender)
Received: from [209.85.213.48] (HELO mail-yw0-f48.google.com) (209.85.213.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Jun 2011 12:27:46 +0000
Received: by ywk9 with SMTP id 9so3380498ywk.35
        for <java-user@lucene.apache.org>; Wed, 01 Jun 2011 05:27:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to:cc
         :content-type;
        bh=P/SLJQLEz7QaCm3MAD8XrSiRKLgm70VLZdMaSm1cNMM=;
        b=asiXutWxbZoI+rw+rzd/itTRw/MCpw1JN0NVd1gnPaqkxFOC9mS3LNVZAbW1Y0nBUM
         IkBffKAwh4AaUQqfm/tFQNAp3kSkgWfo9Tjr6pdqIWlngFsuWtvqiKLvbuRVwA5VTmov
         eSj6X6dlSkIi4BmDjSEgbwhEKLwN5YZoTIttg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:cc:content-type;
        b=dvfaS0YS1m6zXltn0eoZKgXzkxyLb4Vn+IZ7lssh+U+3k/z2eYGrCasp7sm8JL3CkV
         eQOMiV93Ovodq77nEpuaChBZDs2PMHT1j8KQzJfL3hTSgdPW2efnPyMdd6BF7xat9ncJ
         P5teI7a0A5UVtv/x/e0cNKa/1HLcri4t8tVHg=
MIME-Version: 1.0
Received: by 10.146.159.34 with SMTP id h34mr6050070yae.24.1306931245204; Wed,
 01 Jun 2011 05:27:25 -0700 (PDT)
Received: by 10.147.125.5 with HTTP; Wed, 1 Jun 2011 05:27:25 -0700 (PDT)
Date: Wed, 1 Jun 2011 13:27:25 +0100
Message-ID: <BANLkTinG+jqXa+g2eW1cnUQZwZbLF5Ke2w@mail.gmail.com>
Subject: London open source search social - 13th June
From: Richard Marr <richard.marr@gmail.com>
To: users@elasticsearch.com, java-user@lucene.apache.org, 
	katta-developer@lists.sourceforge.net
Cc: =?ISO-8859-1?Q?Ren=E9_Kriegler?= <rk@rene-kriegler.de>
Content-Type: multipart/alternative; boundary=000e0cd2c0869dc56a04a4a5a455
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd2c0869dc56a04a4a5a455
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hi guys,

Just to let you know we're meeting up to talk all-things-search on Monday
13th June. There's usually a good mix of backgrounds and experience levels
so if you're free and in the London area then it'd be good to see you there=
.

Details:
7pm - The Elgin - 96 Ladbrooke Grove
http://www.meetup.com/london-search-social/events/20387881/

----

Greetings search geeks!

We've booked the next meetup for the 13th June. As usual, the plan is to
meet up and geek out over a friendly beer.

I know my co-organiser Ren=E9 has been working on some interesting search
projects, and I've recently left Empora to work on my own project so by Jun=
e
I should hopefully have some war stories about using @elasticsearch in
production. The format is completely open though so please bring your own
topics if you've got them.

Hope to see you there!

--
Richard Marr

--000e0cd2c0869dc56a04a4a5a455--

From java-user-return-49862-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun  1 16:09:26 2011
Return-Path: <java-user-return-49862-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 31DCF6009
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  1 Jun 2011 16:09:26 +0000 (UTC)
Received: (qmail 44925 invoked by uid 500); 1 Jun 2011 16:09:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44889 invoked by uid 500); 1 Jun 2011 16:09:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44881 invoked by uid 99); 1 Jun 2011 16:09:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Jun 2011 16:09:23 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of oleole@163.com designates 220.181.13.31 as permitted sender)
Received: from [220.181.13.31] (HELO m13-31.163.com) (220.181.13.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Jun 2011 16:09:14 +0000
Received: from oleole ( [12.186.229.30] ) by ajax-webmail-wmsvr31 (Coremail)
 ; Thu, 2 Jun 2011 00:08:48 +0800 (CST)
Date: Thu, 2 Jun 2011 00:08:48 +0800 (CST)
From: oleole <oleole@163.com>
To: java-user@lucene.apache.org
Message-ID: <1628a83.233.1304bf6e0d1.Coremail.oleole@163.com>
Subject: best way to update custom fieldcache after index commit?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_190425_396795094.1306944528593"
X-Originating-IP: [12.186.229.30]
X-Priority: 3
X-Mailer: Coremail Webmail Server Version SP_ntes V3.5 build
 110215(12912.3637.3636) Copyright (c) 2002-2011 www.mailtech.cn 163com
X-CM-CTRLDATA: sMI/J2Zvb3Rlcl9odG09MTM2ODo4MQ==
X-CM-TRANSID:H8GowKALbvIRZOZNFKIrAA--.4659W
X-CM-SenderInfo: proh0zrh6rljoofrz/1tbiLgVRvk0vIeHvWQAAsQ
X-Coremail-Antispam: 1U5529EdanIXcx71UUUUU7vcSsGvfC2KfnxnUU==
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_190425_396795094.1306944528593
Content-Type: text/plain; charset=GBK
Content-Transfer-Encoding: 7bit

Hi, 


We use Solr, but this seems more like a lucene related issue. So we use lucene fieldcache to like this 
static DocTerms myfieldvalues = org.apache.lucene.search.FieldCache.DEFAULT.getTerms(reader, "myField");
which is initialized at first use and will stay in memory for fast retrieval of field values based on DocID


The problem is after an index/commit, the lucene fieldcache is reloaded in the new searcher, but this static list need to updated as well,  what is the best way to handle this? Basically we want to update those custom filedcache whenever there is a commit. The possible solution I can think of:


1) manually call an request handler to clean up those custom stuffs after commit, which is a hack and ugly.
2) use some listener event (not sure whether I can use newSearcher event listener in Solr); also there seems to be a lucene ticket (https://issues.apache.org/jira/browse/LUCENE-2474, Allow to plug in a Cache Eviction Listener to IndexReader to eagerly clean custom caches that use the IndexReader (getFieldCacheKey)), not clear to me how to use it though


Any of your suggestion/comments is much appreciated. Thanks!


oleole




------=_Part_190425_396795094.1306944528593--


From java-user-return-49863-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun  1 17:27:00 2011
Return-Path: <java-user-return-49863-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 517DF6F6F
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  1 Jun 2011 17:27:00 +0000 (UTC)
Received: (qmail 37632 invoked by uid 500); 1 Jun 2011 17:26:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37585 invoked by uid 500); 1 Jun 2011 17:26:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37577 invoked by uid 99); 1 Jun 2011 17:26:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Jun 2011 17:26:57 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of harshcode@gmail.com designates 209.85.210.176 as permitted sender)
Received: from [209.85.210.176] (HELO mail-iy0-f176.google.com) (209.85.210.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Jun 2011 17:26:51 +0000
Received: by iym1 with SMTP id 1so21946iym.35
        for <java-user@lucene.apache.org>; Wed, 01 Jun 2011 10:26:31 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=d+cL3qx60f7O+aA4teGVifahLajjo6I92ndhSagJ+Vo=;
        b=kgveUJZ5BnDX9IbSAx07ie9uVvbP+wNYmYu7GG+1MgwzkD007zWw9K9We/ANCzHXKQ
         c5q7mCNW+WYKqju5EU8RNS7RMw1GAdp8XCZkfK64RNVErbGwF/CP9s/YaO1W5d+K9cWi
         oso2ArPhuXOwthhRJatYtu268kZ0a6NAoZJzU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=tx3bK+9Lb/Rjq5p56VntLG+uDo3vxrPxCXnO2H6IHxkXe5cEz8DXfXY+asJvQhqO+D
         p922muOthJJS5+5A4T91BloitDhJaywWONvbwBgO6hFVZP26G6a62cKypdx+NAqJ3FxA
         XXfQDJigBDTKlgc6rujVo0h43/iS2T+XNRUDU=
MIME-Version: 1.0
Received: by 10.42.146.2 with SMTP id h2mr4235524icv.406.1306949191105; Wed,
 01 Jun 2011 10:26:31 -0700 (PDT)
Received: by 10.42.189.4 with HTTP; Wed, 1 Jun 2011 10:26:31 -0700 (PDT)
In-Reply-To: <BANLkTimPTxOHByk55tctxpF4ptVjdtPt3Q@mail.gmail.com>
References: <BANLkTimPTxOHByk55tctxpF4ptVjdtPt3Q@mail.gmail.com>
Date: Wed, 1 Jun 2011 22:56:31 +0530
Message-ID: <BANLkTinF8NE77R3wCaUCEgWArpjFL0rX4g@mail.gmail.com>
Subject: Phrase queries taking more time
From: harsh srivastava <harshcode@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=90e6ba6e8abe467b1804a4a9d271

--90e6ba6e8abe467b1804a4a9d271
Content-Type: text/plain; charset=ISO-8859-1

Hi all,

we have a 20gb lucene index size. We are using lucene 3.1. For
business reasons, if a user searches  suppose for java, we also have
to search its synonyms "core java".
so the query looks like below:
title:(java "core java")
we have approx 500 synonyms set, each having 3 to 5 phrases.
Now the  problem is these kind of phrase queries taking more than 10 sec
time.

can any one show some light how to reduce the search time.

--90e6ba6e8abe467b1804a4a9d271--

From java-user-return-49864-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun  1 17:55:59 2011
Return-Path: <java-user-return-49864-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 46AD260DC
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  1 Jun 2011 17:55:59 +0000 (UTC)
Received: (qmail 74481 invoked by uid 500); 1 Jun 2011 17:55:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74424 invoked by uid 500); 1 Jun 2011 17:55:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74416 invoked by uid 99); 1 Jun 2011 17:55:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Jun 2011 17:55:56 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Jun 2011 17:55:49 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 0DCD7D3600A
	for <java-user@lucene.apache.org>; Wed,  1 Jun 2011 19:55:29 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id ewM-lOvAvSid for <java-user@lucene.apache.org>;
	Wed,  1 Jun 2011 19:55:24 +0200 (CEST)
Received: from VEGA (port-92-196-130-188.dynamic.qsc.de [92.196.130.188])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id BAF8DD36005
	for <java-user@lucene.apache.org>; Wed,  1 Jun 2011 19:55:23 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <BANLkTimPTxOHByk55tctxpF4ptVjdtPt3Q@mail.gmail.com> <BANLkTinF8NE77R3wCaUCEgWArpjFL0rX4g@mail.gmail.com>
In-Reply-To: <BANLkTinF8NE77R3wCaUCEgWArpjFL0rX4g@mail.gmail.com>
Subject: RE: Phrase queries taking more time
Date: Wed, 1 Jun 2011 19:55:52 +0200
Message-ID: <00e001cc2085$2643f9b0$72cbed10$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQI40ohNu9ctg5fmp/gQpBJm1B7wbgHLsWzrk8EHPQA=
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

this is a bug in 3.1, which will be fixed in the coming version 3.2, see:

https://issues.apache.org/jira/browse/LUCENE-3054

You can also checkout the 3.1 branch, where it is also fixed (for a possible
3.1.1 version, which will not come).

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: harsh srivastava [mailto:harshcode@gmail.com]
> Sent: Wednesday, June 01, 2011 7:27 PM
> To: java-user@lucene.apache.org
> Subject: Phrase queries taking more time
> 
> Hi all,
> 
> we have a 20gb lucene index size. We are using lucene 3.1. For business
> reasons, if a user searches  suppose for java, we also have to search its
> synonyms "core java".
> so the query looks like below:
> title:(java "core java")
> we have approx 500 synonyms set, each having 3 to 5 phrases.
> Now the  problem is these kind of phrase queries taking more than 10 sec
> time.
> 
> can any one show some light how to reduce the search time.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49865-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun  1 18:09:22 2011
Return-Path: <java-user-return-49865-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C27AE6A71
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  1 Jun 2011 18:09:22 +0000 (UTC)
Received: (qmail 99904 invoked by uid 500); 1 Jun 2011 18:09:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99848 invoked by uid 500); 1 Jun 2011 18:09:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99840 invoked by uid 99); 1 Jun 2011 18:09:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Jun 2011 18:09:20 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of harshcode@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Jun 2011 18:09:15 +0000
Received: by iwr19 with SMTP id 19so80438iwr.35
        for <java-user@lucene.apache.org>; Wed, 01 Jun 2011 11:08:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=zQ2gCvNRXBoZ5GtXBKN69SiDWLq0Z/V7Bz9gQKq+PAQ=;
        b=cgidvDxxisl14cUvcDXevicAM4Jg8SZI+9as6bq9wbyXd7EurzG0P2+xSn9lnWA/sl
         aY1FtJc1jxs2TA1g51kst3+f9jX3CnWoBWSIvD7hHOYyVsjgM9PexzgpcfHkxC3QhV2f
         TIns56maC1l/OgNcrY5/HrKJMJpwZw+8nlN2I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=bdKScqatIJOzrDqDdJEOghPofrnWdZXQq9E0B0Xjby5P/5vI1ZyKS09s0vX+WziS97
         qQ+iOUjDPMPj/McfIttt0+Kvqi/8APFGZodudsiOi553TzMAfvz+K635BW/QDfm1xA1Q
         F2GGC1aMcHTTAgFfGg0Fcj8+V0eYGOq9xa3k4=
MIME-Version: 1.0
Received: by 10.43.132.66 with SMTP id ht2mr14231686icc.339.1306951734531;
 Wed, 01 Jun 2011 11:08:54 -0700 (PDT)
Received: by 10.42.189.4 with HTTP; Wed, 1 Jun 2011 11:08:54 -0700 (PDT)
In-Reply-To: <00e001cc2085$2643f9b0$72cbed10$@thetaphi.de>
References: <BANLkTimPTxOHByk55tctxpF4ptVjdtPt3Q@mail.gmail.com>
	<BANLkTinF8NE77R3wCaUCEgWArpjFL0rX4g@mail.gmail.com>
	<00e001cc2085$2643f9b0$72cbed10$@thetaphi.de>
Date: Wed, 1 Jun 2011 23:38:54 +0530
Message-ID: <BANLkTimyLc2UoMCoDwHXz_ofENZh6Fhyjw@mail.gmail.com>
Subject: Re: Phrase queries taking more time
From: harsh srivastava <harshcode@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf307f31fee017ad04a4aa692b

--20cf307f31fee017ad04a4aa692b
Content-Type: text/plain; charset=ISO-8859-1

Hi,

Thanks a lot Uwe.
When can I expect new release?
Till the next release what are the option except using 3.0.3.


Harsh

On Wed, Jun 1, 2011 at 11:25 PM, Uwe Schindler <uwe@thetaphi.de> wrote:

> Hi,
>
> this is a bug in 3.1, which will be fixed in the coming version 3.2, see:
>
> https://issues.apache.org/jira/browse/LUCENE-3054
>
> You can also checkout the 3.1 branch, where it is also fixed (for a
> possible
> 3.1.1 version, which will not come).
>
> Uwe
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
>
> > -----Original Message-----
> > From: harsh srivastava [mailto:harshcode@gmail.com]
> > Sent: Wednesday, June 01, 2011 7:27 PM
> > To: java-user@lucene.apache.org
> > Subject: Phrase queries taking more time
> >
> > Hi all,
> >
> > we have a 20gb lucene index size. We are using lucene 3.1. For business
> > reasons, if a user searches  suppose for java, we also have to search its
> > synonyms "core java".
> > so the query looks like below:
> > title:(java "core java")
> > we have approx 500 synonyms set, each having 3 to 5 phrases.
> > Now the  problem is these kind of phrase queries taking more than 10 sec
> > time.
> >
> > can any one show some light how to reduce the search time.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--20cf307f31fee017ad04a4aa692b--

From java-user-return-49866-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun  1 18:15:46 2011
Return-Path: <java-user-return-49866-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 68DD46DD9
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  1 Jun 2011 18:15:46 +0000 (UTC)
Received: (qmail 13970 invoked by uid 500); 1 Jun 2011 18:15:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13921 invoked by uid 500); 1 Jun 2011 18:15:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13912 invoked by uid 99); 1 Jun 2011 18:15:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Jun 2011 18:15:44 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Jun 2011 18:15:37 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 8C176D3600A
	for <java-user@lucene.apache.org>; Wed,  1 Jun 2011 20:15:16 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id nfEzaUIGzSjx for <java-user@lucene.apache.org>;
	Wed,  1 Jun 2011 20:15:11 +0200 (CEST)
Received: from VEGA (port-92-196-130-188.dynamic.qsc.de [92.196.130.188])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 41808D36005
	for <java-user@lucene.apache.org>; Wed,  1 Jun 2011 20:15:11 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <BANLkTimPTxOHByk55tctxpF4ptVjdtPt3Q@mail.gmail.com>	<BANLkTinF8NE77R3wCaUCEgWArpjFL0rX4g@mail.gmail.com>	<00e001cc2085$2643f9b0$72cbed10$@thetaphi.de> <BANLkTimyLc2UoMCoDwHXz_ofENZh6Fhyjw@mail.gmail.com>
In-Reply-To: <BANLkTimyLc2UoMCoDwHXz_ofENZh6Fhyjw@mail.gmail.com>
Subject: RE: Phrase queries taking more time
Date: Wed, 1 Jun 2011 20:15:39 +0200
Message-ID: <00ee01cc2087$ea028810$be079830$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQI40ohNu9ctg5fmp/gQpBJm1B7wbgHLsWzrAU9spzgBCBtZXZOuUC6Q
Content-Language: de

Hi,

You should first try out, if this really solves your issue, I was just
guessing, because this bug related to such problems of PhraseQuery taking
long, which was fixed by myself.

So I would recommend to try out the release candidate of Lucene 3.2:
http://s.apache.org/lusolr32rc2 (this is the latest RC). If all went fine,
this version will be released in about a week.

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: harsh srivastava [mailto:harshcode@gmail.com]
> Sent: Wednesday, June 01, 2011 8:09 PM
> To: java-user@lucene.apache.org
> Subject: Re: Phrase queries taking more time
> 
> Hi,
> 
> Thanks a lot Uwe.
> When can I expect new release?
> Till the next release what are the option except using 3.0.3.
> 
> 
> Harsh
> 
> On Wed, Jun 1, 2011 at 11:25 PM, Uwe Schindler <uwe@thetaphi.de> wrote:
> 
> > Hi,
> >
> > this is a bug in 3.1, which will be fixed in the coming version 3.2,
see:
> >
> > https://issues.apache.org/jira/browse/LUCENE-3054
> >
> > You can also checkout the 3.1 branch, where it is also fixed (for a
> > possible
> > 3.1.1 version, which will not come).
> >
> > Uwe
> >
> > -----
> > Uwe Schindler
> > H.-H.-Meier-Allee 63, D-28213 Bremen
> > http://www.thetaphi.de
> > eMail: uwe@thetaphi.de
> >
> >
> > > -----Original Message-----
> > > From: harsh srivastava [mailto:harshcode@gmail.com]
> > > Sent: Wednesday, June 01, 2011 7:27 PM
> > > To: java-user@lucene.apache.org
> > > Subject: Phrase queries taking more time
> > >
> > > Hi all,
> > >
> > > we have a 20gb lucene index size. We are using lucene 3.1. For
> > > business reasons, if a user searches  suppose for java, we also have
> > > to search its synonyms "core java".
> > > so the query looks like below:
> > > title:(java "core java")
> > > we have approx 500 synonyms set, each having 3 to 5 phrases.
> > > Now the  problem is these kind of phrase queries taking more than 10
> > > sec time.
> > >
> > > can any one show some light how to reduce the search time.
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49867-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun  1 20:35:42 2011
Return-Path: <java-user-return-49867-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 749946041
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  1 Jun 2011 20:35:42 +0000 (UTC)
Received: (qmail 16587 invoked by uid 500); 1 Jun 2011 20:35:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16529 invoked by uid 500); 1 Jun 2011 20:35:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16521 invoked by uid 99); 1 Jun 2011 20:35:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Jun 2011 20:35:39 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of alexander.rosemann@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Jun 2011 20:35:32 +0000
Received: by wwi18 with SMTP id 18so143781wwi.5
        for <java-user@lucene.apache.org>; Wed, 01 Jun 2011 13:35:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:message-id:date:from:user-agent:mime-version:to
         :subject:content-type:content-transfer-encoding;
        bh=QANTRK5wddFTGdskB4DfxKuHmB9sawU/XlqDxt429dU=;
        b=bsI7eOKso6t2RZN6gDZZkOeR0cqLRrqwC0z2zthvXs/Iyfxs3CKsSaLtH1wCJT1311
         KJfx2eij6CoVL2Ss4wxvIceKTwmVYpVNxpAWVfGQxAZN0fjzlHajMQhpfjc4VGrF+kO1
         V//4ozyOkfOykevaN67sx46ohjBmIQwZile+M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject
         :content-type:content-transfer-encoding;
        b=UpA0x9Vz+2D8sbfmBmRZBpywJYHWFOoNPm+h0CmFWkX9CTtlYCs6xN7YWcFbledY5a
         T0z8ol81iQzv7X+2uejhQ4zHY5SEFGhEmznvDqR4ORicpzHuPbtJMrr3pCr8U7dYoDJX
         YBPG3iqvrAafy9jMpaezQMbWShzdg8Iw69ReY=
Received: by 10.216.237.155 with SMTP id y27mr487016weq.82.1306960510275;
        Wed, 01 Jun 2011 13:35:10 -0700 (PDT)
Received: from [10.64.58.100] ([90.146.67.182])
        by mx.google.com with ESMTPS id f60sm843476wef.37.2011.06.01.13.35.09
        (version=TLSv1/SSLv3 cipher=OTHER);
        Wed, 01 Jun 2011 13:35:09 -0700 (PDT)
Message-ID: <4DE6A278.4030002@gmail.com>
Date: Wed, 01 Jun 2011 22:35:04 +0200
From: Alexander Rosemann <alexander.rosemann@gmail.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-GB; rv:1.9.2.17) Gecko/20110414 Lightning/1.0b2 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: multiple small indexes or one big index?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Hi all, I was wondering whether you could give me some advice on how to 
improve my search performance.

I have 90 lucene indexes, each having different fields (~5 per 
Document). When I search, I always have to go through all indexes to 
build my result set. Searching one index takes approx. 100ms, thus 
searching all indexes takes 9s in total.

How can I reduce the time it needs to search?

I decided to create this many indexes because putting all data in one 
index would mean that a document would have ~400 fields, with most of 
them left empty. Is that ok? Would a single index be faster compared to 
multiple small ones?

Any pointers are much appreciated.

Regards,
Alex

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49868-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun  1 21:26:50 2011
Return-Path: <java-user-return-49868-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 58F866282
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  1 Jun 2011 21:26:50 +0000 (UTC)
Received: (qmail 33037 invoked by uid 500); 1 Jun 2011 21:26:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32990 invoked by uid 500); 1 Jun 2011 21:26:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32982 invoked by uid 99); 1 Jun 2011 21:26:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Jun 2011 21:26:47 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Jun 2011 21:26:39 +0000
Received: by qwj9 with SMTP id 9so173660qwj.35
        for <java-user@lucene.apache.org>; Wed, 01 Jun 2011 14:26:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=r260Jm4+m46JIKS6tib+JFoflIHp7VI8nmeeJYLFgEY=;
        b=LouAe03eveZKD3zb/dyupQmvMUElHkYbVwXnZ3ubP1L+bH86/VU6gtHCq7cVQbpZTJ
         7Htw+79UO7NuWmtvININbqYc/eyjbP7Zq0mdtVi+V4q/MG9F/qt2nnZottKxVZas072F
         1hFlZqQ48XxyuNI1fB63Jxi6d84ZcSzuKIrZk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=ZAVxaO8RMtOKcafOwOruYuYZzsF+6p+CYn5P+B7CxVXVql9vkxhEw94ZdOPYUG7dus
         QK1TBsNKZ9YoZEcrJaI2hoqzNxPK9NN38wztJOOz2fxRBkF1voLa2GQAMG2eiFrhi6IV
         +8HNIVKcN5P7cI0+JzEFMsppWgZmNosQkVJm0=
MIME-Version: 1.0
Received: by 10.229.251.13 with SMTP id mq13mr5732512qcb.36.1306963578964;
 Wed, 01 Jun 2011 14:26:18 -0700 (PDT)
Received: by 10.229.95.202 with HTTP; Wed, 1 Jun 2011 14:26:18 -0700 (PDT)
In-Reply-To: <4DE6A278.4030002@gmail.com>
References: <4DE6A278.4030002@gmail.com>
Date: Wed, 1 Jun 2011 17:26:18 -0400
Message-ID: <BANLkTi=8AvxMeF86mMBhkA1j5rxHi-VgyQ@mail.gmail.com>
Subject: Re: multiple small indexes or one big index?
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

I'd start by putting them all in one index. There's no penalty
in Lucene for having empty fields in a document, unlike an
RDBMS.

Alternately, if you're opening then closing searchers each
time, that's very expensive. Could you open the searchers
once and keep them open (all 90 of them)? That alone might
do the trick and be less of a change to your program. You
could also fire multiple threads at the searches, but check if
you're CPU bound first (if you are, multiple threads won't
help much/at all).

You haven't said how big these indexes are nor how many
documents you're talking about here, so this advice is suspect.

Do look at putting it all in one index though, let us know if you
have some data indicating how big stuff is/would be.

Best
Erick

On Wed, Jun 1, 2011 at 4:35 PM, Alexander Rosemann
<alexander.rosemann@gmail.com> wrote:
> Hi all, I was wondering whether you could give me some advice on how to
> improve my search performance.
>
> I have 90 lucene indexes, each having different fields (~5 per Document).
> When I search, I always have to go through all indexes to build my result
> set. Searching one index takes approx. 100ms, thus searching all indexes
> takes 9s in total.
>
> How can I reduce the time it needs to search?
>
> I decided to create this many indexes because putting all data in one index
> would mean that a document would have ~400 fields, with most of them left
> empty. Is that ok? Would a single index be faster compared to multiple small
> ones?
>
> Any pointers are much appreciated.
>
> Regards,
> Alex
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49869-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun  1 21:37:56 2011
Return-Path: <java-user-return-49869-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E1F856A22
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  1 Jun 2011 21:37:56 +0000 (UTC)
Received: (qmail 49663 invoked by uid 500); 1 Jun 2011 21:37:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49621 invoked by uid 500); 1 Jun 2011 21:37:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49613 invoked by uid 99); 1 Jun 2011 21:37:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Jun 2011 21:37:54 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of alexander.rosemann@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Jun 2011 21:37:45 +0000
Received: by wyb40 with SMTP id 40so346238wyb.35
        for <java-user@lucene.apache.org>; Wed, 01 Jun 2011 14:37:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:message-id:date:from:user-agent:mime-version:to
         :subject:references:in-reply-to:content-type
         :content-transfer-encoding;
        bh=S/p3M/iYsAOJMC0PFRl4bRhcZ+EmPb/jtIsHr9cN+TM=;
        b=rFjx0n4rFRzsGPWQiYxjpA6CMJow9cZzhgLqnr0HU7dGbitfpTr8buej+er0nZmTQ6
         EKrGB5p6n8bX+KIRPJBumjhNdNCb2jxFsr4z+I1PFq43xv4b3MVJQHxWYzwmhRsIbVIh
         m/808LMJPLhVo16nCf7NhqgeGmAx6kdotORcE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=SL9oHV8BdWwRHFo7/x51l6h8q2p2XKJi8XsQCEpjuyzTgcLG8e7DbnULT5nxYuRmUp
         prT4H63iF5evoTYX9i/QgjbABcKYs7tszmrZIGCgxIfZ0Fg9/i6amKCmCe0gdH9Lc9yh
         QRDOM1HptMvNG7qBRUx9tKIjRcCfotdasM06U=
Received: by 10.216.143.88 with SMTP id k66mr1649514wej.15.1306964245126;
        Wed, 01 Jun 2011 14:37:25 -0700 (PDT)
Received: from [10.64.58.100] ([90.146.67.182])
        by mx.google.com with ESMTPS id g2sm868523weg.38.2011.06.01.14.37.23
        (version=TLSv1/SSLv3 cipher=OTHER);
        Wed, 01 Jun 2011 14:37:24 -0700 (PDT)
Message-ID: <4DE6B10F.7090207@gmail.com>
Date: Wed, 01 Jun 2011 23:37:19 +0200
From: Alexander Rosemann <alexander.rosemann@gmail.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-GB; rv:1.9.2.17) Gecko/20110414 Lightning/1.0b2 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: multiple small indexes or one big index?
References: <4DE6A278.4030002@gmail.com> <BANLkTi=8AvxMeF86mMBhkA1j5rxHi-VgyQ@mail.gmail.com>
In-Reply-To: <BANLkTi=8AvxMeF86mMBhkA1j5rxHi-VgyQ@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Many thanks for the tips, Erick! I do close each searcher after a 
search... I will change that first thing tmrw. and let you know how that 
went. Multi-threaded searching will be next and if that hasn't helped, I 
will switch to one big index.
All indexes together are rather small, ~200MB and 50.000 documents.

-Alex

On 01.06.2011 23:26, Erick Erickson wrote:
> I'd start by putting them all in one index. There's no penalty
> in Lucene for having empty fields in a document, unlike an
> RDBMS.
>
> Alternately, if you're opening then closing searchers each
> time, that's very expensive. Could you open the searchers
> once and keep them open (all 90 of them)? That alone might
> do the trick and be less of a change to your program. You
> could also fire multiple threads at the searches, but check if
> you're CPU bound first (if you are, multiple threads won't
> help much/at all).
>
> You haven't said how big these indexes are nor how many
> documents you're talking about here, so this advice is suspect.
>
> Do look at putting it all in one index though, let us know if you
> have some data indicating how big stuff is/would be.
>
> Best
> Erick
>
> On Wed, Jun 1, 2011 at 4:35 PM, Alexander Rosemann
> <alexander.rosemann@gmail.com>  wrote:
>> Hi all, I was wondering whether you could give me some advice on how to
>> improve my search performance.
>>
>> I have 90 lucene indexes, each having different fields (~5 per Document).
>> When I search, I always have to go through all indexes to build my result
>> set. Searching one index takes approx. 100ms, thus searching all indexes
>> takes 9s in total.
>>
>> How can I reduce the time it needs to search?
>>
>> I decided to create this many indexes because putting all data in one index
>> would mean that a document would have ~400 fields, with most of them left
>> empty. Is that ok? Would a single index be faster compared to multiple small
>> ones?
>>
>> Any pointers are much appreciated.
>>
>> Regards,
>> Alex
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49870-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun  2 03:28:52 2011
Return-Path: <java-user-return-49870-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BE6B44F33
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  2 Jun 2011 03:28:52 +0000 (UTC)
Received: (qmail 30843 invoked by uid 500); 2 Jun 2011 03:28:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30808 invoked by uid 500); 2 Jun 2011 03:28:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30800 invoked by uid 99); 2 Jun 2011 03:28:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Jun 2011 03:28:45 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of serera@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Jun 2011 03:28:38 +0000
Received: by wwi18 with SMTP id 18so311409wwi.5
        for <java-user@lucene.apache.org>; Wed, 01 Jun 2011 20:28:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=xAFu1ENfidoTcyTeJ09ZVl5qhyfv5xxeBSIVzoYwEK0=;
        b=wM5O/XpznTH15aLFLRlVZ5dUyQ33UBO3jzKSzMx2M44YsuPYNkckwQCvevPIVcPorD
         1vLz9MCEBJrUd+VclGv39E7kzOdUbumLIgUb4T5kB/IsJz93UsYjtxeI8mTzycqj8Ch3
         xKbo+MluiImlUwnqYE0rBPhBQ39AcfsMo2tec=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Ds3MUV8rwj339T3sLZpu7WczRIgcJCocqsUCmYP5377krYOtuWQzxly9z1gJ76d7SO
         omXiReNJX1jG50AgZEXghojdp7Hf3tUZYXpVqb/COkxyMKM8agx97mkGGIA+rW8uyW/e
         F08+v5JzVeba5R4aQqHCZYZFq6QuD5CrSeq84=
MIME-Version: 1.0
Received: by 10.216.253.215 with SMTP id f65mr215200wes.14.1306985297286; Wed,
 01 Jun 2011 20:28:17 -0700 (PDT)
Received: by 10.216.19.74 with HTTP; Wed, 1 Jun 2011 20:28:17 -0700 (PDT)
In-Reply-To: <4DE6B10F.7090207@gmail.com>
References: <4DE6A278.4030002@gmail.com>
	<BANLkTi=8AvxMeF86mMBhkA1j5rxHi-VgyQ@mail.gmail.com>
	<4DE6B10F.7090207@gmail.com>
Date: Thu, 2 Jun 2011 06:28:17 +0300
Message-ID: <BANLkTinTh6CMgvHAdf0Mq8EBd-QQe-03dw@mail.gmail.com>
Subject: Re: multiple small indexes or one big index?
From: Shai Erera <serera@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015174ff01e5f16b904a4b23aab

--0015174ff01e5f16b904a4b23aab
Content-Type: text/plain; charset=ISO-8859-1

>
> All indexes together are rather small, ~200MB and 50.000 documents.


Then I would definitely consider merging them under one index. Even if you
don't close the searcher, it will still require 90 x N ms to search them,
N=ms to search one index.

Also, multi-threading will improve, but only up to a point - because you
cannot parallelize 90 searches (unless you have some sort of super-computer
there).

On the other hand, if you merge them into one index then you'll be talking
about an index that's <20GB and <5M docs, which is definitely reasonable for
Lucene and performance (depends of course on the search application, but
generally) is very good.

Starting Lucene 3.1 you can perform your searches in parallel (over one
index) using IndexSearcher, which comes in handy if your index has multiple
segments. Look at
http://lucene.apache.org/java/3_1_0/api/core/org/apache/lucene/search/IndexSearcher.html#IndexSearcher(org.apache.lucene.index.IndexReader,
java.util.concurrent.ExecutorService).

Having said that, keeping the indexes separate may have advantages that your
application needs. For example, if those indexes are completely rebuilt very
frequently, then it's much better to delete and index and rebuild, then to
delete 50K docs from the merged large index. But that really depends on your
application needs.

I'd say, if you don't see a strong case for keeping them apart, merge them
into one. Besides performance, there's also index management overhead, maybe
synchronizing commits, making sure all are closed/opened together etc., that
may just be an unnecessary overhead.

BTW, in Lucene in Action 2nd Edition, there's an example class called
SearcherManager which manages IndexSearcher instances and ensures an
IndexSearcher instance is closed only after the last thread released it + it
can manage the reopen() logic for you as well as warming up the index. You
might want to give it a try too !
LUCENE-2955<https://issues.apache.org/jira/browse/LUCENE-2955> makes
use of it, so you can consult it for examples (it's still not committed).

Hope this helps,
Shai

On Thu, Jun 2, 2011 at 12:37 AM, Alexander Rosemann <
alexander.rosemann@gmail.com> wrote:

> Many thanks for the tips, Erick! I do close each searcher after a search...
> I will change that first thing tmrw. and let you know how that went.
> Multi-threaded searching will be next and if that hasn't helped, I will
> switch to one big index.
> All indexes together are rather small, ~200MB and 50.000 documents.
>
> -Alex
>
>
> On 01.06.2011 23:26, Erick Erickson wrote:
>
>> I'd start by putting them all in one index. There's no penalty
>> in Lucene for having empty fields in a document, unlike an
>> RDBMS.
>>
>> Alternately, if you're opening then closing searchers each
>> time, that's very expensive. Could you open the searchers
>> once and keep them open (all 90 of them)? That alone might
>> do the trick and be less of a change to your program. You
>> could also fire multiple threads at the searches, but check if
>> you're CPU bound first (if you are, multiple threads won't
>> help much/at all).
>>
>> You haven't said how big these indexes are nor how many
>> documents you're talking about here, so this advice is suspect.
>>
>> Do look at putting it all in one index though, let us know if you
>> have some data indicating how big stuff is/would be.
>>
>> Best
>> Erick
>>
>> On Wed, Jun 1, 2011 at 4:35 PM, Alexander Rosemann
>> <alexander.rosemann@gmail.com>  wrote:
>>
>>> Hi all, I was wondering whether you could give me some advice on how to
>>> improve my search performance.
>>>
>>> I have 90 lucene indexes, each having different fields (~5 per Document).
>>> When I search, I always have to go through all indexes to build my result
>>> set. Searching one index takes approx. 100ms, thus searching all indexes
>>> takes 9s in total.
>>>
>>> How can I reduce the time it needs to search?
>>>
>>> I decided to create this many indexes because putting all data in one
>>> index
>>> would mean that a document would have ~400 fields, with most of them left
>>> empty. Is that ok? Would a single index be faster compared to multiple
>>> small
>>> ones?
>>>
>>> Any pointers are much appreciated.
>>>
>>> Regards,
>>> Alex
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0015174ff01e5f16b904a4b23aab--

From java-user-return-49871-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun  2 07:57:26 2011
Return-Path: <java-user-return-49871-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2F2D14CE8
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  2 Jun 2011 07:57:26 +0000 (UTC)
Received: (qmail 44699 invoked by uid 500); 2 Jun 2011 07:57:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44490 invoked by uid 500); 2 Jun 2011 07:57:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44482 invoked by uid 99); 2 Jun 2011 07:57:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Jun 2011 07:57:19 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of alexander.rosemann@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Jun 2011 07:57:10 +0000
Received: by wyb40 with SMTP id 40so731670wyb.35
        for <java-user@lucene.apache.org>; Thu, 02 Jun 2011 00:56:49 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:message-id:date:from:user-agent:mime-version:to
         :subject:references:in-reply-to:content-type
         :content-transfer-encoding;
        bh=QTANx3w+tJg4e3aI/OpAnSWXygNMkXj2xY8uv9+3VCc=;
        b=FG2n7nh82cQ/x+DKhGjwJKjXgTx9Aj0jMCPH61oN00MHi/gDO+mGfHnVmVYEz9b3dc
         S/fmttuXYppy/yvkivaPRaTWdPw8CTz3SO0qCSpkpP9aOLjpJNH0fJQCv3utvYDCgc+A
         JHOFcCxE1yE2grO1hSxK7bdQZ85eZcE1o/E44=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=MHZesv84JSrT5rUvMctOCYLdMqrZN5lT9L+9/QZsGprNrtwTFQW9vg5Rtv2940Wh/8
         7EiX39G78ETXG5l63a1eK7lmXXGxhov19ZZm3ArbPAh+Dwb3/OwA+K3y1xxfVB3ayxNC
         iIVN7epLNbMPsUfHIIptfJBwFLCu5VSkmgfsc=
Received: by 10.227.128.138 with SMTP id k10mr393852wbs.82.1307001409403;
        Thu, 02 Jun 2011 00:56:49 -0700 (PDT)
Received: from [10.64.58.100] ([90.146.67.182])
        by mx.google.com with ESMTPS id m8sm207395wbh.62.2011.06.02.00.56.47
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 02 Jun 2011 00:56:48 -0700 (PDT)
Message-ID: <4DE7423A.5010504@gmail.com>
Date: Thu, 02 Jun 2011 09:56:42 +0200
From: Alexander Rosemann <alexander.rosemann@gmail.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-GB; rv:1.9.2.17) Gecko/20110414 Lightning/1.0b2 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: multiple small indexes or one big index?
References: <4DE6A278.4030002@gmail.com>	<BANLkTi=8AvxMeF86mMBhkA1j5rxHi-VgyQ@mail.gmail.com>	<4DE6B10F.7090207@gmail.com> <BANLkTinTh6CMgvHAdf0Mq8EBd-QQe-03dw@mail.gmail.com>
In-Reply-To: <BANLkTinTh6CMgvHAdf0Mq8EBd-QQe-03dw@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Many, many thanks for the input. I have applied the little change of not 
closing the searchers each time and search times dropped already by half!

I'll try to merge all indexes into a single one next. I'll let you know 
how that went.


On 02.06.2011 05:28, Shai Erera wrote:
>>
>> All indexes together are rather small, ~200MB and 50.000 documents.
>
>
> Then I would definitely consider merging them under one index. Even if you
> don't close the searcher, it will still require 90 x N ms to search them,
> N=ms to search one index.
>
> Also, multi-threading will improve, but only up to a point - because you
> cannot parallelize 90 searches (unless you have some sort of super-computer
> there).
>
> On the other hand, if you merge them into one index then you'll be talking
> about an index that's<20GB and<5M docs, which is definitely reasonable for
> Lucene and performance (depends of course on the search application, but
> generally) is very good.
>
> Starting Lucene 3.1 you can perform your searches in parallel (over one
> index) using IndexSearcher, which comes in handy if your index has multiple
> segments. Look at
> http://lucene.apache.org/java/3_1_0/api/core/org/apache/lucene/search/IndexSearcher.html#IndexSearcher(org.apache.lucene.index.IndexReader,
> java.util.concurrent.ExecutorService).
>
> Having said that, keeping the indexes separate may have advantages that your
> application needs. For example, if those indexes are completely rebuilt very
> frequently, then it's much better to delete and index and rebuild, then to
> delete 50K docs from the merged large index. But that really depends on your
> application needs.
>
> I'd say, if you don't see a strong case for keeping them apart, merge them
> into one. Besides performance, there's also index management overhead, maybe
> synchronizing commits, making sure all are closed/opened together etc., that
> may just be an unnecessary overhead.
>
> BTW, in Lucene in Action 2nd Edition, there's an example class called
> SearcherManager which manages IndexSearcher instances and ensures an
> IndexSearcher instance is closed only after the last thread released it + it
> can manage the reopen() logic for you as well as warming up the index. You
> might want to give it a try too !
> LUCENE-2955<https://issues.apache.org/jira/browse/LUCENE-2955>  makes
> use of it, so you can consult it for examples (it's still not committed).
>
> Hope this helps,
> Shai
>
> On Thu, Jun 2, 2011 at 12:37 AM, Alexander Rosemann<
> alexander.rosemann@gmail.com>  wrote:
>
>> Many thanks for the tips, Erick! I do close each searcher after a search...
>> I will change that first thing tmrw. and let you know how that went.
>> Multi-threaded searching will be next and if that hasn't helped, I will
>> switch to one big index.
>> All indexes together are rather small, ~200MB and 50.000 documents.
>>
>> -Alex
>>
>>
>> On 01.06.2011 23:26, Erick Erickson wrote:
>>
>>> I'd start by putting them all in one index. There's no penalty
>>> in Lucene for having empty fields in a document, unlike an
>>> RDBMS.
>>>
>>> Alternately, if you're opening then closing searchers each
>>> time, that's very expensive. Could you open the searchers
>>> once and keep them open (all 90 of them)? That alone might
>>> do the trick and be less of a change to your program. You
>>> could also fire multiple threads at the searches, but check if
>>> you're CPU bound first (if you are, multiple threads won't
>>> help much/at all).
>>>
>>> You haven't said how big these indexes are nor how many
>>> documents you're talking about here, so this advice is suspect.
>>>
>>> Do look at putting it all in one index though, let us know if you
>>> have some data indicating how big stuff is/would be.
>>>
>>> Best
>>> Erick
>>>
>>> On Wed, Jun 1, 2011 at 4:35 PM, Alexander Rosemann
>>> <alexander.rosemann@gmail.com>   wrote:
>>>
>>>> Hi all, I was wondering whether you could give me some advice on how to
>>>> improve my search performance.
>>>>
>>>> I have 90 lucene indexes, each having different fields (~5 per Document).
>>>> When I search, I always have to go through all indexes to build my result
>>>> set. Searching one index takes approx. 100ms, thus searching all indexes
>>>> takes 9s in total.
>>>>
>>>> How can I reduce the time it needs to search?
>>>>
>>>> I decided to create this many indexes because putting all data in one
>>>> index
>>>> would mean that a document would have ~400 fields, with most of them left
>>>> empty. Is that ok? Would a single index be faster compared to multiple
>>>> small
>>>> ones?
>>>>
>>>> Any pointers are much appreciated.
>>>>
>>>> Regards,
>>>> Alex
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49872-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun  2 11:04:44 2011
Return-Path: <java-user-return-49872-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 77AD84B77
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  2 Jun 2011 11:04:44 +0000 (UTC)
Received: (qmail 76306 invoked by uid 500); 2 Jun 2011 11:04:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76255 invoked by uid 500); 2 Jun 2011 11:04:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76247 invoked by uid 99); 2 Jun 2011 11:04:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Jun 2011 11:04:42 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Jun 2011 11:04:34 +0000
Received: by qwj9 with SMTP id 9so476306qwj.35
        for <java-user@lucene.apache.org>; Thu, 02 Jun 2011 04:04:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type:content-transfer-encoding;
        bh=Es8SxDPQ5FrWx8A+PF1WmGvh+BzKvdlrTYUeS55p1cc=;
        b=n70oPuGje5UHYKrYdIPTnwdICHW8Zkv2M5MFkXronoEIDEyL1OYocyUUmodInrHVPJ
         b15drFfZ8atPi7B4siBz1+hlJjzr1jROJfM9ddMTTNWP8B5TXgbV8ww2zkdCXM7cyP/t
         ktIAa/bSB3QaBP4mpGr+0TBRKNjHxfMaW+WxA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=PgJ2naxNnpHH6RKwR44h1h9SkW8bkrNa6z0zPVT4Fm7X1y6WirXBLUG+JAYq/pSsGo
         O8jPdQjmrq3Ea8BENEyg5CRHEeKreIHx5q9jA5EAuT960KxywCZxmLnOxvEDOfkG4UTM
         7HwL2XbYUlQ/Bwq8mmksVXJF3EGYJPd/eruMk=
MIME-Version: 1.0
Received: by 10.229.206.42 with SMTP id fs42mr390590qcb.150.1307012653524;
 Thu, 02 Jun 2011 04:04:13 -0700 (PDT)
Received: by 10.229.95.202 with HTTP; Thu, 2 Jun 2011 04:04:13 -0700 (PDT)
In-Reply-To: <4DE6B10F.7090207@gmail.com>
References: <4DE6A278.4030002@gmail.com>
	<BANLkTi=8AvxMeF86mMBhkA1j5rxHi-VgyQ@mail.gmail.com>
	<4DE6B10F.7090207@gmail.com>
Date: Thu, 2 Jun 2011 07:04:13 -0400
Message-ID: <BANLkTimsBoV68F5FdDqmvp9-CMRF3w-AVQ@mail.gmail.com>
Subject: Re: multiple small indexes or one big index?
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

At this size, really consider going to a single index. The lack of
administrative headaches alone is probably well worth the effort....

I almost guarantee that the time you spend re-writing things to keep
the searchers open (and finding the bugs!) will be far more than just
putting all the data in a single index.

But that might just be my preferences showing....

Best
Erick

On Wed, Jun 1, 2011 at 5:37 PM, Alexander Rosemann
<alexander.rosemann@gmail.com> wrote:
> Many thanks for the tips, Erick! I do close each searcher after a search.=
..
> I will change that first thing tmrw. and let you know how that went.
> Multi-threaded searching will be next and if that hasn't helped, I will
> switch to one big index.
> All indexes together are rather small, ~200MB and 50.000 documents.
>
> -Alex
>
> On 01.06.2011 23:26, Erick Erickson wrote:
>>
>> I'd start by putting them all in one index. There's no penalty
>> in Lucene for having empty fields in a document, unlike an
>> RDBMS.
>>
>> Alternately, if you're opening then closing searchers each
>> time, that's very expensive. Could you open the searchers
>> once and keep them open (all 90 of them)? That alone might
>> do the trick and be less of a change to your program. You
>> could also fire multiple threads at the searches, but check if
>> you're CPU bound first (if you are, multiple threads won't
>> help much/at all).
>>
>> You haven't said how big these indexes are nor how many
>> documents you're talking about here, so this advice is suspect.
>>
>> Do look at putting it all in one index though, let us know if you
>> have some data indicating how big stuff is/would be.
>>
>> Best
>> Erick
>>
>> On Wed, Jun 1, 2011 at 4:35 PM, Alexander Rosemann
>> <alexander.rosemann@gmail.com> =A0wrote:
>>>
>>> Hi all, I was wondering whether you could give me some advice on how to
>>> improve my search performance.
>>>
>>> I have 90 lucene indexes, each having different fields (~5 per Document=
).
>>> When I search, I always have to go through all indexes to build my resu=
lt
>>> set. Searching one index takes approx. 100ms, thus searching all indexe=
s
>>> takes 9s in total.
>>>
>>> How can I reduce the time it needs to search?
>>>
>>> I decided to create this many indexes because putting all data in one
>>> index
>>> would mean that a document would have ~400 fields, with most of them le=
ft
>>> empty. Is that ok? Would a single index be faster compared to multiple
>>> small
>>> ones?
>>>
>>> Any pointers are much appreciated.
>>>
>>> Regards,
>>> Alex
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49873-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun  2 13:28:42 2011
Return-Path: <java-user-return-49873-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 96A7646C6
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  2 Jun 2011 13:28:42 +0000 (UTC)
Received: (qmail 17410 invoked by uid 500); 2 Jun 2011 13:28:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17367 invoked by uid 500); 2 Jun 2011 13:28:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17357 invoked by uid 99); 2 Jun 2011 13:28:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Jun 2011 13:28:39 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of alexander.rosemann@gmail.com designates 74.125.82.42 as permitted sender)
Received: from [74.125.82.42] (HELO mail-ww0-f42.google.com) (74.125.82.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Jun 2011 13:28:32 +0000
Received: by wwk4 with SMTP id 4so4738514wwk.5
        for <java-user@lucene.apache.org>; Thu, 02 Jun 2011 06:28:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:message-id:date:from:user-agent:mime-version:to
         :subject:references:in-reply-to:content-type
         :content-transfer-encoding;
        bh=0LTBlfKb8pXX/BANMJwKo5V28aOuBXRpDL+jOX7Eq/k=;
        b=Ps+gV3wcpFtl8d6w+hz7Dc4l5jtKlZlhT4uh6ZeYSw2XG7cT/VAnEpoR/f2wI/So9J
         pJFURWX+8xPUxensQQH3mnDdkFqN1K2oNJBIZdpXxclRc6Pw3Rf3KhRsl0oRgzeJIWYe
         5IAjgobgVx8Z10D91XStpDpZLHLQpg1TurXKQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=dTuaMd6e5QE4Lm5HuwmcbYYFtIt3iAZLEtSnfHrkN32NMOuA/cp3PEevfen+FgBcVa
         uu/620H5c1sk3GVRWi9mMjP3hie0Vr/KTJrCwy1EsZH9OWoW4Qsb9TOxfkn66F/GVX65
         B+vUmJ5DU44TDmQNe3cok9SJT7zx+uH1xUpjA=
Received: by 10.227.131.31 with SMTP id v31mr773152wbs.19.1307021290643;
        Thu, 02 Jun 2011 06:28:10 -0700 (PDT)
Received: from [10.64.58.100] ([90.146.67.182])
        by mx.google.com with ESMTPS id d19sm397590wbh.25.2011.06.02.06.28.09
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 02 Jun 2011 06:28:09 -0700 (PDT)
Message-ID: <4DE78FE3.2070106@gmail.com>
Date: Thu, 02 Jun 2011 15:28:03 +0200
From: Alexander Rosemann <alexander.rosemann@gmail.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-GB; rv:1.9.2.17) Gecko/20110414 Lightning/1.0b2 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: multiple small indexes or one big index?
References: <4DE6A278.4030002@gmail.com>	<BANLkTi=8AvxMeF86mMBhkA1j5rxHi-VgyQ@mail.gmail.com>	<4DE6B10F.7090207@gmail.com> <BANLkTimsBoV68F5FdDqmvp9-CMRF3w-AVQ@mail.gmail.com>
In-Reply-To: <BANLkTimsBoV68F5FdDqmvp9-CMRF3w-AVQ@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Hi Erick, caching the IndexSearchers didn't took too much effort and 
decreased searching already by 30%!

I am busy changing the code to use a single index as you suggested atm. 
Still a few things left to be done but once I have it working I let you 
know how much faster it is for me.

Thanks,
Alex

On 02.06.2011 13:04, Erick Erickson wrote:
> At this size, really consider going to a single index. The lack of
> administrative headaches alone is probably well worth the effort....
>
> I almost guarantee that the time you spend re-writing things to keep
> the searchers open (and finding the bugs!) will be far more than just
> putting all the data in a single index.
>
> But that might just be my preferences showing....
>
> Best
> Erick
>
> On Wed, Jun 1, 2011 at 5:37 PM, Alexander Rosemann
> <alexander.rosemann@gmail.com>  wrote:
>> Many thanks for the tips, Erick! I do close each searcher after a search...
>> I will change that first thing tmrw. and let you know how that went.
>> Multi-threaded searching will be next and if that hasn't helped, I will
>> switch to one big index.
>> All indexes together are rather small, ~200MB and 50.000 documents.
>>
>> -Alex
>>
>> On 01.06.2011 23:26, Erick Erickson wrote:
>>>
>>> I'd start by putting them all in one index. There's no penalty
>>> in Lucene for having empty fields in a document, unlike an
>>> RDBMS.
>>>
>>> Alternately, if you're opening then closing searchers each
>>> time, that's very expensive. Could you open the searchers
>>> once and keep them open (all 90 of them)? That alone might
>>> do the trick and be less of a change to your program. You
>>> could also fire multiple threads at the searches, but check if
>>> you're CPU bound first (if you are, multiple threads won't
>>> help much/at all).
>>>
>>> You haven't said how big these indexes are nor how many
>>> documents you're talking about here, so this advice is suspect.
>>>
>>> Do look at putting it all in one index though, let us know if you
>>> have some data indicating how big stuff is/would be.
>>>
>>> Best
>>> Erick
>>>
>>> On Wed, Jun 1, 2011 at 4:35 PM, Alexander Rosemann
>>> <alexander.rosemann@gmail.com>    wrote:
>>>>
>>>> Hi all, I was wondering whether you could give me some advice on how to
>>>> improve my search performance.
>>>>
>>>> I have 90 lucene indexes, each having different fields (~5 per Document).
>>>> When I search, I always have to go through all indexes to build my result
>>>> set. Searching one index takes approx. 100ms, thus searching all indexes
>>>> takes 9s in total.
>>>>
>>>> How can I reduce the time it needs to search?
>>>>
>>>> I decided to create this many indexes because putting all data in one
>>>> index
>>>> would mean that a document would have ~400 fields, with most of them left
>>>> empty. Is that ok? Would a single index be faster compared to multiple
>>>> small
>>>> ones?
>>>>
>>>> Any pointers are much appreciated.
>>>>
>>>> Regards,
>>>> Alex
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49874-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun  2 13:36:45 2011
Return-Path: <java-user-return-49874-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D4E3D4F00
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  2 Jun 2011 13:36:45 +0000 (UTC)
Received: (qmail 27144 invoked by uid 500); 2 Jun 2011 13:36:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27100 invoked by uid 500); 2 Jun 2011 13:36:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27087 invoked by uid 99); 2 Jun 2011 13:36:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Jun 2011 13:36:43 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Jun 2011 13:36:35 +0000
Received: by qyk2 with SMTP id 2so2969182qyk.14
        for <java-user@lucene.apache.org>; Thu, 02 Jun 2011 06:36:14 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type:content-transfer-encoding;
        bh=MRipCNK52gUqHG+Fwbzd4DHWaI3zceDWRKdVWFint5o=;
        b=rdlJY5CcAqM67S3RqVCdkumoBg+mJyGjX6Cni4nMpNKAkdxlbPeNRJdgQ54Rmqjwn6
         EH9ffx7iGD7cE6Vetd6pOshrTwp7xqltdebWpJmmxWic7oT2+AnyuCWHBeJKVpFFyANJ
         INi7jXmwZD+qYCc+iLStg0Z70mK8Vu6VZUhdc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=dvyYzc3i7YzJJO8krB2+tikeoIameRSCR2N+gE/JvZ3Vmv+HJzpfAkMJ2EyIWTCB4h
         +9FtVAzLGLfUMOOoR6+dKCZLrY8VPJn3/6k4n6BKc9BdtT9kz8eAQwPtdxZZnHKPg3ex
         ZgseNgZlQPZ3kzUuJh8Ha8xEP3oq1ZplMY5gE=
MIME-Version: 1.0
Received: by 10.229.101.36 with SMTP id a36mr505825qco.74.1307021774400; Thu,
 02 Jun 2011 06:36:14 -0700 (PDT)
Received: by 10.229.95.202 with HTTP; Thu, 2 Jun 2011 06:36:14 -0700 (PDT)
In-Reply-To: <4DE78FE3.2070106@gmail.com>
References: <4DE6A278.4030002@gmail.com>
	<BANLkTi=8AvxMeF86mMBhkA1j5rxHi-VgyQ@mail.gmail.com>
	<4DE6B10F.7090207@gmail.com>
	<BANLkTimsBoV68F5FdDqmvp9-CMRF3w-AVQ@mail.gmail.com>
	<4DE78FE3.2070106@gmail.com>
Date: Thu, 2 Jun 2011 09:36:14 -0400
Message-ID: <BANLkTikf7xtc-2fwYJwMqB6D0agEKD9vTw@mail.gmail.com>
Subject: Re: multiple small indexes or one big index?
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Sounds good, just be sure to keep your (now single) searcher open! Also,
be sure to measure queries after a while. The first few queries will fill u=
p
caches etc, so the time should improve after the first few.

Best
Erick

On Thu, Jun 2, 2011 at 9:28 AM, Alexander Rosemann
<alexander.rosemann@gmail.com> wrote:
> Hi Erick, caching the IndexSearchers didn't took too much effort and
> decreased searching already by 30%!
>
> I am busy changing the code to use a single index as you suggested atm.
> Still a few things left to be done but once I have it working I let you k=
now
> how much faster it is for me.
>
> Thanks,
> Alex
>
> On 02.06.2011 13:04, Erick Erickson wrote:
>>
>> At this size, really consider going to a single index. The lack of
>> administrative headaches alone is probably well worth the effort....
>>
>> I almost guarantee that the time you spend re-writing things to keep
>> the searchers open (and finding the bugs!) will be far more than just
>> putting all the data in a single index.
>>
>> But that might just be my preferences showing....
>>
>> Best
>> Erick
>>
>> On Wed, Jun 1, 2011 at 5:37 PM, Alexander Rosemann
>> <alexander.rosemann@gmail.com> =A0wrote:
>>>
>>> Many thanks for the tips, Erick! I do close each searcher after a
>>> search...
>>> I will change that first thing tmrw. and let you know how that went.
>>> Multi-threaded searching will be next and if that hasn't helped, I will
>>> switch to one big index.
>>> All indexes together are rather small, ~200MB and 50.000 documents.
>>>
>>> -Alex
>>>
>>> On 01.06.2011 23:26, Erick Erickson wrote:
>>>>
>>>> I'd start by putting them all in one index. There's no penalty
>>>> in Lucene for having empty fields in a document, unlike an
>>>> RDBMS.
>>>>
>>>> Alternately, if you're opening then closing searchers each
>>>> time, that's very expensive. Could you open the searchers
>>>> once and keep them open (all 90 of them)? That alone might
>>>> do the trick and be less of a change to your program. You
>>>> could also fire multiple threads at the searches, but check if
>>>> you're CPU bound first (if you are, multiple threads won't
>>>> help much/at all).
>>>>
>>>> You haven't said how big these indexes are nor how many
>>>> documents you're talking about here, so this advice is suspect.
>>>>
>>>> Do look at putting it all in one index though, let us know if you
>>>> have some data indicating how big stuff is/would be.
>>>>
>>>> Best
>>>> Erick
>>>>
>>>> On Wed, Jun 1, 2011 at 4:35 PM, Alexander Rosemann
>>>> <alexander.rosemann@gmail.com> =A0 =A0wrote:
>>>>>
>>>>> Hi all, I was wondering whether you could give me some advice on how =
to
>>>>> improve my search performance.
>>>>>
>>>>> I have 90 lucene indexes, each having different fields (~5 per
>>>>> Document).
>>>>> When I search, I always have to go through all indexes to build my
>>>>> result
>>>>> set. Searching one index takes approx. 100ms, thus searching all
>>>>> indexes
>>>>> takes 9s in total.
>>>>>
>>>>> How can I reduce the time it needs to search?
>>>>>
>>>>> I decided to create this many indexes because putting all data in one
>>>>> index
>>>>> would mean that a document would have ~400 fields, with most of them
>>>>> left
>>>>> empty. Is that ok? Would a single index be faster compared to multipl=
e
>>>>> small
>>>>> ones?
>>>>>
>>>>> Any pointers are much appreciated.
>>>>>
>>>>> Regards,
>>>>> Alex
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49875-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun  2 13:49:16 2011
Return-Path: <java-user-return-49875-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 51F0849B9
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  2 Jun 2011 13:49:16 +0000 (UTC)
Received: (qmail 49217 invoked by uid 500); 2 Jun 2011 13:49:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49116 invoked by uid 500); 2 Jun 2011 13:49:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49108 invoked by uid 99); 2 Jun 2011 13:49:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Jun 2011 13:49:13 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of alexander.rosemann@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Jun 2011 13:49:06 +0000
Received: by wwi18 with SMTP id 18so632745wwi.5
        for <java-user@lucene.apache.org>; Thu, 02 Jun 2011 06:48:45 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:message-id:date:from:user-agent:mime-version:to
         :subject:references:in-reply-to:content-type
         :content-transfer-encoding;
        bh=BfuCOfnqTArlTxiyKHtnX46KU1Ai3K+HvUh0wIILL9E=;
        b=RS+VtD8/5SXbcw0dbt1kIXSxOn9QfwiIDTAcZjGQ8r8Mwb+FZ5F37/VIDaAWIOvi8m
         hIyNPgFPVVCTfs9KoEWszCWNX+54oaYP3G1odaDPZ1Vpquxo1WlBWPKOnVkRuQXw2FRP
         ZhqMtqxKOgD+0QvkuyFcye6jSil94t7Ky6GGM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=VzMiVMFuHStfvHDpeTn3yLCl6nTExsqNNq8DaO/Zug5dQ1R47aTCm+tAHpIZqqyVHN
         3vTxwnKgEm2iOhfJpB/CQVS1dCZPFD8I2revtoc0gWJD0cFQ+bZmzKlluLtUv0TIdu4/
         tX5BOL6m7xrkFs79R2z5YWjFbNkYvYX7bmXl4=
Received: by 10.216.132.5 with SMTP id n5mr6202305wei.7.1307022524817;
        Thu, 02 Jun 2011 06:48:44 -0700 (PDT)
Received: from [10.64.58.100] ([90.146.67.182])
        by mx.google.com with ESMTPS id g4sm337105weg.12.2011.06.02.06.48.43
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 02 Jun 2011 06:48:43 -0700 (PDT)
Message-ID: <4DE794B5.2010506@gmail.com>
Date: Thu, 02 Jun 2011 15:48:37 +0200
From: Alexander Rosemann <alexander.rosemann@gmail.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-GB; rv:1.9.2.17) Gecko/20110414 Lightning/1.0b2 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: multiple small indexes or one big index?
References: <4DE6A278.4030002@gmail.com>	<BANLkTi=8AvxMeF86mMBhkA1j5rxHi-VgyQ@mail.gmail.com>	<4DE6B10F.7090207@gmail.com>	<BANLkTimsBoV68F5FdDqmvp9-CMRF3w-AVQ@mail.gmail.com>	<4DE78FE3.2070106@gmail.com> <BANLkTikf7xtc-2fwYJwMqB6D0agEKD9vTw@mail.gmail.com>
In-Reply-To: <BANLkTikf7xtc-2fwYJwMqB6D0agEKD9vTw@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

No worries, I'll keep that in mind now.
In addition I am going to switch to another collector as well. ATM I 
collect the results and then sort them using the std. Collections.sort 
approach... I have to look what Lucene offers and switch to something else.

Thanks,
Alex

On 02.06.2011 15:36, Erick Erickson wrote:
> Sounds good, just be sure to keep your (now single) searcher open! Also,
> be sure to measure queries after a while. The first few queries will fill up
> caches etc, so the time should improve after the first few.
>
> Best
> Erick
>
> On Thu, Jun 2, 2011 at 9:28 AM, Alexander Rosemann
> <alexander.rosemann@gmail.com>  wrote:
>> Hi Erick, caching the IndexSearchers didn't took too much effort and
>> decreased searching already by 30%!
>>
>> I am busy changing the code to use a single index as you suggested atm.
>> Still a few things left to be done but once I have it working I let you know
>> how much faster it is for me.
>>
>> Thanks,
>> Alex
>>
>> On 02.06.2011 13:04, Erick Erickson wrote:
>>>
>>> At this size, really consider going to a single index. The lack of
>>> administrative headaches alone is probably well worth the effort....
>>>
>>> I almost guarantee that the time you spend re-writing things to keep
>>> the searchers open (and finding the bugs!) will be far more than just
>>> putting all the data in a single index.
>>>
>>> But that might just be my preferences showing....
>>>
>>> Best
>>> Erick
>>>
>>> On Wed, Jun 1, 2011 at 5:37 PM, Alexander Rosemann
>>> <alexander.rosemann@gmail.com>    wrote:
>>>>
>>>> Many thanks for the tips, Erick! I do close each searcher after a
>>>> search...
>>>> I will change that first thing tmrw. and let you know how that went.
>>>> Multi-threaded searching will be next and if that hasn't helped, I will
>>>> switch to one big index.
>>>> All indexes together are rather small, ~200MB and 50.000 documents.
>>>>
>>>> -Alex
>>>>
>>>> On 01.06.2011 23:26, Erick Erickson wrote:
>>>>>
>>>>> I'd start by putting them all in one index. There's no penalty
>>>>> in Lucene for having empty fields in a document, unlike an
>>>>> RDBMS.
>>>>>
>>>>> Alternately, if you're opening then closing searchers each
>>>>> time, that's very expensive. Could you open the searchers
>>>>> once and keep them open (all 90 of them)? That alone might
>>>>> do the trick and be less of a change to your program. You
>>>>> could also fire multiple threads at the searches, but check if
>>>>> you're CPU bound first (if you are, multiple threads won't
>>>>> help much/at all).
>>>>>
>>>>> You haven't said how big these indexes are nor how many
>>>>> documents you're talking about here, so this advice is suspect.
>>>>>
>>>>> Do look at putting it all in one index though, let us know if you
>>>>> have some data indicating how big stuff is/would be.
>>>>>
>>>>> Best
>>>>> Erick
>>>>>
>>>>> On Wed, Jun 1, 2011 at 4:35 PM, Alexander Rosemann
>>>>> <alexander.rosemann@gmail.com>      wrote:
>>>>>>
>>>>>> Hi all, I was wondering whether you could give me some advice on how to
>>>>>> improve my search performance.
>>>>>>
>>>>>> I have 90 lucene indexes, each having different fields (~5 per
>>>>>> Document).
>>>>>> When I search, I always have to go through all indexes to build my
>>>>>> result
>>>>>> set. Searching one index takes approx. 100ms, thus searching all
>>>>>> indexes
>>>>>> takes 9s in total.
>>>>>>
>>>>>> How can I reduce the time it needs to search?
>>>>>>
>>>>>> I decided to create this many indexes because putting all data in one
>>>>>> index
>>>>>> would mean that a document would have ~400 fields, with most of them
>>>>>> left
>>>>>> empty. Is that ok? Would a single index be faster compared to multiple
>>>>>> small
>>>>>> ones?
>>>>>>
>>>>>> Any pointers are much appreciated.
>>>>>>
>>>>>> Regards,
>>>>>> Alex
>>>>>>
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49876-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun  2 19:51:51 2011
Return-Path: <java-user-return-49876-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C437F4569
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  2 Jun 2011 19:51:51 +0000 (UTC)
Received: (qmail 69119 invoked by uid 500); 2 Jun 2011 19:51:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68961 invoked by uid 500); 2 Jun 2011 19:51:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68953 invoked by uid 99); 2 Jun 2011 19:51:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Jun 2011 19:51:49 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [212.243.6.182] (HELO mail.mysigninternational.com) (212.243.6.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Jun 2011 19:51:41 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail.mysigninternational.com (Postfix) with ESMTP id 2692AC2127
	for <java-user@lucene.apache.org>; Thu,  2 Jun 2011 21:51:21 +0200 (CEST)
Received: from mail.mysigninternational.com ([127.0.0.1])
	by localhost (mysign-postfix1.INTERNET [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id ARwn6bfKQdGG for <java-user@lucene.apache.org>;
	Thu,  2 Jun 2011 21:51:21 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp (unknown [192.168.13.8])
	by mail.mysigninternational.com (Postfix) with ESMTP id 05DD9C211C
	for <java-user@lucene.apache.org>; Thu,  2 Jun 2011 21:51:21 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31]) by
 Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31%10]) with mapi;
 Thu, 2 Jun 2011 21:51:20 +0200
From: Clemens Wyss <clemensdev@mysign.ch>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Thu, 2 Jun 2011 21:51:19 +0200
Subject: boosting fields
Thread-Topic: boosting fields
Thread-Index: AcwhXm32eWeT85YkSiW6uoCkjdx5Qw==
Message-ID: <E594BA962D832C49A3CF858DAA3A696C1135ACD42B@Exchange2007.mysigndomain.corp>
Accept-Language: de-DE, de-CH
Content-Language: de-DE
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: de-DE, de-CH
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

I have a minimal unit test in which I add three documents to an index. The =
documents have two fields "year" and "descritpion".
doc1(year =3D "2007", desc =3D "text with 2007 and 2009")
doc2(year =3D "2009", desc =3D "text with 2007 and 2009")
doc3(year =3D "2008", desc =3D "text with 2007 and 2009")

To search I use a BooleanQuery with a TermQuery (very high boosted), a Pref=
ixQuery (high boosted) and a WildcardQuery (normal boost).

when I search for "2007" I get=20
doc1
doc2
doc3

when I search for "2009" I get
doc2
doc1
doc3

Looks like the "exact match" on year is rated higher, which is good. Now wh=
en I set the boost factor of year to 2f I get the same results. But when I =
set the boost factor of year to 10f the order is inversed, i.e. the matchin=
g on desc is rated higher.=20

How come?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49877-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun  2 19:52:11 2011
Return-Path: <java-user-return-49877-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9866D4587
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  2 Jun 2011 19:52:11 +0000 (UTC)
Received: (qmail 71079 invoked by uid 500); 2 Jun 2011 19:52:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70987 invoked by uid 500); 2 Jun 2011 19:52:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70978 invoked by uid 99); 2 Jun 2011 19:52:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Jun 2011 19:52:09 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [134.174.150.163] (HELO itmxipcp02.med.harvard.edu) (134.174.150.163)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Jun 2011 19:51:59 +0000
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: Ai0FAMno502Grg52XGdsb2JhbABTpjgKHAYmHgerHJYRiHSGIQSVLAmKfg
X-IronPort-AV: E=Sophos;i="4.65,311,1304308800"; 
   d="scan'208";a="64169783"
Received: from itwmxhtp01.med.harvard.edu ([134.174.14.118])
  by itmxipcp02.med.harvard.edu with ESMTP/TLS/AES128-SHA; 02 Jun 2011 15:51:38 -0400
Received: from [10.0.82.106] (134.174.14.28) by ITWMXHTP01.MED.HARVARD.EDU
 (134.174.14.120) with Microsoft SMTP Server (TLS) id 8.3.159.3; Thu, 2 Jun
 2011 15:51:38 -0400
Message-ID: <4DE7E9BC.7000304@hms.harvard.edu>
Date: Thu, 2 Jun 2011 15:51:24 -0400
From: Clint Gilbert <clint_gilbert@hms.harvard.edu>
User-Agent: Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.2.17) Gecko/20110424 Lightning/1.0b2 Thunderbird/3.1.10
MIME-Version: 1.0
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: Federated relevance ranking
X-Enigmail-Version: 1.1.2
OpenPGP: id=7314793B
Content-Type: text/plain; charset="ISO-8859-1"
Content-Transfer-Encoding: 7bit

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi everyone,

I searched the list archives, but couldn't find a question that closely
matches mine.

The project I'm working on is designed to allow searching a distributed
collection of data repositories.  Currently, we index each repository to
build a central Lucene index.  This works ok, but for practical (the
central index is getting very large) and architectural (decentralization
is a design goal) reasons, we'd like to distribute the index.

In the past, we had basic federation system in place: when a user
submitted a query, the query was broadcast to each data repository,
which had its own independent Lucene index.  Results from each repo were
aggregated in reverse order.

The problem was, of course, that since each index was constructed
independently of all the others, and documents are distributed in the
repos unevenly, it was impossible to rank the results from all the
indices in a meaningful way.  We basically punted and interleaved
results, which didn't gave a bad user experience, hence the temporary
switch to a central index.

So, what options exist for searching distributed collections of Lucene
indices and ranking results meaningfully?

Katta seems promising, but I don't know enough about it yet.  It also
seems to want to open its own ports for RPC.  I'd prefer something that
could tunnel over HTTP to minimize firewall drama.  (We will have 10s
and then 100s of data repos running in separate locations.)

We're also considering a home-grown scheme involving normalizing the
denominators of all the index components in all our indices, based on
the sums of counts obtained from all the indices.  This feels like
re-inventing the wheel, and it's not clear to me yet that the low-level
manipulation of indices that we'd need to do is even possible.

Any suggestions for distributing indices while ranking results well are
very welcome!
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.10 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk3n6bsACgkQ5IyIbnMUeTsOFACeM2lsWKXguf8XYUFdDbYtmzc1
Qd8Anjx670zjQ7KYjnxXVQXuR+CBjxCs
=Jnkt
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49878-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun  2 23:00:06 2011
Return-Path: <java-user-return-49878-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 361674A73
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  2 Jun 2011 23:00:06 +0000 (UTC)
Received: (qmail 64328 invoked by uid 500); 2 Jun 2011 23:00:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64286 invoked by uid 500); 2 Jun 2011 23:00:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64278 invoked by uid 99); 2 Jun 2011 23:00:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Jun 2011 23:00:03 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Jun 2011 22:59:58 +0000
Received: by qwj9 with SMTP id 9so920416qwj.35
        for <java-user@lucene.apache.org>; Thu, 02 Jun 2011 15:59:38 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=Q1Jc69/4gTJTrVskoo6x3zxKfvpVd2lifzGTZ8iYi8I=;
        b=s2Aj/Ejd1Wnn45gfDPdmP2IeZfvAaLmT5lnn+QQDOh6dBGSPy+JrCIk6x82XP+crtT
         5AOFxYu6x+ebgHHvuL5F0LPemwRc79kTJNuV3iQPhPUViI27xbkD+jkMUbYTJI1jTtCS
         NKAGLmQF264ZUfEQRZeLVvrttbVXmse2dm3YU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=cdXKpE+zdl8e9ASQCPFn7iVw+2jd/Kcp9JMYa15I5nTRpSxzEzzm+7vqDoUkEZatfd
         FB0MfJYeoLseoqsG/dsSRbAmRuqMwhkbjRKT1/gOOXReTQ+z/8PgQTt/n/HGxjuEq8rR
         gXjSV2v5PfkTU4sNnJxjtuoufUSh+66zvzNSo=
MIME-Version: 1.0
Received: by 10.229.101.36 with SMTP id a36mr1021747qco.74.1307055577891; Thu,
 02 Jun 2011 15:59:37 -0700 (PDT)
Received: by 10.229.95.202 with HTTP; Thu, 2 Jun 2011 15:59:37 -0700 (PDT)
In-Reply-To: <E594BA962D832C49A3CF858DAA3A696C1135ACD42B@Exchange2007.mysigndomain.corp>
References: <E594BA962D832C49A3CF858DAA3A696C1135ACD42B@Exchange2007.mysigndomain.corp>
Date: Thu, 2 Jun 2011 18:59:37 -0400
Message-ID: <BANLkTi=vUKJTG5rbxmt72ryKP-92Ki0s7Q@mail.gmail.com>
Subject: Re: boosting fields
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

Have you tried using the explain method on a Searcher and examining the results?

Best
Erick

On Thu, Jun 2, 2011 at 3:51 PM, Clemens Wyss <clemensdev@mysign.ch> wrote:
> I have a minimal unit test in which I add three documents to an index. The documents have two fields "year" and "descritpion".
> doc1(year = "2007", desc = "text with 2007 and 2009")
> doc2(year = "2009", desc = "text with 2007 and 2009")
> doc3(year = "2008", desc = "text with 2007 and 2009")
>
> To search I use a BooleanQuery with a TermQuery (very high boosted), a PrefixQuery (high boosted) and a WildcardQuery (normal boost).
>
> when I search for "2007" I get
> doc1
> doc2
> doc3
>
> when I search for "2009" I get
> doc2
> doc1
> doc3
>
> Looks like the "exact match" on year is rated higher, which is good. Now when I set the boost factor of year to 2f I get the same results. But when I set the boost factor of year to 10f the order is inversed, i.e. the matching on desc is rated higher.
>
> How come?
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49879-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun  2 23:06:19 2011
Return-Path: <java-user-return-49879-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4F64141EC
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  2 Jun 2011 23:06:19 +0000 (UTC)
Received: (qmail 72287 invoked by uid 500); 2 Jun 2011 23:06:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72192 invoked by uid 500); 2 Jun 2011 23:06:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72184 invoked by uid 99); 2 Jun 2011 23:06:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Jun 2011 23:06:17 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Jun 2011 23:06:10 +0000
Received: by qyk30 with SMTP id 30so878673qyk.14
        for <java-user@lucene.apache.org>; Thu, 02 Jun 2011 16:05:50 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type:content-transfer-encoding;
        bh=cBm3h63191vhc0ySSuilLHkNI7GNRuSyamR3QQm1XxQ=;
        b=kUqfbIv7RWEmZIdcz+18j8AcsHAnZY+otPl1PIFCBrhNWeTir+Tg+OWyCtIe2Lk+IW
         EwE122qnSxuOJbTMJpi7nsdGMvWwu+MugrVEepm7AjvNhtoYl07H3rpBvwMQMlqFN2WF
         OeoBm7ws+7PaDoaSzbs7WbeJ9r8wYEJ7KHVzY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=b91MsZizkae6fQDadP47DY3YqJ37PqSAshvAOSklrZtzoprvViVhJuCHcrsBGxresc
         CFyhYM42EqLQ27Crybc20hhzjXhejDnHYwMdOm1E4nN20slg33vgBco3gckNY0KVwIAe
         rKLMARZZRxLs1xSWlHaHYHTHEdkDku2qJibXA=
MIME-Version: 1.0
Received: by 10.224.212.71 with SMTP id gr7mr941071qab.198.1307055949890; Thu,
 02 Jun 2011 16:05:49 -0700 (PDT)
Received: by 10.229.95.202 with HTTP; Thu, 2 Jun 2011 16:05:49 -0700 (PDT)
In-Reply-To: <4DE7E9BC.7000304@hms.harvard.edu>
References: <4DE7E9BC.7000304@hms.harvard.edu>
Date: Thu, 2 Jun 2011 19:05:49 -0400
Message-ID: <BANLkTimkPkeUgrShAFe4mHqjDsuhZNeRTA@mail.gmail.com>
Subject: Re: Federated relevance ranking
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

As you've found out, raw scores certainly aren't comparable across
different indexes
#unless# the documents are fairly distributed. You're talking large
indexes here,
so if the documents are balanced across all your indexes, the results shoul=
d be
pretty comparable. This pre-supposes that the indexes share a common schema
and that the distributions of terms are "close enough to identical" to be t=
ruly
comparable. And it supposes that your indexes are similar in
character. It wouldn't
work if one of your indexes had, say, meta-data from videos and another had
scholarly journal articles.

Otherwise, there's work going on in Solr that might help, although I
don't know when
that'll be available.

Other than that, I don't know what to suggest. It's not an easy
problem or Solr/Lucene
would already have solved it.. siiiggggh.

Best
Erick

On Thu, Jun 2, 2011 at 3:51 PM, Clint Gilbert
<clint_gilbert@hms.harvard.edu> wrote:
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
>
> Hi everyone,
>
> I searched the list archives, but couldn't find a question that closely
> matches mine.
>
> The project I'm working on is designed to allow searching a distributed
> collection of data repositories. =A0Currently, we index each repository t=
o
> build a central Lucene index. =A0This works ok, but for practical (the
> central index is getting very large) and architectural (decentralization
> is a design goal) reasons, we'd like to distribute the index.
>
> In the past, we had basic federation system in place: when a user
> submitted a query, the query was broadcast to each data repository,
> which had its own independent Lucene index. =A0Results from each repo wer=
e
> aggregated in reverse order.
>
> The problem was, of course, that since each index was constructed
> independently of all the others, and documents are distributed in the
> repos unevenly, it was impossible to rank the results from all the
> indices in a meaningful way. =A0We basically punted and interleaved
> results, which didn't gave a bad user experience, hence the temporary
> switch to a central index.
>
> So, what options exist for searching distributed collections of Lucene
> indices and ranking results meaningfully?
>
> Katta seems promising, but I don't know enough about it yet. =A0It also
> seems to want to open its own ports for RPC. =A0I'd prefer something that
> could tunnel over HTTP to minimize firewall drama. =A0(We will have 10s
> and then 100s of data repos running in separate locations.)
>
> We're also considering a home-grown scheme involving normalizing the
> denominators of all the index components in all our indices, based on
> the sums of counts obtained from all the indices. =A0This feels like
> re-inventing the wheel, and it's not clear to me yet that the low-level
> manipulation of indices that we'd need to do is even possible.
>
> Any suggestions for distributing indices while ranking results well are
> very welcome!
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG v1.4.10 (GNU/Linux)
> Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/
>
> iEYEARECAAYFAk3n6bsACgkQ5IyIbnMUeTsOFACeM2lsWKXguf8XYUFdDbYtmzc1
> Qd8Anjx670zjQ7KYjnxXVQXuR+CBjxCs
> =3DJnkt
> -----END PGP SIGNATURE-----
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49880-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun  2 23:50:28 2011
Return-Path: <java-user-return-49880-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1DC584D30
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  2 Jun 2011 23:50:28 +0000 (UTC)
Received: (qmail 19103 invoked by uid 500); 2 Jun 2011 23:50:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19058 invoked by uid 500); 2 Jun 2011 23:50:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19050 invoked by uid 99); 2 Jun 2011 23:50:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Jun 2011 23:50:25 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [134.174.150.162] (HELO itmxipcp01.med.harvard.edu) (134.174.150.162)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Jun 2011 23:50:17 +0000
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: AkQFAKQg6E2Grg52XGdsb2JhbABTpjoKHAYmJcBIiHSGIQSVMQmLAA
X-IronPort-AV: E=Sophos;i="4.65,311,1304308800"; 
   d="scan'208";a="68653504"
Received: from itwmxhtp01.med.harvard.edu ([134.174.14.118])
  by itmxipcp01.med.harvard.edu with ESMTP/TLS/AES128-SHA; 02 Jun 2011 19:49:55 -0400
Received: from [10.0.82.106] (134.174.14.28) by ITWMXHTP01.MED.HARVARD.EDU
 (134.174.14.120) with Microsoft SMTP Server (TLS) id 8.3.159.3; Thu, 2 Jun
 2011 19:49:56 -0400
Message-ID: <4DE82195.7080009@hms.harvard.edu>
Date: Thu, 2 Jun 2011 19:49:41 -0400
From: Clint Gilbert <clint_gilbert@hms.harvard.edu>
User-Agent: Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.2.17) Gecko/20110424 Lightning/1.0b2 Thunderbird/3.1.10
MIME-Version: 1.0
To: <java-user@lucene.apache.org>
Subject: Re: Federated relevance ranking
References: <4DE7E9BC.7000304@hms.harvard.edu> <BANLkTimkPkeUgrShAFe4mHqjDsuhZNeRTA@mail.gmail.com>
In-Reply-To: <BANLkTimkPkeUgrShAFe4mHqjDsuhZNeRTA@mail.gmail.com>
X-Enigmail-Version: 1.1.2
OpenPGP: id=7314793B
Content-Type: text/plain; charset="ISO-8859-1"
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Thank you very much for your reply.  Yeah, our indexes (indices?)
contain different types and amounts of data. :( The data being indexed
is all the same format - RDF - but it describes different numbers and
kinds of things.

What is your gut feeling on whether or not it's a good idea for us to
roll our own?  Katta is a contender, but we already have a fairly
complex system, and adding anything Hadoop-related feels like it might
push us over a tipping point into the realm of unwieldy overcomplexity.
 But, this is a hard problem after all, so some amount of complexity is
inevitable.

On 06/02/2011 07:05 PM, Erick Erickson wrote:
> As you've found out, raw scores certainly aren't comparable across
> different indexes
> #unless# the documents are fairly distributed. You're talking large
> indexes here,
> so if the documents are balanced across all your indexes, the results should be
> pretty comparable. This pre-supposes that the indexes share a common schema
> and that the distributions of terms are "close enough to identical" to be truly
> comparable. And it supposes that your indexes are similar in
> character. It wouldn't
> work if one of your indexes had, say, meta-data from videos and another had
> scholarly journal articles.
> 
> Otherwise, there's work going on in Solr that might help, although I
> don't know when
> that'll be available.
> 
> Other than that, I don't know what to suggest. It's not an easy
> problem or Solr/Lucene
> would already have solved it.. siiiggggh.
> 
> Best
> Erick
> 
> On Thu, Jun 2, 2011 at 3:51 PM, Clint Gilbert
> <clint_gilbert@hms.harvard.edu> wrote:
> Hi everyone,
> 
> I searched the list archives, but couldn't find a question that closely
> matches mine.
> 
> The project I'm working on is designed to allow searching a distributed
> collection of data repositories.  Currently, we index each repository to
> build a central Lucene index.  This works ok, but for practical (the
> central index is getting very large) and architectural (decentralization
> is a design goal) reasons, we'd like to distribute the index.
> 
> In the past, we had basic federation system in place: when a user
> submitted a query, the query was broadcast to each data repository,
> which had its own independent Lucene index.  Results from each repo were
> aggregated in reverse order.
> 
> The problem was, of course, that since each index was constructed
> independently of all the others, and documents are distributed in the
> repos unevenly, it was impossible to rank the results from all the
> indices in a meaningful way.  We basically punted and interleaved
> results, which didn't gave a bad user experience, hence the temporary
> switch to a central index.
> 
> So, what options exist for searching distributed collections of Lucene
> indices and ranking results meaningfully?
> 
> Katta seems promising, but I don't know enough about it yet.  It also
> seems to want to open its own ports for RPC.  I'd prefer something that
> could tunnel over HTTP to minimize firewall drama.  (We will have 10s
> and then 100s of data repos running in separate locations.)
> 
> We're also considering a home-grown scheme involving normalizing the
> denominators of all the index components in all our indices, based on
> the sums of counts obtained from all the indices.  This feels like
> re-inventing the wheel, and it's not clear to me yet that the low-level
> manipulation of indices that we'd need to do is even possible.
> 
> Any suggestions for distributing indices while ranking results well are
> very welcome!
>>
- ---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>

> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.10 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk3oIZUACgkQ5IyIbnMUeTuemwCeMfolvNVEjve9fIEJHy3N3TV/
0VIAn2Xf+ypB5PRS45ekmiXEDhmvDdhZ
=jtE9
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49881-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jun  3 01:20:36 2011
Return-Path: <java-user-return-49881-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2F67445A8
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri,  3 Jun 2011 01:20:36 +0000 (UTC)
Received: (qmail 99674 invoked by uid 500); 3 Jun 2011 01:20:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99624 invoked by uid 500); 3 Jun 2011 01:20:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99616 invoked by uid 99); 3 Jun 2011 01:20:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Jun 2011 01:20:33 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Jun 2011 01:20:27 +0000
Received: by vws7 with SMTP id 7so1816525vws.35
        for <java-user@lucene.apache.org>; Thu, 02 Jun 2011 18:20:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type:content-transfer-encoding;
        bh=wH8aPOjzZ5Te2qRb4vZqCF4buotWZiPRKnQZtK8ELzg=;
        b=MhU7rsrohYNfyRsqKbn2fUQsZbQUg6fY2QGWl1LqftiRBSyByATbI/7RO21d5pTstm
         RCUkqmNVal7MBApadmraXj1M6cjA8JWGHvVZpnljGgcqjiWhCZ11dro5w9IiMv+r1ruO
         2roNlJQrecDkW9Rzv5rgk23OftS9pbsp1ItDc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=jAffHFKp3kGVzoaZP0L5JYX6mobzAFrWAh5LS0x90W4j1/xwSSd7y9Nbn33urF59ZV
         akAtRK9TJuuXDrGjnD8p85BzA1AcW16pMLXzgA5GutmaHO+Wy3gQTWdNQf0mWCXD1Rga
         jZMAdZkqPTlq3SkaSmMo75OSm3+Pg7Sw2Eja8=
MIME-Version: 1.0
Received: by 10.220.202.137 with SMTP id fe9mr483882vcb.79.1307064006416; Thu,
 02 Jun 2011 18:20:06 -0700 (PDT)
Received: by 10.220.189.193 with HTTP; Thu, 2 Jun 2011 18:20:06 -0700 (PDT)
In-Reply-To: <4DE82195.7080009@hms.harvard.edu>
References: <4DE7E9BC.7000304@hms.harvard.edu>
	<BANLkTimkPkeUgrShAFe4mHqjDsuhZNeRTA@mail.gmail.com>
	<4DE82195.7080009@hms.harvard.edu>
Date: Thu, 2 Jun 2011 21:20:06 -0400
Message-ID: <BANLkTi=A=7nYFgVnodt9uPSqY+zOsefRiw@mail.gmail.com>
Subject: Re: Federated relevance ranking
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

My gut feel is there isn't really a good solution to intermingling the
results, since
they come from different sources, index different kinds of data etc.
The irreducible
problem is that a hit in one index is not comparable to a hit in
another, either from
a Lucene scoring perspective or from the user's viewpoint.

What people will do is fiddle with the ranking process (omitting
norms, etc), but that's
pretty clumsy all told.

Another approach is to look at it from a presentation perspective. How
can the various
types of documents be presented to a user helpfully? Does it make
sense to present,
say, tabs across the top for each data source? Present the top 3 items
from each source
and let the user follow links for more results from that datasource?
Facet on the
data sources?

If you go this route, you can put it all in a single index and just
facet, group (4.x), filter,
etc.(oops, got confused. grouping and faceting are Solr constructs
last I knew, but you
may want to check them out)....

In some ways this is more a UI design issue. You have different data
sets, what serves
the user best?

I guess my challenge for your product manager folks is to define what
a good user
experience is. Provide concrete use cases etc. Because I'll also guess
that you can
make Lucene do what's necessary to support the use-cases if they're
something other
than "mystically do the right thing, and I get to define the right
thing dynamically" <G>...

I remember when "indexes" became acceptable, and I still think it's wrong..=
.

Best
Erick

On Thu, Jun 2, 2011 at 7:49 PM, Clint Gilbert
<clint_gilbert@hms.harvard.edu> wrote:
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
>
> Thank you very much for your reply. =A0Yeah, our indexes (indices?)
> contain different types and amounts of data. :( The data being indexed
> is all the same format - RDF - but it describes different numbers and
> kinds of things.
>
> What is your gut feeling on whether or not it's a good idea for us to
> roll our own? =A0Katta is a contender, but we already have a fairly
> complex system, and adding anything Hadoop-related feels like it might
> push us over a tipping point into the realm of unwieldy overcomplexity.
> =A0But, this is a hard problem after all, so some amount of complexity is
> inevitable.
>
> On 06/02/2011 07:05 PM, Erick Erickson wrote:
>> As you've found out, raw scores certainly aren't comparable across
>> different indexes
>> #unless# the documents are fairly distributed. You're talking large
>> indexes here,
>> so if the documents are balanced across all your indexes, the results sh=
ould be
>> pretty comparable. This pre-supposes that the indexes share a common sch=
ema
>> and that the distributions of terms are "close enough to identical" to b=
e truly
>> comparable. And it supposes that your indexes are similar in
>> character. It wouldn't
>> work if one of your indexes had, say, meta-data from videos and another =
had
>> scholarly journal articles.
>>
>> Otherwise, there's work going on in Solr that might help, although I
>> don't know when
>> that'll be available.
>>
>> Other than that, I don't know what to suggest. It's not an easy
>> problem or Solr/Lucene
>> would already have solved it.. siiiggggh.
>>
>> Best
>> Erick
>>
>> On Thu, Jun 2, 2011 at 3:51 PM, Clint Gilbert
>> <clint_gilbert@hms.harvard.edu> wrote:
>> Hi everyone,
>>
>> I searched the list archives, but couldn't find a question that closely
>> matches mine.
>>
>> The project I'm working on is designed to allow searching a distributed
>> collection of data repositories. =A0Currently, we index each repository =
to
>> build a central Lucene index. =A0This works ok, but for practical (the
>> central index is getting very large) and architectural (decentralization
>> is a design goal) reasons, we'd like to distribute the index.
>>
>> In the past, we had basic federation system in place: when a user
>> submitted a query, the query was broadcast to each data repository,
>> which had its own independent Lucene index. =A0Results from each repo we=
re
>> aggregated in reverse order.
>>
>> The problem was, of course, that since each index was constructed
>> independently of all the others, and documents are distributed in the
>> repos unevenly, it was impossible to rank the results from all the
>> indices in a meaningful way. =A0We basically punted and interleaved
>> results, which didn't gave a bad user experience, hence the temporary
>> switch to a central index.
>>
>> So, what options exist for searching distributed collections of Lucene
>> indices and ranking results meaningfully?
>>
>> Katta seems promising, but I don't know enough about it yet. =A0It also
>> seems to want to open its own ports for RPC. =A0I'd prefer something tha=
t
>> could tunnel over HTTP to minimize firewall drama. =A0(We will have 10s
>> and then 100s of data repos running in separate locations.)
>>
>> We're also considering a home-grown scheme involving normalizing the
>> denominators of all the index components in all our indices, based on
>> the sums of counts obtained from all the indices. =A0This feels like
>> re-inventing the wheel, and it's not clear to me yet that the low-level
>> manipulation of indices that we'd need to do is even possible.
>>
>> Any suggestions for distributing indices while ranking results well are
>> very welcome!
>>>
> - ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG v1.4.10 (GNU/Linux)
> Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/
>
> iEYEARECAAYFAk3oIZUACgkQ5IyIbnMUeTuemwCeMfolvNVEjve9fIEJHy3N3TV/
> 0VIAn2Xf+ypB5PRS45ekmiXEDhmvDdhZ
> =3DjtE9
> -----END PGP SIGNATURE-----
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49882-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jun  3 06:39:59 2011
Return-Path: <java-user-return-49882-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9774C6DE1
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri,  3 Jun 2011 06:39:59 +0000 (UTC)
Received: (qmail 57998 invoked by uid 500); 3 Jun 2011 06:39:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57921 invoked by uid 500); 3 Jun 2011 06:39:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57892 invoked by uid 99); 3 Jun 2011 06:39:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Jun 2011 06:39:55 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of alexander.rosemann@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Jun 2011 06:39:45 +0000
Received: by wwi18 with SMTP id 18so911447wwi.5
        for <java-user@lucene.apache.org>; Thu, 02 Jun 2011 23:39:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:message-id:date:from:user-agent:mime-version:to
         :subject:references:in-reply-to:content-type
         :content-transfer-encoding;
        bh=cgOx58KUwog1i8mYTcmif7pQ7UiiWfaPAUIyk+nOyUs=;
        b=d6MKQrRtm7ZN/HNrRCT7x5PGReHa+foy0nXDoFrVqmGJhmTBfCGs9xQLVQ5iMyyRT2
         Ep7M7kXVfrGbpV/HZuTMVZDTUqk6NC5iPPJy57UwpgkYwxoscEf3BOdqDiwKrl+u5DkE
         pUYoJgyGeNYydp11vGAV6DqFm8l3gEnNioZZo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=kGOemVCVej4XS/Dpxfebtpa5DlGI0xptKoVrUrRyxHIJVsI4eYGXwGXwgwxx9qFxQq
         pTaAFruLUMmHP+XMDFQNVYOVgrSO+QP1tIXZp6ABCk3RoWw7t5fWx1z3vyZm6/1uVpxm
         iKYALIvGZnG5gEWBJxDOKe4kZEAoKRGMBZ3EM=
Received: by 10.216.39.82 with SMTP id c60mr2039434web.30.1307083165584;
        Thu, 02 Jun 2011 23:39:25 -0700 (PDT)
Received: from [10.64.58.100] ([90.146.67.182])
        by mx.google.com with ESMTPS id g4sm647062weg.36.2011.06.02.23.39.24
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 02 Jun 2011 23:39:24 -0700 (PDT)
Message-ID: <4DE88196.501@gmail.com>
Date: Fri, 03 Jun 2011 08:39:18 +0200
From: Alexander Rosemann <alexander.rosemann@gmail.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-GB; rv:1.9.2.17) Gecko/20110414 Lightning/1.0b2 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: multiple small indexes or one big index?
References: <4DE6A278.4030002@gmail.com>	<BANLkTi=8AvxMeF86mMBhkA1j5rxHi-VgyQ@mail.gmail.com>	<4DE6B10F.7090207@gmail.com>	<BANLkTimsBoV68F5FdDqmvp9-CMRF3w-AVQ@mail.gmail.com>	<4DE78FE3.2070106@gmail.com> <BANLkTikf7xtc-2fwYJwMqB6D0agEKD9vTw@mail.gmail.com> <4DE794B5.2010506@gmail.com>
In-Reply-To: <4DE794B5.2010506@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Alright. With all the changes you suggested I am down from 9s to <1s. 
Again, many thanks to both of you Erick and Shai!

Regards,
Alex

On 02.06.2011 15:48, Alexander Rosemann wrote:
> No worries, I'll keep that in mind now.
> In addition I am going to switch to another collector as well. ATM I
> collect the results and then sort them using the std. Collections.sort
> approach... I have to look what Lucene offers and switch to something else.
>
> Thanks,
> Alex
>
> On 02.06.2011 15:36, Erick Erickson wrote:
>> Sounds good, just be sure to keep your (now single) searcher open! Also,
>> be sure to measure queries after a while. The first few queries will
>> fill up
>> caches etc, so the time should improve after the first few.
>>
>> Best
>> Erick
>>
>> On Thu, Jun 2, 2011 at 9:28 AM, Alexander Rosemann
>> <alexander.rosemann@gmail.com> wrote:
>>> Hi Erick, caching the IndexSearchers didn't took too much effort and
>>> decreased searching already by 30%!
>>>
>>> I am busy changing the code to use a single index as you suggested atm.
>>> Still a few things left to be done but once I have it working I let
>>> you know
>>> how much faster it is for me.
>>>
>>> Thanks,
>>> Alex
>>>
>>> On 02.06.2011 13:04, Erick Erickson wrote:
>>>>
>>>> At this size, really consider going to a single index. The lack of
>>>> administrative headaches alone is probably well worth the effort....
>>>>
>>>> I almost guarantee that the time you spend re-writing things to keep
>>>> the searchers open (and finding the bugs!) will be far more than just
>>>> putting all the data in a single index.
>>>>
>>>> But that might just be my preferences showing....
>>>>
>>>> Best
>>>> Erick
>>>>
>>>> On Wed, Jun 1, 2011 at 5:37 PM, Alexander Rosemann
>>>> <alexander.rosemann@gmail.com> wrote:
>>>>>
>>>>> Many thanks for the tips, Erick! I do close each searcher after a
>>>>> search...
>>>>> I will change that first thing tmrw. and let you know how that went.
>>>>> Multi-threaded searching will be next and if that hasn't helped, I
>>>>> will
>>>>> switch to one big index.
>>>>> All indexes together are rather small, ~200MB and 50.000 documents.
>>>>>
>>>>> -Alex
>>>>>
>>>>> On 01.06.2011 23:26, Erick Erickson wrote:
>>>>>>
>>>>>> I'd start by putting them all in one index. There's no penalty
>>>>>> in Lucene for having empty fields in a document, unlike an
>>>>>> RDBMS.
>>>>>>
>>>>>> Alternately, if you're opening then closing searchers each
>>>>>> time, that's very expensive. Could you open the searchers
>>>>>> once and keep them open (all 90 of them)? That alone might
>>>>>> do the trick and be less of a change to your program. You
>>>>>> could also fire multiple threads at the searches, but check if
>>>>>> you're CPU bound first (if you are, multiple threads won't
>>>>>> help much/at all).
>>>>>>
>>>>>> You haven't said how big these indexes are nor how many
>>>>>> documents you're talking about here, so this advice is suspect.
>>>>>>
>>>>>> Do look at putting it all in one index though, let us know if you
>>>>>> have some data indicating how big stuff is/would be.
>>>>>>
>>>>>> Best
>>>>>> Erick
>>>>>>
>>>>>> On Wed, Jun 1, 2011 at 4:35 PM, Alexander Rosemann
>>>>>> <alexander.rosemann@gmail.com> wrote:
>>>>>>>
>>>>>>> Hi all, I was wondering whether you could give me some advice on
>>>>>>> how to
>>>>>>> improve my search performance.
>>>>>>>
>>>>>>> I have 90 lucene indexes, each having different fields (~5 per
>>>>>>> Document).
>>>>>>> When I search, I always have to go through all indexes to build my
>>>>>>> result
>>>>>>> set. Searching one index takes approx. 100ms, thus searching all
>>>>>>> indexes
>>>>>>> takes 9s in total.
>>>>>>>
>>>>>>> How can I reduce the time it needs to search?
>>>>>>>
>>>>>>> I decided to create this many indexes because putting all data in
>>>>>>> one
>>>>>>> index
>>>>>>> would mean that a document would have ~400 fields, with most of them
>>>>>>> left
>>>>>>> empty. Is that ok? Would a single index be faster compared to
>>>>>>> multiple
>>>>>>> small
>>>>>>> ones?
>>>>>>>
>>>>>>> Any pointers are much appreciated.
>>>>>>>
>>>>>>> Regards,
>>>>>>> Alex
>>>>>>>
>>>>>>> ---------------------------------------------------------------------
>>>>>>>
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>
>>>>>>>
>>>>>>
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49883-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jun  3 09:22:08 2011
Return-Path: <java-user-return-49883-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5E9186E3C
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri,  3 Jun 2011 09:22:08 +0000 (UTC)
Received: (qmail 52282 invoked by uid 500); 3 Jun 2011 09:22:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52226 invoked by uid 500); 3 Jun 2011 09:22:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52205 invoked by uid 99); 3 Jun 2011 09:22:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Jun 2011 09:22:04 +0000
X-ASF-Spam-Status: No, hits=0.2 required=5.0
	tests=ASF_LIST_OPS,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [182.71.53.3] (HELO mail.otssolutions.com) (182.71.53.3)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Jun 2011 09:21:59 +0000
Received: from MAIL.otssolutions.com ([fe80::cde4:3636:c426:275a]) by
 MAIL.otssolutions.com ([fe80::cde4:3636:c426:275a%11]) with mapi; Fri, 3 Jun
 2011 14:47:28 +0530
From: Ranjit Kumar <Ranjit.Kumar@otssolutions.com>
To: "java-user-help@lucene.apache.org" <java-user-help@lucene.apache.org>,
	"java-user@lucene.apache.org" <java-user@lucene.apache.org>
CC: Varun Tuli <varun.tuli@otssolutions.com>
Subject: Boolean Search In Lucene
Thread-Topic: Boolean Search In Lucene
Thread-Index: AcwhzwxH7cxDHzYhSlKaRZQvdsoi5g==
Date: Fri, 3 Jun 2011 09:17:23 +0000
Message-ID: <AD21521D44870544AC66F4FDFC0A474C662EEBBC@MAIL.otssolutions.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
Content-Type: multipart/alternative;
	boundary="_000_AD21521D44870544AC66F4FDFC0A474C662EEBBCMAILotssolution_"
MIME-Version: 1.0

--_000_AD21521D44870544AC66F4FDFC0A474C662EEBBCMAILotssolution_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,
As per the Grouping discussion in the URL below:
http://lucene.apache.org/java/3_0_3/queryparsersyntax.html
(jakarta OR apache) AND website query means website must exist and either t=
erm jakarta or apache may exist.

If we write query like (jakarta AND apache) OR website what happen?
Is it possible that we can get the document that contains 'jakarta' AND 'ap=
ache'. Also document may contain 'website'?
Is it possible that if the document do not contains 'jakarta' AND 'apache',=
 but contains 'website', the search result will give the result for documen=
t that contains 'website'?

Another example:

If you search for "(a AND b)" it will return x results
If you search for "c" it will return y results
If you search for "(a and b) or c" the number of results cannot be less tha=
n the larger of x or y. But this is not happening. Please help how should I=
 proceed to implement this?

Any help or suggestion will be appreciated!!!
Thanks & Regards,
Ranjit Kumar
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D Pr=
ivate, Confidential and Privileged. This e-mail and any files and attachmen=
ts transmitted with it are confidential and/or privileged. They are intende=
d solely for the use of the intended recipient. The content of this e-mail =
and any file or attachment transmitted with it may have been changed or alt=
ered without the consent of the author. If you are not the intended recipie=
nt, please note that any review, dissemination, disclosure, alteration, pri=
nting, circulation or Transmission of this e-mail and/or any file or attach=
ment transmitted with it, is prohibited and may be unlawful. If you have re=
ceived this e-mail or any file or attachment transmitted with it in error p=
lease notify OTS Solutions at info@otssolutions.com =3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D

--_000_AD21521D44870544AC66F4FDFC0A474C662EEBBCMAILotssolution_--

From java-user-return-49884-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jun  3 09:25:39 2011
Return-Path: <java-user-return-49884-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A96516F8F
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri,  3 Jun 2011 09:25:39 +0000 (UTC)
Received: (qmail 59958 invoked by uid 500); 3 Jun 2011 09:25:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59879 invoked by uid 500); 3 Jun 2011 09:25:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59866 invoked by uid 99); 3 Jun 2011 09:25:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Jun 2011 09:25:37 +0000
X-ASF-Spam-Status: No, hits=0.2 required=5.0
	tests=ASF_LIST_OPS,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [182.71.53.3] (HELO mail.otssolutions.com) (182.71.53.3)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Jun 2011 09:25:32 +0000
Received: from MAIL.otssolutions.com ([fe80::cde4:3636:c426:275a]) by
 MAIL.otssolutions.com ([fe80::cde4:3636:c426:275a%11]) with mapi; Fri, 3 Jun
 2011 14:51:02 +0530
From: Ranjit Kumar <Ranjit.Kumar@otssolutions.com>
To: "java-user-help@lucene.apache.org" <java-user-help@lucene.apache.org>,
	"java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: Boolean Search In Lucene
Thread-Topic: Boolean Search In Lucene
Thread-Index: Acwhz4zpVzdeXUCyTcqmOwFND3Or9g==
Date: Fri, 3 Jun 2011 09:20:59 +0000
Message-ID: <AD21521D44870544AC66F4FDFC0A474C662EFFA6@MAIL.otssolutions.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
Content-Type: multipart/alternative;
	boundary="_000_AD21521D44870544AC66F4FDFC0A474C662EFFA6MAILotssolution_"
MIME-Version: 1.0

--_000_AD21521D44870544AC66F4FDFC0A474C662EFFA6MAILotssolution_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,
As per the Grouping discussion in the URL below:
http://lucene.apache.org/java/3_0_3/queryparsersyntax.html
(jakarta OR apache) AND website query means website must exist and either t=
erm jakarta or apache may exist.

If we write query like (jakarta AND apache) OR website what happen?
Is it possible that we can get the document that contains 'jakarta' AND 'ap=
ache'. Also document may contain 'website'?
Is it possible that if the document do not contains 'jakarta' AND 'apache',=
 but contains 'website', the search result will give the result for documen=
t that contains 'website'?

Another example:

If you search for "(a AND b)" it will return x results
If you search for "c" it will return y results
If you search for "(a and b) or c" the number of results cannot be less tha=
n the larger of x or y. But this is not happening. Please help how should I=
 proceed to implement this?

Any help or suggestion will be appreciated!!!
Thanks & Regards,
Ranjit Kumar
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D Pr=
ivate, Confidential and Privileged. This e-mail and any files and attachmen=
ts transmitted with it are confidential and/or privileged. They are intende=
d solely for the use of the intended recipient. The content of this e-mail =
and any file or attachment transmitted with it may have been changed or alt=
ered without the consent of the author. If you are not the intended recipie=
nt, please note that any review, dissemination, disclosure, alteration, pri=
nting, circulation or Transmission of this e-mail and/or any file or attach=
ment transmitted with it, is prohibited and may be unlawful. If you have re=
ceived this e-mail or any file or attachment transmitted with it in error p=
lease notify OTS Solutions at info@otssolutions.com =3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D

--_000_AD21521D44870544AC66F4FDFC0A474C662EFFA6MAILotssolution_--

From java-user-return-49885-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jun  3 18:04:50 2011
Return-Path: <java-user-return-49885-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C577E65D8
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri,  3 Jun 2011 18:04:50 +0000 (UTC)
Received: (qmail 67706 invoked by uid 500); 3 Jun 2011 18:04:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67667 invoked by uid 500); 3 Jun 2011 18:04:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67659 invoked by uid 99); 3 Jun 2011 18:04:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Jun 2011 18:04:48 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jayendra.patil.001@gmail.com designates 209.85.218.48 as permitted sender)
Received: from [209.85.218.48] (HELO mail-yi0-f48.google.com) (209.85.218.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Jun 2011 18:04:43 +0000
Received: by yib12 with SMTP id 12so1021660yib.35
        for <java-user@lucene.apache.org>; Fri, 03 Jun 2011 11:04:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type:content-transfer-encoding;
        bh=eqswXLgeNIHR2qq0BVlSCJrqGrprf6vaNxklimki/eQ=;
        b=O8UXC7ohAgqDNriafrGUGACxHjWV4cgLsLike5LLVw/eF1M+FjAk/2s6x8fzk8ScQ5
         qYdm+H2BGi5QT6tKkDLBb0ojs/FlPDu+I4qpuUo36xGQNxE5rT/BSq+pSwltKNN+gyzk
         WpOtIgwvGzOGDDWpEFzCC1sfw1SzT9dn/B9Lg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=xrr4tywOt/Yr3ZQLfCTHd2f0H8HznPfiwpUNLAJuGJaY3b+CaBNRHXFAhVzjN1PbAS
         VVqOymd0AupVrYuXa77qRQvK6Tzognuis5bQJu3KOk+lByjca9x1zcXoy2utSMUndPoS
         WGBXkzIuX0kFE3l26UoQsM1GKEf8V1dv0XvzA=
MIME-Version: 1.0
Received: by 10.236.184.103 with SMTP id r67mr3021765yhm.254.1307124262267;
 Fri, 03 Jun 2011 11:04:22 -0700 (PDT)
Received: by 10.147.83.12 with HTTP; Fri, 3 Jun 2011 11:04:22 -0700 (PDT)
In-Reply-To: <AD21521D44870544AC66F4FDFC0A474C662EFFA6@MAIL.otssolutions.com>
References: <AD21521D44870544AC66F4FDFC0A474C662EFFA6@MAIL.otssolutions.com>
Date: Fri, 3 Jun 2011 14:04:22 -0400
Message-ID: <BANLkTin=TxO7jcMbz=jryjC-gMpdGxqCgw@mail.gmail.com>
Subject: Re: Boolean Search In Lucene
From: Jayendra Patil <jayendra.patil.001@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

The Boolean operators provided basically map to MUST (+), SHOULD (no
symbol) and NOT (-)

If we write query like (jakarta AND apache) OR website what happen?
>> It will return results with documents having Jakarta & Apache or Website

Is it possible that we can get the document that contains 'jakarta'
AND 'apache'. Also document may contain 'website'?
>> +jakarta + apache website should do the trick

Is it possible that if the document do not contains 'jakarta' AND
'apache', but contains 'website', the search result will give the
result for document that contains 'website'?
>> something like this should work -(+jakarta +apache) +website

Another example:

If you search for "(a AND b)" it will return x results
If you search for "c" it will return y results
If you search for "(a and b) or c" the number of results cannot be
less than the larger of x or y. But this is not happening. Please help
how should I proceed to implement this?
>> Should not happen, you may just want to check the query that got execute=
d.

Regards,
Jayendra

On Fri, Jun 3, 2011 at 5:20 AM, Ranjit Kumar
<Ranjit.Kumar@otssolutions.com> wrote:
> Hi,
> As per the Grouping discussion in the URL below:
> http://lucene.apache.org/java/3_0_3/queryparsersyntax.html
> (jakarta OR apache) AND website query means website must exist and either=
 term jakarta or apache may exist.
>
> If we write query like (jakarta AND apache) OR website what happen?
> Is it possible that we can get the document that contains 'jakarta' AND '=
apache'. Also document may contain 'website'?
> Is it possible that if the document do not contains 'jakarta' AND 'apache=
', but contains 'website', the search result will give the result for docum=
ent that contains 'website'?
>
> Another example:
>
> If you search for "(a AND b)" it will return x results
> If you search for "c" it will return y results
> If you search for "(a and b) or c" the number of results cannot be less t=
han the larger of x or y. But this is not happening. Please help how should=
 I proceed to implement this?
>
> Any help or suggestion will be appreciated!!!
> Thanks & Regards,
> Ranjit Kumar
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
 Private, Confidential and Privileged. This e-mail and any files and attach=
ments transmitted with it are confidential and/or privileged. They are inte=
nded solely for the use of the intended recipient. The content of this e-ma=
il and any file or attachment transmitted with it may have been changed or =
altered without the consent of the author. If you are not the intended reci=
pient, please note that any review, dissemination, disclosure, alteration, =
printing, circulation or Transmission of this e-mail and/or any file or att=
achment transmitted with it, is prohibited and may be unlawful. If you have=
 received this e-mail or any file or attachment transmitted with it in erro=
r please notify OTS Solutions at info@otssolutions.com =3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49886-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jun  3 21:00:14 2011
Return-Path: <java-user-return-49886-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 22F1A6DF7
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri,  3 Jun 2011 21:00:14 +0000 (UTC)
Received: (qmail 33969 invoked by uid 500); 3 Jun 2011 21:00:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33786 invoked by uid 500); 3 Jun 2011 21:00:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33777 invoked by uid 99); 3 Jun 2011 21:00:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Jun 2011 21:00:11 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Jun 2011 21:00:05 +0000
Received: by qyk30 with SMTP id 30so1445508qyk.14
        for <java-user@lucene.apache.org>; Fri, 03 Jun 2011 13:59:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=d4s2IiprjslfRN6jsoT5yB0x5Q7hR7PCQq58UlGPfnw=;
        b=f3l2nD1vaDZn5+UQNAfxF45BUT/Uusk0Ew7IwWWymn8s+EDNtVxlDOkrTQeQSSn+Db
         xR1xBfhTf1i9PA2WFTaH+XkQy7polWKyOfDUZhrJCY2wHq4hir0LMwJk7ZAO6siJlklo
         OEjADk/hzrbopoPGhy4tM/xvHrZ8iPzECSuBc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=E6Iq2lZfJCEt9897PAGqfmMfUs4rkPCs4/ffPIPI7TqOKKzuhOp3ws2K51i9l+GGQq
         7XbwqoohfK96OXQKcVGJwiHrtmxruEL3Q8UQ32lV56imC2h3sXBksq8LCARJiwPTGIx/
         YmIqJ1cHcS0Xb+L9Bw9l47jURigltm4iEMveQ=
MIME-Version: 1.0
Received: by 10.229.101.36 with SMTP id a36mr1837089qco.74.1307134784390; Fri,
 03 Jun 2011 13:59:44 -0700 (PDT)
Received: by 10.229.95.202 with HTTP; Fri, 3 Jun 2011 13:59:44 -0700 (PDT)
In-Reply-To: <4DE88196.501@gmail.com>
References: <4DE6A278.4030002@gmail.com>
	<BANLkTi=8AvxMeF86mMBhkA1j5rxHi-VgyQ@mail.gmail.com>
	<4DE6B10F.7090207@gmail.com>
	<BANLkTimsBoV68F5FdDqmvp9-CMRF3w-AVQ@mail.gmail.com>
	<4DE78FE3.2070106@gmail.com>
	<BANLkTikf7xtc-2fwYJwMqB6D0agEKD9vTw@mail.gmail.com>
	<4DE794B5.2010506@gmail.com>
	<4DE88196.501@gmail.com>
Date: Fri, 3 Jun 2011 16:59:44 -0400
Message-ID: <BANLkTi=tAiKo5TS6_TeFFcFZsyVtZK-sLw@mail.gmail.com>
Subject: Re: multiple small indexes or one big index?
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

OK, if they're all in a single index, you might also try using Lucene
sorting. Be aware
that the first sort on a field takes extra time to warm the caches...

But note that sorting is for single-valued, un-tokenized fields..

Best
Erick

On Fri, Jun 3, 2011 at 2:39 AM, Alexander Rosemann
<alexander.rosemann@gmail.com> wrote:
> Alright. With all the changes you suggested I am down from 9s to <1s. Again,
> many thanks to both of you Erick and Shai!
>
> Regards,
> Alex
>
> On 02.06.2011 15:48, Alexander Rosemann wrote:
>>
>> No worries, I'll keep that in mind now.
>> In addition I am going to switch to another collector as well. ATM I
>> collect the results and then sort them using the std. Collections.sort
>> approach... I have to look what Lucene offers and switch to something
>> else.
>>
>> Thanks,
>> Alex
>>
>> On 02.06.2011 15:36, Erick Erickson wrote:
>>>
>>> Sounds good, just be sure to keep your (now single) searcher open! Also,
>>> be sure to measure queries after a while. The first few queries will
>>> fill up
>>> caches etc, so the time should improve after the first few.
>>>
>>> Best
>>> Erick
>>>
>>> On Thu, Jun 2, 2011 at 9:28 AM, Alexander Rosemann
>>> <alexander.rosemann@gmail.com> wrote:
>>>>
>>>> Hi Erick, caching the IndexSearchers didn't took too much effort and
>>>> decreased searching already by 30%!
>>>>
>>>> I am busy changing the code to use a single index as you suggested atm.
>>>> Still a few things left to be done but once I have it working I let
>>>> you know
>>>> how much faster it is for me.
>>>>
>>>> Thanks,
>>>> Alex
>>>>
>>>> On 02.06.2011 13:04, Erick Erickson wrote:
>>>>>
>>>>> At this size, really consider going to a single index. The lack of
>>>>> administrative headaches alone is probably well worth the effort....
>>>>>
>>>>> I almost guarantee that the time you spend re-writing things to keep
>>>>> the searchers open (and finding the bugs!) will be far more than just
>>>>> putting all the data in a single index.
>>>>>
>>>>> But that might just be my preferences showing....
>>>>>
>>>>> Best
>>>>> Erick
>>>>>
>>>>> On Wed, Jun 1, 2011 at 5:37 PM, Alexander Rosemann
>>>>> <alexander.rosemann@gmail.com> wrote:
>>>>>>
>>>>>> Many thanks for the tips, Erick! I do close each searcher after a
>>>>>> search...
>>>>>> I will change that first thing tmrw. and let you know how that went.
>>>>>> Multi-threaded searching will be next and if that hasn't helped, I
>>>>>> will
>>>>>> switch to one big index.
>>>>>> All indexes together are rather small, ~200MB and 50.000 documents.
>>>>>>
>>>>>> -Alex
>>>>>>
>>>>>> On 01.06.2011 23:26, Erick Erickson wrote:
>>>>>>>
>>>>>>> I'd start by putting them all in one index. There's no penalty
>>>>>>> in Lucene for having empty fields in a document, unlike an
>>>>>>> RDBMS.
>>>>>>>
>>>>>>> Alternately, if you're opening then closing searchers each
>>>>>>> time, that's very expensive. Could you open the searchers
>>>>>>> once and keep them open (all 90 of them)? That alone might
>>>>>>> do the trick and be less of a change to your program. You
>>>>>>> could also fire multiple threads at the searches, but check if
>>>>>>> you're CPU bound first (if you are, multiple threads won't
>>>>>>> help much/at all).
>>>>>>>
>>>>>>> You haven't said how big these indexes are nor how many
>>>>>>> documents you're talking about here, so this advice is suspect.
>>>>>>>
>>>>>>> Do look at putting it all in one index though, let us know if you
>>>>>>> have some data indicating how big stuff is/would be.
>>>>>>>
>>>>>>> Best
>>>>>>> Erick
>>>>>>>
>>>>>>> On Wed, Jun 1, 2011 at 4:35 PM, Alexander Rosemann
>>>>>>> <alexander.rosemann@gmail.com> wrote:
>>>>>>>>
>>>>>>>> Hi all, I was wondering whether you could give me some advice on
>>>>>>>> how to
>>>>>>>> improve my search performance.
>>>>>>>>
>>>>>>>> I have 90 lucene indexes, each having different fields (~5 per
>>>>>>>> Document).
>>>>>>>> When I search, I always have to go through all indexes to build my
>>>>>>>> result
>>>>>>>> set. Searching one index takes approx. 100ms, thus searching all
>>>>>>>> indexes
>>>>>>>> takes 9s in total.
>>>>>>>>
>>>>>>>> How can I reduce the time it needs to search?
>>>>>>>>
>>>>>>>> I decided to create this many indexes because putting all data in
>>>>>>>> one
>>>>>>>> index
>>>>>>>> would mean that a document would have ~400 fields, with most of them
>>>>>>>> left
>>>>>>>> empty. Is that ok? Would a single index be faster compared to
>>>>>>>> multiple
>>>>>>>> small
>>>>>>>> ones?
>>>>>>>>
>>>>>>>> Any pointers are much appreciated.
>>>>>>>>
>>>>>>>> Regards,
>>>>>>>> Alex
>>>>>>>>
>>>>>>>>
>>>>>>>> ---------------------------------------------------------------------
>>>>>>>>
>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>
>>>>>>>>
>>>>>>>
>>>>>>> ---------------------------------------------------------------------
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>
>>>>>>
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49887-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sat Jun  4 06:56:51 2011
Return-Path: <java-user-return-49887-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 71D334D0D
	for <apmail-lucene-java-user-archive@www.apache.org>; Sat,  4 Jun 2011 06:56:51 +0000 (UTC)
Received: (qmail 32202 invoked by uid 500); 4 Jun 2011 06:56:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32074 invoked by uid 500); 4 Jun 2011 06:56:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 54721 invoked by uid 99); 4 Jun 2011 03:50:25 -0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL,WEIRD_PORT
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jasontoy@gmail.com designates 209.85.214.48 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=qK9XdbzM4wTtJeeXd1LltGfn4BhCzr4m/iyLNQJtGg8=;
        b=dIC98wSOjrud6Ncwy3wtaUudbMndLm6Qas07SPH7/sLnujpG2d1VXAWIzgj3xt3a4q
         oxUJjqOayGDT/uhTb+LPpaxrpwHYgn9nK9VF5oBlBEfngnMp/Jr/IPg4pUFAGrsmHrnA
         SpxznPJIu+vCyOhUxTu7D8AswmcuBIxyYe8cQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=hr9HeOqPbk88msYwCOp4N19WtG9czgOm3vIDST0XaWVTHGfTt3S+/Dc5co1ocPpZ8u
         231j6O/O11hsmM54EP0Am+Jry4/uih+lf5m/Omaajcl9/6RvHRV8Fx6jLG8aQbJIspA7
         Mrf1QuhYvSw+BBHdUCrluhLCrng6O9HG6CgDg=
MIME-Version: 1.0
Date: Sat, 4 Jun 2011 03:49:58 +0000
Message-ID: <BANLkTik=0yT0d-TwL17KWXsrD9s3cTAQ-g@mail.gmail.com>
Subject: found a bug, not sure if its lucene or solr
From: Jason Toy <jasontoy@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=bcaec55401909d476f04a4dac39e
X-Virus-Checked: Checked by ClamAV on apache.org

--bcaec55401909d476f04a4dac39e
Content-Type: text/plain; charset=ISO-8859-1

Greetings all,
I found a bug today while trying to upgrade solr  from 1.4.1 to 3.1  I'm not
sure if this is a lucene or solr problem, I normally use lucene through
solr. I've already posted this to the solr mailing list, but I wanted to
notify the lucene group also.

In 1.4.1 I was able to insert this  doc:
<?xml version="1.0" encoding="UTF-8"?><add><doc><field name="id">User
14914457</field><field name="type">User</field><field name="city_s">San
Francisco</field><field name="name_text">jtoy</field><field
name="login_text">jtoy</field><field name="description_text">life
hacker</field><field name="scores:rails_f">0.05</field></doc></add>


And then I can run the query:

http://localhost:8983/solr/select?q=life&qf=description_text&defType=dismax&sort=scores:rails_f+desc

and I will get results.

If I insert the same document into solr 3.1 and run the same query I get the
error:

Problem accessing /solr/select. Reason:

    undefined field scores

For some reason, solr has cutoff the column name from the colon
forward so "scores:rails_f" becomes "scores"

I can see in the lucene index that the data for scores:rails_f is in
the document. For that reason I believe the bug is in solr and not in
lucene, but I'm not certain.





Jason Toy
socmetrics
http://socmetrics.com
@jtoy

--bcaec55401909d476f04a4dac39e--

From java-user-return-49888-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sat Jun  4 14:10:16 2011
Return-Path: <java-user-return-49888-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B78A846A5
	for <apmail-lucene-java-user-archive@www.apache.org>; Sat,  4 Jun 2011 14:10:16 +0000 (UTC)
Received: (qmail 46555 invoked by uid 500); 4 Jun 2011 14:10:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45746 invoked by uid 500); 4 Jun 2011 14:10:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45355 invoked by uid 99); 4 Jun 2011 14:10:11 -0000
Received: from minotaur.apache.org (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Jun 2011 14:10:11 +0000
Received: from localhost (HELO mail-bw0-f48.google.com) (127.0.0.1)
  (smtp-auth username rmuir, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Jun 2011 14:10:11 +0000
Received: by bwz8 with SMTP id 8so4221490bwz.35
        for <multiple recipients>; Sat, 04 Jun 2011 07:10:09 -0700 (PDT)
Received: by 10.204.74.21 with SMTP id s21mr3013622bkj.62.1307196609119; Sat,
 04 Jun 2011 07:10:09 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.38.75 with HTTP; Sat, 4 Jun 2011 07:09:49 -0700 (PDT)
From: Robert Muir <rmuir@apache.org>
Date: Sat, 4 Jun 2011 10:09:49 -0400
Message-ID: <BANLkTi=krpPdOn=X4XcPDivxqGYVsazNxg@mail.gmail.com>
Subject: [ANNOUNCE] Apache Lucene 3.2
To: Lucene mailing list <general@lucene.apache.org>, dev@lucene.apache.org, 
	java-user <java-user@lucene.apache.org>, announce@apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

June 2011, Apache Lucene=E2=84=A2 3.2 available
The Lucene PMC is pleased to announce the release of Apache Lucene 3.2.

Apache Lucene is a high-performance, full-featured text search engine
library written entirely in Java. It is a technology suitable for nearly
any application that requires full-text search, especially cross-platform.

This release contains numerous bug fixes, optimizations, and
improvements, some of which are highlighted below.  The release
is available for immediate download at:
   http://www.apache.org/dyn/closer.cgi/lucene/java (see note below).

See the CHANGES.txt file included with the release for a full list of detai=
ls.

Lucene 3.2 Release Highlights

 * A new grouping module, under lucene/contrib/grouping, enables
   search results to be grouped by a single-valued indexed field.

 * A new IndexUpgrader tool fully converts an old index to the
   current format.

 * A new Directory implementation, NRTCachingDirectory, caches small
   segments in RAM, to reduce the I/O load for applications with fast
   NRT reopen rates.

 * A new Collector implementation, CachingCollector, is able to
   gather search hits (document IDs and optionally also scores) and
   then replay them.  This is useful for Collectors that require two
   or more passes to produce results.

 * Index a document block using IndexWriter's new addDocuments or
   updateDocuments methods.  These experimental APIs ensure that the
   block of documents will forever remain contiguous in the index,
   enabling interesting future features like grouping and joins.

 * A new default merge policy, TieredMergePolicy, which is more
   efficient due to being able to merge non-contiguous segments.
   See http://s.apache.org/merging for details.

 * NumericField is now returned correctly when you load a stored
   document (previously you received a normal Field back, with the
   numeric value converted string).

 * Deleted terms are now applied during flushing to the newly flushed
   segment, which is more efficient than having to later initialize a
   reader for that segment.

Note: The Apache Software Foundation uses an extensive mirroring network fo=
r
distributing releases.  It is possible that the mirror you are using may no=
t
have replicated the release yet.  If that is the case, please try another
mirror.  This also goes for Maven access.

Thanks,
Apache Lucene Developers

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49889-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Jun  5 08:34:57 2011
Return-Path: <java-user-return-49889-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9D4C16A49
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun,  5 Jun 2011 08:34:57 +0000 (UTC)
Received: (qmail 94125 invoked by uid 500); 5 Jun 2011 08:34:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93972 invoked by uid 500); 5 Jun 2011 08:34:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93961 invoked by uid 99); 5 Jun 2011 08:34:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Jun 2011 08:34:54 +0000
X-ASF-Spam-Status: No, hits=3.0 required=5.0
	tests=FORGED_YAHOO_RCVD,FREEMAIL_FROM,RFC_ABUSE_POST,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Jun 2011 08:34:47 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <lethihongnhung_tg@yahoo.com>)
	id 1QT8mv-0006Oo-2z
	for java-user@lucene.apache.org; Sun, 05 Jun 2011 01:34:25 -0700
Date: Sun, 5 Jun 2011 01:34:25 -0700 (PDT)
From: NhungLe <lethihongnhung_tg@yahoo.com>
To: java-user@lucene.apache.org
Message-ID: <1307262865086-3025613.post@n3.nabble.com>
In-Reply-To: <AANLkTikenhP3GyUM8S9scCKXqasyC79Bd+L7szUchY_F@mail.gmail.com>
References: <31036291.49766.1297707405546.JavaMail.nabble@ben.nabble.com> <AANLkTikenhP3GyUM8S9scCKXqasyC79Bd+L7szUchY_F@mail.gmail.com>
Subject: Re: Multi Index Search Query
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

I have the same problem with Madhu, that i want to search over multi indexes
and over different fields.
Example: my search text: "lucene multi indexes",
 i want to search in index A (field: content1) and B (field: content2),
and the each result must contains "lucene multi indexes".
 
I tried to use MultiSearcher but I found that MultiSearcher returns the "OR"
results not "AND" 

Dose any one know how lucene can do it? or suggest me another way to do it?

Thanks,



--
View this message in context: http://lucene.472066.n3.nabble.com/Multi-Index-Search-Query-tp2494517p3025613.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49890-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun  6 06:30:04 2011
Return-Path: <java-user-return-49890-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0AB1A4752
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  6 Jun 2011 06:30:04 +0000 (UTC)
Received: (qmail 59995 invoked by uid 500); 6 Jun 2011 06:30:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59909 invoked by uid 500); 6 Jun 2011 06:29:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59862 invoked by uid 99); 6 Jun 2011 06:29:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Jun 2011 06:29:54 +0000
X-ASF-Spam-Status: No, hits=3.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of pranavgoyal40341@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Jun 2011 06:29:48 +0000
Received: by bwz8 with SMTP id 8so5405580bwz.35
        for <java-user@lucene.apache.org>; Sun, 05 Jun 2011 23:29:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:from:date:message-id:subject:to
         :content-type;
        bh=aVIT6ojrn6nRJWzXS4uLUZN8Z3G9I+tGfBRRmiBf1EM=;
        b=CtXf9xv37+4CpZI/Jvw4BepQsY2bWMHRV5+GRVf+Mt6KvTjwQ+l9kIPe/rkgodhfny
         DWjO0p8KiQWPdpfvFjvfcWUCluqjwZ9mTwd6W3G3RLBSkby/8JpgsYgasIFA5JP0Rm0P
         h/0hMTTNJcwPEV5I/NpeiAn4JEmpiNrU0dhAg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=jOLhSdQrVlQn4xsPlNgX1xJ1Id5fD+nGMLf8Aw6gTOXWkrJPLIcHYQ8sc1QLqkRlNG
         0Psw5BjMjush9vi4n04chmmzACP8ztyu45H+49WSTn01K7pHMiTKiqT/h6Gg/veK7DRw
         Gyj9nwD/cG9i1gJIho/R0B1tlxt2qSie/cShE=
Received: by 10.204.3.193 with SMTP id 1mr4621301bko.72.1307341765446; Sun, 05
 Jun 2011 23:29:25 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.112.79 with HTTP; Sun, 5 Jun 2011 23:29:05 -0700 (PDT)
From: Pranav goyal <pranavgoyal40341@gmail.com>
Date: Mon, 6 Jun 2011 11:59:05 +0530
Message-ID: <BANLkTikTJELRpn1ZJZaJv2EztzZY2kd72g@mail.gmail.com>
Subject: Lucene Indexing
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001517510e54878c5704a5053998

--001517510e54878c5704a5053998
Content-Type: text/plain; charset=ISO-8859-1

Hi all,

I am a newbie to lucene.
I have successfully created my lucene index. But I am not getting how to
invalidate previous indexes whenever I add/delete/update any field in my
lucene index.
Please help me out.

for better understanding I have wrote my indexing function :

StandardAnalyzer analyzer = new StandardAnalyzer(Version.LUCENE_31);
                IndexWriter writer = null;
                File indexDir = new File("./indexDir");
                try {
                        writer = new IndexWriter(FSDirectory.open(indexDir),
analyzer, IndexWriter.MaxFieldLength.UNLIMITED);
                }
                catch (IOException e1) {
                        e1.printStackTrace();
                }


                //Adding New fields to the document
                Document d = new Document();
                d.add(new Field("key", key , Field.Store.YES ,
Field.Index.ANALYZED));


                // d.add(Field.Text("obj", attribute.toString()));
                // index in Lucene here
                if (attribute instanceof String) {
                        System.out.println("IN CMnString ");
                        d.add(new Field("attribute",attribute.toString(),
Field.Store.YES, Field.Index.NO));
                        System.out.println("key is ->"+key+"...Attribute is
"+attribute);
                }
                else if (attribute instanceof CMnMoney) {
                        System.out.println("IN CMnMoney ");
                        d.add(new Field("attribute",attribute.toString(),
Field.Store.YES, Field.Index.NO));
                        System.out.println("key is ->"+key+"...Value is
"+attribute);
                }
                else if (attribute instanceof CMnQuantity) {
                        System.out.println("IN CMnQuantity ");
                        d.add(new Field("attribute",attribute.toString(),
Field.Store.YES, Field.Index.NO));
                        System.out.println("key is ->"+key+"...Attribute is
"+attribute);
                }
                else if (attribute instanceof CMnEnum) {
                        System.out.println("IN CMnEnum ");
                        d.add(new Field("attribute",attribute.toString(),
Field.Store.YES, Field.Index.NO));
                        System.out.println("key is ->"+key+"...Attribute is
"+attribute);
                }
                else {
                        // see what else is there....
                }
                try {
                        writer.addDocument(d);
                        writer.optimize() ;
                        writer.close();
                }
                catch (IOException e1) {
                        e1.printStackTrace();
                }
        }



Please guide me further as I got stuck at this point.

I have searched a lot about this and all I got is I have to first delete
that document and then add that document again to my index.

--001517510e54878c5704a5053998--

From java-user-return-49891-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun  6 09:06:06 2011
Return-Path: <java-user-return-49891-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4537047F7
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  6 Jun 2011 09:06:06 +0000 (UTC)
Received: (qmail 40186 invoked by uid 500); 6 Jun 2011 09:06:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40137 invoked by uid 500); 6 Jun 2011 09:06:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40123 invoked by uid 99); 6 Jun 2011 09:06:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Jun 2011 09:06:02 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.225.24.68] (HELO sbexch03.sb.statsbiblioteket.dk) (130.225.24.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Jun 2011 09:05:55 +0000
Received: from [130.225.25.23] (130.225.25.23) by
 sbexch03.sb.statsbiblioteket.dk (130.225.24.68) with Microsoft SMTP Server id
 8.3.159.2; Mon, 6 Jun 2011 11:05:33 +0200
Subject: Re: Federated relevance ranking
From: Toke Eskildsen <te@statsbiblioteket.dk>
Reply-To: te@statsbiblioteket.dk
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <4DE7E9BC.7000304@hms.harvard.edu>
References: <4DE7E9BC.7000304@hms.harvard.edu>
Content-Type: text/plain; charset="UTF-8"
Organization: State and University Library, Denmark
Date: Mon, 6 Jun 2011 11:05:33 +0200
Message-ID: <1307351133.766.299.camel@te-prime>
MIME-Version: 1.0
X-Mailer: Evolution 2.28.3 
Content-Transfer-Encoding: 7bit

On Thu, 2011-06-02 at 21:51 +0200, Clint Gilbert wrote:
> We're also considering a home-grown scheme involving normalizing the
> denominators of all the index components in all our indices, based on
> the sums of counts obtained from all the indices.  This feels like
> re-inventing the wheel, and it's not clear to me yet that the low-level
> manipulation of indices that we'd need to do is even possible.

We're currently experimenting with this approach, albeit only for two
searchers. Since we have very little control of the secondary searcher,
just a basic search-API, we're really hacking and performing a query
rewrite based on term statistics. This only works for basic term queries
(no wildcards, ranges etc.), but fortunately our search logs show that
they are by far the most common.

The math is not too bad: Extract occurrence counts for the terms, sum
them, calculate the difference when sending a request to a specific
searcher and set a term boost in the textual query, so that the standard
ranking formula in Lucene will yield the desired score.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49892-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun  6 09:26:56 2011
Return-Path: <java-user-return-49892-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 092564201
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  6 Jun 2011 09:26:56 +0000 (UTC)
Received: (qmail 60683 invoked by uid 500); 6 Jun 2011 09:26:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60486 invoked by uid 500); 6 Jun 2011 09:26:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60466 invoked by uid 99); 6 Jun 2011 09:26:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Jun 2011 09:26:52 +0000
X-ASF-Spam-Status: No, hits=2.1 required=5.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLYTO,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.218.48 as permitted sender)
Received: from [209.85.218.48] (HELO mail-yi0-f48.google.com) (209.85.218.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Jun 2011 09:26:47 +0000
Received: by yib12 with SMTP id 12so1898236yib.35
        for <multiple recipients>; Mon, 06 Jun 2011 02:26:26 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:reply-to:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=BhEHBTMGUwzdkLZdsdKiZnmw8YfzThKX755yOK1ezYI=;
        b=qgySXPO14pZbNYXsQyGhYZ+CGWQSlcl25RvXARehocCry25qR1F1ScvTxA+c5R/OBg
         vbfzb6cUCP4wJeA2g+prZESLmt2l9pJXKfGrmTyb6KSwO8vy1KGvPNl4smU4KdimurD/
         UDidNHVMVnYdB3SGxDnJC9JB6BRmU4MDiF/20=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type;
        b=AsICN+PyMjEz281B/AHz4qY7ukJYCtlqhoDFhveRR+OdxE/zSzRtaA40l70aJYNQ5w
         z/M3a4DkTTLWHEJ6LSM29ipOK2fusFvpMFi+KenLVFww2lwLEeNzobBC5RljMuY/hgfb
         0eWAo6Af6kPMYfDF1wToULMg2Xer7rqeNM2Jc=
MIME-Version: 1.0
Received: by 10.236.161.234 with SMTP id w70mr5875070yhk.74.1307352386280;
 Mon, 06 Jun 2011 02:26:26 -0700 (PDT)
Received: by 10.147.98.3 with HTTP; Mon, 6 Jun 2011 02:26:26 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <15ca01cc241f$e771e910$b655bb30$@16degrees.com.au>
References: <15ca01cc241f$e771e910$b655bb30$@16degrees.com.au>
Date: Mon, 6 Jun 2011 11:26:26 +0200
Message-ID: <BANLkTi=jJbYLM-fGCpO=z-tzXcH=z0yMMw@mail.gmail.com>
Subject: Travel Assistance applications now open for ApacheCon NA 2011
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user <java-user@lucene.apache.org>, solr-user@lucene.apache.org, 
	dev@lucene.apache.org
Content-Type: text/plain; charset=UTF-8

The Apache Software Foundation (ASF)'s Travel Assistance Committee (TAC) is
now accepting applications for ApacheCon North America 2011, 7-11 November
in Vancouver BC, Canada.

The TAC is seeking individuals from the Apache community at-large --users,
developers, educators, students, Committers, and Members-- who would like to
attend ApacheCon, but need some financial support in order to be able to get
there. There are limited places available, and all applicants will be scored
on their individual merit.

Financial assistance is available to cover flights/trains, accommodation and
entrance fees either in part or in full, depending on circumstances.
However, the support available for those attending only the BarCamp (7-8
November) is less than that for those attending the entire event (Conference
+ BarCamp 7-11 November). The Travel Assistance Committee aims to support
all official ASF events, including cross-project activities; as such, it may
be prudent for those in Asia and Europe to wait for an event geographically
closer to them.

More information can be found at http://www.apache.org/travel/index.html
including a link to the online application and detailed instructions for
submitting.

Applications will close on 8 July 2011 at 22:00 BST (UTC/GMT +1).

We wish good luck to all those who will apply, and thank you in advance for
tweeting, blogging, and otherwise spreading the word.

Regards,
The Travel Assistance Committee

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49893-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun  6 09:59:00 2011
Return-Path: <java-user-return-49893-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 73FF2427B
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  6 Jun 2011 09:59:00 +0000 (UTC)
Received: (qmail 97422 invoked by uid 500); 6 Jun 2011 09:58:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97378 invoked by uid 500); 6 Jun 2011 09:58:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97370 invoked by uid 99); 6 Jun 2011 09:58:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Jun 2011 09:58:58 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of 0x6e6562@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Jun 2011 09:58:52 +0000
Received: by qwj9 with SMTP id 9so2383251qwj.35
        for <java-user@lucene.apache.org>; Mon, 06 Jun 2011 02:58:31 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=AQ2B/YQe8JBS+GrdUGQWeeXcTAr7OV0bYVgFgCj8pN0=;
        b=Odbdyqq6nRPWws3Gz6wTikBkfknWndFrYoUxA39MftOveZ1EVe/YUtMPg49u82OnZk
         tEUw7FM/AonPBphFuFL99H/zjyiZNCNqTrG2ku3DV2Xns4IM76QhX4uVZvyokgqMXcUG
         qQPPUpRaFRiFY36zgQcGWL88JWZpkgOaNOwiU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=ei19MsHLUmLRcm/ub1q6PgfGh4VNJGhxOTlQapNFZdhHJa4E1m13CWEnKEFjM0iSad
         WyW3qDNIyhMmncZx7FnYsyeLX7c9q7l+KgYnBM57ho8YfrwoGDpK3kqhgzzZtSG4DTSP
         x2l27PTWsMTfoVXvXyLVguB9D6z+miOh07dPw=
MIME-Version: 1.0
Received: by 10.229.106.214 with SMTP id y22mr3257800qco.105.1307354311155;
 Mon, 06 Jun 2011 02:58:31 -0700 (PDT)
Received: by 10.229.232.133 with HTTP; Mon, 6 Jun 2011 02:58:31 -0700 (PDT)
Date: Mon, 6 Jun 2011 10:58:31 +0100
Message-ID: <BANLkTindOhLcbdSLKC3-CyFUY1u-W+KXEQ@mail.gmail.com>
Subject: IndexNotFoundException
From: Ben Hood <0x6e6562@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

Hi,

I'm trying to upgrade from 3.0.2 to 3.2.0 and am running into the
following issue when trying to boot an IndexSearcher:

Exception in thread "main"
org.apache.lucene.index.IndexNotFoundException: no segments* file
found in org.apache.lucene.store.NIOFSDirectory@/tmp/804f7160-9023-11e0-9123-0022192d0d03
lockFactory=org.apache.lucene.store.NativeFSLockFactory@7a6d084b:
files: [write.lock]
	at org.apache.lucene.index.SegmentInfos$FindSegmentsFile.run(SegmentInfos.java:711)
	at org.apache.lucene.index.DirectoryReader.open(DirectoryReader.java:75)
	at org.apache.lucene.index.IndexReader.open(IndexReader.java:428)
	at org.apache.lucene.index.IndexReader.open(IndexReader.java:288)
	at org.apache.lucene.search.IndexSearcher.<init>(IndexSearcher.java:107)
	at net.lshift.diffa.kernel.util.IndexWriterTest.main(IndexWriterTest.java:21)

I've created a stripped down test case that reproduces the issue (see below).

Is there something I'm doing wrong here? I would have assumed that
after the IndexWriter constructor has returned, then the necessary
index segments would in the directory on disk, or is this operation
asynchronous?

Thanks for any help,

Cheers,

Ben

------

package net.lshift.diffa.kernel.util;

import com.eaio.uuid.UUID;
import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.index.IndexWriterConfig;
import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.store.FSDirectory;
import org.apache.lucene.util.Version;

import java.io.File;

public class IndexWriterTest {

  public static void main(String[] args) throws Exception {
    FSDirectory dir = FSDirectory.open(new File("/tmp/" + new
UUID().toString()));
    IndexWriterConfig config = new
IndexWriterConfig(Version.LUCENE_32, new
StandardAnalyzer(Version.LUCENE_32));
    config.setOpenMode(IndexWriterConfig.OpenMode.CREATE);
    IndexWriter writer = new IndexWriter(dir, config);
    IndexSearcher searcher = new IndexSearcher(dir, true);
  }

}

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49894-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun  6 10:09:01 2011
Return-Path: <java-user-return-49894-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6839A4B88
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  6 Jun 2011 10:09:01 +0000 (UTC)
Received: (qmail 9006 invoked by uid 500); 6 Jun 2011 10:08:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8961 invoked by uid 500); 6 Jun 2011 10:08:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8953 invoked by uid 99); 6 Jun 2011 10:08:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Jun 2011 10:08:59 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of 0x6e6562@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Jun 2011 10:08:52 +0000
Received: by qyk30 with SMTP id 30so2293946qyk.14
        for <java-user@lucene.apache.org>; Mon, 06 Jun 2011 03:08:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type:content-transfer-encoding;
        bh=QAqKgvDuOkULPAfT3fWPSIpGn6RZFs7j12NEHpNsxCQ=;
        b=p2RH50r1+tZ2c08mL4EsdPe9rC7qPeHvS3i10ntEa23R4pXtM7TE9iHnSw2hEi4Nsy
         3CdZfCCewlN3LzYihihzL14sF1eyLkLV2/N6IO8AL4b1zLlK5W+DPzLEW/P9E+lUarQp
         +FPS9iD7RxaGIhFJ3/jSKy2ouQ9kLg06B8Nug=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=tL4JAiTlugcKM5dy0epVF8XLRn/3/M6LsSe6GcARp4dcqSGqlTLkztD5o8zp1Obr2x
         axxPQ9pX1Tfnh9IwyL8JiI6Ofj5m+oN9TyNqLH7/XmhaJ9pGQInEu5JtkCBtq+XEAbdr
         P2GCHHf40xFO36Cemcm5U4xX/ks24SGeMrFKI=
MIME-Version: 1.0
Received: by 10.229.106.214 with SMTP id y22mr3264327qco.105.1307354912114;
 Mon, 06 Jun 2011 03:08:32 -0700 (PDT)
Received: by 10.229.232.133 with HTTP; Mon, 6 Jun 2011 03:08:32 -0700 (PDT)
In-Reply-To: <BANLkTindOhLcbdSLKC3-CyFUY1u-W+KXEQ@mail.gmail.com>
References: <BANLkTindOhLcbdSLKC3-CyFUY1u-W+KXEQ@mail.gmail.com>
Date: Mon, 6 Jun 2011 11:08:32 +0100
Message-ID: <BANLkTik=ZExksrkV99h18_r07gZvTiZdww@mail.gmail.com>
Subject: Re: IndexNotFoundException
From: Ben Hood <0x6e6562@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

For note, this code works with 3.0.3:

package net.lshift.diffa.kernel.util;

import com.eaio.uuid.UUID;
import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.store.FSDirectory;
import org.apache.lucene.util.Version;

import java.io.File;

public class IndexWriterTest {

  public static void main(String[] args) throws Exception {
    FSDirectory dir =3D FSDirectory.open(new File("/tmp/" + new
UUID().toString()));
    IndexWriter writer =3D new IndexWriter(dir, new
StandardAnalyzer(Version.LUCENE_30),
IndexWriter.MaxFieldLength.UNLIMITED);
    IndexSearcher searcher =3D new IndexSearcher(dir, true);
  }

}

On Mon, Jun 6, 2011 at 10:58 AM, Ben Hood <0x6e6562@gmail.com> wrote:
> Hi,
>
> I'm trying to upgrade from 3.0.2 to 3.2.0 and am running into the
> following issue when trying to boot an IndexSearcher:
>
> Exception in thread "main"
> org.apache.lucene.index.IndexNotFoundException: no segments* file
> found in org.apache.lucene.store.NIOFSDirectory@/tmp/804f7160-9023-11e0-9=
123-0022192d0d03
> lockFactory=3Dorg.apache.lucene.store.NativeFSLockFactory@7a6d084b:
> files: [write.lock]
> =A0 =A0 =A0 =A0at org.apache.lucene.index.SegmentInfos$FindSegmentsFile.r=
un(SegmentInfos.java:711)
> =A0 =A0 =A0 =A0at org.apache.lucene.index.DirectoryReader.open(DirectoryR=
eader.java:75)
> =A0 =A0 =A0 =A0at org.apache.lucene.index.IndexReader.open(IndexReader.ja=
va:428)
> =A0 =A0 =A0 =A0at org.apache.lucene.index.IndexReader.open(IndexReader.ja=
va:288)
> =A0 =A0 =A0 =A0at org.apache.lucene.search.IndexSearcher.<init>(IndexSear=
cher.java:107)
> =A0 =A0 =A0 =A0at net.lshift.diffa.kernel.util.IndexWriterTest.main(Index=
WriterTest.java:21)
>
> I've created a stripped down test case that reproduces the issue (see bel=
ow).
>
> Is there something I'm doing wrong here? I would have assumed that
> after the IndexWriter constructor has returned, then the necessary
> index segments would in the directory on disk, or is this operation
> asynchronous?
>
> Thanks for any help,
>
> Cheers,
>
> Ben
>
> ------
>
> package net.lshift.diffa.kernel.util;
>
> import com.eaio.uuid.UUID;
> import org.apache.lucene.analysis.standard.StandardAnalyzer;
> import org.apache.lucene.index.IndexWriter;
> import org.apache.lucene.index.IndexWriterConfig;
> import org.apache.lucene.search.IndexSearcher;
> import org.apache.lucene.store.FSDirectory;
> import org.apache.lucene.util.Version;
>
> import java.io.File;
>
> public class IndexWriterTest {
>
> =A0public static void main(String[] args) throws Exception {
> =A0 =A0FSDirectory dir =3D FSDirectory.open(new File("/tmp/" + new
> UUID().toString()));
> =A0 =A0IndexWriterConfig config =3D new
> IndexWriterConfig(Version.LUCENE_32, new
> StandardAnalyzer(Version.LUCENE_32));
> =A0 =A0config.setOpenMode(IndexWriterConfig.OpenMode.CREATE);
> =A0 =A0IndexWriter writer =3D new IndexWriter(dir, config);
> =A0 =A0IndexSearcher searcher =3D new IndexSearcher(dir, true);
> =A0}
>
> }
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49895-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun  6 10:41:40 2011
Return-Path: <java-user-return-49895-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D49B440A7
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  6 Jun 2011 10:41:40 +0000 (UTC)
Received: (qmail 59539 invoked by uid 500); 6 Jun 2011 10:41:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59498 invoked by uid 500); 6 Jun 2011 10:41:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59490 invoked by uid 99); 6 Jun 2011 10:41:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Jun 2011 10:41:38 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 209.85.220.176 as permitted sender)
Received: from [209.85.220.176] (HELO mail-vx0-f176.google.com) (209.85.220.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Jun 2011 10:41:33 +0000
Received: by vxa37 with SMTP id 37so4452077vxa.35
        for <java-user@lucene.apache.org>; Mon, 06 Jun 2011 03:41:12 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=dLK7lOdXCcWI8SP0QLZcekHcVkHtsz/ah9DsDWG1rXc=;
        b=xoqjlbyY+6vmG4KyprB/F1BFohRiOMo9MxXtlvWafv1tWHgC8nJakM+wLrmKsW/Wgi
         +B2O3l96zG1Np8gPQ/Xci1vJR0dRc4LRW9LUA39tuuE2odArpwYgDL+DKUjCf8s+VRbM
         HnW2jUL6JM56BciZqt/LIG9IJOFvpCubVIVqQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=KJ1bNwT47y0wXVBt85JUastd41tv90RS8w5c/uY2rAVCJYifFGgqIyKloHBVIGSwJ2
         bkzMpxbPFliLdxmQ2g5ISsd3gN7KekliYS4nMzjTHHD0TT4LtFlsFnUkAXLkk4Zm2+KF
         VI/VDekT1zouu4ZctLdbP1zcGYCVfSKuOuEdA=
Received: by 10.52.116.33 with SMTP id jt1mr6646985vdb.249.1307356872067; Mon,
 06 Jun 2011 03:41:12 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.52.110.166 with HTTP; Mon, 6 Jun 2011 03:40:52 -0700 (PDT)
In-Reply-To: <BANLkTikTJELRpn1ZJZaJv2EztzZY2kd72g@mail.gmail.com>
References: <BANLkTikTJELRpn1ZJZaJv2EztzZY2kd72g@mail.gmail.com>
From: Anshum <anshumg@gmail.com>
Date: Mon, 6 Jun 2011 16:10:52 +0530
Message-ID: <BANLkTin-=PUkeTi=6Ob5+Qg==XnUY-2-zQ@mail.gmail.com>
Subject: Re: Lucene Indexing
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=bcaec548a681f4497204a508bd76

--bcaec548a681f4497204a508bd76
Content-Type: text/plain; charset=ISO-8859-1

Hii Pranav,
By what you've mentioned, it looks like you want to modify a particular
document  (or all docs) by adding a particular field in the document(s). As
of right now, its not possible to modify a document inside a lucene index.
That is due to the way the index is structured. The only way as of now to
modify a record is to delete it, create a new doc and then add the new doc.
Also, the lucene's delete document function does not physically free up the
space for the document unless you optimize the index so you may have to do
that periodically, depending upon your update frequency.
Even the updateDocument function as of now would internally delete the
document and add the new supplied document.
Hope this answer helps.

--
Anshum Gupta
http://ai-cafe.blogspot.com


On Mon, Jun 6, 2011 at 11:59 AM, Pranav goyal <pranavgoyal40341@gmail.com>wrote:

> Hi all,
>
> I am a newbie to lucene.
> I have successfully created my lucene index. But I am not getting how to
> invalidate previous indexes whenever I add/delete/update any field in my
> lucene index.
> Please help me out.
>
> for better understanding I have wrote my indexing function :
>
> StandardAnalyzer analyzer = new StandardAnalyzer(Version.LUCENE_31);
>                IndexWriter writer = null;
>                File indexDir = new File("./indexDir");
>                try {
>                        writer = new IndexWriter(FSDirectory.open(indexDir),
> analyzer, IndexWriter.MaxFieldLength.UNLIMITED);
>                }
>                catch (IOException e1) {
>                        e1.printStackTrace();
>                }
>
>
>                //Adding New fields to the document
>                Document d = new Document();
>                d.add(new Field("key", key , Field.Store.YES ,
> Field.Index.ANALYZED));
>
>
>                // d.add(Field.Text("obj", attribute.toString()));
>                // index in Lucene here
>                if (attribute instanceof String) {
>                        System.out.println("IN CMnString ");
>                        d.add(new Field("attribute",attribute.toString(),
> Field.Store.YES, Field.Index.NO));
>                        System.out.println("key is ->"+key+"...Attribute is
> "+attribute);
>                }
>                else if (attribute instanceof CMnMoney) {
>                        System.out.println("IN CMnMoney ");
>                        d.add(new Field("attribute",attribute.toString(),
> Field.Store.YES, Field.Index.NO));
>                        System.out.println("key is ->"+key+"...Value is
> "+attribute);
>                }
>                else if (attribute instanceof CMnQuantity) {
>                        System.out.println("IN CMnQuantity ");
>                        d.add(new Field("attribute",attribute.toString(),
> Field.Store.YES, Field.Index.NO));
>                        System.out.println("key is ->"+key+"...Attribute is
> "+attribute);
>                }
>                else if (attribute instanceof CMnEnum) {
>                        System.out.println("IN CMnEnum ");
>                        d.add(new Field("attribute",attribute.toString(),
> Field.Store.YES, Field.Index.NO));
>                        System.out.println("key is ->"+key+"...Attribute is
> "+attribute);
>                }
>                else {
>                        // see what else is there....
>                }
>                try {
>                        writer.addDocument(d);
>                        writer.optimize() ;
>                        writer.close();
>                }
>                catch (IOException e1) {
>                        e1.printStackTrace();
>                }
>        }
>
>
>
> Please guide me further as I got stuck at this point.
>
> I have searched a lot about this and all I got is I have to first delete
> that document and then add that document again to my index.
>

--bcaec548a681f4497204a508bd76--

From java-user-return-49896-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun  6 11:12:06 2011
Return-Path: <java-user-return-49896-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 616EC4636
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  6 Jun 2011 11:12:06 +0000 (UTC)
Received: (qmail 94103 invoked by uid 500); 6 Jun 2011 11:12:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94058 invoked by uid 500); 6 Jun 2011 11:12:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94049 invoked by uid 99); 6 Jun 2011 11:12:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Jun 2011 11:12:04 +0000
X-ASF-Spam-Status: No, hits=3.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of pranavgoyal40341@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Jun 2011 11:11:56 +0000
Received: by bwz8 with SMTP id 8so5601080bwz.35
        for <java-user@lucene.apache.org>; Mon, 06 Jun 2011 04:11:36 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:from:date:message-id:subject:to
         :content-type;
        bh=tTbZmz1YbULHmO/Wvzdc/T88NrhGVRn0lhGm9tmXVjc=;
        b=VtPf3OCVWjC8smqLwJ3UfL1ug1Y7hVkPt4HzmIErLV17FIheD4MfPGDgBzr53iqDjW
         531C3aR6Kmi4jNAgp6ddEY78TxqxFZeGojrxVFyK72maGUOntzQUIYY7VGVZomgk2a5b
         ueRKOuvfFMa0UYtOS3HNybyqQCrXDODkNm7Eg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=cFE+iKSbbNNKnw+rti7q+cXpBklmWppD1c9A1owvJ6r7Sh2R16wWiRG2P0yErcSz7U
         c42Sr104CI7VoHVfIWG0Ez5e8JyH1q50Xk70BOJs70rljuTs5eMVXPw93rgVsPlNc3To
         Ov7sxkmZfdGgl9/ZZcAktZ5D1QSlxZ2mHoKOI=
Received: by 10.204.82.166 with SMTP id b38mr4683828bkl.207.1307358696129;
 Mon, 06 Jun 2011 04:11:36 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.112.79 with HTTP; Mon, 6 Jun 2011 04:11:16 -0700 (PDT)
From: Pranav goyal <pranavgoyal40341@gmail.com>
Date: Mon, 6 Jun 2011 16:41:16 +0530
Message-ID: <BANLkTikcc6fVSdU5Jg4ze9wH5oQFCzcK=Q@mail.gmail.com>
Subject: Lucene Document No
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e68deb3dad44ab04a5092ad8
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e68deb3dad44ab04a5092ad8
Content-Type: text/plain; charset=ISO-8859-1

Hi all,

Is there any way to change my lucene document no?
Like if I can change my lucene document no's with con_key.

I am a newbie and don't know whether this is a silly question or not.

Please reply.

Thanks

--0016e68deb3dad44ab04a5092ad8--

From java-user-return-49897-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun  6 11:15:58 2011
Return-Path: <java-user-return-49897-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 711854938
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  6 Jun 2011 11:15:58 +0000 (UTC)
Received: (qmail 97882 invoked by uid 500); 6 Jun 2011 11:15:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97826 invoked by uid 500); 6 Jun 2011 11:15:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97818 invoked by uid 99); 6 Jun 2011 11:15:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Jun 2011 11:15:56 +0000
X-ASF-Spam-Status: No, hits=3.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of pranavgoyal40341@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Jun 2011 11:15:49 +0000
Received: by bwz8 with SMTP id 8so5604941bwz.35
        for <java-user@lucene.apache.org>; Mon, 06 Jun 2011 04:15:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=hDsrl0EamyYgPZ04N/J3x4Ku2Z4t+KQj6UMR1LMJmSY=;
        b=LjlGaoIUDzRrAMW+o76K/AqE6B3BiN5B6SGWJc4QKr26TGp2cNY7g9YK0ZHPX/dkxA
         T/uj1yYbEMXAGAl4Ir7/tYCm2BZmSsTy4vQZ/oegfpceBzybupAsocHoJyecJfQurnb1
         elICNd47owLR80mcNy+SkKvQNAVA0kbSYsEP4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=YnB0cg7JuChGBptEliMRjhzXr4dv5wqIeZ24K0he0b3JR432SB6KS9dyrklj1UpCKd
         qsIUi9z+8Utsm492P9U9S6TmKEYF1gj4xzxJSbeoI1qQNiu6L0wBPdWgRL0r3HSB9tqE
         M0Jy5qAKLYE18eFgxY79zXkn54yLbTtSvXDeM=
Received: by 10.204.76.83 with SMTP id b19mr4803351bkk.126.1307358928085; Mon,
 06 Jun 2011 04:15:28 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.112.79 with HTTP; Mon, 6 Jun 2011 04:15:08 -0700 (PDT)
In-Reply-To: <BANLkTin-=PUkeTi=6Ob5+Qg==XnUY-2-zQ@mail.gmail.com>
References: <BANLkTikTJELRpn1ZJZaJv2EztzZY2kd72g@mail.gmail.com> <BANLkTin-=PUkeTi=6Ob5+Qg==XnUY-2-zQ@mail.gmail.com>
From: Pranav goyal <pranavgoyal40341@gmail.com>
Date: Mon, 6 Jun 2011 16:45:08 +0530
Message-ID: <BANLkTimmgFE=_1McE8jsW6cSwg0TCxTYAQ@mail.gmail.com>
Subject: Re: Lucene Indexing
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636499fbd80a48c04a5093875
X-Virus-Checked: Checked by ClamAV on apache.org

--001636499fbd80a48c04a5093875
Content-Type: text/plain; charset=ISO-8859-1

Hi Anshum,

Thanks for answering my question. By this I got to know that I cannot update
without deleting my document.

So whenever I am indexing the documents first I need to check whether the
particular key exists in the document or not and if it exists I need to
delete it and add the updated one?

Sounds Cool?

On Mon, Jun 6, 2011 at 4:10 PM, Anshum <anshumg@gmail.com> wrote:

> Hii Pranav,
> By what you've mentioned, it looks like you want to modify a particular
> document  (or all docs) by adding a particular field in the document(s). As
> of right now, its not possible to modify a document inside a lucene index.
> That is due to the way the index is structured. The only way as of now to
> modify a record is to delete it, create a new doc and then add the new doc.
> Also, the lucene's delete document function does not physically free up the
> space for the document unless you optimize the index so you may have to do
> that periodically, depending upon your update frequency.
> Even the updateDocument function as of now would internally delete the
> document and add the new supplied document.
> Hope this answer helps.
>
> --
> Anshum Gupta
> http://ai-cafe.blogspot.com
>
>
> On Mon, Jun 6, 2011 at 11:59 AM, Pranav goyal <pranavgoyal40341@gmail.com
> >wrote:
>
> > Hi all,
> >
> > I am a newbie to lucene.
> > I have successfully created my lucene index. But I am not getting how to
> > invalidate previous indexes whenever I add/delete/update any field in my
> > lucene index.
> > Please help me out.
> >
> > for better understanding I have wrote my indexing function :
> >
> > StandardAnalyzer analyzer = new StandardAnalyzer(Version.LUCENE_31);
> >                IndexWriter writer = null;
> >                File indexDir = new File("./indexDir");
> >                try {
> >                        writer = new
> IndexWriter(FSDirectory.open(indexDir),
> > analyzer, IndexWriter.MaxFieldLength.UNLIMITED);
> >                }
> >                catch (IOException e1) {
> >                        e1.printStackTrace();
> >                }
> >
> >
> >                //Adding New fields to the document
> >                Document d = new Document();
> >                d.add(new Field("key", key , Field.Store.YES ,
> > Field.Index.ANALYZED));
> >
> >
> >                // d.add(Field.Text("obj", attribute.toString()));
> >                // index in Lucene here
> >                if (attribute instanceof String) {
> >                        System.out.println("IN CMnString ");
> >                        d.add(new Field("attribute",attribute.toString(),
> > Field.Store.YES, Field.Index.NO));
> >                        System.out.println("key is ->"+key+"...Attribute
> is
> > "+attribute);
> >                }
> >                else if (attribute instanceof CMnMoney) {
> >                        System.out.println("IN CMnMoney ");
> >                        d.add(new Field("attribute",attribute.toString(),
> > Field.Store.YES, Field.Index.NO));
> >                        System.out.println("key is ->"+key+"...Value is
> > "+attribute);
> >                }
> >                else if (attribute instanceof CMnQuantity) {
> >                        System.out.println("IN CMnQuantity ");
> >                        d.add(new Field("attribute",attribute.toString(),
> > Field.Store.YES, Field.Index.NO));
> >                        System.out.println("key is ->"+key+"...Attribute
> is
> > "+attribute);
> >                }
> >                else if (attribute instanceof CMnEnum) {
> >                        System.out.println("IN CMnEnum ");
> >                        d.add(new Field("attribute",attribute.toString(),
> > Field.Store.YES, Field.Index.NO));
> >                        System.out.println("key is ->"+key+"...Attribute
> is
> > "+attribute);
> >                }
> >                else {
> >                        // see what else is there....
> >                }
> >                try {
> >                        writer.addDocument(d);
> >                        writer.optimize() ;
> >                        writer.close();
> >                }
> >                catch (IOException e1) {
> >                        e1.printStackTrace();
> >                }
> >        }
> >
> >
> >
> > Please guide me further as I got stuck at this point.
> >
> > I have searched a lot about this and all I got is I have to first delete
> > that document and then add that document again to my index.
> >
>



-- 
I'm very responsible, when ever something goes wrong they always say I'm
responsible --

--001636499fbd80a48c04a5093875--

From java-user-return-49898-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun  6 12:01:28 2011
Return-Path: <java-user-return-49898-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 81C284CEC
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  6 Jun 2011 12:01:28 +0000 (UTC)
Received: (qmail 59442 invoked by uid 500); 6 Jun 2011 12:01:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59393 invoked by uid 500); 6 Jun 2011 12:01:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59385 invoked by uid 99); 6 Jun 2011 12:01:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Jun 2011 12:01:24 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of anshumg@gmail.com designates 209.85.220.176 as permitted sender)
Received: from [209.85.220.176] (HELO mail-vx0-f176.google.com) (209.85.220.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Jun 2011 12:01:17 +0000
Received: by vxa37 with SMTP id 37so4513519vxa.35
        for <java-user@lucene.apache.org>; Mon, 06 Jun 2011 05:00:56 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=wyXa4o2QCuM0xslNq6OpK6HcDI4yKTWK8kpYUYY/7L8=;
        b=QZJ2csutUrmanmEQX5XgaK0FBsLiVl36pDCAOdw6knsorabVs115LH5/peiX9/+q6m
         xDxXC1YOL5i48D8toO6j73EBXDZoCRgpqyAq/zCzAUTENPw2i0NB1b2ctUsnQvZ5+iRH
         UKM2IYRBV7gMj7XUAyVWgCdNXqUIXHOzOFPwE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=LT/xcHGqzpXRqA1EJGJ+2vtj1CGn8TWVWbhNLhvADx5ZhVoGrCjrTpLrLgemgtD/HR
         LhRAZxeFRQkm4rAhq7UDAFIlAthtWNk7t/pDlT3R6W021m36myUfamKJkPDr9eBeR54a
         I5DxbsBK4i5+kGRfOeTRM0QzbPWGL3SnXRjiQ=
Received: by 10.52.176.101 with SMTP id ch5mr6826901vdc.129.1307361656036;
 Mon, 06 Jun 2011 05:00:56 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.52.110.166 with HTTP; Mon, 6 Jun 2011 05:00:36 -0700 (PDT)
In-Reply-To: <BANLkTikcc6fVSdU5Jg4ze9wH5oQFCzcK=Q@mail.gmail.com>
References: <BANLkTikcc6fVSdU5Jg4ze9wH5oQFCzcK=Q@mail.gmail.com>
From: Anshum <anshumg@gmail.com>
Date: Mon, 6 Jun 2011 17:30:36 +0530
Message-ID: <BANLkTikqaRSfH1o-ddFTnjGs+T9pWiBZGw@mail.gmail.com>
Subject: Re: Lucene Document No
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf3071c83019dd7004a509dbb6
X-Virus-Checked: Checked by ClamAV on apache.org

--20cf3071c83019dd7004a509dbb6
Content-Type: text/plain; charset=ISO-8859-1

Hi Pranav,
Why would you want to do that in the first place? You could use a separate
field to process whatever it is that you're trying to do.
Also, you can not change the docid (as there's no reasonable reason for
doing so either).
Let me know what is it that you're trying to achieve/target.

--
Anshum Gupta
http://ai-cafe.blogspot.com


On Mon, Jun 6, 2011 at 4:41 PM, Pranav goyal <pranavgoyal40341@gmail.com>wrote:

> Hi all,
>
> Is there any way to change my lucene document no?
> Like if I can change my lucene document no's with con_key.
>
> I am a newbie and don't know whether this is a silly question or not.
>
> Please reply.
>
> Thanks
>

--20cf3071c83019dd7004a509dbb6--

From java-user-return-49899-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun  6 12:02:34 2011
Return-Path: <java-user-return-49899-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D400D4260
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  6 Jun 2011 12:02:34 +0000 (UTC)
Received: (qmail 62285 invoked by uid 500); 6 Jun 2011 12:02:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61972 invoked by uid 500); 6 Jun 2011 12:02:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61963 invoked by uid 99); 6 Jun 2011 12:02:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Jun 2011 12:02:30 +0000
X-ASF-Spam-Status: No, hits=4.0 required=5.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLY,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 209.85.220.176 as permitted sender)
Received: from [209.85.220.176] (HELO mail-vx0-f176.google.com) (209.85.220.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Jun 2011 12:02:25 +0000
Received: by vxa37 with SMTP id 37so4514682vxa.35
        for <java-user@lucene.apache.org>; Mon, 06 Jun 2011 05:02:04 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=sD4FB+gXSY/smdugrRbyqw5Zjf3Iiksnq5en4/PZkCQ=;
        b=p8B3/7Ca1K6zYmqXbfpHJAaxvmN7CueZ65fwR6/IBHIkNdvM4rthxMMT1ATqjd2y5I
         O6kKQyGfetB9DlKD4pEzhdCK6tK/kH4UjVJpzrWvhK469dC4mr3aJGjBQ4LkoLQ1ieAQ
         o/Iyr8K4jql3dEyzhUBHi4tY4uK2kBdZ0yBwo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=psVRtZfN92g+icGByq0Y2k3pZD/Mk8+fMZIQB/z7+7iPXSltdZX3aP2hCma7syvV3X
         W9Q6Exly0CHmr+1cNTPccx4CpUozmJpTSAaEX1tqkh5VWt0G6mQJMFbeBfzprtHPShcd
         qHfWQnmLrBVEHhLNIOpnJ7K6t5W6CSwkAMNmY=
Received: by 10.52.179.131 with SMTP id dg3mr5603404vdc.9.1307361724339; Mon,
 06 Jun 2011 05:02:04 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.52.110.166 with HTTP; Mon, 6 Jun 2011 05:01:44 -0700 (PDT)
In-Reply-To: <BANLkTimmgFE=_1McE8jsW6cSwg0TCxTYAQ@mail.gmail.com>
References: <BANLkTikTJELRpn1ZJZaJv2EztzZY2kd72g@mail.gmail.com>
 <BANLkTin-=PUkeTi=6Ob5+Qg==XnUY-2-zQ@mail.gmail.com> <BANLkTimmgFE=_1McE8jsW6cSwg0TCxTYAQ@mail.gmail.com>
From: Anshum <anshumg@gmail.com>
Date: Mon, 6 Jun 2011 17:31:44 +0530
Message-ID: <BANLkTimOmkn59XVrfjqT+B9J7mud+3tGbg@mail.gmail.com>
Subject: Re: Lucene Indexing
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=bcaec5171f1b2c171704a509df39

--bcaec5171f1b2c171704a509df39
Content-Type: text/plain; charset=ISO-8859-1

Yes,
You'd need to delete the document and then re-add a newly created document
object. You may use the key and delete the doc using the Term(key, value).

--
Anshum Gupta
http://ai-cafe.blogspot.com


On Mon, Jun 6, 2011 at 4:45 PM, Pranav goyal <pranavgoyal40341@gmail.com>wrote:

> Hi Anshum,
>
> Thanks for answering my question. By this I got to know that I cannot
> update
> without deleting my document.
>
> So whenever I am indexing the documents first I need to check whether the
> particular key exists in the document or not and if it exists I need to
> delete it and add the updated one?
>
> Sounds Cool?
>
> On Mon, Jun 6, 2011 at 4:10 PM, Anshum <anshumg@gmail.com> wrote:
>
> > Hii Pranav,
> > By what you've mentioned, it looks like you want to modify a particular
> > document  (or all docs) by adding a particular field in the document(s).
> As
> > of right now, its not possible to modify a document inside a lucene
> index.
> > That is due to the way the index is structured. The only way as of now to
> > modify a record is to delete it, create a new doc and then add the new
> doc.
> > Also, the lucene's delete document function does not physically free up
> the
> > space for the document unless you optimize the index so you may have to
> do
> > that periodically, depending upon your update frequency.
> > Even the updateDocument function as of now would internally delete the
> > document and add the new supplied document.
> > Hope this answer helps.
> >
> > --
> > Anshum Gupta
> > http://ai-cafe.blogspot.com
> >
> >
> > On Mon, Jun 6, 2011 at 11:59 AM, Pranav goyal <
> pranavgoyal40341@gmail.com
> > >wrote:
> >
> > > Hi all,
> > >
> > > I am a newbie to lucene.
> > > I have successfully created my lucene index. But I am not getting how
> to
> > > invalidate previous indexes whenever I add/delete/update any field in
> my
> > > lucene index.
> > > Please help me out.
> > >
> > > for better understanding I have wrote my indexing function :
> > >
> > > StandardAnalyzer analyzer = new StandardAnalyzer(Version.LUCENE_31);
> > >                IndexWriter writer = null;
> > >                File indexDir = new File("./indexDir");
> > >                try {
> > >                        writer = new
> > IndexWriter(FSDirectory.open(indexDir),
> > > analyzer, IndexWriter.MaxFieldLength.UNLIMITED);
> > >                }
> > >                catch (IOException e1) {
> > >                        e1.printStackTrace();
> > >                }
> > >
> > >
> > >                //Adding New fields to the document
> > >                Document d = new Document();
> > >                d.add(new Field("key", key , Field.Store.YES ,
> > > Field.Index.ANALYZED));
> > >
> > >
> > >                // d.add(Field.Text("obj", attribute.toString()));
> > >                // index in Lucene here
> > >                if (attribute instanceof String) {
> > >                        System.out.println("IN CMnString ");
> > >                        d.add(new
> Field("attribute",attribute.toString(),
> > > Field.Store.YES, Field.Index.NO));
> > >                        System.out.println("key is ->"+key+"...Attribute
> > is
> > > "+attribute);
> > >                }
> > >                else if (attribute instanceof CMnMoney) {
> > >                        System.out.println("IN CMnMoney ");
> > >                        d.add(new
> Field("attribute",attribute.toString(),
> > > Field.Store.YES, Field.Index.NO));
> > >                        System.out.println("key is ->"+key+"...Value is
> > > "+attribute);
> > >                }
> > >                else if (attribute instanceof CMnQuantity) {
> > >                        System.out.println("IN CMnQuantity ");
> > >                        d.add(new
> Field("attribute",attribute.toString(),
> > > Field.Store.YES, Field.Index.NO));
> > >                        System.out.println("key is ->"+key+"...Attribute
> > is
> > > "+attribute);
> > >                }
> > >                else if (attribute instanceof CMnEnum) {
> > >                        System.out.println("IN CMnEnum ");
> > >                        d.add(new
> Field("attribute",attribute.toString(),
> > > Field.Store.YES, Field.Index.NO));
> > >                        System.out.println("key is ->"+key+"...Attribute
> > is
> > > "+attribute);
> > >                }
> > >                else {
> > >                        // see what else is there....
> > >                }
> > >                try {
> > >                        writer.addDocument(d);
> > >                        writer.optimize() ;
> > >                        writer.close();
> > >                }
> > >                catch (IOException e1) {
> > >                        e1.printStackTrace();
> > >                }
> > >        }
> > >
> > >
> > >
> > > Please guide me further as I got stuck at this point.
> > >
> > > I have searched a lot about this and all I got is I have to first
> delete
> > > that document and then add that document again to my index.
> > >
> >
>
>
>
> --
> I'm very responsible, when ever something goes wrong they always say I'm
> responsible --
>

--bcaec5171f1b2c171704a509df39--

From java-user-return-49900-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun  6 13:30:42 2011
Return-Path: <java-user-return-49900-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E5BBD4EAA
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  6 Jun 2011 13:30:41 +0000 (UTC)
Received: (qmail 50677 invoked by uid 500); 6 Jun 2011 13:30:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50611 invoked by uid 500); 6 Jun 2011 13:30:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50603 invoked by uid 99); 6 Jun 2011 13:30:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Jun 2011 13:30:39 +0000
X-ASF-Spam-Status: No, hits=3.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of zhoucheng2008@gmail.com designates 209.85.210.48 as permitted sender)
Received: from [209.85.210.48] (HELO mail-pz0-f48.google.com) (209.85.210.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Jun 2011 13:30:32 +0000
Received: by pzk10 with SMTP id 10so2560426pzk.35
        for <java-user@lucene.apache.org>; Mon, 06 Jun 2011 06:30:11 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:from:to:subject:date:message-id:mime-version
         :content-type:x-mailer:thread-index:content-language;
        bh=iZGb/VPuNR/2yfXYt5gDzlX0+Sddfvrei/ztU5VgdzY=;
        b=Yyu0Z3Gbjc4ov2XcRb6q6L6WkywjF27eK0Ij72EusRCslWsEd9VZOW6XIUGp6gOEfU
         UvfRmE+UQfXBdEhGeAu2KsNWpfyGNTBBq1en7pAw5eQcRO+3cI+qMOmSrh0xu8XYPZdJ
         trFKigplIa9RDk2oq/tcsqI7K6VvjwRujEkkw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:subject:date:message-id:mime-version:content-type:x-mailer
         :thread-index:content-language;
        b=Uu5ToTzrKqnFVojHrbwjaUN/DV4AJ/a2Z+U98dLgzuRDxloOLjsrmV8/XoyrO56otc
         MbqBUnXWPTNbwdUQvku+4apV9rDW24LQ0cR1+8+oDMrG1Unyb4cqxBvCCT8IgkbyFzE7
         p78VhLwVijnRozUG0hBsc1YltmQRSaPH9CwDg=
Received: by 10.68.65.78 with SMTP id v14mr1986871pbs.204.1307367011778;
        Mon, 06 Jun 2011 06:30:11 -0700 (PDT)
Received: from zcdyPC ([125.123.69.123])
        by mx.google.com with ESMTPS id k4sm3687479pbl.75.2011.06.06.06.30.05
        (version=TLSv1/SSLv3 cipher=OTHER);
        Mon, 06 Jun 2011 06:30:10 -0700 (PDT)
From: "zhoucheng2008" <zhoucheng2008@gmail.com>
To: <java-user@lucene.apache.org>
Subject: RAMDirectory doesn't win over FSDirectory all the time, why?
Date: Mon, 6 Jun 2011 21:29:58 +0800
Message-ID: <000f01cc244d$db001840$910048c0$@com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0010_01CC2490.E9235840"
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcwkTdQyxMMh9arpRd+OHg0WPFaG0g==
Content-Language: en-us

------=_NextPart_000_0010_01CC2490.E9235840
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: 7bit

I read the lucene in action book and just tested the
FSversusRAMDirectoryTest.java with the following uncommented:

 

    //    /**

    //    // change to adjust performance of indexing with FSDirectory

        writer.mergeFactor = 100;

        writer.maxMergeDocs = 999999;

        writer.minMergeDocs = 1000;

//    */

 

Here is the output:

RAMDirectory Time: 805 ms

FSDirectory Time : 728 ms


------=_NextPart_000_0010_01CC2490.E9235840--


From java-user-return-49901-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun  6 13:58:12 2011
Return-Path: <java-user-return-49901-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C19EC425C
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  6 Jun 2011 13:58:12 +0000 (UTC)
Received: (qmail 12892 invoked by uid 500); 6 Jun 2011 13:58:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12764 invoked by uid 500); 6 Jun 2011 13:58:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12756 invoked by uid 99); 6 Jun 2011 13:58:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Jun 2011 13:58:10 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.210.176 as permitted sender)
Received: from [209.85.210.176] (HELO mail-iy0-f176.google.com) (209.85.210.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Jun 2011 13:58:02 +0000
Received: by iym1 with SMTP id 1so5262087iym.35
        for <java-user@lucene.apache.org>; Mon, 06 Jun 2011 06:57:41 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=xpBbutjT4YDGfbIdWgrYccXC79R3yFTjtd4ZXBFT3ek=;
        b=G8wy8FuoCrgIE8ivTgjbK9tmI83QommdMZ0rCPZzXYN1/gzj4i201vKPmOICa/Mm6P
         RtzmwPwxKHz79JREEnLO9OElbl71by0/FM60Bp8ig1g40aH9+2w8PI0Bgc/NhHbfm41t
         +ZSeiXaeG5KQhASaEHVTGLbFxJAknb5pgki7g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=MwOCq/p41aW1+WCBwLyt1b3wEDteG8EQs6dwz4BQhc726UFQD55OWIZV2oTw0Ub0Bf
         z+JPFN60GAzwKsizCAW4jMellqpNKNPzk81FHI8UiGpNbjPWBme0GQlVyT8fV2/P9z/6
         G8IInRF6N0Ba24Evnls3gbdEm+5oWewwkIK1k=
Received: by 10.42.167.73 with SMTP id r9mr9519448icy.347.1307368661151; Mon,
 06 Jun 2011 06:57:41 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.199.148 with HTTP; Mon, 6 Jun 2011 06:57:21 -0700 (PDT)
In-Reply-To: <BANLkTindOhLcbdSLKC3-CyFUY1u-W+KXEQ@mail.gmail.com>
References: <BANLkTindOhLcbdSLKC3-CyFUY1u-W+KXEQ@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Mon, 6 Jun 2011 14:57:21 +0100
Message-ID: <BANLkTinefbTg=aGxGo0fvDkM=dSyi+o4AQ@mail.gmail.com>
Subject: Re: IndexNotFoundException
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

In the release notes for 3.1.0 under Changes in backwards
compatibility policy it says

LUCENE-2386: IndexWriter no longer performs an empty commit upon new
index creation. Previously, if you passed an empty Directory and set
OpenMode to CREATE*, IndexWriter would make a first empty commit. If
you need that behavior you can call writer.commit()/close()
immediately after you create it.

https://issues.apache.org/jira/browse/LUCENE-2386

--
Ian.


On Mon, Jun 6, 2011 at 10:58 AM, Ben Hood <0x6e6562@gmail.com> wrote:
> Hi,
>
> I'm trying to upgrade from 3.0.2 to 3.2.0 and am running into the
> following issue when trying to boot an IndexSearcher:
>
> Exception in thread "main"
> org.apache.lucene.index.IndexNotFoundException: no segments* file
> found in org.apache.lucene.store.NIOFSDirectory@/tmp/804f7160-9023-11e0-9=
123-0022192d0d03
> lockFactory=3Dorg.apache.lucene.store.NativeFSLockFactory@7a6d084b:
> files: [write.lock]
> =A0 =A0 =A0 =A0at org.apache.lucene.index.SegmentInfos$FindSegmentsFile.r=
un(SegmentInfos.java:711)
> =A0 =A0 =A0 =A0at org.apache.lucene.index.DirectoryReader.open(DirectoryR=
eader.java:75)
> =A0 =A0 =A0 =A0at org.apache.lucene.index.IndexReader.open(IndexReader.ja=
va:428)
> =A0 =A0 =A0 =A0at org.apache.lucene.index.IndexReader.open(IndexReader.ja=
va:288)
> =A0 =A0 =A0 =A0at org.apache.lucene.search.IndexSearcher.<init>(IndexSear=
cher.java:107)
> =A0 =A0 =A0 =A0at net.lshift.diffa.kernel.util.IndexWriterTest.main(Index=
WriterTest.java:21)
>
> I've created a stripped down test case that reproduces the issue (see bel=
ow).
>
> Is there something I'm doing wrong here? I would have assumed that
> after the IndexWriter constructor has returned, then the necessary
> index segments would in the directory on disk, or is this operation
> asynchronous?
>
> Thanks for any help,
>
> Cheers,
>
> Ben
>
> ------
>
> package net.lshift.diffa.kernel.util;
>
> import com.eaio.uuid.UUID;
> import org.apache.lucene.analysis.standard.StandardAnalyzer;
> import org.apache.lucene.index.IndexWriter;
> import org.apache.lucene.index.IndexWriterConfig;
> import org.apache.lucene.search.IndexSearcher;
> import org.apache.lucene.store.FSDirectory;
> import org.apache.lucene.util.Version;
>
> import java.io.File;
>
> public class IndexWriterTest {
>
> =A0public static void main(String[] args) throws Exception {
> =A0 =A0FSDirectory dir =3D FSDirectory.open(new File("/tmp/" + new
> UUID().toString()));
> =A0 =A0IndexWriterConfig config =3D new
> IndexWriterConfig(Version.LUCENE_32, new
> StandardAnalyzer(Version.LUCENE_32));
> =A0 =A0config.setOpenMode(IndexWriterConfig.OpenMode.CREATE);
> =A0 =A0IndexWriter writer =3D new IndexWriter(dir, config);
> =A0 =A0IndexSearcher searcher =3D new IndexSearcher(dir, true);
> =A0}
>
> }
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49902-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun  6 15:46:22 2011
Return-Path: <java-user-return-49902-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 64FDB48A3
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  6 Jun 2011 15:46:22 +0000 (UTC)
Received: (qmail 13902 invoked by uid 500); 6 Jun 2011 15:46:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13859 invoked by uid 500); 6 Jun 2011 15:46:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13851 invoked by uid 99); 6 Jun 2011 15:46:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Jun 2011 15:46:19 +0000
X-ASF-Spam-Status: No, hits=2.5 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,FREEMAIL_REPLYTO_END_DIGIT,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of paul_t100@fastmail.fm designates 66.111.4.27 as permitted sender)
Received: from [66.111.4.27] (HELO out3.smtp.messagingengine.com) (66.111.4.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Jun 2011 15:46:12 +0000
Received: from compute5.internal (compute5.nyi.mail.srv.osa [10.202.2.45])
	by gateway1.messagingengine.com (Postfix) with ESMTP id 4EF0720B4E
	for <java-user@lucene.apache.org>; Mon,  6 Jun 2011 11:45:51 -0400 (EDT)
Received: from frontend1.messagingengine.com ([10.202.2.160])
  by compute5.internal (MEProxy); Mon, 06 Jun 2011 11:45:51 -0400
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=messagingengine.com; h=message-id:date:from:reply-to:mime-version:to:subject:content-type:content-transfer-encoding; s=smtpout; bh=NWR7nJiSg8+nTSrVX2ldzNYvyTo=; b=KIY2zIIvpd1crQPQZhG/Fi3V4I57tasQDHOLvGa5eOE2RjqjBzS/vGf6BCzjjzsYufGScqXw75bI9A6Pm8H2XOpdP/fKKEHct9eTu9VEh/F7dLcE88LHDmaPPVUbdaUyYIi3hFncMlmH3YFDy7aMZpbNXiHsxviMQqIHI6m7uVE=
X-Sasl-enc: WtZ20RMbrgiS7bgOTdluSSQIpmMe0mHW+oycNzB1hanG 1307375150
Received: from [192.168.1.65] (unknown [217.155.98.246])
	by mail.messagingengine.com (Postfix) with ESMTPSA id B6134407C53
	for <java-user@lucene.apache.org>; Mon,  6 Jun 2011 11:45:50 -0400 (EDT)
Message-ID: <4DECF654.5050104@fastmail.fm>
Date: Mon, 06 Jun 2011 16:46:28 +0100
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To: paul_t100@fastmail.fm
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.2.17) Gecko/20110414 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Possible Bug when add wildcard to search following an exclamation
 mark
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

If I do a search which consists of escaped ending exclamation marks it 
all works okay:
(aaaaahhh\!\!\!)

and find the desired match

but if there is a wildcard at the end, it will not find any matches
(aaaaahhh\!\!\!*)

I cant see Im doing anything in my code that would affect this, is this 
a bug in lucene ?

thanks Paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49903-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun  6 15:58:50 2011
Return-Path: <java-user-return-49903-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id AEE884AFF
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  6 Jun 2011 15:58:50 +0000 (UTC)
Received: (qmail 48470 invoked by uid 500); 6 Jun 2011 15:58:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48426 invoked by uid 500); 6 Jun 2011 15:58:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48417 invoked by uid 99); 6 Jun 2011 15:58:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Jun 2011 15:58:48 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of 0x6e6562@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Jun 2011 15:58:40 +0000
Received: by qyk2 with SMTP id 2so1020973qyk.14
        for <java-user@lucene.apache.org>; Mon, 06 Jun 2011 08:58:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type:content-transfer-encoding;
        bh=ijGPD2unA49vtjUQ2UhwGyzhdSl56o0v3yLL+CVoY/w=;
        b=XxHdSXM1uQNXNqINOEB8hl6bWD4kGbhIz9oa74RWNG0szPwYO5zwu1KHTodJ5EtG4Y
         mSf21bxTVzVxg4DoDp7hP+0oXEmP8lgLK4YC1QY3zBjqjFHywqQL4H7BtIk5l4Z5SLov
         zzx6OYDXZP6LFNmwMkk2u7VKU3Ep2yfvnHFfQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=LnbEItsLWVrpf7+r9GrHIzDCy4oo4mGX3b/SX20kPZGylgG8NbCeqgfIxDUjJx38hs
         wC99prOnZQtfOBHUT9xxqc6XmQwntT0v2uUkZiQpX8BnEpa+FfnAMRlzP9p5Tm5qL/Ou
         AhpDfukrExIIfKyVRlw63OQmLYz4nHkjzheyQ=
MIME-Version: 1.0
Received: by 10.229.44.198 with SMTP id b6mr3583469qcf.67.1307375899581; Mon,
 06 Jun 2011 08:58:19 -0700 (PDT)
Received: by 10.229.232.133 with HTTP; Mon, 6 Jun 2011 08:58:19 -0700 (PDT)
In-Reply-To: <BANLkTinefbTg=aGxGo0fvDkM=dSyi+o4AQ@mail.gmail.com>
References: <BANLkTindOhLcbdSLKC3-CyFUY1u-W+KXEQ@mail.gmail.com>
	<BANLkTinefbTg=aGxGo0fvDkM=dSyi+o4AQ@mail.gmail.com>
Date: Mon, 6 Jun 2011 16:58:19 +0100
Message-ID: <BANLkTik4AqoJyO7=Hzoz_wQeaiGRmoookw@mail.gmail.com>
Subject: Re: IndexNotFoundException
From: Ben Hood <0x6e6562@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Ian,

Thanks a lot for the heads up. I didn't even know those detailed
release notes existed - I just looked on the main release page and
searched a bit through JIRA.

Cheers,

Ben

On Mon, Jun 6, 2011 at 2:57 PM, Ian Lea <ian.lea@gmail.com> wrote:
> In the release notes for 3.1.0 under Changes in backwards
> compatibility policy it says
>
> LUCENE-2386: IndexWriter no longer performs an empty commit upon new
> index creation. Previously, if you passed an empty Directory and set
> OpenMode to CREATE*, IndexWriter would make a first empty commit. If
> you need that behavior you can call writer.commit()/close()
> immediately after you create it.
>
> https://issues.apache.org/jira/browse/LUCENE-2386
>
> --
> Ian.
>
>
> On Mon, Jun 6, 2011 at 10:58 AM, Ben Hood <0x6e6562@gmail.com> wrote:
>> Hi,
>>
>> I'm trying to upgrade from 3.0.2 to 3.2.0 and am running into the
>> following issue when trying to boot an IndexSearcher:
>>
>> Exception in thread "main"
>> org.apache.lucene.index.IndexNotFoundException: no segments* file
>> found in org.apache.lucene.store.NIOFSDirectory@/tmp/804f7160-9023-11e0-=
9123-0022192d0d03
>> lockFactory=3Dorg.apache.lucene.store.NativeFSLockFactory@7a6d084b:
>> files: [write.lock]
>> =A0 =A0 =A0 =A0at org.apache.lucene.index.SegmentInfos$FindSegmentsFile.=
run(SegmentInfos.java:711)
>> =A0 =A0 =A0 =A0at org.apache.lucene.index.DirectoryReader.open(Directory=
Reader.java:75)
>> =A0 =A0 =A0 =A0at org.apache.lucene.index.IndexReader.open(IndexReader.j=
ava:428)
>> =A0 =A0 =A0 =A0at org.apache.lucene.index.IndexReader.open(IndexReader.j=
ava:288)
>> =A0 =A0 =A0 =A0at org.apache.lucene.search.IndexSearcher.<init>(IndexSea=
rcher.java:107)
>> =A0 =A0 =A0 =A0at net.lshift.diffa.kernel.util.IndexWriterTest.main(Inde=
xWriterTest.java:21)
>>
>> I've created a stripped down test case that reproduces the issue (see be=
low).
>>
>> Is there something I'm doing wrong here? I would have assumed that
>> after the IndexWriter constructor has returned, then the necessary
>> index segments would in the directory on disk, or is this operation
>> asynchronous?
>>
>> Thanks for any help,
>>
>> Cheers,
>>
>> Ben
>>
>> ------
>>
>> package net.lshift.diffa.kernel.util;
>>
>> import com.eaio.uuid.UUID;
>> import org.apache.lucene.analysis.standard.StandardAnalyzer;
>> import org.apache.lucene.index.IndexWriter;
>> import org.apache.lucene.index.IndexWriterConfig;
>> import org.apache.lucene.search.IndexSearcher;
>> import org.apache.lucene.store.FSDirectory;
>> import org.apache.lucene.util.Version;
>>
>> import java.io.File;
>>
>> public class IndexWriterTest {
>>
>> =A0public static void main(String[] args) throws Exception {
>> =A0 =A0FSDirectory dir =3D FSDirectory.open(new File("/tmp/" + new
>> UUID().toString()));
>> =A0 =A0IndexWriterConfig config =3D new
>> IndexWriterConfig(Version.LUCENE_32, new
>> StandardAnalyzer(Version.LUCENE_32));
>> =A0 =A0config.setOpenMode(IndexWriterConfig.OpenMode.CREATE);
>> =A0 =A0IndexWriter writer =3D new IndexWriter(dir, config);
>> =A0 =A0IndexSearcher searcher =3D new IndexSearcher(dir, true);
>> =A0}
>>
>> }
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49904-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun  6 15:58:53 2011
Return-Path: <java-user-return-49904-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C10AC4B1A
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  6 Jun 2011 15:58:53 +0000 (UTC)
Received: (qmail 48623 invoked by uid 500); 6 Jun 2011 15:58:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48534 invoked by uid 500); 6 Jun 2011 15:58:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48425 invoked by uid 99); 6 Jun 2011 15:58:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Jun 2011 15:58:48 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.220.176] (HELO mail-vx0-f176.google.com) (209.85.220.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Jun 2011 15:58:43 +0000
Received: by vxa37 with SMTP id 37so4810305vxa.35
        for <java-user@lucene.apache.org>; Mon, 06 Jun 2011 08:58:22 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.52.176.101 with SMTP id ch5mr7180691vdc.129.1307375901956;
 Mon, 06 Jun 2011 08:58:21 -0700 (PDT)
Received: by 10.52.160.131 with HTTP; Mon, 6 Jun 2011 08:58:21 -0700 (PDT)
In-Reply-To: <000f01cc244d$db001840$910048c0$@com>
References: <000f01cc244d$db001840$910048c0$@com>
Date: Mon, 6 Jun 2011 11:58:21 -0400
Message-ID: <BANLkTikDC19_AXR4nz46-+1qBxKQHBK69Q@mail.gmail.com>
Subject: Re: RAMDirectory doesn't win over FSDirectory all the time, why?
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

This test is very old (from the 1st edition of the book but removed
from the 2nd).

Modern OS's cache newly written files in RAM, and this test doesn't
write very large files (I think?), so the test is really testing an
OS's IO cache vs Lucene's RAM Dir.

That said, I'm not sure why RAMDir would be slower... FSDir still must
go through the OS APIs even if the OS then caches in RAM.

Mike McCandless

http://blog.mikemccandless.com

2011/6/6 zhoucheng2008 <zhoucheng2008@gmail.com>:
> I read the lucene in action book and just tested the
> FSversusRAMDirectoryTest.java with the following uncommented:
>
>
>
> =A0 =A0// =A0 =A0/**
>
> =A0 =A0// =A0 =A0// change to adjust performance of indexing with FSDirec=
tory
>
> =A0 =A0 =A0 =A0writer.mergeFactor =3D 100;
>
> =A0 =A0 =A0 =A0writer.maxMergeDocs =3D 999999;
>
> =A0 =A0 =A0 =A0writer.minMergeDocs =3D 1000;
>
> // =A0 =A0*/
>
>
>
> Here is the output:
>
> RAMDirectory Time: 805 ms
>
> FSDirectory Time : 728 ms
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49905-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun  6 16:04:21 2011
Return-Path: <java-user-return-49905-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 04209431F
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  6 Jun 2011 16:04:21 +0000 (UTC)
Received: (qmail 66944 invoked by uid 500); 6 Jun 2011 16:04:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66894 invoked by uid 500); 6 Jun 2011 16:04:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66886 invoked by uid 99); 6 Jun 2011 16:04:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Jun 2011 16:04:17 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Jun 2011 16:04:11 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id BC626D36004
	for <java-user@lucene.apache.org>; Mon,  6 Jun 2011 18:03:48 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 1WKsossgqZSk for <java-user@lucene.apache.org>;
	Mon,  6 Jun 2011 18:03:40 +0200 (CEST)
Received: from VEGA (unknown [89.204.153.105])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 5040AD36001
	for <java-user@lucene.apache.org>; Mon,  6 Jun 2011 18:03:40 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <000f01cc244d$db001840$910048c0$@com> <BANLkTikDC19_AXR4nz46-+1qBxKQHBK69Q@mail.gmail.com>
In-Reply-To: <BANLkTikDC19_AXR4nz46-+1qBxKQHBK69Q@mail.gmail.com>
Subject: RE: RAMDirectory doesn't win over FSDirectory all the time, why?
Date: Mon, 6 Jun 2011 18:04:13 +0200
Message-ID: <012201cc2463$6251c4f0$26f54ed0$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQKIAOsp1okh8kKH+i4ays49lrx6eQIiiWr8kyevy4A=
Content-Language: de

Hi,

It depends on the Lucene version, so if the test uses latest Lucene on a
64bit OS, it may use MMapDirectory internally (returned on
FSDirectors.open()) - then its comparing the same with the same - =
reading
from ram memory :-)

Maybe the difference is also caused by not warming hotspot's compiler. =
Those
times are only ok, if you repeat the same code path quite often and only =
use
the recent results and not the ones from the first iterations 8AS Java's
hotspot is still optimizing).

We did not got any information about how these numbers were measured.

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Michael McCandless [mailto:lucene@mikemccandless.com]
> Sent: Monday, June 06, 2011 5:58 PM
> To: java-user@lucene.apache.org
> Subject: Re: RAMDirectory doesn't win over FSDirectory all the time, =
why?
>=20
> This test is very old (from the 1st edition of the book but removed =
from
the
> 2nd).
>=20
> Modern OS's cache newly written files in RAM, and this test doesn't =
write
> very large files (I think?), so the test is really testing an OS's IO
cache vs
> Lucene's RAM Dir.
>=20
> That said, I'm not sure why RAMDir would be slower... FSDir still must =
go
> through the OS APIs even if the OS then caches in RAM.
>=20
> Mike McCandless
>=20
> http://blog.mikemccandless.com
>=20
> 2011/6/6 zhoucheng2008 <zhoucheng2008@gmail.com>:
> > I read the lucene in action book and just tested the
> > FSversusRAMDirectoryTest.java with the following uncommented:
> >
> >
> >
> > =A0 =A0// =A0 =A0/**
> >
> > =A0 =A0// =A0 =A0// change to adjust performance of indexing with =
FSDirectory
> >
> > =A0 =A0 =A0 =A0writer.mergeFactor =3D 100;
> >
> > =A0 =A0 =A0 =A0writer.maxMergeDocs =3D 999999;
> >
> > =A0 =A0 =A0 =A0writer.minMergeDocs =3D 1000;
> >
> > // =A0 =A0*/
> >
> >
> >
> > Here is the output:
> >
> > RAMDirectory Time: 805 ms
> >
> > FSDirectory Time : 728 ms
> >
> >
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49906-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun  6 16:29:02 2011
Return-Path: <java-user-return-49906-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 589EA4C91
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  6 Jun 2011 16:29:02 +0000 (UTC)
Received: (qmail 23840 invoked by uid 500); 6 Jun 2011 16:29:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23797 invoked by uid 500); 6 Jun 2011 16:29:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23789 invoked by uid 99); 6 Jun 2011 16:29:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Jun 2011 16:29:00 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of zhoucheng2008@gmail.com designates 209.85.210.48 as permitted sender)
Received: from [209.85.210.48] (HELO mail-pz0-f48.google.com) (209.85.210.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Jun 2011 16:28:52 +0000
Received: by pzk10 with SMTP id 10so2713110pzk.35
        for <java-user@lucene.apache.org>; Mon, 06 Jun 2011 09:28:31 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:from:to:references:in-reply-to:subject:date
         :message-id:mime-version:content-type:content-transfer-encoding
         :x-mailer:thread-index:content-language;
        bh=EHPg3nZCLxzkSZKmQgbtIrcePy5MvBZJcYaGPLhL5xk=;
        b=KtS/S7gnhFgsDS/a1vMkgFARyTqq3c7OKpQt+A7ewvOuCdra78MVc6a8FtjmsOtgoH
         /oCVZ0R9jldSUp6po5jefEYLK5WgThfM00LaxkMgSuPwNnj8Punr8ZE4A1hjWoyiIEWv
         cojXt00H+aTuGhbTYGjLufT7VUXj4R+8lCIlk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:references:in-reply-to:subject:date:message-id:mime-version
         :content-type:content-transfer-encoding:x-mailer:thread-index
         :content-language;
        b=NKF9vayAGuJCUGUA8aI82kamwZHk3OngSO3HSLsNk3QNe9zclE+ApLAm4d0u9JwGK7
         SSQFDvMnaqqMHsq7HSoN6Be0Ucc0hkoyrHy+7VlggE5Rc8O1r9hBirr3snwa73Kf3ndE
         Y2xUYTrvapmRHbMGPSZQ1PQrAtIm1r+Yy0Vjc=
Received: by 10.68.7.41 with SMTP id g9mr2116305pba.107.1307377711544;
        Mon, 06 Jun 2011 09:28:31 -0700 (PDT)
Received: from zcdyPC ([125.123.69.123])
        by mx.google.com with ESMTPS id w2sm3792295pbg.5.2011.06.06.09.28.28
        (version=TLSv1/SSLv3 cipher=OTHER);
        Mon, 06 Jun 2011 09:28:30 -0700 (PDT)
From: "zhoucheng2008" <zhoucheng2008@gmail.com>
To: <java-user@lucene.apache.org>
References: <000f01cc244d$db001840$910048c0$@com> <BANLkTikDC19_AXR4nz46-+1qBxKQHBK69Q@mail.gmail.com> <012201cc2463$6251c4f0$26f54ed0$@thetaphi.de>
In-Reply-To: <012201cc2463$6251c4f0$26f54ed0$@thetaphi.de>
Subject: RE: RAMDirectory doesn't win over FSDirectory all the time, why?
Date: Tue, 7 Jun 2011 00:28:19 +0800
Message-ID: <001f01cc2466$c47be5e0$4d73b1a0$@com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AQKIAOsp1okh8kKH+i4ays49lrx6eQIiiWr8kyevy4CAAAW7IA==
Content-Language: en-us
X-Virus-Checked: Checked by ClamAV on apache.org

I did run it on a 64bit win7 and use Lucene 3.0.3. The result that FSD =
outperforms RAM in this case seems to be consistent as I ran a bunch of =
tests.

My wild guess is that FSD can leverage the MMapDirectory advantage as =
well as the three tuning parameters. Just a thought.

-----Original Message-----
From: Uwe Schindler [mailto:uwe@thetaphi.de]=20
Sent: Tuesday, June 07, 2011 12:04 AM
To: java-user@lucene.apache.org
Subject: RE: RAMDirectory doesn't win over FSDirectory all the time, =
why?

Hi,

It depends on the Lucene version, so if the test uses latest Lucene on a
64bit OS, it may use MMapDirectory internally (returned on
FSDirectors.open()) - then its comparing the same with the same - =
reading
from ram memory :-)

Maybe the difference is also caused by not warming hotspot's compiler. =
Those
times are only ok, if you repeat the same code path quite often and only =
use
the recent results and not the ones from the first iterations 8AS Java's
hotspot is still optimizing).

We did not got any information about how these numbers were measured.

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Michael McCandless [mailto:lucene@mikemccandless.com]
> Sent: Monday, June 06, 2011 5:58 PM
> To: java-user@lucene.apache.org
> Subject: Re: RAMDirectory doesn't win over FSDirectory all the time, =
why?
>=20
> This test is very old (from the 1st edition of the book but removed =
from
the
> 2nd).
>=20
> Modern OS's cache newly written files in RAM, and this test doesn't =
write
> very large files (I think?), so the test is really testing an OS's IO
cache vs
> Lucene's RAM Dir.
>=20
> That said, I'm not sure why RAMDir would be slower... FSDir still must =
go
> through the OS APIs even if the OS then caches in RAM.
>=20
> Mike McCandless
>=20
> http://blog.mikemccandless.com
>=20
> 2011/6/6 zhoucheng2008 <zhoucheng2008@gmail.com>:
> > I read the lucene in action book and just tested the
> > FSversusRAMDirectoryTest.java with the following uncommented:
> >
> >
> >
> >    //    /**
> >
> >    //    // change to adjust performance of indexing with =
FSDirectory
> >
> >        writer.mergeFactor =3D 100;
> >
> >        writer.maxMergeDocs =3D 999999;
> >
> >        writer.minMergeDocs =3D 1000;
> >
> > //    */
> >
> >
> >
> > Here is the output:
> >
> > RAMDirectory Time: 805 ms
> >
> > FSDirectory Time : 728 ms
> >
> >
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49907-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun  6 22:08:07 2011
Return-Path: <java-user-return-49907-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 75E3B4881
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  6 Jun 2011 22:08:07 +0000 (UTC)
Received: (qmail 97858 invoked by uid 500); 6 Jun 2011 22:08:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97790 invoked by uid 500); 6 Jun 2011 22:08:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 44081 invoked by uid 99); 6 Jun 2011 16:38:27 -0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of czhou@yeeyantang.com designates 69.89.22.20 as permitted sender)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws; s=default; d=yeeyantang.com;
	h=Received:From:To:Subject:Date:Message-ID:MIME-Version:Content-Type:X-Mailer:Thread-Index:Content-Language:X-Identified-User;
	b=MW/4B1WbxUPmyYj3mDVnsHMLMOuW6feknKsrjcpwpNv3eS3O68Sy4aAJws6i7mhiKtnWRr7VHU1OXEAGo537xc4iya8SIJSLZbvPm64mhcbb/nBgqJyd1UzAT6Cs3kJs;
From: =?gb2312?B?1tyzzw==?= <czhou@yeeyantang.com>
To: <java-user@lucene.apache.org>
Subject: When nested indexing and search will be available?
Date: Tue, 7 Jun 2011 00:18:52 +0800
Message-ID: <001a01cc2465$6f07a2d0$4d16e870$@com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_001B_01CC24A8.7D2AE2D0"
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcwkZWym1N7ydNXcSiOuLMnV64xDvw==
Content-Language: en-us
X-Identified-User: {1746:box415.bluehost.com:guanshen:yeeyantang.com} {sentby:smtp auth 125.123.69.123 authed with czhou@yeeyantang.com}

------=_NextPart_000_001B_01CC24A8.7D2AE2D0
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: quoted-printable

I just saw this:
https://issues.apache.org/jira/secure/attachment/12480123/LUCENE-2454.pat=
ch

=20

One comment: should Lucene provide nested doc indexing as well?

=20

Would love to see it=A1=AFs available.


------=_NextPart_000_001B_01CC24A8.7D2AE2D0--


From java-user-return-49908-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun  6 22:16:19 2011
Return-Path: <java-user-return-49908-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CABB74113
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  6 Jun 2011 22:16:19 +0000 (UTC)
Received: (qmail 18934 invoked by uid 500); 6 Jun 2011 22:16:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18768 invoked by uid 500); 6 Jun 2011 22:16:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18760 invoked by uid 99); 6 Jun 2011 22:16:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Jun 2011 22:16:17 +0000
X-ASF-Spam-Status: No, hits=2.9 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,RFC_ABUSE_POST,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [217.146.183.238] (HELO nm8-vm0.bullet.mail.ukl.yahoo.com) (217.146.183.238)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 06 Jun 2011 22:16:07 +0000
Received: from [217.146.183.184] by nm8.bullet.mail.ukl.yahoo.com with NNFMP; 06 Jun 2011 22:15:45 -0000
Received: from [77.238.184.70] by tm15.bullet.mail.ukl.yahoo.com with NNFMP; 06 Jun 2011 22:15:45 -0000
Received: from [127.0.0.1] by smtp139.mail.ukl.yahoo.com with NNFMP; 06 Jun 2011 22:15:45 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1307398545; bh=33R0pyb6DJSn8IpucanileZ6bh7eG1iFa9GNnjwLgx8=; h=X-Yahoo-Newman-Id:X-Yahoo-Newman-Property:X-YMail-OSG:X-Yahoo-SMTP:Received:From:Mime-Version:Content-Type:Subject:Date:In-Reply-To:To:References:Message-Id:X-Mailer; b=mXrcbLshXcZHqGvTEkfXbKxtTRbDdjKIVtfHJtExxRZtfUZS4/inuE+5BiB/4E1PCV4QP69Vpl5rBz7/+6l3pifJTFKQQ5D00595GXqoD36oBRS5tbVLD2II0wcPri7xMLFfd5YxhNC5dxcxklEObWW427kKho7Xi41/XLDgH/s=
X-Yahoo-Newman-Id: 892145.27789.bm@smtp139.mail.ukl.yahoo.com
X-Yahoo-Newman-Property: ymail-3
X-YMail-OSG: gdJn_wMVM1k_UyIovCB7uu3ipB53vjGitwCFiN6TEwjpk.g
 lFZjYP0XJYDrNH67d6EfPakhU_.9kpe.2K0YPQT0oTYHbRniKsQcS88ADXJn
 3UNqhJVELyL6fjl9DC_muHG2V5fp3tuJEOgu5zrMJhle_Ed9Lx0o2O4.zG.U
 4OSx1KVDULkzjbU8ef5RF52a7mQXLr82fNSQaOMDNvuESSJCxIXAcbHg0yMu
 CuT.85SvivOZbUf5PziZ7egdZIoUxEWnp7UUjotoBL4z1lJKPrbmNOCzjU9v
 AP4e4_O6WEKHrJHJx5dwYL6WRw0VIpb47eNB2XexFSNQd2dadgfJJBIkGWMT
 dd1R8kwLKhL2.NSto8KajpkHvZm1ysPD7ozAM3V_kzkWZB9CVtDc9wgWifte
 otoAMO9yFLtfXzD5tMAy6Pd32jfU_MHGWQC8FYGkE
X-Yahoo-SMTP: rdTGKYaswBBzjeOz17cOw.4gNsDMDjs6
Received: from [192.168.1.50] (markharw00d@194.106.34.5 with plain)
        by smtp139.mail.ukl.yahoo.com with SMTP; 06 Jun 2011 22:15:45 +0000 GMT
From: Mark Harwood <markharw00d@yahoo.co.uk>
Mime-Version: 1.0 (Apple Message framework v1084)
Content-Type: multipart/alternative; boundary=Apple-Mail-1-526347353
Subject: Re: When nested indexing and search will be available?
Date: Mon, 6 Jun 2011 23:15:45 +0100
In-Reply-To: <001a01cc2465$6f07a2d0$4d16e870$@com>
To: java-user@lucene.apache.org
References: <001a01cc2465$6f07a2d0$4d16e870$@com>
Message-Id: <F5C6C442-1DC9-42A2-9006-F25D466F3A8A@yahoo.co.uk>
X-Mailer: Apple Mail (2.1084)
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-1-526347353
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=GB2312

As of 3.2 the necessary changes were put in to safely support indexing =
nested docs. See =
http://lucene.apache.org/java/3_2_0/changes/Changes.html#3.2.0.new_feature=
s


On 6 Jun 2011, at 17:18, =D6=DC=B3=CF wrote:

> I just saw this:
> =
https://issues.apache.org/jira/secure/attachment/12480123/LUCENE-2454.patc=
h
>=20
>=20
>=20
> One comment: should Lucene provide nested doc indexing as well?
>=20
>=20
>=20
> Would love to see it=A1=AFs available.
>=20


--Apple-Mail-1-526347353--

From java-user-return-49909-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun  7 00:01:48 2011
Return-Path: <java-user-return-49909-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 688D74045
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  7 Jun 2011 00:01:48 +0000 (UTC)
Received: (qmail 68740 invoked by uid 500); 7 Jun 2011 00:01:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68701 invoked by uid 500); 7 Jun 2011 00:01:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68692 invoked by uid 99); 7 Jun 2011 00:01:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Jun 2011 00:01:45 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of zhoucheng2008@gmail.com designates 209.85.210.48 as permitted sender)
Received: from [209.85.210.48] (HELO mail-pz0-f48.google.com) (209.85.210.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Jun 2011 00:01:37 +0000
Received: by pzk10 with SMTP id 10so3031422pzk.35
        for <java-user@lucene.apache.org>; Mon, 06 Jun 2011 17:01:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:from:to:references:in-reply-to:subject:date
         :message-id:mime-version:content-type:content-transfer-encoding
         :x-mailer:thread-index:content-language:x-cr-hashedpuzzle
         :x-cr-puzzleid;
        bh=spg5lYW79XdkOQ/RFLr9coRl5TN6nZXLC6wwixpEmDc=;
        b=kSanOkfiAh//YN+QmcKLK5ZpsGlVCuJu+33Jxn9KdAkOVHNIik+23aISV+h+4cBDJx
         eNf34PAsMLcTcnvQHWrGHPhIBP6z88jruciG3cREDVlOqQs+4S9psOJqXO7f4XyahX5K
         Sn2rQipWyUwrT6zDMKkyXf1sp04O/Ys2UwbVU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:references:in-reply-to:subject:date:message-id:mime-version
         :content-type:content-transfer-encoding:x-mailer:thread-index
         :content-language:x-cr-hashedpuzzle:x-cr-puzzleid;
        b=vu4tUrpB9U+ceS5gMNYFp5wPiolOLjvEqhANHAtaLUqdp2GXDz1ph0IIOJ9RqbuRsi
         9k0lxRfKRAzkomxOVXW7ZJRZyOWiY5sqmiG9dL3UiYKhtAtZhcf2O8Bsvij1rL8QWMKD
         8yjULEGw4T8tyGOGpHNJhSNjWS6lgQX8gaGtE=
Received: by 10.68.6.229 with SMTP id e5mr158247pba.21.1307404877343;
        Mon, 06 Jun 2011 17:01:17 -0700 (PDT)
Received: from zcdyPC ([125.123.71.244])
        by mx.google.com with ESMTPS id f3sm4033094pbj.16.2011.06.06.17.01.14
        (version=TLSv1/SSLv3 cipher=OTHER);
        Mon, 06 Jun 2011 17:01:16 -0700 (PDT)
From: "zhoucheng2008" <zhoucheng2008@gmail.com>
To: <java-user@lucene.apache.org>
References: <05803D733D8C44248B78398742084E62@upload.local>
In-Reply-To: <05803D733D8C44248B78398742084E62@upload.local>
Subject: When nested indexing and search will be available?
Date: Tue, 7 Jun 2011 08:01:07 +0800
Message-ID: <001801cc24a6$04f0e910$0ed2bb30$@com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
thread-index: AcwkZWym1N7ydNXcSiOuLMnV64xDvwAQIYEA
Content-Language: en-us
x-cr-hashedpuzzle: pTc= AYjM An/F CCGd DAkW Dd0J D0Sy EZ6v Efdb FhM7 HKIx HNhx Hase Ig0m IjEn JveO;1;agBhAHYAYQAtAHUAcwBlAHIAQABsAHUAYwBlAG4AZQAuAGEAcABhAGMAaABlAC4AbwByAGcA;Sosha1_v1;7;{5B43855C-FED8-492A-900D-363978D26078};egBoAG8AdQBjAGgAZQBuAGcAMgAwADAAOABAAGcAbQBhAGkAbAAuAGMAbwBtAA==;Tue, 07 Jun 2011 00:01:05 GMT;VwBoAGUAbgAgAG4AZQBzAHQAZQBkACAAaQBuAGQAZQB4AGkAbgBnACAAYQBuAGQAIABzAGUAYQByAGMAaAAgAHcAaQBsAGwAIABiAGUAIABhAHYAYQBpAGwAYQBiAGwAZQA/AA==
x-cr-puzzleid: {5B43855C-FED8-492A-900D-363978D26078}

I just saw this:
https://issues.apache.org/jira/secure/attachment/12480123/LUCENE-2454.pat=
ch

=20

One comment: should Lucene provide nested doc indexing as well?

=20

Would love to see it=A1=AFs available.




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49910-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun  7 05:36:52 2011
Return-Path: <java-user-return-49910-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id EC4636927
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  7 Jun 2011 05:36:52 +0000 (UTC)
Received: (qmail 27317 invoked by uid 500); 7 Jun 2011 05:36:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27280 invoked by uid 500); 7 Jun 2011 05:36:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27271 invoked by uid 99); 7 Jun 2011 05:36:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Jun 2011 05:36:48 +0000
X-ASF-Spam-Status: No, hits=3.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of pranavgoyal40341@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Jun 2011 05:36:42 +0000
Received: by bwz8 with SMTP id 8so6847121bwz.35
        for <java-user@lucene.apache.org>; Mon, 06 Jun 2011 22:36:21 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:from:date:message-id:subject:to
         :content-type;
        bh=dSyEqLzPhgyThX6foBhVikMl49PrxW1xomF2YYHeAuM=;
        b=eTX5/sM7Ehtos2xT/Pel45tVZg9gr6r21QWsL61nDaQR36RBTPRvuQaZoT9gAACugO
         LFLL8Z3WORJpQc3B0jIDhzIMSjwnnjd5RvVD4aglJWXWv9md+Wy2BWgD2o2z5Mr4vanT
         j+vQQwFGZUHSWHkacuKoo3toVmclN8VtsVYl0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=ghpHYlIfr92TspVkHApD5p868J3uqWx1nVvllxHzUvIFCOo7K387pOwygGW0JW/nZD
         3j0WBHTWFhf3s1dDV+pa/FTyTnf+9LSKk2o74DFXgjqyPA5WOLGVMI1T1RVQVXOc5cHE
         ZgJyywOTCCip0g/7qsgHRUCiMJe0Kh5L7DRF4=
Received: by 10.204.82.166 with SMTP id b38mr5613109bkl.207.1307424980134;
 Mon, 06 Jun 2011 22:36:20 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.112.79 with HTTP; Mon, 6 Jun 2011 22:36:00 -0700 (PDT)
From: Pranav goyal <pranavgoyal40341@gmail.com>
Date: Tue, 7 Jun 2011 11:06:00 +0530
Message-ID: <BANLkTi=ibEwo1G1wKcM8iWeDjBqSDdsdFQ@mail.gmail.com>
Subject: Lucene Indexing
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e68deb3d82e9a604a5189902

--0016e68deb3d82e9a604a5189902
Content-Type: text/plain; charset=ISO-8859-1

Hi all,

Got stuck at a place and not able to think what should I do.
I have one structure which I have to index. Let say the structure name is
Contract which has a unique Contract_ID. Let say I have 50 contracts which I
have to index.

Now each contract has let say 100 different keys with their values.

For example

key is ->Contract_ID Value is 0000324123
key is ->ContractDomain...Value is GOV
key is ->CtrtSubType...Value is PUB_TENDER[40]
key is ->DocStatus...Value is Off.DFT[1]
key is ->GenericBrandType...Value is BRND[2]
key is ->CustomerContactInfo...Value is 9346831616

like this there are 95 more keys with their values in each contract.

Now I have to index *all the contracts*.
How should I make my index?

StandardAnalyzer analyzer = new StandardAnalyzer(Version.LUCENE_31);
                IndexWriter writer = null;
                File indexDir = new File("./indexDir");
                try {
                        writer = new IndexWriter(FSDirectory.open(indexDir),
analyzer, IndexWriter.MaxFieldLength.UNLIMITED);
                }
                catch (IOException e1) {
                        e1.printStackTrace();
                }

Document d = new Document();
d.add(new Field("key", key , Field.Store.YES , Field.Index.ANALYZED));
d.add(new Field("attribute",attribute.toString(), Field.Store.YES,
Field.Index.NO));
try {
                        writer.addDocument(d);
                        writer.optimize() ;
                        writer.close();
                }
                catch (IOException e1) {
                        e1.printStackTrace();
                }
        }

In the end what I want to get is the Contract_ID whenever I search for
anything.
Please help me out. I am in a fix. Whether I am indexing it the right way or
I should do it the other way?

--0016e68deb3d82e9a604a5189902--

From java-user-return-49911-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun  7 08:28:42 2011
Return-Path: <java-user-return-49911-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BE6256129
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  7 Jun 2011 08:28:42 +0000 (UTC)
Received: (qmail 90717 invoked by uid 500); 7 Jun 2011 08:28:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90645 invoked by uid 500); 7 Jun 2011 08:28:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90637 invoked by uid 99); 7 Jun 2011 08:28:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Jun 2011 08:28:39 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [130.225.24.68] (HELO sbexch03.sb.statsbiblioteket.dk) (130.225.24.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Jun 2011 08:28:32 +0000
Received: from [130.225.25.23] (130.225.25.23) by
 sbexch03.sb.statsbiblioteket.dk (130.225.24.68) with Microsoft SMTP Server id
 8.3.159.2; Tue, 7 Jun 2011 10:28:11 +0200
Subject: Re: RAMDirectory doesn't win over FSDirectory all the time, why?
From: Toke Eskildsen <te@statsbiblioteket.dk>
Reply-To: te@statsbiblioteket.dk
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <000f01cc244d$db001840$910048c0$@com>
References: <000f01cc244d$db001840$910048c0$@com>
Content-Type: text/plain; charset="UTF-8"
Organization: State and University Library, Denmark
Date: Tue, 7 Jun 2011 10:28:11 +0200
Message-ID: <1307435291.766.313.camel@te-prime>
MIME-Version: 1.0
X-Mailer: Evolution 2.28.3 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Mon, 2011-06-06 at 15:29 +0200, zhoucheng2008 wrote:
> I read the lucene in action book and just tested the
> FSversusRAMDirectoryTest.java with the following uncommented:
> [...]Here is the output:
> 
> RAMDirectory Time: 805 ms
> 
> FSDirectory Time : 728 ms

This is the code, right?
http://java.codefetch.com/example/in/LuceneInAction/src/lia/indexing/FSversusRAMDirectoryTest.java

The test is problematic as the same two tests run sequentially.

If you change 
  long ramTiming = timeIndexWriter(ramDir);
  long fsTiming = timeIndexWriter(fsDir);
to
  long fsTiming = timeIndexWriter(fsDir);
  long ramTiming = timeIndexWriter(ramDir); 
my guess is that RAMDirectory will be faster. For a better
comparison, perform each test in separate runs (make a test
class just for RAMDirectory and one just for FSDirectory,
then run them one at a time, each in its own JVM).

One big problem when comparing RAMDirectory to file-access
is caching. What you measure with a test might not be what
you see in production, as the production index might be
large compared to RAM available for file caching.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49912-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun  7 08:38:34 2011
Return-Path: <java-user-return-49912-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id ED96E67CB
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  7 Jun 2011 08:38:34 +0000 (UTC)
Received: (qmail 6062 invoked by uid 500); 7 Jun 2011 08:38:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6025 invoked by uid 500); 7 Jun 2011 08:38:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6017 invoked by uid 99); 7 Jun 2011 08:38:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Jun 2011 08:38:32 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of bmdakshinamurthy@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Jun 2011 08:38:27 +0000
Received: by vws7 with SMTP id 7so5731288vws.35
        for <java-user@lucene.apache.org>; Tue, 07 Jun 2011 01:38:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=VdjFhh3QHm+fmKZ78VDrUKHwb6VERKZKQeGgl8Xu/T4=;
        b=vQ8XTog7jwdsC1ayq9fwu4si6TbNXScak3PTk4PAQ50En2rGgieNlP1Iphl7WW3oF9
         OHEp8fIQ86dw5BCvyYfjJxS90jugCgfX7a/LQZqHUNxgs0jfDctVHsjFEcbvt4NjtkQX
         lMeVrHqln3h+UrMakJochad+IZhC9KKdzAll8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=j2/6GqnLd72V2YYNNIOepfBZl/2eZZkXYUSASi2Eqlk+M2fz3F8XzeEdpUjJQcHblv
         842uV3XxCWI0Slr0OJbjP+EZzjHnqhLbn01v9we4tH902WSFSpQzGjGhLpsbLBg8h1j9
         IgRfw//EVKxmzo0e7th/vMTPG10nZPCEUx/d0=
MIME-Version: 1.0
Received: by 10.52.182.6 with SMTP id ea6mr337239vdc.217.1307435886516; Tue,
 07 Jun 2011 01:38:06 -0700 (PDT)
Received: by 10.52.166.2 with HTTP; Tue, 7 Jun 2011 01:38:06 -0700 (PDT)
In-Reply-To: <BANLkTi=ibEwo1G1wKcM8iWeDjBqSDdsdFQ@mail.gmail.com>
References: <BANLkTi=ibEwo1G1wKcM8iWeDjBqSDdsdFQ@mail.gmail.com>
Date: Tue, 7 Jun 2011 14:08:06 +0530
Message-ID: <BANLkTinTN0bWPMBEsKoWOnfHkVeQp7vtkg@mail.gmail.com>
Subject: Re: Lucene Indexing
From: "bmdakshinamurthy@gmail.com" <bmdakshinamurthy@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=bcaec54861949517e104a51b23a0

--bcaec54861949517e104a51b23a0
Content-Type: text/plain; charset=ISO-8859-1

If i understand the requirement correctly, contract is one document in your
system which in turn contains some *'n*' fields. Contract_ID is the key in
all the documents(Structures). Contract_ID is the only field you want to
retrieve no matter on what field you search for. If this is the case, store
and index Contract_ID for each document and just index the rest of the
fields.

This way the documents returned when you search will only contain
Contract_ID.


On Tue, Jun 7, 2011 at 11:06 AM, Pranav goyal <pranavgoyal40341@gmail.com>wrote:

> Hi all,
>
> Got stuck at a place and not able to think what should I do.
> I have one structure which I have to index. Let say the structure name is
> Contract which has a unique Contract_ID. Let say I have 50 contracts which
> I
> have to index.
>
> Now each contract has let say 100 different keys with their values.
>
> For example
>
> key is ->Contract_ID Value is 0000324123
> key is ->ContractDomain...Value is GOV
> key is ->CtrtSubType...Value is PUB_TENDER[40]
> key is ->DocStatus...Value is Off.DFT[1]
> key is ->GenericBrandType...Value is BRND[2]
> key is ->CustomerContactInfo...Value is 9346831616
>
> like this there are 95 more keys with their values in each contract.
>
> Now I have to index *all the contracts*.
> How should I make my index?
>
> StandardAnalyzer analyzer = new StandardAnalyzer(Version.LUCENE_31);
>                IndexWriter writer = null;
>                File indexDir = new File("./indexDir");
>                try {
>                        writer = new IndexWriter(FSDirectory.open(indexDir),
> analyzer, IndexWriter.MaxFieldLength.UNLIMITED);
>                }
>                catch (IOException e1) {
>                        e1.printStackTrace();
>                }
>
> Document d = new Document();
> d.add(new Field("key", key , Field.Store.YES , Field.Index.ANALYZED));
> d.add(new Field("attribute",attribute.toString(), Field.Store.YES,
> Field.Index.NO));
> try {
>                        writer.addDocument(d);
>                        writer.optimize() ;
>                        writer.close();
>                }
>                catch (IOException e1) {
>                        e1.printStackTrace();
>                }
>        }
>
> In the end what I want to get is the Contract_ID whenever I search for
> anything.
> Please help me out. I am in a fix. Whether I am indexing it the right way
> or
> I should do it the other way?
>



-- 
Thanks and Regards,
DakshinaMurthy BM

--bcaec54861949517e104a51b23a0--

From java-user-return-49913-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun  7 09:02:03 2011
Return-Path: <java-user-return-49913-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1081F6AEF
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  7 Jun 2011 09:02:03 +0000 (UTC)
Received: (qmail 34862 invoked by uid 500); 7 Jun 2011 09:02:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34811 invoked by uid 500); 7 Jun 2011 09:02:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34803 invoked by uid 99); 7 Jun 2011 09:02:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Jun 2011 09:02:00 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Jun 2011 09:01:54 +0000
Received: by iwr19 with SMTP id 19so6390447iwr.35
        for <java-user@lucene.apache.org>; Tue, 07 Jun 2011 02:01:34 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=tBPv64+myJyo5v5jf60ODYy6Kni2zhDnPK6LgqicVtM=;
        b=H6GS/L/GipTknYqUfG1KEzF1hye4wpleOIsntq2XUdbv2JaPGdgHXgJcwriUO0yOeS
         JztKWaMg8xwZTz7p4LCiRdWHLklQdqK0dAgt3DeXS1yIpC+O8nV1s0PbfTILttU/k7fR
         3BOHljvZm3v84/7gsQrdj2L2Wmo4gOuK2BtVQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=TxW5F4N6T0n+Yd+34tWX9ygY9KZslw1wIdkK4/kT8FjSICFuzM3tNzX5bg7u8iWZIn
         b4zKAhhGWPzYWMRQtLOT2xFfMBR1BH8TH652+xwUsn0ARqn/461JYIApGukvK+9OyQ5X
         Xvn23GlUkRjaaV9y2qENSb9IatH3eCX8dvhbo=
Received: by 10.231.122.211 with SMTP id m19mr2178789ibr.11.1307437294157;
 Tue, 07 Jun 2011 02:01:34 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.199.148 with HTTP; Tue, 7 Jun 2011 02:01:14 -0700 (PDT)
In-Reply-To: <4DECF654.5050104@fastmail.fm>
References: <4DECF654.5050104@fastmail.fm>
From: Ian Lea <ian.lea@gmail.com>
Date: Tue, 7 Jun 2011 10:01:14 +0100
Message-ID: <BANLkTi=X_1cPppZ7tFUfAn3CrU=sYvjQtg@mail.gmail.com>
Subject: Re: Possible Bug when add wildcard to search following an exclamation mark
To: java-user@lucene.apache.org, paul_t100@fastmail.fm
Content-Type: text/plain; charset=ISO-8859-1

What analyzer are you using?  Same at indexing and search time? What
version of lucene?  What does Luke show as being indexed?


--
Ian.


On Mon, Jun 6, 2011 at 4:46 PM, Paul Taylor <paul_t100@fastmail.fm> wrote:
> If I do a search which consists of escaped ending exclamation marks it all
> works okay:
> (aaaaahhh\!\!\!)
>
> and find the desired match
>
> but if there is a wildcard at the end, it will not find any matches
> (aaaaahhh\!\!\!*)
>
> I cant see Im doing anything in my code that would affect this, is this a
> bug in lucene ?
>
> thanks Paul
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49914-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun  7 09:05:07 2011
Return-Path: <java-user-return-49914-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 409A366A3
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  7 Jun 2011 09:05:07 +0000 (UTC)
Received: (qmail 37900 invoked by uid 500); 7 Jun 2011 09:05:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37844 invoked by uid 500); 7 Jun 2011 09:05:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37836 invoked by uid 99); 7 Jun 2011 09:05:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Jun 2011 09:05:04 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jdevgl@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Jun 2011 09:04:56 +0000
Received: by fxm7 with SMTP id 7so5119310fxm.35
        for <java-user@lucene.apache.org>; Tue, 07 Jun 2011 02:04:35 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:message-id:date:from:user-agent:mime-version:to
         :subject:content-type:content-transfer-encoding;
        bh=j8eRZpas8DGNT0OGCWuAH0rD0TVpn95T//6tYRPIPDo=;
        b=Tao74c4H9a95tpQ9Ywhs9N8HkpVStyPYIlzP+yZ3+Qf6gUBYBg7XV9EdbHWYZburV0
         rxbX9v3a5KyO3CD3V+odIJhXRSOwn3IIDHYIKKV23mhctKvV4jNUXOfgdC4xd6qIU76N
         tK/CeSjlGN+GDZvAQPWIp7LvJGjHt6ZitL1is=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject
         :content-type:content-transfer-encoding;
        b=kW26sWKKntLlduGeHJPZ3qKOqPve5eu+LjrHsxzfqqwztQAkoixjGyuF50tY3qHo/D
         DyRitpQEozxNVuurcDIXwPiSvqOLJ5DFJFyNSYYTEUH7W5TcsKahtp6GHR+AwsLuCan3
         UiE8QPCc421JPjOYl9FSV5I3eaRqD7JQIxp8c=
Received: by 10.223.127.210 with SMTP id h18mr2040583fas.79.1307437475790;
        Tue, 07 Jun 2011 02:04:35 -0700 (PDT)
Received: from [192.168.20.14] (LPuteaux-151-41-16-99.w217-128.abo.wanadoo.fr [217.128.31.99])
        by mx.google.com with ESMTPS id b25sm1640151fab.28.2011.06.07.02.04.35
        (version=SSLv3 cipher=OTHER);
        Tue, 07 Jun 2011 02:04:35 -0700 (PDT)
Message-ID: <4DEDE9C1.9060000@gmail.com>
Date: Tue, 07 Jun 2011 11:05:05 +0200
From: "G.Long" <jdevgl@gmail.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; fr; rv:1.9.2.17) Gecko/20110414 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: term frequency on a particular query
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi :)

In my index, there are documents like :

doc { question: 1, response: 1, word: excellent }
doc { question 1, response: 1, word: great }
doc { question 1, response: 2, word: bad }
doc { question 1, response: 2, word: excellent}
doc { question 2, response: 1, word: car}
doc { question 2, response: 2, word: bike}
etc.

I would like to get the word which is the most used for question 1.

I learned something about term frequency but all the code samples I 
found on the internet deals about the entire index (with indexReader.terms).

Any idea ?

Thank you :)


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49915-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun  7 09:23:14 2011
Return-Path: <java-user-return-49915-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1EE1F6095
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  7 Jun 2011 09:23:14 +0000 (UTC)
Received: (qmail 58151 invoked by uid 500); 7 Jun 2011 09:23:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58099 invoked by uid 500); 7 Jun 2011 09:23:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58091 invoked by uid 99); 7 Jun 2011 09:23:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Jun 2011 09:23:11 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Jun 2011 09:23:06 +0000
Received: by bwz8 with SMTP id 8so7011622bwz.35
        for <java-user@lucene.apache.org>; Tue, 07 Jun 2011 02:22:45 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=nW1SJB0FIo+KQ5CwPGW7ToFiXQyRMsCZmTkY//9OYCs=;
        b=uevsJxDIhZCum2iVmFkBBOCjiC6LleN5ezk2eWJ56AGotjApUOaS4t9DbvlxnLKPVh
         cTZiteX5Bn8xwJRu9auGMmd5gcPxI8WNjhMO5Ygq6X6u60C83yO50k2XJdiT/bCn8Y8S
         JkI9HU8O79tqSPAgrep2oVfyhwOF25mDPhHPc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=GdZcBxvH65NuRlNvdyAwFRXX5E8nLzWs0khVKPWOLqM2ybBxHFqpLrB/CLKVNti1UT
         RZ1YknbqEmv6OvzAor6azjLrhboyNNgXGc9AT/ArJoOQ3+OjzRmQKXyd8JMW+WXVSc8h
         30CPQwsN8F65UTrvaP5/xJDNA+eBYesV2mz8c=
Received: by 10.204.181.7 with SMTP id bw7mr641073bkb.16.1307438563513; Tue,
 07 Jun 2011 02:22:43 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.69.9 with HTTP; Tue, 7 Jun 2011 02:16:35 -0700 (PDT)
In-Reply-To: <4DECF654.5050104@fastmail.fm>
References: <4DECF654.5050104@fastmail.fm>
From: Robert Muir <rcmuir@gmail.com>
Date: Tue, 7 Jun 2011 05:16:35 -0400
Message-ID: <BANLkTim8m=P-OvYJdEdx9kT_mjTP77-onQ@mail.gmail.com>
Subject: Re: Possible Bug when add wildcard to search following an exclamation mark
To: java-user@lucene.apache.org, paul_t100@fastmail.fm
Content-Type: text/plain; charset=UTF-8

On Mon, Jun 6, 2011 at 11:46 AM, Paul Taylor <paul_t100@fastmail.fm> wrote:
> If I do a search which consists of escaped ending exclamation marks it all
> works okay:
> (aaaaahhh\!\!\!)
>
> and find the desired match
>
> but if there is a wildcard at the end, it will not find any matches
> (aaaaahhh\!\!\!*)
>
> I cant see Im doing anything in my code that would affect this, is this a
> bug in lucene ?
>

wildcards don't support escaped characters, but will in 4.0

https://issues.apache.org/jira/browse/LUCENE-588

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49916-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun  7 09:46:00 2011
Return-Path: <java-user-return-49916-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9D8F661FF
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  7 Jun 2011 09:46:00 +0000 (UTC)
Received: (qmail 95279 invoked by uid 500); 7 Jun 2011 09:45:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95233 invoked by uid 500); 7 Jun 2011 09:45:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95225 invoked by uid 99); 7 Jun 2011 09:45:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Jun 2011 09:45:58 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Jun 2011 09:45:52 +0000
Received: by iwr19 with SMTP id 19so6428086iwr.35
        for <java-user@lucene.apache.org>; Tue, 07 Jun 2011 02:45:31 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=6HywQxI5Jm3cm6lLJbMZQdKoHbiz27WM69Ev9zGtrrQ=;
        b=wQp5NSNuiwlZb5u0+mCIJ4ldqfXBzzVKE4snJvPwUVfHnACu6T1zk8T78k7nk1SmXa
         6dbnkSigYOThUxIBvDnvfkw43ren95AoLPFK+eUEdws5o/Hk+toY6nWh743GXGDqi3xT
         MYIkmNeAzHiQ+qGeROG02YtyV8ex4ILxDWzVI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=JC8lDmv/n/V3qVa1FK/ASA5oHZW0iPhBmaOpULQEx/84ySSIOAnrFjt0OEhx/uf67h
         YODktEEinRXPP8/ZuUclAl4CGX4bkQCSSqUiFluO1zt9aRlEVShvRfWse7KpAOwQVnuh
         kkg1ZghKPrKeg+22CeW1l0uFcd6U8DxdKqKL0=
Received: by 10.42.173.5 with SMTP id p5mr11145688icz.414.1307439931085; Tue,
 07 Jun 2011 02:45:31 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.199.148 with HTTP; Tue, 7 Jun 2011 02:45:11 -0700 (PDT)
In-Reply-To: <4DEDE9C1.9060000@gmail.com>
References: <4DEDE9C1.9060000@gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Tue, 7 Jun 2011 10:45:11 +0100
Message-ID: <BANLkTindnSfwdnkfnMBvqVe8qGQ-O2gLLw@mail.gmail.com>
Subject: Re: term frequency on a particular query
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

http://www.gossamer-threads.com/lists/lucene/java-user/86299 looks relevant.


--
Ian.


On Tue, Jun 7, 2011 at 10:05 AM, G.Long <jdevgl@gmail.com> wrote:
> Hi :)
>
> In my index, there are documents like :
>
> doc { question: 1, response: 1, word: excellent }
> doc { question 1, response: 1, word: great }
> doc { question 1, response: 2, word: bad }
> doc { question 1, response: 2, word: excellent}
> doc { question 2, response: 1, word: car}
> doc { question 2, response: 2, word: bike}
> etc.
>
> I would like to get the word which is the most used for question 1.
>
> I learned something about term frequency but all the code samples I found on
> the internet deals about the entire index (with indexReader.terms).
>
> Any idea ?
>
> Thank you :)
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49917-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun  7 09:54:27 2011
Return-Path: <java-user-return-49917-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CCE0260C6
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  7 Jun 2011 09:54:27 +0000 (UTC)
Received: (qmail 11309 invoked by uid 500); 7 Jun 2011 09:54:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11260 invoked by uid 500); 7 Jun 2011 09:54:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11252 invoked by uid 99); 7 Jun 2011 09:54:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Jun 2011 09:54:25 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of zhoucheng2008@gmail.com designates 209.85.212.180 as permitted sender)
Received: from [209.85.212.180] (HELO mail-px0-f180.google.com) (209.85.212.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Jun 2011 09:54:19 +0000
Received: by pxi13 with SMTP id 13so2721229pxi.11
        for <java-user@lucene.apache.org>; Tue, 07 Jun 2011 02:53:58 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:from:to:references:in-reply-to:subject:date
         :message-id:mime-version:content-type:content-transfer-encoding
         :x-mailer:thread-index:content-language;
        bh=w6O4xWFDYCKGP+LLcaMZS5iiCsjVBm3/Rz4UwnCAHlc=;
        b=W1dpXk1yzHUy5amJ6f/qezw+e51sVGLRpZjQvKSF7bcxYsgVSPKKxOFZ7i1FdDxTTo
         qDuQzmaGF61bKZv0SZ17E96fw5aGZI6iNhsFsYUqYBGBKbIW1mcznHHICi5IkJUb71cY
         tNrw7/nac1wupm9qpL4HD66hCZv938UBVHzEc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:references:in-reply-to:subject:date:message-id:mime-version
         :content-type:content-transfer-encoding:x-mailer:thread-index
         :content-language;
        b=TwNSq9zauTNhkOg/q5U+pOb2osme+eKQEYWQ82YS4Z2Uu8a8c0sFFwLHmuudbfXf+P
         HJ4aB1oPvRNk6HSDj1gJzJGHOmWb+MPBC9A/L6UF0NPFwcVLZ+TVPQ2uaHN0OROvzSzO
         sb6WuVphOJY4o7KyDOZzp/8IUVDFTwMqBFlI8=
Received: by 10.142.128.13 with SMTP id a13mr73742wfd.18.1307440438820;
        Tue, 07 Jun 2011 02:53:58 -0700 (PDT)
Received: from zcdyPC ([60.163.55.7])
        by mx.google.com with ESMTPS id p5sm24473pbk.4.2011.06.07.02.53.01
        (version=TLSv1/SSLv3 cipher=OTHER);
        Tue, 07 Jun 2011 02:53:57 -0700 (PDT)
From: "zhoucheng2008" <zhoucheng2008@gmail.com>
To: <java-user@lucene.apache.org>,
	<te@statsbiblioteket.dk>
References: <000f01cc244d$db001840$910048c0$@com> <1307435291.766.313.camel@te-prime>
In-Reply-To: <1307435291.766.313.camel@te-prime>
Subject: RE: RAMDirectory doesn't win over FSDirectory all the time, why?
Date: Tue, 7 Jun 2011 17:52:28 +0800
Message-ID: <001301cc24f8$ccdaea50$6690bef0$@com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: Acwk7OiXnMJN+ZvuQv25SIQJq2WTYgAC6d0g
Content-Language: en-us

Makes sense. Thanks

-----Original Message-----
From: Toke Eskildsen [mailto:te@statsbiblioteket.dk]=20
Sent: Tuesday, June 07, 2011 4:28 PM
To: java-user@lucene.apache.org
Subject: Re: RAMDirectory doesn't win over FSDirectory all the time, =
why?

On Mon, 2011-06-06 at 15:29 +0200, zhoucheng2008 wrote:
> I read the lucene in action book and just tested the
> FSversusRAMDirectoryTest.java with the following uncommented:
> [...]Here is the output:
>=20
> RAMDirectory Time: 805 ms
>=20
> FSDirectory Time : 728 ms

This is the code, right?
http://java.codefetch.com/example/in/LuceneInAction/src/lia/indexing/FSve=
rsusRAMDirectoryTest.java

The test is problematic as the same two tests run sequentially.

If you change=20
  long ramTiming =3D timeIndexWriter(ramDir);
  long fsTiming =3D timeIndexWriter(fsDir);
to
  long fsTiming =3D timeIndexWriter(fsDir);
  long ramTiming =3D timeIndexWriter(ramDir);=20
my guess is that RAMDirectory will be faster. For a better
comparison, perform each test in separate runs (make a test
class just for RAMDirectory and one just for FSDirectory,
then run them one at a time, each in its own JVM).

One big problem when comparing RAMDirectory to file-access
is caching. What you measure with a test might not be what
you see in production, as the production index might be
large compared to RAM available for file caching.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49918-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun  7 10:53:51 2011
Return-Path: <java-user-return-49918-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E5BF8610E
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  7 Jun 2011 10:53:50 +0000 (UTC)
Received: (qmail 788 invoked by uid 500); 7 Jun 2011 10:53:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 727 invoked by uid 500); 7 Jun 2011 10:53:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 693 invoked by uid 99); 7 Jun 2011 10:53:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Jun 2011 10:53:46 +0000
X-ASF-Spam-Status: No, hits=2.5 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,FREEMAIL_REPLYTO_END_DIGIT,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of paul_t100@fastmail.fm designates 66.111.4.27 as permitted sender)
Received: from [66.111.4.27] (HELO out3.smtp.messagingengine.com) (66.111.4.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Jun 2011 10:53:40 +0000
Received: from compute5.internal (compute5.nyi.mail.srv.osa [10.202.2.45])
	by gateway1.messagingengine.com (Postfix) with ESMTP id 2C23D20D8D;
	Tue,  7 Jun 2011 06:53:20 -0400 (EDT)
Received: from frontend1.messagingengine.com ([10.202.2.160])
  by compute5.internal (MEProxy); Tue, 07 Jun 2011 06:53:20 -0400
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=messagingengine.com; h=message-id:date:from:reply-to:mime-version:to:cc:subject:references:in-reply-to:content-type:content-transfer-encoding; s=smtpout; bh=XonRcE6Umw/JkUR3AZN1fVSmvCk=; b=bld86RcuY59s7tG0EGSjnmX0tmASOF/3kOYGjsO68jEPQXNrL7bLZmR0RphrPm4R2AEUqcXZ0SdXRdnus7+yftC45dfUCgbRrMi+uuSBxhIVXIrnu2fyF2kLLYuQNbNlCqL5pyyMVbRJn5gpPyL7eWgmVTp4iLynAxKYnSPrncM=
X-Sasl-enc: eIpML5THz7hW0lRILaDTyotHvVdFL5cUJks2kfGEaH0r 1307443999
Received: from [192.168.1.65] (unknown [217.155.98.246])
	by mail.messagingengine.com (Postfix) with ESMTPSA id 6DD39401588;
	Tue,  7 Jun 2011 06:53:19 -0400 (EDT)
Message-ID: <4DEE0345.10700@fastmail.fm>
Date: Tue, 07 Jun 2011 11:53:57 +0100
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To: paul_t100@fastmail.fm
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.2.17) Gecko/20110414 Thunderbird/3.1.10
MIME-Version: 1.0
To: Robert Muir <rcmuir@gmail.com>
CC: java-user@lucene.apache.org
Subject: Re: Possible Bug when add wildcard to search following an exclamation
 mark
References: <4DECF654.5050104@fastmail.fm> <BANLkTim8m=P-OvYJdEdx9kT_mjTP77-onQ@mail.gmail.com>
In-Reply-To: <BANLkTim8m=P-OvYJdEdx9kT_mjTP77-onQ@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit

On 07/06/2011 10:16, Robert Muir wrote:
> On Mon, Jun 6, 2011 at 11:46 AM, Paul Taylor<paul_t100@fastmail.fm>  wrote:
>> If I do a search which consists of escaped ending exclamation marks it all
>> works okay:
>> (aaaaahhh\!\!\!)
>>
>> and find the desired match
>>
>> but if there is a wildcard at the end, it will not find any matches
>> (aaaaahhh\!\!\!*)
>>
>> I cant see Im doing anything in my code that would affect this, is this a
>> bug in lucene ?
>>
> wildcards don't support escaped characters, but will in 4.0
>
> https://issues.apache.org/jira/browse/LUCENE-588
>
Quite a lot said in that issue, it seems to be concentrating on escaping 
wildcards chars (?, *), whereas I'm escaping an !, as part of a wildcard 
query. But I'll assume this issue covers that

Thanks alot Paul


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49919-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun  7 13:52:06 2011
Return-Path: <java-user-return-49919-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C4FBA6B1F
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  7 Jun 2011 13:52:06 +0000 (UTC)
Received: (qmail 93793 invoked by uid 500); 7 Jun 2011 13:52:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93747 invoked by uid 500); 7 Jun 2011 13:52:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93738 invoked by uid 99); 7 Jun 2011 13:52:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Jun 2011 13:52:04 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of johannes.goll@gmail.com designates 209.85.218.48 as permitted sender)
Received: from [209.85.218.48] (HELO mail-yi0-f48.google.com) (209.85.218.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Jun 2011 13:51:57 +0000
Received: by yib12 with SMTP id 12so2759611yib.35
        for <java-user@lucene.apache.org>; Tue, 07 Jun 2011 06:51:36 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=2UgO1+CAcjw+xg/4q+RO+VjoMzyWvDRfdtly/TkSeoM=;
        b=gNTwqlZDmw3jFJUbgW44wYXdB1fmrlM6a1TjHzboahFDROMrKcE+QU9lxh8nT5o5W0
         saku+3pAo0/UilOjy5Lv129nDixjNcvDg6J/UDdl8yIrw68h4kySFfMrRqoA36b+dmj7
         yf2JkIsCAldVK/GRdBBvGIoyXum0BhrUUNDUk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=mBMk9KeBwj+uVkMeYYtEqLINiT10uJPdz1gbN3c/igBdYGlXrU/j2VF4Z4bOLRDoxl
         B6JuYv4s6bXpBoHg14nnOzCZANhz4/w3oCW4lLu9HzpN1m4VJqpPuHCyggvazsPPQozP
         kSs84DZcB843LaAA4sa/wTVhRoWX1DryRsiXk=
MIME-Version: 1.0
Received: by 10.146.175.19 with SMTP id x19mr3534454yae.16.1307454696263; Tue,
 07 Jun 2011 06:51:36 -0700 (PDT)
Received: by 10.146.84.20 with HTTP; Tue, 7 Jun 2011 06:51:35 -0700 (PDT)
Date: Tue, 7 Jun 2011 09:51:35 -0400
Message-ID: <BANLkTi=ggFq16ZSf-buxBMg_=xiqvNXtqg@mail.gmail.com>
Subject: Solr/Lucene 3.1.0 | distributed search | java.net.SocketException:
 Connection reset
From: Johannes Goll <johannes.goll@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/mixed; boundary=000e0cd533fabb116604a51f8447
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd533fabb116604a51f8447
Content-Type: multipart/alternative; boundary=000e0cd533fabb115e04a51f8445

--000e0cd533fabb115e04a51f8445
Content-Type: text/plain; charset=ISO-8859-1

Hi,

sporadically when using distributed searches on a single box (18 cores)
using Solr/Lucene 3.1.0 via jetty I am getting a 'java.net.SocketException:
Connection reset' exceptions (full stack trace below). The maximum number of
shard arguments is 120. The StatsComponent is set to true with a stats.field
and stats.facet arguments specified. Document IDs are indexed and stored.
Jetty headerBufferSize is set to 10MB (attached the complete jetty.xml).
When the exception occurs performance goes down significantly. After restart
performance is restored until the exception occurs. Has anyone seen this
before? Any ideas what may cause this ?

Here the full stack trace:

SEVERE: org.apache.solr.common.SolrException:
org.apache.solr.client.solrj.SolrServerException: java.net.SocketException:
Connection reset
at
org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:281)
at
org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:129)
at org.apache.solr.core.SolrCore.execute(SolrCore.java:1360)
at
org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:356)
at
org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:252)
at
org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1212)
at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:399)
at
org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:766)
at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:450)
at
org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:230)
at
org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:114)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at org.mortbay.jetty.Server.handle(Server.java:326)
at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
at
org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:945)
at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:756)
at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)
at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
at
org.mortbay.jetty.bio.SocketConnector$Connection.run(SocketConnector.java:228)
at
org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:451)
Caused by: org.apache.solr.client.solrj.SolrServerException:
java.net.SocketException: Connection reset
at
org.apache.solr.client.solrj.impl.CommonsHttpSolrServer.request(CommonsHttpSolrServer.java:484)
at
org.apache.solr.client.solrj.impl.CommonsHttpSolrServer.request(CommonsHttpSolrServer.java:245)
at
org.apache.solr.handler.component.HttpCommComponent$1.call(SearchHandler.java:421)
at
org.apache.solr.handler.component.HttpCommComponent$1.call(SearchHandler.java:393)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at
java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:885)
at
java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)
at java.lang.Thread.run(Thread.java:619)
Caused by: java.net.SocketException: Connection reset
at java.net.SocketInputStream.read(SocketInputStream.java:168)
at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)
at java.io.BufferedInputStream.read(BufferedInputStream.java:237)
at org.apache.commons.httpclient.HttpParser.readRawLine(HttpParser.java:78)
at org.apache.commons.httpclient.HttpParser.readLine(HttpParser.java:106)
at
org.apache.commons.httpclient.HttpConnection.readLine(HttpConnection.java:1116)
at
org.apache.commons.httpclient.MultiThreadedHttpConnectionManager$HttpConnectionAdapter.readLine(MultiThreadedHttpConnectionManager.java:1413)
at
org.apache.commons.httpclient.HttpMethodBase.readStatusLine(HttpMethodBase.java:1973)
at
org.apache.commons.httpclient.HttpMethodBase.readResponse(HttpMethodBase.java:1735)
at
org.apache.commons.httpclient.HttpMethodBase.execute(HttpMethodBase.java:1098)
at
org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:398)
at
org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:171)
at
org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:397)
at
org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:323)
at
org.apache.solr.client.solrj.impl.CommonsHttpSolrServer.request(CommonsHttpSolrServer.java:428)
... 11 more

 Thanks,
Johannes

--000e0cd533fabb115e04a51f8445
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hi,<br><br>sporadically when using distributed searches on a single box (18=
 cores) using Solr/Lucene 3.1.0 via jetty I am getting a &#39;java.net.Sock=
etException: Connection reset&#39; exceptions (full stack trace below). The=
 maximum number of shard arguments is 120. The StatsComponent is set to tru=
e with a stats.field and stats.facet arguments specified. Document IDs are =
indexed and stored.=A0 Jetty headerBufferSize is set to 10MB (attached the =
complete jetty.xml). When the exception occurs performance goes down signif=
icantly. After restart performance is restored until the exception occurs. =
Has anyone seen this before? Any ideas what may cause this ?<br>
<br>Here the full stack trace:<br><br>SEVERE: org.apache.solr.common.SolrEx=
ception:=20
org.apache.solr.client.solrj.SolrServerException:=20
java.net.SocketException: Connection reset<br>
        at org.apache.solr.handler.component.SearchHandler.handleRequestBod=
y(SearchHandler.java:281)<br>
        at org.apache.solr.handler.RequestHandlerBase.handleRequest(Request=
HandlerBase.java:129)<br>
        at org.apache.solr.core.SolrCore.execute(SolrCore.java:1360)<br>
        at org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchF=
ilter.java:356)<br>
        at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatch=
Filter.java:252)<br>
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(Se=
rvletHandler.java:1212)<br>
        at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.j=
ava:399)<br>
        at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandle=
r.java:216)<br>
        at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.j=
ava:182)<br>
        at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.j=
ava:766)<br>
        at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java=
:450)<br>
        at org.mortbay.jetty.handler.ContextHandlerCollection.handle(Contex=
tHandlerCollection.java:230)<br>
        at org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollec=
tion.java:114)<br>
        at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.j=
ava:152)<br>
        at org.mortbay.jetty.Server.handle(Server.java:326)<br>
        at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.ja=
va:542)<br>
        at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConn=
ection.java:945)<br>
        at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:756)<br>
        at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)=
<br>
        at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)=
<br>
        at org.mortbay.jetty.bio.SocketConnector$Connection.run(SocketConne=
ctor.java:228)<br>
        at org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThrea=
dPool.java:451)<br>
Caused by: org.apache.solr.client.solrj.SolrServerException: java.net.Socke=
tException: Connection reset<br>
        at org.apache.solr.client.solrj.impl.CommonsHttpSolrServer.request(=
CommonsHttpSolrServer.java:484)<br>
        at org.apache.solr.client.solrj.impl.CommonsHttpSolrServer.request(=
CommonsHttpSolrServer.java:245)<br>
        at org.apache.solr.handler.component.HttpCommComponent$1.call(Searc=
hHandler.java:421)<br>
        at org.apache.solr.handler.component.HttpCommComponent$1.call(Searc=
hHandler.java:393)<br>
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:30=
3)<br>
        at java.util.concurrent.FutureTask.run(FutureTask.java:138)<br>
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.ja=
va:441)<br>
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:30=
3)<br>
        at java.util.concurrent.FutureTask.run(FutureTask.java:138)<br>
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoo=
lExecutor.java:885)<br>
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExe=
cutor.java:907)<br>
        at java.lang.Thread.run(Thread.java:619)<br>
Caused by: java.net.SocketException: Connection reset<br>
        at java.net.SocketInputStream.read(SocketInputStream.java:168)<br>
        at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)<b=
r>
        at java.io.BufferedInputStream.read(BufferedInputStream.java:237)<b=
r>
        at org.apache.commons.httpclient.HttpParser.readRawLine(HttpParser.=
java:78)<br>
        at org.apache.commons.httpclient.HttpParser.readLine(HttpParser.jav=
a:106)<br>
        at org.apache.commons.httpclient.HttpConnection.readLine(HttpConnec=
tion.java:1116)<br>
        at=20
org.apache.commons.httpclient.MultiThreadedHttpConnectionManager$HttpConnec=
tionAdapter.readLine(MultiThreadedHttpConnectionManager.java:1413)<br>
        at org.apache.commons.httpclient.HttpMethodBase.readStatusLine(Http=
MethodBase.java:1973)<br>
        at org.apache.commons.httpclient.HttpMethodBase.readResponse(HttpMe=
thodBase.java:1735)<br>
        at org.apache.commons.httpclient.HttpMethodBase.execute(HttpMethodB=
ase.java:1098)<br>
        at org.apache.commons.httpclient.HttpMethodDirector.executeWithRetr=
y(HttpMethodDirector.java:398)<br>
        at org.apache.commons.httpclient.HttpMethodDirector.executeMethod(H=
ttpMethodDirector.java:171)<br>
        at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClien=
t.java:397)<br>
        at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClien=
t.java:323)<br>
        at org.apache.solr.client.solrj.impl.CommonsHttpSolrServer.request(=
CommonsHttpSolrServer.java:428)<br>
        ... 11 more<br><br>=A0Thanks,<br>Johannes<br><br>

--000e0cd533fabb115e04a51f8445--
--000e0cd533fabb116604a51f8447
Content-Type: text/xml; charset=US-ASCII; name="jetty.xml"
Content-Disposition: attachment; filename="jetty.xml"
Content-Transfer-Encoding: base64
X-Attachment-Id: f_gomwm99m0

PD94bWwgdmVyc2lvbj0iMS4wIj8+CjwhRE9DVFlQRSBDb25maWd1cmUgUFVCTElDICItLy9Nb3J0
IEJheSBDb25zdWx0aW5nLy9EVEQgQ29uZmlndXJlLy9FTiIgImh0dHA6Ly9qZXR0eS5tb3J0YmF5
Lm9yZy9jb25maWd1cmUuZHRkIj4KCjwhLS0gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC0tPgo8IS0tIENvbmZpZ3VyZSB0aGUg
SmV0dHkgU2VydmVyICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLT4KPCEt
LSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgLS0+CjwhLS0gRG9jdW1lbnRhdGlvbiBvZiB0aGlzIGZpbGUgZm9ybWF0IGNhbiBi
ZSBmb3VuZCBhdDogICAgICAgICAgICAgIC0tPgo8IS0tIGh0dHA6Ly9kb2NzLmNvZGVoYXVzLm9y
Zy9kaXNwbGF5L0pFVFRZL2pldHR5LnhtbCAgICAgICAgICAgICAgICAtLT4KPCEtLSAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
LS0+CjwhLS0gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09IC0tPgoKCjxDb25maWd1cmUgaWQ9IlNlcnZlciIgY2xhc3M9Im9yZy5t
b3J0YmF5LmpldHR5LlNlcnZlciI+CgogICAgPCEtLSBJbmNyZWFzZSB0aGUgbWF4aW11bSBQT1NU
IHNpemUgdG8gMSBNQiB0byBiZSBhYmxlIHRvIGhhbmRsZSBsYXJnZSBzaGFyZCByZXF1ZXN0cyAt
LT4KICAgIDxDYWxsIGNsYXNzPSJqYXZhLmxhbmcuU3lzdGVtIiBuYW1lPSJzZXRQcm9wZXJ0eSI+
CiAgICAgIDxBcmc+b3JnLm1vcnRiYXkuamV0dHkuUmVxdWVzdC5tYXhGb3JtQ29udGVudFNpemU8
L0FyZz4KICAgICAgPEFyZz4xMDAwMDAwMDwvQXJnPgogICAgPC9DYWxsPgoKICAgIDwhLS0gPT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0g
LS0+CiAgICA8IS0tIFNlcnZlciBUaHJlYWQgUG9vbCAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIC0tPgogICAgPCEtLSA9PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAtLT4KICAgIDxTZXQgbmFtZT0iVGhyZWFk
UG9vbCI+CiAgICAgIDwhLS0gRGVmYXVsdCBib3VuZGVkIGJsb2NraW5nIHRocmVhZHBvb2wgCiAg
ICAgIC0tPgogICAgICA8TmV3IGNsYXNzPSJvcmcubW9ydGJheS50aHJlYWQuQm91bmRlZFRocmVh
ZFBvb2wiPgogICAgICAgIDxTZXQgbmFtZT0ibWluVGhyZWFkcyI+MTA8L1NldD4KICAgICAgICA8
U2V0IG5hbWU9Imxvd1RocmVhZHMiPjUwPC9TZXQ+CiAgICAgICAgPFNldCBuYW1lPSJtYXhUaHJl
YWRzIj4xMDAwMDwvU2V0PgogICAgICA8L05ldz4KCiAgICAgIDwhLS0gT3B0aW9uYWwgSmF2YSA1
IGJvdW5kZWQgdGhyZWFkcG9vbCB3aXRoIGpvYiBxdWV1ZSAKICAgICAgPE5ldyBjbGFzcz0ib3Jn
Lm1vcnRiYXkudGhyZWFkLmNvbmN1cnJlbnQuVGhyZWFkUG9vbCI+CiAgICAgICAgPEFyZyB0eXBl
PSJpbnQiPjA8L0FyZz4KICAgICAgICA8U2V0IG5hbWU9ImNvcmVQb29sU2l6ZSI+MTA8L1NldD4K
ICAgICAgICA8U2V0IG5hbWU9Im1heGltdW1Qb29sU2l6ZSI+MjUwPC9TZXQ+CiAgICAgIDwvTmV3
PgogICAgICAtLT4KICAgIDwvU2V0PgoKCgogICAgPCEtLSA9PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAtLT4KICAgIDwhLS0gU2V0IGNv
bm5lY3RvcnMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLS0+
CiAgICA8IS0tID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09IC0tPgogICAgPCEtLSBPbmUgb2YgZWFjaCB0eXBlISAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLT4KICAgIDwhLS0gPT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLS0+CgogICAgPCEt
LSBVc2UgdGhpcyBjb25uZWN0b3IgZm9yIG1hbnkgZnJlcXVlbnRseSBpZGxlIGNvbm5lY3Rpb25z
CiAgICAgICAgIGFuZCBmb3IgdGhyZWFkbGVzcyBjb250aW51YXRpb25zLgogICAgPENhbGwgbmFt
ZT0iYWRkQ29ubmVjdG9yIj4KICAgICAgPEFyZz4KICAgICAgICAgIDxOZXcgY2xhc3M9Im9yZy5t
b3J0YmF5LmpldHR5Lm5pby5TZWxlY3RDaGFubmVsQ29ubmVjdG9yIj4KICAgICAgICAgICAgPFNl
dCBuYW1lPSJwb3J0Ij48U3lzdGVtUHJvcGVydHkgbmFtZT0iamV0dHkucG9ydCIgZGVmYXVsdD0i
ODk4MyIvPjwvU2V0PgogICAgICAgICAgICA8U2V0IG5hbWU9Im1heElkbGVUaW1lIj4zMDAwMDwv
U2V0PgogICAgICAgICAgICA8U2V0IG5hbWU9IkFjY2VwdG9ycyI+MjwvU2V0PgogICAgICAgICAg
ICA8U2V0IG5hbWU9ImNvbmZpZGVudGlhbFBvcnQiPjg0NDM8L1NldD4KICAgICAgICAgICAgPFNl
dCBuYW1lPSdoZWFkZXJCdWZmZXJTaXplJz4xMDQ4NTc2PC9TZXQ+CiAgICAgICAgICA8L05ldz4K
ICAgICAgPC9Bcmc+CiAgICA8L0NhbGw+CiAgIC0tPiAgICAgCgogICAgPCEtLSBVc2UgdGhpcyBj
b25uZWN0b3IgaWYgTklPIGlzIG5vdCBhdmFpbGFibGUuIC0tPgogICAgPCEtLSBUaGlzIGNvbm5l
Y3RvciBpcyBjdXJyZW50bHkgYmVpbmcgdXNlZCBmb3IgU29sciBiZWNhdXNlIHRoZQogICAgICAg
ICBuaW8uU2VsZWN0Q2hhbm5lbENvbm5lY3RvciBzaG93ZWQgcG9vciBwZXJmb3JtYW5jZSB1bmRl
ciBXaW5kb3dzWFAKICAgICAgICAgZnJvbSBhIHNpbmdsZSBjbGllbnQgd2l0aCBub24tcGVyc2lz
dGVudCBjb25uZWN0aW9ucyAoMzVzIHZzIH4zbWluKQogICAgICAgICB0byBjb21wbGV0ZSAxMCww
MDAgcmVxdWVzdHMpCiAgICAtLT4KICAgIDxDYWxsIG5hbWU9ImFkZENvbm5lY3RvciI+CiAgICAg
IDxBcmc+CiAgICAgICAgICA8TmV3IGNsYXNzPSJvcmcubW9ydGJheS5qZXR0eS5iaW8uU29ja2V0
Q29ubmVjdG9yIj4KICAgICAgICAgICAgPFNldCBuYW1lPSJwb3J0Ij48U3lzdGVtUHJvcGVydHkg
bmFtZT0iamV0dHkucG9ydCIgZGVmYXVsdD0iODk4MyIvPjwvU2V0PgogICAgICAgICAgICA8U2V0
IG5hbWU9Im1heElkbGVUaW1lIj41MDAwMDwvU2V0PgogICAgICAgICAgICA8U2V0IG5hbWU9Imxv
d1Jlc291cmNlTWF4SWRsZVRpbWUiPjE1MDA8L1NldD4KICAgICAgICAgICAgIDwhLS08U2V0IG5h
bWU9J2hlYWRlckJ1ZmZlclNpemUnPjEwNDg1NzY8L1NldD4tLT4gICAKICAgICAgICAgICAgIDwh
LS1TRVQgSEVBREVSIEJVRkZFUiBTSVpFIFRPIDEwTUIgLS0+ICAgCiAgICAgICAgICAgIDxTZXQg
bmFtZT0naGVhZGVyQnVmZmVyU2l6ZSc+MTA0ODU3NjA8L1NldD4KICAgICAgICAgIDwvTmV3Pgog
ICAgICA8L0FyZz4KICAgIDwvQ2FsbD4KCiAgICA8IS0tIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAt
IC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtLT4KICAgIDwhLS0gVG8g
YWRkIGEgSFRUUFMgU1NMIGxpc3RlbmVyICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIC0tPgogICAgPCEtLSBzZWUgamV0dHktc3NsLnhtbCB0byBhZGQgYW4gc3NsIGNvbm5lY3Rv
ci4gdXNlICAgICAgICAgICAgICAgICAgLS0+CiAgICA8IS0tIGphdmEgLWphciBzdGFydC5qYXIg
ZXRjL2pldHR5LnhtbCBldGMvamV0dHktc3NsLnhtbCAgICAgICAgICAgICAtLT4KICAgIDwhLS0g
LSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAt
IC0gLSAtIC0tPgogICAgCiAgICA8IS0tID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09IC0tPgogICAgPCEtLSBTZXQgdXAgZ2xvYmFsIHNl
c3Npb24gSUQgbWFuYWdlciAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLT4KICAgIDwhLS0g
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT0gLS0+CiAgICA8IS0tCiAgICA8U2V0IG5hbWU9InNlc3Npb25JZE1hbmFnZXIiPgogICAgICA8
TmV3IGNsYXNzPSJvcmcubW9ydGJheS5qZXR0eS5zZXJ2bGV0Lkhhc2hTZXNzaW9uSWRNYW5hZ2Vy
Ij4KICAgICAgICA8U2V0IG5hbWU9Indvcmtlck5hbWUiPm5vZGUxPC9TZXQ+CiAgICAgIDwvTmV3
PgogICAgPC9TZXQ+CiAgICAtLT4KCiAgICA8IS0tID09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC0tPgogICAgPCEtLSBTZXQgaGFuZGxl
ciBDb2xsZWN0aW9uIFN0cnVjdHVyZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLT4gCiAg
ICA8IS0tID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09IC0tPgogICAgPFNldCBuYW1lPSJoYW5kbGVyIj4KICAgICAgPE5ldyBpZD0iSGFu
ZGxlcnMiIGNsYXNzPSJvcmcubW9ydGJheS5qZXR0eS5oYW5kbGVyLkhhbmRsZXJDb2xsZWN0aW9u
Ij4KICAgICAgICA8U2V0IG5hbWU9ImhhbmRsZXJzIj4KICAgICAgICAgPEFycmF5IHR5cGU9Im9y
Zy5tb3J0YmF5LmpldHR5LkhhbmRsZXIiPgogICAgICAgICAgIDxJdGVtPgogICAgICAgICAgICAg
PE5ldyBpZD0iQ29udGV4dHMiIGNsYXNzPSJvcmcubW9ydGJheS5qZXR0eS5oYW5kbGVyLkNvbnRl
eHRIYW5kbGVyQ29sbGVjdGlvbiIvPgogICAgICAgICAgIDwvSXRlbT4KICAgICAgICAgICA8SXRl
bT4KICAgICAgICAgICAgIDxOZXcgaWQ9IkRlZmF1bHRIYW5kbGVyIiBjbGFzcz0ib3JnLm1vcnRi
YXkuamV0dHkuaGFuZGxlci5EZWZhdWx0SGFuZGxlciIvPgogICAgICAgICAgIDwvSXRlbT4KICAg
ICAgICAgICA8SXRlbT4KICAgICAgICAgICAgIDxOZXcgaWQ9IlJlcXVlc3RMb2ciIGNsYXNzPSJv
cmcubW9ydGJheS5qZXR0eS5oYW5kbGVyLlJlcXVlc3RMb2dIYW5kbGVyIi8+CiAgICAgICAgICAg
PC9JdGVtPgogICAgICAgICA8L0FycmF5PgogICAgICAgIDwvU2V0PgogICAgICA8L05ldz4KICAg
IDwvU2V0PgogICAgCiAgICA8IS0tID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09IC0tPgogICAgPCEtLSBDb25maWd1cmUgdGhlIGNvbnRl
eHQgZGVwbG95ZXIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLT4KICAgIDwhLS0gQSBj
b250ZXh0IGRlcGxveWVyIHdpbGwgZGVwbG95IGNvbnRleHRzIGRlc2NyaWJlZCBpbiAgICAgICAg
LS0+CiAgICA8IS0tIGNvbmZpZ3VyYXRpb24gZmlsZXMgZGlzY292ZXJlZCBpbiBhIGRpcmVjdG9y
eS4gICAgICAgICAgICAgIC0tPgogICAgPCEtLSBUaGUgY29uZmlndXJhdGlvbiBkaXJlY3Rvcnkg
Y2FuIGJlIHNjYW5uZWQgZm9yIGhvdCAgICAgICAgICAtLT4KICAgIDwhLS0gZGVwbG95bWVudHMg
YXQgdGhlIGNvbmZpZ3VyZWQgc2NhbkludGVydmFsLiAgICAgICAgICAgICAgICAgLS0+CiAgICA8
IS0tICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIC0tPgogICAgPCEtLSBUaGlzIGRlcGxveWVyIGlzIGNvbmZpZ3VyZWQgdG8gZGVwbG95
IGNvbnRleHRzIGNvbmZpZ3VyZWQgICAtLT4KICAgIDwhLS0gaW4gdGhlICRKRVRUWV9IT01FL2Nv
bnRleHRzIGRpcmVjdG9yeSAgICAgICAgICAgICAgICAgICAgICAgLS0+CiAgICA8IS0tICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0t
PgogICAgPCEtLSA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PSAtLT4KICAgIDxDYWxsIG5hbWU9ImFkZExpZmVDeWNsZSI+CiAgICAgIDxB
cmc+CiAgICAgICAgPE5ldyBjbGFzcz0ib3JnLm1vcnRiYXkuamV0dHkuZGVwbG95ZXIuQ29udGV4
dERlcGxveWVyIj4KICAgICAgICAgIDxTZXQgbmFtZT0iY29udGV4dHMiPjxSZWYgaWQ9IkNvbnRl
eHRzIi8+PC9TZXQ+CiAgICAgICAgICA8U2V0IG5hbWU9ImNvbmZpZ3VyYXRpb25EaXIiPjxTeXN0
ZW1Qcm9wZXJ0eSBuYW1lPSJqZXR0eS5ob21lIiBkZWZhdWx0PSIuIi8+L2NvbnRleHRzPC9TZXQ+
CiAgICAgICAgICA8U2V0IG5hbWU9InNjYW5JbnRlcnZhbCI+MTwvU2V0PgogICAgICAgIDwvTmV3
PgogICAgICA8L0FyZz4KICAgIDwvQ2FsbD4KCiAgICA8IS0tID09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC0tPgogICAgPCEtLSBDb25m
aWd1cmUgdGhlIHdlYmFwcCBkZXBsb3llci4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAt
LT4KICAgIDwhLS0gQSB3ZWJhcHAgIGRlcGxveWVyIHdpbGwgZGVwbG95IHN0YW5kYXJkIHdlYmFw
cHMgZGlzY292ZXJlZCAgLS0+CiAgICA8IS0tIGluIGEgZGlyZWN0b3J5IGF0IHN0YXJ0dXAsIHdp
dGhvdXQgdGhlIG5lZWQgZm9yIGFkZGl0aW9uYWwgIC0tPgogICAgPCEtLSBjb25maWd1cmF0aW9u
IGZpbGVzLiAgICBJdCBkb2VzIG5vdCBzdXBwb3J0IGhvdCBkZXBsb3kgb3IgICAtLT4KICAgIDwh
LS0gbm9uIHN0YW5kYXJkIGNvbnRleHRzIChzZWUgQ29udGV4dERlcGxveWVyIGFib3ZlKS4gICAg
ICAgICAgLS0+CiAgICA8IS0tICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIC0tPgogICAgPCEtLSBUaGlzIGRlcGxveWVyIGlzIGNvbmZp
Z3VyZWQgdG8gZGVwbG95IHdlYmFwcHMgZnJvbSB0aGUgICAgICAtLT4KICAgIDwhLS0gJEpFVFRZ
X0hPTUUvd2ViYXBwcyBkaXJlY3RvcnkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLS0+
CiAgICA8IS0tICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIC0tPgogICAgPCEtLSBOb3JtYWxseSBvbmx5IG9uZSB0eXBlIG9mIGRlcGxv
eWVyIG5lZWQgYmUgdXNlZC4gICAgICAgICAgICAtLT4KICAgIDwhLS0gICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLS0+CiAgICA8IS0t
ID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09IC0tPgogICAgPENhbGwgbmFtZT0iYWRkTGlmZUN5Y2xlIj4KICAgICAgPEFyZz4KICAgICAg
ICA8TmV3IGNsYXNzPSJvcmcubW9ydGJheS5qZXR0eS5kZXBsb3llci5XZWJBcHBEZXBsb3llciI+
CiAgICAgICAgICA8U2V0IG5hbWU9ImNvbnRleHRzIj48UmVmIGlkPSJDb250ZXh0cyIvPjwvU2V0
PgogICAgICAgICAgPFNldCBuYW1lPSJ3ZWJBcHBEaXIiPjxTeXN0ZW1Qcm9wZXJ0eSBuYW1lPSJq
ZXR0eS5ob21lIiBkZWZhdWx0PSIuIi8+L3dlYmFwcHM8L1NldD4KCQkJCSAgPFNldCBuYW1lPSJw
YXJlbnRMb2FkZXJQcmlvcml0eSI+ZmFsc2U8L1NldD4KCQkJCSAgPFNldCBuYW1lPSJleHRyYWN0
Ij50cnVlPC9TZXQ+CgkJCQkgIDxTZXQgbmFtZT0iYWxsb3dEdXBsaWNhdGVzIj5mYWxzZTwvU2V0
PgogICAgICAgICAgPFNldCBuYW1lPSJkZWZhdWx0c0Rlc2NyaXB0b3IiPjxTeXN0ZW1Qcm9wZXJ0
eSBuYW1lPSJqZXR0eS5ob21lIiBkZWZhdWx0PSIuIi8+L2V0Yy93ZWJkZWZhdWx0LnhtbDwvU2V0
PgogICAgICAgIDwvTmV3PgogICAgICA8L0FyZz4KICAgIDwvQ2FsbD4KCiAgICA8IS0tID09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC0t
PgogICAgPCEtLSBDb25maWd1cmUgQXV0aGVudGljYXRpb24gUmVhbG1zICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAtLT4KICAgIDwhLS0gUmVhbG1zIG1heSBiZSBjb25maWd1cmVkIGZvciB0
aGUgZW50aXJlIHNlcnZlciBoZXJlLCBvciAgICAgLS0+CiAgICA8IS0tIHRoZXkgY2FuIGJlIGNv
bmZpZ3VyZWQgZm9yIGEgc3BlY2lmaWMgd2ViIGFwcCBpbiBhIGNvbnRleHQgIC0tPgogICAgPCEt
LSBjb25maWd1cmF0aW9uIChzZWUgJChqZXR0eS5ob21lKS9jb250ZXh0cy90ZXN0LnhtbCBmb3Ig
YW4gICAtLT4KICAgIDwhLS0gZXhhbXBsZSkuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgLS0+CiAgICA8IS0tID09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC0tPgogICAgPFNldCBuYW1lPSJV
c2VyUmVhbG1zIj4KICAgICAgPEFycmF5IHR5cGU9Im9yZy5tb3J0YmF5LmpldHR5LnNlY3VyaXR5
LlVzZXJSZWFsbSI+CiAgICAgICAgPCEtLQogICAgICAgIDxJdGVtPgogICAgICAgICAgPE5ldyBj
bGFzcz0ib3JnLm1vcnRiYXkuamV0dHkuc2VjdXJpdHkuSGFzaFVzZXJSZWFsbSI+CiAgICAgICAg
ICAgIDxTZXQgbmFtZT0ibmFtZSI+VGVzdCBSZWFsbTwvU2V0PgogICAgICAgICAgICA8U2V0IG5h
bWU9ImNvbmZpZyI+PFN5c3RlbVByb3BlcnR5IG5hbWU9ImpldHR5LmhvbWUiIGRlZmF1bHQ9Ii4i
Lz4vZXRjL3JlYWxtLnByb3BlcnRpZXM8L1NldD4KICAgICAgICAgIDwvTmV3PgogICAgICAgIDwv
SXRlbT4KCS0tPgogICAgICA8L0FycmF5PgogICAgPC9TZXQ+CgogICAgPCEtLSA9PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAtLT4KICAg
IDwhLS0gQ29uZmlndXJlIFJlcXVlc3QgTG9nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgLS0+CiAgICA8IS0tIFJlcXVlc3QgbG9ncyAgbWF5IGJlIGNvbmZpZ3VyZWQgZm9y
IHRoZSBlbnRpcmUgc2VydmVyIGhlcmUsIC0tPgogICAgPCEtLSBvciB0aGV5IGNhbiBiZSBjb25m
aWd1cmVkIGZvciBhIHNwZWNpZmljIHdlYiBhcHAgaW4gYSAgICAgICAtLT4KICAgIDwhLS0gY29u
dGV4dHMgY29uZmlndXJhdGlvbiAoc2VlICQoamV0dHkuaG9tZSkvY29udGV4dHMvdGVzdC54bWwg
LS0+CiAgICA8IS0tIGZvciBhbiBleGFtcGxlKS4gICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIC0tPgogICAgPCEtLSA9PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAtLT4KICAgIAogICAgPFJlZiBpZD0iUmVx
dWVzdExvZyI+CiAgICAgIDxTZXQgbmFtZT0icmVxdWVzdExvZyI+CiAgICAgICAgPE5ldyBpZD0i
UmVxdWVzdExvZ0ltcGwiIGNsYXNzPSJvcmcubW9ydGJheS5qZXR0eS5OQ1NBUmVxdWVzdExvZyI+
CiAgICAgICAgICA8QXJnPjxTeXN0ZW1Qcm9wZXJ0eSBuYW1lPSJqZXR0eS5sb2dzIiBkZWZhdWx0
PSIuL2xvZ3MiLz4veXl5eV9tbV9kZC5yZXF1ZXN0LmxvZzwvQXJnPgogICAgICAgICAgPFNldCBu
YW1lPSJyZXRhaW5EYXlzIj4yMDwvU2V0PgogICAgICAgICAgPFNldCBuYW1lPSJhcHBlbmQiPnRy
dWU8L1NldD4KICAgICAgICAgIDxTZXQgbmFtZT0iZXh0ZW5kZWQiPnRydWU8L1NldD4KICAgICAg
ICAgIDxTZXQgbmFtZT0iTG9nVGltZVpvbmUiPkVTVDwvU2V0PgogICAgICAgIDwvTmV3PgogICAg
ICA8L1NldD4KICAgIDwvUmVmPgoJCiAgICA8IS0tID09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC0tPgogICAgPCEtLSBleHRyYSBvcHRp
b25zICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLT4KICAg
IDwhLS0gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT0gLS0+CiAgICA8U2V0IG5hbWU9InN0b3BBdFNodXRkb3duIj50cnVlPC9TZXQ+CiAg
ICA8IS0tIGVuc3VyZS9wcmV2ZW50IFNlcnZlcjogaGVhZGVyIGJlaW5nIHNlbnQgdG8gYnJvd3Nl
cnMgICAgICAgIC0tPgogICAgPFNldCBuYW1lPSJzZW5kU2VydmVyVmVyc2lvbiI+dHJ1ZTwvU2V0
PgoKPC9Db25maWd1cmU+

--000e0cd533fabb116604a51f8447
Content-Type: text/plain; charset=us-ascii


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--000e0cd533fabb116604a51f8447--

From java-user-return-49920-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun  8 05:31:50 2011
Return-Path: <java-user-return-49920-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C413C4C4D
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  8 Jun 2011 05:31:50 +0000 (UTC)
Received: (qmail 38913 invoked by uid 500); 8 Jun 2011 05:31:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38775 invoked by uid 500); 8 Jun 2011 05:31:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38767 invoked by uid 99); 8 Jun 2011 05:31:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Jun 2011 05:31:42 +0000
X-ASF-Spam-Status: No, hits=3.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of pranavgoyal40341@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Jun 2011 05:31:36 +0000
Received: by bwz8 with SMTP id 8so207108bwz.35
        for <java-user@lucene.apache.org>; Tue, 07 Jun 2011 22:31:15 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:from:date:message-id:subject:to
         :content-type;
        bh=2gWyVgz7Q8QgfhpdVuQQs5SR/Feg8JFy/rOle+PVFl0=;
        b=oHrjhnNG0IUhG5z6F4V/RFrHLqrHk7NefJLMCswRymWt000+5WoM/mRxKImxvZ8aXF
         blgVLwTyWszWNDDQtP6rjVbtU9qbsiPghUxaj/674rh/W4u/JVMjxmo7ZuJgoSifcpoN
         9NmlDFnQTeyBGvKAsyLVPcksJzAImdzFWnN7I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=omGQCeLb9ScJaPoBVzNg0RQN+HLs0LbD7sz8EyiNkUbjg+LTSfWpO49uQMEMbnE576
         k5dL5RnzTEiCu6l3em78aqnfwuVkGJbO7ZS+ydKr1mZLjDow6XXd+LDqcxEiEDH8G217
         1dDsfFgQSohelwVAau8GewC3DoeGvlcV7x/W4=
Received: by 10.204.171.65 with SMTP id g1mr1100932bkz.45.1307511075120; Tue,
 07 Jun 2011 22:31:15 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.112.79 with HTTP; Tue, 7 Jun 2011 22:30:55 -0700 (PDT)
From: Pranav goyal <pranavgoyal40341@gmail.com>
Date: Wed, 8 Jun 2011 11:00:55 +0530
Message-ID: <BANLkTim_4AX1ePiUMxGcfQngCZKQvKV-yQ@mail.gmail.com>
Subject: Lucene Result
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=bcaec52d51d72c267404a52ca508

--bcaec52d51d72c267404a52ca508
Content-Type: text/plain; charset=ISO-8859-1

Hi all,

I am getting confused in this thing,

Let say I make a lucene index using a document having a key field (which I
am storing as well as indexing)
and rest of my fields I am just indexing.

When I make some query what would be my result?
Will it be the field which I am storing or it can be anything?

--bcaec52d51d72c267404a52ca508--

From java-user-return-49921-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun  8 06:11:49 2011
Return-Path: <java-user-return-49921-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BB5D640DE
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  8 Jun 2011 06:11:49 +0000 (UTC)
Received: (qmail 67186 invoked by uid 500); 8 Jun 2011 06:11:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67011 invoked by uid 500); 8 Jun 2011 06:11:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67003 invoked by uid 99); 8 Jun 2011 06:11:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Jun 2011 06:11:41 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of anshumg@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Jun 2011 06:11:34 +0000
Received: by vws7 with SMTP id 7so203484vws.35
        for <java-user@lucene.apache.org>; Tue, 07 Jun 2011 23:11:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=8dIiSFR65fXM9Y8LL/kEnWZV9uzjmkYaAz210ppLA6Q=;
        b=O7LxpQ1HU/bLkgluX5kBN9Bny+jYGuSVSWLWnXdyP6HKEMhR273YGmbK5/0cPx2+w1
         uZJRCyx7cVKAop1PCIMrc3a8KJ2WBVNhYK4Sv28iEWyeOOmNGfd1J4wFkD47B1b0PJQp
         NTZdBNnFdhtqbVbvqTV/8pexgbxZAvGak/EIQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=Mnf4nW5L9KfNQXxzwGQKdz0OIcOgLc5ZKLB0PkatEewe0M6oGviYzpxh0+ZcqVMYfD
         Dopt98LiErzeVgcGdzI9qLJ934KBGAIJi+4Wl5Mhoi4I2trHV9s3SCNe4Kio1fjlj9kK
         fDXC0GJjkPOvqT+Mb2Nnb5EyUo20sekdJwE9U=
Received: by 10.52.88.243 with SMTP id bj19mr38892vdb.89.1307513473220; Tue,
 07 Jun 2011 23:11:13 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.52.110.166 with HTTP; Tue, 7 Jun 2011 23:10:53 -0700 (PDT)
In-Reply-To: <BANLkTim_4AX1ePiUMxGcfQngCZKQvKV-yQ@mail.gmail.com>
References: <BANLkTim_4AX1ePiUMxGcfQngCZKQvKV-yQ@mail.gmail.com>
From: Anshum <anshumg@gmail.com>
Date: Wed, 8 Jun 2011 11:40:53 +0530
Message-ID: <BANLkTikY0czYmyGzzSfC12adDExQMfTs_A@mail.gmail.com>
Subject: Re: Lucene Result
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf3071c7401c417504a52d34d8
X-Virus-Checked: Checked by ClamAV on apache.org

--20cf3071c7401c417504a52d34d8
Content-Type: text/plain; charset=ISO-8859-1

Hi Pranav,
The result would be a list of document ids, which can be used to retrieve
the document (Using an indexreader). Once you have the document, you could
fetch 'ANY' of the 'STORED' fields from the index for your purpose.
Directly, you'd not receive either the key field or any other field from the
'search' method.
Also, I'd suggest you to grab a copy of Lucene in Action 2nd Edition as it'd
help you a lot in understanding the way Lucene works/is used.

--
Anshum Gupta
http://ai-cafe.blogspot.com


On Wed, Jun 8, 2011 at 11:00 AM, Pranav goyal <pranavgoyal40341@gmail.com>wrote:

> Hi all,
>
> I am getting confused in this thing,
>
> Let say I make a lucene index using a document having a key field (which I
> am storing as well as indexing)
> and rest of my fields I am just indexing.
>
> When I make some query what would be my result?
> Will it be the field which I am storing or it can be anything?
>

--20cf3071c7401c417504a52d34d8--

From java-user-return-49922-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun  8 06:18:49 2011
Return-Path: <java-user-return-49922-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DE219439E
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  8 Jun 2011 06:18:48 +0000 (UTC)
Received: (qmail 75910 invoked by uid 500); 8 Jun 2011 06:18:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75833 invoked by uid 500); 8 Jun 2011 06:18:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75763 invoked by uid 99); 8 Jun 2011 06:18:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Jun 2011 06:18:41 +0000
X-ASF-Spam-Status: No, hits=3.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of pranavgoyal40341@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Jun 2011 06:18:36 +0000
Received: by bwz8 with SMTP id 8so234767bwz.35
        for <java-user@lucene.apache.org>; Tue, 07 Jun 2011 23:18:14 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=3gORldQEz3n9p/Wwj3KEeOT1W5DAmmkjeVLUHUBr10g=;
        b=rWlRBUVI14jmCXr8JWnBGKQkdDuDZMYhS4cTWqFFnNBLnASn0gu4d2uOzulP8CdUUJ
         BLKT9e07Of3PHN4+wDH0+cQNvpmeJwNB5mR5qMnfZKQHjqxq00Jj1g8ZTakVI0k1m4hD
         9qsmFe+1kBAklwriVHBdjZKtZNjedesl6d90s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=G3Vnfae4f/RNGIxGZ7MZfzoIsCUm6o2l3fHLKtcQRxFJF3GwR7Erfr59UN1T6f3oiv
         jUNdf3Mx2Q7e3Lh0Y7+uJCE705jMglJDMj77gt849a9d9SIM/Rq0rWvxZdLMdb9Z2w/f
         4WUjBQaO+eo6ZLaxyamGnUuRyTRh7fbWoK188=
Received: by 10.204.25.66 with SMTP id y2mr288468bkb.153.1307513894180; Tue,
 07 Jun 2011 23:18:14 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.112.79 with HTTP; Tue, 7 Jun 2011 23:17:54 -0700 (PDT)
In-Reply-To: <BANLkTikY0czYmyGzzSfC12adDExQMfTs_A@mail.gmail.com>
References: <BANLkTim_4AX1ePiUMxGcfQngCZKQvKV-yQ@mail.gmail.com> <BANLkTikY0czYmyGzzSfC12adDExQMfTs_A@mail.gmail.com>
From: Pranav goyal <pranavgoyal40341@gmail.com>
Date: Wed, 8 Jun 2011 11:47:54 +0530
Message-ID: <BANLkTi=QhbE9FuzWD1gtN4m2HHkK-cd4zA@mail.gmail.com>
Subject: Re: Lucene Result
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00032555f4723396da04a52d4d65

--00032555f4723396da04a52d4d65
Content-Type: text/plain; charset=ISO-8859-1

Thanks Anshum

On Wed, Jun 8, 2011 at 11:40 AM, Anshum <anshumg@gmail.com> wrote:

> Hi Pranav,
> The result would be a list of document ids, which can be used to retrieve
> the document (Using an indexreader). Once you have the document, you could
> fetch 'ANY' of the 'STORED' fields from the index for your purpose.
> Directly, you'd not receive either the key field or any other field from
> the
> 'search' method.
> Also, I'd suggest you to grab a copy of Lucene in Action 2nd Edition as
> it'd
> help you a lot in understanding the way Lucene works/is used.
>
> --
> Anshum Gupta
> http://ai-cafe.blogspot.com
>
>
> On Wed, Jun 8, 2011 at 11:00 AM, Pranav goyal <pranavgoyal40341@gmail.com
> >wrote:
>
> > Hi all,
> >
> > I am getting confused in this thing,
> >
> > Let say I make a lucene index using a document having a key field (which
> I
> > am storing as well as indexing)
> > and rest of my fields I am just indexing.
> >
> > When I make some query what would be my result?
> > Will it be the field which I am storing or it can be anything?
> >
>



-- 
I'm very responsible, when ever something goes wrong they always say I'm
responsible --

--00032555f4723396da04a52d4d65--

From java-user-return-49923-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun  8 06:45:50 2011
Return-Path: <java-user-return-49923-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 93A584CB6
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  8 Jun 2011 06:45:50 +0000 (UTC)
Received: (qmail 19735 invoked by uid 500); 8 Jun 2011 06:45:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19683 invoked by uid 500); 8 Jun 2011 06:45:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19675 invoked by uid 99); 8 Jun 2011 06:45:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Jun 2011 06:45:47 +0000
X-ASF-Spam-Status: No, hits=3.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of pranavgoyal40341@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Jun 2011 06:45:40 +0000
Received: by bwz8 with SMTP id 8so251491bwz.35
        for <java-user@lucene.apache.org>; Tue, 07 Jun 2011 23:45:20 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=vcmLW2mSJD2zN1j1h39yupGmwEKJHW+7VAqNuVglEEY=;
        b=DzY6IdPRBIy3P1bVRIzgayV3YSMZQdP5ks2rlYn4y9IYr7yHjPzatTltuIW3iaylhs
         TPY+826dx2Y76ACSCwKJofFLCsmTYVi25ZufiEe9C8/7O1g2xDft8LZr9EyUsKfJyyco
         ax728Omh8ARZ896y6ruzYul1TDAjhL1gYE2Ww=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=dwz0n6jYa28luvOPknSW321uhYqDFOkMdra4te7OHxSJ2Cq4+5Q8qggLZaftN7wlhZ
         H237POXxd2rLm/hY49XHfEP01pC32ivSIo0qki6AqSuRDfNP0kT7Hi49aoNU3Qa3LDMg
         fwhiP4vxkJkTuavqzb48LPvbRPftYVFWJF2BI=
Received: by 10.204.3.193 with SMTP id 1mr764359bko.72.1307515520134; Tue, 07
 Jun 2011 23:45:20 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.112.79 with HTTP; Tue, 7 Jun 2011 23:45:00 -0700 (PDT)
In-Reply-To: <BANLkTi=QhbE9FuzWD1gtN4m2HHkK-cd4zA@mail.gmail.com>
References: <BANLkTim_4AX1ePiUMxGcfQngCZKQvKV-yQ@mail.gmail.com>
 <BANLkTikY0czYmyGzzSfC12adDExQMfTs_A@mail.gmail.com> <BANLkTi=QhbE9FuzWD1gtN4m2HHkK-cd4zA@mail.gmail.com>
From: Pranav goyal <pranavgoyal40341@gmail.com>
Date: Wed, 8 Jun 2011 12:15:00 +0530
Message-ID: <BANLkTi=9D2O9KnTN1GGxB6ZNvCcKROyt6w@mail.gmail.com>
Subject: Re: Lucene Result
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001517510e541dade804a52dae62
X-Virus-Checked: Checked by ClamAV on apache.org

--001517510e541dade804a52dae62
Content-Type: text/plain; charset=ISO-8859-1

There is one field DocId which I am storing as well as indexing and DocId
and it's value is 00000341

But the search results are giving me 0 results.
Is there any error in my code for searching?




StandardAnalyzer analyzer = new StandardAnalyzer(Version.LUCENE_31);
            IndexSearcher searcher = null;
            try {
                searcher = new IndexSearcher(FSDirectory.open(indexDir));
            } catch (CorruptIndexException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
            QueryParser parser = new
QueryParser(Version.LUCENE_31,"text",analyzer);

            String[] queryStrings = new String[] {  "00000341",
            "9346868468" };
            TopDocs results = null;
            for (String queryString : queryStrings) {
                System.out.println("searching for: " + queryString);
                Query query1;
                try {
                    query1 = parser.parse(queryString);
                    try {
                        results = searcher.search(query1,10);
                    } catch (IOException e) {
                        e.printStackTrace();
                    }
                } catch (ParseException e)
                    e.printStackTrace();
                }

                System.out.println("total hits: " + results.totalHits);
                ScoreDoc[] hits = results.scoreDocs;
                Document doc = null;
                for (ScoreDoc hit : hits)
                {

                    try {
                        doc = searcher.doc(hit.doc);
                    } catch (CorruptIndexException e) {
                        e.printStackTrace();
                    } catch (IOException e) {
                        e.printStackTrace();
                    }
                    System.out.printf("%5.3f %sn", hit.score,
doc.get("DocId"));
                }



On Wed, Jun 8, 2011 at 11:47 AM, Pranav goyal <pranavgoyal40341@gmail.com>wrote:

> Thanks Anshum
>
>
> On Wed, Jun 8, 2011 at 11:40 AM, Anshum <anshumg@gmail.com> wrote:
>
>> Hi Pranav,
>> The result would be a list of document ids, which can be used to retrieve
>> the document (Using an indexreader). Once you have the document, you could
>> fetch 'ANY' of the 'STORED' fields from the index for your purpose.
>> Directly, you'd not receive either the key field or any other field from
>> the
>> 'search' method.
>> Also, I'd suggest you to grab a copy of Lucene in Action 2nd Edition as
>> it'd
>> help you a lot in understanding the way Lucene works/is used.
>>
>> --
>> Anshum Gupta
>> http://ai-cafe.blogspot.com
>>
>>
>> On Wed, Jun 8, 2011 at 11:00 AM, Pranav goyal <pranavgoyal40341@gmail.com
>> >wrote:
>>
>> > Hi all,
>> >
>> > I am getting confused in this thing,
>> >
>> > Let say I make a lucene index using a document having a key field (which
>> I
>> > am storing as well as indexing)
>> > and rest of my fields I am just indexing.
>> >
>> > When I make some query what would be my result?
>> > Will it be the field which I am storing or it can be anything?
>> >
>>
>
>
>
> --
> I'm very responsible, when ever something goes wrong they always say I'm
> responsible --
>



-- 
I'm very responsible, when ever something goes wrong they always say I'm
responsible --

--001517510e541dade804a52dae62--

From java-user-return-49924-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun  8 08:53:37 2011
Return-Path: <java-user-return-49924-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6AD0D416D
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  8 Jun 2011 08:53:37 +0000 (UTC)
Received: (qmail 59862 invoked by uid 500); 8 Jun 2011 08:53:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59817 invoked by uid 500); 8 Jun 2011 08:53:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59744 invoked by uid 99); 8 Jun 2011 08:53:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Jun 2011 08:53:28 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of evanchastelet@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Jun 2011 08:53:19 +0000
Received: by fxm7 with SMTP id 7so239416fxm.35
        for <java-user@lucene.apache.org>; Wed, 08 Jun 2011 01:52:59 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:subject:from:to:content-type:date:message-id
         :mime-version:x-mailer:content-transfer-encoding;
        bh=LnnoZD7n5IyPiNi02Scc31p2OyJCbrW3OUjnn/h+XG8=;
        b=H06FOBHU7A9gYBrls9xmAM5EocbgILS+SrEWwTXpTDZkoYNELyOlGnCpBaFp2fSWw9
         RqYzWxc30Kf9m8Vium7jUz/zVmB6gC14q4J8DtBGzhC/5uBMzk9IaTbgWR9dRCa4kI9j
         prwI3f5bGhsyaXB7pJguU+EPoOhDIqawG01So=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=subject:from:to:content-type:date:message-id:mime-version:x-mailer
         :content-transfer-encoding;
        b=A60936LWplmS2DuRXzRdGIILeM7IB/q1UO9/RxuwYWiZFdgGUb2//U/cDgGMF+GEH2
         p9uI4XOSfOmSppbbH1XZVOjIBGN2VdN/SxNXUmTzhgTNc7DGUM75At2otUnYLdDEjVs3
         t/TpPrwchi0/j07qUQNhPTjicLJuH6hIb6Mkc=
Received: by 10.223.13.13 with SMTP id z13mr1034468faz.114.1307523179676;
        Wed, 08 Jun 2011 01:52:59 -0700 (PDT)
Received: from [192.168.2.132] (g214168.upc-g.chello.nl [80.57.214.168])
        by mx.google.com with ESMTPS id y14sm121200fah.37.2011.06.08.01.52.58
        (version=SSLv3 cipher=OTHER);
        Wed, 08 Jun 2011 01:52:59 -0700 (PDT)
Subject: MultiFieldQueryParser with default AND and stopfilter
From: Elmer <evanchastelet@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset="UTF-8"
Date: Wed, 08 Jun 2011 10:52:57 +0200
Message-ID: <1307523177.3408.14.camel@elmer-P35-DS3P>
Mime-Version: 1.0
X-Mailer: Evolution 2.32.2 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I have a use case in which I use the MultiFieldQueryParser (MFQP) on
some fields that use and some fields that don't use a stopfilter. The
default operator of the MFQP is set to AND.
For example, if the search query is 'the project' (with 'the' included
in the stoplist) and the search fields are:

title - not using a stopfilter,
desc - using a stopfilter,

the parsed query becomes:

'+(title:the) +(title:project desc:project)'.

So, the problem is that docs that have the term 'the' only appearing in
their desc field are excluded from the results. So every query, with AND
as default operator, that has a stop word in it that only appears in
fields that use a stop filter will have this problem (or similar, if
there is at least one field X not using a stopfilter -> no match if a
stopword from query doesn't appear in field X). Thus, in this example, a
document with title: 'Lucene project' and desc: 'the open source search
software from Apache' will not be matched. In my opinion this is not the
expected behavior. What I'd like to see is that this doc is matched by
the given query. So, for each token in the query, that appears to be a
stopword in a field (i.e. some filter filters the token out), I want it
to be matched instead of not.

Anyone who knows a way to deal with this? I would prefer to keep using
the MFQP, since I need to support multiple fields, querytime boosting
and lucene syntax. Or is there a disadvantage by doing this?

Thanks in advance.

BR,
Elmer van Chastelet 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49925-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun  8 09:18:43 2011
Return-Path: <java-user-return-49925-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id AB9BA4EA0
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  8 Jun 2011 09:18:43 +0000 (UTC)
Received: (qmail 9575 invoked by uid 500); 8 Jun 2011 09:18:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9536 invoked by uid 500); 8 Jun 2011 09:18:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9528 invoked by uid 99); 8 Jun 2011 09:18:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Jun 2011 09:18:41 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of yahya.mohamed@gmail.com designates 74.125.83.48 as permitted sender)
Received: from [74.125.83.48] (HELO mail-gw0-f48.google.com) (74.125.83.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Jun 2011 09:18:34 +0000
Received: by gwj22 with SMTP id 22so140506gwj.35
        for <java-user@lucene.apache.org>; Wed, 08 Jun 2011 02:18:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        bh=he9iFoql0yL9555Wa79hm8rdXkrM4kBPzJ0DMjC/Os4=;
        b=n3YjeR98i1Da/JWlD+6S+vap/l3SSEjrNsr8/ml5GwjfFii04vUhMnsCrqz1Qi4YNt
         IrtUbhoURA06G+0kvOqG0aLGcsHXAFID01T9AsB9gnLohKuNDipXNO8/9VnmanwH415B
         UxLFJadQVHTyTd7zxGoE3/1ii24w0D24b6m3M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        b=c6A5fYS155nh/1ZXQFOkd1/UpUlu4+0HTt1FYg1QLzTb0uFtFRZ7BwC3TiGGvObp5Z
         ijRlRfauZcPfG4/n5HSzSsvNUlJpQtmHd8NtLAh7jaEVo2sIAJ/3yS0t4ilHM7sTd20I
         LDzLsJZkrgyFWSheN3n2zHFR2H0aF//nXs8pA=
Received: by 10.236.154.1 with SMTP id g1mr715801yhk.112.1307524693104; Wed,
 08 Jun 2011 02:18:13 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.236.207.105 with HTTP; Wed, 8 Jun 2011 02:17:53 -0700 (PDT)
From: Mohamed Yahya <yahya.mohamed@gmail.com>
Date: Wed, 8 Jun 2011 11:17:53 +0200
Message-ID: <BANLkTimPUeEpJWgHngRdryZzivPVwvA2xQ@mail.gmail.com>
Subject: Lemmatization
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Is there something in Lucene that supports lemmatization of the following f=
orm:

Mexican --> Mexico (from adjective to name/noune)

Thanks
Mohamed=C2=A0 Yahya

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49926-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun  8 09:25:45 2011
Return-Path: <java-user-return-49926-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BFA2B4A13
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  8 Jun 2011 09:25:45 +0000 (UTC)
Received: (qmail 25564 invoked by uid 500); 8 Jun 2011 09:25:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25514 invoked by uid 500); 8 Jun 2011 09:25:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25506 invoked by uid 99); 8 Jun 2011 09:25:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Jun 2011 09:25:43 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lahiruts@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Jun 2011 09:25:37 +0000
Received: by wwi18 with SMTP id 18so197033wwi.5
        for <java-user@lucene.apache.org>; Wed, 08 Jun 2011 02:25:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=w+iT+QVzhsw7VvDFSj/yq8b6OWfkh3dGPa19uH9zZAE=;
        b=BBz7Jp0QnjioSDujrIRlL0K7Nlp16/5g/bI9hux1jZVxzeQEvkH6yKQGroIBz7JOM6
         rSa/Z4c/vt7AiLF8uL/7fyKGjThnh70BSqp18m94ZNkKyBQWE5ZnnAZqbCS2aG988jL/
         NKN4WSl+eIWphq3U0AIS7VZJkxGHU7IUKbGPI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=YgdtjUY6Sxx8jnJBw0/nb6QGsaRn9Fq+YfGe3xjiJXHXze3zMjKTnqsVvXMQBINLH2
         J0mgPdS4DAtthnI8Uiuw/XytiW2brPIBst96ejHWYWEs+A0PxN5M4W0fuVg4hoerMqYW
         uCwlqGlFY7uJwSRTJYoozINDj3yadpo1I6MDg=
MIME-Version: 1.0
Received: by 10.216.240.202 with SMTP id e52mr723266wer.84.1307525117129; Wed,
 08 Jun 2011 02:25:17 -0700 (PDT)
Received: by 10.216.157.75 with HTTP; Wed, 8 Jun 2011 02:25:17 -0700 (PDT)
In-Reply-To: <BANLkTimPUeEpJWgHngRdryZzivPVwvA2xQ@mail.gmail.com>
References: <BANLkTimPUeEpJWgHngRdryZzivPVwvA2xQ@mail.gmail.com>
Date: Wed, 8 Jun 2011 14:55:17 +0530
Message-ID: <BANLkTikqzjv25JEK59BfcXwyKPXY0bEQvA@mail.gmail.com>
Subject: Re: Lemmatization
From: Lahiru Samarakoon <lahiruts@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=e0cb4e38500c2434f604a52fea28
X-Virus-Checked: Checked by ClamAV on apache.org

--e0cb4e38500c2434f604a52fea28
Content-Type: text/plain; charset=ISO-8859-1

Hi,

>
> Is there something in Lucene that supports lemmatization of the following
> form:
>
> Mexican --> Mexico (from adjective to name/noune)
>
> Lemmatization do not change part of speech. I think you are looking for a
stemming algorithm.

http://nlp.stanford.edu/IR-book/html/htmledition/stemming-and-lemmatization-1.html

>
>
> Thanks,
Lahiru

--e0cb4e38500c2434f604a52fea28--

From java-user-return-49927-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun  8 10:27:55 2011
Return-Path: <java-user-return-49927-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id EA4454109
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  8 Jun 2011 10:27:55 +0000 (UTC)
Received: (qmail 11110 invoked by uid 500); 8 Jun 2011 10:27:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11067 invoked by uid 500); 8 Jun 2011 10:27:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11059 invoked by uid 99); 8 Jun 2011 10:27:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Jun 2011 10:27:53 +0000
X-ASF-Spam-Status: No, hits=3.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of pranavgoyal40341@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Jun 2011 10:27:45 +0000
Received: by bwz8 with SMTP id 8so426050bwz.35
        for <java-user@lucene.apache.org>; Wed, 08 Jun 2011 03:27:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:from:date:message-id:subject:to
         :content-type;
        bh=FsCz8E2PGZQc1NQ0ZkopRC2qCvnqNyP6ZnWpFjh9V/o=;
        b=YYVEit3k9IqkJdyQVkUfqfk3Bfbsw3HYW2PKvfKXIfrM7ZD4s2UeARPztpDwI4KAaG
         JL0Jq1G86UTt5S2RqgVwjxWpgWSRpDt93RjAfu/EbrMGoAcjexZhWLfMSi1EhJXc5k84
         gVLYIEs2/s7gNCdVoaMh/8ospWuAXsirHEXMc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=GiYPh2yvWwP0CffXhZkt9VjbXQh12kf/s/eUIiF3pKX6V7baP1Pe26Hb4FOgCbRdFr
         2Q+8VmQkFFRPLIvlQaZ752UpUL6PdHjhZRekkW6YH4tG+/QoZb0a7nXQ/d8uUflIda6v
         5ACZU7ri3FbVgAktPiGwleBZOqMmUt26IkD+s=
Received: by 10.204.19.3 with SMTP id y3mr405174bka.180.1307528845218; Wed, 08
 Jun 2011 03:27:25 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.112.79 with HTTP; Wed, 8 Jun 2011 03:27:05 -0700 (PDT)
From: Pranav goyal <pranavgoyal40341@gmail.com>
Date: Wed, 8 Jun 2011 15:57:05 +0530
Message-ID: <BANLkTinCULdYEZBK0kedg4zut6si3JsoRw@mail.gmail.com>
Subject: Lucene indexing & Searching
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00032555717a5a545104a530c876
X-Virus-Checked: Checked by ClamAV on apache.org

--00032555717a5a545104a530c876
Content-Type: text/plain; charset=ISO-8859-1

import java.io.File;
import java.io.IOException;
import java.util.Collection;
import java.util.Iterator;
import java.util.List;
import java.util.Map;

import org.apache.lucene.analysis.Analyzer;
import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.index.IndexReader;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.queryParser.ParseException;
import org.apache.lucene.queryParser.QueryParser;
import org.apache.lucene.search.*;
import org.apache.lucene.store.*;
import org.apache.lucene.util.*;
import org.apache.lucene.index.IndexWriterConfig;
import org.apache.lucene.store.Directory;
import org.apache.lucene.store.FSDirectory;
import org.apache.lucene.util.Version;

public class test{

    private static String id;
    private Analyzer analyzer;

    public static void main(String args[]){


        try{
            Document d=new Document();
            File indexDir = new File("./index-dir");

            StandardAnalyzer analyzer = new
StandardAnalyzer(Version.LUCENE_31);
            IndexWriter writer = null;

            IndexWriterConfig conf = new
IndexWriterConfig(Version.LUCENE_31, analyzer);
            try {
                writer = new IndexWriter(FSDirectory.open(indexDir),conf);
            } catch (IOException e1) {
                e1.printStackTrace();
            }

            d.add(new
Field("DocId","00000341",Field.Store.YES,Field.Index.ANALYZED));
            d.add(new
Field("CockId","341",Field.Store.YES,Field.Index.ANALYZED));
            d.add(new
Field("RockId","41",Field.Store.YES,Field.Index.ANALYZED));
            writer.addDocument(d);
            writer.optimize();
            writer.close();
            IndexSearcher searcher = null;
            searcher = new IndexSearcher(FSDirectory.open(indexDir));
            QueryParser parser = new
QueryParser(Version.LUCENE_31,"text",analyzer);

            String[] queryStrings = new String[] {
"00000341","DocId","341","41",
                "9652993802" };
            TopDocs results = null;
            for (String queryString : queryStrings) {
                System.out.println("searching for: " + queryString);
                Query query1;
                query1 = parser.parse(queryString);
                results = searcher.search(query1,10);

                System.out.println("total hits: " + results.totalHits);
                ScoreDoc[] hits = results.scoreDocs;
                Document doc = null;
                for (ScoreDoc hit : hits)
                {
                    doc = searcher.doc(hit.doc);
                    System.out.printf("%5.3f %sn",hit.score,
doc.get("DocId"));
                }

            }

        }
         catch (Exception e) {
        e.printStackTrace();
        }
    }
}


This is giving search results as 0. Can someone please help me out. May be
my doubt would be silly but I am not getting what actually the problem is. I
am using Lucene 3.1

Thanks
Pranav

--00032555717a5a545104a530c876--

From java-user-return-49928-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun  8 10:30:02 2011
Return-Path: <java-user-return-49928-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id ECF284173
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  8 Jun 2011 10:30:02 +0000 (UTC)
Received: (qmail 15303 invoked by uid 500); 8 Jun 2011 10:30:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15266 invoked by uid 500); 8 Jun 2011 10:30:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15258 invoked by uid 99); 8 Jun 2011 10:30:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Jun 2011 10:30:00 +0000
X-ASF-Spam-Status: No, hits=3.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of pranavgoyal40341@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Jun 2011 10:29:52 +0000
Received: by bwz8 with SMTP id 8so427818bwz.35
        for <java-user@lucene.apache.org>; Wed, 08 Jun 2011 03:29:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=OzavZdlyHWBwDThViysq4cwzWcO7r91IqqSdYIw7ImA=;
        b=TTO8v6cLqP4tk1AOMlSDHLPfRWAtuYT1xrH4B4R7R5LHYlCTdsw4bFGPBRRSb4tN8x
         3YbpJdoNla5pF6yoVye7a90jmABOozU4O/hjM1sUiuk64Xowr9DiaFRo0HJyweYlywJQ
         oUJtXsOtNZwcqe517+bfYXWl9O30JwOEciArE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=DwpZFKSHe8rHk3esqcwVIb3eHcaD/MR3otzeL/tGDWNpI5o8ruHnXlrO1JkUCVDz99
         LvA/HlpGF4+OvaGsM4XP2YeXKlxbnTl9oM0cNE42oTq24UFcnUiaQ7qLIV2z4btO2ysu
         YCqGOMSoFZfPw2jC0IjY3Us0P9CmQNspawYHQ=
Received: by 10.204.171.65 with SMTP id g1mr1366553bkz.45.1307528972200; Wed,
 08 Jun 2011 03:29:32 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.112.79 with HTTP; Wed, 8 Jun 2011 03:29:12 -0700 (PDT)
In-Reply-To: <BANLkTinCULdYEZBK0kedg4zut6si3JsoRw@mail.gmail.com>
References: <BANLkTinCULdYEZBK0kedg4zut6si3JsoRw@mail.gmail.com>
From: Pranav goyal <pranavgoyal40341@gmail.com>
Date: Wed, 8 Jun 2011 15:59:12 +0530
Message-ID: <BANLkTi=Z6_qEWGhfoRfiSfVH-49Q=C8Jgg@mail.gmail.com>
Subject: Re: Lucene indexing & Searching
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=bcaec52d51d7ebe9e404a530cff7
X-Virus-Checked: Checked by ClamAV on apache.org

--bcaec52d51d7ebe9e404a530cff7
Content-Type: text/plain; charset=ISO-8859-1

Oh sry,

I got my error and it worked.

Thanks

On Wed, Jun 8, 2011 at 3:57 PM, Pranav goyal <pranavgoyal40341@gmail.com>wrote:

> import java.io.File;
> import java.io.IOException;
> import java.util.Collection;
> import java.util.Iterator;
> import java.util.List;
> import java.util.Map;
>
> import org.apache.lucene.analysis.Analyzer;
> import org.apache.lucene.analysis.standard.StandardAnalyzer;
> import org.apache.lucene.document.Document;
> import org.apache.lucene.document.Field;
> import org.apache.lucene.index.IndexReader;
> import org.apache.lucene.index.IndexWriter;
> import org.apache.lucene.queryParser.ParseException;
> import org.apache.lucene.queryParser.QueryParser;
> import org.apache.lucene.search.*;
> import org.apache.lucene.store.*;
> import org.apache.lucene.util.*;
> import org.apache.lucene.index.IndexWriterConfig;
> import org.apache.lucene.store.Directory;
> import org.apache.lucene.store.FSDirectory;
> import org.apache.lucene.util.Version;
>
> public class test{
>
>     private static String id;
>     private Analyzer analyzer;
>
>     public static void main(String args[]){
>
>
>         try{
>             Document d=new Document();
>             File indexDir = new File("./index-dir");
>
>             StandardAnalyzer analyzer = new
> StandardAnalyzer(Version.LUCENE_31);
>             IndexWriter writer = null;
>
>             IndexWriterConfig conf = new
> IndexWriterConfig(Version.LUCENE_31, analyzer);
>             try {
>                 writer = new IndexWriter(FSDirectory.open(indexDir),conf);
>             } catch (IOException e1) {
>                 e1.printStackTrace();
>             }
>
>             d.add(new
> Field("DocId","00000341",Field.Store.YES,Field.Index.ANALYZED));
>             d.add(new
> Field("CockId","341",Field.Store.YES,Field.Index.ANALYZED));
>             d.add(new
> Field("RockId","41",Field.Store.YES,Field.Index.ANALYZED));
>             writer.addDocument(d);
>             writer.optimize();
>             writer.close();
>             IndexSearcher searcher = null;
>             searcher = new IndexSearcher(FSDirectory.open(indexDir));
>             QueryParser parser = new
> QueryParser(Version.LUCENE_31,"text",analyzer);
>
>             String[] queryStrings = new String[] {
> "00000341","DocId","341","41",
>                 "9652993802" };
>             TopDocs results = null;
>             for (String queryString : queryStrings) {
>                 System.out.println("searching for: " + queryString);
>                 Query query1;
>                 query1 = parser.parse(queryString);
>                 results = searcher.search(query1,10);
>
>                 System.out.println("total hits: " + results.totalHits);
>                 ScoreDoc[] hits = results.scoreDocs;
>                 Document doc = null;
>                 for (ScoreDoc hit : hits)
>                 {
>                     doc = searcher.doc(hit.doc);
>                     System.out.printf("%5.3f %sn",hit.score,
> doc.get("DocId"));
>                 }
>
>             }
>
>         }
>          catch (Exception e) {
>         e.printStackTrace();
>         }
>     }
> }
>
>
> This is giving search results as 0. Can someone please help me out. May be
> my doubt would be silly but I am not getting what actually the problem is. I
> am using Lucene 3.1
>
> Thanks
> Pranav
>



-- 
I'm very responsible, when ever something goes wrong they always say I'm
responsible --

--bcaec52d51d7ebe9e404a530cff7--

From java-user-return-49929-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun  8 11:53:31 2011
Return-Path: <java-user-return-49929-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5A02446B6
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  8 Jun 2011 11:53:31 +0000 (UTC)
Received: (qmail 34043 invoked by uid 500); 8 Jun 2011 11:53:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33885 invoked by uid 500); 8 Jun 2011 11:53:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33877 invoked by uid 99); 8 Jun 2011 11:53:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Jun 2011 11:53:29 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yahya.mohamed@gmail.com designates 209.85.161.176 as permitted sender)
Received: from [209.85.161.176] (HELO mail-gx0-f176.google.com) (209.85.161.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Jun 2011 11:53:24 +0000
Received: by gxk7 with SMTP id 7so192248gxk.35
        for <java-user@lucene.apache.org>; Wed, 08 Jun 2011 04:53:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=akpXo+1PZlCpnVEpg8YDO/G0GadHGEaWIzDgSRopGH4=;
        b=b/Zq7uGHsAn4iFa/od2mArMOpInRUvJsr4ImiToS3WhMXIUhEpsmGfPBU2jUnOerzq
         xw1PXDPUunorMMfyOXgnmjqWMQRN/WyGzVK02W4ymSkU5WepzVb0pi0SJPBFTOtkyfw6
         UtR7Imf1vZpnRbiNbEyhVcRjaA103mL7h8a+o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=tWUyOssCNBUw2tKOfB+EMaHkeLLgIBw4V39cgIqsAETmVZ8d1uL3RE6AeQETZBsnWN
         xhYV3GQIX2/3T3KCcIPkoR0z4G8L/G44WsNk2nx6bxrOPA5gscakBetQUa9evf24XLOb
         mHUTT0D2xHkoX+bPYjSjaSGE9szgDq3ezvFqY=
Received: by 10.236.195.2 with SMTP id o2mr1934637yhn.313.1307533983082; Wed,
 08 Jun 2011 04:53:03 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.236.207.105 with HTTP; Wed, 8 Jun 2011 04:52:43 -0700 (PDT)
In-Reply-To: <BANLkTikqzjv25JEK59BfcXwyKPXY0bEQvA@mail.gmail.com>
References: <BANLkTimPUeEpJWgHngRdryZzivPVwvA2xQ@mail.gmail.com> <BANLkTikqzjv25JEK59BfcXwyKPXY0bEQvA@mail.gmail.com>
From: Mohamed Yahya <yahya.mohamed@gmail.com>
Date: Wed, 8 Jun 2011 13:52:43 +0200
Message-ID: <BANLkTimoRSoss3dgjZHQivk6kQZMxLJ7Jg@mail.gmail.com>
Subject: Re: Lemmatization
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

You're right. Still, I am not sure if there is a library that would
take care of examples such as the one I gave.

On Wed, Jun 8, 2011 at 11:25, Lahiru Samarakoon <lahiruts@gmail.com> wrote:
> Hi,
>
>>
>> Is there something in Lucene that supports lemmatization of the followin=
g
>> form:
>>
>> Mexican --> Mexico (from adjective to name/noune)
>>
>> Lemmatization do not change part of speech. I think you are looking for =
a
> stemming algorithm.
>
> http://nlp.stanford.edu/IR-book/html/htmledition/stemming-and-lemmatizati=
on-1.html
>
>>
>>
>> Thanks,
> Lahiru
>



--=20
Mohamed=C2=A0 Yahya

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49930-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun  8 12:44:33 2011
Return-Path: <java-user-return-49930-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 43C464115
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  8 Jun 2011 12:44:33 +0000 (UTC)
Received: (qmail 6174 invoked by uid 500); 8 Jun 2011 12:44:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6127 invoked by uid 500); 8 Jun 2011 12:44:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6116 invoked by uid 99); 8 Jun 2011 12:44:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Jun 2011 12:44:30 +0000
X-ASF-Spam-Status: No, hits=1.8 required=5.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLY,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Jun 2011 12:44:23 +0000
Received: by qwj9 with SMTP id 9so263288qwj.35
        for <java-user@lucene.apache.org>; Wed, 08 Jun 2011 05:44:02 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type:content-transfer-encoding;
        bh=ZxoZTS2ZbdsUjlvK4O+uHGY4mnkDKr23+m6k1HPJN+c=;
        b=vfgxHgZvC2d8c3dMVYqyijtur6jGQt5yc0rHauihbGKLMNHc1LSSCHoFFiZXd5B+Kb
         HrFN3Ix7K+F/329t+Ip04AELq5ARwgxLYV9jFlvUEo2LPHlCu7tjI2WA+DGfb1A/uIZS
         pTXbHCW5m2o/DLfdr+YcjYutJlI3QX9CEY5Yk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=FM7x+eLaMoXk9KSeX4Rln5VNRtGQe2g3jOczGQ2qzgkSVimFNZdkIsL5HHmrSDf8g/
         v4rBpsdApCHVeXUimjTu4wEJzoJAyfhiWS5hqpYmbcNc6ghK0RlsQEANmMQaCqXu6n3t
         dzk9Cp3UKlKG7hJenmzD5TcVkzBsrmqVp/xHI=
MIME-Version: 1.0
Received: by 10.229.22.4 with SMTP id l4mr5275654qcb.298.1307537041779; Wed,
 08 Jun 2011 05:44:01 -0700 (PDT)
Received: by 10.229.239.13 with HTTP; Wed, 8 Jun 2011 05:44:01 -0700 (PDT)
In-Reply-To: <BANLkTi=9D2O9KnTN1GGxB6ZNvCcKROyt6w@mail.gmail.com>
References: <BANLkTim_4AX1ePiUMxGcfQngCZKQvKV-yQ@mail.gmail.com>
	<BANLkTikY0czYmyGzzSfC12adDExQMfTs_A@mail.gmail.com>
	<BANLkTi=QhbE9FuzWD1gtN4m2HHkK-cd4zA@mail.gmail.com>
	<BANLkTi=9D2O9KnTN1GGxB6ZNvCcKROyt6w@mail.gmail.com>
Date: Wed, 8 Jun 2011 08:44:01 -0400
Message-ID: <BANLkTi=kVf=seeqZoPEFcujPvb46kHqMZg@mail.gmail.com>
Subject: Re: Lucene Result
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

hard to say. You should get a copy of Luke and inspect your index to
see if what you
think you put there is actually there. When you added data to your
index, did you
perform a commit?

Best
Erick

On Wed, Jun 8, 2011 at 2:45 AM, Pranav goyal <pranavgoyal40341@gmail.com> w=
rote:
> There is one field DocId which I am storing as well as indexing and DocId
> and it's value is 00000341
>
> But the search results are giving me 0 results.
> Is there any error in my code for searching?
>
>
>
>
> StandardAnalyzer analyzer =3D new StandardAnalyzer(Version.LUCENE_31);
> =A0 =A0 =A0 =A0 =A0 =A0IndexSearcher searcher =3D null;
> =A0 =A0 =A0 =A0 =A0 =A0try {
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0searcher =3D new IndexSearcher(FSDirectory=
.open(indexDir));
> =A0 =A0 =A0 =A0 =A0 =A0} catch (CorruptIndexException e) {
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0e.printStackTrace();
> =A0 =A0 =A0 =A0 =A0 =A0} catch (IOException e) {
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0e.printStackTrace();
> =A0 =A0 =A0 =A0 =A0 =A0}
> =A0 =A0 =A0 =A0 =A0 =A0QueryParser parser =3D new
> QueryParser(Version.LUCENE_31,"text",analyzer);
>
> =A0 =A0 =A0 =A0 =A0 =A0String[] queryStrings =3D new String[] { =A0"00000=
341",
> =A0 =A0 =A0 =A0 =A0 =A0"9346868468" };
> =A0 =A0 =A0 =A0 =A0 =A0TopDocs results =3D null;
> =A0 =A0 =A0 =A0 =A0 =A0for (String queryString : queryStrings) {
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0System.out.println("searching for: " + que=
ryString);
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0Query query1;
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0try {
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0query1 =3D parser.parse(queryStrin=
g);
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0try {
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0results =3D searcher.searc=
h(query1,10);
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0} catch (IOException e) {
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0e.printStackTrace();
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0} catch (ParseException e)
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0e.printStackTrace();
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0System.out.println("total hits: " + result=
s.totalHits);
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0ScoreDoc[] hits =3D results.scoreDocs;
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0Document doc =3D null;
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0for (ScoreDoc hit : hits)
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0{
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0try {
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0doc =3D searcher.doc(hit.d=
oc);
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0} catch (CorruptIndexException e) =
{
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0e.printStackTrace();
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0} catch (IOException e) {
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0e.printStackTrace();
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0System.out.printf("%5.3f %sn", hit=
.score,
> doc.get("DocId"));
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}
>
>
>
> On Wed, Jun 8, 2011 at 11:47 AM, Pranav goyal <pranavgoyal40341@gmail.com=
>wrote:
>
>> Thanks Anshum
>>
>>
>> On Wed, Jun 8, 2011 at 11:40 AM, Anshum <anshumg@gmail.com> wrote:
>>
>>> Hi Pranav,
>>> The result would be a list of document ids, which can be used to retrie=
ve
>>> the document (Using an indexreader). Once you have the document, you co=
uld
>>> fetch 'ANY' of the 'STORED' fields from the index for your purpose.
>>> Directly, you'd not receive either the key field or any other field fro=
m
>>> the
>>> 'search' method.
>>> Also, I'd suggest you to grab a copy of Lucene in Action 2nd Edition as
>>> it'd
>>> help you a lot in understanding the way Lucene works/is used.
>>>
>>> --
>>> Anshum Gupta
>>> http://ai-cafe.blogspot.com
>>>
>>>
>>> On Wed, Jun 8, 2011 at 11:00 AM, Pranav goyal <pranavgoyal40341@gmail.c=
om
>>> >wrote:
>>>
>>> > Hi all,
>>> >
>>> > I am getting confused in this thing,
>>> >
>>> > Let say I make a lucene index using a document having a key field (wh=
ich
>>> I
>>> > am storing as well as indexing)
>>> > and rest of my fields I am just indexing.
>>> >
>>> > When I make some query what would be my result?
>>> > Will it be the field which I am storing or it can be anything?
>>> >
>>>
>>
>>
>>
>> --
>> I'm very responsible, when ever something goes wrong they always say I'm
>> responsible --
>>
>
>
>
> --
> I'm very responsible, when ever something goes wrong they always say I'm
> responsible --
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49931-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun  8 12:49:51 2011
Return-Path: <java-user-return-49931-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D2465481F
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  8 Jun 2011 12:49:51 +0000 (UTC)
Received: (qmail 14701 invoked by uid 500); 8 Jun 2011 12:49:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14662 invoked by uid 500); 8 Jun 2011 12:49:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14654 invoked by uid 99); 8 Jun 2011 12:49:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Jun 2011 12:49:49 +0000
X-ASF-Spam-Status: No, hits=3.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of pranavgoyal40341@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Jun 2011 12:49:43 +0000
Received: by bwz8 with SMTP id 8so573534bwz.35
        for <java-user@lucene.apache.org>; Wed, 08 Jun 2011 05:49:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=r/lSDUyjGRPLYUAJfqjdQUl9ergS2XdhuwIekyMvk+k=;
        b=YohHbdjNv1lE+jPjvGg3EjnwdwgIrZJONjRfaie6qGipDduoQnevidXFM1l9cS9hA/
         9L/TfiKouNzzAddvKFqdV4NLJ0/Hq05yRtND05PKx3frdV7q+oaz/Z8RuYRyVodRowa0
         DVxPpFwjlpW/WkCViZW7m/rjLOAklC1CAA7HU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=sAYVZ4YxtuYQgtCYE3Jd/dv9q0MoBP7WgaDLKoFmfcLsW+mO+6kD2xtmHMkIQ0oZ9H
         jmmousAfWrvHCBezOzGjgd/1ymamZzkU4Pm447lR15TJvpsoIV2T8Ru0erVJiXqwXap8
         m6Z3AZOSoKDy0WmEXOMNSd+Y6CX9Uomaxqwvg=
Received: by 10.204.76.83 with SMTP id b19mr727648bkk.126.1307537362186; Wed,
 08 Jun 2011 05:49:22 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.112.79 with HTTP; Wed, 8 Jun 2011 05:49:02 -0700 (PDT)
In-Reply-To: <BANLkTi=kVf=seeqZoPEFcujPvb46kHqMZg@mail.gmail.com>
References: <BANLkTim_4AX1ePiUMxGcfQngCZKQvKV-yQ@mail.gmail.com>
 <BANLkTikY0czYmyGzzSfC12adDExQMfTs_A@mail.gmail.com> <BANLkTi=QhbE9FuzWD1gtN4m2HHkK-cd4zA@mail.gmail.com>
 <BANLkTi=9D2O9KnTN1GGxB6ZNvCcKROyt6w@mail.gmail.com> <BANLkTi=kVf=seeqZoPEFcujPvb46kHqMZg@mail.gmail.com>
From: Pranav goyal <pranavgoyal40341@gmail.com>
Date: Wed, 8 Jun 2011 18:19:02 +0530
Message-ID: <BANLkTim-FkzUXgXtSityj6Yx=KbAXiJb6w@mail.gmail.com>
Subject: Re: Lucene Result
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636499fbd00f0ab04a532c472

--001636499fbd00f0ab04a532c472
Content-Type: text/plain; charset=ISO-8859-1

Hi Erick,

Thanks for the answer, before using Luke I got where I am making a mistake,
and I replied it here.

But thanks for the reply.

On Wed, Jun 8, 2011 at 6:14 PM, Erick Erickson <erickerickson@gmail.com>wrote:

> hard to say. You should get a copy of Luke and inspect your index to
> see if what you
> think you put there is actually there. When you added data to your
> index, did you
> perform a commit?
>
> Best
> Erick
>
> On Wed, Jun 8, 2011 at 2:45 AM, Pranav goyal <pranavgoyal40341@gmail.com>
> wrote:
> > There is one field DocId which I am storing as well as indexing and DocId
> > and it's value is 00000341
> >
> > But the search results are giving me 0 results.
> > Is there any error in my code for searching?
> >
> >
> >
> >
> > StandardAnalyzer analyzer = new StandardAnalyzer(Version.LUCENE_31);
> >            IndexSearcher searcher = null;
> >            try {
> >                searcher = new IndexSearcher(FSDirectory.open(indexDir));
> >            } catch (CorruptIndexException e) {
> >                e.printStackTrace();
> >            } catch (IOException e) {
> >                e.printStackTrace();
> >            }
> >            QueryParser parser = new
> > QueryParser(Version.LUCENE_31,"text",analyzer);
> >
> >            String[] queryStrings = new String[] {  "00000341",
> >            "9346868468" };
> >            TopDocs results = null;
> >            for (String queryString : queryStrings) {
> >                System.out.println("searching for: " + queryString);
> >                Query query1;
> >                try {
> >                    query1 = parser.parse(queryString);
> >                    try {
> >                        results = searcher.search(query1,10);
> >                    } catch (IOException e) {
> >                        e.printStackTrace();
> >                    }
> >                } catch (ParseException e)
> >                    e.printStackTrace();
> >                }
> >
> >                System.out.println("total hits: " + results.totalHits);
> >                ScoreDoc[] hits = results.scoreDocs;
> >                Document doc = null;
> >                for (ScoreDoc hit : hits)
> >                {
> >
> >                    try {
> >                        doc = searcher.doc(hit.doc);
> >                    } catch (CorruptIndexException e) {
> >                        e.printStackTrace();
> >                    } catch (IOException e) {
> >                        e.printStackTrace();
> >                    }
> >                    System.out.printf("%5.3f %sn", hit.score,
> > doc.get("DocId"));
> >                }
> >
> >
> >
> > On Wed, Jun 8, 2011 at 11:47 AM, Pranav goyal <
> pranavgoyal40341@gmail.com>wrote:
> >
> >> Thanks Anshum
> >>
> >>
> >> On Wed, Jun 8, 2011 at 11:40 AM, Anshum <anshumg@gmail.com> wrote:
> >>
> >>> Hi Pranav,
> >>> The result would be a list of document ids, which can be used to
> retrieve
> >>> the document (Using an indexreader). Once you have the document, you
> could
> >>> fetch 'ANY' of the 'STORED' fields from the index for your purpose.
> >>> Directly, you'd not receive either the key field or any other field
> from
> >>> the
> >>> 'search' method.
> >>> Also, I'd suggest you to grab a copy of Lucene in Action 2nd Edition as
> >>> it'd
> >>> help you a lot in understanding the way Lucene works/is used.
> >>>
> >>> --
> >>> Anshum Gupta
> >>> http://ai-cafe.blogspot.com
> >>>
> >>>
> >>> On Wed, Jun 8, 2011 at 11:00 AM, Pranav goyal <
> pranavgoyal40341@gmail.com
> >>> >wrote:
> >>>
> >>> > Hi all,
> >>> >
> >>> > I am getting confused in this thing,
> >>> >
> >>> > Let say I make a lucene index using a document having a key field
> (which
> >>> I
> >>> > am storing as well as indexing)
> >>> > and rest of my fields I am just indexing.
> >>> >
> >>> > When I make some query what would be my result?
> >>> > Will it be the field which I am storing or it can be anything?
> >>> >
> >>>
> >>
> >>
> >>
> >> --
> >> I'm very responsible, when ever something goes wrong they always say I'm
> >> responsible --
> >>
> >
> >
> >
> > --
> > I'm very responsible, when ever something goes wrong they always say I'm
> > responsible --
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
I'm very responsible, when ever something goes wrong they always say I'm
responsible --

--001636499fbd00f0ab04a532c472--

From java-user-return-49932-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun  8 13:18:58 2011
Return-Path: <java-user-return-49932-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A4E9944ED
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  8 Jun 2011 13:18:58 +0000 (UTC)
Received: (qmail 55943 invoked by uid 500); 8 Jun 2011 13:18:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55883 invoked by uid 500); 8 Jun 2011 13:18:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55875 invoked by uid 99); 8 Jun 2011 13:18:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Jun 2011 13:18:56 +0000
X-ASF-Spam-Status: No, hits=1.8 required=5.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLY,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Jun 2011 13:18:49 +0000
Received: by qyk30 with SMTP id 30so299543qyk.14
        for <java-user@lucene.apache.org>; Wed, 08 Jun 2011 06:18:28 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type:content-transfer-encoding;
        bh=78mXl9KgjQWUwx4DRoQS+v5N0YdzSl1c0JuvWGoem0E=;
        b=QCoXflFpaGBdkZ0f8e/fdBHRdWcjTdGjh7EUOuAcPlu/fE+oLfq7JYtzZ9WGtUFnBk
         WHNaWNDM/nRoNWRzpUuXK1jv9YVo8AzI/6a4JQ8eVxylb7JAc9KSmBf1LHgmh0mSH7Om
         euF28sRGCMFtw7AnGW7dFNQFwPh3JNw3i2E8s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=dzQl8NDW6pVSD3g3BkOJUJmtxrUFHB+Se6yPxZm/Bn/vuEKUG1yvkXVhwPj5HQUX32
         zarkCxfaihenN3/F8cvNWwotBG1VJSQujqsCwbo7vDPkvRK6cVLfdVbSEAygs1xsucLQ
         KVbA5KChsoDwUvJeYnLBnG5J2XyQ1d06IGNXY=
MIME-Version: 1.0
Received: by 10.229.78.133 with SMTP id l5mr5347310qck.260.1307539107974; Wed,
 08 Jun 2011 06:18:27 -0700 (PDT)
Received: by 10.229.239.13 with HTTP; Wed, 8 Jun 2011 06:18:27 -0700 (PDT)
In-Reply-To: <BANLkTim-FkzUXgXtSityj6Yx=KbAXiJb6w@mail.gmail.com>
References: <BANLkTim_4AX1ePiUMxGcfQngCZKQvKV-yQ@mail.gmail.com>
	<BANLkTikY0czYmyGzzSfC12adDExQMfTs_A@mail.gmail.com>
	<BANLkTi=QhbE9FuzWD1gtN4m2HHkK-cd4zA@mail.gmail.com>
	<BANLkTi=9D2O9KnTN1GGxB6ZNvCcKROyt6w@mail.gmail.com>
	<BANLkTi=kVf=seeqZoPEFcujPvb46kHqMZg@mail.gmail.com>
	<BANLkTim-FkzUXgXtSityj6Yx=KbAXiJb6w@mail.gmail.com>
Date: Wed, 8 Jun 2011 09:18:27 -0400
Message-ID: <BANLkTikeMyY+L8jPUd1A+oT0DRkCivJUhg@mail.gmail.com>
Subject: Re: Lucene Result
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

glad you found it. I'd still recommend you get a copy of Luke, though,
it's invaluable.....

Best
Erick

On Wed, Jun 8, 2011 at 8:49 AM, Pranav goyal <pranavgoyal40341@gmail.com> w=
rote:
> Hi Erick,
>
> Thanks for the answer, before using Luke I got where I am making a mistak=
e,
> and I replied it here.
>
> But thanks for the reply.
>
> On Wed, Jun 8, 2011 at 6:14 PM, Erick Erickson <erickerickson@gmail.com>w=
rote:
>
>> hard to say. You should get a copy of Luke and inspect your index to
>> see if what you
>> think you put there is actually there. When you added data to your
>> index, did you
>> perform a commit?
>>
>> Best
>> Erick
>>
>> On Wed, Jun 8, 2011 at 2:45 AM, Pranav goyal <pranavgoyal40341@gmail.com=
>
>> wrote:
>> > There is one field DocId which I am storing as well as indexing and Do=
cId
>> > and it's value is 00000341
>> >
>> > But the search results are giving me 0 results.
>> > Is there any error in my code for searching?
>> >
>> >
>> >
>> >
>> > StandardAnalyzer analyzer =3D new StandardAnalyzer(Version.LUCENE_31);
>> > =A0 =A0 =A0 =A0 =A0 =A0IndexSearcher searcher =3D null;
>> > =A0 =A0 =A0 =A0 =A0 =A0try {
>> > =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0searcher =3D new IndexSearcher(FSDirect=
ory.open(indexDir));
>> > =A0 =A0 =A0 =A0 =A0 =A0} catch (CorruptIndexException e) {
>> > =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0e.printStackTrace();
>> > =A0 =A0 =A0 =A0 =A0 =A0} catch (IOException e) {
>> > =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0e.printStackTrace();
>> > =A0 =A0 =A0 =A0 =A0 =A0}
>> > =A0 =A0 =A0 =A0 =A0 =A0QueryParser parser =3D new
>> > QueryParser(Version.LUCENE_31,"text",analyzer);
>> >
>> > =A0 =A0 =A0 =A0 =A0 =A0String[] queryStrings =3D new String[] { =A0"00=
000341",
>> > =A0 =A0 =A0 =A0 =A0 =A0"9346868468" };
>> > =A0 =A0 =A0 =A0 =A0 =A0TopDocs results =3D null;
>> > =A0 =A0 =A0 =A0 =A0 =A0for (String queryString : queryStrings) {
>> > =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0System.out.println("searching for: " + =
queryString);
>> > =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0Query query1;
>> > =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0try {
>> > =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0query1 =3D parser.parse(querySt=
ring);
>> > =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0try {
>> > =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0results =3D searcher.se=
arch(query1,10);
>> > =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0} catch (IOException e) {
>> > =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0e.printStackTrace();
>> > =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}
>> > =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0} catch (ParseException e)
>> > =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0e.printStackTrace();
>> > =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}
>> >
>> > =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0System.out.println("total hits: " + res=
ults.totalHits);
>> > =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0ScoreDoc[] hits =3D results.scoreDocs;
>> > =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0Document doc =3D null;
>> > =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0for (ScoreDoc hit : hits)
>> > =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0{
>> >
>> > =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0try {
>> > =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0doc =3D searcher.doc(hi=
t.doc);
>> > =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0} catch (CorruptIndexException =
e) {
>> > =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0e.printStackTrace();
>> > =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0} catch (IOException e) {
>> > =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0e.printStackTrace();
>> > =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}
>> > =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0System.out.printf("%5.3f %sn", =
hit.score,
>> > doc.get("DocId"));
>> > =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}
>> >
>> >
>> >
>> > On Wed, Jun 8, 2011 at 11:47 AM, Pranav goyal <
>> pranavgoyal40341@gmail.com>wrote:
>> >
>> >> Thanks Anshum
>> >>
>> >>
>> >> On Wed, Jun 8, 2011 at 11:40 AM, Anshum <anshumg@gmail.com> wrote:
>> >>
>> >>> Hi Pranav,
>> >>> The result would be a list of document ids, which can be used to
>> retrieve
>> >>> the document (Using an indexreader). Once you have the document, you
>> could
>> >>> fetch 'ANY' of the 'STORED' fields from the index for your purpose.
>> >>> Directly, you'd not receive either the key field or any other field
>> from
>> >>> the
>> >>> 'search' method.
>> >>> Also, I'd suggest you to grab a copy of Lucene in Action 2nd Edition=
 as
>> >>> it'd
>> >>> help you a lot in understanding the way Lucene works/is used.
>> >>>
>> >>> --
>> >>> Anshum Gupta
>> >>> http://ai-cafe.blogspot.com
>> >>>
>> >>>
>> >>> On Wed, Jun 8, 2011 at 11:00 AM, Pranav goyal <
>> pranavgoyal40341@gmail.com
>> >>> >wrote:
>> >>>
>> >>> > Hi all,
>> >>> >
>> >>> > I am getting confused in this thing,
>> >>> >
>> >>> > Let say I make a lucene index using a document having a key field
>> (which
>> >>> I
>> >>> > am storing as well as indexing)
>> >>> > and rest of my fields I am just indexing.
>> >>> >
>> >>> > When I make some query what would be my result?
>> >>> > Will it be the field which I am storing or it can be anything?
>> >>> >
>> >>>
>> >>
>> >>
>> >>
>> >> --
>> >> I'm very responsible, when ever something goes wrong they always say =
I'm
>> >> responsible --
>> >>
>> >
>> >
>> >
>> > --
>> > I'm very responsible, when ever something goes wrong they always say I=
'm
>> > responsible --
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> --
> I'm very responsible, when ever something goes wrong they always say I'm
> responsible --
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49933-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun  8 13:28:17 2011
Return-Path: <java-user-return-49933-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 531114C30
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  8 Jun 2011 13:28:17 +0000 (UTC)
Received: (qmail 75388 invoked by uid 500); 8 Jun 2011 13:28:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75309 invoked by uid 500); 8 Jun 2011 13:28:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75152 invoked by uid 99); 8 Jun 2011 13:28:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Jun 2011 13:28:12 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Jun 2011 13:28:06 +0000
Received: by mail-iw0-f176.google.com with SMTP id 19so599382iwr.35
        for <java-user@lucene.apache.org>; Wed, 08 Jun 2011 06:27:46 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=jOkn/XXFSFTHLRNAnU1Kx57x7Fqq33cp/fAWFHTemx4=;
        b=AtsfeeIarpolUDJT4IFo01yv+R8n/q2Dmoc9jmcTcXCTsdE3oobN38g3qVobOUbRuT
         CP5snQBKNMIyanPNMHhNxSQ+J8zaxhdLfRM2pRMtfhFbdcy2qRRnKYTxXqd5M0j8Qh+3
         ppB8yZo9Dx7Ub4r93YFkmCoEJRjwOeeR0IJ9o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=rEt1bxKyASMAy+vwd2/d3Z+ddDNHggboCPmzHbLNCqUvjgBPQj6Es4UWcItJqjjfaK
         5uj7nrRLdM35/YU0JCMHmSJg757n70F3AN80yc7spHDqyx67wXNOiHLlK0bTgQyOkEhi
         K2GbDwv2gTZFHUJLOBFF4SuRYQlbqp3Tmo8Mk=
Received: by 10.231.25.94 with SMTP id y30mr11818854ibb.61.1307539666084; Wed,
 08 Jun 2011 06:27:46 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.199.148 with HTTP; Wed, 8 Jun 2011 06:27:26 -0700 (PDT)
In-Reply-To: <1307523177.3408.14.camel@elmer-P35-DS3P>
References: <1307523177.3408.14.camel@elmer-P35-DS3P>
From: Ian Lea <ian.lea@gmail.com>
Date: Wed, 8 Jun 2011 14:27:26 +0100
Message-ID: <BANLkTimzPB6LCLjEQfVv9cb46O2siq2e_g@mail.gmail.com>
Subject: Re: MultiFieldQueryParser with default AND and stopfilter
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

I guess the base problem is that MFQP only accepts one analyzer.
Presumably you are using different analyzers for your title and desc
fields, and it might do what you wanted if you could pass in a list of
analyzers along with a list of fields.  Sounds like something that
might not be too hard to code, although there may be complications and
catches that I haven't thought of.

You can pass an analyzer to the parse() methods therefore could
perhaps have something like

BooleanQuery bq = new BooleanQuery();
MultiFieldQueryParser mfqp = new ...(...);
Query q1 = mfqp.parse(... title-type-fields[], ..., title-type-analyzer);
Query q2 = mfqp.parse(... desc-type-fields[], ..., desc-type-analyzer);
bq.add(q1);
bq.add(q2);

Failing that, I think you'd have to do it the hard way, building up
the query in code.  Generally not that difficult.


--
Ian.


On Wed, Jun 8, 2011 at 9:52 AM, Elmer <evanchastelet@gmail.com> wrote:
> Hi,
>
> I have a use case in which I use the MultiFieldQueryParser (MFQP) on
> some fields that use and some fields that don't use a stopfilter. The
> default operator of the MFQP is set to AND.
> For example, if the search query is 'the project' (with 'the' included
> in the stoplist) and the search fields are:
>
> title - not using a stopfilter,
> desc - using a stopfilter,
>
> the parsed query becomes:
>
> '+(title:the) +(title:project desc:project)'.
>
> So, the problem is that docs that have the term 'the' only appearing in
> their desc field are excluded from the results. So every query, with AND
> as default operator, that has a stop word in it that only appears in
> fields that use a stop filter will have this problem (or similar, if
> there is at least one field X not using a stopfilter -> no match if a
> stopword from query doesn't appear in field X). Thus, in this example, a
> document with title: 'Lucene project' and desc: 'the open source search
> software from Apache' will not be matched. In my opinion this is not the
> expected behavior. What I'd like to see is that this doc is matched by
> the given query. So, for each token in the query, that appears to be a
> stopword in a field (i.e. some filter filters the token out), I want it
> to be matched instead of not.
>
> Anyone who knows a way to deal with this? I would prefer to keep using
> the MFQP, since I need to support multiple fields, querytime boosting
> and lucene syntax. Or is there a disadvantage by doing this?
>
> Thanks in advance.
>
> BR,
> Elmer van Chastelet
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49934-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun  8 13:38:33 2011
Return-Path: <java-user-return-49934-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D866F4495
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  8 Jun 2011 13:38:33 +0000 (UTC)
Received: (qmail 95944 invoked by uid 500); 8 Jun 2011 13:38:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95891 invoked by uid 500); 8 Jun 2011 13:38:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95883 invoked by uid 99); 8 Jun 2011 13:38:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Jun 2011 13:38:31 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Jun 2011 13:38:25 +0000
Received: by qwj9 with SMTP id 9so296661qwj.35
        for <java-user@lucene.apache.org>; Wed, 08 Jun 2011 06:38:04 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=CN1h4LSSHqa2j8b1Zyt/45p9y9aHinCwSPrYSmtJy7M=;
        b=B0X9Xk1/gURQOR92V5iLL/b6B3qw39jctr4DGaxIqIDY+30TZ6NoUt79oCkSWrgUkk
         5HvKRm8o2ZU21zauZOKcGHO8t05M0lbkkEcwc6DstzxiRDTZQPuKDZNnTrnFa0jjOWhO
         GMoUoKWM2NZNuhuxvZmA90DQQf06ZriNk0XQI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=G606CLixCniC6GJHWiOzAOeETUknHK1UUJj4sCTsKLHX5hWJNGzBSFrgYdgGAfgnzK
         qO4oh1AnH35+dMPUzr6z+eTYrAXW4w38PcRUaIUdndppTZnWCBCL2DfFYTqG63lQLbaV
         c0EXUKuH4D5KB32kPGLyw3GFLOP4pRl58SmpY=
MIME-Version: 1.0
Received: by 10.229.22.4 with SMTP id l4mr5326301qcb.298.1307540284299; Wed,
 08 Jun 2011 06:38:04 -0700 (PDT)
Received: by 10.229.239.13 with HTTP; Wed, 8 Jun 2011 06:38:04 -0700 (PDT)
In-Reply-To: <1307523177.3408.14.camel@elmer-P35-DS3P>
References: <1307523177.3408.14.camel@elmer-P35-DS3P>
Date: Wed, 8 Jun 2011 09:38:04 -0400
Message-ID: <BANLkTinx9YFUSkAQXPxWB-VqCLscfGAR+g@mail.gmail.com>
Subject: Re: MultiFieldQueryParser with default AND and stopfilter
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

Could you just construct a BooleanQuery with the
terms against different fields instead of using MFQP?
e.g.

bq.add(qp.parse("title:(the AND project)", SHOULD))
bq.add(qp.parse("desc:(the AND project)", SHOULD))

etc...? If your QueryParser was created with a
PerFieldAnalyzerWrapper I think you might get what you
want....

Note, bad pseudo code there...

Best
Erick

On Wed, Jun 8, 2011 at 4:52 AM, Elmer <evanchastelet@gmail.com> wrote:
> Hi,
>
> I have a use case in which I use the MultiFieldQueryParser (MFQP) on
> some fields that use and some fields that don't use a stopfilter. The
> default operator of the MFQP is set to AND.
> For example, if the search query is 'the project' (with 'the' included
> in the stoplist) and the search fields are:
>
> title - not using a stopfilter,
> desc - using a stopfilter,
>
> the parsed query becomes:
>
> '+(title:the) +(title:project desc:project)'.
>
> So, the problem is that docs that have the term 'the' only appearing in
> their desc field are excluded from the results. So every query, with AND
> as default operator, that has a stop word in it that only appears in
> fields that use a stop filter will have this problem (or similar, if
> there is at least one field X not using a stopfilter -> no match if a
> stopword from query doesn't appear in field X). Thus, in this example, a
> document with title: 'Lucene project' and desc: 'the open source search
> software from Apache' will not be matched. In my opinion this is not the
> expected behavior. What I'd like to see is that this doc is matched by
> the given query. So, for each token in the query, that appears to be a
> stopword in a field (i.e. some filter filters the token out), I want it
> to be matched instead of not.
>
> Anyone who knows a way to deal with this? I would prefer to keep using
> the MFQP, since I need to support multiple fields, querytime boosting
> and lucene syntax. Or is there a disadvantage by doing this?
>
> Thanks in advance.
>
> BR,
> Elmer van Chastelet
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49935-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun  8 13:43:15 2011
Return-Path: <java-user-return-49935-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B161E466F
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  8 Jun 2011 13:43:15 +0000 (UTC)
Received: (qmail 8344 invoked by uid 500); 8 Jun 2011 13:43:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8296 invoked by uid 500); 8 Jun 2011 13:43:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8276 invoked by uid 99); 8 Jun 2011 13:43:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Jun 2011 13:43:13 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.210.176 as permitted sender)
Received: from [209.85.210.176] (HELO mail-iy0-f176.google.com) (209.85.210.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Jun 2011 13:43:06 +0000
Received: by iym1 with SMTP id 1so619035iym.35
        for <java-user@lucene.apache.org>; Wed, 08 Jun 2011 06:42:46 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=witGqsFA4qc8C8kfm2pbPAlDhbVT6NzkcAlEmFvtoDA=;
        b=i0MwsqC/pt5zp4XC/u89t9RLTuBvCxEi/SFHbYrQSVy7a39b7ImridmZjUinE9DsJd
         G/Z85rmhaLngV9EV7cYhK6z8mPhoYLC99WpdICLgXAyl3K2FWYvgWwKch/MYctDKjVi1
         T9ojLtYE/rPGUq8Wggf6ML/bXM3ugYIj4jLMU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=XfLSgLMHzL3j3vrA1mCmTP+N1iblvCNnrHi7DTmZkJqYBCXnoNsVB4GLMH2qYIpO0v
         xeWVaCpk9pupJ3wd+wOiYPiNDgPnGDryPNFYtCBPt82qAl1GaP2jrOegt7DwFLEeYG6G
         mdhXjSXJpj4eIDzlmmlISEREnPlJoQvOu8pKM=
Received: by 10.231.25.94 with SMTP id y30mr11834909ibb.61.1307540566086; Wed,
 08 Jun 2011 06:42:46 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.199.148 with HTTP; Wed, 8 Jun 2011 06:42:26 -0700 (PDT)
In-Reply-To: <BANLkTinx9YFUSkAQXPxWB-VqCLscfGAR+g@mail.gmail.com>
References: <1307523177.3408.14.camel@elmer-P35-DS3P> <BANLkTinx9YFUSkAQXPxWB-VqCLscfGAR+g@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Wed, 8 Jun 2011 14:42:26 +0100
Message-ID: <BANLkTikT5E4gLAcPdC+frVDE4qYY5qwQ9w@mail.gmail.com>
Subject: Re: MultiFieldQueryParser with default AND and stopfilter
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

Except that I think he has loads of other fields and wants to keep it simple.

But how about passing a PerFieldAnalyzerWrapper instance as the
analyzer to MFQP?  Worth a try.


--
Ian.


On Wed, Jun 8, 2011 at 2:38 PM, Erick Erickson <erickerickson@gmail.com> wrote:
> Could you just construct a BooleanQuery with the
> terms against different fields instead of using MFQP?
> e.g.
>
> bq.add(qp.parse("title:(the AND project)", SHOULD))
> bq.add(qp.parse("desc:(the AND project)", SHOULD))
>
> etc...? If your QueryParser was created with a
> PerFieldAnalyzerWrapper I think you might get what you
> want....
>
> Note, bad pseudo code there...
>
> Best
> Erick
>
> On Wed, Jun 8, 2011 at 4:52 AM, Elmer <evanchastelet@gmail.com> wrote:
>> Hi,
>>
>> I have a use case in which I use the MultiFieldQueryParser (MFQP) on
>> some fields that use and some fields that don't use a stopfilter. The
>> default operator of the MFQP is set to AND.
>> For example, if the search query is 'the project' (with 'the' included
>> in the stoplist) and the search fields are:
>>
>> title - not using a stopfilter,
>> desc - using a stopfilter,
>>
>> the parsed query becomes:
>>
>> '+(title:the) +(title:project desc:project)'.
>>
>> So, the problem is that docs that have the term 'the' only appearing in
>> their desc field are excluded from the results. So every query, with AND
>> as default operator, that has a stop word in it that only appears in
>> fields that use a stop filter will have this problem (or similar, if
>> there is at least one field X not using a stopfilter -> no match if a
>> stopword from query doesn't appear in field X). Thus, in this example, a
>> document with title: 'Lucene project' and desc: 'the open source search
>> software from Apache' will not be matched. In my opinion this is not the
>> expected behavior. What I'd like to see is that this doc is matched by
>> the given query. So, for each token in the query, that appears to be a
>> stopword in a field (i.e. some filter filters the token out), I want it
>> to be matched instead of not.
>>
>> Anyone who knows a way to deal with this? I would prefer to keep using
>> the MFQP, since I need to support multiple fields, querytime boosting
>> and lucene syntax. Or is there a disadvantage by doing this?
>>
>> Thanks in advance.
>>
>> BR,
>> Elmer van Chastelet
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49936-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun  8 14:23:06 2011
Return-Path: <java-user-return-49936-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 724D149BE
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  8 Jun 2011 14:23:06 +0000 (UTC)
Received: (qmail 93867 invoked by uid 500); 8 Jun 2011 14:23:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93818 invoked by uid 500); 8 Jun 2011 14:23:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93810 invoked by uid 99); 8 Jun 2011 14:23:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Jun 2011 14:23:04 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Jun 2011 14:22:56 +0000
Received: by qwj9 with SMTP id 9so328746qwj.35
        for <java-user@lucene.apache.org>; Wed, 08 Jun 2011 07:22:35 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type:content-transfer-encoding;
        bh=RHtz81vgE3OMhII+qGMiY//44IwRCdV8mpGFIvjbew8=;
        b=gM0JXMO7qUzb5vE23Y3mE3chN4H72gwNF5A/DRZj1tABzMMbmUQwXVU+I6sOfN5a5b
         6Ext31Qlpv06ogMereD73Gl50YgV9GX91+wv3HMGVCi7ASwaD/cBBImHdRlMMawySRFE
         NRXjZhGyCr6rMtaorXOBI4xr+qao2t4xl2+8I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=maGqUh1hQpOveB+mqMQHfP/8Y06AGFinvw/keIaw21w6yjiLz6TIstYwJdli4V8bl8
         qRSS1ufNC8LqrBE1k2x6qLHL2viCKZ6v8ZSFUMbi70RnKi8MIUkD3yRFNtZajOQ2e2kG
         /WqdgIe4JpMp7ILS6xztk1O4kpapq7eutpFV8=
MIME-Version: 1.0
Received: by 10.229.22.4 with SMTP id l4mr5370494qcb.298.1307542955279; Wed,
 08 Jun 2011 07:22:35 -0700 (PDT)
Received: by 10.229.239.13 with HTTP; Wed, 8 Jun 2011 07:22:35 -0700 (PDT)
In-Reply-To: <BANLkTikT5E4gLAcPdC+frVDE4qYY5qwQ9w@mail.gmail.com>
References: <1307523177.3408.14.camel@elmer-P35-DS3P>
	<BANLkTinx9YFUSkAQXPxWB-VqCLscfGAR+g@mail.gmail.com>
	<BANLkTikT5E4gLAcPdC+frVDE4qYY5qwQ9w@mail.gmail.com>
Date: Wed, 8 Jun 2011 10:22:35 -0400
Message-ID: <BANLkTinJzBgSdZUrfjuP=d8FWg-HojWB7Q@mail.gmail.com>
Subject: Re: MultiFieldQueryParser with default AND and stopfilter
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

You're right, that's a better place to start....

Erick

On Wed, Jun 8, 2011 at 9:42 AM, Ian Lea <ian.lea@gmail.com> wrote:
> Except that I think he has loads of other fields and wants to keep it sim=
ple.
>
> But how about passing a PerFieldAnalyzerWrapper instance as the
> analyzer to MFQP? =A0Worth a try.
>
>
> --
> Ian.
>
>
> On Wed, Jun 8, 2011 at 2:38 PM, Erick Erickson <erickerickson@gmail.com> =
wrote:
>> Could you just construct a BooleanQuery with the
>> terms against different fields instead of using MFQP?
>> e.g.
>>
>> bq.add(qp.parse("title:(the AND project)", SHOULD))
>> bq.add(qp.parse("desc:(the AND project)", SHOULD))
>>
>> etc...? If your QueryParser was created with a
>> PerFieldAnalyzerWrapper I think you might get what you
>> want....
>>
>> Note, bad pseudo code there...
>>
>> Best
>> Erick
>>
>> On Wed, Jun 8, 2011 at 4:52 AM, Elmer <evanchastelet@gmail.com> wrote:
>>> Hi,
>>>
>>> I have a use case in which I use the MultiFieldQueryParser (MFQP) on
>>> some fields that use and some fields that don't use a stopfilter. The
>>> default operator of the MFQP is set to AND.
>>> For example, if the search query is 'the project' (with 'the' included
>>> in the stoplist) and the search fields are:
>>>
>>> title - not using a stopfilter,
>>> desc - using a stopfilter,
>>>
>>> the parsed query becomes:
>>>
>>> '+(title:the) +(title:project desc:project)'.
>>>
>>> So, the problem is that docs that have the term 'the' only appearing in
>>> their desc field are excluded from the results. So every query, with AN=
D
>>> as default operator, that has a stop word in it that only appears in
>>> fields that use a stop filter will have this problem (or similar, if
>>> there is at least one field X not using a stopfilter -> no match if a
>>> stopword from query doesn't appear in field X). Thus, in this example, =
a
>>> document with title: 'Lucene project' and desc: 'the open source search
>>> software from Apache' will not be matched. In my opinion this is not th=
e
>>> expected behavior. What I'd like to see is that this doc is matched by
>>> the given query. So, for each token in the query, that appears to be a
>>> stopword in a field (i.e. some filter filters the token out), I want it
>>> to be matched instead of not.
>>>
>>> Anyone who knows a way to deal with this? I would prefer to keep using
>>> the MFQP, since I need to support multiple fields, querytime boosting
>>> and lucene syntax. Or is there a disadvantage by doing this?
>>>
>>> Thanks in advance.
>>>
>>> BR,
>>> Elmer van Chastelet
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49937-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun  8 14:36:23 2011
Return-Path: <java-user-return-49937-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4863E43DF
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  8 Jun 2011 14:36:23 +0000 (UTC)
Received: (qmail 25346 invoked by uid 500); 8 Jun 2011 14:36:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25300 invoked by uid 500); 8 Jun 2011 14:36:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25291 invoked by uid 99); 8 Jun 2011 14:36:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Jun 2011 14:36:21 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of evanchastelet@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Jun 2011 14:36:13 +0000
Received: by fxm7 with SMTP id 7so542307fxm.35
        for <java-user@lucene.apache.org>; Wed, 08 Jun 2011 07:35:52 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:subject:from:to:in-reply-to:references
         :content-type:date:message-id:mime-version:x-mailer
         :content-transfer-encoding;
        bh=eiPvzpaYHJBvQCkl23V/dV6WcKpQxlbGpdBQbyYJ9S4=;
        b=Bp50+tnCxd5caUdUCZnYSRa7ywbpglpcrPK1QeovwSWn5TJgFenDuTuVp+Uk/ysMkz
         VDrvKx02qei0HuZMLMgaIzggpA6ZV5NKpFYyd5dj/5KWv2fcExl84HbR3JZMS/6DU1n1
         Fx+vXBscc0dIF54F7mVm+EHOL3zdOtQhPx/7c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=subject:from:to:in-reply-to:references:content-type:date:message-id
         :mime-version:x-mailer:content-transfer-encoding;
        b=FwvV38XlGD0AHgoF2mKGr1ewbWWwZfZ1ISDDiwixa2tJZ0eA+3VkAlX/0aen2MDKTd
         IMSvR4uQHqR4FkYK7L9B5yj2YXfffpZToAPWg1+Qdk0JBXkvHf3qRgdK6LPn3TgxDgnY
         u5it0KWxpqQ6dUTI8iRUgd3jfyNuVJnFsu3Ug=
Received: by 10.223.127.213 with SMTP id h21mr789520fas.45.1307543752086;
        Wed, 08 Jun 2011 07:35:52 -0700 (PDT)
Received: from [192.168.2.132] (g214168.upc-g.chello.nl [80.57.214.168])
        by mx.google.com with ESMTPS id r10sm260914fah.2.2011.06.08.07.35.50
        (version=SSLv3 cipher=OTHER);
        Wed, 08 Jun 2011 07:35:51 -0700 (PDT)
Subject: Re: MultiFieldQueryParser with default AND and stopfilter
From: Elmer <evanchastelet@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <BANLkTikT5E4gLAcPdC+frVDE4qYY5qwQ9w@mail.gmail.com>
References: <1307523177.3408.14.camel@elmer-P35-DS3P>
	 <BANLkTinx9YFUSkAQXPxWB-VqCLscfGAR+g@mail.gmail.com>
	 <BANLkTikT5E4gLAcPdC+frVDE4qYY5qwQ9w@mail.gmail.com>
Content-Type: text/plain; charset="UTF-8"
Date: Wed, 08 Jun 2011 16:35:49 +0200
Message-ID: <1307543749.15928.20.camel@elmer-P35-DS3P>
Mime-Version: 1.0
X-Mailer: Evolution 2.32.2 
Content-Transfer-Encoding: 7bit

Thank you,

I already use the PerFieldAnalyzerWrapper (by Hibernate Search) ;)
And that's where the problem comes in: different fields using different
analyzers (some with, some without a stopfilter). For each term
(tokenized by MFQP itself?), it applies the given analyzer on each
field. If the analyzer returns no token (occurs on 'the' when using the
PerFieldAnalyzerWrapper for the desc field), that field will not be
included in the clause for that term. (see/re-read the example, maybe
it's more clear what I mean now).

Unfortunately, the solution that Erick gave won't do the trick
> > bq.add(qp.parse("title:(the AND project)", SHOULD))
> > bq.add(qp.parse("desc:(the AND project)", SHOULD))
This still won't match documents where both 'the' and 'project' appear
in DIFFERENT fields (i.e. a document with title: 'Lucene project' and
desc: 'the open source search software from Apache')

I hope it's clear what I mean :) Otherwise, let me know!

BR,
Elmer



On Wed, 2011-06-08 at 14:42 +0100, Ian Lea wrote:
> Except that I think he has loads of other fields and wants to keep it simple.
> 
> But how about passing a PerFieldAnalyzerWrapper instance as the
> analyzer to MFQP?  Worth a try.
> 
> 
> --
> Ian.
> 
> 
> On Wed, Jun 8, 2011 at 2:38 PM, Erick Erickson <erickerickson@gmail.com> wrote:
> > Could you just construct a BooleanQuery with the
> > terms against different fields instead of using MFQP?
> > e.g.
> >
> > bq.add(qp.parse("title:(the AND project)", SHOULD))
> > bq.add(qp.parse("desc:(the AND project)", SHOULD))
> >
> > etc...? If your QueryParser was created with a
> > PerFieldAnalyzerWrapper I think you might get what you
> > want....
> >
> > Note, bad pseudo code there...
> >
> > Best
> > Erick
> >
> > On Wed, Jun 8, 2011 at 4:52 AM, Elmer <evanchastelet@gmail.com> wrote:
> >> Hi,
> >>
> >> I have a use case in which I use the MultiFieldQueryParser (MFQP) on
> >> some fields that use and some fields that don't use a stopfilter. The
> >> default operator of the MFQP is set to AND.
> >> For example, if the search query is 'the project' (with 'the' included
> >> in the stoplist) and the search fields are:
> >>
> >> title - not using a stopfilter,
> >> desc - using a stopfilter,
> >>
> >> the parsed query becomes:
> >>
> >> '+(title:the) +(title:project desc:project)'.
> >>
> >> So, the problem is that docs that have the term 'the' only appearing in
> >> their desc field are excluded from the results. So every query, with AND
> >> as default operator, that has a stop word in it that only appears in
> >> fields that use a stop filter will have this problem (or similar, if
> >> there is at least one field X not using a stopfilter -> no match if a
> >> stopword from query doesn't appear in field X). Thus, in this example, a
> >> document with title: 'Lucene project' and desc: 'the open source search
> >> software from Apache' will not be matched. In my opinion this is not the
> >> expected behavior. What I'd like to see is that this doc is matched by
> >> the given query. So, for each token in the query, that appears to be a
> >> stopword in a field (i.e. some filter filters the token out), I want it
> >> to be matched instead of not.
> >>
> >> Anyone who knows a way to deal with this? I would prefer to keep using
> >> the MFQP, since I need to support multiple fields, querytime boosting
> >> and lucene syntax. Or is there a disadvantage by doing this?
> >>
> >> Thanks in advance.
> >>
> >> BR,
> >> Elmer van Chastelet
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49938-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun  8 15:01:41 2011
Return-Path: <java-user-return-49938-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4BAB54360
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  8 Jun 2011 15:01:41 +0000 (UTC)
Received: (qmail 80736 invoked by uid 500); 8 Jun 2011 15:01:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80685 invoked by uid 500); 8 Jun 2011 15:01:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80677 invoked by uid 99); 8 Jun 2011 15:01:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Jun 2011 15:01:39 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of evanchastelet@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Jun 2011 15:01:31 +0000
Received: by fxm7 with SMTP id 7so577766fxm.35
        for <java-user@lucene.apache.org>; Wed, 08 Jun 2011 08:01:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:subject:from:to:in-reply-to:references
         :content-type:date:message-id:mime-version:x-mailer
         :content-transfer-encoding;
        bh=UcHLtEx+2BUmlWmWiEVcsFH6sRODhVvO2Z0J9ziPby0=;
        b=Ktku3IP3OEV2LJVCtk1sV5lW+Y+5ptd3ZWZkiVgn+6eAF7otLgKMfOZOeUMv693qbv
         LaCal1w3LrRCNNP2mnKansa6+k6ndvT09/23FySM4zekEqIwu2CZxFDXVjQSW/2ZfSMK
         HcmmnWoTNFMImTnhkiDYDawhgL6xcYZhlpoyc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=subject:from:to:in-reply-to:references:content-type:date:message-id
         :mime-version:x-mailer:content-transfer-encoding;
        b=BmpSbMeaC42YBAQY2Z4Q+Ssd1aDV9lkFbPWx9eTkmzNYYE+RFAvWzUf1lc8yrPf8+k
         eKjsQlFxvumA8Puk5w9RgvjLxcImSSe9+TdhjaZSmNieyOgF6bLLgpP8jn2mmiwwcIJG
         K/QOpSCpO58ZOzEMgx596YltbwdHcfVuzY8S4=
Received: by 10.223.27.18 with SMTP id g18mr153519fac.52.1307545269737;
        Wed, 08 Jun 2011 08:01:09 -0700 (PDT)
Received: from [192.168.2.132] (g214168.upc-g.chello.nl [80.57.214.168])
        by mx.google.com with ESMTPS id y14sm272664fah.13.2011.06.08.08.01.07
        (version=SSLv3 cipher=OTHER);
        Wed, 08 Jun 2011 08:01:08 -0700 (PDT)
Subject: Re: MultiFieldQueryParser with default AND and stopfilter
From: Elmer <evanchastelet@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <1307543749.15928.20.camel@elmer-P35-DS3P>
References: <1307523177.3408.14.camel@elmer-P35-DS3P>
	 <BANLkTinx9YFUSkAQXPxWB-VqCLscfGAR+g@mail.gmail.com>
	 <BANLkTikT5E4gLAcPdC+frVDE4qYY5qwQ9w@mail.gmail.com>
	 <1307543749.15928.20.camel@elmer-P35-DS3P>
Content-Type: text/plain; charset="UTF-8"
Date: Wed, 08 Jun 2011 17:01:06 +0200
Message-ID: <1307545266.15928.23.camel@elmer-P35-DS3P>
Mime-Version: 1.0
X-Mailer: Evolution 2.32.2 
Content-Transfer-Encoding: 7bit

Sorry, I made a mistake here:

> Unfortunately, the solution that Erick gave won't do the trick
> > > bq.add(qp.parse("title:(the AND project)", SHOULD))
> > > bq.add(qp.parse("desc:(the AND project)", SHOULD))
> This still won't match documents where both 'the' and 'project' appear
> in DIFFERENT fields (i.e. a document with title: 'Lucene project' and
> desc: 'the open source search software from Apache')

Correction: this will actually match the example query ('the project'),
but this solution won't work if the search query is changed to: 'the
search project', since 'search' is not in the title field.

Br,
Elmer


On Wed, 2011-06-08 at 16:35 +0200, Elmer wrote:
> Thank you,
> 
> I already use the PerFieldAnalyzerWrapper (by Hibernate Search) ;)
> And that's where the problem comes in: different fields using different
> analyzers (some with, some without a stopfilter). For each term
> (tokenized by MFQP itself?), it applies the given analyzer on each
> field. If the analyzer returns no token (occurs on 'the' when using the
> PerFieldAnalyzerWrapper for the desc field), that field will not be
> included in the clause for that term. (see/re-read the example, maybe
> it's more clear what I mean now).
> 
> Unfortunately, the solution that Erick gave won't do the trick
> > > bq.add(qp.parse("title:(the AND project)", SHOULD))
> > > bq.add(qp.parse("desc:(the AND project)", SHOULD))
> This still won't match documents where both 'the' and 'project' appear
> in DIFFERENT fields (i.e. a document with title: 'Lucene project' and
> desc: 'the open source search software from Apache')
> 
> I hope it's clear what I mean :) Otherwise, let me know!
> 
> BR,
> Elmer
> 
> 
> 
> On Wed, 2011-06-08 at 14:42 +0100, Ian Lea wrote:
> > Except that I think he has loads of other fields and wants to keep it simple.
> > 
> > But how about passing a PerFieldAnalyzerWrapper instance as the
> > analyzer to MFQP?  Worth a try.
> > 
> > 
> > --
> > Ian.
> > 
> > 
> > On Wed, Jun 8, 2011 at 2:38 PM, Erick Erickson <erickerickson@gmail.com> wrote:
> > > Could you just construct a BooleanQuery with the
> > > terms against different fields instead of using MFQP?
> > > e.g.
> > >
> > > bq.add(qp.parse("title:(the AND project)", SHOULD))
> > > bq.add(qp.parse("desc:(the AND project)", SHOULD))
> > >
> > > etc...? If your QueryParser was created with a
> > > PerFieldAnalyzerWrapper I think you might get what you
> > > want....
> > >
> > > Note, bad pseudo code there...
> > >
> > > Best
> > > Erick
> > >
> > > On Wed, Jun 8, 2011 at 4:52 AM, Elmer <evanchastelet@gmail.com> wrote:
> > >> Hi,
> > >>
> > >> I have a use case in which I use the MultiFieldQueryParser (MFQP) on
> > >> some fields that use and some fields that don't use a stopfilter. The
> > >> default operator of the MFQP is set to AND.
> > >> For example, if the search query is 'the project' (with 'the' included
> > >> in the stoplist) and the search fields are:
> > >>
> > >> title - not using a stopfilter,
> > >> desc - using a stopfilter,
> > >>
> > >> the parsed query becomes:
> > >>
> > >> '+(title:the) +(title:project desc:project)'.
> > >>
> > >> So, the problem is that docs that have the term 'the' only appearing in
> > >> their desc field are excluded from the results. So every query, with AND
> > >> as default operator, that has a stop word in it that only appears in
> > >> fields that use a stop filter will have this problem (or similar, if
> > >> there is at least one field X not using a stopfilter -> no match if a
> > >> stopword from query doesn't appear in field X). Thus, in this example, a
> > >> document with title: 'Lucene project' and desc: 'the open source search
> > >> software from Apache' will not be matched. In my opinion this is not the
> > >> expected behavior. What I'd like to see is that this doc is matched by
> > >> the given query. So, for each token in the query, that appears to be a
> > >> stopword in a field (i.e. some filter filters the token out), I want it
> > >> to be matched instead of not.
> > >>
> > >> Anyone who knows a way to deal with this? I would prefer to keep using
> > >> the MFQP, since I need to support multiple fields, querytime boosting
> > >> and lucene syntax. Or is there a disadvantage by doing this?
> > >>
> > >> Thanks in advance.
> > >>
> > >> BR,
> > >> Elmer van Chastelet
> > >>
> > >>
> > >> ---------------------------------------------------------------------
> > >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >> For additional commands, e-mail: java-user-help@lucene.apache.org
> > >>
> > >>
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> > 
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> > 
> 
> 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49939-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun  8 15:19:56 2011
Return-Path: <java-user-return-49939-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A42C24055
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  8 Jun 2011 15:19:56 +0000 (UTC)
Received: (qmail 48491 invoked by uid 500); 8 Jun 2011 15:19:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48450 invoked by uid 500); 8 Jun 2011 15:19:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48442 invoked by uid 99); 8 Jun 2011 15:19:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Jun 2011 15:19:54 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Jun 2011 15:19:46 +0000
Received: by iwr19 with SMTP id 19so748364iwr.35
        for <java-user@lucene.apache.org>; Wed, 08 Jun 2011 08:19:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=tV1sjMmU5K+r94QzePrmMIJyvNp0urv3TzLP7Cn0V1o=;
        b=DjPg/R+nr4AO32py6ZtRRZ0rDktoN+RYQ+QEOl+jQ1EzcUvBS8LIqqznZGPXbeA/C6
         SwwcBKhHWBgoSuCiu7XIYs3DRBBgcuyD9c4cl2dH5CIPl32aA2TmsBdtZbRUD2LxD4NX
         EWLiT6U8RaxPDOtnczVC8yXbC1OCw+LPKgQwA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=GnsWbhJYbI8krkicqoam6JCyQknUkDQsXWVDg/+q9LZjQzRTEDUzKAtnAluG9tdpwP
         cC4Le3GZgwx6l9ijua/+kHwEJr6MOd86b9morE5FV1zEqkHXMzRiLrbYRYOLdhIiUmDh
         o8K9xbfdlA4tMlEEOMR0NjLLrN/5H6uMKpX7Y=
Received: by 10.231.139.202 with SMTP id f10mr12359375ibu.36.1307546365208;
 Wed, 08 Jun 2011 08:19:25 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.199.148 with HTTP; Wed, 8 Jun 2011 08:19:04 -0700 (PDT)
In-Reply-To: <1307545266.15928.23.camel@elmer-P35-DS3P>
References: <1307523177.3408.14.camel@elmer-P35-DS3P> <BANLkTinx9YFUSkAQXPxWB-VqCLscfGAR+g@mail.gmail.com>
 <BANLkTikT5E4gLAcPdC+frVDE4qYY5qwQ9w@mail.gmail.com> <1307543749.15928.20.camel@elmer-P35-DS3P>
 <1307545266.15928.23.camel@elmer-P35-DS3P>
From: Ian Lea <ian.lea@gmail.com>
Date: Wed, 8 Jun 2011 16:19:04 +0100
Message-ID: <BANLkTi=Q6FH1YwitsQpvQBxZnDn4ZVnddA@mail.gmail.com>
Subject: Re: MultiFieldQueryParser with default AND and stopfilter
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Then surely the stop word issue is a red herring.  Using MFQP with AND
everywhere you'll never get a match if some fields don't contain all
of the search terms.

Even if Erick's exact answer won't apply, I suspect that building up a
composite boolean query is the way to go.


--
Ian.

On Wed, Jun 8, 2011 at 4:01 PM, Elmer <evanchastelet@gmail.com> wrote:
> Sorry, I made a mistake here:
>
>> Unfortunately, the solution that Erick gave won't do the trick
>> > > bq.add(qp.parse("title:(the AND project)", SHOULD))
>> > > bq.add(qp.parse("desc:(the AND project)", SHOULD))
>> This still won't match documents where both 'the' and 'project' appear
>> in DIFFERENT fields (i.e. a document with title: 'Lucene project' and
>> desc: 'the open source search software from Apache')
>
> Correction: this will actually match the example query ('the project'),
> but this solution won't work if the search query is changed to: 'the
> search project', since 'search' is not in the title field.
>
> Br,
> Elmer
>
>
> On Wed, 2011-06-08 at 16:35 +0200, Elmer wrote:
>> Thank you,
>>
>> I already use the PerFieldAnalyzerWrapper (by Hibernate Search) ;)
>> And that's where the problem comes in: different fields using different
>> analyzers (some with, some without a stopfilter). For each term
>> (tokenized by MFQP itself?), it applies the given analyzer on each
>> field. If the analyzer returns no token (occurs on 'the' when using the
>> PerFieldAnalyzerWrapper for the desc field), that field will not be
>> included in the clause for that term. (see/re-read the example, maybe
>> it's more clear what I mean now).
>>
>> Unfortunately, the solution that Erick gave won't do the trick
>> > > bq.add(qp.parse("title:(the AND project)", SHOULD))
>> > > bq.add(qp.parse("desc:(the AND project)", SHOULD))
>> This still won't match documents where both 'the' and 'project' appear
>> in DIFFERENT fields (i.e. a document with title: 'Lucene project' and
>> desc: 'the open source search software from Apache')
>>
>> I hope it's clear what I mean :) Otherwise, let me know!
>>
>> BR,
>> Elmer
>>
>>
>>
>> On Wed, 2011-06-08 at 14:42 +0100, Ian Lea wrote:
>> > Except that I think he has loads of other fields and wants to keep it =
simple.
>> >
>> > But how about passing a PerFieldAnalyzerWrapper instance as the
>> > analyzer to MFQP? =A0Worth a try.
>> >
>> >
>> > --
>> > Ian.
>> >
>> >
>> > On Wed, Jun 8, 2011 at 2:38 PM, Erick Erickson <erickerickson@gmail.co=
m> wrote:
>> > > Could you just construct a BooleanQuery with the
>> > > terms against different fields instead of using MFQP?
>> > > e.g.
>> > >
>> > > bq.add(qp.parse("title:(the AND project)", SHOULD))
>> > > bq.add(qp.parse("desc:(the AND project)", SHOULD))
>> > >
>> > > etc...? If your QueryParser was created with a
>> > > PerFieldAnalyzerWrapper I think you might get what you
>> > > want....
>> > >
>> > > Note, bad pseudo code there...
>> > >
>> > > Best
>> > > Erick
>> > >
>> > > On Wed, Jun 8, 2011 at 4:52 AM, Elmer <evanchastelet@gmail.com> wrot=
e:
>> > >> Hi,
>> > >>
>> > >> I have a use case in which I use the MultiFieldQueryParser (MFQP) o=
n
>> > >> some fields that use and some fields that don't use a stopfilter. T=
he
>> > >> default operator of the MFQP is set to AND.
>> > >> For example, if the search query is 'the project' (with 'the' inclu=
ded
>> > >> in the stoplist) and the search fields are:
>> > >>
>> > >> title - not using a stopfilter,
>> > >> desc - using a stopfilter,
>> > >>
>> > >> the parsed query becomes:
>> > >>
>> > >> '+(title:the) +(title:project desc:project)'.
>> > >>
>> > >> So, the problem is that docs that have the term 'the' only appearin=
g in
>> > >> their desc field are excluded from the results. So every query, wit=
h AND
>> > >> as default operator, that has a stop word in it that only appears i=
n
>> > >> fields that use a stop filter will have this problem (or similar, i=
f
>> > >> there is at least one field X not using a stopfilter -> no match if=
 a
>> > >> stopword from query doesn't appear in field X). Thus, in this examp=
le, a
>> > >> document with title: 'Lucene project' and desc: 'the open source se=
arch
>> > >> software from Apache' will not be matched. In my opinion this is no=
t the
>> > >> expected behavior. What I'd like to see is that this doc is matched=
 by
>> > >> the given query. So, for each token in the query, that appears to b=
e a
>> > >> stopword in a field (i.e. some filter filters the token out), I wan=
t it
>> > >> to be matched instead of not.
>> > >>
>> > >> Anyone who knows a way to deal with this? I would prefer to keep us=
ing
>> > >> the MFQP, since I need to support multiple fields, querytime boosti=
ng
>> > >> and lucene syntax. Or is there a disadvantage by doing this?
>> > >>
>> > >> Thanks in advance.
>> > >>
>> > >> BR,
>> > >> Elmer van Chastelet
>> > >>
>> > >>
>> > >> -------------------------------------------------------------------=
--
>> > >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> > >>
>> > >>
>> > >
>> > > --------------------------------------------------------------------=
-
>> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > > For additional commands, e-mail: java-user-help@lucene.apache.org
>> > >
>> > >
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>>
>>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49940-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun  8 15:33:56 2011
Return-Path: <java-user-return-49940-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E98464C48
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  8 Jun 2011 15:33:55 +0000 (UTC)
Received: (qmail 97456 invoked by uid 500); 8 Jun 2011 15:33:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97408 invoked by uid 500); 8 Jun 2011 15:33:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97400 invoked by uid 99); 8 Jun 2011 15:33:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Jun 2011 15:33:53 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of evanchastelet@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Jun 2011 15:33:44 +0000
Received: by fxm7 with SMTP id 7so625065fxm.35
        for <java-user@lucene.apache.org>; Wed, 08 Jun 2011 08:33:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:subject:from:to:in-reply-to:references
         :content-type:date:message-id:mime-version:x-mailer
         :content-transfer-encoding;
        bh=w7XMpKcg1NB/KBemK2KM+TXGiuojMo4+KBphELkMqTA=;
        b=vZiRNxaNEKLBvUcq81WkZnE+MmiHyoq2SWfuct28jGMoytcVkJ3Pe9Zs8CadQ5DmNc
         b4XJ9fiCcSfJdWk0K19Nu4muaTx43mSojq85AH27Z7iIWjq/mIYm0fqNsCbiwPVcX763
         ZpzuTMCpLvPfdJmNXRInHA2DDXSl9CQhbOq3g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=subject:from:to:in-reply-to:references:content-type:date:message-id
         :mime-version:x-mailer:content-transfer-encoding;
        b=kSlcZqlOFfzwtX2lPMkWtM35Yo7jMyyfNln7INXkJMEAHxb8kAI1+D2GUyj47aITfB
         E4QwFEBChpTXjAHxV7VI5LG1xdMHUbDT4mW1ZLcLC3Cn7kjsWvxQpJLCLLRPAnF2wr26
         SUhkvMj67R9lIuu8VW5ozteIpvOY3cfVFJSPk=
Received: by 10.223.43.145 with SMTP id w17mr2732718fae.12.1307547203842;
        Wed, 08 Jun 2011 08:33:23 -0700 (PDT)
Received: from [192.168.2.132] (g214168.upc-g.chello.nl [80.57.214.168])
        by mx.google.com with ESMTPS id n7sm287796fam.19.2011.06.08.08.33.21
        (version=SSLv3 cipher=OTHER);
        Wed, 08 Jun 2011 08:33:22 -0700 (PDT)
Subject: Re: MultiFieldQueryParser with default AND and stopfilter
From: Elmer <evanchastelet@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <BANLkTi=Q6FH1YwitsQpvQBxZnDn4ZVnddA@mail.gmail.com>
References: <1307523177.3408.14.camel@elmer-P35-DS3P>
	 <BANLkTinx9YFUSkAQXPxWB-VqCLscfGAR+g@mail.gmail.com>
	 <BANLkTikT5E4gLAcPdC+frVDE4qYY5qwQ9w@mail.gmail.com>
	 <1307543749.15928.20.camel@elmer-P35-DS3P>
	 <1307545266.15928.23.camel@elmer-P35-DS3P>
	 <BANLkTi=Q6FH1YwitsQpvQBxZnDn4ZVnddA@mail.gmail.com>
Content-Type: text/plain; charset="UTF-8"
Date: Wed, 08 Jun 2011 17:33:20 +0200
Message-ID: <1307547200.15928.31.camel@elmer-P35-DS3P>
Mime-Version: 1.0
X-Mailer: Evolution 2.32.2 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

> Using MFQP with AND
> everywhere you'll never get a match if some fields don't contain all
> of the search terms"

I'm sorry to say, but that's not true I guess, look how the query parser
parses the following query:
'information retrieval'
--parsed-to-->
+(title:inform description:inform authors.name:information)
+(title:retriev description:retriev authors.name:retrieval)

in human language: both 'information' and 'retrieval' should appear
somewhere, doesn't matter in which fields.

So if 'information' only appears in the title, and 'retrieval' only in
the description, there is a match (and there is, I just tested it ;))

Br,
Elmer


On Wed, 2011-06-08 at 16:19 +0100, Ian Lea wrote:
> Then surely the stop word issue is a red herring.  Using MFQP with AND
> everywhere you'll never get a match if some fields don't contain all
> of the search terms.
> 
> Even if Erick's exact answer won't apply, I suspect that building up a
> composite boolean query is the way to go.
> 
> 
> --
> Ian.
> 
> On Wed, Jun 8, 2011 at 4:01 PM, Elmer <evanchastelet@gmail.com> wrote:
> > Sorry, I made a mistake here:
> >
> >> Unfortunately, the solution that Erick gave won't do the trick
> >> > > bq.add(qp.parse("title:(the AND project)", SHOULD))
> >> > > bq.add(qp.parse("desc:(the AND project)", SHOULD))
> >> This still won't match documents where both 'the' and 'project' appear
> >> in DIFFERENT fields (i.e. a document with title: 'Lucene project' and
> >> desc: 'the open source search software from Apache')
> >
> > Correction: this will actually match the example query ('the project'),
> > but this solution won't work if the search query is changed to: 'the
> > search project', since 'search' is not in the title field.
> >
> > Br,
> > Elmer
> >
> >
> > On Wed, 2011-06-08 at 16:35 +0200, Elmer wrote:
> >> Thank you,
> >>
> >> I already use the PerFieldAnalyzerWrapper (by Hibernate Search) ;)
> >> And that's where the problem comes in: different fields using different
> >> analyzers (some with, some without a stopfilter). For each term
> >> (tokenized by MFQP itself?), it applies the given analyzer on each
> >> field. If the analyzer returns no token (occurs on 'the' when using the
> >> PerFieldAnalyzerWrapper for the desc field), that field will not be
> >> included in the clause for that term. (see/re-read the example, maybe
> >> it's more clear what I mean now).
> >>
> >> Unfortunately, the solution that Erick gave won't do the trick
> >> > > bq.add(qp.parse("title:(the AND project)", SHOULD))
> >> > > bq.add(qp.parse("desc:(the AND project)", SHOULD))
> >> This still won't match documents where both 'the' and 'project' appear
> >> in DIFFERENT fields (i.e. a document with title: 'Lucene project' and
> >> desc: 'the open source search software from Apache')
> >>
> >> I hope it's clear what I mean :) Otherwise, let me know!
> >>
> >> BR,
> >> Elmer
> >>
> >>
> >>
> >> On Wed, 2011-06-08 at 14:42 +0100, Ian Lea wrote:
> >> > Except that I think he has loads of other fields and wants to keep it simple.
> >> >
> >> > But how about passing a PerFieldAnalyzerWrapper instance as the
> >> > analyzer to MFQP?  Worth a try.
> >> >
> >> >
> >> > --
> >> > Ian.
> >> >
> >> >
> >> > On Wed, Jun 8, 2011 at 2:38 PM, Erick Erickson <erickerickson@gmail.com> wrote:
> >> > > Could you just construct a BooleanQuery with the
> >> > > terms against different fields instead of using MFQP?
> >> > > e.g.
> >> > >
> >> > > bq.add(qp.parse("title:(the AND project)", SHOULD))
> >> > > bq.add(qp.parse("desc:(the AND project)", SHOULD))
> >> > >
> >> > > etc...? If your QueryParser was created with a
> >> > > PerFieldAnalyzerWrapper I think you might get what you
> >> > > want....
> >> > >
> >> > > Note, bad pseudo code there...
> >> > >
> >> > > Best
> >> > > Erick
> >> > >
> >> > > On Wed, Jun 8, 2011 at 4:52 AM, Elmer <evanchastelet@gmail.com> wrote:
> >> > >> Hi,
> >> > >>
> >> > >> I have a use case in which I use the MultiFieldQueryParser (MFQP) on
> >> > >> some fields that use and some fields that don't use a stopfilter. The
> >> > >> default operator of the MFQP is set to AND.
> >> > >> For example, if the search query is 'the project' (with 'the' included
> >> > >> in the stoplist) and the search fields are:
> >> > >>
> >> > >> title - not using a stopfilter,
> >> > >> desc - using a stopfilter,
> >> > >>
> >> > >> the parsed query becomes:
> >> > >>
> >> > >> '+(title:the) +(title:project desc:project)'.
> >> > >>
> >> > >> So, the problem is that docs that have the term 'the' only appearing in
> >> > >> their desc field are excluded from the results. So every query, with AND
> >> > >> as default operator, that has a stop word in it that only appears in
> >> > >> fields that use a stop filter will have this problem (or similar, if
> >> > >> there is at least one field X not using a stopfilter -> no match if a
> >> > >> stopword from query doesn't appear in field X). Thus, in this example, a
> >> > >> document with title: 'Lucene project' and desc: 'the open source search
> >> > >> software from Apache' will not be matched. In my opinion this is not the
> >> > >> expected behavior. What I'd like to see is that this doc is matched by
> >> > >> the given query. So, for each token in the query, that appears to be a
> >> > >> stopword in a field (i.e. some filter filters the token out), I want it
> >> > >> to be matched instead of not.
> >> > >>
> >> > >> Anyone who knows a way to deal with this? I would prefer to keep using
> >> > >> the MFQP, since I need to support multiple fields, querytime boosting
> >> > >> and lucene syntax. Or is there a disadvantage by doing this?
> >> > >>
> >> > >> Thanks in advance.
> >> > >>
> >> > >> BR,
> >> > >> Elmer van Chastelet
> >> > >>
> >> > >>
> >> > >> ---------------------------------------------------------------------
> >> > >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> > >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >> > >>
> >> > >>
> >> > >
> >> > > ---------------------------------------------------------------------
> >> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> >> > >
> >> > >
> >> >
> >> > ---------------------------------------------------------------------
> >> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >
> >>
> >>
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49941-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun  8 15:40:26 2011
Return-Path: <java-user-return-49941-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A3A37426A
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  8 Jun 2011 15:40:26 +0000 (UTC)
Received: (qmail 10319 invoked by uid 500); 8 Jun 2011 15:40:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10272 invoked by uid 500); 8 Jun 2011 15:40:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10264 invoked by uid 99); 8 Jun 2011 15:40:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Jun 2011 15:40:24 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.210.176 as permitted sender)
Received: from [209.85.210.176] (HELO mail-iy0-f176.google.com) (209.85.210.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Jun 2011 15:40:17 +0000
Received: by iym1 with SMTP id 1so775144iym.35
        for <java-user@lucene.apache.org>; Wed, 08 Jun 2011 08:39:57 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=M2VTw76HSHjnv5GqPWeqghohVWddc8Hh2Aa2/D8fHlc=;
        b=Cimluhg2TQDNQNZHzcR10ya/UA/soutoi8jBYhT4mvNItF+UdJzKooj3VvwKShC9CO
         fukvIK67Jt4BH2IayAu+dVNrqesItF+bfCWWQU3kkPfBGSZFdNsS4to/IxGbEE4zCt7F
         7lXw0PwDfsRoiRoneIP2hdgTAfw2IGk87N54c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=Dm9EdkAk+6tt7D/vFCDcScxeeelGUe1YT7FDZDsagkekigqPjJrdShQxOpLliE/K0a
         8h/V6IzdDbUWP/aCVQ7u6Ht+Gfl44vosNJvuPEcq13p2w5txRbyp87LHZQHROBbLp41q
         PfeTkHe8nckcP47qvBzuBP4aP75iYJeC5mNWo=
Received: by 10.231.43.138 with SMTP id w10mr106606ibe.11.1307547597100; Wed,
 08 Jun 2011 08:39:57 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.199.148 with HTTP; Wed, 8 Jun 2011 08:39:37 -0700 (PDT)
In-Reply-To: <1307547200.15928.31.camel@elmer-P35-DS3P>
References: <1307523177.3408.14.camel@elmer-P35-DS3P> <BANLkTinx9YFUSkAQXPxWB-VqCLscfGAR+g@mail.gmail.com>
 <BANLkTikT5E4gLAcPdC+frVDE4qYY5qwQ9w@mail.gmail.com> <1307543749.15928.20.camel@elmer-P35-DS3P>
 <1307545266.15928.23.camel@elmer-P35-DS3P> <BANLkTi=Q6FH1YwitsQpvQBxZnDn4ZVnddA@mail.gmail.com>
 <1307547200.15928.31.camel@elmer-P35-DS3P>
From: Ian Lea <ian.lea@gmail.com>
Date: Wed, 8 Jun 2011 16:39:37 +0100
Message-ID: <BANLkTikp7iR-400q=qVokS_p-7Geh6YrUg@mail.gmail.com>
Subject: Re: MultiFieldQueryParser with default AND and stopfilter
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

I'm sure you are right and I'm wrong - sorry for the waste of space.
However I still think you should build it all up in code.


--
Ian.


On Wed, Jun 8, 2011 at 4:33 PM, Elmer <evanchastelet@gmail.com> wrote:
>> Using MFQP with AND
>> everywhere you'll never get a match if some fields don't contain all
>> of the search terms"
>
> I'm sorry to say, but that's not true I guess, look how the query parser
> parses the following query:
> 'information retrieval'
> --parsed-to-->
> +(title:inform description:inform authors.name:information)
> +(title:retriev description:retriev authors.name:retrieval)
>
> in human language: both 'information' and 'retrieval' should appear
> somewhere, doesn't matter in which fields.
>
> So if 'information' only appears in the title, and 'retrieval' only in
> the description, there is a match (and there is, I just tested it ;))
>
> Br,
> Elmer
>
>
> On Wed, 2011-06-08 at 16:19 +0100, Ian Lea wrote:
>> Then surely the stop word issue is a red herring. =A0Using MFQP with AND
>> everywhere you'll never get a match if some fields don't contain all
>> of the search terms.
>>
>> Even if Erick's exact answer won't apply, I suspect that building up a
>> composite boolean query is the way to go.
>>
>>
>> --
>> Ian.
>>
>> On Wed, Jun 8, 2011 at 4:01 PM, Elmer <evanchastelet@gmail.com> wrote:
>> > Sorry, I made a mistake here:
>> >
>> >> Unfortunately, the solution that Erick gave won't do the trick
>> >> > > bq.add(qp.parse("title:(the AND project)", SHOULD))
>> >> > > bq.add(qp.parse("desc:(the AND project)", SHOULD))
>> >> This still won't match documents where both 'the' and 'project' appea=
r
>> >> in DIFFERENT fields (i.e. a document with title: 'Lucene project' and
>> >> desc: 'the open source search software from Apache')
>> >
>> > Correction: this will actually match the example query ('the project')=
,
>> > but this solution won't work if the search query is changed to: 'the
>> > search project', since 'search' is not in the title field.
>> >
>> > Br,
>> > Elmer
>> >
>> >
>> > On Wed, 2011-06-08 at 16:35 +0200, Elmer wrote:
>> >> Thank you,
>> >>
>> >> I already use the PerFieldAnalyzerWrapper (by Hibernate Search) ;)
>> >> And that's where the problem comes in: different fields using differe=
nt
>> >> analyzers (some with, some without a stopfilter). For each term
>> >> (tokenized by MFQP itself?), it applies the given analyzer on each
>> >> field. If the analyzer returns no token (occurs on 'the' when using t=
he
>> >> PerFieldAnalyzerWrapper for the desc field), that field will not be
>> >> included in the clause for that term. (see/re-read the example, maybe
>> >> it's more clear what I mean now).
>> >>
>> >> Unfortunately, the solution that Erick gave won't do the trick
>> >> > > bq.add(qp.parse("title:(the AND project)", SHOULD))
>> >> > > bq.add(qp.parse("desc:(the AND project)", SHOULD))
>> >> This still won't match documents where both 'the' and 'project' appea=
r
>> >> in DIFFERENT fields (i.e. a document with title: 'Lucene project' and
>> >> desc: 'the open source search software from Apache')
>> >>
>> >> I hope it's clear what I mean :) Otherwise, let me know!
>> >>
>> >> BR,
>> >> Elmer
>> >>
>> >>
>> >>
>> >> On Wed, 2011-06-08 at 14:42 +0100, Ian Lea wrote:
>> >> > Except that I think he has loads of other fields and wants to keep =
it simple.
>> >> >
>> >> > But how about passing a PerFieldAnalyzerWrapper instance as the
>> >> > analyzer to MFQP? =A0Worth a try.
>> >> >
>> >> >
>> >> > --
>> >> > Ian.
>> >> >
>> >> >
>> >> > On Wed, Jun 8, 2011 at 2:38 PM, Erick Erickson <erickerickson@gmail=
.com> wrote:
>> >> > > Could you just construct a BooleanQuery with the
>> >> > > terms against different fields instead of using MFQP?
>> >> > > e.g.
>> >> > >
>> >> > > bq.add(qp.parse("title:(the AND project)", SHOULD))
>> >> > > bq.add(qp.parse("desc:(the AND project)", SHOULD))
>> >> > >
>> >> > > etc...? If your QueryParser was created with a
>> >> > > PerFieldAnalyzerWrapper I think you might get what you
>> >> > > want....
>> >> > >
>> >> > > Note, bad pseudo code there...
>> >> > >
>> >> > > Best
>> >> > > Erick
>> >> > >
>> >> > > On Wed, Jun 8, 2011 at 4:52 AM, Elmer <evanchastelet@gmail.com> w=
rote:
>> >> > >> Hi,
>> >> > >>
>> >> > >> I have a use case in which I use the MultiFieldQueryParser (MFQP=
) on
>> >> > >> some fields that use and some fields that don't use a stopfilter=
. The
>> >> > >> default operator of the MFQP is set to AND.
>> >> > >> For example, if the search query is 'the project' (with 'the' in=
cluded
>> >> > >> in the stoplist) and the search fields are:
>> >> > >>
>> >> > >> title - not using a stopfilter,
>> >> > >> desc - using a stopfilter,
>> >> > >>
>> >> > >> the parsed query becomes:
>> >> > >>
>> >> > >> '+(title:the) +(title:project desc:project)'.
>> >> > >>
>> >> > >> So, the problem is that docs that have the term 'the' only appea=
ring in
>> >> > >> their desc field are excluded from the results. So every query, =
with AND
>> >> > >> as default operator, that has a stop word in it that only appear=
s in
>> >> > >> fields that use a stop filter will have this problem (or similar=
, if
>> >> > >> there is at least one field X not using a stopfilter -> no match=
 if a
>> >> > >> stopword from query doesn't appear in field X). Thus, in this ex=
ample, a
>> >> > >> document with title: 'Lucene project' and desc: 'the open source=
 search
>> >> > >> software from Apache' will not be matched. In my opinion this is=
 not the
>> >> > >> expected behavior. What I'd like to see is that this doc is matc=
hed by
>> >> > >> the given query. So, for each token in the query, that appears t=
o be a
>> >> > >> stopword in a field (i.e. some filter filters the token out), I =
want it
>> >> > >> to be matched instead of not.
>> >> > >>
>> >> > >> Anyone who knows a way to deal with this? I would prefer to keep=
 using
>> >> > >> the MFQP, since I need to support multiple fields, querytime boo=
sting
>> >> > >> and lucene syntax. Or is there a disadvantage by doing this?
>> >> > >>
>> >> > >> Thanks in advance.
>> >> > >>
>> >> > >> BR,
>> >> > >> Elmer van Chastelet
>> >> > >>
>> >> > >>
>> >> > >> ----------------------------------------------------------------=
-----
>> >> > >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> > >> For additional commands, e-mail: java-user-help@lucene.apache.or=
g
>> >> > >>
>> >> > >>
>> >> > >
>> >> > > -----------------------------------------------------------------=
----
>> >> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> > > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >> > >
>> >> > >
>> >> >
>> >> > -------------------------------------------------------------------=
--
>> >> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >> >
>> >>
>> >>
>> >
>> >
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49942-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun  8 21:09:10 2011
Return-Path: <java-user-return-49942-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 33F7148A2
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  8 Jun 2011 21:09:10 +0000 (UTC)
Received: (qmail 11243 invoked by uid 500); 8 Jun 2011 21:09:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11200 invoked by uid 500); 8 Jun 2011 21:09:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11192 invoked by uid 99); 8 Jun 2011 21:09:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Jun 2011 21:09:07 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of karl.wettin@gmail.com designates 209.85.215.176 as permitted sender)
Received: from [209.85.215.176] (HELO mail-ey0-f176.google.com) (209.85.215.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Jun 2011 21:09:01 +0000
Received: by eya28 with SMTP id 28so478916eya.35
        for <java-user@lucene.apache.org>; Wed, 08 Jun 2011 14:08:41 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:content-type:mime-version:subject:from
         :in-reply-to:date:content-transfer-encoding:message-id:references:to
         :x-mailer;
        bh=zCmoWOnKM0Anra4MQAvYUVVpUxQSSMB2ViL1hC+bhG8=;
        b=Ki7Mxb5p2I5TIOQDZbwx9y5NdKszLkAmlmA6n0rSEWlAdqKJJknlY/Oqw3VE/bpmgt
         p2tizqzRVOU1dSQ/ln6RAnG9TxAveNZeRnbASeV+0asuAxHUfDZdmPmTf1YgY9B+0dZl
         C4RLdsS2ZSpXpCYBJJbckzFDVYP6Y1ihCX76o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        b=c3VBo3BcXpKop5orxmF9kD/zxFvuz10dSaVkkPxhWP8bDHnsHPVqDR5oQxPU8bcQSF
         aqlkMFTjIFjGAxpb6me7BsxazYq4b+D6enOLTN2lyMGRqvGzR1ogR1cVWhtKrPK3ZP4s
         ovMAsfCWCz9e2QggxpOcX0Jg6K3gNEXttSJE4=
Received: by 10.213.16.74 with SMTP id n10mr2204844eba.97.1307567320991;
        Wed, 08 Jun 2011 14:08:40 -0700 (PDT)
Received: from [192.168.1.11] (c-0c8770d5.029-18-6d6c6d2.cust.bredbandsbolaget.se [213.112.135.12])
        by mx.google.com with ESMTPS id a41sm829036eeg.21.2011.06.08.14.08.38
        (version=TLSv1/SSLv3 cipher=OTHER);
        Wed, 08 Jun 2011 14:08:39 -0700 (PDT)
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1082)
Subject: Re: Lemmatization
From: Karl Wettin <karl.wettin@gmail.com>
In-Reply-To: <BANLkTimoRSoss3dgjZHQivk6kQZMxLJ7Jg@mail.gmail.com>
Date: Wed, 8 Jun 2011 23:08:37 +0200
Content-Transfer-Encoding: quoted-printable
Message-Id: <A857195F-2F04-4522-8010-4F5491125137@gmail.com>
References: <BANLkTimPUeEpJWgHngRdryZzivPVwvA2xQ@mail.gmail.com> <BANLkTikqzjv25JEK59BfcXwyKPXY0bEQvA@mail.gmail.com> <BANLkTimoRSoss3dgjZHQivk6kQZMxLJ7Jg@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1082)
X-Virus-Checked: Checked by ClamAV on apache.org

Perhaps "least frequent substring" or even "suffix truncation" might be =
enough for your needs.

Here is a related paper: http://web.jhu.edu/bin/q/b/p75-mcnamee.pdf


	karl



On Jun 8, 2011, at 1:52 PM, Mohamed Yahya wrote:

> You're right. Still, I am not sure if there is a library that would
> take care of examples such as the one I gave.
>=20
> On Wed, Jun 8, 2011 at 11:25, Lahiru Samarakoon <lahiruts@gmail.com> =
wrote:
>> Hi,
>>=20
>>>=20
>>> Is there something in Lucene that supports lemmatization of the =
following
>>> form:
>>>=20
>>> Mexican --> Mexico (from adjective to name/noune)
>>>=20
>>> Lemmatization do not change part of speech. I think you are looking =
for a
>> stemming algorithm.
>>=20
>> =
http://nlp.stanford.edu/IR-book/html/htmledition/stemming-and-lemmatizatio=
n-1.html
>>=20
>>>=20
>>>=20
>>> Thanks,
>> Lahiru
>>=20
>=20
>=20
>=20
> --=20
> Mohamed  Yahya
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49943-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun  8 21:32:42 2011
Return-Path: <java-user-return-49943-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id EB0BC453A
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  8 Jun 2011 21:32:41 +0000 (UTC)
Received: (qmail 59075 invoked by uid 500); 8 Jun 2011 21:32:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59028 invoked by uid 500); 8 Jun 2011 21:32:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59020 invoked by uid 99); 8 Jun 2011 21:32:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Jun 2011 21:32:39 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of trejkaz@trypticon.org designates 209.85.213.176 as permitted sender)
Received: from [209.85.213.176] (HELO mail-yx0-f176.google.com) (209.85.213.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Jun 2011 21:32:33 +0000
Received: by yxd5 with SMTP id 5so625731yxd.35
        for <java-user@lucene.apache.org>; Wed, 08 Jun 2011 14:32:12 -0700 (PDT)
Received: by 10.150.176.14 with SMTP id y14mr1252074ybe.400.1307568731784;
        Wed, 08 Jun 2011 14:32:11 -0700 (PDT)
Received: from mail-yx0-f176.google.com (mail-yx0-f176.google.com [209.85.213.176])
        by mx.google.com with ESMTPS id a5sm310076ybc.21.2011.06.08.14.32.10
        (version=SSLv3 cipher=OTHER);
        Wed, 08 Jun 2011 14:32:10 -0700 (PDT)
Received: by yxd5 with SMTP id 5so625707yxd.35
        for <java-user@lucene.apache.org>; Wed, 08 Jun 2011 14:32:09 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.8.11 with SMTP id l11mr1179630ybi.53.1307568729676; Wed,
 08 Jun 2011 14:32:09 -0700 (PDT)
Received: by 10.150.138.11 with HTTP; Wed, 8 Jun 2011 14:32:09 -0700 (PDT)
In-Reply-To: <1307523177.3408.14.camel@elmer-P35-DS3P>
References: <1307523177.3408.14.camel@elmer-P35-DS3P>
Date: Thu, 9 Jun 2011 07:32:09 +1000
Message-ID: <BANLkTi=yegCvg5dps_p35FLK3GN7__bYhg@mail.gmail.com>
Subject: Re: MultiFieldQueryParser with default AND and stopfilter
From: Trejkaz <trejkaz@trypticon.org>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8

On Wed, Jun 8, 2011 at 6:52 PM, Elmer <evanchastelet@gmail.com> wrote:
> the parsed query becomes:
>
> '+(title:the) +(title:project desc:project)'.
>
> So, the problem is that docs that have the term 'the' only appearing in
> their desc field are excluded from the results.

Subclass MFQP and override getFieldQuery.

If the field is null then MFQP will hand you back a BooleanQuery - if
the number of terms in this is lower than the number of fields then
some of them must have been removed because they were stop words.  If
this occurs, replace the whole BooleanQuery with a MatchAllDocsQuery.

Then you will effectively get:

    +(*:*) +(title:project desc:project)

And then in getBooleanQuery you could optimise the query to take out
MatchAllDocsQuery if it isn't necessary in a boolean query.

TX

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49944-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun  8 21:44:56 2011
Return-Path: <java-user-return-49944-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BDA6B40F4
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  8 Jun 2011 21:44:56 +0000 (UTC)
Received: (qmail 77337 invoked by uid 500); 8 Jun 2011 21:44:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77299 invoked by uid 500); 8 Jun 2011 21:44:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77288 invoked by uid 99); 8 Jun 2011 21:44:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Jun 2011 21:44:54 +0000
X-ASF-Spam-Status: No, hits=2.0 required=5.0
	tests=SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Jun 2011 21:44:49 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <mail@avomberg.de>)
	id 1QUQY8-0008EU-4x
	for java-user@lucene.apache.org; Wed, 08 Jun 2011 14:44:28 -0700
Date: Wed, 8 Jun 2011 14:44:28 -0700 (PDT)
From: Alex vB <mail@avomberg.de>
To: java-user@lucene.apache.org
Message-ID: <1307569468144-3041463.post@n3.nabble.com>
Subject: Similarity class and searchPayloads
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Hello everybody,

I am just curious about following case.
Currently, I create a boolean AND query which loads payloads.
In some cases it occurs that Lucene loads payloads but does not return hits.

Therefore, I assume that payloads are directly loaded whith each doc ID from
the posting list before the boolean filter.Is that right?
Is it possible to filter documents first and then load the payload?
For example, I have three terms and I check in every posting list if the
current doc ID is availabel.
Only then I load payload.

Or can anybody tell me where exactly Lucene loads payloads in code?

Regards
Alex

--
View this message in context: http://lucene.472066.n3.nabble.com/Similarity-class-and-searchPayloads-tp3041463p3041463.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49945-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun  8 23:11:15 2011
Return-Path: <java-user-return-49945-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4DE224BE7
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  8 Jun 2011 23:11:15 +0000 (UTC)
Received: (qmail 66782 invoked by uid 500); 8 Jun 2011 23:11:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66731 invoked by uid 500); 8 Jun 2011 23:11:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66723 invoked by uid 99); 8 Jun 2011 23:11:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Jun 2011 23:11:13 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Jun 2011 23:11:06 +0000
Received: by bwz8 with SMTP id 8so53793bwz.35
        for <java-user@lucene.apache.org>; Wed, 08 Jun 2011 16:10:45 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=9Lohbhbq2ynYzSBgTrh+B+F2loq6mkB/sj870dKHd5o=;
        b=HudPoXESCKf0grC72p+MG7AQiITjoeoQYeGsfR4p2hvQAfw5cgYVu4X/6wVXuqDkAe
         kkn0nOenXwPyLnj5adIbOZ3ndjLx+di+sbilMzErPdF4r3Z27KB2HMSXObjtaY28vEZB
         G4tC+Bi97vPIu2LKsDFgayR50jDcM0R3XiUG4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=BG2PuiAJoOFXxlAZMENvmFTqYQD12lYETSx3Y0ILyL0vmlYVf2aaIUJksOBMsaEtQ/
         rWVVHX/gepGFn5WG6ERqCkjIXuBKI5KtjS1V0OH4GLW6bDzmK1R6EJ2lnXyCmfb0hBWO
         14k9nbpl2PiXCcahmfZNuii83cNP3CTkdwLGo=
Received: by 10.204.36.129 with SMTP id t1mr33074bkd.97.1307574645312; Wed, 08
 Jun 2011 16:10:45 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.69.9 with HTTP; Wed, 8 Jun 2011 16:10:24 -0700 (PDT)
In-Reply-To: <BANLkTimoRSoss3dgjZHQivk6kQZMxLJ7Jg@mail.gmail.com>
References: <BANLkTimPUeEpJWgHngRdryZzivPVwvA2xQ@mail.gmail.com>
 <BANLkTikqzjv25JEK59BfcXwyKPXY0bEQvA@mail.gmail.com> <BANLkTimoRSoss3dgjZHQivk6kQZMxLJ7Jg@mail.gmail.com>
From: Robert Muir <rcmuir@gmail.com>
Date: Wed, 8 Jun 2011 19:10:24 -0400
Message-ID: <BANLkTinFSLhF_8E54RazkrRn605rDsee4A@mail.gmail.com>
Subject: Re: Lemmatization
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8

On Wed, Jun 8, 2011 at 7:52 AM, Mohamed Yahya <yahya.mohamed@gmail.com> wrote:
> You're right. Still, I am not sure if there is a library that would
> take care of examples such as the one I gave.
>

which is why you might want to just pick one that is close to what you
want, and then customize/tune it with any stuff particular to your use
case.

http://lucene.apache.org/java/3_2_0/api/contrib-analyzers/org/apache/lucene/analysis/miscellaneous/StemmerOverrideFilter.html

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49946-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun  9 06:32:01 2011
Return-Path: <java-user-return-49946-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8CAFE63B7
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  9 Jun 2011 06:32:01 +0000 (UTC)
Received: (qmail 11955 invoked by uid 500); 9 Jun 2011 06:31:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11879 invoked by uid 500); 9 Jun 2011 06:31:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11871 invoked by uid 99); 9 Jun 2011 06:31:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Jun 2011 06:31:52 +0000
X-ASF-Spam-Status: No, hits=2.0 required=5.0
	tests=FREEMAIL_FROM,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Jun 2011 06:31:45 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <mailformailinglists@yahoo.de>)
	id 1QUYm4-00041w-Ki
	for java-user@lucene.apache.org; Wed, 08 Jun 2011 23:31:24 -0700
Date: Wed, 8 Jun 2011 23:31:24 -0700 (PDT)
From: Em <mailformailinglists@yahoo.de>
To: java-user@lucene.apache.org
Message-ID: <1307601084625-3042678.post@n3.nabble.com>
Subject: Telling query-time QueryParser how to work by a TokenFilter
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi list,

let's take a simple example. A TokenFilter creates the terms "i" and "pod"
from the word "ipod".
This example is simple and if all usecases for the self-made tokenFilter
were like this, I could do the whole thing on index-side. However, it is not
- WordDelimiterFilter is no option.

The problem with the creation of "i" and "pod" is, that "i" would also match
things like "iphone", "ipad", "itunes", "iworks"... at the end of the day a
lot of other apple and none-apple products. It is no option to increase
minimumMatch of the boolean query at this point!

What I want is to tell the queryParser in some way, i.e. by an Attribute,
that it should create a boolean query like this "i AND pad" OR "pad" without
giving "pad" a boost for its two occurences. 

I know that I need a customized queryParser. However I don't want to
reimplement all that stuff that already works just to make the parser aware
of a new attribute.
Can you point me to some methods or best-practices to jump into the
queryParsers implementation?

Regards,
Em

--
View this message in context: http://lucene.472066.n3.nabble.com/Telling-query-time-QueryParser-how-to-work-by-a-TokenFilter-tp3042678p3042678.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49947-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun  9 08:03:58 2011
Return-Path: <java-user-return-49947-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 274C86CF3
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  9 Jun 2011 08:03:58 +0000 (UTC)
Received: (qmail 30380 invoked by uid 500); 9 Jun 2011 08:03:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30339 invoked by uid 500); 9 Jun 2011 08:03:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30331 invoked by uid 99); 9 Jun 2011 08:03:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Jun 2011 08:03:55 +0000
X-ASF-Spam-Status: No, hits=3.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of pranavgoyal40341@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Jun 2011 08:03:49 +0000
Received: by bwz8 with SMTP id 8so42569bwz.35
        for <java-user@lucene.apache.org>; Thu, 09 Jun 2011 01:03:28 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:from:date:message-id:subject:to
         :content-type;
        bh=i5rLnOl0Nm3w+cJez5n71qrL5AtQ4ZjKkj6imfaphcU=;
        b=Ruk18NXlvvU58Q8a++GijbwJ6Kf9uCCFaANFmwZF284+Tw0rEXeENJJMZcENUrAOsB
         i5i3LUlm17nW6Lgd8uaDmavVEPDZG9sKrNJYOz/nEiZ5ADItD7TnxAosk+L06AZq6V81
         c+gquTohYyQX0FuB3/9hgTO7ayEp5l1+orNqs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=SOdCTe4dyfd/cfU5O1hKm2fqyugJEPOhwDpPWjaAgYRTnbtSmIOsQXsRGEq9fxmdnj
         By1vxPsc1sJDx1yUrZtp75tXvGWgGEumm946JJsdZQGDINyAtQStP/D31GGo0QtvKytu
         /xYoUcK831ESYFivTxW7+XrW606opPQ4Abf74=
Received: by 10.204.29.23 with SMTP id o23mr446345bkc.18.1307606608109; Thu,
 09 Jun 2011 01:03:28 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.112.79 with HTTP; Thu, 9 Jun 2011 01:03:08 -0700 (PDT)
From: Pranav goyal <pranavgoyal40341@gmail.com>
Date: Thu, 9 Jun 2011 13:33:08 +0530
Message-ID: <BANLkTikg27MrRNMqdY1ExkovHezxdqieCA@mail.gmail.com>
Subject: Get all the field names
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00032555823a61e06204a542e3ba

--00032555823a61e06204a542e3ba
Content-Type: text/plain; charset=ISO-8859-1

Hi,

I want to retrieve all the field names from my index so that I can store
them in an array to use in MutiFieldQueryParser.
One question can I do it using my index directory? If yes then a piece of
code would be really helpful as I searched out a lot but no documentation is
there on this thing.

Why I want to do it using index directory is because my indexing code and
searching codes are in a different file. So it would be better if I can
access field names using the directory.

I tried with

IndexReader ir = new IndexReader(FSDirectory.open(indexDir));

Why isn't this correct?

I am a newbie in lucene, so may be these doubts can be silly.

Thanks

--00032555823a61e06204a542e3ba--

From java-user-return-49948-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun  9 09:08:15 2011
Return-Path: <java-user-return-49948-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 05F2C64DF
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  9 Jun 2011 09:08:15 +0000 (UTC)
Received: (qmail 74084 invoked by uid 500); 9 Jun 2011 09:08:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74047 invoked by uid 500); 9 Jun 2011 09:08:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74039 invoked by uid 99); 9 Jun 2011 09:08:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Jun 2011 09:08:12 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.210.176 as permitted sender)
Received: from [209.85.210.176] (HELO mail-iy0-f176.google.com) (209.85.210.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Jun 2011 09:08:05 +0000
Received: by iym1 with SMTP id 1so1756024iym.35
        for <java-user@lucene.apache.org>; Thu, 09 Jun 2011 02:07:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=R3+AgVG850rthd9pEn8on18hxesmeubU8dcDFIiFqTU=;
        b=Cqmo9JWNpLjtpdSqJBYmXBGjo4pzlq6SGUf/2UPKn6vphMbRAXkEopB4rt5YmYPIv4
         b9ThW75+asMnPGOJtfrwBDTFABIT/D8XQmOLdUHw+LTFY5+q/cPI6IULSkKS7wXw9RwX
         HyJeHWv8JVxa60BLBjQhHl3lyP6fbicgiGLmw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=yAwF2PiJaHbEFAc2DNsKD5Y7qxaSoxhMIneVfQaeE9n01LLR5PFcrWwJdo+nWBbbxh
         +iJ6q9W/Xu2c90CvusDyvYJfJSYYCYTzCwUgPEqq7PJTaXW+I6J9JPfoqatcrM1tipLr
         iBL41G0pNodpIuYCQGPHrGN4NMutJIYd79hGQ=
Received: by 10.231.116.132 with SMTP id m4mr587944ibq.86.1307610464077; Thu,
 09 Jun 2011 02:07:44 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.199.148 with HTTP; Thu, 9 Jun 2011 02:07:24 -0700 (PDT)
In-Reply-To: <BANLkTikg27MrRNMqdY1ExkovHezxdqieCA@mail.gmail.com>
References: <BANLkTikg27MrRNMqdY1ExkovHezxdqieCA@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Thu, 9 Jun 2011 10:07:24 +0100
Message-ID: <BANLkTikLtO4qYn0sgn8jD0bLSB1=0Muuxw@mail.gmail.com>
Subject: Re: Get all the field names
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

See the javadocs for IndexReader.getFieldNames(IndexReader.FieldOption
fldOption). Also see the javadocs for your "Why isn't this correct?"
question.

Reading Lucene In Action is highly recommended for all people new to lucene.


--
Ian.


On Thu, Jun 9, 2011 at 9:03 AM, Pranav goyal <pranavgoyal40341@gmail.com> wrote:
> Hi,
>
> I want to retrieve all the field names from my index so that I can store
> them in an array to use in MutiFieldQueryParser.
> One question can I do it using my index directory? If yes then a piece of
> code would be really helpful as I searched out a lot but no documentation is
> there on this thing.
>
> Why I want to do it using index directory is because my indexing code and
> searching codes are in a different file. So it would be better if I can
> access field names using the directory.
>
> I tried with
>
> IndexReader ir = new IndexReader(FSDirectory.open(indexDir));
>
> Why isn't this correct?
>
> I am a newbie in lucene, so may be these doubts can be silly.
>
> Thanks
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49949-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun  9 09:26:08 2011
Return-Path: <java-user-return-49949-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DE5B1607D
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  9 Jun 2011 09:26:08 +0000 (UTC)
Received: (qmail 22739 invoked by uid 500); 9 Jun 2011 09:26:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22703 invoked by uid 500); 9 Jun 2011 09:26:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22695 invoked by uid 99); 9 Jun 2011 09:26:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Jun 2011 09:26:06 +0000
X-ASF-Spam-Status: No, hits=0.6 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [207.126.144.139] (HELO eu1sys200aog115.obsmtp.com) (207.126.144.139)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Jun 2011 09:25:57 +0000
Received: from proxy03.detica.com ([193.36.230.103]) (using TLSv1) by eu1sys200aob115.postini.com ([207.126.147.11]) with SMTP
	ID DSNKTfCRkBEtWiWsDiP+kZv6ElwxQ44OT79N@postini.com; Thu, 09 Jun 2011 09:25:37 UTC
Received: from blackex04.detica.com ([10.1.1.9]) by proxy03.detica.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Thu, 9 Jun 2011 10:25:46 +0100
Received: from uksrpblkexb01.detica.com ([10.1.1.38]) by blackex04.detica.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Thu, 9 Jun 2011 10:25:36 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01CC2687.308C38B2"
Subject: Multi value NumericFields - major issue
Date: Thu, 9 Jun 2011 10:25:35 +0100
Message-ID: <614C529D389A5944B351F7DFB7594F24012AA214@uksrpblkexb01.detica.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Multi value NumericFields - major issue
Thread-Index: Acwmhy/lzgkAmhu8QTuuJzRGluJJzg==
From: "Tarr, Gregory" <Gregory.tarr@detica.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 09 Jun 2011 09:25:36.0261 (UTC) FILETIME=[30797B50:01CC2687]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01CC2687.308C38B2
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

The javadocs for NumericField (lucene 2.9.4) state:

You may add the same field name as a NumericField to the same document
more than once. Range querying and filtering will be the logical OR of
all values; so a range query will hit all documents that have at least
one value in the range

Furthermore, the precisionStep is defined only in terms of performance
and disk space, not in terms of affecting the results.

However, the unit test below shows that the precisionStep directly
affects the results when using multi-value fields:

Analyzer analyzer =3D new StandardAnalyzer(Version.LUCENE_29);
RAMDirectory directory =3D new RAMDirectory();
IndexWriter writer =3D new IndexWriter(directory, analyzer, true,
IndexWriter.MaxFieldLength.UNLIMITED);
Document document =3D new Document();
document.add(new NumericField("number", 4, Field.Store.YES,
true).setLongValue(480));
document.add(new NumericField("number", 4, Field.Store.YES,
true).setLongValue(180));
writer.addDocument(document);
IndexSearcher searcher =3D new IndexSearcher(directory, true);
Query q =3D new FilteredQuery(new MatchAllDocsQuery(),
NumericRangeFilter.newLongRange("number", 444l, 10000l, true, true));
TopDocs docs =3D searcher.search(q, null, 10);
Assert.assertEquals(1, docs.totalHits);

analyzer =3D new StandardAnalyzer(Version.LUCENE_29);
directory =3D new RAMDirectory();
writer =3D new IndexWriter(directory, analyzer, true,
IndexWriter.MaxFieldLength.UNLIMITED);
document =3D new Document();
document.add(new NumericField("number", 6, Field.Store.YES,
true).setLongValue(480));
document.add(new NumericField("number", 6, Field.Store.YES,
true).setLongValue(180));
writer.addDocument(document);
searcher =3D new IndexSearcher(directory, true);
q =3D new FilteredQuery(new MatchAllDocsQuery(),
NumericRangeFilter.newLongRange("number", 444l, 10000l, true, true));
docs =3D searcher.search(q, null, 10);
Assert.assertEquals(1, docs.totalHits); // fails, due to increased
precision Step

Any help would be greatly appreciated

Greg

Please consider the environment before printing this email.

This message should be regarded as confidential. If you have received thi=
s email in error please notify the sender and destroy it immediately.

Statements of intent shall only become binding when confirmed in hard cop=
y by an authorised signatory.  The contents of this email may relate to d=
ealings with other companies under the control of Detica Limited, details=
 of which can be found at http://www.detica.com/statutory-information.

Detica Limited is registered in England under No: 1337451.
Registered offices: Surrey Research Park, Guildford, Surrey, GU2 7YP, Eng=
land.
=0D
------_=_NextPart_001_01CC2687.308C38B2--

From java-user-return-49950-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun  9 09:32:35 2011
Return-Path: <java-user-return-49950-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7A20C6FF7
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  9 Jun 2011 09:32:35 +0000 (UTC)
Received: (qmail 47518 invoked by uid 500); 9 Jun 2011 09:32:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47479 invoked by uid 500); 9 Jun 2011 09:32:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47471 invoked by uid 99); 9 Jun 2011 09:32:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Jun 2011 09:32:32 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Jun 2011 09:32:25 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id A357AD36005
	for <java-user@lucene.apache.org>; Thu,  9 Jun 2011 11:32:01 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 4N+sEqAOfDfy for <java-user@lucene.apache.org>;
	Thu,  9 Jun 2011 11:31:56 +0200 (CEST)
Received: from VEGA (port-92-196-130-188.dynamic.qsc.de [92.196.130.188])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id E8DB5D36001
	for <java-user@lucene.apache.org>; Thu,  9 Jun 2011 11:31:55 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <614C529D389A5944B351F7DFB7594F24012AA214@uksrpblkexb01.detica.com>
In-Reply-To: <614C529D389A5944B351F7DFB7594F24012AA214@uksrpblkexb01.detica.com>
Subject: RE: Multi value NumericFields - major issue
Date: Thu, 9 Jun 2011 11:31:57 +0200
Message-ID: <001c01cc2688$14734c50$3d59e4f0$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQE4txWYA/wWEkNaXM7yYW5QOlp+h5XboW1w
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

if you pass in a precisionStep != theDefault (which is 4), you also have to
pass the same precStep also into the NumericRangeQuery / NumericRangeFilter.
If you not do this, you may get too few / incorrect results. This is
explained in JavaDocs of NumericRangeQuery. You example does not do this.

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Tarr, Gregory [mailto:Gregory.tarr@detica.com]
> Sent: Thursday, June 09, 2011 11:26 AM
> To: java-user@lucene.apache.org
> Subject: Multi value NumericFields - major issue
> 
> The javadocs for NumericField (lucene 2.9.4) state:
> 
> You may add the same field name as a NumericField to the same document
> more than once. Range querying and filtering will be the logical OR of all
> values; so a range query will hit all documents that have at least one
value in
> the range
> 
> Furthermore, the precisionStep is defined only in terms of performance and
> disk space, not in terms of affecting the results.
> 
> However, the unit test below shows that the precisionStep directly affects
> the results when using multi-value fields:
> 
> Analyzer analyzer = new StandardAnalyzer(Version.LUCENE_29);
> RAMDirectory directory = new RAMDirectory(); IndexWriter writer = new
> IndexWriter(directory, analyzer, true,
> IndexWriter.MaxFieldLength.UNLIMITED);
> Document document = new Document();
> document.add(new NumericField("number", 4, Field.Store.YES,
> true).setLongValue(480)); document.add(new NumericField("number", 4,
> Field.Store.YES, true).setLongValue(180)); writer.addDocument(document);
> IndexSearcher searcher = new IndexSearcher(directory, true); Query q =
> new FilteredQuery(new MatchAllDocsQuery(),
> NumericRangeFilter.newLongRange("number", 444l, 10000l, true, true));
> TopDocs docs = searcher.search(q, null, 10); Assert.assertEquals(1,
> docs.totalHits);
> 
> analyzer = new StandardAnalyzer(Version.LUCENE_29);
> directory = new RAMDirectory();
> writer = new IndexWriter(directory, analyzer, true,
> IndexWriter.MaxFieldLength.UNLIMITED);
> document = new Document();
> document.add(new NumericField("number", 6, Field.Store.YES,
> true).setLongValue(480)); document.add(new NumericField("number", 6,
> Field.Store.YES, true).setLongValue(180)); writer.addDocument(document);
> searcher = new IndexSearcher(directory, true); q = new FilteredQuery(new
> MatchAllDocsQuery(), NumericRangeFilter.newLongRange("number", 444l,
> 10000l, true, true)); docs = searcher.search(q, null, 10);
Assert.assertEquals(1,
> docs.totalHits); // fails, due to increased precision Step
> 
> Any help would be greatly appreciated
> 
> Greg
> 
> Please consider the environment before printing this email.
> 
> This message should be regarded as confidential. If you have received this
> email in error please notify the sender and destroy it immediately.
> 
> Statements of intent shall only become binding when confirmed in hard copy
> by an authorised signatory.  The contents of this email may relate to
dealings
> with other companies under the control of Detica Limited, details of which
> can be found at http://www.detica.com/statutory-information.
> 
> Detica Limited is registered in England under No: 1337451.
> Registered offices: Surrey Research Park, Guildford, Surrey, GU2 7YP,
> England.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49951-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun  9 10:21:51 2011
Return-Path: <java-user-return-49951-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 89AC264FA
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  9 Jun 2011 10:21:51 +0000 (UTC)
Received: (qmail 38563 invoked by uid 500); 9 Jun 2011 10:21:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38518 invoked by uid 500); 9 Jun 2011 10:21:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38510 invoked by uid 99); 9 Jun 2011 10:21:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Jun 2011 10:21:49 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Jun 2011 10:21:43 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 51890D36005
	for <java-user@lucene.apache.org>; Thu,  9 Jun 2011 12:21:22 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id b48NRd8vif9W for <java-user@lucene.apache.org>;
	Thu,  9 Jun 2011 12:21:14 +0200 (CEST)
Received: from VEGA (port-92-196-130-188.dynamic.qsc.de [92.196.130.188])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id EAD60D36001
	for <java-user@lucene.apache.org>; Thu,  9 Jun 2011 12:21:13 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <614C529D389A5944B351F7DFB7594F24012AA214@uksrpblkexb01.detica.com> <001c01cc2688$14734c50$3d59e4f0$@thetaphi.de>
In-Reply-To: <001c01cc2688$14734c50$3d59e4f0$@thetaphi.de>
Subject: RE: Multi value NumericFields - major issue
Date: Thu, 9 Jun 2011 12:21:15 +0200
Message-ID: <002801cc268e$f7675e60$e6361b20$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQE4txWYA/wWEkNaXM7yYW5QOlp+hwIqC1aKlcpfKBA=
Content-Language: de

I opened an issue to *maybe* store the precision step in index metadata, but
this is similar like using a different analyzer on query and index side:
https://issues.apache.org/jira/browse/LUCENE-3187

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Uwe Schindler [mailto:uwe@thetaphi.de]
> Sent: Thursday, June 09, 2011 11:32 AM
> To: java-user@lucene.apache.org
> Subject: RE: Multi value NumericFields - major issue
> 
> Hi,
> 
> if you pass in a precisionStep != theDefault (which is 4), you also have
to pass
> the same precStep also into the NumericRangeQuery / NumericRangeFilter.
> If you not do this, you may get too few / incorrect results. This is
explained in
> JavaDocs of NumericRangeQuery. You example does not do this.
> 
> Uwe
> 
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
> 
> 
> > -----Original Message-----
> > From: Tarr, Gregory [mailto:Gregory.tarr@detica.com]
> > Sent: Thursday, June 09, 2011 11:26 AM
> > To: java-user@lucene.apache.org
> > Subject: Multi value NumericFields - major issue
> >
> > The javadocs for NumericField (lucene 2.9.4) state:
> >
> > You may add the same field name as a NumericField to the same document
> > more than once. Range querying and filtering will be the logical OR of
> > all values; so a range query will hit all documents that have at least
> > one
> value in
> > the range
> >
> > Furthermore, the precisionStep is defined only in terms of performance
> > and disk space, not in terms of affecting the results.
> >
> > However, the unit test below shows that the precisionStep directly
> > affects the results when using multi-value fields:
> >
> > Analyzer analyzer = new StandardAnalyzer(Version.LUCENE_29);
> > RAMDirectory directory = new RAMDirectory(); IndexWriter writer = new
> > IndexWriter(directory, analyzer, true,
> > IndexWriter.MaxFieldLength.UNLIMITED);
> > Document document = new Document();
> > document.add(new NumericField("number", 4, Field.Store.YES,
> > true).setLongValue(480)); document.add(new NumericField("number", 4,
> > Field.Store.YES, true).setLongValue(180));
> > writer.addDocument(document); IndexSearcher searcher = new
> > IndexSearcher(directory, true); Query q = new FilteredQuery(new
> > MatchAllDocsQuery(), NumericRangeFilter.newLongRange("number", 444l,
> > 10000l, true, true)); TopDocs docs = searcher.search(q, null, 10);
> > Assert.assertEquals(1, docs.totalHits);
> >
> > analyzer = new StandardAnalyzer(Version.LUCENE_29);
> > directory = new RAMDirectory();
> > writer = new IndexWriter(directory, analyzer, true,
> > IndexWriter.MaxFieldLength.UNLIMITED);
> > document = new Document();
> > document.add(new NumericField("number", 6, Field.Store.YES,
> > true).setLongValue(480)); document.add(new NumericField("number", 6,
> > Field.Store.YES, true).setLongValue(180));
> > writer.addDocument(document); searcher = new IndexSearcher(directory,
> > true); q = new FilteredQuery(new MatchAllDocsQuery(),
> > NumericRangeFilter.newLongRange("number", 444l, 10000l, true, true));
> > docs = searcher.search(q, null, 10);
> Assert.assertEquals(1,
> > docs.totalHits); // fails, due to increased precision Step
> >
> > Any help would be greatly appreciated
> >
> > Greg
> >
> > Please consider the environment before printing this email.
> >
> > This message should be regarded as confidential. If you have received
> > this email in error please notify the sender and destroy it immediately.
> >
> > Statements of intent shall only become binding when confirmed in hard
> > copy by an authorised signatory.  The contents of this email may
> > relate to
> dealings
> > with other companies under the control of Detica Limited, details of
> > which can be found at http://www.detica.com/statutory-information.
> >
> > Detica Limited is registered in England under No: 1337451.
> > Registered offices: Surrey Research Park, Guildford, Surrey, GU2 7YP,
> > England.
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49952-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun  9 11:24:39 2011
Return-Path: <java-user-return-49952-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0472E69EB
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  9 Jun 2011 11:24:39 +0000 (UTC)
Received: (qmail 21007 invoked by uid 500); 9 Jun 2011 11:24:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20959 invoked by uid 500); 9 Jun 2011 11:24:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20950 invoked by uid 99); 9 Jun 2011 11:24:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Jun 2011 11:24:36 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [62.213.161.134] (HELO pmx.sirma.bg) (62.213.161.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Jun 2011 11:24:28 +0000
X-Virus-Scanned: Sirma Antivirus System
Received: from [192.168.128.140] (ivasilev.sirma.int [192.168.128.140])
	by pmx.sirma.bg (Sirma mail system) with ESMTP id 322D124005
	for <java-user@lucene.apache.org>; Thu,  9 Jun 2011 14:24:07 +0300 (EEST)
Message-ID: <4DF0AD57.6060102@sirma.bg>
Date: Thu, 09 Jun 2011 14:24:07 +0300
From: Ivan Vasilev <ivasilev@sirma.bg>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.2; en-US; rv:1.9.2.17) Gecko/20110414 Thunderbird/3.1.10
MIME-Version: 1.0
To: LUCENE MAIL LIST <java-user@lucene.apache.org>
Subject: Bug fix to contrib/.../IndexSplitter
Content-Type: multipart/mixed;
 boundary="------------070000040909000206070708"
X-Virus-Checked: Checked by ClamAV on apache.org

--------------070000040909000206070708
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Hi Guys,

I would like to fix a class in 
contrib/misc/src/java/org/apache/lucene/index called IndexSplitter. It 
has a bug - when splits the segments in separate index the segment 
descriptor file contains a wrong data - the number (the name) of next 
segment to generate is 0. Although it can not cause exception in some 
cases (depends on existing segment names and the number of newly 
generated ones) in most of cases it do cases Exception.

I do not know if I would have rights to submit this fix to Lucene 
contrib dir but I am attaching the fix and a test that shows the 
exception when using original class and there is no exception when using 
fixing class.

Cheers,
Ivan

--------------070000040909000206070708
Content-Type: text/plain;
 name="TestIndexSplitter.java"
Content-Transfer-Encoding: 7bit
Content-Disposition: attachment;
 filename="TestIndexSplitter.java"

/**
 * 
 */
package test;

import java.io.File;
import java.io.IOException;

import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.document.Field.Index;
import org.apache.lucene.document.Field.Store;
import org.apache.lucene.index.IndexReader;
import org.apache.lucene.index.IndexSplitter;
import org.apache.lucene.index.IndexSplitterFixed;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.index.IndexWriterConfig;
import org.apache.lucene.index.IndexWriterConfig.OpenMode;
import org.apache.lucene.store.FSDirectory;
import org.apache.lucene.util.Version;

/**
 * @author ivasilev
 *
 */
public class TestIndexSplitter {
	
	private static File INDEX_PATH = new File("E:/Temp/ContribIndexSpliter/index");
	private static File INDEX_SPLIT_PATH = new File("E:/Temp/ContribIndexSpliter/splitIndex");
	private static File INDEX_SPLIT_FIXED_PATH = new File("E:/Temp/ContribIndexSpliter/splitFixedIndex");
	
	public static void main(String[] args) throws IOException {
		initDirs();
		createIndex();
		splitIndexWithBothSplitters();
		deleteFirstDocAndOptimize(INDEX_SPLIT_FIXED_PATH);
		readIndex(INDEX_SPLIT_FIXED_PATH);
		deleteFirstDocAndOptimize(INDEX_SPLIT_PATH); // might throw exception
		readIndex(INDEX_SPLIT_PATH); // surely throws Exception
	}
	
	private static void initDirs() {
		initDir(INDEX_PATH);
		initDir(INDEX_SPLIT_PATH);
		initDir(INDEX_SPLIT_FIXED_PATH);
	}
	
	private static void initDir(File dir) {
		if ( ! dir.exists()) {
			dir.mkdirs();
		}
		for (File currFile : dir.listFiles()) {
			if (currFile.isFile()) {
				currFile.delete();
			}
		}
	}
	
	private static void createIndex() throws IOException {
		IndexWriter iw = null;
		try {
			IndexWriterConfig iwConfig = new IndexWriterConfig(Version.LUCENE_32,
				new StandardAnalyzer(Version.LUCENE_32));
			iwConfig.setOpenMode(OpenMode.CREATE);
			iw = new IndexWriter(FSDirectory.open(INDEX_PATH), iwConfig);
			Document doc = new Document();
			doc.add(new Field("content", "doc 1", Store.YES, Index.ANALYZED_NO_NORMS));
			iw.addDocument(doc);
			doc = new Document();
			doc.add(new Field("content", "doc 2", Store.YES, Index.ANALYZED_NO_NORMS));
			iw.addDocument(doc);
			iw.close();
		} finally {
			if (iw != null) {
				iw.close();
			}
		}
	}
	
	private static void splitIndexWithBothSplitters() throws IOException {
		IndexSplitter is = new IndexSplitter(INDEX_PATH);
		is.split(INDEX_SPLIT_PATH, new String[] { "_0" });
		IndexSplitterFixed isf = new IndexSplitterFixed(INDEX_PATH);
		isf.split(INDEX_SPLIT_FIXED_PATH, new String[] { "_0" });
	}
	
	private static void deleteFirstDocAndOptimize(File indexDir) throws IOException {
		IndexReader ir = null;
		IndexWriter iw = null;
		try {
			ir = IndexReader.open(FSDirectory.open(indexDir), false);
			ir.deleteDocument(0);
			ir.close();
			IndexWriterConfig iwConfig = new IndexWriterConfig(Version.LUCENE_32,
				new StandardAnalyzer(Version.LUCENE_32));
			iw = new IndexWriter(FSDirectory.open(indexDir), iwConfig);
			iw.optimize();
		} finally {
			if (ir != null) {
				ir.close();
			}
			if (iw != null) {
				iw.close();
			}
		}
	}
	
	private static void readIndex(File indexDir) throws IOException {
		IndexReader ir = null;
		try {
			ir = IndexReader.open(FSDirectory.open(indexDir));
			System.out.println(indexDir.getPath() + " index -> ir.numDocs = " + ir.numDocs());
		} finally {
			if (ir != null) {
				ir.close();
			}
		}
	}
	
}

--------------070000040909000206070708
Content-Type: text/plain;
 name="IndexSplitterFixed.java"
Content-Transfer-Encoding: 7bit
Content-Disposition: attachment;
 filename="IndexSplitterFixed.java"

/**
 * 
 */
package org.apache.lucene.index;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.util.List;

import org.apache.lucene.store.FSDirectory;

/**
 * @author ivasilev
 *
 */
public class IndexSplitterFixed extends IndexSplitter {
	
	public IndexSplitterFixed(File dir) throws IOException {
		super(dir);
	}
	
	public void split(File destDir, String[] segs) throws IOException {
	    destDir.mkdirs();
	    FSDirectory destFSDir = FSDirectory.open(destDir);
	    SegmentInfos destInfos = new SegmentInfos();
	    destInfos.counter = nextSegmentName(segs); // the fix
	    for (String n : segs) {
	      SegmentInfo info = getInfo(n);
	      destInfos.add(info);
	      // now copy files over
	      List<String> files = info.files();
	      for (final String srcName : files) {
	        File srcFile = new File(dir, srcName);
	        File destFile = new File(destDir, srcName);
	        copyFile(srcFile, destFile);
	      }
	    }
	    destInfos.changed();
	    destInfos.commit(destFSDir);
	    // System.out.println("destDir:"+destDir.getAbsolutePath());
	}
	
	private int nextSegmentName(String ... segs) {
		int ret = 0;
		for (String currSeg : segs) {
			int currSegNum = Integer.parseInt(currSeg.substring(1), 36);
			if (ret < currSegNum) {
				ret = currSegNum;
			}
		}
		return ++ret;
	}
	
	// following methods just copyied from IndexSplitter (as there are private)

	private SegmentInfo getInfo(String name) {
	    for (int x = 0; x < infos.size(); x++) {
	    	if (name.equals(infos.info(x).name))
	        return infos.info(x);
	    }
	    return null;
	}
	  
	private static final byte[] copyBuffer = new byte[32*1024];
	 
	private static void copyFile(File src, File dst) throws IOException {
	    InputStream in = new FileInputStream(src);
	    OutputStream out = new FileOutputStream(dst);
	    int len;
	    while ((len = in.read(copyBuffer)) > 0) {
	    	out.write(copyBuffer, 0, len);
	    }
	    in.close();
	    out.close();
	}
	
}


--------------070000040909000206070708
Content-Type: text/plain; charset=us-ascii


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--------------070000040909000206070708--

From java-user-return-49953-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun  9 12:21:16 2011
Return-Path: <java-user-return-49953-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 372406B9F
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  9 Jun 2011 12:21:16 +0000 (UTC)
Received: (qmail 4579 invoked by uid 500); 9 Jun 2011 12:21:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4489 invoked by uid 500); 9 Jun 2011 12:21:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4470 invoked by uid 99); 9 Jun 2011 12:21:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Jun 2011 12:21:10 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of richard.marr@gmail.com designates 209.85.218.48 as permitted sender)
Received: from [209.85.218.48] (HELO mail-yi0-f48.google.com) (209.85.218.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Jun 2011 12:21:05 +0000
Received: by yib12 with SMTP id 12so1098354yib.35
        for <multiple recipients>; Thu, 09 Jun 2011 05:20:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:cc:content-type;
        bh=b9AXes4+OVsF48qrUj0LeOZ7yPkcmUVNwjl9KlMGHVI=;
        b=xzAFO1mhaf9BZXGFrScHI5WVxwpiNarnYbzlOO8PQVRR0quUMI1YwBKxO1s7uo+bIX
         xAD8lCZPwMf8AqTQGVbvu8TcCJlefafOJJZO2EAuNADK3SUN+RUb7yRK13YAuE2QjuI7
         ZT420bbe4ed5osEaul6oygn6tL1JJPbKF710M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :cc:content-type;
        b=gMjH/2PR8CHPjqVdRTLwQZIIeyEL7wMHM5fa0AeEB0SHnc4s0JVhIAhBgWZY8Q7qXg
         66BFSrEwvhTVTGTstLbV5CsoJ86jGy7OBqEqC3HAMgRhK+Hr0wrRQXeYvxBw5ukK/cXo
         OoENfc1fjp8UhhPTfNtlg8VP+AtdPoXeoP6BI=
MIME-Version: 1.0
Received: by 10.236.161.234 with SMTP id w70mr943021yhk.74.1307622044287; Thu,
 09 Jun 2011 05:20:44 -0700 (PDT)
Received: by 10.147.125.5 with HTTP; Thu, 9 Jun 2011 05:20:44 -0700 (PDT)
In-Reply-To: <BANLkTinG+jqXa+g2eW1cnUQZwZbLF5Ke2w@mail.gmail.com>
References: <BANLkTinG+jqXa+g2eW1cnUQZwZbLF5Ke2w@mail.gmail.com>
Date: Thu, 9 Jun 2011 13:20:44 +0100
Message-ID: <BANLkTincqdz-V4KG=LMEeEcr55kM62uByw@mail.gmail.com>
Subject: Re: London open source search social - 13th June
From: Richard Marr <richard.marr@gmail.com>
To: users@elasticsearch.com, java-user@lucene.apache.org, 
	katta-developer@lists.sourceforge.net, solr-user@lucene.apache.org
Cc: =?ISO-8859-1?Q?Ren=E9_Kriegler?= <rk@rene-kriegler.de>
Content-Type: multipart/alternative; boundary=20cf30563f4773420204a5467bbb

--20cf30563f4773420204a5467bbb
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Just a quick reminder that we're meeting on Monday. Come along if you're
around.


On 1 June 2011 13:27, Richard Marr <richard.marr@gmail.com> wrote:

> Hi guys,
>
> Just to let you know we're meeting up to talk all-things-search on Monday
> 13th June. There's usually a good mix of backgrounds and experience level=
s
> so if you're free and in the London area then it'd be good to see you the=
re.
>
> Details:
> 7pm - The Elgin - 96 Ladbrooke Grove
> http://www.meetup.com/london-search-social/events/20387881/
>
> ----
>
> Greetings search geeks!
>
> We've booked the next meetup for the 13th June. As usual, the plan is to
> meet up and geek out over a friendly beer.
>
> I know my co-organiser Ren=E9 has been working on some interesting search
> projects, and I've recently left Empora to work on my own project so by J=
une
> I should hopefully have some war stories about using @elasticsearch in
> production. The format is completely open though so please bring your own
> topics if you've got them.
>
> Hope to see you there!
>
> --
> Richard Marr

--20cf30563f4773420204a5467bbb--

From java-user-return-49954-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun  9 12:48:08 2011
Return-Path: <java-user-return-49954-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9B4096CD6
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  9 Jun 2011 12:48:08 +0000 (UTC)
Received: (qmail 55939 invoked by uid 500); 9 Jun 2011 12:48:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55895 invoked by uid 500); 9 Jun 2011 12:48:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55887 invoked by uid 99); 9 Jun 2011 12:48:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Jun 2011 12:48:06 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.230.18.82] (HELO smtp1.syr.edu) (128.230.18.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Jun 2011 12:47:56 +0000
Received: from suex07-hub-01.ad.syr.edu (suex07-hub-01.ad.syr.edu [128.230.108.195])
	by smtp1.syr.edu (8.14.3/8.14.3) with ESMTP id p59ClZFh018379
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Thu, 9 Jun 2011 08:47:35 -0400
Received: from suex07-mbx-03.ad.syr.edu ([128.230.108.133]) by
 suex07-hub-01.ad.syr.edu ([128.230.108.195]) with mapi; Thu, 9 Jun 2011
 08:47:35 -0400
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Thu, 9 Jun 2011 08:47:28 -0400
Subject: RE: Bug fix to contrib/.../IndexSplitter
Thread-Topic: Bug fix to contrib/.../IndexSplitter
Thread-Index: Acwml9VyesmF4CksSNascLEL04sVWQACtYow
Message-ID: <2D127F11DC79714E9B6A43AC9458147FBAD43491@suex07-mbx-03.ad.syr.edu>
References: <4DF0AD57.6060102@sirma.bg>
In-Reply-To: <4DF0AD57.6060102@sirma.bg>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=2.50.10432:5.4.6813,1.0.148,0.0.0000
 definitions=2011-06-09_03:2011-06-09,2011-06-08,1970-01-01 signatures=0
X-Proofpoint-Spam-Reason: safe
X-Virus-Checked: Checked by ClamAV on apache.org

SGkgSXZhbiwNCg0KWW91IGRvIGhhdmUgcmlnaHRzIHRvIHN1Ym1pdCBmaXhlcyB0byBMdWNlbmUg
LSBldmVyeW9uZSBkb2VzIQ0KDQpIZXJlJ3MgaG93OiBodHRwOi8vd2lraS5hcGFjaGUub3JnL2x1
Y2VuZS1qYXZhL0hvd1RvQ29udHJpYnV0ZQ0KDQpQbGVhc2UgY3JlYXRlIGEgcGF0Y2gsIGNyZWF0
ZSBhbiBpc3N1ZSBpbiBKSVJBLCBhbmQgdGhlbiBhdHRhY2ggdGhlIHBhdGNoIHRvIHRoZSBKSVJB
IGlzc3VlLiAgV2hlbiB5b3UgZG8gdGhpcywgeW91IGFyZSBhc2tlZCB0byBzdGF0ZSB0aGF0IHlv
dSBncmFudCBsaWNlbnNlIHRvIHlvdXIgd29yazsgdGhpcyBpcyB2ZXJ5IGltcG9ydGFudCBmb3Ig
QXBhY2hlIHNvZnR3YXJlIHByb2plY3RzLiAgQWxsIEpJUkEgaXNzdWUgY3JlYXRpb24gYW5kIG1v
ZGlmaWNhdGlvbiBldmVudHMgYXJlIGF1dG9tYXRpY2FsbHkgcG9zdGVkIHRvIHRoZSBkZXZAbHVj
ZW5lLmFwYWNoZS5vcmcgbWFpbGluZyBsaXN0LCBzbyBhbGwgTHVjZW5lIGRldmVsb3BlcnMgd2ls
bCBzZWUgeW91ciB3b3JrLg0KDQpUaGFua3MsDQpTdGV2ZQ0KDQo+IC0tLS0tT3JpZ2luYWwgTWVz
c2FnZS0tLS0tDQo+IEZyb206IEl2YW4gVmFzaWxldiBbbWFpbHRvOml2YXNpbGV2QHNpcm1hLmJn
XQ0KPiBTZW50OiBUaHVyc2RheSwgSnVuZSAwOSwgMjAxMSA3OjI0IEFNDQo+IFRvOiBMVUNFTkUg
TUFJTCBMSVNUDQo+IFN1YmplY3Q6IEJ1ZyBmaXggdG8gY29udHJpYi8uLi4vSW5kZXhTcGxpdHRl
cg0KPiANCj4gSGkgR3V5cywNCj4gDQo+IEkgd291bGQgbGlrZSB0byBmaXggYSBjbGFzcyBpbg0K
PiBjb250cmliL21pc2Mvc3JjL2phdmEvb3JnL2FwYWNoZS9sdWNlbmUvaW5kZXggY2FsbGVkIElu
ZGV4U3BsaXR0ZXIuIEl0DQo+IGhhcyBhIGJ1ZyAtIHdoZW4gc3BsaXRzIHRoZSBzZWdtZW50cyBp
biBzZXBhcmF0ZSBpbmRleCB0aGUgc2VnbWVudA0KPiBkZXNjcmlwdG9yIGZpbGUgY29udGFpbnMg
YSB3cm9uZyBkYXRhIC0gdGhlIG51bWJlciAodGhlIG5hbWUpIG9mIG5leHQNCj4gc2VnbWVudCB0
byBnZW5lcmF0ZSBpcyAwLiBBbHRob3VnaCBpdCBjYW4gbm90IGNhdXNlIGV4Y2VwdGlvbiBpbiBz
b21lDQo+IGNhc2VzIChkZXBlbmRzIG9uIGV4aXN0aW5nIHNlZ21lbnQgbmFtZXMgYW5kIHRoZSBu
dW1iZXIgb2YgbmV3bHkNCj4gZ2VuZXJhdGVkIG9uZXMpIGluIG1vc3Qgb2YgY2FzZXMgaXQgZG8g
Y2FzZXMgRXhjZXB0aW9uLg0KPiANCj4gSSBkbyBub3Qga25vdyBpZiBJIHdvdWxkIGhhdmUgcmln
aHRzIHRvIHN1Ym1pdCB0aGlzIGZpeCB0byBMdWNlbmUNCj4gY29udHJpYiBkaXIgYnV0IEkgYW0g
YXR0YWNoaW5nIHRoZSBmaXggYW5kIGEgdGVzdCB0aGF0IHNob3dzIHRoZQ0KPiBleGNlcHRpb24g
d2hlbiB1c2luZyBvcmlnaW5hbCBjbGFzcyBhbmQgdGhlcmUgaXMgbm8gZXhjZXB0aW9uIHdoZW4g
dXNpbmcNCj4gZml4aW5nIGNsYXNzLg0KPiANCj4gQ2hlZXJzLA0KPiBJdmFuDQo=


From java-user-return-49955-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun  9 12:59:18 2011
Return-Path: <java-user-return-49955-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 49BA061E1
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  9 Jun 2011 12:59:18 +0000 (UTC)
Received: (qmail 81406 invoked by uid 500); 9 Jun 2011 12:59:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81280 invoked by uid 500); 9 Jun 2011 12:59:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81268 invoked by uid 99); 9 Jun 2011 12:59:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Jun 2011 12:59:15 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of evanchastelet@gmail.com designates 209.85.215.48 as permitted sender)
Received: from [209.85.215.48] (HELO mail-ew0-f48.google.com) (209.85.215.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Jun 2011 12:59:06 +0000
Received: by ewy22 with SMTP id 22so765712ewy.35
        for <java-user@lucene.apache.org>; Thu, 09 Jun 2011 05:58:46 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:subject:from:to:in-reply-to:references
         :content-type:date:message-id:mime-version:x-mailer;
        bh=YqTUcgNvQg9etyeNb1TFbb2hl1wDQbltlLd8arvi9oo=;
        b=xTGtB+Xl+0NaxLd5pI5iLwleCd/XJiwquXU5AdaWpJJRNuW9Em7UpefUyIsMkolC+N
         4nxzli1XURJxaYhI9fHhwQ3Wx4hrButNjWGySnWZcORiBQfEydmKH6bpHthrsGHbaYIQ
         joZnLNm28kfGXbd/kCjzQ1VQ/xbl0U2pZ4SN0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=subject:from:to:in-reply-to:references:content-type:date:message-id
         :mime-version:x-mailer;
        b=NOos8+Sb5EwHlwiyKUwx08ENf+XKkExMIMlzAcF3RacyaLDdJxBQqsjlc9RRddfCaQ
         H19HyzXbOqF6x3RAOPKvCLQGnw8XvLbU46YgrQ/M4da3c3f6KmbDzqsZveX6jvsHOKib
         dTlNdcu8WTOYj5ojjkNj7hj92oLiwSAbh51+Q=
Received: by 10.14.96.131 with SMTP id r3mr365107eef.101.1307624325640;
        Thu, 09 Jun 2011 05:58:45 -0700 (PDT)
Received: from [192.168.2.132] (g214168.upc-g.chello.nl [80.57.214.168])
        by mx.google.com with ESMTPS id a45sm1424960eec.9.2011.06.09.05.58.44
        (version=SSLv3 cipher=OTHER);
        Thu, 09 Jun 2011 05:58:44 -0700 (PDT)
Subject: Re: MultiFieldQueryParser with default AND and stopfilter
From: Elmer <evanchastelet@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <BANLkTi=yegCvg5dps_p35FLK3GN7__bYhg@mail.gmail.com>
References: <1307523177.3408.14.camel@elmer-P35-DS3P>
	 <BANLkTi=yegCvg5dps_p35FLK3GN7__bYhg@mail.gmail.com>
Content-Type: multipart/mixed; boundary="=-HkaZTZZDN43Z+KS+T8XG"
Date: Thu, 09 Jun 2011 14:58:42 +0200
Message-ID: <1307624322.1868.15.camel@elmer-P35-DS3P>
Mime-Version: 1.0
X-Mailer: Evolution 2.32.2 
X-Virus-Checked: Checked by ClamAV on apache.org

--=-HkaZTZZDN43Z+KS+T8XG
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 7bit

Thank you Trejkaz!
Inspired by your solution I've created the attached extension to the
MFQP, a little different than you proposed. In getFieldQuery, if a
(stop)word is removed by an analyzer for some field, it will return
null, so that term is then ignored (only if using AND as default
operator). Afterwards, the parse method will redo the parsing, now using
the MFQP implementation, and combines both queries by taking the union.
The query 'the best project' now gets parsed as:

(+(title:best description:best authors.name:best) +(title:project
description:project authors.name:project)) (+(authors.name:the)
+(title:best description:best authors.name:best) +(title:project
description:project authors.name:project))

where the fields title and description use a stopfilter. The advantage
of this implementation is that queries only containing stopwords (like
"to be or not to be") are still matched on the non-stopword fields.
Moreover, scoring will probably better match the relevance.

BR,
Elmer



On Thu, 2011-06-09 at 07:32 +1000, Trejkaz wrote:
> On Wed, Jun 8, 2011 at 6:52 PM, Elmer <evanchastelet@gmail.com> wrote:
> > the parsed query becomes:
> >
> > '+(title:the) +(title:project desc:project)'.
> >
> > So, the problem is that docs that have the term 'the' only appearing in
> > their desc field are excluded from the results.
> 
> Subclass MFQP and override getFieldQuery.
> 
> If the field is null then MFQP will hand you back a BooleanQuery - if
> the number of terms in this is lower than the number of fields then
> some of them must have been removed because they were stop words.  If
> this occurs, replace the whole BooleanQuery with a MatchAllDocsQuery.
> 
> Then you will effectively get:
> 
>     +(*:*) +(title:project desc:project)
> 
> And then in getBooleanQuery you could optimise the query to take out
> MatchAllDocsQuery if it isn't necessary in a boolean query.
> 
> TX
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


--=-HkaZTZZDN43Z+KS+T8XG
Content-Disposition: attachment; filename="SpecialMultiFieldQueryParser.java"
Content-Type: text/x-java; name="SpecialMultiFieldQueryParser.java"; charset="UTF-8"
Content-Transfer-Encoding: 7bit


import java.util.ArrayList;
import java.util.List;
import java.util.Map;

import org.apache.lucene.analysis.Analyzer;
import org.apache.lucene.queryParser.MultiFieldQueryParser;
import org.apache.lucene.queryParser.ParseException;
import org.apache.lucene.search.BooleanClause;
import org.apache.lucene.search.BooleanClause.Occur;
import org.apache.lucene.search.Query;
import org.apache.lucene.util.Version;

/**
 * @author Elmer van Chastelet
 * 
 * Special implementation of the MultiFieldQueryParser (based on Lucene 3.1.0 version of this class).
 * It treats a special case, namely when terms are filtered out for some(!) of the fields (when using
 * a per field analyzer wrapper, and not every field analyzer use a stopword filter), and the default
 * operator is set to AND. In that case, the parse method creates 2 sub queries, and takes the union
 * of these. One query will be parsed using the normal implementation in MultiFieldQueryParser, the
 * other query will not contain the clauses for terms that are filtered out for at least 1 field, but
 * not all fields.
 * 
 * Example where fields 'title' and 'description' use a stopword filter:
 * Query to parse: the best project
 * parsed:
 * (
 *  +(title:best description:best authors.name:best)
 *  +(title:project description:project authors.name:project)
 * )(
 *  +(authors.name:the)
 *  +(title:best description:best authors.name:best)
 *  +(title:project description:project authors.name:project)
 * )
 * 
 */
public class SpecialMultiFieldQueryParser extends MultiFieldQueryParser {
	private boolean defaultAndnStopword = false;
	private boolean inQueryFix = false;

	public SpecialMultiFieldQueryParser(Version matchVersion, String[] fields, Analyzer analyzer) {
		super(matchVersion, fields, analyzer);
	}
	
	public SpecialMultiFieldQueryParser(Version matchVersion, String[] fields, Analyzer analyzer,
			Map<String, Float> boosts) {
		super(matchVersion, fields, analyzer, boosts);
	}

	@Override
	protected org.apache.lucene.search.Query getFieldQuery(String field, String queryText, boolean quoted)
			throws ParseException {
		if(inQueryFix)
			return super.getFieldQuery(field, queryText, quoted);
		
	    if (field == null) {
	        List<BooleanClause> clauses = new ArrayList<BooleanClause>();
	        for (int i = 0; i < fields.length; i++) {
	          Query q = super.getFieldQuery(fields[i], queryText, quoted);
	          if (q != null) {
	            //If the user passes a map of boosts
	            if (boosts != null) {
	              //Get the boost from the map and apply them
	              Float boost = boosts.get(fields[i]);
	              if (boost != null) {
	                q.setBoost(boost.floatValue());
	              }
	            }
	            clauses.add(new BooleanClause(q, BooleanClause.Occur.SHOULD));
	          }
	        }
	        if (getDefaultOperator() == AND_OPERATOR && clauses.size() != fields.length){
	        	// happens for stopwords, special treatment needed in case of AND operator
	        	defaultAndnStopword = true;
	        	return null;
	        }
	        
	        if (clauses.size() == 0)  // happens for stopwords, if default operator is OR
	          return null;
	        
	        return getBooleanQuery(clauses, true);
	      }
	      Query q = super.getFieldQuery(field, queryText, quoted);
	      return q;
	}

	@Override
	public Query parse(String query) throws ParseException{
		Query q = super.parse(query);
		if(defaultAndnStopword){
			inQueryFix = true;
			Query fix = super.parse(query);
			List<BooleanClause> clauses = new ArrayList<BooleanClause>();
			clauses.add(new BooleanClause(q,Occur.SHOULD));
			clauses.add(new BooleanClause(fix,Occur.SHOULD));
			return getBooleanQuery(clauses);
		}
		return q;
			
		
	}
}


--=-HkaZTZZDN43Z+KS+T8XG
Content-Type: text/plain; charset=us-ascii


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--=-HkaZTZZDN43Z+KS+T8XG--


From java-user-return-49956-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun  9 16:05:13 2011
Return-Path: <java-user-return-49956-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 26B826B6C
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  9 Jun 2011 16:05:13 +0000 (UTC)
Received: (qmail 60032 invoked by uid 500); 9 Jun 2011 16:05:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59983 invoked by uid 500); 9 Jun 2011 16:05:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 47050 invoked by uid 99); 9 Jun 2011 15:10:55 -0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of vbsowmya@gmail.com designates 209.85.213.48 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:from:date:message-id:subject:to
         :content-type;
        bh=qd8PnJ3z/5CEJZJv3PPlhsO40PsRboKIoiJcKsMBck8=;
        b=acxH+y8zI80PKyXsRwXzzfRbGoypeCot/dm2uLQQJAPlt4Rgyw8h5NUFW+NlxrjVgi
         wfBwsh1ElCLlfpza1OIysazVRU4FRMvGSc2q/Xno3NK3cqu8Vapv2foDrkOfe2hHoNoU
         xFlAuV/H22uVsX7g6DAlZp/O53Ib4JjSemuUE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=SKQjhyLBvAM5UovO5zwXwsqoBfKg2gL8ig9SDH34ger04enHq0FyWxxawPIFGpoGNh
         nv0lhe/95UodEV7C/Bl010OG3TQsBTf396givSjsy+xy6Z02CW465nYp3pNc7wxSp3oK
         M3YTvgCCfnNZNit9Zcm+8R3S/c1YGpsCgRQhY=
MIME-Version: 1.0
From: "Sowmya V.B." <vbsowmya@gmail.com>
Date: Thu, 9 Jun 2011 17:10:06 +0200
Message-ID: <BANLkTi=QWNJr2zP8GXM28fwze0x6GRN-Gw@mail.gmail.com>
Subject: Boosting a document at query time, based on a field value/range
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd4ca4656132104a548da72
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd4ca4656132104a548da72
Content-Type: text/plain; charset=UTF-8

Hi All

I have joined the group only today..and began working with lucene only
recently.

My problem: I want to boost the ranking of certain documents, based on the
values of certain fields.

For example, if the field has  a range of values from 0 to 100 and the user
chooses something like 20 to 30, as an option, along with the query; I want
the documents which satisfy that condition (The field value being between 20
and 30) to get a boost during ranking.

Is there a way to do that in Lucene? I could not find an understandable
explanation in the past mails about this. Hence, starting a fresh thread.

Sowmya.

-- 
Sowmya V.B.
----------------------------------------------------
Losing optimism is blasphemy!
http://vbsowmya.wordpress.com
----------------------------------------------------

--000e0cd4ca4656132104a548da72--

From java-user-return-49957-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun  9 16:36:27 2011
Return-Path: <java-user-return-49957-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 79BF9659E
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  9 Jun 2011 16:36:27 +0000 (UTC)
Received: (qmail 58110 invoked by uid 500); 9 Jun 2011 16:36:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58065 invoked by uid 500); 9 Jun 2011 16:36:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58057 invoked by uid 99); 9 Jun 2011 16:36:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Jun 2011 16:36:25 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Jun 2011 16:36:18 +0000
Received: by qyk2 with SMTP id 2so3153763qyk.14
        for <java-user@lucene.apache.org>; Thu, 09 Jun 2011 09:35:57 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type:content-transfer-encoding;
        bh=BzFxIKn2KZTRTVC6rDtHMJ7C+riOnafouguURmmmKqU=;
        b=q7yy3WG9bnEMFHPK8TAl9TAShfHag/zOJLRZi65cq3lPQXOJN3M2sXmDPFxHoVUD5Y
         aUrG89xkMg4mADDuj+I/mDI0t3sqokKbGIjZ7TTz3o2VRQbvnD9tDqCvo+gxtWWb8Djg
         oNzbK8SeiaFWSLCVkCAAUCSzEdxUuTdXSIXqg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=Hif8REvfOAUACrE7Vc1JVYYWMk4QLH81YmdSesqndEvM9DqLR+lo2NTH8+Kue+HQaG
         ajCoohV7MI+90l3wChyYV2j1LvXfPnJ21C4vDlD6Ra15QMXlil9FtlANmTYKzXl6qTiX
         r7RZYV835QcLcgJ5++JEI7CM4Ps4pPauyYPuY=
MIME-Version: 1.0
Received: by 10.224.187.194 with SMTP id cx2mr707464qab.211.1307637357356;
 Thu, 09 Jun 2011 09:35:57 -0700 (PDT)
Received: by 10.229.239.13 with HTTP; Thu, 9 Jun 2011 09:35:57 -0700 (PDT)
In-Reply-To: <BANLkTi=QWNJr2zP8GXM28fwze0x6GRN-Gw@mail.gmail.com>
References: <BANLkTi=QWNJr2zP8GXM28fwze0x6GRN-Gw@mail.gmail.com>
Date: Thu, 9 Jun 2011 12:35:57 -0400
Message-ID: <BANLkTiks71_RYv8iTrjOwPwPy6EPCms2rQ@mail.gmail.com>
Subject: Re: Boosting a document at query time, based on a field value/range
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

I take it from this that you want documents with values #outside# 20-30
to still be found? In that case you can do something like add a clause like=
:

OR field:[20 TO 30]^10

or similar.

Best
Erick

BTW, is there a reason you decided not to use Solr? In many ways it's
easier than straight Lucene....

On Thu, Jun 9, 2011 at 11:10 AM, Sowmya V.B. <vbsowmya@gmail.com> wrote:
> Hi All
>
> I have joined the group only today..and began working with lucene only
> recently.
>
> My problem: I want to boost the ranking of certain documents, based on th=
e
> values of certain fields.
>
> For example, if the field has =A0a range of values from 0 to 100 and the =
user
> chooses something like 20 to 30, as an option, along with the query; I wa=
nt
> the documents which satisfy that condition (The field value being between=
 20
> and 30) to get a boost during ranking.
>
> Is there a way to do that in Lucene? I could not find an understandable
> explanation in the past mails about this. Hence, starting a fresh thread.
>
> Sowmya.
>
> --
> Sowmya V.B.
> ----------------------------------------------------
> Losing optimism is blasphemy!
> http://vbsowmya.wordpress.com
> ----------------------------------------------------
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49958-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jun 10 05:39:59 2011
Return-Path: <java-user-return-49958-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 24CEA40FB
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 10 Jun 2011 05:39:59 +0000 (UTC)
Received: (qmail 53239 invoked by uid 500); 10 Jun 2011 05:39:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53158 invoked by uid 500); 10 Jun 2011 05:39:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53147 invoked by uid 99); 10 Jun 2011 05:39:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Jun 2011 05:39:49 +0000
X-ASF-Spam-Status: No, hits=2.0 required=5.0
	tests=FREEMAIL_FROM,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Jun 2011 05:39:42 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <mailformailinglists@yahoo.de>)
	id 1QUuRF-00071Y-BT
	for java-user@lucene.apache.org; Thu, 09 Jun 2011 22:39:21 -0700
Date: Thu, 9 Jun 2011 22:39:21 -0700 (PDT)
From: Em <mailformailinglists@yahoo.de>
To: java-user@lucene.apache.org
Message-ID: <1307684361346-3047408.post@n3.nabble.com>
In-Reply-To: <1307601084625-3042678.post@n3.nabble.com>
References: <1307601084625-3042678.post@n3.nabble.com>
Subject: Re: Telling query-time QueryParser how to work by a TokenFilter
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi list,

if one read line 470 and the following (getFieldQuery) of the queryParser
class, one can see, how some attributes are already used to parse the
query-string correctly. At the moment, I see almost no chance to implement
the wanted behaviour without doing copy & paste on the code for an own
parse()-method.

Please, let me know if you see some other possibilities.

Regards,
Em

--
View this message in context: http://lucene.472066.n3.nabble.com/Telling-query-time-QueryParser-how-to-work-by-a-TokenFilter-tp3042678p3047408.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49959-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jun 10 08:25:07 2011
Return-Path: <java-user-return-49959-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 894BD444F
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 10 Jun 2011 08:25:07 +0000 (UTC)
Received: (qmail 49498 invoked by uid 500); 10 Jun 2011 08:25:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49443 invoked by uid 500); 10 Jun 2011 08:25:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49435 invoked by uid 99); 10 Jun 2011 08:25:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Jun 2011 08:25:04 +0000
X-ASF-Spam-Status: No, hits=3.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of pranavgoyal40341@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Jun 2011 08:24:56 +0000
Received: by bwz8 with SMTP id 8so1291492bwz.35
        for <java-user@lucene.apache.org>; Fri, 10 Jun 2011 01:24:36 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:from:date:message-id:subject:to
         :content-type;
        bh=3u0PHf34qwOYL8B2o0tDGE7Dcg2w5b3Gzq4pihj8vfc=;
        b=Q3rwxY0D8Acm7bKTKEw3rmLgb04+ImZ+o+NJj6ng11t89lolGbpx57xvAhX23TMkTo
         IKzm4Y7w9vioHtgfZROlF6URF+8iVo/SBTruhJ7gllfsuQJjPy8p1Vi7QUxOzacRYyBo
         XEXC4S4KMGxp9Tnw5qR8fhzu2Sotu3Jf6mU/8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=PSDVEM4b8cztRAnJ0Zlok6UlUfIbsHFc4HYl4xW05NX3igbGFFN16bCJZhtst2kXft
         DAmpLeMj/5I4CTUVpNzve2g/GWBEvIuq52qc8uI17Ij/SsCD7FFJ0TSCV9v97wk9/crH
         XGx8SO6ghU2M5pgW5nbG60lx+C/Hrj/ulEVCk=
Received: by 10.204.76.83 with SMTP id b19mr1619461bkk.126.1307694276117; Fri,
 10 Jun 2011 01:24:36 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.112.79 with HTTP; Fri, 10 Jun 2011 01:24:16 -0700 (PDT)
From: Pranav goyal <pranavgoyal40341@gmail.com>
Date: Fri, 10 Jun 2011 13:54:16 +0530
Message-ID: <BANLkTinNhGR7gExTLa-rwayyJTNUU2u7yA@mail.gmail.com>
Subject: Updating a document
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636499fbdcd838b04a5574c30
X-Virus-Checked: Checked by ClamAV on apache.org

--001636499fbdcd838b04a5574c30
Content-Type: text/plain; charset=ISO-8859-1

Hi,

I tried 3-4 ways to delete a document but still no results. I am using
Lucene 3.1

I used writer.UpdateDocuments(Term term, Document d)
as well as write.addDocument(d); and after that writer.deleteDocuments(d);

Using both I am not able to delete the previous document.

Is there any problem in my code?

String q1 = contract.getDocId();
Term term = new Term(contract.getDocId()); // where DocId is my field
try {
            writer.deleteDocuments(term);
            System.out.println("Deleting Document with the term "+term);
        } catch (IOException e) {
            e.printStackTrace();  //To change body of catch statement use
File | Settings | File Templates.
          }
d.add(new Field("DocId",q1,Field.Store.YES,Field.Index.NOT_ANALYZED));
writer.addDocument(d);
writer.optimize() ;
writer.close();


Same is the result when I use writer.updateDocument(term,d)

--001636499fbdcd838b04a5574c30--

From java-user-return-49960-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jun 10 08:39:39 2011
Return-Path: <java-user-return-49960-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A0C504C7E
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 10 Jun 2011 08:39:39 +0000 (UTC)
Received: (qmail 68130 invoked by uid 500); 10 Jun 2011 08:39:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68076 invoked by uid 500); 10 Jun 2011 08:39:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68066 invoked by uid 99); 10 Jun 2011 08:39:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Jun 2011 08:39:37 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of vbsowmya@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Jun 2011 08:39:29 +0000
Received: by vws7 with SMTP id 7so3162082vws.35
        for <java-user@lucene.apache.org>; Fri, 10 Jun 2011 01:39:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=bv91h1gOEHLuM61SN42ziFJzsjNiWhUkMNudXRRDysk=;
        b=EhaYI8npSRcrIoT/jWrpVc0slv2oRVVbG4C2x+HBB9GINrm+xEknhmSKReDYmKcLx+
         K8DhSlw7BXy2HGghdifjoxiSmnTpwGZv8UhJLbC79RWnh7Zudo2JXZnGLVidSgDcODLI
         nH85BvsB/FlZlJbozDC6Q7zCQWpI2vYphhvuo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=Rpya6rXlOEEvrbn/dfRTVXbf7eGAV5mCoqigPS5JzLY9mexZ+9raLJA7lZmpiVfKU2
         V2xxgBvNJVMmXqXXht96RHcpZqW/6JsTcsooVnqYfXy8EuQGeNiqttqYTSE/VMDVNlRT
         0fGBZo1iBzFZFnYkFg1HvwifmndJ4E2N8J+Uw=
Received: by 10.236.170.68 with SMTP id o44mr2085488yhl.121.1307695148078;
 Fri, 10 Jun 2011 01:39:08 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.146.82.5 with HTTP; Fri, 10 Jun 2011 01:38:48 -0700 (PDT)
In-Reply-To: <BANLkTi=QWNJr2zP8GXM28fwze0x6GRN-Gw@mail.gmail.com>
References: <BANLkTi=QWNJr2zP8GXM28fwze0x6GRN-Gw@mail.gmail.com>
From: "Sowmya V.B." <vbsowmya@gmail.com>
Date: Fri, 10 Jun 2011 10:38:48 +0200
Message-ID: <BANLkTik8c15OyjQAEP+d_q9HX=9x7sXOxQ@mail.gmail.com>
Subject: Re: Boosting a document at query time, based on a field value/range
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf303f6d9ec696dd04a557804e
X-Virus-Checked: Checked by ClamAV on apache.org

--20cf303f6d9ec696dd04a557804e
Content-Type: text/plain; charset=UTF-8

Hi Erick

Thanks for the response.

I would want the documents with values within #20-30# be ranked above the
documents with some other values.
Well, since there might be a case where there are no documents in that
range, I would also prefer to have other documents listed too, somewhere
lower down the rankings.

Also, I don't want to do a simple sort on the results what lucene gives,
with its own ranking function.
I am looking for a possibility of boosting a given document at query-time,
based on the values of a particular field : instead of plainly sorting the
normal lucene results based on this field.
Is that possible, without going in to the scoring function?

Sowmya.

*************
I take it from this that you want documents with values #outside# 20-30
to still be found? In that case you can do something like add a clause like:


OR *field*:[20 TO 30]^10

or similar.

Best
Erick

On Thu, Jun 9, 2011 at 5:10 PM, Sowmya V.B. <vbsowmya@gmail.com> wrote:

> Hi All
>
> I have joined the group only today..and began working with lucene only
> recently.
>
> My problem: I want to boost the ranking of certain documents, based on the
> values of certain fields.
>
> For example, if the field has  a range of values from 0 to 100 and the user
> chooses something like 20 to 30, as an option, along with the query; I want
> the documents which satisfy that condition (The field value being between 20
> and 30) to get a boost during ranking.
>
> Is there a way to do that in Lucene? I could not find an understandable
> explanation in the past mails about this. Hence, starting a fresh thread.
>
> Sowmya.
>
> --
> Sowmya V.B.
> ----------------------------------------------------
> Losing optimism is blasphemy!
> http://vbsowmya.wordpress.com
> ----------------------------------------------------
>



-- 
Sowmya V.B.
----------------------------------------------------
Losing optimism is blasphemy!
http://vbsowmya.wordpress.com
----------------------------------------------------

--20cf303f6d9ec696dd04a557804e--

From java-user-return-49961-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jun 10 09:41:21 2011
Return-Path: <java-user-return-49961-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id EE97F423D
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 10 Jun 2011 09:41:20 +0000 (UTC)
Received: (qmail 70416 invoked by uid 500); 10 Jun 2011 09:41:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70379 invoked by uid 500); 10 Jun 2011 09:41:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70371 invoked by uid 99); 10 Jun 2011 09:41:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Jun 2011 09:41:18 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [130.225.24.68] (HELO sbexch03.sb.statsbiblioteket.dk) (130.225.24.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Jun 2011 09:41:09 +0000
Received: from [130.225.25.23] (130.225.25.23) by
 sbexch03.sb.statsbiblioteket.dk (130.225.24.68) with Microsoft SMTP Server id
 8.3.159.2; Fri, 10 Jun 2011 11:40:49 +0200
Subject: Re: Boosting a document at query time, based on a field value/range
From: Toke Eskildsen <te@statsbiblioteket.dk>
Reply-To: te@statsbiblioteket.dk
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <BANLkTik8c15OyjQAEP+d_q9HX=9x7sXOxQ@mail.gmail.com>
References: <BANLkTi=QWNJr2zP8GXM28fwze0x6GRN-Gw@mail.gmail.com>
	 <BANLkTik8c15OyjQAEP+d_q9HX=9x7sXOxQ@mail.gmail.com>
Content-Type: text/plain; charset="UTF-8"
Organization: State and University Library, Denmark
Date: Fri, 10 Jun 2011 11:40:48 +0200
Message-ID: <1307698848.766.1550.camel@te-prime>
MIME-Version: 1.0
X-Mailer: Evolution 2.28.3 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Fri, 2011-06-10 at 10:38 +0200, Sowmya V.B. wrote:
> I am looking for a possibility of boosting a given document at query-time,
> based on the values of a particular field : instead of plainly sorting the
> normal lucene results based on this field.

I think you misunderstand Eric's answer, as his suggestion does exactly
what you ask for. Have you tried the "OR *field*:[20 TO 30]^10" method?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49962-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jun 10 09:52:05 2011
Return-Path: <java-user-return-49962-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id F3B1749DF
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 10 Jun 2011 09:52:04 +0000 (UTC)
Received: (qmail 91154 invoked by uid 500); 10 Jun 2011 09:52:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91099 invoked by uid 500); 10 Jun 2011 09:52:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91090 invoked by uid 99); 10 Jun 2011 09:52:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Jun 2011 09:52:02 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Jun 2011 09:51:55 +0000
Received: by iwr19 with SMTP id 19so3187875iwr.35
        for <java-user@lucene.apache.org>; Fri, 10 Jun 2011 02:51:34 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=HYrcM9xcMQTox3GjgXk74ta1hVMJnV7hPMgmwZnvOZA=;
        b=A8QKh1m3tlLtOSYoPwZHp9BqDSt/rrhqThvw0DoiCMyYHcg7G/LFu3SUw/Ygh+hIyl
         dr41zOn9J2DZ85knXekDRgm6d0wUXaKbQZJ0j8Z1oq080CVeiWuctYl9FehPUu+OALZP
         RwSB+hlo/eQACnZUCAKt/xwTZAvF0wrIbwSuM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=Baex+sYyDZko5okmIozHve8nafLL1Io3q+ZhS7htrCnXVVu2nJoU1LyVz4Z5txTYre
         fzY8dDGJNwYM1BFgMZ0/A6QrgGngfSTPcz1qHf5snFEmBqT+qsgoGH2cAUXUYgJ3u6Zy
         hOt8AIS4wZyPw8wpEyKv/0j1rZH3HblpBzVIs=
Received: by 10.231.25.94 with SMTP id y30mr2259922ibb.61.1307699494119; Fri,
 10 Jun 2011 02:51:34 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.199.148 with HTTP; Fri, 10 Jun 2011 02:51:14 -0700 (PDT)
In-Reply-To: <BANLkTinNhGR7gExTLa-rwayyJTNUU2u7yA@mail.gmail.com>
References: <BANLkTinNhGR7gExTLa-rwayyJTNUU2u7yA@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Fri, 10 Jun 2011 10:51:14 +0100
Message-ID: <BANLkTi=3PTjL2KspTNYdztB3GKh+MhMaYA@mail.gmail.com>
Subject: Re: Updating a document
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Try Term term =3D new Term("DocId", contract.getDocId());.  See the
javadocs for the difference between that and what you have.

You don't need to call optimize() all the time, it at all.


--
Ian.


On Fri, Jun 10, 2011 at 9:24 AM, Pranav goyal
<pranavgoyal40341@gmail.com> wrote:
> Hi,
>
> I tried 3-4 ways to delete a document but still no results. I am using
> Lucene 3.1
>
> I used writer.UpdateDocuments(Term term, Document d)
> as well as write.addDocument(d); and after that writer.deleteDocuments(d)=
;
>
> Using both I am not able to delete the previous document.
>
> Is there any problem in my code?
>
> String q1 =3D contract.getDocId();
> Term term =3D new Term(contract.getDocId()); // where DocId is my field
> try {
> =A0 =A0 =A0 =A0 =A0 =A0writer.deleteDocuments(term);
> =A0 =A0 =A0 =A0 =A0 =A0System.out.println("Deleting Document with the ter=
m "+term);
> =A0 =A0 =A0 =A0} catch (IOException e) {
> =A0 =A0 =A0 =A0 =A0 =A0e.printStackTrace(); =A0//To change body of catch =
statement use
> File | Settings | File Templates.
> =A0 =A0 =A0 =A0 =A0}
> d.add(new Field("DocId",q1,Field.Store.YES,Field.Index.NOT_ANALYZED));
> writer.addDocument(d);
> writer.optimize() ;
> writer.close();
>
>
> Same is the result when I use writer.updateDocument(term,d)
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49963-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jun 10 10:21:15 2011
Return-Path: <java-user-return-49963-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 069C14C5F
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 10 Jun 2011 10:21:15 +0000 (UTC)
Received: (qmail 35439 invoked by uid 500); 10 Jun 2011 10:21:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35388 invoked by uid 500); 10 Jun 2011 10:21:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35380 invoked by uid 99); 10 Jun 2011 10:21:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Jun 2011 10:21:12 +0000
X-ASF-Spam-Status: No, hits=3.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of pranavgoyal40341@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Jun 2011 10:21:04 +0000
Received: by bwz8 with SMTP id 8so1383420bwz.35
        for <java-user@lucene.apache.org>; Fri, 10 Jun 2011 03:20:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=GtQfU2V/iAsp4eHfvR49kcnSsxyYQ4J8EzAkiiRkO60=;
        b=m9H/UO7ikvarh+we+A34Vy9tk0wXrOERU/YIX/y9iP1G1zD/nTlLib04vKjL8Bcf04
         S/IAq3JsBvH5QfZJrO02w3pln+ObxWzmgb+4gSPmh+USugEP3TgQPNWWWySYXtV7lOSy
         LxfefWCQwzC86445a9ZO3dmjEIeMcnN69nx0k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=XkkNLOl7wuGDvQU/mqs7R3Q7U9OIdQliktUZwYBn6pPsnsgzMfsnCSckvz40+DFH1t
         Ji5P84r1mmxweHhlQdLQicsDxhbKCw9/IJTIdp1BtwTHzFK7kMGCJ737VoXJTmPsfw9c
         FIyF0VCK9ONByFI4zdNUx1CPFRjWV/PfCWCao=
Received: by 10.204.26.200 with SMTP id f8mr1682561bkc.99.1307701244360; Fri,
 10 Jun 2011 03:20:44 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.112.79 with HTTP; Fri, 10 Jun 2011 03:20:24 -0700 (PDT)
In-Reply-To: <BANLkTi=3PTjL2KspTNYdztB3GKh+MhMaYA@mail.gmail.com>
References: <BANLkTinNhGR7gExTLa-rwayyJTNUU2u7yA@mail.gmail.com> <BANLkTi=3PTjL2KspTNYdztB3GKh+MhMaYA@mail.gmail.com>
From: Pranav goyal <pranavgoyal40341@gmail.com>
Date: Fri, 10 Jun 2011 15:50:24 +0530
Message-ID: <BANLkTimRWcMTHa23k5S6e5ChxKBScdaB7w@mail.gmail.com>
Subject: Re: Updating a document
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000325554dbe247a5b04a558ec40
X-Virus-Checked: Checked by ClamAV on apache.org

--000325554dbe247a5b04a558ec40
Content-Type: text/plain; charset=ISO-8859-1

Hi Ian,

Thanks for your reply. But even this isn't working.
My document is not getting deleted.

Can you please suggest me something else?



On Fri, Jun 10, 2011 at 3:21 PM, Ian Lea <ian.lea@gmail.com> wrote:

> Try Term term = new Term("DocId", contract.getDocId());.  See the
> javadocs for the difference between that and what you have.
>
> You don't need to call optimize() all the time, it at all.
>
>
> --
> Ian.
>
>
> On Fri, Jun 10, 2011 at 9:24 AM, Pranav goyal
> <pranavgoyal40341@gmail.com> wrote:
> > Hi,
> >
> > I tried 3-4 ways to delete a document but still no results. I am using
> > Lucene 3.1
> >
> > I used writer.UpdateDocuments(Term term, Document d)
> > as well as write.addDocument(d); and after that
> writer.deleteDocuments(d);
> >
> > Using both I am not able to delete the previous document.
> >
> > Is there any problem in my code?
> >
> > String q1 = contract.getDocId();
> > Term term = new Term(contract.getDocId()); // where DocId is my field
> > try {
> >            writer.deleteDocuments(term);
> >            System.out.println("Deleting Document with the term "+term);
> >        } catch (IOException e) {
> >            e.printStackTrace();  //To change body of catch statement use
> > File | Settings | File Templates.
> >          }
> > d.add(new Field("DocId",q1,Field.Store.YES,Field.Index.NOT_ANALYZED));
> > writer.addDocument(d);
> > writer.optimize() ;
> > writer.close();
> >
> >
> > Same is the result when I use writer.updateDocument(term,d)
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
I'm very responsible, when ever something goes wrong they always say I'm
responsible --

--000325554dbe247a5b04a558ec40--

From java-user-return-49964-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jun 10 10:50:16 2011
Return-Path: <java-user-return-49964-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D003F4F40
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 10 Jun 2011 10:50:16 +0000 (UTC)
Received: (qmail 81725 invoked by uid 500); 10 Jun 2011 10:50:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81686 invoked by uid 500); 10 Jun 2011 10:50:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81678 invoked by uid 99); 10 Jun 2011 10:50:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Jun 2011 10:50:14 +0000
X-ASF-Spam-Status: No, hits=3.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of pranavgoyal40341@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Jun 2011 10:50:08 +0000
Received: by bwz8 with SMTP id 8so1407676bwz.35
        for <java-user@lucene.apache.org>; Fri, 10 Jun 2011 03:49:46 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=y8/YOS0YqboHE4MUtvpSS0mZj+jkeRjFSKNw4HvAbbM=;
        b=QlsPbGr6jBKHTSbbrUGI5RknxeCNAhsOv/pNnPJfAeykN+nv6FeyrQ/9ivG4NX0XYb
         v+wrs8AqbYcvnZ69/Z2Voggk7swTgsNCXqOrOchg5pFJn6wN2i+yA4hnKZuYc4dc29ZE
         GWuoIjrL2yya83MWTZ/5FryRXShmA9Qh3Cot0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=XgDiOZUwLDjlRhh+fdZiVMCn/wO1IjtFNYt0ojkU7WeQSCo7nBzDbbTkPkPghKQ+lO
         hCtJJIIAJFEnj/u3O9JKXcjjFT2ftDqj6O5Y7bwHtsSNaRLe2iicDXkO1iOCeDzPXnlK
         iAi6Gu+Mb/ktQVGtbP3x7TjGMcR7SoEd6u4Oc=
Received: by 10.204.76.83 with SMTP id b19mr1737364bkk.126.1307702986568; Fri,
 10 Jun 2011 03:49:46 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.112.79 with HTTP; Fri, 10 Jun 2011 03:49:26 -0700 (PDT)
In-Reply-To: <BANLkTimRWcMTHa23k5S6e5ChxKBScdaB7w@mail.gmail.com>
References: <BANLkTinNhGR7gExTLa-rwayyJTNUU2u7yA@mail.gmail.com>
 <BANLkTi=3PTjL2KspTNYdztB3GKh+MhMaYA@mail.gmail.com> <BANLkTimRWcMTHa23k5S6e5ChxKBScdaB7w@mail.gmail.com>
From: Pranav goyal <pranavgoyal40341@gmail.com>
Date: Fri, 10 Jun 2011 16:19:26 +0530
Message-ID: <BANLkTi=jzFFw2Bj2YS-VfV8aGcNo9PNMzQ@mail.gmail.com>
Subject: Re: Updating a document
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636499fbdfc732f04a5595331

--001636499fbdfc732f04a5595331
Content-Type: text/plain; charset=ISO-8859-1

When I am using a deleteAll() instead of deleteDocuments();

it's working fine.
What can be the problem. Still not able to figure it out.

On Fri, Jun 10, 2011 at 3:50 PM, Pranav goyal <pranavgoyal40341@gmail.com>wrote:

> Hi Ian,
>
> Thanks for your reply. But even this isn't working.
> My document is not getting deleted.
>
> Can you please suggest me something else?
>
>
>
>
> On Fri, Jun 10, 2011 at 3:21 PM, Ian Lea <ian.lea@gmail.com> wrote:
>
>> Try Term term = new Term("DocId", contract.getDocId());.  See the
>> javadocs for the difference between that and what you have.
>>
>> You don't need to call optimize() all the time, it at all.
>>
>>
>> --
>> Ian.
>>
>>
>> On Fri, Jun 10, 2011 at 9:24 AM, Pranav goyal
>> <pranavgoyal40341@gmail.com> wrote:
>> > Hi,
>> >
>> > I tried 3-4 ways to delete a document but still no results. I am using
>> > Lucene 3.1
>> >
>> > I used writer.UpdateDocuments(Term term, Document d)
>> > as well as write.addDocument(d); and after that
>> writer.deleteDocuments(d);
>> >
>> > Using both I am not able to delete the previous document.
>> >
>> > Is there any problem in my code?
>> >
>> > String q1 = contract.getDocId();
>> > Term term = new Term(contract.getDocId()); // where DocId is my field
>> > try {
>> >            writer.deleteDocuments(term);
>> >            System.out.println("Deleting Document with the term "+term);
>> >        } catch (IOException e) {
>> >            e.printStackTrace();  //To change body of catch statement use
>> > File | Settings | File Templates.
>> >          }
>> > d.add(new Field("DocId",q1,Field.Store.YES,Field.Index.NOT_ANALYZED));
>> > writer.addDocument(d);
>> > writer.optimize() ;
>> > writer.close();
>> >
>> >
>> > Same is the result when I use writer.updateDocument(term,d)
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> --
> I'm very responsible, when ever something goes wrong they always say I'm
> responsible --
>



-- 
I'm very responsible, when ever something goes wrong they always say I'm
responsible --

--001636499fbdfc732f04a5595331--

From java-user-return-49965-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jun 10 11:15:15 2011
Return-Path: <java-user-return-49965-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 473574C31
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 10 Jun 2011 11:15:15 +0000 (UTC)
Received: (qmail 14641 invoked by uid 500); 10 Jun 2011 11:15:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14602 invoked by uid 500); 10 Jun 2011 11:15:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14594 invoked by uid 99); 10 Jun 2011 11:15:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Jun 2011 11:15:12 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dannylade@googlemail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Jun 2011 11:15:07 +0000
Received: by qyk2 with SMTP id 2so3655946qyk.14
        for <java-user@lucene.apache.org>; Fri, 10 Jun 2011 04:14:46 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=gP3mTLODFUxMGlxZrayw5G1hCoCJm0cI7yBXOzusrPI=;
        b=wJXkKS/SA8VnLvvMJiiGvocO2gPjMEE/R6nV1FdpVmvzTBB8z+U/XyfX7e+MhM/Hao
         rWkX3EC/A4CaszA9t25ZUgIi/EWEtQwvFF6jGhMwvK4GarAISa/W7jUhUf21ivEUXIvh
         Ht95NVZHM6YiFea2ykdfYn8g7RolTiU8wew8g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=wm7NDpP5I2VTXZb5cnuu9C+RsjuF1YTRHnLXhA3UwGK0+uQDLr8ar0oWDHnaD8aLUj
         uhAkMcEKb+K7e7n6heIiP3MyOtJ4R15RIEtMOCC6eRIeZj4SzIf+lIJXBf+Nd/AwR/iA
         vCzQym4UQmTQq4+7cI9ZMsCi2qXi3h8q+bnt4=
MIME-Version: 1.0
Received: by 10.229.7.137 with SMTP id d9mr1441851qcd.251.1307704486497; Fri,
 10 Jun 2011 04:14:46 -0700 (PDT)
Received: by 10.229.241.206 with HTTP; Fri, 10 Jun 2011 04:14:46 -0700 (PDT)
In-Reply-To: <BANLkTinNhGR7gExTLa-rwayyJTNUU2u7yA@mail.gmail.com>
References: <BANLkTinNhGR7gExTLa-rwayyJTNUU2u7yA@mail.gmail.com>
Date: Fri, 10 Jun 2011 13:14:46 +0200
Message-ID: <BANLkTikr9si86+O-ABFGy1F6=9ekmeoaAA@mail.gmail.com>
Subject: Re: Updating a document
From: Danny Lade <dannylade@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015175df25a638cfa04a559ad15

--0015175df25a638cfa04a559ad15
Content-Type: text/plain; charset=ISO-8859-1

You delete it first using your id:

>            writer.deleteDocuments(term);
>

and then re-add it with the same id:

writer.addDocument(d);
>

Please explain:
How looks your document BEFORE you try to delete it? (Which fields has it?)

Greetings Danny

--0015175df25a638cfa04a559ad15--

From java-user-return-49966-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jun 10 11:25:38 2011
Return-Path: <java-user-return-49966-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5C98A4548
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 10 Jun 2011 11:25:38 +0000 (UTC)
Received: (qmail 30513 invoked by uid 500); 10 Jun 2011 11:25:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30439 invoked by uid 500); 10 Jun 2011 11:25:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30431 invoked by uid 99); 10 Jun 2011 11:25:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Jun 2011 11:25:36 +0000
X-ASF-Spam-Status: No, hits=3.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of pranavgoyal40341@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Jun 2011 11:25:29 +0000
Received: by bwz8 with SMTP id 8so1440245bwz.35
        for <java-user@lucene.apache.org>; Fri, 10 Jun 2011 04:25:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=WGZaTM/+xCDaQsxfP/FlT32Dxxf0nNFGVakr9NW7OIw=;
        b=f2wuNoMJspy4xVq2Q7yvT0dUj+gYGnr7vYh6EETuCzypE67AKTGpFGwoF5d5T3RA5A
         TNP+RXLnVl3SYHgEvgjAxweUjIG6+SKOUApy3gYDf8D5gSoHoLKJigtMu6k8diDBrIMi
         u8LJZjdwbLtWjbmlPWmtaCp52h3z7WCIN0z1A=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=o4Dwz+tANiolSvH+KhrHSzT8WghrWIenTmoeo74sMaXDPUQXoaHthBX9o5JUmaSqn0
         Jkb5UQi3bGdysknWmyaB5rrXJ/VvCevoI408Jp6PIClJAGhwQwe5R/eBhSwEhynY9n7F
         4kByGoibG5fAPBNOzTN99iYVsKR4As4E1dQ7c=
Received: by 10.204.26.200 with SMTP id f8mr1733390bkc.99.1307705109204; Fri,
 10 Jun 2011 04:25:09 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.112.79 with HTTP; Fri, 10 Jun 2011 04:24:49 -0700 (PDT)
In-Reply-To: <BANLkTikr9si86+O-ABFGy1F6=9ekmeoaAA@mail.gmail.com>
References: <BANLkTinNhGR7gExTLa-rwayyJTNUU2u7yA@mail.gmail.com> <BANLkTikr9si86+O-ABFGy1F6=9ekmeoaAA@mail.gmail.com>
From: Pranav goyal <pranavgoyal40341@gmail.com>
Date: Fri, 10 Jun 2011 16:54:49 +0530
Message-ID: <BANLkTimMsxTc=W8zFjES5NvhBvPsK2w_sw@mail.gmail.com>
Subject: Re: Updating a document
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000325554dbe814fc704a559d2ae
X-Virus-Checked: Checked by ClamAV on apache.org

--000325554dbe814fc704a559d2ae
Content-Type: text/plain; charset=ISO-8859-1

Hi Danny,

I have explained it above.

It has many fields out of which DocId is the field which I am storing as
well as indexing. While other fields I am just storing.
And Each document has unique DocId.

d=new Document();
File indexDir = new File("./index-dir");
StandardAnalyzer analyzer = new StandardAnalyzer(Version.LUCENE_31);
IndexWriterConfig conf = new IndexWriterConfig(Version.LUCENE_31, analyzer);
try {
      writer = new IndexWriter(FSDirectory.open(indexDir),conf);
} catch (IOException e1) {
     e1.printStackTrace();
}
String q1 = contract.getDocId();    // Here I am getting my DocId
Term term = new Term("DocID",contract.getDocId());


Rest I have stated above.



On Fri, Jun 10, 2011 at 4:44 PM, Danny Lade <dannylade@googlemail.com>wrote:

> You delete it first using your id:
>
> >            writer.deleteDocuments(term);
> >
>
> and then re-add it with the same id:
>
> writer.addDocument(d);
> >
>
> Please explain:
> How looks your document BEFORE you try to delete it? (Which fields has it?)
>
> Greetings Danny
>



-- 
I'm very responsible, when ever something goes wrong they always say I'm
responsible --

--000325554dbe814fc704a559d2ae--

From java-user-return-49967-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jun 10 11:35:38 2011
Return-Path: <java-user-return-49967-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A7E264FD3
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 10 Jun 2011 11:35:38 +0000 (UTC)
Received: (qmail 51363 invoked by uid 500); 10 Jun 2011 11:35:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51325 invoked by uid 500); 10 Jun 2011 11:35:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51317 invoked by uid 99); 10 Jun 2011 11:35:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Jun 2011 11:35:36 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.210.176 as permitted sender)
Received: from [209.85.210.176] (HELO mail-iy0-f176.google.com) (209.85.210.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Jun 2011 11:35:30 +0000
Received: by iym1 with SMTP id 1so3247881iym.35
        for <java-user@lucene.apache.org>; Fri, 10 Jun 2011 04:35:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=fxB/auu+D7QvVzCK2jTsl2JNvtjk5fjgeJnutHmug8U=;
        b=I6LdpbhRVo1JQwRvfeqVP3fueU0YqVE8zLvYKgHj9VpT/CNgFvrxjH5CnprGC0Iyl9
         NlKSNUmNFBQond4IlZU0mn1mjZvd6igpaf2IifsJ16vxy81EhOTIiQ0T8JWEVQ3OS/Dt
         3p5EAMMTMkMoPRNfUCnjYWu+2VJxbthqe12yI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=lR9Qw9JpJ44gKh9N/3kTsJH+YQkrlCToGSGz+p0abqBAMaYMw4uCI/oPcWChjZllau
         TPkRIG+AlLJWtm5awCFWWZD3AQCOhcba/jReBq6yrGswtCyQdGjmm7EaU09TmX5Bi6yS
         T7HE2UbSjFA9S2w64y/ckmTYyGXfTjfpN1WMw=
Received: by 10.231.43.138 with SMTP id w10mr2457465ibe.11.1307705709126; Fri,
 10 Jun 2011 04:35:09 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.199.148 with HTTP; Fri, 10 Jun 2011 04:34:49 -0700 (PDT)
In-Reply-To: <BANLkTimMsxTc=W8zFjES5NvhBvPsK2w_sw@mail.gmail.com>
References: <BANLkTinNhGR7gExTLa-rwayyJTNUU2u7yA@mail.gmail.com>
 <BANLkTikr9si86+O-ABFGy1F6=9ekmeoaAA@mail.gmail.com> <BANLkTimMsxTc=W8zFjES5NvhBvPsK2w_sw@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Fri, 10 Jun 2011 12:34:49 +0100
Message-ID: <BANLkTimbLPe3jcpO7myq=eG+G5CBR4np6Q@mail.gmail.com>
Subject: Re: Updating a document
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

In different code samples you've got both DocId and DocID.  If that
isn't the problem I suggest you post a complete little program that
demonstrates the problem.  As small as possible, no external
dependencies.


--
Ian.


On Fri, Jun 10, 2011 at 12:24 PM, Pranav goyal
<pranavgoyal40341@gmail.com> wrote:
> Hi Danny,
>
> I have explained it above.
>
> It has many fields out of which DocId is the field which I am storing as
> well as indexing. While other fields I am just storing.
> And Each document has unique DocId.
>
> d=3Dnew Document();
> File indexDir =3D new File("./index-dir");
> StandardAnalyzer analyzer =3D new StandardAnalyzer(Version.LUCENE_31);
> IndexWriterConfig conf =3D new IndexWriterConfig(Version.LUCENE_31, analy=
zer);
> try {
> =A0 =A0 =A0writer =3D new IndexWriter(FSDirectory.open(indexDir),conf);
> } catch (IOException e1) {
> =A0 =A0 e1.printStackTrace();
> }
> String q1 =3D contract.getDocId(); =A0 =A0// Here I am getting my DocId
> Term term =3D new Term("DocID",contract.getDocId());
>
>
> Rest I have stated above.
>
>
>
> On Fri, Jun 10, 2011 at 4:44 PM, Danny Lade <dannylade@googlemail.com>wro=
te:
>
>> You delete it first using your id:
>>
>> > =A0 =A0 =A0 =A0 =A0 =A0writer.deleteDocuments(term);
>> >
>>
>> and then re-add it with the same id:
>>
>> writer.addDocument(d);
>> >
>>
>> Please explain:
>> How looks your document BEFORE you try to delete it? (Which fields has i=
t?)
>>
>> Greetings Danny
>>
>
>
>
> --
> I'm very responsible, when ever something goes wrong they always say I'm
> responsible --
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49968-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jun 10 12:37:57 2011
Return-Path: <java-user-return-49968-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 21AF74151
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 10 Jun 2011 12:37:57 +0000 (UTC)
Received: (qmail 55078 invoked by uid 500); 10 Jun 2011 12:37:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55029 invoked by uid 500); 10 Jun 2011 12:37:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55021 invoked by uid 99); 10 Jun 2011 12:37:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Jun 2011 12:37:54 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Jun 2011 12:37:49 +0000
Received: by qwj9 with SMTP id 9so1710067qwj.35
        for <java-user@lucene.apache.org>; Fri, 10 Jun 2011 05:37:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type:content-transfer-encoding;
        bh=6/qmCK+KUUNnpcJg/d0k0RS/iN0HvNeEZJzaqnPoqZU=;
        b=sb7VOQ4GA0A330JpEOqXaR5QDDg7dh5FBXmhhXX70BZAOXoc+li6LpBeXi0hohpJqp
         xY0Lova7UBMQn6s6oajmZSrA8dk1+LZNAfzPFXlUSQhV+WUNWYhYrxzpAHj/i4fgUNef
         KKNtcXeIr2K0JtSaXiDFU5DYbAGMhIVshdTiI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=xD+CXnjbULTViKMqZcjQVj4Zb3sNp9hqScrhJ3y4VJqQQsK51oFcqhMYR+NycC7Pbc
         pfteVYcyqHavQjQUg1Pgu6jkvOnnOYMUdON4Sy+ysZGk4vClvMezFQ4nKata7DTWb68O
         n0I1FeUv0IxesgT/C+KB5BkRTWhj5KXx0gK5s=
MIME-Version: 1.0
Received: by 10.229.130.144 with SMTP id t16mr1517529qcs.146.1307709448863;
 Fri, 10 Jun 2011 05:37:28 -0700 (PDT)
Received: by 10.229.239.13 with HTTP; Fri, 10 Jun 2011 05:37:28 -0700 (PDT)
In-Reply-To: <BANLkTimbLPe3jcpO7myq=eG+G5CBR4np6Q@mail.gmail.com>
References: <BANLkTinNhGR7gExTLa-rwayyJTNUU2u7yA@mail.gmail.com>
	<BANLkTikr9si86+O-ABFGy1F6=9ekmeoaAA@mail.gmail.com>
	<BANLkTimMsxTc=W8zFjES5NvhBvPsK2w_sw@mail.gmail.com>
	<BANLkTimbLPe3jcpO7myq=eG+G5CBR4np6Q@mail.gmail.com>
Date: Fri, 10 Jun 2011 08:37:28 -0400
Message-ID: <BANLkTim84gsS+mjFaL6UZFWSRCY884YW-Q@mail.gmail.com>
Subject: Re: Updating a document
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Well, taking the code all together, what I expect is
that you'll have a document after all is done that
only has a "DocId" in it. Nowhere do you fetch
the document from the index.

What is your evidence that you haven't deleted
the document? If you haven't reopened your reader
after the above, you'll see the old view of the index,
so be sure you close/open your searcher afterwards.

Ian's suggestion is the best I think, since the code
fragments you've provided don't tell the complete
story. If there's an error in contract.getDocID(), we
can't see it to help.

It might help to review:
http://wiki.apache.org/solr/UsingMailingLists

Best
Erick

On Fri, Jun 10, 2011 at 7:34 AM, Ian Lea <ian.lea@gmail.com> wrote:
> In different code samples you've got both DocId and DocID. =A0If that
> isn't the problem I suggest you post a complete little program that
> demonstrates the problem. =A0As small as possible, no external
> dependencies.
>
>
> --
> Ian.
>
>
> On Fri, Jun 10, 2011 at 12:24 PM, Pranav goyal
> <pranavgoyal40341@gmail.com> wrote:
>> Hi Danny,
>>
>> I have explained it above.
>>
>> It has many fields out of which DocId is the field which I am storing as
>> well as indexing. While other fields I am just storing.
>> And Each document has unique DocId.
>>
>> d=3Dnew Document();
>> File indexDir =3D new File("./index-dir");
>> StandardAnalyzer analyzer =3D new StandardAnalyzer(Version.LUCENE_31);
>> IndexWriterConfig conf =3D new IndexWriterConfig(Version.LUCENE_31, anal=
yzer);
>> try {
>> =A0 =A0 =A0writer =3D new IndexWriter(FSDirectory.open(indexDir),conf);
>> } catch (IOException e1) {
>> =A0 =A0 e1.printStackTrace();
>> }
>> String q1 =3D contract.getDocId(); =A0 =A0// Here I am getting my DocId
>> Term term =3D new Term("DocID",contract.getDocId());
>>
>>
>> Rest I have stated above.
>>
>>
>>
>> On Fri, Jun 10, 2011 at 4:44 PM, Danny Lade <dannylade@googlemail.com>wr=
ote:
>>
>>> You delete it first using your id:
>>>
>>> > =A0 =A0 =A0 =A0 =A0 =A0writer.deleteDocuments(term);
>>> >
>>>
>>> and then re-add it with the same id:
>>>
>>> writer.addDocument(d);
>>> >
>>>
>>> Please explain:
>>> How looks your document BEFORE you try to delete it? (Which fields has =
it?)
>>>
>>> Greetings Danny
>>>
>>
>>
>>
>> --
>> I'm very responsible, when ever something goes wrong they always say I'm
>> responsible --
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49969-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jun 10 12:53:07 2011
Return-Path: <java-user-return-49969-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 88C164C0A
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 10 Jun 2011 12:53:07 +0000 (UTC)
Received: (qmail 86652 invoked by uid 500); 10 Jun 2011 12:53:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86615 invoked by uid 500); 10 Jun 2011 12:53:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86607 invoked by uid 99); 10 Jun 2011 12:53:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Jun 2011 12:53:05 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of evanchastelet@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Jun 2011 12:52:56 +0000
Received: by wwi18 with SMTP id 18so1816748wwi.5
        for <java-user@lucene.apache.org>; Fri, 10 Jun 2011 05:52:36 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:subject:from:to:content-type:date:message-id
         :mime-version:x-mailer:content-transfer-encoding;
        bh=b7oNYf0bUWvoYV1r12Y+pDoj8jjSwirWKjqJ1W1aWNM=;
        b=ByruPtd3ferfgz0uJ334Az+wMjzs8r1oOD46PutKHslGtSu6TtkPOhBk5HLVOz4XhE
         rcAjJ+Xwy41Uew1iM4/uJ1hVkdPnXIpC8tkrcNvrdnzFybWSczh8b/8zAxQeLDB1x+Jp
         8WPR1CN7plDvrNyOfnGuxJBrb4tdnMsy0WHWc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=subject:from:to:content-type:date:message-id:mime-version:x-mailer
         :content-transfer-encoding;
        b=UhP1rV/M61i7QCVWGhS/NiIHMfCwxbAefc0EC1FVuqHOA2M0YqI4SND10x0MzfV20I
         j/KAaJVwDBYk3qBMNA0+z8S353c0K2NsBlvjU6i69Naw92tcIII0X/Ro2C/ktdrTI23p
         XPd+0oZPa3CGOW4CG9w8nFHTW8pUoG8+PC9lU=
Received: by 10.216.235.234 with SMTP id u84mr2475503weq.51.1307710356245;
        Fri, 10 Jun 2011 05:52:36 -0700 (PDT)
Received: from [130.161.159.138] (dutijj.st.ewi.tudelft.nl [130.161.159.138])
        by mx.google.com with ESMTPS id h22sm1381751wes.32.2011.06.10.05.52.34
        (version=SSLv3 cipher=OTHER);
        Fri, 10 Jun 2011 05:52:35 -0700 (PDT)
Subject: Improving disk efficiency for autocompleter / spellchecker
From: Elmer <evanchastelet@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset="UTF-8"
Date: Fri, 10 Jun 2011 14:52:33 +0200
Message-ID: <1307710353.3595.27.camel@elmer-P35-DS3P>
Mime-Version: 1.0
X-Mailer: Evolution 2.32.2 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hello again :)

I've created a autocompleter class, based on the contrib SpellChecker
source code (it creates start1-20 grams, no middle/end grams). The use
case for this class, as with most autocompleters, is that it is called
on each keypress from the user.
What happens is, that on each keypress, a static method
'autocompleteOnField' is called, which creates a new instance of
AutoCompleter:
autoCompleter = new AutoCompleter(FSDirectory.open(new
File(pathToIndex)));

It has a finalize block where it calls the close method of the
AutoCompleter (works the same as SpellChecker). In practice, this means
that every time a key is hit in the search field, my HDD led blinks.
Since I'd like to have an efficient program and reduce stress on the
hard drives as much as possible, I'd like to know if there are some
tricks to reduce this usage.
I already tried using a RAMDirectory instead of FSDirectory, but this
eats up too much memory (out-of-mem exception). 

I'm currently changing the code to have a single instance of the
AutoCompleter that is reused every time 'autocompleteOnField' is called
-> FSDirectory.open(new File(pathToIndex)) and autocompleter.close()
will only be invoked once (until the index is rebuilt/updated), which
will probably reduce the IO reads/writes.

Are there more ways to improve disk efficiency?

BR,
Elmer


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49970-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jun 10 13:11:02 2011
Return-Path: <java-user-return-49970-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1C8984740
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 10 Jun 2011 13:11:02 +0000 (UTC)
Received: (qmail 12552 invoked by uid 500); 10 Jun 2011 13:10:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12499 invoked by uid 500); 10 Jun 2011 13:10:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12491 invoked by uid 99); 10 Jun 2011 13:10:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Jun 2011 13:10:59 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.210.176 as permitted sender)
Received: from [209.85.210.176] (HELO mail-iy0-f176.google.com) (209.85.210.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Jun 2011 13:10:52 +0000
Received: by iym1 with SMTP id 1so3340985iym.35
        for <java-user@lucene.apache.org>; Fri, 10 Jun 2011 06:10:31 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=D3RIhD/QvY4CD2ZLTUm9OdJmg6XP+ar7IeG/gRnf9wg=;
        b=s88f6NbV+Be2LFhR8B3C1tRiDPFVwdrpDcNf5nRGeuFMaeVeWgPok7SkD445Cxd1kZ
         FWISPypjhuMh1LVx2aOctUhlx1WlHpWHwfFxew+3B5rIdqN7ZrW5ntrjSRxXkk/mJ/XX
         4QQkEsf5Q73HwUbWg0KRlZUJ0f2na6LnE6vYs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=MzuUmVOo3OoJbQIj8AgCQvee2OfOHVLxyARDxLynAfoM2O7rCJmAW9W5M2X5kcmkZQ
         MblJ7YnFNOcHDMRQZqRd/txP1oLMj0VJA/UgB8HqHKElsrtbTkHnaC2Bbj1fhyjd5W6G
         h31YYLWi9azcQMj33dXS+xzurGKlPTuj6H8UA=
Received: by 10.231.118.91 with SMTP id u27mr2510290ibq.36.1307711431112; Fri,
 10 Jun 2011 06:10:31 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.199.148 with HTTP; Fri, 10 Jun 2011 06:10:11 -0700 (PDT)
In-Reply-To: <1307710353.3595.27.camel@elmer-P35-DS3P>
References: <1307710353.3595.27.camel@elmer-P35-DS3P>
From: Ian Lea <ian.lea@gmail.com>
Date: Fri, 10 Jun 2011 14:10:11 +0100
Message-ID: <BANLkTim1KRhit5Se=JxVbkVNp31x_pnahQ@mail.gmail.com>
Subject: Re: Improving disk efficiency for autocompleter / spellchecker
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Not opening the index for every keypress should make a big difference!

Most of  the tips in
http://wiki.apache.org/lucene-java/ImproveSearchingSpeed will apply.


--
Ian.


On Fri, Jun 10, 2011 at 1:52 PM, Elmer <evanchastelet@gmail.com> wrote:
> Hello again :)
>
> I've created a autocompleter class, based on the contrib SpellChecker
> source code (it creates start1-20 grams, no middle/end grams). The use
> case for this class, as with most autocompleters, is that it is called
> on each keypress from the user.
> What happens is, that on each keypress, a static method
> 'autocompleteOnField' is called, which creates a new instance of
> AutoCompleter:
> autoCompleter = new AutoCompleter(FSDirectory.open(new
> File(pathToIndex)));
>
> It has a finalize block where it calls the close method of the
> AutoCompleter (works the same as SpellChecker). In practice, this means
> that every time a key is hit in the search field, my HDD led blinks.
> Since I'd like to have an efficient program and reduce stress on the
> hard drives as much as possible, I'd like to know if there are some
> tricks to reduce this usage.
> I already tried using a RAMDirectory instead of FSDirectory, but this
> eats up too much memory (out-of-mem exception).
>
> I'm currently changing the code to have a single instance of the
> AutoCompleter that is reused every time 'autocompleteOnField' is called
> -> FSDirectory.open(new File(pathToIndex)) and autocompleter.close()
> will only be invoked once (until the index is rebuilt/updated), which
> will probably reduce the IO reads/writes.
>
> Are there more ways to improve disk efficiency?
>
> BR,
> Elmer
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49971-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jun 10 14:48:16 2011
Return-Path: <java-user-return-49971-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1EEA54BA3
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 10 Jun 2011 14:48:16 +0000 (UTC)
Received: (qmail 2909 invoked by uid 500); 10 Jun 2011 14:48:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2861 invoked by uid 500); 10 Jun 2011 14:48:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2853 invoked by uid 99); 10 Jun 2011 14:48:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Jun 2011 14:48:13 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [188.121.53.2] (HELO n1plout04-02.prod.ams1.secureserver.net) (188.121.53.2)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 10 Jun 2011 14:48:05 +0000
Received: (qmail 26946 invoked from network); 10 Jun 2011 14:47:42 -0000
Received: from unknown (94.159.237.116)
  by n1plout04-02.prod.ams1.secureserver.net (188.121.53.2) with ESMTP; 10 Jun 2011 14:47:42 -0000
Message-ID: <4DF22E7F.1010604@code972.com>
Date: Fri, 10 Jun 2011 17:47:27 +0300
From: Itamar Syn-Hershko <itamar@code972.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.17) Gecko/20110414 Lightning/1.0b2 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
CC: erickerickson@gmail.com
Subject: Re: multiple small indexes or one big index?
References: <4DE6A278.4030002@gmail.com>	<BANLkTi=8AvxMeF86mMBhkA1j5rxHi-VgyQ@mail.gmail.com>	<4DE6B10F.7090207@gmail.com>	<BANLkTimsBoV68F5FdDqmvp9-CMRF3w-AVQ@mail.gmail.com>	<4DE78FE3.2070106@gmail.com> <BANLkTikf7xtc-2fwYJwMqB6D0agEKD9vTw@mail.gmail.com> <4DE794B5.2010506@gmail.com>
In-Reply-To: <4DE794B5.2010506@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Erick,


Sorry about reopening this more than a week late...


You were asking about the size of each index; at what index size would 
you consider splitting to several indices with multiple searches etc, 
for what reasons, and does it matter which Lucene version is used?


Thanks :)


Itamar.


On 02/06/2011 16:48, Alexander Rosemann wrote:

> No worries, I'll keep that in mind now.
> In addition I am going to switch to another collector as well. ATM I 
> collect the results and then sort them using the std. Collections.sort 
> approach... I have to look what Lucene offers and switch to something 
> else.
>
> Thanks,
> Alex
>
> On 02.06.2011 15:36, Erick Erickson wrote:
>> Sounds good, just be sure to keep your (now single) searcher open! Also,
>> be sure to measure queries after a while. The first few queries will 
>> fill up
>> caches etc, so the time should improve after the first few.
>>
>> Best
>> Erick
>>
>> On Thu, Jun 2, 2011 at 9:28 AM, Alexander Rosemann
>> <alexander.rosemann@gmail.com>  wrote:
>>> Hi Erick, caching the IndexSearchers didn't took too much effort and
>>> decreased searching already by 30%!
>>>
>>> I am busy changing the code to use a single index as you suggested atm.
>>> Still a few things left to be done but once I have it working I let 
>>> you know
>>> how much faster it is for me.
>>>
>>> Thanks,
>>> Alex
>>>
>>> On 02.06.2011 13:04, Erick Erickson wrote:
>>>>
>>>> At this size, really consider going to a single index. The lack of
>>>> administrative headaches alone is probably well worth the effort....
>>>>
>>>> I almost guarantee that the time you spend re-writing things to keep
>>>> the searchers open (and finding the bugs!) will be far more than just
>>>> putting all the data in a single index.
>>>>
>>>> But that might just be my preferences showing....
>>>>
>>>> Best
>>>> Erick
>>>>
>>>> On Wed, Jun 1, 2011 at 5:37 PM, Alexander Rosemann
>>>> <alexander.rosemann@gmail.com>    wrote:
>>>>>
>>>>> Many thanks for the tips, Erick! I do close each searcher after a
>>>>> search...
>>>>> I will change that first thing tmrw. and let you know how that went.
>>>>> Multi-threaded searching will be next and if that hasn't helped, I 
>>>>> will
>>>>> switch to one big index.
>>>>> All indexes together are rather small, ~200MB and 50.000 documents.
>>>>>
>>>>> -Alex
>>>>>
>>>>> On 01.06.2011 23:26, Erick Erickson wrote:
>>>>>>
>>>>>> I'd start by putting them all in one index. There's no penalty
>>>>>> in Lucene for having empty fields in a document, unlike an
>>>>>> RDBMS.
>>>>>>
>>>>>> Alternately, if you're opening then closing searchers each
>>>>>> time, that's very expensive. Could you open the searchers
>>>>>> once and keep them open (all 90 of them)? That alone might
>>>>>> do the trick and be less of a change to your program. You
>>>>>> could also fire multiple threads at the searches, but check if
>>>>>> you're CPU bound first (if you are, multiple threads won't
>>>>>> help much/at all).
>>>>>>
>>>>>> You haven't said how big these indexes are nor how many
>>>>>> documents you're talking about here, so this advice is suspect.
>>>>>>
>>>>>> Do look at putting it all in one index though, let us know if you
>>>>>> have some data indicating how big stuff is/would be.
>>>>>>
>>>>>> Best
>>>>>> Erick
>>>>>>
>>>>>> On Wed, Jun 1, 2011 at 4:35 PM, Alexander Rosemann
>>>>>> <alexander.rosemann@gmail.com>      wrote:
>>>>>>>
>>>>>>> Hi all, I was wondering whether you could give me some advice on 
>>>>>>> how to
>>>>>>> improve my search performance.
>>>>>>>
>>>>>>> I have 90 lucene indexes, each having different fields (~5 per
>>>>>>> Document).
>>>>>>> When I search, I always have to go through all indexes to build my
>>>>>>> result
>>>>>>> set. Searching one index takes approx. 100ms, thus searching all
>>>>>>> indexes
>>>>>>> takes 9s in total.
>>>>>>>
>>>>>>> How can I reduce the time it needs to search?
>>>>>>>
>>>>>>> I decided to create this many indexes because putting all data 
>>>>>>> in one
>>>>>>> index
>>>>>>> would mean that a document would have ~400 fields, with most of 
>>>>>>> them
>>>>>>> left
>>>>>>> empty. Is that ok? Would a single index be faster compared to 
>>>>>>> multiple
>>>>>>> small
>>>>>>> ones?
>>>>>>>
>>>>>>> Any pointers are much appreciated.
>>>>>>>
>>>>>>> Regards,
>>>>>>> Alex
>>>>>>>
>>>>>>> --------------------------------------------------------------------- 
>>>>>>>
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>
>>>>>>>
>>>>>>
>>>>>> --------------------------------------------------------------------- 
>>>>>>
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49972-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jun 10 17:55:30 2011
Return-Path: <java-user-return-49972-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6BD8E4E88
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 10 Jun 2011 17:55:30 +0000 (UTC)
Received: (qmail 83661 invoked by uid 500); 10 Jun 2011 17:55:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83586 invoked by uid 500); 10 Jun 2011 17:55:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83570 invoked by uid 99); 10 Jun 2011 17:55:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Jun 2011 17:55:23 +0000
X-ASF-Spam-Status: No, hits=2.1 required=5.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLYTO,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.213.48 as permitted sender)
Received: from [209.85.213.48] (HELO mail-yw0-f48.google.com) (209.85.213.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Jun 2011 17:55:17 +0000
Received: by ywk9 with SMTP id 9so1584849ywk.35
        for <multiple recipients>; Fri, 10 Jun 2011 10:54:56 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:reply-to:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=bKKqiS9qXe0Tnj671ZIlph9IjEUpYiUfp78N65qRnUo=;
        b=ixCpQ0hrVio0VkRgDhyRMEaO5xNUr+Ql4SWEHILDJJo6LaQn3aibuE1BF0KK+2k+0Z
         XLGYB563ZZYEeO1KBl2cD1s6aiPm727GDqE3Ju5oLsTFYF1GmW310sCntzOJX1VD0918
         0JkJQK9tN0dweEgP1QR2dPiRzDdbLHqEpaXaE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type;
        b=xz90TI7nm//ElTEIvn0cyFtHGh3zrxHxvSHJk0yKayIqUX3vZNfmjEIrEgMbNB6578
         O4aJMFGPHF0+thxKSYkRslHRFwE1OtUw1FHA2tj+kqCEeeO4C5k1c91C7ouackgzA02k
         vDDdyOZaPka62BrgJ0HsP/owqQ8POs2Kn/xPA=
MIME-Version: 1.0
Received: by 10.236.145.2 with SMTP id o2mr1057248yhj.141.1307728496520; Fri,
 10 Jun 2011 10:54:56 -0700 (PDT)
Received: by 10.147.98.3 with HTTP; Fri, 10 Jun 2011 10:54:56 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <BANLkTikovBT9HCp++X4qNZdg_zqgJZX5og@mail.gmail.com>
References: <BANLkTikovBT9HCp++X4qNZdg_zqgJZX5og@mail.gmail.com>
Date: Fri, 10 Jun 2011 19:54:56 +0200
Message-ID: <BANLkTikHJkvQrFZ5SNuK9UHm0hT2-6H=Jw@mail.gmail.com>
Subject: Heads Up - Index File Format Change on Trunk
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user <java-user@lucene.apache.org>, solr-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

Hey folks,

I just committed LUCENE-3108 (Landing DocValues on Trunk) which adds a
byte to FieldInfo.
If you are running on trunk you must / should re-index any trunk
indexes once you update to the latest trunk.

its likely if you open up old trunk (4.0) indexes, you will get an
exception related to Read Past EOF.

Simon

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49973-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sat Jun 11 19:38:43 2011
Return-Path: <java-user-return-49973-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 68C126880
	for <apmail-lucene-java-user-archive@www.apache.org>; Sat, 11 Jun 2011 19:38:43 +0000 (UTC)
Received: (qmail 7401 invoked by uid 500); 11 Jun 2011 19:38:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7336 invoked by uid 500); 11 Jun 2011 19:38:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7326 invoked by uid 99); 11 Jun 2011 19:38:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Jun 2011 19:38:39 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [188.121.53.2] (HELO n1plout04-02.prod.ams1.secureserver.net) (188.121.53.2)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 11 Jun 2011 19:38:31 +0000
Received: (qmail 6903 invoked from network); 11 Jun 2011 19:38:09 -0000
Received: from unknown (94.159.224.180)
  by n1plout04-02.prod.ams1.secureserver.net (188.121.53.2) with ESMTP; 11 Jun 2011 19:38:09 -0000
Message-ID: <4DF3C40F.9090703@code972.com>
Date: Sat, 11 Jun 2011 22:37:51 +0300
From: Itamar Syn-Hershko <itamar@code972.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.17) Gecko/20110414 Lightning/1.0b2 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Index size and performance degradation
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

I know Lucene indexes to be at their optimum up to a certain size - said 
to be around several GBs. I haven't found a good discussion over this, 
but its my understanding that at some point its better to split an index 
into parts (a la sharding) than to continue searching on a huge-size 
index. I assume this has to do with OS and IO configurations. Can anyone 
point me to more info on this?

We have a product that is using Lucene for various searches, and at the 
moment each type of search is using its own Lucene index. We plan on 
refactoring the way it works and to combine all indexes into one - 
making the whole system more robust and with a smaller memory footprint, 
among other things.

Assuming the above is true, we are interested in knowing how to do this 
correctly. Initially all our indexes will be run in one big index, but 
if at some index size there is a severe performance degradation we would 
like to handle that correctly by starting a new FSDirectory index to 
flush into, or by re-indexing and moving large indexes into their own 
Lucene index.

Are there are any guidelines for measuring or estimating this correctly? 
what we should be aware of while considering all that? We can't assume 
anything about the machine running it, so testing won't really tell us 
much...

Thanks in advance for any input on this,

Itamar.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49974-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Jun 12 00:10:36 2011
Return-Path: <java-user-return-49974-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 70B036D51
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 12 Jun 2011 00:10:36 +0000 (UTC)
Received: (qmail 8420 invoked by uid 500); 12 Jun 2011 00:10:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8367 invoked by uid 500); 12 Jun 2011 00:10:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8359 invoked by uid 99); 12 Jun 2011 00:10:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Jun 2011 00:10:34 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Jun 2011 00:10:27 +0000
Received: by qwj9 with SMTP id 9so2571427qwj.35
        for <java-user@lucene.apache.org>; Sat, 11 Jun 2011 17:10:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=0uKN0by+FujZ/CqTyQwN7OPP1gumO4Q1rqdqqsTrfbM=;
        b=Ah2DOxpXWR6hMRoI46vm6BepQhIYklVlf6j1sSc/IxlIWBz8SviCElDNfty67eZ91N
         LFwsV/8CmwF2xtaubyVxhsp3oZcdJup9kcKBiw1JIl28dPrXmT3E3YhDKV+Jb2n3hOX/
         qEPLBBSptXIxy9Uyt14vJFYJeC5865QujTGVA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=mjA4TjcDhR0SbdUaKfL+7NkCHMxHieagxo4GX9ijR5Yalglqp0vonAiGpOwzVtv9nc
         ICFBulH4UdGE9dqSCeV5ZMWt1c50OJP2xHEu0cKifnjowsWFo3HkNYBmQy7sfvLZbeug
         mORGOvXo9ewZ8ROtA703kmkogRcIpFW07wJvQ=
MIME-Version: 1.0
Received: by 10.229.1.106 with SMTP id 42mr2742295qce.184.1307837406226; Sat,
 11 Jun 2011 17:10:06 -0700 (PDT)
Received: by 10.229.239.13 with HTTP; Sat, 11 Jun 2011 17:10:06 -0700 (PDT)
In-Reply-To: <4DF3C40F.9090703@code972.com>
References: <4DF3C40F.9090703@code972.com>
Date: Sat, 11 Jun 2011 20:10:06 -0400
Message-ID: <BANLkTi=2U3RTtOq_1oiA_FGBwpiPcVVMyg@mail.gmail.com>
Subject: Re: Index size and performance degradation
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

<<<We can't assume anything about the machine running it,
so testing won't really tell us much>>>

Hmmm, then it's pretty hopeless I think. Problem is that
anything you say about running on a machine with
2G available memory on a single processor is completely
incomparable to running on a machine with 64G of
memory available for Lucene and 16 processors.

There's really no such thing as an "optimum" Lucene index
size, it always relates to the characteristics of the
underlying hardware.

I think the best you can do is actually test on various
configurations, then at least you can say "on configuration
X this is the tipping point".

Sorry there isn't a better answer that I know of, but...

Best
Erick

On Sat, Jun 11, 2011 at 3:37 PM, Itamar Syn-Hershko <itamar@code972.com> wrote:
> Hi all,
>
> I know Lucene indexes to be at their optimum up to a certain size - said to
> be around several GBs. I haven't found a good discussion over this, but its
> my understanding that at some point its better to split an index into parts
> (a la sharding) than to continue searching on a huge-size index. I assume
> this has to do with OS and IO configurations. Can anyone point me to more
> info on this?
>
> We have a product that is using Lucene for various searches, and at the
> moment each type of search is using its own Lucene index. We plan on
> refactoring the way it works and to combine all indexes into one - making
> the whole system more robust and with a smaller memory footprint, among
> other things.
>
> Assuming the above is true, we are interested in knowing how to do this
> correctly. Initially all our indexes will be run in one big index, but if at
> some index size there is a severe performance degradation we would like to
> handle that correctly by starting a new FSDirectory index to flush into, or
> by re-indexing and moving large indexes into their own Lucene index.
>
> Are there are any guidelines for measuring or estimating this correctly?
> what we should be aware of while considering all that? We can't assume
> anything about the machine running it, so testing won't really tell us
> much...
>
> Thanks in advance for any input on this,
>
> Itamar.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49975-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Jun 12 03:43:35 2011
Return-Path: <java-user-return-49975-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3DB444C95
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 12 Jun 2011 03:43:35 +0000 (UTC)
Received: (qmail 97203 invoked by uid 500); 12 Jun 2011 03:43:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97026 invoked by uid 500); 12 Jun 2011 03:43:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97015 invoked by uid 99); 12 Jun 2011 03:43:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Jun 2011 03:43:30 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of serera@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Jun 2011 03:43:23 +0000
Received: by iwr19 with SMTP id 19so4883813iwr.35
        for <java-user@lucene.apache.org>; Sat, 11 Jun 2011 20:43:02 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=MCj940kfU9zJ15VgN5RIC4/NGPC4mLiwsTB6MNnTRPg=;
        b=DM9E5JVQN+yaUM9+w8oL1vd/FxoFrnkw9CRvSiD39kHSaKWUs2RpIbcf4jsLhUr0s4
         cfgEeCaUZ3/4OllKYyS2c64YMOQ5iO4wj258kgefj94ZSHa8v4OjzqH2CCXa3rNuNs+A
         OFRKCeodcCxpFlQq09vLyOhl1lBknQuVflvwM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=g9zFulf19QVDagrED7Smr7xCbb7LVh0e43yI6/9yN4WSFBZ4z4oX0m1k0RtjPXXhFm
         A3pyl+AobJtf3ZNLIjeDeFW3XgHi3QubNI/ERA4tNJgXsZrZYrIQlYZ3aDK8Q929jK15
         rb+N1++VChKGiq0RnCG0gMyQI/AAeEtapSfY0=
MIME-Version: 1.0
Received: by 10.42.178.9 with SMTP id bk9mr4991916icb.245.1307850181975; Sat,
 11 Jun 2011 20:43:01 -0700 (PDT)
Received: by 10.42.3.209 with HTTP; Sat, 11 Jun 2011 20:43:01 -0700 (PDT)
In-Reply-To: <BANLkTi=2U3RTtOq_1oiA_FGBwpiPcVVMyg@mail.gmail.com>
References: <4DF3C40F.9090703@code972.com>
	<BANLkTi=2U3RTtOq_1oiA_FGBwpiPcVVMyg@mail.gmail.com>
Date: Sun, 12 Jun 2011 06:43:01 +0300
Message-ID: <BANLkTinHragJQUTX3j+mcdW0K0B73A0T=A@mail.gmail.com>
Subject: Re: Index size and performance degradation
From: Shai Erera <serera@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=90e6ba6e8d7a841dd304a57b99f7
X-Virus-Checked: Checked by ClamAV on apache.org

--90e6ba6e8d7a841dd304a57b99f7
Content-Type: text/plain; charset=ISO-8859-1

I agree w/ Erick, there is no cutoff point (index size for that matter)
above which you start sharding.

What you can do is create a scheduled job in your system that runs a select
list of queries and monitors their performance. Once it degrades, it shards
the index by either splitting it (you can use IndexSplitter under contrib)
or create a new shard, and direct new documents to it.

I think I read somewhere, not sure if it was in Solr or ElasticSearch
documentation, about a Balancer object, which moves shards around in order
to balance the load on the cluster. You can implement something similar
which tries to balance the index sizes, creates new shards on-the-fly, even
merge shards if suddenly a whole source is being removed from the system
etc.

Also, note that the 'largest index size' threshold is really a machine
constraint and not Lucene's. So if you decide that 10 GB is your cutoff, it
is pointless to create 10x10GB shards on the same machine -- searching them
is just like searching a 100GB index w/ 10x10GB segments. Perhaps it's even
worse because you consume more RAM when the indexes are split (e.g., terms
index, field infos etc.).

Shai

On Sun, Jun 12, 2011 at 3:10 AM, Erick Erickson <erickerickson@gmail.com>wrote:

> <<<We can't assume anything about the machine running it,
> so testing won't really tell us much>>>
>
> Hmmm, then it's pretty hopeless I think. Problem is that
> anything you say about running on a machine with
> 2G available memory on a single processor is completely
> incomparable to running on a machine with 64G of
> memory available for Lucene and 16 processors.
>
> There's really no such thing as an "optimum" Lucene index
> size, it always relates to the characteristics of the
> underlying hardware.
>
> I think the best you can do is actually test on various
> configurations, then at least you can say "on configuration
> X this is the tipping point".
>
> Sorry there isn't a better answer that I know of, but...
>
> Best
> Erick
>
> On Sat, Jun 11, 2011 at 3:37 PM, Itamar Syn-Hershko <itamar@code972.com>
> wrote:
> > Hi all,
> >
> > I know Lucene indexes to be at their optimum up to a certain size - said
> to
> > be around several GBs. I haven't found a good discussion over this, but
> its
> > my understanding that at some point its better to split an index into
> parts
> > (a la sharding) than to continue searching on a huge-size index. I assume
> > this has to do with OS and IO configurations. Can anyone point me to more
> > info on this?
> >
> > We have a product that is using Lucene for various searches, and at the
> > moment each type of search is using its own Lucene index. We plan on
> > refactoring the way it works and to combine all indexes into one - making
> > the whole system more robust and with a smaller memory footprint, among
> > other things.
> >
> > Assuming the above is true, we are interested in knowing how to do this
> > correctly. Initially all our indexes will be run in one big index, but if
> at
> > some index size there is a severe performance degradation we would like
> to
> > handle that correctly by starting a new FSDirectory index to flush into,
> or
> > by re-indexing and moving large indexes into their own Lucene index.
> >
> > Are there are any guidelines for measuring or estimating this correctly?
> > what we should be aware of while considering all that? We can't assume
> > anything about the machine running it, so testing won't really tell us
> > much...
> >
> > Thanks in advance for any input on this,
> >
> > Itamar.
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--90e6ba6e8d7a841dd304a57b99f7--

From java-user-return-49976-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Jun 12 08:11:00 2011
Return-Path: <java-user-return-49976-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A037A4C87
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 12 Jun 2011 08:11:00 +0000 (UTC)
Received: (qmail 24464 invoked by uid 500); 12 Jun 2011 08:10:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24402 invoked by uid 500); 12 Jun 2011 08:10:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24394 invoked by uid 99); 12 Jun 2011 08:10:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Jun 2011 08:10:57 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [188.121.53.1] (HELO n1plout04-01.prod.ams1.secureserver.net) (188.121.53.1)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 12 Jun 2011 08:10:49 +0000
Received: (qmail 17964 invoked from network); 12 Jun 2011 08:10:26 -0000
Received: from unknown (94.159.224.180)
  by n1plout04-01.prod.ams1.secureserver.net (188.121.53.1) with ESMTP; 12 Jun 2011 08:10:26 -0000
Message-ID: <4DF47461.1050004@code972.com>
Date: Sun, 12 Jun 2011 11:10:09 +0300
From: Itamar Syn-Hershko <itamar@code972.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.17) Gecko/20110414 Lightning/1.0b2 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Index size and performance degradation
References: <4DF3C40F.9090703@code972.com>	<BANLkTi=2U3RTtOq_1oiA_FGBwpiPcVVMyg@mail.gmail.com> <BANLkTinHragJQUTX3j+mcdW0K0B73A0T=A@mail.gmail.com>
In-Reply-To: <BANLkTinHragJQUTX3j+mcdW0K0B73A0T=A@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks.


The whole point of my question was to find out if and how to make 
balancing on the SAME machine. Apparently thats not going to help and at 
a certain point we will just have to prompt the user to buy more hardware...


Out of curiosity, isn't there anything that we can do to avoid that? for 
instance using memory-mapped files for the indexes? anything that would 
help us overcome OS limitations of that sort...


Also, you mention a scheduled job to check for performance degradation; 
any idea how serious such a drop should be for sharding to be really 
beneficial? or is it application specific too?


Itamar.


On 12/06/2011 06:43, Shai Erera wrote:

> I agree w/ Erick, there is no cutoff point (index size for that matter)
> above which you start sharding.
>
> What you can do is create a scheduled job in your system that runs a select
> list of queries and monitors their performance. Once it degrades, it shards
> the index by either splitting it (you can use IndexSplitter under contrib)
> or create a new shard, and direct new documents to it.
>
> I think I read somewhere, not sure if it was in Solr or ElasticSearch
> documentation, about a Balancer object, which moves shards around in order
> to balance the load on the cluster. You can implement something similar
> which tries to balance the index sizes, creates new shards on-the-fly, even
> merge shards if suddenly a whole source is being removed from the system
> etc.
>
> Also, note that the 'largest index size' threshold is really a machine
> constraint and not Lucene's. So if you decide that 10 GB is your cutoff, it
> is pointless to create 10x10GB shards on the same machine -- searching them
> is just like searching a 100GB index w/ 10x10GB segments. Perhaps it's even
> worse because you consume more RAM when the indexes are split (e.g., terms
> index, field infos etc.).
>
> Shai
>
> On Sun, Jun 12, 2011 at 3:10 AM, Erick Erickson<erickerickson@gmail.com>wrote:
>
>> <<<We can't assume anything about the machine running it,
>> so testing won't really tell us much>>>
>>
>> Hmmm, then it's pretty hopeless I think. Problem is that
>> anything you say about running on a machine with
>> 2G available memory on a single processor is completely
>> incomparable to running on a machine with 64G of
>> memory available for Lucene and 16 processors.
>>
>> There's really no such thing as an "optimum" Lucene index
>> size, it always relates to the characteristics of the
>> underlying hardware.
>>
>> I think the best you can do is actually test on various
>> configurations, then at least you can say "on configuration
>> X this is the tipping point".
>>
>> Sorry there isn't a better answer that I know of, but...
>>
>> Best
>> Erick
>>
>> On Sat, Jun 11, 2011 at 3:37 PM, Itamar Syn-Hershko<itamar@code972.com>
>> wrote:
>>> Hi all,
>>>
>>> I know Lucene indexes to be at their optimum up to a certain size - said
>> to
>>> be around several GBs. I haven't found a good discussion over this, but
>> its
>>> my understanding that at some point its better to split an index into
>> parts
>>> (a la sharding) than to continue searching on a huge-size index. I assume
>>> this has to do with OS and IO configurations. Can anyone point me to more
>>> info on this?
>>>
>>> We have a product that is using Lucene for various searches, and at the
>>> moment each type of search is using its own Lucene index. We plan on
>>> refactoring the way it works and to combine all indexes into one - making
>>> the whole system more robust and with a smaller memory footprint, among
>>> other things.
>>>
>>> Assuming the above is true, we are interested in knowing how to do this
>>> correctly. Initially all our indexes will be run in one big index, but if
>> at
>>> some index size there is a severe performance degradation we would like
>> to
>>> handle that correctly by starting a new FSDirectory index to flush into,
>> or
>>> by re-indexing and moving large indexes into their own Lucene index.
>>>
>>> Are there are any guidelines for measuring or estimating this correctly?
>>> what we should be aware of while considering all that? We can't assume
>>> anything about the machine running it, so testing won't really tell us
>>> much...
>>>
>>> Thanks in advance for any input on this,
>>>
>>> Itamar.
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49977-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Jun 12 08:43:19 2011
Return-Path: <java-user-return-49977-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E5C534D5C
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 12 Jun 2011 08:43:19 +0000 (UTC)
Received: (qmail 44059 invoked by uid 500); 12 Jun 2011 08:43:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44017 invoked by uid 500); 12 Jun 2011 08:43:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44009 invoked by uid 99); 12 Jun 2011 08:43:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Jun 2011 08:43:17 +0000
X-ASF-Spam-Status: No, hits=4.0 required=5.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLY,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of serera@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Jun 2011 08:43:10 +0000
Received: by iwr19 with SMTP id 19so4990331iwr.35
        for <java-user@lucene.apache.org>; Sun, 12 Jun 2011 01:42:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=KF1RXNg7iZaUXoPSB/qcHYzMGWO/Y7Vu83c0KsyCgjM=;
        b=rMHLvKLjiv2luFbScRjlHzsBMV/GVDGAJG+darxb6FMQR2+iML0nHNAHvMRm8/zQdi
         n2GErTsYNTCslSZOxnGuksJDn+oWkO/wkKP/h87N3ZgeyyNjuMTRmZPaDK8R62/sOkME
         aQe5PPawsCeP8vD6Omag7K91t9H5l/wpQiBH4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=VeiJeBv7QOVCHKEJxj/DG/iPfSqJOV9tW0s8F5kqa9RlCIqxHMhD1or3o6ovlUUNl5
         nyIK7rQ1ELKzdku9gKzZSkAdxhgKTL/26V1dYvOjRQV3A2sPoCPXP72ztBtmR6GWaZ/0
         Fl3I3pImDIOOeVwjPX6xpXiyAYz9Xt70ma2aY=
MIME-Version: 1.0
Received: by 10.42.167.197 with SMTP id t5mr5461829icy.111.1307868168306; Sun,
 12 Jun 2011 01:42:48 -0700 (PDT)
Received: by 10.42.3.209 with HTTP; Sun, 12 Jun 2011 01:42:48 -0700 (PDT)
In-Reply-To: <4DF47461.1050004@code972.com>
References: <4DF3C40F.9090703@code972.com>
	<BANLkTi=2U3RTtOq_1oiA_FGBwpiPcVVMyg@mail.gmail.com>
	<BANLkTinHragJQUTX3j+mcdW0K0B73A0T=A@mail.gmail.com>
	<4DF47461.1050004@code972.com>
Date: Sun, 12 Jun 2011 11:42:48 +0300
Message-ID: <BANLkTi=AcTVV1ruMvvWj_a7Ha_VzaxSuzA@mail.gmail.com>
Subject: Re: Index size and performance degradation
From: Shai Erera <serera@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=90e6ba6e8a9e95c03704a57fc9bc
X-Virus-Checked: Checked by ClamAV on apache.org

--90e6ba6e8a9e95c03704a57fc9bc
Content-Type: text/plain; charset=ISO-8859-1

>
> isn't there anything that we can do to avoid that?
>

That was my point :) --> you can optimize your search application, use mmap
files, smart caches etc., until it reaches a point where you need to shard.
But it's still application dependent, not much of an OS thing. You can count
on the OS to cache what it needs in RAM, and if your index is small enough
to exist in RAM, then it will probably be there. We've tried in the past to
use RAMDirectory for GBs of indexes (we had the RAM to spare), and the OS
cache just did a better job.

On the other hand, you can have a 100GB index, but very smart app-level
caches that return results in few ms ...

any idea how serious such a drop should be for sharding to be really
> beneficial? or is it application specific too?


That's application specific too I'm afraid. For instance, if your system is
expected to support 10 queries/sec, and that tool determines that it no
longer supports it, but dropped to, say, 7, then that is not something
you're willing to tolerate and therefore you shard the index.

But I've been working w/ applications that achieved 80 queries/sec on a
large index on one machine, and others that were willing to accept 30
seconds and even higher response time per query (for total recall, usually
legal stuff). So, again, it's really hard to come up w/ a magic number :).

People are used to Google's sub-second search response time. So if your app
is aiming to give the same experience, then factor in some reasonable
statistics like:
* No query takes longer than 5s
* Majority of the queries, say 80%, finish in < 500ms
* Above still holds in X queries/sec rate (X is dynamic and depends on what
you aim for)

These are just some numbers I've been using recently to benchmark my app

Shai

On Sun, Jun 12, 2011 at 11:10 AM, Itamar Syn-Hershko <itamar@code972.com>wrote:

> Thanks.
>
>
> The whole point of my question was to find out if and how to make balancing
> on the SAME machine. Apparently thats not going to help and at a certain
> point we will just have to prompt the user to buy more hardware...
>
>
> Out of curiosity, isn't there anything that we can do to avoid that? for
> instance using memory-mapped files for the indexes? anything that would help
> us overcome OS limitations of that sort...
>
>
> Also, you mention a scheduled job to check for performance degradation; any
> idea how serious such a drop should be for sharding to be really beneficial?
> or is it application specific too?
>
>
> Itamar.
>
>
>
> On 12/06/2011 06:43, Shai Erera wrote:
>
>  I agree w/ Erick, there is no cutoff point (index size for that matter)
>> above which you start sharding.
>>
>> What you can do is create a scheduled job in your system that runs a
>> select
>> list of queries and monitors their performance. Once it degrades, it
>> shards
>> the index by either splitting it (you can use IndexSplitter under contrib)
>> or create a new shard, and direct new documents to it.
>>
>> I think I read somewhere, not sure if it was in Solr or ElasticSearch
>> documentation, about a Balancer object, which moves shards around in order
>> to balance the load on the cluster. You can implement something similar
>> which tries to balance the index sizes, creates new shards on-the-fly,
>> even
>> merge shards if suddenly a whole source is being removed from the system
>> etc.
>>
>> Also, note that the 'largest index size' threshold is really a machine
>> constraint and not Lucene's. So if you decide that 10 GB is your cutoff,
>> it
>> is pointless to create 10x10GB shards on the same machine -- searching
>> them
>> is just like searching a 100GB index w/ 10x10GB segments. Perhaps it's
>> even
>> worse because you consume more RAM when the indexes are split (e.g., terms
>> index, field infos etc.).
>>
>> Shai
>>
>> On Sun, Jun 12, 2011 at 3:10 AM, Erick Erickson<erickerickson@gmail.com
>> >wrote:
>>
>>  <<<We can't assume anything about the machine running it,
>>> so testing won't really tell us much>>>
>>>
>>> Hmmm, then it's pretty hopeless I think. Problem is that
>>> anything you say about running on a machine with
>>> 2G available memory on a single processor is completely
>>> incomparable to running on a machine with 64G of
>>> memory available for Lucene and 16 processors.
>>>
>>> There's really no such thing as an "optimum" Lucene index
>>> size, it always relates to the characteristics of the
>>> underlying hardware.
>>>
>>> I think the best you can do is actually test on various
>>> configurations, then at least you can say "on configuration
>>> X this is the tipping point".
>>>
>>> Sorry there isn't a better answer that I know of, but...
>>>
>>> Best
>>> Erick
>>>
>>> On Sat, Jun 11, 2011 at 3:37 PM, Itamar Syn-Hershko<itamar@code972.com>
>>> wrote:
>>>
>>>> Hi all,
>>>>
>>>> I know Lucene indexes to be at their optimum up to a certain size - said
>>>>
>>> to
>>>
>>>> be around several GBs. I haven't found a good discussion over this, but
>>>>
>>> its
>>>
>>>> my understanding that at some point its better to split an index into
>>>>
>>> parts
>>>
>>>> (a la sharding) than to continue searching on a huge-size index. I
>>>> assume
>>>> this has to do with OS and IO configurations. Can anyone point me to
>>>> more
>>>> info on this?
>>>>
>>>> We have a product that is using Lucene for various searches, and at the
>>>> moment each type of search is using its own Lucene index. We plan on
>>>> refactoring the way it works and to combine all indexes into one -
>>>> making
>>>> the whole system more robust and with a smaller memory footprint, among
>>>> other things.
>>>>
>>>> Assuming the above is true, we are interested in knowing how to do this
>>>> correctly. Initially all our indexes will be run in one big index, but
>>>> if
>>>>
>>> at
>>>
>>>> some index size there is a severe performance degradation we would like
>>>>
>>> to
>>>
>>>> handle that correctly by starting a new FSDirectory index to flush into,
>>>>
>>> or
>>>
>>>> by re-indexing and moving large indexes into their own Lucene index.
>>>>
>>>> Are there are any guidelines for measuring or estimating this correctly?
>>>> what we should be aware of while considering all that? We can't assume
>>>> anything about the machine running it, so testing won't really tell us
>>>> much...
>>>>
>>>> Thanks in advance for any input on this,
>>>>
>>>> Itamar.
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>  ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--90e6ba6e8a9e95c03704a57fc9bc--

From java-user-return-49978-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Jun 12 08:46:19 2011
Return-Path: <java-user-return-49978-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8083D49D1
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 12 Jun 2011 08:46:19 +0000 (UTC)
Received: (qmail 47953 invoked by uid 500); 12 Jun 2011 08:46:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47911 invoked by uid 500); 12 Jun 2011 08:46:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47903 invoked by uid 99); 12 Jun 2011 08:46:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Jun 2011 08:46:17 +0000
X-ASF-Spam-Status: No, hits=4.0 required=5.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLY,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of andrewrkane@gmail.com designates 209.85.213.48 as permitted sender)
Received: from [209.85.213.48] (HELO mail-yw0-f48.google.com) (209.85.213.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Jun 2011 08:46:10 +0000
Received: by ywk9 with SMTP id 9so2383832ywk.35
        for <java-user@lucene.apache.org>; Sun, 12 Jun 2011 01:45:49 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=jJTjdIM0Sl0Qze4xmG8j8DAKfMGhusWyD/tJX6nQvBE=;
        b=c8h67ssaXh7P/dA3I1KCEl8ihZnpSUMuavuWlnefvxg160RBuqKx3xXdvbIYkqewEi
         q25/+qBgOG/0RqFmt2Uj0vHlpLMnkhpG/z73Q+S9281CdmlwWD6H1LjQDZW8dnxeVEDQ
         +TKvqDUccb4Vern5JkpcOu4X2kEL5At22Myeg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=bGw2ZqXEPHGutB6b9lZ80kWn0rzj637YpdI6FzUy4WSvicJMqHclw0fos6PDF9LfFj
         zE+ecDIxUpF2fcgAk9g2xsyX3RLsHbV8CRLSJMBg2ZA7+b2y/Y19Z8Jb8QvgNbuqinaH
         cv4MFN2VGiHWFyJ9eH6lRrcSq1emw5LCVgTo0=
MIME-Version: 1.0
Received: by 10.236.154.1 with SMTP id g1mr5541465yhk.112.1307868347589; Sun,
 12 Jun 2011 01:45:47 -0700 (PDT)
Received: by 10.147.181.14 with HTTP; Sun, 12 Jun 2011 01:45:47 -0700 (PDT)
In-Reply-To: <4DF47461.1050004@code972.com>
References: <4DF3C40F.9090703@code972.com>
	<BANLkTi=2U3RTtOq_1oiA_FGBwpiPcVVMyg@mail.gmail.com>
	<BANLkTinHragJQUTX3j+mcdW0K0B73A0T=A@mail.gmail.com>
	<4DF47461.1050004@code972.com>
Date: Sun, 12 Jun 2011 04:45:47 -0400
Message-ID: <BANLkTin4Q+W9eWryacvJiL5yHHykx3xeCA@mail.gmail.com>
Subject: Re: Index size and performance degradation
From: Andrew Kane <andrewrkane@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf302d49c645637504a57fd47d
X-Virus-Checked: Checked by ClamAV on apache.org

--20cf302d49c645637504a57fd47d
Content-Type: text/plain; charset=ISO-8859-1

In the literature there is some evidence that sharding of in-memory indexes
on multi-core machines might be better.  Has anyone tried this lately?

    http://ieeexplore.ieee.org/xpl/freeabs_all.jsp?arnumber=4228359

Single disk machines (HDD or SSD) would be slower.  Multi-disk or RAID type
setups might have some benefits.  What's your hardware setup?

Andrew.


On Sun, Jun 12, 2011 at 4:10 AM, Itamar Syn-Hershko <itamar@code972.com>wrote:

> Thanks.
>
>
> The whole point of my question was to find out if and how to make balancing
> on the SAME machine. Apparently thats not going to help and at a certain
> point we will just have to prompt the user to buy more hardware...
>
>
> Out of curiosity, isn't there anything that we can do to avoid that? for
> instance using memory-mapped files for the indexes? anything that would help
> us overcome OS limitations of that sort...
>
>
> Also, you mention a scheduled job to check for performance degradation; any
> idea how serious such a drop should be for sharding to be really beneficial?
> or is it application specific too?
>
>
> Itamar.
>
>
>
> On 12/06/2011 06:43, Shai Erera wrote:
>
>  I agree w/ Erick, there is no cutoff point (index size for that matter)
>> above which you start sharding.
>>
>> What you can do is create a scheduled job in your system that runs a
>> select
>> list of queries and monitors their performance. Once it degrades, it
>> shards
>> the index by either splitting it (you can use IndexSplitter under contrib)
>> or create a new shard, and direct new documents to it.
>>
>> I think I read somewhere, not sure if it was in Solr or ElasticSearch
>> documentation, about a Balancer object, which moves shards around in order
>> to balance the load on the cluster. You can implement something similar
>> which tries to balance the index sizes, creates new shards on-the-fly,
>> even
>> merge shards if suddenly a whole source is being removed from the system
>> etc.
>>
>> Also, note that the 'largest index size' threshold is really a machine
>> constraint and not Lucene's. So if you decide that 10 GB is your cutoff,
>> it
>> is pointless to create 10x10GB shards on the same machine -- searching
>> them
>> is just like searching a 100GB index w/ 10x10GB segments. Perhaps it's
>> even
>> worse because you consume more RAM when the indexes are split (e.g., terms
>> index, field infos etc.).
>>
>> Shai
>>
>> On Sun, Jun 12, 2011 at 3:10 AM, Erick Erickson<erickerickson@gmail.com
>> >wrote:
>>
>>  <<<We can't assume anything about the machine running it,
>>> so testing won't really tell us much>>>
>>>
>>> Hmmm, then it's pretty hopeless I think. Problem is that
>>> anything you say about running on a machine with
>>> 2G available memory on a single processor is completely
>>> incomparable to running on a machine with 64G of
>>> memory available for Lucene and 16 processors.
>>>
>>> There's really no such thing as an "optimum" Lucene index
>>> size, it always relates to the characteristics of the
>>> underlying hardware.
>>>
>>> I think the best you can do is actually test on various
>>> configurations, then at least you can say "on configuration
>>> X this is the tipping point".
>>>
>>> Sorry there isn't a better answer that I know of, but...
>>>
>>> Best
>>> Erick
>>>
>>> On Sat, Jun 11, 2011 at 3:37 PM, Itamar Syn-Hershko<itamar@code972.com>
>>> wrote:
>>>
>>>> Hi all,
>>>>
>>>> I know Lucene indexes to be at their optimum up to a certain size - said
>>>>
>>> to
>>>
>>>> be around several GBs. I haven't found a good discussion over this, but
>>>>
>>> its
>>>
>>>> my understanding that at some point its better to split an index into
>>>>
>>> parts
>>>
>>>> (a la sharding) than to continue searching on a huge-size index. I
>>>> assume
>>>> this has to do with OS and IO configurations. Can anyone point me to
>>>> more
>>>> info on this?
>>>>
>>>> We have a product that is using Lucene for various searches, and at the
>>>> moment each type of search is using its own Lucene index. We plan on
>>>> refactoring the way it works and to combine all indexes into one -
>>>> making
>>>> the whole system more robust and with a smaller memory footprint, among
>>>> other things.
>>>>
>>>> Assuming the above is true, we are interested in knowing how to do this
>>>> correctly. Initially all our indexes will be run in one big index, but
>>>> if
>>>>
>>> at
>>>
>>>> some index size there is a severe performance degradation we would like
>>>>
>>> to
>>>
>>>> handle that correctly by starting a new FSDirectory index to flush into,
>>>>
>>> or
>>>
>>>> by re-indexing and moving large indexes into their own Lucene index.
>>>>
>>>> Are there are any guidelines for measuring or estimating this correctly?
>>>> what we should be aware of while considering all that? We can't assume
>>>> anything about the machine running it, so testing won't really tell us
>>>> much...
>>>>
>>>> Thanks in advance for any input on this,
>>>>
>>>> Itamar.
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>  ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--20cf302d49c645637504a57fd47d--

From java-user-return-49979-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Jun 12 10:17:10 2011
Return-Path: <java-user-return-49979-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3291B4239
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 12 Jun 2011 10:17:10 +0000 (UTC)
Received: (qmail 4384 invoked by uid 500); 12 Jun 2011 10:17:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4342 invoked by uid 500); 12 Jun 2011 10:17:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4334 invoked by uid 99); 12 Jun 2011 10:17:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Jun 2011 10:17:07 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Jun 2011 10:17:03 +0000
Received: by vws7 with SMTP id 7so5047746vws.35
        for <java-user@lucene.apache.org>; Sun, 12 Jun 2011 03:16:42 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.52.96.195 with SMTP id du3mr5516498vdb.276.1307873800610; Sun,
 12 Jun 2011 03:16:40 -0700 (PDT)
Received: by 10.52.162.5 with HTTP; Sun, 12 Jun 2011 03:16:40 -0700 (PDT)
In-Reply-To: <4DF47461.1050004@code972.com>
References: <4DF3C40F.9090703@code972.com>
	<BANLkTi=2U3RTtOq_1oiA_FGBwpiPcVVMyg@mail.gmail.com>
	<BANLkTinHragJQUTX3j+mcdW0K0B73A0T=A@mail.gmail.com>
	<4DF47461.1050004@code972.com>
Date: Sun, 12 Jun 2011 06:16:40 -0400
Message-ID: <BANLkTim_RCpPNkb2WyGwCJ3a0eDyiOBGjA@mail.gmail.com>
Subject: Re: Index size and performance degradation
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

Remember that memory-mapping is not a panacea: at the end of the day,
if there just isn't enough RAM on the machine to keep your full
"working set" hot, then the OS will have to hit the disk, regardless
of whether the access is through MMap or a "traditional" IO request.

That said, on Fedora Linux anyway, I generally see better performance
from MMap than from NIOFSDir; eg see the 2nd chart here:

  http://blog.mikemccandless.com/2011/06/lucenes-near-real-time-search-is-fast.html

Mike McCandless

http://blog.mikemccandless.com

On Sun, Jun 12, 2011 at 4:10 AM, Itamar Syn-Hershko <itamar@code972.com> wrote:
> Thanks.
>
>
> The whole point of my question was to find out if and how to make balancing
> on the SAME machine. Apparently thats not going to help and at a certain
> point we will just have to prompt the user to buy more hardware...
>
>
> Out of curiosity, isn't there anything that we can do to avoid that? for
> instance using memory-mapped files for the indexes? anything that would help
> us overcome OS limitations of that sort...
>
>
> Also, you mention a scheduled job to check for performance degradation; any
> idea how serious such a drop should be for sharding to be really beneficial?
> or is it application specific too?
>
>
> Itamar.
>
>
> On 12/06/2011 06:43, Shai Erera wrote:
>
>> I agree w/ Erick, there is no cutoff point (index size for that matter)
>> above which you start sharding.
>>
>> What you can do is create a scheduled job in your system that runs a
>> select
>> list of queries and monitors their performance. Once it degrades, it
>> shards
>> the index by either splitting it (you can use IndexSplitter under contrib)
>> or create a new shard, and direct new documents to it.
>>
>> I think I read somewhere, not sure if it was in Solr or ElasticSearch
>> documentation, about a Balancer object, which moves shards around in order
>> to balance the load on the cluster. You can implement something similar
>> which tries to balance the index sizes, creates new shards on-the-fly,
>> even
>> merge shards if suddenly a whole source is being removed from the system
>> etc.
>>
>> Also, note that the 'largest index size' threshold is really a machine
>> constraint and not Lucene's. So if you decide that 10 GB is your cutoff,
>> it
>> is pointless to create 10x10GB shards on the same machine -- searching
>> them
>> is just like searching a 100GB index w/ 10x10GB segments. Perhaps it's
>> even
>> worse because you consume more RAM when the indexes are split (e.g., terms
>> index, field infos etc.).
>>
>> Shai
>>
>> On Sun, Jun 12, 2011 at 3:10 AM, Erick
>> Erickson<erickerickson@gmail.com>wrote:
>>
>>> <<<We can't assume anything about the machine running it,
>>> so testing won't really tell us much>>>
>>>
>>> Hmmm, then it's pretty hopeless I think. Problem is that
>>> anything you say about running on a machine with
>>> 2G available memory on a single processor is completely
>>> incomparable to running on a machine with 64G of
>>> memory available for Lucene and 16 processors.
>>>
>>> There's really no such thing as an "optimum" Lucene index
>>> size, it always relates to the characteristics of the
>>> underlying hardware.
>>>
>>> I think the best you can do is actually test on various
>>> configurations, then at least you can say "on configuration
>>> X this is the tipping point".
>>>
>>> Sorry there isn't a better answer that I know of, but...
>>>
>>> Best
>>> Erick
>>>
>>> On Sat, Jun 11, 2011 at 3:37 PM, Itamar Syn-Hershko<itamar@code972.com>
>>> wrote:
>>>>
>>>> Hi all,
>>>>
>>>> I know Lucene indexes to be at their optimum up to a certain size - said
>>>
>>> to
>>>>
>>>> be around several GBs. I haven't found a good discussion over this, but
>>>
>>> its
>>>>
>>>> my understanding that at some point its better to split an index into
>>>
>>> parts
>>>>
>>>> (a la sharding) than to continue searching on a huge-size index. I
>>>> assume
>>>> this has to do with OS and IO configurations. Can anyone point me to
>>>> more
>>>> info on this?
>>>>
>>>> We have a product that is using Lucene for various searches, and at the
>>>> moment each type of search is using its own Lucene index. We plan on
>>>> refactoring the way it works and to combine all indexes into one -
>>>> making
>>>> the whole system more robust and with a smaller memory footprint, among
>>>> other things.
>>>>
>>>> Assuming the above is true, we are interested in knowing how to do this
>>>> correctly. Initially all our indexes will be run in one big index, but
>>>> if
>>>
>>> at
>>>>
>>>> some index size there is a severe performance degradation we would like
>>>
>>> to
>>>>
>>>> handle that correctly by starting a new FSDirectory index to flush into,
>>>
>>> or
>>>>
>>>> by re-indexing and moving large indexes into their own Lucene index.
>>>>
>>>> Are there are any guidelines for measuring or estimating this correctly?
>>>> what we should be aware of while considering all that? We can't assume
>>>> anything about the machine running it, so testing won't really tell us
>>>> much...
>>>>
>>>> Thanks in advance for any input on this,
>>>>
>>>> Itamar.
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49980-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Jun 12 17:13:39 2011
Return-Path: <java-user-return-49980-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2DE4F4F67
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 12 Jun 2011 17:13:39 +0000 (UTC)
Received: (qmail 82332 invoked by uid 500); 12 Jun 2011 17:13:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82288 invoked by uid 500); 12 Jun 2011 17:13:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82280 invoked by uid 99); 12 Jun 2011 17:13:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Jun 2011 17:13:36 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [188.121.53.1] (HELO n1plout04-01.prod.ams1.secureserver.net) (188.121.53.1)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 12 Jun 2011 17:13:28 +0000
Received: (qmail 16614 invoked from network); 12 Jun 2011 17:13:03 -0000
Received: from unknown (79.179.3.190)
  by n1plout04-01.prod.ams1.secureserver.net (188.121.53.1) with ESMTP; 12 Jun 2011 17:13:02 -0000
Message-ID: <4DF4F39C.1090108@code972.com>
Date: Sun, 12 Jun 2011 20:13:00 +0300
From: Itamar Syn-Hershko <itamar@code972.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.17) Gecko/20110414 Lightning/1.0b2 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Index size and performance degradation
References: <4DF3C40F.9090703@code972.com>	<BANLkTi=2U3RTtOq_1oiA_FGBwpiPcVVMyg@mail.gmail.com>	<BANLkTinHragJQUTX3j+mcdW0K0B73A0T=A@mail.gmail.com>	<4DF47461.1050004@code972.com> <BANLkTi=AcTVV1ruMvvWj_a7Ha_VzaxSuzA@mail.gmail.com>
In-Reply-To: <BANLkTi=AcTVV1ruMvvWj_a7Ha_VzaxSuzA@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Shai, what would you call a smart app-level cache? remembering frequent 
searches and storing them handy? or are there more advanced techniques 
for that? any pointers appreciated...


Thanks for all the advice!


On 12/06/2011 11:42, Shai Erera wrote:

>> isn't there anything that we can do to avoid that?
>>
> That was my point :) -->  you can optimize your search application, use mmap
> files, smart caches etc., until it reaches a point where you need to shard.
> But it's still application dependent, not much of an OS thing. You can count
> on the OS to cache what it needs in RAM, and if your index is small enough
> to exist in RAM, then it will probably be there. We've tried in the past to
> use RAMDirectory for GBs of indexes (we had the RAM to spare), and the OS
> cache just did a better job.
>
> On the other hand, you can have a 100GB index, but very smart app-level
> caches that return results in few ms ...
>
> any idea how serious such a drop should be for sharding to be really
>> beneficial? or is it application specific too?
>
> That's application specific too I'm afraid. For instance, if your system is
> expected to support 10 queries/sec, and that tool determines that it no
> longer supports it, but dropped to, say, 7, then that is not something
> you're willing to tolerate and therefore you shard the index.
>
> But I've been working w/ applications that achieved 80 queries/sec on a
> large index on one machine, and others that were willing to accept 30
> seconds and even higher response time per query (for total recall, usually
> legal stuff). So, again, it's really hard to come up w/ a magic number :).
>
> People are used to Google's sub-second search response time. So if your app
> is aiming to give the same experience, then factor in some reasonable
> statistics like:
> * No query takes longer than 5s
> * Majority of the queries, say 80%, finish in<  500ms
> * Above still holds in X queries/sec rate (X is dynamic and depends on what
> you aim for)
>
> These are just some numbers I've been using recently to benchmark my app
>
> Shai
>
> On Sun, Jun 12, 2011 at 11:10 AM, Itamar Syn-Hershko<itamar@code972.com>wrote:
>
>> Thanks.
>>
>>
>> The whole point of my question was to find out if and how to make balancing
>> on the SAME machine. Apparently thats not going to help and at a certain
>> point we will just have to prompt the user to buy more hardware...
>>
>>
>> Out of curiosity, isn't there anything that we can do to avoid that? for
>> instance using memory-mapped files for the indexes? anything that would help
>> us overcome OS limitations of that sort...
>>
>>
>> Also, you mention a scheduled job to check for performance degradation; any
>> idea how serious such a drop should be for sharding to be really beneficial?
>> or is it application specific too?
>>
>>
>> Itamar.
>>
>>
>>
>> On 12/06/2011 06:43, Shai Erera wrote:
>>
>>   I agree w/ Erick, there is no cutoff point (index size for that matter)
>>> above which you start sharding.
>>>
>>> What you can do is create a scheduled job in your system that runs a
>>> select
>>> list of queries and monitors their performance. Once it degrades, it
>>> shards
>>> the index by either splitting it (you can use IndexSplitter under contrib)
>>> or create a new shard, and direct new documents to it.
>>>
>>> I think I read somewhere, not sure if it was in Solr or ElasticSearch
>>> documentation, about a Balancer object, which moves shards around in order
>>> to balance the load on the cluster. You can implement something similar
>>> which tries to balance the index sizes, creates new shards on-the-fly,
>>> even
>>> merge shards if suddenly a whole source is being removed from the system
>>> etc.
>>>
>>> Also, note that the 'largest index size' threshold is really a machine
>>> constraint and not Lucene's. So if you decide that 10 GB is your cutoff,
>>> it
>>> is pointless to create 10x10GB shards on the same machine -- searching
>>> them
>>> is just like searching a 100GB index w/ 10x10GB segments. Perhaps it's
>>> even
>>> worse because you consume more RAM when the indexes are split (e.g., terms
>>> index, field infos etc.).
>>>
>>> Shai
>>>
>>> On Sun, Jun 12, 2011 at 3:10 AM, Erick Erickson<erickerickson@gmail.com
>>>> wrote:
>>>   <<<We can't assume anything about the machine running it,
>>>> so testing won't really tell us much>>>
>>>>
>>>> Hmmm, then it's pretty hopeless I think. Problem is that
>>>> anything you say about running on a machine with
>>>> 2G available memory on a single processor is completely
>>>> incomparable to running on a machine with 64G of
>>>> memory available for Lucene and 16 processors.
>>>>
>>>> There's really no such thing as an "optimum" Lucene index
>>>> size, it always relates to the characteristics of the
>>>> underlying hardware.
>>>>
>>>> I think the best you can do is actually test on various
>>>> configurations, then at least you can say "on configuration
>>>> X this is the tipping point".
>>>>
>>>> Sorry there isn't a better answer that I know of, but...
>>>>
>>>> Best
>>>> Erick
>>>>
>>>> On Sat, Jun 11, 2011 at 3:37 PM, Itamar Syn-Hershko<itamar@code972.com>
>>>> wrote:
>>>>
>>>>> Hi all,
>>>>>
>>>>> I know Lucene indexes to be at their optimum up to a certain size - said
>>>>>
>>>> to
>>>>
>>>>> be around several GBs. I haven't found a good discussion over this, but
>>>>>
>>>> its
>>>>
>>>>> my understanding that at some point its better to split an index into
>>>>>
>>>> parts
>>>>
>>>>> (a la sharding) than to continue searching on a huge-size index. I
>>>>> assume
>>>>> this has to do with OS and IO configurations. Can anyone point me to
>>>>> more
>>>>> info on this?
>>>>>
>>>>> We have a product that is using Lucene for various searches, and at the
>>>>> moment each type of search is using its own Lucene index. We plan on
>>>>> refactoring the way it works and to combine all indexes into one -
>>>>> making
>>>>> the whole system more robust and with a smaller memory footprint, among
>>>>> other things.
>>>>>
>>>>> Assuming the above is true, we are interested in knowing how to do this
>>>>> correctly. Initially all our indexes will be run in one big index, but
>>>>> if
>>>>>
>>>> at
>>>>
>>>>> some index size there is a severe performance degradation we would like
>>>>>
>>>> to
>>>>
>>>>> handle that correctly by starting a new FSDirectory index to flush into,
>>>>>
>>>> or
>>>>
>>>>> by re-indexing and moving large indexes into their own Lucene index.
>>>>>
>>>>> Are there are any guidelines for measuring or estimating this correctly?
>>>>> what we should be aware of while considering all that? We can't assume
>>>>> anything about the machine running it, so testing won't really tell us
>>>>> much...
>>>>>
>>>>> Thanks in advance for any input on this,
>>>>>
>>>>> Itamar.
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>   ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49981-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Jun 12 17:15:05 2011
Return-Path: <java-user-return-49981-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1294F403F
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 12 Jun 2011 17:15:05 +0000 (UTC)
Received: (qmail 84854 invoked by uid 500); 12 Jun 2011 17:15:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84801 invoked by uid 500); 12 Jun 2011 17:15:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84791 invoked by uid 99); 12 Jun 2011 17:15:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Jun 2011 17:15:02 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [188.121.53.1] (HELO n1plout04-01.prod.ams1.secureserver.net) (188.121.53.1)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 12 Jun 2011 17:14:55 +0000
Received: (qmail 16914 invoked from network); 12 Jun 2011 17:14:35 -0000
Received: from unknown (79.179.3.190)
  by n1plout04-01.prod.ams1.secureserver.net (188.121.53.1) with ESMTP; 12 Jun 2011 17:14:15 -0000
Message-ID: <4DF4F3E6.9010507@code972.com>
Date: Sun, 12 Jun 2011 20:14:14 +0300
From: Itamar Syn-Hershko <itamar@code972.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.17) Gecko/20110414 Lightning/1.0b2 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Index size and performance degradation
References: <4DF3C40F.9090703@code972.com>	<BANLkTi=2U3RTtOq_1oiA_FGBwpiPcVVMyg@mail.gmail.com>	<BANLkTinHragJQUTX3j+mcdW0K0B73A0T=A@mail.gmail.com>	<4DF47461.1050004@code972.com> <BANLkTin4Q+W9eWryacvJiL5yHHykx3xeCA@mail.gmail.com>
In-Reply-To: <BANLkTin4Q+W9eWryacvJiL5yHHykx3xeCA@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Andrew, no particular hardware setup I'm afraid. That is a general 
product which we can't assume anything about the hardware it would run 
on. Thanks for the tip on multi-core tho.

On 12/06/2011 11:45, Andrew Kane wrote:

> In the literature there is some evidence that sharding of in-memory indexes
> on multi-core machines might be better.  Has anyone tried this lately?
>
>      http://ieeexplore.ieee.org/xpl/freeabs_all.jsp?arnumber=4228359
>
> Single disk machines (HDD or SSD) would be slower.  Multi-disk or RAID type
> setups might have some benefits.  What's your hardware setup?
>
> Andrew.
>
>
> On Sun, Jun 12, 2011 at 4:10 AM, Itamar Syn-Hershko<itamar@code972.com>wrote:
>
>> Thanks.
>>
>>
>> The whole point of my question was to find out if and how to make balancing
>> on the SAME machine. Apparently thats not going to help and at a certain
>> point we will just have to prompt the user to buy more hardware...
>>
>>
>> Out of curiosity, isn't there anything that we can do to avoid that? for
>> instance using memory-mapped files for the indexes? anything that would help
>> us overcome OS limitations of that sort...
>>
>>
>> Also, you mention a scheduled job to check for performance degradation; any
>> idea how serious such a drop should be for sharding to be really beneficial?
>> or is it application specific too?
>>
>>
>> Itamar.
>>
>>
>>
>> On 12/06/2011 06:43, Shai Erera wrote:
>>
>>   I agree w/ Erick, there is no cutoff point (index size for that matter)
>>> above which you start sharding.
>>>
>>> What you can do is create a scheduled job in your system that runs a
>>> select
>>> list of queries and monitors their performance. Once it degrades, it
>>> shards
>>> the index by either splitting it (you can use IndexSplitter under contrib)
>>> or create a new shard, and direct new documents to it.
>>>
>>> I think I read somewhere, not sure if it was in Solr or ElasticSearch
>>> documentation, about a Balancer object, which moves shards around in order
>>> to balance the load on the cluster. You can implement something similar
>>> which tries to balance the index sizes, creates new shards on-the-fly,
>>> even
>>> merge shards if suddenly a whole source is being removed from the system
>>> etc.
>>>
>>> Also, note that the 'largest index size' threshold is really a machine
>>> constraint and not Lucene's. So if you decide that 10 GB is your cutoff,
>>> it
>>> is pointless to create 10x10GB shards on the same machine -- searching
>>> them
>>> is just like searching a 100GB index w/ 10x10GB segments. Perhaps it's
>>> even
>>> worse because you consume more RAM when the indexes are split (e.g., terms
>>> index, field infos etc.).
>>>
>>> Shai
>>>
>>> On Sun, Jun 12, 2011 at 3:10 AM, Erick Erickson<erickerickson@gmail.com
>>>> wrote:
>>>   <<<We can't assume anything about the machine running it,
>>>> so testing won't really tell us much>>>
>>>>
>>>> Hmmm, then it's pretty hopeless I think. Problem is that
>>>> anything you say about running on a machine with
>>>> 2G available memory on a single processor is completely
>>>> incomparable to running on a machine with 64G of
>>>> memory available for Lucene and 16 processors.
>>>>
>>>> There's really no such thing as an "optimum" Lucene index
>>>> size, it always relates to the characteristics of the
>>>> underlying hardware.
>>>>
>>>> I think the best you can do is actually test on various
>>>> configurations, then at least you can say "on configuration
>>>> X this is the tipping point".
>>>>
>>>> Sorry there isn't a better answer that I know of, but...
>>>>
>>>> Best
>>>> Erick
>>>>
>>>> On Sat, Jun 11, 2011 at 3:37 PM, Itamar Syn-Hershko<itamar@code972.com>
>>>> wrote:
>>>>
>>>>> Hi all,
>>>>>
>>>>> I know Lucene indexes to be at their optimum up to a certain size - said
>>>>>
>>>> to
>>>>
>>>>> be around several GBs. I haven't found a good discussion over this, but
>>>>>
>>>> its
>>>>
>>>>> my understanding that at some point its better to split an index into
>>>>>
>>>> parts
>>>>
>>>>> (a la sharding) than to continue searching on a huge-size index. I
>>>>> assume
>>>>> this has to do with OS and IO configurations. Can anyone point me to
>>>>> more
>>>>> info on this?
>>>>>
>>>>> We have a product that is using Lucene for various searches, and at the
>>>>> moment each type of search is using its own Lucene index. We plan on
>>>>> refactoring the way it works and to combine all indexes into one -
>>>>> making
>>>>> the whole system more robust and with a smaller memory footprint, among
>>>>> other things.
>>>>>
>>>>> Assuming the above is true, we are interested in knowing how to do this
>>>>> correctly. Initially all our indexes will be run in one big index, but
>>>>> if
>>>>>
>>>> at
>>>>
>>>>> some index size there is a severe performance degradation we would like
>>>>>
>>>> to
>>>>
>>>>> handle that correctly by starting a new FSDirectory index to flush into,
>>>>>
>>>> or
>>>>
>>>>> by re-indexing and moving large indexes into their own Lucene index.
>>>>>
>>>>> Are there are any guidelines for measuring or estimating this correctly?
>>>>> what we should be aware of while considering all that? We can't assume
>>>>> anything about the machine running it, so testing won't really tell us
>>>>> much...
>>>>>
>>>>> Thanks in advance for any input on this,
>>>>>
>>>>> Itamar.
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>   ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49982-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Jun 12 17:30:11 2011
Return-Path: <java-user-return-49982-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 73D7348DE
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 12 Jun 2011 17:30:11 +0000 (UTC)
Received: (qmail 94579 invoked by uid 500); 12 Jun 2011 17:30:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94515 invoked by uid 500); 12 Jun 2011 17:30:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94507 invoked by uid 99); 12 Jun 2011 17:30:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Jun 2011 17:30:09 +0000
X-ASF-Spam-Status: No, hits=4.0 required=5.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLY,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of serera@gmail.com designates 209.85.210.176 as permitted sender)
Received: from [209.85.210.176] (HELO mail-iy0-f176.google.com) (209.85.210.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Jun 2011 17:30:03 +0000
Received: by iym1 with SMTP id 1so5231743iym.35
        for <java-user@lucene.apache.org>; Sun, 12 Jun 2011 10:29:43 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=FOZ9rRSAolGXjFVTO6dUL5pFFtqncuMerJnD8EMiPBQ=;
        b=kVFp2vnoepasowzjT/JtIygeWPaRWZ6RgWdUfcM+9WnjRKu9EqPpDuNe4ZsfnuIo//
         5sY0II7TkZa5buKaTI9KNY2UYSi9UaLbP6bBufii5XFiDXnJ8MjrdkCBzAcuc7upvOSE
         Wj4yFfVqGHXgsEjaiXNfLnaxi+gLUUEATdk1A=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=s+64hzpivsTiRhb0saxY2NhpJd3EJ2xDwyEJm3BCysn98bID6U6AZehyAqHxozM+DP
         kpZuEKa2BvVUj6FaWkQvXyerhISRDU5Z6xFVdpTsQNBXvrKtYJml80D9HIqeNFfwBDIx
         Raj1RV4NzWCaNPv1cVUF+HAola8/aG3Ns8JKU=
MIME-Version: 1.0
Received: by 10.42.136.197 with SMTP id v5mr3720196ict.513.1307899782598; Sun,
 12 Jun 2011 10:29:42 -0700 (PDT)
Received: by 10.42.3.209 with HTTP; Sun, 12 Jun 2011 10:29:42 -0700 (PDT)
In-Reply-To: <4DF4F39C.1090108@code972.com>
References: <4DF3C40F.9090703@code972.com>
	<BANLkTi=2U3RTtOq_1oiA_FGBwpiPcVVMyg@mail.gmail.com>
	<BANLkTinHragJQUTX3j+mcdW0K0B73A0T=A@mail.gmail.com>
	<4DF47461.1050004@code972.com>
	<BANLkTi=AcTVV1ruMvvWj_a7Ha_VzaxSuzA@mail.gmail.com>
	<4DF4F39C.1090108@code972.com>
Date: Sun, 12 Jun 2011 20:29:42 +0300
Message-ID: <BANLkTi=1kufZzCieYVo95Ap_RLAFqwHepg@mail.gmail.com>
Subject: Re: Index size and performance degradation
From: Shai Erera <serera@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=90e6ba61357cf191aa04a5872586

--90e6ba61357cf191aa04a5872586
Content-Type: text/plain; charset=ISO-8859-1

>
> Shai, what would you call a smart app-level cache? remembering frequent
> searches and storing them handy?


Remembering frequent searches is good. If you do this, you can warm up the
cache whenever a new IndexSearcher is opened (e.g., if you use
SearcherManager from LIA2) and besides keeping the results 'ready', you also
keep them up-to-date.

Another thing to consider is session-level cache. This can have several
uses:
(1) In non-AJAX apps (probably not too many today, hopefully?), a page
reload can issue several queries to the backend, while usually only one
portion of the page gets updated, so caching the queries the user submitted
during his session will help here.
(2) If users interact w/ your web app by, e.g., repeating the same actions,
that will help. An example is a user who frequently clicks the "Back" and
"Forward" buttons in the browser. Although, there are client-side solutions
for that, using Dojo, which helps you store the 'previous' pages the user
visited.
(3) If your app is ACL-constrained, caching the user ACLs and their matching
docs will be very useful.

In another app I'm involved with there are several Filters that exist. Their
number varies between deployments, but for each they are fixed and known in
advance. Each Filter matches a different set of documents and queries are
always added one or more Filters. So we cache them (and warm them up when
opening new IndexSearchers) using CachingWrapperFilter, which is great since
it works at the segment level, so warming up is very fast usually.

Another cache, which is very high-level are pre-defined queries with their
matching result set. I.e., for queries like "my-company-name" you always
return a fixed N results, and only if the user pages through them, do you
run the actual query.

And the list can go on and on :).

Shai

On Sun, Jun 12, 2011 at 8:13 PM, Itamar Syn-Hershko <itamar@code972.com>wrote:

> Shai, what would you call a smart app-level cache? remembering frequent
> searches and storing them handy? or are there more advanced techniques for
> that? any pointers appreciated...
>
>
> Thanks for all the advice!
>
>
> On 12/06/2011 11:42, Shai Erera wrote:
>
>  isn't there anything that we can do to avoid that?
>>>
>>>  That was my point :) -->  you can optimize your search application, use
>> mmap
>> files, smart caches etc., until it reaches a point where you need to
>> shard.
>> But it's still application dependent, not much of an OS thing. You can
>> count
>> on the OS to cache what it needs in RAM, and if your index is small enough
>> to exist in RAM, then it will probably be there. We've tried in the past
>> to
>> use RAMDirectory for GBs of indexes (we had the RAM to spare), and the OS
>> cache just did a better job.
>>
>> On the other hand, you can have a 100GB index, but very smart app-level
>> caches that return results in few ms ...
>>
>> any idea how serious such a drop should be for sharding to be really
>>
>>> beneficial? or is it application specific too?
>>>
>>
>> That's application specific too I'm afraid. For instance, if your system
>> is
>> expected to support 10 queries/sec, and that tool determines that it no
>> longer supports it, but dropped to, say, 7, then that is not something
>> you're willing to tolerate and therefore you shard the index.
>>
>> But I've been working w/ applications that achieved 80 queries/sec on a
>> large index on one machine, and others that were willing to accept 30
>> seconds and even higher response time per query (for total recall, usually
>> legal stuff). So, again, it's really hard to come up w/ a magic number :).
>>
>> People are used to Google's sub-second search response time. So if your
>> app
>> is aiming to give the same experience, then factor in some reasonable
>> statistics like:
>> * No query takes longer than 5s
>> * Majority of the queries, say 80%, finish in<  500ms
>> * Above still holds in X queries/sec rate (X is dynamic and depends on
>> what
>> you aim for)
>>
>> These are just some numbers I've been using recently to benchmark my app
>>
>> Shai
>>
>> On Sun, Jun 12, 2011 at 11:10 AM, Itamar Syn-Hershko<itamar@code972.com
>> >wrote:
>>
>>  Thanks.
>>>
>>>
>>> The whole point of my question was to find out if and how to make
>>> balancing
>>> on the SAME machine. Apparently thats not going to help and at a certain
>>> point we will just have to prompt the user to buy more hardware...
>>>
>>>
>>> Out of curiosity, isn't there anything that we can do to avoid that? for
>>> instance using memory-mapped files for the indexes? anything that would
>>> help
>>> us overcome OS limitations of that sort...
>>>
>>>
>>> Also, you mention a scheduled job to check for performance degradation;
>>> any
>>> idea how serious such a drop should be for sharding to be really
>>> beneficial?
>>> or is it application specific too?
>>>
>>>
>>> Itamar.
>>>
>>>
>>>
>>> On 12/06/2011 06:43, Shai Erera wrote:
>>>
>>>  I agree w/ Erick, there is no cutoff point (index size for that matter)
>>>
>>>> above which you start sharding.
>>>>
>>>> What you can do is create a scheduled job in your system that runs a
>>>> select
>>>> list of queries and monitors their performance. Once it degrades, it
>>>> shards
>>>> the index by either splitting it (you can use IndexSplitter under
>>>> contrib)
>>>> or create a new shard, and direct new documents to it.
>>>>
>>>> I think I read somewhere, not sure if it was in Solr or ElasticSearch
>>>> documentation, about a Balancer object, which moves shards around in
>>>> order
>>>> to balance the load on the cluster. You can implement something similar
>>>> which tries to balance the index sizes, creates new shards on-the-fly,
>>>> even
>>>> merge shards if suddenly a whole source is being removed from the system
>>>> etc.
>>>>
>>>> Also, note that the 'largest index size' threshold is really a machine
>>>> constraint and not Lucene's. So if you decide that 10 GB is your cutoff,
>>>> it
>>>> is pointless to create 10x10GB shards on the same machine -- searching
>>>> them
>>>> is just like searching a 100GB index w/ 10x10GB segments. Perhaps it's
>>>> even
>>>> worse because you consume more RAM when the indexes are split (e.g.,
>>>> terms
>>>> index, field infos etc.).
>>>>
>>>> Shai
>>>>
>>>> On Sun, Jun 12, 2011 at 3:10 AM, Erick Erickson<erickerickson@gmail.com
>>>>
>>>>> wrote:
>>>>>
>>>>  <<<We can't assume anything about the machine running it,
>>>>
>>>>> so testing won't really tell us much>>>
>>>>>
>>>>> Hmmm, then it's pretty hopeless I think. Problem is that
>>>>> anything you say about running on a machine with
>>>>> 2G available memory on a single processor is completely
>>>>> incomparable to running on a machine with 64G of
>>>>> memory available for Lucene and 16 processors.
>>>>>
>>>>> There's really no such thing as an "optimum" Lucene index
>>>>> size, it always relates to the characteristics of the
>>>>> underlying hardware.
>>>>>
>>>>> I think the best you can do is actually test on various
>>>>> configurations, then at least you can say "on configuration
>>>>> X this is the tipping point".
>>>>>
>>>>> Sorry there isn't a better answer that I know of, but...
>>>>>
>>>>> Best
>>>>> Erick
>>>>>
>>>>> On Sat, Jun 11, 2011 at 3:37 PM, Itamar Syn-Hershko<itamar@code972.com
>>>>> >
>>>>> wrote:
>>>>>
>>>>>  Hi all,
>>>>>>
>>>>>> I know Lucene indexes to be at their optimum up to a certain size -
>>>>>> said
>>>>>>
>>>>>>  to
>>>>>
>>>>>  be around several GBs. I haven't found a good discussion over this,
>>>>>> but
>>>>>>
>>>>>>  its
>>>>>
>>>>>  my understanding that at some point its better to split an index into
>>>>>>
>>>>>>  parts
>>>>>
>>>>>  (a la sharding) than to continue searching on a huge-size index. I
>>>>>> assume
>>>>>> this has to do with OS and IO configurations. Can anyone point me to
>>>>>> more
>>>>>> info on this?
>>>>>>
>>>>>> We have a product that is using Lucene for various searches, and at
>>>>>> the
>>>>>> moment each type of search is using its own Lucene index. We plan on
>>>>>> refactoring the way it works and to combine all indexes into one -
>>>>>> making
>>>>>> the whole system more robust and with a smaller memory footprint,
>>>>>> among
>>>>>> other things.
>>>>>>
>>>>>> Assuming the above is true, we are interested in knowing how to do
>>>>>> this
>>>>>> correctly. Initially all our indexes will be run in one big index, but
>>>>>> if
>>>>>>
>>>>>>  at
>>>>>
>>>>>  some index size there is a severe performance degradation we would
>>>>>> like
>>>>>>
>>>>>>  to
>>>>>
>>>>>  handle that correctly by starting a new FSDirectory index to flush
>>>>>> into,
>>>>>>
>>>>>>  or
>>>>>
>>>>>  by re-indexing and moving large indexes into their own Lucene index.
>>>>>>
>>>>>> Are there are any guidelines for measuring or estimating this
>>>>>> correctly?
>>>>>> what we should be aware of while considering all that? We can't assume
>>>>>> anything about the machine running it, so testing won't really tell us
>>>>>> much...
>>>>>>
>>>>>> Thanks in advance for any input on this,
>>>>>>
>>>>>> Itamar.
>>>>>>
>>>>>>
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>>  ---------------------------------------------------------------------
>>>>>>
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>
>>>>>  ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--90e6ba61357cf191aa04a5872586--

From java-user-return-49983-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Jun 12 18:26:44 2011
Return-Path: <java-user-return-49983-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 95F62467E
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 12 Jun 2011 18:26:44 +0000 (UTC)
Received: (qmail 55853 invoked by uid 500); 12 Jun 2011 18:26:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55787 invoked by uid 500); 12 Jun 2011 18:26:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55775 invoked by uid 99); 12 Jun 2011 18:26:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Jun 2011 18:26:42 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [188.121.53.1] (HELO n1plout04-01.prod.ams1.secureserver.net) (188.121.53.1)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 12 Jun 2011 18:26:36 +0000
Received: (qmail 6649 invoked from network); 12 Jun 2011 18:26:12 -0000
Received: from unknown (79.179.3.190)
  by n1plout04-01.prod.ams1.secureserver.net (188.121.53.1) with ESMTP; 12 Jun 2011 18:25:56 -0000
Message-ID: <4DF504B2.4000105@code972.com>
Date: Sun, 12 Jun 2011 21:25:54 +0300
From: Itamar Syn-Hershko <itamar@code972.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.17) Gecko/20110414 Lightning/1.0b2 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Index size and performance degradation
References: <4DF3C40F.9090703@code972.com>	<BANLkTi=2U3RTtOq_1oiA_FGBwpiPcVVMyg@mail.gmail.com>	<BANLkTinHragJQUTX3j+mcdW0K0B73A0T=A@mail.gmail.com>	<4DF47461.1050004@code972.com> <BANLkTim_RCpPNkb2WyGwCJ3a0eDyiOBGjA@mail.gmail.com>
In-Reply-To: <BANLkTim_RCpPNkb2WyGwCJ3a0eDyiOBGjA@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Mike,


Speaking of NRT, and completely off-topic, I know: Lucene's NRT 
apparently isn't fast enough if Zoie was needed, and now that Zoie is 
around are there any plans to make it Lucene's default? or: why would 
one still use NRT when Zoie seem to work much better?


Itamar.


On 12/06/2011 13:16, Michael McCandless wrote:

> Remember that memory-mapping is not a panacea: at the end of the day,
> if there just isn't enough RAM on the machine to keep your full
> "working set" hot, then the OS will have to hit the disk, regardless
> of whether the access is through MMap or a "traditional" IO request.
>
> That said, on Fedora Linux anyway, I generally see better performance
> from MMap than from NIOFSDir; eg see the 2nd chart here:
>
>    http://blog.mikemccandless.com/2011/06/lucenes-near-real-time-search-is-fast.html
>
> Mike McCandless
>
> http://blog.mikemccandless.com
>
> On Sun, Jun 12, 2011 at 4:10 AM, Itamar Syn-Hershko<itamar@code972.com>  wrote:
>> Thanks.
>>
>>
>> The whole point of my question was to find out if and how to make balancing
>> on the SAME machine. Apparently thats not going to help and at a certain
>> point we will just have to prompt the user to buy more hardware...
>>
>>
>> Out of curiosity, isn't there anything that we can do to avoid that? for
>> instance using memory-mapped files for the indexes? anything that would help
>> us overcome OS limitations of that sort...
>>
>>
>> Also, you mention a scheduled job to check for performance degradation; any
>> idea how serious such a drop should be for sharding to be really beneficial?
>> or is it application specific too?
>>
>>
>> Itamar.
>>
>>
>> On 12/06/2011 06:43, Shai Erera wrote:
>>
>>> I agree w/ Erick, there is no cutoff point (index size for that matter)
>>> above which you start sharding.
>>>
>>> What you can do is create a scheduled job in your system that runs a
>>> select
>>> list of queries and monitors their performance. Once it degrades, it
>>> shards
>>> the index by either splitting it (you can use IndexSplitter under contrib)
>>> or create a new shard, and direct new documents to it.
>>>
>>> I think I read somewhere, not sure if it was in Solr or ElasticSearch
>>> documentation, about a Balancer object, which moves shards around in order
>>> to balance the load on the cluster. You can implement something similar
>>> which tries to balance the index sizes, creates new shards on-the-fly,
>>> even
>>> merge shards if suddenly a whole source is being removed from the system
>>> etc.
>>>
>>> Also, note that the 'largest index size' threshold is really a machine
>>> constraint and not Lucene's. So if you decide that 10 GB is your cutoff,
>>> it
>>> is pointless to create 10x10GB shards on the same machine -- searching
>>> them
>>> is just like searching a 100GB index w/ 10x10GB segments. Perhaps it's
>>> even
>>> worse because you consume more RAM when the indexes are split (e.g., terms
>>> index, field infos etc.).
>>>
>>> Shai
>>>
>>> On Sun, Jun 12, 2011 at 3:10 AM, Erick
>>> Erickson<erickerickson@gmail.com>wrote:
>>>
>>>> <<<We can't assume anything about the machine running it,
>>>> so testing won't really tell us much>>>
>>>>
>>>> Hmmm, then it's pretty hopeless I think. Problem is that
>>>> anything you say about running on a machine with
>>>> 2G available memory on a single processor is completely
>>>> incomparable to running on a machine with 64G of
>>>> memory available for Lucene and 16 processors.
>>>>
>>>> There's really no such thing as an "optimum" Lucene index
>>>> size, it always relates to the characteristics of the
>>>> underlying hardware.
>>>>
>>>> I think the best you can do is actually test on various
>>>> configurations, then at least you can say "on configuration
>>>> X this is the tipping point".
>>>>
>>>> Sorry there isn't a better answer that I know of, but...
>>>>
>>>> Best
>>>> Erick
>>>>
>>>> On Sat, Jun 11, 2011 at 3:37 PM, Itamar Syn-Hershko<itamar@code972.com>
>>>> wrote:
>>>>> Hi all,
>>>>>
>>>>> I know Lucene indexes to be at their optimum up to a certain size - said
>>>> to
>>>>> be around several GBs. I haven't found a good discussion over this, but
>>>> its
>>>>> my understanding that at some point its better to split an index into
>>>> parts
>>>>> (a la sharding) than to continue searching on a huge-size index. I
>>>>> assume
>>>>> this has to do with OS and IO configurations. Can anyone point me to
>>>>> more
>>>>> info on this?
>>>>>
>>>>> We have a product that is using Lucene for various searches, and at the
>>>>> moment each type of search is using its own Lucene index. We plan on
>>>>> refactoring the way it works and to combine all indexes into one -
>>>>> making
>>>>> the whole system more robust and with a smaller memory footprint, among
>>>>> other things.
>>>>>
>>>>> Assuming the above is true, we are interested in knowing how to do this
>>>>> correctly. Initially all our indexes will be run in one big index, but
>>>>> if
>>>> at
>>>>> some index size there is a severe performance degradation we would like
>>>> to
>>>>> handle that correctly by starting a new FSDirectory index to flush into,
>>>> or
>>>>> by re-indexing and moving large indexes into their own Lucene index.
>>>>>
>>>>> Are there are any guidelines for measuring or estimating this correctly?
>>>>> what we should be aware of while considering all that? We can't assume
>>>>> anything about the machine running it, so testing won't really tell us
>>>>> much...
>>>>>
>>>>> Thanks in advance for any input on this,
>>>>>
>>>>> Itamar.
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49984-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Jun 12 18:51:26 2011
Return-Path: <java-user-return-49984-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4923F47A4
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 12 Jun 2011 18:51:26 +0000 (UTC)
Received: (qmail 70004 invoked by uid 500); 12 Jun 2011 18:51:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69879 invoked by uid 500); 12 Jun 2011 18:51:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69871 invoked by uid 99); 12 Jun 2011 18:51:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Jun 2011 18:51:24 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [188.121.53.1] (HELO n1plout04-01.prod.ams1.secureserver.net) (188.121.53.1)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 12 Jun 2011 18:51:16 +0000
Received: (qmail 14867 invoked from network); 12 Jun 2011 18:50:55 -0000
Received: from unknown (79.179.3.190)
  by n1plout04-01.prod.ams1.secureserver.net (188.121.53.1) with ESMTP; 12 Jun 2011 18:50:54 -0000
Message-ID: <4DF50A8D.5040704@code972.com>
Date: Sun, 12 Jun 2011 21:50:53 +0300
From: Itamar Syn-Hershko <itamar@code972.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.17) Gecko/20110414 Lightning/1.0b2 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Index size and performance degradation
References: <4DF3C40F.9090703@code972.com>	<BANLkTi=2U3RTtOq_1oiA_FGBwpiPcVVMyg@mail.gmail.com>	<BANLkTinHragJQUTX3j+mcdW0K0B73A0T=A@mail.gmail.com>	<4DF47461.1050004@code972.com>	<BANLkTi=AcTVV1ruMvvWj_a7Ha_VzaxSuzA@mail.gmail.com>	<4DF4F39C.1090108@code972.com> <BANLkTi=1kufZzCieYVo95Ap_RLAFqwHepg@mail.gmail.com>
In-Reply-To: <BANLkTi=1kufZzCieYVo95Ap_RLAFqwHepg@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Our problem is a bit different. There aren't always common searches so 
if we cache blindly we could end up having too much RAM allocated for 
virtually nothing. And we need to allow for real-time search so caching 
will hardly help. We enforce some client-side caching, but again - the 
real-time requirement is a bit of a problem...


I'm not sure I understood the filters approach you described. Can you 
give an example?


So we'll have to sit and plan some strategies. Perhaps a Lucene API to 
allow prioritizing caching based on fields is going to prove useful in 
such scenarios - so some application logic could make the search core 
itself a bit more robust based on usage (or have Lucene learn on its own).


BTW, I don't actually recall reading about this topic anywhere, so 
thanks again for all the good advice and perhaps it worthy adding to LIA3 :)


Itamar.


On 12/06/2011 20:29, Shai Erera wrote:

>> Shai, what would you call a smart app-level cache? remembering frequent
>> searches and storing them handy?
>
> Remembering frequent searches is good. If you do this, you can warm up the
> cache whenever a new IndexSearcher is opened (e.g., if you use
> SearcherManager from LIA2) and besides keeping the results 'ready', you also
> keep them up-to-date.
>
> Another thing to consider is session-level cache. This can have several
> uses:
> (1) In non-AJAX apps (probably not too many today, hopefully?), a page
> reload can issue several queries to the backend, while usually only one
> portion of the page gets updated, so caching the queries the user submitted
> during his session will help here.
> (2) If users interact w/ your web app by, e.g., repeating the same actions,
> that will help. An example is a user who frequently clicks the "Back" and
> "Forward" buttons in the browser. Although, there are client-side solutions
> for that, using Dojo, which helps you store the 'previous' pages the user
> visited.
> (3) If your app is ACL-constrained, caching the user ACLs and their matching
> docs will be very useful.
>
> In another app I'm involved with there are several Filters that exist. Their
> number varies between deployments, but for each they are fixed and known in
> advance. Each Filter matches a different set of documents and queries are
> always added one or more Filters. So we cache them (and warm them up when
> opening new IndexSearchers) using CachingWrapperFilter, which is great since
> it works at the segment level, so warming up is very fast usually.
>
> Another cache, which is very high-level are pre-defined queries with their
> matching result set. I.e., for queries like "my-company-name" you always
> return a fixed N results, and only if the user pages through them, do you
> run the actual query.
>
> And the list can go on and on :).
>
> Shai

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49985-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Jun 12 20:12:31 2011
Return-Path: <java-user-return-49985-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 60CD84477
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 12 Jun 2011 20:12:31 +0000 (UTC)
Received: (qmail 42453 invoked by uid 500); 12 Jun 2011 20:12:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42340 invoked by uid 500); 12 Jun 2011 20:12:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42332 invoked by uid 99); 12 Jun 2011 20:12:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Jun 2011 20:12:28 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Jun 2011 20:12:22 +0000
Received: by vws7 with SMTP id 7so5304736vws.35
        for <java-user@lucene.apache.org>; Sun, 12 Jun 2011 13:12:01 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.52.116.42 with SMTP id jt10mr6065780vdb.36.1307909521061; Sun,
 12 Jun 2011 13:12:01 -0700 (PDT)
Received: by 10.52.162.5 with HTTP; Sun, 12 Jun 2011 13:12:01 -0700 (PDT)
In-Reply-To: <4DF504B2.4000105@code972.com>
References: <4DF3C40F.9090703@code972.com>
	<BANLkTi=2U3RTtOq_1oiA_FGBwpiPcVVMyg@mail.gmail.com>
	<BANLkTinHragJQUTX3j+mcdW0K0B73A0T=A@mail.gmail.com>
	<4DF47461.1050004@code972.com>
	<BANLkTim_RCpPNkb2WyGwCJ3a0eDyiOBGjA@mail.gmail.com>
	<4DF504B2.4000105@code972.com>
Date: Sun, 12 Jun 2011 16:12:01 -0400
Message-ID: <BANLkTim_sX8CQMknZJwWX4q6pt6Jx5wrWQ@mail.gmail.com>
Subject: Re: Index size and performance degradation
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

>From what I understand of Zoie (and it's been some time since I last
looked... so this could be wrong now), the biggest difference vs NRT
is that Zoie aims for "immediate consistency", ie index changes are
always made visible to the very next query, vs NRT which is
"controlled consistency", a blend between immediate and eventual
consistency where your app decides when the changes must become
visible.

But in exchange for that, Zoie pays a price: each search has a higher
cost per collected hit, since it must post-filter for deleted docs.
And since Zoie necessarily adds complexity, there's more risk; eg
there were some nasty Zoie bugs that took quite some time to track
down (under https://issues.apache.org/jira/browse/LUCENE-2729).

Anyway, I don't think that's a good tradeoff, in general, for our
users, because very few apps truly require immediate consistency from
Lucene (can anyone give an example where their app depends on
immediate consistency...?).  I think it's better to spend time during
reopen so that searches aren't slower.

That said, Lucene has already incorporated one big part of Zoie
(caching small segments in RAM) via the new NRTCachingDirectory (in
contrib/misc).  Also, the upcoming NRTManager
(https://issues.apache.org/jira/browse/LUCENE-2955) adds control over
visibility of specific indexing changes to queries that need to see
the changes.

Finally, even better would be to not have to make any tradeoff
whatsoever ;)  Twitter's approach (created by Michael Busch) seems to
bring immediate consistency with no search performance hit, so if we
do anything here likely it'll be similar to what Michael has done
(though, those changes are not simple either!).

Mike McCandless

http://blog.mikemccandless.com

On Sun, Jun 12, 2011 at 2:25 PM, Itamar Syn-Hershko <itamar@code972.com> wr=
ote:
> Mike,
>
>
> Speaking of NRT, and completely off-topic, I know: Lucene's NRT apparentl=
y
> isn't fast enough if Zoie was needed, and now that Zoie is around are the=
re
> any plans to make it Lucene's default? or: why would one still use NRT wh=
en
> Zoie seem to work much better?
>
>
> Itamar.
>
>
> On 12/06/2011 13:16, Michael McCandless wrote:
>
>> Remember that memory-mapping is not a panacea: at the end of the day,
>> if there just isn't enough RAM on the machine to keep your full
>> "working set" hot, then the OS will have to hit the disk, regardless
>> of whether the access is through MMap or a "traditional" IO request.
>>
>> That said, on Fedora Linux anyway, I generally see better performance
>> from MMap than from NIOFSDir; eg see the 2nd chart here:
>>
>>
>> http://blog.mikemccandless.com/2011/06/lucenes-near-real-time-search-is-=
fast.html
>>
>> Mike McCandless
>>
>> http://blog.mikemccandless.com
>>
>> On Sun, Jun 12, 2011 at 4:10 AM, Itamar Syn-Hershko<itamar@code972.com>
>> =A0wrote:
>>>
>>> Thanks.
>>>
>>>
>>> The whole point of my question was to find out if and how to make
>>> balancing
>>> on the SAME machine. Apparently thats not going to help and at a certai=
n
>>> point we will just have to prompt the user to buy more hardware...
>>>
>>>
>>> Out of curiosity, isn't there anything that we can do to avoid that? fo=
r
>>> instance using memory-mapped files for the indexes? anything that would
>>> help
>>> us overcome OS limitations of that sort...
>>>
>>>
>>> Also, you mention a scheduled job to check for performance degradation;
>>> any
>>> idea how serious such a drop should be for sharding to be really
>>> beneficial?
>>> or is it application specific too?
>>>
>>>
>>> Itamar.
>>>
>>>
>>> On 12/06/2011 06:43, Shai Erera wrote:
>>>
>>>> I agree w/ Erick, there is no cutoff point (index size for that matter=
)
>>>> above which you start sharding.
>>>>
>>>> What you can do is create a scheduled job in your system that runs a
>>>> select
>>>> list of queries and monitors their performance. Once it degrades, it
>>>> shards
>>>> the index by either splitting it (you can use IndexSplitter under
>>>> contrib)
>>>> or create a new shard, and direct new documents to it.
>>>>
>>>> I think I read somewhere, not sure if it was in Solr or ElasticSearch
>>>> documentation, about a Balancer object, which moves shards around in
>>>> order
>>>> to balance the load on the cluster. You can implement something simila=
r
>>>> which tries to balance the index sizes, creates new shards on-the-fly,
>>>> even
>>>> merge shards if suddenly a whole source is being removed from the syst=
em
>>>> etc.
>>>>
>>>> Also, note that the 'largest index size' threshold is really a machine
>>>> constraint and not Lucene's. So if you decide that 10 GB is your cutof=
f,
>>>> it
>>>> is pointless to create 10x10GB shards on the same machine -- searching
>>>> them
>>>> is just like searching a 100GB index w/ 10x10GB segments. Perhaps it's
>>>> even
>>>> worse because you consume more RAM when the indexes are split (e.g.,
>>>> terms
>>>> index, field infos etc.).
>>>>
>>>> Shai
>>>>
>>>> On Sun, Jun 12, 2011 at 3:10 AM, Erick
>>>> Erickson<erickerickson@gmail.com>wrote:
>>>>
>>>>> <<<We can't assume anything about the machine running it,
>>>>> so testing won't really tell us much>>>
>>>>>
>>>>> Hmmm, then it's pretty hopeless I think. Problem is that
>>>>> anything you say about running on a machine with
>>>>> 2G available memory on a single processor is completely
>>>>> incomparable to running on a machine with 64G of
>>>>> memory available for Lucene and 16 processors.
>>>>>
>>>>> There's really no such thing as an "optimum" Lucene index
>>>>> size, it always relates to the characteristics of the
>>>>> underlying hardware.
>>>>>
>>>>> I think the best you can do is actually test on various
>>>>> configurations, then at least you can say "on configuration
>>>>> X this is the tipping point".
>>>>>
>>>>> Sorry there isn't a better answer that I know of, but...
>>>>>
>>>>> Best
>>>>> Erick
>>>>>
>>>>> On Sat, Jun 11, 2011 at 3:37 PM, Itamar Syn-Hershko<itamar@code972.co=
m>
>>>>> wrote:
>>>>>>
>>>>>> Hi all,
>>>>>>
>>>>>> I know Lucene indexes to be at their optimum up to a certain size -
>>>>>> said
>>>>>
>>>>> to
>>>>>>
>>>>>> be around several GBs. I haven't found a good discussion over this,
>>>>>> but
>>>>>
>>>>> its
>>>>>>
>>>>>> my understanding that at some point its better to split an index int=
o
>>>>>
>>>>> parts
>>>>>>
>>>>>> (a la sharding) than to continue searching on a huge-size index. I
>>>>>> assume
>>>>>> this has to do with OS and IO configurations. Can anyone point me to
>>>>>> more
>>>>>> info on this?
>>>>>>
>>>>>> We have a product that is using Lucene for various searches, and at
>>>>>> the
>>>>>> moment each type of search is using its own Lucene index. We plan on
>>>>>> refactoring the way it works and to combine all indexes into one -
>>>>>> making
>>>>>> the whole system more robust and with a smaller memory footprint,
>>>>>> among
>>>>>> other things.
>>>>>>
>>>>>> Assuming the above is true, we are interested in knowing how to do
>>>>>> this
>>>>>> correctly. Initially all our indexes will be run in one big index, b=
ut
>>>>>> if
>>>>>
>>>>> at
>>>>>>
>>>>>> some index size there is a severe performance degradation we would
>>>>>> like
>>>>>
>>>>> to
>>>>>>
>>>>>> handle that correctly by starting a new FSDirectory index to flush
>>>>>> into,
>>>>>
>>>>> or
>>>>>>
>>>>>> by re-indexing and moving large indexes into their own Lucene index.
>>>>>>
>>>>>> Are there are any guidelines for measuring or estimating this
>>>>>> correctly?
>>>>>> what we should be aware of while considering all that? We can't assu=
me
>>>>>> anything about the machine running it, so testing won't really tell =
us
>>>>>> much...
>>>>>>
>>>>>> Thanks in advance for any input on this,
>>>>>>
>>>>>> Itamar.
>>>>>>
>>>>>>
>>>>>> --------------------------------------------------------------------=
-
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49986-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Jun 12 20:47:53 2011
Return-Path: <java-user-return-49986-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4CE9F41FB
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 12 Jun 2011 20:47:53 +0000 (UTC)
Received: (qmail 78036 invoked by uid 500); 12 Jun 2011 20:47:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77870 invoked by uid 500); 12 Jun 2011 20:47:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77862 invoked by uid 99); 12 Jun 2011 20:47:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Jun 2011 20:47:51 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [188.121.53.2] (HELO n1plout04-02.prod.ams1.secureserver.net) (188.121.53.2)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 12 Jun 2011 20:47:43 +0000
Received: (qmail 27968 invoked from network); 12 Jun 2011 20:47:22 -0000
Received: from unknown (79.179.3.190)
  by n1plout04-02.prod.ams1.secureserver.net (188.121.53.2) with ESMTP; 12 Jun 2011 20:46:48 -0000
Message-ID: <4DF525B6.2000902@code972.com>
Date: Sun, 12 Jun 2011 23:46:46 +0300
From: Itamar Syn-Hershko <itamar@code972.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.17) Gecko/20110414 Lightning/1.0b2 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Index size and performance degradation
References: <4DF3C40F.9090703@code972.com>	<BANLkTi=2U3RTtOq_1oiA_FGBwpiPcVVMyg@mail.gmail.com>	<BANLkTinHragJQUTX3j+mcdW0K0B73A0T=A@mail.gmail.com>	<4DF47461.1050004@code972.com>	<BANLkTim_RCpPNkb2WyGwCJ3a0eDyiOBGjA@mail.gmail.com>	<4DF504B2.4000105@code972.com> <BANLkTim_sX8CQMknZJwWX4q6pt6Jx5wrWQ@mail.gmail.com>
In-Reply-To: <BANLkTim_sX8CQMknZJwWX4q6pt6Jx5wrWQ@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for your detailed answer. We'll have to tackle this and see whats 
more important to us then. I'd definitely love to hear Zoie has overcame 
all that...


Any pointers to Michael Busch's approach? I take this has something to 
do with the core itself or index format, probably using the Flex version?


Itamar.


On 12/06/2011 23:12, Michael McCandless wrote:

> > From what I understand of Zoie (and it's been some time since I last
> looked... so this could be wrong now), the biggest difference vs NRT
> is that Zoie aims for "immediate consistency", ie index changes are
> always made visible to the very next query, vs NRT which is
> "controlled consistency", a blend between immediate and eventual
> consistency where your app decides when the changes must become
> visible.
>
> But in exchange for that, Zoie pays a price: each search has a higher
> cost per collected hit, since it must post-filter for deleted docs.
> And since Zoie necessarily adds complexity, there's more risk; eg
> there were some nasty Zoie bugs that took quite some time to track
> down (under https://issues.apache.org/jira/browse/LUCENE-2729).
>
> Anyway, I don't think that's a good tradeoff, in general, for our
> users, because very few apps truly require immediate consistency from
> Lucene (can anyone give an example where their app depends on
> immediate consistency...?).  I think it's better to spend time during
> reopen so that searches aren't slower.
>
> That said, Lucene has already incorporated one big part of Zoie
> (caching small segments in RAM) via the new NRTCachingDirectory (in
> contrib/misc).  Also, the upcoming NRTManager
> (https://issues.apache.org/jira/browse/LUCENE-2955) adds control over
> visibility of specific indexing changes to queries that need to see
> the changes.
>
> Finally, even better would be to not have to make any tradeoff
> whatsoever ;)  Twitter's approach (created by Michael Busch) seems to
> bring immediate consistency with no search performance hit, so if we
> do anything here likely it'll be similar to what Michael has done
> (though, those changes are not simple either!).
>
> Mike McCandless
>
> http://blog.mikemccandless.com
>
> On Sun, Jun 12, 2011 at 2:25 PM, Itamar Syn-Hershko<itamar@code972.com>  wrote:
>> Mike,
>>
>>
>> Speaking of NRT, and completely off-topic, I know: Lucene's NRT apparently
>> isn't fast enough if Zoie was needed, and now that Zoie is around are there
>> any plans to make it Lucene's default? or: why would one still use NRT when
>> Zoie seem to work much better?
>>
>>
>> Itamar.
>>
>>
>> On 12/06/2011 13:16, Michael McCandless wrote:
>>
>>> Remember that memory-mapping is not a panacea: at the end of the day,
>>> if there just isn't enough RAM on the machine to keep your full
>>> "working set" hot, then the OS will have to hit the disk, regardless
>>> of whether the access is through MMap or a "traditional" IO request.
>>>
>>> That said, on Fedora Linux anyway, I generally see better performance
>>> from MMap than from NIOFSDir; eg see the 2nd chart here:
>>>
>>>
>>> http://blog.mikemccandless.com/2011/06/lucenes-near-real-time-search-is-fast.html
>>>
>>> Mike McCandless
>>>
>>> http://blog.mikemccandless.com
>>>
>>> On Sun, Jun 12, 2011 at 4:10 AM, Itamar Syn-Hershko<itamar@code972.com>
>>>   wrote:
>>>> Thanks.
>>>>
>>>>
>>>> The whole point of my question was to find out if and how to make
>>>> balancing
>>>> on the SAME machine. Apparently thats not going to help and at a certain
>>>> point we will just have to prompt the user to buy more hardware...
>>>>
>>>>
>>>> Out of curiosity, isn't there anything that we can do to avoid that? for
>>>> instance using memory-mapped files for the indexes? anything that would
>>>> help
>>>> us overcome OS limitations of that sort...
>>>>
>>>>
>>>> Also, you mention a scheduled job to check for performance degradation;
>>>> any
>>>> idea how serious such a drop should be for sharding to be really
>>>> beneficial?
>>>> or is it application specific too?
>>>>
>>>>
>>>> Itamar.
>>>>
>>>>
>>>> On 12/06/2011 06:43, Shai Erera wrote:
>>>>
>>>>> I agree w/ Erick, there is no cutoff point (index size for that matter)
>>>>> above which you start sharding.
>>>>>
>>>>> What you can do is create a scheduled job in your system that runs a
>>>>> select
>>>>> list of queries and monitors their performance. Once it degrades, it
>>>>> shards
>>>>> the index by either splitting it (you can use IndexSplitter under
>>>>> contrib)
>>>>> or create a new shard, and direct new documents to it.
>>>>>
>>>>> I think I read somewhere, not sure if it was in Solr or ElasticSearch
>>>>> documentation, about a Balancer object, which moves shards around in
>>>>> order
>>>>> to balance the load on the cluster. You can implement something similar
>>>>> which tries to balance the index sizes, creates new shards on-the-fly,
>>>>> even
>>>>> merge shards if suddenly a whole source is being removed from the system
>>>>> etc.
>>>>>
>>>>> Also, note that the 'largest index size' threshold is really a machine
>>>>> constraint and not Lucene's. So if you decide that 10 GB is your cutoff,
>>>>> it
>>>>> is pointless to create 10x10GB shards on the same machine -- searching
>>>>> them
>>>>> is just like searching a 100GB index w/ 10x10GB segments. Perhaps it's
>>>>> even
>>>>> worse because you consume more RAM when the indexes are split (e.g.,
>>>>> terms
>>>>> index, field infos etc.).
>>>>>
>>>>> Shai
>>>>>
>>>>> On Sun, Jun 12, 2011 at 3:10 AM, Erick
>>>>> Erickson<erickerickson@gmail.com>wrote:
>>>>>
>>>>>> <<<We can't assume anything about the machine running it,
>>>>>> so testing won't really tell us much>>>
>>>>>>
>>>>>> Hmmm, then it's pretty hopeless I think. Problem is that
>>>>>> anything you say about running on a machine with
>>>>>> 2G available memory on a single processor is completely
>>>>>> incomparable to running on a machine with 64G of
>>>>>> memory available for Lucene and 16 processors.
>>>>>>
>>>>>> There's really no such thing as an "optimum" Lucene index
>>>>>> size, it always relates to the characteristics of the
>>>>>> underlying hardware.
>>>>>>
>>>>>> I think the best you can do is actually test on various
>>>>>> configurations, then at least you can say "on configuration
>>>>>> X this is the tipping point".
>>>>>>
>>>>>> Sorry there isn't a better answer that I know of, but...
>>>>>>
>>>>>> Best
>>>>>> Erick
>>>>>>
>>>>>> On Sat, Jun 11, 2011 at 3:37 PM, Itamar Syn-Hershko<itamar@code972.com>
>>>>>> wrote:
>>>>>>> Hi all,
>>>>>>>
>>>>>>> I know Lucene indexes to be at their optimum up to a certain size -
>>>>>>> said
>>>>>> to
>>>>>>> be around several GBs. I haven't found a good discussion over this,
>>>>>>> but
>>>>>> its
>>>>>>> my understanding that at some point its better to split an index into
>>>>>> parts
>>>>>>> (a la sharding) than to continue searching on a huge-size index. I
>>>>>>> assume
>>>>>>> this has to do with OS and IO configurations. Can anyone point me to
>>>>>>> more
>>>>>>> info on this?
>>>>>>>
>>>>>>> We have a product that is using Lucene for various searches, and at
>>>>>>> the
>>>>>>> moment each type of search is using its own Lucene index. We plan on
>>>>>>> refactoring the way it works and to combine all indexes into one -
>>>>>>> making
>>>>>>> the whole system more robust and with a smaller memory footprint,
>>>>>>> among
>>>>>>> other things.
>>>>>>>
>>>>>>> Assuming the above is true, we are interested in knowing how to do
>>>>>>> this
>>>>>>> correctly. Initially all our indexes will be run in one big index, but
>>>>>>> if
>>>>>> at
>>>>>>> some index size there is a severe performance degradation we would
>>>>>>> like
>>>>>> to
>>>>>>> handle that correctly by starting a new FSDirectory index to flush
>>>>>>> into,
>>>>>> or
>>>>>>> by re-indexing and moving large indexes into their own Lucene index.
>>>>>>>
>>>>>>> Are there are any guidelines for measuring or estimating this
>>>>>>> correctly?
>>>>>>> what we should be aware of while considering all that? We can't assume
>>>>>>> anything about the machine running it, so testing won't really tell us
>>>>>>> much...
>>>>>>>
>>>>>>> Thanks in advance for any input on this,
>>>>>>>
>>>>>>> Itamar.
>>>>>>>
>>>>>>>
>>>>>>> ---------------------------------------------------------------------
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>
>>>>>>>
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49987-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun 13 03:24:06 2011
Return-Path: <java-user-return-49987-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7348C6DD6
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 13 Jun 2011 03:24:06 +0000 (UTC)
Received: (qmail 89754 invoked by uid 500); 13 Jun 2011 03:24:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89719 invoked by uid 500); 13 Jun 2011 03:24:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89711 invoked by uid 99); 13 Jun 2011 03:24:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jun 2011 03:24:02 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of serera@gmail.com designates 209.85.210.176 as permitted sender)
Received: from [209.85.210.176] (HELO mail-iy0-f176.google.com) (209.85.210.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jun 2011 03:23:55 +0000
Received: by iym1 with SMTP id 1so5554850iym.35
        for <java-user@lucene.apache.org>; Sun, 12 Jun 2011 20:23:34 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=Di1oU6n4mnqEHde8dqYYZ2pD/hyjy9DbubODkePfppg=;
        b=GJhNZmBgD6LnD2x5AZoXD2X4IeGCpL37Zq2NhWSx6x4hQgxZCUujPuoLtyNRbw0MRY
         VCZaJK8m+T8RHptBGPQ+Q1v3gDkpJlGx9uIEEJ2Hsa+QdytvkDz20hV+kfpfZfv4HeyI
         6/X9tooLZoMCAXqIw+F+0HbdUR0r3T9YQjGlA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=tVUIYE+5uyw22OIaOQjIFFfPpBilLE2n2I9VRmQ41PX48bzZNIbu690ct6Jvs0TI9V
         jml+KagsTKZZxbRIUxxpsE/m4iBOlGfZUOm1D3E10uclubwvuVpSa2JoxOZVEvsZyqJ+
         NsvdvhF1MsQdBIYx4/i+iYfuF9pDNF+GK8cBA=
MIME-Version: 1.0
Received: by 10.42.136.197 with SMTP id v5mr4196732ict.513.1307935413846; Sun,
 12 Jun 2011 20:23:33 -0700 (PDT)
Received: by 10.42.3.209 with HTTP; Sun, 12 Jun 2011 20:23:33 -0700 (PDT)
In-Reply-To: <4DF50A8D.5040704@code972.com>
References: <4DF3C40F.9090703@code972.com>
	<BANLkTi=2U3RTtOq_1oiA_FGBwpiPcVVMyg@mail.gmail.com>
	<BANLkTinHragJQUTX3j+mcdW0K0B73A0T=A@mail.gmail.com>
	<4DF47461.1050004@code972.com>
	<BANLkTi=AcTVV1ruMvvWj_a7Ha_VzaxSuzA@mail.gmail.com>
	<4DF4F39C.1090108@code972.com>
	<BANLkTi=1kufZzCieYVo95Ap_RLAFqwHepg@mail.gmail.com>
	<4DF50A8D.5040704@code972.com>
Date: Mon, 13 Jun 2011 06:23:33 +0300
Message-ID: <BANLkTi=w+aqtnhs4GyyqLYOV6jh=nsbU_w@mail.gmail.com>
Subject: Re: Index size and performance degradation
From: Shai Erera <serera@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=90e6ba61357cbb420304a58f7101
X-Virus-Checked: Checked by ClamAV on apache.org

--90e6ba61357cbb420304a58f7101
Content-Type: text/plain; charset=ISO-8859-1

>
> I'm not sure I understood the filters approach you described. Can you give
> an example?
>

A Language filter is one -- different users search in different languages
and want to view pages in those languages only. If you have a field attach
to your documents that identifies the language of the document, you can use
it to filter the queries to return results only of the requested language.

Another filter is file type.

Shai

On Sun, Jun 12, 2011 at 9:50 PM, Itamar Syn-Hershko <itamar@code972.com>wrote:

> I'm not sure I understood the filters approach you described. Can you give
> an example?

--90e6ba61357cbb420304a58f7101--

From java-user-return-49988-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun 13 06:31:48 2011
Return-Path: <java-user-return-49988-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E9AA56664
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 13 Jun 2011 06:31:47 +0000 (UTC)
Received: (qmail 79655 invoked by uid 500); 13 Jun 2011 06:31:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79545 invoked by uid 500); 13 Jun 2011 06:31:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79536 invoked by uid 99); 13 Jun 2011 06:31:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jun 2011 06:31:42 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lahiruts@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jun 2011 06:31:36 +0000
Received: by wwi18 with SMTP id 18so2977518wwi.5
        for <java-user@lucene.apache.org>; Sun, 12 Jun 2011 23:31:15 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=BJ0CYSNw8EQfn478L9LJ93fH6Zq5O4+x0qj5+Weaukg=;
        b=sAcsLiFxdmw5ZDdmmOQDg7jqakELkwwt5McFdztD9KGq3Xgj24OetxDkVs4m6zURyQ
         IMZ8wa1sGMQm3yOEDLwvLvX9KQ0LdI9VLMnQyFjdybqbz2SzvYvyP4b0YvUNtnr0t9H+
         GUawArVXr4iLTfOGyaHinE2O0IE46h2TMl53k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=BeJEsStWK3aG26KVThUjyVJ62dj0zytyZHbBELcFI3agUsilHZfc+lmZmkW1S9K/Uy
         DLModoSPQR1XoDFU/s9RGleiot6/AHdFJ1iaLo594gBxy/S6XWLEb2BFRrWB9M9jHUb4
         9hWtzzpqy8NfscODiQs+cfveLBbxRKB1Sz8I8=
MIME-Version: 1.0
Received: by 10.216.221.72 with SMTP id q50mr4528768wep.99.1307946675059; Sun,
 12 Jun 2011 23:31:15 -0700 (PDT)
Received: by 10.216.157.75 with HTTP; Sun, 12 Jun 2011 23:31:15 -0700 (PDT)
Date: Mon, 13 Jun 2011 12:01:15 +0530
Message-ID: <BANLkTimx2LkWXvyEDJyvzL4QUd6Mno=sDw@mail.gmail.com>
Subject: Modifying Length Normalization calculation
From: Lahiru Samarakoon <lahiruts@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64805aef3bc1804a5921043

--0016e64805aef3bc1804a5921043
Content-Type: text/plain; charset=ISO-8859-1

Hi All,

I want to change the length normalization calculation specific to my
application. By changing the "*number of terms*" according to my
requirement. The "*StandardTokenizer*" works perfectly for my application,
However, the *number of terms* calculated by the tokenizer is not the
effective number of terms for the application. I have an mechanism to
calculate that value and I need to know how can I apply that value in length
normalization calculations.

Please advice.

Thank you,

Best Regards,
Lahiru.

--0016e64805aef3bc1804a5921043--

From java-user-return-49989-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun 13 09:40:30 2011
Return-Path: <java-user-return-49989-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 67D206C10
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 13 Jun 2011 09:40:30 +0000 (UTC)
Received: (qmail 26170 invoked by uid 500); 13 Jun 2011 09:40:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26011 invoked by uid 500); 13 Jun 2011 09:40:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26003 invoked by uid 99); 13 Jun 2011 09:40:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jun 2011 09:40:28 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.210.176 as permitted sender)
Received: from [209.85.210.176] (HELO mail-iy0-f176.google.com) (209.85.210.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jun 2011 09:40:21 +0000
Received: by iym1 with SMTP id 1so5753213iym.35
        for <java-user@lucene.apache.org>; Mon, 13 Jun 2011 02:40:01 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=s51BM3ZDcQw4h/w5LvjEMQgXRKRPs6aid706qp9a8GU=;
        b=K1r+tWrHr2SEOzi4fEf+6aj7vFDlSypsJxQZ067rEbzeYniVkzoCcjuNA+XxwTOBsQ
         5WMyp1x0/Fhsnn949A3pp5/t1lYOkx8g4Wc7PEnIznvDy/9xTQETC82EJ3CBJV8kn4pf
         O6NONvMVIUPIbp0KI83/EVkAkXD2o/izN1JMI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=L3x21I4VjF+sNfMPCBGVoxs0kZ4N6goY+JZk4LLHJbI/fykXsSSKc802IdsxmTfjkN
         yKcHSJMIc4S9jgR9SMKi7bs02AVGf3N/c7c6C14e6jGCOzcu38kJEwOD3ldbgCr1+w5m
         OvKJ5JOPoGYdZ3Tefv/UBcpGLdZCzj/wAZfK0=
Received: by 10.42.200.14 with SMTP id eu14mr6493786icb.481.1307958001134;
 Mon, 13 Jun 2011 02:40:01 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.199.148 with HTTP; Mon, 13 Jun 2011 02:39:41 -0700 (PDT)
In-Reply-To: <BANLkTimx2LkWXvyEDJyvzL4QUd6Mno=sDw@mail.gmail.com>
References: <BANLkTimx2LkWXvyEDJyvzL4QUd6Mno=sDw@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Mon, 13 Jun 2011 10:39:41 +0100
Message-ID: <BANLkTinTtCbeDT_ZnNqCQnPq0-kjxCMJaw@mail.gmail.com>
Subject: Re: Modifying Length Normalization calculation
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

org.apache.lucene.search.Similarity would be the place to look,
specifically computeNorm(String field, FieldInvertState state).  There
is comprehensive info in the javadocs.  Note that values are
calculated at indexing and stored in the index encoded, with some loss
of precision.


--
Ian.

On Mon, Jun 13, 2011 at 7:31 AM, Lahiru Samarakoon <lahiruts@gmail.com> wrote:
> Hi All,
>
> I want to change the length normalization calculation specific to my
> application. By changing the "*number of terms*" according to my
> requirement. The "*StandardTokenizer*" works perfectly for my application,
> However, the *number of terms* calculated by the tokenizer is not the
> effective number of terms for the application. I have an mechanism to
> calculate that value and I need to know how can I apply that value in length
> normalization calculations.
>
> Please advice.
>
> Thank you,
>
> Best Regards,
> Lahiru.
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49990-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun 13 10:07:38 2011
Return-Path: <java-user-return-49990-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 84A3369EB
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 13 Jun 2011 10:07:38 +0000 (UTC)
Received: (qmail 50508 invoked by uid 500); 13 Jun 2011 10:07:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50471 invoked by uid 500); 13 Jun 2011 10:07:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50463 invoked by uid 99); 13 Jun 2011 10:07:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jun 2011 10:07:36 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dotsid@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jun 2011 10:07:28 +0000
Received: by bwz8 with SMTP id 8so4029230bwz.35
        for <java-user@lucene.apache.org>; Mon, 13 Jun 2011 03:07:07 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:from:content-type:content-transfer-encoding
         :subject:date:message-id:to:mime-version:x-mailer;
        bh=fbJKk8qcWXn17gg3lHCtxTlnJtQ5Mz7BOZiOacNL4u4=;
        b=IHD8Y3vIBjIHtIYe9xJPUY/njgcKEGJdut+S/XhBMcg8WqJc0sFUyX89hzqgAHDwQV
         xue8mCo+uGVURXBIdfUAixSfjJIbdNk0OO7kyxQsw2GnxlLn0WgnNQ7bhVD+oKGsEhtJ
         vylBeRN/mpTkHEgoQq9aTF81xaF5ldHKrqwRw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:content-type:content-transfer-encoding:subject:date:message-id
         :to:mime-version:x-mailer;
        b=wiiH4lGKtZcZ6kwy3WpDSYLO9UwZSCVrQZ/jqRnOId+yLS7/ohCGVl1m42gC450cFe
         bF97A376HNsl5h3jtggvnnLb9phrWDKoXBCc5/ce/6o/JIXxQslMvRon3gRB6TpOUox4
         0tnkQkgy8Zod8QQ/xteBVJkSREUilrxSQpqO0=
Received: by 10.204.130.24 with SMTP id q24mr4433231bks.74.1307959627384;
        Mon, 13 Jun 2011 03:07:07 -0700 (PDT)
Received: from [192.168.1.247] ([95.154.118.109])
        by mx.google.com with ESMTPS id k10sm5186247bkq.22.2011.06.13.03.07.05
        (version=TLSv1/SSLv3 cipher=OTHER);
        Mon, 13 Jun 2011 03:07:06 -0700 (PDT)
From: Denis Bazhenov <dotsid@gmail.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable
Subject: WordBoundTokenFilter
Date: Mon, 13 Jun 2011 21:06:58 +1100
Message-Id: <29E6643C-33FE-4820-A513-8D86C31F1722@gmail.com>
To: java-user@lucene.apache.org
Mime-Version: 1.0 (Apple Message framework v1084)
X-Mailer: Apple Mail (2.1084)

Some time ago I need to tune our home grown search engine based on =
lucene to perform well on product searches. Product search is search =
where users come with part of product name and we should find the =
product.

The problem here is that users doesn't provide full model name. For =
instance id product model name is "Sony PRS-A9000QF", users frequently =
search for "PRS 9000", "9000QF" etc.

The simple and straightforward solution to this problem is to tokenize =
model names on the different character type boundary. So for "Sony =
PRS-A9000QF" we will have 5 terms: "sony", "prs", "a", "9000" "qf". This =
solution could dramatically increase search sensitive (which is not a =
good thing in a general search), but works well in a specialized =
indexes.

So a developed such a token filter. My question is there any interest in =
this solution for the community, and does it make sense to contribute it =
back?
---
Denis Bazhenov <dotsid@gmail.com>






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49991-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun 13 10:33:18 2011
Return-Path: <java-user-return-49991-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2A02C61A3
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 13 Jun 2011 10:33:18 +0000 (UTC)
Received: (qmail 70245 invoked by uid 500); 13 Jun 2011 10:33:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70207 invoked by uid 500); 13 Jun 2011 10:33:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70199 invoked by uid 99); 13 Jun 2011 10:33:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jun 2011 10:33:15 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lahiruts@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jun 2011 10:33:08 +0000
Received: by wwi18 with SMTP id 18so3098949wwi.5
        for <java-user@lucene.apache.org>; Mon, 13 Jun 2011 03:32:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=llbzKzsEe1mrlV4khKLSfU5nfemN51Wqx6yUp2xCgmc=;
        b=BqhUbxrPGC3CXL+43eDINv0251BHt9McI4iYUQSfOpPl4SrVX2MI7teAulzOjSXF9v
         vqufFZyklO4HxZ1gOaUxv9vtxT0IAexOvI2hgLcRCkJ5geoSrp8rhI4ZIRaxpU2JBhEm
         FNEIRw2m4lagiA0ZRuL6MzjBur/NXPj0nqWh4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=B/fJMh/FczyMBA/crFxaqhUTUURpKUq9bAgfqACCXf7JxlCFiBUUUKk0qPXKdgh77H
         SAiPQnltJGZC+iULRIwG4IDhGjqcxoZk6mDT580vms3g7Kh9YZy6v5P1jeheSaPlBVz1
         voeYejpjKGrDDzRHuoEFdl3bRju20EFuV4gwU=
MIME-Version: 1.0
Received: by 10.216.238.13 with SMTP id z13mr2396945weq.99.1307961167753; Mon,
 13 Jun 2011 03:32:47 -0700 (PDT)
Received: by 10.216.157.75 with HTTP; Mon, 13 Jun 2011 03:32:47 -0700 (PDT)
In-Reply-To: <BANLkTinTtCbeDT_ZnNqCQnPq0-kjxCMJaw@mail.gmail.com>
References: <BANLkTimx2LkWXvyEDJyvzL4QUd6Mno=sDw@mail.gmail.com>
	<BANLkTinTtCbeDT_ZnNqCQnPq0-kjxCMJaw@mail.gmail.com>
Date: Mon, 13 Jun 2011 16:02:47 +0530
Message-ID: <BANLkTi==nKaAk5pntu7s=gXqeDQ_uxurrA@mail.gmail.com>
Subject: Re: Modifying Length Normalization calculation
From: Lahiru Samarakoon <lahiruts@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001517493cbec8b36504a59570fb
X-Virus-Checked: Checked by ClamAV on apache.org

--001517493cbec8b36504a59570fb
Content-Type: text/plain; charset=ISO-8859-1

HI Ian,

Thank you very much for the reply.

The application calls the *writer.addDocument(d);* method and in this
process the *lengthNorm(String fieldName, int numTerms)*  method is called.
I can extend the *DefaultSimilarity* class and override the
*lengthNorm*method, but how can I explicitly specify the
*numTerms* value?

In my application, numTerms = (Analyzed Length of the field content)  -
(app specific calculated value)

(Analyzed Length of the field content) = original numTerms value calculated
in the *computeNorm*, which is known.

Does *computeNorm* method is called for every field or is it only called for
analyzed fields?

The order we call *addDocument* and the order the *computeNorm *method is
called is the same ?

Is there is a possibility that I can access the *Document* object inside the
*Similiarity* class ?

Regards,
Lahiru

On Mon, Jun 13, 2011 at 3:09 PM, Ian Lea <ian.lea@gmail.com> wrote:

> org.apache.lucene.search.Similarity would be the place to look,
> specifically computeNorm(String field, FieldInvertState state).  There
> is comprehensive info in the javadocs.  Note that values are
> calculated at indexing and stored in the index encoded, with some loss
> of precision.
>
>
> --
> Ian.
>
> On Mon, Jun 13, 2011 at 7:31 AM, Lahiru Samarakoon <lahiruts@gmail.com>
> wrote:
> > Hi All,
> >
> > I want to change the length normalization calculation specific to my
> > application. By changing the "*number of terms*" according to my
> > requirement. The "*StandardTokenizer*" works perfectly for my
> application,
> > However, the *number of terms* calculated by the tokenizer is not the
> > effective number of terms for the application. I have an mechanism to
> > calculate that value and I need to know how can I apply that value in
> length
> > normalization calculations.
> >
> > Please advice.
> >
> > Thank you,
> >
> > Best Regards,
> > Lahiru.
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001517493cbec8b36504a59570fb--

From java-user-return-49992-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun 13 10:50:23 2011
Return-Path: <java-user-return-49992-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E7E3C6ECA
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 13 Jun 2011 10:50:23 +0000 (UTC)
Received: (qmail 83288 invoked by uid 500); 13 Jun 2011 10:50:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83202 invoked by uid 500); 13 Jun 2011 10:50:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83194 invoked by uid 99); 13 Jun 2011 10:50:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jun 2011 10:50:21 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [98.139.91.210] (HELO nm16-vm0.bullet.mail.sp2.yahoo.com) (98.139.91.210)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 13 Jun 2011 10:50:13 +0000
Received: from [98.139.91.64] by nm16.bullet.mail.sp2.yahoo.com with NNFMP; 13 Jun 2011 10:49:51 -0000
Received: from [208.71.42.206] by tm4.bullet.mail.sp2.yahoo.com with NNFMP; 13 Jun 2011 10:49:51 -0000
Received: from [127.0.0.1] by smtp217.mail.gq1.yahoo.com with NNFMP; 13 Jun 2011 10:49:51 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.de; s=s1024; t=1307962191; bh=6CVRhCov0ujIN4P/hUtP4xdQlf3WUaddlxFmVuLm5/c=; h=X-Yahoo-Newman-Id:Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:Date:From:User-Agent:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding; b=loPV6nTXIVaPb/OEdmvYBJ4FcI3N0YCLoX3xmFiCFvAZVPEj4RtFv1UpFa8VqH06jXxpvo2jYAoqtRf1Ka5m4C8rJNHHqemLkrQA7JX57Fq73KWeuj6buloEQOcWhNFDgE5adLfAxgoOw9bXqoGRxUl5KSGp+xoc30WMM33H6V4=
X-Yahoo-Newman-Id: 184403.11733.bm@smtp217.mail.gq1.yahoo.com
Received: from [192.168.0.7] (mailformailinglists@79.242.190.210 with plain)
        by smtp217.mail.gq1.yahoo.com with SMTP; 13 Jun 2011 03:49:50 -0700 PDT
X-Yahoo-SMTP: PsU70jWswBCjvY7DVEwAV7Ld71kq2utxAu93BRGFPho-
X-YMail-OSG: X6CUyi0VM1kiQcpxNj04LfCWmRmERhSjTU_cdbTMKNikLMg
 GR.nFBpZjQ19VGNpOyu5xpZQR.c53vBj3VVWy7Tx0p1iKFuBP.Y91.uhji_p
 LwlBZ_7e.PE5WEyHm7G3TkGgu564OMzu.iz8RY9s6_D79wgGwHEgi0s5oAjm
 V8Y8jRZelKfdThW6RiuBGkg6w5ZyAH1tE0aXH9CrZ3Pn7xHsyLFmeHytRuR1
 dEClbMxrGblGze7Fmo6Lpb09c5qirze0ZNOKSu9naYJ.5su_zvqrXzW.QLNN
 tkfNeJCqGhDHPbXusgWQO6u8OAw2C2Sn02sU59k0iT6DiT_jK
X-Yahoo-Newman-Property: ymail-3
Message-ID: <4DF5EB46.9090501@yahoo.de>
Date: Mon, 13 Jun 2011 12:49:42 +0200
From: Em <mailformailinglists@yahoo.de>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; de; rv:1.9.2.17) Gecko/20110414 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: WordBoundTokenFilter
References: <29E6643C-33FE-4820-A513-8D86C31F1722@gmail.com>
In-Reply-To: <29E6643C-33FE-4820-A513-8D86C31F1722@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

sounds like the WordDelimiterTokenFilter from Solr, doesn't it?

Regards,
Em

Am 13.06.2011 12:06, schrieb Denis Bazhenov:
> Some time ago I need to tune our home grown search engine based on lucene to perform well on product searches. Product search is search where users come with part of product name and we should find the product.
> 
> The problem here is that users doesn't provide full model name. For instance id product model name is "Sony PRS-A9000QF", users frequently search for "PRS 9000", "9000QF" etc.
> 
> The simple and straightforward solution to this problem is to tokenize model names on the different character type boundary. So for "Sony PRS-A9000QF" we will have 5 terms: "sony", "prs", "a", "9000" "qf". This solution could dramatically increase search sensitive (which is not a good thing in a general search), but works well in a specialized indexes.
> 
> So a developed such a token filter. My question is there any interest in this solution for the community, and does it make sense to contribute it back?
> ---
> Denis Bazhenov <dotsid@gmail.com>
> 
> 
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49993-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun 13 10:57:09 2011
Return-Path: <java-user-return-49993-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 777ED6F69
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 13 Jun 2011 10:57:09 +0000 (UTC)
Received: (qmail 88779 invoked by uid 500); 13 Jun 2011 10:57:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88737 invoked by uid 500); 13 Jun 2011 10:57:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88729 invoked by uid 99); 13 Jun 2011 10:57:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jun 2011 10:57:07 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dotsid@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jun 2011 10:56:57 +0000
Received: by wwi18 with SMTP id 18so3111898wwi.5
        for <java-user@lucene.apache.org>; Mon, 13 Jun 2011 03:56:37 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:from:mime-version:content-type:subject:date
         :in-reply-to:to:references:message-id:x-mailer;
        bh=77h2M4iHjCFZSvBZBBKi6HdA/exYpiknolOk/PCLTs4=;
        b=EjaxWBRmqX7EXYSMO9OKTZ4t8NKPewRaCDH7xXoeGHcqr0K8314c3bRxfeEoRr6WsN
         FprTwE3Q8a7ZYrT/i3Egs9G2MSZgm9ui1/Yk5Yp+Lg60U23gwGiiRgcepKiRJibtAT5K
         7netfR8uCjmTb6AAanUFlRCKo09xmO34tfrlU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:mime-version:content-type:subject:date:in-reply-to:to
         :references:message-id:x-mailer;
        b=dsNqNTfVRRD/emBdVtdNzVfpS65M2Kr6Pa6uBPp+M7+rP/MV2BOF0pCG5Ogoot4U0r
         /Qb5ilN1Px6571wPf9q8RGAgyW0gTe95B0iSPCURz0LzaIfkYBzQdMpsyoIB6BTfDs7C
         0epQtLOKMNL0U2XQsFSD3Agv0bQ67qXG5hvak=
Received: by 10.216.230.105 with SMTP id i83mr2465523weq.43.1307962597435;
        Mon, 13 Jun 2011 03:56:37 -0700 (PDT)
Received: from [192.168.1.247] ([95.154.118.109])
        by mx.google.com with ESMTPS id n20sm2809101weq.39.2011.06.13.03.56.35
        (version=TLSv1/SSLv3 cipher=OTHER);
        Mon, 13 Jun 2011 03:56:36 -0700 (PDT)
From: Denis Bazhenov <dotsid@gmail.com>
Mime-Version: 1.0 (Apple Message framework v1084)
Content-Type: multipart/alternative; boundary=Apple-Mail-1--1057089628
Subject: Re: WordBoundTokenFilter
Date: Mon, 13 Jun 2011 21:56:32 +1100
In-Reply-To: <4DF5EB46.9090501@yahoo.de>
To: java-user@lucene.apache.org
References: <29E6643C-33FE-4820-A513-8D86C31F1722@gmail.com> <4DF5EB46.9090501@yahoo.de>
Message-Id: <24C6967F-3CE6-4980-B8D8-74968725BBB9@gmail.com>
X-Mailer: Apple Mail (2.1084)
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-1--1057089628
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=us-ascii

It seems so. Interestingly I can't find any mentions of =
WordDelimiterTokenFilter using google. Is it part of Solr codebase?
On 13.06.2011, at 21:49, Em wrote:

> Hi,
>=20
> sounds like the WordDelimiterTokenFilter from Solr, doesn't it?
>=20
> Regards,
> Em
>=20
> Am 13.06.2011 12:06, schrieb Denis Bazhenov:
>> Some time ago I need to tune our home grown search engine based on =
lucene to perform well on product searches. Product search is search =
where users come with part of product name and we should find the =
product.
>>=20
>> The problem here is that users doesn't provide full model name. For =
instance id product model name is "Sony PRS-A9000QF", users frequently =
search for "PRS 9000", "9000QF" etc.
>>=20
>> The simple and straightforward solution to this problem is to =
tokenize model names on the different character type boundary. So for =
"Sony PRS-A9000QF" we will have 5 terms: "sony", "prs", "a", "9000" =
"qf". This solution could dramatically increase search sensitive (which =
is not a good thing in a general search), but works well in a =
specialized indexes.
>>=20
>> So a developed such a token filter. My question is there any interest =
in this solution for the community, and does it make sense to contribute =
it back?
>> ---
>> Denis Bazhenov <dotsid@gmail.com>
>>=20
>>=20
>>=20
>>=20
>>=20
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>=20
>>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20

---
Denis Bazhenov <dotsid@gmail.com>






--Apple-Mail-1--1057089628--

From java-user-return-49994-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun 13 11:02:16 2011
Return-Path: <java-user-return-49994-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E261C6B0F
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 13 Jun 2011 11:02:16 +0000 (UTC)
Received: (qmail 94022 invoked by uid 500); 13 Jun 2011 11:02:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93951 invoked by uid 500); 13 Jun 2011 11:02:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93843 invoked by uid 99); 13 Jun 2011 11:02:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jun 2011 11:02:13 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [98.139.213.150] (HELO nm5-vm0.bullet.mail.bf1.yahoo.com) (98.139.213.150)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 13 Jun 2011 11:02:05 +0000
Received: from [98.139.212.150] by nm5.bullet.mail.bf1.yahoo.com with NNFMP; 13 Jun 2011 11:01:43 -0000
Received: from [98.139.213.11] by tm7.bullet.mail.bf1.yahoo.com with NNFMP; 13 Jun 2011 11:01:43 -0000
Received: from [127.0.0.1] by smtp111.mail.bf1.yahoo.com with NNFMP; 13 Jun 2011 11:01:43 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.de; s=s1024; t=1307962903; bh=DYcrjCyOO30PFaDtBQUNfRx4Ixu7qWUpRbd57fV78Zs=; h=X-Yahoo-Newman-Id:Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:Date:From:User-Agent:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding; b=rSxl5QJUReGH7amduisFab4w2pdZlPX+4Hee0/9k41u1xaKYRaLhOz9lfEcpwAkhTrDiuLcfdKGZrgJz/aRjtOLnUsE1C/rQ6rIh8Wk8catcljSCLGEAI5uABFP/8usrvU1hPiNwDlDtwZkLIivq0HdnPv9+lA7XCZob8DTiIu0=
X-Yahoo-Newman-Id: 489884.56691.bm@smtp111.mail.bf1.yahoo.com
Received: from [192.168.0.7] (mailformailinglists@79.242.190.210 with plain)
        by smtp111.mail.bf1.yahoo.com with SMTP; 13 Jun 2011 04:01:43 -0700 PDT
X-Yahoo-SMTP: PsU70jWswBCjvY7DVEwAV7Ld71kq2utxAu93BRGFPho-
X-YMail-OSG: 59iuV04VM1nd_iubEZ8QHGMe0MFzIiwSUiKOT37lH9svwUO
 hHqhhhPYM5WaQjVfvm_TZKFDjKL0GuX8I3D0_o_hp40wJ1uGD9XMwnH1hYU9
 EGgkXHhdhaSK.Yh4.E_OYEkQEv_ZfSetCnY61dzIgZzcL2d37yGlgo5BQRL_
 K7XEwfrxZt.OIc9gBMhaJ1F321TbJKAhZL_6fL7bqVXjOYA2XYkJ2YVRECNn
 znultlBqdVYpj_90lcJ.TQ2UuWOZGYEHj4C3aqzqPWf9vVuG7ajTGwgY5jcl
 f51kn_OZ80aQqbfMPkpf1TrezyXTWhQzUttC0S16pTOF8ffirw4o9WTm248g
 cDg--
X-Yahoo-Newman-Property: ymail-3
Message-ID: <4DF5EE0D.8050009@yahoo.de>
Date: Mon, 13 Jun 2011 13:01:33 +0200
From: Em <mailformailinglists@yahoo.de>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; de; rv:1.9.2.17) Gecko/20110414 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: WordBoundTokenFilter
References: <29E6643C-33FE-4820-A513-8D86C31F1722@gmail.com> <4DF5EB46.9090501@yahoo.de> <24C6967F-3CE6-4980-B8D8-74968725BBB9@gmail.com>
In-Reply-To: <24C6967F-3CE6-4980-B8D8-74968725BBB9@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Yes, it's part of Solr. And even in Solr there was no documentation in
the API - at last when I searched for it the last time.

Regards,
Em

Am 13.06.2011 12:56, schrieb Denis Bazhenov:
> It seems so. Interestingly I can't find any mentions of WordDelimiterTokenFilter using google. Is it part of Solr codebase?
> On 13.06.2011, at 21:49, Em wrote:
> 
>> Hi,
>>
>> sounds like the WordDelimiterTokenFilter from Solr, doesn't it?
>>
>> Regards,
>> Em
>>
>> Am 13.06.2011 12:06, schrieb Denis Bazhenov:
>>> Some time ago I need to tune our home grown search engine based on lucene to perform well on product searches. Product search is search where users come with part of product name and we should find the product.
>>>
>>> The problem here is that users doesn't provide full model name. For instance id product model name is "Sony PRS-A9000QF", users frequently search for "PRS 9000", "9000QF" etc.
>>>
>>> The simple and straightforward solution to this problem is to tokenize model names on the different character type boundary. So for "Sony PRS-A9000QF" we will have 5 terms: "sony", "prs", "a", "9000" "qf". This solution could dramatically increase search sensitive (which is not a good thing in a general search), but works well in a specialized indexes.
>>>
>>> So a developed such a token filter. My question is there any interest in this solution for the community, and does it make sense to contribute it back?
>>> ---
>>> Denis Bazhenov <dotsid@gmail.com>
>>>
>>>
>>>
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> 
> ---
> Denis Bazhenov <dotsid@gmail.com>
> 
> 
> 
> 
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49995-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun 13 11:11:36 2011
Return-Path: <java-user-return-49995-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9FF5E687B
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 13 Jun 2011 11:11:36 +0000 (UTC)
Received: (qmail 7348 invoked by uid 500); 13 Jun 2011 11:11:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7302 invoked by uid 500); 13 Jun 2011 11:11:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7294 invoked by uid 99); 13 Jun 2011 11:11:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jun 2011 11:11:34 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jun 2011 11:11:27 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id AE11BD36005
	for <java-user@lucene.apache.org>; Mon, 13 Jun 2011 13:11:04 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id wb833Y+Eum5H for <java-user@lucene.apache.org>;
	Mon, 13 Jun 2011 13:10:59 +0200 (CEST)
Received: from VEGA (port-92-196-130-188.dynamic.qsc.de [92.196.130.188])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 6E851D36001
	for <java-user@lucene.apache.org>; Mon, 13 Jun 2011 13:10:59 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <29E6643C-33FE-4820-A513-8D86C31F1722@gmail.com> <4DF5EB46.9090501@yahoo.de> <24C6967F-3CE6-4980-B8D8-74968725BBB9@gmail.com> <4DF5EE0D.8050009@yahoo.de>
In-Reply-To: <4DF5EE0D.8050009@yahoo.de>
Subject: RE: WordBoundTokenFilter
Date: Mon, 13 Jun 2011 13:11:05 +0200
Message-ID: <001f01cc29ba$972dd180$c5897480$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQGDopZ9k6VR4WGJG7ktYv+65oBEGQFSGPFxAeoEhd4BoLETTJUlSMNg
Content-Language: de

In Lucene trunk (will be version 4.0), all analyzers/tokenizers/tokenfilters
were moved to a new shared analyzer module. So WDF is now part of a shared
Lucene/Solr module. In 3.x, you still have to add the Solr JARS to use it.

This TokenFilter should do what you intend to do (see the Solr
documentation, where all parameters are explained):
http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.WordDelimit
erFilterFactory

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Em [mailto:mailformailinglists@yahoo.de]
> Sent: Monday, June 13, 2011 1:02 PM
> To: java-user@lucene.apache.org
> Subject: Re: WordBoundTokenFilter
> 
> Yes, it's part of Solr. And even in Solr there was no documentation in the
API
> - at last when I searched for it the last time.
> 
> Regards,
> Em
> 
> Am 13.06.2011 12:56, schrieb Denis Bazhenov:
> > It seems so. Interestingly I can't find any mentions of
> WordDelimiterTokenFilter using google. Is it part of Solr codebase?
> > On 13.06.2011, at 21:49, Em wrote:
> >
> >> Hi,
> >>
> >> sounds like the WordDelimiterTokenFilter from Solr, doesn't it?
> >>
> >> Regards,
> >> Em
> >>
> >> Am 13.06.2011 12:06, schrieb Denis Bazhenov:
> >>> Some time ago I need to tune our home grown search engine based on
> lucene to perform well on product searches. Product search is search where
> users come with part of product name and we should find the product.
> >>>
> >>> The problem here is that users doesn't provide full model name. For
> instance id product model name is "Sony PRS-A9000QF", users frequently
> search for "PRS 9000", "9000QF" etc.
> >>>
> >>> The simple and straightforward solution to this problem is to tokenize
> model names on the different character type boundary. So for "Sony PRS-
> A9000QF" we will have 5 terms: "sony", "prs", "a", "9000" "qf". This
solution
> could dramatically increase search sensitive (which is not a good thing in
a
> general search), but works well in a specialized indexes.
> >>>
> >>> So a developed such a token filter. My question is there any interest
in
> this solution for the community, and does it make sense to contribute it
> back?
> >>> ---
> >>> Denis Bazhenov <dotsid@gmail.com>
> >>>
> >>>
> >>>
> >>>
> >>>
> >>>
> >>> --------------------------------------------------------------------
> >>> - To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>
> >>>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >
> > ---
> > Denis Bazhenov <dotsid@gmail.com>
> >
> >
> >
> >
> >
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49996-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun 13 11:15:16 2011
Return-Path: <java-user-return-49996-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9F6616B79
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 13 Jun 2011 11:15:16 +0000 (UTC)
Received: (qmail 16697 invoked by uid 500); 13 Jun 2011 11:15:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16648 invoked by uid 500); 13 Jun 2011 11:15:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16640 invoked by uid 99); 13 Jun 2011 11:15:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jun 2011 11:15:13 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,SPF_PASS,T_FRT_STOCK2
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ydabhi@asite.com designates 202.131.102.148 as permitted sender)
Received: from [202.131.102.148] (HELO indiaserv01.asite.asitehq.com) (202.131.102.148)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jun 2011 11:15:07 +0000
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01CC29BB.18E066A1"
Subject: Slow ness of IndexWriter.close()
X-MimeOLE: Produced By Microsoft Exchange V6.5
Date: Mon, 13 Jun 2011 16:44:43 +0530
Message-ID: <BE4EDD1665A8004A853E8BDC62C2F1580D2EFB@indiaserv01.asite.asitehq.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Slow ness of IndexWriter.close()
Thread-Index: AcwpuSiAIRaKE31fRcWSh1fcHFhEBw==
From: "Yogesh Dabhi" <ydabhi@asite.com>
To: <java-user@lucene.apache.org>

------_=_NextPart_001_01CC29BB.18E066A1
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

=20

Hi,

I try to add and update  document in index=20

At the start its take only 1 to 2 second but after 50 to 60 document add
and update=20

Its take 40 to 50 second or some time its take more then 1 min=20

=20

Is there any  way to improve performance ?

=20

Please help me=20

=20

Please check my code=20

=20

if(documents!=3Dnull && documents.size()>0){

      IndexWriter writer =3D null;

      boolean createNewIndexDirectory =3D
!IndexReader.indexExists(FSDirectory.open(indexDir));

      int createNewIndexReTries =3D 0;

      Directory directory =3D FSDirectory.open(indexDir, null);

      while(writer=3D=3Dnull) {

            try{

                  directory.setLockFactory(new
NativeFSLockFactory(indexDir));

=20

                  if(analyzer =3D=3D null){


                        analyzer =3D new
StandardAnalyzer(IAsiteIndexConstants.LUCENE_VERSION,AsiteIndexUtil.getS
topWordSet());

                  }

                  writer =3D new IndexWriter(directory, analyzer,
createNewIndexDirectory,IndexWriter.MaxFieldLength.UNLIMITED);

                  for(Document document : documents){

=20
if(document.get(ICustomFormIndexConstants.INDEX_FIELD_FORM_ID)!=3Dnull){

                              formId =3D
Integer.parseInt(document.get(ICustomFormIndexConstants.INDEX_FIELD_FORM
_ID));

                        }

                        String strValue =3D
NumericUtils.longToPrefixCoded(Long.parseLong(document.get(ICustomFormIn
dexConstants.INDEX_FIELD_MSG_ID)));

                        term =3D new
Term(ICustomFormIndexConstants.INDEX_FIELD_MSG_ID,strValue);

                        writer.updateDocument(term, document);

                  }

            }catch (LockObtainFailedException ex){

                  CheckIndex.Status status =3D new
CheckIndex(directory).checkIndex();

                  if(status!=3Dnull && status.numBadSegments>0){

                        log.error("Index found corrupted.
status.numBadSegments ::"+status.numBadSegments);

                        ex.printStackTrace();

                        throw ex;

                  }                             =20

            }finally{

                  try{

                        if(writer!=3Dnull){

                              writer.close();

                        }

=20

                  }catch(IOException ex){

                  }

            }

=20

      }

=20


Thanks & Regards=20

Yogesh


------_=_NextPart_001_01CC29BB.18E066A1--

From java-user-return-49997-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun 13 11:30:24 2011
Return-Path: <java-user-return-49997-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2B726642E
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 13 Jun 2011 11:30:24 +0000 (UTC)
Received: (qmail 47530 invoked by uid 500); 13 Jun 2011 11:30:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47451 invoked by uid 500); 13 Jun 2011 11:30:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47443 invoked by uid 99); 13 Jun 2011 11:30:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jun 2011 11:30:21 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dotsid@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jun 2011 11:30:14 +0000
Received: by wyb40 with SMTP id 40so4829753wyb.35
        for <java-user@lucene.apache.org>; Mon, 13 Jun 2011 04:29:52 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:content-type:mime-version:subject:from
         :in-reply-to:date:content-transfer-encoding:message-id:references:to
         :x-mailer;
        bh=NUEtOwoNJhOtH6AHvVQC6KC3VH1+OZr/iaF6GegVfTQ=;
        b=C56urrbcu/kh3DohN+qObaQrB9Ldry3x0jz5hWsfGtIpuVC9l0fS2m/s9LtnNdrfMA
         ttlUvQMT7wOuDK2Q00ppUxcuP4TayP+gl7IMwc5E5ihioFytvAEnHjk3HihrexcYFoLy
         m2Jn/45t9GSD9BWhC1hu/jKXX0H0tmQA2w0rg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        b=pyYx6F7XsCaNWY2QbpGrgo3qSEqzLQQPebIEznsr0e6t30hQzZNT/dI7jPW+Hq6wRn
         ZYWcAjkl+C0+aG2XuZK6oTzGarL3Xfce017I56wuBaKuHtCiPeeE79cWKResUeNnIVoD
         VsMk7V2lMH6/Qm2kXwz6C1qHJAxDXR9eyngrk=
Received: by 10.216.237.205 with SMTP id y55mr2547560weq.14.1307964590895;
        Mon, 13 Jun 2011 04:29:50 -0700 (PDT)
Received: from [192.168.1.247] ([95.154.118.109])
        by mx.google.com with ESMTPS id m8sm4174199wbh.28.2011.06.13.04.29.48
        (version=TLSv1/SSLv3 cipher=OTHER);
        Mon, 13 Jun 2011 04:29:50 -0700 (PDT)
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1084)
Subject: Re: WordBoundTokenFilter
From: Denis Bazhenov <dotsid@gmail.com>
In-Reply-To: <001f01cc29ba$972dd180$c5897480$@thetaphi.de>
Date: Mon, 13 Jun 2011 22:29:45 +1100
Content-Transfer-Encoding: quoted-printable
Message-Id: <179FF03E-E4EE-492B-9CDB-753197BCAC7A@gmail.com>
References: <29E6643C-33FE-4820-A513-8D86C31F1722@gmail.com> <4DF5EB46.9090501@yahoo.de> <24C6967F-3CE6-4980-B8D8-74968725BBB9@gmail.com> <4DF5EE0D.8050009@yahoo.de> <001f01cc29ba$972dd180$c5897480$@thetaphi.de>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1084)
X-Virus-Checked: Checked by ClamAV on apache.org

Okay, now I'm experiencing one of those "Simpsons already did it" =
moments in my life :) Nevertheless, nice to know that this problem =
already solved and I should write no code at all. Thanks a lot!

On 13.06.2011, at 22:11, Uwe Schindler wrote:

> In Lucene trunk (will be version 4.0), all =
analyzers/tokenizers/tokenfilters
> were moved to a new shared analyzer module. So WDF is now part of a =
shared
> Lucene/Solr module. In 3.x, you still have to add the Solr JARS to use =
it.
>=20
> This TokenFilter should do what you intend to do (see the Solr
> documentation, where all parameters are explained):
> =
http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.WordDelim=
it
> erFilterFactory
>=20
> Uwe
>=20
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>=20
>=20
>> -----Original Message-----
>> From: Em [mailto:mailformailinglists@yahoo.de]
>> Sent: Monday, June 13, 2011 1:02 PM
>> To: java-user@lucene.apache.org
>> Subject: Re: WordBoundTokenFilter
>>=20
>> Yes, it's part of Solr. And even in Solr there was no documentation =
in the
> API
>> - at last when I searched for it the last time.
>>=20
>> Regards,
>> Em
>>=20
>> Am 13.06.2011 12:56, schrieb Denis Bazhenov:
>>> It seems so. Interestingly I can't find any mentions of
>> WordDelimiterTokenFilter using google. Is it part of Solr codebase?
>>> On 13.06.2011, at 21:49, Em wrote:
>>>=20
>>>> Hi,
>>>>=20
>>>> sounds like the WordDelimiterTokenFilter from Solr, doesn't it?
>>>>=20
>>>> Regards,
>>>> Em
>>>>=20
>>>> Am 13.06.2011 12:06, schrieb Denis Bazhenov:
>>>>> Some time ago I need to tune our home grown search engine based on
>> lucene to perform well on product searches. Product search is search =
where
>> users come with part of product name and we should find the product.
>>>>>=20
>>>>> The problem here is that users doesn't provide full model name. =
For
>> instance id product model name is "Sony PRS-A9000QF", users =
frequently
>> search for "PRS 9000", "9000QF" etc.
>>>>>=20
>>>>> The simple and straightforward solution to this problem is to =
tokenize
>> model names on the different character type boundary. So for "Sony =
PRS-
>> A9000QF" we will have 5 terms: "sony", "prs", "a", "9000" "qf". This
> solution
>> could dramatically increase search sensitive (which is not a good =
thing in
> a
>> general search), but works well in a specialized indexes.
>>>>>=20
>>>>> So a developed such a token filter. My question is there any =
interest
> in
>> this solution for the community, and does it make sense to contribute =
it
>> back?
>>>>> ---
>>>>> Denis Bazhenov <dotsid@gmail.com>
>>>>>=20
>>>>>=20
>>>>>=20
>>>>>=20
>>>>>=20
>>>>>=20
>>>>> =
--------------------------------------------------------------------
>>>>> - To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>=20
>>>>>=20
>>>>=20
>>>> =
---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>=20
>>>=20
>>> ---
>>> Denis Bazhenov <dotsid@gmail.com>
>>>=20
>>>=20
>>>=20
>>>=20
>>>=20
>>>=20
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20

---
Denis Bazhenov <dotsid@gmail.com>






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49998-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun 13 12:24:20 2011
Return-Path: <java-user-return-49998-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 765CD6233
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 13 Jun 2011 12:24:20 +0000 (UTC)
Received: (qmail 1355 invoked by uid 500); 13 Jun 2011 12:24:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1314 invoked by uid 500); 13 Jun 2011 12:24:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1305 invoked by uid 99); 13 Jun 2011 12:24:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jun 2011 12:24:18 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_FRT_STOCK2,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jun 2011 12:24:11 +0000
Received: by qwj9 with SMTP id 9so3086549qwj.35
        for <java-user@lucene.apache.org>; Mon, 13 Jun 2011 05:23:50 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type:content-transfer-encoding;
        bh=/MnIRv9hFcDUVUXfTLvlcJaxqdii9wQr4A6n+S/vk1U=;
        b=vagFoYw76I7v1J0AT67PXuCfVFvLVLxJVFj6fBHhdPmKdTJXD3WwfFc0gZiLOxoilc
         VonXpgveGjJKJzCxjP5QCq41W3YBevEZd6n7kYBYen8gju4hAj4QH8G8q+SUk+t6W6R0
         J9FIpNJ2W7FI9xRVAGDqEDAItMAGAepr5aSwQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=AnHUxOePXbEk1VA79N5GAhxjxSBmuwkxGni4Petm8wG8i0nwGPCb1SBiGLwXeniFU/
         HBa+sds6M3/2ttNAlDCZoVuSdeWRDbCEJvokBUrrF3Qp/K67JzXFFj4xEoFkWsGC1O8K
         Uwcp0i+5BdieyieucxM/UOdL6kht4U97VixKs=
MIME-Version: 1.0
Received: by 10.229.118.95 with SMTP id u31mr3783336qcq.11.1307967830612; Mon,
 13 Jun 2011 05:23:50 -0700 (PDT)
Received: by 10.229.21.203 with HTTP; Mon, 13 Jun 2011 05:23:50 -0700 (PDT)
In-Reply-To: <BE4EDD1665A8004A853E8BDC62C2F1580D2EFB@indiaserv01.asite.asitehq.com>
References: <BE4EDD1665A8004A853E8BDC62C2F1580D2EFB@indiaserv01.asite.asitehq.com>
Date: Mon, 13 Jun 2011 08:23:50 -0400
Message-ID: <BANLkTikjdu_hXb24Z1+dPLQoak39_A_j=A@mail.gmail.com>
Subject: Re: Slow ness of IndexWriter.close()
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

My first question is "what are you trying to do at a higher level"?
Because asking people to check your code without telling us
what you're trying to accomplish makes it difficult to know what
to look at. You might review:

http://wiki.apache.org/solr/UsingMailingLists

That said, at a guess, your update statement will first delete
all the items in the index where the term matches. Is it possible
that you're deleting/adding the same documents over and
over and over again?

Best
Erick

On Mon, Jun 13, 2011 at 7:14 AM, Yogesh Dabhi <ydabhi@asite.com> wrote:
>
>
> Hi,
>
> I try to add and update =A0document in index
>
> At the start its take only 1 to 2 second but after 50 to 60 document add
> and update
>
> Its take 40 to 50 second or some time its take more then 1 min
>
>
>
> Is there any =A0way to improve performance ?
>
>
>
> Please help me
>
>
>
> Please check my code
>
>
>
> if(documents!=3Dnull && documents.size()>0){
>
> =A0 =A0 =A0IndexWriter writer =3D null;
>
> =A0 =A0 =A0boolean createNewIndexDirectory =3D
> !IndexReader.indexExists(FSDirectory.open(indexDir));
>
> =A0 =A0 =A0int createNewIndexReTries =3D 0;
>
> =A0 =A0 =A0Directory directory =3D FSDirectory.open(indexDir, null);
>
> =A0 =A0 =A0while(writer=3D=3Dnull) {
>
> =A0 =A0 =A0 =A0 =A0 =A0try{
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0directory.setLockFactory(new
> NativeFSLockFactory(indexDir));
>
>
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0if(analyzer =3D=3D null){
>
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0analyzer =3D new
> StandardAnalyzer(IAsiteIndexConstants.LUCENE_VERSION,AsiteIndexUtil.getS
> topWordSet());
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0writer =3D new IndexWriter(directory, =
analyzer,
> createNewIndexDirectory,IndexWriter.MaxFieldLength.UNLIMITED);
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0for(Document document : documents){
>
>
> if(document.get(ICustomFormIndexConstants.INDEX_FIELD_FORM_ID)!=3Dnull){
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0formId =3D
> Integer.parseInt(document.get(ICustomFormIndexConstants.INDEX_FIELD_FORM
> _ID));
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0String strValue =3D
> NumericUtils.longToPrefixCoded(Long.parseLong(document.get(ICustomFormIn
> dexConstants.INDEX_FIELD_MSG_ID)));
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0term =3D new
> Term(ICustomFormIndexConstants.INDEX_FIELD_MSG_ID,strValue);
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0writer.updateDocument(term=
, document);
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}
>
> =A0 =A0 =A0 =A0 =A0 =A0}catch (LockObtainFailedException ex){
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0CheckIndex.Status status =3D new
> CheckIndex(directory).checkIndex();
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0if(status!=3Dnull && status.numBadSegm=
ents>0){
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0log.error("Index found cor=
rupted.
> status.numBadSegments ::"+status.numBadSegments);
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0ex.printStackTrace();
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0throw ex;
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}
>
> =A0 =A0 =A0 =A0 =A0 =A0}finally{
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0try{
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0if(writer!=3Dnull){
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0writer.close()=
;
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}
>
>
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}catch(IOException ex){
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}
>
> =A0 =A0 =A0 =A0 =A0 =A0}
>
>
>
> =A0 =A0 =A0}
>
>
>
>
> Thanks & Regards
>
> Yogesh
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49999-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun 13 12:50:13 2011
Return-Path: <java-user-return-49999-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D323563A6
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 13 Jun 2011 12:50:13 +0000 (UTC)
Received: (qmail 44080 invoked by uid 500); 13 Jun 2011 12:50:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43980 invoked by uid 500); 13 Jun 2011 12:50:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43972 invoked by uid 99); 13 Jun 2011 12:50:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jun 2011 12:50:11 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [200.14.55.1] (HELO mail.uho.edu.cu) (200.14.55.1)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jun 2011 12:50:05 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail.uho.edu.cu (Postfix) with ESMTP id 35D4613AD06
	for <java-user@lucene.apache.org>; Mon, 13 Jun 2011 08:49:14 -0400 (CDT)
Received: from mail.uho.edu.cu ([127.0.0.1])
	by localhost (ns1.uho.edu.cu [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id hoZ5YJAlPRot for <java-user@lucene.apache.org>;
	Mon, 13 Jun 2011 08:49:14 -0400 (CDT)
Received: from facinf.uho.edu.cu (correoweb.uho.edu.cu [10.26.2.1])
	by mail.uho.edu.cu (Postfix) with ESMTP id 2407B13ACC0
	for <java-user@lucene.apache.org>; Mon, 13 Jun 2011 08:49:14 -0400 (CDT)
Received: from localhost (localhost [127.0.0.1])
	by facinf.uho.edu.cu (Postfix) with ESMTP id A5AA07D5F5
	for <java-user@lucene.apache.org>; Mon, 13 Jun 2011 08:49:23 -0400 (CDT)
Received: from facinf.uho.edu.cu ([127.0.0.1])
	by localhost (facinf.uho.edu.cu [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id lbrFa-bfIgVf for <java-user@lucene.apache.org>;
	Mon, 13 Jun 2011 08:49:23 -0400 (CDT)
Received: from [10.26.0.2] (unknown [10.26.0.2])
	by facinf.uho.edu.cu (Postfix) with ESMTPA id 8F4367D53B
	for <java-user@lucene.apache.org>; Mon, 13 Jun 2011 08:49:23 -0400 (CDT)
Message-ID: <4DF60712.2080503@facinf.uho.edu.cu>
Date: Mon, 13 Jun 2011 08:48:18 -0400
From: Marlen <zmachado@facinf.uho.edu.cu>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.2.11) Gecko/20101013 Lightning/1.0b2 Thunderbird/3.1.5 ThunderBrowse/3.3.4
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: need help
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit

hello Im new with lucene.. I wold like to know if I can use it to make 
searchs on my web site and FTP.. and know if it vcan make search over 
pdf,*.doc, and any other non plane text
Thanks

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50000-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun 13 13:17:55 2011
Return-Path: <java-user-return-50000-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 326006FAB
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 13 Jun 2011 13:17:55 +0000 (UTC)
Received: (qmail 25758 invoked by uid 500); 13 Jun 2011 13:17:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25724 invoked by uid 500); 13 Jun 2011 13:17:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25716 invoked by uid 99); 13 Jun 2011 13:17:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jun 2011 13:17:52 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jun 2011 13:17:46 +0000
Received: by iwr19 with SMTP id 19so5956471iwr.35
        for <java-user@lucene.apache.org>; Mon, 13 Jun 2011 06:17:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=idwx+UgyRqR9++tk30OpkIFgAOKwpWyN9ty1JKtVd5Y=;
        b=Hp1PksOZu5uKtKwkV4rp0zZdIi0HeYWGNQ/+dkYrfoSjsuB04d8y1P9Qo0pwIQAtkA
         MFBB9m53LjrZ45o0etOOflY2b9pWIf+uZkqAFynb1uyjGmjQyP/DodwXsfDHkotMy2Uv
         cniW47061do2jFfY1A1rlKvyDF6L1eszBomjc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=coYY4600K/S/9oqUnhZZVqBwo1JIjI1pj4vEmnEqeJQsRT/7dgoIE/LYebs7+hohM4
         bv9Yo7TZ7RTohGbb/bFfnKvfkKKe2uiseF7lxVtbU5FgcIzg35c3M46OHb+7UBQjB72g
         VKEgmK+ihEFv4qucG9d5lp4YfyEZbnaeW7o+M=
Received: by 10.42.167.73 with SMTP id r9mr6962980icy.347.1307971045076; Mon,
 13 Jun 2011 06:17:25 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.199.148 with HTTP; Mon, 13 Jun 2011 06:17:05 -0700 (PDT)
In-Reply-To: <4DF60712.2080503@facinf.uho.edu.cu>
References: <4DF60712.2080503@facinf.uho.edu.cu>
From: Ian Lea <ian.lea@gmail.com>
Date: Mon, 13 Jun 2011 14:17:05 +0100
Message-ID: <BANLkTi=8jfwTshvPF07i+Mth7oHu4jZCjA@mail.gmail.com>
Subject: Re: need help
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hello


Lucene can be used for searching pretty much anything.  But it is a
library, not an application, and you'll have to write code to make it
do what you want.  You might be better off using Solr.  It uses lucene
but provides lots of stuff on top.
http://lucene.apache.org/solr/features.html


--
Ian.

On Mon, Jun 13, 2011 at 1:48 PM, Marlen <zmachado@facinf.uho.edu.cu> wrote:
> hello I=C2=B4m new with lucene.. I wold like to know if I can use it to m=
ake
> searchs on my web site and FTP.. and know if it v=C4=84can make search ov=
er
> pdf,*.doc, and any other non plane text
> Thanks
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50001-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun 13 13:46:21 2011
Return-Path: <java-user-return-50001-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 877AB62D7
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 13 Jun 2011 13:46:21 +0000 (UTC)
Received: (qmail 77109 invoked by uid 500); 13 Jun 2011 13:46:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77046 invoked by uid 500); 13 Jun 2011 13:46:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77038 invoked by uid 99); 13 Jun 2011 13:46:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jun 2011 13:46:19 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jun 2011 13:46:11 +0000
Received: by iwr19 with SMTP id 19so5992551iwr.35
        for <java-user@lucene.apache.org>; Mon, 13 Jun 2011 06:45:50 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=2s//v4hrrJVDUFnQQ7ltpN+3jYBJQaICIpnSV51A6/Y=;
        b=LGLDXGOD+Yykx+D5zeVrfR/mLYdCCgFEL6Y1QWJTtrEeqjDeC+BVh54RqhSCJNkfsO
         UBwRB6d+gVPLoHiVFRo0fYtUMxE+cR3O04sUFWebwmvDHWyTCcI8pu7DIqdi1pAMWNm7
         6wN+DQt0krvnDPFMa8lBf1n42k3yXB7+fVL9A=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=e0/kk9ReNUvfJWeGnAxQ+SNTXA9WRk2Ao+g4AoaXsLtSRhiPt0iE4Qgk5gSdr3vQ29
         H8+YWhNdHZctogIVBYYnxDlv39XFXw6PZQpDSMpGb1sw01sdCwJWIgj2z8FD+ogEAPfB
         dpqveK+VpC+f5x36i/Q6hOj9eJij85IT4Wyx0=
Received: by 10.231.116.132 with SMTP id m4mr5691212ibq.86.1307972750094; Mon,
 13 Jun 2011 06:45:50 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.199.148 with HTTP; Mon, 13 Jun 2011 06:45:29 -0700 (PDT)
In-Reply-To: <BANLkTi==nKaAk5pntu7s=gXqeDQ_uxurrA@mail.gmail.com>
References: <BANLkTimx2LkWXvyEDJyvzL4QUd6Mno=sDw@mail.gmail.com>
 <BANLkTinTtCbeDT_ZnNqCQnPq0-kjxCMJaw@mail.gmail.com> <BANLkTi==nKaAk5pntu7s=gXqeDQ_uxurrA@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Mon, 13 Jun 2011 14:45:29 +0100
Message-ID: <BANLkTikYvdsvRkuWEg4XxnMX8ZwaEuPTUQ@mail.gmail.com>
Subject: Re: Modifying Length Normalization calculation
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

This is getting beyond my level of expertise, but I'll have a go at
your questions.  Hopefully someone better informed will step in with
corrections or confirmation.

> ...
> The application calls the *writer.addDocument(d);* method and in this
> process the *lengthNorm(String fieldName, int numTerms)* =A0method is cal=
led.
> I can extend the *DefaultSimilarity* class and override the
> *lengthNorm*method, but how can I explicitly specify the
> *numTerms* value?

I don't know that you can, but you don't have to use the value passed in.

> ...
> Does *computeNorm* method is called for every field or is it only called =
for
> analyzed fields?

All indexed fields, at a guess.  Which can be analyzed or not.

> The order we call *addDocument* and the order the *computeNorm *method is
> called is the same ?

Probably.

> Is there is a possibility that I can access the *Document* object inside =
the
> *Similiarity* class ?

Not that I know of via API calls. If you had your own Similarity
implementation, and methods are called in the order you expect, you
could add a setDoc(Document) method and/or a setCalcValue(n) method
and use them as you wished in your custom computeNorm() or
lengthNorm() code.


--
Ian.


> On Mon, Jun 13, 2011 at 3:09 PM, Ian Lea <ian.lea@gmail.com> wrote:
>
>> org.apache.lucene.search.Similarity would be the place to look,
>> specifically computeNorm(String field, FieldInvertState state). =A0There
>> is comprehensive info in the javadocs. =A0Note that values are
>> calculated at indexing and stored in the index encoded, with some loss
>> of precision.
>>
>>
>> --
>> Ian.
>>
>> On Mon, Jun 13, 2011 at 7:31 AM, Lahiru Samarakoon <lahiruts@gmail.com>
>> wrote:
>> > Hi All,
>> >
>> > I want to change the length normalization calculation specific to my
>> > application. By changing the "*number of terms*" according to my
>> > requirement. The "*StandardTokenizer*" works perfectly for my
>> application,
>> > However, the *number of terms* calculated by the tokenizer is not the
>> > effective number of terms for the application. I have an mechanism to
>> > calculate that value and I need to know how can I apply that value in
>> length
>> > normalization calculations.
>> >
>> > Please advice.
>> >
>> > Thank you,
>> >
>> > Best Regards,
>> > Lahiru.
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50002-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun 13 14:37:23 2011
Return-Path: <java-user-return-50002-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 801AD6BBD
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 13 Jun 2011 14:37:23 +0000 (UTC)
Received: (qmail 53822 invoked by uid 500); 13 Jun 2011 14:37:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53770 invoked by uid 500); 13 Jun 2011 14:37:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53762 invoked by uid 99); 13 Jun 2011 14:37:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jun 2011 14:37:21 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [200.14.55.1] (HELO mail.uho.edu.cu) (200.14.55.1)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jun 2011 14:37:14 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail.uho.edu.cu (Postfix) with ESMTP id 48C9513AD11
	for <java-user@lucene.apache.org>; Mon, 13 Jun 2011 10:36:18 -0400 (CDT)
Received: from mail.uho.edu.cu ([127.0.0.1])
	by localhost (ns1.uho.edu.cu [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 7ZZX4L8hopZZ for <java-user@lucene.apache.org>;
	Mon, 13 Jun 2011 10:36:18 -0400 (CDT)
Received: from facinf.uho.edu.cu (correoweb.uho.edu.cu [10.26.2.1])
	by mail.uho.edu.cu (Postfix) with ESMTP id 3663013AD07
	for <java-user@lucene.apache.org>; Mon, 13 Jun 2011 10:36:18 -0400 (CDT)
Received: from localhost (localhost [127.0.0.1])
	by facinf.uho.edu.cu (Postfix) with ESMTP id 143167D614
	for <java-user@lucene.apache.org>; Mon, 13 Jun 2011 10:36:27 -0400 (CDT)
Received: from facinf.uho.edu.cu ([127.0.0.1])
	by localhost (facinf.uho.edu.cu [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 4gctqDavZknI for <java-user@lucene.apache.org>;
	Mon, 13 Jun 2011 10:36:27 -0400 (CDT)
Received: from [10.26.0.2] (unknown [10.26.0.2])
	by facinf.uho.edu.cu (Postfix) with ESMTPA id F16BA7D612
	for <java-user@lucene.apache.org>; Mon, 13 Jun 2011 10:36:26 -0400 (CDT)
Message-ID: <4DF6202A.8030108@facinf.uho.edu.cu>
Date: Mon, 13 Jun 2011 10:35:22 -0400
From: Marlen <zmachado@facinf.uho.edu.cu>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.2.11) Gecko/20101013 Lightning/1.0b2 Thunderbird/3.1.5 ThunderBrowse/3.3.4
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: need help
References: <4DF60712.2080503@facinf.uho.edu.cu> <BANLkTi=8jfwTshvPF07i+Mth7oHu4jZCjA@mail.gmail.com>
In-Reply-To: <BANLkTi=8jfwTshvPF07i+Mth7oHu4jZCjA@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

thank you very much Ian.
On 13/06/2011 9:17, Ian Lea wrote:
> Hello
>
>
> Lucene can be used for searching pretty much anything.  But it is a
> library, not an application, and you'll have to write code to make it
> do what you want.  You might be better off using Solr.  It uses lucene
> but provides lots of stuff on top.
> http://lucene.apache.org/solr/features.html
>
>
> --
> Ian.
>
> On Mon, Jun 13, 2011 at 1:48 PM, Marlen<zmachado@facinf.uho.edu.cu>  wrote:
>> hello Im new with lucene.. I wold like to know if I can use it to make
>> searchs on my web site and FTP.. and know if it vcan make search over
>> pdf,*.doc, and any other non plane text
>> Thanks
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50003-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun 13 16:02:18 2011
Return-Path: <java-user-return-50003-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9DD466587
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 13 Jun 2011 16:02:18 +0000 (UTC)
Received: (qmail 32025 invoked by uid 500); 13 Jun 2011 16:02:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31983 invoked by uid 500); 13 Jun 2011 16:02:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31949 invoked by uid 99); 13 Jun 2011 16:02:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jun 2011 16:02:12 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.220.176] (HELO mail-vx0-f176.google.com) (209.85.220.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jun 2011 16:02:08 +0000
Received: by vxa37 with SMTP id 37so6084775vxa.35
        for <java-user@lucene.apache.org>; Mon, 13 Jun 2011 09:01:47 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.52.160.68 with SMTP id xi4mr5009763vdb.106.1307980907291; Mon,
 13 Jun 2011 09:01:47 -0700 (PDT)
Received: by 10.52.162.5 with HTTP; Mon, 13 Jun 2011 09:01:47 -0700 (PDT)
In-Reply-To: <4DF525B6.2000902@code972.com>
References: <4DF3C40F.9090703@code972.com>
	<BANLkTi=2U3RTtOq_1oiA_FGBwpiPcVVMyg@mail.gmail.com>
	<BANLkTinHragJQUTX3j+mcdW0K0B73A0T=A@mail.gmail.com>
	<4DF47461.1050004@code972.com>
	<BANLkTim_RCpPNkb2WyGwCJ3a0eDyiOBGjA@mail.gmail.com>
	<4DF504B2.4000105@code972.com>
	<BANLkTim_sX8CQMknZJwWX4q6pt6Jx5wrWQ@mail.gmail.com>
	<4DF525B6.2000902@code972.com>
Date: Mon, 13 Jun 2011 12:01:47 -0400
Message-ID: <BANLkTimUR3ax=odY8Ln9da6f_m_oGYvpMA@mail.gmail.com>
Subject: Re: Index size and performance degradation
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Here's a blog post describing some details of Twitter's approach:

    http://engineering.twitter.com/2010/10/twitters-new-search-architecture=
.html

And here's a talk Michael did last October (Lucene Revolutions):

    http://www.lucidimagination.com/events/revolution2010/video-Realtime-Se=
arch-With-Lucene-presented-by-Michael-Busch-of-Twitter

Twitter's case is simpler since they never delete ;)  So we have to
fix that to do it in Lucene... there are also various open issues that
begin to explore some of the ideas here.

But this ("immediate consistency") would be a deep and complex change,
and I don't see many apps that actually require it.

Mike McCandless

http://blog.mikemccandless.com

On Sun, Jun 12, 2011 at 4:46 PM, Itamar Syn-Hershko <itamar@code972.com> wr=
ote:
> Thanks for your detailed answer. We'll have to tackle this and see whats
> more important to us then. I'd definitely love to hear Zoie has overcame =
all
> that...
>
>
> Any pointers to Michael Busch's approach? I take this has something to do
> with the core itself or index format, probably using the Flex version?
>
>
> Itamar.
>
>
> On 12/06/2011 23:12, Michael McCandless wrote:
>
>> > From what I understand of Zoie (and it's been some time since I last
>> looked... so this could be wrong now), the biggest difference vs NRT
>> is that Zoie aims for "immediate consistency", ie index changes are
>> always made visible to the very next query, vs NRT which is
>> "controlled consistency", a blend between immediate and eventual
>> consistency where your app decides when the changes must become
>> visible.
>>
>> But in exchange for that, Zoie pays a price: each search has a higher
>> cost per collected hit, since it must post-filter for deleted docs.
>> And since Zoie necessarily adds complexity, there's more risk; eg
>> there were some nasty Zoie bugs that took quite some time to track
>> down (under https://issues.apache.org/jira/browse/LUCENE-2729).
>>
>> Anyway, I don't think that's a good tradeoff, in general, for our
>> users, because very few apps truly require immediate consistency from
>> Lucene (can anyone give an example where their app depends on
>> immediate consistency...?). =A0I think it's better to spend time during
>> reopen so that searches aren't slower.
>>
>> That said, Lucene has already incorporated one big part of Zoie
>> (caching small segments in RAM) via the new NRTCachingDirectory (in
>> contrib/misc). =A0Also, the upcoming NRTManager
>> (https://issues.apache.org/jira/browse/LUCENE-2955) adds control over
>> visibility of specific indexing changes to queries that need to see
>> the changes.
>>
>> Finally, even better would be to not have to make any tradeoff
>> whatsoever ;) =A0Twitter's approach (created by Michael Busch) seems to
>> bring immediate consistency with no search performance hit, so if we
>> do anything here likely it'll be similar to what Michael has done
>> (though, those changes are not simple either!).
>>
>> Mike McCandless
>>
>> http://blog.mikemccandless.com
>>
>> On Sun, Jun 12, 2011 at 2:25 PM, Itamar Syn-Hershko<itamar@code972.com>
>> =A0wrote:
>>>
>>> Mike,
>>>
>>>
>>> Speaking of NRT, and completely off-topic, I know: Lucene's NRT
>>> apparently
>>> isn't fast enough if Zoie was needed, and now that Zoie is around are
>>> there
>>> any plans to make it Lucene's default? or: why would one still use NRT
>>> when
>>> Zoie seem to work much better?
>>>
>>>
>>> Itamar.
>>>
>>>
>>> On 12/06/2011 13:16, Michael McCandless wrote:
>>>
>>>> Remember that memory-mapping is not a panacea: at the end of the day,
>>>> if there just isn't enough RAM on the machine to keep your full
>>>> "working set" hot, then the OS will have to hit the disk, regardless
>>>> of whether the access is through MMap or a "traditional" IO request.
>>>>
>>>> That said, on Fedora Linux anyway, I generally see better performance
>>>> from MMap than from NIOFSDir; eg see the 2nd chart here:
>>>>
>>>>
>>>>
>>>> http://blog.mikemccandless.com/2011/06/lucenes-near-real-time-search-i=
s-fast.html
>>>>
>>>> Mike McCandless
>>>>
>>>> http://blog.mikemccandless.com
>>>>
>>>> On Sun, Jun 12, 2011 at 4:10 AM, Itamar Syn-Hershko<itamar@code972.com=
>
>>>> =A0wrote:
>>>>>
>>>>> Thanks.
>>>>>
>>>>>
>>>>> The whole point of my question was to find out if and how to make
>>>>> balancing
>>>>> on the SAME machine. Apparently thats not going to help and at a
>>>>> certain
>>>>> point we will just have to prompt the user to buy more hardware...
>>>>>
>>>>>
>>>>> Out of curiosity, isn't there anything that we can do to avoid that?
>>>>> for
>>>>> instance using memory-mapped files for the indexes? anything that wou=
ld
>>>>> help
>>>>> us overcome OS limitations of that sort...
>>>>>
>>>>>
>>>>> Also, you mention a scheduled job to check for performance degradatio=
n;
>>>>> any
>>>>> idea how serious such a drop should be for sharding to be really
>>>>> beneficial?
>>>>> or is it application specific too?
>>>>>
>>>>>
>>>>> Itamar.
>>>>>
>>>>>
>>>>> On 12/06/2011 06:43, Shai Erera wrote:
>>>>>
>>>>>> I agree w/ Erick, there is no cutoff point (index size for that
>>>>>> matter)
>>>>>> above which you start sharding.
>>>>>>
>>>>>> What you can do is create a scheduled job in your system that runs a
>>>>>> select
>>>>>> list of queries and monitors their performance. Once it degrades, it
>>>>>> shards
>>>>>> the index by either splitting it (you can use IndexSplitter under
>>>>>> contrib)
>>>>>> or create a new shard, and direct new documents to it.
>>>>>>
>>>>>> I think I read somewhere, not sure if it was in Solr or ElasticSearc=
h
>>>>>> documentation, about a Balancer object, which moves shards around in
>>>>>> order
>>>>>> to balance the load on the cluster. You can implement something
>>>>>> similar
>>>>>> which tries to balance the index sizes, creates new shards on-the-fl=
y,
>>>>>> even
>>>>>> merge shards if suddenly a whole source is being removed from the
>>>>>> system
>>>>>> etc.
>>>>>>
>>>>>> Also, note that the 'largest index size' threshold is really a machi=
ne
>>>>>> constraint and not Lucene's. So if you decide that 10 GB is your
>>>>>> cutoff,
>>>>>> it
>>>>>> is pointless to create 10x10GB shards on the same machine -- searchi=
ng
>>>>>> them
>>>>>> is just like searching a 100GB index w/ 10x10GB segments. Perhaps it=
's
>>>>>> even
>>>>>> worse because you consume more RAM when the indexes are split (e.g.,
>>>>>> terms
>>>>>> index, field infos etc.).
>>>>>>
>>>>>> Shai
>>>>>>
>>>>>> On Sun, Jun 12, 2011 at 3:10 AM, Erick
>>>>>> Erickson<erickerickson@gmail.com>wrote:
>>>>>>
>>>>>>> <<<We can't assume anything about the machine running it,
>>>>>>> so testing won't really tell us much>>>
>>>>>>>
>>>>>>> Hmmm, then it's pretty hopeless I think. Problem is that
>>>>>>> anything you say about running on a machine with
>>>>>>> 2G available memory on a single processor is completely
>>>>>>> incomparable to running on a machine with 64G of
>>>>>>> memory available for Lucene and 16 processors.
>>>>>>>
>>>>>>> There's really no such thing as an "optimum" Lucene index
>>>>>>> size, it always relates to the characteristics of the
>>>>>>> underlying hardware.
>>>>>>>
>>>>>>> I think the best you can do is actually test on various
>>>>>>> configurations, then at least you can say "on configuration
>>>>>>> X this is the tipping point".
>>>>>>>
>>>>>>> Sorry there isn't a better answer that I know of, but...
>>>>>>>
>>>>>>> Best
>>>>>>> Erick
>>>>>>>
>>>>>>> On Sat, Jun 11, 2011 at 3:37 PM, Itamar
>>>>>>> Syn-Hershko<itamar@code972.com>
>>>>>>> wrote:
>>>>>>>>
>>>>>>>> Hi all,
>>>>>>>>
>>>>>>>> I know Lucene indexes to be at their optimum up to a certain size =
-
>>>>>>>> said
>>>>>>>
>>>>>>> to
>>>>>>>>
>>>>>>>> be around several GBs. I haven't found a good discussion over this=
,
>>>>>>>> but
>>>>>>>
>>>>>>> its
>>>>>>>>
>>>>>>>> my understanding that at some point its better to split an index
>>>>>>>> into
>>>>>>>
>>>>>>> parts
>>>>>>>>
>>>>>>>> (a la sharding) than to continue searching on a huge-size index. I
>>>>>>>> assume
>>>>>>>> this has to do with OS and IO configurations. Can anyone point me =
to
>>>>>>>> more
>>>>>>>> info on this?
>>>>>>>>
>>>>>>>> We have a product that is using Lucene for various searches, and a=
t
>>>>>>>> the
>>>>>>>> moment each type of search is using its own Lucene index. We plan =
on
>>>>>>>> refactoring the way it works and to combine all indexes into one -
>>>>>>>> making
>>>>>>>> the whole system more robust and with a smaller memory footprint,
>>>>>>>> among
>>>>>>>> other things.
>>>>>>>>
>>>>>>>> Assuming the above is true, we are interested in knowing how to do
>>>>>>>> this
>>>>>>>> correctly. Initially all our indexes will be run in one big index,
>>>>>>>> but
>>>>>>>> if
>>>>>>>
>>>>>>> at
>>>>>>>>
>>>>>>>> some index size there is a severe performance degradation we would
>>>>>>>> like
>>>>>>>
>>>>>>> to
>>>>>>>>
>>>>>>>> handle that correctly by starting a new FSDirectory index to flush
>>>>>>>> into,
>>>>>>>
>>>>>>> or
>>>>>>>>
>>>>>>>> by re-indexing and moving large indexes into their own Lucene inde=
x.
>>>>>>>>
>>>>>>>> Are there are any guidelines for measuring or estimating this
>>>>>>>> correctly?
>>>>>>>> what we should be aware of while considering all that? We can't
>>>>>>>> assume
>>>>>>>> anything about the machine running it, so testing won't really tel=
l
>>>>>>>> us
>>>>>>>> much...
>>>>>>>>
>>>>>>>> Thanks in advance for any input on this,
>>>>>>>>
>>>>>>>> Itamar.
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> ------------------------------------------------------------------=
---
>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>
>>>>>>>>
>>>>>>> -------------------------------------------------------------------=
--
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>
>>>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50004-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun 13 20:48:14 2011
Return-Path: <java-user-return-50004-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A765D6244
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 13 Jun 2011 20:48:14 +0000 (UTC)
Received: (qmail 12016 invoked by uid 500); 13 Jun 2011 20:48:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11958 invoked by uid 500); 13 Jun 2011 20:48:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 9283 invoked by uid 99); 11 Jun 2011 06:17:05 -0000
X-ASF-Spam-Status: No, hits=4.5 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,FROM_EXCESS_BASE64,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of 1393975679@qq.com designates 64.71.138.44 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=qq.com; s=s0907;
	t=1307772986; bh=1aelfgJ+TCGiyu45Q9C3MwMa9IIEAnQ9RnxbO6j1gVA=;
	h=X-QQ-SSF:X-QQ-BUSINESS-ORIGIN:X-Originating-IP:X-QQ-STYLE:
	 X-QQ-mid:From:To:Sender:Subject:Mime-Version:Content-Type:
	 Content-Transfer-Encoding:Date:X-Priority:Message-ID:X-QQ-MIME:
	 X-Mailer:X-QQ-Mailer;
	b=fyI4SSPNtQ6+T7D09TiepFgeHWBCoTZO2YJLfs2s8PciUPk+lpMU80HdWVOzvO8f2
	 TY81ylpxY0I+4tb/m1qn22Xas7dnaLjosj7Vb3bWItlWpxNNGjzpqGXqRc4bt0R
X-QQ-SSF:0000000000000000
X-QQ-BUSINESS-ORIGIN:2
X-Originating-IP: 125.123.79.208
X-QQ-STYLE:
X-QQ-mid:webmail456t1307772984t5307114
From: "=?ISO-8859-1?B?ZHl6YzIwMTA=?=" <zhoucheng2008@gmail.com>
To: "=?ISO-8859-1?B?amF2YS11c2Vy?=" <java-user@lucene.apache.org>
Sender: 1393975679@qq.com
Subject: So many compiling errors in the 3.3 source release when added into Eclipse
Mime-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_4DF30838_0871DC20_22CF1CAE"
Content-Transfer-Encoding: 8Bit
Date: Sat, 11 Jun 2011 14:16:24 +0800
X-Priority: 3
Message-ID: <tencent_0AD68E0979C98F3F5AA2FC6E@qq.com>
X-QQ-MIME: TCMime 1.0 by Tencent
X-Mailer: QQMail 2.x
X-QQ-Mailer: QQMail 2.x
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_4DF30838_0871DC20_22CF1CAE
Content-Type: text/plain;
	charset="ISO-8859-1"
Content-Transfer-Encoding: base64

SGkgSSBhZGRlZCBhIEphdmEgcHJvamVjdCBpbiBFY2xpcHNlIGZvciB0aGUgMy4zIHNyYyBy
ZWxlYXNlLCBhbmQgZmluZCBodW5kcmVkcyBvZiBjb21waWxpbmcgZXJyb3JzLiBNb3N0IGFy
ZSB0aGUgTW9ja0FuYWx5emVyIGNsYXNzIGFyZSBtaXNzaW5nIGEgZmV3IGNvbnN0cnVjdG9y
cy4NCg0KDQpEb2VzIGFueW9uZSBoYXZlIHRoZSBzYW1lIGV4cGVyaWVuY2U/IEhvdyBoYXMg
dGhpcyBpbmNvbXBsZXRlIHZlcnNpb24gYmVlbiByZWxlYXNlZD8NCg0KDQpUaGFua3M=

------=_NextPart_4DF30838_0871DC20_22CF1CAE--


From java-user-return-50005-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun 13 21:03:09 2011
Return-Path: <java-user-return-50005-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B4A0D69C0
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 13 Jun 2011 21:03:09 +0000 (UTC)
Received: (qmail 46424 invoked by uid 500); 13 Jun 2011 21:03:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46379 invoked by uid 500); 13 Jun 2011 21:03:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46371 invoked by uid 99); 13 Jun 2011 21:03:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jun 2011 21:03:06 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [188.121.53.1] (HELO n1plout04-01.prod.ams1.secureserver.net) (188.121.53.1)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 13 Jun 2011 21:02:58 +0000
Received: (qmail 18395 invoked from network); 13 Jun 2011 21:02:35 -0000
Received: from unknown (79.179.3.190)
  by n1plout04-01.prod.ams1.secureserver.net (188.121.53.1) with ESMTP; 13 Jun 2011 21:02:35 -0000
Message-ID: <4DF67AE8.1070300@code972.com>
Date: Tue, 14 Jun 2011 00:02:32 +0300
From: Itamar Syn-Hershko <itamar@code972.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.17) Gecko/20110414 Lightning/1.0b2 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Index size and performance degradation
References: <4DF3C40F.9090703@code972.com>	<BANLkTi=2U3RTtOq_1oiA_FGBwpiPcVVMyg@mail.gmail.com>	<BANLkTinHragJQUTX3j+mcdW0K0B73A0T=A@mail.gmail.com>	<4DF47461.1050004@code972.com>	<BANLkTi=AcTVV1ruMvvWj_a7Ha_VzaxSuzA@mail.gmail.com>	<4DF4F39C.1090108@code972.com>	<BANLkTi=1kufZzCieYVo95Ap_RLAFqwHepg@mail.gmail.com>	<4DF50A8D.5040704@code972.com> <BANLkTi=w+aqtnhs4GyyqLYOV6jh=nsbU_w@mail.gmail.com>
In-Reply-To: <BANLkTi=w+aqtnhs4GyyqLYOV6jh=nsbU_w@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On 13/06/2011 06:23, Shai Erera wrote:
> A Language filter is one -- different users search in different languages
> and want to view pages in those languages only. If you have a field attach
> to your documents that identifies the language of the document, you can use
> it to filter the queries to return results only of the requested language.
>
> Another filter is file type.

Oh, ok, but you'll still cache the results - so again this isn't viable 
when RT search, or even an NRT, is a requirement...

Is the usage of such Filters the only reason you don't include the 
language field in your query?

Itamar.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50006-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun 13 21:08:42 2011
Return-Path: <java-user-return-50006-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 735876353
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 13 Jun 2011 21:08:42 +0000 (UTC)
Received: (qmail 63093 invoked by uid 500); 13 Jun 2011 21:08:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63048 invoked by uid 500); 13 Jun 2011 21:08:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63040 invoked by uid 99); 13 Jun 2011 21:08:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jun 2011 21:08:40 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [188.121.53.2] (HELO n1plout04-02.prod.ams1.secureserver.net) (188.121.53.2)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 13 Jun 2011 21:08:33 +0000
Received: (qmail 28215 invoked from network); 13 Jun 2011 21:08:12 -0000
Received: from unknown (79.179.3.190)
  by n1plout04-02.prod.ams1.secureserver.net (188.121.53.2) with ESMTP; 13 Jun 2011 21:07:02 -0000
Message-ID: <4DF67BF3.1030801@code972.com>
Date: Tue, 14 Jun 2011 00:06:59 +0300
From: Itamar Syn-Hershko <itamar@code972.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.17) Gecko/20110414 Lightning/1.0b2 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Index size and performance degradation
References: <4DF3C40F.9090703@code972.com>	<BANLkTi=2U3RTtOq_1oiA_FGBwpiPcVVMyg@mail.gmail.com>	<BANLkTinHragJQUTX3j+mcdW0K0B73A0T=A@mail.gmail.com>	<4DF47461.1050004@code972.com>	<BANLkTim_RCpPNkb2WyGwCJ3a0eDyiOBGjA@mail.gmail.com>	<4DF504B2.4000105@code972.com>	<BANLkTim_sX8CQMknZJwWX4q6pt6Jx5wrWQ@mail.gmail.com>	<4DF525B6.2000902@code972.com> <BANLkTimUR3ax=odY8Ln9da6f_m_oGYvpMA@mail.gmail.com>
In-Reply-To: <BANLkTimUR3ax=odY8Ln9da6f_m_oGYvpMA@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Mike, much appreciated.


Wouldn't Twitter's approach fall for the exact same pit-hole you 
described Zoie does (or did) when it'll handle deletes too? I don't 
thing there is any other way of handling deletes other than 
post-filtering results. But perhaps the IW cache would be smaller than 
Zoie's RAMDirectory(ies)?


I'll give all that a serious dive and report back with results or if 
more input will be required...


Itamar.


On 13/06/2011 19:01, Michael McCandless wrote:

> Here's a blog post describing some details of Twitter's approach:
>
>      http://engineering.twitter.com/2010/10/twitters-new-search-architecture.html
>
> And here's a talk Michael did last October (Lucene Revolutions):
>
>      http://www.lucidimagination.com/events/revolution2010/video-Realtime-Search-With-Lucene-presented-by-Michael-Busch-of-Twitter
>
> Twitter's case is simpler since they never delete ;)  So we have to
> fix that to do it in Lucene... there are also various open issues that
> begin to explore some of the ideas here.
>
> But this ("immediate consistency") would be a deep and complex change,
> and I don't see many apps that actually require it.
>
> Mike McCandless
>
> http://blog.mikemccandless.com
>
> On Sun, Jun 12, 2011 at 4:46 PM, Itamar Syn-Hershko<itamar@code972.com>  wrote:
>> Thanks for your detailed answer. We'll have to tackle this and see whats
>> more important to us then. I'd definitely love to hear Zoie has overcame all
>> that...
>>
>>
>> Any pointers to Michael Busch's approach? I take this has something to do
>> with the core itself or index format, probably using the Flex version?
>>
>>
>> Itamar.
>>
>>
>> On 12/06/2011 23:12, Michael McCandless wrote:
>>
>>>>  From what I understand of Zoie (and it's been some time since I last
>>> looked... so this could be wrong now), the biggest difference vs NRT
>>> is that Zoie aims for "immediate consistency", ie index changes are
>>> always made visible to the very next query, vs NRT which is
>>> "controlled consistency", a blend between immediate and eventual
>>> consistency where your app decides when the changes must become
>>> visible.
>>>
>>> But in exchange for that, Zoie pays a price: each search has a higher
>>> cost per collected hit, since it must post-filter for deleted docs.
>>> And since Zoie necessarily adds complexity, there's more risk; eg
>>> there were some nasty Zoie bugs that took quite some time to track
>>> down (under https://issues.apache.org/jira/browse/LUCENE-2729).
>>>
>>> Anyway, I don't think that's a good tradeoff, in general, for our
>>> users, because very few apps truly require immediate consistency from
>>> Lucene (can anyone give an example where their app depends on
>>> immediate consistency...?).  I think it's better to spend time during
>>> reopen so that searches aren't slower.
>>>
>>> That said, Lucene has already incorporated one big part of Zoie
>>> (caching small segments in RAM) via the new NRTCachingDirectory (in
>>> contrib/misc).  Also, the upcoming NRTManager
>>> (https://issues.apache.org/jira/browse/LUCENE-2955) adds control over
>>> visibility of specific indexing changes to queries that need to see
>>> the changes.
>>>
>>> Finally, even better would be to not have to make any tradeoff
>>> whatsoever ;)  Twitter's approach (created by Michael Busch) seems to
>>> bring immediate consistency with no search performance hit, so if we
>>> do anything here likely it'll be similar to what Michael has done
>>> (though, those changes are not simple either!).
>>>
>>> Mike McCandless
>>>
>>> http://blog.mikemccandless.com
>>>
>>> On Sun, Jun 12, 2011 at 2:25 PM, Itamar Syn-Hershko<itamar@code972.com>
>>>   wrote:
>>>> Mike,
>>>>
>>>>
>>>> Speaking of NRT, and completely off-topic, I know: Lucene's NRT
>>>> apparently
>>>> isn't fast enough if Zoie was needed, and now that Zoie is around are
>>>> there
>>>> any plans to make it Lucene's default? or: why would one still use NRT
>>>> when
>>>> Zoie seem to work much better?
>>>>
>>>>
>>>> Itamar.
>>>>
>>>>
>>>> On 12/06/2011 13:16, Michael McCandless wrote:
>>>>
>>>>> Remember that memory-mapping is not a panacea: at the end of the day,
>>>>> if there just isn't enough RAM on the machine to keep your full
>>>>> "working set" hot, then the OS will have to hit the disk, regardless
>>>>> of whether the access is through MMap or a "traditional" IO request.
>>>>>
>>>>> That said, on Fedora Linux anyway, I generally see better performance
>>>>> from MMap than from NIOFSDir; eg see the 2nd chart here:
>>>>>
>>>>>
>>>>>
>>>>> http://blog.mikemccandless.com/2011/06/lucenes-near-real-time-search-is-fast.html
>>>>>
>>>>> Mike McCandless
>>>>>
>>>>> http://blog.mikemccandless.com
>>>>>
>>>>> On Sun, Jun 12, 2011 at 4:10 AM, Itamar Syn-Hershko<itamar@code972.com>
>>>>>   wrote:
>>>>>> Thanks.
>>>>>>
>>>>>>
>>>>>> The whole point of my question was to find out if and how to make
>>>>>> balancing
>>>>>> on the SAME machine. Apparently thats not going to help and at a
>>>>>> certain
>>>>>> point we will just have to prompt the user to buy more hardware...
>>>>>>
>>>>>>
>>>>>> Out of curiosity, isn't there anything that we can do to avoid that?
>>>>>> for
>>>>>> instance using memory-mapped files for the indexes? anything that would
>>>>>> help
>>>>>> us overcome OS limitations of that sort...
>>>>>>
>>>>>>
>>>>>> Also, you mention a scheduled job to check for performance degradation;
>>>>>> any
>>>>>> idea how serious such a drop should be for sharding to be really
>>>>>> beneficial?
>>>>>> or is it application specific too?
>>>>>>
>>>>>>
>>>>>> Itamar.
>>>>>>
>>>>>>
>>>>>> On 12/06/2011 06:43, Shai Erera wrote:
>>>>>>
>>>>>>> I agree w/ Erick, there is no cutoff point (index size for that
>>>>>>> matter)
>>>>>>> above which you start sharding.
>>>>>>>
>>>>>>> What you can do is create a scheduled job in your system that runs a
>>>>>>> select
>>>>>>> list of queries and monitors their performance. Once it degrades, it
>>>>>>> shards
>>>>>>> the index by either splitting it (you can use IndexSplitter under
>>>>>>> contrib)
>>>>>>> or create a new shard, and direct new documents to it.
>>>>>>>
>>>>>>> I think I read somewhere, not sure if it was in Solr or ElasticSearch
>>>>>>> documentation, about a Balancer object, which moves shards around in
>>>>>>> order
>>>>>>> to balance the load on the cluster. You can implement something
>>>>>>> similar
>>>>>>> which tries to balance the index sizes, creates new shards on-the-fly,
>>>>>>> even
>>>>>>> merge shards if suddenly a whole source is being removed from the
>>>>>>> system
>>>>>>> etc.
>>>>>>>
>>>>>>> Also, note that the 'largest index size' threshold is really a machine
>>>>>>> constraint and not Lucene's. So if you decide that 10 GB is your
>>>>>>> cutoff,
>>>>>>> it
>>>>>>> is pointless to create 10x10GB shards on the same machine -- searching
>>>>>>> them
>>>>>>> is just like searching a 100GB index w/ 10x10GB segments. Perhaps it's
>>>>>>> even
>>>>>>> worse because you consume more RAM when the indexes are split (e.g.,
>>>>>>> terms
>>>>>>> index, field infos etc.).
>>>>>>>
>>>>>>> Shai
>>>>>>>
>>>>>>> On Sun, Jun 12, 2011 at 3:10 AM, Erick
>>>>>>> Erickson<erickerickson@gmail.com>wrote:
>>>>>>>
>>>>>>>> <<<We can't assume anything about the machine running it,
>>>>>>>> so testing won't really tell us much>>>
>>>>>>>>
>>>>>>>> Hmmm, then it's pretty hopeless I think. Problem is that
>>>>>>>> anything you say about running on a machine with
>>>>>>>> 2G available memory on a single processor is completely
>>>>>>>> incomparable to running on a machine with 64G of
>>>>>>>> memory available for Lucene and 16 processors.
>>>>>>>>
>>>>>>>> There's really no such thing as an "optimum" Lucene index
>>>>>>>> size, it always relates to the characteristics of the
>>>>>>>> underlying hardware.
>>>>>>>>
>>>>>>>> I think the best you can do is actually test on various
>>>>>>>> configurations, then at least you can say "on configuration
>>>>>>>> X this is the tipping point".
>>>>>>>>
>>>>>>>> Sorry there isn't a better answer that I know of, but...
>>>>>>>>
>>>>>>>> Best
>>>>>>>> Erick
>>>>>>>>
>>>>>>>> On Sat, Jun 11, 2011 at 3:37 PM, Itamar
>>>>>>>> Syn-Hershko<itamar@code972.com>
>>>>>>>> wrote:
>>>>>>>>> Hi all,
>>>>>>>>>
>>>>>>>>> I know Lucene indexes to be at their optimum up to a certain size -
>>>>>>>>> said
>>>>>>>> to
>>>>>>>>> be around several GBs. I haven't found a good discussion over this,
>>>>>>>>> but
>>>>>>>> its
>>>>>>>>> my understanding that at some point its better to split an index
>>>>>>>>> into
>>>>>>>> parts
>>>>>>>>> (a la sharding) than to continue searching on a huge-size index. I
>>>>>>>>> assume
>>>>>>>>> this has to do with OS and IO configurations. Can anyone point me to
>>>>>>>>> more
>>>>>>>>> info on this?
>>>>>>>>>
>>>>>>>>> We have a product that is using Lucene for various searches, and at
>>>>>>>>> the
>>>>>>>>> moment each type of search is using its own Lucene index. We plan on
>>>>>>>>> refactoring the way it works and to combine all indexes into one -
>>>>>>>>> making
>>>>>>>>> the whole system more robust and with a smaller memory footprint,
>>>>>>>>> among
>>>>>>>>> other things.
>>>>>>>>>
>>>>>>>>> Assuming the above is true, we are interested in knowing how to do
>>>>>>>>> this
>>>>>>>>> correctly. Initially all our indexes will be run in one big index,
>>>>>>>>> but
>>>>>>>>> if
>>>>>>>> at
>>>>>>>>> some index size there is a severe performance degradation we would
>>>>>>>>> like
>>>>>>>> to
>>>>>>>>> handle that correctly by starting a new FSDirectory index to flush
>>>>>>>>> into,
>>>>>>>> or
>>>>>>>>> by re-indexing and moving large indexes into their own Lucene index.
>>>>>>>>>
>>>>>>>>> Are there are any guidelines for measuring or estimating this
>>>>>>>>> correctly?
>>>>>>>>> what we should be aware of while considering all that? We can't
>>>>>>>>> assume
>>>>>>>>> anything about the machine running it, so testing won't really tell
>>>>>>>>> us
>>>>>>>>> much...
>>>>>>>>>
>>>>>>>>> Thanks in advance for any input on this,
>>>>>>>>>
>>>>>>>>> Itamar.
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> ---------------------------------------------------------------------
>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>>
>>>>>>>>>
>>>>>>>> ---------------------------------------------------------------------
>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>
>>>>>>>>
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50007-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun 13 22:00:59 2011
Return-Path: <java-user-return-50007-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9176568BB
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 13 Jun 2011 22:00:59 +0000 (UTC)
Received: (qmail 60854 invoked by uid 500); 13 Jun 2011 22:00:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60811 invoked by uid 500); 13 Jun 2011 22:00:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60803 invoked by uid 99); 13 Jun 2011 22:00:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jun 2011 22:00:56 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jun 2011 22:00:50 +0000
Received: by vws7 with SMTP id 7so6513909vws.35
        for <java-user@lucene.apache.org>; Mon, 13 Jun 2011 15:00:29 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.52.68.162 with SMTP id x2mr7051750vdt.116.1308002428991; Mon,
 13 Jun 2011 15:00:28 -0700 (PDT)
Received: by 10.52.162.5 with HTTP; Mon, 13 Jun 2011 15:00:28 -0700 (PDT)
In-Reply-To: <4DF67BF3.1030801@code972.com>
References: <4DF3C40F.9090703@code972.com>
	<BANLkTi=2U3RTtOq_1oiA_FGBwpiPcVVMyg@mail.gmail.com>
	<BANLkTinHragJQUTX3j+mcdW0K0B73A0T=A@mail.gmail.com>
	<4DF47461.1050004@code972.com>
	<BANLkTim_RCpPNkb2WyGwCJ3a0eDyiOBGjA@mail.gmail.com>
	<4DF504B2.4000105@code972.com>
	<BANLkTim_sX8CQMknZJwWX4q6pt6Jx5wrWQ@mail.gmail.com>
	<4DF525B6.2000902@code972.com>
	<BANLkTimUR3ax=odY8Ln9da6f_m_oGYvpMA@mail.gmail.com>
	<4DF67BF3.1030801@code972.com>
Date: Mon, 13 Jun 2011 18:00:28 -0400
Message-ID: <BANLkTi=c-oy5EEavyDuLs_Ky=MbaYQG-sQ@mail.gmail.com>
Subject: Re: Index size and performance degradation
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Yes, adding deletes to Twitter's approach will be a challenge!

I don't think we'd do the post-filtering solution, but instead maybe
resolve the deletes "live" and store them in a transactional data
structure of some kind... but even then we will pay a perf hit to
lookup del docs against it.

So, yeah, there will presumably be a tradeoff with this approach too.
However, turning around changes from the adds should be faster (no
segment gets flushed).

Mike McCandless

http://blog.mikemccandless.com

On Mon, Jun 13, 2011 at 5:06 PM, Itamar Syn-Hershko <itamar@code972.com> wr=
ote:
> Thanks Mike, much appreciated.
>
>
> Wouldn't Twitter's approach fall for the exact same pit-hole you describe=
d
> Zoie does (or did) when it'll handle deletes too? I don't thing there is =
any
> other way of handling deletes other than post-filtering results. But perh=
aps
> the IW cache would be smaller than Zoie's RAMDirectory(ies)?
>
>
> I'll give all that a serious dive and report back with results or if more
> input will be required...
>
>
> Itamar.
>
>
> On 13/06/2011 19:01, Michael McCandless wrote:
>
>> Here's a blog post describing some details of Twitter's approach:
>>
>>
>> http://engineering.twitter.com/2010/10/twitters-new-search-architecture.=
html
>>
>> And here's a talk Michael did last October (Lucene Revolutions):
>>
>>
>> http://www.lucidimagination.com/events/revolution2010/video-Realtime-Sea=
rch-With-Lucene-presented-by-Michael-Busch-of-Twitter
>>
>> Twitter's case is simpler since they never delete ;) =A0So we have to
>> fix that to do it in Lucene... there are also various open issues that
>> begin to explore some of the ideas here.
>>
>> But this ("immediate consistency") would be a deep and complex change,
>> and I don't see many apps that actually require it.
>>
>> Mike McCandless
>>
>> http://blog.mikemccandless.com
>>
>> On Sun, Jun 12, 2011 at 4:46 PM, Itamar Syn-Hershko<itamar@code972.com>
>> =A0wrote:
>>>
>>> Thanks for your detailed answer. We'll have to tackle this and see what=
s
>>> more important to us then. I'd definitely love to hear Zoie has overcam=
e
>>> all
>>> that...
>>>
>>>
>>> Any pointers to Michael Busch's approach? I take this has something to =
do
>>> with the core itself or index format, probably using the Flex version?
>>>
>>>
>>> Itamar.
>>>
>>>
>>> On 12/06/2011 23:12, Michael McCandless wrote:
>>>
>>>>> =A0From what I understand of Zoie (and it's been some time since I la=
st
>>>>
>>>> looked... so this could be wrong now), the biggest difference vs NRT
>>>> is that Zoie aims for "immediate consistency", ie index changes are
>>>> always made visible to the very next query, vs NRT which is
>>>> "controlled consistency", a blend between immediate and eventual
>>>> consistency where your app decides when the changes must become
>>>> visible.
>>>>
>>>> But in exchange for that, Zoie pays a price: each search has a higher
>>>> cost per collected hit, since it must post-filter for deleted docs.
>>>> And since Zoie necessarily adds complexity, there's more risk; eg
>>>> there were some nasty Zoie bugs that took quite some time to track
>>>> down (under https://issues.apache.org/jira/browse/LUCENE-2729).
>>>>
>>>> Anyway, I don't think that's a good tradeoff, in general, for our
>>>> users, because very few apps truly require immediate consistency from
>>>> Lucene (can anyone give an example where their app depends on
>>>> immediate consistency...?). =A0I think it's better to spend time durin=
g
>>>> reopen so that searches aren't slower.
>>>>
>>>> That said, Lucene has already incorporated one big part of Zoie
>>>> (caching small segments in RAM) via the new NRTCachingDirectory (in
>>>> contrib/misc). =A0Also, the upcoming NRTManager
>>>> (https://issues.apache.org/jira/browse/LUCENE-2955) adds control over
>>>> visibility of specific indexing changes to queries that need to see
>>>> the changes.
>>>>
>>>> Finally, even better would be to not have to make any tradeoff
>>>> whatsoever ;) =A0Twitter's approach (created by Michael Busch) seems t=
o
>>>> bring immediate consistency with no search performance hit, so if we
>>>> do anything here likely it'll be similar to what Michael has done
>>>> (though, those changes are not simple either!).
>>>>
>>>> Mike McCandless
>>>>
>>>> http://blog.mikemccandless.com
>>>>
>>>> On Sun, Jun 12, 2011 at 2:25 PM, Itamar Syn-Hershko<itamar@code972.com=
>
>>>> =A0wrote:
>>>>>
>>>>> Mike,
>>>>>
>>>>>
>>>>> Speaking of NRT, and completely off-topic, I know: Lucene's NRT
>>>>> apparently
>>>>> isn't fast enough if Zoie was needed, and now that Zoie is around are
>>>>> there
>>>>> any plans to make it Lucene's default? or: why would one still use NR=
T
>>>>> when
>>>>> Zoie seem to work much better?
>>>>>
>>>>>
>>>>> Itamar.
>>>>>
>>>>>
>>>>> On 12/06/2011 13:16, Michael McCandless wrote:
>>>>>
>>>>>> Remember that memory-mapping is not a panacea: at the end of the day=
,
>>>>>> if there just isn't enough RAM on the machine to keep your full
>>>>>> "working set" hot, then the OS will have to hit the disk, regardless
>>>>>> of whether the access is through MMap or a "traditional" IO request.
>>>>>>
>>>>>> That said, on Fedora Linux anyway, I generally see better performanc=
e
>>>>>> from MMap than from NIOFSDir; eg see the 2nd chart here:
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> http://blog.mikemccandless.com/2011/06/lucenes-near-real-time-search=
-is-fast.html
>>>>>>
>>>>>> Mike McCandless
>>>>>>
>>>>>> http://blog.mikemccandless.com
>>>>>>
>>>>>> On Sun, Jun 12, 2011 at 4:10 AM, Itamar
>>>>>> Syn-Hershko<itamar@code972.com>
>>>>>> =A0wrote:
>>>>>>>
>>>>>>> Thanks.
>>>>>>>
>>>>>>>
>>>>>>> The whole point of my question was to find out if and how to make
>>>>>>> balancing
>>>>>>> on the SAME machine. Apparently thats not going to help and at a
>>>>>>> certain
>>>>>>> point we will just have to prompt the user to buy more hardware...
>>>>>>>
>>>>>>>
>>>>>>> Out of curiosity, isn't there anything that we can do to avoid that=
?
>>>>>>> for
>>>>>>> instance using memory-mapped files for the indexes? anything that
>>>>>>> would
>>>>>>> help
>>>>>>> us overcome OS limitations of that sort...
>>>>>>>
>>>>>>>
>>>>>>> Also, you mention a scheduled job to check for performance
>>>>>>> degradation;
>>>>>>> any
>>>>>>> idea how serious such a drop should be for sharding to be really
>>>>>>> beneficial?
>>>>>>> or is it application specific too?
>>>>>>>
>>>>>>>
>>>>>>> Itamar.
>>>>>>>
>>>>>>>
>>>>>>> On 12/06/2011 06:43, Shai Erera wrote:
>>>>>>>
>>>>>>>> I agree w/ Erick, there is no cutoff point (index size for that
>>>>>>>> matter)
>>>>>>>> above which you start sharding.
>>>>>>>>
>>>>>>>> What you can do is create a scheduled job in your system that runs=
 a
>>>>>>>> select
>>>>>>>> list of queries and monitors their performance. Once it degrades, =
it
>>>>>>>> shards
>>>>>>>> the index by either splitting it (you can use IndexSplitter under
>>>>>>>> contrib)
>>>>>>>> or create a new shard, and direct new documents to it.
>>>>>>>>
>>>>>>>> I think I read somewhere, not sure if it was in Solr or
>>>>>>>> ElasticSearch
>>>>>>>> documentation, about a Balancer object, which moves shards around =
in
>>>>>>>> order
>>>>>>>> to balance the load on the cluster. You can implement something
>>>>>>>> similar
>>>>>>>> which tries to balance the index sizes, creates new shards
>>>>>>>> on-the-fly,
>>>>>>>> even
>>>>>>>> merge shards if suddenly a whole source is being removed from the
>>>>>>>> system
>>>>>>>> etc.
>>>>>>>>
>>>>>>>> Also, note that the 'largest index size' threshold is really a
>>>>>>>> machine
>>>>>>>> constraint and not Lucene's. So if you decide that 10 GB is your
>>>>>>>> cutoff,
>>>>>>>> it
>>>>>>>> is pointless to create 10x10GB shards on the same machine --
>>>>>>>> searching
>>>>>>>> them
>>>>>>>> is just like searching a 100GB index w/ 10x10GB segments. Perhaps
>>>>>>>> it's
>>>>>>>> even
>>>>>>>> worse because you consume more RAM when the indexes are split (e.g=
.,
>>>>>>>> terms
>>>>>>>> index, field infos etc.).
>>>>>>>>
>>>>>>>> Shai
>>>>>>>>
>>>>>>>> On Sun, Jun 12, 2011 at 3:10 AM, Erick
>>>>>>>> Erickson<erickerickson@gmail.com>wrote:
>>>>>>>>
>>>>>>>>> <<<We can't assume anything about the machine running it,
>>>>>>>>> so testing won't really tell us much>>>
>>>>>>>>>
>>>>>>>>> Hmmm, then it's pretty hopeless I think. Problem is that
>>>>>>>>> anything you say about running on a machine with
>>>>>>>>> 2G available memory on a single processor is completely
>>>>>>>>> incomparable to running on a machine with 64G of
>>>>>>>>> memory available for Lucene and 16 processors.
>>>>>>>>>
>>>>>>>>> There's really no such thing as an "optimum" Lucene index
>>>>>>>>> size, it always relates to the characteristics of the
>>>>>>>>> underlying hardware.
>>>>>>>>>
>>>>>>>>> I think the best you can do is actually test on various
>>>>>>>>> configurations, then at least you can say "on configuration
>>>>>>>>> X this is the tipping point".
>>>>>>>>>
>>>>>>>>> Sorry there isn't a better answer that I know of, but...
>>>>>>>>>
>>>>>>>>> Best
>>>>>>>>> Erick
>>>>>>>>>
>>>>>>>>> On Sat, Jun 11, 2011 at 3:37 PM, Itamar
>>>>>>>>> Syn-Hershko<itamar@code972.com>
>>>>>>>>> wrote:
>>>>>>>>>>
>>>>>>>>>> Hi all,
>>>>>>>>>>
>>>>>>>>>> I know Lucene indexes to be at their optimum up to a certain siz=
e
>>>>>>>>>> -
>>>>>>>>>> said
>>>>>>>>>
>>>>>>>>> to
>>>>>>>>>>
>>>>>>>>>> be around several GBs. I haven't found a good discussion over
>>>>>>>>>> this,
>>>>>>>>>> but
>>>>>>>>>
>>>>>>>>> its
>>>>>>>>>>
>>>>>>>>>> my understanding that at some point its better to split an index
>>>>>>>>>> into
>>>>>>>>>
>>>>>>>>> parts
>>>>>>>>>>
>>>>>>>>>> (a la sharding) than to continue searching on a huge-size index.=
 I
>>>>>>>>>> assume
>>>>>>>>>> this has to do with OS and IO configurations. Can anyone point m=
e
>>>>>>>>>> to
>>>>>>>>>> more
>>>>>>>>>> info on this?
>>>>>>>>>>
>>>>>>>>>> We have a product that is using Lucene for various searches, and
>>>>>>>>>> at
>>>>>>>>>> the
>>>>>>>>>> moment each type of search is using its own Lucene index. We pla=
n
>>>>>>>>>> on
>>>>>>>>>> refactoring the way it works and to combine all indexes into one=
 -
>>>>>>>>>> making
>>>>>>>>>> the whole system more robust and with a smaller memory footprint=
,
>>>>>>>>>> among
>>>>>>>>>> other things.
>>>>>>>>>>
>>>>>>>>>> Assuming the above is true, we are interested in knowing how to =
do
>>>>>>>>>> this
>>>>>>>>>> correctly. Initially all our indexes will be run in one big inde=
x,
>>>>>>>>>> but
>>>>>>>>>> if
>>>>>>>>>
>>>>>>>>> at
>>>>>>>>>>
>>>>>>>>>> some index size there is a severe performance degradation we wou=
ld
>>>>>>>>>> like
>>>>>>>>>
>>>>>>>>> to
>>>>>>>>>>
>>>>>>>>>> handle that correctly by starting a new FSDirectory index to flu=
sh
>>>>>>>>>> into,
>>>>>>>>>
>>>>>>>>> or
>>>>>>>>>>
>>>>>>>>>> by re-indexing and moving large indexes into their own Lucene
>>>>>>>>>> index.
>>>>>>>>>>
>>>>>>>>>> Are there are any guidelines for measuring or estimating this
>>>>>>>>>> correctly?
>>>>>>>>>> what we should be aware of while considering all that? We can't
>>>>>>>>>> assume
>>>>>>>>>> anything about the machine running it, so testing won't really
>>>>>>>>>> tell
>>>>>>>>>> us
>>>>>>>>>> much...
>>>>>>>>>>
>>>>>>>>>> Thanks in advance for any input on this,
>>>>>>>>>>
>>>>>>>>>> Itamar.
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> ----------------------------------------------------------------=
-----
>>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.or=
g
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>
>>>>>>>>> -----------------------------------------------------------------=
----
>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>>
>>>>>>>>>
>>>>>>> -------------------------------------------------------------------=
--
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>
>>>>>>>
>>>>>> --------------------------------------------------------------------=
-
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50008-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun 13 22:18:27 2011
Return-Path: <java-user-return-50008-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C18B46EDE
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 13 Jun 2011 22:18:27 +0000 (UTC)
Received: (qmail 1565 invoked by uid 500); 13 Jun 2011 22:18:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1527 invoked by uid 500); 13 Jun 2011 22:18:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1518 invoked by uid 99); 13 Jun 2011 22:18:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jun 2011 22:18:25 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jason.rutherglen@gmail.com designates 209.85.220.176 as permitted sender)
Received: from [209.85.220.176] (HELO mail-vx0-f176.google.com) (209.85.220.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jun 2011 22:18:18 +0000
Received: by vxa37 with SMTP id 37so6561014vxa.35
        for <java-user@lucene.apache.org>; Mon, 13 Jun 2011 15:17:57 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type:content-transfer-encoding;
        bh=/1k7MyStC+Y5YMWajzhJncCI/VeTz0idrof8qeVkmmA=;
        b=tUP2xGuzNv4eIuoY+5Upb9Gn3lo0wWaKhlNnxVXpDgb6BTQCaZLas8+c2rKgA+Clis
         gR5ZIcrQhjOWWHs96sxF+TL3U7CQxyKA2smd50Ara4h7+ueIbQU8gzH69lGYG5ZIxmkp
         L1O5QufDh8gd6Bz5J0UXAw93Dq/FG54H+bKNY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=kEyTH8V0IFLZw+fygWkIAWrFCsYJjEffyuLUK0Iyx3XlDhwiqx8MEVC3IG4TgblXHY
         JxQm5+wPJHR8VObS1y4L5fdGcRkRVG9l6cPqtcQBhc3mHYu969hDKnf5dH7bS72crIpZ
         gKi0DmhwUNsaFMm7atMyeMQCYgfuGMSMS0VhM=
MIME-Version: 1.0
Received: by 10.52.112.194 with SMTP id is2mr250801vdb.292.1308002995014; Mon,
 13 Jun 2011 15:09:55 -0700 (PDT)
Received: by 10.52.182.193 with HTTP; Mon, 13 Jun 2011 15:09:54 -0700 (PDT)
In-Reply-To: <BANLkTi=c-oy5EEavyDuLs_Ky=MbaYQG-sQ@mail.gmail.com>
References: <4DF3C40F.9090703@code972.com>
	<BANLkTi=2U3RTtOq_1oiA_FGBwpiPcVVMyg@mail.gmail.com>
	<BANLkTinHragJQUTX3j+mcdW0K0B73A0T=A@mail.gmail.com>
	<4DF47461.1050004@code972.com>
	<BANLkTim_RCpPNkb2WyGwCJ3a0eDyiOBGjA@mail.gmail.com>
	<4DF504B2.4000105@code972.com>
	<BANLkTim_sX8CQMknZJwWX4q6pt6Jx5wrWQ@mail.gmail.com>
	<4DF525B6.2000902@code972.com>
	<BANLkTimUR3ax=odY8Ln9da6f_m_oGYvpMA@mail.gmail.com>
	<4DF67BF3.1030801@code972.com>
	<BANLkTi=c-oy5EEavyDuLs_Ky=MbaYQG-sQ@mail.gmail.com>
Date: Mon, 13 Jun 2011 15:09:54 -0700
Message-ID: <BANLkTik1NaAOwToVddAhKSU3zyVGCzETLg@mail.gmail.com>
Subject: Re: Index size and performance degradation
From: Jason Rutherglen <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

> I don't think we'd do the post-filtering solution, but instead maybe
> resolve the deletes "live" and store them in a transactional data

I think Michael B. aptly described the sequence ID approach for 'live' dele=
tes?

On Mon, Jun 13, 2011 at 3:00 PM, Michael McCandless
<lucene@mikemccandless.com> wrote:
> Yes, adding deletes to Twitter's approach will be a challenge!
>
> I don't think we'd do the post-filtering solution, but instead maybe
> resolve the deletes "live" and store them in a transactional data
> structure of some kind... but even then we will pay a perf hit to
> lookup del docs against it.
>
> So, yeah, there will presumably be a tradeoff with this approach too.
> However, turning around changes from the adds should be faster (no
> segment gets flushed).
>
> Mike McCandless
>
> http://blog.mikemccandless.com
>
> On Mon, Jun 13, 2011 at 5:06 PM, Itamar Syn-Hershko <itamar@code972.com> =
wrote:
>> Thanks Mike, much appreciated.
>>
>>
>> Wouldn't Twitter's approach fall for the exact same pit-hole you describ=
ed
>> Zoie does (or did) when it'll handle deletes too? I don't thing there is=
 any
>> other way of handling deletes other than post-filtering results. But per=
haps
>> the IW cache would be smaller than Zoie's RAMDirectory(ies)?
>>
>>
>> I'll give all that a serious dive and report back with results or if mor=
e
>> input will be required...
>>
>>
>> Itamar.
>>
>>
>> On 13/06/2011 19:01, Michael McCandless wrote:
>>
>>> Here's a blog post describing some details of Twitter's approach:
>>>
>>>
>>> http://engineering.twitter.com/2010/10/twitters-new-search-architecture=
.html
>>>
>>> And here's a talk Michael did last October (Lucene Revolutions):
>>>
>>>
>>> http://www.lucidimagination.com/events/revolution2010/video-Realtime-Se=
arch-With-Lucene-presented-by-Michael-Busch-of-Twitter
>>>
>>> Twitter's case is simpler since they never delete ;) =A0So we have to
>>> fix that to do it in Lucene... there are also various open issues that
>>> begin to explore some of the ideas here.
>>>
>>> But this ("immediate consistency") would be a deep and complex change,
>>> and I don't see many apps that actually require it.
>>>
>>> Mike McCandless
>>>
>>> http://blog.mikemccandless.com
>>>
>>> On Sun, Jun 12, 2011 at 4:46 PM, Itamar Syn-Hershko<itamar@code972.com>
>>> =A0wrote:
>>>>
>>>> Thanks for your detailed answer. We'll have to tackle this and see wha=
ts
>>>> more important to us then. I'd definitely love to hear Zoie has overca=
me
>>>> all
>>>> that...
>>>>
>>>>
>>>> Any pointers to Michael Busch's approach? I take this has something to=
 do
>>>> with the core itself or index format, probably using the Flex version?
>>>>
>>>>
>>>> Itamar.
>>>>
>>>>
>>>> On 12/06/2011 23:12, Michael McCandless wrote:
>>>>
>>>>>> =A0From what I understand of Zoie (and it's been some time since I l=
ast
>>>>>
>>>>> looked... so this could be wrong now), the biggest difference vs NRT
>>>>> is that Zoie aims for "immediate consistency", ie index changes are
>>>>> always made visible to the very next query, vs NRT which is
>>>>> "controlled consistency", a blend between immediate and eventual
>>>>> consistency where your app decides when the changes must become
>>>>> visible.
>>>>>
>>>>> But in exchange for that, Zoie pays a price: each search has a higher
>>>>> cost per collected hit, since it must post-filter for deleted docs.
>>>>> And since Zoie necessarily adds complexity, there's more risk; eg
>>>>> there were some nasty Zoie bugs that took quite some time to track
>>>>> down (under https://issues.apache.org/jira/browse/LUCENE-2729).
>>>>>
>>>>> Anyway, I don't think that's a good tradeoff, in general, for our
>>>>> users, because very few apps truly require immediate consistency from
>>>>> Lucene (can anyone give an example where their app depends on
>>>>> immediate consistency...?). =A0I think it's better to spend time duri=
ng
>>>>> reopen so that searches aren't slower.
>>>>>
>>>>> That said, Lucene has already incorporated one big part of Zoie
>>>>> (caching small segments in RAM) via the new NRTCachingDirectory (in
>>>>> contrib/misc). =A0Also, the upcoming NRTManager
>>>>> (https://issues.apache.org/jira/browse/LUCENE-2955) adds control over
>>>>> visibility of specific indexing changes to queries that need to see
>>>>> the changes.
>>>>>
>>>>> Finally, even better would be to not have to make any tradeoff
>>>>> whatsoever ;) =A0Twitter's approach (created by Michael Busch) seems =
to
>>>>> bring immediate consistency with no search performance hit, so if we
>>>>> do anything here likely it'll be similar to what Michael has done
>>>>> (though, those changes are not simple either!).
>>>>>
>>>>> Mike McCandless
>>>>>
>>>>> http://blog.mikemccandless.com
>>>>>
>>>>> On Sun, Jun 12, 2011 at 2:25 PM, Itamar Syn-Hershko<itamar@code972.co=
m>
>>>>> =A0wrote:
>>>>>>
>>>>>> Mike,
>>>>>>
>>>>>>
>>>>>> Speaking of NRT, and completely off-topic, I know: Lucene's NRT
>>>>>> apparently
>>>>>> isn't fast enough if Zoie was needed, and now that Zoie is around ar=
e
>>>>>> there
>>>>>> any plans to make it Lucene's default? or: why would one still use N=
RT
>>>>>> when
>>>>>> Zoie seem to work much better?
>>>>>>
>>>>>>
>>>>>> Itamar.
>>>>>>
>>>>>>
>>>>>> On 12/06/2011 13:16, Michael McCandless wrote:
>>>>>>
>>>>>>> Remember that memory-mapping is not a panacea: at the end of the da=
y,
>>>>>>> if there just isn't enough RAM on the machine to keep your full
>>>>>>> "working set" hot, then the OS will have to hit the disk, regardles=
s
>>>>>>> of whether the access is through MMap or a "traditional" IO request=
.
>>>>>>>
>>>>>>> That said, on Fedora Linux anyway, I generally see better performan=
ce
>>>>>>> from MMap than from NIOFSDir; eg see the 2nd chart here:
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> http://blog.mikemccandless.com/2011/06/lucenes-near-real-time-searc=
h-is-fast.html
>>>>>>>
>>>>>>> Mike McCandless
>>>>>>>
>>>>>>> http://blog.mikemccandless.com
>>>>>>>
>>>>>>> On Sun, Jun 12, 2011 at 4:10 AM, Itamar
>>>>>>> Syn-Hershko<itamar@code972.com>
>>>>>>> =A0wrote:
>>>>>>>>
>>>>>>>> Thanks.
>>>>>>>>
>>>>>>>>
>>>>>>>> The whole point of my question was to find out if and how to make
>>>>>>>> balancing
>>>>>>>> on the SAME machine. Apparently thats not going to help and at a
>>>>>>>> certain
>>>>>>>> point we will just have to prompt the user to buy more hardware...
>>>>>>>>
>>>>>>>>
>>>>>>>> Out of curiosity, isn't there anything that we can do to avoid tha=
t?
>>>>>>>> for
>>>>>>>> instance using memory-mapped files for the indexes? anything that
>>>>>>>> would
>>>>>>>> help
>>>>>>>> us overcome OS limitations of that sort...
>>>>>>>>
>>>>>>>>
>>>>>>>> Also, you mention a scheduled job to check for performance
>>>>>>>> degradation;
>>>>>>>> any
>>>>>>>> idea how serious such a drop should be for sharding to be really
>>>>>>>> beneficial?
>>>>>>>> or is it application specific too?
>>>>>>>>
>>>>>>>>
>>>>>>>> Itamar.
>>>>>>>>
>>>>>>>>
>>>>>>>> On 12/06/2011 06:43, Shai Erera wrote:
>>>>>>>>
>>>>>>>>> I agree w/ Erick, there is no cutoff point (index size for that
>>>>>>>>> matter)
>>>>>>>>> above which you start sharding.
>>>>>>>>>
>>>>>>>>> What you can do is create a scheduled job in your system that run=
s a
>>>>>>>>> select
>>>>>>>>> list of queries and monitors their performance. Once it degrades,=
 it
>>>>>>>>> shards
>>>>>>>>> the index by either splitting it (you can use IndexSplitter under
>>>>>>>>> contrib)
>>>>>>>>> or create a new shard, and direct new documents to it.
>>>>>>>>>
>>>>>>>>> I think I read somewhere, not sure if it was in Solr or
>>>>>>>>> ElasticSearch
>>>>>>>>> documentation, about a Balancer object, which moves shards around=
 in
>>>>>>>>> order
>>>>>>>>> to balance the load on the cluster. You can implement something
>>>>>>>>> similar
>>>>>>>>> which tries to balance the index sizes, creates new shards
>>>>>>>>> on-the-fly,
>>>>>>>>> even
>>>>>>>>> merge shards if suddenly a whole source is being removed from the
>>>>>>>>> system
>>>>>>>>> etc.
>>>>>>>>>
>>>>>>>>> Also, note that the 'largest index size' threshold is really a
>>>>>>>>> machine
>>>>>>>>> constraint and not Lucene's. So if you decide that 10 GB is your
>>>>>>>>> cutoff,
>>>>>>>>> it
>>>>>>>>> is pointless to create 10x10GB shards on the same machine --
>>>>>>>>> searching
>>>>>>>>> them
>>>>>>>>> is just like searching a 100GB index w/ 10x10GB segments. Perhaps
>>>>>>>>> it's
>>>>>>>>> even
>>>>>>>>> worse because you consume more RAM when the indexes are split (e.=
g.,
>>>>>>>>> terms
>>>>>>>>> index, field infos etc.).
>>>>>>>>>
>>>>>>>>> Shai
>>>>>>>>>
>>>>>>>>> On Sun, Jun 12, 2011 at 3:10 AM, Erick
>>>>>>>>> Erickson<erickerickson@gmail.com>wrote:
>>>>>>>>>
>>>>>>>>>> <<<We can't assume anything about the machine running it,
>>>>>>>>>> so testing won't really tell us much>>>
>>>>>>>>>>
>>>>>>>>>> Hmmm, then it's pretty hopeless I think. Problem is that
>>>>>>>>>> anything you say about running on a machine with
>>>>>>>>>> 2G available memory on a single processor is completely
>>>>>>>>>> incomparable to running on a machine with 64G of
>>>>>>>>>> memory available for Lucene and 16 processors.
>>>>>>>>>>
>>>>>>>>>> There's really no such thing as an "optimum" Lucene index
>>>>>>>>>> size, it always relates to the characteristics of the
>>>>>>>>>> underlying hardware.
>>>>>>>>>>
>>>>>>>>>> I think the best you can do is actually test on various
>>>>>>>>>> configurations, then at least you can say "on configuration
>>>>>>>>>> X this is the tipping point".
>>>>>>>>>>
>>>>>>>>>> Sorry there isn't a better answer that I know of, but...
>>>>>>>>>>
>>>>>>>>>> Best
>>>>>>>>>> Erick
>>>>>>>>>>
>>>>>>>>>> On Sat, Jun 11, 2011 at 3:37 PM, Itamar
>>>>>>>>>> Syn-Hershko<itamar@code972.com>
>>>>>>>>>> wrote:
>>>>>>>>>>>
>>>>>>>>>>> Hi all,
>>>>>>>>>>>
>>>>>>>>>>> I know Lucene indexes to be at their optimum up to a certain si=
ze
>>>>>>>>>>> -
>>>>>>>>>>> said
>>>>>>>>>>
>>>>>>>>>> to
>>>>>>>>>>>
>>>>>>>>>>> be around several GBs. I haven't found a good discussion over
>>>>>>>>>>> this,
>>>>>>>>>>> but
>>>>>>>>>>
>>>>>>>>>> its
>>>>>>>>>>>
>>>>>>>>>>> my understanding that at some point its better to split an inde=
x
>>>>>>>>>>> into
>>>>>>>>>>
>>>>>>>>>> parts
>>>>>>>>>>>
>>>>>>>>>>> (a la sharding) than to continue searching on a huge-size index=
. I
>>>>>>>>>>> assume
>>>>>>>>>>> this has to do with OS and IO configurations. Can anyone point =
me
>>>>>>>>>>> to
>>>>>>>>>>> more
>>>>>>>>>>> info on this?
>>>>>>>>>>>
>>>>>>>>>>> We have a product that is using Lucene for various searches, an=
d
>>>>>>>>>>> at
>>>>>>>>>>> the
>>>>>>>>>>> moment each type of search is using its own Lucene index. We pl=
an
>>>>>>>>>>> on
>>>>>>>>>>> refactoring the way it works and to combine all indexes into on=
e -
>>>>>>>>>>> making
>>>>>>>>>>> the whole system more robust and with a smaller memory footprin=
t,
>>>>>>>>>>> among
>>>>>>>>>>> other things.
>>>>>>>>>>>
>>>>>>>>>>> Assuming the above is true, we are interested in knowing how to=
 do
>>>>>>>>>>> this
>>>>>>>>>>> correctly. Initially all our indexes will be run in one big ind=
ex,
>>>>>>>>>>> but
>>>>>>>>>>> if
>>>>>>>>>>
>>>>>>>>>> at
>>>>>>>>>>>
>>>>>>>>>>> some index size there is a severe performance degradation we wo=
uld
>>>>>>>>>>> like
>>>>>>>>>>
>>>>>>>>>> to
>>>>>>>>>>>
>>>>>>>>>>> handle that correctly by starting a new FSDirectory index to fl=
ush
>>>>>>>>>>> into,
>>>>>>>>>>
>>>>>>>>>> or
>>>>>>>>>>>
>>>>>>>>>>> by re-indexing and moving large indexes into their own Lucene
>>>>>>>>>>> index.
>>>>>>>>>>>
>>>>>>>>>>> Are there are any guidelines for measuring or estimating this
>>>>>>>>>>> correctly?
>>>>>>>>>>> what we should be aware of while considering all that? We can't
>>>>>>>>>>> assume
>>>>>>>>>>> anything about the machine running it, so testing won't really
>>>>>>>>>>> tell
>>>>>>>>>>> us
>>>>>>>>>>> much...
>>>>>>>>>>>
>>>>>>>>>>> Thanks in advance for any input on this,
>>>>>>>>>>>
>>>>>>>>>>> Itamar.
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>> ---------------------------------------------------------------=
------
>>>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.o=
rg
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> ----------------------------------------------------------------=
-----
>>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.or=
g
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>> ------------------------------------------------------------------=
---
>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>
>>>>>>>>
>>>>>>> -------------------------------------------------------------------=
--
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>> --------------------------------------------------------------------=
-
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50009-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun 13 22:20:58 2011
Return-Path: <java-user-return-50009-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0B7946938
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 13 Jun 2011 22:20:58 +0000 (UTC)
Received: (qmail 9575 invoked by uid 500); 13 Jun 2011 22:20:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9531 invoked by uid 500); 13 Jun 2011 22:20:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9523 invoked by uid 99); 13 Jun 2011 22:20:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jun 2011 22:20:55 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [188.121.53.2] (HELO n1plout04-02.prod.ams1.secureserver.net) (188.121.53.2)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 13 Jun 2011 22:20:48 +0000
Received: (qmail 20123 invoked from network); 13 Jun 2011 22:20:25 -0000
Received: from unknown (79.179.3.190)
  by n1plout04-02.prod.ams1.secureserver.net (188.121.53.2) with ESMTP; 13 Jun 2011 22:19:15 -0000
Message-ID: <4DF68CE1.3050306@code972.com>
Date: Tue, 14 Jun 2011 01:19:13 +0300
From: Itamar Syn-Hershko <itamar@code972.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.17) Gecko/20110414 Lightning/1.0b2 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Index size and performance degradation
References: <4DF3C40F.9090703@code972.com>	<BANLkTi=2U3RTtOq_1oiA_FGBwpiPcVVMyg@mail.gmail.com>	<BANLkTinHragJQUTX3j+mcdW0K0B73A0T=A@mail.gmail.com>	<4DF47461.1050004@code972.com>	<BANLkTim_RCpPNkb2WyGwCJ3a0eDyiOBGjA@mail.gmail.com>	<4DF504B2.4000105@code972.com>	<BANLkTim_sX8CQMknZJwWX4q6pt6Jx5wrWQ@mail.gmail.com>	<4DF525B6.2000902@code972.com>	<BANLkTimUR3ax=odY8Ln9da6f_m_oGYvpMA@mail.gmail.com>	<4DF67BF3.1030801@code972.com> <BANLkTi=c-oy5EEavyDuLs_Ky=MbaYQG-sQ@mail.gmail.com>
In-Reply-To: <BANLkTi=c-oy5EEavyDuLs_Ky=MbaYQG-sQ@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Since there should only be one writer, I'm not sure why you'd need 
transactional storage for that? deletions made by readers merely mark it 
for deletion, and once a doc has been marked for deletions it is deleted 
for all intents and purposes, right? But perhaps I need to refresh my 
memory on the internals, it has been a while.

Does the N in NRT represent only the cost of reopening a searcher? 
meaning, if I could ensure reopening always happens fast and returns a 
searcher for the correct index revision, would it guarantee a real 
real-time search? or is there anything else standing in between? the 
only thing that comes to mind is the IW unflushed buffer - which only 
Twitter's approach seem to handle (not even Zoie).

Itamar.

On 14/06/2011 01:00, Michael McCandless wrote:
> Yes, adding deletes to Twitter's approach will be a challenge!
>
> I don't think we'd do the post-filtering solution, but instead maybe
> resolve the deletes "live" and store them in a transactional data
> structure of some kind... but even then we will pay a perf hit to
> lookup del docs against it.
>
> So, yeah, there will presumably be a tradeoff with this approach too.
> However, turning around changes from the adds should be faster (no
> segment gets flushed).
>
> Mike McCandless
>
> http://blog.mikemccandless.com
>
> On Mon, Jun 13, 2011 at 5:06 PM, Itamar Syn-Hershko<itamar@code972.com>  wrote:
>> Thanks Mike, much appreciated.
>>
>>
>> Wouldn't Twitter's approach fall for the exact same pit-hole you described
>> Zoie does (or did) when it'll handle deletes too? I don't thing there is any
>> other way of handling deletes other than post-filtering results. But perhaps
>> the IW cache would be smaller than Zoie's RAMDirectory(ies)?
>>
>>
>> I'll give all that a serious dive and report back with results or if more
>> input will be required...
>>
>>
>> Itamar.
>>
>>
>> On 13/06/2011 19:01, Michael McCandless wrote:
>>
>>> Here's a blog post describing some details of Twitter's approach:
>>>
>>>
>>> http://engineering.twitter.com/2010/10/twitters-new-search-architecture.html
>>>
>>> And here's a talk Michael did last October (Lucene Revolutions):
>>>
>>>
>>> http://www.lucidimagination.com/events/revolution2010/video-Realtime-Search-With-Lucene-presented-by-Michael-Busch-of-Twitter
>>>
>>> Twitter's case is simpler since they never delete ;)  So we have to
>>> fix that to do it in Lucene... there are also various open issues that
>>> begin to explore some of the ideas here.
>>>
>>> But this ("immediate consistency") would be a deep and complex change,
>>> and I don't see many apps that actually require it.
>>>
>>> Mike McCandless
>>>
>>> http://blog.mikemccandless.com
>>>
>>> On Sun, Jun 12, 2011 at 4:46 PM, Itamar Syn-Hershko<itamar@code972.com>
>>>   wrote:
>>>> Thanks for your detailed answer. We'll have to tackle this and see whats
>>>> more important to us then. I'd definitely love to hear Zoie has overcame
>>>> all
>>>> that...
>>>>
>>>>
>>>> Any pointers to Michael Busch's approach? I take this has something to do
>>>> with the core itself or index format, probably using the Flex version?
>>>>
>>>>
>>>> Itamar.
>>>>
>>>>
>>>> On 12/06/2011 23:12, Michael McCandless wrote:
>>>>
>>>>>>   From what I understand of Zoie (and it's been some time since I last
>>>>> looked... so this could be wrong now), the biggest difference vs NRT
>>>>> is that Zoie aims for "immediate consistency", ie index changes are
>>>>> always made visible to the very next query, vs NRT which is
>>>>> "controlled consistency", a blend between immediate and eventual
>>>>> consistency where your app decides when the changes must become
>>>>> visible.
>>>>>
>>>>> But in exchange for that, Zoie pays a price: each search has a higher
>>>>> cost per collected hit, since it must post-filter for deleted docs.
>>>>> And since Zoie necessarily adds complexity, there's more risk; eg
>>>>> there were some nasty Zoie bugs that took quite some time to track
>>>>> down (under https://issues.apache.org/jira/browse/LUCENE-2729).
>>>>>
>>>>> Anyway, I don't think that's a good tradeoff, in general, for our
>>>>> users, because very few apps truly require immediate consistency from
>>>>> Lucene (can anyone give an example where their app depends on
>>>>> immediate consistency...?).  I think it's better to spend time during
>>>>> reopen so that searches aren't slower.
>>>>>
>>>>> That said, Lucene has already incorporated one big part of Zoie
>>>>> (caching small segments in RAM) via the new NRTCachingDirectory (in
>>>>> contrib/misc).  Also, the upcoming NRTManager
>>>>> (https://issues.apache.org/jira/browse/LUCENE-2955) adds control over
>>>>> visibility of specific indexing changes to queries that need to see
>>>>> the changes.
>>>>>
>>>>> Finally, even better would be to not have to make any tradeoff
>>>>> whatsoever ;)  Twitter's approach (created by Michael Busch) seems to
>>>>> bring immediate consistency with no search performance hit, so if we
>>>>> do anything here likely it'll be similar to what Michael has done
>>>>> (though, those changes are not simple either!).
>>>>>
>>>>> Mike McCandless
>>>>>
>>>>> http://blog.mikemccandless.com
>>>>>
>>>>> On Sun, Jun 12, 2011 at 2:25 PM, Itamar Syn-Hershko<itamar@code972.com>
>>>>>   wrote:
>>>>>> Mike,
>>>>>>
>>>>>>
>>>>>> Speaking of NRT, and completely off-topic, I know: Lucene's NRT
>>>>>> apparently
>>>>>> isn't fast enough if Zoie was needed, and now that Zoie is around are
>>>>>> there
>>>>>> any plans to make it Lucene's default? or: why would one still use NRT
>>>>>> when
>>>>>> Zoie seem to work much better?
>>>>>>
>>>>>>
>>>>>> Itamar.
>>>>>>
>>>>>>
>>>>>> On 12/06/2011 13:16, Michael McCandless wrote:
>>>>>>
>>>>>>> Remember that memory-mapping is not a panacea: at the end of the day,
>>>>>>> if there just isn't enough RAM on the machine to keep your full
>>>>>>> "working set" hot, then the OS will have to hit the disk, regardless
>>>>>>> of whether the access is through MMap or a "traditional" IO request.
>>>>>>>
>>>>>>> That said, on Fedora Linux anyway, I generally see better performance
>>>>>>> from MMap than from NIOFSDir; eg see the 2nd chart here:
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> http://blog.mikemccandless.com/2011/06/lucenes-near-real-time-search-is-fast.html
>>>>>>>
>>>>>>> Mike McCandless
>>>>>>>
>>>>>>> http://blog.mikemccandless.com
>>>>>>>
>>>>>>> On Sun, Jun 12, 2011 at 4:10 AM, Itamar
>>>>>>> Syn-Hershko<itamar@code972.com>
>>>>>>>   wrote:
>>>>>>>> Thanks.
>>>>>>>>
>>>>>>>>
>>>>>>>> The whole point of my question was to find out if and how to make
>>>>>>>> balancing
>>>>>>>> on the SAME machine. Apparently thats not going to help and at a
>>>>>>>> certain
>>>>>>>> point we will just have to prompt the user to buy more hardware...
>>>>>>>>
>>>>>>>>
>>>>>>>> Out of curiosity, isn't there anything that we can do to avoid that?
>>>>>>>> for
>>>>>>>> instance using memory-mapped files for the indexes? anything that
>>>>>>>> would
>>>>>>>> help
>>>>>>>> us overcome OS limitations of that sort...
>>>>>>>>
>>>>>>>>
>>>>>>>> Also, you mention a scheduled job to check for performance
>>>>>>>> degradation;
>>>>>>>> any
>>>>>>>> idea how serious such a drop should be for sharding to be really
>>>>>>>> beneficial?
>>>>>>>> or is it application specific too?
>>>>>>>>
>>>>>>>>
>>>>>>>> Itamar.
>>>>>>>>
>>>>>>>>
>>>>>>>> On 12/06/2011 06:43, Shai Erera wrote:
>>>>>>>>
>>>>>>>>> I agree w/ Erick, there is no cutoff point (index size for that
>>>>>>>>> matter)
>>>>>>>>> above which you start sharding.
>>>>>>>>>
>>>>>>>>> What you can do is create a scheduled job in your system that runs a
>>>>>>>>> select
>>>>>>>>> list of queries and monitors their performance. Once it degrades, it
>>>>>>>>> shards
>>>>>>>>> the index by either splitting it (you can use IndexSplitter under
>>>>>>>>> contrib)
>>>>>>>>> or create a new shard, and direct new documents to it.
>>>>>>>>>
>>>>>>>>> I think I read somewhere, not sure if it was in Solr or
>>>>>>>>> ElasticSearch
>>>>>>>>> documentation, about a Balancer object, which moves shards around in
>>>>>>>>> order
>>>>>>>>> to balance the load on the cluster. You can implement something
>>>>>>>>> similar
>>>>>>>>> which tries to balance the index sizes, creates new shards
>>>>>>>>> on-the-fly,
>>>>>>>>> even
>>>>>>>>> merge shards if suddenly a whole source is being removed from the
>>>>>>>>> system
>>>>>>>>> etc.
>>>>>>>>>
>>>>>>>>> Also, note that the 'largest index size' threshold is really a
>>>>>>>>> machine
>>>>>>>>> constraint and not Lucene's. So if you decide that 10 GB is your
>>>>>>>>> cutoff,
>>>>>>>>> it
>>>>>>>>> is pointless to create 10x10GB shards on the same machine --
>>>>>>>>> searching
>>>>>>>>> them
>>>>>>>>> is just like searching a 100GB index w/ 10x10GB segments. Perhaps
>>>>>>>>> it's
>>>>>>>>> even
>>>>>>>>> worse because you consume more RAM when the indexes are split (e.g.,
>>>>>>>>> terms
>>>>>>>>> index, field infos etc.).
>>>>>>>>>
>>>>>>>>> Shai
>>>>>>>>>
>>>>>>>>> On Sun, Jun 12, 2011 at 3:10 AM, Erick
>>>>>>>>> Erickson<erickerickson@gmail.com>wrote:
>>>>>>>>>
>>>>>>>>>> <<<We can't assume anything about the machine running it,
>>>>>>>>>> so testing won't really tell us much>>>
>>>>>>>>>>
>>>>>>>>>> Hmmm, then it's pretty hopeless I think. Problem is that
>>>>>>>>>> anything you say about running on a machine with
>>>>>>>>>> 2G available memory on a single processor is completely
>>>>>>>>>> incomparable to running on a machine with 64G of
>>>>>>>>>> memory available for Lucene and 16 processors.
>>>>>>>>>>
>>>>>>>>>> There's really no such thing as an "optimum" Lucene index
>>>>>>>>>> size, it always relates to the characteristics of the
>>>>>>>>>> underlying hardware.
>>>>>>>>>>
>>>>>>>>>> I think the best you can do is actually test on various
>>>>>>>>>> configurations, then at least you can say "on configuration
>>>>>>>>>> X this is the tipping point".
>>>>>>>>>>
>>>>>>>>>> Sorry there isn't a better answer that I know of, but...
>>>>>>>>>>
>>>>>>>>>> Best
>>>>>>>>>> Erick
>>>>>>>>>>
>>>>>>>>>> On Sat, Jun 11, 2011 at 3:37 PM, Itamar
>>>>>>>>>> Syn-Hershko<itamar@code972.com>
>>>>>>>>>> wrote:
>>>>>>>>>>> Hi all,
>>>>>>>>>>>
>>>>>>>>>>> I know Lucene indexes to be at their optimum up to a certain size
>>>>>>>>>>> -
>>>>>>>>>>> said
>>>>>>>>>> to
>>>>>>>>>>> be around several GBs. I haven't found a good discussion over
>>>>>>>>>>> this,
>>>>>>>>>>> but
>>>>>>>>>> its
>>>>>>>>>>> my understanding that at some point its better to split an index
>>>>>>>>>>> into
>>>>>>>>>> parts
>>>>>>>>>>> (a la sharding) than to continue searching on a huge-size index. I
>>>>>>>>>>> assume
>>>>>>>>>>> this has to do with OS and IO configurations. Can anyone point me
>>>>>>>>>>> to
>>>>>>>>>>> more
>>>>>>>>>>> info on this?
>>>>>>>>>>>
>>>>>>>>>>> We have a product that is using Lucene for various searches, and
>>>>>>>>>>> at
>>>>>>>>>>> the
>>>>>>>>>>> moment each type of search is using its own Lucene index. We plan
>>>>>>>>>>> on
>>>>>>>>>>> refactoring the way it works and to combine all indexes into one -
>>>>>>>>>>> making
>>>>>>>>>>> the whole system more robust and with a smaller memory footprint,
>>>>>>>>>>> among
>>>>>>>>>>> other things.
>>>>>>>>>>>
>>>>>>>>>>> Assuming the above is true, we are interested in knowing how to do
>>>>>>>>>>> this
>>>>>>>>>>> correctly. Initially all our indexes will be run in one big index,
>>>>>>>>>>> but
>>>>>>>>>>> if
>>>>>>>>>> at
>>>>>>>>>>> some index size there is a severe performance degradation we would
>>>>>>>>>>> like
>>>>>>>>>> to
>>>>>>>>>>> handle that correctly by starting a new FSDirectory index to flush
>>>>>>>>>>> into,
>>>>>>>>>> or
>>>>>>>>>>> by re-indexing and moving large indexes into their own Lucene
>>>>>>>>>>> index.
>>>>>>>>>>>
>>>>>>>>>>> Are there are any guidelines for measuring or estimating this
>>>>>>>>>>> correctly?
>>>>>>>>>>> what we should be aware of while considering all that? We can't
>>>>>>>>>>> assume
>>>>>>>>>>> anything about the machine running it, so testing won't really
>>>>>>>>>>> tell
>>>>>>>>>>> us
>>>>>>>>>>> much...
>>>>>>>>>>>
>>>>>>>>>>> Thanks in advance for any input on this,
>>>>>>>>>>>
>>>>>>>>>>> Itamar.
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>> ---------------------------------------------------------------------
>>>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>> ---------------------------------------------------------------------
>>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>> ---------------------------------------------------------------------
>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>
>>>>>>>>
>>>>>>> ---------------------------------------------------------------------
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50010-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun 13 22:25:32 2011
Return-Path: <java-user-return-50010-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 923A36A86
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 13 Jun 2011 22:25:32 +0000 (UTC)
Received: (qmail 15731 invoked by uid 500); 13 Jun 2011 22:25:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15689 invoked by uid 500); 13 Jun 2011 22:25:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15681 invoked by uid 99); 13 Jun 2011 22:25:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jun 2011 22:25:30 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jason.rutherglen@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jun 2011 22:25:25 +0000
Received: by vws7 with SMTP id 7so6538932vws.35
        for <java-user@lucene.apache.org>; Mon, 13 Jun 2011 15:25:05 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type:content-transfer-encoding;
        bh=IvfBOPF0BmPmWXmyfXFy4ic48c8DDyNPS8wcTbXLoy4=;
        b=c33B9Q1ESVYKR3bOuCbVwgG2KicwyGExJ39fUd7Cva/azy02cRujdWowhFNZ9+jxQn
         37RcbV/3q3+QTd5/INo+1ZlkipQfTsUB3/m1JMPjbJe9+54uEF3FJfIfSPL2/Kiro/ar
         mR/sNhUm29x/9Uixf3WMHhnDYilOUvs+lu7/Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=vmB6Up7dG2NJw6EhcTgg97vgrhNMsv3L+mY4AStAx7Hp7Tiyjtxg3ErVqOdGNgw6ax
         HYlqwd9aOBhtALmiyg5hzOJ47wqUui7hFsEmRS6//c+CcyBCAfdrnC0X2QsNRxycNryx
         4xp4f86Kr9/r1P4hJr2Ya6q/Z3xOs1XRy33hg=
MIME-Version: 1.0
Received: by 10.52.177.104 with SMTP id cp8mr4541023vdc.132.1308003904548;
 Mon, 13 Jun 2011 15:25:04 -0700 (PDT)
Received: by 10.52.182.193 with HTTP; Mon, 13 Jun 2011 15:25:04 -0700 (PDT)
In-Reply-To: <4DF68CE1.3050306@code972.com>
References: <4DF3C40F.9090703@code972.com>
	<BANLkTi=2U3RTtOq_1oiA_FGBwpiPcVVMyg@mail.gmail.com>
	<BANLkTinHragJQUTX3j+mcdW0K0B73A0T=A@mail.gmail.com>
	<4DF47461.1050004@code972.com>
	<BANLkTim_RCpPNkb2WyGwCJ3a0eDyiOBGjA@mail.gmail.com>
	<4DF504B2.4000105@code972.com>
	<BANLkTim_sX8CQMknZJwWX4q6pt6Jx5wrWQ@mail.gmail.com>
	<4DF525B6.2000902@code972.com>
	<BANLkTimUR3ax=odY8Ln9da6f_m_oGYvpMA@mail.gmail.com>
	<4DF67BF3.1030801@code972.com>
	<BANLkTi=c-oy5EEavyDuLs_Ky=MbaYQG-sQ@mail.gmail.com>
	<4DF68CE1.3050306@code972.com>
Date: Mon, 13 Jun 2011 15:25:04 -0700
Message-ID: <BANLkTi=m8NmPh7tfc70weL0=u3qW8s90dg@mail.gmail.com>
Subject: Re: Index size and performance degradation
From: Jason Rutherglen <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

> deletions made by readers merely mark it for
> deletion, and once a doc has been marked for deletions it is deleted for =
all
> intents and purposes, right?

There's the point-in-timeness of a reader to consider.

> Does the N in NRT represent only the cost of reopening a searcher?

Aptly put, and yes basically.

> the only thing that comes to mind is the IW unflushed buffer

This is LUCENE-2312.

On Mon, Jun 13, 2011 at 3:19 PM, Itamar Syn-Hershko <itamar@code972.com> wr=
ote:
> Since there should only be one writer, I'm not sure why you'd need
> transactional storage for that? deletions made by readers merely mark it =
for
> deletion, and once a doc has been marked for deletions it is deleted for =
all
> intents and purposes, right? But perhaps I need to refresh my memory on t=
he
> internals, it has been a while.
>
> Does the N in NRT represent only the cost of reopening a searcher? meanin=
g,
> if I could ensure reopening always happens fast and returns a searcher fo=
r
> the correct index revision, would it guarantee a real real-time search? o=
r
> is there anything else standing in between? the only thing that comes to
> mind is the IW unflushed buffer - which only Twitter's approach seem to
> handle (not even Zoie).
>
> Itamar.
>
> On 14/06/2011 01:00, Michael McCandless wrote:
>>
>> Yes, adding deletes to Twitter's approach will be a challenge!
>>
>> I don't think we'd do the post-filtering solution, but instead maybe
>> resolve the deletes "live" and store them in a transactional data
>> structure of some kind... but even then we will pay a perf hit to
>> lookup del docs against it.
>>
>> So, yeah, there will presumably be a tradeoff with this approach too.
>> However, turning around changes from the adds should be faster (no
>> segment gets flushed).
>>
>> Mike McCandless
>>
>> http://blog.mikemccandless.com
>>
>> On Mon, Jun 13, 2011 at 5:06 PM, Itamar Syn-Hershko<itamar@code972.com>
>> =A0wrote:
>>>
>>> Thanks Mike, much appreciated.
>>>
>>>
>>> Wouldn't Twitter's approach fall for the exact same pit-hole you
>>> described
>>> Zoie does (or did) when it'll handle deletes too? I don't thing there i=
s
>>> any
>>> other way of handling deletes other than post-filtering results. But
>>> perhaps
>>> the IW cache would be smaller than Zoie's RAMDirectory(ies)?
>>>
>>>
>>> I'll give all that a serious dive and report back with results or if mo=
re
>>> input will be required...
>>>
>>>
>>> Itamar.
>>>
>>>
>>> On 13/06/2011 19:01, Michael McCandless wrote:
>>>
>>>> Here's a blog post describing some details of Twitter's approach:
>>>>
>>>>
>>>>
>>>> http://engineering.twitter.com/2010/10/twitters-new-search-architectur=
e.html
>>>>
>>>> And here's a talk Michael did last October (Lucene Revolutions):
>>>>
>>>>
>>>>
>>>> http://www.lucidimagination.com/events/revolution2010/video-Realtime-S=
earch-With-Lucene-presented-by-Michael-Busch-of-Twitter
>>>>
>>>> Twitter's case is simpler since they never delete ;) =A0So we have to
>>>> fix that to do it in Lucene... there are also various open issues that
>>>> begin to explore some of the ideas here.
>>>>
>>>> But this ("immediate consistency") would be a deep and complex change,
>>>> and I don't see many apps that actually require it.
>>>>
>>>> Mike McCandless
>>>>
>>>> http://blog.mikemccandless.com
>>>>
>>>> On Sun, Jun 12, 2011 at 4:46 PM, Itamar Syn-Hershko<itamar@code972.com=
>
>>>> =A0wrote:
>>>>>
>>>>> Thanks for your detailed answer. We'll have to tackle this and see
>>>>> whats
>>>>> more important to us then. I'd definitely love to hear Zoie has
>>>>> overcame
>>>>> all
>>>>> that...
>>>>>
>>>>>
>>>>> Any pointers to Michael Busch's approach? I take this has something t=
o
>>>>> do
>>>>> with the core itself or index format, probably using the Flex version=
?
>>>>>
>>>>>
>>>>> Itamar.
>>>>>
>>>>>
>>>>> On 12/06/2011 23:12, Michael McCandless wrote:
>>>>>
>>>>>>> =A0From what I understand of Zoie (and it's been some time since I =
last
>>>>>>
>>>>>> looked... so this could be wrong now), the biggest difference vs NRT
>>>>>> is that Zoie aims for "immediate consistency", ie index changes are
>>>>>> always made visible to the very next query, vs NRT which is
>>>>>> "controlled consistency", a blend between immediate and eventual
>>>>>> consistency where your app decides when the changes must become
>>>>>> visible.
>>>>>>
>>>>>> But in exchange for that, Zoie pays a price: each search has a highe=
r
>>>>>> cost per collected hit, since it must post-filter for deleted docs.
>>>>>> And since Zoie necessarily adds complexity, there's more risk; eg
>>>>>> there were some nasty Zoie bugs that took quite some time to track
>>>>>> down (under https://issues.apache.org/jira/browse/LUCENE-2729).
>>>>>>
>>>>>> Anyway, I don't think that's a good tradeoff, in general, for our
>>>>>> users, because very few apps truly require immediate consistency fro=
m
>>>>>> Lucene (can anyone give an example where their app depends on
>>>>>> immediate consistency...?). =A0I think it's better to spend time dur=
ing
>>>>>> reopen so that searches aren't slower.
>>>>>>
>>>>>> That said, Lucene has already incorporated one big part of Zoie
>>>>>> (caching small segments in RAM) via the new NRTCachingDirectory (in
>>>>>> contrib/misc). =A0Also, the upcoming NRTManager
>>>>>> (https://issues.apache.org/jira/browse/LUCENE-2955) adds control ove=
r
>>>>>> visibility of specific indexing changes to queries that need to see
>>>>>> the changes.
>>>>>>
>>>>>> Finally, even better would be to not have to make any tradeoff
>>>>>> whatsoever ;) =A0Twitter's approach (created by Michael Busch) seems=
 to
>>>>>> bring immediate consistency with no search performance hit, so if we
>>>>>> do anything here likely it'll be similar to what Michael has done
>>>>>> (though, those changes are not simple either!).
>>>>>>
>>>>>> Mike McCandless
>>>>>>
>>>>>> http://blog.mikemccandless.com
>>>>>>
>>>>>> On Sun, Jun 12, 2011 at 2:25 PM, Itamar
>>>>>> Syn-Hershko<itamar@code972.com>
>>>>>> =A0wrote:
>>>>>>>
>>>>>>> Mike,
>>>>>>>
>>>>>>>
>>>>>>> Speaking of NRT, and completely off-topic, I know: Lucene's NRT
>>>>>>> apparently
>>>>>>> isn't fast enough if Zoie was needed, and now that Zoie is around a=
re
>>>>>>> there
>>>>>>> any plans to make it Lucene's default? or: why would one still use
>>>>>>> NRT
>>>>>>> when
>>>>>>> Zoie seem to work much better?
>>>>>>>
>>>>>>>
>>>>>>> Itamar.
>>>>>>>
>>>>>>>
>>>>>>> On 12/06/2011 13:16, Michael McCandless wrote:
>>>>>>>
>>>>>>>> Remember that memory-mapping is not a panacea: at the end of the
>>>>>>>> day,
>>>>>>>> if there just isn't enough RAM on the machine to keep your full
>>>>>>>> "working set" hot, then the OS will have to hit the disk, regardle=
ss
>>>>>>>> of whether the access is through MMap or a "traditional" IO reques=
t.
>>>>>>>>
>>>>>>>> That said, on Fedora Linux anyway, I generally see better
>>>>>>>> performance
>>>>>>>> from MMap than from NIOFSDir; eg see the 2nd chart here:
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> http://blog.mikemccandless.com/2011/06/lucenes-near-real-time-sear=
ch-is-fast.html
>>>>>>>>
>>>>>>>> Mike McCandless
>>>>>>>>
>>>>>>>> http://blog.mikemccandless.com
>>>>>>>>
>>>>>>>> On Sun, Jun 12, 2011 at 4:10 AM, Itamar
>>>>>>>> Syn-Hershko<itamar@code972.com>
>>>>>>>> =A0wrote:
>>>>>>>>>
>>>>>>>>> Thanks.
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> The whole point of my question was to find out if and how to make
>>>>>>>>> balancing
>>>>>>>>> on the SAME machine. Apparently thats not going to help and at a
>>>>>>>>> certain
>>>>>>>>> point we will just have to prompt the user to buy more hardware..=
.
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> Out of curiosity, isn't there anything that we can do to avoid
>>>>>>>>> that?
>>>>>>>>> for
>>>>>>>>> instance using memory-mapped files for the indexes? anything that
>>>>>>>>> would
>>>>>>>>> help
>>>>>>>>> us overcome OS limitations of that sort...
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> Also, you mention a scheduled job to check for performance
>>>>>>>>> degradation;
>>>>>>>>> any
>>>>>>>>> idea how serious such a drop should be for sharding to be really
>>>>>>>>> beneficial?
>>>>>>>>> or is it application specific too?
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> Itamar.
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> On 12/06/2011 06:43, Shai Erera wrote:
>>>>>>>>>
>>>>>>>>>> I agree w/ Erick, there is no cutoff point (index size for that
>>>>>>>>>> matter)
>>>>>>>>>> above which you start sharding.
>>>>>>>>>>
>>>>>>>>>> What you can do is create a scheduled job in your system that ru=
ns
>>>>>>>>>> a
>>>>>>>>>> select
>>>>>>>>>> list of queries and monitors their performance. Once it degrades=
,
>>>>>>>>>> it
>>>>>>>>>> shards
>>>>>>>>>> the index by either splitting it (you can use IndexSplitter unde=
r
>>>>>>>>>> contrib)
>>>>>>>>>> or create a new shard, and direct new documents to it.
>>>>>>>>>>
>>>>>>>>>> I think I read somewhere, not sure if it was in Solr or
>>>>>>>>>> ElasticSearch
>>>>>>>>>> documentation, about a Balancer object, which moves shards aroun=
d
>>>>>>>>>> in
>>>>>>>>>> order
>>>>>>>>>> to balance the load on the cluster. You can implement something
>>>>>>>>>> similar
>>>>>>>>>> which tries to balance the index sizes, creates new shards
>>>>>>>>>> on-the-fly,
>>>>>>>>>> even
>>>>>>>>>> merge shards if suddenly a whole source is being removed from th=
e
>>>>>>>>>> system
>>>>>>>>>> etc.
>>>>>>>>>>
>>>>>>>>>> Also, note that the 'largest index size' threshold is really a
>>>>>>>>>> machine
>>>>>>>>>> constraint and not Lucene's. So if you decide that 10 GB is your
>>>>>>>>>> cutoff,
>>>>>>>>>> it
>>>>>>>>>> is pointless to create 10x10GB shards on the same machine --
>>>>>>>>>> searching
>>>>>>>>>> them
>>>>>>>>>> is just like searching a 100GB index w/ 10x10GB segments. Perhap=
s
>>>>>>>>>> it's
>>>>>>>>>> even
>>>>>>>>>> worse because you consume more RAM when the indexes are split
>>>>>>>>>> (e.g.,
>>>>>>>>>> terms
>>>>>>>>>> index, field infos etc.).
>>>>>>>>>>
>>>>>>>>>> Shai
>>>>>>>>>>
>>>>>>>>>> On Sun, Jun 12, 2011 at 3:10 AM, Erick
>>>>>>>>>> Erickson<erickerickson@gmail.com>wrote:
>>>>>>>>>>
>>>>>>>>>>> <<<We can't assume anything about the machine running it,
>>>>>>>>>>> so testing won't really tell us much>>>
>>>>>>>>>>>
>>>>>>>>>>> Hmmm, then it's pretty hopeless I think. Problem is that
>>>>>>>>>>> anything you say about running on a machine with
>>>>>>>>>>> 2G available memory on a single processor is completely
>>>>>>>>>>> incomparable to running on a machine with 64G of
>>>>>>>>>>> memory available for Lucene and 16 processors.
>>>>>>>>>>>
>>>>>>>>>>> There's really no such thing as an "optimum" Lucene index
>>>>>>>>>>> size, it always relates to the characteristics of the
>>>>>>>>>>> underlying hardware.
>>>>>>>>>>>
>>>>>>>>>>> I think the best you can do is actually test on various
>>>>>>>>>>> configurations, then at least you can say "on configuration
>>>>>>>>>>> X this is the tipping point".
>>>>>>>>>>>
>>>>>>>>>>> Sorry there isn't a better answer that I know of, but...
>>>>>>>>>>>
>>>>>>>>>>> Best
>>>>>>>>>>> Erick
>>>>>>>>>>>
>>>>>>>>>>> On Sat, Jun 11, 2011 at 3:37 PM, Itamar
>>>>>>>>>>> Syn-Hershko<itamar@code972.com>
>>>>>>>>>>> wrote:
>>>>>>>>>>>>
>>>>>>>>>>>> Hi all,
>>>>>>>>>>>>
>>>>>>>>>>>> I know Lucene indexes to be at their optimum up to a certain
>>>>>>>>>>>> size
>>>>>>>>>>>> -
>>>>>>>>>>>> said
>>>>>>>>>>>
>>>>>>>>>>> to
>>>>>>>>>>>>
>>>>>>>>>>>> be around several GBs. I haven't found a good discussion over
>>>>>>>>>>>> this,
>>>>>>>>>>>> but
>>>>>>>>>>>
>>>>>>>>>>> its
>>>>>>>>>>>>
>>>>>>>>>>>> my understanding that at some point its better to split an ind=
ex
>>>>>>>>>>>> into
>>>>>>>>>>>
>>>>>>>>>>> parts
>>>>>>>>>>>>
>>>>>>>>>>>> (a la sharding) than to continue searching on a huge-size inde=
x.
>>>>>>>>>>>> I
>>>>>>>>>>>> assume
>>>>>>>>>>>> this has to do with OS and IO configurations. Can anyone point
>>>>>>>>>>>> me
>>>>>>>>>>>> to
>>>>>>>>>>>> more
>>>>>>>>>>>> info on this?
>>>>>>>>>>>>
>>>>>>>>>>>> We have a product that is using Lucene for various searches, a=
nd
>>>>>>>>>>>> at
>>>>>>>>>>>> the
>>>>>>>>>>>> moment each type of search is using its own Lucene index. We
>>>>>>>>>>>> plan
>>>>>>>>>>>> on
>>>>>>>>>>>> refactoring the way it works and to combine all indexes into o=
ne
>>>>>>>>>>>> -
>>>>>>>>>>>> making
>>>>>>>>>>>> the whole system more robust and with a smaller memory
>>>>>>>>>>>> footprint,
>>>>>>>>>>>> among
>>>>>>>>>>>> other things.
>>>>>>>>>>>>
>>>>>>>>>>>> Assuming the above is true, we are interested in knowing how t=
o
>>>>>>>>>>>> do
>>>>>>>>>>>> this
>>>>>>>>>>>> correctly. Initially all our indexes will be run in one big
>>>>>>>>>>>> index,
>>>>>>>>>>>> but
>>>>>>>>>>>> if
>>>>>>>>>>>
>>>>>>>>>>> at
>>>>>>>>>>>>
>>>>>>>>>>>> some index size there is a severe performance degradation we
>>>>>>>>>>>> would
>>>>>>>>>>>> like
>>>>>>>>>>>
>>>>>>>>>>> to
>>>>>>>>>>>>
>>>>>>>>>>>> handle that correctly by starting a new FSDirectory index to
>>>>>>>>>>>> flush
>>>>>>>>>>>> into,
>>>>>>>>>>>
>>>>>>>>>>> or
>>>>>>>>>>>>
>>>>>>>>>>>> by re-indexing and moving large indexes into their own Lucene
>>>>>>>>>>>> index.
>>>>>>>>>>>>
>>>>>>>>>>>> Are there are any guidelines for measuring or estimating this
>>>>>>>>>>>> correctly?
>>>>>>>>>>>> what we should be aware of while considering all that? We can'=
t
>>>>>>>>>>>> assume
>>>>>>>>>>>> anything about the machine running it, so testing won't really
>>>>>>>>>>>> tell
>>>>>>>>>>>> us
>>>>>>>>>>>> much...
>>>>>>>>>>>>
>>>>>>>>>>>> Thanks in advance for any input on this,
>>>>>>>>>>>>
>>>>>>>>>>>> Itamar.
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>> --------------------------------------------------------------=
-------
>>>>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.or=
g
>>>>>>>>>>>> For additional commands, e-mail:
>>>>>>>>>>>> java-user-help@lucene.apache.org
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>> ---------------------------------------------------------------=
------
>>>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.o=
rg
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>
>>>>>>>>> -----------------------------------------------------------------=
----
>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>>
>>>>>>>>>
>>>>>>>>
>>>>>>>> ------------------------------------------------------------------=
---
>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>> -------------------------------------------------------------------=
--
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>
>>>>>>>
>>>>>> --------------------------------------------------------------------=
-
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50011-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun 14 01:03:07 2011
Return-Path: <java-user-return-50011-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6A118659D
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 14 Jun 2011 01:03:07 +0000 (UTC)
Received: (qmail 6498 invoked by uid 500); 14 Jun 2011 01:03:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6456 invoked by uid 500); 14 Jun 2011 01:03:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6448 invoked by uid 99); 14 Jun 2011 01:03:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Jun 2011 01:03:04 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Jun 2011 01:02:58 +0000
Received: by qwj9 with SMTP id 9so3529555qwj.35
        for <java-user@lucene.apache.org>; Mon, 13 Jun 2011 18:02:37 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=T7xvwirWNOUMsm2qorQLja8ZkdP9fm2ARlxA0PkWyJk=;
        b=dQeB4xoZbZcnF9SVKVqKBwSSfK7qntGWrXDtUUjayHz0S9vgn5EoueBOpgSZgME0mL
         1vHvvEkiSTm0EwuOeYyrN6stiKBxQtDf2i/g0IiJD7kqg8vbax0aNNo3LxJc/KYyeiNS
         bEQZDx0PAuXUXO3A9A0VPAWNEhrvd2JluWVIo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=dXfE2MoQT4sdpZLvs+RL8ninVk+X3+wAQ/D4TDGgT0t5DDujiT8vpmMjU16dlQdMM0
         xvNuu/X9mmDak/4H09bkJ5fti4vbHOZMBNdBYDLh/l+6vGxA9pM8LQDXg43S1+gF0qPr
         jFrnqDAkXlS+EdQZvN3xj+fO+fDHczB/KTyH4=
MIME-Version: 1.0
Received: by 10.229.251.13 with SMTP id mq13mr4431448qcb.36.1308013355514;
 Mon, 13 Jun 2011 18:02:35 -0700 (PDT)
Received: by 10.229.182.199 with HTTP; Mon, 13 Jun 2011 18:02:35 -0700 (PDT)
In-Reply-To: <tencent_0AD68E0979C98F3F5AA2FC6E@qq.com>
References: <tencent_0AD68E0979C98F3F5AA2FC6E@qq.com>
Date: Mon, 13 Jun 2011 21:02:35 -0400
Message-ID: <BANLkTi=JExybn2opSHyFxKdARR1fC4-6DA@mail.gmail.com>
Subject: Re: So many compiling errors in the 3.3 source release when added
 into Eclipse
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

How did you do this? Did you execute the "ant eclipse" target
first? See the instructions at:

http://wiki.apache.org/solr/HowToContribute#Eclipse_.28Galileo.2C_J2EE_version_1.2.2.20100217-2310.2C_but_any_relatively_recent_Eclipse_should_do.29:

Best
Erick

On Sat, Jun 11, 2011 at 2:16 AM, dyzc2010 <zhoucheng2008@gmail.com> wrote:
> Hi I added a Java project in Eclipse for the 3.3 src release, and find hundreds of compiling errors. Most are the MockAnalyzer class are missing a few constructors.
>
>
> Does anyone have the same experience? How has this incomplete version been released?
>
>
> Thanks

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50012-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun 14 04:14:17 2011
Return-Path: <java-user-return-50012-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C5B4B605F
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 14 Jun 2011 04:14:17 +0000 (UTC)
Received: (qmail 56698 invoked by uid 500); 14 Jun 2011 04:14:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56508 invoked by uid 500); 14 Jun 2011 04:14:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56500 invoked by uid 99); 14 Jun 2011 04:14:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Jun 2011 04:14:12 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of serera@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Jun 2011 04:14:05 +0000
Received: by iwr19 with SMTP id 19so6915473iwr.35
        for <java-user@lucene.apache.org>; Mon, 13 Jun 2011 21:13:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=kTJkFW8e4GBMcf5qFKXIKImMF6eJIBs8TjCdSbM2GKY=;
        b=DXQC8oH1NF5UeUtlm8Cyj42hv5ahe+2LO0vfciUJ+Nm0Koyo3XbSUQrh75d+KLeavu
         eW1QfvQhDOZF/TftYY4qf4d22R4l1jNz9OKByru0rSqjRk4W3Yz9eoZBq8epLYkSIrEU
         HClMal6T4WN9+2Xhd2CceJAe3UraFWI2T3OZ4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=OznZQ/qJY60Xx1bPd2XJTTAOtSg9yI+Nmxn+xKQhrtOriM84ItBj27k4fTDUh+0Pzh
         eax2mN40oACWwGrDDU4fJxUCbjum79g2DdpHPzSIKwfUzywwScqBcZww42dRUZUYMWjS
         RIfcN7G0XNZuXPiK4XbvBRH/nSEATlr6SVCN4=
MIME-Version: 1.0
Received: by 10.43.132.72 with SMTP id ht8mr274372icc.111.1308024824412; Mon,
 13 Jun 2011 21:13:44 -0700 (PDT)
Received: by 10.42.3.209 with HTTP; Mon, 13 Jun 2011 21:13:44 -0700 (PDT)
In-Reply-To: <4DF67AE8.1070300@code972.com>
References: <4DF3C40F.9090703@code972.com>
	<BANLkTi=2U3RTtOq_1oiA_FGBwpiPcVVMyg@mail.gmail.com>
	<BANLkTinHragJQUTX3j+mcdW0K0B73A0T=A@mail.gmail.com>
	<4DF47461.1050004@code972.com>
	<BANLkTi=AcTVV1ruMvvWj_a7Ha_VzaxSuzA@mail.gmail.com>
	<4DF4F39C.1090108@code972.com>
	<BANLkTi=1kufZzCieYVo95Ap_RLAFqwHepg@mail.gmail.com>
	<4DF50A8D.5040704@code972.com>
	<BANLkTi=w+aqtnhs4GyyqLYOV6jh=nsbU_w@mail.gmail.com>
	<4DF67AE8.1070300@code972.com>
Date: Tue, 14 Jun 2011 07:13:44 +0300
Message-ID: <BANLkTinVM9tcLOGZE3-wrH-HbgQMw5kufA@mail.gmail.com>
Subject: Re: Index size and performance degradation
From: Shai Erera <serera@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf307d01bc043a2404a5a44365
X-Virus-Checked: Checked by ClamAV on apache.org

--20cf307d01bc043a2404a5a44365
Content-Type: text/plain; charset=ISO-8859-1

>
> but you'll still cache the results - so again this isn't viable when RT
> search, or even an NRT, is a requirement
>

No I don't cache the results. The Filter is an OpenBitSet of all docs that
match the filter (e.g. have the specified language field's value) and it is
refreshed whenever new segments are added / old ones deleted. So I think it
actually works well w/ NRT because the 'warmup' would just update the filter
w/ the new segments. I suggest you take a look at CachingWrapperFilter to
get an idea how this works.

Shai

On Tue, Jun 14, 2011 at 12:02 AM, Itamar Syn-Hershko <itamar@code972.com>wrote:

> On 13/06/2011 06:23, Shai Erera wrote:
>
>> A Language filter is one -- different users search in different languages
>> and want to view pages in those languages only. If you have a field attach
>> to your documents that identifies the language of the document, you can
>> use
>> it to filter the queries to return results only of the requested language.
>>
>> Another filter is file type.
>>
>
> Oh, ok, but you'll still cache the results - so again this isn't viable
> when RT search, or even an NRT, is a requirement...
>
> Is the usage of such Filters the only reason you don't include the language
> field in your query?
>
> Itamar.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--20cf307d01bc043a2404a5a44365--

From java-user-return-50013-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun 14 05:12:10 2011
Return-Path: <java-user-return-50013-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 740EB6C2A
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 14 Jun 2011 05:12:10 +0000 (UTC)
Received: (qmail 84263 invoked by uid 500); 14 Jun 2011 05:12:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83869 invoked by uid 500); 14 Jun 2011 05:12:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83861 invoked by uid 99); 14 Jun 2011 05:12:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Jun 2011 05:12:05 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lahiruts@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Jun 2011 05:11:59 +0000
Received: by wwi18 with SMTP id 18so3656868wwi.5
        for <java-user@lucene.apache.org>; Mon, 13 Jun 2011 22:11:37 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references
         :x-goomoji-body:date:message-id:subject:from:to:content-type;
        bh=44hiqRMXFL4IZuuARNOG8FoCeWJbZ8WLWgiOixZXoPY=;
        b=DP3YcRtm7W7go3rQ7tGQ5zvQB2odueth7mSIjsYZRanuHMR89BjZ6NinEi5zOq+M1k
         2PFIDrTbfRn/VMeW02v8B/8QPnB0m5BBcLejMpRoSJHi9m8WcVDPzarEfnU3QL+APL34
         NL5YZ/rabMdhvFgH51rr/P7ZhYyAbW9maqtws=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:x-goomoji-body:date:message-id
         :subject:from:to:content-type;
        b=XZVdxfCyhYEOtiWdMU8WYmwh9BqoexM0qe1dVUEcIjz33PhWIHAEm0de/TUnv3loso
         7BNeyj2eE/AHhh5iAcIIZpBbY5W+I9yltMAb2cDaJSUElRUc4YJFKLWkWiTGxKedDjDA
         rzTjVFAAOE8SdvaBrN1RP6DWA9rQDAhH6d84g=
MIME-Version: 1.0
Received: by 10.216.240.202 with SMTP id e52mr270064wer.84.1308028297686; Mon,
 13 Jun 2011 22:11:37 -0700 (PDT)
Received: by 10.216.157.75 with HTTP; Mon, 13 Jun 2011 22:11:37 -0700 (PDT)
In-Reply-To: <BANLkTikYvdsvRkuWEg4XxnMX8ZwaEuPTUQ@mail.gmail.com>
References: <BANLkTimx2LkWXvyEDJyvzL4QUd6Mno=sDw@mail.gmail.com>
	<BANLkTinTtCbeDT_ZnNqCQnPq0-kjxCMJaw@mail.gmail.com>
	<BANLkTi==nKaAk5pntu7s=gXqeDQ_uxurrA@mail.gmail.com>
	<BANLkTikYvdsvRkuWEg4XxnMX8ZwaEuPTUQ@mail.gmail.com>
X-Goomoji-Body: true
Date: Tue, 14 Jun 2011 10:41:37 +0530
Message-ID: <BANLkTi=KiC3sJHyC_JDYy2C2F_S6c54CWw@mail.gmail.com>
Subject: Re: Modifying Length Normalization calculation
From: Lahiru Samarakoon <lahiruts@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/related; boundary=e0cb4e38500c0a30f804a5a51292

--e0cb4e38500c0a30f804a5a51292
Content-Type: multipart/alternative; boundary=e0cb4e38500c0a30f504a5a51291

--e0cb4e38500c0a30f504a5a51291
Content-Type: text/plain; charset=ISO-8859-1

Hi Ian,

The order is right and your method is working for me.

Thanks  [?]

Lahiru

On Mon, Jun 13, 2011 at 7:15 PM, Ian Lea <ian.lea@gmail.com> wrote:

> This is getting beyond my level of expertise, but I'll have a go at
> your questions.  Hopefully someone better informed will step in with
> corrections or confirmation.
>
> > ...
> > The application calls the *writer.addDocument(d);* method and in this
> > process the *lengthNorm(String fieldName, int numTerms)*  method is
> called.
> > I can extend the *DefaultSimilarity* class and override the
> > *lengthNorm*method, but how can I explicitly specify the
> > *numTerms* value?
>
> I don't know that you can, but you don't have to use the value passed in.
>
> > ...
> > Does *computeNorm* method is called for every field or is it only called
> for
> > analyzed fields?
>
> All indexed fields, at a guess.  Which can be analyzed or not.
>
> > The order we call *addDocument* and the order the *computeNorm *method is
> > called is the same ?
>
> Probably.
>
> > Is there is a possibility that I can access the *Document* object inside
> the
> > *Similiarity* class ?
>
> Not that I know of via API calls. If you had your own Similarity
> implementation, and methods are called in the order you expect, you
> could add a setDoc(Document) method and/or a setCalcValue(n) method
> and use them as you wished in your custom computeNorm() or
> lengthNorm() code.
>
>
> --
> Ian.
>
>
> > On Mon, Jun 13, 2011 at 3:09 PM, Ian Lea <ian.lea@gmail.com> wrote:
> >
> >> org.apache.lucene.search.Similarity would be the place to look,
> >> specifically computeNorm(String field, FieldInvertState state).  There
> >> is comprehensive info in the javadocs.  Note that values are
> >> calculated at indexing and stored in the index encoded, with some loss
> >> of precision.
> >>
> >>
> >> --
> >> Ian.
> >>
> >> On Mon, Jun 13, 2011 at 7:31 AM, Lahiru Samarakoon <lahiruts@gmail.com>
> >> wrote:
> >> > Hi All,
> >> >
> >> > I want to change the length normalization calculation specific to my
> >> > application. By changing the "*number of terms*" according to my
> >> > requirement. The "*StandardTokenizer*" works perfectly for my
> >> application,
> >> > However, the *number of terms* calculated by the tokenizer is not the
> >> > effective number of terms for the application. I have an mechanism to
> >> > calculate that value and I need to know how can I apply that value in
> >> length
> >> > normalization calculations.
> >> >
> >> > Please advice.
> >> >
> >> > Thank you,
> >> >
> >> > Best Regards,
> >> > Lahiru.
> >> >
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--e0cb4e38500c0a30f504a5a51291
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hi Ian,<br><br>The order is right and your method is working for me.<br><br=
>Thanks=A0 <img goomoji=3D"330" style=3D"margin: 0pt 0.2ex; vertical-align:=
 middle;" src=3D"cid:330@goomoji.gmail"><br><br>Lahiru<br><br><div class=3D=
"gmail_quote">
On Mon, Jun 13, 2011 at 7:15 PM, Ian Lea <span dir=3D"ltr">&lt;<a href=3D"m=
ailto:ian.lea@gmail.com">ian.lea@gmail.com</a>&gt;</span> wrote:<br><blockq=
uote class=3D"gmail_quote" style=3D"margin: 0pt 0pt 0pt 0.8ex; border-left:=
 1px solid rgb(204, 204, 204); padding-left: 1ex;">
This is getting beyond my level of expertise, but I&#39;ll have a go at<br>
your questions. =A0Hopefully someone better informed will step in with<br>
corrections or confirmation.<br>
<br>
&gt; ...<br>
<div class=3D"im">&gt; The application calls the *writer.addDocument(d);* m=
ethod and in this<br>
&gt; process the *lengthNorm(String fieldName, int numTerms)* =A0method is =
called.<br>
&gt; I can extend the *DefaultSimilarity* class and override the<br>
&gt; *lengthNorm*method, but how can I explicitly specify the<br>
&gt; *numTerms* value?<br>
<br>
</div>I don&#39;t know that you can, but you don&#39;t have to use the valu=
e passed in.<br>
<br>
&gt; ...<br>
<div class=3D"im">&gt; Does *computeNorm* method is called for every field =
or is it only called for<br>
&gt; analyzed fields?<br>
<br>
</div>All indexed fields, at a guess. =A0Which can be analyzed or not.<br>
<div class=3D"im"><br>
&gt; The order we call *addDocument* and the order the *computeNorm *method=
 is<br>
&gt; called is the same ?<br>
<br>
</div>Probably.<br>
<div class=3D"im"><br>
&gt; Is there is a possibility that I can access the *Document* object insi=
de the<br>
&gt; *Similiarity* class ?<br>
<br>
</div>Not that I know of via API calls. If you had your own Similarity<br>
implementation, and methods are called in the order you expect, you<br>
could add a setDoc(Document) method and/or a setCalcValue(n) method<br>
and use them as you wished in your custom computeNorm() or<br>
lengthNorm() code.<br>
<div><div></div><div class=3D"h5"><br>
<br>
--<br>
Ian.<br>
<br>
<br>
&gt; On Mon, Jun 13, 2011 at 3:09 PM, Ian Lea &lt;<a href=3D"mailto:ian.lea=
@gmail.com">ian.lea@gmail.com</a>&gt; wrote:<br>
&gt;<br>
&gt;&gt; org.apache.lucene.search.Similarity would be the place to look,<br=
>
&gt;&gt; specifically computeNorm(String field, FieldInvertState state). =
=A0There<br>
&gt;&gt; is comprehensive info in the javadocs. =A0Note that values are<br>
&gt;&gt; calculated at indexing and stored in the index encoded, with some =
loss<br>
&gt;&gt; of precision.<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt; --<br>
&gt;&gt; Ian.<br>
&gt;&gt;<br>
&gt;&gt; On Mon, Jun 13, 2011 at 7:31 AM, Lahiru Samarakoon &lt;<a href=3D"=
mailto:lahiruts@gmail.com">lahiruts@gmail.com</a>&gt;<br>
&gt;&gt; wrote:<br>
&gt;&gt; &gt; Hi All,<br>
&gt;&gt; &gt;<br>
&gt;&gt; &gt; I want to change the length normalization calculation specifi=
c to my<br>
&gt;&gt; &gt; application. By changing the &quot;*number of terms*&quot; ac=
cording to my<br>
&gt;&gt; &gt; requirement. The &quot;*StandardTokenizer*&quot; works perfec=
tly for my<br>
&gt;&gt; application,<br>
&gt;&gt; &gt; However, the *number of terms* calculated by the tokenizer is=
 not the<br>
&gt;&gt; &gt; effective number of terms for the application. I have an mech=
anism to<br>
&gt;&gt; &gt; calculate that value and I need to know how can I apply that =
value in<br>
&gt;&gt; length<br>
&gt;&gt; &gt; normalization calculations.<br>
&gt;&gt; &gt;<br>
&gt;&gt; &gt; Please advice.<br>
&gt;&gt; &gt;<br>
&gt;&gt; &gt; Thank you,<br>
&gt;&gt; &gt;<br>
&gt;&gt; &gt; Best Regards,<br>
&gt;&gt; &gt; Lahiru.<br>
&gt;&gt; &gt;<br>
&gt;&gt;<br>
&gt;&gt; ------------------------------------------------------------------=
---<br>
&gt;&gt; To unsubscribe, e-mail: <a href=3D"mailto:java-user-unsubscribe@lu=
cene.apache.org">java-user-unsubscribe@lucene.apache.org</a><br>
&gt;&gt; For additional commands, e-mail: <a href=3D"mailto:java-user-help@=
lucene.apache.org">java-user-help@lucene.apache.org</a><br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;<br>
<br>
---------------------------------------------------------------------<br>
To unsubscribe, e-mail: <a href=3D"mailto:java-user-unsubscribe@lucene.apac=
he.org">java-user-unsubscribe@lucene.apache.org</a><br>
For additional commands, e-mail: <a href=3D"mailto:java-user-help@lucene.ap=
ache.org">java-user-help@lucene.apache.org</a><br>
<br>
</div></div></blockquote></div><br>

--e0cb4e38500c0a30f504a5a51291--
--e0cb4e38500c0a30f804a5a51292--

From java-user-return-50014-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun 14 07:29:18 2011
Return-Path: <java-user-return-50014-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 068DF6F4C
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 14 Jun 2011 07:29:18 +0000 (UTC)
Received: (qmail 3560 invoked by uid 500); 14 Jun 2011 07:29:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2596 invoked by uid 500); 14 Jun 2011 07:29:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2586 invoked by uid 99); 14 Jun 2011 07:29:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Jun 2011 07:29:08 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [130.225.24.68] (HELO sbexch03.sb.statsbiblioteket.dk) (130.225.24.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Jun 2011 07:28:59 +0000
Received: from [130.225.25.23] (130.225.25.23) by
 sbexch03.sb.statsbiblioteket.dk (130.225.24.68) with Microsoft SMTP Server id
 8.3.159.2; Tue, 14 Jun 2011 09:28:39 +0200
Subject: Re: Index size and performance degradation
From: Toke Eskildsen <te@statsbiblioteket.dk>
Reply-To: te@statsbiblioteket.dk
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <4DF47461.1050004@code972.com>
References: <4DF3C40F.9090703@code972.com>
	 <BANLkTi=2U3RTtOq_1oiA_FGBwpiPcVVMyg@mail.gmail.com>
	 <BANLkTinHragJQUTX3j+mcdW0K0B73A0T=A@mail.gmail.com>
	 <4DF47461.1050004@code972.com>
Content-Type: text/plain; charset="UTF-8"
Organization: State and University Library, Denmark
Date: Tue, 14 Jun 2011 09:28:38 +0200
Message-ID: <1308036518.853.79.camel@te-prime>
MIME-Version: 1.0
X-Mailer: Evolution 2.28.3 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Sun, 2011-06-12 at 10:10 +0200, Itamar Syn-Hershko wrote:
> The whole point of my question was to find out if and how to make 
> balancing on the SAME machine. Apparently thats not going to help and at 
> a certain point we will just have to prompt the user to buy more hardware...

It really depends on your scenario. If you have few concurrent requests
and are looking to minimize latency, sharding might help; assuming you
have fast IO and multiple cores. You basically want to saturate all
available resources for all requests.

On the other hand, if throughput is the issue, sharding on a single
machine is counter-productive due to increased duplication and merging.

> Out of curiosity, isn't there anything that we can do to avoid that? for 
> instance using memory-mapped files for the indexes? anything that would 
> help us overcome OS limitations of that sort...

One standard advice for speeding up searches is using SSD's. Our
(admittedly old) experiments puts SSD-performance near RAM. With the
prices we have now, SSD's seems like an obvious choice for most setups.

We tried a few performance tests at different index sizes and for us,
index size vs. performance looked like the power law: Heavy performance
degradation in the beginning, less later. It makes sense when we look at
caching and it means that if you do not require stellar performance, you
can have very large indexes on few machines (cue Hathi Trust).

- Toke Eskildsen


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50015-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun 14 07:42:59 2011
Return-Path: <java-user-return-50015-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CA5DB671B
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 14 Jun 2011 07:42:59 +0000 (UTC)
Received: (qmail 19402 invoked by uid 500); 14 Jun 2011 07:42:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19347 invoked by uid 500); 14 Jun 2011 07:42:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19339 invoked by uid 99); 14 Jun 2011 07:42:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Jun 2011 07:42:57 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,RFC_ABUSE_POST,SPF_NEUTRAL,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [121.101.151.225] (HELO nm3.bullet.mail.in.yahoo.com) (121.101.151.225)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 14 Jun 2011 07:42:49 +0000
Received: from [121.101.151.238] by nm3.bullet.mail.in.yahoo.com with NNFMP; 14 Jun 2011 07:46:30 -0000
Received: from [121.101.151.232] by tm3.bullet.mail.in.yahoo.com with NNFMP; 14 Jun 2011 07:43:11 -0000
Received: from [127.0.0.1] by omp1001.mail.in.yahoo.com with NNFMP; 14 Jun 2011 07:42:27 -0000
X-Yahoo-Newman-Id: 391183.36112.bm@omp1001.mail.in.yahoo.com
Received: (qmail 69452 invoked from network); 14 Jun 2011 07:42:26 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=DKIM-Signature:X-Yahoo-Newman-Property:X-YMail-OSG:X-Yahoo-SMTP:Received:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=37hKzlTKMKVnPBGJEnx7wlLFJCRwp4ljcL9UI5LIKVCRhU0/aAKnfXnwXELDn69Uu69E8A/iHdGScw45NUrOa3TX67EaYBJhlpsZWJiQ734O2WAXkSiTUgt6Urz16WPzFLNIRmpPFLqkINhfmQLCQ0IFfmcrQWMItWjNVoNt0Yw=  ;
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.in; s=s1024; t=1308037346; bh=qnOmS54Y6sTut3VAfNUm9qQmd1s/gLuMPvFdOZ3GHX0=; h=X-Yahoo-Newman-Property:X-YMail-OSG:X-Yahoo-SMTP:Received:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE; b=Enx9278o/H2/qT/50KESnZRmhePRMvZGlDTkLfqBxuTTb5g2/y3H9cZ3fUBiWMv8jxekNM6rZ4vlDPQbBDfID3l+6gxUJw/83hSezr9CbYFDwfCm1GoHQ6Q5VVPVH6gxttVewv+VXmq7sdeUyuE3leE0aI4vllAYEmdmnEudN1k=
X-Yahoo-Newman-Property: ymail-3
X-YMail-OSG: pNwni70VM1mSOtQ1aCXKz1JPYLmpduWkVyG80qybD7Rd74G
 ncffRoa1UEUUTqWpJx1_77NPpwm0KI3Zg0IErEpCUwhF2JE.vLhlTl4e1_aH
 BZQLaRzkYqr_BCVzdt2kQ_Mx8dPBDBsflFU4Ti00eBfLfeeUp7XOL.QKImaC
 0NjzyfViJBdV0v0rvr2ZbhxRecmuYI7E1PUlwWvleO8udiIE.eMBvl2KYJ2W
 FakiyvuYmHWKLf0zeZItMiLsDEmJIF3u.MF38By83ZCvB8OfdB9EUQP2Qx2d
 ZUBx14Xz2ElRA90CuyI6A_iRCxr1rhJQo6cmYl8YmNGRayoCf8raEX2M-
X-Yahoo-SMTP: JObyHkuswBBrNSLZp.Ycd7Boqpr_GQ--
Received: from GaneshM (emailgane@121.244.159.130 with login)
        by smtp103.mail.in.yahoo.com with SMTP; 14 Jun 2011 13:12:26 +0530 IST
Message-ID: <7F4D8D98DAFB42F3A1CE30E74FCBA50B@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <4DF3C40F.9090703@code972.com><BANLkTi=2U3RTtOq_1oiA_FGBwpiPcVVMyg@mail.gmail.com> <BANLkTinHragJQUTX3j+mcdW0K0B73A0T=A@mail.gmail.com>
Subject: Re: Index size and performance degradation
Date: Tue, 14 Jun 2011 13:12:27 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.5931
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5931
X-Virus-Checked: Checked by ClamAV on apache.org

We tried with more than 50 shards in the single system. Having multiple =
small index, indexes and optimizes the content faster. We use =
ParallelMultiSearcher to search across the index and the performance is =
really good. Now we plan to move to 64 Bit, so that we could use more =
RAM.

Regards
Ganesh=20
 =20

----- Original Message -----=20
From: "Shai Erera" <serera@gmail.com>
To: <java-user@lucene.apache.org>
Sent: Sunday, June 12, 2011 9:13 AM
Subject: Re: Index size and performance degradation


>I agree w/ Erick, there is no cutoff point (index size for that matter)
> above which you start sharding.
>=20
> What you can do is create a scheduled job in your system that runs a =
select
> list of queries and monitors their performance. Once it degrades, it =
shards
> the index by either splitting it (you can use IndexSplitter under =
contrib)
> or create a new shard, and direct new documents to it.
>=20
> I think I read somewhere, not sure if it was in Solr or ElasticSearch
> documentation, about a Balancer object, which moves shards around in =
order
> to balance the load on the cluster. You can implement something =
similar
> which tries to balance the index sizes, creates new shards on-the-fly, =
even
> merge shards if suddenly a whole source is being removed from the =
system
> etc.
>=20
> Also, note that the 'largest index size' threshold is really a machine
> constraint and not Lucene's. So if you decide that 10 GB is your =
cutoff, it
> is pointless to create 10x10GB shards on the same machine -- searching =
them
> is just like searching a 100GB index w/ 10x10GB segments. Perhaps it's =
even
> worse because you consume more RAM when the indexes are split (e.g., =
terms
> index, field infos etc.).
>=20
> Shai
>=20
> On Sun, Jun 12, 2011 at 3:10 AM, Erick Erickson =
<erickerickson@gmail.com>wrote:
>=20
>> <<<We can't assume anything about the machine running it,
>> so testing won't really tell us much>>>
>>
>> Hmmm, then it's pretty hopeless I think. Problem is that
>> anything you say about running on a machine with
>> 2G available memory on a single processor is completely
>> incomparable to running on a machine with 64G of
>> memory available for Lucene and 16 processors.
>>
>> There's really no such thing as an "optimum" Lucene index
>> size, it always relates to the characteristics of the
>> underlying hardware.
>>
>> I think the best you can do is actually test on various
>> configurations, then at least you can say "on configuration
>> X this is the tipping point".
>>
>> Sorry there isn't a better answer that I know of, but...
>>
>> Best
>> Erick
>>
>> On Sat, Jun 11, 2011 at 3:37 PM, Itamar Syn-Hershko =
<itamar@code972.com>
>> wrote:
>> > Hi all,
>> >
>> > I know Lucene indexes to be at their optimum up to a certain size - =
said
>> to
>> > be around several GBs. I haven't found a good discussion over this, =
but
>> its
>> > my understanding that at some point its better to split an index =
into
>> parts
>> > (a la sharding) than to continue searching on a huge-size index. I =
assume
>> > this has to do with OS and IO configurations. Can anyone point me =
to more
>> > info on this?
>> >
>> > We have a product that is using Lucene for various searches, and at =
the
>> > moment each type of search is using its own Lucene index. We plan =
on
>> > refactoring the way it works and to combine all indexes into one - =
making
>> > the whole system more robust and with a smaller memory footprint, =
among
>> > other things.
>> >
>> > Assuming the above is true, we are interested in knowing how to do =
this
>> > correctly. Initially all our indexes will be run in one big index, =
but if
>> at
>> > some index size there is a severe performance degradation we would =
like
>> to
>> > handle that correctly by starting a new FSDirectory index to flush =
into,
>> or
>> > by re-indexing and moving large indexes into their own Lucene =
index.
>> >
>> > Are there are any guidelines for measuring or estimating this =
correctly?
>> > what we should be aware of while considering all that? We can't =
assume
>> > anything about the machine running it, so testing won't really tell =
us
>> > much...
>> >
>> > Thanks in advance for any input on this,
>> >
>> > Itamar.
>> >
>> >
>> > =
---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50016-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun 14 08:04:05 2011
Return-Path: <java-user-return-50016-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A879C63E8
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 14 Jun 2011 08:04:05 +0000 (UTC)
Received: (qmail 43276 invoked by uid 500); 14 Jun 2011 08:04:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43225 invoked by uid 500); 14 Jun 2011 08:04:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43217 invoked by uid 99); 14 Jun 2011 08:04:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Jun 2011 08:04:03 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [188.121.53.1] (HELO n1plout04-01.prod.ams1.secureserver.net) (188.121.53.1)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 14 Jun 2011 08:03:56 +0000
Received: (qmail 15567 invoked from network); 14 Jun 2011 08:03:34 -0000
Received: from unknown (79.181.4.147)
  by n1plout04-01.prod.ams1.secureserver.net (188.121.53.1) with ESMTP; 14 Jun 2011 08:03:17 -0000
Message-ID: <4DF715C3.9000209@code972.com>
Date: Tue, 14 Jun 2011 11:03:15 +0300
From: Itamar Syn-Hershko <itamar@code972.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.17) Gecko/20110414 Lightning/1.0b2 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Index size and performance degradation
References: <4DF3C40F.9090703@code972.com>	 <BANLkTi=2U3RTtOq_1oiA_FGBwpiPcVVMyg@mail.gmail.com>	 <BANLkTinHragJQUTX3j+mcdW0K0B73A0T=A@mail.gmail.com>	 <4DF47461.1050004@code972.com> <1308036518.853.79.camel@te-prime>
In-Reply-To: <1308036518.853.79.camel@te-prime>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit

Thanks. Our product is pretty generic and we can't assume much on the 
hardware, as well as on usage. Some users would want low latency, others 
will prefer throughput. My job is to make as little compromise as 
possible...


As for SSD, thats generally a good advice, except they seem to be 
failing quite a lot. For example see: 
http://www.codinghorror.com/blog/2011/05/the-hot-crazy-solid-state-drive-scale.html


On 14/06/2011 10:28, Toke Eskildsen wrote:

> On Sun, 2011-06-12 at 10:10 +0200, Itamar Syn-Hershko wrote:
>> The whole point of my question was to find out if and how to make
>> balancing on the SAME machine. Apparently thats not going to help and at
>> a certain point we will just have to prompt the user to buy more hardware...
> It really depends on your scenario. If you have few concurrent requests
> and are looking to minimize latency, sharding might help; assuming you
> have fast IO and multiple cores. You basically want to saturate all
> available resources for all requests.
>
> On the other hand, if throughput is the issue, sharding on a single
> machine is counter-productive due to increased duplication and merging.
>
>> Out of curiosity, isn't there anything that we can do to avoid that? for
>> instance using memory-mapped files for the indexes? anything that would
>> help us overcome OS limitations of that sort...
> One standard advice for speeding up searches is using SSD's. Our
> (admittedly old) experiments puts SSD-performance near RAM. With the
> prices we have now, SSD's seems like an obvious choice for most setups.
>
> We tried a few performance tests at different index sizes and for us,
> index size vs. performance looked like the power law: Heavy performance
> degradation in the beginning, less later. It makes sense when we look at
> caching and it means that if you do not require stellar performance, you
> can have very large indexes on few machines (cue Hathi Trust).
>
> - Toke Eskildsen
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50017-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun 14 09:02:53 2011
Return-Path: <java-user-return-50017-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 606806D98
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 14 Jun 2011 09:02:53 +0000 (UTC)
Received: (qmail 7550 invoked by uid 500); 14 Jun 2011 09:02:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7485 invoked by uid 500); 14 Jun 2011 09:02:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7477 invoked by uid 99); 14 Jun 2011 09:02:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Jun 2011 09:02:50 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,RFC_ABUSE_POST,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [77.238.189.65] (HELO nm12.bullet.mail.ird.yahoo.com) (77.238.189.65)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 14 Jun 2011 09:02:42 +0000
Received: from [77.238.189.55] by nm12.bullet.mail.ird.yahoo.com with NNFMP; 14 Jun 2011 09:02:20 -0000
Received: from [212.82.108.238] by tm8.bullet.mail.ird.yahoo.com with NNFMP; 14 Jun 2011 09:02:20 -0000
Received: from [127.0.0.1] by omp1003.mail.ird.yahoo.com with NNFMP; 14 Jun 2011 09:02:20 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 734220.4683.bm@omp1003.mail.ird.yahoo.com
Received: (qmail 40799 invoked by uid 60001); 14 Jun 2011 09:02:20 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1308042140; bh=OpA0WOVnKtbuKvPtTRfExbD2iqoje8kqsdZtki9uMlA=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=EGnq3FyGCRle3BLlIryNfMZm1G3HZzFLb6xqPPXH8jcGyC6Cf9EX317zsAgvW0X9qQoYY299CC1YMcFPsLJLFWKWthJqu3qyig3ju5PiHZk4VYk/VGWpw4cGMW/QAB8dcp6MgkhMkF43fhB8R1pE/gHdp2KQhcae1JHeEuxxjkE=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=L1mbHfvw11FFB5Ee5O4eA19ZqGRgKfTT3fC1z3qufcnoxiv9yRXGL4dNjy59bRv/HbDsL/dN0jQpLwMXYEinvpWCp8Ff6WUhBiZ3OcJ+K0ocULgOU7fvXYyEBbT2Fq/DCXJfKMWxIWSMCPHhLvJetzxhu4ad2ioSy/MnNQsrwVM=;
Message-ID: <460783.36785.qm@web29017.mail.ird.yahoo.com>
X-YMail-OSG: y2GvYbMVM1krWFprZVZznJcP2m7NPOXj.MrBZgkwpqotL2i
 WI_7N4Cja2JREHXkSd.wQJ9rQI1bmyakxMdUpic0xSASvQWDtoZAH5Qmb1Zh
 52HVLN05TpM0U4.Snfd_Lnx6EPdEIed_XczWpzEJSyHdSk0sLaDYvQ.kUo1r
 7B0kqcZpa2n2ja5uXy2htXYLnCGBT31xmxVtdTPFeh298KfUMtMi7S_qp6Vw
 QWFjEluKAHzjybz74lsQDcFCcHMe5_fyO_c8.B7GG_mxvsDi4K6ugaKvZZp5
 Jd5z3ABUjJGEE9f4_wuiTNIgcz4XcHes9QiazOg2tZNTWNLqtIFlDnn6QZxX
 QltTxoS8y4Xzfjyu75c1DClITEA988fBFQd_416LsVBRTa5L2Xem60.zMJaM
 CxoWGSu5iDJuRAK8N.oywjhWX1itgRAhQlh_sHH8tTWFgoW.3ZmdfKswwTph
 SwUiD7IOgJDlMTPUhYHuwHmhDQCm5DFM.BLG2Lq0lfjgO.CNlLCzQ9Gocn_Y
 5_.Kqnuj91twA3oz8u.la2epT2b_nJvZ84VrswDiLNBaR1fIIilBjBmEaCWi
 mhrIjxRRJLDUNgci3FBE3zqAspwpauCdzWNJPcwqb3NeEZVDcgo5YV1nk8g-
 -
Received: from [194.116.198.179] by web29017.mail.ird.yahoo.com via HTTP; Tue, 14 Jun 2011 10:02:20 BST
X-Mailer: YahooMailRC/570 YahooMailWebService/0.8.111.304355
References: <4DF3C40F.9090703@code972.com>  <BANLkTi=2U3RTtOq_1oiA_FGBwpiPcVVMyg@mail.gmail.com>  <BANLkTinHragJQUTX3j+mcdW0K0B73A0T=A@mail.gmail.com>  <4DF47461.1050004@code972.com> <1308036518.853.79.camel@te-prime> <4DF715C3.9000209@code972.com>
Date: Tue, 14 Jun 2011 10:02:20 +0100 (BST)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Index size and performance degradation
To: java-user@lucene.apache.org
In-Reply-To: <4DF715C3.9000209@code972.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Partitioning and replication are the keys to handling data and user volumes=
 =0Arespectively. =0AHowever, this approach introduces some other concerns =
over consistency and =0Aavailability of content which I've tried to capture=
 =0Ahere: http://www.slideshare.net/MarkHarwood/patterns-for-large-scale-se=
arch=0AThese consistency concerns may not be an issue for you but I know th=
ey are for =0Asome organisations.=0AMany organisations want everything (lar=
ge data, many users, fast searches, quick =0Aupdates and always-consistent =
views of the very latest content) and the above =0Aslide-deck tries to outl=
ine why this is hard/impossible and the necessary =0Atrade-offs in a system=
's qualities of service. I'd be interested in maintaining =0Athis with any =
other suggestions the community have to offer so that we can use =0Ait to e=
xplain the qualities of any particular engine/configuration and the =0Ajust=
ifications for that design choice.=0A=0ACheers=0AMark=0A=0A=0A----- Origina=
l Message ----=0AFrom: Itamar Syn-Hershko <itamar@code972.com>=0ATo: java-u=
ser@lucene.apache.org=0ASent: Tue, 14 June, 2011 9:03:15=0ASubject: Re: Ind=
ex size and performance degradation=0A=0AThanks. Our product is pretty gene=
ric and we can't assume much on the =0Ahardware, as well as on usage. Some =
users would want low latency, others =0Awill prefer throughput. My job is t=
o make as little compromise as =0Apossible...=0A=0A=0AAs for SSD, thats gen=
erally a good advice, except they seem to be =0Afailing quite a lot. For ex=
ample see: =0Ahttp://www.codinghorror.com/blog/2011/05/the-hot-crazy-solid-=
state-drive-scale.html=0A=0A=0A=0AOn 14/06/2011 10:28, Toke Eskildsen wrote=
:=0A=0A> On Sun, 2011-06-12 at 10:10 +0200, Itamar Syn-Hershko wrote:=0A>> =
The whole point of my question was to find out if and how to make=0A>> bala=
ncing on the SAME machine. Apparently thats not going to help and at=0A>> a=
 certain point we will just have to prompt the user to buy more hardware...=
=0A> It really depends on your scenario. If you have few concurrent request=
s=0A> and are looking to minimize latency, sharding might help; assuming yo=
u=0A> have fast IO and multiple cores. You basically want to saturate all=
=0A> available resources for all requests.=0A>=0A> On the other hand, if th=
roughput is the issue, sharding on a single=0A> machine is counter-producti=
ve due to increased duplication and merging.=0A>=0A>> Out of curiosity, isn=
't there anything that we can do to avoid that? for=0A>> instance using mem=
ory-mapped files for the indexes? anything that would=0A>> help us overcome=
 OS limitations of that sort...=0A> One standard advice for speeding up sea=
rches is using SSD's. Our=0A> (admittedly old) experiments puts SSD-perform=
ance near RAM. With the=0A> prices we have now, SSD's seems like an obvious=
 choice for most setups.=0A>=0A> We tried a few performance tests at differ=
ent index sizes and for us,=0A> index size vs. performance looked like the =
power law: Heavy performance=0A> degradation in the beginning, less later. =
It makes sense when we look at=0A> caching and it means that if you do not =
require stellar performance, you=0A> can have very large indexes on few mac=
hines (cue Hathi Trust).=0A>=0A> - Toke Eskildsen=0A>=0A>=0A> -------------=
--------------------------------------------------------=0A> To unsubscribe=
, e-mail: java-user-unsubscribe@lucene.apache.org=0A> For additional comman=
ds, e-mail: java-user-help@lucene.apache.org=0A>=0A>=0A>=0A=0A-------------=
--------------------------------------------------------=0ATo unsubscribe, =
e-mail: java-user-unsubscribe@lucene.apache.org=0AFor additional commands, =
e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50018-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun 14 09:31:44 2011
Return-Path: <java-user-return-50018-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7E97E6E1B
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 14 Jun 2011 09:31:44 +0000 (UTC)
Received: (qmail 45393 invoked by uid 500); 14 Jun 2011 09:31:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45285 invoked by uid 500); 14 Jun 2011 09:31:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45270 invoked by uid 99); 14 Jun 2011 09:31:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Jun 2011 09:31:40 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dawid.weiss@gmail.com designates 209.85.213.176 as permitted sender)
Received: from [209.85.213.176] (HELO mail-yx0-f176.google.com) (209.85.213.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Jun 2011 09:31:34 +0000
Received: by yxd5 with SMTP id 5so3376656yxd.35
        for <multiple recipients>; Tue, 14 Jun 2011 02:31:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:sender:from:date
         :x-google-sender-auth:message-id:subject:to:content-type;
        bh=AxA13k8+ipdsLbo/O64G4YaXWyK6nBlEjao6FR6brCE=;
        b=Bw+WgBtjeeEdOq85dcyGTTgVp2S8OfkOIwP95Z1bb6+Ioio4BxRj1WFx0sHUaio7uW
         PgdaHBOIHropCip1ZY0QuBvFL5MSrnZBO2m/REEkMY16dszxNAD19JGItsEEl/nNWXHT
         K7PzNTSb2KV5BBrSBllIr87/ylTdW5O/PAjOU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:from:date:x-google-sender-auth:message-id
         :subject:to:content-type;
        b=MIv7j5DP2cg0XFMkkt+6b6SMJSRo3ZT5CfGtztNbDGtA3tSHGwmwG7cXNeeqx1Ku97
         LywtVUMqNk/Z7ARSHhYo6xdLKTqbwUvaNrnmnXBztdri/R4VxWFGJRAFvZdv5DgWZww/
         K9EOzy7OBABi+r82/EPnIek2Tl6RBPPojnooE=
Received: by 10.91.209.3 with SMTP id l3mr7387301agq.29.1308043873070; Tue, 14
 Jun 2011 02:31:13 -0700 (PDT)
MIME-Version: 1.0
Sender: dawid.weiss@gmail.com
Received: by 10.91.147.6 with HTTP; Tue, 14 Jun 2011 02:30:53 -0700 (PDT)
From: Dawid Weiss <dawid.weiss@cs.put.poznan.pl>
Date: Tue, 14 Jun 2011 11:30:53 +0200
X-Google-Sender-Auth: JeC4rSFWIWLFCm7u1OjLJY_ymF8
Message-ID: <BANLkTimTcLY_wF3UVCu=qpuRLgZARkXOGg@mail.gmail.com>
Subject: German compound decomposition (native speakers: help needed).
To: dev@lucene.apache.org, java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

First of all I should probably congratulate my fellow Germans -- Dirk
Nowitzki's outstanding performance during this year's NBA finals will
become part of the history of basketball. As a Pole, I admit I'm
really freaking jealous.

Now... back to the subject.

A number of people have expressed an interest in a decompounding
engine for German recently (we talked about it during Berlin
Buzzwords, among other occasions). I did some research on the subject
(even though I don't know the language):

- a few commercial products exist (usually paired with morphological
analyzers); their quality seems to be very good, http://tagh.com among
others, for example;
- research papers on the subject also exist, including a project by
Torsten Marek that is readily available and uses FSTs to model the
probabilities of word links; unfortunately the evaluation data set
seems to be skewed and is not usable;
- Daniel Naber maintains jWordSplitter project on SourceForge; this is
a greedy heuristic backed by a morphological (static) dictionary; this
works surprisingly well in practice (we cannot measure the quality due
to lack of a proper evaluation data set -- see below).

In the past few days I've played with a number of resources of German
words and n-grams (Google, the dictionary in languagetool and
jWordSplitter, dewac corpus) and my gut feeling is that it is not
possible to provide a "perfect" solution, but something that will work
in a large majority of times is achievable through a heuristic much
like the one implemented in jWordSplitter. The advantage of this
approach is that we don't need a fully blown POS dictionary or deep
contextual disambiguation (and we can treat unknown words to some
degree). Disadvantage: there will be errors resulting from ambiguities
and improper assumptions.

As a start I have (re)implemented a naive heuristic that splits
compounds based on a dictionary of surface forms and a predefined set
of glue morphemes (the dictionary is under CC-SA:
http://creativecommons.org/licenses/by-sa/3.0/, which seems to be
accepted by Apache based on this post:
http://www.apache.org/legal/resolved.html#cc-sa). But in order to
develop it further and improve it, we REALLY need a "golden standard"
file; something that will include known compound splits and serve as
the benchmark we refer to when trying new algorithms or ideas. And
here comes your part: if you are a speaker of German and would like to
help, you are more than welcome to. The project is hosted at github at
the moment, here:

https://github.com/dweiss/compound-splitter

the 'test file' is in src/test/resources/test-compounds.utf8 and
README contains instructions on adding new test cases. You can either
fork the project on github or e-mail your compounds back to me,
whatever. I don't expect a full consensus among humans as to which
splits are legitimate and which are invalid, so you can also review/
comment on the existing test cases. If you're looking for inspiration
on where to get compounds to tag/split, Google n-grams is your friend.
I added a google-ngrams.bycount file that lists surface words with
aggregated counts between 1980 and 2008 or something. Pick a spot on
that list and decompound, decompound :)

If you wish to do something else, there is another file called:

morphy-google-intersect.20000

and this one contains an intersection of words not present in morphy
(the german dictionary we use for decompounding). Lots of these are
foreign words, but there is a fair share of German words (and, hint,
hint, compounds) that are simply newer or inflected in weird ways.

Let's see where we can take this.
Dawid

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50019-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun 14 09:57:09 2011
Return-Path: <java-user-return-50019-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6EB1B64BF
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 14 Jun 2011 09:57:09 +0000 (UTC)
Received: (qmail 77940 invoked by uid 500); 14 Jun 2011 09:57:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77888 invoked by uid 500); 14 Jun 2011 09:57:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77880 invoked by uid 99); 14 Jun 2011 09:57:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Jun 2011 09:57:06 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [85.158.140.195] (HELO mail193.messagelabs.com) (85.158.140.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Jun 2011 09:56:59 +0000
X-VirusChecked: Checked
X-Env-Sender: wzzelfzzel@abas.de
X-Msg-Ref: server-8.tower-193.messagelabs.com!1308045391!45044625!1
X-StarScan-Version: 6.2.17; banners=-,-,-
X-Originating-IP: [212.202.226.202]
Received: (qmail 7605 invoked from network); 14 Jun 2011 09:56:32 -0000
Received: from gate.abas.de (HELO gate.abas.de) (212.202.226.202)
  by server-8.tower-193.messagelabs.com with DHE-RSA-AES256-SHA encrypted SMTP; 14 Jun 2011 09:56:32 -0000
Received: from gate.abas.de (localhost [127.0.0.1])
	by gate.abas.de (8.14.3/8.14.3) with ESMTP id p5E9uU3o031208
	for <java-user@lucene.apache.org>; Tue, 14 Jun 2011 11:56:31 +0200 (CEST)
Received: (from localhost) by gate.abas.de (MSCAN) id 3/gate.abas.de/smtp-gw/mscan; Tue Jun 14 11:56:30 2011
From: Stefan Trcek <wzzelfzzel@abas.de>
To: java-user@lucene.apache.org
Subject: Re: Index size and performance degradation
Date: Tue, 14 Jun 2011 11:56:25 +0200
User-Agent: KMail/1.9.10
References: <4DF3C40F.9090703@code972.com> <4DF504B2.4000105@code972.com> <BANLkTim_sX8CQMknZJwWX4q6pt6Jx5wrWQ@mail.gmail.com>
In-Reply-To: <BANLkTim_sX8CQMknZJwWX4q6pt6Jx5wrWQ@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-ID: <201106141156.25758.wzzelfzzel@abas.de>
X-ABAS-MAIL-MARK: added by mailmarker.abas.de

On Sunday 12 June 2011 22:12:01 Michael McCandless wrote:
> Anyway, I don't think that's a good tradeoff, in general, for our
> users, because very few apps truly require immediate consistency from
> Lucene (can anyone give an example where their app depends on
> immediate consistency...?

For database (enterprise resource planning) applications we are in 
progress of replacing native database queries to lucene queries, 
because lucene offers an efficient combination of fulltext and 
structured (including facets) queries. Til now clients expect that if 
they change something it will be immediately reflected in their "lists" 
aka queries.

If lucene reopen() won't be sufficient in performance (I didn't measure) 
we would solve it by an additional short lived index for new objects, 
which complicates the architecture, or by modifying the merge strategy.

> I think it's better to spend time during reopen so that searches
> aren't slower. 

Absolutely, if you build an internet search engine. For our closed world 
with numbered clients search speed doesn't have that impact. It must 
scale for one client on one cpu core - and buy as many cores as 
necessary.

Stefan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50020-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun 14 09:59:06 2011
Return-Path: <java-user-return-50020-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4AC0F655F
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 14 Jun 2011 09:59:06 +0000 (UTC)
Received: (qmail 84651 invoked by uid 500); 14 Jun 2011 09:59:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84562 invoked by uid 500); 14 Jun 2011 09:59:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84554 invoked by uid 99); 14 Jun 2011 09:59:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Jun 2011 09:59:04 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,RFC_ABUSE_POST,SPF_NEUTRAL,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [121.101.151.224] (HELO nm2.bullet.mail.in.yahoo.com) (121.101.151.224)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 14 Jun 2011 09:58:56 +0000
Received: from [121.101.151.236] by nm2.bullet.mail.in.yahoo.com with NNFMP; 14 Jun 2011 09:58:51 -0000
Received: from [121.101.151.234] by tm1.bullet.mail.in.yahoo.com with NNFMP; 14 Jun 2011 10:00:35 -0000
Received: from [127.0.0.1] by omp1003.mail.in.yahoo.com with NNFMP; 14 Jun 2011 09:59:20 -0000
X-Yahoo-Newman-Id: 923097.48106.bm@omp1003.mail.in.yahoo.com
Received: (qmail 12914 invoked from network); 14 Jun 2011 09:58:33 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=DKIM-Signature:X-Yahoo-Newman-Property:X-YMail-OSG:X-Yahoo-SMTP:Received:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=DBihktPcvW34j1gqYkqJoZV16wkl79Ac8uAhyuAyyw4VXG5HVfiv9FPmm4fkO5kETf2ThqKx0BbvxHOWOJ6bwwJLctBqFaqsCET8DqCZSTIJEAFBD/0qUclnxXEdnIJhPxfy1hquD4lvw+pYF7zUa81GxYpYXWmmSE+lFESz0Ic=  ;
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.in; s=s1024; t=1308045513; bh=Zvfg2ew/3x06MN+uuyDnVFYj8mTFRw9Yi7tjDx9n8cc=; h=X-Yahoo-Newman-Property:X-YMail-OSG:X-Yahoo-SMTP:Received:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE; b=D2O53Q2E2Bwxy8bhYlotwIEmd+RbYXLphkhkudnxCELa9hJxZ+mpl2ZIjAFLAcvb3iUN4lUmMqHHbDYtrEml62b+Q9M5cYduWzNXYrvkAEshxEJ9ED+4uQikFrxan3L9WuFKEGg9ylpY8d4rAHRCRrwzA7Fv2+n8AEknjLPDv7Q=
X-Yahoo-Newman-Property: ymail-3
X-YMail-OSG: ieUllMoVM1kaSnv6IG2RqENf1mGcjQRfxwIAEY0RqYKnuLx
 WFh_YYjP46ECMrQyDBHXNz_SWK3viFmDIxXQwFmb_E1mLNwZ8ULvhHEEWy6i
 mbZD1_EaYbGbGRr5cc4aHqWJC0o70YfxBOoOr09QLScpFAn_WjG1SkGDK4JX
 ydGu655WLAP4n52pRk2jsqwFtB4KJtlsc2m2IVgkldU15.JycMNK.ZxxV3pe
 Iz9mG6kokf_C3bEQoqIeYt6LCjCNQ_L1JpNHxbWpfu9HxEeniwodB5A1DJry
 xMVJsbQKQqbJufZusQfLfdevJ9vzx604zf3a81DUWQaTnyPSou.YCQz4-
X-Yahoo-SMTP: JObyHkuswBBrNSLZp.Ycd7Boqpr_GQ--
Received: from GaneshM (emailgane@121.244.159.130 with login)
        by smtp103.mail.in.yahoo.com with SMTP; 14 Jun 2011 15:28:33 +0530 IST
Message-ID: <A717C85830434834B6DA5906A2AB6C24@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>, <te@statsbiblioteket.dk>
References: <4DF3C40F.9090703@code972.com> <BANLkTi=2U3RTtOq_1oiA_FGBwpiPcVVMyg@mail.gmail.com> <BANLkTinHragJQUTX3j+mcdW0K0B73A0T=A@mail.gmail.com> <4DF47461.1050004@code972.com> <1308036518.853.79.camel@te-prime>
Subject: Re: Index size and performance degradation
Date: Tue, 14 Jun 2011 15:28:33 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.5931
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5931
X-Virus-Checked: Checked by ClamAV on apache.org

Is it a bad idea to keep multiple shards in a single system?

Regards
Ganesh

----- Original Message -----=20
From: "Toke Eskildsen" <te@statsbiblioteket.dk>
To: <java-user@lucene.apache.org>
Sent: Tuesday, June 14, 2011 12:58 PM
Subject: Re: Index size and performance degradation


> On Sun, 2011-06-12 at 10:10 +0200, Itamar Syn-Hershko wrote:
>> The whole point of my question was to find out if and how to make=20
>> balancing on the SAME machine. Apparently thats not going to help and =
at=20
>> a certain point we will just have to prompt the user to buy more =
hardware...
>=20
> It really depends on your scenario. If you have few concurrent =
requests
> and are looking to minimize latency, sharding might help; assuming you
> have fast IO and multiple cores. You basically want to saturate all
> available resources for all requests.
>=20
> On the other hand, if throughput is the issue, sharding on a single
> machine is counter-productive due to increased duplication and =
merging.
>=20
>> Out of curiosity, isn't there anything that we can do to avoid that? =
for=20
>> instance using memory-mapped files for the indexes? anything that =
would=20
>> help us overcome OS limitations of that sort...
>=20
> One standard advice for speeding up searches is using SSD's. Our
> (admittedly old) experiments puts SSD-performance near RAM. With the
> prices we have now, SSD's seems like an obvious choice for most =
setups.
>=20
> We tried a few performance tests at different index sizes and for us,
> index size vs. performance looked like the power law: Heavy =
performance
> degradation in the beginning, less later. It makes sense when we look =
at
> caching and it means that if you do not require stellar performance, =
you
> can have very large indexes on few machines (cue Hathi Trust).
>=20
> - Toke Eskildsen
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50021-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun 14 12:06:14 2011
Return-Path: <java-user-return-50021-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1511F6D8F
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 14 Jun 2011 12:06:14 +0000 (UTC)
Received: (qmail 19536 invoked by uid 500); 14 Jun 2011 12:06:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19473 invoked by uid 500); 14 Jun 2011 12:06:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19439 invoked by uid 99); 14 Jun 2011 12:06:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Jun 2011 12:06:10 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Jun 2011 12:06:06 +0000
Received: by vws7 with SMTP id 7so7065575vws.35
        for <java-user@lucene.apache.org>; Tue, 14 Jun 2011 05:05:45 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.52.95.67 with SMTP id di3mr5217275vdb.196.1308053145236; Tue,
 14 Jun 2011 05:05:45 -0700 (PDT)
Received: by 10.52.162.5 with HTTP; Tue, 14 Jun 2011 05:05:45 -0700 (PDT)
In-Reply-To: <A717C85830434834B6DA5906A2AB6C24@sv.us.sonicwall.com>
References: <4DF3C40F.9090703@code972.com>
	<BANLkTi=2U3RTtOq_1oiA_FGBwpiPcVVMyg@mail.gmail.com>
	<BANLkTinHragJQUTX3j+mcdW0K0B73A0T=A@mail.gmail.com>
	<4DF47461.1050004@code972.com>
	<1308036518.853.79.camel@te-prime>
	<A717C85830434834B6DA5906A2AB6C24@sv.us.sonicwall.com>
Date: Tue, 14 Jun 2011 08:05:45 -0400
Message-ID: <BANLkTi=FUiHdfQHCs6xyqT8s7fsFumBY5A@mail.gmail.com>
Subject: Re: Index size and performance degradation
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Cc: te@statsbiblioteket.dk
Content-Type: text/plain; charset=ISO-8859-1

Hmm, this sounds hairy :)

Are you sure NRTCachingDir won't work for you?

Mike McCandless

http://blog.mikemccandless.com

On Tue, Jun 14, 2011 at 5:58 AM, Ganesh <emailgane@yahoo.co.in> wrote:
> Is it a bad idea to keep multiple shards in a single system?
>
> Regards
> Ganesh
>
> ----- Original Message -----
> From: "Toke Eskildsen" <te@statsbiblioteket.dk>
> To: <java-user@lucene.apache.org>
> Sent: Tuesday, June 14, 2011 12:58 PM
> Subject: Re: Index size and performance degradation
>
>
>> On Sun, 2011-06-12 at 10:10 +0200, Itamar Syn-Hershko wrote:
>>> The whole point of my question was to find out if and how to make
>>> balancing on the SAME machine. Apparently thats not going to help and at
>>> a certain point we will just have to prompt the user to buy more hardware...
>>
>> It really depends on your scenario. If you have few concurrent requests
>> and are looking to minimize latency, sharding might help; assuming you
>> have fast IO and multiple cores. You basically want to saturate all
>> available resources for all requests.
>>
>> On the other hand, if throughput is the issue, sharding on a single
>> machine is counter-productive due to increased duplication and merging.
>>
>>> Out of curiosity, isn't there anything that we can do to avoid that? for
>>> instance using memory-mapped files for the indexes? anything that would
>>> help us overcome OS limitations of that sort...
>>
>> One standard advice for speeding up searches is using SSD's. Our
>> (admittedly old) experiments puts SSD-performance near RAM. With the
>> prices we have now, SSD's seems like an obvious choice for most setups.
>>
>> We tried a few performance tests at different index sizes and for us,
>> index size vs. performance looked like the power law: Heavy performance
>> degradation in the beginning, less later. It makes sense when we look at
>> caching and it means that if you do not require stellar performance, you
>> can have very large indexes on few machines (cue Hathi Trust).
>>
>> - Toke Eskildsen
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50022-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun 14 12:06:39 2011
Return-Path: <java-user-return-50022-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2CB206DC8
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 14 Jun 2011 12:06:39 +0000 (UTC)
Received: (qmail 22097 invoked by uid 500); 14 Jun 2011 12:06:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22050 invoked by uid 500); 14 Jun 2011 12:06:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22042 invoked by uid 99); 14 Jun 2011 12:06:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Jun 2011 12:06:36 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Jun 2011 12:06:30 +0000
Received: by vws7 with SMTP id 7so7065996vws.35
        for <java-user@lucene.apache.org>; Tue, 14 Jun 2011 05:06:09 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.52.95.67 with SMTP id di3mr5217914vdb.196.1308053169707; Tue,
 14 Jun 2011 05:06:09 -0700 (PDT)
Received: by 10.52.162.5 with HTTP; Tue, 14 Jun 2011 05:06:09 -0700 (PDT)
In-Reply-To: <BANLkTi=FUiHdfQHCs6xyqT8s7fsFumBY5A@mail.gmail.com>
References: <4DF3C40F.9090703@code972.com>
	<BANLkTi=2U3RTtOq_1oiA_FGBwpiPcVVMyg@mail.gmail.com>
	<BANLkTinHragJQUTX3j+mcdW0K0B73A0T=A@mail.gmail.com>
	<4DF47461.1050004@code972.com>
	<1308036518.853.79.camel@te-prime>
	<A717C85830434834B6DA5906A2AB6C24@sv.us.sonicwall.com>
	<BANLkTi=FUiHdfQHCs6xyqT8s7fsFumBY5A@mail.gmail.com>
Date: Tue, 14 Jun 2011 08:06:09 -0400
Message-ID: <BANLkTi=UeWzZF+1yTgkAq87vHjyTQ0Z=2Q@mail.gmail.com>
Subject: Re: Index size and performance degradation
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Cc: te@statsbiblioteket.dk
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Sorry, wrong email ;)

Mike McCandless

http://blog.mikemccandless.com

On Tue, Jun 14, 2011 at 8:05 AM, Michael McCandless
<lucene@mikemccandless.com> wrote:
> Hmm, this sounds hairy :)
>
> Are you sure NRTCachingDir won't work for you?
>
> Mike McCandless
>
> http://blog.mikemccandless.com
>
> On Tue, Jun 14, 2011 at 5:58 AM, Ganesh <emailgane@yahoo.co.in> wrote:
>> Is it a bad idea to keep multiple shards in a single system?
>>
>> Regards
>> Ganesh
>>
>> ----- Original Message -----
>> From: "Toke Eskildsen" <te@statsbiblioteket.dk>
>> To: <java-user@lucene.apache.org>
>> Sent: Tuesday, June 14, 2011 12:58 PM
>> Subject: Re: Index size and performance degradation
>>
>>
>>> On Sun, 2011-06-12 at 10:10 +0200, Itamar Syn-Hershko wrote:
>>>> The whole point of my question was to find out if and how to make
>>>> balancing on the SAME machine. Apparently thats not going to help and at
>>>> a certain point we will just have to prompt the user to buy more hardware...
>>>
>>> It really depends on your scenario. If you have few concurrent requests
>>> and are looking to minimize latency, sharding might help; assuming you
>>> have fast IO and multiple cores. You basically want to saturate all
>>> available resources for all requests.
>>>
>>> On the other hand, if throughput is the issue, sharding on a single
>>> machine is counter-productive due to increased duplication and merging.
>>>
>>>> Out of curiosity, isn't there anything that we can do to avoid that? for
>>>> instance using memory-mapped files for the indexes? anything that would
>>>> help us overcome OS limitations of that sort...
>>>
>>> One standard advice for speeding up searches is using SSD's. Our
>>> (admittedly old) experiments puts SSD-performance near RAM. With the
>>> prices we have now, SSD's seems like an obvious choice for most setups.
>>>
>>> We tried a few performance tests at different index sizes and for us,
>>> index size vs. performance looked like the power law: Heavy performance
>>> degradation in the beginning, less later. It makes sense when we look at
>>> caching and it means that if you do not require stellar performance, you
>>> can have very large indexes on few machines (cue Hathi Trust).
>>>
>>> - Toke Eskildsen
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50023-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun 15 09:23:14 2011
Return-Path: <java-user-return-50023-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C3A1641E2
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 15 Jun 2011 09:23:14 +0000 (UTC)
Received: (qmail 85482 invoked by uid 500); 15 Jun 2011 09:23:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85423 invoked by uid 500); 15 Jun 2011 09:23:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85415 invoked by uid 99); 15 Jun 2011 09:23:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jun 2011 09:23:11 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of vbsowmya@gmail.com designates 209.85.213.48 as permitted sender)
Received: from [209.85.213.48] (HELO mail-yw0-f48.google.com) (209.85.213.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jun 2011 09:23:04 +0000
Received: by ywk9 with SMTP id 9so162985ywk.35
        for <java-user@lucene.apache.org>; Wed, 15 Jun 2011 02:22:43 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=fhdcT/Y9jhneuUcdwhAsaB0kUhtZ7KiCW2NoI3AluOc=;
        b=JNClCAr5ZnyOhlvVv2rT3USJBsczcqRLQpEhmDwGrdTe3QSUl2c9VXf/QNWRgyr4k+
         4gESlVAkV+ROEyej83A/K7jdvwH0+tvYsb6sIVrvCSrqwe4jyWpkyZF7pVK0LsmVqd/F
         YFK1v8kps1lhqah1v8/DmqIZ38f+X8Ybwy218=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=fKHW79mbXnVcbH9BnB14j5zswpWcwfFr0Xc0ktVsEaW/Y+Af0BDcRscEFNuOL8AYpn
         uLn0pemLEbhaWH26G/6hVwhAv4UoCwoQxZjXaxRnXtw1JAsCeuhuGnkVNsCezQTGVOoc
         qkdoXL+6WGZi1CoMGH98l3haohbqxE4VvENkc=
Received: by 10.236.145.2 with SMTP id o2mr357660yhj.141.1308129763148; Wed,
 15 Jun 2011 02:22:43 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.236.70.36 with HTTP; Wed, 15 Jun 2011 02:22:23 -0700 (PDT)
In-Reply-To: <BANLkTik8c15OyjQAEP+d_q9HX=9x7sXOxQ@mail.gmail.com>
References: <BANLkTi=QWNJr2zP8GXM28fwze0x6GRN-Gw@mail.gmail.com> <BANLkTik8c15OyjQAEP+d_q9HX=9x7sXOxQ@mail.gmail.com>
From: "Sowmya V.B." <vbsowmya@gmail.com>
Date: Wed, 15 Jun 2011 11:22:23 +0200
Message-ID: <BANLkTi=EjSwCWCTnYhD04tpnL-X028o=9g@mail.gmail.com>
Subject: Re: Boosting a document at query time, based on a field value/range
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf303f65a0da43a404a5bcb14e
X-Virus-Checked: Checked by ClamAV on apache.org

--20cf303f65a0da43a404a5bcb14e
Content-Type: text/plain; charset=UTF-8

Hi

I am not getting the replies to my inbox ...hence the delay in responding.

>>I think you misunderstand Eric's answer, as his suggestion does exactly
what you ask for. Have you tried the "OR **field**:[20 TO 30]^10" method?

Well, my question is partly answered with this clarification. But, I am
still wondering how to do that programmatically.
the (20-30) range is not a fixed range. Its chosen by the user. It can as
well be (12-34) too. I am not able to figure out if there is any function in
the searcher classs, which will enable me give these specifications
...something like... a setboost(), which exists during index time.

S.

On Fri, Jun 10, 2011 at 10:38 AM, Sowmya V.B. <vbsowmya@gmail.com> wrote:

> Hi Erick
>
> Thanks for the response.
>
> I would want the documents with values within #20-30# be ranked above the
> documents with some other values.
> Well, since there might be a case where there are no documents in that
> range, I would also prefer to have other documents listed too, somewhere
> lower down the rankings.
>
> Also, I don't want to do a simple sort on the results what lucene gives,
> with its own ranking function.
> I am looking for a possibility of boosting a given document at query-time,
> based on the values of a particular field : instead of plainly sorting the
> normal lucene results based on this field.
> Is that possible, without going in to the scoring function?
>
> Sowmya.
>
> *************
> I take it from this that you want documents with values #outside# 20-30
> to still be found? In that case you can do something like add a clause
> like:
>
> OR *field*:[20 TO 30]^10
>
> or similar.
>
> Best
> Erick
>
> On Thu, Jun 9, 2011 at 5:10 PM, Sowmya V.B. <vbsowmya@gmail.com> wrote:
>
>> Hi All
>>
>> I have joined the group only today..and began working with lucene only
>> recently.
>>
>> My problem: I want to boost the ranking of certain documents, based on the
>> values of certain fields.
>>
>> For example, if the field has  a range of values from 0 to 100 and the
>> user chooses something like 20 to 30, as an option, along with the query; I
>> want the documents which satisfy that condition (The field value being
>> between 20 and 30) to get a boost during ranking.
>>
>> Is there a way to do that in Lucene? I could not find an understandable
>> explanation in the past mails about this. Hence, starting a fresh thread.
>>
>> Sowmya.
>>
>> --
>> Sowmya V.B.
>> ----------------------------------------------------
>> Losing optimism is blasphemy!
>> http://vbsowmya.wordpress.com
>> ----------------------------------------------------
>>
>
>
>
> --
> Sowmya V.B.
> ----------------------------------------------------
> Losing optimism is blasphemy!
> http://vbsowmya.wordpress.com
> ----------------------------------------------------
>



-- 
Sowmya V.B.
----------------------------------------------------
Losing optimism is blasphemy!
http://vbsowmya.wordpress.com
----------------------------------------------------

--20cf303f65a0da43a404a5bcb14e--

From java-user-return-50024-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun 15 09:42:32 2011
Return-Path: <java-user-return-50024-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3F1F64EB0
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 15 Jun 2011 09:42:32 +0000 (UTC)
Received: (qmail 17072 invoked by uid 500); 15 Jun 2011 09:42:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16909 invoked by uid 500); 15 Jun 2011 09:42:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16901 invoked by uid 99); 15 Jun 2011 09:42:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jun 2011 09:42:29 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of oren.liat@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jun 2011 09:42:23 +0000
Received: by pwi16 with SMTP id 16so340667pwi.35
        for <java-user@lucene.apache.org>; Wed, 15 Jun 2011 02:42:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=c0LmQeQM/fQmDw6hrtr3J5VPVafs6E8zgSi8pEQEz7E=;
        b=qThbBnJ79QDppnMMsNEBBlsv67Mren401EYiSMbeowW60c4kdlJG9tQ1FiqA2tQLAx
         Q/a2ea5z/KwDNJstintdw+8311jQ4D0dwwZ+hhCb9k6aq3XbMNMI2AYJQabcQicqorrx
         m816/l0+BfqgINT+2Y5ec3uXASu8MaiEv2Fdc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=cpCMeBTAPlhB8/P0+d4OG6BGQlTXE9RydURCn94EkOKV6jtWmoWX5XtX8ZeeOccehT
         DQmX41Avn731HzUIBIkU7xzQqGQvSv9U+D872fXyDQSQlFxZOcxLTXROZkWnMjbxm9dx
         ndhWPnpx22psCUZl66ZUmPNKWg1EWRhyieldM=
MIME-Version: 1.0
Received: by 10.68.37.65 with SMTP id w1mr109466pbj.341.1308130923315; Wed, 15
 Jun 2011 02:42:03 -0700 (PDT)
Received: by 10.68.66.195 with HTTP; Wed, 15 Jun 2011 02:42:03 -0700 (PDT)
Date: Wed, 15 Jun 2011 10:42:03 +0100
Message-ID: <BANLkTim+WSsy=0-SdqKPjnDGa0ogdhZ5-w@mail.gmail.com>
Subject: Changing Boosting that was set at indexing time
From: liat oren <oren.liat@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=bcaec520e9cf01003304a5bcf72a

--bcaec520e9cf01003304a5bcf72a
Content-Type: text/plain; charset=ISO-8859-1

Hi,

I indexed 4 million documents and used boosting factors for each document at
indexing time.

I would like to cancel that boosting. Is there a way to do that without
re-indexing all of them?

Many thanks,
Liat

--bcaec520e9cf01003304a5bcf72a--

From java-user-return-50025-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun 15 09:48:56 2011
Return-Path: <java-user-return-50025-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8F5BC4659
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 15 Jun 2011 09:48:56 +0000 (UTC)
Received: (qmail 23571 invoked by uid 500); 15 Jun 2011 09:48:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23525 invoked by uid 500); 15 Jun 2011 09:48:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23517 invoked by uid 99); 15 Jun 2011 09:48:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jun 2011 09:48:53 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [130.225.24.68] (HELO sbexch03.sb.statsbiblioteket.dk) (130.225.24.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jun 2011 09:48:44 +0000
Received: from [130.225.25.23] (130.225.25.23) by
 sbexch03.sb.statsbiblioteket.dk (130.225.24.68) with Microsoft SMTP Server id
 8.3.159.2; Wed, 15 Jun 2011 11:48:24 +0200
Subject: Re: Boosting a document at query time, based on a field value/range
From: Toke Eskildsen <te@statsbiblioteket.dk>
Reply-To: te@statsbiblioteket.dk
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <BANLkTi=EjSwCWCTnYhD04tpnL-X028o=9g@mail.gmail.com>
References: <BANLkTi=QWNJr2zP8GXM28fwze0x6GRN-Gw@mail.gmail.com>
	 <BANLkTik8c15OyjQAEP+d_q9HX=9x7sXOxQ@mail.gmail.com>
	 <BANLkTi=EjSwCWCTnYhD04tpnL-X028o=9g@mail.gmail.com>
Content-Type: text/plain; charset="UTF-8"
Organization: State and University Library, Denmark
Date: Wed, 15 Jun 2011 11:48:24 +0200
Message-ID: <1308131304.23040.23.camel@te-prime>
MIME-Version: 1.0
X-Mailer: Evolution 2.28.3 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, 2011-06-15 at 11:22 +0200, Sowmya V.B. wrote:
> [...] "OR **field**:[20 TO 30]^10"
> 
> Well, my question is partly answered with this clarification. But, I am
> still wondering how to do that programmatically.
> the (20-30) range is not a fixed range. Its chosen by the user. It can as
> well be (12-34) too. I am not able to figure out if there is any function in
> the searcher classs, which will enable me give these specifications
> ...something like... a setboost(), which exists during index time.

The boost is something you do with your query, before it is issued to
the searcher.

If you use the query parser, you can provide the additional query
parameters by concatenating them to the standard user query:
String fullQuery = userQuery 
  + " OR myrange:[" + from + " TO " + to + "30]^" + myBoost;

If you build your Query by code, you can use ConstantScoreRangeQuery or
RangeQuery for the range part, where you can call setBoost(float).

- Toke Eskildsen


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50026-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun 15 10:23:05 2011
Return-Path: <java-user-return-50026-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 56586486D
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 15 Jun 2011 10:23:05 +0000 (UTC)
Received: (qmail 61568 invoked by uid 500); 15 Jun 2011 10:23:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61526 invoked by uid 500); 15 Jun 2011 10:23:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61518 invoked by uid 99); 15 Jun 2011 10:23:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jun 2011 10:23:02 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jun 2011 10:22:55 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 67156D36006
	for <java-user@lucene.apache.org>; Wed, 15 Jun 2011 12:22:34 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 3cgDC9Dtpnrk for <java-user@lucene.apache.org>;
	Wed, 15 Jun 2011 12:22:26 +0200 (CEST)
Received: from VEGA (gate1.marum.de [134.102.237.1])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id B472BD36001
	for <java-user@lucene.apache.org>; Wed, 15 Jun 2011 12:22:25 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <BANLkTi=QWNJr2zP8GXM28fwze0x6GRN-Gw@mail.gmail.com> <BANLkTik8c15OyjQAEP+d_q9HX=9x7sXOxQ@mail.gmail.com> <BANLkTi=EjSwCWCTnYhD04tpnL-X028o=9g@mail.gmail.com>
In-Reply-To: <BANLkTi=EjSwCWCTnYhD04tpnL-X028o=9g@mail.gmail.com>
Subject: RE: Boosting a document at query time, based on a field value/range
Date: Wed, 15 Jun 2011 12:22:33 +0200
Message-ID: <008c01cc2b46$2474ef10$6d5ecd30$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 14.0
Thread-index: AQGacEljcU0AxUX6sHrSEJMs0vEVTAM1gCL6AlktKumU9TYEMA==
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

Query q =3D NumericRangeQuery.newIntRange(...) or Query q =3D new =
TermRangeQuery(....)
(depending on your field type)

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Sowmya V.B. [mailto:vbsowmya@gmail.com]
> Sent: Wednesday, June 15, 2011 11:22 AM
> To: java-user@lucene.apache.org
> Subject: Re: Boosting a document at query time, based on a field =
value/range
>=20
> Hi
>=20
> I am not getting the replies to my inbox ...hence the delay in =
responding.
>=20
> >>I think you misunderstand Eric's answer, as his suggestion does
> >>exactly
> what you ask for. Have you tried the "OR **field**:[20 TO 30]^10" =
method?
>=20
> Well, my question is partly answered with this clarification. But, I =
am still
> wondering how to do that programmatically.
> the (20-30) range is not a fixed range. Its chosen by the user. It can =
as well be
> (12-34) too. I am not able to figure out if there is any function in =
the searcher
> classs, which will enable me give these specifications ...something =
like... a
> setboost(), which exists during index time.
>=20
> S.
>=20
> On Fri, Jun 10, 2011 at 10:38 AM, Sowmya V.B. <vbsowmya@gmail.com>
> wrote:
>=20
> > Hi Erick
> >
> > Thanks for the response.
> >
> > I would want the documents with values within #20-30# be ranked =
above
> > the documents with some other values.
> > Well, since there might be a case where there are no documents in =
that
> > range, I would also prefer to have other documents listed too,
> > somewhere lower down the rankings.
> >
> > Also, I don't want to do a simple sort on the results what lucene
> > gives, with its own ranking function.
> > I am looking for a possibility of boosting a given document at
> > query-time, based on the values of a particular field : instead of
> > plainly sorting the normal lucene results based on this field.
> > Is that possible, without going in to the scoring function?
> >
> > Sowmya.
> >
> > *************
> > I take it from this that you want documents with values #outside#
> > 20-30 to still be found? In that case you can do something like add =
a
> > clause
> > like:
> >
> > OR *field*:[20 TO 30]^10
> >
> > or similar.
> >
> > Best
> > Erick
> >
> > On Thu, Jun 9, 2011 at 5:10 PM, Sowmya V.B. <vbsowmya@gmail.com>
> wrote:
> >
> >> Hi All
> >>
> >> I have joined the group only today..and began working with lucene
> >> only recently.
> >>
> >> My problem: I want to boost the ranking of certain documents, based
> >> on the values of certain fields.
> >>
> >> For example, if the field has  a range of values from 0 to 100 and
> >> the user chooses something like 20 to 30, as an option, along with
> >> the query; I want the documents which satisfy that condition (The
> >> field value being between 20 and 30) to get a boost during ranking.
> >>
> >> Is there a way to do that in Lucene? I could not find an
> >> understandable explanation in the past mails about this. Hence, =
starting a
> fresh thread.
> >>
> >> Sowmya.
> >>
> >> --
> >> Sowmya V.B.
> >> ----------------------------------------------------
> >> Losing optimism is blasphemy!
> >> http://vbsowmya.wordpress.com
> >> ----------------------------------------------------
> >>
> >
> >
> >
> > --
> > Sowmya V.B.
> > ----------------------------------------------------
> > Losing optimism is blasphemy!
> > http://vbsowmya.wordpress.com
> > ----------------------------------------------------
> >
>=20
>=20
>=20
> --
> Sowmya V.B.
> ----------------------------------------------------
> Losing optimism is blasphemy!
> http://vbsowmya.wordpress.com
> ----------------------------------------------------


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50027-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun 15 10:28:39 2011
Return-Path: <java-user-return-50027-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 64C6849EB
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 15 Jun 2011 10:28:39 +0000 (UTC)
Received: (qmail 68068 invoked by uid 500); 15 Jun 2011 10:28:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68023 invoked by uid 500); 15 Jun 2011 10:28:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68015 invoked by uid 99); 15 Jun 2011 10:28:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jun 2011 10:28:37 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of evanchastelet@gmail.com designates 209.85.215.176 as permitted sender)
Received: from [209.85.215.176] (HELO mail-ey0-f176.google.com) (209.85.215.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jun 2011 10:28:29 +0000
Received: by eya28 with SMTP id 28so125675eya.35
        for <java-user@lucene.apache.org>; Wed, 15 Jun 2011 03:28:08 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:subject:from:to:in-reply-to:references
         :content-type:date:message-id:mime-version:x-mailer
         :content-transfer-encoding;
        bh=PpE+cSXVVV4hp8yzUyerlv3Xi8LlWhylEI/P/S66uqY=;
        b=XygtFcQRXdnLwIF5UEAKqQ3w3bOBP3RKMBM8oRY4Q/TsHzP5YEY6kpJN5ZetprQ8K/
         +doaljTyFmlOS3e8gpYK1bqQUoZdm3ttK/LepecB7B0yz74ljPU8jpO6MeVrmXyWO9wD
         u4xTybqTw8LBX96nM/hPrhS5+RIuvWmgmIXTQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=subject:from:to:in-reply-to:references:content-type:date:message-id
         :mime-version:x-mailer:content-transfer-encoding;
        b=pidBSA824NIMGkqevh2cbnNAgY34d9KXkM5tntMeDuCpPKvR3kWzxgz7sS0fClwfo6
         3u+WW3jsC2j56qvuonal169DyWoF19v9mhOrhWquFmtDGYVaS5e3KVCDgBKJ758bsQ94
         xn8XRC3YMwkRsJutWcyB+X5Mlp6gqCRQs+yKE=
Received: by 10.14.48.6 with SMTP id u6mr177634eeb.37.1308133688118;
        Wed, 15 Jun 2011 03:28:08 -0700 (PDT)
Received: from [192.168.2.132] (g214168.upc-g.chello.nl [80.57.214.168])
        by mx.google.com with ESMTPS id y6sm282511eem.4.2011.06.15.03.28.06
        (version=SSLv3 cipher=OTHER);
        Wed, 15 Jun 2011 03:28:07 -0700 (PDT)
Subject: Re: Boosting a document at query time, based on a field value/range
From: Elmer <evanchastelet@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <BANLkTi=QWNJr2zP8GXM28fwze0x6GRN-Gw@mail.gmail.com>
References: <BANLkTi=QWNJr2zP8GXM28fwze0x6GRN-Gw@mail.gmail.com>
Content-Type: text/plain; charset="UTF-8"
Date: Wed, 15 Jun 2011 12:28:05 +0200
Message-ID: <1308133685.19118.8.camel@elmer-P35-DS3P>
Mime-Version: 1.0
X-Mailer: Evolution 2.32.2 
Content-Transfer-Encoding: 7bit

Let's try again ;)

If I understand you correctly, you want the returned results to include
all documents matching some query, also documents that not satisfy the
specified range ("like 20 to 30"), but results that satisfy this range
should appear higher in the list.

If so, first you have to find out how you can build a range query.
Enough documentation on that. This results in a RangeQuery, let's call
it R.
I assume that the user can enter its search query (words) in another
field. For this you create another query (for example by using the
QueryParser), let's call this one Q. 
Now you have 2 queries (Q and R) which needs to be combined in a Boolean
query, so you get a boolean query: Q OR R
This can be done by specifying Q as boolean 'should' clause and R as
boolean 'should' clause. The BooleanQuery is the one to be used, and
documents matching the entered range will appear higher, because it
matches both clauses, and docs matching Q, but are outside that range
only match the first clause.

Br,
Elmer


On Thu, 2011-06-09 at 17:10 +0200, Sowmya V.B. wrote:
> Hi All
> 
> I have joined the group only today..and began working with lucene only
> recently.
> 
> My problem: I want to boost the ranking of certain documents, based on the
> values of certain fields.
> 
> For example, if the field has  a range of values from 0 to 100 and the user
> chooses something like 20 to 30, as an option, along with the query; I want
> the documents which satisfy that condition (The field value being between 20
> and 30) to get a boost during ranking.
> 
> Is there a way to do that in Lucene? I could not find an understandable
> explanation in the past mails about this. Hence, starting a fresh thread.
> 
> Sowmya.
> 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50028-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun 15 10:34:45 2011
Return-Path: <java-user-return-50028-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7A317409A
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 15 Jun 2011 10:34:45 +0000 (UTC)
Received: (qmail 74460 invoked by uid 500); 15 Jun 2011 10:34:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74419 invoked by uid 500); 15 Jun 2011 10:34:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74411 invoked by uid 99); 15 Jun 2011 10:34:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jun 2011 10:34:43 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of evanchastelet@gmail.com designates 209.85.215.48 as permitted sender)
Received: from [209.85.215.48] (HELO mail-ew0-f48.google.com) (209.85.215.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jun 2011 10:34:33 +0000
Received: by ewy22 with SMTP id 22so129062ewy.35
        for <java-user@lucene.apache.org>; Wed, 15 Jun 2011 03:34:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:subject:from:to:in-reply-to:references
         :content-type:date:message-id:mime-version:x-mailer
         :content-transfer-encoding;
        bh=X5zhNIckzd5jhV5EPXk5x+v/XJa5NA7/slHpwzddeOY=;
        b=P04k7w7PFhpdgr5BQes63p+aPxGp/V5RhSG8lyTu2R2TXE59qY0Y8snzXhr8W1E3ka
         umArSmd4QHEaOPWfgpEBMJkUeMKVFj5hVttKndY+FET9wteQOHLkIXFB0eLKMSvpFUT+
         re2YdR0eVPtqyzd1xydav+yQ3e2bPGPi+znoI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=subject:from:to:in-reply-to:references:content-type:date:message-id
         :mime-version:x-mailer:content-transfer-encoding;
        b=V/viCZCsSEmtpUNnLgeFYYMVgy1ILQ3nlS0xpt61Ht2thPw6SjwCBUoRIx/6sg9w6m
         NiRvP9gZRn1zAK2Skx/mlSED5vea78uYmYQ2/ICQcqSOKPJonINJLm49zSLqQlEN3ht0
         vXMBsQefrE8h2LHarAzFcWGhlQbxZM5wHC8Jc=
Received: by 10.213.8.198 with SMTP id i6mr1037785ebi.111.1308134053618;
        Wed, 15 Jun 2011 03:34:13 -0700 (PDT)
Received: from [192.168.2.132] (g214168.upc-g.chello.nl [80.57.214.168])
        by mx.google.com with ESMTPS id b19sm280197eec.22.2011.06.15.03.34.12
        (version=SSLv3 cipher=OTHER);
        Wed, 15 Jun 2011 03:34:12 -0700 (PDT)
Subject: Re: Boosting a document at query time, based on a field value/range
From: Elmer <evanchastelet@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <1308133685.19118.8.camel@elmer-P35-DS3P>
References: <BANLkTi=QWNJr2zP8GXM28fwze0x6GRN-Gw@mail.gmail.com>
	 <1308133685.19118.8.camel@elmer-P35-DS3P>
Content-Type: text/plain; charset="UTF-8"
Date: Wed, 15 Jun 2011 12:34:11 +0200
Message-ID: <1308134051.19118.11.camel@elmer-P35-DS3P>
Mime-Version: 1.0
X-Mailer: Evolution 2.32.2 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hmm, something went wrong. My mail client swapped dates or displayed
your initial question as new :? Threading fail ;)
Sorry for this :)

On Wed, 2011-06-15 at 12:28 +0200, Elmer wrote:
> Let's try again ;)
> 
> If I understand you correctly, you want the returned results to include
> all documents matching some query, also documents that not satisfy the
> specified range ("like 20 to 30"), but results that satisfy this range
> should appear higher in the list.
> 
> If so, first you have to find out how you can build a range query.
> Enough documentation on that. This results in a RangeQuery, let's call
> it R.
> I assume that the user can enter its search query (words) in another
> field. For this you create another query (for example by using the
> QueryParser), let's call this one Q. 
> Now you have 2 queries (Q and R) which needs to be combined in a Boolean
> query, so you get a boolean query: Q OR R
> This can be done by specifying Q as boolean 'should' clause and R as
> boolean 'should' clause. The BooleanQuery is the one to be used, and
> documents matching the entered range will appear higher, because it
> matches both clauses, and docs matching Q, but are outside that range
> only match the first clause.
> 
> Br,
> Elmer
> 
> 
> On Thu, 2011-06-09 at 17:10 +0200, Sowmya V.B. wrote:
> > Hi All
> > 
> > I have joined the group only today..and began working with lucene only
> > recently.
> > 
> > My problem: I want to boost the ranking of certain documents, based on the
> > values of certain fields.
> > 
> > For example, if the field has  a range of values from 0 to 100 and the user
> > chooses something like 20 to 30, as an option, along with the query; I want
> > the documents which satisfy that condition (The field value being between 20
> > and 30) to get a boost during ranking.
> > 
> > Is there a way to do that in Lucene? I could not find an understandable
> > explanation in the past mails about this. Hence, starting a fresh thread.
> > 
> > Sowmya.
> > 
> 
> 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50029-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun 15 11:38:37 2011
Return-Path: <java-user-return-50029-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id AC05146F4
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 15 Jun 2011 11:38:37 +0000 (UTC)
Received: (qmail 59321 invoked by uid 500); 15 Jun 2011 11:38:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59267 invoked by uid 500); 15 Jun 2011 11:38:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59250 invoked by uid 99); 15 Jun 2011 11:38:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jun 2011 11:38:35 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of shalinmangar@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jun 2011 11:38:29 +0000
Received: by bwz8 with SMTP id 8so589662bwz.35
        for <java-user@lucene.apache.org>; Wed, 15 Jun 2011 04:38:07 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=ZjoEVQAEzmERTbOG3cplhYJaLed2ddMwP91Pc+sZDZ8=;
        b=FwUzm4xAKiJ/dQ5uNvWGWg4nfEj4iLA/zo57beMHjG0wQaYBTjhsiNwYuhyXEDi08G
         G8ufnPb6+LwyhF1eykCvUtkawuhAk+phcmlvqhoIJDfVVwZnu9hb8dGdb2HQHmeE8TJk
         +QqlzXTYTTOr64BqpUDuZ1f18JlD0mPA1zixU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=l8d8/u9KRpO1lHnAM6WvxSVD8NV6L9VZqgsF8TKFCYLQLOn/PfLQpMKNQuOZir+vam
         AJa1ORSTN8Ek3NgLeLvjyYtwKumhjDG2JhiwSMo3BtpxwEr/8FjRUXJEVwRVOOUtvYuy
         wYNtwYTZTnq6U7onacHprdIcxZlhyd6kyktAE=
MIME-Version: 1.0
Received: by 10.204.187.129 with SMTP id cw1mr423249bkb.80.1308137887614; Wed,
 15 Jun 2011 04:38:07 -0700 (PDT)
Received: by 10.204.78.207 with HTTP; Wed, 15 Jun 2011 04:38:07 -0700 (PDT)
Date: Wed, 15 Jun 2011 17:08:07 +0530
Message-ID: <BANLkTimkT8HqwYPEmr2QHSpOAG_irPhgGw@mail.gmail.com>
Subject: Merging with writer open on source index?
From: Shalin Shekhar Mangar <shalinmangar@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf3024505f1bc83804a5be96d4

--20cf3024505f1bc83804a5be96d4
Content-Type: text/plain; charset=UTF-8

Hello,

IndexWriter.addIndexes(Directory...) method says that the index in each
directory must not be changed (opened by a writer) while this method is
running. However, IndexWriter.addIndexes(IndexReader...) does not say any
such thing. Would I be correct in assuming that since an IndexReader has a
static snapshot of the index, merging using addIndexes(IndexReader...) is
safe even if the source index has a writer open?

-- 
Regards,
Shalin Shekhar Mangar.

--20cf3024505f1bc83804a5be96d4--

From java-user-return-50030-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun 15 13:00:21 2011
Return-Path: <java-user-return-50030-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 620CE4869
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 15 Jun 2011 13:00:21 +0000 (UTC)
Received: (qmail 10094 invoked by uid 500); 15 Jun 2011 13:00:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10054 invoked by uid 500); 15 Jun 2011 13:00:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10046 invoked by uid 99); 15 Jun 2011 13:00:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jun 2011 13:00:18 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of solmyr72@gmail.com designates 209.85.215.176 as permitted sender)
Received: from [209.85.215.176] (HELO mail-ey0-f176.google.com) (209.85.215.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jun 2011 13:00:11 +0000
Received: by eya28 with SMTP id 28so191456eya.35
        for <java-user@lucene.apache.org>; Wed, 15 Jun 2011 05:59:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=Z+vacmmRf25wlCVUcoXx6I5oHFp1eEhfHGasF2qgf6Q=;
        b=E7laOm32azxWyHklwNusMUA4Y3NDXyhZAWdLvWCN7EWoHQNrsyNleQl7EJ6UFiBFVG
         FBmdiNEICvygNgvT25K3t0KvmuoofGHNKIVSbG/kOHpW0IA2eylM0avsALkZQPuBQWaJ
         fZNSVM8kMRVWJGj0rTV7Zlc4+o8jBqigtmvXg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=P2OVtd+MDMBkGHPU2GY4RufWqKyVlCsT8gbWd+yJTx2Q04EFsf3T9xKwptAk5VJfsV
         qPP39OtbbTcvqtFDg1f+j77z/+kJDBGlPHu07oq+T4srXMOq5FV1Rvv2in0lDQW3Vfzi
         hqbtQ9oaxGXGieysgPynSxWcF0i/gbIXiVopY=
MIME-Version: 1.0
Received: by 10.14.9.152 with SMTP id 24mr228974eet.46.1308142791123; Wed, 15
 Jun 2011 05:59:51 -0700 (PDT)
Received: by 10.14.94.198 with HTTP; Wed, 15 Jun 2011 05:59:50 -0700 (PDT)
Date: Wed, 15 Jun 2011 15:59:50 +0300
Message-ID: <BANLkTin4SwwXoP8jH=jJZUaPSpHtSHU=Hw@mail.gmail.com>
Subject: Large index merging/optimization?
From: sol myr <solmyr72@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Our Lucene index grew to about 4 GB .
Unfortunately it brought up a performance problem of slow file merging.
We have:
1. A writer thread: once an Hour it looks for modified documents, and
updates the Lucene index.
Usually there are only few modifications, but sometimes we switch the
entire content and re-index everything.

2. The default Lucene Merge thread (ConcurrentMergeScheduler)

Usually it works great. But every several hours the
'ConcurrentMergeScheduler' thread gets stuck (for hours - I'm guessing
it got to the point where it needs to merge large files).
During this, our Writer thread is stuck (waiting on a lock), so users
will see stale data.

My questions please:

1. Is there any configuration that would either speed up file merging,
or allow IndexWriter to write simultaneously?

2. And when do I call 'optimize'?
Won't it be another very operation, that holds the 'write' lock and
prevents updates?

Thanks:)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50031-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun 15 13:36:08 2011
Return-Path: <java-user-return-50031-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 680F24D55
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 15 Jun 2011 13:36:08 +0000 (UTC)
Received: (qmail 79031 invoked by uid 500); 15 Jun 2011 13:36:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78993 invoked by uid 500); 15 Jun 2011 13:36:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78985 invoked by uid 99); 15 Jun 2011 13:36:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jun 2011 13:36:05 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jun 2011 13:35:59 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id B92AAD36007
	for <java-user@lucene.apache.org>; Wed, 15 Jun 2011 15:35:36 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 6iJ5FKhIliVC for <java-user@lucene.apache.org>;
	Wed, 15 Jun 2011 15:35:31 +0200 (CEST)
Received: from VEGA (gate1.marum.de [134.102.237.1])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 8C3A2D36006
	for <java-user@lucene.apache.org>; Wed, 15 Jun 2011 15:35:31 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <BANLkTimkT8HqwYPEmr2QHSpOAG_irPhgGw@mail.gmail.com>
In-Reply-To: <BANLkTimkT8HqwYPEmr2QHSpOAG_irPhgGw@mail.gmail.com>
Subject: RE: Merging with writer open on source index?
Date: Wed, 15 Jun 2011 15:35:39 +0200
Message-ID: <00bb01cc2b61$1e14e650$5a3eb2f0$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 14.0
Thread-index: AQG0VrTcoeCplhmeiG+NWzp5G5bMEJTuFMxQ
Content-Language: de

Yes.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Shalin Shekhar Mangar [mailto:shalinmangar@gmail.com]
> Sent: Wednesday, June 15, 2011 1:38 PM
> To: java-user@lucene.apache.org
> Subject: Merging with writer open on source index?
>=20
> Hello,
>=20
> IndexWriter.addIndexes(Directory...) method says that the index in =
each
> directory must not be changed (opened by a writer) while this method =
is
> running. However, IndexWriter.addIndexes(IndexReader...) does not say
> any such thing. Would I be correct in assuming that since an =
IndexReader has
> a static snapshot of the index, merging using =
addIndexes(IndexReader...) is
> safe even if the source index has a writer open?
>=20
> --
> Regards,
> Shalin Shekhar Mangar.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50032-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun 15 15:37:40 2011
Return-Path: <java-user-return-50032-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8BB94421B
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 15 Jun 2011 15:37:40 +0000 (UTC)
Received: (qmail 16432 invoked by uid 500); 15 Jun 2011 15:37:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16344 invoked by uid 500); 15 Jun 2011 15:37:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16336 invoked by uid 99); 15 Jun 2011 15:37:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jun 2011 15:37:38 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jun 2011 15:37:31 +0000
Received: by iwr19 with SMTP id 19so572474iwr.35
        for <java-user@lucene.apache.org>; Wed, 15 Jun 2011 08:37:11 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=htY9Cx1zWWurhL3NUxvD/Flie85D7dStiCtBn2R+6LA=;
        b=xOMrNmQaxg6uppLP5l2Ox24f+1WGuo+RJxQdzrcyneB/HRvrR5nodYY+DJwARVglZL
         e4cRf1JirluQzk6oLPSvSUeovogsAqISDnx4v8+5ceXOMnIcEhWJejccXOABSjdz6pN2
         aJhda6M0HuglDcZKQ7IIhcm62CA58PesDhiAk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=dtafyXuXJFuhAvxYIHHAcBW+qW86aWlqvP/LLueAeu3rsvk0f7iFFDECwsLmOGg9tZ
         1grlsLphiKtTX7XRa8jmX2OuNd46/uV+tdd6B7ezJSrd6XtiQ65Pzofz6CU7gTEpYe+Z
         T3qrV1HELoNzCY49oFvAMaNKMhRPtaUWuMAeQ=
Received: by 10.231.207.148 with SMTP id fy20mr523241ibb.186.1308152231144;
 Wed, 15 Jun 2011 08:37:11 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.199.148 with HTTP; Wed, 15 Jun 2011 08:36:51 -0700 (PDT)
In-Reply-To: <BANLkTim+WSsy=0-SdqKPjnDGa0ogdhZ5-w@mail.gmail.com>
References: <BANLkTim+WSsy=0-SdqKPjnDGa0ogdhZ5-w@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Wed, 15 Jun 2011 16:36:51 +0100
Message-ID: <BANLkTi=kJYhD8fL7tcVSXKVg2FAF5=cwUg@mail.gmail.com>
Subject: Re: Changing Boosting that was set at indexing time
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

Don't think so.  The boost info is encoded and stored at index time.


--
Ian.


On Wed, Jun 15, 2011 at 10:42 AM, liat oren <oren.liat@gmail.com> wrote:
> Hi,
>
> I indexed 4 million documents and used boosting factors for each document at
> indexing time.
>
> I would like to cancel that boosting. Is there a way to do that without
> re-indexing all of them?
>
> Many thanks,
> Liat
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50033-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun 15 15:44:26 2011
Return-Path: <java-user-return-50033-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0B1F444E5
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 15 Jun 2011 15:44:26 +0000 (UTC)
Received: (qmail 37196 invoked by uid 500); 15 Jun 2011 15:44:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37155 invoked by uid 500); 15 Jun 2011 15:44:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37147 invoked by uid 99); 15 Jun 2011 15:44:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jun 2011 15:44:23 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vbsowmya@gmail.com designates 209.85.213.176 as permitted sender)
Received: from [209.85.213.176] (HELO mail-yx0-f176.google.com) (209.85.213.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jun 2011 15:44:17 +0000
Received: by yxd5 with SMTP id 5so475739yxd.35
        for <java-user@lucene.apache.org>; Wed, 15 Jun 2011 08:43:57 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=dNaArqlKnFHtS5/ZWP6/DNqHFgHfBkMYzT4GrBPnq0g=;
        b=eAaraWMZeKlURSTVJ/VlN55nu/fjPBisNk/jM2uFKVe1dg721d3RQ44DiqjTLuOg83
         gXEWJyakoiJKLuFrRmVOQeysJ0Fcx/6GYd6h1HDRbZO1Jb61MuG4R3etqs0wNDdPwRts
         vXOgSuFRCW2YdkdEtCuIednGfXxNk5bOIMu2A=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=VUDX/HCqRnahcVLn4/UryWg/C3E+3hmlJTry+2MYwVOGTMkfAyMDcfA457elwLdWU4
         ssA3091yghsaPPcluxhHh2LUshhJXWLaKLcsmeTxxJh5/r4+Lx7sQwtyADqF/plGRMjJ
         Ig+TPZ/Fq3mS7n0yT30OJwoK2WM9Tmdyj+HEc=
Received: by 10.236.161.234 with SMTP id w70mr1070212yhk.74.1308152637092;
 Wed, 15 Jun 2011 08:43:57 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.236.70.36 with HTTP; Wed, 15 Jun 2011 08:43:37 -0700 (PDT)
In-Reply-To: <BANLkTi=EjSwCWCTnYhD04tpnL-X028o=9g@mail.gmail.com>
References: <BANLkTi=QWNJr2zP8GXM28fwze0x6GRN-Gw@mail.gmail.com>
 <BANLkTik8c15OyjQAEP+d_q9HX=9x7sXOxQ@mail.gmail.com> <BANLkTi=EjSwCWCTnYhD04tpnL-X028o=9g@mail.gmail.com>
From: "Sowmya V.B." <vbsowmya@gmail.com>
Date: Wed, 15 Jun 2011 17:43:37 +0200
Message-ID: <BANLkTiku0LoPxKyUtvOyBDNi_H0MROnqtA@mail.gmail.com>
Subject: Re: Boosting a document at query time, based on a field value/range
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf30563f473ef3d204a5c20571

--20cf30563f473ef3d204a5c20571
Content-Type: text/plain; charset=UTF-8

Hi

Thanks for the tip.

I tried what you suggested. But, I get the same results as filtering the
results on the range of values of a given field, but with different scores
now.

1) Here is an example query I gave to Query parser:

newtextQuery = textQuery + "  OR " +  field +":[" + frompercent+ " TO " +
topercent + "]^" + myBoost;
(Where textQuery is what the user gave, field, frompercent, topercent,
myboost : are the variables in the code)

A Lucene query for this was something like:
Query New: ((text:space title:space text.stem:space) field4:[1.0 TO
37.0]^10.0)

2) Here is what I did when I used a filter:
-used a longtrierangefilter, to filter results based on the range obtained
by "frompercent" to "topercent", for the same query

Basically, the results for both the methods are the same ranked documents,
albeit with different scores.

Am I missing something here??



-----------------------
The boost is something you do with your query, before it is issued to
the searcher.

If you use the query parser, you can provide the *additional* query
parameters by concatenating them to the standard user query:
String fullQuery = userQuery
  + " OR myrange:[" + from + " TO " + to + "30]^" + myBoost;

If you build your Query by code, you can use ConstantScoreRangeQuery or
RangeQuery for the range part, where you can call setBoost(float).

- Toke Eskildsen


On Wed, Jun 15, 2011 at 11:22 AM, Sowmya V.B. <vbsowmya@gmail.com> wrote:

> Hi
>
> I am not getting the replies to my inbox ...hence the delay in responding.
>
> >>I think you misunderstand Eric's answer, as his suggestion does exactly
> what you ask for. Have you tried the "OR **field**:[20 TO 30]^10" method?
>
> Well, my question is partly answered with this clarification. But, I am
> still wondering how to do that programmatically.
> the (20-30) range is not a fixed range. Its chosen by the user. It can as
> well be (12-34) too. I am not able to figure out if there is any function in
> the searcher classs, which will enable me give these specifications
> ...something like... a setboost(), which exists during index time.
>
> S.
>
> On Fri, Jun 10, 2011 at 10:38 AM, Sowmya V.B. <vbsowmya@gmail.com> wrote:
>
>> Hi Erick
>>
>> Thanks for the response.
>>
>> I would want the documents with values within #20-30# be ranked above the
>> documents with some other values.
>> Well, since there might be a case where there are no documents in that
>> range, I would also prefer to have other documents listed too, somewhere
>> lower down the rankings.
>>
>> Also, I don't want to do a simple sort on the results what lucene gives,
>> with its own ranking function.
>> I am looking for a possibility of boosting a given document at query-time,
>> based on the values of a particular field : instead of plainly sorting the
>> normal lucene results based on this field.
>> Is that possible, without going in to the scoring function?
>>
>> Sowmya.
>>
>> *************
>> I take it from this that you want documents with values #outside# 20-30
>> to still be found? In that case you can do something like add a clause
>> like:
>>
>> OR *field*:[20 TO 30]^10
>>
>> or similar.
>>
>> Best
>> Erick
>>
>> On Thu, Jun 9, 2011 at 5:10 PM, Sowmya V.B. <vbsowmya@gmail.com> wrote:
>>
>>> Hi All
>>>
>>> I have joined the group only today..and began working with lucene only
>>> recently.
>>>
>>> My problem: I want to boost the ranking of certain documents, based on
>>> the values of certain fields.
>>>
>>> For example, if the field has  a range of values from 0 to 100 and the
>>> user chooses something like 20 to 30, as an option, along with the query; I
>>> want the documents which satisfy that condition (The field value being
>>> between 20 and 30) to get a boost during ranking.
>>>
>>> Is there a way to do that in Lucene? I could not find an understandable
>>> explanation in the past mails about this. Hence, starting a fresh thread.
>>>
>>> Sowmya.
>>>
>>> --
>>> Sowmya V.B.
>>> ----------------------------------------------------
>>> Losing optimism is blasphemy!
>>> http://vbsowmya.wordpress.com
>>> ----------------------------------------------------
>>>
>>
>>
>>
>> --
>> Sowmya V.B.
>> ----------------------------------------------------
>> Losing optimism is blasphemy!
>> http://vbsowmya.wordpress.com
>> ----------------------------------------------------
>>
>
>
>
> --
> Sowmya V.B.
> ----------------------------------------------------
> Losing optimism is blasphemy!
> http://vbsowmya.wordpress.com
> ----------------------------------------------------
>



-- 
Sowmya V.B.
----------------------------------------------------
Losing optimism is blasphemy!
http://vbsowmya.wordpress.com
----------------------------------------------------

--20cf30563f473ef3d204a5c20571--

From java-user-return-50034-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun 15 15:45:25 2011
Return-Path: <java-user-return-50034-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 55EF647F9
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 15 Jun 2011 15:45:25 +0000 (UTC)
Received: (qmail 41411 invoked by uid 500); 15 Jun 2011 15:45:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41308 invoked by uid 500); 15 Jun 2011 15:45:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41300 invoked by uid 99); 15 Jun 2011 15:45:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jun 2011 15:45:22 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jun 2011 15:45:15 +0000
Received: by iwr19 with SMTP id 19so581502iwr.35
        for <java-user@lucene.apache.org>; Wed, 15 Jun 2011 08:44:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=JSNiGJJyAlTwrPN8LF8g4T9Fy2DI2W9qrpzIidKyDyg=;
        b=OCISt1HsP0qeWPYewAsuPT0A8w9uUCFkCkP9nb078w06qKXE34n38PObQfFD1VwFzt
         A+rGzRjNlhFo5525C+U4EuV2WpOlbyHjf0Po0qDM1rs+LgzKb/8XF29QHoX7IiCAWXSM
         fgohJF8dzOMrGlX606KR2ss41zWtZ3csz1HJw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=mJqckK9arqix3XfshjvBMlYM7y5bWIqKMKo+eG68OVLqKxobz/8uXmQqk3kpfkTjuS
         9rsV1MBPxWCu4zx9I6MYlaKPaFt8ucLc53wo6WbvU7m/teV1xFQ1wzOs1DC3QncRVSvm
         YmZtR1fJc6FIoDEfaky8RJtKuz6r4sdaQwQws=
Received: by 10.231.25.94 with SMTP id y30mr563816ibb.61.1308152694123; Wed,
 15 Jun 2011 08:44:54 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.199.148 with HTTP; Wed, 15 Jun 2011 08:44:34 -0700 (PDT)
In-Reply-To: <BANLkTin4SwwXoP8jH=jJZUaPSpHtSHU=Hw@mail.gmail.com>
References: <BANLkTin4SwwXoP8jH=jJZUaPSpHtSHU=Hw@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Wed, 15 Jun 2011 16:44:34 +0100
Message-ID: <BANLkTin0Atsdk8Rb7yf-Ad4jN8yHsqkMmA@mail.gmail.com>
Subject: Re: Large index merging/optimization?
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Waits of several hours on a 4Gb index sounds very unlikely.  Are you
sure there isn't something else going on that is blocking things?
What version of lucene?  Decent, error-free, hardware?

As for optimize, I'd skip it altogether, or schedule it occasionally
when there is no or low activity on the index.


--
Ian.


On Wed, Jun 15, 2011 at 1:59 PM, sol myr <solmyr72@gmail.com> wrote:
> Hi,
>
> Our Lucene index grew to about 4 GB .
> Unfortunately it brought up a performance problem of slow file merging.
> We have:
> 1. A writer thread: once an Hour it looks for modified documents, and
> updates the Lucene index.
> Usually there are only few modifications, but sometimes we switch the
> entire content and re-index everything.
>
> 2. The default Lucene Merge thread (ConcurrentMergeScheduler)
>
> Usually it works great. But every several hours the
> 'ConcurrentMergeScheduler' thread gets stuck (for hours - I'm guessing
> it got to the point where it needs to merge large files).
> During this, our Writer thread is stuck (waiting on a lock), so users
> will see stale data.
>
> My questions please:
>
> 1. Is there any configuration that would either speed up file merging,
> or allow IndexWriter to write simultaneously?
>
> 2. And when do I call 'optimize'?
> Won't it be another very operation, that holds the 'write' lock and
> prevents updates?
>
> Thanks:)
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50035-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun 15 17:14:53 2011
Return-Path: <java-user-return-50035-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CD15045AE
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 15 Jun 2011 17:14:53 +0000 (UTC)
Received: (qmail 98915 invoked by uid 500); 15 Jun 2011 17:14:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98855 invoked by uid 500); 15 Jun 2011 17:14:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98846 invoked by uid 99); 15 Jun 2011 17:14:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jun 2011 17:14:51 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of oren.liat@gmail.com designates 209.85.210.48 as permitted sender)
Received: from [209.85.210.48] (HELO mail-pz0-f48.google.com) (209.85.210.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jun 2011 17:14:43 +0000
Received: by pzk10 with SMTP id 10so608393pzk.35
        for <java-user@lucene.apache.org>; Wed, 15 Jun 2011 10:14:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=8LW0BVHY6xbECW4lS+5XIij51bNvRKpgIyX+k5Q0nFU=;
        b=QPBFTCo7yX+8KCTGjMXwvQFNImwm3EtxZvYYmjykLwJBDftoxtaDsEDGasDwX5xpTg
         TAd7hwfFMeWNEkA4bC0dZlDg9wtbIaH/n74Av7yR9QB5iNJnP6q4LWWKaK3XSA6N5bqt
         81vmGAk32EGAgG4govGCv0p6w6j1Ec/vL8qA8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=vS3GqFAALqOndCL+uXmyouot1Q85HABuK+gRWzA1UdWYnwljueqQihqZMKK3SFF+v7
         1hZ20NvxDfZRgV9aZS0xBNgZoDXnX22FVj2yDNBWJFKAW95NI3VdhgBx7E32OGtFtEU6
         6TQhBr7A3mGI6gyMje59Uey3JyC+A+OSiO98o=
MIME-Version: 1.0
Received: by 10.68.22.135 with SMTP id d7mr482675pbf.408.1308158062068; Wed,
 15 Jun 2011 10:14:22 -0700 (PDT)
Received: by 10.68.66.195 with HTTP; Wed, 15 Jun 2011 10:14:21 -0700 (PDT)
In-Reply-To: <BANLkTi=kJYhD8fL7tcVSXKVg2FAF5=cwUg@mail.gmail.com>
References: <BANLkTim+WSsy=0-SdqKPjnDGa0ogdhZ5-w@mail.gmail.com>
	<BANLkTi=kJYhD8fL7tcVSXKVg2FAF5=cwUg@mail.gmail.com>
Date: Wed, 15 Jun 2011 13:14:21 -0400
Message-ID: <BANLkTi=q97cVk7Nrsc0JWORKs=b30iHR3Q@mail.gmail.com>
Subject: Re: Changing Boosting that was set at indexing time
From: liat oren <oren.liat@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=bcaec52161f599840904a5c34850
X-Virus-Checked: Checked by ClamAV on apache.org

--bcaec52161f599840904a5c34850
Content-Type: text/plain; charset=ISO-8859-1

Ok, thanks a lot

On 15 June 2011 11:36, Ian Lea <ian.lea@gmail.com> wrote:

> Don't think so.  The boost info is encoded and stored at index time.
>
>
> --
> Ian.
>
>
> On Wed, Jun 15, 2011 at 10:42 AM, liat oren <oren.liat@gmail.com> wrote:
> > Hi,
> >
> > I indexed 4 million documents and used boosting factors for each document
> at
> > indexing time.
> >
> > I would like to cancel that boosting. Is there a way to do that without
> > re-indexing all of them?
> >
> > Many thanks,
> > Liat
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--bcaec52161f599840904a5c34850--

From java-user-return-50036-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun 16 05:10:57 2011
Return-Path: <java-user-return-50036-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9493A6EFA
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 16 Jun 2011 05:10:57 +0000 (UTC)
Received: (qmail 77416 invoked by uid 500); 16 Jun 2011 05:10:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77336 invoked by uid 500); 16 Jun 2011 05:10:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77328 invoked by uid 99); 16 Jun 2011 05:10:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jun 2011 05:10:51 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,RFC_ABUSE_POST,SPF_NEUTRAL,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [121.101.151.212] (HELO nm3-vm0.bullet.mail.in.yahoo.com) (121.101.151.212)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 16 Jun 2011 05:10:42 +0000
Received: from [121.101.151.236] by nm3.bullet.mail.in.yahoo.com with NNFMP; 16 Jun 2011 05:14:22 -0000
Received: from [121.101.151.234] by tm1.bullet.mail.in.yahoo.com with NNFMP; 16 Jun 2011 05:12:20 -0000
Received: from [127.0.0.1] by omp1003.mail.in.yahoo.com with NNFMP; 16 Jun 2011 05:11:06 -0000
X-Yahoo-Newman-Id: 862815.35344.bm@omp1003.mail.in.yahoo.com
Received: (qmail 28230 invoked from network); 16 Jun 2011 05:10:19 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=DKIM-Signature:X-Yahoo-Newman-Property:X-YMail-OSG:X-Yahoo-SMTP:Received:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=edTVIZK+RDbV/2ErFskqFA5xnfgWYyQXbylHQ4Wbme1UOVwrNU1igbwgUVsuRA/jQqo0wsaROyt+3K+YcYUWKv1sGzhPYKDIWsupa275rtehliKOJFpuT/tsCKdNfCMbRr8aTFHOy6CNrduD1KuzYMpkfA1AK3kK0o38CEev9bs=  ;
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.in; s=s1024; t=1308201019; bh=QbUf747REzc3PRLe31+xp6rBsVkTYOSRI+pErTzlWCE=; h=X-Yahoo-Newman-Property:X-YMail-OSG:X-Yahoo-SMTP:Received:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE; b=Db90evPXr4BDbmsHRywgawrYtqxKLh6dEFrZNT6bT37LILdbbU2FDJWoCbK6wUiJ2GJbkFmM4TeilEnvzKQZ2BvRvlvLYzEdBik3vMKhkmIlcInw8w9Ir9H1ytwuNVJGc0TTG/dQxTHBMpfq5jAttiXsCJWlRg+OtZjfJCoIM08=
X-Yahoo-Newman-Property: ymail-3
X-YMail-OSG: qbpU6oAVM1mdLSEdbZSihU0xycnXdGMc_oYhH6brgUVQ2Tg
 OwenCVvA9PqWW462Hlw.Hp1nR2i8CU4trmp2laAJYrQjh19WAWD.mCx2BH.R
 NQhCeTdhx6JkKNBBE3MxYP.IFZRyDSsu2NVKDNFmITNMF3NoBAjHi0zjXrtD
 eWUYNQVs3XWBmXAxfoV2qLTQq3lWoIiwReJKPNBUjBfqpJcKqjFonM5T7nQY
 v4xUjVPgfjsP19zas2tjrmGhL3_Mmsz5FHojxZDJ_NyTchQWY6qtf4g3pSdA
 2.shm.lWxvT1SIbNClYMz9DlXgP_0WHGKxhknY2CMXahU6b0R_rZJYWw-
X-Yahoo-SMTP: JObyHkuswBBrNSLZp.Ycd7Boqpr_GQ--
Received: from GaneshM (emailgane@121.244.159.130 with login)
        by smtp107.mail.in.yahoo.com with SMTP; 16 Jun 2011 10:40:19 +0530 IST
Message-ID: <E0ABD98574AC46538F84C2CBBA32A928@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>, <te@statsbiblioteket.dk>
References: <4DF3C40F.9090703@code972.com> <BANLkTi=2U3RTtOq_1oiA_FGBwpiPcVVMyg@mail.gmail.com> <BANLkTinHragJQUTX3j+mcdW0K0B73A0T=A@mail.gmail.com> <4DF47461.1050004@code972.com> <1308036518.853.79.camel@te-prime> <A717C85830434834B6DA5906A2AB6C24@sv.us.sonicwall.com>
Subject: Re: Index size and performance degradation
Date: Thu, 16 Jun 2011 10:40:18 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.5931
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5931

Any one could tthow some light on this? Is it a bad idea to keep =
multiple shards in a single system?

Below are my reasons, Please correct me if iam wrong.

1. If single large index goes beyond GB, It may take more time to merge =
and optimize.=20
2. Consider the total size of index is around 10 GB, then fdt file might =
be in 3 - 4GB. In order to display result summary we may need to fetch =
the field values from the fdt file. IO might be more as it needs to skip =
large amount bytes to locate the exact location. In other words the =
search summary retrieval might slow.
3. It is really good for less number of concurrent users going to search =
at a time.=20

Regards
Ganesh



----- Original Message -----=20
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>; <te@statsbiblioteket.dk>
Sent: Tuesday, June 14, 2011 3:28 PM
Subject: Re: Index size and performance degradation


Is it a bad idea to keep multiple shards in a single system?

Regards
Ganesh

----- Original Message -----=20
From: "Toke Eskildsen" <te@statsbiblioteket.dk>
To: <java-user@lucene.apache.org>
Sent: Tuesday, June 14, 2011 12:58 PM
Subject: Re: Index size and performance degradation


> On Sun, 2011-06-12 at 10:10 +0200, Itamar Syn-Hershko wrote:
>> The whole point of my question was to find out if and how to make=20
>> balancing on the SAME machine. Apparently thats not going to help and =
at=20
>> a certain point we will just have to prompt the user to buy more =
hardware...
>=20
> It really depends on your scenario. If you have few concurrent =
requests
> and are looking to minimize latency, sharding might help; assuming you
> have fast IO and multiple cores. You basically want to saturate all
> available resources for all requests.
>=20
> On the other hand, if throughput is the issue, sharding on a single
> machine is counter-productive due to increased duplication and =
merging.
>=20
>> Out of curiosity, isn't there anything that we can do to avoid that? =
for=20
>> instance using memory-mapped files for the indexes? anything that =
would=20
>> help us overcome OS limitations of that sort...
>=20
> One standard advice for speeding up searches is using SSD's. Our
> (admittedly old) experiments puts SSD-performance near RAM. With the
> prices we have now, SSD's seems like an obvious choice for most =
setups.
>=20
> We tried a few performance tests at different index sizes and for us,
> index size vs. performance looked like the power law: Heavy =
performance
> degradation in the beginning, less later. It makes sense when we look =
at
> caching and it means that if you do not require stellar performance, =
you
> can have very large indexes on few machines (cue Hathi Trust).
>=20
> - Toke Eskildsen
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50037-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun 16 05:35:52 2011
Return-Path: <java-user-return-50037-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BD3C76BAA
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 16 Jun 2011 05:35:52 +0000 (UTC)
Received: (qmail 502 invoked by uid 500); 16 Jun 2011 05:35:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 464 invoked by uid 500); 16 Jun 2011 05:35:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 445 invoked by uid 99); 16 Jun 2011 05:35:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jun 2011 05:35:48 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of itsadok@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jun 2011 05:35:40 +0000
Received: by wwi18 with SMTP id 18so771764wwi.5
        for <java-user@lucene.apache.org>; Wed, 15 Jun 2011 22:35:20 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:from:date:message-id:subject:to
         :content-type;
        bh=2ztdDE1B8165xTrktU2XB9RntFa7sJ5nO4K0t3rl9qM=;
        b=Zx0hxjrRVll2drehRMMUTNi/Q85+CnbPS2y0SDZ18tlFF7DdO3CN140Hau2AVB7S8j
         r5rYcZVLCgA78BvDUX22hXRxbYXtjSIlu4tip9pU9QQTj5Ci84l2zEDJ0StxBQxGRNDO
         0OChAPrKI9kMwgfEYm0Gz+MRlVyLRPEczZuFM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=vH5IocjhZ7Fs/8C5u8T4T2rbZ6QxexqLXvuWkxArf6fPqdFoer2A4AJnbXPeaqhE3q
         3OIMh0gZtBcewx+RphQpRiSwPSisMJz7Xkfv8NE1URE7+1FTak4QAHMs0MTs4dNqxs2i
         AYFZhV/IXrwaigdM9gRhM+rOO/47ISqlN+wIU=
Received: by 10.227.98.9 with SMTP id o9mr447890wbn.25.1308202520069; Wed, 15
 Jun 2011 22:35:20 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.179.14 with HTTP; Wed, 15 Jun 2011 22:35:00 -0700 (PDT)
From: Israel Tsadok <itsadok@gmail.com>
Date: Thu, 16 Jun 2011 08:35:00 +0300
Message-ID: <BANLkTin+h1PDupVZMyp6crX2YXaUz77jmA@mail.gmail.com>
Subject: RemoteSearchable deprecated. What to replace it with?
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd30e4680c8aa04a5cda2ef
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd30e4680c8aa04a5cda2ef
Content-Type: text/plain; charset=ISO-8859-1

I use a ParallelMultiSearcher to search across a bunch of RemoteSearchables,
pretty much as recommended in Lucene In Action, First Edition, with the
appropriate adjustments for Lucene 3.0. This seems to be completely
deprecated in 3.1.

What is the simplest way for me to continue having the ability to search
across multiple servers?

--000e0cd30e4680c8aa04a5cda2ef--

From java-user-return-50038-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun 16 05:45:10 2011
Return-Path: <java-user-return-50038-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 651166E08
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 16 Jun 2011 05:45:10 +0000 (UTC)
Received: (qmail 11945 invoked by uid 500); 16 Jun 2011 05:45:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11898 invoked by uid 500); 16 Jun 2011 05:45:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11890 invoked by uid 99); 16 Jun 2011 05:45:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jun 2011 05:45:07 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of serera@gmail.com designates 209.85.210.176 as permitted sender)
Received: from [209.85.210.176] (HELO mail-iy0-f176.google.com) (209.85.210.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jun 2011 05:45:03 +0000
Received: by iym1 with SMTP id 1so1371066iym.35
        for <java-user@lucene.apache.org>; Wed, 15 Jun 2011 22:44:42 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=veP9okeV8gv3mi/+1giSD5bG2jDrF2j5Xv2uHHUINII=;
        b=kquO+/0C7iFiCFExkXBkMl5oFMCbnEgj7v7tInB/vSLktHG/5j67JDosNmjKjH9Zyv
         nDgImhB3THdxVOgkaO5RKowVV3D6pjPrhZK6ey37r3FUhHeTcchzGfLXBHDcCnrpu7kT
         efw+bMZr2rHjdWvsjHazyqyLwy8OdKaJTj9kI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=kaa0bVxsvwu5EH/aseAZ2i6AlQgEJrqn0MPV9G/7MD4+ZGbJC8jdkpDYCFCcRBycfG
         DDhTmcvOgtgBKk4oJ0ldUd4HQmmbfsXjAvhLFUCl9jtkrO7xVuN+9pYRVuBOQgwbhTju
         QMjAjLngSNlcPsFS68J89WAeafx+eGdSNKlXI=
MIME-Version: 1.0
Received: by 10.43.132.72 with SMTP id ht8mr381948icc.111.1308203082087; Wed,
 15 Jun 2011 22:44:42 -0700 (PDT)
Received: by 10.42.3.209 with HTTP; Wed, 15 Jun 2011 22:44:41 -0700 (PDT)
In-Reply-To: <E0ABD98574AC46538F84C2CBBA32A928@sv.us.sonicwall.com>
References: <4DF3C40F.9090703@code972.com>
	<BANLkTi=2U3RTtOq_1oiA_FGBwpiPcVVMyg@mail.gmail.com>
	<BANLkTinHragJQUTX3j+mcdW0K0B73A0T=A@mail.gmail.com>
	<4DF47461.1050004@code972.com>
	<1308036518.853.79.camel@te-prime>
	<A717C85830434834B6DA5906A2AB6C24@sv.us.sonicwall.com>
	<E0ABD98574AC46538F84C2CBBA32A928@sv.us.sonicwall.com>
Date: Thu, 16 Jun 2011 08:44:41 +0300
Message-ID: <BANLkTikc4_=ZoHfYL1S1TwOs5r4oC6DSUg@mail.gmail.com>
Subject: Re: Index size and performance degradation
From: Shai Erera <serera@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf307d01bc007c2804a5cdc478

--20cf307d01bc007c2804a5cdc478
Content-Type: text/plain; charset=ISO-8859-1

>
> If single large index goes beyond GB, It may take more time to merge and
> optimize.
>

This can be achieved w/ a single index too. LogMergePolicy allows setting a
maxMergeMB and maxMergeMBForOptimize, which are thresholds that define the
largest segment size to be merged. TieredMergePolicy, as far as I
understand, goes one step further and lets you specify the largest segment
size you'd wish to see as a result of a merge.

IO might be more as it needs to skip large amount bytes to locate the exact
> location
>

I don't believe there's much difference between a single index and multiple
ones. Lucene does not control how the low-level IO subsystem works. It could
be that the larger index would perform better, or vice versa. I would keep
the stored fields separate from the content index in two cases:

(1) You can ensure that the stored fields are stored on a separate physical
disk than the content index, in which case you're more likely to get
concurrency for fetching results and doing searches.

(2) The stored fields are kept in their own cluster. But this is really for
large deployments, w/ many shards and high query volume. In those scenarios,
queries are executed on one (logical) cluster, and then results are fed off
to another logical cluster to produce the summaries. I doubt it fits more
than a handful of systems though.

Shai

On Thu, Jun 16, 2011 at 8:10 AM, Ganesh <emailgane@yahoo.co.in> wrote:

> Any one could tthow some light on this? Is it a bad idea to keep multiple
> shards in a single system?
>
> Below are my reasons, Please correct me if iam wrong.
>
> 1. If single large index goes beyond GB, It may take more time to merge and
> optimize.
> 2. Consider the total size of index is around 10 GB, then fdt file might be
> in 3 - 4GB. In order to display result summary we may need to fetch the
> field values from the fdt file. IO might be more as it needs to skip large
> amount bytes to locate the exact location. In other words the search summary
> retrieval might slow.
> 3. It is really good for less number of concurrent users going to search at
> a time.
>
> Regards
> Ganesh
>
>
>
> ----- Original Message -----
> From: "Ganesh" <emailgane@yahoo.co.in>
> To: <java-user@lucene.apache.org>; <te@statsbiblioteket.dk>
> Sent: Tuesday, June 14, 2011 3:28 PM
> Subject: Re: Index size and performance degradation
>
>
> Is it a bad idea to keep multiple shards in a single system?
>
> Regards
> Ganesh
>
> ----- Original Message -----
> From: "Toke Eskildsen" <te@statsbiblioteket.dk>
> To: <java-user@lucene.apache.org>
> Sent: Tuesday, June 14, 2011 12:58 PM
> Subject: Re: Index size and performance degradation
>
>
> > On Sun, 2011-06-12 at 10:10 +0200, Itamar Syn-Hershko wrote:
> >> The whole point of my question was to find out if and how to make
> >> balancing on the SAME machine. Apparently thats not going to help and at
> >> a certain point we will just have to prompt the user to buy more
> hardware...
> >
> > It really depends on your scenario. If you have few concurrent requests
> > and are looking to minimize latency, sharding might help; assuming you
> > have fast IO and multiple cores. You basically want to saturate all
> > available resources for all requests.
> >
> > On the other hand, if throughput is the issue, sharding on a single
> > machine is counter-productive due to increased duplication and merging.
> >
> >> Out of curiosity, isn't there anything that we can do to avoid that? for
> >> instance using memory-mapped files for the indexes? anything that would
> >> help us overcome OS limitations of that sort...
> >
> > One standard advice for speeding up searches is using SSD's. Our
> > (admittedly old) experiments puts SSD-performance near RAM. With the
> > prices we have now, SSD's seems like an obvious choice for most setups.
> >
> > We tried a few performance tests at different index sizes and for us,
> > index size vs. performance looked like the power law: Heavy performance
> > degradation in the beginning, less later. It makes sense when we look at
> > caching and it means that if you do not require stellar performance, you
> > can have very large indexes on few machines (cue Hathi Trust).
> >
> > - Toke Eskildsen
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--20cf307d01bc007c2804a5cdc478--

From java-user-return-50039-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun 16 08:43:10 2011
Return-Path: <java-user-return-50039-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 277E164CF
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 16 Jun 2011 08:43:10 +0000 (UTC)
Received: (qmail 51332 invoked by uid 500); 16 Jun 2011 08:43:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51270 invoked by uid 500); 16 Jun 2011 08:43:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51261 invoked by uid 99); 16 Jun 2011 08:43:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jun 2011 08:43:07 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dotsid@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jun 2011 08:42:59 +0000
Received: by wyb40 with SMTP id 40so1340212wyb.35
        for <java-user@lucene.apache.org>; Thu, 16 Jun 2011 01:42:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:content-type:mime-version:subject:from
         :in-reply-to:date:content-transfer-encoding:message-id:references:to
         :x-mailer;
        bh=GCyCAJOWACjdpnK9M3iqFr3XUW3Nmc+IsMVzgLEt2qI=;
        b=Ssb6/3CIALiWN8fBAShrUahpfwZU3ipJPqXQ5z899L2NI9an83Oo6z5RoV0YHbX1B4
         mUaGoFtzmPFApkHIvbY7S2B9M6Q1p9A6Mph7w4srKgQj+F80YZwNUafrx/841WdXVUcc
         7IaLcNu9vF57FezRXa2A+X/1utRfSFuc0wV3w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        b=i8QKWcVMZTchHXMEWIufktNblkIhYnQtZPfu4GOsLVSTgAkz716XGOMeKdO3CdaJXp
         mJ33Td52JjJrFSvuaJqhJ89vxS9M1mJvohsulesq3eZM71b7sdCTh5pWUucDU9I9UYO7
         +FFicHdsvlPys15OFSLOpENBzH1JkfBRGJthc=
Received: by 10.227.208.77 with SMTP id gb13mr606806wbb.43.1308213759492;
        Thu, 16 Jun 2011 01:42:39 -0700 (PDT)
Received: from [172.16.31.9] (gw.farpost.ru. [80.92.161.1])
        by mx.google.com with ESMTPS id et5sm7243wbb.16.2011.06.16.01.42.37
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 16 Jun 2011 01:42:38 -0700 (PDT)
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1084)
Subject: Re: Index size and performance degradation
From: Denis Bazhenov <dotsid@gmail.com>
In-Reply-To: <BANLkTikc4_=ZoHfYL1S1TwOs5r4oC6DSUg@mail.gmail.com>
Date: Thu, 16 Jun 2011 19:42:33 +1100
Content-Transfer-Encoding: quoted-printable
Message-Id: <D15DEB4A-E4B9-4B55-8AD4-04FCD47EB79E@gmail.com>
References: <4DF3C40F.9090703@code972.com> <BANLkTi=2U3RTtOq_1oiA_FGBwpiPcVVMyg@mail.gmail.com> <BANLkTinHragJQUTX3j+mcdW0K0B73A0T=A@mail.gmail.com> <4DF47461.1050004@code972.com> <1308036518.853.79.camel@te-prime> <A717C85830434834B6DA5906A2AB6C24@sv.us.sonicwall.com> <E0ABD98574AC46538F84C2CBBA32A928@sv.us.sonicwall.com> <BANLkTikc4_=ZoHfYL1S1TwOs5r4oC6DSUg@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1084)
X-Virus-Checked: Checked by ClamAV on apache.org

To summarize what was said before.

In general, using sharding on single machine does make sense only if =
using single lucene instance you could not utilize all the hardware on =
this machine. For it's own lucene does a good job in this area, so I =
think it's very rarely situation where you really need to shard lucene =
index on single machine.

One particular case when you want to shard that comes to my mind. If you =
have large JVM heap (>=20
4-8Gb) and machine with very large RAM size  it makes sense to shard for =
keeping GC ovehead small (AFAIK JVM have some troubles on large heap =
sizes). Also I thinks there is some potential in sharding if you do a =
lot of heavy lifting sorting. But again, it does make sense only if =
there is no a lot of concurrent requests going in the system.

On 16.06.2011, at 16:44, Shai Erera wrote:

>>=20
>> If single large index goes beyond GB, It may take more time to merge =
and
>> optimize.
>>=20
>=20
> This can be achieved w/ a single index too. LogMergePolicy allows =
setting a
> maxMergeMB and maxMergeMBForOptimize, which are thresholds that define =
the
> largest segment size to be merged. TieredMergePolicy, as far as I
> understand, goes one step further and lets you specify the largest =
segment
> size you'd wish to see as a result of a merge.
>=20
> IO might be more as it needs to skip large amount bytes to locate the =
exact
>> location
>>=20
>=20
> I don't believe there's much difference between a single index and =
multiple
> ones. Lucene does not control how the low-level IO subsystem works. It =
could
> be that the larger index would perform better, or vice versa. I would =
keep
> the stored fields separate from the content index in two cases:
>=20
> (1) You can ensure that the stored fields are stored on a separate =
physical
> disk than the content index, in which case you're more likely to get
> concurrency for fetching results and doing searches.
>=20
> (2) The stored fields are kept in their own cluster. But this is =
really for
> large deployments, w/ many shards and high query volume. In those =
scenarios,
> queries are executed on one (logical) cluster, and then results are =
fed off
> to another logical cluster to produce the summaries. I doubt it fits =
more
> than a handful of systems though.
>=20
> Shai
>=20
> On Thu, Jun 16, 2011 at 8:10 AM, Ganesh <emailgane@yahoo.co.in> wrote:
>=20
>> Any one could tthow some light on this? Is it a bad idea to keep =
multiple
>> shards in a single system?
>>=20
>> Below are my reasons, Please correct me if iam wrong.
>>=20
>> 1. If single large index goes beyond GB, It may take more time to =
merge and
>> optimize.
>> 2. Consider the total size of index is around 10 GB, then fdt file =
might be
>> in 3 - 4GB. In order to display result summary we may need to fetch =
the
>> field values from the fdt file. IO might be more as it needs to skip =
large
>> amount bytes to locate the exact location. In other words the search =
summary
>> retrieval might slow.
>> 3. It is really good for less number of concurrent users going to =
search at
>> a time.
>>=20
>> Regards
>> Ganesh
>>=20
>>=20
>>=20
>> ----- Original Message -----
>> From: "Ganesh" <emailgane@yahoo.co.in>
>> To: <java-user@lucene.apache.org>; <te@statsbiblioteket.dk>
>> Sent: Tuesday, June 14, 2011 3:28 PM
>> Subject: Re: Index size and performance degradation
>>=20
>>=20
>> Is it a bad idea to keep multiple shards in a single system?
>>=20
>> Regards
>> Ganesh
>>=20
>> ----- Original Message -----
>> From: "Toke Eskildsen" <te@statsbiblioteket.dk>
>> To: <java-user@lucene.apache.org>
>> Sent: Tuesday, June 14, 2011 12:58 PM
>> Subject: Re: Index size and performance degradation
>>=20
>>=20
>>> On Sun, 2011-06-12 at 10:10 +0200, Itamar Syn-Hershko wrote:
>>>> The whole point of my question was to find out if and how to make
>>>> balancing on the SAME machine. Apparently thats not going to help =
and at
>>>> a certain point we will just have to prompt the user to buy more
>> hardware...
>>>=20
>>> It really depends on your scenario. If you have few concurrent =
requests
>>> and are looking to minimize latency, sharding might help; assuming =
you
>>> have fast IO and multiple cores. You basically want to saturate all
>>> available resources for all requests.
>>>=20
>>> On the other hand, if throughput is the issue, sharding on a single
>>> machine is counter-productive due to increased duplication and =
merging.
>>>=20
>>>> Out of curiosity, isn't there anything that we can do to avoid =
that? for
>>>> instance using memory-mapped files for the indexes? anything that =
would
>>>> help us overcome OS limitations of that sort...
>>>=20
>>> One standard advice for speeding up searches is using SSD's. Our
>>> (admittedly old) experiments puts SSD-performance near RAM. With the
>>> prices we have now, SSD's seems like an obvious choice for most =
setups.
>>>=20
>>> We tried a few performance tests at different index sizes and for =
us,
>>> index size vs. performance looked like the power law: Heavy =
performance
>>> degradation in the beginning, less later. It makes sense when we =
look at
>>> caching and it means that if you do not require stellar performance, =
you
>>> can have very large indexes on few machines (cue Hathi Trust).
>>>=20
>>> - Toke Eskildsen
>>>=20
>>>=20
>>> =
---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>=20
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>=20
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>=20
>>=20

---
Denis Bazhenov <dotsid@gmail.com>






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50040-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun 16 09:03:53 2011
Return-Path: <java-user-return-50040-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DC3366F09
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 16 Jun 2011 09:03:53 +0000 (UTC)
Received: (qmail 72596 invoked by uid 500); 16 Jun 2011 09:03:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72555 invoked by uid 500); 16 Jun 2011 09:03:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72547 invoked by uid 99); 16 Jun 2011 09:03:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jun 2011 09:03:51 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.210.176 as permitted sender)
Received: from [209.85.210.176] (HELO mail-iy0-f176.google.com) (209.85.210.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jun 2011 09:03:44 +0000
Received: by iym1 with SMTP id 1so1499928iym.35
        for <java-user@lucene.apache.org>; Thu, 16 Jun 2011 02:03:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=xmIz/uVyJfSlYmpefQd6a/3dl+xtMLUTXV+EkwnJA+k=;
        b=k4QmxwpbLQFBw2IetliF87q+XlVsthhk46Gm32HXxTZUepFZPOPgr37Pa40tfLqy8O
         bQyswtAjcpNoy83bQ0BMHMYfLZKx92D3D8Z6zerOulXbPTx6OvaDyo6MI47Yz2ORws9y
         jZmUQXgjgQV4w+BoMcEHcS+9t2F3TEZ/LvA+c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=uzV3CLbf0myxpYGpaMm2PesaHvb/PHFYzechAc/Uxgec3B4f40d1eaqLkj1GvpsIyq
         /kiVJYkgwufHdmcwSVx5MuUJQQl8SYgEdvzsvCOE2l2xmrWCLfdUxjPmDkaKNqPWFLgr
         FZ5FqVV1fCxUKBVQWTX4MKh23XcoIj8KkwNxY=
Received: by 10.42.173.5 with SMTP id p5mr563010icz.414.1308215003046; Thu, 16
 Jun 2011 02:03:23 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.199.148 with HTTP; Thu, 16 Jun 2011 02:03:03 -0700 (PDT)
In-Reply-To: <BANLkTiku0LoPxKyUtvOyBDNi_H0MROnqtA@mail.gmail.com>
References: <BANLkTi=QWNJr2zP8GXM28fwze0x6GRN-Gw@mail.gmail.com>
 <BANLkTik8c15OyjQAEP+d_q9HX=9x7sXOxQ@mail.gmail.com> <BANLkTi=EjSwCWCTnYhD04tpnL-X028o=9g@mail.gmail.com>
 <BANLkTiku0LoPxKyUtvOyBDNi_H0MROnqtA@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Thu, 16 Jun 2011 10:03:03 +0100
Message-ID: <BANLkTi=2NFqB624uFyCNCxBDjnJ7yQD14Q@mail.gmail.com>
Subject: Re: Boosting a document at query time, based on a field value/range
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

In your examples the queries are essentially the same, so getting the
same results is expected, and getting different scores is also
expected since you are boosting in the first and not the second, and
the second is using a filter which doesn't contribute to scoring.

You'll need to be careful of your range values: 1.0 TO 37.0 may not do
what you want since it will be using a string comparison. Unless you
are using NumericFields in which case you'll need NumericRangeQuery.

It appears that your original question has been answered.  I suggest
you take a step back and work through the problem again, reading the
earlier answers, and experiment with queries like

text:whatever
text:whatever OR percent:[01 TO 30]
text:whatever OR percent:[01 TO 30]^10

or using NumericRangeQuery if that is the way you go - generally
recommended as is quicker and avoids string comparison issues.
Experimenting with different boost values can also be worthwhile.


--
Ian.

On Wed, Jun 15, 2011 at 4:43 PM, Sowmya V.B. <vbsowmya@gmail.com> wrote:
> Hi
>
> Thanks for the tip.
>
> I tried what you suggested. But, I get the same results as filtering the
> results on the range of values of a given field, but with different score=
s
> now.
>
> 1) Here is an example query I gave to Query parser:
>
> newtextQuery =3D textQuery + " =A0OR " + =A0field +":[" + frompercent+ " =
TO " +
> topercent + "]^" + myBoost;
> (Where textQuery is what the user gave, field, frompercent, topercent,
> myboost : are the variables in the code)
>
> A Lucene query for this was something like:
> Query New: ((text:space title:space text.stem:space) field4:[1.0 TO
> 37.0]^10.0)
>
> 2) Here is what I did when I used a filter:
> -used a longtrierangefilter, to filter results based on the range obtaine=
d
> by "frompercent" to "topercent", for the same query
>
> Basically, the results for both the methods are the same ranked documents=
,
> albeit with different scores.
>
> Am I missing something here??
>
>
>
> -----------------------
> The boost is something you do with your query, before it is issued to
> the searcher.
>
> If you use the query parser, you can provide the *additional* query
> parameters by concatenating them to the standard user query:
> String fullQuery =3D userQuery
> =A0+ " OR myrange:[" + from + " TO " + to + "30]^" + myBoost;
>
> If you build your Query by code, you can use ConstantScoreRangeQuery or
> RangeQuery for the range part, where you can call setBoost(float).
>
> - Toke Eskildsen
>
>
> On Wed, Jun 15, 2011 at 11:22 AM, Sowmya V.B. <vbsowmya@gmail.com> wrote:
>
>> Hi
>>
>> I am not getting the replies to my inbox ...hence the delay in respondin=
g.
>>
>> >>I think you misunderstand Eric's answer, as his suggestion does exactl=
y
>> what you ask for. Have you tried the "OR **field**:[20 TO 30]^10" method=
?
>>
>> Well, my question is partly answered with this clarification. But, I am
>> still wondering how to do that programmatically.
>> the (20-30) range is not a fixed range. Its chosen by the user. It can a=
s
>> well be (12-34) too. I am not able to figure out if there is any functio=
n in
>> the searcher classs, which will enable me give these specifications
>> ...something like... a setboost(), which exists during index time.
>>
>> S.
>>
>> On Fri, Jun 10, 2011 at 10:38 AM, Sowmya V.B. <vbsowmya@gmail.com> wrote=
:
>>
>>> Hi Erick
>>>
>>> Thanks for the response.
>>>
>>> I would want the documents with values within #20-30# be ranked above t=
he
>>> documents with some other values.
>>> Well, since there might be a case where there are no documents in that
>>> range, I would also prefer to have other documents listed too, somewher=
e
>>> lower down the rankings.
>>>
>>> Also, I don't want to do a simple sort on the results what lucene gives=
,
>>> with its own ranking function.
>>> I am looking for a possibility of boosting a given document at query-ti=
me,
>>> based on the values of a particular field : instead of plainly sorting =
the
>>> normal lucene results based on this field.
>>> Is that possible, without going in to the scoring function?
>>>
>>> Sowmya.
>>>
>>> *************
>>> I take it from this that you want documents with values #outside# 20-30
>>> to still be found? In that case you can do something like add a clause
>>> like:
>>>
>>> OR *field*:[20 TO 30]^10
>>>
>>> or similar.
>>>
>>> Best
>>> Erick
>>>
>>> On Thu, Jun 9, 2011 at 5:10 PM, Sowmya V.B. <vbsowmya@gmail.com> wrote:
>>>
>>>> Hi All
>>>>
>>>> I have joined the group only today..and began working with lucene only
>>>> recently.
>>>>
>>>> My problem: I want to boost the ranking of certain documents, based on
>>>> the values of certain fields.
>>>>
>>>> For example, if the field has =A0a range of values from 0 to 100 and t=
he
>>>> user chooses something like 20 to 30, as an option, along with the que=
ry; I
>>>> want the documents which satisfy that condition (The field value being
>>>> between 20 and 30) to get a boost during ranking.
>>>>
>>>> Is there a way to do that in Lucene? I could not find an understandabl=
e
>>>> explanation in the past mails about this. Hence, starting a fresh thre=
ad.
>>>>
>>>> Sowmya.
>>>>
>>>> --
>>>> Sowmya V.B.
>>>> ----------------------------------------------------
>>>> Losing optimism is blasphemy!
>>>> http://vbsowmya.wordpress.com
>>>> ----------------------------------------------------
>>>>
>>>
>>>
>>>
>>> --
>>> Sowmya V.B.
>>> ----------------------------------------------------
>>> Losing optimism is blasphemy!
>>> http://vbsowmya.wordpress.com
>>> ----------------------------------------------------
>>>
>>
>>
>>
>> --
>> Sowmya V.B.
>> ----------------------------------------------------
>> Losing optimism is blasphemy!
>> http://vbsowmya.wordpress.com
>> ----------------------------------------------------
>>
>
>
>
> --
> Sowmya V.B.
> ----------------------------------------------------
> Losing optimism is blasphemy!
> http://vbsowmya.wordpress.com
> ----------------------------------------------------
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50041-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun 16 09:05:35 2011
Return-Path: <java-user-return-50041-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C3EDD6283
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 16 Jun 2011 09:05:35 +0000 (UTC)
Received: (qmail 76062 invoked by uid 500); 16 Jun 2011 09:05:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76014 invoked by uid 500); 16 Jun 2011 09:05:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76006 invoked by uid 99); 16 Jun 2011 09:05:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jun 2011 09:05:33 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vbsowmya@gmail.com designates 209.85.210.176 as permitted sender)
Received: from [209.85.210.176] (HELO mail-iy0-f176.google.com) (209.85.210.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jun 2011 09:05:27 +0000
Received: by iym1 with SMTP id 1so1501222iym.35
        for <java-user@lucene.apache.org>; Thu, 16 Jun 2011 02:05:07 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=KT0n+LrJ9N99sHl7TffImqKmUDOm+G1QzCBFUnmCzSg=;
        b=adqIOzHrZ5iHkvytZ7JDzai/T8QVDpgWfnGWIThlCrGNCZSB9DNpOZODL9RTMeC4h3
         T4/pp73m6ebqWNKdLEaUA09On3YKDeT7JGUaot+fsj7ncmsdzOVUvT+0QoKu9MScio9A
         TKFuEhO5krE5XI/OyDK+Z1lUwWd9ouJOCA6Kg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=vyol2vrADur4U33s8196YoXCGEhwFa9uiMg1TqOkorwNZ4wsLDZyG2HwCHaOmN7P3c
         V46MacozE/T5uxIoRaYOJbvW6cyKxYvEdb5pwATLwqjwztDw5cAtG8w0mW3hbPegXIYL
         I444hvDJkpjc4ZqgySJ59Mwz4NuUeEoDeyhHY=
Received: by 10.43.54.146 with SMTP id vu18mr520897icb.296.1308215107110; Thu,
 16 Jun 2011 02:05:07 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.42.172.9 with HTTP; Thu, 16 Jun 2011 02:04:47 -0700 (PDT)
In-Reply-To: <BANLkTiku0LoPxKyUtvOyBDNi_H0MROnqtA@mail.gmail.com>
References: <BANLkTi=QWNJr2zP8GXM28fwze0x6GRN-Gw@mail.gmail.com>
 <BANLkTik8c15OyjQAEP+d_q9HX=9x7sXOxQ@mail.gmail.com> <BANLkTi=EjSwCWCTnYhD04tpnL-X028o=9g@mail.gmail.com>
 <BANLkTiku0LoPxKyUtvOyBDNi_H0MROnqtA@mail.gmail.com>
From: "Sowmya V.B." <vbsowmya@gmail.com>
Date: Thu, 16 Jun 2011 11:04:47 +0200
Message-ID: <BANLkTimgY3rkJgnq8ezfq0bLTiYaa=ekkQ@mail.gmail.com>
Subject: Re: Boosting a document at query time, based on a field value/range
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=bcaec5196bc5bfc8bd04a5d09093

--bcaec5196bc5bfc8bd04a5d09093
Content-Type: text/plain; charset=UTF-8

Hi Elmer

Thanks for the reply.
I now tried giving a NumericRangeQuery.

Something like:
Query qq = NumericRangeQuery.newDoubleRange(field, frompercent, topercent,
true, true);
(As suggested in
http://lucene.apache.org/java/3_0_3/api/core/org/apache/lucene/search/NumericRangeQuery.html
)

However, though I dont get any compilation errors, I get a runtime error.
Here is the stack trace:

java.lang.NoSuchMethodError:
org.apache.lucene.util.StringHelper.intern(Ljava/lang/String;)Ljava/lang/String;

org.apache.lucene.search.NumericRangeQuery.<init>(NumericRangeQuery.java:161)

org.apache.lucene.search.NumericRangeQuery.newDoubleRange(NumericRangeQuery.java:259)


-Firstly, I don't understand the error :) So, I don't know what to do about
it.

S.

*********************

Let's try again ;)

If I understand you correctly, you want the returned results to include
all documents matching some query, also documents that not satisfy the
specified range ("like 20 to 30"), but results that satisfy this range
should appear higher in the list.

If so, first you have to find out how you can build a range query.
Enough documentation on that. This results in a RangeQuery, let's call
it R.
I assume that the user can enter its search query (words) in another
field. For this you create another query (for example by using the
QueryParser), let's call this one Q.
Now you have 2 queries (Q and R) which needs to be combined in a Boolean
query, so you get a boolean query: Q OR R
This can be done by specifying Q as boolean 'should' clause and R as
boolean 'should' clause. The BooleanQuery is the one to be used, and
documents matching the entered range will appear higher, because it
matches both clauses, and docs matching Q, but are outside that range
only match the first clause.

Br,
Elmer



On Wed, Jun 15, 2011 at 5:43 PM, Sowmya V.B. <vbsowmya@gmail.com> wrote:

> Hi
>
> Thanks for the tip.
>
> I tried what you suggested. But, I get the same results as filtering the
> results on the range of values of a given field, but with different scores
> now.
>
> 1) Here is an example query I gave to Query parser:
>
> newtextQuery = textQuery + "  OR " +  field +":[" + frompercent+ " TO " +
> topercent + "]^" + myBoost;
> (Where textQuery is what the user gave, field, frompercent, topercent,
> myboost : are the variables in the code)
>
> A Lucene query for this was something like:
> Query New: ((text:space title:space text.stem:space) field4:[1.0 TO
> 37.0]^10.0)
>
> 2) Here is what I did when I used a filter:
> -used a longtrierangefilter, to filter results based on the range obtained
> by "frompercent" to "topercent", for the same query
>
> Basically, the results for both the methods are the same ranked documents,
> albeit with different scores.
>
> Am I missing something here??
>
>
>
> -----------------------
> The boost is something you do with your query, before it is issued to
> the searcher.
>
> If you use the query parser, you can provide the *additional* query
> parameters by concatenating them to the standard user query:
> String fullQuery = userQuery
>   + " OR myrange:[" + from + " TO " + to + "30]^" + myBoost;
>
> If you build your Query by code, you can use ConstantScoreRangeQuery or
> RangeQuery for the range part, where you can call setBoost(float).
>
> - Toke Eskildsen
>
>
> On Wed, Jun 15, 2011 at 11:22 AM, Sowmya V.B. <vbsowmya@gmail.com> wrote:
>
>> Hi
>>
>> I am not getting the replies to my inbox ...hence the delay in responding.
>>
>> >>I think you misunderstand Eric's answer, as his suggestion does exactly
>>
>> what you ask for. Have you tried the "OR **field**:[20 TO 30]^10" method?
>>
>>
>> Well, my question is partly answered with this clarification. But, I am
>> still wondering how to do that programmatically.
>> the (20-30) range is not a fixed range. Its chosen by the user. It can as
>> well be (12-34) too. I am not able to figure out if there is any function in
>> the searcher classs, which will enable me give these specifications
>> ...something like... a setboost(), which exists during index time.
>>
>> S.
>>
>> On Fri, Jun 10, 2011 at 10:38 AM, Sowmya V.B. <vbsowmya@gmail.com> wrote:
>>
>>> Hi Erick
>>>
>>> Thanks for the response.
>>>
>>> I would want the documents with values within #20-30# be ranked above the
>>> documents with some other values.
>>> Well, since there might be a case where there are no documents in that
>>> range, I would also prefer to have other documents listed too, somewhere
>>> lower down the rankings.
>>>
>>> Also, I don't want to do a simple sort on the results what lucene gives,
>>> with its own ranking function.
>>> I am looking for a possibility of boosting a given document at
>>> query-time, based on the values of a particular field : instead of plainly
>>> sorting the normal lucene results based on this field.
>>> Is that possible, without going in to the scoring function?
>>>
>>> Sowmya.
>>>
>>> *************
>>> I take it from this that you want documents with values #outside# 20-30
>>> to still be found? In that case you can do something like add a clause
>>> like:
>>>
>>> OR *field*:[20 TO 30]^10
>>>
>>> or similar.
>>>
>>> Best
>>> Erick
>>>
>>> On Thu, Jun 9, 2011 at 5:10 PM, Sowmya V.B. <vbsowmya@gmail.com> wrote:
>>>
>>>> Hi All
>>>>
>>>> I have joined the group only today..and began working with lucene only
>>>> recently.
>>>>
>>>> My problem: I want to boost the ranking of certain documents, based on
>>>> the values of certain fields.
>>>>
>>>> For example, if the field has  a range of values from 0 to 100 and the
>>>> user chooses something like 20 to 30, as an option, along with the query; I
>>>> want the documents which satisfy that condition (The field value being
>>>> between 20 and 30) to get a boost during ranking.
>>>>
>>>> Is there a way to do that in Lucene? I could not find an understandable
>>>> explanation in the past mails about this. Hence, starting a fresh thread.
>>>>
>>>> Sowmya.
>>>>
>>>> --
>>>> Sowmya V.B.
>>>> ----------------------------------------------------
>>>> Losing optimism is blasphemy!
>>>> http://vbsowmya.wordpress.com
>>>> ----------------------------------------------------
>>>>
>>>
>>>
>>>
>>> --
>>> Sowmya V.B.
>>> ----------------------------------------------------
>>> Losing optimism is blasphemy!
>>> http://vbsowmya.wordpress.com
>>> ----------------------------------------------------
>>>
>>
>>
>>
>> --
>> Sowmya V.B.
>> ----------------------------------------------------
>> Losing optimism is blasphemy!
>> http://vbsowmya.wordpress.com
>> ----------------------------------------------------
>>
>
>
>
> --
> Sowmya V.B.
> ----------------------------------------------------
> Losing optimism is blasphemy!
> http://vbsowmya.wordpress.com
> ----------------------------------------------------
>



-- 
Sowmya V.B.
----------------------------------------------------
Losing optimism is blasphemy!
http://vbsowmya.wordpress.com
----------------------------------------------------

--bcaec5196bc5bfc8bd04a5d09093--

From java-user-return-50042-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun 16 10:47:38 2011
Return-Path: <java-user-return-50042-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C354E6439
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 16 Jun 2011 10:47:38 +0000 (UTC)
Received: (qmail 90316 invoked by uid 500); 16 Jun 2011 10:47:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90232 invoked by uid 500); 16 Jun 2011 10:47:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90224 invoked by uid 99); 16 Jun 2011 10:47:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jun 2011 10:47:35 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.113.200.5] (HELO homiemail-a47.g.dreamhost.com) (208.113.200.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jun 2011 10:47:30 +0000
Received: from homiemail-a47.g.dreamhost.com (localhost [127.0.0.1])
	by homiemail-a47.g.dreamhost.com (Postfix) with ESMTP id A1B6628405B
	for <java-user@lucene.apache.org>; Thu, 16 Jun 2011 03:47:07 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; c=nofws; d=getopt.org; h=message-id:date
	:from:mime-version:to:subject:references:in-reply-to
	:content-type:content-transfer-encoding; q=dns; s=getopt.org; b=
	WNQdmvQlYQqTBKIYzMvfF+wcrWtOOxeidRlxDrGjd5VvMlXwy8hArL7bGJUDbvqD
	xtXEYhGCYVSLR+2xl8hobeuPhjSz/j9VJ+1Am6P4QroGua89o3JfHZpJm4FGjajG
	QERET/FiBpdNNRnMdgWZkNOnjAKf5Ydodqlq2LUEdfo=
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed; d=getopt.org; h=message-id
	:date:from:mime-version:to:subject:references:in-reply-to
	:content-type:content-transfer-encoding; s=getopt.org; bh=26Y63+
	RPpkVvAKOly6slzlsuS90=; b=n6QEgFzwHgXbehRD6PUYDq7fZ6COshMya4JUCn
	dKhm8fDCf1BauyAcHSSXCvx8pPl2IR4j2JxEiuXQ4IrwbF6j6i6YQp6arlGVISAy
	HqK1Pb5+fp8BKif/+ldS+rpmp8IRzLl6t8OKbcjY7Q7G5TPtvlE13H4Vp1qrC5d7
	84YmM=
Received: from abacus.local (unknown [81.219.54.251])
	(using TLSv1 with cipher AES256-SHA (256/256 bits))
	(No client certificate requested)
	(Authenticated sender: ab@getopt.org)
	by homiemail-a47.g.dreamhost.com (Postfix) with ESMTPSA id 29B82284056
	for <java-user@lucene.apache.org>; Thu, 16 Jun 2011 03:47:06 -0700 (PDT)
Message-ID: <4DF9DF28.4030702@getopt.org>
Date: Thu, 16 Jun 2011 12:47:04 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.2.17) Gecko/20110414 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Changing Boosting that was set at indexing time
References: <BANLkTim+WSsy=0-SdqKPjnDGa0ogdhZ5-w@mail.gmail.com>	<BANLkTi=kJYhD8fL7tcVSXKVg2FAF5=cwUg@mail.gmail.com> <BANLkTi=q97cVk7Nrsc0JWORKs=b30iHR3Q@mail.gmail.com>
In-Reply-To: <BANLkTi=q97cVk7Nrsc0JWORKs=b30iHR3Q@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit

On 6/15/11 7:14 PM, liat oren wrote:
> Ok, thanks a lot
>
> On 15 June 2011 11:36, Ian Lea<ian.lea@gmail.com>  wrote:
>
>> Don't think so.  The boost info is encoded and stored at index time.

Boosts that you set are multiplied by lengthNorm and then stored as a 
coarse-grained float in fieldNorm values. There is a utility class that 
can modify them, in contrib/misc (FieldNormModifier). It sets the boost 
to 1.0 and then applies a Similarity.lengthNorm based on the Similarity 
implementation of your choice. This is a little round-about, but perhaps 
this could work for you?

If not, you can modify norms directly using IndexReader.setNorm(...) but 
you need to remember that this method uses raw byte values, that is the 
result of encoding a floating point value with 
Similarity.encodeNormValue(..).

-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50043-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun 16 14:21:21 2011
Return-Path: <java-user-return-50043-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A4B556990
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 16 Jun 2011 14:21:21 +0000 (UTC)
Received: (qmail 75151 invoked by uid 500); 16 Jun 2011 14:21:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75107 invoked by uid 500); 16 Jun 2011 14:21:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75099 invoked by uid 99); 16 Jun 2011 14:21:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jun 2011 14:21:19 +0000
X-ASF-Spam-Status: No, hits=-1.6 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [150.148.0.65] (HELO ironport5.fda.gov) (150.148.0.65)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jun 2011 14:21:12 +0000
X-SBRS: None
X-MID: 223878458
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: At8AAMAQ+k0KuSrB/2dsb2JhbABSl1iPf8ldhicEmnmGcg
Received: from fdswp2193.fda.gov ([10.185.42.193])
  by ironport5.fda.gov with ESMTP/TLS/AES128-SHA; 16 Jun 2011 10:18:19 -0400
Received: from FDSWV2130.fda.gov ([169.254.2.210]) by FDSWP2193.fda.gov
 ([::1]) with mapi; Thu, 16 Jun 2011 10:20:50 -0400
From: "Sudarsan, Sithu D." <Sithu.Sudarsan@fda.hhs.gov>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Date: Thu, 16 Jun 2011 10:20:49 -0400
Subject: RE: RemoteSearchable deprecated. What to replace it with?
Thread-Topic: RemoteSearchable deprecated. What to replace it with?
Thread-Index: Acwr50IAEhE84E+hQvyZ/YzoGux80gASR1qw
Message-ID: <DDF2F4F8C0BDCC4CA63B2E35115F14B813673F5E91@FDSWV2130.fda.gov>
References: <BANLkTin+h1PDupVZMyp6crX2YXaUz77jmA@mail.gmail.com>
In-Reply-To: <BANLkTin+h1PDupVZMyp6crX2YXaUz77jmA@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0


Hi Tsadok,

In Lucene 3.1:
"MultiSearcher is deprecated; ParallelMultiSearcher has been absorbed direc=
tly into IndexSearcher "

-Sithu

-----Original Message-----
From: Israel Tsadok [mailto:itsadok@gmail.com]=20
Sent: Thursday, June 16, 2011 1:35 AM
To: java-user@lucene.apache.org
Subject: RemoteSearchable deprecated. What to replace it with?

I use a ParallelMultiSearcher to search across a bunch of RemoteSearchables=
,
pretty much as recommended in Lucene In Action, First Edition, with the
appropriate adjustments for Lucene 3.0. This seems to be completely
deprecated in 3.1.

What is the simplest way for me to continue having the ability to search
across multiple servers?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50044-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun 16 14:43:18 2011
Return-Path: <java-user-return-50044-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 43BF4688F
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 16 Jun 2011 14:43:18 +0000 (UTC)
Received: (qmail 17989 invoked by uid 500); 16 Jun 2011 14:43:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17947 invoked by uid 500); 16 Jun 2011 14:43:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17939 invoked by uid 99); 16 Jun 2011 14:43:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jun 2011 14:43:15 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of itsadok@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jun 2011 14:43:08 +0000
Received: by wwi18 with SMTP id 18so1087686wwi.5
        for <java-user@lucene.apache.org>; Thu, 16 Jun 2011 07:42:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=/zy/o3zOm7N1oJK7aPa5vMintaeuA/3bnVgI41PSuhc=;
        b=glP8V1prpt9f/5cf3FJL9jnkWZ/FK5XmRlCNtLRXcbODd/TuDp1IZu4PZ+83mVhL+w
         FBafRUeGiiz1w3kZHeMw4ZTMhIvb2uxbDbvPrn/zD4DcrJn3NFqyYprzsBdrqhPlT/ol
         jDKJYn1STxtyPjkx205ghjIu54IPbRYzyoR0g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=RuTn4tgnY4Q6nS/AVLk5E9y0qq9+Oj4r/+3UqlIUYoIzoyD1GuwQDy+aoYfwfBpWEH
         UOpZCN++yOELvhGF6iKso+FkLLhcVYksKETfvmtiLkvkbHzKoqTh6OIXoxT64oCGc730
         FVKLvWqpiy75380K9lPodWqnT8GlciOy7t+ds=
Received: by 10.227.206.21 with SMTP id fs21mr1033984wbb.40.1308235368135;
 Thu, 16 Jun 2011 07:42:48 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.179.14 with HTTP; Thu, 16 Jun 2011 07:42:28 -0700 (PDT)
In-Reply-To: <DDF2F4F8C0BDCC4CA63B2E35115F14B813673F5E91@FDSWV2130.fda.gov>
References: <BANLkTin+h1PDupVZMyp6crX2YXaUz77jmA@mail.gmail.com> <DDF2F4F8C0BDCC4CA63B2E35115F14B813673F5E91@FDSWV2130.fda.gov>
From: Israel Tsadok <itsadok@gmail.com>
Date: Thu, 16 Jun 2011 17:42:28 +0300
Message-ID: <BANLkTik8pZrjPT8tWbLKrXZpYKJoBOWtqQ@mail.gmail.com>
Subject: Re: RemoteSearchable deprecated. What to replace it with?
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015174c145e667d5a04a5d5489e
X-Virus-Checked: Checked by ClamAV on apache.org

--0015174c145e667d5a04a5d5489e
Content-Type: text/plain; charset=ISO-8859-1

Thanks for answering.
If I understand it correctly, I can use IndexSearcher concurrently over many
IndexReaders. But since there's no RemoteIndexReader, I'm still left with
the same basic problem. How to I search across several servers?

--0015174c145e667d5a04a5d5489e--

From java-user-return-50045-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun 16 14:54:27 2011
Return-Path: <java-user-return-50045-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9718C62AE
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 16 Jun 2011 14:54:27 +0000 (UTC)
Received: (qmail 45137 invoked by uid 500); 16 Jun 2011 14:54:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45086 invoked by uid 500); 16 Jun 2011 14:54:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45078 invoked by uid 99); 16 Jun 2011 14:54:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jun 2011 14:54:24 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jun 2011 14:54:18 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id CDB87D36002
	for <java-user@lucene.apache.org>; Thu, 16 Jun 2011 16:53:50 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id f8wWIUdU3K1L for <java-user@lucene.apache.org>;
	Thu, 16 Jun 2011 16:53:44 +0200 (CEST)
Received: from VEGA (gate1.marum.de [134.102.237.1])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 2A089D36001
	for <java-user@lucene.apache.org>; Thu, 16 Jun 2011 16:53:43 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <BANLkTin+h1PDupVZMyp6crX2YXaUz77jmA@mail.gmail.com> <DDF2F4F8C0BDCC4CA63B2E35115F14B813673F5E91@FDSWV2130.fda.gov> <BANLkTik8pZrjPT8tWbLKrXZpYKJoBOWtqQ@mail.gmail.com>
In-Reply-To: <BANLkTik8pZrjPT8tWbLKrXZpYKJoBOWtqQ@mail.gmail.com>
Subject: RE: RemoteSearchable deprecated. What to replace it with?
Date: Thu, 16 Jun 2011 16:53:47 +0200
Message-ID: <007001cc2c35$359afba0$a0d0f2e0$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQGYEYCjp6HaHHRFERjX0U3aa2AJBQG0HuxIAqS+/K2VBX7WQA==
Content-Language: de

You have to implement it yourself. Lucene 3.3 will provide some additions to
IndexSearcher to merge TopDocs results from different searchers, but
collecting those results and transferring over the network is your task. Or
simply use Solr (which is an implementation, to exactly do that). This new
API does not have the problems MultiSearcher had as it uses no global IDF
and does not try to make scores compatible between searchers to merge. These
algorithms caused major bugs.

The new interface is https://issues.apache.org/jira/browse/LUCENE-3191

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Israel Tsadok [mailto:itsadok@gmail.com]
> Sent: Thursday, June 16, 2011 4:42 PM
> To: java-user@lucene.apache.org
> Subject: Re: RemoteSearchable deprecated. What to replace it with?
> 
> Thanks for answering.
> If I understand it correctly, I can use IndexSearcher concurrently over
many
> IndexReaders. But since there's no RemoteIndexReader, I'm still left with
the
> same basic problem. How to I search across several servers?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50046-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun 16 15:07:42 2011
Return-Path: <java-user-return-50046-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id ED6F06BC2
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 16 Jun 2011 15:07:41 +0000 (UTC)
Received: (qmail 76754 invoked by uid 500); 16 Jun 2011 15:07:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76709 invoked by uid 500); 16 Jun 2011 15:07:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76701 invoked by uid 99); 16 Jun 2011 15:07:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jun 2011 15:07:39 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of itsadok@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jun 2011 15:07:33 +0000
Received: by wwi18 with SMTP id 18so1106099wwi.5
        for <java-user@lucene.apache.org>; Thu, 16 Jun 2011 08:07:12 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=Vwm/bKy4ssls37CKISBb8cabxwKbgoYpk9wFO6bWj0Y=;
        b=IvtV7MfExag5vtiahWaj3GlFbj8CWUJ4BVyn9gyXgtNuEOn5THlH9aIGdRT4yj+NX2
         /8VK+BKPNfKIw/OWfMiix6ffAzBpLGsPxP1dcPgAl/r0N2RJTEBUgfHPrOqVvGcJ6UEA
         JWBkrASGVn5I2ZQbioJNgd5lrhv4yIRRruP+I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=E6bP8stJfERataTnDR9++pXny2Y0ImUTYTxDTFsNUKMRjk8h93eUjV8H6xp2ocQxdx
         NuJfrBuiQc+06PXxpTZXRu0QQ2HWTHbc0iO6ueqtFWoN5IrLCkoW7qqkvZCTNuZ3Nf6L
         bMJBCNJhFokS5/BXJbByuak3y9/vHyije50rQ=
Received: by 10.227.198.199 with SMTP id ep7mr1043501wbb.40.1308236832104;
 Thu, 16 Jun 2011 08:07:12 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.179.14 with HTTP; Thu, 16 Jun 2011 08:06:52 -0700 (PDT)
In-Reply-To: <007001cc2c35$359afba0$a0d0f2e0$@thetaphi.de>
References: <BANLkTin+h1PDupVZMyp6crX2YXaUz77jmA@mail.gmail.com>
 <DDF2F4F8C0BDCC4CA63B2E35115F14B813673F5E91@FDSWV2130.fda.gov>
 <BANLkTik8pZrjPT8tWbLKrXZpYKJoBOWtqQ@mail.gmail.com> <007001cc2c35$359afba0$a0d0f2e0$@thetaphi.de>
From: Israel Tsadok <itsadok@gmail.com>
Date: Thu, 16 Jun 2011 18:06:52 +0300
Message-ID: <BANLkTi=7QLpBxFL5Xwy8-1mh9EUd4cg0Bg@mail.gmail.com>
Subject: Re: RemoteSearchable deprecated. What to replace it with?
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015174c3818a8e00f04a5d59fa3

--0015174c3818a8e00f04a5d59fa3
Content-Type: text/plain; charset=ISO-8859-1

Great. Thanks!

--0015174c3818a8e00f04a5d59fa3--

From java-user-return-50047-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun 16 21:28:46 2011
Return-Path: <java-user-return-50047-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8083C6FE3
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 16 Jun 2011 21:28:46 +0000 (UTC)
Received: (qmail 75073 invoked by uid 500); 16 Jun 2011 21:03:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74845 invoked by uid 500); 16 Jun 2011 21:02:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74564 invoked by uid 99); 16 Jun 2011 21:02:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jun 2011 21:02:16 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [188.121.53.2] (HELO n1plout04-02.prod.ams1.secureserver.net) (188.121.53.2)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 16 Jun 2011 21:02:00 +0000
Received: (qmail 3299 invoked from network); 16 Jun 2011 21:01:37 -0000
Received: from unknown (94.159.195.13)
  by n1plout04-02.prod.ams1.secureserver.net (188.121.53.2) with ESMTP; 16 Jun 2011 21:01:37 -0000
Message-ID: <4DFA6F27.9050303@code972.com>
Date: Fri, 17 Jun 2011 00:01:27 +0300
From: Itamar Syn-Hershko <itamar@code972.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.17) Gecko/20110414 Lightning/1.0b2 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Coloring search results based on score?
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,


Interesting question: is it possible to color search results in a 
web-page based on their score? e.g. most relevant results in green, and 
then different shades through orange, yellow, red and then white.


Theoretically, one could take the highest score and color based on 
proximity / distribution, but the highest score can be invalid in itself.


I could bring in a hardcoded cutoff point, where results are not 
considered relevant and not color any results if the highest score 
doesn't go above that threshold (e.g. score = 1.0), but then again - 
complex queries can yield relevant results with low scores.


So my question is: has anyone ever tackled this issue, and is this even 
doable?


Thanks in advance!


Itamar.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50048-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun 16 22:22:02 2011
Return-Path: <java-user-return-50048-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9781D6708
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 16 Jun 2011 22:22:02 +0000 (UTC)
Received: (qmail 93057 invoked by uid 500); 16 Jun 2011 22:22:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93012 invoked by uid 500); 16 Jun 2011 22:21:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93004 invoked by uid 99); 16 Jun 2011 22:21:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jun 2011 22:21:59 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,RFC_ABUSE_POST,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [217.146.183.93] (HELO nm17-vm0.bullet.mail.ukl.yahoo.com) (217.146.183.93)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 16 Jun 2011 22:21:50 +0000
Received: from [217.146.183.215] by nm17.bullet.mail.ukl.yahoo.com with NNFMP; 16 Jun 2011 22:21:28 -0000
Received: from [77.238.184.62] by tm8.bullet.mail.ukl.yahoo.com with NNFMP; 16 Jun 2011 22:21:28 -0000
Received: from [127.0.0.1] by smtp131.mail.ukl.yahoo.com with NNFMP; 16 Jun 2011 22:21:28 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1308262888; bh=tFVLH90izkzLKsAOoRPr4ojZ961wF40kol+ublPQxdI=; h=X-Yahoo-Newman-Id:X-Yahoo-Newman-Property:X-YMail-OSG:X-Yahoo-SMTP:Received:Content-Type:Mime-Version:Subject:From:In-Reply-To:Date:Content-Transfer-Encoding:Message-Id:References:To:X-Mailer; b=qkzJW2/uDVUrHTVa7Og49ijVuBGHAZDz8928LB6hAhbNimDjkqHI2W8V89gb33Fsru9cZMbfou14zfo8ze6n8GxOFASjFhkNgQO3TSLPvQkK1mCGRueqIG4rdlfzs0mK/4iVxQFx/sCL6p2mQaAoqg24/Mq8zjlEfHZEfqw9V5s=
X-Yahoo-Newman-Id: 730079.93264.bm@smtp131.mail.ukl.yahoo.com
X-Yahoo-Newman-Property: ymail-3
X-YMail-OSG: VtiNODwVM1kDxe9c7TOqE0qjEzRi67E.3MB34xwDKB5R5wu
 8v8pm05vMB21V1fm8864o7UUk6LFhO7PHLVyZ5gT94G.UzLcSj2IM5AUHCMz
 ZDXkp_dvHszxYn9KPK_fyn5WeKE1CY_RG2gxgy4DLTuY1ag28B1CvUEzALWI
 ucA0Q1oEs2GyQmY2x8jlV1472d3HYWvilrnSt8IaOGK6V8cmNg8ixb7h1EdN
 cKpSlpbm44CwUI3g3RPBvXwCt9NCTfKP5aKp6KUClbYg7J9b94mk1D0O3nkQ
 GRrd3el.sk.VLxrJu2bVQx7u.db17dNZuq0NaXGyQAMVKdMuynaEX0cCZ
X-Yahoo-SMTP: rdTGKYaswBBzjeOz17cOw.4gNsDMDjs6
Received: from [192.168.1.50] (markharw00d@194.106.34.5 with plain)
        by smtp131.mail.ukl.yahoo.com with SMTP; 16 Jun 2011 22:21:28 +0000 GMT
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1084)
Subject: Re: Coloring search results based on score?
From: Mark Harwood <markharw00d@yahoo.co.uk>
In-Reply-To: <4DFA6F27.9050303@code972.com>
Date: Thu, 16 Jun 2011 23:21:27 +0100
Content-Transfer-Encoding: quoted-printable
Message-Id: <E2D9D9E2-CB7C-4683-A679-AB280F4BD80F@yahoo.co.uk>
References: <4DFA6F27.9050303@code972.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1084)
X-Virus-Checked: Checked by ClamAV on apache.org

See Highlighter's GradientFormatter

Cheers
Mark


On 16 Jun 2011, at 22:01, Itamar Syn-Hershko wrote:

> Hi all,
>=20
>=20
> Interesting question: is it possible to color search results in a =
web-page based on their score? e.g. most relevant results in green, and =
then different shades through orange, yellow, red and then white.
>=20
>=20
> Theoretically, one could take the highest score and color based on =
proximity / distribution, but the highest score can be invalid in =
itself.
>=20
>=20
> I could bring in a hardcoded cutoff point, where results are not =
considered relevant and not color any results if the highest score =
doesn't go above that threshold (e.g. score =3D 1.0), but then again - =
complex queries can yield relevant results with low scores.
>=20
>=20
> So my question is: has anyone ever tackled this issue, and is this =
even doable?
>=20
>=20
> Thanks in advance!
>=20
>=20
> Itamar.
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50049-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun 16 22:30:32 2011
Return-Path: <java-user-return-50049-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 38F876A4D
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 16 Jun 2011 22:30:32 +0000 (UTC)
Received: (qmail 4037 invoked by uid 500); 16 Jun 2011 22:30:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3993 invoked by uid 500); 16 Jun 2011 22:30:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3985 invoked by uid 99); 16 Jun 2011 22:30:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jun 2011 22:30:29 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [188.121.53.1] (HELO n1plout04-01.prod.ams1.secureserver.net) (188.121.53.1)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 16 Jun 2011 22:30:22 +0000
Received: (qmail 16708 invoked from network); 16 Jun 2011 22:29:59 -0000
Received: from unknown (94.159.195.13)
  by n1plout04-01.prod.ams1.secureserver.net (188.121.53.1) with ESMTP; 16 Jun 2011 22:29:58 -0000
Message-ID: <4DFA83E3.1040800@code972.com>
Date: Fri, 17 Jun 2011 01:29:55 +0300
From: Itamar Syn-Hershko <itamar@code972.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.17) Gecko/20110414 Lightning/1.0b2 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Coloring search results based on score?
References: <4DFA6F27.9050303@code972.com> <E2D9D9E2-CB7C-4683-A679-AB280F4BD80F@yahoo.co.uk>
In-Reply-To: <E2D9D9E2-CB7C-4683-A679-AB280F4BD80F@yahoo.co.uk>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

No, that was not what I meant.


I'm not interested in coloring the actual text, but in giving the user 
an indication of how relevant the results are. Instead of displaying the 
result score, I want to give some visual meter to show that. The highest 
ranking result will be green if the it is really relevant to the query, 
yellow if less and so on.


My question is if there's a good enough way to measure this - for 
example if the first results is 20 times the score of the second, or 
that's something I can't really do...


On 17/06/2011 01:21, Mark Harwood wrote:

> See Highlighter's GradientFormatter
>
> Cheers
> Mark
>
>
> On 16 Jun 2011, at 22:01, Itamar Syn-Hershko wrote:
>
>> Hi all,
>>
>>
>> Interesting question: is it possible to color search results in a web-page based on their score? e.g. most relevant results in green, and then different shades through orange, yellow, red and then white.
>>
>>
>> Theoretically, one could take the highest score and color based on proximity / distribution, but the highest score can be invalid in itself.
>>
>>
>> I could bring in a hardcoded cutoff point, where results are not considered relevant and not color any results if the highest score doesn't go above that threshold (e.g. score = 1.0), but then again - complex queries can yield relevant results with low scores.
>>
>>
>> So my question is: has anyone ever tackled this issue, and is this even doable?
>>
>>
>> Thanks in advance!
>>
>>
>> Itamar.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50050-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jun 17 00:26:56 2011
Return-Path: <java-user-return-50050-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 350EE6877
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 17 Jun 2011 00:26:56 +0000 (UTC)
Received: (qmail 30457 invoked by uid 500); 17 Jun 2011 00:26:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30419 invoked by uid 500); 17 Jun 2011 00:26:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30411 invoked by uid 99); 17 Jun 2011 00:26:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jun 2011 00:26:53 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.113.200.5] (HELO homiemail-a46.g.dreamhost.com) (208.113.200.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jun 2011 00:26:47 +0000
Received: from homiemail-a46.g.dreamhost.com (localhost [127.0.0.1])
	by homiemail-a46.g.dreamhost.com (Postfix) with ESMTP id A6B223E405C
	for <java-user@lucene.apache.org>; Thu, 16 Jun 2011 17:26:20 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; c=nofws; d=getopt.org; h=message-id:date
	:from:mime-version:to:subject:references:in-reply-to
	:content-type:content-transfer-encoding; q=dns; s=getopt.org; b=
	ak/jMEhpDFAhgEDasXkqGiL3iRZBbNB4fp9hDb/vKyjDquEPm3Jv6WhoumKdO/PF
	7tiFXOuMl2uTfeXaZIGlGk4CuINVm7sxTGxAXGYdwDjfmJV3pRf/qSFM3ml3dvkn
	Y71veo24jn8ncd2Iyak5bXiwsQ8cPl7DFq0U0msuu8M=
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed; d=getopt.org; h=message-id
	:date:from:mime-version:to:subject:references:in-reply-to
	:content-type:content-transfer-encoding; s=getopt.org; bh=oiDdby
	4If2exObZpTa+g08fi/nk=; b=rd9tLk8zuigdwAO8CV8GP+dn2EcV6ZO0YkSHya
	GzI6rvikSUdHrA9EjM81EZVtlePWoD+7WvGoldZKwL7khVNrMPCPaXm0G5e5vdh+
	oxM68m30VUo4dUhXpzEJ0NTqppE1xV7fauSGTrlqib+hevJiMSJecKMy+82SyX2I
	BtTcI=
Received: from abacus.local (unknown [81.219.54.251])
	(using TLSv1 with cipher AES256-SHA (256/256 bits))
	(No client certificate requested)
	(Authenticated sender: ab@getopt.org)
	by homiemail-a46.g.dreamhost.com (Postfix) with ESMTPSA id E100D3E405B
	for <java-user@lucene.apache.org>; Thu, 16 Jun 2011 17:26:19 -0700 (PDT)
Message-ID: <4DFA9F28.4050902@getopt.org>
Date: Fri, 17 Jun 2011 02:26:16 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.2.17) Gecko/20110414 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Coloring search results based on score?
References: <4DFA6F27.9050303@code972.com> <E2D9D9E2-CB7C-4683-A679-AB280F4BD80F@yahoo.co.uk> <4DFA83E3.1040800@code972.com>
In-Reply-To: <4DFA83E3.1040800@code972.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On 6/17/11 12:29 AM, Itamar Syn-Hershko wrote:
> No, that was not what I meant.
>
>
> I'm not interested in coloring the actual text, but in giving the user
> an indication of how relevant the results are. Instead of displaying the
> result score, I want to give some visual meter to show that. The highest
> ranking result will be green if the it is really relevant to the query,
> yellow if less and so on.
>
>
> My question is if there's a good enough way to measure this - for
> example if the first results is 20 times the score of the second, or
> that's something I can't really do...

What you describe reminds me of a special case of a more general 
visualization technique called Tilebars. Tilebars are an N x M 
histogram, where N rows correspond to N query terms (or clauses), and M 
columns represent buckets of score contributions distributed over the 
sections of the document. Each cell is then colored according to the 
portion of score that it contains.

The coloring schema may be non-linear, and the document division into 
chunks may not be linear either.

You can then collapse Tilebars if you wish in one or both dimensions, e.g.:

* N x 1 represents relative score contributions from each query term
* 1 x M represents the distribution of score contributions along the 
length of document
* 1 x 1 represents the relative score of all clauses for the whole 
document, relative to other documents (the difference is in coloring)

See this link for more details: 
http://people.ischool.berkeley.edu/~hearst/research/tilebars.html

-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50051-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jun 17 01:16:30 2011
Return-Path: <java-user-return-50051-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 60F1D625B
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 17 Jun 2011 01:16:30 +0000 (UTC)
Received: (qmail 85474 invoked by uid 500); 17 Jun 2011 01:16:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85430 invoked by uid 500); 17 Jun 2011 01:16:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85422 invoked by uid 99); 17 Jun 2011 01:16:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jun 2011 01:16:28 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of goksron@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jun 2011 01:16:23 +0000
Received: by qyk2 with SMTP id 2so294508qyk.14
        for <java-user@lucene.apache.org>; Thu, 16 Jun 2011 18:16:02 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type:content-transfer-encoding;
        bh=EttseOhmVh2AEp7lW6Dwqc+GnRrZbXwEwrXfP3yrfQw=;
        b=Zvvas813Sn3dBP95p5czHiUVVieXKXVoRZe+1dCzF0NuIVPVJ4ozzgfdbc1wNtznAL
         hE+7kFIt6nWd1b5HArtttPBNKiYU44MhXDQBaEB93BmoNbl9USAvkPBeoKcs+0FtBreg
         HVVJhBTewhRKmztZnJfUdmiiFGgr/FAcVyJlI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=Wxl2U89WhUWuUjTih0AKEFfc1jmYyfAzfBg3QFOwUmCSMAVQGvOoi/3jk5irapAbrA
         lJyQXBdS9YVDw2XxwrkhYGNA34orXrfOdrZb7s7l+ZN2wtluuh+int+0wsrdr5aC42lD
         sQ3u7NT6rdOzj0NUFPYJ9307M4fk4NEj0T7jA=
MIME-Version: 1.0
Received: by 10.229.232.71 with SMTP id jt7mr1055116qcb.256.1308273361981;
 Thu, 16 Jun 2011 18:16:01 -0700 (PDT)
Received: by 10.229.191.70 with HTTP; Thu, 16 Jun 2011 18:16:01 -0700 (PDT)
In-Reply-To: <001301cc24f8$ccdaea50$6690bef0$@com>
References: <000f01cc244d$db001840$910048c0$@com>
	<1307435291.766.313.camel@te-prime>
	<001301cc24f8$ccdaea50$6690bef0$@com>
Date: Thu, 16 Jun 2011 18:16:01 -0700
Message-ID: <BANLkTimrVr7LYG6vQybqqO3MMqDyRM9u5A@mail.gmail.com>
Subject: Re: RAMDirectory doesn't win over FSDirectory all the time, why?
From: Lance Norskog <goksron@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

The RAMDirectory uses Java memory, an FSDirectory does not. Holding
Java memory makes garbage collection work harder. The operating system
is very very good at managing disk buffers, and does a better job
using spare memory than Java does.

For real-world sites, RAMDirectory is almost always useless. Maybe the
Instantiated index stuff is more what you want?

Lance

On Tue, Jun 7, 2011 at 2:52 AM, zhoucheng2008 <zhoucheng2008@gmail.com> wro=
te:
> Makes sense. Thanks
>
> -----Original Message-----
> From: Toke Eskildsen [mailto:te@statsbiblioteket.dk]
> Sent: Tuesday, June 07, 2011 4:28 PM
> To: java-user@lucene.apache.org
> Subject: Re: RAMDirectory doesn't win over FSDirectory all the time, why?
>
> On Mon, 2011-06-06 at 15:29 +0200, zhoucheng2008 wrote:
>> I read the lucene in action book and just tested the
>> FSversusRAMDirectoryTest.java with the following uncommented:
>> [...]Here is the output:
>>
>> RAMDirectory Time: 805 ms
>>
>> FSDirectory Time : 728 ms
>
> This is the code, right?
> http://java.codefetch.com/example/in/LuceneInAction/src/lia/indexing/FSve=
rsusRAMDirectoryTest.java
>
> The test is problematic as the same two tests run sequentially.
>
> If you change
> =C2=A0long ramTiming =3D timeIndexWriter(ramDir);
> =C2=A0long fsTiming =3D timeIndexWriter(fsDir);
> to
> =C2=A0long fsTiming =3D timeIndexWriter(fsDir);
> =C2=A0long ramTiming =3D timeIndexWriter(ramDir);
> my guess is that RAMDirectory will be faster. For a better
> comparison, perform each test in separate runs (make a test
> class just for RAMDirectory and one just for FSDirectory,
> then run them one at a time, each in its own JVM).
>
> One big problem when comparing RAMDirectory to file-access
> is caching. What you measure with a test might not be what
> you see in production, as the production index might be
> large compared to RAM available for file caching.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



--=20
Lance Norskog
goksron@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50052-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jun 17 09:09:49 2011
Return-Path: <java-user-return-50052-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1938E482A
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 17 Jun 2011 09:09:49 +0000 (UTC)
Received: (qmail 3685 invoked by uid 500); 17 Jun 2011 09:09:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3621 invoked by uid 500); 17 Jun 2011 09:09:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3613 invoked by uid 99); 17 Jun 2011 09:09:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jun 2011 09:09:45 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vbsowmya@gmail.com designates 209.85.213.48 as permitted sender)
Received: from [209.85.213.48] (HELO mail-yw0-f48.google.com) (209.85.213.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jun 2011 09:09:40 +0000
Received: by ywn13 with SMTP id 13so913640ywn.35
        for <java-user@lucene.apache.org>; Fri, 17 Jun 2011 02:09:20 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:from:date:message-id:subject:to
         :content-type;
        bh=kChyHhM4BI/LlYlj662OqI2XuUT6Ckf40PSGQcTusME=;
        b=NSRwrpi2LEZfv1gzHD3bJ9TiZTA4lPlvy53x7OfGdSvzIfglVSLvfsAdzGRM1oZV7t
         mGj7+frDhRBIfH2iG3neWrSkdQtxgh8cpw6jZswlywVmjDybfHsBOlW/wziTxiNIYi5Z
         ISQOiDhkl3FbS0QQiu6NIMfI2IdSS3LSxhERw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=WaLN/kx/BHYxk+iZuLazfH9gERWZ03bARI9UmI9wryD+IaJkgabHJY20CHclsC8sZ/
         YFyNc6qeNnXgpJ7eDAOpRQ/3q1YM6yadjyqZ/Cwoh2ILhUxAf0UKQdj8DB/xPTUArd2K
         pbUiZy3hg/Cw+OuwZVuSikCjy2R2vXyUakhlc=
Received: by 10.236.125.199 with SMTP id z47mr2685462yhh.476.1308301760079;
 Fri, 17 Jun 2011 02:09:20 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.236.70.36 with HTTP; Fri, 17 Jun 2011 02:09:00 -0700 (PDT)
From: "Sowmya V.B." <vbsowmya@gmail.com>
Date: Fri, 17 Jun 2011 11:09:00 +0200
Message-ID: <BANLkTikvsTseA0zKqx0mdnoH1hSrp_q56g@mail.gmail.com>
Subject: Lucene - TrieRangeQuery
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf303ddb54ab277904a5e4bd61

--20cf303ddb54ab277904a5e4bd61
Content-Type: text/plain; charset=UTF-8

Hi All

Can someone suggest me where I can get an implementation of
LongTrieRangeQuery class? I read about it in one of the Lucene
implementation based reports, but could not find it on Lucene Src.
Does that exist now?
The report I read referred to an implementation by Uwe  Schindler.

A related online article:
http://www.marcsturlese.com/2009/04/08/lucene-trierangequery/

S

-- 
Sowmya V.B.
----------------------------------------------------
Losing optimism is blasphemy!
http://vbsowmya.wordpress.com
----------------------------------------------------

--20cf303ddb54ab277904a5e4bd61--

From java-user-return-50053-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jun 17 09:18:12 2011
Return-Path: <java-user-return-50053-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id EE0AF480C
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 17 Jun 2011 09:18:11 +0000 (UTC)
Received: (qmail 15974 invoked by uid 500); 17 Jun 2011 09:18:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15926 invoked by uid 500); 17 Jun 2011 09:18:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15918 invoked by uid 99); 17 Jun 2011 09:18:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jun 2011 09:18:09 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jun 2011 09:18:04 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id A1D66D36003
	for <java-user@lucene.apache.org>; Fri, 17 Jun 2011 11:17:42 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id W9I4YyeXq6p5 for <java-user@lucene.apache.org>;
	Fri, 17 Jun 2011 11:17:35 +0200 (CEST)
Received: from VEGA (gate1.marum.de [134.102.237.1])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 87A4AD36001
	for <java-user@lucene.apache.org>; Fri, 17 Jun 2011 11:17:35 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <BANLkTikvsTseA0zKqx0mdnoH1hSrp_q56g@mail.gmail.com>
In-Reply-To: <BANLkTikvsTseA0zKqx0mdnoH1hSrp_q56g@mail.gmail.com>
Subject: RE: Lucene - TrieRangeQuery
Date: Fri, 17 Jun 2011 11:17:45 +0200
Message-ID: <004801cc2ccf$6bce8210$436b8630$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-index: AQLYuRsU7TB6Ou7JfWXF6tzzTMdFepKoLAiw
Content-language: de

Hi,

It's called NumericRangeQuery and included since Lucene 2.9 into Core.

Here the documentation from latest Lucene: http://s.apache.org/nrq 

Uwe
-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Sowmya V.B. [mailto:vbsowmya@gmail.com]
> Sent: Friday, June 17, 2011 11:09 AM
> To: java-user@lucene.apache.org
> Subject: Lucene - TrieRangeQuery
> 
> Hi All
> 
> Can someone suggest me where I can get an implementation of
> LongTrieRangeQuery class? I read about it in one of the Lucene
> implementation based reports, but could not find it on Lucene Src.
> Does that exist now?
> The report I read referred to an implementation by Uwe  Schindler.
> 
> A related online article:
> http://www.marcsturlese.com/2009/04/08/lucene-trierangequery/
> 
> S
> 
> --
> Sowmya V.B.
> ----------------------------------------------------
> Losing optimism is blasphemy!
> http://vbsowmya.wordpress.com
> ----------------------------------------------------


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50054-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jun 17 09:43:46 2011
Return-Path: <java-user-return-50054-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3F1664B4E
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 17 Jun 2011 09:43:46 +0000 (UTC)
Received: (qmail 46535 invoked by uid 500); 17 Jun 2011 09:43:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46489 invoked by uid 500); 17 Jun 2011 09:43:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46481 invoked by uid 99); 17 Jun 2011 09:43:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jun 2011 09:43:43 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of sanne.grinovero@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jun 2011 09:43:37 +0000
Received: by iwi5 with SMTP id 5so1699565iwi.35
        for <java-user@lucene.apache.org>; Fri, 17 Jun 2011 02:43:16 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=X6VioS/WmvSrG1Q2+9f6yndk7QiOONH+OEHV3pg4XJg=;
        b=TU+ETo10HbWG16TLHgmM9uqJKDHUU2pTV1kVNTLkfPE1OqKktNYZheRkxsHo7CgTRM
         HWAH1/0gcWgqNVyU/2xfB8y9D+s3FZz20nX5oeH1LaRwhmvxaCsanicNYwMvG+IxQn/g
         mRk+byHPYGJ8Xhx7nEwUb9cKh6v2KOcWVlyCI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=Z/086PI42BoeqlFTQcSVNF7jTCuJy9/9OX/7p0Ji3CWLcv1oevPMQ2ee//K/VsxdWv
         WUx6tqrTJs9/AVpQOez89BydafNn/aq7C44hw/TMBC9slNyW2q2ycA7MqHu51lLLnNwm
         b48ZG1FnGmtBdiT6T31XuZBhTQZpaf4f6MbAQ=
Received: by 10.42.135.65 with SMTP id o1mr1934247ict.207.1308303796051; Fri,
 17 Jun 2011 02:43:16 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.42.48.204 with HTTP; Fri, 17 Jun 2011 02:42:56 -0700 (PDT)
In-Reply-To: <BANLkTimrVr7LYG6vQybqqO3MMqDyRM9u5A@mail.gmail.com>
References: <000f01cc244d$db001840$910048c0$@com> <1307435291.766.313.camel@te-prime>
 <001301cc24f8$ccdaea50$6690bef0$@com> <BANLkTimrVr7LYG6vQybqqO3MMqDyRM9u5A@mail.gmail.com>
From: Sanne Grinovero <sanne.grinovero@gmail.com>
Date: Fri, 17 Jun 2011 10:42:56 +0100
Message-ID: <BANLkTinXN_j8Fc_XAuCS6-7He=mnc6A=+Q@mail.gmail.com>
Subject: Re: RAMDirectory doesn't win over FSDirectory all the time, why?
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,
I came to similar conclusions, and have a similar comparison test
available here:
https://github.com/infinispan/infinispan/blob/master/lucene-directory/src/t=
est/java/org/infinispan/lucene/profiling/PerformanceCompareStressTest.java

In my test I explicitly run the RAMDirectory first to warmup the JVM
and the other Lucene components; also while I default to a short
testing time to perform a fair comparison you should:
a) make the test quite long - a couple of hours
b) this version starts with an empty index and slowly grows up, it
might make more sense to start with a fairly large index.

I'm running the RAMDirectory first as to be fair in my case I wasn't
very interested in it's performance: being limited to the available
memory on your JVM is imho quite a dealbreaker for real applications,
and also since the operating system can apply several smart caches
when there's enough memory, my conclusion is that when you have
memory, you should limit the JVM heap and leave that to the OS to make
better use of FSDirectory, as this implementation is really well
optimized, at least for local disks.

When you don't have enough available memory, I would suggest - but
warning: I'm biased - to try the Infinispan based Lucene Directory
which is able to "join forces" the memory of multiple (remote) JVMs
and passivate on external storage such as disk only when strictly
needed (or for backups/shutdown): being still mostly an in memory
solution it's able to outperform the FSDirectory during write
operations, and is comparable in search performance, in some cases a
little bit slower but it compensates by being able to scale
horizontally with real time distribution. A current limitation is that
you still need to use a single IndexWriter, even cluster-wide: the
code is very simple and directly mimics the FSDirectory logic, so it
supports all the same features and inherits the same limitations
unlike other distributed solutions.

Regards,
Sanne

2011/6/17 Lance Norskog <goksron@gmail.com>:
> The RAMDirectory uses Java memory, an FSDirectory does not. Holding
> Java memory makes garbage collection work harder. The operating system
> is very very good at managing disk buffers, and does a better job
> using spare memory than Java does.
>
> For real-world sites, RAMDirectory is almost always useless. Maybe the
> Instantiated index stuff is more what you want?
>
> Lance
>
> On Tue, Jun 7, 2011 at 2:52 AM, zhoucheng2008 <zhoucheng2008@gmail.com> w=
rote:
>> Makes sense. Thanks
>>
>> -----Original Message-----
>> From: Toke Eskildsen [mailto:te@statsbiblioteket.dk]
>> Sent: Tuesday, June 07, 2011 4:28 PM
>> To: java-user@lucene.apache.org
>> Subject: Re: RAMDirectory doesn't win over FSDirectory all the time, why=
?
>>
>> On Mon, 2011-06-06 at 15:29 +0200, zhoucheng2008 wrote:
>>> I read the lucene in action book and just tested the
>>> FSversusRAMDirectoryTest.java with the following uncommented:
>>> [...]Here is the output:
>>>
>>> RAMDirectory Time: 805 ms
>>>
>>> FSDirectory Time : 728 ms
>>
>> This is the code, right?
>> http://java.codefetch.com/example/in/LuceneInAction/src/lia/indexing/FSv=
ersusRAMDirectoryTest.java
>>
>> The test is problematic as the same two tests run sequentially.
>>
>> If you change
>> =C2=A0long ramTiming =3D timeIndexWriter(ramDir);
>> =C2=A0long fsTiming =3D timeIndexWriter(fsDir);
>> to
>> =C2=A0long fsTiming =3D timeIndexWriter(fsDir);
>> =C2=A0long ramTiming =3D timeIndexWriter(ramDir);
>> my guess is that RAMDirectory will be faster. For a better
>> comparison, perform each test in separate runs (make a test
>> class just for RAMDirectory and one just for FSDirectory,
>> then run them one at a time, each in its own JVM).
>>
>> One big problem when comparing RAMDirectory to file-access
>> is caching. What you measure with a test might not be what
>> you see in production, as the production index might be
>> large compared to RAM available for file caching.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
>
> --
> Lance Norskog
> goksron@gmail.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50055-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jun 17 10:23:40 2011
Return-Path: <java-user-return-50055-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5E41145F9
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 17 Jun 2011 10:23:40 +0000 (UTC)
Received: (qmail 6090 invoked by uid 500); 17 Jun 2011 10:23:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6047 invoked by uid 500); 17 Jun 2011 10:23:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6039 invoked by uid 99); 17 Jun 2011 10:23:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jun 2011 10:23:37 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of vbsowmya@gmail.com designates 209.85.160.176 as permitted sender)
Received: from [209.85.160.176] (HELO mail-gy0-f176.google.com) (209.85.160.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jun 2011 10:23:31 +0000
Received: by gya6 with SMTP id 6so1205024gya.35
        for <java-user@lucene.apache.org>; Fri, 17 Jun 2011 03:23:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=hB+SjhdqcyIfA1aeHhxy2RicFEG8U3/VDoGWM7vE0Ms=;
        b=BEVrxMI1xImtXXpLA3M+Fy7iK+jrY9Z/GQ7fOub9S1ZBgYstPDBxLna/RBOhNSFFyr
         G2BPM6LejvOfD5vfSWlhqIfVO06On3bzPVXxDhbC92iFBx+RhWl1Yvrp+aoonrA6+GSX
         SCo1QUM8h7ViMb3y4/rcJcfNESmUrXs2Vf5dM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=DBGaw3O7uLSAQJQXSZbg3DGQa7o90wOqDbo9JlvTgs7kaBoUlZI6kGifUtovQ1q3Go
         TS2GzTdKELMCIOEjNNjsuD5m0D7473bH5Tm+Bbkm/XWN1c05rhzZKW40l2MmTiRbFV3i
         qSGCNwHZiNLiAfaAFFn0GwTaxycuPKvIJEA04=
Received: by 10.236.125.199 with SMTP id z47mr2791433yhh.476.1308306190082;
 Fri, 17 Jun 2011 03:23:10 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.236.70.36 with HTTP; Fri, 17 Jun 2011 03:22:50 -0700 (PDT)
In-Reply-To: <BANLkTikvsTseA0zKqx0mdnoH1hSrp_q56g@mail.gmail.com>
References: <BANLkTikvsTseA0zKqx0mdnoH1hSrp_q56g@mail.gmail.com>
From: "Sowmya V.B." <vbsowmya@gmail.com>
Date: Fri, 17 Jun 2011 12:22:50 +0200
Message-ID: <BANLkTinGHEtSxNUH-ZfZ1W-zhp3hhurd+g@mail.gmail.com>
Subject: Re: Lucene - TrieRangeQuery
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf303ddb54b7a17c04a5e5c526
X-Virus-Checked: Checked by ClamAV on apache.org

--20cf303ddb54b7a17c04a5e5c526
Content-Type: text/plain; charset=UTF-8

Hi

Thanks for the reply. I've been trying to use these classes -
NumericRangeQuery, TermRangeQuery etc.

However, though I don't get compilation errors, I get a runtime error. Here
is a brief trace. I mentioned this in a previous mail thread..but it got
lost in the middle I guess.:

java.lang.NoSuchMethodError:
org.apache.lucene.util.StringHelper.intern(Ljava/lang/String;)Ljava/lang/String;

org.apache.lucene.search.TermRangeTermEnum.<init>(TermRangeTermEnum.java:79)
    org.apache.lucene.search.TermRangeQuery.getEnum(TermRangeQuery.java:135)
    org.apache.lucene.search.MultiTermQuery.rewrite(MultiTermQuery.java:76)
    org.apache.lucene.search.BooleanQuery.rewrite(BooleanQuery.java:386)
    org.apache.lucene.search.IndexSearcher.rewrite(IndexSearcher.java:288)
    org.apache.lucene.search.Query.weight(Query.java:94)
    org.apache.lucene.search.Searcher.createWeight(Searcher.java:185)
    org.apache.lucene.search.Searcher.search(Searcher.java:136)
    org.apache.lucene.search.Searcher.search(Searcher.java:146)

I am not able to figure out what the issue here is.
**************
Hi,

It's called NumericRangeQuery *and* included since *Lucene* 2.9 into Core.

Here the documentation from latest *Lucene*: http://s.apache.org/nrq

*Uwe*
-----
*Uwe* *Schindler*


On Fri, Jun 17, 2011 at 11:09 AM, Sowmya V.B. <vbsowmya@gmail.com> wrote:

> Hi All
>
> Can someone suggest me where I can get an implementation of
> LongTrieRangeQuery class? I read about it in one of the Lucene
> implementation based reports, but could not find it on Lucene Src.
> Does that exist now?
> The report I read referred to an implementation by Uwe  Schindler.
>
> A related online article:
> http://www.marcsturlese.com/2009/04/08/lucene-trierangequery/
>
> S
>
> --
> Sowmya V.B.
> ----------------------------------------------------
> Losing optimism is blasphemy!
> http://vbsowmya.wordpress.com
> ----------------------------------------------------
>



-- 
Sowmya V.B.
----------------------------------------------------
Losing optimism is blasphemy!
http://vbsowmya.wordpress.com
----------------------------------------------------

--20cf303ddb54b7a17c04a5e5c526--

From java-user-return-50056-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jun 17 10:33:41 2011
Return-Path: <java-user-return-50056-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id ED6C54A78
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 17 Jun 2011 10:33:41 +0000 (UTC)
Received: (qmail 18010 invoked by uid 500); 17 Jun 2011 10:33:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17967 invoked by uid 500); 17 Jun 2011 10:33:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17956 invoked by uid 99); 17 Jun 2011 10:33:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jun 2011 10:33:39 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jun 2011 10:33:34 +0000
Received: by iwi5 with SMTP id 5so1738324iwi.35
        for <java-user@lucene.apache.org>; Fri, 17 Jun 2011 03:33:14 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=NlkC7+F5gJL+OSqRCL0GDJZaHr65LLMOL2ZO3xb1XQI=;
        b=MnW/wIvnZXA5DPUgDyICJWmqBfr/pCl/nj5u/AIe/gL6oltJmBo/a+NO02lhH8aQ6V
         5b8UbNxUon9EqfUFPWZZSxPE0NPbAhGKxerXB4QayLBPxh9HffouM48psNc14ScxvqaF
         CGXP7dHYRXQWju3ae6XjIAjDaxCHpnsrTqy88=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=Fqe7Egdekgzegw4/FqslNpyKYvhCuMM5gnhZPPXGCizJYCeIMMR/u6WzxmOpP2gT5z
         w8VuWhjW5BBqXtYUU844Ws6JVRDwGmuEz3678glLQY2R1udM04DVKSAcrmXo4niL+O/g
         lqwql74mZXjpjzW1tg7iRDLDEACPrhhQgADHg=
Received: by 10.231.43.138 with SMTP id w10mr1866797ibe.11.1308306794125; Fri,
 17 Jun 2011 03:33:14 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.199.148 with HTTP; Fri, 17 Jun 2011 03:32:54 -0700 (PDT)
In-Reply-To: <BANLkTinGHEtSxNUH-ZfZ1W-zhp3hhurd+g@mail.gmail.com>
References: <BANLkTikvsTseA0zKqx0mdnoH1hSrp_q56g@mail.gmail.com> <BANLkTinGHEtSxNUH-ZfZ1W-zhp3hhurd+g@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Fri, 17 Jun 2011 11:32:54 +0100
Message-ID: <BANLkTin7XXB+_k26MtbkvQ=MSh-nOn_QFw@mail.gmail.com>
Subject: Re: Lucene - TrieRangeQuery
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

That sort of error can be caused by version mismatches.  Double check
that you are using the same versions of java and lucene at compile and
run time, recompile everything, try again.


--
Ian.


On Fri, Jun 17, 2011 at 11:22 AM, Sowmya V.B. <vbsowmya@gmail.com> wrote:
> Hi
>
> Thanks for the reply. I've been trying to use these classes -
> NumericRangeQuery, TermRangeQuery etc.
>
> However, though I don't get compilation errors, I get a runtime error. He=
re
> is a brief trace. I mentioned this in a previous mail thread..but it got
> lost in the middle I guess.:
>
> java.lang.NoSuchMethodError:
> org.apache.lucene.util.StringHelper.intern(Ljava/lang/String;)Ljava/lang/=
String;
>
> org.apache.lucene.search.TermRangeTermEnum.<init>(TermRangeTermEnum.java:=
79)
> =A0 =A0org.apache.lucene.search.TermRangeQuery.getEnum(TermRangeQuery.jav=
a:135)
> =A0 =A0org.apache.lucene.search.MultiTermQuery.rewrite(MultiTermQuery.jav=
a:76)
> =A0 =A0org.apache.lucene.search.BooleanQuery.rewrite(BooleanQuery.java:38=
6)
> =A0 =A0org.apache.lucene.search.IndexSearcher.rewrite(IndexSearcher.java:=
288)
> =A0 =A0org.apache.lucene.search.Query.weight(Query.java:94)
> =A0 =A0org.apache.lucene.search.Searcher.createWeight(Searcher.java:185)
> =A0 =A0org.apache.lucene.search.Searcher.search(Searcher.java:136)
> =A0 =A0org.apache.lucene.search.Searcher.search(Searcher.java:146)
>
> I am not able to figure out what the issue here is.
> **************
> Hi,
>
> It's called NumericRangeQuery *and* included since *Lucene* 2.9 into Core=
.
>
> Here the documentation from latest *Lucene*: http://s.apache.org/nrq
>
> *Uwe*
> -----
> *Uwe* *Schindler*
>
>
> On Fri, Jun 17, 2011 at 11:09 AM, Sowmya V.B. <vbsowmya@gmail.com> wrote:
>
>> Hi All
>>
>> Can someone suggest me where I can get an implementation of
>> LongTrieRangeQuery class? I read about it in one of the Lucene
>> implementation based reports, but could not find it on Lucene Src.
>> Does that exist now?
>> The report I read referred to an implementation by Uwe =A0Schindler.
>>
>> A related online article:
>> http://www.marcsturlese.com/2009/04/08/lucene-trierangequery/
>>
>> S
>>
>> --
>> Sowmya V.B.
>> ----------------------------------------------------
>> Losing optimism is blasphemy!
>> http://vbsowmya.wordpress.com
>> ----------------------------------------------------
>>
>
>
>
> --
> Sowmya V.B.
> ----------------------------------------------------
> Losing optimism is blasphemy!
> http://vbsowmya.wordpress.com
> ----------------------------------------------------
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50057-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jun 17 11:03:43 2011
Return-Path: <java-user-return-50057-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 58EA04C7D
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 17 Jun 2011 11:03:43 +0000 (UTC)
Received: (qmail 62824 invoked by uid 500); 17 Jun 2011 11:03:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62769 invoked by uid 500); 17 Jun 2011 11:03:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62761 invoked by uid 99); 17 Jun 2011 11:03:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jun 2011 11:03:40 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jun 2011 11:03:34 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id CDD07D36003
	for <java-user@lucene.apache.org>; Fri, 17 Jun 2011 13:03:13 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 5s9YLRPtWLKF for <java-user@lucene.apache.org>;
	Fri, 17 Jun 2011 13:03:08 +0200 (CEST)
Received: from VEGA (gate1.marum.de [134.102.237.1])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 95ED5D36001
	for <java-user@lucene.apache.org>; Fri, 17 Jun 2011 13:02:53 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <BANLkTikvsTseA0zKqx0mdnoH1hSrp_q56g@mail.gmail.com> <BANLkTinGHEtSxNUH-ZfZ1W-zhp3hhurd+g@mail.gmail.com>
In-Reply-To: <BANLkTinGHEtSxNUH-ZfZ1W-zhp3hhurd+g@mail.gmail.com>
Subject: RE: Lucene - TrieRangeQuery
Date: Fri, 17 Jun 2011 13:02:58 +0200
Message-ID: <005c01cc2cde$2a734120$7f59c360$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 14.0
Thread-index: AQLYuRsU7TB6Ou7JfWXF6tzzTMdFegK3gaC+kpKLTKA=
Content-language: de
X-Virus-Checked: Checked by ClamAV on apache.org

It seems that you may have some older lucene-core.jar in your classpath =
when running.

A trick to find out if all come from the same JAR is using the following =
code:
System.err.println(getClass().getResource("org/apache/lucene/util/StringH=
elper.class").toString());

And compare that with:
System.err.println(getClass().getResource("org/apache/lucene/search/Numer=
icRangeQuery.class").toString());

If both outputs contain a different JAR file name, you should fix your =
classpath.=20

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Sowmya V.B. [mailto:vbsowmya@gmail.com]
> Sent: Friday, June 17, 2011 12:23 PM
> To: java-user@lucene.apache.org
> Subject: Re: Lucene - TrieRangeQuery
>=20
> Hi
>=20
> Thanks for the reply. I've been trying to use these classes -
> NumericRangeQuery, TermRangeQuery etc.
>=20
> However, though I don't get compilation errors, I get a runtime error. =
Here is
> a brief trace. I mentioned this in a previous mail thread..but it got =
lost in the
> middle I guess.:
>=20
> java.lang.NoSuchMethodError:
> =
org.apache.lucene.util.StringHelper.intern(Ljava/lang/String;)Ljava/lang/=
Strin
> g;
>=20
> org.apache.lucene.search.TermRangeTermEnum.<init>(TermRangeTermEnu
> m.java:79)
>=20
> org.apache.lucene.search.TermRangeQuery.getEnum(TermRangeQuery.java
> :135)
>=20
> org.apache.lucene.search.MultiTermQuery.rewrite(MultiTermQuery.java:76
> )
>     =
org.apache.lucene.search.BooleanQuery.rewrite(BooleanQuery.java:386)
>     =
org.apache.lucene.search.IndexSearcher.rewrite(IndexSearcher.java:288)
>     org.apache.lucene.search.Query.weight(Query.java:94)
>     org.apache.lucene.search.Searcher.createWeight(Searcher.java:185)
>     org.apache.lucene.search.Searcher.search(Searcher.java:136)
>     org.apache.lucene.search.Searcher.search(Searcher.java:146)
>=20
> I am not able to figure out what the issue here is.
> **************
> Hi,
>=20
> It's called NumericRangeQuery *and* included since *Lucene* 2.9 into =
Core.
>=20
> Here the documentation from latest *Lucene*: http://s.apache.org/nrq
>=20
> *Uwe*
> -----
> *Uwe* *Schindler*
>=20
>=20
> On Fri, Jun 17, 2011 at 11:09 AM, Sowmya V.B. <vbsowmya@gmail.com>
> wrote:
>=20
> > Hi All
> >
> > Can someone suggest me where I can get an implementation of
> > LongTrieRangeQuery class? I read about it in one of the Lucene
> > implementation based reports, but could not find it on Lucene Src.
> > Does that exist now?
> > The report I read referred to an implementation by Uwe  Schindler.
> >
> > A related online article:
> > http://www.marcsturlese.com/2009/04/08/lucene-trierangequery/
> >
> > S
> >
> > --
> > Sowmya V.B.
> > ----------------------------------------------------
> > Losing optimism is blasphemy!
> > http://vbsowmya.wordpress.com
> > ----------------------------------------------------
> >
>=20
>=20
>=20
> --
> Sowmya V.B.
> ----------------------------------------------------
> Losing optimism is blasphemy!
> http://vbsowmya.wordpress.com
> ----------------------------------------------------


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50058-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jun 17 11:06:13 2011
Return-Path: <java-user-return-50058-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 525FF4149
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 17 Jun 2011 11:06:13 +0000 (UTC)
Received: (qmail 66275 invoked by uid 500); 17 Jun 2011 11:06:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66234 invoked by uid 500); 17 Jun 2011 11:06:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66226 invoked by uid 99); 17 Jun 2011 11:06:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jun 2011 11:06:10 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jun 2011 11:06:04 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id D0C41D36007
	for <java-user@lucene.apache.org>; Fri, 17 Jun 2011 13:05:18 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id Z3y4ARDvKObi for <java-user@lucene.apache.org>;
	Fri, 17 Jun 2011 13:05:03 +0200 (CEST)
Received: from VEGA (unknown [134.102.237.1])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 9FDF1D36001
	for <java-user@lucene.apache.org>; Fri, 17 Jun 2011 13:05:03 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <BANLkTikvsTseA0zKqx0mdnoH1hSrp_q56g@mail.gmail.com> <BANLkTinGHEtSxNUH-ZfZ1W-zhp3hhurd+g@mail.gmail.com> 
In-Reply-To: 
Subject: RE: Lucene - TrieRangeQuery
Date: Fri, 17 Jun 2011 13:04:53 +0200
Message-ID: <005d01cc2cde$6f187f20$4d497d60$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 14.0
Thread-index: AQLYuRsU7TB6Ou7JfWXF6tzzTMdFegK3gaC+kpKLTKCAAAMIcA==
Content-language: de
X-Virus-Checked: Checked by ClamAV on apache.org

Sorry, you have to add a "/" at the beginning:

System.err.println(getClass().getResource("/org/apache/lucene/util/String=
Helper.class").toString());
System.err.println(getClass().getResource("/org/apache/lucene/search/Nume=
ricRangeQuery.class").toString());

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Uwe Schindler [mailto:uwe@thetaphi.de]
> Sent: Friday, June 17, 2011 1:03 PM
> To: 'java-user@lucene.apache.org'
> Subject: RE: Lucene - TrieRangeQuery
>=20
> It seems that you may have some older lucene-core.jar in your =
classpath
> when running.
>=20
> A trick to find out if all come from the same JAR is using the =
following code:
> =
System.err.println(getClass().getResource("org/apache/lucene/util/StringH=
e
> lper.class").toString());
>=20
> And compare that with:
> =
System.err.println(getClass().getResource("org/apache/lucene/search/Num
> ericRangeQuery.class").toString());
>=20
> If both outputs contain a different JAR file name, you should fix your
> classpath.
>=20
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>=20
>=20
> > -----Original Message-----
> > From: Sowmya V.B. [mailto:vbsowmya@gmail.com]
> > Sent: Friday, June 17, 2011 12:23 PM
> > To: java-user@lucene.apache.org
> > Subject: Re: Lucene - TrieRangeQuery
> >
> > Hi
> >
> > Thanks for the reply. I've been trying to use these classes -
> > NumericRangeQuery, TermRangeQuery etc.
> >
> > However, though I don't get compilation errors, I get a runtime =
error.
> > Here is a brief trace. I mentioned this in a previous mail =
thread..but
> > it got lost in the middle I guess.:
> >
> > java.lang.NoSuchMethodError:
> > =
org.apache.lucene.util.StringHelper.intern(Ljava/lang/String;)Ljava/la
> > ng/Strin
> > g;
> >
> >
> org.apache.lucene.search.TermRangeTermEnum.<init>(TermRangeTermEnu
> > m.java:79)
> >
> >
> org.apache.lucene.search.TermRangeQuery.getEnum(TermRangeQuery.java
> > :135)
> >
> >
> org.apache.lucene.search.MultiTermQuery.rewrite(MultiTermQuery.java:76
> > )
> >
> org.apache.lucene.search.BooleanQuery.rewrite(BooleanQuery.java:386)
> >
> org.apache.lucene.search.IndexSearcher.rewrite(IndexSearcher.java:288)
> >     org.apache.lucene.search.Query.weight(Query.java:94)
> >     =
org.apache.lucene.search.Searcher.createWeight(Searcher.java:185)
> >     org.apache.lucene.search.Searcher.search(Searcher.java:136)
> >     org.apache.lucene.search.Searcher.search(Searcher.java:146)
> >
> > I am not able to figure out what the issue here is.
> > **************
> > Hi,
> >
> > It's called NumericRangeQuery *and* included since *Lucene* 2.9 into
> Core.
> >
> > Here the documentation from latest *Lucene*: http://s.apache.org/nrq
> >
> > *Uwe*
> > -----
> > *Uwe* *Schindler*
> >
> >
> > On Fri, Jun 17, 2011 at 11:09 AM, Sowmya V.B. <vbsowmya@gmail.com>
> > wrote:
> >
> > > Hi All
> > >
> > > Can someone suggest me where I can get an implementation of
> > > LongTrieRangeQuery class? I read about it in one of the Lucene
> > > implementation based reports, but could not find it on Lucene Src.
> > > Does that exist now?
> > > The report I read referred to an implementation by Uwe  Schindler.
> > >
> > > A related online article:
> > > http://www.marcsturlese.com/2009/04/08/lucene-trierangequery/
> > >
> > > S
> > >
> > > --
> > > Sowmya V.B.
> > > ----------------------------------------------------
> > > Losing optimism is blasphemy!
> > > http://vbsowmya.wordpress.com
> > > ----------------------------------------------------
> > >
> >
> >
> >
> > --
> > Sowmya V.B.
> > ----------------------------------------------------
> > Losing optimism is blasphemy!
> > http://vbsowmya.wordpress.com
> > ----------------------------------------------------


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50059-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jun 17 15:09:45 2011
Return-Path: <java-user-return-50059-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DFB494430
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 17 Jun 2011 15:09:45 +0000 (UTC)
Received: (qmail 64974 invoked by uid 500); 17 Jun 2011 15:09:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64936 invoked by uid 500); 17 Jun 2011 15:09:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64928 invoked by uid 99); 17 Jun 2011 15:09:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jun 2011 15:09:43 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of harshcode@gmail.com designates 209.85.218.48 as permitted sender)
Received: from [209.85.218.48] (HELO mail-yi0-f48.google.com) (209.85.218.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jun 2011 15:09:35 +0000
Received: by yic24 with SMTP id 24so2040472yic.35
        for <java-user@lucene.apache.org>; Fri, 17 Jun 2011 08:09:14 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=k2Nc7ENwv6CktbUi+4WbW47HIA1qI++dYB4gupvO7n8=;
        b=d6P5+yCNI9wfPsstRxpYdAHP/JQjJrxP7ln82IYT3Z1QM1hfCvVw0pDVy3pNUWrA+O
         FbD58GJVz0scMI0aicwV3BAH2K5//wHvDp4cFCRPZOJvGRluswJXhzEMYKLxK+rLzTQj
         SQWWvncf0hh9LdBh2XicE+Ov7qj/pNwcsdPTc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=J1WGKW2/ij6p81X2yeHL4p/g8Ex+a5/2UGGZLJoqdQ8Vke4G8JXI1qdpKhQH8jqgGt
         k0oFwquf6PEE9LP14OxcHbPPRcbzdi9hcNQoyhxWyoe/BuAWMkI5JfLidfeqwa1n+zRW
         4a40oGUh+vkF00CG+0Rj73k+4quKDYezPHLTI=
MIME-Version: 1.0
Received: by 10.42.217.138 with SMTP id hm10mr2313876icb.205.1308323354447;
 Fri, 17 Jun 2011 08:09:14 -0700 (PDT)
Received: by 10.42.213.73 with HTTP; Fri, 17 Jun 2011 08:09:14 -0700 (PDT)
Date: Fri, 17 Jun 2011 20:39:14 +0530
Message-ID: <BANLkTi=t2c+hcg-G4n=8e5JKCbwZ9hviMQ@mail.gmail.com>
Subject: getting OutOfMemoryError
From: harsh srivastava <harshcode@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf30549e67cb0e9d04a5e9c4ea
X-Virus-Checked: Checked by ClamAV on apache.org

--20cf30549e67cb0e9d04a5e9c4ea
Content-Type: text/plain; charset=ISO-8859-1

Hi List,

Can anyone show any light why some times I am getting below error and
application hangs up:

I am using lucene 3.1.

java.lang.RuntimeException: java.util.concurrent.ExecutionException:
java.lang.RuntimeException: java.util.concurrent.ExecutionException:
java.lang.OutOfMemoryError: Java heap space
java.util.concurrent.ExecutionException: java.lang.RuntimeException:
java.util.concurrent.ExecutionException: java.lang.OutOfMemoryError: Java
heap space
java.lang.RuntimeException: java.util.concurrent.ExecutionException:
java.lang.RuntimeException: java.util.concurrent.ExecutionException:
java.lang.OutOfMemoryError: Java heap space
        at
org.apache.lucene.search.ParallelMultiSearcher$ExecutionHelper.next(ParallelMultiSearcher.java:278)
        at
org.apache.lucene.search.ParallelMultiSearcher.search(ParallelMultiSearcher.java:139)
        at org.apache.lucene.search.Searcher.search(Searcher.java:53)
Caused by: java.util.concurrent.ExecutionException:
java.lang.RuntimeException: java.util.concurrent.ExecutionException:
java.lang.OutOfMemoryError: Java heap space
        at java.util.concurrent.FutureTask$Sync.innerGet(Unknown Source)
        at java.util.concurrent.FutureTask.get(Unknown Source)
        at
org.apache.lucene.search.ParallelMultiSearcher$ExecutionHelper.next(ParallelMultiSearcher.java:274)
        ... 6 more
Caused by: java.lang.RuntimeException:
java.util.concurrent.ExecutionException: java.lang.OutOfMemoryError: Java
heap space
        at
org.apache.lucene.search.ParallelMultiSearcher$ExecutionHelper.next(ParallelMultiSearcher.java:278)
        at
org.apache.lucene.search.ParallelMultiSearcher.search(ParallelMultiSearcher.java:139)
        at
org.apache.lucene.search.MultiSearcher$MultiSearcherCallableWithSort.call(MultiSearcher.java:428)
        at
org.apache.lucene.search.MultiSearcher$MultiSearcherCallableWithSort.call(MultiSearcher.java:402)
        at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
        at java.util.concurrent.FutureTask.run(Unknown Source)
        at java.util.concurrent.Executors$RunnableAdapter.call(Unknown
Source)
        at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
        at java.util.concurrent.FutureTask.run(Unknown Source)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown
Source)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown
Source)
        at java.lang.Thread.run(Unknown Source)
Caused by: java.util.concurrent.ExecutionException:
java.lang.OutOfMemoryError: Java heap space
        at java.util.concurrent.FutureTask$Sync.innerGet(Unknown Source)
        at java.util.concurrent.FutureTask.get(Unknown Source)
        at
org.apache.lucene.search.ParallelMultiSearcher$ExecutionHelper.next(ParallelMultiSearcher.java:274)
        ... 11 more
Caused by: java.lang.OutOfMemoryError: Java heap space

--20cf30549e67cb0e9d04a5e9c4ea--

From java-user-return-50060-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jun 17 15:35:42 2011
Return-Path: <java-user-return-50060-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 233734D39
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 17 Jun 2011 15:35:42 +0000 (UTC)
Received: (qmail 28726 invoked by uid 500); 17 Jun 2011 15:35:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28685 invoked by uid 500); 17 Jun 2011 15:35:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28677 invoked by uid 99); 17 Jun 2011 15:35:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jun 2011 15:35:39 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.220.176 as permitted sender)
Received: from [209.85.220.176] (HELO mail-vx0-f176.google.com) (209.85.220.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jun 2011 15:35:31 +0000
Received: by vxd2 with SMTP id 2so1036720vxd.35
        for <java-user@lucene.apache.org>; Fri, 17 Jun 2011 08:35:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type:content-transfer-encoding;
        bh=IbF0GjE1kuj0017ntQWHbq0/x+pBFkzyCcMkjHkp6bQ=;
        b=bY2ucJQpECUxIc2ZQ9J2oiqU4dSMVSaaOpFKKYKkj3MIFtqWSS20eryD5yyzKlgKeS
         mDC6A85lbGmnhusN6Mtbmos7hy24+uuoybocitIWevYH9/AXtTdbWdSsa3+fQ5qC1r8I
         nLoYOPCw5OytZF1/5rVpFixXqPKwVzfe9cD3k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=C4yOVqZlFuFrS2uMiafhnunWZyw9b0sywj2GY2uu24sAPrWQADwcunRVdsv0TEllz5
         teyy/Fk678zl5W3vk6TgJ5JZ7Ve6Vu0vrK3Yp76oyoMMH3Jt+NPQxtbyUgnyeN8Z44Nw
         NG71wO34nuI7MuzbGbW4ySn3cQX9MdS5V+oYM=
MIME-Version: 1.0
Received: by 10.52.99.106 with SMTP id ep10mr3290984vdb.46.1308324910601; Fri,
 17 Jun 2011 08:35:10 -0700 (PDT)
Received: by 10.52.108.130 with HTTP; Fri, 17 Jun 2011 08:35:10 -0700 (PDT)
In-Reply-To: <BANLkTi=t2c+hcg-G4n=8e5JKCbwZ9hviMQ@mail.gmail.com>
References: <BANLkTi=t2c+hcg-G4n=8e5JKCbwZ9hviMQ@mail.gmail.com>
Date: Fri, 17 Jun 2011 11:35:10 -0400
Message-ID: <BANLkTik1sdhn7tbiBiUENZD6zHAYCzzHrw@mail.gmail.com>
Subject: Re: getting OutOfMemoryError
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Please review:
http://wiki.apache.org/solr/UsingMailingLists

You've given us no information to go on here, what are you
trying to do when this happens? What have you tried? What
is the query you're running when this happens? How much
memory are you allocating to the JVM?

You're apparently sorting, how many unique values are there
in the fields you're sorting? How are the fields you're sorting on
being analyzed?

Best
Erick

On Fri, Jun 17, 2011 at 11:09 AM, harsh srivastava <harshcode@gmail.com> wr=
ote:
> Hi List,
>
> Can anyone show any light why some times I am getting below error and
> application hangs up:
>
> I am using lucene 3.1.
>
> java.lang.RuntimeException: java.util.concurrent.ExecutionException:
> java.lang.RuntimeException: java.util.concurrent.ExecutionException:
> java.lang.OutOfMemoryError: Java heap space
> java.util.concurrent.ExecutionException: java.lang.RuntimeException:
> java.util.concurrent.ExecutionException: java.lang.OutOfMemoryError: Java
> heap space
> java.lang.RuntimeException: java.util.concurrent.ExecutionException:
> java.lang.RuntimeException: java.util.concurrent.ExecutionException:
> java.lang.OutOfMemoryError: Java heap space
> =A0 =A0 =A0 =A0at
> org.apache.lucene.search.ParallelMultiSearcher$ExecutionHelper.next(Paral=
lelMultiSearcher.java:278)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.search.ParallelMultiSearcher.search(ParallelMultiSearch=
er.java:139)
> =A0 =A0 =A0 =A0at org.apache.lucene.search.Searcher.search(Searcher.java:=
53)
> Caused by: java.util.concurrent.ExecutionException:
> java.lang.RuntimeException: java.util.concurrent.ExecutionException:
> java.lang.OutOfMemoryError: Java heap space
> =A0 =A0 =A0 =A0at java.util.concurrent.FutureTask$Sync.innerGet(Unknown S=
ource)
> =A0 =A0 =A0 =A0at java.util.concurrent.FutureTask.get(Unknown Source)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.search.ParallelMultiSearcher$ExecutionHelper.next(Paral=
lelMultiSearcher.java:274)
> =A0 =A0 =A0 =A0... 6 more
> Caused by: java.lang.RuntimeException:
> java.util.concurrent.ExecutionException: java.lang.OutOfMemoryError: Java
> heap space
> =A0 =A0 =A0 =A0at
> org.apache.lucene.search.ParallelMultiSearcher$ExecutionHelper.next(Paral=
lelMultiSearcher.java:278)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.search.ParallelMultiSearcher.search(ParallelMultiSearch=
er.java:139)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.search.MultiSearcher$MultiSearcherCallableWithSort.call=
(MultiSearcher.java:428)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.search.MultiSearcher$MultiSearcherCallableWithSort.call=
(MultiSearcher.java:402)
> =A0 =A0 =A0 =A0at java.util.concurrent.FutureTask$Sync.innerRun(Unknown S=
ource)
> =A0 =A0 =A0 =A0at java.util.concurrent.FutureTask.run(Unknown Source)
> =A0 =A0 =A0 =A0at java.util.concurrent.Executors$RunnableAdapter.call(Unk=
nown
> Source)
> =A0 =A0 =A0 =A0at java.util.concurrent.FutureTask$Sync.innerRun(Unknown S=
ource)
> =A0 =A0 =A0 =A0at java.util.concurrent.FutureTask.run(Unknown Source)
> =A0 =A0 =A0 =A0at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(=
Unknown
> Source)
> =A0 =A0 =A0 =A0at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unkn=
own
> Source)
> =A0 =A0 =A0 =A0at java.lang.Thread.run(Unknown Source)
> Caused by: java.util.concurrent.ExecutionException:
> java.lang.OutOfMemoryError: Java heap space
> =A0 =A0 =A0 =A0at java.util.concurrent.FutureTask$Sync.innerGet(Unknown S=
ource)
> =A0 =A0 =A0 =A0at java.util.concurrent.FutureTask.get(Unknown Source)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.search.ParallelMultiSearcher$ExecutionHelper.next(Paral=
lelMultiSearcher.java:274)
> =A0 =A0 =A0 =A0... 11 more
> Caused by: java.lang.OutOfMemoryError: Java heap space
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50061-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jun 17 15:59:25 2011
Return-Path: <java-user-return-50061-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C189E4FB4
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 17 Jun 2011 15:59:25 +0000 (UTC)
Received: (qmail 78326 invoked by uid 500); 17 Jun 2011 15:59:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78290 invoked by uid 500); 17 Jun 2011 15:59:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78282 invoked by uid 99); 17 Jun 2011 15:59:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jun 2011 15:59:23 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of harshcode@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jun 2011 15:59:15 +0000
Received: by iwi5 with SMTP id 5so2094279iwi.35
        for <java-user@lucene.apache.org>; Fri, 17 Jun 2011 08:58:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type:content-transfer-encoding;
        bh=69MDlvXS/AumT0X5d25IA4hi8uHqgcc1vvF2lTFOAgY=;
        b=jeKRj7RI8iqg16SiFN4P4/b3UKRh63h+hJPyNwpV/M43fUrrjnYCtnFuMmQaCbld5t
         bCoVTiVxEQIhz1RsrJNYW7tLiRlrMYrs1NJzBYCBrs0F+cMpNH8xVgeXM3L6HCXXCj6r
         gEX8OuL8983yuOyYtZMnu1K5xGMhZr2GKP1eg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=UISkC5Ggig/MWAZ1J5u1USssSjTWX3Xy1QtpkHqblLTebp17RlX4og4ijeskcXgqcj
         0g2Z8g/lOm4ZvOfEd8SwKUwZIlnF+Ggv+3adIk1fXD/m0xOhAlvOjI7ZmXwSgwcwTq9X
         /OnAUQS7lN/JZGn90QURba4Esgopwlj6twDFI=
MIME-Version: 1.0
Received: by 10.43.66.5 with SMTP id xo5mr1963774icb.71.1308326334055; Fri, 17
 Jun 2011 08:58:54 -0700 (PDT)
Received: by 10.42.213.73 with HTTP; Fri, 17 Jun 2011 08:58:54 -0700 (PDT)
In-Reply-To: <BANLkTik1sdhn7tbiBiUENZD6zHAYCzzHrw@mail.gmail.com>
References: <BANLkTi=t2c+hcg-G4n=8e5JKCbwZ9hviMQ@mail.gmail.com>
	<BANLkTik1sdhn7tbiBiUENZD6zHAYCzzHrw@mail.gmail.com>
Date: Fri, 17 Jun 2011 21:28:54 +0530
Message-ID: <BANLkTinMweyaQj9pK4uhw8_=JM5SkvhAOQ@mail.gmail.com>
Subject: Re: getting OutOfMemoryError
From: harsh srivastava <harshcode@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Erick,
i will gather the info and let u know.
thanks
harsh

On 6/17/11, Erick Erickson <erickerickson@gmail.com> wrote:
> Please review:
> http://wiki.apache.org/solr/UsingMailingLists
>
> You've given us no information to go on here, what are you
> trying to do when this happens? What have you tried? What
> is the query you're running when this happens? How much
> memory are you allocating to the JVM?
>
> You're apparently sorting, how many unique values are there
> in the fields you're sorting? How are the fields you're sorting on
> being analyzed?
>
> Best
> Erick
>
> On Fri, Jun 17, 2011 at 11:09 AM, harsh srivastava <harshcode@gmail.com>
> wrote:
>> Hi List,
>>
>> Can anyone show any light why some times I am getting below error and
>> application hangs up:
>>
>> I am using lucene 3.1.
>>
>> java.lang.RuntimeException: java.util.concurrent.ExecutionException:
>> java.lang.RuntimeException: java.util.concurrent.ExecutionException:
>> java.lang.OutOfMemoryError: Java heap space
>> java.util.concurrent.ExecutionException: java.lang.RuntimeException:
>> java.util.concurrent.ExecutionException: java.lang.OutOfMemoryError: Jav=
a
>> heap space
>> java.lang.RuntimeException: java.util.concurrent.ExecutionException:
>> java.lang.RuntimeException: java.util.concurrent.ExecutionException:
>> java.lang.OutOfMemoryError: Java heap space
>> =A0 =A0 =A0 =A0at
>> org.apache.lucene.search.ParallelMultiSearcher$ExecutionHelper.next(Para=
llelMultiSearcher.java:278)
>> =A0 =A0 =A0 =A0at
>> org.apache.lucene.search.ParallelMultiSearcher.search(ParallelMultiSearc=
her.java:139)
>> =A0 =A0 =A0 =A0at org.apache.lucene.search.Searcher.search(Searcher.java=
:53)
>> Caused by: java.util.concurrent.ExecutionException:
>> java.lang.RuntimeException: java.util.concurrent.ExecutionException:
>> java.lang.OutOfMemoryError: Java heap space
>> =A0 =A0 =A0 =A0at java.util.concurrent.FutureTask$Sync.innerGet(Unknown =
Source)
>> =A0 =A0 =A0 =A0at java.util.concurrent.FutureTask.get(Unknown Source)
>> =A0 =A0 =A0 =A0at
>> org.apache.lucene.search.ParallelMultiSearcher$ExecutionHelper.next(Para=
llelMultiSearcher.java:274)
>> =A0 =A0 =A0 =A0... 6 more
>> Caused by: java.lang.RuntimeException:
>> java.util.concurrent.ExecutionException: java.lang.OutOfMemoryError: Jav=
a
>> heap space
>> =A0 =A0 =A0 =A0at
>> org.apache.lucene.search.ParallelMultiSearcher$ExecutionHelper.next(Para=
llelMultiSearcher.java:278)
>> =A0 =A0 =A0 =A0at
>> org.apache.lucene.search.ParallelMultiSearcher.search(ParallelMultiSearc=
her.java:139)
>> =A0 =A0 =A0 =A0at
>> org.apache.lucene.search.MultiSearcher$MultiSearcherCallableWithSort.cal=
l(MultiSearcher.java:428)
>> =A0 =A0 =A0 =A0at
>> org.apache.lucene.search.MultiSearcher$MultiSearcherCallableWithSort.cal=
l(MultiSearcher.java:402)
>> =A0 =A0 =A0 =A0at java.util.concurrent.FutureTask$Sync.innerRun(Unknown =
Source)
>> =A0 =A0 =A0 =A0at java.util.concurrent.FutureTask.run(Unknown Source)
>> =A0 =A0 =A0 =A0at java.util.concurrent.Executors$RunnableAdapter.call(Un=
known
>> Source)
>> =A0 =A0 =A0 =A0at java.util.concurrent.FutureTask$Sync.innerRun(Unknown =
Source)
>> =A0 =A0 =A0 =A0at java.util.concurrent.FutureTask.run(Unknown Source)
>> =A0 =A0 =A0 =A0at java.util.concurrent.ThreadPoolExecutor$Worker.runTask=
(Unknown
>> Source)
>> =A0 =A0 =A0 =A0at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unk=
nown
>> Source)
>> =A0 =A0 =A0 =A0at java.lang.Thread.run(Unknown Source)
>> Caused by: java.util.concurrent.ExecutionException:
>> java.lang.OutOfMemoryError: Java heap space
>> =A0 =A0 =A0 =A0at java.util.concurrent.FutureTask$Sync.innerGet(Unknown =
Source)
>> =A0 =A0 =A0 =A0at java.util.concurrent.FutureTask.get(Unknown Source)
>> =A0 =A0 =A0 =A0at
>> org.apache.lucene.search.ParallelMultiSearcher$ExecutionHelper.next(Para=
llelMultiSearcher.java:274)
>> =A0 =A0 =A0 =A0... 11 more
>> Caused by: java.lang.OutOfMemoryError: Java heap space
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--=20
Sent from my mobile device

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50062-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sat Jun 18 13:30:26 2011
Return-Path: <java-user-return-50062-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7E0DE6C12
	for <apmail-lucene-java-user-archive@www.apache.org>; Sat, 18 Jun 2011 13:30:26 +0000 (UTC)
Received: (qmail 43944 invoked by uid 500); 18 Jun 2011 13:30:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43869 invoked by uid 500); 18 Jun 2011 13:30:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43861 invoked by uid 99); 18 Jun 2011 13:30:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Jun 2011 13:30:23 +0000
X-ASF-Spam-Status: No, hits=4.5 required=5.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLY,RFC_ABUSE_POST,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 216.139.236.26 is neither permitted nor denied by domain of hamadazahera@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Jun 2011 13:30:18 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <hamadazahera@gmail.com>)
	id 1QXvb3-0008FB-IL
	for java-user@lucene.apache.org; Sat, 18 Jun 2011 06:29:57 -0700
Date: Sat, 18 Jun 2011 06:29:57 -0700 (PDT)
From: hamadazahera <hamadazahera@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1308403797559-3079744.post@n3.nabble.com>
Subject: Lucene Simple Project
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Hello ALLLLL , 

I'm a bigineer to LuceneI api , I have tried many to implement a simple
search which specified the data directory and the index director .. then
specify the qurey to search in the contents 

but while I'm displaying the results in the search function I can't display
the name of the file ..


please anyone has a simple search Lucene Application which I can uderstant
it and solve my problem 

send me @ hamada.zahera@yahoo.com

--
View this message in context: http://lucene.472066.n3.nabble.com/Lucene-Simple-Project-tp3079744p3079744.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50063-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sat Jun 18 17:05:56 2011
Return-Path: <java-user-return-50063-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D607667AF
	for <apmail-lucene-java-user-archive@www.apache.org>; Sat, 18 Jun 2011 17:05:56 +0000 (UTC)
Received: (qmail 81918 invoked by uid 500); 18 Jun 2011 17:05:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81882 invoked by uid 500); 18 Jun 2011 17:05:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81874 invoked by uid 99); 18 Jun 2011 17:05:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Jun 2011 17:05:54 +0000
X-ASF-Spam-Status: No, hits=-1.0 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.230.18.92] (HELO smtp2.syr.edu) (128.230.18.92)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Jun 2011 17:05:46 +0000
Received: from suex07-hub-02.ad.syr.edu (suex07-hub-02.ad.syr.edu [128.230.108.196])
	by smtp2.syr.edu (8.14.3/8.14.3) with ESMTP id p5IH5Oxd031953
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL);
	Sat, 18 Jun 2011 13:05:24 -0400
Received: from suex07-mbx-03.ad.syr.edu ([128.230.108.133]) by
 suex07-hub-02.ad.syr.edu ([128.230.108.196]) with mapi; Sat, 18 Jun 2011
 13:05:24 -0400
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
CC: "hamada.zahera@yahoo.com" <hamada.zahera@yahoo.com>
Date: Sat, 18 Jun 2011 13:05:31 -0400
Subject: RE: Lucene Simple Project
Thread-Topic: Lucene Simple Project
Thread-Index: Acwtu+VsnEJ2S8guTfCchlzgKIF3KwAHahKA
Message-ID: <2D127F11DC79714E9B6A43AC9458147FBAD4378E@suex07-mbx-03.ad.syr.edu>
References: <1308403797559-3079744.post@n3.nabble.com>
In-Reply-To: <1308403797559-3079744.post@n3.nabble.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=2.50.10432:5.4.6813,1.0.148,0.0.0000
 definitions=2011-06-18_04:2011-06-17,2011-06-18,1970-01-01 signatures=0
X-Proofpoint-Spam-Reason: safe
X-Virus-Checked: Checked by ClamAV on apache.org

SGkgSGFtYWRhLA0KDQpEbyB5b3Uga25vdyBhYm91dCB0aGUgTHVjZW5lIGRlbW8/Og0KDQpodHRw
Oi8vbHVjZW5lLmFwYWNoZS5vcmcvamF2YS8zXzJfMC9kZW1vLmh0bWwNCg0KU3RldmUNCg0KPiAt
LS0tLU9yaWdpbmFsIE1lc3NhZ2UtLS0tLQ0KPiBGcm9tOiBoYW1hZGF6YWhlcmEgW21haWx0bzpo
YW1hZGF6YWhlcmFAZ21haWwuY29tXQ0KPiBTZW50OiBTYXR1cmRheSwgSnVuZSAxOCwgMjAxMSA5
OjMwIEFNDQo+IFRvOiBqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmcNCj4gU3ViamVjdDogTHVj
ZW5lIFNpbXBsZSBQcm9qZWN0DQo+IA0KPiBIZWxsbyBBTExMTEwgLA0KPiANCj4gSSdtIGEgYmln
aW5lZXIgdG8gTHVjZW5lSSBhcGkgLCBJIGhhdmUgdHJpZWQgbWFueSB0byBpbXBsZW1lbnQgYSBz
aW1wbGUNCj4gc2VhcmNoIHdoaWNoIHNwZWNpZmllZCB0aGUgZGF0YSBkaXJlY3RvcnkgYW5kIHRo
ZSBpbmRleCBkaXJlY3RvciAuLiB0aGVuDQo+IHNwZWNpZnkgdGhlIHF1cmV5IHRvIHNlYXJjaCBp
biB0aGUgY29udGVudHMNCj4gDQo+IGJ1dCB3aGlsZSBJJ20gZGlzcGxheWluZyB0aGUgcmVzdWx0
cyBpbiB0aGUgc2VhcmNoIGZ1bmN0aW9uIEkgY2FuJ3QNCj4gZGlzcGxheQ0KPiB0aGUgbmFtZSBv
ZiB0aGUgZmlsZSAuLg0KPiANCj4gDQo+IHBsZWFzZSBhbnlvbmUgaGFzIGEgc2ltcGxlIHNlYXJj
aCBMdWNlbmUgQXBwbGljYXRpb24gd2hpY2ggSSBjYW4NCj4gdWRlcnN0YW50DQo+IGl0IGFuZCBz
b2x2ZSBteSBwcm9ibGVtDQo+IA0KPiBzZW5kIG1lIEAgaGFtYWRhLnphaGVyYUB5YWhvby5jb20N
Cj4gDQo+IC0tDQo+IFZpZXcgdGhpcyBtZXNzYWdlIGluIGNvbnRleHQ6IGh0dHA6Ly9sdWNlbmUu
NDcyMDY2Lm4zLm5hYmJsZS5jb20vTHVjZW5lLQ0KPiBTaW1wbGUtUHJvamVjdC10cDMwNzk3NDRw
MzA3OTc0NC5odG1sDQo+IFNlbnQgZnJvbSB0aGUgTHVjZW5lIC0gSmF2YSBVc2VycyBtYWlsaW5n
IGxpc3QgYXJjaGl2ZSBhdCBOYWJibGUuY29tLg0KPiANCj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQo+IFRvIHVu
c3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9y
Zw0KPiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNl
bmUuYXBhY2hlLm9yZw0KDQo=


From java-user-return-50064-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sat Jun 18 19:13:39 2011
Return-Path: <java-user-return-50064-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B853B60D2
	for <apmail-lucene-java-user-archive@www.apache.org>; Sat, 18 Jun 2011 19:13:39 +0000 (UTC)
Received: (qmail 75769 invoked by uid 500); 18 Jun 2011 19:13:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75731 invoked by uid 500); 18 Jun 2011 19:13:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75723 invoked by uid 99); 18 Jun 2011 19:13:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Jun 2011 19:13:37 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [188.121.53.1] (HELO n1plout04-01.prod.ams1.secureserver.net) (188.121.53.1)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 18 Jun 2011 19:13:30 +0000
Received: (qmail 4613 invoked from network); 18 Jun 2011 19:13:07 -0000
Received: from unknown (109.67.3.203)
  by n1plout04-01.prod.ams1.secureserver.net (188.121.53.1) with ESMTP; 18 Jun 2011 19:12:50 -0000
Message-ID: <4DFCF8A7.2010302@code972.com>
Date: Sat, 18 Jun 2011 22:12:39 +0300
From: Itamar Syn-Hershko <itamar@code972.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.17) Gecko/20110414 Lightning/1.0b2 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Coloring search results based on score?
References: <4DFA6F27.9050303@code972.com> <E2D9D9E2-CB7C-4683-A679-AB280F4BD80F@yahoo.co.uk> <4DFA83E3.1040800@code972.com> <4DFA9F28.4050902@getopt.org>
In-Reply-To: <4DFA9F28.4050902@getopt.org>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks. That's very abstract and old, but perhaps I could work something 
out using this.


Any other pointers / opinions welcome...


Itamar.


On 17/06/2011 03:26, Andrzej Bialecki wrote:

> On 6/17/11 12:29 AM, Itamar Syn-Hershko wrote:
>> No, that was not what I meant.
>>
>>
>> I'm not interested in coloring the actual text, but in giving the user
>> an indication of how relevant the results are. Instead of displaying the
>> result score, I want to give some visual meter to show that. The highest
>> ranking result will be green if the it is really relevant to the query,
>> yellow if less and so on.
>>
>>
>> My question is if there's a good enough way to measure this - for
>> example if the first results is 20 times the score of the second, or
>> that's something I can't really do...
>
> What you describe reminds me of a special case of a more general 
> visualization technique called Tilebars. Tilebars are an N x M 
> histogram, where N rows correspond to N query terms (or clauses), and 
> M columns represent buckets of score contributions distributed over 
> the sections of the document. Each cell is then colored according to 
> the portion of score that it contains.
>
> The coloring schema may be non-linear, and the document division into 
> chunks may not be linear either.
>
> You can then collapse Tilebars if you wish in one or both dimensions, 
> e.g.:
>
> * N x 1 represents relative score contributions from each query term
> * 1 x M represents the distribution of score contributions along the 
> length of document
> * 1 x 1 represents the relative score of all clauses for the whole 
> document, relative to other documents (the difference is in coloring)
>
> See this link for more details: 
> http://people.ischool.berkeley.edu/~hearst/research/tilebars.html
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50065-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Jun 19 05:06:46 2011
Return-Path: <java-user-return-50065-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1B0ED4E40
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 19 Jun 2011 05:06:46 +0000 (UTC)
Received: (qmail 95546 invoked by uid 500); 19 Jun 2011 05:06:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95251 invoked by uid 500); 19 Jun 2011 05:06:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95242 invoked by uid 99); 19 Jun 2011 05:06:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Jun 2011 05:06:41 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of saurabhgokhale@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Jun 2011 05:06:33 +0000
Received: by qyk32 with SMTP id 32so366815qyk.14
        for <java-user@lucene.apache.org>; Sat, 18 Jun 2011 22:06:12 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=BibzNICY1r7zWmAIX0kLFw1x08JihZOtmfW0fVtfhvE=;
        b=fknvFym1kygNvhC8Y/Qt6XBAJSvUqdODTiDUEfIcXGhSJpARR7CLjbWlf1Vp8ov26C
         LEFHHOhk/25CjYkRt0xJZaSO+D/dSA2WkTfIBdgAzMr/n4AuoVov02slY+qyAbMhi4Z9
         cCQMrdsSBZ7cWNgWY9Ly7UWpvYxtgCwpkCqok=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=PzEUVOyE9vGp6o60NCB3Lcqd8+/lXc+mKyUDR2TQWWsr7MaKU7IWipG3mU1Df3NUVY
         OqyVXM86TmrOTJyaRahOSPivDbW3b+7bC/duPEK4d2PMWZamxt0ETxDCQgPkfIgptqi7
         2z06fwWI5ggPWDo5/GMFHwVnKsAwPuJQyDCoQ=
MIME-Version: 1.0
Received: by 10.229.69.197 with SMTP id a5mr2846201qcj.273.1308459972547; Sat,
 18 Jun 2011 22:06:12 -0700 (PDT)
Received: by 10.229.224.17 with HTTP; Sat, 18 Jun 2011 22:06:12 -0700 (PDT)
Date: Sun, 19 Jun 2011 00:06:12 -0500
Message-ID: <BANLkTi=tLFRJ7n5iAs03CvpPg=mbzF=O0A@mail.gmail.com>
Subject: Index result percentile variation based on Index time Norm and No-Norm
From: Saurabh Gokhale <saurabhgokhale@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/mixed; boundary=0016e6541d36ddd52204a60993ff
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6541d36ddd52204a60993ff
Content-Type: multipart/alternative; boundary=0016e6541d36ddd51c04a60993fd

--0016e6541d36ddd51c04a60993fd
Content-Type: text/plain; charset=ISO-8859-1

Hi All,

I have a question regarding index time parameter Index.ANALYZED_NO_NORMS
and Index.ANALYZED

As per the definition, ANALYZED_NO_NORMS is no different than ANALYZED
option except that it does not store norm (boost) information in the index.

So if I create 2 indexes: 1 with ANALYZED option and another
with ANALYZED_NO_NORMS option, for the same indexed document and for the
same search query both should bring same result with same matching
percentile.

But the percentile for the index created using NO_NORM is higher than the
one created with NORM. Why is that so?

Attached is the java example with 2 indexes created and the same document
searched using BooleanQuery.

The result indicates that though the matched documents are same, their
percentiles differ? can some one pls help me understand norm better? is it
because in the index with norm, lucene adds some boost for index fields?



Result of running the program is:
--------------------------------------------------------------------------------------------
Adding Doc to NORM Index :: author : author1
---------------------------------------
Adding Doc to NO NORM Index :: author : author1
=======================================
Adding Doc to NORM Index :: author : author2
---------------------------------------
Adding Doc to NO NORM Index :: author : author2
=======================================
Adding Doc to NORM Index :: author : author3
---------------------------------------
Adding Doc to NO NORM Index :: author : author3
=======================================
Adding Doc to NORM Index :: author : author4
---------------------------------------
Adding Doc to NO NORM Index :: author : author4
=======================================

Search for the book with Author: author1
NORM:: WITH NORM  Query :: (author:author1) (subject:book subject:first
subject:my) -isbn:123
 Match: 19.738173%  || Doc Author: author2 || Doc subject: My next book ||
Doc ISBN: 333
 Match: 6.168179%  || Doc Author: author3 || Doc subject: this first text ||
Doc ISBN: 444

Search for the book with Author: author1
NORM:: WITHOUT NORM  Query :: (author:author1) (subject:book subject:first
subject:my) -isbn:123
 Match: 39.476345%  || Doc Author: author2 || Doc subject: My next book ||
Doc ISBN: 333
 Match: 9.869086%  || Doc Author: author3 || Doc subject: this first text ||
Doc ISBN: 444



Thanks

Saurabh

--0016e6541d36ddd51c04a60993fd
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hi All,<div><br></div><div>I have a question regarding index time parameter=
=A0Index.ANALYZED_NO_NORMS and=A0Index.ANALYZED</div><div><br></div><div>As=
 per the definition,=A0ANALYZED_NO_NORMS is no different than=A0ANALYZED op=
tion except that it does not store norm (boost) information in the index.</=
div>
<div><br></div><div>So if I create 2 indexes: 1 with=A0ANALYZED option and =
another with=A0ANALYZED_NO_NORMS option, for the same indexed document and =
for the same search query both should bring same result with same matching =
percentile.=A0</div>
<div><br></div><div>But the percentile for the index created using NO_NORM =
is higher than the one created with NORM. Why is that so?</div><div><br></d=
iv><div>Attached is the java example with 2 indexes created and the same do=
cument searched using BooleanQuery.</div>
<div><br></div><div>The result indicates that though the matched documents =
are same, their percentiles differ? can some one pls help me understand nor=
m better? is it because in the index with norm, lucene adds some boost for =
index fields?</div>
<div><br></div><div><br></div><div><br></div><div>Result of running the pro=
gram is:</div><div>--------------------------------------------------------=
------------------------------------</div><div><div>Adding Doc to NORM Inde=
x :: author : author1</div>
<div>---------------------------------------</div><div>Adding Doc to NO NOR=
M Index :: author : author1</div><div>=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D</div><div>Adding Doc to NORM Index :: author : author2</div><div>---=
------------------------------------</div>
<div>Adding Doc to NO NORM Index :: author : author2</div><div>=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D</div><div>Adding Doc to NORM Index :: author=
 : author3</div><div>---------------------------------------</div><div>Addi=
ng Doc to NO NORM Index :: author : author3</div>
<div>=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D</div><div>Adding Doc to NO=
RM Index :: author : author4</div><div>------------------------------------=
---</div><div>Adding Doc to NO NORM Index :: author : author4</div><div>=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D</div>
<div><br></div><div>Search for the book with Author: author1</div><div>NORM=
:: WITH NORM =A0Query :: (author:author1) (subject:book subject:first subje=
ct:my) -isbn:123</div><div>=A0Match: <span class=3D"Apple-style-span" style=
=3D"background-color: rgb(255, 255, 153);">19.738173%</span> =A0|| Doc Auth=
or: author2 || Doc subject: My next book || Doc ISBN: 333</div>
<div>=A0Match: 6.168179% =A0|| Doc Author: author3 || Doc subject: this fir=
st text || Doc ISBN: 444</div><div><br></div><div>Search for the book with =
Author: author1</div><div>NORM:: WITHOUT NORM =A0Query :: (author:author1) =
(subject:book subject:first subject:my) -isbn:123</div>
<div>=A0Match: <span class=3D"Apple-style-span" style=3D"background-color: =
rgb(255, 255, 153);">39.476345%</span> =A0|| Doc Author: author2 || Doc sub=
ject: My next book || Doc ISBN: 333</div><div>=A0Match: 9.869086% =A0|| Doc=
 Author: author3 || Doc subject: this first text || Doc ISBN: 444</div>
</div><div><br></div><div><br></div><div><br></div><div>Thanks</div><div><b=
r></div><div>Saurabh</div>

--0016e6541d36ddd51c04a60993fd--

--0016e6541d36ddd52204a60993ff
Content-Type: text/plain; charset=us-ascii


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--0016e6541d36ddd52204a60993ff--

From java-user-return-50066-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Jun 19 08:43:52 2011
Return-Path: <java-user-return-50066-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id EE6AC450F
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 19 Jun 2011 08:43:51 +0000 (UTC)
Received: (qmail 98636 invoked by uid 500); 19 Jun 2011 08:43:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98582 invoked by uid 500); 19 Jun 2011 08:43:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98574 invoked by uid 99); 19 Jun 2011 08:43:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Jun 2011 08:43:48 +0000
X-ASF-Spam-Status: No, hits=1.3 required=5.0
	tests=SPF_PASS,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of michael.wechner@wyona.com designates 195.226.6.75 as permitted sender)
Received: from [195.226.6.75] (HELO mail.wyona.com) (195.226.6.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Jun 2011 08:43:40 +0000
Received: from Michael-Wechners-MacBook-Pro.local (213-100.62-81.cust.bluewin.ch [81.62.100.213])
	by mail.wyona.com (Postfix) with ESMTPA id C0C4F2DA42D
	for <java-user@lucene.apache.org>; Sun, 19 Jun 2011 10:46:31 +0200 (CEST)
Message-ID: <4DFDB6A6.1080102@wyona.com>
Date: Sun, 19 Jun 2011 10:43:18 +0200
From: Michael Wechner <michael.wechner@wyona.com>
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; de; rv:1.9.2.17) Gecko/20110414 Lightning/1.0b2 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene Simple Project
References: <1308403797559-3079744.post@n3.nabble.com> <2D127F11DC79714E9B6A43AC9458147FBAD4378E@suex07-mbx-03.ad.syr.edu>
In-Reply-To: <2D127F11DC79714E9B6A43AC9458147FBAD4378E@suex07-mbx-03.ad.syr.edu>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Am 18.06.11 19:05, schrieb Steven A Rowe:
> Hi Hamada,
>
> Do you know about the Lucene demo?:
>
> http://lucene.apache.org/java/3_2_0/demo.html

also you might want to use

http://code.google.com/p/luke/

in order to view your search index and check what fields it actually 
contains

HTH

Michael
> Steve
>
>> -----Original Message-----
>> From: hamadazahera [mailto:hamadazahera@gmail.com]
>> Sent: Saturday, June 18, 2011 9:30 AM
>> To: java-user@lucene.apache.org
>> Subject: Lucene Simple Project
>>
>> Hello ALLLLL ,
>>
>> I'm a bigineer to LuceneI api , I have tried many to implement a simple
>> search which specified the data directory and the index director .. then
>> specify the qurey to search in the contents
>>
>> but while I'm displaying the results in the search function I can't
>> display
>> the name of the file ..
>>
>>
>> please anyone has a simple search Lucene Application which I can
>> uderstant
>> it and solve my problem
>>
>> send me @ hamada.zahera@yahoo.com
>>
>> --
>> View this message in context: http://lucene.472066.n3.nabble.com/Lucene-
>> Simple-Project-tp3079744p3079744.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50067-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Jun 19 14:26:40 2011
Return-Path: <java-user-return-50067-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9C1B1445C
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 19 Jun 2011 14:26:40 +0000 (UTC)
Received: (qmail 3657 invoked by uid 500); 19 Jun 2011 14:26:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3624 invoked by uid 500); 19 Jun 2011 14:26:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3614 invoked by uid 99); 19 Jun 2011 14:26:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Jun 2011 14:26:38 +0000
X-ASF-Spam-Status: No, hits=2.1 required=5.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLYTO,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.218.48 as permitted sender)
Received: from [209.85.218.48] (HELO mail-yi0-f48.google.com) (209.85.218.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Jun 2011 14:26:31 +0000
Received: by yic24 with SMTP id 24so2872707yic.35
        for <java-user@lucene.apache.org>; Sun, 19 Jun 2011 07:26:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:reply-to:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=hqJSp48om7fcmeteJSSPGx3bykAesUHdiSGQho68KYk=;
        b=hG/H/x2KvQJJmvYyC5ZAPQpxaxTQTTh751e+qXu/tFJb3CoZPGgURRcOUOiRWslW9F
         rPZBFLjaLAsSEOkXbD8kg1kg9uqVF3LJ9zi/axpmnS5kls8uDklkT5R5e238jWYulYR+
         mbP0q9kgfYWRZDVCdBwlJKaGh3uAyhqozgfag=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        b=hr3ch12sevzewsSjH+jp29DbPmpZSAqvG9pOTAQdMvpmU+IRbFJ8vKAmpkmyP2OfdX
         u8Qiyk1W5XZYH37Ojk6+YxCinwBUFZaN5NiA/mmfqbNfzrMCT+D2IiKwIbte6CHVXom9
         +GfDCTs5X4FsYQiCT/2ASO8R/xCyWe8mqqL7E=
MIME-Version: 1.0
Received: by 10.150.75.11 with SMTP id x11mr4460646yba.406.1308493570632; Sun,
 19 Jun 2011 07:26:10 -0700 (PDT)
Received: by 10.147.38.2 with HTTP; Sun, 19 Jun 2011 07:26:10 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <BANLkTi=tLFRJ7n5iAs03CvpPg=mbzF=O0A@mail.gmail.com>
References: <BANLkTi=tLFRJ7n5iAs03CvpPg=mbzF=O0A@mail.gmail.com>
Date: Sun, 19 Jun 2011 16:26:10 +0200
Message-ID: <BANLkTinJOVtEp4ziHJ-oxLZ8ngYXS3bWoA@mail.gmail.com>
Subject: Re: Index result percentile variation based on Index time Norm and No-Norm
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

if you use norms lucene uses the boost of the fields / document and
multiplies it with a length normalization factor -> 1.0 /
Math.sqrt(numTerms) so you scores should be different. Does that
explain what you are seeing?

Simon

On Sun, Jun 19, 2011 at 7:06 AM, Saurabh Gokhale
<saurabhgokhale@gmail.com> wrote:
> Hi All,
> I have a question regarding index time parameter=C2=A0Index.ANALYZED_NO_N=
ORMS
> and=C2=A0Index.ANALYZED
> As per the definition,=C2=A0ANALYZED_NO_NORMS is no different than=C2=A0A=
NALYZED
> option except that it does not store norm (boost) information in the inde=
x.
> So if I create 2 indexes: 1 with=C2=A0ANALYZED option and another
> with=C2=A0ANALYZED_NO_NORMS option, for the same indexed document and for=
 the
> same search query both should bring same result with same matching
> percentile.
> But the percentile for the index created using NO_NORM is higher than the
> one created with NORM. Why is that so?
> Attached is the java example with 2 indexes created and the same document
> searched using BooleanQuery.
> The result indicates that though the matched documents are same, their
> percentiles differ? can some one pls help me understand norm better? is i=
t
> because in the index with norm, lucene adds some boost for index fields?
>
>
> Result of running the program is:
> -------------------------------------------------------------------------=
-------------------
> Adding Doc to NORM Index :: author : author1
> ---------------------------------------
> Adding Doc to NO NORM Index :: author : author1
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> Adding Doc to NORM Index :: author : author2
> ---------------------------------------
> Adding Doc to NO NORM Index :: author : author2
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> Adding Doc to NORM Index :: author : author3
> ---------------------------------------
> Adding Doc to NO NORM Index :: author : author3
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> Adding Doc to NORM Index :: author : author4
> ---------------------------------------
> Adding Doc to NO NORM Index :: author : author4
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> Search for the book with Author: author1
> NORM:: WITH NORM =C2=A0Query :: (author:author1) (subject:book subject:fi=
rst
> subject:my) -isbn:123
> =C2=A0Match: 19.738173% =C2=A0|| Doc Author: author2 || Doc subject: My n=
ext book ||
> Doc ISBN: 333
> =C2=A0Match: 6.168179% =C2=A0|| Doc Author: author3 || Doc subject: this =
first text ||
> Doc ISBN: 444
> Search for the book with Author: author1
> NORM:: WITHOUT NORM =C2=A0Query :: (author:author1) (subject:book subject=
:first
> subject:my) -isbn:123
> =C2=A0Match: 39.476345% =C2=A0|| Doc Author: author2 || Doc subject: My n=
ext book ||
> Doc ISBN: 333
> =C2=A0Match: 9.869086% =C2=A0|| Doc Author: author3 || Doc subject: this =
first text ||
> Doc ISBN: 444
>
>
> Thanks
> Saurabh
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50068-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Jun 19 15:40:01 2011
Return-Path: <java-user-return-50068-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 76C4C494B
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 19 Jun 2011 15:40:01 +0000 (UTC)
Received: (qmail 43289 invoked by uid 500); 19 Jun 2011 15:39:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43218 invoked by uid 500); 19 Jun 2011 15:39:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43210 invoked by uid 99); 19 Jun 2011 15:39:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Jun 2011 15:39:59 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of saurabhgokhale@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Jun 2011 15:39:52 +0000
Received: by qyk32 with SMTP id 32so495494qyk.14
        for <java-user@lucene.apache.org>; Sun, 19 Jun 2011 08:39:31 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=2t4eC/aS3N46TQzz8zkzzPipCs1mXMrhFVQjY6ZMBx0=;
        b=ehcj1S2bH0nb8MtD+Rb1u8wL9Di19zE8bJXdNZKPF8zJKZrDJTs9fwejXWbzjfJwEz
         j0nl7Vcyr2mB/5/tYG1jY8dt+SRZJDOxZ0NrsFT/dm8uRVGUjxUhvEGJKGXHNFzZZ9S2
         14R4o3cEdv6/U7chR7onveRVHW8dCSmiv3k1I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=kFOg4jOilpEHcKlCqZVwHO0yoiKrAb/bXO834dUcQS/i9+CzolekPB+8VSfnniPVrb
         wzNL3JJ63FTJRPtk7gXhRZnWa1cp3/GzgxreSPBBpBeqgDJ383O8oOM+biECkHCGzk84
         w+S4cj/4RZW4yJyoZANWpq4A07TL8r30ate7c=
MIME-Version: 1.0
Received: by 10.229.23.20 with SMTP id p20mr3220422qcb.197.1308497971593; Sun,
 19 Jun 2011 08:39:31 -0700 (PDT)
Received: by 10.229.224.17 with HTTP; Sun, 19 Jun 2011 08:39:31 -0700 (PDT)
In-Reply-To: <BANLkTinJOVtEp4ziHJ-oxLZ8ngYXS3bWoA@mail.gmail.com>
References: <BANLkTi=tLFRJ7n5iAs03CvpPg=mbzF=O0A@mail.gmail.com>
	<BANLkTinJOVtEp4ziHJ-oxLZ8ngYXS3bWoA@mail.gmail.com>
Date: Sun, 19 Jun 2011 10:39:31 -0500
Message-ID: <BANLkTik3aeXZK3vNHtcEUm6JhSPniWRN9g@mail.gmail.com>
Subject: Re: Index result percentile variation based on Index time Norm and No-Norm
From: Saurabh Gokhale <saurabhgokhale@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016364edcc6c9429104a6126c9e
X-Virus-Checked: Checked by ClamAV on apache.org

--0016364edcc6c9429104a6126c9e
Content-Type: text/plain; charset=ISO-8859-1

Yes, it makes sense. So in the case of No_Norm I suppose, all the fields
small or large, are treated the same instead of as per their sizes and
implicit boost factor.

Thanks for the explanation

Saurabh

On Sun, Jun 19, 2011 at 9:26 AM, Simon Willnauer <
simon.willnauer@googlemail.com> wrote:

> if you use norms lucene uses the boost of the fields / document and
> multiplies it with a length normalization factor -> 1.0 /
> Math.sqrt(numTerms) so you scores should be different. Does that
> explain what you are seeing?
>
> Simon
>
> On Sun, Jun 19, 2011 at 7:06 AM, Saurabh Gokhale
> <saurabhgokhale@gmail.com> wrote:
> > Hi All,
> > I have a question regarding index time parameter Index.ANALYZED_NO_NORMS
> > and Index.ANALYZED
> > As per the definition, ANALYZED_NO_NORMS is no different than ANALYZED
> > option except that it does not store norm (boost) information in the
> index.
> > So if I create 2 indexes: 1 with ANALYZED option and another
> > with ANALYZED_NO_NORMS option, for the same indexed document and for the
> > same search query both should bring same result with same matching
> > percentile.
> > But the percentile for the index created using NO_NORM is higher than the
> > one created with NORM. Why is that so?
> > Attached is the java example with 2 indexes created and the same document
> > searched using BooleanQuery.
> > The result indicates that though the matched documents are same, their
> > percentiles differ? can some one pls help me understand norm better? is
> it
> > because in the index with norm, lucene adds some boost for index fields?
> >
> >
> > Result of running the program is:
> >
> --------------------------------------------------------------------------------------------
> > Adding Doc to NORM Index :: author : author1
> > ---------------------------------------
> > Adding Doc to NO NORM Index :: author : author1
> > =======================================
> > Adding Doc to NORM Index :: author : author2
> > ---------------------------------------
> > Adding Doc to NO NORM Index :: author : author2
> > =======================================
> > Adding Doc to NORM Index :: author : author3
> > ---------------------------------------
> > Adding Doc to NO NORM Index :: author : author3
> > =======================================
> > Adding Doc to NORM Index :: author : author4
> > ---------------------------------------
> > Adding Doc to NO NORM Index :: author : author4
> > =======================================
> > Search for the book with Author: author1
> > NORM:: WITH NORM  Query :: (author:author1) (subject:book subject:first
> > subject:my) -isbn:123
> >  Match: 19.738173%  || Doc Author: author2 || Doc subject: My next book
> ||
> > Doc ISBN: 333
> >  Match: 6.168179%  || Doc Author: author3 || Doc subject: this first text
> ||
> > Doc ISBN: 444
> > Search for the book with Author: author1
> > NORM:: WITHOUT NORM  Query :: (author:author1) (subject:book
> subject:first
> > subject:my) -isbn:123
> >  Match: 39.476345%  || Doc Author: author2 || Doc subject: My next book
> ||
> > Doc ISBN: 333
> >  Match: 9.869086%  || Doc Author: author3 || Doc subject: this first text
> ||
> > Doc ISBN: 444
> >
> >
> > Thanks
> > Saurabh
> >
>

--0016364edcc6c9429104a6126c9e--

From java-user-return-50069-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Jun 19 17:30:06 2011
Return-Path: <java-user-return-50069-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E4CFB437E
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 19 Jun 2011 17:30:06 +0000 (UTC)
Received: (qmail 12294 invoked by uid 500); 19 Jun 2011 17:30:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12257 invoked by uid 500); 19 Jun 2011 17:30:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12249 invoked by uid 99); 19 Jun 2011 17:30:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Jun 2011 17:30:04 +0000
X-ASF-Spam-Status: No, hits=-0.1 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dean.hiller@broadridge.com designates 64.18.2.22 as permitted sender)
Received: from [64.18.2.22] (HELO exprod7og122.obsmtp.com) (64.18.2.22)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Jun 2011 17:29:56 +0000
Received: from gwm.broadridge.com ([167.212.2.180]) (using TLSv1) by exprod7ob122.postini.com ([64.18.6.12]) with SMTP
	ID DSNKTf4x/25RLb45ZHnRcPZkv0tWVqvmrQ6l@postini.com; Sun, 19 Jun 2011 10:29:36 PDT
Received: from jsppsldlpsi01.broadridge.net ([10.98.54.11])
	by gwm.broadridge.com (8.13.8/8.13.8) with ESMTP id p5JHTYt81216592
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Sun, 19 Jun 2011 13:29:34 -0400
Received: from JSIPSWEXHA01.bsg.ad.adp.com (jsipswexha01.bsg.ad.adp.com [10.17.69.24]) by jsppsldlpsi01.broadridge.net (RSA Interceptor) for <java-user@lucene.apache.org>; Sun, 19 Jun 2011 13:29:29 -0400
Received: from jscpcwexmaa1.bsg.ad.adp.com ([fe80::882f:16e8:308d:3ef]) by
 JSIPSWEXHA01.bsg.ad.adp.com ([::1]) with mapi; Sun, 19 Jun 2011 13:29:26
 -0400
From: "Hiller, Dean  x66079" <dean.hiller@broadridge.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Sun, 19 Jun 2011 13:29:23 -0400
Subject: how to do simple search paging results of 100 each? and query
 syntax question
Thread-Topic: how to do simple search paging results of 100 each? and query
 syntax question
Thread-Index: Acwupm5ctXcDePJPT6ewKKluj7ZEmw==
Message-ID: <08230D4C8E666D479F6DE495A7684DCD0ABA965D@JSCPCWEXMAA1.bsg.ad.adp.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: en-US
Content-Type: multipart/alternative;
	boundary="_000_08230D4C8E666D479F6DE495A7684DCD0ABA965DJSCPCWEXMAA1bsg_"
MIME-Version: 1.0
X-RSA-Inspected: yes
X-RSA-Classifications: public
X-RSA-Action: allow

--_000_08230D4C8E666D479F6DE495A7684DCD0ABA965DJSCPCWEXMAA1bsg_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

On the link
http://lucene.apache.org/java/3_0_3/queryparsersyntax.html#Range%20Searches


There is ranged searched, how do I specify everything above a date from dat=
e 20020101  to end of time?



Next, I am temporarily using lucene in a noSQL solution(to switch to Solr l=
ater after prototype) and

So I am just indexing basic columns..no need for "top search results", etc.



When I look at the IndexSearcher and it's list of methods I am not sure how=
 I can grab the first 100

Results, then the second 100 results(that is if I need them), then the thir=
d 100 results (again if needed)



I see a TopScoreDocCollector.create method but the IndexSearcher.search(Que=
ry, Collector) method states only to call that method if you need ALL the r=
esults.  I definitely don't need all but need to page through the

Results and typically exit out around the third page.  This is not a web ap=
p, so ideally I want a reference held into the indexed tree so it can keep =
giving me the next 100 results.



Thanks,

Dean

This message and any attachments are intended only for the use of the add=
ressee and
may contain information that is privileged and confidential. If the reade=
r of the =

message is not the intended recipient or an authorized representative of =
the
intended recipient, you are hereby notified that any dissemination of thi=
s
communication is strictly prohibited. If you have received this communica=
tion in
error, please notify us immediately by e-mail and delete the message and =
any
attachments from your system.
=0D
--_000_08230D4C8E666D479F6DE495A7684DCD0ABA965DJSCPCWEXMAA1bsg_--

From java-user-return-50070-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Jun 19 17:39:57 2011
Return-Path: <java-user-return-50070-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 54D7D4A26
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 19 Jun 2011 17:39:57 +0000 (UTC)
Received: (qmail 19084 invoked by uid 500); 19 Jun 2011 17:39:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19036 invoked by uid 500); 19 Jun 2011 17:39:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19028 invoked by uid 99); 19 Jun 2011 17:39:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Jun 2011 17:39:55 +0000
X-ASF-Spam-Status: No, hits=2.1 required=5.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLYTO,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.218.48 as permitted sender)
Received: from [209.85.218.48] (HELO mail-yi0-f48.google.com) (209.85.218.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Jun 2011 17:39:50 +0000
Received: by yic24 with SMTP id 24so2921848yic.35
        for <java-user@lucene.apache.org>; Sun, 19 Jun 2011 10:39:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:reply-to:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=lM1xB+vY/xpWlRUmgfsO9RVEnggosF1xpGEFMMBrDJM=;
        b=jey1VFFDKNsfWSWjHcaO1/ESSZswcNVQ5+Moz32iwvoeHqjAaVfAnYfseLhnAv99a8
         I+0gYITaF3KlLVx/8grBzFdsYN26qoUKJ4fgQxvgApMHPbCn0HpHoyf6R7JbmGf/yJOC
         ZcvCUrBuEBn4RHGBCpJuw9PZ0ki3PYQVvm+t8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        b=gUSPbWtvrL0QK9li9ExqYu1uCSaPCh+Xg25NIdGWzcvLAq/+RlM5zwBNbGGTm+Ddx+
         aT0ewWteg3D/KBP/EniG4zQdTHfGxUuY+0cHgUgUEpJz5JYeVEa1vJsmubzvUlM41NCd
         8kJtCSU9ZJvBOBC4mFEaEmtxfWHymBsLu+8CY=
MIME-Version: 1.0
Received: by 10.146.98.3 with SMTP id v3mr4671603yab.36.1308505169011; Sun, 19
 Jun 2011 10:39:29 -0700 (PDT)
Received: by 10.147.38.2 with HTTP; Sun, 19 Jun 2011 10:39:28 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <BANLkTik3aeXZK3vNHtcEUm6JhSPniWRN9g@mail.gmail.com>
References: <BANLkTi=tLFRJ7n5iAs03CvpPg=mbzF=O0A@mail.gmail.com>
	<BANLkTinJOVtEp4ziHJ-oxLZ8ngYXS3bWoA@mail.gmail.com>
	<BANLkTik3aeXZK3vNHtcEUm6JhSPniWRN9g@mail.gmail.com>
Date: Sun, 19 Jun 2011 19:39:28 +0200
Message-ID: <BANLkTinuMzxo-awVJvBBAtZB-Av0Kpqw8w@mail.gmail.com>
Subject: Re: Index result percentile variation based on Index time Norm and No-Norm
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

On Sun, Jun 19, 2011 at 5:39 PM, Saurabh Gokhale
<saurabhgokhale@gmail.com> wrote:
> Yes, it makes sense. So in the case of No_Norm I suppose, all the fields
> small or large, are treated the same instead of as per their sizes and
> implicit boost factor.

well yes they will use TF / IDF for scoring additional length
normalization and boost are omitted

simomn
>
> Thanks for the explanation
>
> Saurabh
>
> On Sun, Jun 19, 2011 at 9:26 AM, Simon Willnauer <
> simon.willnauer@googlemail.com> wrote:
>
>> if you use norms lucene uses the boost of the fields / document and
>> multiplies it with a length normalization factor -> 1.0 /
>> Math.sqrt(numTerms) so you scores should be different. Does that
>> explain what you are seeing?
>>
>> Simon
>>
>> On Sun, Jun 19, 2011 at 7:06 AM, Saurabh Gokhale
>> <saurabhgokhale@gmail.com> wrote:
>> > Hi All,
>> > I have a question regarding index time parameter Index.ANALYZED_NO_NOR=
MS
>> > and Index.ANALYZED
>> > As per the definition, ANALYZED_NO_NORMS is no different than ANALYZED
>> > option except that it does not store norm (boost) information in the
>> index.
>> > So if I create 2 indexes: 1 with ANALYZED option and another
>> > with ANALYZED_NO_NORMS option, for the same indexed document and for t=
he
>> > same search query both should bring same result with same matching
>> > percentile.
>> > But the percentile for the index created using NO_NORM is higher than =
the
>> > one created with NORM. Why is that so?
>> > Attached is the java example with 2 indexes created and the same docum=
ent
>> > searched using BooleanQuery.
>> > The result indicates that though the matched documents are same, their
>> > percentiles differ? can some one pls help me understand norm better? i=
s
>> it
>> > because in the index with norm, lucene adds some boost for index field=
s?
>> >
>> >
>> > Result of running the program is:
>> >
>> ------------------------------------------------------------------------=
--------------------
>> > Adding Doc to NORM Index :: author : author1
>> > ---------------------------------------
>> > Adding Doc to NO NORM Index :: author : author1
>> > =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
>> > Adding Doc to NORM Index :: author : author2
>> > ---------------------------------------
>> > Adding Doc to NO NORM Index :: author : author2
>> > =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
>> > Adding Doc to NORM Index :: author : author3
>> > ---------------------------------------
>> > Adding Doc to NO NORM Index :: author : author3
>> > =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
>> > Adding Doc to NORM Index :: author : author4
>> > ---------------------------------------
>> > Adding Doc to NO NORM Index :: author : author4
>> > =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
>> > Search for the book with Author: author1
>> > NORM:: WITH NORM =C2=A0Query :: (author:author1) (subject:book subject=
:first
>> > subject:my) -isbn:123
>> > =C2=A0Match: 19.738173% =C2=A0|| Doc Author: author2 || Doc subject: M=
y next book
>> ||
>> > Doc ISBN: 333
>> > =C2=A0Match: 6.168179% =C2=A0|| Doc Author: author3 || Doc subject: th=
is first text
>> ||
>> > Doc ISBN: 444
>> > Search for the book with Author: author1
>> > NORM:: WITHOUT NORM =C2=A0Query :: (author:author1) (subject:book
>> subject:first
>> > subject:my) -isbn:123
>> > =C2=A0Match: 39.476345% =C2=A0|| Doc Author: author2 || Doc subject: M=
y next book
>> ||
>> > Doc ISBN: 333
>> > =C2=A0Match: 9.869086% =C2=A0|| Doc Author: author3 || Doc subject: th=
is first text
>> ||
>> > Doc ISBN: 444
>> >
>> >
>> > Thanks
>> > Saurabh
>> >
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50071-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Jun 19 17:48:08 2011
Return-Path: <java-user-return-50071-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4199C4031
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 19 Jun 2011 17:48:08 +0000 (UTC)
Received: (qmail 24710 invoked by uid 500); 19 Jun 2011 17:48:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24661 invoked by uid 500); 19 Jun 2011 17:48:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24653 invoked by uid 99); 19 Jun 2011 17:48:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Jun 2011 17:48:06 +0000
X-ASF-Spam-Status: No, hits=2.1 required=5.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLYTO,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of simon.willnauer@googlemail.com designates 74.125.83.48 as permitted sender)
Received: from [74.125.83.48] (HELO mail-gw0-f48.google.com) (74.125.83.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Jun 2011 17:47:59 +0000
Received: by gwj22 with SMTP id 22so605949gwj.35
        for <java-user@lucene.apache.org>; Sun, 19 Jun 2011 10:47:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:reply-to:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=HwS8H7IZ8q+CiGwZmZqjOD4hZAQQC64FWhgzlw17Sak=;
        b=cS/4EAHUS3wNz2f9AzoCXzOYEn6oSt5SVfvdo0bj5eGd8qaBZj/jaaezgS5Wpg3utn
         m3BGBz2EOKZQYI25/kU6UaDE7jrJUBH0hSp1I9hxF4zkzkRlTcUXDCLIVRfBq2InFrJk
         NgcCM0B/EtNo2g1udFMNIXS+/q2THgX7u2sy8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        b=nhQP8PP1gW+506rSjMPbRbySI+8tg6LbiLa1BJS8kZx9UPMGI/XCsZcXq6BeGwFM8k
         X8sYqfMPaW6sN+7/5aY4VxrsPwyerBu1OAX4MPAryLSqxVXqJHUumOyvKIMJpAoM/3Gl
         0pYUXssXaYtmWesOAWodpZ70m5t9YZF0ot600=
MIME-Version: 1.0
Received: by 10.150.75.11 with SMTP id x11mr4609593yba.406.1308505659144; Sun,
 19 Jun 2011 10:47:39 -0700 (PDT)
Received: by 10.147.38.2 with HTTP; Sun, 19 Jun 2011 10:47:39 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <08230D4C8E666D479F6DE495A7684DCD0ABA965D@JSCPCWEXMAA1.bsg.ad.adp.com>
References: <08230D4C8E666D479F6DE495A7684DCD0ABA965D@JSCPCWEXMAA1.bsg.ad.adp.com>
Date: Sun, 19 Jun 2011 19:47:39 +0200
Message-ID: <BANLkTinGShn3Y8a=eD=XGGF=0SydatKtdA@mail.gmail.com>
Subject: Re: how to do simple search paging results of 100 each? and query
 syntax question
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On Sun, Jun 19, 2011 at 7:29 PM, Hiller, Dean  x66079
<dean.hiller@broadridge.com> wrote:
> On the link
> http://lucene.apache.org/java/3_0_3/queryparsersyntax.html#Range%20Search=
es
>
>
> There is ranged searched, how do I specify everything above a date from d=
ate 20020101 =C2=A0to end of time?

here you can simply go for field:[20020101 TO ] and leave the end
blank. If you want to do fast numeric searches you should use
NumericRangeQuery instead.
>
>
>
> Next, I am temporarily using lucene in a noSQL solution(to switch to Solr=
 later after prototype) and
>
> So I am just indexing basic columns..no need for "top search results", et=
c.
>
>
>
> When I look at the IndexSearcher and it's list of methods I am not sure h=
ow I can grab the first 100
>
> Results, then the second 100 results(that is if I need them), then the th=
ird 100 results (again if needed)

so what you do here is basically requesting as many documents as you
need lets say 100, then you display it. Once you need the next hundred
you search again requesting 200 results and once the search returns
simply discard the first 100
use this as the basic method if you simply use a query without filters
or anything.

 public TopDocs search(Query query, int n)
>
>
>
> I see a TopScoreDocCollector.create method but the IndexSearcher.search(Q=
uery, Collector) method states only to call that method if you need ALL the=
 results. =C2=A0I definitely don't need all but need to page through the
>
> Results and typically exit out around the third page. =C2=A0This is not a=
 web app, so ideally I want a reference held into the indexed tree so it ca=
n keep giving me the next 100 results.

in lucene you must search again to the the next 100 but in general the
search should be very fast.

lemme know if you have more quesitons.

simon
>
>
>
> Thanks,
>
> Dean
>
> This message and any attachments are intended only for the use of the add=
ressee and
> may contain information that is privileged and confidential. If the reade=
r of the
> message is not the intended recipient or an authorized representative of =
the
> intended recipient, you are hereby notified that any dissemination of thi=
s
> communication is strictly prohibited. If you have received this communica=
tion in
> error, please notify us immediately by e-mail and delete the message and =
any
> attachments from your system.
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50072-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Jun 19 17:52:25 2011
Return-Path: <java-user-return-50072-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D847C4136
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 19 Jun 2011 17:52:24 +0000 (UTC)
Received: (qmail 27268 invoked by uid 500); 19 Jun 2011 17:52:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27224 invoked by uid 500); 19 Jun 2011 17:52:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27216 invoked by uid 99); 19 Jun 2011 17:52:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Jun 2011 17:52:22 +0000
X-ASF-Spam-Status: No, hits=-0.1 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dean.hiller@broadridge.com designates 64.18.2.22 as permitted sender)
Received: from [64.18.2.22] (HELO exprod7og122.obsmtp.com) (64.18.2.22)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Jun 2011 17:52:13 +0000
Received: from gwm.broadridge.com ([167.212.2.180]) (using TLSv1) by exprod7ob122.postini.com ([64.18.6.12]) with SMTP
	ID DSNKTf43NjurR2kmlYypu0FPGc1K5uaAwVqx@postini.com; Sun, 19 Jun 2011 10:51:52 PDT
Received: from jsppsldlpsi02.broadridge.net ([10.98.54.12])
	by gwm.broadridge.com (8.13.8/8.13.8) with ESMTP id p5JHpnAb1052804
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Sun, 19 Jun 2011 13:51:49 -0400
Received: from JSIPSWEXHA02.bsg.ad.adp.com (jsipswexha02.bsg.ad.adp.com [10.17.69.34]) by jsppsldlpsi02.broadridge.net (RSA Interceptor) for <java-user@lucene.apache.org>; Sun, 19 Jun 2011 13:51:46 -0400
Received: from jscpcwexmaa1.bsg.ad.adp.com ([fe80::882f:16e8:308d:3ef]) by
 JSIPSWEXHA02.bsg.ad.adp.com ([::1]) with mapi; Sun, 19 Jun 2011 13:51:39
 -0400
From: "Hiller, Dean  x66079" <dean.hiller@broadridge.com>
To: "Hiller, Dean  x66079" <dean.hiller@broadridge.com>,
        "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Sun, 19 Jun 2011 13:51:37 -0400
Subject: looks like no allowing of paging without counting entire result set?
Thread-Topic: looks like no allowing of paging without counting entire
 result set?
Thread-Index: Acwupm5ctXcDePJPT6ewKKluj7ZEmwAAqlcg
Message-ID: <08230D4C8E666D479F6DE495A7684DCD0ABA9660@JSCPCWEXMAA1.bsg.ad.adp.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: en-US
Content-Type: multipart/alternative;
	boundary="_000_08230D4C8E666D479F6DE495A7684DCD0ABA9660JSCPCWEXMAA1bsg_"
MIME-Version: 1.0
X-RSA-Inspected: yes
X-RSA-Classifications: public
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_08230D4C8E666D479F6DE495A7684DCD0ABA9660JSCPCWEXMAA1bsg_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

More on the below issue.  We have perhaps 10 million or 100 million but thi=
s new 3.x lucene appears to go over all the entries that match instead of j=
ust having a cursor into the index???  The more I look at the code, it almo=
st looks like it is not possible.

I am wondering how the old Hits object worked that was deprecated and remov=
ed....that looks like I could stop asking it for more results and it would =
work better not counting all activities that matched in my 10 mil or 100 mi=
l result set and just returning the first 100, second 100 and then I can cu=
t off which would be way more performant.

Should I just use 2.9 instead?  But then 3.x doesn't seem to support this?

Thanks,
Dean

From: Hiller, Dean x66079
Sent: Sunday, June 19, 2011 11:29 AM
To: 'java-user@lucene.apache.org'
Subject: how to do simple search paging results of 100 each? and query synt=
ax question

On the link
http://lucene.apache.org/java/3_0_3/queryparsersyntax.html#Range%20Searches


There is ranged searched, how do I specify everything above a date from dat=
e 20020101  to end of time?



Next, I am temporarily using lucene in a noSQL solution(to switch to Solr l=
ater after prototype) and

So I am just indexing basic columns..no need for "top search results", etc.



When I look at the IndexSearcher and it's list of methods I am not sure how=
 I can grab the first 100

Results, then the second 100 results(that is if I need them), then the thir=
d 100 results (again if needed)



I see a TopScoreDocCollector.create method but the IndexSearcher.search(Que=
ry, Collector) method states only to call that method if you need ALL the r=
esults.  I definitely don't need all but need to page through the

Results and typically exit out around the third page.  This is not a web ap=
p, so ideally I want a reference held into the indexed tree so it can keep =
giving me the next 100 results.



Thanks,

Dean

This message and any attachments are intended only for the use of the add=
ressee and
may contain information that is privileged and confidential. If the reade=
r of the =

message is not the intended recipient or an authorized representative of =
the
intended recipient, you are hereby notified that any dissemination of thi=
s
communication is strictly prohibited. If you have received this communica=
tion in
error, please notify us immediately by e-mail and delete the message and =
any
attachments from your system.
=0D
--_000_08230D4C8E666D479F6DE495A7684DCD0ABA9660JSCPCWEXMAA1bsg_--

From java-user-return-50073-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Jun 19 18:16:43 2011
Return-Path: <java-user-return-50073-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8F4AE4F9B
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 19 Jun 2011 18:16:43 +0000 (UTC)
Received: (qmail 42642 invoked by uid 500); 19 Jun 2011 18:16:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42596 invoked by uid 500); 19 Jun 2011 18:16:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42586 invoked by uid 99); 19 Jun 2011 18:16:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Jun 2011 18:16:41 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Jun 2011 18:16:33 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 379DCD36004
	for <java-user@lucene.apache.org>; Sun, 19 Jun 2011 20:15:57 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id AyiGcdq5Xazb for <java-user@lucene.apache.org>;
	Sun, 19 Jun 2011 20:15:51 +0200 (CEST)
Received: from VEGA (port-92-196-130-188.dynamic.qsc.de [92.196.130.188])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id C3DB4D36001
	for <java-user@lucene.apache.org>; Sun, 19 Jun 2011 20:15:50 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <08230D4C8E666D479F6DE495A7684DCD0ABA9660@JSCPCWEXMAA1.bsg.ad.adp.com>
In-Reply-To: <08230D4C8E666D479F6DE495A7684DCD0ABA9660@JSCPCWEXMAA1.bsg.ad.adp.com>
Subject: RE: looks like no allowing of paging without counting entire result set?
Date: Sun, 19 Jun 2011 20:15:57 +0200
Message-ID: <000901cc2eac$f2bce4e0$d836aea0$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQKyxxUkLtL0zFsQ9bU/NvyyCY9C25L3yt+w
Content-Language: de

> I am wondering how the old Hits object worked that was deprecated and
> removed....that looks like I could stop asking it for more results and it
would
> work better not counting all activities that matched in my 10 mil or 100
mil
> result set and just returning the first 100, second 100 and then I can cut
off
> which would be way more performant.

Hits did exactly what you described before. It got as many results as needed
to show the nth page. To when showing the page for results 20 to 30, it
fetches at least 30 results.

In general Full Text Search engines are only scoring the top results. This
is e.g. one reason why Google limits the maximum page you can go to.

> Should I just use 2.9 instead?  But then 3.x doesn't seem to support this?

It supports it like 2.9, but not using the Hits API. As described above, to
show results 991 to 1000 request the top-1000 results and display the last
10 :-)

Uwe


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50074-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Jun 19 18:40:36 2011
Return-Path: <java-user-return-50074-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3E9C349F4
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 19 Jun 2011 18:40:36 +0000 (UTC)
Received: (qmail 56779 invoked by uid 500); 19 Jun 2011 18:40:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56736 invoked by uid 500); 19 Jun 2011 18:40:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56728 invoked by uid 99); 19 Jun 2011 18:40:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Jun 2011 18:40:34 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dean.hiller@broadridge.com designates 64.18.2.171 as permitted sender)
Received: from [64.18.2.171] (HELO exprod7og109.obsmtp.com) (64.18.2.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Jun 2011 18:40:24 +0000
Received: from gwm.broadridge.com ([167.212.2.180]) (using TLSv1) by exprod7ob109.postini.com ([64.18.6.12]) with SMTP
	ID DSNKTf5CguuObKu/FIlB13GZShVcbosoVFVU@postini.com; Sun, 19 Jun 2011 11:40:03 PDT
Received: from jsppsldlpsi02.broadridge.net ([10.98.54.12])
	by gwm.broadridge.com (8.13.8/8.13.8) with ESMTP id p5JIe1I0442580
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Sun, 19 Jun 2011 14:40:01 -0400
Received: from JSIPSWEXHA01.bsg.ad.adp.com (jsipswexha01.bsg.ad.adp.com [10.17.69.24]) by jsppsldlpsi02.broadridge.net (RSA Interceptor) for <java-user@lucene.apache.org>; Sun, 19 Jun 2011 14:39:53 -0400
Received: from jscpcwexmaa1.bsg.ad.adp.com ([fe80::882f:16e8:308d:3ef]) by
 JSIPSWEXHA01.bsg.ad.adp.com ([::1]) with mapi; Sun, 19 Jun 2011 14:39:46
 -0400
From: "Hiller, Dean  x66079" <dean.hiller@broadridge.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Sun, 19 Jun 2011 14:39:44 -0400
Subject: RE: looks like no allowing of paging without counting entire result
 set?
Thread-Topic: looks like no allowing of paging without counting entire
 result set?
Thread-Index: AQKyxxUkLtL0zFsQ9bU/NvyyCY9C25L3yt+wgAAFJXA=
Message-ID: <08230D4C8E666D479F6DE495A7684DCD0ABA9661@JSCPCWEXMAA1.bsg.ad.adp.com>
References: <08230D4C8E666D479F6DE495A7684DCD0ABA9660@JSCPCWEXMAA1.bsg.ad.adp.com>
 <000901cc2eac$f2bce4e0$d836aea0$@thetaphi.de>
In-Reply-To: <000901cc2eac$f2bce4e0$d836aea0$@thetaphi.de>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-RSA-Inspected: yes
X-RSA-Classifications: public
X-Virus-Checked: Checked by ClamAV on apache.org

"It supports it like 2.9, but not using the Hits API. As described above, t=
o
show results 991 to 1000 request the top-1000 results and display the last
10 :-)"

Bear with me as I am little confused so let me throw some stuff down here a=
nd think out loud...
So, I basically have to request the top 100, then do another request for th=
e next 100, etc. etc which seems like that would start all over from scratc=
h and be a bit of a performance hit correct???  I would think the optimal w=
ay would be search returns an object which maintains a cursor into the inde=
x tree until I close it so I can keep asking for the next 100.  It sounds l=
ike this new api doesn't do that?  And maybe the old one didn't either but =
from client perspective, I thought the Hits object might actually just main=
tain that pointer.

NOTE: I am not doing anything close to search.  Just basic column indexing =
like an RDBMS would do for us except we don't have an RDBMS.  Our old RDBMS=
 system has scaled up to being too costly(3 terabytes).  We are now scaling=
 out with noSQL and trying to replace the RDBMS before the costs start to b=
e more than the customers pay us.

BIG NOTE: I think back to hibernate here where if you use select * from xx =
where yyy and setMaxResults and setFirstPage(index), it gets slower and slo=
wer as you page further in, BUT if you instead use the ScrollableResults, i=
t maintains a cursor and the speed NEVER gets slower as you page into the r=
esults.

Maybe I am using the wrong library but there are a lot of noSQL users of Hb=
ase starting to use SOLR from what I understand.  Should I be using a diffe=
rent indexing library perhaps?

Thanks,
Dean


-----Original Message-----
From: Uwe Schindler [mailto:uwe@thetaphi.de]=20
Sent: Sunday, June 19, 2011 12:16 PM
To: java-user@lucene.apache.org
Subject: RE: looks like no allowing of paging without counting entire resul=
t set?

> I am wondering how the old Hits object worked that was deprecated and
> removed....that looks like I could stop asking it for more results and it
would
> work better not counting all activities that matched in my 10 mil or 100
mil
> result set and just returning the first 100, second 100 and then I can cu=
t
off
> which would be way more performant.

Hits did exactly what you described before. It got as many results as neede=
d
to show the nth page. To when showing the page for results 20 to 30, it
fetches at least 30 results.

In general Full Text Search engines are only scoring the top results. This
is e.g. one reason why Google limits the maximum page you can go to.

> Should I just use 2.9 instead?  But then 3.x doesn't seem to support this=
?

It supports it like 2.9, but not using the Hits API. As described above, to
show results 991 to 1000 request the top-1000 results and display the last
10 :-)

Uwe


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

This message and any attachments are intended only for the use of the add=
ressee and
may contain information that is privileged and confidential. If the reade=
r of the =

message is not the intended recipient or an authorized representative of =
the
intended recipient, you are hereby notified that any dissemination of thi=
s
communication is strictly prohibited. If you have received this communica=
tion in
error, please notify us immediately by e-mail and delete the message and =
any
attachments from your system.
=0D

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50075-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Jun 19 18:43:41 2011
Return-Path: <java-user-return-50075-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CE6EC4A5C
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 19 Jun 2011 18:43:41 +0000 (UTC)
Received: (qmail 59496 invoked by uid 500); 19 Jun 2011 18:43:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59413 invoked by uid 500); 19 Jun 2011 18:43:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59405 invoked by uid 99); 19 Jun 2011 18:43:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Jun 2011 18:43:39 +0000
X-ASF-Spam-Status: No, hits=-0.1 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dean.hiller@broadridge.com designates 64.18.2.16 as permitted sender)
Received: from [64.18.2.16] (HELO exprod7og119.obsmtp.com) (64.18.2.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Jun 2011 18:43:31 +0000
Received: from gwm.broadridge.com ([167.212.2.180]) (using TLSv1) by exprod7ob119.postini.com ([64.18.6.12]) with SMTP
	ID DSNKTf5DPobM3xUVZbWbG5Mdiz7c0Edb61DD@postini.com; Sun, 19 Jun 2011 11:43:11 PDT
Received: from jsppsldlpsi01.broadridge.net ([10.98.54.11])
	by gwm.broadridge.com (8.13.8/8.13.8) with ESMTP id p5JIhAg7925834
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Sun, 19 Jun 2011 14:43:10 -0400
Received: from JSIPSWEXHA02.bsg.ad.adp.com (jsipswexha02.bsg.ad.adp.com [10.17.69.34]) by jsppsldlpsi01.broadridge.net (RSA Interceptor) for <java-user@lucene.apache.org>; Sun, 19 Jun 2011 14:42:57 -0400
Received: from jscpcwexmaa1.bsg.ad.adp.com ([fe80::882f:16e8:308d:3ef]) by
 JSIPSWEXHA02.bsg.ad.adp.com ([::1]) with mapi; Sun, 19 Jun 2011 14:42:54
 -0400
From: "Hiller, Dean  x66079" <dean.hiller@broadridge.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Sun, 19 Jun 2011 14:42:49 -0400
Subject: basic example of lucene not working(must be user error, but I am
 just missing it)
Thread-Topic: basic example of lucene not working(must be user error, but I
 am just missing it)
Thread-Index: AcwusLCn7B6lEDw+S9KA5lPTCe0EDg==
Message-ID: <08230D4C8E666D479F6DE495A7684DCD0ABA9662@JSCPCWEXMAA1.bsg.ad.adp.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-cr-puzzleid: {21A4D7EF-6681-49DC-83AF-B5863DB9767A}
x-cr-hashedpuzzle: wwI= BWRy BZrl DHts D0aQ GABl HAdE HFxm HLkp HxsT H9+P
 IKXD JNUw J3/o KHK9
 LD7y;1;agBhAHYAYQAtAHUAcwBlAHIAQABsAHUAYwBlAG4AZQAuAGEAcABhAGMAaABlAC4AbwByAGcA;Sosha1_v1;7;{21A4D7EF-6681-49DC-83AF-B5863DB9767A};ZABlAGEAbgAuAGgAaQBsAGwAZQByAEAAYgByAG8AYQBkAHIAaQBkAGcAZQAuAGMAbwBtAA==;Sun,
 19 Jun 2011 18:42:49
 GMT;YgBhAHMAaQBjACAAZQB4AGEAbQBwAGwAZQAgAG8AZgAgAGwAdQBjAGUAbgBlACAAbgBvAHQAIAB3AG8AcgBrAGkAbgBnACgAbQB1AHMAdAAgAGIAZQAgAHUAcwBlAHIAIABlAHIAcgBvAHIALAAgAGIAdQB0ACAASQAgAGEAbQAgAGoAdQBzAHQAIABtAGkAcwBzAGkAbgBnACAAaQB0ACkA
acceptlanguage: en-US
Content-Type: multipart/alternative;
	boundary="_000_08230D4C8E666D479F6DE495A7684DCD0ABA9662JSCPCWEXMAA1bsg_"
MIME-Version: 1.0
X-RSA-Inspected: yes
X-RSA-Classifications: public
X-RSA-Action: allow

--_000_08230D4C8E666D479F6DE495A7684DCD0ABA9662JSCPCWEXMAA1bsg_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I have a JUnit test case so I can demonstrate Lucene to myself.  It correct=
ly returns a hit count of 2 but then when I get the docs, there is only ONE=
, and I can't seem to get the info on the 2nd hit at all.  Notice my logs p=
rint 2 and 1 if you run this example on the counts...

getTotalHits =3D 2
scoreDocs.length =3D 1 //shouldn't this return 2???

So, how do I get the field info from the other doc as well.  I want to get =
info on all hits.

package com.broadridge.papr1.test.other;

import java.io.File;

import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.index.IndexWriterConfig;
import org.apache.lucene.queryParser.QueryParser;
import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.search.Query;
import org.apache.lucene.search.ScoreDoc;
import org.apache.lucene.search.TopDocs;
import org.apache.lucene.search.TopScoreDocCollector;
import org.apache.lucene.store.Directory;
import org.apache.lucene.store.FSDirectory;
import org.apache.lucene.util.Version;
import org.joda.time.LocalDate;
import org.joda.time.format.DateTimeFormat;
import org.joda.time.format.DateTimeFormatter;
import org.junit.Test;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

public class PlayWithLuceneTest {

   private final static Logger log =3D LoggerFactory
         .getLogger(PlayWithLuceneTest.class);

   private static final String INDEX_DIR =3D "output/lucene-index";
   private static final DateTimeFormatter FMT2 =3D DateTimeFormat
         .forPattern("yyyyMMdd");

   @Test
   public void playWithLucene() throws Exception {
      LocalDate date =3D new LocalDate();
      indexArticle("temp", "dean", "let's do hbase", "some url", date);
      indexArticle("xyz", "dean", "hello there", "2nd etnry",
            date.plusDays(1));
      indexArticle("asdf", "tom", "helloX", "3rd entry", date.plusDays(3));
      indexArticle("qwer", "tom", "asdf", "4th entry", date.minusDays(1));

      Directory dir =3D FSDirectory.open(new File(INDEX_DIR));
      IndexSearcher is =3D new IndexSearcher(dir, true);
      QueryParser parser =3D new QueryParser(Version.LUCENE_32, "hello",
            new StandardAnalyzer(Version.LUCENE_32));

      String date1 =3D FMT2.print(date);
      String date2 =3D FMT2.print(date.plusDays(10));

      String queryStr =3D "author:dean";// and date:[ " + date1 + " TO " + =
date2
      // + " ]";
      Query query =3D parser.parse(queryStr);

      TopScoreDocCollector collector =3D TopScoreDocCollector.create(1, fal=
se);
      is.search(query, collector);

      int totalHits =3D collector.getTotalHits();
      log.info("total=3D" + totalHits);

      TopDocs topDocs =3D collector.topDocs();
      ScoreDoc[] scoreDocs =3D topDocs.scoreDocs;
      Document doc =3D is.doc(scoreDocs[0].doc);

      log.info("total docs=3D" + scoreDocs.length);

      is.close();
   }

   public void indexArticle(String article, String author,
         String title, String url, LocalDate dateWritten)
         throws Exception {
      Document document =3D createDocument(article, author,
                       title, url, dateWritten);
      indexDocument(document);
   }

   private Document createDocument(String article, String author,
         String title, String url, LocalDate dateWritten) {

      String dateTxt =3D FMT2.print(dateWritten);

      Document document =3D new Document();
      document.add(new Field("author", author, Field.Store.NO,
            Field.Index.NOT_ANALYZED));
      document.add(new Field("title", title, Field.Store.NO,
            Field.Index.NOT_ANALYZED));
      document.add(new Field("date", dateTxt, Field.Store.NO,
            Field.Index.NOT_ANALYZED));

      document.add(new Field("url", url, Field.Store.YES, Field.Index.NO));
      return document;
   }

   private void indexDocument(Document document) throws Exception {
      IndexWriterConfig conf =3D new IndexWriterConfig(Version.LUCENE_32,
            new StandardAnalyzer(Version.LUCENE_32));

      Directory dir =3D FSDirectory.open(new File(INDEX_DIR));
      IndexWriter writer =3D new IndexWriter(dir, conf);

      writer.addDocument(document);
      writer.optimize();
      writer.close();
   }
}

This message and any attachments are intended only for the use of the add=
ressee and
may contain information that is privileged and confidential. If the reade=
r of the =

message is not the intended recipient or an authorized representative of =
the
intended recipient, you are hereby notified that any dissemination of thi=
s
communication is strictly prohibited. If you have received this communica=
tion in
error, please notify us immediately by e-mail and delete the message and =
any
attachments from your system.
=0D
--_000_08230D4C8E666D479F6DE495A7684DCD0ABA9662JSCPCWEXMAA1bsg_--

From java-user-return-50076-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Jun 19 18:46:26 2011
Return-Path: <java-user-return-50076-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 049884570
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 19 Jun 2011 18:46:26 +0000 (UTC)
Received: (qmail 61829 invoked by uid 500); 19 Jun 2011 18:46:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61791 invoked by uid 500); 19 Jun 2011 18:46:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61783 invoked by uid 99); 19 Jun 2011 18:46:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Jun 2011 18:46:23 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dean.hiller@broadridge.com designates 64.18.2.206 as permitted sender)
Received: from [64.18.2.206] (HELO exprod7og126.obsmtp.com) (64.18.2.206)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Jun 2011 18:46:15 +0000
Received: from gwm.broadridge.com ([167.212.2.180]) (using TLSv1) by exprod7ob126.postini.com ([64.18.6.12]) with SMTP
	ID DSNKTf5D4E16BpZ6Z+vMR7F8aPWYkONssVfT@postini.com; Sun, 19 Jun 2011 11:45:54 PDT
Received: from jsppsldlpsi02.broadridge.net ([10.98.54.12])
	by gwm.broadridge.com (8.13.8/8.13.8) with ESMTP id p5JIjp2q1147076
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO);
	Sun, 19 Jun 2011 14:45:51 -0400
Received: from JSIPSWEXHA02.bsg.ad.adp.com (jsipswexha02.bsg.ad.adp.com [10.17.69.34]) by jsppsldlpsi02.broadridge.net (RSA Interceptor); Sun, 19 Jun 2011 14:45:49 -0400
Received: from jscpcwexmaa1.bsg.ad.adp.com ([fe80::882f:16e8:308d:3ef]) by
 JSIPSWEXHA02.bsg.ad.adp.com ([::1]) with mapi; Sun, 19 Jun 2011 14:45:43
 -0400
From: "Hiller, Dean  x66079" <dean.hiller@broadridge.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>,
        "simon.willnauer@gmail.com" <simon.willnauer@gmail.com>
Date: Sun, 19 Jun 2011 14:45:41 -0400
Subject: RE: how to do simple search paging results of 100 each? and query
 syntax question
Thread-Topic: how to do simple search paging results of 100 each? and query
 syntax question
Thread-Index: AcwuqQ1X/DhobR/iRxW028BdgLWIOwAB89cA
Message-ID: <08230D4C8E666D479F6DE495A7684DCD0ABA9663@JSCPCWEXMAA1.bsg.ad.adp.com>
References: <08230D4C8E666D479F6DE495A7684DCD0ABA965D@JSCPCWEXMAA1.bsg.ad.adp.com>
 <BANLkTinGShn3Y8a=eD=XGGF=0SydatKtdA@mail.gmail.com>
In-Reply-To: <BANLkTinGShn3Y8a=eD=XGGF=0SydatKtdA@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-RSA-Inspected: yes
X-RSA-Classifications: public
X-Virus-Checked: Checked by ClamAV on apache.org

SG1tbSwgbWF5YmUgSSBhbSB1c2luZyB0aGUgd3JvbmcgbGlicmFyeT8NCg0KU2VlIHRoZSBw
b3N0IEkganVzdCBzZW50IGVzcGVjaWFsbHkgb24gdGhlIGhpYmVybmF0ZSBzZWN0aW9uIHdo
ZXJlIGluIGhpYmVybmF0ZQ0KeW91IGNhbiBkbyBzZWxlY3QgKiBmcm9tIHh4eCB3aGVyZSB5
eXkgYW5kIHBhZ2UgdGhlIHJlc3VsdHMoZ2V0cyBzbG93ZXIgYW5kIHNsb3dlcg0KYXMgeW91
IGdvIHRvIHRoZSBudGggcGFnZSkgdnMuIHVzaW5nIFNjcm9sbGFibGVSZXN1bHRTZXQgaW4g
aGliZXJuYXRlIHdoaWNoIGRvZXMgDQpub3QgZ2V0IGFueSBzbG93ZXIgYXMgeW91IG1vdmUg
dG93YXJkcyB0aGUgbnRoIHBhZ2UuDQoNCkkgYW0gbm90IGNsb3NlIHRvIGEgd2ViIGFwcCBz
ZWFyY2ggYXQgYWxsLiAgTW9yZSBvZiBhIG5vU1FMIGVudmlyb25tZW50IHRoYXQgSSBuZWVk
IGluZGV4aW5nIG9uLg0KDQpUaGFua3MsDQpEZWFuDQoNCi0tLS0tT3JpZ2luYWwgTWVzc2Fn
ZS0tLS0tDQpGcm9tOiBTaW1vbiBXaWxsbmF1ZXIgW21haWx0bzpzaW1vbi53aWxsbmF1ZXJA
Z29vZ2xlbWFpbC5jb21dIA0KU2VudDogU3VuZGF5LCBKdW5lIDE5LCAyMDExIDExOjQ4IEFN
DQpUbzogamF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnDQpTdWJqZWN0OiBSZTogaG93IHRv
IGRvIHNpbXBsZSBzZWFyY2ggcGFnaW5nIHJlc3VsdHMgb2YgMTAwIGVhY2g/IGFuZCBxdWVy
eSBzeW50YXggcXVlc3Rpb24NCg0KT24gU3VuLCBKdW4gMTksIDIwMTEgYXQgNzoyOSBQTSwg
SGlsbGVyLCBEZWFuICB4NjYwNzkNCjxkZWFuLmhpbGxlckBicm9hZHJpZGdlLmNvbT4gd3Jv
dGU6DQo+IE9uIHRoZSBsaW5rDQo+IGh0dHA6Ly9sdWNlbmUuYXBhY2hlLm9yZy9qYXZhLzNf
MF8zL3F1ZXJ5cGFyc2Vyc3ludGF4Lmh0bWwjUmFuZ2UlMjBTZWFyY2hlcw0KPg0KPg0KPiBU
aGVyZSBpcyByYW5nZWQgc2VhcmNoZWQsIGhvdyBkbyBJIHNwZWNpZnkgZXZlcnl0aGluZyBh
Ym92ZSBhIGRhdGUgZnJvbSBkYXRlIDIwMDIwMTAxIMKgdG8gZW5kIG9mIHRpbWU/DQoNCmhl
cmUgeW91IGNhbiBzaW1wbHkgZ28gZm9yIGZpZWxkOlsyMDAyMDEwMSBUTyBdIGFuZCBsZWF2
ZSB0aGUgZW5kDQpibGFuay4gSWYgeW91IHdhbnQgdG8gZG8gZmFzdCBudW1lcmljIHNlYXJj
aGVzIHlvdSBzaG91bGQgdXNlDQpOdW1lcmljUmFuZ2VRdWVyeSBpbnN0ZWFkLg0KPg0KPg0K
Pg0KPiBOZXh0LCBJIGFtIHRlbXBvcmFyaWx5IHVzaW5nIGx1Y2VuZSBpbiBhIG5vU1FMIHNv
bHV0aW9uKHRvIHN3aXRjaCB0byBTb2xyIGxhdGVyIGFmdGVyIHByb3RvdHlwZSkgYW5kDQo+
DQo+IFNvIEkgYW0ganVzdCBpbmRleGluZyBiYXNpYyBjb2x1bW5zLi5ubyBuZWVkIGZvciAi
dG9wIHNlYXJjaCByZXN1bHRzIiwgZXRjLg0KPg0KPg0KPg0KPiBXaGVuIEkgbG9vayBhdCB0
aGUgSW5kZXhTZWFyY2hlciBhbmQgaXQncyBsaXN0IG9mIG1ldGhvZHMgSSBhbSBub3Qgc3Vy
ZSBob3cgSSBjYW4gZ3JhYiB0aGUgZmlyc3QgMTAwDQo+DQo+IFJlc3VsdHMsIHRoZW4gdGhl
IHNlY29uZCAxMDAgcmVzdWx0cyh0aGF0IGlzIGlmIEkgbmVlZCB0aGVtKSwgdGhlbiB0aGUg
dGhpcmQgMTAwIHJlc3VsdHMgKGFnYWluIGlmIG5lZWRlZCkNCg0Kc28gd2hhdCB5b3UgZG8g
aGVyZSBpcyBiYXNpY2FsbHkgcmVxdWVzdGluZyBhcyBtYW55IGRvY3VtZW50cyBhcyB5b3UN
Cm5lZWQgbGV0cyBzYXkgMTAwLCB0aGVuIHlvdSBkaXNwbGF5IGl0LiBPbmNlIHlvdSBuZWVk
IHRoZSBuZXh0IGh1bmRyZWQNCnlvdSBzZWFyY2ggYWdhaW4gcmVxdWVzdGluZyAyMDAgcmVz
dWx0cyBhbmQgb25jZSB0aGUgc2VhcmNoIHJldHVybnMNCnNpbXBseSBkaXNjYXJkIHRoZSBm
aXJzdCAxMDANCnVzZSB0aGlzIGFzIHRoZSBiYXNpYyBtZXRob2QgaWYgeW91IHNpbXBseSB1
c2UgYSBxdWVyeSB3aXRob3V0IGZpbHRlcnMNCm9yIGFueXRoaW5nLg0KDQogcHVibGljIFRv
cERvY3Mgc2VhcmNoKFF1ZXJ5IHF1ZXJ5LCBpbnQgbikNCj4NCj4NCj4NCj4gSSBzZWUgYSBU
b3BTY29yZURvY0NvbGxlY3Rvci5jcmVhdGUgbWV0aG9kIGJ1dCB0aGUgSW5kZXhTZWFyY2hl
ci5zZWFyY2goUXVlcnksIENvbGxlY3RvcikgbWV0aG9kIHN0YXRlcyBvbmx5IHRvIGNhbGwg
dGhhdCBtZXRob2QgaWYgeW91IG5lZWQgQUxMIHRoZSByZXN1bHRzLiDCoEkgZGVmaW5pdGVs
eSBkb24ndCBuZWVkIGFsbCBidXQgbmVlZCB0byBwYWdlIHRocm91Z2ggdGhlDQo+DQo+IFJl
c3VsdHMgYW5kIHR5cGljYWxseSBleGl0IG91dCBhcm91bmQgdGhlIHRoaXJkIHBhZ2UuIMKg
VGhpcyBpcyBub3QgYSB3ZWIgYXBwLCBzbyBpZGVhbGx5IEkgd2FudCBhIHJlZmVyZW5jZSBo
ZWxkIGludG8gdGhlIGluZGV4ZWQgdHJlZSBzbyBpdCBjYW4ga2VlcCBnaXZpbmcgbWUgdGhl
IG5leHQgMTAwIHJlc3VsdHMuDQoNCmluIGx1Y2VuZSB5b3UgbXVzdCBzZWFyY2ggYWdhaW4g
dG8gdGhlIHRoZSBuZXh0IDEwMCBidXQgaW4gZ2VuZXJhbCB0aGUNCnNlYXJjaCBzaG91bGQg
YmUgdmVyeSBmYXN0Lg0KDQpsZW1tZSBrbm93IGlmIHlvdSBoYXZlIG1vcmUgcXVlc2l0b25z
Lg0KDQpzaW1vbg0KPg0KPg0KPg0KPiBUaGFua3MsDQo+DQo+IERlYW4NCj4NCj4gVGhpcyBt
ZXNzYWdlIGFuZCBhbnkgYXR0YWNobWVudHMgYXJlIGludGVuZGVkIG9ubHkgZm9yIHRoZSB1
c2Ugb2YgdGhlIGFkZHJlc3NlZSBhbmQNCj4gbWF5IGNvbnRhaW4gaW5mb3JtYXRpb24gdGhh
dCBpcyBwcml2aWxlZ2VkIGFuZCBjb25maWRlbnRpYWwuIElmIHRoZSByZWFkZXIgb2YgdGhl
DQo+IG1lc3NhZ2UgaXMgbm90IHRoZSBpbnRlbmRlZCByZWNpcGllbnQgb3IgYW4gYXV0aG9y
aXplZCByZXByZXNlbnRhdGl2ZSBvZiB0aGUNCj4gaW50ZW5kZWQgcmVjaXBpZW50LCB5b3Ug
YXJlIGhlcmVieSBub3RpZmllZCB0aGF0IGFueSBkaXNzZW1pbmF0aW9uIG9mIHRoaXMNCj4g
Y29tbXVuaWNhdGlvbiBpcyBzdHJpY3RseSBwcm9oaWJpdGVkLiBJZiB5b3UgaGF2ZSByZWNl
aXZlZCB0aGlzIGNvbW11bmljYXRpb24gaW4NCj4gZXJyb3IsIHBsZWFzZSBub3RpZnkgdXMg
aW1tZWRpYXRlbHkgYnkgZS1tYWlsIGFuZCBkZWxldGUgdGhlIG1lc3NhZ2UgYW5kIGFueQ0K
PiBhdHRhY2htZW50cyBmcm9tIHlvdXIgc3lzdGVtLg0KPg0KPg0KDQotLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0NClRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNl
bmUuYXBhY2hlLm9yZw0KRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11
c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcNCg0KDQpUaGlzIG1lc3NhZ2UgYW5kIGFueSBh
dHRhY2htZW50cyBhcmUgaW50ZW5kZWQgb25seSBmb3IgdGhlIHVzZSBvZiB0aGUgYWRkcmVz
c2VlIGFuZA0KbWF5IGNvbnRhaW4gaW5mb3JtYXRpb24gdGhhdCBpcyBwcml2aWxlZ2VkIGFu
ZCBjb25maWRlbnRpYWwuIElmIHRoZSByZWFkZXIgb2YgdGhlIA0KbWVzc2FnZSBpcyBub3Qg
dGhlIGludGVuZGVkIHJlY2lwaWVudCBvciBhbiBhdXRob3JpemVkIHJlcHJlc2VudGF0aXZl
IG9mIHRoZQ0KaW50ZW5kZWQgcmVjaXBpZW50LCB5b3UgYXJlIGhlcmVieSBub3RpZmllZCB0
aGF0IGFueSBkaXNzZW1pbmF0aW9uIG9mIHRoaXMNCmNvbW11bmljYXRpb24gaXMgc3RyaWN0
bHkgcHJvaGliaXRlZC4gSWYgeW91IGhhdmUgcmVjZWl2ZWQgdGhpcyBjb21tdW5pY2F0aW9u
IGluDQplcnJvciwgcGxlYXNlIG5vdGlmeSB1cyBpbW1lZGlhdGVseSBieSBlLW1haWwgYW5k
IGRlbGV0ZSB0aGUgbWVzc2FnZSBhbmQgYW55DQphdHRhY2htZW50cyBmcm9tIHlvdXIgc3lz
dGVtLg0KDQo=


From java-user-return-50077-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Jun 19 19:48:00 2011
Return-Path: <java-user-return-50077-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A408C4D61
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 19 Jun 2011 19:48:00 +0000 (UTC)
Received: (qmail 11114 invoked by uid 500); 19 Jun 2011 19:47:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11052 invoked by uid 500); 19 Jun 2011 19:47:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11044 invoked by uid 99); 19 Jun 2011 19:47:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Jun 2011 19:47:58 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.213.176 as permitted sender)
Received: from [209.85.213.176] (HELO mail-yx0-f176.google.com) (209.85.213.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Jun 2011 19:47:53 +0000
Received: by yxd5 with SMTP id 5so2943953yxd.35
        for <java-user@lucene.apache.org>; Sun, 19 Jun 2011 12:47:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:reply-to:in-reply-to:references
         :date:message-id:subject:from:to:cc:content-type
         :content-transfer-encoding;
        bh=bC2xPSJiJ/zGjk69vvEOipn6Pe15wXtjMOsnRbqgWAA=;
        b=lZTio5R3XxkHMiI3d8Steq0h6JhDNxWYMjYkVJpds8GLF6ZTI/Gnef0xm/cHzBJRc2
         8lLjV/7xBO7Mxn6F8wzxJH/Sn0SOGzvOFgu3nw/nDyUumsnXrQNfDq3ahFYvHMs/OY2x
         6erxL3FLRC6QOAMU2qICQ5+qhLOZb6tPzXW+0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:cc:content-type:content-transfer-encoding;
        b=pfemT9WLxG4g1OGxNfdZDMAmuVd6hIrVE4EnetLXJMhT38iyMKBTWOX4TK0oMx5mOn
         oivz2bCMpRq5HRMgqGtwQlAlOQZKjfjNUOIo5/Vjkun4fF5/95jBL1PcNtZZX8ubY34r
         Eu275O7Dn/G8hwJbbo3HH81LgD3/gPUY3Li70=
MIME-Version: 1.0
Received: by 10.236.156.36 with SMTP id l24mr6155060yhk.99.1308512852524; Sun,
 19 Jun 2011 12:47:32 -0700 (PDT)
Received: by 10.147.38.2 with HTTP; Sun, 19 Jun 2011 12:47:32 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <08230D4C8E666D479F6DE495A7684DCD0ABA9663@JSCPCWEXMAA1.bsg.ad.adp.com>
References: <08230D4C8E666D479F6DE495A7684DCD0ABA965D@JSCPCWEXMAA1.bsg.ad.adp.com>
	<BANLkTinGShn3Y8a=eD=XGGF=0SydatKtdA@mail.gmail.com>
	<08230D4C8E666D479F6DE495A7684DCD0ABA9663@JSCPCWEXMAA1.bsg.ad.adp.com>
Date: Sun, 19 Jun 2011 21:47:32 +0200
Message-ID: <BANLkTi=A9B+XqC5k2LuP8seJg4XFj91juA@mail.gmail.com>
Subject: Re: how to do simple search paging results of 100 each? and query
 syntax question
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: "Hiller, Dean x66079" <dean.hiller@broadridge.com>
Cc: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

So do you need to score the documents or can they be in arbitrary order?

On Sun, Jun 19, 2011 at 8:45 PM, Hiller, Dean  x66079
<dean.hiller@broadridge.com> wrote:
> Hmmm, maybe I am using the wrong library?
>
> See the post I just sent especially on the hibernate section where in hib=
ernate
> you can do select * from xxx where yyy and page the results(gets slower a=
nd slower
> as you go to the nth page) vs. using ScrollableResultSet in hibernate whi=
ch does
> not get any slower as you move towards the nth page.
>
> I am not close to a web app search at all. =C2=A0More of a noSQL environm=
ent that I need indexing on.
>
> Thanks,
> Dean
>
> -----Original Message-----
> From: Simon Willnauer [mailto:simon.willnauer@googlemail.com]
> Sent: Sunday, June 19, 2011 11:48 AM
> To: java-user@lucene.apache.org
> Subject: Re: how to do simple search paging results of 100 each? and quer=
y syntax question
>
> On Sun, Jun 19, 2011 at 7:29 PM, Hiller, Dean =C2=A0x66079
> <dean.hiller@broadridge.com> wrote:
>> On the link
>> http://lucene.apache.org/java/3_0_3/queryparsersyntax.html#Range%20Searc=
hes
>>
>>
>> There is ranged searched, how do I specify everything above a date from =
date 20020101 =C2=A0to end of time?
>
> here you can simply go for field:[20020101 TO ] and leave the end
> blank. If you want to do fast numeric searches you should use
> NumericRangeQuery instead.
>>
>>
>>
>> Next, I am temporarily using lucene in a noSQL solution(to switch to Sol=
r later after prototype) and
>>
>> So I am just indexing basic columns..no need for "top search results", e=
tc.
>>
>>
>>
>> When I look at the IndexSearcher and it's list of methods I am not sure =
how I can grab the first 100
>>
>> Results, then the second 100 results(that is if I need them), then the t=
hird 100 results (again if needed)
>
> so what you do here is basically requesting as many documents as you
> need lets say 100, then you display it. Once you need the next hundred
> you search again requesting 200 results and once the search returns
> simply discard the first 100
> use this as the basic method if you simply use a query without filters
> or anything.
>
> =C2=A0public TopDocs search(Query query, int n)
>>
>>
>>
>> I see a TopScoreDocCollector.create method but the IndexSearcher.search(=
Query, Collector) method states only to call that method if you need ALL th=
e results. =C2=A0I definitely don't need all but need to page through the
>>
>> Results and typically exit out around the third page. =C2=A0This is not =
a web app, so ideally I want a reference held into the indexed tree so it c=
an keep giving me the next 100 results.
>
> in lucene you must search again to the the next 100 but in general the
> search should be very fast.
>
> lemme know if you have more quesitons.
>
> simon
>>
>>
>>
>> Thanks,
>>
>> Dean
>>
>> This message and any attachments are intended only for the use of the ad=
dressee and
>> may contain information that is privileged and confidential. If the read=
er of the
>> message is not the intended recipient or an authorized representative of=
 the
>> intended recipient, you are hereby notified that any dissemination of th=
is
>> communication is strictly prohibited. If you have received this communic=
ation in
>> error, please notify us immediately by e-mail and delete the message and=
 any
>> attachments from your system.
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> This message and any attachments are intended only for the use of the add=
ressee and
> may contain information that is privileged and confidential. If the reade=
r of the
> message is not the intended recipient or an authorized representative of =
the
> intended recipient, you are hereby notified that any dissemination of thi=
s
> communication is strictly prohibited. If you have received this communica=
tion in
> error, please notify us immediately by e-mail and delete the message and =
any
> attachments from your system.
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50078-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Jun 19 20:11:15 2011
Return-Path: <java-user-return-50078-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B0CAC4A7B
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 19 Jun 2011 20:11:15 +0000 (UTC)
Received: (qmail 21269 invoked by uid 500); 19 Jun 2011 20:11:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21217 invoked by uid 500); 19 Jun 2011 20:11:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21209 invoked by uid 99); 19 Jun 2011 20:11:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Jun 2011 20:11:13 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dean.hiller@broadridge.com designates 64.18.2.6 as permitted sender)
Received: from [64.18.2.6] (HELO exprod7og117.obsmtp.com) (64.18.2.6)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Jun 2011 20:11:07 +0000
Received: from gwm.broadridge.com ([167.212.2.180]) (using TLSv1) by exprod7ob117.postini.com ([64.18.6.12]) with SMTP
	ID DSNKTf5XxcqJVJ18clurRvpcrmTZLiX2QyvX@postini.com; Sun, 19 Jun 2011 13:10:46 PDT
Received: from jsppsldlpsi01.broadridge.net ([10.98.54.11])
	by gwm.broadridge.com (8.13.8/8.13.8) with ESMTP id p5JKAir3925714
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO);
	Sun, 19 Jun 2011 16:10:44 -0400
Received: from JSIPSWEXHA01.bsg.ad.adp.com (jsipswexha01.bsg.ad.adp.com [10.17.69.24]) by jsppsldlpsi01.broadridge.net (RSA Interceptor); Sun, 19 Jun 2011 16:10:38 -0400
Received: from jscpcwexmaa1.bsg.ad.adp.com ([fe80::882f:16e8:308d:3ef]) by
 JSIPSWEXHA01.bsg.ad.adp.com ([::1]) with mapi; Sun, 19 Jun 2011 16:10:36
 -0400
From: "Hiller, Dean  x66079" <dean.hiller@broadridge.com>
To: "simon.willnauer@gmail.com" <simon.willnauer@gmail.com>
CC: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Sun, 19 Jun 2011 16:10:33 -0400
Subject: RE: how to do simple search paging results of 100 each? and query
 syntax question
Thread-Topic: how to do simple search paging results of 100 each? and query
 syntax question
Thread-Index: Acwuub0YUjl6lnrvReq0kld05xBmFQAAm7ug
Message-ID: <08230D4C8E666D479F6DE495A7684DCD0ABA9668@JSCPCWEXMAA1.bsg.ad.adp.com>
References: <08230D4C8E666D479F6DE495A7684DCD0ABA965D@JSCPCWEXMAA1.bsg.ad.adp.com>
	<BANLkTinGShn3Y8a=eD=XGGF=0SydatKtdA@mail.gmail.com>
	<08230D4C8E666D479F6DE495A7684DCD0ABA9663@JSCPCWEXMAA1.bsg.ad.adp.com>
 <BANLkTi=A9B+XqC5k2LuP8seJg4XFj91juA@mail.gmail.com>
In-Reply-To: <BANLkTi=A9B+XqC5k2LuP8seJg4XFj91juA@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-RSA-Inspected: yes
X-RSA-Classifications: public
X-RSA-Action: allow

Tm8gbmVlZCB0byBzY29yZSBhdCBhbGwuICBKdXN0IG5lZWQgcGFnaW5nIGFuZCB0eXBpY2Fs
bHkgaXQgaXMgYSBsb29wIHNpbmNlIHRoaXMgaXMgYW4gb3Zlcm5pZ2h0IGJhdGNoIGpvYiBw
YWlyaW5nIHVwIGEgdHJhZGUgd2l0aCBvbmUgb3IgbWFueSB0cmFkZXMgb24gYSBub3NxbCBz
eXN0ZW0uICBXZSBkbyBuZWVkIGEgc29ydGVkIG9yZGVyIGFzIHdlbGwgc28gd2Uga2luZCBv
ZiB3YW50IHRvDQoNCjEuIGhhdmUgc29tZXRoaW5nIGxpa2UgU2Nyb2xsYWJsZVJlc3VsdFNl
dA0KMi4gYmUgYWJsZSB0byBwYXNzIGluIG9yZGVyIGJ5IHh4eA0KMy4gcGFnZSBvdmVyIHRo
ZSByZXN1bHRzIHdpdGhvdXQgcmVsZWFzaW5nIHRoZSBjdXJzb3IgdW50aWwgd2UgYXJlIGFs
bCBtYXRjaGVkIHVwKHdoaWNoIGNhbiB0eXBpY2FsbHkgYmUgdGhlIHRoaXJkIHBhZ2Ugb25j
ZSBpbiBhIHdoaWxlIGlzIHRoZSA4MHRoIHBhZ2UpLg0KDQpCSUcgTk9URTogT3VyIGZpcnN0
IHBhZ2UgZXZlbiB3aXRoIGluZGV4aW5nIGlzIHNsb3cgYmVjYXVzZSB0aGUgaW5kZXggaXMg
SFVHRS4gIFRoZSBzZWNvbmQgcGFnZSBpbmN1cnMgdGhhdCBzYW1lIGhpdCBpZiBpdCBzdGFy
dHMgb3ZlciB3aGljaCBpcyB3aHkgU2Nyb2xsYWJsZVJlc3VsdFNldCBpcyB2ZXJ5IGRlc2ly
ZWQgaW4gdGhlIG5vU1FMIHdvcmxkLiAgSWRlYWxseSwgd2Ugb25seSB3YW50IHRoZSBmaXJz
dCBwYWdlIHRvIGhhdmUgdGhhdCBoaXQsIGFuZCB0aGUgc2Vjb25kIHBhZ2UgcGlja3MgdXAg
aW4gdGhlIHRyZWUgd2hlcmUgdGhlIGZpcnN0IG9uZSBsZWZ0IG9mZi4NCg0KSSBkaWQgcG9z
dCBvbiB0aGUgaGJhc2UgbGlzdCBhcyBJIGFtIGN1cmlvdXMgaWYgb3RoZXIgbm9TUUwgdXNl
cnMgYXJlIHN0YXJ0aW5nIHRvIHNlZSB0aGlzIG5lZWQgeWV0LiAgSSBhbSBzdXJlIHBlb3Bs
ZSB3ZWxsIGp1c3QgYXMgU2Nyb2xsYWJsZVJlc3VsdFNldCB3YXMgZXZlbnR1YWxseSBhZGRl
ZCBpbnRvIGhpYmVybmF0ZS4NCg0KVGhhbmtzLA0KRGVhbg0KDQotLS0tLU9yaWdpbmFsIE1l
c3NhZ2UtLS0tLQ0KRnJvbTogU2ltb24gV2lsbG5hdWVyIFttYWlsdG86c2ltb24ud2lsbG5h
dWVyQGdvb2dsZW1haWwuY29tXSANClNlbnQ6IFN1bmRheSwgSnVuZSAxOSwgMjAxMSAxOjQ4
IFBNDQpUbzogSGlsbGVyLCBEZWFuIHg2NjA3OQ0KQ2M6IGphdmEtdXNlckBsdWNlbmUuYXBh
Y2hlLm9yZw0KU3ViamVjdDogUmU6IGhvdyB0byBkbyBzaW1wbGUgc2VhcmNoIHBhZ2luZyBy
ZXN1bHRzIG9mIDEwMCBlYWNoPyBhbmQgcXVlcnkgc3ludGF4IHF1ZXN0aW9uDQoNClNvIGRv
IHlvdSBuZWVkIHRvIHNjb3JlIHRoZSBkb2N1bWVudHMgb3IgY2FuIHRoZXkgYmUgaW4gYXJi
aXRyYXJ5IG9yZGVyPw0KDQpPbiBTdW4sIEp1biAxOSwgMjAxMSBhdCA4OjQ1IFBNLCBIaWxs
ZXIsIERlYW4gIHg2NjA3OQ0KPGRlYW4uaGlsbGVyQGJyb2FkcmlkZ2UuY29tPiB3cm90ZToN
Cj4gSG1tbSwgbWF5YmUgSSBhbSB1c2luZyB0aGUgd3JvbmcgbGlicmFyeT8NCj4NCj4gU2Vl
IHRoZSBwb3N0IEkganVzdCBzZW50IGVzcGVjaWFsbHkgb24gdGhlIGhpYmVybmF0ZSBzZWN0
aW9uIHdoZXJlIGluIGhpYmVybmF0ZQ0KPiB5b3UgY2FuIGRvIHNlbGVjdCAqIGZyb20geHh4
IHdoZXJlIHl5eSBhbmQgcGFnZSB0aGUgcmVzdWx0cyhnZXRzIHNsb3dlciBhbmQgc2xvd2Vy
DQo+IGFzIHlvdSBnbyB0byB0aGUgbnRoIHBhZ2UpIHZzLiB1c2luZyBTY3JvbGxhYmxlUmVz
dWx0U2V0IGluIGhpYmVybmF0ZSB3aGljaCBkb2VzDQo+IG5vdCBnZXQgYW55IHNsb3dlciBh
cyB5b3UgbW92ZSB0b3dhcmRzIHRoZSBudGggcGFnZS4NCj4NCj4gSSBhbSBub3QgY2xvc2Ug
dG8gYSB3ZWIgYXBwIHNlYXJjaCBhdCBhbGwuIMKgTW9yZSBvZiBhIG5vU1FMIGVudmlyb25t
ZW50IHRoYXQgSSBuZWVkIGluZGV4aW5nIG9uLg0KPg0KPiBUaGFua3MsDQo+IERlYW4NCj4N
Cj4gLS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0tLS0NCj4gRnJvbTogU2ltb24gV2lsbG5hdWVy
IFttYWlsdG86c2ltb24ud2lsbG5hdWVyQGdvb2dsZW1haWwuY29tXQ0KPiBTZW50OiBTdW5k
YXksIEp1bmUgMTksIDIwMTEgMTE6NDggQU0NCj4gVG86IGphdmEtdXNlckBsdWNlbmUuYXBh
Y2hlLm9yZw0KPiBTdWJqZWN0OiBSZTogaG93IHRvIGRvIHNpbXBsZSBzZWFyY2ggcGFnaW5n
IHJlc3VsdHMgb2YgMTAwIGVhY2g/IGFuZCBxdWVyeSBzeW50YXggcXVlc3Rpb24NCj4NCj4g
T24gU3VuLCBKdW4gMTksIDIwMTEgYXQgNzoyOSBQTSwgSGlsbGVyLCBEZWFuIMKgeDY2MDc5
DQo+IDxkZWFuLmhpbGxlckBicm9hZHJpZGdlLmNvbT4gd3JvdGU6DQo+PiBPbiB0aGUgbGlu
aw0KPj4gaHR0cDovL2x1Y2VuZS5hcGFjaGUub3JnL2phdmEvM18wXzMvcXVlcnlwYXJzZXJz
eW50YXguaHRtbCNSYW5nZSUyMFNlYXJjaGVzDQo+Pg0KPj4NCj4+IFRoZXJlIGlzIHJhbmdl
ZCBzZWFyY2hlZCwgaG93IGRvIEkgc3BlY2lmeSBldmVyeXRoaW5nIGFib3ZlIGEgZGF0ZSBm
cm9tIGRhdGUgMjAwMjAxMDEgwqB0byBlbmQgb2YgdGltZT8NCj4NCj4gaGVyZSB5b3UgY2Fu
IHNpbXBseSBnbyBmb3IgZmllbGQ6WzIwMDIwMTAxIFRPIF0gYW5kIGxlYXZlIHRoZSBlbmQN
Cj4gYmxhbmsuIElmIHlvdSB3YW50IHRvIGRvIGZhc3QgbnVtZXJpYyBzZWFyY2hlcyB5b3Ug
c2hvdWxkIHVzZQ0KPiBOdW1lcmljUmFuZ2VRdWVyeSBpbnN0ZWFkLg0KPj4NCj4+DQo+Pg0K
Pj4gTmV4dCwgSSBhbSB0ZW1wb3JhcmlseSB1c2luZyBsdWNlbmUgaW4gYSBub1NRTCBzb2x1
dGlvbih0byBzd2l0Y2ggdG8gU29sciBsYXRlciBhZnRlciBwcm90b3R5cGUpIGFuZA0KPj4N
Cj4+IFNvIEkgYW0ganVzdCBpbmRleGluZyBiYXNpYyBjb2x1bW5zLi5ubyBuZWVkIGZvciAi
dG9wIHNlYXJjaCByZXN1bHRzIiwgZXRjLg0KPj4NCj4+DQo+Pg0KPj4gV2hlbiBJIGxvb2sg
YXQgdGhlIEluZGV4U2VhcmNoZXIgYW5kIGl0J3MgbGlzdCBvZiBtZXRob2RzIEkgYW0gbm90
IHN1cmUgaG93IEkgY2FuIGdyYWIgdGhlIGZpcnN0IDEwMA0KPj4NCj4+IFJlc3VsdHMsIHRo
ZW4gdGhlIHNlY29uZCAxMDAgcmVzdWx0cyh0aGF0IGlzIGlmIEkgbmVlZCB0aGVtKSwgdGhl
biB0aGUgdGhpcmQgMTAwIHJlc3VsdHMgKGFnYWluIGlmIG5lZWRlZCkNCj4NCj4gc28gd2hh
dCB5b3UgZG8gaGVyZSBpcyBiYXNpY2FsbHkgcmVxdWVzdGluZyBhcyBtYW55IGRvY3VtZW50
cyBhcyB5b3UNCj4gbmVlZCBsZXRzIHNheSAxMDAsIHRoZW4geW91IGRpc3BsYXkgaXQuIE9u
Y2UgeW91IG5lZWQgdGhlIG5leHQgaHVuZHJlZA0KPiB5b3Ugc2VhcmNoIGFnYWluIHJlcXVl
c3RpbmcgMjAwIHJlc3VsdHMgYW5kIG9uY2UgdGhlIHNlYXJjaCByZXR1cm5zDQo+IHNpbXBs
eSBkaXNjYXJkIHRoZSBmaXJzdCAxMDANCj4gdXNlIHRoaXMgYXMgdGhlIGJhc2ljIG1ldGhv
ZCBpZiB5b3Ugc2ltcGx5IHVzZSBhIHF1ZXJ5IHdpdGhvdXQgZmlsdGVycw0KPiBvciBhbnl0
aGluZy4NCj4NCj4gwqBwdWJsaWMgVG9wRG9jcyBzZWFyY2goUXVlcnkgcXVlcnksIGludCBu
KQ0KPj4NCj4+DQo+Pg0KPj4gSSBzZWUgYSBUb3BTY29yZURvY0NvbGxlY3Rvci5jcmVhdGUg
bWV0aG9kIGJ1dCB0aGUgSW5kZXhTZWFyY2hlci5zZWFyY2goUXVlcnksIENvbGxlY3Rvcikg
bWV0aG9kIHN0YXRlcyBvbmx5IHRvIGNhbGwgdGhhdCBtZXRob2QgaWYgeW91IG5lZWQgQUxM
IHRoZSByZXN1bHRzLiDCoEkgZGVmaW5pdGVseSBkb24ndCBuZWVkIGFsbCBidXQgbmVlZCB0
byBwYWdlIHRocm91Z2ggdGhlDQo+Pg0KPj4gUmVzdWx0cyBhbmQgdHlwaWNhbGx5IGV4aXQg
b3V0IGFyb3VuZCB0aGUgdGhpcmQgcGFnZS4gwqBUaGlzIGlzIG5vdCBhIHdlYiBhcHAsIHNv
IGlkZWFsbHkgSSB3YW50IGEgcmVmZXJlbmNlIGhlbGQgaW50byB0aGUgaW5kZXhlZCB0cmVl
IHNvIGl0IGNhbiBrZWVwIGdpdmluZyBtZSB0aGUgbmV4dCAxMDAgcmVzdWx0cy4NCj4NCj4g
aW4gbHVjZW5lIHlvdSBtdXN0IHNlYXJjaCBhZ2FpbiB0byB0aGUgdGhlIG5leHQgMTAwIGJ1
dCBpbiBnZW5lcmFsIHRoZQ0KPiBzZWFyY2ggc2hvdWxkIGJlIHZlcnkgZmFzdC4NCj4NCj4g
bGVtbWUga25vdyBpZiB5b3UgaGF2ZSBtb3JlIHF1ZXNpdG9ucy4NCj4NCj4gc2ltb24NCj4+
DQo+Pg0KPj4NCj4+IFRoYW5rcywNCj4+DQo+PiBEZWFuDQo+Pg0KPj4gVGhpcyBtZXNzYWdl
IGFuZCBhbnkgYXR0YWNobWVudHMgYXJlIGludGVuZGVkIG9ubHkgZm9yIHRoZSB1c2Ugb2Yg
dGhlIGFkZHJlc3NlZSBhbmQNCj4+IG1heSBjb250YWluIGluZm9ybWF0aW9uIHRoYXQgaXMg
cHJpdmlsZWdlZCBhbmQgY29uZmlkZW50aWFsLiBJZiB0aGUgcmVhZGVyIG9mIHRoZQ0KPj4g
bWVzc2FnZSBpcyBub3QgdGhlIGludGVuZGVkIHJlY2lwaWVudCBvciBhbiBhdXRob3JpemVk
IHJlcHJlc2VudGF0aXZlIG9mIHRoZQ0KPj4gaW50ZW5kZWQgcmVjaXBpZW50LCB5b3UgYXJl
IGhlcmVieSBub3RpZmllZCB0aGF0IGFueSBkaXNzZW1pbmF0aW9uIG9mIHRoaXMNCj4+IGNv
bW11bmljYXRpb24gaXMgc3RyaWN0bHkgcHJvaGliaXRlZC4gSWYgeW91IGhhdmUgcmVjZWl2
ZWQgdGhpcyBjb21tdW5pY2F0aW9uIGluDQo+PiBlcnJvciwgcGxlYXNlIG5vdGlmeSB1cyBp
bW1lZGlhdGVseSBieSBlLW1haWwgYW5kIGRlbGV0ZSB0aGUgbWVzc2FnZSBhbmQgYW55DQo+
PiBhdHRhY2htZW50cyBmcm9tIHlvdXIgc3lzdGVtLg0KPj4NCj4+DQo+DQo+IC0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLQ0KPiBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3Jp
YmVAbHVjZW5lLmFwYWNoZS5vcmcNCj4gRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFp
bDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcNCj4NCj4NCj4gVGhpcyBtZXNz
YWdlIGFuZCBhbnkgYXR0YWNobWVudHMgYXJlIGludGVuZGVkIG9ubHkgZm9yIHRoZSB1c2Ug
b2YgdGhlIGFkZHJlc3NlZSBhbmQNCj4gbWF5IGNvbnRhaW4gaW5mb3JtYXRpb24gdGhhdCBp
cyBwcml2aWxlZ2VkIGFuZCBjb25maWRlbnRpYWwuIElmIHRoZSByZWFkZXIgb2YgdGhlDQo+
IG1lc3NhZ2UgaXMgbm90IHRoZSBpbnRlbmRlZCByZWNpcGllbnQgb3IgYW4gYXV0aG9yaXpl
ZCByZXByZXNlbnRhdGl2ZSBvZiB0aGUNCj4gaW50ZW5kZWQgcmVjaXBpZW50LCB5b3UgYXJl
IGhlcmVieSBub3RpZmllZCB0aGF0IGFueSBkaXNzZW1pbmF0aW9uIG9mIHRoaXMNCj4gY29t
bXVuaWNhdGlvbiBpcyBzdHJpY3RseSBwcm9oaWJpdGVkLiBJZiB5b3UgaGF2ZSByZWNlaXZl
ZCB0aGlzIGNvbW11bmljYXRpb24gaW4NCj4gZXJyb3IsIHBsZWFzZSBub3RpZnkgdXMgaW1t
ZWRpYXRlbHkgYnkgZS1tYWlsIGFuZCBkZWxldGUgdGhlIG1lc3NhZ2UgYW5kIGFueQ0KPiBh
dHRhY2htZW50cyBmcm9tIHlvdXIgc3lzdGVtLg0KPg0KPg0KDQpUaGlzIG1lc3NhZ2UgYW5k
IGFueSBhdHRhY2htZW50cyBhcmUgaW50ZW5kZWQgb25seSBmb3IgdGhlIHVzZSBvZiB0aGUg
YWRkcmVzc2VlIGFuZA0KbWF5IGNvbnRhaW4gaW5mb3JtYXRpb24gdGhhdCBpcyBwcml2aWxl
Z2VkIGFuZCBjb25maWRlbnRpYWwuIElmIHRoZSByZWFkZXIgb2YgdGhlIA0KbWVzc2FnZSBp
cyBub3QgdGhlIGludGVuZGVkIHJlY2lwaWVudCBvciBhbiBhdXRob3JpemVkIHJlcHJlc2Vu
dGF0aXZlIG9mIHRoZQ0KaW50ZW5kZWQgcmVjaXBpZW50LCB5b3UgYXJlIGhlcmVieSBub3Rp
ZmllZCB0aGF0IGFueSBkaXNzZW1pbmF0aW9uIG9mIHRoaXMNCmNvbW11bmljYXRpb24gaXMg
c3RyaWN0bHkgcHJvaGliaXRlZC4gSWYgeW91IGhhdmUgcmVjZWl2ZWQgdGhpcyBjb21tdW5p
Y2F0aW9uIGluDQplcnJvciwgcGxlYXNlIG5vdGlmeSB1cyBpbW1lZGlhdGVseSBieSBlLW1h
aWwgYW5kIGRlbGV0ZSB0aGUgbWVzc2FnZSBhbmQgYW55DQphdHRhY2htZW50cyBmcm9tIHlv
dXIgc3lzdGVtLg0KDQo=


From java-user-return-50079-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Jun 19 22:19:20 2011
Return-Path: <java-user-return-50079-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DD95444CD
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 19 Jun 2011 22:19:20 +0000 (UTC)
Received: (qmail 9425 invoked by uid 500); 19 Jun 2011 22:19:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9378 invoked by uid 500); 19 Jun 2011 22:19:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9370 invoked by uid 99); 19 Jun 2011 22:19:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Jun 2011 22:19:18 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dean.hiller@broadridge.com designates 64.18.2.6 as permitted sender)
Received: from [64.18.2.6] (HELO exprod7og117.obsmtp.com) (64.18.2.6)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Jun 2011 22:19:10 +0000
Received: from gwm.broadridge.com ([167.212.2.180]) (using TLSv1) by exprod7ob117.postini.com ([64.18.6.12]) with SMTP
	ID DSNKTf51yEcmRGpJgL3YuFqeeFGCjZzB9vhs@postini.com; Sun, 19 Jun 2011 15:18:49 PDT
Received: from jsppsldlpsi01.broadridge.net ([10.98.54.11])
	by gwm.broadridge.com (8.13.8/8.13.8) with ESMTP id p5JMIln91052754
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Sun, 19 Jun 2011 18:18:47 -0400
Received: from JSIPSWEXHA01.bsg.ad.adp.com (jsipswexha01.bsg.ad.adp.com [10.17.69.24]) by jsppsldlpsi01.broadridge.net (RSA Interceptor) for <java-user@lucene.apache.org>; Sun, 19 Jun 2011 18:18:41 -0400
Received: from jscpcwexmaa1.bsg.ad.adp.com ([fe80::882f:16e8:308d:3ef]) by
 JSIPSWEXHA01.bsg.ad.adp.com ([::1]) with mapi; Sun, 19 Jun 2011 18:18:38
 -0400
From: "Hiller, Dean  x66079" <dean.hiller@broadridge.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Sun, 19 Jun 2011 18:18:36 -0400
Subject: ranged query didn't work, got exception...
Thread-Topic: ranged query didn't work, got exception...
Thread-Index: AcwuqQ1X/DhobR/iRxW028BdgLWIOwAJU4bg
Message-ID: <08230D4C8E666D479F6DE495A7684DCD0ABA9672@JSCPCWEXMAA1.bsg.ad.adp.com>
References: <08230D4C8E666D479F6DE495A7684DCD0ABA965D@JSCPCWEXMAA1.bsg.ad.adp.com>
 <BANLkTinGShn3Y8a=eD=XGGF=0SydatKtdA@mail.gmail.com>
In-Reply-To: <BANLkTinGShn3Y8a=eD=XGGF=0SydatKtdA@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-RSA-Inspected: yes
X-RSA-Classifications: public
X-RSA-Action: allow
X-Virus-Checked: Checked by ClamAV on apache.org

ImhlcmUgeW91IGNhbiBzaW1wbHkgZ28gZm9yIGZpZWxkOlsyMDAyMDEwMSBUTyBdIGFuZCBs
ZWF2ZSB0aGUgZW5kDQpibGFuay4gSWYgeW91IHdhbnQgdG8gZG8gZmFzdCBudW1lcmljIHNl
YXJjaGVzIHlvdSBzaG91bGQgdXNlDQpOdW1lcmljUmFuZ2VRdWVyeSBpbnN0ZWFkLiINCg0K
SSB0cmllZCB0aGF0IGFuZCBnb3QgYW4gZXhjZXB0aW9uLi4uDQoNCkkgbmVlZCB0byBkbyBz
b21ldGhpbmcgbGlrZSBTdHJpbmcgcXVlcnlTdHIgPSAiYXV0aG9yOmRlYW4gYW5kIGRhdGU6
WyIgKyBkYXRlMSArICIgVE8gXSI7IHNvIGNhbiBJIGRvIGEgY29tYmluYXRpb24gb2YgTnVt
ZXJpY1JhbmdlUXVlcnkgYW5kIHRleHQgcXVlcnkgYW5kIGlzIHRoZXJlIGFueSBleGFtcGxl
IG9uIHRoaXM/DQoNCm9yZy5hcGFjaGUubHVjZW5lLnF1ZXJ5UGFyc2VyLlBhcnNlRXhjZXB0
aW9uOiBDYW5ub3QgcGFyc2UgJ2F1dGhvcjpkZWFuIGFuZCBkYXRlOlsyMDExMDYyMiBUTyBd
JzogRW5jb3VudGVyZWQgIiAiXSIgIl0gIiIgYXQgbGluZSAxLCBjb2x1bW4gMzQuDQpXYXMg
ZXhwZWN0aW5nIG9uZSBvZjoNCiAgICA8UkFOR0VJTl9RVU9URUQ+IC4uLg0KICAgIDxSQU5H
RUlOX0dPT1A+IC4uLg0KICAgIA0KCWF0IG9yZy5hcGFjaGUubHVjZW5lLnF1ZXJ5UGFyc2Vy
LlF1ZXJ5UGFyc2VyLnBhcnNlKFF1ZXJ5UGFyc2VyLmphdmE6MjExKQ0KCWF0IGNvbS5icm9h
ZHJpZGdlLnBhcHIxLnRlc3Qub3RoZXIuUGxheVdpdGhMdWNlbmVUZXN0LnJ1blNlYXJjaChQ
bGF5V2l0aEx1Y2VuZVRlc3QuamF2YTo4MikNCglhdCBjb20uYnJvYWRyaWRnZS5wYXByMS50
ZXN0Lm90aGVyLlBsYXlXaXRoTHVjZW5lVGVzdC5wbGF5V2l0aEx1Y2VuZShQbGF5V2l0aEx1
Y2VuZVRlc3QuamF2YTo1OSkNCglhdCBzdW4ucmVmbGVjdC5OYXRpdmVNZXRob2RBY2Nlc3Nv
ckltcGwuaW52b2tlMChOYXRpdmUgTWV0aG9kKQ0KCWF0IHN1bi5yZWZsZWN0Lk5hdGl2ZU1l
dGhvZEFjY2Vzc29ySW1wbC5pbnZva2UoTmF0aXZlTWV0aG9kQWNjZXNzb3JJbXBsLmphdmE6
MzkpDQoJYXQgc3VuLnJlZmxlY3QuRGVsZWdhdGluZ01ldGhvZEFjY2Vzc29ySW1wbC5pbnZv
a2UoRGVsZWdhdGluZ01ldGhvZEFjY2Vzc29ySW1wbC5qYXZhOjI1KQ0KCWF0IGphdmEubGFu
Zy5yZWZsZWN0Lk1ldGhvZC5pbnZva2UoTWV0aG9kLmphdmE6NTk3KQ0KCWF0IG9yZy5qdW5p
dC5ydW5uZXJzLm1vZGVsLkZyYW1ld29ya01ldGhvZCQxLnJ1blJlZmxlY3RpdmVDYWxsKEZy
YW1ld29ya01ldGhvZC5qYXZhOjQ0KQ0KCWF0IG9yZy5qdW5pdC5pbnRlcm5hbC5ydW5uZXJz
Lm1vZGVsLlJlZmxlY3RpdmVDYWxsYWJsZS5ydW4oUmVmbGVjdGl2ZUNhbGxhYmxlLmphdmE6
MTUpDQoJYXQgb3JnLmp1bml0LnJ1bm5lcnMubW9kZWwuRnJhbWV3b3JrTWV0aG9kLmludm9r
ZUV4cGxvc2l2ZWx5KEZyYW1ld29ya01ldGhvZC5qYXZhOjQxKQ0KCWF0IG9yZy5qdW5pdC5p
bnRlcm5hbC5ydW5uZXJzLnN0YXRlbWVudHMuSW52b2tlTWV0aG9kLmV2YWx1YXRlKEludm9r
ZU1ldGhvZC5qYXZhOjIwKQ0KCWF0IG9yZy5qdW5pdC5ydW5uZXJzLkJsb2NrSlVuaXQ0Q2xh
c3NSdW5uZXIucnVuTm90SWdub3JlZChCbG9ja0pVbml0NENsYXNzUnVubmVyLmphdmE6Nzkp
DQoJYXQgb3JnLmp1bml0LnJ1bm5lcnMuQmxvY2tKVW5pdDRDbGFzc1J1bm5lci5ydW5DaGls
ZChCbG9ja0pVbml0NENsYXNzUnVubmVyLmphdmE6NzEpDQoJYXQgb3JnLmp1bml0LnJ1bm5l
cnMuQmxvY2tKVW5pdDRDbGFzc1J1bm5lci5ydW5DaGlsZChCbG9ja0pVbml0NENsYXNzUnVu
bmVyLmphdmE6NDkpDQoJYXQgb3JnLmp1bml0LnJ1bm5lcnMuUGFyZW50UnVubmVyJDMucnVu
KFBhcmVudFJ1bm5lci5qYXZhOjE5MykNCglhdCBvcmcuanVuaXQucnVubmVycy5QYXJlbnRS
dW5uZXIkMS5zY2hlZHVsZShQYXJlbnRSdW5uZXIuamF2YTo1MikNCglhdCBvcmcuanVuaXQu
cnVubmVycy5QYXJlbnRSdW5uZXIucnVuQ2hpbGRyZW4oUGFyZW50UnVubmVyLmphdmE6MTkx
KQ0KCWF0IG9yZy5qdW5pdC5ydW5uZXJzLlBhcmVudFJ1bm5lci5hY2Nlc3MkMDAwKFBhcmVu
dFJ1bm5lci5qYXZhOjQyKQ0KCWF0IG9yZy5qdW5pdC5ydW5uZXJzLlBhcmVudFJ1bm5lciQy
LmV2YWx1YXRlKFBhcmVudFJ1bm5lci5qYXZhOjE4NCkNCglhdCBvcmcuanVuaXQucnVubmVy
cy5QYXJlbnRSdW5uZXIucnVuKFBhcmVudFJ1bm5lci5qYXZhOjIzNikNCglhdCBvcmcuZWNs
aXBzZS5qZHQuaW50ZXJuYWwuanVuaXQ0LnJ1bm5lci5KVW5pdDRUZXN0UmVmZXJlbmNlLnJ1
bihKVW5pdDRUZXN0UmVmZXJlbmNlLmphdmE6NDkpDQoJYXQgb3JnLmVjbGlwc2UuamR0Lmlu
dGVybmFsLmp1bml0LnJ1bm5lci5UZXN0RXhlY3V0aW9uLnJ1bihUZXN0RXhlY3V0aW9uLmph
dmE6MzgpDQoJYXQgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmp1bml0LnJ1bm5lci5SZW1v
dGVUZXN0UnVubmVyLnJ1blRlc3RzKFJlbW90ZVRlc3RSdW5uZXIuamF2YTo0NjcpDQoJYXQg
b3JnLmVjbGlwc2UuamR0LmludGVybmFsLmp1bml0LnJ1bm5lci5SZW1vdGVUZXN0UnVubmVy
LnJ1blRlc3RzKFJlbW90ZVRlc3RSdW5uZXIuamF2YTo2ODMpDQoJYXQgb3JnLmVjbGlwc2Uu
amR0LmludGVybmFsLmp1bml0LnJ1bm5lci5SZW1vdGVUZXN0UnVubmVyLnJ1bihSZW1vdGVU
ZXN0UnVubmVyLmphdmE6MzkwKQ0KCWF0IG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5qdW5p
dC5ydW5uZXIuUmVtb3RlVGVzdFJ1bm5lci5tYWluKFJlbW90ZVRlc3RSdW5uZXIuamF2YTox
OTcpDQpDYXVzZWQgYnk6IG9yZy5hcGFjaGUubHVjZW5lLnF1ZXJ5UGFyc2VyLlBhcnNlRXhj
ZXB0aW9uOiBFbmNvdW50ZXJlZCAiICJdIiAiXSAiIiBhdCBsaW5lIDEsIGNvbHVtbiAzNC4N
CldhcyBleHBlY3Rpbmcgb25lIG9mOg0KICAgIDxSQU5HRUlOX1FVT1RFRD4gLi4uDQogICAg
PFJBTkdFSU5fR09PUD4gLi4uDQogICAgDQoJYXQgb3JnLmFwYWNoZS5sdWNlbmUucXVlcnlQ
YXJzZXIuUXVlcnlQYXJzZXIuZ2VuZXJhdGVQYXJzZUV4Y2VwdGlvbihRdWVyeVBhcnNlci5q
YXZhOjE4MTgpDQoJYXQgb3JnLmFwYWNoZS5sdWNlbmUucXVlcnlQYXJzZXIuUXVlcnlQYXJz
ZXIuampfY29uc3VtZV90b2tlbihRdWVyeVBhcnNlci5qYXZhOjE3MDApDQoJYXQgb3JnLmFw
YWNoZS5sdWNlbmUucXVlcnlQYXJzZXIuUXVlcnlQYXJzZXIuVGVybShRdWVyeVBhcnNlci5q
YXZhOjE0NTUpDQoJYXQgb3JnLmFwYWNoZS5sdWNlbmUucXVlcnlQYXJzZXIuUXVlcnlQYXJz
ZXIuQ2xhdXNlKFF1ZXJ5UGFyc2VyLmphdmE6MTMwOSkNCglhdCBvcmcuYXBhY2hlLmx1Y2Vu
ZS5xdWVyeVBhcnNlci5RdWVyeVBhcnNlci5RdWVyeShRdWVyeVBhcnNlci5qYXZhOjEyNjYp
DQoJYXQgb3JnLmFwYWNoZS5sdWNlbmUucXVlcnlQYXJzZXIuUXVlcnlQYXJzZXIuVG9wTGV2
ZWxRdWVyeShRdWVyeVBhcnNlci5qYXZhOjEyMjYpDQoJYXQgb3JnLmFwYWNoZS5sdWNlbmUu
cXVlcnlQYXJzZXIuUXVlcnlQYXJzZXIucGFyc2UoUXVlcnlQYXJzZXIuamF2YToyMDYpDQoJ
Li4uIDI1IG1vcmUNCg0KDQotLS0tLU9yaWdpbmFsIE1lc3NhZ2UtLS0tLQ0KRnJvbTogU2lt
b24gV2lsbG5hdWVyIFttYWlsdG86c2ltb24ud2lsbG5hdWVyQGdvb2dsZW1haWwuY29tXSAN
ClNlbnQ6IFN1bmRheSwgSnVuZSAxOSwgMjAxMSAxMTo0OCBBTQ0KVG86IGphdmEtdXNlckBs
dWNlbmUuYXBhY2hlLm9yZw0KU3ViamVjdDogUmU6IGhvdyB0byBkbyBzaW1wbGUgc2VhcmNo
IHBhZ2luZyByZXN1bHRzIG9mIDEwMCBlYWNoPyBhbmQgcXVlcnkgc3ludGF4IHF1ZXN0aW9u
DQoNCk9uIFN1biwgSnVuIDE5LCAyMDExIGF0IDc6MjkgUE0sIEhpbGxlciwgRGVhbiAgeDY2
MDc5DQo8ZGVhbi5oaWxsZXJAYnJvYWRyaWRnZS5jb20+IHdyb3RlOg0KPiBPbiB0aGUgbGlu
aw0KPiBodHRwOi8vbHVjZW5lLmFwYWNoZS5vcmcvamF2YS8zXzBfMy9xdWVyeXBhcnNlcnN5
bnRheC5odG1sI1JhbmdlJTIwU2VhcmNoZXMNCj4NCj4NCj4gVGhlcmUgaXMgcmFuZ2VkIHNl
YXJjaGVkLCBob3cgZG8gSSBzcGVjaWZ5IGV2ZXJ5dGhpbmcgYWJvdmUgYSBkYXRlIGZyb20g
ZGF0ZSAyMDAyMDEwMSDCoHRvIGVuZCBvZiB0aW1lPw0KDQo+DQo+DQo+DQo+IE5leHQsIEkg
YW0gdGVtcG9yYXJpbHkgdXNpbmcgbHVjZW5lIGluIGEgbm9TUUwgc29sdXRpb24odG8gc3dp
dGNoIHRvIFNvbHIgbGF0ZXIgYWZ0ZXIgcHJvdG90eXBlKSBhbmQNCj4NCj4gU28gSSBhbSBq
dXN0IGluZGV4aW5nIGJhc2ljIGNvbHVtbnMuLm5vIG5lZWQgZm9yICJ0b3Agc2VhcmNoIHJl
c3VsdHMiLCBldGMuDQo+DQo+DQo+DQo+IFdoZW4gSSBsb29rIGF0IHRoZSBJbmRleFNlYXJj
aGVyIGFuZCBpdCdzIGxpc3Qgb2YgbWV0aG9kcyBJIGFtIG5vdCBzdXJlIGhvdyBJIGNhbiBn
cmFiIHRoZSBmaXJzdCAxMDANCj4NCj4gUmVzdWx0cywgdGhlbiB0aGUgc2Vjb25kIDEwMCBy
ZXN1bHRzKHRoYXQgaXMgaWYgSSBuZWVkIHRoZW0pLCB0aGVuIHRoZSB0aGlyZCAxMDAgcmVz
dWx0cyAoYWdhaW4gaWYgbmVlZGVkKQ0KDQpzbyB3aGF0IHlvdSBkbyBoZXJlIGlzIGJhc2lj
YWxseSByZXF1ZXN0aW5nIGFzIG1hbnkgZG9jdW1lbnRzIGFzIHlvdQ0KbmVlZCBsZXRzIHNh
eSAxMDAsIHRoZW4geW91IGRpc3BsYXkgaXQuIE9uY2UgeW91IG5lZWQgdGhlIG5leHQgaHVu
ZHJlZA0KeW91IHNlYXJjaCBhZ2FpbiByZXF1ZXN0aW5nIDIwMCByZXN1bHRzIGFuZCBvbmNl
IHRoZSBzZWFyY2ggcmV0dXJucw0Kc2ltcGx5IGRpc2NhcmQgdGhlIGZpcnN0IDEwMA0KdXNl
IHRoaXMgYXMgdGhlIGJhc2ljIG1ldGhvZCBpZiB5b3Ugc2ltcGx5IHVzZSBhIHF1ZXJ5IHdp
dGhvdXQgZmlsdGVycw0Kb3IgYW55dGhpbmcuDQoNCiBwdWJsaWMgVG9wRG9jcyBzZWFyY2go
UXVlcnkgcXVlcnksIGludCBuKQ0KPg0KPg0KPg0KPiBJIHNlZSBhIFRvcFNjb3JlRG9jQ29s
bGVjdG9yLmNyZWF0ZSBtZXRob2QgYnV0IHRoZSBJbmRleFNlYXJjaGVyLnNlYXJjaChRdWVy
eSwgQ29sbGVjdG9yKSBtZXRob2Qgc3RhdGVzIG9ubHkgdG8gY2FsbCB0aGF0IG1ldGhvZCBp
ZiB5b3UgbmVlZCBBTEwgdGhlIHJlc3VsdHMuIMKgSSBkZWZpbml0ZWx5IGRvbid0IG5lZWQg
YWxsIGJ1dCBuZWVkIHRvIHBhZ2UgdGhyb3VnaCB0aGUNCj4NCj4gUmVzdWx0cyBhbmQgdHlw
aWNhbGx5IGV4aXQgb3V0IGFyb3VuZCB0aGUgdGhpcmQgcGFnZS4gwqBUaGlzIGlzIG5vdCBh
IHdlYiBhcHAsIHNvIGlkZWFsbHkgSSB3YW50IGEgcmVmZXJlbmNlIGhlbGQgaW50byB0aGUg
aW5kZXhlZCB0cmVlIHNvIGl0IGNhbiBrZWVwIGdpdmluZyBtZSB0aGUgbmV4dCAxMDAgcmVz
dWx0cy4NCg0KaW4gbHVjZW5lIHlvdSBtdXN0IHNlYXJjaCBhZ2FpbiB0byB0aGUgdGhlIG5l
eHQgMTAwIGJ1dCBpbiBnZW5lcmFsIHRoZQ0Kc2VhcmNoIHNob3VsZCBiZSB2ZXJ5IGZhc3Qu
DQoNCmxlbW1lIGtub3cgaWYgeW91IGhhdmUgbW9yZSBxdWVzaXRvbnMuDQoNCnNpbW9uDQo+
DQo+DQo+DQo+IFRoYW5rcywNCj4NCj4gRGVhbg0KPg0KPiBUaGlzIG1lc3NhZ2UgYW5kIGFu
eSBhdHRhY2htZW50cyBhcmUgaW50ZW5kZWQgb25seSBmb3IgdGhlIHVzZSBvZiB0aGUgYWRk
cmVzc2VlIGFuZA0KPiBtYXkgY29udGFpbiBpbmZvcm1hdGlvbiB0aGF0IGlzIHByaXZpbGVn
ZWQgYW5kIGNvbmZpZGVudGlhbC4gSWYgdGhlIHJlYWRlciBvZiB0aGUNCj4gbWVzc2FnZSBp
cyBub3QgdGhlIGludGVuZGVkIHJlY2lwaWVudCBvciBhbiBhdXRob3JpemVkIHJlcHJlc2Vu
dGF0aXZlIG9mIHRoZQ0KPiBpbnRlbmRlZCByZWNpcGllbnQsIHlvdSBhcmUgaGVyZWJ5IG5v
dGlmaWVkIHRoYXQgYW55IGRpc3NlbWluYXRpb24gb2YgdGhpcw0KPiBjb21tdW5pY2F0aW9u
IGlzIHN0cmljdGx5IHByb2hpYml0ZWQuIElmIHlvdSBoYXZlIHJlY2VpdmVkIHRoaXMgY29t
bXVuaWNhdGlvbiBpbg0KPiBlcnJvciwgcGxlYXNlIG5vdGlmeSB1cyBpbW1lZGlhdGVseSBi
eSBlLW1haWwgYW5kIGRlbGV0ZSB0aGUgbWVzc2FnZSBhbmQgYW55DQo+IGF0dGFjaG1lbnRz
IGZyb20geW91ciBzeXN0ZW0uDQo+DQo+DQoNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KVG8gdW5zdWJz
Y3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3Jn
DQpGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNl
bmUuYXBhY2hlLm9yZw0KDQoNClRoaXMgbWVzc2FnZSBhbmQgYW55IGF0dGFjaG1lbnRzIGFy
ZSBpbnRlbmRlZCBvbmx5IGZvciB0aGUgdXNlIG9mIHRoZSBhZGRyZXNzZWUgYW5kDQptYXkg
Y29udGFpbiBpbmZvcm1hdGlvbiB0aGF0IGlzIHByaXZpbGVnZWQgYW5kIGNvbmZpZGVudGlh
bC4gSWYgdGhlIHJlYWRlciBvZiB0aGUgDQptZXNzYWdlIGlzIG5vdCB0aGUgaW50ZW5kZWQg
cmVjaXBpZW50IG9yIGFuIGF1dGhvcml6ZWQgcmVwcmVzZW50YXRpdmUgb2YgdGhlDQppbnRl
bmRlZCByZWNpcGllbnQsIHlvdSBhcmUgaGVyZWJ5IG5vdGlmaWVkIHRoYXQgYW55IGRpc3Nl
bWluYXRpb24gb2YgdGhpcw0KY29tbXVuaWNhdGlvbiBpcyBzdHJpY3RseSBwcm9oaWJpdGVk
LiBJZiB5b3UgaGF2ZSByZWNlaXZlZCB0aGlzIGNvbW11bmljYXRpb24gaW4NCmVycm9yLCBw
bGVhc2Ugbm90aWZ5IHVzIGltbWVkaWF0ZWx5IGJ5IGUtbWFpbCBhbmQgZGVsZXRlIHRoZSBt
ZXNzYWdlIGFuZCBhbnkNCmF0dGFjaG1lbnRzIGZyb20geW91ciBzeXN0ZW0uDQoNCg==


From java-user-return-50080-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Jun 19 22:26:07 2011
Return-Path: <java-user-return-50080-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A29794574
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 19 Jun 2011 22:26:07 +0000 (UTC)
Received: (qmail 16321 invoked by uid 500); 19 Jun 2011 22:26:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16268 invoked by uid 500); 19 Jun 2011 22:26:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16260 invoked by uid 99); 19 Jun 2011 22:26:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Jun 2011 22:26:05 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sokolov@ifactory.com designates 68.236.111.2 as permitted sender)
Received: from [68.236.111.2] (HELO camelot.ifactory.com) (68.236.111.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Jun 2011 22:25:59 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by camelot.ifactory.com (Postfix) with ESMTP id 5C296367278D;
	Sun, 19 Jun 2011 18:25:37 -0400 (EDT)
Received: from camelot.ifactory.com ([127.0.0.1])
	by localhost (camelot.ifactory.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id WG6x+5xS49kv; Sun, 19 Jun 2011 18:25:15 -0400 (EDT)
Received: from [192.168.1.4] (pool-108-7-217-216.bstnma.fios.verizon.net [108.7.217.216])
	by camelot.ifactory.com (Postfix) with ESMTPSA id 974D9367270F;
	Sun, 19 Jun 2011 18:25:15 -0400 (EDT)
Message-ID: <4DFE774B.3040009@ifactory.com>
Date: Sun, 19 Jun 2011 18:25:15 -0400
From: Michael Sokolov <sokolov@ifactory.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.17) Gecko/20110414 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
CC: "Hiller, Dean x66079" <dean.hiller@broadridge.com>
Subject: Re: ranged query didn't work, got exception...
References: <08230D4C8E666D479F6DE495A7684DCD0ABA965D@JSCPCWEXMAA1.bsg.ad.adp.com> <BANLkTinGShn3Y8a=eD=XGGF=0SydatKtdA@mail.gmail.com> <08230D4C8E666D479F6DE495A7684DCD0ABA9672@JSCPCWEXMAA1.bsg.ad.adp.com>
In-Reply-To: <08230D4C8E666D479F6DE495A7684DCD0ABA9672@JSCPCWEXMAA1.bsg.ad.adp.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit

I think you need

field:[20020101 TO *]

although the "*" option isn't available in some versions (pre 3.1?) and 
you just have to supply a big value:

field:[20020101 TO 99999999]

-Mike

On 6/19/2011 6:18 PM, Hiller, Dean x66079 wrote:
> "here you can simply go for field:[20020101 TO ] and leave the end
> blank. If you want to do fast numeric searches you should use
> NumericRangeQuery instead."
>
> I tried that and got an exception...
>
> I need to do something like String queryStr = "author:dean and date:[" + date1 + " TO ]"; so can I do a combination of NumericRangeQuery and text query and is there any example on this?
>
> org.apache.lucene.queryParser.ParseException: Cannot parse 'author:dean and date:[20110622 TO ]': Encountered " "]" "] "" at line 1, column 34.
> Was expecting one of:
>      <RANGEIN_QUOTED>  ...
>      <RANGEIN_GOOP>  ...
>
> 	at org.apache.lucene.queryParser.QueryParser.parse(QueryParser.java:211)
> 	at com.broadridge.papr1.test.other.PlayWithLuceneTest.runSearch(PlayWithLuceneTest.java:82)
> 	at com.broadridge.papr1.test.other.PlayWithLuceneTest.playWithLucene(PlayWithLuceneTest.java:59)
> 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
> 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
> 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
> 	at java.lang.reflect.Method.invoke(Method.java:597)
> 	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
> 	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
> 	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
> 	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
> 	at org.junit.runners.BlockJUnit4ClassRunner.runNotIgnored(BlockJUnit4ClassRunner.java:79)
> 	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:71)
> 	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
> 	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
> 	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
> 	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
> 	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
> 	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
> 	at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
> 	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:49)
> 	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
> 	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
> 	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
> 	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
> 	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
> Caused by: org.apache.lucene.queryParser.ParseException: Encountered " "]" "] "" at line 1, column 34.
> Was expecting one of:
>      <RANGEIN_QUOTED>  ...
>      <RANGEIN_GOOP>  ...
>
> 	at org.apache.lucene.queryParser.QueryParser.generateParseException(QueryParser.java:1818)
> 	at org.apache.lucene.queryParser.QueryParser.jj_consume_token(QueryParser.java:1700)
> 	at org.apache.lucene.queryParser.QueryParser.Term(QueryParser.java:1455)
> 	at org.apache.lucene.queryParser.QueryParser.Clause(QueryParser.java:1309)
> 	at org.apache.lucene.queryParser.QueryParser.Query(QueryParser.java:1266)
> 	at org.apache.lucene.queryParser.QueryParser.TopLevelQuery(QueryParser.java:1226)
> 	at org.apache.lucene.queryParser.QueryParser.parse(QueryParser.java:206)
> 	... 25 more
>
>
> -----Original Message-----
> From: Simon Willnauer [mailto:simon.willnauer@googlemail.com]
> Sent: Sunday, June 19, 2011 11:48 AM
> To: java-user@lucene.apache.org
> Subject: Re: how to do simple search paging results of 100 each? and query syntax question
>
> On Sun, Jun 19, 2011 at 7:29 PM, Hiller, Dean  x66079
> <dean.hiller@broadridge.com>  wrote:
>> On the link
>> http://lucene.apache.org/java/3_0_3/queryparsersyntax.html#Range%20Searches
>>
>>
>> There is ranged searched, how do I specify everything above a date from date 20020101  to end of time?
>>
>>
>> Next, I am temporarily using lucene in a noSQL solution(to switch to Solr later after prototype) and
>>
>> So I am just indexing basic columns..no need for "top search results", etc.
>>
>>
>>
>> When I look at the IndexSearcher and it's list of methods I am not sure how I can grab the first 100
>>
>> Results, then the second 100 results(that is if I need them), then the third 100 results (again if needed)
> so what you do here is basically requesting as many documents as you
> need lets say 100, then you display it. Once you need the next hundred
> you search again requesting 200 results and once the search returns
> simply discard the first 100
> use this as the basic method if you simply use a query without filters
> or anything.
>
>   public TopDocs search(Query query, int n)
>>
>>
>> I see a TopScoreDocCollector.create method but the IndexSearcher.search(Query, Collector) method states only to call that method if you need ALL the results.  I definitely don't need all but need to page through the
>>
>> Results and typically exit out around the third page.  This is not a web app, so ideally I want a reference held into the indexed tree so it can keep giving me the next 100 results.
> in lucene you must search again to the the next 100 but in general the
> search should be very fast.
>
> lemme know if you have more quesitons.
>
> simon
>>
>>
>> Thanks,
>>
>> Dean
>>
>> This message and any attachments are intended only for the use of the addressee and
>> may contain information that is privileged and confidential. If the reader of the
>> message is not the intended recipient or an authorized representative of the
>> intended recipient, you are hereby notified that any dissemination of this
>> communication is strictly prohibited. If you have received this communication in
>> error, please notify us immediately by e-mail and delete the message and any
>> attachments from your system.
>>
>>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> This message and any attachments are intended only for the use of the addressee and
> may contain information that is privileged and confidential. If the reader of the
> message is not the intended recipient or an authorized representative of the
> intended recipient, you are hereby notified that any dissemination of this
> communication is strictly prohibited. If you have received this communication in
> error, please notify us immediately by e-mail and delete the message and any
> attachments from your system.
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50081-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Jun 19 22:37:52 2011
Return-Path: <java-user-return-50081-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 66AFC4BD9
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 19 Jun 2011 22:37:52 +0000 (UTC)
Received: (qmail 21035 invoked by uid 500); 19 Jun 2011 22:37:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21000 invoked by uid 500); 19 Jun 2011 22:37:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20992 invoked by uid 99); 19 Jun 2011 22:37:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Jun 2011 22:37:50 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dean.hiller@broadridge.com designates 64.18.2.179 as permitted sender)
Received: from [64.18.2.179] (HELO exprod7og113.obsmtp.com) (64.18.2.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Jun 2011 22:37:42 +0000
Received: from gwm.broadridge.com ([167.212.2.180]) (using TLSv1) by exprod7ob113.postini.com ([64.18.6.12]) with SMTP
	ID DSNKTf56IOaAUhlfBZJNE9xmNw++Q7TltsEZ@postini.com; Sun, 19 Jun 2011 15:37:21 PDT
Received: from jsppsldlpsi02.broadridge.net ([10.98.54.12])
	by gwm.broadridge.com (8.13.8/8.13.8) with ESMTP id p5JMbJD5626894
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Sun, 19 Jun 2011 18:37:19 -0400
Received: from JSIPSWEXHA02.bsg.ad.adp.com (jsipswexha02.bsg.ad.adp.com [10.17.69.34]) by jsppsldlpsi02.broadridge.net (RSA Interceptor) for <java-user@lucene.apache.org>; Sun, 19 Jun 2011 18:37:18 -0400
Received: from jscpcwexmaa1.bsg.ad.adp.com ([fe80::882f:16e8:308d:3ef]) by
 JSIPSWEXHA02.bsg.ad.adp.com ([::1]) with mapi; Sun, 19 Jun 2011 18:37:11
 -0400
From: "Hiller, Dean  x66079" <dean.hiller@broadridge.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Sun, 19 Jun 2011 18:37:10 -0400
Subject: RE: ranged query didn't work, got exception...
Thread-Topic: ranged query didn't work, got exception...
Thread-Index: Acwuz9Kr6G/qSkGLQAS6GIg6A50WwgAAWuOg
Message-ID: <08230D4C8E666D479F6DE495A7684DCD0ABA9673@JSCPCWEXMAA1.bsg.ad.adp.com>
References: <08230D4C8E666D479F6DE495A7684DCD0ABA965D@JSCPCWEXMAA1.bsg.ad.adp.com>
 <BANLkTinGShn3Y8a=eD=XGGF=0SydatKtdA@mail.gmail.com>
 <08230D4C8E666D479F6DE495A7684DCD0ABA9672@JSCPCWEXMAA1.bsg.ad.adp.com>
 <4DFE774B.3040009@ifactory.com>
In-Reply-To: <4DFE774B.3040009@ifactory.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-RSA-Inspected: yes
X-RSA-Classifications: public
X-Virus-Checked: Checked by ClamAV on apache.org

U3dlZWVldCwgKiB3b3JrZWQsIGJ1dCBTSFVDS1MuLi4uLnF1ZXJ5IGNvbXBsZXRlbHkgcmV0
dXJucyBubyByZXN1bHRzLiAgSSBkb24ndCBnZXQgaXQuLi5pdCBnZXRzIGludG8gdGhlIGx1
Y2VuZSBjb2RlIGFuZCBzaW5jZSB0aGVyZSBpcyBubyAiU2NvcmVyIiByZXR1cm5lZCwgaXQg
c2VlbXMgdG8gc2tpcCBvdmVyIGFueSByZXN1bHRzIHRoYXQgd291bGQgYmUgdmFsaWQgOigu
Li4uYW55IGlkZWFzIHdoYXQgaXMgd3Jvbmcgd2l0aCB0aGlzIHByb2dyYW0uLi4uDQoNCk15
Q29sbGVjdG9yLmNvbGxlY3QoaW50IGRvY0lkKSBuZXZlciBnZXRzIGNhbGxlZCA6KC4gIA0K
DQpwYWNrYWdlIGNvbS5icm9hZHJpZGdlLnBhcHIxLnRlc3Qub3RoZXI7DQoNCmltcG9ydCBq
YXZhLmlvLkZpbGU7DQppbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjsNCg0KaW1wb3J0IG9y
Zy5hcGFjaGUubHVjZW5lLmFuYWx5c2lzLnN0YW5kYXJkLlN0YW5kYXJkQW5hbHl6ZXI7DQpp
bXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUuZG9jdW1lbnQuRG9jdW1lbnQ7DQppbXBvcnQgb3Jn
LmFwYWNoZS5sdWNlbmUuZG9jdW1lbnQuRmllbGQ7DQppbXBvcnQgb3JnLmFwYWNoZS5sdWNl
bmUuaW5kZXguSW5kZXhSZWFkZXI7DQppbXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUuaW5kZXgu
SW5kZXhXcml0ZXI7DQppbXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUuaW5kZXguSW5kZXhXcml0
ZXJDb25maWc7DQppbXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUucXVlcnlQYXJzZXIuUGFyc2VF
eGNlcHRpb247DQppbXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUucXVlcnlQYXJzZXIuUXVlcnlQ
YXJzZXI7DQppbXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUuc2VhcmNoLkNvbGxlY3RvcjsNCmlt
cG9ydCBvcmcuYXBhY2hlLmx1Y2VuZS5zZWFyY2guSW5kZXhTZWFyY2hlcjsNCmltcG9ydCBv
cmcuYXBhY2hlLmx1Y2VuZS5zZWFyY2guUXVlcnk7DQppbXBvcnQgb3JnLmFwYWNoZS5sdWNl
bmUuc2VhcmNoLlNjb3JlcjsNCmltcG9ydCBvcmcuYXBhY2hlLmx1Y2VuZS5zdG9yZS5EaXJl
Y3Rvcnk7DQppbXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUuc3RvcmUuRlNEaXJlY3Rvcnk7DQpp
bXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUudXRpbC5WZXJzaW9uOw0KaW1wb3J0IG9yZy5qb2Rh
LnRpbWUuTG9jYWxEYXRlOw0KaW1wb3J0IG9yZy5qb2RhLnRpbWUuZm9ybWF0LkRhdGVUaW1l
Rm9ybWF0Ow0KaW1wb3J0IG9yZy5qb2RhLnRpbWUuZm9ybWF0LkRhdGVUaW1lRm9ybWF0dGVy
Ow0KaW1wb3J0IG9yZy5qdW5pdC5UZXN0Ow0KaW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXI7DQpp
bXBvcnQgb3JnLnNsZjRqLkxvZ2dlckZhY3Rvcnk7DQoNCnB1YmxpYyBjbGFzcyBQbGF5V2l0
aEx1Y2VuZVRlc3Qgew0KDQogICBwcml2YXRlIGZpbmFsIHN0YXRpYyBMb2dnZXIgbG9nID0g
TG9nZ2VyRmFjdG9yeQ0KICAgICAgICAgLmdldExvZ2dlcihQbGF5V2l0aEx1Y2VuZVRlc3Qu
Y2xhc3MpOw0KDQogICBwcml2YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmcgSU5ERVhfRElSX1BS
RUZJWCA9ICJvdXRwdXQvbHVjZW5lL2x1Y2VuZS1pbmRleCI7DQogICBwcml2YXRlIHN0YXRp
YyBmaW5hbCBEYXRlVGltZUZvcm1hdHRlciBGTVQyID0gRGF0ZVRpbWVGb3JtYXQNCiAgICAg
ICAgIC5mb3JQYXR0ZXJuKCJ5eXl5TU1kZCIpOw0KDQogICBAVGVzdA0KICAgcHVibGljIHZv
aWQgcGxheVdpdGhMdWNlbmUoKSB0aHJvd3MgRXhjZXB0aW9uIHsNCiAgICAgIEluZGV4V3Jp
dGVyQ29uZmlnIGNvbmYgPSBuZXcgSW5kZXhXcml0ZXJDb25maWcoVmVyc2lvbi5MVUNFTkVf
MzIsDQogICAgICAgICAgICBuZXcgU3RhbmRhcmRBbmFseXplcihWZXJzaW9uLkxVQ0VORV8z
MikpOw0KDQogICAgICBEaXJlY3RvcnkgZGlyID0gRlNEaXJlY3Rvcnkub3BlbihuZXcgRmls
ZShJTkRFWF9ESVJfUFJFRklYKSk7DQogICAgICBJbmRleFdyaXRlciB3cml0ZXIgPSBuZXcg
SW5kZXhXcml0ZXIoZGlyLCBjb25mKTsNCg0KICAgICAgTG9jYWxEYXRlIGRhdGUgPSBuZXcg
TG9jYWxEYXRlKCk7DQoNCiAgICAgIGNyZWF0ZUFuZEluZGV4KHdyaXRlciwgInRpdGxlMSIs
ICJkZWFuIiwgZGF0ZSwgImVudHJ5MSIpOw0KICAgICAgY3JlYXRlQW5kSW5kZXgod3JpdGVy
LCAidGl0bGUxIiwgImRlYW4yIiwgZGF0ZS5wbHVzRGF5cyg4KSwgImVudHJ5MiIpOw0KICAg
ICAgY3JlYXRlQW5kSW5kZXgod3JpdGVyLCAidGl0bGUxIiwgImRlYW4iLCBkYXRlLnBsdXNE
YXlzKDQpLCAiZW50cnkzIik7DQogICAgICBjcmVhdGVBbmRJbmRleCh3cml0ZXIsICJ0aXRs
ZTEiLCAiZGVhbjIiLCBkYXRlLnBsdXNEYXlzKDUpLCAiZW50cnk0Iik7DQogICAgICBjcmVh
dGVBbmRJbmRleCh3cml0ZXIsICJ0aXRsZTEiLCAiZGVhbjIiLCBkYXRlLnBsdXNEYXlzKDIp
LCAiZW50cnk1Iik7DQogICAgICBjcmVhdGVBbmRJbmRleCh3cml0ZXIsICJ0aXRsZTEiLCAi
ZGVhbjIiLCBkYXRlLnBsdXNEYXlzKDYpLCAiZW50cnk2Iik7DQogICAgICBjcmVhdGVBbmRJ
bmRleCh3cml0ZXIsICJ0aXRsZTEiLCAiZGVhbiIsIGRhdGUucGx1c0RheXMoOSksICJlbnRy
eTciKTsNCiAgICAgIGNyZWF0ZUFuZEluZGV4KHdyaXRlciwgInRpdGxlMSIsICJkZWFuMiIs
IGRhdGUucGx1c0RheXMoNSksICJlbnRyeTgiKTsNCg0KICAgICAgd3JpdGVyLm9wdGltaXpl
KCk7DQogICAgICB3cml0ZXIuY2xvc2UoKTsNCg0KICAgICAgcnVuU2VhcmNoKCk7DQogICB9
DQoNCiAgIHByaXZhdGUgdm9pZCBjcmVhdGVBbmRJbmRleChJbmRleFdyaXRlciB3cml0ZXIs
DQogICAgICAgICBTdHJpbmcgdGl0bGUsIFN0cmluZyBhdXRob3IsIExvY2FsRGF0ZSBkYXRl
LCBTdHJpbmcgcmVzdWx0KQ0KICAgICAgICAgdGhyb3dzIElPRXhjZXB0aW9uIHsNCiAgICAg
IERvY3VtZW50IGRvY3VtZW50ID0gY3JlYXRlRG9jdW1lbnQodGl0bGUsDQogICAgICAgICAg
ICBhdXRob3IsIHJlc3VsdCwgZGF0ZSk7DQogICAgICB3cml0ZXIuYWRkRG9jdW1lbnQoZG9j
dW1lbnQpOw0KICAgfQ0KDQogICBwcml2YXRlIHZvaWQgcnVuU2VhcmNoKCkgdGhyb3dzIElP
RXhjZXB0aW9uLA0KICAgICAgICAgUGFyc2VFeGNlcHRpb24gew0KICAgICAgTG9jYWxEYXRl
IGRhdGUgPSBuZXcgTG9jYWxEYXRlKCk7DQoNCiAgICAgIERpcmVjdG9yeSBkaXIgPSBGU0Rp
cmVjdG9yeS5vcGVuKG5ldyBGaWxlKElOREVYX0RJUl9QUkVGSVgpKTsNCiAgICAgIEluZGV4
U2VhcmNoZXIgaXMgPSBuZXcgSW5kZXhTZWFyY2hlcihkaXIsIHRydWUpOw0KICAgICAgUXVl
cnlQYXJzZXIgcGFyc2VyID0gbmV3IFF1ZXJ5UGFyc2VyKFZlcnNpb24uTFVDRU5FXzMyLCAi
aGVsbG8iLA0KICAgICAgICAgICAgbmV3IFN0YW5kYXJkQW5hbHl6ZXIoVmVyc2lvbi5MVUNF
TkVfMzIpKTsNCg0KICAgICAgU3RyaW5nIGRhdGUxID0gRk1UMi5wcmludChkYXRlLnBsdXNE
YXlzKDUpKTsNCg0KICAgICAgU3RyaW5nIHF1ZXJ5U3RyID0gImRhdGU6WyIgKyBkYXRlMSAr
ICIgVE8gKiBdIjsNCiAgICAgIGxvZy5pbmZvKCJxdWVyeT0iICsgcXVlcnlTdHIpOw0KICAg
ICAgUXVlcnkgcXVlcnkgPSBwYXJzZXIucGFyc2UocXVlcnlTdHIpOw0KDQogICAgICBNeUNv
bGxlY3RvciBjb2xsZWN0b3IgPSBuZXcgTXlDb2xsZWN0b3IoaXMpOw0KICAgICAgaXMuc2Vh
cmNoKHF1ZXJ5LCBjb2xsZWN0b3IpOw0KDQogICAgICBpcy5jbG9zZSgpOw0KICAgfQ0KDQog
ICBwcml2YXRlIHN0YXRpYyBjbGFzcyBNeUNvbGxlY3RvciBleHRlbmRzIENvbGxlY3RvciB7
DQogICAgICBwcml2YXRlIEluZGV4U2VhcmNoZXIgaXM7DQoNCiAgICAgIHB1YmxpYyBNeUNv
bGxlY3RvcihJbmRleFNlYXJjaGVyIGlzKSB7DQogICAgICAgICB0aGlzLmlzID0gaXM7DQog
ICAgICB9DQoNCiAgICAgIEBPdmVycmlkZQ0KICAgICAgcHVibGljIHZvaWQgc2V0U2NvcmVy
KFNjb3JlciBzY29yZXIpIHRocm93cyBJT0V4Y2VwdGlvbiB7DQogICAgICAgICBsb2cuaW5m
bygic2NvcmVyPSIgKyBzY29yZXIpOw0KICAgICAgfQ0KDQogICAgICBAT3ZlcnJpZGUNCiAg
ICAgIHB1YmxpYyB2b2lkIGNvbGxlY3QoaW50IGRvYykgdGhyb3dzIElPRXhjZXB0aW9uIHsN
CiAgICAgICAgIERvY3VtZW50IGRvYzIgPSB0aGlzLmlzLmRvYyhkb2MpOw0KICAgICAgICAg
bG9nLmluZm8oImNvbGxlY3Q9IiArIGRvYyArICIgZW50cnk9IiArIGRvYzIuZ2V0KCJ1cmwi
KSk7DQogICAgICB9DQoNCiAgICAgIEBPdmVycmlkZQ0KICAgICAgcHVibGljIHZvaWQgc2V0
TmV4dFJlYWRlcihJbmRleFJlYWRlciByZWFkZXIsIGludCBkb2NCYXNlKQ0KICAgICAgICAg
ICAgdGhyb3dzIElPRXhjZXB0aW9uIHsNCiAgICAgICAgIGxvZy5pbmZvKCJyZWFkZXIgPSAi
ICsgcmVhZGVyICsgIiBkb2NCYXNlPSIgKyBkb2NCYXNlKTsNCiAgICAgIH0NCg0KICAgICAg
QE92ZXJyaWRlDQogICAgICBwdWJsaWMgYm9vbGVhbiBhY2NlcHRzRG9jc091dE9mT3JkZXIo
KSB7DQogICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICB9DQogICB9DQoNCiAgIHByaXZh
dGUgRG9jdW1lbnQgY3JlYXRlRG9jdW1lbnQoU3RyaW5nIHRpdGxlLCBTdHJpbmcgYXV0aG9y
LA0KICAgICAgICAgU3RyaW5nIHVybCwgTG9jYWxEYXRlIGRhdGVXcml0dGVuKSB7DQoNCiAg
ICAgIFN0cmluZyBkYXRlVHh0ID0gRk1UMi5wcmludChkYXRlV3JpdHRlbik7DQoNCiAgICAg
IERvY3VtZW50IGRvY3VtZW50ID0gbmV3IERvY3VtZW50KCk7DQogICAgICBkb2N1bWVudC5h
ZGQobmV3IEZpZWxkKCJhdXRob3IiLCBhdXRob3IsIEZpZWxkLlN0b3JlLk5PLA0KICAgICAg
ICAgICAgRmllbGQuSW5kZXguTk9UX0FOQUxZWkVEKSk7DQogICAgICBkb2N1bWVudC5hZGQo
bmV3IEZpZWxkKCJ0aXRsZSIsIHRpdGxlLCBGaWVsZC5TdG9yZS5OTywNCiAgICAgICAgICAg
IEZpZWxkLkluZGV4Lk5PVF9BTkFMWVpFRCkpOw0KICAgICAgZG9jdW1lbnQuYWRkKG5ldyBG
aWVsZCgiZGF0ZSIsIGRhdGVUeHQsIEZpZWxkLlN0b3JlLk5PLA0KICAgICAgICAgICAgRmll
bGQuSW5kZXguTk9UX0FOQUxZWkVEKSk7DQoNCiAgICAgIGxvZy5pbmZvKCJjcmVhdGVkIGRv
Yz0iICsgZGF0ZVR4dCArICIgZW50cnkrIiArIHVybCk7DQogICAgICBkb2N1bWVudC5hZGQo
bmV3IEZpZWxkKCJ1cmwiLCB1cmwsIEZpZWxkLlN0b3JlLllFUywgRmllbGQuSW5kZXguTk8p
KTsNCiAgICAgIHJldHVybiBkb2N1bWVudDsNCiAgIH0NCn0NCg0KLS0tLS1PcmlnaW5hbCBN
ZXNzYWdlLS0tLS0NCkZyb206IE1pY2hhZWwgU29rb2xvdiBbbWFpbHRvOnNva29sb3ZAaWZh
Y3RvcnkuY29tXSANClNlbnQ6IFN1bmRheSwgSnVuZSAxOSwgMjAxMSA0OjI1IFBNDQpUbzog
amF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnDQpDYzogSGlsbGVyLCBEZWFuIHg2NjA3OQ0K
U3ViamVjdDogUmU6IHJhbmdlZCBxdWVyeSBkaWRuJ3Qgd29yaywgZ290IGV4Y2VwdGlvbi4u
Lg0KDQpJIHRoaW5rIHlvdSBuZWVkDQoNCmZpZWxkOlsyMDAyMDEwMSBUTyAqXQ0KDQphbHRo
b3VnaCB0aGUgIioiIG9wdGlvbiBpc24ndCBhdmFpbGFibGUgaW4gc29tZSB2ZXJzaW9ucyAo
cHJlIDMuMT8pIGFuZCANCnlvdSBqdXN0IGhhdmUgdG8gc3VwcGx5IGEgYmlnIHZhbHVlOg0K
DQpmaWVsZDpbMjAwMjAxMDEgVE8gOTk5OTk5OTldDQoNCi1NaWtlDQoNCk9uIDYvMTkvMjAx
MSA2OjE4IFBNLCBIaWxsZXIsIERlYW4geDY2MDc5IHdyb3RlOg0KPiAiaGVyZSB5b3UgY2Fu
IHNpbXBseSBnbyBmb3IgZmllbGQ6WzIwMDIwMTAxIFRPIF0gYW5kIGxlYXZlIHRoZSBlbmQN
Cj4gYmxhbmsuIElmIHlvdSB3YW50IHRvIGRvIGZhc3QgbnVtZXJpYyBzZWFyY2hlcyB5b3Ug
c2hvdWxkIHVzZQ0KPiBOdW1lcmljUmFuZ2VRdWVyeSBpbnN0ZWFkLiINCj4NCj4gSSB0cmll
ZCB0aGF0IGFuZCBnb3QgYW4gZXhjZXB0aW9uLi4uDQo+DQo+IEkgbmVlZCB0byBkbyBzb21l
dGhpbmcgbGlrZSBTdHJpbmcgcXVlcnlTdHIgPSAiYXV0aG9yOmRlYW4gYW5kIGRhdGU6WyIg
KyBkYXRlMSArICIgVE8gXSI7IHNvIGNhbiBJIGRvIGEgY29tYmluYXRpb24gb2YgTnVtZXJp
Y1JhbmdlUXVlcnkgYW5kIHRleHQgcXVlcnkgYW5kIGlzIHRoZXJlIGFueSBleGFtcGxlIG9u
IHRoaXM/DQo+DQo+IG9yZy5hcGFjaGUubHVjZW5lLnF1ZXJ5UGFyc2VyLlBhcnNlRXhjZXB0
aW9uOiBDYW5ub3QgcGFyc2UgJ2F1dGhvcjpkZWFuIGFuZCBkYXRlOlsyMDExMDYyMiBUTyBd
JzogRW5jb3VudGVyZWQgIiAiXSIgIl0gIiIgYXQgbGluZSAxLCBjb2x1bW4gMzQuDQo+IFdh
cyBleHBlY3Rpbmcgb25lIG9mOg0KPiAgICAgIDxSQU5HRUlOX1FVT1RFRD4gIC4uLg0KPiAg
ICAgIDxSQU5HRUlOX0dPT1A+ICAuLi4NCj4NCj4gCWF0IG9yZy5hcGFjaGUubHVjZW5lLnF1
ZXJ5UGFyc2VyLlF1ZXJ5UGFyc2VyLnBhcnNlKFF1ZXJ5UGFyc2VyLmphdmE6MjExKQ0KPiAJ
YXQgY29tLmJyb2FkcmlkZ2UucGFwcjEudGVzdC5vdGhlci5QbGF5V2l0aEx1Y2VuZVRlc3Qu
cnVuU2VhcmNoKFBsYXlXaXRoTHVjZW5lVGVzdC5qYXZhOjgyKQ0KPiAJYXQgY29tLmJyb2Fk
cmlkZ2UucGFwcjEudGVzdC5vdGhlci5QbGF5V2l0aEx1Y2VuZVRlc3QucGxheVdpdGhMdWNl
bmUoUGxheVdpdGhMdWNlbmVUZXN0LmphdmE6NTkpDQo+IAlhdCBzdW4ucmVmbGVjdC5OYXRp
dmVNZXRob2RBY2Nlc3NvckltcGwuaW52b2tlMChOYXRpdmUgTWV0aG9kKQ0KPiAJYXQgc3Vu
LnJlZmxlY3QuTmF0aXZlTWV0aG9kQWNjZXNzb3JJbXBsLmludm9rZShOYXRpdmVNZXRob2RB
Y2Nlc3NvckltcGwuamF2YTozOSkNCj4gCWF0IHN1bi5yZWZsZWN0LkRlbGVnYXRpbmdNZXRo
b2RBY2Nlc3NvckltcGwuaW52b2tlKERlbGVnYXRpbmdNZXRob2RBY2Nlc3NvckltcGwuamF2
YToyNSkNCj4gCWF0IGphdmEubGFuZy5yZWZsZWN0Lk1ldGhvZC5pbnZva2UoTWV0aG9kLmph
dmE6NTk3KQ0KPiAJYXQgb3JnLmp1bml0LnJ1bm5lcnMubW9kZWwuRnJhbWV3b3JrTWV0aG9k
JDEucnVuUmVmbGVjdGl2ZUNhbGwoRnJhbWV3b3JrTWV0aG9kLmphdmE6NDQpDQo+IAlhdCBv
cmcuanVuaXQuaW50ZXJuYWwucnVubmVycy5tb2RlbC5SZWZsZWN0aXZlQ2FsbGFibGUucnVu
KFJlZmxlY3RpdmVDYWxsYWJsZS5qYXZhOjE1KQ0KPiAJYXQgb3JnLmp1bml0LnJ1bm5lcnMu
bW9kZWwuRnJhbWV3b3JrTWV0aG9kLmludm9rZUV4cGxvc2l2ZWx5KEZyYW1ld29ya01ldGhv
ZC5qYXZhOjQxKQ0KPiAJYXQgb3JnLmp1bml0LmludGVybmFsLnJ1bm5lcnMuc3RhdGVtZW50
cy5JbnZva2VNZXRob2QuZXZhbHVhdGUoSW52b2tlTWV0aG9kLmphdmE6MjApDQo+IAlhdCBv
cmcuanVuaXQucnVubmVycy5CbG9ja0pVbml0NENsYXNzUnVubmVyLnJ1bk5vdElnbm9yZWQo
QmxvY2tKVW5pdDRDbGFzc1J1bm5lci5qYXZhOjc5KQ0KPiAJYXQgb3JnLmp1bml0LnJ1bm5l
cnMuQmxvY2tKVW5pdDRDbGFzc1J1bm5lci5ydW5DaGlsZChCbG9ja0pVbml0NENsYXNzUnVu
bmVyLmphdmE6NzEpDQo+IAlhdCBvcmcuanVuaXQucnVubmVycy5CbG9ja0pVbml0NENsYXNz
UnVubmVyLnJ1bkNoaWxkKEJsb2NrSlVuaXQ0Q2xhc3NSdW5uZXIuamF2YTo0OSkNCj4gCWF0
IG9yZy5qdW5pdC5ydW5uZXJzLlBhcmVudFJ1bm5lciQzLnJ1bihQYXJlbnRSdW5uZXIuamF2
YToxOTMpDQo+IAlhdCBvcmcuanVuaXQucnVubmVycy5QYXJlbnRSdW5uZXIkMS5zY2hlZHVs
ZShQYXJlbnRSdW5uZXIuamF2YTo1MikNCj4gCWF0IG9yZy5qdW5pdC5ydW5uZXJzLlBhcmVu
dFJ1bm5lci5ydW5DaGlsZHJlbihQYXJlbnRSdW5uZXIuamF2YToxOTEpDQo+IAlhdCBvcmcu
anVuaXQucnVubmVycy5QYXJlbnRSdW5uZXIuYWNjZXNzJDAwMChQYXJlbnRSdW5uZXIuamF2
YTo0MikNCj4gCWF0IG9yZy5qdW5pdC5ydW5uZXJzLlBhcmVudFJ1bm5lciQyLmV2YWx1YXRl
KFBhcmVudFJ1bm5lci5qYXZhOjE4NCkNCj4gCWF0IG9yZy5qdW5pdC5ydW5uZXJzLlBhcmVu
dFJ1bm5lci5ydW4oUGFyZW50UnVubmVyLmphdmE6MjM2KQ0KPiAJYXQgb3JnLmVjbGlwc2Uu
amR0LmludGVybmFsLmp1bml0NC5ydW5uZXIuSlVuaXQ0VGVzdFJlZmVyZW5jZS5ydW4oSlVu
aXQ0VGVzdFJlZmVyZW5jZS5qYXZhOjQ5KQ0KPiAJYXQgb3JnLmVjbGlwc2UuamR0LmludGVy
bmFsLmp1bml0LnJ1bm5lci5UZXN0RXhlY3V0aW9uLnJ1bihUZXN0RXhlY3V0aW9uLmphdmE6
MzgpDQo+IAlhdCBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuanVuaXQucnVubmVyLlJlbW90
ZVRlc3RSdW5uZXIucnVuVGVzdHMoUmVtb3RlVGVzdFJ1bm5lci5qYXZhOjQ2NykNCj4gCWF0
IG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5qdW5pdC5ydW5uZXIuUmVtb3RlVGVzdFJ1bm5l
ci5ydW5UZXN0cyhSZW1vdGVUZXN0UnVubmVyLmphdmE6NjgzKQ0KPiAJYXQgb3JnLmVjbGlw
c2UuamR0LmludGVybmFsLmp1bml0LnJ1bm5lci5SZW1vdGVUZXN0UnVubmVyLnJ1bihSZW1v
dGVUZXN0UnVubmVyLmphdmE6MzkwKQ0KPiAJYXQgb3JnLmVjbGlwc2UuamR0LmludGVybmFs
Lmp1bml0LnJ1bm5lci5SZW1vdGVUZXN0UnVubmVyLm1haW4oUmVtb3RlVGVzdFJ1bm5lci5q
YXZhOjE5NykNCj4gQ2F1c2VkIGJ5OiBvcmcuYXBhY2hlLmx1Y2VuZS5xdWVyeVBhcnNlci5Q
YXJzZUV4Y2VwdGlvbjogRW5jb3VudGVyZWQgIiAiXSIgIl0gIiIgYXQgbGluZSAxLCBjb2x1
bW4gMzQuDQo+IFdhcyBleHBlY3Rpbmcgb25lIG9mOg0KPiAgICAgIDxSQU5HRUlOX1FVT1RF
RD4gIC4uLg0KPiAgICAgIDxSQU5HRUlOX0dPT1A+ICAuLi4NCj4NCj4gCWF0IG9yZy5hcGFj
aGUubHVjZW5lLnF1ZXJ5UGFyc2VyLlF1ZXJ5UGFyc2VyLmdlbmVyYXRlUGFyc2VFeGNlcHRp
b24oUXVlcnlQYXJzZXIuamF2YToxODE4KQ0KPiAJYXQgb3JnLmFwYWNoZS5sdWNlbmUucXVl
cnlQYXJzZXIuUXVlcnlQYXJzZXIuampfY29uc3VtZV90b2tlbihRdWVyeVBhcnNlci5qYXZh
OjE3MDApDQo+IAlhdCBvcmcuYXBhY2hlLmx1Y2VuZS5xdWVyeVBhcnNlci5RdWVyeVBhcnNl
ci5UZXJtKFF1ZXJ5UGFyc2VyLmphdmE6MTQ1NSkNCj4gCWF0IG9yZy5hcGFjaGUubHVjZW5l
LnF1ZXJ5UGFyc2VyLlF1ZXJ5UGFyc2VyLkNsYXVzZShRdWVyeVBhcnNlci5qYXZhOjEzMDkp
DQo+IAlhdCBvcmcuYXBhY2hlLmx1Y2VuZS5xdWVyeVBhcnNlci5RdWVyeVBhcnNlci5RdWVy
eShRdWVyeVBhcnNlci5qYXZhOjEyNjYpDQo+IAlhdCBvcmcuYXBhY2hlLmx1Y2VuZS5xdWVy
eVBhcnNlci5RdWVyeVBhcnNlci5Ub3BMZXZlbFF1ZXJ5KFF1ZXJ5UGFyc2VyLmphdmE6MTIy
NikNCj4gCWF0IG9yZy5hcGFjaGUubHVjZW5lLnF1ZXJ5UGFyc2VyLlF1ZXJ5UGFyc2VyLnBh
cnNlKFF1ZXJ5UGFyc2VyLmphdmE6MjA2KQ0KPiAJLi4uIDI1IG1vcmUNCj4NCj4NCj4gLS0t
LS1PcmlnaW5hbCBNZXNzYWdlLS0tLS0NCj4gRnJvbTogU2ltb24gV2lsbG5hdWVyIFttYWls
dG86c2ltb24ud2lsbG5hdWVyQGdvb2dsZW1haWwuY29tXQ0KPiBTZW50OiBTdW5kYXksIEp1
bmUgMTksIDIwMTEgMTE6NDggQU0NCj4gVG86IGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9y
Zw0KPiBTdWJqZWN0OiBSZTogaG93IHRvIGRvIHNpbXBsZSBzZWFyY2ggcGFnaW5nIHJlc3Vs
dHMgb2YgMTAwIGVhY2g/IGFuZCBxdWVyeSBzeW50YXggcXVlc3Rpb24NCj4NCj4gT24gU3Vu
LCBKdW4gMTksIDIwMTEgYXQgNzoyOSBQTSwgSGlsbGVyLCBEZWFuICB4NjYwNzkNCj4gPGRl
YW4uaGlsbGVyQGJyb2FkcmlkZ2UuY29tPiAgd3JvdGU6DQo+PiBPbiB0aGUgbGluaw0KPj4g
aHR0cDovL2x1Y2VuZS5hcGFjaGUub3JnL2phdmEvM18wXzMvcXVlcnlwYXJzZXJzeW50YXgu
aHRtbCNSYW5nZSUyMFNlYXJjaGVzDQo+Pg0KPj4NCj4+IFRoZXJlIGlzIHJhbmdlZCBzZWFy
Y2hlZCwgaG93IGRvIEkgc3BlY2lmeSBldmVyeXRoaW5nIGFib3ZlIGEgZGF0ZSBmcm9tIGRh
dGUgMjAwMjAxMDEgIHRvIGVuZCBvZiB0aW1lPw0KPj4NCj4+DQo+PiBOZXh0LCBJIGFtIHRl
bXBvcmFyaWx5IHVzaW5nIGx1Y2VuZSBpbiBhIG5vU1FMIHNvbHV0aW9uKHRvIHN3aXRjaCB0
byBTb2xyIGxhdGVyIGFmdGVyIHByb3RvdHlwZSkgYW5kDQo+Pg0KPj4gU28gSSBhbSBqdXN0
IGluZGV4aW5nIGJhc2ljIGNvbHVtbnMuLm5vIG5lZWQgZm9yICJ0b3Agc2VhcmNoIHJlc3Vs
dHMiLCBldGMuDQo+Pg0KPj4NCj4+DQo+PiBXaGVuIEkgbG9vayBhdCB0aGUgSW5kZXhTZWFy
Y2hlciBhbmQgaXQncyBsaXN0IG9mIG1ldGhvZHMgSSBhbSBub3Qgc3VyZSBob3cgSSBjYW4g
Z3JhYiB0aGUgZmlyc3QgMTAwDQo+Pg0KPj4gUmVzdWx0cywgdGhlbiB0aGUgc2Vjb25kIDEw
MCByZXN1bHRzKHRoYXQgaXMgaWYgSSBuZWVkIHRoZW0pLCB0aGVuIHRoZSB0aGlyZCAxMDAg
cmVzdWx0cyAoYWdhaW4gaWYgbmVlZGVkKQ0KPiBzbyB3aGF0IHlvdSBkbyBoZXJlIGlzIGJh
c2ljYWxseSByZXF1ZXN0aW5nIGFzIG1hbnkgZG9jdW1lbnRzIGFzIHlvdQ0KPiBuZWVkIGxl
dHMgc2F5IDEwMCwgdGhlbiB5b3UgZGlzcGxheSBpdC4gT25jZSB5b3UgbmVlZCB0aGUgbmV4
dCBodW5kcmVkDQo+IHlvdSBzZWFyY2ggYWdhaW4gcmVxdWVzdGluZyAyMDAgcmVzdWx0cyBh
bmQgb25jZSB0aGUgc2VhcmNoIHJldHVybnMNCj4gc2ltcGx5IGRpc2NhcmQgdGhlIGZpcnN0
IDEwMA0KPiB1c2UgdGhpcyBhcyB0aGUgYmFzaWMgbWV0aG9kIGlmIHlvdSBzaW1wbHkgdXNl
IGEgcXVlcnkgd2l0aG91dCBmaWx0ZXJzDQo+IG9yIGFueXRoaW5nLg0KPg0KPiAgIHB1Ymxp
YyBUb3BEb2NzIHNlYXJjaChRdWVyeSBxdWVyeSwgaW50IG4pDQo+Pg0KPj4NCj4+IEkgc2Vl
IGEgVG9wU2NvcmVEb2NDb2xsZWN0b3IuY3JlYXRlIG1ldGhvZCBidXQgdGhlIEluZGV4U2Vh
cmNoZXIuc2VhcmNoKFF1ZXJ5LCBDb2xsZWN0b3IpIG1ldGhvZCBzdGF0ZXMgb25seSB0byBj
YWxsIHRoYXQgbWV0aG9kIGlmIHlvdSBuZWVkIEFMTCB0aGUgcmVzdWx0cy4gIEkgZGVmaW5p
dGVseSBkb24ndCBuZWVkIGFsbCBidXQgbmVlZCB0byBwYWdlIHRocm91Z2ggdGhlDQo+Pg0K
Pj4gUmVzdWx0cyBhbmQgdHlwaWNhbGx5IGV4aXQgb3V0IGFyb3VuZCB0aGUgdGhpcmQgcGFn
ZS4gIFRoaXMgaXMgbm90IGEgd2ViIGFwcCwgc28gaWRlYWxseSBJIHdhbnQgYSByZWZlcmVu
Y2UgaGVsZCBpbnRvIHRoZSBpbmRleGVkIHRyZWUgc28gaXQgY2FuIGtlZXAgZ2l2aW5nIG1l
IHRoZSBuZXh0IDEwMCByZXN1bHRzLg0KPiBpbiBsdWNlbmUgeW91IG11c3Qgc2VhcmNoIGFn
YWluIHRvIHRoZSB0aGUgbmV4dCAxMDAgYnV0IGluIGdlbmVyYWwgdGhlDQo+IHNlYXJjaCBz
aG91bGQgYmUgdmVyeSBmYXN0Lg0KPg0KPiBsZW1tZSBrbm93IGlmIHlvdSBoYXZlIG1vcmUg
cXVlc2l0b25zLg0KPg0KPiBzaW1vbg0KPj4NCj4+DQo+PiBUaGFua3MsDQo+Pg0KPj4gRGVh
bg0KPj4NCj4+IFRoaXMgbWVzc2FnZSBhbmQgYW55IGF0dGFjaG1lbnRzIGFyZSBpbnRlbmRl
ZCBvbmx5IGZvciB0aGUgdXNlIG9mIHRoZSBhZGRyZXNzZWUgYW5kDQo+PiBtYXkgY29udGFp
biBpbmZvcm1hdGlvbiB0aGF0IGlzIHByaXZpbGVnZWQgYW5kIGNvbmZpZGVudGlhbC4gSWYg
dGhlIHJlYWRlciBvZiB0aGUNCj4+IG1lc3NhZ2UgaXMgbm90IHRoZSBpbnRlbmRlZCByZWNp
cGllbnQgb3IgYW4gYXV0aG9yaXplZCByZXByZXNlbnRhdGl2ZSBvZiB0aGUNCj4+IGludGVu
ZGVkIHJlY2lwaWVudCwgeW91IGFyZSBoZXJlYnkgbm90aWZpZWQgdGhhdCBhbnkgZGlzc2Vt
aW5hdGlvbiBvZiB0aGlzDQo+PiBjb21tdW5pY2F0aW9uIGlzIHN0cmljdGx5IHByb2hpYml0
ZWQuIElmIHlvdSBoYXZlIHJlY2VpdmVkIHRoaXMgY29tbXVuaWNhdGlvbiBpbg0KPj4gZXJy
b3IsIHBsZWFzZSBub3RpZnkgdXMgaW1tZWRpYXRlbHkgYnkgZS1tYWlsIGFuZCBkZWxldGUg
dGhlIG1lc3NhZ2UgYW5kIGFueQ0KPj4gYXR0YWNobWVudHMgZnJvbSB5b3VyIHN5c3RlbS4N
Cj4+DQo+Pg0KPiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDog
amF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnDQo+IEZvciBhZGRpdGlv
bmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3Jn
DQo+DQo+DQo+IFRoaXMgbWVzc2FnZSBhbmQgYW55IGF0dGFjaG1lbnRzIGFyZSBpbnRlbmRl
ZCBvbmx5IGZvciB0aGUgdXNlIG9mIHRoZSBhZGRyZXNzZWUgYW5kDQo+IG1heSBjb250YWlu
IGluZm9ybWF0aW9uIHRoYXQgaXMgcHJpdmlsZWdlZCBhbmQgY29uZmlkZW50aWFsLiBJZiB0
aGUgcmVhZGVyIG9mIHRoZQ0KPiBtZXNzYWdlIGlzIG5vdCB0aGUgaW50ZW5kZWQgcmVjaXBp
ZW50IG9yIGFuIGF1dGhvcml6ZWQgcmVwcmVzZW50YXRpdmUgb2YgdGhlDQo+IGludGVuZGVk
IHJlY2lwaWVudCwgeW91IGFyZSBoZXJlYnkgbm90aWZpZWQgdGhhdCBhbnkgZGlzc2VtaW5h
dGlvbiBvZiB0aGlzDQo+IGNvbW11bmljYXRpb24gaXMgc3RyaWN0bHkgcHJvaGliaXRlZC4g
SWYgeW91IGhhdmUgcmVjZWl2ZWQgdGhpcyBjb21tdW5pY2F0aW9uIGluDQo+IGVycm9yLCBw
bGVhc2Ugbm90aWZ5IHVzIGltbWVkaWF0ZWx5IGJ5IGUtbWFpbCBhbmQgZGVsZXRlIHRoZSBt
ZXNzYWdlIGFuZCBhbnkNCj4gYXR0YWNobWVudHMgZnJvbSB5b3VyIHN5c3RlbS4NCj4NCg0K
DQpUaGlzIG1lc3NhZ2UgYW5kIGFueSBhdHRhY2htZW50cyBhcmUgaW50ZW5kZWQgb25seSBm
b3IgdGhlIHVzZSBvZiB0aGUgYWRkcmVzc2VlIGFuZA0KbWF5IGNvbnRhaW4gaW5mb3JtYXRp
b24gdGhhdCBpcyBwcml2aWxlZ2VkIGFuZCBjb25maWRlbnRpYWwuIElmIHRoZSByZWFkZXIg
b2YgdGhlIA0KbWVzc2FnZSBpcyBub3QgdGhlIGludGVuZGVkIHJlY2lwaWVudCBvciBhbiBh
dXRob3JpemVkIHJlcHJlc2VudGF0aXZlIG9mIHRoZQ0KaW50ZW5kZWQgcmVjaXBpZW50LCB5
b3UgYXJlIGhlcmVieSBub3RpZmllZCB0aGF0IGFueSBkaXNzZW1pbmF0aW9uIG9mIHRoaXMN
CmNvbW11bmljYXRpb24gaXMgc3RyaWN0bHkgcHJvaGliaXRlZC4gSWYgeW91IGhhdmUgcmVj
ZWl2ZWQgdGhpcyBjb21tdW5pY2F0aW9uIGluDQplcnJvciwgcGxlYXNlIG5vdGlmeSB1cyBp
bW1lZGlhdGVseSBieSBlLW1haWwgYW5kIGRlbGV0ZSB0aGUgbWVzc2FnZSBhbmQgYW55DQph
dHRhY2htZW50cyBmcm9tIHlvdXIgc3lzdGVtLg0KDQo=


From java-user-return-50082-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun 20 00:12:41 2011
Return-Path: <java-user-return-50082-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4955F4904
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 20 Jun 2011 00:12:41 +0000 (UTC)
Received: (qmail 57236 invoked by uid 500); 20 Jun 2011 00:12:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57188 invoked by uid 500); 20 Jun 2011 00:12:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57180 invoked by uid 99); 20 Jun 2011 00:12:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2011 00:12:38 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dean.hiller@broadridge.com designates 64.18.2.159 as permitted sender)
Received: from [64.18.2.159] (HELO exprod7og103.obsmtp.com) (64.18.2.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2011 00:12:30 +0000
Received: from gwm.broadridge.com ([167.212.2.180]) (using TLSv1) by exprod7ob103.postini.com ([64.18.6.12]) with SMTP
	ID DSNKTf6QWOgQ6P1oR26GkicJOqVY+vzLhVUv@postini.com; Sun, 19 Jun 2011 17:12:09 PDT
Received: from jsppsldlpsi01.broadridge.net ([10.98.54.11])
	by gwm.broadridge.com (8.13.8/8.13.8) with ESMTP id p5K0C7Ot512224
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Sun, 19 Jun 2011 20:12:07 -0400
Received: from JSIPSWEXHA02.bsg.ad.adp.com (jsipswexha02.bsg.ad.adp.com [10.17.69.34]) by jsppsldlpsi01.broadridge.net (RSA Interceptor) for <java-user@lucene.apache.org>; Sun, 19 Jun 2011 20:11:59 -0400
Received: from jscpcwexmaa1.bsg.ad.adp.com ([fe80::882f:16e8:308d:3ef]) by
 JSIPSWEXHA02.bsg.ad.adp.com ([::1]) with mapi; Sun, 19 Jun 2011 20:11:56
 -0400
From: "Hiller, Dean  x66079" <dean.hiller@broadridge.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Sun, 19 Jun 2011 20:11:53 -0400
Subject: RE: ranged query didn't work
Thread-Topic: ranged query didn't work
Thread-Index: Acwuz9Kr6G/qSkGLQAS6GIg6A50WwgAAWuOgAAMwDxA=
Message-ID: <08230D4C8E666D479F6DE495A7684DCD0ABA9686@JSCPCWEXMAA1.bsg.ad.adp.com>
References: <08230D4C8E666D479F6DE495A7684DCD0ABA965D@JSCPCWEXMAA1.bsg.ad.adp.com>
 <BANLkTinGShn3Y8a=eD=XGGF=0SydatKtdA@mail.gmail.com>
 <08230D4C8E666D479F6DE495A7684DCD0ABA9672@JSCPCWEXMAA1.bsg.ad.adp.com>
 <4DFE774B.3040009@ifactory.com> 
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-RSA-Inspected: yes
X-RSA-Classifications: public
X-RSA-Action: allow
X-Virus-Checked: Checked by ClamAV on apache.org

T2RkbHksIGVub3VnaCwgdGhpcyBzZWVtcyB0byB3b3JrIGFuZCBJIGdldCBvbmUgcmVzdWx0
IGNhbGxpbmcgQ29sbGVjdG9yLmNvbGxlY3QoaW50IGRvY0l0KS4uLihJIGZvdW5kIG91dCBB
TkQgaGFzIHRvIGJlIGNhcHMpLi4uDQoNCmF1dGhvcjpkZWFuIEFORCBkYXRlOjIwMTEwNjIz
DQoNCmJ1dCB0aGlzIGRvZXMgbm90IHNlZW0gdG8gd29yay4uLg0KDQphdXRob3I6ZGVhbiBB
TkQgZGF0ZTpbIDIwMTEwNjIzIFRPICogXQ0KDQpZb3Ugd291bGQgdGhpbmsgdGhpcyBzZWNv
bmQgcXVlcnkgd291bGQgcmV0dXJuIHRoZSBzaW5nbGUgcmVzdWx0IHRoYXQgd2FzIHJldHVy
bmVkIGluIHRoZSBmaXJzdCBxdWVyeSwgd291bGRuJ3QgaXQ/Pz8gIEkgbWVhbiBpdCBpcyBh
c2tpbmcgZm9yIHRoZSBzYW1lIGRhdGUgaW5jbHVzaXZlIGFuZCBtb3JlLi4ud2h5IGRvZXMg
Q29sbGVjdG9yLmNvbGxlY3QgbmV2ZXIgZ2V0IGNhbGxlZCBsaWtlIG5vdGhpbmcgbWF0Y2hl
cy4uLi5zdGVwcGluZyB0aHJvdWdoIHRoZSBMdWNlbmUgY29kZSwgU2NvcmVyIGlzIG51bGwg
Zm9yIHNvbWUgcmVhc29uIGFuZCBpdCBza2lwcyBjb2xsZWN0aW5nIGV2ZXJ5dGhpbmcgYmVj
YXVzZSBvZiB0aGF0LiAgQW55IGlkZWFzPw0KDQpUaGFua3MsDQpEZWFuDQoNCi0tLS0tT3Jp
Z2luYWwgTWVzc2FnZS0tLS0tDQpGcm9tOiBIaWxsZXIsIERlYW4geDY2MDc5IA0KU2VudDog
U3VuZGF5LCBKdW5lIDE5LCAyMDExIDQ6MzcgUE0NClRvOiBqYXZhLXVzZXJAbHVjZW5lLmFw
YWNoZS5vcmcNClN1YmplY3Q6IFJFOiByYW5nZWQgcXVlcnkgZGlkbid0IHdvcmssIGdvdCBl
eGNlcHRpb24uLi4NCg0KU3dlZWVldCwgKiB3b3JrZWQsIGJ1dCBTSFVDS1MuLi4uLnF1ZXJ5
IGNvbXBsZXRlbHkgcmV0dXJucyBubyByZXN1bHRzLiAgSSBkb24ndCBnZXQgaXQuLi5pdCBn
ZXRzIGludG8gdGhlIGx1Y2VuZSBjb2RlIGFuZCBzaW5jZSB0aGVyZSBpcyBubyAiU2NvcmVy
IiByZXR1cm5lZCwgaXQgc2VlbXMgdG8gc2tpcCBvdmVyIGFueSByZXN1bHRzIHRoYXQgd291
bGQgYmUgdmFsaWQgOiguLi4uYW55IGlkZWFzIHdoYXQgaXMgd3Jvbmcgd2l0aCB0aGlzIHBy
b2dyYW0uLi4uDQoNCk15Q29sbGVjdG9yLmNvbGxlY3QoaW50IGRvY0lkKSBuZXZlciBnZXRz
IGNhbGxlZCA6KC4gIA0KDQpwYWNrYWdlIGNvbS5icm9hZHJpZGdlLnBhcHIxLnRlc3Qub3Ro
ZXI7DQoNCmltcG9ydCBqYXZhLmlvLkZpbGU7DQppbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlv
bjsNCg0KaW1wb3J0IG9yZy5hcGFjaGUubHVjZW5lLmFuYWx5c2lzLnN0YW5kYXJkLlN0YW5k
YXJkQW5hbHl6ZXI7DQppbXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUuZG9jdW1lbnQuRG9jdW1l
bnQ7DQppbXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUuZG9jdW1lbnQuRmllbGQ7DQppbXBvcnQg
b3JnLmFwYWNoZS5sdWNlbmUuaW5kZXguSW5kZXhSZWFkZXI7DQppbXBvcnQgb3JnLmFwYWNo
ZS5sdWNlbmUuaW5kZXguSW5kZXhXcml0ZXI7DQppbXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUu
aW5kZXguSW5kZXhXcml0ZXJDb25maWc7DQppbXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUucXVl
cnlQYXJzZXIuUGFyc2VFeGNlcHRpb247DQppbXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUucXVl
cnlQYXJzZXIuUXVlcnlQYXJzZXI7DQppbXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUuc2VhcmNo
LkNvbGxlY3RvcjsNCmltcG9ydCBvcmcuYXBhY2hlLmx1Y2VuZS5zZWFyY2guSW5kZXhTZWFy
Y2hlcjsNCmltcG9ydCBvcmcuYXBhY2hlLmx1Y2VuZS5zZWFyY2guUXVlcnk7DQppbXBvcnQg
b3JnLmFwYWNoZS5sdWNlbmUuc2VhcmNoLlNjb3JlcjsNCmltcG9ydCBvcmcuYXBhY2hlLmx1
Y2VuZS5zdG9yZS5EaXJlY3Rvcnk7DQppbXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUuc3RvcmUu
RlNEaXJlY3Rvcnk7DQppbXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUudXRpbC5WZXJzaW9uOw0K
aW1wb3J0IG9yZy5qb2RhLnRpbWUuTG9jYWxEYXRlOw0KaW1wb3J0IG9yZy5qb2RhLnRpbWUu
Zm9ybWF0LkRhdGVUaW1lRm9ybWF0Ow0KaW1wb3J0IG9yZy5qb2RhLnRpbWUuZm9ybWF0LkRh
dGVUaW1lRm9ybWF0dGVyOw0KaW1wb3J0IG9yZy5qdW5pdC5UZXN0Ow0KaW1wb3J0IG9yZy5z
bGY0ai5Mb2dnZXI7DQppbXBvcnQgb3JnLnNsZjRqLkxvZ2dlckZhY3Rvcnk7DQoNCnB1Ymxp
YyBjbGFzcyBQbGF5V2l0aEx1Y2VuZVRlc3Qgew0KDQogICBwcml2YXRlIGZpbmFsIHN0YXRp
YyBMb2dnZXIgbG9nID0gTG9nZ2VyRmFjdG9yeQ0KICAgICAgICAgLmdldExvZ2dlcihQbGF5
V2l0aEx1Y2VuZVRlc3QuY2xhc3MpOw0KDQogICBwcml2YXRlIHN0YXRpYyBmaW5hbCBTdHJp
bmcgSU5ERVhfRElSX1BSRUZJWCA9ICJvdXRwdXQvbHVjZW5lL2x1Y2VuZS1pbmRleCI7DQog
ICBwcml2YXRlIHN0YXRpYyBmaW5hbCBEYXRlVGltZUZvcm1hdHRlciBGTVQyID0gRGF0ZVRp
bWVGb3JtYXQNCiAgICAgICAgIC5mb3JQYXR0ZXJuKCJ5eXl5TU1kZCIpOw0KDQogICBAVGVz
dA0KICAgcHVibGljIHZvaWQgcGxheVdpdGhMdWNlbmUoKSB0aHJvd3MgRXhjZXB0aW9uIHsN
CiAgICAgIEluZGV4V3JpdGVyQ29uZmlnIGNvbmYgPSBuZXcgSW5kZXhXcml0ZXJDb25maWco
VmVyc2lvbi5MVUNFTkVfMzIsDQogICAgICAgICAgICBuZXcgU3RhbmRhcmRBbmFseXplcihW
ZXJzaW9uLkxVQ0VORV8zMikpOw0KDQogICAgICBEaXJlY3RvcnkgZGlyID0gRlNEaXJlY3Rv
cnkub3BlbihuZXcgRmlsZShJTkRFWF9ESVJfUFJFRklYKSk7DQogICAgICBJbmRleFdyaXRl
ciB3cml0ZXIgPSBuZXcgSW5kZXhXcml0ZXIoZGlyLCBjb25mKTsNCg0KICAgICAgTG9jYWxE
YXRlIGRhdGUgPSBuZXcgTG9jYWxEYXRlKCk7DQoNCiAgICAgIGNyZWF0ZUFuZEluZGV4KHdy
aXRlciwgInRpdGxlMSIsICJkZWFuIiwgZGF0ZSwgImVudHJ5MSIpOw0KICAgICAgY3JlYXRl
QW5kSW5kZXgod3JpdGVyLCAidGl0bGUxIiwgImRlYW4yIiwgZGF0ZS5wbHVzRGF5cyg4KSwg
ImVudHJ5MiIpOw0KICAgICAgY3JlYXRlQW5kSW5kZXgod3JpdGVyLCAidGl0bGUxIiwgImRl
YW4iLCBkYXRlLnBsdXNEYXlzKDQpLCAiZW50cnkzIik7DQogICAgICBjcmVhdGVBbmRJbmRl
eCh3cml0ZXIsICJ0aXRsZTEiLCAiZGVhbjIiLCBkYXRlLnBsdXNEYXlzKDUpLCAiZW50cnk0
Iik7DQogICAgICBjcmVhdGVBbmRJbmRleCh3cml0ZXIsICJ0aXRsZTEiLCAiZGVhbjIiLCBk
YXRlLnBsdXNEYXlzKDIpLCAiZW50cnk1Iik7DQogICAgICBjcmVhdGVBbmRJbmRleCh3cml0
ZXIsICJ0aXRsZTEiLCAiZGVhbjIiLCBkYXRlLnBsdXNEYXlzKDYpLCAiZW50cnk2Iik7DQog
ICAgICBjcmVhdGVBbmRJbmRleCh3cml0ZXIsICJ0aXRsZTEiLCAiZGVhbiIsIGRhdGUucGx1
c0RheXMoOSksICJlbnRyeTciKTsNCiAgICAgIGNyZWF0ZUFuZEluZGV4KHdyaXRlciwgInRp
dGxlMSIsICJkZWFuMiIsIGRhdGUucGx1c0RheXMoNSksICJlbnRyeTgiKTsNCg0KICAgICAg
d3JpdGVyLm9wdGltaXplKCk7DQogICAgICB3cml0ZXIuY2xvc2UoKTsNCg0KICAgICAgcnVu
U2VhcmNoKCk7DQogICB9DQoNCiAgIHByaXZhdGUgdm9pZCBjcmVhdGVBbmRJbmRleChJbmRl
eFdyaXRlciB3cml0ZXIsDQogICAgICAgICBTdHJpbmcgdGl0bGUsIFN0cmluZyBhdXRob3Is
IExvY2FsRGF0ZSBkYXRlLCBTdHJpbmcgcmVzdWx0KQ0KICAgICAgICAgdGhyb3dzIElPRXhj
ZXB0aW9uIHsNCiAgICAgIERvY3VtZW50IGRvY3VtZW50ID0gY3JlYXRlRG9jdW1lbnQodGl0
bGUsDQogICAgICAgICAgICBhdXRob3IsIHJlc3VsdCwgZGF0ZSk7DQogICAgICB3cml0ZXIu
YWRkRG9jdW1lbnQoZG9jdW1lbnQpOw0KICAgfQ0KDQogICBwcml2YXRlIHZvaWQgcnVuU2Vh
cmNoKCkgdGhyb3dzIElPRXhjZXB0aW9uLA0KICAgICAgICAgUGFyc2VFeGNlcHRpb24gew0K
ICAgICAgTG9jYWxEYXRlIGRhdGUgPSBuZXcgTG9jYWxEYXRlKCk7DQoNCiAgICAgIERpcmVj
dG9yeSBkaXIgPSBGU0RpcmVjdG9yeS5vcGVuKG5ldyBGaWxlKElOREVYX0RJUl9QUkVGSVgp
KTsNCiAgICAgIEluZGV4U2VhcmNoZXIgaXMgPSBuZXcgSW5kZXhTZWFyY2hlcihkaXIsIHRy
dWUpOw0KICAgICAgUXVlcnlQYXJzZXIgcGFyc2VyID0gbmV3IFF1ZXJ5UGFyc2VyKFZlcnNp
b24uTFVDRU5FXzMyLCAiaGVsbG8iLA0KICAgICAgICAgICAgbmV3IFN0YW5kYXJkQW5hbHl6
ZXIoVmVyc2lvbi5MVUNFTkVfMzIpKTsNCg0KICAgICAgU3RyaW5nIGRhdGUxID0gRk1UMi5w
cmludChkYXRlLnBsdXNEYXlzKDUpKTsNCg0KICAgICAgU3RyaW5nIHF1ZXJ5U3RyID0gImRh
dGU6WyIgKyBkYXRlMSArICIgVE8gKiBdIjsNCiAgICAgIGxvZy5pbmZvKCJxdWVyeT0iICsg
cXVlcnlTdHIpOw0KICAgICAgUXVlcnkgcXVlcnkgPSBwYXJzZXIucGFyc2UocXVlcnlTdHIp
Ow0KDQogICAgICBNeUNvbGxlY3RvciBjb2xsZWN0b3IgPSBuZXcgTXlDb2xsZWN0b3IoaXMp
Ow0KICAgICAgaXMuc2VhcmNoKHF1ZXJ5LCBjb2xsZWN0b3IpOw0KDQogICAgICBpcy5jbG9z
ZSgpOw0KICAgfQ0KDQogICBwcml2YXRlIHN0YXRpYyBjbGFzcyBNeUNvbGxlY3RvciBleHRl
bmRzIENvbGxlY3RvciB7DQogICAgICBwcml2YXRlIEluZGV4U2VhcmNoZXIgaXM7DQoNCiAg
ICAgIHB1YmxpYyBNeUNvbGxlY3RvcihJbmRleFNlYXJjaGVyIGlzKSB7DQogICAgICAgICB0
aGlzLmlzID0gaXM7DQogICAgICB9DQoNCiAgICAgIEBPdmVycmlkZQ0KICAgICAgcHVibGlj
IHZvaWQgc2V0U2NvcmVyKFNjb3JlciBzY29yZXIpIHRocm93cyBJT0V4Y2VwdGlvbiB7DQog
ICAgICAgICBsb2cuaW5mbygic2NvcmVyPSIgKyBzY29yZXIpOw0KICAgICAgfQ0KDQogICAg
ICBAT3ZlcnJpZGUNCiAgICAgIHB1YmxpYyB2b2lkIGNvbGxlY3QoaW50IGRvYykgdGhyb3dz
IElPRXhjZXB0aW9uIHsNCiAgICAgICAgIERvY3VtZW50IGRvYzIgPSB0aGlzLmlzLmRvYyhk
b2MpOw0KICAgICAgICAgbG9nLmluZm8oImNvbGxlY3Q9IiArIGRvYyArICIgZW50cnk9IiAr
IGRvYzIuZ2V0KCJ1cmwiKSk7DQogICAgICB9DQoNCiAgICAgIEBPdmVycmlkZQ0KICAgICAg
cHVibGljIHZvaWQgc2V0TmV4dFJlYWRlcihJbmRleFJlYWRlciByZWFkZXIsIGludCBkb2NC
YXNlKQ0KICAgICAgICAgICAgdGhyb3dzIElPRXhjZXB0aW9uIHsNCiAgICAgICAgIGxvZy5p
bmZvKCJyZWFkZXIgPSAiICsgcmVhZGVyICsgIiBkb2NCYXNlPSIgKyBkb2NCYXNlKTsNCiAg
ICAgIH0NCg0KICAgICAgQE92ZXJyaWRlDQogICAgICBwdWJsaWMgYm9vbGVhbiBhY2NlcHRz
RG9jc091dE9mT3JkZXIoKSB7DQogICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICB9DQog
ICB9DQoNCiAgIHByaXZhdGUgRG9jdW1lbnQgY3JlYXRlRG9jdW1lbnQoU3RyaW5nIHRpdGxl
LCBTdHJpbmcgYXV0aG9yLA0KICAgICAgICAgU3RyaW5nIHVybCwgTG9jYWxEYXRlIGRhdGVX
cml0dGVuKSB7DQoNCiAgICAgIFN0cmluZyBkYXRlVHh0ID0gRk1UMi5wcmludChkYXRlV3Jp
dHRlbik7DQoNCiAgICAgIERvY3VtZW50IGRvY3VtZW50ID0gbmV3IERvY3VtZW50KCk7DQog
ICAgICBkb2N1bWVudC5hZGQobmV3IEZpZWxkKCJhdXRob3IiLCBhdXRob3IsIEZpZWxkLlN0
b3JlLk5PLA0KICAgICAgICAgICAgRmllbGQuSW5kZXguTk9UX0FOQUxZWkVEKSk7DQogICAg
ICBkb2N1bWVudC5hZGQobmV3IEZpZWxkKCJ0aXRsZSIsIHRpdGxlLCBGaWVsZC5TdG9yZS5O
TywNCiAgICAgICAgICAgIEZpZWxkLkluZGV4Lk5PVF9BTkFMWVpFRCkpOw0KICAgICAgZG9j
dW1lbnQuYWRkKG5ldyBGaWVsZCgiZGF0ZSIsIGRhdGVUeHQsIEZpZWxkLlN0b3JlLk5PLA0K
ICAgICAgICAgICAgRmllbGQuSW5kZXguTk9UX0FOQUxZWkVEKSk7DQoNCiAgICAgIGxvZy5p
bmZvKCJjcmVhdGVkIGRvYz0iICsgZGF0ZVR4dCArICIgZW50cnkrIiArIHVybCk7DQogICAg
ICBkb2N1bWVudC5hZGQobmV3IEZpZWxkKCJ1cmwiLCB1cmwsIEZpZWxkLlN0b3JlLllFUywg
RmllbGQuSW5kZXguTk8pKTsNCiAgICAgIHJldHVybiBkb2N1bWVudDsNCiAgIH0NCn0NCg0K
LS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0tLS0NCkZyb206IE1pY2hhZWwgU29rb2xvdiBbbWFp
bHRvOnNva29sb3ZAaWZhY3RvcnkuY29tXSANClNlbnQ6IFN1bmRheSwgSnVuZSAxOSwgMjAx
MSA0OjI1IFBNDQpUbzogamF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnDQpDYzogSGlsbGVy
LCBEZWFuIHg2NjA3OQ0KU3ViamVjdDogUmU6IHJhbmdlZCBxdWVyeSBkaWRuJ3Qgd29yaywg
Z290IGV4Y2VwdGlvbi4uLg0KDQpJIHRoaW5rIHlvdSBuZWVkDQoNCmZpZWxkOlsyMDAyMDEw
MSBUTyAqXQ0KDQphbHRob3VnaCB0aGUgIioiIG9wdGlvbiBpc24ndCBhdmFpbGFibGUgaW4g
c29tZSB2ZXJzaW9ucyAocHJlIDMuMT8pIGFuZCANCnlvdSBqdXN0IGhhdmUgdG8gc3VwcGx5
IGEgYmlnIHZhbHVlOg0KDQpmaWVsZDpbMjAwMjAxMDEgVE8gOTk5OTk5OTldDQoNCi1NaWtl
DQoNCk9uIDYvMTkvMjAxMSA2OjE4IFBNLCBIaWxsZXIsIERlYW4geDY2MDc5IHdyb3RlOg0K
PiAiaGVyZSB5b3UgY2FuIHNpbXBseSBnbyBmb3IgZmllbGQ6WzIwMDIwMTAxIFRPIF0gYW5k
IGxlYXZlIHRoZSBlbmQNCj4gYmxhbmsuIElmIHlvdSB3YW50IHRvIGRvIGZhc3QgbnVtZXJp
YyBzZWFyY2hlcyB5b3Ugc2hvdWxkIHVzZQ0KPiBOdW1lcmljUmFuZ2VRdWVyeSBpbnN0ZWFk
LiINCj4NCj4gSSB0cmllZCB0aGF0IGFuZCBnb3QgYW4gZXhjZXB0aW9uLi4uDQo+DQo+IEkg
bmVlZCB0byBkbyBzb21ldGhpbmcgbGlrZSBTdHJpbmcgcXVlcnlTdHIgPSAiYXV0aG9yOmRl
YW4gYW5kIGRhdGU6WyIgKyBkYXRlMSArICIgVE8gXSI7IHNvIGNhbiBJIGRvIGEgY29tYmlu
YXRpb24gb2YgTnVtZXJpY1JhbmdlUXVlcnkgYW5kIHRleHQgcXVlcnkgYW5kIGlzIHRoZXJl
IGFueSBleGFtcGxlIG9uIHRoaXM/DQo+DQo+IG9yZy5hcGFjaGUubHVjZW5lLnF1ZXJ5UGFy
c2VyLlBhcnNlRXhjZXB0aW9uOiBDYW5ub3QgcGFyc2UgJ2F1dGhvcjpkZWFuIGFuZCBkYXRl
OlsyMDExMDYyMiBUTyBdJzogRW5jb3VudGVyZWQgIiAiXSIgIl0gIiIgYXQgbGluZSAxLCBj
b2x1bW4gMzQuDQo+IFdhcyBleHBlY3Rpbmcgb25lIG9mOg0KPiAgICAgIDxSQU5HRUlOX1FV
T1RFRD4gIC4uLg0KPiAgICAgIDxSQU5HRUlOX0dPT1A+ICAuLi4NCj4NCj4gCWF0IG9yZy5h
cGFjaGUubHVjZW5lLnF1ZXJ5UGFyc2VyLlF1ZXJ5UGFyc2VyLnBhcnNlKFF1ZXJ5UGFyc2Vy
LmphdmE6MjExKQ0KPiAJYXQgY29tLmJyb2FkcmlkZ2UucGFwcjEudGVzdC5vdGhlci5QbGF5
V2l0aEx1Y2VuZVRlc3QucnVuU2VhcmNoKFBsYXlXaXRoTHVjZW5lVGVzdC5qYXZhOjgyKQ0K
PiAJYXQgY29tLmJyb2FkcmlkZ2UucGFwcjEudGVzdC5vdGhlci5QbGF5V2l0aEx1Y2VuZVRl
c3QucGxheVdpdGhMdWNlbmUoUGxheVdpdGhMdWNlbmVUZXN0LmphdmE6NTkpDQo+IAlhdCBz
dW4ucmVmbGVjdC5OYXRpdmVNZXRob2RBY2Nlc3NvckltcGwuaW52b2tlMChOYXRpdmUgTWV0
aG9kKQ0KPiAJYXQgc3VuLnJlZmxlY3QuTmF0aXZlTWV0aG9kQWNjZXNzb3JJbXBsLmludm9r
ZShOYXRpdmVNZXRob2RBY2Nlc3NvckltcGwuamF2YTozOSkNCj4gCWF0IHN1bi5yZWZsZWN0
LkRlbGVnYXRpbmdNZXRob2RBY2Nlc3NvckltcGwuaW52b2tlKERlbGVnYXRpbmdNZXRob2RB
Y2Nlc3NvckltcGwuamF2YToyNSkNCj4gCWF0IGphdmEubGFuZy5yZWZsZWN0Lk1ldGhvZC5p
bnZva2UoTWV0aG9kLmphdmE6NTk3KQ0KPiAJYXQgb3JnLmp1bml0LnJ1bm5lcnMubW9kZWwu
RnJhbWV3b3JrTWV0aG9kJDEucnVuUmVmbGVjdGl2ZUNhbGwoRnJhbWV3b3JrTWV0aG9kLmph
dmE6NDQpDQo+IAlhdCBvcmcuanVuaXQuaW50ZXJuYWwucnVubmVycy5tb2RlbC5SZWZsZWN0
aXZlQ2FsbGFibGUucnVuKFJlZmxlY3RpdmVDYWxsYWJsZS5qYXZhOjE1KQ0KPiAJYXQgb3Jn
Lmp1bml0LnJ1bm5lcnMubW9kZWwuRnJhbWV3b3JrTWV0aG9kLmludm9rZUV4cGxvc2l2ZWx5
KEZyYW1ld29ya01ldGhvZC5qYXZhOjQxKQ0KPiAJYXQgb3JnLmp1bml0LmludGVybmFsLnJ1
bm5lcnMuc3RhdGVtZW50cy5JbnZva2VNZXRob2QuZXZhbHVhdGUoSW52b2tlTWV0aG9kLmph
dmE6MjApDQo+IAlhdCBvcmcuanVuaXQucnVubmVycy5CbG9ja0pVbml0NENsYXNzUnVubmVy
LnJ1bk5vdElnbm9yZWQoQmxvY2tKVW5pdDRDbGFzc1J1bm5lci5qYXZhOjc5KQ0KPiAJYXQg
b3JnLmp1bml0LnJ1bm5lcnMuQmxvY2tKVW5pdDRDbGFzc1J1bm5lci5ydW5DaGlsZChCbG9j
a0pVbml0NENsYXNzUnVubmVyLmphdmE6NzEpDQo+IAlhdCBvcmcuanVuaXQucnVubmVycy5C
bG9ja0pVbml0NENsYXNzUnVubmVyLnJ1bkNoaWxkKEJsb2NrSlVuaXQ0Q2xhc3NSdW5uZXIu
amF2YTo0OSkNCj4gCWF0IG9yZy5qdW5pdC5ydW5uZXJzLlBhcmVudFJ1bm5lciQzLnJ1bihQ
YXJlbnRSdW5uZXIuamF2YToxOTMpDQo+IAlhdCBvcmcuanVuaXQucnVubmVycy5QYXJlbnRS
dW5uZXIkMS5zY2hlZHVsZShQYXJlbnRSdW5uZXIuamF2YTo1MikNCj4gCWF0IG9yZy5qdW5p
dC5ydW5uZXJzLlBhcmVudFJ1bm5lci5ydW5DaGlsZHJlbihQYXJlbnRSdW5uZXIuamF2YTox
OTEpDQo+IAlhdCBvcmcuanVuaXQucnVubmVycy5QYXJlbnRSdW5uZXIuYWNjZXNzJDAwMChQ
YXJlbnRSdW5uZXIuamF2YTo0MikNCj4gCWF0IG9yZy5qdW5pdC5ydW5uZXJzLlBhcmVudFJ1
bm5lciQyLmV2YWx1YXRlKFBhcmVudFJ1bm5lci5qYXZhOjE4NCkNCj4gCWF0IG9yZy5qdW5p
dC5ydW5uZXJzLlBhcmVudFJ1bm5lci5ydW4oUGFyZW50UnVubmVyLmphdmE6MjM2KQ0KPiAJ
YXQgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmp1bml0NC5ydW5uZXIuSlVuaXQ0VGVzdFJl
ZmVyZW5jZS5ydW4oSlVuaXQ0VGVzdFJlZmVyZW5jZS5qYXZhOjQ5KQ0KPiAJYXQgb3JnLmVj
bGlwc2UuamR0LmludGVybmFsLmp1bml0LnJ1bm5lci5UZXN0RXhlY3V0aW9uLnJ1bihUZXN0
RXhlY3V0aW9uLmphdmE6MzgpDQo+IAlhdCBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuanVu
aXQucnVubmVyLlJlbW90ZVRlc3RSdW5uZXIucnVuVGVzdHMoUmVtb3RlVGVzdFJ1bm5lci5q
YXZhOjQ2NykNCj4gCWF0IG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5qdW5pdC5ydW5uZXIu
UmVtb3RlVGVzdFJ1bm5lci5ydW5UZXN0cyhSZW1vdGVUZXN0UnVubmVyLmphdmE6NjgzKQ0K
PiAJYXQgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmp1bml0LnJ1bm5lci5SZW1vdGVUZXN0
UnVubmVyLnJ1bihSZW1vdGVUZXN0UnVubmVyLmphdmE6MzkwKQ0KPiAJYXQgb3JnLmVjbGlw
c2UuamR0LmludGVybmFsLmp1bml0LnJ1bm5lci5SZW1vdGVUZXN0UnVubmVyLm1haW4oUmVt
b3RlVGVzdFJ1bm5lci5qYXZhOjE5NykNCj4gQ2F1c2VkIGJ5OiBvcmcuYXBhY2hlLmx1Y2Vu
ZS5xdWVyeVBhcnNlci5QYXJzZUV4Y2VwdGlvbjogRW5jb3VudGVyZWQgIiAiXSIgIl0gIiIg
YXQgbGluZSAxLCBjb2x1bW4gMzQuDQo+IFdhcyBleHBlY3Rpbmcgb25lIG9mOg0KPiAgICAg
IDxSQU5HRUlOX1FVT1RFRD4gIC4uLg0KPiAgICAgIDxSQU5HRUlOX0dPT1A+ICAuLi4NCj4N
Cj4gCWF0IG9yZy5hcGFjaGUubHVjZW5lLnF1ZXJ5UGFyc2VyLlF1ZXJ5UGFyc2VyLmdlbmVy
YXRlUGFyc2VFeGNlcHRpb24oUXVlcnlQYXJzZXIuamF2YToxODE4KQ0KPiAJYXQgb3JnLmFw
YWNoZS5sdWNlbmUucXVlcnlQYXJzZXIuUXVlcnlQYXJzZXIuampfY29uc3VtZV90b2tlbihR
dWVyeVBhcnNlci5qYXZhOjE3MDApDQo+IAlhdCBvcmcuYXBhY2hlLmx1Y2VuZS5xdWVyeVBh
cnNlci5RdWVyeVBhcnNlci5UZXJtKFF1ZXJ5UGFyc2VyLmphdmE6MTQ1NSkNCj4gCWF0IG9y
Zy5hcGFjaGUubHVjZW5lLnF1ZXJ5UGFyc2VyLlF1ZXJ5UGFyc2VyLkNsYXVzZShRdWVyeVBh
cnNlci5qYXZhOjEzMDkpDQo+IAlhdCBvcmcuYXBhY2hlLmx1Y2VuZS5xdWVyeVBhcnNlci5R
dWVyeVBhcnNlci5RdWVyeShRdWVyeVBhcnNlci5qYXZhOjEyNjYpDQo+IAlhdCBvcmcuYXBh
Y2hlLmx1Y2VuZS5xdWVyeVBhcnNlci5RdWVyeVBhcnNlci5Ub3BMZXZlbFF1ZXJ5KFF1ZXJ5
UGFyc2VyLmphdmE6MTIyNikNCj4gCWF0IG9yZy5hcGFjaGUubHVjZW5lLnF1ZXJ5UGFyc2Vy
LlF1ZXJ5UGFyc2VyLnBhcnNlKFF1ZXJ5UGFyc2VyLmphdmE6MjA2KQ0KPiAJLi4uIDI1IG1v
cmUNCj4NCj4NCj4gLS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0tLS0NCj4gRnJvbTogU2ltb24g
V2lsbG5hdWVyIFttYWlsdG86c2ltb24ud2lsbG5hdWVyQGdvb2dsZW1haWwuY29tXQ0KPiBT
ZW50OiBTdW5kYXksIEp1bmUgMTksIDIwMTEgMTE6NDggQU0NCj4gVG86IGphdmEtdXNlckBs
dWNlbmUuYXBhY2hlLm9yZw0KPiBTdWJqZWN0OiBSZTogaG93IHRvIGRvIHNpbXBsZSBzZWFy
Y2ggcGFnaW5nIHJlc3VsdHMgb2YgMTAwIGVhY2g/IGFuZCBxdWVyeSBzeW50YXggcXVlc3Rp
b24NCj4NCj4gT24gU3VuLCBKdW4gMTksIDIwMTEgYXQgNzoyOSBQTSwgSGlsbGVyLCBEZWFu
ICB4NjYwNzkNCj4gPGRlYW4uaGlsbGVyQGJyb2FkcmlkZ2UuY29tPiAgd3JvdGU6DQo+PiBP
biB0aGUgbGluaw0KPj4gaHR0cDovL2x1Y2VuZS5hcGFjaGUub3JnL2phdmEvM18wXzMvcXVl
cnlwYXJzZXJzeW50YXguaHRtbCNSYW5nZSUyMFNlYXJjaGVzDQo+Pg0KPj4NCj4+IFRoZXJl
IGlzIHJhbmdlZCBzZWFyY2hlZCwgaG93IGRvIEkgc3BlY2lmeSBldmVyeXRoaW5nIGFib3Zl
IGEgZGF0ZSBmcm9tIGRhdGUgMjAwMjAxMDEgIHRvIGVuZCBvZiB0aW1lPw0KPj4NCj4+DQo+
PiBOZXh0LCBJIGFtIHRlbXBvcmFyaWx5IHVzaW5nIGx1Y2VuZSBpbiBhIG5vU1FMIHNvbHV0
aW9uKHRvIHN3aXRjaCB0byBTb2xyIGxhdGVyIGFmdGVyIHByb3RvdHlwZSkgYW5kDQo+Pg0K
Pj4gU28gSSBhbSBqdXN0IGluZGV4aW5nIGJhc2ljIGNvbHVtbnMuLm5vIG5lZWQgZm9yICJ0
b3Agc2VhcmNoIHJlc3VsdHMiLCBldGMuDQo+Pg0KPj4NCj4+DQo+PiBXaGVuIEkgbG9vayBh
dCB0aGUgSW5kZXhTZWFyY2hlciBhbmQgaXQncyBsaXN0IG9mIG1ldGhvZHMgSSBhbSBub3Qg
c3VyZSBob3cgSSBjYW4gZ3JhYiB0aGUgZmlyc3QgMTAwDQo+Pg0KPj4gUmVzdWx0cywgdGhl
biB0aGUgc2Vjb25kIDEwMCByZXN1bHRzKHRoYXQgaXMgaWYgSSBuZWVkIHRoZW0pLCB0aGVu
IHRoZSB0aGlyZCAxMDAgcmVzdWx0cyAoYWdhaW4gaWYgbmVlZGVkKQ0KPiBzbyB3aGF0IHlv
dSBkbyBoZXJlIGlzIGJhc2ljYWxseSByZXF1ZXN0aW5nIGFzIG1hbnkgZG9jdW1lbnRzIGFz
IHlvdQ0KPiBuZWVkIGxldHMgc2F5IDEwMCwgdGhlbiB5b3UgZGlzcGxheSBpdC4gT25jZSB5
b3UgbmVlZCB0aGUgbmV4dCBodW5kcmVkDQo+IHlvdSBzZWFyY2ggYWdhaW4gcmVxdWVzdGlu
ZyAyMDAgcmVzdWx0cyBhbmQgb25jZSB0aGUgc2VhcmNoIHJldHVybnMNCj4gc2ltcGx5IGRp
c2NhcmQgdGhlIGZpcnN0IDEwMA0KPiB1c2UgdGhpcyBhcyB0aGUgYmFzaWMgbWV0aG9kIGlm
IHlvdSBzaW1wbHkgdXNlIGEgcXVlcnkgd2l0aG91dCBmaWx0ZXJzDQo+IG9yIGFueXRoaW5n
Lg0KPg0KPiAgIHB1YmxpYyBUb3BEb2NzIHNlYXJjaChRdWVyeSBxdWVyeSwgaW50IG4pDQo+
Pg0KPj4NCj4+IEkgc2VlIGEgVG9wU2NvcmVEb2NDb2xsZWN0b3IuY3JlYXRlIG1ldGhvZCBi
dXQgdGhlIEluZGV4U2VhcmNoZXIuc2VhcmNoKFF1ZXJ5LCBDb2xsZWN0b3IpIG1ldGhvZCBz
dGF0ZXMgb25seSB0byBjYWxsIHRoYXQgbWV0aG9kIGlmIHlvdSBuZWVkIEFMTCB0aGUgcmVz
dWx0cy4gIEkgZGVmaW5pdGVseSBkb24ndCBuZWVkIGFsbCBidXQgbmVlZCB0byBwYWdlIHRo
cm91Z2ggdGhlDQo+Pg0KPj4gUmVzdWx0cyBhbmQgdHlwaWNhbGx5IGV4aXQgb3V0IGFyb3Vu
ZCB0aGUgdGhpcmQgcGFnZS4gIFRoaXMgaXMgbm90IGEgd2ViIGFwcCwgc28gaWRlYWxseSBJ
IHdhbnQgYSByZWZlcmVuY2UgaGVsZCBpbnRvIHRoZSBpbmRleGVkIHRyZWUgc28gaXQgY2Fu
IGtlZXAgZ2l2aW5nIG1lIHRoZSBuZXh0IDEwMCByZXN1bHRzLg0KPiBpbiBsdWNlbmUgeW91
IG11c3Qgc2VhcmNoIGFnYWluIHRvIHRoZSB0aGUgbmV4dCAxMDAgYnV0IGluIGdlbmVyYWwg
dGhlDQo+IHNlYXJjaCBzaG91bGQgYmUgdmVyeSBmYXN0Lg0KPg0KPiBsZW1tZSBrbm93IGlm
IHlvdSBoYXZlIG1vcmUgcXVlc2l0b25zLg0KPg0KPiBzaW1vbg0KPj4NCj4+DQo+PiBUaGFu
a3MsDQo+Pg0KPj4gRGVhbg0KPj4NCj4+IFRoaXMgbWVzc2FnZSBhbmQgYW55IGF0dGFjaG1l
bnRzIGFyZSBpbnRlbmRlZCBvbmx5IGZvciB0aGUgdXNlIG9mIHRoZSBhZGRyZXNzZWUgYW5k
DQo+PiBtYXkgY29udGFpbiBpbmZvcm1hdGlvbiB0aGF0IGlzIHByaXZpbGVnZWQgYW5kIGNv
bmZpZGVudGlhbC4gSWYgdGhlIHJlYWRlciBvZiB0aGUNCj4+IG1lc3NhZ2UgaXMgbm90IHRo
ZSBpbnRlbmRlZCByZWNpcGllbnQgb3IgYW4gYXV0aG9yaXplZCByZXByZXNlbnRhdGl2ZSBv
ZiB0aGUNCj4+IGludGVuZGVkIHJlY2lwaWVudCwgeW91IGFyZSBoZXJlYnkgbm90aWZpZWQg
dGhhdCBhbnkgZGlzc2VtaW5hdGlvbiBvZiB0aGlzDQo+PiBjb21tdW5pY2F0aW9uIGlzIHN0
cmljdGx5IHByb2hpYml0ZWQuIElmIHlvdSBoYXZlIHJlY2VpdmVkIHRoaXMgY29tbXVuaWNh
dGlvbiBpbg0KPj4gZXJyb3IsIHBsZWFzZSBub3RpZnkgdXMgaW1tZWRpYXRlbHkgYnkgZS1t
YWlsIGFuZCBkZWxldGUgdGhlIG1lc3NhZ2UgYW5kIGFueQ0KPj4gYXR0YWNobWVudHMgZnJv
bSB5b3VyIHN5c3RlbS4NCj4+DQo+Pg0KPiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCj4gVG8gdW5zdWJz
Y3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3Jn
DQo+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1
Y2VuZS5hcGFjaGUub3JnDQo+DQo+DQo+IFRoaXMgbWVzc2FnZSBhbmQgYW55IGF0dGFjaG1l
bnRzIGFyZSBpbnRlbmRlZCBvbmx5IGZvciB0aGUgdXNlIG9mIHRoZSBhZGRyZXNzZWUgYW5k
DQo+IG1heSBjb250YWluIGluZm9ybWF0aW9uIHRoYXQgaXMgcHJpdmlsZWdlZCBhbmQgY29u
ZmlkZW50aWFsLiBJZiB0aGUgcmVhZGVyIG9mIHRoZQ0KPiBtZXNzYWdlIGlzIG5vdCB0aGUg
aW50ZW5kZWQgcmVjaXBpZW50IG9yIGFuIGF1dGhvcml6ZWQgcmVwcmVzZW50YXRpdmUgb2Yg
dGhlDQo+IGludGVuZGVkIHJlY2lwaWVudCwgeW91IGFyZSBoZXJlYnkgbm90aWZpZWQgdGhh
dCBhbnkgZGlzc2VtaW5hdGlvbiBvZiB0aGlzDQo+IGNvbW11bmljYXRpb24gaXMgc3RyaWN0
bHkgcHJvaGliaXRlZC4gSWYgeW91IGhhdmUgcmVjZWl2ZWQgdGhpcyBjb21tdW5pY2F0aW9u
IGluDQo+IGVycm9yLCBwbGVhc2Ugbm90aWZ5IHVzIGltbWVkaWF0ZWx5IGJ5IGUtbWFpbCBh
bmQgZGVsZXRlIHRoZSBtZXNzYWdlIGFuZCBhbnkNCj4gYXR0YWNobWVudHMgZnJvbSB5b3Vy
IHN5c3RlbS4NCj4NCg0KDQpUaGlzIG1lc3NhZ2UgYW5kIGFueSBhdHRhY2htZW50cyBhcmUg
aW50ZW5kZWQgb25seSBmb3IgdGhlIHVzZSBvZiB0aGUgYWRkcmVzc2VlIGFuZA0KbWF5IGNv
bnRhaW4gaW5mb3JtYXRpb24gdGhhdCBpcyBwcml2aWxlZ2VkIGFuZCBjb25maWRlbnRpYWwu
IElmIHRoZSByZWFkZXIgb2YgdGhlIA0KbWVzc2FnZSBpcyBub3QgdGhlIGludGVuZGVkIHJl
Y2lwaWVudCBvciBhbiBhdXRob3JpemVkIHJlcHJlc2VudGF0aXZlIG9mIHRoZQ0KaW50ZW5k
ZWQgcmVjaXBpZW50LCB5b3UgYXJlIGhlcmVieSBub3RpZmllZCB0aGF0IGFueSBkaXNzZW1p
bmF0aW9uIG9mIHRoaXMNCmNvbW11bmljYXRpb24gaXMgc3RyaWN0bHkgcHJvaGliaXRlZC4g
SWYgeW91IGhhdmUgcmVjZWl2ZWQgdGhpcyBjb21tdW5pY2F0aW9uIGluDQplcnJvciwgcGxl
YXNlIG5vdGlmeSB1cyBpbW1lZGlhdGVseSBieSBlLW1haWwgYW5kIGRlbGV0ZSB0aGUgbWVz
c2FnZSBhbmQgYW55DQphdHRhY2htZW50cyBmcm9tIHlvdXIgc3lzdGVtLg0KDQo=


From java-user-return-50083-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun 20 01:00:48 2011
Return-Path: <java-user-return-50083-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3D25D46ED
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 20 Jun 2011 01:00:48 +0000 (UTC)
Received: (qmail 92076 invoked by uid 500); 20 Jun 2011 01:00:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92040 invoked by uid 500); 20 Jun 2011 01:00:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92032 invoked by uid 99); 20 Jun 2011 01:00:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2011 01:00:45 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of sokolov@ifactory.com designates 68.236.111.2 as permitted sender)
Received: from [68.236.111.2] (HELO camelot.ifactory.com) (68.236.111.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2011 01:00:36 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by camelot.ifactory.com (Postfix) with ESMTP id BC11D3672929
	for <java-user@lucene.apache.org>; Sun, 19 Jun 2011 21:00:15 -0400 (EDT)
Received: from camelot.ifactory.com ([127.0.0.1])
	by localhost (camelot.ifactory.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id EtjQZ+vh0fg1 for <java-user@lucene.apache.org>;
	Sun, 19 Jun 2011 21:00:14 -0400 (EDT)
Received: from [192.168.1.4] (pool-108-7-217-216.bstnma.fios.verizon.net [108.7.217.216])
	by camelot.ifactory.com (Postfix) with ESMTPSA id 9D53C367270F
	for <java-user@lucene.apache.org>; Sun, 19 Jun 2011 21:00:14 -0400 (EDT)
Message-ID: <4DFE9B9E.10306@ifactory.com>
Date: Sun, 19 Jun 2011 21:00:14 -0400
From: Michael Sokolov <sokolov@ifactory.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.17) Gecko/20110414 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: ranged query didn't work
References: <08230D4C8E666D479F6DE495A7684DCD0ABA965D@JSCPCWEXMAA1.bsg.ad.adp.com> <BANLkTinGShn3Y8a=eD=XGGF=0SydatKtdA@mail.gmail.com> <08230D4C8E666D479F6DE495A7684DCD0ABA9672@JSCPCWEXMAA1.bsg.ad.adp.com> <4DFE774B.3040009@ifactory.com> <08230D4C8E666D479F6DE495A7684DCD0ABA9686@JSCPCWEXMAA1.bsg.ad.adp.com>
In-Reply-To: <08230D4C8E666D479F6DE495A7684DCD0ABA9686@JSCPCWEXMAA1.bsg.ad.adp.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On 6/19/2011 8:11 PM, Hiller, Dean x66079 wrote:
> Oddly, enough, this seems to work and I get one result calling Collector.collect(int docIt)...(I found out AND has to be caps)...
>
> author:dean AND date:20110623
> but this does not seem to work...
>
> author:dean AND date:[ 20110623 TO * ]
I'm not sure, but I'd try

author:dean AND date:[ 20110623 TO 99999999]

> You would think this second query would return the single result that was returned in the first query, wouldn't it???  I mean it is asking for the same date inclusive and more...why does Collector.collect never get called like nothing matches....stepping through the Lucene code, Scorer is null for some reason and it skips collecting everything because of that.  Any ideas?
>
> Thanks,
> Dean


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50084-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun 20 01:08:22 2011
Return-Path: <java-user-return-50084-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DCE7B4B6F
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 20 Jun 2011 01:08:22 +0000 (UTC)
Received: (qmail 98697 invoked by uid 500); 20 Jun 2011 01:08:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98653 invoked by uid 500); 20 Jun 2011 01:08:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98644 invoked by uid 99); 20 Jun 2011 01:08:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2011 01:08:20 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dean.hiller@broadridge.com designates 64.18.2.165 as permitted sender)
Received: from [64.18.2.165] (HELO exprod7og106.obsmtp.com) (64.18.2.165)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2011 01:08:11 +0000
Received: from gwm.broadridge.com ([167.212.2.180]) (using TLSv1) by exprod7ob106.postini.com ([64.18.6.12]) with SMTP
	ID DSNKTf6dZceBD1Hswv3OzD2gk5dLkQ84rcia@postini.com; Sun, 19 Jun 2011 18:07:51 PDT
Received: from jsppsldlpsi01.broadridge.net ([10.98.54.11])
	by gwm.broadridge.com (8.13.8/8.13.8) with ESMTP id p5K17m0B1237090
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Sun, 19 Jun 2011 21:07:48 -0400
Received: from JSIPSWEXHA01.bsg.ad.adp.com (jsipswexha01.bsg.ad.adp.com [10.17.69.24]) by jsppsldlpsi01.broadridge.net (RSA Interceptor) for <java-user@lucene.apache.org>; Sun, 19 Jun 2011 21:07:45 -0400
Received: from jscpcwexmaa1.bsg.ad.adp.com ([fe80::882f:16e8:308d:3ef]) by
 JSIPSWEXHA01.bsg.ad.adp.com ([::1]) with mapi; Sun, 19 Jun 2011 21:07:42
 -0400
From: "Hiller, Dean  x66079" <dean.hiller@broadridge.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Sun, 19 Jun 2011 21:07:39 -0400
Subject: RE: ranged query didn't work
Thread-Topic: ranged query didn't work
Thread-Index: Acwu5X+C+b+zOw3PScel1wv55crxXQAAN7QA
Message-ID: <08230D4C8E666D479F6DE495A7684DCD0ABA968E@JSCPCWEXMAA1.bsg.ad.adp.com>
References: <08230D4C8E666D479F6DE495A7684DCD0ABA965D@JSCPCWEXMAA1.bsg.ad.adp.com>
 <BANLkTinGShn3Y8a=eD=XGGF=0SydatKtdA@mail.gmail.com>
 <08230D4C8E666D479F6DE495A7684DCD0ABA9672@JSCPCWEXMAA1.bsg.ad.adp.com>
 <4DFE774B.3040009@ifactory.com>
 <08230D4C8E666D479F6DE495A7684DCD0ABA9686@JSCPCWEXMAA1.bsg.ad.adp.com>
 <4DFE9B9E.10306@ifactory.com>
In-Reply-To: <4DFE9B9E.10306@ifactory.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-RSA-Inspected: yes
X-RSA-Classifications: public
X-RSA-Action: allow
X-Virus-Checked: Checked by ClamAV on apache.org

SSBjb3VsZCBraWNrIG15c2VsZiBpbiB0aGUgaGVhZCBmb3IgdGhhdCBvbmUuLi4uZHVoLi4u
dGhhdCB3b3JrZWQhICBUaGFua3MhISEgIEkgc2hvdWxkIGhhdmUgdHJpZWQgdGhhdCBlYXJs
aWVyIGZyb20geW91ciBlYXJsaWVyIGVtYWlsIGJ1dCBmb3Igc29tZSByZWFzb24gSSB3YXMg
c3R1Y2sgb24gdHJ5aW5nIHRvIGdldCAqIHdvcmtpbmcuDQpUaGFua3MsDQpEZWFuDQoNCi0t
LS0tT3JpZ2luYWwgTWVzc2FnZS0tLS0tDQpGcm9tOiBNaWNoYWVsIFNva29sb3YgW21haWx0
bzpzb2tvbG92QGlmYWN0b3J5LmNvbV0gDQpTZW50OiBTdW5kYXksIEp1bmUgMTksIDIwMTEg
NzowMCBQTQ0KVG86IGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZw0KU3ViamVjdDogUmU6
IHJhbmdlZCBxdWVyeSBkaWRuJ3Qgd29yaw0KDQpPbiA2LzE5LzIwMTEgODoxMSBQTSwgSGls
bGVyLCBEZWFuIHg2NjA3OSB3cm90ZToNCj4gT2RkbHksIGVub3VnaCwgdGhpcyBzZWVtcyB0
byB3b3JrIGFuZCBJIGdldCBvbmUgcmVzdWx0IGNhbGxpbmcgQ29sbGVjdG9yLmNvbGxlY3Qo
aW50IGRvY0l0KS4uLihJIGZvdW5kIG91dCBBTkQgaGFzIHRvIGJlIGNhcHMpLi4uDQo+DQo+
IGF1dGhvcjpkZWFuIEFORCBkYXRlOjIwMTEwNjIzDQo+IGJ1dCB0aGlzIGRvZXMgbm90IHNl
ZW0gdG8gd29yay4uLg0KPg0KPiBhdXRob3I6ZGVhbiBBTkQgZGF0ZTpbIDIwMTEwNjIzIFRP
ICogXQ0KSSdtIG5vdCBzdXJlLCBidXQgSSdkIHRyeQ0KDQphdXRob3I6ZGVhbiBBTkQgZGF0
ZTpbIDIwMTEwNjIzIFRPIDk5OTk5OTk5XQ0KDQo+IFlvdSB3b3VsZCB0aGluayB0aGlzIHNl
Y29uZCBxdWVyeSB3b3VsZCByZXR1cm4gdGhlIHNpbmdsZSByZXN1bHQgdGhhdCB3YXMgcmV0
dXJuZWQgaW4gdGhlIGZpcnN0IHF1ZXJ5LCB3b3VsZG4ndCBpdD8/PyAgSSBtZWFuIGl0IGlz
IGFza2luZyBmb3IgdGhlIHNhbWUgZGF0ZSBpbmNsdXNpdmUgYW5kIG1vcmUuLi53aHkgZG9l
cyBDb2xsZWN0b3IuY29sbGVjdCBuZXZlciBnZXQgY2FsbGVkIGxpa2Ugbm90aGluZyBtYXRj
aGVzLi4uLnN0ZXBwaW5nIHRocm91Z2ggdGhlIEx1Y2VuZSBjb2RlLCBTY29yZXIgaXMgbnVs
bCBmb3Igc29tZSByZWFzb24gYW5kIGl0IHNraXBzIGNvbGxlY3RpbmcgZXZlcnl0aGluZyBi
ZWNhdXNlIG9mIHRoYXQuICBBbnkgaWRlYXM/DQo+DQo+IFRoYW5rcywNCj4gRGVhbg0KDQoN
Ci0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLQ0KVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVu
c3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnDQpGb3IgYWRkaXRpb25hbCBjb21tYW5kcywg
ZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZw0KDQoNClRoaXMgbWVz
c2FnZSBhbmQgYW55IGF0dGFjaG1lbnRzIGFyZSBpbnRlbmRlZCBvbmx5IGZvciB0aGUgdXNl
IG9mIHRoZSBhZGRyZXNzZWUgYW5kDQptYXkgY29udGFpbiBpbmZvcm1hdGlvbiB0aGF0IGlz
IHByaXZpbGVnZWQgYW5kIGNvbmZpZGVudGlhbC4gSWYgdGhlIHJlYWRlciBvZiB0aGUgDQpt
ZXNzYWdlIGlzIG5vdCB0aGUgaW50ZW5kZWQgcmVjaXBpZW50IG9yIGFuIGF1dGhvcml6ZWQg
cmVwcmVzZW50YXRpdmUgb2YgdGhlDQppbnRlbmRlZCByZWNpcGllbnQsIHlvdSBhcmUgaGVy
ZWJ5IG5vdGlmaWVkIHRoYXQgYW55IGRpc3NlbWluYXRpb24gb2YgdGhpcw0KY29tbXVuaWNh
dGlvbiBpcyBzdHJpY3RseSBwcm9oaWJpdGVkLiBJZiB5b3UgaGF2ZSByZWNlaXZlZCB0aGlz
IGNvbW11bmljYXRpb24gaW4NCmVycm9yLCBwbGVhc2Ugbm90aWZ5IHVzIGltbWVkaWF0ZWx5
IGJ5IGUtbWFpbCBhbmQgZGVsZXRlIHRoZSBtZXNzYWdlIGFuZCBhbnkNCmF0dGFjaG1lbnRz
IGZyb20geW91ciBzeXN0ZW0uDQoNCg==


From java-user-return-50085-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun 20 05:49:13 2011
Return-Path: <java-user-return-50085-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2CECB68C6
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 20 Jun 2011 05:49:13 +0000 (UTC)
Received: (qmail 45625 invoked by uid 500); 20 Jun 2011 05:49:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44970 invoked by uid 500); 20 Jun 2011 05:49:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44951 invoked by uid 99); 20 Jun 2011 05:49:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2011 05:49:03 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of itsadok@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2011 05:48:55 +0000
Received: by wwi18 with SMTP id 18so2851076wwi.5
        for <java-user@lucene.apache.org>; Sun, 19 Jun 2011 22:48:35 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=l0nts3Vjv6RFf6ywaV6jSxoI/Y6AQhmCF0ka2yzIQy0=;
        b=nIk+WHrMgpYD8hc18EU9jmHekxWEQhxraG01JOz6puikIhjFpUECQXiId3GJceXG8u
         9sGJGI4dFbiJl4gOL9jiC8Kk/MGqAYHapspZ9nnfk3uaw1XAfBUeyLX6OsVSuRF+EOLj
         L+vkG3lcv7TdZqf4Cq6qiCmBkws3jA1XBxjQ8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=BJ5XWYQGNks2y04zfTalc2bNDq79abMg/n0M+q7dq/SbWuvXCAoLU8H9pFTjFpckeq
         qbkrnGcVm6SAisDttoItiVK3u01Ogvh3ajZilE9uiKPtXzXlf1B6sFP+TIm3hQUvQAU2
         81QgFJIdCkzjuuJhNGLHDGEiZCwHaEm2TyF7w=
Received: by 10.227.55.146 with SMTP id u18mr4170746wbg.25.1308548915625; Sun,
 19 Jun 2011 22:48:35 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.179.14 with HTTP; Sun, 19 Jun 2011 22:47:59 -0700 (PDT)
In-Reply-To: <08230D4C8E666D479F6DE495A7684DCD0ABA9662@JSCPCWEXMAA1.bsg.ad.adp.com>
References: <08230D4C8E666D479F6DE495A7684DCD0ABA9662@JSCPCWEXMAA1.bsg.ad.adp.com>
From: Israel Tsadok <itsadok@gmail.com>
Date: Mon, 20 Jun 2011 08:47:59 +0300
Message-ID: <BANLkTin4C82Cp8R218QJUuvSfYu4F-q=VQ@mail.gmail.com>
Subject: Re: basic example of lucene not working(must be user error, but I am
 just missing it)
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf30012082497fad04a61e4978
X-Virus-Checked: Checked by ClamAV on apache.org

--20cf30012082497fad04a61e4978
Content-Type: text/plain; charset=ISO-8859-1

You're creating the TopScoreDocCollector with numHits=1. This means the
collector only retains one result, but keep track of the total number of
results. Imagine a situation where there's a million hits. You want to know
the number, but you usually don't need all their doc ids.

That's why scoreDocs.length is 1.

--20cf30012082497fad04a61e4978--

From java-user-return-50086-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun 20 12:15:21 2011
Return-Path: <java-user-return-50086-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8F61F6EA6
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 20 Jun 2011 12:15:21 +0000 (UTC)
Received: (qmail 68812 invoked by uid 500); 20 Jun 2011 12:15:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68746 invoked by uid 500); 20 Jun 2011 12:15:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68738 invoked by uid 99); 20 Jun 2011 12:15:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2011 12:15:18 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.210.48 as permitted sender)
Received: from [209.85.210.48] (HELO mail-pz0-f48.google.com) (209.85.210.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2011 12:15:13 +0000
Received: by pzk10 with SMTP id 10so4682710pzk.35
        for <java-user@lucene.apache.org>; Mon, 20 Jun 2011 05:14:53 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type:content-transfer-encoding;
        bh=uhegwo+GX3xSw9uj0jwKaTTXlz9LzuSbRURDjT6qBw0=;
        b=aAikujY5gI1pDIpcxnHj8Rvedc260VYIZ6OOiRwNMpZK9c24n4kVT0FxKTl7P3aHxj
         J77gg19wI+QT9A3wi5j//vMdK/9rBmB2V5WrhWmwksXBQ1z2Zb/Vf/OYcFZzqaHw3dhP
         /GyoNcWlshQrkpVlmWC6O7hgmVdj/m/zhD078=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=FrAwkEtb2XftMn/f28EYG/LpkhUBge2N0GDUJX+K2dSK5tJ/MHL7fZKEb91ttuaWWY
         D5ZLCk8zN1MRg8bNO7kM/8Nd6tDAH+L9hq072TOtMfzEW62IbkM2mDhAEimGTy0U2CSc
         FCzbqP0qltTXs6xN5hlAy/+0AneGld2pXFLrM=
MIME-Version: 1.0
Received: by 10.68.66.101 with SMTP id e5mr494168pbt.239.1308572093075; Mon,
 20 Jun 2011 05:14:53 -0700 (PDT)
Received: by 10.68.41.133 with HTTP; Mon, 20 Jun 2011 05:14:53 -0700 (PDT)
In-Reply-To: <08230D4C8E666D479F6DE495A7684DCD0ABA9661@JSCPCWEXMAA1.bsg.ad.adp.com>
References: <08230D4C8E666D479F6DE495A7684DCD0ABA9660@JSCPCWEXMAA1.bsg.ad.adp.com>
	<000901cc2eac$f2bce4e0$d836aea0$@thetaphi.de>
	<08230D4C8E666D479F6DE495A7684DCD0ABA9661@JSCPCWEXMAA1.bsg.ad.adp.com>
Date: Mon, 20 Jun 2011 08:14:53 -0400
Message-ID: <BANLkTikk96OSQQnM1cN_BYhvj38vJz3-Qw@mail.gmail.com>
Subject: Re: looks like no allowing of paging without counting entire result set?
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

re: 20020101 to the end of time.. Use a clause like [2002-01-01 TO *]

About paging... Yes, you have to start all over again for each search. The =
basic
problem is that you have to score every document each search, the last docu=
ment
scored might be the highest-scoring document.

But let's back up a step, can you tell us what the higher-level
problem you're trying
to solve is? *Why* do you want to do "deep paging"? Do you care about scori=
ng
the documents or do you just want to look at all of them that match?

One solution would be to use a Collector that collected as many documents a=
s
you ever want to return and then you can use that list to "page". But
that requires
a stateful connection, which may be appropriate to your problem...

Best
Erick

On Sun, Jun 19, 2011 at 2:39 PM, Hiller, Dean  x66079
<dean.hiller@broadridge.com> wrote:
> "It supports it like 2.9, but not using the Hits API. As described above,=
 to
> show results 991 to 1000 request the top-1000 results and display the las=
t
> 10 :-)"
>
> Bear with me as I am little confused so let me throw some stuff down here=
 and think out loud...
> So, I basically have to request the top 100, then do another request for =
the next 100, etc. etc which seems like that would start all over from scra=
tch and be a bit of a performance hit correct??? =A0I would think the optim=
al way would be search returns an object which maintains a cursor into the =
index tree until I close it so I can keep asking for the next 100. =A0It so=
unds like this new api doesn't do that? =A0And maybe the old one didn't eit=
her but from client perspective, I thought the Hits object might actually j=
ust maintain that pointer.
>
> NOTE: I am not doing anything close to search. =A0Just basic column index=
ing like an RDBMS would do for us except we don't have an RDBMS. =A0Our old=
 RDBMS system has scaled up to being too costly(3 terabytes). =A0We are now=
 scaling out with noSQL and trying to replace the RDBMS before the costs st=
art to be more than the customers pay us.
>
> BIG NOTE: I think back to hibernate here where if you use select * from x=
x where yyy and setMaxResults and setFirstPage(index), it gets slower and s=
lower as you page further in, BUT if you instead use the ScrollableResults,=
 it maintains a cursor and the speed NEVER gets slower as you page into the=
 results.
>
> Maybe I am using the wrong library but there are a lot of noSQL users of =
Hbase starting to use SOLR from what I understand. =A0Should I be using a d=
ifferent indexing library perhaps?
>
> Thanks,
> Dean
>
>
> -----Original Message-----
> From: Uwe Schindler [mailto:uwe@thetaphi.de]
> Sent: Sunday, June 19, 2011 12:16 PM
> To: java-user@lucene.apache.org
> Subject: RE: looks like no allowing of paging without counting entire res=
ult set?
>
>> I am wondering how the old Hits object worked that was deprecated and
>> removed....that looks like I could stop asking it for more results and i=
t
> would
>> work better not counting all activities that matched in my 10 mil or 100
> mil
>> result set and just returning the first 100, second 100 and then I can c=
ut
> off
>> which would be way more performant.
>
> Hits did exactly what you described before. It got as many results as nee=
ded
> to show the nth page. To when showing the page for results 20 to 30, it
> fetches at least 30 results.
>
> In general Full Text Search engines are only scoring the top results. Thi=
s
> is e.g. one reason why Google limits the maximum page you can go to.
>
>> Should I just use 2.9 instead? =A0But then 3.x doesn't seem to support t=
his?
>
> It supports it like 2.9, but not using the Hits API. As described above, =
to
> show results 991 to 1000 request the top-1000 results and display the las=
t
> 10 :-)
>
> Uwe
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> This message and any attachments are intended only for the use of the add=
ressee and
> may contain information that is privileged and confidential. If the reade=
r of the
> message is not the intended recipient or an authorized representative of =
the
> intended recipient, you are hereby notified that any dissemination of thi=
s
> communication is strictly prohibited. If you have received this communica=
tion in
> error, please notify us immediately by e-mail and delete the message and =
any
> attachments from your system.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50087-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun 20 13:15:47 2011
Return-Path: <java-user-return-50087-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 800ED65F9
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 20 Jun 2011 13:15:47 +0000 (UTC)
Received: (qmail 95915 invoked by uid 500); 20 Jun 2011 13:15:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95807 invoked by uid 500); 20 Jun 2011 13:15:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95799 invoked by uid 99); 20 Jun 2011 13:15:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2011 13:15:45 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of harshcode@gmail.com designates 209.85.210.176 as permitted sender)
Received: from [209.85.210.176] (HELO mail-iy0-f176.google.com) (209.85.210.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2011 13:15:37 +0000
Received: by iyi20 with SMTP id 20so3765596iyi.35
        for <java-user@lucene.apache.org>; Mon, 20 Jun 2011 06:15:16 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type:content-transfer-encoding;
        bh=WEKUmPaQn51IWVr9Z+DK77gHe5itKh00MicWbS9k0Z8=;
        b=Hv40YaasdmenOPS2AgLcZBlG2umOeFuIcZmyst4GM1cSu1N5/OOcLR9iAF9790E8o1
         ZX/bTcR53uewjdMYR9i8yv8RqKOt/qDCNdpdJ5IdhoBTDt1t3kN3IJQcTd9YIIu+Za+E
         wOKGnNP0ll9Mpjp4a0M5vuBaSSgUExeOsmUmw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=wa0UD2RC5RTJSAmGhrj72HFoWvdMOLxnwTRiX3Ivxr/sxHfWELJix/N8I4wPczsWeC
         ytydsEMTNqCVQ2/i5UUkOpDu+LnhLUHzXYa+/hjhtB8Uf1MpkFaLxqZIwA/g33MFjfbx
         JNH0CtQiDyqRkhKyBbnnh644AkquglRisv1+c=
MIME-Version: 1.0
Received: by 10.43.132.66 with SMTP id ht2mr6415637icc.339.1308575715955; Mon,
 20 Jun 2011 06:15:15 -0700 (PDT)
Received: by 10.42.213.73 with HTTP; Mon, 20 Jun 2011 06:15:15 -0700 (PDT)
In-Reply-To: <BANLkTinMweyaQj9pK4uhw8_=JM5SkvhAOQ@mail.gmail.com>
References: <BANLkTi=t2c+hcg-G4n=8e5JKCbwZ9hviMQ@mail.gmail.com>
	<BANLkTik1sdhn7tbiBiUENZD6zHAYCzzHrw@mail.gmail.com>
	<BANLkTinMweyaQj9pK4uhw8_=JM5SkvhAOQ@mail.gmail.com>
Date: Mon, 20 Jun 2011 18:45:15 +0530
Message-ID: <BANLkTi=0K9uXOU8uPteyDa1CAwPt36PEXA@mail.gmail.com>
Subject: Re: getting OutOfMemoryError
From: harsh srivastava <harshcode@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Erick,

In continuation to my below mails, I have a socket based multithreaded
server that serves in=A0average=A01 request per second.
The index size is 31GB and document count is about=A022=A0millions.
The index directories are first divided in 4 directories and then each
subdivided to 21 directories.
I share a ParallelMultiSearcher instance for all the searches without
closing the readers.
I have given the JVM 5GB of memory.


Normally server runs smooth but sometimes when there is some complex
phrase query with other fields executed, it gives below error and
hangs.
I think that there is no sorting for the query that creates below
error, please help.


 java.lang.RuntimeException: java.util.concurrent.ExecutionException:
 java.lang.RuntimeException: java.util.concurrent.ExecutionException:
 java.lang.OutOfMemoryError: Java heap space
 java.util.concurrent.ExecutionException: java.lang.RuntimeException:
 java.util.concurrent.ExecutionException: java.lang.OutOfMemoryError: Java
 heap space
 java.lang.RuntimeException: java.util.concurrent.ExecutionException:
 java.lang.RuntimeException: java.util.concurrent.ExecutionException:
 java.lang.OutOfMemoryError: Java heap space
 =A0 =A0 =A0 =A0at
 org.apache.lucene.search.ParallelMultiSearcher$ExecutionHelper.next(Parall=
elMultiSearcher.java:278)
 =A0 =A0 =A0 =A0at
 org.apache.lucene.search.ParallelMultiSearcher.search(ParallelMultiSearche=
r.java:139)
 =A0 =A0 =A0 =A0at org.apache.lucene.search.Searcher.search(Searcher.java:5=
3)
 Caused by: java.util.concurrent.ExecutionException:
 java.lang.RuntimeException: java.util.concurrent.ExecutionException:
 java.lang.OutOfMemoryError: Java heap space
 =A0 =A0 =A0 =A0at java.util.concurrent.FutureTask$Sync.innerGet(Unknown So=
urce)
 =A0 =A0 =A0 =A0at java.util.concurrent.FutureTask.get(Unknown Source)
 =A0 =A0 =A0 =A0at
 org.apache.lucene.search.ParallelMultiSearcher$ExecutionHelper.next(Parall=
elMultiSearcher.java:274)
 =A0 =A0 =A0 =A0... 6 more
 Caused by: java.lang.RuntimeException:
 java.util.concurrent.ExecutionException: java.lang.OutOfMemoryError: Java
 heap space
 =A0 =A0 =A0 =A0at
 org.apache.lucene.search.ParallelMultiSearcher$ExecutionHelper.next(Parall=
elMultiSearcher.java:278)
 =A0 =A0 =A0 =A0at
 org.apache.lucene.search.ParallelMultiSearcher.search(ParallelMultiSearche=
r.java:139)
 =A0 =A0 =A0 =A0at
 org.apache.lucene.search.MultiSearcher$MultiSearcherCallableWithSort.call(=
MultiSearcher.java:428)
 =A0 =A0 =A0 =A0at
 org.apache.lucene.search.MultiSearcher$MultiSearcherCallableWithSort.call(=
MultiSearcher.java:402)
 =A0 =A0 =A0 =A0at java.util.concurrent.FutureTask$Sync.innerRun(Unknown So=
urce)
 =A0 =A0 =A0 =A0at java.util.concurrent.FutureTask.run(Unknown Source)
 =A0 =A0 =A0 =A0at java.util.concurrent.Executors$RunnableAdapter.call(Unkn=
own
 Source)
 =A0 =A0 =A0 =A0at java.util.concurrent.FutureTask$Sync.innerRun(Unknown So=
urce)
 =A0 =A0 =A0 =A0at java.util.concurrent.FutureTask.run(Unknown Source)
 =A0 =A0 =A0 =A0at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(U=
nknown
 Source)
 =A0 =A0 =A0 =A0at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unkno=
wn
 Source)
 =A0 =A0 =A0 =A0at java.lang.Thread.run(Unknown Source)
 Caused by: java.util.concurrent.ExecutionException:
 java.lang.OutOfMemoryError: Java heap space
 =A0 =A0 =A0 =A0at java.util.concurrent.FutureTask$Sync.innerGet(Unknown So=
urce)
 =A0 =A0 =A0 =A0at java.util.concurrent.FutureTask.get(Unknown Source)
 =A0 =A0 =A0 =A0at
 org.apache.lucene.search.ParallelMultiSearcher$ExecutionHelper.next(Parall=
elMultiSearcher.java:274)
 =A0 =A0 =A0 =A0... 11 more
 Caused by: java.lang.OutOfMemoryError: Java heap space



On Fri, Jun 17, 2011 at 9:28 PM, harsh srivastava <harshcode@gmail.com> wro=
te:
>
> Hi Erick,
> i will gather the info and let u know.
> thanks
> harsh
>
> On 6/17/11, Erick Erickson <erickerickson@gmail.com> wrote:
> > Please review:
> > http://wiki.apache.org/solr/UsingMailingLists
> >
> > You've given us no information to go on here, what are you
> > trying to do when this happens? What have you tried? What
> > is the query you're running when this happens? How much
> > memory are you allocating to the JVM?
> >
> > You're apparently sorting, how many unique values are there
> > in the fields you're sorting? How are the fields you're sorting on
> > being analyzed?
> >
> > Best
> > Erick
> >
> > On Fri, Jun 17, 2011 at 11:09 AM, harsh srivastava <harshcode@gmail.com=
>
> > wrote:
> >> Hi List,
> >>
> >> Can anyone show any light why some times I am getting below error and
> >> application hangs up:
> >>
> >> I am using lucene 3.1.
> >>
> >> java.lang.RuntimeException: java.util.concurrent.ExecutionException:
> >> java.lang.RuntimeException: java.util.concurrent.ExecutionException:
> >> java.lang.OutOfMemoryError: Java heap space
> >> java.util.concurrent.ExecutionException: java.lang.RuntimeException:
> >> java.util.concurrent.ExecutionException: java.lang.OutOfMemoryError: J=
ava
> >> heap space
> >> java.lang.RuntimeException: java.util.concurrent.ExecutionException:
> >> java.lang.RuntimeException: java.util.concurrent.ExecutionException:
> >> java.lang.OutOfMemoryError: Java heap space
> >> =A0 =A0 =A0 =A0at
> >> org.apache.lucene.search.ParallelMultiSearcher$ExecutionHelper.next(Pa=
rallelMultiSearcher.java:278)
> >> =A0 =A0 =A0 =A0at
> >> org.apache.lucene.search.ParallelMultiSearcher.search(ParallelMultiSea=
rcher.java:139)
> >> =A0 =A0 =A0 =A0at org.apache.lucene.search.Searcher.search(Searcher.ja=
va:53)
> >> Caused by: java.util.concurrent.ExecutionException:
> >> java.lang.RuntimeException: java.util.concurrent.ExecutionException:
> >> java.lang.OutOfMemoryError: Java heap space
> >> =A0 =A0 =A0 =A0at java.util.concurrent.FutureTask$Sync.innerGet(Unknow=
n Source)
> >> =A0 =A0 =A0 =A0at java.util.concurrent.FutureTask.get(Unknown Source)
> >> =A0 =A0 =A0 =A0at
> >> org.apache.lucene.search.ParallelMultiSearcher$ExecutionHelper.next(Pa=
rallelMultiSearcher.java:274)
> >> =A0 =A0 =A0 =A0... 6 more
> >> Caused by: java.lang.RuntimeException:
> >> java.util.concurrent.ExecutionException: java.lang.OutOfMemoryError: J=
ava
> >> heap space
> >> =A0 =A0 =A0 =A0at
> >> org.apache.lucene.search.ParallelMultiSearcher$ExecutionHelper.next(Pa=
rallelMultiSearcher.java:278)
> >> =A0 =A0 =A0 =A0at
> >> org.apache.lucene.search.ParallelMultiSearcher.search(ParallelMultiSea=
rcher.java:139)
> >> =A0 =A0 =A0 =A0at
> >> org.apache.lucene.search.MultiSearcher$MultiSearcherCallableWithSort.c=
all(MultiSearcher.java:428)
> >> =A0 =A0 =A0 =A0at
> >> org.apache.lucene.search.MultiSearcher$MultiSearcherCallableWithSort.c=
all(MultiSearcher.java:402)
> >> =A0 =A0 =A0 =A0at java.util.concurrent.FutureTask$Sync.innerRun(Unknow=
n Source)
> >> =A0 =A0 =A0 =A0at java.util.concurrent.FutureTask.run(Unknown Source)
> >> =A0 =A0 =A0 =A0at java.util.concurrent.Executors$RunnableAdapter.call(=
Unknown
> >> Source)
> >> =A0 =A0 =A0 =A0at java.util.concurrent.FutureTask$Sync.innerRun(Unknow=
n Source)
> >> =A0 =A0 =A0 =A0at java.util.concurrent.FutureTask.run(Unknown Source)
> >> =A0 =A0 =A0 =A0at java.util.concurrent.ThreadPoolExecutor$Worker.runTa=
sk(Unknown
> >> Source)
> >> =A0 =A0 =A0 =A0at java.util.concurrent.ThreadPoolExecutor$Worker.run(U=
nknown
> >> Source)
> >> =A0 =A0 =A0 =A0at java.lang.Thread.run(Unknown Source)
> >> Caused by: java.util.concurrent.ExecutionException:
> >> java.lang.OutOfMemoryError: Java heap space
> >> =A0 =A0 =A0 =A0at java.util.concurrent.FutureTask$Sync.innerGet(Unknow=
n Source)
> >> =A0 =A0 =A0 =A0at java.util.concurrent.FutureTask.get(Unknown Source)
> >> =A0 =A0 =A0 =A0at
> >> org.apache.lucene.search.ParallelMultiSearcher$ExecutionHelper.next(Pa=
rallelMultiSearcher.java:274)
> >> =A0 =A0 =A0 =A0... 11 more
> >> Caused by: java.lang.OutOfMemoryError: Java heap space
> >>
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> --
> Sent from my mobile device

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50088-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun 20 13:41:59 2011
Return-Path: <java-user-return-50088-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 52182668A
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 20 Jun 2011 13:41:59 +0000 (UTC)
Received: (qmail 48663 invoked by uid 500); 20 Jun 2011 13:41:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48622 invoked by uid 500); 20 Jun 2011 13:41:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48614 invoked by uid 99); 20 Jun 2011 13:41:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2011 13:41:56 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dean.hiller@broadridge.com designates 64.18.2.161 as permitted sender)
Received: from [64.18.2.161] (HELO exprod7og104.obsmtp.com) (64.18.2.161)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2011 13:41:48 +0000
Received: from gwm.broadridge.com ([167.212.2.180]) (using TLSv1) by exprod7ob104.postini.com ([64.18.6.12]) with SMTP
	ID DSNKTf9NegeWpUAg3VC/XWZdHKmYkNjXKkb0@postini.com; Mon, 20 Jun 2011 06:41:27 PDT
Received: from jsppsldlpsi02.broadridge.net ([10.98.54.12])
	by gwm.broadridge.com (8.13.8/8.13.8) with ESMTP id p5KDd1mv1187936
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Mon, 20 Jun 2011 09:39:05 -0400
Received: from JSIPSWEXHA02.bsg.ad.adp.com (jsipswexha02.bsg.ad.adp.com [10.17.69.34]) by jsppsldlpsi02.broadridge.net (RSA Interceptor) for <java-user@lucene.apache.org>; Mon, 20 Jun 2011 09:39:04 -0400
Received: from jscpcwexmaa1.bsg.ad.adp.com ([fe80::882f:16e8:308d:3ef]) by
 JSIPSWEXHA02.bsg.ad.adp.com ([::1]) with mapi; Mon, 20 Jun 2011 09:38:57
 -0400
From: "Hiller, Dean  x66079" <dean.hiller@broadridge.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Mon, 20 Jun 2011 09:38:54 -0400
Subject: RE: looks like no allowing of paging without counting entire result
 set?
Thread-Topic: looks like no allowing of paging without counting entire
 result set?
Thread-Index: AcwvQ+e3y9OB5heaSb6Cqa4/hZFkmAACrtBg
Message-ID: <08230D4C8E666D479F6DE495A7684DCD0ABA9718@JSCPCWEXMAA1.bsg.ad.adp.com>
References: <08230D4C8E666D479F6DE495A7684DCD0ABA9660@JSCPCWEXMAA1.bsg.ad.adp.com>
	<000901cc2eac$f2bce4e0$d836aea0$@thetaphi.de>
	<08230D4C8E666D479F6DE495A7684DCD0ABA9661@JSCPCWEXMAA1.bsg.ad.adp.com>
 <BANLkTikk96OSQQnM1cN_BYhvj38vJz3-Qw@mail.gmail.com>
In-Reply-To: <BANLkTikk96OSQQnM1cN_BYhvj38vJz3-Qw@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: en-US
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-RSA-Inspected: yes
X-RSA-Classifications: public
X-Virus-Checked: Checked by ClamAV on apache.org

The noSQL world flips indexing upside down.  Instead of the database doing =
it for you, you do it, and this turns out to be a huge advantage in noSQL w=
hen I have huge data.  I need to create an index on my activity table accou=
nt, security, activityDate columns...one index for each account instead of =
one huge billion entry index.  In RDBMS, this would be one huge billion nod=
e index tree.  In my db, it is 8000000 index trees instead which is way mor=
e performant.

So basically in short, I do not need scoring at all, I just need basic rdbm=
s type indexing library and ideally when I get 3 pages in, I can exit out a=
nd I can page all I want to the end if I needed to.

I have been looking at the Collector and it seems like a hack, but I have b=
een thinking I can lock in the collector to prevent lucene from reading in =
all rows.....I can also from the other thread then design a cursor.release =
that will tell my collector on the other thread to throw an exception so no=
 more reading is done.

I only wish there was a more raw api that I may be missing in Lucene down b=
elow dealing with just index trees??

Thanks,
Dean


-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]=20
Sent: Monday, June 20, 2011 6:15 AM
To: java-user@lucene.apache.org
Subject: Re: looks like no allowing of paging without counting entire resul=
t set?

re: 20020101 to the end of time.. Use a clause like [2002-01-01 TO *]

About paging... Yes, you have to start all over again for each search. The =
basic
problem is that you have to score every document each search, the last docu=
ment
scored might be the highest-scoring document.

But let's back up a step, can you tell us what the higher-level
problem you're trying
to solve is? *Why* do you want to do "deep paging"? Do you care about scori=
ng
the documents or do you just want to look at all of them that match?

One solution would be to use a Collector that collected as many documents a=
s
you ever want to return and then you can use that list to "page". But
that requires
a stateful connection, which may be appropriate to your problem...

Best
Erick

On Sun, Jun 19, 2011 at 2:39 PM, Hiller, Dean  x66079
<dean.hiller@broadridge.com> wrote:
> "It supports it like 2.9, but not using the Hits API. As described above,=
 to
> show results 991 to 1000 request the top-1000 results and display the las=
t
> 10 :-)"
>
> Bear with me as I am little confused so let me throw some stuff down here=
 and think out loud...
> So, I basically have to request the top 100, then do another request for =
the next 100, etc. etc which seems like that would start all over from scra=
tch and be a bit of a performance hit correct??? =A0I would think the optim=
al way would be search returns an object which maintains a cursor into the =
index tree until I close it so I can keep asking for the next 100. =A0It so=
unds like this new api doesn't do that? =A0And maybe the old one didn't eit=
her but from client perspective, I thought the Hits object might actually j=
ust maintain that pointer.
>
> NOTE: I am not doing anything close to search. =A0Just basic column index=
ing like an RDBMS would do for us except we don't have an RDBMS. =A0Our old=
 RDBMS system has scaled up to being too costly(3 terabytes). =A0We are now=
 scaling out with noSQL and trying to replace the RDBMS before the costs st=
art to be more than the customers pay us.
>
> BIG NOTE: I think back to hibernate here where if you use select * from x=
x where yyy and setMaxResults and setFirstPage(index), it gets slower and s=
lower as you page further in, BUT if you instead use the ScrollableResults,=
 it maintains a cursor and the speed NEVER gets slower as you page into the=
 results.
>
> Maybe I am using the wrong library but there are a lot of noSQL users of =
Hbase starting to use SOLR from what I understand. =A0Should I be using a d=
ifferent indexing library perhaps?
>
> Thanks,
> Dean
>
>
> -----Original Message-----
> From: Uwe Schindler [mailto:uwe@thetaphi.de]
> Sent: Sunday, June 19, 2011 12:16 PM
> To: java-user@lucene.apache.org
> Subject: RE: looks like no allowing of paging without counting entire res=
ult set?
>
>> I am wondering how the old Hits object worked that was deprecated and
>> removed....that looks like I could stop asking it for more results and i=
t
> would
>> work better not counting all activities that matched in my 10 mil or 100
> mil
>> result set and just returning the first 100, second 100 and then I can c=
ut
> off
>> which would be way more performant.
>
> Hits did exactly what you described before. It got as many results as nee=
ded
> to show the nth page. To when showing the page for results 20 to 30, it
> fetches at least 30 results.
>
> In general Full Text Search engines are only scoring the top results. Thi=
s
> is e.g. one reason why Google limits the maximum page you can go to.
>
>> Should I just use 2.9 instead? =A0But then 3.x doesn't seem to support t=
his?
>
> It supports it like 2.9, but not using the Hits API. As described above, =
to
> show results 991 to 1000 request the top-1000 results and display the las=
t
> 10 :-)
>
> Uwe
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> This message and any attachments are intended only for the use of the add=
ressee and
> may contain information that is privileged and confidential. If the reade=
r of the
> message is not the intended recipient or an authorized representative of =
the
> intended recipient, you are hereby notified that any dissemination of thi=
s
> communication is strictly prohibited. If you have received this communica=
tion in
> error, please notify us immediately by e-mail and delete the message and =
any
> attachments from your system.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

This message and any attachments are intended only for the use of the add=
ressee and
may contain information that is privileged and confidential. If the reade=
r of the =

message is not the intended recipient or an authorized representative of =
the
intended recipient, you are hereby notified that any dissemination of thi=
s
communication is strictly prohibited. If you have received this communica=
tion in
error, please notify us immediately by e-mail and delete the message and =
any
attachments from your system.
=0D

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50089-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun 20 13:44:55 2011
Return-Path: <java-user-return-50089-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id F0E336A25
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 20 Jun 2011 13:44:55 +0000 (UTC)
Received: (qmail 56530 invoked by uid 500); 20 Jun 2011 13:44:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56481 invoked by uid 500); 20 Jun 2011 13:44:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56473 invoked by uid 99); 20 Jun 2011 13:44:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2011 13:44:53 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dean.hiller@broadridge.com designates 64.18.2.28 as permitted sender)
Received: from [64.18.2.28] (HELO exprod7og125.obsmtp.com) (64.18.2.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2011 13:44:47 +0000
Received: from gwm.broadridge.com ([167.212.2.180]) (using TLSv1) by exprod7ob125.postini.com ([64.18.6.12]) with SMTP
	ID DSNKTf9OukiMipf5v+nY0DcEspZftvyK8P19@postini.com; Mon, 20 Jun 2011 06:44:26 PDT
Received: from jsppsldlpsi01.broadridge.net ([10.98.54.11])
	by gwm.broadridge.com (8.13.8/8.13.8) with ESMTP id p5KDiPY71196164
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Mon, 20 Jun 2011 09:44:25 -0400
Received: from JSIPSWEXHA01.bsg.ad.adp.com (jsipswexha01.bsg.ad.adp.com [10.17.69.24]) by jsppsldlpsi01.broadridge.net (RSA Interceptor) for <java-user@lucene.apache.org>; Mon, 20 Jun 2011 09:44:13 -0400
Received: from jscpcwexmaa1.bsg.ad.adp.com ([fe80::882f:16e8:308d:3ef]) by
 JSIPSWEXHA01.bsg.ad.adp.com ([::1]) with mapi; Mon, 20 Jun 2011 09:44:10
 -0400
From: "Hiller, Dean  x66079" <dean.hiller@broadridge.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Mon, 20 Jun 2011 09:44:09 -0400
Subject: RE: looks like no allowing of paging without counting entire result
 set?
Thread-Topic: looks like no allowing of paging without counting entire
 result set?
Thread-Index: AcwvQ+e3y9OB5heaSb6Cqa4/hZFkmAAC8hZA
Message-ID: <08230D4C8E666D479F6DE495A7684DCD0ABA971E@JSCPCWEXMAA1.bsg.ad.adp.com>
References: <08230D4C8E666D479F6DE495A7684DCD0ABA9660@JSCPCWEXMAA1.bsg.ad.adp.com>
	<000901cc2eac$f2bce4e0$d836aea0$@thetaphi.de>
	<08230D4C8E666D479F6DE495A7684DCD0ABA9661@JSCPCWEXMAA1.bsg.ad.adp.com>
 <BANLkTikk96OSQQnM1cN_BYhvj38vJz3-Qw@mail.gmail.com>
In-Reply-To: <BANLkTikk96OSQQnM1cN_BYhvj38vJz3-Qw@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: en-US
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-RSA-Inspected: yes
X-RSA-Classifications: public
X-RSA-Action: allow

One more note:  We hit a big performance problem in that if the first page =
took 3 seconds to come up, the second page took 3 seconds + x seconds to co=
me up....this was the major problem we hit.  Our client is not a web app bu=
t automated software so the timings on the second page really need to be in=
 the 0 seconds + x seconds range.

So, deep paging may happen if there are no matches in our system as the aut=
omated software has to go through all results until it pairs up the record =
that just came in.

Main issue is we have nothing to do with search and are trying to use lucen=
e as a plain indexing library for those typical rdbms indexing use-cases th=
at you have.

Dean

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]=20
Sent: Monday, June 20, 2011 6:15 AM
To: java-user@lucene.apache.org
Subject: Re: looks like no allowing of paging without counting entire resul=
t set?

re: 20020101 to the end of time.. Use a clause like [2002-01-01 TO *]

About paging... Yes, you have to start all over again for each search. The =
basic
problem is that you have to score every document each search, the last docu=
ment
scored might be the highest-scoring document.

But let's back up a step, can you tell us what the higher-level
problem you're trying
to solve is? *Why* do you want to do "deep paging"? Do you care about scori=
ng
the documents or do you just want to look at all of them that match?

One solution would be to use a Collector that collected as many documents a=
s
you ever want to return and then you can use that list to "page". But
that requires
a stateful connection, which may be appropriate to your problem...

Best
Erick

On Sun, Jun 19, 2011 at 2:39 PM, Hiller, Dean  x66079
<dean.hiller@broadridge.com> wrote:
> "It supports it like 2.9, but not using the Hits API. As described above,=
 to
> show results 991 to 1000 request the top-1000 results and display the las=
t
> 10 :-)"
>
> Bear with me as I am little confused so let me throw some stuff down here=
 and think out loud...
> So, I basically have to request the top 100, then do another request for =
the next 100, etc. etc which seems like that would start all over from scra=
tch and be a bit of a performance hit correct??? =A0I would think the optim=
al way would be search returns an object which maintains a cursor into the =
index tree until I close it so I can keep asking for the next 100. =A0It so=
unds like this new api doesn't do that? =A0And maybe the old one didn't eit=
her but from client perspective, I thought the Hits object might actually j=
ust maintain that pointer.
>
> NOTE: I am not doing anything close to search. =A0Just basic column index=
ing like an RDBMS would do for us except we don't have an RDBMS. =A0Our old=
 RDBMS system has scaled up to being too costly(3 terabytes). =A0We are now=
 scaling out with noSQL and trying to replace the RDBMS before the costs st=
art to be more than the customers pay us.
>
> BIG NOTE: I think back to hibernate here where if you use select * from x=
x where yyy and setMaxResults and setFirstPage(index), it gets slower and s=
lower as you page further in, BUT if you instead use the ScrollableResults,=
 it maintains a cursor and the speed NEVER gets slower as you page into the=
 results.
>
> Maybe I am using the wrong library but there are a lot of noSQL users of =
Hbase starting to use SOLR from what I understand. =A0Should I be using a d=
ifferent indexing library perhaps?
>
> Thanks,
> Dean
>
>
> -----Original Message-----
> From: Uwe Schindler [mailto:uwe@thetaphi.de]
> Sent: Sunday, June 19, 2011 12:16 PM
> To: java-user@lucene.apache.org
> Subject: RE: looks like no allowing of paging without counting entire res=
ult set?
>
>> I am wondering how the old Hits object worked that was deprecated and
>> removed....that looks like I could stop asking it for more results and i=
t
> would
>> work better not counting all activities that matched in my 10 mil or 100
> mil
>> result set and just returning the first 100, second 100 and then I can c=
ut
> off
>> which would be way more performant.
>
> Hits did exactly what you described before. It got as many results as nee=
ded
> to show the nth page. To when showing the page for results 20 to 30, it
> fetches at least 30 results.
>
> In general Full Text Search engines are only scoring the top results. Thi=
s
> is e.g. one reason why Google limits the maximum page you can go to.
>
>> Should I just use 2.9 instead? =A0But then 3.x doesn't seem to support t=
his?
>
> It supports it like 2.9, but not using the Hits API. As described above, =
to
> show results 991 to 1000 request the top-1000 results and display the las=
t
> 10 :-)
>
> Uwe
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> This message and any attachments are intended only for the use of the add=
ressee and
> may contain information that is privileged and confidential. If the reade=
r of the
> message is not the intended recipient or an authorized representative of =
the
> intended recipient, you are hereby notified that any dissemination of thi=
s
> communication is strictly prohibited. If you have received this communica=
tion in
> error, please notify us immediately by e-mail and delete the message and =
any
> attachments from your system.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

This message and any attachments are intended only for the use of the add=
ressee and
may contain information that is privileged and confidential. If the reade=
r of the =

message is not the intended recipient or an authorized representative of =
the
intended recipient, you are hereby notified that any dissemination of thi=
s
communication is strictly prohibited. If you have received this communica=
tion in
error, please notify us immediately by e-mail and delete the message and =
any
attachments from your system.
=0D

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50090-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun 20 14:13:24 2011
Return-Path: <java-user-return-50090-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A77FE6B8E
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 20 Jun 2011 14:13:24 +0000 (UTC)
Received: (qmail 22922 invoked by uid 500); 20 Jun 2011 14:13:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22878 invoked by uid 500); 20 Jun 2011 14:13:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22870 invoked by uid 99); 20 Jun 2011 14:13:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2011 14:13:22 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.210.48 as permitted sender)
Received: from [209.85.210.48] (HELO mail-pz0-f48.google.com) (209.85.210.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2011 14:13:17 +0000
Received: by pzk10 with SMTP id 10so4817284pzk.35
        for <java-user@lucene.apache.org>; Mon, 20 Jun 2011 07:12:56 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type:content-transfer-encoding;
        bh=SOAfBIat3To9UHxdWq6dmFD7q2yEH0YhaH+jNGNk+wY=;
        b=XQlCxg+kQU+oWbb98uoWrukXQoXjuxwZaNDzbq1dhtB8hAI4BY/Gdcz2ctk33nnYPu
         EmFdL4rluO5T0c/M+LrHkOIqqg1FWCjzIxdpuZOQICYNjEC5kA+GIKQ61GUsPJtwhDnq
         /XaCxFrE/ECo+atg130XzdiA0ZBrzpSaAxo4Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=OdkyMqntYjk5I3dLMoiw/dk8daA1kTQSdWN6FKD8SFzV1qg5d486sJskqKl23ybpio
         Fr7G5D9/4aO+EljPrX8YTnVadMwgi0bOc1dq7agF2q+SN1HrUo5a7Lcb6SMK/7NFjyNL
         j+bz67/hpRj+X8+SPb0uSgmDnu1JmhvC26y2w=
MIME-Version: 1.0
Received: by 10.68.2.69 with SMTP id 5mr1926113pbs.373.1308579176590; Mon, 20
 Jun 2011 07:12:56 -0700 (PDT)
Received: by 10.68.41.133 with HTTP; Mon, 20 Jun 2011 07:12:56 -0700 (PDT)
In-Reply-To: <08230D4C8E666D479F6DE495A7684DCD0ABA971E@JSCPCWEXMAA1.bsg.ad.adp.com>
References: <08230D4C8E666D479F6DE495A7684DCD0ABA9660@JSCPCWEXMAA1.bsg.ad.adp.com>
	<000901cc2eac$f2bce4e0$d836aea0$@thetaphi.de>
	<08230D4C8E666D479F6DE495A7684DCD0ABA9661@JSCPCWEXMAA1.bsg.ad.adp.com>
	<BANLkTikk96OSQQnM1cN_BYhvj38vJz3-Qw@mail.gmail.com>
	<08230D4C8E666D479F6DE495A7684DCD0ABA971E@JSCPCWEXMAA1.bsg.ad.adp.com>
Date: Mon, 20 Jun 2011 10:12:56 -0400
Message-ID: <BANLkTin1727iqJvR8xLx5kJsdFtJXs34bQ@mail.gmail.com>
Subject: Re: looks like no allowing of paging without counting entire result set?
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

<<< that if the first page took 3 seconds to come up, the second page
took 3 seconds + x seconds>>>

This is really suspicious, what all are you trying to do in your
process? Because I'm starting to guess
that Solr isn't the performance problem here, assuming
reasonably-sized pages (e.g. < thousands).

If all you're doing is matching terms, not scoring, using wildcards,
and all that, you might get
some joy from TermDocs or similar.

Best
Erick

On Mon, Jun 20, 2011 at 9:44 AM, Hiller, Dean  x66079
<dean.hiller@broadridge.com> wrote:
> One more note: =A0We hit a big performance problem in that if the first p=
age took 3 seconds to come up, the second page took 3 seconds + x seconds t=
o come up....this was the major problem we hit. =A0Our client is not a web =
app but automated software so the timings on the second page really need to=
 be in the 0 seconds + x seconds range.
>
> So, deep paging may happen if there are no matches in our system as the a=
utomated software has to go through all results until it pairs up the recor=
d that just came in.
>
> Main issue is we have nothing to do with search and are trying to use luc=
ene as a plain indexing library for those typical rdbms indexing use-cases =
that you have.
>
> Dean
>
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: Monday, June 20, 2011 6:15 AM
> To: java-user@lucene.apache.org
> Subject: Re: looks like no allowing of paging without counting entire res=
ult set?
>
> re: 20020101 to the end of time.. Use a clause like [2002-01-01 TO *]
>
> About paging... Yes, you have to start all over again for each search. Th=
e basic
> problem is that you have to score every document each search, the last do=
cument
> scored might be the highest-scoring document.
>
> But let's back up a step, can you tell us what the higher-level
> problem you're trying
> to solve is? *Why* do you want to do "deep paging"? Do you care about sco=
ring
> the documents or do you just want to look at all of them that match?
>
> One solution would be to use a Collector that collected as many documents=
 as
> you ever want to return and then you can use that list to "page". But
> that requires
> a stateful connection, which may be appropriate to your problem...
>
> Best
> Erick
>
> On Sun, Jun 19, 2011 at 2:39 PM, Hiller, Dean =A0x66079
> <dean.hiller@broadridge.com> wrote:
>> "It supports it like 2.9, but not using the Hits API. As described above=
, to
>> show results 991 to 1000 request the top-1000 results and display the la=
st
>> 10 :-)"
>>
>> Bear with me as I am little confused so let me throw some stuff down her=
e and think out loud...
>> So, I basically have to request the top 100, then do another request for=
 the next 100, etc. etc which seems like that would start all over from scr=
atch and be a bit of a performance hit correct??? =A0I would think the opti=
mal way would be search returns an object which maintains a cursor into the=
 index tree until I close it so I can keep asking for the next 100. =A0It s=
ounds like this new api doesn't do that? =A0And maybe the old one didn't ei=
ther but from client perspective, I thought the Hits object might actually =
just maintain that pointer.
>>
>> NOTE: I am not doing anything close to search. =A0Just basic column inde=
xing like an RDBMS would do for us except we don't have an RDBMS. =A0Our ol=
d RDBMS system has scaled up to being too costly(3 terabytes). =A0We are no=
w scaling out with noSQL and trying to replace the RDBMS before the costs s=
tart to be more than the customers pay us.
>>
>> BIG NOTE: I think back to hibernate here where if you use select * from =
xx where yyy and setMaxResults and setFirstPage(index), it gets slower and =
slower as you page further in, BUT if you instead use the ScrollableResults=
, it maintains a cursor and the speed NEVER gets slower as you page into th=
e results.
>>
>> Maybe I am using the wrong library but there are a lot of noSQL users of=
 Hbase starting to use SOLR from what I understand. =A0Should I be using a =
different indexing library perhaps?
>>
>> Thanks,
>> Dean
>>
>>
>> -----Original Message-----
>> From: Uwe Schindler [mailto:uwe@thetaphi.de]
>> Sent: Sunday, June 19, 2011 12:16 PM
>> To: java-user@lucene.apache.org
>> Subject: RE: looks like no allowing of paging without counting entire re=
sult set?
>>
>>> I am wondering how the old Hits object worked that was deprecated and
>>> removed....that looks like I could stop asking it for more results and =
it
>> would
>>> work better not counting all activities that matched in my 10 mil or 10=
0
>> mil
>>> result set and just returning the first 100, second 100 and then I can =
cut
>> off
>>> which would be way more performant.
>>
>> Hits did exactly what you described before. It got as many results as ne=
eded
>> to show the nth page. To when showing the page for results 20 to 30, it
>> fetches at least 30 results.
>>
>> In general Full Text Search engines are only scoring the top results. Th=
is
>> is e.g. one reason why Google limits the maximum page you can go to.
>>
>>> Should I just use 2.9 instead? =A0But then 3.x doesn't seem to support =
this?
>>
>> It supports it like 2.9, but not using the Hits API. As described above,=
 to
>> show results 991 to 1000 request the top-1000 results and display the la=
st
>> 10 :-)
>>
>> Uwe
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>> This message and any attachments are intended only for the use of the ad=
dressee and
>> may contain information that is privileged and confidential. If the read=
er of the
>> message is not the intended recipient or an authorized representative of=
 the
>> intended recipient, you are hereby notified that any dissemination of th=
is
>> communication is strictly prohibited. If you have received this communic=
ation in
>> error, please notify us immediately by e-mail and delete the message and=
 any
>> attachments from your system.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> This message and any attachments are intended only for the use of the add=
ressee and
> may contain information that is privileged and confidential. If the reade=
r of the
> message is not the intended recipient or an authorized representative of =
the
> intended recipient, you are hereby notified that any dissemination of thi=
s
> communication is strictly prohibited. If you have received this communica=
tion in
> error, please notify us immediately by e-mail and delete the message and =
any
> attachments from your system.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50091-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun 20 14:40:20 2011
Return-Path: <java-user-return-50091-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1E9BB6C0A
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 20 Jun 2011 14:40:20 +0000 (UTC)
Received: (qmail 76674 invoked by uid 500); 20 Jun 2011 14:40:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76637 invoked by uid 500); 20 Jun 2011 14:40:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76629 invoked by uid 99); 20 Jun 2011 14:40:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2011 14:40:17 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jdevgl@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2011 14:40:10 +0000
Received: by fxm7 with SMTP id 7so2689963fxm.35
        for <java-user@lucene.apache.org>; Mon, 20 Jun 2011 07:39:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:message-id:date:from:user-agent:mime-version:to
         :subject:content-type:content-transfer-encoding;
        bh=3Vn5QZawttOHf58jJpJDiD0elWsBASuV6pUtUtPDNqI=;
        b=kollcu1iswtNE2JPw//YQybu6ZtM0PQySYCwN6WeQiGGJ5oJs9BYm/vQIM3zKu7xG2
         zFp0vf4YM+Wc/T6f15r9e2n/xCKk+hgLtk1JiG1Y+W022ivSsH+lP0cXdBg6NXsMLI8+
         yVT29j8Ve1KY7miYXWJMyRwIM6cQWUpcesNMs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject
         :content-type:content-transfer-encoding;
        b=iMxYeI/+k2MYZr1ozJROFPy0tN7NLgPdJA+H7UhuAu9ywaKY9kEcI8jYU4hAFQ3kgf
         4IeipChDYcIBzrHrUr/pElto2iHoV5dDmgPhCcON7ETIDIm3+6TDW5AAM4vJWPQ/C76G
         KWZF2/JoqUqScNR6y3JyL4B2mQLJKFm1TmSA4=
Received: by 10.223.30.82 with SMTP id t18mr6039114fac.106.1308580788729;
        Mon, 20 Jun 2011 07:39:48 -0700 (PDT)
Received: from [192.168.20.14] (LPuteaux-151-41-16-99.w217-128.abo.wanadoo.fr [217.128.31.99])
        by mx.google.com with ESMTPS id n27sm1088141faa.28.2011.06.20.07.39.48
        (version=SSLv3 cipher=OTHER);
        Mon, 20 Jun 2011 07:39:48 -0700 (PDT)
Message-ID: <4DFF5BEE.3050807@gmail.com>
Date: Mon, 20 Jun 2011 16:40:46 +0200
From: "G.Long" <jdevgl@gmail.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; fr; rv:1.9.2.17) Gecko/20110414 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: How to deal with not analyzed fields and analyzed ones in the same
 query
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Hi :)

I know it is possible to create a query on different fields with 
different analyzers with PerFieldAnalyzer class but is it possible to 
also include fields which are not analyzed ?

I want some fields not to be tokenized (an exact reference of an article 
for example) and others to be tokenized (like the description of the 
article). I would like to be able to search for a word in both fields 
with one single query.

Thank you :)




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50092-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun 20 14:44:08 2011
Return-Path: <java-user-return-50092-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8A13B6CDB
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 20 Jun 2011 14:44:08 +0000 (UTC)
Received: (qmail 83300 invoked by uid 500); 20 Jun 2011 14:44:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83235 invoked by uid 500); 20 Jun 2011 14:44:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83223 invoked by uid 99); 20 Jun 2011 14:44:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2011 14:44:06 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.210.48 as permitted sender)
Received: from [209.85.210.48] (HELO mail-pz0-f48.google.com) (209.85.210.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2011 14:43:58 +0000
Received: by pzk10 with SMTP id 10so4855231pzk.35
        for <java-user@lucene.apache.org>; Mon, 20 Jun 2011 07:43:37 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=rfRHnonowKnUoC5Mnt7NctIDkwQwMv7JYCcBCM4khvA=;
        b=EtXYlTpipxFWUlPImO74xX2zTDeuCZOYPJoVX1d4kmbxGVcWCZIy1L1OUJCi66Dd67
         Y/YEtTXdArACD8R/Cq4c4kUGbHl8pdqtqwaqJ1WjUfgjPYyFMX8CMOK6DXf3i4DwRuTS
         fU+z9BEWb/runB/7/BeRRnGlLePj0OKBYs1aU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=cFZmUNBNcmMvmQxkbceyXzTOra9kDSpcnFBRpTWoxKPnboEJo9exF7JEe0+WHWS08+
         lBR+Tzzny9anUH3ZMj46KLawGgZUtwViL0JF4CxNf8QFprDy+WYv3IPJRXYgTRrj19qV
         /3Jlpl1eA2SrsC1ZDKiW+aEUed+2cFKYSerwo=
MIME-Version: 1.0
Received: by 10.68.27.39 with SMTP id q7mr2107791pbg.440.1308581017383; Mon,
 20 Jun 2011 07:43:37 -0700 (PDT)
Received: by 10.68.41.133 with HTTP; Mon, 20 Jun 2011 07:43:37 -0700 (PDT)
In-Reply-To: <4DFF5BEE.3050807@gmail.com>
References: <4DFF5BEE.3050807@gmail.com>
Date: Mon, 20 Jun 2011 10:43:37 -0400
Message-ID: <BANLkTiksq-zenbtEYT2CRhGqzRhvXsTNUA@mail.gmail.com>
Subject: Re: How to deal with not analyzed fields and analyzed ones in the
 same query
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

See PerFieldAnalyzerWrapper, then form your query like
field1:word1 OR field2:word1

Best
Erick

On Mon, Jun 20, 2011 at 10:40 AM, G.Long <jdevgl@gmail.com> wrote:
> Hi :)
>
> I know it is possible to create a query on different fields with different
> analyzers with PerFieldAnalyzer class but is it possible to also include
> fields which are not analyzed ?
>
> I want some fields not to be tokenized (an exact reference of an article for
> example) and others to be tokenized (like the description of the article). I
> would like to be able to search for a word in both fields with one single
> query.
>
> Thank you :)
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50093-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun 20 15:12:16 2011
Return-Path: <java-user-return-50093-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 62E046D72
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 20 Jun 2011 15:12:16 +0000 (UTC)
Received: (qmail 29066 invoked by uid 500); 20 Jun 2011 15:12:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29017 invoked by uid 500); 20 Jun 2011 15:12:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29009 invoked by uid 99); 20 Jun 2011 15:12:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2011 15:12:14 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jdevgl@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2011 15:12:06 +0000
Received: by wwi18 with SMTP id 18so3182480wwi.5
        for <java-user@lucene.apache.org>; Mon, 20 Jun 2011 08:11:45 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:message-id:date:from:user-agent:mime-version:to
         :subject:references:in-reply-to:content-type
         :content-transfer-encoding;
        bh=MgqpH1/MPYWCNcYIRGoW5LKdBaAc2+tvNUUvm8ljRV0=;
        b=K+OydvQQcokVOSScQPgcZ4XFwdsHbupOVMDWy3h7MJjrCmN0fxtSaz9eJINTsIpYoQ
         wp24+gs6JHivRKtjro92dD6ZOnHj6K8flwxNtBPpRks3WeY7lCRPT8sHDSZJh04LkYcu
         SW8M2sj+CrGXp6gjBoNlTGTrAopKF9Pafl3fY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=cuM6GnuLH8nSbwQvoK9T+6/vF2wZaWyDocwYSA4Aeh47/OLyd7i82dxPEIatTRDvsl
         Kxdv+sQeIlbHPwcQ+vc4ep1rEEq3rjaV2AznbJf9eQ2NVcbbcKrugJxHDx/OOs1/2sQf
         Qq/NseVg6C4HnISIgdrdPMKqRMk5pDXthQ0i0=
Received: by 10.227.197.21 with SMTP id ei21mr409442wbb.107.1308582705198;
        Mon, 20 Jun 2011 08:11:45 -0700 (PDT)
Received: from [192.168.20.14] (LPuteaux-151-41-16-99.w217-128.abo.wanadoo.fr [217.128.31.99])
        by mx.google.com with ESMTPS id fl19sm3258162wbb.15.2011.06.20.08.11.44
        (version=SSLv3 cipher=OTHER);
        Mon, 20 Jun 2011 08:11:44 -0700 (PDT)
Message-ID: <4DFF636B.4020401@gmail.com>
Date: Mon, 20 Jun 2011 17:12:43 +0200
From: "G.Long" <jdevgl@gmail.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; fr; rv:1.9.2.17) Gecko/20110414 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: How to deal with not analyzed fields and analyzed ones in the
 same query
References: <4DFF5BEE.3050807@gmail.com> <BANLkTiksq-zenbtEYT2CRhGqzRhvXsTNUA@mail.gmail.com>
In-Reply-To: <BANLkTiksq-zenbtEYT2CRhGqzRhvXsTNUA@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit

Ok, I'll try this.

But will it work if one of the fields has no analyzers assigned ?

For example field1 is associated with a keyword analyzer, field2 with a 
standardAnalyzer and field3 has no analyzer because it was indexed as  
Field.Index.NOT_ANALYZED. Is there something to specify in the 
constructor of the PerFieldAnalyzerWrapper for the field3 ?

Regards,
Gary

Le 20/06/2011 16:43, Erick Erickson a crit :
> See PerFieldAnalyzerWrapper, then form your query like
> field1:word1 OR field2:word1
>
> Best
> Erick
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50094-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun 20 15:55:26 2011
Return-Path: <java-user-return-50094-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4B25B6004
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 20 Jun 2011 15:55:26 +0000 (UTC)
Received: (qmail 12844 invoked by uid 500); 20 Jun 2011 15:55:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12798 invoked by uid 500); 20 Jun 2011 15:55:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12790 invoked by uid 99); 20 Jun 2011 15:55:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2011 15:55:23 +0000
X-ASF-Spam-Status: No, hits=-0.1 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dean.hiller@broadridge.com designates 64.18.2.28 as permitted sender)
Received: from [64.18.2.28] (HELO exprod7og125.obsmtp.com) (64.18.2.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2011 15:55:14 +0000
Received: from gwm.broadridge.com ([167.212.2.180]) (using TLSv1) by exprod7ob125.postini.com ([64.18.6.12]) with SMTP
	ID DSNKTf9tTNVsd5dq+C+u5uw7rX6Fy+O2YaMD@postini.com; Mon, 20 Jun 2011 08:54:53 PDT
Received: from jsppsldlpsi01.broadridge.net ([10.98.54.11])
	by gwm.broadridge.com (8.13.8/8.13.8) with ESMTP id p5KFspL41114362
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Mon, 20 Jun 2011 11:54:51 -0400
Received: from JSIPSWEXHA02.bsg.ad.adp.com (jsipswexha02.bsg.ad.adp.com [10.17.69.34]) by jsppsldlpsi01.broadridge.net (RSA Interceptor) for <java-user@lucene.apache.org>; Mon, 20 Jun 2011 11:54:42 -0400
Received: from jscpcwexmaa1.bsg.ad.adp.com ([fe80::882f:16e8:308d:3ef]) by
 JSIPSWEXHA02.bsg.ad.adp.com ([::1]) with mapi; Mon, 20 Jun 2011 11:54:39
 -0400
From: "Hiller, Dean  x66079" <dean.hiller@broadridge.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Mon, 20 Jun 2011 11:54:34 -0400
Subject: any documentation on creating a query without query language
Thread-Topic: any documentation on creating a query without query language
Thread-Index: AcwvYln6XF/BUBqiQNafoIzVoeFHOg==
Message-ID: <08230D4C8E666D479F6DE495A7684DCD0ABA981D@JSCPCWEXMAA1.bsg.ad.adp.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-cr-puzzleid: {5B82F030-9EC2-47FB-B266-2D9E6B503C47}
x-cr-hashedpuzzle: Awi3 BWWi BsWv B3UF B9E9 FPiC F3MN GQza GYPA G0mZ IT02
 Iduh I1sv JvVL J52L
 J6Sb;1;agBhAHYAYQAtAHUAcwBlAHIAQABsAHUAYwBlAG4AZQAuAGEAcABhAGMAaABlAC4AbwByAGcA;Sosha1_v1;7;{5B82F030-9EC2-47FB-B266-2D9E6B503C47};ZABlAGEAbgAuAGgAaQBsAGwAZQByAEAAYgByAG8AYQBkAHIAaQBkAGcAZQAuAGMAbwBtAA==;Mon,
 20 Jun 2011 15:54:34
 GMT;YQBuAHkAIABkAG8AYwB1AG0AZQBuAHQAYQB0AGkAbwBuACAAbwBuACAAYwByAGUAYQB0AGkAbgBnACAAYQAgAHEAdQBlAHIAeQAgAHcAaQB0AGgAbwB1AHQAIABxAHUAZQByAHkAIABsAGEAbgBnAHUAYQBnAGUA
acceptlanguage: en-US
Content-Type: multipart/alternative;
	boundary="_000_08230D4C8E666D479F6DE495A7684DCD0ABA981DJSCPCWEXMAA1bsg_"
MIME-Version: 1.0
X-RSA-Inspected: yes
X-RSA-Classifications: public
X-RSA-Action: allow
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_08230D4C8E666D479F6DE495A7684DCD0ABA981DJSCPCWEXMAA1bsg_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I would like to skip creating the query using the query language.  Our quer=
ies are simple and fixed
Like account =3D :account and strategy=3D:strategy and date > :date

So I would prefer maybe not to use a parser in the future sometime and am r=
eally just wondering how.

For now, I am just going to use the parser to get my stuff done but was jus=
t curious on how to form it manually if I wanted to.
Thanks,
Dean

This message and any attachments are intended only for the use of the add=
ressee and
may contain information that is privileged and confidential. If the reade=
r of the =

message is not the intended recipient or an authorized representative of =
the
intended recipient, you are hereby notified that any dissemination of thi=
s
communication is strictly prohibited. If you have received this communica=
tion in
error, please notify us immediately by e-mail and delete the message and =
any
attachments from your system.
=0D
--_000_08230D4C8E666D479F6DE495A7684DCD0ABA981DJSCPCWEXMAA1bsg_--

From java-user-return-50095-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun 20 17:28:48 2011
Return-Path: <java-user-return-50095-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 51DA46AAD
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 20 Jun 2011 17:28:48 +0000 (UTC)
Received: (qmail 88768 invoked by uid 500); 20 Jun 2011 17:28:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88722 invoked by uid 500); 20 Jun 2011 17:28:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88714 invoked by uid 99); 20 Jun 2011 17:28:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2011 17:28:45 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of r.ventaglio@gmail.com designates 74.125.83.176 as permitted sender)
Received: from [74.125.83.176] (HELO mail-pv0-f176.google.com) (74.125.83.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2011 17:28:38 +0000
Received: by pve37 with SMTP id 37so3543341pve.35
        for <java-user@lucene.apache.org>; Mon, 20 Jun 2011 10:28:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=knToGKKVyH2BUXAPJDjQ/JQENlAhAaJVWGh01RKnkgQ=;
        b=nsvfQuz1dWriUnQGandnrhZx+MEvzXOEAYgRa3y4F7VB9djHvJf852GPacCjzzx+sU
         GHLgKwuOUGm59oGkvDnSs/aChhPBFvkREUrGmpzx0aNymZJw41XnSRda8EIjCfTF4KTM
         C6DeTIq7LFpEEZBd3B/b1qUmmUb/XbFiNWt3U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=QeTnfFXn94Hm9+8MTCeB9G7Nh8vqoCYtC6fbSf5Xx7ah1rmAfWOnf4snNt210KKX8+
         wEUPt0a6Y6NWLGCZSxvME5Rp8RrXN6Z/iMkvc1qI1XyShQF1Z0UcOloX+lg2oJitt4Kx
         RXBaf4YysOyq38b9ttfj9arpFOmNd2/TXTs8g=
Received: by 10.142.63.6 with SMTP id l6mr800389wfa.407.1308590897167; Mon, 20
 Jun 2011 10:28:17 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.142.170.10 with HTTP; Mon, 20 Jun 2011 10:27:57 -0700 (PDT)
In-Reply-To: <4DFF636B.4020401@gmail.com>
References: <4DFF5BEE.3050807@gmail.com> <BANLkTiksq-zenbtEYT2CRhGqzRhvXsTNUA@mail.gmail.com>
 <4DFF636B.4020401@gmail.com>
From: Raf <r.ventaglio@gmail.com>
Date: Mon, 20 Jun 2011 19:27:57 +0200
Message-ID: <BANLkTiksGxs18=ij7VX5kT3y6QwTz_9ywA@mail.gmail.com>
Subject: Re: How to deal with not analyzed fields and analyzed ones in the
 same query
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636e0b95294fda204a6280f35
X-Virus-Checked: Checked by ClamAV on apache.org

--001636e0b95294fda204a6280f35
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

You can simply use a KeywordAnalyzer for your NOT_ANALYZED fields.
This analyzer, in fact, does not modify your input.

Regards,
*Raf*

On Mon, Jun 20, 2011 at 5:12 PM, G.Long <jdevgl@gmail.com> wrote:

> Ok, I'll try this.
>
> But will it work if one of the fields has no analyzers assigned ?
>
> For example field1 is associated with a keyword analyzer, field2 with a
> standardAnalyzer and field3 has no analyzer because it was indexed as
>  Field.Index.NOT_ANALYZED. Is there something to specify in the construct=
or
> of the PerFieldAnalyzerWrapper for the field3 ?
>
> Regards,
> Gary
>
> Le 20/06/2011 16:43, Erick Erickson a =E9crit :
>
>  See PerFieldAnalyzerWrapper, then form your query like
>> field1:word1 OR field2:word1
>>
>> Best
>> Erick
>>
>>
>
> ------------------------------**------------------------------**---------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.**apache.org<java-us=
er-unsubscribe@lucene.apache.org>
> For additional commands, e-mail: java-user-help@lucene.apache.**org<java-=
user-help@lucene.apache.org>
>
>

--001636e0b95294fda204a6280f35--

From java-user-return-50096-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun 20 17:35:01 2011
Return-Path: <java-user-return-50096-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 069DF6343
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 20 Jun 2011 17:35:01 +0000 (UTC)
Received: (qmail 3304 invoked by uid 500); 20 Jun 2011 17:34:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3162 invoked by uid 500); 20 Jun 2011 17:34:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3154 invoked by uid 99); 20 Jun 2011 17:34:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2011 17:34:58 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of r.ventaglio@gmail.com designates 209.85.210.48 as permitted sender)
Received: from [209.85.210.48] (HELO mail-pz0-f48.google.com) (209.85.210.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2011 17:34:51 +0000
Received: by pzk10 with SMTP id 10so5078722pzk.35
        for <java-user@lucene.apache.org>; Mon, 20 Jun 2011 10:34:30 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=8TXrfLV1qfKzUWgFP4o7BkgqASbTA6SgdFRy0P7sCYA=;
        b=S5i3YMzt4pEE/mCw2i8dzFLbK6rSjrXp5PLWc6LQ8/njMT/2FboygguetDcYGOJSiu
         6uoOfCIROPRVoLAqv2ZuWfGzEHqPvRSXAww4cvkioFdmJxkRaLYImEGW8L8Z5FEiAs9f
         z/ggpyfe8FIUz1mfr4xJO/Emel6d0ENk3Ur2w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=qbJ94kpQh3j7z1zfKqgGatrr3ZaoLH6IJyYM3BVNe9ILXoO6OTCI0lOSHgNFGSLPZl
         xvpxQYo1x6r0HVH9QVHXRWCLDRJLbRHAvlxvtfJqqPElRkJVkzmuXmiW6p0MTelA0a7c
         VpPPGYFwNu96vG94R3zE1TUFD+gdG4Sxo7VNs=
Received: by 10.142.63.6 with SMTP id l6mr802245wfa.407.1308591270199; Mon, 20
 Jun 2011 10:34:30 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.142.170.10 with HTTP; Mon, 20 Jun 2011 10:34:10 -0700 (PDT)
In-Reply-To: <08230D4C8E666D479F6DE495A7684DCD0ABA981D@JSCPCWEXMAA1.bsg.ad.adp.com>
References: <08230D4C8E666D479F6DE495A7684DCD0ABA981D@JSCPCWEXMAA1.bsg.ad.adp.com>
From: Raf <r.ventaglio@gmail.com>
Date: Mon, 20 Jun 2011 19:34:10 +0200
Message-ID: <BANLkTim4ruL7TMx4qUn3Fi=fLv25KnF1FQ@mail.gmail.com>
Subject: Re: any documentation on creating a query without query language
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636e0b952d1019604a6282537
X-Virus-Checked: Checked by ClamAV on apache.org

--001636e0b952d1019604a6282537
Content-Type: text/plain; charset=ISO-8859-1

You can always "create" your query by hand, using the various Query objects.

For example:
   BooleanQuery bq = new BooleanQuery();
   bq.add(new TermQuery(new Term("account", myAccount)), Occur.MUST);
   bq.add(new TermQuery(new Term("strategy", myStrategy)), Occur.MUST);
   bq.add(new TermQuery(new Term("account", myAccount)), Occur.MUST);
   bq.add(new TermRangeQuery("date", minDate, maxDate, false, false),
Occur.MUST);
and so on.

Bye
*Raf*



On Mon, Jun 20, 2011 at 5:54 PM, Hiller, Dean x66079 <
dean.hiller@broadridge.com> wrote:

> I would like to skip creating the query using the query language.  Our
> queries are simple and fixed
> Like account = :account and strategy=:strategy and date > :date
>
> So I would prefer maybe not to use a parser in the future sometime and am
> really just wondering how.
>
> For now, I am just going to use the parser to get my stuff done but was
> just curious on how to form it manually if I wanted to.
> Thanks,
> Dean
>
> This message and any attachments are intended only for the use of the
> addressee and
> may contain information that is privileged and confidential. If the reader
> of the
> message is not the intended recipient or an authorized representative of
> the
> intended recipient, you are hereby notified that any dissemination of this
> communication is strictly prohibited. If you have received this
> communication in
> error, please notify us immediately by e-mail and delete the message and
> any
> attachments from your system.
>
>

--001636e0b952d1019604a6282537--

From java-user-return-50097-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun 20 18:27:50 2011
Return-Path: <java-user-return-50097-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E8FC96CD9
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 20 Jun 2011 18:27:49 +0000 (UTC)
Received: (qmail 99731 invoked by uid 500); 20 Jun 2011 18:27:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99691 invoked by uid 500); 20 Jun 2011 18:27:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99683 invoked by uid 99); 20 Jun 2011 18:27:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2011 18:27:47 +0000
X-ASF-Spam-Status: No, hits=-0.1 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dean.hiller@broadridge.com designates 64.18.2.8 as permitted sender)
Received: from [64.18.2.8] (HELO exprod7og118.obsmtp.com) (64.18.2.8)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2011 18:27:38 +0000
Received: from gwm.broadridge.com ([167.212.2.180]) (using TLSv1) by exprod7ob118.postini.com ([64.18.6.12]) with SMTP
	ID DSNKTf+RBIZIlz+iKMikNDI4dv7Fa2hv+W+8@postini.com; Mon, 20 Jun 2011 11:27:17 PDT
Received: from jsppsldlpsi02.broadridge.net ([10.98.54.12])
	by gwm.broadridge.com (8.13.8/8.13.8) with ESMTP id p5KIRFKc938108
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Mon, 20 Jun 2011 14:27:15 -0400
Received: from JSIPSWEXHA01.bsg.ad.adp.com (jsipswexha01.bsg.ad.adp.com [10.17.69.24]) by jsppsldlpsi02.broadridge.net (RSA Interceptor) for <java-user@lucene.apache.org>; Mon, 20 Jun 2011 14:27:11 -0400
Received: from jscpcwexmaa1.bsg.ad.adp.com ([fe80::882f:16e8:308d:3ef]) by
 JSIPSWEXHA01.bsg.ad.adp.com ([::1]) with mapi; Mon, 20 Jun 2011 14:27:04
 -0400
From: "Hiller, Dean  x66079" <dean.hiller@broadridge.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Mon, 20 Jun 2011 14:26:59 -0400
Subject: anyway to store value as bytes?
Thread-Topic: anyway to store value as bytes?
Thread-Index: Acwvd6TGFBgXi9I8RJCIdxx0QG01HA==
Message-ID: <08230D4C8E666D479F6DE495A7684DCD0ABA9912@JSCPCWEXMAA1.bsg.ad.adp.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-cr-puzzleid: {9E3DF8B9-EEC9-428D-9790-2AF1E8C83801}
x-cr-hashedpuzzle: AgbD AoWO BceJ Bn/k CxAw DI4n DyOz EkpZ FGAb Fk3z GNCp
 Gca1 IiHZ I9gb JPSM
 KcV3;1;agBhAHYAYQAtAHUAcwBlAHIAQABsAHUAYwBlAG4AZQAuAGEAcABhAGMAaABlAC4AbwByAGcA;Sosha1_v1;7;{9E3DF8B9-EEC9-428D-9790-2AF1E8C83801};ZABlAGEAbgAuAGgAaQBsAGwAZQByAEAAYgByAG8AYQBkAHIAaQBkAGcAZQAuAGMAbwBtAA==;Mon,
 20 Jun 2011 18:26:59
 GMT;YQBuAHkAdwBhAHkAIAB0AG8AIABzAHQAbwByAGUAIAB2AGEAbAB1AGUAIABhAHMAIABiAHkAdABlAHMAPwA=
acceptlanguage: en-US
Content-Type: multipart/alternative;
	boundary="_000_08230D4C8E666D479F6DE495A7684DCD0ABA9912JSCPCWEXMAA1bsg_"
MIME-Version: 1.0
X-RSA-Inspected: yes
X-RSA-Classifications: public
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_08230D4C8E666D479F6DE495A7684DCD0ABA9912JSCPCWEXMAA1bsg_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I see the api in Lucene is new Field(String, String, Store, Index)

Is there anyway to store one of the fields as byte[]?  Specifically the val=
ue I am looking up I would like it to be byte[] instead of String.  All my =
other ones are String anyways.

Thanks,
Dean


This message and any attachments are intended only for the use of the add=
ressee and
may contain information that is privileged and confidential. If the reade=
r of the =

message is not the intended recipient or an authorized representative of =
the
intended recipient, you are hereby notified that any dissemination of thi=
s
communication is strictly prohibited. If you have received this communica=
tion in
error, please notify us immediately by e-mail and delete the message and =
any
attachments from your system.
=0D
--_000_08230D4C8E666D479F6DE495A7684DCD0ABA9912JSCPCWEXMAA1bsg_--

From java-user-return-50098-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun 20 20:20:49 2011
Return-Path: <java-user-return-50098-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 96FC8634C
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 20 Jun 2011 20:20:49 +0000 (UTC)
Received: (qmail 30411 invoked by uid 500); 20 Jun 2011 20:20:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30375 invoked by uid 500); 20 Jun 2011 20:20:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30367 invoked by uid 99); 20 Jun 2011 20:20:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2011 20:20:46 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sokolov@ifactory.com designates 68.236.111.2 as permitted sender)
Received: from [68.236.111.2] (HELO camelot.ifactory.com) (68.236.111.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2011 20:20:41 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by camelot.ifactory.com (Postfix) with ESMTP id EDEAB1920003
	for <java-user@lucene.apache.org>; Mon, 20 Jun 2011 16:20:18 -0400 (EDT)
Received: from camelot.ifactory.com ([127.0.0.1])
	by localhost (camelot.ifactory.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id EawdB3z6enNN for <java-user@lucene.apache.org>;
	Mon, 20 Jun 2011 16:20:05 -0400 (EDT)
Received: from aix.ifactory.com (aix.ifactory.com [192.168.10.27])
	by camelot.ifactory.com (Postfix) with ESMTPA id 77A2836708EF
	for <java-user@lucene.apache.org>; Mon, 20 Jun 2011 16:20:05 -0400 (EDT)
Message-ID: <4DFFAB75.1040306@ifactory.com>
Date: Mon, 20 Jun 2011 16:20:05 -0400
From: Mike Sokolov <sokolov@ifactory.com>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.1.9) Gecko/20100317 Lightning/1.0b1 Thunderbird/3.0.4
MIME-Version: 1.0
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: highlighting performance
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Our apps use highlighting, and I expect that highlighting is an 
expensive operation since it requires processing the text of the 
documents, but I ran a test and was surprised just how expensive it is.  
I made a test index with three fields: path, modified, and contents.  I 
made the index using org.apache.lucene.demo.IndexFiles modified so that 
the contents field is stored and analyzed:

           doc.add(new Field("contents", false, buf.toString(),
                   Store.YES, Index.ANALYZED, 
TermVector.WITH_POSITIONS_OFFSETS));

There are about 8000 documents in the index, and the contents field 
averages around 7500 bytes.  The total index directory size is about 242M.

I ran a modified version of the demo.SearchFiles class that doesn't 
print anything out (printing results takes most of the time for faster 
queries), and runs random queries drawn from the text of the documents: 
these are a mix of (mostly) term queries, and about 20% phrase queries 
(that are phrases from the text).

I compared a few cases: no field access, un-highlighted retrieval, 
highlighting, Highlighter and FastVectorHighlighter, always asking for 
10 top scoring docs per query, and running at least 1000 queries for 
each case.

No field access at all gets about 7000 qps; basically we just call 
searcher.search(query, 10)

Then there is a big cost for retrieving the stored documents from the index:

Retrieving each document (calling search.doc(docID)) and the path field 
only (a small field) gets about 250 qps

As a comparison, if I don't store the contents field in the index (and 
don't retrieve it at all), I get similar performance to the no retrieval 
case (around 7000 qps).  OK - so there is a fair amount of I/O required 
to retrieve the stored doc; this may be unavoidable, although do 
consider that for highlighting only a small portion of the doc may 
ultimately be required.

Then another big penalty is paid for highlighting:

Highlighter gets about 60 qps

And finally I am really mystified about this one:

FastVectorHighlighter gets about 20 qps. There is a lot of variance here 
(say 9-44 qps), although always worse than Highlighter.

If these results hold up I'll be astonished, since they imply:

(1) FVH is not fast
(2) Highlighting consumes most processing time  (around 80%) in the best 
case, as compared to just retrieving un-highlighted documents.

and the follow on is that at least for users that need highlighting, 
there is hardly any point in optimizing anything else!

I thought maybe FVH required a lot of memory, so I changed the -Xmx512m 
(from the default: 64m I think), but this had no effect.

I also tried optimizing the index, and although this improved query 
performance somewhat across the board, it actually accentuated the cost 
of highlighting since the most marked improvement was in the basic 
unhighlighted query.

Here is what the highlighting looks like:

For FVH we allocate a single SimpleFragsListBuilder, 
SimpleFragmentBuilder, preTags[1], postTags[1] and DefaultEncoder so 
these don't have to be created for each query. We also cache the 
FastVectorHighlighter itself, and we call:

highlighter.getBestFragment(highlighter.getFieldQuery(query), 
searcher.getIndexReader(), hits[i].doc, "contents", 40, flb, fb, 
preTags, postTags, encoder);

once for each result.

In the Highlighter case, we also cache the Highlighter and call:

highlighter.getBestFragment(analyzer, "contents", doc.get("contents"));

does this performance profile match up with your expectations?  Did I do 
something stupid? Please let me know if I can provide more info.  I'm 
considering what can be done to speed up highlighting, but don't want to 
go off half-cocked..

-- 
Michael Sokolov
Engineering Director
www.ifactory.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50099-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun 20 22:25:13 2011
Return-Path: <java-user-return-50099-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0DB4E6297
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 20 Jun 2011 22:25:13 +0000 (UTC)
Received: (qmail 44835 invoked by uid 500); 20 Jun 2011 22:25:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44785 invoked by uid 500); 20 Jun 2011 22:25:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44777 invoked by uid 99); 20 Jun 2011 22:25:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2011 22:25:10 +0000
X-ASF-Spam-Status: No, hits=-0.1 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dean.hiller@broadridge.com designates 64.18.2.165 as permitted sender)
Received: from [64.18.2.165] (HELO exprod7og106.obsmtp.com) (64.18.2.165)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2011 22:25:01 +0000
Received: from gwm.broadridge.com ([167.212.2.254]) (using TLSv1) by exprod7ob106.postini.com ([64.18.6.12]) with SMTP
	ID DSNKTf/Ip/naTnUrWWqRieBH9Ziw67kz5Apn@postini.com; Mon, 20 Jun 2011 15:24:40 PDT
Received: from jsppsldlpsi01.broadridge.net ([10.98.54.11])
	by gwm.broadridge.com (8.13.8+Sun/8.13.8) with ESMTP id p5KMOZBF000500
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Mon, 20 Jun 2011 18:24:38 -0400 (EDT)
Received: from JSIPSWEXHA02.bsg.ad.adp.com (jsipswexha02.bsg.ad.adp.com [10.17.69.34]) by jsppsldlpsi01.broadridge.net (RSA Interceptor) for <java-user@lucene.apache.org>; Mon, 20 Jun 2011 18:24:27 -0400
Received: from jscpcwexmaa1.bsg.ad.adp.com ([fe80::882f:16e8:308d:3ef]) by
 JSIPSWEXHA02.bsg.ad.adp.com ([::1]) with mapi; Mon, 20 Jun 2011 18:24:25
 -0400
From: "Hiller, Dean  x66079" <dean.hiller@broadridge.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Mon, 20 Jun 2011 18:24:21 -0400
Subject: how to do something like sql in () clause
Thread-Topic: how to do something like sql in () clause
Thread-Index: AcwvmM1V3T2hG15/SXuCDBRy+61M7w==
Message-ID: <08230D4C8E666D479F6DE495A7684DCD0AC2EA14@JSCPCWEXMAA1.bsg.ad.adp.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-cr-puzzleid: {2E12083F-FC22-45FC-98D8-34CF93B1BA4C}
x-cr-hashedpuzzle: Ntk= BZ/G CBrf EoWH Ezi7 FJqP FfPx F5Hj GVXx Goc5 G2WZ
 G/rJ Jbx4 JhMA J1iX
 KeOE;1;agBhAHYAYQAtAHUAcwBlAHIAQABsAHUAYwBlAG4AZQAuAGEAcABhAGMAaABlAC4AbwByAGcA;Sosha1_v1;7;{2E12083F-FC22-45FC-98D8-34CF93B1BA4C};ZABlAGEAbgAuAGgAaQBsAGwAZQByAEAAYgByAG8AYQBkAHIAaQBkAGcAZQAuAGMAbwBtAA==;Mon,
 20 Jun 2011 22:24:21
 GMT;aABvAHcAIAB0AG8AIABkAG8AIABzAG8AbQBlAHQAaABpAG4AZwAgAGwAaQBrAGUAIABzAHEAbAAgAGkAbgAgACgAKQAgAGMAbABhAHUAcwBlAA==
acceptlanguage: en-US
Content-Type: multipart/alternative;
	boundary="_000_08230D4C8E666D479F6DE495A7684DCD0AC2EA14JSCPCWEXMAA1bsg_"
MIME-Version: 1.0
X-RSA-Inspected: yes
X-RSA-Classifications: public
X-RSA-Action: allow
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_08230D4C8E666D479F6DE495A7684DCD0AC2EA14JSCPCWEXMAA1bsg_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I need to do something like a lucene query with

Where accountId in ( 1, 2, 3, 4)

Is there a way to do that in Lucene Query language?

Thanks,
Dean

This message and any attachments are intended only for the use of the add=
ressee and
may contain information that is privileged and confidential. If the reade=
r of the =

message is not the intended recipient or an authorized representative of =
the
intended recipient, you are hereby notified that any dissemination of thi=
s
communication is strictly prohibited. If you have received this communica=
tion in
error, please notify us immediately by e-mail and delete the message and =
any
attachments from your system.
=0D
--_000_08230D4C8E666D479F6DE495A7684DCD0AC2EA14JSCPCWEXMAA1bsg_--

From java-user-return-50100-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun 20 22:34:50 2011
Return-Path: <java-user-return-50100-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 92C536C8C
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 20 Jun 2011 22:34:50 +0000 (UTC)
Received: (qmail 69304 invoked by uid 500); 20 Jun 2011 22:34:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69268 invoked by uid 500); 20 Jun 2011 22:34:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69260 invoked by uid 99); 20 Jun 2011 22:34:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2011 22:34:48 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dean.hiller@broadridge.com designates 64.18.2.159 as permitted sender)
Received: from [64.18.2.159] (HELO exprod7og103.obsmtp.com) (64.18.2.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2011 22:34:40 +0000
Received: from gwm.broadridge.com ([167.212.2.254]) (using TLSv1) by exprod7ob103.postini.com ([64.18.6.12]) with SMTP
	ID DSNKTf/K6smR++hYqYBRm8HaSCyLvqBfdVv9@postini.com; Mon, 20 Jun 2011 15:34:19 PDT
Received: from jsppsldlpsi01.broadridge.net ([10.98.54.11])
	by gwm.broadridge.com (8.13.8+Sun/8.13.8) with ESMTP id p5KMYHFX001950
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Mon, 20 Jun 2011 18:34:17 -0400 (EDT)
Received: from JSIPSWEXHA02.bsg.ad.adp.com (jsipswexha02.bsg.ad.adp.com [10.17.69.34]) by jsppsldlpsi01.broadridge.net (RSA Interceptor) for <java-user@lucene.apache.org>; Mon, 20 Jun 2011 18:34:13 -0400
Received: from jscpcwexmaa1.bsg.ad.adp.com ([fe80::882f:16e8:308d:3ef]) by
 JSIPSWEXHA02.bsg.ad.adp.com ([::1]) with mapi; Mon, 20 Jun 2011 18:34:11
 -0400
From: "Hiller, Dean  x66079" <dean.hiller@broadridge.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Mon, 20 Jun 2011 18:34:07 -0400
Subject: RE: any documentation on creating a query without query language
Thread-Topic: any documentation on creating a query without query language
Thread-Index: AcwvcGR0jJ2JpgcgTPeNF5VpZgCWGgAKcMVQ
Message-ID: <08230D4C8E666D479F6DE495A7684DCD0AC2EA1C@JSCPCWEXMAA1.bsg.ad.adp.com>
References: <08230D4C8E666D479F6DE495A7684DCD0ABA981D@JSCPCWEXMAA1.bsg.ad.adp.com>
 <BANLkTim4ruL7TMx4qUn3Fi=fLv25KnF1FQ@mail.gmail.com>
In-Reply-To: <BANLkTim4ruL7TMx4qUn3Fi=fLv25KnF1FQ@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-RSA-Inspected: yes
X-RSA-Classifications: public
X-RSA-Action: allow
X-Virus-Checked: Checked by ClamAV on apache.org

Sweeeeet, thanks,
Dean

-----Original Message-----
From: Raf [mailto:r.ventaglio@gmail.com]=20
Sent: Monday, June 20, 2011 11:34 AM
To: java-user@lucene.apache.org
Subject: Re: any documentation on creating a query without query language

You can always "create" your query by hand, using the various Query objects=
.

For example:
   BooleanQuery bq =3D new BooleanQuery();
   bq.add(new TermQuery(new Term("account", myAccount)), Occur.MUST);
   bq.add(new TermQuery(new Term("strategy", myStrategy)), Occur.MUST);
   bq.add(new TermQuery(new Term("account", myAccount)), Occur.MUST);
   bq.add(new TermRangeQuery("date", minDate, maxDate, false, false),
Occur.MUST);
and so on.

Bye
*Raf*



On Mon, Jun 20, 2011 at 5:54 PM, Hiller, Dean x66079 <
dean.hiller@broadridge.com> wrote:

> I would like to skip creating the query using the query language.  Our
> queries are simple and fixed
> Like account =3D :account and strategy=3D:strategy and date > :date
>
> So I would prefer maybe not to use a parser in the future sometime and am
> really just wondering how.
>
> For now, I am just going to use the parser to get my stuff done but was
> just curious on how to form it manually if I wanted to.
> Thanks,
> Dean
>
> This message and any attachments are intended only for the use of the
> addressee and
> may contain information that is privileged and confidential. If the reade=
r
> of the
> message is not the intended recipient or an authorized representative of
> the
> intended recipient, you are hereby notified that any dissemination of thi=
s
> communication is strictly prohibited. If you have received this
> communication in
> error, please notify us immediately by e-mail and delete the message and
> any
> attachments from your system.
>
>
This message and any attachments are intended only for the use of the add=
ressee and
may contain information that is privileged and confidential. If the reade=
r of the =

message is not the intended recipient or an authorized representative of =
the
intended recipient, you are hereby notified that any dissemination of thi=
s
communication is strictly prohibited. If you have received this communica=
tion in
error, please notify us immediately by e-mail and delete the message and =
any
attachments from your system.
=0D

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50101-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun 20 23:50:11 2011
Return-Path: <java-user-return-50101-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C9561691E
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 20 Jun 2011 23:50:11 +0000 (UTC)
Received: (qmail 48338 invoked by uid 500); 20 Jun 2011 23:50:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48304 invoked by uid 500); 20 Jun 2011 23:50:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48296 invoked by uid 99); 20 Jun 2011 23:50:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2011 23:50:09 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dotsid@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2011 23:50:01 +0000
Received: by wyb36 with SMTP id 36so1506876wyb.35
        for <java-user@lucene.apache.org>; Mon, 20 Jun 2011 16:49:40 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:content-type:mime-version:subject:from
         :in-reply-to:date:content-transfer-encoding:message-id:references:to
         :x-mailer;
        bh=PkUNCQHKOBQBLj+ie2xdPOlb6NNdC9PmVI7VnXMK2oQ=;
        b=d1mXZavXYOgLIWgfOMq1fKpzvsj6rJcNz1Ludlcff/C/2L2+EkOoALMj52LLhnx0RS
         5KjmdAcEKPqMaXuduMwLnwl/cPwTTPV4c4OW8or8dO/zm2X6nFB9zQOUT5d/4MfSu5Qz
         mJLljOneveCeIb9/fgXkKrudjxMKb3TbUNKAc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        b=UeXXU5V5A2Wgj4yc+9pWv106Ey3uEGfzFmqmrHLd3LTijulQxdn+fW3YYkO8LB2gmp
         hXAffxNBC5MhNXP7mVEibYvpCkmh7B7NOYQRopgoO/5S9fAkkn5pjk5Dum8FQDXXwzTs
         Tad4AGVbndQqk9PouXiQev0Mllf8FPsbqwwrw=
Received: by 10.216.59.16 with SMTP id r16mr5579223wec.25.1308613780535;
        Mon, 20 Jun 2011 16:49:40 -0700 (PDT)
Received: from [172.16.31.9] (gw.farpost.ru [80.92.161.1])
        by mx.google.com with ESMTPS id d7sm3179889wek.45.2011.06.20.16.49.38
        (version=TLSv1/SSLv3 cipher=OTHER);
        Mon, 20 Jun 2011 16:49:39 -0700 (PDT)
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1084)
Subject: Re: how to do something like sql in () clause
From: Denis Bazhenov <dotsid@gmail.com>
In-Reply-To: <08230D4C8E666D479F6DE495A7684DCD0AC2EA14@JSCPCWEXMAA1.bsg.ad.adp.com>
Date: Tue, 21 Jun 2011 10:49:34 +1100
Content-Transfer-Encoding: quoted-printable
Message-Id: <F9A9EB6E-86D8-4146-82AC-6D6FB94A151D@gmail.com>
References: <08230D4C8E666D479F6DE495A7684DCD0AC2EA14@JSCPCWEXMAA1.bsg.ad.adp.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1084)

You could use BooleanQuery with Occur.SHOULD quantificator

=
http://lucene.apache.org/java/3_0_3/api/core/org/apache/lucene/search/Bool=
eanClause.Occur.html#SHOULD

On Jun 21, 2011, at 9:24 AM, Hiller, Dean x66079 wrote:

> I need to do something like a lucene query with
>=20
> Where accountId in ( 1, 2, 3, 4)
>=20
> Is there a way to do that in Lucene Query language?
>=20
> Thanks,
> Dean
>=20
> This message and any attachments are intended only for the use of the =
addressee and
> may contain information that is privileged and confidential. If the =
reader of the=20
> message is not the intended recipient or an authorized representative =
of the
> intended recipient, you are hereby notified that any dissemination of =
this
> communication is strictly prohibited. If you have received this =
communication in
> error, please notify us immediately by e-mail and delete the message =
and any
> attachments from your system.
>=20

---
Denis Bazhenov <dotsid@gmail.com>






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50102-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun 21 00:02:05 2011
Return-Path: <java-user-return-50102-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1F0D3678C
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 21 Jun 2011 00:02:05 +0000 (UTC)
Received: (qmail 56029 invoked by uid 500); 21 Jun 2011 00:02:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55989 invoked by uid 500); 21 Jun 2011 00:02:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55981 invoked by uid 99); 21 Jun 2011 00:02:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2011 00:02:02 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dean.hiller@broadridge.com designates 64.18.2.167 as permitted sender)
Received: from [64.18.2.167] (HELO exprod7og107.obsmtp.com) (64.18.2.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2011 00:01:53 +0000
Received: from gwm.broadridge.com ([167.212.2.254]) (using TLSv1) by exprod7ob107.postini.com ([64.18.6.12]) with SMTP
	ID DSNKTf/fW9ipFKgWOijBtCryOruRxgbWIdqs@postini.com; Mon, 20 Jun 2011 17:01:33 PDT
Received: from jsppsldlpsi02.broadridge.net ([10.98.54.12])
	by gwm.broadridge.com (8.13.8+Sun/8.13.8) with ESMTP id p5L01UU9010001
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Mon, 20 Jun 2011 20:01:30 -0400 (EDT)
Received: from JSIPSWEXHA01.bsg.ad.adp.com (jsipswexha01.bsg.ad.adp.com [10.17.69.24]) by jsppsldlpsi02.broadridge.net (RSA Interceptor) for <java-user@lucene.apache.org>; Mon, 20 Jun 2011 20:01:27 -0400
Received: from jscpcwexmaa1.bsg.ad.adp.com ([fe80::882f:16e8:308d:3ef]) by
 JSIPSWEXHA01.bsg.ad.adp.com ([::1]) with mapi; Mon, 20 Jun 2011 20:01:21
 -0400
From: "Hiller, Dean  x66079" <dean.hiller@broadridge.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Mon, 20 Jun 2011 20:01:19 -0400
Subject: RE: how to do something like sql in () clause
Thread-Topic: how to do something like sql in () clause
Thread-Index: AcwvpMyeRxtmb6ObTXaHB/ML0/RTjgAAXekQ
Message-ID: <08230D4C8E666D479F6DE495A7684DCD0AC2EA42@JSCPCWEXMAA1.bsg.ad.adp.com>
References: <08230D4C8E666D479F6DE495A7684DCD0AC2EA14@JSCPCWEXMAA1.bsg.ad.adp.com>
 <F9A9EB6E-86D8-4146-82AC-6D6FB94A151D@gmail.com>
In-Reply-To: <F9A9EB6E-86D8-4146-82AC-6D6FB94A151D@gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-RSA-Inspected: yes
X-RSA-Classifications: public
X-Virus-Checked: Checked by ClamAV on apache.org

But the issue is that it MUST be 1, OR MUST be 2 so does that still work?

Also, how do you write that in the query syntax?

Thanks,
Dean

-----Original Message-----
From: Denis Bazhenov [mailto:dotsid@gmail.com]=20
Sent: Monday, June 20, 2011 5:50 PM
To: java-user@lucene.apache.org
Subject: Re: how to do something like sql in () clause

You could use BooleanQuery with Occur.SHOULD quantificator

http://lucene.apache.org/java/3_0_3/api/core/org/apache/lucene/search/Boole=
anClause.Occur.html#SHOULD

On Jun 21, 2011, at 9:24 AM, Hiller, Dean x66079 wrote:

> I need to do something like a lucene query with
>=20
> Where accountId in ( 1, 2, 3, 4)
>=20
> Is there a way to do that in Lucene Query language?
>=20
> Thanks,
> Dean
>=20
> This message and any attachments are intended only for the use of the add=
ressee and
> may contain information that is privileged and confidential. If the reade=
r of the=20
> message is not the intended recipient or an authorized representative of =
the
> intended recipient, you are hereby notified that any dissemination of thi=
s
> communication is strictly prohibited. If you have received this communica=
tion in
> error, please notify us immediately by e-mail and delete the message and =
any
> attachments from your system.
>=20

---
Denis Bazhenov <dotsid@gmail.com>






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

This message and any attachments are intended only for the use of the add=
ressee and
may contain information that is privileged and confidential. If the reade=
r of the =

message is not the intended recipient or an authorized representative of =
the
intended recipient, you are hereby notified that any dissemination of thi=
s
communication is strictly prohibited. If you have received this communica=
tion in
error, please notify us immediately by e-mail and delete the message and =
any
attachments from your system.
=0D

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50103-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun 21 00:22:12 2011
Return-Path: <java-user-return-50103-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 156BD6D70
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 21 Jun 2011 00:22:12 +0000 (UTC)
Received: (qmail 75794 invoked by uid 500); 21 Jun 2011 00:22:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75751 invoked by uid 500); 21 Jun 2011 00:22:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75743 invoked by uid 99); 21 Jun 2011 00:22:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2011 00:22:09 +0000
X-ASF-Spam-Status: No, hits=0.0 required=5.0
	tests=SPF_PASS,T_FRT_ADULT2
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of koji@r.email.ne.jp designates 202.224.39.197 as permitted sender)
Received: from [202.224.39.197] (HELO mail1.asahi-net.or.jp) (202.224.39.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2011 00:22:01 +0000
Received: from Koji-Sekiguchi-no-MacBook-Pro.local (w244069.ppp.asahi-net.or.jp [121.1.244.69])
	by mail1.asahi-net.or.jp (Postfix) with ESMTP id A2850E9632
	for <java-user@lucene.apache.org>; Tue, 21 Jun 2011 09:21:39 +0900 (JST)
Message-ID: <4DFFE413.4010109@r.email.ne.jp>
Date: Tue, 21 Jun 2011 09:21:39 +0900
From: Koji Sekiguchi <koji@r.email.ne.jp>
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; ja-JP-mac; rv:1.9.2.17) Gecko/20110414 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: highlighting performance
References: <4DFFAB75.1040306@ifactory.com>
In-Reply-To: <4DFFAB75.1040306@ifactory.com>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Mike,

FVH used to be faster for large docs. I wrote FVH section for Lucene in Action and it said:

In contrib/benchmark (covered in appendix C), theres an algorithm
file called highlight-vs-vector-highlight.alg that lets you see the difference
between two highlighters in processing time. As of version 2.9, with modern hardware,
that algorithm shows that FastVectorHighlighter is about two and a half times faster
than Highlighter.

The number was for Lucene 2.9 age and Wikipedia data, maybe different today.

Anyway, thank you for sharing interesting result!

koji
-- 
http://www.rondhuit.com/en/

(11/06/21 5:20), Mike Sokolov wrote:
> Our apps use highlighting, and I expect that highlighting is an expensive operation since it
> requires processing the text of the documents, but I ran a test and was surprised just how expensive
> it is. I made a test index with three fields: path, modified, and contents. I made the index using
> org.apache.lucene.demo.IndexFiles modified so that the contents field is stored and analyzed:
>
> doc.add(new Field("contents", false, buf.toString(),
> Store.YES, Index.ANALYZED, TermVector.WITH_POSITIONS_OFFSETS));
>
> There are about 8000 documents in the index, and the contents field averages around 7500 bytes. The
> total index directory size is about 242M.
>
> I ran a modified version of the demo.SearchFiles class that doesn't print anything out (printing
> results takes most of the time for faster queries), and runs random queries drawn from the text of
> the documents: these are a mix of (mostly) term queries, and about 20% phrase queries (that are
> phrases from the text).
>
> I compared a few cases: no field access, un-highlighted retrieval, highlighting, Highlighter and
> FastVectorHighlighter, always asking for 10 top scoring docs per query, and running at least 1000
> queries for each case.
>
> No field access at all gets about 7000 qps; basically we just call searcher.search(query, 10)
>
> Then there is a big cost for retrieving the stored documents from the index:
>
> Retrieving each document (calling search.doc(docID)) and the path field only (a small field) gets
> about 250 qps
>
> As a comparison, if I don't store the contents field in the index (and don't retrieve it at all), I
> get similar performance to the no retrieval case (around 7000 qps). OK - so there is a fair amount
> of I/O required to retrieve the stored doc; this may be unavoidable, although do consider that for
> highlighting only a small portion of the doc may ultimately be required.
>
> Then another big penalty is paid for highlighting:
>
> Highlighter gets about 60 qps
>
> And finally I am really mystified about this one:
>
> FastVectorHighlighter gets about 20 qps. There is a lot of variance here (say 9-44 qps), although
> always worse than Highlighter.
>
> If these results hold up I'll be astonished, since they imply:
>
> (1) FVH is not fast
> (2) Highlighting consumes most processing time (around 80%) in the best case, as compared to just
> retrieving un-highlighted documents.
>
> and the follow on is that at least for users that need highlighting, there is hardly any point in
> optimizing anything else!
>
> I thought maybe FVH required a lot of memory, so I changed the -Xmx512m (from the default: 64m I
> think), but this had no effect.
>
> I also tried optimizing the index, and although this improved query performance somewhat across the
> board, it actually accentuated the cost of highlighting since the most marked improvement was in the
> basic unhighlighted query.
>
> Here is what the highlighting looks like:
>
> For FVH we allocate a single SimpleFragsListBuilder, SimpleFragmentBuilder, preTags[1], postTags[1]
> and DefaultEncoder so these don't have to be created for each query. We also cache the
> FastVectorHighlighter itself, and we call:
>
> highlighter.getBestFragment(highlighter.getFieldQuery(query), searcher.getIndexReader(),
> hits[i].doc, "contents", 40, flb, fb, preTags, postTags, encoder);
>
> once for each result.
>
> In the Highlighter case, we also cache the Highlighter and call:
>
> highlighter.getBestFragment(analyzer, "contents", doc.get("contents"));
>
> does this performance profile match up with your expectations? Did I do something stupid? Please let
> me know if I can provide more info. I'm considering what can be done to speed up highlighting, but
> don't want to go off half-cocked..
>




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50104-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun 21 00:27:50 2011
Return-Path: <java-user-return-50104-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 820A06E59
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 21 Jun 2011 00:27:50 +0000 (UTC)
Received: (qmail 81584 invoked by uid 500); 21 Jun 2011 00:27:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81538 invoked by uid 500); 21 Jun 2011 00:27:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81530 invoked by uid 99); 21 Jun 2011 00:27:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2011 00:27:48 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dotsid@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2011 00:27:40 +0000
Received: by wyb36 with SMTP id 36so1528493wyb.35
        for <java-user@lucene.apache.org>; Mon, 20 Jun 2011 17:27:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:from:mime-version:content-type:subject:date
         :in-reply-to:to:references:message-id:x-mailer;
        bh=vU/3UPfC63RCrS8XmhQ5V6Ess2s/M6Q//AmOSKgWd00=;
        b=reX4f3YAFTMRk+DRFSEkUKMeyaLH5YupxurfW1L3AHXuAAc3Iuggpw+kgJQ4ZabDvO
         54u5gTGCftEVOWlJpbHVewzWbr/1MlQ3qibOcVx7Lu2VaT8AR23cSwo1x8DLolpnXd7l
         YAnTM3onETRuJ3MFYC6DHx0lqnBYcLBJaQWYo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:mime-version:content-type:subject:date:in-reply-to:to
         :references:message-id:x-mailer;
        b=mF3NyTb2fq9KYfo6ZaDVCT4HnTTFOLkOfCJIZ8KmdaDrgBUw2RfvA/RqBjCiU1Htrc
         CJy8d79klg1V9YfMj2x5Su7clqb1oGBhgiJ9cuJdyN7/2CD3IWfWIrWrUB8eRgSEoGpD
         19LhLs8qVnxAy8S76ZTO5c93NDM84nDKDYk0c=
Received: by 10.227.155.78 with SMTP id r14mr1579381wbw.100.1308616039104;
        Mon, 20 Jun 2011 17:27:19 -0700 (PDT)
Received: from [172.16.31.9] (gw.farpost.ru [80.92.161.1])
        by mx.google.com with ESMTPS id ge4sm3584697wbb.13.2011.06.20.17.27.16
        (version=TLSv1/SSLv3 cipher=OTHER);
        Mon, 20 Jun 2011 17:27:18 -0700 (PDT)
From: Denis Bazhenov <dotsid@gmail.com>
Mime-Version: 1.0 (Apple Message framework v1084)
Content-Type: multipart/alternative; boundary=Apple-Mail-1--403649029
Subject: Re: how to do something like sql in () clause
Date: Tue, 21 Jun 2011 11:27:12 +1100
In-Reply-To: <08230D4C8E666D479F6DE495A7684DCD0AC2EA42@JSCPCWEXMAA1.bsg.ad.adp.com>
To: java-user@lucene.apache.org
References: <08230D4C8E666D479F6DE495A7684DCD0AC2EA14@JSCPCWEXMAA1.bsg.ad.adp.com> <F9A9EB6E-86D8-4146-82AC-6D6FB94A151D@gmail.com> <08230D4C8E666D479F6DE495A7684DCD0AC2EA42@JSCPCWEXMAA1.bsg.ad.adp.com>
Message-Id: <C8C5B9B6-0CD9-4B17-817C-7DA8245AF43A@gmail.com>
X-Mailer: Apple Mail (2.1084)

--Apple-Mail-1--403649029
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=us-ascii

SQL IN operator behaves as OR operator. So as Occur.SHOULD does. It will =
match document only if _one or more_ of the child queries match.

BooleanQuery query =3D new BooleanQuery();
query.add(new TermQuery(new Term("accountId", "1")), Occur.SHOULD);
query.add(new TermQuery(new Term("accountId", "2")), Occur.SHOULD);
query.add(new TermQuery(new Term("accountId", "3")), Occur.SHOULD);

On Jun 21, 2011, at 11:01 AM, Hiller, Dean x66079 wrote:

> But the issue is that it MUST be 1, OR MUST be 2 so does that still =
work?
>=20
> Also, how do you write that in the query syntax?
>=20
> Thanks,
> Dean
>=20
> -----Original Message-----
> From: Denis Bazhenov [mailto:dotsid@gmail.com]=20
> Sent: Monday, June 20, 2011 5:50 PM
> To: java-user@lucene.apache.org
> Subject: Re: how to do something like sql in () clause
>=20
> You could use BooleanQuery with Occur.SHOULD quantificator
>=20
> =
http://lucene.apache.org/java/3_0_3/api/core/org/apache/lucene/search/Bool=
eanClause.Occur.html#SHOULD
>=20
> On Jun 21, 2011, at 9:24 AM, Hiller, Dean x66079 wrote:
>=20
>> I need to do something like a lucene query with
>>=20
>> Where accountId in ( 1, 2, 3, 4)
>>=20
>> Is there a way to do that in Lucene Query language?
>>=20
>> Thanks,
>> Dean
>>=20
>> This message and any attachments are intended only for the use of the =
addressee and
>> may contain information that is privileged and confidential. If the =
reader of the=20
>> message is not the intended recipient or an authorized representative =
of the
>> intended recipient, you are hereby notified that any dissemination of =
this
>> communication is strictly prohibited. If you have received this =
communication in
>> error, please notify us immediately by e-mail and delete the message =
and any
>> attachments from your system.
>>=20
>=20
> ---
> Denis Bazhenov <dotsid@gmail.com>
>=20
>=20
>=20
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
> This message and any attachments are intended only for the use of the =
addressee and
> may contain information that is privileged and confidential. If the =
reader of the=20
> message is not the intended recipient or an authorized representative =
of the
> intended recipient, you are hereby notified that any dissemination of =
this
> communication is strictly prohibited. If you have received this =
communication in
> error, please notify us immediately by e-mail and delete the message =
and any
> attachments from your system.
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20

---
Denis Bazhenov <dotsid@gmail.com>






--Apple-Mail-1--403649029--

From java-user-return-50105-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun 21 01:16:24 2011
Return-Path: <java-user-return-50105-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E961561B5
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 21 Jun 2011 01:16:24 +0000 (UTC)
Received: (qmail 28159 invoked by uid 500); 21 Jun 2011 01:16:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28116 invoked by uid 500); 21 Jun 2011 01:16:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28108 invoked by uid 99); 21 Jun 2011 01:16:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2011 01:16:22 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dean.hiller@broadridge.com designates 64.18.2.217 as permitted sender)
Received: from [64.18.2.217] (HELO exprod7og115.obsmtp.com) (64.18.2.217)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2011 01:16:13 +0000
Received: from gwm.broadridge.com ([167.212.2.254]) (using TLSv1) by exprod7ob115.postini.com ([64.18.6.12]) with SMTP
	ID DSNKTf/wx6CYO8W7joekripZGKH8s0mrxLZl@postini.com; Mon, 20 Jun 2011 18:15:52 PDT
Received: from jsppsldlpsi01.broadridge.net ([10.98.54.11])
	by gwm.broadridge.com (8.13.8+Sun/8.13.8) with ESMTP id p5L1Fjfq016675
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Mon, 20 Jun 2011 21:15:46 -0400 (EDT)
Received: from JSIPSWEXHA01.bsg.ad.adp.com (jsipswexha01.bsg.ad.adp.com [10.17.69.24]) by jsppsldlpsi01.broadridge.net (RSA Interceptor) for <java-user@lucene.apache.org>; Mon, 20 Jun 2011 21:15:43 -0400
Received: from jscpcwexmaa1.bsg.ad.adp.com ([fe80::882f:16e8:308d:3ef]) by
 JSIPSWEXHA01.bsg.ad.adp.com ([::1]) with mapi; Mon, 20 Jun 2011 21:15:41
 -0400
From: "Hiller, Dean  x66079" <dean.hiller@broadridge.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Mon, 20 Jun 2011 21:15:39 -0400
Subject: RE: how to do something like sql in () clause
Thread-Topic: how to do something like sql in () clause
Thread-Index: Acwvqg6Wc0tCOeW/R26Bcdhu0MQyvgABqdnQ
Message-ID: <08230D4C8E666D479F6DE495A7684DCD0AC2EA4B@JSCPCWEXMAA1.bsg.ad.adp.com>
References: <08230D4C8E666D479F6DE495A7684DCD0AC2EA14@JSCPCWEXMAA1.bsg.ad.adp.com>
 <F9A9EB6E-86D8-4146-82AC-6D6FB94A151D@gmail.com>
 <08230D4C8E666D479F6DE495A7684DCD0AC2EA42@JSCPCWEXMAA1.bsg.ad.adp.com>
 <C8C5B9B6-0CD9-4B17-817C-7DA8245AF43A@gmail.com>
In-Reply-To: <C8C5B9B6-0CD9-4B17-817C-7DA8245AF43A@gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-RSA-Inspected: yes
X-RSA-Classifications: public
X-RSA-Action: allow
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks much,=20
Dean

-----Original Message-----
From: Denis Bazhenov [mailto:dotsid@gmail.com]=20
Sent: Monday, June 20, 2011 6:27 PM
To: java-user@lucene.apache.org
Subject: Re: how to do something like sql in () clause

SQL IN operator behaves as OR operator. So as Occur.SHOULD does. It will ma=
tch document only if _one or more_ of the child queries match.

BooleanQuery query =3D new BooleanQuery();
query.add(new TermQuery(new Term("accountId", "1")), Occur.SHOULD);
query.add(new TermQuery(new Term("accountId", "2")), Occur.SHOULD);
query.add(new TermQuery(new Term("accountId", "3")), Occur.SHOULD);

On Jun 21, 2011, at 11:01 AM, Hiller, Dean x66079 wrote:

> But the issue is that it MUST be 1, OR MUST be 2 so does that still work?
>=20
> Also, how do you write that in the query syntax?
>=20
> Thanks,
> Dean
>=20
> -----Original Message-----
> From: Denis Bazhenov [mailto:dotsid@gmail.com]=20
> Sent: Monday, June 20, 2011 5:50 PM
> To: java-user@lucene.apache.org
> Subject: Re: how to do something like sql in () clause
>=20
> You could use BooleanQuery with Occur.SHOULD quantificator
>=20
> http://lucene.apache.org/java/3_0_3/api/core/org/apache/lucene/search/Boo=
leanClause.Occur.html#SHOULD
>=20
> On Jun 21, 2011, at 9:24 AM, Hiller, Dean x66079 wrote:
>=20
>> I need to do something like a lucene query with
>>=20
>> Where accountId in ( 1, 2, 3, 4)
>>=20
>> Is there a way to do that in Lucene Query language?
>>=20
>> Thanks,
>> Dean
>>=20
>> This message and any attachments are intended only for the use of the ad=
dressee and
>> may contain information that is privileged and confidential. If the read=
er of the=20
>> message is not the intended recipient or an authorized representative of=
 the
>> intended recipient, you are hereby notified that any dissemination of th=
is
>> communication is strictly prohibited. If you have received this communic=
ation in
>> error, please notify us immediately by e-mail and delete the message and=
 any
>> attachments from your system.
>>=20
>=20
> ---
> Denis Bazhenov <dotsid@gmail.com>
>=20
>=20
>=20
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
> This message and any attachments are intended only for the use of the add=
ressee and
> may contain information that is privileged and confidential. If the reade=
r of the=20
> message is not the intended recipient or an authorized representative of =
the
> intended recipient, you are hereby notified that any dissemination of thi=
s
> communication is strictly prohibited. If you have received this communica=
tion in
> error, please notify us immediately by e-mail and delete the message and =
any
> attachments from your system.
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20

---
Denis Bazhenov <dotsid@gmail.com>





This message and any attachments are intended only for the use of the add=
ressee and
may contain information that is privileged and confidential. If the reade=
r of the =

message is not the intended recipient or an authorized representative of =
the
intended recipient, you are hereby notified that any dissemination of thi=
s
communication is strictly prohibited. If you have received this communica=
tion in
error, please notify us immediately by e-mail and delete the message and =
any
attachments from your system.
=0D

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50106-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun 21 02:55:32 2011
Return-Path: <java-user-return-50106-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 419134EAD
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 21 Jun 2011 02:55:32 +0000 (UTC)
Received: (qmail 15502 invoked by uid 500); 21 Jun 2011 02:55:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15363 invoked by uid 500); 21 Jun 2011 02:55:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15355 invoked by uid 99); 21 Jun 2011 02:55:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2011 02:55:21 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sokolov@ifactory.com designates 68.236.111.2 as permitted sender)
Received: from [68.236.111.2] (HELO camelot.ifactory.com) (68.236.111.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2011 02:55:13 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by camelot.ifactory.com (Postfix) with ESMTP id AEE1B3672789;
	Mon, 20 Jun 2011 22:54:52 -0400 (EDT)
Received: from camelot.ifactory.com ([127.0.0.1])
	by localhost (camelot.ifactory.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id B4ozua7-ZDvi; Mon, 20 Jun 2011 22:54:51 -0400 (EDT)
Received: from [192.168.1.4] (pool-108-7-217-216.bstnma.fios.verizon.net [108.7.217.216])
	by camelot.ifactory.com (Postfix) with ESMTPSA id B94F436708B6;
	Mon, 20 Jun 2011 22:54:51 -0400 (EDT)
Message-ID: <4E0007FA.1000201@ifactory.com>
Date: Mon, 20 Jun 2011 22:54:50 -0400
From: Michael Sokolov <sokolov@ifactory.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.17) Gecko/20110414 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
CC: Koji Sekiguchi <koji@r.email.ne.jp>
Subject: Re: highlighting performance
References: <4DFFAB75.1040306@ifactory.com> <4DFFE413.4010109@r.email.ne.jp>
In-Reply-To: <4DFFE413.4010109@r.email.ne.jp>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 8bit

Koji- I'm not familiar with the benchmarking system, but maybe I'll see 
if I can run that benchmark on my test data as a point of comparison - 
thanks for the pointer!

-Mike

On 6/20/2011 8:21 PM, Koji Sekiguchi wrote:
> Mike,
>
> FVH used to be faster for large docs. I wrote FVH section for Lucene 
> in Action and it said:
>
> In contrib/benchmark (covered in appendix C), theres an algorithm
> file called highlight-vs-vector-highlight.alg that lets you see the 
> difference
> between two highlighters in processing time. As of version 2.9, with 
> modern hardware,
> that algorithm shows that FastVectorHighlighter is about two and a 
> half times faster
> than Highlighter.
>
> The number was for Lucene 2.9 age and Wikipedia data, maybe different 
> today.
>
> Anyway, thank you for sharing interesting result!
>
> koji


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50107-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun 21 08:59:50 2011
Return-Path: <java-user-return-50107-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id EBBCE4DB9
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 21 Jun 2011 08:59:50 +0000 (UTC)
Received: (qmail 87162 invoked by uid 500); 21 Jun 2011 08:59:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87001 invoked by uid 500); 21 Jun 2011 08:59:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86993 invoked by uid 99); 21 Jun 2011 08:59:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2011 08:59:47 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2011 08:59:41 +0000
Received: by iwi5 with SMTP id 5so5832400iwi.35
        for <java-user@lucene.apache.org>; Tue, 21 Jun 2011 01:59:20 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=OI6Fc4SuT3Ltw3ft4UBtOEVB/UJMn8K7KRzr5tweCJI=;
        b=vhZXtaDITOJTjPYY3+WOfOpqe8mCNKR1fmO/rwrUd8VO0LfNSJ+l/OWApBnDk/sKIc
         uCX9G5yFUuKG6Obv2UEuKmICaRfU94tbELwbyNRI2CtMVDmWYO8nqqVtfdqme32rqPeq
         UA0w/xrFQhQAN9cWiDAfz1dG7n+GM2VNoYKgE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=baqrIKFjpwAkpicMJcHxUtPrPBs5nvX0EMbXMwhwWD9t14gM33WO+V0TD/1jJr44cs
         W9jyGJvZ5iAvQgshzpqwDRxnJSVbjwgFcDXjWjsy/scm56WREvhcWPP7CEZXO+/IK49B
         rgkJ6BVYNKmMfaO3meS9izFw3L9KM4gdDXSnQ=
Received: by 10.231.207.170 with SMTP id fy42mr5629926ibb.36.1308646760126;
 Tue, 21 Jun 2011 01:59:20 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.199.148 with HTTP; Tue, 21 Jun 2011 01:59:00 -0700 (PDT)
In-Reply-To: <BANLkTi=0K9uXOU8uPteyDa1CAwPt36PEXA@mail.gmail.com>
References: <BANLkTi=t2c+hcg-G4n=8e5JKCbwZ9hviMQ@mail.gmail.com>
 <BANLkTik1sdhn7tbiBiUENZD6zHAYCzzHrw@mail.gmail.com> <BANLkTinMweyaQj9pK4uhw8_=JM5SkvhAOQ@mail.gmail.com>
 <BANLkTi=0K9uXOU8uPteyDa1CAwPt36PEXA@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Tue, 21 Jun 2011 09:59:00 +0100
Message-ID: <BANLkTin+7=OkvcZSvdTJeUnuTUPdfW7Ukw@mail.gmail.com>
Subject: Re: getting OutOfMemoryError
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Complicated with all those indexes.

3 suggestions:

1.  Just give it more memory.

2.  Profile it to find out what is actually using the memory.

3.  Cut down the number of indexes.  See recent threads on pros and
cons of multiple indexes vs one larger index.


--
Ian.


On Mon, Jun 20, 2011 at 2:15 PM, harsh srivastava <harshcode@gmail.com> wro=
te:
> Hi Erick,
>
> In continuation to my below mails, I have a socket based multithreaded
> server that serves in=A0average=A01 request per second.
> The index size is 31GB and document count is about=A022=A0millions.
> The index directories are first divided in 4 directories and then each
> subdivided to 21 directories.
> I share a ParallelMultiSearcher instance for all the searches without
> closing the readers.
> I have given the JVM 5GB of memory.
>
>
> Normally server runs smooth but sometimes when there is some complex
> phrase query with other fields executed, it gives below error and
> hangs.
> I think that there is no sorting for the query that creates below
> error, please help.
>
>
> =A0java.lang.RuntimeException: java.util.concurrent.ExecutionException:
> =A0java.lang.RuntimeException: java.util.concurrent.ExecutionException:
> =A0java.lang.OutOfMemoryError: Java heap space
> =A0java.util.concurrent.ExecutionException: java.lang.RuntimeException:
> =A0java.util.concurrent.ExecutionException: java.lang.OutOfMemoryError: J=
ava
> =A0heap space
> =A0java.lang.RuntimeException: java.util.concurrent.ExecutionException:
> =A0java.lang.RuntimeException: java.util.concurrent.ExecutionException:
> =A0java.lang.OutOfMemoryError: Java heap space
> =A0=A0 =A0 =A0 =A0at
> =A0org.apache.lucene.search.ParallelMultiSearcher$ExecutionHelper.next(Pa=
rallelMultiSearcher.java:278)
> =A0=A0 =A0 =A0 =A0at
> =A0org.apache.lucene.search.ParallelMultiSearcher.search(ParallelMultiSea=
rcher.java:139)
> =A0=A0 =A0 =A0 =A0at org.apache.lucene.search.Searcher.search(Searcher.ja=
va:53)
> =A0Caused by: java.util.concurrent.ExecutionException:
> =A0java.lang.RuntimeException: java.util.concurrent.ExecutionException:
> =A0java.lang.OutOfMemoryError: Java heap space
> =A0=A0 =A0 =A0 =A0at java.util.concurrent.FutureTask$Sync.innerGet(Unknow=
n Source)
> =A0=A0 =A0 =A0 =A0at java.util.concurrent.FutureTask.get(Unknown Source)
> =A0=A0 =A0 =A0 =A0at
> =A0org.apache.lucene.search.ParallelMultiSearcher$ExecutionHelper.next(Pa=
rallelMultiSearcher.java:274)
> =A0=A0 =A0 =A0 =A0... 6 more
> =A0Caused by: java.lang.RuntimeException:
> =A0java.util.concurrent.ExecutionException: java.lang.OutOfMemoryError: J=
ava
> =A0heap space
> =A0=A0 =A0 =A0 =A0at
> =A0org.apache.lucene.search.ParallelMultiSearcher$ExecutionHelper.next(Pa=
rallelMultiSearcher.java:278)
> =A0=A0 =A0 =A0 =A0at
> =A0org.apache.lucene.search.ParallelMultiSearcher.search(ParallelMultiSea=
rcher.java:139)
> =A0=A0 =A0 =A0 =A0at
> =A0org.apache.lucene.search.MultiSearcher$MultiSearcherCallableWithSort.c=
all(MultiSearcher.java:428)
> =A0=A0 =A0 =A0 =A0at
> =A0org.apache.lucene.search.MultiSearcher$MultiSearcherCallableWithSort.c=
all(MultiSearcher.java:402)
> =A0=A0 =A0 =A0 =A0at java.util.concurrent.FutureTask$Sync.innerRun(Unknow=
n Source)
> =A0=A0 =A0 =A0 =A0at java.util.concurrent.FutureTask.run(Unknown Source)
> =A0=A0 =A0 =A0 =A0at java.util.concurrent.Executors$RunnableAdapter.call(=
Unknown
> =A0Source)
> =A0=A0 =A0 =A0 =A0at java.util.concurrent.FutureTask$Sync.innerRun(Unknow=
n Source)
> =A0=A0 =A0 =A0 =A0at java.util.concurrent.FutureTask.run(Unknown Source)
> =A0=A0 =A0 =A0 =A0at java.util.concurrent.ThreadPoolExecutor$Worker.runTa=
sk(Unknown
> =A0Source)
> =A0=A0 =A0 =A0 =A0at java.util.concurrent.ThreadPoolExecutor$Worker.run(U=
nknown
> =A0Source)
> =A0=A0 =A0 =A0 =A0at java.lang.Thread.run(Unknown Source)
> =A0Caused by: java.util.concurrent.ExecutionException:
> =A0java.lang.OutOfMemoryError: Java heap space
> =A0=A0 =A0 =A0 =A0at java.util.concurrent.FutureTask$Sync.innerGet(Unknow=
n Source)
> =A0=A0 =A0 =A0 =A0at java.util.concurrent.FutureTask.get(Unknown Source)
> =A0=A0 =A0 =A0 =A0at
> =A0org.apache.lucene.search.ParallelMultiSearcher$ExecutionHelper.next(Pa=
rallelMultiSearcher.java:274)
> =A0=A0 =A0 =A0 =A0... 11 more
> =A0Caused by: java.lang.OutOfMemoryError: Java heap space
>
>
>
> On Fri, Jun 17, 2011 at 9:28 PM, harsh srivastava <harshcode@gmail.com> w=
rote:
>>
>> Hi Erick,
>> i will gather the info and let u know.
>> thanks
>> harsh
>>
>> On 6/17/11, Erick Erickson <erickerickson@gmail.com> wrote:
>> > Please review:
>> > http://wiki.apache.org/solr/UsingMailingLists
>> >
>> > You've given us no information to go on here, what are you
>> > trying to do when this happens? What have you tried? What
>> > is the query you're running when this happens? How much
>> > memory are you allocating to the JVM?
>> >
>> > You're apparently sorting, how many unique values are there
>> > in the fields you're sorting? How are the fields you're sorting on
>> > being analyzed?
>> >
>> > Best
>> > Erick
>> >
>> > On Fri, Jun 17, 2011 at 11:09 AM, harsh srivastava <harshcode@gmail.co=
m>
>> > wrote:
>> >> Hi List,
>> >>
>> >> Can anyone show any light why some times I am getting below error and
>> >> application hangs up:
>> >>
>> >> I am using lucene 3.1.
>> >>
>> >> java.lang.RuntimeException: java.util.concurrent.ExecutionException:
>> >> java.lang.RuntimeException: java.util.concurrent.ExecutionException:
>> >> java.lang.OutOfMemoryError: Java heap space
>> >> java.util.concurrent.ExecutionException: java.lang.RuntimeException:
>> >> java.util.concurrent.ExecutionException: java.lang.OutOfMemoryError: =
Java
>> >> heap space
>> >> java.lang.RuntimeException: java.util.concurrent.ExecutionException:
>> >> java.lang.RuntimeException: java.util.concurrent.ExecutionException:
>> >> java.lang.OutOfMemoryError: Java heap space
>> >> =A0 =A0 =A0 =A0at
>> >> org.apache.lucene.search.ParallelMultiSearcher$ExecutionHelper.next(P=
arallelMultiSearcher.java:278)
>> >> =A0 =A0 =A0 =A0at
>> >> org.apache.lucene.search.ParallelMultiSearcher.search(ParallelMultiSe=
archer.java:139)
>> >> =A0 =A0 =A0 =A0at org.apache.lucene.search.Searcher.search(Searcher.j=
ava:53)
>> >> Caused by: java.util.concurrent.ExecutionException:
>> >> java.lang.RuntimeException: java.util.concurrent.ExecutionException:
>> >> java.lang.OutOfMemoryError: Java heap space
>> >> =A0 =A0 =A0 =A0at java.util.concurrent.FutureTask$Sync.innerGet(Unkno=
wn Source)
>> >> =A0 =A0 =A0 =A0at java.util.concurrent.FutureTask.get(Unknown Source)
>> >> =A0 =A0 =A0 =A0at
>> >> org.apache.lucene.search.ParallelMultiSearcher$ExecutionHelper.next(P=
arallelMultiSearcher.java:274)
>> >> =A0 =A0 =A0 =A0... 6 more
>> >> Caused by: java.lang.RuntimeException:
>> >> java.util.concurrent.ExecutionException: java.lang.OutOfMemoryError: =
Java
>> >> heap space
>> >> =A0 =A0 =A0 =A0at
>> >> org.apache.lucene.search.ParallelMultiSearcher$ExecutionHelper.next(P=
arallelMultiSearcher.java:278)
>> >> =A0 =A0 =A0 =A0at
>> >> org.apache.lucene.search.ParallelMultiSearcher.search(ParallelMultiSe=
archer.java:139)
>> >> =A0 =A0 =A0 =A0at
>> >> org.apache.lucene.search.MultiSearcher$MultiSearcherCallableWithSort.=
call(MultiSearcher.java:428)
>> >> =A0 =A0 =A0 =A0at
>> >> org.apache.lucene.search.MultiSearcher$MultiSearcherCallableWithSort.=
call(MultiSearcher.java:402)
>> >> =A0 =A0 =A0 =A0at java.util.concurrent.FutureTask$Sync.innerRun(Unkno=
wn Source)
>> >> =A0 =A0 =A0 =A0at java.util.concurrent.FutureTask.run(Unknown Source)
>> >> =A0 =A0 =A0 =A0at java.util.concurrent.Executors$RunnableAdapter.call=
(Unknown
>> >> Source)
>> >> =A0 =A0 =A0 =A0at java.util.concurrent.FutureTask$Sync.innerRun(Unkno=
wn Source)
>> >> =A0 =A0 =A0 =A0at java.util.concurrent.FutureTask.run(Unknown Source)
>> >> =A0 =A0 =A0 =A0at java.util.concurrent.ThreadPoolExecutor$Worker.runT=
ask(Unknown
>> >> Source)
>> >> =A0 =A0 =A0 =A0at java.util.concurrent.ThreadPoolExecutor$Worker.run(=
Unknown
>> >> Source)
>> >> =A0 =A0 =A0 =A0at java.lang.Thread.run(Unknown Source)
>> >> Caused by: java.util.concurrent.ExecutionException:
>> >> java.lang.OutOfMemoryError: Java heap space
>> >> =A0 =A0 =A0 =A0at java.util.concurrent.FutureTask$Sync.innerGet(Unkno=
wn Source)
>> >> =A0 =A0 =A0 =A0at java.util.concurrent.FutureTask.get(Unknown Source)
>> >> =A0 =A0 =A0 =A0at
>> >> org.apache.lucene.search.ParallelMultiSearcher$ExecutionHelper.next(P=
arallelMultiSearcher.java:274)
>> >> =A0 =A0 =A0 =A0... 11 more
>> >> Caused by: java.lang.OutOfMemoryError: Java heap space
>> >>
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>
>> --
>> Sent from my mobile device
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50108-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun 21 09:33:00 2011
Return-Path: <java-user-return-50108-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 764704630
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 21 Jun 2011 09:33:00 +0000 (UTC)
Received: (qmail 29682 invoked by uid 500); 21 Jun 2011 09:32:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29634 invoked by uid 500); 21 Jun 2011 09:32:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29626 invoked by uid 99); 21 Jun 2011 09:32:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2011 09:32:57 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of bernd.fehling@uni-bielefeld.de designates 129.70.204.73 as permitted sender)
Received: from [129.70.204.73] (HELO mux2-unibi-smtp.hrz.uni-bielefeld.de) (129.70.204.73)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2011 09:32:49 +0000
MIME-version: 1.0
Content-transfer-encoding: 7BIT
Content-type: text/plain; charset=ISO-8859-15; format=flowed
Received: from pmxchannel-daemon.mux2-unibi-smtp.hrz.uni-bielefeld.de by
 mux2-unibi-smtp.hrz.uni-bielefeld.de
 (Sun Java(tm) System Messaging Server 6.3-6.03 (built Mar 14 2008; 32bit))
 id <0LN400906VU4XW00@mux2-unibi-smtp.hrz.uni-bielefeld.de> for
 java-user@lucene.apache.org; Tue, 21 Jun 2011 11:32:28 +0200 (CEST)
Received: from [129.70.11.68] ([129.70.11.68])
 by mux2-unibi-smtp.hrz.uni-bielefeld.de
 (Sun Java(tm) System Messaging Server 6.3-6.03 (built Mar 14 2008; 32bit))
 with ESMTPPSA id <0LN4005GNVU3HR30@mux2-unibi-smtp.hrz.uni-bielefeld.de> for
 java-user@lucene.apache.org; Tue, 21 Jun 2011 11:32:28 +0200 (CEST)
Date: Tue, 21 Jun 2011 11:32:27 +0200
From: Bernd Fehling <bernd.fehling@uni-bielefeld.de>
Subject: questions about fieldCache
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Message-id: <780_1308648748_ZZh0u11fzJ~dL.00_4E00652B.6010903@uni-bielefeld.de>
X-EnvFrom: bernd.fehling@uni-bielefeld.de
X-PMX-Version: 5.5.9.395186, Antispam-Engine: 2.7.2.376379,
 Antispam-Data: 2011.6.21.92120, pmx8
X-Connecting-IP: 129.70.11.68
User-Agent: Mozilla/5.0 (X11; U; Linux x86_64; de; rv:1.9.2.17) Gecko/20110414
 SUSE/3.1.10 Thunderbird/3.1.10
X-Virus-Checked: Checked by ClamAV on apache.org

I'm trying to understand the logic of/behind fieldCache.

Who has written this peace of code or has good knowledge about it?

Why is it under the hood of jetty?

I see FieldCache$StringIndex with
- f_dccollection
- f_dcyear
- f_dctype
but also
- dctitle --> f_dctitle --> f_dccreator
- title --> f_dcyear

There are some entries without further reference like the first examples
and some that have references to further HashMaps like a chain.
Why is it this way, what is the purpose?

What is fieldCache doing if a server is replicated, will all old content
be cleaned up because of a new index with new content?

Regards
Bernd


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50109-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun 21 11:39:18 2011
Return-Path: <java-user-return-50109-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8D31541FC
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 21 Jun 2011 11:39:18 +0000 (UTC)
Received: (qmail 71139 invoked by uid 500); 21 Jun 2011 11:39:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71099 invoked by uid 500); 21 Jun 2011 11:39:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71091 invoked by uid 99); 21 Jun 2011 11:39:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2011 11:39:15 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2011 11:39:09 +0000
Received: by pwj9 with SMTP id 9so406045pwj.35
        for <java-user@lucene.apache.org>; Tue, 21 Jun 2011 04:38:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type:content-transfer-encoding;
        bh=ji2zT20dH9fAk2RQk+OpKVRNLLv442F4zsEQG+f+0vo=;
        b=MCUJ62PbSlh+gJSIFZHAu3SjsHobS6yNGD2rJI2nq9WcjlB83N4f+nFqtpkBLTi/+T
         kO+APj3k/m68GW14PFoLdiIxZ4MjNmor3Md7BjPi53v8s7TATpPOMT8IyVrwu/1+YS3Y
         4glQcu+wC3Jwz/Vm2+a7NN5Q46zY/871fl+5o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=sm1DYOS/gHAOQ5XlxJZEcw6MTft1Dnpnspml2cX8TUER1bCCc/2v2ta/Ud7skDA6uO
         vPq2TdZFmJKsKwVhc4bi2OWfNBgMjzwcRNVlnDSuPdbwTFVzdi82ZGxldsLN/NnUXj+6
         4htxhh6yXcxOIAmSViIMI1BeP8UDHPoDwt8KM=
MIME-Version: 1.0
Received: by 10.68.34.202 with SMTP id b10mr877137pbj.105.1308656328203; Tue,
 21 Jun 2011 04:38:48 -0700 (PDT)
Received: by 10.68.41.133 with HTTP; Tue, 21 Jun 2011 04:38:48 -0700 (PDT)
In-Reply-To: <08230D4C8E666D479F6DE495A7684DCD0ABA9912@JSCPCWEXMAA1.bsg.ad.adp.com>
References: <08230D4C8E666D479F6DE495A7684DCD0ABA9912@JSCPCWEXMAA1.bsg.ad.adp.com>
Date: Tue, 21 Jun 2011 07:38:48 -0400
Message-ID: <BANLkTinC+KMQ-RcOwvcX7irsY8FoxZrKhQ@mail.gmail.com>
Subject: Re: anyway to store value as bytes?
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Does this help?
http://lucene.apache.org/java/3_0_1/api/all/org/apache/lucene/util/Indexabl=
eBinaryStringTools.html

If not, here's a note from Ryan McKinley on another thread (googling
lucene storing binary data brought it up)...

******
You can store binary data using a binary field type -- then you need
to send the data base64 encoded.

I would strongly recommend against storing large binary files in solr
-- unless you really don't care about performance -- the file system
is a good option that springs to mind.
******

Best
Erick

On Mon, Jun 20, 2011 at 2:26 PM, Hiller, Dean  x66079
<dean.hiller@broadridge.com> wrote:
> I see the api in Lucene is new Field(String, String, Store, Index)
>
> Is there anyway to store one of the fields as byte[]? =A0Specifically the=
 value I am looking up I would like it to be byte[] instead of String. =A0A=
ll my other ones are String anyways.
>
> Thanks,
> Dean
>
>
> This message and any attachments are intended only for the use of the add=
ressee and
> may contain information that is privileged and confidential. If the reade=
r of the
> message is not the intended recipient or an authorized representative of =
the
> intended recipient, you are hereby notified that any dissemination of thi=
s
> communication is strictly prohibited. If you have received this communica=
tion in
> error, please notify us immediately by e-mail and delete the message and =
any
> attachments from your system.
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50110-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun 21 11:50:25 2011
Return-Path: <java-user-return-50110-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9535D4AE6
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 21 Jun 2011 11:50:25 +0000 (UTC)
Received: (qmail 98914 invoked by uid 500); 21 Jun 2011 11:50:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98879 invoked by uid 500); 21 Jun 2011 11:50:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98871 invoked by uid 99); 21 Jun 2011 11:50:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2011 11:50:22 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.210.52 as permitted sender)
Received: from [209.85.210.52] (HELO mail-pz0-f52.google.com) (209.85.210.52)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2011 11:50:16 +0000
Received: by pzd13 with SMTP id 13so5480533pzd.11
        for <java-user@lucene.apache.org>; Tue, 21 Jun 2011 04:49:55 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=o5CT8tJns/t/b635WNL1omSpQEy8MD8Mnun18Wwdwso=;
        b=HE+DFOWPfe4f4o1YfrgJf8zagNJR4NPbv7K8GDz3coCI0bgAm53eiBAPGBdwEPgPXu
         9f3D3FNsnTCbRLu5aZGRQ66lOecNrPy97uXnzPOrdgguFM7fzFexyLZ9OfEhLrAv5FEZ
         4mEYvyM1SxA/mvHWEph238Nrd1mo7BaPK3NSU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=AOfh86L1M9bkLcRRrYqiG0P7ZSpvKnFLtC/WqUYS09RX/S0asNO9vUe69MqT39Tsvn
         4qprCs3H+A603E5TCI+sUAg3sPstm0Mwo85kbb0kZEGeRY1k5QLTE7VjGp+pkgiQLEI+
         PQwkDoSjVQRzM+DdBq9MlSlijeKR/ICCAMiNw=
MIME-Version: 1.0
Received: by 10.68.35.70 with SMTP id f6mr2835808pbj.172.1308656995146; Tue,
 21 Jun 2011 04:49:55 -0700 (PDT)
Received: by 10.68.41.133 with HTTP; Tue, 21 Jun 2011 04:49:55 -0700 (PDT)
In-Reply-To: <780_1308648748_ZZh0u11fzJ~dL.00_4E00652B.6010903@uni-bielefeld.de>
References: <780_1308648748_ZZh0u11fzJ~dL.00_4E00652B.6010903@uni-bielefeld.de>
Date: Tue, 21 Jun 2011 07:49:55 -0400
Message-ID: <BANLkTimEr4zLRVtpay3X-HpEpVd+gJoc5Q@mail.gmail.com>
Subject: Re: questions about fieldCache
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Hmmm, I'm not going to even try to talk about the code itself, but I will add
a couple of clarifications:

Jetty has nothing to do with it. It's in Lucene, and it's used for sorting and
sometimes faceting. The cache is associated with a reader on a machine
used to search. When replication happens, that searcher should be closed
and any data associated with the cache is returned to the system.

Someone else will have to chime in on the underlying details <G>..

By the way, what version of Solr are you using? Because the memory
requirements for string sorting and faceting have been drastically
reduced on the trunk version. In a really rough test I've seen 75%
reductions in memory requirements (note I was doing the worst things
I could think of, so I don't necessarily expect your results to be as
drastic).

Best
Erick

On Tue, Jun 21, 2011 at 5:32 AM, Bernd Fehling
<bernd.fehling@uni-bielefeld.de> wrote:
> I'm trying to understand the logic of/behind fieldCache.
>
> Who has written this peace of code or has good knowledge about it?
>
> Why is it under the hood of jetty?
>
> I see FieldCache$StringIndex with
> - f_dccollection
> - f_dcyear
> - f_dctype
> but also
> - dctitle --> f_dctitle --> f_dccreator
> - title --> f_dcyear
>
> There are some entries without further reference like the first examples
> and some that have references to further HashMaps like a chain.
> Why is it this way, what is the purpose?
>
> What is fieldCache doing if a server is replicated, will all old content
> be cleaned up because of a new index with new content?
>
> Regards
> Bernd
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50111-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun 21 12:40:19 2011
Return-Path: <java-user-return-50111-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id EFF684D38
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 21 Jun 2011 12:40:19 +0000 (UTC)
Received: (qmail 3958 invoked by uid 500); 21 Jun 2011 12:40:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3910 invoked by uid 500); 21 Jun 2011 12:40:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3902 invoked by uid 99); 21 Jun 2011 12:40:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2011 12:40:17 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of bernd.fehling@uni-bielefeld.de designates 129.70.204.65 as permitted sender)
Received: from [129.70.204.65] (HELO mux1-unibi-smtp.hrz.uni-bielefeld.de) (129.70.204.65)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2011 12:40:10 +0000
MIME-version: 1.0
Content-transfer-encoding: 7BIT
Content-type: text/plain; charset=ISO-8859-1; format=flowed
Received: from pmxchannel-daemon.mux1-unibi-smtp.hrz.uni-bielefeld.de by
 mux1-unibi-smtp.hrz.uni-bielefeld.de
 (Sun Java(tm) System Messaging Server 6.3-6.03 (built Mar 14 2008; 32bit))
 id <0LN500C004IC9500@mux1-unibi-smtp.hrz.uni-bielefeld.de> for
 java-user@lucene.apache.org; Tue, 21 Jun 2011 14:39:49 +0200 (CEST)
Received: from [129.70.11.68] ([129.70.11.68])
 by mux1-unibi-smtp.hrz.uni-bielefeld.de
 (Sun Java(tm) System Messaging Server 6.3-6.03 (built Mar 14 2008; 32bit))
 with ESMTPPSA id <0LN500BYX4IBZS10@mux1-unibi-smtp.hrz.uni-bielefeld.de> for
 java-user@lucene.apache.org; Tue, 21 Jun 2011 14:39:48 +0200 (CEST)
Date: Tue, 21 Jun 2011 14:39:47 +0200
From: Bernd Fehling <bernd.fehling@uni-bielefeld.de>
Subject: Re: questions about fieldCache
In-reply-to: <BANLkTimEr4zLRVtpay3X-HpEpVd+gJoc5Q@mail.gmail.com>
To: java-user@lucene.apache.org
Message-id:
 <17741_1308659988_ZZh0u321fM5SQ.00_4E009113.6020402@uni-bielefeld.de>
X-EnvFrom: bernd.fehling@uni-bielefeld.de
X-PMX-Version: 5.5.9.395186, Antispam-Engine: 2.7.2.376379,
 Antispam-Data: 2011.6.21.122114, pmx8
X-Connecting-IP: 129.70.11.68
References: <780_1308648748_ZZh0u11fzJ~dL.00_4E00652B.6010903@uni-bielefeld.de>
 <BANLkTimEr4zLRVtpay3X-HpEpVd+gJoc5Q@mail.gmail.com>
User-Agent: Mozilla/5.0 (X11; U; Linux x86_64; de; rv:1.9.2.17) Gecko/20110414
 SUSE/3.1.10 Thunderbird/3.1.10


Currently I'm using version 3.2.
I used already 4.x some month ago but there was to much change to that time
so I decided to go with 3.0.x and updated to 3.1 and now to 3.2.

I'm still dealing with my fieldCache OOM issue and want to understand
why things are as they are.
I have already removed/solved one "insane message" from fieldCache and
three ReadOnlyDirectoryReader Entries from fieldCache.
Only sorting produces now an entry.

So action that starts a new searcher and closes the old one (like replication)
should release cache from fieldCache through garbage collection?

Regards
Bernd

Am 21.06.2011 13:49, schrieb Erick Erickson:
> Hmmm, I'm not going to even try to talk about the code itself, but I will add
> a couple of clarifications:
>
> Jetty has nothing to do with it. It's in Lucene, and it's used for sorting and
> sometimes faceting. The cache is associated with a reader on a machine
> used to search. When replication happens, that searcher should be closed
> and any data associated with the cache is returned to the system.
>
> Someone else will have to chime in on the underlying details<G>..
>
> By the way, what version of Solr are you using? Because the memory
> requirements for string sorting and faceting have been drastically
> reduced on the trunk version. In a really rough test I've seen 75%
> reductions in memory requirements (note I was doing the worst things
> I could think of, so I don't necessarily expect your results to be as
> drastic).
>
> Best
> Erick
>
> On Tue, Jun 21, 2011 at 5:32 AM, Bernd Fehling
> <bernd.fehling@uni-bielefeld.de>  wrote:
>> I'm trying to understand the logic of/behind fieldCache.
>>
>> Who has written this peace of code or has good knowledge about it?
>>
>> Why is it under the hood of jetty?
>>
>> I see FieldCache$StringIndex with
>> - f_dccollection
>> - f_dcyear
>> - f_dctype
>> but also
>> - dctitle -->  f_dctitle -->  f_dccreator
>> - title -->  f_dcyear
>>
>> There are some entries without further reference like the first examples
>> and some that have references to further HashMaps like a chain.
>> Why is it this way, what is the purpose?
>>
>> What is fieldCache doing if a server is replicated, will all old content
>> be cleaned up because of a new index with new content?
>>
>> Regards
>> Bernd
>>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50112-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun 21 13:51:27 2011
Return-Path: <java-user-return-50112-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 016CF41E8
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 21 Jun 2011 13:51:27 +0000 (UTC)
Received: (qmail 38760 invoked by uid 500); 21 Jun 2011 13:51:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38677 invoked by uid 500); 21 Jun 2011 13:51:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38524 invoked by uid 99); 21 Jun 2011 13:51:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2011 13:51:26 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [200.14.55.1] (HELO mail.uho.edu.cu) (200.14.55.1)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2011 13:51:20 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail.uho.edu.cu (Postfix) with ESMTP id 1659F13ADB8
	for <java-user@lucene.apache.org>; Tue, 21 Jun 2011 09:49:58 -0400 (CDT)
Received: from mail.uho.edu.cu ([127.0.0.1])
	by localhost (ns1.uho.edu.cu [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id KdI54a7cpKoN for <java-user@lucene.apache.org>;
	Tue, 21 Jun 2011 09:49:58 -0400 (CDT)
Received: from facinf.uho.edu.cu (correoweb.uho.edu.cu [10.26.2.1])
	by mail.uho.edu.cu (Postfix) with ESMTP id 024ED13ADAF
	for <java-user@lucene.apache.org>; Tue, 21 Jun 2011 09:49:58 -0400 (CDT)
Received: from localhost (localhost [127.0.0.1])
	by facinf.uho.edu.cu (Postfix) with ESMTP id F397E7D695
	for <java-user@lucene.apache.org>; Tue, 21 Jun 2011 09:49:15 -0400 (CDT)
Received: from facinf.uho.edu.cu ([127.0.0.1])
	by localhost (facinf.uho.edu.cu [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id Bu5EkvmUkVkE for <java-user@lucene.apache.org>;
	Tue, 21 Jun 2011 09:49:15 -0400 (CDT)
Received: from [10.26.0.2] (unknown [10.26.0.2])
	by facinf.uho.edu.cu (Postfix) with ESMTPA id D9E387D692
	for <java-user@lucene.apache.org>; Tue, 21 Jun 2011 09:49:15 -0400 (CDT)
Message-ID: <4E00A151.3020102@facinf.uho.edu.cu>
Date: Tue, 21 Jun 2011 09:49:05 -0400
From: Marlen <zmachado@facinf.uho.edu.cu>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.2.11) Gecko/20101013 Lightning/1.0b2 Thunderbird/3.1.5 ThunderBrowse/3.3.4
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: need help
References: <4DF60712.2080503@facinf.uho.edu.cu> <BANLkTi=8jfwTshvPF07i+Mth7oHu4jZCjA@mail.gmail.com>
In-Reply-To: <BANLkTi=8jfwTshvPF07i+Mth7oHu4jZCjA@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

I need to create a search engine that searches on a intranet and my FTP ..
.. I want to use Lucene as search engine .. my question is: which best
fits my needs .. Nutch or Solr?
thank a lot
cheta


On 13/06/2011 9:17, Ian Lea wrote:
> Hello
>
>
> Lucene can be used for searching pretty much anything.  But it is a
> library, not an application, and you'll have to write code to make it
> do what you want.  You might be better off using Solr.  It uses lucene
> but provides lots of stuff on top.
> http://lucene.apache.org/solr/features.html
>
>
> --
> Ian.
>
> On Mon, Jun 13, 2011 at 1:48 PM, Marlen<zmachado@facinf.uho.edu.cu>  wrote:
>> hello Im new with lucene.. I wold like to know if I can use it to make
>> searchs on my web site and FTP.. and know if it vcan make search over
>> pdf,*.doc, and any other non plane text
>> Thanks
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50113-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun 21 13:55:27 2011
Return-Path: <java-user-return-50113-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7ED9C431D
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 21 Jun 2011 13:55:27 +0000 (UTC)
Received: (qmail 50906 invoked by uid 500); 21 Jun 2011 13:55:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50862 invoked by uid 500); 21 Jun 2011 13:55:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50854 invoked by uid 99); 21 Jun 2011 13:55:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2011 13:55:25 +0000
X-ASF-Spam-Status: No, hits=-1.6 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.18.3.98] (HELO exprod8og109.obsmtp.com) (64.18.3.98)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 21 Jun 2011 13:55:19 +0000
Received: from outboundsmtp.ariba.com ([216.109.99.43]) by exprod8ob109.postini.com ([64.18.7.12]) with SMTP
	ID DSNKTgCisucgbBOXXtviOeFWJjN7LlL6ibKX@postini.com; Tue, 21 Jun 2011 06:54:59 PDT
Received: from us-hqmail5.ariba.com ([10.12.16.112]) by outboundsmtp.ariba.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 21 Jun 2011 06:54:57 -0700
Received: from in-blrmail3.ariba.com ([10.57.16.57]) by us-hqmail5.ariba.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Tue, 21 Jun 2011 06:54:56 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: base64
Subject: RE: need help
Date: Tue, 21 Jun 2011 19:24:53 +0530
Message-ID: <A462C137C7E7DB4F9332E1009879E74EF3AA10@in-blrmail3.ariba.com>
In-Reply-To: <4E00A151.3020102@facinf.uho.edu.cu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: need help
Thread-Index: AcwwGlZLOP3IUfKWQ6quPTjXCuRtQQAABFWg
References: <4DF60712.2080503@facinf.uho.edu.cu> <BANLkTi=8jfwTshvPF07i+Mth7oHu4jZCjA@mail.gmail.com> <4E00A151.3020102@facinf.uho.edu.cu>
From: "Vinaya Kumar Thimmappa" <vthimmappa@ariba.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 21 Jun 2011 13:54:56.0991 (UTC) FILETIME=[CDFA2EF0:01CC301A]

SGVsbG8gQ2hldGEsDQoNCkNoZWNrIHRoaXMgc2l0ZSA6IGh0dHA6Ly93d3cubHVjaWRpbWFnaW5h
dGlvbi5jb20vYmxvZy8yMDA5LzAzLzA5L251dGNoLXNvbHIvDQoNCg0KVmluYXlhIA0KDQotLS0t
LU9yaWdpbmFsIE1lc3NhZ2UtLS0tLQ0KRnJvbTogTWFybGVuIFttYWlsdG86em1hY2hhZG9AZmFj
aW5mLnVoby5lZHUuY3VdIA0KU2VudDogVHVlc2RheSwgSnVuZSAyMSwgMjAxMSA3OjE5IFBNDQpU
bzogamF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnDQpTdWJqZWN0OiBuZWVkIGhlbHANCg0KSSBu
ZWVkIHRvIGNyZWF0ZSBhIHNlYXJjaCBlbmdpbmUgdGhhdCBzZWFyY2hlcyBvbiBhIGludHJhbmV0
IGFuZCBteSBGVFAgLi4NCi4uIEkgd2FudCB0byB1c2UgTHVjZW5lIGFzIHNlYXJjaCBlbmdpbmUg
Li4gbXkgcXVlc3Rpb24gaXM6IHdoaWNoIGJlc3QNCmZpdHMgbXkgbmVlZHMgLi4gTnV0Y2ggb3Ig
U29scj8NCnRoYW5rIGEgbG90DQpjaGV0YQ0KDQoNCk9uIDEzLzA2LzIwMTEgOToxNywgSWFuIExl
YSB3cm90ZToNCj4gSGVsbG8NCj4NCj4NCj4gTHVjZW5lIGNhbiBiZSB1c2VkIGZvciBzZWFyY2hp
bmcgcHJldHR5IG11Y2ggYW55dGhpbmcuICBCdXQgaXQgaXMgYQ0KPiBsaWJyYXJ5LCBub3QgYW4g
YXBwbGljYXRpb24sIGFuZCB5b3UnbGwgaGF2ZSB0byB3cml0ZSBjb2RlIHRvIG1ha2UgaXQNCj4g
ZG8gd2hhdCB5b3Ugd2FudC4gIFlvdSBtaWdodCBiZSBiZXR0ZXIgb2ZmIHVzaW5nIFNvbHIuICBJ
dCB1c2VzIGx1Y2VuZQ0KPiBidXQgcHJvdmlkZXMgbG90cyBvZiBzdHVmZiBvbiB0b3AuDQo+IGh0
dHA6Ly9sdWNlbmUuYXBhY2hlLm9yZy9zb2xyL2ZlYXR1cmVzLmh0bWwNCj4NCj4NCj4gLS0NCj4g
SWFuLg0KPg0KPiBPbiBNb24sIEp1biAxMywgMjAxMSBhdCAxOjQ4IFBNLCBNYXJsZW48em1hY2hh
ZG9AZmFjaW5mLnVoby5lZHUuY3U+ICB3cm90ZToNCj4+IGhlbGxvIEnCtG0gbmV3IHdpdGggbHVj
ZW5lLi4gSSB3b2xkIGxpa2UgdG8ga25vdyBpZiBJIGNhbiB1c2UgaXQgdG8gbWFrZQ0KPj4gc2Vh
cmNocyBvbiBteSB3ZWIgc2l0ZSBhbmQgRlRQLi4gYW5kIGtub3cgaWYgaXQgdsSEY2FuIG1ha2Ug
c2VhcmNoIG92ZXINCj4+IHBkZiwqLmRvYywgYW5kIGFueSBvdGhlciBub24gcGxhbmUgdGV4dA0K
Pj4gVGhhbmtzDQo+Pg0KPj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQo+PiBUbyB1bnN1YnNjcmliZSwgZS1tYWls
OiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcNCj4+IEZvciBhZGRpdGlv
bmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnDQo+
Pg0KPj4NCj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tDQo+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNl
ci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZw0KPiBGb3IgYWRkaXRpb25hbCBjb21tYW5k
cywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZw0KPg0KDQoNCi0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLQ0KVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1
Y2VuZS5hcGFjaGUub3JnDQpGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVz
ZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZw0KDQo=


From java-user-return-50114-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun 21 13:58:19 2011
Return-Path: <java-user-return-50114-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id F3A94451A
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 21 Jun 2011 13:58:18 +0000 (UTC)
Received: (qmail 57813 invoked by uid 500); 21 Jun 2011 13:58:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57754 invoked by uid 500); 21 Jun 2011 13:58:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57746 invoked by uid 99); 21 Jun 2011 13:58:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2011 13:58:16 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of karl.wright@nokia.com designates 147.243.128.26 as permitted sender)
Received: from [147.243.128.26] (HELO mgw-da02.nokia.com) (147.243.128.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2011 13:58:08 +0000
Received: from vaebh105.NOE.Nokia.com (vaebh105.europe.nokia.com [10.160.244.31])
	by mgw-da02.nokia.com (Switch-3.4.4/Switch-3.4.3) with ESMTP id p5LDv88Z004467
	for <java-user@lucene.apache.org>; Tue, 21 Jun 2011 16:57:46 +0300
Received: from smtp.mgd.nokia.com ([65.54.30.5]) by vaebh105.NOE.Nokia.com over TLS secured channel with Microsoft SMTPSVC(6.0.3790.4675);
	 Tue, 21 Jun 2011 16:56:40 +0300
Received: from 008-AM1MMR1-005.mgdnok.nokia.com (65.54.30.60) by
 NOK-am1MHUB-01.mgdnok.nokia.com (65.54.30.5) with Microsoft SMTP Server (TLS)
 id 8.2.255.0; Tue, 21 Jun 2011 15:56:40 +0200
Received: from 008-AM1MPN1-037.mgdnok.nokia.com ([169.254.7.78]) by
 008-AM1MMR1-005.mgdnok.nokia.com ([65.54.30.60]) with mapi id 14.01.0289.008;
 Tue, 21 Jun 2011 15:56:39 +0200
From: <karl.wright@nokia.com>
To: <java-user@lucene.apache.org>
Subject: RE: need help
Thread-Topic: need help
Thread-Index: AQHMKch3Uz5he/LK1E2NAv/ZkX5q+pS7I0iAgAybmICAACM+4A==
Date: Tue, 21 Jun 2011 13:56:39 +0000
Message-ID: <0C2ADA45C80B224FAFA38F5DEE16A16E0E6BA3@008-AM1MPN1-037.mgdnok.nokia.com>
References: <4DF60712.2080503@facinf.uho.edu.cu>
 <BANLkTi=8jfwTshvPF07i+Mth7oHu4jZCjA@mail.gmail.com>
 <4E00A151.3020102@facinf.uho.edu.cu>
In-Reply-To: <4E00A151.3020102@facinf.uho.edu.cu>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
x-originating-ip: [172.18.51.208]
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-OriginalArrivalTime: 21 Jun 2011 13:56:40.0516 (UTC) FILETIME=[0BAED840:01CC301B]
X-Nokia-AV: Clean
X-Virus-Checked: Checked by ClamAV on apache.org

WW91IG1pZ2h0IHdhbnQgdG8gbG9vayBhdCBNYW5pZm9sZENGIHRvby4NCg0KaHR0cDovL2luY3Vi
YXRvci5hcGFjaGUub3JnL2Nvbm5lY3RvcnMvDQoNCkthcmwNCg0KLS0tLS1PcmlnaW5hbCBNZXNz
YWdlLS0tLS0NCkZyb206IGV4dCBNYXJsZW4gW21haWx0bzp6bWFjaGFkb0BmYWNpbmYudWhvLmVk
dS5jdV0gDQpTZW50OiBUdWVzZGF5LCBKdW5lIDIxLCAyMDExIDk6NDkgQU0NClRvOiBqYXZhLXVz
ZXJAbHVjZW5lLmFwYWNoZS5vcmcNClN1YmplY3Q6IG5lZWQgaGVscA0KDQpJIG5lZWQgdG8gY3Jl
YXRlIGEgc2VhcmNoIGVuZ2luZSB0aGF0IHNlYXJjaGVzIG9uIGEgaW50cmFuZXQgYW5kIG15IEZU
UCAuLg0KLi4gSSB3YW50IHRvIHVzZSBMdWNlbmUgYXMgc2VhcmNoIGVuZ2luZSAuLiBteSBxdWVz
dGlvbiBpczogd2hpY2ggYmVzdCBmaXRzIG15IG5lZWRzIC4uIE51dGNoIG9yIFNvbHI/DQp0aGFu
ayBhIGxvdA0KY2hldGENCg0KDQpPbiAxMy8wNi8yMDExIDk6MTcsIElhbiBMZWEgd3JvdGU6DQo+
IEhlbGxvDQo+DQo+DQo+IEx1Y2VuZSBjYW4gYmUgdXNlZCBmb3Igc2VhcmNoaW5nIHByZXR0eSBt
dWNoIGFueXRoaW5nLiAgQnV0IGl0IGlzIGEgDQo+IGxpYnJhcnksIG5vdCBhbiBhcHBsaWNhdGlv
biwgYW5kIHlvdSdsbCBoYXZlIHRvIHdyaXRlIGNvZGUgdG8gbWFrZSBpdCANCj4gZG8gd2hhdCB5
b3Ugd2FudC4gIFlvdSBtaWdodCBiZSBiZXR0ZXIgb2ZmIHVzaW5nIFNvbHIuICBJdCB1c2VzIGx1
Y2VuZSANCj4gYnV0IHByb3ZpZGVzIGxvdHMgb2Ygc3R1ZmYgb24gdG9wLg0KPiBodHRwOi8vbHVj
ZW5lLmFwYWNoZS5vcmcvc29sci9mZWF0dXJlcy5odG1sDQo+DQo+DQo+IC0tDQo+IElhbi4NCj4N
Cj4gT24gTW9uLCBKdW4gMTMsIDIwMTEgYXQgMTo0OCBQTSwgTWFybGVuPHptYWNoYWRvQGZhY2lu
Zi51aG8uZWR1LmN1PiAgd3JvdGU6DQo+PiBoZWxsbyBJwrRtIG5ldyB3aXRoIGx1Y2VuZS4uIEkg
d29sZCBsaWtlIHRvIGtub3cgaWYgSSBjYW4gdXNlIGl0IHRvIA0KPj4gbWFrZSBzZWFyY2hzIG9u
IG15IHdlYiBzaXRlIGFuZCBGVFAuLiBhbmQga25vdyBpZiBpdCB2xIRjYW4gbWFrZSANCj4+IHNl
YXJjaCBvdmVyIHBkZiwqLmRvYywgYW5kIGFueSBvdGhlciBub24gcGxhbmUgdGV4dCBUaGFua3MN
Cj4+DQo+PiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0NCj4+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNl
ci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZw0KPj4gRm9yIGFkZGl0aW9uYWwgY29tbWFu
ZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcNCj4+DQo+Pg0KPiAt
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0NCj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2Ny
aWJlQGx1Y2VuZS5hcGFjaGUub3JnDQo+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6
IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnDQo+DQoNCg0KLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQpU
byB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNo
ZS5vcmcNCkZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1
Y2VuZS5hcGFjaGUub3JnDQoNCg==


From java-user-return-50115-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun 21 15:27:38 2011
Return-Path: <java-user-return-50115-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 101BB47B1
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 21 Jun 2011 15:27:37 +0000 (UTC)
Received: (qmail 63201 invoked by uid 500); 21 Jun 2011 15:27:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63167 invoked by uid 500); 21 Jun 2011 15:27:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63159 invoked by uid 99); 21 Jun 2011 15:27:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2011 15:27:35 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jdevgl@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2011 15:27:28 +0000
Received: by wyb36 with SMTP id 36so2214160wyb.35
        for <java-user@lucene.apache.org>; Tue, 21 Jun 2011 08:27:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:message-id:date:from:user-agent:mime-version:to
         :subject:content-type:content-transfer-encoding;
        bh=7VD5RcKxPdkTxqYiPvjZJNmiJ753jQNoIUd9L9IrOX4=;
        b=law3i2x6QhWmWgRtT8/RHAPIXZFnE/hNWoNklMLpe6VYRKlqfKUMaaF0I762QdKHiN
         D/o+6fPfmNAVto9kRjVwIe8+2pRun7fB7B27K85/znOl2y6jNbKhJALZmnxvIzKuqvY/
         qTgaMlhLI0RIcpMYsJ5+xVfeDR/ZPmLeM7W4s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject
         :content-type:content-transfer-encoding;
        b=MFwjG0P0Ppg3QLF2QARACgCDtXjjtsrLIS0tmoEo50SeIdvJMdWE7Cp3qVa/vjvdn8
         E77J1OcQfVuXD/LA3/c7m0WXBSontrCSoecTE2xjPSMjYZAlJ3mv+uFAoUlPlX+gXU9a
         gfULX23s1+1IF1vTknvok4dg2Z7HZ31eFSBM4=
Received: by 10.216.155.195 with SMTP id j45mr1052467wek.30.1308670026602;
        Tue, 21 Jun 2011 08:27:06 -0700 (PDT)
Received: from [192.168.20.14] (LPuteaux-151-41-16-99.w217-128.abo.wanadoo.fr [217.128.31.99])
        by mx.google.com with ESMTPS id c17sm4087096wbh.29.2011.06.21.08.27.05
        (version=SSLv3 cipher=OTHER);
        Tue, 21 Jun 2011 08:27:06 -0700 (PDT)
Message-ID: <4E00B849.101@gmail.com>
Date: Tue, 21 Jun 2011 17:27:05 +0200
From: "G.Long" <jdevgl@gmail.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; fr; rv:1.9.2.17) Gecko/20110414 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: question about wildcards
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Hi :)

I've got the following text indexed with simpleAnalyzer :

"security is a real problem."

If I try to search for secu*, it will find the document. But if I try to 
search for curi*, there are no results.

I raed that it's not possible to add a * wildcard at the begining of the 
query so what should I do to handle this type of query where the user 
write just a part of the word (which is in the middle of the word) ?

Thank you :)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50116-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun 21 15:39:10 2011
Return-Path: <java-user-return-50116-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BB4EF40AF
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 21 Jun 2011 15:39:10 +0000 (UTC)
Received: (qmail 89041 invoked by uid 500); 21 Jun 2011 15:39:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89008 invoked by uid 500); 21 Jun 2011 15:39:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89000 invoked by uid 99); 21 Jun 2011 15:39:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2011 15:39:08 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2011 15:39:02 +0000
Received: by iwi5 with SMTP id 5so6251255iwi.35
        for <java-user@lucene.apache.org>; Tue, 21 Jun 2011 08:38:41 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=nWcRS5vsl2Jwf3FvWiPzIJ//7m4RSAqFNB/wxvJDyYY=;
        b=qTr/3XH0ph3zTJ05TUJMzD8DPINrnAnV3ew+kvZzkqmyd+ONXKntth4LPKbFqQ+BgD
         Sf30Fq6o02HPqOvvCeZHKPaDbeDXD1+PuC/zDBsEXAgZosU+uCsvh8jCf92GAuj4QxZ/
         441+SWaHWSDrnvPNU+Uy6yuLTQNnts6vM8GQQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=H8OmSGpldA1VYwTvRWa0uJXHLE8IyjwwEdTj8Zn5HQyaBglGNXhJ3lIAA9vjsF4Fan
         RqWvLEi1f60TLu5TNfBEtIcQOzYCXa2dPG9ZAMjaIIABUQg3wyiy+l6EWj8GatJzEybV
         gZtxqJLyu/TzDelkQd/KSjmIV3ruVpxtYMbOQ=
Received: by 10.231.112.150 with SMTP id w22mr4346674ibp.61.1308670721132;
 Tue, 21 Jun 2011 08:38:41 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.199.148 with HTTP; Tue, 21 Jun 2011 08:38:21 -0700 (PDT)
In-Reply-To: <4E00B849.101@gmail.com>
References: <4E00B849.101@gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Tue, 21 Jun 2011 16:38:21 +0100
Message-ID: <BANLkTiny_jJL9y-2-Hnn+ZzfFC4wx9VGCQ@mail.gmail.com>
Subject: Re: question about wildcards
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

See the javadocs for QueryParser.setAllowLeadingWildcard(boolean
allowLeadingWildcard).  And from the FAQ, see
http://wiki.apache.org/lucene-java/LuceneFAQ#What_wildcard_search_support_is_available_from_Lucene.3F

Be sure to heed the warnings about performance.


--
Ian.

On Tue, Jun 21, 2011 at 4:27 PM, G.Long <jdevgl@gmail.com> wrote:
> Hi :)
>
> I've got the following text indexed with simpleAnalyzer :
>
> "security is a real problem."
>
> If I try to search for secu*, it will find the document. But if I try to
> search for curi*, there are no results.
>
> I raed that it's not possible to add a * wildcard at the begining of the
> query so what should I do to handle this type of query where the user write
> just a part of the word (which is in the middle of the word) ?
>
> Thank you :)
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50117-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun 21 15:43:11 2011
Return-Path: <java-user-return-50117-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C98344376
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 21 Jun 2011 15:43:11 +0000 (UTC)
Received: (qmail 99803 invoked by uid 500); 21 Jun 2011 15:43:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99765 invoked by uid 500); 21 Jun 2011 15:43:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99757 invoked by uid 99); 21 Jun 2011 15:43:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2011 15:43:09 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jdevgl@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2011 15:43:01 +0000
Received: by wyb36 with SMTP id 36so2233862wyb.35
        for <java-user@lucene.apache.org>; Tue, 21 Jun 2011 08:42:40 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:message-id:date:from:user-agent:mime-version:to
         :subject:references:in-reply-to:content-type
         :content-transfer-encoding;
        bh=ls98BOSwGwI0vYmtoALGXGoWyK3MWfIMfpa1vSy90qo=;
        b=qGDnXj3KNUcz4wAVOyMZxfW8fAna9MYfAD2A5JgsufdKHU3mVgKErQlqKwsr1zp/c3
         JeZMvsDqbb5ATa/eO/s7LYGKSvMNCwuTGtiEGA1JTH6dCnSDrwuv0PxB8JR4tusHSR8G
         HBiT9VpyPesmRbH1B2pPIZvFC176uMZR9mJjM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=JTYE2zENoULhajDhlx37EpAFHUPhZqAh2x9qTc083DZPRrCLXuAvlDFScZjPAnanLx
         S673r9Fl6E2M8fRt5RqG1TY2s7DKwlc/tGR5DsZdftpga1KyWKoFFL6k/CVU3yemyWOA
         4w+dEjha+7QqyLhIjEMDVeub/oMuFy6YtDazg=
Received: by 10.227.55.7 with SMTP id s7mr5022635wbg.65.1308670960516;
        Tue, 21 Jun 2011 08:42:40 -0700 (PDT)
Received: from [192.168.20.14] (LPuteaux-151-41-16-99.w217-128.abo.wanadoo.fr [217.128.31.99])
        by mx.google.com with ESMTPS id m8sm4097694wbh.28.2011.06.21.08.42.39
        (version=SSLv3 cipher=OTHER);
        Tue, 21 Jun 2011 08:42:40 -0700 (PDT)
Message-ID: <4E00BBEF.7060302@gmail.com>
Date: Tue, 21 Jun 2011 17:42:39 +0200
From: "G.Long" <jdevgl@gmail.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; fr; rv:1.9.2.17) Gecko/20110414 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: question about wildcards
References: <4E00B849.101@gmail.com> <BANLkTiny_jJL9y-2-Hnn+ZzfFC4wx9VGCQ@mail.gmail.com>
In-Reply-To: <BANLkTiny_jJL9y-2-Hnn+ZzfFC4wx9VGCQ@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit

Thank you for the tip :)

I'll try it.

Regards,
Gary

Le 21/06/2011 17:38, Ian Lea a crit :
> See the javadocs for QueryParser.setAllowLeadingWildcard(boolean
> allowLeadingWildcard).  And from the FAQ, see
> http://wiki.apache.org/lucene-java/LuceneFAQ#What_wildcard_search_support_is_available_from_Lucene.3F
>
> Be sure to heed the warnings about performance.
>
>
> --
> Ian.
>
> On Tue, Jun 21, 2011 at 4:27 PM, G.Long<jdevgl@gmail.com>  wrote:
>> Hi :)
>>
>> I've got the following text indexed with simpleAnalyzer :
>>
>> "security is a real problem."
>>
>> If I try to search for secu*, it will find the document. But if I try to
>> search for curi*, there are no results.
>>
>> I raed that it's not possible to add a * wildcard at the begining of the
>> query so what should I do to handle this type of query where the user write
>> just a part of the word (which is in the middle of the word) ?
>>
>> Thank you :)
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50118-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun 21 16:05:12 2011
Return-Path: <java-user-return-50118-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CBB55481D
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 21 Jun 2011 16:05:12 +0000 (UTC)
Received: (qmail 56307 invoked by uid 500); 21 Jun 2011 16:05:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56230 invoked by uid 500); 21 Jun 2011 16:05:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 96452 invoked by uid 99); 20 Jun 2011 09:13:49 -0000
X-ASF-Spam-Status: No, hits=2.0 required=5.0
	tests=FREEMAIL_FROM,RFC_ABUSE_POST,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 216.139.236.26 is neither permitted nor denied by domain of marc.sturlese@gmail.com)
Date: Mon, 20 Jun 2011 02:13:22 -0700 (PDT)
From: Marc Sturlese <marc.sturlese@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1308561202025-3085456.post@n3.nabble.com>
Subject: About IndexReader.reopen with very similar indexes
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hey there, 
I have a doubt about the behaviour of IndexReader.reopen.
I have a tomcat server holding a lucene index over an IndexSearcher. If I
move the index.folder to index.folder.old and another index, let's say
index.folder.2 to index.folder and then I reopen readers, something weird
happen if the first index and the second have very similar size and are
built from scratch. It seems that when I get the new reader and compare with
the new one:

 IndexReader reader = ... 
 ...
 IndexReader newReader = r.reopen();
 if (newReader != reader) {
 ...     // reader was reopened
   reader.close(); 
 }
 reader = newReader;
 ...

Lucene does not detect that are different indexes.
Here you can see both indexes (have same number of files and names are
similar, but sizes are a bit different, as contained documents are not
exactly the same).
*This does not happen if indexes have much more differents sizes (and so,
file names will not be equal, ex: _4.fdt, etc)
 
Index1:
-rw-r--r--   1 marc  admin  269289634 15 Jun 15:52 _3.fdt
-rw-r--r--   1 marc  admin    2066764 15 Jun 15:52 _3.fdx
-rw-r--r--   1 marc  admin        463 15 Jun 15:52 _3.fnm
-rw-r--r--   1 marc  admin   40358787 15 Jun 15:52 _3.frq
-rw-r--r--   1 marc  admin    1033384 15 Jun 15:52 _3.nrm
-rw-r--r--   1 marc  admin   27014923 15 Jun 15:52 _3.prx
-rw-r--r--   1 marc  admin     234797 15 Jun 15:52 _3.tii
-rw-r--r--   1 marc  admin   19322234 15 Jun 15:52 _3.tis
-rw-r--r--   1 marc  admin         20 15 Jun 15:52 segments.gen
-rw-r--r--   1 marc  admin        298 15 Jun 15:52 segments_2

Index2:
-rw-r--r--   1 marc  admin  269044254 15 Jun 15:52 _3.fdt
-rw-r--r--   1 marc  admin    2068116 15 Jun 15:52 _3.fdx
-rw-r--r--   1 marc  admin        463 15 Jun 15:52 _3.fnm
-rw-r--r--   1 marc  admin   40320465 15 Jun 15:52 _3.frq
-rw-r--r--   1 marc  admin    1034060 15 Jun 15:52 _3.nrm
-rw-r--r--   1 marc  admin   26967519 15 Jun 15:52 _3.prx
-rw-r--r--   1 marc  admin     235895 15 Jun 15:52 _3.tii
-rw-r--r--   1 marc  admin   19372446 15 Jun 15:52 _3.tis
-rw-r--r--   1 marc  admin         20 15 Jun 15:52 segments.gen
-rw-r--r--   1 marc  admin        298 15 Jun 15:52 segments_2

Can someone explain me the lucene criteria to decide if a segment has
changed or not?
Thanks in advance.


--
View this message in context: http://lucene.472066.n3.nabble.com/About-IndexReader-reopen-with-very-similar-indexes-tp3085456p3085456.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50119-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun 21 16:05:35 2011
Return-Path: <java-user-return-50119-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2A2344858
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 21 Jun 2011 16:05:35 +0000 (UTC)
Received: (qmail 59542 invoked by uid 500); 21 Jun 2011 16:05:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59498 invoked by uid 500); 21 Jun 2011 16:05:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 31846 invoked by uid 99); 21 Jun 2011 11:23:20 -0000
X-ASF-Spam-Status: No, hits=2.0 required=5.0
	tests=FREEMAIL_FROM,RFC_ABUSE_POST,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 216.139.236.26 is neither permitted nor denied by domain of lichman@gmail.com)
Date: Tue, 21 Jun 2011 04:22:54 -0700 (PDT)
From: lichman <lichman@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1308655374681-3090213.post@n3.nabble.com>
In-Reply-To: <168005801339660@mail.mainsequence.net>
References: <740221930626904@mail.mainsequence.net> <168005801339660@mail.mainsequence.net>
Subject: Re: ComplexPhraseQueryParser with multiple fields
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Say,
Which of the solutions did you find to work better?
Can you please say which package should I change it to if I choose to do it
that way?

Thanks,
Moshe Lichman.


--
View this message in context: http://lucene.472066.n3.nabble.com/ComplexPhraseQueryParser-with-multiple-fields-tp2879290p3090213.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50120-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun 21 16:28:52 2011
Return-Path: <java-user-return-50120-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B6181485D
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 21 Jun 2011 16:28:52 +0000 (UTC)
Received: (qmail 13577 invoked by uid 500); 21 Jun 2011 16:28:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13516 invoked by uid 500); 21 Jun 2011 16:28:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13508 invoked by uid 99); 21 Jun 2011 16:28:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2011 16:28:50 +0000
X-ASF-Spam-Status: No, hits=1.3 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2011 16:28:45 +0000
Received: by vws7 with SMTP id 7so3098590vws.35
        for <java-user@lucene.apache.org>; Tue, 21 Jun 2011 09:28:24 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.52.98.73 with SMTP id eg9mr1847163vdb.110.1308673704184; Tue,
 21 Jun 2011 09:28:24 -0700 (PDT)
Received: by 10.52.169.130 with HTTP; Tue, 21 Jun 2011 09:28:24 -0700 (PDT)
In-Reply-To: <1308561202025-3085456.post@n3.nabble.com>
References: <1308561202025-3085456.post@n3.nabble.com>
Date: Tue, 21 Jun 2011 12:28:24 -0400
Message-ID: <BANLkTimxoDvM62Q5nT1P5YmdVzGxJWYAvQ@mail.gmail.com>
Subject: Re: About IndexReader.reopen with very similar indexes
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Reopening is based entirely on the latest segments_N file present in the in=
dex.

Lucene loads that file and checks if it refers to any new segments not
already open and if so opens those new ones.  And segments in common
with what the reader already has open (ie same segment name) are
simply reused.

Lucene doesn't look at file modification times, etc.

Mike McCandless

http://blog.mikemccandless.com

On Mon, Jun 20, 2011 at 5:13 AM, Marc Sturlese <marc.sturlese@gmail.com> wr=
ote:
> Hey there,
> I have a doubt about the behaviour of IndexReader.reopen.
> I have a tomcat server holding a lucene index over an IndexSearcher. If I
> move the index.folder to index.folder.old and another index, let's say
> index.folder.2 to index.folder and then I reopen readers, something weird
> happen if the first index and the second have very similar size and are
> built from scratch. It seems that when I get the new reader and compare w=
ith
> the new one:
>
> =A0IndexReader reader =3D ...
> =A0...
> =A0IndexReader newReader =3D r.reopen();
> =A0if (newReader !=3D reader) {
> =A0... =A0 =A0 // reader was reopened
> =A0 reader.close();
> =A0}
> =A0reader =3D newReader;
> =A0...
>
> Lucene does not detect that are different indexes.
> Here you can see both indexes (have same number of files and names are
> similar, but sizes are a bit different, as contained documents are not
> exactly the same).
> *This does not happen if indexes have much more differents sizes (and so,
> file names will not be equal, ex: _4.fdt, etc)
>
> Index1:
> -rw-r--r-- =A0 1 marc =A0admin =A0269289634 15 Jun 15:52 _3.fdt
> -rw-r--r-- =A0 1 marc =A0admin =A0 =A02066764 15 Jun 15:52 _3.fdx
> -rw-r--r-- =A0 1 marc =A0admin =A0 =A0 =A0 =A0463 15 Jun 15:52 _3.fnm
> -rw-r--r-- =A0 1 marc =A0admin =A0 40358787 15 Jun 15:52 _3.frq
> -rw-r--r-- =A0 1 marc =A0admin =A0 =A01033384 15 Jun 15:52 _3.nrm
> -rw-r--r-- =A0 1 marc =A0admin =A0 27014923 15 Jun 15:52 _3.prx
> -rw-r--r-- =A0 1 marc =A0admin =A0 =A0 234797 15 Jun 15:52 _3.tii
> -rw-r--r-- =A0 1 marc =A0admin =A0 19322234 15 Jun 15:52 _3.tis
> -rw-r--r-- =A0 1 marc =A0admin =A0 =A0 =A0 =A0 20 15 Jun 15:52 segments.g=
en
> -rw-r--r-- =A0 1 marc =A0admin =A0 =A0 =A0 =A0298 15 Jun 15:52 segments_2
>
> Index2:
> -rw-r--r-- =A0 1 marc =A0admin =A0269044254 15 Jun 15:52 _3.fdt
> -rw-r--r-- =A0 1 marc =A0admin =A0 =A02068116 15 Jun 15:52 _3.fdx
> -rw-r--r-- =A0 1 marc =A0admin =A0 =A0 =A0 =A0463 15 Jun 15:52 _3.fnm
> -rw-r--r-- =A0 1 marc =A0admin =A0 40320465 15 Jun 15:52 _3.frq
> -rw-r--r-- =A0 1 marc =A0admin =A0 =A01034060 15 Jun 15:52 _3.nrm
> -rw-r--r-- =A0 1 marc =A0admin =A0 26967519 15 Jun 15:52 _3.prx
> -rw-r--r-- =A0 1 marc =A0admin =A0 =A0 235895 15 Jun 15:52 _3.tii
> -rw-r--r-- =A0 1 marc =A0admin =A0 19372446 15 Jun 15:52 _3.tis
> -rw-r--r-- =A0 1 marc =A0admin =A0 =A0 =A0 =A0 20 15 Jun 15:52 segments.g=
en
> -rw-r--r-- =A0 1 marc =A0admin =A0 =A0 =A0 =A0298 15 Jun 15:52 segments_2
>
> Can someone explain me the lucene criteria to decide if a segment has
> changed or not?
> Thanks in advance.
>
>
> --
> View this message in context: http://lucene.472066.n3.nabble.com/About-In=
dexReader-reopen-with-very-similar-indexes-tp3085456p3085456.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50121-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun 21 17:04:42 2011
Return-Path: <java-user-return-50121-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id EA7C64FB6
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 21 Jun 2011 17:04:42 +0000 (UTC)
Received: (qmail 84216 invoked by uid 500); 21 Jun 2011 17:04:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84163 invoked by uid 500); 21 Jun 2011 17:04:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84155 invoked by uid 99); 21 Jun 2011 17:04:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2011 17:04:40 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of tangri.anupam@gmail.com designates 209.85.213.176 as permitted sender)
Received: from [209.85.213.176] (HELO mail-yx0-f176.google.com) (209.85.213.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2011 17:04:32 +0000
Received: by yxd5 with SMTP id 5so4049878yxd.35
        for <java-user@lucene.apache.org>; Tue, 21 Jun 2011 10:04:12 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:from:date:message-id:subject:to
         :content-type;
        bh=GcaQ+dtr5SQYM3jrzvkMOYrK5M5IsYI7Zc5bdDqRSC0=;
        b=W1EuhJ/2/v3PpQ0VASPR63EanuVTyDT+umw0VrML3wvex+ifZWZquxhhsFh83s6xsv
         U6lM+DJK6VdWCWHsZ58Dd/9o2QfiSAzZ7bIbOAZP8pZOPKR8HVfP4vi6Omry7gqgg+fR
         X/BZubx4eDa8IIcghWXUI0MOq6aj7sDG/azuU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=tlzdLVYnN4RoLxb574udSF4R3J4jQ/ctJnDwu9+//ysVstt+WjRNhYldXq1Ea+b0Gz
         a7aig1ZYCc381svUNv+y4F/GZ9xvr3g9+ZsSssrKCY/fupa+kEofmrw9IoZSOlPzMgD+
         nyUBMtMBjy8djjx46vPF0VZsXqTvVAoZVxM1A=
Received: by 10.150.99.5 with SMTP id w5mr4786110ybb.329.1308675852059; Tue,
 21 Jun 2011 10:04:12 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.147.35.15 with HTTP; Tue, 21 Jun 2011 10:03:52 -0700 (PDT)
From: Anupam Tangri <tangri.anupam@gmail.com>
Date: Tue, 21 Jun 2011 22:33:52 +0530
Message-ID: <BANLkTinBTeZNWPiH4K3tk=ZHmfXcS3-y2A@mail.gmail.com>
Subject: Solution for FHV and NGram Max Min Gram Restriction
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd296da49c60704a63bd72c
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd296da49c60704a63bd72c
Content-Type: text/plain; charset=ISO-8859-1

Hi,

We are using lucene 3.2 for our project where I needed to highlight search
matches.  I earlier used default highlighter which did not work correctly
all the time.
So, I started using FHV which worked worked beautifully till I started
searching multiple terms. On digging I came to know FHV has a restriction of
minGram=maxGram for Ngram fields.

I think, it makes is practically useless for nGramText fields. Is their a
plan/patch available to remove this restriction?

Thanks,
Anupam

--000e0cd296da49c60704a63bd72c--

From java-user-return-50122-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun 21 17:34:53 2011
Return-Path: <java-user-return-50122-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C78514D50
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 21 Jun 2011 17:34:53 +0000 (UTC)
Received: (qmail 63886 invoked by uid 500); 21 Jun 2011 17:34:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63804 invoked by uid 500); 21 Jun 2011 17:34:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63796 invoked by uid 99); 21 Jun 2011 17:34:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2011 17:34:51 +0000
X-ASF-Spam-Status: No, hits=-0.1 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dean.hiller@broadridge.com designates 64.18.2.173 as permitted sender)
Received: from [64.18.2.173] (HELO exprod7og110.obsmtp.com) (64.18.2.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2011 17:34:41 +0000
Received: from gwm.broadridge.com ([167.212.2.180]) (using TLSv1) by exprod7ob110.postini.com ([64.18.6.12]) with SMTP
	ID DSNKTgDWG9aSvMQmbVk//8yMhjPE+rKIxPmK@postini.com; Tue, 21 Jun 2011 10:34:20 PDT
Received: from jsppsldlpsi01.broadridge.net ([10.98.54.11])
	by gwm.broadridge.com (8.13.8/8.13.8) with ESMTP id p5LHYIYm1052782
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Tue, 21 Jun 2011 13:34:18 -0400
Received: from JSIPSWEXHA02.bsg.ad.adp.com (jsipswexha02.bsg.ad.adp.com [10.17.69.34]) by jsppsldlpsi01.broadridge.net (RSA Interceptor) for <java-user@lucene.apache.org>; Tue, 21 Jun 2011 13:34:11 -0400
Received: from jscpcwexmaa1.bsg.ad.adp.com ([fe80::882f:16e8:308d:3ef]) by
 JSIPSWEXHA02.bsg.ad.adp.com ([::1]) with mapi; Tue, 21 Jun 2011 13:34:09
 -0400
From: "Hiller, Dean  x66079" <dean.hiller@broadridge.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Tue, 21 Jun 2011 13:34:04 -0400
Subject: why is query picking up extra result
Thread-Topic: why is query picking up extra result
Thread-Index: AcwwOWq6hY+YXESqRIWHjlR2j9GPsQ==
Message-ID: <08230D4C8E666D479F6DE495A7684DCD0AC2ECD1@JSCPCWEXMAA1.bsg.ad.adp.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: en-US
Content-Type: multipart/alternative;
	boundary="_000_08230D4C8E666D479F6DE495A7684DCD0AC2ECD1JSCPCWEXMAA1bsg_"
MIME-Version: 1.0
X-RSA-Inspected: yes
X-RSA-Classifications: public
X-RSA-Action: allow
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_08230D4C8E666D479F6DE495A7684DCD0AC2ECD1JSCPCWEXMAA1bsg_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Because when I use [ 20110601 TO * ] lucene does not return my results grea=
ter than 20110601 but when I use
[20110601 TO 99999999], it works fine.  Why is this?  How do I get everythi=
ng larger than 20110601.  I have another
Case of sequence numbers and want to get everything above a certain number =
so I don't know what number
I should really include on the left side...I can include a long for now I g=
uess but that is really a hack.  I just
Simply want where sequence > 5678

Is there any way to do this?

Thanks,
Dean


This message and any attachments are intended only for the use of the add=
ressee and
may contain information that is privileged and confidential. If the reade=
r of the =

message is not the intended recipient or an authorized representative of =
the
intended recipient, you are hereby notified that any dissemination of thi=
s
communication is strictly prohibited. If you have received this communica=
tion in
error, please notify us immediately by e-mail and delete the message and =
any
attachments from your system.
=0D
--_000_08230D4C8E666D479F6DE495A7684DCD0AC2ECD1JSCPCWEXMAA1bsg_--

From java-user-return-50123-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun 21 17:38:17 2011
Return-Path: <java-user-return-50123-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 282B34E92
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 21 Jun 2011 17:38:17 +0000 (UTC)
Received: (qmail 75192 invoked by uid 500); 21 Jun 2011 17:38:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75141 invoked by uid 500); 21 Jun 2011 17:38:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75133 invoked by uid 99); 21 Jun 2011 17:38:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2011 17:38:14 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.210.48 as permitted sender)
Received: from [209.85.210.48] (HELO mail-pz0-f48.google.com) (209.85.210.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2011 17:38:07 +0000
Received: by pzk10 with SMTP id 10so6020832pzk.35
        for <java-user@lucene.apache.org>; Tue, 21 Jun 2011 10:37:46 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type:content-transfer-encoding;
        bh=/0sXXlv+6xnHHMav0sUb7u3iQmxOE4ITXfnA/y1g4B8=;
        b=vj3tPdEvVB/DdSkz5uQJ9pPQSyTzujrj3/op8s+KuKP+8+mjP4ZNAquPPR3oXKLy1o
         CmNrlIc6EmJkynqiA56pM9lEtuF8+GRetQU2KJZ5J+kkV4OwPJvB9KysB7HWrcE+eG9V
         iILbG0ZUxiR5XB3MpFj0g+wwyZvpn3FammyLk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=GqJyE6IUC1H2vvFmG3UEX8p1QELxJITOe18u3FvBnEZVMT2FENnskrenX+cB1lPJrE
         k7CcAoJ5EpQCcxPu/NIyT7z/HQ8CFaX/+5Ep5UM5iEGeGpiY4fAKc8uO+KvFa1V1WpOd
         mmwGTd2znqzzcdXlRPGGqEVYI9c79n+oU0s+I=
MIME-Version: 1.0
Received: by 10.68.1.68 with SMTP id 4mr3145007pbk.306.1308677866414; Tue, 21
 Jun 2011 10:37:46 -0700 (PDT)
Received: by 10.68.41.133 with HTTP; Tue, 21 Jun 2011 10:37:46 -0700 (PDT)
In-Reply-To: <17741_1308659988_ZZh0u321fM5SQ.00_4E009113.6020402@uni-bielefeld.de>
References: <780_1308648748_ZZh0u11fzJ~dL.00_4E00652B.6010903@uni-bielefeld.de>
	<BANLkTimEr4zLRVtpay3X-HpEpVd+gJoc5Q@mail.gmail.com>
	<17741_1308659988_ZZh0u321fM5SQ.00_4E009113.6020402@uni-bielefeld.de>
Date: Tue, 21 Jun 2011 13:37:46 -0400
Message-ID: <BANLkTim=qM=nfOXNoJBw-95h5+HTuqH20A@mail.gmail.com>
Subject: Re: questions about fieldCache
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

> So action that starts a new searcher and closes the old one (like
> replication)
> should release cache from fieldCache through garbage collection?

Absolutely. It won't be immediate, because the JVM has some
heuristics it uses to initiate garbage collection. You could try
attaching to the Solr instance with jConsole and use that to trigger
garbage collections to see what that could tell you...

Best
Erick

On Tue, Jun 21, 2011 at 8:39 AM, Bernd Fehling
<bernd.fehling@uni-bielefeld.de> wrote:
>
> Currently I'm using version 3.2.
> I used already 4.x some month ago but there was to much change to that ti=
me
> so I decided to go with 3.0.x and updated to 3.1 and now to 3.2.
>
> I'm still dealing with my fieldCache OOM issue and want to understand
> why things are as they are.
> I have already removed/solved one "insane message" from fieldCache and
> three ReadOnlyDirectoryReader Entries from fieldCache.
> Only sorting produces now an entry.
>
> So action that starts a new searcher and closes the old one (like
> replication)
> should release cache from fieldCache through garbage collection?
>
> Regards
> Bernd
>
> Am 21.06.2011 13:49, schrieb Erick Erickson:
>>
>> Hmmm, I'm not going to even try to talk about the code itself, but I wil=
l
>> add
>> a couple of clarifications:
>>
>> Jetty has nothing to do with it. It's in Lucene, and it's used for sorti=
ng
>> and
>> sometimes faceting. The cache is associated with a reader on a machine
>> used to search. When replication happens, that searcher should be closed
>> and any data associated with the cache is returned to the system.
>>
>> Someone else will have to chime in on the underlying details<G>..
>>
>> By the way, what version of Solr are you using? Because the memory
>> requirements for string sorting and faceting have been drastically
>> reduced on the trunk version. In a really rough test I've seen 75%
>> reductions in memory requirements (note I was doing the worst things
>> I could think of, so I don't necessarily expect your results to be as
>> drastic).
>>
>> Best
>> Erick
>>
>> On Tue, Jun 21, 2011 at 5:32 AM, Bernd Fehling
>> <bernd.fehling@uni-bielefeld.de> =A0wrote:
>>>
>>> I'm trying to understand the logic of/behind fieldCache.
>>>
>>> Who has written this peace of code or has good knowledge about it?
>>>
>>> Why is it under the hood of jetty?
>>>
>>> I see FieldCache$StringIndex with
>>> - f_dccollection
>>> - f_dcyear
>>> - f_dctype
>>> but also
>>> - dctitle --> =A0f_dctitle --> =A0f_dccreator
>>> - title --> =A0f_dcyear
>>>
>>> There are some entries without further reference like the first example=
s
>>> and some that have references to further HashMaps like a chain.
>>> Why is it this way, what is the purpose?
>>>
>>> What is fieldCache doing if a server is replicated, will all old conten=
t
>>> be cleaned up because of a new index with new content?
>>>
>>> Regards
>>> Bernd
>>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50124-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun 21 17:43:47 2011
Return-Path: <java-user-return-50124-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 077ED41AB
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 21 Jun 2011 17:43:47 +0000 (UTC)
Received: (qmail 88575 invoked by uid 500); 21 Jun 2011 17:43:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88524 invoked by uid 500); 21 Jun 2011 17:43:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88516 invoked by uid 99); 21 Jun 2011 17:43:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2011 17:43:44 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dean.hiller@broadridge.com designates 64.18.2.173 as permitted sender)
Received: from [64.18.2.173] (HELO exprod7og110.obsmtp.com) (64.18.2.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2011 17:43:36 +0000
Received: from gwm.broadridge.com ([167.212.2.180]) (using TLSv1) by exprod7ob110.postini.com ([64.18.6.12]) with SMTP
	ID DSNKTgDYM3JZq8bAVoSATDNviP9SLXMS8cO3@postini.com; Tue, 21 Jun 2011 10:43:16 PDT
Received: from jsppsldlpsi02.broadridge.net ([10.98.54.12])
	by gwm.broadridge.com (8.13.8/8.13.8) with ESMTP id p5LHhEtb303272
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Tue, 21 Jun 2011 13:43:14 -0400
Received: from JSIPSWEXHA01.bsg.ad.adp.com (jsipswexha01.bsg.ad.adp.com [10.17.69.24]) by jsppsldlpsi02.broadridge.net (RSA Interceptor) for <java-user@lucene.apache.org>; Tue, 21 Jun 2011 13:43:10 -0400
Received: from jscpcwexmaa1.bsg.ad.adp.com ([fe80::882f:16e8:308d:3ef]) by
 JSIPSWEXHA01.bsg.ad.adp.com ([::1]) with mapi; Tue, 21 Jun 2011 13:43:04
 -0400
From: "Hiller, Dean  x66079" <dean.hiller@broadridge.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Tue, 21 Jun 2011 13:43:01 -0400
Subject: RE: question about wildcards
Thread-Topic: question about wildcards
Thread-Index: AcwwKe5kLYMGRmMuSByCVVAlVxH4KQAEJ8UA
Message-ID: <08230D4C8E666D479F6DE495A7684DCD0AC2ECDE@JSCPCWEXMAA1.bsg.ad.adp.com>
References: <4E00B849.101@gmail.com>
 <BANLkTiny_jJL9y-2-Hnn+ZzfFC4wx9VGCQ@mail.gmail.com>
 <4E00BBEF.7060302@gmail.com>
In-Reply-To: <4E00BBEF.7060302@gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: en-US
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-RSA-Inspected: yes
X-RSA-Classifications: public

I wonder if you would be better off creating a second index with the words =
reversed.....depends on your application profile I guess and what you want,=
 but an additional index may not be too bad in some cases to speed up the s=
earch.

Dean

-----Original Message-----
From: G.Long [mailto:jdevgl@gmail.com]=20
Sent: Tuesday, June 21, 2011 9:43 AM
To: java-user@lucene.apache.org
Subject: Re: question about wildcards

Thank you for the tip :)

I'll try it.

Regards,
Gary

Le 21/06/2011 17:38, Ian Lea a =E9crit :
> See the javadocs for QueryParser.setAllowLeadingWildcard(boolean
> allowLeadingWildcard).  And from the FAQ, see
> http://wiki.apache.org/lucene-java/LuceneFAQ#What_wildcard_search_support=
_is_available_from_Lucene.3F
>
> Be sure to heed the warnings about performance.
>
>
> --
> Ian.
>
> On Tue, Jun 21, 2011 at 4:27 PM, G.Long<jdevgl@gmail.com>  wrote:
>> Hi :)
>>
>> I've got the following text indexed with simpleAnalyzer :
>>
>> "security is a real problem."
>>
>> If I try to search for secu*, it will find the document. But if I try to
>> search for curi*, there are no results.
>>
>> I raed that it's not possible to add a * wildcard at the begining of the
>> query so what should I do to handle this type of query where the user wr=
ite
>> just a part of the word (which is in the middle of the word) ?
>>
>> Thank you :)
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

This message and any attachments are intended only for the use of the add=
ressee and
may contain information that is privileged and confidential. If the reade=
r of the =

message is not the intended recipient or an authorized representative of =
the
intended recipient, you are hereby notified that any dissemination of thi=
s
communication is strictly prohibited. If you have received this communica=
tion in
error, please notify us immediately by e-mail and delete the message and =
any
attachments from your system.
=0D

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50125-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun 21 17:45:51 2011
Return-Path: <java-user-return-50125-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C863F4900
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 21 Jun 2011 17:45:51 +0000 (UTC)
Received: (qmail 93038 invoked by uid 500); 21 Jun 2011 17:45:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92980 invoked by uid 500); 21 Jun 2011 17:45:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92972 invoked by uid 99); 21 Jun 2011 17:45:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2011 17:45:49 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dean.hiller@broadridge.com designates 64.18.2.26 as permitted sender)
Received: from [64.18.2.26] (HELO exprod7og124.obsmtp.com) (64.18.2.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2011 17:45:41 +0000
Received: from gwm.broadridge.com ([167.212.2.180]) (using TLSv1) by exprod7ob124.postini.com ([64.18.6.12]) with SMTP
	ID DSNKTgDYr74O3LU7YhIlFvrYW1kSTKdYCFNi@postini.com; Tue, 21 Jun 2011 10:45:21 PDT
Received: from jsppsldlpsi01.broadridge.net ([10.98.54.11])
	by gwm.broadridge.com (8.13.8/8.13.8) with ESMTP id p5LHjJkK1237042
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Tue, 21 Jun 2011 13:45:19 -0400
Received: from JSIPSWEXHA01.bsg.ad.adp.com (jsipswexha01.bsg.ad.adp.com [10.17.69.24]) by jsppsldlpsi01.broadridge.net (RSA Interceptor) for <java-user@lucene.apache.org>; Tue, 21 Jun 2011 13:45:16 -0400
Received: from jscpcwexmaa1.bsg.ad.adp.com ([fe80::882f:16e8:308d:3ef]) by
 JSIPSWEXHA01.bsg.ad.adp.com ([::1]) with mapi; Tue, 21 Jun 2011 13:45:13
 -0400
From: "Hiller, Dean  x66079" <dean.hiller@broadridge.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Tue, 21 Jun 2011 13:45:10 -0400
Subject: RE: anyway to store value as bytes?
Thread-Topic: anyway to store value as bytes?
Thread-Index: AcwwB9utI56LTH2zQSaPcoc9joZ+/AAMvRHw
Message-ID: <08230D4C8E666D479F6DE495A7684DCD0AC2ECE2@JSCPCWEXMAA1.bsg.ad.adp.com>
References: <08230D4C8E666D479F6DE495A7684DCD0ABA9912@JSCPCWEXMAA1.bsg.ad.adp.com>
 <BANLkTinC+KMQ-RcOwvcX7irsY8FoxZrKhQ@mail.gmail.com>
In-Reply-To: <BANLkTinC+KMQ-RcOwvcX7irsY8FoxZrKhQ@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: en-US
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-RSA-Inspected: yes
X-RSA-Classifications: public
X-RSA-Action: allow
X-Virus-Checked: Checked by ClamAV on apache.org

Sweet, thanks.... hmmm, yeah, you should have just given me a http://lmgtfy=
.com/ link ;)...darn, should have found that one myself.

I am storing pretty small data.

Thanks,
Dean

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]=20
Sent: Tuesday, June 21, 2011 5:39 AM
To: java-user@lucene.apache.org
Subject: Re: anyway to store value as bytes?

Does this help?
http://lucene.apache.org/java/3_0_1/api/all/org/apache/lucene/util/Indexabl=
eBinaryStringTools.html

If not, here's a note from Ryan McKinley on another thread (googling
lucene storing binary data brought it up)...

******
You can store binary data using a binary field type -- then you need
to send the data base64 encoded.

I would strongly recommend against storing large binary files in solr
-- unless you really don't care about performance -- the file system
is a good option that springs to mind.
******

Best
Erick

On Mon, Jun 20, 2011 at 2:26 PM, Hiller, Dean  x66079
<dean.hiller@broadridge.com> wrote:
> I see the api in Lucene is new Field(String, String, Store, Index)
>
> Is there anyway to store one of the fields as byte[]? =A0Specifically the=
 value I am looking up I would like it to be byte[] instead of String. =A0A=
ll my other ones are String anyways.
>
> Thanks,
> Dean
>
>
> This message and any attachments are intended only for the use of the add=
ressee and
> may contain information that is privileged and confidential. If the reade=
r of the
> message is not the intended recipient or an authorized representative of =
the
> intended recipient, you are hereby notified that any dissemination of thi=
s
> communication is strictly prohibited. If you have received this communica=
tion in
> error, please notify us immediately by e-mail and delete the message and =
any
> attachments from your system.
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

This message and any attachments are intended only for the use of the add=
ressee and
may contain information that is privileged and confidential. If the reade=
r of the =

message is not the intended recipient or an authorized representative of =
the
intended recipient, you are hereby notified that any dissemination of thi=
s
communication is strictly prohibited. If you have received this communica=
tion in
error, please notify us immediately by e-mail and delete the message and =
any
attachments from your system.
=0D

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50126-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun 21 20:28:55 2011
Return-Path: <java-user-return-50126-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 47FFF47D0
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 21 Jun 2011 20:28:55 +0000 (UTC)
Received: (qmail 6593 invoked by uid 500); 21 Jun 2011 20:28:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6536 invoked by uid 500); 21 Jun 2011 20:28:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6528 invoked by uid 99); 21 Jun 2011 20:28:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2011 20:28:52 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,MIME_QP_LONG_LINE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dannylade@googlemail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2011 20:28:47 +0000
Received: by fxm7 with SMTP id 7so354637fxm.35
        for <java-user@lucene.apache.org>; Tue, 21 Jun 2011 13:28:26 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:subject:references:from:content-type:x-mailer
         :in-reply-to:message-id:date:to:content-transfer-encoding
         :mime-version;
        bh=Zv9kNddsGtfWve0bKBa79tk+ypli85Rc3oDdmEoC+yk=;
        b=a1eq5s4WmXZMEcuiWrVAPf1w/3MH8BrS+/rkPuKDIV3AcGjzcO9wCnABNwmBzhkRVI
         AGKakRnRpDk+d0Pz3kptmgIQSBIRhvlQvtF6tKNeTVWgMnPU7nk7uMvrXZ5fLYjRVklm
         aeTyYkwu+7ncU7fh0LLWsYuffGoa4SIwpjOXg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=subject:references:from:content-type:x-mailer:in-reply-to
         :message-id:date:to:content-transfer-encoding:mime-version;
        b=oRx+5jyzaSrGIfI3wPajsIpIkAQ+SoHEm2GkXRtJGho6NnwSVB43LEVcxP+fcdsRba
         hTtSEcXv/9HKdQeZaP1MMiXOu7V1XZ09zS3XDvv5+hYpbxWbhh+06/AKY4pmVGYuFUVo
         qslfzjeF1j0zM+UIs23mV6VFO0F0H92IAGCMU=
Received: by 10.223.57.5 with SMTP id a5mr512047fah.90.1308688105949;
        Tue, 21 Jun 2011 13:28:25 -0700 (PDT)
Received: from [192.168.1.101] (dslb-088-071-073-106.pools.arcor-ip.net [88.71.73.106])
        by mx.google.com with ESMTPS id o23sm3593522faa.9.2011.06.21.13.28.24
        (version=TLSv1/SSLv3 cipher=OTHER);
        Tue, 21 Jun 2011 13:28:25 -0700 (PDT)
Subject: Re: question about wildcards
References: <4E00B849.101@gmail.com> <BANLkTiny_jJL9y-2-Hnn+ZzfFC4wx9VGCQ@mail.gmail.com> <4E00BBEF.7060302@gmail.com> <08230D4C8E666D479F6DE495A7684DCD0AC2ECDE@JSCPCWEXMAA1.bsg.ad.adp.com>
From: Danny Lade <dannylade@googlemail.com>
Content-Type: text/plain;
	charset=utf-8
X-Mailer: iPhone Mail (8J2)
In-Reply-To: <08230D4C8E666D479F6DE495A7684DCD0AC2ECDE@JSCPCWEXMAA1.bsg.ad.adp.com>
Message-Id: <C4E4BCB8-DDCE-4988-88BD-BC0FF211F017@googlemail.com>
Date: Tue, 21 Jun 2011 22:28:16 +0200
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (iPhone Mail 8J2)

IMO, a "reversed word Index" does not work in this case, because he's lookin=
g for a word in the middle (See curi*).=20

Another idea is to build word chunks and save them in a second index plus do=
cID of the first index.=20

e.g. security go to "security ecurity curity ... ity"

This is much faster to search (just "curi*") but getting much bigger in inde=
x size. So it depends what is needed ...

Greetings Danny



Am 21.06.2011 um 19:43 schrieb "Hiller, Dean  x66079" <dean.hiller@broadridg=
e.com>:

> I wonder if you would be better off creating a second index with the words=
 reversed.....depends on your application profile I guess and what you want,=
 but an additional index may not be too bad in some cases to speed up the se=
arch.
>=20
> Dean
>=20
> -----Original Message-----
> From: G.Long [mailto:jdevgl@gmail.com]=20
> Sent: Tuesday, June 21, 2011 9:43 AM
> To: java-user@lucene.apache.org
> Subject: Re: question about wildcards
>=20
> Thank you for the tip :)
>=20
> I'll try it.
>=20
> Regards,
> Gary
>=20
> Le 21/06/2011 17:38, Ian Lea a =C3=A9crit :
>> See the javadocs for QueryParser.setAllowLeadingWildcard(boolean
>> allowLeadingWildcard).  And from the FAQ, see
>> http://wiki.apache.org/lucene-java/LuceneFAQ#What_wildcard_search_support=
_is_available_from_Lucene.3F
>>=20
>> Be sure to heed the warnings about performance.
>>=20
>>=20
>> --
>> Ian.
>>=20
>> On Tue, Jun 21, 2011 at 4:27 PM, G.Long<jdevgl@gmail.com>  wrote:
>>> Hi :)
>>>=20
>>> I've got the following text indexed with simpleAnalyzer :
>>>=20
>>> "security is a real problem."
>>>=20
>>> If I try to search for secu*, it will find the document. But if I try to=

>>> search for curi*, there are no results.
>>>=20
>>> I raed that it's not possible to add a * wildcard at the begining of the=

>>> query so what should I do to handle this type of query where the user wr=
ite
>>> just a part of the word (which is in the middle of the word) ?
>>>=20
>>> Thank you :)
>>>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
> This message and any attachments are intended only for the use of the addr=
essee and
> may contain information that is privileged and confidential. If the reader=
 of the=20
> message is not the intended recipient or an authorized representative of t=
he
> intended recipient, you are hereby notified that any dissemination of this=

> communication is strictly prohibited. If you have received this communicat=
ion in
> error, please notify us immediately by e-mail and delete the message and a=
ny
> attachments from your system.
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50127-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun 21 22:44:40 2011
Return-Path: <java-user-return-50127-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 40A3F45B9
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 21 Jun 2011 22:44:40 +0000 (UTC)
Received: (qmail 34907 invoked by uid 500); 21 Jun 2011 22:44:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34867 invoked by uid 500); 21 Jun 2011 22:44:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34859 invoked by uid 99); 21 Jun 2011 22:44:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2011 22:44:37 +0000
X-ASF-Spam-Status: No, hits=-0.1 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dean.hiller@broadridge.com designates 64.18.2.219 as permitted sender)
Received: from [64.18.2.219] (HELO exprod7og116.obsmtp.com) (64.18.2.219)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2011 22:44:28 +0000
Received: from gwm.broadridge.com ([167.212.2.180]) (using TLSv1) by exprod7ob116.postini.com ([64.18.6.12]) with SMTP
	ID DSNKTgEetbkeg/hAUT61bEbkJ3Qi6+1xgCHd@postini.com; Tue, 21 Jun 2011 15:44:07 PDT
Received: from jsppsldlpsi01.broadridge.net ([10.98.54.11])
	by gwm.broadridge.com (8.13.8/8.13.8) with ESMTP id p5LMi4wM1089608
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Tue, 21 Jun 2011 18:44:05 -0400
Received: from JSIPSWEXHA01.bsg.ad.adp.com (jsipswexha01.bsg.ad.adp.com [10.17.69.24]) by jsppsldlpsi01.broadridge.net (RSA Interceptor) for <java-user@lucene.apache.org>; Tue, 21 Jun 2011 18:44:01 -0400
Received: from jscpcwexmaa1.bsg.ad.adp.com ([fe80::882f:16e8:308d:3ef]) by
 JSIPSWEXHA01.bsg.ad.adp.com ([::1]) with mapi; Tue, 21 Jun 2011 18:43:59
 -0400
From: "Hiller, Dean  x66079" <dean.hiller@broadridge.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Tue, 21 Jun 2011 18:43:53 -0400
Subject: I have seen this exception on some posts around but don't see the
 cause/solution(RamDirectory)..
Thread-Topic: I have seen this exception on some posts around but don't see
 the cause/solution(RamDirectory)..
Thread-Index: AcwwZLIvXvs6OqoXSv2XMUjIVqk/Bg==
Message-ID: <08230D4C8E666D479F6DE495A7684DCD0AC2EEB0@JSCPCWEXMAA1.bsg.ad.adp.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-cr-puzzleid: {FCC3F14D-9FCA-4F15-BB5B-B2EDF2F4B6B0}
x-cr-hashedpuzzle: BJXb Bae4 CJOe CLSZ CjFG DYXX EmVc FGwc FQs6 FbmG FbmL
 F8d+ HEcY HVBF JCbk
 K13G;1;agBhAHYAYQAtAHUAcwBlAHIAQABsAHUAYwBlAG4AZQAuAGEAcABhAGMAaABlAC4AbwByAGcA;Sosha1_v1;7;{FCC3F14D-9FCA-4F15-BB5B-B2EDF2F4B6B0};ZABlAGEAbgAuAGgAaQBsAGwAZQByAEAAYgByAG8AYQBkAHIAaQBkAGcAZQAuAGMAbwBtAA==;Tue,
 21 Jun 2011 22:43:53
 GMT;SQAgAGgAYQB2AGUAIABzAGUAZQBuACAAdABoAGkAcwAgAGUAeABjAGUAcAB0AGkAbwBuACAAbwBuACAAcwBvAG0AZQAgAHAAbwBzAHQAcwAgAGEAcgBvAHUAbgBkACAAYgB1AHQAIABkAG8AbgAnAHQAIABzAGUAZQAgAHQAaABlACAAYwBhAHUAcwBlAC8AcwBvAGwAdQB0AGkAbwBuACgAUgBhAG0ARABpAHIAZQBjAHQAbwByAHkAKQAuAC4A
acceptlanguage: en-US
Content-Type: multipart/alternative;
	boundary="_000_08230D4C8E666D479F6DE495A7684DCD0AC2EEB0JSCPCWEXMAA1bsg_"
MIME-Version: 1.0
X-RSA-Inspected: yes
X-RSA-Classifications: public
X-RSA-Action: allow
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_08230D4C8E666D479F6DE495A7684DCD0AC2EEB0JSCPCWEXMAA1bsg_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Anyone know how to do a simple RamDirectory...I just created it but it is f=
ailing with this...

Caused by: org.apache.lucene.index.IndexNotFoundException: no segments* fil=
e found in org.apache.lucene.store.RAMDirectory@1d5a7f6 lockFactory=3Dorg.a=
pache.lucene.store.SingleInstanceLockFactory@64804: files: []
      at org.apache.lucene.index.SegmentInfos$FindSegmentsFile.run(SegmentI=
nfos.java:711)
      at org.apache.lucene.index.DirectoryReader.open(DirectoryReader.java:=
75)
      at org.apache.lucene.index.IndexReader.open(IndexReader.java:428)
      at org.apache.lucene.index.IndexReader.open(IndexReader.java:288)
      at org.apache.lucene.search.IndexSearcher.<init>(IndexSearcher.java:1=
07)
      at com.broadridge.nosql.impl.base.QueryTemp2.getResultListImpl(QueryT=
emp2.java:82)
      at com.broadridge.nosql.impl.base.QueryTemp2.getResultList(QueryTemp2=
.java:67)
      ... 43 more

Thanks,
Dean


This message and any attachments are intended only for the use of the add=
ressee and
may contain information that is privileged and confidential. If the reade=
r of the =

message is not the intended recipient or an authorized representative of =
the
intended recipient, you are hereby notified that any dissemination of thi=
s
communication is strictly prohibited. If you have received this communica=
tion in
error, please notify us immediately by e-mail and delete the message and =
any
attachments from your system.
=0D
--_000_08230D4C8E666D479F6DE495A7684DCD0AC2EEB0JSCPCWEXMAA1bsg_--

From java-user-return-50128-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun 22 00:17:52 2011
Return-Path: <java-user-return-50128-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2F5B54CFE
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 22 Jun 2011 00:17:52 +0000 (UTC)
Received: (qmail 38540 invoked by uid 500); 22 Jun 2011 00:17:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38504 invoked by uid 500); 22 Jun 2011 00:17:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38496 invoked by uid 99); 22 Jun 2011 00:17:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2011 00:17:49 +0000
X-ASF-Spam-Status: No, hits=0.0 required=5.0
	tests=SPF_PASS,T_FRT_ADULT2
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of koji@r.email.ne.jp designates 202.224.39.198 as permitted sender)
Received: from [202.224.39.198] (HELO mail2.asahi-net.or.jp) (202.224.39.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2011 00:17:43 +0000
Received: from Koji-Sekiguchi-no-MacBook-Pro.local (w244069.ppp.asahi-net.or.jp [121.1.244.69])
	by mail2.asahi-net.or.jp (Postfix) with ESMTP id 81928E61D1
	for <java-user@lucene.apache.org>; Wed, 22 Jun 2011 09:17:22 +0900 (JST)
Message-ID: <4E013492.6020903@r.email.ne.jp>
Date: Wed, 22 Jun 2011 09:17:22 +0900
From: Koji Sekiguchi <koji@r.email.ne.jp>
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; ja-JP-mac; rv:1.9.2.17) Gecko/20110414 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Solution for FHV and NGram Max Min Gram Restriction
References: <BANLkTinBTeZNWPiH4K3tk=ZHmfXcS3-y2A@mail.gmail.com>
In-Reply-To: <BANLkTinBTeZNWPiH4K3tk=ZHmfXcS3-y2A@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

(11/06/22 2:03), Anupam Tangri wrote:
> Hi,
>
> We are using lucene 3.2 for our project where I needed to highlight search
> matches.  I earlier used default highlighter which did not work correctly
> all the time.
> So, I started using FHV which worked worked beautifully till I started
> searching multiple terms. On digging I came to know FHV has a restriction of
> minGram=maxGram for Ngram fields.
>
> I think, it makes is practically useless for nGramText fields. Is their a
> plan/patch available to remove this restriction?

Anupam,

I'm sorry but no plan. Why I developed *FVH* (not FHV :) is because one of our customer
required the highlighting feature for N-gram field. Now it has been contributed back to
the community, I've used FVH for a lot of customers. But they are using CJKTokanizer
or similar tokenizer which is minGram=maxGram. I don't have strong motivation of removing
the restriction myself, but I'm open to accept patches as always.

koji
-- 
http://www.rondhuit.com/en/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50129-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun 22 00:48:40 2011
Return-Path: <java-user-return-50129-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 662344DC8
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 22 Jun 2011 00:48:40 +0000 (UTC)
Received: (qmail 64731 invoked by uid 500); 22 Jun 2011 00:48:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64677 invoked by uid 500); 22 Jun 2011 00:48:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64668 invoked by uid 99); 22 Jun 2011 00:48:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2011 00:48:37 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of sokolov@ifactory.com designates 68.236.111.2 as permitted sender)
Received: from [68.236.111.2] (HELO camelot.ifactory.com) (68.236.111.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2011 00:48:28 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by camelot.ifactory.com (Postfix) with ESMTP id 3535E3672DC3;
	Tue, 21 Jun 2011 20:48:07 -0400 (EDT)
Received: from camelot.ifactory.com ([127.0.0.1])
	by localhost (camelot.ifactory.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id aS0T79aUPlIz; Tue, 21 Jun 2011 20:48:06 -0400 (EDT)
Received: from [192.168.1.4] (pool-108-7-217-216.bstnma.fios.verizon.net [108.7.217.216])
	by camelot.ifactory.com (Postfix) with ESMTPSA id ED1733672DD2;
	Tue, 21 Jun 2011 20:48:05 -0400 (EDT)
Message-ID: <4E013BC4.2000504@ifactory.com>
Date: Tue, 21 Jun 2011 20:48:04 -0400
From: Michael Sokolov <sokolov@ifactory.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.17) Gecko/20110414 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
CC: Koji Sekiguchi <koji@r.email.ne.jp>
Subject: Re: highlighting performance
References: <4DFFAB75.1040306@ifactory.com> <4DFFE413.4010109@r.email.ne.jp> <4E0007FA.1000201@ifactory.com>
In-Reply-To: <4E0007FA.1000201@ifactory.com>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

I did that, and the benchmark indicates FVH is 10x faster than 
Highlighter now.  I ran with a subset of the wikipedia data since I 
didn't want to deal with the whole thing.  I'm trying to reconcile these 
weirdly varying results.  One difference is that the benchmark doesn't 
use PhraseQueries - I added those and it did make FVH slightly slower, 
but not all that much.  I'll keep digging.

-Mike

On 6/20/2011 10:54 PM, Michael Sokolov wrote:
> Koji- I'm not familiar with the benchmarking system, but maybe I'll 
> see if I can run that benchmark on my test data as a point of 
> comparison - thanks for the pointer!
>
> -Mike
>
> On 6/20/2011 8:21 PM, Koji Sekiguchi wrote:
>> Mike,
>>
>> FVH used to be faster for large docs. I wrote FVH section for Lucene 
>> in Action and it said:
>>
>> In contrib/benchmark (covered in appendix C), theres an algorithm
>> file called highlight-vs-vector-highlight.alg that lets you see the 
>> difference
>> between two highlighters in processing time. As of version 2.9, with 
>> modern hardware,
>> that algorithm shows that FastVectorHighlighter is about two and a 
>> half times faster
>> than Highlighter.
>>
>> The number was for Lucene 2.9 age and Wikipedia data, maybe different 
>> today.
>>
>> Anyway, thank you for sharing interesting result!
>>
>> koji
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50130-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun 22 01:07:29 2011
Return-Path: <java-user-return-50130-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 44FDB4A85
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 22 Jun 2011 01:07:29 +0000 (UTC)
Received: (qmail 78847 invoked by uid 500); 22 Jun 2011 01:07:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78807 invoked by uid 500); 22 Jun 2011 01:07:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78799 invoked by uid 99); 22 Jun 2011 01:07:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2011 01:07:26 +0000
X-ASF-Spam-Status: No, hits=-0.1 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dean.hiller@broadridge.com designates 64.18.2.28 as permitted sender)
Received: from [64.18.2.28] (HELO exprod7og125.obsmtp.com) (64.18.2.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2011 01:07:19 +0000
Received: from gwm.broadridge.com ([167.212.2.180]) (using TLSv1) by exprod7ob125.postini.com ([64.18.6.12]) with SMTP
	ID DSNKTgFAMXdaCmZP9UjORe3g0L5F05bJcs2A@postini.com; Tue, 21 Jun 2011 18:06:58 PDT
Received: from jsppsldlpsi01.broadridge.net ([10.98.54.11])
	by gwm.broadridge.com (8.13.8/8.13.8) with ESMTP id p5M16ugi942248
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Tue, 21 Jun 2011 21:06:57 -0400
Received: from JSIPSWEXHA01.bsg.ad.adp.com (jsipswexha01.bsg.ad.adp.com [10.17.69.24]) by jsppsldlpsi01.broadridge.net (RSA Interceptor) for <java-user@lucene.apache.org>; Tue, 21 Jun 2011 21:06:48 -0400
Received: from jscpcwexmaa1.bsg.ad.adp.com ([fe80::882f:16e8:308d:3ef]) by
 JSIPSWEXHA01.bsg.ad.adp.com ([::1]) with mapi; Tue, 21 Jun 2011 21:06:45
 -0400
From: "Hiller, Dean  x66079" <dean.hiller@broadridge.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Tue, 21 Jun 2011 21:06:41 -0400
Subject: any optimizations I can make on this code
Thread-Topic: any optimizations I can make on this code
Thread-Index: AcwweKWUyybrjwYDRyaaF7SWj6pjlg==
Message-ID: <08230D4C8E666D479F6DE495A7684DCD0AC2EED7@JSCPCWEXMAA1.bsg.ad.adp.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: en-US
Content-Type: multipart/alternative;
	boundary="_000_08230D4C8E666D479F6DE495A7684DCD0AC2EED7JSCPCWEXMAA1bsg_"
MIME-Version: 1.0
X-RSA-Inspected: yes
X-RSA-Classifications: public
X-RSA-Action: allow

--_000_08230D4C8E666D479F6DE495A7684DCD0AC2EED7JSCPCWEXMAA1bsg_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I am running over a 100 million row nosql set and unfortunately building 1 =
million indexes.  Each row I get may or may not be for the index I just wro=
te too so I can't keep IndexWriter open very long.  I am currently simulati=
ng how long it would take me to build all the indexes and it looks like it =
is somewhere around 17 hours :(

Any other ways to optimize this code(and then I can maybe apply it to our i=
ndex map/reduce job), thanks, Dean  This is done in 20 different threads an=
d again taking IndexWriter out of the loop is probably not an option since =
as I go over the 100 million records each one needs a different IndexWriter=
 and I can't have too many IndexWriters open.

            Directory dir =3D FSDirectory.open(new File(INDEX_DIR_PREFIX
                  + this.account));

            for (int i =3D 0; i < 125; i++) {
               IndexWriterConfig conf =3D new IndexWriterConfig(
                     Version.LUCENE_32, new KeywordAnalyzer());

               IndexWriter writer =3D new IndexWriter(dir, conf);

               LocalDate date =3D new LocalDate();
               int random =3D this.r.nextInt(1000);
               date =3D date.plusDays(random);
               int next =3D this.r.nextInt(5000);
               int name =3D this.r.nextInt(1000);

               Document document =3D createDocument(("temp" + next),
                     ("dean" + name),
                                "some url", date);
               writer.addDocument(document);

               writer.close();
            }

Hmmmm, I maybe could use a IndexWriter cache of 2000 to leave them open unt=
il evicted?  I can't think of anything else to help though.  Ideas?
Thanks,
Dean


This message and any attachments are intended only for the use of the add=
ressee and
may contain information that is privileged and confidential. If the reade=
r of the =

message is not the intended recipient or an authorized representative of =
the
intended recipient, you are hereby notified that any dissemination of thi=
s
communication is strictly prohibited. If you have received this communica=
tion in
error, please notify us immediately by e-mail and delete the message and =
any
attachments from your system.
=0D
--_000_08230D4C8E666D479F6DE495A7684DCD0AC2EED7JSCPCWEXMAA1bsg_--

From java-user-return-50131-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun 22 02:29:57 2011
Return-Path: <java-user-return-50131-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B76546BE5
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 22 Jun 2011 02:29:57 +0000 (UTC)
Received: (qmail 62284 invoked by uid 500); 22 Jun 2011 02:29:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62242 invoked by uid 500); 22 Jun 2011 02:29:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62234 invoked by uid 99); 22 Jun 2011 02:29:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2011 02:29:55 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sokolov@ifactory.com designates 68.236.111.2 as permitted sender)
Received: from [68.236.111.2] (HELO camelot.ifactory.com) (68.236.111.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2011 02:29:47 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by camelot.ifactory.com (Postfix) with ESMTP id 716B63672DCC;
	Tue, 21 Jun 2011 22:29:26 -0400 (EDT)
Received: from camelot.ifactory.com ([127.0.0.1])
	by localhost (camelot.ifactory.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id ArAQpxIRYzcT; Tue, 21 Jun 2011 22:29:25 -0400 (EDT)
Received: from [192.168.1.4] (pool-108-7-217-216.bstnma.fios.verizon.net [108.7.217.216])
	by camelot.ifactory.com (Postfix) with ESMTPSA id F1F7B3672DC8;
	Tue, 21 Jun 2011 22:29:24 -0400 (EDT)
Message-ID: <4E015383.7010107@ifactory.com>
Date: Tue, 21 Jun 2011 22:29:23 -0400
From: Michael Sokolov <sokolov@ifactory.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.17) Gecko/20110414 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
CC: Koji Sekiguchi <koji@r.email.ne.jp>
Subject: Re: highlighting performance
References: <4DFFAB75.1040306@ifactory.com> <4DFFE413.4010109@r.email.ne.jp> <4E0007FA.1000201@ifactory.com> <4E013BC4.2000504@ifactory.com>
In-Reply-To: <4E013BC4.2000504@ifactory.com>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 8bit

OK - it seems as if there is a blow-up in FieldPhraseList if a document 
has a large number of occurrences of a term that is in the query.  In 
one example, I searched for "1", and this occurs just under 2000 times 
in one of my test documents (as the value of HTML attributes).  
Admittedly a weird case, but when this happens, the highlighting can 
take 300x longer than when searching for a more distinctive term (like 
"distinctive").

I think there may be a problem here in that every term occurrence is 
compared against every other term occurrence (or every "phrase" within 
which the term may occur - I think?) so there is an n^2 growth factor in 
the number of occurrences of a term in a document.  Does that seem possible?

-Mike

On 6/21/2011 8:48 PM, Michael Sokolov wrote:
> I did that, and the benchmark indicates FVH is 10x faster than 
> Highlighter now.  I ran with a subset of the wikipedia data since I 
> didn't want to deal with the whole thing.  I'm trying to reconcile 
> these weirdly varying results.  One difference is that the benchmark 
> doesn't use PhraseQueries - I added those and it did make FVH slightly 
> slower, but not all that much.  I'll keep digging.
>
> -Mike
>
> On 6/20/2011 10:54 PM, Michael Sokolov wrote:
>> Koji- I'm not familiar with the benchmarking system, but maybe I'll 
>> see if I can run that benchmark on my test data as a point of 
>> comparison - thanks for the pointer!
>>
>> -Mike
>>
>> On 6/20/2011 8:21 PM, Koji Sekiguchi wrote:
>>> Mike,
>>>
>>> FVH used to be faster for large docs. I wrote FVH section for Lucene 
>>> in Action and it said:
>>>
>>> In contrib/benchmark (covered in appendix C), theres an algorithm
>>> file called highlight-vs-vector-highlight.alg that lets you see the 
>>> difference
>>> between two highlighters in processing time. As of version 2.9, with 
>>> modern hardware,
>>> that algorithm shows that FastVectorHighlighter is about two and a 
>>> half times faster
>>> than Highlighter.
>>>
>>> The number was for Lucene 2.9 age and Wikipedia data, maybe 
>>> different today.
>>>
>>> Anyway, thank you for sharing interesting result!
>>>
>>> koji
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50132-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun 22 07:31:48 2011
Return-Path: <java-user-return-50132-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E5103619C
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 22 Jun 2011 07:31:47 +0000 (UTC)
Received: (qmail 21848 invoked by uid 500); 22 Jun 2011 07:31:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21561 invoked by uid 500); 22 Jun 2011 07:31:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21365 invoked by uid 99); 22 Jun 2011 07:31:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2011 07:31:36 +0000
X-ASF-Spam-Status: No, hits=3.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of pranavgoyal40341@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2011 07:31:29 +0000
Received: by bwz8 with SMTP id 8so942509bwz.35
        for <java-user@lucene.apache.org>; Wed, 22 Jun 2011 00:31:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:from:date:message-id:subject:to
         :content-type;
        bh=wnL/fX+Ulziz17BhefMmwn5RYYFmYKXCx+cophkGQ9E=;
        b=YWoiqn9Iw5dspZdQdGYrknVaOQ/uH01u5tlNrJI1goW7yPTa/r9hIfOV5KMYA5dXPb
         KFqAlPubROnQqIRlbo4gjKDuUrXD4B+sfI+9ljn6IEbLz+YejsatJgE5vagz/aWQtAW4
         /+d/91tM6gnz+GiC7cgBBAW7gLfsja+EAyZ84=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=d9EV5dZ6H1CqnKeB5FAzA5O1NFBHARrLk6fVenTBReTRURHYprP8R4vw1FYyUv12ia
         ENmr9rYPO+JPLCGdD+SkoqAg+5Wm3fMkRnRnCak6hAQxIYzHEcM9YxeocvrGXgEPT1A7
         anvxCwtwGMvnGGUuQ2KvScQv26HGPO6Xm640Q=
Received: by 10.204.114.144 with SMTP id e16mr286054bkq.119.1308727868831;
 Wed, 22 Jun 2011 00:31:08 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.51.83 with HTTP; Wed, 22 Jun 2011 00:30:48 -0700 (PDT)
From: Pranav goyal <pranavgoyal40341@gmail.com>
Date: Wed, 22 Jun 2011 13:00:48 +0530
Message-ID: <BANLkTi=E9ZiruqKe219iaXk+urs9PNktBw@mail.gmail.com>
Subject: Lucene Searching
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016368e2ae8bab68d04a647f3b7
X-Virus-Checked: Checked by ClamAV on apache.org

--0016368e2ae8bab68d04a647f3b7
Content-Type: text/plain; charset=ISO-8859-1

Hi all,

I am in a fix regarding lucene search. I know a little bit about lucene and
have successfully created index and searched a lot of queries on that.
My main worry is that whenever I search for let say "000" it doesn't give me
any result while if I seach for "00000341" it'll give me a hit. Even if I
search for 341 it doesn't give me anything.

I have checked through luke also and luke is also showing no results.

Do I have to use some different analyzer? Currently I am using Keyword
Analyzer.

Thanks
Pranav

--0016368e2ae8bab68d04a647f3b7--

From java-user-return-50133-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun 22 08:17:20 2011
Return-Path: <java-user-return-50133-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 413586E11
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 22 Jun 2011 08:17:20 +0000 (UTC)
Received: (qmail 95625 invoked by uid 500); 22 Jun 2011 08:17:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93859 invoked by uid 500); 22 Jun 2011 08:17:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93844 invoked by uid 99); 22 Jun 2011 08:17:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2011 08:17:10 +0000
X-ASF-Spam-Status: No, hits=3.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of pranavgoyal40341@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2011 08:17:02 +0000
Received: by bwz8 with SMTP id 8so973275bwz.35
        for <java-user@lucene.apache.org>; Wed, 22 Jun 2011 01:16:42 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=6f1rhfYMMGeeeIWn1DCDXtu65kxvll7rWzNCi1lKt+k=;
        b=hBCGSJUeXMT1gS2LlD+FY0ao0SUWioSYXTPt7Dp0H0k6pxC4Cu6lATVBFDkyK/VXdG
         rII6B3pEygs43UUJb19/Gdvc2+JsHMQDIFHYjbRXHH9OzM05bS5Xhppq6H7ljI/fnS2x
         frXZejegyxKiGWGdePAgSKK4wR1PYay8xzEw4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=tI+z1triZ6ddHs+6YRUZv8ARTQabXY7/kGbtHO2j15evYiS9X0k2/YvJWfURZASlN4
         hF8pEbo6zxnbsIZjPJBd0UDSEyfZV6cD2ybpuH8zqX69IcbszVsa6Bggz+xHZ3SoZT2Q
         ihgIagI92v/gRfOhjFfHWda/y5T0eMyWFJYlU=
Received: by 10.204.85.79 with SMTP id n15mr341438bkl.38.1308730602145; Wed,
 22 Jun 2011 01:16:42 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.51.83 with HTTP; Wed, 22 Jun 2011 01:16:22 -0700 (PDT)
In-Reply-To: <BANLkTi=E9ZiruqKe219iaXk+urs9PNktBw@mail.gmail.com>
References: <BANLkTi=E9ZiruqKe219iaXk+urs9PNktBw@mail.gmail.com>
From: Pranav goyal <pranavgoyal40341@gmail.com>
Date: Wed, 22 Jun 2011 13:46:22 +0530
Message-ID: <BANLkTimSkVP06rf3UmcRVmA=RzPWDP-2uA@mail.gmail.com>
Subject: Re: Lucene Searching
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d7dfe2a5c8f604a64896bd
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6d7dfe2a5c8f604a64896bd
Content-Type: text/plain; charset=ISO-8859-1

I can always use * , ?

But here I am not talking of this. I just want to get everything which has
341 in it. How to do it without * or ?

On Wed, Jun 22, 2011 at 1:00 PM, Pranav goyal <pranavgoyal40341@gmail.com>wrote:

> Hi all,
>
> I am in a fix regarding lucene search. I know a little bit about lucene and
> have successfully created index and searched a lot of queries on that.
> My main worry is that whenever I search for let say "000" it doesn't give
> me any result while if I seach for "00000341" it'll give me a hit. Even if I
> search for 341 it doesn't give me anything.
>
> I have checked through luke also and luke is also showing no results.
>
> Do I have to use some different analyzer? Currently I am using Keyword
> Analyzer.
>
> Thanks
> Pranav
>



-- 
I'm very responsible, when ever something goes wrong they always say I'm
responsible --

--0016e6d7dfe2a5c8f604a64896bd--

From java-user-return-50134-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun 22 08:29:51 2011
Return-Path: <java-user-return-50134-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 172BE6F4D
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 22 Jun 2011 08:29:51 +0000 (UTC)
Received: (qmail 12599 invoked by uid 500); 22 Jun 2011 08:29:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12407 invoked by uid 500); 22 Jun 2011 08:29:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11864 invoked by uid 99); 22 Jun 2011 08:29:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2011 08:29:46 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.210.176 as permitted sender)
Received: from [209.85.210.176] (HELO mail-iy0-f176.google.com) (209.85.210.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2011 08:29:40 +0000
Received: by iyi20 with SMTP id 20so758911iyi.35
        for <java-user@lucene.apache.org>; Wed, 22 Jun 2011 01:29:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=lhXypRDAWeEranJ5vGZ8V0JnYfpWQE5HLaEyBrO7eE4=;
        b=ZPzICeKEjHNHb7iteHhBDeUTgb6m12tx/vT9seUkiEQwqt6d7kjmrm0K3O7Vadazqy
         dvXcT3LNjx6qfB3+BwtLruHPmxzPKH0GWn3RpaynSrkr6Vm0FD+0FUgd/YzYpIs0QUP4
         fn1QvRSHMmy5jvBcU6OAuej7RQCSuTzRIbGXE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=wB6gB2/pXLwDka+UqRi9BqdwDP9XUNEK+wNKHEexgMS69TmHnsgPefFW31zQF4/q/O
         YFYNj4YUthvu7jpO1xMv/2kkj5aiMcUB8gB4x9Jz/i+4phuQMWSoSAooQFG/ENSHPWpM
         5Eca24rX6LpMNqc6b352pnqU4iWrSOwYkV3Fk=
Received: by 10.43.49.66 with SMTP id uz2mr435524icb.312.1308731359229; Wed,
 22 Jun 2011 01:29:19 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.200.131 with HTTP; Wed, 22 Jun 2011 01:28:59 -0700 (PDT)
In-Reply-To: <08230D4C8E666D479F6DE495A7684DCD0AC2ECD1@JSCPCWEXMAA1.bsg.ad.adp.com>
References: <AcwwOWq6hY+YXESqRIWHjlR2j9GPsQ==> <08230D4C8E666D479F6DE495A7684DCD0AC2ECD1@JSCPCWEXMAA1.bsg.ad.adp.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Wed, 22 Jun 2011 09:28:59 +0100
Message-ID: <BANLkTimbdp=qNE116LhGpzKKPybn2qW6GA@mail.gmail.com>
Subject: Re: why is query picking up extra result
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

[20110601 TO 99999999] is the way to do it, because these are string
fields being checked with string comparisons.  If your numbers are
variable length you will need to pad them.

Or look at NumericField and NumericRangeQuery.  Faster and better.


--
Ian.


On Tue, Jun 21, 2011 at 6:34 PM, Hiller, Dean  x66079
<dean.hiller@broadridge.com> wrote:
> Because when I use [ 20110601 TO * ] lucene does not return my results gr=
eater than 20110601 but when I use
> [20110601 TO 99999999], it works fine. =A0Why is this? =A0How do I get ev=
erything larger than 20110601. =A0I have another
> Case of sequence numbers and want to get everything above a certain numbe=
r so I don't know what number
> I should really include on the left side...I can include a long for now I=
 guess but that is really a hack. =A0I just
> Simply want where sequence > 5678
>
> Is there any way to do this?
>
> Thanks,
> Dean

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50135-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun 22 08:35:27 2011
Return-Path: <java-user-return-50135-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4BEBD65D5
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 22 Jun 2011 08:35:27 +0000 (UTC)
Received: (qmail 25675 invoked by uid 500); 22 Jun 2011 08:35:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25513 invoked by uid 500); 22 Jun 2011 08:35:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25473 invoked by uid 99); 22 Jun 2011 08:35:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2011 08:35:21 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.210.176 as permitted sender)
Received: from [209.85.210.176] (HELO mail-iy0-f176.google.com) (209.85.210.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2011 08:35:15 +0000
Received: by iyi20 with SMTP id 20so762541iyi.35
        for <java-user@lucene.apache.org>; Wed, 22 Jun 2011 01:34:55 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=OmxXbitXs9ZwgjPl2LQF2D7DKk0DnHgeFcgx/08YtWk=;
        b=JsgI9rCo02sEJv5ZzUZ79zqP9phcQX9Egwcq6m0hVLEW6BUKwM9/1ecRQY5G0lMZLq
         8sE+TAwzzSFMSazcx/YHMjVN490XSLSba1SxJhjnoAu7uvRjtf0+KK6EyP/bfZvb5rZ7
         gdtmJ5VSOvDKrKsce9NBQahUD4Dcs6kbVt05o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=Eb0J26FU+kpd+DXIpZ/KvJ8Iu8kmxNbOQrfW/m9awNwRYhIlUiY9X1cHIvAjET+sHx
         AzkNh9Twlh/OUkinf/68gW50psvVlxx42zvgOdZPOFn+YDonYy64F/REAW4nHdP2O2pz
         w7LlRlSndQkx8q0zmolUnXtpeoVlBuaVk6DTo=
Received: by 10.231.113.141 with SMTP id a13mr415331ibq.71.1308731695091; Wed,
 22 Jun 2011 01:34:55 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.200.131 with HTTP; Wed, 22 Jun 2011 01:34:35 -0700 (PDT)
In-Reply-To: <08230D4C8E666D479F6DE495A7684DCD0AC2EEB0@JSCPCWEXMAA1.bsg.ad.adp.com>
References: <08230D4C8E666D479F6DE495A7684DCD0AC2EEB0@JSCPCWEXMAA1.bsg.ad.adp.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Wed, 22 Jun 2011 09:34:35 +0100
Message-ID: <BANLkTiks-QCy1sh3ZvfFZKh0nLgU+U96XQ@mail.gmail.com>
Subject: Re: I have seen this exception on some posts around but don't see the cause/solution(RamDirectory)..
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

At a guess you are trying to open a searcher on a RAMDirectory that
doesn't yet contain anything.  Files only get written when stuff is
added to an index and the writer is closed or committed.


--
Ian.


On Tue, Jun 21, 2011 at 11:43 PM, Hiller, Dean  x66079
<dean.hiller@broadridge.com> wrote:
> Anyone know how to do a simple RamDirectory...I just created it but it is=
 failing with this...
>
> Caused by: org.apache.lucene.index.IndexNotFoundException: no segments* f=
ile found in org.apache.lucene.store.RAMDirectory@1d5a7f6 lockFactory=3Dorg=
.apache.lucene.store.SingleInstanceLockFactory@64804: files: []
> =A0 =A0 =A0at org.apache.lucene.index.SegmentInfos$FindSegmentsFile.run(S=
egmentInfos.java:711)
> =A0 =A0 =A0at org.apache.lucene.index.DirectoryReader.open(DirectoryReade=
r.java:75)
> =A0 =A0 =A0at org.apache.lucene.index.IndexReader.open(IndexReader.java:4=
28)
> =A0 =A0 =A0at org.apache.lucene.index.IndexReader.open(IndexReader.java:2=
88)
> =A0 =A0 =A0at org.apache.lucene.search.IndexSearcher.<init>(IndexSearcher=
.java:107)
> =A0 =A0 =A0at com.broadridge.nosql.impl.base.QueryTemp2.getResultListImpl=
(QueryTemp2.java:82)
> =A0 =A0 =A0at com.broadridge.nosql.impl.base.QueryTemp2.getResultList(Que=
ryTemp2.java:67)
> =A0 =A0 =A0... 43 more
>
> Thanks,
> Dean

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50136-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun 22 08:41:02 2011
Return-Path: <java-user-return-50136-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A85B966D0
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 22 Jun 2011 08:41:02 +0000 (UTC)
Received: (qmail 36461 invoked by uid 500); 22 Jun 2011 08:41:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36242 invoked by uid 500); 22 Jun 2011 08:40:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36234 invoked by uid 99); 22 Jun 2011 08:40:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2011 08:40:53 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2011 08:40:47 +0000
Received: by iwi5 with SMTP id 5so775135iwi.35
        for <java-user@lucene.apache.org>; Wed, 22 Jun 2011 01:40:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=c8kjDCH4arfOud4EMNfYWJBgeP59nJHaKf7Yzea7Us4=;
        b=IDC312hYm+kEapMm5d/uzUl/hFoEvQqzrhRua5kHFH7uXGr7BDqPx4rLQyhEc0QtrJ
         /US1eiZMUXdjfZOSedr7Q9TuQD1V0zpkVIeSepvFZNzD4r9B4eBNM1iHQhwh1oF2ObLR
         4apSfo8Hrz/TRpTnrU06j5xMXvD3EqnMmPpZQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=FCVdKuljHToNZMBJrDx0/EX9mr5YjHiVg2rjk51w3FjHFQ2+qqWR09TNb4YDBdxDYS
         SpAhBj2Yow56T4O6SQEXntZ3TDQ5kRM5Z3B0B73NsYBzorXtQ2+KctZcNgGB32KGe1hd
         Q/RtVI73CWp2sDbokWRvUYkrrAE+uQKw+iKp4=
Received: by 10.231.120.92 with SMTP id c28mr426918ibr.46.1308732025104; Wed,
 22 Jun 2011 01:40:25 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.200.131 with HTTP; Wed, 22 Jun 2011 01:40:05 -0700 (PDT)
In-Reply-To: <BANLkTimSkVP06rf3UmcRVmA=RzPWDP-2uA@mail.gmail.com>
References: <BANLkTi=E9ZiruqKe219iaXk+urs9PNktBw@mail.gmail.com> <BANLkTimSkVP06rf3UmcRVmA=RzPWDP-2uA@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Wed, 22 Jun 2011 09:40:05 +0100
Message-ID: <BANLkTimG+mmGjhphCMWcPcNhwRLghRpSqg@mail.gmail.com>
Subject: Re: Lucene Searching
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

What does Luke show as being indexed for that field?  Other useful
tips at http://wiki.apache.org/lucene-java/LuceneFAQ#Why_am_I_getting_no_hits_.2BAC8_incorrect_hits.3F

If that field is numeric you could use a NumericField - gets rid of
problems with leading zeros.

If by "I just want to get everything which has 341 in it" you mean you
want to match aaa341bbb and 0000341 and 341, see related thread on
this list from yesterday.  Or
org.apache.lucene.search.regex.RegexQuery.



--
Ian.


On Wed, Jun 22, 2011 at 9:16 AM, Pranav goyal
<pranavgoyal40341@gmail.com> wrote:
> I can always use * , ?
>
> But here I am not talking of this. I just want to get everything which has
> 341 in it. How to do it without * or ?
>
> On Wed, Jun 22, 2011 at 1:00 PM, Pranav goyal <pranavgoyal40341@gmail.com>wrote:
>
>> Hi all,
>>
>> I am in a fix regarding lucene search. I know a little bit about lucene and
>> have successfully created index and searched a lot of queries on that.
>> My main worry is that whenever I search for let say "000" it doesn't give
>> me any result while if I seach for "00000341" it'll give me a hit. Even if I
>> search for 341 it doesn't give me anything.
>>
>> I have checked through luke also and luke is also showing no results.
>>
>> Do I have to use some different analyzer? Currently I am using Keyword
>> Analyzer.
>>
>> Thanks
>> Pranav
>>
>
>
>
> --
> I'm very responsible, when ever something goes wrong they always say I'm
> responsible --
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50137-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun 22 08:59:22 2011
Return-Path: <java-user-return-50137-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0BF976534
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 22 Jun 2011 08:59:22 +0000 (UTC)
Received: (qmail 68278 invoked by uid 500); 22 Jun 2011 08:59:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68200 invoked by uid 500); 22 Jun 2011 08:59:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68192 invoked by uid 99); 22 Jun 2011 08:59:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2011 08:59:18 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.210.176 as permitted sender)
Received: from [209.85.210.176] (HELO mail-iy0-f176.google.com) (209.85.210.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2011 08:59:12 +0000
Received: by iyi20 with SMTP id 20so779155iyi.35
        for <java-user@lucene.apache.org>; Wed, 22 Jun 2011 01:58:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=96D/wZ6T/VW6I5mQ33oYKZ1WlAh8W+3peOn6AmGG3dE=;
        b=yBsomksNvpvMf3ruowW+Y2hsqLrNHpUV/h9LShSb16vUbzsZ/0a3f6EzQOVQ3WacgU
         jczEPZwnhX5vEGSGQ4yfdPZLnj3FyiF0llGJzOzmMEWF2dS8QzSgSgWSoSy+Ap0Brz4c
         G68tbr+I0Ajeg87YIqNqtwwJpBBejpP4J8p/k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=cqGETh9gPoMk2bC9VuevJPq5NkJz+qDGFUm42FsJlD18mG9jWc2I2lMejZJrwhcKdP
         qVXmTFr4qpT3coECO4R5SBkuRBXlrH7d0miKM9mNzhRkp9tu++56itzcHCAa28mO0Ba7
         9JnO/CJlJM7T2LHG/AXrEWaI63uPxUifEu1gc=
Received: by 10.231.111.85 with SMTP id r21mr461145ibp.21.1308733131166; Wed,
 22 Jun 2011 01:58:51 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.200.131 with HTTP; Wed, 22 Jun 2011 01:58:31 -0700 (PDT)
In-Reply-To: <08230D4C8E666D479F6DE495A7684DCD0AC2EED7@JSCPCWEXMAA1.bsg.ad.adp.com>
References: <08230D4C8E666D479F6DE495A7684DCD0AC2EED7@JSCPCWEXMAA1.bsg.ad.adp.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Wed, 22 Jun 2011 09:58:31 +0100
Message-ID: <BANLkTikAMUnPFhfNqGEj59d3an6Xp6D-pg@mail.gmail.com>
Subject: Re: any optimizations I can make on this code
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

So, you are reading 100 million records from somewhere and are writing
each record to one of 1 million indexes? Really 1 million, with an
average of 100 docs in each? 17 hours doesn't sound too bad to me.
Before worrying about lucene performance you should double check
everything else - in general lucene is not the bottleneck, but your
case may be different.

Caching the index writers is likely to help, at the cost of complexity
and memory.

How about reading all the records and storing a target index
identifier somewhere (memory? DB?) then either re-reading the 100
million in sequence of target index, or making 1 million passes
through - no, that doesn't sound too clever.

Sometime you just have to accept that doing complex operations on
large datasets can take a long time.


--
Ian.


On Wed, Jun 22, 2011 at 2:06 AM, Hiller, Dean  x66079
<dean.hiller@broadridge.com> wrote:
> I am running over a 100 million row nosql set and unfortunately building =
1 million indexes. =A0Each row I get may or may not be for the index I just=
 wrote too so I can't keep IndexWriter open very long. =A0I am currently si=
mulating how long it would take me to build all the indexes and it looks li=
ke it is somewhere around 17 hours :(
>
> Any other ways to optimize this code(and then I can maybe apply it to our=
 index map/reduce job), thanks, Dean =A0This is done in 20 different thread=
s and again taking IndexWriter out of the loop is probably not an option si=
nce as I go over the 100 million records each one needs a different IndexWr=
iter and I can't have too many IndexWriters open.
>
> =A0 =A0 =A0 =A0 =A0 =A0Directory dir =3D FSDirectory.open(new File(INDEX_=
DIR_PREFIX
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0+ this.account));
>
> =A0 =A0 =A0 =A0 =A0 =A0for (int i =3D 0; i < 125; i++) {
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 IndexWriterConfig conf =3D new IndexWriterCon=
fig(
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 Version.LUCENE_32, new KeywordAna=
lyzer());
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 IndexWriter writer =3D new IndexWriter(dir, c=
onf);
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 LocalDate date =3D new LocalDate();
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 int random =3D this.r.nextInt(1000);
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 date =3D date.plusDays(random);
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 int next =3D this.r.nextInt(5000);
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 int name =3D this.r.nextInt(1000);
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 Document document =3D createDocument(("temp" =
+ next),
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 ("dean" + name),
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0"some url"=
, date);
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 writer.addDocument(document);
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 writer.close();
> =A0 =A0 =A0 =A0 =A0 =A0}
>
> Hmmmm, I maybe could use a IndexWriter cache of 2000 to leave them open u=
ntil evicted? =A0I can't think of anything else to help though. =A0Ideas?
> Thanks,
> Dean

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50138-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun 22 09:11:28 2011
Return-Path: <java-user-return-50138-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1D2266D56
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 22 Jun 2011 09:11:28 +0000 (UTC)
Received: (qmail 89117 invoked by uid 500); 22 Jun 2011 09:11:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89066 invoked by uid 500); 22 Jun 2011 09:11:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89058 invoked by uid 99); 22 Jun 2011 09:11:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2011 09:11:24 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of bernd.fehling@uni-bielefeld.de designates 129.70.204.73 as permitted sender)
Received: from [129.70.204.73] (HELO mux2-unibi-smtp.hrz.uni-bielefeld.de) (129.70.204.73)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2011 09:11:19 +0000
MIME-version: 1.0
Content-transfer-encoding: 8BIT
Content-type: text/plain; charset=ISO-8859-1; format=flowed
Received: from pmxchannel-daemon.mux2-unibi-smtp.hrz.uni-bielefeld.de by
 mux2-unibi-smtp.hrz.uni-bielefeld.de
 (Sun Java(tm) System Messaging Server 6.3-6.03 (built Mar 14 2008; 32bit))
 id <0LN600G00PI9XV00@mux2-unibi-smtp.hrz.uni-bielefeld.de> for
 java-user@lucene.apache.org; Wed, 22 Jun 2011 11:10:57 +0200 (CEST)
Received: from [129.70.11.68] ([129.70.11.68])
 by mux2-unibi-smtp.hrz.uni-bielefeld.de
 (Sun Java(tm) System Messaging Server 6.3-6.03 (built Mar 14 2008; 32bit))
 with ESMTPPSA id <0LN600GQZPI9BP00@mux2-unibi-smtp.hrz.uni-bielefeld.de> for
 java-user@lucene.apache.org; Wed, 22 Jun 2011 11:10:57 +0200 (CEST)
Date: Wed, 22 Jun 2011 11:10:57 +0200
From: Bernd Fehling <bernd.fehling@uni-bielefeld.de>
Subject: Re: questions about fieldCache
In-reply-to: <BANLkTim=qM=nfOXNoJBw-95h5+HTuqH20A@mail.gmail.com>
To: java-user@lucene.apache.org
Message-id:
 <12961_1308733857_ZZh0u564L_Czc.00_4E01B1A1.5080003@uni-bielefeld.de>
X-EnvFrom: bernd.fehling@uni-bielefeld.de
X-PMX-Version: 5.5.9.395186, Antispam-Engine: 2.7.2.376379,
 Antispam-Data: 2011.6.22.84815, pmx7
X-Connecting-IP: 129.70.11.68
References: <780_1308648748_ZZh0u11fzJ~dL.00_4E00652B.6010903@uni-bielefeld.de>
 <BANLkTimEr4zLRVtpay3X-HpEpVd+gJoc5Q@mail.gmail.com>
 <17741_1308659988_ZZh0u321fM5SQ.00_4E009113.6020402@uni-bielefeld.de>
 <BANLkTim=qM=nfOXNoJBw-95h5+HTuqH20A@mail.gmail.com>
User-Agent: Mozilla/5.0 (X11; U; Linux x86_64; de; rv:1.9.2.17) Gecko/20110414
 SUSE/3.1.10 Thunderbird/3.1.10


OK, after some sorting fieldCache has some entries and also all other caches.
Next I called optimize which started a new searcher.
All caches a cleared, _except_ fieldCache.
I then started a GC with jconsole and the logfile reported "Full GC".
The heap reduced its size but the fieldCache is _still_ holding its entries.

 From this point of view the fieldCache will never cleaned up by GC,
holding more and more data until OOM, that is very bad.

Why is fieldCache not under the hood of Lucene/Solr so that it will be cleaned
up with a new searched or Full GC?

Regards,
Bernd


Am 21.06.2011 19:37, schrieb Erick Erickson:
>> So action that starts a new searcher and closes the old one (like
>> replication)
>> should release cache from fieldCache through garbage collection?
>
> Absolutely. It won't be immediate, because the JVM has some
> heuristics it uses to initiate garbage collection. You could try
> attaching to the Solr instance with jConsole and use that to trigger
> garbage collections to see what that could tell you...
>
> Best
> Erick
>
> On Tue, Jun 21, 2011 at 8:39 AM, Bernd Fehling
> <bernd.fehling@uni-bielefeld.de>  wrote:
>>
>> Currently I'm using version 3.2.
>> I used already 4.x some month ago but there was to much change to that time
>> so I decided to go with 3.0.x and updated to 3.1 and now to 3.2.
>>
>> I'm still dealing with my fieldCache OOM issue and want to understand
>> why things are as they are.
>> I have already removed/solved one "insane message" from fieldCache and
>> three ReadOnlyDirectoryReader Entries from fieldCache.
>> Only sorting produces now an entry.
>>
>> So action that starts a new searcher and closes the old one (like
>> replication)
>> should release cache from fieldCache through garbage collection?
>>
>> Regards
>> Bernd
>>
>> Am 21.06.2011 13:49, schrieb Erick Erickson:
>>>
>>> Hmmm, I'm not going to even try to talk about the code itself, but I will
>>> add
>>> a couple of clarifications:
>>>
>>> Jetty has nothing to do with it. It's in Lucene, and it's used for sorting
>>> and
>>> sometimes faceting. The cache is associated with a reader on a machine
>>> used to search. When replication happens, that searcher should be closed
>>> and any data associated with the cache is returned to the system.
>>>
>>> Someone else will have to chime in on the underlying details<G>..
>>>
>>> By the way, what version of Solr are you using? Because the memory
>>> requirements for string sorting and faceting have been drastically
>>> reduced on the trunk version. In a really rough test I've seen 75%
>>> reductions in memory requirements (note I was doing the worst things
>>> I could think of, so I don't necessarily expect your results to be as
>>> drastic).
>>>
>>> Best
>>> Erick
>>>
>>> On Tue, Jun 21, 2011 at 5:32 AM, Bernd Fehling
>>> <bernd.fehling@uni-bielefeld.de>    wrote:
>>>>
>>>> I'm trying to understand the logic of/behind fieldCache.
>>>>
>>>> Who has written this peace of code or has good knowledge about it?
>>>>
>>>> Why is it under the hood of jetty?
>>>>
>>>> I see FieldCache$StringIndex with
>>>> - f_dccollection
>>>> - f_dcyear
>>>> - f_dctype
>>>> but also
>>>> - dctitle -->    f_dctitle -->    f_dccreator
>>>> - title -->    f_dcyear
>>>>
>>>> There are some entries without further reference like the first examples
>>>> and some that have references to further HashMaps like a chain.
>>>> Why is it this way, what is the purpose?
>>>>
>>>> What is fieldCache doing if a server is replicated, will all old content
>>>> be cleaned up because of a new index with new content?
>>>>
>>>> Regards
>>>> Bernd
>>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

-- 
*************************************************************
Bernd Fehling                Universittsbibliothek Bielefeld
Dipl.-Inform. (FH)                        Universittsstr. 25
Tel. +49 521 106-4060                   Fax. +49 521 106-4052
bernd.fehling@uni-bielefeld.de                33615 Bielefeld

BASE - Bielefeld Academic Search Engine - www.base-search.net
*************************************************************

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50139-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun 22 11:15:06 2011
Return-Path: <java-user-return-50139-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2CB386BA2
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 22 Jun 2011 11:15:06 +0000 (UTC)
Received: (qmail 64975 invoked by uid 500); 22 Jun 2011 11:15:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64926 invoked by uid 500); 22 Jun 2011 11:15:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64918 invoked by uid 99); 22 Jun 2011 11:15:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2011 11:15:03 +0000
X-ASF-Spam-Status: No, hits=0.0 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [98.138.91.176] (HELO nm16-vm4.bullet.mail.ne1.yahoo.com) (98.138.91.176)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 22 Jun 2011 11:14:53 +0000
Received: from [98.138.90.54] by nm16.bullet.mail.ne1.yahoo.com with NNFMP; 22 Jun 2011 11:14:32 -0000
Received: from [98.138.89.240] by tm7.bullet.mail.ne1.yahoo.com with NNFMP; 22 Jun 2011 11:14:32 -0000
Received: from [127.0.0.1] by omp1013.mail.ne1.yahoo.com with NNFMP; 22 Jun 2011 11:14:32 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 94131.70561.bm@omp1013.mail.ne1.yahoo.com
Received: (qmail 38187 invoked by uid 60001); 22 Jun 2011 11:14:31 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1308741271; bh=wvjxJfsJDIdcUT+eGblLqMB3ZmXe7+yON9ZN5y478XA=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=VWbwNLJ5NpX874ZEwPOrpbmHa79xZk1MCj3uRvAo2kiiVZpZKLB/s0+p9PnW3AOvB+G+SSAvuMS5tjQH+zfn9Jbyx4+7T3n1oeeCxDqD0kpJ7da9VN2fdvAR4Dte96mf+ebuiJ2XkrOObJZQqhV44nzXeUySHcrenIT3+9jv1b0=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=ilFUbjU5J37ONYucYhSvvumGfrzxZ1esx2O02rRuqbTKtJ/xh8hLg3S6ojT82ykyCZxJJx4A5NTo2MwXF4e4Xzt5bGpQPRthSxvZWnP+syJDuyTTRPq3GXfI1ckGqkiXioJsyvR59DCXJfc16prC7vRFajpn9eywTrIp44Kva5A=;
Message-ID: <907646.6606.qm@web121716.mail.ne1.yahoo.com>
X-YMail-OSG: e9uvj0EVM1nkUfWO3bbW8.mpRNGw8QrYAqUWJXuO9zr8rrQ
 6cURxvL543bdpVhPdfJoryaGCSMjdYk7lFVeDedJdJ_f2k2jg.z6y3Yd2Xz.
 0k81OOMFYkyabhXzj1A2QSe8jbrjp1WZeZ4g_IYAScG7dwVN9mL8WNe_XtG7
 VkaxTxbhsCHBRI7Vxm5VrrpCr0vJ.MqocfFs3MCvUlu8fTuAnavwx4u2SSaX
 6VSC_E4agUkPfFeE5qKOwNWMr5RgqYomDKWrF376HMZDzdH9556qW6MvapMY
 m1DyBSiR431.LGevtuxEscqMgFIPEvy7MZRqYLGaWlivBUYFG0pvI2i_7lQA
 I2Wbnv_DXRfH7co7pFRKtNYNziZMvQ0ubHzIhrJYASO3FjEJNXhN6vJocw0g
 SA4jBxKAZuGlifqf1GQtR8KcG7tRxP2XR8BB83pcYierOqYaZCVvh5K7PeNX
 r906D.wHrQRAGTr.lIlOAvlrv_JbXABkelod_dKvIy90PSebOnLFr
Received: from [193.140.184.4] by web121716.mail.ne1.yahoo.com via HTTP; Wed, 22 Jun 2011 04:14:31 PDT
X-Mailer: YahooMailClassic/14.0.3 YahooMailWebService/0.8.111.304355
Date: Wed, 22 Jun 2011 04:14:31 -0700 (PDT)
From: Ahmet Arslan <iorixxx@yahoo.com>
Subject: Re: ComplexPhraseQueryParser with multiple fields
To: java-user@lucene.apache.org
In-Reply-To: <1308655374681-3090213.post@n3.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org

> Which of the solutions did you find to work better?
> Can you please say which package should I change it to if I
> choose to do it
> that way?

I think changing package name of ComplexQueryParser is easier. This way you can use existing patch directly.

Plus, do you mind voting https://issues.apache.org/jira/browse/LUCENE-1486? This will require creating a jira account if you don't  already have one.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50140-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun 22 14:22:42 2011
Return-Path: <java-user-return-50140-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4A5FA62FE
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 22 Jun 2011 14:22:42 +0000 (UTC)
Received: (qmail 17999 invoked by uid 500); 22 Jun 2011 14:22:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17911 invoked by uid 500); 22 Jun 2011 14:22:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17903 invoked by uid 99); 22 Jun 2011 14:22:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2011 14:22:39 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.210.48] (HELO mail-pz0-f48.google.com) (209.85.210.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2011 14:22:34 +0000
Received: by pzk10 with SMTP id 10so718662pzk.35
        for <java-user@lucene.apache.org>; Wed, 22 Jun 2011 07:22:14 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.68.58.199 with SMTP id t7mr354403pbq.119.1308752534393; Wed,
 22 Jun 2011 07:22:14 -0700 (PDT)
Received: by 10.68.55.197 with HTTP; Wed, 22 Jun 2011 07:22:14 -0700 (PDT)
Date: Wed, 22 Jun 2011 10:22:14 -0400
Message-ID: <BANLkTim4YKpjpFuOoWN8r4m_StWfVc-gVg@mail.gmail.com>
Subject: A useful resource for Lucene related questions?
From: Seth Rosen <seth@architexa.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=bcaec543063ee9543204a64db194

--bcaec543063ee9543204a64db194
Content-Type: text/plain; charset=ISO-8859-1

Hey guys,

I've been a big fan of Lucene and have been working with it for sometime.

While trying to use Lucene I often found myself scouring the web, javadoc,
source code, and this mailing list for answers to many of the questions I
had. I wished there was a site where I could find solutions to common
problems, main concepts, and architectural information. I wanted to try to
help here.

Some of you may have already received an e-mail about a cool project that I
have been working on. I am trying to help programmers better understand the
guts of Lucene by creating a simple site consisting of documentation
for the main ideas of Lucene. You can find it here

http://www.codemaps.org/s/Lucene_API
http://www.codemaps.org/s/Lucene_Core

I want to make this resource available to everyone, and have made the
underlying tooling free for projects like Lucene.

There has been some positive feedback for the site, but I wanted to hear
what the Lucene community thinks of CodeMaps before I focus on other
projects.

Thank You,
Seth Rosen
www.architexa.com
seth@architexa.com
Understand and Document in Seconds!


PS
You can find more information on this initiative here:
http://www.architexa.com/start/open-source

--bcaec543063ee9543204a64db194--

From java-user-return-50141-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun 22 15:33:30 2011
Return-Path: <java-user-return-50141-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 237396F9D
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 22 Jun 2011 15:33:30 +0000 (UTC)
Received: (qmail 79151 invoked by uid 500); 22 Jun 2011 15:33:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79112 invoked by uid 500); 22 Jun 2011 15:33:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79104 invoked by uid 99); 22 Jun 2011 15:33:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2011 15:33:27 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [173.164.230.50] (HELO mailhost.transaxtions.com) (173.164.230.50)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 22 Jun 2011 15:33:21 +0000
Received: (qmail 6410 invoked from network); 22 Jun 2011 08:21:56 -0700
Received: from unknown (HELO ?192.168.1.120?) (192.168.1.120)
  by mymailhost.transaxtions.com with SMTP; 22 Jun 2011 08:21:56 -0700
Message-ID: <4E020B2E.1060007@transaxtions.com>
Date: Wed, 22 Jun 2011 08:33:02 -0700
From: Nagendra Nagarajayya <nnagarajayya@transaxtions.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.18) Gecko/20110616 Lightning/1.0b2 Thunderbird/3.1.11
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: [Announce] Solr 3.2 with RankingAlgorithm
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi!

I would like to announce the availability of Solr 3.2 with 
RankingAlgorithm. Please download and give the new version a try. This 
version of RankingAlgorithm exposes a lucene compatible api so almost 
all of  Solr features should work as it is.

Note:
NRT support will be available by next week.

Sincerely,

- Nagendra Nagarajayya
http://solr-ra.tgels.com
http://rankingalgorithm.tgels.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50142-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun 22 15:56:44 2011
Return-Path: <java-user-return-50142-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8CEA16073
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 22 Jun 2011 15:56:44 +0000 (UTC)
Received: (qmail 40323 invoked by uid 500); 22 Jun 2011 15:56:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40265 invoked by uid 500); 22 Jun 2011 15:56:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40257 invoked by uid 99); 22 Jun 2011 15:56:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2011 15:56:41 +0000
X-ASF-Spam-Status: No, hits=0.5 required=5.0
	tests=FROM_DOMAIN_NOVOWEL,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [65.242.33.132] (HELO smtp.trssllc.com) (65.242.33.132)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2011 15:56:33 +0000
Received: from TRPEX01.TRSSLLC.com ([127.0.0.1]) by TRPEX01 ([127.0.0.1]) with
 mapi; Wed, 22 Jun 2011 11:55:41 -0400
From: Bob Rhodes <Bob.Rhodes@trssllc.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 22 Jun 2011 11:55:39 -0400
Subject: questions about  searching lucene 3.2
Thread-Topic: questions about  searching lucene 3.2
Thread-Index: Acww58ZP3LHD9laTTYu/FIsKDmAobAAAllMg
Message-ID: <1DA142C0B842D742B61E20305D79FABF1315BB8144@TRPEX01>
References: <BANLkTim4YKpjpFuOoWN8r4m_StWfVc-gVg@mail.gmail.com>
In-Reply-To: <BANLkTim4YKpjpFuOoWN8r4m_StWfVc-gVg@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: yes
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: multipart/signed; protocol="application/x-pkcs7-signature";
	micalg=SHA1; boundary="----=_NextPart_000_0033_01CC30D3.4E203CB0"
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0033_01CC30D3.4E203CB0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi all,
I have some questions about searching 3.2. I have just upgraded from 2.4.1
to 3.2. I am using the standard analyzer to create the index and to search,
and one of the fields is called "querytext" and it has content like this
among other things: phoneNumber="(904) 555-1212". I've tried many different
ways to query this using the query api and the query parser and I can't find
the string above. It seems the analyzer tokenizes the number above as 904
555 1212. The numbers I am searching with are formatted as 9045551212 and I
need to use that someone to find the number formatted as above. Thanks for
the help!


Bob

 

------=_NextPart_000_0033_01CC30D3.4E203CB0
Content-Type: application/x-pkcs7-signature; name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment; filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIQGTCCBKow
ggOSoAMCAQICDi5qAAEAAh/XUiEsEVw7MA0GCSqGSIb3DQEBBQUAMHYxCzAJBgNVBAYTAkRFMRww
GgYDVQQKExNUQyBUcnVzdENlbnRlciBHbWJIMSIwIAYDVQQLExlUQyBUcnVzdENlbnRlciBDbGFz
cyAyIENBMSUwIwYDVQQDExxUQyBUcnVzdENlbnRlciBDbGFzcyAyIENBIElJMB4XDTA2MDExMjE0
Mzg0M1oXDTI1MTIzMTIyNTk1OVowdjELMAkGA1UEBhMCREUxHDAaBgNVBAoTE1RDIFRydXN0Q2Vu
dGVyIEdtYkgxIjAgBgNVBAsTGVRDIFRydXN0Q2VudGVyIENsYXNzIDIgQ0ExJTAjBgNVBAMTHFRD
IFRydXN0Q2VudGVyIENsYXNzIDIgQ0EgSUkwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIB
AQCrgIebjvDDfIfX6CSCEbM83UNi7vjDRdro4aBf0Sqy6pNo37TI1kPpxHVZf/zhHfgxcCMbiJ4n
uXv9OtLJqekUL5C+A1LBSc32/eQIZgtXiqJCoLjVf2lckDKylw3KStxGPgJViVPjGlrLNsYHVveM
zxH0TLswcASVpfY5jP1zgQh9iV4yHiKpIkVLsGYuMMyfZf38y4Gp8eA7r6OG0YnqxEV5UF2u6SF0
kk2LWYKPlOPpSvHnSbAU4/Viy9VyvR+50p+gzaj6AcjZDd/a/Eeds8hU30lK8SGp/hhO7kjUGbvv
feTinctbtm7/481a53SCBbqAJTjL5Gmer0GqGoT1AgMBAAGjggE0MIIBMDAPBgNVHRMBAf8EBTAD
AQH/MA4GA1UdDwEB/wQEAwIBBjAdBgNVHQ4EFgQU46tUTICh21ZDt5FKy/OCehNcCKswge0GA1Ud
HwSB5TCB4jCB36CB3KCB2YY1aHR0cDovL3d3dy50cnVzdGNlbnRlci5kZS9jcmwvdjIvdGNfY2xh
c3NfMl9jYV9JSS5jcmyGgZ9sZGFwOi8vd3d3LnRydXN0Y2VudGVyLmRlL0NOPVRDJTIwVHJ1c3RD
ZW50ZXIlMjBDbGFzcyUyMDIlMjBDQSUyMElJLE89VEMlMjBUcnVzdENlbnRlciUyMEdtYkgsT1U9
cm9vdGNlcnRzLERDPXRydXN0Y2VudGVyLERDPWRlP2NlcnRpZmljYXRlUmV2b2NhdGlvbkxpc3Q/
YmFzZT8wDQYJKoZIhvcNAQEFBQADggEBAIzX337uG4AQs4P12xHqa0uokhjZ9wc59Sy+BnV6aFMV
HOpK7V78I7IToNMJ//b2LmtBcXnN4m39rllrhR24TiKa7WY5bkuU5lX8CxuLd8FTE2aJ2SjWi/NF
SmO3/XsLYV24bb7D3Ft50u2G5aJNvl50fGrtFjgff1iBWhrrMogtsvM5d4CvXrZhdSnbI02IylAo
y4XS0xCiWW7Tk1QAeqJGlYYFnKkZmOUxcgwA4mfZQOAkM3tvLLlcq2WdLKx26jWZ9Ze5DyTsx3Yh
KGWuV+gHiHVKVqDSBTqk5o2SiCzz8uHBxmHbQcXHm/cOGlFFwmFr3GQnF4xat9p0KM2X5L0wggWX
MIIEf6ADAgECAg5IYAABAALioyWoWa5MKzANBgkqhkiG9w0BAQUFADB8MQswCQYDVQQGEwJERTEc
MBoGA1UEChMTVEMgVHJ1c3RDZW50ZXIgR21iSDElMCMGA1UECxMcVEMgVHJ1c3RDZW50ZXIgQ2xh
c3MgMiBMMSBDQTEoMCYGA1UEAxMfVEMgVHJ1c3RDZW50ZXIgQ2xhc3MgMiBMMSBDQSBYSTAeFw0x
MTA1MDIxODAyMTlaFw0xNDA1MDIxODAxNTlaMGsxCzAJBgNVBAYTAlVTMQswCQYDVQQIEwJOWTER
MA8GA1UEBxMITmV3IFlvcmsxGDAWBgNVBAoTD1Rob21zb24gUmV1dGVyczENMAsGA1UECxMEVFJT
UzETMBEGA1UEAxMKQm9iIFJob2RlczCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALjQ
AQK3qn4EqjqETnYRDG6ejvAgVaeoos7yBzAE6zc0Hp83jzHZNB0B8fxkLBBdaCS4drlHEuDZB2Tm
s1o9e+U3+ReCiupxxHMNppho5y1MgvXQ0XYXf9bpVUCCYqF58Dx3RveT5vMODbEHSHm+0iTft5J4
ZBR4glfXKZRHE11t3TQoI8Z5cBjlyh1+GEj4RWZiEBKmOQ/bIcRaiJuiMSIRW0T2kEp5oEoauBtV
Ebs1V6Rf0vTY6pbtBwTXPypq4VDcHm4BD6cLOFrhELkvkG6sF/s3kF3fAZL8gFcR0XEvFdU9qkXU
MksOJSJAhVNaE7X9dtY+SdzO+boDpKPqdxECAwEAAaOCAiYwggIiMIGaBggrBgEFBQcBAQSBjTCB
ijBRBggrBgEFBQcwAoZFaHR0cDovL3d3dy50cnVzdGNlbnRlci5kZS9jZXJ0c2VydmljZXMvY2Fj
ZXJ0cy90Y19jbGFzczJfTDFfQ0FfWEkuY3J0MDUGCCsGAQUFBzABhilodHRwOi8vb2NzcC54aS50
Y2NsYXNzMi1paS50cnVzdGNlbnRlci5kZTAfBgNVHSMEGDAWgBRms8aR+bbNsl+aN1ZGDOJr1bF8
tDAMBgNVHRMBAf8EAjAAMEoGA1UdIARDMEEwPwYJKoIUACwBAQECMDIwMAYIKwYBBQUHAgEWJGh0
dHA6Ly93d3cudHJ1c3RjZW50ZXIuZGUvZ3VpZGVsaW5lczAOBgNVHQ8BAf8EBAMCBPAwHQYDVR0O
BBYEFISzLWnLeohaBV/DHYEb6SalJssJMFcGA1UdHwRQME4wTKBKoEiGRmh0dHA6Ly9jcmwueGku
dGNjbGFzczItaWkudHJ1c3RjZW50ZXIuZGUvY3JsL3YyL3RjX2NsYXNzMl9MMV9DQV9YSS5jcmww
MwYDVR0lBCwwKgYIKwYBBQUHAwIGCCsGAQUFBwMEBggrBgEFBQcDBwYKKwYBBAGCNxQCAjBLBgNV
HREERDBCoCgGCisGAQQBgjcUAgOgGgwYVTAwMDE2NDBAVExSLlRob21zb24uQ29tgRZib2Iucmhv
ZGVzQHRyc3NsbGMuY29tMA0GCSqGSIb3DQEBBQUAA4IBAQAcfDuCR+t2lYfoypEm2Or7iN2dYFpN
Ef5Npy82zhCIuRkVSRHAfVhRMCTL2dIPcKBTOsUJSS8BojzM04VWmA5mU+8w72w0SZ4X05MKuwR7
6CZAI96mNWVSywvjf7cam37BVtw3CHPXqTUlPMw3RpJ7b3vOsVTzG1gFKHBfvjNE++fTfOYvXOxF
EPib8w188MuYVDereXU60QyLoXj877Trbck8vElCfh6jVKMR3yUzLwTPUFZ9GjqoCFjxNvODwfUV
DDa1vmBFuHeFjWattsuQiloqiZjoQdQTJSDajQHwrmB4NVuv8yL7ka/LjrumG5EixXFlRTHczNn3
wjlfksSrMIIFzDCCBLSgAwIBAgIOHFAAAQAChUNZ8fMuzSYwDQYJKoZIhvcNAQEFBQAwdjELMAkG
A1UEBhMCREUxHDAaBgNVBAoTE1RDIFRydXN0Q2VudGVyIEdtYkgxIjAgBgNVBAsTGVRDIFRydXN0
Q2VudGVyIENsYXNzIDIgQ0ExJTAjBgNVBAMTHFRDIFRydXN0Q2VudGVyIENsYXNzIDIgQ0EgSUkw
HhcNMDkxMTAzMTQwODI2WhcNMjUxMjMxMjE1OTU5WjB8MQswCQYDVQQGEwJERTEcMBoGA1UEChMT
VEMgVHJ1c3RDZW50ZXIgR21iSDElMCMGA1UECxMcVEMgVHJ1c3RDZW50ZXIgQ2xhc3MgMiBMMSBD
QTEoMCYGA1UEAxMfVEMgVHJ1c3RDZW50ZXIgQ2xhc3MgMiBMMSBDQSBYSTCCASIwDQYJKoZIhvcN
AQEBBQADggEPADCCAQoCggEBAL0XRvSZBlfJtKmVowy0ffFdXC9Z2fLelDo6rs838pdU71hjZGdg
HUMO2ZbPZDNNHM3+yLRTnSx/8mjDl/+PFEEmcp5zwt1Gyvl0JKf1DIFBwfI3YrXyotJB+lOyI6+b
2wSb7mQ1crAykWCZVQzG6cmIl/mjaQ7lD8r364owqCFAkCK+vq4KpUvrkBOpcKbVQ77vb/XxlO6x
Huu5g6BCv82Ld5ag2DiWG/GDVJdhUsd+pf10Nmaz1pkXBlFCquU0o/N6YWBLEs0343IPku0QfTr2
Um05fQzv1b+P7PBCHZaI74UfheLTAEfCEhvrq+7mxj6V6F/j91Kcox9AFOJUMsUCAwEAAaOCAlAw
ggJMMIGVBggrBgEFBQcBAQSBiDCBhTBPBggrBgEFBQcwAoZDaHR0cDovL3d3dy50cnVzdGNlbnRl
ci5kZS9jZXJ0c2VydmljZXMvY2FjZXJ0cy90Y19jbGFzc18yX2NhX0lJLmNydDAyBggrBgEFBQcw
AYYmaHR0cDovL29jc3AudGNjbGFzczItSUkudHJ1c3RjZW50ZXIuZGUwHwYDVR0jBBgwFoAU46tU
TICh21ZDt5FKy/OCehNcCKswEgYDVR0TAQH/BAgwBgEB/wIBADBSBgNVHSAESzBJMAYGBFUdIAAw
PwYJKoIUACwBAQECMDIwMAYIKwYBBQUHAgEWJGh0dHA6Ly93d3cudHJ1c3RjZW50ZXIuZGUvZ3Vp
ZGVsaW5lczAOBgNVHQ8BAf8EBAMCAQYwHQYDVR0OBBYEFGazxpH5ts2yX5o3VkYM4mvVsXy0MIH5
BgNVHR8EgfEwge4wgeuggeiggeWGQWh0dHA6Ly9jcmwudGNjbGFzczItaWkudHJ1c3RjZW50ZXIu
ZGUvY3JsL3YyL3RjX2NsYXNzXzJfY2FfSUkuY3JshoGfbGRhcDovL3d3dy50cnVzdGNlbnRlci5k
ZS9DTj1UQyUyMFRydXN0Q2VudGVyJTIwQ2xhc3MlMjAyJTIwQ0ElMjBJSSxPPVRDJTIwVHJ1c3RD
ZW50ZXIlMjBHbWJILE9VPXJvb3RjZXJ0cyxEQz10cnVzdGNlbnRlcixEQz1kZT9jZXJ0aWZpY2F0
ZVJldm9jYXRpb25MaXN0P2Jhc2U/MA0GCSqGSIb3DQEBBQUAA4IBAQBsijTFDpWDTsnIlhTVBXkr
39sbIxz9XbRl55PPJ/igktuJ40JMNzxywDcDDaXG8RwQpkOnwAbYCsNh+d+7OWuCorjdZm3TCFXl
ERGx0YPgg/nnfzMvihDifVz/hfR2jp1b4Wc+6b3UHrwKwubmnOH7/K8xoq311F9E7wysFCjPPXSQ
OpSZoAhP+C9vbntQLdXANsKD1brJ35xiVrK4o+I6MJwOO2YyXhIEPFMMmHV8vLwVoEwV8j0wwzUd
UlPAyRgMhFY7uG0uR2Wy6DoqC7GEx4b22o02o6z4+keA4NAo8VuPonqM8lD+xGV6dcjsg7dyHMUh
6dHA31apMxOAm4j+MYIEFzCCBBMCAQEwgY4wfDELMAkGA1UEBhMCREUxHDAaBgNVBAoTE1RDIFRy
dXN0Q2VudGVyIEdtYkgxJTAjBgNVBAsTHFRDIFRydXN0Q2VudGVyIENsYXNzIDIgTDEgQ0ExKDAm
BgNVBAMTH1RDIFRydXN0Q2VudGVyIENsYXNzIDIgTDEgQ0EgWEkCDkhgAAEAAuKjJahZrkwrMAkG
BSsOAwIaBQCgggJdMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTEx
MDYyMjE1NTUzOVowIwYJKoZIhvcNAQkEMRYEFCN0h8LQ7qN+0RH+/R9w3vMO2yB/MIGfBgkrBgEE
AYI3EAQxgZEwgY4wfDELMAkGA1UEBhMCREUxHDAaBgNVBAoTE1RDIFRydXN0Q2VudGVyIEdtYkgx
JTAjBgNVBAsTHFRDIFRydXN0Q2VudGVyIENsYXNzIDIgTDEgQ0ExKDAmBgNVBAMTH1RDIFRydXN0
Q2VudGVyIENsYXNzIDIgTDEgQ0EgWEkCDkhgAAEAAuKjJahZrkwrMIGhBgsqhkiG9w0BCRACCzGB
kaCBjjB8MQswCQYDVQQGEwJERTEcMBoGA1UEChMTVEMgVHJ1c3RDZW50ZXIgR21iSDElMCMGA1UE
CxMcVEMgVHJ1c3RDZW50ZXIgQ2xhc3MgMiBMMSBDQTEoMCYGA1UEAxMfVEMgVHJ1c3RDZW50ZXIg
Q2xhc3MgMiBMMSBDQSBYSQIOSGAAAQAC4qMlqFmuTCswgbcGCSqGSIb3DQEJDzGBqTCBpjALBglg
hkgBZQMEASowCwYJYIZIAWUDBAEWMAoGCCqGSIb3DQMHMAsGCWCGSAFlAwQBAjAOBggqhkiG9w0D
AgICAIAwBwYFKw4DAgcwDQYIKoZIhvcNAwICAUAwDQYIKoZIhvcNAwICASgwBwYFKw4DAhowCwYJ
YIZIAWUDBAIDMAsGCWCGSAFlAwQCAjALBglghkgBZQMEAgEwCgYIKoZIhvcNAgUwDQYJKoZIhvcN
AQEBBQAEggEAAP7GV6PpiRrtyAXzy1xi9fO6oY2HXI5QjkC2YgzkxmTURdMtw5KcM9WW0RH2muA3
53Eacmei3wSwtuOJztI1+pkTjgbEnZbs+CJd5krttVlBjhPgzW/uXxy2VuxdHR9vutgwSwiJ0on4
haSTPSUKmgsibYjCelf2a8eBewuPgN9aQHbE95qbBljB33Qw726BJGD1QYDgIrtmBzXyvwwDIKMz
AswozseMeS5selJpDK+FvM+EaN6/BomNt/QOfjAl+PDgY4+IhY8lDB0IRamzUSZe25KA3i2Mt9iL
6Bn4Mj5r/OBilcO/KMGK+btemez4ObyIforY9uSCYlrMBHghXAAAAAAAAA==

------=_NextPart_000_0033_01CC30D3.4E203CB0--

From java-user-return-50143-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun 22 15:59:37 2011
Return-Path: <java-user-return-50143-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CEB60611E
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 22 Jun 2011 15:59:37 +0000 (UTC)
Received: (qmail 45979 invoked by uid 500); 22 Jun 2011 15:59:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45931 invoked by uid 500); 22 Jun 2011 15:59:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45922 invoked by uid 99); 22 Jun 2011 15:59:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2011 15:59:35 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [173.164.230.50] (HELO mailhost.transaxtions.com) (173.164.230.50)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 22 Jun 2011 15:59:30 +0000
Received: (qmail 6749 invoked from network); 22 Jun 2011 08:48:07 -0700
Received: from unknown (HELO ?192.168.1.120?) (192.168.1.120)
  by mymailhost.transaxtions.com with SMTP; 22 Jun 2011 08:48:07 -0700
Message-ID: <4E021151.6030408@transaxtions.com>
Date: Wed, 22 Jun 2011 08:59:13 -0700
From: Nagendra Nagarajayya <nnagarajayya@transaxtions.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.18) Gecko/20110616 Lightning/1.0b2 Thunderbird/3.1.11
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: [Announce] RankingAlgorithm exposed as Lucene 3.2.0 Api
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Hi!

I would like to announce the release of RankingAlgorithm exposed as 
Lucene 3.2.0 api and would like to invite you to try it out.  Since 
RankingAlgorithm is exposed as the Lucene API, no code changes are 
needed. Just download the new lucene-core-3.2.0.jar and the 
rankingalgorithm.jar, drop them into your existing lucene implementation 
(replace the lucene-core-3.2.0 jar) and you should be able to use the 
RankingAlgorithm for your searches.

You can download RankingAlgorithm from here:
http://rankingalgorithm.tgels.com


Regards,

- Nagendra Nagarajayya
http://rankingalgorithm.tgels.com
http://solr-ra.tgels.com



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50144-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun 22 19:25:09 2011
Return-Path: <java-user-return-50144-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 04A8165D9
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 22 Jun 2011 19:25:09 +0000 (UTC)
Received: (qmail 31068 invoked by uid 500); 22 Jun 2011 19:25:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31009 invoked by uid 500); 22 Jun 2011 19:25:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30998 invoked by uid 99); 22 Jun 2011 19:25:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2011 19:25:06 +0000
X-ASF-Spam-Status: No, hits=-0.1 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dean.hiller@broadridge.com designates 64.18.2.26 as permitted sender)
Received: from [64.18.2.26] (HELO exprod7og124.obsmtp.com) (64.18.2.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2011 19:24:56 +0000
Received: from gwm.broadridge.com ([167.212.2.180]) (using TLSv1) by exprod7ob124.postini.com ([64.18.6.12]) with SMTP
	ID DSNKTgJBcnyH0Xzt6PSJmdbA0QZzeNB4eXBI@postini.com; Wed, 22 Jun 2011 12:24:35 PDT
Received: from jsppsldlpsi02.broadridge.net ([10.98.54.12])
	by gwm.broadridge.com (8.13.8/8.13.8) with ESMTP id p5MJOXoK1056892
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Wed, 22 Jun 2011 15:24:33 -0400
Received: from JSIPSWEXHA01.bsg.ad.adp.com (jsipswexha01.bsg.ad.adp.com [10.17.69.24]) by jsppsldlpsi02.broadridge.net (RSA Interceptor) for <java-user@lucene.apache.org>; Wed, 22 Jun 2011 15:24:33 -0400
Received: from jscpcwexmaa1.bsg.ad.adp.com ([fe80::882f:16e8:308d:3ef]) by
 JSIPSWEXHA01.bsg.ad.adp.com ([::1]) with mapi; Wed, 22 Jun 2011 15:24:26
 -0400
From: "Hiller, Dean  x66079" <dean.hiller@broadridge.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 22 Jun 2011 15:24:22 -0400
Subject: IndexWriter.optimize not using it breaks my test case :(
Thread-Topic: IndexWriter.optimize not using it breaks my test case :(
Thread-Index: AcwxEf16p5cLEarfS7yapEXn4W7ftw==
Message-ID: <08230D4C8E666D479F6DE495A7684DCD0AC2F229@JSCPCWEXMAA1.bsg.ad.adp.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-cr-puzzleid: {C5DD41C1-02F6-4B68-ABB8-85209AC49323}
x-cr-hashedpuzzle: ANzz A4HV A89y Dcwi Dvb0 EXic Eucw E3uH E6Kd GAlW GvTm
 HWV2 ILY5 J9Dz KwOo
 LABE;1;agBhAHYAYQAtAHUAcwBlAHIAQABsAHUAYwBlAG4AZQAuAGEAcABhAGMAaABlAC4AbwByAGcA;Sosha1_v1;7;{C5DD41C1-02F6-4B68-ABB8-85209AC49323};ZABlAGEAbgAuAGgAaQBsAGwAZQByAEAAYgByAG8AYQBkAHIAaQBkAGcAZQAuAGMAbwBtAA==;Wed,
 22 Jun 2011 19:24:22
 GMT;SQBuAGQAZQB4AFcAcgBpAHQAZQByAC4AbwBwAHQAaQBtAGkAegBlACAAbgBvAHQAIAB1AHMAaQBuAGcAIABpAHQAIABiAHIAZQBhAGsAcwAgAG0AeQAgAHQAZQBzAHQAIABjAGEAcwBlACAAOgAoAA==
acceptlanguage: en-US
Content-Type: multipart/alternative;
	boundary="_000_08230D4C8E666D479F6DE495A7684DCD0AC2F229JSCPCWEXMAA1bsg_"
MIME-Version: 1.0
X-RSA-Inspected: yes
X-RSA-Classifications: public
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_08230D4C8E666D479F6DE495A7684DCD0AC2F229JSCPCWEXMAA1bsg_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I read that in a lot of cases IndexWriter.optimize does not have to be call=
ed.

I then deleted it and my junit test case broke because results were coming =
back in the query that were not supposed to be coming back :(.  I think eve=
rything is single tested.  Maybe I should write a more raw junit test first=
? But I thought I would ask what exactly is optimize doing and is Lucene th=
read safe...I read that it was somewhere(but also read elsewhere it wasn't)=
.

I kind of assumed my IndexWriters are not thread safe, but my IndexSearcher=
 could be running while another thread is using the IndexWriter, right?

(Of course, while my unit test is single threaded and failed with just this=
 one line change, our production system will be multithreaded which is why =
I ask).

Thanks,
Dean

This message and any attachments are intended only for the use of the add=
ressee and
may contain information that is privileged and confidential. If the reade=
r of the =

message is not the intended recipient or an authorized representative of =
the
intended recipient, you are hereby notified that any dissemination of thi=
s
communication is strictly prohibited. If you have received this communica=
tion in
error, please notify us immediately by e-mail and delete the message and =
any
attachments from your system.
=0D
--_000_08230D4C8E666D479F6DE495A7684DCD0AC2F229JSCPCWEXMAA1bsg_--

From java-user-return-50145-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun 22 19:26:57 2011
Return-Path: <java-user-return-50145-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8287E6635
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 22 Jun 2011 19:26:57 +0000 (UTC)
Received: (qmail 35054 invoked by uid 500); 22 Jun 2011 19:26:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35004 invoked by uid 500); 22 Jun 2011 19:26:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34996 invoked by uid 99); 22 Jun 2011 19:26:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2011 19:26:55 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dean.hiller@broadridge.com designates 64.18.2.20 as permitted sender)
Received: from [64.18.2.20] (HELO exprod7og121.obsmtp.com) (64.18.2.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2011 19:26:47 +0000
Received: from gwm.broadridge.com ([167.212.2.180]) (using TLSv1) by exprod7ob121.postini.com ([64.18.6.12]) with SMTP
	ID DSNKTgJB4W4u4wt3Vh4XP8AhU4K4SPoyIk7H@postini.com; Wed, 22 Jun 2011 12:26:26 PDT
Received: from jsppsldlpsi01.broadridge.net ([10.98.54.11])
	by gwm.broadridge.com (8.13.8/8.13.8) with ESMTP id p5MJQOga970886
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Wed, 22 Jun 2011 15:26:24 -0400
Received: from JSIPSWEXHA01.bsg.ad.adp.com (jsipswexha01.bsg.ad.adp.com [10.17.69.24]) by jsppsldlpsi01.broadridge.net (RSA Interceptor) for <java-user@lucene.apache.org>; Wed, 22 Jun 2011 15:26:08 -0400
Received: from jscpcwexmaa1.bsg.ad.adp.com ([fe80::882f:16e8:308d:3ef]) by
 JSIPSWEXHA01.bsg.ad.adp.com ([::1]) with mapi; Wed, 22 Jun 2011 15:26:05
 -0400
From: "Hiller, Dean  x66079" <dean.hiller@broadridge.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 22 Jun 2011 15:26:03 -0400
Subject: RE: I have seen this exception on some posts around but don't see
 the cause/solution(RamDirectory)..
Thread-Topic: I have seen this exception on some posts around but don't see
 the cause/solution(RamDirectory)..
Thread-Index: Acwwt1cQJRaINgPeTv6nX4sK46cUIAAWth1Q
Message-ID: <08230D4C8E666D479F6DE495A7684DCD0AC2F22B@JSCPCWEXMAA1.bsg.ad.adp.com>
References: <08230D4C8E666D479F6DE495A7684DCD0AC2EEB0@JSCPCWEXMAA1.bsg.ad.adp.com>
 <BANLkTiks-QCy1sh3ZvfFZKh0nLgU+U96XQ@mail.gmail.com>
In-Reply-To: <BANLkTiks-QCy1sh3ZvfFZKh0nLgU+U96XQ@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: en-US
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-RSA-Inspected: yes
X-RSA-Classifications: public
X-RSA-Action: allow
X-Virus-Checked: Checked by ClamAV on apache.org

That was it, thanks!!!
Dean

-----Original Message-----
From: Ian Lea [mailto:ian.lea@gmail.com]=20
Sent: Wednesday, June 22, 2011 2:35 AM
To: java-user@lucene.apache.org
Subject: Re: I have seen this exception on some posts around but don't see =
the cause/solution(RamDirectory)..

At a guess you are trying to open a searcher on a RAMDirectory that
doesn't yet contain anything.  Files only get written when stuff is
added to an index and the writer is closed or committed.


--
Ian.


On Tue, Jun 21, 2011 at 11:43 PM, Hiller, Dean  x66079
<dean.hiller@broadridge.com> wrote:
> Anyone know how to do a simple RamDirectory...I just created it but it is=
 failing with this...
>
> Caused by: org.apache.lucene.index.IndexNotFoundException: no segments* f=
ile found in org.apache.lucene.store.RAMDirectory@1d5a7f6 lockFactory=3Dorg=
.apache.lucene.store.SingleInstanceLockFactory@64804: files: []
> =A0 =A0 =A0at org.apache.lucene.index.SegmentInfos$FindSegmentsFile.run(S=
egmentInfos.java:711)
> =A0 =A0 =A0at org.apache.lucene.index.DirectoryReader.open(DirectoryReade=
r.java:75)
> =A0 =A0 =A0at org.apache.lucene.index.IndexReader.open(IndexReader.java:4=
28)
> =A0 =A0 =A0at org.apache.lucene.index.IndexReader.open(IndexReader.java:2=
88)
> =A0 =A0 =A0at org.apache.lucene.search.IndexSearcher.<init>(IndexSearcher=
.java:107)
> =A0 =A0 =A0at com.broadridge.nosql.impl.base.QueryTemp2.getResultListImpl=
(QueryTemp2.java:82)
> =A0 =A0 =A0at com.broadridge.nosql.impl.base.QueryTemp2.getResultList(Que=
ryTemp2.java:67)
> =A0 =A0 =A0... 43 more
>
> Thanks,
> Dean

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

This message and any attachments are intended only for the use of the add=
ressee and
may contain information that is privileged and confidential. If the reade=
r of the =

message is not the intended recipient or an authorized representative of =
the
intended recipient, you are hereby notified that any dissemination of thi=
s
communication is strictly prohibited. If you have received this communica=
tion in
error, please notify us immediately by e-mail and delete the message and =
any
attachments from your system.
=0D

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50146-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun 22 19:47:55 2011
Return-Path: <java-user-return-50146-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B54806580
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 22 Jun 2011 19:47:55 +0000 (UTC)
Received: (qmail 60713 invoked by uid 500); 22 Jun 2011 19:47:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60632 invoked by uid 500); 22 Jun 2011 19:47:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60624 invoked by uid 99); 22 Jun 2011 19:47:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2011 19:47:53 +0000
X-ASF-Spam-Status: No, hits=0.5 required=5.0
	tests=FROM_DOMAIN_NOVOWEL,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [65.242.33.132] (HELO smtp.trssllc.com) (65.242.33.132)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2011 19:47:46 +0000
Received: from TRPEX01.TRSSLLC.com ([127.0.0.1]) by TRPEX01 ([127.0.0.1]) with
 mapi; Wed, 22 Jun 2011 15:46:54 -0400
From: Bob Rhodes <Bob.Rhodes@trssllc.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 22 Jun 2011 15:46:52 -0400
Subject: RE: questions about  searching lucene 3.2
Thread-Topic: questions about  searching lucene 3.2
Thread-Index: Acww58ZP3LHD9laTTYu/FIsKDmAobAAAllMgAAoc/dA=
Message-ID: <1DA142C0B842D742B61E20305D79FABF1315BB818E@TRPEX01>
References: <BANLkTim4YKpjpFuOoWN8r4m_StWfVc-gVg@mail.gmail.com>
 <1DA142C0B842D742B61E20305D79FABF1315BB8144@TRPEX01>
In-Reply-To: <1DA142C0B842D742B61E20305D79FABF1315BB8144@TRPEX01>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: yes
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: multipart/signed; protocol="application/x-pkcs7-signature";
	micalg=SHA1; boundary="----=_NextPart_000_0084_01CC30F3.9B380DF0"
MIME-Version: 1.0

------=_NextPart_000_0084_01CC30F3.9B380DF0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Here is a follow-up. This is a larger example of some of the text I'm
searching in my index:
The quoted name/value pairs are in the index.
"
middleName="D", zip="1111", lastName="ADAMSON", street="00 SOME ST",
addAssociates="true", state="CA", city="ROCHESTER", source="SOMESOURCE",
person_user="TESTUSER", dob="19510210", firstName="CHARLES"
"

If I use my app or Luke to search for ADAMSON I get matches when searching
the field above that contains the example text. I get the same results if I
search by the dob value 19510210 works great. 
The field content is variable and when the field above only contains
phoneNumber="(904) 555-1212" there is no way for me to find this exact
number. 

If I use the ClassicAnalyzer this I can use this to find my number by just
searching "(904) 501-0560" for the number.

I think this more clearly states my issue. Is the problem related to the
parens? I've tried escaping and double escaping them to no avail. Anyone
have any suggestions?

In my code I've used the standard query parser as well as the
ComplexPhraseQueryParser. 

One other point to note. The indexes I'm searching were created with 2.1.4
using the StandardAnalyzer but I'm using 3.2.0 to search. 

Bob


-----Original Message-----
From: Bob Rhodes [mailto:Bob.Rhodes@trssllc.com] 
Sent: Wednesday, June 22, 2011 11:56 AM
To: java-user@lucene.apache.org
Subject: questions about searching lucene 3.2

Hi all,
I have some questions about searching 3.2. I have just upgraded from 2.4.1
to 3.2. I am using the standard analyzer to create the index and to search,
and one of the fields is called "querytext" and it has content like this
among other things: phoneNumber="(904) 555-1212". I've tried many different
ways to query this using the query api and the query parser and I can't find
the string above. It seems the analyzer tokenizes the number above as 904
555 1212. The numbers I am searching with are formatted as 9045551212 and I
need to use that someone to find the number formatted as above. Thanks for
the help!


Bob

 

------=_NextPart_000_0084_01CC30F3.9B380DF0
Content-Type: application/x-pkcs7-signature; name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment; filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIQGTCCBKow
ggOSoAMCAQICDi5qAAEAAh/XUiEsEVw7MA0GCSqGSIb3DQEBBQUAMHYxCzAJBgNVBAYTAkRFMRww
GgYDVQQKExNUQyBUcnVzdENlbnRlciBHbWJIMSIwIAYDVQQLExlUQyBUcnVzdENlbnRlciBDbGFz
cyAyIENBMSUwIwYDVQQDExxUQyBUcnVzdENlbnRlciBDbGFzcyAyIENBIElJMB4XDTA2MDExMjE0
Mzg0M1oXDTI1MTIzMTIyNTk1OVowdjELMAkGA1UEBhMCREUxHDAaBgNVBAoTE1RDIFRydXN0Q2Vu
dGVyIEdtYkgxIjAgBgNVBAsTGVRDIFRydXN0Q2VudGVyIENsYXNzIDIgQ0ExJTAjBgNVBAMTHFRD
IFRydXN0Q2VudGVyIENsYXNzIDIgQ0EgSUkwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIB
AQCrgIebjvDDfIfX6CSCEbM83UNi7vjDRdro4aBf0Sqy6pNo37TI1kPpxHVZf/zhHfgxcCMbiJ4n
uXv9OtLJqekUL5C+A1LBSc32/eQIZgtXiqJCoLjVf2lckDKylw3KStxGPgJViVPjGlrLNsYHVveM
zxH0TLswcASVpfY5jP1zgQh9iV4yHiKpIkVLsGYuMMyfZf38y4Gp8eA7r6OG0YnqxEV5UF2u6SF0
kk2LWYKPlOPpSvHnSbAU4/Viy9VyvR+50p+gzaj6AcjZDd/a/Eeds8hU30lK8SGp/hhO7kjUGbvv
feTinctbtm7/481a53SCBbqAJTjL5Gmer0GqGoT1AgMBAAGjggE0MIIBMDAPBgNVHRMBAf8EBTAD
AQH/MA4GA1UdDwEB/wQEAwIBBjAdBgNVHQ4EFgQU46tUTICh21ZDt5FKy/OCehNcCKswge0GA1Ud
HwSB5TCB4jCB36CB3KCB2YY1aHR0cDovL3d3dy50cnVzdGNlbnRlci5kZS9jcmwvdjIvdGNfY2xh
c3NfMl9jYV9JSS5jcmyGgZ9sZGFwOi8vd3d3LnRydXN0Y2VudGVyLmRlL0NOPVRDJTIwVHJ1c3RD
ZW50ZXIlMjBDbGFzcyUyMDIlMjBDQSUyMElJLE89VEMlMjBUcnVzdENlbnRlciUyMEdtYkgsT1U9
cm9vdGNlcnRzLERDPXRydXN0Y2VudGVyLERDPWRlP2NlcnRpZmljYXRlUmV2b2NhdGlvbkxpc3Q/
YmFzZT8wDQYJKoZIhvcNAQEFBQADggEBAIzX337uG4AQs4P12xHqa0uokhjZ9wc59Sy+BnV6aFMV
HOpK7V78I7IToNMJ//b2LmtBcXnN4m39rllrhR24TiKa7WY5bkuU5lX8CxuLd8FTE2aJ2SjWi/NF
SmO3/XsLYV24bb7D3Ft50u2G5aJNvl50fGrtFjgff1iBWhrrMogtsvM5d4CvXrZhdSnbI02IylAo
y4XS0xCiWW7Tk1QAeqJGlYYFnKkZmOUxcgwA4mfZQOAkM3tvLLlcq2WdLKx26jWZ9Ze5DyTsx3Yh
KGWuV+gHiHVKVqDSBTqk5o2SiCzz8uHBxmHbQcXHm/cOGlFFwmFr3GQnF4xat9p0KM2X5L0wggWX
MIIEf6ADAgECAg5IYAABAALioyWoWa5MKzANBgkqhkiG9w0BAQUFADB8MQswCQYDVQQGEwJERTEc
MBoGA1UEChMTVEMgVHJ1c3RDZW50ZXIgR21iSDElMCMGA1UECxMcVEMgVHJ1c3RDZW50ZXIgQ2xh
c3MgMiBMMSBDQTEoMCYGA1UEAxMfVEMgVHJ1c3RDZW50ZXIgQ2xhc3MgMiBMMSBDQSBYSTAeFw0x
MTA1MDIxODAyMTlaFw0xNDA1MDIxODAxNTlaMGsxCzAJBgNVBAYTAlVTMQswCQYDVQQIEwJOWTER
MA8GA1UEBxMITmV3IFlvcmsxGDAWBgNVBAoTD1Rob21zb24gUmV1dGVyczENMAsGA1UECxMEVFJT
UzETMBEGA1UEAxMKQm9iIFJob2RlczCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALjQ
AQK3qn4EqjqETnYRDG6ejvAgVaeoos7yBzAE6zc0Hp83jzHZNB0B8fxkLBBdaCS4drlHEuDZB2Tm
s1o9e+U3+ReCiupxxHMNppho5y1MgvXQ0XYXf9bpVUCCYqF58Dx3RveT5vMODbEHSHm+0iTft5J4
ZBR4glfXKZRHE11t3TQoI8Z5cBjlyh1+GEj4RWZiEBKmOQ/bIcRaiJuiMSIRW0T2kEp5oEoauBtV
Ebs1V6Rf0vTY6pbtBwTXPypq4VDcHm4BD6cLOFrhELkvkG6sF/s3kF3fAZL8gFcR0XEvFdU9qkXU
MksOJSJAhVNaE7X9dtY+SdzO+boDpKPqdxECAwEAAaOCAiYwggIiMIGaBggrBgEFBQcBAQSBjTCB
ijBRBggrBgEFBQcwAoZFaHR0cDovL3d3dy50cnVzdGNlbnRlci5kZS9jZXJ0c2VydmljZXMvY2Fj
ZXJ0cy90Y19jbGFzczJfTDFfQ0FfWEkuY3J0MDUGCCsGAQUFBzABhilodHRwOi8vb2NzcC54aS50
Y2NsYXNzMi1paS50cnVzdGNlbnRlci5kZTAfBgNVHSMEGDAWgBRms8aR+bbNsl+aN1ZGDOJr1bF8
tDAMBgNVHRMBAf8EAjAAMEoGA1UdIARDMEEwPwYJKoIUACwBAQECMDIwMAYIKwYBBQUHAgEWJGh0
dHA6Ly93d3cudHJ1c3RjZW50ZXIuZGUvZ3VpZGVsaW5lczAOBgNVHQ8BAf8EBAMCBPAwHQYDVR0O
BBYEFISzLWnLeohaBV/DHYEb6SalJssJMFcGA1UdHwRQME4wTKBKoEiGRmh0dHA6Ly9jcmwueGku
dGNjbGFzczItaWkudHJ1c3RjZW50ZXIuZGUvY3JsL3YyL3RjX2NsYXNzMl9MMV9DQV9YSS5jcmww
MwYDVR0lBCwwKgYIKwYBBQUHAwIGCCsGAQUFBwMEBggrBgEFBQcDBwYKKwYBBAGCNxQCAjBLBgNV
HREERDBCoCgGCisGAQQBgjcUAgOgGgwYVTAwMDE2NDBAVExSLlRob21zb24uQ29tgRZib2Iucmhv
ZGVzQHRyc3NsbGMuY29tMA0GCSqGSIb3DQEBBQUAA4IBAQAcfDuCR+t2lYfoypEm2Or7iN2dYFpN
Ef5Npy82zhCIuRkVSRHAfVhRMCTL2dIPcKBTOsUJSS8BojzM04VWmA5mU+8w72w0SZ4X05MKuwR7
6CZAI96mNWVSywvjf7cam37BVtw3CHPXqTUlPMw3RpJ7b3vOsVTzG1gFKHBfvjNE++fTfOYvXOxF
EPib8w188MuYVDereXU60QyLoXj877Trbck8vElCfh6jVKMR3yUzLwTPUFZ9GjqoCFjxNvODwfUV
DDa1vmBFuHeFjWattsuQiloqiZjoQdQTJSDajQHwrmB4NVuv8yL7ka/LjrumG5EixXFlRTHczNn3
wjlfksSrMIIFzDCCBLSgAwIBAgIOHFAAAQAChUNZ8fMuzSYwDQYJKoZIhvcNAQEFBQAwdjELMAkG
A1UEBhMCREUxHDAaBgNVBAoTE1RDIFRydXN0Q2VudGVyIEdtYkgxIjAgBgNVBAsTGVRDIFRydXN0
Q2VudGVyIENsYXNzIDIgQ0ExJTAjBgNVBAMTHFRDIFRydXN0Q2VudGVyIENsYXNzIDIgQ0EgSUkw
HhcNMDkxMTAzMTQwODI2WhcNMjUxMjMxMjE1OTU5WjB8MQswCQYDVQQGEwJERTEcMBoGA1UEChMT
VEMgVHJ1c3RDZW50ZXIgR21iSDElMCMGA1UECxMcVEMgVHJ1c3RDZW50ZXIgQ2xhc3MgMiBMMSBD
QTEoMCYGA1UEAxMfVEMgVHJ1c3RDZW50ZXIgQ2xhc3MgMiBMMSBDQSBYSTCCASIwDQYJKoZIhvcN
AQEBBQADggEPADCCAQoCggEBAL0XRvSZBlfJtKmVowy0ffFdXC9Z2fLelDo6rs838pdU71hjZGdg
HUMO2ZbPZDNNHM3+yLRTnSx/8mjDl/+PFEEmcp5zwt1Gyvl0JKf1DIFBwfI3YrXyotJB+lOyI6+b
2wSb7mQ1crAykWCZVQzG6cmIl/mjaQ7lD8r364owqCFAkCK+vq4KpUvrkBOpcKbVQ77vb/XxlO6x
Huu5g6BCv82Ld5ag2DiWG/GDVJdhUsd+pf10Nmaz1pkXBlFCquU0o/N6YWBLEs0343IPku0QfTr2
Um05fQzv1b+P7PBCHZaI74UfheLTAEfCEhvrq+7mxj6V6F/j91Kcox9AFOJUMsUCAwEAAaOCAlAw
ggJMMIGVBggrBgEFBQcBAQSBiDCBhTBPBggrBgEFBQcwAoZDaHR0cDovL3d3dy50cnVzdGNlbnRl
ci5kZS9jZXJ0c2VydmljZXMvY2FjZXJ0cy90Y19jbGFzc18yX2NhX0lJLmNydDAyBggrBgEFBQcw
AYYmaHR0cDovL29jc3AudGNjbGFzczItSUkudHJ1c3RjZW50ZXIuZGUwHwYDVR0jBBgwFoAU46tU
TICh21ZDt5FKy/OCehNcCKswEgYDVR0TAQH/BAgwBgEB/wIBADBSBgNVHSAESzBJMAYGBFUdIAAw
PwYJKoIUACwBAQECMDIwMAYIKwYBBQUHAgEWJGh0dHA6Ly93d3cudHJ1c3RjZW50ZXIuZGUvZ3Vp
ZGVsaW5lczAOBgNVHQ8BAf8EBAMCAQYwHQYDVR0OBBYEFGazxpH5ts2yX5o3VkYM4mvVsXy0MIH5
BgNVHR8EgfEwge4wgeuggeiggeWGQWh0dHA6Ly9jcmwudGNjbGFzczItaWkudHJ1c3RjZW50ZXIu
ZGUvY3JsL3YyL3RjX2NsYXNzXzJfY2FfSUkuY3JshoGfbGRhcDovL3d3dy50cnVzdGNlbnRlci5k
ZS9DTj1UQyUyMFRydXN0Q2VudGVyJTIwQ2xhc3MlMjAyJTIwQ0ElMjBJSSxPPVRDJTIwVHJ1c3RD
ZW50ZXIlMjBHbWJILE9VPXJvb3RjZXJ0cyxEQz10cnVzdGNlbnRlcixEQz1kZT9jZXJ0aWZpY2F0
ZVJldm9jYXRpb25MaXN0P2Jhc2U/MA0GCSqGSIb3DQEBBQUAA4IBAQBsijTFDpWDTsnIlhTVBXkr
39sbIxz9XbRl55PPJ/igktuJ40JMNzxywDcDDaXG8RwQpkOnwAbYCsNh+d+7OWuCorjdZm3TCFXl
ERGx0YPgg/nnfzMvihDifVz/hfR2jp1b4Wc+6b3UHrwKwubmnOH7/K8xoq311F9E7wysFCjPPXSQ
OpSZoAhP+C9vbntQLdXANsKD1brJ35xiVrK4o+I6MJwOO2YyXhIEPFMMmHV8vLwVoEwV8j0wwzUd
UlPAyRgMhFY7uG0uR2Wy6DoqC7GEx4b22o02o6z4+keA4NAo8VuPonqM8lD+xGV6dcjsg7dyHMUh
6dHA31apMxOAm4j+MYIEFzCCBBMCAQEwgY4wfDELMAkGA1UEBhMCREUxHDAaBgNVBAoTE1RDIFRy
dXN0Q2VudGVyIEdtYkgxJTAjBgNVBAsTHFRDIFRydXN0Q2VudGVyIENsYXNzIDIgTDEgQ0ExKDAm
BgNVBAMTH1RDIFRydXN0Q2VudGVyIENsYXNzIDIgTDEgQ0EgWEkCDkhgAAEAAuKjJahZrkwrMAkG
BSsOAwIaBQCgggJdMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTEx
MDYyMjE5NDY1MlowIwYJKoZIhvcNAQkEMRYEFAY9lXOyVsnoozqFErMCZCb4zJ5aMIGfBgkrBgEE
AYI3EAQxgZEwgY4wfDELMAkGA1UEBhMCREUxHDAaBgNVBAoTE1RDIFRydXN0Q2VudGVyIEdtYkgx
JTAjBgNVBAsTHFRDIFRydXN0Q2VudGVyIENsYXNzIDIgTDEgQ0ExKDAmBgNVBAMTH1RDIFRydXN0
Q2VudGVyIENsYXNzIDIgTDEgQ0EgWEkCDkhgAAEAAuKjJahZrkwrMIGhBgsqhkiG9w0BCRACCzGB
kaCBjjB8MQswCQYDVQQGEwJERTEcMBoGA1UEChMTVEMgVHJ1c3RDZW50ZXIgR21iSDElMCMGA1UE
CxMcVEMgVHJ1c3RDZW50ZXIgQ2xhc3MgMiBMMSBDQTEoMCYGA1UEAxMfVEMgVHJ1c3RDZW50ZXIg
Q2xhc3MgMiBMMSBDQSBYSQIOSGAAAQAC4qMlqFmuTCswgbcGCSqGSIb3DQEJDzGBqTCBpjALBglg
hkgBZQMEASowCwYJYIZIAWUDBAEWMAoGCCqGSIb3DQMHMAsGCWCGSAFlAwQBAjAOBggqhkiG9w0D
AgICAIAwBwYFKw4DAgcwDQYIKoZIhvcNAwICAUAwDQYIKoZIhvcNAwICASgwBwYFKw4DAhowCwYJ
YIZIAWUDBAIDMAsGCWCGSAFlAwQCAjALBglghkgBZQMEAgEwCgYIKoZIhvcNAgUwDQYJKoZIhvcN
AQEBBQAEggEAhaEGR5L8+jHLkOZJgXM6ZB9CNYR9HnpKgrEvLm4bS5+cAGJ1wOtBSWgnMsz8K+sh
53WDfRRc/s46xr44+ji0HJqeHjbT0AlNdtLVLq08V/tOenfG0SSLSn6BG5tdqF5OmU50qyM5LC8W
tTg8rGCqKJt+30gdN7amXX8+VgyXZk0llob/428GN+pEMbOesvtPlqXKgkn00pm4/7LZ/Nlz22Y1
amJ9bsO7wqI0Vt0RQARNnYbQfx+h0Ki33NOinFYT/c+s+y2Lfe7/XIe/cuuV1hWzAm5KZ61NK01n
DJ265Yy7BhSw1dd9bON2b3UHktQ92sNKFv7A2FjdmqwXi+mUjwAAAAAAAA==

------=_NextPart_000_0084_01CC30F3.9B380DF0--

From java-user-return-50147-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun 22 19:54:27 2011
Return-Path: <java-user-return-50147-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 379C7692C
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 22 Jun 2011 19:54:27 +0000 (UTC)
Received: (qmail 71392 invoked by uid 500); 22 Jun 2011 19:54:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71290 invoked by uid 500); 22 Jun 2011 19:54:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 8574 invoked by uid 99); 22 Jun 2011 19:11:48 -0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED
X-Spam-Check-By: apache.org
Received-SPF: unknown amxa:www.healthline.coma:mail.healthline.coma:mail.hl.locala:64-142-35-98.customer.sonic.neta:sfc-admin1.healthline.commx:mail.healthline.cominclude:sonic.netgoogle-site-verification=woajk2ajkumsxth8c9cy5eeslo2f_mbubuk7ywagj64~all (athena.apache.org: encountered unrecognized mechanism during SPF processing of domain of SPal@healthline.com)
Subject: Suggestion: make some more TokenFilters KeywordAttribute aware
From: Sujit Pal <spal@healthline.com>
Reply-To: spal@healthline.com
To: java-user <java-user@lucene.apache.org>
Content-Type: text/plain
Organization: Healthline Networks Inc.
Date: Wed, 22 Jun 2011 11:53:23 -0700
Message-ID: <1308768803.2713.39.camel@lysdexic.healthline.com>
MIME-Version: 1.0
X-Mailer: Evolution 2.12.3 (2.12.3-8.el5_2.3) 
Content-Transfer-Encoding: 7bit

Hello,

I am currently in need of a LowerCaseFilter and StopFilter that will
recognize KeywordAttribute, similar to the way PorterStemFilter
currently does (on trunk). Specifically, in case the term is a
KeywordAttribute.isKeyword(), it should not lowercase and remove
respectively.

This can be achieved without breaking backward compatibility by
introducing an extra constructor which takes a boolean ignoreKeyword
parameter.

If this sounds like this would be a good idea, please let me know, I can
open a JIRA and attach a patch. Currently, I have created my own
versions of KeywordAwareXXX filters that does pretty much the same
thing.

Thanks
Sujit



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50148-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun 22 21:15:40 2011
Return-Path: <java-user-return-50148-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9EC98699A
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 22 Jun 2011 21:15:40 +0000 (UTC)
Received: (qmail 78325 invoked by uid 500); 22 Jun 2011 21:15:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78238 invoked by uid 500); 22 Jun 2011 21:15:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78229 invoked by uid 99); 22 Jun 2011 21:15:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2011 21:15:38 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of timeck@gmail.com designates 209.85.210.48 as permitted sender)
Received: from [209.85.210.48] (HELO mail-pz0-f48.google.com) (209.85.210.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2011 21:15:28 +0000
Received: by pzk10 with SMTP id 10so1059988pzk.35
        for <java-user@lucene.apache.org>; Wed, 22 Jun 2011 14:15:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:from:to:subject:date:message-id:mime-version
         :content-type:x-mailer:thread-index:content-language;
        bh=2hb0EWV4Ak5Fu4sGZmAGVp2C8wmgVzQdOqQT8zbOmZs=;
        b=nOAcWHA1kHSQgoYeHWdrcuwKYdNUcJ9+9Qse6hEgdF7S9FIAdX59scqVYg/zacGXlN
         PhrtgX+CPeKOtgrvfkuGSjNZKGuVTW7kDT9YyygnbUNPsjfjuOS+/pfk0ksXUukJ7zEA
         4osARe0opq8fMgnHrEtsRcAqW7WIMBJyhqnGQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:subject:date:message-id:mime-version:content-type:x-mailer
         :thread-index:content-language;
        b=i54aBVBm7BqpAvfj5rqkUq2ARFMsDWkEyFJUPy5M3xMIPtX8xZuGXqTrRa6WAlDu/s
         qYyIov2arX+UNPq9Z0WNeqInNn/VpVae65JvSJxaa+O/1k50df2YkJQ7aXKENjDULF8r
         anS+JoXAM+EeQllHiPP0B4lIAyZSJTVkCBszs=
Received: by 10.68.64.69 with SMTP id m5mr669843pbs.383.1308777305962;
        Wed, 22 Jun 2011 14:15:05 -0700 (PDT)
Received: from kermit ([12.116.106.202])
        by mx.google.com with ESMTPS id k4sm689064pbl.91.2011.06.22.14.15.04
        (version=TLSv1/SSLv3 cipher=OTHER);
        Wed, 22 Jun 2011 14:15:05 -0700 (PDT)
From: "Tim Eck" <timeck@gmail.com>
To: <java-user@lucene.apache.org>
Subject: field sorted searches with unbounded hit count
Date: Wed, 22 Jun 2011 14:14:57 -0700
Message-ID: <02ce01cc3121$7129ac20$537d0460$@com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_02CF_01CC30E6.C4CAD420"
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcwxIXAqfxsYrij/Q/ircW1LJy2KGQ==
Content-Language: en-us
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_02CF_01CC30E6.C4CAD420
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

For the searches I want to run on my index I want to return all matching
documents (as opposed to N top hits).

=20

My first na=EFve approach was just to use Searcher.search(query, filter,
Integer.MAX_VALUE, sort) =96 that is, pass Integer.MAX_VALUE for the =
number of
possible docs to return. That unfortunately seems to have huge heap
requirements in org.apache.lucene.util.PriorityQueue.heap as the max =
docID
in my index gets large. Multiply that per search heap requirement by a
handful of concurrent threads and I OOME my server.

=20

When I don=92t need to do any sorting it pretty easy to just use my own
collector to gather the doc ids.  Of course depending on the number of =
hits
I might still need a good amount of heap but at least it a factor of the
number of matches (not the index size).=20

=20

I=92m struggling to figure out how to do the same search but with =
sorting.
I=92m looking for a method like Searcher.search(Query, Filter, Sort,
Collector), but perhaps that isn=92t a reasonable thing to have, please
enlighten me if so :-)

=20

I=92m using 3.0.3 lucene-core at the moment but I don=92t see that this =
aspect
is any different in 3.2.0.=20

=20

Hopefully this made sense, any help you can provide is appreciated.

=20

=20

=20

=20

=20


------=_NextPart_000_02CF_01CC30E6.C4CAD420--


From java-user-return-50149-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun 22 22:26:59 2011
Return-Path: <java-user-return-50149-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BE14264FF
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 22 Jun 2011 22:26:59 +0000 (UTC)
Received: (qmail 3293 invoked by uid 500); 22 Jun 2011 22:26:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3197 invoked by uid 500); 22 Jun 2011 22:26:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3188 invoked by uid 99); 22 Jun 2011 22:26:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2011 22:26:57 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [188.121.53.1] (HELO n1plout04-01.prod.ams1.secureserver.net) (188.121.53.1)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 22 Jun 2011 22:26:47 +0000
Received: (qmail 26101 invoked from network); 22 Jun 2011 22:26:25 -0000
Received: from unknown (109.67.14.206)
  by n1plout04-01.prod.ams1.secureserver.net (188.121.53.1) with ESMTP; 22 Jun 2011 22:26:25 -0000
Message-ID: <4E026C03.2050907@code972.com>
Date: Thu, 23 Jun 2011 01:26:11 +0300
From: Itamar Syn-Hershko <itamar@code972.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.18) Gecko/20110616 Lightning/1.0b2 Thunderbird/3.1.11
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: highlighting performance
References: <4DFFAB75.1040306@ifactory.com> <4DFFE413.4010109@r.email.ne.jp> <4E0007FA.1000201@ifactory.com> <4E013BC4.2000504@ifactory.com> <4E015383.7010107@ifactory.com>
In-Reply-To: <4E015383.7010107@ifactory.com>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

I'm not intimately familiar with FVH myself, but that sounds reasonable. 
Tests usually don't lie. I'd definitely like to see a patched version 
that avoids that!

Itamar.

On 22/06/2011 05:29, Michael Sokolov wrote:
> OK - it seems as if there is a blow-up in FieldPhraseList if a 
> document has a large number of occurrences of a term that is in the 
> query.  In one example, I searched for "1", and this occurs just under 
> 2000 times in one of my test documents (as the value of HTML 
> attributes).  Admittedly a weird case, but when this happens, the 
> highlighting can take 300x longer than when searching for a more 
> distinctive term (like "distinctive").
>
> I think there may be a problem here in that every term occurrence is 
> compared against every other term occurrence (or every "phrase" within 
> which the term may occur - I think?) so there is an n^2 growth factor 
> in the number of occurrences of a term in a document.  Does that seem 
> possible?
>
> -Mike
>
> On 6/21/2011 8:48 PM, Michael Sokolov wrote:
>> I did that, and the benchmark indicates FVH is 10x faster than 
>> Highlighter now.  I ran with a subset of the wikipedia data since I 
>> didn't want to deal with the whole thing.  I'm trying to reconcile 
>> these weirdly varying results.  One difference is that the benchmark 
>> doesn't use PhraseQueries - I added those and it did make FVH 
>> slightly slower, but not all that much.  I'll keep digging.
>>
>> -Mike
>>
>> On 6/20/2011 10:54 PM, Michael Sokolov wrote:
>>> Koji- I'm not familiar with the benchmarking system, but maybe I'll 
>>> see if I can run that benchmark on my test data as a point of 
>>> comparison - thanks for the pointer!
>>>
>>> -Mike
>>>
>>> On 6/20/2011 8:21 PM, Koji Sekiguchi wrote:
>>>> Mike,
>>>>
>>>> FVH used to be faster for large docs. I wrote FVH section for 
>>>> Lucene in Action and it said:
>>>>
>>>> In contrib/benchmark (covered in appendix C), theres an algorithm
>>>> file called highlight-vs-vector-highlight.alg that lets you see the 
>>>> difference
>>>> between two highlighters in processing time. As of version 2.9, 
>>>> with modern hardware,
>>>> that algorithm shows that FastVectorHighlighter is about two and a 
>>>> half times faster
>>>> than Highlighter.
>>>>
>>>> The number was for Lucene 2.9 age and Wikipedia data, maybe 
>>>> different today.
>>>>
>>>> Anyway, thank you for sharing interesting result!
>>>>
>>>> koji
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50150-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun 23 05:40:17 2011
Return-Path: <java-user-return-50150-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C4A864968
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 23 Jun 2011 05:40:17 +0000 (UTC)
Received: (qmail 4151 invoked by uid 500); 23 Jun 2011 05:40:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3614 invoked by uid 500); 23 Jun 2011 05:40:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3594 invoked by uid 99); 23 Jun 2011 05:40:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2011 05:40:01 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of npellow@atlassian.com designates 74.125.149.197 as permitted sender)
Received: from [74.125.149.197] (HELO na3sys009aog107.obsmtp.com) (74.125.149.197)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 23 Jun 2011 05:39:51 +0000
Received: from mail-iy0-f173.google.com ([209.85.210.173]) (using TLSv1) by na3sys009aob107.postini.com ([74.125.148.12]) with SMTP
	ID DSNKTgLRkqmBbuvEnExfj/p6CQFCj+WKWt4E@postini.com; Wed, 22 Jun 2011 22:39:31 PDT
Received: by mail-iy0-f173.google.com with SMTP id 3so1646329iyb.32
        for <java-user@lucene.apache.org>; Wed, 22 Jun 2011 22:39:30 -0700 (PDT)
Received: by 10.231.41.76 with SMTP id n12mr1381929ibe.129.1308807570713;
        Wed, 22 Jun 2011 22:39:30 -0700 (PDT)
Received: from astra.sydney.atlassian.com (eth59-167-133-99.static.internode.on.net [59.167.133.99])
        by mx.google.com with ESMTPS id x13sm722116ibh.50.2011.06.22.22.39.28
        (version=TLSv1/SSLv3 cipher=OTHER);
        Wed, 22 Jun 2011 22:39:29 -0700 (PDT)
From: Nick Pellow <npellow@atlassian.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable
Subject: NumericField with many, many values
Date: Thu, 23 Jun 2011 15:39:25 +1000
Message-Id: <04D08212-EF2A-469B-88CB-EACC6A31F8B7@atlassian.com>
To: java-user@lucene.apache.org
Mime-Version: 1.0 (Apple Message framework v1084)
X-Mailer: Apple Mail (2.1084)

Hi,=20

I have a use-case where a single Document in Lucene contains a single =
NumericField that could potentially have a 100s of 1000s of values.

Values are being added to a document instance like so:

        List<Fieldable> fields =3D .... // get fields, possibly 100s of =
1000s with the same name, but a different value
        for (Fieldable field : fields) {
            doc.add(field);
        }

Internally, doc adds the field to an ArrayList of Fieldables: =
List<Fieldable> .

This means there is quite a significant memory overhead for very large =
amounts of fields.

Has anyone toyed with the idea of storing the fields in Document in a =
map, keyed off Field with the map-values being a list of values?
Or a new MultiValueField type, which contains an array of field values, =
rather than a single value per Field ?

Are there any other known solutions or work-arounds for this problem ?

Cheers,
Nick=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50151-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun 23 06:16:12 2011
Return-Path: <java-user-return-50151-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 484FE4600
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 23 Jun 2011 06:16:12 +0000 (UTC)
Received: (qmail 40843 invoked by uid 500); 23 Jun 2011 06:16:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40228 invoked by uid 500); 23 Jun 2011 06:16:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 92237 invoked by uid 99); 23 Jun 2011 00:26:10 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jason.guild@alaska.gov designates 146.63.92.66 as permitted sender)
Date: Wed, 22 Jun 2011 16:25:40 -0800
From: Jason Guild <jason.guild@alaska.gov>
Subject: how to approach phrase queries and term grouping
To: general@lucene.apache.org
Cc: java-user@lucene.apache.org
Message-id: <4E028804.7050302@alaska.gov>
MIME-version: 1.0
Content-type: multipart/mixed; boundary=------------060906010809050407050508
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.17)
 Gecko/20110414 Thunderbird/3.1.10
X-OriginalArrivalTime: 23 Jun 2011 00:25:40.0198 (UTC)
 FILETIME=[14B31060:01CC313C]
X-Virus-Checked: Checked by ClamAV on apache.org

--------------060906010809050407050508
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Hi All:

I am new to Lucene and my project is to provide specialized search for a 
set
of booklets. I am using Lucene Java 3.1.

The basic idea is to run queries to find out what booklet and page 
numbers are
match in order to help people know where to look for information in the 
(rather
large and dry) booklets. Therefore each Document in my index represents a
particular page in one of the booklets.

So far I have been able to successfully scrape the raw text from the 
booklets,
insert it into an index, and query it just fine using StandardAnalyzer 
on both
ends.

So here's my general question:
Many queries on the index will involve searching for place names 
mentioned in the
booklets. Some place names use notational variants. For instance, in the 
body text
it will be called "Ship Creek" but in a diagram it might be listed as 
"Ship Cr." or
elsewhere as "Ship Ck.".

If I search for (Ship AND (Cr Ck Creek)) this does not give me what I 
want because
other words may appear between [ship] and [cr]/[ck]/[creek] leading to 
false positives.

What I need to know is how to approach treating the two consecutive 
words as a single
term and add the notational variants as synonyms. So, in a nutshell I 
need the basic
stuff provided by StandardAnalyzer, but with term grouping to emit place 
names
as complete terms and insert synonymous terms to cover the variants.

For instance, the text "...allowed from the mouth of Ship Creek upstream 
to ..." would
result in tokens [allowed],[mouth],[ship creek],[upstream]. Perhaps via 
a TokenFilter along
the way, the [ship creek] term would expand into [ship creek][ship 
ck][ship cr].

As a bonus it would be nice to treat the trickier text "..except in 
Ship, Bird, and
Campbell creeks where the limit is..." as [except],[ship creek],[bird 
creek],
[campbell creek],[where],[limit].

Should the detection and merging be done in a TokenFilter?
Some of the term grouping can probably be done heuristically [*],[creek] 
is [* creek]
but I also have an exhaustive list of places mentioned in the text if 
that helps.

Thanks for any help you can provide.
Jason



--------------060906010809050407050508
Content-Type: text/plain; charset=us-ascii


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--------------060906010809050407050508--

From java-user-return-50152-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun 23 06:17:03 2011
Return-Path: <java-user-return-50152-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id EB978499B
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 23 Jun 2011 06:17:02 +0000 (UTC)
Received: (qmail 43756 invoked by uid 500); 23 Jun 2011 06:17:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43601 invoked by uid 500); 23 Jun 2011 06:16:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 73434 invoked by uid 99); 22 Jun 2011 21:13:50 -0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of teck@terracottatech.com designates 64.95.112.230 as permitted sender)
X-Virus-Scanned: amavisd-new at mail01.terracottatech.com
From: "Tim Eck" <teck@terracottatech.com>
To: <java-user@lucene.apache.org>
Subject: field sorted searches with unbounded hit count
Date: Wed, 22 Jun 2011 14:13:13 -0700 (PDT)
Message-ID: <02c401cc3121$2ea3cbb0$8beb6310$@com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_02C5_01CC30E6.8244F3B0"
X-Mailer: Microsoft Office Outlook 12.0
X-Mailer: Zimbra 5.0.19_GA_3083.RHEL5 (ZimbraConnectorForOutlook/5.0.3141.19)
Thread-Index: AcwxIS5i+5NHq8K8QhOJnu5p/P4Uhg==
Content-Language: en-us
X-Originating-IP: [12.116.106.202]
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_02C5_01CC30E6.8244F3B0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 8bit

For the searches I want to run on my index I want to return all matching
documents (as opposed to N top hits).



My first nave approach was just to use Searcher.search(query, filter,
Integer.MAX_VALUE, sort)  that is, pass Integer.MAX_VALUE for the number
of possible docs to return. That unfortunately seems to have huge heap
requirements in org.apache.lucene.util.PriorityQueue.heap as the max docID
in my index gets large. Multiply that per search heap requirement by a
handful of concurrent threads and I OOME my server.



When I dont need to do any sorting it pretty easy to just use my own
collector to gather the doc ids.  Of course depending on the number of
hits I might still need a good amount of heap but at least it a factor of
the number of matches (not the index size).



Im struggling to figure out how to do the same search but with sorting.
Im looking for a method like Searcher.search(Query, Filter, Sort,
Collector), but perhaps that isnt a reasonable thing to have, please
enlighten me if so :-)



Im using 3.0.3 lucene-core at the moment but I dont see that this aspect
is any different in 3.2.0.



Hopefully this made sense, any help you can provide is appreciated.










------=_NextPart_000_02C5_01CC30E6.8244F3B0--

From java-user-return-50153-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun 23 06:22:41 2011
Return-Path: <java-user-return-50153-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2924D49CA
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 23 Jun 2011 06:22:41 +0000 (UTC)
Received: (qmail 50522 invoked by uid 500); 23 Jun 2011 06:22:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49850 invoked by uid 500); 23 Jun 2011 06:22:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49832 invoked by uid 99); 23 Jun 2011 06:22:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2011 06:22:21 +0000
X-ASF-Spam-Status: No, hits=2.1 required=5.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLYTO,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@googlemail.com designates 74.125.83.48 as permitted sender)
Received: from [74.125.83.48] (HELO mail-gw0-f48.google.com) (74.125.83.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2011 06:22:16 +0000
Received: by gwj22 with SMTP id 22so940286gwj.35
        for <java-user@lucene.apache.org>; Wed, 22 Jun 2011 23:21:55 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:reply-to:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=hGGOlex2mWGDCQtUV2ZTRispMab7w44y1ApcXMCo/uc=;
        b=X8zNaB8FgkDgIsp2b1Ctl94N+rr49waqx5szPf5uh/lJ2AJk1/JE85gNmtO883WxhQ
         hNVssNU151B/xEtT7uxQK3Btr+DwdYuPiozG1rUTpPcW+lXvn3hkeRfY1IH4DVF+MsXa
         STYZb/Wuc5l5F+3frrCQtmQv/7gg5gi+ymGPA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type;
        b=G2E6/4tj7Po5AhMhHY44cIIl/hlZXIG8qzedGAS/wWDnRNJga5ExGOhf+W4Zm9xhbk
         fla9PEvbNqRPc5tbPG4sJgTK9YydTwZ3232vTHSUcimVPDMPNuh2ImenJfYepU/Ko1Pe
         f4UXP/RYKEPsR776N7b2SD0ImUtdSrbOviwJE=
MIME-Version: 1.0
Received: by 10.146.89.3 with SMTP id m3mr100139yab.31.1308810115662; Wed, 22
 Jun 2011 23:21:55 -0700 (PDT)
Received: by 10.147.38.2 with HTTP; Wed, 22 Jun 2011 23:21:55 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <1308768803.2713.39.camel@lysdexic.healthline.com>
References: <1308768803.2713.39.camel@lysdexic.healthline.com>
Date: Thu, 23 Jun 2011 08:21:55 +0200
Message-ID: <BANLkTin9M6TMt3S0cwFHyosuLXfe+BLiqg@mail.gmail.com>
Subject: Re: Suggestion: make some more TokenFilters KeywordAttribute aware
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org, spal@healthline.com
Content-Type: text/plain; charset=UTF-8

On Wed, Jun 22, 2011 at 8:53 PM, Sujit Pal <spal@healthline.com> wrote:
> Hello,
>
> I am currently in need of a LowerCaseFilter and StopFilter that will
> recognize KeywordAttribute, similar to the way PorterStemFilter
> currently does (on trunk). Specifically, in case the term is a
> KeywordAttribute.isKeyword(), it should not lowercase and remove
> respectively.
>
> This can be achieved without breaking backward compatibility by
> introducing an extra constructor which takes a boolean ignoreKeyword
> parameter.
>
> If this sounds like this would be a good idea, please let me know, I can
> open a JIRA and attach a patch. Currently, I have created my own
> versions of KeywordAwareXXX filters that does pretty much the same
> thing.

I think you should open an issue and take it from there. I can't
promise this is going to be added but its worth to try!

please go ahead and open an issue.

simon
>
> Thanks
> Sujit
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50154-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun 23 06:30:43 2011
Return-Path: <java-user-return-50154-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B02A94DF7
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 23 Jun 2011 06:30:43 +0000 (UTC)
Received: (qmail 54582 invoked by uid 500); 23 Jun 2011 06:30:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53551 invoked by uid 500); 23 Jun 2011 06:30:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53529 invoked by uid 99); 23 Jun 2011 06:30:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2011 06:30:18 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.160.176 as permitted sender)
Received: from [209.85.160.176] (HELO mail-gy0-f176.google.com) (209.85.160.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2011 06:30:11 +0000
Received: by gyb11 with SMTP id 11so938873gyb.35
        for <java-user@lucene.apache.org>; Wed, 22 Jun 2011 23:29:50 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:reply-to:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=oOCB1e1jlq/S02HMNaeM+4xlZ18gdq/rp6iH8rhGt1c=;
        b=sLK9TNkT+7HMdfcF9c/y5tgBPV1Mgh57akMEzyhX9b+7AIe82Nve3S9yKZDSdaUQoE
         UzAqPs1U7JowW3xYr9fvvTHSQvfzwA0/PEV2FTmbO08TJw8cqtcRrx6yEvyKJu6cOZMm
         s6MdEHAXEORDHXSqMTUwhzRLxTTlRDbkeXwu8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type;
        b=MI/5gNm+SeqKVPCNWgdifkYKxqFXJVS1nsBvHozU7rCOKVSeH+JAMROuC1uYLHdNe/
         mFWK5ImNsNRQM25Sp/nrYwFMltUr+oGgS3tEngcEllXdZqvFrBHiBThEVpsgHlHkhMHg
         SDoi4TbpjYyFwR3r53z8Go0BFoQn5fZru5a/o=
MIME-Version: 1.0
Received: by 10.236.177.72 with SMTP id c48mr2599560yhm.166.1308810590543;
 Wed, 22 Jun 2011 23:29:50 -0700 (PDT)
Received: by 10.147.38.2 with HTTP; Wed, 22 Jun 2011 23:29:50 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <1DA142C0B842D742B61E20305D79FABF1315BB818E@TRPEX01>
References: <BANLkTim4YKpjpFuOoWN8r4m_StWfVc-gVg@mail.gmail.com>
	<1DA142C0B842D742B61E20305D79FABF1315BB8144@TRPEX01>
	<1DA142C0B842D742B61E20305D79FABF1315BB818E@TRPEX01>
Date: Thu, 23 Jun 2011 08:29:50 +0200
Message-ID: <BANLkTimpi2N5Hcub2L+-8GfM7AyjPKNu0Q@mail.gmail.com>
Subject: Re: questions about searching lucene 3.2
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

As far as I understand you have 2 different problems.

1. search and 2.4 index with 3.2 code using standard analyzer.
in this case you should either reindex or pass Version.LUCENE_24 to
the StandardAnalyzer ctor that should help here.

2. search a string with parentheses with the query parser
you should escape you query string with QueryParser#escape before searching.

maybe I am misssing something, let me know if thats the case.

simon

On Wed, Jun 22, 2011 at 9:46 PM, Bob Rhodes <Bob.Rhodes@trssllc.com> wrote:
> Here is a follow-up. This is a larger example of some of the text I'm
> searching in my index:
> The quoted name/value pairs are in the index.
> "
> middleName="D", zip="1111", lastName="ADAMSON", street="00 SOME ST",
> addAssociates="true", state="CA", city="ROCHESTER", source="SOMESOURCE",
> person_user="TESTUSER", dob="19510210", firstName="CHARLES"
> "
>
> If I use my app or Luke to search for ADAMSON I get matches when searching
> the field above that contains the example text. I get the same results if I
> search by the dob value 19510210 works great.
> The field content is variable and when the field above only contains
> phoneNumber="(904) 555-1212" there is no way for me to find this exact
> number.
>
> If I use the ClassicAnalyzer this I can use this to find my number by just
> searching "(904) 501-0560" for the number.
>
> I think this more clearly states my issue. Is the problem related to the
> parens? I've tried escaping and double escaping them to no avail. Anyone
> have any suggestions?
>
> In my code I've used the standard query parser as well as the
> ComplexPhraseQueryParser.
>
> One other point to note. The indexes I'm searching were created with 2.1.4
> using the StandardAnalyzer but I'm using 3.2.0 to search.
>
> Bob
>
>
> -----Original Message-----
> From: Bob Rhodes [mailto:Bob.Rhodes@trssllc.com]
> Sent: Wednesday, June 22, 2011 11:56 AM
> To: java-user@lucene.apache.org
> Subject: questions about searching lucene 3.2
>
> Hi all,
> I have some questions about searching 3.2. I have just upgraded from 2.4.1
> to 3.2. I am using the standard analyzer to create the index and to search,
> and one of the fields is called "querytext" and it has content like this
> among other things: phoneNumber="(904) 555-1212". I've tried many different
> ways to query this using the query api and the query parser and I can't find
> the string above. It seems the analyzer tokenizes the number above as 904
> 555 1212. The numbers I am searching with are formatted as 9045551212 and I
> need to use that someone to find the number formatted as above. Thanks for
> the help!
>
>
> Bob
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50155-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun 23 06:39:27 2011
Return-Path: <java-user-return-50155-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 06DBF418E
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 23 Jun 2011 06:39:27 +0000 (UTC)
Received: (qmail 62185 invoked by uid 500); 23 Jun 2011 06:39:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61714 invoked by uid 500); 23 Jun 2011 06:39:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61704 invoked by uid 99); 23 Jun 2011 06:39:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2011 06:39:17 +0000
X-ASF-Spam-Status: No, hits=3.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of pranavgoyal40341@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2011 06:39:09 +0000
Received: by bwz8 with SMTP id 8so2322621bwz.35
        for <java-user@lucene.apache.org>; Wed, 22 Jun 2011 23:38:49 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=mXBQ6a9dGLrndSrFZ2jpK5o400a1MGQo61eK2nnv8KM=;
        b=wfZ6Ae3D6kzeC5Yistfai8W2OzX6M4AqA1J04lOLBAoZuK0FcDL+XHllHb/kGMaGXo
         Rszv/TF0flwvMBE+I9NQ8W5VqknMmo8Qql/5m2VmnuhRayi3Rs885EKSwkBx9l7iErBU
         bjBDpPURtdv7JC+RxIybSkI29dGOugEh3/55g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=IxVfR+Pz8B8rtOPgpHhokk4CRtXLYIij1HGaz7UlDbDJKK1u8Q90fq1NBMtaK14jWr
         fJZdpEdiC4Bcq+Q42rCH75HJ3SM+7tBhhuN+iq0g+oO5wgvFjEydaXxC12mmlEnBOO+5
         z3qg1YAKuTDkmqKbUSYy5Ojis37tSoxLx6OFc=
Received: by 10.204.114.144 with SMTP id e16mr514909bkq.119.1308811129045;
 Wed, 22 Jun 2011 23:38:49 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.51.83 with HTTP; Wed, 22 Jun 2011 23:37:25 -0700 (PDT)
In-Reply-To: <BANLkTimG+mmGjhphCMWcPcNhwRLghRpSqg@mail.gmail.com>
References: <BANLkTi=E9ZiruqKe219iaXk+urs9PNktBw@mail.gmail.com>
 <BANLkTimSkVP06rf3UmcRVmA=RzPWDP-2uA@mail.gmail.com> <BANLkTimG+mmGjhphCMWcPcNhwRLghRpSqg@mail.gmail.com>
From: Pranav goyal <pranavgoyal40341@gmail.com>
Date: Thu, 23 Jun 2011 12:07:25 +0530
Message-ID: <BANLkTiko6KDGnKDCCkbRtG=8b_HPD1JQzw@mail.gmail.com>
Subject: Re: Lucene Searching
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016368e2ae86cc51c04a65b5676
X-Virus-Checked: Checked by ClamAV on apache.org

--0016368e2ae86cc51c04a65b5676
Content-Type: text/plain; charset=ISO-8859-1

I tried it and it worked, although it's having one peculiarity.

When I search for Item_1 : it gives me 110 hits but when I use *Item_1* it
gives me 0 hits. What mistake am I doing here?

Also when I search for *341* it is giving me correct results i.e
00000341-000-000-DR
but it's not working for above case.


Thanks
Pranav

On Wed, Jun 22, 2011 at 2:10 PM, Ian Lea <ian.lea@gmail.com> wrote:

> What does Luke show as being indexed for that field?  Other useful
> tips at
> http://wiki.apache.org/lucene-java/LuceneFAQ#Why_am_I_getting_no_hits_.2BAC8_incorrect_hits.3F
>
> If that field is numeric you could use a NumericField - gets rid of
> problems with leading zeros.
>
> If by "I just want to get everything which has 341 in it" you mean you
> want to match aaa341bbb and 0000341 and 341, see related thread on
> this list from yesterday.  Or
> org.apache.lucene.search.regex.RegexQuery.
>
>
>
> --
> Ian.
>
>
> On Wed, Jun 22, 2011 at 9:16 AM, Pranav goyal
> <pranavgoyal40341@gmail.com> wrote:
> > I can always use * , ?
> >
> > But here I am not talking of this. I just want to get everything which
> has
> > 341 in it. How to do it without * or ?
> >
> > On Wed, Jun 22, 2011 at 1:00 PM, Pranav goyal <
> pranavgoyal40341@gmail.com>wrote:
> >
> >> Hi all,
> >>
> >> I am in a fix regarding lucene search. I know a little bit about lucene
> and
> >> have successfully created index and searched a lot of queries on that.
> >> My main worry is that whenever I search for let say "000" it doesn't
> give
> >> me any result while if I seach for "00000341" it'll give me a hit. Even
> if I
> >> search for 341 it doesn't give me anything.
> >>
> >> I have checked through luke also and luke is also showing no results.
> >>
> >> Do I have to use some different analyzer? Currently I am using Keyword
> >> Analyzer.
> >>
> >> Thanks
> >> Pranav
> >>
> >
> >
> >
> > --
> > I'm very responsible, when ever something goes wrong they always say I'm
> > responsible --
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
I'm very responsible, when ever something goes wrong they always say I'm
responsible --

--0016368e2ae86cc51c04a65b5676--

From java-user-return-50156-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun 23 08:28:25 2011
Return-Path: <java-user-return-50156-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D79DD48FD
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 23 Jun 2011 08:28:25 +0000 (UTC)
Received: (qmail 90283 invoked by uid 500); 23 Jun 2011 08:28:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89478 invoked by uid 500); 23 Jun 2011 08:28:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88553 invoked by uid 99); 23 Jun 2011 08:28:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2011 08:28:12 +0000
X-ASF-Spam-Status: No, hits=2.0 required=5.0
	tests=FREEMAIL_FROM,RFC_ABUSE_POST,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 216.139.236.26 is neither permitted nor denied by domain of lichman@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2011 08:28:05 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <lichman@gmail.com>)
	id 1QZfGK-0005qy-DU
	for java-user@lucene.apache.org; Thu, 23 Jun 2011 01:27:44 -0700
Date: Thu, 23 Jun 2011 01:27:44 -0700 (PDT)
From: lichman <lichman@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1308817664406-3099032.post@n3.nabble.com>
In-Reply-To: <907646.6606.qm@web121716.mail.ne1.yahoo.com>
References: <740221930626904@mail.mainsequence.net> <168005801339660@mail.mainsequence.net> <1308655374681-3090213.post@n3.nabble.com> <907646.6606.qm@web121716.mail.ne1.yahoo.com>
Subject: Re: ComplexPhraseQueryParser with multiple fields
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Which patch are you referring to? The last one?
And sure... I'll do the voting thing.

--
View this message in context: http://lucene.472066.n3.nabble.com/ComplexPhraseQueryParser-with-multiple-fields-tp2879290p3099032.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50157-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun 23 08:51:57 2011
Return-Path: <java-user-return-50157-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2CC7D4C59
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 23 Jun 2011 08:51:57 +0000 (UTC)
Received: (qmail 29077 invoked by uid 500); 23 Jun 2011 08:51:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28732 invoked by uid 500); 23 Jun 2011 08:51:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28721 invoked by uid 99); 23 Jun 2011 08:51:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2011 08:51:49 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2011 08:51:41 +0000
Received: by iwi5 with SMTP id 5so2162898iwi.35
        for <java-user@lucene.apache.org>; Thu, 23 Jun 2011 01:51:20 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=Lf1v3A+7Bmg+c3Y2BTxoRq4DOzhfytd6cuTO8gfXXjo=;
        b=NjZv81F8j0q1tr7zPCWygO0LHcNQaK9qtbnJScP2DGl/G2Sit55p1AUIARe42ejJkv
         FtMCFMI3/HzgvpjVSywTSDIwLpavf7YDdiQfExBApJyl2jvkNYjX7y+1Idz+OL4A3STo
         3srB4cUCBlyQcmP6cjq7Z9g1+su59scJjy+OU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=ngQfPRlHgf1RJ4nSlJ3LHZvBbIDkt4zzyx9AjBcsUccYg+AMnJTC2CzYejBPLDpT6+
         JzdR2VVHSYSHNR2499Z7qm0McssmXWSivARliP4bS+tt1zgainK7JUPKogB9CgfPOuuq
         e14m4jS2NBZRPDoMAcYVnmwOqdw32bzqLn4Ro=
Received: by 10.231.113.141 with SMTP id a13mr1508063ibq.71.1308819080141;
 Thu, 23 Jun 2011 01:51:20 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.200.131 with HTTP; Thu, 23 Jun 2011 01:51:00 -0700 (PDT)
In-Reply-To: <BANLkTiko6KDGnKDCCkbRtG=8b_HPD1JQzw@mail.gmail.com>
References: <BANLkTi=E9ZiruqKe219iaXk+urs9PNktBw@mail.gmail.com>
 <BANLkTimSkVP06rf3UmcRVmA=RzPWDP-2uA@mail.gmail.com> <BANLkTimG+mmGjhphCMWcPcNhwRLghRpSqg@mail.gmail.com>
 <BANLkTiko6KDGnKDCCkbRtG=8b_HPD1JQzw@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Thu, 23 Jun 2011 09:51:00 +0100
Message-ID: <BANLkTimLoNC0OuD6YFR=Q5WuCW1cHX+7wg@mail.gmail.com>
Subject: Re: Lucene Searching
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

What exactly is "it"?  Show us what you are indexing, how, and how you
are building the query and we may be able to help.

Whenever I see a report of incorrect results on a Mixed Case field I
always suspect that the term is being lowercased on indexing and not
at searching, or vice versa.

--
Ian.


On Thu, Jun 23, 2011 at 7:37 AM, Pranav goyal
<pranavgoyal40341@gmail.com> wrote:
> I tried it and it worked, although it's having one peculiarity.
>
> When I search for Item_1 : it gives me 110 hits but when I use *Item_1* i=
t
> gives me 0 hits. What mistake am I doing here?
>
> Also when I search for *341* it is giving me correct results i.e
> 00000341-000-000-DR
> but it's not working for above case.
>
>
> Thanks
> Pranav
>
> On Wed, Jun 22, 2011 at 2:10 PM, Ian Lea <ian.lea@gmail.com> wrote:
>
>> What does Luke show as being indexed for that field? =A0Other useful
>> tips at
>> http://wiki.apache.org/lucene-java/LuceneFAQ#Why_am_I_getting_no_hits_.2=
BAC8_incorrect_hits.3F
>>
>> If that field is numeric you could use a NumericField - gets rid of
>> problems with leading zeros.
>>
>> If by "I just want to get everything which has 341 in it" you mean you
>> want to match aaa341bbb and 0000341 and 341, see related thread on
>> this list from yesterday. =A0Or
>> org.apache.lucene.search.regex.RegexQuery.
>>
>>
>>
>> --
>> Ian.
>>
>>
>> On Wed, Jun 22, 2011 at 9:16 AM, Pranav goyal
>> <pranavgoyal40341@gmail.com> wrote:
>> > I can always use * , ?
>> >
>> > But here I am not talking of this. I just want to get everything which
>> has
>> > 341 in it. How to do it without * or ?
>> >
>> > On Wed, Jun 22, 2011 at 1:00 PM, Pranav goyal <
>> pranavgoyal40341@gmail.com>wrote:
>> >
>> >> Hi all,
>> >>
>> >> I am in a fix regarding lucene search. I know a little bit about luce=
ne
>> and
>> >> have successfully created index and searched a lot of queries on that=
.
>> >> My main worry is that whenever I search for let say "000" it doesn't
>> give
>> >> me any result while if I seach for "00000341" it'll give me a hit. Ev=
en
>> if I
>> >> search for 341 it doesn't give me anything.
>> >>
>> >> I have checked through luke also and luke is also showing no results.
>> >>
>> >> Do I have to use some different analyzer? Currently I am using Keywor=
d
>> >> Analyzer.
>> >>
>> >> Thanks
>> >> Pranav
>> >>
>> >
>> >
>> >
>> > --
>> > I'm very responsible, when ever something goes wrong they always say I=
'm
>> > responsible --
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> --
> I'm very responsible, when ever something goes wrong they always say I'm
> responsible --
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50158-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun 23 09:09:49 2011
Return-Path: <java-user-return-50158-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9F18247C0
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 23 Jun 2011 09:09:49 +0000 (UTC)
Received: (qmail 50264 invoked by uid 500); 23 Jun 2011 09:09:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49564 invoked by uid 500); 23 Jun 2011 09:09:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49553 invoked by uid 99); 23 Jun 2011 09:09:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2011 09:09:42 +0000
X-ASF-Spam-Status: No, hits=3.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of pranavgoyal40341@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2011 09:09:35 +0000
Received: by bwz8 with SMTP id 8so2422104bwz.35
        for <java-user@lucene.apache.org>; Thu, 23 Jun 2011 02:09:15 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=eZvXR+X3Gwhb0O0guEaJ9ZicMCz41hGMB2v0Bfni5cc=;
        b=oghgoCqOgcIVdYy2X7pv7XBvy7xEHgcSI/pQpxQ715xaOMiT4p7HKerAIc5UK/HloF
         IIggDfskptNdPzB1Vkq2JoG665KFvwWXjXXhmzStP9FVeB9t7+4168pz9QRUeSr3w6At
         qzWKGrE1IirNU+dIhne/BgG/VxN2oOTDW2oco=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=Ghd95t0OlLdlQa3/x1WQzWgKf4Kts3EasdIrnd0eHIRgUWean9UC4/mD1Eq29zmT7E
         IL6lcnBDEbLScOCI+IkYSCtkJzjsJ7n2Jw1rcl/Yq/LpvzcTm0xjxkUcBIMzXMxk37bb
         +zGmOLIjSHvxIbMfVyANzC0/1k7O0W+EVrhsI=
Received: by 10.204.39.14 with SMTP id d14mr192276bke.200.1308820155244; Thu,
 23 Jun 2011 02:09:15 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.51.83 with HTTP; Thu, 23 Jun 2011 02:08:55 -0700 (PDT)
In-Reply-To: <BANLkTimLoNC0OuD6YFR=Q5WuCW1cHX+7wg@mail.gmail.com>
References: <BANLkTi=E9ZiruqKe219iaXk+urs9PNktBw@mail.gmail.com>
 <BANLkTimSkVP06rf3UmcRVmA=RzPWDP-2uA@mail.gmail.com> <BANLkTimG+mmGjhphCMWcPcNhwRLghRpSqg@mail.gmail.com>
 <BANLkTiko6KDGnKDCCkbRtG=8b_HPD1JQzw@mail.gmail.com> <BANLkTimLoNC0OuD6YFR=Q5WuCW1cHX+7wg@mail.gmail.com>
From: Pranav goyal <pranavgoyal40341@gmail.com>
Date: Thu, 23 Jun 2011 14:38:55 +0530
Message-ID: <BANLkTin7T33CL73cX=ammjxTNaj3CziyrQ@mail.gmail.com>
Subject: Re: Lucene Searching
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=bcaec55555346da2dd04a65d70af
X-Virus-Checked: Checked by ClamAV on apache.org

--bcaec55555346da2dd04a65d70af
Content-Type: text/plain; charset=ISO-8859-1

Here's the code which I am implementing (Indexing and Searching codes are in
different files)

Indexing Part :

        d=new Document();
        File indexDir = new File("index-dir");
        KeywordAnalyzer analyzer = new KeywordAnalyzer();


        IndexWriterConfig conf = new IndexWriterConfig(Version.LUCENE_31,
analyzer);
        try {
            writer = new IndexWriter(FSDirectory.open(indexDir),conf);
        } catch (IOException e1) {
            e1.printStackTrace();
        }
        String q1 = contract.getDocId();
        String q2 = contract.getDocName();
        String q3 = contract.getCustomer(ctx).getMemberName();

        Term term = new Term("DocId",contract.getDocId());
        writer.deleteDocuments(term);

        d.add(new
Field("DocId",q1,Field.Store.YES,Field.Index.NOT_ANALYZED));
        d.add(new Field("All",q2,Field.Store.NO,Field.Index.NOT_ANALYZED));
        d.add(new Field("Cust",q3,Field.Store.NO,Field.Index.NOT_ANALYZED));

        try {
            writer.addDocument(d);
            writer.close();
            endTime = System.currentTimeMillis();
            //System.out.println("Time taken to index the contract with
DocID "+q1 +" is -> " +(endTime-startTime));
        }

        catch (IOException e1) {
            e1.printStackTrace();
        }


Searching Code :

            File indexDir = new File("index-dir");
            KeywordAnalyzer analyzer = new KeywordAnalyzer();
            IndexSearcher searcher = null;

            searcher = new IndexSearcher(FSDirectory.open(indexDir));


            String[] fields = new String[] { "DocId","Item","Cust","All"};
            MultiFieldQueryParser parser = new
MultiFieldQueryParser(Version.LUCENE_31,fields,analyzer);
            parser.setAllowLeadingWildcard(true);

            String queryString = field.getValue().toString();
            TopDocs results = null;


                Query query1;
                query1 = parser.parse(queryString);
                results = searcher.search(query1,1000);


                System.out.println("total hits: " + results.totalHits);
                ScoreDoc[] hits = results.scoreDocs;
                Document doc = null;
                ArrayList docIds =  new ArrayList();
                for (ScoreDoc hit : hits)
                {
                        doc = searcher.doc(hit.doc);
                        System.out.println(doc.get("DocId"));

                        ((ArrayList) docIds).add(doc.get("DocId"));

                }
 // Function which you need not to understand
               IMnCriterion criterion =
contractQuery.createInCriterion(contractQuery.ATTR_P_DOC_ID, docIds);
               contractQuery.setCriterion(criterion);
               searcher.close();
        }

--bcaec55555346da2dd04a65d70af--

From java-user-return-50159-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun 23 09:32:35 2011
Return-Path: <java-user-return-50159-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C38D54425
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 23 Jun 2011 09:32:35 +0000 (UTC)
Received: (qmail 89285 invoked by uid 500); 23 Jun 2011 09:32:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89124 invoked by uid 500); 23 Jun 2011 09:32:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89116 invoked by uid 99); 23 Jun 2011 09:32:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2011 09:32:32 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2011 09:32:24 +0000
Received: by iwi5 with SMTP id 5so2194100iwi.35
        for <java-user@lucene.apache.org>; Thu, 23 Jun 2011 02:32:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=gJymweN8+foEU0aSApLNhwCneB0F5S84OrhaWNjCntc=;
        b=gCU0bwRVdWNFWtZl3nF2tvfeV3pZA09H2yTabTVKKLxKzo1RYqBu1RCN8D4OH79vBo
         x9H8BetXLgMt9ignvhwXawADrXXUaHPb10QkUrPK7isunk0GQgt8S/+VOl3gTkQHC+QA
         WLDr2rAJBc5n2461VkyGi93Rt6uFjSdt7hWUA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=lQSeK2Q1Q1M96HqouSadKO62/JbeWCRRAm12QXdSDS6FrGaJGWenlEgQusys3we5y0
         SlceF6OBuYtzUu2fj73wZUcOHhTH2p8mAAvLlVPH6KENotBLkKFkqnStd+feJPBylsAp
         W42Zpn1kRFM/2opHYDz88VfSRKTm8nY6+Ih14=
Received: by 10.231.113.141 with SMTP id a13mr1538995ibq.71.1308821523195;
 Thu, 23 Jun 2011 02:32:03 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.200.131 with HTTP; Thu, 23 Jun 2011 02:31:43 -0700 (PDT)
In-Reply-To: <BANLkTin7T33CL73cX=ammjxTNaj3CziyrQ@mail.gmail.com>
References: <BANLkTi=E9ZiruqKe219iaXk+urs9PNktBw@mail.gmail.com>
 <BANLkTimSkVP06rf3UmcRVmA=RzPWDP-2uA@mail.gmail.com> <BANLkTimG+mmGjhphCMWcPcNhwRLghRpSqg@mail.gmail.com>
 <BANLkTiko6KDGnKDCCkbRtG=8b_HPD1JQzw@mail.gmail.com> <BANLkTimLoNC0OuD6YFR=Q5WuCW1cHX+7wg@mail.gmail.com>
 <BANLkTin7T33CL73cX=ammjxTNaj3CziyrQ@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Thu, 23 Jun 2011 10:31:43 +0100
Message-ID: <BANLkTi=aqOxxmcii+oQFY-ihJNURdzPpbQ@mail.gmail.com>
Subject: Re: Lucene Searching
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Looks OK to me.  You are searching on Item without adding any docs
with that field, you could use writer.updateDocument() rather than
delete and add, but those are just quibbles and don't explain your
searching problem.

Having done most of the hard work, why don't you adapt the code you
posted into a simple standalone program or test case that demonstrates
the problem.  As simple as possible, no external dependencies, clearly
showing what you are indexing and what you are searching on, with one
search that works and one that doesn't.

One warning: using MultiFieldQueryParser with leading wildcards is
pretty much guaranteed to be slow on a large index.


--
Ian.


On Thu, Jun 23, 2011 at 10:08 AM, Pranav goyal
<pranavgoyal40341@gmail.com> wrote:
> Here's the code which I am implementing (Indexing and Searching codes are=
 in
> different files)
>
> Indexing Part :
>
> =A0 =A0 =A0 =A0d=3Dnew Document();
> =A0 =A0 =A0 =A0File indexDir =3D new File("index-dir");
> =A0 =A0 =A0 =A0KeywordAnalyzer analyzer =3D new KeywordAnalyzer();
>
>
> =A0 =A0 =A0 =A0IndexWriterConfig conf =3D new IndexWriterConfig(Version.L=
UCENE_31,
> analyzer);
> =A0 =A0 =A0 =A0try {
> =A0 =A0 =A0 =A0 =A0 =A0writer =3D new IndexWriter(FSDirectory.open(indexD=
ir),conf);
> =A0 =A0 =A0 =A0} catch (IOException e1) {
> =A0 =A0 =A0 =A0 =A0 =A0e1.printStackTrace();
> =A0 =A0 =A0 =A0}
> =A0 =A0 =A0 =A0String q1 =3D contract.getDocId();
> =A0 =A0 =A0 =A0String q2 =3D contract.getDocName();
> =A0 =A0 =A0 =A0String q3 =3D contract.getCustomer(ctx).getMemberName();
>
> =A0 =A0 =A0 =A0Term term =3D new Term("DocId",contract.getDocId());
> =A0 =A0 =A0 =A0writer.deleteDocuments(term);
>
> =A0 =A0 =A0 =A0d.add(new
> Field("DocId",q1,Field.Store.YES,Field.Index.NOT_ANALYZED));
> =A0 =A0 =A0 =A0d.add(new Field("All",q2,Field.Store.NO,Field.Index.NOT_AN=
ALYZED));
> =A0 =A0 =A0 =A0d.add(new Field("Cust",q3,Field.Store.NO,Field.Index.NOT_A=
NALYZED));
>
> =A0 =A0 =A0 =A0try {
> =A0 =A0 =A0 =A0 =A0 =A0writer.addDocument(d);
> =A0 =A0 =A0 =A0 =A0 =A0writer.close();
> =A0 =A0 =A0 =A0 =A0 =A0endTime =3D System.currentTimeMillis();
> =A0 =A0 =A0 =A0 =A0 =A0//System.out.println("Time taken to index the cont=
ract with
> DocID "+q1 +" is -> " +(endTime-startTime));
> =A0 =A0 =A0 =A0}
>
> =A0 =A0 =A0 =A0catch (IOException e1) {
> =A0 =A0 =A0 =A0 =A0 =A0e1.printStackTrace();
> =A0 =A0 =A0 =A0}
>
>
> Searching Code :
>
> =A0 =A0 =A0 =A0 =A0 =A0File indexDir =3D new File("index-dir");
> =A0 =A0 =A0 =A0 =A0 =A0KeywordAnalyzer analyzer =3D new KeywordAnalyzer()=
;
> =A0 =A0 =A0 =A0 =A0 =A0IndexSearcher searcher =3D null;
>
> =A0 =A0 =A0 =A0 =A0 =A0searcher =3D new IndexSearcher(FSDirectory.open(in=
dexDir));
>
>
> =A0 =A0 =A0 =A0 =A0 =A0String[] fields =3D new String[] { "DocId","Item",=
"Cust","All"};
> =A0 =A0 =A0 =A0 =A0 =A0MultiFieldQueryParser parser =3D new
> MultiFieldQueryParser(Version.LUCENE_31,fields,analyzer);
> =A0 =A0 =A0 =A0 =A0 =A0parser.setAllowLeadingWildcard(true);
>
> =A0 =A0 =A0 =A0 =A0 =A0String queryString =3D field.getValue().toString()=
;
> =A0 =A0 =A0 =A0 =A0 =A0TopDocs results =3D null;
>
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0Query query1;
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0query1 =3D parser.parse(queryString);
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0results =3D searcher.search(query1,1000);
>
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0System.out.println("total hits: " + result=
s.totalHits);
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0ScoreDoc[] hits =3D results.scoreDocs;
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0Document doc =3D null;
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0ArrayList docIds =3D =A0new ArrayList();
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0for (ScoreDoc hit : hits)
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0{
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0doc =3D searcher.doc(hit.d=
oc);
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0System.out.println(doc.get=
("DocId"));
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0((ArrayList) docIds).add(d=
oc.get("DocId"));
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}
> =A0// Function which you need not to understand
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 IMnCriterion criterion =3D
> contractQuery.createInCriterion(contractQuery.ATTR_P_DOC_ID, docIds);
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 contractQuery.setCriterion(criterion);
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 searcher.close();
> =A0 =A0 =A0 =A0}
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50160-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun 23 09:46:54 2011
Return-Path: <java-user-return-50160-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8FDBB4E97
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 23 Jun 2011 09:46:54 +0000 (UTC)
Received: (qmail 7710 invoked by uid 500); 23 Jun 2011 09:46:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7662 invoked by uid 500); 23 Jun 2011 09:46:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7654 invoked by uid 99); 23 Jun 2011 09:46:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2011 09:46:51 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of digydigy@gmail.com designates 209.85.210.176 as permitted sender)
Received: from [209.85.210.176] (HELO mail-iy0-f176.google.com) (209.85.210.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2011 09:46:45 +0000
Received: by iyi20 with SMTP id 20so2204645iyi.35
        for <java-user@lucene.apache.org>; Thu, 23 Jun 2011 02:46:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=4b0ZsTG1y8ChAXBPL3sFNRQFxNC1oVsjhsakOXJTOGU=;
        b=FWExAwPnxNSLS/qq7IVDXwentTHEHQi5Ii3eAEAXx1aewtynF1gq5l46hvbKojiSkf
         sJv2WY4fRoRnQnjrD6Bdr882Dd4huTNXVOdQXpdeAM0w0SqwtY+dXm5OzSAbLIkKsoyg
         otSsiJQ6mYfquNZWidFodyq7lOUtBeMDmUFBk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=KDTyqWkhxi3pg3YazbO9LJMHOkvG4UdeYLV+RfxzfIszN0JInZ330tNAVeWM2vjSJE
         Gn5pKha/vfh+Y2HrO1mdwYpzEb9n/2UWbwFVqYkvgZTodekRp37V7Z6n32bPKKV+cAWJ
         79/9vMsfKy4afJCVxluyifxkRNROk+ItTK9i8=
MIME-Version: 1.0
Received: by 10.42.161.3 with SMTP id r3mr1867407icx.186.1308822384688; Thu,
 23 Jun 2011 02:46:24 -0700 (PDT)
Received: by 10.42.223.199 with HTTP; Thu, 23 Jun 2011 02:46:24 -0700 (PDT)
In-Reply-To: <BANLkTiko6KDGnKDCCkbRtG=8b_HPD1JQzw@mail.gmail.com>
References: <BANLkTi=E9ZiruqKe219iaXk+urs9PNktBw@mail.gmail.com>
	<BANLkTimSkVP06rf3UmcRVmA=RzPWDP-2uA@mail.gmail.com>
	<BANLkTimG+mmGjhphCMWcPcNhwRLghRpSqg@mail.gmail.com>
	<BANLkTiko6KDGnKDCCkbRtG=8b_HPD1JQzw@mail.gmail.com>
Date: Thu, 23 Jun 2011 12:46:24 +0300
Message-ID: <BANLkTinV7eSV17SQyCwD4=wzwCHC7FxUcA@mail.gmail.com>
Subject: Re: Lucene Searching
From: digy digy <digydigy@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=90e6ba6e8e58503db604a65df511

--90e6ba6e8e58503db604a65df511
Content-Type: text/plain; charset=ISO-8859-1

Maybe, you need
queryParser.setLowercaseExpandedTerms(false)

DIGY

On Thu, Jun 23, 2011 at 9:37 AM, Pranav goyal <pranavgoyal40341@gmail.com>wrote:

> I tried it and it worked, although it's having one peculiarity.
>
> When I search for Item_1 : it gives me 110 hits but when I use *Item_1* it
> gives me 0 hits. What mistake am I doing here?
>
> Also when I search for *341* it is giving me correct results i.e
> 00000341-000-000-DR
> but it's not working for above case.
>
>
> Thanks
> Pranav
>
> On Wed, Jun 22, 2011 at 2:10 PM, Ian Lea <ian.lea@gmail.com> wrote:
>
> > What does Luke show as being indexed for that field?  Other useful
> > tips at
> >
> http://wiki.apache.org/lucene-java/LuceneFAQ#Why_am_I_getting_no_hits_.2BAC8_incorrect_hits.3F
> >
> > If that field is numeric you could use a NumericField - gets rid of
> > problems with leading zeros.
> >
> > If by "I just want to get everything which has 341 in it" you mean you
> > want to match aaa341bbb and 0000341 and 341, see related thread on
> > this list from yesterday.  Or
> > org.apache.lucene.search.regex.RegexQuery.
> >
> >
> >
> > --
> > Ian.
> >
> >
> > On Wed, Jun 22, 2011 at 9:16 AM, Pranav goyal
> > <pranavgoyal40341@gmail.com> wrote:
> > > I can always use * , ?
> > >
> > > But here I am not talking of this. I just want to get everything which
> > has
> > > 341 in it. How to do it without * or ?
> > >
> > > On Wed, Jun 22, 2011 at 1:00 PM, Pranav goyal <
> > pranavgoyal40341@gmail.com>wrote:
> > >
> > >> Hi all,
> > >>
> > >> I am in a fix regarding lucene search. I know a little bit about
> lucene
> > and
> > >> have successfully created index and searched a lot of queries on that.
> > >> My main worry is that whenever I search for let say "000" it doesn't
> > give
> > >> me any result while if I seach for "00000341" it'll give me a hit.
> Even
> > if I
> > >> search for 341 it doesn't give me anything.
> > >>
> > >> I have checked through luke also and luke is also showing no results.
> > >>
> > >> Do I have to use some different analyzer? Currently I am using Keyword
> > >> Analyzer.
> > >>
> > >> Thanks
> > >> Pranav
> > >>
> > >
> > >
> > >
> > > --
> > > I'm very responsible, when ever something goes wrong they always say
> I'm
> > > responsible --
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> --
> I'm very responsible, when ever something goes wrong they always say I'm
> responsible --
>

--90e6ba6e8e58503db604a65df511--

From java-user-return-50161-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun 23 09:57:51 2011
Return-Path: <java-user-return-50161-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B5EFB4AC8
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 23 Jun 2011 09:57:51 +0000 (UTC)
Received: (qmail 24864 invoked by uid 500); 23 Jun 2011 09:57:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24815 invoked by uid 500); 23 Jun 2011 09:57:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24807 invoked by uid 99); 23 Jun 2011 09:57:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2011 09:57:48 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.210.176 as permitted sender)
Received: from [209.85.210.176] (HELO mail-iy0-f176.google.com) (209.85.210.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2011 09:57:44 +0000
Received: by iyi20 with SMTP id 20so2212861iyi.35
        for <java-user@lucene.apache.org>; Thu, 23 Jun 2011 02:57:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=Gr1TMc7K15TPEGp2spkFZ93QztHJx262SAhrcrBROZQ=;
        b=NITMey/fZ19PB/cco1bSKF3rwvckwhTWYNYg73lR0yyprL8/QB4x2usS2Z3wXYEGyG
         GSvTJyszo5K60mlrd03dr3wzslRBEqFfmklbHzCSUINltIFHARS99Hl07Vx6BgXKpMHo
         xFkmS0p0Ur0V51kNvveqVaOJjjHQjWu0t3qy4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=SuL7CYclQ6CzyE6cJKWBcDuQJPAwxPIpqs6YYDpoXOiOBReQMSe2gfo/zxvmZ/P/Lg
         2i22LK9KdpeugUQWhHjMzGRxoHDM/0LZjxGHq1xe8BBuIWN5CrKSavf/+vJ63CvXIY5R
         Uw9UeHc1X34MskZ7Clu3xiPOBJwUpizJb1C2I=
Received: by 10.231.111.85 with SMTP id r21mr1625685ibp.21.1308823043386; Thu,
 23 Jun 2011 02:57:23 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.200.131 with HTTP; Thu, 23 Jun 2011 02:57:03 -0700 (PDT)
In-Reply-To: <4E028804.7050302@alaska.gov>
References: <4E028804.7050302@alaska.gov>
From: Ian Lea <ian.lea@gmail.com>
Date: Thu, 23 Jun 2011 10:57:03 +0100
Message-ID: <BANLkTi=__AFrmqEG_R81a+KBxtP_fWWHtw@mail.gmail.com>
Subject: Re: how to approach phrase queries and term grouping
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

Have you read Lucene In Action 2nd edition?  Highly recommended for
anyone new to lucene and includes info and code on synonyms and
position increments.  The code is available somewhere as a free
download. You may also want to read up on slop and span queries.  See
for example http://www.lucidimagination.com/blog/2009/07/18/the-spanquery/


--
Ian.


On Thu, Jun 23, 2011 at 1:25 AM, Jason Guild <jason.guild@alaska.gov> wrote:
> Hi All:
>
> I am new to Lucene and my project is to provide specialized search for a set
> of booklets. I am using Lucene Java 3.1.
>
> The basic idea is to run queries to find out what booklet and page numbers
> are
> match in order to help people know where to look for information in the
> (rather
> large and dry) booklets. Therefore each Document in my index represents a
> particular page in one of the booklets.
>
> So far I have been able to successfully scrape the raw text from the
> booklets,
> insert it into an index, and query it just fine using StandardAnalyzer on
> both
> ends.
>
> So here's my general question:
> Many queries on the index will involve searching for place names mentioned
> in the
> booklets. Some place names use notational variants. For instance, in the
> body text
> it will be called "Ship Creek" but in a diagram it might be listed as "Ship
> Cr." or
> elsewhere as "Ship Ck.".
>
> If I search for (Ship AND (Cr Ck Creek)) this does not give me what I want
> because
> other words may appear between [ship] and [cr]/[ck]/[creek] leading to false
> positives.
>
> What I need to know is how to approach treating the two consecutive words as
> a single
> term and add the notational variants as synonyms. So, in a nutshell I need
> the basic
> stuff provided by StandardAnalyzer, but with term grouping to emit place
> names
> as complete terms and insert synonymous terms to cover the variants.
>
> For instance, the text "...allowed from the mouth of Ship Creek upstream to
> ..." would
> result in tokens [allowed],[mouth],[ship creek],[upstream]. Perhaps via a
> TokenFilter along
> the way, the [ship creek] term would expand into [ship creek][ship ck][ship
> cr].
>
> As a bonus it would be nice to treat the trickier text "..except in Ship,
> Bird, and
> Campbell creeks where the limit is..." as [except],[ship creek],[bird
> creek],
> [campbell creek],[where],[limit].
>
> Should the detection and merging be done in a TokenFilter?
> Some of the term grouping can probably be done heuristically [*],[creek] is
> [* creek]
> but I also have an exhaustive list of places mentioned in the text if that
> helps.
>
> Thanks for any help you can provide.
> Jason
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50162-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun 23 10:05:19 2011
Return-Path: <java-user-return-50162-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 72C7A42DE
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 23 Jun 2011 10:05:19 +0000 (UTC)
Received: (qmail 35326 invoked by uid 500); 23 Jun 2011 10:05:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35277 invoked by uid 500); 23 Jun 2011 10:05:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35269 invoked by uid 99); 23 Jun 2011 10:05:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2011 10:05:16 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2011 10:05:10 +0000
Received: by iwi5 with SMTP id 5so2219539iwi.35
        for <java-user@lucene.apache.org>; Thu, 23 Jun 2011 03:04:49 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=QTppFzdfK1S1he1RHAS0I+XLQDx4Cpi3G6rzC1QppjY=;
        b=R8Xf1uu6sal3r2yvHwNgb4hyNBY231NBUbyPygKOeLGFakt4xiOVMpVuZ27uuZXJgn
         7nCQG5jFAoYT7LDnQdiM49Eof0Stok+TmUF5WmDiegn31ktN4CBquEGLC7W+wHCBGJgG
         gqYQKZtHhpaWG4i2pmEtB8V4jbptMtWkOCXfk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=A7Xcb/qjFMDMe8Jnt32z99bxA2i3F/QvLEQoYhx8yp8vDvwaaJ19QJ8lTHdQzjsCKh
         VsesW3F8ZmyKP2TP7WeIQ9yGG8/RckISe8rruf9QxtXIlqRp4OOt73l+t36PJSFHPCMm
         ZsHkbCe8cMD+vAlKpHfHKxalg44rUdncT6084=
Received: by 10.231.21.40 with SMTP id h40mr1564829ibb.96.1308823489107; Thu,
 23 Jun 2011 03:04:49 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.200.131 with HTTP; Thu, 23 Jun 2011 03:04:29 -0700 (PDT)
In-Reply-To: <08230D4C8E666D479F6DE495A7684DCD0AC2F229@JSCPCWEXMAA1.bsg.ad.adp.com>
References: <08230D4C8E666D479F6DE495A7684DCD0AC2F229@JSCPCWEXMAA1.bsg.ad.adp.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Thu, 23 Jun 2011 11:04:29 +0100
Message-ID: <BANLkTinWoaa_uT6D0+bG=JbLwrpP-nvstQ@mail.gmail.com>
Subject: Re: IndexWriter.optimize not using it breaks my test case :(
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

>From the 3.2.0 javadocs:

"Optimize is a fairly costly operation, so you should only do it if
your search performance really requires it. Many search applications
do fine never calling optimize."


See the FAQ and javadocs on searchers and writers for thread safety info.

One thing that optimize does do is clear out deleted documents.  Could
that be relevant to your test failure?  If so, there is an
expungeDeletes() method you could maybe use instead.


--
Ian.

On Wed, Jun 22, 2011 at 8:24 PM, Hiller, Dean  x66079
<dean.hiller@broadridge.com> wrote:
> I read that in a lot of cases IndexWriter.optimize does not have to be ca=
lled.
>
> I then deleted it and my junit test case broke because results were comin=
g back in the query that were not supposed to be coming back :(. =A0I think=
 everything is single tested. =A0Maybe I should write a more raw junit test=
 first? But I thought I would ask what exactly is optimize doing and is Luc=
ene thread safe...I read that it was somewhere(but also read elsewhere it w=
asn't).
>
> I kind of assumed my IndexWriters are not thread safe, but my IndexSearch=
er could be running while another thread is using the IndexWriter, right?
>
> (Of course, while my unit test is single threaded and failed with just th=
is one line change, our production system will be multithreaded which is wh=
y I ask).
>
> Thanks,
> Dean

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50163-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun 23 10:13:14 2011
Return-Path: <java-user-return-50163-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3DF3D4513
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 23 Jun 2011 10:13:14 +0000 (UTC)
Received: (qmail 44156 invoked by uid 500); 23 Jun 2011 10:13:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44094 invoked by uid 500); 23 Jun 2011 10:13:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44086 invoked by uid 99); 23 Jun 2011 10:13:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2011 10:13:11 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.210.176 as permitted sender)
Received: from [209.85.210.176] (HELO mail-iy0-f176.google.com) (209.85.210.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2011 10:13:06 +0000
Received: by iyi20 with SMTP id 20so2225900iyi.35
        for <java-user@lucene.apache.org>; Thu, 23 Jun 2011 03:12:46 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=rzWL/k6cveX31zkCESZGBgYpwjvHip19MEdq1SmSKx0=;
        b=otajHpAUqqQYnOWoOG8dwPuc8bnhsB2yFY7rCQGSyVw/YE2khirqapiq7QdNoTJtkC
         Dox4zklOSImgXNjUxDTRBUI5ldMI9B3w2xv1vjyN3VesBKTi76TyXp4idXGC5H9jXZZ1
         QpSMigerLLCSj0NkHqntgxApusW1x7ykj6mfc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=UM83PKNSYjo3qfNrL/nyMIEXFuqiElmVH/Xuf6kCI3roMqWTsv0JPfX1lbM7BAv/Io
         GQhNdsN5nXaK9IZTaof1zTAv5yTa0VTb5s9Gb0TiKJmxsHbiQ8Q1Tx2EHugHSYXXpOlK
         6ZFDKZLo+kB4/rhdYCxucnNBqiZln337/E8fg=
Received: by 10.231.113.141 with SMTP id a13mr1570328ibq.71.1308823966164;
 Thu, 23 Jun 2011 03:12:46 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.200.131 with HTTP; Thu, 23 Jun 2011 03:12:26 -0700 (PDT)
In-Reply-To: <02c401cc3121$2ea3cbb0$8beb6310$@com>
References: <02c401cc3121$2ea3cbb0$8beb6310$@com>
From: Ian Lea <ian.lea@gmail.com>
Date: Thu, 23 Jun 2011 11:12:26 +0100
Message-ID: <BANLkTi=F6TiwdqNoO0ptojR4VwRxvUAYBg@mail.gmail.com>
Subject: Re: field sorted searches with unbounded hit count
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

One possibility would be to execute the search first just to get the
number of hits - see TotalHitCountCollector in recent versions of
lucene, not sure when it was added - and use the hit count from that
as the max docs to return.  The counting only search would typically
be very quick, certainly much quicker than sorting a large number of
hits.


--
Ian.


On Wed, Jun 22, 2011 at 10:13 PM, Tim Eck <teck@terracottatech.com> wrote:
> For the searches I want to run on my index I want to return all matching
> documents (as opposed to N top hits).
>
>
>
> My first na=C4=BCve approach was just to use Searcher.search(query, filte=
r,
> Integer.MAX_VALUE, sort) =E2=80=93 that is, pass Integer.MAX_VALUE for th=
e number
> of possible docs to return. That unfortunately seems to have huge heap
> requirements in org.apache.lucene.util.PriorityQueue.heap as the max docI=
D
> in my index gets large. Multiply that per search heap requirement by a
> handful of concurrent threads and I OOME my server.
>
>
>
> When I don=E2=80=99t need to do any sorting it pretty easy to just use my=
 own
> collector to gather the doc ids. =C2=A0Of course depending on the number =
of
> hits I might still need a good amount of heap but at least it a factor of
> the number of matches (not the index size).
>
>
>
> I=E2=80=99m struggling to figure out how to do the same search but with s=
orting.
> I=E2=80=99m looking for a method like Searcher.search(Query, Filter, Sort=
,
> Collector), but perhaps that isn=E2=80=99t a reasonable thing to have, pl=
ease
> enlighten me if so :-)
>
>
>
> I=E2=80=99m using 3.0.3 lucene-core at the moment but I don=E2=80=99t see=
 that this aspect
> is any different in 3.2.0.
>
>
>
> Hopefully this made sense, any help you can provide is appreciated.
>
>
>
>
>
>
>
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50164-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun 23 10:44:37 2011
Return-Path: <java-user-return-50164-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 26DA34A77
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 23 Jun 2011 10:44:37 +0000 (UTC)
Received: (qmail 88765 invoked by uid 500); 23 Jun 2011 10:44:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88715 invoked by uid 500); 23 Jun 2011 10:44:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88707 invoked by uid 99); 23 Jun 2011 10:44:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2011 10:44:34 +0000
X-ASF-Spam-Status: No, hits=2.0 required=5.0
	tests=FREEMAIL_FROM,RFC_ABUSE_POST,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 216.139.236.26 is neither permitted nor denied by domain of lichman@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2011 10:44:29 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <lichman@gmail.com>)
	id 1QZhOL-0002oy-6S
	for java-user@lucene.apache.org; Thu, 23 Jun 2011 03:44:09 -0700
Date: Thu, 23 Jun 2011 03:44:09 -0700 (PDT)
From: lichman <lichman@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1308825849191-3099397.post@n3.nabble.com>
In-Reply-To: <1308817664406-3099032.post@n3.nabble.com>
References: <740221930626904@mail.mainsequence.net> <168005801339660@mail.mainsequence.net> <1308655374681-3090213.post@n3.nabble.com> <907646.6606.qm@web121716.mail.ne1.yahoo.com> <1308817664406-3099032.post@n3.nabble.com>
Subject: Re: ComplexPhraseQueryParser with multiple fields
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

By the way - I'm using the ComplexPhraseQueryParser that I've downloaded
from:

https://issues.apache.org/jira/browse/SOLR-1604

And I've tried to use packages:

 - org.apache.lucene.search
 - org.apache.lucene.queryParser

Both, when compiled and added to the SOLR lib dir, caused the exception.

Any ideas?


--
View this message in context: http://lucene.472066.n3.nabble.com/ComplexPhraseQueryParser-with-multiple-fields-tp2879290p3099397.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50165-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun 23 10:51:58 2011
Return-Path: <java-user-return-50165-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5C83F41DD
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 23 Jun 2011 10:51:58 +0000 (UTC)
Received: (qmail 367 invoked by uid 500); 23 Jun 2011 10:51:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 310 invoked by uid 500); 23 Jun 2011 10:51:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 302 invoked by uid 99); 23 Jun 2011 10:51:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2011 10:51:56 +0000
X-ASF-Spam-Status: No, hits=0.0 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [98.138.91.170] (HELO nm10-vm4.bullet.mail.ne1.yahoo.com) (98.138.91.170)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 23 Jun 2011 10:51:45 +0000
Received: from [98.138.90.49] by nm10.bullet.mail.ne1.yahoo.com with NNFMP; 23 Jun 2011 10:51:23 -0000
Received: from [98.138.89.252] by tm2.bullet.mail.ne1.yahoo.com with NNFMP; 23 Jun 2011 10:51:23 -0000
Received: from [127.0.0.1] by omp1044.mail.ne1.yahoo.com with NNFMP; 23 Jun 2011 10:51:23 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 70460.66196.bm@omp1044.mail.ne1.yahoo.com
Received: (qmail 34388 invoked by uid 60001); 23 Jun 2011 10:51:23 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1308826282; bh=WMztx34FaxSZY0yaJEPgH6nscBu5CFovq8P1Ov5I+ZU=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=NGsxKIuQBKL8mQ3eYv5AsCvdOTThge8SEqhtkweEoK2un2rOfBt3cs+0MWl4Cl7MwyrKOkwkHRH5Q026ZE2ORjFtOModHHbYs4czo8qq7WQA4hTcZyd/7lZoGlpfB1VOePllflae4xdsxVC4aFuq8DLdbSRZEoUYJRyVyZjzwnU=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=uWkS8W6nkOA5eipYSdD4RULO2FMgBy9swUzyQa6V5K5uD8daSL68ogxOojVinCdF7H0kDIa0z73RoiGAc6aqcUS2e4folYv7KcT7wymB4qJ37gHfLhhiGwtpqnGImJWWXWVjphvGPglYjDgW5baV7RRaoFlYKqgu/UOHqtzjtW0=;
Message-ID: <930967.32258.qm@web121702.mail.ne1.yahoo.com>
X-YMail-OSG: FDXsR.AVM1njw8pD0DBT3hEmdalK5oewY0Wu7ZcPh3fCvN7
 fN9wI71eK8O2VSGvzr.jqZFqP8rETHmKwL5ZYJKaGFfwuQgzGPNb8ULH7slW
 GyiKxHkKd1EoAF3kfh.Fbb6uosPbdT.AILFAfXeBN9.x3brKMGwPxWJOsOqB
 sET70sWW5ZA5coodAR30FEKI.SG7iFUTIlOkLiHES_NSTT_dwQP26Z1N4Cxs
 ZC_zRele6DoBay7BlEZ7bXVNkH8YjbDUgW5B5EeJB_8cLkOPcoBh8Y8LPcl_
 6sY03siwFkCcYQbZ1zV_FbNJHgTfdd9k_al1n8xlmkq5sBk.VjVh.Nrz8xxE
 J1nF3MyxrLcxEf1rxtn7ALYj4hvbQf6zd43XqFWS.1zAjcMv7lQ.oLr93nZk
 dT4aKlbbhYsAByX3E6_jrbUU0xCbfCOfML115zbyJ2CVwHL_Sx34K7j80LsQ
 wFl5YzKkEutp2Q6kU4IMQ0lR5xrqZ6iU_lBWs7hRiPdB6EbnZ
Received: from [193.140.184.4] by web121702.mail.ne1.yahoo.com via HTTP; Thu, 23 Jun 2011 03:51:22 PDT
X-Mailer: YahooMailClassic/14.0.3 YahooMailWebService/0.8.111.304355
Date: Thu, 23 Jun 2011 03:51:22 -0700 (PDT)
From: Ahmet Arslan <iorixxx@yahoo.com>
Subject: Re: ComplexPhraseQueryParser with multiple fields
To: java-user@lucene.apache.org
In-Reply-To: <1308825849191-3099397.post@n3.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org

> By the way - I'm using the
> ComplexPhraseQueryParser that I've downloaded
> from:
> 
> https://issues.apache.org/jira/browse/SOLR-1604
> 
> And I've tried to use packages:
> 
>  - org.apache.lucene.search
>  - org.apache.lucene.queryParser
> 
> Both, when compiled and added to the SOLR lib dir, caused
> the exception.

That's a different story then. You don't need to change anything. You can use it as plugin. However you need to embed the jar file into solr.war. Please follow the instructions described here :

https://issues.apache.org/jira/browse/SOLR-1604?focusedCommentId=12859048&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12859048

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50166-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun 23 11:25:07 2011
Return-Path: <java-user-return-50166-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0208249AF
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 23 Jun 2011 11:25:07 +0000 (UTC)
Received: (qmail 58015 invoked by uid 500); 23 Jun 2011 11:25:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57972 invoked by uid 500); 23 Jun 2011 11:25:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57964 invoked by uid 99); 23 Jun 2011 11:25:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2011 11:25:04 +0000
X-ASF-Spam-Status: No, hits=2.0 required=5.0
	tests=FREEMAIL_FROM,RFC_ABUSE_POST,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 216.139.236.26 is neither permitted nor denied by domain of lichman@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2011 11:24:57 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <lichman@gmail.com>)
	id 1QZi1V-0006mp-2j
	for java-user@lucene.apache.org; Thu, 23 Jun 2011 04:24:37 -0700
Date: Thu, 23 Jun 2011 04:24:37 -0700 (PDT)
From: lichman <lichman@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1308828277077-3099495.post@n3.nabble.com>
In-Reply-To: <930967.32258.qm@web121702.mail.ne1.yahoo.com>
References: <740221930626904@mail.mainsequence.net> <168005801339660@mail.mainsequence.net> <1308655374681-3090213.post@n3.nabble.com> <907646.6606.qm@web121716.mail.ne1.yahoo.com> <1308817664406-3099032.post@n3.nabble.com> <1308825849191-3099397.post@n3.nabble.com> <930967.32258.qm@web121702.mail.ne1.yahoo.com>
Subject: Re: ComplexPhraseQueryParser with multiple fields
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks! Now it works.

But now there's another issue. 
I'm using SOLR and Lucene 3.1.0 and when sending a query "Wildcard* phrase*"
it works as expected - but, when sending the query "wildcard*" (Only one
word withing the phrase) I'm getting another exception:

HTTP ERROR: 500
Unknown query type "org.apache.lucene.search.PrefixQuery" found in phrase
query string "touch*"
java.lang.IllegalArgumentException: Unknown query type
"org.apache.lucene.search.PrefixQuery" found in phrase query string "touch*"

Any ideas?

--
View this message in context: http://lucene.472066.n3.nabble.com/ComplexPhraseQueryParser-with-multiple-fields-tp2879290p3099495.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50167-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun 23 13:06:53 2011
Return-Path: <java-user-return-50167-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4ABB04B59
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 23 Jun 2011 13:06:53 +0000 (UTC)
Received: (qmail 98769 invoked by uid 500); 23 Jun 2011 13:06:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98691 invoked by uid 500); 23 Jun 2011 13:06:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98683 invoked by uid 99); 23 Jun 2011 13:06:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2011 13:06:50 +0000
X-ASF-Spam-Status: No, hits=0.0 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [98.138.91.139] (HELO nm9-vm3.bullet.mail.ne1.yahoo.com) (98.138.91.139)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 23 Jun 2011 13:06:40 +0000
Received: from [98.138.90.48] by nm9.bullet.mail.ne1.yahoo.com with NNFMP; 23 Jun 2011 13:06:19 -0000
Received: from [98.138.89.164] by tm1.bullet.mail.ne1.yahoo.com with NNFMP; 23 Jun 2011 13:06:19 -0000
Received: from [127.0.0.1] by omp1020.mail.ne1.yahoo.com with NNFMP; 23 Jun 2011 13:06:15 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 619466.14864.bm@omp1020.mail.ne1.yahoo.com
Received: (qmail 8789 invoked by uid 60001); 23 Jun 2011 13:06:15 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1308834375; bh=0bGQmUgBERP7mSj/zFrN8ttsFtwuspzFHITlmXmkScc=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=rMA4aUrJvWWSK9pG2zWCLhrTfQj0XQnq6gLAoWfDYlxe1XhAlutl25ZbbkfWGS7OzJ8FTh+uJl7Z0C++WG92uNNTFYFMmi6ijYZfmd9ONAKo1FM8i1p087cwsvWPXEapWz31uw1oMfDbHBIvbj+B3Xm240LN7djfeF6BpfBKBys=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=Gl4bgpev85pbrxfcQEo7VmNokJWHD6LeGgh/qP2tuvqhANqzR+OWULwe414o3t6jcxOuwVWozBIY+JGV3OI51Hfr8RL2z7cDPyGJdqQemH2/Bi2W1MOu0go0jK2+O4f4HSFNWtfpMbQ+4iCW92m9NmvHcFydTKacWh+mrk2mqdY=;
Message-ID: <496757.4694.qm@web121702.mail.ne1.yahoo.com>
X-YMail-OSG: .hHZZk0VM1mpsdBYx7rR_NvDjbd19gvMI7GtoHDodYaaOFX
 aaj46bISvLjsnm0C8mnmwT.FEKpCixBXxQ2DEIruXkRPX8M8HjJXDmzL3SvY
 G13uj1wJ.2U5u_VyVbX8U6S8DJgYipRdTG_262baLsdaspFKs3FBghXYyenK
 9YWhmaafT6znujmZZHQttrCFF_ptaBgsNuBhwYq814VnQQH9QcLnlpjAtSm8
 nzjDf.Qx1aOhY.u_MMboR3KACtpzspuAI4znROSzVTBGC66lNafrXfeQoUwt
 87rPDzd16z5KhNJQYWZIdFWH6Kri1xIcrC.Kr9ldvK688oDOm12yxPJyyBMx
 FeitrgA9PEtG9AQlX463U3jW6yITBpsdJXljYgjultEwSIaX2Q5N4L9iUnss
 RbnwdJv08D6YmH_YW
Received: from [193.140.184.4] by web121702.mail.ne1.yahoo.com via HTTP; Thu, 23 Jun 2011 06:06:15 PDT
X-Mailer: YahooMailClassic/14.0.3 YahooMailWebService/0.8.111.304355
Date: Thu, 23 Jun 2011 06:06:15 -0700 (PDT)
From: Ahmet Arslan <iorixxx@yahoo.com>
Subject: Re: ComplexPhraseQueryParser with multiple fields
To: java-user@lucene.apache.org
In-Reply-To: <1308828277077-3099495.post@n3.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org

> But now there's another issue. 
> I'm using SOLR and Lucene 3.1.0 and when sending a query
> "Wildcard* phrase*"
> it works as expected - but, when sending the query
> "wildcard*" (Only one
> word withing the phrase) I'm getting another exception:
> 
> HTTP ERROR: 500
> Unknown query type "org.apache.lucene.search.PrefixQuery"
> found in phrase
> query string "touch*"
> java.lang.IllegalArgumentException: Unknown query type
> "org.apache.lucene.search.PrefixQuery" found in phrase
> query string "touch*"


Actually query string "touch*" is invalid. It should be equivalent of just touch*. What is your expectation from that query?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50168-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun 23 13:18:46 2011
Return-Path: <java-user-return-50168-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1ABC64CE8
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 23 Jun 2011 13:18:46 +0000 (UTC)
Received: (qmail 19050 invoked by uid 500); 23 Jun 2011 13:18:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19009 invoked by uid 500); 23 Jun 2011 13:18:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19001 invoked by uid 99); 23 Jun 2011 13:18:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2011 13:18:43 +0000
X-ASF-Spam-Status: No, hits=2.0 required=5.0
	tests=FREEMAIL_FROM,RFC_ABUSE_POST,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 216.139.236.26 is neither permitted nor denied by domain of lichman@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2011 13:18:38 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <lichman@gmail.com>)
	id 1QZjnW-0000KX-50
	for java-user@lucene.apache.org; Thu, 23 Jun 2011 06:18:18 -0700
Date: Thu, 23 Jun 2011 06:18:18 -0700 (PDT)
From: lichman <lichman@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1308835098146-3099824.post@n3.nabble.com>
In-Reply-To: <496757.4694.qm@web121702.mail.ne1.yahoo.com>
References: <740221930626904@mail.mainsequence.net> <168005801339660@mail.mainsequence.net> <1308655374681-3090213.post@n3.nabble.com> <907646.6606.qm@web121716.mail.ne1.yahoo.com> <1308817664406-3099032.post@n3.nabble.com> <1308825849191-3099397.post@n3.nabble.com> <930967.32258.qm@web121702.mail.ne1.yahoo.com> <1308828277077-3099495.post@n3.nabble.com> <496757.4694.qm@web121702.mail.ne1.yahoo.com>
Subject: Re: ComplexPhraseQueryParser with multiple fields
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

The same as touch*.
Thanks.

--
View this message in context: http://lucene.472066.n3.nabble.com/ComplexPhraseQueryParser-with-multiple-fields-tp2879290p3099824.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50169-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun 23 13:47:45 2011
Return-Path: <java-user-return-50169-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CE4094ACF
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 23 Jun 2011 13:47:45 +0000 (UTC)
Received: (qmail 64371 invoked by uid 500); 23 Jun 2011 13:47:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64302 invoked by uid 500); 23 Jun 2011 13:47:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64294 invoked by uid 99); 23 Jun 2011 13:47:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2011 13:47:43 +0000
X-ASF-Spam-Status: No, hits=0.5 required=5.0
	tests=FROM_DOMAIN_NOVOWEL,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [65.242.33.132] (HELO smtp.trssllc.com) (65.242.33.132)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2011 13:47:37 +0000
Received: from TRPEX01.TRSSLLC.com ([127.0.0.1]) by TRPEX01 ([127.0.0.1]) with
 mapi; Thu, 23 Jun 2011 09:46:45 -0400
From: Bob Rhodes <Bob.Rhodes@trssllc.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>,
	"simon.willnauer@gmail.com" <simon.willnauer@gmail.com>
Date: Thu, 23 Jun 2011 09:46:43 -0400
Subject: RE: questions about searching lucene 3.2
Thread-Topic: questions about searching lucene 3.2
Thread-Index: AcwxbwGVxXv9A4yFSWmGStBM5prGXwAPKDUQ
Message-ID: <1DA142C0B842D742B61E20305D79FABF131D9B9F72@TRPEX01>
References: <BANLkTim4YKpjpFuOoWN8r4m_StWfVc-gVg@mail.gmail.com>
	<1DA142C0B842D742B61E20305D79FABF1315BB8144@TRPEX01>
	<1DA142C0B842D742B61E20305D79FABF1315BB818E@TRPEX01>
 <BANLkTimpi2N5Hcub2L+-8GfM7AyjPKNu0Q@mail.gmail.com>
In-Reply-To: <BANLkTimpi2N5Hcub2L+-8GfM7AyjPKNu0Q@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: yes
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: multipart/signed; protocol="application/x-pkcs7-signature";
	micalg=SHA1; boundary="----=_NextPart_000_0010_01CC318A.75C78680"
MIME-Version: 1.0

------=_NextPart_000_0010_01CC318A.75C78680
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: 7bit

Yeah I agree that this is the issue. I did get my query to work using the 
"ClassicAnalyzer". I guess maybe I need to upgrade my indexes which will be a 
big job. Any advice here is appreciated.
I didn't have any luck passing Version.LUCENE_24 to the StandardAnalyzer. 
There query still didn't work.
Also, is there any downside to just continuing with the ClassicAnalyzer?

Bob

-----Original Message-----
From: Simon Willnauer [mailto:simon.willnauer@googlemail.com]
Sent: Thursday, June 23, 2011 2:30 AM
To: java-user@lucene.apache.org
Subject: Re: questions about searching lucene 3.2

As far as I understand you have 2 different problems.

1. search and 2.4 index with 3.2 code using standard analyzer.
in this case you should either reindex or pass Version.LUCENE_24 to
the StandardAnalyzer ctor that should help here.

2. search a string with parentheses with the query parser
you should escape you query string with QueryParser#escape before searching.

maybe I am misssing something, let me know if thats the case.

simon

On Wed, Jun 22, 2011 at 9:46 PM, Bob Rhodes <Bob.Rhodes@trssllc.com> wrote:
> Here is a follow-up. This is a larger example of some of the text I'm
> searching in my index:
> The quoted name/value pairs are in the index.
> "
> middleName="D", zip="1111", lastName="ADAMSON", street="00 SOME ST",
> addAssociates="true", state="CA", city="ROCHESTER", source="SOMESOURCE",
> person_user="TESTUSER", dob="19510210", firstName="CHARLES"
> "
>
> If I use my app or Luke to search for ADAMSON I get matches when searching
> the field above that contains the example text. I get the same results if I
> search by the dob value 19510210 works great.
> The field content is variable and when the field above only contains
> phoneNumber="(904) 555-1212" there is no way for me to find this exact
> number.
>
> If I use the ClassicAnalyzer this I can use this to find my number by just
> searching "(904) 555-1212" for the number.
>
> I think this more clearly states my issue. Is the problem related to the
> parens? I've tried escaping and double escaping them to no avail. Anyone
> have any suggestions?
>
> In my code I've used the standard query parser as well as the
> ComplexPhraseQueryParser.
>
> One other point to note. The indexes I'm searching were created with 2.1.4
> using the StandardAnalyzer but I'm using 3.2.0 to search.
>
> Bob
>
>
> -----Original Message-----
> From: Bob Rhodes [mailto:Bob.Rhodes@trssllc.com]
> Sent: Wednesday, June 22, 2011 11:56 AM
> To: java-user@lucene.apache.org
> Subject: questions about searching lucene 3.2
>
> Hi all,
> I have some questions about searching 3.2. I have just upgraded from 2.4.1
> to 3.2. I am using the standard analyzer to create the index and to search,
> and one of the fields is called "querytext" and it has content like this
> among other things: phoneNumber="(904) 555-1212". I've tried many different
> ways to query this using the query api and the query parser and I can't find
> the string above. It seems the analyzer tokenizes the number above as 904
> 555 1212. The numbers I am searching with are formatted as 9045551212 and I
> need to use that someone to find the number formatted as above. Thanks for
> the help!
>
>
> Bob
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


------=_NextPart_000_0010_01CC318A.75C78680
Content-Type: application/x-pkcs7-signature; name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment; filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIQGTCCBKow
ggOSoAMCAQICDi5qAAEAAh/XUiEsEVw7MA0GCSqGSIb3DQEBBQUAMHYxCzAJBgNVBAYTAkRFMRww
GgYDVQQKExNUQyBUcnVzdENlbnRlciBHbWJIMSIwIAYDVQQLExlUQyBUcnVzdENlbnRlciBDbGFz
cyAyIENBMSUwIwYDVQQDExxUQyBUcnVzdENlbnRlciBDbGFzcyAyIENBIElJMB4XDTA2MDExMjE0
Mzg0M1oXDTI1MTIzMTIyNTk1OVowdjELMAkGA1UEBhMCREUxHDAaBgNVBAoTE1RDIFRydXN0Q2Vu
dGVyIEdtYkgxIjAgBgNVBAsTGVRDIFRydXN0Q2VudGVyIENsYXNzIDIgQ0ExJTAjBgNVBAMTHFRD
IFRydXN0Q2VudGVyIENsYXNzIDIgQ0EgSUkwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIB
AQCrgIebjvDDfIfX6CSCEbM83UNi7vjDRdro4aBf0Sqy6pNo37TI1kPpxHVZf/zhHfgxcCMbiJ4n
uXv9OtLJqekUL5C+A1LBSc32/eQIZgtXiqJCoLjVf2lckDKylw3KStxGPgJViVPjGlrLNsYHVveM
zxH0TLswcASVpfY5jP1zgQh9iV4yHiKpIkVLsGYuMMyfZf38y4Gp8eA7r6OG0YnqxEV5UF2u6SF0
kk2LWYKPlOPpSvHnSbAU4/Viy9VyvR+50p+gzaj6AcjZDd/a/Eeds8hU30lK8SGp/hhO7kjUGbvv
feTinctbtm7/481a53SCBbqAJTjL5Gmer0GqGoT1AgMBAAGjggE0MIIBMDAPBgNVHRMBAf8EBTAD
AQH/MA4GA1UdDwEB/wQEAwIBBjAdBgNVHQ4EFgQU46tUTICh21ZDt5FKy/OCehNcCKswge0GA1Ud
HwSB5TCB4jCB36CB3KCB2YY1aHR0cDovL3d3dy50cnVzdGNlbnRlci5kZS9jcmwvdjIvdGNfY2xh
c3NfMl9jYV9JSS5jcmyGgZ9sZGFwOi8vd3d3LnRydXN0Y2VudGVyLmRlL0NOPVRDJTIwVHJ1c3RD
ZW50ZXIlMjBDbGFzcyUyMDIlMjBDQSUyMElJLE89VEMlMjBUcnVzdENlbnRlciUyMEdtYkgsT1U9
cm9vdGNlcnRzLERDPXRydXN0Y2VudGVyLERDPWRlP2NlcnRpZmljYXRlUmV2b2NhdGlvbkxpc3Q/
YmFzZT8wDQYJKoZIhvcNAQEFBQADggEBAIzX337uG4AQs4P12xHqa0uokhjZ9wc59Sy+BnV6aFMV
HOpK7V78I7IToNMJ//b2LmtBcXnN4m39rllrhR24TiKa7WY5bkuU5lX8CxuLd8FTE2aJ2SjWi/NF
SmO3/XsLYV24bb7D3Ft50u2G5aJNvl50fGrtFjgff1iBWhrrMogtsvM5d4CvXrZhdSnbI02IylAo
y4XS0xCiWW7Tk1QAeqJGlYYFnKkZmOUxcgwA4mfZQOAkM3tvLLlcq2WdLKx26jWZ9Ze5DyTsx3Yh
KGWuV+gHiHVKVqDSBTqk5o2SiCzz8uHBxmHbQcXHm/cOGlFFwmFr3GQnF4xat9p0KM2X5L0wggWX
MIIEf6ADAgECAg5IYAABAALioyWoWa5MKzANBgkqhkiG9w0BAQUFADB8MQswCQYDVQQGEwJERTEc
MBoGA1UEChMTVEMgVHJ1c3RDZW50ZXIgR21iSDElMCMGA1UECxMcVEMgVHJ1c3RDZW50ZXIgQ2xh
c3MgMiBMMSBDQTEoMCYGA1UEAxMfVEMgVHJ1c3RDZW50ZXIgQ2xhc3MgMiBMMSBDQSBYSTAeFw0x
MTA1MDIxODAyMTlaFw0xNDA1MDIxODAxNTlaMGsxCzAJBgNVBAYTAlVTMQswCQYDVQQIEwJOWTER
MA8GA1UEBxMITmV3IFlvcmsxGDAWBgNVBAoTD1Rob21zb24gUmV1dGVyczENMAsGA1UECxMEVFJT
UzETMBEGA1UEAxMKQm9iIFJob2RlczCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALjQ
AQK3qn4EqjqETnYRDG6ejvAgVaeoos7yBzAE6zc0Hp83jzHZNB0B8fxkLBBdaCS4drlHEuDZB2Tm
s1o9e+U3+ReCiupxxHMNppho5y1MgvXQ0XYXf9bpVUCCYqF58Dx3RveT5vMODbEHSHm+0iTft5J4
ZBR4glfXKZRHE11t3TQoI8Z5cBjlyh1+GEj4RWZiEBKmOQ/bIcRaiJuiMSIRW0T2kEp5oEoauBtV
Ebs1V6Rf0vTY6pbtBwTXPypq4VDcHm4BD6cLOFrhELkvkG6sF/s3kF3fAZL8gFcR0XEvFdU9qkXU
MksOJSJAhVNaE7X9dtY+SdzO+boDpKPqdxECAwEAAaOCAiYwggIiMIGaBggrBgEFBQcBAQSBjTCB
ijBRBggrBgEFBQcwAoZFaHR0cDovL3d3dy50cnVzdGNlbnRlci5kZS9jZXJ0c2VydmljZXMvY2Fj
ZXJ0cy90Y19jbGFzczJfTDFfQ0FfWEkuY3J0MDUGCCsGAQUFBzABhilodHRwOi8vb2NzcC54aS50
Y2NsYXNzMi1paS50cnVzdGNlbnRlci5kZTAfBgNVHSMEGDAWgBRms8aR+bbNsl+aN1ZGDOJr1bF8
tDAMBgNVHRMBAf8EAjAAMEoGA1UdIARDMEEwPwYJKoIUACwBAQECMDIwMAYIKwYBBQUHAgEWJGh0
dHA6Ly93d3cudHJ1c3RjZW50ZXIuZGUvZ3VpZGVsaW5lczAOBgNVHQ8BAf8EBAMCBPAwHQYDVR0O
BBYEFISzLWnLeohaBV/DHYEb6SalJssJMFcGA1UdHwRQME4wTKBKoEiGRmh0dHA6Ly9jcmwueGku
dGNjbGFzczItaWkudHJ1c3RjZW50ZXIuZGUvY3JsL3YyL3RjX2NsYXNzMl9MMV9DQV9YSS5jcmww
MwYDVR0lBCwwKgYIKwYBBQUHAwIGCCsGAQUFBwMEBggrBgEFBQcDBwYKKwYBBAGCNxQCAjBLBgNV
HREERDBCoCgGCisGAQQBgjcUAgOgGgwYVTAwMDE2NDBAVExSLlRob21zb24uQ29tgRZib2Iucmhv
ZGVzQHRyc3NsbGMuY29tMA0GCSqGSIb3DQEBBQUAA4IBAQAcfDuCR+t2lYfoypEm2Or7iN2dYFpN
Ef5Npy82zhCIuRkVSRHAfVhRMCTL2dIPcKBTOsUJSS8BojzM04VWmA5mU+8w72w0SZ4X05MKuwR7
6CZAI96mNWVSywvjf7cam37BVtw3CHPXqTUlPMw3RpJ7b3vOsVTzG1gFKHBfvjNE++fTfOYvXOxF
EPib8w188MuYVDereXU60QyLoXj877Trbck8vElCfh6jVKMR3yUzLwTPUFZ9GjqoCFjxNvODwfUV
DDa1vmBFuHeFjWattsuQiloqiZjoQdQTJSDajQHwrmB4NVuv8yL7ka/LjrumG5EixXFlRTHczNn3
wjlfksSrMIIFzDCCBLSgAwIBAgIOHFAAAQAChUNZ8fMuzSYwDQYJKoZIhvcNAQEFBQAwdjELMAkG
A1UEBhMCREUxHDAaBgNVBAoTE1RDIFRydXN0Q2VudGVyIEdtYkgxIjAgBgNVBAsTGVRDIFRydXN0
Q2VudGVyIENsYXNzIDIgQ0ExJTAjBgNVBAMTHFRDIFRydXN0Q2VudGVyIENsYXNzIDIgQ0EgSUkw
HhcNMDkxMTAzMTQwODI2WhcNMjUxMjMxMjE1OTU5WjB8MQswCQYDVQQGEwJERTEcMBoGA1UEChMT
VEMgVHJ1c3RDZW50ZXIgR21iSDElMCMGA1UECxMcVEMgVHJ1c3RDZW50ZXIgQ2xhc3MgMiBMMSBD
QTEoMCYGA1UEAxMfVEMgVHJ1c3RDZW50ZXIgQ2xhc3MgMiBMMSBDQSBYSTCCASIwDQYJKoZIhvcN
AQEBBQADggEPADCCAQoCggEBAL0XRvSZBlfJtKmVowy0ffFdXC9Z2fLelDo6rs838pdU71hjZGdg
HUMO2ZbPZDNNHM3+yLRTnSx/8mjDl/+PFEEmcp5zwt1Gyvl0JKf1DIFBwfI3YrXyotJB+lOyI6+b
2wSb7mQ1crAykWCZVQzG6cmIl/mjaQ7lD8r364owqCFAkCK+vq4KpUvrkBOpcKbVQ77vb/XxlO6x
Huu5g6BCv82Ld5ag2DiWG/GDVJdhUsd+pf10Nmaz1pkXBlFCquU0o/N6YWBLEs0343IPku0QfTr2
Um05fQzv1b+P7PBCHZaI74UfheLTAEfCEhvrq+7mxj6V6F/j91Kcox9AFOJUMsUCAwEAAaOCAlAw
ggJMMIGVBggrBgEFBQcBAQSBiDCBhTBPBggrBgEFBQcwAoZDaHR0cDovL3d3dy50cnVzdGNlbnRl
ci5kZS9jZXJ0c2VydmljZXMvY2FjZXJ0cy90Y19jbGFzc18yX2NhX0lJLmNydDAyBggrBgEFBQcw
AYYmaHR0cDovL29jc3AudGNjbGFzczItSUkudHJ1c3RjZW50ZXIuZGUwHwYDVR0jBBgwFoAU46tU
TICh21ZDt5FKy/OCehNcCKswEgYDVR0TAQH/BAgwBgEB/wIBADBSBgNVHSAESzBJMAYGBFUdIAAw
PwYJKoIUACwBAQECMDIwMAYIKwYBBQUHAgEWJGh0dHA6Ly93d3cudHJ1c3RjZW50ZXIuZGUvZ3Vp
ZGVsaW5lczAOBgNVHQ8BAf8EBAMCAQYwHQYDVR0OBBYEFGazxpH5ts2yX5o3VkYM4mvVsXy0MIH5
BgNVHR8EgfEwge4wgeuggeiggeWGQWh0dHA6Ly9jcmwudGNjbGFzczItaWkudHJ1c3RjZW50ZXIu
ZGUvY3JsL3YyL3RjX2NsYXNzXzJfY2FfSUkuY3JshoGfbGRhcDovL3d3dy50cnVzdGNlbnRlci5k
ZS9DTj1UQyUyMFRydXN0Q2VudGVyJTIwQ2xhc3MlMjAyJTIwQ0ElMjBJSSxPPVRDJTIwVHJ1c3RD
ZW50ZXIlMjBHbWJILE9VPXJvb3RjZXJ0cyxEQz10cnVzdGNlbnRlcixEQz1kZT9jZXJ0aWZpY2F0
ZVJldm9jYXRpb25MaXN0P2Jhc2U/MA0GCSqGSIb3DQEBBQUAA4IBAQBsijTFDpWDTsnIlhTVBXkr
39sbIxz9XbRl55PPJ/igktuJ40JMNzxywDcDDaXG8RwQpkOnwAbYCsNh+d+7OWuCorjdZm3TCFXl
ERGx0YPgg/nnfzMvihDifVz/hfR2jp1b4Wc+6b3UHrwKwubmnOH7/K8xoq311F9E7wysFCjPPXSQ
OpSZoAhP+C9vbntQLdXANsKD1brJ35xiVrK4o+I6MJwOO2YyXhIEPFMMmHV8vLwVoEwV8j0wwzUd
UlPAyRgMhFY7uG0uR2Wy6DoqC7GEx4b22o02o6z4+keA4NAo8VuPonqM8lD+xGV6dcjsg7dyHMUh
6dHA31apMxOAm4j+MYIEFzCCBBMCAQEwgY4wfDELMAkGA1UEBhMCREUxHDAaBgNVBAoTE1RDIFRy
dXN0Q2VudGVyIEdtYkgxJTAjBgNVBAsTHFRDIFRydXN0Q2VudGVyIENsYXNzIDIgTDEgQ0ExKDAm
BgNVBAMTH1RDIFRydXN0Q2VudGVyIENsYXNzIDIgTDEgQ0EgWEkCDkhgAAEAAuKjJahZrkwrMAkG
BSsOAwIaBQCgggJdMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTEx
MDYyMzEzNDY0M1owIwYJKoZIhvcNAQkEMRYEFBT2FmjRpamP5HjyAHhuaiRJhQYTMIGfBgkrBgEE
AYI3EAQxgZEwgY4wfDELMAkGA1UEBhMCREUxHDAaBgNVBAoTE1RDIFRydXN0Q2VudGVyIEdtYkgx
JTAjBgNVBAsTHFRDIFRydXN0Q2VudGVyIENsYXNzIDIgTDEgQ0ExKDAmBgNVBAMTH1RDIFRydXN0
Q2VudGVyIENsYXNzIDIgTDEgQ0EgWEkCDkhgAAEAAuKjJahZrkwrMIGhBgsqhkiG9w0BCRACCzGB
kaCBjjB8MQswCQYDVQQGEwJERTEcMBoGA1UEChMTVEMgVHJ1c3RDZW50ZXIgR21iSDElMCMGA1UE
CxMcVEMgVHJ1c3RDZW50ZXIgQ2xhc3MgMiBMMSBDQTEoMCYGA1UEAxMfVEMgVHJ1c3RDZW50ZXIg
Q2xhc3MgMiBMMSBDQSBYSQIOSGAAAQAC4qMlqFmuTCswgbcGCSqGSIb3DQEJDzGBqTCBpjALBglg
hkgBZQMEASowCwYJYIZIAWUDBAEWMAoGCCqGSIb3DQMHMAsGCWCGSAFlAwQBAjAOBggqhkiG9w0D
AgICAIAwBwYFKw4DAgcwDQYIKoZIhvcNAwICAUAwDQYIKoZIhvcNAwICASgwBwYFKw4DAhowCwYJ
YIZIAWUDBAIDMAsGCWCGSAFlAwQCAjALBglghkgBZQMEAgEwCgYIKoZIhvcNAgUwDQYJKoZIhvcN
AQEBBQAEggEAIMvpFl7kCWtYYi8pufQe8EeocfzvAMU5/410ycT6WEfVlcFCmXA9TaejIqO5YJYv
odS8lU7qLAuvQc51i+zCBpRtsJ2YLpJRPa2I9wEHDirp9nDxrIEQmIB2EIucHPogpamWUfBdec8B
s0LLn/C9XY+P0krEY4rCasB5AUjdySEBKkGsd4C5hf/KqsUKJG4rixsO+I49GLFJwAkkmVxCGDGj
KA0AnklKEEE3TtKdC90tRB2RfsiLdR7Y0tfE+DFnQbWa1wkN4mG4uWaeJNME9lqRgH2VrDbUnpSW
Fd5qsMGUURziHlhmMAKrIHqCGxqd3QM3vBLGWWuyXqCnnpCVWAAAAAAAAA==

------=_NextPart_000_0010_01CC318A.75C78680--

From java-user-return-50170-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun 23 14:19:22 2011
Return-Path: <java-user-return-50170-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 65383416C
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 23 Jun 2011 14:19:22 +0000 (UTC)
Received: (qmail 25386 invoked by uid 500); 23 Jun 2011 14:19:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25316 invoked by uid 500); 23 Jun 2011 14:19:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25308 invoked by uid 99); 23 Jun 2011 14:19:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2011 14:19:19 +0000
X-ASF-Spam-Status: No, hits=3.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of zhoucheng2008@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2011 14:19:12 +0000
Received: by vws7 with SMTP id 7so2095531vws.35
        for <java-user@lucene.apache.org>; Thu, 23 Jun 2011 07:18:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=npWznBiaZzmd0KrrSD589e7P658R3tlaEhvE4mBZtd8=;
        b=s5y9KBwt2f0RJ2T1d1Tkgib5vS5Xbpt/tl1DJoynW4K7xhS0iElhFM7nZLjP7iNGlF
         QugpgHI51l9G5cPxmfPiWuyhiIJCzDGEonYJcLSW/dBzYp+gKgU7lTYzrK1nohj4hqwN
         bTMfXBrSQy+YO6tFwd8oqfJaEEoJD0H87eEz8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=bZUW0faSoa7h5UyRC0t2S5DbUX3ZKwJLYF1upTLzu1uMNndie7C2peGR2wcl1aFNli
         eibH5dDLLFA786GsD/1F7d4Vm9pdI7M7vnLapsq9QuWFf5yRIPIK3uZ7UwTVOT0lEfyh
         i4Rbp+r1Lhot1zQpdx/TbqUi8Cx02utLrel7k=
MIME-Version: 1.0
Received: by 10.52.37.129 with SMTP id y1mr2789925vdj.199.1308838731329; Thu,
 23 Jun 2011 07:18:51 -0700 (PDT)
Received: by 10.52.112.5 with HTTP; Thu, 23 Jun 2011 07:18:51 -0700 (PDT)
Date: Thu, 23 Jun 2011 22:18:51 +0800
Message-ID: <BANLkTimWVc2TASOOerwN12grE=V7HngqOg@mail.gmail.com>
Subject: Search multiple directories simultaneously
From: Cheng <zhoucheng2008@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=bcaec51a80d8a630ac04a661c385
X-Virus-Checked: Checked by ClamAV on apache.org

--bcaec51a80d8a630ac04a661c385
Content-Type: text/plain; charset=ISO-8859-1

Hi,

I have multiple indexed folders (or directories), each holding indexing
files for specific purposes. I want to do a search over these folders (or
directories) in a same query.

Is it possible?

Thanks

--bcaec51a80d8a630ac04a661c385--

From java-user-return-50171-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun 23 15:47:22 2011
Return-Path: <java-user-return-50171-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id ECF7244BD
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 23 Jun 2011 15:47:21 +0000 (UTC)
Received: (qmail 83325 invoked by uid 500); 23 Jun 2011 15:47:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83277 invoked by uid 500); 23 Jun 2011 15:47:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83269 invoked by uid 99); 23 Jun 2011 15:47:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2011 15:47:19 +0000
X-ASF-Spam-Status: No, hits=2.3 required=5.0
	tests=FREEMAIL_FROM,RFC_ABUSE_POST,SPF_SOFTFAIL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: softfail (athena.apache.org: transitioning domain of ajdabholkar@hotmail.com does not designate 216.139.236.26 as permitted sender)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2011 15:47:14 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <ajdabholkar@hotmail.com>)
	id 1QZm7J-0004cz-KL
	for java-user@lucene.apache.org; Thu, 23 Jun 2011 08:46:53 -0700
Date: Thu, 23 Jun 2011 08:46:53 -0700 (PDT)
From: abhayd <ajdabholkar@hotmail.com>
To: java-user@lucene.apache.org
Message-ID: <1308844013621-3100367.post@n3.nabble.com>
Subject: SEVERE: org.apache.solr.common.SolrException: Error loading class
 'solr.KeywordMarkerFilterFactory'
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

hi 

we upgraded to solr 1.4. We are getting error 
SEVERE: org.apache.solr.common.SolrException: Error loading class
'solr.KeywordMarkerFilterFactory'
        at
org.apache.solr.core.SolrResourceLoader.findClass(SolrResourceLoader.java:375)
        at
org.apache.solr.core.SolrResourceLoader.newInstance(SolrResourceLoader.java:390)
        at
org.apache.solr.util.plugin.AbstractPluginLoader.create(AbstractPluginLoader.java:84)
        at
org.apache.solr.util.plugin.AbstractPluginLoader.load(AbstractPluginLoader.java:141)
        at
org.apache.solr.schema.IndexSchema.readAnalyzer(IndexSchema.java:835)
        at
org.apache.solr.schema.IndexSchema.access$100(IndexSchema.java:58)
   ...

Which jar file this class is located in?

--
View this message in context: http://lucene.472066.n3.nabble.com/SEVERE-org-apache-solr-common-SolrException-Error-loading-class-solr-KeywordMarkerFilterFactory-tp3100367p3100367.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50172-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun 23 17:04:41 2011
Return-Path: <java-user-return-50172-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E2C964FD7
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 23 Jun 2011 17:04:40 +0000 (UTC)
Received: (qmail 39020 invoked by uid 500); 23 Jun 2011 17:04:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38949 invoked by uid 500); 23 Jun 2011 17:04:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38941 invoked by uid 99); 23 Jun 2011 17:04:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2011 17:04:37 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2011 17:04:31 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 770B645EAB2
	for <java-user@lucene.apache.org>; Thu, 23 Jun 2011 19:04:09 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id g9QpwsXAvUdp for <java-user@lucene.apache.org>;
	Thu, 23 Jun 2011 19:03:54 +0200 (CEST)
Received: from VEGA (port-92-196-16-218.dynamic.qsc.de [92.196.16.218])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id EE3DB45EAB1
	for <java-user@lucene.apache.org>; Thu, 23 Jun 2011 19:03:53 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <BANLkTimWVc2TASOOerwN12grE=V7HngqOg@mail.gmail.com>
In-Reply-To: <BANLkTimWVc2TASOOerwN12grE=V7HngqOg@mail.gmail.com>
Subject: RE: Search multiple directories simultaneously
Date: Thu, 23 Jun 2011 19:04:11 +0200
Message-ID: <009001cc31c7$92c74e90$b855ebb0$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQHCXV9xT9pQskrfH5cjz7a0vfQ0npTe02dg
Content-Language: de

IndexReader index1 = IndexReader.open(dir1);
IndexReader index2 = IndexReader.open(dir2);
IndexReader index3 = IndexReader.open(dir3);
...
IndexReader all = new MultiReader(index1, index2, index3,...);
IndexSearcher searcher = new IndexSearcher(all);

...search your indexes...

all.close();
index1.close();
index2.close();
index3.close();
...


-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Cheng [mailto:zhoucheng2008@gmail.com]
> Sent: Thursday, June 23, 2011 4:19 PM
> To: java-user@lucene.apache.org
> Subject: Search multiple directories simultaneously
> 
> Hi,
> 
> I have multiple indexed folders (or directories), each holding indexing
files
> for specific purposes. I want to do a search over these folders (or
> directories) in a same query.
> 
> Is it possible?
> 
> Thanks


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50173-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun 23 17:05:36 2011
Return-Path: <java-user-return-50173-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 06DC94215
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 23 Jun 2011 17:05:36 +0000 (UTC)
Received: (qmail 47329 invoked by uid 500); 23 Jun 2011 17:05:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47284 invoked by uid 500); 23 Jun 2011 17:05:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47273 invoked by uid 99); 23 Jun 2011 17:05:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2011 17:05:33 +0000
X-ASF-Spam-Status: No, hits=2.0 required=5.0
	tests=SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2011 17:05:26 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 1B53E45EAC4
	for <java-user@lucene.apache.org>; Thu, 23 Jun 2011 19:05:06 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id ZL+e8Ia+9ccm for <java-user@lucene.apache.org>;
	Thu, 23 Jun 2011 19:05:00 +0200 (CEST)
Received: from VEGA (port-92-196-16-218.dynamic.qsc.de [92.196.16.218])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 690AF45EAB2
	for <java-user@lucene.apache.org>; Thu, 23 Jun 2011 19:04:55 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <1308844013621-3100367.post@n3.nabble.com>
In-Reply-To: <1308844013621-3100367.post@n3.nabble.com>
Subject: RE: SEVERE: org.apache.solr.common.SolrException: Error loading class 'solr.KeywordMarkerFilterFactory'
Date: Thu, 23 Jun 2011 19:05:07 +0200
Message-ID: <009601cc31c7$ba6780a0$2f3681e0$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQKPImf2510lSTBMkujtEIZJdAFXy5NFSmmw
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

Solr 1.4 does not have this class nor it references it. Are you sure you not
have added some Lucene/Solr 3.1 or 3.2 JAR files somewhere in your
classpath?

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: abhayd [mailto:ajdabholkar@hotmail.com]
> Sent: Thursday, June 23, 2011 5:47 PM
> To: java-user@lucene.apache.org
> Subject: SEVERE: org.apache.solr.common.SolrException: Error loading class
> 'solr.KeywordMarkerFilterFactory'
> 
> hi
> 
> we upgraded to solr 1.4. We are getting error
> SEVERE: org.apache.solr.common.SolrException: Error loading class
> 'solr.KeywordMarkerFilterFactory'
>         at
> org.apache.solr.core.SolrResourceLoader.findClass(SolrResourceLoader.java:
> 375)
>         at
> org.apache.solr.core.SolrResourceLoader.newInstance(SolrResourceLoader.j
> ava:390)
>         at
>
org.apache.solr.util.plugin.AbstractPluginLoader.create(AbstractPluginLoader
> .java:84)
>         at
>
org.apache.solr.util.plugin.AbstractPluginLoader.load(AbstractPluginLoader.j
> ava:141)
>         at
> org.apache.solr.schema.IndexSchema.readAnalyzer(IndexSchema.java:835)
>         at
> org.apache.solr.schema.IndexSchema.access$100(IndexSchema.java:58)
>    ...
> 
> Which jar file this class is located in?
> 
> --
> View this message in context: http://lucene.472066.n3.nabble.com/SEVERE-
> org-apache-solr-common-SolrException-Error-loading-class-solr-
> KeywordMarkerFilterFactory-tp3100367p3100367.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50174-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun 23 18:23:52 2011
Return-Path: <java-user-return-50174-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CD68F46D3
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 23 Jun 2011 18:23:52 +0000 (UTC)
Received: (qmail 95089 invoked by uid 500); 23 Jun 2011 18:23:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95007 invoked by uid 500); 23 Jun 2011 18:23:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94999 invoked by uid 99); 23 Jun 2011 18:23:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2011 18:23:50 +0000
X-ASF-Spam-Status: No, hits=3.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of zhoucheng2008@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2011 18:23:43 +0000
Received: by vws7 with SMTP id 7so2394706vws.35
        for <java-user@lucene.apache.org>; Thu, 23 Jun 2011 11:23:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=/QbBc4LAr+dPvIV0z8Knx6jdwZDApkHP7Yk62bNE4SI=;
        b=PwNIxHScGV3wrOsNQBZSVaxrYGOpuRHy8tfRcxH3/4+fsX1OzDr2DS4D07fLpH3dxP
         DxqX2XEhpvR7lEUsnC8T3lBlfsetH3u6IQvSHihoqhiLgWhTjJO+tMM6NsWUNQIvg0G3
         EJ5VUS5yXOttKPPCPutLvX3aJEVaNKcFTk0do=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=ejhDqCDkp46uCWBzVnYVEnM4jXKCBPjBOn67W7T7K/hAfjBF0+QEcsb+LGauCvvUr3
         XTU8Zal5+EazB//Aa2X5QxuYaInGbiXDwggybRtiZnyDUskLKYlOEseLsOn7Tz3c6Y8d
         +wnV+HJkMxPHfDC/Sw3NF3qx5J6Q9i8CVqqBg=
MIME-Version: 1.0
Received: by 10.52.110.133 with SMTP id ia5mr3227642vdb.239.1308853401596;
 Thu, 23 Jun 2011 11:23:21 -0700 (PDT)
Received: by 10.52.112.5 with HTTP; Thu, 23 Jun 2011 11:23:21 -0700 (PDT)
In-Reply-To: <009001cc31c7$92c74e90$b855ebb0$@thetaphi.de>
References: <BANLkTimWVc2TASOOerwN12grE=V7HngqOg@mail.gmail.com>
	<009001cc31c7$92c74e90$b855ebb0$@thetaphi.de>
Date: Fri, 24 Jun 2011 02:23:21 +0800
Message-ID: <BANLkTimHGqY1924iC6dt2W_QNPxU1B4oHA@mail.gmail.com>
Subject: Re: Search multiple directories simultaneously
From: Cheng <zhoucheng2008@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=bcaec54861aa10b34c04a6652e0e
X-Virus-Checked: Checked by ClamAV on apache.org

--bcaec54861aa10b34c04a6652e0e
Content-Type: text/plain; charset=ISO-8859-1

thanks man. very condense and easy to follow.

can i ask how the multiple search will impact the performance? i have
probably 50GB data in each of the 10-20 folders.

On Fri, Jun 24, 2011 at 1:04 AM, Uwe Schindler <uwe@thetaphi.de> wrote:

> IndexReader index1 = IndexReader.open(dir1);
> IndexReader index2 = IndexReader.open(dir2);
> IndexReader index3 = IndexReader.open(dir3);
> ...
> IndexReader all = new MultiReader(index1, index2, index3,...);
> IndexSearcher searcher = new IndexSearcher(all);
>
> ...search your indexes...
>
> all.close();
> index1.close();
> index2.close();
> index3.close();
> ...
>
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
> > -----Original Message-----
> > From: Cheng [mailto:zhoucheng2008@gmail.com]
> > Sent: Thursday, June 23, 2011 4:19 PM
> > To: java-user@lucene.apache.org
> > Subject: Search multiple directories simultaneously
> >
> > Hi,
> >
> > I have multiple indexed folders (or directories), each holding indexing
> files
> > for specific purposes. I want to do a search over these folders (or
> > directories) in a same query.
> >
> > Is it possible?
> >
> > Thanks
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--bcaec54861aa10b34c04a6652e0e--

From java-user-return-50175-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun 23 20:07:32 2011
Return-Path: <java-user-return-50175-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DACFD4F67
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 23 Jun 2011 20:07:31 +0000 (UTC)
Received: (qmail 82613 invoked by uid 500); 23 Jun 2011 20:07:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82446 invoked by uid 500); 23 Jun 2011 20:07:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82438 invoked by uid 99); 23 Jun 2011 20:07:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2011 20:07:29 +0000
X-ASF-Spam-Status: No, hits=4.2 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,RFC_ABUSE_POST,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 216.139.236.26 is neither permitted nor denied by domain of aengle1429@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2011 20:07:24 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <aengle1429@gmail.com>)
	id 1QZqB5-0001wY-U6
	for java-user@lucene.apache.org; Thu, 23 Jun 2011 13:07:03 -0700
Date: Thu, 23 Jun 2011 13:07:03 -0700 (PDT)
From: aengle1429 <aengle1429@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1308859623926-3101450.post@n3.nabble.com>
Subject: Computing document frequencies for specific queries in Lucene
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Hello, I currently am trying to get the following results... let's say I have
3 XML files that I parse using SAX:
<?xml version="1.0" encoding="UTF-8"?>
<person>
   <name>bob bob bob
   </name>
   <name>3m
   </name>
   <height>3m
   </height>
   <height>bob
   </height>
</person>

<?xml version="1.0" encoding="UTF-8"?>
<person>
   <name>bob
   </name>
   <name>bob
   </name>
   <name>bob bob
   </name>	
   <height>3m
   </height>
   <height>bob
   </height>
</person>

<?xml version="1.0" encoding="UTF-8"?>
<person>
   <name>bob
   </name>
   <name>bob
   </name>
   <height>bob
   </height>
</person>

I am currently indexing these under separate fields for the duplicate <name>
tag. so I have in total 3 /person/name fields: /person/name0, /person/name1,
/person/name2.

I am wanting to compute how many times, in a given unique field
(/person/name) a query appears. Let's say the query is "bob"

I want to see, for total times appearing: 9
I want to also see how many times it appeared in all documents): 6

My current solution is to call TermDocs for the first question and iterate
through counting the docFreq() of the given field(/person/namex) (there are
two loops then).

This gets very slow, and ideally, I would like to index them all under
/person/name, but I still really need these answers. Does anyone have any
ideas? I can offer more clarification and some source code, but my current
method is very slow (I need to index ~4million files and run compute these
quantities--very slow when you have 150 fields of
/person/actor/movie_acted_in and 4 million documents...

Thank you very much!

--
View this message in context: http://lucene.472066.n3.nabble.com/Computing-document-frequencies-for-specific-queries-in-Lucene-tp3101450p3101450.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50176-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun 23 20:42:27 2011
Return-Path: <java-user-return-50176-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 323714767
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 23 Jun 2011 20:42:27 +0000 (UTC)
Received: (qmail 43752 invoked by uid 500); 23 Jun 2011 20:42:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43665 invoked by uid 500); 23 Jun 2011 20:42:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43657 invoked by uid 99); 23 Jun 2011 20:42:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2011 20:42:24 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of timeck@gmail.com designates 209.85.210.48 as permitted sender)
Received: from [209.85.210.48] (HELO mail-pz0-f48.google.com) (209.85.210.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2011 20:42:18 +0000
Received: by pzk10 with SMTP id 10so1863470pzk.35
        for <java-user@lucene.apache.org>; Thu, 23 Jun 2011 13:41:57 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:from:to:references:in-reply-to:subject:date
         :message-id:mime-version:content-type:content-transfer-encoding
         :x-mailer:thread-index:content-language;
        bh=Kgwd9fwzETNmBVZhlyzXO1Wndhpn/TkzZbVbSMfV380=;
        b=OJqZ3hNQ+5wiWlt0PUpiWcffTzK1KvDOjra1One4G+oNPtdtc/cQO7lgI5aeqtFFyx
         IGw0Ta1zBGlywxgyVbRuG8GtOkDxYoMgturzk7bELlg8eJZwmDjqyqU5pndCALSfDXCk
         Y+rDZqerTtcKENbGovbOdH2qVqj3pzdSADEaI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:references:in-reply-to:subject:date:message-id:mime-version
         :content-type:content-transfer-encoding:x-mailer:thread-index
         :content-language;
        b=sACGIWCqXODDnHILQ6bsfTnTcGw/XHU2VW/VhlnvuMpMglcVDSAH0spzuKYsR4DojR
         GiUJNgzQsBC7U6bN0appLFQGeEQAJGSrB+Lnaf/X9+dO0sOm6Ui6ikjfC5QiM00Y7lw2
         +8JeiiJoBLz3M5NJApjdc1axP75UTvvHPEbA4=
Received: by 10.68.4.5 with SMTP id g5mr1428710pbg.115.1308861709996;
        Thu, 23 Jun 2011 13:41:49 -0700 (PDT)
Received: from kermit ([12.116.106.202])
        by mx.google.com with ESMTPS id d1sm1477925pbj.56.2011.06.23.13.41.47
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 23 Jun 2011 13:41:48 -0700 (PDT)
From: "Tim Eck" <timeck@gmail.com>
To: <java-user@lucene.apache.org>
References: <02c401cc3121$2ea3cbb0$8beb6310$@com> <BANLkTi=F6TiwdqNoO0ptojR4VwRxvUAYBg@mail.gmail.com>
In-Reply-To: <BANLkTi=F6TiwdqNoO0ptojR4VwRxvUAYBg@mail.gmail.com>
Subject: RE: field sorted searches with unbounded hit count
Date: Thu, 23 Jun 2011 13:41:38 -0700
Message-ID: <024301cc31e5$f480df20$dd829d60$@com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcwxjikBVrtZw8ElS1yT1s2nzOrAzwAVo9rQ
Content-Language: en-us

Thanks for the idea Ian. I still need to think about it, but the race =
between running the total count search and then the sorted search =
worries me. I have very pretty specific visibility guarantees I must =
provide on this data (with respect to concurrent updates). It'd be a =
bummer to have to block all concurrent updates to get these two searches =
to operate on an unchanging index.=20

I don't want to accuse anyone of bad code but always preallocating a =
potentially large array in org.apache.lucene.util.PriorityQueue seems =
non-ideal for the search I want to run. I'll have to dig into some more =
lucene code :-)=20

FYI: TotalHitCountCollector looks like it was added in 3.1.0



-----Original Message-----
From: Ian Lea [mailto:ian.lea@gmail.com]=20
Sent: Thursday, June 23, 2011 3:12 AM
To: java-user@lucene.apache.org
Subject: Re: field sorted searches with unbounded hit count

One possibility would be to execute the search first just to get the
number of hits - see TotalHitCountCollector in recent versions of
lucene, not sure when it was added - and use the hit count from that
as the max docs to return.  The counting only search would typically
be very quick, certainly much quicker than sorting a large number of
hits.


--
Ian.


On Wed, Jun 22, 2011 at 10:13 PM, Tim Eck <teck@terracottatech.com> =
wrote:
> For the searches I want to run on my index I want to return all =
matching
> documents (as opposed to N top hits).
>
>
>
> My first na=C4=BCve approach was just to use Searcher.search(query, =
filter,
> Integer.MAX_VALUE, sort) =E2=80=93 that is, pass Integer.MAX_VALUE for =
the number
> of possible docs to return. That unfortunately seems to have huge heap
> requirements in org.apache.lucene.util.PriorityQueue.heap as the max =
docID
> in my index gets large. Multiply that per search heap requirement by a
> handful of concurrent threads and I OOME my server.
>
>
>
> When I don=E2=80=99t need to do any sorting it pretty easy to just use =
my own
> collector to gather the doc ids.  Of course depending on the number of
> hits I might still need a good amount of heap but at least it a factor =
of
> the number of matches (not the index size).
>
>
>
> I=E2=80=99m struggling to figure out how to do the same search but =
with sorting.
> I=E2=80=99m looking for a method like Searcher.search(Query, Filter, =
Sort,
> Collector), but perhaps that isn=E2=80=99t a reasonable thing to have, =
please
> enlighten me if so :-)
>
>
>
> I=E2=80=99m using 3.0.3 lucene-core at the moment but I don=E2=80=99t =
see that this aspect
> is any different in 3.2.0.
>
>
>
> Hopefully this made sense, any help you can provide is appreciated.
>
>
>
>
>
>
>
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50177-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun 23 21:27:39 2011
Return-Path: <java-user-return-50177-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C9AD145D5
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 23 Jun 2011 21:27:39 +0000 (UTC)
Received: (qmail 22187 invoked by uid 500); 23 Jun 2011 21:27:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22092 invoked by uid 500); 23 Jun 2011 21:27:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22084 invoked by uid 99); 23 Jun 2011 21:27:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2011 21:27:37 +0000
X-ASF-Spam-Status: No, hits=1.8 required=5.0
	tests=FREEMAIL_FROM,HTML_FONT_FACE_BAD,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of nilesh.vijay@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2011 21:27:31 +0000
Received: by qyk32 with SMTP id 32so3377677qyk.14
        for <java-user@lucene.apache.org>; Thu, 23 Jun 2011 14:27:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:from:date:message-id:subject:to
         :content-type;
        bh=ueKHm1y58ozB0sxznLdQYzqMyxFPJ675KtOpPXws9iY=;
        b=Mrq591TFKzeHKOelZuUKNEUNYiDNAbJhtn5Ax5PMHCNxiiRLRlink8QGfFNkWy1D98
         PVQGBCFf0EO35BmFiiYb0wGvpd1SEOT8RvhWRi61QEJ7yq2aUf7yFHfErLzrI8R/2Rj+
         ZiQm6U1Y6WdFLKTkkkQXVPdsGvEJIbwZxx01s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=P7jUU2yAJCCQA1qE2L/np2bv0qnfVwMvGqPb+seGjmWMY7TCOjSNB5N7vHVwyvpjl8
         N/rDtteA0PMOMxHAWGACr7GWJnmvN3hPSePrRwrua6sb1Lyh5Vmewmn+se+XVEN6Dhsw
         +kGnBzXDk82nLsBWDP1m98wIhGzMwnnuhaS5I=
Received: by 10.229.63.69 with SMTP id a5mr1992877qci.94.1308864430146; Thu,
 23 Jun 2011 14:27:10 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.249.12 with HTTP; Thu, 23 Jun 2011 14:26:30 -0700 (PDT)
From: Nilesh Vijaywargiay <nilesh.vijay@gmail.com>
Date: Thu, 23 Jun 2011 14:26:30 -0700
Message-ID: <BANLkTikdmw30gDuHerpwzyC8v6y5kNccfA@mail.gmail.com>
Subject: spaces in the field name
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6509fa26b05d804a667bf6d

--0016e6509fa26b05d804a667bf6d
Content-Type: text/plain; charset=ISO-8859-1

 I have a situation where the field name consists of spaces.
So a query like
*short text: value*

doesn't return any results as the query structure internally would be
*defaultField:short
text:value*
*
*
*Any work around for including spaces in your field name?*
*
*
*Nilesh*
*
*

--0016e6509fa26b05d804a667bf6d--

From java-user-return-50178-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun 23 21:35:36 2011
Return-Path: <java-user-return-50178-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0E6234DD9
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 23 Jun 2011 21:35:36 +0000 (UTC)
Received: (qmail 38546 invoked by uid 500); 23 Jun 2011 21:35:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38512 invoked by uid 500); 23 Jun 2011 21:35:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38504 invoked by uid 99); 23 Jun 2011 21:35:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2011 21:35:33 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED
X-Spam-Check-By: apache.org
Received-SPF: unknown amxa:www.healthline.coma:mail.healthline.coma:mail.hl.locala:64-142-35-98.customer.sonic.neta:sfc-admin1.healthline.commx:mail.healthline.cominclude:sonic.netgoogle-site-verification=woajk2ajkumsxth8c9cy5eeslo2f_mbubuk7ywagj64~all (nike.apache.org: encountered unrecognized mechanism during SPF processing of domain of SPal@healthline.com)
Received: from [64.18.2.179] (HELO exprod7og113.obsmtp.com) (64.18.2.179)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 23 Jun 2011 21:35:26 +0000
Received: from sfo-mx2.healthline.com ([208.106.108.13]) by exprod7ob113.postini.com ([64.18.6.12]) with SMTP
	ID DSNKTgOxh3wOtZV9nAsZa4bHnAU77Csq1BC9@postini.com; Thu, 23 Jun 2011 14:35:05 PDT
Received: from [10.1.1.36] (10.1.1.36) by sfo-mx2.healthline.com (10.1.1.38)
 with Microsoft SMTP Server id 8.3.159.2; Thu, 23 Jun 2011 14:11:42 -0700
Subject: Re: Suggestion: make some more TokenFilters KeywordAttribute aware
From: Sujit Pal <spal@healthline.com>
Reply-To: spal@healthline.com
To: <simon.willnauer@gmail.com>
CC: <java-user@lucene.apache.org>
In-Reply-To: <BANLkTin9M6TMt3S0cwFHyosuLXfe+BLiqg@mail.gmail.com>
References: <1308768803.2713.39.camel@lysdexic.healthline.com>
	 <BANLkTin9M6TMt3S0cwFHyosuLXfe+BLiqg@mail.gmail.com>
Content-Type: text/plain
Organization: Healthline Networks Inc.
Date: Thu, 23 Jun 2011 14:11:42 -0700
Message-ID: <1308863502.10674.60.camel@lysdexic.healthline.com>
MIME-Version: 1.0
X-Mailer: Evolution 2.12.3 (2.12.3-8.el5_2.3) 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Simon, I have opened a JIRA and attached a patch. I have verified
that I haven't broken anything, and I have used these patched files to
test in my local application and have verified that they work.

https://issues.apache.org/jira/browse/LUCENE-3236 

-sujit

On Thu, 2011-06-23 at 08:21 +0200, Simon Willnauer wrote:
> On Wed, Jun 22, 2011 at 8:53 PM, Sujit Pal <spal@healthline.com> wrote:
> > Hello,
> >
> > I am currently in need of a LowerCaseFilter and StopFilter that will
> > recognize KeywordAttribute, similar to the way PorterStemFilter
> > currently does (on trunk). Specifically, in case the term is a
> > KeywordAttribute.isKeyword(), it should not lowercase and remove
> > respectively.
> >
> > This can be achieved without breaking backward compatibility by
> > introducing an extra constructor which takes a boolean ignoreKeyword
> > parameter.
> >
> > If this sounds like this would be a good idea, please let me know, I can
> > open a JIRA and attach a patch. Currently, I have created my own
> > versions of KeywordAwareXXX filters that does pretty much the same
> > thing.
> 
> I think you should open an issue and take it from there. I can't
> promise this is going to be added but its worth to try!
> 
> please go ahead and open an issue.
> 
> simon
> >
> > Thanks
> > Sujit
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50179-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jun 24 00:38:23 2011
Return-Path: <java-user-return-50179-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 258834BC0
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 24 Jun 2011 00:38:23 +0000 (UTC)
Received: (qmail 92908 invoked by uid 500); 24 Jun 2011 00:38:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92833 invoked by uid 500); 24 Jun 2011 00:38:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92825 invoked by uid 99); 24 Jun 2011 00:38:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2011 00:38:20 +0000
X-ASF-Spam-Status: No, hits=2.3 required=5.0
	tests=FREEMAIL_FROM,RFC_ABUSE_POST,SPF_SOFTFAIL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: softfail (athena.apache.org: transitioning domain of ajdabholkar@hotmail.com does not designate 216.139.236.26 as permitted sender)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2011 00:38:15 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <ajdabholkar@hotmail.com>)
	id 1QZuPC-0006Zm-IW
	for java-user@lucene.apache.org; Thu, 23 Jun 2011 17:37:54 -0700
Date: Thu, 23 Jun 2011 17:37:54 -0700 (PDT)
From: abhayd <ajdabholkar@hotmail.com>
To: java-user@lucene.apache.org
Message-ID: <1308875874564-3102387.post@n3.nabble.com>
In-Reply-To: <009601cc31c7$ba6780a0$2f3681e0$@thetaphi.de>
References: <1308844013621-3100367.post@n3.nabble.com> <009601cc31c7$ba6780a0$2f3681e0$@thetaphi.de>
Subject: RE: SEVERE: org.apache.solr.common.SolrException: Error loading
 class 'solr.KeywordMarkerFilterFactory'
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

thanks.

Our schema has 
   <fieldType name="text" class="solr.TextField" positionIncrementGap="100">
      <analyzer type="index">
        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
        
        <filter class="solr.StopFilterFactory" ignoreCase="true"
words="stopwords.txt"/>
        <filter class="solr.WordDelimiterFilterFactory"
generateWordParts="1" generateNumberParts="1" catenateWords="1"
catenateNumbers="1" catenateAll="0" splitOnCaseChange="1"/>
        <filter class="solr.LowerCaseFilterFactory"/>
        <filter class="solr.KeywordMarkerFilterFactory"
protected="protwords.txt"/>
        <filter class="solr.PorterStemFilterFactory"/>
        <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
      </analyzer>
      <analyzer type="query">
        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
        <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt"
ignoreCase="true" expand="true"/>
        <filter class="solr.StopFilterFactory" ignoreCase="true"
words="stopwords.txt"/>
        <filter class="solr.WordDelimiterFilterFactory"
generateWordParts="1" generateNumberParts="1" catenateWords="0"
catenateNumbers="0" catenateAll="0" splitOnCaseChange="1"/>
        <filter class="solr.LowerCaseFilterFactory"/>
        <filter class="solr.KeywordMarkerFilterFactory"
protected="protwords.txt"/>
        <filter class="solr.PorterStemFilterFactory"/>
        <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
      </analyzer>
    </fieldType>

After removing         <filter class="solr.KeywordMarkerFilterFactory"
protected="protwords.txt"/>
things worked fine. May be we used 3.1 schema defination and that might have
caused this issue

--
View this message in context: http://lucene.472066.n3.nabble.com/SEVERE-org-apache-solr-common-SolrException-Error-loading-class-solr-KeywordMarkerFilterFactory-tp3100367p3102387.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50180-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jun 24 01:21:32 2011
Return-Path: <java-user-return-50180-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8DC994348
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 24 Jun 2011 01:21:32 +0000 (UTC)
Received: (qmail 20986 invoked by uid 500); 24 Jun 2011 01:21:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20918 invoked by uid 500); 24 Jun 2011 01:21:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20910 invoked by uid 99); 24 Jun 2011 01:21:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2011 01:21:30 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,HTML_OBFUSCATE_05_10,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dotsid@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2011 01:21:20 +0000
Received: by fxm7 with SMTP id 7so2750400fxm.35
        for <java-user@lucene.apache.org>; Thu, 23 Jun 2011 18:21:00 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:from:content-type:subject:date:message-id:to
         :mime-version:x-mailer;
        bh=vdUsMXnY6BKgRN62UYJ+aoj3l57YOB49DCW4EiPJe9U=;
        b=pLMuGQVTHHPuTn9UZ/2Dbwyd9AZi22oCxn3DHGXj2eD9RbkURQjW73uAjNXZk08dkc
         tth5DNjs74JBww3PQd3iUsvBCfAreYbYd9FIQKLNA/UMbk/796Xi79xRn04Nt+I4d7zW
         SqOCBZCnuj/HXdl5zCu4RFlJnfpWXzFsP7o9A=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:content-type:subject:date:message-id:to:mime-version:x-mailer;
        b=qKVT98v7zTim6tlWBhGhIRn0J8/9BzweJs/SUHQKTd6MY0nGIyqFrEyCSvP/UEos9N
         qbgLWudajxAcoKO+7aIAujxCTRw1ZG4K9jSfX2WBBVLMy0yy4BGtXqy66BlEgLOqrt96
         9VPFmA1ZSx88hDnwbdrG0AaT8ALtWCwbrOqDA=
Received: by 10.223.6.11 with SMTP id 11mr3576362fax.92.1308878460236;
        Thu, 23 Jun 2011 18:21:00 -0700 (PDT)
Received: from [172.16.31.9] (gw.farpost.ru [80.92.161.1])
        by mx.google.com with ESMTPS id p3sm708232fan.45.2011.06.23.18.20.57
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 23 Jun 2011 18:20:59 -0700 (PDT)
From: Denis Bazhenov <dotsid@gmail.com>
Content-Type: multipart/alternative; boundary=Apple-Mail-3--141227675
Subject: Does {Filter}ing is faster than {Query}ing in Lucene?
Date: Fri, 24 Jun 2011 12:20:53 +1100
Message-Id: <48CF5D43-E75A-4398-9A55-C89ABE0060A7@gmail.com>
To: java-user@lucene.apache.org
Mime-Version: 1.0 (Apple Message framework v1084)
X-Mailer: Apple Mail (2.1084)
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-3--141227675
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=us-ascii

While reading "Lucene in Action 2nd edition" I came across the =
description of Filter classes which are could be used for result =
filtering in Lucene. Lucene has a lot of filters repeating Query =
classes. For example, NumericRangeQuery and NumericRangeFilter.

The book says that NRF does exactly the same as NRQ but without document =
scoring. Does this means that if I do not need scoring or sort documents =
by document field value I should preferFiltering over Querying from =
performance point of view?

---
Denis Bazhenov <dotsid@gmail.com>






--Apple-Mail-3--141227675--

From java-user-return-50181-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jun 24 01:33:35 2011
Return-Path: <java-user-return-50181-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9139E45E9
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 24 Jun 2011 01:33:35 +0000 (UTC)
Received: (qmail 36798 invoked by uid 500); 24 Jun 2011 01:33:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36759 invoked by uid 500); 24 Jun 2011 01:33:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36751 invoked by uid 99); 24 Jun 2011 01:33:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2011 01:33:32 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dotsid@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2011 01:33:24 +0000
Received: by fxm7 with SMTP id 7so2756306fxm.35
        for <java-user@lucene.apache.org>; Thu, 23 Jun 2011 18:33:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:from:content-type:content-transfer-encoding
         :subject:date:message-id:to:mime-version:x-mailer;
        bh=ECu5I0bs0IILUzD1yk4EYIYkGFUESPKSdvKqY+NsVCM=;
        b=KlDLg54FKcu3fjeaEkkf8AUw6Qf7l2PavupfUL23QnGOvHXN7bO2P+AulzcoW1yl9m
         Vo0AuFGlPwrMnOypsZC7PgInk4Cyqyyc5wuC0tK7VXiHKlv7eUcECxGEdPCWBGJwtge3
         M9lsMS3h4hj30QffGIntysY5bUStBEF9CCNDs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:content-type:content-transfer-encoding:subject:date:message-id
         :to:mime-version:x-mailer;
        b=G9lzS57l3QpkFaNx4NKIVw9Av7nE+uUfM8vgGCw10XmMN+46DxI5GhDRhcXzmOt+wa
         Ic/24KuG8perPlwjAJ5j/TnfIgQigRyltKgvhBhsKO4LlS8UF78v6/PpV5ibNvpk0ypv
         avOsPI+zFMdQTeBCFlXJMnjmm6sfNEFRyiqMk=
Received: by 10.223.75.138 with SMTP id y10mr3568929faj.36.1308879183204;
        Thu, 23 Jun 2011 18:33:03 -0700 (PDT)
Received: from [172.16.31.9] (gw.farpost.ru [80.92.161.1])
        by mx.google.com with ESMTPS id q14sm1329417faa.27.2011.06.23.18.33.01
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 23 Jun 2011 18:33:02 -0700 (PDT)
From: Denis Bazhenov <dotsid@gmail.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable
Subject: Lucene sort performance roots?
Date: Fri, 24 Jun 2011 12:32:58 +1100
Message-Id: <283DDE30-DA91-4019-A328-7052BC65E9BB@gmail.com>
To: java-user@lucene.apache.org
Mime-Version: 1.0 (Apple Message framework v1084)
X-Mailer: Apple Mail (2.1084)

Well, maybe it's a bit controversial question, but anyway...

Lucene is a great toolkit for search applications. And it's so fast in =
most of cases. I think I am understand why it's faster than relational =
databases for information retrieval. For example, Lucene use very =
efficient index than allows to retrieve posting list in constant time =
and do intersect between them.

But there is one aspect which I couldn't understand for a long time now. =
In our test cases Lucene perform sorting blazingly fast. This one is =
freaking me out. I have no explanation why Lucene should do sorting =
faster than relational database. Let me put it another way -- I have no =
explanation why SQL databases should not do it as fast as Lucene.

Is there any explanation for that?
---
Denis Bazhenov <dotsid@gmail.com>






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50182-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jun 24 05:09:37 2011
Return-Path: <java-user-return-50182-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0DF2F630F
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 24 Jun 2011 05:09:37 +0000 (UTC)
Received: (qmail 68099 invoked by uid 500); 24 Jun 2011 05:09:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64960 invoked by uid 500); 24 Jun 2011 05:09:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64921 invoked by uid 99); 24 Jun 2011 05:09:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2011 05:09:04 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.218.48 as permitted sender)
Received: from [209.85.218.48] (HELO mail-yi0-f48.google.com) (209.85.218.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2011 05:08:56 +0000
Received: by yic24 with SMTP id 24so1531816yic.35
        for <java-user@lucene.apache.org>; Thu, 23 Jun 2011 22:08:35 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:reply-to:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=OuJGlO2iYVa03T/0i555LhU2NBTxpqu4NkvlGESLoZo=;
        b=vTMVHQQHd8AaIVKV40b5H4irJAbj/BGFNkozPrchHU5xUdXB5KFqa/XuLcPv3BYpKo
         DcUud3luuKN/kjjA7UFlmJ/e7pV0pPtU5y57hbq2RQT4OOkr8wrYenLmmtHjwVK0R0F9
         1ithk0ZEQ9BssffIDTUcnUudLI0bB52VKU4CI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type;
        b=b3lQHd+kjDJP5Xjac2F+ts9X55dUDdHzIuPvJEsMiLCIm2+nFofumG/mHgl2uLtyhf
         O8ja//F98hxhd5KenMq07fFruI5HVpI3oY4s/4abhkJoHD9YQzcuiZWWBwgsoqt3bH7M
         iUsfUwnBn6VLVp1MIvNN0Yu8am0Rc3RzI32/k=
MIME-Version: 1.0
Received: by 10.236.116.101 with SMTP id f65mr349211yhh.32.1308892115299; Thu,
 23 Jun 2011 22:08:35 -0700 (PDT)
Received: by 10.147.178.14 with HTTP; Thu, 23 Jun 2011 22:08:35 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <1DA142C0B842D742B61E20305D79FABF131D9B9F72@TRPEX01>
References: <BANLkTim4YKpjpFuOoWN8r4m_StWfVc-gVg@mail.gmail.com>
	<1DA142C0B842D742B61E20305D79FABF1315BB8144@TRPEX01>
	<1DA142C0B842D742B61E20305D79FABF1315BB818E@TRPEX01>
	<BANLkTimpi2N5Hcub2L+-8GfM7AyjPKNu0Q@mail.gmail.com>
	<1DA142C0B842D742B61E20305D79FABF131D9B9F72@TRPEX01>
Date: Fri, 24 Jun 2011 07:08:35 +0200
Message-ID: <BANLkTi=_snGWCk+GqkL3cTJU4Xpn4G1uXc_gy6uB3jT9qym-uQ@mail.gmail.com>
Subject: Re: questions about searching lucene 3.2
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, Jun 23, 2011 at 3:46 PM, Bob Rhodes <Bob.Rhodes@trssllc.com> wrote:
> Yeah I agree that this is the issue. I did get my query to work using the
> "ClassicAnalyzer". I guess maybe I need to upgrade my indexes which will be a
> big job. Any advice here is appreciated.
> I didn't have any luck passing Version.LUCENE_24 to the StandardAnalyzer.
> There query still didn't work.
> Also, is there any downside to just continuing with the ClassicAnalyzer?

not at all... the  StandardAnalyzer has been rewritten and for
backwards compatibility reasons the "old" 2.4 version has been moved
into ClassicAnalyzer so its exactly the right thing todo. I just
wonder why the version didn't work but maybe we did that intentionally
and I simply don't remember.

simon

>
> Bob
>
> -----Original Message-----
> From: Simon Willnauer [mailto:simon.willnauer@googlemail.com]
> Sent: Thursday, June 23, 2011 2:30 AM
> To: java-user@lucene.apache.org
> Subject: Re: questions about searching lucene 3.2
>
> As far as I understand you have 2 different problems.
>
> 1. search and 2.4 index with 3.2 code using standard analyzer.
> in this case you should either reindex or pass Version.LUCENE_24 to
> the StandardAnalyzer ctor that should help here.
>
> 2. search a string with parentheses with the query parser
> you should escape you query string with QueryParser#escape before searching.
>
> maybe I am misssing something, let me know if thats the case.
>
> simon
>
> On Wed, Jun 22, 2011 at 9:46 PM, Bob Rhodes <Bob.Rhodes@trssllc.com> wrote:
>> Here is a follow-up. This is a larger example of some of the text I'm
>> searching in my index:
>> The quoted name/value pairs are in the index.
>> "
>> middleName="D", zip="1111", lastName="ADAMSON", street="00 SOME ST",
>> addAssociates="true", state="CA", city="ROCHESTER", source="SOMESOURCE",
>> person_user="TESTUSER", dob="19510210", firstName="CHARLES"
>> "
>>
>> If I use my app or Luke to search for ADAMSON I get matches when searching
>> the field above that contains the example text. I get the same results if I
>> search by the dob value 19510210 works great.
>> The field content is variable and when the field above only contains
>> phoneNumber="(904) 555-1212" there is no way for me to find this exact
>> number.
>>
>> If I use the ClassicAnalyzer this I can use this to find my number by just
>> searching "(904) 555-1212" for the number.
>>
>> I think this more clearly states my issue. Is the problem related to the
>> parens? I've tried escaping and double escaping them to no avail. Anyone
>> have any suggestions?
>>
>> In my code I've used the standard query parser as well as the
>> ComplexPhraseQueryParser.
>>
>> One other point to note. The indexes I'm searching were created with 2.1.4
>> using the StandardAnalyzer but I'm using 3.2.0 to search.
>>
>> Bob
>>
>>
>> -----Original Message-----
>> From: Bob Rhodes [mailto:Bob.Rhodes@trssllc.com]
>> Sent: Wednesday, June 22, 2011 11:56 AM
>> To: java-user@lucene.apache.org
>> Subject: questions about searching lucene 3.2
>>
>> Hi all,
>> I have some questions about searching 3.2. I have just upgraded from 2.4.1
>> to 3.2. I am using the standard analyzer to create the index and to search,
>> and one of the fields is called "querytext" and it has content like this
>> among other things: phoneNumber="(904) 555-1212". I've tried many different
>> ways to query this using the query api and the query parser and I can't find
>> the string above. It seems the analyzer tokenizes the number above as 904
>> 555 1212. The numbers I am searching with are formatted as 9045551212 and I
>> need to use that someone to find the number formatted as above. Thanks for
>> the help!
>>
>>
>> Bob
>>
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50183-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jun 24 05:16:06 2011
Return-Path: <java-user-return-50183-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 444A56627
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 24 Jun 2011 05:16:06 +0000 (UTC)
Received: (qmail 73080 invoked by uid 500); 24 Jun 2011 05:16:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72885 invoked by uid 500); 24 Jun 2011 05:15:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72877 invoked by uid 99); 24 Jun 2011 05:15:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2011 05:15:52 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.218.48 as permitted sender)
Received: from [209.85.218.48] (HELO mail-yi0-f48.google.com) (209.85.218.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2011 05:15:47 +0000
Received: by yic24 with SMTP id 24so1533737yic.35
        for <java-user@lucene.apache.org>; Thu, 23 Jun 2011 22:15:26 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:reply-to:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=IvadjjCrDk5YpP17Wb/0kKJx7NS3DPWKWRwb5+c1sfU=;
        b=V+5qqI84k3Qj5GjaTQi2UxOFC9LmY1RXry6H+QAZ9X704Gmr3AaqzeTXYok/Idok93
         MoY38sUgCBffkgFvVjaNULNBW7RljqZKthuHY6ADQHn4JFza/bOIFKvKTw1TzKlzz+cS
         JHQr50o8mgEYgOHgh34Ki4p5nqwwQY/V6yLWQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        b=HEXd57X4xXts6sR0wdC/Tyyi4ec6NaQJhnKUbTDl7C/m9axJJD1dmnjz+0fjj1uZgq
         DCkm2WRnxjkYbsebvi6D8DKgg7Ls6o27VY1o8cH/GzU/X4vdjbG42BcdfWksQUq+fj3Y
         JH8qnz+9Fbp41Z8XGzLkedv0NAIPlun6q8lfo=
MIME-Version: 1.0
Received: by 10.236.116.101 with SMTP id f65mr357093yhh.32.1308892526506; Thu,
 23 Jun 2011 22:15:26 -0700 (PDT)
Received: by 10.147.178.14 with HTTP; Thu, 23 Jun 2011 22:15:25 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <024301cc31e5$f480df20$dd829d60$@com>
References: <02c401cc3121$2ea3cbb0$8beb6310$@com>
	<BANLkTi=F6TiwdqNoO0ptojR4VwRxvUAYBg@mail.gmail.com>
	<024301cc31e5$f480df20$dd829d60$@com>
Date: Fri, 24 Jun 2011 07:15:25 +0200
Message-ID: <BANLkTin6B1Ge64DqArO4MK25+1ePT0WV69aWdpzzFxftYRvAcg@mail.gmail.com>
Subject: Re: field sorted searches with unbounded hit count
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

On Thu, Jun 23, 2011 at 10:41 PM, Tim Eck <timeck@gmail.com> wrote:
> Thanks for the idea Ian. I still need to think about it, but the race bet=
ween running the total count search and then the sorted search worries me. =
I have very pretty specific visibility guarantees I must provide on this da=
ta (with respect to concurrent updates). It'd be a bummer to have to block =
all concurrent updates to get these two searches to operate on an unchangin=
g index.

if you use the same IndexReader / Searcher for both queries nothing
changes. How frequently do you open your index?
>
> I don't want to accuse anyone of bad code but always preallocating a pote=
ntially large array in org.apache.lucene.util.PriorityQueue seems non-ideal=
 for the search I want to run. I'll have to dig into some more lucene code =
:-)

the common usecase for this is a fixed size queue (top k retrieval)
and allocating memory takes time so this is a very specialized class
for exactly this. You can still write your own collector to make this
more efficient for you.

simon
>
> FYI: TotalHitCountCollector looks like it was added in 3.1.0
>
>
>
> -----Original Message-----
> From: Ian Lea [mailto:ian.lea@gmail.com]
> Sent: Thursday, June 23, 2011 3:12 AM
> To: java-user@lucene.apache.org
> Subject: Re: field sorted searches with unbounded hit count
>
> One possibility would be to execute the search first just to get the
> number of hits - see TotalHitCountCollector in recent versions of
> lucene, not sure when it was added - and use the hit count from that
> as the max docs to return. =C2=A0The counting only search would typically
> be very quick, certainly much quicker than sorting a large number of
> hits.
>
>
> --
> Ian.
>
>
> On Wed, Jun 22, 2011 at 10:13 PM, Tim Eck <teck@terracottatech.com> wrote=
:
>> For the searches I want to run on my index I want to return all matching
>> documents (as opposed to N top hits).
>>
>>
>>
>> My first na=C4=BCve approach was just to use Searcher.search(query, filt=
er,
>> Integer.MAX_VALUE, sort) =E2=80=93 that is, pass Integer.MAX_VALUE for t=
he number
>> of possible docs to return. That unfortunately seems to have huge heap
>> requirements in org.apache.lucene.util.PriorityQueue.heap as the max doc=
ID
>> in my index gets large. Multiply that per search heap requirement by a
>> handful of concurrent threads and I OOME my server.
>>
>>
>>
>> When I don=E2=80=99t need to do any sorting it pretty easy to just use m=
y own
>> collector to gather the doc ids. =C2=A0Of course depending on the number=
 of
>> hits I might still need a good amount of heap but at least it a factor o=
f
>> the number of matches (not the index size).
>>
>>
>>
>> I=E2=80=99m struggling to figure out how to do the same search but with =
sorting.
>> I=E2=80=99m looking for a method like Searcher.search(Query, Filter, Sor=
t,
>> Collector), but perhaps that isn=E2=80=99t a reasonable thing to have, p=
lease
>> enlighten me if so :-)
>>
>>
>>
>> I=E2=80=99m using 3.0.3 lucene-core at the moment but I don=E2=80=99t se=
e that this aspect
>> is any different in 3.2.0.
>>
>>
>>
>> Hopefully this made sense, any help you can provide is appreciated.
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50184-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jun 24 05:53:18 2011
Return-Path: <java-user-return-50184-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 033546761
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 24 Jun 2011 05:53:18 +0000 (UTC)
Received: (qmail 99385 invoked by uid 500); 24 Jun 2011 05:53:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98978 invoked by uid 500); 24 Jun 2011 05:53:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98970 invoked by uid 99); 24 Jun 2011 05:53:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2011 05:53:08 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dawid.weiss@gmail.com designates 74.125.83.48 as permitted sender)
Received: from [74.125.83.48] (HELO mail-gw0-f48.google.com) (74.125.83.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2011 05:53:00 +0000
Received: by gwj22 with SMTP id 22so1534766gwj.35
        for <java-user@lucene.apache.org>; Thu, 23 Jun 2011 22:52:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=2BfMeiOOYkRIX/kzDbkGJ/f3TxomPdARF4WTtuQ3Duk=;
        b=RnRNPdAnjF2m2momI/ld6KN/SQAx8ZEW1Vj7bNyMmnC9mVT8/a7YWyG0tNYSKzj0RP
         ifQ3USnPk6pgWRWyqgwAErwEIr01EZKQhl6PtflwMUk2W951qBQymtjT8u4NTp6rOTpL
         FqqbXK990/t7omFU5948FfBRTNFl9eSAPRhKc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=hwBP4R3ogCfHKzgb6DfAfVBw0VNrm05LydvfdD8fD+5HKRiDa+zjJPS3tX9I5rsjyf
         OITHrL3Cb+wR/Qd7g09Cvxp77LGIGOuVHxSPQflHx0YCn9oc9iu9nSN50oSDdamkePjk
         4H4J7TBm8jNE/oMuM1yQRvZRIs7s31n7jNijY=
Received: by 10.90.111.7 with SMTP id j7mr3227092agc.83.1308894758062; Thu, 23
 Jun 2011 22:52:38 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.90.109.2 with HTTP; Thu, 23 Jun 2011 22:52:18 -0700 (PDT)
In-Reply-To: <283DDE30-DA91-4019-A328-7052BC65E9BB@gmail.com>
References: <283DDE30-DA91-4019-A328-7052BC65E9BB@gmail.com>
From: Dawid Weiss <dawid.weiss@gmail.com>
Date: Fri, 24 Jun 2011 07:52:18 +0200
Message-ID: <BANLkTi=KH3V5wCd7GpgrD6cdK_xX9UmAjw@mail.gmail.com>
Subject: Re: Lucene sort performance roots?
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Can you describe the kind of sorting you're doing? Maybe the data is
already sorted (and in RAM) and you're only getting it out?

Dawid

On Fri, Jun 24, 2011 at 3:32 AM, Denis Bazhenov <dotsid@gmail.com> wrote:
> Well, maybe it's a bit controversial question, but anyway...
>
> Lucene is a great toolkit for search applications. And it's so fast in mo=
st of cases. I think I am understand why it's faster than relational databa=
ses for information retrieval. For example, Lucene use very efficient index=
 than allows to retrieve posting list in constant time and do intersect bet=
ween them.
>
> But there is one aspect which I couldn't understand for a long time now. =
In our test cases Lucene perform sorting blazingly fast. This one is freaki=
ng me out. I have no explanation why Lucene should do sorting faster than r=
elational database. Let me put it another way -- I have no explanation why =
SQL databases should not do it as fast as Lucene.
>
> Is there any explanation for that?
> ---
> Denis Bazhenov <dotsid@gmail.com>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50185-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jun 24 06:05:13 2011
Return-Path: <java-user-return-50185-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4DED36D8B
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 24 Jun 2011 06:05:13 +0000 (UTC)
Received: (qmail 4973 invoked by uid 500); 24 Jun 2011 06:05:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4253 invoked by uid 500); 24 Jun 2011 06:05:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4226 invoked by uid 99); 24 Jun 2011 06:05:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2011 06:05:03 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dotsid@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2011 06:04:55 +0000
Received: by fxm7 with SMTP id 7so2874367fxm.35
        for <java-user@lucene.apache.org>; Thu, 23 Jun 2011 23:04:34 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:content-type:mime-version:subject:from
         :in-reply-to:date:content-transfer-encoding:message-id:references:to
         :x-mailer;
        bh=2Bq/Qlwwdesr9ddNbCUA8N1aDy5NPuz2WvEyYali3PI=;
        b=qjGq7ftPVMcNKFfgW6BhO1B5OmMQQrEgaM0AlYBLyMrGXjlgRxvc1+Vib9ci8lXSqJ
         wLUrqHYy6ZZaARUJEBuN8mAdibubrQj6b2/Xvr68/QQHA3QjvHd9XS3pLIwxd+96w3ZT
         qJpsuZZl7NmvGpT/uo4mqbpd93Lg7G4oR7U5I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        b=n0yjyRTRHUi0QagTwym/LXHMIyp0yBnSMqzgONDDDxRpmkgcm2tSWOw9PJekXmEu40
         rerVv01mzaWHgDlO67VLuorYzyULm5A/WbbCqJBr/dpSP/Blv8ZxUlOGIVSVM3ah2Bxu
         mNWIGdYHp+EnMV43Mc2+9Tz9vni9Ze12fnTqU=
Received: by 10.223.85.155 with SMTP id o27mr3866683fal.109.1308895474513;
        Thu, 23 Jun 2011 23:04:34 -0700 (PDT)
Received: from [172.16.31.9] (gw.farpost.ru [80.92.161.1])
        by mx.google.com with ESMTPS id g7sm1419882fac.39.2011.06.23.23.04.32
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 23 Jun 2011 23:04:33 -0700 (PDT)
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1084)
Subject: Re: Lucene sort performance roots?
From: Denis Bazhenov <dotsid@gmail.com>
In-Reply-To: <BANLkTi=KH3V5wCd7GpgrD6cdK_xX9UmAjw@mail.gmail.com>
Date: Fri, 24 Jun 2011 17:04:28 +1100
Content-Transfer-Encoding: quoted-printable
Message-Id: <9F2C35C0-D92A-4612-B334-AD979A9F9057@gmail.com>
References: <283DDE30-DA91-4019-A328-7052BC65E9BB@gmail.com> <BANLkTi=KH3V5wCd7GpgrD6cdK_xX9UmAjw@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1084)

Yes, sorry. I should explain it.

What we are using is sorting by field value. We have around 1M documents =
which we are searching and returns them to the user in reverse order by =
creation date. Creation date is indexed in separated field in lucene of =
course.

On Jun 24, 2011, at 4:52 PM, Dawid Weiss wrote:

> Can you describe the kind of sorting you're doing? Maybe the data is
> already sorted (and in RAM) and you're only getting it out?
>=20
> Dawid
>=20
> On Fri, Jun 24, 2011 at 3:32 AM, Denis Bazhenov <dotsid@gmail.com> =
wrote:
>> Well, maybe it's a bit controversial question, but anyway...
>>=20
>> Lucene is a great toolkit for search applications. And it's so fast =
in most of cases. I think I am understand why it's faster than =
relational databases for information retrieval. For example, Lucene use =
very efficient index than allows to retrieve posting list in constant =
time and do intersect between them.
>>=20
>> But there is one aspect which I couldn't understand for a long time =
now. In our test cases Lucene perform sorting blazingly fast. This one =
is freaking me out. I have no explanation why Lucene should do sorting =
faster than relational database. Let me put it another way -- I have no =
explanation why SQL databases should not do it as fast as Lucene.
>>=20
>> Is there any explanation for that?
>> ---
>> Denis Bazhenov <dotsid@gmail.com>
>>=20
>>=20
>>=20
>>=20
>>=20
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>=20
>>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20

---
Denis Bazhenov <dotsid@gmail.com>






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50186-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jun 24 06:39:56 2011
Return-Path: <java-user-return-50186-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 013006DEF
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 24 Jun 2011 06:39:56 +0000 (UTC)
Received: (qmail 45422 invoked by uid 500); 24 Jun 2011 06:39:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44694 invoked by uid 500); 24 Jun 2011 06:39:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44684 invoked by uid 99); 24 Jun 2011 06:39:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2011 06:39:39 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [130.225.24.68] (HELO sbexch03.sb.statsbiblioteket.dk) (130.225.24.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2011 06:39:30 +0000
Received: from [130.225.25.23] (130.225.25.23) by
 sbexch03.sb.statsbiblioteket.dk (130.225.24.68) with Microsoft SMTP Server id
 8.3.159.2; Fri, 24 Jun 2011 08:39:10 +0200
Subject: RE: field sorted searches with unbounded hit count
From: Toke Eskildsen <te@statsbiblioteket.dk>
Reply-To: te@statsbiblioteket.dk
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <024301cc31e5$f480df20$dd829d60$@com>
References: <02c401cc3121$2ea3cbb0$8beb6310$@com>
	 <BANLkTi=F6TiwdqNoO0ptojR4VwRxvUAYBg@mail.gmail.com>
	 <024301cc31e5$f480df20$dd829d60$@com>
Content-Type: text/plain; charset="UTF-8"
Organization: State and University Library, Denmark
Date: Fri, 24 Jun 2011 08:39:10 +0200
Message-ID: <1308897550.7458.31.camel@te-prime>
MIME-Version: 1.0
X-Mailer: Evolution 2.32.2 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, 2011-06-23 at 22:41 +0200, Tim Eck wrote:
>  I don't want to accuse anyone of bad code but always preallocating a 
>  potentially large array in org.apache.lucene.util.PriorityQueue seems
>  non-ideal for the search I want to run.

The current implementation of IndexSearcher uses threaded search where
each slice collects docID's independently, then adds them to a shared
PriorityQueue one at a time. With this architecture, making the
PriorityQueue size-optimized would either require multiple resizings
(more GC activity, slightly more processing) or that all search-threads
finishes before constructing the queue (longer response time).

The current implementation works really well when requesting small
result sets. It is not so fine for larger sets (partly because of memory
allocation, partly because the standard heap-based priority queue has
horrible locality, making it perform rather bad when it cannot be
contained in the cache) and - as you have observed - really bad for the
full document set. Finding a better general solution that covers all
three cases is a real challenge, a very interesting one I might add.
Of course one can always special case, but using a Collector seems like
the way to go there.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50187-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jun 24 09:15:27 2011
Return-Path: <java-user-return-50187-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4ADC36357
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 24 Jun 2011 09:15:27 +0000 (UTC)
Received: (qmail 35319 invoked by uid 500); 24 Jun 2011 09:15:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34605 invoked by uid 500); 24 Jun 2011 09:15:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34595 invoked by uid 99); 24 Jun 2011 09:15:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2011 09:15:18 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.210.176 as permitted sender)
Received: from [209.85.210.176] (HELO mail-iy0-f176.google.com) (209.85.210.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2011 09:15:11 +0000
Received: by iyi20 with SMTP id 20so3554849iyi.35
        for <java-user@lucene.apache.org>; Fri, 24 Jun 2011 02:14:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=nPLF6CH5Oira9gMhuOWAhImKdjbqwTHWZYxplhw7mR4=;
        b=Qaim1btnEbJ/1Cip5M5hRO5wpLWYB3sA28w2CAZRuqNld9YiKBbsXjxIZoB7jPWw4Q
         sDhVgFpAyZIKOdz0Uy3t0tVKHd9aTXGzy3BYdADKDZQaKJso/eee4gFf/VLcEVKYgM5e
         53BmXOPHFJw/YpRiV6+RSidSF5oOThZhAO2g4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=E9/XfFWndAOOXLno1A2KJAeABigbJySzbT4WAnphlA9tOWE3u7rxvd0aVc90HjdlOQ
         vuII89A70C67MY19TEpO0MVnqSsCCcuck3c5HXI5JCSQc7UrSm65LczMlWiRZo1hQybL
         ybh+B2vO+N1Qy1Nf2UWAvcWY6V+QNzNHtzpG8=
Received: by 10.231.120.92 with SMTP id c28mr2640544ibr.46.1308906889120; Fri,
 24 Jun 2011 02:14:49 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.200.131 with HTTP; Fri, 24 Jun 2011 02:14:29 -0700 (PDT)
In-Reply-To: <BANLkTikdmw30gDuHerpwzyC8v6y5kNccfA@mail.gmail.com>
References: <BANLkTikdmw30gDuHerpwzyC8v6y5kNccfA@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Fri, 24 Jun 2011 10:14:29 +0100
Message-ID: <BANLkTimFB7bzE-EndRHu5CuQeYb8uhfxvw@mail.gmail.com>
Subject: Re: spaces in the field name
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

As far as I'm aware spaces are allowed in field names and a quick test
appears to confirm that.

Feel free to disagree (I'm often wrong) with more detail - or proof.


--
Ian.


On Thu, Jun 23, 2011 at 10:26 PM, Nilesh Vijaywargiay
<nilesh.vijay@gmail.com> wrote:
> =A0I have a situation where the field name consists of spaces.
> So a query like
> *short text: value*
>
> doesn't return any results as the query structure internally would be
> *defaultField:short
> text:value*
> *
> *
> *Any work around for including spaces in your field name?*
> *
> *
> *Nilesh*
> *
> *
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50188-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jun 24 09:25:41 2011
Return-Path: <java-user-return-50188-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 58789696B
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 24 Jun 2011 09:25:41 +0000 (UTC)
Received: (qmail 45895 invoked by uid 500); 24 Jun 2011 09:25:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45732 invoked by uid 500); 24 Jun 2011 09:25:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45697 invoked by uid 99); 24 Jun 2011 09:25:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2011 09:25:35 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.210.176 as permitted sender)
Received: from [209.85.210.176] (HELO mail-iy0-f176.google.com) (209.85.210.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2011 09:25:29 +0000
Received: by iyi20 with SMTP id 20so3562799iyi.35
        for <java-user@lucene.apache.org>; Fri, 24 Jun 2011 02:25:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=juWYyba31jQAoLpGSKXBHt+CVU9pHVfJzLaU2dpAjtU=;
        b=BXWtdTN+4dV98vonXGYsyZ7evkjrGrJ8vF6V1jRXvZZ7fND49Yq/R+j8kXexIi1pN1
         lA0g8Nrj9WW05EQqwe5UF9U46GX+1Z2+XgfAso47aLbhWtXYxKtomShW3qjJRK7/qFBs
         NgO8z39hr04459EvD2QE2uVRU5NzoLHKRQwaE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=aK51KEqBQSDntH+LWY1rG4H/74hZjUhW/ke+81TeSXWZ5O8Y5NuycVrQsPNT6lHekW
         e3nfnG2rwE9UGS6646F89v857jIUnbEgBU2VYgQOFLMtyYtDaVjG1a+Ypkvm6qHWpwCc
         E3CChewzeCLY1FLUn2U4CRO+wgluj6fi4bwPk=
Received: by 10.231.120.92 with SMTP id c28mr2648593ibr.46.1308907509088; Fri,
 24 Jun 2011 02:25:09 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.200.131 with HTTP; Fri, 24 Jun 2011 02:24:49 -0700 (PDT)
In-Reply-To: <48CF5D43-E75A-4398-9A55-C89ABE0060A7@gmail.com>
References: <48CF5D43-E75A-4398-9A55-C89ABE0060A7@gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Fri, 24 Jun 2011 10:24:49 +0100
Message-ID: <BANLkTi=9U8SCP0_8rQ49c78tE63xSBHk_Q@mail.gmail.com>
Subject: Re: Does {Filter}ing is faster than {Query}ing in Lucene?
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Generalisation is risky, particularly wrt performance, but I'd say
yes, particularly if you can cache and reuse the filter e.g. with
CachingWrapperFilter.  See
http://wiki.apache.org/lucene-java/FilteringOptions.  Not very up to
date but I'd expect the conclusions to stand.


--
Ian.


On Fri, Jun 24, 2011 at 2:20 AM, Denis Bazhenov <dotsid@gmail.com> wrote:
> While reading "Lucene in Action 2nd edition" I came across the descriptio=
n of Filter classes which are could be used for result filtering in Lucene.=
 Lucene has a lot of filters repeating Query classes. For example, NumericR=
angeQuery and NumericRangeFilter.
>
> The book says that NRF does exactly the same as NRQ but without document =
scoring. Does this means that if I do not need scoring or sort documents by=
 document field value I should preferFiltering over Querying from performan=
ce point of view?
>
> ---
> Denis Bazhenov <dotsid@gmail.com>
>
>
>
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50189-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jun 24 09:50:05 2011
Return-Path: <java-user-return-50189-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 05DE767A8
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 24 Jun 2011 09:50:05 +0000 (UTC)
Received: (qmail 65515 invoked by uid 500); 24 Jun 2011 09:50:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64802 invoked by uid 500); 24 Jun 2011 09:49:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64794 invoked by uid 99); 24 Jun 2011 09:49:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2011 09:49:58 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dawid.weiss@gmail.com designates 209.85.161.176 as permitted sender)
Received: from [209.85.161.176] (HELO mail-gx0-f176.google.com) (209.85.161.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2011 09:49:51 +0000
Received: by gxk7 with SMTP id 7so1556320gxk.35
        for <java-user@lucene.apache.org>; Fri, 24 Jun 2011 02:49:30 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=y0S4lUhcquu0frDR4fJsMySVeY5kiPJzpN8pLrwxC48=;
        b=RvcFR2eE1rL+ERKXnRCfEmteIM+jGHfLreZdUMhQZdQaelGzO0OAEiJ2VCVY2DM7We
         ouHtjU+bGaFxqO2fCI4TVaab++ZolM5YNa2hgCPVYXCZ2s/EnqDGtaciMP9zDmvj4hy4
         cJWucReeBonac5X0JBxTqHgRfrAUQHNLEYpvY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=dU8LVxf7VoU0UHqu9F8ODPt7nn92AmeJ6CN/9LaEzeEdwx1qEVASu0AGuvs7TbN28N
         eVIvlD0Bfb2srFyDJqgKIJPX7P2u2YTm3JuvjMAlXPFm/x4eovP45xmetacwAD5mhg3v
         QQRUdZhy6cJKGnkrFjPwDHrGMY30sRLesPj1E=
Received: by 10.90.250.8 with SMTP id x8mr3403354agh.164.1308908970149; Fri,
 24 Jun 2011 02:49:30 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.90.109.2 with HTTP; Fri, 24 Jun 2011 02:49:10 -0700 (PDT)
In-Reply-To: <9F2C35C0-D92A-4612-B334-AD979A9F9057@gmail.com>
References: <283DDE30-DA91-4019-A328-7052BC65E9BB@gmail.com>
 <BANLkTi=KH3V5wCd7GpgrD6cdK_xX9UmAjw@mail.gmail.com> <9F2C35C0-D92A-4612-B334-AD979A9F9057@gmail.com>
From: Dawid Weiss <dawid.weiss@gmail.com>
Date: Fri, 24 Jun 2011 11:49:10 +0200
Message-ID: <BANLkTi=FK4d357M9KA+rDu+Hp9vMnBYNMQ@mail.gmail.com>
Subject: Re: Lucene sort performance roots?
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

My guess is that it's an advantage of doing the sort in-memory and
reusing caches. Hard to tell without the snippet of code that you're
actually using.

Dawid

On Fri, Jun 24, 2011 at 8:04 AM, Denis Bazhenov <dotsid@gmail.com> wrote:
> Yes, sorry. I should explain it.
>
> What we are using is sorting by field value. We have around 1M documents =
which we are searching and returns them to the user in reverse order by cre=
ation date. Creation date is indexed in separated field in lucene of course=
.
>
> On Jun 24, 2011, at 4:52 PM, Dawid Weiss wrote:
>
>> Can you describe the kind of sorting you're doing? Maybe the data is
>> already sorted (and in RAM) and you're only getting it out?
>>
>> Dawid
>>
>> On Fri, Jun 24, 2011 at 3:32 AM, Denis Bazhenov <dotsid@gmail.com> wrote=
:
>>> Well, maybe it's a bit controversial question, but anyway...
>>>
>>> Lucene is a great toolkit for search applications. And it's so fast in =
most of cases. I think I am understand why it's faster than relational data=
bases for information retrieval. For example, Lucene use very efficient ind=
ex than allows to retrieve posting list in constant time and do intersect b=
etween them.
>>>
>>> But there is one aspect which I couldn't understand for a long time now=
. In our test cases Lucene perform sorting blazingly fast. This one is frea=
king me out. I have no explanation why Lucene should do sorting faster than=
 relational database. Let me put it another way -- I have no explanation wh=
y SQL databases should not do it as fast as Lucene.
>>>
>>> Is there any explanation for that?
>>> ---
>>> Denis Bazhenov <dotsid@gmail.com>
>>>
>>>
>>>
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> ---
> Denis Bazhenov <dotsid@gmail.com>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50190-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jun 24 13:58:30 2011
Return-Path: <java-user-return-50190-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0F2A46FA3
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 24 Jun 2011 13:58:30 +0000 (UTC)
Received: (qmail 41606 invoked by uid 500); 24 Jun 2011 13:58:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41487 invoked by uid 500); 24 Jun 2011 13:58:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41479 invoked by uid 99); 24 Jun 2011 13:58:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2011 13:58:26 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2011 13:58:17 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 1FD7845ED2F
	for <java-user@lucene.apache.org>; Fri, 24 Jun 2011 15:57:57 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 8F0-fT0kZtaw for <java-user@lucene.apache.org>;
	Fri, 24 Jun 2011 15:57:41 +0200 (CEST)
Received: from VEGA (port-92-196-16-218.dynamic.qsc.de [92.196.16.218])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 90A4A45ECA2
	for <java-user@lucene.apache.org>; Fri, 24 Jun 2011 15:57:41 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <283DDE30-DA91-4019-A328-7052BC65E9BB@gmail.com>
In-Reply-To: <283DDE30-DA91-4019-A328-7052BC65E9BB@gmail.com>
Subject: RE: Lucene sort performance roots?
Date: Fri, 24 Jun 2011 15:57:59 +0200
Message-ID: <008801cc3276$ba7f0cc0$2f7d2640$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQHFRQ6RURrT1yTRTrxG5uuGoy+CnpTaXhXw
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

 
> Lucene is a great toolkit for search applications. And it's so fast in
most of
> cases. I think I am understand why it's faster than relational databases
for
> information retrieval. For example, Lucene use very efficient index than
> allows to retrieve posting list in constant time and do intersect between
> them.
> 
> But there is one aspect which I couldn't understand for a long time now.
In
> our test cases Lucene perform sorting blazingly fast. This one is freaking
me
> out. I have no explanation why Lucene should do sorting faster than
> relational database. Let me put it another way -- I have no explanation
why
> SQL databases should not do it as fast as Lucene.

This is easy to explain by seeing the main difference between RDBMS and
Lucene:

RDBMS do sorting (because of transactions and other reasons) after
retrieving the data. Especially for lots of results this can take lots of
time. RDBMS are also slower on retrieving the data, as they are always
retrieving *all* data (unless you use limit clauses) from the underlying
store, to be at least also able to sort them. All this data (sorted or
unsorted) is then transferred to the application (with cursors that may be
optimized, but in general the result set is already in memory).

Lucene  has some differences in doing this:

Lucene never returns all stored fields for all documents that hit the query.
This would take lots of time and in fact Lucene would even be much slower
than RDBMS databases. The trick, that all full text search engines use, is
to never touch the actual data during query execution, you only touch the
unique term list and the posting lists. When the query executes, Lucene
simply collects all result ids from the posting lists and returns them. No
data document data is transferred or touched at all. One step further, in
general full text engines only return the most relevant documents, that are
then displayed in e.g. pages on the web (like Google).

To do this score sorting, all collected document ids are inserted into a
Priority Queue to be sorted by score. Documents with too low score will
immediately fall out of this queue if their score is not competitive.

The same applies if you manually sort: In general you only return the
beginning of the list to the user (the top-n documents), so the sorting
algorithm does the same like for scores, all ids are inserted using the
requested sort key into a priority queue and all ids, not competitive fall
out and are not touched at all. Important to know is, that in constrast to a
relational database the sort keys are completely in memory and are currently
never materialized on disk (we have now column stride fields in trunk, but
that's just a materialization as a column - relational databases need to
scan each row to sort. Some databases [like Sybase IQ] use column oriented
storage, those are also faster on sorting, as the sort keys are not stored
row-by-row, they are stored as a single column like Lucene's column-stride
fields [called DocValues, only in Lucene 4.0]).

Back to Lucene: Once the top-n document ids are collected (which also
returns the total result count, as at least all results are counted), you
have a list of those top-n document ids in the order requested. And after
that the stored fields are retrieved from the underlying index for display
only, so it fetches only the really required stored fields from the index
for the few documents in top-n.

Because of this top-n behavior, its generally slow with Lucene to scan
deeply into the result set. If you want to go on page 100 of your search
results, the priority queue must at least have a size of n=docsPerPage*100.
Because of this, most full text search engines (e.g. Google does this, too)
prevent you from going to deep into the result set, as it would get slower
and slower, because the PQ gets bigger and bigger. E.g. Google prevents you
to go as far as I know beyond page 50 or like that.

Uwe


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50191-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jun 24 14:09:11 2011
Return-Path: <java-user-return-50191-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1956666E5
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 24 Jun 2011 14:09:11 +0000 (UTC)
Received: (qmail 57948 invoked by uid 500); 24 Jun 2011 14:09:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57886 invoked by uid 500); 24 Jun 2011 14:09:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57878 invoked by uid 99); 24 Jun 2011 14:09:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2011 14:09:08 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2011 14:09:00 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 7DF0345ED92
	for <java-user@lucene.apache.org>; Fri, 24 Jun 2011 16:08:40 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id CFjyYOsk9XLf for <java-user@lucene.apache.org>;
	Fri, 24 Jun 2011 16:08:25 +0200 (CEST)
Received: from VEGA (port-92-196-16-218.dynamic.qsc.de [92.196.16.218])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id EDD4145ED54
	for <java-user@lucene.apache.org>; Fri, 24 Jun 2011 16:08:24 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <48CF5D43-E75A-4398-9A55-C89ABE0060A7@gmail.com>
In-Reply-To: <48CF5D43-E75A-4398-9A55-C89ABE0060A7@gmail.com>
Subject: RE: Does {Filter}ing is faster than {Query}ing in Lucene?
Date: Fri, 24 Jun 2011 16:08:37 +0200
Message-ID: <008901cc3278$39f2cea0$add86be0$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQKCL2DXI6GPHy9R2C3/paWsaPy62ZNgjsXA
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

If you dont cache filters, queries will be faster, as the ConjunctionScorer
in Lucene has optimizations, which are currently not used for Filters.
Filters are fine, if you cache them (e.g. if you always have the same access
restrictions for a specific user that are applied to all his queries). In
that case the Filter is only executed once and cached for all further
requests and then intersected with the query result set.

If you only want to e.g. randomly "filter" e.g. by a variable numeric range
like a bounding box in a geographic search, use queries, queries are in most
cases faster (e.g. Range Queries and similar stuff - called MultiTermQueries
- are internally also implemented by the same BitSet algorithm like the
Filter - in fact they are only Filters wrapped by a Scorer-impl). But the
Scorer that ANDs the query and your "filter" query together
(ConjunctionScorer) is generally faster than the code that applies the
filter after searching. This may some improvement possible, but in general
filters are something in Lucene that is not really needed anymore, so there
were already some approaches to make Filters and Queries the same, and
instead then be able to also cache non-scoring queries. This would make lots
of code easier.

Filters can bring a huge speed improvement with  Lucene 4.0, if they are
plugged ontop of the IndexReader to filter the documents *before* scoring,
but that's not yet implemented (see
https://issues.apache.org/jira/browse/LUCENE-3212) - I am working on it. We
may also make Filters random access (it's easy as they are bitsets), which
could improve also the after-query filtering. But I would then also make
Queries partially random access, if they could support it (like queries that
are only based on FieldCache).

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Denis Bazhenov [mailto:dotsid@gmail.com]
> Sent: Friday, June 24, 2011 3:21 AM
> To: java-user@lucene.apache.org
> Subject: Does {Filter}ing is faster than {Query}ing in Lucene?
> 
> While reading "Lucene in Action 2nd edition" I came across the description
of
> Filter classes which are could be used for result filtering in Lucene.
Lucene
> has a lot of filters repeating Query classes. For example,
NumericRangeQuery
> and NumericRangeFilter.
> 
> The book says that NRF does exactly the same as NRQ but without document
> scoring. Does this means that if I do not need scoring or sort documents
by
> document field value I should preferFiltering over Querying from
> performance point of view?
> 
> ---
> Denis Bazhenov <dotsid@gmail.com>
> 
> 
> 
> 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50192-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jun 24 16:27:54 2011
Return-Path: <java-user-return-50192-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9E4F867E8
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 24 Jun 2011 16:27:54 +0000 (UTC)
Received: (qmail 75622 invoked by uid 500); 24 Jun 2011 16:27:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75561 invoked by uid 500); 24 Jun 2011 16:27:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75553 invoked by uid 99); 24 Jun 2011 16:27:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2011 16:27:51 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of settinghead@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2011 16:27:45 +0000
Received: by wwi14 with SMTP id 14so1772373wwi.5
        for <java-user@lucene.apache.org>; Fri, 24 Jun 2011 09:27:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:sender:from:date
         :x-google-sender-auth:message-id:subject:to:content-type;
        bh=XtFpSsRnomu2U1rgsHbWAYjz8Hb7D6a3nTQu2glLoDU=;
        b=hUjdenuW3Ctw2/xBZKRMmQJ370/yUc3/IXgY/E8FhjlXVCrvBAn+cSMEG1SJNL70Mk
         +Q8capzkpjDYlC1E+XhTjS81LP0tHBxbPZ5q3vCDxQnkv3GoY1FfNARUJQt+YuWDya1m
         Veq8+YOqefENvXIwe4Jx/kxOp6N2rmZy1Sg1o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:from:date:x-google-sender-auth:message-id
         :subject:to:content-type;
        b=TIkVmrU2oUGPIlw/KRWbeKj+3JCtCoBKxfmAgYcFD/UM6mInyT5URdjlf7dKTmiG56
         JnGSkrgzsug8vY2/YlCC/UzhaUomyDdG+5mnO0IJxkKv2rSn+tWdg9oVubGogrTcAvYk
         3H764Ku39sAAdF6wXj9QGAGh6CkX1GZaYJUmo=
Received: by 10.216.16.32 with SMTP id g32mr855191weg.0.1308932844106; Fri, 24
 Jun 2011 09:27:24 -0700 (PDT)
MIME-Version: 1.0
Sender: settinghead@gmail.com
Received: by 10.216.2.202 with HTTP; Fri, 24 Jun 2011 09:27:04 -0700 (PDT)
From: Xiyang Chen <xiyang.g.chen@gmail.com>
Date: Fri, 24 Jun 2011 12:27:04 -0400
X-Google-Sender-Auth: k83PRYGdG6Lm_Fpz38tb9Knp998
Message-ID: <BANLkTin2PqBzZdFQa4GYpVn6zBdcY0RRvQ@mail.gmail.com>
Subject: Constructing an IDF table without indexing documents
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015175932e035328904a677ad0e

--0015175932e035328904a677ad0e
Content-Type: text/plain; charset=ISO-8859-1

Hi,

I'm developing a search application with two types of documents:

   1. Documents that need to be indexed and queried against
   2. Documents that will never show up in search results, but their content
   needs to contribute to the global term frequency table

In other words, the application needs Type 2 documents only for the purpose
of constructing an
IDF<http://lucene.apache.org/java/3_0_1/api/core/org/apache/lucene/search/Similarity.html#formula_idf>table.

I understand I can accomplish this by indexing both types of documents and
using a special indicator field to make sure that Type 2 documents never
show up in search results. However, this approach seems to be a waste of
resources with all the indexing overhead for Type 2 documents. Is there a
more efficient way for doing this?

Thanks,
Xiyang

--0015175932e035328904a677ad0e--

From java-user-return-50193-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jun 24 18:14:45 2011
Return-Path: <java-user-return-50193-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5794D6ACB
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 24 Jun 2011 18:14:45 +0000 (UTC)
Received: (qmail 48513 invoked by uid 500); 24 Jun 2011 18:14:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48389 invoked by uid 500); 24 Jun 2011 18:14:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48381 invoked by uid 99); 24 Jun 2011 18:14:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2011 18:14:42 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of timeck@gmail.com designates 209.85.210.52 as permitted sender)
Received: from [209.85.210.52] (HELO mail-pz0-f52.google.com) (209.85.210.52)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2011 18:14:36 +0000
Received: by pzd13 with SMTP id 13so2458642pzd.11
        for <java-user@lucene.apache.org>; Fri, 24 Jun 2011 11:14:15 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:from:to:references:in-reply-to:subject:date
         :message-id:mime-version:content-type:content-transfer-encoding
         :x-mailer:thread-index:content-language;
        bh=yFLIhFd2BYrAjBpcItMUa+QWvHPdD56CUTIIcpoO8OU=;
        b=hKFcTF4bTv9TJk6Qrf4bzZ2ZTogMJVasg8O+hb7iJWeY5Y8UvK8xa8iHVe6UuWMBU/
         scadNTzt84l8EuZ7n0fVzhW/3gEgGp/++akcNqBf3oESqzylyF3xBkOyhKdF4BblmvNZ
         TY2fUvnJIcBEA2A+qVQJ9CgO/RQMwUngP079I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:references:in-reply-to:subject:date:message-id:mime-version
         :content-type:content-transfer-encoding:x-mailer:thread-index
         :content-language;
        b=BHZ1JKq1lLJvM9CdxQzbHuzgM/X0ESb5JP9TTfPXprN2dpAZw5uY2ScR2Wj5eFeXns
         cZHo6FiG3mmlIcmHuIrWE1YRUpETuomBgTx2WSBD8HeEVP8RvWc7Rw61gDdMCkNK4UMq
         leX79bf5tE+0kf5mkyNcNGWawmSUG9o9luAhY=
Received: by 10.142.234.3 with SMTP id g3mr712663wfh.423.1308939255578;
        Fri, 24 Jun 2011 11:14:15 -0700 (PDT)
Received: from kermit ([12.116.106.202])
        by mx.google.com with ESMTPS id t15sm2205232wfh.4.2011.06.24.11.14.13
        (version=TLSv1/SSLv3 cipher=OTHER);
        Fri, 24 Jun 2011 11:14:13 -0700 (PDT)
From: "Tim Eck" <timeck@gmail.com>
To: <java-user@lucene.apache.org>
References: <02c401cc3121$2ea3cbb0$8beb6310$@com> <BANLkTi=F6TiwdqNoO0ptojR4VwRxvUAYBg@mail.gmail.com> <024301cc31e5$f480df20$dd829d60$@com> <BANLkTin6B1Ge64DqArO4MK25+1ePT0WV69aWdpzzFxftYRvAcg@mail.gmail.com>
In-Reply-To: <BANLkTin6B1Ge64DqArO4MK25+1ePT0WV69aWdpzzFxftYRvAcg@mail.gmail.com>
Subject: RE: field sorted searches with unbounded hit count
Date: Fri, 24 Jun 2011 11:14:02 -0700
Message-ID: <020d01cc329a$803a5280$80aef780$@com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcwyLdEaFyahz49AS2SpJAPYxtEjPwAa5Fxg
Content-Language: en-us

> if you use the same IndexReader / Searcher for both queries nothing
> changes. How frequently do you open your index?

I'm currently using the "real-time" readers from IndexWriter.getReader() =
and never closing my IndexWriter. I was (perhaps wrongly) assuming that =
those readers can observe mutations that have occurred after creating =
them. If my assumption is wrong then I guess I don't have a race and =
I'll try the approach of using a hit-count only query first and then the =
real sorted search.=20

With regards to a collector -- it isn't immediately clear to me how I go =
about just using/writing my own collector if I want to use an arbitrary =
org.apache.lucene.search.Sort. There is no IndexSearcher.search() method =
that takes a Sort and Collector as far as I can tell.

p.s. Thanks Simon and Toke for the responses!=20

-----Original Message-----
From: Simon Willnauer [mailto:simon.willnauer@googlemail.com]=20
Sent: Thursday, June 23, 2011 10:15 PM
To: java-user@lucene.apache.org
Subject: Re: field sorted searches with unbounded hit count

On Thu, Jun 23, 2011 at 10:41 PM, Tim Eck <timeck@gmail.com> wrote:
> Thanks for the idea Ian. I still need to think about it, but the race =
between running the total count search and then the sorted search =
worries me. I have very pretty specific visibility guarantees I must =
provide on this data (with respect to concurrent updates). It'd be a =
bummer to have to block all concurrent updates to get these two searches =
to operate on an unchanging index.

if you use the same IndexReader / Searcher for both queries nothing
changes. How frequently do you open your index?
>
> I don't want to accuse anyone of bad code but always preallocating a =
potentially large array in org.apache.lucene.util.PriorityQueue seems =
non-ideal for the search I want to run. I'll have to dig into some more =
lucene code :-)

the common usecase for this is a fixed size queue (top k retrieval)
and allocating memory takes time so this is a very specialized class
for exactly this. You can still write your own collector to make this
more efficient for you.

simon
>
> FYI: TotalHitCountCollector looks like it was added in 3.1.0
>
>
>
> -----Original Message-----
> From: Ian Lea [mailto:ian.lea@gmail.com]
> Sent: Thursday, June 23, 2011 3:12 AM
> To: java-user@lucene.apache.org
> Subject: Re: field sorted searches with unbounded hit count
>
> One possibility would be to execute the search first just to get the
> number of hits - see TotalHitCountCollector in recent versions of
> lucene, not sure when it was added - and use the hit count from that
> as the max docs to return.  The counting only search would typically
> be very quick, certainly much quicker than sorting a large number of
> hits.
>
>
> --
> Ian.
>
>
> On Wed, Jun 22, 2011 at 10:13 PM, Tim Eck <teck@terracottatech.com> =
wrote:
>> For the searches I want to run on my index I want to return all =
matching
>> documents (as opposed to N top hits).
>>
>>
>>
>> My first na=C4=BCve approach was just to use Searcher.search(query, =
filter,
>> Integer.MAX_VALUE, sort) =E2=80=93 that is, pass Integer.MAX_VALUE =
for the number
>> of possible docs to return. That unfortunately seems to have huge =
heap
>> requirements in org.apache.lucene.util.PriorityQueue.heap as the max =
docID
>> in my index gets large. Multiply that per search heap requirement by =
a
>> handful of concurrent threads and I OOME my server.
>>
>>
>>
>> When I don=E2=80=99t need to do any sorting it pretty easy to just =
use my own
>> collector to gather the doc ids.  Of course depending on the number =
of
>> hits I might still need a good amount of heap but at least it a =
factor of
>> the number of matches (not the index size).
>>
>>
>>
>> I=E2=80=99m struggling to figure out how to do the same search but =
with sorting.
>> I=E2=80=99m looking for a method like Searcher.search(Query, Filter, =
Sort,
>> Collector), but perhaps that isn=E2=80=99t a reasonable thing to =
have, please
>> enlighten me if so :-)
>>
>>
>>
>> I=E2=80=99m using 3.0.3 lucene-core at the moment but I don=E2=80=99t =
see that this aspect
>> is any different in 3.2.0.
>>
>>
>>
>> Hopefully this made sense, any help you can provide is appreciated.
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50194-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jun 24 20:24:37 2011
Return-Path: <java-user-return-50194-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E9EE664C4
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 24 Jun 2011 20:24:36 +0000 (UTC)
Received: (qmail 51040 invoked by uid 500); 24 Jun 2011 20:24:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50863 invoked by uid 500); 24 Jun 2011 20:24:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 550 invoked by uid 99); 24 Jun 2011 13:32:13 -0000
X-ASF-Spam-Status: No, hits=3.0 required=5.0
	tests=FORGED_YAHOO_RCVD,FREEMAIL_FROM,RFC_ABUSE_POST,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Date: Fri, 24 Jun 2011 06:31:47 -0700 (PDT)
From: pravesh <suyalpravesh@yahoo.com>
To: java-user@lucene.apache.org
Message-ID: <1308922307563-3104174.post@n3.nabble.com>
In-Reply-To: <9F2C35C0-D92A-4612-B334-AD979A9F9057@gmail.com>
References: <283DDE30-DA91-4019-A328-7052BC65E9BB@gmail.com> <BANLkTi=KH3V5wCd7GpgrD6cdK_xX9UmAjw@mail.gmail.com> <9F2C35C0-D92A-4612-B334-AD979A9F9057@gmail.com>
Subject: Re: Lucene sort performance roots?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

You might be doing search+sort together in a single query. Since lucene beats
RDBMs in text search, so, could be that you are actually benefitting from
the text search+sort, which would otherwise be slow on RDBMS.

Thanx
Pravesh

--
View this message in context: http://lucene.472066.n3.nabble.com/Lucene-sort-performance-roots-tp3102493p3104174.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50195-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jun 24 22:42:56 2011
Return-Path: <java-user-return-50195-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C7DE46B28
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 24 Jun 2011 22:42:56 +0000 (UTC)
Received: (qmail 18596 invoked by uid 500); 24 Jun 2011 22:42:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18538 invoked by uid 500); 24 Jun 2011 22:42:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18524 invoked by uid 99); 24 Jun 2011 22:42:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2011 22:42:53 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of sokolov@ifactory.com designates 68.236.111.2 as permitted sender)
Received: from [68.236.111.2] (HELO camelot.ifactory.com) (68.236.111.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2011 22:42:44 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by camelot.ifactory.com (Postfix) with ESMTP id 6EC66367286F;
	Fri, 24 Jun 2011 18:42:23 -0400 (EDT)
Received: from camelot.ifactory.com ([127.0.0.1])
	by localhost (camelot.ifactory.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id cP5eQcLLTHVU; Fri, 24 Jun 2011 18:42:22 -0400 (EDT)
Received: from [192.168.0.154] (pool-108-7-217-216.bstnma.fios.verizon.net [108.7.217.216])
	by camelot.ifactory.com (Postfix) with ESMTPSA id 7D6AD36727DB;
	Fri, 24 Jun 2011 18:42:22 -0400 (EDT)
Message-ID: <4E0512E0.2070504@ifactory.com>
Date: Fri, 24 Jun 2011 18:42:40 -0400
From: Michael Sokolov <sokolov@ifactory.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.18) Gecko/20110616 Thunderbird/3.1.11
MIME-Version: 1.0
To: java-user@lucene.apache.org
CC: Uwe Schindler <uwe@thetaphi.de>
Subject: Re: Lucene sort performance roots?
References: <283DDE30-DA91-4019-A328-7052BC65E9BB@gmail.com> <008801cc3276$ba7f0cc0$2f7d2640$@thetaphi.de>
In-Reply-To: <008801cc3276$ba7f0cc0$2f7d2640$@thetaphi.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


> Because of this top-n behavior, its generally slow with Lucene to scan
> deeply into the result set. If you want to go on page 100 of your search
> results, the priority queue must at least have a size of n=docsPerPage*100.
> Because of this, most full text search engines (e.g. Google does this, too)
> prevent you from going to deep into the result set, as it would get slower
> and slower, because the PQ gets bigger and bigger. E.g. Google prevents you
> to go as far as I know beyond page 50 or like that.
>
> Uwe
>

So the trick we application developers have learned, is that, at least 
for field-sorted result sets, you can achieve the same effect as deep 
pagination by adding a range filter to your query.  That is, you can't 
page to result number 10000 quickly, but you *can* page quickly to 
results sorting after "M" in a very large alpha-sorted list (for 
example), which is usually better for users anyway.

-Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50196-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Jun 26 05:09:26 2011
Return-Path: <java-user-return-50196-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4B09665D2
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 26 Jun 2011 05:09:26 +0000 (UTC)
Received: (qmail 97997 invoked by uid 500); 26 Jun 2011 05:09:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97427 invoked by uid 500); 26 Jun 2011 05:09:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97393 invoked by uid 99); 26 Jun 2011 05:09:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Jun 2011 05:09:01 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of zhou518zhou@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Jun 2011 05:08:53 +0000
Received: by iwi5 with SMTP id 5so5366798iwi.35
        for <java-user@lucene.apache.org>; Sat, 25 Jun 2011 22:08:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:date:from:to:subject:message-id:x-mailer
         :mime-version:content-type;
        bh=3U47Qlgb9r7iv6L066cEtfXp7sypOr3vG9f3GauuUG8=;
        b=C5cKsfzXFjM7HdxCOY1DjrPoyKCUPUlj64waBgHcyJk5i94XTOu1OSfczBWReBzPsm
         Kh7wphLbgQDJftFSk9XaJ48LqUyZNSYf7fBJgLALOq5lYMOnHVnTuwBD2/1o8QS/ci5S
         CKhxtMmmcrOeVcoRFUwaHyzx2OQzB+0DRFp9g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=date:from:to:subject:message-id:x-mailer:mime-version:content-type;
        b=cK4FveScJsD6LxjxvFYCcKekZ2kSvSmwiX36ZWN6iN9A6zO/j6yzjuOYRLqnHYYE2z
         lKebLv+7UZrXReY1CaTdXiuhguEk0gjOar0oSS5MSM3V3gtOZokBonwqxUkeZEpGYRes
         HQif/kx+9SvV0Po+Bio+qRiPH4iPCm6NMr42Q=
Received: by 10.42.145.196 with SMTP id g4mr5257047icv.58.1309064913357;
        Sat, 25 Jun 2011 22:08:33 -0700 (PDT)
Received: from 5zhou1zhou8 ([112.3.254.35])
        by mx.google.com with ESMTPS id 4sm2347096ibc.59.2011.06.25.22.08.28
        (version=SSLv3 cipher=OTHER);
        Sat, 25 Jun 2011 22:08:32 -0700 (PDT)
Date: Sun, 26 Jun 2011 13:08:29 +0800
From: "=?gb2312?B?1tzW3g==?=" <zhou518zhou@gmail.com>
To: "java-user" <java-user@lucene.apache.org>
Subject: Question about FilterIndexReader and IndexSearcher
Message-ID: <201106261308265153757@gmail.com>
X-mailer: Foxmail 6, 15, 201, 26 [cn]
Mime-Version: 1.0
Content-Type: multipart/alternative;
	boundary="=====003_Dragon750031056733_====="

--=====003_Dragon750031056733_=====
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: 7bit

Hello,
I want to let IndexReader finding the modification in time,so i use MyFilterIndexReader which extend 
FilterIndexReader to cache the deleted document in RAM.when this FilterIndexReader be the argument of
 a IndexSearcher,i found that this IndexSearcher can not filter the deleted document,so i want to know 
how IndexSearcher and FilterIndexReader be used can deleted documents filtered?


 zhouzhou
----------
2011-06-26

--=====003_Dragon750031056733_=====--


From java-user-return-50197-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Jun 26 11:05:10 2011
Return-Path: <java-user-return-50197-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8AF3D6129
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 26 Jun 2011 11:05:10 +0000 (UTC)
Received: (qmail 62055 invoked by uid 500); 26 Jun 2011 11:05:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61883 invoked by uid 500); 26 Jun 2011 11:05:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61875 invoked by uid 99); 26 Jun 2011 11:05:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Jun 2011 11:05:06 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Jun 2011 11:05:00 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 749EB45F4B2
	for <java-user@lucene.apache.org>; Sun, 26 Jun 2011 13:04:32 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id Dnz6a9WtezWN for <java-user@lucene.apache.org>;
	Sun, 26 Jun 2011 13:04:27 +0200 (CEST)
Received: from VEGA (port-92-196-16-218.dynamic.qsc.de [92.196.16.218])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 39E6345F409
	for <java-user@lucene.apache.org>; Sun, 26 Jun 2011 13:04:27 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <201106261308265153757@gmail.com>
In-Reply-To: <201106261308265153757@gmail.com>
Subject: RE: Question about FilterIndexReader and IndexSearcher
Date: Sun, 26 Jun 2011 13:04:47 +0200
Message-ID: <000e01cc33f0$dd1d14e0$97573ea0$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-2022-jp"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQIICgHUwEc42l8F4Hlal9ZSm9JyFJRXys8w
Content-Language: de

Hi,

usage of FilterIndexReader is not always as easy as it seems. There are
several problem, that can easy lead to the fact that you FilterIndexReader
implements all document filtering, but IndexSearcher does not respect it. I
have no idea what you are doing, but the following thing need to be done to
correcty filter documents:

- FilterIndexReader should implement isDeleted() methods & co (I assume you
did this)
- FilterIndexReader should filter postings returned: termPositions(...) and
termDocs(...) to exclude deleted documents
- return the correct numer for numDocs()

The biggest problem since Lucene 2.9 is one specific method that will
circumvent all you had done above:

getSequentialSubReaders() is used by IndexSearcher to directly pass the
searches to all atomic segments of a MultiReader/DirectoryReader structure.
As the subreaders returned by this method do not implement the above (they
are passed as is by the default impl), IndexSearcher will in fact only talk
to them and so ignore the above methods on the top-level reader

To do this correct do one of the following:
 
- easy: override getSequentialSubReaders() to return null, this will make
the filtered IndexReader itself atomic, so IndexSearcher will use it during
search. The backside: searches may get significantly slower
- override getSequentialSubReaders() and also wrap each subreader returned
by the delegate reader with your impl.

If you implement the last option (but also the return-null option) you may
also override reopen(), to correctly wrap reopened segments - you need to do
this if you use reopen.

If you are already using Lucene trunk (coming version 4.0), you can follow
the following issue: https://issues.apache.org/jira/browse/LUCENE-3212
It will implement exactly the above once I have time to do it finally. I
will post a first patch soon. This version will not work with Lucene 3.x, as
it is lots of work to get all this running easily with Lucene 3.x
(especially the above termPositions, termDocs mehods). In Lucene 4.0 the
filtering of documents is much easier, you only have to override
getDeletedDocs() and numDocs(), everything else is automatically handled!

Hope that helps.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: $B<~='(B [mailto:zhou518zhou@gmail.com]
> Sent: Sunday, June 26, 2011 7:08 AM
> To: java-user
> Subject: Question about FilterIndexReader and IndexSearcher
> 
> Hello,
> I want to let IndexReader finding the modification in time,so i use
> MyFilterIndexReader which extend FilterIndexReader to cache the deleted
> document in RAM.when this FilterIndexReader be the argument of  a
> IndexSearcher,i found that this IndexSearcher can not filter the deleted
> document,so i want to know how IndexSearcher and FilterIndexReader be
> used can deleted documents filtered?
> 
> 
>  zhouzhou
> ----------
> 2011-06-26


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50198-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Jun 26 13:00:45 2011
Return-Path: <java-user-return-50198-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2B8F167A2
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 26 Jun 2011 13:00:45 +0000 (UTC)
Received: (qmail 21761 invoked by uid 500); 26 Jun 2011 13:00:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21706 invoked by uid 500); 26 Jun 2011 13:00:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21698 invoked by uid 99); 26 Jun 2011 13:00:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Jun 2011 13:00:41 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.220.176] (HELO mail-vx0-f176.google.com) (209.85.220.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Jun 2011 13:00:35 +0000
Received: by vxd2 with SMTP id 2so4671646vxd.35
        for <java-user@lucene.apache.org>; Sun, 26 Jun 2011 06:00:14 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.52.69.111 with SMTP id d15mr343919vdu.284.1309093214062; Sun,
 26 Jun 2011 06:00:14 -0700 (PDT)
Received: by 10.52.157.226 with HTTP; Sun, 26 Jun 2011 06:00:14 -0700 (PDT)
In-Reply-To: <020d01cc329a$803a5280$80aef780$@com>
References: <02c401cc3121$2ea3cbb0$8beb6310$@com>
	<BANLkTi=F6TiwdqNoO0ptojR4VwRxvUAYBg@mail.gmail.com>
	<024301cc31e5$f480df20$dd829d60$@com>
	<BANLkTin6B1Ge64DqArO4MK25+1ePT0WV69aWdpzzFxftYRvAcg@mail.gmail.com>
	<020d01cc329a$803a5280$80aef780$@com>
Date: Sun, 26 Jun 2011 09:00:14 -0400
Message-ID: <BANLkTi=fvWLOYjW9hAT1OK68DniDS4CfWQ@mail.gmail.com>
Subject: Re: field sorted searches with unbounded hit count
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

On Fri, Jun 24, 2011 at 2:14 PM, Tim Eck <timeck@gmail.com> wrote:

> I'm currently using the "real-time" readers from IndexWriter.getReader() and never closing my IndexWriter. I was (perhaps wrongly) assuming that those readers can observe mutations that have occurred after creating them.

Actually, the NRT reader (from IW.getReader() or, in newer releases,
IR.open(IW)) is still a point-in-time reader, ie, it will only reflect
changes done in IW before it was opened.

Mike McCandless

http://blog.mikemccandless.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50199-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Jun 26 23:09:15 2011
Return-Path: <java-user-return-50199-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3F756644E
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 26 Jun 2011 23:09:15 +0000 (UTC)
Received: (qmail 86913 invoked by uid 500); 26 Jun 2011 23:09:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86779 invoked by uid 500); 26 Jun 2011 23:09:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 96107 invoked by uid 99); 26 Jun 2011 05:00:11 -0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of zhou518zhou@gmail.com designates 209.85.214.176 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:date:from:to:subject:message-id:x-mailer
         :mime-version:content-type;
        bh=/KzbxxsbRYEG+0d89ZeNwBEQmpif2VVtDpX5RsBjIQo=;
        b=VTlfzpNQyW4btFN39TG0U27JFps5p6YwyBt7DP6jqlKRk3tUsJtSoqNlIRNQvtEAxe
         5k+e6ZzM0Ioe9va3m3IRZ3crweiqngOeABCdYpj1aYW7uf8GtsC1qgqskHLmj6YxV9bF
         aV2PXNrRKFJugGSMA7M/M0v1pvuXeRrDppz4M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=date:from:to:subject:message-id:x-mailer:mime-version:content-type;
        b=RRGqopK58sSK991hUpGgGRJcEBF5H2khK5THYzf0r3OVEUGVTOv8Hb/MceRMR5ypOT
         k4ojM8DpXcYkUupztQXzoxYgyREGCa2j0nLaRnxx1kyx0hFI1aJ5IPTWuIxlsXBl2Fn5
         yO/rUHqQSY8fQW0wSCVwB5Hvy3goCmKXkl0X4=
Date: Sun, 26 Jun 2011 12:59:24 +0800
From: "=?gb2312?B?1tzW3g==?=" <zhou518zhou@gmail.com>
To: "java-user" <java-user@lucene.apache.org>
Subject: Question about FilterIndexReader and IndexSearcher
Message-ID: <201106261259201712819@gmail.com>
X-mailer: Foxmail 6, 15, 201, 26 [cn]
Mime-Version: 1.0
Content-Type: multipart/alternative;
	boundary="=====003_Dragon058071744121_====="

--=====003_Dragon058071744121_=====
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: 7bit

Hello,
I want to let IndexReader finding the modification in time,so i use MyFilterIndexReader which extend 
FilterIndexReader to cache the deleted document in RAM.when this FilterIndexReader be the argument of
 a IndexSearcher,i found that this IndexSearcher can not filter the deleted document,so i want to know 
how IndexSearcher and FilterIndexReader be used can deleted documents filtered?


 zhouzhou
----------
2011-06-26

--=====003_Dragon058071744121_=====--


From java-user-return-50200-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun 27 07:09:44 2011
Return-Path: <java-user-return-50200-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B022F46A4
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 27 Jun 2011 07:09:44 +0000 (UTC)
Received: (qmail 844 invoked by uid 500); 27 Jun 2011 07:09:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 755 invoked by uid 500); 27 Jun 2011 07:09:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 747 invoked by uid 99); 27 Jun 2011 07:09:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Jun 2011 07:09:14 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of zhou518zhou@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Jun 2011 07:09:07 +0000
Received: by iwi5 with SMTP id 5so6232941iwi.35
        for <java-user@lucene.apache.org>; Mon, 27 Jun 2011 00:08:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:date:from:to:references:subject:message-id
         :x-mailer:mime-version:content-type;
        bh=A0RvE8Y2uML+Njtl9E8jcKiOBPlqxERrwgFiTBaAxj0=;
        b=duxb+S4TyOUxvEA3dBs6QEx5k2Pa4lk2YjWxHdbhDMbpzNsLDIYZbR10+DpfdYaTTs
         +7e4mbgnwvZiopQEfTLn+G2skTItCuGNkuIYkJSAPk90IYxM03eIufSz7QrNtWCGEj2t
         1km0nUiWRE/7Er9enTAX7PHP/7wZka/YdgFRc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=date:from:to:references:subject:message-id:x-mailer:mime-version
         :content-type;
        b=m/1d/Re2tchD+07duKpVZvAdl5DNsSOFYg1E2tOsXiquDT4WerSgnJOZGuado52yOW
         neQlHIWOPk+feYjNB95UXJN4kmP9vUatgeWbm5L7/gmNpo8lDEcVu5yRgcN3KvJw1FV3
         UrLczszFzCZMRlxkrUUWofihNX7a1E6btgOBM=
Received: by 10.42.21.204 with SMTP id l12mr6915416icb.341.1309158526156;
        Mon, 27 Jun 2011 00:08:46 -0700 (PDT)
Received: from 5zhou1zhou8 ([117.89.210.0])
        by mx.google.com with ESMTPS id 4sm2924329ibc.42.2011.06.27.00.08.39
        (version=SSLv3 cipher=OTHER);
        Mon, 27 Jun 2011 00:08:44 -0700 (PDT)
Date: Mon, 27 Jun 2011 15:08:39 +0800
From: "=?utf-8?B?5ZGo5rSy?=" <zhou518zhou@gmail.com>
To: "=?utf-8?B?amF2YS11c2Vy?=" <java-user@lucene.apache.org>
References: <201106261308265153757@gmail.com>
Subject: =?utf-8?B?UmU6IFJFOiBRdWVzdGlvbiBhYm91dCBGaWx0ZXJJbmRleFJlYWRlciBhbmQgSW5kZXhTZWFyY2hlcg==?=
Message-ID: <201106271508359941384@gmail.com>
X-mailer: Foxmail 6, 15, 201, 26 [cn]
Mime-Version: 1.0
Content-Type: multipart/mixed;
	boundary="=====001_Dragon284854630515_====="

--=====001_Dragon284854630515_=====
Content-Type: multipart/alternative;
	boundary="=====003_Dragon284854630515_====="


--=====003_Dragon284854630515_=====
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: base64

SGksDQogICAgICBJJ2FtIGEgc3R1ZGVudCBvZiBTb3V0aGVhc3QgVW5pdmVyc2l0eSB3aGljaCBs
b2NhdGUgaW4gQ2hpbmEsIHRoYW5rIHlvdSBmb3IgeW91ciBoZWxwLGJ1dCBpIHN0aWxsIGNhbm4n
dCBmaWx0ZXIgdGhlIGRvY3MgYmVpbmcgZGVsZXRlZCxpIG1ha2UgYSB0ZXN0IGRlbW8scGxlYXNl
IHRlbGwgbWUgd2h5IHRoZSBmb2xsb3dpbmcgcHJvY2VkdXJlIHdpbGwgYmUgc3VjaCBhIHJlc3Vs
dD8NCiAgICAgV2h5IHdvdWxkIEluZGV4U2VhcmNoZXIgaWdub3JlIHRoZSBkZWxldGVkIGRvY3Mg
Y2FjaGVkIGluIEZpbHRlckluZGV4UmVhZGVyPw0KDQp6aG91emhvdQ0KMjAxMS0wNi0yNw0KDQoN
Cg0K5Y+R5Lu25Lq677yaIFV3ZSBTY2hpbmRsZXIgDQrlj5HpgIHml7bpl7TvvJogMjAxMS0wNi0y
NiAgMTk6MDU6MTEgDQrmlLbku7bkurrvvJogamF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnIA0K
5oqE6YCB77yaIA0K5Li76aKY77yaIFJFOiBRdWVzdGlvbiBhYm91dCBGaWx0ZXJJbmRleFJlYWRl
ciBhbmQgSW5kZXhTZWFyY2hlciANCiANCkhpLA0KdXNhZ2Ugb2YgRmlsdGVySW5kZXhSZWFkZXIg
aXMgbm90IGFsd2F5cyBhcyBlYXN5IGFzIGl0IHNlZW1zLiBUaGVyZSBhcmUNCnNldmVyYWwgcHJv
YmxlbSwgdGhhdCBjYW4gZWFzeSBsZWFkIHRvIHRoZSBmYWN0IHRoYXQgeW91IEZpbHRlckluZGV4
UmVhZGVyDQppbXBsZW1lbnRzIGFsbCBkb2N1bWVudCBmaWx0ZXJpbmcsIGJ1dCBJbmRleFNlYXJj
aGVyIGRvZXMgbm90IHJlc3BlY3QgaXQuIEkNCmhhdmUgbm8gaWRlYSB3aGF0IHlvdSBhcmUgZG9p
bmcsIGJ1dCB0aGUgZm9sbG93aW5nIHRoaW5nIG5lZWQgdG8gYmUgZG9uZSB0bw0KY29ycmVjdHkg
ZmlsdGVyIGRvY3VtZW50czoNCi0gRmlsdGVySW5kZXhSZWFkZXIgc2hvdWxkIGltcGxlbWVudCBp
c0RlbGV0ZWQoKSBtZXRob2RzICYgY28gKEkgYXNzdW1lIHlvdQ0KZGlkIHRoaXMpDQotIEZpbHRl
ckluZGV4UmVhZGVyIHNob3VsZCBmaWx0ZXIgcG9zdGluZ3MgcmV0dXJuZWQ6IHRlcm1Qb3NpdGlv
bnMoLi4uKSBhbmQNCnRlcm1Eb2NzKC4uLikgdG8gZXhjbHVkZSBkZWxldGVkIGRvY3VtZW50cw0K
LSByZXR1cm4gdGhlIGNvcnJlY3QgbnVtZXIgZm9yIG51bURvY3MoKQ0KVGhlIGJpZ2dlc3QgcHJv
YmxlbSBzaW5jZSBMdWNlbmUgMi45IGlzIG9uZSBzcGVjaWZpYyBtZXRob2QgdGhhdCB3aWxsDQpj
aXJjdW12ZW50IGFsbCB5b3UgaGFkIGRvbmUgYWJvdmU6DQpnZXRTZXF1ZW50aWFsU3ViUmVhZGVy
cygpIGlzIHVzZWQgYnkgSW5kZXhTZWFyY2hlciB0byBkaXJlY3RseSBwYXNzIHRoZQ0Kc2VhcmNo
ZXMgdG8gYWxsIGF0b21pYyBzZWdtZW50cyBvZiBhIE11bHRpUmVhZGVyL0RpcmVjdG9yeVJlYWRl
ciBzdHJ1Y3R1cmUuDQpBcyB0aGUgc3VicmVhZGVycyByZXR1cm5lZCBieSB0aGlzIG1ldGhvZCBk
byBub3QgaW1wbGVtZW50IHRoZSBhYm92ZSAodGhleQ0KYXJlIHBhc3NlZCBhcyBpcyBieSB0aGUg
ZGVmYXVsdCBpbXBsKSwgSW5kZXhTZWFyY2hlciB3aWxsIGluIGZhY3Qgb25seSB0YWxrDQp0byB0
aGVtIGFuZCBzbyBpZ25vcmUgdGhlIGFib3ZlIG1ldGhvZHMgb24gdGhlIHRvcC1sZXZlbCByZWFk
ZXINClRvIGRvIHRoaXMgY29ycmVjdCBkbyBvbmUgb2YgdGhlIGZvbGxvd2luZzoNCg0KLSBlYXN5
OiBvdmVycmlkZSBnZXRTZXF1ZW50aWFsU3ViUmVhZGVycygpIHRvIHJldHVybiBudWxsLCB0aGlz
IHdpbGwgbWFrZQ0KdGhlIGZpbHRlcmVkIEluZGV4UmVhZGVyIGl0c2VsZiBhdG9taWMsIHNvIElu
ZGV4U2VhcmNoZXIgd2lsbCB1c2UgaXQgZHVyaW5nDQpzZWFyY2guIFRoZSBiYWNrc2lkZTogc2Vh
cmNoZXMgbWF5IGdldCBzaWduaWZpY2FudGx5IHNsb3dlcg0KLSBvdmVycmlkZSBnZXRTZXF1ZW50
aWFsU3ViUmVhZGVycygpIGFuZCBhbHNvIHdyYXAgZWFjaCBzdWJyZWFkZXIgcmV0dXJuZWQNCmJ5
IHRoZSBkZWxlZ2F0ZSByZWFkZXIgd2l0aCB5b3VyIGltcGwuDQpJZiB5b3UgaW1wbGVtZW50IHRo
ZSBsYXN0IG9wdGlvbiAoYnV0IGFsc28gdGhlIHJldHVybi1udWxsIG9wdGlvbikgeW91IG1heQ0K
YWxzbyBvdmVycmlkZSByZW9wZW4oKSwgdG8gY29ycmVjdGx5IHdyYXAgcmVvcGVuZWQgc2VnbWVu
dHMgLSB5b3UgbmVlZCB0byBkbw0KdGhpcyBpZiB5b3UgdXNlIHJlb3Blbi4NCklmIHlvdSBhcmUg
YWxyZWFkeSB1c2luZyBMdWNlbmUgdHJ1bmsgKGNvbWluZyB2ZXJzaW9uIDQuMCksIHlvdSBjYW4g
Zm9sbG93DQp0aGUgZm9sbG93aW5nIGlzc3VlOiBodHRwczovL2lzc3Vlcy5hcGFjaGUub3JnL2pp
cmEvYnJvd3NlL0xVQ0VORS0zMjEyDQpJdCB3aWxsIGltcGxlbWVudCBleGFjdGx5IHRoZSBhYm92
ZSBvbmNlIEkgaGF2ZSB0aW1lIHRvIGRvIGl0IGZpbmFsbHkuIEkNCndpbGwgcG9zdCBhIGZpcnN0
IHBhdGNoIHNvb24uIFRoaXMgdmVyc2lvbiB3aWxsIG5vdCB3b3JrIHdpdGggTHVjZW5lIDMueCwg
YXMNCml0IGlzIGxvdHMgb2Ygd29yayB0byBnZXQgYWxsIHRoaXMgcnVubmluZyBlYXNpbHkgd2l0
aCBMdWNlbmUgMy54DQooZXNwZWNpYWxseSB0aGUgYWJvdmUgdGVybVBvc2l0aW9ucywgdGVybURv
Y3MgbWVob2RzKS4gSW4gTHVjZW5lIDQuMCB0aGUNCmZpbHRlcmluZyBvZiBkb2N1bWVudHMgaXMg
bXVjaCBlYXNpZXIsIHlvdSBvbmx5IGhhdmUgdG8gb3ZlcnJpZGUNCmdldERlbGV0ZWREb2NzKCkg
YW5kIG51bURvY3MoKSwgZXZlcnl0aGluZyBlbHNlIGlzIGF1dG9tYXRpY2FsbHkgaGFuZGxlZCEN
CkhvcGUgdGhhdCBoZWxwcy4NCi0tLS0tDQpVd2UgU2NoaW5kbGVyDQpILi1ILi1NZWllci1BbGxl
ZSA2MywgRC0yODIxMyBCcmVtZW4NCmh0dHA6Ly93d3cudGhldGFwaGkuZGUNCmVNYWlsOiB1d2VA
dGhldGFwaGkuZGUNCj4gLS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0tLS0NCj4gRnJvbTog5ZGo5rSy
IFttYWlsdG86emhvdTUxOHpob3VAZ21haWwuY29tXQ0KPiBTZW50OiBTdW5kYXksIEp1bmUgMjYs
IDIwMTEgNzowOCBBTQ0KPiBUbzogamF2YS11c2VyDQo+IFN1YmplY3Q6IFF1ZXN0aW9uIGFib3V0
IEZpbHRlckluZGV4UmVhZGVyIGFuZCBJbmRleFNlYXJjaGVyDQo+IA0KPiBIZWxsbywNCj4gSSB3
YW50IHRvIGxldCBJbmRleFJlYWRlciBmaW5kaW5nIHRoZSBtb2RpZmljYXRpb24gaW4gdGltZSxz
byBpIHVzZQ0KPiBNeUZpbHRlckluZGV4UmVhZGVyIHdoaWNoIGV4dGVuZCBGaWx0ZXJJbmRleFJl
YWRlciB0byBjYWNoZSB0aGUgZGVsZXRlZA0KPiBkb2N1bWVudCBpbiBSQU0ud2hlbiB0aGlzIEZp
bHRlckluZGV4UmVhZGVyIGJlIHRoZSBhcmd1bWVudCBvZiAgYQ0KPiBJbmRleFNlYXJjaGVyLGkg
Zm91bmQgdGhhdCB0aGlzIEluZGV4U2VhcmNoZXIgY2FuIG5vdCBmaWx0ZXIgdGhlIGRlbGV0ZWQN
Cj4gZG9jdW1lbnQsc28gaSB3YW50IHRvIGtub3cgaG93IEluZGV4U2VhcmNoZXIgYW5kIEZpbHRl
ckluZGV4UmVhZGVyIGJlDQo+IHVzZWQgY2FuIGRlbGV0ZWQgZG9jdW1lbnRzIGZpbHRlcmVkPw0K
PiANCj4gDQo+ICB6aG91emhvdQ0KPiAtLS0tLS0tLS0tDQo+IDIwMTEtMDYtMjYNCi0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLQ0KVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2Vu
ZS5hcGFjaGUub3JnDQpGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXIt
aGVscEBsdWNlbmUuYXBhY2hlLm9yZw0K

--=====003_Dragon284854630515_=====
Content-Type: text/html;
	charset="utf-8"
Content-Transfer-Encoding: base64

77u/PCFET0NUWVBFIEhUTUwgUFVCTElDICItLy9XM0MvL0RURCBIVE1MIDQuMCBUcmFuc2l0aW9u
YWwvL0VOIj4NCjxIVE1MPjxIRUFEPg0KPE1FVEEgaHR0cC1lcXVpdj1Db250ZW50LVR5cGUgY29u
dGVudD0idGV4dC9odG1sOyBjaGFyc2V0PXV0Zi04Ij4NCjxNRVRBIGNvbnRlbnQ9Ik1TSFRNTCA2
LjAwLjI5MDAuNTUxMiIgbmFtZT1HRU5FUkFUT1I+DQo8U1RZTEU+QGZvbnQtZmFjZSB7DQoJZm9u
dC1mYW1pbHk6IOWui+S9kzsNCn0NCkBmb250LWZhY2Ugew0KCWZvbnQtZmFtaWx5OiBWZXJkYW5h
Ow0KfQ0KQGZvbnQtZmFjZSB7DQoJZm9udC1mYW1pbHk6IEDlrovkvZM7DQp9DQpAcGFnZSBTZWN0
aW9uMSB7c2l6ZTogNTk1LjNwdCA4NDEuOXB0OyBtYXJnaW46IDcyLjBwdCA5MC4wcHQgNzIuMHB0
IDkwLjBwdDsgbGF5b3V0LWdyaWQ6IDE1LjZwdDsgfQ0KUC5Nc29Ob3JtYWwgew0KCVRFWFQtSlVT
VElGWTogaW50ZXItaWRlb2dyYXBoOyBGT05ULVNJWkU6IDEwLjVwdDsgTUFSR0lOOiAwY20gMGNt
IDBwdDsgRk9OVC1GQU1JTFk6ICJUaW1lcyBOZXcgUm9tYW4iOyBURVhULUFMSUdOOiBqdXN0aWZ5
DQp9DQpMSS5Nc29Ob3JtYWwgew0KCVRFWFQtSlVTVElGWTogaW50ZXItaWRlb2dyYXBoOyBGT05U
LVNJWkU6IDEwLjVwdDsgTUFSR0lOOiAwY20gMGNtIDBwdDsgRk9OVC1GQU1JTFk6ICJUaW1lcyBO
ZXcgUm9tYW4iOyBURVhULUFMSUdOOiBqdXN0aWZ5DQp9DQpESVYuTXNvTm9ybWFsIHsNCglURVhU
LUpVU1RJRlk6IGludGVyLWlkZW9ncmFwaDsgRk9OVC1TSVpFOiAxMC41cHQ7IE1BUkdJTjogMGNt
IDBjbSAwcHQ7IEZPTlQtRkFNSUxZOiAiVGltZXMgTmV3IFJvbWFuIjsgVEVYVC1BTElHTjoganVz
dGlmeQ0KfQ0KQTpsaW5rIHsNCglDT0xPUjogYmx1ZTsgVEVYVC1ERUNPUkFUSU9OOiB1bmRlcmxp
bmUNCn0NClNQQU4uTXNvSHlwZXJsaW5rIHsNCglDT0xPUjogYmx1ZTsgVEVYVC1ERUNPUkFUSU9O
OiB1bmRlcmxpbmUNCn0NCkE6dmlzaXRlZCB7DQoJQ09MT1I6IHB1cnBsZTsgVEVYVC1ERUNPUkFU
SU9OOiB1bmRlcmxpbmUNCn0NClNQQU4uTXNvSHlwZXJsaW5rRm9sbG93ZWQgew0KCUNPTE9SOiBw
dXJwbGU7IFRFWFQtREVDT1JBVElPTjogdW5kZXJsaW5lDQp9DQpTUEFOLkVtYWlsU3R5bGUxNyB7
DQoJRk9OVC1XRUlHSFQ6IG5vcm1hbDsgQ09MT1I6IHdpbmRvd3RleHQ7IEZPTlQtU1RZTEU6IG5v
cm1hbDsgRk9OVC1GQU1JTFk6IFZlcmRhbmE7IFRFWFQtREVDT1JBVElPTjogbm9uZTsgbXNvLXN0
eWxlLXR5cGU6IHBlcnNvbmFsLWNvbXBvc2UNCn0NCkRJVi5TZWN0aW9uMSB7DQoJcGFnZTogU2Vj
dGlvbjENCn0NClVOS05PV04gew0KCUZPTlQtU0laRTogMTBwdA0KfQ0KQkxPQ0tRVU9URSB7DQoJ
TUFSR0lOLVRPUDogMHB4OyBNQVJHSU4tQk9UVE9NOiAwcHg7IE1BUkdJTi1MRUZUOiAyZW0NCn0N
Ck9MIHsNCglNQVJHSU4tVE9QOiAwcHg7IE1BUkdJTi1CT1RUT006IDBweA0KfQ0KVUwgew0KCU1B
UkdJTi1UT1A6IDBweDsgTUFSR0lOLUJPVFRPTTogMHB4DQp9DQo8L1NUWUxFPg0KPC9IRUFEPg0K
PEJPRFkgc3R5bGU9IkZPTlQtU0laRTogMTBwdDsgTUFSR0lOOiAxMHB4OyBGT05ULUZBTUlMWTog
dmVyZGFuYSI+DQo8RElWPjxGT05UIGZhY2U9QmF0YW5nIGNvbG9yPSMwMDAwODAgc2l6ZT0yPkhp
LDwvRk9OVD48L0RJVj4NCjxESVYgc3R5bGU9IlRFWFQtSU5ERU5UOiA0ZW0iPjxTUEFOIGNsYXNz
PUFwcGxlLXN0eWxlLXNwYW4gDQpzdHlsZT0iV09SRC1TUEFDSU5HOiAwcHg7IEZPTlQ6IG1lZGl1
bSBTaW1zdW47IFRFWFQtVFJBTlNGT1JNOiBub25lOyBDT0xPUjogcmdiKDAsMCwwKTsgVEVYVC1J
TkRFTlQ6IDBweDsgV0hJVEUtU1BBQ0U6IG5vcm1hbDsgTEVUVEVSLVNQQUNJTkc6IG5vcm1hbDsg
Qk9SREVSLUNPTExBUFNFOiBzZXBhcmF0ZTsgb3JwaGFuczogMjsgd2lkb3dzOiAyOyB3ZWJraXQt
Ym9yZGVyLWhvcml6b250YWwtc3BhY2luZzogMHB4OyB3ZWJraXQtYm9yZGVyLXZlcnRpY2FsLXNw
YWNpbmc6IDBweDsgd2Via2l0LXRleHQtZGVjb3JhdGlvbnMtaW4tZWZmZWN0OiBub25lOyB3ZWJr
aXQtdGV4dC1zaXplLWFkanVzdDogYXV0bzsgd2Via2l0LXRleHQtc3Ryb2tlLXdpZHRoOiAwcHgi
PjxTUEFOIA0KY2xhc3M9QXBwbGUtc3R5bGUtc3BhbiANCnN0eWxlPSJGT05ULVNJWkU6IDE2cHg7
IEZPTlQtRkFNSUxZOiBhcmlhbCwgc2Fucy1zZXJpZiI+PEZPTlQgZmFjZT1CYXRhbmc+PFNQQU4g
DQpjbGFzcz1ocHMgdGl0bGU954K55Ye75Y+v5pi+56S65YW25LuW57+76K+RPiZuYnNwOyZuYnNw
OyZuYnNwOyZuYnNwOyZuYnNwOyBJJ2FtIGEgc3R1ZGVudCBvZiANClNvdXRoZWFzdCZuYnNwO1Vu
aXZlcnNpdHkgd2hpY2ggbG9jYXRlIGluJm5ic3A7Q2hpbmEsJm5ic3A7dGhhbmsgeW91IGZvciB5
b3VyIA0KaGVscCxidXQgaSBzdGlsbCBjYW5uJ3QgZmlsdGVyIHRoZSBkb2NzIGJlaW5nIGRlbGV0
ZWQsaSBtYWtlIGEgdGVzdCBkZW1vLHBsZWFzZSANCnRlbGwgbWU8L1NQQU4+PFNQQU4gY2xhc3M9
QXBwbGUtY29udmVydGVkLXNwYWNlPiZuYnNwOzwvU1BBTj48U1BBTiBjbGFzcz1ocHMgDQp0aXRs
ZT3ngrnlh7vlj6/mmL7npLrlhbbku5bnv7vor5E+d2h5IHRoZTwvU1BBTj48U1BBTiANCmNsYXNz
PUFwcGxlLWNvbnZlcnRlZC1zcGFjZT4mbmJzcDs8L1NQQU4+PFNQQU4gY2xhc3M9aHBzIA0KdGl0
bGU954K55Ye75Y+v5pi+56S65YW25LuW57+76K+RPmZvbGxvd2luZzwvU1BBTj48U1BBTiANCmNs
YXNzPUFwcGxlLWNvbnZlcnRlZC1zcGFjZT4mbmJzcDs8L1NQQU4+PFNQQU4gY2xhc3M9aHBzIA0K
dGl0bGU954K55Ye75Y+v5pi+56S65YW25LuW57+76K+RPnByb2NlZHVyZTwvU1BBTj48U1BBTiAN
CmNsYXNzPUFwcGxlLWNvbnZlcnRlZC1zcGFjZT4mbmJzcDs8L1NQQU4+PFNQQU4gY2xhc3M9aHBz
IHRpdGxlPeeCueWHu+WPr+aYvuekuuWFtuS7lue/u+ivkT53aWxsIA0KYmU8L1NQQU4+PFNQQU4g
Y2xhc3M9QXBwbGUtY29udmVydGVkLXNwYWNlPiZuYnNwOzwvU1BBTj48U1BBTiBjbGFzcz1ocHMg
DQp0aXRsZT3ngrnlh7vlj6/mmL7npLrlhbbku5bnv7vor5E+c3VjaCBhIHJlc3VsdDwvU1BBTj48
U1BBTiBjbGFzcz0iIiANCnRpdGxlPeeCueWHu+WPr+aYvuekuuWFtuS7lue/u+ivkT4/PC9TUEFO
PjxCUj48U1BBTiBjbGFzcz1ocHMgDQp0aXRsZT3ngrnlh7vlj6/mmL7npLrlhbbku5bnv7vor5E+
Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7V2h5PC9TUEFOPjxTUEFOIA0KY2xhc3M9QXBw
bGUtY29udmVydGVkLXNwYWNlPiZuYnNwOzwvU1BBTj48U1BBTiBjbGFzcz1ocHMgDQp0aXRsZT3n
grnlh7vlj6/mmL7npLrlhbbku5bnv7vor5E+d291bGQ8L1NQQU4+PFNQQU4gY2xhc3M9QXBwbGUt
Y29udmVydGVkLXNwYWNlPiZuYnNwOzwvU1BBTj48U1BBTiANCmNsYXNzPWhwcyB0aXRsZT3ngrnl
h7vlj6/mmL7npLrlhbbku5bnv7vor5E+SW5kZXhTZWFyY2hlciZuYnNwO2lnbm9yZSB0aGUgZGVs
ZXRlZCBkb2NzIA0KY2FjaGVkJm5ic3A7aW4gPC9TUEFOPjxTUEFOIGNsYXNzPWhwcyANCnRpdGxl
PeeCueWHu+WPr+aYvuekuuWFtuS7lue/u+ivkT5GaWx0ZXJJbmRleFJlYWRlcjwvU1BBTj48U1BB
TiBjbGFzcz1ocHMgDQp0aXRsZT3ngrnlh7vlj6/mmL7npLrlhbbku5bnv7vor5E+PzwvU1BBTj48
L0ZPTlQ+PC9TUEFOPjwvU1BBTj48L0RJVj4NCjxESVY+PEZPTlQgY29sb3I9IzAwMDA4MD48L0ZP
TlQ+Jm5ic3A7PC9ESVY+DQo8RElWPjxGT05UIGNvbG9yPSMwMDAwODA+emhvdXpob3U8L0ZPTlQ+
PC9ESVY+DQo8RElWPjxGT05UIGNvbG9yPSMwMDAwODA+MjAxMS0wNi0yNzwvRk9OVD48L0RJVj4N
CjxESVY+DQo8SFIgY29sb3I9I2I1YzRkZiBTSVpFPTE+DQo8L0RJVj4NCjxESVY+PEZPTlQgZmFj
ZT1WZXJkYW5hIHNpemU9Mj48U1RST05HPuWPkeS7tuS6uu+8mjwvU1RST05HPiBVd2UgU2NoaW5k
bGVyIDwvRk9OVD48L0RJVj4NCjxESVY+PEZPTlQgZmFjZT1WZXJkYW5hIHNpemU9Mj48U1RST05H
PuWPkemAgeaXtumXtO+8mjwvU1RST05HPiAyMDExLTA2LTI2Jm5ic3A7IDE5OjA1OjExIA0KPC9G
T05UPjwvRElWPg0KPERJVj48Rk9OVCBmYWNlPVZlcmRhbmEgc2l6ZT0yPjxTVFJPTkc+5pS25Lu2
5Lq677yaPC9TVFJPTkc+IGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZyANCjwvRk9OVD48L0RJ
Vj4NCjxESVY+PEZPTlQgZmFjZT1WZXJkYW5hIHNpemU9Mj48U1RST05HPuaKhOmAge+8mjwvU1RS
T05HPiA8L0ZPTlQ+PC9ESVY+DQo8RElWPjxGT05UIGZhY2U9VmVyZGFuYSBzaXplPTI+PFNUUk9O
Rz7kuLvpopjvvJo8L1NUUk9ORz4gUkU6IFF1ZXN0aW9uIGFib3V0IA0KRmlsdGVySW5kZXhSZWFk
ZXIgYW5kIEluZGV4U2VhcmNoZXIgPC9GT05UPjwvRElWPg0KPERJVj48Rk9OVCBmYWNlPVZlcmRh
bmEgc2l6ZT0yPjwvRk9OVD4gPC9ESVY+DQo8RElWPjxGT05UIGZhY2U9VmVyZGFuYSBzaXplPTI+
DQo8RElWPkhpLDwvRElWPg0KPERJVj48L0RJVj4NCjxESVY+dXNhZ2UmbmJzcDtvZiZuYnNwO0Zp
bHRlckluZGV4UmVhZGVyJm5ic3A7aXMmbmJzcDtub3QmbmJzcDthbHdheXMmbmJzcDthcyZuYnNw
O2Vhc3kmbmJzcDthcyZuYnNwO2l0Jm5ic3A7c2VlbXMuJm5ic3A7VGhlcmUmbmJzcDthcmU8L0RJ
Vj4NCjxESVY+c2V2ZXJhbCZuYnNwO3Byb2JsZW0sJm5ic3A7dGhhdCZuYnNwO2NhbiZuYnNwO2Vh
c3kmbmJzcDtsZWFkJm5ic3A7dG8mbmJzcDt0aGUmbmJzcDtmYWN0Jm5ic3A7dGhhdCZuYnNwO3lv
dSZuYnNwO0ZpbHRlckluZGV4UmVhZGVyPC9ESVY+DQo8RElWPmltcGxlbWVudHMmbmJzcDthbGwm
bmJzcDtkb2N1bWVudCZuYnNwO2ZpbHRlcmluZywmbmJzcDtidXQmbmJzcDtJbmRleFNlYXJjaGVy
Jm5ic3A7ZG9lcyZuYnNwO25vdCZuYnNwO3Jlc3BlY3QmbmJzcDtpdC4mbmJzcDtJPC9ESVY+DQo8
RElWPmhhdmUmbmJzcDtubyZuYnNwO2lkZWEmbmJzcDt3aGF0Jm5ic3A7eW91Jm5ic3A7YXJlJm5i
c3A7ZG9pbmcsJm5ic3A7YnV0Jm5ic3A7dGhlJm5ic3A7Zm9sbG93aW5nJm5ic3A7dGhpbmcmbmJz
cDtuZWVkJm5ic3A7dG8mbmJzcDtiZSZuYnNwO2RvbmUmbmJzcDt0bzwvRElWPg0KPERJVj5jb3Jy
ZWN0eSZuYnNwO2ZpbHRlciZuYnNwO2RvY3VtZW50czo8L0RJVj4NCjxESVY+PC9ESVY+DQo8RElW
Pi0mbmJzcDtGaWx0ZXJJbmRleFJlYWRlciZuYnNwO3Nob3VsZCZuYnNwO2ltcGxlbWVudCZuYnNw
O2lzRGVsZXRlZCgpJm5ic3A7bWV0aG9kcyZuYnNwOyZhbXA7Jm5ic3A7Y28mbmJzcDsoSSZuYnNw
O2Fzc3VtZSZuYnNwO3lvdTwvRElWPg0KPERJVj5kaWQmbmJzcDt0aGlzKTwvRElWPg0KPERJVj4t
Jm5ic3A7RmlsdGVySW5kZXhSZWFkZXImbmJzcDtzaG91bGQmbmJzcDtmaWx0ZXImbmJzcDtwb3N0
aW5ncyZuYnNwO3JldHVybmVkOiZuYnNwO3Rlcm1Qb3NpdGlvbnMoLi4uKSZuYnNwO2FuZDwvRElW
Pg0KPERJVj50ZXJtRG9jcyguLi4pJm5ic3A7dG8mbmJzcDtleGNsdWRlJm5ic3A7ZGVsZXRlZCZu
YnNwO2RvY3VtZW50czwvRElWPg0KPERJVj4tJm5ic3A7cmV0dXJuJm5ic3A7dGhlJm5ic3A7Y29y
cmVjdCZuYnNwO251bWVyJm5ic3A7Zm9yJm5ic3A7bnVtRG9jcygpPC9ESVY+DQo8RElWPjwvRElW
Pg0KPERJVj5UaGUmbmJzcDtiaWdnZXN0Jm5ic3A7cHJvYmxlbSZuYnNwO3NpbmNlJm5ic3A7THVj
ZW5lJm5ic3A7Mi45Jm5ic3A7aXMmbmJzcDtvbmUmbmJzcDtzcGVjaWZpYyZuYnNwO21ldGhvZCZu
YnNwO3RoYXQmbmJzcDt3aWxsPC9ESVY+DQo8RElWPmNpcmN1bXZlbnQmbmJzcDthbGwmbmJzcDt5
b3UmbmJzcDtoYWQmbmJzcDtkb25lJm5ic3A7YWJvdmU6PC9ESVY+DQo8RElWPjwvRElWPg0KPERJ
Vj5nZXRTZXF1ZW50aWFsU3ViUmVhZGVycygpJm5ic3A7aXMmbmJzcDt1c2VkJm5ic3A7YnkmbmJz
cDtJbmRleFNlYXJjaGVyJm5ic3A7dG8mbmJzcDtkaXJlY3RseSZuYnNwO3Bhc3MmbmJzcDt0aGU8
L0RJVj4NCjxESVY+c2VhcmNoZXMmbmJzcDt0byZuYnNwO2FsbCZuYnNwO2F0b21pYyZuYnNwO3Nl
Z21lbnRzJm5ic3A7b2YmbmJzcDthJm5ic3A7TXVsdGlSZWFkZXIvRGlyZWN0b3J5UmVhZGVyJm5i
c3A7c3RydWN0dXJlLjwvRElWPg0KPERJVj5BcyZuYnNwO3RoZSZuYnNwO3N1YnJlYWRlcnMmbmJz
cDtyZXR1cm5lZCZuYnNwO2J5Jm5ic3A7dGhpcyZuYnNwO21ldGhvZCZuYnNwO2RvJm5ic3A7bm90
Jm5ic3A7aW1wbGVtZW50Jm5ic3A7dGhlJm5ic3A7YWJvdmUmbmJzcDsodGhleTwvRElWPg0KPERJ
Vj5hcmUmbmJzcDtwYXNzZWQmbmJzcDthcyZuYnNwO2lzJm5ic3A7YnkmbmJzcDt0aGUmbmJzcDtk
ZWZhdWx0Jm5ic3A7aW1wbCksJm5ic3A7SW5kZXhTZWFyY2hlciZuYnNwO3dpbGwmbmJzcDtpbiZu
YnNwO2ZhY3QmbmJzcDtvbmx5Jm5ic3A7dGFsazwvRElWPg0KPERJVj50byZuYnNwO3RoZW0mbmJz
cDthbmQmbmJzcDtzbyZuYnNwO2lnbm9yZSZuYnNwO3RoZSZuYnNwO2Fib3ZlJm5ic3A7bWV0aG9k
cyZuYnNwO29uJm5ic3A7dGhlJm5ic3A7dG9wLWxldmVsJm5ic3A7cmVhZGVyPC9ESVY+DQo8RElW
PjwvRElWPg0KPERJVj5UbyZuYnNwO2RvJm5ic3A7dGhpcyZuYnNwO2NvcnJlY3QmbmJzcDtkbyZu
YnNwO29uZSZuYnNwO29mJm5ic3A7dGhlJm5ic3A7Zm9sbG93aW5nOjwvRElWPg0KPERJVj4mbmJz
cDs8L0RJVj4NCjxESVY+LSZuYnNwO2Vhc3k6Jm5ic3A7b3ZlcnJpZGUmbmJzcDtnZXRTZXF1ZW50
aWFsU3ViUmVhZGVycygpJm5ic3A7dG8mbmJzcDtyZXR1cm4mbmJzcDtudWxsLCZuYnNwO3RoaXMm
bmJzcDt3aWxsJm5ic3A7bWFrZTwvRElWPg0KPERJVj50aGUmbmJzcDtmaWx0ZXJlZCZuYnNwO0lu
ZGV4UmVhZGVyJm5ic3A7aXRzZWxmJm5ic3A7YXRvbWljLCZuYnNwO3NvJm5ic3A7SW5kZXhTZWFy
Y2hlciZuYnNwO3dpbGwmbmJzcDt1c2UmbmJzcDtpdCZuYnNwO2R1cmluZzwvRElWPg0KPERJVj5z
ZWFyY2guJm5ic3A7VGhlJm5ic3A7YmFja3NpZGU6Jm5ic3A7c2VhcmNoZXMmbmJzcDttYXkmbmJz
cDtnZXQmbmJzcDtzaWduaWZpY2FudGx5Jm5ic3A7c2xvd2VyPC9ESVY+DQo8RElWPi0mbmJzcDtv
dmVycmlkZSZuYnNwO2dldFNlcXVlbnRpYWxTdWJSZWFkZXJzKCkmbmJzcDthbmQmbmJzcDthbHNv
Jm5ic3A7d3JhcCZuYnNwO2VhY2gmbmJzcDtzdWJyZWFkZXImbmJzcDtyZXR1cm5lZDwvRElWPg0K
PERJVj5ieSZuYnNwO3RoZSZuYnNwO2RlbGVnYXRlJm5ic3A7cmVhZGVyJm5ic3A7d2l0aCZuYnNw
O3lvdXImbmJzcDtpbXBsLjwvRElWPg0KPERJVj48L0RJVj4NCjxESVY+SWYmbmJzcDt5b3UmbmJz
cDtpbXBsZW1lbnQmbmJzcDt0aGUmbmJzcDtsYXN0Jm5ic3A7b3B0aW9uJm5ic3A7KGJ1dCZuYnNw
O2Fsc28mbmJzcDt0aGUmbmJzcDtyZXR1cm4tbnVsbCZuYnNwO29wdGlvbikmbmJzcDt5b3UmbmJz
cDttYXk8L0RJVj4NCjxESVY+YWxzbyZuYnNwO292ZXJyaWRlJm5ic3A7cmVvcGVuKCksJm5ic3A7
dG8mbmJzcDtjb3JyZWN0bHkmbmJzcDt3cmFwJm5ic3A7cmVvcGVuZWQmbmJzcDtzZWdtZW50cyZu
YnNwOy0mbmJzcDt5b3UmbmJzcDtuZWVkJm5ic3A7dG8mbmJzcDtkbzwvRElWPg0KPERJVj50aGlz
Jm5ic3A7aWYmbmJzcDt5b3UmbmJzcDt1c2UmbmJzcDtyZW9wZW4uPC9ESVY+DQo8RElWPjwvRElW
Pg0KPERJVj5JZiZuYnNwO3lvdSZuYnNwO2FyZSZuYnNwO2FscmVhZHkmbmJzcDt1c2luZyZuYnNw
O0x1Y2VuZSZuYnNwO3RydW5rJm5ic3A7KGNvbWluZyZuYnNwO3ZlcnNpb24mbmJzcDs0LjApLCZu
YnNwO3lvdSZuYnNwO2NhbiZuYnNwO2ZvbGxvdzwvRElWPg0KPERJVj50aGUmbmJzcDtmb2xsb3dp
bmcmbmJzcDtpc3N1ZTombmJzcDtodHRwczovL2lzc3Vlcy5hcGFjaGUub3JnL2ppcmEvYnJvd3Nl
L0xVQ0VORS0zMjEyPC9ESVY+DQo8RElWPkl0Jm5ic3A7d2lsbCZuYnNwO2ltcGxlbWVudCZuYnNw
O2V4YWN0bHkmbmJzcDt0aGUmbmJzcDthYm92ZSZuYnNwO29uY2UmbmJzcDtJJm5ic3A7aGF2ZSZu
YnNwO3RpbWUmbmJzcDt0byZuYnNwO2RvJm5ic3A7aXQmbmJzcDtmaW5hbGx5LiZuYnNwO0k8L0RJ
Vj4NCjxESVY+d2lsbCZuYnNwO3Bvc3QmbmJzcDthJm5ic3A7Zmlyc3QmbmJzcDtwYXRjaCZuYnNw
O3Nvb24uJm5ic3A7VGhpcyZuYnNwO3ZlcnNpb24mbmJzcDt3aWxsJm5ic3A7bm90Jm5ic3A7d29y
ayZuYnNwO3dpdGgmbmJzcDtMdWNlbmUmbmJzcDszLngsJm5ic3A7YXM8L0RJVj4NCjxESVY+aXQm
bmJzcDtpcyZuYnNwO2xvdHMmbmJzcDtvZiZuYnNwO3dvcmsmbmJzcDt0byZuYnNwO2dldCZuYnNw
O2FsbCZuYnNwO3RoaXMmbmJzcDtydW5uaW5nJm5ic3A7ZWFzaWx5Jm5ic3A7d2l0aCZuYnNwO0x1
Y2VuZSZuYnNwOzMueDwvRElWPg0KPERJVj4oZXNwZWNpYWxseSZuYnNwO3RoZSZuYnNwO2Fib3Zl
Jm5ic3A7dGVybVBvc2l0aW9ucywmbmJzcDt0ZXJtRG9jcyZuYnNwO21laG9kcykuJm5ic3A7SW4m
bmJzcDtMdWNlbmUmbmJzcDs0LjAmbmJzcDt0aGU8L0RJVj4NCjxESVY+ZmlsdGVyaW5nJm5ic3A7
b2YmbmJzcDtkb2N1bWVudHMmbmJzcDtpcyZuYnNwO211Y2gmbmJzcDtlYXNpZXIsJm5ic3A7eW91
Jm5ic3A7b25seSZuYnNwO2hhdmUmbmJzcDt0byZuYnNwO292ZXJyaWRlPC9ESVY+DQo8RElWPmdl
dERlbGV0ZWREb2NzKCkmbmJzcDthbmQmbmJzcDtudW1Eb2NzKCksJm5ic3A7ZXZlcnl0aGluZyZu
YnNwO2Vsc2UmbmJzcDtpcyZuYnNwO2F1dG9tYXRpY2FsbHkmbmJzcDtoYW5kbGVkITwvRElWPg0K
PERJVj48L0RJVj4NCjxESVY+SG9wZSZuYnNwO3RoYXQmbmJzcDtoZWxwcy48L0RJVj4NCjxESVY+
PC9ESVY+DQo8RElWPi0tLS0tPC9ESVY+DQo8RElWPlV3ZSZuYnNwO1NjaGluZGxlcjwvRElWPg0K
PERJVj5ILi1ILi1NZWllci1BbGxlZSZuYnNwOzYzLCZuYnNwO0QtMjgyMTMmbmJzcDtCcmVtZW48
L0RJVj4NCjxESVY+aHR0cDovL3d3dy50aGV0YXBoaS5kZTwvRElWPg0KPERJVj5lTWFpbDombmJz
cDt1d2VAdGhldGFwaGkuZGU8L0RJVj4NCjxESVY+PC9ESVY+DQo8RElWPiZndDsmbmJzcDstLS0t
LU9yaWdpbmFsJm5ic3A7TWVzc2FnZS0tLS0tPC9ESVY+DQo8RElWPiZndDsmbmJzcDtGcm9tOiZu
YnNwO+WRqOa0siZuYnNwO1ttYWlsdG86emhvdTUxOHpob3VAZ21haWwuY29tXTwvRElWPg0KPERJ
Vj4mZ3Q7Jm5ic3A7U2VudDombmJzcDtTdW5kYXksJm5ic3A7SnVuZSZuYnNwOzI2LCZuYnNwOzIw
MTEmbmJzcDs3OjA4Jm5ic3A7QU08L0RJVj4NCjxESVY+Jmd0OyZuYnNwO1RvOiZuYnNwO2phdmEt
dXNlcjwvRElWPg0KPERJVj4mZ3Q7Jm5ic3A7U3ViamVjdDombmJzcDtRdWVzdGlvbiZuYnNwO2Fi
b3V0Jm5ic3A7RmlsdGVySW5kZXhSZWFkZXImbmJzcDthbmQmbmJzcDtJbmRleFNlYXJjaGVyPC9E
SVY+DQo8RElWPiZndDsmbmJzcDs8L0RJVj4NCjxESVY+Jmd0OyZuYnNwO0hlbGxvLDwvRElWPg0K
PERJVj4mZ3Q7Jm5ic3A7SSZuYnNwO3dhbnQmbmJzcDt0byZuYnNwO2xldCZuYnNwO0luZGV4UmVh
ZGVyJm5ic3A7ZmluZGluZyZuYnNwO3RoZSZuYnNwO21vZGlmaWNhdGlvbiZuYnNwO2luJm5ic3A7
dGltZSxzbyZuYnNwO2kmbmJzcDt1c2U8L0RJVj4NCjxESVY+Jmd0OyZuYnNwO015RmlsdGVySW5k
ZXhSZWFkZXImbmJzcDt3aGljaCZuYnNwO2V4dGVuZCZuYnNwO0ZpbHRlckluZGV4UmVhZGVyJm5i
c3A7dG8mbmJzcDtjYWNoZSZuYnNwO3RoZSZuYnNwO2RlbGV0ZWQ8L0RJVj4NCjxESVY+Jmd0OyZu
YnNwO2RvY3VtZW50Jm5ic3A7aW4mbmJzcDtSQU0ud2hlbiZuYnNwO3RoaXMmbmJzcDtGaWx0ZXJJ
bmRleFJlYWRlciZuYnNwO2JlJm5ic3A7dGhlJm5ic3A7YXJndW1lbnQmbmJzcDtvZiZuYnNwOyZu
YnNwO2E8L0RJVj4NCjxESVY+Jmd0OyZuYnNwO0luZGV4U2VhcmNoZXIsaSZuYnNwO2ZvdW5kJm5i
c3A7dGhhdCZuYnNwO3RoaXMmbmJzcDtJbmRleFNlYXJjaGVyJm5ic3A7Y2FuJm5ic3A7bm90Jm5i
c3A7ZmlsdGVyJm5ic3A7dGhlJm5ic3A7ZGVsZXRlZDwvRElWPg0KPERJVj4mZ3Q7Jm5ic3A7ZG9j
dW1lbnQsc28mbmJzcDtpJm5ic3A7d2FudCZuYnNwO3RvJm5ic3A7a25vdyZuYnNwO2hvdyZuYnNw
O0luZGV4U2VhcmNoZXImbmJzcDthbmQmbmJzcDtGaWx0ZXJJbmRleFJlYWRlciZuYnNwO2JlPC9E
SVY+DQo8RElWPiZndDsmbmJzcDt1c2VkJm5ic3A7Y2FuJm5ic3A7ZGVsZXRlZCZuYnNwO2RvY3Vt
ZW50cyZuYnNwO2ZpbHRlcmVkPzwvRElWPg0KPERJVj4mZ3Q7Jm5ic3A7PC9ESVY+DQo8RElWPiZn
dDsmbmJzcDs8L0RJVj4NCjxESVY+Jmd0OyZuYnNwOyZuYnNwO3pob3V6aG91PC9ESVY+DQo8RElW
PiZndDsmbmJzcDstLS0tLS0tLS0tPC9ESVY+DQo8RElWPiZndDsmbmJzcDsyMDExLTA2LTI2PC9E
SVY+DQo8RElWPjwvRElWPg0KPERJVj48L0RJVj4NCjxESVY+LS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPC9ESVY+DQo8
RElWPlRvJm5ic3A7dW5zdWJzY3JpYmUsJm5ic3A7ZS1tYWlsOiZuYnNwO2phdmEtdXNlci11bnN1
YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZzwvRElWPg0KPERJVj5Gb3ImbmJzcDthZGRpdGlvbmFs
Jm5ic3A7Y29tbWFuZHMsJm5ic3A7ZS1tYWlsOiZuYnNwO2phdmEtdXNlci1oZWxwQGx1Y2VuZS5h
cGFjaGUub3JnPC9ESVY+DQo8RElWPjwvRElWPjwvRk9OVD48L0RJVj48L0JPRFk+PC9IVE1MPg0K

--=====003_Dragon284854630515_=====--

--=====001_Dragon284854630515_=====
Content-Type: text/plain; charset=us-ascii


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--=====001_Dragon284854630515_=====--


From java-user-return-50201-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jun 27 07:59:10 2011
Return-Path: <java-user-return-50201-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id EBA1F479D
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 27 Jun 2011 07:59:10 +0000 (UTC)
Received: (qmail 63765 invoked by uid 500); 27 Jun 2011 07:59:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62946 invoked by uid 500); 27 Jun 2011 07:58:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62938 invoked by uid 99); 27 Jun 2011 07:58:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Jun 2011 07:58:47 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jdevgl@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Jun 2011 07:58:39 +0000
Received: by wwi14 with SMTP id 14so2696971wwi.5
        for <java-user@lucene.apache.org>; Mon, 27 Jun 2011 00:58:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:message-id:date:from:user-agent:mime-version:to
         :subject:references:in-reply-to:content-type
         :content-transfer-encoding;
        bh=1g/TGYkfwTMFz/jO02RPfCyQMXP0N3RBJG3WAJQi8Vk=;
        b=rftODAcWAV6D4SIAfQaFMspCA1emcAr982XNaRiSolvKGOjG0t+A6Yzlnatu9BAw+K
         UyZJGNn2hLms+wj3jPomvfU66WgqMsnVn2fPw20E5RA0jsErGQ7O/aYvQH4JfDZJoWRf
         TFmkrBzZ08RsnD3/HaM+8WEN6iwn4ar3sqKTs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=SbFtuUDZH74ma0X7CP06zLVbBqHsQKrbiBN2B+kyKUjAHR3nBU9ankcZWyF/4vptrJ
         2IhuKSVeGHljQgtIliyeUia6b2Xi/V6WiXmBRWJQMzBO6rcdqcDZgSj6fAm8iN7n6K68
         9mvneBGyEdDGaMx1voLtuuksV3mIvO7wZqkQk=
Received: by 10.227.204.205 with SMTP id fn13mr5162642wbb.10.1309161499634;
        Mon, 27 Jun 2011 00:58:19 -0700 (PDT)
Received: from [192.168.20.14] (LPuteaux-151-41-16-99.w217-128.abo.wanadoo.fr [217.128.31.99])
        by mx.google.com with ESMTPS id fl19sm3883864wbb.49.2011.06.27.00.58.18
        (version=SSLv3 cipher=OTHER);
        Mon, 27 Jun 2011 00:58:19 -0700 (PDT)
Message-ID: <4E083827.7000901@gmail.com>
Date: Mon, 27 Jun 2011 09:58:31 +0200
From: "G.Long" <jdevgl@gmail.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; fr; rv:1.9.2.17) Gecko/20110414 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: question about wildcards
References: <4E00B849.101@gmail.com> <BANLkTiny_jJL9y-2-Hnn+ZzfFC4wx9VGCQ@mail.gmail.com> <4E00BBEF.7060302@gmail.com> <08230D4C8E666D479F6DE495A7684DCD0AC2ECDE@JSCPCWEXMAA1.bsg.ad.adp.com> <C4E4BCB8-DDCE-4988-88BD-BC0FF211F017@googlemail.com>
In-Reply-To: <C4E4BCB8-DDCE-4988-88BD-BC0FF211F017@googlemail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thank you for your advices :)

I'll try this.

Regards,
Gary

Le 21/06/2011 22:28, Danny Lade a crit :
> IMO, a "reversed word Index" does not work in this case, because he's looking for a word in the middle (See curi*).
>
> Another idea is to build word chunks and save them in a second index plus docID of the first index.
>
> e.g. security go to "security ecurity curity ... ity"
>
> This is much faster to search (just "curi*") but getting much bigger in index size. So it depends what is needed ...
>
> Greetings Danny
>
>
>
> Am 21.06.2011 um 19:43 schrieb "Hiller, Dean  x66079"<dean.hiller@broadridge.com>:
>
>> I wonder if you would be better off creating a second index with the words reversed.....depends on your application profile I guess and what you want, but an additional index may not be too bad in some cases to speed up the search.
>>
>> Dean
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50202-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun 28 08:47:30 2011
Return-Path: <java-user-return-50202-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 86DAE6A57
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 28 Jun 2011 08:47:30 +0000 (UTC)
Received: (qmail 45653 invoked by uid 500); 28 Jun 2011 08:47:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44771 invoked by uid 500); 28 Jun 2011 08:47:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44746 invoked by uid 99); 28 Jun 2011 08:47:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2011 08:47:00 +0000
X-ASF-Spam-Status: No, hits=0.6 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [207.126.144.129] (HELO eu1sys200aog110.obsmtp.com) (207.126.144.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2011 08:46:53 +0000
Received: from proxy02.detica.com ([193.36.230.103]) (using TLSv1) by eu1sys200aob110.postini.com ([207.126.147.11]) with SMTP
	ID DSNKTgmU5hmlSd68YGd8BdfbF2gYZTL1Pb7t@postini.com; Tue, 28 Jun 2011 08:46:33 UTC
Received: from blackex05.detica.com ([10.1.1.10]) by proxy02.detica.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Tue, 28 Jun 2011 09:46:29 +0100
Received: from uksrpblkexb01.detica.com ([10.1.1.38]) by blackex05.detica.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Tue, 28 Jun 2011 09:46:30 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01CC356F.E002FBDD"
Subject: Corrupt segments file full of zeros
Date: Tue, 28 Jun 2011 09:46:29 +0100
Message-ID: <614C529D389A5944B351F7DFB7594F24013C3984@uksrpblkexb01.detica.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Corrupt segments file full of zeros
Thread-Index: Acw1b9+VjAm4rGgySteJiFeXsQSjhA==
From: "Tarr, Gregory" <Gregory.tarr@detica.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 28 Jun 2011 08:46:30.0199 (UTC) FILETIME=[DFF61470:01CC356F]

------_=_NextPart_001_01CC356F.E002FBDD
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

We have a problem with our fileserver where our indexes are hosted
remotely, using Lucene 2.9.3.

This can mean that a segments file is written which is full of ASCII
zeros. Using the od -ah command, we get:

0000000 nul nul nul nul nul nul nul....etc

If opened in Luke, the index opens successfully but has zero documents.

Why does this open correctly in luke, and is there a procedure in the
lucene code that can verify a segments file, e.g. check whether it
refers to any segments?

Thanks

Greg


Please consider the environment before printing this email.

This message should be regarded as confidential. If you have received thi=
s email in error please notify the sender and destroy it immediately.

Statements of intent shall only become binding when confirmed in hard cop=
y by an authorised signatory.  The contents of this email may relate to d=
ealings with other companies under the control of Detica Limited, details=
 of which can be found at http://www.detica.com/statutory-information.

Detica Limited is registered in England under No: 1337451.
Registered offices: Surrey Research Park, Guildford, Surrey, GU2 7YP, Eng=
land.
=0D
------_=_NextPart_001_01CC356F.E002FBDD--

From java-user-return-50203-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun 28 09:36:48 2011
Return-Path: <java-user-return-50203-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2DE826BE7
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 28 Jun 2011 09:36:48 +0000 (UTC)
Received: (qmail 95467 invoked by uid 500); 28 Jun 2011 09:36:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94994 invoked by uid 500); 28 Jun 2011 09:36:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94971 invoked by uid 99); 28 Jun 2011 09:36:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2011 09:36:37 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of serera@gmail.com designates 209.85.213.176 as permitted sender)
Received: from [209.85.213.176] (HELO mail-yx0-f176.google.com) (209.85.213.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2011 09:36:31 +0000
Received: by yxd5 with SMTP id 5so5427yxd.35
        for <java-user@lucene.apache.org>; Tue, 28 Jun 2011 02:36:11 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=tKd0u26Bi8YmEZs1JhXVlcCRZTScHhEgHLE/YpuiCIc=;
        b=byaWynAu/otDt5kObSbmM/gcJWDxq8EIlQSM5nhujC/7IruQ9ZRDl0+dwvTHHYGytR
         lWIizovVfuRX9svqyB5xDfNLKjKvaBftgMZprZoXmNQcfR3wAUJBnVEYkbRV2k4QXNuP
         qDim+uz2ujJnZyirl4lQOWII307CbDOpkdY3U=
MIME-Version: 1.0
Received: by 10.90.235.17 with SMTP id i17mr8034716agh.112.1309253769773; Tue,
 28 Jun 2011 02:36:09 -0700 (PDT)
Received: by 10.90.72.14 with HTTP; Tue, 28 Jun 2011 02:36:09 -0700 (PDT)
In-Reply-To: <614C529D389A5944B351F7DFB7594F24013C3984@uksrpblkexb01.detica.com>
References: <614C529D389A5944B351F7DFB7594F24013C3984@uksrpblkexb01.detica.com>
Date: Tue, 28 Jun 2011 12:36:09 +0300
Message-ID: <BANLkTimeoqy-6Cnftes45XL4r-4NoVo2Ag@mail.gmail.com>
Subject: Re: Corrupt segments file full of zeros
From: Shai Erera <serera@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00163628477ede41a704a6c2656a

--00163628477ede41a704a6c2656a
Content-Type: text/plain; charset=ISO-8859-1

You can try the CheckIndex tool. You feed it a directory and call .check()
and it reports the results.

Shai

On Tue, Jun 28, 2011 at 11:46 AM, Tarr, Gregory <Gregory.tarr@detica.com>wrote:

> We have a problem with our fileserver where our indexes are hosted
> remotely, using Lucene 2.9.3.
>
> This can mean that a segments file is written which is full of ASCII
> zeros. Using the od -ah command, we get:
>
> 0000000 nul nul nul nul nul nul nul....etc
>
> If opened in Luke, the index opens successfully but has zero documents.
>
> Why does this open correctly in luke, and is there a procedure in the
> lucene code that can verify a segments file, e.g. check whether it
> refers to any segments?
>
> Thanks
>
> Greg
>
>
> Please consider the environment before printing this email.
>
> This message should be regarded as confidential. If you have received this
> email in error please notify the sender and destroy it immediately.
>
> Statements of intent shall only become binding when confirmed in hard copy
> by an authorised signatory.  The contents of this email may relate to
> dealings with other companies under the control of Detica Limited, details
> of which can be found at http://www.detica.com/statutory-information.
>
> Detica Limited is registered in England under No: 1337451.
> Registered offices: Surrey Research Park, Guildford, Surrey, GU2 7YP,
> England.
>
>

--00163628477ede41a704a6c2656a--

From java-user-return-50204-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun 28 09:57:45 2011
Return-Path: <java-user-return-50204-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 681B76761
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 28 Jun 2011 09:57:45 +0000 (UTC)
Received: (qmail 16207 invoked by uid 500); 28 Jun 2011 09:57:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16022 invoked by uid 500); 28 Jun 2011 09:57:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15602 invoked by uid 99); 28 Jun 2011 09:57:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2011 09:57:01 +0000
X-ASF-Spam-Status: No, hits=-1.6 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [207.126.144.121] (HELO eu1sys200aog106.obsmtp.com) (207.126.144.121)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2011 09:56:54 +0000
Received: from proxy02.detica.com ([193.36.230.103]) (using TLSv1) by eu1sys200aob106.postini.com ([207.126.147.11]) with SMTP
	ID DSNKTgmlN/eXUzDEgz+HBHV03CGio9WgUu5W@postini.com; Tue, 28 Jun 2011 09:56:09 UTC
Received: from blackex05.detica.com ([10.1.1.10]) by proxy02.detica.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Tue, 28 Jun 2011 10:56:05 +0100
Received: from uksrpblkexb01.detica.com ([10.1.1.38]) by blackex05.detica.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Tue, 28 Jun 2011 10:56:06 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Corrupt segments file full of zeros
Date: Tue, 28 Jun 2011 10:56:05 +0100
Message-ID: <614C529D389A5944B351F7DFB7594F24013C39C6@uksrpblkexb01.detica.com>
In-Reply-To: <BANLkTimeoqy-6Cnftes45XL4r-4NoVo2Ag@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Corrupt segments file full of zeros
Thread-Index: Acw1dufXOpZI3CMgQaOzeHsWRubwGQAAofFg
References: <614C529D389A5944B351F7DFB7594F24013C3984@uksrpblkexb01.detica.com> <BANLkTimeoqy-6Cnftes45XL4r-4NoVo2Ag@mail.gmail.com>
From: "Tarr, Gregory" <Gregory.tarr@detica.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 28 Jun 2011 09:56:06.0920 (UTC) FILETIME=[997B2080:01CC3579]

Yes I have done that, and you just get "No problems were detected with
this index"

Surely there is a major problem with this index?

Also the check() procedure takes a long time - is there any way you can
just do a health check on the segments file?

Thanks

Greg=20

-----Original Message-----
From: Shai Erera [mailto:serera@gmail.com]=20
Sent: 28 June 2011 10:36
To: java-user@lucene.apache.org
Subject: Re: Corrupt segments file full of zeros

You can try the CheckIndex tool. You feed it a directory and call
.check() and it reports the results.

Shai

On Tue, Jun 28, 2011 at 11:46 AM, Tarr, Gregory
<Gregory.tarr@detica.com>wrote:

> We have a problem with our fileserver where our indexes are hosted=20
> remotely, using Lucene 2.9.3.
>
> This can mean that a segments file is written which is full of ASCII=20
> zeros. Using the od -ah command, we get:
>
> 0000000 nul nul nul nul nul nul nul....etc
>
> If opened in Luke, the index opens successfully but has zero
documents.
>
> Why does this open correctly in luke, and is there a procedure in the=20
> lucene code that can verify a segments file, e.g. check whether it=20
> refers to any segments?
>
> Thanks
>
> Greg
>
>
> Please consider the environment before printing this email.
>
> This message should be regarded as confidential. If you have received=20
> this email in error please notify the sender and destroy it
immediately.
>
> Statements of intent shall only become binding when confirmed in hard=20
> copy by an authorised signatory.  The contents of this email may=20
> relate to dealings with other companies under the control of Detica=20
> Limited, details of which can be found at
http://www.detica.com/statutory-information.
>
> Detica Limited is registered in England under No: 1337451.
> Registered offices: Surrey Research Park, Guildford, Surrey, GU2 7YP,=20
> England.
>
>
Please consider the environment before printing this email.

This message should be regarded as confidential. If you have received thi=
s email in error please notify the sender and destroy it immediately.

Statements of intent shall only become binding when confirmed in hard cop=
y by an authorised signatory.  The contents of this email may relate to d=
ealings with other companies under the control of Detica Limited, details=
 of which can be found at http://www.detica.com/statutory-information.

Detica Limited is registered in England under No: 1337451.
Registered offices: Surrey Research Park, Guildford, Surrey, GU2 7YP, Eng=
land.
=0D

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50205-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun 28 11:32:56 2011
Return-Path: <java-user-return-50205-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 452EA6CB9
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 28 Jun 2011 11:32:56 +0000 (UTC)
Received: (qmail 45364 invoked by uid 500); 28 Jun 2011 11:32:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45242 invoked by uid 500); 28 Jun 2011 11:32:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45232 invoked by uid 99); 28 Jun 2011 11:32:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2011 11:32:52 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2011 11:32:46 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id A8E92D36002
	for <java-user@lucene.apache.org>; Tue, 28 Jun 2011 13:32:23 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 3e53reNusRhO for <java-user@lucene.apache.org>;
	Tue, 28 Jun 2011 13:32:18 +0200 (CEST)
Received: from VEGA (gate1.marum.de [134.102.237.1])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 0F5B6D36001
	for <java-user@lucene.apache.org>; Tue, 28 Jun 2011 13:32:17 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <614C529D389A5944B351F7DFB7594F24013C3984@uksrpblkexb01.detica.com> <BANLkTimeoqy-6Cnftes45XL4r-4NoVo2Ag@mail.gmail.com> <614C529D389A5944B351F7DFB7594F24013C39C6@uksrpblkexb01.detica.com>
In-Reply-To: <614C529D389A5944B351F7DFB7594F24013C39C6@uksrpblkexb01.detica.com>
Subject: RE: Corrupt segments file full of zeros
Date: Tue, 28 Jun 2011 13:32:34 +0200
Message-ID: <009a01cc3587$17490420$45db0c60$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQILcKGA7aeiUANbPYKqJuyPK9VaUAH/jw6fAXPqQSuUOJDxIA==
Content-Language: de

So where is the problem at all? Why should a segments file not contain lots
of zeroes? If the index is not corrupt all is fine.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Tarr, Gregory [mailto:Gregory.tarr@detica.com]
> Sent: Tuesday, June 28, 2011 11:56 AM
> To: java-user@lucene.apache.org
> Subject: RE: Corrupt segments file full of zeros
> 
> Yes I have done that, and you just get "No problems were detected with
this
> index"
> 
> Surely there is a major problem with this index?
> 
> Also the check() procedure takes a long time - is there any way you can
just
> do a health check on the segments file?
> 
> Thanks
> 
> Greg
> 
> -----Original Message-----
> From: Shai Erera [mailto:serera@gmail.com]
> Sent: 28 June 2011 10:36
> To: java-user@lucene.apache.org
> Subject: Re: Corrupt segments file full of zeros
> 
> You can try the CheckIndex tool. You feed it a directory and call
> .check() and it reports the results.
> 
> Shai
> 
> On Tue, Jun 28, 2011 at 11:46 AM, Tarr, Gregory
> <Gregory.tarr@detica.com>wrote:
> 
> > We have a problem with our fileserver where our indexes are hosted
> > remotely, using Lucene 2.9.3.
> >
> > This can mean that a segments file is written which is full of ASCII
> > zeros. Using the od -ah command, we get:
> >
> > 0000000 nul nul nul nul nul nul nul....etc
> >
> > If opened in Luke, the index opens successfully but has zero
> documents.
> >
> > Why does this open correctly in luke, and is there a procedure in the
> > lucene code that can verify a segments file, e.g. check whether it
> > refers to any segments?
> >
> > Thanks
> >
> > Greg
> >
> >
> > Please consider the environment before printing this email.
> >
> > This message should be regarded as confidential. If you have received
> > this email in error please notify the sender and destroy it
> immediately.
> >
> > Statements of intent shall only become binding when confirmed in hard
> > copy by an authorised signatory.  The contents of this email may
> > relate to dealings with other companies under the control of Detica
> > Limited, details of which can be found at
> http://www.detica.com/statutory-information.
> >
> > Detica Limited is registered in England under No: 1337451.
> > Registered offices: Surrey Research Park, Guildford, Surrey, GU2 7YP,
> > England.
> >
> >
> Please consider the environment before printing this email.
> 
> This message should be regarded as confidential. If you have received this
> email in error please notify the sender and destroy it immediately.
> 
> Statements of intent shall only become binding when confirmed in hard copy
> by an authorised signatory.  The contents of this email may relate to
dealings
> with other companies under the control of Detica Limited, details of which
> can be found at http://www.detica.com/statutory-information.
> 
> Detica Limited is registered in England under No: 1337451.
> Registered offices: Surrey Research Park, Guildford, Surrey, GU2 7YP,
> England.
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50206-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun 28 11:55:56 2011
Return-Path: <java-user-return-50206-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 82101603C
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 28 Jun 2011 11:55:56 +0000 (UTC)
Received: (qmail 90131 invoked by uid 500); 28 Jun 2011 11:55:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90040 invoked by uid 500); 28 Jun 2011 11:55:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90032 invoked by uid 99); 28 Jun 2011 11:55:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2011 11:55:53 +0000
X-ASF-Spam-Status: No, hits=-1.6 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [207.126.144.117] (HELO eu1sys200aog104.obsmtp.com) (207.126.144.117)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2011 11:55:48 +0000
Received: from proxy03.detica.com ([193.36.230.103]) (using TLSv1) by eu1sys200aob104.postini.com ([207.126.147.11]) with SMTP
	ID DSNKTgnBLXC0dxSpqLTkJHMxKh10b3pc4KDw@postini.com; Tue, 28 Jun 2011 11:55:27 UTC
Received: from blackex04.detica.com ([10.1.1.9]) by proxy03.detica.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Tue, 28 Jun 2011 12:55:24 +0100
Received: from uksrpblkexb01.detica.com ([10.1.1.38]) by blackex04.detica.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Tue, 28 Jun 2011 12:55:25 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Corrupt segments file full of zeros
Date: Tue, 28 Jun 2011 12:55:24 +0100
Message-ID: <614C529D389A5944B351F7DFB7594F24013C3A20@uksrpblkexb01.detica.com>
In-Reply-To: <009a01cc3587$17490420$45db0c60$@thetaphi.de>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Corrupt segments file full of zeros
Thread-Index: AQILcKGA7aeiUANbPYKqJuyPK9VaUAH/jw6fAXPqQSuUOJDxIIAABBow
References: <614C529D389A5944B351F7DFB7594F24013C3984@uksrpblkexb01.detica.com> <BANLkTimeoqy-6Cnftes45XL4r-4NoVo2Ag@mail.gmail.com> <614C529D389A5944B351F7DFB7594F24013C39C6@uksrpblkexb01.detica.com> <009a01cc3587$17490420$45db0c60$@thetaphi.de>
From: "Tarr, Gregory" <Gregory.tarr@detica.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 28 Jun 2011 11:55:25.0017 (UTC) FILETIME=[440A0C90:01CC358A]

The segments file containing lots of zeros means that the index has no
segments.

We could run the following to check this:

SegmentInfos sis =3D new SegmentInfos();
sis.read(indexDir);
int numSegments =3D sis.size();
if (numSegments < 1) { // index has no segments }

Greg=20

-----Original Message-----
From: Uwe Schindler [mailto:uwe@thetaphi.de]=20
Sent: 28 June 2011 12:33
To: java-user@lucene.apache.org
Subject: RE: Corrupt segments file full of zeros

So where is the problem at all? Why should a segments file not contain
lots of zeroes? If the index is not corrupt all is fine.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Tarr, Gregory [mailto:Gregory.tarr@detica.com]
> Sent: Tuesday, June 28, 2011 11:56 AM
> To: java-user@lucene.apache.org
> Subject: RE: Corrupt segments file full of zeros
>=20
> Yes I have done that, and you just get "No problems were detected with
this
> index"
>=20
> Surely there is a major problem with this index?
>=20
> Also the check() procedure takes a long time - is there any way you=20
> can
just
> do a health check on the segments file?
>=20
> Thanks
>=20
> Greg
>=20
> -----Original Message-----
> From: Shai Erera [mailto:serera@gmail.com]
> Sent: 28 June 2011 10:36
> To: java-user@lucene.apache.org
> Subject: Re: Corrupt segments file full of zeros
>=20
> You can try the CheckIndex tool. You feed it a directory and call
> .check() and it reports the results.
>=20
> Shai
>=20
> On Tue, Jun 28, 2011 at 11:46 AM, Tarr, Gregory
> <Gregory.tarr@detica.com>wrote:
>=20
> > We have a problem with our fileserver where our indexes are hosted=20
> > remotely, using Lucene 2.9.3.
> >
> > This can mean that a segments file is written which is full of ASCII

> > zeros. Using the od -ah command, we get:
> >
> > 0000000 nul nul nul nul nul nul nul....etc
> >
> > If opened in Luke, the index opens successfully but has zero
> documents.
> >
> > Why does this open correctly in luke, and is there a procedure in=20
> > the lucene code that can verify a segments file, e.g. check whether=20
> > it refers to any segments?
> >
> > Thanks
> >
> > Greg
> >
> >
> > Please consider the environment before printing this email.
> >
> > This message should be regarded as confidential. If you have=20
> > received this email in error please notify the sender and destroy it
> immediately.
> >
> > Statements of intent shall only become binding when confirmed in=20
> > hard copy by an authorised signatory.  The contents of this email=20
> > may relate to dealings with other companies under the control of=20
> > Detica Limited, details of which can be found at
> http://www.detica.com/statutory-information.
> >
> > Detica Limited is registered in England under No: 1337451.
> > Registered offices: Surrey Research Park, Guildford, Surrey, GU2=20
> > 7YP, England.
> >
> >
> Please consider the environment before printing this email.
>=20
> This message should be regarded as confidential. If you have received=20
> this email in error please notify the sender and destroy it
immediately.
>=20
> Statements of intent shall only become binding when confirmed in hard=20
> copy by an authorised signatory.  The contents of this email may=20
> relate to
dealings
> with other companies under the control of Detica Limited, details of=20
> which can be found at http://www.detica.com/statutory-information.
>=20
> Detica Limited is registered in England under No: 1337451.
> Registered offices: Surrey Research Park, Guildford, Surrey, GU2 7YP,=20
> England.
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

Please consider the environment before printing this email.

This message should be regarded as confidential. If you have received thi=
s email in error please notify the sender and destroy it immediately.

Statements of intent shall only become binding when confirmed in hard cop=
y by an authorised signatory.  The contents of this email may relate to d=
ealings with other companies under the control of Detica Limited, details=
 of which can be found at http://www.detica.com/statutory-information.

Detica Limited is registered in England under No: 1337451.
Registered offices: Surrey Research Park, Guildford, Surrey, GU2 7YP, Eng=
land.
=0D

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50207-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun 28 12:09:30 2011
Return-Path: <java-user-return-50207-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DE1736A02
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 28 Jun 2011 12:09:29 +0000 (UTC)
Received: (qmail 2849 invoked by uid 500); 28 Jun 2011 12:09:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2577 invoked by uid 500); 28 Jun 2011 12:09:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2569 invoked by uid 99); 28 Jun 2011 12:09:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2011 12:09:26 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [77.238.189.70] (HELO nm17.bullet.mail.ird.yahoo.com) (77.238.189.70)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 28 Jun 2011 12:09:20 +0000
Received: from [77.238.189.230] by nm17.bullet.mail.ird.yahoo.com with NNFMP; 28 Jun 2011 12:08:58 -0000
Received: from [212.82.108.112] by tm11.bullet.mail.ird.yahoo.com with NNFMP; 28 Jun 2011 12:08:58 -0000
Received: from [127.0.0.1] by omp1021.mail.ird.yahoo.com with NNFMP; 28 Jun 2011 12:08:58 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 518681.74712.bm@omp1021.mail.ird.yahoo.com
Received: (qmail 73161 invoked by uid 60001); 28 Jun 2011 12:08:58 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1309262938; bh=FGWPbred5DC/tlAGco/Z3RVTjB0RoQIXAnBgHAeb6Wc=; h=X-YMail-OSG:Received:X-Mailer:References:Message-ID:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=GDUzxEcFTV7lBkuy9luThIj77fLu3X9lfnhWHRw4ZmJPHasiuUckO707itVSQDqMCb/ZmqxYA/lKhpy1tQuc0bD0qgu0gIjaDxkQEiYGyUSApbfRNVew1kAD1Yl926QOQCzxzkzCtCMAEE+5v1RJAeGF1O/Ycb5Jp1oyBupxtEQ=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:References:Message-ID:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=sM1eh71Bk8d36Sp+UFeys+LzSYDqqxTD4hL23ebK13M13Pw9wy4DLTsNXniKBNflf4hJUQMWvgJKo40RmhxOBFNOgtl34T29zGvbSns12PG18dvn4SU8FIBHlDHMdb3doSxjPjsC8DLedt0NLNBSL/s9m9rgQcvDAGmzzVmgMT4=;
X-YMail-OSG: Mfl_.2YVM1l4CGRqqsUfeVxNowMe0I1eo70khlCm33XJ5bE
 WudVmmCKl
Received: from [194.116.198.179] by web29005.mail.ird.yahoo.com via HTTP; Tue, 28 Jun 2011 13:08:57 BST
X-Mailer: YahooMailRC/572 YahooMailWebService/0.8.112.307740
References: <614C529D389A5944B351F7DFB7594F24013C3984@uksrpblkexb01.detica.com> <BANLkTimeoqy-6Cnftes45XL4r-4NoVo2Ag@mail.gmail.com> <614C529D389A5944B351F7DFB7594F24013C39C6@uksrpblkexb01.detica.com> <009a01cc3587$17490420$45db0c60$@thetaphi.de>
Message-ID: <1309262937.71635.YahooMailRC@web29005.mail.ird.yahoo.com>
Date: Tue, 28 Jun 2011 13:08:57 +0100 (BST)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Corrupt segments file full of zeros
To: java-user@lucene.apache.org
In-Reply-To: <009a01cc3587$17490420$45db0c60$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable

According to the spec there should at least be an Int32 of  -9 to declare t=
he =0AFormat - http://lucene.apache.org/java/2_9_3/fileformats.html#Segment=
s File=0A=0A=0A=0A----- Original Message ----=0AFrom: Uwe Schindler <uwe@th=
etaphi.de>=0ATo: java-user@lucene.apache.org=0ASent: Tue, 28 June, 2011 12:=
32:34=0ASubject: RE: Corrupt segments file full of zeros=0A=0ASo where is t=
he problem at all? Why should a segments file not contain lots=0Aof zeroes?=
 If the index is not corrupt all is fine.=0A=0A-----=0AUwe Schindler=0AH.-H=
.-Meier-Allee 63, D-28213 Bremen=0Ahttp://www.thetaphi.de=0AeMail: uwe@thet=
aphi.de=0A=0A=0A> -----Original Message-----=0A> From: Tarr, Gregory [mailt=
o:Gregory.tarr@detica.com]=0A> Sent: Tuesday, June 28, 2011 11:56 AM=0A> To=
: java-user@lucene.apache.org=0A> Subject: RE: Corrupt segments file full o=
f zeros=0A> =0A> Yes I have done that, and you just get "No problems were d=
etected with=0Athis=0A> index"=0A> =0A> Surely there is a major problem wit=
h this index?=0A> =0A> Also the check() procedure takes a long time - is th=
ere any way you can=0Ajust=0A> do a health check on the segments file?=0A> =
=0A> Thanks=0A> =0A> Greg=0A> =0A> -----Original Message-----=0A> From: Sha=
i Erera [mailto:serera@gmail.com]=0A> Sent: 28 June 2011 10:36=0A> To: java=
-user@lucene.apache.org=0A> Subject: Re: Corrupt segments file full of zero=
s=0A> =0A> You can try the CheckIndex tool. You feed it a directory and cal=
l=0A> .check() and it reports the results.=0A> =0A> Shai=0A> =0A> On Tue, J=
un 28, 2011 at 11:46 AM, Tarr, Gregory=0A> <Gregory.tarr@detica.com>wrote:=
=0A> =0A> > We have a problem with our fileserver where our indexes are hos=
ted=0A> > remotely, using Lucene 2.9.3.=0A> >=0A> > This can mean that a se=
gments file is written which is full of ASCII=0A> > zeros. Using the od -ah=
 command, we get:=0A> >=0A> > 0000000 nul nul nul nul nul nul nul....etc=0A=
> >=0A> > If opened in Luke, the index opens successfully but has zero=0A> =
documents.=0A> >=0A> > Why does this open correctly in luke, and is there a=
 procedure in the=0A> > lucene code that can verify a segments file, e.g. c=
heck whether it=0A> > refers to any segments?=0A> >=0A> > Thanks=0A> >=0A> =
> Greg=0A> >=0A> >=0A> > Please consider the environment before printing th=
is email.=0A> >=0A> > This message should be regarded as confidential. If y=
ou have received=0A> > this email in error please notify the sender and des=
troy it=0A> immediately.=0A> >=0A> > Statements of intent shall only become=
 binding when confirmed in hard=0A> > copy by an authorised signatory.  The=
 contents of this email may=0A> > relate to dealings with other companies u=
nder the control of Detica=0A> > Limited, details of which can be found at=
=0A> http://www.detica.com/statutory-information.=0A> >=0A> > Detica Limite=
d is registered in England under No: 1337451.=0A> > Registered offices: Sur=
rey Research Park, Guildford, Surrey, GU2 7YP,=0A> > England.=0A> >=0A> >=
=0A> Please consider the environment before printing this email.=0A> =0A> T=
his message should be regarded as confidential. If you have received this=
=0A> email in error please notify the sender and destroy it immediately.=0A=
> =0A> Statements of intent shall only become binding when confirmed in har=
d copy=0A> by an authorised signatory.  The contents of this email may rela=
te to=0Adealings=0A> with other companies under the control of Detica Limit=
ed, details of which=0A> can be found at http://www.detica.com/statutory-in=
formation.=0A> =0A> Detica Limited is registered in England under No: 13374=
51.=0A> Registered offices: Surrey Research Park, Guildford, Surrey, GU2 7Y=
P,=0A> England.=0A> =0A> --------------------------------------------------=
-------------------=0A> To unsubscribe, e-mail: java-user-unsubscribe@lucen=
e.apache.org=0A> For additional commands, e-mail: java-user-help@lucene.apa=
che.org=0A=0A=0A=0A--------------------------------------------------------=
-------------=0ATo unsubscribe, e-mail: java-user-unsubscribe@lucene.apache=
.org=0AFor additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50208-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun 28 12:18:05 2011
Return-Path: <java-user-return-50208-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 233C56737
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 28 Jun 2011 12:18:05 +0000 (UTC)
Received: (qmail 13209 invoked by uid 500); 28 Jun 2011 12:18:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13097 invoked by uid 500); 28 Jun 2011 12:18:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13089 invoked by uid 99); 28 Jun 2011 12:18:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2011 12:18:01 +0000
X-ASF-Spam-Status: No, hits=-1.6 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [207.126.144.147] (HELO eu1sys200aog119.obsmtp.com) (207.126.144.147)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2011 12:17:55 +0000
Received: from proxy03.detica.com ([193.36.230.103]) (using TLSv1) by eu1sys200aob119.postini.com ([207.126.147.11]) with SMTP
	ID DSNKTgnGXs9p6fojaySLtz9YFJ+2DGnSJBbB@postini.com; Tue, 28 Jun 2011 12:17:34 UTC
Received: from blackex04.detica.com ([10.1.1.9]) by proxy03.detica.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Tue, 28 Jun 2011 13:17:19 +0100
Received: from uksrpblkexb01.detica.com ([10.1.1.38]) by blackex04.detica.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Tue, 28 Jun 2011 13:17:20 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Corrupt segments file full of zeros
Date: Tue, 28 Jun 2011 13:17:18 +0100
Message-ID: <614C529D389A5944B351F7DFB7594F24013C3A31@uksrpblkexb01.detica.com>
In-Reply-To: <1309262937.71635.YahooMailRC@web29005.mail.ird.yahoo.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Corrupt segments file full of zeros
Thread-Index: Acw1jDyGXi3fHRQ5SOmyIJRLZzTxfwAAPOOQ
References: <614C529D389A5944B351F7DFB7594F24013C3984@uksrpblkexb01.detica.com> <BANLkTimeoqy-6Cnftes45XL4r-4NoVo2Ag@mail.gmail.com> <614C529D389A5944B351F7DFB7594F24013C39C6@uksrpblkexb01.detica.com> <009a01cc3587$17490420$45db0c60$@thetaphi.de> <1309262937.71635.YahooMailRC@web29005.mail.ird.yahoo.com>
From: "Tarr, Gregory" <Gregory.tarr@detica.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 28 Jun 2011 12:17:20.0492 (UTC) FILETIME=[541F9AC0:01CC358D]
X-Virus-Checked: Checked by ClamAV on apache.org

We don't have a -9 in the file. It isn't a valid lucene segments file,
as it only contains zeros.

We're wondering why this opens in Luke, and why the CheckIndex reports
that the index is OK.=20

-----Original Message-----
From: mark harwood [mailto:markharw00d@yahoo.co.uk]=20
Sent: 28 June 2011 13:09
To: java-user@lucene.apache.org
Subject: Re: Corrupt segments file full of zeros

According to the spec there should at least be an Int32 of  -9 to
declare the Format -
http://lucene.apache.org/java/2_9_3/fileformats.html#Segments File



----- Original Message ----
From: Uwe Schindler <uwe@thetaphi.de>
To: java-user@lucene.apache.org
Sent: Tue, 28 June, 2011 12:32:34
Subject: RE: Corrupt segments file full of zeros

So where is the problem at all? Why should a segments file not contain
lots
of zeroes? If the index is not corrupt all is fine.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Tarr, Gregory [mailto:Gregory.tarr@detica.com]
> Sent: Tuesday, June 28, 2011 11:56 AM
> To: java-user@lucene.apache.org
> Subject: RE: Corrupt segments file full of zeros
>=20
> Yes I have done that, and you just get "No problems were detected with
this
> index"
>=20
> Surely there is a major problem with this index?
>=20
> Also the check() procedure takes a long time - is there any way you
can
just
> do a health check on the segments file?
>=20
> Thanks
>=20
> Greg
>=20
> -----Original Message-----
> From: Shai Erera [mailto:serera@gmail.com]
> Sent: 28 June 2011 10:36
> To: java-user@lucene.apache.org
> Subject: Re: Corrupt segments file full of zeros
>=20
> You can try the CheckIndex tool. You feed it a directory and call
> .check() and it reports the results.
>=20
> Shai
>=20
> On Tue, Jun 28, 2011 at 11:46 AM, Tarr, Gregory
> <Gregory.tarr@detica.com>wrote:
>=20
> > We have a problem with our fileserver where our indexes are hosted
> > remotely, using Lucene 2.9.3.
> >
> > This can mean that a segments file is written which is full of ASCII
> > zeros. Using the od -ah command, we get:
> >
> > 0000000 nul nul nul nul nul nul nul....etc
> >
> > If opened in Luke, the index opens successfully but has zero
> documents.
> >
> > Why does this open correctly in luke, and is there a procedure in
the
> > lucene code that can verify a segments file, e.g. check whether it
> > refers to any segments?
> >
> > Thanks
> >
> > Greg
> >
> >
> > Please consider the environment before printing this email.
> >
> > This message should be regarded as confidential. If you have
received
> > this email in error please notify the sender and destroy it
> immediately.
> >
> > Statements of intent shall only become binding when confirmed in
hard
> > copy by an authorised signatory.  The contents of this email may
> > relate to dealings with other companies under the control of Detica
> > Limited, details of which can be found at
> http://www.detica.com/statutory-information.
> >
> > Detica Limited is registered in England under No: 1337451.
> > Registered offices: Surrey Research Park, Guildford, Surrey, GU2
7YP,
> > England.
> >
> >
> Please consider the environment before printing this email.
>=20
> This message should be regarded as confidential. If you have received
this
> email in error please notify the sender and destroy it immediately.
>=20
> Statements of intent shall only become binding when confirmed in hard
copy
> by an authorised signatory.  The contents of this email may relate to
dealings
> with other companies under the control of Detica Limited, details of
which
> can be found at http://www.detica.com/statutory-information.
>=20
> Detica Limited is registered in England under No: 1337451.
> Registered offices: Surrey Research Park, Guildford, Surrey, GU2 7YP,
> England.
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

Please consider the environment before printing this email.

This message should be regarded as confidential. If you have received thi=
s email in error please notify the sender and destroy it immediately.

Statements of intent shall only become binding when confirmed in hard cop=
y by an authorised signatory.  The contents of this email may relate to d=
ealings with other companies under the control of Detica Limited, details=
 of which can be found at http://www.detica.com/statutory-information.

Detica Limited is registered in England under No: 1337451.
Registered offices: Surrey Research Park, Guildford, Surrey, GU2 7YP, Eng=
land.
=0D

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50209-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun 28 12:26:12 2011
Return-Path: <java-user-return-50209-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BB7CB639F
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 28 Jun 2011 12:26:12 +0000 (UTC)
Received: (qmail 26772 invoked by uid 500); 28 Jun 2011 12:26:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26617 invoked by uid 500); 28 Jun 2011 12:26:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26603 invoked by uid 99); 28 Jun 2011 12:26:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2011 12:26:09 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.220.176] (HELO mail-vx0-f176.google.com) (209.85.220.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2011 12:26:05 +0000
Received: by vxd2 with SMTP id 2so138108vxd.35
        for <java-user@lucene.apache.org>; Tue, 28 Jun 2011 05:25:44 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.52.180.234 with SMTP id dr10mr10625189vdc.124.1309263943977;
 Tue, 28 Jun 2011 05:25:43 -0700 (PDT)
Received: by 10.52.157.226 with HTTP; Tue, 28 Jun 2011 05:25:43 -0700 (PDT)
In-Reply-To: <614C529D389A5944B351F7DFB7594F24013C3A31@uksrpblkexb01.detica.com>
References: <614C529D389A5944B351F7DFB7594F24013C3984@uksrpblkexb01.detica.com>
	<BANLkTimeoqy-6Cnftes45XL4r-4NoVo2Ag@mail.gmail.com>
	<614C529D389A5944B351F7DFB7594F24013C39C6@uksrpblkexb01.detica.com>
	<009a01cc3587$17490420$45db0c60$@thetaphi.de>
	<1309262937.71635.YahooMailRC@web29005.mail.ird.yahoo.com>
	<614C529D389A5944B351F7DFB7594F24013C3A31@uksrpblkexb01.detica.com>
Date: Tue, 28 Jun 2011 08:25:43 -0400
Message-ID: <BANLkTi=4UQ1dQ+P4quhUxYX3TiS_YhQhng@mail.gmail.com>
Subject: Re: Corrupt segments file full of zeros
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Is there only one segments_N file in the index (the one with all 0s)?
Or is there a segments_(N-1) too?

Mike McCandless

http://blog.mikemccandless.com

On Tue, Jun 28, 2011 at 8:17 AM, Tarr, Gregory <Gregory.tarr@detica.com> wr=
ote:
> We don't have a -9 in the file. It isn't a valid lucene segments file,
> as it only contains zeros.
>
> We're wondering why this opens in Luke, and why the CheckIndex reports
> that the index is OK.
>
> -----Original Message-----
> From: mark harwood [mailto:markharw00d@yahoo.co.uk]
> Sent: 28 June 2011 13:09
> To: java-user@lucene.apache.org
> Subject: Re: Corrupt segments file full of zeros
>
> According to the spec there should at least be an Int32 of =A0-9 to
> declare the Format -
> http://lucene.apache.org/java/2_9_3/fileformats.html#Segments File
>
>
>
> ----- Original Message ----
> From: Uwe Schindler <uwe@thetaphi.de>
> To: java-user@lucene.apache.org
> Sent: Tue, 28 June, 2011 12:32:34
> Subject: RE: Corrupt segments file full of zeros
>
> So where is the problem at all? Why should a segments file not contain
> lots
> of zeroes? If the index is not corrupt all is fine.
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
>
>> -----Original Message-----
>> From: Tarr, Gregory [mailto:Gregory.tarr@detica.com]
>> Sent: Tuesday, June 28, 2011 11:56 AM
>> To: java-user@lucene.apache.org
>> Subject: RE: Corrupt segments file full of zeros
>>
>> Yes I have done that, and you just get "No problems were detected with
> this
>> index"
>>
>> Surely there is a major problem with this index?
>>
>> Also the check() procedure takes a long time - is there any way you
> can
> just
>> do a health check on the segments file?
>>
>> Thanks
>>
>> Greg
>>
>> -----Original Message-----
>> From: Shai Erera [mailto:serera@gmail.com]
>> Sent: 28 June 2011 10:36
>> To: java-user@lucene.apache.org
>> Subject: Re: Corrupt segments file full of zeros
>>
>> You can try the CheckIndex tool. You feed it a directory and call
>> .check() and it reports the results.
>>
>> Shai
>>
>> On Tue, Jun 28, 2011 at 11:46 AM, Tarr, Gregory
>> <Gregory.tarr@detica.com>wrote:
>>
>> > We have a problem with our fileserver where our indexes are hosted
>> > remotely, using Lucene 2.9.3.
>> >
>> > This can mean that a segments file is written which is full of ASCII
>> > zeros. Using the od -ah command, we get:
>> >
>> > 0000000 nul nul nul nul nul nul nul....etc
>> >
>> > If opened in Luke, the index opens successfully but has zero
>> documents.
>> >
>> > Why does this open correctly in luke, and is there a procedure in
> the
>> > lucene code that can verify a segments file, e.g. check whether it
>> > refers to any segments?
>> >
>> > Thanks
>> >
>> > Greg
>> >
>> >
>> > Please consider the environment before printing this email.
>> >
>> > This message should be regarded as confidential. If you have
> received
>> > this email in error please notify the sender and destroy it
>> immediately.
>> >
>> > Statements of intent shall only become binding when confirmed in
> hard
>> > copy by an authorised signatory. =A0The contents of this email may
>> > relate to dealings with other companies under the control of Detica
>> > Limited, details of which can be found at
>> http://www.detica.com/statutory-information.
>> >
>> > Detica Limited is registered in England under No: 1337451.
>> > Registered offices: Surrey Research Park, Guildford, Surrey, GU2
> 7YP,
>> > England.
>> >
>> >
>> Please consider the environment before printing this email.
>>
>> This message should be regarded as confidential. If you have received
> this
>> email in error please notify the sender and destroy it immediately.
>>
>> Statements of intent shall only become binding when confirmed in hard
> copy
>> by an authorised signatory. =A0The contents of this email may relate to
> dealings
>> with other companies under the control of Detica Limited, details of
> which
>> can be found at http://www.detica.com/statutory-information.
>>
>> Detica Limited is registered in England under No: 1337451.
>> Registered offices: Surrey Research Park, Guildford, Surrey, GU2 7YP,
>> England.
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> Please consider the environment before printing this email.
>
> This message should be regarded as confidential. If you have received thi=
s email in error please notify the sender and destroy it immediately.
>
> Statements of intent shall only become binding when confirmed in hard cop=
y by an authorised signatory. =A0The contents of this email may relate to d=
ealings with other companies under the control of Detica Limited, details o=
f which can be found at http://www.detica.com/statutory-information.
>
> Detica Limited is registered in England under No: 1337451.
> Registered offices: Surrey Research Park, Guildford, Surrey, GU2 7YP, Eng=
land.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50210-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun 28 12:29:18 2011
Return-Path: <java-user-return-50210-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2F2E06545
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 28 Jun 2011 12:29:18 +0000 (UTC)
Received: (qmail 38009 invoked by uid 500); 28 Jun 2011 12:29:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37886 invoked by uid 500); 28 Jun 2011 12:29:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37878 invoked by uid 99); 28 Jun 2011 12:29:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2011 12:29:15 +0000
X-ASF-Spam-Status: No, hits=-1.6 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [207.126.144.119] (HELO eu1sys200aog105.obsmtp.com) (207.126.144.119)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2011 12:29:10 +0000
Received: from proxy03.detica.com ([193.36.230.103]) (using TLSv1) by eu1sys200aob105.postini.com ([207.126.147.11]) with SMTP
	ID DSNKTgnI/wOqvD968v2YQDdXJwcUB0dYfIJT@postini.com; Tue, 28 Jun 2011 12:28:49 UTC
Received: from blackex04.detica.com ([10.1.1.9]) by proxy03.detica.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Tue, 28 Jun 2011 13:28:45 +0100
Received: from uksrpblkexb01.detica.com ([10.1.1.38]) by blackex04.detica.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Tue, 28 Jun 2011 13:28:45 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Corrupt segments file full of zeros
Date: Tue, 28 Jun 2011 13:28:44 +0100
Message-ID: <614C529D389A5944B351F7DFB7594F24013C3A35@uksrpblkexb01.detica.com>
In-Reply-To: <BANLkTi=4UQ1dQ+P4quhUxYX3TiS_YhQhng@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Corrupt segments file full of zeros
Thread-Index: Acw1jpIlhLB74vFxTNa7uOP3c3nq9AAADuxQ
References: <614C529D389A5944B351F7DFB7594F24013C3984@uksrpblkexb01.detica.com><BANLkTimeoqy-6Cnftes45XL4r-4NoVo2Ag@mail.gmail.com><614C529D389A5944B351F7DFB7594F24013C39C6@uksrpblkexb01.detica.com><009a01cc3587$17490420$45db0c60$@thetaphi.de><1309262937.71635.YahooMailRC@web29005.mail.ird.yahoo.com><614C529D389A5944B351F7DFB7594F24013C3A31@uksrpblkexb01.detica.com> <BANLkTi=4UQ1dQ+P4quhUxYX3TiS_YhQhng@mail.gmail.com>
From: "Tarr, Gregory" <Gregory.tarr@detica.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 28 Jun 2011 12:28:45.0869 (UTC) FILETIME=[ECA3D5D0:01CC358E]

There was a segments_(N-1), which was a valid segments file and opened =
correctly in luke.

The trouble came because we had to manually rename these files in order =
to prevent the index from being wiped.

Thanks

Greg=20

-----Original Message-----
From: Michael McCandless [mailto:lucene@mikemccandless.com]=20
Sent: 28 June 2011 13:26
To: java-user@lucene.apache.org
Subject: Re: Corrupt segments file full of zeros

Is there only one segments_N file in the index (the one with all 0s)?
Or is there a segments_(N-1) too?

Mike McCandless

http://blog.mikemccandless.com

On Tue, Jun 28, 2011 at 8:17 AM, Tarr, Gregory <Gregory.tarr@detica.com> =
wrote:
> We don't have a -9 in the file. It isn't a valid lucene segments file, =

> as it only contains zeros.
>
> We're wondering why this opens in Luke, and why the CheckIndex reports =

> that the index is OK.
>
> -----Original Message-----
> From: mark harwood [mailto:markharw00d@yahoo.co.uk]
> Sent: 28 June 2011 13:09
> To: java-user@lucene.apache.org
> Subject: Re: Corrupt segments file full of zeros
>
> According to the spec there should at least be an Int32 of =A0-9 to=20
> declare the Format -=20
> http://lucene.apache.org/java/2_9_3/fileformats.html#Segments File
>
>
>
> ----- Original Message ----
> From: Uwe Schindler <uwe@thetaphi.de>
> To: java-user@lucene.apache.org
> Sent: Tue, 28 June, 2011 12:32:34
> Subject: RE: Corrupt segments file full of zeros
>
> So where is the problem at all? Why should a segments file not contain =

> lots of zeroes? If the index is not corrupt all is fine.
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
>
>> -----Original Message-----
>> From: Tarr, Gregory [mailto:Gregory.tarr@detica.com]
>> Sent: Tuesday, June 28, 2011 11:56 AM
>> To: java-user@lucene.apache.org
>> Subject: RE: Corrupt segments file full of zeros
>>
>> Yes I have done that, and you just get "No problems were detected=20
>> with
> this
>> index"
>>
>> Surely there is a major problem with this index?
>>
>> Also the check() procedure takes a long time - is there any way you
> can
> just
>> do a health check on the segments file?
>>
>> Thanks
>>
>> Greg
>>
>> -----Original Message-----
>> From: Shai Erera [mailto:serera@gmail.com]
>> Sent: 28 June 2011 10:36
>> To: java-user@lucene.apache.org
>> Subject: Re: Corrupt segments file full of zeros
>>
>> You can try the CheckIndex tool. You feed it a directory and call
>> .check() and it reports the results.
>>
>> Shai
>>
>> On Tue, Jun 28, 2011 at 11:46 AM, Tarr, Gregory
>> <Gregory.tarr@detica.com>wrote:
>>
>> > We have a problem with our fileserver where our indexes are hosted=20
>> > remotely, using Lucene 2.9.3.
>> >
>> > This can mean that a segments file is written which is full of=20
>> > ASCII zeros. Using the od -ah command, we get:
>> >
>> > 0000000 nul nul nul nul nul nul nul....etc
>> >
>> > If opened in Luke, the index opens successfully but has zero
>> documents.
>> >
>> > Why does this open correctly in luke, and is there a procedure in
> the
>> > lucene code that can verify a segments file, e.g. check whether it=20
>> > refers to any segments?
>> >
>> > Thanks
>> >
>> > Greg
>> >
>> >
>> > Please consider the environment before printing this email.
>> >
>> > This message should be regarded as confidential. If you have
> received
>> > this email in error please notify the sender and destroy it
>> immediately.
>> >
>> > Statements of intent shall only become binding when confirmed in
> hard
>> > copy by an authorised signatory. =A0The contents of this email may=20
>> > relate to dealings with other companies under the control of Detica =

>> > Limited, details of which can be found at
>> http://www.detica.com/statutory-information.
>> >
>> > Detica Limited is registered in England under No: 1337451.
>> > Registered offices: Surrey Research Park, Guildford, Surrey, GU2
> 7YP,
>> > England.
>> >
>> >
>> Please consider the environment before printing this email.
>>
>> This message should be regarded as confidential. If you have received
> this
>> email in error please notify the sender and destroy it immediately.
>>
>> Statements of intent shall only become binding when confirmed in hard
> copy
>> by an authorised signatory. =A0The contents of this email may relate =
to
> dealings
>> with other companies under the control of Detica Limited, details of
> which
>> can be found at http://www.detica.com/statutory-information.
>>
>> Detica Limited is registered in England under No: 1337451.
>> Registered offices: Surrey Research Park, Guildford, Surrey, GU2 7YP, =

>> England.
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> Please consider the environment before printing this email.
>
> This message should be regarded as confidential. If you have received =
this email in error please notify the sender and destroy it immediately.
>
> Statements of intent shall only become binding when confirmed in hard =
copy by an authorised signatory. =A0The contents of this email may =
relate to dealings with other companies under the control of Detica =
Limited, details of which can be found at =
http://www.detica.com/statutory-information.
>
> Detica Limited is registered in England under No: 1337451.
> Registered offices: Surrey Research Park, Guildford, Surrey, GU2 7YP, =
England.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

Please consider the environment before printing this email.

This message should be regarded as confidential. If you have received thi=
s email in error please notify the sender and destroy it immediately.

Statements of intent shall only become binding when confirmed in hard cop=
y by an authorised signatory.  The contents of this email may relate to d=
ealings with other companies under the control of Detica Limited, details=
 of which can be found at http://www.detica.com/statutory-information.

Detica Limited is registered in England under No: 1337451.
Registered offices: Surrey Research Park, Guildford, Surrey, GU2 7YP, Eng=
land.
=0D

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50211-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun 28 12:36:23 2011
Return-Path: <java-user-return-50211-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9B5546D6A
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 28 Jun 2011 12:36:23 +0000 (UTC)
Received: (qmail 49599 invoked by uid 500); 28 Jun 2011 12:36:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49448 invoked by uid 500); 28 Jun 2011 12:36:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49440 invoked by uid 99); 28 Jun 2011 12:36:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2011 12:36:20 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2011 12:36:16 +0000
Received: by vws7 with SMTP id 7so146030vws.35
        for <java-user@lucene.apache.org>; Tue, 28 Jun 2011 05:35:54 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.52.180.234 with SMTP id dr10mr10641030vdc.124.1309264553851;
 Tue, 28 Jun 2011 05:35:53 -0700 (PDT)
Received: by 10.52.157.226 with HTTP; Tue, 28 Jun 2011 05:35:53 -0700 (PDT)
In-Reply-To: <614C529D389A5944B351F7DFB7594F24013C3A35@uksrpblkexb01.detica.com>
References: <614C529D389A5944B351F7DFB7594F24013C3984@uksrpblkexb01.detica.com>
	<BANLkTimeoqy-6Cnftes45XL4r-4NoVo2Ag@mail.gmail.com>
	<614C529D389A5944B351F7DFB7594F24013C39C6@uksrpblkexb01.detica.com>
	<009a01cc3587$17490420$45db0c60$@thetaphi.de>
	<1309262937.71635.YahooMailRC@web29005.mail.ird.yahoo.com>
	<614C529D389A5944B351F7DFB7594F24013C3A31@uksrpblkexb01.detica.com>
	<BANLkTi=4UQ1dQ+P4quhUxYX3TiS_YhQhng@mail.gmail.com>
	<614C529D389A5944B351F7DFB7594F24013C3A35@uksrpblkexb01.detica.com>
Date: Tue, 28 Jun 2011 08:35:53 -0400
Message-ID: <BANLkTinuDkuY6tPz+yaFCfw-w+AN+qktzQ@mail.gmail.com>
Subject: Re: Corrupt segments file full of zeros
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

OK, this is why Lucene (and Luke) consider the index fine, ie, if
Lucene has problems opening segments_N (all 0s is definitely not a
valid segments_N file), it falls back to the last commit
(segments_(N-1)) and opens that instead.

Ie, IR.open and new IW(...) open the last successful commit.

Mike McCandless

http://blog.mikemccandless.com

On Tue, Jun 28, 2011 at 8:28 AM, Tarr, Gregory <Gregory.tarr@detica.com> wr=
ote:
> There was a segments_(N-1), which was a valid segments file and opened co=
rrectly in luke.
>
> The trouble came because we had to manually rename these files in order t=
o prevent the index from being wiped.
>
> Thanks
>
> Greg
>
> -----Original Message-----
> From: Michael McCandless [mailto:lucene@mikemccandless.com]
> Sent: 28 June 2011 13:26
> To: java-user@lucene.apache.org
> Subject: Re: Corrupt segments file full of zeros
>
> Is there only one segments_N file in the index (the one with all 0s)?
> Or is there a segments_(N-1) too?
>
> Mike McCandless
>
> http://blog.mikemccandless.com
>
> On Tue, Jun 28, 2011 at 8:17 AM, Tarr, Gregory <Gregory.tarr@detica.com> =
wrote:
>> We don't have a -9 in the file. It isn't a valid lucene segments file,
>> as it only contains zeros.
>>
>> We're wondering why this opens in Luke, and why the CheckIndex reports
>> that the index is OK.
>>
>> -----Original Message-----
>> From: mark harwood [mailto:markharw00d@yahoo.co.uk]
>> Sent: 28 June 2011 13:09
>> To: java-user@lucene.apache.org
>> Subject: Re: Corrupt segments file full of zeros
>>
>> According to the spec there should at least be an Int32 of =A0-9 to
>> declare the Format -
>> http://lucene.apache.org/java/2_9_3/fileformats.html#Segments File
>>
>>
>>
>> ----- Original Message ----
>> From: Uwe Schindler <uwe@thetaphi.de>
>> To: java-user@lucene.apache.org
>> Sent: Tue, 28 June, 2011 12:32:34
>> Subject: RE: Corrupt segments file full of zeros
>>
>> So where is the problem at all? Why should a segments file not contain
>> lots of zeroes? If the index is not corrupt all is fine.
>>
>> -----
>> Uwe Schindler
>> H.-H.-Meier-Allee 63, D-28213 Bremen
>> http://www.thetaphi.de
>> eMail: uwe@thetaphi.de
>>
>>
>>> -----Original Message-----
>>> From: Tarr, Gregory [mailto:Gregory.tarr@detica.com]
>>> Sent: Tuesday, June 28, 2011 11:56 AM
>>> To: java-user@lucene.apache.org
>>> Subject: RE: Corrupt segments file full of zeros
>>>
>>> Yes I have done that, and you just get "No problems were detected
>>> with
>> this
>>> index"
>>>
>>> Surely there is a major problem with this index?
>>>
>>> Also the check() procedure takes a long time - is there any way you
>> can
>> just
>>> do a health check on the segments file?
>>>
>>> Thanks
>>>
>>> Greg
>>>
>>> -----Original Message-----
>>> From: Shai Erera [mailto:serera@gmail.com]
>>> Sent: 28 June 2011 10:36
>>> To: java-user@lucene.apache.org
>>> Subject: Re: Corrupt segments file full of zeros
>>>
>>> You can try the CheckIndex tool. You feed it a directory and call
>>> .check() and it reports the results.
>>>
>>> Shai
>>>
>>> On Tue, Jun 28, 2011 at 11:46 AM, Tarr, Gregory
>>> <Gregory.tarr@detica.com>wrote:
>>>
>>> > We have a problem with our fileserver where our indexes are hosted
>>> > remotely, using Lucene 2.9.3.
>>> >
>>> > This can mean that a segments file is written which is full of
>>> > ASCII zeros. Using the od -ah command, we get:
>>> >
>>> > 0000000 nul nul nul nul nul nul nul....etc
>>> >
>>> > If opened in Luke, the index opens successfully but has zero
>>> documents.
>>> >
>>> > Why does this open correctly in luke, and is there a procedure in
>> the
>>> > lucene code that can verify a segments file, e.g. check whether it
>>> > refers to any segments?
>>> >
>>> > Thanks
>>> >
>>> > Greg
>>> >
>>> >
>>> > Please consider the environment before printing this email.
>>> >
>>> > This message should be regarded as confidential. If you have
>> received
>>> > this email in error please notify the sender and destroy it
>>> immediately.
>>> >
>>> > Statements of intent shall only become binding when confirmed in
>> hard
>>> > copy by an authorised signatory. =A0The contents of this email may
>>> > relate to dealings with other companies under the control of Detica
>>> > Limited, details of which can be found at
>>> http://www.detica.com/statutory-information.
>>> >
>>> > Detica Limited is registered in England under No: 1337451.
>>> > Registered offices: Surrey Research Park, Guildford, Surrey, GU2
>> 7YP,
>>> > England.
>>> >
>>> >
>>> Please consider the environment before printing this email.
>>>
>>> This message should be regarded as confidential. If you have received
>> this
>>> email in error please notify the sender and destroy it immediately.
>>>
>>> Statements of intent shall only become binding when confirmed in hard
>> copy
>>> by an authorised signatory. =A0The contents of this email may relate to
>> dealings
>>> with other companies under the control of Detica Limited, details of
>> which
>>> can be found at http://www.detica.com/statutory-information.
>>>
>>> Detica Limited is registered in England under No: 1337451.
>>> Registered offices: Surrey Research Park, Guildford, Surrey, GU2 7YP,
>>> England.
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>> Please consider the environment before printing this email.
>>
>> This message should be regarded as confidential. If you have received th=
is email in error please notify the sender and destroy it immediately.
>>
>> Statements of intent shall only become binding when confirmed in hard co=
py by an authorised signatory. =A0The contents of this email may relate to =
dealings with other companies under the control of Detica Limited, details =
of which can be found at http://www.detica.com/statutory-information.
>>
>> Detica Limited is registered in England under No: 1337451.
>> Registered offices: Surrey Research Park, Guildford, Surrey, GU2 7YP, En=
gland.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> Please consider the environment before printing this email.
>
> This message should be regarded as confidential. If you have received thi=
s email in error please notify the sender and destroy it immediately.
>
> Statements of intent shall only become binding when confirmed in hard cop=
y by an authorised signatory. =A0The contents of this email may relate to d=
ealings with other companies under the control of Detica Limited, details o=
f which can be found at http://www.detica.com/statutory-information.
>
> Detica Limited is registered in England under No: 1337451.
> Registered offices: Surrey Research Park, Guildford, Surrey, GU2 7YP, Eng=
land.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50212-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun 28 12:54:21 2011
Return-Path: <java-user-return-50212-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BC8316E62
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 28 Jun 2011 12:54:21 +0000 (UTC)
Received: (qmail 98361 invoked by uid 500); 28 Jun 2011 12:54:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98244 invoked by uid 500); 28 Jun 2011 12:54:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98236 invoked by uid 99); 28 Jun 2011 12:54:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2011 12:54:18 +0000
X-ASF-Spam-Status: No, hits=-1.6 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [207.126.144.111] (HELO eu1sys200aog101.obsmtp.com) (207.126.144.111)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2011 12:54:11 +0000
Received: from proxy02.detica.com ([193.36.230.103]) (using TLSv1) by eu1sys200aob101.postini.com ([207.126.147.11]) with SMTP
	ID DSNKTgnO336Jy3eWP3XtAWwjQlpGLUfTIcoe@postini.com; Tue, 28 Jun 2011 12:53:51 UTC
Received: from blackex05.detica.com ([10.1.1.10]) by proxy02.detica.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Tue, 28 Jun 2011 13:53:44 +0100
Received: from uksrpblkexb01.detica.com ([10.1.1.38]) by blackex05.detica.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Tue, 28 Jun 2011 13:53:45 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Corrupt segments file full of zeros
Date: Tue, 28 Jun 2011 13:53:42 +0100
Message-ID: <614C529D389A5944B351F7DFB7594F24013C3A43@uksrpblkexb01.detica.com>
In-Reply-To: <BANLkTinuDkuY6tPz+yaFCfw-w+AN+qktzQ@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Corrupt segments file full of zeros
Thread-Index: Acw1j/58lKO2gKiYTy2bJeWFJARBbAAAczvw
References: <614C529D389A5944B351F7DFB7594F24013C3984@uksrpblkexb01.detica.com><BANLkTimeoqy-6Cnftes45XL4r-4NoVo2Ag@mail.gmail.com><614C529D389A5944B351F7DFB7594F24013C39C6@uksrpblkexb01.detica.com><009a01cc3587$17490420$45db0c60$@thetaphi.de><1309262937.71635.YahooMailRC@web29005.mail.ird.yahoo.com><614C529D389A5944B351F7DFB7594F24013C3A31@uksrpblkexb01.detica.com><BANLkTi=4UQ1dQ+P4quhUxYX3TiS_YhQhng@mail.gmail.com><614C529D389A5944B351F7DFB7594F24013C3A35@uksrpblkexb01.detica.com> <BANLkTinuDkuY6tPz+yaFCfw-w+AN+qktzQ@mail.gmail.com>
From: "Tarr, Gregory" <Gregory.tarr@detica.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 28 Jun 2011 12:53:45.0710 (UTC) FILETIME=[6A9D68E0:01CC3592]
X-Virus-Checked: Checked by ClamAV on apache.org

Michael

We are not using commit points unfortunately.

This was a scheduled update to our index, and on observation the index =
directory had two segments_N files:

segments_4vb (modified 24 June 2011 02:05:38 size 7.61KB)
segments_4vc (modified 24 June 2011 02:20:42 size 5.91KB)=20

We were not sure which one of these was the real one, so we deleted 4vb =
and got the following from SegmentInfos:

Directory listing genA=3D6312
Fallback check: 6311; 6311
Segments.gen check: genB=3D6311
Index has 0 docs

We then deleted 4vc and got the following:

Directory listing genA=3D6311
Fallback check: 6311; 6311
Segments.gen check: genB=3D6311
Index has 40022898 docs=20

Opening 4vc in an octal editor yields only ASCII zeros (0000000 nul nul =
nul nul nul nul nul....etc). It may be that Windows is responsible for =
this, as our indexes are accessed through a fileserver and we know that =
a delayed write occurred.

My question is: why does an index with 4vc open?

Thanks

Greg

-----Original Message-----
From: Michael McCandless [mailto:lucene@mikemccandless.com]=20
Sent: 28 June 2011 13:36
To: java-user@lucene.apache.org
Subject: Re: Corrupt segments file full of zeros

OK, this is why Lucene (and Luke) consider the index fine, ie, if Lucene =
has problems opening segments_N (all 0s is definitely not a valid =
segments_N file), it falls back to the last commit
(segments_(N-1)) and opens that instead.

Ie, IR.open and new IW(...) open the last successful commit.

Mike McCandless

http://blog.mikemccandless.com

On Tue, Jun 28, 2011 at 8:28 AM, Tarr, Gregory <Gregory.tarr@detica.com> =
wrote:
> There was a segments_(N-1), which was a valid segments file and opened =
correctly in luke.
>
> The trouble came because we had to manually rename these files in =
order to prevent the index from being wiped.
>
> Thanks
>
> Greg
>
> -----Original Message-----
> From: Michael McCandless [mailto:lucene@mikemccandless.com]
> Sent: 28 June 2011 13:26
> To: java-user@lucene.apache.org
> Subject: Re: Corrupt segments file full of zeros
>
> Is there only one segments_N file in the index (the one with all 0s)?
> Or is there a segments_(N-1) too?
>
> Mike McCandless
>
> http://blog.mikemccandless.com
>
> On Tue, Jun 28, 2011 at 8:17 AM, Tarr, Gregory =
<Gregory.tarr@detica.com> wrote:
>> We don't have a -9 in the file. It isn't a valid lucene segments=20
>> file, as it only contains zeros.
>>
>> We're wondering why this opens in Luke, and why the CheckIndex=20
>> reports that the index is OK.
>>
>> -----Original Message-----
>> From: mark harwood [mailto:markharw00d@yahoo.co.uk]
>> Sent: 28 June 2011 13:09
>> To: java-user@lucene.apache.org
>> Subject: Re: Corrupt segments file full of zeros
>>
>> According to the spec there should at least be an Int32 of =A0-9 to=20
>> declare the Format -=20
>> http://lucene.apache.org/java/2_9_3/fileformats.html#Segments File
>>
>>
>>
>> ----- Original Message ----
>> From: Uwe Schindler <uwe@thetaphi.de>
>> To: java-user@lucene.apache.org
>> Sent: Tue, 28 June, 2011 12:32:34
>> Subject: RE: Corrupt segments file full of zeros
>>
>> So where is the problem at all? Why should a segments file not=20
>> contain lots of zeroes? If the index is not corrupt all is fine.
>>
>> -----
>> Uwe Schindler
>> H.-H.-Meier-Allee 63, D-28213 Bremen
>> http://www.thetaphi.de
>> eMail: uwe@thetaphi.de
>>
>>
>>> -----Original Message-----
>>> From: Tarr, Gregory [mailto:Gregory.tarr@detica.com]
>>> Sent: Tuesday, June 28, 2011 11:56 AM
>>> To: java-user@lucene.apache.org
>>> Subject: RE: Corrupt segments file full of zeros
>>>
>>> Yes I have done that, and you just get "No problems were detected=20
>>> with
>> this
>>> index"
>>>
>>> Surely there is a major problem with this index?
>>>
>>> Also the check() procedure takes a long time - is there any way you
>> can
>> just
>>> do a health check on the segments file?
>>>
>>> Thanks
>>>
>>> Greg
>>>
>>> -----Original Message-----
>>> From: Shai Erera [mailto:serera@gmail.com]
>>> Sent: 28 June 2011 10:36
>>> To: java-user@lucene.apache.org
>>> Subject: Re: Corrupt segments file full of zeros
>>>
>>> You can try the CheckIndex tool. You feed it a directory and call
>>> .check() and it reports the results.
>>>
>>> Shai
>>>
>>> On Tue, Jun 28, 2011 at 11:46 AM, Tarr, Gregory
>>> <Gregory.tarr@detica.com>wrote:
>>>
>>> > We have a problem with our fileserver where our indexes are hosted =

>>> > remotely, using Lucene 2.9.3.
>>> >
>>> > This can mean that a segments file is written which is full of=20
>>> > ASCII zeros. Using the od -ah command, we get:
>>> >
>>> > 0000000 nul nul nul nul nul nul nul....etc
>>> >
>>> > If opened in Luke, the index opens successfully but has zero
>>> documents.
>>> >
>>> > Why does this open correctly in luke, and is there a procedure in
>> the
>>> > lucene code that can verify a segments file, e.g. check whether it =

>>> > refers to any segments?
>>> >
>>> > Thanks
>>> >
>>> > Greg
>>> >
>>> >
>>> > Please consider the environment before printing this email.
>>> >
>>> > This message should be regarded as confidential. If you have
>> received
>>> > this email in error please notify the sender and destroy it
>>> immediately.
>>> >
>>> > Statements of intent shall only become binding when confirmed in
>> hard
>>> > copy by an authorised signatory. =A0The contents of this email may =

>>> > relate to dealings with other companies under the control of=20
>>> > Detica Limited, details of which can be found at
>>> http://www.detica.com/statutory-information.
>>> >
>>> > Detica Limited is registered in England under No: 1337451.
>>> > Registered offices: Surrey Research Park, Guildford, Surrey, GU2
>> 7YP,
>>> > England.
>>> >
>>> >
>>> Please consider the environment before printing this email.
>>>
>>> This message should be regarded as confidential. If you have=20
>>> received
>> this
>>> email in error please notify the sender and destroy it immediately.
>>>
>>> Statements of intent shall only become binding when confirmed in=20
>>> hard
>> copy
>>> by an authorised signatory. =A0The contents of this email may relate =

>>> to
>> dealings
>>> with other companies under the control of Detica Limited, details of
>> which
>>> can be found at http://www.detica.com/statutory-information.
>>>
>>> Detica Limited is registered in England under No: 1337451.
>>> Registered offices: Surrey Research Park, Guildford, Surrey, GU2=20
>>> 7YP, England.
>>>
>>> --------------------------------------------------------------------
>>> - To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>> Please consider the environment before printing this email.
>>
>> This message should be regarded as confidential. If you have received =
this email in error please notify the sender and destroy it immediately.
>>
>> Statements of intent shall only become binding when confirmed in hard =
copy by an authorised signatory. =A0The contents of this email may =
relate to dealings with other companies under the control of Detica =
Limited, details of which can be found at =
http://www.detica.com/statutory-information.
>>
>> Detica Limited is registered in England under No: 1337451.
>> Registered offices: Surrey Research Park, Guildford, Surrey, GU2 7YP, =
England.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> Please consider the environment before printing this email.
>
> This message should be regarded as confidential. If you have received =
this email in error please notify the sender and destroy it immediately.
>
> Statements of intent shall only become binding when confirmed in hard =
copy by an authorised signatory. =A0The contents of this email may =
relate to dealings with other companies under the control of Detica =
Limited, details of which can be found at =
http://www.detica.com/statutory-information.
>
> Detica Limited is registered in England under No: 1337451.
> Registered offices: Surrey Research Park, Guildford, Surrey, GU2 7YP, =
England.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

Please consider the environment before printing this email.

This message should be regarded as confidential. If you have received thi=
s email in error please notify the sender and destroy it immediately.

Statements of intent shall only become binding when confirmed in hard cop=
y by an authorised signatory.  The contents of this email may relate to d=
ealings with other companies under the control of Detica Limited, details=
 of which can be found at http://www.detica.com/statutory-information.

Detica Limited is registered in England under No: 1337451.
Registered offices: Surrey Research Park, Guildford, Surrey, GU2 7YP, Eng=
land.
=0D

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50213-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun 28 13:05:15 2011
Return-Path: <java-user-return-50213-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 438616ACC
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 28 Jun 2011 13:05:15 +0000 (UTC)
Received: (qmail 36961 invoked by uid 500); 28 Jun 2011 13:05:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36766 invoked by uid 500); 28 Jun 2011 13:05:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36756 invoked by uid 99); 28 Jun 2011 13:05:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2011 13:05:12 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2011 13:05:02 +0000
Received: by vws7 with SMTP id 7so174508vws.35
        for <java-user@lucene.apache.org>; Tue, 28 Jun 2011 06:04:41 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.52.93.67 with SMTP id cs3mr10259435vdb.4.1309266280407; Tue,
 28 Jun 2011 06:04:40 -0700 (PDT)
Received: by 10.52.157.226 with HTTP; Tue, 28 Jun 2011 06:04:40 -0700 (PDT)
In-Reply-To: <614C529D389A5944B351F7DFB7594F24013C3A43@uksrpblkexb01.detica.com>
References: <614C529D389A5944B351F7DFB7594F24013C3984@uksrpblkexb01.detica.com>
	<BANLkTimeoqy-6Cnftes45XL4r-4NoVo2Ag@mail.gmail.com>
	<614C529D389A5944B351F7DFB7594F24013C39C6@uksrpblkexb01.detica.com>
	<009a01cc3587$17490420$45db0c60$@thetaphi.de>
	<1309262937.71635.YahooMailRC@web29005.mail.ird.yahoo.com>
	<614C529D389A5944B351F7DFB7594F24013C3A31@uksrpblkexb01.detica.com>
	<BANLkTi=4UQ1dQ+P4quhUxYX3TiS_YhQhng@mail.gmail.com>
	<614C529D389A5944B351F7DFB7594F24013C3A35@uksrpblkexb01.detica.com>
	<BANLkTinuDkuY6tPz+yaFCfw-w+AN+qktzQ@mail.gmail.com>
	<614C529D389A5944B351F7DFB7594F24013C3A43@uksrpblkexb01.detica.com>
Date: Tue, 28 Jun 2011 09:04:40 -0400
Message-ID: <BANLkTimUgP9pvU_xYRM_YTf0jX4CxZT7Qw@mail.gmail.com>
Subject: Re: Corrupt segments file full of zeros
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

On Tue, Jun 28, 2011 at 8:53 AM, Tarr, Gregory <Gregory.tarr@detica.com> wrote:
> Michael
>
> We are not using commit points unfortunately.

That's fine -- even if you don't keep multiple commit points in your
index, when a commit() op fails, then you can end up with two
segments_N files.  The older one is "good" (last successful commit)
and the new one is broken.

> This was a scheduled update to our index, and on observation the index directory had two segments_N files:
>
> segments_4vb (modified 24 June 2011 02:05:38 size 7.61KB)
> segments_4vc (modified 24 June 2011 02:20:42 size 5.91KB)

OK, so you have 2 segments_N files because something went wrong during
commit of the 2nd one.

> We were not sure which one of these was the real one, so we deleted 4vb and got the following from SegmentInfos:

It will always be the "older" one that was the last successful commit,
unless you keep multiple commit points in the index.

> Directory listing genA=6312
> Fallback check: 6311; 6311
> Segments.gen check: genB=6311
> Index has 0 docs

Hmmm -- what code are you running here, to print the number of docs?
new IndexWriter(), with create=true?  I would have expected IR.open to
throw an exc here.

> We then deleted 4vc and got the following:
>
> Directory listing genA=6311
> Fallback check: 6311; 6311
> Segments.gen check: genB=6311
> Index has 40022898 docs
>
> Opening 4vc in an octal editor yields only ASCII zeros (0000000 nul nul nul nul nul nul nul....etc). It may be that Windows is responsible for this, as our indexes are accessed through a fileserver and we know that a delayed write occurred.
>
> My question is: why does an index with 4vc open?

I'm not sure, unless you are opening with IW and create=true.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50214-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun 28 13:30:12 2011
Return-Path: <java-user-return-50214-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C9B286D5A
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 28 Jun 2011 13:30:12 +0000 (UTC)
Received: (qmail 91844 invoked by uid 500); 28 Jun 2011 13:30:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91613 invoked by uid 500); 28 Jun 2011 13:30:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91605 invoked by uid 99); 28 Jun 2011 13:30:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2011 13:30:09 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [77.238.189.91] (HELO nm14-vm1.bullet.mail.ird.yahoo.com) (77.238.189.91)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 28 Jun 2011 13:30:03 +0000
Received: from [77.238.189.51] by nm14.bullet.mail.ird.yahoo.com with NNFMP; 28 Jun 2011 13:29:41 -0000
Received: from [212.82.108.126] by tm4.bullet.mail.ird.yahoo.com with NNFMP; 28 Jun 2011 13:29:41 -0000
Received: from [127.0.0.1] by omp1035.mail.ird.yahoo.com with NNFMP; 28 Jun 2011 13:29:41 -0000
X-Yahoo-Newman-Property: ymail-5
X-Yahoo-Newman-Id: 333507.23745.bm@omp1035.mail.ird.yahoo.com
Received: (qmail 76246 invoked by uid 60001); 28 Jun 2011 13:29:41 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1309267781; bh=btBCpbIGb6Njs/4WcI0N3Lj5q7TzjhIczZD/1zAAuhY=; h=X-YMail-OSG:Received:X-Mailer:References:Message-ID:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=0OqfqgjVHRiULiLw6pZTA5Qd6OX3y5mbzbC6CR1yZYYxirRZKcwrJIM8T7s+uDLvXRefA7sxwVR8n17c9go+SA7ZymYczE5B4XrT75tuzxZ+H2YBgViLbq3F3rbrYokndHvVBkGe4g0xQNK/eM6nr1+LNW3ECcxhPqOiohI2wks=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:References:Message-ID:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=UbM+hxI2nmF27/FKRUBPHfK4fANWSvAeSJEVCJ6Wb52sEeTN7+49mZp2WNYA58Z26crQqolyw3i9H6do1ONENzvuFtSeayyI0sexvIspXsbDkyovZtz6SqpGHAwuRf1jtp7lKpGz+4rYCv6cX3TkOojTGY/JxXt+sFm+ZDuMy98=;
X-YMail-OSG: E_XrRYUVM1kQtUrCjYJLcaTsXT5.xNjo4.MB00kTezdBx7x
 OCa8MM0fHjG.mqe08bNqxW9Jggn7jEee0QCRuQsajdDi8njGQBh.ayVJR8RV
 TLO9v1GECUU2lR3jtifPEzaLkkuxOr3Whu8A5Tb4fzFqtUNhtmCV_u1o7NOa
 UUpgxexWMgBwrS6nX9Zdj.Ok2kUKwCMgaT6pGwBXURqqs1C1p76KBqnsjJtM
 _wwHa6YSgEuf77MJ80LfEOYm.Q9XOY2hItbunUF0TOSaUAX3vb1Wa4IlCFKN
 TKDpBslaOeKovGDWd0sfGAD4pMQKUR3Ngt5mNW8T8l4Go6XG5uhzMBWXsJEY
 Sd8SJBraXbnMOqHSNyBbfaB5JibSp
Received: from [194.116.198.179] by web29013.mail.ird.yahoo.com via HTTP; Tue, 28 Jun 2011 14:29:40 BST
X-Mailer: YahooMailRC/572 YahooMailWebService/0.8.112.307740
References: <614C529D389A5944B351F7DFB7594F24013C3984@uksrpblkexb01.detica.com> <BANLkTimeoqy-6Cnftes45XL4r-4NoVo2Ag@mail.gmail.com> <614C529D389A5944B351F7DFB7594F24013C39C6@uksrpblkexb01.detica.com> <009a01cc3587$17490420$45db0c60$@thetaphi.de> <1309262937.71635.YahooMailRC@web29005.mail.ird.yahoo.com> <614C529D389A5944B351F7DFB7594F24013C3A31@uksrpblkexb01.detica.com> <BANLkTi=4UQ1dQ+P4quhUxYX3TiS_YhQhng@mail.gmail.com> <614C529D389A5944B351F7DFB7594F24013C3A35@uksrpblkexb01.detica.com> <BANLkTinuDkuY6tPz+yaFCfw-w+AN+qktzQ@mail.gmail.com> <614C529D389A5944B351F7DFB7594F24013C3A43@uksrpblkexb01.detica.com> <BANLkTimUgP9pvU_xYRM_YTf0jX4CxZT7Qw@mail.gmail.com>
Message-ID: <1309267780.76184.YahooMailRC@web29013.mail.ird.yahoo.com>
Date: Tue, 28 Jun 2011 14:29:40 +0100 (BST)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Corrupt segments file full of zeros
To: java-user@lucene.apache.org
In-Reply-To: <BANLkTimUgP9pvU_xYRM_YTf0jX4CxZT7Qw@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable

Hi Mike. =0A>>Hmmm -- what code are you running here, to print the number o=
f docs?=0A=0ASegmentInfos.setInfoStream(System.out);=0AFSDirectory dir =3D =
FSDirectory.open(new File("j:/indexes/myindex"));=0AIndexReader r =3D Index=
Reader.open(dir, true);=0ASystem.out.println("index has "+r.maxDoc()+" docs=
");  =0A=0AFrom my own tests outside of Greg's environment I've found Lucen=
e to be doing =0Aall the right things and IndexReader falls back gracefully=
 to the previous =0Acommit e.g. here is the output from when I deliberately=
 killed an update after =0AprepareToCommit, leaving segment_2 and segment_3=
 and  then vandalised segment_3 =0Awith all zero bytes:=0A   SIS [main]: di=
rectory listing genA=3D3=0A   SIS [main]: fallback check: 2; 2=0A   SIS [ma=
in]: segments.gen check: genB=3D2=0A   SIS [main]: primary Exception on 'se=
gments_3': java.io.IOException: read past =0AEOF'; will retry: retry=3Dfals=
e; gen =3D 3=0A   SIS [main]: fallback to prior segment file 'segments_2'=
=0A   SIS [main]: success on fallback segments_2=0A=0ALucene does the right=
 thing going back to _2. I can't yet see why in Greg's =0Aenvironment (NFS =
based) it fails to see _4vc as corrupt in the same way the =0Aabove test co=
rrectly sees _3 as corrupt.=0A=0ACheers=0AMark=0A=0A=0A----- Original Messa=
ge ----=0AFrom: Michael McCandless <lucene@mikemccandless.com>=0ATo: java-u=
ser@lucene.apache.org=0ASent: Tue, 28 June, 2011 14:04:40=0ASubject: Re: Co=
rrupt segments file full of zeros=0A=0AOn Tue, Jun 28, 2011 at 8:53 AM, Tar=
r, Gregory <Gregory.tarr@detica.com> wrote:=0A> Michael=0A>=0A> We are not =
using commit points unfortunately.=0A=0AThat's fine -- even if you don't ke=
ep multiple commit points in your=0Aindex, when a commit() op fails, then y=
ou can end up with two=0Asegments_N files.  The older one is "good" (last s=
uccessful commit)=0Aand the new one is broken.=0A=0A> This was a scheduled =
update to our index, and on observation the index =0A>directory had two seg=
ments_N files:=0A>=0A> segments_4vb (modified 24 June 2011 02:05:38 size 7.=
61KB)=0A> segments_4vc (modified 24 June 2011 02:20:42 size 5.91KB)=0A=0AOK=
, so you have 2 segments_N files because something went wrong during=0Acomm=
it of the 2nd one.=0A=0A> We were not sure which one of these was the real =
one, so we deleted 4vb and got =0A>the following from SegmentInfos:=0A=0AIt=
 will always be the "older" one that was the last successful commit,=0Aunle=
ss you keep multiple commit points in the index.=0A=0A> Directory listing g=
enA=3D6312=0A> Fallback check: 6311; 6311=0A> Segments.gen check: genB=3D63=
11=0A> Index has 0 docs=0A=0AHmmm -- what code are you running here, to pri=
nt the number of docs?=0Anew IndexWriter(), with create=3Dtrue?  I would ha=
ve expected IR.open to=0Athrow an exc here.=0A=0A> We then deleted 4vc and =
got the following:=0A>=0A> Directory listing genA=3D6311=0A> Fallback check=
: 6311; 6311=0A> Segments.gen check: genB=3D6311=0A> Index has 40022898 doc=
s=0A>=0A> Opening 4vc in an octal editor yields only ASCII zeros (0000000 n=
ul nul nul nul =0A>nul nul nul....etc). It may be that Windows is responsib=
le for this, as our =0A>indexes are accessed through a fileserver and we kn=
ow that a delayed write =0A>occurred.=0A>=0A> My question is: why does an i=
ndex with 4vc open?=0A=0AI'm not sure, unless you are opening with IW and c=
reate=3Dtrue.=0A=0AMike=0A=0A----------------------------------------------=
-----------------------=0ATo unsubscribe, e-mail: java-user-unsubscribe@luc=
ene.apache.org=0AFor additional commands, e-mail: java-user-help@lucene.apa=
che.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50215-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun 28 14:00:20 2011
Return-Path: <java-user-return-50215-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 943336498
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 28 Jun 2011 14:00:20 +0000 (UTC)
Received: (qmail 50450 invoked by uid 500); 28 Jun 2011 14:00:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50244 invoked by uid 500); 28 Jun 2011 14:00:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50236 invoked by uid 99); 28 Jun 2011 14:00:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2011 14:00:17 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.220.176] (HELO mail-vx0-f176.google.com) (209.85.220.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2011 14:00:10 +0000
Received: by vxd2 with SMTP id 2so239515vxd.35
        for <java-user@lucene.apache.org>; Tue, 28 Jun 2011 06:59:49 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.52.69.111 with SMTP id d15mr3710059vdu.284.1309269588866; Tue,
 28 Jun 2011 06:59:48 -0700 (PDT)
Received: by 10.52.157.226 with HTTP; Tue, 28 Jun 2011 06:59:48 -0700 (PDT)
In-Reply-To: <1309267780.76184.YahooMailRC@web29013.mail.ird.yahoo.com>
References: <614C529D389A5944B351F7DFB7594F24013C3984@uksrpblkexb01.detica.com>
	<BANLkTimeoqy-6Cnftes45XL4r-4NoVo2Ag@mail.gmail.com>
	<614C529D389A5944B351F7DFB7594F24013C39C6@uksrpblkexb01.detica.com>
	<009a01cc3587$17490420$45db0c60$@thetaphi.de>
	<1309262937.71635.YahooMailRC@web29005.mail.ird.yahoo.com>
	<614C529D389A5944B351F7DFB7594F24013C3A31@uksrpblkexb01.detica.com>
	<BANLkTi=4UQ1dQ+P4quhUxYX3TiS_YhQhng@mail.gmail.com>
	<614C529D389A5944B351F7DFB7594F24013C3A35@uksrpblkexb01.detica.com>
	<BANLkTinuDkuY6tPz+yaFCfw-w+AN+qktzQ@mail.gmail.com>
	<614C529D389A5944B351F7DFB7594F24013C3A43@uksrpblkexb01.detica.com>
	<BANLkTimUgP9pvU_xYRM_YTf0jX4CxZT7Qw@mail.gmail.com>
	<1309267780.76184.YahooMailRC@web29013.mail.ird.yahoo.com>
Date: Tue, 28 Jun 2011 09:59:48 -0400
Message-ID: <BANLkTinT3WyqC3qC0rdSfudv4UNmf7Bmow@mail.gmail.com>
Subject: Re: Corrupt segments file full of zeros
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On Tue, Jun 28, 2011 at 9:29 AM, mark harwood <markharw00d@yahoo.co.uk> wro=
te:
> Hi Mike.
>>>Hmmm -- what code are you running here, to print the number of docs?
>
> SegmentInfos.setInfoStream(System.out);
> FSDirectory dir =3D FSDirectory.open(new File("j:/indexes/myindex"));
> IndexReader r =3D IndexReader.open(dir, true);
> System.out.println("index has "+r.maxDoc()+" docs");
>
> From my own tests outside of Greg's environment I've found Lucene to be d=
oing
> all the right things and IndexReader falls back gracefully to the previou=
s
> commit e.g. here is the output from when I deliberately killed an update =
after
> prepareToCommit, leaving segment_2 and segment_3 and =A0then vandalised s=
egment_3
> with all zero bytes:
> =A0 SIS [main]: directory listing genA=3D3
> =A0 SIS [main]: fallback check: 2; 2
> =A0 SIS [main]: segments.gen check: genB=3D2
> =A0 SIS [main]: primary Exception on 'segments_3': java.io.IOException: r=
ead past
> EOF'; will retry: retry=3Dfalse; gen =3D 3
> =A0 SIS [main]: fallback to prior segment file 'segments_2'
> =A0 SIS [main]: success on fallback segments_2
>
> Lucene does the right thing going back to _2. I can't yet see why in Greg=
's
> environment (NFS based) it fails to see _4vc as corrupt in the same way t=
he
> above test correctly sees _3 as corrupt.

Hmm.  Mark, if you vandalise segments_3 with 0s, and then remove
segmetns_2, what happens when you try to open the IndexReader?  (I
would expect exc).

Greg, can you post the full stdout you see from SIS after enabling its
infoStream in the case that returns an IR with 0 docs (ie when you
delete segments_4vb).

Also: if you don't delete any of the segments_N file, and run the same
code, how many docs do you get?

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50216-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun 28 14:09:59 2011
Return-Path: <java-user-return-50216-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 83BC969EE
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 28 Jun 2011 14:09:59 +0000 (UTC)
Received: (qmail 63595 invoked by uid 500); 28 Jun 2011 14:09:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63546 invoked by uid 500); 28 Jun 2011 14:09:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63538 invoked by uid 99); 28 Jun 2011 14:09:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2011 14:09:56 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [77.238.189.223] (HELO nm7-vm1.bullet.mail.ird.yahoo.com) (77.238.189.223)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 28 Jun 2011 14:09:49 +0000
Received: from [77.238.189.48] by nm7.bullet.mail.ird.yahoo.com with NNFMP; 28 Jun 2011 14:09:26 -0000
Received: from [212.82.108.237] by tm1.bullet.mail.ird.yahoo.com with NNFMP; 28 Jun 2011 14:09:26 -0000
Received: from [127.0.0.1] by omp1002.mail.ird.yahoo.com with NNFMP; 28 Jun 2011 14:09:26 -0000
X-Yahoo-Newman-Property: ymail-5
X-Yahoo-Newman-Id: 847058.50329.bm@omp1002.mail.ird.yahoo.com
Received: (qmail 77093 invoked by uid 60001); 28 Jun 2011 14:09:26 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1309270166; bh=jNZbsT3gkahNFrCg58cr+t7Zs4udGXanrk5SOcvcpdA=; h=X-YMail-OSG:Received:X-Mailer:References:Message-ID:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=omXEa3nDRXZQ258J3t7M7Nm/O+6q3lCtydgu3v/1lfFJFMoiSNqB7jC0GZwlvtDxzMJxj8t3OUQLmB43mATuOgRqzYbO+dUYKXTUScjAJSEOJXG0nlMlXJA8PET+pH4V4c5tIqqROSvsqYjIXBt6kaE24FwnC0xJi/aBe7WEl3M=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:References:Message-ID:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=hMHeyK1mX0rkxJETICpDwyW6MuOEy/6jc7PlaAmwgd8UWSfpAyPf3yajnso1fvTU/sYMUD/jSPIn0hhdVKpAJ5Gpycau9DHTQ45PHBuubxJ3an+P52KajL+AGaL3HnENeuQtx8FA5eSX3Wkc28hsvzZEpv4hUWiRkoUxGZQXpaY=;
X-YMail-OSG: qlKJYYEVM1lN_fxRyfyy1sMRRxnXZS5zjFsMSUDE0SrgLUS
 0NfEWBvrxb2aOzs.ernMdnD0zWZQnXu_tQQFxxOTyU.dDu_Bx4gnOl4c1dbZ
 6ZQMKTDTnjlt9UBJHxcVIkIoLne9JT17NLYx9tWp55aSF0G30odaUQ9GOgcz
 qgdCOQf.01O6GQrfGt2406HcdznOMW75unxxjgkm2WvewOSjf3pKwIeHfe6w
 ebb3iGtB8Jd2k0JX9EN8F_RjKtozWDVjKPhumHtMjXkAAFmyoOq4BpwlTlc6
 3gtyjEiLrTOBiR02rLYSd8SXDEUdokAZKqt2gloIKtowyT3hbJ6_H3jBaxZU
 i8tTueqormrDIKTJHNZNp3iqHlfrB
Received: from [194.116.198.179] by web29014.mail.ird.yahoo.com via HTTP; Tue, 28 Jun 2011 15:09:26 BST
X-Mailer: YahooMailRC/572 YahooMailWebService/0.8.112.307740
References: <614C529D389A5944B351F7DFB7594F24013C3984@uksrpblkexb01.detica.com> <BANLkTimeoqy-6Cnftes45XL4r-4NoVo2Ag@mail.gmail.com> <614C529D389A5944B351F7DFB7594F24013C39C6@uksrpblkexb01.detica.com> <009a01cc3587$17490420$45db0c60$@thetaphi.de> <1309262937.71635.YahooMailRC@web29005.mail.ird.yahoo.com> <614C529D389A5944B351F7DFB7594F24013C3A31@uksrpblkexb01.detica.com> <BANLkTi=4UQ1dQ+P4quhUxYX3TiS_YhQhng@mail.gmail.com> <614C529D389A5944B351F7DFB7594F24013C3A35@uksrpblkexb01.detica.com> <BANLkTinuDkuY6tPz+yaFCfw-w+AN+qktzQ@mail.gmail.com> <614C529D389A5944B351F7DFB7594F24013C3A43@uksrpblkexb01.detica.com> <BANLkTimUgP9pvU_xYRM_YTf0jX4CxZT7Qw@mail.gmail.com> <1309267780.76184.YahooMailRC@web29013.mail.ird.yahoo.com> <BANLkTinT3WyqC3qC0rdSfudv4UNmf7Bmow@mail.gmail.com>
Message-ID: <1309270166.75117.YahooMailRC@web29014.mail.ird.yahoo.com>
Date: Tue, 28 Jun 2011 15:09:26 +0100 (BST)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Corrupt segments file full of zeros
To: java-user@lucene.apache.org
In-Reply-To: <BANLkTinT3WyqC3qC0rdSfudv4UNmf7Bmow@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable

I've got Greg's bad segment file and it does look to be all zeros and if I =
drop =0Ait into an existing index directory with the name segment_N+1 it re=
produces the =0Aerror i.e. IndexReader opens the index as if it contains ze=
ro docs.=0APreparing a Jira as we speak.=0A=0A=0A----- Original Message ---=
-=0AFrom: Michael McCandless <lucene@mikemccandless.com>=0ATo: java-user@lu=
cene.apache.org=0ASent: Tue, 28 June, 2011 14:59:48=0ASubject: Re: Corrupt =
segments file full of zeros=0A=0AOn Tue, Jun 28, 2011 at 9:29 AM, mark harw=
ood <markharw00d@yahoo.co.uk> wrote:=0A> Hi Mike.=0A>>>Hmmm -- what code ar=
e you running here, to print the number of docs?=0A>=0A> SegmentInfos.setIn=
foStream(System.out);=0A> FSDirectory dir =3D FSDirectory.open(new File("j:=
/indexes/myindex"));=0A> IndexReader r =3D IndexReader.open(dir, true);=0A>=
 System.out.println("index has "+r.maxDoc()+" docs");=0A>=0A> From my own t=
ests outside of Greg's environment I've found Lucene to be doing=0A> all th=
e right things and IndexReader falls back gracefully to the previous=0A> co=
mmit e.g. here is the output from when I deliberately killed an update afte=
r=0A> prepareToCommit, leaving segment_2 and segment_3 and  then vandalised=
 =0Asegment_3=0A> with all zero bytes:=0A>   SIS [main]: directory listing =
genA=3D3=0A>   SIS [main]: fallback check: 2; 2=0A>   SIS [main]: segments.=
gen check: genB=3D2=0A>   SIS [main]: primary Exception on 'segments_3': ja=
va.io.IOException: read =0Apast=0A> EOF'; will retry: retry=3Dfalse; gen =
=3D 3=0A>   SIS [main]: fallback to prior segment file 'segments_2'=0A>   S=
IS [main]: success on fallback segments_2=0A>=0A> Lucene does the right thi=
ng going back to _2. I can't yet see why in Greg's=0A> environment (NFS bas=
ed) it fails to see _4vc as corrupt in the same way the=0A> above test corr=
ectly sees _3 as corrupt.=0A=0AHmm.  Mark, if you vandalise segments_3 with=
 0s, and then remove=0Asegmetns_2, what happens when you try to open the In=
dexReader?  (I=0Awould expect exc).=0A=0AGreg, can you post the full stdout=
 you see from SIS after enabling its=0AinfoStream in the case that returns =
an IR with 0 docs (ie when you=0Adelete segments_4vb).=0A=0AAlso: if you do=
n't delete any of the segments_N file, and run the same=0Acode, how many do=
cs do you get?=0A=0AMike=0A=0A---------------------------------------------=
------------------------=0ATo unsubscribe, e-mail: java-user-unsubscribe@lu=
cene.apache.org=0AFor additional commands, e-mail: java-user-help@lucene.ap=
ache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50217-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jun 28 16:24:51 2011
Return-Path: <java-user-return-50217-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0CB7363C5
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 28 Jun 2011 16:24:51 +0000 (UTC)
Received: (qmail 14602 invoked by uid 500); 28 Jun 2011 16:24:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14529 invoked by uid 500); 28 Jun 2011 16:24:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14521 invoked by uid 99); 28 Jun 2011 16:24:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2011 16:24:48 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.220.176] (HELO mail-vx0-f176.google.com) (209.85.220.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2011 16:24:43 +0000
Received: by vxd2 with SMTP id 2so432266vxd.35
        for <java-user@lucene.apache.org>; Tue, 28 Jun 2011 09:24:22 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.52.76.193 with SMTP id m1mr11022140vdw.204.1309278260552; Tue,
 28 Jun 2011 09:24:20 -0700 (PDT)
Received: by 10.52.157.226 with HTTP; Tue, 28 Jun 2011 09:24:20 -0700 (PDT)
In-Reply-To: <1309270166.75117.YahooMailRC@web29014.mail.ird.yahoo.com>
References: <614C529D389A5944B351F7DFB7594F24013C3984@uksrpblkexb01.detica.com>
	<BANLkTimeoqy-6Cnftes45XL4r-4NoVo2Ag@mail.gmail.com>
	<614C529D389A5944B351F7DFB7594F24013C39C6@uksrpblkexb01.detica.com>
	<009a01cc3587$17490420$45db0c60$@thetaphi.de>
	<1309262937.71635.YahooMailRC@web29005.mail.ird.yahoo.com>
	<614C529D389A5944B351F7DFB7594F24013C3A31@uksrpblkexb01.detica.com>
	<BANLkTi=4UQ1dQ+P4quhUxYX3TiS_YhQhng@mail.gmail.com>
	<614C529D389A5944B351F7DFB7594F24013C3A35@uksrpblkexb01.detica.com>
	<BANLkTinuDkuY6tPz+yaFCfw-w+AN+qktzQ@mail.gmail.com>
	<614C529D389A5944B351F7DFB7594F24013C3A43@uksrpblkexb01.detica.com>
	<BANLkTimUgP9pvU_xYRM_YTf0jX4CxZT7Qw@mail.gmail.com>
	<1309267780.76184.YahooMailRC@web29013.mail.ird.yahoo.com>
	<BANLkTinT3WyqC3qC0rdSfudv4UNmf7Bmow@mail.gmail.com>
	<1309270166.75117.YahooMailRC@web29014.mail.ird.yahoo.com>
Date: Tue, 28 Jun 2011 12:24:20 -0400
Message-ID: <BANLkTimbR6oSwnNPZU2ZZkKi3Ny+ahZj5A@mail.gmail.com>
Subject: Re: Corrupt segments file full of zeros
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Here's the issue:

    https://issues.apache.org/jira/browse/LUCENE-3255

It's because we read the first 0 int to be an ancient segments file
format, and the next 0 int to mean there are no segments.  Yuck!

This format pre-dates Lucene 1.9, so the fix for 3.x is to stop
supporting this ancient format... but I don't see any easy way to fix
this pre-3.x where we must (by our back compat rules) support such an
ancient index.

Mike McCandless

http://blog.mikemccandless.com

On Tue, Jun 28, 2011 at 10:09 AM, mark harwood <markharw00d@yahoo.co.uk> wr=
ote:
> I've got Greg's bad segment file and it does look to be all zeros and if =
I drop
> it into an existing index directory with the name segment_N+1 it reproduc=
es the
> error i.e. IndexReader opens the index as if it contains zero docs.
> Preparing a Jira as we speak.
>
>
> ----- Original Message ----
> From: Michael McCandless <lucene@mikemccandless.com>
> To: java-user@lucene.apache.org
> Sent: Tue, 28 June, 2011 14:59:48
> Subject: Re: Corrupt segments file full of zeros
>
> On Tue, Jun 28, 2011 at 9:29 AM, mark harwood <markharw00d@yahoo.co.uk> w=
rote:
>> Hi Mike.
>>>>Hmmm -- what code are you running here, to print the number of docs?
>>
>> SegmentInfos.setInfoStream(System.out);
>> FSDirectory dir =3D FSDirectory.open(new File("j:/indexes/myindex"));
>> IndexReader r =3D IndexReader.open(dir, true);
>> System.out.println("index has "+r.maxDoc()+" docs");
>>
>> From my own tests outside of Greg's environment I've found Lucene to be =
doing
>> all the right things and IndexReader falls back gracefully to the previo=
us
>> commit e.g. here is the output from when I deliberately killed an update=
 after
>> prepareToCommit, leaving segment_2 and segment_3 and =A0then vandalised
> segment_3
>> with all zero bytes:
>> =A0 SIS [main]: directory listing genA=3D3
>> =A0 SIS [main]: fallback check: 2; 2
>> =A0 SIS [main]: segments.gen check: genB=3D2
>> =A0 SIS [main]: primary Exception on 'segments_3': java.io.IOException: =
read
> past
>> EOF'; will retry: retry=3Dfalse; gen =3D 3
>> =A0 SIS [main]: fallback to prior segment file 'segments_2'
>> =A0 SIS [main]: success on fallback segments_2
>>
>> Lucene does the right thing going back to _2. I can't yet see why in Gre=
g's
>> environment (NFS based) it fails to see _4vc as corrupt in the same way =
the
>> above test correctly sees _3 as corrupt.
>
> Hmm. =A0Mark, if you vandalise segments_3 with 0s, and then remove
> segmetns_2, what happens when you try to open the IndexReader? =A0(I
> would expect exc).
>
> Greg, can you post the full stdout you see from SIS after enabling its
> infoStream in the case that returns an IR with 0 docs (ie when you
> delete segments_4vb).
>
> Also: if you don't delete any of the segments_N file, and run the same
> code, how many docs do you get?
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50218-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun 29 02:45:39 2011
Return-Path: <java-user-return-50218-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B990D49EA
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 29 Jun 2011 02:45:39 +0000 (UTC)
Received: (qmail 28001 invoked by uid 500); 29 Jun 2011 02:45:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27627 invoked by uid 500); 29 Jun 2011 02:45:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27610 invoked by uid 99); 29 Jun 2011 02:45:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2011 02:45:32 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of trejkaz@trypticon.org designates 74.125.83.48 as permitted sender)
Received: from [74.125.83.48] (HELO mail-gw0-f48.google.com) (74.125.83.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2011 02:45:26 +0000
Received: by gwj22 with SMTP id 22so476226gwj.35
        for <java-user@lucene.apache.org>; Tue, 28 Jun 2011 19:45:05 -0700 (PDT)
Received: by 10.151.130.2 with SMTP id h2mr252125ybn.171.1309315505549;
        Tue, 28 Jun 2011 19:45:05 -0700 (PDT)
Received: from mail-gy0-f176.google.com (mail-gy0-f176.google.com [209.85.160.176])
        by mx.google.com with ESMTPS id c41sm271073ybc.0.2011.06.28.19.45.02
        (version=SSLv3 cipher=OTHER);
        Tue, 28 Jun 2011 19:45:03 -0700 (PDT)
Received: by gyb11 with SMTP id 11so490463gyb.35
        for <java-user@lucene.apache.org>; Tue, 28 Jun 2011 19:45:02 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.150.61.11 with SMTP id j11mr249033yba.122.1309315502524; Tue,
 28 Jun 2011 19:45:02 -0700 (PDT)
Received: by 10.150.51.7 with HTTP; Tue, 28 Jun 2011 19:45:02 -0700 (PDT)
In-Reply-To: <BANLkTimbR6oSwnNPZU2ZZkKi3Ny+ahZj5A@mail.gmail.com>
References: <614C529D389A5944B351F7DFB7594F24013C3984@uksrpblkexb01.detica.com>
	<BANLkTimeoqy-6Cnftes45XL4r-4NoVo2Ag@mail.gmail.com>
	<614C529D389A5944B351F7DFB7594F24013C39C6@uksrpblkexb01.detica.com>
	<009a01cc3587$17490420$45db0c60$@thetaphi.de>
	<1309262937.71635.YahooMailRC@web29005.mail.ird.yahoo.com>
	<614C529D389A5944B351F7DFB7594F24013C3A31@uksrpblkexb01.detica.com>
	<BANLkTi=4UQ1dQ+P4quhUxYX3TiS_YhQhng@mail.gmail.com>
	<614C529D389A5944B351F7DFB7594F24013C3A35@uksrpblkexb01.detica.com>
	<BANLkTinuDkuY6tPz+yaFCfw-w+AN+qktzQ@mail.gmail.com>
	<614C529D389A5944B351F7DFB7594F24013C3A43@uksrpblkexb01.detica.com>
	<BANLkTimUgP9pvU_xYRM_YTf0jX4CxZT7Qw@mail.gmail.com>
	<1309267780.76184.YahooMailRC@web29013.mail.ird.yahoo.com>
	<BANLkTinT3WyqC3qC0rdSfudv4UNmf7Bmow@mail.gmail.com>
	<1309270166.75117.YahooMailRC@web29014.mail.ird.yahoo.com>
	<BANLkTimbR6oSwnNPZU2ZZkKi3Ny+ahZj5A@mail.gmail.com>
Date: Wed, 29 Jun 2011 12:45:02 +1000
Message-ID: <BANLkTinf6=n75566jP=Mg=R3MXePSqcDNQ@mail.gmail.com>
Subject: Re: Corrupt segments file full of zeros
From: Trejkaz <trejkaz@trypticon.org>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

On Wed, Jun 29, 2011 at 2:24 AM, Michael McCandless
<lucene@mikemccandless.com> wrote:
> Here's the issue:
>
> =C2=A0 =C2=A0https://issues.apache.org/jira/browse/LUCENE-3255
>
> It's because we read the first 0 int to be an ancient segments file
> format, and the next 0 int to mean there are no segments. =C2=A0Yuck!
>
> This format pre-dates Lucene 1.9, so the fix for 3.x is to stop
> supporting this ancient format... but I don't see any easy way to fix
> this pre-3.x where we must (by our back compat rules) support such an
> ancient index.

It's not possible to do something based on the existence of further
zeroes after the first 8 bytes?  I would expect the original format to
have no additional data after that, but I don't exactly know whether a
corrupt file could be exactly 8 bytes long...

TX

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50219-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun 29 10:10:28 2011
Return-Path: <java-user-return-50219-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id EF6AB41C0
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 29 Jun 2011 10:10:28 +0000 (UTC)
Received: (qmail 69500 invoked by uid 500); 29 Jun 2011 10:10:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68915 invoked by uid 500); 29 Jun 2011 10:10:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68853 invoked by uid 99); 29 Jun 2011 10:10:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2011 10:10:03 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [120.50.41.110] (HELO XENON.brandtology.com) (120.50.41.110)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2011 10:09:57 +0000
Received: from XENON.brandtology.com ([192.168.52.110]) by xenon
 ([192.168.52.110]) with mapi; Wed, 29 Jun 2011 18:08:10 +0800
From: Tan Weijian <weijian.tan@brandtology.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 29 Jun 2011 18:08:09 +0800
Subject: StandardAnalyzer Issue
Thread-Topic: StandardAnalyzer Issue
Thread-Index: AQHMNkRyV6k2hZie0Eih0tysfFAWbA==
Message-ID: <B6803EF628C55642ABBF4DDBEA73B0901E8C376C55@xenon>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0

Hi,

I am currently facing some issues with usage of chinese characters with Sta=
ndardAnalyzer

It works well for normal search for chinese characters only but there are s=
ome issues with proximity search.


Eg.
my query is "AB CD"~20, i believe standard anaylzer breaks down to "A B C D=
"~20

i had tried using CJKAnalyzer, but it doesnt work for a single query search=
 and also issues like have chinese and english characters as keywords.

i am using lucene 2.4, had tried lucene 2.9 and also 3.2 still facing same =
issue.


Is there any solution to the proximity search for chinese ?


Regards
Wei Jian=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50220-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun 29 10:55:24 2011
Return-Path: <java-user-return-50220-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4E92A4510
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 29 Jun 2011 10:55:24 +0000 (UTC)
Received: (qmail 29294 invoked by uid 500); 29 Jun 2011 10:55:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29259 invoked by uid 500); 29 Jun 2011 10:55:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29251 invoked by uid 99); 29 Jun 2011 10:55:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2011 10:55:11 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.220.176] (HELO mail-vx0-f176.google.com) (209.85.220.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2011 10:55:07 +0000
Received: by vxd2 with SMTP id 2so1281919vxd.35
        for <java-user@lucene.apache.org>; Wed, 29 Jun 2011 03:54:45 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.52.73.163 with SMTP id m3mr893180vdv.244.1309344885207; Wed,
 29 Jun 2011 03:54:45 -0700 (PDT)
Received: by 10.52.157.226 with HTTP; Wed, 29 Jun 2011 03:54:45 -0700 (PDT)
In-Reply-To: <BANLkTinf6=n75566jP=Mg=R3MXePSqcDNQ@mail.gmail.com>
References: <614C529D389A5944B351F7DFB7594F24013C3984@uksrpblkexb01.detica.com>
	<BANLkTimeoqy-6Cnftes45XL4r-4NoVo2Ag@mail.gmail.com>
	<614C529D389A5944B351F7DFB7594F24013C39C6@uksrpblkexb01.detica.com>
	<009a01cc3587$17490420$45db0c60$@thetaphi.de>
	<1309262937.71635.YahooMailRC@web29005.mail.ird.yahoo.com>
	<614C529D389A5944B351F7DFB7594F24013C3A31@uksrpblkexb01.detica.com>
	<BANLkTi=4UQ1dQ+P4quhUxYX3TiS_YhQhng@mail.gmail.com>
	<614C529D389A5944B351F7DFB7594F24013C3A35@uksrpblkexb01.detica.com>
	<BANLkTinuDkuY6tPz+yaFCfw-w+AN+qktzQ@mail.gmail.com>
	<614C529D389A5944B351F7DFB7594F24013C3A43@uksrpblkexb01.detica.com>
	<BANLkTimUgP9pvU_xYRM_YTf0jX4CxZT7Qw@mail.gmail.com>
	<1309267780.76184.YahooMailRC@web29013.mail.ird.yahoo.com>
	<BANLkTinT3WyqC3qC0rdSfudv4UNmf7Bmow@mail.gmail.com>
	<1309270166.75117.YahooMailRC@web29014.mail.ird.yahoo.com>
	<BANLkTimbR6oSwnNPZU2ZZkKi3Ny+ahZj5A@mail.gmail.com>
	<BANLkTinf6=n75566jP=Mg=R3MXePSqcDNQ@mail.gmail.com>
Date: Wed, 29 Jun 2011 06:54:45 -0400
Message-ID: <BANLkTim9afBPEEHFksoSqA36+fMsT8radQ@mail.gmail.com>
Subject: Re: Corrupt segments file full of zeros
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

On Tue, Jun 28, 2011 at 10:45 PM, Trejkaz <trejkaz@trypticon.org> wrote:
> On Wed, Jun 29, 2011 at 2:24 AM, Michael McCandless
> <lucene@mikemccandless.com> wrote:
>> Here's the issue:
>>
>> =A0 =A0https://issues.apache.org/jira/browse/LUCENE-3255
>>
>> It's because we read the first 0 int to be an ancient segments file
>> format, and the next 0 int to mean there are no segments. =A0Yuck!
>>
>> This format pre-dates Lucene 1.9, so the fix for 3.x is to stop
>> supporting this ancient format... but I don't see any easy way to fix
>> this pre-3.x where we must (by our back compat rules) support such an
>> ancient index.
>
> It's not possible to do something based on the existence of further
> zeroes after the first 8 bytes? =A0I would expect the original format to
> have no additional data after that, but I don't exactly know whether a
> corrupt file could be exactly 8 bytes long...

Yes, you're right, it is!  That would work, as long as the all 0s file
isn't exactly 8 bytes long (this time yours was 20).  But then we are
still vulnerable if the corruption just happens to produce an 8 byte
all 0s file...

Simon also had a good idea, which is to check the version of the prior
segments file, and refuse to accept this ancient version of the newer
segments if the prior one is "modern".

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50221-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun 29 15:26:10 2011
Return-Path: <java-user-return-50221-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 07DA34760
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 29 Jun 2011 15:26:10 +0000 (UTC)
Received: (qmail 86590 invoked by uid 500); 29 Jun 2011 15:26:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86481 invoked by uid 500); 29 Jun 2011 15:26:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86473 invoked by uid 99); 29 Jun 2011 15:26:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2011 15:26:06 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [212.243.6.182] (HELO mail.mysigninternational.com) (212.243.6.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2011 15:25:58 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail.mysigninternational.com (Postfix) with ESMTP id 8F17AC2126
	for <java-user@lucene.apache.org>; Wed, 29 Jun 2011 17:25:38 +0200 (CEST)
Received: from mail.mysigninternational.com ([127.0.0.1])
	by localhost (mysign-postfix1.INTERNET [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 0KU2w8JtydxY for <java-user@lucene.apache.org>;
	Wed, 29 Jun 2011 17:25:38 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp (unknown [192.168.13.8])
	by mail.mysigninternational.com (Postfix) with ESMTP id 65EE8C2125
	for <java-user@lucene.apache.org>; Wed, 29 Jun 2011 17:25:38 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31]) by
 Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31%10]) with mapi;
 Wed, 29 Jun 2011 17:25:38 +0200
From: Clemens Wyss <clemensdev@mysign.ch>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 29 Jun 2011 17:25:37 +0200
Subject: negative wildcard query
Thread-Topic: negative wildcard query
Thread-Index: Acw2cMs1WiAezToJSAuBH/zw3MPDhg==
Message-ID: <E594BA962D832C49A3CF858DAA3A696C12280F4D8D@Exchange2007.mysigndomain.corp>
Accept-Language: de-DE, de-CH
Content-Language: de-DE
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: de-DE, de-CH
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

Say I have a document with field "f1". How can I search Documents which hav=
e not "test" in field "f"
I tried:
-f: *test*
f: -*test*
f: NOT *test*

but no luck. Using WildCardQuery class...
Any advices?

Thx
Clemens

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50222-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun 29 15:47:05 2011
Return-Path: <java-user-return-50222-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CCB5D419D
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 29 Jun 2011 15:47:05 +0000 (UTC)
Received: (qmail 19650 invoked by uid 500); 29 Jun 2011 15:47:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19397 invoked by uid 500); 29 Jun 2011 15:47:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19388 invoked by uid 99); 29 Jun 2011 15:47:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2011 15:47:02 +0000
X-ASF-Spam-Status: No, hits=2.0 required=5.0
	tests=FROM_12LTRDOM,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [173.164.230.50] (HELO mailhost.transaxtions.com) (173.164.230.50)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 29 Jun 2011 15:46:56 +0000
Received: (qmail 26731 invoked from network); 29 Jun 2011 08:35:13 -0700
Received: from unknown (HELO ?192.168.1.120?) (192.168.1.120)
  by mymailhost.transaxtions.com with SMTP; 29 Jun 2011 08:35:13 -0700
Message-ID: <4E0B48DE.40300@transaxtions.com>
Date: Wed, 29 Jun 2011 08:46:38 -0700
From: Nagendra Nagarajayya <nnagarajayya@transaxtions.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.18) Gecko/20110616 Lightning/1.0b2 Thunderbird/3.1.11
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: [Announce] Solr 3.2 with RankingAlgorithm NRT capability, very high
 performance 1428 tps
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi!

I would like to announce Solr 3.2 with RankingAlgorithm has Near Real 
Time capability now. The NRT performance is very high, 1428 
documents/sec [ MBArtists 390k index]. The NRT functionality allows you 
to add documents without the IndexSearchers being closed or caches being 
cleared. A commit is not needed with the document update. Searches can 
run concurrently with document updates. No changes are needed except for 
enabling the NRT through solrconfig.xml.

A new visible attribute has been introduced that allows one to tune the 
visibility of a document added to the index. The default is 150ms. This 
can be set to 0 enabling documents to become visible for searches as 
soon as they are added. The visibility attribute is added as below:

<realtime visible="150">true</realtime>

With visible attribute at 200ms,  the performance is about  1428 TPS 
(document adds) on a dual core intel system with 2GB heap with searches 
in parallel.

I have a wiki page that describes NRT performance in detail and can be 
accessed from here:

http://solr-ra.tgels.com/wiki/en/Near_Real_Time_Search_ver3.2

You can download Solr 3.2 with RankingAlgorithm (NRT version) from here:

http://solr-ra.tgels.com


I would like to invite you to give this version a try as the performance 
is very high, comparable to the default load.

Regards,

- Nagendra Nagarajayya
http://solr-ra.tgels.com
http://rankingalgorithm.tgels.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50223-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jun 29 20:36:56 2011
Return-Path: <java-user-return-50223-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2F2FB4E2E
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 29 Jun 2011 20:36:56 +0000 (UTC)
Received: (qmail 38268 invoked by uid 500); 29 Jun 2011 20:36:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38207 invoked by uid 500); 29 Jun 2011 20:36:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38199 invoked by uid 99); 29 Jun 2011 20:36:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2011 20:36:53 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2011 20:36:45 +0000
Received: by bwb5 with SMTP id 5so2296298bwb.35
        for <java-user@lucene.apache.org>; Wed, 29 Jun 2011 13:36:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        bh=3tFAaP0q4WSPunLMwB49R28WYjbtCXRPzDG7s+03EoM=;
        b=Hboa19L0rCY1LuA9ZCdsIaTQSKk4N4fNiP+vRKCp30zwJ1xGyC8beh1EkxkOXqMMCW
         I/wPWJTEIohv901/NMqTFKIFqmVz7UBQkdWY6jJlCzCvRjqICGnHH6SQsZHcpNnHZqy/
         ozqAE+mCLUVmHqcizzm/Wo8ND9VNRu9NfmYNE=
Received: by 10.204.17.148 with SMTP id s20mr1118343bka.133.1309379784392;
        Wed, 29 Jun 2011 13:36:24 -0700 (PDT)
Received: from [192.168.1.152] (c150-155-70-80.bjare.net [80.70.155.150])
        by mx.google.com with ESMTPS id t9sm1457808bkn.20.2011.06.29.13.36.22
        (version=TLSv1/SSLv3 cipher=OTHER);
        Wed, 29 Jun 2011 13:36:23 -0700 (PDT)
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1084)
Subject: Re: negative wildcard query
From: Karl Wettin <karl.wettin@gmail.com>
In-Reply-To: <E594BA962D832C49A3CF858DAA3A696C12280F4D8D@Exchange2007.mysigndomain.corp>
Date: Wed, 29 Jun 2011 22:36:21 +0200
Content-Transfer-Encoding: quoted-printable
Message-Id: <6B7753F6-061B-4324-8C31-51E280BFC5CD@gmail.com>
References: <E594BA962D832C49A3CF858DAA3A696C12280F4D8D@Exchange2007.mysigndomain.corp>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1084)

You'll also need things to exclude from, eg a MatchAllDocsQuery.

	karl

29 jun 2011 kl. 17.25 skrev Clemens Wyss:

> Say I have a document with field "f1". How can I search Documents =
which have not "test" in field "f"
> I tried:
> -f: *test*
> f: -*test*
> f: NOT *test*
>=20
> but no luck. Using WildCardQuery class...
> Any advices?
>=20
> Thx
> Clemens
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50224-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun 30 03:37:42 2011
Return-Path: <java-user-return-50224-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 271D56C93
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 30 Jun 2011 03:37:42 +0000 (UTC)
Received: (qmail 82672 invoked by uid 500); 30 Jun 2011 03:37:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82158 invoked by uid 500); 30 Jun 2011 03:37:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82121 invoked by uid 99); 30 Jun 2011 03:37:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jun 2011 03:37:24 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [212.243.6.182] (HELO mail.mysigninternational.com) (212.243.6.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jun 2011 03:37:17 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail.mysigninternational.com (Postfix) with ESMTP id 698DEC2125
	for <java-user@lucene.apache.org>; Thu, 30 Jun 2011 05:36:55 +0200 (CEST)
Received: from mail.mysigninternational.com ([127.0.0.1])
	by localhost (mysign-postfix1.INTERNET [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id Tqaz7Mz3zUbs for <java-user@lucene.apache.org>;
	Thu, 30 Jun 2011 05:36:55 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp (unknown [192.168.13.8])
	by mail.mysigninternational.com (Postfix) with ESMTP id 46E39C2120
	for <java-user@lucene.apache.org>; Thu, 30 Jun 2011 05:36:55 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31]) by
 Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31%10]) with mapi;
 Thu, 30 Jun 2011 05:36:55 +0200
From: Clemens Wyss <clemensdev@mysign.ch>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Thu, 30 Jun 2011 05:36:53 +0200
Subject: AW: negative wildcard query
Thread-Topic: negative wildcard query
Thread-Index: Acw2nEqqBOD+/H49ReOlWaL+nPDIKgAOkw3g
Message-ID: <E594BA962D832C49A3CF858DAA3A696C12280F4DA8@Exchange2007.mysigndomain.corp>
References: <E594BA962D832C49A3CF858DAA3A696C12280F4D8D@Exchange2007.mysigndomain.corp>
 <6B7753F6-061B-4324-8C31-51E280BFC5CD@gmail.com>
In-Reply-To: <6B7753F6-061B-4324-8C31-51E280BFC5CD@gmail.com>
Accept-Language: de-DE, de-CH
Content-Language: de-DE
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: de-DE, de-CH
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0

Karl, I just saw, that I had a typo in my initial post. It should be:

Say I have a document with a single field "f". How can I search Documents w=
hich have not "test" in field "f"
I tried:
-f: *test*
f: -*test*
f: NOT *test*

but no luck. Using WildCardQuery class...
Any advices?

Thx
Clemens=20

> -----Urspr=FCngliche Nachricht-----
> Von: Karl Wettin [mailto:karl.wettin@gmail.com]
> Gesendet: Mittwoch, 29. Juni 2011 22:36
> An: java-user@lucene.apache.org
> Betreff: Re: negative wildcard query
>=20
> You'll also need things to exclude from, eg a MatchAllDocsQuery.
>=20
> 	karl
>=20
> 29 jun 2011 kl. 17.25 skrev Clemens Wyss:
>=20
> > Say I have a document with field "f1". How can I search Documents which
> have not "test" in field "f"
> > I tried:
> > -f: *test*
> > f: -*test*
> > f: NOT *test*
> >
> > but no luck. Using WildCardQuery class...
> > Any advices?
> >
> > Thx
> > Clemens
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50225-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun 30 07:44:58 2011
Return-Path: <java-user-return-50225-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1C6A26AF1
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 30 Jun 2011 07:44:58 +0000 (UTC)
Received: (qmail 93979 invoked by uid 500); 30 Jun 2011 07:44:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93600 invoked by uid 500); 30 Jun 2011 07:44:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93568 invoked by uid 99); 30 Jun 2011 07:44:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jun 2011 07:44:43 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [212.243.6.182] (HELO mail.mysigninternational.com) (212.243.6.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jun 2011 07:44:36 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail.mysigninternational.com (Postfix) with ESMTP id 87801C2126
	for <java-user@lucene.apache.org>; Thu, 30 Jun 2011 09:44:15 +0200 (CEST)
Received: from mail.mysigninternational.com ([127.0.0.1])
	by localhost (mysign-postfix1.INTERNET [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id lOieoHa7aikZ for <java-user@lucene.apache.org>;
	Thu, 30 Jun 2011 09:44:15 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp (unknown [192.168.13.8])
	by mail.mysigninternational.com (Postfix) with ESMTP id 60B8BC2120
	for <java-user@lucene.apache.org>; Thu, 30 Jun 2011 09:44:15 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31]) by
 Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31%10]) with mapi;
 Thu, 30 Jun 2011 09:44:15 +0200
From: Clemens Wyss <clemensdev@mysign.ch>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Thu, 30 Jun 2011 09:44:14 +0200
Subject: AW: negative wildcard query
Thread-Topic: negative wildcard query
Thread-Index: Acw2nEqqBOD+/H49ReOlWaL+nPDIKgAOkw3gAAiYbsA=
Message-ID: <E594BA962D832C49A3CF858DAA3A696C12280F4DDB@Exchange2007.mysigndomain.corp>
References: <E594BA962D832C49A3CF858DAA3A696C12280F4D8D@Exchange2007.mysigndomain.corp>
 <6B7753F6-061B-4324-8C31-51E280BFC5CD@gmail.com>
 <E594BA962D832C49A3CF858DAA3A696C12280F4DA8@Exchange2007.mysigndomain.corp>
In-Reply-To: <E594BA962D832C49A3CF858DAA3A696C12280F4DA8@Exchange2007.mysigndomain.corp>
Accept-Language: de-DE, de-CH
Content-Language: de-DE
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: de-DE, de-CH
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0

My testcase/context:

query =3D new BooleanQuery();
query.add( new WildcardQuery( new Term( "f", "*test*" ) ), Occur.MUST_NOT )=
;
filter =3D new QueryWrapperFilter( query );
result =3D indexSearcher.search( new WildcardQuery( new Term( "description"=
, "*happy*" ) ), filter, 10 );

The filter never ever lets any documents through...when calling

result =3D indexSearcher.search( new WildcardQuery( new Term( "description"=
, "*happy*" ) ), 10 );

I have hits...

> -----Urspr=FCngliche Nachricht-----
> Von: Clemens Wyss [mailto:clemensdev@mysign.ch]
> Gesendet: Donnerstag, 30. Juni 2011 05:37
> An: java-user@lucene.apache.org
> Betreff: AW: negative wildcard query
>=20
> Karl, I just saw, that I had a typo in my initial post. It should be:
>=20
> Say I have a document with a single field "f". How can I search Documents
> which have not "test" in field "f"
> I tried:
> -f: *test*
> f: -*test*
> f: NOT *test*
>=20
> but no luck. Using WildCardQuery class...
> Any advices?
>=20
> Thx
> Clemens
>=20
> > -----Urspr=FCngliche Nachricht-----
> > Von: Karl Wettin [mailto:karl.wettin@gmail.com]
> > Gesendet: Mittwoch, 29. Juni 2011 22:36
> > An: java-user@lucene.apache.org
> > Betreff: Re: negative wildcard query
> >
> > You'll also need things to exclude from, eg a MatchAllDocsQuery.
> >
> > 	karl
> >
> > 29 jun 2011 kl. 17.25 skrev Clemens Wyss:
> >
> > > Say I have a document with field "f1". How can I search Documents
> > > which
> > have not "test" in field "f"
> > > I tried:
> > > -f: *test*
> > > f: -*test*
> > > f: NOT *test*
> > >
> > > but no luck. Using WildCardQuery class...
> > > Any advices?
> > >
> > > Thx
> > > Clemens
> > >
> > > --------------------------------------------------------------------
> > > - To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50226-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun 30 08:32:21 2011
Return-Path: <java-user-return-50226-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6BED660C2
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 30 Jun 2011 08:32:21 +0000 (UTC)
Received: (qmail 62644 invoked by uid 500); 30 Jun 2011 08:32:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61513 invoked by uid 500); 30 Jun 2011 08:32:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61478 invoked by uid 99); 30 Jun 2011 08:31:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jun 2011 08:31:59 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jun 2011 08:31:51 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 1941F45FDE9
	for <java-user@lucene.apache.org>; Thu, 30 Jun 2011 10:31:31 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id SFcJelX5GZAD for <java-user@lucene.apache.org>;
	Thu, 30 Jun 2011 10:31:26 +0200 (CEST)
Received: from VEGA (unknown [89.204.137.93])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 6670E45FDB8
	for <java-user@lucene.apache.org>; Thu, 30 Jun 2011 10:31:25 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <E594BA962D832C49A3CF858DAA3A696C12280F4D8D@Exchange2007.mysigndomain.corp> <6B7753F6-061B-4324-8C31-51E280BFC5CD@gmail.com> <E594BA962D832C49A3CF858DAA3A696C12280F4DA8@Exchange2007.mysigndomain.corp> <E594BA962D832C49A3CF858DAA3A696C12280F4DDB@Exchange2007.mysigndomain.corp>
In-Reply-To: <E594BA962D832C49A3CF858DAA3A696C12280F4DDB@Exchange2007.mysigndomain.corp>
Subject: RE: negative wildcard query
Date: Thu, 30 Jun 2011 10:31:48 +0200
Message-ID: <006201cc3700$28604ff0$7920efd0$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQHART8tFot0EBWu8Nt4BJIr97BMjQHKQFcmAv5/DGQCIVFm7ZS2JMuQ
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

Pure negative queries do not work, you have to add a MUST clause that =
hits
all documents, e.g. MatchAllDocsQuery:

query =3D new BooleanQuery();
query.add(new MatchAllDocsQuery(), Occur.MUST)
query.add(new WildcardQuery(new Term( "f", "*test*" )), Occur.MUST_NOT =
);

Uwe
=20
-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Clemens Wyss [mailto:clemensdev@mysign.ch]
> Sent: Thursday, June 30, 2011 9:44 AM
> To: java-user@lucene.apache.org
> Subject: AW: negative wildcard query
>=20
> My testcase/context:
>=20
> query =3D new BooleanQuery();
> query.add( new WildcardQuery( new Term( "f", "*test*" ) ),
> Occur.MUST_NOT ); filter =3D new QueryWrapperFilter( query ); result =
=3D
> indexSearcher.search( new WildcardQuery( new Term( "description",
> "*happy*" ) ), filter, 10 );
>=20
> The filter never ever lets any documents through...when calling
>=20
> result =3D indexSearcher.search( new WildcardQuery( new Term(
> "description", "*happy*" ) ), 10 );
>=20
> I have hits...
>=20
> > -----Urspr=FCngliche Nachricht-----
> > Von: Clemens Wyss [mailto:clemensdev@mysign.ch]
> > Gesendet: Donnerstag, 30. Juni 2011 05:37
> > An: java-user@lucene.apache.org
> > Betreff: AW: negative wildcard query
> >
> > Karl, I just saw, that I had a typo in my initial post. It should =
be:
> >
> > Say I have a document with a single field "f". How can I search
> > Documents which have not "test" in field "f"
> > I tried:
> > -f: *test*
> > f: -*test*
> > f: NOT *test*
> >
> > but no luck. Using WildCardQuery class...
> > Any advices?
> >
> > Thx
> > Clemens
> >
> > > -----Urspr=FCngliche Nachricht-----
> > > Von: Karl Wettin [mailto:karl.wettin@gmail.com]
> > > Gesendet: Mittwoch, 29. Juni 2011 22:36
> > > An: java-user@lucene.apache.org
> > > Betreff: Re: negative wildcard query
> > >
> > > You'll also need things to exclude from, eg a MatchAllDocsQuery.
> > >
> > > 	karl
> > >
> > > 29 jun 2011 kl. 17.25 skrev Clemens Wyss:
> > >
> > > > Say I have a document with field "f1". How can I search =
Documents
> > > > which
> > > have not "test" in field "f"
> > > > I tried:
> > > > -f: *test*
> > > > f: -*test*
> > > > f: NOT *test*
> > > >
> > > > but no luck. Using WildCardQuery class...
> > > > Any advices?
> > > >
> > > > Thx
> > > > Clemens
> > > >
> > > > =
------------------------------------------------------------------
> > > > --
> > > > - To unsubscribe, e-mail: =
java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: =
java-user-help@lucene.apache.org
> > > >
> > >
> > >
> > > =
--------------------------------------------------------------------
> > > - To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50227-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun 30 08:51:53 2011
Return-Path: <java-user-return-50227-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 71A8769F3
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 30 Jun 2011 08:51:53 +0000 (UTC)
Received: (qmail 97322 invoked by uid 500); 30 Jun 2011 08:51:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96882 invoked by uid 500); 30 Jun 2011 08:51:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96857 invoked by uid 99); 30 Jun 2011 08:51:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jun 2011 08:51:35 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [212.243.6.182] (HELO mail.mysigninternational.com) (212.243.6.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jun 2011 08:51:29 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail.mysigninternational.com (Postfix) with ESMTP id C8D04C2125
	for <java-user@lucene.apache.org>; Thu, 30 Jun 2011 10:51:08 +0200 (CEST)
Received: from mail.mysigninternational.com ([127.0.0.1])
	by localhost (mysign-postfix1.INTERNET [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id EIapbUix8k9Z for <java-user@lucene.apache.org>;
	Thu, 30 Jun 2011 10:51:08 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp (unknown [192.168.13.8])
	by mail.mysigninternational.com (Postfix) with ESMTP id 80433C2120
	for <java-user@lucene.apache.org>; Thu, 30 Jun 2011 10:51:08 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31]) by
 Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31%10]) with mapi;
 Thu, 30 Jun 2011 10:51:08 +0200
From: Clemens Wyss <clemensdev@mysign.ch>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Thu, 30 Jun 2011 10:51:07 +0200
Subject: AW: negative wildcard query
Thread-Topic: negative wildcard query
Thread-Index: AQHART8tFot0EBWu8Nt4BJIr97BMjQHKQFcmAv5/DGQCIVFm7ZS2JMuQgAAF1hA=
Message-ID: <E594BA962D832C49A3CF858DAA3A696C12280F4DFE@Exchange2007.mysigndomain.corp>
References: <E594BA962D832C49A3CF858DAA3A696C12280F4D8D@Exchange2007.mysigndomain.corp>
 <6B7753F6-061B-4324-8C31-51E280BFC5CD@gmail.com>
 <E594BA962D832C49A3CF858DAA3A696C12280F4DA8@Exchange2007.mysigndomain.corp>
 <E594BA962D832C49A3CF858DAA3A696C12280F4DDB@Exchange2007.mysigndomain.corp>
 <006201cc3700$28604ff0$7920efd0$@thetaphi.de>
In-Reply-To: <006201cc3700$28604ff0$7920efd0$@thetaphi.de>
Accept-Language: de-DE, de-CH
Content-Language: de-DE
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: de-DE, de-CH
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

Thx!

> -----Urspr=FCngliche Nachricht-----
> Von: Uwe Schindler [mailto:uwe@thetaphi.de]
> Gesendet: Donnerstag, 30. Juni 2011 10:32
> An: java-user@lucene.apache.org
> Betreff: RE: negative wildcard query
>=20
> Pure negative queries do not work, you have to add a MUST clause that hit=
s
> all documents, e.g. MatchAllDocsQuery:
>=20
> query =3D new BooleanQuery();
> query.add(new MatchAllDocsQuery(), Occur.MUST) query.add(new
> WildcardQuery(new Term( "f", "*test*" )), Occur.MUST_NOT );
>=20
> Uwe
>=20
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>=20
>=20
> > -----Original Message-----
> > From: Clemens Wyss [mailto:clemensdev@mysign.ch]
> > Sent: Thursday, June 30, 2011 9:44 AM
> > To: java-user@lucene.apache.org
> > Subject: AW: negative wildcard query
> >
> > My testcase/context:
> >
> > query =3D new BooleanQuery();
> > query.add( new WildcardQuery( new Term( "f", "*test*" ) ),
> > Occur.MUST_NOT ); filter =3D new QueryWrapperFilter( query ); result =
=3D
> > indexSearcher.search( new WildcardQuery( new Term( "description",
> > "*happy*" ) ), filter, 10 );
> >
> > The filter never ever lets any documents through...when calling
> >
> > result =3D indexSearcher.search( new WildcardQuery( new Term(
> > "description", "*happy*" ) ), 10 );
> >
> > I have hits...
> >
> > > -----Urspr=FCngliche Nachricht-----
> > > Von: Clemens Wyss [mailto:clemensdev@mysign.ch]
> > > Gesendet: Donnerstag, 30. Juni 2011 05:37
> > > An: java-user@lucene.apache.org
> > > Betreff: AW: negative wildcard query
> > >
> > > Karl, I just saw, that I had a typo in my initial post. It should be:
> > >
> > > Say I have a document with a single field "f". How can I search
> > > Documents which have not "test" in field "f"
> > > I tried:
> > > -f: *test*
> > > f: -*test*
> > > f: NOT *test*
> > >
> > > but no luck. Using WildCardQuery class...
> > > Any advices?
> > >
> > > Thx
> > > Clemens
> > >
> > > > -----Urspr=FCngliche Nachricht-----
> > > > Von: Karl Wettin [mailto:karl.wettin@gmail.com]
> > > > Gesendet: Mittwoch, 29. Juni 2011 22:36
> > > > An: java-user@lucene.apache.org
> > > > Betreff: Re: negative wildcard query
> > > >
> > > > You'll also need things to exclude from, eg a MatchAllDocsQuery.
> > > >
> > > > 	karl
> > > >
> > > > 29 jun 2011 kl. 17.25 skrev Clemens Wyss:
> > > >
> > > > > Say I have a document with field "f1". How can I search
> > > > > Documents which
> > > > have not "test" in field "f"
> > > > > I tried:
> > > > > -f: *test*
> > > > > f: -*test*
> > > > > f: NOT *test*
> > > > >
> > > > > but no luck. Using WildCardQuery class...
> > > > > Any advices?
> > > > >
> > > > > Thx
> > > > > Clemens
> > > > >
> > > > > ----------------------------------------------------------------
> > > > > --
> > > > > --
> > > > > - To unsubscribe, e-mail:
> > > > > java-user-unsubscribe@lucene.apache.org
> > > > > For additional commands, e-mail:
> > > > > java-user-help@lucene.apache.org
> > > > >
> > > >
> > > >
> > > > ------------------------------------------------------------------
> > > > --
> > > > - To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> > > --------------------------------------------------------------------
> > > - To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50228-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun 30 09:11:51 2011
Return-Path: <java-user-return-50228-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4CEA365A7
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 30 Jun 2011 09:11:51 +0000 (UTC)
Received: (qmail 25114 invoked by uid 500); 30 Jun 2011 09:11:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24855 invoked by uid 500); 30 Jun 2011 09:11:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24842 invoked by uid 99); 30 Jun 2011 09:11:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jun 2011 09:11:28 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [97.107.169.202] (HELO mx4.consona.com) (97.107.169.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jun 2011 09:11:20 +0000
x-mimeole: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01CC3705.9FD59ABF"
Subject: distributing the indexing process
Date: Thu, 30 Jun 2011 05:12:47 -0400
Message-ID: <A101F1DEC1952E47BB64C4E78BB1CFC9010FCB34@IDCEXCHVS.made2manage.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: distributing the indexing process
Thread-Index: Acw3BeDOSQjPVU3VS8mRVCkBJahpQA==
From: "Guru Chandar" <Guru.Chandar@consona.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01CC3705.9FD59ABF
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

=20

If we have to index a lot of documents, is there a way to divide the
documents into multiple sets and index them on multiple machines in
parallel, and then merge the resulting indexes back into a single
machine? If yes, will the result be logically equivalent to indexing all
the documents on a single machine?

=20

Thanks,

-gc

=20


------_=_NextPart_001_01CC3705.9FD59ABF--

From java-user-return-50229-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun 30 09:35:12 2011
Return-Path: <java-user-return-50229-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 88AD666EF
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 30 Jun 2011 09:35:12 +0000 (UTC)
Received: (qmail 59606 invoked by uid 500); 30 Jun 2011 09:35:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57324 invoked by uid 500); 30 Jun 2011 09:34:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57284 invoked by uid 99); 30 Jun 2011 09:34:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jun 2011 09:34:51 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of torindan@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jun 2011 09:34:43 +0000
Received: by qwj9 with SMTP id 9so1475113qwj.35
        for <java-user@lucene.apache.org>; Thu, 30 Jun 2011 02:34:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        bh=9P8xMTHzVl7W8wHMHhzH8yTkojgE5ZHU91F1T3+BfJw=;
        b=mgb0T91GsVMS4P6UjyDWi8Tam+YpeHknsLg0zpV/jojEnmIIDH3qgg8lLSzqDXRxT5
         41ABEUm2G3ECfhQK+6ZbCdsD5HroIR8FZlI2w6QyWrudIPoiV1FPlkbbevuNDohF5a+Y
         yVN/xrK/q+GsVoS+VKQq9Z869ByUHgu53qql0=
Received: by 10.229.189.8 with SMTP id dc8mr1393992qcb.174.1309426462204; Thu,
 30 Jun 2011 02:34:22 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.182.213 with HTTP; Thu, 30 Jun 2011 02:34:02 -0700 (PDT)
In-Reply-To: <A101F1DEC1952E47BB64C4E78BB1CFC9010FCB34@IDCEXCHVS.made2manage.com>
References: <A101F1DEC1952E47BB64C4E78BB1CFC9010FCB34@IDCEXCHVS.made2manage.com>
From: =?UTF-8?B?RGFuaWwgxaJPUklO?= <torindan@gmail.com>
Date: Thu, 30 Jun 2011 12:34:02 +0300
Message-ID: <BANLkTimqEAuv6qVWVA1N2rVExoWsd+DMpg@mail.gmail.com>
Subject: Re: distributing the indexing process
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

It depends....

If all documents are distinct then, yeah, go for it.

If you have multiple versions of same document in your data and you
only want to index the latest version...then you need a clever way to
split data to make sure that all versions of document will be indexed
on same host, and you won't have duplicates later.

But my biggest concern is: if your index is that big that you need to
index it on different hosts, are you sure you want it to be combine in
a single index?
Maybe it's a good idea to partition it?

On Thu, Jun 30, 2011 at 12:12, Guru Chandar <Guru.Chandar@consona.com> wrote:
>
>
> If we have to index a lot of documents, is there a way to divide the
> documents into multiple sets and index them on multiple machines in
> parallel, and then merge the resulting indexes back into a single
> machine? If yes, will the result be logically equivalent to indexing all
> the documents on a single machine?
>
>
>
> Thanks,
>
> -gc
>
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50230-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun 30 09:44:15 2011
Return-Path: <java-user-return-50230-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3AD6C697A
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 30 Jun 2011 09:44:15 +0000 (UTC)
Received: (qmail 86050 invoked by uid 500); 30 Jun 2011 09:44:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85469 invoked by uid 500); 30 Jun 2011 09:43:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85440 invoked by uid 99); 30 Jun 2011 09:43:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jun 2011 09:43:55 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [97.107.169.202] (HELO mx4.consona.com) (97.107.169.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jun 2011 09:43:50 +0000
x-mimeole: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: base64
Subject: RE: distributing the indexing process
Date: Thu, 30 Jun 2011 05:45:17 -0400
Message-ID: <A101F1DEC1952E47BB64C4E78BB1CFC9010FCB43@IDCEXCHVS.made2manage.com>
In-Reply-To: <BANLkTimqEAuv6qVWVA1N2rVExoWsd+DMpg@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: distributing the indexing process
Thread-Index: Acw3CQHLBFIpBJ82RziPLtLZQGbieAAAG6xg
References: <A101F1DEC1952E47BB64C4E78BB1CFC9010FCB34@IDCEXCHVS.made2manage.com> <BANLkTimqEAuv6qVWVA1N2rVExoWsd+DMpg@mail.gmail.com>
From: "Guru Chandar" <Guru.Chandar@consona.com>
To: <java-user@lucene.apache.org>

VGhhbmtzIGZvciB0aGUgcmVzcG9uc2UuIFRoZSBkb2N1bWVudHMgYXJlIGFsbCBkaXN0aW5jdC4g
TXkgKGxpbWl0ZWQpIHVuZGVyc3RhbmRpbmcgb24gcGFydGl0aW9uaW5nIHRoZSBpbmRleGVzIHdp
bGwgbGVhZCB0byByZXN1bHRzIGJlaW5nIGRpZmZlcmVudCBmcm9tIHRoZSBjYXNlIHdoZXJlIHlv
dSBoYXZlIGFsbCBpbiBvbmUgcGFydGl0aW9uLCBkdWUgdG8gTHVjZW5lIGN1cnJlbnRseSBub3Qg
c3VwcG9ydGluZyBkaXN0cmlidXRlZCBpZGYuIElzIHRoaXMgY29ycmVjdD8gSXMgdGhlcmUgYSB3
YXkgdG8gbWFrZSBpdCB3b3JrIHNlYW1sZXNzbHk/DQoNClJlZ2FyZHMsDQotZ2MNCg0KDQotLS0t
LU9yaWdpbmFsIE1lc3NhZ2UtLS0tLQ0KRnJvbTogRGFuaWwgxaJPUklOIFttYWlsdG86dG9yaW5k
YW5AZ21haWwuY29tXSANClNlbnQ6IFRodXJzZGF5LCBKdW5lIDMwLCAyMDExIDM6MDQgUE0NClRv
OiBqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmcNClN1YmplY3Q6IFJlOiBkaXN0cmlidXRpbmcg
dGhlIGluZGV4aW5nIHByb2Nlc3MNCg0KSXQgZGVwZW5kcy4uLi4NCg0KSWYgYWxsIGRvY3VtZW50
cyBhcmUgZGlzdGluY3QgdGhlbiwgeWVhaCwgZ28gZm9yIGl0Lg0KDQpJZiB5b3UgaGF2ZSBtdWx0
aXBsZSB2ZXJzaW9ucyBvZiBzYW1lIGRvY3VtZW50IGluIHlvdXIgZGF0YSBhbmQgeW91DQpvbmx5
IHdhbnQgdG8gaW5kZXggdGhlIGxhdGVzdCB2ZXJzaW9uLi4udGhlbiB5b3UgbmVlZCBhIGNsZXZl
ciB3YXkgdG8NCnNwbGl0IGRhdGEgdG8gbWFrZSBzdXJlIHRoYXQgYWxsIHZlcnNpb25zIG9mIGRv
Y3VtZW50IHdpbGwgYmUgaW5kZXhlZA0Kb24gc2FtZSBob3N0LCBhbmQgeW91IHdvbid0IGhhdmUg
ZHVwbGljYXRlcyBsYXRlci4NCg0KQnV0IG15IGJpZ2dlc3QgY29uY2VybiBpczogaWYgeW91ciBp
bmRleCBpcyB0aGF0IGJpZyB0aGF0IHlvdSBuZWVkIHRvDQppbmRleCBpdCBvbiBkaWZmZXJlbnQg
aG9zdHMsIGFyZSB5b3Ugc3VyZSB5b3Ugd2FudCBpdCB0byBiZSBjb21iaW5lIGluDQphIHNpbmds
ZSBpbmRleD8NCk1heWJlIGl0J3MgYSBnb29kIGlkZWEgdG8gcGFydGl0aW9uIGl0Pw0KDQpPbiBU
aHUsIEp1biAzMCwgMjAxMSBhdCAxMjoxMiwgR3VydSBDaGFuZGFyIDxHdXJ1LkNoYW5kYXJAY29u
c29uYS5jb20+IHdyb3RlOg0KPg0KPg0KPiBJZiB3ZSBoYXZlIHRvIGluZGV4IGEgbG90IG9mIGRv
Y3VtZW50cywgaXMgdGhlcmUgYSB3YXkgdG8gZGl2aWRlIHRoZQ0KPiBkb2N1bWVudHMgaW50byBt
dWx0aXBsZSBzZXRzIGFuZCBpbmRleCB0aGVtIG9uIG11bHRpcGxlIG1hY2hpbmVzIGluDQo+IHBh
cmFsbGVsLCBhbmQgdGhlbiBtZXJnZSB0aGUgcmVzdWx0aW5nIGluZGV4ZXMgYmFjayBpbnRvIGEg
c2luZ2xlDQo+IG1hY2hpbmU/IElmIHllcywgd2lsbCB0aGUgcmVzdWx0IGJlIGxvZ2ljYWxseSBl
cXVpdmFsZW50IHRvIGluZGV4aW5nIGFsbA0KPiB0aGUgZG9jdW1lbnRzIG9uIGEgc2luZ2xlIG1h
Y2hpbmU/DQo+DQo+DQo+DQo+IFRoYW5rcywNCj4NCj4gLWdjDQo+DQo+DQo+DQo+DQoNCi0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLQ0KVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1
Y2VuZS5hcGFjaGUub3JnDQpGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVz
ZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZw0KDQo=


From java-user-return-50231-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun 30 13:23:45 2011
Return-Path: <java-user-return-50231-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A470A6A34
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 30 Jun 2011 13:23:45 +0000 (UTC)
Received: (qmail 61684 invoked by uid 500); 30 Jun 2011 13:23:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61465 invoked by uid 500); 30 Jun 2011 13:23:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61372 invoked by uid 99); 30 Jun 2011 13:23:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jun 2011 13:23:41 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of sanne.grinovero@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jun 2011 13:23:35 +0000
Received: by iwi5 with SMTP id 5so3016919iwi.35
        for <java-user@lucene.apache.org>; Thu, 30 Jun 2011 06:23:14 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        bh=AmyqgF04oYz2jIyzfzHlr+90I6/khVtHqGZ5giG5asI=;
        b=wk+qQXOABXuM7uL5/G0j3ZTffpvnkPUb+qFfoGU65ceFkV6w8rA5VWUHovaRSVqy/Z
         WAaIlzSH/BonaeWlvIMDrNcZo4ItDXhZsPi4O+h04AR55mml7vxmE1uvvSvap6J1FQx3
         ENblckuUk81RbJFvz41OFdupzJqEFp3UkbzfA=
Received: by 10.42.163.10 with SMTP id a10mr2299800icy.493.1309440194129; Thu,
 30 Jun 2011 06:23:14 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.42.3.195 with HTTP; Thu, 30 Jun 2011 06:22:54 -0700 (PDT)
In-Reply-To: <A101F1DEC1952E47BB64C4E78BB1CFC9010FCB43@IDCEXCHVS.made2manage.com>
References: <A101F1DEC1952E47BB64C4E78BB1CFC9010FCB34@IDCEXCHVS.made2manage.com>
 <BANLkTimqEAuv6qVWVA1N2rVExoWsd+DMpg@mail.gmail.com> <A101F1DEC1952E47BB64C4E78BB1CFC9010FCB43@IDCEXCHVS.made2manage.com>
From: Sanne Grinovero <sanne.grinovero@gmail.com>
Date: Thu, 30 Jun 2011 14:22:54 +0100
Message-ID: <BANLkTimQWkDKc4ysiL_okOLPTku67y-Q3g@mail.gmail.com>
Subject: Re: distributing the indexing process
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,
you could have each node build a separate index, and then merge the
result back in a single consistent index using

org.apache.lucene.index.IndexWriter.addIndexes(Directory...)

Regards,
Sanne

2011/6/30 Guru Chandar <Guru.Chandar@consona.com>:
> Thanks for the response. The documents are all distinct. My (limited) und=
erstanding on partitioning the indexes will lead to results being different=
 from the case where you have all in one partition, due to Lucene currently=
 not supporting distributed idf. Is this correct? Is there a way to make it=
 work seamlessly?
>
> Regards,
> -gc
>
>
> -----Original Message-----
> From: Danil =C5=A2ORIN [mailto:torindan@gmail.com]
> Sent: Thursday, June 30, 2011 3:04 PM
> To: java-user@lucene.apache.org
> Subject: Re: distributing the indexing process
>
> It depends....
>
> If all documents are distinct then, yeah, go for it.
>
> If you have multiple versions of same document in your data and you
> only want to index the latest version...then you need a clever way to
> split data to make sure that all versions of document will be indexed
> on same host, and you won't have duplicates later.
>
> But my biggest concern is: if your index is that big that you need to
> index it on different hosts, are you sure you want it to be combine in
> a single index?
> Maybe it's a good idea to partition it?
>
> On Thu, Jun 30, 2011 at 12:12, Guru Chandar <Guru.Chandar@consona.com> wr=
ote:
>>
>>
>> If we have to index a lot of documents, is there a way to divide the
>> documents into multiple sets and index them on multiple machines in
>> parallel, and then merge the resulting indexes back into a single
>> machine? If yes, will the result be logically equivalent to indexing all
>> the documents on a single machine?
>>
>>
>>
>> Thanks,
>>
>> -gc
>>
>>
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50232-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun 30 13:37:58 2011
Return-Path: <java-user-return-50232-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8165A661F
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 30 Jun 2011 13:37:58 +0000 (UTC)
Received: (qmail 85176 invoked by uid 500); 30 Jun 2011 13:37:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85080 invoked by uid 500); 30 Jun 2011 13:37:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85069 invoked by uid 99); 30 Jun 2011 13:37:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jun 2011 13:37:55 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [130.225.24.68] (HELO sbexch03.sb.statsbiblioteket.dk) (130.225.24.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jun 2011 13:37:46 +0000
Received: from [130.225.25.23] (130.225.25.23) by
 sbexch03.sb.statsbiblioteket.dk (130.225.24.68) with Microsoft SMTP Server id
 8.3.159.2; Thu, 30 Jun 2011 15:37:26 +0200
Subject: RE: distributing the indexing process
From: Toke Eskildsen <te@statsbiblioteket.dk>
Reply-To: te@statsbiblioteket.dk
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <A101F1DEC1952E47BB64C4E78BB1CFC9010FCB43@IDCEXCHVS.made2manage.com>
References: <A101F1DEC1952E47BB64C4E78BB1CFC9010FCB34@IDCEXCHVS.made2manage.com>
	 <BANLkTimqEAuv6qVWVA1N2rVExoWsd+DMpg@mail.gmail.com>
	 <A101F1DEC1952E47BB64C4E78BB1CFC9010FCB43@IDCEXCHVS.made2manage.com>
Content-Type: text/plain; charset="UTF-8"
Organization: State and University Library, Denmark
Date: Thu, 30 Jun 2011 15:37:26 +0200
Message-ID: <1309441046.1603.30.camel@te-prime>
MIME-Version: 1.0
X-Mailer: Evolution 2.32.2 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, 2011-06-30 at 11:45 +0200, Guru Chandar wrote:
>  Thanks for the response. The documents are all distinct. My (limited)
>  understanding on partitioning the indexes will lead to results being
>  different from the case where you have all in one partition, due to
>  Lucene currently not supporting distributed idf. Is this correct?

Yes, that is a prime blocker for proper distributed search with Lucene.

>  Is there a way to make it work seamlessly?

There's some work being done with Solr, but it is not stable:
https://issues.apache.org/jira/browse/SOLR-1632

We're experimenting with distributed idf by assigning different weights
to the queries sent to different searchers, based on term statistics
from the different indexes. However, it is quite a hack and one we've
done because one of the indexes is external and out of our control.


3 years ago (or was it 4?) we also used distributed indexing with
searching being done on a single merged index. It worked surprisingly
well, but it was replaced by indexing on a single machine, when we
finally got around to doing a proper profiling of our indexing process
and removed some serious bottlenecks.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50233-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun 30 16:55:08 2011
Return-Path: <java-user-return-50233-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7EFAF608A
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 30 Jun 2011 16:55:08 +0000 (UTC)
Received: (qmail 98953 invoked by uid 500); 30 Jun 2011 16:55:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98872 invoked by uid 500); 30 Jun 2011 16:55:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98863 invoked by uid 99); 30 Jun 2011 16:55:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jun 2011 16:55:05 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of timeck@gmail.com designates 74.125.83.176 as permitted sender)
Received: from [74.125.83.176] (HELO mail-pv0-f176.google.com) (74.125.83.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jun 2011 16:54:58 +0000
Received: by pve37 with SMTP id 37so2841981pve.35
        for <java-user@lucene.apache.org>; Thu, 30 Jun 2011 09:54:37 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=from:to:references:in-reply-to:subject:date:message-id:mime-version
         :content-type:content-transfer-encoding:x-mailer:thread-index
         :content-language;
        bh=SwZH4sbWnsrnBn/Jvlhqj0B7gweVGFygOR7yOTyjKLg=;
        b=gOSEfNFpqqK14IE54NKIVL5Sb+eH4pI/2RTm/sBeFqKuHAgHO6CfjP8iSbO5dk8cdz
         KnAGj6PAYPnWXqEAKjzinl+dXFtzzsAt/Gt6+dMBDETqMFt0/NRGC/ceoI9wJDyg582m
         k2eySN6XhSOy3C8RoxoQpKqJCQ6mcRytTe1yo=
Received: by 10.68.4.102 with SMTP id j6mr2624179pbj.68.1309452876503;
        Thu, 30 Jun 2011 09:54:36 -0700 (PDT)
Received: from kermit ([12.116.106.202])
        by mx.google.com with ESMTPS id m7sm1527052pbk.6.2011.06.30.09.54.34
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 30 Jun 2011 09:54:35 -0700 (PDT)
From: "Tim Eck" <timeck@gmail.com>
To: <java-user@lucene.apache.org>
References: <02c401cc3121$2ea3cbb0$8beb6310$@com> <BANLkTi=F6TiwdqNoO0ptojR4VwRxvUAYBg@mail.gmail.com> <024301cc31e5$f480df20$dd829d60$@com> <BANLkTin6B1Ge64DqArO4MK25+1ePT0WV69aWdpzzFxftYRvAcg@mail.gmail.com> <020d01cc329a$803a5280$80aef780$@com> <BANLkTi=fvWLOYjW9hAT1OK68DniDS4CfWQ@mail.gmail.com>
In-Reply-To: <BANLkTi=fvWLOYjW9hAT1OK68DniDS4CfWQ@mail.gmail.com>
Subject: RE: field sorted searches with unbounded hit count
Date: Thu, 30 Jun 2011 09:54:29 -0700
Message-ID: <009f01cc3746$61d94890$258bd9b0$@com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: Acw0AQ+0zJ3HAouSRHKHxZ6+/7mOkgDRTrTA
Content-Language: en-us
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for the confirmation Mike, two pass search it is. I appreciate the
knowledge on this list very much! 

-----Original Message-----
From: Michael McCandless [mailto:lucene@mikemccandless.com] 
Sent: Sunday, June 26, 2011 6:00 AM
To: java-user@lucene.apache.org
Subject: Re: field sorted searches with unbounded hit count

On Fri, Jun 24, 2011 at 2:14 PM, Tim Eck <timeck@gmail.com> wrote:

> I'm currently using the "real-time" readers from IndexWriter.getReader()
and never closing my IndexWriter. I was (perhaps wrongly) assuming that
those readers can observe mutations that have occurred after creating them.

Actually, the NRT reader (from IW.getReader() or, in newer releases,
IR.open(IW)) is still a point-in-time reader, ie, it will only reflect
changes done in IW before it was opened.

Mike McCandless

http://blog.mikemccandless.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50234-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jun 30 20:53:18 2011
Return-Path: <java-user-return-50234-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B99FF6024
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 30 Jun 2011 20:53:18 +0000 (UTC)
Received: (qmail 281 invoked by uid 500); 30 Jun 2011 20:53:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 153 invoked by uid 500); 30 Jun 2011 20:53:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 145 invoked by uid 99); 30 Jun 2011 20:53:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jun 2011 20:53:15 +0000
X-ASF-Spam-Status: No, hits=-0.1 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dean.hiller@broadridge.com designates 64.18.2.22 as permitted sender)
Received: from [64.18.2.22] (HELO exprod7og122.obsmtp.com) (64.18.2.22)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jun 2011 20:53:05 +0000
Received: from gwm.broadridge.com ([167.212.2.180]) (using TLSv1) by exprod7ob122.postini.com ([64.18.6.12]) with SMTP
	ID DSNKTgziGy6oqKFiIAIbsgDbha1Fox1oBa6U@postini.com; Thu, 30 Jun 2011 13:52:45 PDT
Received: from jsppsldlpsi02.broadridge.net ([10.98.54.12])
	by gwm.broadridge.com (8.13.8/8.13.8) with ESMTP id p5UKqUxX999636
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Thu, 30 Jun 2011 16:52:30 -0400
Received: from JSIPSWEXHA01.bsg.ad.adp.com (jsipswexha01.bsg.ad.adp.com [10.17.69.24]) by jsppsldlpsi02.broadridge.net (RSA Interceptor) for <java-user@lucene.apache.org>; Thu, 30 Jun 2011 16:52:22 -0400
Received: from jscpcwexmaa1.bsg.ad.adp.com ([fe80::bd03:d3d2:b433:1ecb]) by
 JSIPSWEXHA01.bsg.ad.adp.com ([::1]) with mapi; Thu, 30 Jun 2011 16:52:16
 -0400
From: "Hiller, Dean  x66079" <dean.hiller@broadridge.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Thu, 30 Jun 2011 16:52:14 -0400
Subject: Too many open files and ulimit limits reached 
Thread-Topic: Too many open files and ulimit limits reached 
Thread-Index: Acw3Z5cmslosWQE7SJKzqxV+QsBvVg==
Message-ID: <08230D4C8E666D479F6DE495A7684DCD0B463BDF@JSCPCWEXMAA1.bsg.ad.adp.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: en-US
Content-Type: multipart/alternative;
	boundary="_000_08230D4C8E666D479F6DE495A7684DCD0B463BDFJSCPCWEXMAA1bsg_"
MIME-Version: 1.0
X-RSA-Inspected: yes
X-RSA-Classifications: public
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_08230D4C8E666D479F6DE495A7684DCD0B463BDFJSCPCWEXMAA1bsg_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

When I do a writer.open(), writer.add(), writer.close(), how many files can=
 I expect to be opened with Lucene.

I am running indexes on some very big data so we have 160000 writers open a=
nd I hit the limit of 200000 on my machine so I increased it to the max of =
1048576 files open, BUT that might not be enough???  I may have to lower my=
 cache of 160000 to be smaller so curious on how many files open per index.

Thanks,
Dean

This message and any attachments are intended only for the use of the add=
ressee and may contain information that is privileged and confidential. I=
f the reader of the message is not the intended recipient or an authorize=
d representative of the intended recipient, you are hereby notified that =
any dissemination of this communication is strictly prohibited. If you ha=
ve received this communication in error, please notify us immediately by =
e-mail and delete the message and any attachments from your system.
=0D
--_000_08230D4C8E666D479F6DE495A7684DCD0B463BDFJSCPCWEXMAA1bsg_--

